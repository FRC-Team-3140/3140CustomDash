(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();function X9(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var MU={exports:{}},eM={},SU={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy=Symbol.for("react.element"),Y9=Symbol.for("react.portal"),K9=Symbol.for("react.fragment"),Z9=Symbol.for("react.strict_mode"),J9=Symbol.for("react.profiler"),Q9=Symbol.for("react.provider"),eG=Symbol.for("react.context"),tG=Symbol.for("react.forward_ref"),iG=Symbol.for("react.suspense"),rG=Symbol.for("react.memo"),nG=Symbol.for("react.lazy"),YL=Symbol.iterator;function sG(i){return i===null||typeof i!="object"?null:(i=YL&&i[YL]||i["@@iterator"],typeof i=="function"?i:null)}var TU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},EU=Object.assign,AU={};function Tm(i,e,t){this.props=i,this.context=e,this.refs=AU,this.updater=t||TU}Tm.prototype.isReactComponent={};Tm.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};Tm.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function kU(){}kU.prototype=Tm.prototype;function Fk(i,e,t){this.props=i,this.context=e,this.refs=AU,this.updater=t||TU}var Bk=Fk.prototype=new kU;Bk.constructor=Fk;EU(Bk,Tm.prototype);Bk.isPureReactComponent=!0;var KL=Array.isArray,CU=Object.prototype.hasOwnProperty,Vk={current:null},$U={key:!0,ref:!0,__self:!0,__source:!0};function LU(i,e,t){var r,n={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)CU.call(e,r)&&!$U.hasOwnProperty(r)&&(n[r]=e[r]);var a=arguments.length-2;if(a===1)n.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];n.children=l}if(i&&i.defaultProps)for(r in a=i.defaultProps,a)n[r]===void 0&&(n[r]=a[r]);return{$$typeof:vy,type:i,key:s,ref:o,props:n,_owner:Vk.current}}function oG(i,e){return{$$typeof:vy,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function jk(i){return typeof i=="object"&&i!==null&&i.$$typeof===vy}function aG(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var ZL=/\/+/g;function US(i,e){return typeof i=="object"&&i!==null&&i.key!=null?aG(""+i.key):e.toString(36)}function bb(i,e,t,r,n){var s=typeof i;(s==="undefined"||s==="boolean")&&(i=null);var o=!1;if(i===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(i.$$typeof){case vy:case Y9:o=!0}}if(o)return o=i,n=n(o),i=r===""?"."+US(o,0):r,KL(n)?(t="",i!=null&&(t=i.replace(ZL,"$&/")+"/"),bb(n,e,t,"",function(c){return c})):n!=null&&(jk(n)&&(n=oG(n,t+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(ZL,"$&/")+"/")+i)),e.push(n)),1;if(o=0,r=r===""?".":r+":",KL(i))for(var a=0;a<i.length;a++){s=i[a];var l=r+US(s,a);o+=bb(s,e,t,l,n)}else if(l=sG(i),typeof l=="function")for(i=l.call(i),a=0;!(s=i.next()).done;)s=s.value,l=r+US(s,a++),o+=bb(s,e,t,l,n);else if(s==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xv(i,e,t){if(i==null)return i;var r=[],n=0;return bb(i,r,"","",function(s){return e.call(t,s,n++)}),r}function lG(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var an={current:null},xb={transition:null},cG={ReactCurrentDispatcher:an,ReactCurrentBatchConfig:xb,ReactCurrentOwner:Vk};function RU(){throw Error("act(...) is not supported in production builds of React.")}jt.Children={map:xv,forEach:function(i,e,t){xv(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return xv(i,function(){e++}),e},toArray:function(i){return xv(i,function(e){return e})||[]},only:function(i){if(!jk(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};jt.Component=Tm;jt.Fragment=K9;jt.Profiler=J9;jt.PureComponent=Fk;jt.StrictMode=Z9;jt.Suspense=iG;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cG;jt.act=RU;jt.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var r=EU({},i.props),n=i.key,s=i.ref,o=i._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Vk.current),e.key!==void 0&&(n=""+e.key),i.type&&i.type.defaultProps)var a=i.type.defaultProps;for(l in e)CU.call(e,l)&&!$U.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:vy,type:i.type,key:n,ref:s,props:r,_owner:o}};jt.createContext=function(i){return i={$$typeof:eG,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:Q9,_context:i},i.Consumer=i};jt.createElement=LU;jt.createFactory=function(i){var e=LU.bind(null,i);return e.type=i,e};jt.createRef=function(){return{current:null}};jt.forwardRef=function(i){return{$$typeof:tG,render:i}};jt.isValidElement=jk;jt.lazy=function(i){return{$$typeof:nG,_payload:{_status:-1,_result:i},_init:lG}};jt.memo=function(i,e){return{$$typeof:rG,type:i,compare:e===void 0?null:e}};jt.startTransition=function(i){var e=xb.transition;xb.transition={};try{i()}finally{xb.transition=e}};jt.unstable_act=RU;jt.useCallback=function(i,e){return an.current.useCallback(i,e)};jt.useContext=function(i){return an.current.useContext(i)};jt.useDebugValue=function(){};jt.useDeferredValue=function(i){return an.current.useDeferredValue(i)};jt.useEffect=function(i,e){return an.current.useEffect(i,e)};jt.useId=function(){return an.current.useId()};jt.useImperativeHandle=function(i,e,t){return an.current.useImperativeHandle(i,e,t)};jt.useInsertionEffect=function(i,e){return an.current.useInsertionEffect(i,e)};jt.useLayoutEffect=function(i,e){return an.current.useLayoutEffect(i,e)};jt.useMemo=function(i,e){return an.current.useMemo(i,e)};jt.useReducer=function(i,e,t){return an.current.useReducer(i,e,t)};jt.useRef=function(i){return an.current.useRef(i)};jt.useState=function(i){return an.current.useState(i)};jt.useSyncExternalStore=function(i,e,t){return an.current.useSyncExternalStore(i,e,t)};jt.useTransition=function(){return an.current.useTransition()};jt.version="18.3.1";SU.exports=jt;var xo=SU.exports;const yt=X9(xo);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uG=xo,hG=Symbol.for("react.element"),dG=Symbol.for("react.fragment"),pG=Object.prototype.hasOwnProperty,fG=uG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mG={key:!0,ref:!0,__self:!0,__source:!0};function PU(i,e,t){var r,n={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)pG.call(e,r)&&!mG.hasOwnProperty(r)&&(n[r]=e[r]);if(i&&i.defaultProps)for(r in e=i.defaultProps,e)n[r]===void 0&&(n[r]=e[r]);return{$$typeof:hG,type:i,key:s,ref:o,props:n,_owner:fG.current}}eM.Fragment=dG;eM.jsx=PU;eM.jsxs=PU;MU.exports=eM;var Ei=MU.exports,GE={},NU={exports:{}},Qn={},IU={exports:{}},DU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(j,X){var ne=j.length;j.push(X);e:for(;0<ne;){var ge=ne-1>>>1,pe=j[ge];if(0<n(pe,X))j[ge]=X,j[ne]=pe,ne=ge;else break e}}function t(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var X=j[0],ne=j.pop();if(ne!==X){j[0]=ne;e:for(var ge=0,pe=j.length,V=pe>>>1;ge<V;){var Y=2*(ge+1)-1,ae=j[Y],J=Y+1,z=j[J];if(0>n(ae,ne))J<pe&&0>n(z,ae)?(j[ge]=z,j[J]=ne,ge=J):(j[ge]=ae,j[Y]=ne,ge=Y);else if(J<pe&&0>n(z,ne))j[ge]=z,j[J]=ne,ge=J;else break e}}return X}function n(j,X){var ne=j.sortIndex-X.sortIndex;return ne!==0?ne:j.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,g=!1,v=!1,m=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(j){for(var X=t(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=j)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(c)}}function x(j){if(v=!1,_(j),!g)if(t(l)!==null)g=!0,B(w);else{var X=t(c);X!==null&&Q(x,X.startTime-j)}}function w(j,X){g=!1,v&&(v=!1,p(k),k=-1),f=!0;var ne=d;try{for(_(X),h=t(l);h!==null&&(!(h.expirationTime>X)||j&&!P());){var ge=h.callback;if(typeof ge=="function"){h.callback=null,d=h.priorityLevel;var pe=ge(h.expirationTime<=X);X=i.unstable_now(),typeof pe=="function"?h.callback=pe:h===t(l)&&r(l),_(X)}else r(l);h=t(l)}if(h!==null)var V=!0;else{var Y=t(c);Y!==null&&Q(x,Y.startTime-X),V=!1}return V}finally{h=null,d=ne,f=!1}}var S=!1,A=null,k=-1,M=5,b=-1;function P(){return!(i.unstable_now()-b<M)}function N(){if(A!==null){var j=i.unstable_now();b=j;var X=!0;try{X=A(!0,j)}finally{X?D():(S=!1,A=null)}}else S=!1}var D;if(typeof y=="function")D=function(){y(N)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,G=U.port2;U.port1.onmessage=N,D=function(){G.postMessage(null)}}else D=function(){m(N,0)};function B(j){A=j,S||(S=!0,D())}function Q(j,X){k=m(function(){j(i.unstable_now())},X)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_continueExecution=function(){g||f||(g=!0,B(w))},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return d},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(j){switch(d){case 1:case 2:case 3:var X=3;break;default:X=d}var ne=d;d=X;try{return j()}finally{d=ne}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(j,X){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ne=d;d=j;try{return X()}finally{d=ne}},i.unstable_scheduleCallback=function(j,X,ne){var ge=i.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ge+ne:ge):ne=ge,j){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ne+pe,j={id:u++,callback:X,priorityLevel:j,startTime:ne,expirationTime:pe,sortIndex:-1},ne>ge?(j.sortIndex=ne,e(c,j),t(l)===null&&j===t(c)&&(v?(p(k),k=-1):v=!0,Q(x,ne-ge))):(j.sortIndex=pe,e(l,j),g||f||(g=!0,B(w))),j},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(j){var X=d;return function(){var ne=d;d=X;try{return j.apply(this,arguments)}finally{d=ne}}}})(DU);IU.exports=DU;var gG=IU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _G=xo,Xn=gG;function Xe(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OU=new Set,P_={};function qh(i,e){Ff(i,e),Ff(i+"Capture",e)}function Ff(i,e){for(P_[i]=e,i=0;i<e.length;i++)OU.add(e[i])}var sl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),WE=Object.prototype.hasOwnProperty,yG=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JL={},QL={};function vG(i){return WE.call(QL,i)?!0:WE.call(JL,i)?!1:yG.test(i)?QL[i]=!0:(JL[i]=!0,!1)}function bG(i,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function xG(i,e,t,r){if(e===null||typeof e>"u"||bG(i,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ln(i,e,t,r,n,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Rr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Rr[i]=new ln(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];Rr[e]=new ln(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Rr[i]=new ln(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Rr[i]=new ln(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Rr[i]=new ln(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Rr[i]=new ln(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Rr[i]=new ln(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Rr[i]=new ln(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Rr[i]=new ln(i,5,!1,i.toLowerCase(),null,!1,!1)});var Hk=/[\-:]([a-z])/g;function Gk(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(Hk,Gk);Rr[e]=new ln(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(Hk,Gk);Rr[e]=new ln(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(Hk,Gk);Rr[e]=new ln(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Rr[i]=new ln(i,1,!1,i.toLowerCase(),null,!1,!1)});Rr.xlinkHref=new ln("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Rr[i]=new ln(i,1,!1,i.toLowerCase(),null,!0,!0)});function Wk(i,e,t,r){var n=Rr.hasOwnProperty(e)?Rr[e]:null;(n!==null?n.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xG(e,t,n,r)&&(t=null),r||n===null?vG(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):n.mustUseProperty?i[n.propertyName]=t===null?n.type===3?!1:"":t:(e=n.attributeName,r=n.attributeNamespace,t===null?i.removeAttribute(e):(n=n.type,t=n===3||n===4&&t===!0?"":""+t,r?i.setAttributeNS(r,e,t):i.setAttribute(e,t))))}var _l=_G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wv=Symbol.for("react.element"),Gp=Symbol.for("react.portal"),Wp=Symbol.for("react.fragment"),qk=Symbol.for("react.strict_mode"),qE=Symbol.for("react.profiler"),UU=Symbol.for("react.provider"),zU=Symbol.for("react.context"),Xk=Symbol.for("react.forward_ref"),XE=Symbol.for("react.suspense"),YE=Symbol.for("react.suspense_list"),Yk=Symbol.for("react.memo"),rc=Symbol.for("react.lazy"),FU=Symbol.for("react.offscreen"),eR=Symbol.iterator;function mg(i){return i===null||typeof i!="object"?null:(i=eR&&i[eR]||i["@@iterator"],typeof i=="function"?i:null)}var Ci=Object.assign,zS;function r0(i){if(zS===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);zS=e&&e[1]||""}return`
`+zS+i}var FS=!1;function BS(i,e){if(!i||FS)return"";FS=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(i,[],e)}else{try{e.call()}catch(c){r=c}i.call(e.prototype)}else{try{throw Error()}catch(c){r=c}i()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var n=c.stack.split(`
`),s=r.stack.split(`
`),o=n.length-1,a=s.length-1;1<=o&&0<=a&&n[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==s[a]){var l=`
`+n[o].replace(" at new "," at ");return i.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",i.displayName)),l}while(1<=o&&0<=a);break}}}finally{FS=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?r0(i):""}function wG(i){switch(i.tag){case 5:return r0(i.type);case 16:return r0("Lazy");case 13:return r0("Suspense");case 19:return r0("SuspenseList");case 0:case 2:case 15:return i=BS(i.type,!1),i;case 11:return i=BS(i.type.render,!1),i;case 1:return i=BS(i.type,!0),i;default:return""}}function KE(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Wp:return"Fragment";case Gp:return"Portal";case qE:return"Profiler";case qk:return"StrictMode";case XE:return"Suspense";case YE:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case zU:return(i.displayName||"Context")+".Consumer";case UU:return(i._context.displayName||"Context")+".Provider";case Xk:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Yk:return e=i.displayName||null,e!==null?e:KE(i.type)||"Memo";case rc:e=i._payload,i=i._init;try{return KE(i(e))}catch{}}return null}function MG(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return KE(e);case 8:return e===qk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rc(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function BU(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SG(i){var e=BU(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),r=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var n=t.get,s=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return n.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Mv(i){i._valueTracker||(i._valueTracker=SG(i))}function VU(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return i&&(r=BU(i)?i.checked?"true":"false":i.value),i=r,i!==t?(e.setValue(i),!0):!1}function Px(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function ZE(i,e){var t=e.checked;return Ci({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??i._wrapperState.initialChecked})}function tR(i,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Rc(e.value!=null?e.value:t),i._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jU(i,e){e=e.checked,e!=null&&Wk(i,"checked",e,!1)}function JE(i,e){jU(i,e);var t=Rc(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(r==="submit"||r==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?QE(i,e.type,t):e.hasOwnProperty("defaultValue")&&QE(i,e.type,Rc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function iR(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function QE(i,e,t){(e!=="number"||Px(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var n0=Array.isArray;function mf(i,e,t,r){if(i=i.options,e){e={};for(var n=0;n<t.length;n++)e["$"+t[n]]=!0;for(t=0;t<i.length;t++)n=e.hasOwnProperty("$"+i[t].value),i[t].selected!==n&&(i[t].selected=n),n&&r&&(i[t].defaultSelected=!0)}else{for(t=""+Rc(t),e=null,n=0;n<i.length;n++){if(i[n].value===t){i[n].selected=!0,r&&(i[n].defaultSelected=!0);return}e!==null||i[n].disabled||(e=i[n])}e!==null&&(e.selected=!0)}}function eA(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Xe(91));return Ci({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function rR(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Xe(92));if(n0(t)){if(1<t.length)throw Error(Xe(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:Rc(t)}}function HU(i,e){var t=Rc(e.value),r=Rc(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),r!=null&&(i.defaultValue=""+r)}function nR(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function GU(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tA(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?GU(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Sv,WU=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return i(e,t,r,n)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(Sv=Sv||document.createElement("div"),Sv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sv.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function N_(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var Y0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TG=["Webkit","ms","Moz","O"];Object.keys(Y0).forEach(function(i){TG.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),Y0[e]=Y0[i]})});function qU(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Y0.hasOwnProperty(i)&&Y0[i]?(""+e).trim():e+"px"}function XU(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,n=qU(t,e[t],r);t==="float"&&(t="cssFloat"),r?i.setProperty(t,n):i[t]=n}}var EG=Ci({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function iA(i,e){if(e){if(EG[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Xe(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Xe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Xe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Xe(62))}}function rA(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nA=null;function Kk(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var sA=null,gf=null,_f=null;function sR(i){if(i=wy(i)){if(typeof sA!="function")throw Error(Xe(280));var e=i.stateNode;e&&(e=sM(e),sA(i.stateNode,i.type,e))}}function YU(i){gf?_f?_f.push(i):_f=[i]:gf=i}function KU(){if(gf){var i=gf,e=_f;if(_f=gf=null,sR(i),e)for(i=0;i<e.length;i++)sR(e[i])}}function ZU(i,e){return i(e)}function JU(){}var VS=!1;function QU(i,e,t){if(VS)return i(e,t);VS=!0;try{return ZU(i,e,t)}finally{VS=!1,(gf!==null||_f!==null)&&(JU(),KU())}}function I_(i,e){var t=i.stateNode;if(t===null)return null;var r=sM(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(i=i.type,r=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!r;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(Xe(231,e,typeof t));return t}var oA=!1;if(sl)try{var gg={};Object.defineProperty(gg,"passive",{get:function(){oA=!0}}),window.addEventListener("test",gg,gg),window.removeEventListener("test",gg,gg)}catch{oA=!1}function AG(i,e,t,r,n,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var K0=!1,Nx=null,Ix=!1,aA=null,kG={onError:function(i){K0=!0,Nx=i}};function CG(i,e,t,r,n,s,o,a,l){K0=!1,Nx=null,AG.apply(kG,arguments)}function $G(i,e,t,r,n,s,o,a,l){if(CG.apply(this,arguments),K0){if(K0){var c=Nx;K0=!1,Nx=null}else throw Error(Xe(198));Ix||(Ix=!0,aA=c)}}function Xh(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function ez(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function oR(i){if(Xh(i)!==i)throw Error(Xe(188))}function LG(i){var e=i.alternate;if(!e){if(e=Xh(i),e===null)throw Error(Xe(188));return e!==i?null:i}for(var t=i,r=e;;){var n=t.return;if(n===null)break;var s=n.alternate;if(s===null){if(r=n.return,r!==null){t=r;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===t)return oR(n),i;if(s===r)return oR(n),e;s=s.sibling}throw Error(Xe(188))}if(t.return!==r.return)t=n,r=s;else{for(var o=!1,a=n.child;a;){if(a===t){o=!0,t=n,r=s;break}if(a===r){o=!0,r=n,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=n;break}if(a===r){o=!0,r=s,t=n;break}a=a.sibling}if(!o)throw Error(Xe(189))}}if(t.alternate!==r)throw Error(Xe(190))}if(t.tag!==3)throw Error(Xe(188));return t.stateNode.current===t?i:e}function tz(i){return i=LG(i),i!==null?iz(i):null}function iz(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=iz(i);if(e!==null)return e;i=i.sibling}return null}var rz=Xn.unstable_scheduleCallback,aR=Xn.unstable_cancelCallback,RG=Xn.unstable_shouldYield,PG=Xn.unstable_requestPaint,Bi=Xn.unstable_now,NG=Xn.unstable_getCurrentPriorityLevel,Zk=Xn.unstable_ImmediatePriority,nz=Xn.unstable_UserBlockingPriority,Dx=Xn.unstable_NormalPriority,IG=Xn.unstable_LowPriority,sz=Xn.unstable_IdlePriority,tM=null,jo=null;function DG(i){if(jo&&typeof jo.onCommitFiberRoot=="function")try{jo.onCommitFiberRoot(tM,i,void 0,(i.current.flags&128)===128)}catch{}}var _o=Math.clz32?Math.clz32:zG,OG=Math.log,UG=Math.LN2;function zG(i){return i>>>=0,i===0?32:31-(OG(i)/UG|0)|0}var Tv=64,Ev=4194304;function s0(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ox(i,e){var t=i.pendingLanes;if(t===0)return 0;var r=0,n=i.suspendedLanes,s=i.pingedLanes,o=t&268435455;if(o!==0){var a=o&~n;a!==0?r=s0(a):(s&=o,s!==0&&(r=s0(s)))}else o=t&~n,o!==0?r=s0(o):s!==0&&(r=s0(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&n)&&(n=r&-r,s=e&-e,n>=s||n===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=r;0<e;)t=31-_o(e),n=1<<t,r|=i[t],e&=~n;return r}function FG(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BG(i,e){for(var t=i.suspendedLanes,r=i.pingedLanes,n=i.expirationTimes,s=i.pendingLanes;0<s;){var o=31-_o(s),a=1<<o,l=n[o];l===-1?(!(a&t)||a&r)&&(n[o]=FG(a,e)):l<=e&&(i.expiredLanes|=a),s&=~a}}function lA(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function oz(){var i=Tv;return Tv<<=1,!(Tv&4194240)&&(Tv=64),i}function jS(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function by(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-_o(e),i[e]=t}function VG(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var r=i.eventTimes;for(i=i.expirationTimes;0<t;){var n=31-_o(t),s=1<<n;e[n]=0,r[n]=-1,i[n]=-1,t&=~s}}function Jk(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var r=31-_o(t),n=1<<r;n&e|i[r]&e&&(i[r]|=e),t&=~n}}var ii=0;function az(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var lz,Qk,cz,uz,hz,cA=!1,Av=[],wc=null,Mc=null,Sc=null,D_=new Map,O_=new Map,ac=[],jG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lR(i,e){switch(i){case"focusin":case"focusout":wc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Sc=null;break;case"pointerover":case"pointerout":D_.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":O_.delete(e.pointerId)}}function _g(i,e,t,r,n,s){return i===null||i.nativeEvent!==s?(i={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[n]},e!==null&&(e=wy(e),e!==null&&Qk(e)),i):(i.eventSystemFlags|=r,e=i.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),i)}function HG(i,e,t,r,n){switch(e){case"focusin":return wc=_g(wc,i,e,t,r,n),!0;case"dragenter":return Mc=_g(Mc,i,e,t,r,n),!0;case"mouseover":return Sc=_g(Sc,i,e,t,r,n),!0;case"pointerover":var s=n.pointerId;return D_.set(s,_g(D_.get(s)||null,i,e,t,r,n)),!0;case"gotpointercapture":return s=n.pointerId,O_.set(s,_g(O_.get(s)||null,i,e,t,r,n)),!0}return!1}function dz(i){var e=Xu(i.target);if(e!==null){var t=Xh(e);if(t!==null){if(e=t.tag,e===13){if(e=ez(t),e!==null){i.blockedOn=e,hz(i.priority,function(){cz(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function wb(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=uA(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var r=new t.constructor(t.type,t);nA=r,t.target.dispatchEvent(r),nA=null}else return e=wy(t),e!==null&&Qk(e),i.blockedOn=t,!1;e.shift()}return!0}function cR(i,e,t){wb(i)&&t.delete(e)}function GG(){cA=!1,wc!==null&&wb(wc)&&(wc=null),Mc!==null&&wb(Mc)&&(Mc=null),Sc!==null&&wb(Sc)&&(Sc=null),D_.forEach(cR),O_.forEach(cR)}function yg(i,e){i.blockedOn===e&&(i.blockedOn=null,cA||(cA=!0,Xn.unstable_scheduleCallback(Xn.unstable_NormalPriority,GG)))}function U_(i){function e(n){return yg(n,i)}if(0<Av.length){yg(Av[0],i);for(var t=1;t<Av.length;t++){var r=Av[t];r.blockedOn===i&&(r.blockedOn=null)}}for(wc!==null&&yg(wc,i),Mc!==null&&yg(Mc,i),Sc!==null&&yg(Sc,i),D_.forEach(e),O_.forEach(e),t=0;t<ac.length;t++)r=ac[t],r.blockedOn===i&&(r.blockedOn=null);for(;0<ac.length&&(t=ac[0],t.blockedOn===null);)dz(t),t.blockedOn===null&&ac.shift()}var yf=_l.ReactCurrentBatchConfig,Ux=!0;function WG(i,e,t,r){var n=ii,s=yf.transition;yf.transition=null;try{ii=1,eC(i,e,t,r)}finally{ii=n,yf.transition=s}}function qG(i,e,t,r){var n=ii,s=yf.transition;yf.transition=null;try{ii=4,eC(i,e,t,r)}finally{ii=n,yf.transition=s}}function eC(i,e,t,r){if(Ux){var n=uA(i,e,t,r);if(n===null)QS(i,e,r,zx,t),lR(i,r);else if(HG(n,i,e,t,r))r.stopPropagation();else if(lR(i,r),e&4&&-1<jG.indexOf(i)){for(;n!==null;){var s=wy(n);if(s!==null&&lz(s),s=uA(i,e,t,r),s===null&&QS(i,e,r,zx,t),s===n)break;n=s}n!==null&&r.stopPropagation()}else QS(i,e,r,null,t)}}var zx=null;function uA(i,e,t,r){if(zx=null,i=Kk(r),i=Xu(i),i!==null)if(e=Xh(i),e===null)i=null;else if(t=e.tag,t===13){if(i=ez(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return zx=i,null}function pz(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NG()){case Zk:return 1;case nz:return 4;case Dx:case IG:return 16;case sz:return 536870912;default:return 16}default:return 16}}var pc=null,tC=null,Mb=null;function fz(){if(Mb)return Mb;var i,e=tC,t=e.length,r,n="value"in pc?pc.value:pc.textContent,s=n.length;for(i=0;i<t&&e[i]===n[i];i++);var o=t-i;for(r=1;r<=o&&e[t-r]===n[s-r];r++);return Mb=n.slice(i,1<r?1-r:void 0)}function Sb(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function kv(){return!0}function uR(){return!1}function es(i){function e(t,r,n,s,o){this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in i)i.hasOwnProperty(a)&&(t=i[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?kv:uR,this.isPropagationStopped=uR,this}return Ci(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=kv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=kv)},persist:function(){},isPersistent:kv}),e}var Em={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iC=es(Em),xy=Ci({},Em,{view:0,detail:0}),XG=es(xy),HS,GS,vg,iM=Ci({},xy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rC,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==vg&&(vg&&i.type==="mousemove"?(HS=i.screenX-vg.screenX,GS=i.screenY-vg.screenY):GS=HS=0,vg=i),HS)},movementY:function(i){return"movementY"in i?i.movementY:GS}}),hR=es(iM),YG=Ci({},iM,{dataTransfer:0}),KG=es(YG),ZG=Ci({},xy,{relatedTarget:0}),WS=es(ZG),JG=Ci({},Em,{animationName:0,elapsedTime:0,pseudoElement:0}),QG=es(JG),eW=Ci({},Em,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),tW=es(eW),iW=Ci({},Em,{data:0}),dR=es(iW),rW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oW(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=sW[i])?!!e[i]:!1}function rC(){return oW}var aW=Ci({},xy,{key:function(i){if(i.key){var e=rW[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=Sb(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?nW[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rC,charCode:function(i){return i.type==="keypress"?Sb(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Sb(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),lW=es(aW),cW=Ci({},iM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pR=es(cW),uW=Ci({},xy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rC}),hW=es(uW),dW=Ci({},Em,{propertyName:0,elapsedTime:0,pseudoElement:0}),pW=es(dW),fW=Ci({},iM,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),mW=es(fW),gW=[9,13,27,32],nC=sl&&"CompositionEvent"in window,Z0=null;sl&&"documentMode"in document&&(Z0=document.documentMode);var _W=sl&&"TextEvent"in window&&!Z0,mz=sl&&(!nC||Z0&&8<Z0&&11>=Z0),fR=String.fromCharCode(32),mR=!1;function gz(i,e){switch(i){case"keyup":return gW.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _z(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var qp=!1;function yW(i,e){switch(i){case"compositionend":return _z(e);case"keypress":return e.which!==32?null:(mR=!0,fR);case"textInput":return i=e.data,i===fR&&mR?null:i;default:return null}}function vW(i,e){if(qp)return i==="compositionend"||!nC&&gz(i,e)?(i=fz(),Mb=tC=pc=null,qp=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mz&&e.locale!=="ko"?null:e.data;default:return null}}var bW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gR(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!bW[i.type]:e==="textarea"}function yz(i,e,t,r){YU(r),e=Fx(e,"onChange"),0<e.length&&(t=new iC("onChange","change",null,t,r),i.push({event:t,listeners:e}))}var J0=null,z_=null;function xW(i){Cz(i,0)}function rM(i){var e=Kp(i);if(VU(e))return i}function wW(i,e){if(i==="change")return e}var vz=!1;if(sl){var qS;if(sl){var XS="oninput"in document;if(!XS){var _R=document.createElement("div");_R.setAttribute("oninput","return;"),XS=typeof _R.oninput=="function"}qS=XS}else qS=!1;vz=qS&&(!document.documentMode||9<document.documentMode)}function yR(){J0&&(J0.detachEvent("onpropertychange",bz),z_=J0=null)}function bz(i){if(i.propertyName==="value"&&rM(z_)){var e=[];yz(e,z_,i,Kk(i)),QU(xW,e)}}function MW(i,e,t){i==="focusin"?(yR(),J0=e,z_=t,J0.attachEvent("onpropertychange",bz)):i==="focusout"&&yR()}function SW(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return rM(z_)}function TW(i,e){if(i==="click")return rM(e)}function EW(i,e){if(i==="input"||i==="change")return rM(e)}function AW(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var wo=typeof Object.is=="function"?Object.is:AW;function F_(i,e){if(wo(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var n=t[r];if(!WE.call(e,n)||!wo(i[n],e[n]))return!1}return!0}function vR(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function bR(i,e){var t=vR(i);i=0;for(var r;t;){if(t.nodeType===3){if(r=i+t.textContent.length,i<=e&&r>=e)return{node:t,offset:e-i};i=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=vR(t)}}function xz(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?xz(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function wz(){for(var i=window,e=Px();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=Px(i.document)}return e}function sC(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function kW(i){var e=wz(),t=i.focusedElem,r=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&xz(t.ownerDocument.documentElement,t)){if(r!==null&&sC(t)){if(e=r.start,i=r.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var n=t.textContent.length,s=Math.min(r.start,n);r=r.end===void 0?s:Math.min(r.end,n),!i.extend&&s>r&&(n=r,r=s,s=n),n=bR(t,s);var o=bR(t,r);n&&o&&(i.rangeCount!==1||i.anchorNode!==n.node||i.anchorOffset!==n.offset||i.focusNode!==o.node||i.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),i.removeAllRanges(),s>r?(i.addRange(e),i.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var CW=sl&&"documentMode"in document&&11>=document.documentMode,Xp=null,hA=null,Q0=null,dA=!1;function xR(i,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;dA||Xp==null||Xp!==Px(r)||(r=Xp,"selectionStart"in r&&sC(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Q0&&F_(Q0,r)||(Q0=r,r=Fx(hA,"onSelect"),0<r.length&&(e=new iC("onSelect","select",null,e,t),i.push({event:e,listeners:r}),e.target=Xp)))}function Cv(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var Yp={animationend:Cv("Animation","AnimationEnd"),animationiteration:Cv("Animation","AnimationIteration"),animationstart:Cv("Animation","AnimationStart"),transitionend:Cv("Transition","TransitionEnd")},YS={},Mz={};sl&&(Mz=document.createElement("div").style,"AnimationEvent"in window||(delete Yp.animationend.animation,delete Yp.animationiteration.animation,delete Yp.animationstart.animation),"TransitionEvent"in window||delete Yp.transitionend.transition);function nM(i){if(YS[i])return YS[i];if(!Yp[i])return i;var e=Yp[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in Mz)return YS[i]=e[t];return i}var Sz=nM("animationend"),Tz=nM("animationiteration"),Ez=nM("animationstart"),Az=nM("transitionend"),kz=new Map,wR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dc(i,e){kz.set(i,e),qh(e,[i])}for(var KS=0;KS<wR.length;KS++){var ZS=wR[KS],$W=ZS.toLowerCase(),LW=ZS[0].toUpperCase()+ZS.slice(1);Dc($W,"on"+LW)}Dc(Sz,"onAnimationEnd");Dc(Tz,"onAnimationIteration");Dc(Ez,"onAnimationStart");Dc("dblclick","onDoubleClick");Dc("focusin","onFocus");Dc("focusout","onBlur");Dc(Az,"onTransitionEnd");Ff("onMouseEnter",["mouseout","mouseover"]);Ff("onMouseLeave",["mouseout","mouseover"]);Ff("onPointerEnter",["pointerout","pointerover"]);Ff("onPointerLeave",["pointerout","pointerover"]);qh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qh("onBeforeInput",["compositionend","keypress","textInput","paste"]);qh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var o0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RW=new Set("cancel close invalid load scroll toggle".split(" ").concat(o0));function MR(i,e,t){var r=i.type||"unknown-event";i.currentTarget=t,$G(r,e,void 0,i),i.currentTarget=null}function Cz(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var r=i[t],n=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&n.isPropagationStopped())break e;MR(n,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&n.isPropagationStopped())break e;MR(n,a,c),s=l}}}if(Ix)throw i=aA,Ix=!1,aA=null,i}function gi(i,e){var t=e[_A];t===void 0&&(t=e[_A]=new Set);var r=i+"__bubble";t.has(r)||($z(e,i,2,!1),t.add(r))}function JS(i,e,t){var r=0;e&&(r|=4),$z(t,i,r,e)}var $v="_reactListening"+Math.random().toString(36).slice(2);function B_(i){if(!i[$v]){i[$v]=!0,OU.forEach(function(t){t!=="selectionchange"&&(RW.has(t)||JS(t,!1,i),JS(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[$v]||(e[$v]=!0,JS("selectionchange",!1,e))}}function $z(i,e,t,r){switch(pz(e)){case 1:var n=WG;break;case 4:n=qG;break;default:n=eC}t=n.bind(null,e,t,i),n=void 0,!oA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),r?n!==void 0?i.addEventListener(e,t,{capture:!0,passive:n}):i.addEventListener(e,t,!0):n!==void 0?i.addEventListener(e,t,{passive:n}):i.addEventListener(e,t,!1)}function QS(i,e,t,r,n){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;o=o.return}for(;a!==null;){if(o=Xu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}QU(function(){var c=s,u=Kk(t),h=[];e:{var d=kz.get(i);if(d!==void 0){var f=iC,g=i;switch(i){case"keypress":if(Sb(t)===0)break e;case"keydown":case"keyup":f=lW;break;case"focusin":g="focus",f=WS;break;case"focusout":g="blur",f=WS;break;case"beforeblur":case"afterblur":f=WS;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=hR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=KG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=hW;break;case Sz:case Tz:case Ez:f=QG;break;case Az:f=pW;break;case"scroll":f=XG;break;case"wheel":f=mW;break;case"copy":case"cut":case"paste":f=tW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=pR}var v=(e&4)!==0,m=!v&&i==="scroll",p=v?d!==null?d+"Capture":null:d;v=[];for(var y=c,_;y!==null;){_=y;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,p!==null&&(x=I_(y,p),x!=null&&v.push(V_(y,x,_)))),m)break;y=y.return}0<v.length&&(d=new f(d,g,null,t,u),h.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=i==="mouseover"||i==="pointerover",f=i==="mouseout"||i==="pointerout",d&&t!==nA&&(g=t.relatedTarget||t.fromElement)&&(Xu(g)||g[ol]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=t.relatedTarget||t.toElement,f=c,g=g?Xu(g):null,g!==null&&(m=Xh(g),g!==m||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=c),f!==g)){if(v=hR,x="onMouseLeave",p="onMouseEnter",y="mouse",(i==="pointerout"||i==="pointerover")&&(v=pR,x="onPointerLeave",p="onPointerEnter",y="pointer"),m=f==null?d:Kp(f),_=g==null?d:Kp(g),d=new v(x,y+"leave",f,t,u),d.target=m,d.relatedTarget=_,x=null,Xu(u)===c&&(v=new v(p,y+"enter",g,t,u),v.target=_,v.relatedTarget=m,x=v),m=x,f&&g)t:{for(v=f,p=g,y=0,_=v;_;_=Ed(_))y++;for(_=0,x=p;x;x=Ed(x))_++;for(;0<y-_;)v=Ed(v),y--;for(;0<_-y;)p=Ed(p),_--;for(;y--;){if(v===p||p!==null&&v===p.alternate)break t;v=Ed(v),p=Ed(p)}v=null}else v=null;f!==null&&SR(h,d,f,v,!1),g!==null&&m!==null&&SR(h,m,g,v,!0)}}e:{if(d=c?Kp(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var w=wW;else if(gR(d))if(vz)w=EW;else{w=SW;var S=MW}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=TW);if(w&&(w=w(i,c))){yz(h,w,t,u);break e}S&&S(i,d,c),i==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&QE(d,"number",d.value)}switch(S=c?Kp(c):window,i){case"focusin":(gR(S)||S.contentEditable==="true")&&(Xp=S,hA=c,Q0=null);break;case"focusout":Q0=hA=Xp=null;break;case"mousedown":dA=!0;break;case"contextmenu":case"mouseup":case"dragend":dA=!1,xR(h,t,u);break;case"selectionchange":if(CW)break;case"keydown":case"keyup":xR(h,t,u)}var A;if(nC)e:{switch(i){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qp?gz(i,t)&&(k="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(k="onCompositionStart");k&&(mz&&t.locale!=="ko"&&(qp||k!=="onCompositionStart"?k==="onCompositionEnd"&&qp&&(A=fz()):(pc=u,tC="value"in pc?pc.value:pc.textContent,qp=!0)),S=Fx(c,k),0<S.length&&(k=new dR(k,i,null,t,u),h.push({event:k,listeners:S}),A?k.data=A:(A=_z(t),A!==null&&(k.data=A)))),(A=_W?yW(i,t):vW(i,t))&&(c=Fx(c,"onBeforeInput"),0<c.length&&(u=new dR("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=A))}Cz(h,e)})}function V_(i,e,t){return{instance:i,listener:e,currentTarget:t}}function Fx(i,e){for(var t=e+"Capture",r=[];i!==null;){var n=i,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=I_(i,t),s!=null&&r.unshift(V_(i,s,n)),s=I_(i,e),s!=null&&r.push(V_(i,s,n))),i=i.return}return r}function Ed(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function SR(i,e,t,r,n){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,n?(l=I_(t,s),l!=null&&o.unshift(V_(t,l,a))):n||(l=I_(t,s),l!=null&&o.push(V_(t,l,a)))),t=t.return}o.length!==0&&i.push({event:e,listeners:o})}var PW=/\r\n?/g,NW=/\u0000|\uFFFD/g;function TR(i){return(typeof i=="string"?i:""+i).replace(PW,`
`).replace(NW,"")}function Lv(i,e,t){if(e=TR(e),TR(i)!==e&&t)throw Error(Xe(425))}function Bx(){}var pA=null,fA=null;function mA(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gA=typeof setTimeout=="function"?setTimeout:void 0,IW=typeof clearTimeout=="function"?clearTimeout:void 0,ER=typeof Promise=="function"?Promise:void 0,DW=typeof queueMicrotask=="function"?queueMicrotask:typeof ER<"u"?function(i){return ER.resolve(null).then(i).catch(OW)}:gA;function OW(i){setTimeout(function(){throw i})}function e2(i,e){var t=e,r=0;do{var n=t.nextSibling;if(i.removeChild(t),n&&n.nodeType===8)if(t=n.data,t==="/$"){if(r===0){i.removeChild(n),U_(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=n}while(t);U_(e)}function Tc(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function AR(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var Am=Math.random().toString(36).slice(2),Fo="__reactFiber$"+Am,j_="__reactProps$"+Am,ol="__reactContainer$"+Am,_A="__reactEvents$"+Am,UW="__reactListeners$"+Am,zW="__reactHandles$"+Am;function Xu(i){var e=i[Fo];if(e)return e;for(var t=i.parentNode;t;){if(e=t[ol]||t[Fo]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=AR(i);i!==null;){if(t=i[Fo])return t;i=AR(i)}return e}i=t,t=i.parentNode}return null}function wy(i){return i=i[Fo]||i[ol],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Kp(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Xe(33))}function sM(i){return i[j_]||null}var yA=[],Zp=-1;function Oc(i){return{current:i}}function yi(i){0>Zp||(i.current=yA[Zp],yA[Zp]=null,Zp--)}function pi(i,e){Zp++,yA[Zp]=i.current,i.current=e}var Pc={},Wr=Oc(Pc),_n=Oc(!1),wh=Pc;function Bf(i,e){var t=i.type.contextTypes;if(!t)return Pc;var r=i.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in t)n[s]=e[s];return r&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=n),n}function yn(i){return i=i.childContextTypes,i!=null}function Vx(){yi(_n),yi(Wr)}function kR(i,e,t){if(Wr.current!==Pc)throw Error(Xe(168));pi(Wr,e),pi(_n,t)}function Lz(i,e,t){var r=i.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var n in r)if(!(n in e))throw Error(Xe(108,MG(i)||"Unknown",n));return Ci({},t,r)}function jx(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Pc,wh=Wr.current,pi(Wr,i),pi(_n,_n.current),!0}function CR(i,e,t){var r=i.stateNode;if(!r)throw Error(Xe(169));t?(i=Lz(i,e,wh),r.__reactInternalMemoizedMergedChildContext=i,yi(_n),yi(Wr),pi(Wr,i)):yi(_n),pi(_n,t)}var Va=null,oM=!1,t2=!1;function Rz(i){Va===null?Va=[i]:Va.push(i)}function FW(i){oM=!0,Rz(i)}function Uc(){if(!t2&&Va!==null){t2=!0;var i=0,e=ii;try{var t=Va;for(ii=1;i<t.length;i++){var r=t[i];do r=r(!0);while(r!==null)}Va=null,oM=!1}catch(n){throw Va!==null&&(Va=Va.slice(i+1)),rz(Zk,Uc),n}finally{ii=e,t2=!1}}return null}var Jp=[],Qp=0,Hx=null,Gx=0,bs=[],xs=0,Mh=null,Ga=1,Wa="";function Pu(i,e){Jp[Qp++]=Gx,Jp[Qp++]=Hx,Hx=i,Gx=e}function Pz(i,e,t){bs[xs++]=Ga,bs[xs++]=Wa,bs[xs++]=Mh,Mh=i;var r=Ga;i=Wa;var n=32-_o(r)-1;r&=~(1<<n),t+=1;var s=32-_o(e)+n;if(30<s){var o=n-n%5;s=(r&(1<<o)-1).toString(32),r>>=o,n-=o,Ga=1<<32-_o(e)+n|t<<n|r,Wa=s+i}else Ga=1<<s|t<<n|r,Wa=i}function oC(i){i.return!==null&&(Pu(i,1),Pz(i,1,0))}function aC(i){for(;i===Hx;)Hx=Jp[--Qp],Jp[Qp]=null,Gx=Jp[--Qp],Jp[Qp]=null;for(;i===Mh;)Mh=bs[--xs],bs[xs]=null,Wa=bs[--xs],bs[xs]=null,Ga=bs[--xs],bs[xs]=null}var qn=null,Wn=null,wi=!1,lo=null;function Nz(i,e){var t=Es(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function $R(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,qn=i,Wn=Tc(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,qn=i,Wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Mh!==null?{id:Ga,overflow:Wa}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Es(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,qn=i,Wn=null,!0):!1;default:return!1}}function vA(i){return(i.mode&1)!==0&&(i.flags&128)===0}function bA(i){if(wi){var e=Wn;if(e){var t=e;if(!$R(i,e)){if(vA(i))throw Error(Xe(418));e=Tc(t.nextSibling);var r=qn;e&&$R(i,e)?Nz(r,t):(i.flags=i.flags&-4097|2,wi=!1,qn=i)}}else{if(vA(i))throw Error(Xe(418));i.flags=i.flags&-4097|2,wi=!1,qn=i}}}function LR(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;qn=i}function Rv(i){if(i!==qn)return!1;if(!wi)return LR(i),wi=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!mA(i.type,i.memoizedProps)),e&&(e=Wn)){if(vA(i))throw Iz(),Error(Xe(418));for(;e;)Nz(i,e),e=Tc(e.nextSibling)}if(LR(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Xe(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){Wn=Tc(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}Wn=null}}else Wn=qn?Tc(i.stateNode.nextSibling):null;return!0}function Iz(){for(var i=Wn;i;)i=Tc(i.nextSibling)}function Vf(){Wn=qn=null,wi=!1}function lC(i){lo===null?lo=[i]:lo.push(i)}var BW=_l.ReactCurrentBatchConfig;function bg(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Xe(309));var r=t.stateNode}if(!r)throw Error(Xe(147,i));var n=r,s=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=n.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof i!="string")throw Error(Xe(284));if(!t._owner)throw Error(Xe(290,i))}return i}function Pv(i,e){throw i=Object.prototype.toString.call(e),Error(Xe(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function RR(i){var e=i._init;return e(i._payload)}function Dz(i){function e(p,y){if(i){var _=p.deletions;_===null?(p.deletions=[y],p.flags|=16):_.push(y)}}function t(p,y){if(!i)return null;for(;y!==null;)e(p,y),y=y.sibling;return null}function r(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function n(p,y){return p=Cc(p,y),p.index=0,p.sibling=null,p}function s(p,y,_){return p.index=_,i?(_=p.alternate,_!==null?(_=_.index,_<y?(p.flags|=2,y):_):(p.flags|=2,y)):(p.flags|=1048576,y)}function o(p){return i&&p.alternate===null&&(p.flags|=2),p}function a(p,y,_,x){return y===null||y.tag!==6?(y=l2(_,p.mode,x),y.return=p,y):(y=n(y,_),y.return=p,y)}function l(p,y,_,x){var w=_.type;return w===Wp?u(p,y,_.props.children,x,_.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===rc&&RR(w)===y.type)?(x=n(y,_.props),x.ref=bg(p,y,_),x.return=p,x):(x=Lb(_.type,_.key,_.props,null,p.mode,x),x.ref=bg(p,y,_),x.return=p,x)}function c(p,y,_,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=c2(_,p.mode,x),y.return=p,y):(y=n(y,_.children||[]),y.return=p,y)}function u(p,y,_,x,w){return y===null||y.tag!==7?(y=mh(_,p.mode,x,w),y.return=p,y):(y=n(y,_),y.return=p,y)}function h(p,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=l2(""+y,p.mode,_),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case wv:return _=Lb(y.type,y.key,y.props,null,p.mode,_),_.ref=bg(p,null,y),_.return=p,_;case Gp:return y=c2(y,p.mode,_),y.return=p,y;case rc:var x=y._init;return h(p,x(y._payload),_)}if(n0(y)||mg(y))return y=mh(y,p.mode,_,null),y.return=p,y;Pv(p,y)}return null}function d(p,y,_,x){var w=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return w!==null?null:a(p,y,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case wv:return _.key===w?l(p,y,_,x):null;case Gp:return _.key===w?c(p,y,_,x):null;case rc:return w=_._init,d(p,y,w(_._payload),x)}if(n0(_)||mg(_))return w!==null?null:u(p,y,_,x,null);Pv(p,_)}return null}function f(p,y,_,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(_)||null,a(y,p,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case wv:return p=p.get(x.key===null?_:x.key)||null,l(y,p,x,w);case Gp:return p=p.get(x.key===null?_:x.key)||null,c(y,p,x,w);case rc:var S=x._init;return f(p,y,_,S(x._payload),w)}if(n0(x)||mg(x))return p=p.get(_)||null,u(y,p,x,w,null);Pv(y,x)}return null}function g(p,y,_,x){for(var w=null,S=null,A=y,k=y=0,M=null;A!==null&&k<_.length;k++){A.index>k?(M=A,A=null):M=A.sibling;var b=d(p,A,_[k],x);if(b===null){A===null&&(A=M);break}i&&A&&b.alternate===null&&e(p,A),y=s(b,y,k),S===null?w=b:S.sibling=b,S=b,A=M}if(k===_.length)return t(p,A),wi&&Pu(p,k),w;if(A===null){for(;k<_.length;k++)A=h(p,_[k],x),A!==null&&(y=s(A,y,k),S===null?w=A:S.sibling=A,S=A);return wi&&Pu(p,k),w}for(A=r(p,A);k<_.length;k++)M=f(A,p,k,_[k],x),M!==null&&(i&&M.alternate!==null&&A.delete(M.key===null?k:M.key),y=s(M,y,k),S===null?w=M:S.sibling=M,S=M);return i&&A.forEach(function(P){return e(p,P)}),wi&&Pu(p,k),w}function v(p,y,_,x){var w=mg(_);if(typeof w!="function")throw Error(Xe(150));if(_=w.call(_),_==null)throw Error(Xe(151));for(var S=w=null,A=y,k=y=0,M=null,b=_.next();A!==null&&!b.done;k++,b=_.next()){A.index>k?(M=A,A=null):M=A.sibling;var P=d(p,A,b.value,x);if(P===null){A===null&&(A=M);break}i&&A&&P.alternate===null&&e(p,A),y=s(P,y,k),S===null?w=P:S.sibling=P,S=P,A=M}if(b.done)return t(p,A),wi&&Pu(p,k),w;if(A===null){for(;!b.done;k++,b=_.next())b=h(p,b.value,x),b!==null&&(y=s(b,y,k),S===null?w=b:S.sibling=b,S=b);return wi&&Pu(p,k),w}for(A=r(p,A);!b.done;k++,b=_.next())b=f(A,p,k,b.value,x),b!==null&&(i&&b.alternate!==null&&A.delete(b.key===null?k:b.key),y=s(b,y,k),S===null?w=b:S.sibling=b,S=b);return i&&A.forEach(function(N){return e(p,N)}),wi&&Pu(p,k),w}function m(p,y,_,x){if(typeof _=="object"&&_!==null&&_.type===Wp&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case wv:e:{for(var w=_.key,S=y;S!==null;){if(S.key===w){if(w=_.type,w===Wp){if(S.tag===7){t(p,S.sibling),y=n(S,_.props.children),y.return=p,p=y;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===rc&&RR(w)===S.type){t(p,S.sibling),y=n(S,_.props),y.ref=bg(p,S,_),y.return=p,p=y;break e}t(p,S);break}else e(p,S);S=S.sibling}_.type===Wp?(y=mh(_.props.children,p.mode,x,_.key),y.return=p,p=y):(x=Lb(_.type,_.key,_.props,null,p.mode,x),x.ref=bg(p,y,_),x.return=p,p=x)}return o(p);case Gp:e:{for(S=_.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){t(p,y.sibling),y=n(y,_.children||[]),y.return=p,p=y;break e}else{t(p,y);break}else e(p,y);y=y.sibling}y=c2(_,p.mode,x),y.return=p,p=y}return o(p);case rc:return S=_._init,m(p,y,S(_._payload),x)}if(n0(_))return g(p,y,_,x);if(mg(_))return v(p,y,_,x);Pv(p,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(t(p,y.sibling),y=n(y,_),y.return=p,p=y):(t(p,y),y=l2(_,p.mode,x),y.return=p,p=y),o(p)):t(p,y)}return m}var jf=Dz(!0),Oz=Dz(!1),Wx=Oc(null),qx=null,ef=null,cC=null;function uC(){cC=ef=qx=null}function hC(i){var e=Wx.current;yi(Wx),i._currentValue=e}function xA(i,e,t){for(;i!==null;){var r=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),i===t)break;i=i.return}}function vf(i,e){qx=i,cC=ef=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(fn=!0),i.firstContext=null)}function Rs(i){var e=i._currentValue;if(cC!==i)if(i={context:i,memoizedValue:e,next:null},ef===null){if(qx===null)throw Error(Xe(308));ef=i,qx.dependencies={lanes:0,firstContext:i}}else ef=ef.next=i;return e}var Yu=null;function dC(i){Yu===null?Yu=[i]:Yu.push(i)}function Uz(i,e,t,r){var n=e.interleaved;return n===null?(t.next=t,dC(e)):(t.next=n.next,n.next=t),e.interleaved=t,al(i,r)}function al(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var nc=!1;function pC(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zz(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Qa(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function Ec(i,e,t){var r=i.updateQueue;if(r===null)return null;if(r=r.shared,Kt&2){var n=r.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),r.pending=e,al(i,t)}return n=r.interleaved,n===null?(e.next=e,dC(r)):(e.next=n.next,n.next=e),r.interleaved=e,al(i,t)}function Tb(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=i.pendingLanes,t|=r,e.lanes=t,Jk(i,t)}}function PR(i,e){var t=i.updateQueue,r=i.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var n=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?n=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?n=s=e:s=s.next=e}else n=s=e;t={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:r.shared,effects:r.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function Xx(i,e,t,r){var n=i.updateQueue;nc=!1;var s=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=i.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=n.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=i,v=a;switch(d=e,f=t,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(f,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,d=typeof g=="function"?g.call(f,h,d):g,d==null)break e;h=Ci({},h,d);break e;case 2:nc=!0}}a.callback!==null&&a.lane!==0&&(i.flags|=64,d=n.effects,d===null?n.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;d=a,a=d.next,d.next=null,n.lastBaseUpdate=d,n.shared.pending=null}}while(1);if(u===null&&(l=h),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=u,e=n.shared.interleaved,e!==null){n=e;do o|=n.lane,n=n.next;while(n!==e)}else s===null&&(n.shared.lanes=0);Th|=o,i.lanes=o,i.memoizedState=h}}function NR(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var r=i[e],n=r.callback;if(n!==null){if(r.callback=null,r=t,typeof n!="function")throw Error(Xe(191,n));n.call(r)}}}var My={},Ho=Oc(My),H_=Oc(My),G_=Oc(My);function Ku(i){if(i===My)throw Error(Xe(174));return i}function fC(i,e){switch(pi(G_,e),pi(H_,i),pi(Ho,My),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tA(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=tA(e,i)}yi(Ho),pi(Ho,e)}function Hf(){yi(Ho),yi(H_),yi(G_)}function Fz(i){Ku(G_.current);var e=Ku(Ho.current),t=tA(e,i.type);e!==t&&(pi(H_,i),pi(Ho,t))}function mC(i){H_.current===i&&(yi(Ho),yi(H_))}var Ai=Oc(0);function Yx(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var i2=[];function gC(){for(var i=0;i<i2.length;i++)i2[i]._workInProgressVersionPrimary=null;i2.length=0}var Eb=_l.ReactCurrentDispatcher,r2=_l.ReactCurrentBatchConfig,Sh=0,ki=null,Ki=null,lr=null,Kx=!1,e_=!1,W_=0,VW=0;function Ir(){throw Error(Xe(321))}function _C(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!wo(i[t],e[t]))return!1;return!0}function yC(i,e,t,r,n,s){if(Sh=s,ki=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Eb.current=i===null||i.memoizedState===null?WW:qW,i=t(r,n),e_){s=0;do{if(e_=!1,W_=0,25<=s)throw Error(Xe(301));s+=1,lr=Ki=null,e.updateQueue=null,Eb.current=XW,i=t(r,n)}while(e_)}if(Eb.current=Zx,e=Ki!==null&&Ki.next!==null,Sh=0,lr=Ki=ki=null,Kx=!1,e)throw Error(Xe(300));return i}function vC(){var i=W_!==0;return W_=0,i}function Io(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lr===null?ki.memoizedState=lr=i:lr=lr.next=i,lr}function Ps(){if(Ki===null){var i=ki.alternate;i=i!==null?i.memoizedState:null}else i=Ki.next;var e=lr===null?ki.memoizedState:lr.next;if(e!==null)lr=e,Ki=i;else{if(i===null)throw Error(Xe(310));Ki=i,i={memoizedState:Ki.memoizedState,baseState:Ki.baseState,baseQueue:Ki.baseQueue,queue:Ki.queue,next:null},lr===null?ki.memoizedState=lr=i:lr=lr.next=i}return lr}function q_(i,e){return typeof e=="function"?e(i):e}function n2(i){var e=Ps(),t=e.queue;if(t===null)throw Error(Xe(311));t.lastRenderedReducer=i;var r=Ki,n=r.baseQueue,s=t.pending;if(s!==null){if(n!==null){var o=n.next;n.next=s.next,s.next=o}r.baseQueue=n=s,t.pending=null}if(n!==null){s=n.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Sh&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:i(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ki.lanes|=u,Th|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,wo(r,e.memoizedState)||(fn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(i=t.interleaved,i!==null){n=i;do s=n.lane,ki.lanes|=s,Th|=s,n=n.next;while(n!==i)}else n===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function s2(i){var e=Ps(),t=e.queue;if(t===null)throw Error(Xe(311));t.lastRenderedReducer=i;var r=t.dispatch,n=t.pending,s=e.memoizedState;if(n!==null){t.pending=null;var o=n=n.next;do s=i(s,o.action),o=o.next;while(o!==n);wo(s,e.memoizedState)||(fn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function Bz(){}function Vz(i,e){var t=ki,r=Ps(),n=e(),s=!wo(r.memoizedState,n);if(s&&(r.memoizedState=n,fn=!0),r=r.queue,bC(Gz.bind(null,t,r,i),[i]),r.getSnapshot!==e||s||lr!==null&&lr.memoizedState.tag&1){if(t.flags|=2048,X_(9,Hz.bind(null,t,r,n,e),void 0,null),fr===null)throw Error(Xe(349));Sh&30||jz(t,e,n)}return n}function jz(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=ki.updateQueue,e===null?(e={lastEffect:null,stores:null},ki.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function Hz(i,e,t,r){e.value=t,e.getSnapshot=r,Wz(e)&&qz(i)}function Gz(i,e,t){return t(function(){Wz(e)&&qz(i)})}function Wz(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!wo(i,t)}catch{return!0}}function qz(i){var e=al(i,1);e!==null&&yo(e,i,1,-1)}function IR(i){var e=Io();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:q_,lastRenderedState:i},e.queue=i,i=i.dispatch=GW.bind(null,ki,i),[e.memoizedState,i]}function X_(i,e,t,r){return i={tag:i,create:e,destroy:t,deps:r,next:null},e=ki.updateQueue,e===null?(e={lastEffect:null,stores:null},ki.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(r=t.next,t.next=i,i.next=r,e.lastEffect=i)),i}function Xz(){return Ps().memoizedState}function Ab(i,e,t,r){var n=Io();ki.flags|=i,n.memoizedState=X_(1|e,t,void 0,r===void 0?null:r)}function aM(i,e,t,r){var n=Ps();r=r===void 0?null:r;var s=void 0;if(Ki!==null){var o=Ki.memoizedState;if(s=o.destroy,r!==null&&_C(r,o.deps)){n.memoizedState=X_(e,t,s,r);return}}ki.flags|=i,n.memoizedState=X_(1|e,t,s,r)}function DR(i,e){return Ab(8390656,8,i,e)}function bC(i,e){return aM(2048,8,i,e)}function Yz(i,e){return aM(4,2,i,e)}function Kz(i,e){return aM(4,4,i,e)}function Zz(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function Jz(i,e,t){return t=t!=null?t.concat([i]):null,aM(4,4,Zz.bind(null,e,i),t)}function xC(){}function Qz(i,e){var t=Ps();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&_C(e,r[1])?r[0]:(t.memoizedState=[i,e],i)}function e6(i,e){var t=Ps();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&_C(e,r[1])?r[0]:(i=i(),t.memoizedState=[i,e],i)}function t6(i,e,t){return Sh&21?(wo(t,e)||(t=oz(),ki.lanes|=t,Th|=t,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,fn=!0),i.memoizedState=t)}function jW(i,e){var t=ii;ii=t!==0&&4>t?t:4,i(!0);var r=r2.transition;r2.transition={};try{i(!1),e()}finally{ii=t,r2.transition=r}}function i6(){return Ps().memoizedState}function HW(i,e,t){var r=kc(i);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},r6(i))n6(e,t);else if(t=Uz(i,e,t,r),t!==null){var n=nn();yo(t,i,r,n),s6(t,e,r)}}function GW(i,e,t){var r=kc(i),n={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(r6(i))n6(e,n);else{var s=i.alternate;if(i.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(n.hasEagerState=!0,n.eagerState=a,wo(a,o)){var l=e.interleaved;l===null?(n.next=n,dC(e)):(n.next=l.next,l.next=n),e.interleaved=n;return}}catch{}finally{}t=Uz(i,e,n,r),t!==null&&(n=nn(),yo(t,i,r,n),s6(t,e,r))}}function r6(i){var e=i.alternate;return i===ki||e!==null&&e===ki}function n6(i,e){e_=Kx=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function s6(i,e,t){if(t&4194240){var r=e.lanes;r&=i.pendingLanes,t|=r,e.lanes=t,Jk(i,t)}}var Zx={readContext:Rs,useCallback:Ir,useContext:Ir,useEffect:Ir,useImperativeHandle:Ir,useInsertionEffect:Ir,useLayoutEffect:Ir,useMemo:Ir,useReducer:Ir,useRef:Ir,useState:Ir,useDebugValue:Ir,useDeferredValue:Ir,useTransition:Ir,useMutableSource:Ir,useSyncExternalStore:Ir,useId:Ir,unstable_isNewReconciler:!1},WW={readContext:Rs,useCallback:function(i,e){return Io().memoizedState=[i,e===void 0?null:e],i},useContext:Rs,useEffect:DR,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,Ab(4194308,4,Zz.bind(null,e,i),t)},useLayoutEffect:function(i,e){return Ab(4194308,4,i,e)},useInsertionEffect:function(i,e){return Ab(4,2,i,e)},useMemo:function(i,e){var t=Io();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var r=Io();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},r.queue=i,i=i.dispatch=HW.bind(null,ki,i),[r.memoizedState,i]},useRef:function(i){var e=Io();return i={current:i},e.memoizedState=i},useState:IR,useDebugValue:xC,useDeferredValue:function(i){return Io().memoizedState=i},useTransition:function(){var i=IR(!1),e=i[0];return i=jW.bind(null,i[1]),Io().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var r=ki,n=Io();if(wi){if(t===void 0)throw Error(Xe(407));t=t()}else{if(t=e(),fr===null)throw Error(Xe(349));Sh&30||jz(r,e,t)}n.memoizedState=t;var s={value:t,getSnapshot:e};return n.queue=s,DR(Gz.bind(null,r,s,i),[i]),r.flags|=2048,X_(9,Hz.bind(null,r,s,t,e),void 0,null),t},useId:function(){var i=Io(),e=fr.identifierPrefix;if(wi){var t=Wa,r=Ga;t=(r&~(1<<32-_o(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=W_++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=VW++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},qW={readContext:Rs,useCallback:Qz,useContext:Rs,useEffect:bC,useImperativeHandle:Jz,useInsertionEffect:Yz,useLayoutEffect:Kz,useMemo:e6,useReducer:n2,useRef:Xz,useState:function(){return n2(q_)},useDebugValue:xC,useDeferredValue:function(i){var e=Ps();return t6(e,Ki.memoizedState,i)},useTransition:function(){var i=n2(q_)[0],e=Ps().memoizedState;return[i,e]},useMutableSource:Bz,useSyncExternalStore:Vz,useId:i6,unstable_isNewReconciler:!1},XW={readContext:Rs,useCallback:Qz,useContext:Rs,useEffect:bC,useImperativeHandle:Jz,useInsertionEffect:Yz,useLayoutEffect:Kz,useMemo:e6,useReducer:s2,useRef:Xz,useState:function(){return s2(q_)},useDebugValue:xC,useDeferredValue:function(i){var e=Ps();return Ki===null?e.memoizedState=i:t6(e,Ki.memoizedState,i)},useTransition:function(){var i=s2(q_)[0],e=Ps().memoizedState;return[i,e]},useMutableSource:Bz,useSyncExternalStore:Vz,useId:i6,unstable_isNewReconciler:!1};function eo(i,e){if(i&&i.defaultProps){e=Ci({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}function wA(i,e,t,r){e=i.memoizedState,t=t(r,e),t=t==null?e:Ci({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var lM={isMounted:function(i){return(i=i._reactInternals)?Xh(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var r=nn(),n=kc(i),s=Qa(r,n);s.payload=e,t!=null&&(s.callback=t),e=Ec(i,s,n),e!==null&&(yo(e,i,n,r),Tb(e,i,n))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var r=nn(),n=kc(i),s=Qa(r,n);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ec(i,s,n),e!==null&&(yo(e,i,n,r),Tb(e,i,n))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=nn(),r=kc(i),n=Qa(t,r);n.tag=2,e!=null&&(n.callback=e),e=Ec(i,n,r),e!==null&&(yo(e,i,r,t),Tb(e,i,r))}};function OR(i,e,t,r,n,s,o){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!F_(t,r)||!F_(n,s):!0}function o6(i,e,t){var r=!1,n=Pc,s=e.contextType;return typeof s=="object"&&s!==null?s=Rs(s):(n=yn(e)?wh:Wr.current,r=e.contextTypes,s=(r=r!=null)?Bf(i,n):Pc),e=new e(t,s),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lM,i.stateNode=e,e._reactInternals=i,r&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=n,i.__reactInternalMemoizedMaskedChildContext=s),e}function UR(i,e,t,r){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==i&&lM.enqueueReplaceState(e,e.state,null)}function MA(i,e,t,r){var n=i.stateNode;n.props=t,n.state=i.memoizedState,n.refs={},pC(i);var s=e.contextType;typeof s=="object"&&s!==null?n.context=Rs(s):(s=yn(e)?wh:Wr.current,n.context=Bf(i,s)),n.state=i.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(wA(i,e,s,t),n.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&lM.enqueueReplaceState(n,n.state,null),Xx(i,t,n,r),n.state=i.memoizedState),typeof n.componentDidMount=="function"&&(i.flags|=4194308)}function Gf(i,e){try{var t="",r=e;do t+=wG(r),r=r.return;while(r);var n=t}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:i,source:e,stack:n,digest:null}}function o2(i,e,t){return{value:i,source:null,stack:t??null,digest:e??null}}function SA(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var YW=typeof WeakMap=="function"?WeakMap:Map;function a6(i,e,t){t=Qa(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Qx||(Qx=!0,NA=r),SA(i,e)},t}function l6(i,e,t){t=Qa(-1,t),t.tag=3;var r=i.type.getDerivedStateFromError;if(typeof r=="function"){var n=e.value;t.payload=function(){return r(n)},t.callback=function(){SA(i,e)}}var s=i.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){SA(i,e),typeof r!="function"&&(Ac===null?Ac=new Set([this]):Ac.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function zR(i,e,t){var r=i.pingCache;if(r===null){r=i.pingCache=new YW;var n=new Set;r.set(e,n)}else n=r.get(e),n===void 0&&(n=new Set,r.set(e,n));n.has(t)||(n.add(t),i=cq.bind(null,i,e,t),e.then(i,i))}function FR(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function BR(i,e,t,r,n){return i.mode&1?(i.flags|=65536,i.lanes=n,i):(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Qa(-1,1),e.tag=2,Ec(t,e,1))),t.lanes|=1),i)}var KW=_l.ReactCurrentOwner,fn=!1;function Qr(i,e,t,r){e.child=i===null?Oz(e,null,t,r):jf(e,i.child,t,r)}function VR(i,e,t,r,n){t=t.render;var s=e.ref;return vf(e,n),r=yC(i,e,t,r,s,n),t=vC(),i!==null&&!fn?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~n,ll(i,e,n)):(wi&&t&&oC(e),e.flags|=1,Qr(i,e,r,n),e.child)}function jR(i,e,t,r,n){if(i===null){var s=t.type;return typeof s=="function"&&!CC(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,c6(i,e,s,r,n)):(i=Lb(t.type,null,r,e,e.mode,n),i.ref=e.ref,i.return=e,e.child=i)}if(s=i.child,!(i.lanes&n)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:F_,t(o,r)&&i.ref===e.ref)return ll(i,e,n)}return e.flags|=1,i=Cc(s,r),i.ref=e.ref,i.return=e,e.child=i}function c6(i,e,t,r,n){if(i!==null){var s=i.memoizedProps;if(F_(s,r)&&i.ref===e.ref)if(fn=!1,e.pendingProps=r=s,(i.lanes&n)!==0)i.flags&131072&&(fn=!0);else return e.lanes=i.lanes,ll(i,e,n)}return TA(i,e,t,r,n)}function u6(i,e,t){var r=e.pendingProps,n=r.children,s=i!==null?i.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pi(rf,Bn),Bn|=t;else{if(!(t&1073741824))return i=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,pi(rf,Bn),Bn|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,pi(rf,Bn),Bn|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,pi(rf,Bn),Bn|=r;return Qr(i,e,n,t),e.child}function h6(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function TA(i,e,t,r,n){var s=yn(t)?wh:Wr.current;return s=Bf(e,s),vf(e,n),t=yC(i,e,t,r,s,n),r=vC(),i!==null&&!fn?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~n,ll(i,e,n)):(wi&&r&&oC(e),e.flags|=1,Qr(i,e,t,n),e.child)}function HR(i,e,t,r,n){if(yn(t)){var s=!0;jx(e)}else s=!1;if(vf(e,n),e.stateNode===null)kb(i,e),o6(e,t,r),MA(e,t,r,n),r=!0;else if(i===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Rs(c):(c=yn(t)?wh:Wr.current,c=Bf(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&UR(e,o,r,c),nc=!1;var d=e.memoizedState;o.state=d,Xx(e,r,o,n),l=e.memoizedState,a!==r||d!==l||_n.current||nc?(typeof u=="function"&&(wA(e,t,u,r),l=e.memoizedState),(a=nc||OR(e,t,a,r,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,zz(i,e),a=e.memoizedProps,c=e.type===e.elementType?a:eo(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Rs(l):(l=yn(t)?wh:Wr.current,l=Bf(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&UR(e,o,r,l),nc=!1,d=e.memoizedState,o.state=d,Xx(e,r,o,n);var g=e.memoizedState;a!==h||d!==g||_n.current||nc?(typeof f=="function"&&(wA(e,t,f,r),g=e.memoizedState),(c=nc||OR(e,t,c,r,d,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===i.memoizedProps&&d===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&d===i.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===i.memoizedProps&&d===i.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===i.memoizedProps&&d===i.memoizedState||(e.flags|=1024),r=!1)}return EA(i,e,t,r,s,n)}function EA(i,e,t,r,n,s){h6(i,e);var o=(e.flags&128)!==0;if(!r&&!o)return n&&CR(e,t,!1),ll(i,e,s);r=e.stateNode,KW.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,i!==null&&o?(e.child=jf(e,i.child,null,s),e.child=jf(e,null,a,s)):Qr(i,e,a,s),e.memoizedState=r.state,n&&CR(e,t,!0),e.child}function d6(i){var e=i.stateNode;e.pendingContext?kR(i,e.pendingContext,e.pendingContext!==e.context):e.context&&kR(i,e.context,!1),fC(i,e.containerInfo)}function GR(i,e,t,r,n){return Vf(),lC(n),e.flags|=256,Qr(i,e,t,r),e.child}var AA={dehydrated:null,treeContext:null,retryLane:0};function kA(i){return{baseLanes:i,cachePool:null,transitions:null}}function p6(i,e,t){var r=e.pendingProps,n=Ai.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=i!==null&&i.memoizedState===null?!1:(n&2)!==0),a?(s=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(n|=1),pi(Ai,n&1),i===null)return bA(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,i=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=hM(o,r,0,null),i=mh(i,r,t,null),s.return=e,i.return=e,s.sibling=i,e.child=s,e.child.memoizedState=kA(t),e.memoizedState=AA,i):wC(e,o));if(n=i.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return ZW(i,e,o,r,a,n,t);if(s){s=r.fallback,o=e.mode,n=i.child,a=n.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==n?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Cc(n,l),r.subtreeFlags=n.subtreeFlags&14680064),a!==null?s=Cc(a,s):(s=mh(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=i.child.memoizedState,o=o===null?kA(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=i.childLanes&~t,e.memoizedState=AA,r}return s=i.child,i=s.sibling,r=Cc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=r,e.memoizedState=null,r}function wC(i,e){return e=hM({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function Nv(i,e,t,r){return r!==null&&lC(r),jf(e,i.child,null,t),i=wC(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function ZW(i,e,t,r,n,s,o){if(t)return e.flags&256?(e.flags&=-257,r=o2(Error(Xe(422))),Nv(i,e,o,r)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(s=r.fallback,n=e.mode,r=hM({mode:"visible",children:r.children},n,0,null),s=mh(s,n,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&jf(e,i.child,null,o),e.child.memoizedState=kA(o),e.memoizedState=AA,s);if(!(e.mode&1))return Nv(i,e,o,null);if(n.data==="$!"){if(r=n.nextSibling&&n.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Xe(419)),r=o2(s,r,void 0),Nv(i,e,o,r)}if(a=(o&i.childLanes)!==0,fn||a){if(r=fr,r!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(r.suspendedLanes|o)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,al(i,n),yo(r,i,n,-1))}return kC(),r=o2(Error(Xe(421))),Nv(i,e,o,r)}return n.data==="$?"?(e.flags|=128,e.child=i.child,e=uq.bind(null,i),n._reactRetry=e,null):(i=s.treeContext,Wn=Tc(n.nextSibling),qn=e,wi=!0,lo=null,i!==null&&(bs[xs++]=Ga,bs[xs++]=Wa,bs[xs++]=Mh,Ga=i.id,Wa=i.overflow,Mh=e),e=wC(e,r.children),e.flags|=4096,e)}function WR(i,e,t){i.lanes|=e;var r=i.alternate;r!==null&&(r.lanes|=e),xA(i.return,e,t)}function a2(i,e,t,r,n){var s=i.memoizedState;s===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:n}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=n)}function f6(i,e,t){var r=e.pendingProps,n=r.revealOrder,s=r.tail;if(Qr(i,e,r.children,t),r=Ai.current,r&2)r=r&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&WR(i,t,e);else if(i.tag===19)WR(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}r&=1}if(pi(Ai,r),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(t=e.child,n=null;t!==null;)i=t.alternate,i!==null&&Yx(i)===null&&(n=t),t=t.sibling;t=n,t===null?(n=e.child,e.child=null):(n=t.sibling,t.sibling=null),a2(e,!1,n,t,s);break;case"backwards":for(t=null,n=e.child,e.child=null;n!==null;){if(i=n.alternate,i!==null&&Yx(i)===null){e.child=n;break}i=n.sibling,n.sibling=t,t=n,n=i}a2(e,!0,t,null,s);break;case"together":a2(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kb(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function ll(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),Th|=e.lanes,!(t&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(Xe(153));if(e.child!==null){for(i=e.child,t=Cc(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=Cc(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function JW(i,e,t){switch(e.tag){case 3:d6(e),Vf();break;case 5:Fz(e);break;case 1:yn(e.type)&&jx(e);break;case 4:fC(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,n=e.memoizedProps.value;pi(Wx,r._currentValue),r._currentValue=n;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pi(Ai,Ai.current&1),e.flags|=128,null):t&e.child.childLanes?p6(i,e,t):(pi(Ai,Ai.current&1),i=ll(i,e,t),i!==null?i.sibling:null);pi(Ai,Ai.current&1);break;case 19:if(r=(t&e.childLanes)!==0,i.flags&128){if(r)return f6(i,e,t);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),pi(Ai,Ai.current),r)break;return null;case 22:case 23:return e.lanes=0,u6(i,e,t)}return ll(i,e,t)}var m6,CA,g6,_6;m6=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};CA=function(){};g6=function(i,e,t,r){var n=i.memoizedProps;if(n!==r){i=e.stateNode,Ku(Ho.current);var s=null;switch(t){case"input":n=ZE(i,n),r=ZE(i,r),s=[];break;case"select":n=Ci({},n,{value:void 0}),r=Ci({},r,{value:void 0}),s=[];break;case"textarea":n=eA(i,n),r=eA(i,r),s=[];break;default:typeof n.onClick!="function"&&typeof r.onClick=="function"&&(i.onclick=Bx)}iA(t,r);var o;t=null;for(c in n)if(!r.hasOwnProperty(c)&&n.hasOwnProperty(c)&&n[c]!=null)if(c==="style"){var a=n[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(P_.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=n!=null?n[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(P_.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&gi("scroll",i),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};_6=function(i,e,t,r){t!==r&&(e.flags|=4)};function xg(i,e){if(!wi)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:r.sibling=null}}function Dr(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,r=0;if(e)for(var n=i.child;n!==null;)t|=n.lanes|n.childLanes,r|=n.subtreeFlags&14680064,r|=n.flags&14680064,n.return=i,n=n.sibling;else for(n=i.child;n!==null;)t|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=i,n=n.sibling;return i.subtreeFlags|=r,i.childLanes=t,e}function QW(i,e,t){var r=e.pendingProps;switch(aC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(e),null;case 1:return yn(e.type)&&Vx(),Dr(e),null;case 3:return r=e.stateNode,Hf(),yi(_n),yi(Wr),gC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(Rv(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,lo!==null&&(OA(lo),lo=null))),CA(i,e),Dr(e),null;case 5:mC(e);var n=Ku(G_.current);if(t=e.type,i!==null&&e.stateNode!=null)g6(i,e,t,r,n),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Xe(166));return Dr(e),null}if(i=Ku(Ho.current),Rv(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Fo]=e,r[j_]=s,i=(e.mode&1)!==0,t){case"dialog":gi("cancel",r),gi("close",r);break;case"iframe":case"object":case"embed":gi("load",r);break;case"video":case"audio":for(n=0;n<o0.length;n++)gi(o0[n],r);break;case"source":gi("error",r);break;case"img":case"image":case"link":gi("error",r),gi("load",r);break;case"details":gi("toggle",r);break;case"input":tR(r,s),gi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},gi("invalid",r);break;case"textarea":rR(r,s),gi("invalid",r)}iA(t,s),n=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Lv(r.textContent,a,i),n=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Lv(r.textContent,a,i),n=["children",""+a]):P_.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gi("scroll",r)}switch(t){case"input":Mv(r),iR(r,s,!0);break;case"textarea":Mv(r),nR(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Bx)}r=n,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=GU(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=o.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof r.is=="string"?i=o.createElement(t,{is:r.is}):(i=o.createElement(t),t==="select"&&(o=i,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):i=o.createElementNS(i,t),i[Fo]=e,i[j_]=r,m6(i,e,!1,!1),e.stateNode=i;e:{switch(o=rA(t,r),t){case"dialog":gi("cancel",i),gi("close",i),n=r;break;case"iframe":case"object":case"embed":gi("load",i),n=r;break;case"video":case"audio":for(n=0;n<o0.length;n++)gi(o0[n],i);n=r;break;case"source":gi("error",i),n=r;break;case"img":case"image":case"link":gi("error",i),gi("load",i),n=r;break;case"details":gi("toggle",i),n=r;break;case"input":tR(i,r),n=ZE(i,r),gi("invalid",i);break;case"option":n=r;break;case"select":i._wrapperState={wasMultiple:!!r.multiple},n=Ci({},r,{value:void 0}),gi("invalid",i);break;case"textarea":rR(i,r),n=eA(i,r),gi("invalid",i);break;default:n=r}iA(t,n),a=n;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?XU(i,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&WU(i,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&N_(i,l):typeof l=="number"&&N_(i,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(P_.hasOwnProperty(s)?l!=null&&s==="onScroll"&&gi("scroll",i):l!=null&&Wk(i,s,l,o))}switch(t){case"input":Mv(i),iR(i,r,!1);break;case"textarea":Mv(i),nR(i);break;case"option":r.value!=null&&i.setAttribute("value",""+Rc(r.value));break;case"select":i.multiple=!!r.multiple,s=r.value,s!=null?mf(i,!!r.multiple,s,!1):r.defaultValue!=null&&mf(i,!!r.multiple,r.defaultValue,!0);break;default:typeof n.onClick=="function"&&(i.onclick=Bx)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dr(e),null;case 6:if(i&&e.stateNode!=null)_6(i,e,i.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Xe(166));if(t=Ku(G_.current),Ku(Ho.current),Rv(e)){if(r=e.stateNode,t=e.memoizedProps,r[Fo]=e,(s=r.nodeValue!==t)&&(i=qn,i!==null))switch(i.tag){case 3:Lv(r.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Lv(r.nodeValue,t,(i.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Fo]=e,e.stateNode=r}return Dr(e),null;case 13:if(yi(Ai),r=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(wi&&Wn!==null&&e.mode&1&&!(e.flags&128))Iz(),Vf(),e.flags|=98560,s=!1;else if(s=Rv(e),r!==null&&r.dehydrated!==null){if(i===null){if(!s)throw Error(Xe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Xe(317));s[Fo]=e}else Vf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dr(e),s=!1}else lo!==null&&(OA(lo),lo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(i!==null&&i.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(i===null||Ai.current&1?Zi===0&&(Zi=3):kC())),e.updateQueue!==null&&(e.flags|=4),Dr(e),null);case 4:return Hf(),CA(i,e),i===null&&B_(e.stateNode.containerInfo),Dr(e),null;case 10:return hC(e.type._context),Dr(e),null;case 17:return yn(e.type)&&Vx(),Dr(e),null;case 19:if(yi(Ai),s=e.memoizedState,s===null)return Dr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)xg(s,!1);else{if(Zi!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(o=Yx(i),o!==null){for(e.flags|=128,xg(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,i=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return pi(Ai,Ai.current&1|2),e.child}i=i.sibling}s.tail!==null&&Bi()>Wf&&(e.flags|=128,r=!0,xg(s,!1),e.lanes=4194304)}else{if(!r)if(i=Yx(o),i!==null){if(e.flags|=128,r=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),xg(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!wi)return Dr(e),null}else 2*Bi()-s.renderingStartTime>Wf&&t!==1073741824&&(e.flags|=128,r=!0,xg(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Bi(),e.sibling=null,t=Ai.current,pi(Ai,r?t&1|2:t&1),e):(Dr(e),null);case 22:case 23:return AC(),r=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bn&1073741824&&(Dr(e),e.subtreeFlags&6&&(e.flags|=8192)):Dr(e),null;case 24:return null;case 25:return null}throw Error(Xe(156,e.tag))}function eq(i,e){switch(aC(e),e.tag){case 1:return yn(e.type)&&Vx(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return Hf(),yi(_n),yi(Wr),gC(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return mC(e),null;case 13:if(yi(Ai),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(Xe(340));Vf()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return yi(Ai),null;case 4:return Hf(),null;case 10:return hC(e.type._context),null;case 22:case 23:return AC(),null;case 24:return null;default:return null}}var Iv=!1,Br=!1,tq=typeof WeakSet=="function"?WeakSet:Set,lt=null;function tf(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Pi(i,e,r)}else t.current=null}function $A(i,e,t){try{t()}catch(r){Pi(i,e,r)}}var qR=!1;function iq(i,e){if(pA=Ux,i=wz(),sC(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var n=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=i,d=null;t:for(;;){for(var f;h!==t||n!==0&&h.nodeType!==3||(a=o+n),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===i)break t;if(d===t&&++c===n&&(a=o),d===s&&++u===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(fA={focusedElem:i,selectionRange:t},Ux=!1,lt=e;lt!==null;)if(e=lt,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,lt=i;else for(;lt!==null;){e=lt;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,m=g.memoizedState,p=e.stateNode,y=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:eo(e.type,v),m);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xe(163))}}catch(x){Pi(e,e.return,x)}if(i=e.sibling,i!==null){i.return=e.return,lt=i;break}lt=e.return}return g=qR,qR=!1,g}function t_(i,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do{if((n.tag&i)===i){var s=n.destroy;n.destroy=void 0,s!==void 0&&$A(e,t,s)}n=n.next}while(n!==r)}}function cM(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function LA(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function y6(i){var e=i.alternate;e!==null&&(i.alternate=null,y6(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[Fo],delete e[j_],delete e[_A],delete e[UW],delete e[zW])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function v6(i){return i.tag===5||i.tag===3||i.tag===4}function XR(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||v6(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function RA(i,e,t){var r=i.tag;if(r===5||r===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Bx));else if(r!==4&&(i=i.child,i!==null))for(RA(i,e,t),i=i.sibling;i!==null;)RA(i,e,t),i=i.sibling}function PA(i,e,t){var r=i.tag;if(r===5||r===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(r!==4&&(i=i.child,i!==null))for(PA(i,e,t),i=i.sibling;i!==null;)PA(i,e,t),i=i.sibling}var wr=null,ro=!1;function Ol(i,e,t){for(t=t.child;t!==null;)b6(i,e,t),t=t.sibling}function b6(i,e,t){if(jo&&typeof jo.onCommitFiberUnmount=="function")try{jo.onCommitFiberUnmount(tM,t)}catch{}switch(t.tag){case 5:Br||tf(t,e);case 6:var r=wr,n=ro;wr=null,Ol(i,e,t),wr=r,ro=n,wr!==null&&(ro?(i=wr,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):wr.removeChild(t.stateNode));break;case 18:wr!==null&&(ro?(i=wr,t=t.stateNode,i.nodeType===8?e2(i.parentNode,t):i.nodeType===1&&e2(i,t),U_(i)):e2(wr,t.stateNode));break;case 4:r=wr,n=ro,wr=t.stateNode.containerInfo,ro=!0,Ol(i,e,t),wr=r,ro=n;break;case 0:case 11:case 14:case 15:if(!Br&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){n=r=r.next;do{var s=n,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&$A(t,e,o),n=n.next}while(n!==r)}Ol(i,e,t);break;case 1:if(!Br&&(tf(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Pi(t,e,a)}Ol(i,e,t);break;case 21:Ol(i,e,t);break;case 22:t.mode&1?(Br=(r=Br)||t.memoizedState!==null,Ol(i,e,t),Br=r):Ol(i,e,t);break;default:Ol(i,e,t)}}function YR(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new tq),e.forEach(function(r){var n=hq.bind(null,i,r);t.has(r)||(t.add(r),r.then(n,n))})}}function qs(i,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var n=t[r];try{var s=i,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wr=a.stateNode,ro=!1;break e;case 3:wr=a.stateNode.containerInfo,ro=!0;break e;case 4:wr=a.stateNode.containerInfo,ro=!0;break e}a=a.return}if(wr===null)throw Error(Xe(160));b6(s,o,n),wr=null,ro=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(c){Pi(n,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)x6(e,i),e=e.sibling}function x6(i,e){var t=i.alternate,r=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(qs(e,i),Ro(i),r&4){try{t_(3,i,i.return),cM(3,i)}catch(v){Pi(i,i.return,v)}try{t_(5,i,i.return)}catch(v){Pi(i,i.return,v)}}break;case 1:qs(e,i),Ro(i),r&512&&t!==null&&tf(t,t.return);break;case 5:if(qs(e,i),Ro(i),r&512&&t!==null&&tf(t,t.return),i.flags&32){var n=i.stateNode;try{N_(n,"")}catch(v){Pi(i,i.return,v)}}if(r&4&&(n=i.stateNode,n!=null)){var s=i.memoizedProps,o=t!==null?t.memoizedProps:s,a=i.type,l=i.updateQueue;if(i.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&jU(n,s),rA(a,o);var c=rA(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?XU(n,h):u==="dangerouslySetInnerHTML"?WU(n,h):u==="children"?N_(n,h):Wk(n,u,h,c)}switch(a){case"input":JE(n,s);break;case"textarea":HU(n,s);break;case"select":var d=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?mf(n,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?mf(n,!!s.multiple,s.defaultValue,!0):mf(n,!!s.multiple,s.multiple?[]:"",!1))}n[j_]=s}catch(v){Pi(i,i.return,v)}}break;case 6:if(qs(e,i),Ro(i),r&4){if(i.stateNode===null)throw Error(Xe(162));n=i.stateNode,s=i.memoizedProps;try{n.nodeValue=s}catch(v){Pi(i,i.return,v)}}break;case 3:if(qs(e,i),Ro(i),r&4&&t!==null&&t.memoizedState.isDehydrated)try{U_(e.containerInfo)}catch(v){Pi(i,i.return,v)}break;case 4:qs(e,i),Ro(i);break;case 13:qs(e,i),Ro(i),n=i.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(TC=Bi())),r&4&&YR(i);break;case 22:if(u=t!==null&&t.memoizedState!==null,i.mode&1?(Br=(c=Br)||u,qs(e,i),Br=c):qs(e,i),Ro(i),r&8192){if(c=i.memoizedState!==null,(i.stateNode.isHidden=c)&&!u&&i.mode&1)for(lt=i,u=i.child;u!==null;){for(h=lt=u;lt!==null;){switch(d=lt,f=d.child,d.tag){case 0:case 11:case 14:case 15:t_(4,d,d.return);break;case 1:tf(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Pi(r,t,v)}}break;case 5:tf(d,d.return);break;case 22:if(d.memoizedState!==null){ZR(h);continue}}f!==null?(f.return=d,lt=f):ZR(h)}u=u.sibling}e:for(u=null,h=i;;){if(h.tag===5){if(u===null){u=h;try{n=h.stateNode,c?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=qU("display",o))}catch(v){Pi(i,i.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){Pi(i,i.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===i)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:qs(e,i),Ro(i),r&4&&YR(i);break;case 21:break;default:qs(e,i),Ro(i)}}function Ro(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if(v6(t)){var r=t;break e}t=t.return}throw Error(Xe(160))}switch(r.tag){case 5:var n=r.stateNode;r.flags&32&&(N_(n,""),r.flags&=-33);var s=XR(i);PA(i,s,n);break;case 3:case 4:var o=r.stateNode.containerInfo,a=XR(i);RA(i,a,o);break;default:throw Error(Xe(161))}}catch(l){Pi(i,i.return,l)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function rq(i,e,t){lt=i,w6(i)}function w6(i,e,t){for(var r=(i.mode&1)!==0;lt!==null;){var n=lt,s=n.child;if(n.tag===22&&r){var o=n.memoizedState!==null||Iv;if(!o){var a=n.alternate,l=a!==null&&a.memoizedState!==null||Br;a=Iv;var c=Br;if(Iv=o,(Br=l)&&!c)for(lt=n;lt!==null;)o=lt,l=o.child,o.tag===22&&o.memoizedState!==null?JR(n):l!==null?(l.return=o,lt=l):JR(n);for(;s!==null;)lt=s,w6(s),s=s.sibling;lt=n,Iv=a,Br=c}KR(i)}else n.subtreeFlags&8772&&s!==null?(s.return=n,lt=s):KR(i)}}function KR(i){for(;lt!==null;){var e=lt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Br||cM(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Br)if(t===null)r.componentDidMount();else{var n=e.elementType===e.type?t.memoizedProps:eo(e.type,t.memoizedProps);r.componentDidUpdate(n,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&NR(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}NR(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&U_(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xe(163))}Br||e.flags&512&&LA(e)}catch(d){Pi(e,e.return,d)}}if(e===i){lt=null;break}if(t=e.sibling,t!==null){t.return=e.return,lt=t;break}lt=e.return}}function ZR(i){for(;lt!==null;){var e=lt;if(e===i){lt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,lt=t;break}lt=e.return}}function JR(i){for(;lt!==null;){var e=lt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{cM(4,e)}catch(l){Pi(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var n=e.return;try{r.componentDidMount()}catch(l){Pi(e,n,l)}}var s=e.return;try{LA(e)}catch(l){Pi(e,s,l)}break;case 5:var o=e.return;try{LA(e)}catch(l){Pi(e,o,l)}}}catch(l){Pi(e,e.return,l)}if(e===i){lt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,lt=a;break}lt=e.return}}var nq=Math.ceil,Jx=_l.ReactCurrentDispatcher,MC=_l.ReactCurrentOwner,Cs=_l.ReactCurrentBatchConfig,Kt=0,fr=null,Hi=null,Lr=0,Bn=0,rf=Oc(0),Zi=0,Y_=null,Th=0,uM=0,SC=0,i_=null,pn=null,TC=0,Wf=1/0,Ba=null,Qx=!1,NA=null,Ac=null,Dv=!1,fc=null,ew=0,r_=0,IA=null,Cb=-1,$b=0;function nn(){return Kt&6?Bi():Cb!==-1?Cb:Cb=Bi()}function kc(i){return i.mode&1?Kt&2&&Lr!==0?Lr&-Lr:BW.transition!==null?($b===0&&($b=oz()),$b):(i=ii,i!==0||(i=window.event,i=i===void 0?16:pz(i.type)),i):1}function yo(i,e,t,r){if(50<r_)throw r_=0,IA=null,Error(Xe(185));by(i,t,r),(!(Kt&2)||i!==fr)&&(i===fr&&(!(Kt&2)&&(uM|=t),Zi===4&&lc(i,Lr)),vn(i,r),t===1&&Kt===0&&!(e.mode&1)&&(Wf=Bi()+500,oM&&Uc()))}function vn(i,e){var t=i.callbackNode;BG(i,e);var r=Ox(i,i===fr?Lr:0);if(r===0)t!==null&&aR(t),i.callbackNode=null,i.callbackPriority=0;else if(e=r&-r,i.callbackPriority!==e){if(t!=null&&aR(t),e===1)i.tag===0?FW(QR.bind(null,i)):Rz(QR.bind(null,i)),DW(function(){!(Kt&6)&&Uc()}),t=null;else{switch(az(r)){case 1:t=Zk;break;case 4:t=nz;break;case 16:t=Dx;break;case 536870912:t=sz;break;default:t=Dx}t=$6(t,M6.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function M6(i,e){if(Cb=-1,$b=0,Kt&6)throw Error(Xe(327));var t=i.callbackNode;if(bf()&&i.callbackNode!==t)return null;var r=Ox(i,i===fr?Lr:0);if(r===0)return null;if(r&30||r&i.expiredLanes||e)e=tw(i,r);else{e=r;var n=Kt;Kt|=2;var s=T6();(fr!==i||Lr!==e)&&(Ba=null,Wf=Bi()+500,fh(i,e));do try{aq();break}catch(a){S6(i,a)}while(1);uC(),Jx.current=s,Kt=n,Hi!==null?e=0:(fr=null,Lr=0,e=Zi)}if(e!==0){if(e===2&&(n=lA(i),n!==0&&(r=n,e=DA(i,n))),e===1)throw t=Y_,fh(i,0),lc(i,r),vn(i,Bi()),t;if(e===6)lc(i,r);else{if(n=i.current.alternate,!(r&30)&&!sq(n)&&(e=tw(i,r),e===2&&(s=lA(i),s!==0&&(r=s,e=DA(i,s))),e===1))throw t=Y_,fh(i,0),lc(i,r),vn(i,Bi()),t;switch(i.finishedWork=n,i.finishedLanes=r,e){case 0:case 1:throw Error(Xe(345));case 2:Nu(i,pn,Ba);break;case 3:if(lc(i,r),(r&130023424)===r&&(e=TC+500-Bi(),10<e)){if(Ox(i,0)!==0)break;if(n=i.suspendedLanes,(n&r)!==r){nn(),i.pingedLanes|=i.suspendedLanes&n;break}i.timeoutHandle=gA(Nu.bind(null,i,pn,Ba),e);break}Nu(i,pn,Ba);break;case 4:if(lc(i,r),(r&4194240)===r)break;for(e=i.eventTimes,n=-1;0<r;){var o=31-_o(r);s=1<<o,o=e[o],o>n&&(n=o),r&=~s}if(r=n,r=Bi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nq(r/1960))-r,10<r){i.timeoutHandle=gA(Nu.bind(null,i,pn,Ba),r);break}Nu(i,pn,Ba);break;case 5:Nu(i,pn,Ba);break;default:throw Error(Xe(329))}}}return vn(i,Bi()),i.callbackNode===t?M6.bind(null,i):null}function DA(i,e){var t=i_;return i.current.memoizedState.isDehydrated&&(fh(i,e).flags|=256),i=tw(i,e),i!==2&&(e=pn,pn=t,e!==null&&OA(e)),i}function OA(i){pn===null?pn=i:pn.push.apply(pn,i)}function sq(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var n=t[r],s=n.getSnapshot;n=n.value;try{if(!wo(s(),n))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function lc(i,e){for(e&=~SC,e&=~uM,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-_o(e),r=1<<t;i[t]=-1,e&=~r}}function QR(i){if(Kt&6)throw Error(Xe(327));bf();var e=Ox(i,0);if(!(e&1))return vn(i,Bi()),null;var t=tw(i,e);if(i.tag!==0&&t===2){var r=lA(i);r!==0&&(e=r,t=DA(i,r))}if(t===1)throw t=Y_,fh(i,0),lc(i,e),vn(i,Bi()),t;if(t===6)throw Error(Xe(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,Nu(i,pn,Ba),vn(i,Bi()),null}function EC(i,e){var t=Kt;Kt|=1;try{return i(e)}finally{Kt=t,Kt===0&&(Wf=Bi()+500,oM&&Uc())}}function Eh(i){fc!==null&&fc.tag===0&&!(Kt&6)&&bf();var e=Kt;Kt|=1;var t=Cs.transition,r=ii;try{if(Cs.transition=null,ii=1,i)return i()}finally{ii=r,Cs.transition=t,Kt=e,!(Kt&6)&&Uc()}}function AC(){Bn=rf.current,yi(rf)}function fh(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,IW(t)),Hi!==null)for(t=Hi.return;t!==null;){var r=t;switch(aC(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vx();break;case 3:Hf(),yi(_n),yi(Wr),gC();break;case 5:mC(r);break;case 4:Hf();break;case 13:yi(Ai);break;case 19:yi(Ai);break;case 10:hC(r.type._context);break;case 22:case 23:AC()}t=t.return}if(fr=i,Hi=i=Cc(i.current,null),Lr=Bn=e,Zi=0,Y_=null,SC=uM=Th=0,pn=i_=null,Yu!==null){for(e=0;e<Yu.length;e++)if(t=Yu[e],r=t.interleaved,r!==null){t.interleaved=null;var n=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=n,r.next=o}t.pending=r}Yu=null}return i}function S6(i,e){do{var t=Hi;try{if(uC(),Eb.current=Zx,Kx){for(var r=ki.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}Kx=!1}if(Sh=0,lr=Ki=ki=null,e_=!1,W_=0,MC.current=null,t===null||t.return===null){Zi=1,Y_=e,Hi=null;break}e:{var s=i,o=t.return,a=t,l=e;if(e=Lr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=FR(o);if(f!==null){f.flags&=-257,BR(f,o,a,s,e),f.mode&1&&zR(s,c,e),e=f,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){zR(s,c,e),kC();break e}l=Error(Xe(426))}}else if(wi&&a.mode&1){var m=FR(o);if(m!==null){!(m.flags&65536)&&(m.flags|=256),BR(m,o,a,s,e),lC(Gf(l,a));break e}}s=l=Gf(l,a),Zi!==4&&(Zi=2),i_===null?i_=[s]:i_.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=a6(s,l,e);PR(s,p);break e;case 1:a=l;var y=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ac===null||!Ac.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=l6(s,a,e);PR(s,x);break e}}s=s.return}while(s!==null)}A6(t)}catch(w){e=w,Hi===t&&t!==null&&(Hi=t=t.return);continue}break}while(1)}function T6(){var i=Jx.current;return Jx.current=Zx,i===null?Zx:i}function kC(){(Zi===0||Zi===3||Zi===2)&&(Zi=4),fr===null||!(Th&268435455)&&!(uM&268435455)||lc(fr,Lr)}function tw(i,e){var t=Kt;Kt|=2;var r=T6();(fr!==i||Lr!==e)&&(Ba=null,fh(i,e));do try{oq();break}catch(n){S6(i,n)}while(1);if(uC(),Kt=t,Jx.current=r,Hi!==null)throw Error(Xe(261));return fr=null,Lr=0,Zi}function oq(){for(;Hi!==null;)E6(Hi)}function aq(){for(;Hi!==null&&!RG();)E6(Hi)}function E6(i){var e=C6(i.alternate,i,Bn);i.memoizedProps=i.pendingProps,e===null?A6(i):Hi=e,MC.current=null}function A6(i){var e=i;do{var t=e.alternate;if(i=e.return,e.flags&32768){if(t=eq(t,e),t!==null){t.flags&=32767,Hi=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Zi=6,Hi=null;return}}else if(t=QW(t,e,Bn),t!==null){Hi=t;return}if(e=e.sibling,e!==null){Hi=e;return}Hi=e=i}while(e!==null);Zi===0&&(Zi=5)}function Nu(i,e,t){var r=ii,n=Cs.transition;try{Cs.transition=null,ii=1,lq(i,e,t,r)}finally{Cs.transition=n,ii=r}return null}function lq(i,e,t,r){do bf();while(fc!==null);if(Kt&6)throw Error(Xe(327));t=i.finishedWork;var n=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(Xe(177));i.callbackNode=null,i.callbackPriority=0;var s=t.lanes|t.childLanes;if(VG(i,s),i===fr&&(Hi=fr=null,Lr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Dv||(Dv=!0,$6(Dx,function(){return bf(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Cs.transition,Cs.transition=null;var o=ii;ii=1;var a=Kt;Kt|=4,MC.current=null,iq(i,t),x6(t,i),kW(fA),Ux=!!pA,fA=pA=null,i.current=t,rq(t),PG(),Kt=a,ii=o,Cs.transition=s}else i.current=t;if(Dv&&(Dv=!1,fc=i,ew=n),s=i.pendingLanes,s===0&&(Ac=null),DG(t.stateNode),vn(i,Bi()),e!==null)for(r=i.onRecoverableError,t=0;t<e.length;t++)n=e[t],r(n.value,{componentStack:n.stack,digest:n.digest});if(Qx)throw Qx=!1,i=NA,NA=null,i;return ew&1&&i.tag!==0&&bf(),s=i.pendingLanes,s&1?i===IA?r_++:(r_=0,IA=i):r_=0,Uc(),null}function bf(){if(fc!==null){var i=az(ew),e=Cs.transition,t=ii;try{if(Cs.transition=null,ii=16>i?16:i,fc===null)var r=!1;else{if(i=fc,fc=null,ew=0,Kt&6)throw Error(Xe(331));var n=Kt;for(Kt|=4,lt=i.current;lt!==null;){var s=lt,o=s.child;if(lt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(lt=c;lt!==null;){var u=lt;switch(u.tag){case 0:case 11:case 15:t_(8,u,s)}var h=u.child;if(h!==null)h.return=u,lt=h;else for(;lt!==null;){u=lt;var d=u.sibling,f=u.return;if(y6(u),u===c){lt=null;break}if(d!==null){d.return=f,lt=d;break}lt=f}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var m=v.sibling;v.sibling=null,v=m}while(v!==null)}}lt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,lt=o;else e:for(;lt!==null;){if(s=lt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:t_(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,lt=p;break e}lt=s.return}}var y=i.current;for(lt=y;lt!==null;){o=lt;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,lt=_;else e:for(o=y;lt!==null;){if(a=lt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:cM(9,a)}}catch(w){Pi(a,a.return,w)}if(a===o){lt=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,lt=x;break e}lt=a.return}}if(Kt=n,Uc(),jo&&typeof jo.onPostCommitFiberRoot=="function")try{jo.onPostCommitFiberRoot(tM,i)}catch{}r=!0}return r}finally{ii=t,Cs.transition=e}}return!1}function eP(i,e,t){e=Gf(t,e),e=a6(i,e,1),i=Ec(i,e,1),e=nn(),i!==null&&(by(i,1,e),vn(i,e))}function Pi(i,e,t){if(i.tag===3)eP(i,i,t);else for(;e!==null;){if(e.tag===3){eP(e,i,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ac===null||!Ac.has(r))){i=Gf(t,i),i=l6(e,i,1),e=Ec(e,i,1),i=nn(),e!==null&&(by(e,1,i),vn(e,i));break}}e=e.return}}function cq(i,e,t){var r=i.pingCache;r!==null&&r.delete(e),e=nn(),i.pingedLanes|=i.suspendedLanes&t,fr===i&&(Lr&t)===t&&(Zi===4||Zi===3&&(Lr&130023424)===Lr&&500>Bi()-TC?fh(i,0):SC|=t),vn(i,e)}function k6(i,e){e===0&&(i.mode&1?(e=Ev,Ev<<=1,!(Ev&130023424)&&(Ev=4194304)):e=1);var t=nn();i=al(i,e),i!==null&&(by(i,e,t),vn(i,t))}function uq(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),k6(i,t)}function hq(i,e){var t=0;switch(i.tag){case 13:var r=i.stateNode,n=i.memoizedState;n!==null&&(t=n.retryLane);break;case 19:r=i.stateNode;break;default:throw Error(Xe(314))}r!==null&&r.delete(e),k6(i,t)}var C6;C6=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||_n.current)fn=!0;else{if(!(i.lanes&t)&&!(e.flags&128))return fn=!1,JW(i,e,t);fn=!!(i.flags&131072)}else fn=!1,wi&&e.flags&1048576&&Pz(e,Gx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;kb(i,e),i=e.pendingProps;var n=Bf(e,Wr.current);vf(e,t),n=yC(null,e,r,i,n,t);var s=vC();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yn(r)?(s=!0,jx(e)):s=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,pC(e),n.updater=lM,e.stateNode=n,n._reactInternals=e,MA(e,r,i,t),e=EA(null,e,r,!0,s,t)):(e.tag=0,wi&&s&&oC(e),Qr(null,e,n,t),e=e.child),e;case 16:r=e.elementType;e:{switch(kb(i,e),i=e.pendingProps,n=r._init,r=n(r._payload),e.type=r,n=e.tag=pq(r),i=eo(r,i),n){case 0:e=TA(null,e,r,i,t);break e;case 1:e=HR(null,e,r,i,t);break e;case 11:e=VR(null,e,r,i,t);break e;case 14:e=jR(null,e,r,eo(r.type,i),t);break e}throw Error(Xe(306,r,""))}return e;case 0:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:eo(r,n),TA(i,e,r,n,t);case 1:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:eo(r,n),HR(i,e,r,n,t);case 3:e:{if(d6(e),i===null)throw Error(Xe(387));r=e.pendingProps,s=e.memoizedState,n=s.element,zz(i,e),Xx(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){n=Gf(Error(Xe(423)),e),e=GR(i,e,r,t,n);break e}else if(r!==n){n=Gf(Error(Xe(424)),e),e=GR(i,e,r,t,n);break e}else for(Wn=Tc(e.stateNode.containerInfo.firstChild),qn=e,wi=!0,lo=null,t=Oz(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Vf(),r===n){e=ll(i,e,t);break e}Qr(i,e,r,t)}e=e.child}return e;case 5:return Fz(e),i===null&&bA(e),r=e.type,n=e.pendingProps,s=i!==null?i.memoizedProps:null,o=n.children,mA(r,n)?o=null:s!==null&&mA(r,s)&&(e.flags|=32),h6(i,e),Qr(i,e,o,t),e.child;case 6:return i===null&&bA(e),null;case 13:return p6(i,e,t);case 4:return fC(e,e.stateNode.containerInfo),r=e.pendingProps,i===null?e.child=jf(e,null,r,t):Qr(i,e,r,t),e.child;case 11:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:eo(r,n),VR(i,e,r,n,t);case 7:return Qr(i,e,e.pendingProps,t),e.child;case 8:return Qr(i,e,e.pendingProps.children,t),e.child;case 12:return Qr(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,n=e.pendingProps,s=e.memoizedProps,o=n.value,pi(Wx,r._currentValue),r._currentValue=o,s!==null)if(wo(s.value,o)){if(s.children===n.children&&!_n.current){e=ll(i,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Qa(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),xA(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Xe(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),xA(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Qr(i,e,n.children,t),e=e.child}return e;case 9:return n=e.type,r=e.pendingProps.children,vf(e,t),n=Rs(n),r=r(n),e.flags|=1,Qr(i,e,r,t),e.child;case 14:return r=e.type,n=eo(r,e.pendingProps),n=eo(r.type,n),jR(i,e,r,n,t);case 15:return c6(i,e,e.type,e.pendingProps,t);case 17:return r=e.type,n=e.pendingProps,n=e.elementType===r?n:eo(r,n),kb(i,e),e.tag=1,yn(r)?(i=!0,jx(e)):i=!1,vf(e,t),o6(e,r,n),MA(e,r,n,t),EA(null,e,r,!0,i,t);case 19:return f6(i,e,t);case 22:return u6(i,e,t)}throw Error(Xe(156,e.tag))};function $6(i,e){return rz(i,e)}function dq(i,e,t,r){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Es(i,e,t,r){return new dq(i,e,t,r)}function CC(i){return i=i.prototype,!(!i||!i.isReactComponent)}function pq(i){if(typeof i=="function")return CC(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Xk)return 11;if(i===Yk)return 14}return 2}function Cc(i,e){var t=i.alternate;return t===null?(t=Es(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function Lb(i,e,t,r,n,s){var o=2;if(r=i,typeof i=="function")CC(i)&&(o=1);else if(typeof i=="string")o=5;else e:switch(i){case Wp:return mh(t.children,n,s,e);case qk:o=8,n|=8;break;case qE:return i=Es(12,t,e,n|2),i.elementType=qE,i.lanes=s,i;case XE:return i=Es(13,t,e,n),i.elementType=XE,i.lanes=s,i;case YE:return i=Es(19,t,e,n),i.elementType=YE,i.lanes=s,i;case FU:return hM(t,n,s,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case UU:o=10;break e;case zU:o=9;break e;case Xk:o=11;break e;case Yk:o=14;break e;case rc:o=16,r=null;break e}throw Error(Xe(130,i==null?i:typeof i,""))}return e=Es(o,t,e,n),e.elementType=i,e.type=r,e.lanes=s,e}function mh(i,e,t,r){return i=Es(7,i,r,e),i.lanes=t,i}function hM(i,e,t,r){return i=Es(22,i,r,e),i.elementType=FU,i.lanes=t,i.stateNode={isHidden:!1},i}function l2(i,e,t){return i=Es(6,i,null,e),i.lanes=t,i}function c2(i,e,t){return e=Es(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function fq(i,e,t,r,n){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jS(0),this.expirationTimes=jS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jS(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function $C(i,e,t,r,n,s,o,a,l){return i=new fq(i,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Es(3,null,null,e),i.current=s,s.stateNode=i,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},pC(s),i}function mq(i,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gp,key:r==null?null:""+r,children:i,containerInfo:e,implementation:t}}function L6(i){if(!i)return Pc;i=i._reactInternals;e:{if(Xh(i)!==i||i.tag!==1)throw Error(Xe(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Xe(171))}if(i.tag===1){var t=i.type;if(yn(t))return Lz(i,t,e)}return e}function R6(i,e,t,r,n,s,o,a,l){return i=$C(t,r,!0,i,n,s,o,a,l),i.context=L6(null),t=i.current,r=nn(),n=kc(t),s=Qa(r,n),s.callback=e??null,Ec(t,s,n),i.current.lanes=n,by(i,n,r),vn(i,r),i}function dM(i,e,t,r){var n=e.current,s=nn(),o=kc(n);return t=L6(t),e.context===null?e.context=t:e.pendingContext=t,e=Qa(s,o),e.payload={element:i},r=r===void 0?null:r,r!==null&&(e.callback=r),i=Ec(n,e,o),i!==null&&(yo(i,n,o,s),Tb(i,n,o)),o}function iw(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function tP(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function LC(i,e){tP(i,e),(i=i.alternate)&&tP(i,e)}function gq(){return null}var P6=typeof reportError=="function"?reportError:function(i){console.error(i)};function RC(i){this._internalRoot=i}pM.prototype.render=RC.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(Xe(409));dM(i,e,null,null)};pM.prototype.unmount=RC.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Eh(function(){dM(null,i,null,null)}),e[ol]=null}};function pM(i){this._internalRoot=i}pM.prototype.unstable_scheduleHydration=function(i){if(i){var e=uz();i={blockedOn:null,target:i,priority:e};for(var t=0;t<ac.length&&e!==0&&e<ac[t].priority;t++);ac.splice(t,0,i),t===0&&dz(i)}};function PC(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function fM(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function iP(){}function _q(i,e,t,r,n){if(n){if(typeof r=="function"){var s=r;r=function(){var c=iw(o);s.call(c)}}var o=R6(e,r,i,0,null,!1,!1,"",iP);return i._reactRootContainer=o,i[ol]=o.current,B_(i.nodeType===8?i.parentNode:i),Eh(),o}for(;n=i.lastChild;)i.removeChild(n);if(typeof r=="function"){var a=r;r=function(){var c=iw(l);a.call(c)}}var l=$C(i,0,!1,null,null,!1,!1,"",iP);return i._reactRootContainer=l,i[ol]=l.current,B_(i.nodeType===8?i.parentNode:i),Eh(function(){dM(e,l,t,r)}),l}function mM(i,e,t,r,n){var s=t._reactRootContainer;if(s){var o=s;if(typeof n=="function"){var a=n;n=function(){var l=iw(o);a.call(l)}}dM(e,o,i,n)}else o=_q(t,e,i,n,r);return iw(o)}lz=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=s0(e.pendingLanes);t!==0&&(Jk(e,t|1),vn(e,Bi()),!(Kt&6)&&(Wf=Bi()+500,Uc()))}break;case 13:Eh(function(){var r=al(i,1);if(r!==null){var n=nn();yo(r,i,1,n)}}),LC(i,1)}};Qk=function(i){if(i.tag===13){var e=al(i,134217728);if(e!==null){var t=nn();yo(e,i,134217728,t)}LC(i,134217728)}};cz=function(i){if(i.tag===13){var e=kc(i),t=al(i,e);if(t!==null){var r=nn();yo(t,i,e,r)}LC(i,e)}};uz=function(){return ii};hz=function(i,e){var t=ii;try{return ii=i,e()}finally{ii=t}};sA=function(i,e,t){switch(e){case"input":if(JE(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==i&&r.form===i.form){var n=sM(r);if(!n)throw Error(Xe(90));VU(r),JE(r,n)}}}break;case"textarea":HU(i,t);break;case"select":e=t.value,e!=null&&mf(i,!!t.multiple,e,!1)}};ZU=EC;JU=Eh;var yq={usingClientEntryPoint:!1,Events:[wy,Kp,sM,YU,KU,EC]},wg={findFiberByHostInstance:Xu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vq={bundleType:wg.bundleType,version:wg.version,rendererPackageName:wg.rendererPackageName,rendererConfig:wg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_l.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=tz(i),i===null?null:i.stateNode},findFiberByHostInstance:wg.findFiberByHostInstance||gq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ov=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ov.isDisabled&&Ov.supportsFiber)try{tM=Ov.inject(vq),jo=Ov}catch{}}Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yq;Qn.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!PC(e))throw Error(Xe(200));return mq(i,e,null,t)};Qn.createRoot=function(i,e){if(!PC(i))throw Error(Xe(299));var t=!1,r="",n=P6;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=$C(i,1,!1,null,null,t,!1,r,n),i[ol]=e.current,B_(i.nodeType===8?i.parentNode:i),new RC(e)};Qn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(Xe(188)):(i=Object.keys(i).join(","),Error(Xe(268,i)));return i=tz(e),i=i===null?null:i.stateNode,i};Qn.flushSync=function(i){return Eh(i)};Qn.hydrate=function(i,e,t){if(!fM(e))throw Error(Xe(200));return mM(null,i,e,!0,t)};Qn.hydrateRoot=function(i,e,t){if(!PC(i))throw Error(Xe(405));var r=t!=null&&t.hydratedSources||null,n=!1,s="",o=P6;if(t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=R6(e,null,i,1,t??null,n,!1,s,o),i[ol]=e.current,B_(i),r)for(i=0;i<r.length;i++)t=r[i],n=t._getVersion,n=n(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n);return new pM(e)};Qn.render=function(i,e,t){if(!fM(e))throw Error(Xe(200));return mM(null,i,e,!1,t)};Qn.unmountComponentAtNode=function(i){if(!fM(i))throw Error(Xe(40));return i._reactRootContainer?(Eh(function(){mM(null,null,i,!1,function(){i._reactRootContainer=null,i[ol]=null})}),!0):!1};Qn.unstable_batchedUpdates=EC;Qn.unstable_renderSubtreeIntoContainer=function(i,e,t,r){if(!fM(t))throw Error(Xe(200));if(i==null||i._reactInternals===void 0)throw Error(Xe(38));return mM(i,e,t,!1,r)};Qn.version="18.3.1-next-f1338f8080-20240426";function N6(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N6)}catch(i){console.error(i)}}N6(),NU.exports=Qn;var bq=NU.exports,rP=bq;GE.createRoot=rP.createRoot,GE.hydrateRoot=rP.hydrateRoot;let xq=class I6{constructor(e="data-theme"){this.themeSheets={},this.themeAttribute=e}static createSheet(){const e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addThemeRules(e,t){typeof this.themeSheets[e]>"u"&&(this.themeSheets[e]=I6.createSheet());const r=Object.entries(t).map(([n,s])=>`${n}: ${s};`);this.themeSheets[e].insertRule(`
      [${this.themeAttribute}="${e}"] {
        ${r.join(`
`)}
      }
    `)}setTheme(e,t){e.setAttribute(this.themeAttribute,t)}getTheme(e){return e.getAttribute(this.themeAttribute)??void 0}};const wq={"--lumo-base-color":"hsl(214, 35%, 21%)","--lumo-tint-5pct":"hsla(214, 65%, 85%, 0.06)","--lumo-tint-10pct":"hsla(214, 60%, 80%, 0.14)","--lumo-tint-20pct":"hsla(214, 64%, 82%, 0.23)","--lumo-tint-30pct":"hsla(214, 69%, 84%, 0.32)","--lumo-tint-40pct":"hsla(214, 73%, 86%, 0.41)","--lumo-tint-50pct":"hsla(214, 78%, 88%, 0.5)","--lumo-tint-60pct":"hsla(214, 82%, 90%, 0.58)","--lumo-tint-70pct":"hsla(214, 87%, 92%, 0.69)","--lumo-tint-80pct":"hsla(214, 91%, 94%, 0.8)","--lumo-tint-90pct":"hsla(214, 96%, 96%, 0.9)","--lumo-tint":"hsl(214, 100%, 98%)","--lumo-shade-5pct":"hsla(214, 0%, 0%, 0.07)","--lumo-shade-10pct":"hsla(214, 4%, 2%, 0.15)","--lumo-shade-20pct":"hsla(214, 8%, 4%, 0.23)","--lumo-shade-30pct":"hsla(214, 12%, 6%, 0.32)","--lumo-shade-40pct":"hsla(214, 16%, 8%, 0.41)","--lumo-shade-50pct":"hsla(214, 20%, 10%, 0.5)","--lumo-shade-60pct":"hsla(214, 24%, 12%, 0.6)","--lumo-shade-70pct":"hsla(214, 28%, 13%, 0.7)","--lumo-shade-80pct":"hsla(214, 32%, 13%, 0.8)","--lumo-shade-90pct":"hsla(214, 33%, 13%, 0.9)","--lumo-shade":"hsl(214, 33%, 13%)","--lumo-contrast-5pct":"var(--lumo-tint-5pct)","--lumo-contrast-10pct":"var(--lumo-tint-10pct)","--lumo-contrast-20pct":"var(--lumo-tint-20pct)","--lumo-contrast-30pct":"var(--lumo-tint-30pct)","--lumo-contrast-40pct":"var(--lumo-tint-40pct)","--lumo-contrast-50pct":"var(--lumo-tint-50pct)","--lumo-contrast-60pct":"var(--lumo-tint-60pct)","--lumo-contrast-70pct":"var(--lumo-tint-70pct)","--lumo-contrast-80pct":"var(--lumo-tint-80pct)","--lumo-contrast-90pct":"var(--lumo-tint-90pct)","--lumo-contrast":"var(--lumo-tint)","--lumo-header-text-color":"var(--lumo-contrast)","--lumo-body-text-color":"var(--lumo-contrast-90pct)","--lumo-secondary-text-color":"var(--lumo-contrast-70pct)","--lumo-tertiary-text-color":"var(--lumo-contrast-50pct)","--lumo-disabled-text-color":"var(--lumo-contrast-30pct)","--lumo-primary-color":"hsl(214, 90%, 48%)","--lumo-primary-color-50pct":"hsla(214, 90%, 70%, 0.69)","--lumo-primary-color-10pct":"hsla(214, 90%, 55%, 0.13)","--lumo-primary-text-color":"hsl(214, 90%, 77%)","--lumo-primary-contrast-color":"#fff","--lumo-error-color":"hsl(3, 79%, 49%)","--lumo-error-color-50pct":"hsla(3, 75%, 62%, 0.5)","--lumo-error-color-10pct":"hsla(3, 75%, 62%, 0.14)","--lumo-error-text-color":"hsl(3, 100%, 80%)","--lumo-success-color":"hsl(145, 72%, 30%)","--lumo-success-color-50pct":"hsla(145, 92%, 51%, 0.5)","--lumo-success-color-10pct":"hsla(145, 92%, 51%, 0.1)","--lumo-success-text-color":"hsl(145, 85%, 46%)","--dashboard-background":"hsl(214, 35%, 21%)","--dashboard-navbar-background":"#222","--frc-bar-background":"#444","--frc-bar-foreground":"steelblue","--frc-bar-color":"#fff","--frc-axis-text-color":"#fff","--frc-3-axis-accelerometer-label-color":"#fff","--frc-basic-fms-info-text-color":"#fff","--frc-differential-drivebase-drivetrain-color":"#aaa","--frc-mecanum-drivebase-drivetrain-color":"#aaa","--frc-encoder-label-color":"#fff","--frc-encoder-value-color":"#aaa","--frc-gyro-color":"#fff","--frc-gyro-dial-color":"blue","--frc-gyro-big-tick-color":"#fff","--frc-gyro-tick-color":"#777","--frc-gyro-edge-color":"#fff","--frc-gyro-dial-circle-color":"#444","--frc-gyro-dial-circle-stroke-color":"#ccc","--frc-gyro-text-color":"#fff","--frc-label-text-color":"#fff","--frc-voltage-view-foreground-color":"#dd9b0d","--frc-robot-subsystem-header-color":"#A020F0","--frc-toggle-switch-color":"#999","--frc-line-chart-text-color":"white","--frc-line-chart-border-color":"white","--frc-line-chart-grid-color":"rgba(22,22,22,.2)","--frc-gauge-fill-color":"rgb(90,150,200)","--frc-gauge-color":"#666","--frc-gauge-text-color":"rgb(220, 220, 220)","--frc-swerve-drive-color":"white","--frc-button-background-color":"rgba(255,255,255,.1)","--frc-button-text-color":"white","--frc-button-toggled-background-color":"rgba(240,240,240)","--frc-button-toggled-text-color":"black","--frc-network-alerts-text-color":"white","--frc-network-alerts-header-color":"steelblue","--frc-pid-controller-text-color":"white","--frc-pid-controller-input-background-color":"rgba(255,255,255,.2)","--frc-pid-controller-input-border-color":"rgba(255,255,255,.5)","--frc-sendable-chooser-label-color":"white","--frc-preferences-input-text-color":"white","--frc-preferences-input-background-color":"rgba(255,255,255,.3)","--frc-preferences-label-color":"white","--frc-preferences-input-button-text-color":"#ccc","--frc-preferences-placeholder-text-color":"#aaa","--frc-preferences-header-background-color":"steelblue"},Mq={"--my-element-background":"cornflowerblue","--my-element-color":"white"},Sq={"--my-element-background":"cadetblue","--my-element-color":"black"},rw=new xq;rw.addThemeRules("dark",{...wq,...Sq});rw.addThemeRules("light",Mq);function Tq(){const[i,e]=xo.useState("light"),t=r=>{e(r),rw.setTheme(document.body,r)};return xo.useEffect(()=>{rw.setTheme(document.body,"light")},[]),Ei.jsxs("div",{className:"theme-chooser",children:[Ei.jsxs("label",{children:[Ei.jsx("input",{type:"radio",name:"theme-chooser",onClick:()=>t("light"),checked:i==="light"})," ","Light Theme"]}),Ei.jsxs("label",{children:[Ei.jsx("input",{type:"radio",name:"theme-chooser",onClick:()=>t("dark"),checked:i==="dark"})," ","Dark Theme"]})]})}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Eq=new Set(["children","localName","ref","style","className"]),nP=new WeakMap,sP=(i,e,t,r,n)=>{const s=n==null?void 0:n[e];s===void 0?(i[e]=t,t==null&&e in HTMLElement.prototype&&i.removeAttribute(e)):t!==r&&((o,a,l)=>{let c=nP.get(o);c===void 0&&nP.set(o,c=new Map);let u=c.get(a);l!==void 0?u===void 0?(c.set(a,u={handleEvent:l}),o.addEventListener(a,u)):u.handleEvent=l:u!==void 0&&(c.delete(a),o.removeEventListener(a,u))})(i,s,t)},xt=({react:i,tagName:e,elementClass:t,events:r,displayName:n})=>{const s=new Set(Object.keys(r??{})),o=i.forwardRef((a,l)=>{const c=i.useRef(new Map),u=i.useRef(null),h={},d={};for(const[f,g]of Object.entries(a))Eq.has(f)?h[f==="className"?"class":f]=g:s.has(f)||f in t.prototype?d[f]=g:h[f]=g;return i.useLayoutEffect(()=>{if(u.current===null)return;const f=new Map;for(const g in d)sP(u.current,g,a[g],c.current.get(g),r),c.current.delete(g),f.set(g,a[g]);for(const[g,v]of c.current)sP(u.current,g,void 0,v,r);c.current=f}),i.useLayoutEffect(()=>{var f;(f=u.current)==null||f.removeAttribute("defer-hydration")},[]),h.suppressHydrationWarning=!0,i.createElement(e,{...h,ref:i.useCallback(f=>{u.current=f,typeof l=="function"?l(f):l!==null&&(l.current=f)},[l])})});return o.displayName=n??t.name,o};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Rb=globalThis,NC=Rb.ShadowRoot&&(Rb.ShadyCSS===void 0||Rb.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,IC=Symbol(),oP=new WeakMap;let D6=class{constructor(e,t,r){if(this._$cssResult$=!0,r!==IC)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(NC&&e===void 0){const r=t!==void 0&&t.length===1;r&&(e=oP.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&oP.set(t,e))}return e}toString(){return this.cssText}};const Aq=i=>new D6(typeof i=="string"?i:i+"",void 0,IC),Ct=(i,...e)=>{const t=i.length===1?i[0]:e.reduce((r,n,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+i[s+1],i[0]);return new D6(t,i,IC)},kq=(i,e)=>{if(NC)i.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const r=document.createElement("style"),n=Rb.litNonce;n!==void 0&&r.setAttribute("nonce",n),r.textContent=t.cssText,i.appendChild(r)}},aP=NC?i=>i:i=>i instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return Aq(t)})(i):i;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Cq,defineProperty:$q,getOwnPropertyDescriptor:Lq,getOwnPropertyNames:Rq,getOwnPropertySymbols:Pq,getPrototypeOf:Nq}=Object,qf=globalThis,lP=qf.trustedTypes,Iq=lP?lP.emptyScript:"",cP=qf.reactiveElementPolyfillSupport,n_=(i,e)=>i,nw={toAttribute(i,e){switch(e){case Boolean:i=i?Iq:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,e){let t=i;switch(e){case Boolean:t=i!==null;break;case Number:t=i===null?null:Number(i);break;case Object:case Array:try{t=JSON.parse(i)}catch{t=null}}return t}},DC=(i,e)=>!Cq(i,e),uP={attribute:!0,type:String,converter:nw,reflect:!1,hasChanged:DC};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),qf.litPropertyMetadata??(qf.litPropertyMetadata=new WeakMap);let wp=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=uP){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(e,r,t);n!==void 0&&$q(this.prototype,e,n)}}static getPropertyDescriptor(e,t,r){const{get:n,set:s}=Lq(this.prototype,e)??{get(){return this[t]},set(o){this[t]=o}};return{get(){return n==null?void 0:n.call(this)},set(o){const a=n==null?void 0:n.call(this);s.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??uP}static _$Ei(){if(this.hasOwnProperty(n_("elementProperties")))return;const e=Nq(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(n_("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(n_("properties"))){const t=this.properties,r=[...Rq(t),...Pq(t)];for(const n of r)this.createProperty(n,t[n])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[r,n]of t)this.elementProperties.set(r,n)}this._$Eh=new Map;for(const[t,r]of this.elementProperties){const n=this._$Eu(t,r);n!==void 0&&this._$Eh.set(n,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const n of r)t.unshift(aP(n))}else e!==void 0&&t.push(aP(e));return t}static _$Eu(e,t){const r=t.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(t=>t(this))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)==null||t.call(e))}removeController(e){var t;(t=this._$EO)==null||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return kq(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(t=>{var r;return(r=t.hostConnected)==null?void 0:r.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(t=>{var r;return(r=t.hostDisconnected)==null?void 0:r.call(t)})}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$EC(e,t){var r;const n=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,n);if(s!==void 0&&n.reflect===!0){const o=(((r=n.converter)==null?void 0:r.toAttribute)!==void 0?n.converter:nw).toAttribute(t,n.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,t){var r;const n=this.constructor,s=n._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const o=n.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((r=o.converter)==null?void 0:r.fromAttribute)!==void 0?o.converter:nw;this._$Em=s,this[s]=a.fromAttribute(t,o.type),this._$Em=null}}requestUpdate(e,t,r){if(e!==void 0){if(r??(r=this.constructor.getPropertyOptions(e)),!(r.hasChanged??DC)(this[e],t))return;this.P(e,t,r)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(e,t,r){this._$AL.has(e)||this._$AL.set(e,t),r.reflect===!0&&this._$Em!==e&&(this._$Ej??(this._$Ej=new Set)).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[s,o]of n)o.wrapped!==!0||this._$AL.has(s)||this[s]===void 0||this.P(s,this[s],o)}let t=!1;const r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),(e=this._$EO)==null||e.forEach(n=>{var s;return(s=n.hostUpdate)==null?void 0:s.call(n)}),this.update(r)):this._$EU()}catch(n){throw t=!1,this._$EU(),n}t&&this._$AE(r)}willUpdate(e){}_$AE(e){var t;(t=this._$EO)==null||t.forEach(r=>{var n;return(n=r.hostUpdated)==null?void 0:n.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&(this._$Ej=this._$Ej.forEach(t=>this._$EC(t,this[t]))),this._$EU()}updated(e){}firstUpdated(e){}};wp.elementStyles=[],wp.shadowRootOptions={mode:"open"},wp[n_("elementProperties")]=new Map,wp[n_("finalized")]=new Map,cP==null||cP({ReactiveElement:wp}),(qf.reactiveElementVersions??(qf.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const sw=globalThis,ow=sw.trustedTypes,hP=ow?ow.createPolicy("lit-html",{createHTML:i=>i}):void 0,O6="$lit$",cc=`lit$${Math.random().toFixed(9).slice(2)}$`,U6="?"+cc,Dq=`<${U6}>`,Ah=document,K_=()=>Ah.createComment(""),Z_=i=>i===null||typeof i!="object"&&typeof i!="function",OC=Array.isArray,Oq=i=>OC(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",u2=`[ 	
\f\r]`,Mg=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,dP=/-->/g,pP=/>/g,xu=RegExp(`>|${u2}(?:([^\\s"'>=/]+)(${u2}*=${u2}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),fP=/'/g,mP=/"/g,z6=/^(?:script|style|textarea|title)$/i,F6=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),qe=F6(1),bi=F6(2),kh=Symbol.for("lit-noChange"),Ni=Symbol.for("lit-nothing"),gP=new WeakMap,Zu=Ah.createTreeWalker(Ah,129);function B6(i,e){if(!OC(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return hP!==void 0?hP.createHTML(e):e}const Uq=(i,e)=>{const t=i.length-1,r=[];let n,s=e===2?"<svg>":e===3?"<math>":"",o=Mg;for(let a=0;a<t;a++){const l=i[a];let c,u,h=-1,d=0;for(;d<l.length&&(o.lastIndex=d,u=o.exec(l),u!==null);)d=o.lastIndex,o===Mg?u[1]==="!--"?o=dP:u[1]!==void 0?o=pP:u[2]!==void 0?(z6.test(u[2])&&(n=RegExp("</"+u[2],"g")),o=xu):u[3]!==void 0&&(o=xu):o===xu?u[0]===">"?(o=n??Mg,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?xu:u[3]==='"'?mP:fP):o===mP||o===fP?o=xu:o===dP||o===pP?o=Mg:(o=xu,n=void 0);const f=o===xu&&i[a+1].startsWith("/>")?" ":"";s+=o===Mg?l+Dq:h>=0?(r.push(c),l.slice(0,h)+O6+l.slice(h)+cc+f):l+cc+(h===-2?a:f)}return[B6(i,s+(i[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let UA=class V6{constructor({strings:e,_$litType$:t},r){let n;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[c,u]=Uq(e,t);if(this.el=V6.createElement(c,r),Zu.currentNode=this.el.content,t===2||t===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(n=Zu.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(const h of n.getAttributeNames())if(h.endsWith(O6)){const d=u[o++],f=n.getAttribute(h).split(cc),g=/([.?@])?(.*)/.exec(d);l.push({type:1,index:s,name:g[2],strings:f,ctor:g[1]==="."?Fq:g[1]==="?"?Bq:g[1]==="@"?Vq:gM}),n.removeAttribute(h)}else h.startsWith(cc)&&(l.push({type:6,index:s}),n.removeAttribute(h));if(z6.test(n.tagName)){const h=n.textContent.split(cc),d=h.length-1;if(d>0){n.textContent=ow?ow.emptyScript:"";for(let f=0;f<d;f++)n.append(h[f],K_()),Zu.nextNode(),l.push({type:2,index:++s});n.append(h[d],K_())}}}else if(n.nodeType===8)if(n.data===U6)l.push({type:2,index:s});else{let h=-1;for(;(h=n.data.indexOf(cc,h+1))!==-1;)l.push({type:7,index:s}),h+=cc.length-1}s++}}static createElement(e,t){const r=Ah.createElement("template");return r.innerHTML=e,r}};function Xf(i,e,t=i,r){var n,s;if(e===kh)return e;let o=r!==void 0?(n=t._$Co)==null?void 0:n[r]:t._$Cl;const a=Z_(e)?void 0:e._$litDirective$;return(o==null?void 0:o.constructor)!==a&&((s=o==null?void 0:o._$AO)==null||s.call(o,!1),a===void 0?o=void 0:(o=new a(i),o._$AT(i,t,r)),r!==void 0?(t._$Co??(t._$Co=[]))[r]=o:t._$Cl=o),o!==void 0&&(e=Xf(i,o._$AS(i,e.values),o,r)),e}let zq=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:r}=this._$AD,n=((e==null?void 0:e.creationScope)??Ah).importNode(t,!0);Zu.currentNode=n;let s=Zu.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new UC(s,s.nextSibling,this,e):l.type===1?c=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(c=new jq(s,this,e)),this._$AV.push(c),l=r[++a]}o!==(l==null?void 0:l.index)&&(s=Zu.nextNode(),o++)}return Zu.currentNode=Ah,n}p(e){let t=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}},UC=class j6{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,t,r,n){this.type=2,this._$AH=Ni,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Xf(this,e,t),Z_(e)?e===Ni||e==null||e===""?(this._$AH!==Ni&&this._$AR(),this._$AH=Ni):e!==this._$AH&&e!==kh&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Oq(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Ni&&Z_(this._$AH)?this._$AA.nextSibling.data=e:this.T(Ah.createTextNode(e)),this._$AH=e}$(e){var t;const{values:r,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=UA.createElement(B6(n.h,n.h[0]),this.options)),n);if(((t=this._$AH)==null?void 0:t._$AD)===s)this._$AH.p(r);else{const o=new zq(s,this),a=o.u(this.options);o.p(r),this.T(a),this._$AH=o}}_$AC(e){let t=gP.get(e.strings);return t===void 0&&gP.set(e.strings,t=new UA(e)),t}k(e){OC(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,n=0;for(const s of e)n===t.length?t.push(r=new j6(this.O(K_()),this.O(K_()),this,this.options)):r=t[n],r._$AI(s),n++;n<t.length&&(this._$AR(r&&r._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,t);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}},gM=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,n,s){this.type=1,this._$AH=Ni,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Ni}_$AI(e,t=this,r,n){const s=this.strings;let o=!1;if(s===void 0)e=Xf(this,e,t,0),o=!Z_(e)||e!==this._$AH&&e!==kh,o&&(this._$AH=e);else{const a=e;let l,c;for(e=s[0],l=0;l<s.length-1;l++)c=Xf(this,a[r+l],t,l),c===kh&&(c=this._$AH[l]),o||(o=!Z_(c)||c!==this._$AH[l]),c===Ni?e=Ni:e!==Ni&&(e+=(c??"")+s[l+1]),this._$AH[l]=c}o&&!n&&this.j(e)}j(e){e===Ni?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},Fq=class extends gM{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Ni?void 0:e}},Bq=class extends gM{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Ni)}},Vq=class extends gM{constructor(e,t,r,n,s){super(e,t,r,n,s),this.type=5}_$AI(e,t=this){if((e=Xf(this,e,t,0)??Ni)===kh)return;const r=this._$AH,n=e===Ni&&r!==Ni||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==Ni&&(r===Ni||n);n&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;typeof this._$AH=="function"?this._$AH.call(((t=this.options)==null?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}},jq=class{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Xf(this,e)}};const _P=sw.litHtmlPolyfillSupport;_P==null||_P(UA,UC),(sw.litHtmlVersions??(sw.litHtmlVersions=[])).push("3.2.1");const Hq=(i,e,t)=>{const r=(t==null?void 0:t.renderBefore)??e;let n=r._$litPart$;if(n===void 0){const s=(t==null?void 0:t.renderBefore)??null;r._$litPart$=n=new UC(e.insertBefore(K_(),s),s,void 0,t??{})}return n._$AI(i),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let ct=class extends wp{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e;const t=super.createRenderRoot();return(e=this.renderOptions).renderBefore??(e.renderBefore=t.firstChild),t}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Hq(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return kh}};var yP;ct._$litElement$=!0,ct.finalized=!0,(yP=globalThis.litElementHydrateSupport)==null||yP.call(globalThis,{LitElement:ct});const vP=globalThis.litElementPolyfillSupport;vP==null||vP({LitElement:ct});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Gq={attribute:!0,type:String,converter:nw,reflect:!1,hasChanged:DC},Wq=(i=Gq,e,t)=>{const{kind:r,metadata:n}=t;let s=globalThis.litPropertyMetadata.get(n);if(s===void 0&&globalThis.litPropertyMetadata.set(n,s=new Map),s.set(t.name,i),r==="accessor"){const{name:o}=t;return{set(a){const l=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,l,i)},init(a){return a!==void 0&&this.P(o,void 0,i),a}}}if(r==="setter"){const{name:o}=t;return function(a){const l=this[o];e.call(this,a),this.requestUpdate(o,l,i)}}throw Error("Unsupported decorator location: "+r)};function W(i){return(e,t)=>typeof t=="object"?Wq(i,e,t):((r,n,s)=>{const o=n.hasOwnProperty(s);return n.constructor.createProperty(s,o?{...r,wrapped:!0}:r),o?Object.getOwnPropertyDescriptor(n,s):void 0})(i,e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Ui(i){return W({...i,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const zA=(i,e,t)=>(t.configurable=!0,t.enumerable=!0,Reflect.decorate&&typeof e!="object"&&Object.defineProperty(i,e,t),t);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function ri(i,e){return(t,r,n)=>{const s=o=>{var a;return((a=o.renderRoot)==null?void 0:a.querySelector(i))??null};if(e){const{get:o,set:a}=typeof r=="object"?t:n??(()=>{const l=Symbol();return{get(){return this[l]},set(c){this[l]=c}}})();return zA(t,r,{get(){let l=o.call(this);return l===void 0&&(l=s(this),(l!==null||this.hasUpdated)&&a.call(this,l)),l}})}return zA(t,r,{get(){return s(this)}})}}var qq=Object.defineProperty,Xq=Object.getOwnPropertyDescriptor,km=(i,e,t,r)=>{for(var n=r>1?void 0:r?Xq(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&qq(e,t,n),n};function bP(i,e,t){return Math.min(t,Math.max(i,e))}const H6=class extends ct{constructor(){super(...arguments),this._min=-1,this._max=1,this.value=0,this.center=0,this.dragging=!1}get min(){return Math.min(this._min,this._max)}set min(e){const t=this._min;this._min=e,this.requestUpdate("min",t)}get max(){return Math.max(this._min,this._max)}set max(e){const t=this._max;this._max=e,this.requestUpdate("max",t)}updateForeground(){const{min:e,max:t,center:r,value:n,foreground:s}=this,o=bP(n,e,t);t<r?(s.style.setProperty("--foreground-width",`${Math.abs(o-t)/(t-e)*100}%`),s.style.setProperty("--foreground-left","auto"),s.style.setProperty("--foreground-right","0")):e>r?(s.style.setProperty("--foreground-width",`${Math.abs(o-e)/(t-e)*100}%`),s.style.setProperty("--foreground-left","0"),s.style.setProperty("--foreground-right","auto")):o>r?(s.style.setProperty("--foreground-width",`${Math.abs(o-r)/(t-e)*100}%`),s.style.setProperty("--foreground-left",`${Math.abs(e-r)/(t-e)*100}%`),s.style.setProperty("--foreground-right","auto")):(s.style.setProperty("--foreground-width",`${Math.abs(o-r)/(t-e)*100}%`),s.style.setProperty("--foreground-left","auto"),s.style.setProperty("--foreground-right",`${Math.abs(t-r)/(t-e)*100}%`))}resized(){this.updateForeground()}updated(){this.updateForeground()}setDragPosition(e){const{left:t,width:r}=this.getBoundingClientRect(),n=e.clientX-t,s=bP(n/r,0,1),o=this.min+(this.max-this.min)*s,a=new CustomEvent("barDrag",{bubbles:!0,composed:!0,detail:{value:o}});this.dispatchEvent(a)}firstUpdated(){this.setAttribute("draggable","false"),window.addEventListener("mousemove",e=>{this.dragging&&this.setDragPosition(e)}),window.addEventListener("mouseup",()=>{this.dragging=!1})}onMouseDown(e){this.dragging=!0,this.setDragPosition(e)}render(){return qe`
      <div part="foreground" draggble="false"></div>
      <div class="content" draggable="false">
        <slot></slot>
      </div>
      <div part="dragger" @mousedown="${this.onMouseDown}"></div>
    `}};H6.styles=Ct`
    :host {
      display: inline-block;
      position: relative;
      width: 300px;
      height: 20px;
      background: var(--frc-bar-background, #ddd);
      color: var(--frc-bar-color, black);
      font-size: 15px;
      line-height: 18px;
      text-align: center;
    }

    [part='dragger'] {
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    }

    [part='foreground'] {
      position: absolute;
      top: 0;
      height: 100%;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
      width: var(--foreground-width);
      left: var(--foreground-left);
      right: var(--foreground-right);
      pointer-events: none;
    }

    .content {
      position: relative;
    }
  `;let zc=H6;km([W({type:Number})],zc.prototype,"value",2);km([W({type:Number})],zc.prototype,"center",2);km([Ui()],zc.prototype,"dragging",2);km([W({type:Number})],zc.prototype,"min",1);km([W({type:Number})],zc.prototype,"max",1);km([ri("[part=foreground]")],zc.prototype,"foreground",2);customElements.get("frc-bar")||customElements.define("frc-bar",zc);var Yq={value:()=>{}};function G6(){for(var i=0,e=arguments.length,t={},r;i<e;++i){if(!(r=arguments[i]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new Pb(t)}function Pb(i){this._=i}function Kq(i,e){return i.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}Pb.prototype=G6.prototype={constructor:Pb,on:function(i,e){var t=this._,r=Kq(i+"",t),n,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((n=(i=r[s]).type)&&(n=Zq(t[n],i.name)))return n;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(i=r[s]).type)t[n]=xP(t[n],i.name,e);else if(e==null)for(n in t)t[n]=xP(t[n],i.name,null);return this},copy:function(){var i={},e=this._;for(var t in e)i[t]=e[t].slice();return new Pb(i)},call:function(i,e){if((n=arguments.length-2)>0)for(var t=new Array(n),r=0,n,s;r<n;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(s=this._[i],r=0,n=s.length;r<n;++r)s[r].value.apply(e,t)},apply:function(i,e,t){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var r=this._[i],n=0,s=r.length;n<s;++n)r[n].value.apply(e,t)}};function Zq(i,e){for(var t=0,r=i.length,n;t<r;++t)if((n=i[t]).name===e)return n.value}function xP(i,e,t){for(var r=0,n=i.length;r<n;++r)if(i[r].name===e){i[r]=Yq,i=i.slice(0,r).concat(i.slice(r+1));break}return t!=null&&i.push({name:e,value:t}),i}var FA="http://www.w3.org/1999/xhtml";const wP={svg:"http://www.w3.org/2000/svg",xhtml:FA,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _M(i){var e=i+="",t=e.indexOf(":");return t>=0&&(e=i.slice(0,t))!=="xmlns"&&(i=i.slice(t+1)),wP.hasOwnProperty(e)?{space:wP[e],local:i}:i}function Jq(i){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===FA&&e.documentElement.namespaceURI===FA?e.createElement(i):e.createElementNS(t,i)}}function Qq(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function W6(i){var e=_M(i);return(e.local?Qq:Jq)(e)}function eX(){}function zC(i){return i==null?eX:function(){return this.querySelector(i)}}function tX(i){typeof i!="function"&&(i=zC(i));for(var e=this._groups,t=e.length,r=new Array(t),n=0;n<t;++n)for(var s=e[n],o=s.length,a=r[n]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=i.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Yn(r,this._parents)}function iX(i){return i==null?[]:Array.isArray(i)?i:Array.from(i)}function rX(){return[]}function q6(i){return i==null?rX:function(){return this.querySelectorAll(i)}}function nX(i){return function(){return iX(i.apply(this,arguments))}}function sX(i){typeof i=="function"?i=nX(i):i=q6(i);for(var e=this._groups,t=e.length,r=[],n=[],s=0;s<t;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(i.call(l,l.__data__,c,o)),n.push(l));return new Yn(r,n)}function X6(i){return function(){return this.matches(i)}}function Y6(i){return function(e){return e.matches(i)}}var oX=Array.prototype.find;function aX(i){return function(){return oX.call(this.children,i)}}function lX(){return this.firstElementChild}function cX(i){return this.select(i==null?lX:aX(typeof i=="function"?i:Y6(i)))}var uX=Array.prototype.filter;function hX(){return Array.from(this.children)}function dX(i){return function(){return uX.call(this.children,i)}}function pX(i){return this.selectAll(i==null?hX:dX(typeof i=="function"?i:Y6(i)))}function fX(i){typeof i!="function"&&(i=X6(i));for(var e=this._groups,t=e.length,r=new Array(t),n=0;n<t;++n)for(var s=e[n],o=s.length,a=r[n]=[],l,c=0;c<o;++c)(l=s[c])&&i.call(l,l.__data__,c,s)&&a.push(l);return new Yn(r,this._parents)}function K6(i){return new Array(i.length)}function mX(){return new Yn(this._enter||this._groups.map(K6),this._parents)}function aw(i,e){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=e}aw.prototype={constructor:aw,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,e){return this._parent.insertBefore(i,e)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function gX(i){return function(){return i}}function _X(i,e,t,r,n,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):t[o]=new aw(i,s[o]);for(;o<l;++o)(a=e[o])&&(n[o]=a)}function yX(i,e,t,r,n,s,o){var a,l,c=new Map,u=e.length,h=s.length,d=new Array(u),f;for(a=0;a<u;++a)(l=e[a])&&(d[a]=f=o.call(l,l.__data__,a,e)+"",c.has(f)?n[a]=l:c.set(f,l));for(a=0;a<h;++a)f=o.call(i,s[a],a,s)+"",(l=c.get(f))?(r[a]=l,l.__data__=s[a],c.delete(f)):t[a]=new aw(i,s[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(d[a])===l&&(n[a]=l)}function vX(i){return i.__data__}function bX(i,e){if(!arguments.length)return Array.from(this,vX);var t=e?yX:_X,r=this._parents,n=this._groups;typeof i!="function"&&(i=gX(i));for(var s=n.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],h=n[c],d=h.length,f=xX(i.call(u,u&&u.__data__,c,r)),g=f.length,v=a[c]=new Array(g),m=o[c]=new Array(g),p=l[c]=new Array(d);t(u,h,v,m,p,f,e);for(var y=0,_=0,x,w;y<g;++y)if(x=v[y]){for(y>=_&&(_=y+1);!(w=m[_])&&++_<g;);x._next=w||null}}return o=new Yn(o,r),o._enter=a,o._exit=l,o}function xX(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function wX(){return new Yn(this._exit||this._groups.map(K6),this._parents)}function MX(i,e,t){var r=this.enter(),n=this,s=this.exit();return typeof i=="function"?(r=i(r),r&&(r=r.selection())):r=r.append(i+""),e!=null&&(n=e(n),n&&(n=n.selection())),t==null?s.remove():t(s),r&&n?r.merge(n).order():n}function SX(i){for(var e=i.selection?i.selection():i,t=this._groups,r=e._groups,n=t.length,s=r.length,o=Math.min(n,s),a=new Array(n),l=0;l<o;++l)for(var c=t[l],u=r[l],h=c.length,d=a[l]=new Array(h),f,g=0;g<h;++g)(f=c[g]||u[g])&&(d[g]=f);for(;l<n;++l)a[l]=t[l];return new Yn(a,this._parents)}function TX(){for(var i=this._groups,e=-1,t=i.length;++e<t;)for(var r=i[e],n=r.length-1,s=r[n],o;--n>=0;)(o=r[n])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function EX(i){i||(i=AX);function e(h,d){return h&&d?i(h.__data__,d.__data__):!h-!d}for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s){for(var o=t[s],a=o.length,l=n[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new Yn(n,this._parents).order()}function AX(i,e){return i<e?-1:i>e?1:i>=e?0:NaN}function kX(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this}function CX(){return Array.from(this)}function $X(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var r=i[e],n=0,s=r.length;n<s;++n){var o=r[n];if(o)return o}return null}function LX(){let i=0;for(const e of this)++i;return i}function RX(){return!this.node()}function PX(i){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],s=0,o=n.length,a;s<o;++s)(a=n[s])&&i.call(a,a.__data__,s,n);return this}function NX(i){return function(){this.removeAttribute(i)}}function IX(i){return function(){this.removeAttributeNS(i.space,i.local)}}function DX(i,e){return function(){this.setAttribute(i,e)}}function OX(i,e){return function(){this.setAttributeNS(i.space,i.local,e)}}function UX(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(i):this.setAttribute(i,t)}}function zX(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,t)}}function FX(i,e){var t=_M(i);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?IX:NX:typeof e=="function"?t.local?zX:UX:t.local?OX:DX)(t,e))}function Z6(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function BX(i){return function(){this.style.removeProperty(i)}}function VX(i,e,t){return function(){this.style.setProperty(i,e,t)}}function jX(i,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(i):this.style.setProperty(i,r,t)}}function HX(i,e,t){return arguments.length>1?this.each((e==null?BX:typeof e=="function"?jX:VX)(i,e,t??"")):Yf(this.node(),i)}function Yf(i,e){return i.style.getPropertyValue(e)||Z6(i).getComputedStyle(i,null).getPropertyValue(e)}function GX(i){return function(){delete this[i]}}function WX(i,e){return function(){this[i]=e}}function qX(i,e){return function(){var t=e.apply(this,arguments);t==null?delete this[i]:this[i]=t}}function XX(i,e){return arguments.length>1?this.each((e==null?GX:typeof e=="function"?qX:WX)(i,e)):this.node()[i]}function J6(i){return i.trim().split(/^|\s+/)}function FC(i){return i.classList||new Q6(i)}function Q6(i){this._node=i,this._names=J6(i.getAttribute("class")||"")}Q6.prototype={add:function(i){var e=this._names.indexOf(i);e<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var e=this._names.indexOf(i);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function eF(i,e){for(var t=FC(i),r=-1,n=e.length;++r<n;)t.add(e[r])}function tF(i,e){for(var t=FC(i),r=-1,n=e.length;++r<n;)t.remove(e[r])}function YX(i){return function(){eF(this,i)}}function KX(i){return function(){tF(this,i)}}function ZX(i,e){return function(){(e.apply(this,arguments)?eF:tF)(this,i)}}function JX(i,e){var t=J6(i+"");if(arguments.length<2){for(var r=FC(this.node()),n=-1,s=t.length;++n<s;)if(!r.contains(t[n]))return!1;return!0}return this.each((typeof e=="function"?ZX:e?YX:KX)(t,e))}function QX(){this.textContent=""}function eY(i){return function(){this.textContent=i}}function tY(i){return function(){var e=i.apply(this,arguments);this.textContent=e??""}}function iY(i){return arguments.length?this.each(i==null?QX:(typeof i=="function"?tY:eY)(i)):this.node().textContent}function rY(){this.innerHTML=""}function nY(i){return function(){this.innerHTML=i}}function sY(i){return function(){var e=i.apply(this,arguments);this.innerHTML=e??""}}function oY(i){return arguments.length?this.each(i==null?rY:(typeof i=="function"?sY:nY)(i)):this.node().innerHTML}function aY(){this.nextSibling&&this.parentNode.appendChild(this)}function lY(){return this.each(aY)}function cY(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function uY(){return this.each(cY)}function hY(i){var e=typeof i=="function"?i:W6(i);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function dY(){return null}function pY(i,e){var t=typeof i=="function"?i:W6(i),r=e==null?dY:typeof e=="function"?e:zC(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function fY(){var i=this.parentNode;i&&i.removeChild(this)}function mY(){return this.each(fY)}function gY(){var i=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function _Y(){var i=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function yY(i){return this.select(i?_Y:gY)}function vY(i){return arguments.length?this.property("__data__",i):this.node().__data__}function bY(i){return function(e){i.call(this,e,this.__data__)}}function xY(i){return i.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function wY(i){return function(){var e=this.__on;if(e){for(var t=0,r=-1,n=e.length,s;t<n;++t)s=e[t],(!i.type||s.type===i.type)&&s.name===i.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function MY(i,e,t){return function(){var r=this.__on,n,s=bY(e);if(r){for(var o=0,a=r.length;o<a;++o)if((n=r[o]).type===i.type&&n.name===i.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=s,n.options=t),n.value=e;return}}this.addEventListener(i.type,s,t),n={type:i.type,name:i.name,value:e,listener:s,options:t},r?r.push(n):this.__on=[n]}}function SY(i,e,t){var r=xY(i+""),n,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(n=0,u=a[l];n<s;++n)if((o=r[n]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?MY:wY,n=0;n<s;++n)this.each(a(r[n],e,t));return this}function iF(i,e,t){var r=Z6(i),n=r.CustomEvent;typeof n=="function"?n=new n(e,t):(n=r.document.createEvent("Event"),t?(n.initEvent(e,t.bubbles,t.cancelable),n.detail=t.detail):n.initEvent(e,!1,!1)),i.dispatchEvent(n)}function TY(i,e){return function(){return iF(this,i,e)}}function EY(i,e){return function(){return iF(this,i,e.apply(this,arguments))}}function AY(i,e){return this.each((typeof e=="function"?EY:TY)(i,e))}function*kY(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var r=i[e],n=0,s=r.length,o;n<s;++n)(o=r[n])&&(yield o)}var rF=[null];function Yn(i,e){this._groups=i,this._parents=e}function Sy(){return new Yn([[document.documentElement]],rF)}function CY(){return this}Yn.prototype=Sy.prototype={constructor:Yn,select:tX,selectAll:sX,selectChild:cX,selectChildren:pX,filter:fX,data:bX,enter:mX,exit:wX,join:MX,merge:SX,selection:CY,order:TX,sort:EX,call:kX,nodes:CX,node:$X,size:LX,empty:RX,each:PX,attr:FX,style:HX,property:XX,classed:JX,text:iY,html:oY,raise:lY,lower:uY,append:hY,insert:pY,remove:mY,clone:yY,datum:vY,on:SY,dispatch:AY,[Symbol.iterator]:kY};function Vr(i){return typeof i=="string"?new Yn([[document.querySelector(i)]],[document.documentElement]):new Yn([[i]],rF)}function BC(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function nF(i,e){var t=Object.create(i.prototype);for(var r in e)t[r]=e[r];return t}function Ty(){}var J_=.7,lw=1/J_,xf="\\s*([+-]?\\d+)\\s*",Q_="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Go="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$Y=/^#([0-9a-f]{3,8})$/,LY=new RegExp(`^rgb\\(${xf},${xf},${xf}\\)$`),RY=new RegExp(`^rgb\\(${Go},${Go},${Go}\\)$`),PY=new RegExp(`^rgba\\(${xf},${xf},${xf},${Q_}\\)$`),NY=new RegExp(`^rgba\\(${Go},${Go},${Go},${Q_}\\)$`),IY=new RegExp(`^hsl\\(${Q_},${Go},${Go}\\)$`),DY=new RegExp(`^hsla\\(${Q_},${Go},${Go},${Q_}\\)$`),MP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};BC(Ty,Ch,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:SP,formatHex:SP,formatHex8:OY,formatHsl:UY,formatRgb:TP,toString:TP});function SP(){return this.rgb().formatHex()}function OY(){return this.rgb().formatHex8()}function UY(){return sF(this).formatHsl()}function TP(){return this.rgb().formatRgb()}function Ch(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=$Y.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?EP(e):t===3?new mn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Uv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Uv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=LY.exec(i))?new mn(e[1],e[2],e[3],1):(e=RY.exec(i))?new mn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=PY.exec(i))?Uv(e[1],e[2],e[3],e[4]):(e=NY.exec(i))?Uv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=IY.exec(i))?CP(e[1],e[2]/100,e[3]/100,1):(e=DY.exec(i))?CP(e[1],e[2]/100,e[3]/100,e[4]):MP.hasOwnProperty(i)?EP(MP[i]):i==="transparent"?new mn(NaN,NaN,NaN,0):null}function EP(i){return new mn(i>>16&255,i>>8&255,i&255,1)}function Uv(i,e,t,r){return r<=0&&(i=e=t=NaN),new mn(i,e,t,r)}function zY(i){return i instanceof Ty||(i=Ch(i)),i?(i=i.rgb(),new mn(i.r,i.g,i.b,i.opacity)):new mn}function BA(i,e,t,r){return arguments.length===1?zY(i):new mn(i,e,t,r??1)}function mn(i,e,t,r){this.r=+i,this.g=+e,this.b=+t,this.opacity=+r}BC(mn,BA,nF(Ty,{brighter(i){return i=i==null?lw:Math.pow(lw,i),new mn(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?J_:Math.pow(J_,i),new mn(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new mn(gh(this.r),gh(this.g),gh(this.b),cw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:AP,formatHex:AP,formatHex8:FY,formatRgb:kP,toString:kP}));function AP(){return`#${Ju(this.r)}${Ju(this.g)}${Ju(this.b)}`}function FY(){return`#${Ju(this.r)}${Ju(this.g)}${Ju(this.b)}${Ju((isNaN(this.opacity)?1:this.opacity)*255)}`}function kP(){const i=cw(this.opacity);return`${i===1?"rgb(":"rgba("}${gh(this.r)}, ${gh(this.g)}, ${gh(this.b)}${i===1?")":`, ${i})`}`}function cw(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function gh(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function Ju(i){return i=gh(i),(i<16?"0":"")+i.toString(16)}function CP(i,e,t,r){return r<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new po(i,e,t,r)}function sF(i){if(i instanceof po)return new po(i.h,i.s,i.l,i.opacity);if(i instanceof Ty||(i=Ch(i)),!i)return new po;if(i instanceof po)return i;i=i.rgb();var e=i.r/255,t=i.g/255,r=i.b/255,n=Math.min(e,t,r),s=Math.max(e,t,r),o=NaN,a=s-n,l=(s+n)/2;return a?(e===s?o=(t-r)/a+(t<r)*6:t===s?o=(r-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+n:2-s-n,o*=60):a=l>0&&l<1?0:o,new po(o,a,l,i.opacity)}function BY(i,e,t,r){return arguments.length===1?sF(i):new po(i,e,t,r??1)}function po(i,e,t,r){this.h=+i,this.s=+e,this.l=+t,this.opacity=+r}BC(po,BY,nF(Ty,{brighter(i){return i=i==null?lw:Math.pow(lw,i),new po(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?J_:Math.pow(J_,i),new po(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,n=2*t-r;return new mn(h2(i>=240?i-240:i+120,n,r),h2(i,n,r),h2(i<120?i+240:i-120,n,r),this.opacity)},clamp(){return new po($P(this.h),zv(this.s),zv(this.l),cw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=cw(this.opacity);return`${i===1?"hsl(":"hsla("}${$P(this.h)}, ${zv(this.s)*100}%, ${zv(this.l)*100}%${i===1?")":`, ${i})`}`}}));function $P(i){return i=(i||0)%360,i<0?i+360:i}function zv(i){return Math.max(0,Math.min(1,i||0))}function h2(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}const VC=i=>()=>i;function VY(i,e){return function(t){return i+t*e}}function jY(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(r){return Math.pow(i+r*e,t)}}function HY(i){return(i=+i)==1?oF:function(e,t){return t-e?jY(e,t,i):VC(isNaN(e)?t:e)}}function oF(i,e){var t=e-i;return t?VY(i,t):VC(isNaN(i)?e:i)}const uw=function i(e){var t=HY(e);function r(n,s){var o=t((n=BA(n)).r,(s=BA(s)).r),a=t(n.g,s.g),l=t(n.b,s.b),c=oF(n.opacity,s.opacity);return function(u){return n.r=o(u),n.g=a(u),n.b=l(u),n.opacity=c(u),n+""}}return r.gamma=i,r}(1);function co(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}var VA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,d2=new RegExp(VA.source,"g");function GY(i){return function(){return i}}function WY(i){return function(e){return i(e)+""}}function aF(i,e){var t=VA.lastIndex=d2.lastIndex=0,r,n,s,o=-1,a=[],l=[];for(i=i+"",e=e+"";(r=VA.exec(i))&&(n=d2.exec(e));)(s=n.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(n=n[0])?a[o]?a[o]+=n:a[++o]=n:(a[++o]=null,l.push({i:o,x:co(r,n)})),t=d2.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?WY(l[0].x):GY(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}var LP=180/Math.PI,lF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cF(i,e,t,r,n,s){var o,a,l;return(o=Math.sqrt(i*i+e*e))&&(i/=o,e/=o),(l=i*t+e*r)&&(t-=i*l,r-=e*l),(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a,l/=a),i*r<e*t&&(i=-i,e=-e,l=-l,o=-o),{translateX:n,translateY:s,rotate:Math.atan2(e,i)*LP,skewX:Math.atan(l)*LP,scaleX:o,scaleY:a}}var Fv;function qY(i){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(i+"");return e.isIdentity?lF:cF(e.a,e.b,e.c,e.d,e.e,e.f)}function XY(i){return i==null||(Fv||(Fv=document.createElementNS("http://www.w3.org/2000/svg","g")),Fv.setAttribute("transform",i),!(i=Fv.transform.baseVal.consolidate()))?lF:(i=i.matrix,cF(i.a,i.b,i.c,i.d,i.e,i.f))}function uF(i,e,t,r){function n(c){return c.length?c.pop()+" ":""}function s(c,u,h,d,f,g){if(c!==h||u!==d){var v=f.push("translate(",null,e,null,t);g.push({i:v-4,x:co(c,h)},{i:v-2,x:co(u,d)})}else(h||d)&&f.push("translate("+h+e+d+t)}function o(c,u,h,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:h.push(n(h)+"rotate(",null,r)-2,x:co(c,u)})):u&&h.push(n(h)+"rotate("+u+r)}function a(c,u,h,d){c!==u?d.push({i:h.push(n(h)+"skewX(",null,r)-2,x:co(c,u)}):u&&h.push(n(h)+"skewX("+u+r)}function l(c,u,h,d,f,g){if(c!==h||u!==d){var v=f.push(n(f)+"scale(",null,",",null,")");g.push({i:v-4,x:co(c,h)},{i:v-2,x:co(u,d)})}else(h!==1||d!==1)&&f.push(n(f)+"scale("+h+","+d+")")}return function(c,u){var h=[],d=[];return c=i(c),u=i(u),s(c.translateX,c.translateY,u.translateX,u.translateY,h,d),o(c.rotate,u.rotate,h,d),a(c.skewX,u.skewX,h,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,d),c=u=null,function(f){for(var g=-1,v=d.length,m;++g<v;)h[(m=d[g]).i]=m.x(f);return h.join("")}}}var YY=uF(qY,"px, ","px)","deg)"),KY=uF(XY,", ",")",")"),Kf=0,a0=0,Sg=0,hF=1e3,hw,l0,dw=0,$h=0,yM=0,ey=typeof performance=="object"&&performance.now?performance:Date,dF=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function jC(){return $h||(dF(ZY),$h=ey.now()+yM)}function ZY(){$h=0}function pw(){this._call=this._time=this._next=null}pw.prototype=pF.prototype={constructor:pw,restart:function(i,e,t){if(typeof i!="function")throw new TypeError("callback is not a function");t=(t==null?jC():+t)+(e==null?0:+e),!this._next&&l0!==this&&(l0?l0._next=this:hw=this,l0=this),this._call=i,this._time=t,jA()},stop:function(){this._call&&(this._call=null,this._time=1/0,jA())}};function pF(i,e,t){var r=new pw;return r.restart(i,e,t),r}function JY(){jC(),++Kf;for(var i=hw,e;i;)(e=$h-i._time)>=0&&i._call.call(void 0,e),i=i._next;--Kf}function RP(){$h=(dw=ey.now())+yM,Kf=a0=0;try{JY()}finally{Kf=0,eK(),$h=0}}function QY(){var i=ey.now(),e=i-dw;e>hF&&(yM-=e,dw=i)}function eK(){for(var i,e=hw,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),i=e,e=e._next):(t=e._next,e._next=null,e=i?i._next=t:hw=t);l0=i,jA(r)}function jA(i){if(!Kf){a0&&(a0=clearTimeout(a0));var e=i-$h;e>24?(i<1/0&&(a0=setTimeout(RP,i-ey.now()-yM)),Sg&&(Sg=clearInterval(Sg))):(Sg||(dw=ey.now(),Sg=setInterval(QY,hF)),Kf=1,dF(RP))}}function PP(i,e,t){var r=new pw;return e=e==null?0:+e,r.restart(n=>{r.stop(),i(n+e)},e,t),r}var tK=G6("start","end","cancel","interrupt"),iK=[],fF=0,NP=1,HA=2,Nb=3,IP=4,GA=5,Ib=6;function vM(i,e,t,r,n,s){var o=i.__transition;if(!o)i.__transition={};else if(t in o)return;rK(i,t,{name:e,index:r,group:n,on:tK,tween:iK,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:fF})}function HC(i,e){var t=Mo(i,e);if(t.state>fF)throw new Error("too late; already scheduled");return t}function Yo(i,e){var t=Mo(i,e);if(t.state>Nb)throw new Error("too late; already running");return t}function Mo(i,e){var t=i.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function rK(i,e,t){var r=i.__transition,n;r[e]=t,t.timer=pF(s,0,t.time);function s(c){t.state=NP,t.timer.restart(o,t.delay,t.time),t.delay<=c&&o(c-t.delay)}function o(c){var u,h,d,f;if(t.state!==NP)return l();for(u in r)if(f=r[u],f.name===t.name){if(f.state===Nb)return PP(o);f.state===IP?(f.state=Ib,f.timer.stop(),f.on.call("interrupt",i,i.__data__,f.index,f.group),delete r[u]):+u<e&&(f.state=Ib,f.timer.stop(),f.on.call("cancel",i,i.__data__,f.index,f.group),delete r[u])}if(PP(function(){t.state===Nb&&(t.state=IP,t.timer.restart(a,t.delay,t.time),a(c))}),t.state=HA,t.on.call("start",i,i.__data__,t.index,t.group),t.state===HA){for(t.state=Nb,n=new Array(d=t.tween.length),u=0,h=-1;u<d;++u)(f=t.tween[u].value.call(i,i.__data__,t.index,t.group))&&(n[++h]=f);n.length=h+1}}function a(c){for(var u=c<t.duration?t.ease.call(null,c/t.duration):(t.timer.restart(l),t.state=GA,1),h=-1,d=n.length;++h<d;)n[h].call(i,u);t.state===GA&&(t.on.call("end",i,i.__data__,t.index,t.group),l())}function l(){t.state=Ib,t.timer.stop(),delete r[e];for(var c in r)return;delete i.__transition}}function nK(i,e){var t=i.__transition,r,n,s=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((r=t[o]).name!==e){s=!1;continue}n=r.state>HA&&r.state<GA,r.state=Ib,r.timer.stop(),r.on.call(n?"interrupt":"cancel",i,i.__data__,r.index,r.group),delete t[o]}s&&delete i.__transition}}function sK(i){return this.each(function(){nK(this,i)})}function oK(i,e){var t,r;return function(){var n=Yo(this,i),s=n.tween;if(s!==t){r=t=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}n.tween=r}}function aK(i,e,t){var r,n;if(typeof t!="function")throw new Error;return function(){var s=Yo(this,i),o=s.tween;if(o!==r){n=(r=o).slice();for(var a={name:e,value:t},l=0,c=n.length;l<c;++l)if(n[l].name===e){n[l]=a;break}l===c&&n.push(a)}s.tween=n}}function lK(i,e){var t=this._id;if(i+="",arguments.length<2){for(var r=Mo(this.node(),t).tween,n=0,s=r.length,o;n<s;++n)if((o=r[n]).name===i)return o.value;return null}return this.each((e==null?oK:aK)(t,i,e))}function GC(i,e,t){var r=i._id;return i.each(function(){var n=Yo(this,r);(n.value||(n.value={}))[e]=t.apply(this,arguments)}),function(n){return Mo(n,r).value[e]}}function mF(i,e){var t;return(typeof e=="number"?co:e instanceof Ch?uw:(t=Ch(e))?(e=t,uw):aF)(i,e)}function cK(i){return function(){this.removeAttribute(i)}}function uK(i){return function(){this.removeAttributeNS(i.space,i.local)}}function hK(i,e,t){var r,n=t+"",s;return function(){var o=this.getAttribute(i);return o===n?null:o===r?s:s=e(r=o,t)}}function dK(i,e,t){var r,n=t+"",s;return function(){var o=this.getAttributeNS(i.space,i.local);return o===n?null:o===r?s:s=e(r=o,t)}}function pK(i,e,t){var r,n,s;return function(){var o,a=t(this),l;return a==null?void this.removeAttribute(i):(o=this.getAttribute(i),l=a+"",o===l?null:o===r&&l===n?s:(n=l,s=e(r=o,a)))}}function fK(i,e,t){var r,n,s;return function(){var o,a=t(this),l;return a==null?void this.removeAttributeNS(i.space,i.local):(o=this.getAttributeNS(i.space,i.local),l=a+"",o===l?null:o===r&&l===n?s:(n=l,s=e(r=o,a)))}}function mK(i,e){var t=_M(i),r=t==="transform"?KY:mF;return this.attrTween(i,typeof e=="function"?(t.local?fK:pK)(t,r,GC(this,"attr."+i,e)):e==null?(t.local?uK:cK)(t):(t.local?dK:hK)(t,r,e))}function gK(i,e){return function(t){this.setAttribute(i,e.call(this,t))}}function _K(i,e){return function(t){this.setAttributeNS(i.space,i.local,e.call(this,t))}}function yK(i,e){var t,r;function n(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&_K(i,s)),t}return n._value=e,n}function vK(i,e){var t,r;function n(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&gK(i,s)),t}return n._value=e,n}function bK(i,e){var t="attr."+i;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=_M(i);return this.tween(t,(r.local?yK:vK)(r,e))}function xK(i,e){return function(){HC(this,i).delay=+e.apply(this,arguments)}}function wK(i,e){return e=+e,function(){HC(this,i).delay=e}}function MK(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?xK:wK)(e,i)):Mo(this.node(),e).delay}function SK(i,e){return function(){Yo(this,i).duration=+e.apply(this,arguments)}}function TK(i,e){return e=+e,function(){Yo(this,i).duration=e}}function EK(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?SK:TK)(e,i)):Mo(this.node(),e).duration}function AK(i,e){if(typeof e!="function")throw new Error;return function(){Yo(this,i).ease=e}}function kK(i){var e=this._id;return arguments.length?this.each(AK(e,i)):Mo(this.node(),e).ease}function CK(i,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Yo(this,i).ease=t}}function $K(i){if(typeof i!="function")throw new Error;return this.each(CK(this._id,i))}function LK(i){typeof i!="function"&&(i=X6(i));for(var e=this._groups,t=e.length,r=new Array(t),n=0;n<t;++n)for(var s=e[n],o=s.length,a=r[n]=[],l,c=0;c<o;++c)(l=s[c])&&i.call(l,l.__data__,c,s)&&a.push(l);return new cl(r,this._parents,this._name,this._id)}function RK(i){if(i._id!==this._id)throw new Error;for(var e=this._groups,t=i._groups,r=e.length,n=t.length,s=Math.min(r,n),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=t[a],u=l.length,h=o[a]=new Array(u),d,f=0;f<u;++f)(d=l[f]||c[f])&&(h[f]=d);for(;a<r;++a)o[a]=e[a];return new cl(o,this._parents,this._name,this._id)}function PK(i){return(i+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function NK(i,e,t){var r,n,s=PK(e)?HC:Yo;return function(){var o=s(this,i),a=o.on;a!==r&&(n=(r=a).copy()).on(e,t),o.on=n}}function IK(i,e){var t=this._id;return arguments.length<2?Mo(this.node(),t).on.on(i):this.each(NK(t,i,e))}function DK(i){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==i)return;e&&e.removeChild(this)}}function OK(){return this.on("end.remove",DK(this._id))}function UK(i){var e=this._name,t=this._id;typeof i!="function"&&(i=zC(i));for(var r=this._groups,n=r.length,s=new Array(n),o=0;o<n;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,h,d=0;d<l;++d)(u=a[d])&&(h=i.call(u,u.__data__,d,a))&&("__data__"in u&&(h.__data__=u.__data__),c[d]=h,vM(c[d],e,t,d,c,Mo(u,t)));return new cl(s,this._parents,e,t)}function zK(i){var e=this._name,t=this._id;typeof i!="function"&&(i=q6(i));for(var r=this._groups,n=r.length,s=[],o=[],a=0;a<n;++a)for(var l=r[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var d=i.call(u,u.__data__,h,l),f,g=Mo(u,t),v=0,m=d.length;v<m;++v)(f=d[v])&&vM(f,e,t,v,d,g);s.push(d),o.push(u)}return new cl(s,o,e,t)}var FK=Sy.prototype.constructor;function BK(){return new FK(this._groups,this._parents)}function VK(i,e){var t,r,n;return function(){var s=Yf(this,i),o=(this.style.removeProperty(i),Yf(this,i));return s===o?null:s===t&&o===r?n:n=e(t=s,r=o)}}function gF(i){return function(){this.style.removeProperty(i)}}function jK(i,e,t){var r,n=t+"",s;return function(){var o=Yf(this,i);return o===n?null:o===r?s:s=e(r=o,t)}}function HK(i,e,t){var r,n,s;return function(){var o=Yf(this,i),a=t(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(i),Yf(this,i))),o===l?null:o===r&&l===n?s:(n=l,s=e(r=o,a))}}function GK(i,e){var t,r,n,s="style."+e,o="end."+s,a;return function(){var l=Yo(this,i),c=l.on,u=l.value[s]==null?a||(a=gF(e)):void 0;(c!==t||n!==u)&&(r=(t=c).copy()).on(o,n=u),l.on=r}}function WK(i,e,t){var r=(i+="")=="transform"?YY:mF;return e==null?this.styleTween(i,VK(i,r)).on("end.style."+i,gF(i)):typeof e=="function"?this.styleTween(i,HK(i,r,GC(this,"style."+i,e))).each(GK(this._id,i)):this.styleTween(i,jK(i,r,e),t).on("end.style."+i,null)}function qK(i,e,t){return function(r){this.style.setProperty(i,e.call(this,r),t)}}function XK(i,e,t){var r,n;function s(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&qK(i,o,t)),r}return s._value=e,s}function YK(i,e,t){var r="style."+(i+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,XK(i,e,t??""))}function KK(i){return function(){this.textContent=i}}function ZK(i){return function(){var e=i(this);this.textContent=e??""}}function JK(i){return this.tween("text",typeof i=="function"?ZK(GC(this,"text",i)):KK(i==null?"":i+""))}function QK(i){return function(e){this.textContent=i.call(this,e)}}function eZ(i){var e,t;function r(){var n=i.apply(this,arguments);return n!==t&&(e=(t=n)&&QK(n)),e}return r._value=i,r}function tZ(i){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(i==null)return this.tween(e,null);if(typeof i!="function")throw new Error;return this.tween(e,eZ(i))}function iZ(){for(var i=this._name,e=this._id,t=_F(),r=this._groups,n=r.length,s=0;s<n;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Mo(l,e);vM(l,i,t,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new cl(r,this._parents,i,t)}function rZ(){var i,e,t=this,r=t._id,n=t.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--n===0&&s()}};t.each(function(){var c=Yo(this,r),u=c.on;u!==i&&(e=(i=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),n===0&&s()})}var nZ=0;function cl(i,e,t,r){this._groups=i,this._parents=e,this._name=t,this._id=r}function _F(){return++nZ}var va=Sy.prototype;cl.prototype={constructor:cl,select:UK,selectAll:zK,selectChild:va.selectChild,selectChildren:va.selectChildren,filter:LK,merge:RK,selection:BK,transition:iZ,call:va.call,nodes:va.nodes,node:va.node,size:va.size,empty:va.empty,each:va.each,on:IK,attr:mK,attrTween:bK,style:WK,styleTween:YK,text:JK,textTween:tZ,remove:OK,tween:lK,delay:MK,duration:EK,ease:kK,easeVarying:$K,end:rZ,[Symbol.iterator]:va[Symbol.iterator]};function sZ(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var oZ={time:null,delay:0,duration:250,ease:sZ};function aZ(i,e){for(var t;!(t=i.__transition)||!(t=t[e]);)if(!(i=i.parentNode))throw new Error(`transition ${e} not found`);return t}function lZ(i){var e,t;i instanceof cl?(e=i._id,i=i._name):(e=_F(),(t=oZ).time=jC(),i=i==null?null:i+"");for(var r=this._groups,n=r.length,s=0;s<n;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&vM(l,i,e,c,o,t||aZ(l,e));return new cl(r,this._parents,i,e)}Sy.prototype.interrupt=sK;Sy.prototype.transition=lZ;function c0(i,e,t){this.k=i,this.x=e,this.y=t}c0.prototype={constructor:c0,scale:function(i){return i===1?this:new c0(this.k*i,this.x,this.y)},translate:function(i,e){return i===0&e===0?this:new c0(this.k,this.x+this.k*i,this.y+this.k*e)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};c0.prototype;var cZ=Object.defineProperty,Ko=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&cZ(e,t,n),n};const yF=class extends ct{constructor(){super(...arguments),this.vertical=!1,this.ticks=5,this.min=-1,this.max=1,this.unit="",this.prevSize=0,this.prevTicks=0,this.prevMin=null,this.prevMax=null}setAxis(e){var t;const r=this.vertical?this.clientHeight:this.clientWidth,n=r/Math.max(1,this.ticks-1),s=30,{min:o,max:a}=this;let l=-1/0,c=-1/0;if(this.prevSize===r&&this.prevTicks===this.ticks&&this.prevMin===o&&this.prevMax===a&&!e.has("unit")&&!e.has("vertical"))return;this.prevSize=r,this.prevTicks=this.ticks,this.prevMin=o,this.prevMax=a,this.svg.innerHTML="";const u=Vr(this.svg).attr("width",this.vertical?s:r).attr("height",this.vertical?r:s);for(let h=0;h<this.ticks;h+=1){if(this.vertical?u.append("line").attr("x1",0).attr("y1",h*n).attr("x2",8).attr("y2",h*n):u.append("line").attr("x1",h*n).attr("y1",0).attr("x2",h*n).attr("y2",8),this.vertical){const d=o+h*(a-o)/Math.max(this.ticks-1,1);u.append("text").attr("x",-3).attr("y",h*n+4).attr("text-anchor","end").text(d.toFixed(2)+(this.unit?` ${this.unit}`:""))}else{const d=(h-l)*n,f=l*n+d*.4;if(c<0||f>c){const g=o+h*(a-o)/Math.max(this.ticks-1,1),v=u.append("text").attr("x",h*n).attr("y",25).attr("text-anchor","middle").text(g.toFixed(2)+(this.unit?` ${this.unit}`:""));c=h*n+(((t=v.node())==null?void 0:t.getBBox().width)??0)/2,l=h}}if(h<this.ticks-1)for(let d=1;d<4;d+=1)this.vertical?u.append("line").attr("x1",4).attr("y1",h*n+d*n/4).attr("x2",8).attr("y2",h*n+d*n/4):u.append("line").attr("x1",h*n+d*n/4).attr("y1",0).attr("x2",h*n+d*n/4).attr("y2",4)}}firstUpdated(){new ResizeObserver(()=>{this.requestUpdate()}).observe(this)}updated(e){this.setAxis(e)}render(){return qe` <svg id="svg"></svg> `}};yF.styles=Ct`
    :host {
      display: inline-block;
      position: relative;
    }

    :host([vertical]) {
      height: 100%;
    }

    :host(:not([vertical])) {
      width: 100%;
    }

    svg {
      overflow: visible;
      position: absolute;
      top: 0;
      left: 0;
    }

    line {
      stroke: rgb(150, 150, 150);
      stroke-width: 2;
    }

    text {
      font-weight: normal;
      font-size: 13px;
      fill: var(--frc-axis-text-color, #000);
    }
  `;let Ns=yF;Ko([W({type:Boolean})],Ns.prototype,"vertical");Ko([W({type:Number})],Ns.prototype,"ticks");Ko([W({type:Number})],Ns.prototype,"min");Ko([W({type:Number})],Ns.prototype,"max");Ko([W({type:String})],Ns.prototype,"unit");Ko([Ui()],Ns.prototype,"prevSize");Ko([Ui()],Ns.prototype,"prevTicks");Ko([Ui()],Ns.prototype,"prevMin");Ko([Ui()],Ns.prototype,"prevMax");Ko([ri("#svg")],Ns.prototype,"svg");customElements.get("frc-axis")||customElements.define("frc-axis",Ns);var uZ=Object.defineProperty,Fc=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&uZ(e,t,n),n};function hZ(i,e,t){return Math.min(t,Math.max(i,e))}const vF=class extends ct{constructor(){super(...arguments),this.value=0,this.min=-1,this.max=1,this.center=0,this.precision=2,this.hideText=!1,this.numTickMarks=3,this.unit=""}render(){const e=Math.min(this.min,this.max),t=Math.max(this.min,this.max);return qe`
      <frc-bar
        value="${this.value}"
        min="${e}"
        max="${t}"
        center="${this.center}"
        part="bar"
      >
        ${this.hideText?"":qe`
              ${this.value.toFixed(hZ(this.precision,0,100))} ${this.unit}
            `}
      </frc-bar>
      ${this.numTickMarks>0?qe`
            <frc-axis
              part="axis"
              ticks="${this.numTickMarks}"
              min=${e}
              max=${t}
              unit="${this.unit}"
            ></frc-axis>
          `:""}
    `}};vF.styles=[Ct`
      :host {
        display: inline-block;
        width: 300px;
        height: auto;
        font-family: sans-serif;
      }

      [part='bar'] {
        width: 100%;
        margin: 0;
      }

      [part='bar'] {
        position: relative;
        height: 20px;
        border-radius: 3px;
      }

      [part='axis'] {
        width: calc(100% - 45px);
        margin: 2px auto 0;
        display: block;
      }
    `];let Is=vF;Fc([W({type:Number})],Is.prototype,"value");Fc([W({type:Number})],Is.prototype,"min");Fc([W({type:Number})],Is.prototype,"max");Fc([W({type:Number})],Is.prototype,"center");Fc([W({type:Number})],Is.prototype,"precision");Fc([W({type:Boolean,attribute:"hide-text"})],Is.prototype,"hideText");Fc([W({type:Number,attribute:"num-tick-marks"})],Is.prototype,"numTickMarks");Fc([W({type:String})],Is.prototype,"unit");customElements.get("frc-number-bar")||customElements.define("frc-number-bar",Is);var dZ=Object.defineProperty,Bc=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&dZ(e,t,n),n};let Zo=class extends Is{constructor(){super(...arguments),this.value=0,this.min=-1,this.max=1,this.center=0,this.precision=2,this.hideText=!1,this.numTickMarks=3,this.unit="g"}};Bc([W({type:Number})],Zo.prototype,"value");Bc([W({type:Number})],Zo.prototype,"min");Bc([W({type:Number})],Zo.prototype,"max");Bc([W({type:Number})],Zo.prototype,"center");Bc([W({type:Number})],Zo.prototype,"precision");Bc([W({type:Boolean,attribute:"hide-text"})],Zo.prototype,"hideText");Bc([W({type:Number,attribute:"num-tick-marks"})],Zo.prototype,"numTickMarks");Bc([W({type:String})],Zo.prototype,"unit");customElements.get("frc-accelerometer")||customElements.define("frc-accelerometer",Zo);var pZ=Object.defineProperty,Jo=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&pZ(e,t,n),n};const bF=class extends ct{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0,this.min=-1,this.max=1,this.center=0,this.precision=2,this.hideText=!1,this.numTickMarks=3,this.unit="g"}renderAccelerometer(e,t){return qe`
      <div part="accelerometer">
        <label part="label">${e}</label>
        <frc-accelerometer
          part="${e}"
          value="${this[e]||0}"
          min="${this.min}"
          max="${this.max}"
          center="${this.center}"
          precision="${this.precision}"
          ?hide-text="${this.hideText}"
          num-tick-marks="${t}"
          unit="${this.unit}"
        ></frc-accelerometer>
      </div>
    `}render(){return qe`
      ${this.renderAccelerometer("x",0)} ${this.renderAccelerometer("y",0)}
      ${this.renderAccelerometer("z",this.numTickMarks)}
    `}};bF.styles=Ct`
    :host {
      display: inline-flex;
      flex-direction: column;
      height: auto;
      font-family: sans-serif;
      width: 300px;
    }

    [part='accelerometer'] {
      width: 100%;
      display: flex;
      gap: 8px;
      align-items: center;
      margin-bottom: 10px;
    }

    [part='accelerometer']:last-child {
      margin-bottom: 0;
    }

    [part='accelerometer'] label {
      width: 10px;
      padding-top: 2px;
      font-weight: bold;
      text-transform: uppercase;
      color: var(--frc-3-axis-accelerometer-label-color, #000);
    }

    frc-accelerometer {
      width: 100%;
      flex: 1;
    }

    frc-accelerometer::part(bar) {
      width: 100%;
      margin: 0;
    }
  `;let Ds=bF;Jo([W({type:Number})],Ds.prototype,"x");Jo([W({type:Number})],Ds.prototype,"y");Jo([W({type:Number})],Ds.prototype,"z");Jo([W({type:Number})],Ds.prototype,"min");Jo([W({type:Number})],Ds.prototype,"max");Jo([W({type:Number})],Ds.prototype,"center");Jo([W({type:Number})],Ds.prototype,"precision");Jo([W({type:Boolean,attribute:"hide-text"})],Ds.prototype,"hideText");Jo([W({type:Number,attribute:"num-tick-marks"})],Ds.prototype,"numTickMarks");Jo([W({type:String})],Ds.prototype,"unit");customElements.get("frc-3-axis-accelerometer")||customElements.define("frc-3-axis-accelerometer",Ds);xt({tagName:"frc-3-axis-accelerometer",elementClass:Ds,react:yt});xt({tagName:"frc-accelerometer",elementClass:Zo,react:yt});xt({tagName:"frc-axis",elementClass:Ns,react:yt});xt({tagName:"frc-bar",elementClass:zc,react:yt});const WA={check:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z","check-circle":"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z",close:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z",edit:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"};var fZ=Object.defineProperty,bM=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&fZ(e,t,n),n};`${Object.keys(WA)[0]}`,Object.keys(WA)[0];const xF=class extends ct{constructor(){super(...arguments),this.color="#000000",this.icon="",this.svgPath="",this.viewBox="0 0 24 24"}render(){const e=this.icon==="Custom"||!this.icon;return qe`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="24px"
        viewBox=${e?this.viewBox:"0 0 24 24"}
        width="24px"
        fill=${this.color}
      >
        <path d=${e?this.svgPath:WA[this.icon]} />
      </svg>
    `}};xF.styles=Ct`
    :host {
      display: inline-block;
      width: 24px;
      height: 24px;
    }

    svg {
      width: 100%;
      height: 100%;
    }
  `;let Cm=xF;bM([W({type:String})],Cm.prototype,"color");bM([W({type:String})],Cm.prototype,"icon");bM([W({type:String,attribute:"svg-path"})],Cm.prototype,"svgPath");bM([W({type:String,attribute:"view-box"})],Cm.prototype,"viewBox");customElements.get("frc-icon")||customElements.define("frc-icon",Cm);var WC=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Ke=(i,e,t)=>(WC(i,e,"read from private field"),t?t.call(i):e.get(i)),Zt=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},dn=(i,e,t,r)=>(WC(i,e,"write to private field"),e.set(i,t),t),cr=(i,e,t)=>(WC(i,e,"access private method"),t),mZ=1/0,gZ="[object Symbol]",_Z=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,yZ=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xM="\\ud800-\\udfff",wF="\\u0300-\\u036f\\ufe20-\\ufe23",MF="\\u20d0-\\u20f0",SF="\\u2700-\\u27bf",TF="a-z\\xdf-\\xf6\\xf8-\\xff",vZ="\\xac\\xb1\\xd7\\xf7",bZ="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xZ="\\u2000-\\u206f",wZ=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",EF="A-Z\\xc0-\\xd6\\xd8-\\xde",AF="\\ufe0e\\ufe0f",kF=vZ+bZ+xZ+wZ,qC="['’]",MZ="["+xM+"]",DP="["+kF+"]",fw="["+wF+MF+"]",CF="\\d+",SZ="["+SF+"]",$F="["+TF+"]",LF="[^"+xM+kF+CF+SF+TF+EF+"]",qA="\\ud83c[\\udffb-\\udfff]",TZ="(?:"+fw+"|"+qA+")",RF="[^"+xM+"]",XC="(?:\\ud83c[\\udde6-\\uddff]){2}",YC="[\\ud800-\\udbff][\\udc00-\\udfff]",Mp="["+EF+"]",PF="\\u200d",OP="(?:"+$F+"|"+LF+")",EZ="(?:"+Mp+"|"+LF+")",UP="(?:"+qC+"(?:d|ll|m|re|s|t|ve))?",zP="(?:"+qC+"(?:D|LL|M|RE|S|T|VE))?",NF=TZ+"?",IF="["+AF+"]?",AZ="(?:"+PF+"(?:"+[RF,XC,YC].join("|")+")"+IF+NF+")*",DF=IF+NF+AZ,kZ="(?:"+[SZ,XC,YC].join("|")+")"+DF,CZ="(?:"+[RF+fw+"?",fw,XC,YC,MZ].join("|")+")",$Z=RegExp(qC,"g"),LZ=RegExp(fw,"g"),RZ=RegExp(qA+"(?="+qA+")|"+CZ+DF,"g"),PZ=RegExp([Mp+"?"+$F+"+"+UP+"(?="+[DP,Mp,"$"].join("|")+")",EZ+"+"+zP+"(?="+[DP,Mp+OP,"$"].join("|")+")",Mp+"?"+OP+"+"+UP,Mp+"+"+zP,CF,kZ].join("|"),"g"),NZ=RegExp("["+PF+xM+wF+MF+AF+"]"),IZ=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,DZ={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},OZ=typeof global=="object"&&global&&global.Object===Object&&global,UZ=typeof self=="object"&&self&&self.Object===Object&&self,zZ=OZ||UZ||Function("return this")();function FZ(i,e,t,r){var n=-1,s=i?i.length:0;for(r;++n<s;)t=e(t,i[n],n,i);return t}function BZ(i){return i.split("")}function VZ(i){return i.match(_Z)||[]}function jZ(i){return function(e){return i==null?void 0:i[e]}}var HZ=jZ(DZ);function OF(i){return NZ.test(i)}function GZ(i){return IZ.test(i)}function WZ(i){return OF(i)?qZ(i):BZ(i)}function qZ(i){return i.match(RZ)||[]}function XZ(i){return i.match(PZ)||[]}var YZ=Object.prototype,KZ=YZ.toString,FP=zZ.Symbol,BP=FP?FP.prototype:void 0,VP=BP?BP.toString:void 0;function ZZ(i,e,t){var r=-1,n=i.length;e<0&&(e=-e>n?0:n+e),t=t>n?n:t,t<0&&(t+=n),n=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(n);++r<n;)s[r]=i[r+e];return s}function JZ(i){if(typeof i=="string")return i;if(rJ(i))return VP?VP.call(i):"";var e=i+"";return e=="0"&&1/i==-mZ?"-0":e}function QZ(i,e,t){var r=i.length;return t=t===void 0?r:t,!e&&t>=r?i:ZZ(i,e,t)}function eJ(i){return function(e){e=wM(e);var t=OF(e)?WZ(e):void 0,r=t?t[0]:e.charAt(0),n=t?QZ(t,1).join(""):e.slice(1);return r[i]()+n}}function tJ(i){return function(e){return FZ(lJ(oJ(e).replace($Z,"")),i,"")}}function iJ(i){return!!i&&typeof i=="object"}function rJ(i){return typeof i=="symbol"||iJ(i)&&KZ.call(i)==gZ}function wM(i){return i==null?"":JZ(i)}var nJ=tJ(function(i,e,t){return e=e.toLowerCase(),i+(t?sJ(e):e)});function sJ(i){return aJ(wM(i).toLowerCase())}function oJ(i){return i=wM(i),i&&i.replace(yZ,HZ).replace(LZ,"")}var aJ=eJ("toUpperCase");function lJ(i,e,t){return i=wM(i),e=e,e===void 0?GZ(i)?XZ(i):VZ(i):i.match(e)||[]}var u0,Iu,Db,Du,h0,Sp,Ob;let cJ=class{constructor(e,t,r,n){Zt(this,u0,void 0),Zt(this,Iu,{}),Zt(this,Db,void 0),Zt(this,Du,void 0),Zt(this,h0,!1),Zt(this,Sp,void 0),Zt(this,Ob,void 0),dn(this,Ob,e),dn(this,Sp,t),dn(this,u0,r),dn(this,Db,n)}getKey(){return Ke(this,u0)}hasValue(){return Ke(this,h0)}getValue(){return Ke(this,Du)}setValue(e){dn(this,Du,e),dn(this,h0,!0)}removeValue(){dn(this,Du,void 0),dn(this,h0,!1)}getSourceValue(){return this.hasChildren()?Ke(this,Sp):Ke(this,Du)}setSourceValue(e){Ke(this,Ob).userUpdate(Ke(this,u0),e)}getChildren(){return Ke(this,Iu)}hasChildren(){return Object.getOwnPropertyNames(Ke(this,Iu)).length>0}addChild(e,t){const r=e.split("/").at(-1);typeof r>"u"||(Ke(this,Iu)[r]=t,!(typeof r>"u")&&Object.defineProperty(Ke(this,Sp),r,{configurable:!0,enumerable:!0,set(n){t.setSourceValue(n)},get(){return t.getSourceValue()}}))}removeChild(e){const t=e.split("/").at(-1);typeof t<"u"&&(delete Ke(this,Iu)[t],delete Ke(this,Sp)[t])}getParent(){return Ke(this,Db)}getJson(e=!0){if(this.hasChildren()){const t={};return Object.entries(Ke(this,Iu)).forEach(([r,n])=>{const s=e?nJ(r):r;t[s]=n.getJson(e)}),t}return Ke(this,Du)}};u0=new WeakMap,Iu=new WeakMap,Db=new WeakMap,Du=new WeakMap,h0=new WeakMap,Sp=new WeakMap,Ob=new WeakMap;function uJ(i){return i.hasValue()?!1:Object.keys(i.getChildren()).length===0}var d0,wf,uo,nf,uc,s_,Ub,XA,UF,YA,zF,mw,KA,ZA,jP,Ou,Tp;let hJ=class{constructor(e){Zt(this,XA),Zt(this,YA),Zt(this,mw),Zt(this,ZA),Zt(this,Ou),Zt(this,d0,new Map),Zt(this,wf,new Set),Zt(this,uo,new Map),Zt(this,nf,void 0),Zt(this,uc,{}),Zt(this,s_,new Map),Zt(this,Ub,void 0),dn(this,nf,e),dn(this,Ub,{clearSources:e.addClearSourcesHandler(()=>{this.clearSources()}),sourcesChanged:e.addSourcesChangedHandler(t=>{Object.entries(t).forEach(([r,n])=>{this.updateSource(r,n,!1)}),Object.entries(t).forEach(([r])=>{cr(this,Ou,Tp).call(this,r)})}),sourcesRemoved:e.addSourcesRemovedHandler(t=>{const r=t.filter(n=>Ke(this,uo).has(n));r.forEach(n=>this.removeSource(n),!1),r.forEach(n=>{cr(this,Ou,Tp).call(this,n)})})})}getSourceProvider(){return Ke(this,nf)}getSource(e){return Ke(this,uo).get(e)}getSourceValue(e){var t;return(t=this.getSource(e))==null?void 0:t.getSourceValue()}updateSource(e,t,r=!0){cr(this,XA,UF).call(this,e),cr(this,YA,zF).call(this,e);const n=Ke(this,uo).get(e);n==null||n.setValue(t),r&&cr(this,Ou,Tp).call(this,e)}clearSources(){const e=[];Ke(this,uo).forEach((t,r)=>{e.push(r),this.removeSource(r,!1)}),e.forEach(t=>cr(this,Ou,Tp).call(this,t))}removeSource(e,t=!0){const r=Ke(this,uo).get(e);r&&(r.removeValue(),cr(this,mw,KA).call(this,r),t&&cr(this,Ou,Tp).call(this,e),Ke(this,wf).delete(e))}subscribe(e,t,r){var n;typeof Ke(this,uc)[e]>"u"&&(Ke(this,uc)[e]=new Map);const s=Symbol("SourceSubscriber");return Ke(this,uc)[e].set(s,t),r&&((n=this.getSource(e))!=null&&n.hasValue()||Ke(this,nf).requestSource(e),t(this.getSourceValue(e),e,e)),()=>{Ke(this,uc)[e].delete(s)}}subscribeAll(e,t){const r=Symbol("SourceSubscriberAll");return Ke(this,s_).set(r,e),t&&Ke(this,wf).forEach(n=>{e(this.getSourceValue(n),n)}),()=>{Ke(this,s_).delete(r)}}unsubscribeFromProvider(){const{clearSources:e,sourcesChanged:t,sourcesRemoved:r}=Ke(this,Ub);e(),t(),r()}};d0=new WeakMap,wf=new WeakMap,uo=new WeakMap,nf=new WeakMap,uc=new WeakMap,s_=new WeakMap,Ub=new WeakMap,XA=new WeakSet,UF=function(i){Ke(this,wf).has(i)||Ke(this,wf).add(i)},YA=new WeakSet,zF=function(i){const e=i.split("/");let t;e.forEach((r,n)=>{const s=e.slice(0,n+1).join("/");if(!Ke(this,uo).has(s)){const o=Ke(this,uo).get(t),a=new cJ(Ke(this,nf),cr(this,ZA,jP).call(this,s),s,o);Ke(this,uo).set(s,a),o==null||o.addChild(s,a)}t=s})},mw=new WeakSet,KA=function(i){const e=uJ(i),t=i.getParent();e&&t&&(t.removeChild(i.getKey()),Ke(this,uo).delete(i.getKey()),cr(this,mw,KA).call(this,t))},ZA=new WeakSet,jP=function(i){return Ke(this,d0).has(i)||Ke(this,d0).set(i,{}),Ke(this,d0).get(i)},Ou=new WeakSet,Tp=function(i){const e=i.split("/"),t=this.getSourceValue(i);e.forEach((r,n)=>{const s=e.slice(0,n+1).join("/");s in Ke(this,uc)&&Ke(this,uc)[s].forEach(o=>{o(this.getSourceValue(s),s,i)})}),Ke(this,s_).forEach(r=>{r(t,i)})};var ps,zb,Fb,Bb;let HP=class{constructor(){Zt(this,ps,{}),Zt(this,zb,[]),Zt(this,Fb,void 0),Zt(this,Bb,[])}hasSourceProvider(e){return e in Ke(this,ps)}addSourceProvider(e,t){if(this.hasSourceProvider(e))throw new Error("A source provider with that name has already been added.");const r=new hJ(t);Ke(this,ps)[e]=r,Ke(this,zb).forEach(n=>{n(e)})}sourceProviderAdded(e){Ke(this,zb).push(e)}removeSourceProvider(e){this.hasSourceProvider(e)&&(this.getSourceProvider(e).disconnect(),Ke(this,ps)[e].unsubscribeFromProvider(),delete Ke(this,ps)[e])}getSourceProvider(e){return Ke(this,ps)[e].getSourceProvider()}getSourceProviderNames(){return Object.keys(Ke(this,ps))}setDefaultSourceProvider(e){dn(this,Fb,e),Ke(this,Bb).forEach(t=>{t(e)})}defaultSourceProviderSet(e){if(typeof e!="function")throw new Error("listener is not a function");Ke(this,Bb).push(e)}getDefaultSourceProvider(){return Ke(this,Fb)}getSource(e,t){var r;return(r=Ke(this,ps)[e])==null?void 0:r.getSource(t)}getSourceValue(e,t){var r;return(r=Ke(this,ps)[e])==null?void 0:r.getSourceValue(t)}subscribe(e,t,r,n){var s;return(s=Ke(this,ps)[e])==null?void 0:s.subscribe(t,r,n)}subscribeAll(e,t,r){var n;return(n=Ke(this,ps)[e])==null?void 0:n.subscribeAll(t,r)}};ps=new WeakMap,zb=new WeakMap,Fb=new WeakMap,Bb=new WeakMap;const FF=()=>{};var Ep,no,p0,f0,o_,a_,Ap,m0,Vb,p2,jb,f2;let dJ=class{constructor(e={},t=0){Zt(this,Ap),Zt(this,Vb),Zt(this,jb),Zt(this,Ep,void 0),Zt(this,no,{}),Zt(this,p0,void 0),Zt(this,f0,new Map),Zt(this,o_,new Map),Zt(this,a_,new Map),t&&dn(this,Ep,setInterval(cr(this,Ap,m0).bind(this),t)),Object.entries(e).forEach(([r,n])=>{this.updateSource(r,n)})}updateSource(e,t){clearTimeout(Ke(this,p0)),Ke(this,no)[e]===void 0?Ke(this,no)[e]={first:{type:"change",value:t}}:Ke(this,no)[e].last={type:"change",value:t},Ke(this,Ep)||cr(this,Ap,m0).call(this)}removeSource(e){Ke(this,no)[e]===void 0?Ke(this,no)[e]={first:{type:"removal"}}:Ke(this,no)[e].last={type:"removal"},Ke(this,Ep)||cr(this,Ap,m0).call(this)}clearSources(e=FF){cr(this,Ap,m0).call(this,()=>{Ke(this,f0).forEach(t=>t()),e()})}clearSourcesWithTimeout(e,t){clearTimeout(Ke(this,p0)),dn(this,p0,setTimeout(()=>{this.clearSources(t)},e))}userUpdate(e,t){this.updateSource(e,t)}requestSource(e){}static getType(e){return typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":e instanceof Array?"Array":e===null?"null":null}addClearSourcesHandler(e){const t=Symbol("clearSources");return Ke(this,f0).set(t,e),()=>{Ke(this,f0).delete(t)}}addSourcesChangedHandler(e){const t=Symbol("sourcesChanged");return Ke(this,o_).set(t,e),()=>{Ke(this,o_).delete(t)}}addSourcesRemovedHandler(e){const t=Symbol("sourcesRemoved");return Ke(this,a_).set(t,e),()=>{Ke(this,a_).delete(t)}}disconnect(){clearTimeout(Ke(this,Ep))}};Ep=new WeakMap,no=new WeakMap,p0=new WeakMap,f0=new WeakMap,o_=new WeakMap,a_=new WeakMap,Ap=new WeakSet,m0=function(i=FF){if(Object.keys(Ke(this,no)).length===0){i();return}const e={...Ke(this,no)};dn(this,no,{});const t={},r={};Object.entries(e).forEach(([n,s])=>{t[n]=s.first,typeof s.last<"u"&&(r[n]=s.last)}),cr(this,Vb,p2).call(this,t),cr(this,jb,f2).call(this,t),Object.keys(r).length>0?setTimeout(()=>{cr(this,Vb,p2).call(this,r),cr(this,jb,f2).call(this,r),i()}):i()},Vb=new WeakSet,p2=function(i){const e={};Object.entries(i).forEach(([t,{type:r}])=>{r==="change"&&(e[t]=i[t].value)}),Object.keys(e).length>0&&Ke(this,o_).forEach(t=>t(e))},jb=new WeakSet,f2=function(i){const e=[];Object.entries(i).forEach(([t,{type:r}])=>{r==="removal"&&e.push(t)}),e.length>0&&Ke(this,a_).forEach(t=>t(e))};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Hb=globalThis,KC=Hb.ShadowRoot&&(Hb.ShadyCSS===void 0||Hb.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ZC=Symbol(),GP=new WeakMap;let BF=class{constructor(e,t,r){if(this._$cssResult$=!0,r!==ZC)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(KC&&e===void 0){const r=t!==void 0&&t.length===1;r&&(e=GP.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&GP.set(t,e))}return e}toString(){return this.cssText}};const pJ=i=>new BF(typeof i=="string"?i:i+"",void 0,ZC),$t=(i,...e)=>{const t=i.length===1?i[0]:e.reduce((r,n,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+i[s+1],i[0]);return new BF(t,i,ZC)},fJ=(i,e)=>{if(KC)i.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(const t of e){const r=document.createElement("style"),n=Hb.litNonce;n!==void 0&&r.setAttribute("nonce",n),r.textContent=t.cssText,i.appendChild(r)}},WP=KC?i=>i:i=>i instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return pJ(t)})(i):i;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:mJ,defineProperty:gJ,getOwnPropertyDescriptor:_J,getOwnPropertyNames:yJ,getOwnPropertySymbols:vJ,getPrototypeOf:bJ}=Object,Zf=globalThis,qP=Zf.trustedTypes,xJ=qP?qP.emptyScript:"",XP=Zf.reactiveElementPolyfillSupport,l_=(i,e)=>i,gw={toAttribute(i,e){switch(e){case Boolean:i=i?xJ:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,e){let t=i;switch(e){case Boolean:t=i!==null;break;case Number:t=i===null?null:Number(i);break;case Object:case Array:try{t=JSON.parse(i)}catch{t=null}}return t}},JC=(i,e)=>!mJ(i,e),YP={attribute:!0,type:String,converter:gw,reflect:!1,hasChanged:JC};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Zf.litPropertyMetadata??(Zf.litPropertyMetadata=new WeakMap);let kp=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=YP){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(e,r,t);n!==void 0&&gJ(this.prototype,e,n)}}static getPropertyDescriptor(e,t,r){const{get:n,set:s}=_J(this.prototype,e)??{get(){return this[t]},set(o){this[t]=o}};return{get(){return n==null?void 0:n.call(this)},set(o){const a=n==null?void 0:n.call(this);s.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??YP}static _$Ei(){if(this.hasOwnProperty(l_("elementProperties")))return;const e=bJ(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(l_("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(l_("properties"))){const t=this.properties,r=[...yJ(t),...vJ(t)];for(const n of r)this.createProperty(n,t[n])}const e=this[Symbol.metadata];if(e!==null){const t=litPropertyMetadata.get(e);if(t!==void 0)for(const[r,n]of t)this.elementProperties.set(r,n)}this._$Eh=new Map;for(const[t,r]of this.elementProperties){const n=this._$Eu(t,r);n!==void 0&&this._$Eh.set(n,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const n of r)t.unshift(WP(n))}else e!==void 0&&t.push(WP(e));return t}static _$Eu(e,t){const r=t.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(t=>this.enableUpdating=t),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(t=>t(this))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((t=e.hostConnected)==null||t.call(e))}removeController(e){var t;(t=this._$EO)==null||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return fJ(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(t=>{var r;return(r=t.hostConnected)==null?void 0:r.call(t)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(t=>{var r;return(r=t.hostDisconnected)==null?void 0:r.call(t)})}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$EC(e,t){var r;const n=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,n);if(s!==void 0&&n.reflect===!0){const o=(((r=n.converter)==null?void 0:r.toAttribute)!==void 0?n.converter:gw).toAttribute(t,n.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,t){var r;const n=this.constructor,s=n._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const o=n.getPropertyOptions(s),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((r=o.converter)==null?void 0:r.fromAttribute)!==void 0?o.converter:gw;this._$Em=s,this[s]=a.fromAttribute(t,o.type),this._$Em=null}}requestUpdate(e,t,r){if(e!==void 0){if(r??(r=this.constructor.getPropertyOptions(e)),!(r.hasChanged??JC)(this[e],t))return;this.P(e,t,r)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(e,t,r){this._$AL.has(e)||this._$AL.set(e,t),r.reflect===!0&&this._$Em!==e&&(this._$Ej??(this._$Ej=new Set)).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const n=this.constructor.elementProperties;if(n.size>0)for(const[s,o]of n)o.wrapped!==!0||this._$AL.has(s)||this[s]===void 0||this.P(s,this[s],o)}let t=!1;const r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),(e=this._$EO)==null||e.forEach(n=>{var s;return(s=n.hostUpdate)==null?void 0:s.call(n)}),this.update(r)):this._$EU()}catch(n){throw t=!1,this._$EU(),n}t&&this._$AE(r)}willUpdate(e){}_$AE(e){var t;(t=this._$EO)==null||t.forEach(r=>{var n;return(n=r.hostUpdated)==null?void 0:n.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&(this._$Ej=this._$Ej.forEach(t=>this._$EC(t,this[t]))),this._$EU()}updated(e){}firstUpdated(e){}};kp.elementStyles=[],kp.shadowRootOptions={mode:"open"},kp[l_("elementProperties")]=new Map,kp[l_("finalized")]=new Map,XP==null||XP({ReactiveElement:kp}),(Zf.reactiveElementVersions??(Zf.reactiveElementVersions=[])).push("2.0.4");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _w=globalThis,yw=_w.trustedTypes,KP=yw?yw.createPolicy("lit-html",{createHTML:i=>i}):void 0,VF="$lit$",hc=`lit$${Math.random().toFixed(9).slice(2)}$`,jF="?"+hc,wJ=`<${jF}>`,Lh=document,ty=()=>Lh.createComment(""),iy=i=>i===null||typeof i!="object"&&typeof i!="function",QC=Array.isArray,MJ=i=>QC(i)||typeof(i==null?void 0:i[Symbol.iterator])=="function",m2=`[ 	
\f\r]`,Tg=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ZP=/-->/g,JP=/>/g,wu=RegExp(`>|${m2}(?:([^\\s"'>=/]+)(${m2}*=${m2}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),QP=/'/g,eN=/"/g,HF=/^(?:script|style|textarea|title)$/i,GF=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),Ye=GF(1),xi=GF(2),Rh=Symbol.for("lit-noChange"),Ii=Symbol.for("lit-nothing"),tN=new WeakMap,Qu=Lh.createTreeWalker(Lh,129);function WF(i,e){if(!QC(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return KP!==void 0?KP.createHTML(e):e}const SJ=(i,e)=>{const t=i.length-1,r=[];let n,s=e===2?"<svg>":e===3?"<math>":"",o=Tg;for(let a=0;a<t;a++){const l=i[a];let c,u,h=-1,d=0;for(;d<l.length&&(o.lastIndex=d,u=o.exec(l),u!==null);)d=o.lastIndex,o===Tg?u[1]==="!--"?o=ZP:u[1]!==void 0?o=JP:u[2]!==void 0?(HF.test(u[2])&&(n=RegExp("</"+u[2],"g")),o=wu):u[3]!==void 0&&(o=wu):o===wu?u[0]===">"?(o=n??Tg,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?wu:u[3]==='"'?eN:QP):o===eN||o===QP?o=wu:o===ZP||o===JP?o=Tg:(o=wu,n=void 0);const f=o===wu&&i[a+1].startsWith("/>")?" ":"";s+=o===Tg?l+wJ:h>=0?(r.push(c),l.slice(0,h)+VF+l.slice(h)+hc+f):l+hc+(h===-2?a:f)}return[WF(i,s+(i[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};let JA=class qF{constructor({strings:e,_$litType$:t},r){let n;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[c,u]=SJ(e,t);if(this.el=qF.createElement(c,r),Qu.currentNode=this.el.content,t===2||t===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(n=Qu.nextNode())!==null&&l.length<a;){if(n.nodeType===1){if(n.hasAttributes())for(const h of n.getAttributeNames())if(h.endsWith(VF)){const d=u[o++],f=n.getAttribute(h).split(hc),g=/([.?@])?(.*)/.exec(d);l.push({type:1,index:s,name:g[2],strings:f,ctor:g[1]==="."?EJ:g[1]==="?"?AJ:g[1]==="@"?kJ:MM}),n.removeAttribute(h)}else h.startsWith(hc)&&(l.push({type:6,index:s}),n.removeAttribute(h));if(HF.test(n.tagName)){const h=n.textContent.split(hc),d=h.length-1;if(d>0){n.textContent=yw?yw.emptyScript:"";for(let f=0;f<d;f++)n.append(h[f],ty()),Qu.nextNode(),l.push({type:2,index:++s});n.append(h[d],ty())}}}else if(n.nodeType===8)if(n.data===jF)l.push({type:2,index:s});else{let h=-1;for(;(h=n.data.indexOf(hc,h+1))!==-1;)l.push({type:7,index:s}),h+=hc.length-1}s++}}static createElement(e,t){const r=Lh.createElement("template");return r.innerHTML=e,r}};function Jf(i,e,t=i,r){var n,s;if(e===Rh)return e;let o=r!==void 0?(n=t._$Co)==null?void 0:n[r]:t._$Cl;const a=iy(e)?void 0:e._$litDirective$;return(o==null?void 0:o.constructor)!==a&&((s=o==null?void 0:o._$AO)==null||s.call(o,!1),a===void 0?o=void 0:(o=new a(i),o._$AT(i,t,r)),r!==void 0?(t._$Co??(t._$Co=[]))[r]=o:t._$Cl=o),o!==void 0&&(e=Jf(i,o._$AS(i,e.values),o,r)),e}let TJ=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:r}=this._$AD,n=((e==null?void 0:e.creationScope)??Lh).importNode(t,!0);Qu.currentNode=n;let s=Qu.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new e$(s,s.nextSibling,this,e):l.type===1?c=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(c=new CJ(s,this,e)),this._$AV.push(c),l=r[++a]}o!==(l==null?void 0:l.index)&&(s=Qu.nextNode(),o++)}return Qu.currentNode=Lh,n}p(e){let t=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}},e$=class XF{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,t,r,n){this.type=2,this._$AH=Ii,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=n,this._$Cv=(n==null?void 0:n.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return t!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Jf(this,e,t),iy(e)?e===Ii||e==null||e===""?(this._$AH!==Ii&&this._$AR(),this._$AH=Ii):e!==this._$AH&&e!==Rh&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):MJ(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Ii&&iy(this._$AH)?this._$AA.nextSibling.data=e:this.T(Lh.createTextNode(e)),this._$AH=e}$(e){var t;const{values:r,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=JA.createElement(WF(n.h,n.h[0]),this.options)),n);if(((t=this._$AH)==null?void 0:t._$AD)===s)this._$AH.p(r);else{const o=new TJ(s,this),a=o.u(this.options);o.p(r),this.T(a),this._$AH=o}}_$AC(e){let t=tN.get(e.strings);return t===void 0&&tN.set(e.strings,t=new JA(e)),t}k(e){QC(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,n=0;for(const s of e)n===t.length?t.push(r=new XF(this.O(ty()),this.O(ty()),this,this.options)):r=t[n],r._$AI(s),n++;n<t.length&&(this._$AR(r&&r._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,t);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var t;this._$AM===void 0&&(this._$Cv=e,(t=this._$AP)==null||t.call(this,e))}},MM=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,n,s){this.type=1,this._$AH=Ii,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Ii}_$AI(e,t=this,r,n){const s=this.strings;let o=!1;if(s===void 0)e=Jf(this,e,t,0),o=!iy(e)||e!==this._$AH&&e!==Rh,o&&(this._$AH=e);else{const a=e;let l,c;for(e=s[0],l=0;l<s.length-1;l++)c=Jf(this,a[r+l],t,l),c===Rh&&(c=this._$AH[l]),o||(o=!iy(c)||c!==this._$AH[l]),c===Ii?e=Ii:e!==Ii&&(e+=(c??"")+s[l+1]),this._$AH[l]=c}o&&!n&&this.j(e)}j(e){e===Ii?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},EJ=class extends MM{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Ii?void 0:e}},AJ=class extends MM{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Ii)}},kJ=class extends MM{constructor(e,t,r,n,s){super(e,t,r,n,s),this.type=5}_$AI(e,t=this){if((e=Jf(this,e,t,0)??Ii)===Rh)return;const r=this._$AH,n=e===Ii&&r!==Ii||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==Ii&&(r===Ii||n);n&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;typeof this._$AH=="function"?this._$AH.call(((t=this.options)==null?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}},CJ=class{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Jf(this,e)}};const iN=_w.litHtmlPolyfillSupport;iN==null||iN(JA,e$),(_w.litHtmlVersions??(_w.litHtmlVersions=[])).push("3.2.1");const $J=(i,e,t)=>{const r=(t==null?void 0:t.renderBefore)??e;let n=r._$litPart$;if(n===void 0){const s=(t==null?void 0:t.renderBefore)??null;r._$litPart$=n=new e$(e.insertBefore(ty(),s),s,void 0,t??{})}return n._$AI(i),n};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let ut=class extends kp{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e;const t=super.createRenderRoot();return(e=this.renderOptions).renderBefore??(e.renderBefore=t.firstChild),t}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=$J(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Rh}};var rN;ut._$litElement$=!0,ut.finalized=!0,(rN=globalThis.litElementHydrateSupport)==null||rN.call(globalThis,{LitElement:ut});const nN=globalThis.litElementPolyfillSupport;nN==null||nN({LitElement:ut});(globalThis.litElementVersions??(globalThis.litElementVersions=[])).push("4.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const LJ={attribute:!0,type:String,converter:gw,reflect:!1,hasChanged:JC},RJ=(i=LJ,e,t)=>{const{kind:r,metadata:n}=t;let s=globalThis.litPropertyMetadata.get(n);if(s===void 0&&globalThis.litPropertyMetadata.set(n,s=new Map),s.set(t.name,i),r==="accessor"){const{name:o}=t;return{set(a){const l=e.get.call(this);e.set.call(this,a),this.requestUpdate(o,l,i)},init(a){return a!==void 0&&this.P(o,void 0,i),a}}}if(r==="setter"){const{name:o}=t;return function(a){const l=this[o];e.call(this,a),this.requestUpdate(o,l,i)}}throw Error("Unsupported decorator location: "+r)};function q(i){return(e,t)=>typeof t=="object"?RJ(i,e,t):((r,n,s)=>{const o=n.hasOwnProperty(s);return n.constructor.createProperty(s,o?{...r,wrapped:!0}:r),o?Object.getOwnPropertyDescriptor(n,s):void 0})(i,e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function zi(i){return q({...i,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const QA=(i,e,t)=>(t.configurable=!0,t.enumerable=!0,Reflect.decorate&&typeof e!="object"&&Object.defineProperty(i,e,t),t);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function ni(i,e){return(t,r,n)=>{const s=o=>{var a;return((a=o.renderRoot)==null?void 0:a.querySelector(i))??null};if(e){const{get:o,set:a}=typeof r=="object"?t:n??(()=>{const l=Symbol();return{get(){return this[l]},set(c){this[l]=c}}})();return QA(t,r,{get(){let l=o.call(this);return l===void 0&&(l=s(this),(l!==null||this.hasUpdated)&&a.call(this,l)),l}})}return QA(t,r,{get(){return s(this)}})}}var PJ={value:()=>{}};function YF(){for(var i=0,e=arguments.length,t={},r;i<e;++i){if(!(r=arguments[i]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new Gb(t)}function Gb(i){this._=i}function NJ(i,e){return i.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}Gb.prototype=YF.prototype={constructor:Gb,on:function(i,e){var t=this._,r=NJ(i+"",t),n,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((n=(i=r[s]).type)&&(n=IJ(t[n],i.name)))return n;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(i=r[s]).type)t[n]=sN(t[n],i.name,e);else if(e==null)for(n in t)t[n]=sN(t[n],i.name,null);return this},copy:function(){var i={},e=this._;for(var t in e)i[t]=e[t].slice();return new Gb(i)},call:function(i,e){if((n=arguments.length-2)>0)for(var t=new Array(n),r=0,n,s;r<n;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(s=this._[i],r=0,n=s.length;r<n;++r)s[r].value.apply(e,t)},apply:function(i,e,t){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var r=this._[i],n=0,s=r.length;n<s;++n)r[n].value.apply(e,t)}};function IJ(i,e){for(var t=0,r=i.length,n;t<r;++t)if((n=i[t]).name===e)return n.value}function sN(i,e,t){for(var r=0,n=i.length;r<n;++r)if(i[r].name===e){i[r]=PJ,i=i.slice(0,r).concat(i.slice(r+1));break}return t!=null&&i.push({name:e,value:t}),i}var e3="http://www.w3.org/1999/xhtml";const oN={svg:"http://www.w3.org/2000/svg",xhtml:e3,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function SM(i){var e=i+="",t=e.indexOf(":");return t>=0&&(e=i.slice(0,t))!=="xmlns"&&(i=i.slice(t+1)),oN.hasOwnProperty(e)?{space:oN[e],local:i}:i}function DJ(i){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===e3&&e.documentElement.namespaceURI===e3?e.createElement(i):e.createElementNS(t,i)}}function OJ(i){return function(){return this.ownerDocument.createElementNS(i.space,i.local)}}function KF(i){var e=SM(i);return(e.local?OJ:DJ)(e)}function UJ(){}function t$(i){return i==null?UJ:function(){return this.querySelector(i)}}function zJ(i){typeof i!="function"&&(i=t$(i));for(var e=this._groups,t=e.length,r=new Array(t),n=0;n<t;++n)for(var s=e[n],o=s.length,a=r[n]=new Array(o),l,c,u=0;u<o;++u)(l=s[u])&&(c=i.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Kn(r,this._parents)}function FJ(i){return i==null?[]:Array.isArray(i)?i:Array.from(i)}function BJ(){return[]}function ZF(i){return i==null?BJ:function(){return this.querySelectorAll(i)}}function VJ(i){return function(){return FJ(i.apply(this,arguments))}}function jJ(i){typeof i=="function"?i=VJ(i):i=ZF(i);for(var e=this._groups,t=e.length,r=[],n=[],s=0;s<t;++s)for(var o=e[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(i.call(l,l.__data__,c,o)),n.push(l));return new Kn(r,n)}function JF(i){return function(){return this.matches(i)}}function QF(i){return function(e){return e.matches(i)}}var HJ=Array.prototype.find;function GJ(i){return function(){return HJ.call(this.children,i)}}function WJ(){return this.firstElementChild}function qJ(i){return this.select(i==null?WJ:GJ(typeof i=="function"?i:QF(i)))}var XJ=Array.prototype.filter;function YJ(){return Array.from(this.children)}function KJ(i){return function(){return XJ.call(this.children,i)}}function ZJ(i){return this.selectAll(i==null?YJ:KJ(typeof i=="function"?i:QF(i)))}function JJ(i){typeof i!="function"&&(i=JF(i));for(var e=this._groups,t=e.length,r=new Array(t),n=0;n<t;++n)for(var s=e[n],o=s.length,a=r[n]=[],l,c=0;c<o;++c)(l=s[c])&&i.call(l,l.__data__,c,s)&&a.push(l);return new Kn(r,this._parents)}function eB(i){return new Array(i.length)}function QJ(){return new Kn(this._enter||this._groups.map(eB),this._parents)}function vw(i,e){this.ownerDocument=i.ownerDocument,this.namespaceURI=i.namespaceURI,this._next=null,this._parent=i,this.__data__=e}vw.prototype={constructor:vw,appendChild:function(i){return this._parent.insertBefore(i,this._next)},insertBefore:function(i,e){return this._parent.insertBefore(i,e)},querySelector:function(i){return this._parent.querySelector(i)},querySelectorAll:function(i){return this._parent.querySelectorAll(i)}};function eQ(i){return function(){return i}}function tQ(i,e,t,r,n,s){for(var o=0,a,l=e.length,c=s.length;o<c;++o)(a=e[o])?(a.__data__=s[o],r[o]=a):t[o]=new vw(i,s[o]);for(;o<l;++o)(a=e[o])&&(n[o]=a)}function iQ(i,e,t,r,n,s,o){var a,l,c=new Map,u=e.length,h=s.length,d=new Array(u),f;for(a=0;a<u;++a)(l=e[a])&&(d[a]=f=o.call(l,l.__data__,a,e)+"",c.has(f)?n[a]=l:c.set(f,l));for(a=0;a<h;++a)f=o.call(i,s[a],a,s)+"",(l=c.get(f))?(r[a]=l,l.__data__=s[a],c.delete(f)):t[a]=new vw(i,s[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(d[a])===l&&(n[a]=l)}function rQ(i){return i.__data__}function nQ(i,e){if(!arguments.length)return Array.from(this,rQ);var t=e?iQ:tQ,r=this._parents,n=this._groups;typeof i!="function"&&(i=eQ(i));for(var s=n.length,o=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],h=n[c],d=h.length,f=sQ(i.call(u,u&&u.__data__,c,r)),g=f.length,v=a[c]=new Array(g),m=o[c]=new Array(g),p=l[c]=new Array(d);t(u,h,v,m,p,f,e);for(var y=0,_=0,x,w;y<g;++y)if(x=v[y]){for(y>=_&&(_=y+1);!(w=m[_])&&++_<g;);x._next=w||null}}return o=new Kn(o,r),o._enter=a,o._exit=l,o}function sQ(i){return typeof i=="object"&&"length"in i?i:Array.from(i)}function oQ(){return new Kn(this._exit||this._groups.map(eB),this._parents)}function aQ(i,e,t){var r=this.enter(),n=this,s=this.exit();return typeof i=="function"?(r=i(r),r&&(r=r.selection())):r=r.append(i+""),e!=null&&(n=e(n),n&&(n=n.selection())),t==null?s.remove():t(s),r&&n?r.merge(n).order():n}function lQ(i){for(var e=i.selection?i.selection():i,t=this._groups,r=e._groups,n=t.length,s=r.length,o=Math.min(n,s),a=new Array(n),l=0;l<o;++l)for(var c=t[l],u=r[l],h=c.length,d=a[l]=new Array(h),f,g=0;g<h;++g)(f=c[g]||u[g])&&(d[g]=f);for(;l<n;++l)a[l]=t[l];return new Kn(a,this._parents)}function cQ(){for(var i=this._groups,e=-1,t=i.length;++e<t;)for(var r=i[e],n=r.length-1,s=r[n],o;--n>=0;)(o=r[n])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function uQ(i){i||(i=hQ);function e(h,d){return h&&d?i(h.__data__,d.__data__):!h-!d}for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s){for(var o=t[s],a=o.length,l=n[s]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(e)}return new Kn(n,this._parents).order()}function hQ(i,e){return i<e?-1:i>e?1:i>=e?0:NaN}function dQ(){var i=arguments[0];return arguments[0]=this,i.apply(null,arguments),this}function pQ(){return Array.from(this)}function fQ(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var r=i[e],n=0,s=r.length;n<s;++n){var o=r[n];if(o)return o}return null}function mQ(){let i=0;for(const e of this)++i;return i}function gQ(){return!this.node()}function _Q(i){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],s=0,o=n.length,a;s<o;++s)(a=n[s])&&i.call(a,a.__data__,s,n);return this}function yQ(i){return function(){this.removeAttribute(i)}}function vQ(i){return function(){this.removeAttributeNS(i.space,i.local)}}function bQ(i,e){return function(){this.setAttribute(i,e)}}function xQ(i,e){return function(){this.setAttributeNS(i.space,i.local,e)}}function wQ(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(i):this.setAttribute(i,t)}}function MQ(i,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(i.space,i.local):this.setAttributeNS(i.space,i.local,t)}}function SQ(i,e){var t=SM(i);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?vQ:yQ:typeof e=="function"?t.local?MQ:wQ:t.local?xQ:bQ)(t,e))}function tB(i){return i.ownerDocument&&i.ownerDocument.defaultView||i.document&&i||i.defaultView}function TQ(i){return function(){this.style.removeProperty(i)}}function EQ(i,e,t){return function(){this.style.setProperty(i,e,t)}}function AQ(i,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(i):this.style.setProperty(i,r,t)}}function kQ(i,e,t){return arguments.length>1?this.each((e==null?TQ:typeof e=="function"?AQ:EQ)(i,e,t??"")):Qf(this.node(),i)}function Qf(i,e){return i.style.getPropertyValue(e)||tB(i).getComputedStyle(i,null).getPropertyValue(e)}function CQ(i){return function(){delete this[i]}}function $Q(i,e){return function(){this[i]=e}}function LQ(i,e){return function(){var t=e.apply(this,arguments);t==null?delete this[i]:this[i]=t}}function RQ(i,e){return arguments.length>1?this.each((e==null?CQ:typeof e=="function"?LQ:$Q)(i,e)):this.node()[i]}function iB(i){return i.trim().split(/^|\s+/)}function i$(i){return i.classList||new rB(i)}function rB(i){this._node=i,this._names=iB(i.getAttribute("class")||"")}rB.prototype={add:function(i){var e=this._names.indexOf(i);e<0&&(this._names.push(i),this._node.setAttribute("class",this._names.join(" ")))},remove:function(i){var e=this._names.indexOf(i);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(i){return this._names.indexOf(i)>=0}};function nB(i,e){for(var t=i$(i),r=-1,n=e.length;++r<n;)t.add(e[r])}function sB(i,e){for(var t=i$(i),r=-1,n=e.length;++r<n;)t.remove(e[r])}function PQ(i){return function(){nB(this,i)}}function NQ(i){return function(){sB(this,i)}}function IQ(i,e){return function(){(e.apply(this,arguments)?nB:sB)(this,i)}}function DQ(i,e){var t=iB(i+"");if(arguments.length<2){for(var r=i$(this.node()),n=-1,s=t.length;++n<s;)if(!r.contains(t[n]))return!1;return!0}return this.each((typeof e=="function"?IQ:e?PQ:NQ)(t,e))}function OQ(){this.textContent=""}function UQ(i){return function(){this.textContent=i}}function zQ(i){return function(){var e=i.apply(this,arguments);this.textContent=e??""}}function FQ(i){return arguments.length?this.each(i==null?OQ:(typeof i=="function"?zQ:UQ)(i)):this.node().textContent}function BQ(){this.innerHTML=""}function VQ(i){return function(){this.innerHTML=i}}function jQ(i){return function(){var e=i.apply(this,arguments);this.innerHTML=e??""}}function HQ(i){return arguments.length?this.each(i==null?BQ:(typeof i=="function"?jQ:VQ)(i)):this.node().innerHTML}function GQ(){this.nextSibling&&this.parentNode.appendChild(this)}function WQ(){return this.each(GQ)}function qQ(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function XQ(){return this.each(qQ)}function YQ(i){var e=typeof i=="function"?i:KF(i);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function KQ(){return null}function ZQ(i,e){var t=typeof i=="function"?i:KF(i),r=e==null?KQ:typeof e=="function"?e:t$(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function JQ(){var i=this.parentNode;i&&i.removeChild(this)}function QQ(){return this.each(JQ)}function eee(){var i=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function tee(){var i=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(i,this.nextSibling):i}function iee(i){return this.select(i?tee:eee)}function ree(i){return arguments.length?this.property("__data__",i):this.node().__data__}function nee(i){return function(e){i.call(this,e,this.__data__)}}function see(i){return i.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function oee(i){return function(){var e=this.__on;if(e){for(var t=0,r=-1,n=e.length,s;t<n;++t)s=e[t],(!i.type||s.type===i.type)&&s.name===i.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function aee(i,e,t){return function(){var r=this.__on,n,s=nee(e);if(r){for(var o=0,a=r.length;o<a;++o)if((n=r[o]).type===i.type&&n.name===i.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=s,n.options=t),n.value=e;return}}this.addEventListener(i.type,s,t),n={type:i.type,name:i.name,value:e,listener:s,options:t},r?r.push(n):this.__on=[n]}}function lee(i,e,t){var r=see(i+""),n,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(n=0,u=a[l];n<s;++n)if((o=r[n]).type===u.type&&o.name===u.name)return u.value}return}for(a=e?aee:oee,n=0;n<s;++n)this.each(a(r[n],e,t));return this}function oB(i,e,t){var r=tB(i),n=r.CustomEvent;typeof n=="function"?n=new n(e,t):(n=r.document.createEvent("Event"),t?(n.initEvent(e,t.bubbles,t.cancelable),n.detail=t.detail):n.initEvent(e,!1,!1)),i.dispatchEvent(n)}function cee(i,e){return function(){return oB(this,i,e)}}function uee(i,e){return function(){return oB(this,i,e.apply(this,arguments))}}function hee(i,e){return this.each((typeof e=="function"?uee:cee)(i,e))}function*dee(){for(var i=this._groups,e=0,t=i.length;e<t;++e)for(var r=i[e],n=0,s=r.length,o;n<s;++n)(o=r[n])&&(yield o)}var aB=[null];function Kn(i,e){this._groups=i,this._parents=e}function Ey(){return new Kn([[document.documentElement]],aB)}function pee(){return this}Kn.prototype=Ey.prototype={constructor:Kn,select:zJ,selectAll:jJ,selectChild:qJ,selectChildren:ZJ,filter:JJ,data:nQ,enter:QJ,exit:oQ,join:aQ,merge:lQ,selection:pee,order:cQ,sort:uQ,call:dQ,nodes:pQ,node:fQ,size:mQ,empty:gQ,each:_Q,attr:SQ,style:kQ,property:RQ,classed:DQ,text:FQ,html:HQ,raise:WQ,lower:XQ,append:YQ,insert:ZQ,remove:QQ,clone:iee,datum:ree,on:lee,dispatch:hee,[Symbol.iterator]:dee};function jr(i){return typeof i=="string"?new Kn([[document.querySelector(i)]],[document.documentElement]):new Kn([[i]],aB)}function r$(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function lB(i,e){var t=Object.create(i.prototype);for(var r in e)t[r]=e[r];return t}function Ay(){}var ry=.7,bw=1/ry,Mf="\\s*([+-]?\\d+)\\s*",ny="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fee=/^#([0-9a-f]{3,8})$/,mee=new RegExp(`^rgb\\(${Mf},${Mf},${Mf}\\)$`),gee=new RegExp(`^rgb\\(${Wo},${Wo},${Wo}\\)$`),_ee=new RegExp(`^rgba\\(${Mf},${Mf},${Mf},${ny}\\)$`),yee=new RegExp(`^rgba\\(${Wo},${Wo},${Wo},${ny}\\)$`),vee=new RegExp(`^hsl\\(${ny},${Wo},${Wo}\\)$`),bee=new RegExp(`^hsla\\(${ny},${Wo},${Wo},${ny}\\)$`),aN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};r$(Ay,Ph,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:lN,formatHex:lN,formatHex8:xee,formatHsl:wee,formatRgb:cN,toString:cN});function lN(){return this.rgb().formatHex()}function xee(){return this.rgb().formatHex8()}function wee(){return cB(this).formatHsl()}function cN(){return this.rgb().formatRgb()}function Ph(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=fee.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?uN(e):t===3?new gn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Bv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Bv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=mee.exec(i))?new gn(e[1],e[2],e[3],1):(e=gee.exec(i))?new gn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_ee.exec(i))?Bv(e[1],e[2],e[3],e[4]):(e=yee.exec(i))?Bv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=vee.exec(i))?pN(e[1],e[2]/100,e[3]/100,1):(e=bee.exec(i))?pN(e[1],e[2]/100,e[3]/100,e[4]):aN.hasOwnProperty(i)?uN(aN[i]):i==="transparent"?new gn(NaN,NaN,NaN,0):null}function uN(i){return new gn(i>>16&255,i>>8&255,i&255,1)}function Bv(i,e,t,r){return r<=0&&(i=e=t=NaN),new gn(i,e,t,r)}function Mee(i){return i instanceof Ay||(i=Ph(i)),i?(i=i.rgb(),new gn(i.r,i.g,i.b,i.opacity)):new gn}function t3(i,e,t,r){return arguments.length===1?Mee(i):new gn(i,e,t,r??1)}function gn(i,e,t,r){this.r=+i,this.g=+e,this.b=+t,this.opacity=+r}r$(gn,t3,lB(Ay,{brighter(i){return i=i==null?bw:Math.pow(bw,i),new gn(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?ry:Math.pow(ry,i),new gn(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new gn(_h(this.r),_h(this.g),_h(this.b),xw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hN,formatHex:hN,formatHex8:See,formatRgb:dN,toString:dN}));function hN(){return`#${eh(this.r)}${eh(this.g)}${eh(this.b)}`}function See(){return`#${eh(this.r)}${eh(this.g)}${eh(this.b)}${eh((isNaN(this.opacity)?1:this.opacity)*255)}`}function dN(){const i=xw(this.opacity);return`${i===1?"rgb(":"rgba("}${_h(this.r)}, ${_h(this.g)}, ${_h(this.b)}${i===1?")":`, ${i})`}`}function xw(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function _h(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function eh(i){return i=_h(i),(i<16?"0":"")+i.toString(16)}function pN(i,e,t,r){return r<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new fo(i,e,t,r)}function cB(i){if(i instanceof fo)return new fo(i.h,i.s,i.l,i.opacity);if(i instanceof Ay||(i=Ph(i)),!i)return new fo;if(i instanceof fo)return i;i=i.rgb();var e=i.r/255,t=i.g/255,r=i.b/255,n=Math.min(e,t,r),s=Math.max(e,t,r),o=NaN,a=s-n,l=(s+n)/2;return a?(e===s?o=(t-r)/a+(t<r)*6:t===s?o=(r-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+n:2-s-n,o*=60):a=l>0&&l<1?0:o,new fo(o,a,l,i.opacity)}function Tee(i,e,t,r){return arguments.length===1?cB(i):new fo(i,e,t,r??1)}function fo(i,e,t,r){this.h=+i,this.s=+e,this.l=+t,this.opacity=+r}r$(fo,Tee,lB(Ay,{brighter(i){return i=i==null?bw:Math.pow(bw,i),new fo(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?ry:Math.pow(ry,i),new fo(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,n=2*t-r;return new gn(g2(i>=240?i-240:i+120,n,r),g2(i,n,r),g2(i<120?i+240:i-120,n,r),this.opacity)},clamp(){return new fo(fN(this.h),Vv(this.s),Vv(this.l),xw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=xw(this.opacity);return`${i===1?"hsl(":"hsla("}${fN(this.h)}, ${Vv(this.s)*100}%, ${Vv(this.l)*100}%${i===1?")":`, ${i})`}`}}));function fN(i){return i=(i||0)%360,i<0?i+360:i}function Vv(i){return Math.max(0,Math.min(1,i||0))}function g2(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}const n$=i=>()=>i;function Eee(i,e){return function(t){return i+t*e}}function Aee(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(r){return Math.pow(i+r*e,t)}}function kee(i){return(i=+i)==1?uB:function(e,t){return t-e?Aee(e,t,i):n$(isNaN(e)?t:e)}}function uB(i,e){var t=e-i;return t?Eee(i,t):n$(isNaN(i)?e:i)}const ww=function i(e){var t=kee(e);function r(n,s){var o=t((n=t3(n)).r,(s=t3(s)).r),a=t(n.g,s.g),l=t(n.b,s.b),c=uB(n.opacity,s.opacity);return function(u){return n.r=o(u),n.g=a(u),n.b=l(u),n.opacity=c(u),n+""}}return r.gamma=i,r}(1);function ho(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}var i3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_2=new RegExp(i3.source,"g");function Cee(i){return function(){return i}}function $ee(i){return function(e){return i(e)+""}}function hB(i,e){var t=i3.lastIndex=_2.lastIndex=0,r,n,s,o=-1,a=[],l=[];for(i=i+"",e=e+"";(r=i3.exec(i))&&(n=_2.exec(e));)(s=n.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(n=n[0])?a[o]?a[o]+=n:a[++o]=n:(a[++o]=null,l.push({i:o,x:ho(r,n)})),t=_2.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?$ee(l[0].x):Cee(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}var mN=180/Math.PI,dB={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pB(i,e,t,r,n,s){var o,a,l;return(o=Math.sqrt(i*i+e*e))&&(i/=o,e/=o),(l=i*t+e*r)&&(t-=i*l,r-=e*l),(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a,l/=a),i*r<e*t&&(i=-i,e=-e,l=-l,o=-o),{translateX:n,translateY:s,rotate:Math.atan2(e,i)*mN,skewX:Math.atan(l)*mN,scaleX:o,scaleY:a}}var jv;function Lee(i){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(i+"");return e.isIdentity?dB:pB(e.a,e.b,e.c,e.d,e.e,e.f)}function Ree(i){return i==null||(jv||(jv=document.createElementNS("http://www.w3.org/2000/svg","g")),jv.setAttribute("transform",i),!(i=jv.transform.baseVal.consolidate()))?dB:(i=i.matrix,pB(i.a,i.b,i.c,i.d,i.e,i.f))}function fB(i,e,t,r){function n(c){return c.length?c.pop()+" ":""}function s(c,u,h,d,f,g){if(c!==h||u!==d){var v=f.push("translate(",null,e,null,t);g.push({i:v-4,x:ho(c,h)},{i:v-2,x:ho(u,d)})}else(h||d)&&f.push("translate("+h+e+d+t)}function o(c,u,h,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:h.push(n(h)+"rotate(",null,r)-2,x:ho(c,u)})):u&&h.push(n(h)+"rotate("+u+r)}function a(c,u,h,d){c!==u?d.push({i:h.push(n(h)+"skewX(",null,r)-2,x:ho(c,u)}):u&&h.push(n(h)+"skewX("+u+r)}function l(c,u,h,d,f,g){if(c!==h||u!==d){var v=f.push(n(f)+"scale(",null,",",null,")");g.push({i:v-4,x:ho(c,h)},{i:v-2,x:ho(u,d)})}else(h!==1||d!==1)&&f.push(n(f)+"scale("+h+","+d+")")}return function(c,u){var h=[],d=[];return c=i(c),u=i(u),s(c.translateX,c.translateY,u.translateX,u.translateY,h,d),o(c.rotate,u.rotate,h,d),a(c.skewX,u.skewX,h,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,d),c=u=null,function(f){for(var g=-1,v=d.length,m;++g<v;)h[(m=d[g]).i]=m.x(f);return h.join("")}}}var Pee=fB(Lee,"px, ","px)","deg)"),Nee=fB(Ree,", ",")",")"),em=0,g0=0,Eg=0,mB=1e3,Mw,_0,Sw=0,Nh=0,TM=0,sy=typeof performance=="object"&&performance.now?performance:Date,gB=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function s$(){return Nh||(gB(Iee),Nh=sy.now()+TM)}function Iee(){Nh=0}function Tw(){this._call=this._time=this._next=null}Tw.prototype=_B.prototype={constructor:Tw,restart:function(i,e,t){if(typeof i!="function")throw new TypeError("callback is not a function");t=(t==null?s$():+t)+(e==null?0:+e),!this._next&&_0!==this&&(_0?_0._next=this:Mw=this,_0=this),this._call=i,this._time=t,r3()},stop:function(){this._call&&(this._call=null,this._time=1/0,r3())}};function _B(i,e,t){var r=new Tw;return r.restart(i,e,t),r}function Dee(){s$(),++em;for(var i=Mw,e;i;)(e=Nh-i._time)>=0&&i._call.call(void 0,e),i=i._next;--em}function gN(){Nh=(Sw=sy.now())+TM,em=g0=0;try{Dee()}finally{em=0,Uee(),Nh=0}}function Oee(){var i=sy.now(),e=i-Sw;e>mB&&(TM-=e,Sw=i)}function Uee(){for(var i,e=Mw,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),i=e,e=e._next):(t=e._next,e._next=null,e=i?i._next=t:Mw=t);_0=i,r3(r)}function r3(i){if(!em){g0&&(g0=clearTimeout(g0));var e=i-Nh;e>24?(i<1/0&&(g0=setTimeout(gN,i-sy.now()-TM)),Eg&&(Eg=clearInterval(Eg))):(Eg||(Sw=sy.now(),Eg=setInterval(Oee,mB)),em=1,gB(gN))}}function _N(i,e,t){var r=new Tw;return e=e==null?0:+e,r.restart(n=>{r.stop(),i(n+e)},e,t),r}var zee=YF("start","end","cancel","interrupt"),Fee=[],yB=0,yN=1,n3=2,Wb=3,vN=4,s3=5,qb=6;function EM(i,e,t,r,n,s){var o=i.__transition;if(!o)i.__transition={};else if(t in o)return;Bee(i,t,{name:e,index:r,group:n,on:zee,tween:Fee,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:yB})}function o$(i,e){var t=So(i,e);if(t.state>yB)throw new Error("too late; already scheduled");return t}function Qo(i,e){var t=So(i,e);if(t.state>Wb)throw new Error("too late; already running");return t}function So(i,e){var t=i.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function Bee(i,e,t){var r=i.__transition,n;r[e]=t,t.timer=_B(s,0,t.time);function s(c){t.state=yN,t.timer.restart(o,t.delay,t.time),t.delay<=c&&o(c-t.delay)}function o(c){var u,h,d,f;if(t.state!==yN)return l();for(u in r)if(f=r[u],f.name===t.name){if(f.state===Wb)return _N(o);f.state===vN?(f.state=qb,f.timer.stop(),f.on.call("interrupt",i,i.__data__,f.index,f.group),delete r[u]):+u<e&&(f.state=qb,f.timer.stop(),f.on.call("cancel",i,i.__data__,f.index,f.group),delete r[u])}if(_N(function(){t.state===Wb&&(t.state=vN,t.timer.restart(a,t.delay,t.time),a(c))}),t.state=n3,t.on.call("start",i,i.__data__,t.index,t.group),t.state===n3){for(t.state=Wb,n=new Array(d=t.tween.length),u=0,h=-1;u<d;++u)(f=t.tween[u].value.call(i,i.__data__,t.index,t.group))&&(n[++h]=f);n.length=h+1}}function a(c){for(var u=c<t.duration?t.ease.call(null,c/t.duration):(t.timer.restart(l),t.state=s3,1),h=-1,d=n.length;++h<d;)n[h].call(i,u);t.state===s3&&(t.on.call("end",i,i.__data__,t.index,t.group),l())}function l(){t.state=qb,t.timer.stop(),delete r[e];for(var c in r)return;delete i.__transition}}function Vee(i,e){var t=i.__transition,r,n,s=!0,o;if(t){e=e==null?null:e+"";for(o in t){if((r=t[o]).name!==e){s=!1;continue}n=r.state>n3&&r.state<s3,r.state=qb,r.timer.stop(),r.on.call(n?"interrupt":"cancel",i,i.__data__,r.index,r.group),delete t[o]}s&&delete i.__transition}}function jee(i){return this.each(function(){Vee(this,i)})}function Hee(i,e){var t,r;return function(){var n=Qo(this,i),s=n.tween;if(s!==t){r=t=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}n.tween=r}}function Gee(i,e,t){var r,n;if(typeof t!="function")throw new Error;return function(){var s=Qo(this,i),o=s.tween;if(o!==r){n=(r=o).slice();for(var a={name:e,value:t},l=0,c=n.length;l<c;++l)if(n[l].name===e){n[l]=a;break}l===c&&n.push(a)}s.tween=n}}function Wee(i,e){var t=this._id;if(i+="",arguments.length<2){for(var r=So(this.node(),t).tween,n=0,s=r.length,o;n<s;++n)if((o=r[n]).name===i)return o.value;return null}return this.each((e==null?Hee:Gee)(t,i,e))}function a$(i,e,t){var r=i._id;return i.each(function(){var n=Qo(this,r);(n.value||(n.value={}))[e]=t.apply(this,arguments)}),function(n){return So(n,r).value[e]}}function vB(i,e){var t;return(typeof e=="number"?ho:e instanceof Ph?ww:(t=Ph(e))?(e=t,ww):hB)(i,e)}function qee(i){return function(){this.removeAttribute(i)}}function Xee(i){return function(){this.removeAttributeNS(i.space,i.local)}}function Yee(i,e,t){var r,n=t+"",s;return function(){var o=this.getAttribute(i);return o===n?null:o===r?s:s=e(r=o,t)}}function Kee(i,e,t){var r,n=t+"",s;return function(){var o=this.getAttributeNS(i.space,i.local);return o===n?null:o===r?s:s=e(r=o,t)}}function Zee(i,e,t){var r,n,s;return function(){var o,a=t(this),l;return a==null?void this.removeAttribute(i):(o=this.getAttribute(i),l=a+"",o===l?null:o===r&&l===n?s:(n=l,s=e(r=o,a)))}}function Jee(i,e,t){var r,n,s;return function(){var o,a=t(this),l;return a==null?void this.removeAttributeNS(i.space,i.local):(o=this.getAttributeNS(i.space,i.local),l=a+"",o===l?null:o===r&&l===n?s:(n=l,s=e(r=o,a)))}}function Qee(i,e){var t=SM(i),r=t==="transform"?Nee:vB;return this.attrTween(i,typeof e=="function"?(t.local?Jee:Zee)(t,r,a$(this,"attr."+i,e)):e==null?(t.local?Xee:qee)(t):(t.local?Kee:Yee)(t,r,e))}function ete(i,e){return function(t){this.setAttribute(i,e.call(this,t))}}function tte(i,e){return function(t){this.setAttributeNS(i.space,i.local,e.call(this,t))}}function ite(i,e){var t,r;function n(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&tte(i,s)),t}return n._value=e,n}function rte(i,e){var t,r;function n(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&ete(i,s)),t}return n._value=e,n}function nte(i,e){var t="attr."+i;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=SM(i);return this.tween(t,(r.local?ite:rte)(r,e))}function ste(i,e){return function(){o$(this,i).delay=+e.apply(this,arguments)}}function ote(i,e){return e=+e,function(){o$(this,i).delay=e}}function ate(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?ste:ote)(e,i)):So(this.node(),e).delay}function lte(i,e){return function(){Qo(this,i).duration=+e.apply(this,arguments)}}function cte(i,e){return e=+e,function(){Qo(this,i).duration=e}}function ute(i){var e=this._id;return arguments.length?this.each((typeof i=="function"?lte:cte)(e,i)):So(this.node(),e).duration}function hte(i,e){if(typeof e!="function")throw new Error;return function(){Qo(this,i).ease=e}}function dte(i){var e=this._id;return arguments.length?this.each(hte(e,i)):So(this.node(),e).ease}function pte(i,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Qo(this,i).ease=t}}function fte(i){if(typeof i!="function")throw new Error;return this.each(pte(this._id,i))}function mte(i){typeof i!="function"&&(i=JF(i));for(var e=this._groups,t=e.length,r=new Array(t),n=0;n<t;++n)for(var s=e[n],o=s.length,a=r[n]=[],l,c=0;c<o;++c)(l=s[c])&&i.call(l,l.__data__,c,s)&&a.push(l);return new ul(r,this._parents,this._name,this._id)}function gte(i){if(i._id!==this._id)throw new Error;for(var e=this._groups,t=i._groups,r=e.length,n=t.length,s=Math.min(r,n),o=new Array(r),a=0;a<s;++a)for(var l=e[a],c=t[a],u=l.length,h=o[a]=new Array(u),d,f=0;f<u;++f)(d=l[f]||c[f])&&(h[f]=d);for(;a<r;++a)o[a]=e[a];return new ul(o,this._parents,this._name,this._id)}function _te(i){return(i+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function yte(i,e,t){var r,n,s=_te(e)?o$:Qo;return function(){var o=s(this,i),a=o.on;a!==r&&(n=(r=a).copy()).on(e,t),o.on=n}}function vte(i,e){var t=this._id;return arguments.length<2?So(this.node(),t).on.on(i):this.each(yte(t,i,e))}function bte(i){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==i)return;e&&e.removeChild(this)}}function xte(){return this.on("end.remove",bte(this._id))}function wte(i){var e=this._name,t=this._id;typeof i!="function"&&(i=t$(i));for(var r=this._groups,n=r.length,s=new Array(n),o=0;o<n;++o)for(var a=r[o],l=a.length,c=s[o]=new Array(l),u,h,d=0;d<l;++d)(u=a[d])&&(h=i.call(u,u.__data__,d,a))&&("__data__"in u&&(h.__data__=u.__data__),c[d]=h,EM(c[d],e,t,d,c,So(u,t)));return new ul(s,this._parents,e,t)}function Mte(i){var e=this._name,t=this._id;typeof i!="function"&&(i=ZF(i));for(var r=this._groups,n=r.length,s=[],o=[],a=0;a<n;++a)for(var l=r[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var d=i.call(u,u.__data__,h,l),f,g=So(u,t),v=0,m=d.length;v<m;++v)(f=d[v])&&EM(f,e,t,v,d,g);s.push(d),o.push(u)}return new ul(s,o,e,t)}var Ste=Ey.prototype.constructor;function Tte(){return new Ste(this._groups,this._parents)}function Ete(i,e){var t,r,n;return function(){var s=Qf(this,i),o=(this.style.removeProperty(i),Qf(this,i));return s===o?null:s===t&&o===r?n:n=e(t=s,r=o)}}function bB(i){return function(){this.style.removeProperty(i)}}function Ate(i,e,t){var r,n=t+"",s;return function(){var o=Qf(this,i);return o===n?null:o===r?s:s=e(r=o,t)}}function kte(i,e,t){var r,n,s;return function(){var o=Qf(this,i),a=t(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(i),Qf(this,i))),o===l?null:o===r&&l===n?s:(n=l,s=e(r=o,a))}}function Cte(i,e){var t,r,n,s="style."+e,o="end."+s,a;return function(){var l=Qo(this,i),c=l.on,u=l.value[s]==null?a||(a=bB(e)):void 0;(c!==t||n!==u)&&(r=(t=c).copy()).on(o,n=u),l.on=r}}function $te(i,e,t){var r=(i+="")=="transform"?Pee:vB;return e==null?this.styleTween(i,Ete(i,r)).on("end.style."+i,bB(i)):typeof e=="function"?this.styleTween(i,kte(i,r,a$(this,"style."+i,e))).each(Cte(this._id,i)):this.styleTween(i,Ate(i,r,e),t).on("end.style."+i,null)}function Lte(i,e,t){return function(r){this.style.setProperty(i,e.call(this,r),t)}}function Rte(i,e,t){var r,n;function s(){var o=e.apply(this,arguments);return o!==n&&(r=(n=o)&&Lte(i,o,t)),r}return s._value=e,s}function Pte(i,e,t){var r="style."+(i+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Rte(i,e,t??""))}function Nte(i){return function(){this.textContent=i}}function Ite(i){return function(){var e=i(this);this.textContent=e??""}}function Dte(i){return this.tween("text",typeof i=="function"?Ite(a$(this,"text",i)):Nte(i==null?"":i+""))}function Ote(i){return function(e){this.textContent=i.call(this,e)}}function Ute(i){var e,t;function r(){var n=i.apply(this,arguments);return n!==t&&(e=(t=n)&&Ote(n)),e}return r._value=i,r}function zte(i){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(i==null)return this.tween(e,null);if(typeof i!="function")throw new Error;return this.tween(e,Ute(i))}function Fte(){for(var i=this._name,e=this._id,t=xB(),r=this._groups,n=r.length,s=0;s<n;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=So(l,e);EM(l,i,t,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new ul(r,this._parents,i,t)}function Bte(){var i,e,t=this,r=t._id,n=t.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--n===0&&s()}};t.each(function(){var c=Qo(this,r),u=c.on;u!==i&&(e=(i=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),n===0&&s()})}var Vte=0;function ul(i,e,t,r){this._groups=i,this._parents=e,this._name=t,this._id=r}function xB(){return++Vte}var ba=Ey.prototype;ul.prototype={constructor:ul,select:wte,selectAll:Mte,selectChild:ba.selectChild,selectChildren:ba.selectChildren,filter:mte,merge:gte,selection:Tte,transition:Fte,call:ba.call,nodes:ba.nodes,node:ba.node,size:ba.size,empty:ba.empty,each:ba.each,on:vte,attr:Qee,attrTween:nte,style:$te,styleTween:Pte,text:Dte,textTween:zte,remove:xte,tween:Wee,delay:ate,duration:ute,ease:dte,easeVarying:fte,end:Bte,[Symbol.iterator]:ba[Symbol.iterator]};function jte(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var Hte={time:null,delay:0,duration:250,ease:jte};function Gte(i,e){for(var t;!(t=i.__transition)||!(t=t[e]);)if(!(i=i.parentNode))throw new Error(`transition ${e} not found`);return t}function Wte(i){var e,t;i instanceof ul?(e=i._id,i=i._name):(e=xB(),(t=Hte).time=s$(),i=i==null?null:i+"");for(var r=this._groups,n=r.length,s=0;s<n;++s)for(var o=r[s],a=o.length,l,c=0;c<a;++c)(l=o[c])&&EM(l,i,e,c,o,t||Gte(l,e));return new ul(r,this._parents,i,e)}Ey.prototype.interrupt=jee;Ey.prototype.transition=Wte;function y0(i,e,t){this.k=i,this.x=e,this.y=t}y0.prototype={constructor:y0,scale:function(i){return i===1?this:new y0(this.k*i,this.x,this.y)},translate:function(i,e){return i===0&e===0?this:new y0(this.k,this.x+this.k*i,this.y+this.k*e)},apply:function(i){return[i[0]*this.k+this.x,i[1]*this.k+this.y]},applyX:function(i){return i*this.k+this.x},applyY:function(i){return i*this.k+this.y},invert:function(i){return[(i[0]-this.x)/this.k,(i[1]-this.y)/this.k]},invertX:function(i){return(i-this.x)/this.k},invertY:function(i){return(i-this.y)/this.k},rescaleX:function(i){return i.copy().domain(i.range().map(this.invertX,this).map(i.invert,i))},rescaleY:function(i){return i.copy().domain(i.range().map(this.invertY,this).map(i.invert,i))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};y0.prototype;var qte=Object.defineProperty,ea=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&qte(e,t,n),n};const Xte={dashboard:{topLevel:!1,displayName:"Axis"},properties:{vertical:{type:"Boolean"},ticks:{type:"Number",defaultValue:5},min:{type:"Number",defaultValue:-1},max:{type:"Number",defaultValue:1},unit:{type:"String"}}},wB=class extends ut{constructor(){super(...arguments),this.vertical=!1,this.ticks=5,this.min=-1,this.max=1,this.unit="",this.prevSize=0,this.prevTicks=0,this.prevMin=null,this.prevMax=null}setAxis(e){var t;const r=this.vertical?this.clientHeight:this.clientWidth,n=r/Math.max(1,this.ticks-1),s=30,{min:o,max:a}=this;let l=-1/0,c=-1/0;if(this.prevSize===r&&this.prevTicks===this.ticks&&this.prevMin===o&&this.prevMax===a&&!e.has("unit")&&!e.has("vertical"))return;this.prevSize=r,this.prevTicks=this.ticks,this.prevMin=o,this.prevMax=a,this.svg.innerHTML="";const u=jr(this.svg).attr("width",this.vertical?s:r).attr("height",this.vertical?r:s);for(let h=0;h<this.ticks;h+=1){if(this.vertical?u.append("line").attr("x1",0).attr("y1",h*n).attr("x2",8).attr("y2",h*n):u.append("line").attr("x1",h*n).attr("y1",0).attr("x2",h*n).attr("y2",8),this.vertical){const d=o+h*(a-o)/Math.max(this.ticks-1,1);u.append("text").attr("x",-3).attr("y",h*n+4).attr("text-anchor","end").text(d.toFixed(2)+(this.unit?` ${this.unit}`:""))}else{const d=(h-l)*n,f=l*n+d*.4;if(c<0||f>c){const g=o+h*(a-o)/Math.max(this.ticks-1,1),v=u.append("text").attr("x",h*n).attr("y",25).attr("text-anchor","middle").text(g.toFixed(2)+(this.unit?` ${this.unit}`:""));c=h*n+(((t=v.node())==null?void 0:t.getBBox().width)??0)/2,l=h}}if(h<this.ticks-1)for(let d=1;d<4;d+=1)this.vertical?u.append("line").attr("x1",4).attr("y1",h*n+d*n/4).attr("x2",8).attr("y2",h*n+d*n/4):u.append("line").attr("x1",h*n+d*n/4).attr("y1",0).attr("x2",h*n+d*n/4).attr("y2",4)}}firstUpdated(){new ResizeObserver(()=>{this.requestUpdate()}).observe(this)}updated(e){this.setAxis(e)}render(){return Ye` <svg id="svg"></svg> `}};wB.styles=$t`
    :host {
      display: inline-block;
      position: relative;
    }

    :host([vertical]) {
      height: 100%;
    }

    :host(:not([vertical])) {
      width: 100%;
    }

    svg {
      overflow: visible;
      position: absolute;
      top: 0;
      left: 0;
    }

    line {
      stroke: rgb(150, 150, 150);
      stroke-width: 2;
    }

    text {
      font-weight: normal;
      font-size: 13px;
      fill: var(--frc-axis-text-color, #000);
    }
  `;let To=wB;ea([q({type:Boolean})],To.prototype,"vertical");ea([q({type:Number})],To.prototype,"ticks");ea([q({type:Number})],To.prototype,"min");ea([q({type:Number})],To.prototype,"max");ea([q({type:String})],To.prototype,"unit");ea([zi()],To.prototype,"prevSize");ea([zi()],To.prototype,"prevTicks");ea([zi()],To.prototype,"prevMin");ea([zi()],To.prototype,"prevMax");ea([ni("#svg")],To.prototype,"svg");customElements.get("frc-axis")||customElements.define("frc-axis",To);var Yte=Object.defineProperty,Kte=Object.getOwnPropertyDescriptor,$m=(i,e,t,r)=>{for(var n=r>1?void 0:r?Kte(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=(r?o(e,t,n):o(n))||n);return r&&n&&Yte(e,t,n),n};const Zte={dashboard:{topLevel:!1,displayName:"Bar"},properties:{value:{type:"Number"},min:{type:"Number",defaultValue:-1},max:{type:"Number",defaultValue:1},center:{type:"Number"}}};function bN(i,e,t){return Math.min(t,Math.max(i,e))}const MB=class extends ut{constructor(){super(...arguments),this._min=-1,this._max=1,this.value=0,this.center=0,this.dragging=!1}get min(){return Math.min(this._min,this._max)}set min(e){const t=this._min;this._min=e,this.requestUpdate("min",t)}get max(){return Math.max(this._min,this._max)}set max(e){const t=this._max;this._max=e,this.requestUpdate("max",t)}updateForeground(){const{min:e,max:t,center:r,value:n,foreground:s}=this,o=bN(n,e,t);t<r?(s.style.setProperty("--foreground-width",`${Math.abs(o-t)/(t-e)*100}%`),s.style.setProperty("--foreground-left","auto"),s.style.setProperty("--foreground-right","0")):e>r?(s.style.setProperty("--foreground-width",`${Math.abs(o-e)/(t-e)*100}%`),s.style.setProperty("--foreground-left","0"),s.style.setProperty("--foreground-right","auto")):o>r?(s.style.setProperty("--foreground-width",`${Math.abs(o-r)/(t-e)*100}%`),s.style.setProperty("--foreground-left",`${Math.abs(e-r)/(t-e)*100}%`),s.style.setProperty("--foreground-right","auto")):(s.style.setProperty("--foreground-width",`${Math.abs(o-r)/(t-e)*100}%`),s.style.setProperty("--foreground-left","auto"),s.style.setProperty("--foreground-right",`${Math.abs(t-r)/(t-e)*100}%`))}resized(){this.updateForeground()}updated(){this.updateForeground()}setDragPosition(e){const{left:t,width:r}=this.getBoundingClientRect(),n=e.clientX-t,s=bN(n/r,0,1),o=this.min+(this.max-this.min)*s,a=new CustomEvent("barDrag",{bubbles:!0,composed:!0,detail:{value:o}});this.dispatchEvent(a)}firstUpdated(){this.setAttribute("draggable","false"),window.addEventListener("mousemove",e=>{this.dragging&&this.setDragPosition(e)}),window.addEventListener("mouseup",()=>{this.dragging=!1})}onMouseDown(e){this.dragging=!0,this.setDragPosition(e)}render(){return Ye`
      <div part="foreground" draggble="false"></div>
      <div class="content" draggable="false">
        <slot></slot>
      </div>
      <div part="dragger" @mousedown="${this.onMouseDown}"></div>
    `}};MB.styles=$t`
    :host {
      display: inline-block;
      position: relative;
      width: 300px;
      height: 20px;
      background: var(--frc-bar-background, #ddd);
      color: var(--frc-bar-color, black);
      font-size: 15px;
      line-height: 18px;
      text-align: center;
    }

    [part='dragger'] {
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    }

    [part='foreground'] {
      position: absolute;
      top: 0;
      height: 100%;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
      width: var(--foreground-width);
      left: var(--foreground-left);
      right: var(--foreground-right);
      pointer-events: none;
    }

    .content {
      position: relative;
    }
  `;let Yh=MB;$m([q({type:Number})],Yh.prototype,"value",2);$m([q({type:Number})],Yh.prototype,"center",2);$m([zi()],Yh.prototype,"dragging",2);$m([q({type:Number})],Yh.prototype,"min",1);$m([q({type:Number})],Yh.prototype,"max",1);$m([ni("[part=foreground]")],Yh.prototype,"foreground",2);customElements.get("frc-bar")||customElements.define("frc-bar",Yh);function y2(i){return i*180/Math.PI}function Jte(i,e,t,r){return`<line x1="${i}" y1="${e}" x2="${t}" y2="${r}" />`}function SB(i,e,t){return`<polygon 
            points="${i.x},${i.y} ${e.x},${e.y} ${t.x},${t.y}" />`}function xN(i,e,t,r){const n=r*Math.PI/180;return{x:i+t*Math.cos(n),y:e-t*Math.sin(n)}}function Qte(i,e,t,r,n){const s=xN(i,e,t,n),o=xN(i,e,t,r),a=n-r<=180?"0":"1",l=n>r?1:0;return["M",s.x,s.y,"A",t,t,0,a,l,o.x,o.y].join(" ")}function eie(i,e,t,r,n){return`<path d="${Qte(i,e,t,r,n)}"/>`}function tie(i,e,t,r){const n=e/2,s=Math.cos(i),o=Math.sin(i),a=Math.cos(i+Math.PI/2)*n,l=Math.sin(i+Math.PI/2)*n,c={x:s*r-a+t,y:o*r-l},u={x:s*r+a+t,y:o*r+l},h={x:s*(e+r)+t,y:o*(e+r)};return SB(c,u,h)}function l$(i,e,t,r){const n=Math.cos(e)*i,s=Math.sin(e)*i,o=Jte(t,0,n+t,s),a=tie(e,r,t,i);return o+a}function iie(i,e,t,r){const n=t/e,s=y2(n);return eie(r,0,e,y2(i),y2(i)-s)}function rie(i,e,t,r,n){const s=e/2,o=n/t-i,a=Math.sqrt(e*e+t*t),l=(n+e*Math.sign(n))/t-i,c=Math.cos(o),u=Math.sin(o),h={x:(t+s)*c+r,y:(t+s)*u},d={x:(t-s)*c+r,y:(t-s)*u},f={x:a*Math.cos(l)+r,y:a*Math.sin(l)};return SB(h,f,d)}function TB(i,e,t,r,n){if(e<0)throw new Error(`Radius cannot be negative. Given: ${e}`);return e===1/0?l$(t,i,r,n):iie(i,e,t,r)+rie(i,n,e,r,t)}function Ew(i,e,t,r,n){return TB(i,e,e*t,r,n)}var nie=Object.defineProperty,EB=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&nie(e,t,n),n};const sie={dashboard:{displayName:"Differential Drivebase"},properties:{leftMotorSpeed:{type:"Number",attribute:"left-motor-speed"},rightMotorSpeed:{type:"Number",attribute:"right-motor-speed"}}};function v2(i,e,t){return Math.min(t,Math.max(i,e))}function oie(i,e,t,r,n){return(i-e)*(n-r)/(t-e)+r}function aie(i){const e=i/2,t=`
    <line 
      x1="${-e}"
      y1="${-e}"
      x2="${e}"
      y2="${e}"
    />
  `,r=`
    <line 
      x1="${-e}"
      y1="${e}"
      x2="${e}"
      y2="${-e}"
    />
  `;return`<g class="x">${t} ${r}</g>`}const AB=class extends ut{constructor(){super(),this.leftMotorSpeed=0,this.rightMotorSpeed=0,new ResizeObserver(()=>{this.resized()}).observe(this)}get clampedLeftMotorSpeed(){return v2(this.leftMotorSpeed,-1,1)}get clampedRightMotorSpeed(){return v2(this.rightMotorSpeed,-1,1)}drawMotionVector(e,t){const r=this.renderRoot.querySelector("#svg").getBoundingClientRect(),n=r.width*.13,s=20,o=20,a=r.width-(n+s)*2,l=r.height-o*2;if(Math.abs(e)<=.05&&Math.abs(t)<=.05)return aie(r.width*.2);const c=Math.min(a,l)/2-8,u=8;if(Math.abs(e-t)<=.001)return`<g class="arrow">${l$(Math.abs(e*c),-Math.sign(e)*Math.PI/2,0,u)}</g>`;const h=Math.PI,d=(t-e)/2,f=(e+t)/2,g=f/d;let v;if(Math.abs(g)>=1){const m=-Math.sign(g),p=(m+1)*h/2,y=Math.abs(g*c);v=TB(p,y,m*f*c,m*y,u)}else{const m=Math.sign(e-t);if(g===0){const p=Math.max(e,t)*c,y=m*h,_=d<0?h:0;v=Ew(_,p,y,0,u)}else{const p=g<0?e:t,y=g<0?t:e,_=Math.abs(p)*c,x=-g*_,w=oie(y/p,0,-1,.5,h),S=g<0?h:0;v=Ew(S,_,m*w,x,u)}}return`<g class="arrow">${v}</g>`}drawDrivetrain(){const e=this.renderRoot.querySelector("#svg").getBoundingClientRect(),t=e.width*.13,r=Math.min(e.width*.13,e.height*.15),n=20,s=20,o=`
      <rect 
        width="calc(100% - ${(t+n)*2}px)" 
        height="calc(100% - ${s*2}px)"
        x="${t+n}" 
        y="20px" 
      />
    `,a=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="${n}px" 
        y="${s}px" 
      />
    `,l=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="calc(100% - ${t+n}px)" 
        y="${s}px" 
      />
    `,c=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="${n}px"
        y="calc(100% - ${r*2+s}px)"
      />
    `,u=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="calc(100% - ${t+n}px)" 
        y="calc(100% - ${r*2+s}px)"
      />
    `;return o+a+l+c+u}getLeftForegroundStyle(){return this.getForegroundStyle(this.clampedLeftMotorSpeed)}getRightForegroundStyle(){return this.getForegroundStyle(this.clampedRightMotorSpeed)}getForegroundStyle(e){const t=v2(e,-1,1);return t>0?`
        height: ${Math.abs(t)/2*100}%;
        top: auto;
        bottom: 50%;
      `:`
        height: ${Math.abs(t)/2*100}%;
        top: 50%;
        bottom: auto;
      `}firstUpdated(){const e=this.drawMotionVector(0,0);this.renderRoot.querySelector("#drivetrain").innerHTML=this.drawDrivetrain(),this.renderRoot.querySelector("#forceVector").innerHTML=e}resized(){const e=this.drawMotionVector(this.clampedLeftMotorSpeed,this.clampedRightMotorSpeed);this.renderRoot.querySelector("#forceVector").innerHTML=e;const t=this.renderRoot.querySelector("#svg").getBoundingClientRect();this.renderRoot.querySelector("#forceVector").style.transform=`translate(${t.width*.5}px, ${t.height*.5}px)`,this.renderRoot.querySelector("#drivetrain").innerHTML=this.drawDrivetrain()}updated(){const e=this.drawMotionVector(this.clampedLeftMotorSpeed,this.clampedRightMotorSpeed);this.renderRoot.querySelector("#forceVector").innerHTML=e}render(){return Ye`
      <div class="diff-drive-container">
        <div class="speed">
          <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
          <div class="bar">
            <div
              class="foreground"
              style="${this.getLeftForegroundStyle()}"
            ></div>
          </div>
        </div>
        <svg id="svg">
          <g id="forceVector"></g>
          <g id="drivetrain" class="drivetrain"></g>
        </svg>
        <div class="speed">
          <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
          <div class="bar">
            <div
              class="foreground"
              style="${this.getRightForegroundStyle()}"
            ></div>
          </div>
        </div>
      </div>
    `}};AB.styles=$t`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
      padding: 0 10px;
      font-family: sans-serif;
    }

    .diff-drive-container {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
    }

    svg {
      overflow: overlay;
      flex: 1;
      height: 100%;
    }

    svg .x {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
    }

    svg .arrow line,
    svg .arrow path {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
      fill: none;
    }

    svg .arrow polygon {
      stroke: rgb(50, 50, 255);
      fill: rgb(50, 50, 255);
    }

    svg .drivetrain {
      fill: none;
      stroke: var(--frc-differential-drivebase-drivetrain-color, #000);
    }

    .bar {
      position: relative;
      height: calc(100% - 30px);
      width: 20px;
      border-radius: 3px;
      margin: 15px 0;
      background: var(--frc-bar-background, #ddd);
    }

    .speed {
      display: flex;
      height: 100%;
      flex-direction: row;
      align-items: center;
      margin-left: 30px;
    }

    frc-axis {
      width: 10px;
      height: calc(100% - 35px);
    }

    .foreground {
      position: absolute;
      top: 0;
      width: 20px;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
    }
  `;let c$=AB;EB([q({type:Number,attribute:"left-motor-speed"})],c$.prototype,"leftMotorSpeed");EB([q({type:Number,attribute:"right-motor-speed"})],c$.prototype,"rightMotorSpeed");customElements.get("frc-differential-drivebase")||customElements.define("frc-differential-drivebase",c$);var lie=Object.defineProperty,AM=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&lie(e,t,n),n};const cie={dashboard:{displayName:"Mecanum Drivebase"},properties:{frontLeftMotorSpeed:{type:"Number",attribute:"front-left-motor-speed"},frontRightMotorSpeed:{type:"Number",attribute:"front-right-motor-speed"},rearLeftMotorSpeed:{type:"Number",attribute:"rear-left-motor-speed"},rearRightMotorSpeed:{type:"Number",attribute:"rear-right-motor-speed"}}};function uie(i){const e=i/2,t=`
    <line 
      x1="${-e}"
      y1="${-e}"
      x2="${e}"
      y2="${e}"
    />
  `,r=`
    <line 
      x1="${-e}"
      y1="${e}"
      x2="${e}"
      y2="${-e}"
    />
  `;return`<g class="x">${t} ${r}</g>`}function Ua(i){return Math.min(1,Math.max(i,-1))}function Hv(i){const e=Ua(i);return e>0?`
      height: ${Math.abs(e)/2*100}%;
      top: auto;
      bottom: 50%;
    `:`
    height: ${Math.abs(e)/2*100}%;
    top: 50%;
    bottom: auto;
  `}const kB=class extends ut{constructor(){super(),this.frontLeftMotorSpeed=0,this.frontRightMotorSpeed=0,this.rearLeftMotorSpeed=0,this.rearRightMotorSpeed=0,new ResizeObserver(()=>{this.resized()}).observe(this)}drawMotionVector(e,t,r,n){const s=this.renderRoot.querySelector("#svg").getBoundingClientRect(),o=s.width*.13,a=20,l=20,c=s.width-(o+a)*2,u=s.height-l*2,h=Math.min(c,u)/2-16,d={x:(e-t-r+n)/4,y:(e+t+r+n)/4},f=(-e+t-r+n)/4,g=Math.hypot(d.x,d.y),v=Math.atan2(d.y,d.x);if(Math.abs(f)<=.01&&g<=.01)return uie(s.width*.2);let m="",p="",y="";return Math.abs(f)>.01&&(m=Ew(0,h,-f*Math.PI,0,8),p=Ew(Math.PI,h,-f*Math.PI,0,8)),g>.01&&(y=l$(g*h,-v,0,8)),`<g class="arrow">${m} ${p} ${y}</g>`}drawDrivetrain(){const e=this.renderRoot.querySelector("#svg").getBoundingClientRect(),t=e.width*.13,r=Math.min(e.width*.13,e.height*.15),n=20,s=20,o=`
      <rect 
        width="calc(100% - ${(t+n)*2}px)" 
        height="calc(100% - ${s*2}px)"
        x="${t+n}" 
        y="20px" 
      />
    `,a=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="${n}px" 
        y="${s}px" 
      />
    `,l=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="calc(100% - ${t+n}px)" 
        y="${s}px" 
      />
    `,c=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="${n}px"
        y="calc(100% - ${r*2+s}px)"
      />
    `,u=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="calc(100% - ${t+n}px)" 
        y="calc(100% - ${r*2+s}px)"
      />
    `;return o+a+l+c+u}getFlForegroundStyle(){return Hv(this.frontLeftMotorSpeed)}getFrForegroundStyle(){return Hv(this.frontRightMotorSpeed)}getRlForegroundStyle(){return Hv(this.rearLeftMotorSpeed)}getRrForegroundStyle(){return Hv(this.rearRightMotorSpeed)}firstUpdated(){const e=this.drawMotionVector(0,0,0,0);this.renderRoot.querySelector("#drivetrain").innerHTML=this.drawDrivetrain(),this.renderRoot.querySelector("#forceVector").innerHTML=e}resized(){const e=this.drawMotionVector(Ua(this.frontLeftMotorSpeed),Ua(this.frontRightMotorSpeed),Ua(this.rearLeftMotorSpeed),Ua(this.rearRightMotorSpeed));this.renderRoot.querySelector("#forceVector").innerHTML=e;const t=this.renderRoot.querySelector("#svg").getBoundingClientRect();this.renderRoot.querySelector("#forceVector").style.transform=`translate(${t.width*.5}px, ${t.height*.5}px)`,this.renderRoot.querySelector("#drivetrain").innerHTML=this.drawDrivetrain()}updated(e){super.updated(e);const t=this.drawMotionVector(Ua(this.frontLeftMotorSpeed),Ua(this.frontRightMotorSpeed),Ua(this.rearLeftMotorSpeed),Ua(this.rearRightMotorSpeed));this.renderRoot.querySelector("#forceVector").innerHTML=t}render(){return Ye`
      <div class="diff-drive-container">
        <div class="speed-pair">
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getFlForegroundStyle()}"
              ></div>
            </div>
          </div>
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getRlForegroundStyle()}"
              ></div>
            </div>
          </div>
        </div>
        <svg id="svg">
          <g id="forceVector"></g>
          <g id="drivetrain" class="drivetrain"></g>
        </svg>
        <div class="speed-pair">
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getFrForegroundStyle()}"
              ></div>
            </div>
          </div>
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getRrForegroundStyle()}"
              ></div>
            </div>
          </div>
        </div>
      </div>
    `}};kB.styles=$t`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
      padding: 0 10px;
      font-family: sans-serif;
    }

    .diff-drive-container {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
    }

    svg {
      overflow: overlay;
      flex: 1;
      height: 100%;
    }

    svg .x {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
    }

    svg .arrow line,
    svg .arrow path {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
      fill: none;
    }

    svg .arrow polygon {
      stroke: rgb(50, 50, 255);
      fill: rgb(50, 50, 255);
    }

    svg .drivetrain {
      fill: none;
      stroke: var(--frc-mecanum-drivebase-drivetrain-color, #000);
    }

    .bar {
      position: relative;
      height: calc(100% - 30px);
      width: 20px;
      border-radius: 3px;
      margin: 15px 0;
      background: var(--frc-bar-background, #ddd);
    }

    .speed-pair {
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-around;
    }

    .speed {
      display: flex;
      height: 48%;
      flex-direction: row;
      align-items: center;
      margin-left: 30px;
    }

    frc-axis {
      width: 10px;
      height: calc(100% - 35px);
    }

    .foreground {
      position: absolute;
      top: 0;
      width: 20px;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
    }
  `;let ky=kB;AM([q({type:Number,attribute:"front-left-motor-speed"})],ky.prototype,"frontLeftMotorSpeed");AM([q({type:Number,attribute:"front-right-motor-speed"})],ky.prototype,"frontRightMotorSpeed");AM([q({type:Number,attribute:"rear-left-motor-speed"})],ky.prototype,"rearLeftMotorSpeed");AM([q({type:Number,attribute:"rear-right-motor-speed"})],ky.prototype,"rearRightMotorSpeed");customElements.get("frc-mecanum-drivebase")||customElements.define("frc-mecanum-drivebase",ky);var hie=Object.defineProperty,ts=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&hie(e,t,n),n};const die={dashboard:{displayName:"Swerve Drivebase"},properties:{moduleCount:{type:"Number",defaultValue:4,description:"The number of swerve modules"},wheelLocations:{type:"Array",defaultValue:[1,-1,1,1,-1,-1,-1,1],description:"An array of numbers describing the location of the swerve module wheels relative to the physical center of the robot"},measuredStates:{type:"Array",defaultValue:[0,0,0,0,0,0,0,0],description:"An array of rotation and velocity values describing the measured state of each swerve module"},desiredStates:{type:"Array",defaultValue:[0,0,0,0,0,0,0,0],description:"An array of rotation and velocity values describing the desired state of each swerve module"},robotRotation:{type:"Number",description:"The robot's current rotation based on odometry or gyro readings"},maxSpeed:{type:"Number",defaultValue:1,description:"The maximum achievable speed of the modules, used to adjust the size of the vectors."},rotationUnit:{type:"String",defaultValue:"radians",description:"The units of the module rotations and robot rotation",input:{type:"StringDropdown",allowCustomValues:!1,getOptions(){return["radians","degrees"]}}},sizeLeftRight:{type:"Number",defaultValue:2,description:"The distance between the left and right modules."},sizeFrontBack:{type:"Number",defaultValue:2,description:"The distance between the front and back modules."}}};function b2(i,...e){return e.some(t=>i.has(t))}function CB(i){return i*Math.PI/180}function x2(i){return i*180/Math.PI}function pie(i,e,t){return Math.max(Math.min(i,t),e)}function wN(i,e=!1){const t=CB(-(i-90));return[e?-Math.cos(t):Math.cos(t),Math.sin(t)]}const Mu=35,$B=class extends ut{constructor(){super(...arguments),this.moduleCount=4,this.wheelLocations=[2.5,2,2.5,-2,-2.5,2,-2.5,-2],this.measuredStates=[0,0,0,0,0,0,0,0],this.desiredStates=[0,0,0,0,0,0,0,0],this.robotRotation=0,this.maxSpeed=1,this.rotationUnit="radians",this.sizeLeftRight=4,this.sizeFrontBack=5,this.normalizedRotation=0}drawBase(){const[e,t]=this.getBaseSize();jr(this._base).attr("width",e).attr("height",t).attr("stroke-width",5).attr("fill","none")}setSwerveRotation(){jr(this._swerve).attr("transform",`rotate(${-this.normalizedRotation})`)}setSwerveOrigin(){const[e,t]=this.getBaseSize();jr(this._swerve).attr("transform-origin",`${e/2} ${t/2}`)}getRobotRotationRad(){const e=this.robotRotation;return this.rotationUnit==="radians"?e:CB(e)}getSvgSize(){const{width:e}=this.getBoundingClientRect();return[e,e*this.sizeFrontBack/this.sizeLeftRight]}getBaseSize(){const[e]=this.getSvgSize();return[e,e*this.sizeFrontBack/this.sizeLeftRight]}updated(e){if(e.has("robotRotation")){const t=this.robotRotation??0,r=(e.get("robotRotation")??t)-t,n=this.rotationUnit==="degrees"?r:x2(r),s=[n-720,n-360,n,n+360,n+720];let o=0,a=Math.abs(s[0]);for(let l=1;l<s.length;l+=1){const c=Math.abs(s[l]);c<a&&(o=l,a=c)}this.normalizedRotation-=s[o]}b2(e,"sizeLeftRight","sizeFrontBack","robotRotation","rotationUnit")&&this.drawBase(),b2(e,"robotRotation","rotationUnit")&&this.setSwerveRotation(),b2(e,"sizeLeftRight","sizeFrontBack")&&this.setSwerveOrigin()}resized(){const[e,t]=this.getSvgSize();jr(this._svg).attr("width",e).attr("height",t),this.drawBase(),this.setSwerveOrigin(),this.requestUpdate()}firstUpdated(){new ResizeObserver(()=>{this.resized()}).observe(this),this.resized()}getSwerveModules(){const e=[];for(let t=0;t<this.moduleCount;t+=1){const r={location:[this.wheelLocations[t*2],this.wheelLocations[t*2+1]],desiredRotation:this.desiredStates[t*2],desiredVelocity:this.desiredStates[t*2+1],measuredRotation:this.measuredStates[t*2],measuredVelocity:this.measuredStates[t*2+1]};e.push(r)}return e}renderModuleDirectionIndicator(e,t,r){const n=this.rotationUnit==="degrees"?t:x2(t),[s,o]=wN(n-15,!0),[a,l]=wN(n+15,!0),c=`M ${-s*60},${o*60} L 0,0 ${-a*60},${l*60}`;return xi`
      <defs>
        <clipPath id=${e}>
          <path d=${c} fill="white" stroke="5" stroke="white" />
        </clipPath>
      </defs>
      <circle r=${Mu-2.5} fill=${r} stroke-width="0" clip-path=${`url(#${e})`}></circle>
    `}renderModuleVelocityIndicator(e,t,r,n){const s=this.rotationUnit==="degrees"?t:x2(t);let o=pie(100*r/this.maxSpeed,-100,100);o+=Mu*Math.sign(o),o*=-1;const a=Math.abs(o)-20,l=Math.abs(o),c=`M -17.5,${a} L 2.5,${l} L 22.5,${a}`,u=`rotate(${-s+(o<0?180:0)})`,h=`${e}-velocity`;return xi`
     <defs>
        <mask id=${h}>
          <circle r="300" fill="white" ></circle>
          <circle r=${Mu+2.5} fill="black" ></circle>
        </mask>
      </defs>
      <g class="velocity-indicator" transform=${u} mask="url(#${h})">
        <rect width="5" height=${Math.abs(o)} fill=${n}></rect>
        <path d=${c} stroke=${n} stroke-width="5" fill="none" />
      </g>
    `}renderModules(){const e=this.getSwerveModules(),[t,r]=this.getBaseSize();return xi`
      <g class="modules">
        ${e.map((n,s)=>{const{desiredRotation:o,measuredRotation:a,location:l,measuredVelocity:c,desiredVelocity:u}=n,h=r/2*(1-l[0])+Mu*Math.sign(l[0]),d=t/2*(l[1]+1)-Mu*Math.sign(l[1]),f=`module-${s}-measured-clip`,g=`module-${s}-desired-clip`;return xi`
            <g transform=${`translate(${d}, ${h})`}>
              <circle class="module-circle" r=${Mu} stroke-width="5" fill="none"></circle>
              ${this.renderModuleDirectionIndicator(f,a,"blue")}
              ${this.renderModuleDirectionIndicator(g,o,"red")}
              ${this.renderModuleVelocityIndicator(f,a,c,"blue")}
              ${this.renderModuleVelocityIndicator(g,o,u,"red")}
            </g>
          `})} 
      </g>
    `}renderWheelMask(){const e=this.getSwerveModules(),[t,r]=this.getBaseSize();return xi`
      <defs>
        <mask id="wheel-mask">
          <rect fill="white" width=${t} height=${r} stroke-width="5" stroke="white"></rect>
          ${e.map(n=>{const s=r/2-r*n.location[0]/this.sizeFrontBack,o=t/2-t*n.location[1]/this.sizeLeftRight;return xi`
              <circle r="50" fill="black" transform=${`translate(${o}, ${s})`}></circle>
            `})}
        </mask>
      </defs>
    `}renderArrow(){const[e,t]=this.getBaseSize(),r=`M ${e/2-30},100 L ${e/2},70 L ${e/2+30},100`;return xi`
      <line class="arrow" x1=${e/2} y1=${70} x2=${e/2} y2=${t-30} stroke-width="5" />
      <path class="arrow" d=${r} stroke-width="5" fill="none" />
    `}render(){return Ye`
      <div>
        ${xi`
          <svg>
            ${this.renderWheelMask()}
            <g class="swerve">
              <rect class="base" rx=${Mu}></rect>
              ${this.renderModules()}
              ${this.renderArrow()}
            </g>
          </svg>
      `}
      </div>
    `}};$B.styles=$t`
    :host {
      display: inline-block;
      width: 300px;
      height: auto;
      overflow: visible;
    }

    svg {
      width: 100%;
      overflow: visible;
    }

    .base {
      stroke: var(--frc-swerve-drive-color, black);
    }

    .arrow {
      stroke: var(--frc-swerve-drive-color, black);
    }

    .module-circle {
      stroke: var(--frc-swerve-drive-color, black);
    }
  `;let wn=$B;ts([q({type:Number,attribute:"module-count"})],wn.prototype,"moduleCount");ts([q({type:Array,attribute:"wheel-locations"})],wn.prototype,"wheelLocations");ts([q({type:Array,attribute:"measured-states"})],wn.prototype,"measuredStates");ts([q({type:Array,attribute:"desired-states"})],wn.prototype,"desiredStates");ts([q({type:Number,attribute:"robot-rotation"})],wn.prototype,"robotRotation");ts([q({type:Number,attribute:"max-speed"})],wn.prototype,"maxSpeed");ts([q({type:String,attribute:"rotation-unit"})],wn.prototype,"rotationUnit");ts([q({type:Number,attribute:"size-left-right"})],wn.prototype,"sizeLeftRight");ts([q({type:Number,attribute:"size-front-back"})],wn.prototype,"sizeFrontBack");ts([ni("svg")],wn.prototype,"_svg");ts([ni(".swerve")],wn.prototype,"_swerve");ts([ni(".base")],wn.prototype,"_base");ts([ni(".modules")],wn.prototype,"_modules");customElements.get("frc-swerve-drivebase")||customElements.define("frc-swerve-drivebase",wn);const oy="m",th={km:1e3,m:1,cm:.01,mm:.001,mi:1609.34,yd:.9144,ft:.3048,in:.0254},MN={km:"km",m:"m",meters:"m",cm:"cm",centimeters:"cm",mm:"mm",mi:"mi",miles:"mi",yd:"yd",yards:"yards",ft:"ft",feet:"ft",foot:"ft",in:"in",inches:"in"},Mr=(i,e,t)=>(e=MN[e],t=MN[t],typeof th[e]>"u"&&(e=oy),typeof th[t]>"u"&&(t=oy),i*th[e]/th[t]);var Gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function LB(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function RB(i,e){const t=[];for(let r=0;r<i.length/e;r+=1)t.push(i.slice(e*r,e*(r+1)));return t}function fie(i){const e=new ArrayBuffer(8),t=new DataView(e);return i.forEach((r,n)=>{t.setUint8(n,r)}),t.getFloat64(0)}function mie(i){return RB(i,8).map(fie)}function Aw(i,e=3){const t=i instanceof Uint8Array?mie(i):i;return RB(t,e)}var w2,SN;function gie(){if(SN)return w2;SN=1;var i="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof Gv=="object"&&Gv&&Gv.Object===Object&&Gv,c=typeof self=="object"&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),h=Object.prototype,d=h.toString,f=Math.max,g=Math.min,v=function(){return u.Date.now()};function m(S,A,k){var M,b,P,N,D,U,G=0,B=!1,Q=!1,j=!0;if(typeof S!="function")throw new TypeError(i);A=w(A)||0,y(k)&&(B=!!k.leading,Q="maxWait"in k,P=Q?f(w(k.maxWait)||0,A):P,j="trailing"in k?!!k.trailing:j);function X(_e){var ee=M,te=b;return M=b=void 0,G=_e,N=S.apply(te,ee),N}function ne(_e){return G=_e,D=setTimeout(V,A),B?X(_e):N}function ge(_e){var ee=_e-U,te=_e-G,be=A-ee;return Q?g(be,P-te):be}function pe(_e){var ee=_e-U,te=_e-G;return U===void 0||ee>=A||ee<0||Q&&te>=P}function V(){var _e=v();if(pe(_e))return Y(_e);D=setTimeout(V,ge(_e))}function Y(_e){return D=void 0,j&&M?X(_e):(M=b=void 0,N)}function ae(){D!==void 0&&clearTimeout(D),G=0,M=U=b=D=void 0}function J(){return D===void 0?N:Y(v())}function z(){var _e=v(),ee=pe(_e);if(M=arguments,b=this,U=_e,ee){if(D===void 0)return ne(U);if(Q)return D=setTimeout(V,A),X(U)}return D===void 0&&(D=setTimeout(V,A)),N}return z.cancel=ae,z.flush=J,z}function p(S,A,k){var M=!0,b=!0;if(typeof S!="function")throw new TypeError(i);return y(k)&&(M="leading"in k?!!k.leading:M,b="trailing"in k?!!k.trailing:b),m(S,A,{leading:M,maxWait:A,trailing:b})}function y(S){var A=typeof S;return!!S&&(A=="object"||A=="function")}function _(S){return!!S&&typeof S=="object"}function x(S){return typeof S=="symbol"||_(S)&&d.call(S)==t}function w(S){if(typeof S=="number")return S;if(x(S))return e;if(y(S)){var A=typeof S.valueOf=="function"?S.valueOf():S;S=y(A)?A+"":A}if(typeof S!="string")return S===0?S:+S;S=S.replace(r,"");var k=s.test(S);return k||o.test(S)?a(S.slice(2),k?2:8):n.test(S)?e:+S}return w2=p,w2}var _ie=gie();const PB=LB(_ie);var NB=i=>{throw TypeError(i)},u$=(i,e,t)=>e.has(i)||NB("Cannot "+t),Vn=(i,e,t)=>(u$(i,e,"read from private field"),t?t.call(i):e.get(i)),ay=(i,e,t)=>e.has(i)?NB("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),IB=(i,e,t,r)=>(u$(i,e,"write to private field"),r?r.call(i,t):e.set(i,t),t),yie=(i,e,t)=>(u$(i,e,"access private method"),t);const c_=[{game:"Reefscape",image:"./field-images/2025-field.jpg",corners:{topLeft:[421,91],bottomRight:[3352,1437]},size:[57.57291667,26.4167],unit:"foot"},{game:"Crescendo",image:"./field-images/2024-field.jpg",corners:{topLeft:[513,78],bottomRight:[3327,1475]},size:[54.265092,26.31234],unit:"foot"},{game:"Charged Up",image:"./field-images/2023-field.jpg",corners:{topLeft:[46,36],bottomRight:[1088,544]},size:[54.27083,26.2916],unit:"foot"},{game:"Rapid React",image:"./field-images/2022-field.jpg",corners:{topLeft:[74,50],bottomRight:[1774,900]},size:[54,27],unit:"foot"},{game:"Infinite Recharge",image:"./field-images/2020-field.jpg",corners:{topLeft:[96,25],bottomRight:[1040,514]},size:[52.4375,26.9375],unit:"foot"},{game:"Destination: Deep Space",image:"./field-images/2019-field.jpg",corners:{topLeft:[217,40],bottomRight:[1372,615]},size:[54,27],unit:"foot"},{game:"FIRST Power Up",image:"./field-images/2018-field.jpg",corners:{topLeft:[125,20],bottomRight:[827,370]},size:[54,27],unit:"feet"},{game:"Barrel Racing Path",image:"./field-images/2021-barrel.png",corners:{topLeft:[20,20],bottomRight:[780,400]},size:[30,15],unit:"feet"},{game:"Bounce Path",image:"./field-images/2021-bounce.png",corners:{topLeft:[20,20],bottomRight:[780,400]},size:[30,15],unit:"feet"},{game:"Galactic Search A",image:"./field-images/2021-galacticsearcha.png",corners:{topLeft:[20,20],bottomRight:[780,400]},size:[30,15],unit:"feet"},{game:"Galactic Search B",image:"./field-images/2021-galacticsearchb.png",corners:{topLeft:[20,20],bottomRight:[780,400]},size:[30,15],unit:"feet"},{game:"Slalom Path",image:"./field-images/2021-slalom.png",corners:{topLeft:[20,20],bottomRight:[780,400]},size:[30,15],unit:"feet"}];var v0,b0;let M2=class{constructor(){ay(this,v0,{}),ay(this,b0,new Map)}getImage(e){if(typeof Vn(this,v0)[e]>"u"){const t=new Image,r={src:e,width:0,height:0,loaded:!1,image:t};t.onload=()=>{r.loaded=!0,r.width=t.width,r.height=t.height,[...Vn(this,b0).values()].forEach(n=>{n(e)})},Vn(this,v0)[e]=r,t.src=e}return Vn(this,v0)[e]}static getBoundingBoxDims(e,t){const r=Math.abs(e.width*Math.cos(t))+Math.abs(e.height*Math.sin(t)),n=Math.abs(e.width*Math.sin(t))+Math.abs(e.height*Math.cos(t));return{width:r,height:n}}static fitImageInsideBox(e,t){return t.width/e.width*e.height<=t.height?{width:t.width,height:t.width/e.width*e.height}:{width:t.height/e.height*e.width,height:t.height}}onImageLoad(e){const t=Symbol("image");return Vn(this,b0).set(t,e),()=>{Vn(this,b0).delete(t)}}};v0=new WeakMap,b0=new WeakMap;var vie=Object.defineProperty,Vc=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&vie(e,t,n),n};let yl=class extends ut{constructor(){super(...arguments),this.unit="inherit",this.rotationUnit="inherit",this.image="",this.color="#0000ff",this.opacity=1,this.pose=[0,0,0],this.width=.6,this.length=.9}draw({canvas:e,unit:t,rotationUnit:r,xToPx:n,yToPx:s,lengthToPx:o,origin:a}){const l=this.unit==="inherit"||this.unit===null?t:this.unit,c=this.rotationUnit==="inherit"||this.rotationUnit===null?r:this.rotationUnit,[u,h]=this.pose,d=c==="rad"?this.pose[2]:this.pose[2]/(180/Math.PI);e.globalAlpha=Math.max(0,Math.min(1,this.opacity)),e.fillStyle="#222",e.strokeStyle=this.color,e.lineWidth=o(3,"in"),e.translate(n(u,l),s(h,l)),e.rotate(-d+(a==="red"?Math.PI:0)),e.roundRect(-o(this.length/2,l),-o(this.width/2,l),o(this.length,l),o(this.width,l),1),e.fill(),e.stroke(),e.beginPath(),e.fillStyle="white",e.strokeStyle="white",e.lineWidth=o(2,"in"),e.moveTo(-o(this.length*.3,l),0),e.lineTo(o(this.length*.3,l),0),e.moveTo(o(this.length*.1,l),-o(this.width*.25,l)),e.lineTo(o(this.length*.3,l),0),e.lineTo(o(this.length*.1,l),o(this.width*.25,l)),e.stroke()}};Vc([q({type:String})],yl.prototype,"unit");Vc([q({type:String,attribute:"rotation-unit"})],yl.prototype,"rotationUnit");Vc([q({type:String})],yl.prototype,"image");Vc([q({type:String})],yl.prototype,"color");Vc([q({type:Number})],yl.prototype,"opacity");Vc([q({type:Array})],yl.prototype,"pose");Vc([q({type:Number})],yl.prototype,"width");Vc([q({type:Number})],yl.prototype,"length");customElements.get("frc-field-robot")||customElements.define("frc-field-robot",yl);var bie=Object.defineProperty,jc=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&bie(e,t,n),n};let vl=class extends ut{constructor(){super(...arguments),this.poses=[],this.translations=[],this.color="#FFA500",this.unit="inherit",this.lineWidth=4,this.opacity=.7,this._poses=[],this._translations=[]}updated(e){var t;e.has("poses")&&(typeof((t=this.poses)==null?void 0:t[0])=="number"||this.poses instanceof Uint8Array?this._poses=Aw(this.poses):this._poses=this.poses),e.has("translations")&&(this._translations=Aw(this.translations,2))}draw({canvas:e,unit:t,xToPx:r,yToPx:n}){const s=this.unit==="inherit"||this.unit===null?t:this.unit;if(e.lineWidth=this.lineWidth,e.strokeStyle=this.color,e.globalAlpha=this.opacity,this._poses.length>1){for(let o=0;o<this._poses.length-1;o+=1){const[a,l]=this._poses[o],[c,u]=this._poses[o+1];e.moveTo(r(a,s),n(l,s)),e.lineTo(r(c,s),n(u,s))}e.stroke()}if(this._translations.length>1){for(let o=0;o<this._translations.length-1;o+=1){const[a,l]=this._translations[o],[c,u]=this._translations[o+1];e.moveTo(r(a,s),n(l,s)),e.lineTo(r(c,s),n(u,s))}e.stroke()}}};jc([q({type:Array})],vl.prototype,"poses");jc([q({type:Array})],vl.prototype,"translations");jc([q({type:String})],vl.prototype,"color");jc([q({type:String})],vl.prototype,"unit");jc([q({type:Number,attribute:"line-width"})],vl.prototype,"lineWidth");jc([q({type:Number})],vl.prototype,"opacity");jc([zi()],vl.prototype,"_poses");jc([zi()],vl.prototype,"_translations");customElements.get("frc-field-path")||customElements.define("frc-field-path",vl);var xie=Object.defineProperty,Mn=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&xie(e,t,n),n};function wie(i){return i*Math.PI/180}var ec,o3,DB;const OB=class extends ut{constructor(){super(...arguments),ay(this,o3),ay(this,ec),this.game=c_[0].game,this.cropTop=null,this.cropBottom=null,this.cropLeft=null,this.cropRight=null,this.cropType="percent",this.unit=oy,this.rotationUnit="rad",this.rotation=0,this.showGrid=!1,this.gridSize=1,this.origin="blue",IB(this,ec,new M2)}getConfig(){return c_.find(({game:e})=>e===this.game)??c_[0]}getCanvasCtx(){return this.canvas.getContext("2d")}getCropPercent(){if(this.cropType==="percent"){const m=this.cropLeft??0,p=this.cropTop??0,y=this.cropRight??1,_=this.cropBottom??1;return{x1:m,y1:p,x2:y,y2:_}}const{corners:e,image:t,unit:r,size:n}=this.getConfig(),{loaded:s,width:o,height:a}=Vn(this,ec).getImage(t);if(!s)return{x1:0,y1:0,x2:1,y2:1};const l=[this.cropLeft??0,this.cropTop??0],c=[this.cropRight??Mr(n[0],r,this.unit),this.cropBottom??Mr(n[1],r,this.unit)],u=e.topLeft[0]/o,h=e.topLeft[1]/a,d=e.bottomRight[0]/o,f=e.bottomRight[1]/a,g=d-u,v=f-h;return{x1:u+g*Mr(l[0],this.unit,r)/n[0],y1:h+v*Mr(l[1],this.unit,r)/n[1],x2:u+g*Mr(c[0],this.unit,r)/n[0],y2:h+v*Mr(c[1],this.unit,r)/n[1]}}getFieldRectPx(){const{corners:e,image:t}=this.getConfig(),{loaded:r,width:n,height:s}=Vn(this,ec).getImage(t);if(!r)return{x:0,y:0,width:0,height:0};const o=e.topLeft[0]/n,a=e.topLeft[1]/s,l=e.bottomRight[0]/n,c=e.bottomRight[1]/s,u=this.getCropPercent(),h=u.x2-u.x1,d=u.y2-u.y1,f=this.canvas.width/h,g=this.canvas.height/d;return{x:(o-u.x1)*f,y:(a-u.y1)*g,width:(l-o)*f,height:(c-a)*g}}pxToX(e,t=this.unit){const r=this.getFieldRectPx(),{size:n,unit:s}=this.getConfig();if(r.width===0)return 0;const o=r.width/n[0],a=e*(this.canvas.width/this.canvas.clientWidth),l=this.origin!=="red"?(a-r.x)/o:(r.x+r.width-a)/o;return Mr(l,s,t)}xToPx(e,t=this.unit){const r=this.getFieldRectPx(),{size:n,unit:s}=this.getConfig();if(r.width===0)return 0;const o=r.width/n[0],a=Mr(e,t,s);return this.origin!=="red"?r.x+a*o:r.x+r.width-a*o}yToPx(e,t=this.unit){const r=this.getFieldRectPx(),{size:n,unit:s}=this.getConfig();if(r.height===0)return 0;const o=r.height/n[1],a=Mr(e,t,s);return this.origin!=="red"?r.y+r.height-a*o:r.y+a*o}pxToY(e,t=this.unit){const r=this.getFieldRectPx(),{size:n,unit:s}=this.getConfig();if(r.height===0)return 0;const o=r.height/n[1],a=e*(this.canvas.height/this.canvas.clientHeight),l=this.origin!=="red"?(r.y+r.height-a)/o:(a-r.y)/o;return Mr(l,s,t)}lengthToPx(e,t=this.unit){const r=this.getFieldRectPx(),{size:n,unit:s}=this.getConfig();if(r.width===0)return 0;const o=r.width/n[0];return Mr(e,t,s)*o}setContainerSize(){const e={width:this.clientWidth,height:this.clientHeight},t=this.getConfig().image,r=Vn(this,ec).getImage(t),{loaded:n}=r;if(!n)return;const s=this.getCropPercent(),o={width:(s.x2-s.x1)*r.width,height:(s.y2-s.y1)*r.height},a=M2.getBoundingBoxDims(o,wie(this.rotation)),l=M2.fitImageInsideBox(a,{width:e.width,height:e.height}).width/a.width;this.container.style.width=`${o.width*l}px`,this.container.style.height=`${o.height*l}px`}drawImage(){const e=this.getCanvasCtx(),t=this.getConfig().image,{loaded:r,image:n,width:s,height:o}=Vn(this,ec).getImage(t);if(!r)return;const{clientWidth:a,clientHeight:l}=this.canvas,c=a*window.devicePixelRatio,u=l*window.devicePixelRatio;this.canvas.width=c,this.canvas.height=u;const h=this.getCropPercent();e.drawImage(n,h.x1*s,h.y1*o,(h.x2-h.x1)*s,(h.y2-h.y1)*o,0,0,c,u)}drawFieldRect(){const e=this.getCanvasCtx(),{x:t,y:r,width:n,height:s}=this.getFieldRectPx();e.rect(t,r,n,s),e.lineWidth=2,e.strokeStyle="yellow",e.stroke()}drawGrid(){const e=this.getCanvasCtx(),{image:t,size:r}=this.getConfig(),{loaded:n}=Vn(this,ec).getImage(t);if(!(!n||!this.showGrid||this.gridSize<=0)){e.lineWidth=1,e.strokeStyle="gray";for(let s=0;s<=r[0];s+=this.gridSize)e.beginPath(),e.moveTo(this.xToPx(s),this.yToPx(0)),e.lineTo(this.xToPx(s),this.yToPx(r[1])),e.stroke();for(let s=0;s<=r[1];s+=this.gridSize)e.beginPath(),e.moveTo(this.xToPx(0),this.yToPx(s)),e.lineTo(this.xToPx(r[0]),this.yToPx(s)),e.stroke()}}drawChildren(){const e={canvas:this.getCanvasCtx(),getFieldRectPx:()=>this.getFieldRectPx(),unit:this.unit,rotationUnit:this.rotationUnit,xToPx:(t,r)=>this.xToPx(t,r),yToPx:(t,r)=>this.yToPx(t,r),lengthToPx:(t,r)=>this.lengthToPx(t,r),origin:this.origin};[...this.children].flatMap(t=>t.tagName==="SLOT"?t.assignedElements():t).forEach(t=>{var r;const n=this.getCanvasCtx();n.save(),n.beginPath();const s=t;(r=s.draw)==null||r.call(s,e),n.restore()})}drawField(){this.setContainerSize(),this.drawImage(),this.drawFieldRect(),this.drawGrid(),this.drawChildren(),window.requestAnimationFrame(()=>{this.drawField()})}firstUpdated(){this.drawField()}render(){return Ye`
      <div class="outside-container">
        <div class="container" style="transform: rotate(${-this.rotation}deg)">
          <canvas @click=${yie(this,o3,DB)}></canvas>
        </div>
      </div>
    `}};ec=new WeakMap,o3=new WeakSet,DB=function(i){const e=this.pxToX(i.offsetX),t=this.pxToY(i.offsetY);this.dispatchEvent(new CustomEvent("fieldClick",{detail:{feet:{x:Mr(e,this.unit,"ft"),y:Mr(t,this.unit,"ft")},meters:{x:Mr(e,this.unit,"m"),y:Mr(t,this.unit,"m")}},bubbles:!0,composed:!0}))},OB.styles=$t`
    :host {
      display: inline-flex;
      position: relative;
      width: 500px;
      height: 300px;
      justify-content: center;
      align-items: center;
    }

    .container {
    }

    canvas {
      width: 100%;
      height: 100%;
    }
  `;let cn=OB;Mn([q({type:String})],cn.prototype,"game");Mn([q({type:Number,attribute:"crop-top"})],cn.prototype,"cropTop");Mn([q({type:Number,attribute:"crop-bottom"})],cn.prototype,"cropBottom");Mn([q({type:Number,attribute:"crop-left"})],cn.prototype,"cropLeft");Mn([q({type:Number,attribute:"crop-right"})],cn.prototype,"cropRight");Mn([q({type:String,attribute:"crop-type"})],cn.prototype,"cropType");Mn([q({type:String})],cn.prototype,"unit");Mn([q({type:String,attribute:"rotation-unit"})],cn.prototype,"rotationUnit");Mn([q({type:Number})],cn.prototype,"rotation");Mn([q({type:Boolean,attribute:"show-grid"})],cn.prototype,"showGrid");Mn([q({type:Number,attribute:"grid-size"})],cn.prototype,"gridSize");Mn([q({type:String})],cn.prototype,"origin");Mn([ni("canvas",!0)],cn.prototype,"canvas");Mn([ni(".container",!0)],cn.prototype,"container");customElements.get("frc-field")||customElements.define("frc-field",cn);let Mie=class{constructor(e,t){this.sourceKey="",this.sourceProvider="",this.store=e,this.onUpdate=t}setSource(e,t){var r;this.sourceKey=e,this.sourceProvider=t,this.addFieldObjectsFromSources(),(r=this.unsubscriber)==null||r.call(this);const n=PB(()=>{this.addFieldObjectsFromSources()},1e3/60);this.unsubscriber=this.store.subscribe(t,e,n,!0)}addFieldObjectsFromSources(){var e;const t=this.store.getSource(this.sourceProvider,this.sourceKey);if(!t||((e=t.getChildren()[".type"])==null?void 0:e.getValue())!=="Field2d")return;const r=[];Object.entries(t.getChildren()).forEach(([n,s])=>{if(n.startsWith(".")||n==="XModules")return;const o=s.hasChildren()?s.getChildren().pose.getValue():s.getValue(),a=Aw(o);r.push({type:a.length===1?"robot":"trajectory",poses:a,sourceKey:s.getKey(),sourceProvider:this.sourceProvider}),this.onUpdate(r)})}};var Sie=Object.defineProperty,_r=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Sie(e,t,n),n};const Tie={dashboard:{displayName:"Field Path",topLevel:!1},properties:{poses:{type:"Array",primary:!0,input:{type:"NumberArray"}},color:{type:"String",input:{type:"ColorPicker"},defaultValue:"#FFA500"},unit:{type:"String",defaultValue:"inherit",input:{type:"StringDropdown",getOptions(){return["inherit",...Object.keys(th)]},allowCustomValues:!1}},lineWidth:{type:"Number",attribute:"line-width",defaultValue:4,input:{type:"Number",min:0}},opacity:{type:"Number",defaultValue:.7,input:{type:"Number",min:0,max:1,step:.1}}}},Eie={dashboard:{displayName:"Field Robot",topLevel:!1},properties:{pose:{type:"Array",defaultValue:[0,0,0],primary:!0,input:{type:"NumberArray"}},rotationUnit:{type:"String",attribute:"rotation-unit",defaultValue:"inherit",input:{type:"StringDropdown",getOptions:()=>["inherit","deg","rad"],allowCustomValues:!1}},unit:{type:"String",defaultValue:"inherit",input:{type:"StringDropdown",getOptions(){return["inherit",...Object.keys(th)]},allowCustomValues:!1}},color:{type:"String",input:{type:"ColorPicker"},defaultValue:"#0000ff"},opacity:{type:"Number",defaultValue:1,input:{type:"Number",min:0,max:1,step:.1}},rotation:{type:"Number",input:{type:"Number",min:-360,max:360}},width:{type:"Number",defaultValue:.6},length:{type:"Number",defaultValue:.9}}},Aie={dashboard:{displayName:"Field",defaultHtml:`
    <frc-field-wrapper source-key="/SmartDashboard/Field" source-provider="NetworkTables">
    </frc-field-wrapper>
    `},properties:{provider:{type:"SourceProvider",property:"provider"},store:{type:"Store",property:"store"},sourceProvider:{type:"String",attribute:"source-provider",input:{type:"None"}},sourceKey:{type:"String",attribute:"source-key",input:{type:"None"}},game:{type:"String",defaultValue:"Charged Up",input:{type:"StringDropdown",allowCustomValues:!1,getOptions(){return c_.map(i=>i.game)}}},rotationUnit:{type:"String",attribute:"rotation-unit",defaultValue:"deg",input:{type:"StringDropdown",getOptions:()=>["deg","rad"],allowCustomValues:!1}},unit:{type:"String",defaultValue:oy,input:{type:"StringDropdown",getOptions(){return Object.keys(th)},allowCustomValues:!1}},rotation:{type:"Number",input:{type:"Number",min:-360,max:360}},showGrid:{type:"Boolean",attribute:"show-grid"},gridSize:{type:"Number",attribute:"grid-size",input:{type:"Number",min:0}},origin:{type:"String",defaultValue:"blue",input:{type:"StringDropdown",getOptions:()=>["blue","red"],allowCustomValues:!1}},cropLeft:{type:"Number",attribute:"crop-left",input:{type:"Number",min:0,max:100}},cropRight:{type:"Number",defaultValue:100,attribute:"crop-right",input:{type:"Number",min:0,max:100}},cropTop:{type:"Number",attribute:"crop-top",input:{type:"Number",min:0,max:100}},cropBottom:{type:"Number",defaultValue:100,attribute:"crop-bottom",input:{type:"Number",min:0,max:100}}},slots:[{name:"",allowedChildren:["frc-field-robot","frc-field-path"]}]};var x0;const UB=class extends ut{constructor(){super(...arguments),ay(this,x0),this.sourceProvider="",this.sourceKey="",this.game=c_[0].game,this.cropTop=0,this.cropBottom=100,this.cropLeft=0,this.cropRight=100,this.cropType="percent",this.unit=oy,this.rotationUnit="deg",this.rotation=0,this.showGrid=!1,this.gridSize=1,this.origin="blue",this.fieldObjects=[]}firstUpdated(){this.store&&(this.fieldObjectManager=new Mie(this.store,e=>{this.fieldObjects=e})),IB(this,x0,new MutationObserver(()=>{this.requestUpdate()})),Vn(this,x0).observe(this,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["source-key","source-provider"]})}disconnectedCallback(){super.disconnectedCallback(),Vn(this,x0).disconnect()}updated(e){(e.has("sourceKey")||e.has("sourceProvider"))&&this.fieldObjectManager.setSource(this.sourceKey,this.sourceProvider)}render(){var e;const t=(((e=this.slottedFieldObjects)==null?void 0:e.assignedElements())??[]).filter(r=>r.tagName==="FRC-FIELD-ROBOT"||r.tagName==="FRC-FIELD-PATH").map(r=>({type:r.tagName==="FRC-FIELD-ROBOT"?"robot":"trajectory",sourceKey:r.getAttribute("source-key"),sourceProvider:r.getAttribute("source-provider")}));return Ye`
      <frc-field
        game=${this.game}
        unit=${this.unit}
        rotation-unit=${this.rotationUnit}
        rotation=${this.rotation}
        ?show-grid=${this.showGrid}
        grid-size=${this.gridSize}
        origin=${this.origin}
        crop-top=${this.cropTop/100}
        crop-bottom=${this.cropBottom/100}
        crop-left=${this.cropLeft/100}
        crop-right=${this.cropRight/100}
        crop-type=${this.cropType}
      >
        ${this.fieldObjects.filter(r=>!t.find(({sourceKey:n,sourceProvider:s,type:o})=>r.type===o&&r.sourceKey===n&&r.sourceProvider===s)).map(r=>r.type==="robot"?Ye`<frc-field-robot
                .pose=${r.poses[0]}
              ></frc-field-robot>`:Ye`<frc-field-path
              .poses=${r.poses}
            ></frc-field-path>`)}
        <slot></slot>
      </frc-field>
    `}};x0=new WeakMap,UB.styles=$t`
    :host {
      display: inline-block;
      position: relative;
      width: 500px;
      height: 300px;
    }

    frc-field {
      width: 100%;
      height: 100%;
    }
  `;let ir=UB;_r([q({type:Object,attribute:!1})],ir.prototype,"provider");_r([q({type:Object,attribute:!1})],ir.prototype,"store");_r([q({type:String,attribute:"source-provider"})],ir.prototype,"sourceProvider");_r([q({type:String,attribute:"source-key"})],ir.prototype,"sourceKey");_r([q({type:String})],ir.prototype,"game");_r([q({type:Number,attribute:"crop-top"})],ir.prototype,"cropTop");_r([q({type:Number,attribute:"crop-bottom"})],ir.prototype,"cropBottom");_r([q({type:Number,attribute:"crop-left"})],ir.prototype,"cropLeft");_r([q({type:Number,attribute:"crop-right"})],ir.prototype,"cropRight");_r([q({type:String,attribute:"crop-type"})],ir.prototype,"cropType");_r([q({type:String})],ir.prototype,"unit");_r([q({type:String,attribute:"rotation-unit"})],ir.prototype,"rotationUnit");_r([q({type:Number})],ir.prototype,"rotation");_r([q({type:Boolean,attribute:"show-grid"})],ir.prototype,"showGrid");_r([q({type:Number,attribute:"grid-size"})],ir.prototype,"gridSize");_r([q({type:String})],ir.prototype,"origin");_r([zi()],ir.prototype,"fieldObjects");_r([ni("slot",!0)],ir.prototype,"slottedFieldObjects");customElements.get("frc-field-wrapper")||customElements.define("frc-field-wrapper",ir);var zB=i=>{throw TypeError(i)},h$=(i,e,t)=>e.has(i)||zB("Cannot "+t),ai=(i,e,t)=>(h$(i,e,"read from private field"),t?t.call(i):e.get(i)),Tr=(i,e,t)=>e.has(i)?zB("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),tn=(i,e,t,r)=>(h$(i,e,"write to private field"),r?r.call(i,t):e.set(i,t),t),el=(i,e,t)=>(h$(i,e,"access private method"),t);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const d$="151",Ad={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},kd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},kie=0,TN=1,Cie=2,FB=1,$ie=2,w0=3,qo=0,bn=1,ws=2,$c=0,Sf=1,EN=2,AN=3,kN=4,Lie=5,Cp=100,Rie=101,Pie=102,CN=103,$N=104,Nie=200,Iie=201,Die=202,Oie=203,BB=204,VB=205,Uie=206,zie=207,Fie=208,Bie=209,Vie=210,jie=0,Hie=1,Gie=2,a3=3,Wie=4,qie=5,Xie=6,Yie=7,kM=0,Kie=1,Zie=2,tl=0,Jie=1,Qie=2,ere=3,tre=4,ire=5,jB=300,tm=301,im=302,l3=303,c3=304,CM=306,Bo=1e3,Hr=1001,kw=1002,ur=1003,u3=1004,Xb=1005,Er=1006,HB=1007,hl=1008,Ih=1009,rre=1010,nre=1011,GB=1012,sre=1013,ih=1014,mc=1015,ly=1016,ore=1017,are=1018,Tf=1020,lre=1021,Ms=1023,cre=1024,ure=1025,yh=1026,rm=1027,hre=1028,dre=1029,pre=1030,fre=1031,mre=1033,S2=33776,T2=33777,E2=33778,A2=33779,LN=35840,RN=35841,PN=35842,NN=35843,gre=36196,IN=37492,DN=37496,ON=37808,UN=37809,zN=37810,FN=37811,BN=37812,VN=37813,jN=37814,HN=37815,GN=37816,WN=37817,qN=37818,XN=37819,YN=37820,KN=37821,k2=36492,_re=36283,ZN=36284,JN=36285,QN=36286,cy=2300,nm=2301,C2=2302,e5=2400,t5=2401,i5=2402,yre=2500,vre=0,WB=1,h3=2,Dh=3e3,Wt=3001,bre=3200,xre=3201,$M=0,wre=1,so="srgb",LM="srgb-linear",qB="display-p3",$2=7680,Mre=519,d3=35044,r5="300 es",p3=1035;let Kh=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const r=t.slice(0);for(let n=0,s=r.length;n<s;n++)r[n].call(this,e);e.target=null}}};const Or=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let n5=1234567;const Ef=Math.PI/180,sm=180/Math.PI;function vo(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Or[i&255]+Or[i>>8&255]+Or[i>>16&255]+Or[i>>24&255]+"-"+Or[e&255]+Or[e>>8&255]+"-"+Or[e>>16&15|64]+Or[e>>24&255]+"-"+Or[t&63|128]+Or[t>>8&255]+"-"+Or[t>>16&255]+Or[t>>24&255]+Or[r&255]+Or[r>>8&255]+Or[r>>16&255]+Or[r>>24&255]).toLowerCase()}function Ar(i,e,t){return Math.max(e,Math.min(t,i))}function p$(i,e){return(i%e+e)%e}function Sre(i,e,t,r,n){return r+(i-e)*(n-r)/(t-e)}function Tre(i,e,t){return i!==e?(t-i)/(e-i):0}function u_(i,e,t){return(1-t)*i+t*e}function Ere(i,e,t,r){return u_(i,e,1-Math.exp(-t*r))}function Are(i,e=1){return e-Math.abs(p$(i,e*2)-e)}function kre(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function Cre(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function $re(i,e){return i+Math.floor(Math.random()*(e-i+1))}function Lre(i,e){return i+Math.random()*(e-i)}function Rre(i){return i*(.5-Math.random())}function Pre(i){i!==void 0&&(n5=i);let e=n5+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Nre(i){return i*Ef}function Ire(i){return i*sm}function f3(i){return(i&i-1)===0&&i!==0}function XB(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function YB(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Dre(i,e,t,r,n){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),h=s((e-r)/2),d=o((e-r)/2),f=s((r-e)/2),g=o((r-e)/2);switch(n){case"XYX":i.set(a*u,l*h,l*d,a*c);break;case"YZY":i.set(l*d,a*u,l*h,a*c);break;case"ZXZ":i.set(l*h,l*d,a*u,a*c);break;case"XZX":i.set(a*u,l*g,l*f,a*c);break;case"YXY":i.set(l*f,a*u,l*g,a*c);break;case"ZYZ":i.set(l*g,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function qa(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function si(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const $p={DEG2RAD:Ef,RAD2DEG:sm,generateUUID:vo,clamp:Ar,euclideanModulo:p$,mapLinear:Sre,inverseLerp:Tre,lerp:u_,damp:Ere,pingpong:Are,smoothstep:kre,smootherstep:Cre,randInt:$re,randFloat:Lre,randFloatSpread:Rre,seededRandom:Pre,degToRad:Nre,radToDeg:Ire,isPowerOfTwo:f3,ceilPowerOfTwo:XB,floorPowerOfTwo:YB,setQuaternionFromProperEuler:Dre,normalize:si,denormalize:qa};let Nt=class KB{constructor(e=0,t=0){KB.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6],this.y=n[1]*t+n[4]*r+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Ar(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),n=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*n+e.x,this.y=s*n+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Xt=class ZB{constructor(){ZB.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,n,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=n,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,n=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],h=r[7],d=r[2],f=r[5],g=r[8],v=n[0],m=n[3],p=n[6],y=n[1],_=n[4],x=n[7],w=n[2],S=n[5],A=n[8];return s[0]=o*v+a*y+l*w,s[3]=o*m+a*_+l*S,s[6]=o*p+a*x+l*A,s[1]=c*v+u*y+h*w,s[4]=c*m+u*_+h*S,s[7]=c*p+u*x+h*A,s[2]=d*v+f*y+g*w,s[5]=d*m+f*_+g*S,s[8]=d*p+f*x+g*A,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+n*s*c-n*o*l}invert(){const e=this.elements,t=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=a*l-u*s,f=c*s-o*l,g=t*h+r*d+n*f;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=h*v,e[1]=(n*c-u*r)*v,e[2]=(a*r-n*o)*v,e[3]=d*v,e[4]=(u*t-n*l)*v,e[5]=(n*s-a*t)*v,e[6]=f*v,e[7]=(r*l-c*t)*v,e[8]=(o*t-r*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,n,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-n*c,n*l,-n*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(L2.makeScale(e,t)),this}rotate(e){return this.premultiply(L2.makeRotation(-e)),this}translate(e,t){return this.premultiply(L2.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let n=0;n<9;n++)if(t[n]!==r[n])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}};const L2=new Xt;function JB(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function uy(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function Af(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function R2(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}const Ore=new Xt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Ure=new Xt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function zre(i){return i.convertSRGBToLinear().applyMatrix3(Ure)}function Fre(i){return i.applyMatrix3(Ore).convertLinearToSRGB()}const Bre={[LM]:i=>i,[so]:i=>i.convertSRGBToLinear(),[qB]:zre},Vre={[LM]:i=>i,[so]:i=>i.convertLinearToSRGB(),[qB]:Fre},In={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(i){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!i},get workingColorSpace(){return LM},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;const r=Bre[e],n=Vre[t];if(r===void 0||n===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return n(r(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}};let Cd,QB=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Cd===void 0&&(Cd=uy("canvas")),Cd.width=e.width,Cd.height=e.height;const r=Cd.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Cd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=uy("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const n=r.getImageData(0,0,e.width,e.height),s=n.data;for(let o=0;o<s.length;o++)s[o]=Af(s[o]/255)*255;return r.putImageData(n,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Af(t[r]/255)*255):t[r]=Af(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},e8=class{constructor(e=null){this.isSource=!0,this.uuid=vo(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},n=this.data;if(n!==null){let s;if(Array.isArray(n)){s=[];for(let o=0,a=n.length;o<a;o++)n[o].isDataTexture?s.push(P2(n[o].image)):s.push(P2(n[o]))}else s=P2(n);r.url=s}return t||(e.images[this.uuid]=r),r}};function P2(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?QB.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let jre=0,Zn=class Yb extends Kh{constructor(e=Yb.DEFAULT_IMAGE,t=Yb.DEFAULT_MAPPING,r=Hr,n=Hr,s=Er,o=hl,a=Ms,l=Ih,c=Yb.DEFAULT_ANISOTROPY,u=Dh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:jre++}),this.uuid=vo(),this.name="",this.source=new e8(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=n,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Nt(0,0),this.repeat=new Nt(1,1),this.center=new Nt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Xt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==jB)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Bo:e.x=e.x-Math.floor(e.x);break;case Hr:e.x=e.x<0?0:1;break;case kw:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Bo:e.y=e.y-Math.floor(e.y);break;case Hr:e.y=e.y<0?0:1;break;case kw:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};Zn.DEFAULT_IMAGE=null;Zn.DEFAULT_MAPPING=jB;Zn.DEFAULT_ANISOTROPY=1;let _i=class t8{constructor(e=0,t=0,r=0,n=1){t8.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,n=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*n+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*n+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*n+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*n+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,n,s;const o=e.elements,a=o[0],l=o[4],c=o[8],u=o[1],h=o[5],d=o[9],f=o[2],g=o[6],v=o[10];if(Math.abs(l-u)<.01&&Math.abs(c-f)<.01&&Math.abs(d-g)<.01){if(Math.abs(l+u)<.1&&Math.abs(c+f)<.1&&Math.abs(d+g)<.1&&Math.abs(a+h+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const p=(a+1)/2,y=(h+1)/2,_=(v+1)/2,x=(l+u)/4,w=(c+f)/4,S=(d+g)/4;return p>y&&p>_?p<.01?(r=0,n=.707106781,s=.707106781):(r=Math.sqrt(p),n=x/r,s=w/r):y>_?y<.01?(r=.707106781,n=0,s=.707106781):(n=Math.sqrt(y),r=x/n,s=S/n):_<.01?(r=.707106781,n=.707106781,s=0):(s=Math.sqrt(_),r=w/s,n=S/s),this.set(r,n,s,t),this}let m=Math.sqrt((g-d)*(g-d)+(c-f)*(c-f)+(u-l)*(u-l));return Math.abs(m)<.001&&(m=1),this.x=(g-d)/m,this.y=(c-f)/m,this.z=(u-l)/m,this.w=Math.acos((a+h+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Oh=class extends Kh{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new _i(0,0,e,t),this.scissorTest=!1,this.viewport=new _i(0,0,e,t);const n={width:e,height:t,depth:1};this.texture=new Zn(n,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Er,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new e8(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},i8=class extends Zn{constructor(e=null,t=1,r=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:n},this.magFilter=ur,this.minFilter=ur,this.wrapR=Hr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Hre=class extends Zn{constructor(e=null,t=1,r=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:n},this.magFilter=ur,this.minFilter=ur,this.wrapR=Hr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Pr=class{constructor(e=0,t=0,r=0,n=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=n}static slerpFlat(e,t,r,n,s,o,a){let l=r[n+0],c=r[n+1],u=r[n+2],h=r[n+3];const d=s[o+0],f=s[o+1],g=s[o+2],v=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=g,e[t+3]=v;return}if(h!==v||l!==d||c!==f||u!==g){let m=1-a;const p=l*d+c*f+u*g+h*v,y=p>=0?1:-1,_=1-p*p;if(_>Number.EPSILON){const w=Math.sqrt(_),S=Math.atan2(w,p*y);m=Math.sin(m*S)/w,a=Math.sin(a*S)/w}const x=a*y;if(l=l*m+d*x,c=c*m+f*x,u=u*m+g*x,h=h*m+v*x,m===1-a){const w=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=w,c*=w,u*=w,h*=w}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,n,s,o){const a=r[n],l=r[n+1],c=r[n+2],u=r[n+3],h=s[o],d=s[o+1],f=s[o+2],g=s[o+3];return e[t]=a*g+u*h+l*f-c*d,e[t+1]=l*g+u*d+c*h-a*f,e[t+2]=c*g+u*f+a*d-l*h,e[t+3]=u*g-a*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,n=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(n/2),h=a(s/2),d=l(r/2),f=l(n/2),g=l(s/2);switch(o){case"XYZ":this._x=d*u*h+c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h-d*f*g;break;case"YXZ":this._x=d*u*h+c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h+d*f*g;break;case"ZXY":this._x=d*u*h-c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h-d*f*g;break;case"ZYX":this._x=d*u*h-c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h+d*f*g;break;case"YZX":this._x=d*u*h+c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h-d*f*g;break;case"XZY":this._x=d*u*h-c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h+d*f*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],n=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=r+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-n)*f}else if(r>a&&r>h){const f=2*Math.sqrt(1+r-a-h);this._w=(u-l)/f,this._x=.25*f,this._y=(n+o)/f,this._z=(s+c)/f}else if(a>h){const f=2*Math.sqrt(1+a-r-h);this._w=(s-c)/f,this._x=(n+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-r-a);this._w=(o-n)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ar(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const n=Math.min(1,t/r);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,n=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+n*c-s*l,this._y=n*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-n*a,this._w=o*u-r*a-n*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,n=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+n*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=n,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*r+t*this._x,this._y=f*n+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=r*h+this._x*d,this._y=n*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),n=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(n),r*Math.sin(s),r*Math.cos(s),t*Math.sin(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},fe=class r8{constructor(e=0,t=0,r=0){r8.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(s5.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(s5.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,n=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*n,this.y=s[1]*t+s[4]*r+s[7]*n,this.z=s[2]*t+s[5]*r+s[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,n=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*n+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*n+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*n+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*n+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,n=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*n-a*r,u=l*r+a*t-s*n,h=l*n+s*r-o*t,d=-s*t-o*r-a*n;return this.x=c*l+d*-s+u*-a-h*-o,this.y=u*l+d*-o+h*-s-c*-a,this.z=h*l+d*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,n=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*n,this.y=s[1]*t+s[5]*r+s[9]*n,this.z=s[2]*t+s[6]*r+s[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,n=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=n*l-s*a,this.y=s*o-r*l,this.z=r*a-n*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return N2.copy(this).projectOnVector(e),this.sub(N2)}reflect(e){return this.sub(N2.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Ar(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const n=Math.sin(t)*e;return this.x=n*Math.sin(r),this.y=Math.cos(t)*e,this.z=n*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const N2=new fe,s5=new Pr;let bl=class{constructor(e=new fe(1/0,1/0,1/0),t=new fe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(wa.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(wa.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=wa.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),$d.copy(e.boundingBox),$d.applyMatrix4(e.matrixWorld),this.union($d);else{const n=e.geometry;if(n!==void 0)if(t&&n.attributes!==void 0&&n.attributes.position!==void 0){const s=n.attributes.position;for(let o=0,a=s.count;o<a;o++)wa.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(wa)}else n.boundingBox===null&&n.computeBoundingBox(),$d.copy(n.boundingBox),$d.applyMatrix4(e.matrixWorld),this.union($d)}const r=e.children;for(let n=0,s=r.length;n<s;n++)this.expandByObject(r[n],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,wa),wa.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ag),Wv.subVectors(this.max,Ag),Ld.subVectors(e.a,Ag),Rd.subVectors(e.b,Ag),Pd.subVectors(e.c,Ag),Ul.subVectors(Rd,Ld),zl.subVectors(Pd,Rd),Su.subVectors(Ld,Pd);let t=[0,-Ul.z,Ul.y,0,-zl.z,zl.y,0,-Su.z,Su.y,Ul.z,0,-Ul.x,zl.z,0,-zl.x,Su.z,0,-Su.x,-Ul.y,Ul.x,0,-zl.y,zl.x,0,-Su.y,Su.x,0];return!I2(t,Ld,Rd,Pd,Wv)||(t=[1,0,0,0,1,0,0,0,1],!I2(t,Ld,Rd,Pd,Wv))?!1:(qv.crossVectors(Ul,zl),t=[qv.x,qv.y,qv.z],I2(t,Ld,Rd,Pd,Wv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,wa).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(wa).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(xa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),xa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),xa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),xa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),xa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),xa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),xa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),xa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(xa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const xa=[new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe],wa=new fe,$d=new bl,Ld=new fe,Rd=new fe,Pd=new fe,Ul=new fe,zl=new fe,Su=new fe,Ag=new fe,Wv=new fe,qv=new fe,Tu=new fe;function I2(i,e,t,r,n){for(let s=0,o=i.length-3;s<=o;s+=3){Tu.fromArray(i,s);const a=n.x*Math.abs(Tu.x)+n.y*Math.abs(Tu.y)+n.z*Math.abs(Tu.z),l=e.dot(Tu),c=t.dot(Tu),u=r.dot(Tu);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Gre=new bl,kg=new fe,D2=new fe;let xl=class{constructor(e=new fe,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):Gre.setFromPoints(e).getCenter(r);let n=0;for(let s=0,o=e.length;s<o;s++)n=Math.max(n,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;kg.subVectors(e,this.center);const t=kg.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),n=(r-this.radius)*.5;this.center.addScaledVector(kg,n/r),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(D2.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(kg.copy(e.center).add(D2)),this.expandByPoint(kg.copy(e.center).sub(D2))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Ma=new fe,O2=new fe,Xv=new fe,Fl=new fe,U2=new fe,Yv=new fe,z2=new fe;let f$=class{constructor(e=new fe,t=new fe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ma)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ma.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ma.copy(this.origin).addScaledVector(this.direction,t),Ma.distanceToSquared(e))}distanceSqToSegment(e,t,r,n){O2.copy(e).add(t).multiplyScalar(.5),Xv.copy(t).sub(e).normalize(),Fl.copy(this.origin).sub(O2);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Xv),a=Fl.dot(this.direction),l=-Fl.dot(Xv),c=Fl.lengthSq(),u=Math.abs(1-o*o);let h,d,f,g;if(u>0)if(h=o*l-a,d=o*a-l,g=s*u,h>=0)if(d>=-g)if(d<=g){const v=1/u;h*=v,d*=v,f=h*(h+o*d+2*a)+d*(o*h+d+2*l)+c}else d=s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d=-s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d<=-g?(h=Math.max(0,-(-o*s+a)),d=h>0?-s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c):d<=g?(h=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(h=Math.max(0,-(o*s+a)),d=h>0?s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c);else d=o>0?-s:s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,h),n&&n.copy(O2).addScaledVector(Xv,d),f}intersectSphere(e,t){Ma.subVectors(e.center,this.origin);const r=Ma.dot(this.direction),n=Ma.dot(Ma)-r*r,s=e.radius*e.radius;if(n>s)return null;const o=Math.sqrt(s-n),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,n,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(r=(e.min.x-d.x)*c,n=(e.max.x-d.x)*c):(r=(e.max.x-d.x)*c,n=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),r>o||s>n||((s>r||isNaN(r))&&(r=s),(o<n||isNaN(n))&&(n=o),h>=0?(a=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),r>l||a>n)||((a>r||r!==r)&&(r=a),(l<n||n!==n)&&(n=l),n<0)?null:this.at(r>=0?r:n,t)}intersectsBox(e){return this.intersectBox(e,Ma)!==null}intersectTriangle(e,t,r,n,s){U2.subVectors(t,e),Yv.subVectors(r,e),z2.crossVectors(U2,Yv);let o=this.direction.dot(z2),a;if(o>0){if(n)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Fl.subVectors(this.origin,e);const l=a*this.direction.dot(Yv.crossVectors(Fl,Yv));if(l<0)return null;const c=a*this.direction.dot(U2.cross(Fl));if(c<0||l+c>o)return null;const u=-a*Fl.dot(z2);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Rt=class m3{constructor(){m3.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,n,s,o,a,l,c,u,h,d,f,g,v,m){const p=this.elements;return p[0]=e,p[4]=t,p[8]=r,p[12]=n,p[1]=s,p[5]=o,p[9]=a,p[13]=l,p[2]=c,p[6]=u,p[10]=h,p[14]=d,p[3]=f,p[7]=g,p[11]=v,p[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new m3().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,n=1/Nd.setFromMatrixColumn(e,0).length(),s=1/Nd.setFromMatrixColumn(e,1).length(),o=1/Nd.setFromMatrixColumn(e,2).length();return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,n=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(n),c=Math.sin(n),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=o*u,f=o*h,g=a*u,v=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+g*c,t[5]=d-v*c,t[9]=-a*l,t[2]=v-d*c,t[6]=g+f*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,f=l*h,g=c*u,v=c*h;t[0]=d+v*a,t[4]=g*a-f,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-g,t[6]=v+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,f=l*h,g=c*u,v=c*h;t[0]=d-v*a,t[4]=-o*h,t[8]=g+f*a,t[1]=f+g*a,t[5]=o*u,t[9]=v-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,f=o*h,g=a*u,v=a*h;t[0]=l*u,t[4]=g*c-f,t[8]=d*c+v,t[1]=l*h,t[5]=v*c+d,t[9]=f*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=v-d*h,t[8]=g*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*h+g,t[10]=d-v*h}else if(e.order==="XZY"){const d=o*l,f=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+v,t[5]=o*u,t[9]=f*h-g,t[2]=g*h-f,t[6]=a*u,t[10]=v*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Wre,e,qre)}lookAt(e,t,r){const n=this.elements;return Dn.subVectors(e,t),Dn.lengthSq()===0&&(Dn.z=1),Dn.normalize(),Bl.crossVectors(r,Dn),Bl.lengthSq()===0&&(Math.abs(r.z)===1?Dn.x+=1e-4:Dn.z+=1e-4,Dn.normalize(),Bl.crossVectors(r,Dn)),Bl.normalize(),Kv.crossVectors(Dn,Bl),n[0]=Bl.x,n[4]=Kv.x,n[8]=Dn.x,n[1]=Bl.y,n[5]=Kv.y,n[9]=Dn.y,n[2]=Bl.z,n[6]=Kv.z,n[10]=Dn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,n=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],h=r[5],d=r[9],f=r[13],g=r[2],v=r[6],m=r[10],p=r[14],y=r[3],_=r[7],x=r[11],w=r[15],S=n[0],A=n[4],k=n[8],M=n[12],b=n[1],P=n[5],N=n[9],D=n[13],U=n[2],G=n[6],B=n[10],Q=n[14],j=n[3],X=n[7],ne=n[11],ge=n[15];return s[0]=o*S+a*b+l*U+c*j,s[4]=o*A+a*P+l*G+c*X,s[8]=o*k+a*N+l*B+c*ne,s[12]=o*M+a*D+l*Q+c*ge,s[1]=u*S+h*b+d*U+f*j,s[5]=u*A+h*P+d*G+f*X,s[9]=u*k+h*N+d*B+f*ne,s[13]=u*M+h*D+d*Q+f*ge,s[2]=g*S+v*b+m*U+p*j,s[6]=g*A+v*P+m*G+p*X,s[10]=g*k+v*N+m*B+p*ne,s[14]=g*M+v*D+m*Q+p*ge,s[3]=y*S+_*b+x*U+w*j,s[7]=y*A+_*P+x*G+w*X,s[11]=y*k+_*N+x*B+w*ne,s[15]=y*M+_*D+x*Q+w*ge,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],n=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],g=e[3],v=e[7],m=e[11],p=e[15];return g*(+s*l*h-n*c*h-s*a*d+r*c*d+n*a*f-r*l*f)+v*(+t*l*f-t*c*d+s*o*d-n*o*f+n*c*u-s*l*u)+m*(+t*c*h-t*a*f-s*o*h+r*o*f+s*a*u-r*c*u)+p*(-n*a*u-t*l*h+t*a*d+n*o*h-r*o*d+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],g=e[12],v=e[13],m=e[14],p=e[15],y=h*m*c-v*d*c+v*l*f-a*m*f-h*l*p+a*d*p,_=g*d*c-u*m*c-g*l*f+o*m*f+u*l*p-o*d*p,x=u*v*c-g*h*c+g*a*f-o*v*f-u*a*p+o*h*p,w=g*h*l-u*v*l-g*a*d+o*v*d+u*a*m-o*h*m,S=t*y+r*_+n*x+s*w;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/S;return e[0]=y*A,e[1]=(v*d*s-h*m*s-v*n*f+r*m*f+h*n*p-r*d*p)*A,e[2]=(a*m*s-v*l*s+v*n*c-r*m*c-a*n*p+r*l*p)*A,e[3]=(h*l*s-a*d*s-h*n*c+r*d*c+a*n*f-r*l*f)*A,e[4]=_*A,e[5]=(u*m*s-g*d*s+g*n*f-t*m*f-u*n*p+t*d*p)*A,e[6]=(g*l*s-o*m*s-g*n*c+t*m*c+o*n*p-t*l*p)*A,e[7]=(o*d*s-u*l*s+u*n*c-t*d*c-o*n*f+t*l*f)*A,e[8]=x*A,e[9]=(g*h*s-u*v*s-g*r*f+t*v*f+u*r*p-t*h*p)*A,e[10]=(o*v*s-g*a*s+g*r*c-t*v*c-o*r*p+t*a*p)*A,e[11]=(u*a*s-o*h*s-u*r*c+t*h*c+o*r*f-t*a*f)*A,e[12]=w*A,e[13]=(u*v*n-g*h*n+g*r*d-t*v*d-u*r*m+t*h*m)*A,e[14]=(g*a*n-o*v*n-g*r*l+t*v*l+o*r*m-t*a*m)*A,e[15]=(o*h*n-u*a*n+u*r*l-t*h*l-o*r*d+t*a*d)*A,this}scale(e){const t=this.elements,r=e.x,n=e.y,s=e.z;return t[0]*=r,t[4]*=n,t[8]*=s,t[1]*=r,t[5]*=n,t[9]*=s,t[2]*=r,t[6]*=n,t[10]*=s,t[3]*=r,t[7]*=n,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),n=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-n*l,c*l+n*a,0,c*a+n*l,u*a+r,u*l-n*o,0,c*l-n*a,u*l+n*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,n,s,o){return this.set(1,r,s,0,e,1,o,0,t,n,1,0,0,0,0,1),this}compose(e,t,r){const n=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,h=a+a,d=s*c,f=s*u,g=s*h,v=o*u,m=o*h,p=a*h,y=l*c,_=l*u,x=l*h,w=r.x,S=r.y,A=r.z;return n[0]=(1-(v+p))*w,n[1]=(f+x)*w,n[2]=(g-_)*w,n[3]=0,n[4]=(f-x)*S,n[5]=(1-(d+p))*S,n[6]=(m+y)*S,n[7]=0,n[8]=(g+_)*A,n[9]=(m-y)*A,n[10]=(1-(d+v))*A,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,r){const n=this.elements;let s=Nd.set(n[0],n[1],n[2]).length();const o=Nd.set(n[4],n[5],n[6]).length(),a=Nd.set(n[8],n[9],n[10]).length();this.determinant()<0&&(s=-s),e.x=n[12],e.y=n[13],e.z=n[14],Xs.copy(this);const l=1/s,c=1/o,u=1/a;return Xs.elements[0]*=l,Xs.elements[1]*=l,Xs.elements[2]*=l,Xs.elements[4]*=c,Xs.elements[5]*=c,Xs.elements[6]*=c,Xs.elements[8]*=u,Xs.elements[9]*=u,Xs.elements[10]*=u,t.setFromRotationMatrix(Xs),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,n,s,o){const a=this.elements,l=2*s/(t-e),c=2*s/(r-n),u=(t+e)/(t-e),h=(r+n)/(r-n),d=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,n,s,o){const a=this.elements,l=1/(t-e),c=1/(r-n),u=1/(o-s),h=(t+e)*l,d=(r+n)*c,f=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}};const Nd=new fe,Xs=new Rt,Wre=new fe(0,0,0),qre=new fe(1,1,1),Bl=new fe,Kv=new fe,Dn=new fe,o5=new Rt,a5=new Pr;let RM=class n8{constructor(e=0,t=0,r=0,n=n8.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,n=this._order){return this._x=e,this._y=t,this._z=r,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const n=e.elements,s=n[0],o=n[4],a=n[8],l=n[1],c=n[5],u=n[9],h=n[2],d=n[6],f=n[10];switch(t){case"XYZ":this._y=Math.asin(Ar(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ar(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ar(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ar(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Ar(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Ar(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return o5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(o5,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return a5.setFromEuler(this),this.setFromQuaternion(a5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};RM.DEFAULT_ORDER="XYZ";let s8=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Xre=0;const l5=new fe,Id=new Pr,Sa=new Rt,Zv=new fe,Cg=new fe,Yre=new fe,Kre=new Pr,c5=new fe(1,0,0),u5=new fe(0,1,0),h5=new fe(0,0,1),Zre={type:"added"},d5={type:"removed"};let $i=class Kb extends Kh{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Xre++}),this.uuid=vo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Kb.DEFAULT_UP.clone();const e=new fe,t=new RM,r=new Pr,n=new fe(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Rt},normalMatrix:{value:new Xt}}),this.matrix=new Rt,this.matrixWorld=new Rt,this.matrixAutoUpdate=Kb.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Kb.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new s8,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Id.setFromAxisAngle(e,t),this.quaternion.multiply(Id),this}rotateOnWorldAxis(e,t){return Id.setFromAxisAngle(e,t),this.quaternion.premultiply(Id),this}rotateX(e){return this.rotateOnAxis(c5,e)}rotateY(e){return this.rotateOnAxis(u5,e)}rotateZ(e){return this.rotateOnAxis(h5,e)}translateOnAxis(e,t){return l5.copy(e).applyQuaternion(this.quaternion),this.position.add(l5.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(c5,e)}translateY(e){return this.translateOnAxis(u5,e)}translateZ(e){return this.translateOnAxis(h5,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Sa.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Zv.copy(e):Zv.set(e,t,r);const n=this.parent;this.updateWorldMatrix(!0,!1),Cg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sa.lookAt(Cg,Zv,this.up):Sa.lookAt(Zv,Cg,this.up),this.quaternion.setFromRotationMatrix(Sa),n&&(Sa.extractRotation(n.matrixWorld),Id.setFromRotationMatrix(Sa),this.quaternion.premultiply(Id.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Zre)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(d5)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(d5)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Sa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Sa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Sa),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,n=this.children.length;r<n;r++){const s=this.children[r].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let n=0,s=this.children.length;n<s;n++){const o=this.children[n].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cg,e,Yre),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cg,Kre,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,n=t.length;r<n;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,n=t.length;r<n;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const n=this.children;for(let s=0,o=n.length;s<o;s++){const a=n[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(n.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));n.material=a}else n.material=s(e.materials,this.material);if(this.children.length>0){n.children=[];for(let a=0;a<this.children.length;a++)n.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];n.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),d=o(e.skeletons),f=o(e.animations),g=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),d.length>0&&(r.skeletons=d),f.length>0&&(r.animations=f),g.length>0&&(r.nodes=g)}return r.object=n,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const n=e.children[r];this.add(n.clone())}return this}};$i.DEFAULT_UP=new fe(0,1,0);$i.DEFAULT_MATRIX_AUTO_UPDATE=!0;$i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ys=new fe,Ta=new fe,F2=new fe,Ea=new fe,Dd=new fe,Od=new fe,p5=new fe,B2=new fe,V2=new fe,j2=new fe;let Jv=!1,M0=class Uu{constructor(e=new fe,t=new fe,r=new fe){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,n){n.subVectors(r,t),Ys.subVectors(e,t),n.cross(Ys);const s=n.lengthSq();return s>0?n.multiplyScalar(1/Math.sqrt(s)):n.set(0,0,0)}static getBarycoord(e,t,r,n,s){Ys.subVectors(n,t),Ta.subVectors(r,t),F2.subVectors(e,t);const o=Ys.dot(Ys),a=Ys.dot(Ta),l=Ys.dot(F2),c=Ta.dot(Ta),u=Ta.dot(F2),h=o*c-a*a;if(h===0)return s.set(-2,-1,-1);const d=1/h,f=(c*l-a*u)*d,g=(o*u-a*l)*d;return s.set(1-f-g,g,f)}static containsPoint(e,t,r,n){return this.getBarycoord(e,t,r,n,Ea),Ea.x>=0&&Ea.y>=0&&Ea.x+Ea.y<=1}static getUV(e,t,r,n,s,o,a,l){return Jv===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Jv=!0),this.getInterpolation(e,t,r,n,s,o,a,l)}static getInterpolation(e,t,r,n,s,o,a,l){return this.getBarycoord(e,t,r,n,Ea),l.setScalar(0),l.addScaledVector(s,Ea.x),l.addScaledVector(o,Ea.y),l.addScaledVector(a,Ea.z),l}static isFrontFacing(e,t,r,n){return Ys.subVectors(r,t),Ta.subVectors(e,t),Ys.cross(Ta).dot(n)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,r,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ys.subVectors(this.c,this.b),Ta.subVectors(this.a,this.b),Ys.cross(Ta).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Uu.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Uu.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,n,s){return Jv===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Jv=!0),Uu.getInterpolation(e,this.a,this.b,this.c,t,r,n,s)}getInterpolation(e,t,r,n,s){return Uu.getInterpolation(e,this.a,this.b,this.c,t,r,n,s)}containsPoint(e){return Uu.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Uu.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,n=this.b,s=this.c;let o,a;Dd.subVectors(n,r),Od.subVectors(s,r),B2.subVectors(e,r);const l=Dd.dot(B2),c=Od.dot(B2);if(l<=0&&c<=0)return t.copy(r);V2.subVectors(e,n);const u=Dd.dot(V2),h=Od.dot(V2);if(u>=0&&h<=u)return t.copy(n);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(Dd,o);j2.subVectors(e,s);const f=Dd.dot(j2),g=Od.dot(j2);if(g>=0&&f<=g)return t.copy(s);const v=f*c-l*g;if(v<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(r).addScaledVector(Od,a);const m=u*g-f*h;if(m<=0&&h-u>=0&&f-g>=0)return p5.subVectors(s,n),a=(h-u)/(h-u+(f-g)),t.copy(n).addScaledVector(p5,a);const p=1/(m+v+d);return o=v*p,a=d*p,t.copy(r).addScaledVector(Dd,o).addScaledVector(Od,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},Jre=0,$s=class extends Kh{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Jre++}),this.uuid=vo(),this.name="",this.type="Material",this.blending=Sf,this.side=qo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=BB,this.blendDst=VB,this.blendEquation=Cp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=a3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Mre,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=$2,this.stencilZFail=$2,this.stencilZPass=$2,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const n=this[t];if(n===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Sf&&(r.blending=this.blending),this.side!==qo&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function n(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=n(e.textures),o=n(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const n=t.length;r=new Array(n);for(let s=0;s!==n;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}};const o8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ks={h:0,s:0,l:0},Qv={h:0,s:0,l:0};function H2(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let Et=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=so){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,In.toWorkingColorSpace(this,t),this}setRGB(e,t,r,n=In.workingColorSpace){return this.r=e,this.g=t,this.b=r,In.toWorkingColorSpace(this,n),this}setHSL(e,t,r,n=In.workingColorSpace){if(e=p$(e,1),t=Ar(t,0,1),r=Ar(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=H2(o,s,e+1/3),this.g=H2(o,s,e),this.b=H2(o,s,e-1/3)}return In.toWorkingColorSpace(this,n),this}setStyle(e,t=so){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=n[1],a=n[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,In.toWorkingColorSpace(this,t),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,In.toWorkingColorSpace(this,t),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,u=parseFloat(s[3])/100;return r(s[4]),this.setHSL(l,c,u,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=n[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=so){const r=o8[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Af(e.r),this.g=Af(e.g),this.b=Af(e.b),this}copyLinearToSRGB(e){return this.r=R2(e.r),this.g=R2(e.g),this.b=R2(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=so){return In.fromWorkingColorSpace(Ur.copy(this),e),Ar(Ur.r*255,0,255)<<16^Ar(Ur.g*255,0,255)<<8^Ar(Ur.b*255,0,255)<<0}getHexString(e=so){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=In.workingColorSpace){In.fromWorkingColorSpace(Ur.copy(this),t);const r=Ur.r,n=Ur.g,s=Ur.b,o=Math.max(r,n,s),a=Math.min(r,n,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case r:l=(n-s)/h+(n<s?6:0);break;case n:l=(s-r)/h+2;break;case s:l=(r-n)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=In.workingColorSpace){return In.fromWorkingColorSpace(Ur.copy(this),t),e.r=Ur.r,e.g=Ur.g,e.b=Ur.b,e}getStyle(e=so){In.fromWorkingColorSpace(Ur.copy(this),e);const t=Ur.r,r=Ur.g,n=Ur.b;return e!==so?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${n.toFixed(3)})`:`rgb(${t*255|0},${r*255|0},${n*255|0})`}offsetHSL(e,t,r){return this.getHSL(Ks),Ks.h+=e,Ks.s+=t,Ks.l+=r,this.setHSL(Ks.h,Ks.s,Ks.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Ks),e.getHSL(Qv);const r=u_(Ks.h,Qv.h,t),n=u_(Ks.s,Qv.s,t),s=u_(Ks.l,Qv.l,t);return this.setHSL(r,n,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,n=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*n,this.g=s[1]*t+s[4]*r+s[7]*n,this.b=s[2]*t+s[5]*r+s[8]*n,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Ur=new Et;Et.NAMES=o8;let mo=class extends $s{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};const Vi=new fe,e1=new Nt;let mr=class{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=d3,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let n=0,s=this.itemSize;n<s;n++)this.array[e+n]=t.array[r+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)e1.fromBufferAttribute(this,t),e1.applyMatrix3(e),this.setXY(t,e1.x,e1.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Vi.fromBufferAttribute(this,t),Vi.applyMatrix3(e),this.setXYZ(t,Vi.x,Vi.y,Vi.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Vi.fromBufferAttribute(this,t),Vi.applyMatrix4(e),this.setXYZ(t,Vi.x,Vi.y,Vi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Vi.fromBufferAttribute(this,t),Vi.applyNormalMatrix(e),this.setXYZ(t,Vi.x,Vi.y,Vi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Vi.fromBufferAttribute(this,t),Vi.transformDirection(e),this.setXYZ(t,Vi.x,Vi.y,Vi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=qa(t,this.array)),t}setX(e,t){return this.normalized&&(t=si(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=qa(t,this.array)),t}setY(e,t){return this.normalized&&(t=si(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=qa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=si(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=qa(t,this.array)),t}setW(e,t){return this.normalized&&(t=si(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=si(t,this.array),r=si(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,n){return e*=this.itemSize,this.normalized&&(t=si(t,this.array),r=si(r,this.array),n=si(n,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this}setXYZW(e,t,r,n,s){return e*=this.itemSize,this.normalized&&(t=si(t,this.array),r=si(r,this.array),n=si(n,this.array),s=si(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==d3&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},a8=class extends mr{constructor(e,t,r){super(new Uint16Array(e),t,r)}},l8=class extends mr{constructor(e,t,r){super(new Uint32Array(e),t,r)}},hi=class extends mr{constructor(e,t,r){super(new Float32Array(e),t,r)}},Qre=0;const hs=new Rt,G2=new $i,Ud=new fe,On=new bl,$g=new bl,or=new fe;let sn=class c8 extends Kh{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Qre++}),this.uuid=vo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(JB(e)?l8:a8)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Xt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return hs.makeRotationFromQuaternion(e),this.applyMatrix4(hs),this}rotateX(e){return hs.makeRotationX(e),this.applyMatrix4(hs),this}rotateY(e){return hs.makeRotationY(e),this.applyMatrix4(hs),this}rotateZ(e){return hs.makeRotationZ(e),this.applyMatrix4(hs),this}translate(e,t,r){return hs.makeTranslation(e,t,r),this.applyMatrix4(hs),this}scale(e,t,r){return hs.makeScale(e,t,r),this.applyMatrix4(hs),this}lookAt(e){return G2.lookAt(e),G2.updateMatrix(),this.applyMatrix4(G2.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ud).negate(),this.translate(Ud.x,Ud.y,Ud.z),this}setFromPoints(e){const t=[];for(let r=0,n=e.length;r<n;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new hi(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new bl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new fe(-1/0,-1/0,-1/0),new fe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,n=t.length;r<n;r++){const s=t[r];On.setFromBufferAttribute(s),this.morphTargetsRelative?(or.addVectors(this.boundingBox.min,On.min),this.boundingBox.expandByPoint(or),or.addVectors(this.boundingBox.max,On.max),this.boundingBox.expandByPoint(or)):(this.boundingBox.expandByPoint(On.min),this.boundingBox.expandByPoint(On.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new xl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new fe,1/0);return}if(e){const r=this.boundingSphere.center;if(On.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];$g.setFromBufferAttribute(a),this.morphTargetsRelative?(or.addVectors(On.min,$g.min),On.expandByPoint(or),or.addVectors(On.max,$g.max),On.expandByPoint(or)):(On.expandByPoint($g.min),On.expandByPoint($g.max))}On.getCenter(r);let n=0;for(let s=0,o=e.count;s<o;s++)or.fromBufferAttribute(e,s),n=Math.max(n,r.distanceToSquared(or));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)or.fromBufferAttribute(a,c),l&&(Ud.fromBufferAttribute(e,c),or.add(Ud)),n=Math.max(n,r.distanceToSquared(or))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,n=t.position.array,s=t.normal.array,o=t.uv.array,a=n.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new mr(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let b=0;b<a;b++)c[b]=new fe,u[b]=new fe;const h=new fe,d=new fe,f=new fe,g=new Nt,v=new Nt,m=new Nt,p=new fe,y=new fe;function _(b,P,N){h.fromArray(n,b*3),d.fromArray(n,P*3),f.fromArray(n,N*3),g.fromArray(o,b*2),v.fromArray(o,P*2),m.fromArray(o,N*2),d.sub(h),f.sub(h),v.sub(g),m.sub(g);const D=1/(v.x*m.y-m.x*v.y);isFinite(D)&&(p.copy(d).multiplyScalar(m.y).addScaledVector(f,-v.y).multiplyScalar(D),y.copy(f).multiplyScalar(v.x).addScaledVector(d,-m.x).multiplyScalar(D),c[b].add(p),c[P].add(p),c[N].add(p),u[b].add(y),u[P].add(y),u[N].add(y))}let x=this.groups;x.length===0&&(x=[{start:0,count:r.length}]);for(let b=0,P=x.length;b<P;++b){const N=x[b],D=N.start,U=N.count;for(let G=D,B=D+U;G<B;G+=3)_(r[G+0],r[G+1],r[G+2])}const w=new fe,S=new fe,A=new fe,k=new fe;function M(b){A.fromArray(s,b*3),k.copy(A);const P=c[b];w.copy(P),w.sub(A.multiplyScalar(A.dot(P))).normalize(),S.crossVectors(k,P);const N=S.dot(u[b])<0?-1:1;l[b*4]=w.x,l[b*4+1]=w.y,l[b*4+2]=w.z,l[b*4+3]=N}for(let b=0,P=x.length;b<P;++b){const N=x[b],D=N.start,U=N.count;for(let G=D,B=D+U;G<B;G+=3)M(r[G+0]),M(r[G+1]),M(r[G+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new mr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,f=r.count;d<f;d++)r.setXYZ(d,0,0,0);const n=new fe,s=new fe,o=new fe,a=new fe,l=new fe,c=new fe,u=new fe,h=new fe;if(e)for(let d=0,f=e.count;d<f;d+=3){const g=e.getX(d+0),v=e.getX(d+1),m=e.getX(d+2);n.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),u.subVectors(o,s),h.subVectors(n,s),u.cross(h),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,m),a.add(u),l.add(u),c.add(u),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(m,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)n.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),h.subVectors(n,s),u.cross(h),r.setXYZ(d+0,u.x,u.y,u.z),r.setXYZ(d+1,u.x,u.y,u.z),r.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)or.fromBufferAttribute(e,t),or.normalize(),e.setXYZ(t,or.x,or.y,or.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,d=new c.constructor(l.length*u);let f=0,g=0;for(let v=0,m=l.length;v<m;v++){a.isInterleavedBufferAttribute?f=l[v]*a.data.stride+a.offset:f=l[v]*u;for(let p=0;p<u;p++)d[g++]=c[f++]}return new mr(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new c8,r=this.index.array,n=this.attributes;for(const a in n){const l=n[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const d=c[u],f=e(d,r);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const n={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h];u.push(f.toJSON(e.data))}u.length>0&&(n[l]=u,s=!0)}s&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const n=e.attributes;for(const c in n){const u=n[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}};const f5=new Rt,Po=new f$,t1=new xl,m5=new fe,zd=new fe,Fd=new fe,Bd=new fe,W2=new fe,i1=new fe,r1=new Nt,n1=new Nt,s1=new Nt,g5=new fe,_5=new fe,y5=new fe,o1=new fe,a1=new fe;let Gi=class extends $i{constructor(e=new sn,t=new mo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,s=r.length;n<s;n++){const o=r[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=n}}}}getVertexPosition(e,t){const r=this.geometry,n=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(n,e);const a=this.morphTargetInfluences;if(s&&a){i1.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],h=s[l];u!==0&&(W2.fromBufferAttribute(h,e),o?i1.addScaledVector(W2,u):i1.addScaledVector(W2.sub(t),u))}t.add(i1)}return this.isSkinnedMesh&&this.applyBoneTransform(e,t),t}raycast(e,t){const r=this.geometry,n=this.material,s=this.matrixWorld;if(n===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),t1.copy(r.boundingSphere),t1.applyMatrix4(s),Po.copy(e.ray).recast(e.near),t1.containsPoint(Po.origin)===!1&&(Po.intersectSphere(t1,m5)===null||Po.origin.distanceToSquared(m5)>(e.far-e.near)**2))||(f5.copy(s).invert(),Po.copy(e.ray).applyMatrix4(f5),r.boundingBox!==null&&Po.intersectsBox(r.boundingBox)===!1))return;let o;const a=r.index,l=r.attributes.position,c=r.attributes.uv,u=r.attributes.uv2,h=r.attributes.normal,d=r.groups,f=r.drawRange;if(a!==null)if(Array.isArray(n))for(let g=0,v=d.length;g<v;g++){const m=d[g],p=n[m.materialIndex],y=Math.max(m.start,f.start),_=Math.min(a.count,Math.min(m.start+m.count,f.start+f.count));for(let x=y,w=_;x<w;x+=3){const S=a.getX(x),A=a.getX(x+1),k=a.getX(x+2);o=l1(this,p,e,Po,c,u,h,S,A,k),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=m.materialIndex,t.push(o))}}else{const g=Math.max(0,f.start),v=Math.min(a.count,f.start+f.count);for(let m=g,p=v;m<p;m+=3){const y=a.getX(m),_=a.getX(m+1),x=a.getX(m+2);o=l1(this,n,e,Po,c,u,h,y,_,x),o&&(o.faceIndex=Math.floor(m/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(n))for(let g=0,v=d.length;g<v;g++){const m=d[g],p=n[m.materialIndex],y=Math.max(m.start,f.start),_=Math.min(l.count,Math.min(m.start+m.count,f.start+f.count));for(let x=y,w=_;x<w;x+=3){const S=x,A=x+1,k=x+2;o=l1(this,p,e,Po,c,u,h,S,A,k),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=m.materialIndex,t.push(o))}}else{const g=Math.max(0,f.start),v=Math.min(l.count,f.start+f.count);for(let m=g,p=v;m<p;m+=3){const y=m,_=m+1,x=m+2;o=l1(this,n,e,Po,c,u,h,y,_,x),o&&(o.faceIndex=Math.floor(m/3),t.push(o))}}}};function ene(i,e,t,r,n,s,o,a){let l;if(e.side===bn?l=r.intersectTriangle(o,s,n,!0,a):l=r.intersectTriangle(n,s,o,e.side===qo,a),l===null)return null;a1.copy(a),a1.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(a1);return c<t.near||c>t.far?null:{distance:c,point:a1.clone(),object:i}}function l1(i,e,t,r,n,s,o,a,l,c){i.getVertexPosition(a,zd),i.getVertexPosition(l,Fd),i.getVertexPosition(c,Bd);const u=ene(i,e,t,r,zd,Fd,Bd,o1);if(u){n&&(r1.fromBufferAttribute(n,a),n1.fromBufferAttribute(n,l),s1.fromBufferAttribute(n,c),u.uv=M0.getInterpolation(o1,zd,Fd,Bd,r1,n1,s1,new Nt)),s&&(r1.fromBufferAttribute(s,a),n1.fromBufferAttribute(s,l),s1.fromBufferAttribute(s,c),u.uv2=M0.getInterpolation(o1,zd,Fd,Bd,r1,n1,s1,new Nt)),o&&(g5.fromBufferAttribute(o,a),_5.fromBufferAttribute(o,l),y5.fromBufferAttribute(o,c),u.normal=M0.getInterpolation(o1,zd,Fd,Bd,g5,_5,y5,new fe),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new fe,materialIndex:0};M0.getNormal(zd,Fd,Bd,h.normal),u.face=h}return u}let Cy=class u8 extends sn{constructor(e=1,t=1,r=1,n=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:s,depthSegments:o};const a=this;n=Math.floor(n),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let d=0,f=0;g("z","y","x",-1,-1,r,t,e,o,s,0),g("z","y","x",1,-1,r,t,-e,o,s,1),g("x","z","y",1,1,e,r,t,n,o,2),g("x","z","y",1,-1,e,r,-t,n,o,3),g("x","y","z",1,-1,e,t,r,n,s,4),g("x","y","z",-1,-1,e,t,-r,n,s,5),this.setIndex(l),this.setAttribute("position",new hi(c,3)),this.setAttribute("normal",new hi(u,3)),this.setAttribute("uv",new hi(h,2));function g(v,m,p,y,_,x,w,S,A,k,M){const b=x/A,P=w/k,N=x/2,D=w/2,U=S/2,G=A+1,B=k+1;let Q=0,j=0;const X=new fe;for(let ne=0;ne<B;ne++){const ge=ne*P-D;for(let pe=0;pe<G;pe++){const V=pe*b-N;X[v]=V*y,X[m]=ge*_,X[p]=U,c.push(X.x,X.y,X.z),X[v]=0,X[m]=0,X[p]=S>0?1:-1,u.push(X.x,X.y,X.z),h.push(pe/A),h.push(1-ne/k),Q+=1}}for(let ne=0;ne<k;ne++)for(let ge=0;ge<A;ge++){const pe=d+ge+G*ne,V=d+ge+G*(ne+1),Y=d+(ge+1)+G*(ne+1),ae=d+(ge+1)+G*ne;l.push(pe,V,ae),l.push(V,Y,ae),j+=6}a.addGroup(f,j,M),f+=j,d+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new u8(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function om(i){const e={};for(const t in i){e[t]={};for(const r in i[t]){const n=i[t][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?n.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=n.clone():Array.isArray(n)?e[t][r]=n.slice():e[t][r]=n}}return e}function Zr(i){const e={};for(let t=0;t<i.length;t++){const r=om(i[t]);for(const n in r)e[n]=r[n]}return e}function tne(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function h8(i){return i.getRenderTarget()===null&&i.outputEncoding===Wt?so:LM}const ine={clone:om,merge:Zr};var rne=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,nne=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;let Uh=class extends $s{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=rne,this.fragmentShader=nne,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=om(e.uniforms),this.uniformsGroups=tne(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const s=this.uniforms[n].value;s&&s.isTexture?t.uniforms[n]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[n]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[n]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[n]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[n]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[n]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[n]={type:"m4",value:s.toArray()}:t.uniforms[n]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const n in this.extensions)this.extensions[n]===!0&&(r[n]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},d8=class extends $i{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Rt,this.projectionMatrix=new Rt,this.projectionMatrixInverse=new Rt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},dr=class extends d8{constructor(e=50,t=1,r=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=sm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ef*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return sm*2*Math.atan(Math.tan(Ef*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,n,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ef*.5*this.fov)/this.zoom,r=2*t,n=this.aspect*r,s=-.5*n;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*n/l,t-=o.offsetY*r/c,n*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+n,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Vd=-90,jd=1;let sne=class extends $i{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const n=new dr(Vd,jd,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(1,0,0),this.add(n);const s=new dr(Vd,jd,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new dr(Vd,jd,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new dr(Vd,jd,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new dr(Vd,jd,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new dr(Vd,jd,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[n,s,o,a,l,c]=this.children,u=e.getRenderTarget(),h=e.toneMapping,d=e.xr.enabled;e.toneMapping=tl,e.xr.enabled=!1;const f=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,n),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=f,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=h,e.xr.enabled=d,r.texture.needsPMREMUpdate=!0}},p8=class extends Zn{constructor(e,t,r,n,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:tm,super(e,t,r,n,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},one=class extends Oh{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},n=[r,r,r,r,r,r];this.texture=new p8(n,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Er}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},n=new Cy(5,5,5),s=new Uh({name:"CubemapFromEquirect",uniforms:om(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:bn,blending:$c});s.uniforms.tEquirect.value=t;const o=new Gi(n,s),a=t.minFilter;return t.minFilter===hl&&(t.minFilter=Er),new sne(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,n){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,n);e.setRenderTarget(s)}};const q2=new fe,ane=new fe,lne=new Xt;let zu=class{constructor(e=new fe(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const n=q2.subVectors(r,t).cross(ane.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(q2),n=this.normal.dot(r);if(n===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/n;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||lne.getNormalMatrix(e),n=this.coplanarPoint(q2).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-n.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Eu=new xl,c1=new fe;let m$=class{constructor(e=new zu,t=new zu,r=new zu,n=new zu,s=new zu,o=new zu){this.planes=[e,t,r,n,s,o]}set(e,t,r,n,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(n),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,n=r[0],s=r[1],o=r[2],a=r[3],l=r[4],c=r[5],u=r[6],h=r[7],d=r[8],f=r[9],g=r[10],v=r[11],m=r[12],p=r[13],y=r[14],_=r[15];return t[0].setComponents(a-n,h-l,v-d,_-m).normalize(),t[1].setComponents(a+n,h+l,v+d,_+m).normalize(),t[2].setComponents(a+s,h+c,v+f,_+p).normalize(),t[3].setComponents(a-s,h-c,v-f,_-p).normalize(),t[4].setComponents(a-o,h-u,v-g,_-y).normalize(),t[5].setComponents(a+o,h+u,v+g,_+y).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Eu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Eu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Eu)}intersectsSprite(e){return Eu.center.set(0,0,0),Eu.radius=.7071067811865476,Eu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Eu)}intersectsSphere(e){const t=this.planes,r=e.center,n=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<n)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const n=t[r];if(c1.x=n.normal.x>0?e.max.x:e.min.x,c1.y=n.normal.y>0?e.max.y:e.min.y,c1.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(c1)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function f8(){let i=null,e=!1,t=null,r=null;function n(s,o){t(s,o),r=i.requestAnimationFrame(n)}return{start:function(){e!==!0&&t!==null&&(r=i.requestAnimationFrame(n),e=!0)},stop:function(){i.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function cne(i,e){const t=e.isWebGL2,r=new WeakMap;function n(c,u){const h=c.array,d=c.usage,f=i.createBuffer();i.bindBuffer(u,f),i.bufferData(u,h,d),c.onUploadCallback();let g;if(h instanceof Float32Array)g=5126;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(h instanceof Int16Array)g=5122;else if(h instanceof Uint32Array)g=5125;else if(h instanceof Int32Array)g=5124;else if(h instanceof Int8Array)g=5120;else if(h instanceof Uint8Array)g=5121;else if(h instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:f,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,h){const d=u.array,f=u.updateRange;i.bindBuffer(h,c),f.count===-1?i.bufferSubData(h,0,d):(t?i.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):i.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(i.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const d=r.get(c);(!d||d.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const h=r.get(c);h===void 0?r.set(c,n(c,u)):h.version<c.version&&(s(h.buffer,c,u),h.version=c.version)}return{get:o,remove:a,update:l}}let m8=class g8 extends sn{constructor(e=1,t=1,r=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(n),c=a+1,u=l+1,h=e/a,d=t/l,f=[],g=[],v=[],m=[];for(let p=0;p<u;p++){const y=p*d-o;for(let _=0;_<c;_++){const x=_*h-s;g.push(x,-y,0),v.push(0,0,1),m.push(_/a),m.push(1-p/l)}}for(let p=0;p<l;p++)for(let y=0;y<a;y++){const _=y+c*p,x=y+c*(p+1),w=y+1+c*(p+1),S=y+1+c*p;f.push(_,x,S),f.push(x,w,S)}this.setIndex(f),this.setAttribute("position",new hi(g,3)),this.setAttribute("normal",new hi(v,3)),this.setAttribute("uv",new hi(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new g8(e.width,e.height,e.widthSegments,e.heightSegments)}};var une=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,hne=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,dne=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,pne=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,fne=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,mne=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,gne="vec3 transformed = vec3( position );",_ne=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,yne=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,vne=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bne=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,xne=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,wne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Mne=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Sne=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Tne=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Ene=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Ane=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,kne=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Cne=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,$ne=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Lne=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Rne=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Pne=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Nne=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Ine=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Dne="gl_FragColor = linearToOutputTexel( gl_FragColor );",One=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Une=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,zne=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Fne=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Bne=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Vne=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,jne=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Hne=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Gne=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Wne=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,qne=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Xne=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Yne=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Kne=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Zne=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Jne=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Qne=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,ese=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,tse=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,ise=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,rse=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,nse=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,sse=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,ose=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,ase=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lse=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,cse=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,use=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hse=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,dse=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,pse=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,fse=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,mse=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,gse=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_se=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,yse=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,vse=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,bse=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,xse=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,wse=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Mse=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,Sse=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Tse=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Ese=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Ase=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,kse=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Cse=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,$se=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Lse=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Rse=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Pse=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Nse=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Ise=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Dse=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Ose=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Use=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,zse=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Fse=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Bse=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Vse=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,jse=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Hse=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Gse=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Wse=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,qse=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Xse=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Yse=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Kse=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Zse=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Jse=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Qse=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,eoe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,toe=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ioe=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_UV2
	attribute vec2 uv2;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,roe=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,noe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const soe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ooe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,aoe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,loe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,coe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,uoe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,hoe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,doe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,poe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,foe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,moe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,goe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,_oe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,yoe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,voe=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,boe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xoe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,woe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Moe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Soe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Toe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Eoe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Aoe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,koe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Coe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,$oe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Loe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Roe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Poe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Noe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Ioe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Doe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Ooe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Uoe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Ut={alphamap_fragment:une,alphamap_pars_fragment:hne,alphatest_fragment:dne,alphatest_pars_fragment:pne,aomap_fragment:fne,aomap_pars_fragment:mne,begin_vertex:gne,beginnormal_vertex:_ne,bsdfs:yne,iridescence_fragment:vne,bumpmap_pars_fragment:bne,clipping_planes_fragment:xne,clipping_planes_pars_fragment:wne,clipping_planes_pars_vertex:Mne,clipping_planes_vertex:Sne,color_fragment:Tne,color_pars_fragment:Ene,color_pars_vertex:Ane,color_vertex:kne,common:Cne,cube_uv_reflection_fragment:$ne,defaultnormal_vertex:Lne,displacementmap_pars_vertex:Rne,displacementmap_vertex:Pne,emissivemap_fragment:Nne,emissivemap_pars_fragment:Ine,encodings_fragment:Dne,encodings_pars_fragment:One,envmap_fragment:Une,envmap_common_pars_fragment:zne,envmap_pars_fragment:Fne,envmap_pars_vertex:Bne,envmap_physical_pars_fragment:Qne,envmap_vertex:Vne,fog_vertex:jne,fog_pars_vertex:Hne,fog_fragment:Gne,fog_pars_fragment:Wne,gradientmap_pars_fragment:qne,lightmap_fragment:Xne,lightmap_pars_fragment:Yne,lights_lambert_fragment:Kne,lights_lambert_pars_fragment:Zne,lights_pars_begin:Jne,lights_toon_fragment:ese,lights_toon_pars_fragment:tse,lights_phong_fragment:ise,lights_phong_pars_fragment:rse,lights_physical_fragment:nse,lights_physical_pars_fragment:sse,lights_fragment_begin:ose,lights_fragment_maps:ase,lights_fragment_end:lse,logdepthbuf_fragment:cse,logdepthbuf_pars_fragment:use,logdepthbuf_pars_vertex:hse,logdepthbuf_vertex:dse,map_fragment:pse,map_pars_fragment:fse,map_particle_fragment:mse,map_particle_pars_fragment:gse,metalnessmap_fragment:_se,metalnessmap_pars_fragment:yse,morphcolor_vertex:vse,morphnormal_vertex:bse,morphtarget_pars_vertex:xse,morphtarget_vertex:wse,normal_fragment_begin:Mse,normal_fragment_maps:Sse,normal_pars_fragment:Tse,normal_pars_vertex:Ese,normal_vertex:Ase,normalmap_pars_fragment:kse,clearcoat_normal_fragment_begin:Cse,clearcoat_normal_fragment_maps:$se,clearcoat_pars_fragment:Lse,iridescence_pars_fragment:Rse,output_fragment:Pse,packing:Nse,premultiplied_alpha_fragment:Ise,project_vertex:Dse,dithering_fragment:Ose,dithering_pars_fragment:Use,roughnessmap_fragment:zse,roughnessmap_pars_fragment:Fse,shadowmap_pars_fragment:Bse,shadowmap_pars_vertex:Vse,shadowmap_vertex:jse,shadowmask_pars_fragment:Hse,skinbase_vertex:Gse,skinning_pars_vertex:Wse,skinning_vertex:qse,skinnormal_vertex:Xse,specularmap_fragment:Yse,specularmap_pars_fragment:Kse,tonemapping_fragment:Zse,tonemapping_pars_fragment:Jse,transmission_fragment:Qse,transmission_pars_fragment:eoe,uv_pars_fragment:toe,uv_pars_vertex:ioe,uv_vertex:roe,worldpos_vertex:noe,background_vert:soe,background_frag:ooe,backgroundCube_vert:aoe,backgroundCube_frag:loe,cube_vert:coe,cube_frag:uoe,depth_vert:hoe,depth_frag:doe,distanceRGBA_vert:poe,distanceRGBA_frag:foe,equirect_vert:moe,equirect_frag:goe,linedashed_vert:_oe,linedashed_frag:yoe,meshbasic_vert:voe,meshbasic_frag:boe,meshlambert_vert:xoe,meshlambert_frag:woe,meshmatcap_vert:Moe,meshmatcap_frag:Soe,meshnormal_vert:Toe,meshnormal_frag:Eoe,meshphong_vert:Aoe,meshphong_frag:koe,meshphysical_vert:Coe,meshphysical_frag:$oe,meshtoon_vert:Loe,meshtoon_frag:Roe,points_vert:Poe,points_frag:Noe,shadow_vert:Ioe,shadow_frag:Doe,sprite_vert:Ooe,sprite_frag:Uoe},it={common:{diffuse:{value:new Et(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Xt},alphaMap:{value:null},alphaMapTransform:{value:new Xt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Xt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Xt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Xt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Xt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Xt},normalScale:{value:new Nt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Xt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Xt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Xt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Xt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Et(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Et(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Xt}},sprite:{diffuse:{value:new Et(16777215)},opacity:{value:1},center:{value:new Nt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Xt},alphaMap:{value:null},alphaTest:{value:0}}},Uo={basic:{uniforms:Zr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.fog]),vertexShader:Ut.meshbasic_vert,fragmentShader:Ut.meshbasic_frag},lambert:{uniforms:Zr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new Et(0)}}]),vertexShader:Ut.meshlambert_vert,fragmentShader:Ut.meshlambert_frag},phong:{uniforms:Zr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new Et(0)},specular:{value:new Et(1118481)},shininess:{value:30}}]),vertexShader:Ut.meshphong_vert,fragmentShader:Ut.meshphong_frag},standard:{uniforms:Zr([it.common,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.roughnessmap,it.metalnessmap,it.fog,it.lights,{emissive:{value:new Et(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ut.meshphysical_vert,fragmentShader:Ut.meshphysical_frag},toon:{uniforms:Zr([it.common,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.gradientmap,it.fog,it.lights,{emissive:{value:new Et(0)}}]),vertexShader:Ut.meshtoon_vert,fragmentShader:Ut.meshtoon_frag},matcap:{uniforms:Zr([it.common,it.bumpmap,it.normalmap,it.displacementmap,it.fog,{matcap:{value:null}}]),vertexShader:Ut.meshmatcap_vert,fragmentShader:Ut.meshmatcap_frag},points:{uniforms:Zr([it.points,it.fog]),vertexShader:Ut.points_vert,fragmentShader:Ut.points_frag},dashed:{uniforms:Zr([it.common,it.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ut.linedashed_vert,fragmentShader:Ut.linedashed_frag},depth:{uniforms:Zr([it.common,it.displacementmap]),vertexShader:Ut.depth_vert,fragmentShader:Ut.depth_frag},normal:{uniforms:Zr([it.common,it.bumpmap,it.normalmap,it.displacementmap,{opacity:{value:1}}]),vertexShader:Ut.meshnormal_vert,fragmentShader:Ut.meshnormal_frag},sprite:{uniforms:Zr([it.sprite,it.fog]),vertexShader:Ut.sprite_vert,fragmentShader:Ut.sprite_frag},background:{uniforms:{uvTransform:{value:new Xt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ut.background_vert,fragmentShader:Ut.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Ut.backgroundCube_vert,fragmentShader:Ut.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ut.cube_vert,fragmentShader:Ut.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ut.equirect_vert,fragmentShader:Ut.equirect_frag},distanceRGBA:{uniforms:Zr([it.common,it.displacementmap,{referencePosition:{value:new fe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ut.distanceRGBA_vert,fragmentShader:Ut.distanceRGBA_frag},shadow:{uniforms:Zr([it.lights,it.fog,{color:{value:new Et(0)},opacity:{value:1}}]),vertexShader:Ut.shadow_vert,fragmentShader:Ut.shadow_frag}};Uo.physical={uniforms:Zr([Uo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Xt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Xt},clearcoatNormalScale:{value:new Nt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Xt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Xt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Xt},sheen:{value:0},sheenColor:{value:new Et(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Xt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Xt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Xt},transmissionSamplerSize:{value:new Nt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Xt},attenuationDistance:{value:0},attenuationColor:{value:new Et(0)},specularColor:{value:new Et(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Xt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Xt}}]),vertexShader:Ut.meshphysical_vert,fragmentShader:Ut.meshphysical_frag};const u1={r:0,b:0,g:0};function zoe(i,e,t,r,n,s,o){const a=new Et(0);let l=s===!0?0:1,c,u,h=null,d=0,f=null;function g(m,p){let y=!1,_=p.isScene===!0?p.background:null;_&&_.isTexture&&(_=(p.backgroundBlurriness>0?t:e).get(_));const x=i.xr,w=x.getSession&&x.getSession();w&&w.environmentBlendMode==="additive"&&(_=null),_===null?v(a,l):_&&_.isColor&&(v(_,1),y=!0),(i.autoClear||y)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),_&&(_.isCubeTexture||_.mapping===CM)?(u===void 0&&(u=new Gi(new Cy(1,1,1),new Uh({name:"BackgroundCubeMaterial",uniforms:om(Uo.backgroundCube.uniforms),vertexShader:Uo.backgroundCube.vertexShader,fragmentShader:Uo.backgroundCube.fragmentShader,side:bn,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(S,A,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(u)),u.material.uniforms.envMap.value=_,u.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,u.material.toneMapped=_.encoding!==Wt,(h!==_||d!==_.version||f!==i.toneMapping)&&(u.material.needsUpdate=!0,h=_,d=_.version,f=i.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null)):_&&_.isTexture&&(c===void 0&&(c=new Gi(new m8(2,2),new Uh({name:"BackgroundMaterial",uniforms:om(Uo.background.uniforms),vertexShader:Uo.background.vertexShader,fragmentShader:Uo.background.fragmentShader,side:qo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(c)),c.material.uniforms.t2D.value=_,c.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,c.material.toneMapped=_.encoding!==Wt,_.matrixAutoUpdate===!0&&_.updateMatrix(),c.material.uniforms.uvTransform.value.copy(_.matrix),(h!==_||d!==_.version||f!==i.toneMapping)&&(c.material.needsUpdate=!0,h=_,d=_.version,f=i.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null))}function v(m,p){m.getRGB(u1,h8(i)),r.buffers.color.setClear(u1.r,u1.g,u1.b,p,o)}return{getClearColor:function(){return a},setClearColor:function(m,p=1){a.set(m),l=p,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(m){l=m,v(a,l)},render:g}}function Foe(i,e,t,r){const n=i.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=m(null);let c=l,u=!1;function h(U,G,B,Q,j){let X=!1;if(o){const ne=v(Q,B,G);c!==ne&&(c=ne,f(c.object)),X=p(U,Q,B,j),X&&y(U,Q,B,j)}else{const ne=G.wireframe===!0;(c.geometry!==Q.id||c.program!==B.id||c.wireframe!==ne)&&(c.geometry=Q.id,c.program=B.id,c.wireframe=ne,X=!0)}j!==null&&t.update(j,34963),(X||u)&&(u=!1,k(U,G,B,Q),j!==null&&i.bindBuffer(34963,t.get(j).buffer))}function d(){return r.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}function f(U){return r.isWebGL2?i.bindVertexArray(U):s.bindVertexArrayOES(U)}function g(U){return r.isWebGL2?i.deleteVertexArray(U):s.deleteVertexArrayOES(U)}function v(U,G,B){const Q=B.wireframe===!0;let j=a[U.id];j===void 0&&(j={},a[U.id]=j);let X=j[G.id];X===void 0&&(X={},j[G.id]=X);let ne=X[Q];return ne===void 0&&(ne=m(d()),X[Q]=ne),ne}function m(U){const G=[],B=[],Q=[];for(let j=0;j<n;j++)G[j]=0,B[j]=0,Q[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:G,enabledAttributes:B,attributeDivisors:Q,object:U,attributes:{},index:null}}function p(U,G,B,Q){const j=c.attributes,X=G.attributes;let ne=0;const ge=B.getAttributes();for(const pe in ge)if(ge[pe].location>=0){const V=j[pe];let Y=X[pe];if(Y===void 0&&(pe==="instanceMatrix"&&U.instanceMatrix&&(Y=U.instanceMatrix),pe==="instanceColor"&&U.instanceColor&&(Y=U.instanceColor)),V===void 0||V.attribute!==Y||Y&&V.data!==Y.data)return!0;ne++}return c.attributesNum!==ne||c.index!==Q}function y(U,G,B,Q){const j={},X=G.attributes;let ne=0;const ge=B.getAttributes();for(const pe in ge)if(ge[pe].location>=0){let V=X[pe];V===void 0&&(pe==="instanceMatrix"&&U.instanceMatrix&&(V=U.instanceMatrix),pe==="instanceColor"&&U.instanceColor&&(V=U.instanceColor));const Y={};Y.attribute=V,V&&V.data&&(Y.data=V.data),j[pe]=Y,ne++}c.attributes=j,c.attributesNum=ne,c.index=Q}function _(){const U=c.newAttributes;for(let G=0,B=U.length;G<B;G++)U[G]=0}function x(U){w(U,0)}function w(U,G){const B=c.newAttributes,Q=c.enabledAttributes,j=c.attributeDivisors;B[U]=1,Q[U]===0&&(i.enableVertexAttribArray(U),Q[U]=1),j[U]!==G&&((r.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](U,G),j[U]=G)}function S(){const U=c.newAttributes,G=c.enabledAttributes;for(let B=0,Q=G.length;B<Q;B++)G[B]!==U[B]&&(i.disableVertexAttribArray(B),G[B]=0)}function A(U,G,B,Q,j,X){r.isWebGL2===!0&&(B===5124||B===5125)?i.vertexAttribIPointer(U,G,B,j,X):i.vertexAttribPointer(U,G,B,Q,j,X)}function k(U,G,B,Q){if(r.isWebGL2===!1&&(U.isInstancedMesh||Q.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const j=Q.attributes,X=B.getAttributes(),ne=G.defaultAttributeValues;for(const ge in X){const pe=X[ge];if(pe.location>=0){let V=j[ge];if(V===void 0&&(ge==="instanceMatrix"&&U.instanceMatrix&&(V=U.instanceMatrix),ge==="instanceColor"&&U.instanceColor&&(V=U.instanceColor)),V!==void 0){const Y=V.normalized,ae=V.itemSize,J=t.get(V);if(J===void 0)continue;const z=J.buffer,_e=J.type,ee=J.bytesPerElement;if(V.isInterleavedBufferAttribute){const te=V.data,be=te.stride,oe=V.offset;if(te.isInstancedInterleavedBuffer){for(let Te=0;Te<pe.locationSize;Te++)w(pe.location+Te,te.meshPerAttribute);U.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let Te=0;Te<pe.locationSize;Te++)x(pe.location+Te);i.bindBuffer(34962,z);for(let Te=0;Te<pe.locationSize;Te++)A(pe.location+Te,ae/pe.locationSize,_e,Y,be*ee,(oe+ae/pe.locationSize*Te)*ee)}else{if(V.isInstancedBufferAttribute){for(let te=0;te<pe.locationSize;te++)w(pe.location+te,V.meshPerAttribute);U.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let te=0;te<pe.locationSize;te++)x(pe.location+te);i.bindBuffer(34962,z);for(let te=0;te<pe.locationSize;te++)A(pe.location+te,ae/pe.locationSize,_e,Y,ae*ee,ae/pe.locationSize*te*ee)}}else if(ne!==void 0){const Y=ne[ge];if(Y!==void 0)switch(Y.length){case 2:i.vertexAttrib2fv(pe.location,Y);break;case 3:i.vertexAttrib3fv(pe.location,Y);break;case 4:i.vertexAttrib4fv(pe.location,Y);break;default:i.vertexAttrib1fv(pe.location,Y)}}}}S()}function M(){N();for(const U in a){const G=a[U];for(const B in G){const Q=G[B];for(const j in Q)g(Q[j].object),delete Q[j];delete G[B]}delete a[U]}}function b(U){if(a[U.id]===void 0)return;const G=a[U.id];for(const B in G){const Q=G[B];for(const j in Q)g(Q[j].object),delete Q[j];delete G[B]}delete a[U.id]}function P(U){for(const G in a){const B=a[G];if(B[U.id]===void 0)continue;const Q=B[U.id];for(const j in Q)g(Q[j].object),delete Q[j];delete B[U.id]}}function N(){D(),u=!0,c!==l&&(c=l,f(c.object))}function D(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:N,resetDefaultState:D,dispose:M,releaseStatesOfGeometry:b,releaseStatesOfProgram:P,initAttributes:_,enableAttribute:x,disableUnusedAttributes:S}}function Boe(i,e,t,r){const n=r.isWebGL2;let s;function o(c){s=c}function a(c,u){i.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,h){if(h===0)return;let d,f;if(n)d=i,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](s,c,u,h),t.update(u,s,h)}this.setMode=o,this.render=a,this.renderInstances=l}function Voe(i,e,t){let r;function n(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const A=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(A){if(A==="highp"){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";A="mediump"}return A==="mediump"&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&i.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,h=i.getParameter(34930),d=i.getParameter(35660),f=i.getParameter(3379),g=i.getParameter(34076),v=i.getParameter(34921),m=i.getParameter(36347),p=i.getParameter(36348),y=i.getParameter(36349),_=d>0,x=o||e.has("OES_texture_float"),w=_&&x,S=o?i.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:n,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:m,maxVaryings:p,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:x,floatVertexTextures:w,maxSamples:S}}function joe(i){const e=this;let t=null,r=0,n=!1,s=!1;const o=new zu,a=new Xt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||r!==0||n;return n=d,r=h.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,f){const g=h.clippingPlanes,v=h.clipIntersection,m=h.clipShadows,p=i.get(h);if(!n||g===null||g.length===0||s&&!m)s?u(null):c();else{const y=s?0:r,_=y*4;let x=p.clippingState||null;l.value=x,x=u(g,d,_,f);for(let w=0;w!==_;++w)x[w]=t[w];p.clippingState=x,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(h,d,f,g){const v=h!==null?h.length:0;let m=null;if(v!==0){if(m=l.value,g!==!0||m===null){const p=f+v*4,y=d.matrixWorldInverse;a.getNormalMatrix(y),(m===null||m.length<p)&&(m=new Float32Array(p));for(let _=0,x=f;_!==v;++_,x+=4)o.copy(h[_]).applyMatrix4(y,a),o.normal.toArray(m,x),m[x+3]=o.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,m}}function Hoe(i){let e=new WeakMap;function t(o,a){return a===l3?o.mapping=tm:a===c3&&(o.mapping=im),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===l3||a===c3)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new one(l.height/2);return c.fromEquirectangularTexture(i,o),e.set(o,c),o.addEventListener("dispose",n),t(c.texture,o.mapping)}else return null}}return o}function n(o){const a=o.target;a.removeEventListener("dispose",n);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}let PM=class extends d8{constructor(e=-1,t=1,r=1,n=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=n,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,n,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=n+t,l=n-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const sf=4,v5=[.125,.215,.35,.446,.526,.582],Wu=20,X2=new PM,b5=new Et;let Y2=null;const Fu=(1+Math.sqrt(5))/2,Hd=1/Fu,x5=[new fe(1,1,1),new fe(-1,1,1),new fe(1,1,-1),new fe(-1,1,-1),new fe(0,Fu,Hd),new fe(0,Fu,-Hd),new fe(Hd,0,Fu),new fe(-Hd,0,Fu),new fe(Fu,Hd,0),new fe(-Fu,Hd,0)];let w5=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,n=100){Y2=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,n,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=T5(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=S5(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Y2),e.scissorTest=!1,h1(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===tm||e.mapping===im?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Y2=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Er,minFilter:Er,generateMipmaps:!1,type:ly,format:Ms,encoding:Dh,depthBuffer:!1},n=M5(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=M5(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Goe(s)),this._blurMaterial=Woe(s,e,t)}return n}_compileMaterial(e){const t=new Gi(this._lodPlanes[0],e);this._renderer.compile(t,X2)}_sceneToCubeUV(e,t,r,n){const s=new dr(90,1,t,r),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,u=l.toneMapping;l.getClearColor(b5),l.toneMapping=tl,l.autoClear=!1;const h=new mo({name:"PMREM.Background",side:bn,depthWrite:!1,depthTest:!1}),d=new Gi(new Cy,h);let f=!1;const g=e.background;g?g.isColor&&(h.color.copy(g),e.background=null,f=!0):(h.color.copy(b5),f=!0);for(let v=0;v<6;v++){const m=v%3;m===0?(s.up.set(0,o[v],0),s.lookAt(a[v],0,0)):m===1?(s.up.set(0,0,o[v]),s.lookAt(0,a[v],0)):(s.up.set(0,o[v],0),s.lookAt(0,0,a[v]));const p=this._cubeSize;h1(n,m*p,v>2?p:0,p,p),l.setRenderTarget(n),f&&l.render(d,s),l.render(e,s)}d.geometry.dispose(),d.material.dispose(),l.toneMapping=u,l.autoClear=c,e.background=g}_textureToCubeUV(e,t){const r=this._renderer,n=e.mapping===tm||e.mapping===im;n?(this._cubemapMaterial===null&&(this._cubemapMaterial=T5()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=S5());const s=n?this._cubemapMaterial:this._equirectMaterial,o=new Gi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;h1(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,X2)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){const s=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),o=x5[(n-1)%x5.length];this._blur(e,n-1,n,s,o)}t.autoClear=r}_blur(e,t,r,n,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,n,"latitudinal",s),this._halfBlur(o,e,r,r,n,"longitudinal",s)}_halfBlur(e,t,r,n,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new Gi(this._lodPlanes[n],c),d=c.uniforms,f=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*Wu-1),v=s/g,m=isFinite(s)?1+Math.floor(u*v):Wu;m>Wu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Wu}`);const p=[];let y=0;for(let A=0;A<Wu;++A){const k=A/v,M=Math.exp(-k*k/2);p.push(M),A===0?y+=M:A<m&&(y+=2*M)}for(let A=0;A<p.length;A++)p[A]=p[A]/y;d.envMap.value=e.texture,d.samples.value=m,d.weights.value=p,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:_}=this;d.dTheta.value=g,d.mipInt.value=_-r;const x=this._sizeLods[n],w=3*x*(n>_-sf?n-_+sf:0),S=4*(this._cubeSize-x);h1(t,w,S,3*x,2*x),l.setRenderTarget(t),l.render(h,X2)}};function Goe(i){const e=[],t=[],r=[];let n=i;const s=i-sf+1+v5.length;for(let o=0;o<s;o++){const a=Math.pow(2,n);t.push(a);let l=1/a;o>i-sf?l=v5[o-i+sf-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,h=1+c,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,g=6,v=3,m=2,p=1,y=new Float32Array(v*g*f),_=new Float32Array(m*g*f),x=new Float32Array(p*g*f);for(let S=0;S<f;S++){const A=S%3*2/3-1,k=S>2?0:-1,M=[A,k,0,A+2/3,k,0,A+2/3,k+1,0,A,k,0,A+2/3,k+1,0,A,k+1,0];y.set(M,v*g*S),_.set(d,m*g*S);const b=[S,S,S,S,S,S];x.set(b,p*g*S)}const w=new sn;w.setAttribute("position",new mr(y,v)),w.setAttribute("uv",new mr(_,m)),w.setAttribute("faceIndex",new mr(x,p)),e.push(w),n>sf&&n--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function M5(i,e,t){const r=new Oh(i,e,t);return r.texture.mapping=CM,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function h1(i,e,t,r,n){i.viewport.set(e,t,r,n),i.scissor.set(e,t,r,n)}function Woe(i,e,t){const r=new Float32Array(Wu),n=new fe(0,1,0);return new Uh({name:"SphericalGaussianBlur",defines:{n:Wu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:g$(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:$c,depthTest:!1,depthWrite:!1})}function S5(){return new Uh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:g$(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:$c,depthTest:!1,depthWrite:!1})}function T5(){return new Uh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:g$(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:$c,depthTest:!1,depthWrite:!1})}function g$(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function qoe(i){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===l3||l===c3,u=l===tm||l===im;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new w5(i)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(c&&h&&h.height>0||u&&h&&n(h)){t===null&&(t=new w5(i));const d=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function n(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function Xoe(i){const e={};function t(r){if(e[r]!==void 0)return e[r];let n;switch(r){case"WEBGL_depth_texture":n=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=i.getExtension(r)}return e[r]=n,n}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const n=t(r);return n===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),n}}}function Yoe(i,e,t,r){const n={},s=new WeakMap;function o(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const g in d.attributes)e.remove(d.attributes[g]);d.removeEventListener("dispose",o),delete n[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(h,d){return n[d.id]===!0||(d.addEventListener("dispose",o),n[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const g in d)e.update(d[g],34962);const f=h.morphAttributes;for(const g in f){const v=f[g];for(let m=0,p=v.length;m<p;m++)e.update(v[m],34962)}}function c(h){const d=[],f=h.index,g=h.attributes.position;let v=0;if(f!==null){const y=f.array;v=f.version;for(let _=0,x=y.length;_<x;_+=3){const w=y[_+0],S=y[_+1],A=y[_+2];d.push(w,S,S,A,A,w)}}else{const y=g.array;v=g.version;for(let _=0,x=y.length/3-1;_<x;_+=3){const w=_+0,S=_+1,A=_+2;d.push(w,S,S,A,A,w)}}const m=new(JB(d)?l8:a8)(d,1);m.version=v;const p=s.get(h);p&&e.remove(p),s.set(h,m)}function u(h){const d=s.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&c(h)}else c(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function Koe(i,e,t,r){const n=r.isWebGL2;let s;function o(d){s=d}let a,l;function c(d){a=d.type,l=d.bytesPerElement}function u(d,f){i.drawElements(s,f,a,d*l),t.update(f,s,1)}function h(d,f,g){if(g===0)return;let v,m;if(n)v=i,m="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[m](s,f,a,d*l,g),t.update(f,s,g)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=h}function Zoe(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function n(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:n,update:r}}function Joe(i,e){return i[0]-e[0]}function Qoe(i,e){return Math.abs(e[1])-Math.abs(i[1])}function eae(i,e,t){const r={},n=new Float32Array(8),s=new WeakMap,o=new _i,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,h){const d=c.morphTargetInfluences;if(e.isWebGL2===!0){const f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,g=f!==void 0?f.length:0;let v=s.get(u);if(v===void 0||v.count!==g){let y=function(){D.dispose(),s.delete(u),u.removeEventListener("dispose",y)};v!==void 0&&v.texture.dispose();const _=u.morphAttributes.position!==void 0,x=u.morphAttributes.normal!==void 0,w=u.morphAttributes.color!==void 0,S=u.morphAttributes.position||[],A=u.morphAttributes.normal||[],k=u.morphAttributes.color||[];let M=0;_===!0&&(M=1),x===!0&&(M=2),w===!0&&(M=3);let b=u.attributes.position.count*M,P=1;b>e.maxTextureSize&&(P=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);const N=new Float32Array(b*P*4*g),D=new i8(N,b,P,g);D.type=mc,D.needsUpdate=!0;const U=M*4;for(let G=0;G<g;G++){const B=S[G],Q=A[G],j=k[G],X=b*P*4*G;for(let ne=0;ne<B.count;ne++){const ge=ne*U;_===!0&&(o.fromBufferAttribute(B,ne),N[X+ge+0]=o.x,N[X+ge+1]=o.y,N[X+ge+2]=o.z,N[X+ge+3]=0),x===!0&&(o.fromBufferAttribute(Q,ne),N[X+ge+4]=o.x,N[X+ge+5]=o.y,N[X+ge+6]=o.z,N[X+ge+7]=0),w===!0&&(o.fromBufferAttribute(j,ne),N[X+ge+8]=o.x,N[X+ge+9]=o.y,N[X+ge+10]=o.z,N[X+ge+11]=j.itemSize===4?o.w:1)}}v={count:g,texture:D,size:new Nt(b,P)},s.set(u,v),u.addEventListener("dispose",y)}let m=0;for(let y=0;y<d.length;y++)m+=d[y];const p=u.morphTargetsRelative?1:1-m;h.getUniforms().setValue(i,"morphTargetBaseInfluence",p),h.getUniforms().setValue(i,"morphTargetInfluences",d),h.getUniforms().setValue(i,"morphTargetsTexture",v.texture,t),h.getUniforms().setValue(i,"morphTargetsTextureSize",v.size)}else{const f=d===void 0?0:d.length;let g=r[u.id];if(g===void 0||g.length!==f){g=[];for(let _=0;_<f;_++)g[_]=[_,0];r[u.id]=g}for(let _=0;_<f;_++){const x=g[_];x[0]=_,x[1]=d[_]}g.sort(Qoe);for(let _=0;_<8;_++)_<f&&g[_][1]?(a[_][0]=g[_][0],a[_][1]=g[_][1]):(a[_][0]=Number.MAX_SAFE_INTEGER,a[_][1]=0);a.sort(Joe);const v=u.morphAttributes.position,m=u.morphAttributes.normal;let p=0;for(let _=0;_<8;_++){const x=a[_],w=x[0],S=x[1];w!==Number.MAX_SAFE_INTEGER&&S?(v&&u.getAttribute("morphTarget"+_)!==v[w]&&u.setAttribute("morphTarget"+_,v[w]),m&&u.getAttribute("morphNormal"+_)!==m[w]&&u.setAttribute("morphNormal"+_,m[w]),n[_]=S,p+=S):(v&&u.hasAttribute("morphTarget"+_)===!0&&u.deleteAttribute("morphTarget"+_),m&&u.hasAttribute("morphNormal"+_)===!0&&u.deleteAttribute("morphNormal"+_),n[_]=0)}const y=u.morphTargetsRelative?1:1-p;h.getUniforms().setValue(i,"morphTargetBaseInfluence",y),h.getUniforms().setValue(i,"morphTargetInfluences",n)}}return{update:l}}function tae(i,e,t,r){let n=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,h=e.get(l,u);return n.get(h)!==c&&(e.update(h),n.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),h}function o(){n=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const _8=new Zn,y8=new i8,v8=new Hre,b8=new p8,E5=[],A5=[],k5=new Float32Array(16),C5=new Float32Array(9),$5=new Float32Array(4);function Lm(i,e,t){const r=i[0];if(r<=0||r>0)return i;const n=e*t;let s=E5[n];if(s===void 0&&(s=new Float32Array(n),E5[n]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function Ji(i,e){if(i.length!==e.length)return!1;for(let t=0,r=i.length;t<r;t++)if(i[t]!==e[t])return!1;return!0}function Qi(i,e){for(let t=0,r=e.length;t<r;t++)i[t]=e[t]}function NM(i,e){let t=A5[e];t===void 0&&(t=new Int32Array(e),A5[e]=t);for(let r=0;r!==e;++r)t[r]=i.allocateTextureUnit();return t}function iae(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function rae(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ji(t,e))return;i.uniform2fv(this.addr,e),Qi(t,e)}}function nae(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ji(t,e))return;i.uniform3fv(this.addr,e),Qi(t,e)}}function sae(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ji(t,e))return;i.uniform4fv(this.addr,e),Qi(t,e)}}function oae(i,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ji(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Qi(t,e)}else{if(Ji(t,r))return;$5.set(r),i.uniformMatrix2fv(this.addr,!1,$5),Qi(t,r)}}function aae(i,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ji(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Qi(t,e)}else{if(Ji(t,r))return;C5.set(r),i.uniformMatrix3fv(this.addr,!1,C5),Qi(t,r)}}function lae(i,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ji(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Qi(t,e)}else{if(Ji(t,r))return;k5.set(r),i.uniformMatrix4fv(this.addr,!1,k5),Qi(t,r)}}function cae(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function uae(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ji(t,e))return;i.uniform2iv(this.addr,e),Qi(t,e)}}function hae(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ji(t,e))return;i.uniform3iv(this.addr,e),Qi(t,e)}}function dae(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ji(t,e))return;i.uniform4iv(this.addr,e),Qi(t,e)}}function pae(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function fae(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ji(t,e))return;i.uniform2uiv(this.addr,e),Qi(t,e)}}function mae(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ji(t,e))return;i.uniform3uiv(this.addr,e),Qi(t,e)}}function gae(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ji(t,e))return;i.uniform4uiv(this.addr,e),Qi(t,e)}}function _ae(i,e,t){const r=this.cache,n=t.allocateTextureUnit();r[0]!==n&&(i.uniform1i(this.addr,n),r[0]=n),t.setTexture2D(e||_8,n)}function yae(i,e,t){const r=this.cache,n=t.allocateTextureUnit();r[0]!==n&&(i.uniform1i(this.addr,n),r[0]=n),t.setTexture3D(e||v8,n)}function vae(i,e,t){const r=this.cache,n=t.allocateTextureUnit();r[0]!==n&&(i.uniform1i(this.addr,n),r[0]=n),t.setTextureCube(e||b8,n)}function bae(i,e,t){const r=this.cache,n=t.allocateTextureUnit();r[0]!==n&&(i.uniform1i(this.addr,n),r[0]=n),t.setTexture2DArray(e||y8,n)}function xae(i){switch(i){case 5126:return iae;case 35664:return rae;case 35665:return nae;case 35666:return sae;case 35674:return oae;case 35675:return aae;case 35676:return lae;case 5124:case 35670:return cae;case 35667:case 35671:return uae;case 35668:case 35672:return hae;case 35669:case 35673:return dae;case 5125:return pae;case 36294:return fae;case 36295:return mae;case 36296:return gae;case 35678:case 36198:case 36298:case 36306:case 35682:return _ae;case 35679:case 36299:case 36307:return yae;case 35680:case 36300:case 36308:case 36293:return vae;case 36289:case 36303:case 36311:case 36292:return bae}}function wae(i,e){i.uniform1fv(this.addr,e)}function Mae(i,e){const t=Lm(e,this.size,2);i.uniform2fv(this.addr,t)}function Sae(i,e){const t=Lm(e,this.size,3);i.uniform3fv(this.addr,t)}function Tae(i,e){const t=Lm(e,this.size,4);i.uniform4fv(this.addr,t)}function Eae(i,e){const t=Lm(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function Aae(i,e){const t=Lm(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function kae(i,e){const t=Lm(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function Cae(i,e){i.uniform1iv(this.addr,e)}function $ae(i,e){i.uniform2iv(this.addr,e)}function Lae(i,e){i.uniform3iv(this.addr,e)}function Rae(i,e){i.uniform4iv(this.addr,e)}function Pae(i,e){i.uniform1uiv(this.addr,e)}function Nae(i,e){i.uniform2uiv(this.addr,e)}function Iae(i,e){i.uniform3uiv(this.addr,e)}function Dae(i,e){i.uniform4uiv(this.addr,e)}function Oae(i,e,t){const r=this.cache,n=e.length,s=NM(t,n);Ji(r,s)||(i.uniform1iv(this.addr,s),Qi(r,s));for(let o=0;o!==n;++o)t.setTexture2D(e[o]||_8,s[o])}function Uae(i,e,t){const r=this.cache,n=e.length,s=NM(t,n);Ji(r,s)||(i.uniform1iv(this.addr,s),Qi(r,s));for(let o=0;o!==n;++o)t.setTexture3D(e[o]||v8,s[o])}function zae(i,e,t){const r=this.cache,n=e.length,s=NM(t,n);Ji(r,s)||(i.uniform1iv(this.addr,s),Qi(r,s));for(let o=0;o!==n;++o)t.setTextureCube(e[o]||b8,s[o])}function Fae(i,e,t){const r=this.cache,n=e.length,s=NM(t,n);Ji(r,s)||(i.uniform1iv(this.addr,s),Qi(r,s));for(let o=0;o!==n;++o)t.setTexture2DArray(e[o]||y8,s[o])}function Bae(i){switch(i){case 5126:return wae;case 35664:return Mae;case 35665:return Sae;case 35666:return Tae;case 35674:return Eae;case 35675:return Aae;case 35676:return kae;case 5124:case 35670:return Cae;case 35667:case 35671:return $ae;case 35668:case 35672:return Lae;case 35669:case 35673:return Rae;case 5125:return Pae;case 36294:return Nae;case 36295:return Iae;case 36296:return Dae;case 35678:case 36198:case 36298:case 36306:case 35682:return Oae;case 35679:case 36299:case 36307:return Uae;case 35680:case 36300:case 36308:case 36293:return zae;case 36289:case 36303:case 36311:case 36292:return Fae}}let Vae=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=xae(t.type)}},jae=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=Bae(t.type)}},Hae=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const n=this.seq;for(let s=0,o=n.length;s!==o;++s){const a=n[s];a.setValue(e,t[a.id],r)}}};const K2=/(\w+)(\])?(\[|\.)?/g;function L5(i,e){i.seq.push(e),i.map[e.id]=e}function Gae(i,e,t){const r=i.name,n=r.length;for(K2.lastIndex=0;;){const s=K2.exec(r),o=K2.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===n){L5(t,c===void 0?new Vae(a,i,e):new jae(a,i,e));break}else{let u=t.map[a];u===void 0&&(u=new Hae(a),L5(t,u)),t=u}}}let Zb=class{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let n=0;n<r;++n){const s=e.getActiveUniform(t,n),o=e.getUniformLocation(t,s.name);Gae(s,o,this)}}setValue(e,t,r,n){const s=this.map[t];s!==void 0&&s.setValue(e,r,n)}setOptional(e,t,r){const n=t[r];n!==void 0&&this.setValue(e,r,n)}static upload(e,t,r,n){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,n)}}static seqWithValue(e,t){const r=[];for(let n=0,s=e.length;n!==s;++n){const o=e[n];o.id in t&&r.push(o)}return r}};function R5(i,e,t){const r=i.createShader(e);return i.shaderSource(r,t),i.compileShader(r),r}let Wae=0;function qae(i,e){const t=i.split(`
`),r=[],n=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=n;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function Xae(i){switch(i){case Dh:return["Linear","( value )"];case Wt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}function P5(i,e,t){const r=i.getShaderParameter(e,35713),n=i.getShaderInfoLog(e).trim();if(r&&n==="")return"";const s=/ERROR: 0:(\d+)/.exec(n);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+n+`

`+qae(i.getShaderSource(e),o)}else return n}function Yae(i,e){const t=Xae(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Kae(i,e){let t;switch(e){case Jie:t="Linear";break;case Qie:t="Reinhard";break;case ere:t="OptimizedCineon";break;case tre:t="ACESFilmic";break;case ire:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Zae(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(S0).join(`
`)}function Jae(i){const e=[];for(const t in i){const r=i[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function Qae(i,e){const t={},r=i.getProgramParameter(e,35721);for(let n=0;n<r;n++){const s=i.getActiveAttrib(e,n),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}function S0(i){return i!==""}function N5(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function I5(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ele=/^[ \t]*#include +<([\w\d./]+)>/gm;function g3(i){return i.replace(ele,tle)}function tle(i,e){const t=Ut[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return g3(t)}const ile=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function D5(i){return i.replace(ile,rle)}function rle(i,e,t,r){let n="";for(let s=parseInt(e);s<parseInt(t);s++)n+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return n}function O5(i){let e="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function nle(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===FB?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===$ie?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===w0&&(e="SHADOWMAP_TYPE_VSM"),e}function sle(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case tm:case im:e="ENVMAP_TYPE_CUBE";break;case CM:e="ENVMAP_TYPE_CUBE_UV";break}return e}function ole(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case im:e="ENVMAP_MODE_REFRACTION";break}return e}function ale(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case kM:e="ENVMAP_BLENDING_MULTIPLY";break;case Kie:e="ENVMAP_BLENDING_MIX";break;case Zie:e="ENVMAP_BLENDING_ADD";break}return e}function lle(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function cle(i,e,t,r){const n=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=nle(t),c=sle(t),u=ole(t),h=ale(t),d=lle(t),f=t.isWebGL2?"":Zae(t),g=Jae(s),v=n.createProgram();let m,p,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(m=[g].filter(S0).join(`
`),m.length>0&&(m+=`
`),p=[f,g].filter(S0).join(`
`),p.length>0&&(p+=`
`)):(m=[O5(t),"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(S0).join(`
`),p=[f,O5(t),"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==tl?"#define TONE_MAPPING":"",t.toneMapping!==tl?Ut.tonemapping_pars_fragment:"",t.toneMapping!==tl?Kae("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ut.encodings_pars_fragment,Yae("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(S0).join(`
`)),o=g3(o),o=N5(o,t),o=I5(o,t),a=g3(a),a=N5(a,t),a=I5(a,t),o=D5(o),a=D5(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,p=["#define varying in",t.glslVersion===r5?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===r5?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);const _=y+m+o,x=y+p+a,w=R5(n,35633,_),S=R5(n,35632,x);if(n.attachShader(v,w),n.attachShader(v,S),t.index0AttributeName!==void 0?n.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&n.bindAttribLocation(v,0,"position"),n.linkProgram(v),i.debug.checkShaderErrors){const M=n.getProgramInfoLog(v).trim(),b=n.getShaderInfoLog(w).trim(),P=n.getShaderInfoLog(S).trim();let N=!0,D=!0;if(n.getProgramParameter(v,35714)===!1)if(N=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(n,v,w,S);else{const U=P5(n,w,"vertex"),G=P5(n,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(v,35715)+`

Program Info Log: `+M+`
`+U+`
`+G)}else M!==""?console.warn("THREE.WebGLProgram: Program Info Log:",M):(b===""||P==="")&&(D=!1);D&&(this.diagnostics={runnable:N,programLog:M,vertexShader:{log:b,prefix:m},fragmentShader:{log:P,prefix:p}})}n.deleteShader(w),n.deleteShader(S);let A;this.getUniforms=function(){return A===void 0&&(A=new Zb(n,v)),A};let k;return this.getAttributes=function(){return k===void 0&&(k=Qae(n,v)),k},this.destroy=function(){r.releaseStatesOfProgram(this),n.deleteProgram(v),this.program=void 0},this.name=t.shaderName,this.id=Wae++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=w,this.fragmentShader=S,this}let ule=0,hle=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,n=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(n)===!1&&(o.add(n),n.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new dle(e),t.set(e,r)),r}},dle=class{constructor(e){this.id=ule++,this.code=e,this.usedTimes=0}};function ple(i,e,t,r,n,s,o){const a=new s8,l=new hle,c=[],u=n.isWebGL2,h=n.logarithmicDepthBuffer,d=n.vertexTextures;let f=n.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(M){return M===1?"uv2":"uv"}function m(M,b,P,N,D){const U=N.fog,G=D.geometry,B=M.isMeshStandardMaterial?N.environment:null,Q=(M.isMeshStandardMaterial?t:e).get(M.envMap||B),j=Q&&Q.mapping===CM?Q.image.height:null,X=g[M.type];M.precision!==null&&(f=n.getMaxPrecision(M.precision),f!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",f,"instead."));const ne=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,ge=ne!==void 0?ne.length:0;let pe=0;G.morphAttributes.position!==void 0&&(pe=1),G.morphAttributes.normal!==void 0&&(pe=2),G.morphAttributes.color!==void 0&&(pe=3);let V,Y,ae,J;if(X){const ye=Uo[X];V=ye.vertexShader,Y=ye.fragmentShader}else V=M.vertexShader,Y=M.fragmentShader,l.update(M),ae=l.getVertexShaderID(M),J=l.getFragmentShaderID(M);const z=i.getRenderTarget(),_e=D.isInstancedMesh===!0,ee=!!M.map,te=!!M.matcap,be=!!Q,oe=!!M.aoMap,Te=!!M.lightMap,Ae=!!M.bumpMap,Qe=!!M.normalMap,Ze=!!M.displacementMap,ht=!!M.emissiveMap,wt=!!M.metalnessMap,st=!!M.roughnessMap,ft=M.clearcoat>0,Ft=M.iridescence>0,O=M.sheen>0,R=M.transmission>0,se=ft&&!!M.clearcoatMap,xe=ft&&!!M.clearcoatNormalMap,we=ft&&!!M.clearcoatRoughnessMap,Se=Ft&&!!M.iridescenceMap,F=Ft&&!!M.iridescenceThicknessMap,de=O&&!!M.sheenColorMap,ie=O&&!!M.sheenRoughnessMap,Ee=!!M.specularMap,Ne=!!M.specularColorMap,Ie=!!M.specularIntensityMap,$e=R&&!!M.transmissionMap,Le=R&&!!M.thicknessMap,Ge=!!M.gradientMap,dt=!!M.alphaMap,Tt=M.alphaTest>0,H=!!M.extensions,ce=!!G.attributes.uv2;return{isWebGL2:u,shaderID:X,shaderName:M.type,vertexShader:V,fragmentShader:Y,defines:M.defines,customVertexShaderID:ae,customFragmentShaderID:J,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:f,instancing:_e,instancingColor:_e&&D.instanceColor!==null,supportsVertexTextures:d,outputEncoding:z===null?i.outputEncoding:z.isXRRenderTarget===!0?z.texture.encoding:Dh,map:ee,matcap:te,envMap:be,envMapMode:be&&Q.mapping,envMapCubeUVHeight:j,aoMap:oe,lightMap:Te,bumpMap:Ae,normalMap:Qe,displacementMap:d&&Ze,emissiveMap:ht,normalMapObjectSpace:Qe&&M.normalMapType===wre,normalMapTangentSpace:Qe&&M.normalMapType===$M,decodeVideoTexture:ee&&M.map.isVideoTexture===!0&&M.map.encoding===Wt,metalnessMap:wt,roughnessMap:st,clearcoat:ft,clearcoatMap:se,clearcoatNormalMap:xe,clearcoatRoughnessMap:we,iridescence:Ft,iridescenceMap:Se,iridescenceThicknessMap:F,sheen:O,sheenColorMap:de,sheenRoughnessMap:ie,specularMap:Ee,specularColorMap:Ne,specularIntensityMap:Ie,transmission:R,transmissionMap:$e,thicknessMap:Le,gradientMap:Ge,opaque:M.transparent===!1&&M.blending===Sf,alphaMap:dt,alphaTest:Tt,combine:M.combine,mapUv:ee&&v(M.map.channel),aoMapUv:oe&&v(M.aoMap.channel),lightMapUv:Te&&v(M.lightMap.channel),bumpMapUv:Ae&&v(M.bumpMap.channel),normalMapUv:Qe&&v(M.normalMap.channel),displacementMapUv:Ze&&v(M.displacementMap.channel),emissiveMapUv:ht&&v(M.emissiveMap.channel),metalnessMapUv:wt&&v(M.metalnessMap.channel),roughnessMapUv:st&&v(M.roughnessMap.channel),clearcoatMapUv:se&&v(M.clearcoatMap.channel),clearcoatNormalMapUv:xe&&v(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:we&&v(M.clearcoatRoughnessMap.channel),iridescenceMapUv:Se&&v(M.iridescenceMap.channel),iridescenceThicknessMapUv:F&&v(M.iridescenceThicknessMap.channel),sheenColorMapUv:de&&v(M.sheenColorMap.channel),sheenRoughnessMapUv:ie&&v(M.sheenRoughnessMap.channel),specularMapUv:Ee&&v(M.specularMap.channel),specularColorMapUv:Ne&&v(M.specularColorMap.channel),specularIntensityMapUv:Ie&&v(M.specularIntensityMap.channel),transmissionMapUv:$e&&v(M.transmissionMap.channel),thicknessMapUv:Le&&v(M.thicknessMap.channel),alphaMapUv:dt&&v(M.alphaMap.channel),vertexTangents:Qe&&!!G.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!G.attributes.color&&G.attributes.color.itemSize===4,vertexUvs2:ce,pointsUvs:D.isPoints===!0&&!!G.attributes.uv&&(ee||dt),fog:!!U,useFog:M.fog===!0,fogExp2:U&&U.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:D.isSkinnedMesh===!0,morphTargets:G.morphAttributes.position!==void 0,morphNormals:G.morphAttributes.normal!==void 0,morphColors:G.morphAttributes.color!==void 0,morphTargetsCount:ge,morphTextureStride:pe,numDirLights:b.directional.length,numPointLights:b.point.length,numSpotLights:b.spot.length,numSpotLightMaps:b.spotLightMap.length,numRectAreaLights:b.rectArea.length,numHemiLights:b.hemi.length,numDirLightShadows:b.directionalShadowMap.length,numPointLightShadows:b.pointShadowMap.length,numSpotLightShadows:b.spotShadowMap.length,numSpotLightShadowsWithMaps:b.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:i.shadowMap.enabled&&P.length>0,shadowMapType:i.shadowMap.type,toneMapping:M.toneMapped?i.toneMapping:tl,useLegacyLights:i.useLegacyLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===ws,flipSided:M.side===bn,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:H&&M.extensions.derivatives===!0,extensionFragDepth:H&&M.extensions.fragDepth===!0,extensionDrawBuffers:H&&M.extensions.drawBuffers===!0,extensionShaderTextureLOD:H&&M.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function p(M){const b=[];if(M.shaderID?b.push(M.shaderID):(b.push(M.customVertexShaderID),b.push(M.customFragmentShaderID)),M.defines!==void 0)for(const P in M.defines)b.push(P),b.push(M.defines[P]);return M.isRawShaderMaterial===!1&&(y(b,M),_(b,M),b.push(i.outputEncoding)),b.push(M.customProgramCacheKey),b.join()}function y(M,b){M.push(b.precision),M.push(b.outputEncoding),M.push(b.envMapMode),M.push(b.envMapCubeUVHeight),M.push(b.mapUv),M.push(b.alphaMapUv),M.push(b.lightMapUv),M.push(b.aoMapUv),M.push(b.bumpMapUv),M.push(b.normalMapUv),M.push(b.displacementMapUv),M.push(b.emissiveMapUv),M.push(b.metalnessMapUv),M.push(b.roughnessMapUv),M.push(b.clearcoatMapUv),M.push(b.clearcoatNormalMapUv),M.push(b.clearcoatRoughnessMapUv),M.push(b.iridescenceMapUv),M.push(b.iridescenceThicknessMapUv),M.push(b.sheenColorMapUv),M.push(b.sheenRoughnessMapUv),M.push(b.specularMapUv),M.push(b.specularColorMapUv),M.push(b.specularIntensityMapUv),M.push(b.transmissionMapUv),M.push(b.thicknessMapUv),M.push(b.combine),M.push(b.fogExp2),M.push(b.sizeAttenuation),M.push(b.morphTargetsCount),M.push(b.morphAttributeCount),M.push(b.numDirLights),M.push(b.numPointLights),M.push(b.numSpotLights),M.push(b.numSpotLightMaps),M.push(b.numHemiLights),M.push(b.numRectAreaLights),M.push(b.numDirLightShadows),M.push(b.numPointLightShadows),M.push(b.numSpotLightShadows),M.push(b.numSpotLightShadowsWithMaps),M.push(b.shadowMapType),M.push(b.toneMapping),M.push(b.numClippingPlanes),M.push(b.numClipIntersection),M.push(b.depthPacking)}function _(M,b){a.disableAll(),b.isWebGL2&&a.enable(0),b.supportsVertexTextures&&a.enable(1),b.instancing&&a.enable(2),b.instancingColor&&a.enable(3),b.matcap&&a.enable(4),b.envMap&&a.enable(5),b.normalMapObjectSpace&&a.enable(6),b.normalMapTangentSpace&&a.enable(7),b.clearcoat&&a.enable(8),b.iridescence&&a.enable(9),b.alphaTest&&a.enable(10),b.vertexColors&&a.enable(11),b.vertexAlphas&&a.enable(12),b.vertexUvs2&&a.enable(13),b.vertexTangents&&a.enable(14),M.push(a.mask),a.disableAll(),b.fog&&a.enable(0),b.useFog&&a.enable(1),b.flatShading&&a.enable(2),b.logarithmicDepthBuffer&&a.enable(3),b.skinning&&a.enable(4),b.morphTargets&&a.enable(5),b.morphNormals&&a.enable(6),b.morphColors&&a.enable(7),b.premultipliedAlpha&&a.enable(8),b.shadowMapEnabled&&a.enable(9),b.useLegacyLights&&a.enable(10),b.doubleSided&&a.enable(11),b.flipSided&&a.enable(12),b.useDepthPacking&&a.enable(13),b.dithering&&a.enable(14),b.transmission&&a.enable(15),b.sheen&&a.enable(16),b.decodeVideoTexture&&a.enable(17),b.opaque&&a.enable(18),b.pointsUvs&&a.enable(19),M.push(a.mask)}function x(M){const b=g[M.type];let P;if(b){const N=Uo[b];P=ine.clone(N.uniforms)}else P=M.uniforms;return P}function w(M,b){let P;for(let N=0,D=c.length;N<D;N++){const U=c[N];if(U.cacheKey===b){P=U,++P.usedTimes;break}}return P===void 0&&(P=new cle(i,b,M,s),c.push(P)),P}function S(M){if(--M.usedTimes===0){const b=c.indexOf(M);c[b]=c[c.length-1],c.pop(),M.destroy()}}function A(M){l.remove(M)}function k(){l.dispose()}return{getParameters:m,getProgramCacheKey:p,getUniforms:x,acquireProgram:w,releaseProgram:S,releaseShaderCache:A,programs:c,dispose:k}}function fle(){let i=new WeakMap;function e(s){let o=i.get(s);return o===void 0&&(o={},i.set(s,o)),o}function t(s){i.delete(s)}function r(s,o,a){i.get(s)[o]=a}function n(){i=new WeakMap}return{get:e,remove:t,update:r,dispose:n}}function mle(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function U5(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function z5(){const i=[];let e=0;const t=[],r=[],n=[];function s(){e=0,t.length=0,r.length=0,n.length=0}function o(h,d,f,g,v,m){let p=i[e];return p===void 0?(p={id:h.id,object:h,geometry:d,material:f,groupOrder:g,renderOrder:h.renderOrder,z:v,group:m},i[e]=p):(p.id=h.id,p.object=h,p.geometry=d,p.material=f,p.groupOrder=g,p.renderOrder=h.renderOrder,p.z=v,p.group=m),e++,p}function a(h,d,f,g,v,m){const p=o(h,d,f,g,v,m);f.transmission>0?r.push(p):f.transparent===!0?n.push(p):t.push(p)}function l(h,d,f,g,v,m){const p=o(h,d,f,g,v,m);f.transmission>0?r.unshift(p):f.transparent===!0?n.unshift(p):t.unshift(p)}function c(h,d){t.length>1&&t.sort(h||mle),r.length>1&&r.sort(d||U5),n.length>1&&n.sort(d||U5)}function u(){for(let h=e,d=i.length;h<d;h++){const f=i[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:r,transparent:n,init:s,push:a,unshift:l,finish:u,sort:c}}function gle(){let i=new WeakMap;function e(r,n){const s=i.get(r);let o;return s===void 0?(o=new z5,i.set(r,[o])):n>=s.length?(o=new z5,s.push(o)):o=s[n],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function _le(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new fe,color:new Et};break;case"SpotLight":t={position:new fe,direction:new fe,color:new Et,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new fe,color:new Et,distance:0,decay:0};break;case"HemisphereLight":t={direction:new fe,skyColor:new Et,groundColor:new Et};break;case"RectAreaLight":t={color:new Et,position:new fe,halfWidth:new fe,halfHeight:new fe};break}return i[e.id]=t,t}}}function yle(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Nt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Nt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Nt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let vle=0;function ble(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function xle(i,e){const t=new _le,r=yle(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)n.probe.push(new fe);const s=new fe,o=new Rt,a=new Rt;function l(u,h){let d=0,f=0,g=0;for(let P=0;P<9;P++)n.probe[P].set(0,0,0);let v=0,m=0,p=0,y=0,_=0,x=0,w=0,S=0,A=0,k=0;u.sort(ble);const M=h===!0?Math.PI:1;for(let P=0,N=u.length;P<N;P++){const D=u[P],U=D.color,G=D.intensity,B=D.distance,Q=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)d+=U.r*G*M,f+=U.g*G*M,g+=U.b*G*M;else if(D.isLightProbe)for(let j=0;j<9;j++)n.probe[j].addScaledVector(D.sh.coefficients[j],G);else if(D.isDirectionalLight){const j=t.get(D);if(j.color.copy(D.color).multiplyScalar(D.intensity*M),D.castShadow){const X=D.shadow,ne=r.get(D);ne.shadowBias=X.bias,ne.shadowNormalBias=X.normalBias,ne.shadowRadius=X.radius,ne.shadowMapSize=X.mapSize,n.directionalShadow[v]=ne,n.directionalShadowMap[v]=Q,n.directionalShadowMatrix[v]=D.shadow.matrix,x++}n.directional[v]=j,v++}else if(D.isSpotLight){const j=t.get(D);j.position.setFromMatrixPosition(D.matrixWorld),j.color.copy(U).multiplyScalar(G*M),j.distance=B,j.coneCos=Math.cos(D.angle),j.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),j.decay=D.decay,n.spot[p]=j;const X=D.shadow;if(D.map&&(n.spotLightMap[A]=D.map,A++,X.updateMatrices(D),D.castShadow&&k++),n.spotLightMatrix[p]=X.matrix,D.castShadow){const ne=r.get(D);ne.shadowBias=X.bias,ne.shadowNormalBias=X.normalBias,ne.shadowRadius=X.radius,ne.shadowMapSize=X.mapSize,n.spotShadow[p]=ne,n.spotShadowMap[p]=Q,S++}p++}else if(D.isRectAreaLight){const j=t.get(D);j.color.copy(U).multiplyScalar(G),j.halfWidth.set(D.width*.5,0,0),j.halfHeight.set(0,D.height*.5,0),n.rectArea[y]=j,y++}else if(D.isPointLight){const j=t.get(D);if(j.color.copy(D.color).multiplyScalar(D.intensity*M),j.distance=D.distance,j.decay=D.decay,D.castShadow){const X=D.shadow,ne=r.get(D);ne.shadowBias=X.bias,ne.shadowNormalBias=X.normalBias,ne.shadowRadius=X.radius,ne.shadowMapSize=X.mapSize,ne.shadowCameraNear=X.camera.near,ne.shadowCameraFar=X.camera.far,n.pointShadow[m]=ne,n.pointShadowMap[m]=Q,n.pointShadowMatrix[m]=D.shadow.matrix,w++}n.point[m]=j,m++}else if(D.isHemisphereLight){const j=t.get(D);j.skyColor.copy(D.color).multiplyScalar(G*M),j.groundColor.copy(D.groundColor).multiplyScalar(G*M),n.hemi[_]=j,_++}}y>0&&(e.isWebGL2||i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=it.LTC_FLOAT_1,n.rectAreaLTC2=it.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=it.LTC_HALF_1,n.rectAreaLTC2=it.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=d,n.ambient[1]=f,n.ambient[2]=g;const b=n.hash;(b.directionalLength!==v||b.pointLength!==m||b.spotLength!==p||b.rectAreaLength!==y||b.hemiLength!==_||b.numDirectionalShadows!==x||b.numPointShadows!==w||b.numSpotShadows!==S||b.numSpotMaps!==A)&&(n.directional.length=v,n.spot.length=p,n.rectArea.length=y,n.point.length=m,n.hemi.length=_,n.directionalShadow.length=x,n.directionalShadowMap.length=x,n.pointShadow.length=w,n.pointShadowMap.length=w,n.spotShadow.length=S,n.spotShadowMap.length=S,n.directionalShadowMatrix.length=x,n.pointShadowMatrix.length=w,n.spotLightMatrix.length=S+A-k,n.spotLightMap.length=A,n.numSpotLightShadowsWithMaps=k,b.directionalLength=v,b.pointLength=m,b.spotLength=p,b.rectAreaLength=y,b.hemiLength=_,b.numDirectionalShadows=x,b.numPointShadows=w,b.numSpotShadows=S,b.numSpotMaps=A,n.version=vle++)}function c(u,h){let d=0,f=0,g=0,v=0,m=0;const p=h.matrixWorldInverse;for(let y=0,_=u.length;y<_;y++){const x=u[y];if(x.isDirectionalLight){const w=n.directional[d];w.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(p),d++}else if(x.isSpotLight){const w=n.spot[g];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(p),w.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(p),g++}else if(x.isRectAreaLight){const w=n.rectArea[v];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(p),a.identity(),o.copy(x.matrixWorld),o.premultiply(p),a.extractRotation(o),w.halfWidth.set(x.width*.5,0,0),w.halfHeight.set(0,x.height*.5,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),v++}else if(x.isPointLight){const w=n.point[f];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(p),f++}else if(x.isHemisphereLight){const w=n.hemi[m];w.direction.setFromMatrixPosition(x.matrixWorld),w.direction.transformDirection(p),m++}}}return{setup:l,setupView:c,state:n}}function F5(i,e){const t=new xle(i,e),r=[],n=[];function s(){r.length=0,n.length=0}function o(u){r.push(u)}function a(u){n.push(u)}function l(u){t.setup(r,u)}function c(u){t.setupView(r,u)}return{init:s,state:{lightsArray:r,shadowsArray:n,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function wle(i,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new F5(i,e),t.set(s,[l])):o>=a.length?(l=new F5(i,e),a.push(l)):l=a[o],l}function n(){t=new WeakMap}return{get:r,dispose:n}}let Mle=class extends $s{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=bre,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Sle=class extends $s{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};const Tle=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Ele=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Ale(i,e,t){let r=new m$;const n=new Nt,s=new Nt,o=new _i,a=new Mle({depthPacking:xre}),l=new Sle,c={},u=t.maxTextureSize,h={[qo]:bn,[bn]:qo,[ws]:ws},d=new Uh({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Nt},radius:{value:4}},vertexShader:Tle,fragmentShader:Ele}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const g=new sn;g.setAttribute("position",new mr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Gi(g,d),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=FB,this.render=function(x,w,S){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||x.length===0)return;const A=i.getRenderTarget(),k=i.getActiveCubeFace(),M=i.getActiveMipmapLevel(),b=i.state;b.setBlending($c),b.buffers.color.setClear(1,1,1,1),b.buffers.depth.setTest(!0),b.setScissorTest(!1);for(let P=0,N=x.length;P<N;P++){const D=x[P],U=D.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",D,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;n.copy(U.mapSize);const G=U.getFrameExtents();if(n.multiply(G),s.copy(U.mapSize),(n.x>u||n.y>u)&&(n.x>u&&(s.x=Math.floor(u/G.x),n.x=s.x*G.x,U.mapSize.x=s.x),n.y>u&&(s.y=Math.floor(u/G.y),n.y=s.y*G.y,U.mapSize.y=s.y)),U.map===null){const Q=this.type!==w0?{minFilter:ur,magFilter:ur}:{};U.map=new Oh(n.x,n.y,Q),U.map.texture.name=D.name+".shadowMap",U.camera.updateProjectionMatrix()}i.setRenderTarget(U.map),i.clear();const B=U.getViewportCount();for(let Q=0;Q<B;Q++){const j=U.getViewport(Q);o.set(s.x*j.x,s.y*j.y,s.x*j.z,s.y*j.w),b.viewport(o),U.updateMatrices(D,Q),r=U.getFrustum(),_(w,S,U.camera,D,this.type)}U.isPointLightShadow!==!0&&this.type===w0&&p(U,S),U.needsUpdate=!1}m.needsUpdate=!1,i.setRenderTarget(A,k,M)};function p(x,w){const S=e.update(v);d.defines.VSM_SAMPLES!==x.blurSamples&&(d.defines.VSM_SAMPLES=x.blurSamples,f.defines.VSM_SAMPLES=x.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new Oh(n.x,n.y)),d.uniforms.shadow_pass.value=x.map.texture,d.uniforms.resolution.value=x.mapSize,d.uniforms.radius.value=x.radius,i.setRenderTarget(x.mapPass),i.clear(),i.renderBufferDirect(w,null,S,d,v,null),f.uniforms.shadow_pass.value=x.mapPass.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,i.setRenderTarget(x.map),i.clear(),i.renderBufferDirect(w,null,S,f,v,null)}function y(x,w,S,A){let k=null;const M=S.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(M!==void 0)k=M;else if(k=S.isPointLight===!0?l:a,i.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){const b=k.uuid,P=w.uuid;let N=c[b];N===void 0&&(N={},c[b]=N);let D=N[P];D===void 0&&(D=k.clone(),N[P]=D),k=D}if(k.visible=w.visible,k.wireframe=w.wireframe,A===w0?k.side=w.shadowSide!==null?w.shadowSide:w.side:k.side=w.shadowSide!==null?w.shadowSide:h[w.side],k.alphaMap=w.alphaMap,k.alphaTest=w.alphaTest,k.map=w.map,k.clipShadows=w.clipShadows,k.clippingPlanes=w.clippingPlanes,k.clipIntersection=w.clipIntersection,k.displacementMap=w.displacementMap,k.displacementScale=w.displacementScale,k.displacementBias=w.displacementBias,k.wireframeLinewidth=w.wireframeLinewidth,k.linewidth=w.linewidth,S.isPointLight===!0&&k.isMeshDistanceMaterial===!0){const b=i.properties.get(k);b.light=S}return k}function _(x,w,S,A,k){if(x.visible===!1)return;if(x.layers.test(w.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&k===w0)&&(!x.frustumCulled||r.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,x.matrixWorld);const b=e.update(x),P=x.material;if(Array.isArray(P)){const N=b.groups;for(let D=0,U=N.length;D<U;D++){const G=N[D],B=P[G.materialIndex];if(B&&B.visible){const Q=y(x,B,A,k);i.renderBufferDirect(S,null,b,Q,x,G)}}}else if(P.visible){const N=y(x,P,A,k);i.renderBufferDirect(S,null,b,N,x,null)}}const M=x.children;for(let b=0,P=M.length;b<P;b++)_(M[b],w,S,A,k)}}function kle(i,e,t){const r=t.isWebGL2;function n(){let H=!1;const ce=new _i;let ye=null;const Ce=new _i(0,0,0,0);return{setMask:function(Fe){ye!==Fe&&!H&&(i.colorMask(Fe,Fe,Fe,Fe),ye=Fe)},setLocked:function(Fe){H=Fe},setClear:function(Fe,vt,St,Dt,Fi){Fi===!0&&(Fe*=Dt,vt*=Dt,St*=Dt),ce.set(Fe,vt,St,Dt),Ce.equals(ce)===!1&&(i.clearColor(Fe,vt,St,Dt),Ce.copy(ce))},reset:function(){H=!1,ye=null,Ce.set(-1,0,0,0)}}}function s(){let H=!1,ce=null,ye=null,Ce=null;return{setTest:function(Fe){Fe?z(2929):_e(2929)},setMask:function(Fe){ce!==Fe&&!H&&(i.depthMask(Fe),ce=Fe)},setFunc:function(Fe){if(ye!==Fe){switch(Fe){case jie:i.depthFunc(512);break;case Hie:i.depthFunc(519);break;case Gie:i.depthFunc(513);break;case a3:i.depthFunc(515);break;case Wie:i.depthFunc(514);break;case qie:i.depthFunc(518);break;case Xie:i.depthFunc(516);break;case Yie:i.depthFunc(517);break;default:i.depthFunc(515)}ye=Fe}},setLocked:function(Fe){H=Fe},setClear:function(Fe){Ce!==Fe&&(i.clearDepth(Fe),Ce=Fe)},reset:function(){H=!1,ce=null,ye=null,Ce=null}}}function o(){let H=!1,ce=null,ye=null,Ce=null,Fe=null,vt=null,St=null,Dt=null,Fi=null;return{setTest:function(at){H||(at?z(2960):_e(2960))},setMask:function(at){ce!==at&&!H&&(i.stencilMask(at),ce=at)},setFunc:function(at,ei,fi){(ye!==at||Ce!==ei||Fe!==fi)&&(i.stencilFunc(at,ei,fi),ye=at,Ce=ei,Fe=fi)},setOp:function(at,ei,fi){(vt!==at||St!==ei||Dt!==fi)&&(i.stencilOp(at,ei,fi),vt=at,St=ei,Dt=fi)},setLocked:function(at){H=at},setClear:function(at){Fi!==at&&(i.clearStencil(at),Fi=at)},reset:function(){H=!1,ce=null,ye=null,Ce=null,Fe=null,vt=null,St=null,Dt=null,Fi=null}}}const a=new n,l=new s,c=new o,u=new WeakMap,h=new WeakMap;let d={},f={},g=new WeakMap,v=[],m=null,p=!1,y=null,_=null,x=null,w=null,S=null,A=null,k=null,M=!1,b=null,P=null,N=null,D=null,U=null;const G=i.getParameter(35661);let B=!1,Q=0;const j=i.getParameter(7938);j.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(j)[1]),B=Q>=1):j.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),B=Q>=2);let X=null,ne={};const ge=i.getParameter(3088),pe=i.getParameter(2978),V=new _i().fromArray(ge),Y=new _i().fromArray(pe);function ae(H,ce,ye){const Ce=new Uint8Array(4),Fe=i.createTexture();i.bindTexture(H,Fe),i.texParameteri(H,10241,9728),i.texParameteri(H,10240,9728);for(let vt=0;vt<ye;vt++)i.texImage2D(ce+vt,0,6408,1,1,0,6408,5121,Ce);return Fe}const J={};J[3553]=ae(3553,3553,1),J[34067]=ae(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),z(2929),l.setFunc(a3),Ze(!1),ht(TN),z(2884),Ae($c);function z(H){d[H]!==!0&&(i.enable(H),d[H]=!0)}function _e(H){d[H]!==!1&&(i.disable(H),d[H]=!1)}function ee(H,ce){return f[H]!==ce?(i.bindFramebuffer(H,ce),f[H]=ce,r&&(H===36009&&(f[36160]=ce),H===36160&&(f[36009]=ce)),!0):!1}function te(H,ce){let ye=v,Ce=!1;if(H)if(ye=g.get(ce),ye===void 0&&(ye=[],g.set(ce,ye)),H.isWebGLMultipleRenderTargets){const Fe=H.texture;if(ye.length!==Fe.length||ye[0]!==36064){for(let vt=0,St=Fe.length;vt<St;vt++)ye[vt]=36064+vt;ye.length=Fe.length,Ce=!0}}else ye[0]!==36064&&(ye[0]=36064,Ce=!0);else ye[0]!==1029&&(ye[0]=1029,Ce=!0);Ce&&(t.isWebGL2?i.drawBuffers(ye):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ye))}function be(H){return m!==H?(i.useProgram(H),m=H,!0):!1}const oe={[Cp]:32774,[Rie]:32778,[Pie]:32779};if(r)oe[CN]=32775,oe[$N]=32776;else{const H=e.get("EXT_blend_minmax");H!==null&&(oe[CN]=H.MIN_EXT,oe[$N]=H.MAX_EXT)}const Te={[Nie]:0,[Iie]:1,[Die]:768,[BB]:770,[Vie]:776,[Fie]:774,[Uie]:772,[Oie]:769,[VB]:771,[Bie]:775,[zie]:773};function Ae(H,ce,ye,Ce,Fe,vt,St,Dt){if(H===$c){p===!0&&(_e(3042),p=!1);return}if(p===!1&&(z(3042),p=!0),H!==Lie){if(H!==y||Dt!==M){if((_!==Cp||S!==Cp)&&(i.blendEquation(32774),_=Cp,S=Cp),Dt)switch(H){case Sf:i.blendFuncSeparate(1,771,1,771);break;case EN:i.blendFunc(1,1);break;case AN:i.blendFuncSeparate(0,769,0,1);break;case kN:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}else switch(H){case Sf:i.blendFuncSeparate(770,771,1,771);break;case EN:i.blendFunc(770,1);break;case AN:i.blendFuncSeparate(0,769,0,1);break;case kN:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}x=null,w=null,A=null,k=null,y=H,M=Dt}return}Fe=Fe||ce,vt=vt||ye,St=St||Ce,(ce!==_||Fe!==S)&&(i.blendEquationSeparate(oe[ce],oe[Fe]),_=ce,S=Fe),(ye!==x||Ce!==w||vt!==A||St!==k)&&(i.blendFuncSeparate(Te[ye],Te[Ce],Te[vt],Te[St]),x=ye,w=Ce,A=vt,k=St),y=H,M=!1}function Qe(H,ce){H.side===ws?_e(2884):z(2884);let ye=H.side===bn;ce&&(ye=!ye),Ze(ye),H.blending===Sf&&H.transparent===!1?Ae($c):Ae(H.blending,H.blendEquation,H.blendSrc,H.blendDst,H.blendEquationAlpha,H.blendSrcAlpha,H.blendDstAlpha,H.premultipliedAlpha),l.setFunc(H.depthFunc),l.setTest(H.depthTest),l.setMask(H.depthWrite),a.setMask(H.colorWrite);const Ce=H.stencilWrite;c.setTest(Ce),Ce&&(c.setMask(H.stencilWriteMask),c.setFunc(H.stencilFunc,H.stencilRef,H.stencilFuncMask),c.setOp(H.stencilFail,H.stencilZFail,H.stencilZPass)),st(H.polygonOffset,H.polygonOffsetFactor,H.polygonOffsetUnits),H.alphaToCoverage===!0?z(32926):_e(32926)}function Ze(H){b!==H&&(H?i.frontFace(2304):i.frontFace(2305),b=H)}function ht(H){H!==kie?(z(2884),H!==P&&(H===TN?i.cullFace(1029):H===Cie?i.cullFace(1028):i.cullFace(1032))):_e(2884),P=H}function wt(H){H!==N&&(B&&i.lineWidth(H),N=H)}function st(H,ce,ye){H?(z(32823),(D!==ce||U!==ye)&&(i.polygonOffset(ce,ye),D=ce,U=ye)):_e(32823)}function ft(H){H?z(3089):_e(3089)}function Ft(H){H===void 0&&(H=33984+G-1),X!==H&&(i.activeTexture(H),X=H)}function O(H,ce,ye){ye===void 0&&(X===null?ye=33984+G-1:ye=X);let Ce=ne[ye];Ce===void 0&&(Ce={type:void 0,texture:void 0},ne[ye]=Ce),(Ce.type!==H||Ce.texture!==ce)&&(X!==ye&&(i.activeTexture(ye),X=ye),i.bindTexture(H,ce||J[H]),Ce.type=H,Ce.texture=ce)}function R(){const H=ne[X];H!==void 0&&H.type!==void 0&&(i.bindTexture(H.type,null),H.type=void 0,H.texture=void 0)}function se(){try{i.compressedTexImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function xe(){try{i.compressedTexImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function we(){try{i.texSubImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Se(){try{i.texSubImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function F(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function de(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function ie(){try{i.texStorage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ee(){try{i.texStorage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ne(){try{i.texImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ie(){try{i.texImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function $e(H){V.equals(H)===!1&&(i.scissor(H.x,H.y,H.z,H.w),V.copy(H))}function Le(H){Y.equals(H)===!1&&(i.viewport(H.x,H.y,H.z,H.w),Y.copy(H))}function Ge(H,ce){let ye=h.get(ce);ye===void 0&&(ye=new WeakMap,h.set(ce,ye));let Ce=ye.get(H);Ce===void 0&&(Ce=i.getUniformBlockIndex(ce,H.name),ye.set(H,Ce))}function dt(H,ce){const ye=h.get(ce).get(H);u.get(ce)!==ye&&(i.uniformBlockBinding(ce,ye,H.__bindingPointIndex),u.set(ce,ye))}function Tt(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),r===!0&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},X=null,ne={},f={},g=new WeakMap,v=[],m=null,p=!1,y=null,_=null,x=null,w=null,S=null,A=null,k=null,M=!1,b=null,P=null,N=null,D=null,U=null,V.set(0,0,i.canvas.width,i.canvas.height),Y.set(0,0,i.canvas.width,i.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:z,disable:_e,bindFramebuffer:ee,drawBuffers:te,useProgram:be,setBlending:Ae,setMaterial:Qe,setFlipSided:Ze,setCullFace:ht,setLineWidth:wt,setPolygonOffset:st,setScissorTest:ft,activeTexture:Ft,bindTexture:O,unbindTexture:R,compressedTexImage2D:se,compressedTexImage3D:xe,texImage2D:Ne,texImage3D:Ie,updateUBOMapping:Ge,uniformBlockBinding:dt,texStorage2D:ie,texStorage3D:Ee,texSubImage2D:we,texSubImage3D:Se,compressedTexSubImage2D:F,compressedTexSubImage3D:de,scissor:$e,viewport:Le,reset:Tt}}function Cle(i,e,t,r,n,s,o){const a=n.isWebGL2,l=n.maxTextures,c=n.maxCubemapSize,u=n.maxTextureSize,h=n.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let v;const m=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(O,R){return p?new OffscreenCanvas(O,R):uy("canvas")}function _(O,R,se,xe){let we=1;if((O.width>xe||O.height>xe)&&(we=xe/Math.max(O.width,O.height)),we<1||R===!0)if(typeof HTMLImageElement<"u"&&O instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&O instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&O instanceof ImageBitmap){const Se=R?YB:Math.floor,F=Se(we*O.width),de=Se(we*O.height);v===void 0&&(v=y(F,de));const ie=se?y(F,de):v;return ie.width=F,ie.height=de,ie.getContext("2d").drawImage(O,0,0,F,de),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+O.width+"x"+O.height+") to ("+F+"x"+de+")."),ie}else return"data"in O&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+O.width+"x"+O.height+")."),O;return O}function x(O){return f3(O.width)&&f3(O.height)}function w(O){return a?!1:O.wrapS!==Hr||O.wrapT!==Hr||O.minFilter!==ur&&O.minFilter!==Er}function S(O,R){return O.generateMipmaps&&R&&O.minFilter!==ur&&O.minFilter!==Er}function A(O){i.generateMipmap(O)}function k(O,R,se,xe,we=!1){if(a===!1)return R;if(O!==null){if(i[O]!==void 0)return i[O];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+O+"'")}let Se=R;return R===6403&&(se===5126&&(Se=33326),se===5131&&(Se=33325),se===5121&&(Se=33321)),R===33319&&(se===5126&&(Se=33328),se===5131&&(Se=33327),se===5121&&(Se=33323)),R===6408&&(se===5126&&(Se=34836),se===5131&&(Se=34842),se===5121&&(Se=xe===Wt&&we===!1?35907:32856),se===32819&&(Se=32854),se===32820&&(Se=32855)),(Se===33325||Se===33326||Se===33327||Se===33328||Se===34842||Se===34836)&&e.get("EXT_color_buffer_float"),Se}function M(O,R,se){return S(O,se)===!0||O.isFramebufferTexture&&O.minFilter!==ur&&O.minFilter!==Er?Math.log2(Math.max(R.width,R.height))+1:O.mipmaps!==void 0&&O.mipmaps.length>0?O.mipmaps.length:O.isCompressedTexture&&Array.isArray(O.image)?R.mipmaps.length:1}function b(O){return O===ur||O===u3||O===Xb?9728:9729}function P(O){const R=O.target;R.removeEventListener("dispose",P),D(R),R.isVideoTexture&&g.delete(R)}function N(O){const R=O.target;R.removeEventListener("dispose",N),G(R)}function D(O){const R=r.get(O);if(R.__webglInit===void 0)return;const se=O.source,xe=m.get(se);if(xe){const we=xe[R.__cacheKey];we.usedTimes--,we.usedTimes===0&&U(O),Object.keys(xe).length===0&&m.delete(se)}r.remove(O)}function U(O){const R=r.get(O);i.deleteTexture(R.__webglTexture);const se=O.source,xe=m.get(se);delete xe[R.__cacheKey],o.memory.textures--}function G(O){const R=O.texture,se=r.get(O),xe=r.get(R);if(xe.__webglTexture!==void 0&&(i.deleteTexture(xe.__webglTexture),o.memory.textures--),O.depthTexture&&O.depthTexture.dispose(),O.isWebGLCubeRenderTarget)for(let we=0;we<6;we++)i.deleteFramebuffer(se.__webglFramebuffer[we]),se.__webglDepthbuffer&&i.deleteRenderbuffer(se.__webglDepthbuffer[we]);else{if(i.deleteFramebuffer(se.__webglFramebuffer),se.__webglDepthbuffer&&i.deleteRenderbuffer(se.__webglDepthbuffer),se.__webglMultisampledFramebuffer&&i.deleteFramebuffer(se.__webglMultisampledFramebuffer),se.__webglColorRenderbuffer)for(let we=0;we<se.__webglColorRenderbuffer.length;we++)se.__webglColorRenderbuffer[we]&&i.deleteRenderbuffer(se.__webglColorRenderbuffer[we]);se.__webglDepthRenderbuffer&&i.deleteRenderbuffer(se.__webglDepthRenderbuffer)}if(O.isWebGLMultipleRenderTargets)for(let we=0,Se=R.length;we<Se;we++){const F=r.get(R[we]);F.__webglTexture&&(i.deleteTexture(F.__webglTexture),o.memory.textures--),r.remove(R[we])}r.remove(R),r.remove(O)}let B=0;function Q(){B=0}function j(){const O=B;return O>=l&&console.warn("THREE.WebGLTextures: Trying to use "+O+" texture units while this GPU supports only "+l),B+=1,O}function X(O){const R=[];return R.push(O.wrapS),R.push(O.wrapT),R.push(O.wrapR||0),R.push(O.magFilter),R.push(O.minFilter),R.push(O.anisotropy),R.push(O.internalFormat),R.push(O.format),R.push(O.type),R.push(O.generateMipmaps),R.push(O.premultiplyAlpha),R.push(O.flipY),R.push(O.unpackAlignment),R.push(O.encoding),R.join()}function ne(O,R){const se=r.get(O);if(O.isVideoTexture&&ft(O),O.isRenderTargetTexture===!1&&O.version>0&&se.__version!==O.version){const xe=O.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{_e(se,O,R);return}}t.bindTexture(3553,se.__webglTexture,33984+R)}function ge(O,R){const se=r.get(O);if(O.version>0&&se.__version!==O.version){_e(se,O,R);return}t.bindTexture(35866,se.__webglTexture,33984+R)}function pe(O,R){const se=r.get(O);if(O.version>0&&se.__version!==O.version){_e(se,O,R);return}t.bindTexture(32879,se.__webglTexture,33984+R)}function V(O,R){const se=r.get(O);if(O.version>0&&se.__version!==O.version){ee(se,O,R);return}t.bindTexture(34067,se.__webglTexture,33984+R)}const Y={[Bo]:10497,[Hr]:33071,[kw]:33648},ae={[ur]:9728,[u3]:9984,[Xb]:9986,[Er]:9729,[HB]:9985,[hl]:9987};function J(O,R,se){if(se?(i.texParameteri(O,10242,Y[R.wrapS]),i.texParameteri(O,10243,Y[R.wrapT]),(O===32879||O===35866)&&i.texParameteri(O,32882,Y[R.wrapR]),i.texParameteri(O,10240,ae[R.magFilter]),i.texParameteri(O,10241,ae[R.minFilter])):(i.texParameteri(O,10242,33071),i.texParameteri(O,10243,33071),(O===32879||O===35866)&&i.texParameteri(O,32882,33071),(R.wrapS!==Hr||R.wrapT!==Hr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(O,10240,b(R.magFilter)),i.texParameteri(O,10241,b(R.minFilter)),R.minFilter!==ur&&R.minFilter!==Er&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const xe=e.get("EXT_texture_filter_anisotropic");if(R.magFilter===ur||R.minFilter!==Xb&&R.minFilter!==hl||R.type===mc&&e.has("OES_texture_float_linear")===!1||a===!1&&R.type===ly&&e.has("OES_texture_half_float_linear")===!1)return;(R.anisotropy>1||r.get(R).__currentAnisotropy)&&(i.texParameterf(O,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(R.anisotropy,n.getMaxAnisotropy())),r.get(R).__currentAnisotropy=R.anisotropy)}}function z(O,R){let se=!1;O.__webglInit===void 0&&(O.__webglInit=!0,R.addEventListener("dispose",P));const xe=R.source;let we=m.get(xe);we===void 0&&(we={},m.set(xe,we));const Se=X(R);if(Se!==O.__cacheKey){we[Se]===void 0&&(we[Se]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,se=!0),we[Se].usedTimes++;const F=we[O.__cacheKey];F!==void 0&&(we[O.__cacheKey].usedTimes--,F.usedTimes===0&&U(R)),O.__cacheKey=Se,O.__webglTexture=we[Se].texture}return se}function _e(O,R,se){let xe=3553;(R.isDataArrayTexture||R.isCompressedArrayTexture)&&(xe=35866),R.isData3DTexture&&(xe=32879);const we=z(O,R),Se=R.source;t.bindTexture(xe,O.__webglTexture,33984+se);const F=r.get(Se);if(Se.version!==F.__version||we===!0){t.activeTexture(33984+se),i.pixelStorei(37440,R.flipY),i.pixelStorei(37441,R.premultiplyAlpha),i.pixelStorei(3317,R.unpackAlignment),i.pixelStorei(37443,0);const de=w(R)&&x(R.image)===!1;let ie=_(R.image,de,!1,u);ie=Ft(R,ie);const Ee=x(ie)||a,Ne=s.convert(R.format,R.encoding);let Ie=s.convert(R.type),$e=k(R.internalFormat,Ne,Ie,R.encoding,R.isVideoTexture);J(xe,R,Ee);let Le;const Ge=R.mipmaps,dt=a&&R.isVideoTexture!==!0,Tt=F.__version===void 0||we===!0,H=M(R,ie,Ee);if(R.isDepthTexture)$e=6402,a?R.type===mc?$e=36012:R.type===ih?$e=33190:R.type===Tf?$e=35056:$e=33189:R.type===mc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),R.format===yh&&$e===6402&&R.type!==GB&&R.type!==ih&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),R.type=ih,Ie=s.convert(R.type)),R.format===rm&&$e===6402&&($e=34041,R.type!==Tf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),R.type=Tf,Ie=s.convert(R.type))),Tt&&(dt?t.texStorage2D(3553,1,$e,ie.width,ie.height):t.texImage2D(3553,0,$e,ie.width,ie.height,0,Ne,Ie,null));else if(R.isDataTexture)if(Ge.length>0&&Ee){dt&&Tt&&t.texStorage2D(3553,H,$e,Ge[0].width,Ge[0].height);for(let ce=0,ye=Ge.length;ce<ye;ce++)Le=Ge[ce],dt?t.texSubImage2D(3553,ce,0,0,Le.width,Le.height,Ne,Ie,Le.data):t.texImage2D(3553,ce,$e,Le.width,Le.height,0,Ne,Ie,Le.data);R.generateMipmaps=!1}else dt?(Tt&&t.texStorage2D(3553,H,$e,ie.width,ie.height),t.texSubImage2D(3553,0,0,0,ie.width,ie.height,Ne,Ie,ie.data)):t.texImage2D(3553,0,$e,ie.width,ie.height,0,Ne,Ie,ie.data);else if(R.isCompressedTexture)if(R.isCompressedArrayTexture){dt&&Tt&&t.texStorage3D(35866,H,$e,Ge[0].width,Ge[0].height,ie.depth);for(let ce=0,ye=Ge.length;ce<ye;ce++)Le=Ge[ce],R.format!==Ms?Ne!==null?dt?t.compressedTexSubImage3D(35866,ce,0,0,0,Le.width,Le.height,ie.depth,Ne,Le.data,0,0):t.compressedTexImage3D(35866,ce,$e,Le.width,Le.height,ie.depth,0,Le.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):dt?t.texSubImage3D(35866,ce,0,0,0,Le.width,Le.height,ie.depth,Ne,Ie,Le.data):t.texImage3D(35866,ce,$e,Le.width,Le.height,ie.depth,0,Ne,Ie,Le.data)}else{dt&&Tt&&t.texStorage2D(3553,H,$e,Ge[0].width,Ge[0].height);for(let ce=0,ye=Ge.length;ce<ye;ce++)Le=Ge[ce],R.format!==Ms?Ne!==null?dt?t.compressedTexSubImage2D(3553,ce,0,0,Le.width,Le.height,Ne,Le.data):t.compressedTexImage2D(3553,ce,$e,Le.width,Le.height,0,Le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):dt?t.texSubImage2D(3553,ce,0,0,Le.width,Le.height,Ne,Ie,Le.data):t.texImage2D(3553,ce,$e,Le.width,Le.height,0,Ne,Ie,Le.data)}else if(R.isDataArrayTexture)dt?(Tt&&t.texStorage3D(35866,H,$e,ie.width,ie.height,ie.depth),t.texSubImage3D(35866,0,0,0,0,ie.width,ie.height,ie.depth,Ne,Ie,ie.data)):t.texImage3D(35866,0,$e,ie.width,ie.height,ie.depth,0,Ne,Ie,ie.data);else if(R.isData3DTexture)dt?(Tt&&t.texStorage3D(32879,H,$e,ie.width,ie.height,ie.depth),t.texSubImage3D(32879,0,0,0,0,ie.width,ie.height,ie.depth,Ne,Ie,ie.data)):t.texImage3D(32879,0,$e,ie.width,ie.height,ie.depth,0,Ne,Ie,ie.data);else if(R.isFramebufferTexture){if(Tt)if(dt)t.texStorage2D(3553,H,$e,ie.width,ie.height);else{let ce=ie.width,ye=ie.height;for(let Ce=0;Ce<H;Ce++)t.texImage2D(3553,Ce,$e,ce,ye,0,Ne,Ie,null),ce>>=1,ye>>=1}}else if(Ge.length>0&&Ee){dt&&Tt&&t.texStorage2D(3553,H,$e,Ge[0].width,Ge[0].height);for(let ce=0,ye=Ge.length;ce<ye;ce++)Le=Ge[ce],dt?t.texSubImage2D(3553,ce,0,0,Ne,Ie,Le):t.texImage2D(3553,ce,$e,Ne,Ie,Le);R.generateMipmaps=!1}else dt?(Tt&&t.texStorage2D(3553,H,$e,ie.width,ie.height),t.texSubImage2D(3553,0,0,0,Ne,Ie,ie)):t.texImage2D(3553,0,$e,Ne,Ie,ie);S(R,Ee)&&A(xe),F.__version=Se.version,R.onUpdate&&R.onUpdate(R)}O.__version=R.version}function ee(O,R,se){if(R.image.length!==6)return;const xe=z(O,R),we=R.source;t.bindTexture(34067,O.__webglTexture,33984+se);const Se=r.get(we);if(we.version!==Se.__version||xe===!0){t.activeTexture(33984+se),i.pixelStorei(37440,R.flipY),i.pixelStorei(37441,R.premultiplyAlpha),i.pixelStorei(3317,R.unpackAlignment),i.pixelStorei(37443,0);const F=R.isCompressedTexture||R.image[0].isCompressedTexture,de=R.image[0]&&R.image[0].isDataTexture,ie=[];for(let ce=0;ce<6;ce++)!F&&!de?ie[ce]=_(R.image[ce],!1,!0,c):ie[ce]=de?R.image[ce].image:R.image[ce],ie[ce]=Ft(R,ie[ce]);const Ee=ie[0],Ne=x(Ee)||a,Ie=s.convert(R.format,R.encoding),$e=s.convert(R.type),Le=k(R.internalFormat,Ie,$e,R.encoding),Ge=a&&R.isVideoTexture!==!0,dt=Se.__version===void 0||xe===!0;let Tt=M(R,Ee,Ne);J(34067,R,Ne);let H;if(F){Ge&&dt&&t.texStorage2D(34067,Tt,Le,Ee.width,Ee.height);for(let ce=0;ce<6;ce++){H=ie[ce].mipmaps;for(let ye=0;ye<H.length;ye++){const Ce=H[ye];R.format!==Ms?Ie!==null?Ge?t.compressedTexSubImage2D(34069+ce,ye,0,0,Ce.width,Ce.height,Ie,Ce.data):t.compressedTexImage2D(34069+ce,ye,Le,Ce.width,Ce.height,0,Ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ge?t.texSubImage2D(34069+ce,ye,0,0,Ce.width,Ce.height,Ie,$e,Ce.data):t.texImage2D(34069+ce,ye,Le,Ce.width,Ce.height,0,Ie,$e,Ce.data)}}}else{H=R.mipmaps,Ge&&dt&&(H.length>0&&Tt++,t.texStorage2D(34067,Tt,Le,ie[0].width,ie[0].height));for(let ce=0;ce<6;ce++)if(de){Ge?t.texSubImage2D(34069+ce,0,0,0,ie[ce].width,ie[ce].height,Ie,$e,ie[ce].data):t.texImage2D(34069+ce,0,Le,ie[ce].width,ie[ce].height,0,Ie,$e,ie[ce].data);for(let ye=0;ye<H.length;ye++){const Ce=H[ye].image[ce].image;Ge?t.texSubImage2D(34069+ce,ye+1,0,0,Ce.width,Ce.height,Ie,$e,Ce.data):t.texImage2D(34069+ce,ye+1,Le,Ce.width,Ce.height,0,Ie,$e,Ce.data)}}else{Ge?t.texSubImage2D(34069+ce,0,0,0,Ie,$e,ie[ce]):t.texImage2D(34069+ce,0,Le,Ie,$e,ie[ce]);for(let ye=0;ye<H.length;ye++){const Ce=H[ye];Ge?t.texSubImage2D(34069+ce,ye+1,0,0,Ie,$e,Ce.image[ce]):t.texImage2D(34069+ce,ye+1,Le,Ie,$e,Ce.image[ce])}}}S(R,Ne)&&A(34067),Se.__version=we.version,R.onUpdate&&R.onUpdate(R)}O.__version=R.version}function te(O,R,se,xe,we){const Se=s.convert(se.format,se.encoding),F=s.convert(se.type),de=k(se.internalFormat,Se,F,se.encoding);r.get(R).__hasExternalTextures||(we===32879||we===35866?t.texImage3D(we,0,de,R.width,R.height,R.depth,0,Se,F,null):t.texImage2D(we,0,de,R.width,R.height,0,Se,F,null)),t.bindFramebuffer(36160,O),st(R)?d.framebufferTexture2DMultisampleEXT(36160,xe,we,r.get(se).__webglTexture,0,wt(R)):(we===3553||we>=34069&&we<=34074)&&i.framebufferTexture2D(36160,xe,we,r.get(se).__webglTexture,0),t.bindFramebuffer(36160,null)}function be(O,R,se){if(i.bindRenderbuffer(36161,O),R.depthBuffer&&!R.stencilBuffer){let xe=33189;if(se||st(R)){const we=R.depthTexture;we&&we.isDepthTexture&&(we.type===mc?xe=36012:we.type===ih&&(xe=33190));const Se=wt(R);st(R)?d.renderbufferStorageMultisampleEXT(36161,Se,xe,R.width,R.height):i.renderbufferStorageMultisample(36161,Se,xe,R.width,R.height)}else i.renderbufferStorage(36161,xe,R.width,R.height);i.framebufferRenderbuffer(36160,36096,36161,O)}else if(R.depthBuffer&&R.stencilBuffer){const xe=wt(R);se&&st(R)===!1?i.renderbufferStorageMultisample(36161,xe,35056,R.width,R.height):st(R)?d.renderbufferStorageMultisampleEXT(36161,xe,35056,R.width,R.height):i.renderbufferStorage(36161,34041,R.width,R.height),i.framebufferRenderbuffer(36160,33306,36161,O)}else{const xe=R.isWebGLMultipleRenderTargets===!0?R.texture:[R.texture];for(let we=0;we<xe.length;we++){const Se=xe[we],F=s.convert(Se.format,Se.encoding),de=s.convert(Se.type),ie=k(Se.internalFormat,F,de,Se.encoding),Ee=wt(R);se&&st(R)===!1?i.renderbufferStorageMultisample(36161,Ee,ie,R.width,R.height):st(R)?d.renderbufferStorageMultisampleEXT(36161,Ee,ie,R.width,R.height):i.renderbufferStorage(36161,ie,R.width,R.height)}}i.bindRenderbuffer(36161,null)}function oe(O,R){if(R&&R.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,O),!(R.depthTexture&&R.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(R.depthTexture).__webglTexture||R.depthTexture.image.width!==R.width||R.depthTexture.image.height!==R.height)&&(R.depthTexture.image.width=R.width,R.depthTexture.image.height=R.height,R.depthTexture.needsUpdate=!0),ne(R.depthTexture,0);const se=r.get(R.depthTexture).__webglTexture,xe=wt(R);if(R.depthTexture.format===yh)st(R)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,se,0,xe):i.framebufferTexture2D(36160,36096,3553,se,0);else if(R.depthTexture.format===rm)st(R)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,se,0,xe):i.framebufferTexture2D(36160,33306,3553,se,0);else throw new Error("Unknown depthTexture format")}function Te(O){const R=r.get(O),se=O.isWebGLCubeRenderTarget===!0;if(O.depthTexture&&!R.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");oe(R.__webglFramebuffer,O)}else if(se){R.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)t.bindFramebuffer(36160,R.__webglFramebuffer[xe]),R.__webglDepthbuffer[xe]=i.createRenderbuffer(),be(R.__webglDepthbuffer[xe],O,!1)}else t.bindFramebuffer(36160,R.__webglFramebuffer),R.__webglDepthbuffer=i.createRenderbuffer(),be(R.__webglDepthbuffer,O,!1);t.bindFramebuffer(36160,null)}function Ae(O,R,se){const xe=r.get(O);R!==void 0&&te(xe.__webglFramebuffer,O,O.texture,36064,3553),se!==void 0&&Te(O)}function Qe(O){const R=O.texture,se=r.get(O),xe=r.get(R);O.addEventListener("dispose",N),O.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture===void 0&&(xe.__webglTexture=i.createTexture()),xe.__version=R.version,o.memory.textures++);const we=O.isWebGLCubeRenderTarget===!0,Se=O.isWebGLMultipleRenderTargets===!0,F=x(O)||a;if(we){se.__webglFramebuffer=[];for(let de=0;de<6;de++)se.__webglFramebuffer[de]=i.createFramebuffer()}else{if(se.__webglFramebuffer=i.createFramebuffer(),Se)if(n.drawBuffers){const de=O.texture;for(let ie=0,Ee=de.length;ie<Ee;ie++){const Ne=r.get(de[ie]);Ne.__webglTexture===void 0&&(Ne.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&O.samples>0&&st(O)===!1){const de=Se?R:[R];se.__webglMultisampledFramebuffer=i.createFramebuffer(),se.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,se.__webglMultisampledFramebuffer);for(let ie=0;ie<de.length;ie++){const Ee=de[ie];se.__webglColorRenderbuffer[ie]=i.createRenderbuffer(),i.bindRenderbuffer(36161,se.__webglColorRenderbuffer[ie]);const Ne=s.convert(Ee.format,Ee.encoding),Ie=s.convert(Ee.type),$e=k(Ee.internalFormat,Ne,Ie,Ee.encoding,O.isXRRenderTarget===!0),Le=wt(O);i.renderbufferStorageMultisample(36161,Le,$e,O.width,O.height),i.framebufferRenderbuffer(36160,36064+ie,36161,se.__webglColorRenderbuffer[ie])}i.bindRenderbuffer(36161,null),O.depthBuffer&&(se.__webglDepthRenderbuffer=i.createRenderbuffer(),be(se.__webglDepthRenderbuffer,O,!0)),t.bindFramebuffer(36160,null)}}if(we){t.bindTexture(34067,xe.__webglTexture),J(34067,R,F);for(let de=0;de<6;de++)te(se.__webglFramebuffer[de],O,R,36064,34069+de);S(R,F)&&A(34067),t.unbindTexture()}else if(Se){const de=O.texture;for(let ie=0,Ee=de.length;ie<Ee;ie++){const Ne=de[ie],Ie=r.get(Ne);t.bindTexture(3553,Ie.__webglTexture),J(3553,Ne,F),te(se.__webglFramebuffer,O,Ne,36064+ie,3553),S(Ne,F)&&A(3553)}t.unbindTexture()}else{let de=3553;(O.isWebGL3DRenderTarget||O.isWebGLArrayRenderTarget)&&(a?de=O.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(de,xe.__webglTexture),J(de,R,F),te(se.__webglFramebuffer,O,R,36064,de),S(R,F)&&A(de),t.unbindTexture()}O.depthBuffer&&Te(O)}function Ze(O){const R=x(O)||a,se=O.isWebGLMultipleRenderTargets===!0?O.texture:[O.texture];for(let xe=0,we=se.length;xe<we;xe++){const Se=se[xe];if(S(Se,R)){const F=O.isWebGLCubeRenderTarget?34067:3553,de=r.get(Se).__webglTexture;t.bindTexture(F,de),A(F),t.unbindTexture()}}}function ht(O){if(a&&O.samples>0&&st(O)===!1){const R=O.isWebGLMultipleRenderTargets?O.texture:[O.texture],se=O.width,xe=O.height;let we=16384;const Se=[],F=O.stencilBuffer?33306:36096,de=r.get(O),ie=O.isWebGLMultipleRenderTargets===!0;if(ie)for(let Ee=0;Ee<R.length;Ee++)t.bindFramebuffer(36160,de.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Ee,36161,null),t.bindFramebuffer(36160,de.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Ee,3553,null,0);t.bindFramebuffer(36008,de.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,de.__webglFramebuffer);for(let Ee=0;Ee<R.length;Ee++){Se.push(36064+Ee),O.depthBuffer&&Se.push(F);const Ne=de.__ignoreDepthValues!==void 0?de.__ignoreDepthValues:!1;if(Ne===!1&&(O.depthBuffer&&(we|=256),O.stencilBuffer&&(we|=1024)),ie&&i.framebufferRenderbuffer(36008,36064,36161,de.__webglColorRenderbuffer[Ee]),Ne===!0&&(i.invalidateFramebuffer(36008,[F]),i.invalidateFramebuffer(36009,[F])),ie){const Ie=r.get(R[Ee]).__webglTexture;i.framebufferTexture2D(36009,36064,3553,Ie,0)}i.blitFramebuffer(0,0,se,xe,0,0,se,xe,we,9728),f&&i.invalidateFramebuffer(36008,Se)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),ie)for(let Ee=0;Ee<R.length;Ee++){t.bindFramebuffer(36160,de.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Ee,36161,de.__webglColorRenderbuffer[Ee]);const Ne=r.get(R[Ee]).__webglTexture;t.bindFramebuffer(36160,de.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Ee,3553,Ne,0)}t.bindFramebuffer(36009,de.__webglMultisampledFramebuffer)}}function wt(O){return Math.min(h,O.samples)}function st(O){const R=r.get(O);return a&&O.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&R.__useRenderToTexture!==!1}function ft(O){const R=o.render.frame;g.get(O)!==R&&(g.set(O,R),O.update())}function Ft(O,R){const se=O.encoding,xe=O.format,we=O.type;return O.isCompressedTexture===!0||O.isVideoTexture===!0||O.format===p3||se!==Dh&&(se===Wt?a===!1?e.has("EXT_sRGB")===!0&&xe===Ms?(O.format=p3,O.minFilter=Er,O.generateMipmaps=!1):R=QB.sRGBToLinear(R):(xe!==Ms||we!==Ih)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",se)),R}this.allocateTextureUnit=j,this.resetTextureUnits=Q,this.setTexture2D=ne,this.setTexture2DArray=ge,this.setTexture3D=pe,this.setTextureCube=V,this.rebindTextures=Ae,this.setupRenderTarget=Qe,this.updateRenderTargetMipmap=Ze,this.updateMultisampleRenderTarget=ht,this.setupDepthRenderbuffer=Te,this.setupFrameBufferTexture=te,this.useMultisampledRTT=st}function $le(i,e,t){const r=t.isWebGL2;function n(s,o=null){let a;if(s===Ih)return 5121;if(s===ore)return 32819;if(s===are)return 32820;if(s===rre)return 5120;if(s===nre)return 5122;if(s===GB)return 5123;if(s===sre)return 5124;if(s===ih)return 5125;if(s===mc)return 5126;if(s===ly)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===lre)return 6406;if(s===Ms)return 6408;if(s===cre)return 6409;if(s===ure)return 6410;if(s===yh)return 6402;if(s===rm)return 34041;if(s===p3)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===hre)return 6403;if(s===dre)return 36244;if(s===pre)return 33319;if(s===fre)return 33320;if(s===mre)return 36249;if(s===S2||s===T2||s===E2||s===A2)if(o===Wt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===S2)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===T2)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===E2)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===A2)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===S2)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===T2)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===E2)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===A2)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===LN||s===RN||s===PN||s===NN)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===LN)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===RN)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===PN)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===NN)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===gre)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===IN||s===DN)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===IN)return o===Wt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===DN)return o===Wt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===ON||s===UN||s===zN||s===FN||s===BN||s===VN||s===jN||s===HN||s===GN||s===WN||s===qN||s===XN||s===YN||s===KN)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===ON)return o===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===UN)return o===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===zN)return o===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===FN)return o===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===BN)return o===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===VN)return o===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===jN)return o===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===HN)return o===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===GN)return o===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===WN)return o===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===qN)return o===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===XN)return o===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===YN)return o===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===KN)return o===Wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===k2)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===k2)return o===Wt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===_re||s===ZN||s===JN||s===QN)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===k2)return a.COMPRESSED_RED_RGTC1_EXT;if(s===ZN)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===JN)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===QN)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Tf?r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):i[s]!==void 0?i[s]:null}return{convert:n}}let Lle=class extends dr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Di=class extends $i{constructor(){super(),this.isGroup=!0,this.type="Group"}};const Rle={type:"move"};let Z2=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Di,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Di,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new fe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new fe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Di,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new fe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new fe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let n=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const v of e.hand.values()){const m=t.getJointPose(v,r),p=this._getHandJoint(c,v);m!==null&&(p.matrix.fromArray(m.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=m.radius),p.visible=m!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],d=u.position.distanceTo(h.position),f=.02,g=.005;c.inputState.pinching&&d>f+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(n=t.getPose(e.targetRaySpace,r),n===null&&s!==null&&(n=s),n!==null&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Rle)))}return a!==null&&(a.visible=n!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Di;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}},Ple=class extends Zn{constructor(e,t,r,n,s,o,a,l,c,u){if(u=u!==void 0?u:yh,u!==yh&&u!==rm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===yh&&(r=ih),r===void 0&&u===rm&&(r=Tf),super(null,n,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ur,this.minFilter=l!==void 0?l:ur,this.flipY=!1,this.generateMipmaps=!1}},Nle=class extends Kh{constructor(e,t){super();const r=this;let n=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,d=null,f=null,g=null;const v=t.getContextAttributes();let m=null,p=null;const y=[],_=[],x=new Set,w=new Map,S=new dr;S.layers.enable(1),S.viewport=new _i;const A=new dr;A.layers.enable(2),A.viewport=new _i;const k=[S,A],M=new Lle;M.layers.enable(1),M.layers.enable(2);let b=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(V){let Y=y[V];return Y===void 0&&(Y=new Z2,y[V]=Y),Y.getTargetRaySpace()},this.getControllerGrip=function(V){let Y=y[V];return Y===void 0&&(Y=new Z2,y[V]=Y),Y.getGripSpace()},this.getHand=function(V){let Y=y[V];return Y===void 0&&(Y=new Z2,y[V]=Y),Y.getHandSpace()};function N(V){const Y=_.indexOf(V.inputSource);if(Y===-1)return;const ae=y[Y];ae!==void 0&&ae.dispatchEvent({type:V.type,data:V.inputSource})}function D(){n.removeEventListener("select",N),n.removeEventListener("selectstart",N),n.removeEventListener("selectend",N),n.removeEventListener("squeeze",N),n.removeEventListener("squeezestart",N),n.removeEventListener("squeezeend",N),n.removeEventListener("end",D),n.removeEventListener("inputsourceschange",U);for(let V=0;V<y.length;V++){const Y=_[V];Y!==null&&(_[V]=null,y[V].disconnect(Y))}b=null,P=null,e.setRenderTarget(m),f=null,d=null,h=null,n=null,p=null,pe.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(V){s=V,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(V){a=V,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(V){c=V},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return g},this.getSession=function(){return n},this.setSession=async function(V){if(n=V,n!==null){if(m=e.getRenderTarget(),n.addEventListener("select",N),n.addEventListener("selectstart",N),n.addEventListener("selectend",N),n.addEventListener("squeeze",N),n.addEventListener("squeezestart",N),n.addEventListener("squeezeend",N),n.addEventListener("end",D),n.addEventListener("inputsourceschange",U),v.xrCompatible!==!0&&await t.makeXRCompatible(),n.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Y={antialias:n.renderState.layers===void 0?v.antialias:!0,alpha:v.alpha,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(n,t,Y),n.updateRenderState({baseLayer:f}),p=new Oh(f.framebufferWidth,f.framebufferHeight,{format:Ms,type:Ih,encoding:e.outputEncoding,stencilBuffer:v.stencil})}else{let Y=null,ae=null,J=null;v.depth&&(J=v.stencil?35056:33190,Y=v.stencil?rm:yh,ae=v.stencil?Tf:ih);const z={colorFormat:32856,depthFormat:J,scaleFactor:s};h=new XRWebGLBinding(n,t),d=h.createProjectionLayer(z),n.updateRenderState({layers:[d]}),p=new Oh(d.textureWidth,d.textureHeight,{format:Ms,type:Ih,depthTexture:new Ple(d.textureWidth,d.textureHeight,ae,void 0,void 0,void 0,void 0,void 0,void 0,Y),stencilBuffer:v.stencil,encoding:e.outputEncoding,samples:v.antialias?4:0});const _e=e.properties.get(p);_e.__ignoreDepthValues=d.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await n.requestReferenceSpace(a),pe.setContext(n),pe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function U(V){for(let Y=0;Y<V.removed.length;Y++){const ae=V.removed[Y],J=_.indexOf(ae);J>=0&&(_[J]=null,y[J].disconnect(ae))}for(let Y=0;Y<V.added.length;Y++){const ae=V.added[Y];let J=_.indexOf(ae);if(J===-1){for(let _e=0;_e<y.length;_e++)if(_e>=_.length){_.push(ae),J=_e;break}else if(_[_e]===null){_[_e]=ae,J=_e;break}if(J===-1)break}const z=y[J];z&&z.connect(ae)}}const G=new fe,B=new fe;function Q(V,Y,ae){G.setFromMatrixPosition(Y.matrixWorld),B.setFromMatrixPosition(ae.matrixWorld);const J=G.distanceTo(B),z=Y.projectionMatrix.elements,_e=ae.projectionMatrix.elements,ee=z[14]/(z[10]-1),te=z[14]/(z[10]+1),be=(z[9]+1)/z[5],oe=(z[9]-1)/z[5],Te=(z[8]-1)/z[0],Ae=(_e[8]+1)/_e[0],Qe=ee*Te,Ze=ee*Ae,ht=J/(-Te+Ae),wt=ht*-Te;Y.matrixWorld.decompose(V.position,V.quaternion,V.scale),V.translateX(wt),V.translateZ(ht),V.matrixWorld.compose(V.position,V.quaternion,V.scale),V.matrixWorldInverse.copy(V.matrixWorld).invert();const st=ee+ht,ft=te+ht,Ft=Qe-wt,O=Ze+(J-wt),R=be*te/ft*st,se=oe*te/ft*st;V.projectionMatrix.makePerspective(Ft,O,R,se,st,ft),V.projectionMatrixInverse.copy(V.projectionMatrix).invert()}function j(V,Y){Y===null?V.matrixWorld.copy(V.matrix):V.matrixWorld.multiplyMatrices(Y.matrixWorld,V.matrix),V.matrixWorldInverse.copy(V.matrixWorld).invert()}this.updateCamera=function(V){if(n===null)return;M.near=A.near=S.near=V.near,M.far=A.far=S.far=V.far,(b!==M.near||P!==M.far)&&(n.updateRenderState({depthNear:M.near,depthFar:M.far}),b=M.near,P=M.far);const Y=V.parent,ae=M.cameras;j(M,Y);for(let J=0;J<ae.length;J++)j(ae[J],Y);ae.length===2?Q(M,S,A):M.projectionMatrix.copy(S.projectionMatrix),X(V,M,Y)};function X(V,Y,ae){ae===null?V.matrix.copy(Y.matrixWorld):(V.matrix.copy(ae.matrixWorld),V.matrix.invert(),V.matrix.multiply(Y.matrixWorld)),V.matrix.decompose(V.position,V.quaternion,V.scale),V.updateMatrixWorld(!0);const J=V.children;for(let z=0,_e=J.length;z<_e;z++)J[z].updateMatrixWorld(!0);V.projectionMatrix.copy(Y.projectionMatrix),V.projectionMatrixInverse.copy(Y.projectionMatrixInverse),V.isPerspectiveCamera&&(V.fov=sm*2*Math.atan(1/V.projectionMatrix.elements[5]),V.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(V){l=V,d!==null&&(d.fixedFoveation=V),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=V)},this.getPlanes=function(){return x};let ne=null;function ge(V,Y){if(u=Y.getViewerPose(c||o),g=Y,u!==null){const ae=u.views;f!==null&&(e.setRenderTargetFramebuffer(p,f.framebuffer),e.setRenderTarget(p));let J=!1;ae.length!==M.cameras.length&&(M.cameras.length=0,J=!0);for(let z=0;z<ae.length;z++){const _e=ae[z];let ee=null;if(f!==null)ee=f.getViewport(_e);else{const be=h.getViewSubImage(d,_e);ee=be.viewport,z===0&&(e.setRenderTargetTextures(p,be.colorTexture,d.ignoreDepthValues?void 0:be.depthStencilTexture),e.setRenderTarget(p))}let te=k[z];te===void 0&&(te=new dr,te.layers.enable(z),te.viewport=new _i,k[z]=te),te.matrix.fromArray(_e.transform.matrix),te.matrix.decompose(te.position,te.quaternion,te.scale),te.projectionMatrix.fromArray(_e.projectionMatrix),te.projectionMatrixInverse.copy(te.projectionMatrix).invert(),te.viewport.set(ee.x,ee.y,ee.width,ee.height),z===0&&(M.matrix.copy(te.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),J===!0&&M.cameras.push(te)}}for(let ae=0;ae<y.length;ae++){const J=_[ae],z=y[ae];J!==null&&z!==void 0&&z.update(J,Y,c||o)}if(ne&&ne(V,Y),Y.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:Y.detectedPlanes});let ae=null;for(const J of x)Y.detectedPlanes.has(J)||(ae===null&&(ae=[]),ae.push(J));if(ae!==null)for(const J of ae)x.delete(J),w.delete(J),r.dispatchEvent({type:"planeremoved",data:J});for(const J of Y.detectedPlanes)if(!x.has(J))x.add(J),w.set(J,Y.lastChangedTime),r.dispatchEvent({type:"planeadded",data:J});else{const z=w.get(J);J.lastChangedTime>z&&(w.set(J,J.lastChangedTime),r.dispatchEvent({type:"planechanged",data:J}))}}g=null}const pe=new f8;pe.setAnimationLoop(ge),this.setAnimationLoop=function(V){ne=V},this.dispose=function(){}}};function Ile(i,e){function t(m,p){m.matrixAutoUpdate===!0&&m.updateMatrix(),p.value.copy(m.matrix)}function r(m,p){p.color.getRGB(m.fogColor.value,h8(i)),p.isFog?(m.fogNear.value=p.near,m.fogFar.value=p.far):p.isFogExp2&&(m.fogDensity.value=p.density)}function n(m,p,y,_,x){p.isMeshBasicMaterial||p.isMeshLambertMaterial?s(m,p):p.isMeshToonMaterial?(s(m,p),h(m,p)):p.isMeshPhongMaterial?(s(m,p),u(m,p)):p.isMeshStandardMaterial?(s(m,p),d(m,p),p.isMeshPhysicalMaterial&&f(m,p,x)):p.isMeshMatcapMaterial?(s(m,p),g(m,p)):p.isMeshDepthMaterial?s(m,p):p.isMeshDistanceMaterial?(s(m,p),v(m,p)):p.isMeshNormalMaterial?s(m,p):p.isLineBasicMaterial?(o(m,p),p.isLineDashedMaterial&&a(m,p)):p.isPointsMaterial?l(m,p,y,_):p.isSpriteMaterial?c(m,p):p.isShadowMaterial?(m.color.value.copy(p.color),m.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function s(m,p){m.opacity.value=p.opacity,p.color&&m.diffuse.value.copy(p.color),p.emissive&&m.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(m.map.value=p.map,t(p.map,m.mapTransform)),p.alphaMap&&(m.alphaMap.value=p.alphaMap,t(p.alphaMap,m.alphaMapTransform)),p.bumpMap&&(m.bumpMap.value=p.bumpMap,t(p.bumpMap,m.bumpMapTransform),m.bumpScale.value=p.bumpScale,p.side===bn&&(m.bumpScale.value*=-1)),p.normalMap&&(m.normalMap.value=p.normalMap,t(p.normalMap,m.normalMapTransform),m.normalScale.value.copy(p.normalScale),p.side===bn&&m.normalScale.value.negate()),p.displacementMap&&(m.displacementMap.value=p.displacementMap,t(p.displacementMap,m.displacementMapTransform),m.displacementScale.value=p.displacementScale,m.displacementBias.value=p.displacementBias),p.emissiveMap&&(m.emissiveMap.value=p.emissiveMap,t(p.emissiveMap,m.emissiveMapTransform)),p.specularMap&&(m.specularMap.value=p.specularMap,t(p.specularMap,m.specularMapTransform)),p.alphaTest>0&&(m.alphaTest.value=p.alphaTest);const y=e.get(p).envMap;if(y&&(m.envMap.value=y,m.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=p.reflectivity,m.ior.value=p.ior,m.refractionRatio.value=p.refractionRatio),p.lightMap){m.lightMap.value=p.lightMap;const _=i.useLegacyLights===!0?Math.PI:1;m.lightMapIntensity.value=p.lightMapIntensity*_,t(p.lightMap,m.lightMapTransform)}p.aoMap&&(m.aoMap.value=p.aoMap,m.aoMapIntensity.value=p.aoMapIntensity,t(p.aoMap,m.aoMapTransform))}function o(m,p){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,p.map&&(m.map.value=p.map,t(p.map,m.mapTransform))}function a(m,p){m.dashSize.value=p.dashSize,m.totalSize.value=p.dashSize+p.gapSize,m.scale.value=p.scale}function l(m,p,y,_){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,m.size.value=p.size*y,m.scale.value=_*.5,p.map&&(m.map.value=p.map,t(p.map,m.uvTransform)),p.alphaMap&&(m.alphaMap.value=p.alphaMap),p.alphaTest>0&&(m.alphaTest.value=p.alphaTest)}function c(m,p){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,m.rotation.value=p.rotation,p.map&&(m.map.value=p.map,t(p.map,m.mapTransform)),p.alphaMap&&(m.alphaMap.value=p.alphaMap),p.alphaTest>0&&(m.alphaTest.value=p.alphaTest)}function u(m,p){m.specular.value.copy(p.specular),m.shininess.value=Math.max(p.shininess,1e-4)}function h(m,p){p.gradientMap&&(m.gradientMap.value=p.gradientMap)}function d(m,p){m.metalness.value=p.metalness,p.metalnessMap&&(m.metalnessMap.value=p.metalnessMap,t(p.metalnessMap,m.metalnessMapTransform)),m.roughness.value=p.roughness,p.roughnessMap&&(m.roughnessMap.value=p.roughnessMap,t(p.roughnessMap,m.roughnessMapTransform)),e.get(p).envMap&&(m.envMapIntensity.value=p.envMapIntensity)}function f(m,p,y){m.ior.value=p.ior,p.sheen>0&&(m.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),m.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(m.sheenColorMap.value=p.sheenColorMap,t(p.sheenColorMap,m.sheenColorMapTransform)),p.sheenRoughnessMap&&(m.sheenRoughnessMap.value=p.sheenRoughnessMap,t(p.sheenRoughnessMap,m.sheenRoughnessMapTransform))),p.clearcoat>0&&(m.clearcoat.value=p.clearcoat,m.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(m.clearcoatMap.value=p.clearcoatMap,t(p.clearcoatMap,m.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,t(p.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(m.clearcoatNormalMap.value=p.clearcoatNormalMap,t(p.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===bn&&m.clearcoatNormalScale.value.negate())),p.iridescence>0&&(m.iridescence.value=p.iridescence,m.iridescenceIOR.value=p.iridescenceIOR,m.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(m.iridescenceMap.value=p.iridescenceMap,t(p.iridescenceMap,m.iridescenceMapTransform)),p.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=p.iridescenceThicknessMap,t(p.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),p.transmission>0&&(m.transmission.value=p.transmission,m.transmissionSamplerMap.value=y.texture,m.transmissionSamplerSize.value.set(y.width,y.height),p.transmissionMap&&(m.transmissionMap.value=p.transmissionMap,t(p.transmissionMap,m.transmissionMapTransform)),m.thickness.value=p.thickness,p.thicknessMap&&(m.thicknessMap.value=p.thicknessMap,t(p.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=p.attenuationDistance,m.attenuationColor.value.copy(p.attenuationColor)),m.specularIntensity.value=p.specularIntensity,m.specularColor.value.copy(p.specularColor),p.specularColorMap&&(m.specularColorMap.value=p.specularColorMap,t(p.specularColorMap,m.specularColorMapTransform)),p.specularIntensityMap&&(m.specularIntensityMap.value=p.specularIntensityMap,t(p.specularIntensityMap,m.specularIntensityMapTransform))}function g(m,p){p.matcap&&(m.matcap.value=p.matcap)}function v(m,p){const y=e.get(p).light;m.referencePosition.value.setFromMatrixPosition(y.matrixWorld),m.nearDistance.value=y.shadow.camera.near,m.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:n}}function Dle(i,e,t,r){let n={},s={},o=[];const a=t.isWebGL2?i.getParameter(35375):0;function l(y,_){const x=_.program;r.uniformBlockBinding(y,x)}function c(y,_){let x=n[y.id];x===void 0&&(g(y),x=u(y),n[y.id]=x,y.addEventListener("dispose",m));const w=_.program;r.updateUBOMapping(y,w);const S=e.render.frame;s[y.id]!==S&&(d(y),s[y.id]=S)}function u(y){const _=h();y.__bindingPointIndex=_;const x=i.createBuffer(),w=y.__size,S=y.usage;return i.bindBuffer(35345,x),i.bufferData(35345,w,S),i.bindBuffer(35345,null),i.bindBufferBase(35345,_,x),x}function h(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){const _=n[y.id],x=y.uniforms,w=y.__cache;i.bindBuffer(35345,_);for(let S=0,A=x.length;S<A;S++){const k=x[S];if(f(k,S,w)===!0){const M=k.__offset,b=Array.isArray(k.value)?k.value:[k.value];let P=0;for(let N=0;N<b.length;N++){const D=b[N],U=v(D);typeof D=="number"?(k.__data[0]=D,i.bufferSubData(35345,M+P,k.__data)):D.isMatrix3?(k.__data[0]=D.elements[0],k.__data[1]=D.elements[1],k.__data[2]=D.elements[2],k.__data[3]=D.elements[0],k.__data[4]=D.elements[3],k.__data[5]=D.elements[4],k.__data[6]=D.elements[5],k.__data[7]=D.elements[0],k.__data[8]=D.elements[6],k.__data[9]=D.elements[7],k.__data[10]=D.elements[8],k.__data[11]=D.elements[0]):(D.toArray(k.__data,P),P+=U.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(35345,M,k.__data)}}i.bindBuffer(35345,null)}function f(y,_,x){const w=y.value;if(x[_]===void 0){if(typeof w=="number")x[_]=w;else{const S=Array.isArray(w)?w:[w],A=[];for(let k=0;k<S.length;k++)A.push(S[k].clone());x[_]=A}return!0}else if(typeof w=="number"){if(x[_]!==w)return x[_]=w,!0}else{const S=Array.isArray(x[_])?x[_]:[x[_]],A=Array.isArray(w)?w:[w];for(let k=0;k<S.length;k++){const M=S[k];if(M.equals(A[k])===!1)return M.copy(A[k]),!0}}return!1}function g(y){const _=y.uniforms;let x=0;const w=16;let S=0;for(let A=0,k=_.length;A<k;A++){const M=_[A],b={boundary:0,storage:0},P=Array.isArray(M.value)?M.value:[M.value];for(let N=0,D=P.length;N<D;N++){const U=P[N],G=v(U);b.boundary+=G.boundary,b.storage+=G.storage}if(M.__data=new Float32Array(b.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=x,A>0){S=x%w;const N=w-S;S!==0&&N-b.boundary<0&&(x+=w-S,M.__offset=x)}x+=b.storage}return S=x%w,S>0&&(x+=w-S),y.__size=x,y.__cache={},this}function v(y){const _={boundary:0,storage:0};return typeof y=="number"?(_.boundary=4,_.storage=4):y.isVector2?(_.boundary=8,_.storage=8):y.isVector3||y.isColor?(_.boundary=16,_.storage=12):y.isVector4?(_.boundary=16,_.storage=16):y.isMatrix3?(_.boundary=48,_.storage=48):y.isMatrix4?(_.boundary=64,_.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),_}function m(y){const _=y.target;_.removeEventListener("dispose",m);const x=o.indexOf(_.__bindingPointIndex);o.splice(x,1),i.deleteBuffer(n[_.id]),delete n[_.id],delete s[_.id]}function p(){for(const y in n)i.deleteBuffer(n[y]);o=[],n={},s={}}return{bind:l,update:c,dispose:p}}function Ole(){const i=uy("canvas");return i.style.display="block",i}let _$=class{constructor(e={}){const{canvas:t=Ole(),context:r=null,depth:n=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let d;r!==null?d=r.getContextAttributes().alpha:d=o;let f=null,g=null;const v=[],m=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Dh,this.useLegacyLights=!0,this.toneMapping=tl,this.toneMappingExposure=1;const p=this;let y=!1,_=0,x=0,w=null,S=-1,A=null;const k=new _i,M=new _i;let b=null,P=t.width,N=t.height,D=1,U=null,G=null;const B=new _i(0,0,P,N),Q=new _i(0,0,P,N);let j=!1;const X=new m$;let ne=!1,ge=!1,pe=null;const V=new Rt,Y=new fe,ae={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function J(){return w===null?D:1}let z=r;function _e(I,Z){for(let le=0;le<I.length;le++){const K=I[le],ue=t.getContext(K,Z);if(ue!==null)return ue}return null}try{const I={alpha:!0,depth:n,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${d$}`),t.addEventListener("webglcontextlost",Le,!1),t.addEventListener("webglcontextrestored",Ge,!1),t.addEventListener("webglcontextcreationerror",dt,!1),z===null){const Z=["webgl2","webgl","experimental-webgl"];if(p.isWebGL1Renderer===!0&&Z.shift(),z=_e(Z,I),z===null)throw _e(Z)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}z.getShaderPrecisionFormat===void 0&&(z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(I){throw console.error("THREE.WebGLRenderer: "+I.message),I}let ee,te,be,oe,Te,Ae,Qe,Ze,ht,wt,st,ft,Ft,O,R,se,xe,we,Se,F,de,ie,Ee,Ne;function Ie(){ee=new Xoe(z),te=new Voe(z,ee,e),ee.init(te),ie=new $le(z,ee,te),be=new kle(z,ee,te),oe=new Zoe,Te=new fle,Ae=new Cle(z,ee,be,Te,te,ie,oe),Qe=new Hoe(p),Ze=new qoe(p),ht=new cne(z,te),Ee=new Foe(z,ee,ht,te),wt=new Yoe(z,ht,oe,Ee),st=new tae(z,wt,ht,oe),Se=new eae(z,te,Ae),se=new joe(Te),ft=new ple(p,Qe,Ze,ee,te,Ee,se),Ft=new Ile(p,Te),O=new gle,R=new wle(ee,te),we=new zoe(p,Qe,Ze,be,st,d,l),xe=new Ale(p,st,te),Ne=new Dle(z,oe,te,be),F=new Boe(z,ee,oe,te),de=new Koe(z,ee,oe,te),oe.programs=ft.programs,p.capabilities=te,p.extensions=ee,p.properties=Te,p.renderLists=O,p.shadowMap=xe,p.state=be,p.info=oe}Ie();const $e=new Nle(p,z);this.xr=$e,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){const I=ee.get("WEBGL_lose_context");I&&I.loseContext()},this.forceContextRestore=function(){const I=ee.get("WEBGL_lose_context");I&&I.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(I){I!==void 0&&(D=I,this.setSize(P,N,!1))},this.getSize=function(I){return I.set(P,N)},this.setSize=function(I,Z,le=!0){if($e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}P=I,N=Z,t.width=Math.floor(I*D),t.height=Math.floor(Z*D),le===!0&&(t.style.width=I+"px",t.style.height=Z+"px"),this.setViewport(0,0,I,Z)},this.getDrawingBufferSize=function(I){return I.set(P*D,N*D).floor()},this.setDrawingBufferSize=function(I,Z,le){P=I,N=Z,D=le,t.width=Math.floor(I*le),t.height=Math.floor(Z*le),this.setViewport(0,0,I,Z)},this.getCurrentViewport=function(I){return I.copy(k)},this.getViewport=function(I){return I.copy(B)},this.setViewport=function(I,Z,le,K){I.isVector4?B.set(I.x,I.y,I.z,I.w):B.set(I,Z,le,K),be.viewport(k.copy(B).multiplyScalar(D).floor())},this.getScissor=function(I){return I.copy(Q)},this.setScissor=function(I,Z,le,K){I.isVector4?Q.set(I.x,I.y,I.z,I.w):Q.set(I,Z,le,K),be.scissor(M.copy(Q).multiplyScalar(D).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(I){be.setScissorTest(j=I)},this.setOpaqueSort=function(I){U=I},this.setTransparentSort=function(I){G=I},this.getClearColor=function(I){return I.copy(we.getClearColor())},this.setClearColor=function(){we.setClearColor.apply(we,arguments)},this.getClearAlpha=function(){return we.getClearAlpha()},this.setClearAlpha=function(){we.setClearAlpha.apply(we,arguments)},this.clear=function(I=!0,Z=!0,le=!0){let K=0;I&&(K|=16384),Z&&(K|=256),le&&(K|=1024),z.clear(K)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Le,!1),t.removeEventListener("webglcontextrestored",Ge,!1),t.removeEventListener("webglcontextcreationerror",dt,!1),O.dispose(),R.dispose(),Te.dispose(),Qe.dispose(),Ze.dispose(),st.dispose(),Ee.dispose(),Ne.dispose(),ft.dispose(),$e.dispose(),$e.removeEventListener("sessionstart",Fe),$e.removeEventListener("sessionend",vt),pe&&(pe.dispose(),pe=null),St.stop()};function Le(I){I.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function Ge(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const I=oe.autoReset,Z=xe.enabled,le=xe.autoUpdate,K=xe.needsUpdate,ue=xe.type;Ie(),oe.autoReset=I,xe.enabled=Z,xe.autoUpdate=le,xe.needsUpdate=K,xe.type=ue}function dt(I){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",I.statusMessage)}function Tt(I){const Z=I.target;Z.removeEventListener("dispose",Tt),H(Z)}function H(I){ce(I),Te.remove(I)}function ce(I){const Z=Te.get(I).programs;Z!==void 0&&(Z.forEach(function(le){ft.releaseProgram(le)}),I.isShaderMaterial&&ft.releaseShaderCache(I))}this.renderBufferDirect=function(I,Z,le,K,ue,De){Z===null&&(Z=ae);const je=ue.isMesh&&ue.matrixWorld.determinant()<0,We=mu(I,Z,le,K,ue);be.setMaterial(K,je);let Je=le.index,ot=1;K.wireframe===!0&&(Je=wt.getWireframeAttribute(le),ot=2);const tt=le.drawRange,et=le.attributes.position;let Mt=tt.start*ot,mt=(tt.start+tt.count)*ot;De!==null&&(Mt=Math.max(Mt,De.start*ot),mt=Math.min(mt,(De.start+De.count)*ot)),Je!==null?(Mt=Math.max(Mt,0),mt=Math.min(mt,Je.count)):et!=null&&(Mt=Math.max(Mt,0),mt=Math.min(mt,et.count));const Bt=mt-Mt;if(Bt<0||Bt===1/0)return;Ee.setup(ue,K,We,le,Je);let Mi,kt=F;if(Je!==null&&(Mi=ht.get(Je),kt=de,kt.setIndex(Mi)),ue.isMesh)K.wireframe===!0?(be.setLineWidth(K.wireframeLinewidth*J()),kt.setMode(1)):kt.setMode(4);else if(ue.isLine){let nt=K.linewidth;nt===void 0&&(nt=1),be.setLineWidth(nt*J()),ue.isLineSegments?kt.setMode(1):ue.isLineLoop?kt.setMode(2):kt.setMode(3)}else ue.isPoints?kt.setMode(0):ue.isSprite&&kt.setMode(4);if(ue.isInstancedMesh)kt.renderInstances(Mt,Bt,ue.count);else if(le.isInstancedBufferGeometry){const nt=le._maxInstanceCount!==void 0?le._maxInstanceCount:1/0,$n=Math.min(le.instanceCount,nt);kt.renderInstances(Mt,Bt,$n)}else kt.render(Mt,Bt)},this.compile=function(I,Z){function le(K,ue,De){K.transparent===!0&&K.side===ws&&K.forceSinglePass===!1?(K.side=bn,K.needsUpdate=!0,Cn(K,ue,De),K.side=qo,K.needsUpdate=!0,Cn(K,ue,De),K.side=ws):Cn(K,ue,De)}g=R.get(I),g.init(),m.push(g),I.traverseVisible(function(K){K.isLight&&K.layers.test(Z.layers)&&(g.pushLight(K),K.castShadow&&g.pushShadow(K))}),g.setupLights(p.useLegacyLights),I.traverse(function(K){const ue=K.material;if(ue)if(Array.isArray(ue))for(let De=0;De<ue.length;De++){const je=ue[De];le(je,I,K)}else le(ue,I,K)}),m.pop(),g=null};let ye=null;function Ce(I){ye&&ye(I)}function Fe(){St.stop()}function vt(){St.start()}const St=new f8;St.setAnimationLoop(Ce),typeof self<"u"&&St.setContext(self),this.setAnimationLoop=function(I){ye=I,$e.setAnimationLoop(I),I===null?St.stop():St.start()},$e.addEventListener("sessionstart",Fe),$e.addEventListener("sessionend",vt),this.render=function(I,Z){if(Z!==void 0&&Z.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;I.matrixWorldAutoUpdate===!0&&I.updateMatrixWorld(),Z.parent===null&&Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),$e.enabled===!0&&$e.isPresenting===!0&&($e.cameraAutoUpdate===!0&&$e.updateCamera(Z),Z=$e.getCamera()),I.isScene===!0&&I.onBeforeRender(p,I,Z,w),g=R.get(I,m.length),g.init(),m.push(g),V.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),X.setFromProjectionMatrix(V),ge=this.localClippingEnabled,ne=se.init(this.clippingPlanes,ge),f=O.get(I,v.length),f.init(),v.push(f),Dt(I,Z,0,p.sortObjects),f.finish(),p.sortObjects===!0&&f.sort(U,G),ne===!0&&se.beginShadows();const le=g.state.shadowsArray;if(xe.render(le,I,Z),ne===!0&&se.endShadows(),this.info.autoReset===!0&&this.info.reset(),we.render(f,I),g.setupLights(p.useLegacyLights),Z.isArrayCamera){const K=Z.cameras;for(let ue=0,De=K.length;ue<De;ue++){const je=K[ue];Fi(f,I,je,je.viewport)}}else Fi(f,I,Z);w!==null&&(Ae.updateMultisampleRenderTarget(w),Ae.updateRenderTargetMipmap(w)),I.isScene===!0&&I.onAfterRender(p,I,Z),Ee.resetDefaultState(),S=-1,A=null,m.pop(),m.length>0?g=m[m.length-1]:g=null,v.pop(),v.length>0?f=v[v.length-1]:f=null};function Dt(I,Z,le,K){if(I.visible===!1)return;if(I.layers.test(Z.layers)){if(I.isGroup)le=I.renderOrder;else if(I.isLOD)I.autoUpdate===!0&&I.update(Z);else if(I.isLight)g.pushLight(I),I.castShadow&&g.pushShadow(I);else if(I.isSprite){if(!I.frustumCulled||X.intersectsSprite(I)){K&&Y.setFromMatrixPosition(I.matrixWorld).applyMatrix4(V);const De=st.update(I),je=I.material;je.visible&&f.push(I,De,je,le,Y.z,null)}}else if((I.isMesh||I.isLine||I.isPoints)&&(I.isSkinnedMesh&&I.skeleton.frame!==oe.render.frame&&(I.skeleton.update(),I.skeleton.frame=oe.render.frame),!I.frustumCulled||X.intersectsObject(I))){K&&Y.setFromMatrixPosition(I.matrixWorld).applyMatrix4(V);const De=st.update(I),je=I.material;if(Array.isArray(je)){const We=De.groups;for(let Je=0,ot=We.length;Je<ot;Je++){const tt=We[Je],et=je[tt.materialIndex];et&&et.visible&&f.push(I,De,et,le,Y.z,tt)}}else je.visible&&f.push(I,De,je,le,Y.z,null)}}const ue=I.children;for(let De=0,je=ue.length;De<je;De++)Dt(ue[De],Z,le,K)}function Fi(I,Z,le,K){const ue=I.opaque,De=I.transmissive,je=I.transparent;g.setupLightsView(le),ne===!0&&se.setGlobalState(p.clippingPlanes,le),De.length>0&&at(ue,De,Z,le),K&&be.viewport(k.copy(K)),ue.length>0&&ei(ue,Z,le),De.length>0&&ei(De,Z,le),je.length>0&&ei(je,Z,le),be.buffers.depth.setTest(!0),be.buffers.depth.setMask(!0),be.buffers.color.setMask(!0),be.setPolygonOffset(!1)}function at(I,Z,le,K){if(pe===null){const We=te.isWebGL2;pe=new Oh(1024,1024,{generateMipmaps:!0,type:ee.has("EXT_color_buffer_half_float")?ly:Ih,minFilter:hl,samples:We&&a===!0?4:0})}const ue=p.getRenderTarget();p.setRenderTarget(pe),p.clear();const De=p.toneMapping;p.toneMapping=tl,ei(I,le,K),Ae.updateMultisampleRenderTarget(pe),Ae.updateRenderTargetMipmap(pe);let je=!1;for(let We=0,Je=Z.length;We<Je;We++){const ot=Z[We],tt=ot.object,et=ot.geometry,Mt=ot.material,mt=ot.group;if(Mt.side===ws&&tt.layers.test(K.layers)){const Bt=Mt.side;Mt.side=bn,Mt.needsUpdate=!0,fi(tt,le,K,et,Mt,mt),Mt.side=Bt,Mt.needsUpdate=!0,je=!0}}je===!0&&(Ae.updateMultisampleRenderTarget(pe),Ae.updateRenderTargetMipmap(pe)),p.setRenderTarget(ue),p.toneMapping=De}function ei(I,Z,le){const K=Z.isScene===!0?Z.overrideMaterial:null;for(let ue=0,De=I.length;ue<De;ue++){const je=I[ue],We=je.object,Je=je.geometry,ot=K===null?je.material:K,tt=je.group;We.layers.test(le.layers)&&fi(We,Z,le,Je,ot,tt)}}function fi(I,Z,le,K,ue,De){I.onBeforeRender(p,Z,le,K,ue,De),I.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,I.matrixWorld),I.normalMatrix.getNormalMatrix(I.modelViewMatrix),ue.onBeforeRender(p,Z,le,K,I,De),ue.transparent===!0&&ue.side===ws&&ue.forceSinglePass===!1?(ue.side=bn,ue.needsUpdate=!0,p.renderBufferDirect(le,Z,K,ue,I,De),ue.side=qo,ue.needsUpdate=!0,p.renderBufferDirect(le,Z,K,ue,I,De),ue.side=ws):p.renderBufferDirect(le,Z,K,ue,I,De),I.onAfterRender(p,Z,le,K,ue,De)}function Cn(I,Z,le){Z.isScene!==!0&&(Z=ae);const K=Te.get(I),ue=g.state.lights,De=g.state.shadowsArray,je=ue.state.version,We=ft.getParameters(I,ue.state,De,Z,le),Je=ft.getProgramCacheKey(We);let ot=K.programs;K.environment=I.isMeshStandardMaterial?Z.environment:null,K.fog=Z.fog,K.envMap=(I.isMeshStandardMaterial?Ze:Qe).get(I.envMap||K.environment),ot===void 0&&(I.addEventListener("dispose",Tt),ot=new Map,K.programs=ot);let tt=ot.get(Je);if(tt!==void 0){if(K.currentProgram===tt&&K.lightsStateVersion===je)return pa(I,We),tt}else We.uniforms=ft.getUniforms(I),I.onBuild(le,We,p),I.onBeforeCompile(We,p),tt=ft.acquireProgram(We,Je),ot.set(Je,tt),K.uniforms=We.uniforms;const et=K.uniforms;(!I.isShaderMaterial&&!I.isRawShaderMaterial||I.clipping===!0)&&(et.clippingPlanes=se.uniform),pa(I,We),K.needsLights=_u(I),K.lightsStateVersion=je,K.needsLights&&(et.ambientLightColor.value=ue.state.ambient,et.lightProbe.value=ue.state.probe,et.directionalLights.value=ue.state.directional,et.directionalLightShadows.value=ue.state.directionalShadow,et.spotLights.value=ue.state.spot,et.spotLightShadows.value=ue.state.spotShadow,et.rectAreaLights.value=ue.state.rectArea,et.ltc_1.value=ue.state.rectAreaLTC1,et.ltc_2.value=ue.state.rectAreaLTC2,et.pointLights.value=ue.state.point,et.pointLightShadows.value=ue.state.pointShadow,et.hemisphereLights.value=ue.state.hemi,et.directionalShadowMap.value=ue.state.directionalShadowMap,et.directionalShadowMatrix.value=ue.state.directionalShadowMatrix,et.spotShadowMap.value=ue.state.spotShadowMap,et.spotLightMatrix.value=ue.state.spotLightMatrix,et.spotLightMap.value=ue.state.spotLightMap,et.pointShadowMap.value=ue.state.pointShadowMap,et.pointShadowMatrix.value=ue.state.pointShadowMatrix);const Mt=tt.getUniforms(),mt=Zb.seqWithValue(Mt.seq,et);return K.currentProgram=tt,K.uniformsList=mt,tt}function pa(I,Z){const le=Te.get(I);le.outputEncoding=Z.outputEncoding,le.instancing=Z.instancing,le.skinning=Z.skinning,le.morphTargets=Z.morphTargets,le.morphNormals=Z.morphNormals,le.morphColors=Z.morphColors,le.morphTargetsCount=Z.morphTargetsCount,le.numClippingPlanes=Z.numClippingPlanes,le.numIntersection=Z.numClipIntersection,le.vertexAlphas=Z.vertexAlphas,le.vertexTangents=Z.vertexTangents,le.toneMapping=Z.toneMapping}function mu(I,Z,le,K,ue){Z.isScene!==!0&&(Z=ae),Ae.resetTextureUnits();const De=Z.fog,je=K.isMeshStandardMaterial?Z.environment:null,We=w===null?p.outputEncoding:w.isXRRenderTarget===!0?w.texture.encoding:Dh,Je=(K.isMeshStandardMaterial?Ze:Qe).get(K.envMap||je),ot=K.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,tt=!!K.normalMap&&!!le.attributes.tangent,et=!!le.morphAttributes.position,Mt=!!le.morphAttributes.normal,mt=!!le.morphAttributes.color,Bt=K.toneMapped?p.toneMapping:tl,Mi=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,kt=Mi!==void 0?Mi.length:0,nt=Te.get(K),$n=g.state.lights;if(ne===!0&&(ge===!0||I!==A)){const ti=I===A&&K.id===S;se.setState(K,I,ti)}let Ws=!1;K.version===nt.__version?(nt.needsLights&&nt.lightsStateVersion!==$n.state.version||nt.outputEncoding!==We||ue.isInstancedMesh&&nt.instancing===!1||!ue.isInstancedMesh&&nt.instancing===!0||ue.isSkinnedMesh&&nt.skinning===!1||!ue.isSkinnedMesh&&nt.skinning===!0||nt.envMap!==Je||K.fog===!0&&nt.fog!==De||nt.numClippingPlanes!==void 0&&(nt.numClippingPlanes!==se.numPlanes||nt.numIntersection!==se.numIntersection)||nt.vertexAlphas!==ot||nt.vertexTangents!==tt||nt.morphTargets!==et||nt.morphNormals!==Mt||nt.morphColors!==mt||nt.toneMapping!==Bt||te.isWebGL2===!0&&nt.morphTargetsCount!==kt)&&(Ws=!0):(Ws=!0,nt.__version=K.version);let qi=nt.currentProgram;Ws===!0&&(qi=Cn(K,Z,ue));let fa=!1,xr=!1,Ln=!1;const Lt=qi.getUniforms(),Xi=nt.uniforms;if(be.useProgram(qi.program)&&(fa=!0,xr=!0,Ln=!0),K.id!==S&&(S=K.id,xr=!0),fa||A!==I){if(Lt.setValue(z,"projectionMatrix",I.projectionMatrix),te.logarithmicDepthBuffer&&Lt.setValue(z,"logDepthBufFC",2/(Math.log(I.far+1)/Math.LN2)),A!==I&&(A=I,xr=!0,Ln=!0),K.isShaderMaterial||K.isMeshPhongMaterial||K.isMeshToonMaterial||K.isMeshStandardMaterial||K.envMap){const ti=Lt.map.cameraPosition;ti!==void 0&&ti.setValue(z,Y.setFromMatrixPosition(I.matrixWorld))}(K.isMeshPhongMaterial||K.isMeshToonMaterial||K.isMeshLambertMaterial||K.isMeshBasicMaterial||K.isMeshStandardMaterial||K.isShaderMaterial)&&Lt.setValue(z,"isOrthographic",I.isOrthographicCamera===!0),(K.isMeshPhongMaterial||K.isMeshToonMaterial||K.isMeshLambertMaterial||K.isMeshBasicMaterial||K.isMeshStandardMaterial||K.isShaderMaterial||K.isShadowMaterial||ue.isSkinnedMesh)&&Lt.setValue(z,"viewMatrix",I.matrixWorldInverse)}if(ue.isSkinnedMesh){Lt.setOptional(z,ue,"bindMatrix"),Lt.setOptional(z,ue,"bindMatrixInverse");const ti=ue.skeleton;ti&&(te.floatVertexTextures?(ti.boneTexture===null&&ti.computeBoneTexture(),Lt.setValue(z,"boneTexture",ti.boneTexture,Ae),Lt.setValue(z,"boneTextureSize",ti.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Rn=le.morphAttributes;if((Rn.position!==void 0||Rn.normal!==void 0||Rn.color!==void 0&&te.isWebGL2===!0)&&Se.update(ue,le,qi),(xr||nt.receiveShadow!==ue.receiveShadow)&&(nt.receiveShadow=ue.receiveShadow,Lt.setValue(z,"receiveShadow",ue.receiveShadow)),K.isMeshGouraudMaterial&&K.envMap!==null&&(Xi.envMap.value=Je,Xi.flipEnvMap.value=Je.isCubeTexture&&Je.isRenderTargetTexture===!1?-1:1),xr&&(Lt.setValue(z,"toneMappingExposure",p.toneMappingExposure),nt.needsLights&&gu(Xi,Ln),De&&K.fog===!0&&Ft.refreshFogUniforms(Xi,De),Ft.refreshMaterialUniforms(Xi,K,D,N,pe),Zb.upload(z,nt.uniformsList,Xi,Ae)),K.isShaderMaterial&&K.uniformsNeedUpdate===!0&&(Zb.upload(z,nt.uniformsList,Xi,Ae),K.uniformsNeedUpdate=!1),K.isSpriteMaterial&&Lt.setValue(z,"center",ue.center),Lt.setValue(z,"modelViewMatrix",ue.modelViewMatrix),Lt.setValue(z,"normalMatrix",ue.normalMatrix),Lt.setValue(z,"modelMatrix",ue.matrixWorld),K.isShaderMaterial||K.isRawShaderMaterial){const ti=K.uniformsGroups;for(let Pn=0,yu=ti.length;Pn<yu;Pn++)if(te.isWebGL2){const ma=ti[Pn];Ne.update(ma,qi),Ne.bind(ma,qi)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return qi}function gu(I,Z){I.ambientLightColor.needsUpdate=Z,I.lightProbe.needsUpdate=Z,I.directionalLights.needsUpdate=Z,I.directionalLightShadows.needsUpdate=Z,I.pointLights.needsUpdate=Z,I.pointLightShadows.needsUpdate=Z,I.spotLights.needsUpdate=Z,I.spotLightShadows.needsUpdate=Z,I.rectAreaLights.needsUpdate=Z,I.hemisphereLights.needsUpdate=Z}function _u(I){return I.isMeshLambertMaterial||I.isMeshToonMaterial||I.isMeshPhongMaterial||I.isMeshStandardMaterial||I.isShadowMaterial||I.isShaderMaterial&&I.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(I,Z,le){Te.get(I.texture).__webglTexture=Z,Te.get(I.depthTexture).__webglTexture=le;const K=Te.get(I);K.__hasExternalTextures=!0,K.__hasExternalTextures&&(K.__autoAllocateDepthBuffer=le===void 0,K.__autoAllocateDepthBuffer||ee.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),K.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(I,Z){const le=Te.get(I);le.__webglFramebuffer=Z,le.__useDefaultFramebuffer=Z===void 0},this.setRenderTarget=function(I,Z=0,le=0){w=I,_=Z,x=le;let K=!0,ue=null,De=!1,je=!1;if(I){const We=Te.get(I);We.__useDefaultFramebuffer!==void 0?(be.bindFramebuffer(36160,null),K=!1):We.__webglFramebuffer===void 0?Ae.setupRenderTarget(I):We.__hasExternalTextures&&Ae.rebindTextures(I,Te.get(I.texture).__webglTexture,Te.get(I.depthTexture).__webglTexture);const Je=I.texture;(Je.isData3DTexture||Je.isDataArrayTexture||Je.isCompressedArrayTexture)&&(je=!0);const ot=Te.get(I).__webglFramebuffer;I.isWebGLCubeRenderTarget?(ue=ot[Z],De=!0):te.isWebGL2&&I.samples>0&&Ae.useMultisampledRTT(I)===!1?ue=Te.get(I).__webglMultisampledFramebuffer:ue=ot,k.copy(I.viewport),M.copy(I.scissor),b=I.scissorTest}else k.copy(B).multiplyScalar(D).floor(),M.copy(Q).multiplyScalar(D).floor(),b=j;if(be.bindFramebuffer(36160,ue)&&te.drawBuffers&&K&&be.drawBuffers(I,ue),be.viewport(k),be.scissor(M),be.setScissorTest(b),De){const We=Te.get(I.texture);z.framebufferTexture2D(36160,36064,34069+Z,We.__webglTexture,le)}else if(je){const We=Te.get(I.texture),Je=Z||0;z.framebufferTextureLayer(36160,36064,We.__webglTexture,le||0,Je)}S=-1},this.readRenderTargetPixels=function(I,Z,le,K,ue,De,je){if(!(I&&I.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let We=Te.get(I).__webglFramebuffer;if(I.isWebGLCubeRenderTarget&&je!==void 0&&(We=We[je]),We){be.bindFramebuffer(36160,We);try{const Je=I.texture,ot=Je.format,tt=Je.type;if(ot!==Ms&&ie.convert(ot)!==z.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const et=tt===ly&&(ee.has("EXT_color_buffer_half_float")||te.isWebGL2&&ee.has("EXT_color_buffer_float"));if(tt!==Ih&&ie.convert(tt)!==z.getParameter(35738)&&!(tt===mc&&(te.isWebGL2||ee.has("OES_texture_float")||ee.has("WEBGL_color_buffer_float")))&&!et){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Z>=0&&Z<=I.width-K&&le>=0&&le<=I.height-ue&&z.readPixels(Z,le,K,ue,ie.convert(ot),ie.convert(tt),De)}finally{const Je=w!==null?Te.get(w).__webglFramebuffer:null;be.bindFramebuffer(36160,Je)}}},this.copyFramebufferToTexture=function(I,Z,le=0){const K=Math.pow(2,-le),ue=Math.floor(Z.image.width*K),De=Math.floor(Z.image.height*K);Ae.setTexture2D(Z,0),z.copyTexSubImage2D(3553,le,0,0,I.x,I.y,ue,De),be.unbindTexture()},this.copyTextureToTexture=function(I,Z,le,K=0){const ue=Z.image.width,De=Z.image.height,je=ie.convert(le.format),We=ie.convert(le.type);Ae.setTexture2D(le,0),z.pixelStorei(37440,le.flipY),z.pixelStorei(37441,le.premultiplyAlpha),z.pixelStorei(3317,le.unpackAlignment),Z.isDataTexture?z.texSubImage2D(3553,K,I.x,I.y,ue,De,je,We,Z.image.data):Z.isCompressedTexture?z.compressedTexSubImage2D(3553,K,I.x,I.y,Z.mipmaps[0].width,Z.mipmaps[0].height,je,Z.mipmaps[0].data):z.texSubImage2D(3553,K,I.x,I.y,je,We,Z.image),K===0&&le.generateMipmaps&&z.generateMipmap(3553),be.unbindTexture()},this.copyTextureToTexture3D=function(I,Z,le,K,ue=0){if(p.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const De=I.max.x-I.min.x+1,je=I.max.y-I.min.y+1,We=I.max.z-I.min.z+1,Je=ie.convert(K.format),ot=ie.convert(K.type);let tt;if(K.isData3DTexture)Ae.setTexture3D(K,0),tt=32879;else if(K.isDataArrayTexture)Ae.setTexture2DArray(K,0),tt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}z.pixelStorei(37440,K.flipY),z.pixelStorei(37441,K.premultiplyAlpha),z.pixelStorei(3317,K.unpackAlignment);const et=z.getParameter(3314),Mt=z.getParameter(32878),mt=z.getParameter(3316),Bt=z.getParameter(3315),Mi=z.getParameter(32877),kt=le.isCompressedTexture?le.mipmaps[0]:le.image;z.pixelStorei(3314,kt.width),z.pixelStorei(32878,kt.height),z.pixelStorei(3316,I.min.x),z.pixelStorei(3315,I.min.y),z.pixelStorei(32877,I.min.z),le.isDataTexture||le.isData3DTexture?z.texSubImage3D(tt,ue,Z.x,Z.y,Z.z,De,je,We,Je,ot,kt.data):le.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),z.compressedTexSubImage3D(tt,ue,Z.x,Z.y,Z.z,De,je,We,Je,kt.data)):z.texSubImage3D(tt,ue,Z.x,Z.y,Z.z,De,je,We,Je,ot,kt),z.pixelStorei(3314,et),z.pixelStorei(32878,Mt),z.pixelStorei(3316,mt),z.pixelStorei(3315,Bt),z.pixelStorei(32877,Mi),ue===0&&K.generateMipmaps&&z.generateMipmap(tt),be.unbindTexture()},this.initTexture=function(I){I.isCubeTexture?Ae.setTextureCube(I,0):I.isData3DTexture?Ae.setTexture3D(I,0):I.isDataArrayTexture||I.isCompressedArrayTexture?Ae.setTexture2DArray(I,0):Ae.setTexture2D(I,0),be.unbindTexture()},this.resetState=function(){_=0,x=0,w=null,be.reset(),Ee.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}},Ule=class extends _${};Ule.prototype.isWebGL1Renderer=!0;let y$=class extends $i{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},zle=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=d3,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=vo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let n=0,s=this.stride;n<s;n++)this.array[e+n]=t.array[r+n];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}};const Xr=new fe;let Fle=class x8{constructor(e,t,r,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Xr.fromBufferAttribute(this,t),Xr.applyMatrix4(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Xr.fromBufferAttribute(this,t),Xr.applyNormalMatrix(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Xr.fromBufferAttribute(this,t),Xr.transformDirection(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}setX(e,t){return this.normalized&&(t=si(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=si(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=si(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=si(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=qa(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=qa(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=qa(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=qa(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=si(t,this.array),r=si(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=si(t,this.array),r=si(r,this.array),n=si(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this}setXYZW(e,t,r,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=si(t,this.array),r=si(r,this.array),n=si(n,this.array),s=si(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const n=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[n+s])}return new mr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new x8(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const n=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[n+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};const B5=new fe,V5=new _i,j5=new _i,Ble=new fe,H5=new Rt,Gd=new fe;let w8=class extends Gi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Rt,this.bindMatrixInverse=new Rt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new bl),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)Gd.fromBufferAttribute(t,r),this.applyBoneTransform(r,Gd),this.boundingBox.expandByPoint(Gd)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new xl),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)Gd.fromBufferAttribute(t,r),this.applyBoneTransform(r,Gd),this.boundingSphere.expandByPoint(Gd)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new _i,t=this.geometry.attributes.skinWeight;for(let r=0,n=t.count;r<n;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,n=this.geometry;V5.fromBufferAttribute(n.attributes.skinIndex,e),j5.fromBufferAttribute(n.attributes.skinWeight,e),B5.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=j5.getComponent(s);if(o!==0){const a=V5.getComponent(s);H5.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(Ble.copy(B5).applyMatrix4(H5),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}},v$=class extends $i{constructor(){super(),this.isBone=!0,this.type="Bone"}},M8=class extends Zn{constructor(e=null,t=1,r=1,n,s,o,a,l,c=ur,u=ur,h,d){super(null,o,a,l,c,u,n,s,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};const G5=new Rt,Vle=new Rt;let S8=class T8{constructor(e=[],t=[]){this.uuid=vo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new Rt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Rt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,n=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Vle;G5.multiplyMatrices(a,t[s]),G5.toArray(r,s*16)}n!==null&&(n.needsUpdate=!0)}clone(){return new T8(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=XB(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new M8(t,e,e,Ms,mc);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,n=e.bones.length;r<n;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new v$),this.bones.push(o),this.boneInverses.push(new Rt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let n=0,s=t.length;n<s;n++){const o=t[n];e.bones.push(o.uuid);const a=r[n];e.boneInverses.push(a.toArray())}return e}},W5=class extends mr{constructor(e,t,r,n=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}};const Wd=new Rt,q5=new Rt,d1=[],X5=new bl,jle=new Rt,Lg=new Gi,Rg=new xl;let Hle=class extends Gi{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new W5(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let n=0;n<r;n++)this.setMatrixAt(n,jle)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new bl),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Wd),X5.copy(e.boundingBox).applyMatrix4(Wd),this.boundingBox.union(X5)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new xl),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Wd),Rg.copy(e.boundingSphere).applyMatrix4(Wd),this.boundingSphere.union(Rg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,n=this.count;if(Lg.geometry=this.geometry,Lg.material=this.material,Lg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Rg.copy(this.boundingSphere),Rg.applyMatrix4(r),e.ray.intersectsSphere(Rg)!==!1))for(let s=0;s<n;s++){this.getMatrixAt(s,Wd),q5.multiplyMatrices(r,Wd),Lg.matrixWorld=q5,Lg.raycast(e,d1);for(let o=0,a=d1.length;o<a;o++){const l=d1[o];l.instanceId=s,l.object=this,t.push(l)}d1.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new W5(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},am=class extends $s{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Et(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}};const Y5=new fe,K5=new fe,Z5=new Rt,J2=new f$,p1=new xl;let $y=class extends $i{constructor(e=new sn,t=new am){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let n=1,s=t.count;n<s;n++)Y5.fromBufferAttribute(t,n-1),K5.fromBufferAttribute(t,n),r[n]=r[n-1],r[n]+=Y5.distanceTo(K5);e.setAttribute("lineDistance",new hi(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,n=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),p1.copy(r.boundingSphere),p1.applyMatrix4(n),p1.radius+=s,e.ray.intersectsSphere(p1)===!1)return;Z5.copy(n).invert(),J2.copy(e.ray).applyMatrix4(Z5);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new fe,u=new fe,h=new fe,d=new fe,f=this.isLineSegments?2:1,g=r.index,v=r.attributes.position;if(g!==null){const m=Math.max(0,o.start),p=Math.min(g.count,o.start+o.count);for(let y=m,_=p-1;y<_;y+=f){const x=g.getX(y),w=g.getX(y+1);if(c.fromBufferAttribute(v,x),u.fromBufferAttribute(v,w),J2.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(d);S<e.near||S>e.far||t.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{const m=Math.max(0,o.start),p=Math.min(v.count,o.start+o.count);for(let y=m,_=p-1;y<_;y+=f){if(c.fromBufferAttribute(v,y),u.fromBufferAttribute(v,y+1),J2.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const x=e.ray.origin.distanceTo(d);x<e.near||x>e.far||t.push({distance:x,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,s=r.length;n<s;n++){const o=r[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=n}}}}};const J5=new fe,Q5=new fe;let b$=class extends $y{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let n=0,s=t.count;n<s;n+=2)J5.fromBufferAttribute(t,n),Q5.fromBufferAttribute(t,n+1),r[n]=n===0?0:r[n-1],r[n+1]=r[n]+J5.distanceTo(Q5);e.setAttribute("lineDistance",new hi(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},Gle=class extends $y{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},E8=class extends $s{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Et(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}};const eI=new Rt,_3=new f$,f1=new xl,m1=new fe;let Wle=class extends $i{constructor(e=new sn,t=new E8){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,n=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),f1.copy(r.boundingSphere),f1.applyMatrix4(n),f1.radius+=s,e.ray.intersectsSphere(f1)===!1)return;eI.copy(n).invert(),_3.copy(e.ray).applyMatrix4(eI);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,u=r.attributes.position;if(c!==null){const h=Math.max(0,o.start),d=Math.min(c.count,o.start+o.count);for(let f=h,g=d;f<g;f++){const v=c.getX(f);m1.fromBufferAttribute(u,v),tI(m1,v,l,n,e,t,this)}}else{const h=Math.max(0,o.start),d=Math.min(u.count,o.start+o.count);for(let f=h,g=d;f<g;f++)m1.fromBufferAttribute(u,f),tI(m1,f,l,n,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,s=r.length;n<s;n++){const o=r[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=n}}}}};function tI(i,e,t,r,n,s,o){const a=_3.distanceSqToPoint(i);if(a<t){const l=new fe;_3.closestPointToPoint(i,l),l.applyMatrix4(r);const c=n.ray.origin.distanceTo(l);if(c<n.near||c>n.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}let A8=class k8 extends sn{constructor(e=1,t=1,r=1,n=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;n=Math.floor(n),s=Math.floor(s);const u=[],h=[],d=[],f=[];let g=0;const v=[],m=r/2;let p=0;y(),o===!1&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(u),this.setAttribute("position",new hi(h,3)),this.setAttribute("normal",new hi(d,3)),this.setAttribute("uv",new hi(f,2));function y(){const x=new fe,w=new fe;let S=0;const A=(t-e)/r;for(let k=0;k<=s;k++){const M=[],b=k/s,P=b*(t-e)+e;for(let N=0;N<=n;N++){const D=N/n,U=D*l+a,G=Math.sin(U),B=Math.cos(U);w.x=P*G,w.y=-b*r+m,w.z=P*B,h.push(w.x,w.y,w.z),x.set(G,A,B).normalize(),d.push(x.x,x.y,x.z),f.push(D,1-b),M.push(g++)}v.push(M)}for(let k=0;k<n;k++)for(let M=0;M<s;M++){const b=v[M][k],P=v[M+1][k],N=v[M+1][k+1],D=v[M][k+1];u.push(b,P,D),u.push(P,N,D),S+=6}c.addGroup(p,S,0),p+=S}function _(x){const w=g,S=new Nt,A=new fe;let k=0;const M=x===!0?e:t,b=x===!0?1:-1;for(let N=1;N<=n;N++)h.push(0,m*b,0),d.push(0,b,0),f.push(.5,.5),g++;const P=g;for(let N=0;N<=n;N++){const D=N/n*l+a,U=Math.cos(D),G=Math.sin(D);A.x=M*G,A.y=m*b,A.z=M*U,h.push(A.x,A.y,A.z),d.push(0,b,0),S.x=U*.5+.5,S.y=G*.5*b+.5,f.push(S.x,S.y),g++}for(let N=0;N<n;N++){const D=w+N,U=P+N;x===!0?u.push(U,U+1,D):u.push(U+1,U,D),k+=3}c.addGroup(p,k,x===!0?1:2),p+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new k8(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}};const g1=new fe,_1=new fe,Q2=new fe,y1=new M0;let qle=class extends sn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),n=Math.cos(Ef*t),s=e.getIndex(),o=e.getAttribute("position"),a=s?s.count:o.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let f=0;f<a;f+=3){s?(l[0]=s.getX(f),l[1]=s.getX(f+1),l[2]=s.getX(f+2)):(l[0]=f,l[1]=f+1,l[2]=f+2);const{a:g,b:v,c:m}=y1;if(g.fromBufferAttribute(o,l[0]),v.fromBufferAttribute(o,l[1]),m.fromBufferAttribute(o,l[2]),y1.getNormal(Q2),u[0]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,u[1]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,u[2]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let p=0;p<3;p++){const y=(p+1)%3,_=u[p],x=u[y],w=y1[c[p]],S=y1[c[y]],A=`${_}_${x}`,k=`${x}_${_}`;k in h&&h[k]?(Q2.dot(h[k].normal)<=n&&(d.push(w.x,w.y,w.z),d.push(S.x,S.y,S.z)),h[k]=null):A in h||(h[A]={index0:l[p],index1:l[y],normal:Q2.clone()})}}for(const f in h)if(h[f]){const{index0:g,index1:v}=h[f];g1.fromBufferAttribute(o,g),_1.fromBufferAttribute(o,v),d.push(g1.x,g1.y,g1.z),d.push(_1.x,_1.y,_1.z)}this.setAttribute("position",new hi(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}},Xle=class C8 extends sn{constructor(e=1,t=32,r=16,n=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new fe,d=new fe,f=[],g=[],v=[],m=[];for(let p=0;p<=r;p++){const y=[],_=p/r;let x=0;p===0&&o===0?x=.5/t:p===r&&l===Math.PI&&(x=-.5/t);for(let w=0;w<=t;w++){const S=w/t;h.x=-e*Math.cos(n+S*s)*Math.sin(o+_*a),h.y=e*Math.cos(o+_*a),h.z=e*Math.sin(n+S*s)*Math.sin(o+_*a),g.push(h.x,h.y,h.z),d.copy(h).normalize(),v.push(d.x,d.y,d.z),m.push(S+x,1-_),y.push(c++)}u.push(y)}for(let p=0;p<r;p++)for(let y=0;y<t;y++){const _=u[p][y+1],x=u[p][y],w=u[p+1][y],S=u[p+1][y+1];(p!==0||o>0)&&f.push(_,x,S),(p!==r-1||l<Math.PI)&&f.push(x,w,S)}this.setIndex(f),this.setAttribute("position",new hi(g,3)),this.setAttribute("normal",new hi(v,3)),this.setAttribute("uv",new hi(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new C8(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},Ly=class extends $s{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Et(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$M,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Zh=class extends Ly{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Nt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ar(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Et(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Et(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Et(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},h_=class extends $s{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Et(16777215),this.specular=new Et(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$M,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Yle=class extends $s{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=$M,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=kM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};function Vl(i,e,t){return $8(i)?new i.constructor(i.subarray(e,t!==void 0?t:i.length)):i.slice(e,t)}function v1(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function $8(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Kle(i){function e(n,s){return i[n]-i[s]}const t=i.length,r=new Array(t);for(let n=0;n!==t;++n)r[n]=n;return r.sort(e),r}function iI(i,e,t){const r=i.length,n=new i.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)n[o++]=i[a+l]}return n}function L8(i,e,t,r){let n=1,s=i[0];for(;s!==void 0&&s[r]===void 0;)s=i[n++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=i[n++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[n++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=i[n++];while(s!==void 0)}let Ry=class{constructor(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,n=t[r],s=t[r-1];e:{t:{let o;i:{r:if(!(e<n)){for(let a=r+2;;){if(n===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=n,n=t[++r],e<n)break t}o=t.length;break i}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(n=s,s=t[--r-1],e>=s)break t}o=r,r=0;break i}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(n=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,n)}return this.interpolate_(r,s,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,s=e*n;for(let o=0;o!==n;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},Zle=class extends Ry{constructor(e,t,r,n){super(e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:e5,endingEnd:e5}}intervalChanged_(e,t,r){const n=this.parameterPositions;let s=e-2,o=e+1,a=n[s],l=n[o];if(a===void 0)switch(this.getSettings_().endingStart){case t5:s=e,a=2*t-r;break;case i5:s=n.length-2,a=t+n[s]-n[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case t5:o=e,l=2*r-t;break;case i5:o=1,l=r+n[1]-n[0];break;default:o=e-1,l=t}const c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,n){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,g=(r-t)/(n-t),v=g*g,m=v*g,p=-d*m+2*d*v-d*g,y=(1+d)*m+(-1.5-2*d)*v+(-.5+d)*g+1,_=(-1-f)*m+(1.5+f)*v+.5*g,x=f*m-f*v;for(let w=0;w!==a;++w)s[w]=p*o[u+w]+y*o[c+w]+_*o[l+w]+x*o[h+w];return s}},Jle=class extends Ry{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e,t,r,n){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(n-t),h=1-u;for(let d=0;d!==a;++d)s[d]=o[c+d]*h+o[l+d]*u;return s}},Qle=class extends Ry{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e){return this.copySampleValue_(e-1)}},ta=class{constructor(e,t,r,n){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=v1(t,this.TimeBufferType),this.values=v1(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:v1(e.times,Array),values:v1(e.values,Array)};const n=e.getInterpolation();n!==e.DefaultInterpolation&&(r.interpolation=n)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Qle(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Jle(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Zle(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case cy:t=this.InterpolantFactoryMethodDiscrete;break;case nm:t=this.InterpolantFactoryMethodLinear;break;case C2:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return cy;case this.InterpolantFactoryMethodLinear:return nm;case this.InterpolantFactoryMethodSmooth:return C2}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,n=t.length;r!==n;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,n=t.length;r!==n;++r)t[r]*=e}return this}trim(e,t){const r=this.times,n=r.length;let s=0,o=n-1;for(;s!==n&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==n){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Vl(r,s,o),this.values=Vl(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,n=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(n!==void 0&&$8(n))for(let a=0,l=n.length;a!==l;++a){const c=n[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Vl(this.times),t=Vl(this.values),r=this.getValueSize(),n=this.getInterpolation()===C2,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(n)l=!0;else{const h=a*r,d=h-r,f=h+r;for(let g=0;g!==r;++g){const v=t[h+g];if(v!==t[d+g]||v!==t[f+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*r,d=o*r;for(let f=0;f!==r;++f)t[d+f]=t[h+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=Vl(e,0,o),this.values=Vl(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=Vl(this.times,0),t=Vl(this.values,0),r=this.constructor,n=new r(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}};ta.prototype.TimeBufferType=Float32Array;ta.prototype.ValueBufferType=Float32Array;ta.prototype.DefaultInterpolation=nm;let Rm=class extends ta{};Rm.prototype.ValueTypeName="bool";Rm.prototype.ValueBufferType=Array;Rm.prototype.DefaultInterpolation=cy;Rm.prototype.InterpolantFactoryMethodLinear=void 0;Rm.prototype.InterpolantFactoryMethodSmooth=void 0;let R8=class extends ta{};R8.prototype.ValueTypeName="color";let hy=class extends ta{};hy.prototype.ValueTypeName="number";let ece=class extends Ry{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e,t,r,n){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(n-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Pr.slerpFlat(s,0,o,c-a,o,c,l);return s}},Nc=class extends ta{InterpolantFactoryMethodLinear(e){return new ece(this.times,this.values,this.getValueSize(),e)}};Nc.prototype.ValueTypeName="quaternion";Nc.prototype.DefaultInterpolation=nm;Nc.prototype.InterpolantFactoryMethodSmooth=void 0;let Pm=class extends ta{};Pm.prototype.ValueTypeName="string";Pm.prototype.ValueBufferType=Array;Pm.prototype.DefaultInterpolation=cy;Pm.prototype.InterpolantFactoryMethodLinear=void 0;Pm.prototype.InterpolantFactoryMethodSmooth=void 0;let zh=class extends ta{};zh.prototype.ValueTypeName="vector";class y3{constructor(e,t=-1,r,n=yre){this.name=e,this.tracks=r,this.duration=t,this.blendMode=n,this.uuid=vo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,n=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(ice(r[o]).scale(n));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(ta.toJSON(r[s]));return n}static CreateFromMorphTargetSequence(e,t,r,n){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=Kle(l);l=iI(l,1,u),c=iI(c,1,u),!n&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new hy(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const n=e;r=n.geometry&&n.geometry.animations||n.animations}for(let n=0;n<r.length;n++)if(r[n].name===t)return r[n];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const n={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let d=n[h];d||(n[h]=d=[]),d.push(c)}}const o=[];for(const a in n)o.push(this.CreateFromMorphTargetSequence(a,n[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(u,h,d,f,g){if(d.length!==0){const v=[],m=[];L8(d,v,m,f),v.length!==0&&g.push(new u(h,v,m))}},n=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let u=0;u<c.length;u++){const h=c[u].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const d={};let f;for(f=0;f<h.length;f++)if(h[f].morphTargets)for(let g=0;g<h[f].morphTargets.length;g++)d[h[f].morphTargets[g]]=-1;for(const g in d){const v=[],m=[];for(let p=0;p!==h[f].morphTargets.length;++p){const y=h[f];v.push(y.time),m.push(y.morphTarget===g?1:0)}n.push(new hy(".morphTargetInfluence["+g+"]",v,m))}l=d.length*o}else{const d=".bones["+t[u].name+"]";r(zh,d+".position",h,"pos",n),r(Nc,d+".quaternion",h,"rot",n),r(zh,d+".scale",h,"scl",n)}}return n.length===0?null:new this(s,l,n,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,n=e.length;r!==n;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function tce(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return hy;case"vector":case"vector2":case"vector3":case"vector4":return zh;case"color":return R8;case"quaternion":return Nc;case"bool":case"boolean":return Rm;case"string":return Pm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function ice(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=tce(i.type);if(i.times===void 0){const t=[],r=[];L8(i.keys,t,r,"value"),i.times=t,i.values=r}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const lm={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};let x$=class{constructor(e,t,r){const n=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,s===!1&&n.onStart!==void 0&&n.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,n.onProgress!==void 0&&n.onProgress(u,o,a),o===a&&(s=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(u){n.onError!==void 0&&n.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){const f=c[h],g=c[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return g}return null}}};const P8=new x$;let Hc=class{constructor(e){this.manager=e!==void 0?e:P8,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(n,s){r.load(e,n,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};const Aa={};let rce=class extends Error{constructor(e,t){super(e),this.response=t}},Py=class extends Hc{constructor(e){super(e)}load(e,t,r,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=lm.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Aa[e]!==void 0){Aa[e].push({onLoad:t,onProgress:r,onError:n});return}Aa[e]=[],Aa[e].push({onLoad:t,onProgress:r,onError:n});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Aa[e],h=c.body.getReader(),d=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),f=d?parseInt(d):0,g=f!==0;let v=0;const m=new ReadableStream({start(p){y();function y(){h.read().then(({done:_,value:x})=>{if(_)p.close();else{v+=x.byteLength;const w=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:f});for(let S=0,A=u.length;S<A;S++){const k=u[S];k.onProgress&&k.onProgress(w)}p.enqueue(x),y()}})}}});return new Response(m)}else throw new rce(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,d=new TextDecoder(h);return c.arrayBuffer().then(f=>d.decode(f))}}}).then(c=>{lm.add(e,c);const u=Aa[e];delete Aa[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=Aa[e];if(u===void 0)throw this.manager.itemError(e),c;delete Aa[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},nce=class extends Hc{constructor(e){super(e)}load(e,t,r,n){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=lm.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=uy("img");function l(){u(),lm.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){u(),n&&n(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}},sce=class extends Hc{constructor(e){super(e)}load(e,t,r,n){const s=this,o=new M8,a=new Py(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Hr,o.wrapT=c.wrapT!==void 0?c.wrapT:Hr,o.magFilter=c.magFilter!==void 0?c.magFilter:Er,o.minFilter=c.minFilter!==void 0?c.minFilter:Er,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=hl),c.mipmapCount===1&&(o.minFilter=Er),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},r,n),o}},w$=class extends Hc{constructor(e){super(e)}load(e,t,r,n){const s=new Zn,o=new nce(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,n),s}},Ny=class extends $i{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Et(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},N8=class extends Ny{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy($i.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Et(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}};const eT=new Rt,rI=new fe,nI=new fe;let M$=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Nt(512,512),this.map=null,this.mapPass=null,this.matrix=new Rt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new m$,this._frameExtents=new Nt(1,1),this._viewportCount=1,this._viewports=[new _i(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;rI.setFromMatrixPosition(e.matrixWorld),t.position.copy(rI),nI.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(nI),t.updateMatrixWorld(),eT.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(eT),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(eT)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},oce=class extends M${constructor(){super(new dr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=sm*2*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||n!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=n,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},I8=class extends Ny{constructor(e,t,r=0,n=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy($i.DEFAULT_UP),this.updateMatrix(),this.target=new $i,this.distance=r,this.angle=n,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new oce}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}};const sI=new Rt,Pg=new fe,tT=new fe;let ace=class extends M${constructor(){super(new dr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Nt(4,2),this._viewportCount=6,this._viewports=[new _i(2,1,1,1),new _i(0,1,1,1),new _i(3,1,1,1),new _i(1,1,1,1),new _i(3,0,1,1),new _i(1,0,1,1)],this._cubeDirections=[new fe(1,0,0),new fe(-1,0,0),new fe(0,0,1),new fe(0,0,-1),new fe(0,1,0),new fe(0,-1,0)],this._cubeUps=[new fe(0,1,0),new fe(0,1,0),new fe(0,1,0),new fe(0,1,0),new fe(0,0,1),new fe(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,n=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Pg.setFromMatrixPosition(e.matrixWorld),r.position.copy(Pg),tT.copy(r.position),tT.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(tT),r.updateMatrixWorld(),n.makeTranslation(-Pg.x,-Pg.y,-Pg.z),sI.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sI)}},IM=class extends Ny{constructor(e,t,r=0,n=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=n,this.shadow=new ace}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},lce=class extends M${constructor(){super(new PM(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},D8=class extends Ny{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy($i.DEFAULT_UP),this.updateMatrix(),this.target=new $i,this.shadow=new lce}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},cce=class extends Ny{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}},dy=class{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,n=e.length;r<n;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}},uce=class extends Hc{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=lm.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){lm.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){n&&n(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}};const S$="\\[\\]\\.:\\/",hce=new RegExp("["+S$+"]","g"),T$="[^"+S$+"]",dce="[^"+S$.replace("\\.","")+"]",pce=/((?:WC+[\/:])*)/.source.replace("WC",T$),fce=/(WCOD+)?/.source.replace("WCOD",dce),mce=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",T$),gce=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",T$),_ce=new RegExp("^"+pce+fce+mce+gce+"$"),yce=["material","materials","bones","map"];let vce=class{constructor(e,t,r){const n=r||Si.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,n=this._bindings[r];n!==void 0&&n.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=r.length;n!==s;++n)r[n].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},Si=class Lp{constructor(e,t,r){this.path=t,this.parsedPath=r||Lp.parseTrackName(t),this.node=Lp.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Lp.Composite(e,t,r):new Lp(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(hce,"")}static parseTrackName(e){const t=_ce.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(n!==void 0&&n!==-1){const s=r.nodeName.substring(n+1);yce.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},n=r(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let n=0,s=r.length;n!==s;++n)e[t++]=r[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let n=0,s=r.length;n!==s;++n)r[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let n=0,s=r.length;n!==s;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let n=0,s=r.length;n!==s;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,n=t.propertyName;let s=t.propertyIndex;if(e||(e=Lp.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[n];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+n+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(n==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};Si.Composite=vce;Si.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Si.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Si.prototype.GetterByBindingType=[Si.prototype._getValue_direct,Si.prototype._getValue_array,Si.prototype._getValue_arrayElement,Si.prototype._getValue_toArray];Si.prototype.SetterByBindingTypeAndVersioning=[[Si.prototype._setValue_direct,Si.prototype._setValue_direct_setNeedsUpdate,Si.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Si.prototype._setValue_array,Si.prototype._setValue_array_setNeedsUpdate,Si.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Si.prototype._setValue_arrayElement,Si.prototype._setValue_arrayElement_setNeedsUpdate,Si.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Si.prototype._setValue_fromArray,Si.prototype._setValue_fromArray_setNeedsUpdate,Si.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];let oI=class{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ar(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};const aI=new fe;let b1,iT,rT=class extends $i{constructor(e=new fe(0,0,1),t=new fe(0,0,0),r=1,n=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",b1===void 0&&(b1=new sn,b1.setAttribute("position",new hi([0,0,0,0,1,0],3)),iT=new A8(0,.5,1,5,1),iT.translate(0,-.5,0)),this.position.copy(t),this.line=new $y(b1,new am({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Gi(iT,new mo({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{aI.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(aI,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:d$}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=d$);function lI(i,e){if(e===vre)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===h3||e===WB){let t=i.getIndex();if(t===null){const o=[],a=i.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const r=t.count-2,n=[];if(e===h3)for(let o=1;o<=r;o++)n.push(t.getX(0)),n.push(t.getX(o)),n.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(n.push(t.getX(o)),n.push(t.getX(o+1)),n.push(t.getX(o+2))):(n.push(t.getX(o+2)),n.push(t.getX(o+1)),n.push(t.getX(o)));n.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(n),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}let E$=class extends Hc{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Sce(t)}),this.register(function(t){return new Lce(t)}),this.register(function(t){return new Rce(t)}),this.register(function(t){return new Pce(t)}),this.register(function(t){return new Ece(t)}),this.register(function(t){return new Ace(t)}),this.register(function(t){return new kce(t)}),this.register(function(t){return new Cce(t)}),this.register(function(t){return new Mce(t)}),this.register(function(t){return new $ce(t)}),this.register(function(t){return new Tce(t)}),this.register(function(t){return new xce(t)}),this.register(function(t){return new Nce(t)}),this.register(function(t){return new Ice(t)})}load(e,t,r,n){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=dy.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){n?n(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Py(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,n){let s;const o={},a={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===O8){try{o[Ht.KHR_BINARY_GLTF]=new Dce(e)}catch(u){n&&n(u);return}s=JSON.parse(o[Ht.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new Yce(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](c);a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const h=s.extensionsUsed[u],d=s.extensionsRequired||[];switch(h){case Ht.KHR_MATERIALS_UNLIT:o[h]=new wce;break;case Ht.KHR_DRACO_MESH_COMPRESSION:o[h]=new Oce(s,this.dracoLoader);break;case Ht.KHR_TEXTURE_TRANSFORM:o[h]=new Uce;break;case Ht.KHR_MESH_QUANTIZATION:o[h]=new zce;break;default:d.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(r,n)}parseAsync(e,t){const r=this;return new Promise(function(n,s){r.parse(e,t,n,s)})}};function bce(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const Ht={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};let xce=class{constructor(e){this.parser=e,this.name=Ht.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,n=t.length;r<n;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let n=t.cache.get(r);if(n)return n;const s=t.json,o=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let a;const l=new Et(16777215);o.color!==void 0&&l.fromArray(o.color);const c=o.range!==void 0?o.range:0;switch(o.type){case"directional":a=new D8(l),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new IM(l),a.distance=c;break;case"spot":a=new I8(l),a.distance=c,o.spot=o.spot||{},o.spot.innerConeAngle=o.spot.innerConeAngle!==void 0?o.spot.innerConeAngle:0,o.spot.outerConeAngle=o.spot.outerConeAngle!==void 0?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,sc(a,o),o.intensity!==void 0&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),n=Promise.resolve(a),t.cache.add(r,n),n}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,n=r.json.nodes[e],s=(n.extensions&&n.extensions[this.name]||{}).light;return s===void 0?null:this._loadLight(s).then(function(o){return r._getNodeRef(t.cache,s,o)})}},wce=class{constructor(){this.name=Ht.KHR_MATERIALS_UNLIT}getMaterialType(){return mo}extendParams(e,t,r){const n=[];e.color=new Et(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&n.push(r.assignTexture(e,"map",s.baseColorTexture,Wt))}return Promise.all(n)}},Mce=class{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const n=r.extensions[this.name].emissiveStrength;return n!==void 0&&(t.emissiveIntensity=n),Promise.resolve()}},Sce=class{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Zh}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Nt(a,a)}return Promise.all(s)}},Tce=class{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Zh}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}},Ece=class{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Zh}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Et(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=n.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Wt)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}},Ace=class{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Zh}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}},kce=class{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Zh}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Et(a[0],a[1],a[2]),Promise.all(s)}},Cce=class{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Zh}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const n=r.extensions[this.name];return t.ior=n.ior!==void 0?n.ior:1.5,Promise.resolve()}},$ce=class{constructor(e){this.parser=e,this.name=Ht.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Zh}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Et(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,Wt)),Promise.all(s)}},Lce=class{constructor(e){this.parser=e,this.name=Ht.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,n=r.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const s=n.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}},Rce=class{constructor(e){this.parser=e,this.name=Ht.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,n=r.json,s=n.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=n.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},Pce=class{constructor(e){this.parser=e,this.name=Ht.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,n=r.json,s=n.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=n.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}},Nce=class{constructor(e){this.name=Ht.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const n=r.extensions[this.name],s=this.parser.getDependency("buffer",n.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=n.byteOffset||0,c=n.byteLength||0,u=n.count,h=n.byteStride,d=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,h,d,n.mode,n.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(u*h);return o.decodeGltfBuffer(new Uint8Array(f),u,h,d,n.mode,n.filter),f})})}else return null}},Ice=class{constructor(e){this.name=Ht.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const n=t.meshes[r.mesh];for(const l of n.primitives)if(l.mode!==fs.TRIANGLES&&l.mode!==fs.TRIANGLE_STRIP&&l.mode!==fs.TRIANGLE_FAN&&l.mode!==void 0)return null;const s=r.extensions[this.name].attributes,o=[],a={};for(const l in s)o.push(this.parser.getDependency("accessor",s[l]).then(c=>(a[l]=c,a[l])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(l=>{const c=l.pop(),u=c.isGroup?c.children:[c],h=l[0].count,d=[];for(const f of u){const g=new Rt,v=new fe,m=new Pr,p=new fe(1,1,1),y=new Hle(f.geometry,f.material,h);for(let _=0;_<h;_++)a.TRANSLATION&&v.fromBufferAttribute(a.TRANSLATION,_),a.ROTATION&&m.fromBufferAttribute(a.ROTATION,_),a.SCALE&&p.fromBufferAttribute(a.SCALE,_),y.setMatrixAt(_,g.compose(v,m,p));for(const _ in a)_!=="TRANSLATION"&&_!=="ROTATION"&&_!=="SCALE"&&f.geometry.setAttribute(_,a[_]);$i.prototype.copy.call(y,f),this.parser.assignFinalMaterial(y),d.push(y)}return c.isGroup?(c.clear(),c.add(...d),c):d[0]}))}};const O8="glTF",Ng=12,cI={JSON:1313821514,BIN:5130562};let Dce=class{constructor(e){this.name=Ht.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Ng),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==O8)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-Ng,s=new DataView(e,Ng);let o=0;for(;o<n;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,l===cI.JSON){const c=new Uint8Array(e,Ng+o,a);this.content=r.decode(c)}else if(l===cI.BIN){const c=Ng+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},Oce=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ht.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,n=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const h=v3[u]||u.toLowerCase();a[h]=o[u]}for(const u in e.attributes){const h=v3[u]||u.toLowerCase();if(o[u]!==void 0){const d=r.accessors[e.attributes[u]],f=kf[d.componentType];c[h]=f.name,l[h]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(h){n.decodeDracoFile(u,function(d){for(const f in d.attributes){const g=d.attributes[f],v=l[f];v!==void 0&&(g.normalized=v)}h(d)},a,c)})})}},Uce=class{constructor(){this.name=Ht.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},zce=class{constructor(){this.name=Ht.KHR_MESH_QUANTIZATION}},U8=class extends Ry{constructor(e,t,r,n){super(e,t,r,n)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,s=e*n*3+n;for(let o=0;o!==n;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,n){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=n-t,h=(r-t)/u,d=h*h,f=d*h,g=e*c,v=g-c,m=-2*f+3*d,p=f-d,y=1-m,_=p-d+h;for(let x=0;x!==a;x++){const w=o[v+x+a],S=o[v+x+l]*u,A=o[g+x+a],k=o[g+x]*u;s[x]=y*w+_*S+m*A+p*k}return s}};const Fce=new Pr;let Bce=class extends U8{interpolate_(e,t,r,n){const s=super.interpolate_(e,t,r,n);return Fce.fromArray(s).normalize().toArray(s),s}};const fs={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},kf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},uI={9728:ur,9729:Er,9984:u3,9985:HB,9986:Xb,9987:hl},hI={33071:Hr,33648:kw,10497:Bo},nT={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},v3={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},jl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Vce={CUBICSPLINE:void 0,LINEAR:nm,STEP:cy},sT={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function jce(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Ly({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:qo})),i.DefaultMaterial}function Ig(i,e,t){for(const r in t.extensions)i[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function sc(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Hce(i,e,t){let r=!1,n=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const h=e[c];if(h.POSITION!==void 0&&(r=!0),h.NORMAL!==void 0&&(n=!0),h.COLOR_0!==void 0&&(s=!0),r&&n&&s)break}if(!r&&!n&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const h=e[c];if(r){const d=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):i.attributes.position;o.push(d)}if(n){const d=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):i.attributes.normal;a.push(d)}if(s){const d=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):i.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],h=c[1],d=c[2];return r&&(i.morphAttributes.position=u),n&&(i.morphAttributes.normal=h),s&&(i.morphAttributes.color=d),i.morphTargetsRelative=!0,i})}function Gce(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let r=0,n=t.length;r<n;r++)i.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Wce(i){const e=i.extensions&&i.extensions[Ht.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+dI(e.attributes):t=i.indices+":"+dI(i.attributes)+":"+i.mode,t}function dI(i){let e="";const t=Object.keys(i).sort();for(let r=0,n=t.length;r<n;r++)e+=t[r]+":"+i[t[r]]+";";return e}function b3(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function qce(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Xce=new Rt;let Yce=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new bce,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,n=!1,s=-1;typeof navigator<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,n=navigator.userAgent.indexOf("Firefox")>-1,s=n?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||n&&s<98?this.textureLoader=new w$(this.options.manager):this.textureLoader=new uce(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Py(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,n=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][n.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:n.asset,parser:r,userData:{}};Ig(s,a,n),sc(a,n),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let n=0,s=t.length;n<s;n++){const o=t[n].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let n=0,s=e.length;n<s;n++){const o=e[n];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const n=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(r,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const n=e(t[r]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let n=0;n<t.length;n++){const s=e(t[n]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let n=this.cache.get(r);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":n=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":n=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":n=this.loadSkin(t);break;case"animation":n=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":n=this.loadCamera(t);break;default:if(n=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!n)throw new Error("Unknown type: "+e);break}this.cache.add(r,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,n=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(n.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ht.KHR_BINARY_GLTF].body);const n=this.options;return new Promise(function(s,o){r.load(dy.resolveURL(t.uri,n.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const n=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+n)})}loadAccessor(e){const t=this,r=this.json,n=this.json.accessors[e];if(n.bufferView===void 0&&n.sparse===void 0){const o=nT[n.type],a=kf[n.componentType],l=n.normalized===!0,c=new a(n.count*o);return Promise.resolve(new mr(c,o,l))}const s=[];return n.bufferView!==void 0?s.push(this.getDependency("bufferView",n.bufferView)):s.push(null),n.sparse!==void 0&&(s.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=nT[n.type],c=kf[n.componentType],u=c.BYTES_PER_ELEMENT,h=u*l,d=n.byteOffset||0,f=n.bufferView!==void 0?r.bufferViews[n.bufferView].byteStride:void 0,g=n.normalized===!0;let v,m;if(f&&f!==h){const p=Math.floor(d/f),y="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+p+":"+n.count;let _=t.cache.get(y);_||(v=new c(a,p*f,n.count*f/u),_=new zle(v,f/u),t.cache.add(y,_)),m=new Fle(_,l,d%f/u,g)}else a===null?v=new c(n.count*l):v=new c(a,d,n.count*l),m=new mr(v,l,g);if(n.sparse!==void 0){const p=nT.SCALAR,y=kf[n.sparse.indices.componentType],_=n.sparse.indices.byteOffset||0,x=n.sparse.values.byteOffset||0,w=new y(o[1],_,n.sparse.count*p),S=new c(o[2],x,n.sparse.count*l);a!==null&&(m=new mr(m.array.slice(),m.itemSize,m.normalized));for(let A=0,k=w.length;A<k;A++){const M=w[A];if(m.setX(M,S[A*l]),l>=2&&m.setY(M,S[A*l+1]),l>=3&&m.setZ(M,S[A*l+2]),l>=4&&m.setW(M,S[A*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const t=this.json,r=this.options,n=t.textures[e].source,s=t.images[n];let o=this.textureLoader;if(s.uri){const a=r.manager.getHandler(s.uri);a!==null&&(o=a)}return this.loadTextureImage(e,n,o)}loadTextureImage(e,t,r){const n=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=uI[h.magFilter]||Er,u.minFilter=uI[h.minFilter]||hl,u.wrapS=hI[h.wrapS]||Bo,u.wrapT=hI[h.wrapT]||Bo,n.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,n=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=n.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const d=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(d),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(h){return new Promise(function(d,f){let g=d;t.isImageBitmapLoader===!0&&(g=function(v){const m=new Zn(v);m.needsUpdate=!0,d(m)}),t.load(dy.resolveURL(h,s.path),g,void 0,f)})}).then(function(h){return c===!0&&a.revokeObjectURL(l),h.userData.mimeType=o.mimeType||qce(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=u,u}assignTexture(e,t,r,n){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[Ht.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[Ht.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Ht.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return n!==void 0&&(o.encoding=n),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const n=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new E8,$s.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new am,$s.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(n||s||o){let a="ClonedMaterial:"+r.uuid+":";n&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),n&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return Ly}loadMaterial(e){const t=this,r=this.json,n=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Ht.KHR_MATERIALS_UNLIT]){const h=n[Ht.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,s,t))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new Et(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const d=h.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}h.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",h.baseColorTexture,Wt)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=ws);const u=s.alphaMode||sT.OPAQUE;if(u===sT.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===sT.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==mo&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Nt(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}return s.occlusionTexture!==void 0&&o!==mo&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==mo&&(a.emissive=new Et().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==mo&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Wt)),Promise.all(c).then(function(){const h=new o(a);return s.name&&(h.name=s.name),sc(h,s),t.associations.set(h,{materials:e}),s.extensions&&Ig(n,h,s),h})}createUniqueName(e){const t=Si.sanitizeNodeName(e||"");let r=t;for(let n=1;this.nodeNamesUsed[r];++n)r=t+"_"+n;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,n=this.primitiveCache;function s(a){return r[Ht.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return pI(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=Wce(c),h=n[u];if(h)o.push(h.promise);else{let d;c.extensions&&c.extensions[Ht.KHR_DRACO_MESH_COMPRESSION]?d=s(c):d=pI(new sn,c,t),n[u]={primitive:c,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,n=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?jce(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let f=0,g=u.length;f<g;f++){const v=u[f],m=o[f];let p;const y=c[f];if(m.mode===fs.TRIANGLES||m.mode===fs.TRIANGLE_STRIP||m.mode===fs.TRIANGLE_FAN||m.mode===void 0)p=s.isSkinnedMesh===!0?new w8(v,y):new Gi(v,y),p.isSkinnedMesh===!0&&p.normalizeSkinWeights(),m.mode===fs.TRIANGLE_STRIP?p.geometry=lI(p.geometry,WB):m.mode===fs.TRIANGLE_FAN&&(p.geometry=lI(p.geometry,h3));else if(m.mode===fs.LINES)p=new b$(v,y);else if(m.mode===fs.LINE_STRIP)p=new $y(v,y);else if(m.mode===fs.LINE_LOOP)p=new Gle(v,y);else if(m.mode===fs.POINTS)p=new Wle(v,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(p.geometry.morphAttributes).length>0&&Gce(p,s),p.name=t.createUniqueName(s.name||"mesh_"+e),sc(p,s),m.extensions&&Ig(n,p,m),t.assignFinalMaterial(p),h.push(p)}for(let f=0,g=h.length;f<g;f++)t.associations.set(h[f],{meshes:e,primitives:f});if(h.length===1)return h[0];const d=new Di;t.associations.set(d,{meshes:e});for(let f=0,g=h.length;f<g;f++)d.add(h[f]);return d})}loadCamera(e){let t;const r=this.json.cameras[e],n=r[r.type];if(!n){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new dr($p.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):r.type==="orthographic"&&(t=new PM(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),sc(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let n=0,s=t.joints.length;n<s;n++)r.push(this._loadNodeShallow(t.joints[n]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(n){const s=n.pop(),o=n,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const h=o[c];if(h){a.push(h);const d=new Rt;s!==null&&d.fromArray(s.array,c*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new S8(a,l)})}loadAnimation(e){const t=this.json.animations[e],r=t.name?t.name:"animation_"+e,n=[],s=[],o=[],a=[],l=[];for(let c=0,u=t.channels.length;c<u;c++){const h=t.channels[c],d=t.samplers[h.sampler],f=h.target,g=f.node,v=t.parameters!==void 0?t.parameters[d.input]:d.input,m=t.parameters!==void 0?t.parameters[d.output]:d.output;f.node!==void 0&&(n.push(this.getDependency("node",g)),s.push(this.getDependency("accessor",v)),o.push(this.getDependency("accessor",m)),a.push(d),l.push(f))}return Promise.all([Promise.all(n),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],h=c[1],d=c[2],f=c[3],g=c[4],v=[];for(let m=0,p=u.length;m<p;m++){const y=u[m],_=h[m],x=d[m],w=f[m],S=g[m];if(y===void 0)continue;y.updateMatrix();let A;switch(jl[S.path]){case jl.weights:A=hy;break;case jl.rotation:A=Nc;break;case jl.position:case jl.scale:default:A=zh;break}const k=y.name?y.name:y.uuid,M=w.interpolation!==void 0?Vce[w.interpolation]:nm,b=[];jl[S.path]===jl.weights?y.traverse(function(N){N.morphTargetInfluences&&b.push(N.name?N.name:N.uuid)}):b.push(k);let P=x.array;if(x.normalized){const N=b3(P.constructor),D=new Float32Array(P.length);for(let U=0,G=P.length;U<G;U++)D[U]=P[U]*N;P=D}for(let N=0,D=b.length;N<D;N++){const U=new A(b[N]+"."+jl[S.path],_.array,P,M);w.interpolation==="CUBICSPLINE"&&(U.createInterpolant=function(G){const B=this instanceof Nc?Bce:U8;return new B(this.times,this.values,this.getValueSize()/3,G)},U.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),v.push(U)}}return new y3(r,void 0,v)})}createNodeMesh(e){const t=this.json,r=this,n=t.nodes[e];return n.mesh===void 0?null:r.getDependency("mesh",n.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,n.mesh,s);return n.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=n.weights.length;l<c;l++)a.morphTargetInfluences[l]=n.weights[l]}),o})}loadNode(e){const t=this.json,r=this,n=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=n.children||[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));const l=n.skin===void 0?Promise.resolve(null):r.getDependency("skin",n.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],h=c[1],d=c[2];d!==null&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(d,Xce)});for(let f=0,g=h.length;f<g;f++)u.add(h[f]);return u})}_loadNodeShallow(e){const t=this.json,r=this.extensions,n=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?n.createUniqueName(s.name):"",a=[],l=n._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(n.getDependency("camera",s.camera).then(function(c){return n._getNodeRef(n.cameraCache,s.camera,c)})),n._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new v$:c.length>1?u=new Di:c.length===1?u=c[0]:u=new $i,u!==c[0])for(let h=0,d=c.length;h<d;h++)u.add(c[h]);if(s.name&&(u.userData.name=s.name,u.name=o),sc(u,s),s.extensions&&Ig(r,u,s),s.matrix!==void 0){const h=new Rt;h.fromArray(s.matrix),u.applyMatrix4(h)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return n.associations.has(u)||n.associations.set(u,{}),n.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],n=this,s=new Di;r.name&&(s.name=n.createUniqueName(r.name)),sc(s,r),r.extensions&&Ig(t,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(n.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,h=l.length;u<h;u++)s.add(l[u]);const c=u=>{const h=new Map;for(const[d,f]of n.associations)(d instanceof $s||d instanceof Zn)&&h.set(d,f);return u.traverse(d=>{const f=n.associations.get(d);f!=null&&h.set(d,f)}),h};return n.associations=c(s),s})}};function Kce(i,e,t){const r=e.attributes,n=new bl;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(n.set(new fe(l[0],l[1],l[2]),new fe(c[0],c[1],c[2])),a.normalized){const u=b3(kf[a.componentType]);n.min.multiplyScalar(u),n.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new fe,l=new fe;for(let c=0,u=s.length;c<u;c++){const h=s[c];if(h.POSITION!==void 0){const d=t.json.accessors[h.POSITION],f=d.min,g=d.max;if(f!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(g[2]))),d.normalized){const v=b3(kf[d.componentType]);l.multiplyScalar(v)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}n.expandByVector(a)}i.boundingBox=n;const o=new xl;n.getCenter(o.center),o.radius=n.min.distanceTo(n.max)/2,i.boundingSphere=o}function pI(i,e,t){const r=e.attributes,n=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in r){const a=v3[o]||o.toLowerCase();a in i.attributes||n.push(s(r[o],a))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});n.push(o)}return sc(i,e),Kce(i,e,t),Promise.all(n).then(function(){return e.targets!==void 0?Hce(i,e.targets,t):i})}const fI={type:"change"},oT={type:"start"},mI={type:"end"};let z8=class extends Kh{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new fe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Ad.ROTATE,MIDDLE:Ad.DOLLY,RIGHT:Ad.PAN},this.touches={ONE:kd.ROTATE,TWO:kd.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(F){F.addEventListener("keydown",ft),this._domElementKeyEvents=F},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ft),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(fI),r.update(),s=n.NONE},this.update=function(){const F=new fe,de=new Pr().setFromUnitVectors(e.up,new fe(0,1,0)),ie=de.clone().invert(),Ee=new fe,Ne=new Pr,Ie=2*Math.PI;return function(){const $e=r.object.position;F.copy($e).sub(r.target),F.applyQuaternion(de),a.setFromVector3(F),r.autoRotate&&s===n.NONE&&M(A()),r.enableDamping?(a.theta+=l.theta*r.dampingFactor,a.phi+=l.phi*r.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Le=r.minAzimuthAngle,Ge=r.maxAzimuthAngle;return isFinite(Le)&&isFinite(Ge)&&(Le<-Math.PI?Le+=Ie:Le>Math.PI&&(Le-=Ie),Ge<-Math.PI?Ge+=Ie:Ge>Math.PI&&(Ge-=Ie),Le<=Ge?a.theta=Math.max(Le,Math.min(Ge,a.theta)):a.theta=a.theta>(Le+Ge)/2?Math.max(Le,a.theta):Math.min(Ge,a.theta)),a.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(r.minDistance,Math.min(r.maxDistance,a.radius)),r.enableDamping===!0?r.target.addScaledVector(u,r.dampingFactor):r.target.add(u),F.setFromSpherical(a),F.applyQuaternion(ie),$e.copy(r.target).add(F),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,u.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,h||Ee.distanceToSquared(r.object.position)>o||8*(1-Ne.dot(r.object.quaternion))>o?(r.dispatchEvent(fI),Ee.copy(r.object.position),Ne.copy(r.object.quaternion),h=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",R),r.domElement.removeEventListener("pointerdown",Ae),r.domElement.removeEventListener("pointercancel",Ze),r.domElement.removeEventListener("wheel",st),r.domElement.removeEventListener("pointermove",Qe),r.domElement.removeEventListener("pointerup",Ze),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",ft),r._domElementKeyEvents=null)};const r=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=n.NONE;const o=1e-6,a=new oI,l=new oI;let c=1;const u=new fe;let h=!1;const d=new Nt,f=new Nt,g=new Nt,v=new Nt,m=new Nt,p=new Nt,y=new Nt,_=new Nt,x=new Nt,w=[],S={};function A(){return 2*Math.PI/60/60*r.autoRotateSpeed}function k(){return Math.pow(.95,r.zoomSpeed)}function M(F){l.theta-=F}function b(F){l.phi-=F}const P=function(){const F=new fe;return function(de,ie){F.setFromMatrixColumn(ie,0),F.multiplyScalar(-de),u.add(F)}}(),N=function(){const F=new fe;return function(de,ie){r.screenSpacePanning===!0?F.setFromMatrixColumn(ie,1):(F.setFromMatrixColumn(ie,0),F.crossVectors(r.object.up,F)),F.multiplyScalar(de),u.add(F)}}(),D=function(){const F=new fe;return function(de,ie){const Ee=r.domElement;if(r.object.isPerspectiveCamera){const Ne=r.object.position;F.copy(Ne).sub(r.target);let Ie=F.length();Ie*=Math.tan(r.object.fov/2*Math.PI/180),P(2*de*Ie/Ee.clientHeight,r.object.matrix),N(2*ie*Ie/Ee.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(P(de*(r.object.right-r.object.left)/r.object.zoom/Ee.clientWidth,r.object.matrix),N(ie*(r.object.top-r.object.bottom)/r.object.zoom/Ee.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function U(F){r.object.isPerspectiveCamera?c/=F:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*F)),r.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function G(F){r.object.isPerspectiveCamera?c*=F:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/F)),r.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function B(F){d.set(F.clientX,F.clientY)}function Q(F){y.set(F.clientX,F.clientY)}function j(F){v.set(F.clientX,F.clientY)}function X(F){f.set(F.clientX,F.clientY),g.subVectors(f,d).multiplyScalar(r.rotateSpeed);const de=r.domElement;M(2*Math.PI*g.x/de.clientHeight),b(2*Math.PI*g.y/de.clientHeight),d.copy(f),r.update()}function ne(F){_.set(F.clientX,F.clientY),x.subVectors(_,y),x.y>0?U(k()):x.y<0&&G(k()),y.copy(_),r.update()}function ge(F){m.set(F.clientX,F.clientY),p.subVectors(m,v).multiplyScalar(r.panSpeed),D(p.x,p.y),v.copy(m),r.update()}function pe(F){F.deltaY<0?G(k()):F.deltaY>0&&U(k()),r.update()}function V(F){let de=!1;switch(F.code){case r.keys.UP:F.ctrlKey||F.metaKey||F.shiftKey?b(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):D(0,r.keyPanSpeed),de=!0;break;case r.keys.BOTTOM:F.ctrlKey||F.metaKey||F.shiftKey?b(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):D(0,-r.keyPanSpeed),de=!0;break;case r.keys.LEFT:F.ctrlKey||F.metaKey||F.shiftKey?M(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):D(r.keyPanSpeed,0),de=!0;break;case r.keys.RIGHT:F.ctrlKey||F.metaKey||F.shiftKey?M(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):D(-r.keyPanSpeed,0),de=!0;break}de&&(F.preventDefault(),r.update())}function Y(){if(w.length===1)d.set(w[0].pageX,w[0].pageY);else{const F=.5*(w[0].pageX+w[1].pageX),de=.5*(w[0].pageY+w[1].pageY);d.set(F,de)}}function ae(){if(w.length===1)v.set(w[0].pageX,w[0].pageY);else{const F=.5*(w[0].pageX+w[1].pageX),de=.5*(w[0].pageY+w[1].pageY);v.set(F,de)}}function J(){const F=w[0].pageX-w[1].pageX,de=w[0].pageY-w[1].pageY,ie=Math.sqrt(F*F+de*de);y.set(0,ie)}function z(){r.enableZoom&&J(),r.enablePan&&ae()}function _e(){r.enableZoom&&J(),r.enableRotate&&Y()}function ee(F){if(w.length==1)f.set(F.pageX,F.pageY);else{const ie=Se(F),Ee=.5*(F.pageX+ie.x),Ne=.5*(F.pageY+ie.y);f.set(Ee,Ne)}g.subVectors(f,d).multiplyScalar(r.rotateSpeed);const de=r.domElement;M(2*Math.PI*g.x/de.clientHeight),b(2*Math.PI*g.y/de.clientHeight),d.copy(f)}function te(F){if(w.length===1)m.set(F.pageX,F.pageY);else{const de=Se(F),ie=.5*(F.pageX+de.x),Ee=.5*(F.pageY+de.y);m.set(ie,Ee)}p.subVectors(m,v).multiplyScalar(r.panSpeed),D(p.x,p.y),v.copy(m)}function be(F){const de=Se(F),ie=F.pageX-de.x,Ee=F.pageY-de.y,Ne=Math.sqrt(ie*ie+Ee*Ee);_.set(0,Ne),x.set(0,Math.pow(_.y/y.y,r.zoomSpeed)),U(x.y),y.copy(_)}function oe(F){r.enableZoom&&be(F),r.enablePan&&te(F)}function Te(F){r.enableZoom&&be(F),r.enableRotate&&ee(F)}function Ae(F){r.enabled!==!1&&(w.length===0&&(r.domElement.setPointerCapture(F.pointerId),r.domElement.addEventListener("pointermove",Qe),r.domElement.addEventListener("pointerup",Ze)),se(F),F.pointerType==="touch"?Ft(F):ht(F))}function Qe(F){r.enabled!==!1&&(F.pointerType==="touch"?O(F):wt(F))}function Ze(F){xe(F),w.length===0&&(r.domElement.releasePointerCapture(F.pointerId),r.domElement.removeEventListener("pointermove",Qe),r.domElement.removeEventListener("pointerup",Ze)),r.dispatchEvent(mI),s=n.NONE}function ht(F){let de;switch(F.button){case 0:de=r.mouseButtons.LEFT;break;case 1:de=r.mouseButtons.MIDDLE;break;case 2:de=r.mouseButtons.RIGHT;break;default:de=-1}switch(de){case Ad.DOLLY:if(r.enableZoom===!1)return;Q(F),s=n.DOLLY;break;case Ad.ROTATE:if(F.ctrlKey||F.metaKey||F.shiftKey){if(r.enablePan===!1)return;j(F),s=n.PAN}else{if(r.enableRotate===!1)return;B(F),s=n.ROTATE}break;case Ad.PAN:if(F.ctrlKey||F.metaKey||F.shiftKey){if(r.enableRotate===!1)return;B(F),s=n.ROTATE}else{if(r.enablePan===!1)return;j(F),s=n.PAN}break;default:s=n.NONE}s!==n.NONE&&r.dispatchEvent(oT)}function wt(F){switch(s){case n.ROTATE:if(r.enableRotate===!1)return;X(F);break;case n.DOLLY:if(r.enableZoom===!1)return;ne(F);break;case n.PAN:if(r.enablePan===!1)return;ge(F);break}}function st(F){r.enabled===!1||r.enableZoom===!1||s!==n.NONE||(F.preventDefault(),r.dispatchEvent(oT),pe(F),r.dispatchEvent(mI))}function ft(F){r.enabled===!1||r.enablePan===!1||V(F)}function Ft(F){switch(we(F),w.length){case 1:switch(r.touches.ONE){case kd.ROTATE:if(r.enableRotate===!1)return;Y(),s=n.TOUCH_ROTATE;break;case kd.PAN:if(r.enablePan===!1)return;ae(),s=n.TOUCH_PAN;break;default:s=n.NONE}break;case 2:switch(r.touches.TWO){case kd.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;z(),s=n.TOUCH_DOLLY_PAN;break;case kd.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;_e(),s=n.TOUCH_DOLLY_ROTATE;break;default:s=n.NONE}break;default:s=n.NONE}s!==n.NONE&&r.dispatchEvent(oT)}function O(F){switch(we(F),s){case n.TOUCH_ROTATE:if(r.enableRotate===!1)return;ee(F),r.update();break;case n.TOUCH_PAN:if(r.enablePan===!1)return;te(F),r.update();break;case n.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;oe(F),r.update();break;case n.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Te(F),r.update();break;default:s=n.NONE}}function R(F){r.enabled!==!1&&F.preventDefault()}function se(F){w.push(F)}function xe(F){delete S[F.pointerId];for(let de=0;de<w.length;de++)if(w[de].pointerId==F.pointerId){w.splice(de,1);return}}function we(F){let de=S[F.pointerId];de===void 0&&(de=new Nt,S[F.pointerId]=de),de.set(F.pageX,F.pageY)}function Se(F){const de=F.pointerId===w[0].pointerId?w[1]:w[0];return S[de.pointerId]}r.domElement.addEventListener("contextmenu",R),r.domElement.addEventListener("pointerdown",Ae),r.domElement.addEventListener("pointercancel",Ze),r.domElement.addEventListener("wheel",st,{passive:!1}),this.update()}},DM=class x3{static createButton(e){const t=document.createElement("button");function r(){let l=null;async function c(h){h.addEventListener("end",u),await e.xr.setSession(h),t.textContent="EXIT VR",l=h}function u(){l.removeEventListener("end",u),t.textContent="ENTER VR",l=null}t.style.display="",t.style.cursor="pointer",t.style.left="calc(50% - 50px)",t.style.width="100px",t.textContent="ENTER VR",t.onmouseenter=function(){t.style.opacity="1.0"},t.onmouseleave=function(){t.style.opacity="0.5"},t.onclick=function(){if(l===null){const h={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",h).then(c)}else l.end()}}function n(){t.style.display="",t.style.cursor="auto",t.style.left="calc(50% - 75px)",t.style.width="150px",t.onmouseenter=null,t.onmouseleave=null,t.onclick=null}function s(){n(),t.textContent="VR NOT SUPPORTED"}function o(l){n(),console.warn("Exception when trying to call xr.isSessionSupported",l),t.textContent="VR NOT ALLOWED"}function a(l){l.style.position="absolute",l.style.bottom="20px",l.style.padding="12px 6px",l.style.border="1px solid #fff",l.style.borderRadius="4px",l.style.background="rgba(0,0,0,0.1)",l.style.color="#fff",l.style.font="normal 13px sans-serif",l.style.textAlign="center",l.style.opacity="0.5",l.style.outline="none",l.style.zIndex="999"}if("xr"in navigator)return t.id="VRButton",t.style.display="none",a(t),navigator.xr.isSessionSupported("immersive-vr").then(function(l){l?r():s(),l&&x3.xrSessionIsGranted&&t.click()}).catch(o),t;{const l=document.createElement("a");return window.isSecureContext===!1?(l.href=document.location.href.replace(/^http:/,"https:"),l.innerHTML="WEBXR NEEDS HTTPS"):(l.href="https://immersiveweb.dev/",l.innerHTML="WEBXR NOT AVAILABLE"),l.style.left="calc(50% - 90px)",l.style.width="180px",l.style.textDecoration="none",a(l),l}}static registerSessionGrantedListener(){if("xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{x3.xrSessionIsGranted=!0})}}};DM.xrSessionIsGranted=!1;DM.registerSessionGrantedListener();function vh(i){const e=new Pr;return i.forEach(t=>{const r=new fe(0,0,0);t.axis==="x"&&r.setX(1),t.axis==="y"&&r.setY(1),t.axis==="z"&&r.setZ(1);const n=t.degrees*Math.PI/180;e.premultiply(new Pr().setFromAxisAngle(r,n))}),e}function d_(i){const[e,t,r,n]=vh(i);return[n,e,t,r]}function OM(i){return new Pr(i[1],i[2],i[3],i[0])}function F8(i){if(i.length===3){const[e,t,r]=i;return{translation:[e,t,0],rotation:d_([{axis:"z",degrees:r}])}}else if(i.length===4){const[e,t,r,n]=i;return{translation:[e,t,r],rotation:d_([{axis:"z",degrees:n}])}}else if(i.length===6){const[e,t,r,n,s,o]=i;return{translation:[e,t,r],rotation:d_([{axis:"x",degrees:n},{axis:"y",degrees:s},{axis:"z",degrees:o}])}}else if(i.length===7){const e=i.slice(0,3),t=i.slice(3,7);return{translation:e,rotation:t}}return A$()}function A$(){return{translation:[0,0,0],rotation:[0,0,0,0]}}const Zce=[{game:"Reefscape",src:"/3d-models/Field3d_2025.glb",rotations:[{axis:"x",degrees:90}],size:[57.57291667,26.4167],unit:"foot"},{game:"Crescendo",src:"/3d-models/Field3d_2024.glb",rotations:[{axis:"x",degrees:90},{axis:"z",degrees:180}],size:[54.2708333,26.9375],unit:"foot"},{game:"Charged Up",src:"/3d-models/Field3d_2023.glb",rotations:[{axis:"x",degrees:90},{axis:"z",degrees:180}],size:[54.27083,26.2916],unit:"foot"},{game:"Rapid React",src:"/3d-models/Field3d_2022.glb",rotations:[{axis:"x",degrees:90}],size:[54,27],unit:"foot"},{game:"Infinite Recharge",src:"/3d-models/Field3d_2021.glb",rotations:[{axis:"x",degrees:90},{axis:"z",degrees:90}],size:[52.4375,26.9375],unit:"foot"},{game:"Evergreen",src:"/3d-models/Field3d_Evergreen.glb",rotations:[{axis:"x",degrees:90}],size:[54,27],unit:"foot"}],B8=[{name:"KitBot",src:"/3d-models/Robot_KitBot.glb",rotations:[{axis:"z",degrees:90}],position:[.12,3.15,0]},{name:"Duck Bot",src:"/3d-models/Robot_Duck Bot.glb",rotations:[{axis:"z",degrees:90}],position:[0,0,0]},{name:"Crab Bot",src:"/3d-models/Robot_Crab Bot.glb",rotations:[{axis:"z",degrees:180}],position:[0,0,.045]},{name:"Bot-Bot Awakens (6328)",src:"/3d-models/Robot_Bot-Bot Awakens (6328).glb",rotations:[{axis:"z",degrees:90},{axis:"y",degrees:90}],position:[0,0,0]},{name:"Bot-Bot Strikes Back (6328)",src:"/3d-models/Robot_Bot-Bot Strikes Back (6328).glb",rotations:[{axis:"x",degrees:90},{axis:"z",degrees:90}],position:[.05,0,.06]},{name:"REV 2023 Starter Bot",src:"/3d-models/Robot_REV 2023 Starter Bot.glb",rotations:[{axis:"x",degrees:90},{axis:"z",degrees:90}],position:[0,0,0],components:[{name:"0",src:"/3d-models/Robot_REV 2023 Starter Bot_0.glb",rotations:[{axis:"x",degrees:90},{axis:"z",degrees:90},{axis:"y",degrees:211}],position:[.645,0,.48]},{name:"1",src:"/3d-models/Robot_REV 2023 Starter Bot_1.glb",rotations:[{axis:"x",degrees:90},{axis:"z",degrees:90}],position:[.305,0,-.37]}]}],k$=[{name:"R2D2",content:`
    <robot name="flexible">
      <link name="base_link">
        <visual>
          <geometry>
            <cylinder length="0.6" radius="0.2"/>
          </geometry>
          <material name="blue">
            <color rgba="0 0 .8 1"/>
          </material>
        </visual>
      </link>
    
      <link name="right_leg">
        <visual>
          <geometry>
            <box size="0.6 .2 .1"/>
          </geometry>
          <origin rpy="0 1.57075 0" xyz="0 0 -0.3"/>
          <material name="white">
            <color rgba="1 1 1 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="base_to_right_leg" type="fixed">
        <parent link="base_link"/>
        <child link="right_leg"/>
        <origin xyz="0.22 0 .25"/>
      </joint>
    
      <link name="right_base">
        <visual>
          <geometry>
            <box size=".1 0.4 .1"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="right_base_joint" type="fixed">
        <parent link="right_leg"/>
        <child link="right_base"/>
        <origin xyz="0 0 -0.6"/>
      </joint>
    
      <link name="right_front_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black">
            <color rgba="0 0 0 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="right_front_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="right_base"/>
        <child link="right_front_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="right_back_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="right_back_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="right_base"/>
        <child link="right_back_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 -0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="left_leg">
        <visual>
          <geometry>
            <box size="0.6 .2 .1"/>
          </geometry>
          <origin rpy="0 1.57075 0" xyz="0 0 -0.3"/>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="base_to_left_leg" type="fixed">
        <parent link="base_link"/>
        <child link="left_leg"/>
        <origin xyz="-0.22 0 .25"/>
      </joint>
    
      <link name="left_base">
        <visual>
          <geometry>
            <box size=".1 0.4 .1"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="left_base_joint" type="fixed">
        <parent link="left_leg"/>
        <child link="left_base"/>
        <origin xyz="0 0 -0.6"/>
      </joint>
    
      <link name="left_front_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="left_front_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="left_base"/>
        <child link="left_front_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="left_back_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="left_back_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="left_base"/>
        <child link="left_back_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 -0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
      <joint name="gripper_extension" type="prismatic">
        <parent link="base_link"/>
        <child link="gripper_pole"/>
        <limit effort="1000.0" lower="-0.38" upper="0" velocity="0.5"/>
        <origin rpy="0 0 1.57075" xyz="0 0.19 .2"/>
      </joint>
    
      <link name="gripper_pole">
        <visual>
          <geometry>
            <cylinder length="0.2" radius=".01"/>
          </geometry>
          <origin rpy="0 1.57075 0 " xyz="0.1 0 0"/>
          <material name="Gray">
            <color rgba=".7 .7 .7 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="left_gripper_joint" type="revolute">
        <axis xyz="0 0 1"/>
        <limit effort="1000.0" lower="0.0" upper="0.548" velocity="0.5"/>
        <origin rpy="0 0 0" xyz="0.2 0.01 0"/>
        <parent link="gripper_pole"/>
        <child link="left_gripper"/>
      </joint>
    
      <link name="left_gripper">
        <visual>
          <origin rpy="0.0 0 0" xyz="0 0 0"/>
          <geometry>
            <box size="0.1 0.02 0.02"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="left_tip_joint" type="fixed">
        <parent link="left_gripper"/>
        <child link="left_tip"/>
      </joint>
    
      <link name="left_tip">
        <visual>
          <origin rpy="0.0 0 0" xyz="0.09137 0.00495 0"/>
          <geometry>
            <mesh filename="package://pr2_description/meshes/gripper_v0/l_finger_tip.dae"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="right_gripper_joint" type="revolute">
        <axis xyz="0 0 -1"/>
        <limit effort="1000.0" lower="0.0" upper="0.548" velocity="0.5"/>
        <origin rpy="0 0 0" xyz="0.2 -0.01 0"/>
        <parent link="gripper_pole"/>
        <child link="right_gripper"/>
      </joint>
    
      <link name="right_gripper">
        <visual>
          <origin rpy="-3.1415 0 0" xyz="0 0 0"/>
          <geometry>
             <box size="0.1 0.02 0.02"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="right_tip_joint" type="fixed">
        <parent link="right_gripper"/>
        <child link="right_tip"/>
      </joint>
    
      <link name="right_tip">
        <visual>
          <origin rpy="-3.1415 0 0" xyz="0.09137 0.00495 0"/>
          <geometry>
            <mesh filename="package://pr2_description/meshes/gripper_v0/l_finger_tip.dae"/>
          </geometry>
        </visual>
      </link>
    
      <link name="head">
        <visual>
          <geometry>
            <sphere radius="0.2"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="head_swivel" type="continuous">
        <parent link="base_link"/>
        <child link="head"/>
        <axis xyz="0 0 1"/>
        <origin xyz="0 0 0.3"/>
      </joint>
    
      <link name="box">
        <visual>
          <geometry>
            <box size=".08 .08 .08"/>
          </geometry>
          <material name="blue"/>
        </visual>
      </link>
    
      <joint name="tobox" type="fixed">
        <parent link="head"/>
        <child link="box"/>
        <origin xyz="0 0.1414 0.1414"/>
      </joint>
    
    </robot>
    
    `,rotations:[{axis:"z",degrees:-90}],position:[0,0,.5]},{name:"PI Robot",content:`
    <robot name="pi_robot">

      <!-- * * * Link Definitions * * * -->

      <link name="base_link">
        <visual>
            <origin xyz="0 0 0.0425" rpy="0 0 0"/>
          <geometry>
            <box size="0.32 0.26 0.085"/>
          </geometry>
          <material name="Cyan1">
                <color rgba="0 0.9 0.9 1.0"/>
            </material>
        </visual>	
      </link>

      <link name="base_laser">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.025" length="0.07"/>
          </geometry>
          <material name="Black1">
                <color rgba="0.2 0.2 0.2 1.0"/>
            </material>
        </visual>	
      </link>

      <link name="cpu_link">
        <visual>
            <origin xyz="0 0 0.035" rpy="0 0 0"/>
          <geometry>
            <box size="0.19 0.19 0.07"/>
          </geometry>
          <material name="Cyan2">
                <color rgba="0 0.7 0.7 1.0"/>
            </material>
        </visual>	
      </link>

        <link name="upper_base_link">
        <visual>
          <origin xyz="0 0 0.05" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.085" length="0.10"/>
          </geometry>
            <material name="Cyan3">
            <color rgba="0 0.5 0.5 0"/>
          </material>
        </visual>
      </link>

        <link name="torso_link">
        <visual>
          <origin xyz="0 0 0.12" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.05" length="0.24"/>
          </geometry>
            <material name="Yellow2">
            <color rgba="0.8 0.8 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_pan_link">
        <visual>
          <origin xyz="0 0 0.0225" rpy="0 0 0"/>
          <geometry>
            <box size="0.05 0.045 0.045"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_tilt_link">
        <visual>
          <origin xyz="0 0 0.02" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.038 0.04"/>
          </geometry>
            <material name="Green2">
            <color rgba="0.1 0.8 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="neck_link">
        <visual>
          <origin xyz="0 0 0.021" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.042"/>
          </geometry>
            <material name="Green3">
            <color rgba="0.1 0.5 0.1 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_link">
        <visual>
          <origin xyz="0 0 0.025" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.07 0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <!--	
      <link name="eyes_link">
        <visual>
          <origin xyz="0 0 0.035" rpy="0 0 0" />
          <geometry>
            <box size="0.01 0.04 0.01" />
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>
      -->

      <link name="antenna_link">
        <visual>
          <origin xyz="0 0 0.035" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.002" length="0.05"/>
          </geometry>
            <material name="Grey3">
            <color rgba="0.8 0.8 0.8 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.025 0.015 0.05"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_shoulder_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.025 0.015 0.05"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_forward_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue1">
            <color rgba="0 0 0.9 1.0"/>
          </material>
        </visual>
      </link>
        
      <link name="right_shoulder_forward_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue1">
            <color rgba="0 0 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_up_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_shoulder_up_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_upper_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.05"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_upper_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.05"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_elbow_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 1.57"/>
          <geometry>
            <box size="0.035 0.035 0.05"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_elbow_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 1.57"/>
          <geometry>
            <box size="0.035 0.035 0.05"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_lower_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_lower_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_wrist_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_wrist_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_hand_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.01 0.06"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.7 0.7 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_hand_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.01 0.06"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <!-- * * * Joint Definitions * * * -->

      <joint name="cpu_joint" type="fixed">
          <parent link="base_link"/>
          <child link="cpu_link"/>
          <origin xyz="0.025 0 0.085" rpy="0 0 0"/>
      </joint>

      <joint name="base_laser_joint" type="fixed">
          <parent link="base_link"/>
          <child link="base_laser"/>
          <origin xyz="0.18 0 0.07" rpy="0 0 0"/>
      </joint>

      <joint name="upper_base_joint" type="fixed">
          <parent link="cpu_link"/>
          <child link="upper_base_link"/>
          <origin xyz="0 0 0.07" rpy="0 0 0"/>
      </joint>

      <joint name="torso_joint" type="revolute">
          <parent link="upper_base_link"/>
          <child link="torso_link"/>
          <origin xyz="0 0 0.10" rpy="0 0 0"/>
          <axis xyz="0 0 1"/>
          <limit lower="-3.1416" upper="3.1416" effort="10" velocity="3"/>
        </joint>

      <joint name="head_pan_servo" type="fixed">
          <parent link="torso_link"/>
          <child link="head_pan_link"/>
          <origin xyz="0 0 0.225" rpy="0 0 0"/>
      </joint>

      <joint name="head_pan_joint" type="revolute">
          <parent link="head_pan_link"/>
          <child link="head_tilt_link"/>
          <origin xyz="0 0 0.045" rpy="0 0 0"/>
          <axis xyz="0 0 1"/>
          <limit lower="-3.1416" upper="3.1416" effort="10" velocity="3"/>
        </joint>
        
      <joint name="head_tilt_joint" type="revolute">
          <parent link="head_tilt_link"/>
          <child link="neck_link"/>
          <origin xyz="0 0 0.04" rpy="0 0 0"/>
          <axis xyz="0 1 0"/>
          <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
        </joint>
        
      <joint name="neck_joint" type="fixed">
          <parent link="neck_link"/>
          <child link="head_link"/>
          <origin xyz="0.05 0 0.015" rpy="0 0 0"/>
      </joint>
      <!--	
      <joint name="eyes_joint" type="fixed">
          <parent link="head_link" />
          <child link="eyes_link" />
          <origin xyz="0.02 0 0.03" rpy="0 0 0" />
      </joint>
      -->

      <joint name="antenna_joint" type="fixed">
          <parent link="head_link"/>
          <child link="antenna_link"/>
          <origin xyz="0.0 -0.025 0.065" rpy="0 0 0"/>
      </joint>

      <joint name="left_shoulder_joint" type="fixed">
          <parent link="torso_link"/>
          <child link="left_shoulder_link"/>
          <origin xyz="0 0.055 0.165" rpy="0 0 0"/>
      </joint>

      <joint name="right_shoulder_joint" type="fixed">
          <parent link="torso_link"/>
          <child link="right_shoulder_link"/>
          <origin xyz="0 -0.055 0.165" rpy="0 0 0"/>
      </joint>

      <joint name="left_shoulder_forward_joint" type="revolute">
          <parent link="left_shoulder_link"/>
          <child link="left_shoulder_forward_link"/>
          <origin xyz="0 0.025 0" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="right_shoulder_forward_joint" type="revolute">
          <parent link="right_shoulder_link"/>
          <child link="right_shoulder_forward_link"/>
          <origin xyz="0 -0.025 0" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="left_shoulder_up_joint" type="revolute">
          <parent link="left_shoulder_forward_link"/>
          <child link="left_shoulder_up_link"/>
          <origin xyz="0 0.04 -0.01" rpy="0 -0.707 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 1 0"/>
      </joint>

      <joint name="right_shoulder_up_joint" type="revolute">
          <parent link="right_shoulder_forward_link"/>
          <child link="right_shoulder_up_link"/>
          <origin xyz="0 -0.04 -0.01" rpy="0 -0.707 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 1 0"/>
      </joint>

      <joint name="left_upper_arm_joint" type="fixed">
          <parent link="left_shoulder_up_link"/>
          <child link="left_upper_arm_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
      </joint>

      <joint name="right_upper_arm_joint" type="fixed">
          <parent link="right_shoulder_up_link"/>
          <child link="right_upper_arm_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
      </joint>

      <joint name="left_elbow_joint" type="revolute">
          <parent link="left_upper_arm_link"/>
          <child link="left_elbow_link"/>
          <origin xyz="-0.005 0 -0.05" rpy="0 0 0"/>
            <limit lower="-3.146" upper="3.146" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="right_elbow_joint" type="revolute">
          <parent link="right_upper_arm_link"/>
          <child link="right_elbow_link"/>
          <origin xyz="-0.005 0 -0.05" rpy="0 0 0"/>
            <limit lower="-3.146" upper="3.146" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="left_lower_arm_joint" type="fixed">
          <parent link="left_elbow_link"/>
          <child link="left_lower_arm_link"/>
          <origin xyz="0 0 -0.08" rpy="0 0 0"/>
      </joint>

      <joint name="right_lower_arm_joint" type="fixed">
          <parent link="right_elbow_link"/>
          <child link="right_lower_arm_link"/>
          <origin xyz="0 0 -0.08" rpy="0 0 0"/>
      </joint>

      <joint name="left_wrist_joint" type="revolute">
          <parent link="left_lower_arm_link"/>
          <child link="left_wrist_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="1 0 0"/>
      </joint>

      <joint name="right_wrist_joint" type="revolute">
          <parent link="right_lower_arm_link"/>
          <child link="right_wrist_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="1 0 0"/>
      </joint>

      <joint name="left_hand_joint" type="fixed">
          <parent link="left_wrist_link"/>
          <child link="left_hand_link"/>
          <origin xyz="0 0 -0.055" rpy="0 0 0"/>
      </joint>

      <joint name="right_hand_joint" type="fixed">
          <parent link="right_wrist_link"/>
          <child link="right_hand_link"/>
          <origin xyz="0 0 -0.055" rpy="0 0 0"/>
      </joint>

      </robot>

    `,rotations:[],position:[0,0,0]}];var T0,Jb,Qb,Rp;let Jce=class{constructor(e,t,r){Tr(this,T0),Tr(this,Jb),Tr(this,Qb),Tr(this,Rp,new Di),tn(this,T0,e),tn(this,Jb,t),tn(this,Qb,r),this.create()}create(){var e,t;const r=ai(this,T0).getFieldGroup();r.remove(ai(this,Rp)),(e=ai(this,Qb))==null||e.call(this,this);const n=new Di;tn(this,Rp,n),r.add(ai(this,Rp)),(t=ai(this,Jb))==null||t.call(this,this)}getGroup(){return ai(this,Rp)}getField3d(){return ai(this,T0)}};T0=new WeakMap,Jb=new WeakMap,Qb=new WeakMap,Rp=new WeakMap;const cm=(i,e)=>`${i.replace(/\/$/,"")}/${e.replace(/^\//,"")}`;function V8(i){const e=i.lastIndexOf("/");return e<0?"":i.substring(0,e)}var Qce=Object.defineProperty,Jh=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Qce(e,t,n),n};const Gc=class w3 extends ut{constructor(){super(...arguments),this.objectConfigs=B8,this.name=this.objectConfigs[0].name,this.pose=[0,0,0],this._translation=[0,0,0],this._rotation=[0,0,0,0],this.loader=new E$,this.group=new Di}getObjectConfig(){return this.objectConfigs.find(({name:e})=>e===this.name)??this.objectConfigs[0]}getField(){const e=this.closest("frc-field3d");if(e)return e}static adjustMaterials(e){e.traverse(t=>{const r=t;if(r.isMesh&&r.material instanceof Ly){const n=r.material;n.metalness=0,n.roughness=1}})}static updatePose(e,t){const[r,n,s]=t.translation;e.position.set(r,n,s),e.rotation.setFromQuaternion(OM(t.rotation))}loadRobotModel(){const e=this.getField(),t=this.getObjectConfig();if(!e)return;const r=e.getFieldGroup();r.remove(this.group),this.object&&this.group.remove(this.object);const n=t.components??[],s=[t.src].concat(n.map(({src:l})=>l)).map(l=>new Promise(c=>{this.loader.load(cm(e.assetPathPrefix??"",l),u=>c(u))})),o=new Di;this.group=o,r.add(this.group);const a=new Di;this.object=a,o.add(a),a.rotation.setFromQuaternion(vh(t.rotations)),a.position.set(...t.position),Promise.all(s).then(l=>{l.forEach(c=>{w3.adjustMaterials(c.scene),a.add(c.scene)})})}firstUpdated(){this.updateObjectConfigs(),this.renderObject()}updated(e){if(e.has("name")&&this.loadRobotModel(),e.has("translation")||e.has("rotation")||e.has("pose"))if(this.translation||this.rotation)this._translation=this.translation??[0,0,0],this._rotation=this.rotation??[0,0,0,0];else if(this.pose.length>=7)this._translation=this.pose.slice(0,3),this._rotation=this.pose.slice(3,7);else{const[t=0,r=0,n=0]=this.pose;this._translation=[t,r],this._rotation=n}}updateObjectConfigs(){const e=this.getField(),t=e==null?void 0:e.objectConfigs;t!=null&&t.length&&t!==this.objectConfigs&&(this.objectConfigs=t,this.objectConfigs.some(r=>r.name===this.name)||(this.name=this.objectConfigs[0].name))}renderObject(){this.group&&w3.updatePose(this.group,{translation:this._translation.length===2?[...this._translation,0]:this._translation,rotation:typeof this._rotation=="number"?d_([{axis:"z",degrees:this._rotation}]):this._rotation}),requestAnimationFrame(()=>{this.renderObject()})}};Jh([zi()],Gc.prototype,"objectConfigs");Jh([q({type:String})],Gc.prototype,"name");Jh([q({type:Array})],Gc.prototype,"pose");Jh([q({type:Array})],Gc.prototype,"translation");Jh([q({type:Array})],Gc.prototype,"rotation");Jh([zi()],Gc.prototype,"_translation");Jh([zi()],Gc.prototype,"_rotation");let eue=Gc;customElements.get("frc-field3d-object")||customElements.define("frc-field3d-object",eue);let tue=class extends Hc{constructor(e){super(e)}load(e,t,r,n){const s=this,o=new Py(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(l){n?n(l):console.error(l),s.manager.itemError(e)}},r,n)}parse(e){function t(c){const u=new DataView(c),h=32/8*3+32/8*3*3+16/8,d=u.getUint32(80,!0);if(80+32/8+d*h===u.byteLength)return!0;const f=[115,111,108,105,100];for(let g=0;g<5;g++)if(r(f,u,g))return!1;return!0}function r(c,u,h){for(let d=0,f=c.length;d<f;d++)if(c[d]!==u.getUint8(h+d))return!1;return!0}function n(c){const u=new DataView(c),h=u.getUint32(80,!0);let d,f,g,v=!1,m,p,y,_,x;for(let b=0;b<70;b++)u.getUint32(b,!1)==1129270351&&u.getUint8(b+4)==82&&u.getUint8(b+5)==61&&(v=!0,m=new Float32Array(h*3*3),p=u.getUint8(b+6)/255,y=u.getUint8(b+7)/255,_=u.getUint8(b+8)/255,x=u.getUint8(b+9)/255);const w=84,S=12*4+2,A=new sn,k=new Float32Array(h*3*3),M=new Float32Array(h*3*3);for(let b=0;b<h;b++){const P=w+b*S,N=u.getFloat32(P,!0),D=u.getFloat32(P+4,!0),U=u.getFloat32(P+8,!0);if(v){const G=u.getUint16(P+48,!0);G&32768?(d=p,f=y,g=_):(d=(G&31)/31,f=(G>>5&31)/31,g=(G>>10&31)/31)}for(let G=1;G<=3;G++){const B=P+G*12,Q=b*3*3+(G-1)*3;k[Q]=u.getFloat32(B,!0),k[Q+1]=u.getFloat32(B+4,!0),k[Q+2]=u.getFloat32(B+8,!0),M[Q]=N,M[Q+1]=D,M[Q+2]=U,v&&(m[Q]=d,m[Q+1]=f,m[Q+2]=g)}}return A.setAttribute("position",new mr(k,3)),A.setAttribute("normal",new mr(M,3)),v&&(A.setAttribute("color",new mr(m,3)),A.hasColors=!0,A.alpha=x),A}function s(c){const u=new sn,h=/solid([\s\S]*?)endsolid/g,d=/facet([\s\S]*?)endfacet/g;let f=0;const g=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,v=new RegExp("vertex"+g+g+g,"g"),m=new RegExp("normal"+g+g+g,"g"),p=[],y=[],_=new fe;let x,w=0,S=0,A=0;for(;(x=h.exec(c))!==null;){S=A;const k=x[0];for(;(x=d.exec(k))!==null;){let P=0,N=0;const D=x[0];for(;(x=m.exec(D))!==null;)_.x=parseFloat(x[1]),_.y=parseFloat(x[2]),_.z=parseFloat(x[3]),N++;for(;(x=v.exec(D))!==null;)p.push(parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3])),y.push(_.x,_.y,_.z),P++,A++;N!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+f),P!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+f),f++}const M=S,b=A-S;u.addGroup(M,b,w),w++}return u.setAttribute("position",new hi(p,3)),u.setAttribute("normal",new hi(y,3)),u}function o(c){return typeof c!="string"?new TextDecoder().decode(c):c}function a(c){if(typeof c=="string"){const u=new Uint8Array(c.length);for(let h=0;h<c.length;h++)u[h]=c.charCodeAt(h)&255;return u.buffer||u}else return c}const l=a(e);return t(l)?n(l):s(o(e))}},gI=class extends sce{constructor(e){super(e)}parse(e){function t(B){switch(B.image_type){case d:case v:(B.colormap_length>256||B.colormap_size!==24||B.colormap_type!==1)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case f:case g:case m:case p:B.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case h:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',B.image_type)}(B.width<=0||B.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),B.pixel_size!==8&&B.pixel_size!==16&&B.pixel_size!==24&&B.pixel_size!==32&&console.error('THREE.TGALoader: Invalid pixel size "%s".',B.pixel_size)}function r(B,Q,j,X,ne){let ge,pe;const V=j.pixel_size>>3,Y=j.width*j.height*V;if(Q&&(pe=ne.subarray(X,X+=j.colormap_length*(j.colormap_size>>3))),B){ge=new Uint8Array(Y);let ae,J,z,_e=0;const ee=new Uint8Array(V);for(;_e<Y;)if(ae=ne[X++],J=(ae&127)+1,ae&128){for(z=0;z<V;++z)ee[z]=ne[X++];for(z=0;z<J;++z)ge.set(ee,_e+z*V);_e+=V*J}else{for(J*=V,z=0;z<J;++z)ge[_e+z]=ne[X++];_e+=J}}else ge=ne.subarray(X,X+=Q?j.width*j.height:Y);return{pixel_data:ge,palettes:pe}}function n(B,Q,j,X,ne,ge,pe,V,Y){const ae=Y;let J,z=0,_e,ee;const te=b.width;for(ee=Q;ee!==X;ee+=j)for(_e=ne;_e!==pe;_e+=ge,z++)J=V[z],B[(_e+te*ee)*4+3]=255,B[(_e+te*ee)*4+2]=ae[J*3+0],B[(_e+te*ee)*4+1]=ae[J*3+1],B[(_e+te*ee)*4+0]=ae[J*3+2];return B}function s(B,Q,j,X,ne,ge,pe,V){let Y,ae=0,J,z;const _e=b.width;for(z=Q;z!==X;z+=j)for(J=ne;J!==pe;J+=ge,ae+=2)Y=V[ae+0]+(V[ae+1]<<8),B[(J+_e*z)*4+0]=(Y&31744)>>7,B[(J+_e*z)*4+1]=(Y&992)>>2,B[(J+_e*z)*4+2]=(Y&31)<<3,B[(J+_e*z)*4+3]=Y&32768?0:255;return B}function o(B,Q,j,X,ne,ge,pe,V){let Y=0,ae,J;const z=b.width;for(J=Q;J!==X;J+=j)for(ae=ne;ae!==pe;ae+=ge,Y+=3)B[(ae+z*J)*4+3]=255,B[(ae+z*J)*4+2]=V[Y+0],B[(ae+z*J)*4+1]=V[Y+1],B[(ae+z*J)*4+0]=V[Y+2];return B}function a(B,Q,j,X,ne,ge,pe,V){let Y=0,ae,J;const z=b.width;for(J=Q;J!==X;J+=j)for(ae=ne;ae!==pe;ae+=ge,Y+=4)B[(ae+z*J)*4+2]=V[Y+0],B[(ae+z*J)*4+1]=V[Y+1],B[(ae+z*J)*4+0]=V[Y+2],B[(ae+z*J)*4+3]=V[Y+3];return B}function l(B,Q,j,X,ne,ge,pe,V){let Y,ae=0,J,z;const _e=b.width;for(z=Q;z!==X;z+=j)for(J=ne;J!==pe;J+=ge,ae++)Y=V[ae],B[(J+_e*z)*4+0]=Y,B[(J+_e*z)*4+1]=Y,B[(J+_e*z)*4+2]=Y,B[(J+_e*z)*4+3]=255;return B}function c(B,Q,j,X,ne,ge,pe,V){let Y=0,ae,J;const z=b.width;for(J=Q;J!==X;J+=j)for(ae=ne;ae!==pe;ae+=ge,Y+=2)B[(ae+z*J)*4+0]=V[Y+0],B[(ae+z*J)*4+1]=V[Y+0],B[(ae+z*J)*4+2]=V[Y+0],B[(ae+z*J)*4+3]=V[Y+1];return B}function u(B,Q,j,X,ne){let ge,pe,V,Y,ae,J;switch((b.flags&y)>>_){default:case S:ge=0,V=1,ae=Q,pe=0,Y=1,J=j;break;case x:ge=0,V=1,ae=Q,pe=j-1,Y=-1,J=-1;break;case A:ge=Q-1,V=-1,ae=-1,pe=0,Y=1,J=j;break;case w:ge=Q-1,V=-1,ae=-1,pe=j-1,Y=-1,J=-1;break}if(D)switch(b.pixel_size){case 8:l(B,pe,Y,J,ge,V,ae,X);break;case 16:c(B,pe,Y,J,ge,V,ae,X);break;default:console.error("THREE.TGALoader: Format not supported.");break}else switch(b.pixel_size){case 8:n(B,pe,Y,J,ge,V,ae,X,ne);break;case 16:s(B,pe,Y,J,ge,V,ae,X);break;case 24:o(B,pe,Y,J,ge,V,ae,X);break;case 32:a(B,pe,Y,J,ge,V,ae,X);break;default:console.error("THREE.TGALoader: Format not supported.");break}return B}const h=0,d=1,f=2,g=3,v=9,m=10,p=11,y=48,_=4,x=0,w=1,S=2,A=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");let k=0;const M=new Uint8Array(e),b={id_length:M[k++],colormap_type:M[k++],image_type:M[k++],colormap_index:M[k++]|M[k++]<<8,colormap_length:M[k++]|M[k++]<<8,colormap_size:M[k++],origin:[M[k++]|M[k++]<<8,M[k++]|M[k++]<<8],width:M[k++]|M[k++]<<8,height:M[k++]|M[k++]<<8,pixel_size:M[k++],flags:M[k++]};t(b),b.id_length+k>e.length&&console.error("THREE.TGALoader: No data."),k+=b.id_length;let P=!1,N=!1,D=!1;switch(b.image_type){case v:P=!0,N=!0;break;case d:N=!0;break;case m:P=!0;break;case f:break;case p:P=!0,D=!0;break;case g:D=!0;break}const U=new Uint8Array(b.width*b.height*4),G=r(P,N,b,k,M);return u(U,b.width,b.height,G.pixel_data,G.palettes),{data:U,width:b.width,height:b.height,flipY:!0,generateMipmaps:!0,minFilter:hl}}},iue=class extends Hc{constructor(e){super(e)}load(e,t,r,n){const s=this,o=s.path===""?dy.extractUrlBase(e):s.path,a=new Py(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){n?n(c):console.error(c),s.manager.itemError(e)}},r,n)}parse(e,t){function r(E,T){const $=[],C=E.childNodes;for(let L=0,re=C.length;L<re;L++){const he=C[L];he.nodeName===T&&$.push(he)}return $}function n(E){if(E.length===0)return[];const T=E.trim().split(/\s+/),$=new Array(T.length);for(let C=0,L=T.length;C<L;C++)$[C]=T[C];return $}function s(E){if(E.length===0)return[];const T=E.trim().split(/\s+/),$=new Array(T.length);for(let C=0,L=T.length;C<L;C++)$[C]=parseFloat(T[C]);return $}function o(E){if(E.length===0)return[];const T=E.trim().split(/\s+/),$=new Array(T.length);for(let C=0,L=T.length;C<L;C++)$[C]=parseInt(T[C]);return $}function a(E){return E.substring(1)}function l(){return"three_default_"+DS++}function c(E){return Object.keys(E).length===0}function u(E){return{unit:h(r(E,"unit")[0]),upAxis:d(r(E,"up_axis")[0])}}function h(E){return E!==void 0&&E.hasAttribute("meter")===!0?parseFloat(E.getAttribute("meter")):1}function d(E){return E!==void 0?E.textContent:"Y_UP"}function f(E,T,$,C){const L=r(E,T)[0];if(L!==void 0){const re=r(L,$);for(let he=0;he<re.length;he++)C(re[he])}}function g(E,T){for(const $ in E){const C=E[$];C.build=T(E[$])}}function v(E,T){return E.build!==void 0||(E.build=T(E)),E.build}function m(E){const T={sources:{},samplers:{},channels:{}};let $=!1;for(let C=0,L=E.childNodes.length;C<L;C++){const re=E.childNodes[C];if(re.nodeType!==1)continue;let he;switch(re.nodeName){case"source":he=re.getAttribute("id"),T.sources[he]=ye(re);break;case"sampler":he=re.getAttribute("id"),T.samplers[he]=p(re);break;case"channel":he=re.getAttribute("target"),T.channels[he]=y(re);break;case"animation":m(re),$=!0;break;default:console.log(re)}}$===!1&&(Be.animations[E.getAttribute("id")||$p.generateUUID()]=T)}function p(E){const T={inputs:{}};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"input":const re=a(L.getAttribute("source")),he=L.getAttribute("semantic");T.inputs[he]=re;break}}return T}function y(E){const T={};let $=E.getAttribute("target").split("/");const C=$.shift();let L=$.shift();const re=L.indexOf("(")!==-1,he=L.indexOf(".")!==-1;if(he)$=L.split("."),L=$.shift(),T.member=$.shift();else if(re){const ke=L.split("(");L=ke.shift();for(let Me=0;Me<ke.length;Me++)ke[Me]=parseInt(ke[Me].replace(/\)/,""));T.indices=ke}return T.id=C,T.sid=L,T.arraySyntax=re,T.memberSyntax=he,T.sampler=a(E.getAttribute("source")),T}function _(E){const T=[],$=E.channels,C=E.samplers,L=E.sources;for(const re in $)if($.hasOwnProperty(re)){const he=$[re],ke=C[he.sampler],Me=ke.inputs.INPUT,Re=ke.inputs.OUTPUT,Ue=L[Me],ve=L[Re],Pe=w(he,Ue,ve);b(Pe,T)}return T}function x(E){return v(Be.animations[E],_)}function w(E,T,$){const C=Be.nodes[E.id],L=Lt(C.id),re=C.transforms[E.sid],he=C.matrix.clone().transpose();let ke,Me,Re,Ue,ve,Pe;const Oe={};switch(re){case"matrix":for(Re=0,Ue=T.array.length;Re<Ue;Re++)if(ke=T.array[Re],Me=Re*$.stride,Oe[ke]===void 0&&(Oe[ke]={}),E.arraySyntax===!0){const ze=$.array[Me],bt=E.indices[0]+4*E.indices[1];Oe[ke][bt]=ze}else for(ve=0,Pe=$.stride;ve<Pe;ve++)Oe[ke][ve]=$.array[Me+ve];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',re);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',re);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',re);break}const He=S(Oe,he);return{name:L.uuid,keyframes:He}}function S(E,T){const $=[];for(const L in E)$.push({time:parseFloat(L),value:E[L]});$.sort(C);for(let L=0;L<16;L++)P($,L,T.elements[L]);return $;function C(L,re){return L.time-re.time}}const A=new fe,k=new fe,M=new Pr;function b(E,T){const $=E.keyframes,C=E.name,L=[],re=[],he=[],ke=[];for(let Me=0,Re=$.length;Me<Re;Me++){const Ue=$[Me],ve=Ue.time,Pe=Ue.value;mt.fromArray(Pe).transpose(),mt.decompose(A,M,k),L.push(ve),re.push(A.x,A.y,A.z),he.push(M.x,M.y,M.z,M.w),ke.push(k.x,k.y,k.z)}return re.length>0&&T.push(new zh(C+".position",L,re)),he.length>0&&T.push(new Nc(C+".quaternion",L,he)),ke.length>0&&T.push(new zh(C+".scale",L,ke)),T}function P(E,T,$){let C,L=!0,re,he;for(re=0,he=E.length;re<he;re++)C=E[re],C.value[T]===void 0?C.value[T]=null:L=!1;if(L===!0)for(re=0,he=E.length;re<he;re++)C=E[re],C.value[T]=$;else N(E,T)}function N(E,T){let $,C;for(let L=0,re=E.length;L<re;L++){const he=E[L];if(he.value[T]===null){if($=D(E,L,T),C=U(E,L,T),$===null){he.value[T]=C.value[T];continue}if(C===null){he.value[T]=$.value[T];continue}G(he,$,C,T)}}}function D(E,T,$){for(;T>=0;){const C=E[T];if(C.value[$]!==null)return C;T--}return null}function U(E,T,$){for(;T<E.length;){const C=E[T];if(C.value[$]!==null)return C;T++}return null}function G(E,T,$,C){if($.time-T.time===0){E.value[C]=T.value[C];return}E.value[C]=(E.time-T.time)*($.value[C]-T.value[C])/($.time-T.time)+T.value[C]}function B(E){const T={name:E.getAttribute("id")||"default",start:parseFloat(E.getAttribute("start")||0),end:parseFloat(E.getAttribute("end")||0),animations:[]};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"instance_animation":T.animations.push(a(L.getAttribute("url")));break}}Be.clips[E.getAttribute("id")]=T}function Q(E){const T=[],$=E.name,C=E.end-E.start||-1,L=E.animations;for(let re=0,he=L.length;re<he;re++){const ke=x(L[re]);for(let Me=0,Re=ke.length;Me<Re;Me++)T.push(ke[Me])}return new y3($,C,T)}function j(E){return v(Be.clips[E],Q)}function X(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"skin":T.id=a(L.getAttribute("source")),T.skin=ne(L);break;case"morph":T.id=a(L.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}Be.controllers[E.getAttribute("id")]=T}function ne(E){const T={sources:{}};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"bind_shape_matrix":T.bindShapeMatrix=s(L.textContent);break;case"source":const re=L.getAttribute("id");T.sources[re]=ye(L);break;case"joints":T.joints=ge(L);break;case"vertex_weights":T.vertexWeights=pe(L);break}}return T}function ge(E){const T={inputs:{}};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"input":const re=L.getAttribute("semantic"),he=a(L.getAttribute("source"));T.inputs[re]=he;break}}return T}function pe(E){const T={inputs:{}};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"input":const re=L.getAttribute("semantic"),he=a(L.getAttribute("source")),ke=parseInt(L.getAttribute("offset"));T.inputs[re]={id:he,offset:ke};break;case"vcount":T.vcount=o(L.textContent);break;case"v":T.v=o(L.textContent);break}}return T}function V(E){const T={id:E.id},$=Be.geometries[T.id];return E.skin!==void 0&&(T.skin=Y(E.skin),$.sources.skinIndices=T.skin.indices,$.sources.skinWeights=T.skin.weights),T}function Y(E){const T={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},$=E.sources,C=E.vertexWeights,L=C.vcount,re=C.v,he=C.inputs.JOINT.offset,ke=C.inputs.WEIGHT.offset,Me=E.sources[E.joints.inputs.JOINT],Re=E.sources[E.joints.inputs.INV_BIND_MATRIX],Ue=$[C.inputs.WEIGHT.id].array;let ve=0,Pe,Oe,He;for(Pe=0,He=L.length;Pe<He;Pe++){const bt=L[Pe],gt=[];for(Oe=0;Oe<bt;Oe++){const pt=re[ve+he],_t=re[ve+ke],Yi=Ue[_t];gt.push({index:pt,weight:Yi}),ve+=2}for(gt.sort(ze),Oe=0;Oe<4;Oe++){const pt=gt[Oe];pt!==void 0?(T.indices.array.push(pt.index),T.weights.array.push(pt.weight)):(T.indices.array.push(0),T.weights.array.push(0))}}for(E.bindShapeMatrix?T.bindMatrix=new Rt().fromArray(E.bindShapeMatrix).transpose():T.bindMatrix=new Rt().identity(),Pe=0,He=Me.array.length;Pe<He;Pe++){const bt=Me.array[Pe],gt=new Rt().fromArray(Re.array,Pe*Re.stride).transpose();T.joints.push({name:bt,boneInverse:gt})}return T;function ze(bt,gt){return gt.weight-bt.weight}}function ae(E){return v(Be.controllers[E],V)}function J(E){const T={init_from:r(E,"init_from")[0].textContent};Be.images[E.getAttribute("id")]=T}function z(E){return E.build!==void 0?E.build:E.init_from}function _e(E){const T=Be.images[E];return T!==void 0?v(T,z):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",E),null)}function ee(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"profile_COMMON":T.profile=te(L);break}}Be.effects[E.getAttribute("id")]=T}function te(E){const T={surfaces:{},samplers:{}};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"newparam":be(L,T);break;case"technique":T.technique=Ae(L);break;case"extra":T.extra=ft(L);break}}return T}function be(E,T){const $=E.getAttribute("sid");for(let C=0,L=E.childNodes.length;C<L;C++){const re=E.childNodes[C];if(re.nodeType===1)switch(re.nodeName){case"surface":T.surfaces[$]=oe(re);break;case"sampler2D":T.samplers[$]=Te(re);break}}}function oe(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"init_from":T.init_from=L.textContent;break}}return T}function Te(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"source":T.source=L.textContent;break}}return T}function Ae(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"constant":case"lambert":case"blinn":case"phong":T.type=L.nodeName,T.parameters=Qe(L);break;case"extra":T.extra=ft(L);break}}return T}function Qe(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":T[L.nodeName]=Ze(L);break;case"transparent":T[L.nodeName]={opaque:L.hasAttribute("opaque")?L.getAttribute("opaque"):"A_ONE",data:Ze(L)};break}}return T}function Ze(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"color":T[L.nodeName]=s(L.textContent);break;case"float":T[L.nodeName]=parseFloat(L.textContent);break;case"texture":T[L.nodeName]={id:L.getAttribute("texture"),extra:ht(L)};break}}return T}function ht(E){const T={technique:{}};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"extra":wt(L,T);break}}return T}function wt(E,T){for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"technique":st(L,T);break}}}function st(E,T){for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":T.technique[L.nodeName]=parseFloat(L.textContent);break;case"wrapU":case"wrapV":L.textContent.toUpperCase()==="TRUE"?T.technique[L.nodeName]=1:L.textContent.toUpperCase()==="FALSE"?T.technique[L.nodeName]=0:T.technique[L.nodeName]=parseInt(L.textContent);break;case"bump":T[L.nodeName]=O(L);break}}}function ft(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"technique":T.technique=Ft(L);break}}return T}function Ft(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"double_sided":T[L.nodeName]=parseInt(L.textContent);break;case"bump":T[L.nodeName]=O(L);break}}return T}function O(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"texture":T[L.nodeName]={id:L.getAttribute("texture"),texcoord:L.getAttribute("texcoord"),extra:ht(L)};break}}return T}function R(E){return E}function se(E){return v(Be.effects[E],R)}function xe(E){const T={name:E.getAttribute("name")};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"instance_effect":T.url=a(L.getAttribute("url"));break}}Be.materials[E.getAttribute("id")]=T}function we(E){let T,$=E.slice((E.lastIndexOf(".")-1>>>0)+2);switch($=$.toLowerCase(),$){case"tga":T=bu;break;default:T=dg}return T}function Se(E){const T=se(E.url),$=T.profile.technique;let C;switch($.type){case"phong":case"blinn":C=new h_;break;case"lambert":C=new Yle;break;default:C=new mo;break}C.name=E.name||"";function L(Me,Re=null){const Ue=T.profile.samplers[Me.id];let ve=null;if(Ue!==void 0){const Pe=T.profile.surfaces[Ue.source];ve=_e(Pe.init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),ve=_e(Me.id);if(ve!==null){const Pe=we(ve);if(Pe!==void 0){const Oe=Pe.load(ve),He=Me.extra;if(He!==void 0&&He.technique!==void 0&&c(He.technique)===!1){const ze=He.technique;Oe.wrapS=ze.wrapU?Bo:Hr,Oe.wrapT=ze.wrapV?Bo:Hr,Oe.offset.set(ze.offsetU||0,ze.offsetV||0),Oe.repeat.set(ze.repeatU||1,ze.repeatV||1)}else Oe.wrapS=Bo,Oe.wrapT=Bo;return Re!==null&&(Oe.encoding=Re),Oe}else return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",ve),null}else return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",Me.id),null}const re=$.parameters;for(const Me in re){const Re=re[Me];switch(Me){case"diffuse":Re.color&&C.color.fromArray(Re.color),Re.texture&&(C.map=L(Re.texture,Wt));break;case"specular":Re.color&&C.specular&&C.specular.fromArray(Re.color),Re.texture&&(C.specularMap=L(Re.texture));break;case"bump":Re.texture&&(C.normalMap=L(Re.texture));break;case"ambient":Re.texture&&(C.lightMap=L(Re.texture,Wt));break;case"shininess":Re.float&&C.shininess&&(C.shininess=Re.float);break;case"emission":Re.color&&C.emissive&&C.emissive.fromArray(Re.color),Re.texture&&(C.emissiveMap=L(Re.texture,Wt));break}}C.color.convertSRGBToLinear(),C.specular&&C.specular.convertSRGBToLinear(),C.emissive&&C.emissive.convertSRGBToLinear();let he=re.transparent,ke=re.transparency;if(ke===void 0&&he&&(ke={float:1}),he===void 0&&ke&&(he={opaque:"A_ONE",data:{color:[1,1,1,1]}}),he&&ke)if(he.data.texture)C.transparent=!0;else{const Me=he.data.color;switch(he.opaque){case"A_ONE":C.opacity=Me[3]*ke.float;break;case"RGB_ZERO":C.opacity=1-Me[0]*ke.float;break;case"A_ZERO":C.opacity=1-Me[3]*ke.float;break;case"RGB_ONE":C.opacity=Me[0]*ke.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',he.opaque)}C.opacity<1&&(C.transparent=!0)}if($.extra!==void 0&&$.extra.technique!==void 0){const Me=$.extra.technique;for(const Re in Me){const Ue=Me[Re];switch(Re){case"double_sided":C.side=Ue===1?ws:qo;break;case"bump":C.normalMap=L(Ue.texture),C.normalScale=new Nt(1,1);break}}}return C}function F(E){return v(Be.materials[E],Se)}function de(E){const T={name:E.getAttribute("name")};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"optics":T.optics=ie(L);break}}Be.cameras[E.getAttribute("id")]=T}function ie(E){for(let T=0;T<E.childNodes.length;T++){const $=E.childNodes[T];switch($.nodeName){case"technique_common":return Ee($)}}return{}}function Ee(E){const T={};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];switch(C.nodeName){case"perspective":case"orthographic":T.technique=C.nodeName,T.parameters=Ne(C);break}}return T}function Ne(E){const T={};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];switch(C.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":T[C.nodeName]=parseFloat(C.textContent);break}}return T}function Ie(E){let T;switch(E.optics.technique){case"perspective":T=new dr(E.optics.parameters.yfov,E.optics.parameters.aspect_ratio,E.optics.parameters.znear,E.optics.parameters.zfar);break;case"orthographic":let $=E.optics.parameters.ymag,C=E.optics.parameters.xmag;const L=E.optics.parameters.aspect_ratio;C=C===void 0?$*L:C,$=$===void 0?C/L:$,C*=.5,$*=.5,T=new PM(-C,C,$,-$,E.optics.parameters.znear,E.optics.parameters.zfar);break;default:T=new dr;break}return T.name=E.name||"",T}function $e(E){const T=Be.cameras[E];return T!==void 0?v(T,Ie):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",E),null)}function Le(E){let T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"technique_common":T=Ge(L);break}}Be.lights[E.getAttribute("id")]=T}function Ge(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"directional":case"point":case"spot":case"ambient":T.technique=L.nodeName,T.parameters=dt(L)}}return T}function dt(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"color":const re=s(L.textContent);T.color=new Et().fromArray(re).convertSRGBToLinear();break;case"falloff_angle":T.falloffAngle=parseFloat(L.textContent);break;case"quadratic_attenuation":const he=parseFloat(L.textContent);T.distance=he?Math.sqrt(1/he):0;break}}return T}function Tt(E){let T;switch(E.technique){case"directional":T=new D8;break;case"point":T=new IM;break;case"spot":T=new I8;break;case"ambient":T=new cce;break}return E.parameters.color&&T.color.copy(E.parameters.color),E.parameters.distance&&(T.distance=E.parameters.distance),T}function H(E){const T=Be.lights[E];return T!==void 0?v(T,Tt):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",E),null)}function ce(E){const T={name:E.getAttribute("name"),sources:{},vertices:{},primitives:[]},$=r(E,"mesh")[0];if($!==void 0){for(let C=0;C<$.childNodes.length;C++){const L=$.childNodes[C];if(L.nodeType!==1)continue;const re=L.getAttribute("id");switch(L.nodeName){case"source":T.sources[re]=ye(L);break;case"vertices":T.vertices=Ce(L);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",L.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":T.primitives.push(Fe(L));break;default:console.log(L)}}Be.geometries[E.getAttribute("id")]=T}}function ye(E){const T={array:[],stride:3};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"float_array":T.array=s(C.textContent);break;case"Name_array":T.array=n(C.textContent);break;case"technique_common":const L=r(C,"accessor")[0];L!==void 0&&(T.stride=parseInt(L.getAttribute("stride")));break}}return T}function Ce(E){const T={};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];C.nodeType===1&&(T[C.getAttribute("semantic")]=a(C.getAttribute("source")))}return T}function Fe(E){const T={type:E.nodeName,material:E.getAttribute("material"),count:parseInt(E.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"input":const re=a(L.getAttribute("source")),he=L.getAttribute("semantic"),ke=parseInt(L.getAttribute("offset")),Me=parseInt(L.getAttribute("set")),Re=Me>0?he+Me:he;T.inputs[Re]={id:re,offset:ke},T.stride=Math.max(T.stride,ke+1),he==="TEXCOORD"&&(T.hasUV=!0);break;case"vcount":T.vcount=o(L.textContent);break;case"p":T.p=o(L.textContent);break}}return T}function vt(E){const T={};for(let $=0;$<E.length;$++){const C=E[$];T[C.type]===void 0&&(T[C.type]=[]),T[C.type].push(C)}return T}function St(E){let T=0;for(let $=0,C=E.length;$<C;$++)E[$].hasUV===!0&&T++;T>0&&T<E.length&&(E.uvsNeedsFix=!0)}function Dt(E){const T={},$=E.sources,C=E.vertices,L=E.primitives;if(L.length===0)return{};const re=vt(L);for(const he in re){const ke=re[he];St(ke),T[he]=Fi(ke,$,C)}return T}function Fi(E,T,$){const C={},L={array:[],stride:0},re={array:[],stride:0},he={array:[],stride:0},ke={array:[],stride:0},Me={array:[],stride:0},Re={array:[],stride:4},Ue={array:[],stride:4},ve=new sn,Pe=[];let Oe=0;for(let He=0;He<E.length;He++){const ze=E[He],bt=ze.inputs;let gt=0;switch(ze.type){case"lines":case"linestrips":gt=ze.count*2;break;case"triangles":gt=ze.count*3;break;case"polylist":for(let pt=0;pt<ze.count;pt++){const _t=ze.vcount[pt];switch(_t){case 3:gt+=3;break;case 4:gt+=6;break;default:gt+=(_t-2)*3;break}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",ze.type)}ve.addGroup(Oe,gt,He),Oe+=gt,ze.material&&Pe.push(ze.material);for(const pt in bt){const _t=bt[pt];switch(pt){case"VERTEX":for(const Yi in $){const mi=$[Yi];switch(Yi){case"POSITION":const Nn=L.array.length;if(at(ze,T[mi],_t.offset,L.array),L.stride=T[mi].stride,T.skinWeights&&T.skinIndices&&(at(ze,T.skinIndices,_t.offset,Re.array),at(ze,T.skinWeights,_t.offset,Ue.array)),ze.hasUV===!1&&E.uvsNeedsFix===!0){const OS=(L.array.length-Nn)/L.stride;for(let fg=0;fg<OS;fg++)he.array.push(0,0)}break;case"NORMAL":at(ze,T[mi],_t.offset,re.array),re.stride=T[mi].stride;break;case"COLOR":at(ze,T[mi],_t.offset,Me.array),Me.stride=T[mi].stride;break;case"TEXCOORD":at(ze,T[mi],_t.offset,he.array),he.stride=T[mi].stride;break;case"TEXCOORD1":at(ze,T[mi],_t.offset,ke.array),he.stride=T[mi].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',Yi)}}break;case"NORMAL":at(ze,T[_t.id],_t.offset,re.array),re.stride=T[_t.id].stride;break;case"COLOR":at(ze,T[_t.id],_t.offset,Me.array,!0),Me.stride=T[_t.id].stride;break;case"TEXCOORD":at(ze,T[_t.id],_t.offset,he.array),he.stride=T[_t.id].stride;break;case"TEXCOORD1":at(ze,T[_t.id],_t.offset,ke.array),ke.stride=T[_t.id].stride;break}}}return L.array.length>0&&ve.setAttribute("position",new hi(L.array,L.stride)),re.array.length>0&&ve.setAttribute("normal",new hi(re.array,re.stride)),Me.array.length>0&&ve.setAttribute("color",new hi(Me.array,Me.stride)),he.array.length>0&&ve.setAttribute("uv",new hi(he.array,he.stride)),ke.array.length>0&&ve.setAttribute("uv2",new hi(ke.array,ke.stride)),Re.array.length>0&&ve.setAttribute("skinIndex",new hi(Re.array,Re.stride)),Ue.array.length>0&&ve.setAttribute("skinWeight",new hi(Ue.array,Ue.stride)),C.data=ve,C.type=E[0].type,C.materialKeys=Pe,C}function at(E,T,$,C,L=!1){const re=E.p,he=E.stride,ke=E.vcount;function Me(ve){let Pe=re[ve+$]*Ue;const Oe=Pe+Ue;for(;Pe<Oe;Pe++)C.push(Re[Pe]);if(L){const He=C.length-Ue-1;ga.setRGB(C[He+0],C[He+1],C[He+2]).convertSRGBToLinear(),C[He+0]=ga.r,C[He+1]=ga.g,C[He+2]=ga.b}}const Re=T.array,Ue=T.stride;if(E.vcount!==void 0){let ve=0;for(let Pe=0,Oe=ke.length;Pe<Oe;Pe++){const He=ke[Pe];if(He===4){const ze=ve+he*0,bt=ve+he*1,gt=ve+he*2,pt=ve+he*3;Me(ze),Me(bt),Me(pt),Me(bt),Me(gt),Me(pt)}else if(He===3){const ze=ve+he*0,bt=ve+he*1,gt=ve+he*2;Me(ze),Me(bt),Me(gt)}else if(He>4)for(let ze=1,bt=He-2;ze<=bt;ze++){const gt=ve+he*0,pt=ve+he*ze,_t=ve+he*(ze+1);Me(gt),Me(pt),Me(_t)}ve+=he*He}}else for(let ve=0,Pe=re.length;ve<Pe;ve+=he)Me(ve)}function ei(E){return v(Be.geometries[E],Dt)}function fi(E){const T={name:E.getAttribute("name")||"",joints:{},links:[]};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"technique_common":mu(C,T);break}}Be.kinematicsModels[E.getAttribute("id")]=T}function Cn(E){return E.build!==void 0?E.build:E}function pa(E){return v(Be.kinematicsModels[E],Cn)}function mu(E,T){for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"joint":T.joints[C.getAttribute("sid")]=gu(C);break;case"link":T.links.push(I(C));break}}}function gu(E){let T;for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"prismatic":case"revolute":T=_u(C);break}}return T}function _u(E){const T={sid:E.getAttribute("sid"),name:E.getAttribute("name")||"",axis:new fe,limits:{min:0,max:0},type:E.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"axis":const L=s(C.textContent);T.axis.fromArray(L);break;case"limits":const re=C.getElementsByTagName("max")[0],he=C.getElementsByTagName("min")[0];T.limits.max=parseFloat(re.textContent),T.limits.min=parseFloat(he.textContent);break}}return T.limits.min>=T.limits.max&&(T.static=!0),T.middlePosition=(T.limits.min+T.limits.max)/2,T}function I(E){const T={sid:E.getAttribute("sid"),name:E.getAttribute("name")||"",attachments:[],transforms:[]};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"attachment_full":T.attachments.push(Z(C));break;case"matrix":case"translate":case"rotate":T.transforms.push(le(C));break}}return T}function Z(E){const T={joint:E.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"link":T.links.push(I(C));break;case"matrix":case"translate":case"rotate":T.transforms.push(le(C));break}}return T}function le(E){const T={type:E.nodeName},$=s(E.textContent);switch(T.type){case"matrix":T.obj=new Rt,T.obj.fromArray($).transpose();break;case"translate":T.obj=new fe,T.obj.fromArray($);break;case"rotate":T.obj=new fe,T.obj.fromArray($),T.angle=$p.degToRad($[3]);break}return T}function K(E){const T={name:E.getAttribute("name")||"",rigidBodies:{}};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"rigid_body":T.rigidBodies[C.getAttribute("name")]={},ue(C,T.rigidBodies[C.getAttribute("name")]);break}}Be.physicsModels[E.getAttribute("id")]=T}function ue(E,T){for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"technique_common":De(C,T);break}}}function De(E,T){for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"inertia":T.inertia=s(C.textContent);break;case"mass":T.mass=s(C.textContent)[0];break}}}function je(E){const T={bindJointAxis:[]};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"bind_joint_axis":T.bindJointAxis.push(We(C));break}}Be.kinematicsScenes[a(E.getAttribute("url"))]=T}function We(E){const T={target:E.getAttribute("target").split("/").pop()};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"axis":const L=C.getElementsByTagName("param")[0];T.axis=L.textContent;const re=T.axis.split("inst_").pop().split("axis")[0];T.jointIndex=re.substring(0,re.length-1);break}}return T}function Je(E){return E.build!==void 0?E.build:E}function ot(E){return v(Be.kinematicsScenes[E],Je)}function tt(){const E=Object.keys(Be.kinematicsModels)[0],T=Object.keys(Be.kinematicsScenes)[0],$=Object.keys(Be.visualScenes)[0];if(E===void 0||T===void 0)return;const C=pa(E),L=ot(T),re=Pn($),he=L.bindJointAxis,ke={};for(let Ue=0,ve=he.length;Ue<ve;Ue++){const Pe=he[Ue],Oe=Ot.querySelector('[sid="'+Pe.target+'"]');if(Oe){const He=Oe.parentElement;Me(Pe.jointIndex,He)}}function Me(Ue,ve){const Pe=ve.getAttribute("name"),Oe=C.joints[Ue];re.traverse(function(He){He.name===Pe&&(ke[Ue]={object:He,transforms:et(ve),joint:Oe,position:Oe.zeroPosition})})}const Re=new Rt;pg={joints:C&&C.joints,getJointValue:function(Ue){const ve=ke[Ue];if(ve)return ve.position;console.warn("THREE.ColladaLoader: Joint "+Ue+" doesn't exist.")},setJointValue:function(Ue,ve){const Pe=ke[Ue];if(Pe){const Oe=Pe.joint;if(ve>Oe.limits.max||ve<Oe.limits.min)console.warn("THREE.ColladaLoader: Joint "+Ue+" value "+ve+" outside of limits (min: "+Oe.limits.min+", max: "+Oe.limits.max+").");else if(Oe.static)console.warn("THREE.ColladaLoader: Joint "+Ue+" is static.");else{const He=Pe.object,ze=Oe.axis,bt=Pe.transforms;mt.identity();for(let gt=0;gt<bt.length;gt++){const pt=bt[gt];if(pt.sid&&pt.sid.indexOf(Ue)!==-1)switch(Oe.type){case"revolute":mt.multiply(Re.makeRotationAxis(ze,$p.degToRad(ve)));break;case"prismatic":mt.multiply(Re.makeTranslation(ze.x*ve,ze.y*ve,ze.z*ve));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+Oe.type);break}else switch(pt.type){case"matrix":mt.multiply(pt.obj);break;case"translate":mt.multiply(Re.makeTranslation(pt.obj.x,pt.obj.y,pt.obj.z));break;case"scale":mt.scale(pt.obj);break;case"rotate":mt.multiply(Re.makeRotationAxis(pt.obj,pt.angle));break}}He.matrix.copy(mt),He.matrix.decompose(He.position,He.quaternion,He.scale),ke[Ue].position=ve}}else console.log("THREE.ColladaLoader: "+Ue+" does not exist.")}}}function et(E){const T=[],$=Ot.querySelector('[id="'+E.id+'"]');for(let C=0;C<$.childNodes.length;C++){const L=$.childNodes[C];if(L.nodeType!==1)continue;let re,he;switch(L.nodeName){case"matrix":re=s(L.textContent);const ke=new Rt().fromArray(re).transpose();T.push({sid:L.getAttribute("sid"),type:L.nodeName,obj:ke});break;case"translate":case"scale":re=s(L.textContent),he=new fe().fromArray(re),T.push({sid:L.getAttribute("sid"),type:L.nodeName,obj:he});break;case"rotate":re=s(L.textContent),he=new fe().fromArray(re);const Me=$p.degToRad(re[3]);T.push({sid:L.getAttribute("sid"),type:L.nodeName,obj:he,angle:Me});break}}return T}function Mt(E){const T=E.getElementsByTagName("node");for(let $=0;$<T.length;$++){const C=T[$];C.hasAttribute("id")===!1&&C.setAttribute("id",l())}}const mt=new Rt,Bt=new fe;function Mi(E){const T={name:E.getAttribute("name")||"",type:E.getAttribute("type"),id:E.getAttribute("id"),sid:E.getAttribute("sid"),matrix:new Rt,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType!==1)continue;let L;switch(C.nodeName){case"node":T.nodes.push(C.getAttribute("id")),Mi(C);break;case"instance_camera":T.instanceCameras.push(a(C.getAttribute("url")));break;case"instance_controller":T.instanceControllers.push(kt(C));break;case"instance_light":T.instanceLights.push(a(C.getAttribute("url")));break;case"instance_geometry":T.instanceGeometries.push(kt(C));break;case"instance_node":T.instanceNodes.push(a(C.getAttribute("url")));break;case"matrix":L=s(C.textContent),T.matrix.multiply(mt.fromArray(L).transpose()),T.transforms[C.getAttribute("sid")]=C.nodeName;break;case"translate":L=s(C.textContent),Bt.fromArray(L),T.matrix.multiply(mt.makeTranslation(Bt.x,Bt.y,Bt.z)),T.transforms[C.getAttribute("sid")]=C.nodeName;break;case"rotate":L=s(C.textContent);const re=$p.degToRad(L[3]);T.matrix.multiply(mt.makeRotationAxis(Bt.fromArray(L),re)),T.transforms[C.getAttribute("sid")]=C.nodeName;break;case"scale":L=s(C.textContent),T.matrix.scale(Bt.fromArray(L)),T.transforms[C.getAttribute("sid")]=C.nodeName;break;case"extra":break;default:console.log(C)}}return Ln(T.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",T.id):Be.nodes[T.id]=T,T}function kt(E){const T={id:a(E.getAttribute("url")),materials:{},skeletons:[]};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];switch(C.nodeName){case"bind_material":const L=C.getElementsByTagName("instance_material");for(let re=0;re<L.length;re++){const he=L[re],ke=he.getAttribute("symbol"),Me=he.getAttribute("target");T.materials[ke]=a(Me)}break;case"skeleton":T.skeletons.push(a(C.textContent));break}}return T}function nt(E,T){const $=[],C=[];let L,re,he;for(L=0;L<E.length;L++){const Re=E[L];let Ue;if(Ln(Re))Ue=Lt(Re),$n(Ue,T,$);else if(ti(Re)){const ve=Be.visualScenes[Re].children;for(let Pe=0;Pe<ve.length;Pe++){const Oe=ve[Pe];if(Oe.type==="JOINT"){const He=Lt(Oe.id);$n(He,T,$)}}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",Re)}for(L=0;L<T.length;L++)for(re=0;re<$.length;re++)if(he=$[re],he.bone.name===T[L].name){C[L]=he,he.processed=!0;break}for(L=0;L<$.length;L++)he=$[L],he.processed===!1&&(C.push(he),he.processed=!0);const ke=[],Me=[];for(L=0;L<C.length;L++)he=C[L],ke.push(he.bone),Me.push(he.boneInverse);return new S8(ke,Me)}function $n(E,T,$){E.traverse(function(C){if(C.isBone===!0){let L;for(let re=0;re<T.length;re++){const he=T[re];if(he.name===C.name){L=he.boneInverse;break}}L===void 0&&(L=new Rt),$.push({bone:C,boneInverse:L,processed:!1})}})}function Ws(E){const T=[],$=E.matrix,C=E.nodes,L=E.type,re=E.instanceCameras,he=E.instanceControllers,ke=E.instanceLights,Me=E.instanceGeometries,Re=E.instanceNodes;for(let ve=0,Pe=C.length;ve<Pe;ve++)T.push(Lt(C[ve]));for(let ve=0,Pe=re.length;ve<Pe;ve++){const Oe=$e(re[ve]);Oe!==null&&T.push(Oe.clone())}for(let ve=0,Pe=he.length;ve<Pe;ve++){const Oe=he[ve],He=ae(Oe.id),ze=ei(He.id),bt=xr(ze,Oe.materials),gt=Oe.skeletons,pt=He.skin.joints,_t=nt(gt,pt);for(let Yi=0,mi=bt.length;Yi<mi;Yi++){const Nn=bt[Yi];Nn.isSkinnedMesh&&(Nn.bind(_t,He.skin.bindMatrix),Nn.normalizeSkinWeights()),T.push(Nn)}}for(let ve=0,Pe=ke.length;ve<Pe;ve++){const Oe=H(ke[ve]);Oe!==null&&T.push(Oe.clone())}for(let ve=0,Pe=Me.length;ve<Pe;ve++){const Oe=Me[ve],He=ei(Oe.id),ze=xr(He,Oe.materials);for(let bt=0,gt=ze.length;bt<gt;bt++)T.push(ze[bt])}for(let ve=0,Pe=Re.length;ve<Pe;ve++)T.push(Lt(Re[ve]).clone());let Ue;if(C.length===0&&T.length===1)Ue=T[0];else{Ue=L==="JOINT"?new v$:new Di;for(let ve=0;ve<T.length;ve++)Ue.add(T[ve])}return Ue.name=L==="JOINT"?E.sid:E.name,Ue.matrix.copy($),Ue.matrix.decompose(Ue.position,Ue.quaternion,Ue.scale),Ue}const qi=new mo({color:16711935});function fa(E,T){const $=[];for(let C=0,L=E.length;C<L;C++){const re=T[E[C]];re===void 0?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",E[C]),$.push(qi)):$.push(F(re))}return $}function xr(E,T){const $=[];for(const C in E){const L=E[C],re=fa(L.materialKeys,T);if(re.length===0&&(C==="lines"||C==="linestrips"?re.push(new am):re.push(new h_)),C==="lines"||C==="linestrips")for(let Re=0,Ue=re.length;Re<Ue;Re++){const ve=re[Re];if(ve.isMeshPhongMaterial===!0||ve.isMeshLambertMaterial===!0){const Pe=new am;Pe.color.copy(ve.color),Pe.opacity=ve.opacity,Pe.transparent=ve.transparent,re[Re]=Pe}}const he=L.data.attributes.skinIndex!==void 0,ke=re.length===1?re[0]:re;let Me;switch(C){case"lines":Me=new b$(L.data,ke);break;case"linestrips":Me=new $y(L.data,ke);break;case"triangles":case"polylist":he?Me=new w8(L.data,ke):Me=new Gi(L.data,ke);break}$.push(Me)}return $}function Ln(E){return Be.nodes[E]!==void 0}function Lt(E){return v(Be.nodes[E],Ws)}function Xi(E){const T={name:E.getAttribute("name"),children:[]};Mt(E);const $=r(E,"node");for(let C=0;C<$.length;C++)T.children.push(Mi($[C]));Be.visualScenes[E.getAttribute("id")]=T}function Rn(E){const T=new Di;T.name=E.name;const $=E.children;for(let C=0;C<$.length;C++){const L=$[C];T.add(Lt(L.id))}return T}function ti(E){return Be.visualScenes[E]!==void 0}function Pn(E){return v(Be.visualScenes[E],Rn)}function yu(E){const T=r(E,"instance_visual_scene")[0];return Pn(a(T.getAttribute("url")))}function ma(){const E=Be.clips;if(c(E)===!0){if(c(Be.animations)===!1){const T=[];for(const $ in Be.animations){const C=x($);for(let L=0,re=C.length;L<re;L++)T.push(C[L])}_a.push(new y3("default",-1,T))}}else for(const T in E)_a.push(j(T))}function NS(E){let T="";const $=[E];for(;$.length;){const C=$.shift();C.nodeType===Node.TEXT_NODE?T+=C.textContent:(T+=`
`,$.push.apply($,C.childNodes))}return T.trim()}if(e.length===0)return{scene:new y$};const ug=new DOMParser().parseFromString(e,"application/xml"),Ot=r(ug,"COLLADA")[0],vu=ug.getElementsByTagName("parsererror")[0];if(vu!==void 0){const E=r(vu,"div")[0];let T;return E?T=E.textContent:T=NS(vu),console.error(`THREE.ColladaLoader: Failed to parse collada file.
`,T),null}const IS=Ot.getAttribute("version");console.debug("THREE.ColladaLoader: File version",IS);const hg=u(r(Ot,"asset")[0]),dg=new w$(this.manager);dg.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);let bu;gI&&(bu=new gI(this.manager),bu.setPath(this.resourcePath||t));const ga=new Et,_a=[];let pg={},DS=0;const Be={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};f(Ot,"library_animations","animation",m),f(Ot,"library_animation_clips","animation_clip",B),f(Ot,"library_controllers","controller",X),f(Ot,"library_images","image",J),f(Ot,"library_effects","effect",ee),f(Ot,"library_materials","material",xe),f(Ot,"library_cameras","camera",de),f(Ot,"library_lights","light",Le),f(Ot,"library_geometries","geometry",ce),f(Ot,"library_nodes","node",Mi),f(Ot,"library_visual_scenes","visual_scene",Xi),f(Ot,"library_kinematics_models","kinematics_model",fi),f(Ot,"library_physics_models","physics_model",K),f(Ot,"scene","instance_kinematics_scene",je),g(Be.animations,_),g(Be.clips,Q),g(Be.controllers,V),g(Be.images,z),g(Be.effects,R),g(Be.materials,Se),g(Be.cameras,Ie),g(Be.lights,Tt),g(Be.geometries,Dt),g(Be.visualScenes,Rn),ma(),tt();const ya=yu(r(Ot,"scene")[0]);return ya.animations=_a,hg.upAxis==="Z_UP"&&(console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."),ya.rotation.set(-Math.PI/2,0,0)),ya.scale.multiplyScalar(hg.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),_a},kinematics:pg,library:Be,scene:ya}}};const _I=new fe,rue=new RM,x1=new Rt,Hl=new Rt,w1=new Pr,M1=new fe(1,1,1),S1=new fe;let UM=class extends $i{constructor(...e){super(...e),this.urdfNode=null,this.urdfName=""}copy(e,t){return super.copy(e,t),this.urdfNode=e.urdfNode,this.urdfName=e.urdfName,this}},nue=class extends UM{constructor(...e){super(...e),this.isURDFCollider=!0,this.type="URDFCollider"}},sue=class extends UM{constructor(...e){super(...e),this.isURDFVisual=!0,this.type="URDFVisual"}},j8=class extends UM{constructor(...e){super(...e),this.isURDFLink=!0,this.type="URDFLink"}},H8=class extends UM{get jointType(){return this._jointType}set jointType(e){if(this.jointType!==e)switch(this._jointType=e,this.matrixWorldNeedsUpdate=!0,e){case"fixed":this.jointValue=[];break;case"continuous":case"revolute":case"prismatic":this.jointValue=new Array(1).fill(0);break;case"planar":this.jointValue=new Array(3).fill(0),this.axis=new fe(0,0,1);break;case"floating":this.jointValue=new Array(6).fill(0);break}}get angle(){return this.jointValue[0]}constructor(...e){super(...e),this.isURDFJoint=!0,this.type="URDFJoint",this.jointValue=null,this.jointType="fixed",this.axis=new fe(1,0,0),this.limit={lower:0,upper:0},this.ignoreLimits=!1,this.origPosition=null,this.origQuaternion=null,this.mimicJoints=[]}copy(e,t){return super.copy(e,t),this.jointType=e.jointType,this.axis=e.axis.clone(),this.limit.lower=e.limit.lower,this.limit.upper=e.limit.upper,this.ignoreLimits=!1,this.jointValue=[...e.jointValue],this.origPosition=e.origPosition?e.origPosition.clone():null,this.origQuaternion=e.origQuaternion?e.origQuaternion.clone():null,this.mimicJoints=[...e.mimicJoints],this}setJointValue(...e){e=e.map(r=>r===null?null:parseFloat(r)),(!this.origPosition||!this.origQuaternion)&&(this.origPosition=this.position.clone(),this.origQuaternion=this.quaternion.clone());let t=!1;switch(this.mimicJoints.forEach(r=>{t=r.updateFromMimickedJoint(...e)||t}),this.jointType){case"fixed":return t;case"continuous":case"revolute":{let r=e[0];return r==null||r===this.jointValue[0]?t:(!this.ignoreLimits&&this.jointType==="revolute"&&(r=Math.min(this.limit.upper,r),r=Math.max(this.limit.lower,r)),this.quaternion.setFromAxisAngle(this.axis,r).premultiply(this.origQuaternion),this.jointValue[0]!==r?(this.jointValue[0]=r,this.matrixWorldNeedsUpdate=!0,!0):t)}case"prismatic":{let r=e[0];return r==null||r===this.jointValue[0]?t:(this.ignoreLimits||(r=Math.min(this.limit.upper,r),r=Math.max(this.limit.lower,r)),this.position.copy(this.origPosition),_I.copy(this.axis).applyEuler(this.rotation),this.position.addScaledVector(_I,r),this.jointValue[0]!==r?(this.jointValue[0]=r,this.matrixWorldNeedsUpdate=!0,!0):t)}case"floating":return this.jointValue.every((r,n)=>e[n]===r||e[n]===null)?t:(this.jointValue[0]=e[0]!==null?e[0]:this.jointValue[0],this.jointValue[1]=e[1]!==null?e[1]:this.jointValue[1],this.jointValue[2]=e[2]!==null?e[2]:this.jointValue[2],this.jointValue[3]=e[3]!==null?e[3]:this.jointValue[3],this.jointValue[4]=e[4]!==null?e[4]:this.jointValue[4],this.jointValue[5]=e[5]!==null?e[5]:this.jointValue[5],Hl.compose(this.origPosition,this.origQuaternion,M1),w1.setFromEuler(rue.set(this.jointValue[3],this.jointValue[4],this.jointValue[5],"XYZ")),S1.set(this.jointValue[0],this.jointValue[1],this.jointValue[2]),x1.compose(S1,w1,M1),Hl.premultiply(x1),this.position.setFromMatrixPosition(Hl),this.rotation.setFromRotationMatrix(Hl),this.matrixWorldNeedsUpdate=!0,!0);case"planar":return this.jointValue.every((r,n)=>e[n]===r||e[n]===null)?t:(this.jointValue[0]=e[0]!==null?e[0]:this.jointValue[0],this.jointValue[1]=e[1]!==null?e[1]:this.jointValue[1],this.jointValue[2]=e[2]!==null?e[2]:this.jointValue[2],Hl.compose(this.origPosition,this.origQuaternion,M1),w1.setFromAxisAngle(this.axis,this.jointValue[2]),S1.set(this.jointValue[0],this.jointValue[1],0),x1.compose(S1,w1,M1),Hl.premultiply(x1),this.position.setFromMatrixPosition(Hl),this.rotation.setFromRotationMatrix(Hl),this.matrixWorldNeedsUpdate=!0,!0)}return t}},yI=class extends H8{constructor(...e){super(...e),this.type="URDFMimicJoint",this.mimicJoint=null,this.offset=0,this.multiplier=1}updateFromMimickedJoint(...e){const t=e.map(r=>r*this.multiplier+this.offset);return super.setJointValue(...t)}copy(e,t){return super.copy(e,t),this.mimicJoint=e.mimicJoint,this.offset=e.offset,this.multiplier=e.multiplier,this}},oue=class extends j8{constructor(...e){super(...e),this.isURDFRobot=!0,this.urdfNode=null,this.urdfRobotNode=null,this.robotName=null,this.links=null,this.joints=null,this.colliders=null,this.visual=null,this.frames=null}copy(e,t){super.copy(e,t),this.urdfRobotNode=e.urdfRobotNode,this.robotName=e.robotName,this.links={},this.joints={},this.colliders={},this.visual={},this.traverse(r=>{r.isURDFJoint&&r.urdfName in e.joints&&(this.joints[r.urdfName]=r),r.isURDFLink&&r.urdfName in e.links&&(this.links[r.urdfName]=r),r.isURDFCollider&&r.urdfName in e.colliders&&(this.colliders[r.urdfName]=r),r.isURDFVisual&&r.urdfName in e.visual&&(this.visual[r.urdfName]=r)});for(const r in this.joints)this.joints[r].mimicJoints=this.joints[r].mimicJoints.map(n=>this.joints[n.name]);return this.frames={...this.colliders,...this.visual,...this.links,...this.joints},this}getFrame(e){return this.frames[e]}setJointValue(e,...t){const r=this.joints[e];return r?r.setJointValue(...t):!1}setJointValues(e){let t=!1;for(const r in e){const n=e[r];Array.isArray(n)?t=this.setJointValue(r,...n)||t:t=this.setJointValue(r,n)||t}return t}};const aT=new Pr,vI=new RM;function qd(i){return i?i.trim().split(/\s+/g).map(e=>parseFloat(e)):[0,0,0]}function bI(i,e,t=!1){t||i.rotation.set(0,0,0),vI.set(e[0],e[1],e[2],"ZYX"),aT.setFromEuler(vI),aT.multiply(i.quaternion),i.quaternion.copy(aT)}let G8=class{constructor(e){this.manager=e||P8,this.loadMeshCb=this.defaultMeshLoader.bind(this),this.parseVisual=!0,this.parseCollision=!1,this.packages="",this.workingPath="",this.fetchOptions={}}loadAsync(e){return new Promise((t,r)=>{this.load(e,t,null,r)})}load(e,t,r,n){const s=this.manager,o=dy.extractUrlBase(e),a=this.manager.resolveURL(e);s.itemStart(a),fetch(a,this.fetchOptions).then(l=>{if(l.ok)return r&&r(null),l.text();throw new Error(`URDFLoader: Failed to load url '${a}' with error code ${l.status} : ${l.statusText}.`)}).then(l=>{this.workingPath===""&&(this.workingPath=o);const c=this.parse(l);t(c),s.itemEnd(a)}).catch(l=>{n?n(l):console.error("URDFLoader: Error loading file.",l),s.itemError(a),s.itemEnd(a)})}parse(e){const t=this.packages,r=this.loadMeshCb,n=this.parseVisual,s=this.parseCollision,o=this.workingPath,a=this.manager,l={},c={},u={};function h(y){if(!/^package:\/\//.test(y))return o?o+y:y;const[_,x]=y.replace(/^package:\/\//,"").split(/\/(.+)/);if(typeof t=="string")return t.endsWith(_)?t+"/"+x:t+"/"+_+"/"+x;if(t instanceof Function)return t(_)+"/"+x;if(typeof t=="object")return _ in t?t[_]+"/"+x:(console.error(`URDFLoader : ${_} not found in provided package list.`),null)}function d(y){let _;y instanceof Document?_=[...y.children]:y instanceof Element?_=[y]:_=[...new DOMParser().parseFromString(y,"text/xml").children];const x=_.filter(w=>w.nodeName==="robot").pop();return f(x)}function f(y){const _=[...y.children],x=_.filter(P=>P.nodeName.toLowerCase()==="link"),w=_.filter(P=>P.nodeName.toLowerCase()==="joint"),S=_.filter(P=>P.nodeName.toLowerCase()==="material"),A=new oue;A.robotName=y.getAttribute("name"),A.urdfRobotNode=y,S.forEach(P=>{const N=P.getAttribute("name");u[N]=m(P)});const k={},M={};x.forEach(P=>{const N=P.getAttribute("name"),D=y.querySelector(`child[link="${N}"]`)===null;l[N]=v(P,k,M,D?A:null)}),w.forEach(P=>{const N=P.getAttribute("name");c[N]=g(P)}),A.joints=c,A.links=l,A.colliders=M,A.visual=k;const b=Object.values(c);return b.forEach(P=>{P instanceof yI&&c[P.mimicJoint].mimicJoints.push(P)}),b.forEach(P=>{const N=new Set,D=U=>{if(N.has(U))throw new Error("URDFLoader: Detected an infinite loop of mimic joints.");N.add(U),U.mimicJoints.forEach(G=>{D(G)})};D(P)}),A.frames={...M,...k,...l,...c},A}function g(y){const _=[...y.children],x=y.getAttribute("type");let w;const S=_.find(N=>N.nodeName.toLowerCase()==="mimic");S?(w=new yI,w.mimicJoint=S.getAttribute("joint"),w.multiplier=parseFloat(S.getAttribute("multiplier")||1),w.offset=parseFloat(S.getAttribute("offset")||0)):w=new H8,w.urdfNode=y,w.name=y.getAttribute("name"),w.urdfName=w.name,w.jointType=x;let A=null,k=null,M=[0,0,0],b=[0,0,0];_.forEach(N=>{const D=N.nodeName.toLowerCase();D==="origin"?(M=qd(N.getAttribute("xyz")),b=qd(N.getAttribute("rpy"))):D==="child"?k=l[N.getAttribute("link")]:D==="parent"?A=l[N.getAttribute("link")]:D==="limit"&&(w.limit.lower=parseFloat(N.getAttribute("lower")||w.limit.lower),w.limit.upper=parseFloat(N.getAttribute("upper")||w.limit.upper))}),A.add(w),w.add(k),bI(w,b),w.position.set(M[0],M[1],M[2]);const P=_.filter(N=>N.nodeName.toLowerCase()==="axis")[0];if(P){const N=P.getAttribute("xyz").split(/\s+/g).map(D=>parseFloat(D));w.axis=new fe(N[0],N[1],N[2]),w.axis.normalize()}return w}function v(y,_,x,w=null){w===null&&(w=new j8);const S=[...y.children];return w.name=y.getAttribute("name"),w.urdfName=w.name,w.urdfNode=y,n&&S.filter(A=>A.nodeName.toLowerCase()==="visual").forEach(A=>{const k=p(A,u);if(w.add(k),A.hasAttribute("name")){const M=A.getAttribute("name");k.name=M,k.urdfName=M,_[M]=k}}),s&&S.filter(A=>A.nodeName.toLowerCase()==="collision").forEach(A=>{const k=p(A);if(w.add(k),A.hasAttribute("name")){const M=A.getAttribute("name");k.name=M,k.urdfName=M,x[M]=k}}),w}function m(y){const _=[...y.children],x=new h_;return x.name=y.getAttribute("name")||"",_.forEach(w=>{const S=w.nodeName.toLowerCase();if(S==="color"){const A=w.getAttribute("rgba").split(/\s/g).map(k=>parseFloat(k));x.color.setRGB(A[0],A[1],A[2]),x.opacity=A[3],x.transparent=A[3]<1,x.depthWrite=!x.transparent}else if(S==="texture"){const A=w.getAttribute("filename");if(A){const k=new w$(a),M=h(A);x.map=k.load(M),x.map.colorSpace=so}}}),x}function p(y,_={}){const x=y.nodeName.toLowerCase()==="collision",w=[...y.children];let S=null;const A=w.filter(M=>M.nodeName.toLowerCase()==="material")[0];if(A){const M=A.getAttribute("name");M&&M in _?S=_[M]:S=m(A)}else S=new h_;const k=x?new nue:new sue;return k.urdfNode=y,w.forEach(M=>{const b=M.nodeName.toLowerCase();if(b==="geometry"){const P=M.children[0].nodeName.toLowerCase();if(P==="mesh"){const N=M.children[0].getAttribute("filename"),D=h(N);if(D!==null){const U=M.children[0].getAttribute("scale");if(U){const G=qd(U);k.scale.set(G[0],G[1],G[2])}r(D,a,(G,B)=>{B?console.error("URDFLoader: Error loading mesh.",B):G&&(G instanceof Gi&&(G.material=S),G.position.set(0,0,0),G.quaternion.identity(),k.add(G))})}}else if(P==="box"){const N=new Gi;N.geometry=new Cy(1,1,1),N.material=S;const D=qd(M.children[0].getAttribute("size"));N.scale.set(D[0],D[1],D[2]),k.add(N)}else if(P==="sphere"){const N=new Gi;N.geometry=new Xle(1,30,30),N.material=S;const D=parseFloat(M.children[0].getAttribute("radius"))||0;N.scale.set(D,D,D),k.add(N)}else if(P==="cylinder"){const N=new Gi;N.geometry=new A8(1,1,1,30),N.material=S;const D=parseFloat(M.children[0].getAttribute("radius"))||0,U=parseFloat(M.children[0].getAttribute("length"))||0;N.scale.set(D,U,D),N.rotation.set(Math.PI/2,0,0),k.add(N)}}else if(b==="origin"){const P=qd(M.getAttribute("xyz")),N=qd(M.getAttribute("rpy"));k.position.set(P[0],P[1],P[2]),k.rotation.set(0,0,0),bI(k,N)}}),k}return d(e)}defaultMeshLoader(e,t,r){/\.stl$/i.test(e)?new tue(t).load(e,n=>{const s=new Gi(n,new h_);r(s)}):/\.dae$/i.test(e)?new iue(t).load(e,n=>r(n.scene)):console.warn(`URDFLoader: Could not load model at ${e}.
No loader available`)}};var aue=Object.defineProperty,Nm=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&aue(e,t,n),n},lT,xI,cT;const Qh=(cT=class extends ut{constructor(){super(...arguments),Tr(this,lT),this.urdfConfigs=k$,this.name=this.urdfConfigs[0].name,this.jointValues={},this.pose=[0,0,0],this._translation=[0,0,0],this._rotation=[0,0,0,0],this.loader=new E$,this.group=new Di}getUrdfConfig(){return this.urdfConfigs.find(({name:i})=>i===this.name)??this.urdfConfigs[0]}getField(){const i=this.closest("frc-field3d");if(i)return i}static updatePose(i,e){const[t,r,n]=e.translation;i.position.set(t,r,n),i.rotation.setFromQuaternion(OM(e.rotation))}loadRobotModel(){const i=this.getField(),e=this.getUrdfConfig();if(!i)return;const t=i.getFieldGroup();t.remove(this.group),this.object&&this.group.remove(this.object);const r=new x$,n=new G8(r),s=V8(e.src??"");n.packages={"":cm(i.assetPathPrefix??"",s)};const o=new Promise(c=>{if(e.src)n.load(cm(i.assetPathPrefix??"",e.src),u=>{c(u)});else{const u=n.parse(e.content??"");c(u)}}),a=new Di;this.group=a,t.add(this.group);const l=new Di;this.object=l,a.add(l),l.rotation.setFromQuaternion(vh(e.rotations)),l.position.set(...e.position),o.then(c=>{this.robot=c,this.updateJoints(),l.add(c),el(this,lT,xI).call(this)})}updateJoints(){var i;(i=this.robot)==null||i.setJointValues(this.jointValues)}firstUpdated(){this.updateUrdfConfigs(),this.renderObject();const i=this.closest("frc-field3d");i==null||i.addEventListener("urdfConfigsChange",()=>{this.updateUrdfConfigs()})}updated(i){if(i.has("name")&&this.loadRobotModel(),i.has("jointValues")&&this.updateJoints(),i.has("pose")){const[e=0,t=0,r=0]=this.pose;this._translation=[e,t],this._rotation=r}}updateUrdfConfigs(){const i=this.getField(),e=i==null?void 0:i.urdfConfigs;e!=null&&e.length&&e!==this.urdfConfigs&&(this.urdfConfigs=e,this.urdfConfigs.some(t=>t.name===this.name)||(this.name=this.urdfConfigs[0].name))}renderObject(){this.group&&cT.updatePose(this.group,{translation:this._translation.length===2?[...this._translation,0]:this._translation,rotation:typeof this._rotation=="number"?d_([{axis:"z",degrees:this._rotation}]):this._rotation}),requestAnimationFrame(()=>{this.renderObject()})}},lT=new WeakSet,xI=function(){this.dispatchEvent(new CustomEvent("urdfLoad",{detail:{urdf:this.robot},bubbles:!0,composed:!0}))},cT);Nm([zi()],Qh.prototype,"urdfConfigs");Nm([q({type:String})],Qh.prototype,"name");Nm([q({type:Object,attribute:"joint-values"})],Qh.prototype,"jointValues");Nm([q({type:Array})],Qh.prototype,"pose");Nm([zi()],Qh.prototype,"_translation");Nm([zi()],Qh.prototype,"_rotation");let lue=Qh;customElements.get("frc-field3d-urdf")||customElements.define("frc-field3d-urdf",lue);var cue=Object.defineProperty,Os=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&cue(e,t,n),n},uT,wI,Au;const is=(Au=class extends ut{constructor(){super(...arguments),Tr(this,uT),this.fieldConfigs=Zce,this.objectConfigs=B8,this.urdfConfigs=k$,this.game=this.fieldConfigs[0].game,this.origin="red",this.backgroundColor="black",this.enableVR=!1,this.fixedCamera=!1,this.ORBIT_FIELD_DEFAULT_TARGET=new fe(0,.5,0),this.ORBIT_FIELD_DEFAULT_POSITION=new fe(0,6,-12),this.WPILIB_ROTATION=vh([{axis:"x",degrees:-90},{axis:"y",degrees:180}]),this.cameraPoseObject=new $i,this.scene=new y$,this.loader=new E$}getFieldConfig(){return this.fieldConfigs.find(({game:i})=>i===this.game)??this.fieldConfigs[0]}getCamera(){const i=this.getBoundingClientRect();return new dr(50,i.width/i.height,.1,100)}static getOrbitControls(i,e){const t=new z8(i,e);return t.maxDistance=30,t.enabled=!0,t.update(),t}static addLights(i){const e=new IM(16777215,.2);e.position.set(0,10,0),i.add(e);const t=16777215,r=4473924,n=1,s=new N8(t,r,n);i.add(s)}initRenderer(){if(!this.canvas)return;this.renderer=new _$({antialias:!0,canvas:this.canvas});const i=this.getBoundingClientRect();this.renderer.setSize(i.width,i.height),this.vrButton=DM.createButton(this.renderer),this.renderer.xr.enabled=this.enableVR,this.renderer.setAnimationLoop(()=>this.renderField())}initScene(){this.wpilibCoordinateGroup=new Di,this.scene.add(this.wpilibCoordinateGroup),this.wpilibCoordinateGroup.rotation.setFromQuaternion(this.WPILIB_ROTATION),this.wpilibFieldCoordinateGroup=new Di,this.wpilibCoordinateGroup.add(this.wpilibFieldCoordinateGroup),this.wpilibFieldCoordinateGroup.add(this.cameraPoseObject)}updateCanvasSize(){var i;const e=this.getBoundingClientRect();(i=this.renderer)==null||i.setSize(e.width,e.height),this.camera.aspect=e.width/e.height,this.camera.updateProjectionMatrix()}static adjustMaterials(i){i.traverse(e=>{const t=e;if(t.isMesh&&t.material instanceof Ly){const r=t.material;r.metalness=0,r.roughness=1}})}static updatePose(i,e){const[t,r,n]=e.translation;i.position.set(t,r,n),i.rotation.setFromQuaternion(OM(e.rotation))}loadFieldModel(i){this.fieldObject&&this.wpilibCoordinateGroup.remove(this.fieldObject);const e=cm(this.assetPathPrefix??"",i.src);this.loader.load(e,t=>{this.fieldObject=t.scene,this.wpilibCoordinateGroup.add(t.scene),Au.adjustMaterials(t.scene),t.scene.rotation.setFromQuaternion(vh(i.rotations))})}getFieldGroup(){return this.wpilibFieldCoordinateGroup}createFieldObject(i){return new Jce(this,i==null?void 0:i.onCreate,i==null?void 0:i.onRemove)}firstUpdated(){this.initScene(),this.initRenderer(),this.camera=this.getCamera(),this.controls=Au.getOrbitControls(this.camera,this.canvas),this.camera.position.copy(this.ORBIT_FIELD_DEFAULT_POSITION),this.controls.target.copy(this.ORBIT_FIELD_DEFAULT_TARGET),Au.addLights(this.scene),new ResizeObserver(()=>{this.updateCanvasSize()}).observe(this)}updated(i){if(i.has("fieldConfigs")&&(this.fieldConfigs.some(e=>e.game===this.game)||(this.game=this.fieldConfigs[0].game),this.loadFieldModel(this.getFieldConfig())),i.has("game")&&this.loadFieldModel(this.getFieldConfig()),i.has("backgroundColor")&&(this.scene.background=new Et(this.backgroundColor)),i.has("origin")){const e=this.getFieldConfig();if(e){const t=this.origin!=="red";this.wpilibFieldCoordinateGroup.setRotationFromAxisAngle(new fe(0,0,1),t?0:Math.PI),this.wpilibFieldCoordinateGroup.position.set(Mr(e.size[0]/2,e.unit,"m")*(t?-1:1),Mr(e.size[1]/2,e.unit,"m")*(t?-1:1),0)}}if(i.has("enableVR")&&(this.enableVR?this.container.appendChild(this.vrButton):this.vrButton.remove(),this.renderer&&(this.renderer.xr.enabled=this.enableVR)),i.has("fixedCamera")&&(this.controls.enabled=!this.fixedCamera),(i.has("cameraPose")||i.has("fixedCamera"))&&this.fixedCamera){const e=this.cameraPose?F8(this.cameraPose):A$();el(this,uT,wI).call(this,e)}i.has("urdfConfigs")&&this.dispatchEvent(new CustomEvent("urdfConfigsChange",{detail:{urdfConfigs:this.urdfConfigs},bubbles:!0,composed:!0}))}renderField(){var i;(i=this.renderer)==null||i.render(this.scene,this.camera),this.fixedCamera||this.controls.update()}connectedCallback(){super.connectedCallback(),this.initRenderer()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=this.renderer)==null||i.dispose(),this.renderer=void 0}render(){return Ye` <div class="container">
      <canvas></canvas>
    </div>`}},uT=new WeakSet,wI=function(i){Au.updatePose(this.cameraPoseObject,i);const e=new fe;this.cameraPoseObject.getWorldPosition(e);const t=new Pr;this.cameraPoseObject.getWorldQuaternion(t),this.camera.position.copy(e),this.camera.quaternion.copy(t.multiply(vh([{axis:"z",degrees:-90},{axis:"y",degrees:-90}]))),this.camera.updateMatrixWorld()},Au.styles=$t`
    :host {
      position: relative;
      display: block;
      width: 700px;
      height: 400px;
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
  `,Au);Os([q({type:Array})],is.prototype,"fieldConfigs");Os([q({type:Array})],is.prototype,"objectConfigs");Os([q({type:Array})],is.prototype,"urdfConfigs");Os([q({type:String})],is.prototype,"game");Os([q({type:String})],is.prototype,"origin");Os([q({type:String,attribute:"background-color"})],is.prototype,"backgroundColor");Os([q({type:Boolean,attribute:"enable-vr"})],is.prototype,"enableVR");Os([q({type:String})],is.prototype,"assetPathPrefix");Os([q({type:Array,attribute:"camera-pose"})],is.prototype,"cameraPose");Os([q({type:Boolean,attribute:"fixed-camera"})],is.prototype,"fixedCamera");Os([ni("canvas")],is.prototype,"canvas");Os([ni(".container")],is.prototype,"container");let uue=is;customElements.get("frc-field3d")||customElements.define("frc-field3d",uue);var hue=Object.defineProperty,Wc=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&hue(e,t,n),n},hT,MI,Dg;const wl=(Dg=class extends ut{constructor(){super(...arguments),Tr(this,hT),this.urdfConfigs=k$,this.name=this.urdfConfigs[0].name,this.backgroundColor="black",this.enableVR=!1,this.angles={},this.scene=new y$,this.group=new Di}getCamera(){const i=this.getBoundingClientRect(),e=new dr(50,i.width/i.height,.1,100);return e.position.set(1,1,1),e.lookAt(0,0,.5),e.up.set(0,0,1),e}static getOrbitControls(i,e){const t=new z8(i,e);return t.maxDistance=30,t.enabled=!0,t.update(),t}static addLights(i){const e=new IM(16777215,.2);e.position.set(0,10,0),i.add(e);const t=16777215,r=4473924,n=1,s=new N8(t,r,n);i.add(s)}initRenderer(){if(!this.canvas)return;this.renderer=new _$({antialias:!0,canvas:this.canvas});const i=this.getBoundingClientRect();this.renderer.setSize(i.width,i.height),this.vrButton=DM.createButton(this.renderer),this.renderer.xr.enabled=this.enableVR,this.renderer.setAnimationLoop(()=>this.renderField())}updateCanvasSize(){var i;const e=this.getBoundingClientRect();(i=this.renderer)==null||i.setSize(e.width,e.height),this.camera.aspect=e.width/e.height,this.camera.updateProjectionMatrix()}firstUpdated(){this.initRenderer(),this.camera=this.getCamera(),this.controls=Dg.getOrbitControls(this.camera,this.canvas),Dg.addLights(this.scene);const i=new m8(5,5,20,20),e=new mo({color:65280,side:ws,wireframe:!0}),t=new Gi(i,e);this.scene.add(t),new ResizeObserver(()=>{this.updateCanvasSize()}).observe(this)}getUrdfConfig(){return this.urdfConfigs.find(({name:i})=>i===this.name)??this.urdfConfigs[0]}updateAngles(){var i;(i=this.robot)==null||i.setAngles(this.angles)}loadRobotModel(){const i=this.getUrdfConfig(),e=new x$,t=new G8(e),r=V8(i.src??"");t.packages={"":cm(this.assetPathPrefix??"",r)};const n=new Promise(a=>{if(i.src)t.load(cm(this.assetPathPrefix??"",i.src),l=>{a(l)});else{const l=t.parse(i.content??"");a(l)}}),s=new Di;this.group=s,this.scene.add(this.group);const o=new Di;this.object=o,s.add(o),o.rotation.setFromQuaternion(vh(i.rotations)),o.position.set(...i.position),n.then(a=>{this.robot=a,this.updateAngles(),o.add(a),el(this,hT,MI).call(this)})}updated(i){(i.has("urdfConfigs")||i.has("name"))&&(this.urdfConfigs.some(e=>e.name===this.name)||(this.name=this.urdfConfigs[0].name),this.loadRobotModel()),i.has("backgroundColor")&&(this.scene.background=new Et(this.backgroundColor)),i.has("enableVR")&&(this.enableVR?this.container.appendChild(this.vrButton):this.vrButton.remove(),this.renderer&&(this.renderer.xr.enabled=this.enableVR))}renderField(){var i;(i=this.renderer)==null||i.render(this.scene,this.camera),this.controls.update()}connectedCallback(){super.connectedCallback(),this.initRenderer()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=this.renderer)==null||i.dispose(),this.renderer=void 0}render(){return Ye` <div class="container">
      <canvas></canvas>
    </div>`}},hT=new WeakSet,MI=function(){this.dispatchEvent(new CustomEvent("urdfLoad",{detail:{urdf:this.robot}}))},Dg.styles=$t`
    :host {
      position: relative;
      display: block;
      width: 700px;
      height: 400px;
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
  `,Dg);Wc([q({type:Array})],wl.prototype,"urdfConfigs");Wc([q({type:String})],wl.prototype,"name");Wc([q({type:String,attribute:"background-color"})],wl.prototype,"backgroundColor");Wc([q({type:Boolean,attribute:"enable-vr"})],wl.prototype,"enableVR");Wc([q({type:String})],wl.prototype,"assetPathPrefix");Wc([q({type:Object})],wl.prototype,"angles");Wc([ni("canvas")],wl.prototype,"canvas");Wc([ni(".container")],wl.prototype,"container");let due=wl;customElements.get("frc-urdf")||customElements.define("frc-urdf",due);var pue=Object.defineProperty,W8=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&pue(e,t,n),n},ex,Cf,rh,$f,nh,M3,q8;let C$=class extends ut{constructor(){super(...arguments),Tr(this,M3),Tr(this,ex),Tr(this,Cf),Tr(this,rh),Tr(this,$f),Tr(this,nh),this.pose=[0,0,0],this._pose3d=A$()}getField(){return this.closest("frc-field3d")}loadRobotModel(){ai(this,ex).create()}firstUpdated(){const e=new Cy(.2,.2,.2),t=new qle(e),r=new am({color:16044581,linewidth:4}),n=new b$(t,r);tn(this,Cf,n),tn(this,rh,new rT(new fe(1,0,0).normalize(),new fe(0,0,0),.3,16711680,.1,.05)),tn(this,$f,new rT(new fe(1,0,0).normalize(),new fe(0,0,0),.3,16711680,.1,.05)),tn(this,nh,new rT(new fe(1,0,0).normalize(),new fe(0,0,0),.3,16711680,.1,.05)),tn(this,ex,this.getField().createFieldObject({onCreate:s=>{const o=s.getGroup();o.add(ai(this,Cf)),o.add(ai(this,rh)),o.add(ai(this,$f)),o.add(ai(this,nh))}}))}updated(e){e.has("pose")&&(this._pose3d=F8(this.pose),el(this,M3,q8).call(this))}};ex=new WeakMap,Cf=new WeakMap,rh=new WeakMap,$f=new WeakMap,nh=new WeakMap,M3=new WeakSet,q8=function(){const i=OM(this._pose3d.rotation),[e,t,r]=this._pose3d.translation;ai(this,Cf).position.set(e,t,r),ai(this,Cf).rotation.setFromQuaternion(i),ai(this,rh).rotation.setFromQuaternion(i),ai(this,rh).rotateZ(-Math.PI/2),ai(this,rh).position.set(e,t,r),ai(this,$f).rotation.setFromQuaternion(i),ai(this,$f).position.set(e,t,r),ai(this,nh).setRotationFromQuaternion(i),ai(this,nh).rotateX(Math.PI/2),ai(this,nh).position.set(e,t,r)};W8([q({type:Array})],C$.prototype,"pose");W8([zi()],C$.prototype,"_pose3d");customElements.get("frc-field3d-pose-visualizer")||customElements.define("frc-field3d-pose-visualizer",C$);var fue=Object.defineProperty,Im=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&fue(e,t,n),n},sh,Lf,tx,oh,S3,X8,SI,Y8;let ed=class extends ut{constructor(){super(...arguments),Tr(this,oh),Tr(this,sh),Tr(this,Lf),Tr(this,tx),this.name="",this.pose=[0,0,0],this.sourceProvider="",this.sourceKey="",tn(this,sh,[]),tn(this,Lf,!1)}getJointValues(){const e=el(this,oh,S3).call(this);if(!(e!=null&&e.hasChildren())){const o={};return ai(this,sh).forEach(a=>{o[a]=0}),o}const t=[this.sourceKey,"joints"].join("/"),r=this.store.getSource(this.sourceProvider,t),n=(r==null?void 0:r.getJson(!1))??{},s={};return ai(this,sh).forEach(o=>{s[o]=n[o]??0}),s}createRenderRoot(){return this}updated(e){(e.has("sourceProvider")||e.has("sourceKey")||e.has("store"))&&(tn(this,Lf,!1),el(this,oh,X8).call(this))}render(){return Ye`
      <frc-field3d-urdf
        @urdfLoad=${el(this,oh,Y8)}
        .jointValues=${this.getJointValues()}
        .pose=${this.pose}
        .name=${this.name}
      ></frc-field3d-urdf>
    `}};sh=new WeakMap,Lf=new WeakMap,tx=new WeakMap,oh=new WeakSet,S3=function(){const{provider:i,store:e,sourceProvider:t,sourceKey:r}=this;if(!(!i||!e||!t||!r))return e.getSource(t,r)},X8=function(){var i,e;(i=ai(this,tx))==null||i.call(this),!(!this.sourceProvider||!this.sourceKey)&&tn(this,tx,(e=this.store)==null?void 0:e.subscribe(this.sourceProvider,this.sourceKey,()=>{el(this,oh,SI).call(this),this.requestUpdate()},!0))},SI=function(){ai(this,Lf)||!el(this,oh,S3).call(this)||(ai(this,sh).forEach(i=>{var e;const t=[this.sourceKey,"joints",i].join("/"),r=this.store.getSource(this.sourceProvider,t);r!=null&&r.hasValue()||(e=this.provider)==null||e.userUpdate(t,0)}),tn(this,Lf,!0))},Y8=function(i){const e=i.detail.urdf;tn(this,sh,Object.keys(e.joints).sort()),Object.values(e.joints).forEach(t=>{t.ignoreLimits=!0}),this.requestUpdate()};Im([q({type:String})],ed.prototype,"name");Im([q({type:Array})],ed.prototype,"pose");Im([q({type:Object,attribute:!1})],ed.prototype,"provider");Im([q({type:Object,attribute:!1})],ed.prototype,"store");Im([q({type:String,attribute:"source-provider"})],ed.prototype,"sourceProvider");Im([q({type:String,attribute:"source-key"})],ed.prototype,"sourceKey");customElements.get("frc-field3d-urdf-wrapper")||customElements.define("frc-field3d-urdf-wrapper",ed);const ix={check:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z","check-circle":"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z",close:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z",edit:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"};var mue=Object.defineProperty,zM=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&mue(e,t,n),n};const gue={dashboard:{displayName:"Icon",defaultHtml:`<frc-icon icon="${Object.keys(ix)[0]}"></frc-icon>`},properties:{color:{type:"String",defaultValue:"#000000",input:{type:"ColorPicker"}},icon:{type:"String",defaultValue:Object.keys(ix)[0],input:{type:"StringDropdown",allowCustomValues:!1,getOptions(){return["Custom"].concat(Object.keys(ix))}}},svgPath:{type:"String",attribute:"svg-path",defaultValue:"",input:{isDisabled({icon:i}){return i!=="Custom"}}},viewBox:{type:"String",attribute:"view-box",defaultValue:"0 0 24 24",input:{isDisabled({icon:i}){return i!=="Custom"}}}}},K8=class extends ut{constructor(){super(...arguments),this.color="#000000",this.icon="",this.svgPath="",this.viewBox="0 0 24 24"}render(){const e=this.icon==="Custom"||!this.icon;return Ye`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="24px"
        viewBox=${e?this.viewBox:"0 0 24 24"}
        width="24px"
        fill=${this.color}
      >
        <path d=${e?this.svgPath:ix[this.icon]} />
      </svg>
    `}};K8.styles=$t`
    :host {
      display: inline-block;
      width: 24px;
      height: 24px;
    }

    svg {
      width: 100%;
      height: 100%;
    }
  `;let Iy=K8;zM([q({type:String})],Iy.prototype,"color");zM([q({type:String})],Iy.prototype,"icon");zM([q({type:String,attribute:"svg-path"})],Iy.prototype,"svgPath");zM([q({type:String,attribute:"view-box"})],Iy.prototype,"viewBox");customElements.get("frc-icon")||customElements.define("frc-icon",Iy);var _ue=Object.defineProperty,qc=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&_ue(e,t,n),n};const yue={dashboard:{displayName:"Number Bar"},properties:{value:{type:"Number",primary:!0},max:{type:"Number",defaultValue:1},min:{type:"Number",defaultValue:-1},center:{type:"Number"},precision:{type:"Number",defaultValue:2},hideText:{type:"Boolean",attribute:"hide-text"},numTickMarks:{type:"Number",defaultValue:3,attribute:"num-tick-marks"},unit:{type:"String"}}};function vue(i,e,t){return Math.min(t,Math.max(i,e))}const Z8=class extends ut{constructor(){super(...arguments),this.value=0,this.min=-1,this.max=1,this.center=0,this.precision=2,this.hideText=!1,this.numTickMarks=3,this.unit=""}render(){const e=Math.min(this.min,this.max),t=Math.max(this.min,this.max);return Ye`
      <frc-bar
        value="${this.value}"
        min="${e}"
        max="${t}"
        center="${this.center}"
        part="bar"
      >
        ${this.hideText?"":Ye`
              ${this.value.toFixed(vue(this.precision,0,100))} ${this.unit}
            `}
      </frc-bar>
      ${this.numTickMarks>0?Ye`
            <frc-axis
              part="axis"
              ticks="${this.numTickMarks}"
              min=${e}
              max=${t}
              unit="${this.unit}"
            ></frc-axis>
          `:""}
    `}};Z8.styles=[$t`
      :host {
        display: inline-block;
        width: 300px;
        height: auto;
        font-family: sans-serif;
      }

      [part='bar'] {
        width: 100%;
        margin: 0;
      }

      [part='bar'] {
        position: relative;
        height: 20px;
        border-radius: 3px;
      }

      [part='axis'] {
        width: calc(100% - 45px);
        margin: 2px auto 0;
        display: block;
      }
    `];let Eo=Z8;qc([q({type:Number})],Eo.prototype,"value");qc([q({type:Number})],Eo.prototype,"min");qc([q({type:Number})],Eo.prototype,"max");qc([q({type:Number})],Eo.prototype,"center");qc([q({type:Number})],Eo.prototype,"precision");qc([q({type:Boolean,attribute:"hide-text"})],Eo.prototype,"hideText");qc([q({type:Number,attribute:"num-tick-marks"})],Eo.prototype,"numTickMarks");qc([q({type:String})],Eo.prototype,"unit");customElements.get("frc-number-bar")||customElements.define("frc-number-bar",Eo);var bue=Object.defineProperty,Xc=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&bue(e,t,n),n};const xue={dashboard:{displayName:"Accelerometer"},properties:{value:{type:"Number",primary:!0},max:{type:"Number",defaultValue:1},min:{type:"Number",defaultValue:-1},center:{type:"Number"},precision:{type:"Number",defaultValue:2},hideText:{type:"Boolean",attribute:"hide-text"},numTickMarks:{type:"Number",defaultValue:3,attribute:"num-tick-marks"},unit:{type:"String",defaultValue:"g"}}};let Ml=class extends Eo{constructor(){super(...arguments),this.value=0,this.min=-1,this.max=1,this.center=0,this.precision=2,this.hideText=!1,this.numTickMarks=3,this.unit="g"}};Xc([q({type:Number})],Ml.prototype,"value");Xc([q({type:Number})],Ml.prototype,"min");Xc([q({type:Number})],Ml.prototype,"max");Xc([q({type:Number})],Ml.prototype,"center");Xc([q({type:Number})],Ml.prototype,"precision");Xc([q({type:Boolean,attribute:"hide-text"})],Ml.prototype,"hideText");Xc([q({type:Number,attribute:"num-tick-marks"})],Ml.prototype,"numTickMarks");Xc([q({type:String})],Ml.prototype,"unit");customElements.get("frc-accelerometer")||customElements.define("frc-accelerometer",Ml);var wue=Object.defineProperty,ia=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&wue(e,t,n),n};const Mue={dashboard:{displayName:"3-Axis Accelerometer"},properties:{x:{type:"Number"},y:{type:"Number"},z:{type:"Number"},max:{type:"Number",defaultValue:1},min:{type:"Number",defaultValue:-1},center:{type:"Number"},precision:{type:"Number",defaultValue:2},hideText:{type:"Boolean",attribute:"hide-text"},numTickMarks:{type:"Number",defaultValue:3,attribute:"num-tick-marks"},unit:{type:"String",defaultValue:"g"}}},J8=class extends ut{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0,this.min=-1,this.max=1,this.center=0,this.precision=2,this.hideText=!1,this.numTickMarks=3,this.unit="g"}renderAccelerometer(e,t){return Ye`
      <div part="accelerometer">
        <label part="label">${e}</label>
        <frc-accelerometer
          part="${e}"
          value="${this[e]||0}"
          min="${this.min}"
          max="${this.max}"
          center="${this.center}"
          precision="${this.precision}"
          ?hide-text="${this.hideText}"
          num-tick-marks="${t}"
          unit="${this.unit}"
        ></frc-accelerometer>
      </div>
    `}render(){return Ye`
      ${this.renderAccelerometer("x",0)} ${this.renderAccelerometer("y",0)}
      ${this.renderAccelerometer("z",this.numTickMarks)}
    `}};J8.styles=$t`
    :host {
      display: inline-flex;
      flex-direction: column;
      height: auto;
      font-family: sans-serif;
      width: 300px;
    }

    [part='accelerometer'] {
      width: 100%;
      display: flex;
      gap: 8px;
      align-items: center;
      margin-bottom: 10px;
    }

    [part='accelerometer']:last-child {
      margin-bottom: 0;
    }

    [part='accelerometer'] label {
      width: 10px;
      padding-top: 2px;
      font-weight: bold;
      text-transform: uppercase;
      color: var(--frc-3-axis-accelerometer-label-color, #000);
    }

    frc-accelerometer {
      width: 100%;
      flex: 1;
    }

    frc-accelerometer::part(bar) {
      width: 100%;
      margin: 0;
    }
  `;let Ao=J8;ia([q({type:Number})],Ao.prototype,"x");ia([q({type:Number})],Ao.prototype,"y");ia([q({type:Number})],Ao.prototype,"z");ia([q({type:Number})],Ao.prototype,"min");ia([q({type:Number})],Ao.prototype,"max");ia([q({type:Number})],Ao.prototype,"center");ia([q({type:Number})],Ao.prototype,"precision");ia([q({type:Boolean,attribute:"hide-text"})],Ao.prototype,"hideText");ia([q({type:Number,attribute:"num-tick-marks"})],Ao.prototype,"numTickMarks");ia([q({type:String})],Ao.prototype,"unit");customElements.get("frc-3-axis-accelerometer")||customElements.define("frc-3-axis-accelerometer",Ao);var Sue=Object.defineProperty,FM=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Sue(e,t,n),n};const Tue={dashboard:{displayName:"Basic FMS Info"},properties:{matchType:{type:"Number",attribute:"match-type"},matchNumber:{type:"Number",attribute:"match-number"},eventName:{type:"String",attribute:"event-name"},fmsControlData:{type:"Number",attribute:"fms-control-data"}}},Eue=1,Aue=2,kue=4,Cue=8,$ue=16,Lue=32,Rue=["Unknown","Practice","Qualification","Elimination"],Q8=class extends ut{constructor(){super(...arguments),this.matchType=0,this.matchNumber=0,this.eventName="",this.fmsControlData=0}getRobotState(){return this.isEnabled()?this.isTest()?"Test":this.isAuto()?"Autonomous":"Teleoperated":"Disabled"}isEnabled(){return!!(this.fmsControlData&Eue)}isAuto(){return!!(this.fmsControlData&Aue)}isTest(){return!!(this.fmsControlData&kue)}isEmergencyStopped(){return!!(this.fmsControlData&Cue)}isFmsAttached(){return!!(this.fmsControlData&$ue)}isDsAttached(){return!!(this.fmsControlData&Lue)}render(){return Ye`
      <p>
        <strong>
          <span>${this.eventName}</span>
          <span>${Rue[this.matchType]}</span>
          <span>match ${this.matchNumber}</span>
        </strong>
      </p>

      <p style="margin-bottom: 7px; font-weight: normal">
        <span style="margin-right: 5px;">
          ${this.isFmsAttached()?Ye`
                <span class="info">
                  <frc-icon icon="check" color="green"></frc-icon>
                  FMS connected
                </span>
              `:Ye`
                <span class="info">
                  <frc-icon icon="close" color="red"></frc-icon>
                  FMS disconnected
                </span>
              `}
        </span>
        <span>
          ${this.isDsAttached()?Ye`
                <span class="info">
                  <frc-icon icon="check" color="green"></frc-icon>
                  DriverStation connected
                </span>
              `:Ye`
                <span class="info">
                  <frc-icon icon="close" color="red"></frc-icon>
                  DriverStation disconnected
                </span>
              `}
        </span>
      </p>
      <p style="font-weight: normal">Robot state: ${this.getRobotState()}</p>
    `}};Q8.styles=$t`
    p {
      margin: 5px 0;
    }
    p:first-child {
      margin-top: 0;
    }
    p:last-child {
      margin: 0;
    }
    :host {
      text-align: center;
      font-size: 15px;
      display: inline-flex;
      width: auto;
      flex-direction: column;
      justify-content: center;
      font-family: sans-serif;
      color: var(--frc-basic-fms-info-text-color, #000);
    }

    .info {
      display: inline-flex;
      align-items: center;
      gap: 3px;
    }
  `;let Dy=Q8;FM([q({type:Number,attribute:"match-type"})],Dy.prototype,"matchType");FM([q({type:Number,attribute:"match-number"})],Dy.prototype,"matchNumber");FM([q({type:String,attribute:"event-name"})],Dy.prototype,"eventName");FM([q({type:Number,attribute:"fms-control-data"})],Dy.prototype,"fmsControlData");customElements.get("frc-basic-fms-info")||customElements.define("frc-basic-fms-info",Dy);var Pue=Object.defineProperty,BM=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Pue(e,t,n),n};const Nue={dashboard:{displayName:"Boolean Box"},properties:{value:{type:"Boolean",primary:!0},trueColor:{type:"String",input:{type:"ColorPicker"},defaultValue:"#00ff00",attribute:"true-color"},falseColor:{type:"String",input:{type:"ColorPicker"},defaultValue:"#ff0000",attribute:"false-color"},label:{type:"String"}}};var ka;const Oy=(ka=class extends ut{constructor(){super(...arguments),this.value=!1,this.falseColor=ka.DEFAULT_FALSE_COLOR,this.trueColor=ka.DEFAULT_TRUE_COLOR,this.label=""}updated(){const i=this.falseColor||ka.DEFAULT_FALSE_COLOR,e=this.trueColor||ka.DEFAULT_TRUE_COLOR,t=this.renderRoot.querySelector("[part=box]"),r=this.value?e:i;t.style.setProperty("--box-color",r)}render(){return Ye` <div part="box">${this.label||Ye`&nbsp;`}</div> `}},ka.DEFAULT_FALSE_COLOR="#ff0000",ka.DEFAULT_TRUE_COLOR="#00ff00",ka.styles=$t`
    :host {
      display: inline-block;
      width: 80px;
      height: 80px;
      padding: 5px;
      box-sizing: border-box;
    }

    [part='box'] {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-content: center;
      flex-wrap: wrap;
      background-color: var(--box-color);
      text-align: center;
    }
  `,ka);BM([q({type:Boolean})],Oy.prototype,"value");BM([q({type:String,attribute:"false-color"})],Oy.prototype,"falseColor");BM([q({type:String,attribute:"true-color"})],Oy.prototype,"trueColor");BM([q({type:String})],Oy.prototype,"label");let Iue=Oy;customElements.get("frc-boolean-box")||customElements.define("frc-boolean-box",Iue);var T3={exports:{}},Due=T3.exports,TI;function Oue(){return TI||(TI=1,function(i){(function(e,t){var r=t(e);i.exports?i.exports=r:e.Gauge=r})(typeof window>"u"?Due:window,function(e,t){var r=e.document,n=Array.prototype.slice,s=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||function(l){return setTimeout(l,1e3/60)};function o(l){var c=l.duration,u=1,h=60*c,d=l.start||0,f=l.end,g=f-d,v=l.step,m=l.easing||function(y){return(y/=.5)<1?.5*Math.pow(y,3):.5*(Math.pow(y-2,3)+2)};function p(){var y=u/h,_=g*m(y)+d;v(_,u),u+=1,y<1&&s(p)}s(p)}var a=function(){var l="http://www.w3.org/2000/svg",c={centerX:50,centerY:50},u={dialRadius:40,dialStartAngle:135,dialEndAngle:45,value:0,max:100,min:0,valueDialClass:"value",valueClass:"value-text",dialClass:"dial",gaugeClass:"gauge",showValue:!0,gaugeColor:null,label:function(y){return Math.round(y)}};function h(){var y=arguments[0],_=n.call(arguments,1);return _.forEach(function(x){for(var w in x)x.hasOwnProperty(w)&&(y[w]=x[w])}),y}function d(y,_,x){var w=r.createElementNS(l,y);for(var S in _)w.setAttribute(S,_[S]);return x&&x.forEach(function(A){w.appendChild(A)}),w}function f(y,_){return y*_/100}function g(y,_,x){var w=Number(y);return w>x?x:w<_?_:w}function v(y,_,x){var w=x-_,S=y-_;return 100*S/w}function m(y,_,x,w){var S=w*Math.PI/180;return{x:Math.round((y+x*Math.cos(S))*1e3)/1e3,y:Math.round((_+x*Math.sin(S))*1e3)/1e3}}function p(y,_,x){var w=c.centerX,S=c.centerY;return{end:m(w,S,y,x),start:m(w,S,y,_)}}return function(y,_){_=h({},u,_);var x=y,w=_.max,S=_.min,A=g(_.value,S,w),k=_.dialRadius,M=_.showValue,b=_.dialStartAngle,P=_.dialEndAngle,N=_.valueDialClass,D=_.valueClass;_.valueLabelClass;var U=_.dialClass,G=_.gaugeClass,B=_.color,Q,j,X=_.label,ne=_.viewBox,ge;if(b<P){console.log("WARN! startAngle < endAngle, Swapping");var pe=b;b=P,P=pe}function V(z,_e,ee,te){var be=p(z,_e,ee),oe=be.start,Te=be.end,Ae=typeof te>"u"?1:te;return["M",oe.x,oe.y,"A",z,z,0,Ae,1,Te.x,Te.y].join(" ")}function Y(z){Q=d("text",{x:50,y:50,fill:"#999",class:D,"font-size":"100%","font-family":"sans-serif","font-weight":"normal","text-anchor":"middle","alignment-baseline":"middle","dominant-baseline":"central"}),j=d("path",{class:N,fill:"none",stroke:"#666","stroke-width":2.5,d:V(k,b,b)});var _e=f(100,360-Math.abs(b-P)),ee=_e<=180?0:1,te=d("svg",{viewBox:ne||"0 0 100 100",class:G},[d("path",{class:U,fill:"none",stroke:"#eee","stroke-width":2,d:V(k,b,P,ee)}),d("g",{class:"text-container"},[Q]),j]);z.appendChild(te)}function ae(z,_e){var ee=v(z,S,w),te=f(ee,360-Math.abs(b-P)),be=te<=180?0:1;M&&(Q.textContent=X.call(_,z)),j.setAttribute("d",V(k,b,te+b,be))}function J(z,_e){var ee=B.call(_,z),te=_e*1e3,be="stroke "+te+"ms ease";j.style.stroke=ee,j.style["-webkit-transition"]=be,j.style["-moz-transition"]=be,j.style.transition=be}return ge={setMaxValue:function(z){w=z,ae(A)},setValue:function(z){A=g(z,S,w),B&&J(A,0),ae(A)},setValueAnimated:function(z,_e){var ee=A;A=g(z,S,w),ee!==A&&(B&&J(A,_e),o({start:ee||0,end:A,duration:_e||1,step:function(te,be){ae(te)}}))},getValue:function(){return A}},Y(x),ge.setValue(A),ge}}();return a})}(T3)),T3.exports}var EI,AI;function Uue(){return AI||(AI=1,EI=Oue()),EI}var zue=Uue();const Fue=LB(zue);var Bue=Object.defineProperty,VM=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Bue(e,t,n),n};const Vue={dashboard:{displayName:"Gauge"},properties:{min:{type:"Number"},max:{type:"Number",defaultValue:100},value:{type:"Number",primary:!0}}},e7=class extends ut{constructor(){super(...arguments),this.min=0,this.max=100,this.value=0}setSize(){const e=this.getBoundingClientRect(),t=e.width,r=e.height,n=Math.min(t,r);this.gaugeElement.style.width=`${n}px`}gaugeInit(){this.gaugeElement.innerHTML="",this.gauge=Fue(this.gaugeElement,{min:Math.min(this.min,this.max),max:Math.max(this.min,this.max)}),this.setSize()}firstUpdated(){this.gaugeInit(),new ResizeObserver(()=>this.setSize()).observe(this)}updated(e){var t;(e.has("min")||e.has("max"))&&this.gaugeInit(),(t=this.gauge)==null||t.setValue(this.value)}render(){return Ye`
      <div class="gauge-container-container">
        <div id="gauge" class="gauge-container"></div>
      </div>
    `}};e7.styles=$t`
    :host {
      display: inline-block;
      width: 200px;
      height: 200px;
    }

    .gauge-container-container {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .gauge-container {
      display: block;
    }

    .gauge-container > .gauge > .dial {
      stroke: #ddd;
      stroke-width: 3;
      fill: rgba(0, 0, 0, 0);
      stroke: var(--frc-gauge-color, rgb(221, 221, 221));
    }
    .gauge-container > .gauge > .value {
      stroke: var(--frc-gauge-fill-color, rgb(47, 180, 200));
      stroke-width: 3;
      fill: rgba(0, 0, 0, 0);
    }
    .gauge-container > .gauge .value-text {
      fill: var(--frc-gauge-text-color, rgb(100, 100, 100));
      font-family: sans-serif;
      font-size: 1em;
    }
  `;let Uy=e7;VM([q({type:Number})],Uy.prototype,"min");VM([q({type:Number})],Uy.prototype,"max");VM([q({type:Number})],Uy.prototype,"value");VM([ni("#gauge")],Uy.prototype,"gaugeElement");customElements.get("frc-gauge")||customElements.define("frc-gauge",Uy);function jue(i,e,t){i=+i,e=+e,t=(n=arguments.length)<2?(e=i,i=0,1):n<3?1:+t;for(var r=-1,n=Math.max(0,Math.ceil((e-i)/t))|0,s=new Array(n);++r<n;)s[r]=i+r*t;return s}var Hue=Object.defineProperty,Us=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Hue(e,t,n),n};const Gue={dashboard:{displayName:"Gyro"},properties:{value:{type:"Number",primary:!0},hideLabel:{type:"Boolean",attribute:"hide-label"},precision:{type:"Number",defaultValue:2},counterClockwise:{type:"Boolean",attribute:"counter-clockwise"},fromRadians:{type:"Boolean",attribute:"from-radians"}}};function Wue(i){return i*Math.PI/180}function kI(i){return i*180/Math.PI}function que(i,e,t){return Math.min(t,Math.max(i,e))}function Gl(i,e=!1){const t=Wue(-(i-90));return[e?-Math.cos(t):Math.cos(t),Math.sin(t)]}const t7=class extends ut{constructor(){super(...arguments),this.value=0,this.hideLabel=!1,this.precision=2,this.counterClockwise=!1,this.fromRadians=!1}setLabels(){const e=this.getGyroRadius();jr(this._labels).selectAll("text").data([0,45,90,135,180,-135,-90,-45]).join(t=>t.append("text").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size",15).attr("fill","var(--frc-gyro-color, #000)").text(r=>`${r}°`)).attr("x",t=>Gl(t,this.counterClockwise)[0]*(e+30)).attr("y",t=>-Gl(t,this.counterClockwise)[1]*(e+30))}setDialAngle(){const e=this.getGyroRadius(),t=this.fromRadians?kI(this.value):this.value;jr(this._dial).attr("x2",Gl(t,this.counterClockwise)[0]*(e-7)).attr("y2",-Gl(t,this.counterClockwise)[1]*(e-7))}addTicks(e,t,r,n){const s=this.getGyroRadius();jr(e).selectAll("line").data(jue(0,360,r)).join(o=>o.append("line").attr("stroke","var(--frc-gyro-color, #000)").attr("stroke-width",n)).attr("x1",o=>Gl(o)[0]*s).attr("y1",o=>-Gl(o)[1]*s).attr("x2",o=>Gl(o)[0]*(s+t)).attr("y2",o=>-Gl(o)[1]*(s+t))}firstUpdated(){new ResizeObserver(()=>{this.resized()}).observe(this),this.resized()}resized(){const e=this.getSize();jr(this._svg).attr("width",e).attr("height",e),jr(this._gyro).attr("transform",`translate(${e/2},${e/2})`);const t=this.getGyroRadius();jr(this._gyroEdge).attr("r",t),this.addTicks(this._minorTicks,5,5,1),this.addTicks(this._majorTicks,10,45,2),this.setLabels(),this.setDialAngle()}getSize(){const{width:e}=this.getBoundingClientRect();return e}getGyroRadius(){return this.getSize()/2-53}updated(e){(e.has("value")||e.has("fromRadians")||e.has("counterClockwise"))&&this.setDialAngle(),e.has("counterClockwise")&&this.setLabels()}render(){const e=`${(this.fromRadians?kI(this.value):this.value).toFixed(que(this.precision,0,100))}`;return Ye`
      <div>
        ${xi`
          <svg>
            <g class="gyro">
              <circle class="gyro-edge" stroke-width="2" stroke="var(--frc-gyro-color, #000)" style="fill: none"></circle>
              <g class="minor-ticks"></g>
              <g class="major-ticks"></g>
              <g class="labels"></g>
              <circle class="dial-circle" r="9"></circle>
              <line class="dial" x1="0" x2="0"></line>
            </g>
          </svg>
        `} ${this.hideLabel?null:Ye`<label>${e}&deg</label> `}
      </div>
    `}};t7.styles=$t`
    :host {
      font-family: sans-serif;
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      width: 300px;
      height: auto;
    }

    svg {
      width: 100%;
    }

    label {
      color: var(--frc-gyro-color, #000);
      text-align: center;
      display: block;
      font-size: 16px;
    }

    .dial-circle {
      fill: var(--frc-gyro-dial-color, blue);
    }

    .dial {
      stroke: var(--frc-gyro-dial-color, blue);
      stroke-width: 3;
    }
  `;let rs=t7;Us([q({type:Number})],rs.prototype,"value");Us([q({type:Boolean,attribute:"hide-label"})],rs.prototype,"hideLabel");Us([q({type:Number})],rs.prototype,"precision");Us([q({type:Boolean,attribute:"counter-clockwise"})],rs.prototype,"counterClockwise");Us([q({type:Boolean,attribute:"from-radians"})],rs.prototype,"fromRadians");Us([ni("svg")],rs.prototype,"_svg");Us([ni(".dial")],rs.prototype,"_dial");Us([ni(".gyro")],rs.prototype,"_gyro");Us([ni(".gyro-edge")],rs.prototype,"_gyroEdge");Us([ni(".minor-ticks")],rs.prototype,"_minorTicks");Us([ni(".major-ticks")],rs.prototype,"_majorTicks");Us([ni(".labels")],rs.prototype,"_labels");customElements.get("frc-gyro")||customElements.define("frc-gyro",rs);var i7=i=>{throw TypeError(i)},Xue=(i,e,t)=>e.has(i)||i7("Cannot "+t),r7=(i,e,t)=>e.has(i)?i7("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Cw=(i,e,t)=>(Xue(i,e,"access private method"),t),Yue=Object.defineProperty,Dm=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Yue(e,t,n),n};const Kue={dashboard:{displayName:"Sendable Chooser",topLevel:!1},properties:{options:{type:"Array"},selected:{type:"String",input:{type:"StringDropdown"}},default:{type:"String"},active:{type:"String"},label:{type:"String",defaultValue:"Auto Choices"}}};var E3,n7;const s7=class extends ut{constructor(){super(...arguments),r7(this,E3),this.options=[],this.selected="",this.default="",this.active="",this.label="Auto Choices"}onChange(){this.selected=this.selectElement.value,Cw(this,E3,n7).call(this)}render(){return Ye`
      <div class="container">
        ${this.label?Ye` <p>${this.label}</p> `:""}
        <div class="input-container">
          <label>
            <select @change=${this.onChange} .value=${this.selected}>
              ${this.options.map(e=>Ye`
                  <option value=${e} ?selected=${this.selected===e}>
                    ${e}
                  </option>
                `)}
            </select>
          </label>
          ${this.options.length>0?Ye`
                ${this.selected===this.active?Ye`<frc-icon icon="check" color="green"></frc-icon>`:Ye`<frc-icon icon="close" color="red"></frc-icon>`}
              `:""}
        </div>
      </div>
    `}};E3=new WeakSet,n7=function(){this.dispatchEvent(new CustomEvent("change",{detail:{selected:this.selected},bubbles:!0,composed:!0}))},s7.styles=$t`
    :host {
      display: inline-block;
      min-width: 220px;
      font-family: sans-serif;
    }

    .input-container {
      display: flex;
      align-items: flex-end;
      gap: 7px;
      width: 100%;
    }

    frc-icon {
      width: 20px;
      height: 20px;
      margin-bottom: 12px;
    }

    label {
      position: relative;
      display: inline-block;
      width: 100%;
    }

    label:after {
      content: ' ';
      position: absolute;
      right: 15px;
      top: 46%;
      margin-top: -3px;
      z-index: 2;
      pointer-events: none;
      width: 0;
      height: 0;
      border-style: solid;
      border-width: 6.9px 4px 0 4px;
      border-color: #aaa transparent transparent transparent;
      pointer-events: none;
    }

    select {
      width: 100%;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      outline: 0 none;

      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      padding: 0 30px 0 10px;

      border: 1px solid #e0e0e0;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      background: #fff;
      margin: 0 5px 5px 0;
    }

    p {
      color: var(--frc-sendable-chooser-label-color, black);
      margin: 0;
      font-size: 13px;
      padding-left: 3px;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
  `;let td=s7;Dm([q({type:Array})],td.prototype,"options");Dm([q({type:String,reflect:!0})],td.prototype,"selected");Dm([q({type:String})],td.prototype,"default");Dm([q({type:String})],td.prototype,"active");Dm([q({type:String,reflect:!0})],td.prototype,"label");Dm([ni("select",!0)],td.prototype,"selectElement");customElements.get("frc-sendable-chooser")||customElements.define("frc-sendable-chooser",td);var Zue=Object.defineProperty,Sl=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Zue(e,t,n),n};const Jue={defaultSourceKey:"/SmartDashboard/Auto choices",defaultSourceProvider:"NetworkTables",dashboard:{displayName:"Sendable Chooser"},properties:{options:{type:"Array"},selected:{type:"String",input:{type:"StringDropdown"}},default:{type:"String"},active:{type:"String"},label:{type:"String",defaultValue:"Auto Choices"},provider:{type:"SourceProvider",property:"provider"},store:{type:"Store",property:"store"},sourceProvider:{type:"String",attribute:"source-provider",input:{type:"None"}},sourceKey:{type:"String",attribute:"source-key",input:{type:"None"}}}};var p_,A3,o7;const a7=class extends ut{constructor(){super(...arguments),r7(this,p_),this.options=[],this.selected="",this.default="",this.active="",this.label="Auto Choices",this.sourceProvider="",this.sourceKey=""}updated(e){e.has("default")&&(this.options.includes(this.selected)||Cw(this,p_,A3).call(this))}render(){return Ye`
      <frc-sendable-chooser
        @change=${Cw(this,p_,o7)}
        .options=${this.options}
        .selected=${this.selected}
        .default=${this.default}
        .active=${this.active}
        .label=${this.label}
      ></frc-sendable-chooser>
    `}};p_=new WeakSet,A3=function(){const{provider:i,store:e,sourceProvider:t,sourceKey:r,default:n}=this;if(!i||!e||!t||!r)return;const s=e.getSource(t,r),o=e.getSource(t,`${r}/selected`);if(s!=null&&s.hasChildren()&&!(o!=null&&o.hasValue())){const a=this.options.includes(this.selected)?this.selected:n;i.userUpdate(`${r}/selected`,a)}},o7=function(i){this.selected=i.detail.selected,Cw(this,p_,A3).call(this)},a7.styles=$t`
    :host {
      display: inline-block;
      min-width: 220px;
      font-family: sans-serif;
    }

    frc-sendable-chooser {
      width: 100%;
      height: 100%;
    }
  `;let ra=a7;Sl([q({type:Array})],ra.prototype,"options");Sl([q({type:String,reflect:!0})],ra.prototype,"selected");Sl([q({type:String})],ra.prototype,"default");Sl([q({type:String})],ra.prototype,"active");Sl([q({type:String,reflect:!0})],ra.prototype,"label");Sl([q({type:Object,attribute:!1})],ra.prototype,"provider");Sl([q({type:Object,attribute:!1})],ra.prototype,"store");Sl([q({type:String,attribute:"source-provider"})],ra.prototype,"sourceProvider");Sl([q({type:String,attribute:"source-key"})],ra.prototype,"sourceKey");customElements.get("frc-sendable-chooser-wrapper")||customElements.define("frc-sendable-chooser-wrapper",ra);/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Que=i=>i.strings===void 0,ehe={},the=(i,e=ehe)=>i._$AH=e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const l7={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},$$=i=>(...e)=>({_$litDirective$:i,values:e});let L$=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const c7="important",ihe=" !"+c7,of=$$(class extends L${constructor(i){var e;if(super(i),i.type!==l7.ATTRIBUTE||i.name!=="style"||((e=i.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(i){return Object.keys(i).reduce((e,t)=>{const r=i[t];return r==null?e:e+`${t=t.includes("-")?t:t.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(i,[e]){const{style:t}=i.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?t.removeProperty(r):t[r]=null);for(const r in e){const n=e[r];if(n!=null){this.ft.add(r);const s=typeof n=="string"&&n.endsWith(ihe);r.includes("-")||s?t.setProperty(r,s?n.slice(0,-11):n,s?c7:""):t[r]=n}}return Rh}});function rx(i,e){return i==null||e==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function rhe(i,e){return i==null||e==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function R$(i){let e,t,r;i.length!==2?(e=rx,t=(a,l)=>rx(i(a),l),r=(a,l)=>i(a)-l):(e=i===rx||i===rhe?i:nhe,t=i,r=i);function n(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;t(a[h],l)<0?c=h+1:u=h}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;t(a[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(a,l,c=0,u=a.length){const h=n(a,l,c,u-1);return h>c&&r(a[h-1],l)>-r(a[h],l)?h-1:h}return{left:n,center:o,right:s}}function nhe(){return 0}function she(i){return i===null?NaN:+i}const ohe=R$(rx),ahe=ohe.right;R$(she).center;let CI=class extends Map{constructor(e,t=uhe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,n]of e)this.set(r,n)}get(e){return super.get($I(this,e))}has(e){return super.has($I(this,e))}set(e,t){return super.set(lhe(this,e),t)}delete(e){return super.delete(che(this,e))}};function $I({_intern:i,_key:e},t){const r=e(t);return i.has(r)?i.get(r):t}function lhe({_intern:i,_key:e},t){const r=e(t);return i.has(r)?i.get(r):(i.set(r,t),t)}function che({_intern:i,_key:e},t){const r=e(t);return i.has(r)&&(t=i.get(r),i.delete(r)),t}function uhe(i){return i!==null&&typeof i=="object"?i.valueOf():i}const hhe=Math.sqrt(50),dhe=Math.sqrt(10),phe=Math.sqrt(2);function $w(i,e,t){const r=(e-i)/Math.max(0,t),n=Math.floor(Math.log10(r)),s=r/Math.pow(10,n),o=s>=hhe?10:s>=dhe?5:s>=phe?2:1;let a,l,c;return n<0?(c=Math.pow(10,-n)/o,a=Math.round(i*c),l=Math.round(e*c),a/c<i&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,n)*o,a=Math.round(i/c),l=Math.round(e/c),a*c<i&&++a,l*c>e&&--l),l<a&&.5<=t&&t<2?$w(i,e,t*2):[a,l,c]}function fhe(i,e,t){if(e=+e,i=+i,t=+t,!(t>0))return[];if(i===e)return[i];const r=e<i,[n,s,o]=r?$w(e,i,t):$w(i,e,t);if(!(s>=n))return[];const a=s-n+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(n+c)/-o;else for(let c=0;c<a;++c)l[c]=(n+c)*o;return l}function k3(i,e,t){return e=+e,i=+i,t=+t,$w(i,e,t)[2]}function C3(i,e,t){e=+e,i=+i,t=+t;const r=e<i,n=r?k3(e,i,t):k3(i,e,t);return(r?-1:1)*(n<0?1/-n:n)}function mhe(i){return i}var dT=1,nx=2,$3=3,E0=4,LI=1e-6;function ghe(i){return"translate("+i+",0)"}function _he(i){return"translate(0,"+i+")"}function yhe(i){return e=>+i(e)}function vhe(i,e){return e=Math.max(0,i.bandwidth()-e*2)/2,i.round()&&(e=Math.round(e)),t=>+i(t)+e}function bhe(){return!this.__axis}function P$(i,e){var t=[],r=null,n=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=i===dT||i===E0?-1:1,u=i===E0||i===nx?"x":"y",h=i===dT||i===$3?ghe:_he;function d(f){var g=r??(e.ticks?e.ticks.apply(e,t):e.domain()),v=n??(e.tickFormat?e.tickFormat.apply(e,t):mhe),m=Math.max(s,0)+a,p=e.range(),y=+p[0]+l,_=+p[p.length-1]+l,x=(e.bandwidth?vhe:yhe)(e.copy(),l),w=f.selection?f.selection():f,S=w.selectAll(".domain").data([null]),A=w.selectAll(".tick").data(g,e).order(),k=A.exit(),M=A.enter().append("g").attr("class","tick"),b=A.select("line"),P=A.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),A=A.merge(M),b=b.merge(M.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),P=P.merge(M.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",i===dT?"0em":i===$3?"0.71em":"0.32em")),f!==w&&(S=S.transition(f),A=A.transition(f),b=b.transition(f),P=P.transition(f),k=k.transition(f).attr("opacity",LI).attr("transform",function(N){return isFinite(N=x(N))?h(N+l):this.getAttribute("transform")}),M.attr("opacity",LI).attr("transform",function(N){var D=this.parentNode.__axis;return h((D&&isFinite(D=D(N))?D:x(N))+l)})),k.remove(),S.attr("d",i===E0||i===nx?o?"M"+c*o+","+y+"H"+l+"V"+_+"H"+c*o:"M"+l+","+y+"V"+_:o?"M"+y+","+c*o+"V"+l+"H"+_+"V"+c*o:"M"+y+","+l+"H"+_),A.attr("opacity",1).attr("transform",function(N){return h(x(N)+l)}),b.attr(u+"2",c*s),P.attr(u,c*m).text(v),w.filter(bhe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",i===nx?"start":i===E0?"end":"middle"),w.each(function(){this.__axis=x})}return d.scale=function(f){return arguments.length?(e=f,d):e},d.ticks=function(){return t=Array.from(arguments),d},d.tickArguments=function(f){return arguments.length?(t=f==null?[]:Array.from(f),d):t.slice()},d.tickValues=function(f){return arguments.length?(r=f==null?null:Array.from(f),d):r&&r.slice()},d.tickFormat=function(f){return arguments.length?(n=f,d):n},d.tickSize=function(f){return arguments.length?(s=o=+f,d):s},d.tickSizeInner=function(f){return arguments.length?(s=+f,d):s},d.tickSizeOuter=function(f){return arguments.length?(o=+f,d):o},d.tickPadding=function(f){return arguments.length?(a=+f,d):a},d.offset=function(f){return arguments.length?(l=+f,d):l},d}function xhe(i){return P$(nx,i)}function u7(i){return P$($3,i)}function RI(i){return P$(E0,i)}function whe(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,r=e.slice(),n;return function(s){for(n=0;n<t;++n)r[n]=i[n]*(1-s)+e[n]*s;return r}}function Mhe(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function She(i,e){var t=e?e.length:0,r=i?Math.min(t,i.length):0,n=new Array(r),s=new Array(t),o;for(o=0;o<r;++o)n[o]=N$(i[o],e[o]);for(;o<t;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=n[o](a);return s}}function The(i,e){var t=new Date;return i=+i,e=+e,function(r){return t.setTime(i*(1-r)+e*r),t}}function Ehe(i,e){var t={},r={},n;(i===null||typeof i!="object")&&(i={}),(e===null||typeof e!="object")&&(e={});for(n in e)n in i?t[n]=N$(i[n],e[n]):r[n]=e[n];return function(s){for(n in t)r[n]=t[n](s);return r}}function N$(i,e){var t=typeof e,r;return e==null||t==="boolean"?n$(e):(t==="number"?ho:t==="string"?(r=Ph(e))?(e=r,ww):hB:e instanceof Ph?ww:e instanceof Date?The:Mhe(e)?whe:Array.isArray(e)?She:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ehe:ho)(i,e)}function Ahe(i,e){return i=+i,e=+e,function(t){return Math.round(i*(1-t)+e*t)}}function khe(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function Lw(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,r=i.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+i.slice(t+1)]}function um(i){return i=Lw(Math.abs(i)),i?i[1]:NaN}function Che(i,e){return function(t,r){for(var n=t.length,s=[],o=0,a=i[0],l=0;n>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(t.substring(n-=a,n+a)),!((l+=a+1)>r));)a=i[o=(o+1)%i.length];return s.reverse().join(e)}}function $he(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var Lhe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rw(i){if(!(e=Lhe.exec(i)))throw new Error("invalid format: "+i);var e;return new I$({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Rw.prototype=I$.prototype;function I$(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}I$.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Rhe(i){e:for(var e=i.length,t=1,r=-1,n;t<e;++t)switch(i[t]){case".":r=n=t;break;case"0":r===0&&(r=t),n=t;break;default:if(!+i[t])break e;r>0&&(r=0);break}return r>0?i.slice(0,r)+i.slice(n+1):i}var h7;function Phe(i,e){var t=Lw(i,e);if(!t)return i+"";var r=t[0],n=t[1],s=n-(h7=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Lw(i,Math.max(0,e+s-1))[0]}function PI(i,e){var t=Lw(i,e);if(!t)return i+"";var r=t[0],n=t[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}const NI={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:khe,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>PI(i*100,e),r:PI,s:Phe,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function II(i){return i}var DI=Array.prototype.map,OI=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Nhe(i){var e=i.grouping===void 0||i.thousands===void 0?II:Che(DI.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",r=i.currency===void 0?"":i.currency[1]+"",n=i.decimal===void 0?".":i.decimal+"",s=i.numerals===void 0?II:$he(DI.call(i.numerals,String)),o=i.percent===void 0?"%":i.percent+"",a=i.minus===void 0?"−":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function c(h){h=Rw(h);var d=h.fill,f=h.align,g=h.sign,v=h.symbol,m=h.zero,p=h.width,y=h.comma,_=h.precision,x=h.trim,w=h.type;w==="n"?(y=!0,w="g"):NI[w]||(_===void 0&&(_=12),x=!0,w="g"),(m||d==="0"&&f==="=")&&(m=!0,d="0",f="=");var S=v==="$"?t:v==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",A=v==="$"?r:/[%p]/.test(w)?o:"",k=NI[w],M=/[defgprs%]/.test(w);_=_===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function b(P){var N=S,D=A,U,G,B;if(w==="c")D=k(P)+D,P="";else{P=+P;var Q=P<0||1/P<0;if(P=isNaN(P)?l:k(Math.abs(P),_),x&&(P=Rhe(P)),Q&&+P==0&&g!=="+"&&(Q=!1),N=(Q?g==="("?g:a:g==="-"||g==="("?"":g)+N,D=(w==="s"?OI[8+h7/3]:"")+D+(Q&&g==="("?")":""),M){for(U=-1,G=P.length;++U<G;)if(B=P.charCodeAt(U),48>B||B>57){D=(B===46?n+P.slice(U+1):P.slice(U))+D,P=P.slice(0,U);break}}}y&&!m&&(P=e(P,1/0));var j=N.length+P.length+D.length,X=j<p?new Array(p-j+1).join(d):"";switch(y&&m&&(P=e(X+P,X.length?p-D.length:1/0),X=""),f){case"<":P=N+P+D+X;break;case"=":P=N+X+P+D;break;case"^":P=X.slice(0,j=X.length>>1)+N+P+D+X.slice(j);break;default:P=X+N+P+D;break}return s(P)}return b.toString=function(){return h+""},b}function u(h,d){var f=c((h=Rw(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(um(d)/3)))*3,v=Math.pow(10,-g),m=OI[8+g/3];return function(p){return f(v*p)+m}}return{format:c,formatPrefix:u}}var T1,d7,p7;Ihe({thousands:",",grouping:[3],currency:["$",""]});function Ihe(i){return T1=Nhe(i),d7=T1.format,p7=T1.formatPrefix,T1}function Dhe(i){return Math.max(0,-um(Math.abs(i)))}function Ohe(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(um(e)/3)))*3-um(Math.abs(i)))}function Uhe(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,um(e)-um(i))+1}function D$(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}const UI=Symbol("implicit");function f7(){var i=new CI,e=[],t=[],r=UI;function n(s){let o=i.get(s);if(o===void 0){if(r!==UI)return r;i.set(s,o=e.push(s)-1)}return t[o%t.length]}return n.domain=function(s){if(!arguments.length)return e.slice();e=[],i=new CI;for(const o of s)i.has(o)||i.set(o,e.push(o)-1);return n},n.range=function(s){return arguments.length?(t=Array.from(s),n):t.slice()},n.unknown=function(s){return arguments.length?(r=s,n):r},n.copy=function(){return f7(e,t).unknown(r)},D$.apply(n,arguments),n}function zhe(i){return function(){return i}}function Fhe(i){return+i}var zI=[0,1];function af(i){return i}function L3(i,e){return(e-=i=+i)?function(t){return(t-i)/e}:zhe(isNaN(e)?NaN:.5)}function Bhe(i,e){var t;return i>e&&(t=i,i=e,e=t),function(r){return Math.max(i,Math.min(e,r))}}function Vhe(i,e,t){var r=i[0],n=i[1],s=e[0],o=e[1];return n<r?(r=L3(n,r),s=t(o,s)):(r=L3(r,n),s=t(s,o)),function(a){return s(r(a))}}function jhe(i,e,t){var r=Math.min(i.length,e.length)-1,n=new Array(r),s=new Array(r),o=-1;for(i[r]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++o<r;)n[o]=L3(i[o],i[o+1]),s[o]=t(e[o],e[o+1]);return function(a){var l=ahe(i,a,1,r)-1;return s[l](n[l](a))}}function m7(i,e){return e.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function Hhe(){var i=zI,e=zI,t=N$,r,n,s,o=af,a,l,c;function u(){var d=Math.min(i.length,e.length);return o!==af&&(o=Bhe(i[0],i[d-1])),a=d>2?jhe:Vhe,l=c=null,h}function h(d){return d==null||isNaN(d=+d)?s:(l||(l=a(i.map(r),e,t)))(r(o(d)))}return h.invert=function(d){return o(n((c||(c=a(e,i.map(r),ho)))(d)))},h.domain=function(d){return arguments.length?(i=Array.from(d,Fhe),u()):i.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),t=Ahe,u()},h.clamp=function(d){return arguments.length?(o=d?!0:af,u()):o!==af},h.interpolate=function(d){return arguments.length?(t=d,u()):t},h.unknown=function(d){return arguments.length?(s=d,h):s},function(d,f){return r=d,n=f,u()}}function g7(){return Hhe()(af,af)}function Ghe(i,e,t,r){var n=C3(i,e,t),s;switch(r=Rw(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(i),Math.abs(e));return r.precision==null&&!isNaN(s=Ohe(n,o))&&(r.precision=s),p7(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Uhe(n,Math.max(Math.abs(i),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Dhe(n))&&(r.precision=s-(r.type==="%")*2);break}}return d7(r)}function Whe(i){var e=i.domain;return i.ticks=function(t){var r=e();return fhe(r[0],r[r.length-1],t??10)},i.tickFormat=function(t,r){var n=e();return Ghe(n[0],n[n.length-1],t??10,r)},i.nice=function(t){t==null&&(t=10);var r=e(),n=0,s=r.length-1,o=r[n],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=n,n=s,s=c);u-- >0;){if(c=k3(o,a,t),c===l)return r[n]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return i},i}function _7(){var i=g7();return i.copy=function(){return m7(i,_7())},D$.apply(i,arguments),Whe(i)}function qhe(i,e){i=i.slice();var t=0,r=i.length-1,n=i[t],s=i[r],o;return s<n&&(o=t,t=r,r=o,o=n,n=s,s=o),i[t]=e.floor(n),i[r]=e.ceil(s),i}const pT=new Date,fT=new Date;function rr(i,e,t,r){function n(s){return i(s=arguments.length===0?new Date:new Date(+s)),s}return n.floor=s=>(i(s=new Date(+s)),s),n.ceil=s=>(i(s=new Date(s-1)),e(s,1),i(s),s),n.round=s=>{const o=n(s),a=n.ceil(s);return s-o<a-s?o:a},n.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),n.range=(s,o,a)=>{const l=[];if(s=n.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),i(s);while(c<s&&s<o);return l},n.filter=s=>rr(o=>{if(o>=o)for(;i(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),t&&(n.count=(s,o)=>(pT.setTime(+s),fT.setTime(+o),i(pT),i(fT),Math.floor(t(pT,fT))),n.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?n.filter(r?o=>r(o)%s===0:o=>n.count(0,o)%s===0):n)),n}const Pw=rr(()=>{},(i,e)=>{i.setTime(+i+e)},(i,e)=>e-i);Pw.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?rr(e=>{e.setTime(Math.floor(e/i)*i)},(e,t)=>{e.setTime(+e+t*i)},(e,t)=>(t-e)/i):Pw);Pw.range;const Xa=1e3,As=Xa*60,Ya=As*60,dl=Ya*24,O$=dl*7,FI=dl*30,mT=dl*365,lf=rr(i=>{i.setTime(i-i.getMilliseconds())},(i,e)=>{i.setTime(+i+e*Xa)},(i,e)=>(e-i)/Xa,i=>i.getUTCSeconds());lf.range;const U$=rr(i=>{i.setTime(i-i.getMilliseconds()-i.getSeconds()*Xa)},(i,e)=>{i.setTime(+i+e*As)},(i,e)=>(e-i)/As,i=>i.getMinutes());U$.range;const Xhe=rr(i=>{i.setUTCSeconds(0,0)},(i,e)=>{i.setTime(+i+e*As)},(i,e)=>(e-i)/As,i=>i.getUTCMinutes());Xhe.range;const z$=rr(i=>{i.setTime(i-i.getMilliseconds()-i.getSeconds()*Xa-i.getMinutes()*As)},(i,e)=>{i.setTime(+i+e*Ya)},(i,e)=>(e-i)/Ya,i=>i.getHours());z$.range;const Yhe=rr(i=>{i.setUTCMinutes(0,0,0)},(i,e)=>{i.setTime(+i+e*Ya)},(i,e)=>(e-i)/Ya,i=>i.getUTCHours());Yhe.range;const zy=rr(i=>i.setHours(0,0,0,0),(i,e)=>i.setDate(i.getDate()+e),(i,e)=>(e-i-(e.getTimezoneOffset()-i.getTimezoneOffset())*As)/dl,i=>i.getDate()-1);zy.range;const F$=rr(i=>{i.setUTCHours(0,0,0,0)},(i,e)=>{i.setUTCDate(i.getUTCDate()+e)},(i,e)=>(e-i)/dl,i=>i.getUTCDate()-1);F$.range;const Khe=rr(i=>{i.setUTCHours(0,0,0,0)},(i,e)=>{i.setUTCDate(i.getUTCDate()+e)},(i,e)=>(e-i)/dl,i=>Math.floor(i/dl));Khe.range;function id(i){return rr(e=>{e.setDate(e.getDate()-(e.getDay()+7-i)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*As)/O$)}const jM=id(0),Nw=id(1),Zhe=id(2),Jhe=id(3),hm=id(4),Qhe=id(5),ede=id(6);jM.range;Nw.range;Zhe.range;Jhe.range;hm.range;Qhe.range;ede.range;function rd(i){return rr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-i)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/O$)}const y7=rd(0),Iw=rd(1),tde=rd(2),ide=rd(3),dm=rd(4),rde=rd(5),nde=rd(6);y7.range;Iw.range;tde.range;ide.range;dm.range;rde.range;nde.range;const B$=rr(i=>{i.setDate(1),i.setHours(0,0,0,0)},(i,e)=>{i.setMonth(i.getMonth()+e)},(i,e)=>e.getMonth()-i.getMonth()+(e.getFullYear()-i.getFullYear())*12,i=>i.getMonth());B$.range;const sde=rr(i=>{i.setUTCDate(1),i.setUTCHours(0,0,0,0)},(i,e)=>{i.setUTCMonth(i.getUTCMonth()+e)},(i,e)=>e.getUTCMonth()-i.getUTCMonth()+(e.getUTCFullYear()-i.getUTCFullYear())*12,i=>i.getUTCMonth());sde.range;const pl=rr(i=>{i.setMonth(0,1),i.setHours(0,0,0,0)},(i,e)=>{i.setFullYear(i.getFullYear()+e)},(i,e)=>e.getFullYear()-i.getFullYear(),i=>i.getFullYear());pl.every=i=>!isFinite(i=Math.floor(i))||!(i>0)?null:rr(e=>{e.setFullYear(Math.floor(e.getFullYear()/i)*i),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*i)});pl.range;const Fh=rr(i=>{i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},(i,e)=>{i.setUTCFullYear(i.getUTCFullYear()+e)},(i,e)=>e.getUTCFullYear()-i.getUTCFullYear(),i=>i.getUTCFullYear());Fh.every=i=>!isFinite(i=Math.floor(i))||!(i>0)?null:rr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/i)*i),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*i)});Fh.range;function ode(i,e,t,r,n,s){const o=[[lf,1,Xa],[lf,5,5*Xa],[lf,15,15*Xa],[lf,30,30*Xa],[s,1,As],[s,5,5*As],[s,15,15*As],[s,30,30*As],[n,1,Ya],[n,3,3*Ya],[n,6,6*Ya],[n,12,12*Ya],[r,1,dl],[r,2,2*dl],[t,1,O$],[e,1,FI],[e,3,3*FI],[i,1,mT]];function a(c,u,h){const d=u<c;d&&([c,u]=[u,c]);const f=h&&typeof h.range=="function"?h:l(c,u,h),g=f?f.range(c,+u+1):[];return d?g.reverse():g}function l(c,u,h){const d=Math.abs(u-c)/h,f=R$(([,,m])=>m).right(o,d);if(f===o.length)return i.every(C3(c/mT,u/mT,h));if(f===0)return Pw.every(Math.max(C3(c,u,h),1));const[g,v]=o[d/o[f-1][2]<o[f][2]/d?f-1:f];return g.every(v)}return[a,l]}const[ade,lde]=ode(pl,B$,jM,zy,z$,U$);function gT(i){if(0<=i.y&&i.y<100){var e=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return e.setFullYear(i.y),e}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function _T(i){if(0<=i.y&&i.y<100){var e=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return e.setUTCFullYear(i.y),e}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function Og(i,e,t){return{y:i,m:e,d:t,H:0,M:0,S:0,L:0}}function cde(i){var e=i.dateTime,t=i.date,r=i.time,n=i.periods,s=i.days,o=i.shortDays,a=i.months,l=i.shortMonths,c=Ug(n),u=zg(n),h=Ug(s),d=zg(s),f=Ug(o),g=zg(o),v=Ug(a),m=zg(a),p=Ug(l),y=zg(l),_={a:Q,A:j,b:X,B:ne,c:null,d:WI,e:WI,f:Rde,g:Vde,G:Hde,H:Cde,I:$de,j:Lde,L:v7,m:Pde,M:Nde,p:ge,q:pe,Q:YI,s:KI,S:Ide,u:Dde,U:Ode,V:Ude,w:zde,W:Fde,x:null,X:null,y:Bde,Y:jde,Z:Gde,"%":XI},x={a:V,A:Y,b:ae,B:J,c:null,d:qI,e:qI,f:Yde,g:spe,G:ape,H:Wde,I:qde,j:Xde,L:x7,m:Kde,M:Zde,p:z,q:_e,Q:YI,s:KI,S:Jde,u:Qde,U:epe,V:tpe,w:ipe,W:rpe,x:null,X:null,y:npe,Y:ope,Z:lpe,"%":XI},w={a:b,A:P,b:N,B:D,c:U,d:HI,e:HI,f:Tde,g:jI,G:VI,H:GI,I:GI,j:xde,L:Sde,m:bde,M:wde,p:M,q:vde,Q:Ade,s:kde,S:Mde,u:fde,U:mde,V:gde,w:pde,W:_de,x:G,X:B,y:jI,Y:VI,Z:yde,"%":Ede};_.x=S(t,_),_.X=S(r,_),_.c=S(e,_),x.x=S(t,x),x.X=S(r,x),x.c=S(e,x);function S(ee,te){return function(be){var oe=[],Te=-1,Ae=0,Qe=ee.length,Ze,ht,wt;for(be instanceof Date||(be=new Date(+be));++Te<Qe;)ee.charCodeAt(Te)===37&&(oe.push(ee.slice(Ae,Te)),(ht=BI[Ze=ee.charAt(++Te)])!=null?Ze=ee.charAt(++Te):ht=Ze==="e"?" ":"0",(wt=te[Ze])&&(Ze=wt(be,ht)),oe.push(Ze),Ae=Te+1);return oe.push(ee.slice(Ae,Te)),oe.join("")}}function A(ee,te){return function(be){var oe=Og(1900,void 0,1),Te=k(oe,ee,be+="",0),Ae,Qe;if(Te!=be.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(te&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(Ae=_T(Og(oe.y,0,1)),Qe=Ae.getUTCDay(),Ae=Qe>4||Qe===0?Iw.ceil(Ae):Iw(Ae),Ae=F$.offset(Ae,(oe.V-1)*7),oe.y=Ae.getUTCFullYear(),oe.m=Ae.getUTCMonth(),oe.d=Ae.getUTCDate()+(oe.w+6)%7):(Ae=gT(Og(oe.y,0,1)),Qe=Ae.getDay(),Ae=Qe>4||Qe===0?Nw.ceil(Ae):Nw(Ae),Ae=zy.offset(Ae,(oe.V-1)*7),oe.y=Ae.getFullYear(),oe.m=Ae.getMonth(),oe.d=Ae.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),Qe="Z"in oe?_T(Og(oe.y,0,1)).getUTCDay():gT(Og(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(Qe+5)%7:oe.w+oe.U*7-(Qe+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,_T(oe)):gT(oe)}}function k(ee,te,be,oe){for(var Te=0,Ae=te.length,Qe=be.length,Ze,ht;Te<Ae;){if(oe>=Qe)return-1;if(Ze=te.charCodeAt(Te++),Ze===37){if(Ze=te.charAt(Te++),ht=w[Ze in BI?te.charAt(Te++):Ze],!ht||(oe=ht(ee,be,oe))<0)return-1}else if(Ze!=be.charCodeAt(oe++))return-1}return oe}function M(ee,te,be){var oe=c.exec(te.slice(be));return oe?(ee.p=u.get(oe[0].toLowerCase()),be+oe[0].length):-1}function b(ee,te,be){var oe=f.exec(te.slice(be));return oe?(ee.w=g.get(oe[0].toLowerCase()),be+oe[0].length):-1}function P(ee,te,be){var oe=h.exec(te.slice(be));return oe?(ee.w=d.get(oe[0].toLowerCase()),be+oe[0].length):-1}function N(ee,te,be){var oe=p.exec(te.slice(be));return oe?(ee.m=y.get(oe[0].toLowerCase()),be+oe[0].length):-1}function D(ee,te,be){var oe=v.exec(te.slice(be));return oe?(ee.m=m.get(oe[0].toLowerCase()),be+oe[0].length):-1}function U(ee,te,be){return k(ee,e,te,be)}function G(ee,te,be){return k(ee,t,te,be)}function B(ee,te,be){return k(ee,r,te,be)}function Q(ee){return o[ee.getDay()]}function j(ee){return s[ee.getDay()]}function X(ee){return l[ee.getMonth()]}function ne(ee){return a[ee.getMonth()]}function ge(ee){return n[+(ee.getHours()>=12)]}function pe(ee){return 1+~~(ee.getMonth()/3)}function V(ee){return o[ee.getUTCDay()]}function Y(ee){return s[ee.getUTCDay()]}function ae(ee){return l[ee.getUTCMonth()]}function J(ee){return a[ee.getUTCMonth()]}function z(ee){return n[+(ee.getUTCHours()>=12)]}function _e(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var te=S(ee+="",_);return te.toString=function(){return ee},te},parse:function(ee){var te=A(ee+="",!1);return te.toString=function(){return ee},te},utcFormat:function(ee){var te=S(ee+="",x);return te.toString=function(){return ee},te},utcParse:function(ee){var te=A(ee+="",!0);return te.toString=function(){return ee},te}}}var BI={"-":"",_:" ",0:"0"},yr=/^\s*\d+/,ude=/^%/,hde=/[\\^$*+?|[\]().{}]/g;function Jt(i,e,t){var r=i<0?"-":"",n=(r?-i:i)+"",s=n.length;return r+(s<t?new Array(t-s+1).join(e)+n:n)}function dde(i){return i.replace(hde,"\\$&")}function Ug(i){return new RegExp("^(?:"+i.map(dde).join("|")+")","i")}function zg(i){return new Map(i.map((e,t)=>[e.toLowerCase(),t]))}function pde(i,e,t){var r=yr.exec(e.slice(t,t+1));return r?(i.w=+r[0],t+r[0].length):-1}function fde(i,e,t){var r=yr.exec(e.slice(t,t+1));return r?(i.u=+r[0],t+r[0].length):-1}function mde(i,e,t){var r=yr.exec(e.slice(t,t+2));return r?(i.U=+r[0],t+r[0].length):-1}function gde(i,e,t){var r=yr.exec(e.slice(t,t+2));return r?(i.V=+r[0],t+r[0].length):-1}function _de(i,e,t){var r=yr.exec(e.slice(t,t+2));return r?(i.W=+r[0],t+r[0].length):-1}function VI(i,e,t){var r=yr.exec(e.slice(t,t+4));return r?(i.y=+r[0],t+r[0].length):-1}function jI(i,e,t){var r=yr.exec(e.slice(t,t+2));return r?(i.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function yde(i,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(i.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function vde(i,e,t){var r=yr.exec(e.slice(t,t+1));return r?(i.q=r[0]*3-3,t+r[0].length):-1}function bde(i,e,t){var r=yr.exec(e.slice(t,t+2));return r?(i.m=r[0]-1,t+r[0].length):-1}function HI(i,e,t){var r=yr.exec(e.slice(t,t+2));return r?(i.d=+r[0],t+r[0].length):-1}function xde(i,e,t){var r=yr.exec(e.slice(t,t+3));return r?(i.m=0,i.d=+r[0],t+r[0].length):-1}function GI(i,e,t){var r=yr.exec(e.slice(t,t+2));return r?(i.H=+r[0],t+r[0].length):-1}function wde(i,e,t){var r=yr.exec(e.slice(t,t+2));return r?(i.M=+r[0],t+r[0].length):-1}function Mde(i,e,t){var r=yr.exec(e.slice(t,t+2));return r?(i.S=+r[0],t+r[0].length):-1}function Sde(i,e,t){var r=yr.exec(e.slice(t,t+3));return r?(i.L=+r[0],t+r[0].length):-1}function Tde(i,e,t){var r=yr.exec(e.slice(t,t+6));return r?(i.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function Ede(i,e,t){var r=ude.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function Ade(i,e,t){var r=yr.exec(e.slice(t));return r?(i.Q=+r[0],t+r[0].length):-1}function kde(i,e,t){var r=yr.exec(e.slice(t));return r?(i.s=+r[0],t+r[0].length):-1}function WI(i,e){return Jt(i.getDate(),e,2)}function Cde(i,e){return Jt(i.getHours(),e,2)}function $de(i,e){return Jt(i.getHours()%12||12,e,2)}function Lde(i,e){return Jt(1+zy.count(pl(i),i),e,3)}function v7(i,e){return Jt(i.getMilliseconds(),e,3)}function Rde(i,e){return v7(i,e)+"000"}function Pde(i,e){return Jt(i.getMonth()+1,e,2)}function Nde(i,e){return Jt(i.getMinutes(),e,2)}function Ide(i,e){return Jt(i.getSeconds(),e,2)}function Dde(i){var e=i.getDay();return e===0?7:e}function Ode(i,e){return Jt(jM.count(pl(i)-1,i),e,2)}function b7(i){var e=i.getDay();return e>=4||e===0?hm(i):hm.ceil(i)}function Ude(i,e){return i=b7(i),Jt(hm.count(pl(i),i)+(pl(i).getDay()===4),e,2)}function zde(i){return i.getDay()}function Fde(i,e){return Jt(Nw.count(pl(i)-1,i),e,2)}function Bde(i,e){return Jt(i.getFullYear()%100,e,2)}function Vde(i,e){return i=b7(i),Jt(i.getFullYear()%100,e,2)}function jde(i,e){return Jt(i.getFullYear()%1e4,e,4)}function Hde(i,e){var t=i.getDay();return i=t>=4||t===0?hm(i):hm.ceil(i),Jt(i.getFullYear()%1e4,e,4)}function Gde(i){var e=i.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Jt(e/60|0,"0",2)+Jt(e%60,"0",2)}function qI(i,e){return Jt(i.getUTCDate(),e,2)}function Wde(i,e){return Jt(i.getUTCHours(),e,2)}function qde(i,e){return Jt(i.getUTCHours()%12||12,e,2)}function Xde(i,e){return Jt(1+F$.count(Fh(i),i),e,3)}function x7(i,e){return Jt(i.getUTCMilliseconds(),e,3)}function Yde(i,e){return x7(i,e)+"000"}function Kde(i,e){return Jt(i.getUTCMonth()+1,e,2)}function Zde(i,e){return Jt(i.getUTCMinutes(),e,2)}function Jde(i,e){return Jt(i.getUTCSeconds(),e,2)}function Qde(i){var e=i.getUTCDay();return e===0?7:e}function epe(i,e){return Jt(y7.count(Fh(i)-1,i),e,2)}function w7(i){var e=i.getUTCDay();return e>=4||e===0?dm(i):dm.ceil(i)}function tpe(i,e){return i=w7(i),Jt(dm.count(Fh(i),i)+(Fh(i).getUTCDay()===4),e,2)}function ipe(i){return i.getUTCDay()}function rpe(i,e){return Jt(Iw.count(Fh(i)-1,i),e,2)}function npe(i,e){return Jt(i.getUTCFullYear()%100,e,2)}function spe(i,e){return i=w7(i),Jt(i.getUTCFullYear()%100,e,2)}function ope(i,e){return Jt(i.getUTCFullYear()%1e4,e,4)}function ape(i,e){var t=i.getUTCDay();return i=t>=4||t===0?dm(i):dm.ceil(i),Jt(i.getUTCFullYear()%1e4,e,4)}function lpe(){return"+0000"}function XI(){return"%"}function YI(i){return+i}function KI(i){return Math.floor(+i/1e3)}var Xd,M7;cpe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cpe(i){return Xd=cde(i),M7=Xd.format,Xd.parse,Xd.utcFormat,Xd.utcParse,Xd}function upe(i){return new Date(i)}function hpe(i){return i instanceof Date?+i:+new Date(+i)}function S7(i,e,t,r,n,s,o,a,l,c){var u=g7(),h=u.invert,d=u.domain,f=c(".%L"),g=c(":%S"),v=c("%I:%M"),m=c("%I %p"),p=c("%a %d"),y=c("%b %d"),_=c("%B"),x=c("%Y");function w(S){return(l(S)<S?f:a(S)<S?g:o(S)<S?v:s(S)<S?m:r(S)<S?n(S)<S?p:y:t(S)<S?_:x)(S)}return u.invert=function(S){return new Date(h(S))},u.domain=function(S){return arguments.length?d(Array.from(S,hpe)):d().map(upe)},u.ticks=function(S){var A=d();return i(A[0],A[A.length-1],S??10)},u.tickFormat=function(S,A){return A==null?w:c(A)},u.nice=function(S){var A=d();return(!S||typeof S.range!="function")&&(S=e(A[0],A[A.length-1],S??10)),S?d(qhe(A,S)):u},u.copy=function(){return m7(u,S7(i,e,t,r,n,s,o,a,l,c))},u}function dpe(){return D$.apply(S7(ade,lde,pl,B$,jM,zy,z$,U$,lf,M7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ppe(i){for(var e=i.length/6|0,t=new Array(e),r=0;r<e;)t[r]="#"+i.slice(r*6,++r*6);return t}const fpe=ppe("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const f_=(i,e)=>{var t;const r=i._$AN;if(r===void 0)return!1;for(const n of r)(t=n._$AO)==null||t.call(n,e,!1),f_(n,e);return!0},Dw=i=>{let e,t;do{if((e=i._$AM)===void 0)break;t=e._$AN,t.delete(i),i=e}while((t==null?void 0:t.size)===0)},T7=i=>{for(let e;e=i._$AM;i=e){let t=e._$AN;if(t===void 0)e._$AN=t=new Set;else if(t.has(i))break;t.add(i),_pe(e)}};function mpe(i){this._$AN!==void 0?(Dw(this),this._$AM=i,T7(this)):this._$AM=i}function gpe(i,e=!1,t=0){const r=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(r))for(let s=t;s<r.length;s++)f_(r[s],!1),Dw(r[s]);else r!=null&&(f_(r,!1),Dw(r));else f_(this,i)}const _pe=i=>{i.type==l7.CHILD&&(i._$AP??(i._$AP=gpe),i._$AQ??(i._$AQ=mpe))};let ype=class extends L${constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,r){super._$AT(e,t,r),T7(this),this.isConnected=e._$AU}_$AO(e,t=!0){var r,n;e!==this.isConnected&&(this.isConnected=e,e?(r=this.reconnected)==null||r.call(this):(n=this.disconnected)==null||n.call(this)),t&&(f_(this,e),Dw(this))}setValue(e){if(Que(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}};const yT=new WeakMap,m_=$$(class extends ype{render(i){return Ii}update(i,[e]){var t;const r=e!==this.Y;return r&&this.Y!==void 0&&this.rt(void 0),(r||this.lt!==this.ct)&&(this.Y=e,this.ht=(t=i.options)==null?void 0:t.host,this.rt(this.ct=i.element)),Ii}rt(i){if(this.isConnected||(i=void 0),typeof this.Y=="function"){const e=this.ht??globalThis;let t=yT.get(e);t===void 0&&(t=new WeakMap,yT.set(e,t)),t.get(this.Y)!==void 0&&this.Y.call(this.ht,void 0),t.set(this.Y,i),i!==void 0&&this.Y.call(this.ht,i)}else this.Y.value=i}get lt(){var i,e;return typeof this.Y=="function"?(i=yT.get(this.ht??globalThis))==null?void 0:i.get(this.Y):(e=this.Y)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});function vpe(i,e,t){return dpe().domain([t-e,t]).range([0,i])}function bpe(i){const e=u7(i).tickFormat(t=>`${t.getTime()/1e3}`);return xi`
    <g 
      class="axis axis--x" 
      ${m_(t=>{e(jr(t))})}>
    </g> 
  `}function xpe(i,e){const t=u7(i).tickSize(-e).tickFormat("");return xi`
    <g 
      class="axis-x-grid" 
      ${m_(r=>{t(jr(r))})}>
    </g> 
  `}var wpe=Object.defineProperty,Fy=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&wpe(e,t,n),n};let Om=class extends ut{constructor(){super(...arguments),this.value=0,this.color="",this.hide=!1,this.yAxis=0,this.displayName=""}};Fy([q({type:Number})],Om.prototype,"value");Fy([q({type:String})],Om.prototype,"color");Fy([q({type:Boolean})],Om.prototype,"hide");Fy([q({type:Number,attribute:"y-axis"})],Om.prototype,"yAxis");Fy([q({type:String,attribute:"display-name",reflect:!0})],Om.prototype,"displayName");customElements.get("frc-line-chart-data")||customElements.define("frc-line-chart-data",Om);var Mpe=Object.defineProperty,nd=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Mpe(e,t,n),n};const Spe=f7().domain(Array(8).fill(0).map((i,e)=>e)).range(fpe);var Yd;const Yc=(Yd=class extends ut{constructor(){super(...arguments),this.viewTime=10,this.chartTitle="",this.data=[],this.startTime=0,this.elapsedTimeMs=0}firstUpdated(){this.startTime=Date.now(),requestAnimationFrame(()=>{this.updateChart()})}getFilteredData(i){const e=i.findIndex(({timeMs:t})=>this.elapsedTimeMs-t<Math.round(this.viewTime*1e3))-1;return e<0?i:i.slice(e)}updateChart(){this.elapsedTimeMs=Date.now()-this.startTime;const i=[...this.children].filter(e=>e.tagName.toLowerCase()==="frc-line-chart-data");this.data=i.map((e,t)=>{var r;const n=((r=this.data[t])==null?void 0:r.data)??[];return n.push({value:e.value??0,timeMs:this.elapsedTimeMs}),{data:this.getFilteredData(n),color:e.color||Spe(t%8),hide:e.hide??!1,yAxis:e.yAxis??0,displayName:e.displayName||`Data ${t}`}}),requestAnimationFrame(()=>{this.updateChart()})}static getYScale(i,e,t){const{invert:r,lockMin:n,lockMax:s}=t;let{min:o,max:a}=t;(!n||!s)&&e.forEach(c=>{c.data.forEach(({value:u})=>{n||(o=Math.min(o,u)),s||(a=Math.max(a,u))})});const l=r?[0,i]:[i,0];return _7().domain([o,a]).range(l)}getDimensions(){var i;const e={top:0,right:40,bottom:20,left:40},t=((i=this.chartContainer)==null?void 0:i.getBoundingClientRect())??{width:960,height:500},r=t.width,n=t.height,s=r-e.left-e.right,o=n-e.top-e.bottom;return{margin:e,svgWidth:r,svgHeight:n,width:s,height:o}}getYScales(){const{height:i}=this.getDimensions(),e=[...this.children].filter(t=>t.tagName.toLowerCase()==="frc-line-chart-axis");if(e.length===0){const t={min:-1,max:1,lockMin:!1,lockMax:!1,invert:!1,side:"left",hideGridLines:!1,hide:!1};return[{chartAxis:t,scale:Yd.getYScale(i,this.data.filter(({yAxis:r})=>r===0),t)}]}return e.map((t,r)=>{const n=t,s={min:n.min??-1,max:n.max??1,lockMin:n.lockMin??!1,lockMax:n.lockMax??!1,invert:n.invert??!1,side:n.side??"left",hideGridLines:n.hideGridLines??!1,hide:n.hide??!1};return{chartAxis:s,scale:Yd.getYScale(i,this.data.filter(({yAxis:o})=>o===r),s)}})}static getPath(i,e,t){return`M${i.map(r=>[e(r).toFixed(3),t(r).toFixed(3)].join(",")).join("L")}`}getLegend(){const i=[...this.children].find(t=>t.tagName.toLowerCase()==="frc-line-chart-legend");if(!i)return{direction:"horizontal",position:"n",inside:!1,hide:!1};const e=i;return{direction:e.direction??"horizontal",position:e.position??"n",inside:e.inside??!1,hide:e.hide??!1}}render(){const{inside:i,position:e,direction:t,hide:r}=this.getLegend(),n=e==="w"||e==="e"||["ne","nw","se","sw"].includes(e)&&t==="vertical",s=n&&["ne","e","se"].includes(e)||!n&&["sw","s","se"].includes(e),o=of({display:i?"block":"flex",flexDirection:`${n?"row":"column"}${s?"-reverse":""}`}),a=i?{width:"100%",height:"100%"}:{flex:"1"};return Ye`
      <div class="chart-and-header">
        ${this.chartTitle?Ye`<header>${this.chartTitle}</header>`:""}
        <div class="chart-and-legend" style=${o}>
          ${r?"":this.renderLegend()}
          <div class="chart-container" style=${of(a)}>
            ${this.renderChart()}
          </div>
        </div>
      </div>
    `}renderLegend(){const{margin:i}=this.getDimensions(),{inside:e,direction:t,position:r}=this.getLegend(),n=["n","s","e","w"].includes(r)?"center":r==="nw"?"flex-start":r==="se"?"flex-end":r==="ne"?t==="horizontal"?"flex-end":"flex-start":t==="vertical"?"flex-end":"flex-start",s=(()=>{if(!e)return{};const a={alignItems:"center"};return r.includes("n")?a.top=`${i.top}px`:r.includes("s")&&(a.bottom=`${i.bottom}px`),r.includes("w")?a.left=`${i.left}px`:r.includes("e")&&(a.right=`${i.right}px`),["n","s","e","w"].includes(r)&&(a.justifyContent="center"),["n","s"].includes(r)&&(a.left="0",a.right="0"),["e","w"].includes(r)&&(a.top="0",a.bottom="0"),a})(),o=of({alignSelf:n,...s});return Ye`
      <div
        class="legend ${e?"inside":"outside"} ${t==="horizontal"?"horizontal":"vertical"}"
        style=${o}
      >
        ${this.data.map(({color:a,displayName:l})=>Ye`
            <div class="legend-item">
              <div
                class="legend-item-box"
                style=${of({background:a})}
              ></div>
              <span class="legend-item-label">${l}</span>
            </div>
          `)}
      </div>
    `}renderChart(){const{margin:i,svgWidth:e,svgHeight:t,width:r,height:n}=this.getDimensions(),s=vpe(r,Math.round(this.viewTime*1e3),this.elapsedTimeMs),o=this.getYScales().filter(({chartAxis:l})=>!l.hide),a=o.map(l=>c=>Yd.getPath(c,u=>s(new Date(u.timeMs)),u=>l.scale(u.value)));return xi`
      <svg width=${e} height=${t} style="position: absolute">
        <g transform="translate(${i.left},${i.top})">
          <defs>
            <clipPath id="clip">
              <rect width=${r} height=${n}></rect>
            </clipPath>
          </defs>
          <g transform="translate(0,${n})">
            ${bpe(s)}
            ${xpe(s,n)}
          </g>
          ${this.renderScales(o,"left")}
          ${this.renderScales(o,"right")}
          <rect class="chart-border" width=${r} height=${n}></rect>
          ${this.data.filter(({hide:l,yAxis:c})=>!l&&c<o.length&&c>=0).map(l=>xi`
            <g clip-path="url(#clip)">
              <path 
                class="data-path"
                ${m_(c=>{const u=jr(c),h=a[l.yAxis](l.data);u.attr("class","line").attr("stroke",l.color).attr("d",h)})}>
              ></path>
            </g>
          `)}
        </g>
      </svg>
    `}renderScales(i,e){const{width:t}=this.getDimensions();return xi`
     ${i.filter(r=>r.chartAxis.side===e).map((r,n)=>{const s=r.chartAxis.side==="left"?-n*25:t;return xi`
              <g 
                class="axis axis--y" 
                transform="translate(${s}, 0)"
                ${m_(o=>{(r.chartAxis.side==="left"?RI:xhe)(r.scale)(jr(o))})}>
              </g>
              ${r.chartAxis.hideGridLines?"":xi`
                    <g 
                      class="axis-y-grid" 
                      ${m_(o=>{RI(r.scale).tickSize(-t).tickFormat("")(jr(o))})}>
                    </g> 
                  `}
            `})}
    `}},Yd.styles=$t`
    :host {
      display: inline-block;
      width: 700px;
      height: 400px;
      color: var(--frc-line-chart-text-color, black);
    }

    .chart-and-header {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .chart-and-header header {
      font-size: 18px;
      font-family: sans-serif;
      margin: 3px 0;
    }

    .chart-and-legend {
      flex: 1;
      width: 100%;
      position: relative;
    }

    .legend-container {
      position: relative;
    }

    .legend {
      display: flex;
      z-index: 100;
    }

    .legend.outside {
      position: relative;
    }

    .legend.inside {
      position: absolute;
    }

    .legend-item {
      display: flex;
      flex-wrap: no-wrap;
      gap: 5px;
      align-items: center;
      padding: 5px;
    }

    .legend.horizontal {
      flex-direction: row;
    }

    .legend.vertical {
      flex-direction: column;
    }

    .legend-item-box {
      width: 15px;
      height: 15px;
    }

    .legend-item-label {
      font-family: sans-serif;
      font-size: 15px;
    }

    .line {
      fill: none;
      stroke-width: 1.5px;
    }

    .chart-border {
      fill: none;
      stroke-width: 1;
      stroke: var(--frc-line-chart-border-color, black);
    }

    .axis-x-grid line,
    .axis-y-grid line {
      stroke: var(--frc-line-chart-grid-color, #eee);
    }

    .axis--y {
      font-family: monospace;
    }

    svg {
      overflow: visible;
    }
  `,Yd);nd([q({type:Number,attribute:"view-time"})],Yc.prototype,"viewTime");nd([q({type:String,attribute:"chart-title",reflect:!0})],Yc.prototype,"chartTitle");nd([zi()],Yc.prototype,"data");nd([ni(".data-path")],Yc.prototype,"path");nd([ni("svg")],Yc.prototype,"svg");nd([ni(".axis--x")],Yc.prototype,"xAxis");nd([ni(".chart-container")],Yc.prototype,"chartContainer");let Tpe=Yc;customElements.get("frc-line-chart")||customElements.define("frc-line-chart",Tpe);var Epe=Object.defineProperty,Kc=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Epe(e,t,n),n};let Tl=class extends ut{constructor(){super(...arguments),this.min=-1,this.max=1,this.lockMin=!1,this.lockMax=!1,this.invert=!1,this.side="left",this.hideGridLines=!1,this.hide=!1}};Kc([q({type:Number})],Tl.prototype,"min");Kc([q({type:Number})],Tl.prototype,"max");Kc([q({type:Boolean,attribute:"lock-min"})],Tl.prototype,"lockMin");Kc([q({type:Boolean,attribute:"lock-max"})],Tl.prototype,"lockMax");Kc([q({type:Boolean})],Tl.prototype,"invert");Kc([q({type:String,reflect:!0})],Tl.prototype,"side");Kc([q({type:Boolean,attribute:"hide-grid-lines"})],Tl.prototype,"hideGridLines");Kc([q({type:Boolean})],Tl.prototype,"hide");customElements.get("frc-line-chart-axis")||customElements.define("frc-line-chart-axis",Tl);var Ape=Object.defineProperty,HM=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Ape(e,t,n),n};const kpe=["nw","n","ne","w","e","sw","s","se"];let By=class extends ut{constructor(){super(...arguments),this.position="n",this.direction="horizontal",this.hide=!1,this.inside=!1}};HM([q({type:String})],By.prototype,"position");HM([q({type:String})],By.prototype,"direction");HM([q({type:Boolean})],By.prototype,"hide");HM([q({type:Boolean})],By.prototype,"inside");customElements.get("frc-line-chart-legend")||customElements.define("frc-line-chart-legend",By);const Cpe={dashboard:{displayName:i=>(i==null?void 0:i.getAttribute("chart-title"))||"Line Chart",defaultHtml:`
      <frc-line-chart chart-title="Line Chart">
        <frc-line-chart-legend></frc-line-chart-legend>
        <frc-line-chart-axis side="left"></frc-line-chart-axis>
        <frc-line-chart-axis side="right"></frc-line-chart-axis>
        <frc-line-chart-data></frc-line-chart-data>
      </frc-line-chart>
    `},description:"A component used to graph data over time.",properties:{chartTitle:{type:"String",attribute:"chart-title",reflect:!0},viewTime:{type:"Number",attribute:"view-time",defaultValue:10}},slots:[{name:"",allowedChildren:["frc-line-chart-data","frc-line-chart-axis","frc-line-chart-legend"]}]},$pe={dashboard:{topLevel:!1,displayName:i=>i?`Chart Axis (${i.getAttribute("side")||"left"})`:"Line Chart Axis"},properties:{min:{type:"Number",defaultValue:-1},max:{type:"Number",defaultValue:1},lockMin:{type:"Boolean",attribute:"lock-min"},lockMax:{type:"Boolean",attribute:"lock-max"},invert:{type:"Boolean"},side:{type:"String",defaultValue:"left",reflect:!0,input:{type:"StringDropdown",allowCustomValues:!1,getOptions(){return["left","right"]}}},hideGridLines:{type:"Boolean",attribute:"hide-grid-lines"},hide:{type:"Boolean"}}},Lpe={dashboard:{topLevel:!1,displayName:i=>{if(!i)return"Line Chart Data";const e=[...i.parentElement.children].filter(t=>t.tagName.toLowerCase()==="frc-line-chart-data").indexOf(i);return i.getAttribute("display-name")||`Data ${e}`}},properties:{value:{type:"Number",primary:!0},color:{type:"String",input:{type:"ColorPicker"}},hide:{type:"Boolean"},yAxis:{type:"Number",attribute:"y-axis"},displayName:{type:"String",attribute:"display-name",reflect:!0}}},Rpe={dashboard:{topLevel:!1,displayName:"Chart Legend"},properties:{position:{type:"String",defaultValue:"n",input:{type:"StringDropdown",getOptions:()=>kpe}},direction:{type:"String",defaultValue:"horizontal",input:{type:"StringDropdown",getOptions:()=>["horizontal","vertical"]}},hide:{type:"Boolean"},inside:{type:"Boolean"}}},Ppe={"frc-line-chart":Cpe,"frc-line-chart-axis":$pe,"frc-line-chart-data":Lpe,"frc-line-chart-legend":Rpe};var Npe=Object.getPrototypeOf,Ipe=Reflect.get,Dpe=(i,e,t)=>Ipe(Npe(i),t,e),Ope=Object.defineProperty,Zc=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Ope(e,t,n),n};const Upe={dashboard:{displayName:"Voltage View"},properties:{value:{type:"Number"},max:{type:"Number",defaultValue:5},min:{type:"Number"},center:{type:"Number"},precision:{type:"Number",defaultValue:2},hideText:{type:"Boolean",attribute:"hide-text"},numTickMarks:{type:"Number",defaultValue:3,attribute:"num-tick-marks"},unit:{type:"String",defaultValue:"V"}}},sx=class extends Eo{constructor(){super(...arguments),this.value=0,this.min=0,this.max=5,this.center=0,this.precision=2,this.hideText=!1,this.numTickMarks=3,this.unit="V"}};sx.styles=[...Dpe(sx,sx,"styles"),$t`
      [part='bar']::part(foreground) {
        background: var(--frc-voltage-view-foreground-color, #ffbd2f);
      }
    `];let El=sx;Zc([q({type:Number})],El.prototype,"value");Zc([q({type:Number})],El.prototype,"min");Zc([q({type:Number})],El.prototype,"max");Zc([q({type:Number})],El.prototype,"center");Zc([q({type:Number})],El.prototype,"precision");Zc([q({type:Boolean,attribute:"hide-text"})],El.prototype,"hideText");Zc([q({type:Number,attribute:"num-tick-marks"})],El.prototype,"numTickMarks");Zc([q({type:String})],El.prototype,"unit");customElements.get("frc-voltage-view")||customElements.define("frc-voltage-view",El);var zpe=Object.defineProperty,V$=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&zpe(e,t,n),n};function E1(i,e){const t=[];for(let r=i;r<e;r+=1)t.push(r);return t}const E7=class extends ut{constructor(){super(...arguments),this.voltage=0,this.totalCurrent=0,this.channels=Array(16).fill(0)}renderChannel(e){return Ye`
      <frc-number-bar
        class="channel"
        part="channel"
        value=${this.channels[e]??0}
        min="0"
        max="40"
        center="0"
        precision="2"
        ?hide-text="${!1}"
        num-tick-marks="0"
        unit="A"
      ></frc-number-bar>
    `}render(){return Ye`
      <div part="channels">
        ${E1(0,8).map(e=>Ye`
            <label part="channel-label">
              <slot name="${`channel-label${e}`}">Ch. ${e}</slot>
            </label>
          `)}
        ${E1(0,8).map(e=>Ye` ${this.renderChannel(e)} `)}
        ${E1(8,16).map(e=>Ye`
            <label part="channel-label">
              <slot name="${`channel-label${e}`}">Ch. ${e}</slot>
            </label>
          `)}
        ${E1(8,16).map(e=>Ye` ${this.renderChannel(e)} `)}
      </div>
      <div part="voltage-and-total-current">
        <label part="voltage-label">
          <slot name="voltage-label">Voltage</slot>
        </label>
        <label part="total-current-label">
          <slot name="total-current">Total Current</slot>
        </label>
        <frc-voltage-view
          class="voltage"
          part="voltage"
          value="${this.voltage}"
          min="0"
          max="15"
          center="0"
          precision="2"
          ?hide-text="${!1}"
          num-tick-marks="0"
        ></frc-voltage-view>
        <frc-number-bar
          class="total-current"
          part="total-current"
          value="${this.totalCurrent}"
          min="0"
          max="500"
          center="0"
          precision="2"
          ?hide-text="${!1}"
          num-tick-marks="0"
          unit="A"
        ></frc-number-bar>
      </div>
    `}};E7.styles=$t`
    :host {
      display: inline-block;
      width: 350px;
      margin: 5px;
      color: var(--frc-label-text-color, black);
      font-family: sans-serif;
      font-size: 16px;
    }

    [part='channels'] {
      display: grid;
      grid-auto-flow: column;
      grid-template-columns: min-content 1fr min-content 1fr;
      grid-template-rows: auto auto auto auto auto auto auto auto;
      width: 100%;
      height: auto;
      align-items: center;
      gap: 3px;
    }

    .channel,
    .voltage,
    .total-current {
      width: auto;
    }

    [part='channel-label'] {
      padding-left: 5px;
      text-align: right;
      white-space: nowrap;
    }

    [part='voltage-and-total-current'] {
      margin-top: 5px;
      display: grid;
      grid-auto-flow: column;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto;
      column-gap: 10px;
      width: 100%;
      height: auto;
      align-items: center;
      gap: 3px;
    }

    [part='voltage-and-total-current'] {
      white-space: nowrap;
    }
  `;let GM=E7;V$([q({type:Number})],GM.prototype,"voltage");V$([q({type:Number,attribute:"total-current"})],GM.prototype,"totalCurrent");V$([q({type:Array})],GM.prototype,"channels");customElements.get("frc-pdp")||customElements.define("frc-pdp",GM);var A7=i=>{throw TypeError(i)},Fpe=(i,e,t)=>e.has(i)||A7("Cannot "+t),Bpe=(i,e,t)=>e.has(i)?A7("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Vpe=(i,e,t)=>(Fpe(i,e,"access private method"),t),jpe=Object.defineProperty,WM=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&jpe(e,t,n),n};const Hpe={dashboard:{displayName:"Number Slider"},properties:{value:{type:"Number",primary:!0,changeEvent:"change"},min:{type:"Number",defaultValue:-1},max:{type:"Number",defaultValue:1},blockIncrement:{type:"Number",attribute:"block-increment",defaultValue:.05}}};var R3,k7;const C7=class extends ut{constructor(){super(...arguments),Bpe(this,R3),this.value=0,this.min=-1,this.max=1,this.blockIncrement=.05}onChange(e){this.value=parseFloat(e.target.value),Vpe(this,R3,k7).call(this)}firstUpdated(){setTimeout(()=>{const e=this.renderRoot.querySelector("#slider");e&&(e.value=this.value)})}render(){const e=Math.min(this.min,this.max),t=Math.max(this.min,this.max),r=Math.max(e,Math.min(this.value,t));return Ye`
      <div class="slider-container">
        <input
          id="slider"
          type="range"
          .value="${r.toString()}"
          min="${e}"
          max="${t}"
          step="${this.blockIncrement}"
          @change="${this.onChange}"
        />

        <frc-axis ticks="5" min=${e} max=${t}></frc-axis>
      </div>
    `}};R3=new WeakSet,k7=function(){this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0,composed:!0}))},C7.styles=$t`
    :host {
      display: inline-block;
      height: 50px;
      width: 300px;
    }

    .slider-container {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 15px;
    }

    input {
      width: 100%;
    }

    table-axis {
      width: calc(85% - 14px);
      max-width: calc(100% - 74px);
      display: block;
    }
  `;let Vy=C7;WM([q({type:Number})],Vy.prototype,"value");WM([q({type:Number})],Vy.prototype,"min");WM([q({type:Number})],Vy.prototype,"max");WM([q({type:Number,attribute:"block-increment"})],Vy.prototype,"blockIncrement");customElements.get("frc-number-slider")||customElements.define("frc-number-slider",Vy);var Gpe=Object.defineProperty,Wpe=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Gpe(e,t,n),n};const qpe={dashboard:{displayName:"Toggle Switch"},properties:{toggled:{type:"Boolean",primary:!0,changeEvent:"toggle"}}},$7=class extends ut{constructor(){super(...arguments),this.toggled=!1}firstUpdated(){new ResizeObserver(()=>this.resized()).observe(this)}resized(){const e=this.getBoundingClientRect(),{width:t,height:r}=e,n=this.renderRoot.querySelector("[part=switch]");n&&(n.style.borderRadius=`${t}px`,n.style.setProperty("--circle-width",`${r*.8}px`),n.style.setProperty("--circle-height",`${r*.8}px`),n.style.setProperty("--circle-left",`${t/2-r*.8}px`),n.style.setProperty("--circle-top",`${r*.1}px`),n.style.setProperty("--circle-translate-x",`${t-r}px`))}onClick(){this.toggled=!this.toggled;const e=new CustomEvent("toggle",{detail:{toggled:this.toggled},bubbles:!0,composed:!0});this.dispatchEvent(e)}render(){return Ye`
      <label class="switch" @click="${this.onClick}">
        <input type="checkbox" .checked="${this.toggled}" disabled />
        <span part="switch">
          <span part="knob"></span>
        </span>
      </label>
    `}};$7.styles=$t`
    :host {
      display: inline-block;
      width: 60px;
      height: 34px;
    }
    .switch {
      position: relative;
      display: inline-block;
      width: 100%;
      height: 100%;
      margin-bottom: 0;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    [part='switch'] {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--frc-toggle-switch-color, #ccc);
      -webkit-transition: 0.4s;
      transition: 0.4s;
    }
    [part='knob'] {
      position: absolute;
      display: inline-block;
      content: '';
      height: var(--circle-height);
      width: var(--circle-width);
      left: var(--circle-top);
      top: var(--circle-top);
      background-color: white;
      -webkit-transition: 0.4s;
      transition: 0.4s;
      border-radius: 50%;
    }
    input:checked + [part='switch'] {
      background-color: #2196f3;
    }
    input:focus + [part='switch'] {
      box-shadow: 0 0 1px #2196f3;
    }
    input:checked + [part='switch'] [part='knob'] {
      transform: translateX(var(--circle-translate-x));
    }
  `;let L7=$7;Wpe([q({type:Boolean})],L7.prototype,"toggled");customElements.get("frc-toggle-switch")||customElements.define("frc-toggle-switch",L7);var Xpe=Object.defineProperty,j$=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Xpe(e,t,n),n};const Ype={dashboard:{displayName:"Toggle Button"},properties:{toggled:{type:"Boolean",defaultValue:!1,primary:!0,changeEvent:"toggle"},label:{type:"String",defaultValue:"Button"}}},R7=class extends ut{constructor(){super(...arguments),this.toggled=!1,this.disabled=!1,this.label="Button"}onClick(){this.disabled||(this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("toggle",{detail:{toggled:this.toggled},bubbles:!0,composed:!0})))}render(){return Ye`
      <button class="${this.toggled?"toggled":""}" @click="${this.onClick}">
        ${this.label}
      </button>
    `}};R7.styles=$t`
    :host {
      display: inline-block;
      width: 100px;
      height: 50px;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    button {
      width: 100%;
      height: 100%;
      margin: 0;
      border: none;
      border-radius: 4px;
      font-size: inherit;
      font-family: inherit;
      letter-spacing: inherit;
      background: var(--frc-button-background-color, rgb(230, 230, 230));
      color: var(--frc-button-text-color, black);
    }

    .toggled {
      background: var(--frc-button-toggled-background-color, black);
      color: var(--frc-button-toggled-text-color, white);
      font-weight: bold;
    }
  `;let qM=R7;j$([q({type:Boolean})],qM.prototype,"toggled");j$([q({type:Boolean})],qM.prototype,"disabled");j$([q({type:String})],qM.prototype,"label");customElements.get("frc-toggle-button")||customElements.define("frc-toggle-button",qM);var P7=i=>{throw TypeError(i)},Kpe=(i,e,t)=>e.has(i)||P7("Cannot "+t),Zpe=(i,e,t)=>e.has(i)?P7("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),ZI=(i,e,t)=>(Kpe(i,e,"access private method"),t),Jpe=Object.defineProperty,H$=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Jpe(e,t,n),n};const Qpe={dashboard:{displayName:"Toggle Group"},properties:{options:{type:"Array",changeEvent:"optionsUpdate",defaultValue:["On","Off"],input:{type:"StringArray"}},value:{primary:!0,type:"String",changeEvent:"change",input:{type:"StringDropdown",allowCustomValues:!1,getOptions({options:i}){return i}}},direction:{type:"String",defaultValue:"vertical",input:{type:"StringDropdown",allowCustomValues:!1,getOptions(){return["vertical","horizontal"]}}}}};var ox,N7,I7;const D7=class extends ut{constructor(){super(...arguments),Zpe(this,ox),this.options=["On","Off"],this.value="",this.direction="vertical"}async setValue(e){this.value=e}updated(e){e.has("options")&&!this.options.includes(this.value)&&(this.value=this.options[0]??""),e.has("value")&&ZI(this,ox,N7).call(this),e.has("options")&&ZI(this,ox,I7).call(this),e.has("direction")&&this.style.setProperty("flex-direction",this.direction==="vertical"?"column":"row")}render(){return Ye`
      ${this.options.map(e=>Ye`
          <button
            class="${this.value===e?"toggled":""}"
            @click="${()=>this.setValue(e)}"
          >
            ${e}
          </button>
        `)}
    `}};ox=new WeakSet,N7=function(){this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0,composed:!0}))},I7=function(){this.dispatchEvent(new CustomEvent("optionsUpdate",{detail:{options:this.options},bubbles:!0,composed:!0}))},D7.styles=$t`
    :host {
      display: inline-flex;
      flex-direction: column;
      width: 150px;
      height: 300px;
      gap: 0;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    button {
      width: 100%;
      height: 100%;
      margin: 0;
      border: none;
      font-size: inherit;
      font-family: inherit;
      letter-spacing: inherit;
      background: var(--frc-button-background-color, rgb(230, 230, 230));
      color: var(--frc-button-text-color, black);
      flex: 1;
    }

    .toggled {
      background: var(--frc-button-toggled-background-color, black);
      color: var(--frc-button-toggled-text-color, white);
      font-weight: bold;
    }

    [part='button'] {
      border-radius: 0;
      margin: 0;
      flex: 1;
      font-size: inherit;
      height: 100%;
      padding: 0;
    }
  `;let XM=D7;H$([q({type:Array})],XM.prototype,"options");H$([q({type:String})],XM.prototype,"value");H$([q({type:String})],XM.prototype,"direction");customElements.get("frc-toggle-group")||customElements.define("frc-toggle-group",XM);var O7=i=>{throw TypeError(i)},efe=(i,e,t)=>e.has(i)||O7("Cannot "+t),tfe=(i,e,t)=>e.has(i)?O7("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),ife=(i,e,t)=>(efe(i,e,"access private method"),t),rfe=Object.defineProperty,U7=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&rfe(e,t,n),n};const nfe={dashboard:{displayName:"Relay"},properties:{value:{type:"String",defaultValue:"Off",reflect:!0,primary:!0,input:{type:"StringDropdown",allowCustomValues:!1,getOptions(){return["Off","On","Forward","Reverse"]}}}}},sfe=["Off","On","Forward","Reverse"];var P3,z7;const F7=class extends ut{constructor(){super(...arguments),tfe(this,P3),this.value="Off",this.direction="vertical"}render(){return Ye`
      <frc-toggle-group
        @change=${ife(this,P3,z7)}
        .options=${sfe}
        value=${this.value}
        direction=${this.direction}
      ></frc-toggle-group>
    `}};P3=new WeakSet,z7=function(i){this.value=i.detail.value},F7.styles=$t`
    :host {
      display: inline-block;
      width: 150px;
      height: 300px;
    }

    frc-toggle-group {
      width: 100%;
      height: 100%;
    }
  `;let G$=F7;U7([q({type:String})],G$.prototype,"value");U7([q({type:String})],G$.prototype,"direction");customElements.get("frc-relay")||customElements.define("frc-relay",G$);var ofe=Object.defineProperty,jy=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&ofe(e,t,n),n};function B7(i){const e=(i==null?void 0:i.getChildren())??{};return Object.values(e).filter(t=>{var r;return t.hasChildren()&&((r=t.getChildren()[".type"])==null?void 0:r.getSourceValue())==="line"}).map(t=>{const r=t.getChildren();return{angle:r.angle.getSourceValue()??0,color:r.color.getSourceValue()??"#ffffff",length:r.length.getSourceValue()??1,weight:r.weight.getSourceValue()??1,children:B7(t)}})}function afe(i){const e=(i==null?void 0:i.getChildren())??{};return Object.values(e).filter(t=>t.hasChildren()).map(t=>({x:t.getChildren().x.getSourceValue()??0,y:t.getChildren().y.getSourceValue()??0,children:B7(t)}))}const V7=class extends ut{constructor(){super(...arguments),this.backgroundColor="#000020",this.dims=[3,3],this.roots=[],this.mechanism2d=this.getMechanism2d()}firstUpdated(){new ResizeObserver(()=>{this.resized()}).observe(this),requestAnimationFrame(()=>{this.updateMechanism2d()})}getMech2dSize(){const{width:e,height:t}=this.getBoundingClientRect(),[r,n]=this.dims;return n/r*e<t?[e,n/r*e]:[r/n*t,t]}resized(){this.requestUpdate()}getSize(){const{width:e}=this.getBoundingClientRect();return e}updated(e){e.has("backgroundColor")&&this._svg.style.setProperty("background-color",this.backgroundColor),e.has("dims")&&this.requestUpdate()}updateMechanism2d(){this.mechanism2d=this.getMechanism2d(),requestAnimationFrame(()=>{this.updateMechanism2d()})}getMechanism2d(){return{backgroundColor:this.backgroundColor,dims:this.dims,roots:this.roots}}render(){const[e,t]=this.getMech2dSize();return xi`
      <svg
        style="width: ${e}px; height: ${t}px; background: ${this.mechanism2d.backgroundColor}"
      >
        ${this.mechanism2d.roots.map(r=>this.renderMechanism2dRoot(r))}
      </svg>
    `}renderMechanism2dRoot(e){const[t,r]=this.dims,[n,s]=this.getMech2dSize(),o=e.x/t*n,a=e.y/r*s;return xi`
      <g style="transform: translate(${o}px, ${s-a}px)">
        ${e.children.map(l=>this.renderMechanism2dLine(l))}
      </g>
    `}renderMechanism2dLine(e){const[t]=this.dims,[r]=this.getMech2dSize(),n=r/t*e.length,s=e.angle*Math.PI/180,o=Math.cos(s)*n,a=-Math.sin(s)*n,l=Math.max(1,e.weight*2/3);return xi`
      <line stroke=${e.color} stroke-width=${l} x1="0" y1="0" x2="${o}px" y2="${a}px"  />
      <g style="transform: translate(${o}px, ${a}px) rotate(${-e.angle}deg)">
        ${e.children.map(c=>this.renderMechanism2dLine(c))}
      </g>
    `}};V7.styles=$t`
    :host {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 300px;
      height: 300px;
    }

    svg {
      width: 100%;
      height: 100%;
    }
  `;let Um=V7;jy([q({type:String,attribute:"background-color"})],Um.prototype,"backgroundColor");jy([q({type:Array})],Um.prototype,"dims");jy([q({type:Array})],Um.prototype,"roots");jy([ni("svg")],Um.prototype,"_svg");jy([zi()],Um.prototype,"mechanism2d");customElements.get("frc-mechanism2d")||customElements.define("frc-mechanism2d",Um);var lfe=Object.defineProperty,YM=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&lfe(e,t,n),n};const cfe={dashboard:{displayName:"Mechanism2d"},properties:{backgroundColor:{type:"String",attribute:"background-color",defaultValue:"#000020",input:{type:"ColorPicker"}},dims:{type:"Array",defaultValue:[3,3],input:{type:"NumberArray"}},source:{type:"Source",primary:!0,input:{type:"None"}}}},j7=class extends ut{constructor(){super(...arguments),this.backgroundColor="#000020",this.dims=[3,3],this.roots=[]}updateMechanism2d(){this.roots=this.source?afe(this.source):[],requestAnimationFrame(()=>{this.updateMechanism2d()})}firstUpdated(){this.updateMechanism2d()}render(){return Ye`
      <frc-mechanism2d
        .roots=${this.roots}
        .backgroundColor=${this.backgroundColor}
        .dims=${this.dims}
      ></frc-mechanism2d>
    `}};j7.styles=$t`
    :host {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 300px;
      height: 300px;
    }

    frc-mechanism2d {
      width: 100%;
      height: 100%;
    }
  `;let Hy=j7;YM([q({type:String,attribute:"background-color"})],Hy.prototype,"backgroundColor");YM([q({type:Array})],Hy.prototype,"dims");YM([q({type:Object})],Hy.prototype,"source");YM([zi()],Hy.prototype,"roots");customElements.get("frc-mechanism2d-wrapper")||customElements.define("frc-mechanism2d-wrapper",Hy);var ufe=Object.defineProperty,H7=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&ufe(e,t,n),n};const hfe={dashboard:{displayName:"Encoder"},properties:{distance:{type:"Number"},speed:{type:"Number"}}},G7=class extends ut{constructor(){super(...arguments),this.distance=0,this.speed=0}render(){return Ye`
      <label class="distance-label">Distance</label>
      <span>${this.distance}</span>
      <label class="speed-label">Speed</label>
      <span>${this.speed}</span>
    `}};G7.styles=$t`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: 50% 50%;
      column-gap: 15px;
      row-gap: 5px;
      align-items: center;
      width: 250px;
      font-family: sans-serif;
    }

    label {
      font-weight: bold;
      text-align: right;
      color: var(--frc-encoder-label-color, #000);
    }

    span {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      padding: 5px;
      border: 1px dashed;
      border-color: var(--frc-encoder-value-color, #666);
      color: var(--frc-encoder-value-color, #666);
      border-radius: 3px;
      box-sizing: border-box;
    }
  `;let W$=G7;H7([q({type:Number})],W$.prototype,"distance");H7([q({type:Number})],W$.prototype,"speed");customElements.get("frc-encoder")||customElements.define("frc-encoder",W$);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function gc(i,e,t){return i?e(i):t==null?void 0:t(i)}var dfe=Object.defineProperty,Gy=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&dfe(e,t,n),n};const pfe={dashboard:{displayName:"Network Alerts"},properties:{errors:{type:"Array"},warnings:{type:"Array"},infos:{type:"Array"},level:{type:"String",defaultValue:"info",input:{type:"StringDropdown",allowCustomValues:!1,getOptions(){return["error","warning","info"]}}},hideTitle:{type:"Boolean",attribute:"hide-title"}}},ffe="m40-120 440-760 440 760H40Zm138-80h604L480-720 178-200Zm302-40q17 0 28.5-11.5T520-280q0-17-11.5-28.5T480-320q-17 0-28.5 11.5T440-280q0 17 11.5 28.5T480-240Zm-40-120h80v-200h-80v200Zm40-100Z",mfe="M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z",gfe="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z",W7=class extends ut{constructor(){super(...arguments),this.errors=[],this.warnings=[],this.infos=[],this.level="info",this.hideTitle=!1}render(){return Ye`
      <div class="alerts-container">
        ${gc(!this.hideTitle,()=>Ye` <header>Alerts</header> `)}
        <div class="alerts-list">
          ${this.errors.map(e=>Ye`
              <div class="alert">
                <div class="icon">
                  <frc-icon
                    color="red"
                    svg-path=${mfe}
                    view-box="0 -960 960 960"
                  ></frc-icon>
                </div>
                <label>${e}</label>
              </div>
            `)}
          ${gc(this.level!=="error",()=>Ye`
              ${this.warnings.map(e=>Ye`
                  <div class="alert">
                    <div class="icon">
                      <frc-icon
                        color="yellow"
                        svg-path=${ffe}
                        view-box="0 -960 960 960"
                      ></frc-icon>
                    </div>
                    <label>${e}</label>
                  </div>
                `)}
            `)}
          ${gc(this.level==="info",()=>Ye`
              ${this.infos.map(e=>Ye`
                  <div class="alert">
                    <div class="icon">
                      <frc-icon
                        color="green"
                        svg-path=${gfe}
                        view-box="0 -960 960 960"
                      ></frc-icon>
                    </div>
                    <label>${e}</label>
                  </div>
                `)}
            `)}
        </div>
      </div>
    `}};W7.styles=$t`
    :host {
      font-family: sans-serif;
      display: inline-block;
      width: 300px;
      height: auto;
      box-sizing: border-box;
      color: var(--frc-network-alerts-text-color, black);
    }

    .alerts-container {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    header {
      background: var(--frc-network-alerts-header-color, lightblue);
      padding: 10px 0;
      text-align: center;
      font-weight: bold;
    }

    .alerts-list {
      padding: 8px 5px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 9px;
      flex: 1;
      overflow-y: auto;
    }

    .alert {
      display: flex;
      align-items: center;
      gap: 9px;
    }

    .icon {
      width: 24px;
      height: 24px;
    }

    .alert label {
      flex: 1;
    }

    .icon frc-icon {
      width: 100%;
      height: 100%;
    }
  `;let zm=W7;Gy([q({type:Array})],zm.prototype,"errors");Gy([q({type:Array})],zm.prototype,"warnings");Gy([q({type:Array})],zm.prototype,"infos");Gy([q({type:String})],zm.prototype,"level");Gy([q({type:Boolean,attribute:"hide-title"})],zm.prototype,"hideTitle");customElements.get("frc-network-alerts")||customElements.define("frc-network-alerts",zm);var q7=i=>{throw TypeError(i)},_fe=(i,e,t)=>e.has(i)||q7("Cannot "+t),q$=(i,e,t)=>e.has(i)?q7("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Hn=(i,e,t)=>(_fe(i,e,"access private method"),t),yfe=Object.defineProperty,Wy=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&yfe(e,t,n),n};const vfe={dashboard:{displayName:"PID Command"},properties:{p:{type:"Number",changeEvent:"change"},i:{type:"Number",changeEvent:"change"},d:{type:"Number",changeEvent:"change"},setpoint:{type:"Number",changeEvent:"change"},running:{type:"Boolean",reflect:!0,changeEvent:"change"}}};var Bu,Pp;const X7=class extends ut{constructor(){super(...arguments),q$(this,Bu),this.p=0,this.i=0,this.d=0,this.setpoint=0,this.running=!1}onPChange(e){this.p=parseFloat(e.target.value),Hn(this,Bu,Pp).call(this)}onIChange(e){this.i=parseFloat(e.target.value),Hn(this,Bu,Pp).call(this)}onDChange(e){this.d=parseFloat(e.target.value),Hn(this,Bu,Pp).call(this)}onSetpointChange(e){this.setpoint=parseFloat(e.target.value),Hn(this,Bu,Pp).call(this)}onRunningClick(){this.running=!this.running,Hn(this,Bu,Pp).call(this)}render(){return Ye`
      <input
        type="checkbox"
        id="running"
        .checked=${this.running}
        @click=${this.onRunningClick}
      />
      <label for="running">Running</label>
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Setpoint</label>
      <input
        type="number"
        .value=${this.setpoint}
        @change=${this.onSetpointChange}
      />
    `}};Bu=new WeakSet,Pp=function(){this.dispatchEvent(new CustomEvent("change",{detail:{p:this.p,i:this.i,d:this.d,setpoint:this.setpoint,running:this.running}}))},X7.styles=$t`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      width: 150px;
      height: auto;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input[type='number'] {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }

    input[type='checkbox'] {
      justify-self: right;
      margin: 0;
      width: 16px;
      height: 16px;
    }

    label[for='running'] {
      justify-self: left;
    }
  `;let Fm=X7;Wy([q({type:Number})],Fm.prototype,"p");Wy([q({type:Number})],Fm.prototype,"i");Wy([q({type:Number})],Fm.prototype,"d");Wy([q({type:Number})],Fm.prototype,"setpoint");Wy([q({type:Boolean,reflect:!0})],Fm.prototype,"running");customElements.get("frc-pid-command")||customElements.define("frc-pid-command",Fm);var bfe=Object.defineProperty,KM=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&bfe(e,t,n),n};const xfe={dashboard:{displayName:"PID Controller"},properties:{p:{type:"Number"},i:{type:"Number"},d:{type:"Number"},setpoint:{type:"Number"}}};var Np,A0;const Y7=class extends ut{constructor(){super(...arguments),q$(this,Np),this.p=0,this.i=0,this.d=0,this.setpoint=0}onPChange(e){this.p=parseFloat(e.target.value),Hn(this,Np,A0).call(this)}onIChange(e){this.i=parseFloat(e.target.value),Hn(this,Np,A0).call(this)}onDChange(e){this.d=parseFloat(e.target.value),Hn(this,Np,A0).call(this)}onSetpointChange(e){this.setpoint=parseFloat(e.target.value),Hn(this,Np,A0).call(this)}render(){return Ye`
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Setpoint</label>
      <input
        type="number"
        .value=${this.setpoint}
        @change=${this.onSetpointChange}
      />
    `}};Np=new WeakSet,A0=function(){this.dispatchEvent(new CustomEvent("change",{detail:{p:this.p,i:this.i,d:this.d,setpoint:this.setpoint}}))},Y7.styles=$t`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      height: auto;
      width: 150px;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }
  `;let qy=Y7;KM([q({type:Number})],qy.prototype,"p");KM([q({type:Number})],qy.prototype,"i");KM([q({type:Number})],qy.prototype,"d");KM([q({type:Number})],qy.prototype,"setpoint");customElements.get("frc-pid-controller")||customElements.define("frc-pid-controller",qy);var wfe=Object.defineProperty,ZM=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&wfe(e,t,n),n};const Mfe={dashboard:{displayName:"Profiled PID Controller"},properties:{p:{type:"Number"},i:{type:"Number"},d:{type:"Number"},goal:{type:"Number"}}};var Ip,k0;const K7=class extends ut{constructor(){super(...arguments),q$(this,Ip),this.p=0,this.i=0,this.d=0,this.goal=0}onPChange(e){this.p=parseFloat(e.target.value),Hn(this,Ip,k0).call(this)}onIChange(e){this.i=parseFloat(e.target.value),Hn(this,Ip,k0).call(this)}onDChange(e){this.d=parseFloat(e.target.value),Hn(this,Ip,k0).call(this)}onGoalChange(e){this.goal=parseFloat(e.target.value),Hn(this,Ip,k0).call(this)}render(){return Ye`
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Goal</label>
      <input type="number" .value=${this.goal} @change=${this.onGoalChange} />
    `}};Ip=new WeakSet,k0=function(){this.dispatchEvent(new CustomEvent("change",{detail:{p:this.p,i:this.i,d:this.d,goal:this.goal}}))},K7.styles=$t`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      height: auto;
      width: 150px;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }
  `;let Xy=K7;ZM([q({type:Number})],Xy.prototype,"p");ZM([q({type:Number})],Xy.prototype,"i");ZM([q({type:Number})],Xy.prototype,"d");ZM([q({type:Number})],Xy.prototype,"goal");customElements.get("frc-profiled-pid-controller")||customElements.define("frc-profiled-pid-controller",Xy);var Z7=i=>{throw TypeError(i)},Sfe=(i,e,t)=>e.has(i)||Z7("Cannot "+t),J7=(i,e,t)=>e.has(i)?Z7("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),N3=(i,e,t)=>(Sfe(i,e,"access private method"),t),Tfe=Object.defineProperty,Yy=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Tfe(e,t,n),n},I3,Q7;const eV=class extends ut{constructor(){super(...arguments),J7(this,I3),this.nodeId=1,this.selected=!1,this.cones=0,this.cubes=0,this.background=""}updated(e){(e.has("selected")||e.has("nodeId"))&&N3(this,I3,Q7).call(this)}render(){return Ye`
      <div style="text-align: center; margin-block:auto;">${this.nodeId}</div>

      <!-- empty on:click binding above passes click events to be bound on the Node component -->
      ${xi`
        <svg
          viewBox="-2 -2 28 28"
          style="margin-right: 8px; width:100%; height:100%; pointer-events:none"
        >
          ${gc(this.cubes>1,()=>xi`
              <polygon
                points="8,8 8,20 20,20, 20,8"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
              <polygon
                points="4,4 4,16 16,16, 16,4"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `)}
          ${gc(this.cubes===1,()=>xi`
              <polygon
                points="6,6 6,18 18,18, 18,6"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `)}
          ${gc(this.cones>1,()=>xi`
              <polygon
                points="13,8 11,8 8,22 5,22 19,22 16,22"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
              <polygon
                points="13,4 11,4 8,18 5,18 19,18 16,18"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `)}
          
          ${gc(this.cones===1,()=>xi`
              <polygon
                points="13,6 11,6 8,20 5,20 19,20 16,20"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `)}  
        </svg>
      `}
    `}};I3=new WeakSet,Q7=function(){this.selected?this.background="green":this.nodeId>=1&&this.nodeId<=9?this.background="lightgray":(this.nodeId-1)%3===1?this.background="purple":this.background="yellow",this.style.setProperty("background-color",this.background)},eV.styles=$t`
    :host {
      display: block;
      color: black;
      font-size: 2em;
      height: 100%;
      flex-grow: 1;
      border: 1px solid black;
      box-sizing: border-box;
    }
  `;let Bm=eV;Yy([q({type:Number,attribute:"node-id"})],Bm.prototype,"nodeId");Yy([q({type:Boolean})],Bm.prototype,"selected");Yy([q({type:Number})],Bm.prototype,"cones");Yy([q({type:Number})],Bm.prototype,"cubes");Yy([zi()],Bm.prototype,"background");customElements.get("frc-scoring-grid-node")||customElements.define("frc-scoring-grid-node",Bm);var Efe=Object.defineProperty,sd=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Efe(e,t,n),n};const Afe={dashboard:{displayName:"Scoring Grid"},properties:{cubesScored:{type:"Array",attribute:"cubes-scored",input:{type:"NumberArray"}},conesScored:{type:"Array",attribute:"cones-scored",input:{type:"NumberArray"}},hideLinks:{type:"Boolean",attribute:"hide-links"},reverseRow:{type:"Boolean",attribute:"reverse-row"},reverseCol:{type:"Boolean",attribute:"reverse-col"}}};function vT(i,e=!1){return e?9-(i-1)%9:1+(i-1)%9}function JI(i,e=!1){return e?3-Math.floor((i-1)/9):Math.floor((i-1)/9)+1}function kfe(i,e){return Array.from(Array(e+1).keys()).slice(i)}var ax,tV,iV;const rV=class extends ut{constructor(){super(...arguments),J7(this,ax),this.selection=0,this.cubesScored=[],this.conesScored=[],this.hideLinks=!1,this.reverseRow=!1,this.reverseCol=!1,this.leftOfLinks=[]}updated(e){(e.has("cubesScored")||e.has("conesScored"))&&N3(this,ax,iV).call(this)}renderLinks(){return this.hideLinks?Ye``:Ye`
      ${this.leftOfLinks.map(e=>Ye`
          <div
            class="link"
            style=${of({gridColumn:`${Math.min(vT(e,this.reverseCol),vT(e+2,this.reverseCol))} / span 3`,gridRow:JI(e,this.reverseRow)})}
          ></div>
        `)}
    `}render(){return Ye`
      <div class="grid">
        ${kfe(1,27).map(e=>Ye`
            <div
              style=${of({gridColumn:vT(e,this.reverseCol),gridRow:JI(e,this.reverseRow)})}
            >
              <frc-scoring-grid-node
                node-id=${e}
                ?selected=${this.selection===e}
                @click=${()=>{N3(this,ax,tV).call(this,e)}}
                cubes=${this.cubesScored.filter(t=>t===e).length}
                cones=${this.conesScored.filter(t=>t===e).length}
              >
              </frc-scoring-grid-node>
            </div>
          `)}
        ${this.renderLinks()}
      </div>
    `}};ax=new WeakSet,tV=function(i){this.selection===i?this.selection=0:this.selection=i;const e=new CustomEvent("select",{bubbles:!0,composed:!0,detail:{nodeId:this.selection}});this.dispatchEvent(e)},iV=function(){const i=[],e=this.cubesScored.concat(this.conesScored);for(let t=0;t<3;t+=1)for(let r=1;r<=7;r+=1)e.includes(t*9+r)&&e.includes(t*9+r+1)&&e.includes(t*9+r+2)&&(i.push(t*9+r),r+=2);this.leftOfLinks=i},rV.styles=$t`
    :host {
      display: inline-block;
      width: 550px;
      height: 380px;
    }

    .grid {
      display:grid;
      grid-template-columns: repeat(9, calc(100% / 9));
      grid-template-rows: repeat(3, calc(100% / 3));
      height:100%;
      width:100%;
      flex-direction:row-reverse;
      grid-auto-flow: dense;"
    }

    .link {
      border: 5px solid black;
      border-radius: 10px;
      margin: 5px;
      box-sizing: border-box;
      pointer-events: none;
    }
  `;let Jc=rV;sd([q({type:Number})],Jc.prototype,"selection");sd([q({type:Array,attribute:"cubes-scored"})],Jc.prototype,"cubesScored");sd([q({type:Array,attribute:"cones-scored"})],Jc.prototype,"conesScored");sd([q({type:Boolean,attribute:"hide-links"})],Jc.prototype,"hideLinks");sd([q({type:Boolean,attribute:"reverse-row"})],Jc.prototype,"reverseRow");sd([q({type:Boolean,attribute:"reverse-col"})],Jc.prototype,"reverseCol");sd([zi()],Jc.prototype,"leftOfLinks");customElements.get("frc-scoring-grid")||customElements.define("frc-scoring-grid",Jc);var nV=i=>{throw TypeError(i)},Cfe=(i,e,t)=>e.has(i)||nV("Cannot "+t),$fe=(i,e,t)=>e.has(i)?nV("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Lfe=(i,e,t)=>(Cfe(i,e,"access private method"),t),Rfe=Object.defineProperty,JM=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Rfe(e,t,n),n};const Pfe={dashboard:{displayName:"Command"},properties:{name:{type:"String",defaultValue:"Command"},running:{type:"Boolean",changeEvent:"toggle"},controllable:{type:"Boolean"},label:{type:"String"}}};var D3,sV;const oV=class extends ut{constructor(){super(...arguments),$fe(this,D3),this.name="Command",this.running=!1,this.controllable=!1,this.label=""}render(){return Ye`
      <frc-toggle-button
        ?disabled="${!this.controllable}"
        ?toggled="${this.running}"
        label=${this.label||this.name}
        @toggle="${Lfe(this,D3,sV)}"
      >
      </frc-toggle-button>
    `}};D3=new WeakSet,sV=function(i){i.stopPropagation(),this.running=!this.running,this.dispatchEvent(new CustomEvent("toggle",{detail:{running:this.running},bubbles:!0,composed:!0}))},oV.styles=$t`
    :host {
      display: inline-block;
      width: 100px;
      height: 50px;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    frc-toggle-button {
      width: 100%;
      height: 100%;
    }
  `;let Ky=oV;JM([q({type:String})],Ky.prototype,"name");JM([q({type:Boolean})],Ky.prototype,"running");JM([q({type:Boolean})],Ky.prototype,"controllable");JM([q({type:String})],Ky.prototype,"label");customElements.get("frc-robot-command")||customElements.define("frc-robot-command",Ky);var Nfe=Object.defineProperty,od=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Nfe(e,t,n),n};const Ife={dashboard:{displayName:"Subsystem"},properties:{default:{type:"String"},command:{type:"String"},hasCommand:{type:"Boolean",attribute:"has-command"},hasDefault:{type:"Boolean",attribute:"has-default"},label:{type:"String"},name:{type:"String"},hideName:{type:"Boolean",attribute:"hide-name"}}};var Fg;const Qc=(Fg=class extends ut{constructor(){super(...arguments),this.default="",this.command="",this.hasCommand=!1,this.hasDefault=!1,this.label="",this.name="",this.hideName=!1}static renderValue(i,e){return e?Ye`<span class="has-value">${i}</span>`:Ye`<span class="no-value">None</span>`}render(){return Ye`
      ${this.hideName?"":Ye` <header>${this.label||this.name}</header> `}
      <div class="subsystem">
        <p>
          Default command:
          ${Fg.renderValue(this.default,this.hasDefault)}
        </p>
        <p>
          Current command:
          ${Fg.renderValue(this.command,this.hasCommand)}
        </p>
      </div>
    `}},Fg.styles=$t`
    :host {
      display: inline-block;
      font-family: sans-serif;
      font-size: 16px;
      padding: 5px;
      color: var(--frc-label-text-color, black);
    }

    .subsystem {
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
    }

    p {
      margin: 0;
      margin-right: 10px;
      margin-top: 5px;
    }

    header {
      font-weight: bold;
      margin-bottom: 2px;
      color: var(--frc-robot-subsystem-header-color, purple);
    }

    .has-value {
      color: green;
    }

    .no-value {
      color: red;
    }
  `,Fg);od([q({type:String})],Qc.prototype,"default");od([q({type:String})],Qc.prototype,"command");od([q({type:Boolean,attribute:"has-command"})],Qc.prototype,"hasCommand");od([q({type:Boolean,attribute:"has-default"})],Qc.prototype,"hasDefault");od([q({type:String})],Qc.prototype,"label");od([q({type:String})],Qc.prototype,"name");od([q({type:Boolean,attribute:"hide-name"})],Qc.prototype,"hideName");let Dfe=Qc;customElements.get("frc-robot-subsystem")||customElements.define("frc-robot-subsystem",Dfe);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let QI;function Ofe(i){return(e,t)=>QA(e,t,{get(){return(this.renderRoot??QI??(QI=document.createDocumentFragment())).querySelectorAll(i)}})}var Ufe=Object.defineProperty,Al=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Ufe(e,t,n),n};let na=class extends ut{constructor(){super(...arguments),this.points=[],this.opacity=1,this.color=null,this.lineWidth=2,this.transform=[0,0,0],this.transformOrigin=[0,0],this.drawOrigin=["left","top"],this.zIndex=0,this._points=[]}updated(e){e.has("points")&&(this._points=Aw(this.points,2))}draw({ctx:e}){e.globalAlpha=Math.max(0,Math.min(1,this.opacity)),e.lineWidth=this.lineWidth??2,e.strokeStyle=this.color??"gray";const[t,r,n]=this.transform??[0,0,0];e.translate(t,r);const[s,o]=this.transformOrigin??[0,0],a=s,l=o;if(e.translate(a,l),e.rotate(-(n*Math.PI)/180),e.translate(-a,-l),this._points.length>1){for(let c=0;c<this._points.length-1;c+=1){const[u,h]=this._points[c],[d,f]=this._points[c+1];e.moveTo(u,h),e.lineTo(d,f)}e.stroke()}}};Al([q({type:Array})],na.prototype,"points");Al([q({type:Number})],na.prototype,"opacity");Al([q({type:String})],na.prototype,"color");Al([q({type:Number,attribute:"line-width"})],na.prototype,"lineWidth");Al([q({type:Array})],na.prototype,"transform");Al([q({type:Array,attribute:"transform-origin"})],na.prototype,"transformOrigin");Al([q({type:Array,attribute:"draw-origin"})],na.prototype,"drawOrigin");Al([q({type:Array,attribute:"z-index"})],na.prototype,"zIndex");Al([zi()],na.prototype,"_points");customElements.get("frc-canvas-line")||customElements.define("frc-canvas-line",na);var zfe=Object.defineProperty,zs=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&zfe(e,t,n),n};let ns=class extends ut{constructor(){super(...arguments),this.origin=[0,0],this.width=10,this.height=10,this.radii=0,this.opacity=1,this.strokeColor=null,this.strokeWidth=2,this.fillColor="gray",this.transform=[0,0,0],this.transformOrigin=[0,0],this.drawOrigin=["center","center"],this.zIndex=0}draw({ctx:e}){e.globalAlpha=Math.max(0,Math.min(1,this.opacity)),this.fillColor&&(e.fillStyle=this.fillColor),this.strokeColor&&(e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth);let[t,r]=this.origin;const[n,s]=this.drawOrigin??["center","center"];n==="center"?t-=this.width/2:n==="right"&&(t-=this.width),s==="center"?r-=this.height/2:s==="bottom"&&(r-=this.height);const[o,a,l]=this.transform??[0,0,0];t+=o,r+=a,e.translate(t,r);const[c,u]=this.transformOrigin??[0,0],h=c+this.width/2,d=u+this.height/2;e.translate(h,d),e.rotate(-(l*Math.PI)/180),e.translate(-h,-d),e.roundRect(0,0,this.width,this.height,this.radii),this.fillColor&&e.fill(),this.strokeColor&&e.stroke()}};zs([q({type:Array})],ns.prototype,"origin");zs([q({type:Number})],ns.prototype,"width");zs([q({type:Number})],ns.prototype,"height");zs([q({type:Number})],ns.prototype,"radii");zs([q({type:Number})],ns.prototype,"opacity");zs([q({type:String,attribute:"stroke-color"})],ns.prototype,"strokeColor");zs([q({type:Number,attribute:"stroke-width"})],ns.prototype,"strokeWidth");zs([q({type:String,attribute:"fill-color"})],ns.prototype,"fillColor");zs([q({type:Array})],ns.prototype,"transform");zs([q({type:Array,attribute:"transform-origin"})],ns.prototype,"transformOrigin");zs([q({type:Array,attribute:"draw-origin"})],ns.prototype,"drawOrigin");zs([q({type:Array,attribute:"z-index"})],ns.prototype,"zIndex");customElements.get("frc-canvas-rect")||customElements.define("frc-canvas-rect",ns);var Ffe=Object.defineProperty,Fs=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Ffe(e,t,n),n};let ss=class extends ut{constructor(){super(...arguments),this.origin=[0,0],this.radius=10,this.startAngle=0,this.endAngle=360,this.opacity=1,this.strokeColor=null,this.strokeWidth=2,this.fillColor="gray",this.transform=[0,0,0],this.transformOrigin=[0,0],this.drawOrigin=["center","center"],this.zIndex=0}draw({ctx:e}){e.globalAlpha=Math.max(0,Math.min(1,this.opacity)),this.fillColor&&(e.fillStyle=this.fillColor),this.strokeColor&&(e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth);let[t,r]=this.origin;const[n,s]=this.drawOrigin??["center","center"];n==="left"?t+=this.radius:n==="right"&&(t-=this.radius),s==="top"?r+=this.radius:s==="bottom"&&(r-=this.radius);const[o,a,l]=this.transform??[0,0,0];t+=o,r+=a,e.translate(t,r);const[c,u]=this.transformOrigin??[0,0],h=c,d=u;e.translate(h,d),e.rotate(-(l*Math.PI)/180),e.translate(-h,-d),e.beginPath(),e.arc(0,0,this.radius,-(this.startAngle??0)*Math.PI/180,-(this.endAngle??360)*Math.PI/180,!0),this.fillColor&&e.fill(),this.strokeColor&&e.stroke()}};Fs([q({type:Array})],ss.prototype,"origin");Fs([q({type:Number})],ss.prototype,"radius");Fs([q({type:Number,attribute:"start-angle"})],ss.prototype,"startAngle");Fs([q({type:Number,attribute:"end-angle"})],ss.prototype,"endAngle");Fs([q({type:Number})],ss.prototype,"opacity");Fs([q({type:String,attribute:"stroke-color"})],ss.prototype,"strokeColor");Fs([q({type:Number,attribute:"stroke-width"})],ss.prototype,"strokeWidth");Fs([q({type:String,attribute:"fill-color"})],ss.prototype,"fillColor");Fs([q({type:Array})],ss.prototype,"transform");Fs([q({type:Array,attribute:"transform-origin"})],ss.prototype,"transformOrigin");Fs([q({type:Array,attribute:"draw-origin"})],ss.prototype,"drawOrigin");Fs([q({type:Array,attribute:"z-index"})],ss.prototype,"zIndex");customElements.get("frc-canvas-circle")||customElements.define("frc-canvas-circle",ss);var Bfe=Object.defineProperty,ko=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Bfe(e,t,n),n};let Bs=class extends ut{constructor(){super(...arguments),this.origin=[0,0],this.sides=5,this.radius=10,this.opacity=1,this.strokeColor=null,this.strokeWidth=2,this.fillColor="gray",this.transform=[0,0,0],this.transformOrigin=[0,0],this.drawOrigin=["center","center"],this.zIndex=0}draw({ctx:e}){e.globalAlpha=Math.max(0,Math.min(1,this.opacity)),this.fillColor&&(e.fillStyle=this.fillColor),this.strokeColor&&(e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth);let[t,r]=this.origin;const[n,s]=this.drawOrigin??["center","center"];n==="left"?t+=this.radius:n==="right"&&(t-=this.radius),s==="top"?r+=this.radius:s==="bottom"&&(r-=this.radius);const[o,a,l]=this.transform??[0,0,0];t+=o,r+=a,e.translate(t,r);const[c,u]=this.transformOrigin??[0,0],h=c,d=u;if(e.translate(h,d),e.rotate(-(l*Math.PI)/180),e.translate(-h,-d),this.sides<3)return;const f=Math.PI*2/this.sides;e.beginPath();for(let g=0;g<this.sides;g+=1){const v=g*f,m=this.radius*Math.cos(v),p=this.radius*Math.sin(v);g===0?e.moveTo(m,p):e.lineTo(m,p)}e.closePath(),this.fillColor&&e.fill(),this.strokeColor&&e.stroke()}};ko([q({type:Array})],Bs.prototype,"origin");ko([q({type:Number})],Bs.prototype,"sides");ko([q({type:Number})],Bs.prototype,"radius");ko([q({type:Number})],Bs.prototype,"opacity");ko([q({type:String,attribute:"stroke-color"})],Bs.prototype,"strokeColor");ko([q({type:Number,attribute:"stroke-width"})],Bs.prototype,"strokeWidth");ko([q({type:String,attribute:"fill-color"})],Bs.prototype,"fillColor");ko([q({type:Array})],Bs.prototype,"transform");ko([q({type:Array,attribute:"transform-origin"})],Bs.prototype,"transformOrigin");ko([q({type:Array,attribute:"draw-origin"})],Bs.prototype,"drawOrigin");ko([q({type:Array,attribute:"z-index"})],Bs.prototype,"zIndex");customElements.get("frc-canvas-ngon")||customElements.define("frc-canvas-ngon",Bs);var Vfe=Object.defineProperty,X$=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Vfe(e,t,n),n};let QM=class extends ut{constructor(){super(...arguments),this.transform=[0,0,0],this.transformOrigin=[0,0],this.zIndex=0}draw(e){const{ctx:t}=e,[r,n,s]=this.transform??[0,0,0];t.translate(r,n);const[o,a]=this.transformOrigin??[0,0],l=o,c=a;t.translate(l,c),t.rotate(-(s*Math.PI)/180),t.translate(-l,-c),[...this.children].forEach(u=>{var h;t.save(),t.beginPath();const d=u;(h=d.draw)==null||h.call(d,e),t.restore()})}};X$([q({type:Array})],QM.prototype,"transform");X$([q({type:Array,attribute:"transform-origin"})],QM.prototype,"transformOrigin");X$([q({type:Array,attribute:"z-index"})],QM.prototype,"zIndex");customElements.get("frc-canvas-group")||customElements.define("frc-canvas-group",QM);var jfe=Object.defineProperty,os=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&jfe(e,t,n),n};let Sn=class extends ut{constructor(){super(...arguments),this.text="",this.origin=[0,0],this.maxWidth=null,this.fontName="sans-serif",this.fontSize=12,this.opacity=1,this.strokeColor=null,this.strokeWidth=2,this.fillColor="gray",this.transform=[0,0,0],this.transformOrigin=[0,0],this.drawOrigin=["center","center"],this.zIndex=0}draw({ctx:e}){e.globalAlpha=Math.max(0,Math.min(1,this.opacity??1)),this.fillColor&&(e.fillStyle=this.fillColor),this.strokeColor&&(e.strokeStyle=this.strokeColor),e.textAlign="center",e.textBaseline="middle",e.font=`${this.fontSize??12}px ${this.fontName||"sans-serif"}`;let[t,r]=this.origin??[0,0];const{width:n,actualBoundingBoxAscent:s,actualBoundingBoxDescent:o}=e.measureText(this.text??""),a=s+o,[l,c]=this.drawOrigin??["center","center"];l==="left"?t+=n/2:l==="right"&&(t-=n/2),c==="top"?r+=a/2:c==="bottom"&&(r-=a/2);const[u,h,d]=this.transform??[0,0,0];t+=u,r+=h,e.translate(t,r);const[f,g]=this.transformOrigin??[0,0],v=f,m=g;e.translate(v,m),e.rotate(-(d*Math.PI)/180),e.translate(-v,-m),this.fillColor&&e.fillText(this.text??"",0,0),this.strokeColor&&(e.lineWidth=this.strokeWidth??2,e.strokeText(this.text??"",0,0))}};os([q({type:String})],Sn.prototype,"text");os([q({type:Array})],Sn.prototype,"origin");os([q({type:Number,attribute:"max-width"})],Sn.prototype,"maxWidth");os([q({type:String,attribute:"font-name"})],Sn.prototype,"fontName");os([q({type:Number,attribute:"font-size"})],Sn.prototype,"fontSize");os([q({type:Number})],Sn.prototype,"opacity");os([q({type:String,attribute:"stroke-color"})],Sn.prototype,"strokeColor");os([q({type:Number,attribute:"stroke-width"})],Sn.prototype,"strokeWidth");os([q({type:String,attribute:"fill-color"})],Sn.prototype,"fillColor");os([q({type:Array})],Sn.prototype,"transform");os([q({type:Array,attribute:"transform-origin"})],Sn.prototype,"transformOrigin");os([q({type:Array,attribute:"draw-origin"})],Sn.prototype,"drawOrigin");os([q({type:Array,attribute:"z-index"})],Sn.prototype,"zIndex");customElements.get("frc-canvas-text")||customElements.define("frc-canvas-text",Sn);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Hfe=$$(class extends L${constructor(){super(...arguments),this.key=Ii}render(i,e){return this.key=i,e}update(i,[e,t]){return e!==this.key&&(the(i),this.key=e),t}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const bT=i=>i??Ii;var Gfe=Object.defineProperty,ad=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Gfe(e,t,n),n};const aV=class extends ut{constructor(){super(...arguments),this.src="",this.width=null,this.height=null,this.origin=[0,0],this.disabled=!1,this.hideCrosshair=!1,this.crosshairColor="white",this.image=new Image,this.connected=!1,this.throttleUpdateImage=PB(()=>this.updateImage(),5e3),this.onImageLoadBound=this.onImageLoad.bind(this),this.onImageErrorBound=this.onImageError.bind(this)}getImageSize(e){const t={width:this.width||e.width,height:this.height||e.height};return this.image.height/this.image.width*t.width>t.height?{height:t.height,width:this.image.width/this.image.height*t.height}:{height:this.image.height/this.image.width*t.width,width:t.width}}draw({ctx:e,canvas:t}){const{width:r,height:n}=this.getImageSize(t),s={width:this.width||t.width,height:this.height||t.height},[o,a]=this.origin??[0,0];if(e.translate(o,a),!!this.connected)try{const l=(s.width-r)/2,c=(s.height-n)/2;e.drawImage(this.image,l,c,r,n),this.hideCrosshair||(e.strokeStyle=this.crosshairColor||"white",e.lineWidth=1,e.beginPath(),e.setLineDash([7,7]),e.moveTo(l,c+n/2),e.lineTo(l+r,c+n/2),e.stroke(),e.beginPath(),e.setLineDash([5,5]),e.moveTo(l+r/2,c),e.lineTo(l+r/2,c+n),e.stroke())}catch{this.throttleUpdateImage()}}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this.loadedTimeout),this.image.src=""}connectedCallback(){super.connectedCallback(),this.throttleUpdateImage()}isImageLoaded(){return this.image.complete&&this.image.naturalHeight!==0}updateImage(){if(clearTimeout(this.loadedTimeout),!this.disabled){if(!this.isConnected){this.setConnected(!1);return}this.isImageLoaded()||(this.loadedTimeout=setTimeout(()=>{this.throttleUpdateImage()},5e3),this.image.removeEventListener("load",this.onImageLoadBound),this.image.removeEventListener("error",this.onImageErrorBound),this.image.src="",this.image=new Image,this.setConnected(!1),this.image.src=this.src??"",this.image.addEventListener("load",this.onImageLoadBound),this.image.addEventListener("error",this.onImageErrorBound))}}setConnected(e){this.connected&&!e?(this.connected=!1,this.dispatchDisconnect()):!this.connected&&e&&(this.connected=!0,this.dispatchConnect())}onImageLoad(){this.setConnected(!0),clearTimeout(this.loadedTimeout)}onImageError(){this.throttleUpdateImage()}dispatchConnect(){this.dispatchEvent(new CustomEvent("connect",{bubbles:!0,composed:!0}))}dispatchDisconnect(){this.dispatchEvent(new CustomEvent("disconnect",{bubbles:!0,composed:!0}))}updated(e){e.has("src")&&this.throttleUpdateImage(),e.has("disabled")&&(this.disabled?(clearTimeout(this.loadedTimeout),this.image.src=""):this.throttleUpdateImage())}};aV.styles=$t`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    canvas {
      width: 100%;
      height: 100%;
    }
  `;let eu=aV;ad([q({type:String})],eu.prototype,"src");ad([q({type:Number})],eu.prototype,"width");ad([q({type:Number})],eu.prototype,"height");ad([q({type:Array})],eu.prototype,"origin");ad([q({type:Boolean})],eu.prototype,"disabled");ad([q({type:Boolean,attribute:"hide-crosshair"})],eu.prototype,"hideCrosshair");ad([q({type:String,attribute:"crosshair-color"})],eu.prototype,"crosshairColor");customElements.get("frc-canvas-mjpg-stream-instance")||customElements.define("frc-canvas-mjpg-stream-instance",eu);var Wfe=Object.defineProperty,kl=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Wfe(e,t,n),n},A1;const sa=(A1=class extends ut{constructor(){super(...arguments),this.srcs=[],this.width=null,this.height=null,this.origin=[0,0],this.waitImage=A1.DEFAULT_WAIT_IMAGE,this.hideCrosshair=!1,this.crosshairColor="white",this.waitImageElement=new Image}getImageSize(i){const e={width:this.width||i.width,height:this.height||i.height};return this.waitImageElement.height/this.waitImageElement.width*e.width>e.height?{height:e.height,width:this.waitImageElement.width/this.waitImageElement.height*e.height}:{height:this.waitImageElement.height/this.waitImageElement.width*e.width,width:e.width}}draw(i){const{canvas:e,ctx:t}=i,r=[...this.streamInstances].find(n=>n.src===this._connectedSrc);if(r)r.draw(i);else{const{width:n,height:s}=this.getImageSize(e),o={width:this.width||e.width,height:this.height||e.height},[a,l]=this.origin??[0,0];t.translate(a,l);try{t.drawImage(this.waitImageElement,(o.width-n)/2,(o.height-s)/2,n,s)}catch{}}}updated(i){i.has("srcs")&&this._connectedSrc&&!this.srcs.includes(this._connectedSrc)&&(this._connectedSrc=void 0),i.has("waitImage")&&(this.waitImageElement.src=this.waitImage)}onConnect(i){this._connectedSrc||(this._connectedSrc=i)}onDisconnect(i){this._connectedSrc===i&&(this._connectedSrc=void 0)}renderStreamInstance(i){return Ye`
      ${Hfe(i,Ye`
          <frc-canvas-mjpg-stream-instance
            @connect=${()=>this.onConnect(i)}
            @disconnect=${()=>this.onDisconnect(i)}
            src=${i}
            width=${bT(this.width!==null?this.width:void 0)}
            height=${bT(this.height!==null?this.height:void 0)}
            .origin=${bT(this.origin!==null?this.origin:void 0)}
            ?disabled=${this._connectedSrc&&this._connectedSrc!==i}
            ?hide-crosshair=${this.hideCrosshair}
            crosshair-color=${this.crosshairColor}
          ></frc-canvas-mjpg-stream-instance>
        `)}
    `}render(){return Ye`
      ${this.srcs.map(i=>this.renderStreamInstance(i.replace("mjpg:","")))}
    `}},A1.DEFAULT_WAIT_IMAGE="./no-camera-stream.jpg",A1);kl([q({type:Array})],sa.prototype,"srcs");kl([q({type:Number})],sa.prototype,"width");kl([q({type:Number})],sa.prototype,"height");kl([q({type:Array})],sa.prototype,"origin");kl([q({type:String,attribute:"wait-image"})],sa.prototype,"waitImage");kl([q({type:Boolean,attribute:"hide-crosshair"})],sa.prototype,"hideCrosshair");kl([q({type:String,attribute:"crosshair-color"})],sa.prototype,"crosshairColor");kl([zi()],sa.prototype,"_connectedSrc");kl([Ofe("frc-canvas-mjpg-stream-instance")],sa.prototype,"streamInstances");let lV=sa;customElements.get("frc-canvas-mjpg-stream")||customElements.define("frc-canvas-mjpg-stream",lV);var qfe=Object.defineProperty,Y$=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&qfe(e,t,n),n};const cV=class extends ut{constructor(){super(...arguments),this.width=null,this.backgroundColor="black"}getCanvasCtx(){return this.canvas.getContext("2d")}drawChildren(){const e={canvas:this.canvas,ctx:this.getCanvasCtx(),domRect:this.getBoundingClientRect()};[...this.children].forEach(t=>{var r;const n=this.getCanvasCtx();n.save(),n.beginPath();const s=t;(r=s.draw)==null||r.call(s,e),n.restore()})}drawBackground(){const e=this.getCanvasCtx();e.save(),e.fillStyle=this.backgroundColor,e.fillRect(0,0,this.canvas.width,this.canvas.height),e.restore()}drawCanvas(){this.drawBackground(),this.drawChildren(),window.requestAnimationFrame(()=>{this.drawCanvas()})}firstUpdated(){this.drawCanvas(),new ResizeObserver(()=>this.resized()).observe(this),this.resized()}resized(){const e=this.getBoundingClientRect(),{width:t,height:r}=e;typeof this.width!="number"?(this.canvas.width=t,this.canvas.height=r):(this.canvas.width=this.width,this.canvas.height=this.width*r/t)}render(){return Ye` <canvas></canvas> `}};cV.styles=$t`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    canvas {
      width: 100%;
      height: 100%;
    }

    [part='box'] {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-content: center;
      flex-wrap: wrap;
      background-color: var(--box-color);
      text-align: center;
    }
  `;let eS=cV;Y$([ni("canvas")],eS.prototype,"canvas");Y$([q({type:Number})],eS.prototype,"width");Y$([q({type:String,attribute:"background-color"})],eS.prototype,"backgroundColor");customElements.get("frc-canvas")||customElements.define("frc-canvas",eS);var Xfe=Object.defineProperty,Zy=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Xfe(e,t,n),n};const Yfe={dashboard:{displayName:"Camera"},properties:{streams:{type:"Array"},backgroundColor:{type:"String",attribute:"background-color",defaultValue:"#000000",input:{type:"ColorPicker"}},waitImage:{type:"String",attribute:"wait-image"},hideCrosshair:{type:"Boolean",attribute:"hide-crosshair"},crosshairColor:{type:"String",attribute:"crosshair-color",defaultValue:"#ffffff",input:{type:"ColorPicker"}}}},uV=class extends ut{constructor(){super(...arguments),this.streams=[],this.backgroundColor="black",this.waitImage=lV.DEFAULT_WAIT_IMAGE,this.hideCrosshair=!1,this.crosshairColor="white"}render(){return Ye`
      <frc-canvas background-color=${this.backgroundColor}>
        <frc-canvas-mjpg-stream
          wait-image=${this.waitImage}
          crosshair-color=${this.crosshairColor}
          ?hide-crosshair=${this.hideCrosshair}
          .srcs=${this.streams}
        ></frc-canvas-mjpg-stream>
      </frc-canvas>
    `}};uV.styles=$t`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    frc-canvas {
      width: 100%;
      height: 100%;
    }
  `;let Vm=uV;Zy([q({type:Array})],Vm.prototype,"streams");Zy([q({type:String,attribute:"background-color"})],Vm.prototype,"backgroundColor");Zy([q({type:String,attribute:"wait-image"})],Vm.prototype,"waitImage");Zy([q({type:Boolean,attribute:"hide-crosshair"})],Vm.prototype,"hideCrosshair");Zy([q({type:String,attribute:"crosshair-color"})],Vm.prototype,"crosshairColor");customElements.get("frc-camera-wrapper")||customElements.define("frc-camera-wrapper",Vm);var Kfe=Object.defineProperty,Zfe=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Kfe(e,t,n),n};const Jfe={dashboard:{displayName:"Label",defaultHtml:'<frc-label text="label"></frc-label>'},properties:{text:{type:"String",primary:!0}}},hV=class extends ut{constructor(){super(...arguments),this.text=""}render(){return Ye`${this.text}`}};hV.styles=$t`
    :host {
      display: inline;
      font-size: inherit;
      font-family: inherit;
      font-weight: inherit;
      text-align: inherit;
      margin: 0;
      padding: 0;
      color: var(--frc-label-text-color, black);
    }
  `;let dV=hV;Zfe([q({type:String})],dV.prototype,"text");customElements.get("frc-label")||customElements.define("frc-label",dV);var Qfe=Object.defineProperty,pV=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Qfe(e,t,n),n};const eme={dashboard:{displayName:"Number Label"},properties:{value:{type:"Number",primary:!0},precision:{type:"Number",defaultValue:2}}},fV=class extends ut{constructor(){super(...arguments),this.value=0,this.precision=2}render(){const e=Math.max(0,this.precision),t=this.value.toFixed(e);return Ye`${t}`}};fV.styles=$t`
    :host {
      display: inline;
      font-size: inherit;
      font-family: inherit;
      font-weight: inherit;
      text-align: inherit;
      margin: 0;
      padding: 0;
      color: var(--frc-label-text-color, black);
    }
  `;let K$=fV;pV([q({type:Number})],K$.prototype,"value");pV([q({type:Number})],K$.prototype,"precision");customElements.get("frc-number-label")||customElements.define("frc-number-label",K$);var mV=i=>{throw TypeError(i)},Z$=(i,e,t)=>e.has(i)||mV("Cannot "+t),O3=(i,e,t)=>(Z$(i,e,"read from private field"),t?t.call(i):e.get(i)),lx=(i,e,t)=>e.has(i)?mV("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),U3=(i,e,t,r)=>(Z$(i,e,"write to private field"),r?r.call(i,t):e.set(i,t),t),ys=(i,e,t)=>(Z$(i,e,"access private method"),t),tme=Object.defineProperty,tS=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&tme(e,t,n),n},to,eD,gV,Kd,z3;const _V=class extends ut{constructor(){super(...arguments),lx(this,to),this.sourceRoot="",this.preferences={},this.search="",this.hideTitle=!1}render(){return Ye`
      <div class="container">
        ${gc(!this.hideTitle,()=>Ye` <header>Preferences</header> `)}

        <div class="search-input">
          <input
            placeholder="Search..."
            .value=${this.search}
            @input=${e=>{this.search=e.target.value,ys(this,to,gV).call(this)}}
          />
        </div>
        <div class="preferences-container">
          <div class="preferences">${ys(this,to,z3).call(this,this.preferences)}</div>
        </div>
      </div>
    `}};to=new WeakSet,eD=function(i,e){this.dispatchEvent(new CustomEvent("change",{detail:{property:i,value:e},bubbles:!0,composed:!0}))},gV=function(){this.dispatchEvent(new CustomEvent("search",{detail:{search:this.search},bubbles:!0,composed:!0}))},Kd=function(i,e,t,r){t[r]=e,ys(this,to,eD).call(this,i,e),this.requestUpdate()},z3=function(i,e){const t=Object.entries(i).filter(([r,n])=>{const s=typeof e<"u"?[e,r].join("/"):r;return r.startsWith(".")?!1:!this.search||typeof n=="object"?!0:s.toLowerCase().includes(this.search.toLowerCase())});return Ye`
      ${t.map(([r,n])=>{const s=typeof e<"u"?[e,r].join("/"):r;return typeof n=="boolean"?Ye`
            <label title=${s}>${s}</label>
            <input
              type="checkbox"
              .checked=${n}
              @change=${o=>{ys(this,to,Kd).call(this,s,o.target.checked,i,r)}}
            />
          `:typeof n=="number"?Ye`
            <label title=${s}>${s}</label>
            <div class="number-input">
              <button
                @click=${()=>{ys(this,to,Kd).call(this,s,n-1,i,r)}}
              >
                -
              </button>
              <input
                type="number"
                .value=${n}
                @change=${o=>{ys(this,to,Kd).call(this,s,parseFloat(o.target.value),i,r)}}
              />
              <button
                @click=${()=>{ys(this,to,Kd).call(this,s,n+1,i,r)}}
              >
                +
              </button>
            </div>
          `:typeof n=="string"?Ye`
            <label title=${s}>${s}</label>
            <input
              type="text"
              .value=${n}
              @change=${o=>{ys(this,to,Kd).call(this,s,o.target.value,i,r)}}
            />
          `:ys(this,to,z3).call(this,n,s)})}
    `},_V.styles=$t`
    :host {
      display: inline-block;
      width: 250px;
      height: 250px;
      font-family: sans-serif;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 3px;
      height: 100%;
      width: 100%;
    }

    header {
      background: var(--frc-preferences-header-background-color, lightblue);
      color: var(--frc-preferences-label-color, black);
      text-align: center;
      padding: 5px 3px;
      border-radius: 3px;
      margin: 0 3px;
      font-size: 15px;
    }

    .search-input {
      padding: 0 3px;
    }

    .preferences-container {
      flex: 1;
      overflow: auto;
      width: 100%;
      box-sizing: border-box;

      .preferences {
        padding: 3px;
        display: inline-grid;
        grid-template-columns: repeat(2, 1fr);
        column-gap: 8px;
        row-gap: 5px;
        align-items: center;
        justify-items: start;
        font-family: sans-serif;
        box-sizing: border-box;
      }
    }

    input::placeholder {
      color: var(--frc-preferences-placeholder-text-color, #888);
    }

    input:not([type='checkbox']) {
      width: 100%;
      border: none;
      outline: none;
      padding: 2px 4px;
      box-sizing: border-box;
      border-radius: 2px;
    }

    input[type='checkbox'] {
      width: 20px;
      height: 20px;
      appearance: none;
      -webkit-appearance: none;
      display: flex;
      align-content: center;
      justify-content: center;
      font-size: 2rem;
      padding: 0.1rem;
      border-radius: 3px;
    }

    input[type='checkbox']::before {
      content: ' ';
      /* https://yoksel.github.io/url-encoder/ */
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 -960 960 960' width='24' style='&%2310; fill: white;&%2310;'%3E%3Cpath d='M382-218 130-470l75-75 177 177 375-375 75 75-450 450Z'/%3E%3C/svg%3E");
      width: 100%;
      background-size: 100% 100%;
      width: 100%;
      height: 100%;
      transform-origin: bottom left;
      transform: scale(0);
    }

    input[type='checkbox']:checked::before {
      transform: scale(1);
    }

    input[type='checkbox']:checked {
      background: #0c6ce9;
    }

    input {
      margin: 0;
      box-sizing: border-box;
      color: var(--frc-preferences-input-text-color, black);
      background: var(
        --frc-preferences-input-background-color,
        rgba(0, 0, 0, 0.1)
      );
    }

    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    /* Firefox */
    input[type='number'] {
      -moz-appearance: textfield;
    }

    .number-input {
      display: flex;
      background: var(
        --frc-preferences-input-background-color,
        rgba(0, 0, 0, 0.1)
      );
      box-sizing: border-box;
      height: 20px;
      border-radius: 2px;

      button {
        padding: 0;
        height: 100%;
        width: 20px;
        border: none;
        cursor: pointer;
        background: none;
        line-height: 20px;
        font-size: 15px;
        color: var(--frc-preferences-input-button-text-color, #444);
      }

      input {
        flex: 1;
        background: none;
        text-align: center;
      }
    }

    label {
      color: var(--frc-preferences-label-color, black);
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      width: 100%;
    }
  `;let Jy=_V;tS([q({type:String,attribute:"source-root"})],Jy.prototype,"sourceRoot");tS([q({type:Object})],Jy.prototype,"preferences");tS([q({type:String})],Jy.prototype,"search");tS([q({type:Boolean,attribute:"hide-title"})],Jy.prototype,"hideTitle");customElements.get("frc-preferences")||customElements.define("frc-preferences",Jy);var ime=Object.defineProperty,ld=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&ime(e,t,n),n};const rme={dashboard:{displayName:"Preferences",defaultHtml:'<frc-preferences-wrapper source-key="/Preferences"></frc-preferences-wrapper>'},properties:{search:{type:"String"},hideTitle:{type:"Boolean",attribute:"hide-title"},source:{type:"Source",primary:!0,input:{type:"None"}},sourceKey:{type:"String",attribute:"source-key",input:{type:"None"}},store:{type:"Store",property:"store"},sourceProvider:{type:"String",attribute:"source-provider",input:{type:"None"}},provider:{type:"SourceProvider",property:"provider"}}};var g_,__,C0,yV,vV,bV;const xV=class extends ut{constructor(){super(...arguments),lx(this,C0),lx(this,g_),lx(this,__),this.search="",this.hideTitle=!1,this.sourceKey="",this.sourceProvider="",U3(this,g_,{})}updated(e){(e.has("sourceProvider")||e.has("sourceKey")||e.has("store"))&&ys(this,C0,bV).call(this)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=O3(this,__))==null||e.call(this)}render(){return Ye`
      <frc-preferences
        @change=${e=>ys(this,C0,yV).call(this,e)}
        @search=${e=>ys(this,C0,vV).call(this,e)}
        source-root=${this.sourceKey}
        search=${this.search}
        ?hide-title=${this.hideTitle}
        .preferences=${O3(this,g_)}
      ></frc-preferences>
    `}};g_=new WeakMap,__=new WeakMap,C0=new WeakSet,yV=function(i){var e;const{property:t,value:r}=i.detail;(e=this.provider)==null||e.userUpdate([this.sourceKey,t].join("/"),r)},vV=function(i){const{search:e}=i.detail;this.search=e},bV=function(){var i,e;(i=O3(this,__))==null||i.call(this),U3(this,__,(e=this.store)==null?void 0:e.subscribe(this.sourceProvider,this.sourceKey,()=>{var t;const r=(t=this.store)==null?void 0:t.getSource(this.sourceProvider,this.sourceKey);U3(this,g_,(r==null?void 0:r.getJson(!1))??{}),this.requestUpdate()},!0))},xV.styles=$t`
    :host {
      display: inline-block;
      width: 250px;
      height: 250px;
    }

    frc-preferences {
      width: 100%;
      height: 100%;
    }
  `;let tu=xV;ld([q({type:String})],tu.prototype,"search");ld([q({type:Boolean,attribute:"hide-title"})],tu.prototype,"hideTitle");ld([q({type:String,attribute:"source-key"})],tu.prototype,"sourceKey");ld([q({type:String,attribute:"source-provider"})],tu.prototype,"sourceProvider");ld([q({type:Object})],tu.prototype,"source");ld([q({type:Object,attribute:!1})],tu.prototype,"provider");ld([q({type:Object,attribute:!1})],tu.prototype,"store");customElements.get("frc-preferences-wrapper")||customElements.define("frc-preferences-wrapper",tu);var wV=i=>{throw TypeError(i)},nme=(i,e,t)=>e.has(i)||wV("Cannot "+t),MV=(i,e,t)=>e.has(i)?wV("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),SV=(i,e,t)=>(nme(i,e,"access private method"),t),sme=Object.defineProperty,jm=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&sme(e,t,n),n};const ome={dashboard:{displayName:"Checkbox Group",defaultHtml:`
      <frc-checkbox-group options='["1", "2", "3"]'>
      </frc-checkbox-group>
    `},properties:{disabled:{type:"Boolean",reflect:!0},label:{type:"String"},options:{type:"Array"},selected:{type:"Array",changeEvent:"change",primary:!0},direction:{type:"String",defaultValue:"vertical",input:{type:"StringDropdown",allowCustomValues:!1,getOptions(){return["vertical","horizontal"]}}}}};var F3,TV;const EV=class extends ut{constructor(){super(...arguments),MV(this,F3),this.disabled=!1,this.label="",this.options=[],this.selected=[],this.direction="vertical"}render(){return Ye`
      <vaadin-checkbox-group
        .disabled=${this.disabled}
        .label=${this.label}
        theme=${this.direction}
        .value=${this.selected}
      >
        ${this.options.map(e=>Ye`
            <vaadin-checkbox value=${e} @change=${()=>SV(this,F3,TV).call(this)}
              >${e}</vaadin-checkbox
            >
          `)}
      </vaadin-checkbox-group>
    `}};F3=new WeakSet,TV=function(){this.selected=this.element.value;const i=new CustomEvent("change",{bubbles:!0,composed:!0,detail:{selected:this.selected}});this.dispatchEvent(i)},EV.styles=$t`
    :host {
      display: inline-block;
    }
  `;let cd=EV;jm([q({type:Boolean})],cd.prototype,"disabled");jm([q({type:String})],cd.prototype,"label");jm([q({type:Array})],cd.prototype,"options");jm([q({type:Array})],cd.prototype,"selected");jm([q({type:String})],cd.prototype,"direction");jm([ni("vaadin-checkbox-group")],cd.prototype,"element");customElements.get("frc-checkbox-group")||customElements.define("frc-checkbox-group",cd);var ame=Object.defineProperty,Qy=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&ame(e,t,n),n};const lme={dashboard:{displayName:"Radio Group",defaultHtml:`
      <frc-radio-group options='["1", "2", "3"]'>
      </frc-radio-group>
    `},properties:{disabled:{type:"Boolean",reflect:!0},label:{type:"String"},options:{type:"Array"},selected:{type:"String",changeEvent:"change",primary:!0},direction:{type:"String",defaultValue:"vertical",input:{type:"StringDropdown",allowCustomValues:!1,getOptions(){return["vertical","horizontal"]}}}}};var B3,AV;const kV=class extends ut{constructor(){super(...arguments),MV(this,B3),this.disabled=!1,this.label="",this.options=[],this.selected="",this.direction="vertical"}render(){return Ye`
      <vaadin-radio-group
        @value-changed=${e=>SV(this,B3,AV).call(this,e)}
        .disabled=${this.disabled}
        .label=${this.label}
        theme=${this.direction}
        .value=${this.selected}
      >
        ${this.options.map(e=>Ye`
            <vaadin-radio-button value=${e}>${e}</vaadin-radio-button>
          `)}
      </vaadin-radio-group>
    `}};B3=new WeakSet,AV=function(i){this.selected=i.detail.value;const e=new CustomEvent("change",{bubbles:!0,composed:!0,detail:{selected:this.selected}});this.dispatchEvent(e)},kV.styles=$t`
    :host {
      display: inline-block;
    }
  `;let Hm=kV;Qy([q({type:Boolean})],Hm.prototype,"disabled");Qy([q({type:String})],Hm.prototype,"label");Qy([q({type:Array})],Hm.prototype,"options");Qy([q({type:String})],Hm.prototype,"selected");Qy([q({type:String})],Hm.prototype,"direction");customElements.get("frc-radio-group")||customElements.define("frc-radio-group",Hm);const cme={"frc-checkbox-group":ome,"frc-radio-group":lme,"vaadin-combo-box":{dashboard:{displayName:"Combo Box",defaultHtml:`<vaadin-combo-box items='["Item 1", "Item 2"]' value="Item 1"></vaadin-combo-box>`},properties:{items:{type:"Array"},value:{type:"String",changeEvent:"value-changed",primary:!0},allowCustomValue:{type:"Boolean",attribute:"allow-custom-value"},label:{type:"String"},placeholder:{type:"String"},disabled:{type:"Boolean",reflect:!0},readonly:{type:"Boolean",reflect:!0}}},"vaadin-number-field":{dashboard:{displayName:"Number Field",defaultHtml:'<vaadin-number-field label="Label" value="0"></vaadin-number-field>'},properties:{value:{type:"Number",defaultValue:0,primary:!0,reflect:!0,changeEvent:"change"},label:{type:"String"},placeholder:{type:"String"},min:{type:"Number"},max:{type:"Number"},step:{type:"Number",defaultValue:1},hasControls:{type:"Boolean"},clearButtonVisible:{type:"Boolean",attribute:"clear-button-visible"},disabled:{type:"Boolean"},readonly:{type:"Boolean"}}},"vaadin-text-field":{dashboard:{displayName:"Text Field",defaultHtml:'<vaadin-text-field label="Label"></vaadin-text-field>'},properties:{value:{type:"String",primary:!0,reflect:!0,changeEvent:"change"},label:{type:"String"},placeholder:{type:"String"},clearButtonVisible:{type:"Boolean",attribute:"clear-button-visible"},disabled:{type:"Boolean"},readonly:{type:"Boolean"}}}},ume={"frc-axis":Xte,"frc-bar":Zte,"frc-differential-drivebase":sie,"frc-mecanum-drivebase":cie,"frc-swerve-drivebase":die,"frc-icon":gue,"frc-3-axis-accelerometer":Mue,"frc-accelerometer":xue,"frc-basic-fms-info":Tue,"frc-boolean-box":Nue,"frc-gauge":Vue,"frc-gyro":Gue,"frc-number-bar":yue,"frc-sendable-chooser":Kue,"frc-sendable-chooser-wrapper":Jue,"frc-voltage-view":Upe,"frc-number-slider":Hpe,"frc-toggle-switch":qpe,"frc-toggle-button":Ype,"frc-toggle-group":Qpe,"frc-relay":nfe,"frc-encoder":hfe,"frc-network-alerts":pfe,"frc-pid-command":vfe,"frc-pid-controller":xfe,"frc-profiled-pid-controller":Mfe,"frc-scoring-grid":Afe,"frc-robot-command":Pfe,"frc-robot-subsystem":Ife,"frc-mechanism2d-wrapper":cfe,"frc-field-wrapper":Aie,"frc-field-robot":Eie,"frc-field-path":Tie,"frc-camera-wrapper":Yfe,"frc-label":Jfe,"frc-number-label":eme,"frc-preferences-wrapper":rme,...Ppe,...cme};var J$=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Ve=(i,e,t)=>(J$(i,e,"read from private field"),t?t.call(i):e.get(i)),Vt=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},li=(i,e,t,r)=>(J$(i,e,"write to private field"),e.set(i,t),t),vi=(i,e,t)=>(J$(i,e,"access private method"),t),hme=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ow={exports:{}};Ow.exports;(function(i,e){(function(t,r){var n={};t.PubSub?(n=t.PubSub,console.warn("PubSub already loaded, using existing version")):(t.PubSub=n,r(n)),i!==void 0&&i.exports&&(e=i.exports=n),e.PubSub=n,i.exports=e=n})(typeof window=="object"&&window||hme,function(t){var r={},n=-1,s="*";function o(v){var m;for(m in v)if(Object.prototype.hasOwnProperty.call(v,m))return!0;return!1}function a(v){return function(){throw v}}function l(v,m,p){try{v(m,p)}catch(y){setTimeout(a(y),0)}}function c(v,m,p){v(m,p)}function u(v,m,p,y){var _=r[m],x=y?c:l,w;if(Object.prototype.hasOwnProperty.call(r,m))for(w in _)Object.prototype.hasOwnProperty.call(_,w)&&x(_[w],v,p)}function h(v,m,p){return function(){var y=String(v),_=y.lastIndexOf(".");for(u(v,v,m,p);_!==-1;)y=y.substr(0,_),_=y.lastIndexOf("."),u(v,y,m,p);u(v,s,m,p)}}function d(v){var m=String(v),p=!!(Object.prototype.hasOwnProperty.call(r,m)&&o(r[m]));return p}function f(v){for(var m=String(v),p=d(m)||d(s),y=m.lastIndexOf(".");!p&&y!==-1;)m=m.substr(0,y),y=m.lastIndexOf("."),p=d(m);return p}function g(v,m,p,y){v=typeof v=="symbol"?v.toString():v;var _=h(v,m,y),x=f(v);return x?(p===!0?_():setTimeout(_,0),!0):!1}t.publish=function(v,m){return g(v,m,!1,t.immediateExceptions)},t.publishSync=function(v,m){return g(v,m,!0,t.immediateExceptions)},t.subscribe=function(v,m){if(typeof m!="function")return!1;v=typeof v=="symbol"?v.toString():v,Object.prototype.hasOwnProperty.call(r,v)||(r[v]={});var p="uid_"+String(++n);return r[v][p]=m,p},t.subscribeAll=function(v){return t.subscribe(s,v)},t.subscribeOnce=function(v,m){var p=t.subscribe(v,function(){t.unsubscribe(p),m.apply(this,arguments)});return t},t.clearAllSubscriptions=function(){r={}},t.clearSubscriptions=function(v){var m;for(m in r)Object.prototype.hasOwnProperty.call(r,m)&&m.indexOf(v)===0&&delete r[m]},t.countSubscriptions=function(v){var m,p,y=0;for(m in r)if(Object.prototype.hasOwnProperty.call(r,m)&&m.indexOf(v)===0){for(p in r[m])y++;break}return y},t.getSubscriptions=function(v){var m,p=[];for(m in r)Object.prototype.hasOwnProperty.call(r,m)&&m.indexOf(v)===0&&p.push(m);return p},t.unsubscribe=function(v){var m=function(k){var M;for(M in r)if(Object.prototype.hasOwnProperty.call(r,M)&&M.indexOf(k)===0)return!0;return!1},p=typeof v=="string"&&(Object.prototype.hasOwnProperty.call(r,v)||m(v)),y=!p&&typeof v=="string",_=typeof v=="function",x=!1,w,S,A;if(p){t.clearSubscriptions(v);return}for(w in r)if(Object.prototype.hasOwnProperty.call(r,w)){if(S=r[w],y&&S[v]){delete S[v],x=v;break}if(_)for(A in S)Object.prototype.hasOwnProperty.call(S,A)&&S[A]===v&&(delete S[A],x=!0)}return x}})})(Ow,Ow.exports);var il=Ow.exports,Uw=function(){return Uw=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Uw.apply(this,arguments)};function dme(i){return i.toLowerCase()}var pme=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],fme=/[^A-Z0-9]+/gi;function mme(i,e){e===void 0&&(e={});for(var t=e.splitRegexp,r=t===void 0?pme:t,n=e.stripRegexp,s=n===void 0?fme:n,o=e.transform,a=o===void 0?dme:o,l=e.delimiter,c=l===void 0?" ":l,u=tD(tD(i,r,"$1\0$2"),s,"\0"),h=0,d=u.length;u.charAt(h)==="\0";)h++;for(;u.charAt(d-1)==="\0";)d--;return u.slice(h,d).split("\0").map(a).join(c)}function tD(i,e,t){return e instanceof RegExp?i.replace(e,t):e.reduce(function(r,n){return r.replace(n,t)},i)}function CV(i,e){var t=i.charAt(0),r=i.substr(1).toLowerCase();return e>0&&t>="0"&&t<="9"?"_"+t+r:""+t.toUpperCase()+r}function gme(i){return i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()}function _me(i,e){return e===void 0&&(e={}),mme(i,Uw({delimiter:"",transform:CV},e))}function yme(i,e){return e===0?i.toLowerCase():CV(i,e)}function vme(i,e){return e===0?i.toLowerCase():gme(i)}function bme(i,e){return e===void 0&&(e={}),_me(i,Uw({transform:yme},e))}function xme(i){switch(i){case"String":return"";case"Boolean":return!1;case"Number":return 0;case"Array":return[];case"SourceProvider":return;case"Store":return;case"Object":default:return{}}}const wme=(i,{property:e=i,description:t="",type:r="String",defaultValue:n,attribute:s=i.toLowerCase(),reflect:o=!1,primary:a=!1,changeEvent:l,...c}={})=>{const u=typeof r=="function"?r.name:r,h=n??xme(u);return{property:e,description:t,type:u,defaultValue:h,attribute:s,reflect:!!o,primary:!!a,changeEvent:l,...c}},$V=({description:i="",group:e="default",defaultSourceKey:t,defaultSourceProvider:r,dashboard:n,properties:s={},events:o=[],slots:a=[],cssProperties:l=[],cssParts:c=[],...u}={})=>({description:i,group:e,defaultSourceKey:t,defaultSourceProvider:r,dashboard:{topLevel:!0,...n},properties:Object.fromEntries(Object.entries(s).map(([h,d])=>[h,wme(h,d)])),events:o,slots:a,cssProperties:l,cssParts:c,...u}),cx=i=>typeof i=="string"?"String":typeof i=="number"?"Number":typeof i=="boolean"?"Boolean":i instanceof Array?"Array":i instanceof Object?"Object":null,ah=(i,e)=>{if(i===e)return!0;if(typeof i!=typeof e)return!1;if(i instanceof Array&&e instanceof Array){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;return!0}return!1};function V3(){}let Mme=class LV{static prop2PropValue(e){if(e===null)return null;if(e instanceof Array)return e;if(typeof e=="string")try{const t=JSON.parse(e);return t instanceof Array?t:[]}catch{return[]}return[]}static prop2AttrValue(e){const t=LV.prop2PropValue(e);return t===null?null:JSON.stringify(t)}static attr2PropValue(e){if(e===null)return null;try{const t=JSON.parse(e);return t instanceof Array?t:[]}catch{return[]}}},Sme=class{static prop2PropValue(e){return e===null?null:!!e}static prop2AttrValue(e){return e?"":null}static attr2PropValue(e){return e!==null}},Tme=class{static prop2PropValue(e){return e===null?null:parseFloat(e)}static prop2AttrValue(e){return e===null?null:parseFloat(e).toString()}static attr2PropValue(e,t){return e===null?null:parseFloat(e)}},Eme=class RV{static prop2PropValue(e){if(e===null)return null;if(e instanceof Object)return e;if(typeof e=="string")try{const t=JSON.parse(e);return t instanceof Object?t:{}}catch{return{}}return{}}static prop2AttrValue(e){const t=RV.prop2PropValue(e);return t===null?null:JSON.stringify(t)}static attr2PropValue(e){if(e===null)return null;try{const t=JSON.parse(e);return t instanceof Object?t:{}}catch{return{}}}},Ame=class{static prop2PropValue(e){return e===null?null:(e==null?void 0:e.toString())||""}static prop2AttrValue(e){return e===null?null:(e==null?void 0:e.toString())||""}static attr2PropValue(e,t){return e===null?null:e}};const Q$={Array:Mme,Boolean:Sme,Number:Tme,Object:Eme,String:Ame},lh=(i,e)=>{var t;return((t=Q$[e])==null?void 0:t.prop2PropValue(i))??null},iD=(i,e)=>{var t;return((t=Q$[e])==null?void 0:t.prop2AttrValue(i))??null},rD=(i,e)=>{var t;return((t=Q$[e])==null?void 0:t.attr2PropValue(i))??null};var ms,Do,za,ja,y_,j3,PV,ux,xT,hx,H3;const NV=class G3{constructor(e,t){Vt(this,j3),Vt(this,ux),Vt(this,hx),Vt(this,ms,void 0),Vt(this,Do,void 0),Vt(this,za,!1),Vt(this,ja,void 0),Vt(this,y_,void 0),G3.UNIQUE_ID+=1,li(this,y_,Symbol(`WEBBIT_PROPERTY_CHANGE_${G3.UNIQUE_ID}`)),li(this,ms,e),li(this,Do,t),li(this,za,!1),li(this,ja,this.value),vi(this,j3,PV).call(this)}get value(){const{reflect:e,attribute:t,property:r,type:n}=Ve(this,Do);return typeof r=="string"&&r in Ve(this,ms)?Ve(this,ms)[r]:rD(t&&e?Ve(this,ms).getAttribute(t):t?Ve(this,ms).getAttribute(t):null,n)}set value(e){const{attribute:t,property:r,type:n}=Ve(this,Do),s=cx(e),o=this.value;if(e===null||typeof e>"u"){if(e===o)return}else if(ah(lh(o,s),e))return;if(r){const a=lh(e,n),l=lh(a,s);ah(e,l)&&(Ve(this,ms)[r]=a)}else if(t){const a=iD(e,n),l=rD(a,s);ah(e,l)&&(a===null?Ve(this,ms).removeAttribute(t):Ve(this,ms).setAttribute(t,a))}}isAttribute(){return typeof Ve(this,Do).attribute=="string"}getStoredAttribute(){const{type:e}=Ve(this,Do);return iD(Ve(this,ja),e)}connect(){if(!Ve(this,za)){const e=this.value;li(this,ja,typeof e<"u"?e:Ve(this,Do).defaultValue),li(this,za,!0)}}disconnect(){Ve(this,za)&&(li(this,za,!1),vi(this,hx,H3).call(this))}isConnected(){return Ve(this,za)}update(e){this.connect(),this.value=e}subscribe(e,t=!1){il.subscribe(Ve(this,y_),(r,n)=>{(Ve(this,za)||t)&&e(n)})}getProperty(){return Ve(this,Do)}setStoredValue(e){li(this,ja,e),this.isConnected()||vi(this,hx,H3).call(this)}getStoredValue(){return Ve(this,ja)}};ms=new WeakMap,Do=new WeakMap,za=new WeakMap,ja=new WeakMap,y_=new WeakMap,j3=new WeakSet,PV=function(){const{changeEvent:i,attribute:e}=Ve(this,Do);if(i){const t=()=>{vi(this,ux,xT).call(this)};Ve(this,ms).addEventListener(i,t,!1)}else e&&new MutationObserver(()=>{vi(this,ux,xT).call(this)}).observe(Ve(this,ms),{attributes:!0,attributeFilter:[e]})},ux=new WeakSet,xT=function(){const{value:i}=this;this.isConnected()||li(this,ja,i),il.publish(Ve(this,y_),i)},hx=new WeakSet,H3=function(){this.value=Ve(this,ja)},NV.UNIQUE_ID=0;let kme=NV;function dx(i){return bme(i,{transform:vme})}function nD(i,e){const t=Object.entries(i).find(([s])=>dx(s)===e);if(!t)return;const[r,n]=t;return{name:r,source:n}}var en,Ha,_c,_s,$0,v_,cf,L0,R0,tc,P0,W3,IV,q3,sD,b_,zw,X3,oD,Y3,aD,K3,DV;const OV=class Z3{constructor(e,t,r){Vt(this,W3),Vt(this,q3),Vt(this,b_),Vt(this,X3),Vt(this,Y3),Vt(this,K3),Vt(this,en,void 0),Vt(this,Ha,void 0),Vt(this,_c,void 0),Vt(this,_s,void 0),Vt(this,$0,void 0),Vt(this,v_,void 0),Vt(this,cf,!1),Vt(this,L0,void 0),Vt(this,R0,{}),Vt(this,tc,V3),Vt(this,P0,void 0),Z3.UNIQUE_ID+=1,li(this,P0,Symbol(`WEBBIT_ANY_PROPERTY_CHANGE_${Z3.UNIQUE_ID}`)),li(this,en,e),li(this,Ha,t),li(this,_c,$V(r||{name:e.tagName.toLowerCase()}));const n=Object.entries(Ve(this,_c).properties).filter(([,s])=>!["SourceProvider","Store","Source"].includes(s.type)).map(([s,o])=>({...o,name:s}));li(this,_s,new Map(n.map(s=>{const o=new kme(Ve(this,en),s);return o.subscribe(a=>{o.isConnected()&&vi(this,K3,DV).call(this,s,a),il.publish(Ve(this,P0),{property:s,value:a,connected:Ve(this,cf)})},!0),[s.name,o]}))),li(this,$0,n.find(({primary:s})=>s)),li(this,v_,Ve(this,$0)?Ve(this,_s).get(Ve(this,$0).name):void 0),li(this,L0,vi(this,W3,IV).call(this)),Ve(this,Ha).defaultSourceProviderSet(s=>{this.sourceProvider===null&&(this.sourceProvider=s)}),this.connect()}get sourceProvider(){return Ve(this,en).getAttribute("source-provider")??void 0}set sourceProvider(e){typeof e<"u"?Ve(this,en).setAttribute("source-provider",e):Ve(this,en).removeAttribute("source-provider")}get sourceKey(){return Ve(this,en).getAttribute("source-key")??void 0}set sourceKey(e){typeof e<"u"?Ve(this,en).setAttribute("source-key",e):Ve(this,en).removeAttribute("source-key")}get source(){if(typeof this.sourceProvider<"u"&&typeof this.sourceKey<"u")return Ve(this,Ha).getSource(this.sourceProvider,this.sourceKey)}get hasSource(){return typeof this.source<"u"}subscribe(e){const t=il.subscribe(Ve(this,P0),(r,n)=>{e(n)});return()=>il.unsubscribe(t)}getPropertyHandler(e){return Ve(this,_s).get(e)}connect(){li(this,cf,!0),Ve(this,L0).connect(),vi(this,b_,zw).call(this)}disconnect(){li(this,cf,!1),Ve(this,L0).disconnect(),vi(this,b_,zw).call(this)}setDefaultPropertyValue(e,t){Ve(this,R0)[e]=t}getDefaultPropertyValue(e){return Ve(this,R0)[e]}getDefaultPropertyValues(){return Ve(this,R0)}getConfig(){return Ve(this,_c)}};en=new WeakMap,Ha=new WeakMap,_c=new WeakMap,_s=new WeakMap,$0=new WeakMap,v_=new WeakMap,cf=new WeakMap,L0=new WeakMap,R0=new WeakMap,tc=new WeakMap,P0=new WeakMap,W3=new WeakSet,IV=function(){const i=new MutationObserver(()=>{vi(this,b_,zw).call(this)});return{connect:()=>{i.observe(Ve(this,en),{attributes:!0,attributeFilter:["source-provider","source-key"]})},disconnect:()=>{i.disconnect()}}},q3=new WeakSet,sD=function(){const i=Ve(this,en).closest("[default-source-provider]");return(i==null?void 0:i.getAttribute("default-source-provider"))??void 0},b_=new WeakSet,zw=function(){if(vi(this,X3,oD).call(this),!Ve(this,cf)){Ve(this,tc).call(this),li(this,tc,V3),Ve(this,_s).forEach(i=>i.disconnect());return}this.sourceKey||(this.sourceKey=Ve(this,_c).defaultSourceKey),this.sourceProvider||(this.sourceProvider=Ve(this,_c).defaultSourceProvider||vi(this,q3,sD).call(this)||Ve(this,Ha).getDefaultSourceProvider()),!this.sourceKey||!this.sourceProvider?(Ve(this,tc).call(this),li(this,tc,V3),Ve(this,_s).forEach(i=>i.disconnect())):(Ve(this,tc).call(this),Ve(this,_s).forEach(i=>{i.disconnect()}),li(this,tc,Ve(this,Ha).subscribe(this.sourceProvider,this.sourceKey,(i,e,t)=>{vi(this,Y3,aD).call(this,e,t)},!0)))},X3=new WeakSet,oD=function(){const i=this.sourceProvider?Ve(this,Ha).getSourceProvider(this.sourceProvider):void 0;Object.entries(Ve(this,_c).properties).forEach(([,{property:e,type:t}])=>{e&&(t==="SourceProvider"?Ve(this,en)[e]=i:t==="Store"?Ve(this,en)[e]=Ve(this,Ha):t==="Source"&&(Ve(this,en)[e]=this.source))})},Y3=new WeakSet,aD=function(i,e){var t,r;if(typeof this.source>"u")Ve(this,_s).forEach(n=>{n.disconnect()});else if(this.source.hasChildren()){const n=this.source.getChildren();if(i===e){const s=Object.entries(n);[...Ve(this,_s).entries()].forEach(([o,a])=>{const l=s.find(([c])=>dx(c)===o);if(l){const[,c]=l;a.update(c.getSourceValue())}})}else{const s=dx(e.replace(`${i}/`,""));if(Ve(this,_s).has(s)){const o=Ve(this,_s).get(s),a=(r=(t=nD(n,s))==null?void 0:t.source)==null?void 0:r.getSourceValue();typeof a>"u"?o==null||o.disconnect():o==null||o.update(a)}}}else Ve(this,v_)&&Ve(this,v_).update(this.source.getSourceValue())},K3=new WeakSet,DV=function({name:i,primary:e},t){if(typeof this.source>"u")return;const r=cx(t),n=this.source.getChildren(),s=Object.entries(n);if(this.source.hasChildren())if(t===null){const o=s.find(([a])=>dx(a)===i);if(o){const[,a]=o;a.getSourceValue()!==null&&a.setSourceValue(t)}}else{const o=nD(n,i);if(!o)return;const a=cx(o.source.getSourceValue())||r,l=lh(t,a),c=lh(l,r);ah(t,c)&&!ah(o.source.getSourceValue(),l)&&o.source.setSourceValue(t)}else{if(!e)return;if(t===null)this.source.getSourceValue()!==null&&this.source.setSourceValue(t);else{const o=cx(this.source.getSourceValue())||r,a=lh(t,o),l=lh(a,r);ah(t,l)&&!ah(this.source.getSourceValue(),a)&&this.source.setSourceValue(a)}}},OV.UNIQUE_ID=0;let Cme=OV;var lD=function(i){var e=i,t,r={a:0,b:0,c:0},n=[],s=/(\[[^\]]+\])/g,o=/(#[^\#\s\+>~\.\[:\)]+)/g,a=/(\.[^\s\+>~\.\[:\)]+)/g,l=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,c=/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,u=/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,h=/([^\s\+>~\.\[:]+)/g;return t=function(d,f){var g,v,m,p,y,_;if(d.test(e))for(g=e.match(d),v=0,m=g.length;v<m;v+=1)r[f]+=1,p=g[v],y=e.indexOf(p),_=p.length,n.push({selector:i.substr(y,_),type:f,index:y,length:_}),e=e.replace(p,Array(_+1).join(" "))},function(){var d=function(m){var p,y,_,x;if(m.test(e))for(p=e.match(m),y=0,_=p.length;y<_;y+=1)x=p[y],e=e.replace(x,Array(x.length+1).join("A"))},f=/\\[0-9A-Fa-f]{6}\s?/g,g=/\\[0-9A-Fa-f]{1,5}\s/g,v=/\\./g;d(f),d(g),d(v)}(),function(){var d=/{[^]*/gm,f,g,v,m;if(d.test(e))for(f=e.match(d),g=0,v=f.length;g<v;g+=1)m=f[g],e=e.replace(m,Array(m.length+1).join(" "))}(),t(s,"b"),t(o,"a"),t(a,"b"),t(l,"c"),t(c,"b"),t(u,"b"),e=e.replace(/[\*\s\+>~]/g," "),e=e.replace(/[#\.]/g," "),e=e.replace(/:not/g,"    "),e=e.replace(/:local/g,"      "),e=e.replace(/:global/g,"       "),e=e.replace(/[\(\)]/g," "),t(h,"c"),n.sort(function(d,f){return d.index-f.index}),{selector:i,specificity:"0,"+r.a.toString()+","+r.b.toString()+","+r.c.toString(),specificityArray:[0,r.a,r.b,r.c],parts:n}},cD=function(i,e){var t,r,n;if(typeof i=="string"){if(i.indexOf(",")!==-1)throw"Invalid CSS selector";t=lD(i).specificityArray}else if(Array.isArray(i)){if(i.filter(function(s){return typeof s=="number"}).length!==4)throw"Invalid specificity array";t=i}else throw"Invalid CSS selector or specificity array";if(typeof e=="string"){if(e.indexOf(",")!==-1)throw"Invalid CSS selector";r=lD(e).specificityArray}else if(Array.isArray(e)){if(e.filter(function(s){return typeof s=="number"}).length!==4)throw"Invalid specificity array";r=e}else throw"Invalid CSS selector or specificity array";for(n=0;n<4;n+=1){if(t[n]<r[n])return-1;if(t[n]>r[n])return 1}return 0};function $me(i,e){const t=[...i.entries()].find(([r])=>e.matches(r));return t==null?void 0:t[1]}function UV(i,e,t){const r=i,n=$me(t,r);return typeof n>"u"||!r.hasAttribute("source-provider")&&typeof n.defaultSourceProvider>"u"&&typeof e>"u"?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}function Lme(i,e){return t=>UV(t,i,e)}function Rme(i,e,t){return document.createNodeIterator(i,NodeFilter.SHOW_ELEMENT,Lme(e,t))}var dc,Oo,yc,uf,x_,w_,N0,k1,px,wT,Fw,J3,Q3,zV,ek,uD,fx,MT;const FV=class mx{constructor(e,t,r={},n="default"){Vt(this,N0),Vt(this,px),Vt(this,Fw),Vt(this,Q3),Vt(this,ek),Vt(this,fx),Vt(this,dc,void 0),Vt(this,Oo,new Map),Vt(this,yc,new Map),Vt(this,uf,void 0),Vt(this,x_,void 0),Vt(this,w_,void 0),mx.UNIQUE_ID+=1,li(this,x_,Symbol(`WEBBIT_CONNECTOR_ELEMENT_CONNECTED_${mx.UNIQUE_ID}`)),li(this,w_,Symbol(`WEBBIT_CONNECTOR_ELEMENT_DISCONNECTED_${mx.UNIQUE_ID}`)),li(this,dc,t),Ve(this,dc).defaultSourceProviderSet(s=>{Ve(this,yc).forEach((o,a)=>{o.sourceProvider===null&&this.setSourceProvider(a,s)})}),li(this,uf,e),vi(this,Q3,zV).call(this),this.addElementConfigs(r,n)}addElementConfigs(e={},t="default"){Object.entries(e).forEach(([r,n])=>{Ve(this,Oo).set(r,$V({group:t,...n}))}),vi(this,Fw,J3).call(this,Ve(this,uf))}subscribeElementConnected(e){il.subscribe(Ve(this,x_),(t,r)=>{e(r)})}subscribeElementDisconnected(e){il.subscribe(Ve(this,w_),(t,r)=>{e(r)})}getRootElement(){return Ve(this,uf)}getMatchingElementConfig(e){if(!e)return;const t=[...Ve(this,Oo).keys()].filter(r=>e.matches(r)).sort(cD).at(-1);return t?this.getElementConfig(t):void 0}getMatchingElementSelector(e){return e?[...Ve(this,Oo).keys()].filter(t=>e.matches(t)).sort(cD).at(-1):void 0}getElementConfigSelectors(){return[...Ve(this,Oo).keys()]}getElementConfig(e){return Ve(this,Oo).get(e)}hasElementConfig(e){return Ve(this,Oo).has(e)}setDefaultPropertyValue(e,t,r){const n=this.getElementWebbit(e);n&&n.setDefaultPropertyValue(t,r)}setSourceProvider(e,t){const r=this.getElementWebbit(e);r&&(r.sourceProvider=t)}setSourceKey(e,t){const r=this.getElementWebbit(e);r&&(r.sourceKey=t)}getDefaultPropertyValue(e,t){const r=this.getElementWebbit(e);return r?r.getDefaultPropertyValue(t):void 0}getDefaultPropertyValues(e){const t=this.getElementWebbit(e);return t?t.getDefaultPropertyValues():{}}getSourceProvider(e){const t=this.getElementWebbit(e);return t?t.sourceProvider:Ve(this,dc).getDefaultSourceProvider()}getSourceKey(e){const t=this.getElementWebbit(e);return t?t.sourceKey:void 0}getElementWebbit(e){return Ve(this,yc).get(e)}hasElement(e){return Ve(this,yc).has(e)}getStore(){return Ve(this,dc)}};dc=new WeakMap,Oo=new WeakMap,yc=new WeakMap,uf=new WeakMap,x_=new WeakMap,w_=new WeakMap,N0=new WeakSet,k1=function(i){const e=this.getMatchingElementConfig(i);if(this.hasElement(i)||!e)return;const t=new Cme(i,Ve(this,dc),e);Ve(this,yc).set(i,t),il.publish(Ve(this,x_),{element:i})},px=new WeakSet,wT=function(i){const e=this.getElementWebbit(i);e&&(e.disconnect(),Ve(this,yc).delete(i),il.publish(Ve(this,w_),{element:i}))},Fw=new WeakSet,J3=function(i){const e=vi(this,ek,uD).call(this,i);for(;e.nextNode();)vi(this,N0,k1).call(this,e.referenceNode)},Q3=new WeakSet,zV=function(){new MutationObserver(i=>{i.forEach(e=>{if(e.type==="childList"){const t=e.addedNodes||[],r=e.removedNodes||[];t.forEach(n=>{n instanceof HTMLElement&&(vi(this,fx,MT).call(this,n)&&vi(this,N0,k1).call(this,n),vi(this,Fw,J3).call(this,n))}),r.forEach(n=>{vi(this,px,wT).call(this,n),[...Ve(this,yc).keys()].forEach(s=>{n.contains(s)&&vi(this,px,wT).call(this,s)})})}else e.type==="attributes"&&e.target instanceof HTMLElement&&vi(this,fx,MT).call(this,e.target)&&vi(this,N0,k1).call(this,e.target)})}).observe(Ve(this,uf),{childList:!0,subtree:!0,attributes:!0,attributeFilter:["source-key","source-provider"]})},ek=new WeakSet,uD=function(i){return Rme(i,this.getStore().getDefaultSourceProvider(),Ve(this,Oo))},fx=new WeakSet,MT=function(i){return UV(i,Ve(this,dc).getDefaultSourceProvider(),Ve(this,Oo))===NodeFilter.FILTER_ACCEPT},FV.UNIQUE_ID=0;let Pme=FV;var hD={exports:{}},Bg={},C1={exports:{}},ST={},TT={},dD;function eL(){if(dD)return TT;dD=1;function i(r){this.__parent=r,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}i.prototype.clone_empty=function(){var r=new i(this.__parent);return r.set_indent(this.__indent_count,this.__alignment_count),r},i.prototype.item=function(r){return r<0?this.__items[this.__items.length+r]:this.__items[r]},i.prototype.has_match=function(r){for(var n=this.__items.length-1;n>=0;n--)if(this.__items[n].match(r))return!0;return!1},i.prototype.set_indent=function(r,n){this.is_empty()&&(this.__indent_count=r||0,this.__alignment_count=n||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},i.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},i.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},i.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var r=this.__parent.current_line;return r.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),r.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),r.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,r.__items[0]===" "&&(r.__items.splice(0,1),r.__character_count-=1),!0}return!1},i.prototype.is_empty=function(){return this.__items.length===0},i.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},i.prototype.push=function(r){this.__items.push(r);var n=r.lastIndexOf(`
`);n!==-1?this.__character_count=r.length-n:this.__character_count+=r.length},i.prototype.pop=function(){var r=null;return this.is_empty()||(r=this.__items.pop(),this.__character_count-=r.length),r},i.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},i.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},i.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},i.prototype.toString=function(){var r="";return this.is_empty()?this.__parent.indent_empty_lines&&(r=this.__parent.get_indent_string(this.__indent_count)):(r=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),r+=this.__items.join("")),r};function e(r,n){this.__cache=[""],this.__indent_size=r.indent_size,this.__indent_string=r.indent_char,r.indent_with_tabs||(this.__indent_string=new Array(r.indent_size+1).join(r.indent_char)),n=n||"",r.indent_level>0&&(n=new Array(r.indent_level+1).join(this.__indent_string)),this.__base_string=n,this.__base_string_length=n.length}e.prototype.get_indent_size=function(r,n){var s=this.__base_string_length;return n=n||0,r<0&&(s=0),s+=r*this.__indent_size,s+=n,s},e.prototype.get_indent_string=function(r,n){var s=this.__base_string;return n=n||0,r<0&&(r=0,s=""),n+=r*this.__indent_size,this.__ensure_cache(n),s+=this.__cache[n],s},e.prototype.__ensure_cache=function(r){for(;r>=this.__cache.length;)this.__add_column()},e.prototype.__add_column=function(){var r=this.__cache.length,n=0,s="";this.__indent_size&&r>=this.__indent_size&&(n=Math.floor(r/this.__indent_size),r-=n*this.__indent_size,s=new Array(n+1).join(this.__indent_string)),r&&(s+=new Array(r+1).join(" ")),this.__cache.push(s)};function t(r,n){this.__indent_cache=new e(r,n),this.raw=!1,this._end_with_newline=r.end_with_newline,this.indent_size=r.indent_size,this.wrap_line_length=r.wrap_line_length,this.indent_empty_lines=r.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new i(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}return t.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},t.prototype.get_line_number=function(){return this.__lines.length},t.prototype.get_indent_string=function(r,n){return this.__indent_cache.get_indent_string(r,n)},t.prototype.get_indent_size=function(r,n){return this.__indent_cache.get_indent_size(r,n)},t.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},t.prototype.add_new_line=function(r){return this.is_empty()||!r&&this.just_added_newline()?!1:(this.raw||this.__add_outputline(),!0)},t.prototype.get_code=function(r){this.trim(!0);var n=this.current_line.pop();n&&(n[n.length-1]===`
`&&(n=n.replace(/\n+$/g,"")),this.current_line.push(n)),this._end_with_newline&&this.__add_outputline();var s=this.__lines.join(`
`);return r!==`
`&&(s=s.replace(/[\n]/g,r)),s},t.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},t.prototype.set_indent=function(r,n){return r=r||0,n=n||0,this.next_line.set_indent(r,n),this.__lines.length>1?(this.current_line.set_indent(r,n),!0):(this.current_line.set_indent(),!1)},t.prototype.add_raw_token=function(r){for(var n=0;n<r.newlines;n++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(r.whitespace_before),this.current_line.push(r.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},t.prototype.add_token=function(r){this.__add_space_before_token(),this.current_line.push(r),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},t.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},t.prototype.remove_indent=function(r){for(var n=this.__lines.length;r<n;)this.__lines[r]._remove_indent(),r++;this.current_line._remove_wrap_indent()},t.prototype.trim=function(r){for(r=r===void 0?!1:r,this.current_line.trim();r&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},t.prototype.just_added_newline=function(){return this.current_line.is_empty()},t.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},t.prototype.ensure_empty_line_above=function(r,n){for(var s=this.__lines.length-2;s>=0;){var o=this.__lines[s];if(o.is_empty())break;if(o.item(0).indexOf(r)!==0&&o.item(-1)!==n){this.__lines.splice(s+1,0,new i(this)),this.previous_line=this.__lines[this.__lines.length-2];break}s--}},TT.Output=t,TT}var ET={},pD;function BV(){if(pD)return ET;pD=1;function i(e,t,r,n){this.type=e,this.text=t,this.comments_before=null,this.newlines=r||0,this.whitespace_before=n||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}return ET.Token=i,ET}var fD={},mD;function VV(){return mD||(mD=1,function(i){var e="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",t="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",r="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",n="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",s="\\\\u[0-9a-fA-F]{4}|\\\\u\\{[0-9a-fA-F]+\\}",o="(?:"+s+"|["+e+r+"])",a="(?:"+s+"|["+t+r+n+"])*";i.identifier=new RegExp(o+a,"g"),i.identifierStart=new RegExp(o),i.identifierMatch=new RegExp("(?:"+s+"|["+t+r+n+"])+"),i.newline=/[\n\r\u2028\u2029]/,i.lineBreak=new RegExp(`\r
|`+i.newline.source),i.allLineBreaks=new RegExp(i.lineBreak.source,"g")}(fD)),fD}var AT={},Vg={},gD;function tL(){if(gD)return Vg;gD=1;function i(r,n){this.raw_options=e(r,n),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","angular","django","erb","handlebars","php","smarty"],["auto"])}i.prototype._get_array=function(r,n){var s=this.raw_options[r],o=n||[];return typeof s=="object"?s!==null&&typeof s.concat=="function"&&(o=s.concat()):typeof s=="string"&&(o=s.split(/[^a-zA-Z0-9_\/\-]+/)),o},i.prototype._get_boolean=function(r,n){var s=this.raw_options[r],o=s===void 0?!!n:!!s;return o},i.prototype._get_characters=function(r,n){var s=this.raw_options[r],o=n||"";return typeof s=="string"&&(o=s.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),o},i.prototype._get_number=function(r,n){var s=this.raw_options[r];n=parseInt(n,10),isNaN(n)&&(n=0);var o=parseInt(s,10);return isNaN(o)&&(o=n),o},i.prototype._get_selection=function(r,n,s){var o=this._get_selection_list(r,n,s);if(o.length!==1)throw new Error("Invalid Option Value: The option '"+r+`' can only be one of the following values:
`+n+`
You passed in: '`+this.raw_options[r]+"'");return o[0]},i.prototype._get_selection_list=function(r,n,s){if(!n||n.length===0)throw new Error("Selection list cannot be empty.");if(s=s||[n[0]],!this._is_valid_selection(s,n))throw new Error("Invalid Default Value!");var o=this._get_array(r,s);if(!this._is_valid_selection(o,n))throw new Error("Invalid Option Value: The option '"+r+`' can contain only the following values:
`+n+`
You passed in: '`+this.raw_options[r]+"'");return o},i.prototype._is_valid_selection=function(r,n){return r.length&&n.length&&!r.some(function(s){return n.indexOf(s)===-1})};function e(r,n){var s={};r=t(r);var o;for(o in r)o!==n&&(s[o]=r[o]);if(n&&r[n])for(o in r[n])s[o]=r[n][o];return s}function t(r){var n={},s;for(s in r){var o=s.replace(/-/g,"_");n[o]=r[s]}return n}return Vg.Options=i,Vg.normalizeOpts=t,Vg.mergeOpts=e,Vg}var _D;function jV(){if(_D)return AT;_D=1;var i=tL().Options,e=["before-newline","after-newline","preserve-newline"];function t(r){i.call(this,r,"js");var n=this.raw_options.brace_style||null;n==="expand-strict"?this.raw_options.brace_style="expand":n==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var s=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var o=0;o<s.length;o++)s[o]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=s[o];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",e),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}return t.prototype=new i,AT.Options=t,AT}var Zd={},kT={},yD;function iL(){if(yD)return kT;yD=1;var i=RegExp.prototype.hasOwnProperty("sticky");function e(t){this.__input=t||"",this.__input_length=this.__input.length,this.__position=0}return e.prototype.restart=function(){this.__position=0},e.prototype.back=function(){this.__position>0&&(this.__position-=1)},e.prototype.hasNext=function(){return this.__position<this.__input_length},e.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},e.prototype.peek=function(t){var r=null;return t=t||0,t+=this.__position,t>=0&&t<this.__input_length&&(r=this.__input.charAt(t)),r},e.prototype.__match=function(t,r){t.lastIndex=r;var n=t.exec(this.__input);return n&&!(i&&t.sticky)&&n.index!==r&&(n=null),n},e.prototype.test=function(t,r){return r=r||0,r+=this.__position,r>=0&&r<this.__input_length?!!this.__match(t,r):!1},e.prototype.testChar=function(t,r){var n=this.peek(r);return t.lastIndex=0,n!==null&&t.test(n)},e.prototype.match=function(t){var r=this.__match(t,this.__position);return r?this.__position+=r[0].length:r=null,r},e.prototype.read=function(t,r,n){var s="",o;return t&&(o=this.match(t),o&&(s+=o[0])),r&&(o||!t)&&(s+=this.readUntil(r,n)),s},e.prototype.readUntil=function(t,r){var n="",s=this.__position;t.lastIndex=this.__position;var o=t.exec(this.__input);return o?(s=o.index,r&&(s+=o[0].length)):s=this.__input_length,n=this.__input.substring(this.__position,s),this.__position=s,n},e.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},e.prototype.get_regexp=function(t,r){var n=null,s="g";return r&&i&&(s="y"),typeof t=="string"&&t!==""?n=new RegExp(t,s):t&&(n=new RegExp(t.source,s)),n},e.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},e.prototype.peekUntilAfter=function(t){var r=this.__position,n=this.readUntilAfter(t);return this.__position=r,n},e.prototype.lookBack=function(t){var r=this.__position-1;return r>=t.length&&this.__input.substring(r-t.length,r).toLowerCase()===t},kT.InputScanner=e,kT}var $1={},CT={},vD;function Nme(){if(vD)return CT;vD=1;function i(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}return i.prototype.restart=function(){this.__position=0},i.prototype.isEmpty=function(){return this.__tokens_length===0},i.prototype.hasNext=function(){return this.__position<this.__tokens_length},i.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e},i.prototype.peek=function(e){var t=null;return e=e||0,e+=this.__position,e>=0&&e<this.__tokens_length&&(t=this.__tokens[e]),t},i.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1},CT.TokenStream=i,CT}var $T={},LT={},bD;function iS(){if(bD)return LT;bD=1;function i(e,t){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,t&&(this._starting_pattern=this._input.get_regexp(t._starting_pattern,!0),this._match_pattern=this._input.get_regexp(t._match_pattern,!0),this._until_pattern=this._input.get_regexp(t._until_pattern),this._until_after=t._until_after)}return i.prototype.read=function(){var e=this._input.read(this._starting_pattern);return(!this._starting_pattern||e)&&(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e},i.prototype.read_match=function(){return this._input.match(this._match_pattern)},i.prototype.until_after=function(e){var t=this._create();return t._until_after=!0,t._until_pattern=this._input.get_regexp(e),t._update(),t},i.prototype.until=function(e){var t=this._create();return t._until_after=!1,t._until_pattern=this._input.get_regexp(e),t._update(),t},i.prototype.starting_with=function(e){var t=this._create();return t._starting_pattern=this._input.get_regexp(e,!0),t._update(),t},i.prototype.matching=function(e){var t=this._create();return t._match_pattern=this._input.get_regexp(e,!0),t._update(),t},i.prototype._create=function(){return new i(this._input,this)},i.prototype._update=function(){},LT.Pattern=i,LT}var xD;function Ime(){if(xD)return $T;xD=1;var i=iS().Pattern;function e(t,r){i.call(this,t,r),r?this._line_regexp=this._input.get_regexp(r._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}return e.prototype=new i,e.prototype.__set_whitespace_patterns=function(t,r){t+="\\t ",r+="\\n\\r",this._match_pattern=this._input.get_regexp("["+t+r+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+r+"]")},e.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var t=this._input.read(this._match_pattern);if(t===" ")this.whitespace_before_token=" ";else if(t){var r=this.__split(this._newline_regexp,t);this.newline_count=r.length-1,this.whitespace_before_token=r[this.newline_count]}return t},e.prototype.matching=function(t,r){var n=this._create();return n.__set_whitespace_patterns(t,r),n._update(),n},e.prototype._create=function(){return new e(this._input,this)},e.prototype.__split=function(t,r){t.lastIndex=0;for(var n=0,s=[],o=t.exec(r);o;)s.push(r.substring(n,o.index)),n=o.index+o[0].length,o=t.exec(r);return n<r.length?s.push(r.substring(n,r.length)):s.push(""),s},$T.WhitespacePattern=e,$T}var wD;function Bw(){if(wD)return $1;wD=1;var i=iL().InputScanner,e=BV().Token,t=Nme().TokenStream,r=Ime().WhitespacePattern,n={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},s=function(o,a){this._input=new i(o),this._options=a||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new r(this._input)};return s.prototype.tokenize=function(){this._input.restart(),this.__tokens=new t,this._reset();for(var o,a=new e(n.START,""),l=null,c=[],u=new t;a.type!==n.EOF;){for(o=this._get_next_token(a,l);this._is_comment(o);)u.add(o),o=this._get_next_token(a,l);u.isEmpty()||(o.comments_before=u,u=new t),o.parent=l,this._is_opening(o)?(c.push(l),l=o):l&&this._is_closing(o,l)&&(o.opened=l,l.closed=o,l=c.pop(),o.parent=l),o.previous=a,a.next=o,this.__tokens.add(o),a=o}return this.__tokens},s.prototype._is_first_token=function(){return this.__tokens.isEmpty()},s.prototype._reset=function(){},s.prototype._get_next_token=function(o,a){this._readWhitespace();var l=this._input.read(/.+/g);return l?this._create_token(n.RAW,l):this._create_token(n.EOF,"")},s.prototype._is_comment=function(o){return!1},s.prototype._is_opening=function(o){return!1},s.prototype._is_closing=function(o,a){return!1},s.prototype._create_token=function(o,a){var l=new e(o,a,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return l},s.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},$1.Tokenizer=s,$1.TOKEN=n,$1}var RT={},MD;function rL(){if(MD)return RT;MD=1;function i(e,t){e=typeof e=="string"?e:e.source,t=typeof t=="string"?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}return i.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;for(var r=this.__directive_pattern.exec(e);r;)t[r[1]]=r[2],r=this.__directive_pattern.exec(e);return t},i.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)},RT.Directives=i,RT}var PT={},SD;function HV(){if(SD)return PT;SD=1;var i=iS().Pattern,e={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1,angular:!1};function t(r,n){i.call(this,r,n),this.__template_pattern=null,this._disabled=Object.assign({},e),this._excluded=Object.assign({},e),n&&(this.__template_pattern=this._input.get_regexp(n.__template_pattern),this._excluded=Object.assign(this._excluded,n._excluded),this._disabled=Object.assign(this._disabled,n._disabled));var s=new i(r);this.__patterns={handlebars_comment:s.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:s.starting_with(/{{{/).until_after(/}}}/),handlebars:s.starting_with(/{{/).until_after(/}}/),php:s.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:s.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:s.starting_with(/{%/).until_after(/%}/),django_value:s.starting_with(/{{/).until_after(/}}/),django_comment:s.starting_with(/{#/).until_after(/#}/),smarty:s.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:s.starting_with(/{\*/).until_after(/\*}/),smarty_literal:s.starting_with(/{literal}/).until_after(/{\/literal}/)}}return t.prototype=new i,t.prototype._create=function(){return new t(this._input,this)},t.prototype._update=function(){this.__set_templated_pattern()},t.prototype.disable=function(r){var n=this._create();return n._disabled[r]=!0,n._update(),n},t.prototype.read_options=function(r){var n=this._create();for(var s in e)n._disabled[s]=r.templating.indexOf(s)===-1;return n._update(),n},t.prototype.exclude=function(r){var n=this._create();return n._excluded[r]=!0,n._update(),n},t.prototype.read=function(){var r="";this._match_pattern?r=this._input.read(this._starting_pattern):r=this._input.read(this._starting_pattern,this.__template_pattern);for(var n=this._read_template();n;)this._match_pattern?n+=this._input.read(this._match_pattern):n+=this._input.readUntil(this.__template_pattern),r+=n,n=this._read_template();return this._until_after&&(r+=this._input.readUntilAfter(this._until_pattern)),r},t.prototype.__set_templated_pattern=function(){var r=[];this._disabled.php||r.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||r.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||r.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(r.push(this.__patterns.django._starting_pattern.source),r.push(this.__patterns.django_value._starting_pattern.source),r.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||r.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&r.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+r.join("|")+")")},t.prototype._read_template=function(){var r="",n=this._input.peek();if(n==="<"){var s=this._input.peek(1);!this._disabled.php&&!this._excluded.php&&s==="?"&&(r=r||this.__patterns.php.read()),!this._disabled.erb&&!this._excluded.erb&&s==="%"&&(r=r||this.__patterns.erb.read())}else n==="{"&&(!this._disabled.handlebars&&!this._excluded.handlebars&&(r=r||this.__patterns.handlebars_comment.read(),r=r||this.__patterns.handlebars_unescaped.read(),r=r||this.__patterns.handlebars.read()),this._disabled.django||(!this._excluded.django&&!this._excluded.handlebars&&(r=r||this.__patterns.django_value.read()),this._excluded.django||(r=r||this.__patterns.django_comment.read(),r=r||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(r=r||this.__patterns.smarty_comment.read(),r=r||this.__patterns.smarty_literal.read(),r=r||this.__patterns.smarty.read()));return r},PT.TemplatablePattern=t,PT}var TD;function L1(){if(TD)return Zd;TD=1;var i=iL().InputScanner,e=Bw().Tokenizer,t=Bw().TOKEN,r=rL().Directives,n=VV(),s=iS().Pattern,o=HV().TemplatablePattern;function a(S,A){return A.indexOf(S)!==-1}var l={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:t.START,RAW:t.RAW,EOF:t.EOF},c=new r(/\/\*/,/\*\//),u=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,h=/[0-9]/,d=/[^\d\.]/,f=">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),g=">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";g=g.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"),g="\\?\\.(?!\\d) "+g,g=g.replace(/ /g,"|");var v=new RegExp(g),m="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),p=m.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as","class","extends"]),y=new RegExp("^(?:"+p.join("|")+")$"),_,x=function(S,A){e.call(this,S,A),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var k=new s(this._input),M=new o(this._input).read_options(this._options);this.__patterns={template:M,identifier:M.starting_with(n.identifier).matching(n.identifierMatch),number:k.matching(u),punct:k.matching(v),comment:k.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:k.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:k.matching(/<!--/),html_comment_end:k.matching(/-->/),include:k.starting_with(/#include/).until_after(n.lineBreak),shebang:k.starting_with(/#!/).until_after(n.lineBreak),xml:k.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:M.until(/['\\\n\r\u2028\u2029]/),double_quote:M.until(/["\\\n\r\u2028\u2029]/),template_text:M.until(/[`\\$]/),template_expression:M.until(/[`}\\]/)}};x.prototype=new e,x.prototype._is_comment=function(S){return S.type===l.COMMENT||S.type===l.BLOCK_COMMENT||S.type===l.UNKNOWN},x.prototype._is_opening=function(S){return S.type===l.START_BLOCK||S.type===l.START_EXPR},x.prototype._is_closing=function(S,A){return(S.type===l.END_BLOCK||S.type===l.END_EXPR)&&A&&(S.text==="]"&&A.text==="["||S.text===")"&&A.text==="("||S.text==="}"&&A.text==="{")},x.prototype._reset=function(){_=!1},x.prototype._get_next_token=function(S,A){var k=null;this._readWhitespace();var M=this._input.peek();return M===null?this._create_token(l.EOF,""):(k=k||this._read_non_javascript(M),k=k||this._read_string(M),k=k||this._read_pair(M,this._input.peek(1)),k=k||this._read_word(S),k=k||this._read_singles(M),k=k||this._read_comment(M),k=k||this._read_regexp(M,S),k=k||this._read_xml(M,S),k=k||this._read_punctuation(),k=k||this._create_token(l.UNKNOWN,this._input.next()),k)},x.prototype._read_word=function(S){var A;if(A=this.__patterns.identifier.read(),A!=="")return A=A.replace(n.allLineBreaks,`
`),!(S.type===l.DOT||S.type===l.RESERVED&&(S.text==="set"||S.text==="get"))&&y.test(A)?(A==="in"||A==="of")&&(S.type===l.WORD||S.type===l.STRING)?this._create_token(l.OPERATOR,A):this._create_token(l.RESERVED,A):this._create_token(l.WORD,A);if(A=this.__patterns.number.read(),A!=="")return this._create_token(l.WORD,A)},x.prototype._read_singles=function(S){var A=null;return S==="("||S==="["?A=this._create_token(l.START_EXPR,S):S===")"||S==="]"?A=this._create_token(l.END_EXPR,S):S==="{"?A=this._create_token(l.START_BLOCK,S):S==="}"?A=this._create_token(l.END_BLOCK,S):S===";"?A=this._create_token(l.SEMICOLON,S):S==="."&&d.test(this._input.peek(1))?A=this._create_token(l.DOT,S):S===","&&(A=this._create_token(l.COMMA,S)),A&&this._input.next(),A},x.prototype._read_pair=function(S,A){var k=null;return S==="#"&&A==="{"&&(k=this._create_token(l.START_BLOCK,S+A)),k&&(this._input.next(),this._input.next()),k},x.prototype._read_punctuation=function(){var S=this.__patterns.punct.read();if(S!=="")return S==="="?this._create_token(l.EQUALS,S):S==="?."?this._create_token(l.DOT,S):this._create_token(l.OPERATOR,S)},x.prototype._read_non_javascript=function(S){var A="";if(S==="#"){if(this._is_first_token()&&(A=this.__patterns.shebang.read(),A))return this._create_token(l.UNKNOWN,A.trim()+`
`);if(A=this.__patterns.include.read(),A)return this._create_token(l.UNKNOWN,A.trim()+`
`);S=this._input.next();var k="#";if(this._input.hasNext()&&this._input.testChar(h)){do S=this._input.next(),k+=S;while(this._input.hasNext()&&S!=="#"&&S!=="=");return S==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(k+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(k+="{}",this._input.next(),this._input.next())),this._create_token(l.WORD,k)}this._input.back()}else if(S==="<"&&this._is_first_token()){if(A=this.__patterns.html_comment_start.read(),A){for(;this._input.hasNext()&&!this._input.testChar(n.newline);)A+=this._input.next();return _=!0,this._create_token(l.COMMENT,A)}}else if(_&&S==="-"&&(A=this.__patterns.html_comment_end.read(),A))return _=!1,this._create_token(l.COMMENT,A);return null},x.prototype._read_comment=function(S){var A=null;if(S==="/"){var k="";if(this._input.peek(1)==="*"){k=this.__patterns.block_comment.read();var M=c.get_directives(k);M&&M.ignore==="start"&&(k+=c.readIgnored(this._input)),k=k.replace(n.allLineBreaks,`
`),A=this._create_token(l.BLOCK_COMMENT,k),A.directives=M}else this._input.peek(1)==="/"&&(k=this.__patterns.comment.read(),A=this._create_token(l.COMMENT,k))}return A},x.prototype._read_string=function(S){if(S==="`"||S==="'"||S==='"'){var A=this._input.next();return this.has_char_escapes=!1,S==="`"?A+=this._read_string_recursive("`",!0,"${"):A+=this._read_string_recursive(S),this.has_char_escapes&&this._options.unescape_strings&&(A=w(A)),this._input.peek()===S&&(A+=this._input.next()),A=A.replace(n.allLineBreaks,`
`),this._create_token(l.STRING,A)}return null},x.prototype._allow_regexp_or_xml=function(S){return S.type===l.RESERVED&&a(S.text,["return","case","throw","else","do","typeof","yield"])||S.type===l.END_EXPR&&S.text===")"&&S.opened.previous.type===l.RESERVED&&a(S.opened.previous.text,["if","while","for"])||a(S.type,[l.COMMENT,l.START_EXPR,l.START_BLOCK,l.START,l.END_BLOCK,l.OPERATOR,l.EQUALS,l.EOF,l.SEMICOLON,l.COMMA])},x.prototype._read_regexp=function(S,A){if(S==="/"&&this._allow_regexp_or_xml(A)){for(var k=this._input.next(),M=!1,b=!1;this._input.hasNext()&&(M||b||this._input.peek()!==S)&&!this._input.testChar(n.newline);)k+=this._input.peek(),M?M=!1:(M=this._input.peek()==="\\",this._input.peek()==="["?b=!0:this._input.peek()==="]"&&(b=!1)),this._input.next();return this._input.peek()===S&&(k+=this._input.next(),k+=this._input.read(n.identifier)),this._create_token(l.STRING,k)}return null},x.prototype._read_xml=function(S,A){if(this._options.e4x&&S==="<"&&this._allow_regexp_or_xml(A)){var k="",M=this.__patterns.xml.read_match();if(M){for(var b=M[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),P=b.indexOf("{")===0,N=0;M;){var D=!!M[1],U=M[2],G=!!M[M.length-1]||U.slice(0,8)==="![CDATA[";if(!G&&(U===b||P&&U.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(D?--N:++N),k+=M[0],N<=0)break;M=this.__patterns.xml.read_match()}return M||(k+=this._input.match(/[\s\S]*/g)[0]),k=k.replace(n.allLineBreaks,`
`),this._create_token(l.STRING,k)}}return null};function w(S){for(var A="",k=0,M=new i(S),b=null;M.hasNext();)if(b=M.match(/([\s]|[^\\]|\\\\)+/g),b&&(A+=b[0]),M.peek()==="\\"){if(M.next(),M.peek()==="x")b=M.match(/x([0-9A-Fa-f]{2})/g);else if(M.peek()==="u")b=M.match(/u([0-9A-Fa-f]{4})/g),b||(b=M.match(/u\{([0-9A-Fa-f]+)\}/g));else{A+="\\",M.hasNext()&&(A+=M.next());continue}if(!b||(k=parseInt(b[1],16),k>126&&k<=255&&b[0].indexOf("x")===0))return S;k>=0&&k<32||k>1114111?A+="\\"+b[0]:k===34||k===39||k===92?A+="\\"+String.fromCharCode(k):A+=String.fromCharCode(k)}return A}return x.prototype._read_string_recursive=function(S,A,k){var M,b;S==="'"?b=this.__patterns.single_quote:S==='"'?b=this.__patterns.double_quote:S==="`"?b=this.__patterns.template_text:S==="}"&&(b=this.__patterns.template_expression);for(var P=b.read(),N="";this._input.hasNext();){if(N=this._input.next(),N===S||!A&&n.newline.test(N)){this._input.back();break}else N==="\\"&&this._input.hasNext()?(M=this._input.peek(),M==="x"||M==="u"?this.has_char_escapes=!0:M==="\r"&&this._input.peek(1)===`
`&&this._input.next(),N+=this._input.next()):k&&(k==="${"&&N==="$"&&this._input.peek()==="{"&&(N+=this._input.next()),k===N&&(S==="`"?N+=this._read_string_recursive("}",A,"`"):N+=this._read_string_recursive("`",A,"${"),this._input.hasNext()&&(N+=this._input.next())));N+=b.read(),P+=N}return P},Zd.Tokenizer=x,Zd.TOKEN=l,Zd.positionable_operators=f.slice(),Zd.line_starters=m.slice(),Zd}var ED;function Dme(){if(ED)return ST;ED=1;var i=eL().Output,e=BV().Token,t=VV(),r=jV().Options,n=L1().Tokenizer,s=L1().line_starters,o=L1().positionable_operators,a=L1().TOKEN;function l(b,P){return P.indexOf(b)!==-1}function c(b){return b.replace(/^\s+/g,"")}function u(b){for(var P={},N=0;N<b.length;N++)P[b[N].replace(/-/g,"_")]=b[N];return P}function h(b,P){return b&&b.type===a.RESERVED&&b.text===P}function d(b,P){return b&&b.type===a.RESERVED&&l(b.text,P)}var f=["case","return","do","if","throw","else","await","break","continue","async"],g=["before-newline","after-newline","preserve-newline"],v=u(g),m=[v.before_newline,v.preserve_newline],p={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function y(b,P){P.multiline_frame||P.mode===p.ForInitializer||P.mode===p.Conditional||b.remove_indent(P.start_line_index)}function _(b){b=b.replace(t.allLineBreaks,`
`);for(var P=[],N=b.indexOf(`
`);N!==-1;)P.push(b.substring(0,N)),b=b.substring(N+1),N=b.indexOf(`
`);return b.length&&P.push(b),P}function x(b){return b===p.ArrayLiteral}function w(b){return l(b,[p.Expression,p.ForInitializer,p.Conditional])}function S(b,P){for(var N=0;N<b.length;N++){var D=b[N].trim();if(D.charAt(0)!==P)return!1}return!0}function A(b,P){for(var N=0,D=b.length,U;N<D;N++)if(U=b[N],U&&U.indexOf(P)!==0)return!1;return!0}function k(b,P){P=P||{},this._source_text=b||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new r(P)}k.prototype.create_flags=function(b,P){var N=0;b&&(N=b.indentation_level,!this._output.just_added_newline()&&b.line_indent_level>N&&(N=b.line_indent_level));var D={mode:P,parent:b,last_token:b?b.last_token:new e(a.START_BLOCK,""),last_word:b?b.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:N,alignment:0,line_indent_level:b?b.line_indent_level:N,start_line_index:this._output.get_line_number(),ternary_depth:0};return D},k.prototype._reset=function(b){var P=b.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new i(this._options,P),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(p.BlockStatement);var N=new n(b,this._options);return this._tokens=N.tokenize(),b},k.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var b,P=this._reset(this._source_text),N=this._options.eol;this._options.eol==="auto"&&(N=`
`,P&&t.lineBreak.test(P||"")&&(N=P.match(t.lineBreak)[0]));for(var D=this._tokens.next();D;)this.handle_token(D),this._last_last_text=this._flags.last_token.text,this._flags.last_token=D,D=this._tokens.next();return b=this._output.get_code(N),b},k.prototype.handle_token=function(b,P){b.type===a.START_EXPR?this.handle_start_expr(b):b.type===a.END_EXPR?this.handle_end_expr(b):b.type===a.START_BLOCK?this.handle_start_block(b):b.type===a.END_BLOCK?this.handle_end_block(b):b.type===a.WORD?this.handle_word(b):b.type===a.RESERVED?this.handle_word(b):b.type===a.SEMICOLON?this.handle_semicolon(b):b.type===a.STRING?this.handle_string(b):b.type===a.EQUALS?this.handle_equals(b):b.type===a.OPERATOR?this.handle_operator(b):b.type===a.COMMA?this.handle_comma(b):b.type===a.BLOCK_COMMENT?this.handle_block_comment(b,P):b.type===a.COMMENT?this.handle_comment(b,P):b.type===a.DOT?this.handle_dot(b):b.type===a.EOF?this.handle_eof(b):b.type===a.UNKNOWN?this.handle_unknown(b,P):this.handle_unknown(b,P)},k.prototype.handle_whitespace_and_comments=function(b,P){var N=b.newlines,D=this._options.keep_array_indentation&&x(this._flags.mode);if(b.comments_before)for(var U=b.comments_before.next();U;)this.handle_whitespace_and_comments(U,P),this.handle_token(U,P),U=b.comments_before.next();if(D)for(var G=0;G<N;G+=1)this.print_newline(G>0,P);else if(this._options.max_preserve_newlines&&N>this._options.max_preserve_newlines&&(N=this._options.max_preserve_newlines),this._options.preserve_newlines&&N>1){this.print_newline(!1,P);for(var B=1;B<N;B+=1)this.print_newline(!0,P)}};var M=["async","break","continue","return","throw","yield"];return k.prototype.allow_wrap_or_preserved_newline=function(b,P){if(P=P===void 0?!1:P,!this._output.just_added_newline()){var N=this._options.preserve_newlines&&b.newlines||P,D=l(this._flags.last_token.text,o)||l(b.text,o);if(D){var U=l(this._flags.last_token.text,o)&&l(this._options.operator_position,m)||l(b.text,o);N=N&&U}if(N)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(d(this._flags.last_token,M))return;this._output.set_wrap_point()}}},k.prototype.print_newline=function(b,P){if(!P&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==a.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var N=this._tokens.peek();this._flags.mode===p.Statement&&!(this._flags.if_block&&h(N,"else"))&&!this._flags.do_block;)this.restore_mode();this._output.add_new_line(b)&&(this._flags.multiline_frame=!0)},k.prototype.print_token_line_indentation=function(b){this._output.just_added_newline()&&(this._options.keep_array_indentation&&b.newlines&&(b.text==="["||x(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(b.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},k.prototype.print_token=function(b){if(this._output.raw){this._output.add_raw_token(b);return}if(this._options.comma_first&&b.previous&&b.previous.type===a.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var P=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(P),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(b),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(b),this._output.non_breaking_space=!0,this._output.add_token(b.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)},k.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},k.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},k.prototype.set_mode=function(b){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,b),this._flags=this.create_flags(this._previous_flags,b),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},k.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===p.Statement&&y(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},k.prototype.start_of_object_property=function(){return this._flags.parent.mode===p.ObjectLiteral&&this._flags.mode===p.Statement&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||d(this._flags.last_token,["get","set"]))},k.prototype.start_of_statement=function(b){var P=!1;return P=P||d(this._flags.last_token,["var","let","const"])&&b.type===a.WORD,P=P||h(this._flags.last_token,"do"),P=P||!(this._flags.parent.mode===p.ObjectLiteral&&this._flags.mode===p.Statement)&&d(this._flags.last_token,M)&&!b.newlines,P=P||h(this._flags.last_token,"else")&&!(h(b,"if")&&!b.comments_before),P=P||this._flags.last_token.type===a.END_EXPR&&(this._previous_flags.mode===p.ForInitializer||this._previous_flags.mode===p.Conditional),P=P||this._flags.last_token.type===a.WORD&&this._flags.mode===p.BlockStatement&&!this._flags.in_case&&!(b.text==="--"||b.text==="++")&&this._last_last_text!=="function"&&b.type!==a.WORD&&b.type!==a.RESERVED,P=P||this._flags.mode===p.ObjectLiteral&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||d(this._flags.last_token,["get","set"])),P?(this.set_mode(p.Statement),this.indent(),this.handle_whitespace_and_comments(b,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(b,d(b,["do","for","if","while"])),!0):!1},k.prototype.handle_start_expr=function(b){this.start_of_statement(b)||this.handle_whitespace_and_comments(b);var P=p.Expression;if(b.text==="["){if(this._flags.last_token.type===a.WORD||this._flags.last_token.text===")"){d(this._flags.last_token,s)&&(this._output.space_before_token=!0),this.print_token(b),this.set_mode(P),this.indent(),this._options.space_in_paren&&(this._output.space_before_token=!0);return}P=p.ArrayLiteral,x(this._flags.mode)&&(this._flags.last_token.text==="["||this._flags.last_token.text===","&&(this._last_last_text==="]"||this._last_last_text==="}"))&&(this._options.keep_array_indentation||this.print_newline()),l(this._flags.last_token.type,[a.START_EXPR,a.END_EXPR,a.WORD,a.OPERATOR,a.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===a.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,P=p.ForInitializer):l(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,P=p.Conditional):l(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&b.whitespace_before===""?this._output.space_before_token=!1:(l(this._flags.last_token.text,s)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===a.EQUALS||this._flags.last_token.type===a.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(b);else if(this._flags.last_token.type===a.WORD){this._output.space_before_token=!1;var N=this._tokens.peek(-3);if(this._options.space_after_named_function&&N){var D=this._tokens.peek(-4);d(N,["async","function"])||N.text==="*"&&d(D,["async","function"])?this._output.space_before_token=!0:this._flags.mode===p.ObjectLiteral?(N.text==="{"||N.text===","||N.text==="*"&&(D.text==="{"||D.text===","))&&(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(b);(this._flags.last_token.type===a.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(l(this._last_last_text,["function","yield"])||this._flags.mode===p.ObjectLiteral&&l(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===a.START_BLOCK?this.print_newline():(this._flags.last_token.type===a.END_EXPR||this._flags.last_token.type===a.START_EXPR||this._flags.last_token.type===a.END_BLOCK||this._flags.last_token.text==="."||this._flags.last_token.type===a.COMMA)&&this.allow_wrap_or_preserved_newline(b,b.newlines),this.print_token(b),this.set_mode(P),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},k.prototype.handle_end_expr=function(b){for(;this._flags.mode===p.Statement;)this.restore_mode();this.handle_whitespace_and_comments(b),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(b,b.text==="]"&&x(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type===a.START_EXPR&&!this._options.space_in_empty_paren?(this._output.trim(),this._output.space_before_token=!1):this._output.space_before_token=!0),this.deindent(),this.print_token(b),this.restore_mode(),y(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===p.Conditional&&(this._previous_flags.mode=p.Expression,this._flags.do_block=!1,this._flags.do_while=!1)},k.prototype.handle_start_block=function(b){this.handle_whitespace_and_comments(b);var P=this._tokens.peek(),N=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===a.END_EXPR?(this.set_mode(p.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(p.BlockStatement):N&&(l(N.text,[":",","])&&l(P.type,[a.STRING,a.WORD,a.RESERVED])||l(P.text,["get","set","..."])&&l(N.type,[a.WORD,a.RESERVED]))?l(this._last_last_text,["class","interface"])&&!l(N.text,[":",","])?this.set_mode(p.BlockStatement):this.set_mode(p.ObjectLiteral):this._flags.last_token.type===a.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(p.BlockStatement):l(this._flags.last_token.type,[a.EQUALS,a.START_EXPR,a.COMMA,a.OPERATOR])||d(this._flags.last_token,["return","throw","import","default"])?this.set_mode(p.ObjectLiteral):this.set_mode(p.BlockStatement),this._flags.last_token&&d(this._flags.last_token.previous,["class","extends"])&&(this._flags.class_start_block=!0);var D=!P.comments_before&&P.text==="}",U=D&&this._flags.last_word==="function"&&this._flags.last_token.type===a.END_EXPR;if(this._options.brace_preserve_inline){var G=0,B=null;this._flags.inline_frame=!0;do if(G+=1,B=this._tokens.peek(G-1),B.newlines){this._flags.inline_frame=!1;break}while(B.type!==a.EOF&&!(B.type===a.END_BLOCK&&B.opened===b))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&b.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==a.OPERATOR&&(U||this._flags.last_token.type===a.EQUALS||d(this._flags.last_token,f)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(x(this._previous_flags.mode)&&(this._flags.last_token.type===a.START_EXPR||this._flags.last_token.type===a.COMMA)&&((this._flags.last_token.type===a.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===a.COMMA||this._flags.last_token.type===a.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(b),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==a.OPERATOR&&this._flags.last_token.type!==a.START_EXPR&&(l(this._flags.last_token.type,[a.START_BLOCK,a.SEMICOLON])&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(b),this.indent(),!D&&!(this._options.brace_preserve_inline&&this._flags.inline_frame)&&this.print_newline()},k.prototype.handle_end_block=function(b){for(this.handle_whitespace_and_comments(b);this._flags.mode===p.Statement;)this.restore_mode();var P=this._flags.last_token.type===a.START_BLOCK;this._flags.inline_frame&&!P?this._output.space_before_token=!0:this._options.brace_style==="expand"?P||this.print_newline():P||(x(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(b)},k.prototype.handle_word=function(b){if(b.type===a.RESERVED){if(l(b.text,["set","get"])&&this._flags.mode!==p.ObjectLiteral)b.type=a.WORD;else if(b.text==="import"&&l(this._tokens.peek().text,["(","."]))b.type=a.WORD;else if(l(b.text,["as","from"])&&!this._flags.import_block)b.type=a.WORD;else if(this._flags.mode===p.ObjectLiteral){var P=this._tokens.peek();P.text===":"&&(b.type=a.WORD)}}if(this.start_of_statement(b)?d(this._flags.last_token,["var","let","const"])&&b.type===a.WORD&&(this._flags.declaration_statement=!0):b.newlines&&!w(this._flags.mode)&&(this._flags.last_token.type!==a.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++")&&this._flags.last_token.type!==a.EQUALS&&(this._options.preserve_newlines||!d(this._flags.last_token,["var","let","const","set","get"]))?(this.handle_whitespace_and_comments(b),this.print_newline()):this.handle_whitespace_and_comments(b),this._flags.do_block&&!this._flags.do_while)if(h(b,"while")){this._output.space_before_token=!0,this.print_token(b),this._output.space_before_token=!0,this._flags.do_while=!0;return}else this.print_newline(),this._flags.do_block=!1;if(this._flags.if_block)if(!this._flags.else_block&&h(b,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===p.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&d(b,["case","default"])){this.print_newline(),!this._flags.case_block&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(b),this._flags.in_case=!0;return}if((this._flags.last_token.type===a.COMMA||this._flags.last_token.type===a.START_EXPR||this._flags.last_token.type===a.EQUALS||this._flags.last_token.type===a.OPERATOR)&&!this.start_of_object_property()&&!(l(this._flags.last_token.text,["+","-"])&&this._last_last_text===":"&&this._flags.parent.mode===p.ObjectLiteral)&&this.allow_wrap_or_preserved_newline(b),h(b,"function")){(l(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!(l(this._flags.last_token.text,["(","[","{",":","=",","])||this._flags.last_token.type===a.OPERATOR))&&!this._output.just_added_blankline()&&!b.comments_before&&(this.print_newline(),this.print_newline(!0)),this._flags.last_token.type===a.RESERVED||this._flags.last_token.type===a.WORD?d(this._flags.last_token,["get","set","new","export"])||d(this._flags.last_token,M)?this._output.space_before_token=!0:h(this._flags.last_token,"default")&&this._last_last_text==="export"?this._output.space_before_token=!0:this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===a.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:!this._flags.multiline_frame&&(w(this._flags.mode)||x(this._flags.mode))||this.print_newline(),this.print_token(b),this._flags.last_word=b.text;return}var N="NONE";if(this._flags.last_token.type===a.END_BLOCK?this._previous_flags.inline_frame?N="SPACE":d(b,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&b.newlines?N="NEWLINE":(N="SPACE",this._output.space_before_token=!0):N="NEWLINE":this._flags.last_token.type===a.SEMICOLON&&this._flags.mode===p.BlockStatement?N="NEWLINE":this._flags.last_token.type===a.SEMICOLON&&w(this._flags.mode)?N="SPACE":this._flags.last_token.type===a.STRING?N="NEWLINE":this._flags.last_token.type===a.RESERVED||this._flags.last_token.type===a.WORD||this._flags.last_token.text==="*"&&(l(this._last_last_text,["function","yield"])||this._flags.mode===p.ObjectLiteral&&l(this._last_last_text,["{",","]))?N="SPACE":this._flags.last_token.type===a.START_BLOCK?this._flags.inline_frame?N="SPACE":N="NEWLINE":this._flags.last_token.type===a.END_EXPR&&(this._output.space_before_token=!0,N="NEWLINE"),d(b,s)&&this._flags.last_token.text!==")"&&(this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?N="SPACE":N="NEWLINE"),d(b,["else","catch","finally"]))if((!(this._flags.last_token.type===a.END_BLOCK&&this._previous_flags.mode===p.BlockStatement)||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&b.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var D=this._output.current_line;D.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0}else N==="NEWLINE"?d(this._flags.last_token,f)?this._output.space_before_token=!0:this._flags.last_token.text==="declare"&&d(b,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==a.END_EXPR?(this._flags.last_token.type!==a.START_EXPR||!d(b,["var","let","const"]))&&this._flags.last_token.text!==":"&&(h(b,"if")&&h(b.previous,"else")?this._output.space_before_token=!0:this.print_newline()):d(b,s)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&x(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():N==="SPACE"&&(this._output.space_before_token=!0);b.previous&&(b.previous.type===a.WORD||b.previous.type===a.RESERVED)&&(this._output.space_before_token=!0),this.print_token(b),this._flags.last_word=b.text,b.type===a.RESERVED&&(b.text==="do"?this._flags.do_block=!0:b.text==="if"?this._flags.if_block=!0:b.text==="import"?this._flags.import_block=!0:this._flags.import_block&&h(b,"from")&&(this._flags.import_block=!1))},k.prototype.handle_semicolon=function(b){this.start_of_statement(b)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(b);for(var P=this._tokens.peek();this._flags.mode===p.Statement&&!(this._flags.if_block&&h(P,"else"))&&!this._flags.do_block;)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(b)},k.prototype.handle_string=function(b){b.text.startsWith("`")&&b.newlines===0&&b.whitespace_before===""&&(b.previous.text===")"||this._flags.last_token.type===a.WORD)||(this.start_of_statement(b)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(b),this._flags.last_token.type===a.RESERVED||this._flags.last_token.type===a.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===a.COMMA||this._flags.last_token.type===a.START_EXPR||this._flags.last_token.type===a.EQUALS||this._flags.last_token.type===a.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(b):b.text.startsWith("`")&&this._flags.last_token.type===a.END_EXPR&&(b.previous.text==="]"||b.previous.text===")")&&b.newlines===0?this._output.space_before_token=!0:this.print_newline())),this.print_token(b)},k.prototype.handle_equals=function(b){this.start_of_statement(b)||this.handle_whitespace_and_comments(b),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(b),this._output.space_before_token=!0},k.prototype.handle_comma=function(b){this.handle_whitespace_and_comments(b,!0),this.print_token(b),this._output.space_before_token=!0,this._flags.declaration_statement?(w(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(b)):this._flags.mode===p.ObjectLiteral||this._flags.mode===p.Statement&&this._flags.parent.mode===p.ObjectLiteral?(this._flags.mode===p.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(b)},k.prototype.handle_operator=function(b){var P=b.text==="*"&&(d(this._flags.last_token,["function","yield"])||l(this._flags.last_token.type,[a.START_BLOCK,a.COMMA,a.END_BLOCK,a.SEMICOLON])),N=l(b.text,["-","+"])&&(l(this._flags.last_token.type,[a.START_BLOCK,a.START_EXPR,a.EQUALS,a.OPERATOR])||l(this._flags.last_token.text,s)||this._flags.last_token.text===",");if(!this.start_of_statement(b)){var D=!P;this.handle_whitespace_and_comments(b,D)}if(b.text==="*"&&this._flags.last_token.type===a.DOT){this.print_token(b);return}if(b.text==="::"){this.print_token(b);return}if(l(b.text,["-","+"])&&this.start_of_object_property()){this.print_token(b);return}if(this._flags.last_token.type===a.OPERATOR&&l(this._options.operator_position,m)&&this.allow_wrap_or_preserved_newline(b),b.text===":"&&this._flags.in_case){this.print_token(b),this._flags.in_case=!1,this._flags.case_body=!0,this._tokens.peek().type!==a.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0);return}var U=!0,G=!0,B=!1;if(b.text===":"?this._flags.ternary_depth===0?U=!1:(this._flags.ternary_depth-=1,B=!0):b.text==="?"&&(this._flags.ternary_depth+=1),!N&&!P&&this._options.preserve_newlines&&l(b.text,o)){var Q=b.text===":",j=Q&&B,X=Q&&!B;switch(this._options.operator_position){case v.before_newline:this._output.space_before_token=!X,this.print_token(b),(!Q||j)&&this.allow_wrap_or_preserved_newline(b),this._output.space_before_token=!0;return;case v.after_newline:this._output.space_before_token=!0,!Q||j?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(b):this._output.space_before_token=!1,this.print_token(b),this._output.space_before_token=!0;return;case v.preserve_newline:X||this.allow_wrap_or_preserved_newline(b),U=!(this._output.just_added_newline()||X),this._output.space_before_token=U,this.print_token(b),this._output.space_before_token=!0;return}}if(P){this.allow_wrap_or_preserved_newline(b),U=!1;var ne=this._tokens.peek();G=ne&&l(ne.type,[a.WORD,a.RESERVED])}else if(b.text==="...")this.allow_wrap_or_preserved_newline(b),U=this._flags.last_token.type===a.START_BLOCK,G=!1;else if(l(b.text,["--","++","!","~"])||N){if((this._flags.last_token.type===a.COMMA||this._flags.last_token.type===a.START_EXPR)&&this.allow_wrap_or_preserved_newline(b),U=!1,G=!1,b.newlines&&(b.text==="--"||b.text==="++"||b.text==="~")){var ge=d(this._flags.last_token,f)&&b.newlines;ge&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(ge,!0)}this._flags.last_token.text===";"&&w(this._flags.mode)&&(U=!0),this._flags.last_token.type===a.RESERVED?U=!0:this._flags.last_token.type===a.END_EXPR?U=!(this._flags.last_token.text==="]"&&(b.text==="--"||b.text==="++")):this._flags.last_token.type===a.OPERATOR&&(U=l(b.text,["--","-","++","+"])&&l(this._flags.last_token.text,["--","-","++","+"]),l(b.text,["+","-"])&&l(this._flags.last_token.text,["--","++"])&&(G=!0)),(this._flags.mode===p.BlockStatement&&!this._flags.inline_frame||this._flags.mode===p.Statement)&&(this._flags.last_token.text==="{"||this._flags.last_token.text===";")&&this.print_newline()}this._output.space_before_token=this._output.space_before_token||U,this.print_token(b),this._output.space_before_token=G},k.prototype.handle_block_comment=function(b,P){if(this._output.raw){this._output.add_raw_token(b),b.directives&&b.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw);return}if(b.directives){this.print_newline(!1,P),this.print_token(b),b.directives.preserve==="start"&&(this._output.raw=!0),this.print_newline(!1,!0);return}if(!t.newline.test(b.text)&&!b.newlines){this._output.space_before_token=!0,this.print_token(b),this._output.space_before_token=!0;return}else this.print_block_commment(b,P)},k.prototype.print_block_commment=function(b,P){var N=_(b.text),D,U=!1,G=!1,B=b.whitespace_before,Q=B.length;if(this.print_newline(!1,P),this.print_token_line_indentation(b),this._output.add_token(N[0]),this.print_newline(!1,P),N.length>1){for(N=N.slice(1),U=S(N,"*"),G=A(N,B),U&&(this._flags.alignment=1),D=0;D<N.length;D++)U?(this.print_token_line_indentation(b),this._output.add_token(c(N[D]))):G&&N[D]?(this.print_token_line_indentation(b),this._output.add_token(N[D].substring(Q))):(this._output.current_line.set_indent(-1),this._output.add_token(N[D])),this.print_newline(!1,P);this._flags.alignment=0}},k.prototype.handle_comment=function(b,P){b.newlines?this.print_newline(!1,P):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(b),this.print_newline(!1,P)},k.prototype.handle_dot=function(b){this.start_of_statement(b)||this.handle_whitespace_and_comments(b,!0),this._flags.last_token.text.match("^[0-9]+$")&&(this._output.space_before_token=!0),d(this._flags.last_token,f)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(b,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(b)},k.prototype.handle_unknown=function(b,P){this.print_token(b),b.text[b.text.length-1]===`
`&&this.print_newline(!1,P)},k.prototype.handle_eof=function(b){for(;this._flags.mode===p.Statement;)this.restore_mode();this.handle_whitespace_and_comments(b)},ST.Beautifier=k,ST}var AD;function Ome(){if(AD)return C1.exports;AD=1;var i=Dme().Beautifier,e=jV().Options;function t(r,n){var s=new i(r,n);return s.beautify()}return C1.exports=t,C1.exports.defaultOptions=function(){return new e},C1.exports}var R1={exports:{}},NT={},IT={},kD;function GV(){if(kD)return IT;kD=1;var i=tL().Options;function e(t){i.call(this,t,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var r=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||r;var n=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var s=0;s<n.length;s++)n[s]!=="expand"?this.brace_style="collapse":this.brace_style=n[s]}return e.prototype=new i,IT.Options=e,IT}var CD;function Ume(){if(CD)return NT;CD=1;var i=GV().Options,e=eL().Output,t=iL().InputScanner,r=rL().Directives,n=new r(/\/\*/,/\*\//),s=/\r\n|[\r\n]/,o=/\r\n|[\r\n]/g,a=/\s/,l=/(?:\s|\n)+/g,c=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,u=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function h(d,f){this._source_text=d||"",this._options=new i(f),this._ch=null,this._input=null,this.NESTED_AT_RULE={page:!0,"font-face":!0,keyframes:!0,media:!0,supports:!0,document:!0},this.CONDITIONAL_GROUP_RULE={media:!0,supports:!0,document:!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}return h.prototype.eatString=function(d){var f="";for(this._ch=this._input.next();this._ch;){if(f+=this._ch,this._ch==="\\")f+=this._input.next();else if(d.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return f},h.prototype.eatWhitespace=function(d){for(var f=a.test(this._input.peek()),g=0;a.test(this._input.peek());)this._ch=this._input.next(),d&&this._ch===`
`&&(g===0||g<this._options.max_preserve_newlines)&&(g++,this._output.add_new_line(!0));return f},h.prototype.foundNestedPseudoClass=function(){for(var d=0,f=1,g=this._input.peek(f);g;){if(g==="{")return!0;if(g==="(")d+=1;else if(g===")"){if(d===0)return!1;d-=1}else if(g===";"||g==="}")return!1;f++,g=this._input.peek(f)}return!1},h.prototype.print_string=function(d){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(d)},h.prototype.preserveSingleSpace=function(d){d&&(this._output.space_before_token=!0)},h.prototype.indent=function(){this._indentLevel++},h.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},h.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var d=this._source_text,f=this._options.eol;f==="auto"&&(f=`
`,d&&s.test(d||"")&&(f=d.match(s)[0])),d=d.replace(o,`
`);var g=d.match(/^[\t ]*/)[0];this._output=new e(this._options,g),this._input=new t(d),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var v=0,m=!1,p=!1,y=!1,_=!1,x=!1,w=this._ch,S=!1,A,k,M;A=this._input.read(l),k=A!=="",M=w,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),w=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var b=this._input.read(c),P=n.get_directives(b);P&&P.ignore==="start"&&(b+=n.readIgnored(this._input)),this.print_string(b),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(u)),this.eatWhitespace(!0);else if(this._ch==="$"){this.preserveSingleSpace(k),this.print_string(this._ch);var N=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);N.match(/[ :]$/)&&(N=this.eatString(": ").replace(/\s+$/,""),this.print_string(N),this._output.space_before_token=!0),v===0&&N.indexOf(":")!==-1&&(p=!0,this.indent())}else if(this._ch==="@")if(this.preserveSingleSpace(k),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var D=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);D.match(/[ :]$/)&&(D=this.eatString(": ").replace(/\s+$/,""),this.print_string(D),this._output.space_before_token=!0),v===0&&D.indexOf(":")!==-1?(p=!0,this.indent()):D in this.NESTED_AT_RULE?(this._nestedLevel+=1,D in this.CONDITIONAL_GROUP_RULE&&(y=!0)):v===0&&!p&&(_=!0)}else if(this._ch==="#"&&this._input.peek()==="{")this.preserveSingleSpace(k),this.print_string(this._ch+this.eatString("}"));else if(this._ch==="{")p&&(p=!1,this.outdent()),_=!1,y?(y=!1,m=this._indentLevel>=this._nestedLevel):m=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&m&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(M==="("?this._output.space_before_token=!1:M!==","&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if(this._ch==="}")this.outdent(),this._output.add_new_line(),M==="{"&&this._output.trim(!0),p&&(this.outdent(),p=!1),this.print_string(this._ch),m=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0),this._input.peek()===")"&&(this._output.trim(!0),this._options.brace_style==="expand"&&this._output.add_new_line(!0));else if(this._ch===":"){for(var U=0;U<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;U++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[U])){S=!0;break}(m||y)&&!(this._input.lookBack("&")||this.foundNestedPseudoClass())&&!this._input.lookBack("(")&&!_&&v===0?(this.print_string(":"),p||(p=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":"))}else if(this._ch==='"'||this._ch==="'"){var G=M==='"'||M==="'";this.preserveSingleSpace(G||k),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(this._ch===";")S=!1,v===0?(p&&(this.outdent(),p=!1),_=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if(this._ch==="(")if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),v++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),v&&(v--,this.outdent()));else{var B=!1;this._input.lookBack("with")&&(B=!0),this.preserveSingleSpace(k||B),this.print_string(this._ch),p&&M==="$"&&this._options.selector_separator_newline?(this._output.add_new_line(),x=!0):(this.eatWhitespace(),v++,this.indent())}else if(this._ch===")")v&&(v--,this.outdent()),x&&this._input.peek()===";"&&this._options.selector_separator_newline&&(x=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(this._ch===",")this.print_string(this._ch),this.eatWhitespace(!0),this._options.selector_separator_newline&&(!p||x)&&v===0&&!_?this._output.add_new_line():this._output.space_before_token=!0;else if((this._ch===">"||this._ch==="+"||this._ch==="~")&&!p&&v===0)this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&a.test(this._ch)&&(this._ch=""));else if(this._ch==="]")this.print_string(this._ch);else if(this._ch==="[")this.preserveSingleSpace(k),this.print_string(this._ch);else if(this._ch==="=")this.eatWhitespace(),this.print_string("="),a.test(this._ch)&&(this._ch="");else if(this._ch==="!"&&!this._input.lookBack("\\"))this._output.space_before_token=!0,this.print_string(this._ch);else{var Q=M==='"'||M==="'";this.preserveSingleSpace(Q||k),this.print_string(this._ch),!this._output.just_added_newline()&&this._input.peek()===`
`&&S&&this._output.add_new_line()}var j=this._output.get_code(f);return j},NT.Beautifier=h,NT}var $D;function zme(){if($D)return R1.exports;$D=1;var i=Ume().Beautifier,e=GV().Options;function t(r,n){var s=new i(r,n);return s.beautify()}return R1.exports=t,R1.exports.defaultOptions=function(){return new e},R1.exports}var P1={exports:{}},DT={},OT={},LD;function WV(){if(LD)return OT;LD=1;var i=tL().Options;function e(t){i.call(this,t,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_min_attrs=this._get_number("wrap_attributes_min_attrs",2),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.inline_custom_elements=this._get_boolean("inline_custom_elements",!0),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}return e.prototype=new i,OT.Options=e,OT}var N1={},RD;function PD(){if(RD)return N1;RD=1;var i=Bw().Tokenizer,e=Bw().TOKEN,t=rL().Directives,r=HV().TemplatablePattern,n=iS().Pattern,s={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",CONTROL_FLOW_OPEN:"TK_CONTROL_FLOW_OPEN",CONTROL_FLOW_CLOSE:"TK_CONTROL_FLOW_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:e.START,RAW:e.RAW,EOF:e.EOF},o=new t(/<\!--/,/-->/),a=function(l,c){i.call(this,l,c),this._current_tag_name="";var u=new r(this._input).read_options(this._options),h=new n(this._input);if(this.__patterns={word:u.until(/[\n\r\t <]/),word_control_flow_close_excluded:u.until(/[\n\r\t <}]/),single_quote:u.until_after(/'/),double_quote:u.until_after(/"/),attribute:u.until(/[\n\r\t =>]|\/>/),element_name:u.until(/[\n\r\t >\/]/),angular_control_flow_start:h.matching(/\@[a-zA-Z]+[^({]*[({]/),handlebars_comment:h.starting_with(/{{!--/).until_after(/--}}/),handlebars:h.starting_with(/{{/).until_after(/}}/),handlebars_open:h.until(/[\n\r\t }]/),handlebars_raw_close:h.until(/}}/),comment:h.starting_with(/<!--/).until_after(/-->/),cdata:h.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:h.starting_with(/<!\[/).until_after(/]>/),processing:h.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars"),this.__patterns.word_control_flow_close_excluded=this.__patterns.word_control_flow_close_excluded.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var d=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=h.matching(d).until_after(d)}};return a.prototype=new i,a.prototype._is_comment=function(l){return!1},a.prototype._is_opening=function(l){return l.type===s.TAG_OPEN||l.type===s.CONTROL_FLOW_OPEN},a.prototype._is_closing=function(l,c){return l.type===s.TAG_CLOSE&&c&&((l.text===">"||l.text==="/>")&&c.text[0]==="<"||l.text==="}}"&&c.text[0]==="{"&&c.text[1]==="{")||l.type===s.CONTROL_FLOW_CLOSE&&l.text==="}"&&c.text.endsWith("{")},a.prototype._reset=function(){this._current_tag_name=""},a.prototype._get_next_token=function(l,c){var u=null;this._readWhitespace();var h=this._input.peek();return h===null?this._create_token(s.EOF,""):(u=u||this._read_open_handlebars(h,c),u=u||this._read_attribute(h,l,c),u=u||this._read_close(h,c),u=u||this._read_control_flows(h,c),u=u||this._read_raw_content(h,l,c),u=u||this._read_content_word(h,c),u=u||this._read_comment_or_cdata(h),u=u||this._read_processing(h),u=u||this._read_open(h,c),u=u||this._create_token(s.UNKNOWN,this._input.next()),u)},a.prototype._read_comment_or_cdata=function(l){var c=null,u=null,h=null;if(l==="<"){var d=this._input.peek(1);d==="!"&&(u=this.__patterns.comment.read(),u?(h=o.get_directives(u),h&&h.ignore==="start"&&(u+=o.readIgnored(this._input))):u=this.__patterns.cdata.read()),u&&(c=this._create_token(s.COMMENT,u),c.directives=h)}return c},a.prototype._read_processing=function(l){var c=null,u=null,h=null;if(l==="<"){var d=this._input.peek(1);(d==="!"||d==="?")&&(u=this.__patterns.conditional_comment.read(),u=u||this.__patterns.processing.read()),u&&(c=this._create_token(s.COMMENT,u),c.directives=h)}return c},a.prototype._read_open=function(l,c){var u=null,h=null;return(!c||c.type===s.CONTROL_FLOW_OPEN)&&l==="<"&&(u=this._input.next(),this._input.peek()==="/"&&(u+=this._input.next()),u+=this.__patterns.element_name.read(),h=this._create_token(s.TAG_OPEN,u)),h},a.prototype._read_open_handlebars=function(l,c){var u=null,h=null;return(!c||c.type===s.CONTROL_FLOW_OPEN)&&this._options.indent_handlebars&&l==="{"&&this._input.peek(1)==="{"&&(this._input.peek(2)==="!"?(u=this.__patterns.handlebars_comment.read(),u=u||this.__patterns.handlebars.read(),h=this._create_token(s.COMMENT,u)):(u=this.__patterns.handlebars_open.read(),h=this._create_token(s.TAG_OPEN,u))),h},a.prototype._read_control_flows=function(l,c){var u="",h=null;if(!this._options.templating.includes("angular")||!this._options.indent_handlebars)return h;if(l==="@"){if(u=this.__patterns.angular_control_flow_start.read(),u==="")return h;for(var d=u.endsWith("(")?1:0,f=0;!(u.endsWith("{")&&d===f);){var g=this._input.next();if(g===null)break;g==="("?d++:g===")"&&f++,u+=g}h=this._create_token(s.CONTROL_FLOW_OPEN,u)}else l==="}"&&c&&c.type===s.CONTROL_FLOW_OPEN&&(u=this._input.next(),h=this._create_token(s.CONTROL_FLOW_CLOSE,u));return h},a.prototype._read_close=function(l,c){var u=null,h=null;return c&&c.type===s.TAG_OPEN&&(c.text[0]==="<"&&(l===">"||l==="/"&&this._input.peek(1)===">")?(u=this._input.next(),l==="/"&&(u+=this._input.next()),h=this._create_token(s.TAG_CLOSE,u)):c.text[0]==="{"&&l==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),h=this._create_token(s.TAG_CLOSE,"}}"))),h},a.prototype._read_attribute=function(l,c,u){var h=null,d="";if(u&&u.text[0]==="<")if(l==="=")h=this._create_token(s.EQUALS,this._input.next());else if(l==='"'||l==="'"){var f=this._input.next();l==='"'?f+=this.__patterns.double_quote.read():f+=this.__patterns.single_quote.read(),h=this._create_token(s.VALUE,f)}else d=this.__patterns.attribute.read(),d&&(c.type===s.EQUALS?h=this._create_token(s.VALUE,d):h=this._create_token(s.ATTRIBUTE,d));return h},a.prototype._is_content_unformatted=function(l){return this._options.void_elements.indexOf(l)===-1&&(this._options.content_unformatted.indexOf(l)!==-1||this._options.unformatted.indexOf(l)!==-1)},a.prototype._read_raw_content=function(l,c,u){var h="";if(u&&u.text[0]==="{")h=this.__patterns.handlebars_raw_close.read();else if(c.type===s.TAG_CLOSE&&c.opened.text[0]==="<"&&c.text[0]!=="/"){var d=c.opened.text.substr(1).toLowerCase();if(d==="script"||d==="style"){var f=this._read_comment_or_cdata(l);if(f)return f.type=s.TEXT,f;h=this._input.readUntil(new RegExp("</"+d+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(d)&&(h=this._input.readUntil(new RegExp("</"+d+"[\\n\\r\\t ]*?>","ig")))}return h?this._create_token(s.TEXT,h):null},a.prototype._read_content_word=function(l,c){var u="";if(this._options.unformatted_content_delimiter&&l===this._options.unformatted_content_delimiter[0]&&(u=this.__patterns.unformatted_content_delimiter.read()),u||(u=c&&c.type===s.CONTROL_FLOW_OPEN?this.__patterns.word_control_flow_close_excluded.read():this.__patterns.word.read()),u)return this._create_token(s.TEXT,u)},N1.Tokenizer=a,N1.TOKEN=s,N1}var ND;function Fme(){if(ND)return DT;ND=1;var i=WV().Options,e=eL().Output,t=PD().Tokenizer,r=PD().TOKEN,n=/\r\n|[\r\n]/,s=/\r\n|[\r\n]/g,o=function(m,p){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=m.max_preserve_newlines,this.preserve_newlines=m.preserve_newlines,this._output=new e(m,p)};o.prototype.current_line_has_match=function(m){return this._output.current_line.has_match(m)},o.prototype.set_space_before_token=function(m,p){this._output.space_before_token=m,this._output.non_breaking_space=p},o.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},o.prototype.add_raw_token=function(m){this._output.add_raw_token(m)},o.prototype.print_preserved_newlines=function(m){var p=0;m.type!==r.TEXT&&m.previous.type!==r.TEXT&&(p=m.newlines?1:0),this.preserve_newlines&&(p=m.newlines<this.max_preserve_newlines+1?m.newlines:this.max_preserve_newlines+1);for(var y=0;y<p;y++)this.print_newline(y>0);return p!==0},o.prototype.traverse_whitespace=function(m){return m.whitespace_before||m.newlines?(this.print_preserved_newlines(m)||(this._output.space_before_token=!0),!0):!1},o.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},o.prototype.print_newline=function(m){this._output.add_new_line(m)},o.prototype.print_token=function(m){m.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(m.text))},o.prototype.indent=function(){this.indent_level++},o.prototype.deindent=function(){this.indent_level>0&&(this.indent_level--,this._output.set_indent(this.indent_level,this.alignment_size))},o.prototype.get_full_indent=function(m){return m=this.indent_level+(m||0),m<1?"":this._output.get_indent_string(m)};var a=function(m){for(var p=null,y=m.next;y.type!==r.EOF&&m.closed!==y;){if(y.type===r.ATTRIBUTE&&y.text==="type"){y.next&&y.next.type===r.EQUALS&&y.next.next&&y.next.next.type===r.VALUE&&(p=y.next.next.text);break}y=y.next}return p},l=function(m,p){var y=null,_=null;return p.closed?(m==="script"?y="text/javascript":m==="style"&&(y="text/css"),y=a(p)||y,y.search("text/css")>-1?_="css":y.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?_="javascript":y.search(/(text|application|dojo)\/(x-)?(html)/)>-1?_="html":y.search(/test\/null/)>-1&&(_="null"),_):null};function c(m,p){return p.indexOf(m)!==-1}function u(m,p,y){this.parent=m||null,this.tag=p?p.tag_name:"",this.indent_level=y||0,this.parser_token=p||null}function h(m){this._printer=m,this._current_frame=null}h.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},h.prototype.record_tag=function(m){var p=new u(this._current_frame,m,this._printer.indent_level);this._current_frame=p},h.prototype._try_pop_frame=function(m){var p=null;return m&&(p=m.parser_token,this._printer.indent_level=m.indent_level,this._current_frame=m.parent),p},h.prototype._get_frame=function(m,p){for(var y=this._current_frame;y&&m.indexOf(y.tag)===-1;){if(p&&p.indexOf(y.tag)!==-1){y=null;break}y=y.parent}return y},h.prototype.try_pop=function(m,p){var y=this._get_frame([m],p);return this._try_pop_frame(y)},h.prototype.indent_to_tag=function(m){var p=this._get_frame(m);p&&(this._printer.indent_level=p.indent_level)};function d(m,p,y,_){this._source_text=m||"",p=p||{},this._js_beautify=y,this._css_beautify=_,this._tag_stack=null;var x=new i(p,"html");this._options=x,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}d.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var m=this._source_text,p=this._options.eol;this._options.eol==="auto"&&(p=`
`,m&&n.test(m)&&(p=m.match(n)[0])),m=m.replace(s,`
`);var y=m.match(/^[\t ]*/)[0],_={text:"",type:""},x=new f,w=new o(this._options,y),S=new t(m,this._options).tokenize();this._tag_stack=new h(w);for(var A=null,k=S.next();k.type!==r.EOF;)k.type===r.TAG_OPEN||k.type===r.COMMENT?(A=this._handle_tag_open(w,k,x,_,S),x=A):k.type===r.ATTRIBUTE||k.type===r.EQUALS||k.type===r.VALUE||k.type===r.TEXT&&!x.tag_complete?A=this._handle_inside_tag(w,k,x,_):k.type===r.TAG_CLOSE?A=this._handle_tag_close(w,k,x):k.type===r.TEXT?A=this._handle_text(w,k,x):k.type===r.CONTROL_FLOW_OPEN?A=this._handle_control_flow_open(w,k):k.type===r.CONTROL_FLOW_CLOSE?A=this._handle_control_flow_close(w,k):w.add_raw_token(k),_=A,k=S.next();var M=w._output.get_code(p);return M},d.prototype._handle_control_flow_open=function(m,p){var y={text:p.text,type:p.type};return m.set_space_before_token(p.newlines||p.whitespace_before!=="",!0),p.newlines?m.print_preserved_newlines(p):m.set_space_before_token(p.newlines||p.whitespace_before!=="",!0),m.print_token(p),m.indent(),y},d.prototype._handle_control_flow_close=function(m,p){var y={text:p.text,type:p.type};return m.deindent(),p.newlines?m.print_preserved_newlines(p):m.set_space_before_token(p.newlines||p.whitespace_before!=="",!0),m.print_token(p),y},d.prototype._handle_tag_close=function(m,p,y){var _={text:p.text,type:p.type};return m.alignment_size=0,y.tag_complete=!0,m.set_space_before_token(p.newlines||p.whitespace_before!=="",!0),y.is_unformatted?m.add_raw_token(p):(y.tag_start_char==="<"&&(m.set_space_before_token(p.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&y.has_wrapped_attrs&&m.print_newline(!1)),m.print_token(p)),y.indent_content&&!(y.is_unformatted||y.is_content_unformatted)&&(m.indent(),y.indent_content=!1),!y.is_inline_element&&!(y.is_unformatted||y.is_content_unformatted)&&m.set_wrap_point(),_},d.prototype._handle_inside_tag=function(m,p,y,_){var x=y.has_wrapped_attrs,w={text:p.text,type:p.type};return m.set_space_before_token(p.newlines||p.whitespace_before!=="",!0),y.is_unformatted?m.add_raw_token(p):y.tag_start_char==="{"&&p.type===r.TEXT?m.print_preserved_newlines(p)?(p.newlines=0,m.add_raw_token(p)):m.print_token(p):(p.type===r.ATTRIBUTE?m.set_space_before_token(!0):(p.type===r.EQUALS||p.type===r.VALUE&&p.previous.type===r.EQUALS)&&m.set_space_before_token(!1),p.type===r.ATTRIBUTE&&y.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(m.traverse_whitespace(p),x=x||p.newlines!==0),this._is_wrap_attributes_force&&y.attr_count>=this._options.wrap_attributes_min_attrs&&(_.type!==r.TAG_OPEN||this._is_wrap_attributes_force_expand_multiline)&&(m.print_newline(!1),x=!0)),m.print_token(p),x=x||m.previous_token_wrapped(),y.has_wrapped_attrs=x),w},d.prototype._handle_text=function(m,p,y){var _={text:p.text,type:"TK_CONTENT"};return y.custom_beautifier_name?this._print_custom_beatifier_text(m,p,y):y.is_unformatted||y.is_content_unformatted?m.add_raw_token(p):(m.traverse_whitespace(p),m.print_token(p)),_},d.prototype._print_custom_beatifier_text=function(m,p,y){var _=this;if(p.text!==""){var x=p.text,w,S=1,A="",k="";y.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?w=this._js_beautify:y.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?w=this._css_beautify:y.custom_beautifier_name==="html"&&(w=function(U,G){var B=new d(U,G,_._js_beautify,_._css_beautify);return B.beautify()}),this._options.indent_scripts==="keep"?S=0:this._options.indent_scripts==="separate"&&(S=-m.indent_level);var M=m.get_full_indent(S);if(x=x.replace(/\n[ \t]*$/,""),y.custom_beautifier_name!=="html"&&x[0]==="<"&&x.match(/^(<!--|<!\[CDATA\[)/)){var b=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(x);if(!b){m.add_raw_token(p);return}A=M+b[1]+`
`,x=b[4],b[5]&&(k=M+b[5]),x=x.replace(/\n[ \t]*$/,""),(b[2]||b[3].indexOf(`
`)!==-1)&&(b=b[3].match(/[ \t]+$/),b&&(p.whitespace_before=b[0]))}if(x)if(w){var P=function(){this.eol=`
`};P.prototype=this._options.raw_options;var N=new P;x=w(M+x,N)}else{var D=p.whitespace_before;D&&(x=x.replace(new RegExp(`
(`+D+")?","g"),`
`)),x=M+x.replace(/\n/g,`
`+M)}A&&(x?x=A+x+`
`+k:x=A+k),m.print_newline(!1),x&&(p.text=x,p.whitespace_before="",p.newlines=0,m.add_raw_token(p),m.print_newline(!0))}},d.prototype._handle_tag_open=function(m,p,y,_,x){var w=this._get_tag_open_token(p);if((y.is_unformatted||y.is_content_unformatted)&&!y.is_empty_element&&p.type===r.TAG_OPEN&&!w.is_start_tag?(m.add_raw_token(p),w.start_tag_token=this._tag_stack.try_pop(w.tag_name)):(m.traverse_whitespace(p),this._set_tag_position(m,p,w,y,_),w.is_inline_element||m.set_wrap_point(),m.print_token(p)),w.is_start_tag&&this._is_wrap_attributes_force){var S=0,A;do A=x.peek(S),A.type===r.ATTRIBUTE&&(w.attr_count+=1),S+=1;while(A.type!==r.EOF&&A.type!==r.TAG_CLOSE)}return(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(w.alignment_size=p.text.length+1),!w.tag_complete&&!w.is_unformatted&&(m.alignment_size=w.alignment_size),w};var f=function(m,p){if(this.parent=m||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",!p)this.tag_complete=!0;else{var y;this.tag_start_char=p.text[0],this.text=p.text,this.tag_start_char==="<"?(y=p.text.match(/^<([^\s>]*)/),this.tag_check=y?y[1]:""):(y=p.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=y?y[1]:"",(p.text.startsWith("{{#>")||p.text.startsWith("{{~#>"))&&this.tag_check[0]===">"&&(this.tag_check===">"&&p.next!==null?this.tag_check=p.next.text.split(" ")[0]:this.tag_check=p.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),p.type===r.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||p.closed&&p.closed.text==="/>";var _=2;this.tag_start_char==="{"&&this.text.length>=3&&this.text.charAt(2)==="~"&&(_=3),this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(_)))}};d.prototype._get_tag_open_token=function(m){var p=new f(this._tag_stack.get_parser_token(),m);return p.alignment_size=this._options.wrap_attributes_indent_size,p.is_end_tag=p.is_end_tag||c(p.tag_check,this._options.void_elements),p.is_empty_element=p.tag_complete||p.is_start_tag&&p.is_end_tag,p.is_unformatted=!p.tag_complete&&c(p.tag_check,this._options.unformatted),p.is_content_unformatted=!p.is_empty_element&&c(p.tag_check,this._options.content_unformatted),p.is_inline_element=c(p.tag_name,this._options.inline)||this._options.inline_custom_elements&&p.tag_name.includes("-")||p.tag_start_char==="{",p},d.prototype._set_tag_position=function(m,p,y,_,x){if(y.is_empty_element||(y.is_end_tag?y.start_tag_token=this._tag_stack.try_pop(y.tag_name):(this._do_optional_end_element(y)&&(y.is_inline_element||m.print_newline(!1)),this._tag_stack.record_tag(y),(y.tag_name==="script"||y.tag_name==="style")&&!(y.is_unformatted||y.is_content_unformatted)&&(y.custom_beautifier_name=l(y.tag_check,p)))),c(y.tag_check,this._options.extra_liners)&&(m.print_newline(!1),m._output.just_added_blankline()||m.print_newline(!0)),y.is_empty_element){if(y.tag_start_char==="{"&&y.tag_check==="else"){this._tag_stack.indent_to_tag(["if","unless","each"]),y.indent_content=!0;var w=m.current_line_has_match(/{{#if/);w||m.print_newline(!1)}y.tag_name==="!--"&&x.type===r.TAG_CLOSE&&_.is_end_tag&&y.text.indexOf(`
`)===-1||(y.is_inline_element||y.is_unformatted||m.print_newline(!1),this._calcluate_parent_multiline(m,y))}else if(y.is_end_tag){var S=!1;S=y.start_tag_token&&y.start_tag_token.multiline_content,S=S||!y.is_inline_element&&!(_.is_inline_element||_.is_unformatted)&&!(x.type===r.TAG_CLOSE&&y.start_tag_token===_)&&x.type!=="TK_CONTENT",(y.is_content_unformatted||y.is_unformatted)&&(S=!1),S&&m.print_newline(!1)}else y.indent_content=!y.custom_beautifier_name,y.tag_start_char==="<"&&(y.tag_name==="html"?y.indent_content=this._options.indent_inner_html:y.tag_name==="head"?y.indent_content=this._options.indent_head_inner_html:y.tag_name==="body"&&(y.indent_content=this._options.indent_body_inner_html)),!(y.is_inline_element||y.is_unformatted)&&(x.type!=="TK_CONTENT"||y.is_content_unformatted)&&m.print_newline(!1),this._calcluate_parent_multiline(m,y)},d.prototype._calcluate_parent_multiline=function(m,p){p.parent&&m._output.just_added_newline()&&!((p.is_inline_element||p.is_unformatted)&&p.parent.is_inline_element)&&(p.parent.multiline_content=!0)};var g=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","menu","nav","ol","p","pre","section","table","ul"],v=["a","audio","del","ins","map","noscript","video"];return d.prototype._do_optional_end_element=function(m){var p=null;if(!(m.is_empty_element||!m.is_start_tag||!m.parent)){if(m.tag_name==="body")p=p||this._tag_stack.try_pop("head");else if(m.tag_name==="li")p=p||this._tag_stack.try_pop("li",["ol","ul","menu"]);else if(m.tag_name==="dd"||m.tag_name==="dt")p=p||this._tag_stack.try_pop("dt",["dl"]),p=p||this._tag_stack.try_pop("dd",["dl"]);else if(m.parent.tag_name==="p"&&g.indexOf(m.tag_name)!==-1){var y=m.parent.parent;(!y||v.indexOf(y.tag_name)===-1)&&(p=p||this._tag_stack.try_pop("p"))}else m.tag_name==="rp"||m.tag_name==="rt"?(p=p||this._tag_stack.try_pop("rt",["ruby","rtc"]),p=p||this._tag_stack.try_pop("rp",["ruby","rtc"])):m.tag_name==="optgroup"?p=p||this._tag_stack.try_pop("optgroup",["select"]):m.tag_name==="option"?p=p||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):m.tag_name==="colgroup"?p=p||this._tag_stack.try_pop("caption",["table"]):m.tag_name==="thead"?(p=p||this._tag_stack.try_pop("caption",["table"]),p=p||this._tag_stack.try_pop("colgroup",["table"])):m.tag_name==="tbody"||m.tag_name==="tfoot"?(p=p||this._tag_stack.try_pop("caption",["table"]),p=p||this._tag_stack.try_pop("colgroup",["table"]),p=p||this._tag_stack.try_pop("thead",["table"]),p=p||this._tag_stack.try_pop("tbody",["table"])):m.tag_name==="tr"?(p=p||this._tag_stack.try_pop("caption",["table"]),p=p||this._tag_stack.try_pop("colgroup",["table"]),p=p||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):(m.tag_name==="th"||m.tag_name==="td")&&(p=p||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),p=p||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return m.parent=this._tag_stack.get_parser_token(),p}},DT.Beautifier=d,DT}var ID;function Bme(){if(ID)return P1.exports;ID=1;var i=Fme().Beautifier,e=WV().Options;function t(r,n,s,o){var a=new i(r,n,s,o);return a.beautify()}return P1.exports=t,P1.exports.defaultOptions=function(){return new e},P1.exports}var DD;function Vme(){if(DD)return Bg;DD=1;var i=Ome(),e=zme(),t=Bme();function r(n,s,o,a){return o=o||i,a=a||e,t(n,s,o,a)}return r.defaultOptions=t.defaultOptions,Bg.js=i,Bg.css=e,Bg.html=r,Bg}var OD;function jme(){return OD||(OD=1,function(i){function e(t,r,n){var s=function(o,a){return t.js_beautify(o,a)};return s.js=t.js_beautify,s.css=r.css_beautify,s.html=n.html_beautify,s.js_beautify=t.js_beautify,s.css_beautify=r.css_beautify,s.html_beautify=n.html_beautify,s}(function(t){var r=Vme();r.js_beautify=r.js,r.css_beautify=r.css,r.html_beautify=r.html,t.exports=e(r,r,r)})(i)}(hD)),hD.exports}var Hme=jme();let Gme=class{constructor(e){this.partsLength=e,this.keys={}}getKey(...e){if(e.length!==this.partsLength)return null;let t=this.keys;for(let r=0;r<e.length-1;r+=1)t[e[r]]||(t[e[r]]={}),t=t[e[r]];return t[e[e.length-1]]||(t[e[e.length-1]]=Symbol("")),t[e[e.length-1]]}};function Wme(i){return Hme.html(i,{wrap_attributes:"force-expand-multiline"})}class qme{constructor(e){this.store=new HP,this.components=new Map,this.mountedElements=new Map,this.subscribers=new Map,this.componentKeys=new Gme(2),this.dashboardState=new HP,this.provider=new dJ,this.connector=new Pme(e??document.createElement("div"),this.store),this.dashboardState.addSourceProvider("dashboardState",this.provider),this.dashboardState.subscribeAll("dashboardState",(t,r)=>{this.publish("storeValueChange",{value:t,key:r})},!1)}addSourceProvider(e,t){this.store.addSourceProvider(e,t)}setDefaultSourceProvider(e){this.store.setDefaultSourceProvider(e)}setStoreValue(e,t){this.provider.updateSource(e,t)}getStoreValue(e,t=void 0){return this.dashboardState.getSourceValue("dashboardState",e)??t}getConnector(){return this.connector}getRootElement(){return this.connector.getRootElement()}getStore(){return this.connector.getStore()}addComponent(e){const t=this.componentKeys.getKey(e.type,e.id);t&&this.components.set(t,e)}hasComponent(e,t){const r=this.componentKeys.getKey(e,t);return r?this.components.has(r):!1}getComponentIdsOfType(e){return[...this.components.values()].filter(({type:t})=>t===e).map(({id:t})=>t)}create(e,t,r={}){const n=document.createElement("div"),s=this.componentKeys.getKey(e,t);if(!s)return;const o=this.components.get(s);if(o){const a=o.mount({dashboard:this,element:n,config:r});return this.mountedElements.set(n,{componentId:t,componentType:e,config:r,unmount:a}),n}}unmount(e){const t=this.mountedElements.get(e);if(t){const{config:r,unmount:n}=t;n&&n({dashboard:this,element:e,config:r}),this.mountedElements.delete(e)}}subscribe(e,t){this.subscribers.has(e)||this.subscribers.set(e,new Map);const r=Symbol(""),n=this.subscribers.get(e);return n==null||n.set(r,t),()=>{n==null||n.delete(r)}}publish(e,t={}){var r;this.subscribers.has(e)&&((r=this.subscribers.get(e))==null||r.forEach(n=>{n(t)}))}addElements(e,t="default"){this.connector.addElementConfigs(e,t)}getHtml(){return this.getElementHtml(this.connector.getRootElement(),!0)}setHtml(e){this.connector.getRootElement().querySelectorAll("dashboard-tab").forEach(r=>{r.remove()});const t=document.createElement("div");t.innerHTML=e,t.querySelectorAll("dashboard-tab").forEach(r=>{r.setAttribute("slot","tab"),this.connector.getRootElement().append(r)})}getElementDisplayName(e){const t=this.connector.getMatchingElementConfig(e),r=e.tagName.toLowerCase();return t!=null&&t.dashboard?typeof t.dashboard.displayName=="string"?t.dashboard.displayName:typeof t.dashboard.displayName=="function"?t.dashboard.displayName(e):r:r}getSelectorDisplayName(e){const t=this.connector.getElementConfig(e);return t!=null&&t.dashboard?typeof t.dashboard.displayName=="string"?t.dashboard.displayName:typeof t.dashboard.displayName=="function"?t.dashboard.displayName():e:e}getElementHtml(e,t=!1){const r=e.cloneNode(!0);return this.setClonedElementPropAttributes(e,r),Wme(t?r.innerHTML:r.outerHTML)}setClonedElementPropAttributes(e,t){const r=this.connector.getElementWebbit(e);if(r){const{properties:n}=r.getConfig();Object.entries(n).forEach(([s,{attribute:o,defaultValue:a}])=>{const l=r.getPropertyHandler(s);if(l!=null&&l.isAttribute()&&o){const c=l.getStoredAttribute();c===null||l.getStoredValue()===a?t.removeAttribute(o):t.setAttribute(o,c)}})}for(let n=0;n<e.children.length;n+=1)this.setClonedElementPropAttributes(e.children[n],t.children[n])}}function Xme(i,e){return i.slots.map(({name:t,allowedChildren:r})=>{const n=e.getElementConfigSelectors().filter(s=>{var o,a;return r instanceof Array?r.includes(s):(a=(o=e.getElementConfig(s))==null?void 0:o.dashboard)==null?void 0:a.topLevel});return{slot:t,allowedChildren:n}})}function UD(i,e){if(!i)return[];const t=e.getMatchingElementConfig(i);return t?Xme(t,e):[]}function Yme(i){const e=document.createElement("div");return e.setAttribute("slot","layer"),e.setAttribute("layer-id",i),e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.top="0",e.style.boxSizing="border-box",e.style.pointerEvents="none",e}function Kme(){const i=document.createElement("style");return i.appendChild(document.createTextNode("")),document.head.appendChild(i),i.sheet}function Zme(i,e){i.insertRule(e)}let Jme=class extends qme{constructor(e){super(e),this.layers={},this.themeSheets={},this.subscribe("storeValueChange",t=>{const{key:r,value:n}=t;r==="drawerOpened"?this.publish("drawerToggle",{opened:n}):r==="selectedElement"?this.publish("elementSelect",{element:this.getSelectedElement()}):r==="previewedElement"&&this.publish("elementPreview",{element:this.getPreviewedElement()})}),this.getRootElement().setAttribute("data-theme",this.getTheme())}openDrawer(){this.setStoreValue("drawerOpened",!0)}closeDrawer(){this.setStoreValue("drawerOpened",!1)}isDrawerOpened(){return this.getStoreValue("drawerOpened",!1)}setSelectedElement(e){this.getSelectedElement()!==e&&(this.setStoreValue("selectedElement",e),this.setStoreValue("allowedChildren",UD(e,this.getConnector())))}setPreviewedElement(e){this.getPreviewedElement()!==e&&this.setStoreValue("previewedElement",e)}addElements(e,t="default"){super.addElements(e,t);const r=this.getSelectedElement();r&&this.setStoreValue("allowedChildren",UD(r,this.getConnector())),this.publish("elementsAdd")}setHtml(e){super.setHtml(e);const t=this.getConnector().getRootElement().querySelector("dashboard-tab");t&&this.setSelectedElement(t),this.publish("htmlSet")}resetHtml(){this.setHtml(`
      <dashboard-tab tab-name="TeleOperated" slot="tab" selected></dashboard-tab>
      <dashboard-tab slot="tab" tab-name="Autonomous"></dashboard-tab>
    `)}reloadHtml(){this.setHtml(this.getHtml())}getSelectedElement(){return this.getStoreValue("selectedElement",null)}getPreviewedElement(){return this.getStoreValue("previewedElement",null)}getAllowedChildren(){return this.getStoreValue("allowedChildren",[])}addPropertyInput(e,t){this.addComponent({type:"propertyInput",id:e,mount({dashboard:r,element:n,config:s}){const o=document.createElement(t);o.element=s.element,o.propertyHandler=s.propertyHandler,o.propertyName=s.propertyName,o.dashboard=r,n.append(o);const a=c=>{r.publish("propertyInputChange",c.detail)};o.addEventListener("change",a);const l=r.subscribe("propertyInputChange",()=>{o==null||o.requestUpdate()});return()=>{o.removeEventListener("change",a),l(),o.remove()}}})}addElementEditor(e,t){this.addComponent({type:"elementEditor",id:e,mount({dashboard:r,element:n}){const s=document.createElement(t);return s.dashboard=r,n.append(s),()=>{s.remove()}}})}addTab(e,t){const r=document.createElement("dashboard-tab");return t&&(r.innerHTML=t),r.setAttribute("tab-name",e),r.setAttribute("slot","tab"),this.getRootElement().append(r),r}isElementEditable(e=this.getSelectedElement()){return e?e.tagName.toLowerCase()!=="dashboard-tab"||!e.hasAttribute("tutorial"):!0}addLayer(e){return this.layers[e]?this.layers[e]:(this.layers[e]=Yme(e),this.publish("layerAdd",{layer:this.layers[e]}),this.layers[e])}hasLayer(e){return!!this.layers[e]}getLayer(e){return this.layers[e]}getLayers(){return this.layers}addThemeRules(e,t){typeof this.themeSheets[e]>"u"&&(this.themeSheets[e]=Kme());const r=Object.entries(t).map(([n,s])=>`${n}: ${s};`);Zme(this.themeSheets[e],`
      [data-theme="${e}"] {
        ${r.join(`
`)}
      }
    `),this.publish("themeRulesAdd")}setTheme(e){this.getRootElement().setAttribute("data-theme",e),localStorage.setItem("theme",e),this.setStoreValue("theme",e),this.publish("themeSet")}getTheme(){const e=localStorage.getItem("theme")??"dark";return this.getStoreValue("theme",e)}getThemes(){const e=["light",...Object.keys(this.themeSheets)];return[...new Set(e).values()]}};var nL=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)},Ri=(i,e,t)=>(nL(i,e,"read from private field"),t?t.call(i):e.get(i)),Ca=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},tk=(i,e,t,r)=>(nL(i,e,"write to private field"),e.set(i,t),t),vc=(i,e,t)=>(nL(i,e,"access private method"),t),Qme=typeof global=="object"&&global&&global.Object===Object&&global,ege=typeof self=="object"&&self&&self.Object===Object&&self,tge=Qme||ege||Function("return this")(),zD=tge.Symbol,FD=zD?zD.prototype:void 0;FD&&FD.toString;const qV=()=>{};var Dp,oo,I0,D0,M_,S_,Op,O0,gx,UT,_x,zT;let ige=class{constructor(e={},t=0){Ca(this,Op),Ca(this,gx),Ca(this,_x),Ca(this,Dp,void 0),Ca(this,oo,{}),Ca(this,I0,void 0),Ca(this,D0,new Map),Ca(this,M_,new Map),Ca(this,S_,new Map),t&&tk(this,Dp,setInterval(vc(this,Op,O0).bind(this),t)),Object.entries(e).forEach(([r,n])=>{this.updateSource(r,n)})}updateSource(e,t){clearTimeout(Ri(this,I0)),Ri(this,oo)[e]===void 0?Ri(this,oo)[e]={first:{type:"change",value:t}}:Ri(this,oo)[e].last={type:"change",value:t},Ri(this,Dp)||vc(this,Op,O0).call(this)}removeSource(e){Ri(this,oo)[e]===void 0?Ri(this,oo)[e]={first:{type:"removal"}}:Ri(this,oo)[e].last={type:"removal"},Ri(this,Dp)||vc(this,Op,O0).call(this)}clearSources(e=qV){vc(this,Op,O0).call(this,()=>{Ri(this,D0).forEach(t=>t()),e()})}clearSourcesWithTimeout(e,t){clearTimeout(Ri(this,I0)),tk(this,I0,setTimeout(()=>{this.clearSources(t)},e))}userUpdate(e,t){this.updateSource(e,t)}requestSource(e){}static getType(e){return typeof e=="string"?"string":typeof e=="number"?"number":typeof e=="boolean"?"boolean":e instanceof Array?"Array":e===null?"null":null}addClearSourcesHandler(e){const t=Symbol("clearSources");return Ri(this,D0).set(t,e),()=>{Ri(this,D0).delete(t)}}addSourcesChangedHandler(e){const t=Symbol("sourcesChanged");return Ri(this,M_).set(t,e),()=>{Ri(this,M_).delete(t)}}addSourcesRemovedHandler(e){const t=Symbol("sourcesRemoved");return Ri(this,S_).set(t,e),()=>{Ri(this,S_).delete(t)}}disconnect(){clearTimeout(Ri(this,Dp))}};Dp=new WeakMap,oo=new WeakMap,I0=new WeakMap,D0=new WeakMap,M_=new WeakMap,S_=new WeakMap,Op=new WeakSet,O0=function(i=qV){if(Object.keys(Ri(this,oo)).length===0){i();return}const e={...Ri(this,oo)};tk(this,oo,{});const t={},r={};Object.entries(e).forEach(([n,s])=>{t[n]=s.first,typeof s.last<"u"&&(r[n]=s.last)}),vc(this,gx,UT).call(this,t),vc(this,_x,zT).call(this,t),Object.keys(r).length>0?setTimeout(()=>{vc(this,gx,UT).call(this,r),vc(this,_x,zT).call(this,r),i()}):i()},gx=new WeakSet,UT=function(i){const e={};Object.entries(i).forEach(([t,{type:r}])=>{r==="change"&&(e[t]=i[t].value)}),Object.keys(e).length>0&&Ri(this,M_).forEach(t=>t(e))},_x=new WeakSet,zT=function(i){const e=[];Object.entries(i).forEach(([t,{type:r}])=>{r==="removal"&&e.push(t)}),e.length>0&&Ri(this,S_).forEach(t=>t(e))};function BD(i,e){let t,r,n=new Uint8Array(128),s=0;var o="";return a(i,!1,o),n.subarray(0,s);function a(_,x,w){switch(typeof _){case"undefined":l();break;case"boolean":c(_);break;case"number":u(_,w);break;case"string":h(_);break;case"object":_===null?l():_ instanceof Date?v(_):Array.isArray(_)?d(_):_ instanceof Uint8Array||_ instanceof Uint8ClampedArray?f(_):_ instanceof Int8Array||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array||_ instanceof Float64Array?d(_):g(_);break;default:if(!x&&e&&e.invalidTypeReplacement)typeof e.invalidTypeReplacement=="function"||a(e.invalidTypeReplacement,!0,w);else throw new Error("Invalid argument type: The type '"+typeof _+"' cannot be serialized.")}}function l(_){m(192)}function c(_){m(_?195:194)}function u(_,x){var w=x==="int"||isFinite(_)&&Math.floor(_)===_&&x!=="double"&&x!=="float";if(w)if(_>=0&&_<=127)m(_);else if(_<0&&_>=-32)m(_);else if(_>0&&_<=255)p([204,_]);else if(_>=-128&&_<=127)p([208,_]);else if(_>0&&_<=65535)p([205,_>>>8,_]);else if(_>=-32768&&_<=32767)p([209,_>>>8,_]);else if(_>0&&_<=4294967295)p([206,_>>>24,_>>>16,_>>>8,_]);else if(_>=-2147483648&&_<=2147483647)p([210,_>>>24,_>>>16,_>>>8,_]);else if(_>0&&_<=18446744073709552e3){let S=_/4294967296,A=_%4294967296;p([211,S>>>24,S>>>16,S>>>8,S,A>>>24,A>>>16,A>>>8,A])}else _>=-9223372036854776e3&&_<=9223372036854776e3?(m(211),y(_)):_<0?p([211,128,0,0,0,0,0,0,0]):p([207,255,255,255,255,255,255,255,255]);else r||(t=new ArrayBuffer(8),r=new DataView(t)),r.setFloat64(0,_),m(203),p(new Uint8Array(t))}function h(_){let x=nge(_),w=x.length;w<=31?m(160+w):w<=255?p([217,w]):w<=65535?p([218,w>>>8,w]):p([219,w>>>24,w>>>16,w>>>8,w]),p(x)}function d(_){let x=_.length;x<=15?m(144+x):x<=65535?p([220,x>>>8,x]):p([221,x>>>24,x>>>16,x>>>8,x]);for(let w=0;w<x;w++)a(_[w])}function f(_){let x=_.length;x<=15?p([196,x]):x<=65535?p([197,x>>>8,x]):p([198,x>>>24,x>>>16,x>>>8,x]),p(_)}function g(_){let x=0;for(let w in _)_[w]!==void 0&&x++;x<=15?m(128+x):x<=65535?p([222,x>>>8,x]):p([223,x>>>24,x>>>16,x>>>8,x]);for(let w in _){let S=_[w];S!==void 0&&(a(w),a(S))}}function v(_){let x=_.getTime()/1e3;if(_.getMilliseconds()===0&&x>=0&&x<4294967296)p([214,255,x>>>24,x>>>16,x>>>8,x]);else if(x>=0&&x<17179869184){let w=_.getMilliseconds()*1e6;p([215,255,w>>>22,w>>>14,w>>>6,w<<2>>>0|x/4294967296,x>>>24,x>>>16,x>>>8,x])}else{let w=_.getMilliseconds()*1e6;p([199,12,255,w>>>24,w>>>16,w>>>8,w]),y(x)}}function m(_){if(n.length<s+1){let x=n.length*2;for(;x<s+1;)x*=2;let w=new Uint8Array(x);w.set(n),n=w}n[s]=_,s++}function p(_){if(n.length<s+_.length){let x=n.length*2;for(;x<s+_.length;)x*=2;let w=new Uint8Array(x);w.set(n),n=w}n.set(_,s),s+=_.length}function y(_){let x,w;_>=0?(x=_/4294967296,w=_%4294967296):(_++,x=Math.abs(_)/4294967296,w=Math.abs(_)%4294967296,x=~x,w=~w),p([x>>>24,x>>>16,x>>>8,x,w>>>24,w>>>16,w>>>8,w])}}function rge(i,e){let t=0;if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),typeof i!="object"||typeof i.length>"u")throw new Error("Invalid argument type: Expected a byte array (Array or Uint8Array) to deserialize.");if(!i.length)throw new Error("Invalid argument: The byte array to deserialize is empty.");i instanceof Uint8Array||(i=new Uint8Array(i));let r;if(e&&e.multiple)for(r=[];t<i.length;)r.push(n());else r=n();return r;function n(){const g=i[t++];if(g>=0&&g<=127)return g;if(g>=128&&g<=143)return c(g-128);if(g>=144&&g<=159)return u(g-144);if(g>=160&&g<=191)return h(g-160);if(g===192)return null;if(g===193)throw new Error("Invalid byte code 0xc1 found.");if(g===194)return!1;if(g===195)return!0;if(g===196)return l(-1,1);if(g===197)return l(-1,2);if(g===198)return l(-1,4);if(g===199)return d(-1,1);if(g===200)return d(-1,2);if(g===201)return d(-1,4);if(g===202)return a(4);if(g===203)return a(8);if(g===204)return o(1);if(g===205)return o(2);if(g===206)return o(4);if(g===207)return o(8);if(g===208)return s(1);if(g===209)return s(2);if(g===210)return s(4);if(g===211)return s(8);if(g===212)return d(1);if(g===213)return d(2);if(g===214)return d(4);if(g===215)return d(8);if(g===216)return d(16);if(g===217)return h(-1,1);if(g===218)return h(-1,2);if(g===219)return h(-1,4);if(g===220)return u(-1,2);if(g===221)return u(-1,4);if(g===222)return c(-1,2);if(g===223)return c(-1,4);if(g>=224&&g<=255)return g-256;throw console.debug("msgpack array:",i),new Error("Invalid byte value '"+g+"' at index "+(t-1)+" in the MessagePack binary data (length "+i.length+"): Expecting a range of 0 to 255. This is not a byte array.")}function s(g){let v=0,m=!0;for(;g-- >0;)if(m){let p=i[t++];v+=p&127,p&128&&(v-=128),m=!1}else v*=256,v+=i[t++];return v}function o(g){let v=0;for(;g-- >0;)v*=256,v+=i[t++];return v}function a(g){let v=new DataView(i.buffer,t+i.byteOffset,g);if(t+=g,g===4)return v.getFloat32(0,!1);if(g===8)return v.getFloat64(0,!1)}function l(g,v){g<0&&(g=o(v));let m=i.subarray(t,t+g);return t+=g,m}function c(g,v){g<0&&(g=o(v));let m={};for(;g-- >0;){let p=n();m[p]=n()}return m}function u(g,v){g<0&&(g=o(v));let m=[];for(;g-- >0;)m.push(n());return m}function h(g,v){g<0&&(g=o(v));let m=t;return t+=g,sge(i,m,g)}function d(g,v){g<0&&(g=o(v));let m=o(1),p=l(g);switch(m){case 255:return f(p)}return{type:m,data:p}}function f(g){if(g.length===4){let v=(g[0]<<24>>>0)+(g[1]<<16>>>0)+(g[2]<<8>>>0)+g[3];return new Date(v*1e3)}if(g.length===8){let v=(g[0]<<22>>>0)+(g[1]<<14>>>0)+(g[2]<<6>>>0)+(g[3]>>>2),m=(g[3]&3)*4294967296+(g[4]<<24>>>0)+(g[5]<<16>>>0)+(g[6]<<8>>>0)+g[7];return new Date(m*1e3+v/1e6)}if(g.length===12){let v=(g[0]<<24>>>0)+(g[1]<<16>>>0)+(g[2]<<8>>>0)+g[3];t-=8;let m=s(8);return new Date(m*1e3+v/1e6)}throw new Error("Invalid data length for a date value.")}}function nge(i){let e=!0,t=i.length;for(let s=0;s<t;s++)if(i.charCodeAt(s)>127){e=!1;break}let r=0,n=new Uint8Array(i.length*(e?1:4));for(let s=0;s!==t;s++){let o=i.charCodeAt(s);if(o<128){n[r++]=o;continue}if(o<2048)n[r++]=o>>6|192;else{if(o>55295&&o<56320){if(++s>=t)throw new Error("UTF-8 encode: incomplete surrogate pair");let a=i.charCodeAt(s);if(a<56320||a>57343)throw new Error("UTF-8 encode: second surrogate character 0x"+a.toString(16)+" at index "+s+" out of range");o=65536+((o&1023)<<10)+(a&1023),n[r++]=o>>18|240,n[r++]=o>>12&63|128}else n[r++]=o>>12|224;n[r++]=o>>6&63|128}n[r++]=o&63|128}return e?n:n.subarray(0,r)}function sge(i,e,t){let r=e,n="";for(t+=e;r<t;){let s=i[r++];if(s>127)if(s>191&&s<224){if(r>=t)throw new Error("UTF-8 decode: incomplete 2-byte sequence");s=(s&31)<<6|i[r++]&63}else if(s>223&&s<240){if(r+1>=t)throw new Error("UTF-8 decode: incomplete 3-byte sequence");s=(s&15)<<12|(i[r++]&63)<<6|i[r++]&63}else if(s>239&&s<248){if(r+2>=t)throw new Error("UTF-8 decode: incomplete 4-byte sequence");s=(s&7)<<18|(i[r++]&63)<<12|(i[r++]&63)<<6|i[r++]&63}else throw new Error("UTF-8 decode: unknown multibyte start 0x"+s.toString(16)+" at index "+(r-1));if(s<=65535)n+=String.fromCharCode(s);else if(s<=1114111)s-=65536,n+=String.fromCharCode(s>>10|55296),n+=String.fromCharCode(s&1023|56320);else throw new Error("UTF-8 decode: code point 0x"+s.toString(16)+" exceeds UTF-16 reach")}return n}const ik={boolean:0,double:1,int:2,float:3,string:4,json:4,raw:5,rpc:5,msgpack:5,protobuf:5,"boolean[]":16,"double[]":17,"int[]":18,"float[]":19,"string[]":20};let FT=class{constructor(){this.uid=-1,this.topics=new Set,this.options=new oge}toSubscribeObj(){return{topics:Array.from(this.topics),subuid:this.uid,options:this.options.toObj()}}toUnsubscribeObj(){return{subuid:this.uid}}},oge=class{constructor(){this.periodic=.02,this.all=!1,this.topicsOnly=!1,this.prefix=!1}toObj(){return{periodic:this.periodic,all:this.all,topicsonly:this.topicsOnly,prefix:this.prefix}}},VD=class{constructor(){this.uid=-1,this.name="",this.type="",this.properties={}}toPublishObj(){return{name:this.name,type:this.type,pubuid:this.uid,properties:this.properties}}toUnpublishObj(){return{pubuid:this.uid}}getTypeIdx(){return this.type in ik?ik[this.type]:5}},age=class{constructor(e,t,r,n,s,o,a){this.ws=null,this.clientIdx=0,this.useSecure=!1,this.serverAddr="",this.serverConnectionActive=!1,this.serverConnectionRequested=!1,this.serverTimeOffset_us=null,this.uidCounter=0,this.subscriptions=new Map,this.publishedTopics=new Map,this.serverTopics=new Map,this.serverBaseAddr=e,this.appName=t,this.onTopicAnnounce=r,this.onTopicUnannounce=n,this.onNewTopicData=s,this.onConnect=o,this.onDisconnect=a,setInterval(()=>this.ws_sendTimestamp(),5e3)}connect(){this.serverConnectionRequested||(this.serverConnectionRequested=!0,this.ws_connect())}disconnect(){this.serverConnectionRequested&&(this.serverConnectionRequested=!1,this.serverConnectionActive&&this.ws&&this.ws.close())}subscribePeriodic(e,t,r){let n=new FT;return n.uid=this.getNewUID(),n.topics=new Set(e),n.options.prefix=t,n.options.periodic=r,this.subscriptions.set(n.uid,n),this.serverConnectionActive&&this.ws_subscribe(n),n.uid}subscribeAll(e,t){let r=new FT;return r.uid=this.getNewUID(),r.topics=new Set(e),r.options.prefix=t,r.options.all=!0,this.subscriptions.set(r.uid,r),this.serverConnectionActive&&this.ws_subscribe(r),r.uid}subscribeTopicsOnly(e,t){let r=new FT;return r.uid=this.getNewUID(),r.topics=new Set(e),r.options.prefix=t,r.options.topicsOnly=!0,this.subscriptions.set(r.uid,r),this.serverConnectionActive&&this.ws_subscribe(r),r.uid}unsubscribe(e){let t=this.subscriptions.get(e);if(!t)throw'Unknown subscription ID "'+e+'"';this.subscriptions.delete(e),this.serverConnectionActive&&this.ws_unsubscribe(t)}clearAllSubscriptions(){for(const e of this.subscriptions.keys())this.unsubscribe(e)}setProperties(e,t){let r=o=>{for(const a of Object.keys(t)){let l=t[a];l===null?delete o.properties[a]:o.properties[a]=l}},n=this.publishedTopics.get(e);n&&r(n);let s=this.serverTopics.get(e);s&&r(s),this.serverConnectionActive&&this.ws_setproperties(e,t)}setPersistent(e,t){this.setProperties(e,{persistent:t})}setRetained(e,t){this.setProperties(e,{retained:t})}publishNewTopic(e,t){if(this.publishedTopics.has(e))return;let r=new VD;r.name=e,r.uid=this.getNewUID(),r.type=t,this.publishedTopics.set(e,r),this.serverConnectionActive&&this.ws_publish(r)}unpublishTopic(e){let t=this.publishedTopics.get(e);if(!t)throw'Topic "'+e+'" not found';this.publishedTopics.delete(e),this.serverConnectionActive&&this.ws_unpublish(t)}addSample(e,t){let r=this.getServerTime_us();r===null&&(r=0),this.addTimestampedSample(e,r,t)}addTimestampedSample(e,t,r){let n=this.publishedTopics.get(e);if(!n)throw'Topic "'+e+'" not found';let s=BD([n.uid,t,n.getTypeIdx(),r]);this.ws_sendBinary(s)}getClientTime_us(){return new Date().getTime()*1e3}getServerTime_us(){return this.serverTimeOffset_us===null?null:this.getClientTime_us()+this.serverTimeOffset_us}ws_sendTimestamp(){let e=this.getClientTime_us(),t=BD([-1,0,ik.int,e]);this.ws_sendBinary(t)}ws_handleReceiveTimestamp(e,t){let r=this.getClientTime_us(),n=r-t,s=e+n/2;this.serverTimeOffset_us=s-r,console.log("[NT4] New server time estimate: "+(this.getServerTime_us()/1e6).toString())}ws_subscribe(e){this.ws_sendJSON("subscribe",e.toSubscribeObj())}ws_unsubscribe(e){this.ws_sendJSON("unsubscribe",e.toUnsubscribeObj())}ws_publish(e){this.ws_sendJSON("publish",e.toPublishObj())}ws_unpublish(e){this.ws_sendJSON("unpublish",e.toUnpublishObj())}ws_setproperties(e,t){this.ws_sendJSON("setproperties",{name:e,update:t})}ws_sendJSON(e,t){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify([{method:e,params:t}]))}ws_sendBinary(e){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(e)}ws_onOpen(){this.serverConnectionActive=!0,console.log("[NT4] Connected with idx "+this.clientIdx.toString()),this.ws_sendTimestamp();for(const e of this.publishedTopics.values())this.ws_publish(e);for(const e of this.subscriptions.values())this.ws_subscribe(e);this.onConnect()}ws_onClose(e){this.ws=null,this.serverConnectionActive=!1,this.onDisconnect(),this.serverTopics.clear(),e.reason!==""&&console.log("[NT4] Socket is closed: ",e.reason),this.serverConnectionRequested&&setTimeout(()=>this.ws_connect(),500)}ws_onError(){this.ws&&this.ws.close()}ws_onMessage(e){if(typeof e.data=="string"){let t=JSON.parse(e.data);if(!Array.isArray(t)){console.warn("[NT4] Ignoring text message, JSON parsing did not produce an array at the top level.");return}t.forEach(r=>{if(typeof r!="object"){console.warn("[NT4] Ignoring text message, JSON parsing did not produce an object.");return}if(!("method"in r)||!("params"in r)){console.warn("[NT4] Ignoring text message, JSON parsing did not find all required fields.");return}let n=r.method,s=r.params;if(typeof n!="string"){console.warn(`[NT4] Ignoring text message, JSON parsing found "method", but it wasn't a string.`);return}if(typeof s!="object"){console.warn(`[NT4] Ignoring text message, JSON parsing found "params", but it wasn't an object.`);return}if(n==="announce"){let o=new VD;o.uid=s.id,o.name=s.name,o.type=s.type,o.properties=s.properties,this.serverTopics.set(o.name,o),this.onTopicAnnounce(o)}else if(n==="unannounce"){let o=this.serverTopics.get(s.name);if(!o){console.warn("[NT4] Ignoring unannounce, topic was not previously announced.");return}this.serverTopics.delete(o.name),this.onTopicUnannounce(o)}else if(n==="properties"){let o=this.serverTopics.get(s.name);if(!o){console.warn("[NT4] Ignoring set properties, topic was not previously announced.");return}for(const a of Object.keys(s.update)){let l=s.update[a];l===null?delete o.properties[a]:o.properties[a]=l}}else{console.warn("[NT4] Ignoring text message - unknown method "+n);return}})}else rge(e.data,{multiple:!0}).forEach(t=>{let r=t[0],n=t[1],s=t[3];if(r>=0){let o=null;for(let a of this.serverTopics.values())a.uid===r&&(o=a);if(!o){console.warn("[NT4] Ignoring binary data - unknown topic ID "+r.toString());return}this.onNewTopicData(o,n,s)}else r===-1?this.ws_handleReceiveTimestamp(n,s):console.warn("[NT4] Ignoring binary data - invalid topic ID "+r.toString())})}ws_connect(){this.clientIdx=Math.floor(Math.random()*99999999);let e=5810,t="ws://";this.useSecure&&(t="wss://",e=5811),this.serverAddr=t+this.serverBaseAddr+":"+e.toString()+"/nt/"+this.appName+"_"+this.clientIdx.toString(),this.ws=new WebSocket(this.serverAddr,"networktables.first.wpi.edu"),this.ws.binaryType="arraybuffer",this.ws.addEventListener("open",()=>this.ws_onOpen()),this.ws.addEventListener("message",r=>this.ws_onMessage(r)),this.ws.addEventListener("close",r=>this.ws_onClose(r)),this.ws.addEventListener("error",()=>this.ws_onError())}getNewUID(){return this.uidCounter++,this.uidCounter+this.clientIdx}};function rk(i){if(typeof i=="boolean"||typeof i=="string")return typeof i;if(typeof i=="number")return"double";if(i instanceof Array){if(i.length===0)return;const e=rk(i[0]);return i.some(t=>rk(t)!==e)?void 0:`${e}[]`}}function lge(i){const e=i.toString().at(-4)??"",t=i.toString().at(-3)??"",r=i.toString().at(-2)??"",n=i.toString().at(-1)??"";let s=parseInt(`${e}${t}`,10),o=parseInt(`${r}${n}`,10);Number.isNaN(s)&&(s=0),Number.isNaN(o)&&(o=0);const a=e+t+r+n;return[`10.${s.toString()}.${o.toString()}.2`,"172.22.11.2",`roborio-${a}-FRC.local`,`roborio-${a}-FRC.lan`,`roborio-${a}-FRC.frc-field.local`]}let cge=class extends ige{constructor(){super({},1e3/60),this.serverAddress="",this.clients={},this.connected=!1,this.topics={},this.topicValues={},this.unprocessedUpdates={},this.connectionListeners=[],this.connect(localStorage.getItem("nt4Address")??"127.0.0.1")}setValue(e,t){this.userUpdate(e,t)}getValue(e,t){return e in this.topicValues?this.topicValues[e]:t}getServerAddress(){return this.serverAddress}connect(e){this.serverAddress!==e&&(this.clearSources(),this.createClient(e))}disconnect(){var e;(e=this.client)==null||e.disconnect()}isConnected(){return this.connected}addConnectionListener(e,t=!1){this.connectionListeners.push(e),t&&e(this.connected,this.serverAddress)}processUnprocessedUpdates(){const e={...this.unprocessedUpdates};this.unprocessedUpdates={},Object.entries(e).forEach(([t,r])=>{this.userUpdate(t,r)})}userUpdate(e,t){if(!this.client){this.unprocessedUpdates[e]=t;return}const r=this.topics[e];if(r)this.client.publishNewTopic(r.name,r.type),this.client.addSample(r.name,t),this.updateSource(r.name,t);else{const n=rk(t);n!==void 0&&(this.client.publishNewTopic(e,n),this.client.addSample(e,t),this.updateSource(e,t))}}onTopicAnnounce(e){this.topics[e.name]=e}onTopicUnannounce(e){delete this.topics[e.name],delete this.topicValues[e.name],this.removeSource(e.name)}onNewTopicData(e,t,r){this.updateSource(e.name,r),this.topicValues[e.name]=r}onConnect(){this.connected=!0,this.connectionListeners.forEach(e=>e(!0,this.serverAddress)),this.processUnprocessedUpdates()}onDisconnect(){this.connected=!1,this.connectionListeners.forEach(e=>e(!1,this.serverAddress))}createClient(e){this.client&&(this.client.disconnect(),this.topics={},this.topicValues={},this.connected=!1,this.client=void 0),Object.values(this.clients).forEach(r=>r.disconnect()),this.clients={},this.serverAddress=e,this.connectionListeners.forEach(r=>r(this.connected,this.serverAddress)),localStorage.setItem("nt4Address",e);const t="FRC Web Components";(/^[0-9]+$/.test(e)&&!Number.isNaN(parseFloat(e))?lge(parseFloat(e)):[e]).forEach(r=>{const n=new age(r,t,(...s)=>{this.client===n&&this.onTopicAnnounce(...s)},(...s)=>{this.client===n&&this.onTopicUnannounce(...s)},(...s)=>{this.client===n&&this.onNewTopicData(...s)},()=>{this.client=n,Object.entries(this.clients).forEach(([s,o])=>{s!==r&&o.disconnect()}),this.clients={},this.onConnect()},()=>{this.client===n&&this.onDisconnect()});this.clients[r]=n,n.connect(),n.subscribeAll(["/"],!0)})}};const XV=xo.createContext(void 0);function uge(i){const e=new Jme(document.body),t=new cge;return e.addSourceProvider("NetworkTables",t),e.setDefaultSourceProvider("NetworkTables"),e.addElements(ume,"FRC"),t.connect(i),{store:e.getStore(),nt4Provider:t}}const hge=({children:i,address:e})=>{const[{store:t,nt4Provider:r}]=xo.useState(()=>uge(e));return Ei.jsx(XV.Provider,{value:{store:t,nt4Provider:r},children:i})},YV=()=>{const i=xo.useContext(XV);if(!i)throw new Error("useStore must be used within a StoreProvider");return i};var dge=Object.defineProperty,rS=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&dge(e,t,n),n};const pge=1,fge=2,mge=4,gge=8,_ge=16,yge=32,vge=["Unknown","Practice","Qualification","Elimination"],KV=class extends ct{constructor(){super(...arguments),this.matchType=0,this.matchNumber=0,this.eventName="",this.fmsControlData=0}getRobotState(){return this.isEnabled()?this.isTest()?"Test":this.isAuto()?"Autonomous":"Teleoperated":"Disabled"}isEnabled(){return!!(this.fmsControlData&pge)}isAuto(){return!!(this.fmsControlData&fge)}isTest(){return!!(this.fmsControlData&mge)}isEmergencyStopped(){return!!(this.fmsControlData&gge)}isFmsAttached(){return!!(this.fmsControlData&_ge)}isDsAttached(){return!!(this.fmsControlData&yge)}render(){return qe`
      <p>
        <strong>
          <span>${this.eventName}</span>
          <span>${vge[this.matchType]}</span>
          <span>match ${this.matchNumber}</span>
        </strong>
      </p>

      <p style="margin-bottom: 7px; font-weight: normal">
        <span style="margin-right: 5px;">
          ${this.isFmsAttached()?qe`
                <span class="info">
                  <frc-icon icon="check" color="green"></frc-icon>
                  FMS connected
                </span>
              `:qe`
                <span class="info">
                  <frc-icon icon="close" color="red"></frc-icon>
                  FMS disconnected
                </span>
              `}
        </span>
        <span>
          ${this.isDsAttached()?qe`
                <span class="info">
                  <frc-icon icon="check" color="green"></frc-icon>
                  DriverStation connected
                </span>
              `:qe`
                <span class="info">
                  <frc-icon icon="close" color="red"></frc-icon>
                  DriverStation disconnected
                </span>
              `}
        </span>
      </p>
      <p style="font-weight: normal">Robot state: ${this.getRobotState()}</p>
    `}};KV.styles=Ct`
    p {
      margin: 5px 0;
    }
    p:first-child {
      margin-top: 0;
    }
    p:last-child {
      margin: 0;
    }
    :host {
      text-align: center;
      font-size: 15px;
      display: inline-flex;
      width: auto;
      flex-direction: column;
      justify-content: center;
      font-family: sans-serif;
      color: var(--frc-basic-fms-info-text-color, #000);
    }

    .info {
      display: inline-flex;
      align-items: center;
      gap: 3px;
    }
  `;let Gm=KV;rS([W({type:Number,attribute:"match-type"})],Gm.prototype,"matchType");rS([W({type:Number,attribute:"match-number"})],Gm.prototype,"matchNumber");rS([W({type:String,attribute:"event-name"})],Gm.prototype,"eventName");rS([W({type:Number,attribute:"fms-control-data"})],Gm.prototype,"fmsControlData");customElements.get("frc-basic-fms-info")||customElements.define("frc-basic-fms-info",Gm);const bge=xt({tagName:"frc-basic-fms-info",elementClass:Gm,react:yt});var xge=Object.defineProperty,nS=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&xge(e,t,n),n},$a;const ev=($a=class extends ct{constructor(){super(...arguments),this.value=!1,this.falseColor=$a.DEFAULT_FALSE_COLOR,this.trueColor=$a.DEFAULT_TRUE_COLOR,this.label=""}updated(){const i=this.falseColor||$a.DEFAULT_FALSE_COLOR,e=this.trueColor||$a.DEFAULT_TRUE_COLOR,t=this.renderRoot.querySelector("[part=box]"),r=this.value?e:i;t.style.setProperty("--box-color",r)}render(){return qe` <div part="box">${this.label||qe`&nbsp;`}</div> `}},$a.DEFAULT_FALSE_COLOR="#ff0000",$a.DEFAULT_TRUE_COLOR="#00ff00",$a.styles=Ct`
    :host {
      display: inline-block;
      width: 80px;
      height: 80px;
      padding: 5px;
      box-sizing: border-box;
    }

    [part='box'] {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-content: center;
      flex-wrap: wrap;
      background-color: var(--box-color);
      text-align: center;
    }
  `,$a);nS([W({type:Boolean})],ev.prototype,"value");nS([W({type:String,attribute:"false-color"})],ev.prototype,"falseColor");nS([W({type:String,attribute:"true-color"})],ev.prototype,"trueColor");nS([W({type:String})],ev.prototype,"label");let ZV=ev;customElements.get("frc-boolean-box")||customElements.define("frc-boolean-box",ZV);xt({tagName:"frc-boolean-box",elementClass:ZV,react:yt});var I1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function JV(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function QV(i,e){const t=[];for(let r=0;r<i.length/e;r+=1)t.push(i.slice(e*r,e*(r+1)));return t}function wge(i){const e=new ArrayBuffer(8),t=new DataView(e);return i.forEach((r,n)=>{t.setUint8(n,r)}),t.getFloat64(0)}function Mge(i){return QV(i,8).map(wge)}function Vw(i,e=3){const t=i instanceof Uint8Array?Mge(i):i;return QV(t,e)}var BT,jD;function Sge(){if(jD)return BT;jD=1;var i="Expected a function",e=NaN,t="[object Symbol]",r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof I1=="object"&&I1&&I1.Object===Object&&I1,c=typeof self=="object"&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),h=Object.prototype,d=h.toString,f=Math.max,g=Math.min,v=function(){return u.Date.now()};function m(S,A,k){var M,b,P,N,D,U,G=0,B=!1,Q=!1,j=!0;if(typeof S!="function")throw new TypeError(i);A=w(A)||0,y(k)&&(B=!!k.leading,Q="maxWait"in k,P=Q?f(w(k.maxWait)||0,A):P,j="trailing"in k?!!k.trailing:j);function X(_e){var ee=M,te=b;return M=b=void 0,G=_e,N=S.apply(te,ee),N}function ne(_e){return G=_e,D=setTimeout(V,A),B?X(_e):N}function ge(_e){var ee=_e-U,te=_e-G,be=A-ee;return Q?g(be,P-te):be}function pe(_e){var ee=_e-U,te=_e-G;return U===void 0||ee>=A||ee<0||Q&&te>=P}function V(){var _e=v();if(pe(_e))return Y(_e);D=setTimeout(V,ge(_e))}function Y(_e){return D=void 0,j&&M?X(_e):(M=b=void 0,N)}function ae(){D!==void 0&&clearTimeout(D),G=0,M=U=b=D=void 0}function J(){return D===void 0?N:Y(v())}function z(){var _e=v(),ee=pe(_e);if(M=arguments,b=this,U=_e,ee){if(D===void 0)return ne(U);if(Q)return D=setTimeout(V,A),X(U)}return D===void 0&&(D=setTimeout(V,A)),N}return z.cancel=ae,z.flush=J,z}function p(S,A,k){var M=!0,b=!0;if(typeof S!="function")throw new TypeError(i);return y(k)&&(M="leading"in k?!!k.leading:M,b="trailing"in k?!!k.trailing:b),m(S,A,{leading:M,maxWait:A,trailing:b})}function y(S){var A=typeof S;return!!S&&(A=="object"||A=="function")}function _(S){return!!S&&typeof S=="object"}function x(S){return typeof S=="symbol"||_(S)&&d.call(S)==t}function w(S){if(typeof S=="number")return S;if(x(S))return e;if(y(S)){var A=typeof S.valueOf=="function"?S.valueOf():S;S=y(A)?A+"":A}if(typeof S!="string")return S===0?S:+S;S=S.replace(r,"");var k=s.test(S);return k||o.test(S)?a(S.slice(2),k?2:8):n.test(S)?e:+S}return BT=p,BT}var Tge=Sge();const ej=JV(Tge);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const tj={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},sL=i=>(...e)=>({_$litDirective$:i,values:e});let oL=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ege=i=>i.strings===void 0,Age={},kge=(i,e=Age)=>i._$AH=e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let HD;function Cge(i){return(e,t)=>zA(e,t,{get(){return(this.renderRoot??HD??(HD=document.createDocumentFragment())).querySelectorAll(i)}})}var $ge=Object.defineProperty,Cl=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&$ge(e,t,n),n};let Co=class extends ct{constructor(){super(...arguments),this.points=[],this.opacity=1,this.color=null,this.lineWidth=2,this.transform=[0,0,0],this.transformOrigin=[0,0],this.drawOrigin=["left","top"],this.zIndex=0,this._points=[]}updated(e){e.has("points")&&(this._points=Vw(this.points,2))}draw({ctx:e}){e.globalAlpha=Math.max(0,Math.min(1,this.opacity)),e.lineWidth=this.lineWidth??2,e.strokeStyle=this.color??"gray";const[t,r,n]=this.transform??[0,0,0];e.translate(t,r);const[s,o]=this.transformOrigin??[0,0],a=s,l=o;if(e.translate(a,l),e.rotate(-(n*Math.PI)/180),e.translate(-a,-l),this._points.length>1){for(let c=0;c<this._points.length-1;c+=1){const[u,h]=this._points[c],[d,f]=this._points[c+1];e.moveTo(u,h),e.lineTo(d,f)}e.stroke()}}};Cl([W({type:Array})],Co.prototype,"points");Cl([W({type:Number})],Co.prototype,"opacity");Cl([W({type:String})],Co.prototype,"color");Cl([W({type:Number,attribute:"line-width"})],Co.prototype,"lineWidth");Cl([W({type:Array})],Co.prototype,"transform");Cl([W({type:Array,attribute:"transform-origin"})],Co.prototype,"transformOrigin");Cl([W({type:Array,attribute:"draw-origin"})],Co.prototype,"drawOrigin");Cl([W({type:Array,attribute:"z-index"})],Co.prototype,"zIndex");Cl([Ui()],Co.prototype,"_points");customElements.get("frc-canvas-line")||customElements.define("frc-canvas-line",Co);var Lge=Object.defineProperty,Vs=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Lge(e,t,n),n};let Tn=class extends ct{constructor(){super(...arguments),this.origin=[0,0],this.width=10,this.height=10,this.radii=0,this.opacity=1,this.strokeColor=null,this.strokeWidth=2,this.fillColor="gray",this.transform=[0,0,0],this.transformOrigin=[0,0],this.drawOrigin=["center","center"],this.zIndex=0}draw({ctx:e}){e.globalAlpha=Math.max(0,Math.min(1,this.opacity)),this.fillColor&&(e.fillStyle=this.fillColor),this.strokeColor&&(e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth);let[t,r]=this.origin;const[n,s]=this.drawOrigin??["center","center"];n==="center"?t-=this.width/2:n==="right"&&(t-=this.width),s==="center"?r-=this.height/2:s==="bottom"&&(r-=this.height);const[o,a,l]=this.transform??[0,0,0];t+=o,r+=a,e.translate(t,r);const[c,u]=this.transformOrigin??[0,0],h=c+this.width/2,d=u+this.height/2;e.translate(h,d),e.rotate(-(l*Math.PI)/180),e.translate(-h,-d),e.roundRect(0,0,this.width,this.height,this.radii),this.fillColor&&e.fill(),this.strokeColor&&e.stroke()}};Vs([W({type:Array})],Tn.prototype,"origin");Vs([W({type:Number})],Tn.prototype,"width");Vs([W({type:Number})],Tn.prototype,"height");Vs([W({type:Number})],Tn.prototype,"radii");Vs([W({type:Number})],Tn.prototype,"opacity");Vs([W({type:String,attribute:"stroke-color"})],Tn.prototype,"strokeColor");Vs([W({type:Number,attribute:"stroke-width"})],Tn.prototype,"strokeWidth");Vs([W({type:String,attribute:"fill-color"})],Tn.prototype,"fillColor");Vs([W({type:Array})],Tn.prototype,"transform");Vs([W({type:Array,attribute:"transform-origin"})],Tn.prototype,"transformOrigin");Vs([W({type:Array,attribute:"draw-origin"})],Tn.prototype,"drawOrigin");Vs([W({type:Array,attribute:"z-index"})],Tn.prototype,"zIndex");customElements.get("frc-canvas-rect")||customElements.define("frc-canvas-rect",Tn);var Rge=Object.defineProperty,js=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Rge(e,t,n),n};let En=class extends ct{constructor(){super(...arguments),this.origin=[0,0],this.radius=10,this.startAngle=0,this.endAngle=360,this.opacity=1,this.strokeColor=null,this.strokeWidth=2,this.fillColor="gray",this.transform=[0,0,0],this.transformOrigin=[0,0],this.drawOrigin=["center","center"],this.zIndex=0}draw({ctx:e}){e.globalAlpha=Math.max(0,Math.min(1,this.opacity)),this.fillColor&&(e.fillStyle=this.fillColor),this.strokeColor&&(e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth);let[t,r]=this.origin;const[n,s]=this.drawOrigin??["center","center"];n==="left"?t+=this.radius:n==="right"&&(t-=this.radius),s==="top"?r+=this.radius:s==="bottom"&&(r-=this.radius);const[o,a,l]=this.transform??[0,0,0];t+=o,r+=a,e.translate(t,r);const[c,u]=this.transformOrigin??[0,0],h=c,d=u;e.translate(h,d),e.rotate(-(l*Math.PI)/180),e.translate(-h,-d),e.beginPath(),e.arc(0,0,this.radius,-(this.startAngle??0)*Math.PI/180,-(this.endAngle??360)*Math.PI/180,!0),this.fillColor&&e.fill(),this.strokeColor&&e.stroke()}};js([W({type:Array})],En.prototype,"origin");js([W({type:Number})],En.prototype,"radius");js([W({type:Number,attribute:"start-angle"})],En.prototype,"startAngle");js([W({type:Number,attribute:"end-angle"})],En.prototype,"endAngle");js([W({type:Number})],En.prototype,"opacity");js([W({type:String,attribute:"stroke-color"})],En.prototype,"strokeColor");js([W({type:Number,attribute:"stroke-width"})],En.prototype,"strokeWidth");js([W({type:String,attribute:"fill-color"})],En.prototype,"fillColor");js([W({type:Array})],En.prototype,"transform");js([W({type:Array,attribute:"transform-origin"})],En.prototype,"transformOrigin");js([W({type:Array,attribute:"draw-origin"})],En.prototype,"drawOrigin");js([W({type:Array,attribute:"z-index"})],En.prototype,"zIndex");customElements.get("frc-canvas-circle")||customElements.define("frc-canvas-circle",En);var Pge=Object.defineProperty,$o=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Pge(e,t,n),n};let as=class extends ct{constructor(){super(...arguments),this.origin=[0,0],this.sides=5,this.radius=10,this.opacity=1,this.strokeColor=null,this.strokeWidth=2,this.fillColor="gray",this.transform=[0,0,0],this.transformOrigin=[0,0],this.drawOrigin=["center","center"],this.zIndex=0}draw({ctx:e}){e.globalAlpha=Math.max(0,Math.min(1,this.opacity)),this.fillColor&&(e.fillStyle=this.fillColor),this.strokeColor&&(e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth);let[t,r]=this.origin;const[n,s]=this.drawOrigin??["center","center"];n==="left"?t+=this.radius:n==="right"&&(t-=this.radius),s==="top"?r+=this.radius:s==="bottom"&&(r-=this.radius);const[o,a,l]=this.transform??[0,0,0];t+=o,r+=a,e.translate(t,r);const[c,u]=this.transformOrigin??[0,0],h=c,d=u;if(e.translate(h,d),e.rotate(-(l*Math.PI)/180),e.translate(-h,-d),this.sides<3)return;const f=Math.PI*2/this.sides;e.beginPath();for(let g=0;g<this.sides;g+=1){const v=g*f,m=this.radius*Math.cos(v),p=this.radius*Math.sin(v);g===0?e.moveTo(m,p):e.lineTo(m,p)}e.closePath(),this.fillColor&&e.fill(),this.strokeColor&&e.stroke()}};$o([W({type:Array})],as.prototype,"origin");$o([W({type:Number})],as.prototype,"sides");$o([W({type:Number})],as.prototype,"radius");$o([W({type:Number})],as.prototype,"opacity");$o([W({type:String,attribute:"stroke-color"})],as.prototype,"strokeColor");$o([W({type:Number,attribute:"stroke-width"})],as.prototype,"strokeWidth");$o([W({type:String,attribute:"fill-color"})],as.prototype,"fillColor");$o([W({type:Array})],as.prototype,"transform");$o([W({type:Array,attribute:"transform-origin"})],as.prototype,"transformOrigin");$o([W({type:Array,attribute:"draw-origin"})],as.prototype,"drawOrigin");$o([W({type:Array,attribute:"z-index"})],as.prototype,"zIndex");customElements.get("frc-canvas-ngon")||customElements.define("frc-canvas-ngon",as);var Nge=Object.defineProperty,aL=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Nge(e,t,n),n};let tv=class extends ct{constructor(){super(...arguments),this.transform=[0,0,0],this.transformOrigin=[0,0],this.zIndex=0}draw(e){const{ctx:t}=e,[r,n,s]=this.transform??[0,0,0];t.translate(r,n);const[o,a]=this.transformOrigin??[0,0],l=o,c=a;t.translate(l,c),t.rotate(-(s*Math.PI)/180),t.translate(-l,-c),[...this.children].forEach(u=>{var h;t.save(),t.beginPath();const d=u;(h=d.draw)==null||h.call(d,e),t.restore()})}};aL([W({type:Array})],tv.prototype,"transform");aL([W({type:Array,attribute:"transform-origin"})],tv.prototype,"transformOrigin");aL([W({type:Array,attribute:"z-index"})],tv.prototype,"zIndex");customElements.get("frc-canvas-group")||customElements.define("frc-canvas-group",tv);var Ige=Object.defineProperty,ls=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Ige(e,t,n),n};let un=class extends ct{constructor(){super(...arguments),this.text="",this.origin=[0,0],this.maxWidth=null,this.fontName="sans-serif",this.fontSize=12,this.opacity=1,this.strokeColor=null,this.strokeWidth=2,this.fillColor="gray",this.transform=[0,0,0],this.transformOrigin=[0,0],this.drawOrigin=["center","center"],this.zIndex=0}draw({ctx:e}){e.globalAlpha=Math.max(0,Math.min(1,this.opacity??1)),this.fillColor&&(e.fillStyle=this.fillColor),this.strokeColor&&(e.strokeStyle=this.strokeColor),e.textAlign="center",e.textBaseline="middle",e.font=`${this.fontSize??12}px ${this.fontName||"sans-serif"}`;let[t,r]=this.origin??[0,0];const{width:n,actualBoundingBoxAscent:s,actualBoundingBoxDescent:o}=e.measureText(this.text??""),a=s+o,[l,c]=this.drawOrigin??["center","center"];l==="left"?t+=n/2:l==="right"&&(t-=n/2),c==="top"?r+=a/2:c==="bottom"&&(r-=a/2);const[u,h,d]=this.transform??[0,0,0];t+=u,r+=h,e.translate(t,r);const[f,g]=this.transformOrigin??[0,0],v=f,m=g;e.translate(v,m),e.rotate(-(d*Math.PI)/180),e.translate(-v,-m),this.fillColor&&e.fillText(this.text??"",0,0),this.strokeColor&&(e.lineWidth=this.strokeWidth??2,e.strokeText(this.text??"",0,0))}};ls([W({type:String})],un.prototype,"text");ls([W({type:Array})],un.prototype,"origin");ls([W({type:Number,attribute:"max-width"})],un.prototype,"maxWidth");ls([W({type:String,attribute:"font-name"})],un.prototype,"fontName");ls([W({type:Number,attribute:"font-size"})],un.prototype,"fontSize");ls([W({type:Number})],un.prototype,"opacity");ls([W({type:String,attribute:"stroke-color"})],un.prototype,"strokeColor");ls([W({type:Number,attribute:"stroke-width"})],un.prototype,"strokeWidth");ls([W({type:String,attribute:"fill-color"})],un.prototype,"fillColor");ls([W({type:Array})],un.prototype,"transform");ls([W({type:Array,attribute:"transform-origin"})],un.prototype,"transformOrigin");ls([W({type:Array,attribute:"draw-origin"})],un.prototype,"drawOrigin");ls([W({type:Array,attribute:"z-index"})],un.prototype,"zIndex");customElements.get("frc-canvas-text")||customElements.define("frc-canvas-text",un);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Dge=sL(class extends oL{constructor(){super(...arguments),this.key=Ni}render(i,e){return this.key=i,e}update(i,[e,t]){return e!==this.key&&(kge(i),this.key=e),t}});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const VT=i=>i??Ni;var Oge=Object.defineProperty,ud=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Oge(e,t,n),n};const ij=class extends ct{constructor(){super(...arguments),this.src="",this.width=null,this.height=null,this.origin=[0,0],this.disabled=!1,this.hideCrosshair=!1,this.crosshairColor="white",this.image=new Image,this.connected=!1,this.throttleUpdateImage=ej(()=>this.updateImage(),5e3),this.onImageLoadBound=this.onImageLoad.bind(this),this.onImageErrorBound=this.onImageError.bind(this)}getImageSize(e){const t={width:this.width||e.width,height:this.height||e.height};return this.image.height/this.image.width*t.width>t.height?{height:t.height,width:this.image.width/this.image.height*t.height}:{height:this.image.height/this.image.width*t.width,width:t.width}}draw({ctx:e,canvas:t}){const{width:r,height:n}=this.getImageSize(t),s={width:this.width||t.width,height:this.height||t.height},[o,a]=this.origin??[0,0];if(e.translate(o,a),!!this.connected)try{const l=(s.width-r)/2,c=(s.height-n)/2;e.drawImage(this.image,l,c,r,n),this.hideCrosshair||(e.strokeStyle=this.crosshairColor||"white",e.lineWidth=1,e.beginPath(),e.setLineDash([7,7]),e.moveTo(l,c+n/2),e.lineTo(l+r,c+n/2),e.stroke(),e.beginPath(),e.setLineDash([5,5]),e.moveTo(l+r/2,c),e.lineTo(l+r/2,c+n),e.stroke())}catch{this.throttleUpdateImage()}}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this.loadedTimeout),this.image.src=""}connectedCallback(){super.connectedCallback(),this.throttleUpdateImage()}isImageLoaded(){return this.image.complete&&this.image.naturalHeight!==0}updateImage(){if(clearTimeout(this.loadedTimeout),!this.disabled){if(!this.isConnected){this.setConnected(!1);return}this.isImageLoaded()||(this.loadedTimeout=setTimeout(()=>{this.throttleUpdateImage()},5e3),this.image.removeEventListener("load",this.onImageLoadBound),this.image.removeEventListener("error",this.onImageErrorBound),this.image.src="",this.image=new Image,this.setConnected(!1),this.image.src=this.src??"",this.image.addEventListener("load",this.onImageLoadBound),this.image.addEventListener("error",this.onImageErrorBound))}}setConnected(e){this.connected&&!e?(this.connected=!1,this.dispatchDisconnect()):!this.connected&&e&&(this.connected=!0,this.dispatchConnect())}onImageLoad(){this.setConnected(!0),clearTimeout(this.loadedTimeout)}onImageError(){this.throttleUpdateImage()}dispatchConnect(){this.dispatchEvent(new CustomEvent("connect",{bubbles:!0,composed:!0}))}dispatchDisconnect(){this.dispatchEvent(new CustomEvent("disconnect",{bubbles:!0,composed:!0}))}updated(e){e.has("src")&&this.throttleUpdateImage(),e.has("disabled")&&(this.disabled?(clearTimeout(this.loadedTimeout),this.image.src=""):this.throttleUpdateImage())}};ij.styles=Ct`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    canvas {
      width: 100%;
      height: 100%;
    }
  `;let iu=ij;ud([W({type:String})],iu.prototype,"src");ud([W({type:Number})],iu.prototype,"width");ud([W({type:Number})],iu.prototype,"height");ud([W({type:Array})],iu.prototype,"origin");ud([W({type:Boolean})],iu.prototype,"disabled");ud([W({type:Boolean,attribute:"hide-crosshair"})],iu.prototype,"hideCrosshair");ud([W({type:String,attribute:"crosshair-color"})],iu.prototype,"crosshairColor");customElements.get("frc-canvas-mjpg-stream-instance")||customElements.define("frc-canvas-mjpg-stream-instance",iu);var Uge=Object.defineProperty,$l=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Uge(e,t,n),n},D1;const oa=(D1=class extends ct{constructor(){super(...arguments),this.srcs=[],this.width=null,this.height=null,this.origin=[0,0],this.waitImage=D1.DEFAULT_WAIT_IMAGE,this.hideCrosshair=!1,this.crosshairColor="white",this.waitImageElement=new Image}getImageSize(i){const e={width:this.width||i.width,height:this.height||i.height};return this.waitImageElement.height/this.waitImageElement.width*e.width>e.height?{height:e.height,width:this.waitImageElement.width/this.waitImageElement.height*e.height}:{height:this.waitImageElement.height/this.waitImageElement.width*e.width,width:e.width}}draw(i){const{canvas:e,ctx:t}=i,r=[...this.streamInstances].find(n=>n.src===this._connectedSrc);if(r)r.draw(i);else{const{width:n,height:s}=this.getImageSize(e),o={width:this.width||e.width,height:this.height||e.height},[a,l]=this.origin??[0,0];t.translate(a,l);try{t.drawImage(this.waitImageElement,(o.width-n)/2,(o.height-s)/2,n,s)}catch{}}}updated(i){i.has("srcs")&&this._connectedSrc&&!this.srcs.includes(this._connectedSrc)&&(this._connectedSrc=void 0),i.has("waitImage")&&(this.waitImageElement.src=this.waitImage)}onConnect(i){this._connectedSrc||(this._connectedSrc=i)}onDisconnect(i){this._connectedSrc===i&&(this._connectedSrc=void 0)}renderStreamInstance(i){return qe`
      ${Dge(i,qe`
          <frc-canvas-mjpg-stream-instance
            @connect=${()=>this.onConnect(i)}
            @disconnect=${()=>this.onDisconnect(i)}
            src=${i}
            width=${VT(this.width!==null?this.width:void 0)}
            height=${VT(this.height!==null?this.height:void 0)}
            .origin=${VT(this.origin!==null?this.origin:void 0)}
            ?disabled=${this._connectedSrc&&this._connectedSrc!==i}
            ?hide-crosshair=${this.hideCrosshair}
            crosshair-color=${this.crosshairColor}
          ></frc-canvas-mjpg-stream-instance>
        `)}
    `}render(){return qe`
      ${this.srcs.map(i=>this.renderStreamInstance(i.replace("mjpg:","")))}
    `}},D1.DEFAULT_WAIT_IMAGE="./no-camera-stream.jpg",D1);$l([W({type:Array})],oa.prototype,"srcs");$l([W({type:Number})],oa.prototype,"width");$l([W({type:Number})],oa.prototype,"height");$l([W({type:Array})],oa.prototype,"origin");$l([W({type:String,attribute:"wait-image"})],oa.prototype,"waitImage");$l([W({type:Boolean,attribute:"hide-crosshair"})],oa.prototype,"hideCrosshair");$l([W({type:String,attribute:"crosshair-color"})],oa.prototype,"crosshairColor");$l([Ui()],oa.prototype,"_connectedSrc");$l([Cge("frc-canvas-mjpg-stream-instance")],oa.prototype,"streamInstances");let lL=oa;customElements.get("frc-canvas-mjpg-stream")||customElements.define("frc-canvas-mjpg-stream",lL);var zge=Object.defineProperty,cL=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&zge(e,t,n),n};const rj=class extends ct{constructor(){super(...arguments),this.width=null,this.backgroundColor="black"}getCanvasCtx(){return this.canvas.getContext("2d")}drawChildren(){const e={canvas:this.canvas,ctx:this.getCanvasCtx(),domRect:this.getBoundingClientRect()};[...this.children].forEach(t=>{var r;const n=this.getCanvasCtx();n.save(),n.beginPath();const s=t;(r=s.draw)==null||r.call(s,e),n.restore()})}drawBackground(){const e=this.getCanvasCtx();e.save(),e.fillStyle=this.backgroundColor,e.fillRect(0,0,this.canvas.width,this.canvas.height),e.restore()}drawCanvas(){this.drawBackground(),this.drawChildren(),window.requestAnimationFrame(()=>{this.drawCanvas()})}firstUpdated(){this.drawCanvas(),new ResizeObserver(()=>this.resized()).observe(this),this.resized()}resized(){const e=this.getBoundingClientRect(),{width:t,height:r}=e;typeof this.width!="number"?(this.canvas.width=t,this.canvas.height=r):(this.canvas.width=this.width,this.canvas.height=this.width*r/t)}render(){return qe` <canvas></canvas> `}};rj.styles=Ct`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    canvas {
      width: 100%;
      height: 100%;
    }

    [part='box'] {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-content: center;
      flex-wrap: wrap;
      background-color: var(--box-color);
      text-align: center;
    }
  `;let iv=rj;cL([ri("canvas")],iv.prototype,"canvas");cL([W({type:Number})],iv.prototype,"width");cL([W({type:String,attribute:"background-color"})],iv.prototype,"backgroundColor");customElements.get("frc-canvas")||customElements.define("frc-canvas",iv);var Fge=Object.defineProperty,rv=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Fge(e,t,n),n};const nj=class extends ct{constructor(){super(...arguments),this.streams=[],this.backgroundColor="black",this.waitImage=lL.DEFAULT_WAIT_IMAGE,this.hideCrosshair=!1,this.crosshairColor="white"}render(){return qe`
      <frc-canvas background-color=${this.backgroundColor}>
        <frc-canvas-mjpg-stream
          wait-image=${this.waitImage}
          crosshair-color=${this.crosshairColor}
          ?hide-crosshair=${this.hideCrosshair}
          .srcs=${this.streams}
        ></frc-canvas-mjpg-stream>
      </frc-canvas>
    `}};nj.styles=Ct`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    frc-canvas {
      width: 100%;
      height: 100%;
    }
  `;let Wm=nj;rv([W({type:Array})],Wm.prototype,"streams");rv([W({type:String,attribute:"background-color"})],Wm.prototype,"backgroundColor");rv([W({type:String,attribute:"wait-image"})],Wm.prototype,"waitImage");rv([W({type:Boolean,attribute:"hide-crosshair"})],Wm.prototype,"hideCrosshair");rv([W({type:String,attribute:"crosshair-color"})],Wm.prototype,"crosshairColor");customElements.get("frc-camera-wrapper")||customElements.define("frc-camera-wrapper",Wm);xt({tagName:"frc-canvas",elementClass:iv,react:yt});xt({tagName:"frc-canvas-circle",elementClass:En,react:yt});xt({tagName:"frc-canvas-group",elementClass:tv,react:yt});xt({tagName:"frc-canvas-line",elementClass:Co,react:yt});xt({tagName:"frc-canvas-mjpg-stream",elementClass:lL,react:yt});xt({tagName:"frc-canvas-ngon",elementClass:as,react:yt});xt({tagName:"frc-canvas-rect",elementClass:Tn,react:yt});xt({tagName:"frc-canvas-text",elementClass:un,react:yt});var Bge=Object.defineProperty,uL=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Bge(e,t,n),n};const sj=class extends ct{constructor(){super(...arguments),this.toggled=!1,this.disabled=!1,this.label="Button"}onClick(){this.disabled||(this.toggled=!this.toggled,this.dispatchEvent(new CustomEvent("toggle",{detail:{toggled:this.toggled},bubbles:!0,composed:!0})))}render(){return qe`
      <button class="${this.toggled?"toggled":""}" @click="${this.onClick}">
        ${this.label}
      </button>
    `}};sj.styles=Ct`
    :host {
      display: inline-block;
      width: 100px;
      height: 50px;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    button {
      width: 100%;
      height: 100%;
      margin: 0;
      border: none;
      border-radius: 4px;
      font-size: inherit;
      font-family: inherit;
      letter-spacing: inherit;
      background: var(--frc-button-background-color, rgb(230, 230, 230));
      color: var(--frc-button-text-color, black);
    }

    .toggled {
      background: var(--frc-button-toggled-background-color, black);
      color: var(--frc-button-toggled-text-color, white);
      font-weight: bold;
    }
  `;let nv=sj;uL([W({type:Boolean})],nv.prototype,"toggled");uL([W({type:Boolean})],nv.prototype,"disabled");uL([W({type:String})],nv.prototype,"label");customElements.get("frc-toggle-button")||customElements.define("frc-toggle-button",nv);var oj=i=>{throw TypeError(i)},Vge=(i,e,t)=>e.has(i)||oj("Cannot "+t),jge=(i,e,t)=>e.has(i)?oj("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Hge=(i,e,t)=>(Vge(i,e,"access private method"),t),Gge=Object.defineProperty,sS=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Gge(e,t,n),n},nk,aj;const lj=class extends ct{constructor(){super(...arguments),jge(this,nk),this.name="Command",this.running=!1,this.controllable=!1,this.label=""}render(){return qe`
      <frc-toggle-button
        ?disabled="${!this.controllable}"
        ?toggled="${this.running}"
        label=${this.label||this.name}
        @toggle="${Hge(this,nk,aj)}"
      >
      </frc-toggle-button>
    `}};nk=new WeakSet,aj=function(i){i.stopPropagation(),this.running=!this.running,this.dispatchEvent(new CustomEvent("toggle",{detail:{running:this.running},bubbles:!0,composed:!0}))},lj.styles=Ct`
    :host {
      display: inline-block;
      width: 100px;
      height: 50px;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    frc-toggle-button {
      width: 100%;
      height: 100%;
    }
  `;let qm=lj;sS([W({type:String})],qm.prototype,"name");sS([W({type:Boolean})],qm.prototype,"running");sS([W({type:Boolean})],qm.prototype,"controllable");sS([W({type:String})],qm.prototype,"label");customElements.get("frc-robot-command")||customElements.define("frc-robot-command",qm);var Wge=Object.defineProperty,hd=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Wge(e,t,n),n},jg;const ru=(jg=class extends ct{constructor(){super(...arguments),this.default="",this.command="",this.hasCommand=!1,this.hasDefault=!1,this.label="",this.name="",this.hideName=!1}static renderValue(i,e){return e?qe`<span class="has-value">${i}</span>`:qe`<span class="no-value">None</span>`}render(){return qe`
      ${this.hideName?"":qe` <header>${this.label||this.name}</header> `}
      <div class="subsystem">
        <p>
          Default command:
          ${jg.renderValue(this.default,this.hasDefault)}
        </p>
        <p>
          Current command:
          ${jg.renderValue(this.command,this.hasCommand)}
        </p>
      </div>
    `}},jg.styles=Ct`
    :host {
      display: inline-block;
      font-family: sans-serif;
      font-size: 16px;
      padding: 5px;
      color: var(--frc-label-text-color, black);
    }

    .subsystem {
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
    }

    p {
      margin: 0;
      margin-right: 10px;
      margin-top: 5px;
    }

    header {
      font-weight: bold;
      margin-bottom: 2px;
      color: var(--frc-robot-subsystem-header-color, purple);
    }

    .has-value {
      color: green;
    }

    .no-value {
      color: red;
    }
  `,jg);hd([W({type:String})],ru.prototype,"default");hd([W({type:String})],ru.prototype,"command");hd([W({type:Boolean,attribute:"has-command"})],ru.prototype,"hasCommand");hd([W({type:Boolean,attribute:"has-default"})],ru.prototype,"hasDefault");hd([W({type:String})],ru.prototype,"label");hd([W({type:String})],ru.prototype,"name");hd([W({type:Boolean,attribute:"hide-name"})],ru.prototype,"hideName");let cj=ru;customElements.get("frc-robot-subsystem")||customElements.define("frc-robot-subsystem",cj);xt({tagName:"frc-robot-command",elementClass:qm,react:yt,events:{ontoggle:"toggle"}});xt({tagName:"frc-robot-subsystem",elementClass:cj,react:yt});function jT(i){return i*180/Math.PI}function qge(i,e,t,r){return`<line x1="${i}" y1="${e}" x2="${t}" y2="${r}" />`}function uj(i,e,t){return`<polygon 
            points="${i.x},${i.y} ${e.x},${e.y} ${t.x},${t.y}" />`}function GD(i,e,t,r){const n=r*Math.PI/180;return{x:i+t*Math.cos(n),y:e-t*Math.sin(n)}}function Xge(i,e,t,r,n){const s=GD(i,e,t,n),o=GD(i,e,t,r),a=n-r<=180?"0":"1",l=n>r?1:0;return["M",s.x,s.y,"A",t,t,0,a,l,o.x,o.y].join(" ")}function Yge(i,e,t,r,n){return`<path d="${Xge(i,e,t,r,n)}"/>`}function Kge(i,e,t,r){const n=e/2,s=Math.cos(i),o=Math.sin(i),a=Math.cos(i+Math.PI/2)*n,l=Math.sin(i+Math.PI/2)*n,c={x:s*r-a+t,y:o*r-l},u={x:s*r+a+t,y:o*r+l},h={x:s*(e+r)+t,y:o*(e+r)};return uj(c,u,h)}function hL(i,e,t,r){const n=Math.cos(e)*i,s=Math.sin(e)*i,o=qge(t,0,n+t,s),a=Kge(e,r,t,i);return o+a}function Zge(i,e,t,r){const n=t/e,s=jT(n);return Yge(r,0,e,jT(i),jT(i)-s)}function Jge(i,e,t,r,n){const s=e/2,o=n/t-i,a=Math.sqrt(e*e+t*t),l=(n+e*Math.sign(n))/t-i,c=Math.cos(o),u=Math.sin(o),h={x:(t+s)*c+r,y:(t+s)*u},d={x:(t-s)*c+r,y:(t-s)*u},f={x:a*Math.cos(l)+r,y:a*Math.sin(l)};return uj(h,f,d)}function hj(i,e,t,r,n){if(e<0)throw new Error(`Radius cannot be negative. Given: ${e}`);return e===1/0?hL(t,i,r,n):Zge(i,e,t,r)+Jge(i,n,e,r,t)}function jw(i,e,t,r,n){return hj(i,e,e*t,r,n)}var Qge=Object.defineProperty,dj=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Qge(e,t,n),n};function HT(i,e,t){return Math.min(t,Math.max(i,e))}function e0e(i,e,t,r,n){return(i-e)*(n-r)/(t-e)+r}function t0e(i){const e=i/2,t=`
    <line 
      x1="${-e}"
      y1="${-e}"
      x2="${e}"
      y2="${e}"
    />
  `,r=`
    <line 
      x1="${-e}"
      y1="${e}"
      x2="${e}"
      y2="${-e}"
    />
  `;return`<g class="x">${t} ${r}</g>`}const pj=class extends ct{constructor(){super(),this.leftMotorSpeed=0,this.rightMotorSpeed=0,new ResizeObserver(()=>{this.resized()}).observe(this)}get clampedLeftMotorSpeed(){return HT(this.leftMotorSpeed,-1,1)}get clampedRightMotorSpeed(){return HT(this.rightMotorSpeed,-1,1)}drawMotionVector(e,t){const r=this.renderRoot.querySelector("#svg").getBoundingClientRect(),n=r.width*.13,s=20,o=20,a=r.width-(n+s)*2,l=r.height-o*2;if(Math.abs(e)<=.05&&Math.abs(t)<=.05)return t0e(r.width*.2);const c=Math.min(a,l)/2-8,u=8;if(Math.abs(e-t)<=.001)return`<g class="arrow">${hL(Math.abs(e*c),-Math.sign(e)*Math.PI/2,0,u)}</g>`;const h=Math.PI,d=(t-e)/2,f=(e+t)/2,g=f/d;let v;if(Math.abs(g)>=1){const m=-Math.sign(g),p=(m+1)*h/2,y=Math.abs(g*c);v=hj(p,y,m*f*c,m*y,u)}else{const m=Math.sign(e-t);if(g===0){const p=Math.max(e,t)*c,y=m*h,_=d<0?h:0;v=jw(_,p,y,0,u)}else{const p=g<0?e:t,y=g<0?t:e,_=Math.abs(p)*c,x=-g*_,w=e0e(y/p,0,-1,.5,h),S=g<0?h:0;v=jw(S,_,m*w,x,u)}}return`<g class="arrow">${v}</g>`}drawDrivetrain(){const e=this.renderRoot.querySelector("#svg").getBoundingClientRect(),t=e.width*.13,r=Math.min(e.width*.13,e.height*.15),n=20,s=20,o=`
      <rect 
        width="calc(100% - ${(t+n)*2}px)" 
        height="calc(100% - ${s*2}px)"
        x="${t+n}" 
        y="20px" 
      />
    `,a=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="${n}px" 
        y="${s}px" 
      />
    `,l=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="calc(100% - ${t+n}px)" 
        y="${s}px" 
      />
    `,c=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="${n}px"
        y="calc(100% - ${r*2+s}px)"
      />
    `,u=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="calc(100% - ${t+n}px)" 
        y="calc(100% - ${r*2+s}px)"
      />
    `;return o+a+l+c+u}getLeftForegroundStyle(){return this.getForegroundStyle(this.clampedLeftMotorSpeed)}getRightForegroundStyle(){return this.getForegroundStyle(this.clampedRightMotorSpeed)}getForegroundStyle(e){const t=HT(e,-1,1);return t>0?`
        height: ${Math.abs(t)/2*100}%;
        top: auto;
        bottom: 50%;
      `:`
        height: ${Math.abs(t)/2*100}%;
        top: 50%;
        bottom: auto;
      `}firstUpdated(){const e=this.drawMotionVector(0,0);this.renderRoot.querySelector("#drivetrain").innerHTML=this.drawDrivetrain(),this.renderRoot.querySelector("#forceVector").innerHTML=e}resized(){const e=this.drawMotionVector(this.clampedLeftMotorSpeed,this.clampedRightMotorSpeed);this.renderRoot.querySelector("#forceVector").innerHTML=e;const t=this.renderRoot.querySelector("#svg").getBoundingClientRect();this.renderRoot.querySelector("#forceVector").style.transform=`translate(${t.width*.5}px, ${t.height*.5}px)`,this.renderRoot.querySelector("#drivetrain").innerHTML=this.drawDrivetrain()}updated(){const e=this.drawMotionVector(this.clampedLeftMotorSpeed,this.clampedRightMotorSpeed);this.renderRoot.querySelector("#forceVector").innerHTML=e}render(){return qe`
      <div class="diff-drive-container">
        <div class="speed">
          <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
          <div class="bar">
            <div
              class="foreground"
              style="${this.getLeftForegroundStyle()}"
            ></div>
          </div>
        </div>
        <svg id="svg">
          <g id="forceVector"></g>
          <g id="drivetrain" class="drivetrain"></g>
        </svg>
        <div class="speed">
          <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
          <div class="bar">
            <div
              class="foreground"
              style="${this.getRightForegroundStyle()}"
            ></div>
          </div>
        </div>
      </div>
    `}};pj.styles=Ct`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
      padding: 0 10px;
      font-family: sans-serif;
    }

    .diff-drive-container {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
    }

    svg {
      overflow: overlay;
      flex: 1;
      height: 100%;
    }

    svg .x {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
    }

    svg .arrow line,
    svg .arrow path {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
      fill: none;
    }

    svg .arrow polygon {
      stroke: rgb(50, 50, 255);
      fill: rgb(50, 50, 255);
    }

    svg .drivetrain {
      fill: none;
      stroke: var(--frc-differential-drivebase-drivetrain-color, #000);
    }

    .bar {
      position: relative;
      height: calc(100% - 30px);
      width: 20px;
      border-radius: 3px;
      margin: 15px 0;
      background: var(--frc-bar-background, #ddd);
    }

    .speed {
      display: flex;
      height: 100%;
      flex-direction: row;
      align-items: center;
      margin-left: 30px;
    }

    frc-axis {
      width: 10px;
      height: calc(100% - 35px);
    }

    .foreground {
      position: absolute;
      top: 0;
      width: 20px;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
    }
  `;let oS=pj;dj([W({type:Number,attribute:"left-motor-speed"})],oS.prototype,"leftMotorSpeed");dj([W({type:Number,attribute:"right-motor-speed"})],oS.prototype,"rightMotorSpeed");customElements.get("frc-differential-drivebase")||customElements.define("frc-differential-drivebase",oS);var i0e=Object.defineProperty,aS=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&i0e(e,t,n),n};function r0e(i){const e=i/2,t=`
    <line 
      x1="${-e}"
      y1="${-e}"
      x2="${e}"
      y2="${e}"
    />
  `,r=`
    <line 
      x1="${-e}"
      y1="${e}"
      x2="${e}"
      y2="${-e}"
    />
  `;return`<g class="x">${t} ${r}</g>`}function Fa(i){return Math.min(1,Math.max(i,-1))}function O1(i){const e=Fa(i);return e>0?`
      height: ${Math.abs(e)/2*100}%;
      top: auto;
      bottom: 50%;
    `:`
    height: ${Math.abs(e)/2*100}%;
    top: 50%;
    bottom: auto;
  `}const fj=class extends ct{constructor(){super(),this.frontLeftMotorSpeed=0,this.frontRightMotorSpeed=0,this.rearLeftMotorSpeed=0,this.rearRightMotorSpeed=0,new ResizeObserver(()=>{this.resized()}).observe(this)}drawMotionVector(e,t,r,n){const s=this.renderRoot.querySelector("#svg").getBoundingClientRect(),o=s.width*.13,a=20,l=20,c=s.width-(o+a)*2,u=s.height-l*2,h=Math.min(c,u)/2-16,d={x:(e-t-r+n)/4,y:(e+t+r+n)/4},f=(-e+t-r+n)/4,g=Math.hypot(d.x,d.y),v=Math.atan2(d.y,d.x);if(Math.abs(f)<=.01&&g<=.01)return r0e(s.width*.2);let m="",p="",y="";return Math.abs(f)>.01&&(m=jw(0,h,-f*Math.PI,0,8),p=jw(Math.PI,h,-f*Math.PI,0,8)),g>.01&&(y=hL(g*h,-v,0,8)),`<g class="arrow">${m} ${p} ${y}</g>`}drawDrivetrain(){const e=this.renderRoot.querySelector("#svg").getBoundingClientRect(),t=e.width*.13,r=Math.min(e.width*.13,e.height*.15),n=20,s=20,o=`
      <rect 
        width="calc(100% - ${(t+n)*2}px)" 
        height="calc(100% - ${s*2}px)"
        x="${t+n}" 
        y="20px" 
      />
    `,a=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="${n}px" 
        y="${s}px" 
      />
    `,l=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="calc(100% - ${t+n}px)" 
        y="${s}px" 
      />
    `,c=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="${n}px"
        y="calc(100% - ${r*2+s}px)"
      />
    `,u=`
      <rect 
        width="${t}px" 
        height="${r*2}" 
        x="calc(100% - ${t+n}px)" 
        y="calc(100% - ${r*2+s}px)"
      />
    `;return o+a+l+c+u}getFlForegroundStyle(){return O1(this.frontLeftMotorSpeed)}getFrForegroundStyle(){return O1(this.frontRightMotorSpeed)}getRlForegroundStyle(){return O1(this.rearLeftMotorSpeed)}getRrForegroundStyle(){return O1(this.rearRightMotorSpeed)}firstUpdated(){const e=this.drawMotionVector(0,0,0,0);this.renderRoot.querySelector("#drivetrain").innerHTML=this.drawDrivetrain(),this.renderRoot.querySelector("#forceVector").innerHTML=e}resized(){const e=this.drawMotionVector(Fa(this.frontLeftMotorSpeed),Fa(this.frontRightMotorSpeed),Fa(this.rearLeftMotorSpeed),Fa(this.rearRightMotorSpeed));this.renderRoot.querySelector("#forceVector").innerHTML=e;const t=this.renderRoot.querySelector("#svg").getBoundingClientRect();this.renderRoot.querySelector("#forceVector").style.transform=`translate(${t.width*.5}px, ${t.height*.5}px)`,this.renderRoot.querySelector("#drivetrain").innerHTML=this.drawDrivetrain()}updated(e){super.updated(e);const t=this.drawMotionVector(Fa(this.frontLeftMotorSpeed),Fa(this.frontRightMotorSpeed),Fa(this.rearLeftMotorSpeed),Fa(this.rearRightMotorSpeed));this.renderRoot.querySelector("#forceVector").innerHTML=t}render(){return qe`
      <div class="diff-drive-container">
        <div class="speed-pair">
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getFlForegroundStyle()}"
              ></div>
            </div>
          </div>
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getRlForegroundStyle()}"
              ></div>
            </div>
          </div>
        </div>
        <svg id="svg">
          <g id="forceVector"></g>
          <g id="drivetrain" class="drivetrain"></g>
        </svg>
        <div class="speed-pair">
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getFrForegroundStyle()}"
              ></div>
            </div>
          </div>
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getRrForegroundStyle()}"
              ></div>
            </div>
          </div>
        </div>
      </div>
    `}};fj.styles=Ct`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
      padding: 0 10px;
      font-family: sans-serif;
    }

    .diff-drive-container {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
    }

    svg {
      overflow: overlay;
      flex: 1;
      height: 100%;
    }

    svg .x {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
    }

    svg .arrow line,
    svg .arrow path {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
      fill: none;
    }

    svg .arrow polygon {
      stroke: rgb(50, 50, 255);
      fill: rgb(50, 50, 255);
    }

    svg .drivetrain {
      fill: none;
      stroke: var(--frc-mecanum-drivebase-drivetrain-color, #000);
    }

    .bar {
      position: relative;
      height: calc(100% - 30px);
      width: 20px;
      border-radius: 3px;
      margin: 15px 0;
      background: var(--frc-bar-background, #ddd);
    }

    .speed-pair {
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-around;
    }

    .speed {
      display: flex;
      height: 48%;
      flex-direction: row;
      align-items: center;
      margin-left: 30px;
    }

    frc-axis {
      width: 10px;
      height: calc(100% - 35px);
    }

    .foreground {
      position: absolute;
      top: 0;
      width: 20px;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
    }
  `;let Xm=fj;aS([W({type:Number,attribute:"front-left-motor-speed"})],Xm.prototype,"frontLeftMotorSpeed");aS([W({type:Number,attribute:"front-right-motor-speed"})],Xm.prototype,"frontRightMotorSpeed");aS([W({type:Number,attribute:"rear-left-motor-speed"})],Xm.prototype,"rearLeftMotorSpeed");aS([W({type:Number,attribute:"rear-right-motor-speed"})],Xm.prototype,"rearRightMotorSpeed");customElements.get("frc-mecanum-drivebase")||customElements.define("frc-mecanum-drivebase",Xm);var n0e=Object.defineProperty,cs=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&n0e(e,t,n),n};function GT(i,...e){return e.some(t=>i.has(t))}function mj(i){return i*Math.PI/180}function WT(i){return i*180/Math.PI}function s0e(i,e,t){return Math.max(Math.min(i,t),e)}function WD(i,e=!1){const t=mj(-(i-90));return[e?-Math.cos(t):Math.cos(t),Math.sin(t)]}const ku=35,gj=class extends ct{constructor(){super(...arguments),this.moduleCount=4,this.wheelLocations=[2.5,2,2.5,-2,-2.5,2,-2.5,-2],this.measuredStates=[0,0,0,0,0,0,0,0],this.desiredStates=[0,0,0,0,0,0,0,0],this.robotRotation=0,this.maxSpeed=1,this.rotationUnit="radians",this.sizeLeftRight=4,this.sizeFrontBack=5,this.normalizedRotation=0}drawBase(){const[e,t]=this.getBaseSize();Vr(this._base).attr("width",e).attr("height",t).attr("stroke-width",5).attr("fill","none")}setSwerveRotation(){Vr(this._swerve).attr("transform",`rotate(${-this.normalizedRotation})`)}setSwerveOrigin(){const[e,t]=this.getBaseSize();Vr(this._swerve).attr("transform-origin",`${e/2} ${t/2}`)}getRobotRotationRad(){const e=this.robotRotation;return this.rotationUnit==="radians"?e:mj(e)}getSvgSize(){const{width:e}=this.getBoundingClientRect();return[e,e*this.sizeFrontBack/this.sizeLeftRight]}getBaseSize(){const[e]=this.getSvgSize();return[e,e*this.sizeFrontBack/this.sizeLeftRight]}updated(e){if(e.has("robotRotation")){const t=this.robotRotation??0,r=(e.get("robotRotation")??t)-t,n=this.rotationUnit==="degrees"?r:WT(r),s=[n-720,n-360,n,n+360,n+720];let o=0,a=Math.abs(s[0]);for(let l=1;l<s.length;l+=1){const c=Math.abs(s[l]);c<a&&(o=l,a=c)}this.normalizedRotation-=s[o]}GT(e,"sizeLeftRight","sizeFrontBack","robotRotation","rotationUnit")&&this.drawBase(),GT(e,"robotRotation","rotationUnit")&&this.setSwerveRotation(),GT(e,"sizeLeftRight","sizeFrontBack")&&this.setSwerveOrigin()}resized(){const[e,t]=this.getSvgSize();Vr(this._svg).attr("width",e).attr("height",t),this.drawBase(),this.setSwerveOrigin(),this.requestUpdate()}firstUpdated(){new ResizeObserver(()=>{this.resized()}).observe(this),this.resized()}getSwerveModules(){const e=[];for(let t=0;t<this.moduleCount;t+=1){const r={location:[this.wheelLocations[t*2],this.wheelLocations[t*2+1]],desiredRotation:this.desiredStates[t*2],desiredVelocity:this.desiredStates[t*2+1],measuredRotation:this.measuredStates[t*2],measuredVelocity:this.measuredStates[t*2+1]};e.push(r)}return e}renderModuleDirectionIndicator(e,t,r){const n=this.rotationUnit==="degrees"?t:WT(t),[s,o]=WD(n-15,!0),[a,l]=WD(n+15,!0),c=`M ${-s*60},${o*60} L 0,0 ${-a*60},${l*60}`;return bi`
      <defs>
        <clipPath id=${e}>
          <path d=${c} fill="white" stroke="5" stroke="white" />
        </clipPath>
      </defs>
      <circle r=${ku-2.5} fill=${r} stroke-width="0" clip-path=${`url(#${e})`}></circle>
    `}renderModuleVelocityIndicator(e,t,r,n){const s=this.rotationUnit==="degrees"?t:WT(t);let o=s0e(100*r/this.maxSpeed,-100,100);o+=ku*Math.sign(o),o*=-1;const a=Math.abs(o)-20,l=Math.abs(o),c=`M -17.5,${a} L 2.5,${l} L 22.5,${a}`,u=`rotate(${-s+(o<0?180:0)})`,h=`${e}-velocity`;return bi`
     <defs>
        <mask id=${h}>
          <circle r="300" fill="white" ></circle>
          <circle r=${ku+2.5} fill="black" ></circle>
        </mask>
      </defs>
      <g class="velocity-indicator" transform=${u} mask="url(#${h})">
        <rect width="5" height=${Math.abs(o)} fill=${n}></rect>
        <path d=${c} stroke=${n} stroke-width="5" fill="none" />
      </g>
    `}renderModules(){const e=this.getSwerveModules(),[t,r]=this.getBaseSize();return bi`
      <g class="modules">
        ${e.map((n,s)=>{const{desiredRotation:o,measuredRotation:a,location:l,measuredVelocity:c,desiredVelocity:u}=n,h=r/2*(1-l[0])+ku*Math.sign(l[0]),d=t/2*(l[1]+1)-ku*Math.sign(l[1]),f=`module-${s}-measured-clip`,g=`module-${s}-desired-clip`;return bi`
            <g transform=${`translate(${d}, ${h})`}>
              <circle class="module-circle" r=${ku} stroke-width="5" fill="none"></circle>
              ${this.renderModuleDirectionIndicator(f,a,"blue")}
              ${this.renderModuleDirectionIndicator(g,o,"red")}
              ${this.renderModuleVelocityIndicator(f,a,c,"blue")}
              ${this.renderModuleVelocityIndicator(g,o,u,"red")}
            </g>
          `})} 
      </g>
    `}renderWheelMask(){const e=this.getSwerveModules(),[t,r]=this.getBaseSize();return bi`
      <defs>
        <mask id="wheel-mask">
          <rect fill="white" width=${t} height=${r} stroke-width="5" stroke="white"></rect>
          ${e.map(n=>{const s=r/2-r*n.location[0]/this.sizeFrontBack,o=t/2-t*n.location[1]/this.sizeLeftRight;return bi`
              <circle r="50" fill="black" transform=${`translate(${o}, ${s})`}></circle>
            `})}
        </mask>
      </defs>
    `}renderArrow(){const[e,t]=this.getBaseSize(),r=`M ${e/2-30},100 L ${e/2},70 L ${e/2+30},100`;return bi`
      <line class="arrow" x1=${e/2} y1=${70} x2=${e/2} y2=${t-30} stroke-width="5" />
      <path class="arrow" d=${r} stroke-width="5" fill="none" />
    `}render(){return qe`
      <div>
        ${bi`
          <svg>
            ${this.renderWheelMask()}
            <g class="swerve">
              <rect class="base" rx=${ku}></rect>
              ${this.renderModules()}
              ${this.renderArrow()}
            </g>
          </svg>
      `}
      </div>
    `}};gj.styles=Ct`
    :host {
      display: inline-block;
      width: 300px;
      height: auto;
      overflow: visible;
    }

    svg {
      width: 100%;
      overflow: visible;
    }

    .base {
      stroke: var(--frc-swerve-drive-color, black);
    }

    .arrow {
      stroke: var(--frc-swerve-drive-color, black);
    }

    .module-circle {
      stroke: var(--frc-swerve-drive-color, black);
    }
  `;let hn=gj;cs([W({type:Number,attribute:"module-count"})],hn.prototype,"moduleCount");cs([W({type:Array,attribute:"wheel-locations"})],hn.prototype,"wheelLocations");cs([W({type:Array,attribute:"measured-states"})],hn.prototype,"measuredStates");cs([W({type:Array,attribute:"desired-states"})],hn.prototype,"desiredStates");cs([W({type:Number,attribute:"robot-rotation"})],hn.prototype,"robotRotation");cs([W({type:Number,attribute:"max-speed"})],hn.prototype,"maxSpeed");cs([W({type:String,attribute:"rotation-unit"})],hn.prototype,"rotationUnit");cs([W({type:Number,attribute:"size-left-right"})],hn.prototype,"sizeLeftRight");cs([W({type:Number,attribute:"size-front-back"})],hn.prototype,"sizeFrontBack");cs([ri("svg")],hn.prototype,"_svg");cs([ri(".swerve")],hn.prototype,"_swerve");cs([ri(".base")],hn.prototype,"_base");cs([ri(".modules")],hn.prototype,"_modules");customElements.get("frc-swerve-drivebase")||customElements.define("frc-swerve-drivebase",hn);xt({tagName:"frc-differential-drivebase",elementClass:oS,react:yt});xt({tagName:"frc-mecanum-drivebase",elementClass:Xm,react:yt});xt({tagName:"frc-swerve-drivebase",elementClass:hn,react:yt});var o0e=Object.defineProperty,_j=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&o0e(e,t,n),n};const yj=class extends ct{constructor(){super(...arguments),this.distance=0,this.speed=0}render(){return qe`
      <label class="distance-label">Distance</label>
      <span>${this.distance}</span>
      <label class="speed-label">Speed</label>
      <span>${this.speed}</span>
    `}};yj.styles=Ct`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: 50% 50%;
      column-gap: 15px;
      row-gap: 5px;
      align-items: center;
      width: 250px;
      font-family: sans-serif;
    }

    label {
      font-weight: bold;
      text-align: right;
      color: var(--frc-encoder-label-color, #000);
    }

    span {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      padding: 5px;
      border: 1px dashed;
      border-color: var(--frc-encoder-value-color, #666);
      color: var(--frc-encoder-value-color, #666);
      border-radius: 3px;
      box-sizing: border-box;
    }
  `;let lS=yj;_j([W({type:Number})],lS.prototype,"distance");_j([W({type:Number})],lS.prototype,"speed");customElements.get("frc-encoder")||customElements.define("frc-encoder",lS);xt({tagName:"frc-encoder",elementClass:lS,react:yt});const Hw="m",U1={km:1e3,m:1,cm:.01,mm:.001,mi:1609.34,yd:.9144,ft:.3048,in:.0254},qD={km:"km",m:"m",meters:"m",cm:"cm",centimeters:"cm",mm:"mm",mi:"mi",miles:"mi",yd:"yd",yards:"yards",ft:"ft",feet:"ft",foot:"ft",in:"in",inches:"in"},Sr=(i,e,t)=>(e=qD[e],t=qD[t],typeof U1[e]>"u"&&(e=Hw),typeof U1[t]>"u"&&(t=Hw),i*U1[e]/U1[t]);var vj=i=>{throw TypeError(i)},dL=(i,e,t)=>e.has(i)||vj("Cannot "+t),jn=(i,e,t)=>(dL(i,e,"read from private field"),t?t.call(i):e.get(i)),py=(i,e,t)=>e.has(i)?vj("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),bj=(i,e,t,r)=>(dL(i,e,"write to private field"),r?r.call(i,t):e.set(i,t),t),a0e=(i,e,t)=>(dL(i,e,"access private method"),t);const yx=[{game:"Reefscape",image:"./field-images/2025-field.jpg",corners:{topLeft:[421,91],bottomRight:[3352,1437]},size:[57.57291667,26.4167],unit:"foot"},{game:"Crescendo",image:"./field-images/2024-field.jpg",corners:{topLeft:[513,78],bottomRight:[3327,1475]},size:[54.265092,26.31234],unit:"foot"},{game:"Charged Up",image:"./field-images/2023-field.jpg",corners:{topLeft:[46,36],bottomRight:[1088,544]},size:[54.27083,26.2916],unit:"foot"},{game:"Rapid React",image:"./field-images/2022-field.jpg",corners:{topLeft:[74,50],bottomRight:[1774,900]},size:[54,27],unit:"foot"},{game:"Infinite Recharge",image:"./field-images/2020-field.jpg",corners:{topLeft:[96,25],bottomRight:[1040,514]},size:[52.4375,26.9375],unit:"foot"},{game:"Destination: Deep Space",image:"./field-images/2019-field.jpg",corners:{topLeft:[217,40],bottomRight:[1372,615]},size:[54,27],unit:"foot"},{game:"FIRST Power Up",image:"./field-images/2018-field.jpg",corners:{topLeft:[125,20],bottomRight:[827,370]},size:[54,27],unit:"feet"},{game:"Barrel Racing Path",image:"./field-images/2021-barrel.png",corners:{topLeft:[20,20],bottomRight:[780,400]},size:[30,15],unit:"feet"},{game:"Bounce Path",image:"./field-images/2021-bounce.png",corners:{topLeft:[20,20],bottomRight:[780,400]},size:[30,15],unit:"feet"},{game:"Galactic Search A",image:"./field-images/2021-galacticsearcha.png",corners:{topLeft:[20,20],bottomRight:[780,400]},size:[30,15],unit:"feet"},{game:"Galactic Search B",image:"./field-images/2021-galacticsearchb.png",corners:{topLeft:[20,20],bottomRight:[780,400]},size:[30,15],unit:"feet"},{game:"Slalom Path",image:"./field-images/2021-slalom.png",corners:{topLeft:[20,20],bottomRight:[780,400]},size:[30,15],unit:"feet"}];var U0,z0;let qT=class{constructor(){py(this,U0,{}),py(this,z0,new Map)}getImage(e){if(typeof jn(this,U0)[e]>"u"){const t=new Image,r={src:e,width:0,height:0,loaded:!1,image:t};t.onload=()=>{r.loaded=!0,r.width=t.width,r.height=t.height,[...jn(this,z0).values()].forEach(n=>{n(e)})},jn(this,U0)[e]=r,t.src=e}return jn(this,U0)[e]}static getBoundingBoxDims(e,t){const r=Math.abs(e.width*Math.cos(t))+Math.abs(e.height*Math.sin(t)),n=Math.abs(e.width*Math.sin(t))+Math.abs(e.height*Math.cos(t));return{width:r,height:n}}static fitImageInsideBox(e,t){return t.width/e.width*e.height<=t.height?{width:t.width,height:t.width/e.width*e.height}:{width:t.height/e.height*e.width,height:t.height}}onImageLoad(e){const t=Symbol("image");return jn(this,z0).set(t,e),()=>{jn(this,z0).delete(t)}}};U0=new WeakMap,z0=new WeakMap;var l0e=Object.defineProperty,nu=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&l0e(e,t,n),n};let aa=class extends ct{constructor(){super(...arguments),this.unit="inherit",this.rotationUnit="inherit",this.image="",this.color="#0000ff",this.opacity=1,this.pose=[0,0,0],this.width=.6,this.length=.9}draw({canvas:e,unit:t,rotationUnit:r,xToPx:n,yToPx:s,lengthToPx:o,origin:a}){const l=this.unit==="inherit"||this.unit===null?t:this.unit,c=this.rotationUnit==="inherit"||this.rotationUnit===null?r:this.rotationUnit,[u,h]=this.pose,d=c==="rad"?this.pose[2]:this.pose[2]/(180/Math.PI);e.globalAlpha=Math.max(0,Math.min(1,this.opacity)),e.fillStyle="#222",e.strokeStyle=this.color,e.lineWidth=o(3,"in"),e.translate(n(u,l),s(h,l)),e.rotate(-d+(a==="red"?Math.PI:0)),e.roundRect(-o(this.length/2,l),-o(this.width/2,l),o(this.length,l),o(this.width,l),1),e.fill(),e.stroke(),e.beginPath(),e.fillStyle="white",e.strokeStyle="white",e.lineWidth=o(2,"in"),e.moveTo(-o(this.length*.3,l),0),e.lineTo(o(this.length*.3,l),0),e.moveTo(o(this.length*.1,l),-o(this.width*.25,l)),e.lineTo(o(this.length*.3,l),0),e.lineTo(o(this.length*.1,l),o(this.width*.25,l)),e.stroke()}};nu([W({type:String})],aa.prototype,"unit");nu([W({type:String,attribute:"rotation-unit"})],aa.prototype,"rotationUnit");nu([W({type:String})],aa.prototype,"image");nu([W({type:String})],aa.prototype,"color");nu([W({type:Number})],aa.prototype,"opacity");nu([W({type:Array})],aa.prototype,"pose");nu([W({type:Number})],aa.prototype,"width");nu([W({type:Number})],aa.prototype,"length");customElements.get("frc-field-robot")||customElements.define("frc-field-robot",aa);var c0e=Object.defineProperty,su=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&c0e(e,t,n),n};let la=class extends ct{constructor(){super(...arguments),this.poses=[],this.translations=[],this.color="#FFA500",this.unit="inherit",this.lineWidth=4,this.opacity=.7,this._poses=[],this._translations=[]}updated(e){var t;e.has("poses")&&(typeof((t=this.poses)==null?void 0:t[0])=="number"||this.poses instanceof Uint8Array?this._poses=Vw(this.poses):this._poses=this.poses),e.has("translations")&&(this._translations=Vw(this.translations,2))}draw({canvas:e,unit:t,xToPx:r,yToPx:n}){const s=this.unit==="inherit"||this.unit===null?t:this.unit;if(e.lineWidth=this.lineWidth,e.strokeStyle=this.color,e.globalAlpha=this.opacity,this._poses.length>1){for(let o=0;o<this._poses.length-1;o+=1){const[a,l]=this._poses[o],[c,u]=this._poses[o+1];e.moveTo(r(a,s),n(l,s)),e.lineTo(r(c,s),n(u,s))}e.stroke()}if(this._translations.length>1){for(let o=0;o<this._translations.length-1;o+=1){const[a,l]=this._translations[o],[c,u]=this._translations[o+1];e.moveTo(r(a,s),n(l,s)),e.lineTo(r(c,s),n(u,s))}e.stroke()}}};su([W({type:Array})],la.prototype,"poses");su([W({type:Array})],la.prototype,"translations");su([W({type:String})],la.prototype,"color");su([W({type:String})],la.prototype,"unit");su([W({type:Number,attribute:"line-width"})],la.prototype,"lineWidth");su([W({type:Number})],la.prototype,"opacity");su([Ui()],la.prototype,"_poses");su([Ui()],la.prototype,"_translations");customElements.get("frc-field-path")||customElements.define("frc-field-path",la);var u0e=Object.defineProperty,An=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&u0e(e,t,n),n};function h0e(i){return i*Math.PI/180}var ic,sk,xj;const wj=class extends ct{constructor(){super(...arguments),py(this,sk),py(this,ic),this.game=yx[0].game,this.cropTop=null,this.cropBottom=null,this.cropLeft=null,this.cropRight=null,this.cropType="percent",this.unit=Hw,this.rotationUnit="rad",this.rotation=0,this.showGrid=!1,this.gridSize=1,this.origin="blue",bj(this,ic,new qT)}getConfig(){return yx.find(({game:e})=>e===this.game)??yx[0]}getCanvasCtx(){return this.canvas.getContext("2d")}getCropPercent(){if(this.cropType==="percent"){const m=this.cropLeft??0,p=this.cropTop??0,y=this.cropRight??1,_=this.cropBottom??1;return{x1:m,y1:p,x2:y,y2:_}}const{corners:e,image:t,unit:r,size:n}=this.getConfig(),{loaded:s,width:o,height:a}=jn(this,ic).getImage(t);if(!s)return{x1:0,y1:0,x2:1,y2:1};const l=[this.cropLeft??0,this.cropTop??0],c=[this.cropRight??Sr(n[0],r,this.unit),this.cropBottom??Sr(n[1],r,this.unit)],u=e.topLeft[0]/o,h=e.topLeft[1]/a,d=e.bottomRight[0]/o,f=e.bottomRight[1]/a,g=d-u,v=f-h;return{x1:u+g*Sr(l[0],this.unit,r)/n[0],y1:h+v*Sr(l[1],this.unit,r)/n[1],x2:u+g*Sr(c[0],this.unit,r)/n[0],y2:h+v*Sr(c[1],this.unit,r)/n[1]}}getFieldRectPx(){const{corners:e,image:t}=this.getConfig(),{loaded:r,width:n,height:s}=jn(this,ic).getImage(t);if(!r)return{x:0,y:0,width:0,height:0};const o=e.topLeft[0]/n,a=e.topLeft[1]/s,l=e.bottomRight[0]/n,c=e.bottomRight[1]/s,u=this.getCropPercent(),h=u.x2-u.x1,d=u.y2-u.y1,f=this.canvas.width/h,g=this.canvas.height/d;return{x:(o-u.x1)*f,y:(a-u.y1)*g,width:(l-o)*f,height:(c-a)*g}}pxToX(e,t=this.unit){const r=this.getFieldRectPx(),{size:n,unit:s}=this.getConfig();if(r.width===0)return 0;const o=r.width/n[0],a=e*(this.canvas.width/this.canvas.clientWidth),l=this.origin!=="red"?(a-r.x)/o:(r.x+r.width-a)/o;return Sr(l,s,t)}xToPx(e,t=this.unit){const r=this.getFieldRectPx(),{size:n,unit:s}=this.getConfig();if(r.width===0)return 0;const o=r.width/n[0],a=Sr(e,t,s);return this.origin!=="red"?r.x+a*o:r.x+r.width-a*o}yToPx(e,t=this.unit){const r=this.getFieldRectPx(),{size:n,unit:s}=this.getConfig();if(r.height===0)return 0;const o=r.height/n[1],a=Sr(e,t,s);return this.origin!=="red"?r.y+r.height-a*o:r.y+a*o}pxToY(e,t=this.unit){const r=this.getFieldRectPx(),{size:n,unit:s}=this.getConfig();if(r.height===0)return 0;const o=r.height/n[1],a=e*(this.canvas.height/this.canvas.clientHeight),l=this.origin!=="red"?(r.y+r.height-a)/o:(a-r.y)/o;return Sr(l,s,t)}lengthToPx(e,t=this.unit){const r=this.getFieldRectPx(),{size:n,unit:s}=this.getConfig();if(r.width===0)return 0;const o=r.width/n[0];return Sr(e,t,s)*o}setContainerSize(){const e={width:this.clientWidth,height:this.clientHeight},t=this.getConfig().image,r=jn(this,ic).getImage(t),{loaded:n}=r;if(!n)return;const s=this.getCropPercent(),o={width:(s.x2-s.x1)*r.width,height:(s.y2-s.y1)*r.height},a=qT.getBoundingBoxDims(o,h0e(this.rotation)),l=qT.fitImageInsideBox(a,{width:e.width,height:e.height}).width/a.width;this.container.style.width=`${o.width*l}px`,this.container.style.height=`${o.height*l}px`}drawImage(){const e=this.getCanvasCtx(),t=this.getConfig().image,{loaded:r,image:n,width:s,height:o}=jn(this,ic).getImage(t);if(!r)return;const{clientWidth:a,clientHeight:l}=this.canvas,c=a*window.devicePixelRatio,u=l*window.devicePixelRatio;this.canvas.width=c,this.canvas.height=u;const h=this.getCropPercent();e.drawImage(n,h.x1*s,h.y1*o,(h.x2-h.x1)*s,(h.y2-h.y1)*o,0,0,c,u)}drawFieldRect(){const e=this.getCanvasCtx(),{x:t,y:r,width:n,height:s}=this.getFieldRectPx();e.rect(t,r,n,s),e.lineWidth=2,e.strokeStyle="yellow",e.stroke()}drawGrid(){const e=this.getCanvasCtx(),{image:t,size:r}=this.getConfig(),{loaded:n}=jn(this,ic).getImage(t);if(!(!n||!this.showGrid||this.gridSize<=0)){e.lineWidth=1,e.strokeStyle="gray";for(let s=0;s<=r[0];s+=this.gridSize)e.beginPath(),e.moveTo(this.xToPx(s),this.yToPx(0)),e.lineTo(this.xToPx(s),this.yToPx(r[1])),e.stroke();for(let s=0;s<=r[1];s+=this.gridSize)e.beginPath(),e.moveTo(this.xToPx(0),this.yToPx(s)),e.lineTo(this.xToPx(r[0]),this.yToPx(s)),e.stroke()}}drawChildren(){const e={canvas:this.getCanvasCtx(),getFieldRectPx:()=>this.getFieldRectPx(),unit:this.unit,rotationUnit:this.rotationUnit,xToPx:(t,r)=>this.xToPx(t,r),yToPx:(t,r)=>this.yToPx(t,r),lengthToPx:(t,r)=>this.lengthToPx(t,r),origin:this.origin};[...this.children].flatMap(t=>t.tagName==="SLOT"?t.assignedElements():t).forEach(t=>{var r;const n=this.getCanvasCtx();n.save(),n.beginPath();const s=t;(r=s.draw)==null||r.call(s,e),n.restore()})}drawField(){this.setContainerSize(),this.drawImage(),this.drawFieldRect(),this.drawGrid(),this.drawChildren(),window.requestAnimationFrame(()=>{this.drawField()})}firstUpdated(){this.drawField()}render(){return qe`
      <div class="outside-container">
        <div class="container" style="transform: rotate(${-this.rotation}deg)">
          <canvas @click=${a0e(this,sk,xj)}></canvas>
        </div>
      </div>
    `}};ic=new WeakMap,sk=new WeakSet,xj=function(i){const e=this.pxToX(i.offsetX),t=this.pxToY(i.offsetY);this.dispatchEvent(new CustomEvent("fieldClick",{detail:{feet:{x:Sr(e,this.unit,"ft"),y:Sr(t,this.unit,"ft")},meters:{x:Sr(e,this.unit,"m"),y:Sr(t,this.unit,"m")}},bubbles:!0,composed:!0}))},wj.styles=Ct`
    :host {
      display: inline-flex;
      position: relative;
      width: 500px;
      height: 300px;
      justify-content: center;
      align-items: center;
    }

    .container {
    }

    canvas {
      width: 100%;
      height: 100%;
    }
  `;let qr=wj;An([W({type:String})],qr.prototype,"game");An([W({type:Number,attribute:"crop-top"})],qr.prototype,"cropTop");An([W({type:Number,attribute:"crop-bottom"})],qr.prototype,"cropBottom");An([W({type:Number,attribute:"crop-left"})],qr.prototype,"cropLeft");An([W({type:Number,attribute:"crop-right"})],qr.prototype,"cropRight");An([W({type:String,attribute:"crop-type"})],qr.prototype,"cropType");An([W({type:String})],qr.prototype,"unit");An([W({type:String,attribute:"rotation-unit"})],qr.prototype,"rotationUnit");An([W({type:Number})],qr.prototype,"rotation");An([W({type:Boolean,attribute:"show-grid"})],qr.prototype,"showGrid");An([W({type:Number,attribute:"grid-size"})],qr.prototype,"gridSize");An([W({type:String})],qr.prototype,"origin");An([ri("canvas",!0)],qr.prototype,"canvas");An([ri(".container",!0)],qr.prototype,"container");customElements.get("frc-field")||customElements.define("frc-field",qr);let d0e=class{constructor(e,t){this.sourceKey="",this.sourceProvider="",this.store=e,this.onUpdate=t}setSource(e,t){var r;this.sourceKey=e,this.sourceProvider=t,this.addFieldObjectsFromSources(),(r=this.unsubscriber)==null||r.call(this);const n=ej(()=>{this.addFieldObjectsFromSources()},1e3/60);this.unsubscriber=this.store.subscribe(t,e,n,!0)}addFieldObjectsFromSources(){var e;const t=this.store.getSource(this.sourceProvider,this.sourceKey);if(!t||((e=t.getChildren()[".type"])==null?void 0:e.getValue())!=="Field2d")return;const r=[];Object.entries(t.getChildren()).forEach(([n,s])=>{if(n.startsWith(".")||n==="XModules")return;const o=s.hasChildren()?s.getChildren().pose.getValue():s.getValue(),a=Vw(o);r.push({type:a.length===1?"robot":"trajectory",poses:a,sourceKey:s.getKey(),sourceProvider:this.sourceProvider}),this.onUpdate(r)})}};var p0e=Object.defineProperty,vr=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&p0e(e,t,n),n},F0;const Mj=class extends ct{constructor(){super(...arguments),py(this,F0),this.sourceProvider="",this.sourceKey="",this.game=yx[0].game,this.cropTop=0,this.cropBottom=100,this.cropLeft=0,this.cropRight=100,this.cropType="percent",this.unit=Hw,this.rotationUnit="deg",this.rotation=0,this.showGrid=!1,this.gridSize=1,this.origin="blue",this.fieldObjects=[]}firstUpdated(){this.store&&(this.fieldObjectManager=new d0e(this.store,e=>{this.fieldObjects=e})),bj(this,F0,new MutationObserver(()=>{this.requestUpdate()})),jn(this,F0).observe(this,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["source-key","source-provider"]})}disconnectedCallback(){super.disconnectedCallback(),jn(this,F0).disconnect()}updated(e){(e.has("sourceKey")||e.has("sourceProvider"))&&this.fieldObjectManager.setSource(this.sourceKey,this.sourceProvider)}render(){var e;const t=(((e=this.slottedFieldObjects)==null?void 0:e.assignedElements())??[]).filter(r=>r.tagName==="FRC-FIELD-ROBOT"||r.tagName==="FRC-FIELD-PATH").map(r=>({type:r.tagName==="FRC-FIELD-ROBOT"?"robot":"trajectory",sourceKey:r.getAttribute("source-key"),sourceProvider:r.getAttribute("source-provider")}));return qe`
      <frc-field
        game=${this.game}
        unit=${this.unit}
        rotation-unit=${this.rotationUnit}
        rotation=${this.rotation}
        ?show-grid=${this.showGrid}
        grid-size=${this.gridSize}
        origin=${this.origin}
        crop-top=${this.cropTop/100}
        crop-bottom=${this.cropBottom/100}
        crop-left=${this.cropLeft/100}
        crop-right=${this.cropRight/100}
        crop-type=${this.cropType}
      >
        ${this.fieldObjects.filter(r=>!t.find(({sourceKey:n,sourceProvider:s,type:o})=>r.type===o&&r.sourceKey===n&&r.sourceProvider===s)).map(r=>r.type==="robot"?qe`<frc-field-robot
                .pose=${r.poses[0]}
              ></frc-field-robot>`:qe`<frc-field-path
              .poses=${r.poses}
            ></frc-field-path>`)}
        <slot></slot>
      </frc-field>
    `}};F0=new WeakMap,Mj.styles=Ct`
    :host {
      display: inline-block;
      position: relative;
      width: 500px;
      height: 300px;
    }

    frc-field {
      width: 100%;
      height: 100%;
    }
  `;let nr=Mj;vr([W({type:Object,attribute:!1})],nr.prototype,"provider");vr([W({type:Object,attribute:!1})],nr.prototype,"store");vr([W({type:String,attribute:"source-provider"})],nr.prototype,"sourceProvider");vr([W({type:String,attribute:"source-key"})],nr.prototype,"sourceKey");vr([W({type:String})],nr.prototype,"game");vr([W({type:Number,attribute:"crop-top"})],nr.prototype,"cropTop");vr([W({type:Number,attribute:"crop-bottom"})],nr.prototype,"cropBottom");vr([W({type:Number,attribute:"crop-left"})],nr.prototype,"cropLeft");vr([W({type:Number,attribute:"crop-right"})],nr.prototype,"cropRight");vr([W({type:String,attribute:"crop-type"})],nr.prototype,"cropType");vr([W({type:String})],nr.prototype,"unit");vr([W({type:String,attribute:"rotation-unit"})],nr.prototype,"rotationUnit");vr([W({type:Number})],nr.prototype,"rotation");vr([W({type:Boolean,attribute:"show-grid"})],nr.prototype,"showGrid");vr([W({type:Number,attribute:"grid-size"})],nr.prototype,"gridSize");vr([W({type:String})],nr.prototype,"origin");vr([Ui()],nr.prototype,"fieldObjects");vr([ri("slot",!0)],nr.prototype,"slottedFieldObjects");customElements.get("frc-field-wrapper")||customElements.define("frc-field-wrapper",nr);const f0e=xt({tagName:"frc-field",elementClass:qr,react:yt}),m0e=xt({tagName:"frc-field-robot",elementClass:aa,react:yt});xt({tagName:"frc-field-path",elementClass:la,react:yt});var Sj=i=>{throw TypeError(i)},pL=(i,e,t)=>e.has(i)||Sj("Cannot "+t),ci=(i,e,t)=>(pL(i,e,"read from private field"),t?t.call(i):e.get(i)),kr=(i,e,t)=>e.has(i)?Sj("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),rn=(i,e,t,r)=>(pL(i,e,"write to private field"),r?r.call(i,t):e.set(i,t),t),rl=(i,e,t)=>(pL(i,e,"access private method"),t);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const fL="151",Jd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Qd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},g0e=0,XD=1,_0e=2,Tj=1,y0e=2,B0=3,Xo=0,xn=1,Ss=2,Lc=0,Rf=1,YD=2,KD=3,ZD=4,v0e=5,Up=100,b0e=101,x0e=102,JD=103,QD=104,w0e=200,M0e=201,S0e=202,T0e=203,Ej=204,Aj=205,E0e=206,A0e=207,k0e=208,C0e=209,$0e=210,L0e=0,R0e=1,P0e=2,ok=3,N0e=4,I0e=5,D0e=6,O0e=7,cS=0,U0e=1,z0e=2,nl=0,F0e=1,B0e=2,V0e=3,j0e=4,H0e=5,kj=300,pm=301,fm=302,ak=303,lk=304,uS=306,Vo=1e3,Gr=1001,Gw=1002,hr=1003,ck=1004,vx=1005,Cr=1006,Cj=1007,fl=1008,Bh=1009,G0e=1010,W0e=1011,$j=1012,q0e=1013,ch=1014,bc=1015,fy=1016,X0e=1017,Y0e=1018,Pf=1020,K0e=1021,Ts=1023,Z0e=1024,J0e=1025,bh=1026,mm=1027,Q0e=1028,e_e=1029,t_e=1030,i_e=1031,r_e=1033,XT=33776,YT=33777,KT=33778,ZT=33779,eO=35840,tO=35841,iO=35842,rO=35843,n_e=36196,nO=37492,sO=37496,oO=37808,aO=37809,lO=37810,cO=37811,uO=37812,hO=37813,dO=37814,pO=37815,fO=37816,mO=37817,gO=37818,_O=37819,yO=37820,vO=37821,JT=36492,s_e=36283,bO=36284,xO=36285,wO=36286,my=2300,gm=2301,QT=2302,MO=2400,SO=2401,TO=2402,o_e=2500,a_e=0,Lj=1,uk=2,Vh=3e3,qt=3001,l_e=3200,c_e=3201,hS=0,u_e=1,ao="srgb",dS="srgb-linear",Rj="display-p3",eE=7680,h_e=519,hk=35044,EO="300 es",dk=1035;let dd=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const r=t.slice(0);for(let n=0,s=r.length;n<s;n++)r[n].call(this,e);e.target=null}}};const zr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let AO=1234567;const Nf=Math.PI/180,_m=180/Math.PI;function bo(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(zr[i&255]+zr[i>>8&255]+zr[i>>16&255]+zr[i>>24&255]+"-"+zr[e&255]+zr[e>>8&255]+"-"+zr[e>>16&15|64]+zr[e>>24&255]+"-"+zr[t&63|128]+zr[t>>8&255]+"-"+zr[t>>16&255]+zr[t>>24&255]+zr[r&255]+zr[r>>8&255]+zr[r>>16&255]+zr[r>>24&255]).toLowerCase()}function $r(i,e,t){return Math.max(e,Math.min(t,i))}function mL(i,e){return(i%e+e)%e}function d_e(i,e,t,r,n){return r+(i-e)*(n-r)/(t-e)}function p_e(i,e,t){return i!==e?(t-i)/(e-i):0}function T_(i,e,t){return(1-t)*i+t*e}function f_e(i,e,t,r){return T_(i,e,1-Math.exp(-t*r))}function m_e(i,e=1){return e-Math.abs(mL(i,e*2)-e)}function g_e(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function __e(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function y_e(i,e){return i+Math.floor(Math.random()*(e-i+1))}function v_e(i,e){return i+Math.random()*(e-i)}function b_e(i){return i*(.5-Math.random())}function x_e(i){i!==void 0&&(AO=i);let e=AO+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function w_e(i){return i*Nf}function M_e(i){return i*_m}function pk(i){return(i&i-1)===0&&i!==0}function Pj(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Nj(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function S_e(i,e,t,r,n){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),h=s((e-r)/2),d=o((e-r)/2),f=s((r-e)/2),g=o((r-e)/2);switch(n){case"XYX":i.set(a*u,l*h,l*d,a*c);break;case"YZY":i.set(l*d,a*u,l*h,a*c);break;case"ZXZ":i.set(l*h,l*d,a*u,a*c);break;case"XZX":i.set(a*u,l*g,l*f,a*c);break;case"YXY":i.set(l*f,a*u,l*g,a*c);break;case"ZYZ":i.set(l*g,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function Ka(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function oi(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const zp={DEG2RAD:Nf,RAD2DEG:_m,generateUUID:bo,clamp:$r,euclideanModulo:mL,mapLinear:d_e,inverseLerp:p_e,lerp:T_,damp:f_e,pingpong:m_e,smoothstep:g_e,smootherstep:__e,randInt:y_e,randFloat:v_e,randFloatSpread:b_e,seededRandom:x_e,degToRad:w_e,radToDeg:M_e,isPowerOfTwo:pk,ceilPowerOfTwo:Pj,floorPowerOfTwo:Nj,setQuaternionFromProperEuler:S_e,normalize:oi,denormalize:Ka};let It=class Ij{constructor(e=0,t=0){Ij.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6],this.y=n[1]*t+n[4]*r+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos($r(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),n=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*n+e.x,this.y=s*n+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Yt=class Dj{constructor(){Dj.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,n,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=n,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,n=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],h=r[7],d=r[2],f=r[5],g=r[8],v=n[0],m=n[3],p=n[6],y=n[1],_=n[4],x=n[7],w=n[2],S=n[5],A=n[8];return s[0]=o*v+a*y+l*w,s[3]=o*m+a*_+l*S,s[6]=o*p+a*x+l*A,s[1]=c*v+u*y+h*w,s[4]=c*m+u*_+h*S,s[7]=c*p+u*x+h*A,s[2]=d*v+f*y+g*w,s[5]=d*m+f*_+g*S,s[8]=d*p+f*x+g*A,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+n*s*c-n*o*l}invert(){const e=this.elements,t=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=a*l-u*s,f=c*s-o*l,g=t*h+r*d+n*f;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=h*v,e[1]=(n*c-u*r)*v,e[2]=(a*r-n*o)*v,e[3]=d*v,e[4]=(u*t-n*l)*v,e[5]=(n*s-a*t)*v,e[6]=f*v,e[7]=(r*l-c*t)*v,e[8]=(o*t-r*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,n,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-n*c,n*l,-n*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(tE.makeScale(e,t)),this}rotate(e){return this.premultiply(tE.makeRotation(-e)),this}translate(e,t){return this.premultiply(tE.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let n=0;n<9;n++)if(t[n]!==r[n])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}};const tE=new Yt;function Oj(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function gy(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function If(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function iE(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}const T_e=new Yt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),E_e=new Yt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function A_e(i){return i.convertSRGBToLinear().applyMatrix3(E_e)}function k_e(i){return i.applyMatrix3(T_e).convertLinearToSRGB()}const C_e={[dS]:i=>i,[ao]:i=>i.convertSRGBToLinear(),[Rj]:A_e},$_e={[dS]:i=>i,[ao]:i=>i.convertLinearToSRGB(),[Rj]:k_e},Un={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(i){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!i},get workingColorSpace(){return dS},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;const r=C_e[e],n=$_e[t];if(r===void 0||n===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return n(r(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}};let ep;class Uj{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ep===void 0&&(ep=gy("canvas")),ep.width=e.width,ep.height=e.height;const r=ep.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=ep}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=gy("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const n=r.getImageData(0,0,e.width,e.height),s=n.data;for(let o=0;o<s.length;o++)s[o]=If(s[o]/255)*255;return r.putImageData(n,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(If(t[r]/255)*255):t[r]=If(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class zj{constructor(e=null){this.isSource=!0,this.uuid=bo(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},n=this.data;if(n!==null){let s;if(Array.isArray(n)){s=[];for(let o=0,a=n.length;o<a;o++)n[o].isDataTexture?s.push(rE(n[o].image)):s.push(rE(n[o]))}else s=rE(n);r.url=s}return t||(e.images[this.uuid]=r),r}}function rE(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?Uj.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let L_e=0,Jn=class bx extends dd{constructor(e=bx.DEFAULT_IMAGE,t=bx.DEFAULT_MAPPING,r=Gr,n=Gr,s=Cr,o=fl,a=Ts,l=Bh,c=bx.DEFAULT_ANISOTROPY,u=Vh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:L_e++}),this.uuid=bo(),this.name="",this.source=new zj(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=n,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new It(0,0),this.repeat=new It(1,1),this.center=new It(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Yt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==kj)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Vo:e.x=e.x-Math.floor(e.x);break;case Gr:e.x=e.x<0?0:1;break;case Gw:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Vo:e.y=e.y-Math.floor(e.y);break;case Gr:e.y=e.y<0?0:1;break;case Gw:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};Jn.DEFAULT_IMAGE=null;Jn.DEFAULT_MAPPING=kj;Jn.DEFAULT_ANISOTROPY=1;class ui{constructor(e=0,t=0,r=0,n=1){ui.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,n=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*n+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*n+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*n+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*n+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,n,s;const o=e.elements,a=o[0],l=o[4],c=o[8],u=o[1],h=o[5],d=o[9],f=o[2],g=o[6],v=o[10];if(Math.abs(l-u)<.01&&Math.abs(c-f)<.01&&Math.abs(d-g)<.01){if(Math.abs(l+u)<.1&&Math.abs(c+f)<.1&&Math.abs(d+g)<.1&&Math.abs(a+h+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const p=(a+1)/2,y=(h+1)/2,_=(v+1)/2,x=(l+u)/4,w=(c+f)/4,S=(d+g)/4;return p>y&&p>_?p<.01?(r=0,n=.707106781,s=.707106781):(r=Math.sqrt(p),n=x/r,s=w/r):y>_?y<.01?(r=.707106781,n=0,s=.707106781):(n=Math.sqrt(y),r=x/n,s=S/n):_<.01?(r=.707106781,n=.707106781,s=0):(s=Math.sqrt(_),r=w/s,n=S/s),this.set(r,n,s,t),this}let m=Math.sqrt((g-d)*(g-d)+(c-f)*(c-f)+(u-l)*(u-l));return Math.abs(m)<.001&&(m=1),this.x=(g-d)/m,this.y=(c-f)/m,this.z=(u-l)/m,this.w=Math.acos((a+h+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}let jh=class extends dd{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ui(0,0,e,t),this.scissorTest=!1,this.viewport=new ui(0,0,e,t);const n={width:e,height:t,depth:1};this.texture=new Jn(n,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Cr,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new zj(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}};class Fj extends Jn{constructor(e=null,t=1,r=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:n},this.magFilter=hr,this.minFilter=hr,this.wrapR=Gr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class R_e extends Jn{constructor(e=null,t=1,r=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:n},this.magFilter=hr,this.minFilter=hr,this.wrapR=Gr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let Nr=class{constructor(e=0,t=0,r=0,n=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=n}static slerpFlat(e,t,r,n,s,o,a){let l=r[n+0],c=r[n+1],u=r[n+2],h=r[n+3];const d=s[o+0],f=s[o+1],g=s[o+2],v=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=g,e[t+3]=v;return}if(h!==v||l!==d||c!==f||u!==g){let m=1-a;const p=l*d+c*f+u*g+h*v,y=p>=0?1:-1,_=1-p*p;if(_>Number.EPSILON){const w=Math.sqrt(_),S=Math.atan2(w,p*y);m=Math.sin(m*S)/w,a=Math.sin(a*S)/w}const x=a*y;if(l=l*m+d*x,c=c*m+f*x,u=u*m+g*x,h=h*m+v*x,m===1-a){const w=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=w,c*=w,u*=w,h*=w}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,n,s,o){const a=r[n],l=r[n+1],c=r[n+2],u=r[n+3],h=s[o],d=s[o+1],f=s[o+2],g=s[o+3];return e[t]=a*g+u*h+l*f-c*d,e[t+1]=l*g+u*d+c*h-a*f,e[t+2]=c*g+u*f+a*d-l*h,e[t+3]=u*g-a*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,n=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(n/2),h=a(s/2),d=l(r/2),f=l(n/2),g=l(s/2);switch(o){case"XYZ":this._x=d*u*h+c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h-d*f*g;break;case"YXZ":this._x=d*u*h+c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h+d*f*g;break;case"ZXY":this._x=d*u*h-c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h-d*f*g;break;case"ZYX":this._x=d*u*h-c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h+d*f*g;break;case"YZX":this._x=d*u*h+c*f*g,this._y=c*f*h+d*u*g,this._z=c*u*g-d*f*h,this._w=c*u*h-d*f*g;break;case"XZY":this._x=d*u*h-c*f*g,this._y=c*f*h-d*u*g,this._z=c*u*g+d*f*h,this._w=c*u*h+d*f*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],n=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=r+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-n)*f}else if(r>a&&r>h){const f=2*Math.sqrt(1+r-a-h);this._w=(u-l)/f,this._x=.25*f,this._y=(n+o)/f,this._z=(s+c)/f}else if(a>h){const f=2*Math.sqrt(1+a-r-h);this._w=(s-c)/f,this._x=(n+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-r-a);this._w=(o-n)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs($r(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const n=Math.min(1,t/r);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,n=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+n*c-s*l,this._y=n*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-n*a,this._w=o*u-r*a-n*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,n=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+n*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=n,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*r+t*this._x,this._y=f*n+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=r*h+this._x*d,this._y=n*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),n=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(n),r*Math.sin(s),r*Math.cos(s),t*Math.sin(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},me=class Bj{constructor(e=0,t=0,r=0){Bj.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(kO.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(kO.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,n=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*n,this.y=s[1]*t+s[4]*r+s[7]*n,this.z=s[2]*t+s[5]*r+s[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,n=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*n+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*n+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*n+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*n+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,n=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*n-a*r,u=l*r+a*t-s*n,h=l*n+s*r-o*t,d=-s*t-o*r-a*n;return this.x=c*l+d*-s+u*-a-h*-o,this.y=u*l+d*-o+h*-s-c*-a,this.z=h*l+d*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,n=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*n,this.y=s[1]*t+s[5]*r+s[9]*n,this.z=s[2]*t+s[6]*r+s[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,n=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=n*l-s*a,this.y=s*o-r*l,this.z=r*a-n*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return nE.copy(this).projectOnVector(e),this.sub(nE)}reflect(e){return this.sub(nE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos($r(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const n=Math.sin(t)*e;return this.x=n*Math.sin(r),this.y=Math.cos(t)*e,this.z=n*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const nE=new me,kO=new Nr;let Ll=class{constructor(e=new me(1/0,1/0,1/0),t=new me(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Ra.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Ra.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Ra.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),tp.copy(e.boundingBox),tp.applyMatrix4(e.matrixWorld),this.union(tp);else{const n=e.geometry;if(n!==void 0)if(t&&n.attributes!==void 0&&n.attributes.position!==void 0){const s=n.attributes.position;for(let o=0,a=s.count;o<a;o++)Ra.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Ra)}else n.boundingBox===null&&n.computeBoundingBox(),tp.copy(n.boundingBox),tp.applyMatrix4(e.matrixWorld),this.union(tp)}const r=e.children;for(let n=0,s=r.length;n<s;n++)this.expandByObject(r[n],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ra),Ra.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Hg),z1.subVectors(this.max,Hg),ip.subVectors(e.a,Hg),rp.subVectors(e.b,Hg),np.subVectors(e.c,Hg),Wl.subVectors(rp,ip),ql.subVectors(np,rp),Cu.subVectors(ip,np);let t=[0,-Wl.z,Wl.y,0,-ql.z,ql.y,0,-Cu.z,Cu.y,Wl.z,0,-Wl.x,ql.z,0,-ql.x,Cu.z,0,-Cu.x,-Wl.y,Wl.x,0,-ql.y,ql.x,0,-Cu.y,Cu.x,0];return!sE(t,ip,rp,np,z1)||(t=[1,0,0,0,1,0,0,0,1],!sE(t,ip,rp,np,z1))?!1:(F1.crossVectors(Wl,ql),t=[F1.x,F1.y,F1.z],sE(t,ip,rp,np,z1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ra).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ra).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(La[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),La[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),La[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),La[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),La[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),La[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),La[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),La[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(La),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const La=[new me,new me,new me,new me,new me,new me,new me,new me],Ra=new me,tp=new Ll,ip=new me,rp=new me,np=new me,Wl=new me,ql=new me,Cu=new me,Hg=new me,z1=new me,F1=new me,$u=new me;function sE(i,e,t,r,n){for(let s=0,o=i.length-3;s<=o;s+=3){$u.fromArray(i,s);const a=n.x*Math.abs($u.x)+n.y*Math.abs($u.y)+n.z*Math.abs($u.z),l=e.dot($u),c=t.dot($u),u=r.dot($u);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const P_e=new Ll,Gg=new me,oE=new me;class Rl{constructor(e=new me,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):P_e.setFromPoints(e).getCenter(r);let n=0;for(let s=0,o=e.length;s<o;s++)n=Math.max(n,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Gg.subVectors(e,this.center);const t=Gg.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),n=(r-this.radius)*.5;this.center.addScaledVector(Gg,n/r),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(oE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Gg.copy(e.center).add(oE)),this.expandByPoint(Gg.copy(e.center).sub(oE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Pa=new me,aE=new me,B1=new me,Xl=new me,lE=new me,V1=new me,cE=new me;class gL{constructor(e=new me,t=new me(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Pa)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Pa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Pa.copy(this.origin).addScaledVector(this.direction,t),Pa.distanceToSquared(e))}distanceSqToSegment(e,t,r,n){aE.copy(e).add(t).multiplyScalar(.5),B1.copy(t).sub(e).normalize(),Xl.copy(this.origin).sub(aE);const s=e.distanceTo(t)*.5,o=-this.direction.dot(B1),a=Xl.dot(this.direction),l=-Xl.dot(B1),c=Xl.lengthSq(),u=Math.abs(1-o*o);let h,d,f,g;if(u>0)if(h=o*l-a,d=o*a-l,g=s*u,h>=0)if(d>=-g)if(d<=g){const v=1/u;h*=v,d*=v,f=h*(h+o*d+2*a)+d*(o*h+d+2*l)+c}else d=s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d=-s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d<=-g?(h=Math.max(0,-(-o*s+a)),d=h>0?-s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c):d<=g?(h=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(h=Math.max(0,-(o*s+a)),d=h>0?s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c);else d=o>0?-s:s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,h),n&&n.copy(aE).addScaledVector(B1,d),f}intersectSphere(e,t){Pa.subVectors(e.center,this.origin);const r=Pa.dot(this.direction),n=Pa.dot(Pa)-r*r,s=e.radius*e.radius;if(n>s)return null;const o=Math.sqrt(s-n),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,n,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(r=(e.min.x-d.x)*c,n=(e.max.x-d.x)*c):(r=(e.max.x-d.x)*c,n=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),r>o||s>n||((s>r||isNaN(r))&&(r=s),(o<n||isNaN(n))&&(n=o),h>=0?(a=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),r>l||a>n)||((a>r||r!==r)&&(r=a),(l<n||n!==n)&&(n=l),n<0)?null:this.at(r>=0?r:n,t)}intersectsBox(e){return this.intersectBox(e,Pa)!==null}intersectTriangle(e,t,r,n,s){lE.subVectors(t,e),V1.subVectors(r,e),cE.crossVectors(lE,V1);let o=this.direction.dot(cE),a;if(o>0){if(n)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Xl.subVectors(this.origin,e);const l=a*this.direction.dot(V1.crossVectors(Xl,V1));if(l<0)return null;const c=a*this.direction.dot(lE.cross(Xl));if(c<0||l+c>o)return null;const u=-a*Xl.dot(cE);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}let Pt=class fk{constructor(){fk.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,n,s,o,a,l,c,u,h,d,f,g,v,m){const p=this.elements;return p[0]=e,p[4]=t,p[8]=r,p[12]=n,p[1]=s,p[5]=o,p[9]=a,p[13]=l,p[2]=c,p[6]=u,p[10]=h,p[14]=d,p[3]=f,p[7]=g,p[11]=v,p[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new fk().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,n=1/sp.setFromMatrixColumn(e,0).length(),s=1/sp.setFromMatrixColumn(e,1).length(),o=1/sp.setFromMatrixColumn(e,2).length();return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,n=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(n),c=Math.sin(n),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=o*u,f=o*h,g=a*u,v=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+g*c,t[5]=d-v*c,t[9]=-a*l,t[2]=v-d*c,t[6]=g+f*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,f=l*h,g=c*u,v=c*h;t[0]=d+v*a,t[4]=g*a-f,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-g,t[6]=v+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,f=l*h,g=c*u,v=c*h;t[0]=d-v*a,t[4]=-o*h,t[8]=g+f*a,t[1]=f+g*a,t[5]=o*u,t[9]=v-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,f=o*h,g=a*u,v=a*h;t[0]=l*u,t[4]=g*c-f,t[8]=d*c+v,t[1]=l*h,t[5]=v*c+d,t[9]=f*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=v-d*h,t[8]=g*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*h+g,t[10]=d-v*h}else if(e.order==="XZY"){const d=o*l,f=o*c,g=a*l,v=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+v,t[5]=o*u,t[9]=f*h-g,t[2]=g*h-f,t[6]=a*u,t[10]=v*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(N_e,e,I_e)}lookAt(e,t,r){const n=this.elements;return zn.subVectors(e,t),zn.lengthSq()===0&&(zn.z=1),zn.normalize(),Yl.crossVectors(r,zn),Yl.lengthSq()===0&&(Math.abs(r.z)===1?zn.x+=1e-4:zn.z+=1e-4,zn.normalize(),Yl.crossVectors(r,zn)),Yl.normalize(),j1.crossVectors(zn,Yl),n[0]=Yl.x,n[4]=j1.x,n[8]=zn.x,n[1]=Yl.y,n[5]=j1.y,n[9]=zn.y,n[2]=Yl.z,n[6]=j1.z,n[10]=zn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,n=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],h=r[5],d=r[9],f=r[13],g=r[2],v=r[6],m=r[10],p=r[14],y=r[3],_=r[7],x=r[11],w=r[15],S=n[0],A=n[4],k=n[8],M=n[12],b=n[1],P=n[5],N=n[9],D=n[13],U=n[2],G=n[6],B=n[10],Q=n[14],j=n[3],X=n[7],ne=n[11],ge=n[15];return s[0]=o*S+a*b+l*U+c*j,s[4]=o*A+a*P+l*G+c*X,s[8]=o*k+a*N+l*B+c*ne,s[12]=o*M+a*D+l*Q+c*ge,s[1]=u*S+h*b+d*U+f*j,s[5]=u*A+h*P+d*G+f*X,s[9]=u*k+h*N+d*B+f*ne,s[13]=u*M+h*D+d*Q+f*ge,s[2]=g*S+v*b+m*U+p*j,s[6]=g*A+v*P+m*G+p*X,s[10]=g*k+v*N+m*B+p*ne,s[14]=g*M+v*D+m*Q+p*ge,s[3]=y*S+_*b+x*U+w*j,s[7]=y*A+_*P+x*G+w*X,s[11]=y*k+_*N+x*B+w*ne,s[15]=y*M+_*D+x*Q+w*ge,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],n=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],g=e[3],v=e[7],m=e[11],p=e[15];return g*(+s*l*h-n*c*h-s*a*d+r*c*d+n*a*f-r*l*f)+v*(+t*l*f-t*c*d+s*o*d-n*o*f+n*c*u-s*l*u)+m*(+t*c*h-t*a*f-s*o*h+r*o*f+s*a*u-r*c*u)+p*(-n*a*u-t*l*h+t*a*d+n*o*h-r*o*d+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],g=e[12],v=e[13],m=e[14],p=e[15],y=h*m*c-v*d*c+v*l*f-a*m*f-h*l*p+a*d*p,_=g*d*c-u*m*c-g*l*f+o*m*f+u*l*p-o*d*p,x=u*v*c-g*h*c+g*a*f-o*v*f-u*a*p+o*h*p,w=g*h*l-u*v*l-g*a*d+o*v*d+u*a*m-o*h*m,S=t*y+r*_+n*x+s*w;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/S;return e[0]=y*A,e[1]=(v*d*s-h*m*s-v*n*f+r*m*f+h*n*p-r*d*p)*A,e[2]=(a*m*s-v*l*s+v*n*c-r*m*c-a*n*p+r*l*p)*A,e[3]=(h*l*s-a*d*s-h*n*c+r*d*c+a*n*f-r*l*f)*A,e[4]=_*A,e[5]=(u*m*s-g*d*s+g*n*f-t*m*f-u*n*p+t*d*p)*A,e[6]=(g*l*s-o*m*s-g*n*c+t*m*c+o*n*p-t*l*p)*A,e[7]=(o*d*s-u*l*s+u*n*c-t*d*c-o*n*f+t*l*f)*A,e[8]=x*A,e[9]=(g*h*s-u*v*s-g*r*f+t*v*f+u*r*p-t*h*p)*A,e[10]=(o*v*s-g*a*s+g*r*c-t*v*c-o*r*p+t*a*p)*A,e[11]=(u*a*s-o*h*s-u*r*c+t*h*c+o*r*f-t*a*f)*A,e[12]=w*A,e[13]=(u*v*n-g*h*n+g*r*d-t*v*d-u*r*m+t*h*m)*A,e[14]=(g*a*n-o*v*n-g*r*l+t*v*l+o*r*m-t*a*m)*A,e[15]=(o*h*n-u*a*n+u*r*l-t*h*l-o*r*d+t*a*d)*A,this}scale(e){const t=this.elements,r=e.x,n=e.y,s=e.z;return t[0]*=r,t[4]*=n,t[8]*=s,t[1]*=r,t[5]*=n,t[9]*=s,t[2]*=r,t[6]*=n,t[10]*=s,t[3]*=r,t[7]*=n,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),n=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-n*l,c*l+n*a,0,c*a+n*l,u*a+r,u*l-n*o,0,c*l-n*a,u*l+n*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,n,s,o){return this.set(1,r,s,0,e,1,o,0,t,n,1,0,0,0,0,1),this}compose(e,t,r){const n=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,h=a+a,d=s*c,f=s*u,g=s*h,v=o*u,m=o*h,p=a*h,y=l*c,_=l*u,x=l*h,w=r.x,S=r.y,A=r.z;return n[0]=(1-(v+p))*w,n[1]=(f+x)*w,n[2]=(g-_)*w,n[3]=0,n[4]=(f-x)*S,n[5]=(1-(d+p))*S,n[6]=(m+y)*S,n[7]=0,n[8]=(g+_)*A,n[9]=(m-y)*A,n[10]=(1-(d+v))*A,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,r){const n=this.elements;let s=sp.set(n[0],n[1],n[2]).length();const o=sp.set(n[4],n[5],n[6]).length(),a=sp.set(n[8],n[9],n[10]).length();this.determinant()<0&&(s=-s),e.x=n[12],e.y=n[13],e.z=n[14],Zs.copy(this);const l=1/s,c=1/o,u=1/a;return Zs.elements[0]*=l,Zs.elements[1]*=l,Zs.elements[2]*=l,Zs.elements[4]*=c,Zs.elements[5]*=c,Zs.elements[6]*=c,Zs.elements[8]*=u,Zs.elements[9]*=u,Zs.elements[10]*=u,t.setFromRotationMatrix(Zs),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,n,s,o){const a=this.elements,l=2*s/(t-e),c=2*s/(r-n),u=(t+e)/(t-e),h=(r+n)/(r-n),d=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,n,s,o){const a=this.elements,l=1/(t-e),c=1/(r-n),u=1/(o-s),h=(t+e)*l,d=(r+n)*c,f=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}};const sp=new me,Zs=new Pt,N_e=new me(0,0,0),I_e=new me(1,1,1),Yl=new me,j1=new me,zn=new me,CO=new Pt,$O=new Nr;let pS=class Vj{constructor(e=0,t=0,r=0,n=Vj.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,n=this._order){return this._x=e,this._y=t,this._z=r,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const n=e.elements,s=n[0],o=n[4],a=n[8],l=n[1],c=n[5],u=n[9],h=n[2],d=n[6],f=n[10];switch(t){case"XYZ":this._y=Math.asin($r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-$r(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin($r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-$r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin($r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-$r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return CO.makeRotationFromQuaternion(e),this.setFromRotationMatrix(CO,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return $O.setFromEuler(this),this.setFromQuaternion($O,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};pS.DEFAULT_ORDER="XYZ";class jj{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let D_e=0;const LO=new me,op=new Nr,Na=new Pt,H1=new me,Wg=new me,O_e=new me,U_e=new Nr,RO=new me(1,0,0),PO=new me(0,1,0),NO=new me(0,0,1),z_e={type:"added"},IO={type:"removed"};let Li=class xx extends dd{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:D_e++}),this.uuid=bo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=xx.DEFAULT_UP.clone();const e=new me,t=new pS,r=new Nr,n=new me(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new Pt},normalMatrix:{value:new Yt}}),this.matrix=new Pt,this.matrixWorld=new Pt,this.matrixAutoUpdate=xx.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=xx.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new jj,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return op.setFromAxisAngle(e,t),this.quaternion.multiply(op),this}rotateOnWorldAxis(e,t){return op.setFromAxisAngle(e,t),this.quaternion.premultiply(op),this}rotateX(e){return this.rotateOnAxis(RO,e)}rotateY(e){return this.rotateOnAxis(PO,e)}rotateZ(e){return this.rotateOnAxis(NO,e)}translateOnAxis(e,t){return LO.copy(e).applyQuaternion(this.quaternion),this.position.add(LO.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(RO,e)}translateY(e){return this.translateOnAxis(PO,e)}translateZ(e){return this.translateOnAxis(NO,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Na.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?H1.copy(e):H1.set(e,t,r);const n=this.parent;this.updateWorldMatrix(!0,!1),Wg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Na.lookAt(Wg,H1,this.up):Na.lookAt(H1,Wg,this.up),this.quaternion.setFromRotationMatrix(Na),n&&(Na.extractRotation(n.matrixWorld),op.setFromRotationMatrix(Na),this.quaternion.premultiply(op.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(z_e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(IO)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(IO)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Na.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Na.multiply(e.parent.matrixWorld)),e.applyMatrix4(Na),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,n=this.children.length;r<n;r++){const s=this.children[r].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let n=0,s=this.children.length;n<s;n++){const o=this.children[n].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wg,e,O_e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wg,U_e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,n=t.length;r<n;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,n=t.length;r<n;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const n=this.children;for(let s=0,o=n.length;s<o;s++){const a=n[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(n.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));n.material=a}else n.material=s(e.materials,this.material);if(this.children.length>0){n.children=[];for(let a=0;a<this.children.length;a++)n.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];n.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),d=o(e.skeletons),f=o(e.animations),g=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),d.length>0&&(r.skeletons=d),f.length>0&&(r.animations=f),g.length>0&&(r.nodes=g)}return r.object=n,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const n=e.children[r];this.add(n.clone())}return this}};Li.DEFAULT_UP=new me(0,1,0);Li.DEFAULT_MATRIX_AUTO_UPDATE=!0;Li.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Js=new me,Ia=new me,uE=new me,Da=new me,ap=new me,lp=new me,DO=new me,hE=new me,dE=new me,pE=new me;let G1=!1,V0=class Vu{constructor(e=new me,t=new me,r=new me){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,n){n.subVectors(r,t),Js.subVectors(e,t),n.cross(Js);const s=n.lengthSq();return s>0?n.multiplyScalar(1/Math.sqrt(s)):n.set(0,0,0)}static getBarycoord(e,t,r,n,s){Js.subVectors(n,t),Ia.subVectors(r,t),uE.subVectors(e,t);const o=Js.dot(Js),a=Js.dot(Ia),l=Js.dot(uE),c=Ia.dot(Ia),u=Ia.dot(uE),h=o*c-a*a;if(h===0)return s.set(-2,-1,-1);const d=1/h,f=(c*l-a*u)*d,g=(o*u-a*l)*d;return s.set(1-f-g,g,f)}static containsPoint(e,t,r,n){return this.getBarycoord(e,t,r,n,Da),Da.x>=0&&Da.y>=0&&Da.x+Da.y<=1}static getUV(e,t,r,n,s,o,a,l){return G1===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),G1=!0),this.getInterpolation(e,t,r,n,s,o,a,l)}static getInterpolation(e,t,r,n,s,o,a,l){return this.getBarycoord(e,t,r,n,Da),l.setScalar(0),l.addScaledVector(s,Da.x),l.addScaledVector(o,Da.y),l.addScaledVector(a,Da.z),l}static isFrontFacing(e,t,r,n){return Js.subVectors(r,t),Ia.subVectors(e,t),Js.cross(Ia).dot(n)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,r,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Js.subVectors(this.c,this.b),Ia.subVectors(this.a,this.b),Js.cross(Ia).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Vu.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Vu.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,n,s){return G1===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),G1=!0),Vu.getInterpolation(e,this.a,this.b,this.c,t,r,n,s)}getInterpolation(e,t,r,n,s){return Vu.getInterpolation(e,this.a,this.b,this.c,t,r,n,s)}containsPoint(e){return Vu.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Vu.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,n=this.b,s=this.c;let o,a;ap.subVectors(n,r),lp.subVectors(s,r),hE.subVectors(e,r);const l=ap.dot(hE),c=lp.dot(hE);if(l<=0&&c<=0)return t.copy(r);dE.subVectors(e,n);const u=ap.dot(dE),h=lp.dot(dE);if(u>=0&&h<=u)return t.copy(n);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(ap,o);pE.subVectors(e,s);const f=ap.dot(pE),g=lp.dot(pE);if(g>=0&&f<=g)return t.copy(s);const v=f*c-l*g;if(v<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(r).addScaledVector(lp,a);const m=u*g-f*h;if(m<=0&&h-u>=0&&f-g>=0)return DO.subVectors(s,n),a=(h-u)/(h-u+(f-g)),t.copy(n).addScaledVector(DO,a);const p=1/(m+v+d);return o=v*p,a=d*p,t.copy(r).addScaledVector(ap,o).addScaledVector(lp,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},F_e=0,Ls=class extends dd{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:F_e++}),this.uuid=bo(),this.name="",this.type="Material",this.blending=Rf,this.side=Xo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Ej,this.blendDst=Aj,this.blendEquation=Up,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ok,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=h_e,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=eE,this.stencilZFail=eE,this.stencilZPass=eE,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const n=this[t];if(n===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Rf&&(r.blending=this.blending),this.side!==Xo&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function n(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=n(e.textures),o=n(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const n=t.length;r=new Array(n);for(let s=0;s!==n;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}};const Hj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qs={h:0,s:0,l:0},W1={h:0,s:0,l:0};function fE(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let At=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&r===void 0?this.set(e):this.setRGB(e,t,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ao){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Un.toWorkingColorSpace(this,t),this}setRGB(e,t,r,n=Un.workingColorSpace){return this.r=e,this.g=t,this.b=r,Un.toWorkingColorSpace(this,n),this}setHSL(e,t,r,n=Un.workingColorSpace){if(e=mL(e,1),t=$r(t,0,1),r=$r(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=fE(o,s,e+1/3),this.g=fE(o,s,e),this.b=fE(o,s,e-1/3)}return Un.toWorkingColorSpace(this,n),this}setStyle(e,t=ao){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=n[1],a=n[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Un.toWorkingColorSpace(this,t),r(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Un.toWorkingColorSpace(this,t),r(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,u=parseFloat(s[3])/100;return r(s[4]),this.setHSL(l,c,u,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=n[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ao){const r=Hj[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=If(e.r),this.g=If(e.g),this.b=If(e.b),this}copyLinearToSRGB(e){return this.r=iE(e.r),this.g=iE(e.g),this.b=iE(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ao){return Un.fromWorkingColorSpace(Fr.copy(this),e),$r(Fr.r*255,0,255)<<16^$r(Fr.g*255,0,255)<<8^$r(Fr.b*255,0,255)<<0}getHexString(e=ao){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Un.workingColorSpace){Un.fromWorkingColorSpace(Fr.copy(this),t);const r=Fr.r,n=Fr.g,s=Fr.b,o=Math.max(r,n,s),a=Math.min(r,n,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case r:l=(n-s)/h+(n<s?6:0);break;case n:l=(s-r)/h+2;break;case s:l=(r-n)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Un.workingColorSpace){return Un.fromWorkingColorSpace(Fr.copy(this),t),e.r=Fr.r,e.g=Fr.g,e.b=Fr.b,e}getStyle(e=ao){Un.fromWorkingColorSpace(Fr.copy(this),e);const t=Fr.r,r=Fr.g,n=Fr.b;return e!==ao?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${n.toFixed(3)})`:`rgb(${t*255|0},${r*255|0},${n*255|0})`}offsetHSL(e,t,r){return this.getHSL(Qs),Qs.h+=e,Qs.s+=t,Qs.l+=r,this.setHSL(Qs.h,Qs.s,Qs.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Qs),e.getHSL(W1);const r=T_(Qs.h,W1.h,t),n=T_(Qs.s,W1.s,t),s=T_(Qs.l,W1.l,t);return this.setHSL(r,n,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,n=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*n,this.g=s[1]*t+s[4]*r+s[7]*n,this.b=s[2]*t+s[5]*r+s[8]*n,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Fr=new At;At.NAMES=Hj;let go=class extends Ls{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new At(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=cS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};const ji=new me,q1=new It;let gr=class{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=hk,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let n=0,s=this.itemSize;n<s;n++)this.array[e+n]=t.array[r+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)q1.fromBufferAttribute(this,t),q1.applyMatrix3(e),this.setXY(t,q1.x,q1.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)ji.fromBufferAttribute(this,t),ji.applyMatrix3(e),this.setXYZ(t,ji.x,ji.y,ji.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ji.fromBufferAttribute(this,t),ji.applyMatrix4(e),this.setXYZ(t,ji.x,ji.y,ji.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ji.fromBufferAttribute(this,t),ji.applyNormalMatrix(e),this.setXYZ(t,ji.x,ji.y,ji.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ji.fromBufferAttribute(this,t),ji.transformDirection(e),this.setXYZ(t,ji.x,ji.y,ji.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ka(t,this.array)),t}setX(e,t){return this.normalized&&(t=oi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ka(t,this.array)),t}setY(e,t){return this.normalized&&(t=oi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ka(t,this.array)),t}setZ(e,t){return this.normalized&&(t=oi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ka(t,this.array)),t}setW(e,t){return this.normalized&&(t=oi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=oi(t,this.array),r=oi(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,n){return e*=this.itemSize,this.normalized&&(t=oi(t,this.array),r=oi(r,this.array),n=oi(n,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this}setXYZW(e,t,r,n,s){return e*=this.itemSize,this.normalized&&(t=oi(t,this.array),r=oi(r,this.array),n=oi(n,this.array),s=oi(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==hk&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}};class Gj extends gr{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class Wj extends gr{constructor(e,t,r){super(new Uint32Array(e),t,r)}}let di=class extends gr{constructor(e,t,r){super(new Float32Array(e),t,r)}},B_e=0;const ds=new Pt,mE=new Li,cp=new me,Fn=new Ll,qg=new Ll,ar=new me;let on=class qj extends dd{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:B_e++}),this.uuid=bo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Oj(e)?Wj:Gj)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Yt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ds.makeRotationFromQuaternion(e),this.applyMatrix4(ds),this}rotateX(e){return ds.makeRotationX(e),this.applyMatrix4(ds),this}rotateY(e){return ds.makeRotationY(e),this.applyMatrix4(ds),this}rotateZ(e){return ds.makeRotationZ(e),this.applyMatrix4(ds),this}translate(e,t,r){return ds.makeTranslation(e,t,r),this.applyMatrix4(ds),this}scale(e,t,r){return ds.makeScale(e,t,r),this.applyMatrix4(ds),this}lookAt(e){return mE.lookAt(e),mE.updateMatrix(),this.applyMatrix4(mE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(cp).negate(),this.translate(cp.x,cp.y,cp.z),this}setFromPoints(e){const t=[];for(let r=0,n=e.length;r<n;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new di(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ll);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new me(-1/0,-1/0,-1/0),new me(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,n=t.length;r<n;r++){const s=t[r];Fn.setFromBufferAttribute(s),this.morphTargetsRelative?(ar.addVectors(this.boundingBox.min,Fn.min),this.boundingBox.expandByPoint(ar),ar.addVectors(this.boundingBox.max,Fn.max),this.boundingBox.expandByPoint(ar)):(this.boundingBox.expandByPoint(Fn.min),this.boundingBox.expandByPoint(Fn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Rl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new me,1/0);return}if(e){const r=this.boundingSphere.center;if(Fn.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];qg.setFromBufferAttribute(a),this.morphTargetsRelative?(ar.addVectors(Fn.min,qg.min),Fn.expandByPoint(ar),ar.addVectors(Fn.max,qg.max),Fn.expandByPoint(ar)):(Fn.expandByPoint(qg.min),Fn.expandByPoint(qg.max))}Fn.getCenter(r);let n=0;for(let s=0,o=e.count;s<o;s++)ar.fromBufferAttribute(e,s),n=Math.max(n,r.distanceToSquared(ar));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)ar.fromBufferAttribute(a,c),l&&(cp.fromBufferAttribute(e,c),ar.add(cp)),n=Math.max(n,r.distanceToSquared(ar))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,n=t.position.array,s=t.normal.array,o=t.uv.array,a=n.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new gr(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let b=0;b<a;b++)c[b]=new me,u[b]=new me;const h=new me,d=new me,f=new me,g=new It,v=new It,m=new It,p=new me,y=new me;function _(b,P,N){h.fromArray(n,b*3),d.fromArray(n,P*3),f.fromArray(n,N*3),g.fromArray(o,b*2),v.fromArray(o,P*2),m.fromArray(o,N*2),d.sub(h),f.sub(h),v.sub(g),m.sub(g);const D=1/(v.x*m.y-m.x*v.y);isFinite(D)&&(p.copy(d).multiplyScalar(m.y).addScaledVector(f,-v.y).multiplyScalar(D),y.copy(f).multiplyScalar(v.x).addScaledVector(d,-m.x).multiplyScalar(D),c[b].add(p),c[P].add(p),c[N].add(p),u[b].add(y),u[P].add(y),u[N].add(y))}let x=this.groups;x.length===0&&(x=[{start:0,count:r.length}]);for(let b=0,P=x.length;b<P;++b){const N=x[b],D=N.start,U=N.count;for(let G=D,B=D+U;G<B;G+=3)_(r[G+0],r[G+1],r[G+2])}const w=new me,S=new me,A=new me,k=new me;function M(b){A.fromArray(s,b*3),k.copy(A);const P=c[b];w.copy(P),w.sub(A.multiplyScalar(A.dot(P))).normalize(),S.crossVectors(k,P);const N=S.dot(u[b])<0?-1:1;l[b*4]=w.x,l[b*4+1]=w.y,l[b*4+2]=w.z,l[b*4+3]=N}for(let b=0,P=x.length;b<P;++b){const N=x[b],D=N.start,U=N.count;for(let G=D,B=D+U;G<B;G+=3)M(r[G+0]),M(r[G+1]),M(r[G+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new gr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,f=r.count;d<f;d++)r.setXYZ(d,0,0,0);const n=new me,s=new me,o=new me,a=new me,l=new me,c=new me,u=new me,h=new me;if(e)for(let d=0,f=e.count;d<f;d+=3){const g=e.getX(d+0),v=e.getX(d+1),m=e.getX(d+2);n.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),u.subVectors(o,s),h.subVectors(n,s),u.cross(h),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,v),c.fromBufferAttribute(r,m),a.add(u),l.add(u),c.add(u),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(m,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)n.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),h.subVectors(n,s),u.cross(h),r.setXYZ(d+0,u.x,u.y,u.z),r.setXYZ(d+1,u.x,u.y,u.z),r.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ar.fromBufferAttribute(e,t),ar.normalize(),e.setXYZ(t,ar.x,ar.y,ar.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,d=new c.constructor(l.length*u);let f=0,g=0;for(let v=0,m=l.length;v<m;v++){a.isInterleavedBufferAttribute?f=l[v]*a.data.stride+a.offset:f=l[v]*u;for(let p=0;p<u;p++)d[g++]=c[f++]}return new gr(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new qj,r=this.index.array,n=this.attributes;for(const a in n){const l=n[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const d=c[u],f=e(d,r);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const n={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h];u.push(f.toJSON(e.data))}u.length>0&&(n[l]=u,s=!0)}s&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const n=e.attributes;for(const c in n){const u=n[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}};const OO=new Pt,No=new gL,X1=new Rl,UO=new me,up=new me,hp=new me,dp=new me,gE=new me,Y1=new me,K1=new It,Z1=new It,J1=new It,zO=new me,FO=new me,BO=new me,Q1=new me,eb=new me;let Wi=class extends Li{constructor(e=new on,t=new go){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,s=r.length;n<s;n++){const o=r[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=n}}}}getVertexPosition(e,t){const r=this.geometry,n=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(n,e);const a=this.morphTargetInfluences;if(s&&a){Y1.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],h=s[l];u!==0&&(gE.fromBufferAttribute(h,e),o?Y1.addScaledVector(gE,u):Y1.addScaledVector(gE.sub(t),u))}t.add(Y1)}return this.isSkinnedMesh&&this.applyBoneTransform(e,t),t}raycast(e,t){const r=this.geometry,n=this.material,s=this.matrixWorld;if(n===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),X1.copy(r.boundingSphere),X1.applyMatrix4(s),No.copy(e.ray).recast(e.near),X1.containsPoint(No.origin)===!1&&(No.intersectSphere(X1,UO)===null||No.origin.distanceToSquared(UO)>(e.far-e.near)**2))||(OO.copy(s).invert(),No.copy(e.ray).applyMatrix4(OO),r.boundingBox!==null&&No.intersectsBox(r.boundingBox)===!1))return;let o;const a=r.index,l=r.attributes.position,c=r.attributes.uv,u=r.attributes.uv2,h=r.attributes.normal,d=r.groups,f=r.drawRange;if(a!==null)if(Array.isArray(n))for(let g=0,v=d.length;g<v;g++){const m=d[g],p=n[m.materialIndex],y=Math.max(m.start,f.start),_=Math.min(a.count,Math.min(m.start+m.count,f.start+f.count));for(let x=y,w=_;x<w;x+=3){const S=a.getX(x),A=a.getX(x+1),k=a.getX(x+2);o=tb(this,p,e,No,c,u,h,S,A,k),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=m.materialIndex,t.push(o))}}else{const g=Math.max(0,f.start),v=Math.min(a.count,f.start+f.count);for(let m=g,p=v;m<p;m+=3){const y=a.getX(m),_=a.getX(m+1),x=a.getX(m+2);o=tb(this,n,e,No,c,u,h,y,_,x),o&&(o.faceIndex=Math.floor(m/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(n))for(let g=0,v=d.length;g<v;g++){const m=d[g],p=n[m.materialIndex],y=Math.max(m.start,f.start),_=Math.min(l.count,Math.min(m.start+m.count,f.start+f.count));for(let x=y,w=_;x<w;x+=3){const S=x,A=x+1,k=x+2;o=tb(this,p,e,No,c,u,h,S,A,k),o&&(o.faceIndex=Math.floor(x/3),o.face.materialIndex=m.materialIndex,t.push(o))}}else{const g=Math.max(0,f.start),v=Math.min(l.count,f.start+f.count);for(let m=g,p=v;m<p;m+=3){const y=m,_=m+1,x=m+2;o=tb(this,n,e,No,c,u,h,y,_,x),o&&(o.faceIndex=Math.floor(m/3),t.push(o))}}}};function V_e(i,e,t,r,n,s,o,a){let l;if(e.side===xn?l=r.intersectTriangle(o,s,n,!0,a):l=r.intersectTriangle(n,s,o,e.side===Xo,a),l===null)return null;eb.copy(a),eb.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(eb);return c<t.near||c>t.far?null:{distance:c,point:eb.clone(),object:i}}function tb(i,e,t,r,n,s,o,a,l,c){i.getVertexPosition(a,up),i.getVertexPosition(l,hp),i.getVertexPosition(c,dp);const u=V_e(i,e,t,r,up,hp,dp,Q1);if(u){n&&(K1.fromBufferAttribute(n,a),Z1.fromBufferAttribute(n,l),J1.fromBufferAttribute(n,c),u.uv=V0.getInterpolation(Q1,up,hp,dp,K1,Z1,J1,new It)),s&&(K1.fromBufferAttribute(s,a),Z1.fromBufferAttribute(s,l),J1.fromBufferAttribute(s,c),u.uv2=V0.getInterpolation(Q1,up,hp,dp,K1,Z1,J1,new It)),o&&(zO.fromBufferAttribute(o,a),FO.fromBufferAttribute(o,l),BO.fromBufferAttribute(o,c),u.normal=V0.getInterpolation(Q1,up,hp,dp,zO,FO,BO,new me),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new me,materialIndex:0};V0.getNormal(up,hp,dp,h.normal),u.face=h}return u}let sv=class Xj extends on{constructor(e=1,t=1,r=1,n=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:s,depthSegments:o};const a=this;n=Math.floor(n),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let d=0,f=0;g("z","y","x",-1,-1,r,t,e,o,s,0),g("z","y","x",1,-1,r,t,-e,o,s,1),g("x","z","y",1,1,e,r,t,n,o,2),g("x","z","y",1,-1,e,r,-t,n,o,3),g("x","y","z",1,-1,e,t,r,n,s,4),g("x","y","z",-1,-1,e,t,-r,n,s,5),this.setIndex(l),this.setAttribute("position",new di(c,3)),this.setAttribute("normal",new di(u,3)),this.setAttribute("uv",new di(h,2));function g(v,m,p,y,_,x,w,S,A,k,M){const b=x/A,P=w/k,N=x/2,D=w/2,U=S/2,G=A+1,B=k+1;let Q=0,j=0;const X=new me;for(let ne=0;ne<B;ne++){const ge=ne*P-D;for(let pe=0;pe<G;pe++){const V=pe*b-N;X[v]=V*y,X[m]=ge*_,X[p]=U,c.push(X.x,X.y,X.z),X[v]=0,X[m]=0,X[p]=S>0?1:-1,u.push(X.x,X.y,X.z),h.push(pe/A),h.push(1-ne/k),Q+=1}}for(let ne=0;ne<k;ne++)for(let ge=0;ge<A;ge++){const pe=d+ge+G*ne,V=d+ge+G*(ne+1),Y=d+(ge+1)+G*(ne+1),ae=d+(ge+1)+G*ne;l.push(pe,V,ae),l.push(V,Y,ae),j+=6}a.addGroup(f,j,M),f+=j,d+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xj(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function ym(i){const e={};for(const t in i){e[t]={};for(const r in i[t]){const n=i[t][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?n.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=n.clone():Array.isArray(n)?e[t][r]=n.slice():e[t][r]=n}}return e}function Jr(i){const e={};for(let t=0;t<i.length;t++){const r=ym(i[t]);for(const n in r)e[n]=r[n]}return e}function j_e(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function Yj(i){return i.getRenderTarget()===null&&i.outputEncoding===qt?ao:dS}const H_e={clone:ym,merge:Jr};var G_e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,W_e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;let Hh=class extends Ls{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=G_e,this.fragmentShader=W_e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ym(e.uniforms),this.uniformsGroups=j_e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const s=this.uniforms[n].value;s&&s.isTexture?t.uniforms[n]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[n]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[n]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[n]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[n]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[n]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[n]={type:"m4",value:s.toArray()}:t.uniforms[n]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const n in this.extensions)this.extensions[n]===!0&&(r[n]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}};class Kj extends Li{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Pt,this.projectionMatrix=new Pt,this.projectionMatrixInverse=new Pt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let pr=class extends Kj{constructor(e=50,t=1,r=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=_m*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Nf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return _m*2*Math.atan(Math.tan(Nf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,n,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Nf*.5*this.fov)/this.zoom,r=2*t,n=this.aspect*r,s=-.5*n;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*n/l,t-=o.offsetY*r/c,n*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+n,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const pp=-90,fp=1;class q_e extends Li{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;const n=new pr(pp,fp,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(1,0,0),this.add(n);const s=new pr(pp,fp,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new pr(pp,fp,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new pr(pp,fp,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new pr(pp,fp,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new pr(pp,fp,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[n,s,o,a,l,c]=this.children,u=e.getRenderTarget(),h=e.toneMapping,d=e.xr.enabled;e.toneMapping=nl,e.xr.enabled=!1;const f=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,n),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=f,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=h,e.xr.enabled=d,r.texture.needsPMREMUpdate=!0}}class Zj extends Jn{constructor(e,t,r,n,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:pm,super(e,t,r,n,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class X_e extends jh{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},n=[r,r,r,r,r,r];this.texture=new Zj(n,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Cr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},n=new sv(5,5,5),s=new Hh({name:"CubemapFromEquirect",uniforms:ym(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:xn,blending:Lc});s.uniforms.tEquirect.value=t;const o=new Wi(n,s),a=t.minFilter;return t.minFilter===fl&&(t.minFilter=Cr),new q_e(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,n){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,n);e.setRenderTarget(s)}}const _E=new me,Y_e=new me,K_e=new Yt;let ju=class{constructor(e=new me(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const n=_E.subVectors(r,t).cross(Y_e.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(_E),n=this.normal.dot(r);if(n===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/n;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||K_e.getNormalMatrix(e),n=this.coplanarPoint(_E).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-n.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Lu=new Rl,ib=new me;class _L{constructor(e=new ju,t=new ju,r=new ju,n=new ju,s=new ju,o=new ju){this.planes=[e,t,r,n,s,o]}set(e,t,r,n,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(n),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,n=r[0],s=r[1],o=r[2],a=r[3],l=r[4],c=r[5],u=r[6],h=r[7],d=r[8],f=r[9],g=r[10],v=r[11],m=r[12],p=r[13],y=r[14],_=r[15];return t[0].setComponents(a-n,h-l,v-d,_-m).normalize(),t[1].setComponents(a+n,h+l,v+d,_+m).normalize(),t[2].setComponents(a+s,h+c,v+f,_+p).normalize(),t[3].setComponents(a-s,h-c,v-f,_-p).normalize(),t[4].setComponents(a-o,h-u,v-g,_-y).normalize(),t[5].setComponents(a+o,h+u,v+g,_+y).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Lu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Lu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Lu)}intersectsSprite(e){return Lu.center.set(0,0,0),Lu.radius=.7071067811865476,Lu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Lu)}intersectsSphere(e){const t=this.planes,r=e.center,n=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<n)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const n=t[r];if(ib.x=n.normal.x>0?e.max.x:e.min.x,ib.y=n.normal.y>0?e.max.y:e.min.y,ib.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(ib)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Jj(){let i=null,e=!1,t=null,r=null;function n(s,o){t(s,o),r=i.requestAnimationFrame(n)}return{start:function(){e!==!0&&t!==null&&(r=i.requestAnimationFrame(n),e=!0)},stop:function(){i.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function Z_e(i,e){const t=e.isWebGL2,r=new WeakMap;function n(c,u){const h=c.array,d=c.usage,f=i.createBuffer();i.bindBuffer(u,f),i.bufferData(u,h,d),c.onUploadCallback();let g;if(h instanceof Float32Array)g=5126;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)g=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else g=5123;else if(h instanceof Int16Array)g=5122;else if(h instanceof Uint32Array)g=5125;else if(h instanceof Int32Array)g=5124;else if(h instanceof Int8Array)g=5120;else if(h instanceof Uint8Array)g=5121;else if(h instanceof Uint8ClampedArray)g=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:f,type:g,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,h){const d=u.array,f=u.updateRange;i.bindBuffer(h,c),f.count===-1?i.bufferSubData(h,0,d):(t?i.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):i.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(i.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const d=r.get(c);(!d||d.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const h=r.get(c);h===void 0?r.set(c,n(c,u)):h.version<c.version&&(s(h.buffer,c,u),h.version=c.version)}return{get:o,remove:a,update:l}}class fS extends on{constructor(e=1,t=1,r=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(n),c=a+1,u=l+1,h=e/a,d=t/l,f=[],g=[],v=[],m=[];for(let p=0;p<u;p++){const y=p*d-o;for(let _=0;_<c;_++){const x=_*h-s;g.push(x,-y,0),v.push(0,0,1),m.push(_/a),m.push(1-p/l)}}for(let p=0;p<l;p++)for(let y=0;y<a;y++){const _=y+c*p,x=y+c*(p+1),w=y+1+c*(p+1),S=y+1+c*p;f.push(_,x,S),f.push(x,w,S)}this.setIndex(f),this.setAttribute("position",new di(g,3)),this.setAttribute("normal",new di(v,3)),this.setAttribute("uv",new di(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fS(e.width,e.height,e.widthSegments,e.heightSegments)}}var J_e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Q_e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,eye=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,tye=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,iye=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,rye=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,nye="vec3 transformed = vec3( position );",sye=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,oye=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,aye=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,lye=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,cye=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,uye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,hye=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,dye=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,pye=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,fye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,mye=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,gye=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,_ye=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,yye=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,vye=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,bye=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,xye=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,wye=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Mye=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Sye="gl_FragColor = linearToOutputTexel( gl_FragColor );",Tye=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Eye=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Aye=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,kye=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Cye=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,$ye=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Lye=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Rye=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Pye=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Nye=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Iye=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Dye=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Oye=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Uye=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,zye=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Fye=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Bye=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Vye=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,jye=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Hye=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Gye=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Wye=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,qye=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Xye=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Yye=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Kye=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Zye=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Jye=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Qye=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,eve=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,tve=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,ive=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,rve=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,nve=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,sve=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ove=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,ave=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,lve=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,cve=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,uve=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,hve=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,dve=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,pve=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,fve=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,mve=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,gve=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,_ve=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,yve=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,vve=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,bve=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,xve=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,wve=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Mve=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Sve=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Tve=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Eve=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Ave=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,kve=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Cve=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,$ve=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Lve=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Rve=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Pve=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Nve=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Ive=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Dve=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Ove=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Uve=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,zve=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Fve=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Bve=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,Vve=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,jve=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Hve=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_UV2
	attribute vec2 uv2;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Gve=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Wve=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const qve=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Xve=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Yve=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Kve=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Zve=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Jve=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Qve=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,e1e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,t1e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,i1e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,r1e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,n1e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,s1e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,o1e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,a1e=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,l1e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,c1e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,u1e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,h1e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,d1e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,p1e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,f1e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,m1e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,g1e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_1e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,y1e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,v1e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,b1e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,x1e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,w1e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,M1e=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,S1e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,T1e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,E1e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,zt={alphamap_fragment:J_e,alphamap_pars_fragment:Q_e,alphatest_fragment:eye,alphatest_pars_fragment:tye,aomap_fragment:iye,aomap_pars_fragment:rye,begin_vertex:nye,beginnormal_vertex:sye,bsdfs:oye,iridescence_fragment:aye,bumpmap_pars_fragment:lye,clipping_planes_fragment:cye,clipping_planes_pars_fragment:uye,clipping_planes_pars_vertex:hye,clipping_planes_vertex:dye,color_fragment:pye,color_pars_fragment:fye,color_pars_vertex:mye,color_vertex:gye,common:_ye,cube_uv_reflection_fragment:yye,defaultnormal_vertex:vye,displacementmap_pars_vertex:bye,displacementmap_vertex:xye,emissivemap_fragment:wye,emissivemap_pars_fragment:Mye,encodings_fragment:Sye,encodings_pars_fragment:Tye,envmap_fragment:Eye,envmap_common_pars_fragment:Aye,envmap_pars_fragment:kye,envmap_pars_vertex:Cye,envmap_physical_pars_fragment:Bye,envmap_vertex:$ye,fog_vertex:Lye,fog_pars_vertex:Rye,fog_fragment:Pye,fog_pars_fragment:Nye,gradientmap_pars_fragment:Iye,lightmap_fragment:Dye,lightmap_pars_fragment:Oye,lights_lambert_fragment:Uye,lights_lambert_pars_fragment:zye,lights_pars_begin:Fye,lights_toon_fragment:Vye,lights_toon_pars_fragment:jye,lights_phong_fragment:Hye,lights_phong_pars_fragment:Gye,lights_physical_fragment:Wye,lights_physical_pars_fragment:qye,lights_fragment_begin:Xye,lights_fragment_maps:Yye,lights_fragment_end:Kye,logdepthbuf_fragment:Zye,logdepthbuf_pars_fragment:Jye,logdepthbuf_pars_vertex:Qye,logdepthbuf_vertex:eve,map_fragment:tve,map_pars_fragment:ive,map_particle_fragment:rve,map_particle_pars_fragment:nve,metalnessmap_fragment:sve,metalnessmap_pars_fragment:ove,morphcolor_vertex:ave,morphnormal_vertex:lve,morphtarget_pars_vertex:cve,morphtarget_vertex:uve,normal_fragment_begin:hve,normal_fragment_maps:dve,normal_pars_fragment:pve,normal_pars_vertex:fve,normal_vertex:mve,normalmap_pars_fragment:gve,clearcoat_normal_fragment_begin:_ve,clearcoat_normal_fragment_maps:yve,clearcoat_pars_fragment:vve,iridescence_pars_fragment:bve,output_fragment:xve,packing:wve,premultiplied_alpha_fragment:Mve,project_vertex:Sve,dithering_fragment:Tve,dithering_pars_fragment:Eve,roughnessmap_fragment:Ave,roughnessmap_pars_fragment:kve,shadowmap_pars_fragment:Cve,shadowmap_pars_vertex:$ve,shadowmap_vertex:Lve,shadowmask_pars_fragment:Rve,skinbase_vertex:Pve,skinning_pars_vertex:Nve,skinning_vertex:Ive,skinnormal_vertex:Dve,specularmap_fragment:Ove,specularmap_pars_fragment:Uve,tonemapping_fragment:zve,tonemapping_pars_fragment:Fve,transmission_fragment:Bve,transmission_pars_fragment:Vve,uv_pars_fragment:jve,uv_pars_vertex:Hve,uv_vertex:Gve,worldpos_vertex:Wve,background_vert:qve,background_frag:Xve,backgroundCube_vert:Yve,backgroundCube_frag:Kve,cube_vert:Zve,cube_frag:Jve,depth_vert:Qve,depth_frag:e1e,distanceRGBA_vert:t1e,distanceRGBA_frag:i1e,equirect_vert:r1e,equirect_frag:n1e,linedashed_vert:s1e,linedashed_frag:o1e,meshbasic_vert:a1e,meshbasic_frag:l1e,meshlambert_vert:c1e,meshlambert_frag:u1e,meshmatcap_vert:h1e,meshmatcap_frag:d1e,meshnormal_vert:p1e,meshnormal_frag:f1e,meshphong_vert:m1e,meshphong_frag:g1e,meshphysical_vert:_1e,meshphysical_frag:y1e,meshtoon_vert:v1e,meshtoon_frag:b1e,points_vert:x1e,points_frag:w1e,shadow_vert:M1e,shadow_frag:S1e,sprite_vert:T1e,sprite_frag:E1e},rt={common:{diffuse:{value:new At(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Yt},alphaMap:{value:null},alphaMapTransform:{value:new Yt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Yt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Yt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Yt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Yt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Yt},normalScale:{value:new It(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Yt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Yt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Yt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Yt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new At(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new At(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Yt}},sprite:{diffuse:{value:new At(16777215)},opacity:{value:1},center:{value:new It(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Yt},alphaMap:{value:null},alphaTest:{value:0}}},zo={basic:{uniforms:Jr([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.fog]),vertexShader:zt.meshbasic_vert,fragmentShader:zt.meshbasic_frag},lambert:{uniforms:Jr([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,rt.lights,{emissive:{value:new At(0)}}]),vertexShader:zt.meshlambert_vert,fragmentShader:zt.meshlambert_frag},phong:{uniforms:Jr([rt.common,rt.specularmap,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,rt.lights,{emissive:{value:new At(0)},specular:{value:new At(1118481)},shininess:{value:30}}]),vertexShader:zt.meshphong_vert,fragmentShader:zt.meshphong_frag},standard:{uniforms:Jr([rt.common,rt.envmap,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.roughnessmap,rt.metalnessmap,rt.fog,rt.lights,{emissive:{value:new At(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:zt.meshphysical_vert,fragmentShader:zt.meshphysical_frag},toon:{uniforms:Jr([rt.common,rt.aomap,rt.lightmap,rt.emissivemap,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.gradientmap,rt.fog,rt.lights,{emissive:{value:new At(0)}}]),vertexShader:zt.meshtoon_vert,fragmentShader:zt.meshtoon_frag},matcap:{uniforms:Jr([rt.common,rt.bumpmap,rt.normalmap,rt.displacementmap,rt.fog,{matcap:{value:null}}]),vertexShader:zt.meshmatcap_vert,fragmentShader:zt.meshmatcap_frag},points:{uniforms:Jr([rt.points,rt.fog]),vertexShader:zt.points_vert,fragmentShader:zt.points_frag},dashed:{uniforms:Jr([rt.common,rt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:zt.linedashed_vert,fragmentShader:zt.linedashed_frag},depth:{uniforms:Jr([rt.common,rt.displacementmap]),vertexShader:zt.depth_vert,fragmentShader:zt.depth_frag},normal:{uniforms:Jr([rt.common,rt.bumpmap,rt.normalmap,rt.displacementmap,{opacity:{value:1}}]),vertexShader:zt.meshnormal_vert,fragmentShader:zt.meshnormal_frag},sprite:{uniforms:Jr([rt.sprite,rt.fog]),vertexShader:zt.sprite_vert,fragmentShader:zt.sprite_frag},background:{uniforms:{uvTransform:{value:new Yt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:zt.background_vert,fragmentShader:zt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:zt.backgroundCube_vert,fragmentShader:zt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:zt.cube_vert,fragmentShader:zt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:zt.equirect_vert,fragmentShader:zt.equirect_frag},distanceRGBA:{uniforms:Jr([rt.common,rt.displacementmap,{referencePosition:{value:new me},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:zt.distanceRGBA_vert,fragmentShader:zt.distanceRGBA_frag},shadow:{uniforms:Jr([rt.lights,rt.fog,{color:{value:new At(0)},opacity:{value:1}}]),vertexShader:zt.shadow_vert,fragmentShader:zt.shadow_frag}};zo.physical={uniforms:Jr([zo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Yt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Yt},clearcoatNormalScale:{value:new It(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Yt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Yt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Yt},sheen:{value:0},sheenColor:{value:new At(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Yt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Yt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Yt},transmissionSamplerSize:{value:new It},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Yt},attenuationDistance:{value:0},attenuationColor:{value:new At(0)},specularColor:{value:new At(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Yt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Yt}}]),vertexShader:zt.meshphysical_vert,fragmentShader:zt.meshphysical_frag};const rb={r:0,b:0,g:0};function A1e(i,e,t,r,n,s,o){const a=new At(0);let l=s===!0?0:1,c,u,h=null,d=0,f=null;function g(m,p){let y=!1,_=p.isScene===!0?p.background:null;_&&_.isTexture&&(_=(p.backgroundBlurriness>0?t:e).get(_));const x=i.xr,w=x.getSession&&x.getSession();w&&w.environmentBlendMode==="additive"&&(_=null),_===null?v(a,l):_&&_.isColor&&(v(_,1),y=!0),(i.autoClear||y)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),_&&(_.isCubeTexture||_.mapping===uS)?(u===void 0&&(u=new Wi(new sv(1,1,1),new Hh({name:"BackgroundCubeMaterial",uniforms:ym(zo.backgroundCube.uniforms),vertexShader:zo.backgroundCube.vertexShader,fragmentShader:zo.backgroundCube.fragmentShader,side:xn,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(S,A,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(u)),u.material.uniforms.envMap.value=_,u.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,u.material.toneMapped=_.encoding!==qt,(h!==_||d!==_.version||f!==i.toneMapping)&&(u.material.needsUpdate=!0,h=_,d=_.version,f=i.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null)):_&&_.isTexture&&(c===void 0&&(c=new Wi(new fS(2,2),new Hh({name:"BackgroundMaterial",uniforms:ym(zo.background.uniforms),vertexShader:zo.background.vertexShader,fragmentShader:zo.background.fragmentShader,side:Xo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(c)),c.material.uniforms.t2D.value=_,c.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,c.material.toneMapped=_.encoding!==qt,_.matrixAutoUpdate===!0&&_.updateMatrix(),c.material.uniforms.uvTransform.value.copy(_.matrix),(h!==_||d!==_.version||f!==i.toneMapping)&&(c.material.needsUpdate=!0,h=_,d=_.version,f=i.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null))}function v(m,p){m.getRGB(rb,Yj(i)),r.buffers.color.setClear(rb.r,rb.g,rb.b,p,o)}return{getClearColor:function(){return a},setClearColor:function(m,p=1){a.set(m),l=p,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(m){l=m,v(a,l)},render:g}}function k1e(i,e,t,r){const n=i.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=m(null);let c=l,u=!1;function h(U,G,B,Q,j){let X=!1;if(o){const ne=v(Q,B,G);c!==ne&&(c=ne,f(c.object)),X=p(U,Q,B,j),X&&y(U,Q,B,j)}else{const ne=G.wireframe===!0;(c.geometry!==Q.id||c.program!==B.id||c.wireframe!==ne)&&(c.geometry=Q.id,c.program=B.id,c.wireframe=ne,X=!0)}j!==null&&t.update(j,34963),(X||u)&&(u=!1,k(U,G,B,Q),j!==null&&i.bindBuffer(34963,t.get(j).buffer))}function d(){return r.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}function f(U){return r.isWebGL2?i.bindVertexArray(U):s.bindVertexArrayOES(U)}function g(U){return r.isWebGL2?i.deleteVertexArray(U):s.deleteVertexArrayOES(U)}function v(U,G,B){const Q=B.wireframe===!0;let j=a[U.id];j===void 0&&(j={},a[U.id]=j);let X=j[G.id];X===void 0&&(X={},j[G.id]=X);let ne=X[Q];return ne===void 0&&(ne=m(d()),X[Q]=ne),ne}function m(U){const G=[],B=[],Q=[];for(let j=0;j<n;j++)G[j]=0,B[j]=0,Q[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:G,enabledAttributes:B,attributeDivisors:Q,object:U,attributes:{},index:null}}function p(U,G,B,Q){const j=c.attributes,X=G.attributes;let ne=0;const ge=B.getAttributes();for(const pe in ge)if(ge[pe].location>=0){const V=j[pe];let Y=X[pe];if(Y===void 0&&(pe==="instanceMatrix"&&U.instanceMatrix&&(Y=U.instanceMatrix),pe==="instanceColor"&&U.instanceColor&&(Y=U.instanceColor)),V===void 0||V.attribute!==Y||Y&&V.data!==Y.data)return!0;ne++}return c.attributesNum!==ne||c.index!==Q}function y(U,G,B,Q){const j={},X=G.attributes;let ne=0;const ge=B.getAttributes();for(const pe in ge)if(ge[pe].location>=0){let V=X[pe];V===void 0&&(pe==="instanceMatrix"&&U.instanceMatrix&&(V=U.instanceMatrix),pe==="instanceColor"&&U.instanceColor&&(V=U.instanceColor));const Y={};Y.attribute=V,V&&V.data&&(Y.data=V.data),j[pe]=Y,ne++}c.attributes=j,c.attributesNum=ne,c.index=Q}function _(){const U=c.newAttributes;for(let G=0,B=U.length;G<B;G++)U[G]=0}function x(U){w(U,0)}function w(U,G){const B=c.newAttributes,Q=c.enabledAttributes,j=c.attributeDivisors;B[U]=1,Q[U]===0&&(i.enableVertexAttribArray(U),Q[U]=1),j[U]!==G&&((r.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](U,G),j[U]=G)}function S(){const U=c.newAttributes,G=c.enabledAttributes;for(let B=0,Q=G.length;B<Q;B++)G[B]!==U[B]&&(i.disableVertexAttribArray(B),G[B]=0)}function A(U,G,B,Q,j,X){r.isWebGL2===!0&&(B===5124||B===5125)?i.vertexAttribIPointer(U,G,B,j,X):i.vertexAttribPointer(U,G,B,Q,j,X)}function k(U,G,B,Q){if(r.isWebGL2===!1&&(U.isInstancedMesh||Q.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const j=Q.attributes,X=B.getAttributes(),ne=G.defaultAttributeValues;for(const ge in X){const pe=X[ge];if(pe.location>=0){let V=j[ge];if(V===void 0&&(ge==="instanceMatrix"&&U.instanceMatrix&&(V=U.instanceMatrix),ge==="instanceColor"&&U.instanceColor&&(V=U.instanceColor)),V!==void 0){const Y=V.normalized,ae=V.itemSize,J=t.get(V);if(J===void 0)continue;const z=J.buffer,_e=J.type,ee=J.bytesPerElement;if(V.isInterleavedBufferAttribute){const te=V.data,be=te.stride,oe=V.offset;if(te.isInstancedInterleavedBuffer){for(let Te=0;Te<pe.locationSize;Te++)w(pe.location+Te,te.meshPerAttribute);U.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let Te=0;Te<pe.locationSize;Te++)x(pe.location+Te);i.bindBuffer(34962,z);for(let Te=0;Te<pe.locationSize;Te++)A(pe.location+Te,ae/pe.locationSize,_e,Y,be*ee,(oe+ae/pe.locationSize*Te)*ee)}else{if(V.isInstancedBufferAttribute){for(let te=0;te<pe.locationSize;te++)w(pe.location+te,V.meshPerAttribute);U.isInstancedMesh!==!0&&Q._maxInstanceCount===void 0&&(Q._maxInstanceCount=V.meshPerAttribute*V.count)}else for(let te=0;te<pe.locationSize;te++)x(pe.location+te);i.bindBuffer(34962,z);for(let te=0;te<pe.locationSize;te++)A(pe.location+te,ae/pe.locationSize,_e,Y,ae*ee,ae/pe.locationSize*te*ee)}}else if(ne!==void 0){const Y=ne[ge];if(Y!==void 0)switch(Y.length){case 2:i.vertexAttrib2fv(pe.location,Y);break;case 3:i.vertexAttrib3fv(pe.location,Y);break;case 4:i.vertexAttrib4fv(pe.location,Y);break;default:i.vertexAttrib1fv(pe.location,Y)}}}}S()}function M(){N();for(const U in a){const G=a[U];for(const B in G){const Q=G[B];for(const j in Q)g(Q[j].object),delete Q[j];delete G[B]}delete a[U]}}function b(U){if(a[U.id]===void 0)return;const G=a[U.id];for(const B in G){const Q=G[B];for(const j in Q)g(Q[j].object),delete Q[j];delete G[B]}delete a[U.id]}function P(U){for(const G in a){const B=a[G];if(B[U.id]===void 0)continue;const Q=B[U.id];for(const j in Q)g(Q[j].object),delete Q[j];delete B[U.id]}}function N(){D(),u=!0,c!==l&&(c=l,f(c.object))}function D(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:N,resetDefaultState:D,dispose:M,releaseStatesOfGeometry:b,releaseStatesOfProgram:P,initAttributes:_,enableAttribute:x,disableUnusedAttributes:S}}function C1e(i,e,t,r){const n=r.isWebGL2;let s;function o(c){s=c}function a(c,u){i.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,h){if(h===0)return;let d,f;if(n)d=i,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](s,c,u,h),t.update(u,s,h)}this.setMode=o,this.render=a,this.renderInstances=l}function $1e(i,e,t){let r;function n(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const A=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(A){if(A==="highp"){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";A="mediump"}return A==="mediump"&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&i.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,h=i.getParameter(34930),d=i.getParameter(35660),f=i.getParameter(3379),g=i.getParameter(34076),v=i.getParameter(34921),m=i.getParameter(36347),p=i.getParameter(36348),y=i.getParameter(36349),_=d>0,x=o||e.has("OES_texture_float"),w=_&&x,S=o?i.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:n,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:m,maxVaryings:p,maxFragmentUniforms:y,vertexTextures:_,floatFragmentTextures:x,floatVertexTextures:w,maxSamples:S}}function L1e(i){const e=this;let t=null,r=0,n=!1,s=!1;const o=new ju,a=new Yt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||r!==0||n;return n=d,r=h.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,f){const g=h.clippingPlanes,v=h.clipIntersection,m=h.clipShadows,p=i.get(h);if(!n||g===null||g.length===0||s&&!m)s?u(null):c();else{const y=s?0:r,_=y*4;let x=p.clippingState||null;l.value=x,x=u(g,d,_,f);for(let w=0;w!==_;++w)x[w]=t[w];p.clippingState=x,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=y}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(h,d,f,g){const v=h!==null?h.length:0;let m=null;if(v!==0){if(m=l.value,g!==!0||m===null){const p=f+v*4,y=d.matrixWorldInverse;a.getNormalMatrix(y),(m===null||m.length<p)&&(m=new Float32Array(p));for(let _=0,x=f;_!==v;++_,x+=4)o.copy(h[_]).applyMatrix4(y,a),o.normal.toArray(m,x),m[x+3]=o.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,m}}function R1e(i){let e=new WeakMap;function t(o,a){return a===ak?o.mapping=pm:a===lk&&(o.mapping=fm),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===ak||a===lk)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new X_e(l.height/2);return c.fromEquirectangularTexture(i,o),e.set(o,c),o.addEventListener("dispose",n),t(c.texture,o.mapping)}else return null}}return o}function n(o){const a=o.target;a.removeEventListener("dispose",n);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class mS extends Kj{constructor(e=-1,t=1,r=1,n=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=n,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,n,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=n+t,l=n-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const hf=4,VO=[.125,.215,.35,.446,.526,.582],qu=20,yE=new mS,jO=new At;let vE=null;const Hu=(1+Math.sqrt(5))/2,mp=1/Hu,HO=[new me(1,1,1),new me(-1,1,1),new me(1,1,-1),new me(-1,1,-1),new me(0,Hu,mp),new me(0,Hu,-mp),new me(mp,0,Hu),new me(-mp,0,Hu),new me(Hu,mp,0),new me(-Hu,mp,0)];class GO{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,n=100){vE=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,n,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=XO(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=qO(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(vE),e.scissorTest=!1,nb(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===pm||e.mapping===fm?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),vE=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Cr,minFilter:Cr,generateMipmaps:!1,type:fy,format:Ts,encoding:Vh,depthBuffer:!1},n=WO(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=WO(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=P1e(s)),this._blurMaterial=N1e(s,e,t)}return n}_compileMaterial(e){const t=new Wi(this._lodPlanes[0],e);this._renderer.compile(t,yE)}_sceneToCubeUV(e,t,r,n){const s=new pr(90,1,t,r),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,u=l.toneMapping;l.getClearColor(jO),l.toneMapping=nl,l.autoClear=!1;const h=new go({name:"PMREM.Background",side:xn,depthWrite:!1,depthTest:!1}),d=new Wi(new sv,h);let f=!1;const g=e.background;g?g.isColor&&(h.color.copy(g),e.background=null,f=!0):(h.color.copy(jO),f=!0);for(let v=0;v<6;v++){const m=v%3;m===0?(s.up.set(0,o[v],0),s.lookAt(a[v],0,0)):m===1?(s.up.set(0,0,o[v]),s.lookAt(0,a[v],0)):(s.up.set(0,o[v],0),s.lookAt(0,0,a[v]));const p=this._cubeSize;nb(n,m*p,v>2?p:0,p,p),l.setRenderTarget(n),f&&l.render(d,s),l.render(e,s)}d.geometry.dispose(),d.material.dispose(),l.toneMapping=u,l.autoClear=c,e.background=g}_textureToCubeUV(e,t){const r=this._renderer,n=e.mapping===pm||e.mapping===fm;n?(this._cubemapMaterial===null&&(this._cubemapMaterial=XO()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=qO());const s=n?this._cubemapMaterial:this._equirectMaterial,o=new Wi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;nb(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,yE)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){const s=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),o=HO[(n-1)%HO.length];this._blur(e,n-1,n,s,o)}t.autoClear=r}_blur(e,t,r,n,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,n,"latitudinal",s),this._halfBlur(o,e,r,r,n,"longitudinal",s)}_halfBlur(e,t,r,n,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new Wi(this._lodPlanes[n],c),d=c.uniforms,f=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*qu-1),v=s/g,m=isFinite(s)?1+Math.floor(u*v):qu;m>qu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${qu}`);const p=[];let y=0;for(let A=0;A<qu;++A){const k=A/v,M=Math.exp(-k*k/2);p.push(M),A===0?y+=M:A<m&&(y+=2*M)}for(let A=0;A<p.length;A++)p[A]=p[A]/y;d.envMap.value=e.texture,d.samples.value=m,d.weights.value=p,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:_}=this;d.dTheta.value=g,d.mipInt.value=_-r;const x=this._sizeLods[n],w=3*x*(n>_-hf?n-_+hf:0),S=4*(this._cubeSize-x);nb(t,w,S,3*x,2*x),l.setRenderTarget(t),l.render(h,yE)}}function P1e(i){const e=[],t=[],r=[];let n=i;const s=i-hf+1+VO.length;for(let o=0;o<s;o++){const a=Math.pow(2,n);t.push(a);let l=1/a;o>i-hf?l=VO[o-i+hf-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,h=1+c,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,g=6,v=3,m=2,p=1,y=new Float32Array(v*g*f),_=new Float32Array(m*g*f),x=new Float32Array(p*g*f);for(let S=0;S<f;S++){const A=S%3*2/3-1,k=S>2?0:-1,M=[A,k,0,A+2/3,k,0,A+2/3,k+1,0,A,k,0,A+2/3,k+1,0,A,k+1,0];y.set(M,v*g*S),_.set(d,m*g*S);const b=[S,S,S,S,S,S];x.set(b,p*g*S)}const w=new on;w.setAttribute("position",new gr(y,v)),w.setAttribute("uv",new gr(_,m)),w.setAttribute("faceIndex",new gr(x,p)),e.push(w),n>hf&&n--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function WO(i,e,t){const r=new jh(i,e,t);return r.texture.mapping=uS,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function nb(i,e,t,r,n){i.viewport.set(e,t,r,n),i.scissor.set(e,t,r,n)}function N1e(i,e,t){const r=new Float32Array(qu),n=new me(0,1,0);return new Hh({name:"SphericalGaussianBlur",defines:{n:qu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:yL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Lc,depthTest:!1,depthWrite:!1})}function qO(){return new Hh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:yL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Lc,depthTest:!1,depthWrite:!1})}function XO(){return new Hh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:yL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Lc,depthTest:!1,depthWrite:!1})}function yL(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function I1e(i){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===ak||l===lk,u=l===pm||l===fm;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new GO(i)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(c&&h&&h.height>0||u&&h&&n(h)){t===null&&(t=new GO(i));const d=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function n(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function D1e(i){const e={};function t(r){if(e[r]!==void 0)return e[r];let n;switch(r){case"WEBGL_depth_texture":n=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=i.getExtension(r)}return e[r]=n,n}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const n=t(r);return n===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),n}}}function O1e(i,e,t,r){const n={},s=new WeakMap;function o(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const g in d.attributes)e.remove(d.attributes[g]);d.removeEventListener("dispose",o),delete n[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(h,d){return n[d.id]===!0||(d.addEventListener("dispose",o),n[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const g in d)e.update(d[g],34962);const f=h.morphAttributes;for(const g in f){const v=f[g];for(let m=0,p=v.length;m<p;m++)e.update(v[m],34962)}}function c(h){const d=[],f=h.index,g=h.attributes.position;let v=0;if(f!==null){const y=f.array;v=f.version;for(let _=0,x=y.length;_<x;_+=3){const w=y[_+0],S=y[_+1],A=y[_+2];d.push(w,S,S,A,A,w)}}else{const y=g.array;v=g.version;for(let _=0,x=y.length/3-1;_<x;_+=3){const w=_+0,S=_+1,A=_+2;d.push(w,S,S,A,A,w)}}const m=new(Oj(d)?Wj:Gj)(d,1);m.version=v;const p=s.get(h);p&&e.remove(p),s.set(h,m)}function u(h){const d=s.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&c(h)}else c(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function U1e(i,e,t,r){const n=r.isWebGL2;let s;function o(d){s=d}let a,l;function c(d){a=d.type,l=d.bytesPerElement}function u(d,f){i.drawElements(s,f,a,d*l),t.update(f,s,1)}function h(d,f,g){if(g===0)return;let v,m;if(n)v=i,m="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[m](s,f,a,d*l,g),t.update(f,s,g)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=h}function z1e(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function n(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:n,update:r}}function F1e(i,e){return i[0]-e[0]}function B1e(i,e){return Math.abs(e[1])-Math.abs(i[1])}function V1e(i,e,t){const r={},n=new Float32Array(8),s=new WeakMap,o=new ui,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,h){const d=c.morphTargetInfluences;if(e.isWebGL2===!0){const f=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,g=f!==void 0?f.length:0;let v=s.get(u);if(v===void 0||v.count!==g){let y=function(){D.dispose(),s.delete(u),u.removeEventListener("dispose",y)};v!==void 0&&v.texture.dispose();const _=u.morphAttributes.position!==void 0,x=u.morphAttributes.normal!==void 0,w=u.morphAttributes.color!==void 0,S=u.morphAttributes.position||[],A=u.morphAttributes.normal||[],k=u.morphAttributes.color||[];let M=0;_===!0&&(M=1),x===!0&&(M=2),w===!0&&(M=3);let b=u.attributes.position.count*M,P=1;b>e.maxTextureSize&&(P=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);const N=new Float32Array(b*P*4*g),D=new Fj(N,b,P,g);D.type=bc,D.needsUpdate=!0;const U=M*4;for(let G=0;G<g;G++){const B=S[G],Q=A[G],j=k[G],X=b*P*4*G;for(let ne=0;ne<B.count;ne++){const ge=ne*U;_===!0&&(o.fromBufferAttribute(B,ne),N[X+ge+0]=o.x,N[X+ge+1]=o.y,N[X+ge+2]=o.z,N[X+ge+3]=0),x===!0&&(o.fromBufferAttribute(Q,ne),N[X+ge+4]=o.x,N[X+ge+5]=o.y,N[X+ge+6]=o.z,N[X+ge+7]=0),w===!0&&(o.fromBufferAttribute(j,ne),N[X+ge+8]=o.x,N[X+ge+9]=o.y,N[X+ge+10]=o.z,N[X+ge+11]=j.itemSize===4?o.w:1)}}v={count:g,texture:D,size:new It(b,P)},s.set(u,v),u.addEventListener("dispose",y)}let m=0;for(let y=0;y<d.length;y++)m+=d[y];const p=u.morphTargetsRelative?1:1-m;h.getUniforms().setValue(i,"morphTargetBaseInfluence",p),h.getUniforms().setValue(i,"morphTargetInfluences",d),h.getUniforms().setValue(i,"morphTargetsTexture",v.texture,t),h.getUniforms().setValue(i,"morphTargetsTextureSize",v.size)}else{const f=d===void 0?0:d.length;let g=r[u.id];if(g===void 0||g.length!==f){g=[];for(let _=0;_<f;_++)g[_]=[_,0];r[u.id]=g}for(let _=0;_<f;_++){const x=g[_];x[0]=_,x[1]=d[_]}g.sort(B1e);for(let _=0;_<8;_++)_<f&&g[_][1]?(a[_][0]=g[_][0],a[_][1]=g[_][1]):(a[_][0]=Number.MAX_SAFE_INTEGER,a[_][1]=0);a.sort(F1e);const v=u.morphAttributes.position,m=u.morphAttributes.normal;let p=0;for(let _=0;_<8;_++){const x=a[_],w=x[0],S=x[1];w!==Number.MAX_SAFE_INTEGER&&S?(v&&u.getAttribute("morphTarget"+_)!==v[w]&&u.setAttribute("morphTarget"+_,v[w]),m&&u.getAttribute("morphNormal"+_)!==m[w]&&u.setAttribute("morphNormal"+_,m[w]),n[_]=S,p+=S):(v&&u.hasAttribute("morphTarget"+_)===!0&&u.deleteAttribute("morphTarget"+_),m&&u.hasAttribute("morphNormal"+_)===!0&&u.deleteAttribute("morphNormal"+_),n[_]=0)}const y=u.morphTargetsRelative?1:1-p;h.getUniforms().setValue(i,"morphTargetBaseInfluence",y),h.getUniforms().setValue(i,"morphTargetInfluences",n)}}return{update:l}}function j1e(i,e,t,r){let n=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,h=e.get(l,u);return n.get(h)!==c&&(e.update(h),n.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),h}function o(){n=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const Qj=new Jn,eH=new Fj,tH=new R_e,iH=new Zj,YO=[],KO=[],ZO=new Float32Array(16),JO=new Float32Array(9),QO=new Float32Array(4);function Ym(i,e,t){const r=i[0];if(r<=0||r>0)return i;const n=e*t;let s=YO[n];if(s===void 0&&(s=new Float32Array(n),YO[n]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function er(i,e){if(i.length!==e.length)return!1;for(let t=0,r=i.length;t<r;t++)if(i[t]!==e[t])return!1;return!0}function tr(i,e){for(let t=0,r=e.length;t<r;t++)i[t]=e[t]}function gS(i,e){let t=KO[e];t===void 0&&(t=new Int32Array(e),KO[e]=t);for(let r=0;r!==e;++r)t[r]=i.allocateTextureUnit();return t}function H1e(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function G1e(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(er(t,e))return;i.uniform2fv(this.addr,e),tr(t,e)}}function W1e(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(er(t,e))return;i.uniform3fv(this.addr,e),tr(t,e)}}function q1e(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(er(t,e))return;i.uniform4fv(this.addr,e),tr(t,e)}}function X1e(i,e){const t=this.cache,r=e.elements;if(r===void 0){if(er(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),tr(t,e)}else{if(er(t,r))return;QO.set(r),i.uniformMatrix2fv(this.addr,!1,QO),tr(t,r)}}function Y1e(i,e){const t=this.cache,r=e.elements;if(r===void 0){if(er(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),tr(t,e)}else{if(er(t,r))return;JO.set(r),i.uniformMatrix3fv(this.addr,!1,JO),tr(t,r)}}function K1e(i,e){const t=this.cache,r=e.elements;if(r===void 0){if(er(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),tr(t,e)}else{if(er(t,r))return;ZO.set(r),i.uniformMatrix4fv(this.addr,!1,ZO),tr(t,r)}}function Z1e(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function J1e(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(er(t,e))return;i.uniform2iv(this.addr,e),tr(t,e)}}function Q1e(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(er(t,e))return;i.uniform3iv(this.addr,e),tr(t,e)}}function ebe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(er(t,e))return;i.uniform4iv(this.addr,e),tr(t,e)}}function tbe(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function ibe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(er(t,e))return;i.uniform2uiv(this.addr,e),tr(t,e)}}function rbe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(er(t,e))return;i.uniform3uiv(this.addr,e),tr(t,e)}}function nbe(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(er(t,e))return;i.uniform4uiv(this.addr,e),tr(t,e)}}function sbe(i,e,t){const r=this.cache,n=t.allocateTextureUnit();r[0]!==n&&(i.uniform1i(this.addr,n),r[0]=n),t.setTexture2D(e||Qj,n)}function obe(i,e,t){const r=this.cache,n=t.allocateTextureUnit();r[0]!==n&&(i.uniform1i(this.addr,n),r[0]=n),t.setTexture3D(e||tH,n)}function abe(i,e,t){const r=this.cache,n=t.allocateTextureUnit();r[0]!==n&&(i.uniform1i(this.addr,n),r[0]=n),t.setTextureCube(e||iH,n)}function lbe(i,e,t){const r=this.cache,n=t.allocateTextureUnit();r[0]!==n&&(i.uniform1i(this.addr,n),r[0]=n),t.setTexture2DArray(e||eH,n)}function cbe(i){switch(i){case 5126:return H1e;case 35664:return G1e;case 35665:return W1e;case 35666:return q1e;case 35674:return X1e;case 35675:return Y1e;case 35676:return K1e;case 5124:case 35670:return Z1e;case 35667:case 35671:return J1e;case 35668:case 35672:return Q1e;case 35669:case 35673:return ebe;case 5125:return tbe;case 36294:return ibe;case 36295:return rbe;case 36296:return nbe;case 35678:case 36198:case 36298:case 36306:case 35682:return sbe;case 35679:case 36299:case 36307:return obe;case 35680:case 36300:case 36308:case 36293:return abe;case 36289:case 36303:case 36311:case 36292:return lbe}}function ube(i,e){i.uniform1fv(this.addr,e)}function hbe(i,e){const t=Ym(e,this.size,2);i.uniform2fv(this.addr,t)}function dbe(i,e){const t=Ym(e,this.size,3);i.uniform3fv(this.addr,t)}function pbe(i,e){const t=Ym(e,this.size,4);i.uniform4fv(this.addr,t)}function fbe(i,e){const t=Ym(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function mbe(i,e){const t=Ym(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function gbe(i,e){const t=Ym(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function _be(i,e){i.uniform1iv(this.addr,e)}function ybe(i,e){i.uniform2iv(this.addr,e)}function vbe(i,e){i.uniform3iv(this.addr,e)}function bbe(i,e){i.uniform4iv(this.addr,e)}function xbe(i,e){i.uniform1uiv(this.addr,e)}function wbe(i,e){i.uniform2uiv(this.addr,e)}function Mbe(i,e){i.uniform3uiv(this.addr,e)}function Sbe(i,e){i.uniform4uiv(this.addr,e)}function Tbe(i,e,t){const r=this.cache,n=e.length,s=gS(t,n);er(r,s)||(i.uniform1iv(this.addr,s),tr(r,s));for(let o=0;o!==n;++o)t.setTexture2D(e[o]||Qj,s[o])}function Ebe(i,e,t){const r=this.cache,n=e.length,s=gS(t,n);er(r,s)||(i.uniform1iv(this.addr,s),tr(r,s));for(let o=0;o!==n;++o)t.setTexture3D(e[o]||tH,s[o])}function Abe(i,e,t){const r=this.cache,n=e.length,s=gS(t,n);er(r,s)||(i.uniform1iv(this.addr,s),tr(r,s));for(let o=0;o!==n;++o)t.setTextureCube(e[o]||iH,s[o])}function kbe(i,e,t){const r=this.cache,n=e.length,s=gS(t,n);er(r,s)||(i.uniform1iv(this.addr,s),tr(r,s));for(let o=0;o!==n;++o)t.setTexture2DArray(e[o]||eH,s[o])}function Cbe(i){switch(i){case 5126:return ube;case 35664:return hbe;case 35665:return dbe;case 35666:return pbe;case 35674:return fbe;case 35675:return mbe;case 35676:return gbe;case 5124:case 35670:return _be;case 35667:case 35671:return ybe;case 35668:case 35672:return vbe;case 35669:case 35673:return bbe;case 5125:return xbe;case 36294:return wbe;case 36295:return Mbe;case 36296:return Sbe;case 35678:case 36198:case 36298:case 36306:case 35682:return Tbe;case 35679:case 36299:case 36307:return Ebe;case 35680:case 36300:case 36308:case 36293:return Abe;case 36289:case 36303:case 36311:case 36292:return kbe}}class $be{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=cbe(t.type)}}class Lbe{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=Cbe(t.type)}}class Rbe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const n=this.seq;for(let s=0,o=n.length;s!==o;++s){const a=n[s];a.setValue(e,t[a.id],r)}}}const bE=/(\w+)(\])?(\[|\.)?/g;function e4(i,e){i.seq.push(e),i.map[e.id]=e}function Pbe(i,e,t){const r=i.name,n=r.length;for(bE.lastIndex=0;;){const s=bE.exec(r),o=bE.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===n){e4(t,c===void 0?new $be(a,i,e):new Lbe(a,i,e));break}else{let u=t.map[a];u===void 0&&(u=new Rbe(a),e4(t,u)),t=u}}}class wx{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,35718);for(let n=0;n<r;++n){const s=e.getActiveUniform(t,n),o=e.getUniformLocation(t,s.name);Pbe(s,o,this)}}setValue(e,t,r,n){const s=this.map[t];s!==void 0&&s.setValue(e,r,n)}setOptional(e,t,r){const n=t[r];n!==void 0&&this.setValue(e,r,n)}static upload(e,t,r,n){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,n)}}static seqWithValue(e,t){const r=[];for(let n=0,s=e.length;n!==s;++n){const o=e[n];o.id in t&&r.push(o)}return r}}function t4(i,e,t){const r=i.createShader(e);return i.shaderSource(r,t),i.compileShader(r),r}let Nbe=0;function Ibe(i,e){const t=i.split(`
`),r=[],n=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=n;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function Dbe(i){switch(i){case Vh:return["Linear","( value )"];case qt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}function i4(i,e,t){const r=i.getShaderParameter(e,35713),n=i.getShaderInfoLog(e).trim();if(r&&n==="")return"";const s=/ERROR: 0:(\d+)/.exec(n);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+n+`

`+Ibe(i.getShaderSource(e),o)}else return n}function Obe(i,e){const t=Dbe(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Ube(i,e){let t;switch(e){case F0e:t="Linear";break;case B0e:t="Reinhard";break;case V0e:t="OptimizedCineon";break;case j0e:t="ACESFilmic";break;case H0e:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function zbe(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(j0).join(`
`)}function Fbe(i){const e=[];for(const t in i){const r=i[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function Bbe(i,e){const t={},r=i.getProgramParameter(e,35721);for(let n=0;n<r;n++){const s=i.getActiveAttrib(e,n),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}function j0(i){return i!==""}function r4(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function n4(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Vbe=/^[ \t]*#include +<([\w\d./]+)>/gm;function mk(i){return i.replace(Vbe,jbe)}function jbe(i,e){const t=zt[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return mk(t)}const Hbe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function s4(i){return i.replace(Hbe,Gbe)}function Gbe(i,e,t,r){let n="";for(let s=parseInt(e);s<parseInt(t);s++)n+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return n}function o4(i){let e="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Wbe(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Tj?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===y0e?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===B0&&(e="SHADOWMAP_TYPE_VSM"),e}function qbe(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case pm:case fm:e="ENVMAP_TYPE_CUBE";break;case uS:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Xbe(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case fm:e="ENVMAP_MODE_REFRACTION";break}return e}function Ybe(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case cS:e="ENVMAP_BLENDING_MULTIPLY";break;case U0e:e="ENVMAP_BLENDING_MIX";break;case z0e:e="ENVMAP_BLENDING_ADD";break}return e}function Kbe(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Zbe(i,e,t,r){const n=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Wbe(t),c=qbe(t),u=Xbe(t),h=Ybe(t),d=Kbe(t),f=t.isWebGL2?"":zbe(t),g=Fbe(s),v=n.createProgram();let m,p,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(m=[g].filter(j0).join(`
`),m.length>0&&(m+=`
`),p=[f,g].filter(j0).join(`
`),p.length>0&&(p+=`
`)):(m=[o4(t),"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(j0).join(`
`),p=[f,o4(t),"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==nl?"#define TONE_MAPPING":"",t.toneMapping!==nl?zt.tonemapping_pars_fragment:"",t.toneMapping!==nl?Ube("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",zt.encodings_pars_fragment,Obe("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(j0).join(`
`)),o=mk(o),o=r4(o,t),o=n4(o,t),a=mk(a),a=r4(a,t),a=n4(a,t),o=s4(o),a=s4(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,p=["#define varying in",t.glslVersion===EO?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===EO?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);const _=y+m+o,x=y+p+a,w=t4(n,35633,_),S=t4(n,35632,x);if(n.attachShader(v,w),n.attachShader(v,S),t.index0AttributeName!==void 0?n.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&n.bindAttribLocation(v,0,"position"),n.linkProgram(v),i.debug.checkShaderErrors){const M=n.getProgramInfoLog(v).trim(),b=n.getShaderInfoLog(w).trim(),P=n.getShaderInfoLog(S).trim();let N=!0,D=!0;if(n.getProgramParameter(v,35714)===!1)if(N=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(n,v,w,S);else{const U=i4(n,w,"vertex"),G=i4(n,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(v,35715)+`

Program Info Log: `+M+`
`+U+`
`+G)}else M!==""?console.warn("THREE.WebGLProgram: Program Info Log:",M):(b===""||P==="")&&(D=!1);D&&(this.diagnostics={runnable:N,programLog:M,vertexShader:{log:b,prefix:m},fragmentShader:{log:P,prefix:p}})}n.deleteShader(w),n.deleteShader(S);let A;this.getUniforms=function(){return A===void 0&&(A=new wx(n,v)),A};let k;return this.getAttributes=function(){return k===void 0&&(k=Bbe(n,v)),k},this.destroy=function(){r.releaseStatesOfProgram(this),n.deleteProgram(v),this.program=void 0},this.name=t.shaderName,this.id=Nbe++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=w,this.fragmentShader=S,this}let Jbe=0;class Qbe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,n=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(n)===!1&&(o.add(n),n.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new exe(e),t.set(e,r)),r}}class exe{constructor(e){this.id=Jbe++,this.code=e,this.usedTimes=0}}function txe(i,e,t,r,n,s,o){const a=new jj,l=new Qbe,c=[],u=n.isWebGL2,h=n.logarithmicDepthBuffer,d=n.vertexTextures;let f=n.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(M){return M===1?"uv2":"uv"}function m(M,b,P,N,D){const U=N.fog,G=D.geometry,B=M.isMeshStandardMaterial?N.environment:null,Q=(M.isMeshStandardMaterial?t:e).get(M.envMap||B),j=Q&&Q.mapping===uS?Q.image.height:null,X=g[M.type];M.precision!==null&&(f=n.getMaxPrecision(M.precision),f!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",f,"instead."));const ne=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,ge=ne!==void 0?ne.length:0;let pe=0;G.morphAttributes.position!==void 0&&(pe=1),G.morphAttributes.normal!==void 0&&(pe=2),G.morphAttributes.color!==void 0&&(pe=3);let V,Y,ae,J;if(X){const ye=zo[X];V=ye.vertexShader,Y=ye.fragmentShader}else V=M.vertexShader,Y=M.fragmentShader,l.update(M),ae=l.getVertexShaderID(M),J=l.getFragmentShaderID(M);const z=i.getRenderTarget(),_e=D.isInstancedMesh===!0,ee=!!M.map,te=!!M.matcap,be=!!Q,oe=!!M.aoMap,Te=!!M.lightMap,Ae=!!M.bumpMap,Qe=!!M.normalMap,Ze=!!M.displacementMap,ht=!!M.emissiveMap,wt=!!M.metalnessMap,st=!!M.roughnessMap,ft=M.clearcoat>0,Ft=M.iridescence>0,O=M.sheen>0,R=M.transmission>0,se=ft&&!!M.clearcoatMap,xe=ft&&!!M.clearcoatNormalMap,we=ft&&!!M.clearcoatRoughnessMap,Se=Ft&&!!M.iridescenceMap,F=Ft&&!!M.iridescenceThicknessMap,de=O&&!!M.sheenColorMap,ie=O&&!!M.sheenRoughnessMap,Ee=!!M.specularMap,Ne=!!M.specularColorMap,Ie=!!M.specularIntensityMap,$e=R&&!!M.transmissionMap,Le=R&&!!M.thicknessMap,Ge=!!M.gradientMap,dt=!!M.alphaMap,Tt=M.alphaTest>0,H=!!M.extensions,ce=!!G.attributes.uv2;return{isWebGL2:u,shaderID:X,shaderName:M.type,vertexShader:V,fragmentShader:Y,defines:M.defines,customVertexShaderID:ae,customFragmentShaderID:J,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:f,instancing:_e,instancingColor:_e&&D.instanceColor!==null,supportsVertexTextures:d,outputEncoding:z===null?i.outputEncoding:z.isXRRenderTarget===!0?z.texture.encoding:Vh,map:ee,matcap:te,envMap:be,envMapMode:be&&Q.mapping,envMapCubeUVHeight:j,aoMap:oe,lightMap:Te,bumpMap:Ae,normalMap:Qe,displacementMap:d&&Ze,emissiveMap:ht,normalMapObjectSpace:Qe&&M.normalMapType===u_e,normalMapTangentSpace:Qe&&M.normalMapType===hS,decodeVideoTexture:ee&&M.map.isVideoTexture===!0&&M.map.encoding===qt,metalnessMap:wt,roughnessMap:st,clearcoat:ft,clearcoatMap:se,clearcoatNormalMap:xe,clearcoatRoughnessMap:we,iridescence:Ft,iridescenceMap:Se,iridescenceThicknessMap:F,sheen:O,sheenColorMap:de,sheenRoughnessMap:ie,specularMap:Ee,specularColorMap:Ne,specularIntensityMap:Ie,transmission:R,transmissionMap:$e,thicknessMap:Le,gradientMap:Ge,opaque:M.transparent===!1&&M.blending===Rf,alphaMap:dt,alphaTest:Tt,combine:M.combine,mapUv:ee&&v(M.map.channel),aoMapUv:oe&&v(M.aoMap.channel),lightMapUv:Te&&v(M.lightMap.channel),bumpMapUv:Ae&&v(M.bumpMap.channel),normalMapUv:Qe&&v(M.normalMap.channel),displacementMapUv:Ze&&v(M.displacementMap.channel),emissiveMapUv:ht&&v(M.emissiveMap.channel),metalnessMapUv:wt&&v(M.metalnessMap.channel),roughnessMapUv:st&&v(M.roughnessMap.channel),clearcoatMapUv:se&&v(M.clearcoatMap.channel),clearcoatNormalMapUv:xe&&v(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:we&&v(M.clearcoatRoughnessMap.channel),iridescenceMapUv:Se&&v(M.iridescenceMap.channel),iridescenceThicknessMapUv:F&&v(M.iridescenceThicknessMap.channel),sheenColorMapUv:de&&v(M.sheenColorMap.channel),sheenRoughnessMapUv:ie&&v(M.sheenRoughnessMap.channel),specularMapUv:Ee&&v(M.specularMap.channel),specularColorMapUv:Ne&&v(M.specularColorMap.channel),specularIntensityMapUv:Ie&&v(M.specularIntensityMap.channel),transmissionMapUv:$e&&v(M.transmissionMap.channel),thicknessMapUv:Le&&v(M.thicknessMap.channel),alphaMapUv:dt&&v(M.alphaMap.channel),vertexTangents:Qe&&!!G.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!G.attributes.color&&G.attributes.color.itemSize===4,vertexUvs2:ce,pointsUvs:D.isPoints===!0&&!!G.attributes.uv&&(ee||dt),fog:!!U,useFog:M.fog===!0,fogExp2:U&&U.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:D.isSkinnedMesh===!0,morphTargets:G.morphAttributes.position!==void 0,morphNormals:G.morphAttributes.normal!==void 0,morphColors:G.morphAttributes.color!==void 0,morphTargetsCount:ge,morphTextureStride:pe,numDirLights:b.directional.length,numPointLights:b.point.length,numSpotLights:b.spot.length,numSpotLightMaps:b.spotLightMap.length,numRectAreaLights:b.rectArea.length,numHemiLights:b.hemi.length,numDirLightShadows:b.directionalShadowMap.length,numPointLightShadows:b.pointShadowMap.length,numSpotLightShadows:b.spotShadowMap.length,numSpotLightShadowsWithMaps:b.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:i.shadowMap.enabled&&P.length>0,shadowMapType:i.shadowMap.type,toneMapping:M.toneMapped?i.toneMapping:nl,useLegacyLights:i.useLegacyLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===Ss,flipSided:M.side===xn,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:H&&M.extensions.derivatives===!0,extensionFragDepth:H&&M.extensions.fragDepth===!0,extensionDrawBuffers:H&&M.extensions.drawBuffers===!0,extensionShaderTextureLOD:H&&M.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function p(M){const b=[];if(M.shaderID?b.push(M.shaderID):(b.push(M.customVertexShaderID),b.push(M.customFragmentShaderID)),M.defines!==void 0)for(const P in M.defines)b.push(P),b.push(M.defines[P]);return M.isRawShaderMaterial===!1&&(y(b,M),_(b,M),b.push(i.outputEncoding)),b.push(M.customProgramCacheKey),b.join()}function y(M,b){M.push(b.precision),M.push(b.outputEncoding),M.push(b.envMapMode),M.push(b.envMapCubeUVHeight),M.push(b.mapUv),M.push(b.alphaMapUv),M.push(b.lightMapUv),M.push(b.aoMapUv),M.push(b.bumpMapUv),M.push(b.normalMapUv),M.push(b.displacementMapUv),M.push(b.emissiveMapUv),M.push(b.metalnessMapUv),M.push(b.roughnessMapUv),M.push(b.clearcoatMapUv),M.push(b.clearcoatNormalMapUv),M.push(b.clearcoatRoughnessMapUv),M.push(b.iridescenceMapUv),M.push(b.iridescenceThicknessMapUv),M.push(b.sheenColorMapUv),M.push(b.sheenRoughnessMapUv),M.push(b.specularMapUv),M.push(b.specularColorMapUv),M.push(b.specularIntensityMapUv),M.push(b.transmissionMapUv),M.push(b.thicknessMapUv),M.push(b.combine),M.push(b.fogExp2),M.push(b.sizeAttenuation),M.push(b.morphTargetsCount),M.push(b.morphAttributeCount),M.push(b.numDirLights),M.push(b.numPointLights),M.push(b.numSpotLights),M.push(b.numSpotLightMaps),M.push(b.numHemiLights),M.push(b.numRectAreaLights),M.push(b.numDirLightShadows),M.push(b.numPointLightShadows),M.push(b.numSpotLightShadows),M.push(b.numSpotLightShadowsWithMaps),M.push(b.shadowMapType),M.push(b.toneMapping),M.push(b.numClippingPlanes),M.push(b.numClipIntersection),M.push(b.depthPacking)}function _(M,b){a.disableAll(),b.isWebGL2&&a.enable(0),b.supportsVertexTextures&&a.enable(1),b.instancing&&a.enable(2),b.instancingColor&&a.enable(3),b.matcap&&a.enable(4),b.envMap&&a.enable(5),b.normalMapObjectSpace&&a.enable(6),b.normalMapTangentSpace&&a.enable(7),b.clearcoat&&a.enable(8),b.iridescence&&a.enable(9),b.alphaTest&&a.enable(10),b.vertexColors&&a.enable(11),b.vertexAlphas&&a.enable(12),b.vertexUvs2&&a.enable(13),b.vertexTangents&&a.enable(14),M.push(a.mask),a.disableAll(),b.fog&&a.enable(0),b.useFog&&a.enable(1),b.flatShading&&a.enable(2),b.logarithmicDepthBuffer&&a.enable(3),b.skinning&&a.enable(4),b.morphTargets&&a.enable(5),b.morphNormals&&a.enable(6),b.morphColors&&a.enable(7),b.premultipliedAlpha&&a.enable(8),b.shadowMapEnabled&&a.enable(9),b.useLegacyLights&&a.enable(10),b.doubleSided&&a.enable(11),b.flipSided&&a.enable(12),b.useDepthPacking&&a.enable(13),b.dithering&&a.enable(14),b.transmission&&a.enable(15),b.sheen&&a.enable(16),b.decodeVideoTexture&&a.enable(17),b.opaque&&a.enable(18),b.pointsUvs&&a.enable(19),M.push(a.mask)}function x(M){const b=g[M.type];let P;if(b){const N=zo[b];P=H_e.clone(N.uniforms)}else P=M.uniforms;return P}function w(M,b){let P;for(let N=0,D=c.length;N<D;N++){const U=c[N];if(U.cacheKey===b){P=U,++P.usedTimes;break}}return P===void 0&&(P=new Zbe(i,b,M,s),c.push(P)),P}function S(M){if(--M.usedTimes===0){const b=c.indexOf(M);c[b]=c[c.length-1],c.pop(),M.destroy()}}function A(M){l.remove(M)}function k(){l.dispose()}return{getParameters:m,getProgramCacheKey:p,getUniforms:x,acquireProgram:w,releaseProgram:S,releaseShaderCache:A,programs:c,dispose:k}}function ixe(){let i=new WeakMap;function e(s){let o=i.get(s);return o===void 0&&(o={},i.set(s,o)),o}function t(s){i.delete(s)}function r(s,o,a){i.get(s)[o]=a}function n(){i=new WeakMap}return{get:e,remove:t,update:r,dispose:n}}function rxe(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function a4(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function l4(){const i=[];let e=0;const t=[],r=[],n=[];function s(){e=0,t.length=0,r.length=0,n.length=0}function o(h,d,f,g,v,m){let p=i[e];return p===void 0?(p={id:h.id,object:h,geometry:d,material:f,groupOrder:g,renderOrder:h.renderOrder,z:v,group:m},i[e]=p):(p.id=h.id,p.object=h,p.geometry=d,p.material=f,p.groupOrder=g,p.renderOrder=h.renderOrder,p.z=v,p.group=m),e++,p}function a(h,d,f,g,v,m){const p=o(h,d,f,g,v,m);f.transmission>0?r.push(p):f.transparent===!0?n.push(p):t.push(p)}function l(h,d,f,g,v,m){const p=o(h,d,f,g,v,m);f.transmission>0?r.unshift(p):f.transparent===!0?n.unshift(p):t.unshift(p)}function c(h,d){t.length>1&&t.sort(h||rxe),r.length>1&&r.sort(d||a4),n.length>1&&n.sort(d||a4)}function u(){for(let h=e,d=i.length;h<d;h++){const f=i[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:r,transparent:n,init:s,push:a,unshift:l,finish:u,sort:c}}function nxe(){let i=new WeakMap;function e(r,n){const s=i.get(r);let o;return s===void 0?(o=new l4,i.set(r,[o])):n>=s.length?(o=new l4,s.push(o)):o=s[n],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function sxe(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new me,color:new At};break;case"SpotLight":t={position:new me,direction:new me,color:new At,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new me,color:new At,distance:0,decay:0};break;case"HemisphereLight":t={direction:new me,skyColor:new At,groundColor:new At};break;case"RectAreaLight":t={color:new At,position:new me,halfWidth:new me,halfHeight:new me};break}return i[e.id]=t,t}}}function oxe(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let axe=0;function lxe(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function cxe(i,e){const t=new sxe,r=oxe(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)n.probe.push(new me);const s=new me,o=new Pt,a=new Pt;function l(u,h){let d=0,f=0,g=0;for(let P=0;P<9;P++)n.probe[P].set(0,0,0);let v=0,m=0,p=0,y=0,_=0,x=0,w=0,S=0,A=0,k=0;u.sort(lxe);const M=h===!0?Math.PI:1;for(let P=0,N=u.length;P<N;P++){const D=u[P],U=D.color,G=D.intensity,B=D.distance,Q=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)d+=U.r*G*M,f+=U.g*G*M,g+=U.b*G*M;else if(D.isLightProbe)for(let j=0;j<9;j++)n.probe[j].addScaledVector(D.sh.coefficients[j],G);else if(D.isDirectionalLight){const j=t.get(D);if(j.color.copy(D.color).multiplyScalar(D.intensity*M),D.castShadow){const X=D.shadow,ne=r.get(D);ne.shadowBias=X.bias,ne.shadowNormalBias=X.normalBias,ne.shadowRadius=X.radius,ne.shadowMapSize=X.mapSize,n.directionalShadow[v]=ne,n.directionalShadowMap[v]=Q,n.directionalShadowMatrix[v]=D.shadow.matrix,x++}n.directional[v]=j,v++}else if(D.isSpotLight){const j=t.get(D);j.position.setFromMatrixPosition(D.matrixWorld),j.color.copy(U).multiplyScalar(G*M),j.distance=B,j.coneCos=Math.cos(D.angle),j.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),j.decay=D.decay,n.spot[p]=j;const X=D.shadow;if(D.map&&(n.spotLightMap[A]=D.map,A++,X.updateMatrices(D),D.castShadow&&k++),n.spotLightMatrix[p]=X.matrix,D.castShadow){const ne=r.get(D);ne.shadowBias=X.bias,ne.shadowNormalBias=X.normalBias,ne.shadowRadius=X.radius,ne.shadowMapSize=X.mapSize,n.spotShadow[p]=ne,n.spotShadowMap[p]=Q,S++}p++}else if(D.isRectAreaLight){const j=t.get(D);j.color.copy(U).multiplyScalar(G),j.halfWidth.set(D.width*.5,0,0),j.halfHeight.set(0,D.height*.5,0),n.rectArea[y]=j,y++}else if(D.isPointLight){const j=t.get(D);if(j.color.copy(D.color).multiplyScalar(D.intensity*M),j.distance=D.distance,j.decay=D.decay,D.castShadow){const X=D.shadow,ne=r.get(D);ne.shadowBias=X.bias,ne.shadowNormalBias=X.normalBias,ne.shadowRadius=X.radius,ne.shadowMapSize=X.mapSize,ne.shadowCameraNear=X.camera.near,ne.shadowCameraFar=X.camera.far,n.pointShadow[m]=ne,n.pointShadowMap[m]=Q,n.pointShadowMatrix[m]=D.shadow.matrix,w++}n.point[m]=j,m++}else if(D.isHemisphereLight){const j=t.get(D);j.skyColor.copy(D.color).multiplyScalar(G*M),j.groundColor.copy(D.groundColor).multiplyScalar(G*M),n.hemi[_]=j,_++}}y>0&&(e.isWebGL2||i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=rt.LTC_FLOAT_1,n.rectAreaLTC2=rt.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=rt.LTC_HALF_1,n.rectAreaLTC2=rt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=d,n.ambient[1]=f,n.ambient[2]=g;const b=n.hash;(b.directionalLength!==v||b.pointLength!==m||b.spotLength!==p||b.rectAreaLength!==y||b.hemiLength!==_||b.numDirectionalShadows!==x||b.numPointShadows!==w||b.numSpotShadows!==S||b.numSpotMaps!==A)&&(n.directional.length=v,n.spot.length=p,n.rectArea.length=y,n.point.length=m,n.hemi.length=_,n.directionalShadow.length=x,n.directionalShadowMap.length=x,n.pointShadow.length=w,n.pointShadowMap.length=w,n.spotShadow.length=S,n.spotShadowMap.length=S,n.directionalShadowMatrix.length=x,n.pointShadowMatrix.length=w,n.spotLightMatrix.length=S+A-k,n.spotLightMap.length=A,n.numSpotLightShadowsWithMaps=k,b.directionalLength=v,b.pointLength=m,b.spotLength=p,b.rectAreaLength=y,b.hemiLength=_,b.numDirectionalShadows=x,b.numPointShadows=w,b.numSpotShadows=S,b.numSpotMaps=A,n.version=axe++)}function c(u,h){let d=0,f=0,g=0,v=0,m=0;const p=h.matrixWorldInverse;for(let y=0,_=u.length;y<_;y++){const x=u[y];if(x.isDirectionalLight){const w=n.directional[d];w.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(p),d++}else if(x.isSpotLight){const w=n.spot[g];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(p),w.direction.setFromMatrixPosition(x.matrixWorld),s.setFromMatrixPosition(x.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(p),g++}else if(x.isRectAreaLight){const w=n.rectArea[v];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(p),a.identity(),o.copy(x.matrixWorld),o.premultiply(p),a.extractRotation(o),w.halfWidth.set(x.width*.5,0,0),w.halfHeight.set(0,x.height*.5,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),v++}else if(x.isPointLight){const w=n.point[f];w.position.setFromMatrixPosition(x.matrixWorld),w.position.applyMatrix4(p),f++}else if(x.isHemisphereLight){const w=n.hemi[m];w.direction.setFromMatrixPosition(x.matrixWorld),w.direction.transformDirection(p),m++}}}return{setup:l,setupView:c,state:n}}function c4(i,e){const t=new cxe(i,e),r=[],n=[];function s(){r.length=0,n.length=0}function o(u){r.push(u)}function a(u){n.push(u)}function l(u){t.setup(r,u)}function c(u){t.setupView(r,u)}return{init:s,state:{lightsArray:r,shadowsArray:n,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function uxe(i,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new c4(i,e),t.set(s,[l])):o>=a.length?(l=new c4(i,e),a.push(l)):l=a[o],l}function n(){t=new WeakMap}return{get:r,dispose:n}}class hxe extends Ls{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=l_e,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class dxe extends Ls{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const pxe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fxe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function mxe(i,e,t){let r=new _L;const n=new It,s=new It,o=new ui,a=new hxe({depthPacking:c_e}),l=new dxe,c={},u=t.maxTextureSize,h={[Xo]:xn,[xn]:Xo,[Ss]:Ss},d=new Hh({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new It},radius:{value:4}},vertexShader:pxe,fragmentShader:fxe}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const g=new on;g.setAttribute("position",new gr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Wi(g,d),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Tj,this.render=function(x,w,S){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||x.length===0)return;const A=i.getRenderTarget(),k=i.getActiveCubeFace(),M=i.getActiveMipmapLevel(),b=i.state;b.setBlending(Lc),b.buffers.color.setClear(1,1,1,1),b.buffers.depth.setTest(!0),b.setScissorTest(!1);for(let P=0,N=x.length;P<N;P++){const D=x[P],U=D.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",D,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;n.copy(U.mapSize);const G=U.getFrameExtents();if(n.multiply(G),s.copy(U.mapSize),(n.x>u||n.y>u)&&(n.x>u&&(s.x=Math.floor(u/G.x),n.x=s.x*G.x,U.mapSize.x=s.x),n.y>u&&(s.y=Math.floor(u/G.y),n.y=s.y*G.y,U.mapSize.y=s.y)),U.map===null){const Q=this.type!==B0?{minFilter:hr,magFilter:hr}:{};U.map=new jh(n.x,n.y,Q),U.map.texture.name=D.name+".shadowMap",U.camera.updateProjectionMatrix()}i.setRenderTarget(U.map),i.clear();const B=U.getViewportCount();for(let Q=0;Q<B;Q++){const j=U.getViewport(Q);o.set(s.x*j.x,s.y*j.y,s.x*j.z,s.y*j.w),b.viewport(o),U.updateMatrices(D,Q),r=U.getFrustum(),_(w,S,U.camera,D,this.type)}U.isPointLightShadow!==!0&&this.type===B0&&p(U,S),U.needsUpdate=!1}m.needsUpdate=!1,i.setRenderTarget(A,k,M)};function p(x,w){const S=e.update(v);d.defines.VSM_SAMPLES!==x.blurSamples&&(d.defines.VSM_SAMPLES=x.blurSamples,f.defines.VSM_SAMPLES=x.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new jh(n.x,n.y)),d.uniforms.shadow_pass.value=x.map.texture,d.uniforms.resolution.value=x.mapSize,d.uniforms.radius.value=x.radius,i.setRenderTarget(x.mapPass),i.clear(),i.renderBufferDirect(w,null,S,d,v,null),f.uniforms.shadow_pass.value=x.mapPass.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,i.setRenderTarget(x.map),i.clear(),i.renderBufferDirect(w,null,S,f,v,null)}function y(x,w,S,A){let k=null;const M=S.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(M!==void 0)k=M;else if(k=S.isPointLight===!0?l:a,i.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){const b=k.uuid,P=w.uuid;let N=c[b];N===void 0&&(N={},c[b]=N);let D=N[P];D===void 0&&(D=k.clone(),N[P]=D),k=D}if(k.visible=w.visible,k.wireframe=w.wireframe,A===B0?k.side=w.shadowSide!==null?w.shadowSide:w.side:k.side=w.shadowSide!==null?w.shadowSide:h[w.side],k.alphaMap=w.alphaMap,k.alphaTest=w.alphaTest,k.map=w.map,k.clipShadows=w.clipShadows,k.clippingPlanes=w.clippingPlanes,k.clipIntersection=w.clipIntersection,k.displacementMap=w.displacementMap,k.displacementScale=w.displacementScale,k.displacementBias=w.displacementBias,k.wireframeLinewidth=w.wireframeLinewidth,k.linewidth=w.linewidth,S.isPointLight===!0&&k.isMeshDistanceMaterial===!0){const b=i.properties.get(k);b.light=S}return k}function _(x,w,S,A,k){if(x.visible===!1)return;if(x.layers.test(w.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&k===B0)&&(!x.frustumCulled||r.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,x.matrixWorld);const b=e.update(x),P=x.material;if(Array.isArray(P)){const N=b.groups;for(let D=0,U=N.length;D<U;D++){const G=N[D],B=P[G.materialIndex];if(B&&B.visible){const Q=y(x,B,A,k);i.renderBufferDirect(S,null,b,Q,x,G)}}}else if(P.visible){const N=y(x,P,A,k);i.renderBufferDirect(S,null,b,N,x,null)}}const M=x.children;for(let b=0,P=M.length;b<P;b++)_(M[b],w,S,A,k)}}function gxe(i,e,t){const r=t.isWebGL2;function n(){let H=!1;const ce=new ui;let ye=null;const Ce=new ui(0,0,0,0);return{setMask:function(Fe){ye!==Fe&&!H&&(i.colorMask(Fe,Fe,Fe,Fe),ye=Fe)},setLocked:function(Fe){H=Fe},setClear:function(Fe,vt,St,Dt,Fi){Fi===!0&&(Fe*=Dt,vt*=Dt,St*=Dt),ce.set(Fe,vt,St,Dt),Ce.equals(ce)===!1&&(i.clearColor(Fe,vt,St,Dt),Ce.copy(ce))},reset:function(){H=!1,ye=null,Ce.set(-1,0,0,0)}}}function s(){let H=!1,ce=null,ye=null,Ce=null;return{setTest:function(Fe){Fe?z(2929):_e(2929)},setMask:function(Fe){ce!==Fe&&!H&&(i.depthMask(Fe),ce=Fe)},setFunc:function(Fe){if(ye!==Fe){switch(Fe){case L0e:i.depthFunc(512);break;case R0e:i.depthFunc(519);break;case P0e:i.depthFunc(513);break;case ok:i.depthFunc(515);break;case N0e:i.depthFunc(514);break;case I0e:i.depthFunc(518);break;case D0e:i.depthFunc(516);break;case O0e:i.depthFunc(517);break;default:i.depthFunc(515)}ye=Fe}},setLocked:function(Fe){H=Fe},setClear:function(Fe){Ce!==Fe&&(i.clearDepth(Fe),Ce=Fe)},reset:function(){H=!1,ce=null,ye=null,Ce=null}}}function o(){let H=!1,ce=null,ye=null,Ce=null,Fe=null,vt=null,St=null,Dt=null,Fi=null;return{setTest:function(at){H||(at?z(2960):_e(2960))},setMask:function(at){ce!==at&&!H&&(i.stencilMask(at),ce=at)},setFunc:function(at,ei,fi){(ye!==at||Ce!==ei||Fe!==fi)&&(i.stencilFunc(at,ei,fi),ye=at,Ce=ei,Fe=fi)},setOp:function(at,ei,fi){(vt!==at||St!==ei||Dt!==fi)&&(i.stencilOp(at,ei,fi),vt=at,St=ei,Dt=fi)},setLocked:function(at){H=at},setClear:function(at){Fi!==at&&(i.clearStencil(at),Fi=at)},reset:function(){H=!1,ce=null,ye=null,Ce=null,Fe=null,vt=null,St=null,Dt=null,Fi=null}}}const a=new n,l=new s,c=new o,u=new WeakMap,h=new WeakMap;let d={},f={},g=new WeakMap,v=[],m=null,p=!1,y=null,_=null,x=null,w=null,S=null,A=null,k=null,M=!1,b=null,P=null,N=null,D=null,U=null;const G=i.getParameter(35661);let B=!1,Q=0;const j=i.getParameter(7938);j.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(j)[1]),B=Q>=1):j.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),B=Q>=2);let X=null,ne={};const ge=i.getParameter(3088),pe=i.getParameter(2978),V=new ui().fromArray(ge),Y=new ui().fromArray(pe);function ae(H,ce,ye){const Ce=new Uint8Array(4),Fe=i.createTexture();i.bindTexture(H,Fe),i.texParameteri(H,10241,9728),i.texParameteri(H,10240,9728);for(let vt=0;vt<ye;vt++)i.texImage2D(ce+vt,0,6408,1,1,0,6408,5121,Ce);return Fe}const J={};J[3553]=ae(3553,3553,1),J[34067]=ae(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),z(2929),l.setFunc(ok),Ze(!1),ht(XD),z(2884),Ae(Lc);function z(H){d[H]!==!0&&(i.enable(H),d[H]=!0)}function _e(H){d[H]!==!1&&(i.disable(H),d[H]=!1)}function ee(H,ce){return f[H]!==ce?(i.bindFramebuffer(H,ce),f[H]=ce,r&&(H===36009&&(f[36160]=ce),H===36160&&(f[36009]=ce)),!0):!1}function te(H,ce){let ye=v,Ce=!1;if(H)if(ye=g.get(ce),ye===void 0&&(ye=[],g.set(ce,ye)),H.isWebGLMultipleRenderTargets){const Fe=H.texture;if(ye.length!==Fe.length||ye[0]!==36064){for(let vt=0,St=Fe.length;vt<St;vt++)ye[vt]=36064+vt;ye.length=Fe.length,Ce=!0}}else ye[0]!==36064&&(ye[0]=36064,Ce=!0);else ye[0]!==1029&&(ye[0]=1029,Ce=!0);Ce&&(t.isWebGL2?i.drawBuffers(ye):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ye))}function be(H){return m!==H?(i.useProgram(H),m=H,!0):!1}const oe={[Up]:32774,[b0e]:32778,[x0e]:32779};if(r)oe[JD]=32775,oe[QD]=32776;else{const H=e.get("EXT_blend_minmax");H!==null&&(oe[JD]=H.MIN_EXT,oe[QD]=H.MAX_EXT)}const Te={[w0e]:0,[M0e]:1,[S0e]:768,[Ej]:770,[$0e]:776,[k0e]:774,[E0e]:772,[T0e]:769,[Aj]:771,[C0e]:775,[A0e]:773};function Ae(H,ce,ye,Ce,Fe,vt,St,Dt){if(H===Lc){p===!0&&(_e(3042),p=!1);return}if(p===!1&&(z(3042),p=!0),H!==v0e){if(H!==y||Dt!==M){if((_!==Up||S!==Up)&&(i.blendEquation(32774),_=Up,S=Up),Dt)switch(H){case Rf:i.blendFuncSeparate(1,771,1,771);break;case YD:i.blendFunc(1,1);break;case KD:i.blendFuncSeparate(0,769,0,1);break;case ZD:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}else switch(H){case Rf:i.blendFuncSeparate(770,771,1,771);break;case YD:i.blendFunc(770,1);break;case KD:i.blendFuncSeparate(0,769,0,1);break;case ZD:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",H);break}x=null,w=null,A=null,k=null,y=H,M=Dt}return}Fe=Fe||ce,vt=vt||ye,St=St||Ce,(ce!==_||Fe!==S)&&(i.blendEquationSeparate(oe[ce],oe[Fe]),_=ce,S=Fe),(ye!==x||Ce!==w||vt!==A||St!==k)&&(i.blendFuncSeparate(Te[ye],Te[Ce],Te[vt],Te[St]),x=ye,w=Ce,A=vt,k=St),y=H,M=!1}function Qe(H,ce){H.side===Ss?_e(2884):z(2884);let ye=H.side===xn;ce&&(ye=!ye),Ze(ye),H.blending===Rf&&H.transparent===!1?Ae(Lc):Ae(H.blending,H.blendEquation,H.blendSrc,H.blendDst,H.blendEquationAlpha,H.blendSrcAlpha,H.blendDstAlpha,H.premultipliedAlpha),l.setFunc(H.depthFunc),l.setTest(H.depthTest),l.setMask(H.depthWrite),a.setMask(H.colorWrite);const Ce=H.stencilWrite;c.setTest(Ce),Ce&&(c.setMask(H.stencilWriteMask),c.setFunc(H.stencilFunc,H.stencilRef,H.stencilFuncMask),c.setOp(H.stencilFail,H.stencilZFail,H.stencilZPass)),st(H.polygonOffset,H.polygonOffsetFactor,H.polygonOffsetUnits),H.alphaToCoverage===!0?z(32926):_e(32926)}function Ze(H){b!==H&&(H?i.frontFace(2304):i.frontFace(2305),b=H)}function ht(H){H!==g0e?(z(2884),H!==P&&(H===XD?i.cullFace(1029):H===_0e?i.cullFace(1028):i.cullFace(1032))):_e(2884),P=H}function wt(H){H!==N&&(B&&i.lineWidth(H),N=H)}function st(H,ce,ye){H?(z(32823),(D!==ce||U!==ye)&&(i.polygonOffset(ce,ye),D=ce,U=ye)):_e(32823)}function ft(H){H?z(3089):_e(3089)}function Ft(H){H===void 0&&(H=33984+G-1),X!==H&&(i.activeTexture(H),X=H)}function O(H,ce,ye){ye===void 0&&(X===null?ye=33984+G-1:ye=X);let Ce=ne[ye];Ce===void 0&&(Ce={type:void 0,texture:void 0},ne[ye]=Ce),(Ce.type!==H||Ce.texture!==ce)&&(X!==ye&&(i.activeTexture(ye),X=ye),i.bindTexture(H,ce||J[H]),Ce.type=H,Ce.texture=ce)}function R(){const H=ne[X];H!==void 0&&H.type!==void 0&&(i.bindTexture(H.type,null),H.type=void 0,H.texture=void 0)}function se(){try{i.compressedTexImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function xe(){try{i.compressedTexImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function we(){try{i.texSubImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Se(){try{i.texSubImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function F(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function de(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function ie(){try{i.texStorage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ee(){try{i.texStorage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ne(){try{i.texImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function Ie(){try{i.texImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}}function $e(H){V.equals(H)===!1&&(i.scissor(H.x,H.y,H.z,H.w),V.copy(H))}function Le(H){Y.equals(H)===!1&&(i.viewport(H.x,H.y,H.z,H.w),Y.copy(H))}function Ge(H,ce){let ye=h.get(ce);ye===void 0&&(ye=new WeakMap,h.set(ce,ye));let Ce=ye.get(H);Ce===void 0&&(Ce=i.getUniformBlockIndex(ce,H.name),ye.set(H,Ce))}function dt(H,ce){const ye=h.get(ce).get(H);u.get(ce)!==ye&&(i.uniformBlockBinding(ce,ye,H.__bindingPointIndex),u.set(ce,ye))}function Tt(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),r===!0&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},X=null,ne={},f={},g=new WeakMap,v=[],m=null,p=!1,y=null,_=null,x=null,w=null,S=null,A=null,k=null,M=!1,b=null,P=null,N=null,D=null,U=null,V.set(0,0,i.canvas.width,i.canvas.height),Y.set(0,0,i.canvas.width,i.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:z,disable:_e,bindFramebuffer:ee,drawBuffers:te,useProgram:be,setBlending:Ae,setMaterial:Qe,setFlipSided:Ze,setCullFace:ht,setLineWidth:wt,setPolygonOffset:st,setScissorTest:ft,activeTexture:Ft,bindTexture:O,unbindTexture:R,compressedTexImage2D:se,compressedTexImage3D:xe,texImage2D:Ne,texImage3D:Ie,updateUBOMapping:Ge,uniformBlockBinding:dt,texStorage2D:ie,texStorage3D:Ee,texSubImage2D:we,texSubImage3D:Se,compressedTexSubImage2D:F,compressedTexSubImage3D:de,scissor:$e,viewport:Le,reset:Tt}}function _xe(i,e,t,r,n,s,o){const a=n.isWebGL2,l=n.maxTextures,c=n.maxCubemapSize,u=n.maxTextureSize,h=n.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let v;const m=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(O,R){return p?new OffscreenCanvas(O,R):gy("canvas")}function _(O,R,se,xe){let we=1;if((O.width>xe||O.height>xe)&&(we=xe/Math.max(O.width,O.height)),we<1||R===!0)if(typeof HTMLImageElement<"u"&&O instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&O instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&O instanceof ImageBitmap){const Se=R?Nj:Math.floor,F=Se(we*O.width),de=Se(we*O.height);v===void 0&&(v=y(F,de));const ie=se?y(F,de):v;return ie.width=F,ie.height=de,ie.getContext("2d").drawImage(O,0,0,F,de),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+O.width+"x"+O.height+") to ("+F+"x"+de+")."),ie}else return"data"in O&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+O.width+"x"+O.height+")."),O;return O}function x(O){return pk(O.width)&&pk(O.height)}function w(O){return a?!1:O.wrapS!==Gr||O.wrapT!==Gr||O.minFilter!==hr&&O.minFilter!==Cr}function S(O,R){return O.generateMipmaps&&R&&O.minFilter!==hr&&O.minFilter!==Cr}function A(O){i.generateMipmap(O)}function k(O,R,se,xe,we=!1){if(a===!1)return R;if(O!==null){if(i[O]!==void 0)return i[O];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+O+"'")}let Se=R;return R===6403&&(se===5126&&(Se=33326),se===5131&&(Se=33325),se===5121&&(Se=33321)),R===33319&&(se===5126&&(Se=33328),se===5131&&(Se=33327),se===5121&&(Se=33323)),R===6408&&(se===5126&&(Se=34836),se===5131&&(Se=34842),se===5121&&(Se=xe===qt&&we===!1?35907:32856),se===32819&&(Se=32854),se===32820&&(Se=32855)),(Se===33325||Se===33326||Se===33327||Se===33328||Se===34842||Se===34836)&&e.get("EXT_color_buffer_float"),Se}function M(O,R,se){return S(O,se)===!0||O.isFramebufferTexture&&O.minFilter!==hr&&O.minFilter!==Cr?Math.log2(Math.max(R.width,R.height))+1:O.mipmaps!==void 0&&O.mipmaps.length>0?O.mipmaps.length:O.isCompressedTexture&&Array.isArray(O.image)?R.mipmaps.length:1}function b(O){return O===hr||O===ck||O===vx?9728:9729}function P(O){const R=O.target;R.removeEventListener("dispose",P),D(R),R.isVideoTexture&&g.delete(R)}function N(O){const R=O.target;R.removeEventListener("dispose",N),G(R)}function D(O){const R=r.get(O);if(R.__webglInit===void 0)return;const se=O.source,xe=m.get(se);if(xe){const we=xe[R.__cacheKey];we.usedTimes--,we.usedTimes===0&&U(O),Object.keys(xe).length===0&&m.delete(se)}r.remove(O)}function U(O){const R=r.get(O);i.deleteTexture(R.__webglTexture);const se=O.source,xe=m.get(se);delete xe[R.__cacheKey],o.memory.textures--}function G(O){const R=O.texture,se=r.get(O),xe=r.get(R);if(xe.__webglTexture!==void 0&&(i.deleteTexture(xe.__webglTexture),o.memory.textures--),O.depthTexture&&O.depthTexture.dispose(),O.isWebGLCubeRenderTarget)for(let we=0;we<6;we++)i.deleteFramebuffer(se.__webglFramebuffer[we]),se.__webglDepthbuffer&&i.deleteRenderbuffer(se.__webglDepthbuffer[we]);else{if(i.deleteFramebuffer(se.__webglFramebuffer),se.__webglDepthbuffer&&i.deleteRenderbuffer(se.__webglDepthbuffer),se.__webglMultisampledFramebuffer&&i.deleteFramebuffer(se.__webglMultisampledFramebuffer),se.__webglColorRenderbuffer)for(let we=0;we<se.__webglColorRenderbuffer.length;we++)se.__webglColorRenderbuffer[we]&&i.deleteRenderbuffer(se.__webglColorRenderbuffer[we]);se.__webglDepthRenderbuffer&&i.deleteRenderbuffer(se.__webglDepthRenderbuffer)}if(O.isWebGLMultipleRenderTargets)for(let we=0,Se=R.length;we<Se;we++){const F=r.get(R[we]);F.__webglTexture&&(i.deleteTexture(F.__webglTexture),o.memory.textures--),r.remove(R[we])}r.remove(R),r.remove(O)}let B=0;function Q(){B=0}function j(){const O=B;return O>=l&&console.warn("THREE.WebGLTextures: Trying to use "+O+" texture units while this GPU supports only "+l),B+=1,O}function X(O){const R=[];return R.push(O.wrapS),R.push(O.wrapT),R.push(O.wrapR||0),R.push(O.magFilter),R.push(O.minFilter),R.push(O.anisotropy),R.push(O.internalFormat),R.push(O.format),R.push(O.type),R.push(O.generateMipmaps),R.push(O.premultiplyAlpha),R.push(O.flipY),R.push(O.unpackAlignment),R.push(O.encoding),R.join()}function ne(O,R){const se=r.get(O);if(O.isVideoTexture&&ft(O),O.isRenderTargetTexture===!1&&O.version>0&&se.__version!==O.version){const xe=O.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{_e(se,O,R);return}}t.bindTexture(3553,se.__webglTexture,33984+R)}function ge(O,R){const se=r.get(O);if(O.version>0&&se.__version!==O.version){_e(se,O,R);return}t.bindTexture(35866,se.__webglTexture,33984+R)}function pe(O,R){const se=r.get(O);if(O.version>0&&se.__version!==O.version){_e(se,O,R);return}t.bindTexture(32879,se.__webglTexture,33984+R)}function V(O,R){const se=r.get(O);if(O.version>0&&se.__version!==O.version){ee(se,O,R);return}t.bindTexture(34067,se.__webglTexture,33984+R)}const Y={[Vo]:10497,[Gr]:33071,[Gw]:33648},ae={[hr]:9728,[ck]:9984,[vx]:9986,[Cr]:9729,[Cj]:9985,[fl]:9987};function J(O,R,se){if(se?(i.texParameteri(O,10242,Y[R.wrapS]),i.texParameteri(O,10243,Y[R.wrapT]),(O===32879||O===35866)&&i.texParameteri(O,32882,Y[R.wrapR]),i.texParameteri(O,10240,ae[R.magFilter]),i.texParameteri(O,10241,ae[R.minFilter])):(i.texParameteri(O,10242,33071),i.texParameteri(O,10243,33071),(O===32879||O===35866)&&i.texParameteri(O,32882,33071),(R.wrapS!==Gr||R.wrapT!==Gr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(O,10240,b(R.magFilter)),i.texParameteri(O,10241,b(R.minFilter)),R.minFilter!==hr&&R.minFilter!==Cr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const xe=e.get("EXT_texture_filter_anisotropic");if(R.magFilter===hr||R.minFilter!==vx&&R.minFilter!==fl||R.type===bc&&e.has("OES_texture_float_linear")===!1||a===!1&&R.type===fy&&e.has("OES_texture_half_float_linear")===!1)return;(R.anisotropy>1||r.get(R).__currentAnisotropy)&&(i.texParameterf(O,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(R.anisotropy,n.getMaxAnisotropy())),r.get(R).__currentAnisotropy=R.anisotropy)}}function z(O,R){let se=!1;O.__webglInit===void 0&&(O.__webglInit=!0,R.addEventListener("dispose",P));const xe=R.source;let we=m.get(xe);we===void 0&&(we={},m.set(xe,we));const Se=X(R);if(Se!==O.__cacheKey){we[Se]===void 0&&(we[Se]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,se=!0),we[Se].usedTimes++;const F=we[O.__cacheKey];F!==void 0&&(we[O.__cacheKey].usedTimes--,F.usedTimes===0&&U(R)),O.__cacheKey=Se,O.__webglTexture=we[Se].texture}return se}function _e(O,R,se){let xe=3553;(R.isDataArrayTexture||R.isCompressedArrayTexture)&&(xe=35866),R.isData3DTexture&&(xe=32879);const we=z(O,R),Se=R.source;t.bindTexture(xe,O.__webglTexture,33984+se);const F=r.get(Se);if(Se.version!==F.__version||we===!0){t.activeTexture(33984+se),i.pixelStorei(37440,R.flipY),i.pixelStorei(37441,R.premultiplyAlpha),i.pixelStorei(3317,R.unpackAlignment),i.pixelStorei(37443,0);const de=w(R)&&x(R.image)===!1;let ie=_(R.image,de,!1,u);ie=Ft(R,ie);const Ee=x(ie)||a,Ne=s.convert(R.format,R.encoding);let Ie=s.convert(R.type),$e=k(R.internalFormat,Ne,Ie,R.encoding,R.isVideoTexture);J(xe,R,Ee);let Le;const Ge=R.mipmaps,dt=a&&R.isVideoTexture!==!0,Tt=F.__version===void 0||we===!0,H=M(R,ie,Ee);if(R.isDepthTexture)$e=6402,a?R.type===bc?$e=36012:R.type===ch?$e=33190:R.type===Pf?$e=35056:$e=33189:R.type===bc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),R.format===bh&&$e===6402&&R.type!==$j&&R.type!==ch&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),R.type=ch,Ie=s.convert(R.type)),R.format===mm&&$e===6402&&($e=34041,R.type!==Pf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),R.type=Pf,Ie=s.convert(R.type))),Tt&&(dt?t.texStorage2D(3553,1,$e,ie.width,ie.height):t.texImage2D(3553,0,$e,ie.width,ie.height,0,Ne,Ie,null));else if(R.isDataTexture)if(Ge.length>0&&Ee){dt&&Tt&&t.texStorage2D(3553,H,$e,Ge[0].width,Ge[0].height);for(let ce=0,ye=Ge.length;ce<ye;ce++)Le=Ge[ce],dt?t.texSubImage2D(3553,ce,0,0,Le.width,Le.height,Ne,Ie,Le.data):t.texImage2D(3553,ce,$e,Le.width,Le.height,0,Ne,Ie,Le.data);R.generateMipmaps=!1}else dt?(Tt&&t.texStorage2D(3553,H,$e,ie.width,ie.height),t.texSubImage2D(3553,0,0,0,ie.width,ie.height,Ne,Ie,ie.data)):t.texImage2D(3553,0,$e,ie.width,ie.height,0,Ne,Ie,ie.data);else if(R.isCompressedTexture)if(R.isCompressedArrayTexture){dt&&Tt&&t.texStorage3D(35866,H,$e,Ge[0].width,Ge[0].height,ie.depth);for(let ce=0,ye=Ge.length;ce<ye;ce++)Le=Ge[ce],R.format!==Ts?Ne!==null?dt?t.compressedTexSubImage3D(35866,ce,0,0,0,Le.width,Le.height,ie.depth,Ne,Le.data,0,0):t.compressedTexImage3D(35866,ce,$e,Le.width,Le.height,ie.depth,0,Le.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):dt?t.texSubImage3D(35866,ce,0,0,0,Le.width,Le.height,ie.depth,Ne,Ie,Le.data):t.texImage3D(35866,ce,$e,Le.width,Le.height,ie.depth,0,Ne,Ie,Le.data)}else{dt&&Tt&&t.texStorage2D(3553,H,$e,Ge[0].width,Ge[0].height);for(let ce=0,ye=Ge.length;ce<ye;ce++)Le=Ge[ce],R.format!==Ts?Ne!==null?dt?t.compressedTexSubImage2D(3553,ce,0,0,Le.width,Le.height,Ne,Le.data):t.compressedTexImage2D(3553,ce,$e,Le.width,Le.height,0,Le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):dt?t.texSubImage2D(3553,ce,0,0,Le.width,Le.height,Ne,Ie,Le.data):t.texImage2D(3553,ce,$e,Le.width,Le.height,0,Ne,Ie,Le.data)}else if(R.isDataArrayTexture)dt?(Tt&&t.texStorage3D(35866,H,$e,ie.width,ie.height,ie.depth),t.texSubImage3D(35866,0,0,0,0,ie.width,ie.height,ie.depth,Ne,Ie,ie.data)):t.texImage3D(35866,0,$e,ie.width,ie.height,ie.depth,0,Ne,Ie,ie.data);else if(R.isData3DTexture)dt?(Tt&&t.texStorage3D(32879,H,$e,ie.width,ie.height,ie.depth),t.texSubImage3D(32879,0,0,0,0,ie.width,ie.height,ie.depth,Ne,Ie,ie.data)):t.texImage3D(32879,0,$e,ie.width,ie.height,ie.depth,0,Ne,Ie,ie.data);else if(R.isFramebufferTexture){if(Tt)if(dt)t.texStorage2D(3553,H,$e,ie.width,ie.height);else{let ce=ie.width,ye=ie.height;for(let Ce=0;Ce<H;Ce++)t.texImage2D(3553,Ce,$e,ce,ye,0,Ne,Ie,null),ce>>=1,ye>>=1}}else if(Ge.length>0&&Ee){dt&&Tt&&t.texStorage2D(3553,H,$e,Ge[0].width,Ge[0].height);for(let ce=0,ye=Ge.length;ce<ye;ce++)Le=Ge[ce],dt?t.texSubImage2D(3553,ce,0,0,Ne,Ie,Le):t.texImage2D(3553,ce,$e,Ne,Ie,Le);R.generateMipmaps=!1}else dt?(Tt&&t.texStorage2D(3553,H,$e,ie.width,ie.height),t.texSubImage2D(3553,0,0,0,Ne,Ie,ie)):t.texImage2D(3553,0,$e,Ne,Ie,ie);S(R,Ee)&&A(xe),F.__version=Se.version,R.onUpdate&&R.onUpdate(R)}O.__version=R.version}function ee(O,R,se){if(R.image.length!==6)return;const xe=z(O,R),we=R.source;t.bindTexture(34067,O.__webglTexture,33984+se);const Se=r.get(we);if(we.version!==Se.__version||xe===!0){t.activeTexture(33984+se),i.pixelStorei(37440,R.flipY),i.pixelStorei(37441,R.premultiplyAlpha),i.pixelStorei(3317,R.unpackAlignment),i.pixelStorei(37443,0);const F=R.isCompressedTexture||R.image[0].isCompressedTexture,de=R.image[0]&&R.image[0].isDataTexture,ie=[];for(let ce=0;ce<6;ce++)!F&&!de?ie[ce]=_(R.image[ce],!1,!0,c):ie[ce]=de?R.image[ce].image:R.image[ce],ie[ce]=Ft(R,ie[ce]);const Ee=ie[0],Ne=x(Ee)||a,Ie=s.convert(R.format,R.encoding),$e=s.convert(R.type),Le=k(R.internalFormat,Ie,$e,R.encoding),Ge=a&&R.isVideoTexture!==!0,dt=Se.__version===void 0||xe===!0;let Tt=M(R,Ee,Ne);J(34067,R,Ne);let H;if(F){Ge&&dt&&t.texStorage2D(34067,Tt,Le,Ee.width,Ee.height);for(let ce=0;ce<6;ce++){H=ie[ce].mipmaps;for(let ye=0;ye<H.length;ye++){const Ce=H[ye];R.format!==Ts?Ie!==null?Ge?t.compressedTexSubImage2D(34069+ce,ye,0,0,Ce.width,Ce.height,Ie,Ce.data):t.compressedTexImage2D(34069+ce,ye,Le,Ce.width,Ce.height,0,Ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ge?t.texSubImage2D(34069+ce,ye,0,0,Ce.width,Ce.height,Ie,$e,Ce.data):t.texImage2D(34069+ce,ye,Le,Ce.width,Ce.height,0,Ie,$e,Ce.data)}}}else{H=R.mipmaps,Ge&&dt&&(H.length>0&&Tt++,t.texStorage2D(34067,Tt,Le,ie[0].width,ie[0].height));for(let ce=0;ce<6;ce++)if(de){Ge?t.texSubImage2D(34069+ce,0,0,0,ie[ce].width,ie[ce].height,Ie,$e,ie[ce].data):t.texImage2D(34069+ce,0,Le,ie[ce].width,ie[ce].height,0,Ie,$e,ie[ce].data);for(let ye=0;ye<H.length;ye++){const Ce=H[ye].image[ce].image;Ge?t.texSubImage2D(34069+ce,ye+1,0,0,Ce.width,Ce.height,Ie,$e,Ce.data):t.texImage2D(34069+ce,ye+1,Le,Ce.width,Ce.height,0,Ie,$e,Ce.data)}}else{Ge?t.texSubImage2D(34069+ce,0,0,0,Ie,$e,ie[ce]):t.texImage2D(34069+ce,0,Le,Ie,$e,ie[ce]);for(let ye=0;ye<H.length;ye++){const Ce=H[ye];Ge?t.texSubImage2D(34069+ce,ye+1,0,0,Ie,$e,Ce.image[ce]):t.texImage2D(34069+ce,ye+1,Le,Ie,$e,Ce.image[ce])}}}S(R,Ne)&&A(34067),Se.__version=we.version,R.onUpdate&&R.onUpdate(R)}O.__version=R.version}function te(O,R,se,xe,we){const Se=s.convert(se.format,se.encoding),F=s.convert(se.type),de=k(se.internalFormat,Se,F,se.encoding);r.get(R).__hasExternalTextures||(we===32879||we===35866?t.texImage3D(we,0,de,R.width,R.height,R.depth,0,Se,F,null):t.texImage2D(we,0,de,R.width,R.height,0,Se,F,null)),t.bindFramebuffer(36160,O),st(R)?d.framebufferTexture2DMultisampleEXT(36160,xe,we,r.get(se).__webglTexture,0,wt(R)):(we===3553||we>=34069&&we<=34074)&&i.framebufferTexture2D(36160,xe,we,r.get(se).__webglTexture,0),t.bindFramebuffer(36160,null)}function be(O,R,se){if(i.bindRenderbuffer(36161,O),R.depthBuffer&&!R.stencilBuffer){let xe=33189;if(se||st(R)){const we=R.depthTexture;we&&we.isDepthTexture&&(we.type===bc?xe=36012:we.type===ch&&(xe=33190));const Se=wt(R);st(R)?d.renderbufferStorageMultisampleEXT(36161,Se,xe,R.width,R.height):i.renderbufferStorageMultisample(36161,Se,xe,R.width,R.height)}else i.renderbufferStorage(36161,xe,R.width,R.height);i.framebufferRenderbuffer(36160,36096,36161,O)}else if(R.depthBuffer&&R.stencilBuffer){const xe=wt(R);se&&st(R)===!1?i.renderbufferStorageMultisample(36161,xe,35056,R.width,R.height):st(R)?d.renderbufferStorageMultisampleEXT(36161,xe,35056,R.width,R.height):i.renderbufferStorage(36161,34041,R.width,R.height),i.framebufferRenderbuffer(36160,33306,36161,O)}else{const xe=R.isWebGLMultipleRenderTargets===!0?R.texture:[R.texture];for(let we=0;we<xe.length;we++){const Se=xe[we],F=s.convert(Se.format,Se.encoding),de=s.convert(Se.type),ie=k(Se.internalFormat,F,de,Se.encoding),Ee=wt(R);se&&st(R)===!1?i.renderbufferStorageMultisample(36161,Ee,ie,R.width,R.height):st(R)?d.renderbufferStorageMultisampleEXT(36161,Ee,ie,R.width,R.height):i.renderbufferStorage(36161,ie,R.width,R.height)}}i.bindRenderbuffer(36161,null)}function oe(O,R){if(R&&R.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,O),!(R.depthTexture&&R.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(R.depthTexture).__webglTexture||R.depthTexture.image.width!==R.width||R.depthTexture.image.height!==R.height)&&(R.depthTexture.image.width=R.width,R.depthTexture.image.height=R.height,R.depthTexture.needsUpdate=!0),ne(R.depthTexture,0);const se=r.get(R.depthTexture).__webglTexture,xe=wt(R);if(R.depthTexture.format===bh)st(R)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,se,0,xe):i.framebufferTexture2D(36160,36096,3553,se,0);else if(R.depthTexture.format===mm)st(R)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,se,0,xe):i.framebufferTexture2D(36160,33306,3553,se,0);else throw new Error("Unknown depthTexture format")}function Te(O){const R=r.get(O),se=O.isWebGLCubeRenderTarget===!0;if(O.depthTexture&&!R.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");oe(R.__webglFramebuffer,O)}else if(se){R.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)t.bindFramebuffer(36160,R.__webglFramebuffer[xe]),R.__webglDepthbuffer[xe]=i.createRenderbuffer(),be(R.__webglDepthbuffer[xe],O,!1)}else t.bindFramebuffer(36160,R.__webglFramebuffer),R.__webglDepthbuffer=i.createRenderbuffer(),be(R.__webglDepthbuffer,O,!1);t.bindFramebuffer(36160,null)}function Ae(O,R,se){const xe=r.get(O);R!==void 0&&te(xe.__webglFramebuffer,O,O.texture,36064,3553),se!==void 0&&Te(O)}function Qe(O){const R=O.texture,se=r.get(O),xe=r.get(R);O.addEventListener("dispose",N),O.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture===void 0&&(xe.__webglTexture=i.createTexture()),xe.__version=R.version,o.memory.textures++);const we=O.isWebGLCubeRenderTarget===!0,Se=O.isWebGLMultipleRenderTargets===!0,F=x(O)||a;if(we){se.__webglFramebuffer=[];for(let de=0;de<6;de++)se.__webglFramebuffer[de]=i.createFramebuffer()}else{if(se.__webglFramebuffer=i.createFramebuffer(),Se)if(n.drawBuffers){const de=O.texture;for(let ie=0,Ee=de.length;ie<Ee;ie++){const Ne=r.get(de[ie]);Ne.__webglTexture===void 0&&(Ne.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&O.samples>0&&st(O)===!1){const de=Se?R:[R];se.__webglMultisampledFramebuffer=i.createFramebuffer(),se.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,se.__webglMultisampledFramebuffer);for(let ie=0;ie<de.length;ie++){const Ee=de[ie];se.__webglColorRenderbuffer[ie]=i.createRenderbuffer(),i.bindRenderbuffer(36161,se.__webglColorRenderbuffer[ie]);const Ne=s.convert(Ee.format,Ee.encoding),Ie=s.convert(Ee.type),$e=k(Ee.internalFormat,Ne,Ie,Ee.encoding,O.isXRRenderTarget===!0),Le=wt(O);i.renderbufferStorageMultisample(36161,Le,$e,O.width,O.height),i.framebufferRenderbuffer(36160,36064+ie,36161,se.__webglColorRenderbuffer[ie])}i.bindRenderbuffer(36161,null),O.depthBuffer&&(se.__webglDepthRenderbuffer=i.createRenderbuffer(),be(se.__webglDepthRenderbuffer,O,!0)),t.bindFramebuffer(36160,null)}}if(we){t.bindTexture(34067,xe.__webglTexture),J(34067,R,F);for(let de=0;de<6;de++)te(se.__webglFramebuffer[de],O,R,36064,34069+de);S(R,F)&&A(34067),t.unbindTexture()}else if(Se){const de=O.texture;for(let ie=0,Ee=de.length;ie<Ee;ie++){const Ne=de[ie],Ie=r.get(Ne);t.bindTexture(3553,Ie.__webglTexture),J(3553,Ne,F),te(se.__webglFramebuffer,O,Ne,36064+ie,3553),S(Ne,F)&&A(3553)}t.unbindTexture()}else{let de=3553;(O.isWebGL3DRenderTarget||O.isWebGLArrayRenderTarget)&&(a?de=O.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(de,xe.__webglTexture),J(de,R,F),te(se.__webglFramebuffer,O,R,36064,de),S(R,F)&&A(de),t.unbindTexture()}O.depthBuffer&&Te(O)}function Ze(O){const R=x(O)||a,se=O.isWebGLMultipleRenderTargets===!0?O.texture:[O.texture];for(let xe=0,we=se.length;xe<we;xe++){const Se=se[xe];if(S(Se,R)){const F=O.isWebGLCubeRenderTarget?34067:3553,de=r.get(Se).__webglTexture;t.bindTexture(F,de),A(F),t.unbindTexture()}}}function ht(O){if(a&&O.samples>0&&st(O)===!1){const R=O.isWebGLMultipleRenderTargets?O.texture:[O.texture],se=O.width,xe=O.height;let we=16384;const Se=[],F=O.stencilBuffer?33306:36096,de=r.get(O),ie=O.isWebGLMultipleRenderTargets===!0;if(ie)for(let Ee=0;Ee<R.length;Ee++)t.bindFramebuffer(36160,de.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Ee,36161,null),t.bindFramebuffer(36160,de.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Ee,3553,null,0);t.bindFramebuffer(36008,de.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,de.__webglFramebuffer);for(let Ee=0;Ee<R.length;Ee++){Se.push(36064+Ee),O.depthBuffer&&Se.push(F);const Ne=de.__ignoreDepthValues!==void 0?de.__ignoreDepthValues:!1;if(Ne===!1&&(O.depthBuffer&&(we|=256),O.stencilBuffer&&(we|=1024)),ie&&i.framebufferRenderbuffer(36008,36064,36161,de.__webglColorRenderbuffer[Ee]),Ne===!0&&(i.invalidateFramebuffer(36008,[F]),i.invalidateFramebuffer(36009,[F])),ie){const Ie=r.get(R[Ee]).__webglTexture;i.framebufferTexture2D(36009,36064,3553,Ie,0)}i.blitFramebuffer(0,0,se,xe,0,0,se,xe,we,9728),f&&i.invalidateFramebuffer(36008,Se)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),ie)for(let Ee=0;Ee<R.length;Ee++){t.bindFramebuffer(36160,de.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Ee,36161,de.__webglColorRenderbuffer[Ee]);const Ne=r.get(R[Ee]).__webglTexture;t.bindFramebuffer(36160,de.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Ee,3553,Ne,0)}t.bindFramebuffer(36009,de.__webglMultisampledFramebuffer)}}function wt(O){return Math.min(h,O.samples)}function st(O){const R=r.get(O);return a&&O.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&R.__useRenderToTexture!==!1}function ft(O){const R=o.render.frame;g.get(O)!==R&&(g.set(O,R),O.update())}function Ft(O,R){const se=O.encoding,xe=O.format,we=O.type;return O.isCompressedTexture===!0||O.isVideoTexture===!0||O.format===dk||se!==Vh&&(se===qt?a===!1?e.has("EXT_sRGB")===!0&&xe===Ts?(O.format=dk,O.minFilter=Cr,O.generateMipmaps=!1):R=Uj.sRGBToLinear(R):(xe!==Ts||we!==Bh)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",se)),R}this.allocateTextureUnit=j,this.resetTextureUnits=Q,this.setTexture2D=ne,this.setTexture2DArray=ge,this.setTexture3D=pe,this.setTextureCube=V,this.rebindTextures=Ae,this.setupRenderTarget=Qe,this.updateRenderTargetMipmap=Ze,this.updateMultisampleRenderTarget=ht,this.setupDepthRenderbuffer=Te,this.setupFrameBufferTexture=te,this.useMultisampledRTT=st}function yxe(i,e,t){const r=t.isWebGL2;function n(s,o=null){let a;if(s===Bh)return 5121;if(s===X0e)return 32819;if(s===Y0e)return 32820;if(s===G0e)return 5120;if(s===W0e)return 5122;if(s===$j)return 5123;if(s===q0e)return 5124;if(s===ch)return 5125;if(s===bc)return 5126;if(s===fy)return r?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===K0e)return 6406;if(s===Ts)return 6408;if(s===Z0e)return 6409;if(s===J0e)return 6410;if(s===bh)return 6402;if(s===mm)return 34041;if(s===dk)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===Q0e)return 6403;if(s===e_e)return 36244;if(s===t_e)return 33319;if(s===i_e)return 33320;if(s===r_e)return 36249;if(s===XT||s===YT||s===KT||s===ZT)if(o===qt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===XT)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===YT)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===KT)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===ZT)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===XT)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===YT)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===KT)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===ZT)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===eO||s===tO||s===iO||s===rO)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===eO)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===tO)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===iO)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===rO)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===n_e)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===nO||s===sO)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===nO)return o===qt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===sO)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===oO||s===aO||s===lO||s===cO||s===uO||s===hO||s===dO||s===pO||s===fO||s===mO||s===gO||s===_O||s===yO||s===vO)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===oO)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===aO)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===lO)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===cO)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===uO)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===hO)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===dO)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===pO)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===fO)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===mO)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===gO)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===_O)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===yO)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===vO)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===JT)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===JT)return o===qt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===s_e||s===bO||s===xO||s===wO)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===JT)return a.COMPRESSED_RED_RGTC1_EXT;if(s===bO)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===xO)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===wO)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Pf?r?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):i[s]!==void 0?i[s]:null}return{convert:n}}class vxe extends pr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let Oi=class extends Li{constructor(){super(),this.isGroup=!0,this.type="Group"}};const bxe={type:"move"};class xE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Oi,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Oi,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new me,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new me),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Oi,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new me,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new me),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let n=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const v of e.hand.values()){const m=t.getJointPose(v,r),p=this._getHandJoint(c,v);m!==null&&(p.matrix.fromArray(m.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=m.radius),p.visible=m!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],d=u.position.distanceTo(h.position),f=.02,g=.005;c.inputState.pinching&&d>f+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(n=t.getPose(e.targetRaySpace,r),n===null&&s!==null&&(n=s),n!==null&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(bxe)))}return a!==null&&(a.visible=n!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Oi;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class xxe extends Jn{constructor(e,t,r,n,s,o,a,l,c,u){if(u=u!==void 0?u:bh,u!==bh&&u!==mm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===bh&&(r=ch),r===void 0&&u===mm&&(r=Pf),super(null,n,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:hr,this.minFilter=l!==void 0?l:hr,this.flipY=!1,this.generateMipmaps=!1}}class wxe extends dd{constructor(e,t){super();const r=this;let n=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,d=null,f=null,g=null;const v=t.getContextAttributes();let m=null,p=null;const y=[],_=[],x=new Set,w=new Map,S=new pr;S.layers.enable(1),S.viewport=new ui;const A=new pr;A.layers.enable(2),A.viewport=new ui;const k=[S,A],M=new vxe;M.layers.enable(1),M.layers.enable(2);let b=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(V){let Y=y[V];return Y===void 0&&(Y=new xE,y[V]=Y),Y.getTargetRaySpace()},this.getControllerGrip=function(V){let Y=y[V];return Y===void 0&&(Y=new xE,y[V]=Y),Y.getGripSpace()},this.getHand=function(V){let Y=y[V];return Y===void 0&&(Y=new xE,y[V]=Y),Y.getHandSpace()};function N(V){const Y=_.indexOf(V.inputSource);if(Y===-1)return;const ae=y[Y];ae!==void 0&&ae.dispatchEvent({type:V.type,data:V.inputSource})}function D(){n.removeEventListener("select",N),n.removeEventListener("selectstart",N),n.removeEventListener("selectend",N),n.removeEventListener("squeeze",N),n.removeEventListener("squeezestart",N),n.removeEventListener("squeezeend",N),n.removeEventListener("end",D),n.removeEventListener("inputsourceschange",U);for(let V=0;V<y.length;V++){const Y=_[V];Y!==null&&(_[V]=null,y[V].disconnect(Y))}b=null,P=null,e.setRenderTarget(m),f=null,d=null,h=null,n=null,p=null,pe.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(V){s=V,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(V){a=V,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(V){c=V},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return g},this.getSession=function(){return n},this.setSession=async function(V){if(n=V,n!==null){if(m=e.getRenderTarget(),n.addEventListener("select",N),n.addEventListener("selectstart",N),n.addEventListener("selectend",N),n.addEventListener("squeeze",N),n.addEventListener("squeezestart",N),n.addEventListener("squeezeend",N),n.addEventListener("end",D),n.addEventListener("inputsourceschange",U),v.xrCompatible!==!0&&await t.makeXRCompatible(),n.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Y={antialias:n.renderState.layers===void 0?v.antialias:!0,alpha:v.alpha,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(n,t,Y),n.updateRenderState({baseLayer:f}),p=new jh(f.framebufferWidth,f.framebufferHeight,{format:Ts,type:Bh,encoding:e.outputEncoding,stencilBuffer:v.stencil})}else{let Y=null,ae=null,J=null;v.depth&&(J=v.stencil?35056:33190,Y=v.stencil?mm:bh,ae=v.stencil?Pf:ch);const z={colorFormat:32856,depthFormat:J,scaleFactor:s};h=new XRWebGLBinding(n,t),d=h.createProjectionLayer(z),n.updateRenderState({layers:[d]}),p=new jh(d.textureWidth,d.textureHeight,{format:Ts,type:Bh,depthTexture:new xxe(d.textureWidth,d.textureHeight,ae,void 0,void 0,void 0,void 0,void 0,void 0,Y),stencilBuffer:v.stencil,encoding:e.outputEncoding,samples:v.antialias?4:0});const _e=e.properties.get(p);_e.__ignoreDepthValues=d.ignoreDepthValues}p.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await n.requestReferenceSpace(a),pe.setContext(n),pe.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function U(V){for(let Y=0;Y<V.removed.length;Y++){const ae=V.removed[Y],J=_.indexOf(ae);J>=0&&(_[J]=null,y[J].disconnect(ae))}for(let Y=0;Y<V.added.length;Y++){const ae=V.added[Y];let J=_.indexOf(ae);if(J===-1){for(let _e=0;_e<y.length;_e++)if(_e>=_.length){_.push(ae),J=_e;break}else if(_[_e]===null){_[_e]=ae,J=_e;break}if(J===-1)break}const z=y[J];z&&z.connect(ae)}}const G=new me,B=new me;function Q(V,Y,ae){G.setFromMatrixPosition(Y.matrixWorld),B.setFromMatrixPosition(ae.matrixWorld);const J=G.distanceTo(B),z=Y.projectionMatrix.elements,_e=ae.projectionMatrix.elements,ee=z[14]/(z[10]-1),te=z[14]/(z[10]+1),be=(z[9]+1)/z[5],oe=(z[9]-1)/z[5],Te=(z[8]-1)/z[0],Ae=(_e[8]+1)/_e[0],Qe=ee*Te,Ze=ee*Ae,ht=J/(-Te+Ae),wt=ht*-Te;Y.matrixWorld.decompose(V.position,V.quaternion,V.scale),V.translateX(wt),V.translateZ(ht),V.matrixWorld.compose(V.position,V.quaternion,V.scale),V.matrixWorldInverse.copy(V.matrixWorld).invert();const st=ee+ht,ft=te+ht,Ft=Qe-wt,O=Ze+(J-wt),R=be*te/ft*st,se=oe*te/ft*st;V.projectionMatrix.makePerspective(Ft,O,R,se,st,ft),V.projectionMatrixInverse.copy(V.projectionMatrix).invert()}function j(V,Y){Y===null?V.matrixWorld.copy(V.matrix):V.matrixWorld.multiplyMatrices(Y.matrixWorld,V.matrix),V.matrixWorldInverse.copy(V.matrixWorld).invert()}this.updateCamera=function(V){if(n===null)return;M.near=A.near=S.near=V.near,M.far=A.far=S.far=V.far,(b!==M.near||P!==M.far)&&(n.updateRenderState({depthNear:M.near,depthFar:M.far}),b=M.near,P=M.far);const Y=V.parent,ae=M.cameras;j(M,Y);for(let J=0;J<ae.length;J++)j(ae[J],Y);ae.length===2?Q(M,S,A):M.projectionMatrix.copy(S.projectionMatrix),X(V,M,Y)};function X(V,Y,ae){ae===null?V.matrix.copy(Y.matrixWorld):(V.matrix.copy(ae.matrixWorld),V.matrix.invert(),V.matrix.multiply(Y.matrixWorld)),V.matrix.decompose(V.position,V.quaternion,V.scale),V.updateMatrixWorld(!0);const J=V.children;for(let z=0,_e=J.length;z<_e;z++)J[z].updateMatrixWorld(!0);V.projectionMatrix.copy(Y.projectionMatrix),V.projectionMatrixInverse.copy(Y.projectionMatrixInverse),V.isPerspectiveCamera&&(V.fov=_m*2*Math.atan(1/V.projectionMatrix.elements[5]),V.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(V){l=V,d!==null&&(d.fixedFoveation=V),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=V)},this.getPlanes=function(){return x};let ne=null;function ge(V,Y){if(u=Y.getViewerPose(c||o),g=Y,u!==null){const ae=u.views;f!==null&&(e.setRenderTargetFramebuffer(p,f.framebuffer),e.setRenderTarget(p));let J=!1;ae.length!==M.cameras.length&&(M.cameras.length=0,J=!0);for(let z=0;z<ae.length;z++){const _e=ae[z];let ee=null;if(f!==null)ee=f.getViewport(_e);else{const be=h.getViewSubImage(d,_e);ee=be.viewport,z===0&&(e.setRenderTargetTextures(p,be.colorTexture,d.ignoreDepthValues?void 0:be.depthStencilTexture),e.setRenderTarget(p))}let te=k[z];te===void 0&&(te=new pr,te.layers.enable(z),te.viewport=new ui,k[z]=te),te.matrix.fromArray(_e.transform.matrix),te.matrix.decompose(te.position,te.quaternion,te.scale),te.projectionMatrix.fromArray(_e.projectionMatrix),te.projectionMatrixInverse.copy(te.projectionMatrix).invert(),te.viewport.set(ee.x,ee.y,ee.width,ee.height),z===0&&(M.matrix.copy(te.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),J===!0&&M.cameras.push(te)}}for(let ae=0;ae<y.length;ae++){const J=_[ae],z=y[ae];J!==null&&z!==void 0&&z.update(J,Y,c||o)}if(ne&&ne(V,Y),Y.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:Y.detectedPlanes});let ae=null;for(const J of x)Y.detectedPlanes.has(J)||(ae===null&&(ae=[]),ae.push(J));if(ae!==null)for(const J of ae)x.delete(J),w.delete(J),r.dispatchEvent({type:"planeremoved",data:J});for(const J of Y.detectedPlanes)if(!x.has(J))x.add(J),w.set(J,Y.lastChangedTime),r.dispatchEvent({type:"planeadded",data:J});else{const z=w.get(J);J.lastChangedTime>z&&(w.set(J,J.lastChangedTime),r.dispatchEvent({type:"planechanged",data:J}))}}g=null}const pe=new Jj;pe.setAnimationLoop(ge),this.setAnimationLoop=function(V){ne=V},this.dispose=function(){}}}function Mxe(i,e){function t(m,p){m.matrixAutoUpdate===!0&&m.updateMatrix(),p.value.copy(m.matrix)}function r(m,p){p.color.getRGB(m.fogColor.value,Yj(i)),p.isFog?(m.fogNear.value=p.near,m.fogFar.value=p.far):p.isFogExp2&&(m.fogDensity.value=p.density)}function n(m,p,y,_,x){p.isMeshBasicMaterial||p.isMeshLambertMaterial?s(m,p):p.isMeshToonMaterial?(s(m,p),h(m,p)):p.isMeshPhongMaterial?(s(m,p),u(m,p)):p.isMeshStandardMaterial?(s(m,p),d(m,p),p.isMeshPhysicalMaterial&&f(m,p,x)):p.isMeshMatcapMaterial?(s(m,p),g(m,p)):p.isMeshDepthMaterial?s(m,p):p.isMeshDistanceMaterial?(s(m,p),v(m,p)):p.isMeshNormalMaterial?s(m,p):p.isLineBasicMaterial?(o(m,p),p.isLineDashedMaterial&&a(m,p)):p.isPointsMaterial?l(m,p,y,_):p.isSpriteMaterial?c(m,p):p.isShadowMaterial?(m.color.value.copy(p.color),m.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function s(m,p){m.opacity.value=p.opacity,p.color&&m.diffuse.value.copy(p.color),p.emissive&&m.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(m.map.value=p.map,t(p.map,m.mapTransform)),p.alphaMap&&(m.alphaMap.value=p.alphaMap,t(p.alphaMap,m.alphaMapTransform)),p.bumpMap&&(m.bumpMap.value=p.bumpMap,t(p.bumpMap,m.bumpMapTransform),m.bumpScale.value=p.bumpScale,p.side===xn&&(m.bumpScale.value*=-1)),p.normalMap&&(m.normalMap.value=p.normalMap,t(p.normalMap,m.normalMapTransform),m.normalScale.value.copy(p.normalScale),p.side===xn&&m.normalScale.value.negate()),p.displacementMap&&(m.displacementMap.value=p.displacementMap,t(p.displacementMap,m.displacementMapTransform),m.displacementScale.value=p.displacementScale,m.displacementBias.value=p.displacementBias),p.emissiveMap&&(m.emissiveMap.value=p.emissiveMap,t(p.emissiveMap,m.emissiveMapTransform)),p.specularMap&&(m.specularMap.value=p.specularMap,t(p.specularMap,m.specularMapTransform)),p.alphaTest>0&&(m.alphaTest.value=p.alphaTest);const y=e.get(p).envMap;if(y&&(m.envMap.value=y,m.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=p.reflectivity,m.ior.value=p.ior,m.refractionRatio.value=p.refractionRatio),p.lightMap){m.lightMap.value=p.lightMap;const _=i.useLegacyLights===!0?Math.PI:1;m.lightMapIntensity.value=p.lightMapIntensity*_,t(p.lightMap,m.lightMapTransform)}p.aoMap&&(m.aoMap.value=p.aoMap,m.aoMapIntensity.value=p.aoMapIntensity,t(p.aoMap,m.aoMapTransform))}function o(m,p){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,p.map&&(m.map.value=p.map,t(p.map,m.mapTransform))}function a(m,p){m.dashSize.value=p.dashSize,m.totalSize.value=p.dashSize+p.gapSize,m.scale.value=p.scale}function l(m,p,y,_){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,m.size.value=p.size*y,m.scale.value=_*.5,p.map&&(m.map.value=p.map,t(p.map,m.uvTransform)),p.alphaMap&&(m.alphaMap.value=p.alphaMap),p.alphaTest>0&&(m.alphaTest.value=p.alphaTest)}function c(m,p){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,m.rotation.value=p.rotation,p.map&&(m.map.value=p.map,t(p.map,m.mapTransform)),p.alphaMap&&(m.alphaMap.value=p.alphaMap),p.alphaTest>0&&(m.alphaTest.value=p.alphaTest)}function u(m,p){m.specular.value.copy(p.specular),m.shininess.value=Math.max(p.shininess,1e-4)}function h(m,p){p.gradientMap&&(m.gradientMap.value=p.gradientMap)}function d(m,p){m.metalness.value=p.metalness,p.metalnessMap&&(m.metalnessMap.value=p.metalnessMap,t(p.metalnessMap,m.metalnessMapTransform)),m.roughness.value=p.roughness,p.roughnessMap&&(m.roughnessMap.value=p.roughnessMap,t(p.roughnessMap,m.roughnessMapTransform)),e.get(p).envMap&&(m.envMapIntensity.value=p.envMapIntensity)}function f(m,p,y){m.ior.value=p.ior,p.sheen>0&&(m.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),m.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(m.sheenColorMap.value=p.sheenColorMap,t(p.sheenColorMap,m.sheenColorMapTransform)),p.sheenRoughnessMap&&(m.sheenRoughnessMap.value=p.sheenRoughnessMap,t(p.sheenRoughnessMap,m.sheenRoughnessMapTransform))),p.clearcoat>0&&(m.clearcoat.value=p.clearcoat,m.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(m.clearcoatMap.value=p.clearcoatMap,t(p.clearcoatMap,m.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,t(p.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(m.clearcoatNormalMap.value=p.clearcoatNormalMap,t(p.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===xn&&m.clearcoatNormalScale.value.negate())),p.iridescence>0&&(m.iridescence.value=p.iridescence,m.iridescenceIOR.value=p.iridescenceIOR,m.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(m.iridescenceMap.value=p.iridescenceMap,t(p.iridescenceMap,m.iridescenceMapTransform)),p.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=p.iridescenceThicknessMap,t(p.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),p.transmission>0&&(m.transmission.value=p.transmission,m.transmissionSamplerMap.value=y.texture,m.transmissionSamplerSize.value.set(y.width,y.height),p.transmissionMap&&(m.transmissionMap.value=p.transmissionMap,t(p.transmissionMap,m.transmissionMapTransform)),m.thickness.value=p.thickness,p.thicknessMap&&(m.thicknessMap.value=p.thicknessMap,t(p.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=p.attenuationDistance,m.attenuationColor.value.copy(p.attenuationColor)),m.specularIntensity.value=p.specularIntensity,m.specularColor.value.copy(p.specularColor),p.specularColorMap&&(m.specularColorMap.value=p.specularColorMap,t(p.specularColorMap,m.specularColorMapTransform)),p.specularIntensityMap&&(m.specularIntensityMap.value=p.specularIntensityMap,t(p.specularIntensityMap,m.specularIntensityMapTransform))}function g(m,p){p.matcap&&(m.matcap.value=p.matcap)}function v(m,p){const y=e.get(p).light;m.referencePosition.value.setFromMatrixPosition(y.matrixWorld),m.nearDistance.value=y.shadow.camera.near,m.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:n}}function Sxe(i,e,t,r){let n={},s={},o=[];const a=t.isWebGL2?i.getParameter(35375):0;function l(y,_){const x=_.program;r.uniformBlockBinding(y,x)}function c(y,_){let x=n[y.id];x===void 0&&(g(y),x=u(y),n[y.id]=x,y.addEventListener("dispose",m));const w=_.program;r.updateUBOMapping(y,w);const S=e.render.frame;s[y.id]!==S&&(d(y),s[y.id]=S)}function u(y){const _=h();y.__bindingPointIndex=_;const x=i.createBuffer(),w=y.__size,S=y.usage;return i.bindBuffer(35345,x),i.bufferData(35345,w,S),i.bindBuffer(35345,null),i.bindBufferBase(35345,_,x),x}function h(){for(let y=0;y<a;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){const _=n[y.id],x=y.uniforms,w=y.__cache;i.bindBuffer(35345,_);for(let S=0,A=x.length;S<A;S++){const k=x[S];if(f(k,S,w)===!0){const M=k.__offset,b=Array.isArray(k.value)?k.value:[k.value];let P=0;for(let N=0;N<b.length;N++){const D=b[N],U=v(D);typeof D=="number"?(k.__data[0]=D,i.bufferSubData(35345,M+P,k.__data)):D.isMatrix3?(k.__data[0]=D.elements[0],k.__data[1]=D.elements[1],k.__data[2]=D.elements[2],k.__data[3]=D.elements[0],k.__data[4]=D.elements[3],k.__data[5]=D.elements[4],k.__data[6]=D.elements[5],k.__data[7]=D.elements[0],k.__data[8]=D.elements[6],k.__data[9]=D.elements[7],k.__data[10]=D.elements[8],k.__data[11]=D.elements[0]):(D.toArray(k.__data,P),P+=U.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(35345,M,k.__data)}}i.bindBuffer(35345,null)}function f(y,_,x){const w=y.value;if(x[_]===void 0){if(typeof w=="number")x[_]=w;else{const S=Array.isArray(w)?w:[w],A=[];for(let k=0;k<S.length;k++)A.push(S[k].clone());x[_]=A}return!0}else if(typeof w=="number"){if(x[_]!==w)return x[_]=w,!0}else{const S=Array.isArray(x[_])?x[_]:[x[_]],A=Array.isArray(w)?w:[w];for(let k=0;k<S.length;k++){const M=S[k];if(M.equals(A[k])===!1)return M.copy(A[k]),!0}}return!1}function g(y){const _=y.uniforms;let x=0;const w=16;let S=0;for(let A=0,k=_.length;A<k;A++){const M=_[A],b={boundary:0,storage:0},P=Array.isArray(M.value)?M.value:[M.value];for(let N=0,D=P.length;N<D;N++){const U=P[N],G=v(U);b.boundary+=G.boundary,b.storage+=G.storage}if(M.__data=new Float32Array(b.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=x,A>0){S=x%w;const N=w-S;S!==0&&N-b.boundary<0&&(x+=w-S,M.__offset=x)}x+=b.storage}return S=x%w,S>0&&(x+=w-S),y.__size=x,y.__cache={},this}function v(y){const _={boundary:0,storage:0};return typeof y=="number"?(_.boundary=4,_.storage=4):y.isVector2?(_.boundary=8,_.storage=8):y.isVector3||y.isColor?(_.boundary=16,_.storage=12):y.isVector4?(_.boundary=16,_.storage=16):y.isMatrix3?(_.boundary=48,_.storage=48):y.isMatrix4?(_.boundary=64,_.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),_}function m(y){const _=y.target;_.removeEventListener("dispose",m);const x=o.indexOf(_.__bindingPointIndex);o.splice(x,1),i.deleteBuffer(n[_.id]),delete n[_.id],delete s[_.id]}function p(){for(const y in n)i.deleteBuffer(n[y]);o=[],n={},s={}}return{bind:l,update:c,dispose:p}}function Txe(){const i=gy("canvas");return i.style.display="block",i}class vL{constructor(e={}){const{canvas:t=Txe(),context:r=null,depth:n=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let d;r!==null?d=r.getContextAttributes().alpha:d=o;let f=null,g=null;const v=[],m=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Vh,this.useLegacyLights=!0,this.toneMapping=nl,this.toneMappingExposure=1;const p=this;let y=!1,_=0,x=0,w=null,S=-1,A=null;const k=new ui,M=new ui;let b=null,P=t.width,N=t.height,D=1,U=null,G=null;const B=new ui(0,0,P,N),Q=new ui(0,0,P,N);let j=!1;const X=new _L;let ne=!1,ge=!1,pe=null;const V=new Pt,Y=new me,ae={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function J(){return w===null?D:1}let z=r;function _e(I,Z){for(let le=0;le<I.length;le++){const K=I[le],ue=t.getContext(K,Z);if(ue!==null)return ue}return null}try{const I={alpha:!0,depth:n,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${fL}`),t.addEventListener("webglcontextlost",Le,!1),t.addEventListener("webglcontextrestored",Ge,!1),t.addEventListener("webglcontextcreationerror",dt,!1),z===null){const Z=["webgl2","webgl","experimental-webgl"];if(p.isWebGL1Renderer===!0&&Z.shift(),z=_e(Z,I),z===null)throw _e(Z)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}z.getShaderPrecisionFormat===void 0&&(z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(I){throw console.error("THREE.WebGLRenderer: "+I.message),I}let ee,te,be,oe,Te,Ae,Qe,Ze,ht,wt,st,ft,Ft,O,R,se,xe,we,Se,F,de,ie,Ee,Ne;function Ie(){ee=new D1e(z),te=new $1e(z,ee,e),ee.init(te),ie=new yxe(z,ee,te),be=new gxe(z,ee,te),oe=new z1e,Te=new ixe,Ae=new _xe(z,ee,be,Te,te,ie,oe),Qe=new R1e(p),Ze=new I1e(p),ht=new Z_e(z,te),Ee=new k1e(z,ee,ht,te),wt=new O1e(z,ht,oe,Ee),st=new j1e(z,wt,ht,oe),Se=new V1e(z,te,Ae),se=new L1e(Te),ft=new txe(p,Qe,Ze,ee,te,Ee,se),Ft=new Mxe(p,Te),O=new nxe,R=new uxe(ee,te),we=new A1e(p,Qe,Ze,be,st,d,l),xe=new mxe(p,st,te),Ne=new Sxe(z,oe,te,be),F=new C1e(z,ee,oe,te),de=new U1e(z,ee,oe,te),oe.programs=ft.programs,p.capabilities=te,p.extensions=ee,p.properties=Te,p.renderLists=O,p.shadowMap=xe,p.state=be,p.info=oe}Ie();const $e=new wxe(p,z);this.xr=$e,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){const I=ee.get("WEBGL_lose_context");I&&I.loseContext()},this.forceContextRestore=function(){const I=ee.get("WEBGL_lose_context");I&&I.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(I){I!==void 0&&(D=I,this.setSize(P,N,!1))},this.getSize=function(I){return I.set(P,N)},this.setSize=function(I,Z,le=!0){if($e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}P=I,N=Z,t.width=Math.floor(I*D),t.height=Math.floor(Z*D),le===!0&&(t.style.width=I+"px",t.style.height=Z+"px"),this.setViewport(0,0,I,Z)},this.getDrawingBufferSize=function(I){return I.set(P*D,N*D).floor()},this.setDrawingBufferSize=function(I,Z,le){P=I,N=Z,D=le,t.width=Math.floor(I*le),t.height=Math.floor(Z*le),this.setViewport(0,0,I,Z)},this.getCurrentViewport=function(I){return I.copy(k)},this.getViewport=function(I){return I.copy(B)},this.setViewport=function(I,Z,le,K){I.isVector4?B.set(I.x,I.y,I.z,I.w):B.set(I,Z,le,K),be.viewport(k.copy(B).multiplyScalar(D).floor())},this.getScissor=function(I){return I.copy(Q)},this.setScissor=function(I,Z,le,K){I.isVector4?Q.set(I.x,I.y,I.z,I.w):Q.set(I,Z,le,K),be.scissor(M.copy(Q).multiplyScalar(D).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(I){be.setScissorTest(j=I)},this.setOpaqueSort=function(I){U=I},this.setTransparentSort=function(I){G=I},this.getClearColor=function(I){return I.copy(we.getClearColor())},this.setClearColor=function(){we.setClearColor.apply(we,arguments)},this.getClearAlpha=function(){return we.getClearAlpha()},this.setClearAlpha=function(){we.setClearAlpha.apply(we,arguments)},this.clear=function(I=!0,Z=!0,le=!0){let K=0;I&&(K|=16384),Z&&(K|=256),le&&(K|=1024),z.clear(K)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Le,!1),t.removeEventListener("webglcontextrestored",Ge,!1),t.removeEventListener("webglcontextcreationerror",dt,!1),O.dispose(),R.dispose(),Te.dispose(),Qe.dispose(),Ze.dispose(),st.dispose(),Ee.dispose(),Ne.dispose(),ft.dispose(),$e.dispose(),$e.removeEventListener("sessionstart",Fe),$e.removeEventListener("sessionend",vt),pe&&(pe.dispose(),pe=null),St.stop()};function Le(I){I.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function Ge(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const I=oe.autoReset,Z=xe.enabled,le=xe.autoUpdate,K=xe.needsUpdate,ue=xe.type;Ie(),oe.autoReset=I,xe.enabled=Z,xe.autoUpdate=le,xe.needsUpdate=K,xe.type=ue}function dt(I){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",I.statusMessage)}function Tt(I){const Z=I.target;Z.removeEventListener("dispose",Tt),H(Z)}function H(I){ce(I),Te.remove(I)}function ce(I){const Z=Te.get(I).programs;Z!==void 0&&(Z.forEach(function(le){ft.releaseProgram(le)}),I.isShaderMaterial&&ft.releaseShaderCache(I))}this.renderBufferDirect=function(I,Z,le,K,ue,De){Z===null&&(Z=ae);const je=ue.isMesh&&ue.matrixWorld.determinant()<0,We=mu(I,Z,le,K,ue);be.setMaterial(K,je);let Je=le.index,ot=1;K.wireframe===!0&&(Je=wt.getWireframeAttribute(le),ot=2);const tt=le.drawRange,et=le.attributes.position;let Mt=tt.start*ot,mt=(tt.start+tt.count)*ot;De!==null&&(Mt=Math.max(Mt,De.start*ot),mt=Math.min(mt,(De.start+De.count)*ot)),Je!==null?(Mt=Math.max(Mt,0),mt=Math.min(mt,Je.count)):et!=null&&(Mt=Math.max(Mt,0),mt=Math.min(mt,et.count));const Bt=mt-Mt;if(Bt<0||Bt===1/0)return;Ee.setup(ue,K,We,le,Je);let Mi,kt=F;if(Je!==null&&(Mi=ht.get(Je),kt=de,kt.setIndex(Mi)),ue.isMesh)K.wireframe===!0?(be.setLineWidth(K.wireframeLinewidth*J()),kt.setMode(1)):kt.setMode(4);else if(ue.isLine){let nt=K.linewidth;nt===void 0&&(nt=1),be.setLineWidth(nt*J()),ue.isLineSegments?kt.setMode(1):ue.isLineLoop?kt.setMode(2):kt.setMode(3)}else ue.isPoints?kt.setMode(0):ue.isSprite&&kt.setMode(4);if(ue.isInstancedMesh)kt.renderInstances(Mt,Bt,ue.count);else if(le.isInstancedBufferGeometry){const nt=le._maxInstanceCount!==void 0?le._maxInstanceCount:1/0,$n=Math.min(le.instanceCount,nt);kt.renderInstances(Mt,Bt,$n)}else kt.render(Mt,Bt)},this.compile=function(I,Z){function le(K,ue,De){K.transparent===!0&&K.side===Ss&&K.forceSinglePass===!1?(K.side=xn,K.needsUpdate=!0,Cn(K,ue,De),K.side=Xo,K.needsUpdate=!0,Cn(K,ue,De),K.side=Ss):Cn(K,ue,De)}g=R.get(I),g.init(),m.push(g),I.traverseVisible(function(K){K.isLight&&K.layers.test(Z.layers)&&(g.pushLight(K),K.castShadow&&g.pushShadow(K))}),g.setupLights(p.useLegacyLights),I.traverse(function(K){const ue=K.material;if(ue)if(Array.isArray(ue))for(let De=0;De<ue.length;De++){const je=ue[De];le(je,I,K)}else le(ue,I,K)}),m.pop(),g=null};let ye=null;function Ce(I){ye&&ye(I)}function Fe(){St.stop()}function vt(){St.start()}const St=new Jj;St.setAnimationLoop(Ce),typeof self<"u"&&St.setContext(self),this.setAnimationLoop=function(I){ye=I,$e.setAnimationLoop(I),I===null?St.stop():St.start()},$e.addEventListener("sessionstart",Fe),$e.addEventListener("sessionend",vt),this.render=function(I,Z){if(Z!==void 0&&Z.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;I.matrixWorldAutoUpdate===!0&&I.updateMatrixWorld(),Z.parent===null&&Z.matrixWorldAutoUpdate===!0&&Z.updateMatrixWorld(),$e.enabled===!0&&$e.isPresenting===!0&&($e.cameraAutoUpdate===!0&&$e.updateCamera(Z),Z=$e.getCamera()),I.isScene===!0&&I.onBeforeRender(p,I,Z,w),g=R.get(I,m.length),g.init(),m.push(g),V.multiplyMatrices(Z.projectionMatrix,Z.matrixWorldInverse),X.setFromProjectionMatrix(V),ge=this.localClippingEnabled,ne=se.init(this.clippingPlanes,ge),f=O.get(I,v.length),f.init(),v.push(f),Dt(I,Z,0,p.sortObjects),f.finish(),p.sortObjects===!0&&f.sort(U,G),ne===!0&&se.beginShadows();const le=g.state.shadowsArray;if(xe.render(le,I,Z),ne===!0&&se.endShadows(),this.info.autoReset===!0&&this.info.reset(),we.render(f,I),g.setupLights(p.useLegacyLights),Z.isArrayCamera){const K=Z.cameras;for(let ue=0,De=K.length;ue<De;ue++){const je=K[ue];Fi(f,I,je,je.viewport)}}else Fi(f,I,Z);w!==null&&(Ae.updateMultisampleRenderTarget(w),Ae.updateRenderTargetMipmap(w)),I.isScene===!0&&I.onAfterRender(p,I,Z),Ee.resetDefaultState(),S=-1,A=null,m.pop(),m.length>0?g=m[m.length-1]:g=null,v.pop(),v.length>0?f=v[v.length-1]:f=null};function Dt(I,Z,le,K){if(I.visible===!1)return;if(I.layers.test(Z.layers)){if(I.isGroup)le=I.renderOrder;else if(I.isLOD)I.autoUpdate===!0&&I.update(Z);else if(I.isLight)g.pushLight(I),I.castShadow&&g.pushShadow(I);else if(I.isSprite){if(!I.frustumCulled||X.intersectsSprite(I)){K&&Y.setFromMatrixPosition(I.matrixWorld).applyMatrix4(V);const De=st.update(I),je=I.material;je.visible&&f.push(I,De,je,le,Y.z,null)}}else if((I.isMesh||I.isLine||I.isPoints)&&(I.isSkinnedMesh&&I.skeleton.frame!==oe.render.frame&&(I.skeleton.update(),I.skeleton.frame=oe.render.frame),!I.frustumCulled||X.intersectsObject(I))){K&&Y.setFromMatrixPosition(I.matrixWorld).applyMatrix4(V);const De=st.update(I),je=I.material;if(Array.isArray(je)){const We=De.groups;for(let Je=0,ot=We.length;Je<ot;Je++){const tt=We[Je],et=je[tt.materialIndex];et&&et.visible&&f.push(I,De,et,le,Y.z,tt)}}else je.visible&&f.push(I,De,je,le,Y.z,null)}}const ue=I.children;for(let De=0,je=ue.length;De<je;De++)Dt(ue[De],Z,le,K)}function Fi(I,Z,le,K){const ue=I.opaque,De=I.transmissive,je=I.transparent;g.setupLightsView(le),ne===!0&&se.setGlobalState(p.clippingPlanes,le),De.length>0&&at(ue,De,Z,le),K&&be.viewport(k.copy(K)),ue.length>0&&ei(ue,Z,le),De.length>0&&ei(De,Z,le),je.length>0&&ei(je,Z,le),be.buffers.depth.setTest(!0),be.buffers.depth.setMask(!0),be.buffers.color.setMask(!0),be.setPolygonOffset(!1)}function at(I,Z,le,K){if(pe===null){const We=te.isWebGL2;pe=new jh(1024,1024,{generateMipmaps:!0,type:ee.has("EXT_color_buffer_half_float")?fy:Bh,minFilter:fl,samples:We&&a===!0?4:0})}const ue=p.getRenderTarget();p.setRenderTarget(pe),p.clear();const De=p.toneMapping;p.toneMapping=nl,ei(I,le,K),Ae.updateMultisampleRenderTarget(pe),Ae.updateRenderTargetMipmap(pe);let je=!1;for(let We=0,Je=Z.length;We<Je;We++){const ot=Z[We],tt=ot.object,et=ot.geometry,Mt=ot.material,mt=ot.group;if(Mt.side===Ss&&tt.layers.test(K.layers)){const Bt=Mt.side;Mt.side=xn,Mt.needsUpdate=!0,fi(tt,le,K,et,Mt,mt),Mt.side=Bt,Mt.needsUpdate=!0,je=!0}}je===!0&&(Ae.updateMultisampleRenderTarget(pe),Ae.updateRenderTargetMipmap(pe)),p.setRenderTarget(ue),p.toneMapping=De}function ei(I,Z,le){const K=Z.isScene===!0?Z.overrideMaterial:null;for(let ue=0,De=I.length;ue<De;ue++){const je=I[ue],We=je.object,Je=je.geometry,ot=K===null?je.material:K,tt=je.group;We.layers.test(le.layers)&&fi(We,Z,le,Je,ot,tt)}}function fi(I,Z,le,K,ue,De){I.onBeforeRender(p,Z,le,K,ue,De),I.modelViewMatrix.multiplyMatrices(le.matrixWorldInverse,I.matrixWorld),I.normalMatrix.getNormalMatrix(I.modelViewMatrix),ue.onBeforeRender(p,Z,le,K,I,De),ue.transparent===!0&&ue.side===Ss&&ue.forceSinglePass===!1?(ue.side=xn,ue.needsUpdate=!0,p.renderBufferDirect(le,Z,K,ue,I,De),ue.side=Xo,ue.needsUpdate=!0,p.renderBufferDirect(le,Z,K,ue,I,De),ue.side=Ss):p.renderBufferDirect(le,Z,K,ue,I,De),I.onAfterRender(p,Z,le,K,ue,De)}function Cn(I,Z,le){Z.isScene!==!0&&(Z=ae);const K=Te.get(I),ue=g.state.lights,De=g.state.shadowsArray,je=ue.state.version,We=ft.getParameters(I,ue.state,De,Z,le),Je=ft.getProgramCacheKey(We);let ot=K.programs;K.environment=I.isMeshStandardMaterial?Z.environment:null,K.fog=Z.fog,K.envMap=(I.isMeshStandardMaterial?Ze:Qe).get(I.envMap||K.environment),ot===void 0&&(I.addEventListener("dispose",Tt),ot=new Map,K.programs=ot);let tt=ot.get(Je);if(tt!==void 0){if(K.currentProgram===tt&&K.lightsStateVersion===je)return pa(I,We),tt}else We.uniforms=ft.getUniforms(I),I.onBuild(le,We,p),I.onBeforeCompile(We,p),tt=ft.acquireProgram(We,Je),ot.set(Je,tt),K.uniforms=We.uniforms;const et=K.uniforms;(!I.isShaderMaterial&&!I.isRawShaderMaterial||I.clipping===!0)&&(et.clippingPlanes=se.uniform),pa(I,We),K.needsLights=_u(I),K.lightsStateVersion=je,K.needsLights&&(et.ambientLightColor.value=ue.state.ambient,et.lightProbe.value=ue.state.probe,et.directionalLights.value=ue.state.directional,et.directionalLightShadows.value=ue.state.directionalShadow,et.spotLights.value=ue.state.spot,et.spotLightShadows.value=ue.state.spotShadow,et.rectAreaLights.value=ue.state.rectArea,et.ltc_1.value=ue.state.rectAreaLTC1,et.ltc_2.value=ue.state.rectAreaLTC2,et.pointLights.value=ue.state.point,et.pointLightShadows.value=ue.state.pointShadow,et.hemisphereLights.value=ue.state.hemi,et.directionalShadowMap.value=ue.state.directionalShadowMap,et.directionalShadowMatrix.value=ue.state.directionalShadowMatrix,et.spotShadowMap.value=ue.state.spotShadowMap,et.spotLightMatrix.value=ue.state.spotLightMatrix,et.spotLightMap.value=ue.state.spotLightMap,et.pointShadowMap.value=ue.state.pointShadowMap,et.pointShadowMatrix.value=ue.state.pointShadowMatrix);const Mt=tt.getUniforms(),mt=wx.seqWithValue(Mt.seq,et);return K.currentProgram=tt,K.uniformsList=mt,tt}function pa(I,Z){const le=Te.get(I);le.outputEncoding=Z.outputEncoding,le.instancing=Z.instancing,le.skinning=Z.skinning,le.morphTargets=Z.morphTargets,le.morphNormals=Z.morphNormals,le.morphColors=Z.morphColors,le.morphTargetsCount=Z.morphTargetsCount,le.numClippingPlanes=Z.numClippingPlanes,le.numIntersection=Z.numClipIntersection,le.vertexAlphas=Z.vertexAlphas,le.vertexTangents=Z.vertexTangents,le.toneMapping=Z.toneMapping}function mu(I,Z,le,K,ue){Z.isScene!==!0&&(Z=ae),Ae.resetTextureUnits();const De=Z.fog,je=K.isMeshStandardMaterial?Z.environment:null,We=w===null?p.outputEncoding:w.isXRRenderTarget===!0?w.texture.encoding:Vh,Je=(K.isMeshStandardMaterial?Ze:Qe).get(K.envMap||je),ot=K.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,tt=!!K.normalMap&&!!le.attributes.tangent,et=!!le.morphAttributes.position,Mt=!!le.morphAttributes.normal,mt=!!le.morphAttributes.color,Bt=K.toneMapped?p.toneMapping:nl,Mi=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,kt=Mi!==void 0?Mi.length:0,nt=Te.get(K),$n=g.state.lights;if(ne===!0&&(ge===!0||I!==A)){const ti=I===A&&K.id===S;se.setState(K,I,ti)}let Ws=!1;K.version===nt.__version?(nt.needsLights&&nt.lightsStateVersion!==$n.state.version||nt.outputEncoding!==We||ue.isInstancedMesh&&nt.instancing===!1||!ue.isInstancedMesh&&nt.instancing===!0||ue.isSkinnedMesh&&nt.skinning===!1||!ue.isSkinnedMesh&&nt.skinning===!0||nt.envMap!==Je||K.fog===!0&&nt.fog!==De||nt.numClippingPlanes!==void 0&&(nt.numClippingPlanes!==se.numPlanes||nt.numIntersection!==se.numIntersection)||nt.vertexAlphas!==ot||nt.vertexTangents!==tt||nt.morphTargets!==et||nt.morphNormals!==Mt||nt.morphColors!==mt||nt.toneMapping!==Bt||te.isWebGL2===!0&&nt.morphTargetsCount!==kt)&&(Ws=!0):(Ws=!0,nt.__version=K.version);let qi=nt.currentProgram;Ws===!0&&(qi=Cn(K,Z,ue));let fa=!1,xr=!1,Ln=!1;const Lt=qi.getUniforms(),Xi=nt.uniforms;if(be.useProgram(qi.program)&&(fa=!0,xr=!0,Ln=!0),K.id!==S&&(S=K.id,xr=!0),fa||A!==I){if(Lt.setValue(z,"projectionMatrix",I.projectionMatrix),te.logarithmicDepthBuffer&&Lt.setValue(z,"logDepthBufFC",2/(Math.log(I.far+1)/Math.LN2)),A!==I&&(A=I,xr=!0,Ln=!0),K.isShaderMaterial||K.isMeshPhongMaterial||K.isMeshToonMaterial||K.isMeshStandardMaterial||K.envMap){const ti=Lt.map.cameraPosition;ti!==void 0&&ti.setValue(z,Y.setFromMatrixPosition(I.matrixWorld))}(K.isMeshPhongMaterial||K.isMeshToonMaterial||K.isMeshLambertMaterial||K.isMeshBasicMaterial||K.isMeshStandardMaterial||K.isShaderMaterial)&&Lt.setValue(z,"isOrthographic",I.isOrthographicCamera===!0),(K.isMeshPhongMaterial||K.isMeshToonMaterial||K.isMeshLambertMaterial||K.isMeshBasicMaterial||K.isMeshStandardMaterial||K.isShaderMaterial||K.isShadowMaterial||ue.isSkinnedMesh)&&Lt.setValue(z,"viewMatrix",I.matrixWorldInverse)}if(ue.isSkinnedMesh){Lt.setOptional(z,ue,"bindMatrix"),Lt.setOptional(z,ue,"bindMatrixInverse");const ti=ue.skeleton;ti&&(te.floatVertexTextures?(ti.boneTexture===null&&ti.computeBoneTexture(),Lt.setValue(z,"boneTexture",ti.boneTexture,Ae),Lt.setValue(z,"boneTextureSize",ti.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Rn=le.morphAttributes;if((Rn.position!==void 0||Rn.normal!==void 0||Rn.color!==void 0&&te.isWebGL2===!0)&&Se.update(ue,le,qi),(xr||nt.receiveShadow!==ue.receiveShadow)&&(nt.receiveShadow=ue.receiveShadow,Lt.setValue(z,"receiveShadow",ue.receiveShadow)),K.isMeshGouraudMaterial&&K.envMap!==null&&(Xi.envMap.value=Je,Xi.flipEnvMap.value=Je.isCubeTexture&&Je.isRenderTargetTexture===!1?-1:1),xr&&(Lt.setValue(z,"toneMappingExposure",p.toneMappingExposure),nt.needsLights&&gu(Xi,Ln),De&&K.fog===!0&&Ft.refreshFogUniforms(Xi,De),Ft.refreshMaterialUniforms(Xi,K,D,N,pe),wx.upload(z,nt.uniformsList,Xi,Ae)),K.isShaderMaterial&&K.uniformsNeedUpdate===!0&&(wx.upload(z,nt.uniformsList,Xi,Ae),K.uniformsNeedUpdate=!1),K.isSpriteMaterial&&Lt.setValue(z,"center",ue.center),Lt.setValue(z,"modelViewMatrix",ue.modelViewMatrix),Lt.setValue(z,"normalMatrix",ue.normalMatrix),Lt.setValue(z,"modelMatrix",ue.matrixWorld),K.isShaderMaterial||K.isRawShaderMaterial){const ti=K.uniformsGroups;for(let Pn=0,yu=ti.length;Pn<yu;Pn++)if(te.isWebGL2){const ma=ti[Pn];Ne.update(ma,qi),Ne.bind(ma,qi)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return qi}function gu(I,Z){I.ambientLightColor.needsUpdate=Z,I.lightProbe.needsUpdate=Z,I.directionalLights.needsUpdate=Z,I.directionalLightShadows.needsUpdate=Z,I.pointLights.needsUpdate=Z,I.pointLightShadows.needsUpdate=Z,I.spotLights.needsUpdate=Z,I.spotLightShadows.needsUpdate=Z,I.rectAreaLights.needsUpdate=Z,I.hemisphereLights.needsUpdate=Z}function _u(I){return I.isMeshLambertMaterial||I.isMeshToonMaterial||I.isMeshPhongMaterial||I.isMeshStandardMaterial||I.isShadowMaterial||I.isShaderMaterial&&I.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(I,Z,le){Te.get(I.texture).__webglTexture=Z,Te.get(I.depthTexture).__webglTexture=le;const K=Te.get(I);K.__hasExternalTextures=!0,K.__hasExternalTextures&&(K.__autoAllocateDepthBuffer=le===void 0,K.__autoAllocateDepthBuffer||ee.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),K.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(I,Z){const le=Te.get(I);le.__webglFramebuffer=Z,le.__useDefaultFramebuffer=Z===void 0},this.setRenderTarget=function(I,Z=0,le=0){w=I,_=Z,x=le;let K=!0,ue=null,De=!1,je=!1;if(I){const We=Te.get(I);We.__useDefaultFramebuffer!==void 0?(be.bindFramebuffer(36160,null),K=!1):We.__webglFramebuffer===void 0?Ae.setupRenderTarget(I):We.__hasExternalTextures&&Ae.rebindTextures(I,Te.get(I.texture).__webglTexture,Te.get(I.depthTexture).__webglTexture);const Je=I.texture;(Je.isData3DTexture||Je.isDataArrayTexture||Je.isCompressedArrayTexture)&&(je=!0);const ot=Te.get(I).__webglFramebuffer;I.isWebGLCubeRenderTarget?(ue=ot[Z],De=!0):te.isWebGL2&&I.samples>0&&Ae.useMultisampledRTT(I)===!1?ue=Te.get(I).__webglMultisampledFramebuffer:ue=ot,k.copy(I.viewport),M.copy(I.scissor),b=I.scissorTest}else k.copy(B).multiplyScalar(D).floor(),M.copy(Q).multiplyScalar(D).floor(),b=j;if(be.bindFramebuffer(36160,ue)&&te.drawBuffers&&K&&be.drawBuffers(I,ue),be.viewport(k),be.scissor(M),be.setScissorTest(b),De){const We=Te.get(I.texture);z.framebufferTexture2D(36160,36064,34069+Z,We.__webglTexture,le)}else if(je){const We=Te.get(I.texture),Je=Z||0;z.framebufferTextureLayer(36160,36064,We.__webglTexture,le||0,Je)}S=-1},this.readRenderTargetPixels=function(I,Z,le,K,ue,De,je){if(!(I&&I.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let We=Te.get(I).__webglFramebuffer;if(I.isWebGLCubeRenderTarget&&je!==void 0&&(We=We[je]),We){be.bindFramebuffer(36160,We);try{const Je=I.texture,ot=Je.format,tt=Je.type;if(ot!==Ts&&ie.convert(ot)!==z.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const et=tt===fy&&(ee.has("EXT_color_buffer_half_float")||te.isWebGL2&&ee.has("EXT_color_buffer_float"));if(tt!==Bh&&ie.convert(tt)!==z.getParameter(35738)&&!(tt===bc&&(te.isWebGL2||ee.has("OES_texture_float")||ee.has("WEBGL_color_buffer_float")))&&!et){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Z>=0&&Z<=I.width-K&&le>=0&&le<=I.height-ue&&z.readPixels(Z,le,K,ue,ie.convert(ot),ie.convert(tt),De)}finally{const Je=w!==null?Te.get(w).__webglFramebuffer:null;be.bindFramebuffer(36160,Je)}}},this.copyFramebufferToTexture=function(I,Z,le=0){const K=Math.pow(2,-le),ue=Math.floor(Z.image.width*K),De=Math.floor(Z.image.height*K);Ae.setTexture2D(Z,0),z.copyTexSubImage2D(3553,le,0,0,I.x,I.y,ue,De),be.unbindTexture()},this.copyTextureToTexture=function(I,Z,le,K=0){const ue=Z.image.width,De=Z.image.height,je=ie.convert(le.format),We=ie.convert(le.type);Ae.setTexture2D(le,0),z.pixelStorei(37440,le.flipY),z.pixelStorei(37441,le.premultiplyAlpha),z.pixelStorei(3317,le.unpackAlignment),Z.isDataTexture?z.texSubImage2D(3553,K,I.x,I.y,ue,De,je,We,Z.image.data):Z.isCompressedTexture?z.compressedTexSubImage2D(3553,K,I.x,I.y,Z.mipmaps[0].width,Z.mipmaps[0].height,je,Z.mipmaps[0].data):z.texSubImage2D(3553,K,I.x,I.y,je,We,Z.image),K===0&&le.generateMipmaps&&z.generateMipmap(3553),be.unbindTexture()},this.copyTextureToTexture3D=function(I,Z,le,K,ue=0){if(p.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const De=I.max.x-I.min.x+1,je=I.max.y-I.min.y+1,We=I.max.z-I.min.z+1,Je=ie.convert(K.format),ot=ie.convert(K.type);let tt;if(K.isData3DTexture)Ae.setTexture3D(K,0),tt=32879;else if(K.isDataArrayTexture)Ae.setTexture2DArray(K,0),tt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}z.pixelStorei(37440,K.flipY),z.pixelStorei(37441,K.premultiplyAlpha),z.pixelStorei(3317,K.unpackAlignment);const et=z.getParameter(3314),Mt=z.getParameter(32878),mt=z.getParameter(3316),Bt=z.getParameter(3315),Mi=z.getParameter(32877),kt=le.isCompressedTexture?le.mipmaps[0]:le.image;z.pixelStorei(3314,kt.width),z.pixelStorei(32878,kt.height),z.pixelStorei(3316,I.min.x),z.pixelStorei(3315,I.min.y),z.pixelStorei(32877,I.min.z),le.isDataTexture||le.isData3DTexture?z.texSubImage3D(tt,ue,Z.x,Z.y,Z.z,De,je,We,Je,ot,kt.data):le.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),z.compressedTexSubImage3D(tt,ue,Z.x,Z.y,Z.z,De,je,We,Je,kt.data)):z.texSubImage3D(tt,ue,Z.x,Z.y,Z.z,De,je,We,Je,ot,kt),z.pixelStorei(3314,et),z.pixelStorei(32878,Mt),z.pixelStorei(3316,mt),z.pixelStorei(3315,Bt),z.pixelStorei(32877,Mi),ue===0&&K.generateMipmaps&&z.generateMipmap(tt),be.unbindTexture()},this.initTexture=function(I){I.isCubeTexture?Ae.setTextureCube(I,0):I.isData3DTexture?Ae.setTexture3D(I,0):I.isDataArrayTexture||I.isCompressedArrayTexture?Ae.setTexture2DArray(I,0):Ae.setTexture2D(I,0),be.unbindTexture()},this.resetState=function(){_=0,x=0,w=null,be.reset(),Ee.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}}class Exe extends vL{}Exe.prototype.isWebGL1Renderer=!0;class bL extends Li{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Axe{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=hk,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=bo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let n=0,s=this.stride;n<s;n++)this.array[e+n]=t.array[r+n];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=bo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=bo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Yr=new me;class xL{constructor(e,t,r,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Yr.fromBufferAttribute(this,t),Yr.applyMatrix4(e),this.setXYZ(t,Yr.x,Yr.y,Yr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Yr.fromBufferAttribute(this,t),Yr.applyNormalMatrix(e),this.setXYZ(t,Yr.x,Yr.y,Yr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Yr.fromBufferAttribute(this,t),Yr.transformDirection(e),this.setXYZ(t,Yr.x,Yr.y,Yr.z);return this}setX(e,t){return this.normalized&&(t=oi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=oi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=oi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=oi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ka(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ka(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ka(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ka(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=oi(t,this.array),r=oi(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=oi(t,this.array),r=oi(r,this.array),n=oi(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this}setXYZW(e,t,r,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=oi(t,this.array),r=oi(r,this.array),n=oi(n,this.array),s=oi(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const n=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[n+s])}return new gr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new xL(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const n=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[n+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const u4=new me,h4=new ui,d4=new ui,kxe=new me,p4=new Pt,gp=new me;class rH extends Wi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Pt,this.bindMatrixInverse=new Pt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ll),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)gp.fromBufferAttribute(t,r),this.applyBoneTransform(r,gp),this.boundingBox.expandByPoint(gp)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Rl),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)gp.fromBufferAttribute(t,r),this.applyBoneTransform(r,gp),this.boundingSphere.expandByPoint(gp)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new ui,t=this.geometry.attributes.skinWeight;for(let r=0,n=t.count;r<n;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,n=this.geometry;h4.fromBufferAttribute(n.attributes.skinIndex,e),d4.fromBufferAttribute(n.attributes.skinWeight,e),u4.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=d4.getComponent(s);if(o!==0){const a=h4.getComponent(s);p4.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(kxe.copy(u4).applyMatrix4(p4),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class wL extends Li{constructor(){super(),this.isBone=!0,this.type="Bone"}}class nH extends Jn{constructor(e=null,t=1,r=1,n,s,o,a,l,c=hr,u=hr,h,d){super(null,o,a,l,c,u,n,s,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const f4=new Pt,Cxe=new Pt;class _S{constructor(e=[],t=[]){this.uuid=bo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new Pt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Pt;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,n=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Cxe;f4.multiplyMatrices(a,t[s]),f4.toArray(r,s*16)}n!==null&&(n.needsUpdate=!0)}clone(){return new _S(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Pj(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new nH(t,e,e,Ts,bc);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,n=e.bones.length;r<n;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new wL),this.bones.push(o),this.boneInverses.push(new Pt().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let n=0,s=t.length;n<s;n++){const o=t[n];e.bones.push(o.uuid);const a=r[n];e.boneInverses.push(a.toArray())}return e}}class m4 extends gr{constructor(e,t,r,n=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const _p=new Pt,g4=new Pt,sb=[],_4=new Ll,$xe=new Pt,Xg=new Wi,Yg=new Rl;class Lxe extends Wi{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new m4(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let n=0;n<r;n++)this.setMatrixAt(n,$xe)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ll),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,_p),_4.copy(e.boundingBox).applyMatrix4(_p),this.boundingBox.union(_4)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Rl),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,_p),Yg.copy(e.boundingSphere).applyMatrix4(_p),this.boundingSphere.union(Yg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,n=this.count;if(Xg.geometry=this.geometry,Xg.material=this.material,Xg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Yg.copy(this.boundingSphere),Yg.applyMatrix4(r),e.ray.intersectsSphere(Yg)!==!1))for(let s=0;s<n;s++){this.getMatrixAt(s,_p),g4.multiplyMatrices(r,_p),Xg.matrixWorld=g4,Xg.raycast(e,sb);for(let o=0,a=sb.length;o<a;o++){const l=sb[o];l.instanceId=s,l.object=this,t.push(l)}sb.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new m4(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}let vm=class extends Ls{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new At(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}};const y4=new me,v4=new me,b4=new Pt,wE=new gL,ob=new Rl;class ov extends Li{constructor(e=new on,t=new vm){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let n=1,s=t.count;n<s;n++)y4.fromBufferAttribute(t,n-1),v4.fromBufferAttribute(t,n),r[n]=r[n-1],r[n]+=y4.distanceTo(v4);e.setAttribute("lineDistance",new di(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,n=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),ob.copy(r.boundingSphere),ob.applyMatrix4(n),ob.radius+=s,e.ray.intersectsSphere(ob)===!1)return;b4.copy(n).invert(),wE.copy(e.ray).applyMatrix4(b4);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new me,u=new me,h=new me,d=new me,f=this.isLineSegments?2:1,g=r.index,v=r.attributes.position;if(g!==null){const m=Math.max(0,o.start),p=Math.min(g.count,o.start+o.count);for(let y=m,_=p-1;y<_;y+=f){const x=g.getX(y),w=g.getX(y+1);if(c.fromBufferAttribute(v,x),u.fromBufferAttribute(v,w),wE.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(d);S<e.near||S>e.far||t.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{const m=Math.max(0,o.start),p=Math.min(v.count,o.start+o.count);for(let y=m,_=p-1;y<_;y+=f){if(c.fromBufferAttribute(v,y),u.fromBufferAttribute(v,y+1),wE.distanceSqToSegment(c,u,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const x=e.ray.origin.distanceTo(d);x<e.near||x>e.far||t.push({distance:x,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,s=r.length;n<s;n++){const o=r[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=n}}}}}const x4=new me,w4=new me;class ML extends ov{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let n=0,s=t.count;n<s;n+=2)x4.fromBufferAttribute(t,n),w4.fromBufferAttribute(t,n+1),r[n]=n===0?0:r[n-1],r[n+1]=r[n]+x4.distanceTo(w4);e.setAttribute("lineDistance",new di(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Rxe extends ov{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class sH extends Ls{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new At(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const M4=new Pt,gk=new gL,ab=new Rl,lb=new me;class Pxe extends Li{constructor(e=new on,t=new sH){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,n=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),ab.copy(r.boundingSphere),ab.applyMatrix4(n),ab.radius+=s,e.ray.intersectsSphere(ab)===!1)return;M4.copy(n).invert(),gk.copy(e.ray).applyMatrix4(M4);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=r.index,u=r.attributes.position;if(c!==null){const h=Math.max(0,o.start),d=Math.min(c.count,o.start+o.count);for(let f=h,g=d;f<g;f++){const v=c.getX(f);lb.fromBufferAttribute(u,v),S4(lb,v,l,n,e,t,this)}}else{const h=Math.max(0,o.start),d=Math.min(u.count,o.start+o.count);for(let f=h,g=d;f<g;f++)lb.fromBufferAttribute(u,f),S4(lb,f,l,n,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,s=r.length;n<s;n++){const o=r[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=n}}}}}function S4(i,e,t,r,n,s,o){const a=gk.distanceSqToPoint(i);if(a<t){const l=new me;gk.closestPointToPoint(i,l),l.applyMatrix4(r);const c=n.ray.origin.distanceTo(l);if(c<n.near||c>n.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class yS extends on{constructor(e=1,t=1,r=1,n=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;n=Math.floor(n),s=Math.floor(s);const u=[],h=[],d=[],f=[];let g=0;const v=[],m=r/2;let p=0;y(),o===!1&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(u),this.setAttribute("position",new di(h,3)),this.setAttribute("normal",new di(d,3)),this.setAttribute("uv",new di(f,2));function y(){const x=new me,w=new me;let S=0;const A=(t-e)/r;for(let k=0;k<=s;k++){const M=[],b=k/s,P=b*(t-e)+e;for(let N=0;N<=n;N++){const D=N/n,U=D*l+a,G=Math.sin(U),B=Math.cos(U);w.x=P*G,w.y=-b*r+m,w.z=P*B,h.push(w.x,w.y,w.z),x.set(G,A,B).normalize(),d.push(x.x,x.y,x.z),f.push(D,1-b),M.push(g++)}v.push(M)}for(let k=0;k<n;k++)for(let M=0;M<s;M++){const b=v[M][k],P=v[M+1][k],N=v[M+1][k+1],D=v[M][k+1];u.push(b,P,D),u.push(P,N,D),S+=6}c.addGroup(p,S,0),p+=S}function _(x){const w=g,S=new It,A=new me;let k=0;const M=x===!0?e:t,b=x===!0?1:-1;for(let N=1;N<=n;N++)h.push(0,m*b,0),d.push(0,b,0),f.push(.5,.5),g++;const P=g;for(let N=0;N<=n;N++){const D=N/n*l+a,U=Math.cos(D),G=Math.sin(D);A.x=M*G,A.y=m*b,A.z=M*U,h.push(A.x,A.y,A.z),d.push(0,b,0),S.x=U*.5+.5,S.y=G*.5*b+.5,f.push(S.x,S.y),g++}for(let N=0;N<n;N++){const D=w+N,U=P+N;x===!0?u.push(U,U+1,D):u.push(U+1,U,D),k+=3}c.addGroup(p,k,x===!0?1:2),p+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yS(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}const cb=new me,ub=new me,ME=new me,hb=new V0;class Nxe extends on{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),n=Math.cos(Nf*t),s=e.getIndex(),o=e.getAttribute("position"),a=s?s.count:o.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let f=0;f<a;f+=3){s?(l[0]=s.getX(f),l[1]=s.getX(f+1),l[2]=s.getX(f+2)):(l[0]=f,l[1]=f+1,l[2]=f+2);const{a:g,b:v,c:m}=hb;if(g.fromBufferAttribute(o,l[0]),v.fromBufferAttribute(o,l[1]),m.fromBufferAttribute(o,l[2]),hb.getNormal(ME),u[0]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,u[1]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,u[2]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let p=0;p<3;p++){const y=(p+1)%3,_=u[p],x=u[y],w=hb[c[p]],S=hb[c[y]],A=`${_}_${x}`,k=`${x}_${_}`;k in h&&h[k]?(ME.dot(h[k].normal)<=n&&(d.push(w.x,w.y,w.z),d.push(S.x,S.y,S.z)),h[k]=null):A in h||(h[A]={index0:l[p],index1:l[y],normal:ME.clone()})}}for(const f in h)if(h[f]){const{index0:g,index1:v}=h[f];cb.fromBufferAttribute(o,g),ub.fromBufferAttribute(o,v),d.push(cb.x,cb.y,cb.z),d.push(ub.x,ub.y,ub.z)}this.setAttribute("position",new di(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class SL extends on{constructor(e=1,t=32,r=16,n=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new me,d=new me,f=[],g=[],v=[],m=[];for(let p=0;p<=r;p++){const y=[],_=p/r;let x=0;p===0&&o===0?x=.5/t:p===r&&l===Math.PI&&(x=-.5/t);for(let w=0;w<=t;w++){const S=w/t;h.x=-e*Math.cos(n+S*s)*Math.sin(o+_*a),h.y=e*Math.cos(o+_*a),h.z=e*Math.sin(n+S*s)*Math.sin(o+_*a),g.push(h.x,h.y,h.z),d.copy(h).normalize(),v.push(d.x,d.y,d.z),m.push(S+x,1-_),y.push(c++)}u.push(y)}for(let p=0;p<r;p++)for(let y=0;y<t;y++){const _=u[p][y+1],x=u[p][y],w=u[p+1][y],S=u[p+1][y+1];(p!==0||o>0)&&f.push(_,x,S),(p!==r-1||l<Math.PI)&&f.push(x,w,S)}this.setIndex(f),this.setAttribute("position",new di(g,3)),this.setAttribute("normal",new di(v,3)),this.setAttribute("uv",new di(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new SL(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class av extends Ls{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new At(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hS,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}let pd=class extends av{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new It(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return $r(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new At(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new At(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new At(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}},E_=class extends Ls{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new At(16777215),this.specular=new At(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hS,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=cS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};class Ixe extends Ls{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new At(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=hS,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=cS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function Kl(i,e,t){return oH(i)?new i.constructor(i.subarray(e,t!==void 0?t:i.length)):i.slice(e,t)}function db(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function oH(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Dxe(i){function e(n,s){return i[n]-i[s]}const t=i.length,r=new Array(t);for(let n=0;n!==t;++n)r[n]=n;return r.sort(e),r}function T4(i,e,t){const r=i.length,n=new i.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)n[o++]=i[a+l]}return n}function aH(i,e,t,r){let n=1,s=i[0];for(;s!==void 0&&s[r]===void 0;)s=i[n++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=i[n++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[n++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=i[n++];while(s!==void 0)}class lv{constructor(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,n=t[r],s=t[r-1];e:{t:{let o;i:{r:if(!(e<n)){for(let a=r+2;;){if(n===void 0){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=n,n=t[++r],e<n)break t}o=t.length;break i}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(n=s,s=t[--r-1],e>=s)break t}o=r,r=0;break i}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(n=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,n)}return this.interpolate_(r,s,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,s=e*n;for(let o=0;o!==n;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Oxe extends lv{constructor(e,t,r,n){super(e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:MO,endingEnd:MO}}intervalChanged_(e,t,r){const n=this.parameterPositions;let s=e-2,o=e+1,a=n[s],l=n[o];if(a===void 0)switch(this.getSettings_().endingStart){case SO:s=e,a=2*t-r;break;case TO:s=n.length-2,a=t+n[s]-n[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case SO:o=e,l=2*r-t;break;case TO:o=1,l=r+n[1]-n[0];break;default:o=e-1,l=t}const c=(r-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,n){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,g=(r-t)/(n-t),v=g*g,m=v*g,p=-d*m+2*d*v-d*g,y=(1+d)*m+(-1.5-2*d)*v+(-.5+d)*g+1,_=(-1-f)*m+(1.5+f)*v+.5*g,x=f*m-f*v;for(let w=0;w!==a;++w)s[w]=p*o[u+w]+y*o[c+w]+_*o[l+w]+x*o[h+w];return s}}class Uxe extends lv{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e,t,r,n){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(n-t),h=1-u;for(let d=0;d!==a;++d)s[d]=o[c+d]*h+o[l+d]*u;return s}}class zxe extends lv{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e){return this.copySampleValue_(e-1)}}let ca=class{constructor(e,t,r,n){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=db(t,this.TimeBufferType),this.values=db(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:db(e.times,Array),values:db(e.values,Array)};const n=e.getInterpolation();n!==e.DefaultInterpolation&&(r.interpolation=n)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new zxe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Uxe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Oxe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case my:t=this.InterpolantFactoryMethodDiscrete;break;case gm:t=this.InterpolantFactoryMethodLinear;break;case QT:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return my;case this.InterpolantFactoryMethodLinear:return gm;case this.InterpolantFactoryMethodSmooth:return QT}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,n=t.length;r!==n;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,n=t.length;r!==n;++r)t[r]*=e}return this}trim(e,t){const r=this.times,n=r.length;let s=0,o=n-1;for(;s!==n&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==n){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Kl(r,s,o),this.values=Kl(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,n=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(n!==void 0&&oH(n))for(let a=0,l=n.length;a!==l;++a){const c=n[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Kl(this.times),t=Kl(this.values),r=this.getValueSize(),n=this.getInterpolation()===QT,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(n)l=!0;else{const h=a*r,d=h-r,f=h+r;for(let g=0;g!==r;++g){const v=t[h+g];if(v!==t[d+g]||v!==t[f+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*r,d=o*r;for(let f=0;f!==r;++f)t[d+f]=t[h+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=Kl(e,0,o),this.values=Kl(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=Kl(this.times,0),t=Kl(this.values,0),r=this.constructor,n=new r(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}};ca.prototype.TimeBufferType=Float32Array;ca.prototype.ValueBufferType=Float32Array;ca.prototype.DefaultInterpolation=gm;let Km=class extends ca{};Km.prototype.ValueTypeName="bool";Km.prototype.ValueBufferType=Array;Km.prototype.DefaultInterpolation=my;Km.prototype.InterpolantFactoryMethodLinear=void 0;Km.prototype.InterpolantFactoryMethodSmooth=void 0;class lH extends ca{}lH.prototype.ValueTypeName="color";class _y extends ca{}_y.prototype.ValueTypeName="number";class Fxe extends lv{constructor(e,t,r,n){super(e,t,r,n)}interpolate_(e,t,r,n){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(n-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Nr.slerpFlat(s,0,o,c-a,o,c,l);return s}}let Ic=class extends ca{InterpolantFactoryMethodLinear(e){return new Fxe(this.times,this.values,this.getValueSize(),e)}};Ic.prototype.ValueTypeName="quaternion";Ic.prototype.DefaultInterpolation=gm;Ic.prototype.InterpolantFactoryMethodSmooth=void 0;let Zm=class extends ca{};Zm.prototype.ValueTypeName="string";Zm.prototype.ValueBufferType=Array;Zm.prototype.DefaultInterpolation=my;Zm.prototype.InterpolantFactoryMethodLinear=void 0;Zm.prototype.InterpolantFactoryMethodSmooth=void 0;let Gh=class extends ca{};Gh.prototype.ValueTypeName="vector";class _k{constructor(e,t=-1,r,n=o_e){this.name=e,this.tracks=r,this.duration=t,this.blendMode=n,this.uuid=bo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,n=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(Vxe(r[o]).scale(n));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(ca.toJSON(r[s]));return n}static CreateFromMorphTargetSequence(e,t,r,n){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=Dxe(l);l=T4(l,1,u),c=T4(c,1,u),!n&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new _y(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const n=e;r=n.geometry&&n.geometry.animations||n.animations}for(let n=0;n<r.length;n++)if(r[n].name===t)return r[n];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const n={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let d=n[h];d||(n[h]=d=[]),d.push(c)}}const o=[];for(const a in n)o.push(this.CreateFromMorphTargetSequence(a,n[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(u,h,d,f,g){if(d.length!==0){const v=[],m=[];aH(d,v,m,f),v.length!==0&&g.push(new u(h,v,m))}},n=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let u=0;u<c.length;u++){const h=c[u].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const d={};let f;for(f=0;f<h.length;f++)if(h[f].morphTargets)for(let g=0;g<h[f].morphTargets.length;g++)d[h[f].morphTargets[g]]=-1;for(const g in d){const v=[],m=[];for(let p=0;p!==h[f].morphTargets.length;++p){const y=h[f];v.push(y.time),m.push(y.morphTarget===g?1:0)}n.push(new _y(".morphTargetInfluence["+g+"]",v,m))}l=d.length*o}else{const d=".bones["+t[u].name+"]";r(Gh,d+".position",h,"pos",n),r(Ic,d+".quaternion",h,"rot",n),r(Gh,d+".scale",h,"scl",n)}}return n.length===0?null:new this(s,l,n,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,n=e.length;r!==n;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Bxe(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return _y;case"vector":case"vector2":case"vector3":case"vector4":return Gh;case"color":return lH;case"quaternion":return Ic;case"bool":case"boolean":return Km;case"string":return Zm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function Vxe(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Bxe(i.type);if(i.times===void 0){const t=[],r=[];aH(i.keys,t,r,"value"),i.times=t,i.values=r}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const bm={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class TL{constructor(e,t,r){const n=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,s===!1&&n.onStart!==void 0&&n.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,n.onProgress!==void 0&&n.onProgress(u,o,a),o===a&&(s=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(u){n.onError!==void 0&&n.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){const f=c[h],g=c[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return g}return null}}}const cH=new TL;let ou=class{constructor(e){this.manager=e!==void 0?e:cH,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(n,s){r.load(e,n,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};const Oa={};class jxe extends Error{constructor(e,t){super(e),this.response=t}}class cv extends ou{constructor(e){super(e)}load(e,t,r,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=bm.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Oa[e]!==void 0){Oa[e].push({onLoad:t,onProgress:r,onError:n});return}Oa[e]=[],Oa[e].push({onLoad:t,onProgress:r,onError:n});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Oa[e],h=c.body.getReader(),d=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),f=d?parseInt(d):0,g=f!==0;let v=0;const m=new ReadableStream({start(p){y();function y(){h.read().then(({done:_,value:x})=>{if(_)p.close();else{v+=x.byteLength;const w=new ProgressEvent("progress",{lengthComputable:g,loaded:v,total:f});for(let S=0,A=u.length;S<A;S++){const k=u[S];k.onProgress&&k.onProgress(w)}p.enqueue(x),y()}})}}});return new Response(m)}else throw new jxe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,d=new TextDecoder(h);return c.arrayBuffer().then(f=>d.decode(f))}}}).then(c=>{bm.add(e,c);const u=Oa[e];delete Oa[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=Oa[e];if(u===void 0)throw this.manager.itemError(e),c;delete Oa[e];for(let h=0,d=u.length;h<d;h++){const f=u[h];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Hxe extends ou{constructor(e){super(e)}load(e,t,r,n){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=bm.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=gy("img");function l(){u(),bm.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){u(),n&&n(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Gxe extends ou{constructor(e){super(e)}load(e,t,r,n){const s=this,o=new nH,a=new cv(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Gr,o.wrapT=c.wrapT!==void 0?c.wrapT:Gr,o.magFilter=c.magFilter!==void 0?c.magFilter:Cr,o.minFilter=c.minFilter!==void 0?c.minFilter:Cr,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=fl),c.mipmapCount===1&&(o.minFilter=Cr),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c))},r,n),o}}class EL extends ou{constructor(e){super(e)}load(e,t,r,n){const s=new Jn,o=new Hxe(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,n),s}}class uv extends Li{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new At(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class uH extends uv{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Li.DEFAULT_UP),this.updateMatrix(),this.groundColor=new At(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const SE=new Pt,E4=new me,A4=new me;class AL{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new It(512,512),this.map=null,this.mapPass=null,this.matrix=new Pt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _L,this._frameExtents=new It(1,1),this._viewportCount=1,this._viewports=[new ui(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;E4.setFromMatrixPosition(e.matrixWorld),t.position.copy(E4),A4.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(A4),t.updateMatrixWorld(),SE.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(SE),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(SE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Wxe extends AL{constructor(){super(new pr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=_m*2*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||n!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=n,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class hH extends uv{constructor(e,t,r=0,n=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Li.DEFAULT_UP),this.updateMatrix(),this.target=new Li,this.distance=r,this.angle=n,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Wxe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const k4=new Pt,Kg=new me,TE=new me;class qxe extends AL{constructor(){super(new pr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new It(4,2),this._viewportCount=6,this._viewports=[new ui(2,1,1,1),new ui(0,1,1,1),new ui(3,1,1,1),new ui(1,1,1,1),new ui(3,0,1,1),new ui(1,0,1,1)],this._cubeDirections=[new me(1,0,0),new me(-1,0,0),new me(0,0,1),new me(0,0,-1),new me(0,1,0),new me(0,-1,0)],this._cubeUps=[new me(0,1,0),new me(0,1,0),new me(0,1,0),new me(0,1,0),new me(0,0,1),new me(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,n=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Kg.setFromMatrixPosition(e.matrixWorld),r.position.copy(Kg),TE.copy(r.position),TE.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(TE),r.updateMatrixWorld(),n.makeTranslation(-Kg.x,-Kg.y,-Kg.z),k4.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(k4)}}class vS extends uv{constructor(e,t,r=0,n=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=n,this.shadow=new qxe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Xxe extends AL{constructor(){super(new mS(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class dH extends uv{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Li.DEFAULT_UP),this.updateMatrix(),this.target=new Li,this.shadow=new Xxe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Yxe extends uv{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class yy{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,n=e.length;r<n;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Kxe extends ou{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=bm.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){bm.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){n&&n(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}const kL="\\[\\]\\.:\\/",Zxe=new RegExp("["+kL+"]","g"),CL="[^"+kL+"]",Jxe="[^"+kL.replace("\\.","")+"]",Qxe=/((?:WC+[\/:])*)/.source.replace("WC",CL),ewe=/(WCOD+)?/.source.replace("WCOD",Jxe),twe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",CL),iwe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",CL),rwe=new RegExp("^"+Qxe+ewe+twe+iwe+"$"),nwe=["material","materials","bones","map"];class swe{constructor(e,t,r){const n=r||Ti.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,n=this._bindings[r];n!==void 0&&n.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=r.length;n!==s;++n)r[n].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}let Ti=class Fp{constructor(e,t,r){this.path=t,this.parsedPath=r||Fp.parseTrackName(t),this.node=Fp.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new Fp.Composite(e,t,r):new Fp(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Zxe,"")}static parseTrackName(e){const t=rwe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(n!==void 0&&n!==-1){const s=r.nodeName.substring(n+1);nwe.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},n=r(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let n=0,s=r.length;n!==s;++n)e[t++]=r[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let n=0,s=r.length;n!==s;++n)r[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let n=0,s=r.length;n!==s;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let n=0,s=r.length;n!==s;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,n=t.propertyName;let s=t.propertyIndex;if(e||(e=Fp.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let c=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[n];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+n+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(n==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};Ti.Composite=swe;Ti.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ti.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ti.prototype.GetterByBindingType=[Ti.prototype._getValue_direct,Ti.prototype._getValue_array,Ti.prototype._getValue_arrayElement,Ti.prototype._getValue_toArray];Ti.prototype.SetterByBindingTypeAndVersioning=[[Ti.prototype._setValue_direct,Ti.prototype._setValue_direct_setNeedsUpdate,Ti.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ti.prototype._setValue_array,Ti.prototype._setValue_array_setNeedsUpdate,Ti.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ti.prototype._setValue_arrayElement,Ti.prototype._setValue_arrayElement_setNeedsUpdate,Ti.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ti.prototype._setValue_fromArray,Ti.prototype._setValue_fromArray_setNeedsUpdate,Ti.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class C4{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos($r(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const $4=new me;let pb,EE;class AE extends Li{constructor(e=new me(0,0,1),t=new me(0,0,0),r=1,n=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",pb===void 0&&(pb=new on,pb.setAttribute("position",new di([0,0,0,0,1,0],3)),EE=new yS(0,.5,1,5,1),EE.translate(0,-.5,0)),this.position.copy(t),this.line=new ov(pb,new vm({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Wi(EE,new go({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{$4.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle($4,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:fL}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=fL);function L4(i,e){if(e===a_e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===uk||e===Lj){let t=i.getIndex();if(t===null){const o=[],a=i.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const r=t.count-2,n=[];if(e===uk)for(let o=1;o<=r;o++)n.push(t.getX(0)),n.push(t.getX(o)),n.push(t.getX(o+1));else for(let o=0;o<r;o++)o%2===0?(n.push(t.getX(o)),n.push(t.getX(o+1)),n.push(t.getX(o+2))):(n.push(t.getX(o+2)),n.push(t.getX(o+1)),n.push(t.getX(o)));n.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(n),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}class $L extends ou{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new uwe(t)}),this.register(function(t){return new _we(t)}),this.register(function(t){return new ywe(t)}),this.register(function(t){return new vwe(t)}),this.register(function(t){return new dwe(t)}),this.register(function(t){return new pwe(t)}),this.register(function(t){return new fwe(t)}),this.register(function(t){return new mwe(t)}),this.register(function(t){return new cwe(t)}),this.register(function(t){return new gwe(t)}),this.register(function(t){return new hwe(t)}),this.register(function(t){return new awe(t)}),this.register(function(t){return new bwe(t)}),this.register(function(t){return new xwe(t)})}load(e,t,r,n){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=yy.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){n?n(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new cv(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},r,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,n){let s;const o={},a={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===pH){try{o[Gt.KHR_BINARY_GLTF]=new wwe(e)}catch(u){n&&n(u);return}s=JSON.parse(o[Gt.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new Iwe(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](c);a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const h=s.extensionsUsed[u],d=s.extensionsRequired||[];switch(h){case Gt.KHR_MATERIALS_UNLIT:o[h]=new lwe;break;case Gt.KHR_DRACO_MESH_COMPRESSION:o[h]=new Mwe(s,this.dracoLoader);break;case Gt.KHR_TEXTURE_TRANSFORM:o[h]=new Swe;break;case Gt.KHR_MESH_QUANTIZATION:o[h]=new Twe;break;default:d.indexOf(h)>=0&&a[h]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(r,n)}parseAsync(e,t){const r=this;return new Promise(function(n,s){r.parse(e,t,n,s)})}}function owe(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const Gt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class awe{constructor(e){this.parser=e,this.name=Gt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,n=t.length;r<n;r++){const s=t[r];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let n=t.cache.get(r);if(n)return n;const s=t.json,o=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let a;const l=new At(16777215);o.color!==void 0&&l.fromArray(o.color);const c=o.range!==void 0?o.range:0;switch(o.type){case"directional":a=new dH(l),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new vS(l),a.distance=c;break;case"spot":a=new hH(l),a.distance=c,o.spot=o.spot||{},o.spot.innerConeAngle=o.spot.innerConeAngle!==void 0?o.spot.innerConeAngle:0,o.spot.outerConeAngle=o.spot.outerConeAngle!==void 0?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,oc(a,o),o.intensity!==void 0&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),n=Promise.resolve(a),t.cache.add(r,n),n}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,r=this.parser,n=r.json.nodes[e],s=(n.extensions&&n.extensions[this.name]||{}).light;return s===void 0?null:this._loadLight(s).then(function(o){return r._getNodeRef(t.cache,s,o)})}}class lwe{constructor(){this.name=Gt.KHR_MATERIALS_UNLIT}getMaterialType(){return go}extendParams(e,t,r){const n=[];e.color=new At(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}s.baseColorTexture!==void 0&&n.push(r.assignTexture(e,"map",s.baseColorTexture,qt))}return Promise.all(n)}}class cwe{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const n=r.extensions[this.name].emissiveStrength;return n!==void 0&&(t.emissiveIntensity=n),Promise.resolve()}}class uwe{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:pd}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(r.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new It(a,a)}return Promise.all(s)}}class hwe{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:pd}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(r.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class dwe{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:pd}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new At(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=n.extensions[this.name];return o.sheenColorFactor!==void 0&&t.sheenColor.fromArray(o.sheenColorFactor),o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(r.assignTexture(t,"sheenColorMap",o.sheenColorTexture,qt)),o.sheenRoughnessTexture!==void 0&&s.push(r.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class pwe{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:pd}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class fwe{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:pd}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(r.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new At(a[0],a[1],a[2]),Promise.all(s)}}class mwe{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:pd}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const n=r.extensions[this.name];return t.ior=n.ior!==void 0?n.ior:1.5,Promise.resolve()}}class gwe{constructor(e){this.parser=e,this.name=Gt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:pd}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(r.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new At(a[0],a[1],a[2]),o.specularColorTexture!==void 0&&s.push(r.assignTexture(t,"specularColorMap",o.specularColorTexture,qt)),Promise.all(s)}}class _we{constructor(e){this.parser=e,this.name=Gt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,n=r.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const s=n.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class ywe{constructor(e){this.parser=e,this.name=Gt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,n=r.json,s=n.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=n.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class vwe{constructor(e){this.parser=e,this.name=Gt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,n=r.json,s=n.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=n.images[o.source];let l=r.textureLoader;if(a.uri){const c=r.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return r.loadTextureImage(e,o.source,l);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return r.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class bwe{constructor(e){this.name=Gt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const n=r.extensions[this.name],s=this.parser.getDependency("buffer",n.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=n.byteOffset||0,c=n.byteLength||0,u=n.count,h=n.byteStride,d=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,h,d,n.mode,n.filter).then(function(f){return f.buffer}):o.ready.then(function(){const f=new ArrayBuffer(u*h);return o.decodeGltfBuffer(new Uint8Array(f),u,h,d,n.mode,n.filter),f})})}else return null}}class xwe{constructor(e){this.name=Gt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,r=t.nodes[e];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const n=t.meshes[r.mesh];for(const l of n.primitives)if(l.mode!==gs.TRIANGLES&&l.mode!==gs.TRIANGLE_STRIP&&l.mode!==gs.TRIANGLE_FAN&&l.mode!==void 0)return null;const s=r.extensions[this.name].attributes,o=[],a={};for(const l in s)o.push(this.parser.getDependency("accessor",s[l]).then(c=>(a[l]=c,a[l])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(l=>{const c=l.pop(),u=c.isGroup?c.children:[c],h=l[0].count,d=[];for(const f of u){const g=new Pt,v=new me,m=new Nr,p=new me(1,1,1),y=new Lxe(f.geometry,f.material,h);for(let _=0;_<h;_++)a.TRANSLATION&&v.fromBufferAttribute(a.TRANSLATION,_),a.ROTATION&&m.fromBufferAttribute(a.ROTATION,_),a.SCALE&&p.fromBufferAttribute(a.SCALE,_),y.setMatrixAt(_,g.compose(v,m,p));for(const _ in a)_!=="TRANSLATION"&&_!=="ROTATION"&&_!=="SCALE"&&f.geometry.setAttribute(_,a[_]);Li.prototype.copy.call(y,f),this.parser.assignFinalMaterial(y),d.push(y)}return c.isGroup?(c.clear(),c.add(...d),c):d[0]}))}}const pH="glTF",Zg=12,R4={JSON:1313821514,BIN:5130562};class wwe{constructor(e){this.name=Gt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Zg),r=new TextDecoder;if(this.header={magic:r.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==pH)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-Zg,s=new DataView(e,Zg);let o=0;for(;o<n;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,l===R4.JSON){const c=new Uint8Array(e,Zg+o,a);this.content=r.decode(c)}else if(l===R4.BIN){const c=Zg+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Mwe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Gt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,n=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const h=yk[u]||u.toLowerCase();a[h]=o[u]}for(const u in e.attributes){const h=yk[u]||u.toLowerCase();if(o[u]!==void 0){const d=r.accessors[e.attributes[u]],f=Df[d.componentType];c[h]=f.name,l[h]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(h){n.decodeDracoFile(u,function(d){for(const f in d.attributes){const g=d.attributes[f],v=l[f];v!==void 0&&(g.normalized=v)}h(d)},a,c)})})}}class Swe{constructor(){this.name=Gt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Twe{constructor(){this.name=Gt.KHR_MESH_QUANTIZATION}}class fH extends lv{constructor(e,t,r,n){super(e,t,r,n)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,s=e*n*3+n;for(let o=0;o!==n;o++)t[o]=r[s+o];return t}interpolate_(e,t,r,n){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=n-t,h=(r-t)/u,d=h*h,f=d*h,g=e*c,v=g-c,m=-2*f+3*d,p=f-d,y=1-m,_=p-d+h;for(let x=0;x!==a;x++){const w=o[v+x+a],S=o[v+x+l]*u,A=o[g+x+a],k=o[g+x]*u;s[x]=y*w+_*S+m*A+p*k}return s}}const Ewe=new Nr;class Awe extends fH{interpolate_(e,t,r,n){const s=super.interpolate_(e,t,r,n);return Ewe.fromArray(s).normalize().toArray(s),s}}const gs={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Df={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},P4={9728:hr,9729:Cr,9984:ck,9985:Cj,9986:vx,9987:fl},N4={33071:Gr,33648:Gw,10497:Vo},kE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},yk={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Zl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},kwe={CUBICSPLINE:void 0,LINEAR:gm,STEP:my},CE={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Cwe(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new av({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Xo})),i.DefaultMaterial}function Jg(i,e,t){for(const r in t.extensions)i[r]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=t.extensions[r])}function oc(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function $we(i,e,t){let r=!1,n=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const h=e[c];if(h.POSITION!==void 0&&(r=!0),h.NORMAL!==void 0&&(n=!0),h.COLOR_0!==void 0&&(s=!0),r&&n&&s)break}if(!r&&!n&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const h=e[c];if(r){const d=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):i.attributes.position;o.push(d)}if(n){const d=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):i.attributes.normal;a.push(d)}if(s){const d=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):i.attributes.color;l.push(d)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],h=c[1],d=c[2];return r&&(i.morphAttributes.position=u),n&&(i.morphAttributes.normal=h),s&&(i.morphAttributes.color=d),i.morphTargetsRelative=!0,i})}function Lwe(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,r=e.weights.length;t<r;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let r=0,n=t.length;r<n;r++)i.morphTargetDictionary[t[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Rwe(i){const e=i.extensions&&i.extensions[Gt.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+I4(e.attributes):t=i.indices+":"+I4(i.attributes)+":"+i.mode,t}function I4(i){let e="";const t=Object.keys(i).sort();for(let r=0,n=t.length;r<n;r++)e+=t[r]+":"+i[t[r]]+";";return e}function vk(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Pwe(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Nwe=new Pt;class Iwe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new owe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let r=!1,n=!1,s=-1;typeof navigator<"u"&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,n=navigator.userAgent.indexOf("Firefox")>-1,s=n?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||r||n&&s<98?this.textureLoader=new EL(this.options.manager):this.textureLoader=new Kxe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new cv(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,n=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])}).then(function(o){const a={scene:o[0][n.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:n.asset,parser:r,userData:{}};Jg(s,a,n),oc(a,n),Promise.all(r._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let n=0,s=t.length;n<s;n++){const o=t[n].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let n=0,s=e.length;n<s;n++){const o=e[n];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(r[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const n=r.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(r,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const n=e(t[r]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let n=0;n<t.length;n++){const s=e(t[n]);s&&r.push(s)}return r}getDependency(e,t){const r=e+":"+t;let n=this.cache.get(r);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":n=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":n=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":n=this.loadSkin(t);break;case"animation":n=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":n=this.loadCamera(t);break;default:if(n=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!n)throw new Error("Unknown type: "+e);break}this.cache.add(r,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,n=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(n.map(function(s,o){return r.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Gt.KHR_BINARY_GLTF].body);const n=this.options;return new Promise(function(s,o){r.load(yy.resolveURL(t.uri,n.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(r){const n=t.byteLength||0,s=t.byteOffset||0;return r.slice(s,s+n)})}loadAccessor(e){const t=this,r=this.json,n=this.json.accessors[e];if(n.bufferView===void 0&&n.sparse===void 0){const o=kE[n.type],a=Df[n.componentType],l=n.normalized===!0,c=new a(n.count*o);return Promise.resolve(new gr(c,o,l))}const s=[];return n.bufferView!==void 0?s.push(this.getDependency("bufferView",n.bufferView)):s.push(null),n.sparse!==void 0&&(s.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=kE[n.type],c=Df[n.componentType],u=c.BYTES_PER_ELEMENT,h=u*l,d=n.byteOffset||0,f=n.bufferView!==void 0?r.bufferViews[n.bufferView].byteStride:void 0,g=n.normalized===!0;let v,m;if(f&&f!==h){const p=Math.floor(d/f),y="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+p+":"+n.count;let _=t.cache.get(y);_||(v=new c(a,p*f,n.count*f/u),_=new Axe(v,f/u),t.cache.add(y,_)),m=new xL(_,l,d%f/u,g)}else a===null?v=new c(n.count*l):v=new c(a,d,n.count*l),m=new gr(v,l,g);if(n.sparse!==void 0){const p=kE.SCALAR,y=Df[n.sparse.indices.componentType],_=n.sparse.indices.byteOffset||0,x=n.sparse.values.byteOffset||0,w=new y(o[1],_,n.sparse.count*p),S=new c(o[2],x,n.sparse.count*l);a!==null&&(m=new gr(m.array.slice(),m.itemSize,m.normalized));for(let A=0,k=w.length;A<k;A++){const M=w[A];if(m.setX(M,S[A*l]),l>=2&&m.setY(M,S[A*l+1]),l>=3&&m.setZ(M,S[A*l+2]),l>=4&&m.setW(M,S[A*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(e){const t=this.json,r=this.options,n=t.textures[e].source,s=t.images[n];let o=this.textureLoader;if(s.uri){const a=r.manager.getHandler(s.uri);a!==null&&(o=a)}return this.loadTextureImage(e,n,o)}loadTextureImage(e,t,r){const n=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,r).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return u.magFilter=P4[h.magFilter]||Cr,u.minFilter=P4[h.minFilter]||fl,u.wrapS=N4[h.wrapS]||Vo,u.wrapT=N4[h.wrapT]||Vo,n.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this,n=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const o=n.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=r.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const d=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(d),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(h){return new Promise(function(d,f){let g=d;t.isImageBitmapLoader===!0&&(g=function(v){const m=new Jn(v);m.needsUpdate=!0,d(m)}),t.load(yy.resolveURL(h,s.path),g,void 0,f)})}).then(function(h){return c===!0&&a.revokeObjectURL(l),h.userData.mimeType=o.mimeType||Pwe(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=u,u}assignTexture(e,t,r,n){const s=this;return this.getDependency("texture",r.index).then(function(o){if(!o)return null;if(r.texCoord!==void 0&&r.texCoord>0&&(o=o.clone(),o.channel=r.texCoord),s.extensions[Gt.KHR_TEXTURE_TRANSFORM]){const a=r.extensions!==void 0?r.extensions[Gt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Gt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return n!==void 0&&(o.encoding=n),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const n=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new sH,Ls.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,l.sizeAttenuation=!1,this.cache.add(a,l)),r=l}else if(e.isLine){const a="LineBasicMaterial:"+r.uuid;let l=this.cache.get(a);l||(l=new vm,Ls.prototype.copy.call(l,r),l.color.copy(r.color),l.map=r.map,this.cache.add(a,l)),r=l}if(n||s||o){let a="ClonedMaterial:"+r.uuid+":";n&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=r.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),n&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(r))),r=l}e.material=r}getMaterialType(){return av}loadMaterial(e){const t=this,r=this.json,n=this.extensions,s=r.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Gt.KHR_MATERIALS_UNLIT]){const h=n[Gt.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,s,t))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new At(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const d=h.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}h.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",h.baseColorTexture,qt)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Ss);const u=s.alphaMode||CE.OPAQUE;if(u===CE.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===CE.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==go&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new It(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}return s.occlusionTexture!==void 0&&o!==go&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==go&&(a.emissive=new At().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&o!==go&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,qt)),Promise.all(c).then(function(){const h=new o(a);return s.name&&(h.name=s.name),oc(h,s),t.associations.set(h,{materials:e}),s.extensions&&Jg(n,h,s),h})}createUniqueName(e){const t=Ti.sanitizeNodeName(e||"");let r=t;for(let n=1;this.nodeNamesUsed[r];++n)r=t+"_"+n;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,n=this.primitiveCache;function s(a){return r[Gt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return D4(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=Rwe(c),h=n[u];if(h)o.push(h.promise);else{let d;c.extensions&&c.extensions[Gt.KHR_DRACO_MESH_COMPRESSION]?d=s(c):d=D4(new on,c,t),n[u]={primitive:c,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.json,n=this.extensions,s=r.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?Cwe(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let f=0,g=u.length;f<g;f++){const v=u[f],m=o[f];let p;const y=c[f];if(m.mode===gs.TRIANGLES||m.mode===gs.TRIANGLE_STRIP||m.mode===gs.TRIANGLE_FAN||m.mode===void 0)p=s.isSkinnedMesh===!0?new rH(v,y):new Wi(v,y),p.isSkinnedMesh===!0&&p.normalizeSkinWeights(),m.mode===gs.TRIANGLE_STRIP?p.geometry=L4(p.geometry,Lj):m.mode===gs.TRIANGLE_FAN&&(p.geometry=L4(p.geometry,uk));else if(m.mode===gs.LINES)p=new ML(v,y);else if(m.mode===gs.LINE_STRIP)p=new ov(v,y);else if(m.mode===gs.LINE_LOOP)p=new Rxe(v,y);else if(m.mode===gs.POINTS)p=new Pxe(v,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);Object.keys(p.geometry.morphAttributes).length>0&&Lwe(p,s),p.name=t.createUniqueName(s.name||"mesh_"+e),oc(p,s),m.extensions&&Jg(n,p,m),t.assignFinalMaterial(p),h.push(p)}for(let f=0,g=h.length;f<g;f++)t.associations.set(h[f],{meshes:e,primitives:f});if(h.length===1)return h[0];const d=new Oi;t.associations.set(d,{meshes:e});for(let f=0,g=h.length;f<g;f++)d.add(h[f]);return d})}loadCamera(e){let t;const r=this.json.cameras[e],n=r[r.type];if(!n){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return r.type==="perspective"?t=new pr(zp.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):r.type==="orthographic"&&(t=new mS(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),oc(t,r),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],r=[];for(let n=0,s=t.joints.length;n<s;n++)r.push(this._loadNodeShallow(t.joints[n]));return t.inverseBindMatrices!==void 0?r.push(this.getDependency("accessor",t.inverseBindMatrices)):r.push(null),Promise.all(r).then(function(n){const s=n.pop(),o=n,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const h=o[c];if(h){a.push(h);const d=new Pt;s!==null&&d.fromArray(s.array,c*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new _S(a,l)})}loadAnimation(e){const t=this.json.animations[e],r=t.name?t.name:"animation_"+e,n=[],s=[],o=[],a=[],l=[];for(let c=0,u=t.channels.length;c<u;c++){const h=t.channels[c],d=t.samplers[h.sampler],f=h.target,g=f.node,v=t.parameters!==void 0?t.parameters[d.input]:d.input,m=t.parameters!==void 0?t.parameters[d.output]:d.output;f.node!==void 0&&(n.push(this.getDependency("node",g)),s.push(this.getDependency("accessor",v)),o.push(this.getDependency("accessor",m)),a.push(d),l.push(f))}return Promise.all([Promise.all(n),Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],h=c[1],d=c[2],f=c[3],g=c[4],v=[];for(let m=0,p=u.length;m<p;m++){const y=u[m],_=h[m],x=d[m],w=f[m],S=g[m];if(y===void 0)continue;y.updateMatrix();let A;switch(Zl[S.path]){case Zl.weights:A=_y;break;case Zl.rotation:A=Ic;break;case Zl.position:case Zl.scale:default:A=Gh;break}const k=y.name?y.name:y.uuid,M=w.interpolation!==void 0?kwe[w.interpolation]:gm,b=[];Zl[S.path]===Zl.weights?y.traverse(function(N){N.morphTargetInfluences&&b.push(N.name?N.name:N.uuid)}):b.push(k);let P=x.array;if(x.normalized){const N=vk(P.constructor),D=new Float32Array(P.length);for(let U=0,G=P.length;U<G;U++)D[U]=P[U]*N;P=D}for(let N=0,D=b.length;N<D;N++){const U=new A(b[N]+"."+Zl[S.path],_.array,P,M);w.interpolation==="CUBICSPLINE"&&(U.createInterpolant=function(G){const B=this instanceof Ic?Awe:fH;return new B(this.times,this.values,this.getValueSize()/3,G)},U.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),v.push(U)}}return new _k(r,void 0,v)})}createNodeMesh(e){const t=this.json,r=this,n=t.nodes[e];return n.mesh===void 0?null:r.getDependency("mesh",n.mesh).then(function(s){const o=r._getNodeRef(r.meshCache,n.mesh,s);return n.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=n.weights.length;l<c;l++)a.morphTargetInfluences[l]=n.weights[l]}),o})}loadNode(e){const t=this.json,r=this,n=t.nodes[e],s=r._loadNodeShallow(e),o=[],a=n.children||[];for(let c=0,u=a.length;c<u;c++)o.push(r.getDependency("node",a[c]));const l=n.skin===void 0?Promise.resolve(null):r.getDependency("skin",n.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],h=c[1],d=c[2];d!==null&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(d,Nwe)});for(let f=0,g=h.length;f<g;f++)u.add(h[f]);return u})}_loadNodeShallow(e){const t=this.json,r=this.extensions,n=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?n.createUniqueName(s.name):"",a=[],l=n._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(n.getDependency("camera",s.camera).then(function(c){return n._getNodeRef(n.cameraCache,s.camera,c)})),n._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new wL:c.length>1?u=new Oi:c.length===1?u=c[0]:u=new Li,u!==c[0])for(let h=0,d=c.length;h<d;h++)u.add(c[h]);if(s.name&&(u.userData.name=s.name,u.name=o),oc(u,s),s.extensions&&Jg(r,u,s),s.matrix!==void 0){const h=new Pt;h.fromArray(s.matrix),u.applyMatrix4(h)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return n.associations.has(u)||n.associations.set(u,{}),n.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,r=this.json.scenes[e],n=this,s=new Oi;r.name&&(s.name=n.createUniqueName(r.name)),oc(s,r),r.extensions&&Jg(t,s,r);const o=r.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(n.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,h=l.length;u<h;u++)s.add(l[u]);const c=u=>{const h=new Map;for(const[d,f]of n.associations)(d instanceof Ls||d instanceof Jn)&&h.set(d,f);return u.traverse(d=>{const f=n.associations.get(d);f!=null&&h.set(d,f)}),h};return n.associations=c(s),s})}}function Dwe(i,e,t){const r=e.attributes,n=new Ll;if(r.POSITION!==void 0){const a=t.json.accessors[r.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(n.set(new me(l[0],l[1],l[2]),new me(c[0],c[1],c[2])),a.normalized){const u=vk(Df[a.componentType]);n.min.multiplyScalar(u),n.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new me,l=new me;for(let c=0,u=s.length;c<u;c++){const h=s[c];if(h.POSITION!==void 0){const d=t.json.accessors[h.POSITION],f=d.min,g=d.max;if(f!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(g[2]))),d.normalized){const v=vk(Df[d.componentType]);l.multiplyScalar(v)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}n.expandByVector(a)}i.boundingBox=n;const o=new Rl;n.getCenter(o.center),o.radius=n.min.distanceTo(n.max)/2,i.boundingSphere=o}function D4(i,e,t){const r=e.attributes,n=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in r){const a=yk[o]||o.toLowerCase();a in i.attributes||n.push(s(r[o],a))}if(e.indices!==void 0&&!i.index){const o=t.getDependency("accessor",e.indices).then(function(a){i.setIndex(a)});n.push(o)}return oc(i,e),Dwe(i,e,t),Promise.all(n).then(function(){return e.targets!==void 0?$we(i,e.targets,t):i})}const O4={type:"change"},$E={type:"start"},U4={type:"end"};class mH extends dd{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new me,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Jd.ROTATE,MIDDLE:Jd.DOLLY,RIGHT:Jd.PAN},this.touches={ONE:Qd.ROTATE,TWO:Qd.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(F){F.addEventListener("keydown",ft),this._domElementKeyEvents=F},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ft),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(O4),r.update(),s=n.NONE},this.update=function(){const F=new me,de=new Nr().setFromUnitVectors(e.up,new me(0,1,0)),ie=de.clone().invert(),Ee=new me,Ne=new Nr,Ie=2*Math.PI;return function(){const $e=r.object.position;F.copy($e).sub(r.target),F.applyQuaternion(de),a.setFromVector3(F),r.autoRotate&&s===n.NONE&&M(A()),r.enableDamping?(a.theta+=l.theta*r.dampingFactor,a.phi+=l.phi*r.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Le=r.minAzimuthAngle,Ge=r.maxAzimuthAngle;return isFinite(Le)&&isFinite(Ge)&&(Le<-Math.PI?Le+=Ie:Le>Math.PI&&(Le-=Ie),Ge<-Math.PI?Ge+=Ie:Ge>Math.PI&&(Ge-=Ie),Le<=Ge?a.theta=Math.max(Le,Math.min(Ge,a.theta)):a.theta=a.theta>(Le+Ge)/2?Math.max(Le,a.theta):Math.min(Ge,a.theta)),a.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=c,a.radius=Math.max(r.minDistance,Math.min(r.maxDistance,a.radius)),r.enableDamping===!0?r.target.addScaledVector(u,r.dampingFactor):r.target.add(u),F.setFromSpherical(a),F.applyQuaternion(ie),$e.copy(r.target).add(F),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,u.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,h||Ee.distanceToSquared(r.object.position)>o||8*(1-Ne.dot(r.object.quaternion))>o?(r.dispatchEvent(O4),Ee.copy(r.object.position),Ne.copy(r.object.quaternion),h=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",R),r.domElement.removeEventListener("pointerdown",Ae),r.domElement.removeEventListener("pointercancel",Ze),r.domElement.removeEventListener("wheel",st),r.domElement.removeEventListener("pointermove",Qe),r.domElement.removeEventListener("pointerup",Ze),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",ft),r._domElementKeyEvents=null)};const r=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=n.NONE;const o=1e-6,a=new C4,l=new C4;let c=1;const u=new me;let h=!1;const d=new It,f=new It,g=new It,v=new It,m=new It,p=new It,y=new It,_=new It,x=new It,w=[],S={};function A(){return 2*Math.PI/60/60*r.autoRotateSpeed}function k(){return Math.pow(.95,r.zoomSpeed)}function M(F){l.theta-=F}function b(F){l.phi-=F}const P=function(){const F=new me;return function(de,ie){F.setFromMatrixColumn(ie,0),F.multiplyScalar(-de),u.add(F)}}(),N=function(){const F=new me;return function(de,ie){r.screenSpacePanning===!0?F.setFromMatrixColumn(ie,1):(F.setFromMatrixColumn(ie,0),F.crossVectors(r.object.up,F)),F.multiplyScalar(de),u.add(F)}}(),D=function(){const F=new me;return function(de,ie){const Ee=r.domElement;if(r.object.isPerspectiveCamera){const Ne=r.object.position;F.copy(Ne).sub(r.target);let Ie=F.length();Ie*=Math.tan(r.object.fov/2*Math.PI/180),P(2*de*Ie/Ee.clientHeight,r.object.matrix),N(2*ie*Ie/Ee.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(P(de*(r.object.right-r.object.left)/r.object.zoom/Ee.clientWidth,r.object.matrix),N(ie*(r.object.top-r.object.bottom)/r.object.zoom/Ee.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function U(F){r.object.isPerspectiveCamera?c/=F:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*F)),r.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function G(F){r.object.isPerspectiveCamera?c*=F:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/F)),r.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function B(F){d.set(F.clientX,F.clientY)}function Q(F){y.set(F.clientX,F.clientY)}function j(F){v.set(F.clientX,F.clientY)}function X(F){f.set(F.clientX,F.clientY),g.subVectors(f,d).multiplyScalar(r.rotateSpeed);const de=r.domElement;M(2*Math.PI*g.x/de.clientHeight),b(2*Math.PI*g.y/de.clientHeight),d.copy(f),r.update()}function ne(F){_.set(F.clientX,F.clientY),x.subVectors(_,y),x.y>0?U(k()):x.y<0&&G(k()),y.copy(_),r.update()}function ge(F){m.set(F.clientX,F.clientY),p.subVectors(m,v).multiplyScalar(r.panSpeed),D(p.x,p.y),v.copy(m),r.update()}function pe(F){F.deltaY<0?G(k()):F.deltaY>0&&U(k()),r.update()}function V(F){let de=!1;switch(F.code){case r.keys.UP:F.ctrlKey||F.metaKey||F.shiftKey?b(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):D(0,r.keyPanSpeed),de=!0;break;case r.keys.BOTTOM:F.ctrlKey||F.metaKey||F.shiftKey?b(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):D(0,-r.keyPanSpeed),de=!0;break;case r.keys.LEFT:F.ctrlKey||F.metaKey||F.shiftKey?M(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):D(r.keyPanSpeed,0),de=!0;break;case r.keys.RIGHT:F.ctrlKey||F.metaKey||F.shiftKey?M(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):D(-r.keyPanSpeed,0),de=!0;break}de&&(F.preventDefault(),r.update())}function Y(){if(w.length===1)d.set(w[0].pageX,w[0].pageY);else{const F=.5*(w[0].pageX+w[1].pageX),de=.5*(w[0].pageY+w[1].pageY);d.set(F,de)}}function ae(){if(w.length===1)v.set(w[0].pageX,w[0].pageY);else{const F=.5*(w[0].pageX+w[1].pageX),de=.5*(w[0].pageY+w[1].pageY);v.set(F,de)}}function J(){const F=w[0].pageX-w[1].pageX,de=w[0].pageY-w[1].pageY,ie=Math.sqrt(F*F+de*de);y.set(0,ie)}function z(){r.enableZoom&&J(),r.enablePan&&ae()}function _e(){r.enableZoom&&J(),r.enableRotate&&Y()}function ee(F){if(w.length==1)f.set(F.pageX,F.pageY);else{const ie=Se(F),Ee=.5*(F.pageX+ie.x),Ne=.5*(F.pageY+ie.y);f.set(Ee,Ne)}g.subVectors(f,d).multiplyScalar(r.rotateSpeed);const de=r.domElement;M(2*Math.PI*g.x/de.clientHeight),b(2*Math.PI*g.y/de.clientHeight),d.copy(f)}function te(F){if(w.length===1)m.set(F.pageX,F.pageY);else{const de=Se(F),ie=.5*(F.pageX+de.x),Ee=.5*(F.pageY+de.y);m.set(ie,Ee)}p.subVectors(m,v).multiplyScalar(r.panSpeed),D(p.x,p.y),v.copy(m)}function be(F){const de=Se(F),ie=F.pageX-de.x,Ee=F.pageY-de.y,Ne=Math.sqrt(ie*ie+Ee*Ee);_.set(0,Ne),x.set(0,Math.pow(_.y/y.y,r.zoomSpeed)),U(x.y),y.copy(_)}function oe(F){r.enableZoom&&be(F),r.enablePan&&te(F)}function Te(F){r.enableZoom&&be(F),r.enableRotate&&ee(F)}function Ae(F){r.enabled!==!1&&(w.length===0&&(r.domElement.setPointerCapture(F.pointerId),r.domElement.addEventListener("pointermove",Qe),r.domElement.addEventListener("pointerup",Ze)),se(F),F.pointerType==="touch"?Ft(F):ht(F))}function Qe(F){r.enabled!==!1&&(F.pointerType==="touch"?O(F):wt(F))}function Ze(F){xe(F),w.length===0&&(r.domElement.releasePointerCapture(F.pointerId),r.domElement.removeEventListener("pointermove",Qe),r.domElement.removeEventListener("pointerup",Ze)),r.dispatchEvent(U4),s=n.NONE}function ht(F){let de;switch(F.button){case 0:de=r.mouseButtons.LEFT;break;case 1:de=r.mouseButtons.MIDDLE;break;case 2:de=r.mouseButtons.RIGHT;break;default:de=-1}switch(de){case Jd.DOLLY:if(r.enableZoom===!1)return;Q(F),s=n.DOLLY;break;case Jd.ROTATE:if(F.ctrlKey||F.metaKey||F.shiftKey){if(r.enablePan===!1)return;j(F),s=n.PAN}else{if(r.enableRotate===!1)return;B(F),s=n.ROTATE}break;case Jd.PAN:if(F.ctrlKey||F.metaKey||F.shiftKey){if(r.enableRotate===!1)return;B(F),s=n.ROTATE}else{if(r.enablePan===!1)return;j(F),s=n.PAN}break;default:s=n.NONE}s!==n.NONE&&r.dispatchEvent($E)}function wt(F){switch(s){case n.ROTATE:if(r.enableRotate===!1)return;X(F);break;case n.DOLLY:if(r.enableZoom===!1)return;ne(F);break;case n.PAN:if(r.enablePan===!1)return;ge(F);break}}function st(F){r.enabled===!1||r.enableZoom===!1||s!==n.NONE||(F.preventDefault(),r.dispatchEvent($E),pe(F),r.dispatchEvent(U4))}function ft(F){r.enabled===!1||r.enablePan===!1||V(F)}function Ft(F){switch(we(F),w.length){case 1:switch(r.touches.ONE){case Qd.ROTATE:if(r.enableRotate===!1)return;Y(),s=n.TOUCH_ROTATE;break;case Qd.PAN:if(r.enablePan===!1)return;ae(),s=n.TOUCH_PAN;break;default:s=n.NONE}break;case 2:switch(r.touches.TWO){case Qd.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;z(),s=n.TOUCH_DOLLY_PAN;break;case Qd.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;_e(),s=n.TOUCH_DOLLY_ROTATE;break;default:s=n.NONE}break;default:s=n.NONE}s!==n.NONE&&r.dispatchEvent($E)}function O(F){switch(we(F),s){case n.TOUCH_ROTATE:if(r.enableRotate===!1)return;ee(F),r.update();break;case n.TOUCH_PAN:if(r.enablePan===!1)return;te(F),r.update();break;case n.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;oe(F),r.update();break;case n.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Te(F),r.update();break;default:s=n.NONE}}function R(F){r.enabled!==!1&&F.preventDefault()}function se(F){w.push(F)}function xe(F){delete S[F.pointerId];for(let de=0;de<w.length;de++)if(w[de].pointerId==F.pointerId){w.splice(de,1);return}}function we(F){let de=S[F.pointerId];de===void 0&&(de=new It,S[F.pointerId]=de),de.set(F.pageX,F.pageY)}function Se(F){const de=F.pointerId===w[0].pointerId?w[1]:w[0];return S[de.pointerId]}r.domElement.addEventListener("contextmenu",R),r.domElement.addEventListener("pointerdown",Ae),r.domElement.addEventListener("pointercancel",Ze),r.domElement.addEventListener("wheel",st,{passive:!1}),this.update()}}let bS=class bk{static createButton(e){const t=document.createElement("button");function r(){let l=null;async function c(h){h.addEventListener("end",u),await e.xr.setSession(h),t.textContent="EXIT VR",l=h}function u(){l.removeEventListener("end",u),t.textContent="ENTER VR",l=null}t.style.display="",t.style.cursor="pointer",t.style.left="calc(50% - 50px)",t.style.width="100px",t.textContent="ENTER VR",t.onmouseenter=function(){t.style.opacity="1.0"},t.onmouseleave=function(){t.style.opacity="0.5"},t.onclick=function(){if(l===null){const h={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",h).then(c)}else l.end()}}function n(){t.style.display="",t.style.cursor="auto",t.style.left="calc(50% - 75px)",t.style.width="150px",t.onmouseenter=null,t.onmouseleave=null,t.onclick=null}function s(){n(),t.textContent="VR NOT SUPPORTED"}function o(l){n(),console.warn("Exception when trying to call xr.isSessionSupported",l),t.textContent="VR NOT ALLOWED"}function a(l){l.style.position="absolute",l.style.bottom="20px",l.style.padding="12px 6px",l.style.border="1px solid #fff",l.style.borderRadius="4px",l.style.background="rgba(0,0,0,0.1)",l.style.color="#fff",l.style.font="normal 13px sans-serif",l.style.textAlign="center",l.style.opacity="0.5",l.style.outline="none",l.style.zIndex="999"}if("xr"in navigator)return t.id="VRButton",t.style.display="none",a(t),navigator.xr.isSessionSupported("immersive-vr").then(function(l){l?r():s(),l&&bk.xrSessionIsGranted&&t.click()}).catch(o),t;{const l=document.createElement("a");return window.isSecureContext===!1?(l.href=document.location.href.replace(/^http:/,"https:"),l.innerHTML="WEBXR NEEDS HTTPS"):(l.href="https://immersiveweb.dev/",l.innerHTML="WEBXR NOT AVAILABLE"),l.style.left="calc(50% - 90px)",l.style.width="180px",l.style.textDecoration="none",a(l),l}}static registerSessionGrantedListener(){if("xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{bk.xrSessionIsGranted=!0})}}};bS.xrSessionIsGranted=!1;bS.registerSessionGrantedListener();function xh(i){const e=new Nr;return i.forEach(t=>{const r=new me(0,0,0);t.axis==="x"&&r.setX(1),t.axis==="y"&&r.setY(1),t.axis==="z"&&r.setZ(1);const n=t.degrees*Math.PI/180;e.premultiply(new Nr().setFromAxisAngle(r,n))}),e}function A_(i){const[e,t,r,n]=xh(i);return[n,e,t,r]}function xS(i){return new Nr(i[1],i[2],i[3],i[0])}function gH(i){if(i.length===3){const[e,t,r]=i;return{translation:[e,t,0],rotation:A_([{axis:"z",degrees:r}])}}else if(i.length===4){const[e,t,r,n]=i;return{translation:[e,t,r],rotation:A_([{axis:"z",degrees:n}])}}else if(i.length===6){const[e,t,r,n,s,o]=i;return{translation:[e,t,r],rotation:A_([{axis:"x",degrees:n},{axis:"y",degrees:s},{axis:"z",degrees:o}])}}else if(i.length===7){const e=i.slice(0,3),t=i.slice(3,7);return{translation:e,rotation:t}}return LL()}function LL(){return{translation:[0,0,0],rotation:[0,0,0,0]}}const Owe=[{game:"Reefscape",src:"/3d-models/Field3d_2025.glb",rotations:[{axis:"x",degrees:90}],size:[57.57291667,26.4167],unit:"foot"},{game:"Crescendo",src:"/3d-models/Field3d_2024.glb",rotations:[{axis:"x",degrees:90},{axis:"z",degrees:180}],size:[54.2708333,26.9375],unit:"foot"},{game:"Charged Up",src:"/3d-models/Field3d_2023.glb",rotations:[{axis:"x",degrees:90},{axis:"z",degrees:180}],size:[54.27083,26.2916],unit:"foot"},{game:"Rapid React",src:"/3d-models/Field3d_2022.glb",rotations:[{axis:"x",degrees:90}],size:[54,27],unit:"foot"},{game:"Infinite Recharge",src:"/3d-models/Field3d_2021.glb",rotations:[{axis:"x",degrees:90},{axis:"z",degrees:90}],size:[52.4375,26.9375],unit:"foot"},{game:"Evergreen",src:"/3d-models/Field3d_Evergreen.glb",rotations:[{axis:"x",degrees:90}],size:[54,27],unit:"foot"}],_H=[{name:"KitBot",src:"/3d-models/Robot_KitBot.glb",rotations:[{axis:"z",degrees:90}],position:[.12,3.15,0]},{name:"Duck Bot",src:"/3d-models/Robot_Duck Bot.glb",rotations:[{axis:"z",degrees:90}],position:[0,0,0]},{name:"Crab Bot",src:"/3d-models/Robot_Crab Bot.glb",rotations:[{axis:"z",degrees:180}],position:[0,0,.045]},{name:"Bot-Bot Awakens (6328)",src:"/3d-models/Robot_Bot-Bot Awakens (6328).glb",rotations:[{axis:"z",degrees:90},{axis:"y",degrees:90}],position:[0,0,0]},{name:"Bot-Bot Strikes Back (6328)",src:"/3d-models/Robot_Bot-Bot Strikes Back (6328).glb",rotations:[{axis:"x",degrees:90},{axis:"z",degrees:90}],position:[.05,0,.06]},{name:"REV 2023 Starter Bot",src:"/3d-models/Robot_REV 2023 Starter Bot.glb",rotations:[{axis:"x",degrees:90},{axis:"z",degrees:90}],position:[0,0,0],components:[{name:"0",src:"/3d-models/Robot_REV 2023 Starter Bot_0.glb",rotations:[{axis:"x",degrees:90},{axis:"z",degrees:90},{axis:"y",degrees:211}],position:[.645,0,.48]},{name:"1",src:"/3d-models/Robot_REV 2023 Starter Bot_1.glb",rotations:[{axis:"x",degrees:90},{axis:"z",degrees:90}],position:[.305,0,-.37]}]}],RL=[{name:"R2D2",content:`
    <robot name="flexible">
      <link name="base_link">
        <visual>
          <geometry>
            <cylinder length="0.6" radius="0.2"/>
          </geometry>
          <material name="blue">
            <color rgba="0 0 .8 1"/>
          </material>
        </visual>
      </link>
    
      <link name="right_leg">
        <visual>
          <geometry>
            <box size="0.6 .2 .1"/>
          </geometry>
          <origin rpy="0 1.57075 0" xyz="0 0 -0.3"/>
          <material name="white">
            <color rgba="1 1 1 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="base_to_right_leg" type="fixed">
        <parent link="base_link"/>
        <child link="right_leg"/>
        <origin xyz="0.22 0 .25"/>
      </joint>
    
      <link name="right_base">
        <visual>
          <geometry>
            <box size=".1 0.4 .1"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="right_base_joint" type="fixed">
        <parent link="right_leg"/>
        <child link="right_base"/>
        <origin xyz="0 0 -0.6"/>
      </joint>
    
      <link name="right_front_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black">
            <color rgba="0 0 0 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="right_front_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="right_base"/>
        <child link="right_front_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="right_back_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="right_back_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="right_base"/>
        <child link="right_back_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 -0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="left_leg">
        <visual>
          <geometry>
            <box size="0.6 .2 .1"/>
          </geometry>
          <origin rpy="0 1.57075 0" xyz="0 0 -0.3"/>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="base_to_left_leg" type="fixed">
        <parent link="base_link"/>
        <child link="left_leg"/>
        <origin xyz="-0.22 0 .25"/>
      </joint>
    
      <link name="left_base">
        <visual>
          <geometry>
            <box size=".1 0.4 .1"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="left_base_joint" type="fixed">
        <parent link="left_leg"/>
        <child link="left_base"/>
        <origin xyz="0 0 -0.6"/>
      </joint>
    
      <link name="left_front_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="left_front_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="left_base"/>
        <child link="left_front_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="left_back_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="left_back_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="left_base"/>
        <child link="left_back_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 -0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
      <joint name="gripper_extension" type="prismatic">
        <parent link="base_link"/>
        <child link="gripper_pole"/>
        <limit effort="1000.0" lower="-0.38" upper="0" velocity="0.5"/>
        <origin rpy="0 0 1.57075" xyz="0 0.19 .2"/>
      </joint>
    
      <link name="gripper_pole">
        <visual>
          <geometry>
            <cylinder length="0.2" radius=".01"/>
          </geometry>
          <origin rpy="0 1.57075 0 " xyz="0.1 0 0"/>
          <material name="Gray">
            <color rgba=".7 .7 .7 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="left_gripper_joint" type="revolute">
        <axis xyz="0 0 1"/>
        <limit effort="1000.0" lower="0.0" upper="0.548" velocity="0.5"/>
        <origin rpy="0 0 0" xyz="0.2 0.01 0"/>
        <parent link="gripper_pole"/>
        <child link="left_gripper"/>
      </joint>
    
      <link name="left_gripper">
        <visual>
          <origin rpy="0.0 0 0" xyz="0 0 0"/>
          <geometry>
            <box size="0.1 0.02 0.02"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="left_tip_joint" type="fixed">
        <parent link="left_gripper"/>
        <child link="left_tip"/>
      </joint>
    
      <link name="left_tip">
        <visual>
          <origin rpy="0.0 0 0" xyz="0.09137 0.00495 0"/>
          <geometry>
            <mesh filename="package://pr2_description/meshes/gripper_v0/l_finger_tip.dae"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="right_gripper_joint" type="revolute">
        <axis xyz="0 0 -1"/>
        <limit effort="1000.0" lower="0.0" upper="0.548" velocity="0.5"/>
        <origin rpy="0 0 0" xyz="0.2 -0.01 0"/>
        <parent link="gripper_pole"/>
        <child link="right_gripper"/>
      </joint>
    
      <link name="right_gripper">
        <visual>
          <origin rpy="-3.1415 0 0" xyz="0 0 0"/>
          <geometry>
             <box size="0.1 0.02 0.02"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="right_tip_joint" type="fixed">
        <parent link="right_gripper"/>
        <child link="right_tip"/>
      </joint>
    
      <link name="right_tip">
        <visual>
          <origin rpy="-3.1415 0 0" xyz="0.09137 0.00495 0"/>
          <geometry>
            <mesh filename="package://pr2_description/meshes/gripper_v0/l_finger_tip.dae"/>
          </geometry>
        </visual>
      </link>
    
      <link name="head">
        <visual>
          <geometry>
            <sphere radius="0.2"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="head_swivel" type="continuous">
        <parent link="base_link"/>
        <child link="head"/>
        <axis xyz="0 0 1"/>
        <origin xyz="0 0 0.3"/>
      </joint>
    
      <link name="box">
        <visual>
          <geometry>
            <box size=".08 .08 .08"/>
          </geometry>
          <material name="blue"/>
        </visual>
      </link>
    
      <joint name="tobox" type="fixed">
        <parent link="head"/>
        <child link="box"/>
        <origin xyz="0 0.1414 0.1414"/>
      </joint>
    
    </robot>
    
    `,rotations:[{axis:"z",degrees:-90}],position:[0,0,.5]},{name:"PI Robot",content:`
    <robot name="pi_robot">

      <!-- * * * Link Definitions * * * -->

      <link name="base_link">
        <visual>
            <origin xyz="0 0 0.0425" rpy="0 0 0"/>
          <geometry>
            <box size="0.32 0.26 0.085"/>
          </geometry>
          <material name="Cyan1">
                <color rgba="0 0.9 0.9 1.0"/>
            </material>
        </visual>	
      </link>

      <link name="base_laser">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.025" length="0.07"/>
          </geometry>
          <material name="Black1">
                <color rgba="0.2 0.2 0.2 1.0"/>
            </material>
        </visual>	
      </link>

      <link name="cpu_link">
        <visual>
            <origin xyz="0 0 0.035" rpy="0 0 0"/>
          <geometry>
            <box size="0.19 0.19 0.07"/>
          </geometry>
          <material name="Cyan2">
                <color rgba="0 0.7 0.7 1.0"/>
            </material>
        </visual>	
      </link>

        <link name="upper_base_link">
        <visual>
          <origin xyz="0 0 0.05" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.085" length="0.10"/>
          </geometry>
            <material name="Cyan3">
            <color rgba="0 0.5 0.5 0"/>
          </material>
        </visual>
      </link>

        <link name="torso_link">
        <visual>
          <origin xyz="0 0 0.12" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.05" length="0.24"/>
          </geometry>
            <material name="Yellow2">
            <color rgba="0.8 0.8 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_pan_link">
        <visual>
          <origin xyz="0 0 0.0225" rpy="0 0 0"/>
          <geometry>
            <box size="0.05 0.045 0.045"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_tilt_link">
        <visual>
          <origin xyz="0 0 0.02" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.038 0.04"/>
          </geometry>
            <material name="Green2">
            <color rgba="0.1 0.8 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="neck_link">
        <visual>
          <origin xyz="0 0 0.021" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.042"/>
          </geometry>
            <material name="Green3">
            <color rgba="0.1 0.5 0.1 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_link">
        <visual>
          <origin xyz="0 0 0.025" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.07 0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <!--	
      <link name="eyes_link">
        <visual>
          <origin xyz="0 0 0.035" rpy="0 0 0" />
          <geometry>
            <box size="0.01 0.04 0.01" />
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>
      -->

      <link name="antenna_link">
        <visual>
          <origin xyz="0 0 0.035" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.002" length="0.05"/>
          </geometry>
            <material name="Grey3">
            <color rgba="0.8 0.8 0.8 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.025 0.015 0.05"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_shoulder_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.025 0.015 0.05"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_forward_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue1">
            <color rgba="0 0 0.9 1.0"/>
          </material>
        </visual>
      </link>
        
      <link name="right_shoulder_forward_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue1">
            <color rgba="0 0 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_up_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_shoulder_up_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_upper_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.05"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_upper_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.05"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_elbow_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 1.57"/>
          <geometry>
            <box size="0.035 0.035 0.05"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_elbow_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 1.57"/>
          <geometry>
            <box size="0.035 0.035 0.05"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_lower_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_lower_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_wrist_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_wrist_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_hand_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.01 0.06"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.7 0.7 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_hand_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.01 0.06"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <!-- * * * Joint Definitions * * * -->

      <joint name="cpu_joint" type="fixed">
          <parent link="base_link"/>
          <child link="cpu_link"/>
          <origin xyz="0.025 0 0.085" rpy="0 0 0"/>
      </joint>

      <joint name="base_laser_joint" type="fixed">
          <parent link="base_link"/>
          <child link="base_laser"/>
          <origin xyz="0.18 0 0.07" rpy="0 0 0"/>
      </joint>

      <joint name="upper_base_joint" type="fixed">
          <parent link="cpu_link"/>
          <child link="upper_base_link"/>
          <origin xyz="0 0 0.07" rpy="0 0 0"/>
      </joint>

      <joint name="torso_joint" type="revolute">
          <parent link="upper_base_link"/>
          <child link="torso_link"/>
          <origin xyz="0 0 0.10" rpy="0 0 0"/>
          <axis xyz="0 0 1"/>
          <limit lower="-3.1416" upper="3.1416" effort="10" velocity="3"/>
        </joint>

      <joint name="head_pan_servo" type="fixed">
          <parent link="torso_link"/>
          <child link="head_pan_link"/>
          <origin xyz="0 0 0.225" rpy="0 0 0"/>
      </joint>

      <joint name="head_pan_joint" type="revolute">
          <parent link="head_pan_link"/>
          <child link="head_tilt_link"/>
          <origin xyz="0 0 0.045" rpy="0 0 0"/>
          <axis xyz="0 0 1"/>
          <limit lower="-3.1416" upper="3.1416" effort="10" velocity="3"/>
        </joint>
        
      <joint name="head_tilt_joint" type="revolute">
          <parent link="head_tilt_link"/>
          <child link="neck_link"/>
          <origin xyz="0 0 0.04" rpy="0 0 0"/>
          <axis xyz="0 1 0"/>
          <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
        </joint>
        
      <joint name="neck_joint" type="fixed">
          <parent link="neck_link"/>
          <child link="head_link"/>
          <origin xyz="0.05 0 0.015" rpy="0 0 0"/>
      </joint>
      <!--	
      <joint name="eyes_joint" type="fixed">
          <parent link="head_link" />
          <child link="eyes_link" />
          <origin xyz="0.02 0 0.03" rpy="0 0 0" />
      </joint>
      -->

      <joint name="antenna_joint" type="fixed">
          <parent link="head_link"/>
          <child link="antenna_link"/>
          <origin xyz="0.0 -0.025 0.065" rpy="0 0 0"/>
      </joint>

      <joint name="left_shoulder_joint" type="fixed">
          <parent link="torso_link"/>
          <child link="left_shoulder_link"/>
          <origin xyz="0 0.055 0.165" rpy="0 0 0"/>
      </joint>

      <joint name="right_shoulder_joint" type="fixed">
          <parent link="torso_link"/>
          <child link="right_shoulder_link"/>
          <origin xyz="0 -0.055 0.165" rpy="0 0 0"/>
      </joint>

      <joint name="left_shoulder_forward_joint" type="revolute">
          <parent link="left_shoulder_link"/>
          <child link="left_shoulder_forward_link"/>
          <origin xyz="0 0.025 0" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="right_shoulder_forward_joint" type="revolute">
          <parent link="right_shoulder_link"/>
          <child link="right_shoulder_forward_link"/>
          <origin xyz="0 -0.025 0" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="left_shoulder_up_joint" type="revolute">
          <parent link="left_shoulder_forward_link"/>
          <child link="left_shoulder_up_link"/>
          <origin xyz="0 0.04 -0.01" rpy="0 -0.707 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 1 0"/>
      </joint>

      <joint name="right_shoulder_up_joint" type="revolute">
          <parent link="right_shoulder_forward_link"/>
          <child link="right_shoulder_up_link"/>
          <origin xyz="0 -0.04 -0.01" rpy="0 -0.707 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 1 0"/>
      </joint>

      <joint name="left_upper_arm_joint" type="fixed">
          <parent link="left_shoulder_up_link"/>
          <child link="left_upper_arm_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
      </joint>

      <joint name="right_upper_arm_joint" type="fixed">
          <parent link="right_shoulder_up_link"/>
          <child link="right_upper_arm_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
      </joint>

      <joint name="left_elbow_joint" type="revolute">
          <parent link="left_upper_arm_link"/>
          <child link="left_elbow_link"/>
          <origin xyz="-0.005 0 -0.05" rpy="0 0 0"/>
            <limit lower="-3.146" upper="3.146" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="right_elbow_joint" type="revolute">
          <parent link="right_upper_arm_link"/>
          <child link="right_elbow_link"/>
          <origin xyz="-0.005 0 -0.05" rpy="0 0 0"/>
            <limit lower="-3.146" upper="3.146" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="left_lower_arm_joint" type="fixed">
          <parent link="left_elbow_link"/>
          <child link="left_lower_arm_link"/>
          <origin xyz="0 0 -0.08" rpy="0 0 0"/>
      </joint>

      <joint name="right_lower_arm_joint" type="fixed">
          <parent link="right_elbow_link"/>
          <child link="right_lower_arm_link"/>
          <origin xyz="0 0 -0.08" rpy="0 0 0"/>
      </joint>

      <joint name="left_wrist_joint" type="revolute">
          <parent link="left_lower_arm_link"/>
          <child link="left_wrist_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="1 0 0"/>
      </joint>

      <joint name="right_wrist_joint" type="revolute">
          <parent link="right_lower_arm_link"/>
          <child link="right_wrist_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="1 0 0"/>
      </joint>

      <joint name="left_hand_joint" type="fixed">
          <parent link="left_wrist_link"/>
          <child link="left_hand_link"/>
          <origin xyz="0 0 -0.055" rpy="0 0 0"/>
      </joint>

      <joint name="right_hand_joint" type="fixed">
          <parent link="right_wrist_link"/>
          <child link="right_hand_link"/>
          <origin xyz="0 0 -0.055" rpy="0 0 0"/>
      </joint>

      </robot>

    `,rotations:[],position:[0,0,0]}];var H0,Mx,Sx,Bp;class Uwe{constructor(e,t,r){kr(this,H0),kr(this,Mx),kr(this,Sx),kr(this,Bp,new Oi),rn(this,H0,e),rn(this,Mx,t),rn(this,Sx,r),this.create()}create(){var e,t;const r=ci(this,H0).getFieldGroup();r.remove(ci(this,Bp)),(e=ci(this,Sx))==null||e.call(this,this);const n=new Oi;rn(this,Bp,n),r.add(ci(this,Bp)),(t=ci(this,Mx))==null||t.call(this,this)}getGroup(){return ci(this,Bp)}getField3d(){return ci(this,H0)}}H0=new WeakMap,Mx=new WeakMap,Sx=new WeakMap,Bp=new WeakMap;const xm=(i,e)=>`${i.replace(/\/$/,"")}/${e.replace(/^\//,"")}`;function yH(i){const e=i.lastIndexOf("/");return e<0?"":i.substring(0,e)}var zwe=Object.defineProperty,fd=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&zwe(e,t,n),n};const au=class xk extends ct{constructor(){super(...arguments),this.objectConfigs=_H,this.name=this.objectConfigs[0].name,this.pose=[0,0,0],this._translation=[0,0,0],this._rotation=[0,0,0,0],this.loader=new $L,this.group=new Oi}getObjectConfig(){return this.objectConfigs.find(({name:e})=>e===this.name)??this.objectConfigs[0]}getField(){const e=this.closest("frc-field3d");if(e)return e}static adjustMaterials(e){e.traverse(t=>{const r=t;if(r.isMesh&&r.material instanceof av){const n=r.material;n.metalness=0,n.roughness=1}})}static updatePose(e,t){const[r,n,s]=t.translation;e.position.set(r,n,s),e.rotation.setFromQuaternion(xS(t.rotation))}loadRobotModel(){const e=this.getField(),t=this.getObjectConfig();if(!e)return;const r=e.getFieldGroup();r.remove(this.group),this.object&&this.group.remove(this.object);const n=t.components??[],s=[t.src].concat(n.map(({src:l})=>l)).map(l=>new Promise(c=>{this.loader.load(xm(e.assetPathPrefix??"",l),u=>c(u))})),o=new Oi;this.group=o,r.add(this.group);const a=new Oi;this.object=a,o.add(a),a.rotation.setFromQuaternion(xh(t.rotations)),a.position.set(...t.position),Promise.all(s).then(l=>{l.forEach(c=>{xk.adjustMaterials(c.scene),a.add(c.scene)})})}firstUpdated(){this.updateObjectConfigs(),this.renderObject()}updated(e){if(e.has("name")&&this.loadRobotModel(),e.has("translation")||e.has("rotation")||e.has("pose"))if(this.translation||this.rotation)this._translation=this.translation??[0,0,0],this._rotation=this.rotation??[0,0,0,0];else if(this.pose.length>=7)this._translation=this.pose.slice(0,3),this._rotation=this.pose.slice(3,7);else{const[t=0,r=0,n=0]=this.pose;this._translation=[t,r],this._rotation=n}}updateObjectConfigs(){const e=this.getField(),t=e==null?void 0:e.objectConfigs;t!=null&&t.length&&t!==this.objectConfigs&&(this.objectConfigs=t,this.objectConfigs.some(r=>r.name===this.name)||(this.name=this.objectConfigs[0].name))}renderObject(){this.group&&xk.updatePose(this.group,{translation:this._translation.length===2?[...this._translation,0]:this._translation,rotation:typeof this._rotation=="number"?A_([{axis:"z",degrees:this._rotation}]):this._rotation}),requestAnimationFrame(()=>{this.renderObject()})}};fd([Ui()],au.prototype,"objectConfigs");fd([W({type:String})],au.prototype,"name");fd([W({type:Array})],au.prototype,"pose");fd([W({type:Array})],au.prototype,"translation");fd([W({type:Array})],au.prototype,"rotation");fd([Ui()],au.prototype,"_translation");fd([Ui()],au.prototype,"_rotation");let vH=au;customElements.get("frc-field3d-object")||customElements.define("frc-field3d-object",vH);class Fwe extends ou{constructor(e){super(e)}load(e,t,r,n){const s=this,o=new cv(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(l){n?n(l):console.error(l),s.manager.itemError(e)}},r,n)}parse(e){function t(c){const u=new DataView(c),h=32/8*3+32/8*3*3+16/8,d=u.getUint32(80,!0);if(80+32/8+d*h===u.byteLength)return!0;const f=[115,111,108,105,100];for(let g=0;g<5;g++)if(r(f,u,g))return!1;return!0}function r(c,u,h){for(let d=0,f=c.length;d<f;d++)if(c[d]!==u.getUint8(h+d))return!1;return!0}function n(c){const u=new DataView(c),h=u.getUint32(80,!0);let d,f,g,v=!1,m,p,y,_,x;for(let b=0;b<70;b++)u.getUint32(b,!1)==1129270351&&u.getUint8(b+4)==82&&u.getUint8(b+5)==61&&(v=!0,m=new Float32Array(h*3*3),p=u.getUint8(b+6)/255,y=u.getUint8(b+7)/255,_=u.getUint8(b+8)/255,x=u.getUint8(b+9)/255);const w=84,S=12*4+2,A=new on,k=new Float32Array(h*3*3),M=new Float32Array(h*3*3);for(let b=0;b<h;b++){const P=w+b*S,N=u.getFloat32(P,!0),D=u.getFloat32(P+4,!0),U=u.getFloat32(P+8,!0);if(v){const G=u.getUint16(P+48,!0);G&32768?(d=p,f=y,g=_):(d=(G&31)/31,f=(G>>5&31)/31,g=(G>>10&31)/31)}for(let G=1;G<=3;G++){const B=P+G*12,Q=b*3*3+(G-1)*3;k[Q]=u.getFloat32(B,!0),k[Q+1]=u.getFloat32(B+4,!0),k[Q+2]=u.getFloat32(B+8,!0),M[Q]=N,M[Q+1]=D,M[Q+2]=U,v&&(m[Q]=d,m[Q+1]=f,m[Q+2]=g)}}return A.setAttribute("position",new gr(k,3)),A.setAttribute("normal",new gr(M,3)),v&&(A.setAttribute("color",new gr(m,3)),A.hasColors=!0,A.alpha=x),A}function s(c){const u=new on,h=/solid([\s\S]*?)endsolid/g,d=/facet([\s\S]*?)endfacet/g;let f=0;const g=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,v=new RegExp("vertex"+g+g+g,"g"),m=new RegExp("normal"+g+g+g,"g"),p=[],y=[],_=new me;let x,w=0,S=0,A=0;for(;(x=h.exec(c))!==null;){S=A;const k=x[0];for(;(x=d.exec(k))!==null;){let P=0,N=0;const D=x[0];for(;(x=m.exec(D))!==null;)_.x=parseFloat(x[1]),_.y=parseFloat(x[2]),_.z=parseFloat(x[3]),N++;for(;(x=v.exec(D))!==null;)p.push(parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3])),y.push(_.x,_.y,_.z),P++,A++;N!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+f),P!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+f),f++}const M=S,b=A-S;u.addGroup(M,b,w),w++}return u.setAttribute("position",new di(p,3)),u.setAttribute("normal",new di(y,3)),u}function o(c){return typeof c!="string"?new TextDecoder().decode(c):c}function a(c){if(typeof c=="string"){const u=new Uint8Array(c.length);for(let h=0;h<c.length;h++)u[h]=c.charCodeAt(h)&255;return u.buffer||u}else return c}const l=a(e);return t(l)?n(l):s(o(e))}}class z4 extends Gxe{constructor(e){super(e)}parse(e){function t(B){switch(B.image_type){case d:case v:(B.colormap_length>256||B.colormap_size!==24||B.colormap_type!==1)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case f:case g:case m:case p:B.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case h:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',B.image_type)}(B.width<=0||B.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),B.pixel_size!==8&&B.pixel_size!==16&&B.pixel_size!==24&&B.pixel_size!==32&&console.error('THREE.TGALoader: Invalid pixel size "%s".',B.pixel_size)}function r(B,Q,j,X,ne){let ge,pe;const V=j.pixel_size>>3,Y=j.width*j.height*V;if(Q&&(pe=ne.subarray(X,X+=j.colormap_length*(j.colormap_size>>3))),B){ge=new Uint8Array(Y);let ae,J,z,_e=0;const ee=new Uint8Array(V);for(;_e<Y;)if(ae=ne[X++],J=(ae&127)+1,ae&128){for(z=0;z<V;++z)ee[z]=ne[X++];for(z=0;z<J;++z)ge.set(ee,_e+z*V);_e+=V*J}else{for(J*=V,z=0;z<J;++z)ge[_e+z]=ne[X++];_e+=J}}else ge=ne.subarray(X,X+=Q?j.width*j.height:Y);return{pixel_data:ge,palettes:pe}}function n(B,Q,j,X,ne,ge,pe,V,Y){const ae=Y;let J,z=0,_e,ee;const te=b.width;for(ee=Q;ee!==X;ee+=j)for(_e=ne;_e!==pe;_e+=ge,z++)J=V[z],B[(_e+te*ee)*4+3]=255,B[(_e+te*ee)*4+2]=ae[J*3+0],B[(_e+te*ee)*4+1]=ae[J*3+1],B[(_e+te*ee)*4+0]=ae[J*3+2];return B}function s(B,Q,j,X,ne,ge,pe,V){let Y,ae=0,J,z;const _e=b.width;for(z=Q;z!==X;z+=j)for(J=ne;J!==pe;J+=ge,ae+=2)Y=V[ae+0]+(V[ae+1]<<8),B[(J+_e*z)*4+0]=(Y&31744)>>7,B[(J+_e*z)*4+1]=(Y&992)>>2,B[(J+_e*z)*4+2]=(Y&31)<<3,B[(J+_e*z)*4+3]=Y&32768?0:255;return B}function o(B,Q,j,X,ne,ge,pe,V){let Y=0,ae,J;const z=b.width;for(J=Q;J!==X;J+=j)for(ae=ne;ae!==pe;ae+=ge,Y+=3)B[(ae+z*J)*4+3]=255,B[(ae+z*J)*4+2]=V[Y+0],B[(ae+z*J)*4+1]=V[Y+1],B[(ae+z*J)*4+0]=V[Y+2];return B}function a(B,Q,j,X,ne,ge,pe,V){let Y=0,ae,J;const z=b.width;for(J=Q;J!==X;J+=j)for(ae=ne;ae!==pe;ae+=ge,Y+=4)B[(ae+z*J)*4+2]=V[Y+0],B[(ae+z*J)*4+1]=V[Y+1],B[(ae+z*J)*4+0]=V[Y+2],B[(ae+z*J)*4+3]=V[Y+3];return B}function l(B,Q,j,X,ne,ge,pe,V){let Y,ae=0,J,z;const _e=b.width;for(z=Q;z!==X;z+=j)for(J=ne;J!==pe;J+=ge,ae++)Y=V[ae],B[(J+_e*z)*4+0]=Y,B[(J+_e*z)*4+1]=Y,B[(J+_e*z)*4+2]=Y,B[(J+_e*z)*4+3]=255;return B}function c(B,Q,j,X,ne,ge,pe,V){let Y=0,ae,J;const z=b.width;for(J=Q;J!==X;J+=j)for(ae=ne;ae!==pe;ae+=ge,Y+=2)B[(ae+z*J)*4+0]=V[Y+0],B[(ae+z*J)*4+1]=V[Y+0],B[(ae+z*J)*4+2]=V[Y+0],B[(ae+z*J)*4+3]=V[Y+1];return B}function u(B,Q,j,X,ne){let ge,pe,V,Y,ae,J;switch((b.flags&y)>>_){default:case S:ge=0,V=1,ae=Q,pe=0,Y=1,J=j;break;case x:ge=0,V=1,ae=Q,pe=j-1,Y=-1,J=-1;break;case A:ge=Q-1,V=-1,ae=-1,pe=0,Y=1,J=j;break;case w:ge=Q-1,V=-1,ae=-1,pe=j-1,Y=-1,J=-1;break}if(D)switch(b.pixel_size){case 8:l(B,pe,Y,J,ge,V,ae,X);break;case 16:c(B,pe,Y,J,ge,V,ae,X);break;default:console.error("THREE.TGALoader: Format not supported.");break}else switch(b.pixel_size){case 8:n(B,pe,Y,J,ge,V,ae,X,ne);break;case 16:s(B,pe,Y,J,ge,V,ae,X);break;case 24:o(B,pe,Y,J,ge,V,ae,X);break;case 32:a(B,pe,Y,J,ge,V,ae,X);break;default:console.error("THREE.TGALoader: Format not supported.");break}return B}const h=0,d=1,f=2,g=3,v=9,m=10,p=11,y=48,_=4,x=0,w=1,S=2,A=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");let k=0;const M=new Uint8Array(e),b={id_length:M[k++],colormap_type:M[k++],image_type:M[k++],colormap_index:M[k++]|M[k++]<<8,colormap_length:M[k++]|M[k++]<<8,colormap_size:M[k++],origin:[M[k++]|M[k++]<<8,M[k++]|M[k++]<<8],width:M[k++]|M[k++]<<8,height:M[k++]|M[k++]<<8,pixel_size:M[k++],flags:M[k++]};t(b),b.id_length+k>e.length&&console.error("THREE.TGALoader: No data."),k+=b.id_length;let P=!1,N=!1,D=!1;switch(b.image_type){case v:P=!0,N=!0;break;case d:N=!0;break;case m:P=!0;break;case f:break;case p:P=!0,D=!0;break;case g:D=!0;break}const U=new Uint8Array(b.width*b.height*4),G=r(P,N,b,k,M);return u(U,b.width,b.height,G.pixel_data,G.palettes),{data:U,width:b.width,height:b.height,flipY:!0,generateMipmaps:!0,minFilter:fl}}}class Bwe extends ou{constructor(e){super(e)}load(e,t,r,n){const s=this,o=s.path===""?yy.extractUrlBase(e):s.path,a=new cv(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){n?n(c):console.error(c),s.manager.itemError(e)}},r,n)}parse(e,t){function r(E,T){const $=[],C=E.childNodes;for(let L=0,re=C.length;L<re;L++){const he=C[L];he.nodeName===T&&$.push(he)}return $}function n(E){if(E.length===0)return[];const T=E.trim().split(/\s+/),$=new Array(T.length);for(let C=0,L=T.length;C<L;C++)$[C]=T[C];return $}function s(E){if(E.length===0)return[];const T=E.trim().split(/\s+/),$=new Array(T.length);for(let C=0,L=T.length;C<L;C++)$[C]=parseFloat(T[C]);return $}function o(E){if(E.length===0)return[];const T=E.trim().split(/\s+/),$=new Array(T.length);for(let C=0,L=T.length;C<L;C++)$[C]=parseInt(T[C]);return $}function a(E){return E.substring(1)}function l(){return"three_default_"+DS++}function c(E){return Object.keys(E).length===0}function u(E){return{unit:h(r(E,"unit")[0]),upAxis:d(r(E,"up_axis")[0])}}function h(E){return E!==void 0&&E.hasAttribute("meter")===!0?parseFloat(E.getAttribute("meter")):1}function d(E){return E!==void 0?E.textContent:"Y_UP"}function f(E,T,$,C){const L=r(E,T)[0];if(L!==void 0){const re=r(L,$);for(let he=0;he<re.length;he++)C(re[he])}}function g(E,T){for(const $ in E){const C=E[$];C.build=T(E[$])}}function v(E,T){return E.build!==void 0||(E.build=T(E)),E.build}function m(E){const T={sources:{},samplers:{},channels:{}};let $=!1;for(let C=0,L=E.childNodes.length;C<L;C++){const re=E.childNodes[C];if(re.nodeType!==1)continue;let he;switch(re.nodeName){case"source":he=re.getAttribute("id"),T.sources[he]=ye(re);break;case"sampler":he=re.getAttribute("id"),T.samplers[he]=p(re);break;case"channel":he=re.getAttribute("target"),T.channels[he]=y(re);break;case"animation":m(re),$=!0;break;default:console.log(re)}}$===!1&&(Be.animations[E.getAttribute("id")||zp.generateUUID()]=T)}function p(E){const T={inputs:{}};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"input":const re=a(L.getAttribute("source")),he=L.getAttribute("semantic");T.inputs[he]=re;break}}return T}function y(E){const T={};let $=E.getAttribute("target").split("/");const C=$.shift();let L=$.shift();const re=L.indexOf("(")!==-1,he=L.indexOf(".")!==-1;if(he)$=L.split("."),L=$.shift(),T.member=$.shift();else if(re){const ke=L.split("(");L=ke.shift();for(let Me=0;Me<ke.length;Me++)ke[Me]=parseInt(ke[Me].replace(/\)/,""));T.indices=ke}return T.id=C,T.sid=L,T.arraySyntax=re,T.memberSyntax=he,T.sampler=a(E.getAttribute("source")),T}function _(E){const T=[],$=E.channels,C=E.samplers,L=E.sources;for(const re in $)if($.hasOwnProperty(re)){const he=$[re],ke=C[he.sampler],Me=ke.inputs.INPUT,Re=ke.inputs.OUTPUT,Ue=L[Me],ve=L[Re],Pe=w(he,Ue,ve);b(Pe,T)}return T}function x(E){return v(Be.animations[E],_)}function w(E,T,$){const C=Be.nodes[E.id],L=Lt(C.id),re=C.transforms[E.sid],he=C.matrix.clone().transpose();let ke,Me,Re,Ue,ve,Pe;const Oe={};switch(re){case"matrix":for(Re=0,Ue=T.array.length;Re<Ue;Re++)if(ke=T.array[Re],Me=Re*$.stride,Oe[ke]===void 0&&(Oe[ke]={}),E.arraySyntax===!0){const ze=$.array[Me],bt=E.indices[0]+4*E.indices[1];Oe[ke][bt]=ze}else for(ve=0,Pe=$.stride;ve<Pe;ve++)Oe[ke][ve]=$.array[Me+ve];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',re);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',re);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',re);break}const He=S(Oe,he);return{name:L.uuid,keyframes:He}}function S(E,T){const $=[];for(const L in E)$.push({time:parseFloat(L),value:E[L]});$.sort(C);for(let L=0;L<16;L++)P($,L,T.elements[L]);return $;function C(L,re){return L.time-re.time}}const A=new me,k=new me,M=new Nr;function b(E,T){const $=E.keyframes,C=E.name,L=[],re=[],he=[],ke=[];for(let Me=0,Re=$.length;Me<Re;Me++){const Ue=$[Me],ve=Ue.time,Pe=Ue.value;mt.fromArray(Pe).transpose(),mt.decompose(A,M,k),L.push(ve),re.push(A.x,A.y,A.z),he.push(M.x,M.y,M.z,M.w),ke.push(k.x,k.y,k.z)}return re.length>0&&T.push(new Gh(C+".position",L,re)),he.length>0&&T.push(new Ic(C+".quaternion",L,he)),ke.length>0&&T.push(new Gh(C+".scale",L,ke)),T}function P(E,T,$){let C,L=!0,re,he;for(re=0,he=E.length;re<he;re++)C=E[re],C.value[T]===void 0?C.value[T]=null:L=!1;if(L===!0)for(re=0,he=E.length;re<he;re++)C=E[re],C.value[T]=$;else N(E,T)}function N(E,T){let $,C;for(let L=0,re=E.length;L<re;L++){const he=E[L];if(he.value[T]===null){if($=D(E,L,T),C=U(E,L,T),$===null){he.value[T]=C.value[T];continue}if(C===null){he.value[T]=$.value[T];continue}G(he,$,C,T)}}}function D(E,T,$){for(;T>=0;){const C=E[T];if(C.value[$]!==null)return C;T--}return null}function U(E,T,$){for(;T<E.length;){const C=E[T];if(C.value[$]!==null)return C;T++}return null}function G(E,T,$,C){if($.time-T.time===0){E.value[C]=T.value[C];return}E.value[C]=(E.time-T.time)*($.value[C]-T.value[C])/($.time-T.time)+T.value[C]}function B(E){const T={name:E.getAttribute("id")||"default",start:parseFloat(E.getAttribute("start")||0),end:parseFloat(E.getAttribute("end")||0),animations:[]};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"instance_animation":T.animations.push(a(L.getAttribute("url")));break}}Be.clips[E.getAttribute("id")]=T}function Q(E){const T=[],$=E.name,C=E.end-E.start||-1,L=E.animations;for(let re=0,he=L.length;re<he;re++){const ke=x(L[re]);for(let Me=0,Re=ke.length;Me<Re;Me++)T.push(ke[Me])}return new _k($,C,T)}function j(E){return v(Be.clips[E],Q)}function X(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"skin":T.id=a(L.getAttribute("source")),T.skin=ne(L);break;case"morph":T.id=a(L.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}Be.controllers[E.getAttribute("id")]=T}function ne(E){const T={sources:{}};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"bind_shape_matrix":T.bindShapeMatrix=s(L.textContent);break;case"source":const re=L.getAttribute("id");T.sources[re]=ye(L);break;case"joints":T.joints=ge(L);break;case"vertex_weights":T.vertexWeights=pe(L);break}}return T}function ge(E){const T={inputs:{}};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"input":const re=L.getAttribute("semantic"),he=a(L.getAttribute("source"));T.inputs[re]=he;break}}return T}function pe(E){const T={inputs:{}};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"input":const re=L.getAttribute("semantic"),he=a(L.getAttribute("source")),ke=parseInt(L.getAttribute("offset"));T.inputs[re]={id:he,offset:ke};break;case"vcount":T.vcount=o(L.textContent);break;case"v":T.v=o(L.textContent);break}}return T}function V(E){const T={id:E.id},$=Be.geometries[T.id];return E.skin!==void 0&&(T.skin=Y(E.skin),$.sources.skinIndices=T.skin.indices,$.sources.skinWeights=T.skin.weights),T}function Y(E){const T={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},$=E.sources,C=E.vertexWeights,L=C.vcount,re=C.v,he=C.inputs.JOINT.offset,ke=C.inputs.WEIGHT.offset,Me=E.sources[E.joints.inputs.JOINT],Re=E.sources[E.joints.inputs.INV_BIND_MATRIX],Ue=$[C.inputs.WEIGHT.id].array;let ve=0,Pe,Oe,He;for(Pe=0,He=L.length;Pe<He;Pe++){const bt=L[Pe],gt=[];for(Oe=0;Oe<bt;Oe++){const pt=re[ve+he],_t=re[ve+ke],Yi=Ue[_t];gt.push({index:pt,weight:Yi}),ve+=2}for(gt.sort(ze),Oe=0;Oe<4;Oe++){const pt=gt[Oe];pt!==void 0?(T.indices.array.push(pt.index),T.weights.array.push(pt.weight)):(T.indices.array.push(0),T.weights.array.push(0))}}for(E.bindShapeMatrix?T.bindMatrix=new Pt().fromArray(E.bindShapeMatrix).transpose():T.bindMatrix=new Pt().identity(),Pe=0,He=Me.array.length;Pe<He;Pe++){const bt=Me.array[Pe],gt=new Pt().fromArray(Re.array,Pe*Re.stride).transpose();T.joints.push({name:bt,boneInverse:gt})}return T;function ze(bt,gt){return gt.weight-bt.weight}}function ae(E){return v(Be.controllers[E],V)}function J(E){const T={init_from:r(E,"init_from")[0].textContent};Be.images[E.getAttribute("id")]=T}function z(E){return E.build!==void 0?E.build:E.init_from}function _e(E){const T=Be.images[E];return T!==void 0?v(T,z):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",E),null)}function ee(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"profile_COMMON":T.profile=te(L);break}}Be.effects[E.getAttribute("id")]=T}function te(E){const T={surfaces:{},samplers:{}};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"newparam":be(L,T);break;case"technique":T.technique=Ae(L);break;case"extra":T.extra=ft(L);break}}return T}function be(E,T){const $=E.getAttribute("sid");for(let C=0,L=E.childNodes.length;C<L;C++){const re=E.childNodes[C];if(re.nodeType===1)switch(re.nodeName){case"surface":T.surfaces[$]=oe(re);break;case"sampler2D":T.samplers[$]=Te(re);break}}}function oe(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"init_from":T.init_from=L.textContent;break}}return T}function Te(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"source":T.source=L.textContent;break}}return T}function Ae(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"constant":case"lambert":case"blinn":case"phong":T.type=L.nodeName,T.parameters=Qe(L);break;case"extra":T.extra=ft(L);break}}return T}function Qe(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":T[L.nodeName]=Ze(L);break;case"transparent":T[L.nodeName]={opaque:L.hasAttribute("opaque")?L.getAttribute("opaque"):"A_ONE",data:Ze(L)};break}}return T}function Ze(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"color":T[L.nodeName]=s(L.textContent);break;case"float":T[L.nodeName]=parseFloat(L.textContent);break;case"texture":T[L.nodeName]={id:L.getAttribute("texture"),extra:ht(L)};break}}return T}function ht(E){const T={technique:{}};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"extra":wt(L,T);break}}return T}function wt(E,T){for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"technique":st(L,T);break}}}function st(E,T){for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":T.technique[L.nodeName]=parseFloat(L.textContent);break;case"wrapU":case"wrapV":L.textContent.toUpperCase()==="TRUE"?T.technique[L.nodeName]=1:L.textContent.toUpperCase()==="FALSE"?T.technique[L.nodeName]=0:T.technique[L.nodeName]=parseInt(L.textContent);break;case"bump":T[L.nodeName]=O(L);break}}}function ft(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"technique":T.technique=Ft(L);break}}return T}function Ft(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"double_sided":T[L.nodeName]=parseInt(L.textContent);break;case"bump":T[L.nodeName]=O(L);break}}return T}function O(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"texture":T[L.nodeName]={id:L.getAttribute("texture"),texcoord:L.getAttribute("texcoord"),extra:ht(L)};break}}return T}function R(E){return E}function se(E){return v(Be.effects[E],R)}function xe(E){const T={name:E.getAttribute("name")};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"instance_effect":T.url=a(L.getAttribute("url"));break}}Be.materials[E.getAttribute("id")]=T}function we(E){let T,$=E.slice((E.lastIndexOf(".")-1>>>0)+2);switch($=$.toLowerCase(),$){case"tga":T=bu;break;default:T=dg}return T}function Se(E){const T=se(E.url),$=T.profile.technique;let C;switch($.type){case"phong":case"blinn":C=new E_;break;case"lambert":C=new Ixe;break;default:C=new go;break}C.name=E.name||"";function L(Me,Re=null){const Ue=T.profile.samplers[Me.id];let ve=null;if(Ue!==void 0){const Pe=T.profile.surfaces[Ue.source];ve=_e(Pe.init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),ve=_e(Me.id);if(ve!==null){const Pe=we(ve);if(Pe!==void 0){const Oe=Pe.load(ve),He=Me.extra;if(He!==void 0&&He.technique!==void 0&&c(He.technique)===!1){const ze=He.technique;Oe.wrapS=ze.wrapU?Vo:Gr,Oe.wrapT=ze.wrapV?Vo:Gr,Oe.offset.set(ze.offsetU||0,ze.offsetV||0),Oe.repeat.set(ze.repeatU||1,ze.repeatV||1)}else Oe.wrapS=Vo,Oe.wrapT=Vo;return Re!==null&&(Oe.encoding=Re),Oe}else return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",ve),null}else return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",Me.id),null}const re=$.parameters;for(const Me in re){const Re=re[Me];switch(Me){case"diffuse":Re.color&&C.color.fromArray(Re.color),Re.texture&&(C.map=L(Re.texture,qt));break;case"specular":Re.color&&C.specular&&C.specular.fromArray(Re.color),Re.texture&&(C.specularMap=L(Re.texture));break;case"bump":Re.texture&&(C.normalMap=L(Re.texture));break;case"ambient":Re.texture&&(C.lightMap=L(Re.texture,qt));break;case"shininess":Re.float&&C.shininess&&(C.shininess=Re.float);break;case"emission":Re.color&&C.emissive&&C.emissive.fromArray(Re.color),Re.texture&&(C.emissiveMap=L(Re.texture,qt));break}}C.color.convertSRGBToLinear(),C.specular&&C.specular.convertSRGBToLinear(),C.emissive&&C.emissive.convertSRGBToLinear();let he=re.transparent,ke=re.transparency;if(ke===void 0&&he&&(ke={float:1}),he===void 0&&ke&&(he={opaque:"A_ONE",data:{color:[1,1,1,1]}}),he&&ke)if(he.data.texture)C.transparent=!0;else{const Me=he.data.color;switch(he.opaque){case"A_ONE":C.opacity=Me[3]*ke.float;break;case"RGB_ZERO":C.opacity=1-Me[0]*ke.float;break;case"A_ZERO":C.opacity=1-Me[3]*ke.float;break;case"RGB_ONE":C.opacity=Me[0]*ke.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',he.opaque)}C.opacity<1&&(C.transparent=!0)}if($.extra!==void 0&&$.extra.technique!==void 0){const Me=$.extra.technique;for(const Re in Me){const Ue=Me[Re];switch(Re){case"double_sided":C.side=Ue===1?Ss:Xo;break;case"bump":C.normalMap=L(Ue.texture),C.normalScale=new It(1,1);break}}}return C}function F(E){return v(Be.materials[E],Se)}function de(E){const T={name:E.getAttribute("name")};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"optics":T.optics=ie(L);break}}Be.cameras[E.getAttribute("id")]=T}function ie(E){for(let T=0;T<E.childNodes.length;T++){const $=E.childNodes[T];switch($.nodeName){case"technique_common":return Ee($)}}return{}}function Ee(E){const T={};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];switch(C.nodeName){case"perspective":case"orthographic":T.technique=C.nodeName,T.parameters=Ne(C);break}}return T}function Ne(E){const T={};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];switch(C.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":T[C.nodeName]=parseFloat(C.textContent);break}}return T}function Ie(E){let T;switch(E.optics.technique){case"perspective":T=new pr(E.optics.parameters.yfov,E.optics.parameters.aspect_ratio,E.optics.parameters.znear,E.optics.parameters.zfar);break;case"orthographic":let $=E.optics.parameters.ymag,C=E.optics.parameters.xmag;const L=E.optics.parameters.aspect_ratio;C=C===void 0?$*L:C,$=$===void 0?C/L:$,C*=.5,$*=.5,T=new mS(-C,C,$,-$,E.optics.parameters.znear,E.optics.parameters.zfar);break;default:T=new pr;break}return T.name=E.name||"",T}function $e(E){const T=Be.cameras[E];return T!==void 0?v(T,Ie):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",E),null)}function Le(E){let T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"technique_common":T=Ge(L);break}}Be.lights[E.getAttribute("id")]=T}function Ge(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"directional":case"point":case"spot":case"ambient":T.technique=L.nodeName,T.parameters=dt(L)}}return T}function dt(E){const T={};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"color":const re=s(L.textContent);T.color=new At().fromArray(re).convertSRGBToLinear();break;case"falloff_angle":T.falloffAngle=parseFloat(L.textContent);break;case"quadratic_attenuation":const he=parseFloat(L.textContent);T.distance=he?Math.sqrt(1/he):0;break}}return T}function Tt(E){let T;switch(E.technique){case"directional":T=new dH;break;case"point":T=new vS;break;case"spot":T=new hH;break;case"ambient":T=new Yxe;break}return E.parameters.color&&T.color.copy(E.parameters.color),E.parameters.distance&&(T.distance=E.parameters.distance),T}function H(E){const T=Be.lights[E];return T!==void 0?v(T,Tt):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",E),null)}function ce(E){const T={name:E.getAttribute("name"),sources:{},vertices:{},primitives:[]},$=r(E,"mesh")[0];if($!==void 0){for(let C=0;C<$.childNodes.length;C++){const L=$.childNodes[C];if(L.nodeType!==1)continue;const re=L.getAttribute("id");switch(L.nodeName){case"source":T.sources[re]=ye(L);break;case"vertices":T.vertices=Ce(L);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",L.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":T.primitives.push(Fe(L));break;default:console.log(L)}}Be.geometries[E.getAttribute("id")]=T}}function ye(E){const T={array:[],stride:3};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"float_array":T.array=s(C.textContent);break;case"Name_array":T.array=n(C.textContent);break;case"technique_common":const L=r(C,"accessor")[0];L!==void 0&&(T.stride=parseInt(L.getAttribute("stride")));break}}return T}function Ce(E){const T={};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];C.nodeType===1&&(T[C.getAttribute("semantic")]=a(C.getAttribute("source")))}return T}function Fe(E){const T={type:E.nodeName,material:E.getAttribute("material"),count:parseInt(E.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let $=0,C=E.childNodes.length;$<C;$++){const L=E.childNodes[$];if(L.nodeType===1)switch(L.nodeName){case"input":const re=a(L.getAttribute("source")),he=L.getAttribute("semantic"),ke=parseInt(L.getAttribute("offset")),Me=parseInt(L.getAttribute("set")),Re=Me>0?he+Me:he;T.inputs[Re]={id:re,offset:ke},T.stride=Math.max(T.stride,ke+1),he==="TEXCOORD"&&(T.hasUV=!0);break;case"vcount":T.vcount=o(L.textContent);break;case"p":T.p=o(L.textContent);break}}return T}function vt(E){const T={};for(let $=0;$<E.length;$++){const C=E[$];T[C.type]===void 0&&(T[C.type]=[]),T[C.type].push(C)}return T}function St(E){let T=0;for(let $=0,C=E.length;$<C;$++)E[$].hasUV===!0&&T++;T>0&&T<E.length&&(E.uvsNeedsFix=!0)}function Dt(E){const T={},$=E.sources,C=E.vertices,L=E.primitives;if(L.length===0)return{};const re=vt(L);for(const he in re){const ke=re[he];St(ke),T[he]=Fi(ke,$,C)}return T}function Fi(E,T,$){const C={},L={array:[],stride:0},re={array:[],stride:0},he={array:[],stride:0},ke={array:[],stride:0},Me={array:[],stride:0},Re={array:[],stride:4},Ue={array:[],stride:4},ve=new on,Pe=[];let Oe=0;for(let He=0;He<E.length;He++){const ze=E[He],bt=ze.inputs;let gt=0;switch(ze.type){case"lines":case"linestrips":gt=ze.count*2;break;case"triangles":gt=ze.count*3;break;case"polylist":for(let pt=0;pt<ze.count;pt++){const _t=ze.vcount[pt];switch(_t){case 3:gt+=3;break;case 4:gt+=6;break;default:gt+=(_t-2)*3;break}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",ze.type)}ve.addGroup(Oe,gt,He),Oe+=gt,ze.material&&Pe.push(ze.material);for(const pt in bt){const _t=bt[pt];switch(pt){case"VERTEX":for(const Yi in $){const mi=$[Yi];switch(Yi){case"POSITION":const Nn=L.array.length;if(at(ze,T[mi],_t.offset,L.array),L.stride=T[mi].stride,T.skinWeights&&T.skinIndices&&(at(ze,T.skinIndices,_t.offset,Re.array),at(ze,T.skinWeights,_t.offset,Ue.array)),ze.hasUV===!1&&E.uvsNeedsFix===!0){const OS=(L.array.length-Nn)/L.stride;for(let fg=0;fg<OS;fg++)he.array.push(0,0)}break;case"NORMAL":at(ze,T[mi],_t.offset,re.array),re.stride=T[mi].stride;break;case"COLOR":at(ze,T[mi],_t.offset,Me.array),Me.stride=T[mi].stride;break;case"TEXCOORD":at(ze,T[mi],_t.offset,he.array),he.stride=T[mi].stride;break;case"TEXCOORD1":at(ze,T[mi],_t.offset,ke.array),he.stride=T[mi].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',Yi)}}break;case"NORMAL":at(ze,T[_t.id],_t.offset,re.array),re.stride=T[_t.id].stride;break;case"COLOR":at(ze,T[_t.id],_t.offset,Me.array,!0),Me.stride=T[_t.id].stride;break;case"TEXCOORD":at(ze,T[_t.id],_t.offset,he.array),he.stride=T[_t.id].stride;break;case"TEXCOORD1":at(ze,T[_t.id],_t.offset,ke.array),ke.stride=T[_t.id].stride;break}}}return L.array.length>0&&ve.setAttribute("position",new di(L.array,L.stride)),re.array.length>0&&ve.setAttribute("normal",new di(re.array,re.stride)),Me.array.length>0&&ve.setAttribute("color",new di(Me.array,Me.stride)),he.array.length>0&&ve.setAttribute("uv",new di(he.array,he.stride)),ke.array.length>0&&ve.setAttribute("uv2",new di(ke.array,ke.stride)),Re.array.length>0&&ve.setAttribute("skinIndex",new di(Re.array,Re.stride)),Ue.array.length>0&&ve.setAttribute("skinWeight",new di(Ue.array,Ue.stride)),C.data=ve,C.type=E[0].type,C.materialKeys=Pe,C}function at(E,T,$,C,L=!1){const re=E.p,he=E.stride,ke=E.vcount;function Me(ve){let Pe=re[ve+$]*Ue;const Oe=Pe+Ue;for(;Pe<Oe;Pe++)C.push(Re[Pe]);if(L){const He=C.length-Ue-1;ga.setRGB(C[He+0],C[He+1],C[He+2]).convertSRGBToLinear(),C[He+0]=ga.r,C[He+1]=ga.g,C[He+2]=ga.b}}const Re=T.array,Ue=T.stride;if(E.vcount!==void 0){let ve=0;for(let Pe=0,Oe=ke.length;Pe<Oe;Pe++){const He=ke[Pe];if(He===4){const ze=ve+he*0,bt=ve+he*1,gt=ve+he*2,pt=ve+he*3;Me(ze),Me(bt),Me(pt),Me(bt),Me(gt),Me(pt)}else if(He===3){const ze=ve+he*0,bt=ve+he*1,gt=ve+he*2;Me(ze),Me(bt),Me(gt)}else if(He>4)for(let ze=1,bt=He-2;ze<=bt;ze++){const gt=ve+he*0,pt=ve+he*ze,_t=ve+he*(ze+1);Me(gt),Me(pt),Me(_t)}ve+=he*He}}else for(let ve=0,Pe=re.length;ve<Pe;ve+=he)Me(ve)}function ei(E){return v(Be.geometries[E],Dt)}function fi(E){const T={name:E.getAttribute("name")||"",joints:{},links:[]};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"technique_common":mu(C,T);break}}Be.kinematicsModels[E.getAttribute("id")]=T}function Cn(E){return E.build!==void 0?E.build:E}function pa(E){return v(Be.kinematicsModels[E],Cn)}function mu(E,T){for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"joint":T.joints[C.getAttribute("sid")]=gu(C);break;case"link":T.links.push(I(C));break}}}function gu(E){let T;for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"prismatic":case"revolute":T=_u(C);break}}return T}function _u(E){const T={sid:E.getAttribute("sid"),name:E.getAttribute("name")||"",axis:new me,limits:{min:0,max:0},type:E.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"axis":const L=s(C.textContent);T.axis.fromArray(L);break;case"limits":const re=C.getElementsByTagName("max")[0],he=C.getElementsByTagName("min")[0];T.limits.max=parseFloat(re.textContent),T.limits.min=parseFloat(he.textContent);break}}return T.limits.min>=T.limits.max&&(T.static=!0),T.middlePosition=(T.limits.min+T.limits.max)/2,T}function I(E){const T={sid:E.getAttribute("sid"),name:E.getAttribute("name")||"",attachments:[],transforms:[]};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"attachment_full":T.attachments.push(Z(C));break;case"matrix":case"translate":case"rotate":T.transforms.push(le(C));break}}return T}function Z(E){const T={joint:E.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"link":T.links.push(I(C));break;case"matrix":case"translate":case"rotate":T.transforms.push(le(C));break}}return T}function le(E){const T={type:E.nodeName},$=s(E.textContent);switch(T.type){case"matrix":T.obj=new Pt,T.obj.fromArray($).transpose();break;case"translate":T.obj=new me,T.obj.fromArray($);break;case"rotate":T.obj=new me,T.obj.fromArray($),T.angle=zp.degToRad($[3]);break}return T}function K(E){const T={name:E.getAttribute("name")||"",rigidBodies:{}};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"rigid_body":T.rigidBodies[C.getAttribute("name")]={},ue(C,T.rigidBodies[C.getAttribute("name")]);break}}Be.physicsModels[E.getAttribute("id")]=T}function ue(E,T){for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"technique_common":De(C,T);break}}}function De(E,T){for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"inertia":T.inertia=s(C.textContent);break;case"mass":T.mass=s(C.textContent)[0];break}}}function je(E){const T={bindJointAxis:[]};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"bind_joint_axis":T.bindJointAxis.push(We(C));break}}Be.kinematicsScenes[a(E.getAttribute("url"))]=T}function We(E){const T={target:E.getAttribute("target").split("/").pop()};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType===1)switch(C.nodeName){case"axis":const L=C.getElementsByTagName("param")[0];T.axis=L.textContent;const re=T.axis.split("inst_").pop().split("axis")[0];T.jointIndex=re.substring(0,re.length-1);break}}return T}function Je(E){return E.build!==void 0?E.build:E}function ot(E){return v(Be.kinematicsScenes[E],Je)}function tt(){const E=Object.keys(Be.kinematicsModels)[0],T=Object.keys(Be.kinematicsScenes)[0],$=Object.keys(Be.visualScenes)[0];if(E===void 0||T===void 0)return;const C=pa(E),L=ot(T),re=Pn($),he=L.bindJointAxis,ke={};for(let Ue=0,ve=he.length;Ue<ve;Ue++){const Pe=he[Ue],Oe=Ot.querySelector('[sid="'+Pe.target+'"]');if(Oe){const He=Oe.parentElement;Me(Pe.jointIndex,He)}}function Me(Ue,ve){const Pe=ve.getAttribute("name"),Oe=C.joints[Ue];re.traverse(function(He){He.name===Pe&&(ke[Ue]={object:He,transforms:et(ve),joint:Oe,position:Oe.zeroPosition})})}const Re=new Pt;pg={joints:C&&C.joints,getJointValue:function(Ue){const ve=ke[Ue];if(ve)return ve.position;console.warn("THREE.ColladaLoader: Joint "+Ue+" doesn't exist.")},setJointValue:function(Ue,ve){const Pe=ke[Ue];if(Pe){const Oe=Pe.joint;if(ve>Oe.limits.max||ve<Oe.limits.min)console.warn("THREE.ColladaLoader: Joint "+Ue+" value "+ve+" outside of limits (min: "+Oe.limits.min+", max: "+Oe.limits.max+").");else if(Oe.static)console.warn("THREE.ColladaLoader: Joint "+Ue+" is static.");else{const He=Pe.object,ze=Oe.axis,bt=Pe.transforms;mt.identity();for(let gt=0;gt<bt.length;gt++){const pt=bt[gt];if(pt.sid&&pt.sid.indexOf(Ue)!==-1)switch(Oe.type){case"revolute":mt.multiply(Re.makeRotationAxis(ze,zp.degToRad(ve)));break;case"prismatic":mt.multiply(Re.makeTranslation(ze.x*ve,ze.y*ve,ze.z*ve));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+Oe.type);break}else switch(pt.type){case"matrix":mt.multiply(pt.obj);break;case"translate":mt.multiply(Re.makeTranslation(pt.obj.x,pt.obj.y,pt.obj.z));break;case"scale":mt.scale(pt.obj);break;case"rotate":mt.multiply(Re.makeRotationAxis(pt.obj,pt.angle));break}}He.matrix.copy(mt),He.matrix.decompose(He.position,He.quaternion,He.scale),ke[Ue].position=ve}}else console.log("THREE.ColladaLoader: "+Ue+" does not exist.")}}}function et(E){const T=[],$=Ot.querySelector('[id="'+E.id+'"]');for(let C=0;C<$.childNodes.length;C++){const L=$.childNodes[C];if(L.nodeType!==1)continue;let re,he;switch(L.nodeName){case"matrix":re=s(L.textContent);const ke=new Pt().fromArray(re).transpose();T.push({sid:L.getAttribute("sid"),type:L.nodeName,obj:ke});break;case"translate":case"scale":re=s(L.textContent),he=new me().fromArray(re),T.push({sid:L.getAttribute("sid"),type:L.nodeName,obj:he});break;case"rotate":re=s(L.textContent),he=new me().fromArray(re);const Me=zp.degToRad(re[3]);T.push({sid:L.getAttribute("sid"),type:L.nodeName,obj:he,angle:Me});break}}return T}function Mt(E){const T=E.getElementsByTagName("node");for(let $=0;$<T.length;$++){const C=T[$];C.hasAttribute("id")===!1&&C.setAttribute("id",l())}}const mt=new Pt,Bt=new me;function Mi(E){const T={name:E.getAttribute("name")||"",type:E.getAttribute("type"),id:E.getAttribute("id"),sid:E.getAttribute("sid"),matrix:new Pt,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];if(C.nodeType!==1)continue;let L;switch(C.nodeName){case"node":T.nodes.push(C.getAttribute("id")),Mi(C);break;case"instance_camera":T.instanceCameras.push(a(C.getAttribute("url")));break;case"instance_controller":T.instanceControllers.push(kt(C));break;case"instance_light":T.instanceLights.push(a(C.getAttribute("url")));break;case"instance_geometry":T.instanceGeometries.push(kt(C));break;case"instance_node":T.instanceNodes.push(a(C.getAttribute("url")));break;case"matrix":L=s(C.textContent),T.matrix.multiply(mt.fromArray(L).transpose()),T.transforms[C.getAttribute("sid")]=C.nodeName;break;case"translate":L=s(C.textContent),Bt.fromArray(L),T.matrix.multiply(mt.makeTranslation(Bt.x,Bt.y,Bt.z)),T.transforms[C.getAttribute("sid")]=C.nodeName;break;case"rotate":L=s(C.textContent);const re=zp.degToRad(L[3]);T.matrix.multiply(mt.makeRotationAxis(Bt.fromArray(L),re)),T.transforms[C.getAttribute("sid")]=C.nodeName;break;case"scale":L=s(C.textContent),T.matrix.scale(Bt.fromArray(L)),T.transforms[C.getAttribute("sid")]=C.nodeName;break;case"extra":break;default:console.log(C)}}return Ln(T.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",T.id):Be.nodes[T.id]=T,T}function kt(E){const T={id:a(E.getAttribute("url")),materials:{},skeletons:[]};for(let $=0;$<E.childNodes.length;$++){const C=E.childNodes[$];switch(C.nodeName){case"bind_material":const L=C.getElementsByTagName("instance_material");for(let re=0;re<L.length;re++){const he=L[re],ke=he.getAttribute("symbol"),Me=he.getAttribute("target");T.materials[ke]=a(Me)}break;case"skeleton":T.skeletons.push(a(C.textContent));break}}return T}function nt(E,T){const $=[],C=[];let L,re,he;for(L=0;L<E.length;L++){const Re=E[L];let Ue;if(Ln(Re))Ue=Lt(Re),$n(Ue,T,$);else if(ti(Re)){const ve=Be.visualScenes[Re].children;for(let Pe=0;Pe<ve.length;Pe++){const Oe=ve[Pe];if(Oe.type==="JOINT"){const He=Lt(Oe.id);$n(He,T,$)}}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",Re)}for(L=0;L<T.length;L++)for(re=0;re<$.length;re++)if(he=$[re],he.bone.name===T[L].name){C[L]=he,he.processed=!0;break}for(L=0;L<$.length;L++)he=$[L],he.processed===!1&&(C.push(he),he.processed=!0);const ke=[],Me=[];for(L=0;L<C.length;L++)he=C[L],ke.push(he.bone),Me.push(he.boneInverse);return new _S(ke,Me)}function $n(E,T,$){E.traverse(function(C){if(C.isBone===!0){let L;for(let re=0;re<T.length;re++){const he=T[re];if(he.name===C.name){L=he.boneInverse;break}}L===void 0&&(L=new Pt),$.push({bone:C,boneInverse:L,processed:!1})}})}function Ws(E){const T=[],$=E.matrix,C=E.nodes,L=E.type,re=E.instanceCameras,he=E.instanceControllers,ke=E.instanceLights,Me=E.instanceGeometries,Re=E.instanceNodes;for(let ve=0,Pe=C.length;ve<Pe;ve++)T.push(Lt(C[ve]));for(let ve=0,Pe=re.length;ve<Pe;ve++){const Oe=$e(re[ve]);Oe!==null&&T.push(Oe.clone())}for(let ve=0,Pe=he.length;ve<Pe;ve++){const Oe=he[ve],He=ae(Oe.id),ze=ei(He.id),bt=xr(ze,Oe.materials),gt=Oe.skeletons,pt=He.skin.joints,_t=nt(gt,pt);for(let Yi=0,mi=bt.length;Yi<mi;Yi++){const Nn=bt[Yi];Nn.isSkinnedMesh&&(Nn.bind(_t,He.skin.bindMatrix),Nn.normalizeSkinWeights()),T.push(Nn)}}for(let ve=0,Pe=ke.length;ve<Pe;ve++){const Oe=H(ke[ve]);Oe!==null&&T.push(Oe.clone())}for(let ve=0,Pe=Me.length;ve<Pe;ve++){const Oe=Me[ve],He=ei(Oe.id),ze=xr(He,Oe.materials);for(let bt=0,gt=ze.length;bt<gt;bt++)T.push(ze[bt])}for(let ve=0,Pe=Re.length;ve<Pe;ve++)T.push(Lt(Re[ve]).clone());let Ue;if(C.length===0&&T.length===1)Ue=T[0];else{Ue=L==="JOINT"?new wL:new Oi;for(let ve=0;ve<T.length;ve++)Ue.add(T[ve])}return Ue.name=L==="JOINT"?E.sid:E.name,Ue.matrix.copy($),Ue.matrix.decompose(Ue.position,Ue.quaternion,Ue.scale),Ue}const qi=new go({color:16711935});function fa(E,T){const $=[];for(let C=0,L=E.length;C<L;C++){const re=T[E[C]];re===void 0?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",E[C]),$.push(qi)):$.push(F(re))}return $}function xr(E,T){const $=[];for(const C in E){const L=E[C],re=fa(L.materialKeys,T);if(re.length===0&&(C==="lines"||C==="linestrips"?re.push(new vm):re.push(new E_)),C==="lines"||C==="linestrips")for(let Re=0,Ue=re.length;Re<Ue;Re++){const ve=re[Re];if(ve.isMeshPhongMaterial===!0||ve.isMeshLambertMaterial===!0){const Pe=new vm;Pe.color.copy(ve.color),Pe.opacity=ve.opacity,Pe.transparent=ve.transparent,re[Re]=Pe}}const he=L.data.attributes.skinIndex!==void 0,ke=re.length===1?re[0]:re;let Me;switch(C){case"lines":Me=new ML(L.data,ke);break;case"linestrips":Me=new ov(L.data,ke);break;case"triangles":case"polylist":he?Me=new rH(L.data,ke):Me=new Wi(L.data,ke);break}$.push(Me)}return $}function Ln(E){return Be.nodes[E]!==void 0}function Lt(E){return v(Be.nodes[E],Ws)}function Xi(E){const T={name:E.getAttribute("name"),children:[]};Mt(E);const $=r(E,"node");for(let C=0;C<$.length;C++)T.children.push(Mi($[C]));Be.visualScenes[E.getAttribute("id")]=T}function Rn(E){const T=new Oi;T.name=E.name;const $=E.children;for(let C=0;C<$.length;C++){const L=$[C];T.add(Lt(L.id))}return T}function ti(E){return Be.visualScenes[E]!==void 0}function Pn(E){return v(Be.visualScenes[E],Rn)}function yu(E){const T=r(E,"instance_visual_scene")[0];return Pn(a(T.getAttribute("url")))}function ma(){const E=Be.clips;if(c(E)===!0){if(c(Be.animations)===!1){const T=[];for(const $ in Be.animations){const C=x($);for(let L=0,re=C.length;L<re;L++)T.push(C[L])}_a.push(new _k("default",-1,T))}}else for(const T in E)_a.push(j(T))}function NS(E){let T="";const $=[E];for(;$.length;){const C=$.shift();C.nodeType===Node.TEXT_NODE?T+=C.textContent:(T+=`
`,$.push.apply($,C.childNodes))}return T.trim()}if(e.length===0)return{scene:new bL};const ug=new DOMParser().parseFromString(e,"application/xml"),Ot=r(ug,"COLLADA")[0],vu=ug.getElementsByTagName("parsererror")[0];if(vu!==void 0){const E=r(vu,"div")[0];let T;return E?T=E.textContent:T=NS(vu),console.error(`THREE.ColladaLoader: Failed to parse collada file.
`,T),null}const IS=Ot.getAttribute("version");console.debug("THREE.ColladaLoader: File version",IS);const hg=u(r(Ot,"asset")[0]),dg=new EL(this.manager);dg.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);let bu;z4&&(bu=new z4(this.manager),bu.setPath(this.resourcePath||t));const ga=new At,_a=[];let pg={},DS=0;const Be={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};f(Ot,"library_animations","animation",m),f(Ot,"library_animation_clips","animation_clip",B),f(Ot,"library_controllers","controller",X),f(Ot,"library_images","image",J),f(Ot,"library_effects","effect",ee),f(Ot,"library_materials","material",xe),f(Ot,"library_cameras","camera",de),f(Ot,"library_lights","light",Le),f(Ot,"library_geometries","geometry",ce),f(Ot,"library_nodes","node",Mi),f(Ot,"library_visual_scenes","visual_scene",Xi),f(Ot,"library_kinematics_models","kinematics_model",fi),f(Ot,"library_physics_models","physics_model",K),f(Ot,"scene","instance_kinematics_scene",je),g(Be.animations,_),g(Be.clips,Q),g(Be.controllers,V),g(Be.images,z),g(Be.effects,R),g(Be.materials,Se),g(Be.cameras,Ie),g(Be.lights,Tt),g(Be.geometries,Dt),g(Be.visualScenes,Rn),ma(),tt();const ya=yu(r(Ot,"scene")[0]);return ya.animations=_a,hg.upAxis==="Z_UP"&&(console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."),ya.rotation.set(-Math.PI/2,0,0)),ya.scale.multiplyScalar(hg.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),_a},kinematics:pg,library:Be,scene:ya}}}const F4=new me,Vwe=new pS,fb=new Pt,Jl=new Pt,mb=new Nr,gb=new me(1,1,1),_b=new me;class wS extends Li{constructor(...e){super(...e),this.urdfNode=null,this.urdfName=""}copy(e,t){return super.copy(e,t),this.urdfNode=e.urdfNode,this.urdfName=e.urdfName,this}}class jwe extends wS{constructor(...e){super(...e),this.isURDFCollider=!0,this.type="URDFCollider"}}class Hwe extends wS{constructor(...e){super(...e),this.isURDFVisual=!0,this.type="URDFVisual"}}class bH extends wS{constructor(...e){super(...e),this.isURDFLink=!0,this.type="URDFLink"}}class xH extends wS{get jointType(){return this._jointType}set jointType(e){if(this.jointType!==e)switch(this._jointType=e,this.matrixWorldNeedsUpdate=!0,e){case"fixed":this.jointValue=[];break;case"continuous":case"revolute":case"prismatic":this.jointValue=new Array(1).fill(0);break;case"planar":this.jointValue=new Array(3).fill(0),this.axis=new me(0,0,1);break;case"floating":this.jointValue=new Array(6).fill(0);break}}get angle(){return this.jointValue[0]}constructor(...e){super(...e),this.isURDFJoint=!0,this.type="URDFJoint",this.jointValue=null,this.jointType="fixed",this.axis=new me(1,0,0),this.limit={lower:0,upper:0},this.ignoreLimits=!1,this.origPosition=null,this.origQuaternion=null,this.mimicJoints=[]}copy(e,t){return super.copy(e,t),this.jointType=e.jointType,this.axis=e.axis.clone(),this.limit.lower=e.limit.lower,this.limit.upper=e.limit.upper,this.ignoreLimits=!1,this.jointValue=[...e.jointValue],this.origPosition=e.origPosition?e.origPosition.clone():null,this.origQuaternion=e.origQuaternion?e.origQuaternion.clone():null,this.mimicJoints=[...e.mimicJoints],this}setJointValue(...e){e=e.map(r=>r===null?null:parseFloat(r)),(!this.origPosition||!this.origQuaternion)&&(this.origPosition=this.position.clone(),this.origQuaternion=this.quaternion.clone());let t=!1;switch(this.mimicJoints.forEach(r=>{t=r.updateFromMimickedJoint(...e)||t}),this.jointType){case"fixed":return t;case"continuous":case"revolute":{let r=e[0];return r==null||r===this.jointValue[0]?t:(!this.ignoreLimits&&this.jointType==="revolute"&&(r=Math.min(this.limit.upper,r),r=Math.max(this.limit.lower,r)),this.quaternion.setFromAxisAngle(this.axis,r).premultiply(this.origQuaternion),this.jointValue[0]!==r?(this.jointValue[0]=r,this.matrixWorldNeedsUpdate=!0,!0):t)}case"prismatic":{let r=e[0];return r==null||r===this.jointValue[0]?t:(this.ignoreLimits||(r=Math.min(this.limit.upper,r),r=Math.max(this.limit.lower,r)),this.position.copy(this.origPosition),F4.copy(this.axis).applyEuler(this.rotation),this.position.addScaledVector(F4,r),this.jointValue[0]!==r?(this.jointValue[0]=r,this.matrixWorldNeedsUpdate=!0,!0):t)}case"floating":return this.jointValue.every((r,n)=>e[n]===r||e[n]===null)?t:(this.jointValue[0]=e[0]!==null?e[0]:this.jointValue[0],this.jointValue[1]=e[1]!==null?e[1]:this.jointValue[1],this.jointValue[2]=e[2]!==null?e[2]:this.jointValue[2],this.jointValue[3]=e[3]!==null?e[3]:this.jointValue[3],this.jointValue[4]=e[4]!==null?e[4]:this.jointValue[4],this.jointValue[5]=e[5]!==null?e[5]:this.jointValue[5],Jl.compose(this.origPosition,this.origQuaternion,gb),mb.setFromEuler(Vwe.set(this.jointValue[3],this.jointValue[4],this.jointValue[5],"XYZ")),_b.set(this.jointValue[0],this.jointValue[1],this.jointValue[2]),fb.compose(_b,mb,gb),Jl.premultiply(fb),this.position.setFromMatrixPosition(Jl),this.rotation.setFromRotationMatrix(Jl),this.matrixWorldNeedsUpdate=!0,!0);case"planar":return this.jointValue.every((r,n)=>e[n]===r||e[n]===null)?t:(this.jointValue[0]=e[0]!==null?e[0]:this.jointValue[0],this.jointValue[1]=e[1]!==null?e[1]:this.jointValue[1],this.jointValue[2]=e[2]!==null?e[2]:this.jointValue[2],Jl.compose(this.origPosition,this.origQuaternion,gb),mb.setFromAxisAngle(this.axis,this.jointValue[2]),_b.set(this.jointValue[0],this.jointValue[1],0),fb.compose(_b,mb,gb),Jl.premultiply(fb),this.position.setFromMatrixPosition(Jl),this.rotation.setFromRotationMatrix(Jl),this.matrixWorldNeedsUpdate=!0,!0)}return t}}class B4 extends xH{constructor(...e){super(...e),this.type="URDFMimicJoint",this.mimicJoint=null,this.offset=0,this.multiplier=1}updateFromMimickedJoint(...e){const t=e.map(r=>r*this.multiplier+this.offset);return super.setJointValue(...t)}copy(e,t){return super.copy(e,t),this.mimicJoint=e.mimicJoint,this.offset=e.offset,this.multiplier=e.multiplier,this}}class Gwe extends bH{constructor(...e){super(...e),this.isURDFRobot=!0,this.urdfNode=null,this.urdfRobotNode=null,this.robotName=null,this.links=null,this.joints=null,this.colliders=null,this.visual=null,this.frames=null}copy(e,t){super.copy(e,t),this.urdfRobotNode=e.urdfRobotNode,this.robotName=e.robotName,this.links={},this.joints={},this.colliders={},this.visual={},this.traverse(r=>{r.isURDFJoint&&r.urdfName in e.joints&&(this.joints[r.urdfName]=r),r.isURDFLink&&r.urdfName in e.links&&(this.links[r.urdfName]=r),r.isURDFCollider&&r.urdfName in e.colliders&&(this.colliders[r.urdfName]=r),r.isURDFVisual&&r.urdfName in e.visual&&(this.visual[r.urdfName]=r)});for(const r in this.joints)this.joints[r].mimicJoints=this.joints[r].mimicJoints.map(n=>this.joints[n.name]);return this.frames={...this.colliders,...this.visual,...this.links,...this.joints},this}getFrame(e){return this.frames[e]}setJointValue(e,...t){const r=this.joints[e];return r?r.setJointValue(...t):!1}setJointValues(e){let t=!1;for(const r in e){const n=e[r];Array.isArray(n)?t=this.setJointValue(r,...n)||t:t=this.setJointValue(r,n)||t}return t}}const LE=new Nr,V4=new pS;function yp(i){return i?i.trim().split(/\s+/g).map(e=>parseFloat(e)):[0,0,0]}function j4(i,e,t=!1){t||i.rotation.set(0,0,0),V4.set(e[0],e[1],e[2],"ZYX"),LE.setFromEuler(V4),LE.multiply(i.quaternion),i.quaternion.copy(LE)}class wH{constructor(e){this.manager=e||cH,this.loadMeshCb=this.defaultMeshLoader.bind(this),this.parseVisual=!0,this.parseCollision=!1,this.packages="",this.workingPath="",this.fetchOptions={}}loadAsync(e){return new Promise((t,r)=>{this.load(e,t,null,r)})}load(e,t,r,n){const s=this.manager,o=yy.extractUrlBase(e),a=this.manager.resolveURL(e);s.itemStart(a),fetch(a,this.fetchOptions).then(l=>{if(l.ok)return r&&r(null),l.text();throw new Error(`URDFLoader: Failed to load url '${a}' with error code ${l.status} : ${l.statusText}.`)}).then(l=>{this.workingPath===""&&(this.workingPath=o);const c=this.parse(l);t(c),s.itemEnd(a)}).catch(l=>{n?n(l):console.error("URDFLoader: Error loading file.",l),s.itemError(a),s.itemEnd(a)})}parse(e){const t=this.packages,r=this.loadMeshCb,n=this.parseVisual,s=this.parseCollision,o=this.workingPath,a=this.manager,l={},c={},u={};function h(y){if(!/^package:\/\//.test(y))return o?o+y:y;const[_,x]=y.replace(/^package:\/\//,"").split(/\/(.+)/);if(typeof t=="string")return t.endsWith(_)?t+"/"+x:t+"/"+_+"/"+x;if(t instanceof Function)return t(_)+"/"+x;if(typeof t=="object")return _ in t?t[_]+"/"+x:(console.error(`URDFLoader : ${_} not found in provided package list.`),null)}function d(y){let _;y instanceof Document?_=[...y.children]:y instanceof Element?_=[y]:_=[...new DOMParser().parseFromString(y,"text/xml").children];const x=_.filter(w=>w.nodeName==="robot").pop();return f(x)}function f(y){const _=[...y.children],x=_.filter(P=>P.nodeName.toLowerCase()==="link"),w=_.filter(P=>P.nodeName.toLowerCase()==="joint"),S=_.filter(P=>P.nodeName.toLowerCase()==="material"),A=new Gwe;A.robotName=y.getAttribute("name"),A.urdfRobotNode=y,S.forEach(P=>{const N=P.getAttribute("name");u[N]=m(P)});const k={},M={};x.forEach(P=>{const N=P.getAttribute("name"),D=y.querySelector(`child[link="${N}"]`)===null;l[N]=v(P,k,M,D?A:null)}),w.forEach(P=>{const N=P.getAttribute("name");c[N]=g(P)}),A.joints=c,A.links=l,A.colliders=M,A.visual=k;const b=Object.values(c);return b.forEach(P=>{P instanceof B4&&c[P.mimicJoint].mimicJoints.push(P)}),b.forEach(P=>{const N=new Set,D=U=>{if(N.has(U))throw new Error("URDFLoader: Detected an infinite loop of mimic joints.");N.add(U),U.mimicJoints.forEach(G=>{D(G)})};D(P)}),A.frames={...M,...k,...l,...c},A}function g(y){const _=[...y.children],x=y.getAttribute("type");let w;const S=_.find(N=>N.nodeName.toLowerCase()==="mimic");S?(w=new B4,w.mimicJoint=S.getAttribute("joint"),w.multiplier=parseFloat(S.getAttribute("multiplier")||1),w.offset=parseFloat(S.getAttribute("offset")||0)):w=new xH,w.urdfNode=y,w.name=y.getAttribute("name"),w.urdfName=w.name,w.jointType=x;let A=null,k=null,M=[0,0,0],b=[0,0,0];_.forEach(N=>{const D=N.nodeName.toLowerCase();D==="origin"?(M=yp(N.getAttribute("xyz")),b=yp(N.getAttribute("rpy"))):D==="child"?k=l[N.getAttribute("link")]:D==="parent"?A=l[N.getAttribute("link")]:D==="limit"&&(w.limit.lower=parseFloat(N.getAttribute("lower")||w.limit.lower),w.limit.upper=parseFloat(N.getAttribute("upper")||w.limit.upper))}),A.add(w),w.add(k),j4(w,b),w.position.set(M[0],M[1],M[2]);const P=_.filter(N=>N.nodeName.toLowerCase()==="axis")[0];if(P){const N=P.getAttribute("xyz").split(/\s+/g).map(D=>parseFloat(D));w.axis=new me(N[0],N[1],N[2]),w.axis.normalize()}return w}function v(y,_,x,w=null){w===null&&(w=new bH);const S=[...y.children];return w.name=y.getAttribute("name"),w.urdfName=w.name,w.urdfNode=y,n&&S.filter(A=>A.nodeName.toLowerCase()==="visual").forEach(A=>{const k=p(A,u);if(w.add(k),A.hasAttribute("name")){const M=A.getAttribute("name");k.name=M,k.urdfName=M,_[M]=k}}),s&&S.filter(A=>A.nodeName.toLowerCase()==="collision").forEach(A=>{const k=p(A);if(w.add(k),A.hasAttribute("name")){const M=A.getAttribute("name");k.name=M,k.urdfName=M,x[M]=k}}),w}function m(y){const _=[...y.children],x=new E_;return x.name=y.getAttribute("name")||"",_.forEach(w=>{const S=w.nodeName.toLowerCase();if(S==="color"){const A=w.getAttribute("rgba").split(/\s/g).map(k=>parseFloat(k));x.color.setRGB(A[0],A[1],A[2]),x.opacity=A[3],x.transparent=A[3]<1,x.depthWrite=!x.transparent}else if(S==="texture"){const A=w.getAttribute("filename");if(A){const k=new EL(a),M=h(A);x.map=k.load(M),x.map.colorSpace=ao}}}),x}function p(y,_={}){const x=y.nodeName.toLowerCase()==="collision",w=[...y.children];let S=null;const A=w.filter(M=>M.nodeName.toLowerCase()==="material")[0];if(A){const M=A.getAttribute("name");M&&M in _?S=_[M]:S=m(A)}else S=new E_;const k=x?new jwe:new Hwe;return k.urdfNode=y,w.forEach(M=>{const b=M.nodeName.toLowerCase();if(b==="geometry"){const P=M.children[0].nodeName.toLowerCase();if(P==="mesh"){const N=M.children[0].getAttribute("filename"),D=h(N);if(D!==null){const U=M.children[0].getAttribute("scale");if(U){const G=yp(U);k.scale.set(G[0],G[1],G[2])}r(D,a,(G,B)=>{B?console.error("URDFLoader: Error loading mesh.",B):G&&(G instanceof Wi&&(G.material=S),G.position.set(0,0,0),G.quaternion.identity(),k.add(G))})}}else if(P==="box"){const N=new Wi;N.geometry=new sv(1,1,1),N.material=S;const D=yp(M.children[0].getAttribute("size"));N.scale.set(D[0],D[1],D[2]),k.add(N)}else if(P==="sphere"){const N=new Wi;N.geometry=new SL(1,30,30),N.material=S;const D=parseFloat(M.children[0].getAttribute("radius"))||0;N.scale.set(D,D,D),k.add(N)}else if(P==="cylinder"){const N=new Wi;N.geometry=new yS(1,1,1,30),N.material=S;const D=parseFloat(M.children[0].getAttribute("radius"))||0,U=parseFloat(M.children[0].getAttribute("length"))||0;N.scale.set(D,U,D),N.rotation.set(Math.PI/2,0,0),k.add(N)}}else if(b==="origin"){const P=yp(M.getAttribute("xyz")),N=yp(M.getAttribute("rpy"));k.position.set(P[0],P[1],P[2]),k.rotation.set(0,0,0),j4(k,N)}}),k}return d(e)}defaultMeshLoader(e,t,r){/\.stl$/i.test(e)?new Fwe(t).load(e,n=>{const s=new Wi(n,new E_);r(s)}):/\.dae$/i.test(e)?new Bwe(t).load(e,n=>r(n.scene)):console.warn(`URDFLoader: Could not load model at ${e}.
No loader available`)}}var Wwe=Object.defineProperty,Jm=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Wwe(e,t,n),n},RE,H4,PE;const md=(PE=class extends ct{constructor(){super(...arguments),kr(this,RE),this.urdfConfigs=RL,this.name=this.urdfConfigs[0].name,this.jointValues={},this.pose=[0,0,0],this._translation=[0,0,0],this._rotation=[0,0,0,0],this.loader=new $L,this.group=new Oi}getUrdfConfig(){return this.urdfConfigs.find(({name:i})=>i===this.name)??this.urdfConfigs[0]}getField(){const i=this.closest("frc-field3d");if(i)return i}static updatePose(i,e){const[t,r,n]=e.translation;i.position.set(t,r,n),i.rotation.setFromQuaternion(xS(e.rotation))}loadRobotModel(){const i=this.getField(),e=this.getUrdfConfig();if(!i)return;const t=i.getFieldGroup();t.remove(this.group),this.object&&this.group.remove(this.object);const r=new TL,n=new wH(r),s=yH(e.src??"");n.packages={"":xm(i.assetPathPrefix??"",s)};const o=new Promise(c=>{if(e.src)n.load(xm(i.assetPathPrefix??"",e.src),u=>{c(u)});else{const u=n.parse(e.content??"");c(u)}}),a=new Oi;this.group=a,t.add(this.group);const l=new Oi;this.object=l,a.add(l),l.rotation.setFromQuaternion(xh(e.rotations)),l.position.set(...e.position),o.then(c=>{this.robot=c,this.updateJoints(),l.add(c),rl(this,RE,H4).call(this)})}updateJoints(){var i;(i=this.robot)==null||i.setJointValues(this.jointValues)}firstUpdated(){this.updateUrdfConfigs(),this.renderObject();const i=this.closest("frc-field3d");i==null||i.addEventListener("urdfConfigsChange",()=>{this.updateUrdfConfigs()})}updated(i){if(i.has("name")&&this.loadRobotModel(),i.has("jointValues")&&this.updateJoints(),i.has("pose")){const[e=0,t=0,r=0]=this.pose;this._translation=[e,t],this._rotation=r}}updateUrdfConfigs(){const i=this.getField(),e=i==null?void 0:i.urdfConfigs;e!=null&&e.length&&e!==this.urdfConfigs&&(this.urdfConfigs=e,this.urdfConfigs.some(t=>t.name===this.name)||(this.name=this.urdfConfigs[0].name))}renderObject(){this.group&&PE.updatePose(this.group,{translation:this._translation.length===2?[...this._translation,0]:this._translation,rotation:typeof this._rotation=="number"?A_([{axis:"z",degrees:this._rotation}]):this._rotation}),requestAnimationFrame(()=>{this.renderObject()})}},RE=new WeakSet,H4=function(){this.dispatchEvent(new CustomEvent("urdfLoad",{detail:{urdf:this.robot},bubbles:!0,composed:!0}))},PE);Jm([Ui()],md.prototype,"urdfConfigs");Jm([W({type:String})],md.prototype,"name");Jm([W({type:Object,attribute:"joint-values"})],md.prototype,"jointValues");Jm([W({type:Array})],md.prototype,"pose");Jm([Ui()],md.prototype,"_translation");Jm([Ui()],md.prototype,"_rotation");let MH=md;customElements.get("frc-field3d-urdf")||customElements.define("frc-field3d-urdf",MH);var qwe=Object.defineProperty,Hs=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&qwe(e,t,n),n},NE,G4,Ru;const us=(Ru=class extends ct{constructor(){super(...arguments),kr(this,NE),this.fieldConfigs=Owe,this.objectConfigs=_H,this.urdfConfigs=RL,this.game=this.fieldConfigs[0].game,this.origin="red",this.backgroundColor="black",this.enableVR=!1,this.fixedCamera=!1,this.ORBIT_FIELD_DEFAULT_TARGET=new me(0,.5,0),this.ORBIT_FIELD_DEFAULT_POSITION=new me(0,6,-12),this.WPILIB_ROTATION=xh([{axis:"x",degrees:-90},{axis:"y",degrees:180}]),this.cameraPoseObject=new Li,this.scene=new bL,this.loader=new $L}getFieldConfig(){return this.fieldConfigs.find(({game:i})=>i===this.game)??this.fieldConfigs[0]}getCamera(){const i=this.getBoundingClientRect();return new pr(50,i.width/i.height,.1,100)}static getOrbitControls(i,e){const t=new mH(i,e);return t.maxDistance=30,t.enabled=!0,t.update(),t}static addLights(i){const e=new vS(16777215,.2);e.position.set(0,10,0),i.add(e);const t=16777215,r=4473924,n=1,s=new uH(t,r,n);i.add(s)}initRenderer(){if(!this.canvas)return;this.renderer=new vL({antialias:!0,canvas:this.canvas});const i=this.getBoundingClientRect();this.renderer.setSize(i.width,i.height),this.vrButton=bS.createButton(this.renderer),this.renderer.xr.enabled=this.enableVR,this.renderer.setAnimationLoop(()=>this.renderField())}initScene(){this.wpilibCoordinateGroup=new Oi,this.scene.add(this.wpilibCoordinateGroup),this.wpilibCoordinateGroup.rotation.setFromQuaternion(this.WPILIB_ROTATION),this.wpilibFieldCoordinateGroup=new Oi,this.wpilibCoordinateGroup.add(this.wpilibFieldCoordinateGroup),this.wpilibFieldCoordinateGroup.add(this.cameraPoseObject)}updateCanvasSize(){var i;const e=this.getBoundingClientRect();(i=this.renderer)==null||i.setSize(e.width,e.height),this.camera.aspect=e.width/e.height,this.camera.updateProjectionMatrix()}static adjustMaterials(i){i.traverse(e=>{const t=e;if(t.isMesh&&t.material instanceof av){const r=t.material;r.metalness=0,r.roughness=1}})}static updatePose(i,e){const[t,r,n]=e.translation;i.position.set(t,r,n),i.rotation.setFromQuaternion(xS(e.rotation))}loadFieldModel(i){this.fieldObject&&this.wpilibCoordinateGroup.remove(this.fieldObject);const e=xm(this.assetPathPrefix??"",i.src);this.loader.load(e,t=>{this.fieldObject=t.scene,this.wpilibCoordinateGroup.add(t.scene),Ru.adjustMaterials(t.scene),t.scene.rotation.setFromQuaternion(xh(i.rotations))})}getFieldGroup(){return this.wpilibFieldCoordinateGroup}createFieldObject(i){return new Uwe(this,i==null?void 0:i.onCreate,i==null?void 0:i.onRemove)}firstUpdated(){this.initScene(),this.initRenderer(),this.camera=this.getCamera(),this.controls=Ru.getOrbitControls(this.camera,this.canvas),this.camera.position.copy(this.ORBIT_FIELD_DEFAULT_POSITION),this.controls.target.copy(this.ORBIT_FIELD_DEFAULT_TARGET),Ru.addLights(this.scene),new ResizeObserver(()=>{this.updateCanvasSize()}).observe(this)}updated(i){if(i.has("fieldConfigs")&&(this.fieldConfigs.some(e=>e.game===this.game)||(this.game=this.fieldConfigs[0].game),this.loadFieldModel(this.getFieldConfig())),i.has("game")&&this.loadFieldModel(this.getFieldConfig()),i.has("backgroundColor")&&(this.scene.background=new At(this.backgroundColor)),i.has("origin")){const e=this.getFieldConfig();if(e){const t=this.origin!=="red";this.wpilibFieldCoordinateGroup.setRotationFromAxisAngle(new me(0,0,1),t?0:Math.PI),this.wpilibFieldCoordinateGroup.position.set(Sr(e.size[0]/2,e.unit,"m")*(t?-1:1),Sr(e.size[1]/2,e.unit,"m")*(t?-1:1),0)}}if(i.has("enableVR")&&(this.enableVR?this.container.appendChild(this.vrButton):this.vrButton.remove(),this.renderer&&(this.renderer.xr.enabled=this.enableVR)),i.has("fixedCamera")&&(this.controls.enabled=!this.fixedCamera),(i.has("cameraPose")||i.has("fixedCamera"))&&this.fixedCamera){const e=this.cameraPose?gH(this.cameraPose):LL();rl(this,NE,G4).call(this,e)}i.has("urdfConfigs")&&this.dispatchEvent(new CustomEvent("urdfConfigsChange",{detail:{urdfConfigs:this.urdfConfigs},bubbles:!0,composed:!0}))}renderField(){var i;(i=this.renderer)==null||i.render(this.scene,this.camera),this.fixedCamera||this.controls.update()}connectedCallback(){super.connectedCallback(),this.initRenderer()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=this.renderer)==null||i.dispose(),this.renderer=void 0}render(){return qe` <div class="container">
      <canvas></canvas>
    </div>`}},NE=new WeakSet,G4=function(i){Ru.updatePose(this.cameraPoseObject,i);const e=new me;this.cameraPoseObject.getWorldPosition(e);const t=new Nr;this.cameraPoseObject.getWorldQuaternion(t),this.camera.position.copy(e),this.camera.quaternion.copy(t.multiply(xh([{axis:"z",degrees:-90},{axis:"y",degrees:-90}]))),this.camera.updateMatrixWorld()},Ru.styles=Ct`
    :host {
      position: relative;
      display: block;
      width: 700px;
      height: 400px;
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
  `,Ru);Hs([W({type:Array})],us.prototype,"fieldConfigs");Hs([W({type:Array})],us.prototype,"objectConfigs");Hs([W({type:Array})],us.prototype,"urdfConfigs");Hs([W({type:String})],us.prototype,"game");Hs([W({type:String})],us.prototype,"origin");Hs([W({type:String,attribute:"background-color"})],us.prototype,"backgroundColor");Hs([W({type:Boolean,attribute:"enable-vr"})],us.prototype,"enableVR");Hs([W({type:String})],us.prototype,"assetPathPrefix");Hs([W({type:Array,attribute:"camera-pose"})],us.prototype,"cameraPose");Hs([W({type:Boolean,attribute:"fixed-camera"})],us.prototype,"fixedCamera");Hs([ri("canvas")],us.prototype,"canvas");Hs([ri(".container")],us.prototype,"container");let SH=us;customElements.get("frc-field3d")||customElements.define("frc-field3d",SH);var Xwe=Object.defineProperty,lu=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Xwe(e,t,n),n},IE,W4,Qg;const Pl=(Qg=class extends ct{constructor(){super(...arguments),kr(this,IE),this.urdfConfigs=RL,this.name=this.urdfConfigs[0].name,this.backgroundColor="black",this.enableVR=!1,this.angles={},this.scene=new bL,this.group=new Oi}getCamera(){const i=this.getBoundingClientRect(),e=new pr(50,i.width/i.height,.1,100);return e.position.set(1,1,1),e.lookAt(0,0,.5),e.up.set(0,0,1),e}static getOrbitControls(i,e){const t=new mH(i,e);return t.maxDistance=30,t.enabled=!0,t.update(),t}static addLights(i){const e=new vS(16777215,.2);e.position.set(0,10,0),i.add(e);const t=16777215,r=4473924,n=1,s=new uH(t,r,n);i.add(s)}initRenderer(){if(!this.canvas)return;this.renderer=new vL({antialias:!0,canvas:this.canvas});const i=this.getBoundingClientRect();this.renderer.setSize(i.width,i.height),this.vrButton=bS.createButton(this.renderer),this.renderer.xr.enabled=this.enableVR,this.renderer.setAnimationLoop(()=>this.renderField())}updateCanvasSize(){var i;const e=this.getBoundingClientRect();(i=this.renderer)==null||i.setSize(e.width,e.height),this.camera.aspect=e.width/e.height,this.camera.updateProjectionMatrix()}firstUpdated(){this.initRenderer(),this.camera=this.getCamera(),this.controls=Qg.getOrbitControls(this.camera,this.canvas),Qg.addLights(this.scene);const i=new fS(5,5,20,20),e=new go({color:65280,side:Ss,wireframe:!0}),t=new Wi(i,e);this.scene.add(t),new ResizeObserver(()=>{this.updateCanvasSize()}).observe(this)}getUrdfConfig(){return this.urdfConfigs.find(({name:i})=>i===this.name)??this.urdfConfigs[0]}updateAngles(){var i;(i=this.robot)==null||i.setAngles(this.angles)}loadRobotModel(){const i=this.getUrdfConfig(),e=new TL,t=new wH(e),r=yH(i.src??"");t.packages={"":xm(this.assetPathPrefix??"",r)};const n=new Promise(a=>{if(i.src)t.load(xm(this.assetPathPrefix??"",i.src),l=>{a(l)});else{const l=t.parse(i.content??"");a(l)}}),s=new Oi;this.group=s,this.scene.add(this.group);const o=new Oi;this.object=o,s.add(o),o.rotation.setFromQuaternion(xh(i.rotations)),o.position.set(...i.position),n.then(a=>{this.robot=a,this.updateAngles(),o.add(a),rl(this,IE,W4).call(this)})}updated(i){(i.has("urdfConfigs")||i.has("name"))&&(this.urdfConfigs.some(e=>e.name===this.name)||(this.name=this.urdfConfigs[0].name),this.loadRobotModel()),i.has("backgroundColor")&&(this.scene.background=new At(this.backgroundColor)),i.has("enableVR")&&(this.enableVR?this.container.appendChild(this.vrButton):this.vrButton.remove(),this.renderer&&(this.renderer.xr.enabled=this.enableVR))}renderField(){var i;(i=this.renderer)==null||i.render(this.scene,this.camera),this.controls.update()}connectedCallback(){super.connectedCallback(),this.initRenderer()}disconnectedCallback(){var i;super.disconnectedCallback(),(i=this.renderer)==null||i.dispose(),this.renderer=void 0}render(){return qe` <div class="container">
      <canvas></canvas>
    </div>`}},IE=new WeakSet,W4=function(){this.dispatchEvent(new CustomEvent("urdfLoad",{detail:{urdf:this.robot}}))},Qg.styles=Ct`
    :host {
      position: relative;
      display: block;
      width: 700px;
      height: 400px;
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
  `,Qg);lu([W({type:Array})],Pl.prototype,"urdfConfigs");lu([W({type:String})],Pl.prototype,"name");lu([W({type:String,attribute:"background-color"})],Pl.prototype,"backgroundColor");lu([W({type:Boolean,attribute:"enable-vr"})],Pl.prototype,"enableVR");lu([W({type:String})],Pl.prototype,"assetPathPrefix");lu([W({type:Object})],Pl.prototype,"angles");lu([ri("canvas")],Pl.prototype,"canvas");lu([ri(".container")],Pl.prototype,"container");let TH=Pl;customElements.get("frc-urdf")||customElements.define("frc-urdf",TH);var Ywe=Object.defineProperty,EH=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Ywe(e,t,n),n},Tx,Of,uh,Uf,hh,wk,AH;class MS extends ct{constructor(){super(...arguments),kr(this,wk),kr(this,Tx),kr(this,Of),kr(this,uh),kr(this,Uf),kr(this,hh),this.pose=[0,0,0],this._pose3d=LL()}getField(){return this.closest("frc-field3d")}loadRobotModel(){ci(this,Tx).create()}firstUpdated(){const e=new sv(.2,.2,.2),t=new Nxe(e),r=new vm({color:16044581,linewidth:4}),n=new ML(t,r);rn(this,Of,n),rn(this,uh,new AE(new me(1,0,0).normalize(),new me(0,0,0),.3,16711680,.1,.05)),rn(this,Uf,new AE(new me(1,0,0).normalize(),new me(0,0,0),.3,16711680,.1,.05)),rn(this,hh,new AE(new me(1,0,0).normalize(),new me(0,0,0),.3,16711680,.1,.05)),rn(this,Tx,this.getField().createFieldObject({onCreate:s=>{const o=s.getGroup();o.add(ci(this,Of)),o.add(ci(this,uh)),o.add(ci(this,Uf)),o.add(ci(this,hh))}}))}updated(e){e.has("pose")&&(this._pose3d=gH(this.pose),rl(this,wk,AH).call(this))}}Tx=new WeakMap,Of=new WeakMap,uh=new WeakMap,Uf=new WeakMap,hh=new WeakMap,wk=new WeakSet,AH=function(){const i=xS(this._pose3d.rotation),[e,t,r]=this._pose3d.translation;ci(this,Of).position.set(e,t,r),ci(this,Of).rotation.setFromQuaternion(i),ci(this,uh).rotation.setFromQuaternion(i),ci(this,uh).rotateZ(-Math.PI/2),ci(this,uh).position.set(e,t,r),ci(this,Uf).rotation.setFromQuaternion(i),ci(this,Uf).position.set(e,t,r),ci(this,hh).setRotationFromQuaternion(i),ci(this,hh).rotateX(Math.PI/2),ci(this,hh).position.set(e,t,r)};EH([W({type:Array})],MS.prototype,"pose");EH([Ui()],MS.prototype,"_pose3d");customElements.get("frc-field3d-pose-visualizer")||customElements.define("frc-field3d-pose-visualizer",MS);var Kwe=Object.defineProperty,Qm=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Kwe(e,t,n),n},dh,zf,Ex,ph,Mk,kH,q4,CH;let gd=class extends ct{constructor(){super(...arguments),kr(this,ph),kr(this,dh),kr(this,zf),kr(this,Ex),this.name="",this.pose=[0,0,0],this.sourceProvider="",this.sourceKey="",rn(this,dh,[]),rn(this,zf,!1)}getJointValues(){const e=rl(this,ph,Mk).call(this);if(!(e!=null&&e.hasChildren())){const o={};return ci(this,dh).forEach(a=>{o[a]=0}),o}const t=[this.sourceKey,"joints"].join("/"),r=this.store.getSource(this.sourceProvider,t),n=(r==null?void 0:r.getJson(!1))??{},s={};return ci(this,dh).forEach(o=>{s[o]=n[o]??0}),s}createRenderRoot(){return this}updated(e){(e.has("sourceProvider")||e.has("sourceKey")||e.has("store"))&&(rn(this,zf,!1),rl(this,ph,kH).call(this))}render(){return qe`
      <frc-field3d-urdf
        @urdfLoad=${rl(this,ph,CH)}
        .jointValues=${this.getJointValues()}
        .pose=${this.pose}
        .name=${this.name}
      ></frc-field3d-urdf>
    `}};dh=new WeakMap,zf=new WeakMap,Ex=new WeakMap,ph=new WeakSet,Mk=function(){const{provider:i,store:e,sourceProvider:t,sourceKey:r}=this;if(!(!i||!e||!t||!r))return e.getSource(t,r)},kH=function(){var i,e;(i=ci(this,Ex))==null||i.call(this),!(!this.sourceProvider||!this.sourceKey)&&rn(this,Ex,(e=this.store)==null?void 0:e.subscribe(this.sourceProvider,this.sourceKey,()=>{rl(this,ph,q4).call(this),this.requestUpdate()},!0))},q4=function(){ci(this,zf)||!rl(this,ph,Mk).call(this)||(ci(this,dh).forEach(i=>{var e;const t=[this.sourceKey,"joints",i].join("/"),r=this.store.getSource(this.sourceProvider,t);r!=null&&r.hasValue()||(e=this.provider)==null||e.userUpdate(t,0)}),rn(this,zf,!0))},CH=function(i){const e=i.detail.urdf;rn(this,dh,Object.keys(e.joints).sort()),Object.values(e.joints).forEach(t=>{t.ignoreLimits=!0}),this.requestUpdate()};Qm([W({type:String})],gd.prototype,"name");Qm([W({type:Array})],gd.prototype,"pose");Qm([W({type:Object,attribute:!1})],gd.prototype,"provider");Qm([W({type:Object,attribute:!1})],gd.prototype,"store");Qm([W({type:String,attribute:"source-provider"})],gd.prototype,"sourceProvider");Qm([W({type:String,attribute:"source-key"})],gd.prototype,"sourceKey");customElements.get("frc-field3d-urdf-wrapper")||customElements.define("frc-field3d-urdf-wrapper",gd);xt({tagName:"frc-field3d",elementClass:SH,react:yt});xt({tagName:"frc-field3d-object",elementClass:vH,react:yt});xt({tagName:"frc-field3d-urdf",elementClass:MH,react:yt,events:{onurdfload:"urdfLoad"}});xt({tagName:"frc-urdf",elementClass:TH,react:yt,events:{onurdfload:"urdfLoad"}});xt({tagName:"frc-field3d-pose-visualizer",elementClass:MS,react:yt});var $H=i=>{throw TypeError(i)},Zwe=(i,e,t)=>e.has(i)||$H("Cannot "+t),LH=(i,e,t)=>e.has(i)?$H("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),RH=(i,e,t)=>(Zwe(i,e,"access private method"),t),Jwe=Object.defineProperty,eg=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Jwe(e,t,n),n},Sk,PH;const NH=class extends ct{constructor(){super(...arguments),LH(this,Sk),this.disabled=!1,this.label="",this.options=[],this.selected=[],this.direction="vertical"}render(){return qe`
      <vaadin-checkbox-group
        .disabled=${this.disabled}
        .label=${this.label}
        theme=${this.direction}
        .value=${this.selected}
      >
        ${this.options.map(e=>qe`
            <vaadin-checkbox value=${e} @change=${()=>RH(this,Sk,PH).call(this)}
              >${e}</vaadin-checkbox
            >
          `)}
      </vaadin-checkbox-group>
    `}};Sk=new WeakSet,PH=function(){this.selected=this.element.value;const i=new CustomEvent("change",{bubbles:!0,composed:!0,detail:{selected:this.selected}});this.dispatchEvent(i)},NH.styles=Ct`
    :host {
      display: inline-block;
    }
  `;let cu=NH;eg([W({type:Boolean})],cu.prototype,"disabled");eg([W({type:String})],cu.prototype,"label");eg([W({type:Array})],cu.prototype,"options");eg([W({type:Array})],cu.prototype,"selected");eg([W({type:String})],cu.prototype,"direction");eg([ri("vaadin-checkbox-group")],cu.prototype,"element");customElements.get("frc-checkbox-group")||customElements.define("frc-checkbox-group",cu);var Qwe=Object.defineProperty,hv=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&Qwe(e,t,n),n},Tk,IH;const DH=class extends ct{constructor(){super(...arguments),LH(this,Tk),this.disabled=!1,this.label="",this.options=[],this.selected="",this.direction="vertical"}render(){return qe`
      <vaadin-radio-group
        @value-changed=${e=>RH(this,Tk,IH).call(this,e)}
        .disabled=${this.disabled}
        .label=${this.label}
        theme=${this.direction}
        .value=${this.selected}
      >
        ${this.options.map(e=>qe`
            <vaadin-radio-button value=${e}>${e}</vaadin-radio-button>
          `)}
      </vaadin-radio-group>
    `}};Tk=new WeakSet,IH=function(i){this.selected=i.detail.value;const e=new CustomEvent("change",{bubbles:!0,composed:!0,detail:{selected:this.selected}});this.dispatchEvent(e)},DH.styles=Ct`
    :host {
      display: inline-block;
    }
  `;let tg=DH;hv([W({type:Boolean})],tg.prototype,"disabled");hv([W({type:String})],tg.prototype,"label");hv([W({type:Array})],tg.prototype,"options");hv([W({type:String})],tg.prototype,"selected");hv([W({type:String})],tg.prototype,"direction");customElements.get("frc-radio-group")||customElements.define("frc-radio-group",tg);xt({tagName:"frc-checkbox-group",elementClass:cu,react:yt,events:{onchange:"change"}});var Ek={exports:{}},eMe=Ek.exports,X4;function tMe(){return X4||(X4=1,function(i){(function(e,t){var r=t(e);i.exports?i.exports=r:e.Gauge=r})(typeof window>"u"?eMe:window,function(e,t){var r=e.document,n=Array.prototype.slice,s=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||function(l){return setTimeout(l,1e3/60)};function o(l){var c=l.duration,u=1,h=60*c,d=l.start||0,f=l.end,g=f-d,v=l.step,m=l.easing||function(y){return(y/=.5)<1?.5*Math.pow(y,3):.5*(Math.pow(y-2,3)+2)};function p(){var y=u/h,_=g*m(y)+d;v(_,u),u+=1,y<1&&s(p)}s(p)}var a=function(){var l="http://www.w3.org/2000/svg",c={centerX:50,centerY:50},u={dialRadius:40,dialStartAngle:135,dialEndAngle:45,value:0,max:100,min:0,valueDialClass:"value",valueClass:"value-text",dialClass:"dial",gaugeClass:"gauge",showValue:!0,gaugeColor:null,label:function(y){return Math.round(y)}};function h(){var y=arguments[0],_=n.call(arguments,1);return _.forEach(function(x){for(var w in x)x.hasOwnProperty(w)&&(y[w]=x[w])}),y}function d(y,_,x){var w=r.createElementNS(l,y);for(var S in _)w.setAttribute(S,_[S]);return x&&x.forEach(function(A){w.appendChild(A)}),w}function f(y,_){return y*_/100}function g(y,_,x){var w=Number(y);return w>x?x:w<_?_:w}function v(y,_,x){var w=x-_,S=y-_;return 100*S/w}function m(y,_,x,w){var S=w*Math.PI/180;return{x:Math.round((y+x*Math.cos(S))*1e3)/1e3,y:Math.round((_+x*Math.sin(S))*1e3)/1e3}}function p(y,_,x){var w=c.centerX,S=c.centerY;return{end:m(w,S,y,x),start:m(w,S,y,_)}}return function(y,_){_=h({},u,_);var x=y,w=_.max,S=_.min,A=g(_.value,S,w),k=_.dialRadius,M=_.showValue,b=_.dialStartAngle,P=_.dialEndAngle,N=_.valueDialClass,D=_.valueClass;_.valueLabelClass;var U=_.dialClass,G=_.gaugeClass,B=_.color,Q,j,X=_.label,ne=_.viewBox,ge;if(b<P){console.log("WARN! startAngle < endAngle, Swapping");var pe=b;b=P,P=pe}function V(z,_e,ee,te){var be=p(z,_e,ee),oe=be.start,Te=be.end,Ae=typeof te>"u"?1:te;return["M",oe.x,oe.y,"A",z,z,0,Ae,1,Te.x,Te.y].join(" ")}function Y(z){Q=d("text",{x:50,y:50,fill:"#999",class:D,"font-size":"100%","font-family":"sans-serif","font-weight":"normal","text-anchor":"middle","alignment-baseline":"middle","dominant-baseline":"central"}),j=d("path",{class:N,fill:"none",stroke:"#666","stroke-width":2.5,d:V(k,b,b)});var _e=f(100,360-Math.abs(b-P)),ee=_e<=180?0:1,te=d("svg",{viewBox:ne||"0 0 100 100",class:G},[d("path",{class:U,fill:"none",stroke:"#eee","stroke-width":2,d:V(k,b,P,ee)}),d("g",{class:"text-container"},[Q]),j]);z.appendChild(te)}function ae(z,_e){var ee=v(z,S,w),te=f(ee,360-Math.abs(b-P)),be=te<=180?0:1;M&&(Q.textContent=X.call(_,z)),j.setAttribute("d",V(k,b,te+b,be))}function J(z,_e){var ee=B.call(_,z),te=_e*1e3,be="stroke "+te+"ms ease";j.style.stroke=ee,j.style["-webkit-transition"]=be,j.style["-moz-transition"]=be,j.style.transition=be}return ge={setMaxValue:function(z){w=z,ae(A)},setValue:function(z){A=g(z,S,w),B&&J(A,0),ae(A)},setValueAnimated:function(z,_e){var ee=A;A=g(z,S,w),ee!==A&&(B&&J(A,_e),o({start:ee||0,end:A,duration:_e||1,step:function(te,be){ae(te)}}))},getValue:function(){return A}},Y(x),ge.setValue(A),ge}}();return a})}(Ek)),Ek.exports}var Y4,K4;function iMe(){return K4||(K4=1,Y4=tMe()),Y4}var rMe=iMe();const nMe=JV(rMe);var sMe=Object.defineProperty,SS=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&sMe(e,t,n),n};const OH=class extends ct{constructor(){super(...arguments),this.min=0,this.max=100,this.value=0}setSize(){const e=this.getBoundingClientRect(),t=e.width,r=e.height,n=Math.min(t,r);this.gaugeElement.style.width=`${n}px`}gaugeInit(){this.gaugeElement.innerHTML="",this.gauge=nMe(this.gaugeElement,{min:Math.min(this.min,this.max),max:Math.max(this.min,this.max)}),this.setSize()}firstUpdated(){this.gaugeInit(),new ResizeObserver(()=>this.setSize()).observe(this)}updated(e){var t;(e.has("min")||e.has("max"))&&this.gaugeInit(),(t=this.gauge)==null||t.setValue(this.value)}render(){return qe`
      <div class="gauge-container-container">
        <div id="gauge" class="gauge-container"></div>
      </div>
    `}};OH.styles=Ct`
    :host {
      display: inline-block;
      width: 200px;
      height: 200px;
    }

    .gauge-container-container {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .gauge-container {
      display: block;
    }

    .gauge-container > .gauge > .dial {
      stroke: #ddd;
      stroke-width: 3;
      fill: rgba(0, 0, 0, 0);
      stroke: var(--frc-gauge-color, rgb(221, 221, 221));
    }
    .gauge-container > .gauge > .value {
      stroke: var(--frc-gauge-fill-color, rgb(47, 180, 200));
      stroke-width: 3;
      fill: rgba(0, 0, 0, 0);
    }
    .gauge-container > .gauge .value-text {
      fill: var(--frc-gauge-text-color, rgb(100, 100, 100));
      font-family: sans-serif;
      font-size: 1em;
    }
  `;let ig=OH;SS([W({type:Number})],ig.prototype,"min");SS([W({type:Number})],ig.prototype,"max");SS([W({type:Number})],ig.prototype,"value");SS([ri("#gauge")],ig.prototype,"gaugeElement");customElements.get("frc-gauge")||customElements.define("frc-gauge",ig);xt({tagName:"frc-gauge",elementClass:ig,react:yt});function oMe(i,e,t){i=+i,e=+e,t=(n=arguments.length)<2?(e=i,i=0,1):n<3?1:+t;for(var r=-1,n=Math.max(0,Math.ceil((e-i)/t))|0,s=new Array(n);++r<n;)s[r]=i+r*t;return s}var aMe=Object.defineProperty,Gs=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&aMe(e,t,n),n};function lMe(i){return i*Math.PI/180}function Z4(i){return i*180/Math.PI}function cMe(i,e,t){return Math.min(t,Math.max(i,e))}function Ql(i,e=!1){const t=lMe(-(i-90));return[e?-Math.cos(t):Math.cos(t),Math.sin(t)]}const UH=class extends ct{constructor(){super(...arguments),this.value=0,this.hideLabel=!1,this.precision=2,this.counterClockwise=!1,this.fromRadians=!1}setLabels(){const e=this.getGyroRadius();Vr(this._labels).selectAll("text").data([0,45,90,135,180,-135,-90,-45]).join(t=>t.append("text").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-size",15).attr("fill","var(--frc-gyro-color, #000)").text(r=>`${r}°`)).attr("x",t=>Ql(t,this.counterClockwise)[0]*(e+30)).attr("y",t=>-Ql(t,this.counterClockwise)[1]*(e+30))}setDialAngle(){const e=this.getGyroRadius(),t=this.fromRadians?Z4(this.value):this.value;Vr(this._dial).attr("x2",Ql(t,this.counterClockwise)[0]*(e-7)).attr("y2",-Ql(t,this.counterClockwise)[1]*(e-7))}addTicks(e,t,r,n){const s=this.getGyroRadius();Vr(e).selectAll("line").data(oMe(0,360,r)).join(o=>o.append("line").attr("stroke","var(--frc-gyro-color, #000)").attr("stroke-width",n)).attr("x1",o=>Ql(o)[0]*s).attr("y1",o=>-Ql(o)[1]*s).attr("x2",o=>Ql(o)[0]*(s+t)).attr("y2",o=>-Ql(o)[1]*(s+t))}firstUpdated(){new ResizeObserver(()=>{this.resized()}).observe(this),this.resized()}resized(){const e=this.getSize();Vr(this._svg).attr("width",e).attr("height",e),Vr(this._gyro).attr("transform",`translate(${e/2},${e/2})`);const t=this.getGyroRadius();Vr(this._gyroEdge).attr("r",t),this.addTicks(this._minorTicks,5,5,1),this.addTicks(this._majorTicks,10,45,2),this.setLabels(),this.setDialAngle()}getSize(){const{width:e}=this.getBoundingClientRect();return e}getGyroRadius(){return this.getSize()/2-53}updated(e){(e.has("value")||e.has("fromRadians")||e.has("counterClockwise"))&&this.setDialAngle(),e.has("counterClockwise")&&this.setLabels()}render(){const e=`${(this.fromRadians?Z4(this.value):this.value).toFixed(cMe(this.precision,0,100))}`;return qe`
      <div>
        ${bi`
          <svg>
            <g class="gyro">
              <circle class="gyro-edge" stroke-width="2" stroke="var(--frc-gyro-color, #000)" style="fill: none"></circle>
              <g class="minor-ticks"></g>
              <g class="major-ticks"></g>
              <g class="labels"></g>
              <circle class="dial-circle" r="9"></circle>
              <line class="dial" x1="0" x2="0"></line>
            </g>
          </svg>
        `} ${this.hideLabel?null:qe`<label>${e}&deg</label> `}
      </div>
    `}};UH.styles=Ct`
    :host {
      font-family: sans-serif;
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      width: 300px;
      height: auto;
    }

    svg {
      width: 100%;
    }

    label {
      color: var(--frc-gyro-color, #000);
      text-align: center;
      display: block;
      font-size: 16px;
    }

    .dial-circle {
      fill: var(--frc-gyro-dial-color, blue);
    }

    .dial {
      stroke: var(--frc-gyro-dial-color, blue);
      stroke-width: 3;
    }
  `;let kn=UH;Gs([W({type:Number})],kn.prototype,"value");Gs([W({type:Boolean,attribute:"hide-label"})],kn.prototype,"hideLabel");Gs([W({type:Number})],kn.prototype,"precision");Gs([W({type:Boolean,attribute:"counter-clockwise"})],kn.prototype,"counterClockwise");Gs([W({type:Boolean,attribute:"from-radians"})],kn.prototype,"fromRadians");Gs([ri("svg")],kn.prototype,"_svg");Gs([ri(".dial")],kn.prototype,"_dial");Gs([ri(".gyro")],kn.prototype,"_gyro");Gs([ri(".gyro-edge")],kn.prototype,"_gyroEdge");Gs([ri(".minor-ticks")],kn.prototype,"_minorTicks");Gs([ri(".major-ticks")],kn.prototype,"_majorTicks");Gs([ri(".labels")],kn.prototype,"_labels");customElements.get("frc-gyro")||customElements.define("frc-gyro",kn);xt({tagName:"frc-gyro",elementClass:kn,react:yt});const uMe=xt({tagName:"frc-icon",elementClass:Cm,react:yt});/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const zH="important",hMe=" !"+zH,df=sL(class extends oL{constructor(i){var e;if(super(i),i.type!==tj.ATTRIBUTE||i.name!=="style"||((e=i.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(i){return Object.keys(i).reduce((e,t)=>{const r=i[t];return r==null?e:e+`${t=t.includes("-")?t:t.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(i,[e]){const{style:t}=i.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?t.removeProperty(r):t[r]=null);for(const r in e){const n=e[r];if(n!=null){this.ft.add(r);const s=typeof n=="string"&&n.endsWith(hMe);r.includes("-")||s?t.setProperty(r,s?n.slice(0,-11):n,s?zH:""):t[r]=n}}return kh}});function Ax(i,e){return i==null||e==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function dMe(i,e){return i==null||e==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function PL(i){let e,t,r;i.length!==2?(e=Ax,t=(a,l)=>Ax(i(a),l),r=(a,l)=>i(a)-l):(e=i===Ax||i===dMe?i:pMe,t=i,r=i);function n(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;t(a[h],l)<0?c=h+1:u=h}while(c<u)}return c}function s(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;t(a[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function o(a,l,c=0,u=a.length){const h=n(a,l,c,u-1);return h>c&&r(a[h-1],l)>-r(a[h],l)?h-1:h}return{left:n,center:o,right:s}}function pMe(){return 0}function fMe(i){return i===null?NaN:+i}const mMe=PL(Ax),gMe=mMe.right;PL(fMe).center;class J4 extends Map{constructor(e,t=vMe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,n]of e)this.set(r,n)}get(e){return super.get(Q4(this,e))}has(e){return super.has(Q4(this,e))}set(e,t){return super.set(_Me(this,e),t)}delete(e){return super.delete(yMe(this,e))}}function Q4({_intern:i,_key:e},t){const r=e(t);return i.has(r)?i.get(r):t}function _Me({_intern:i,_key:e},t){const r=e(t);return i.has(r)?i.get(r):(i.set(r,t),t)}function yMe({_intern:i,_key:e},t){const r=e(t);return i.has(r)&&(t=i.get(r),i.delete(r)),t}function vMe(i){return i!==null&&typeof i=="object"?i.valueOf():i}const bMe=Math.sqrt(50),xMe=Math.sqrt(10),wMe=Math.sqrt(2);function Ww(i,e,t){const r=(e-i)/Math.max(0,t),n=Math.floor(Math.log10(r)),s=r/Math.pow(10,n),o=s>=bMe?10:s>=xMe?5:s>=wMe?2:1;let a,l,c;return n<0?(c=Math.pow(10,-n)/o,a=Math.round(i*c),l=Math.round(e*c),a/c<i&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,n)*o,a=Math.round(i/c),l=Math.round(e/c),a*c<i&&++a,l*c>e&&--l),l<a&&.5<=t&&t<2?Ww(i,e,t*2):[a,l,c]}function MMe(i,e,t){if(e=+e,i=+i,t=+t,!(t>0))return[];if(i===e)return[i];const r=e<i,[n,s,o]=r?Ww(e,i,t):Ww(i,e,t);if(!(s>=n))return[];const a=s-n+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(s-c)/-o;else for(let c=0;c<a;++c)l[c]=(s-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(n+c)/-o;else for(let c=0;c<a;++c)l[c]=(n+c)*o;return l}function Ak(i,e,t){return e=+e,i=+i,t=+t,Ww(i,e,t)[2]}function kk(i,e,t){e=+e,i=+i,t=+t;const r=e<i,n=r?Ak(e,i,t):Ak(i,e,t);return(r?-1:1)*(n<0?1/-n:n)}function SMe(i){return i}var DE=1,kx=2,Ck=3,G0=4,eU=1e-6;function TMe(i){return"translate("+i+",0)"}function EMe(i){return"translate(0,"+i+")"}function AMe(i){return e=>+i(e)}function kMe(i,e){return e=Math.max(0,i.bandwidth()-e*2)/2,i.round()&&(e=Math.round(e)),t=>+i(t)+e}function CMe(){return!this.__axis}function NL(i,e){var t=[],r=null,n=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=i===DE||i===G0?-1:1,u=i===G0||i===kx?"x":"y",h=i===DE||i===Ck?TMe:EMe;function d(f){var g=r??(e.ticks?e.ticks.apply(e,t):e.domain()),v=n??(e.tickFormat?e.tickFormat.apply(e,t):SMe),m=Math.max(s,0)+a,p=e.range(),y=+p[0]+l,_=+p[p.length-1]+l,x=(e.bandwidth?kMe:AMe)(e.copy(),l),w=f.selection?f.selection():f,S=w.selectAll(".domain").data([null]),A=w.selectAll(".tick").data(g,e).order(),k=A.exit(),M=A.enter().append("g").attr("class","tick"),b=A.select("line"),P=A.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),A=A.merge(M),b=b.merge(M.append("line").attr("stroke","currentColor").attr(u+"2",c*s)),P=P.merge(M.append("text").attr("fill","currentColor").attr(u,c*m).attr("dy",i===DE?"0em":i===Ck?"0.71em":"0.32em")),f!==w&&(S=S.transition(f),A=A.transition(f),b=b.transition(f),P=P.transition(f),k=k.transition(f).attr("opacity",eU).attr("transform",function(N){return isFinite(N=x(N))?h(N+l):this.getAttribute("transform")}),M.attr("opacity",eU).attr("transform",function(N){var D=this.parentNode.__axis;return h((D&&isFinite(D=D(N))?D:x(N))+l)})),k.remove(),S.attr("d",i===G0||i===kx?o?"M"+c*o+","+y+"H"+l+"V"+_+"H"+c*o:"M"+l+","+y+"V"+_:o?"M"+y+","+c*o+"V"+l+"H"+_+"V"+c*o:"M"+y+","+l+"H"+_),A.attr("opacity",1).attr("transform",function(N){return h(x(N)+l)}),b.attr(u+"2",c*s),P.attr(u,c*m).text(v),w.filter(CMe).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",i===kx?"start":i===G0?"end":"middle"),w.each(function(){this.__axis=x})}return d.scale=function(f){return arguments.length?(e=f,d):e},d.ticks=function(){return t=Array.from(arguments),d},d.tickArguments=function(f){return arguments.length?(t=f==null?[]:Array.from(f),d):t.slice()},d.tickValues=function(f){return arguments.length?(r=f==null?null:Array.from(f),d):r&&r.slice()},d.tickFormat=function(f){return arguments.length?(n=f,d):n},d.tickSize=function(f){return arguments.length?(s=o=+f,d):s},d.tickSizeInner=function(f){return arguments.length?(s=+f,d):s},d.tickSizeOuter=function(f){return arguments.length?(o=+f,d):o},d.tickPadding=function(f){return arguments.length?(a=+f,d):a},d.offset=function(f){return arguments.length?(l=+f,d):l},d}function $Me(i){return NL(kx,i)}function FH(i){return NL(Ck,i)}function tU(i){return NL(G0,i)}function LMe(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,r=e.slice(),n;return function(s){for(n=0;n<t;++n)r[n]=i[n]*(1-s)+e[n]*s;return r}}function RMe(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function PMe(i,e){var t=e?e.length:0,r=i?Math.min(t,i.length):0,n=new Array(r),s=new Array(t),o;for(o=0;o<r;++o)n[o]=IL(i[o],e[o]);for(;o<t;++o)s[o]=e[o];return function(a){for(o=0;o<r;++o)s[o]=n[o](a);return s}}function NMe(i,e){var t=new Date;return i=+i,e=+e,function(r){return t.setTime(i*(1-r)+e*r),t}}function IMe(i,e){var t={},r={},n;(i===null||typeof i!="object")&&(i={}),(e===null||typeof e!="object")&&(e={});for(n in e)n in i?t[n]=IL(i[n],e[n]):r[n]=e[n];return function(s){for(n in t)r[n]=t[n](s);return r}}function IL(i,e){var t=typeof e,r;return e==null||t==="boolean"?VC(e):(t==="number"?co:t==="string"?(r=Ch(e))?(e=r,uw):aF:e instanceof Ch?uw:e instanceof Date?NMe:RMe(e)?LMe:Array.isArray(e)?PMe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?IMe:co)(i,e)}function DMe(i,e){return i=+i,e=+e,function(t){return Math.round(i*(1-t)+e*t)}}function OMe(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function qw(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,r=i.slice(0,t);return[r.length>1?r[0]+r.slice(2):r,+i.slice(t+1)]}function wm(i){return i=qw(Math.abs(i)),i?i[1]:NaN}function UMe(i,e){return function(t,r){for(var n=t.length,s=[],o=0,a=i[0],l=0;n>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(t.substring(n-=a,n+a)),!((l+=a+1)>r));)a=i[o=(o+1)%i.length];return s.reverse().join(e)}}function zMe(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var FMe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xw(i){if(!(e=FMe.exec(i)))throw new Error("invalid format: "+i);var e;return new DL({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Xw.prototype=DL.prototype;function DL(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}DL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function BMe(i){e:for(var e=i.length,t=1,r=-1,n;t<e;++t)switch(i[t]){case".":r=n=t;break;case"0":r===0&&(r=t),n=t;break;default:if(!+i[t])break e;r>0&&(r=0);break}return r>0?i.slice(0,r)+i.slice(n+1):i}var BH;function VMe(i,e){var t=qw(i,e);if(!t)return i+"";var r=t[0],n=t[1],s=n-(BH=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+qw(i,Math.max(0,e+s-1))[0]}function iU(i,e){var t=qw(i,e);if(!t)return i+"";var r=t[0],n=t[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}const rU={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:OMe,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>iU(i*100,e),r:iU,s:VMe,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function nU(i){return i}var sU=Array.prototype.map,oU=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function jMe(i){var e=i.grouping===void 0||i.thousands===void 0?nU:UMe(sU.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",r=i.currency===void 0?"":i.currency[1]+"",n=i.decimal===void 0?".":i.decimal+"",s=i.numerals===void 0?nU:zMe(sU.call(i.numerals,String)),o=i.percent===void 0?"%":i.percent+"",a=i.minus===void 0?"−":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function c(h){h=Xw(h);var d=h.fill,f=h.align,g=h.sign,v=h.symbol,m=h.zero,p=h.width,y=h.comma,_=h.precision,x=h.trim,w=h.type;w==="n"?(y=!0,w="g"):rU[w]||(_===void 0&&(_=12),x=!0,w="g"),(m||d==="0"&&f==="=")&&(m=!0,d="0",f="=");var S=v==="$"?t:v==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",A=v==="$"?r:/[%p]/.test(w)?o:"",k=rU[w],M=/[defgprs%]/.test(w);_=_===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function b(P){var N=S,D=A,U,G,B;if(w==="c")D=k(P)+D,P="";else{P=+P;var Q=P<0||1/P<0;if(P=isNaN(P)?l:k(Math.abs(P),_),x&&(P=BMe(P)),Q&&+P==0&&g!=="+"&&(Q=!1),N=(Q?g==="("?g:a:g==="-"||g==="("?"":g)+N,D=(w==="s"?oU[8+BH/3]:"")+D+(Q&&g==="("?")":""),M){for(U=-1,G=P.length;++U<G;)if(B=P.charCodeAt(U),48>B||B>57){D=(B===46?n+P.slice(U+1):P.slice(U))+D,P=P.slice(0,U);break}}}y&&!m&&(P=e(P,1/0));var j=N.length+P.length+D.length,X=j<p?new Array(p-j+1).join(d):"";switch(y&&m&&(P=e(X+P,X.length?p-D.length:1/0),X=""),f){case"<":P=N+P+D+X;break;case"=":P=N+X+P+D;break;case"^":P=X.slice(0,j=X.length>>1)+N+P+D+X.slice(j);break;default:P=X+N+P+D;break}return s(P)}return b.toString=function(){return h+""},b}function u(h,d){var f=c((h=Xw(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(wm(d)/3)))*3,v=Math.pow(10,-g),m=oU[8+g/3];return function(p){return f(v*p)+m}}return{format:c,formatPrefix:u}}var yb,VH,jH;HMe({thousands:",",grouping:[3],currency:["$",""]});function HMe(i){return yb=jMe(i),VH=yb.format,jH=yb.formatPrefix,yb}function GMe(i){return Math.max(0,-wm(Math.abs(i)))}function WMe(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(wm(e)/3)))*3-wm(Math.abs(i)))}function qMe(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,wm(e)-wm(i))+1}function OL(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}const aU=Symbol("implicit");function HH(){var i=new J4,e=[],t=[],r=aU;function n(s){let o=i.get(s);if(o===void 0){if(r!==aU)return r;i.set(s,o=e.push(s)-1)}return t[o%t.length]}return n.domain=function(s){if(!arguments.length)return e.slice();e=[],i=new J4;for(const o of s)i.has(o)||i.set(o,e.push(o)-1);return n},n.range=function(s){return arguments.length?(t=Array.from(s),n):t.slice()},n.unknown=function(s){return arguments.length?(r=s,n):r},n.copy=function(){return HH(e,t).unknown(r)},OL.apply(n,arguments),n}function XMe(i){return function(){return i}}function YMe(i){return+i}var lU=[0,1];function pf(i){return i}function $k(i,e){return(e-=i=+i)?function(t){return(t-i)/e}:XMe(isNaN(e)?NaN:.5)}function KMe(i,e){var t;return i>e&&(t=i,i=e,e=t),function(r){return Math.max(i,Math.min(e,r))}}function ZMe(i,e,t){var r=i[0],n=i[1],s=e[0],o=e[1];return n<r?(r=$k(n,r),s=t(o,s)):(r=$k(r,n),s=t(s,o)),function(a){return s(r(a))}}function JMe(i,e,t){var r=Math.min(i.length,e.length)-1,n=new Array(r),s=new Array(r),o=-1;for(i[r]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++o<r;)n[o]=$k(i[o],i[o+1]),s[o]=t(e[o],e[o+1]);return function(a){var l=gMe(i,a,1,r)-1;return s[l](n[l](a))}}function GH(i,e){return e.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function QMe(){var i=lU,e=lU,t=IL,r,n,s,o=pf,a,l,c;function u(){var d=Math.min(i.length,e.length);return o!==pf&&(o=KMe(i[0],i[d-1])),a=d>2?JMe:ZMe,l=c=null,h}function h(d){return d==null||isNaN(d=+d)?s:(l||(l=a(i.map(r),e,t)))(r(o(d)))}return h.invert=function(d){return o(n((c||(c=a(e,i.map(r),co)))(d)))},h.domain=function(d){return arguments.length?(i=Array.from(d,YMe),u()):i.slice()},h.range=function(d){return arguments.length?(e=Array.from(d),u()):e.slice()},h.rangeRound=function(d){return e=Array.from(d),t=DMe,u()},h.clamp=function(d){return arguments.length?(o=d?!0:pf,u()):o!==pf},h.interpolate=function(d){return arguments.length?(t=d,u()):t},h.unknown=function(d){return arguments.length?(s=d,h):s},function(d,f){return r=d,n=f,u()}}function WH(){return QMe()(pf,pf)}function eSe(i,e,t,r){var n=kk(i,e,t),s;switch(r=Xw(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(i),Math.abs(e));return r.precision==null&&!isNaN(s=WMe(n,o))&&(r.precision=s),jH(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=qMe(n,Math.max(Math.abs(i),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=GMe(n))&&(r.precision=s-(r.type==="%")*2);break}}return VH(r)}function tSe(i){var e=i.domain;return i.ticks=function(t){var r=e();return MMe(r[0],r[r.length-1],t??10)},i.tickFormat=function(t,r){var n=e();return eSe(n[0],n[n.length-1],t??10,r)},i.nice=function(t){t==null&&(t=10);var r=e(),n=0,s=r.length-1,o=r[n],a=r[s],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=n,n=s,s=c);u-- >0;){if(c=Ak(o,a,t),c===l)return r[n]=o,r[s]=a,e(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return i},i}function qH(){var i=WH();return i.copy=function(){return GH(i,qH())},OL.apply(i,arguments),tSe(i)}function iSe(i,e){i=i.slice();var t=0,r=i.length-1,n=i[t],s=i[r],o;return s<n&&(o=t,t=r,r=o,o=n,n=s,s=o),i[t]=e.floor(n),i[r]=e.ceil(s),i}const OE=new Date,UE=new Date;function sr(i,e,t,r){function n(s){return i(s=arguments.length===0?new Date:new Date(+s)),s}return n.floor=s=>(i(s=new Date(+s)),s),n.ceil=s=>(i(s=new Date(s-1)),e(s,1),i(s),s),n.round=s=>{const o=n(s),a=n.ceil(s);return s-o<a-s?o:a},n.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),n.range=(s,o,a)=>{const l=[];if(s=n.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),i(s);while(c<s&&s<o);return l},n.filter=s=>sr(o=>{if(o>=o)for(;i(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),t&&(n.count=(s,o)=>(OE.setTime(+s),UE.setTime(+o),i(OE),i(UE),Math.floor(t(OE,UE))),n.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?n.filter(r?o=>r(o)%s===0:o=>n.count(0,o)%s===0):n)),n}const Yw=sr(()=>{},(i,e)=>{i.setTime(+i+e)},(i,e)=>e-i);Yw.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?sr(e=>{e.setTime(Math.floor(e/i)*i)},(e,t)=>{e.setTime(+e+t*i)},(e,t)=>(t-e)/i):Yw);Yw.range;const Za=1e3,ks=Za*60,Ja=ks*60,ml=Ja*24,UL=ml*7,cU=ml*30,zE=ml*365,ff=sr(i=>{i.setTime(i-i.getMilliseconds())},(i,e)=>{i.setTime(+i+e*Za)},(i,e)=>(e-i)/Za,i=>i.getUTCSeconds());ff.range;const zL=sr(i=>{i.setTime(i-i.getMilliseconds()-i.getSeconds()*Za)},(i,e)=>{i.setTime(+i+e*ks)},(i,e)=>(e-i)/ks,i=>i.getMinutes());zL.range;const rSe=sr(i=>{i.setUTCSeconds(0,0)},(i,e)=>{i.setTime(+i+e*ks)},(i,e)=>(e-i)/ks,i=>i.getUTCMinutes());rSe.range;const FL=sr(i=>{i.setTime(i-i.getMilliseconds()-i.getSeconds()*Za-i.getMinutes()*ks)},(i,e)=>{i.setTime(+i+e*Ja)},(i,e)=>(e-i)/Ja,i=>i.getHours());FL.range;const nSe=sr(i=>{i.setUTCMinutes(0,0,0)},(i,e)=>{i.setTime(+i+e*Ja)},(i,e)=>(e-i)/Ja,i=>i.getUTCHours());nSe.range;const dv=sr(i=>i.setHours(0,0,0,0),(i,e)=>i.setDate(i.getDate()+e),(i,e)=>(e-i-(e.getTimezoneOffset()-i.getTimezoneOffset())*ks)/ml,i=>i.getDate()-1);dv.range;const BL=sr(i=>{i.setUTCHours(0,0,0,0)},(i,e)=>{i.setUTCDate(i.getUTCDate()+e)},(i,e)=>(e-i)/ml,i=>i.getUTCDate()-1);BL.range;const sSe=sr(i=>{i.setUTCHours(0,0,0,0)},(i,e)=>{i.setUTCDate(i.getUTCDate()+e)},(i,e)=>(e-i)/ml,i=>Math.floor(i/ml));sSe.range;function _d(i){return sr(e=>{e.setDate(e.getDate()-(e.getDay()+7-i)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ks)/UL)}const TS=_d(0),Kw=_d(1),oSe=_d(2),aSe=_d(3),Mm=_d(4),lSe=_d(5),cSe=_d(6);TS.range;Kw.range;oSe.range;aSe.range;Mm.range;lSe.range;cSe.range;function yd(i){return sr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-i)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/UL)}const XH=yd(0),Zw=yd(1),uSe=yd(2),hSe=yd(3),Sm=yd(4),dSe=yd(5),pSe=yd(6);XH.range;Zw.range;uSe.range;hSe.range;Sm.range;dSe.range;pSe.range;const VL=sr(i=>{i.setDate(1),i.setHours(0,0,0,0)},(i,e)=>{i.setMonth(i.getMonth()+e)},(i,e)=>e.getMonth()-i.getMonth()+(e.getFullYear()-i.getFullYear())*12,i=>i.getMonth());VL.range;const fSe=sr(i=>{i.setUTCDate(1),i.setUTCHours(0,0,0,0)},(i,e)=>{i.setUTCMonth(i.getUTCMonth()+e)},(i,e)=>e.getUTCMonth()-i.getUTCMonth()+(e.getUTCFullYear()-i.getUTCFullYear())*12,i=>i.getUTCMonth());fSe.range;const gl=sr(i=>{i.setMonth(0,1),i.setHours(0,0,0,0)},(i,e)=>{i.setFullYear(i.getFullYear()+e)},(i,e)=>e.getFullYear()-i.getFullYear(),i=>i.getFullYear());gl.every=i=>!isFinite(i=Math.floor(i))||!(i>0)?null:sr(e=>{e.setFullYear(Math.floor(e.getFullYear()/i)*i),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*i)});gl.range;const Wh=sr(i=>{i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},(i,e)=>{i.setUTCFullYear(i.getUTCFullYear()+e)},(i,e)=>e.getUTCFullYear()-i.getUTCFullYear(),i=>i.getUTCFullYear());Wh.every=i=>!isFinite(i=Math.floor(i))||!(i>0)?null:sr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/i)*i),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*i)});Wh.range;function mSe(i,e,t,r,n,s){const o=[[ff,1,Za],[ff,5,5*Za],[ff,15,15*Za],[ff,30,30*Za],[s,1,ks],[s,5,5*ks],[s,15,15*ks],[s,30,30*ks],[n,1,Ja],[n,3,3*Ja],[n,6,6*Ja],[n,12,12*Ja],[r,1,ml],[r,2,2*ml],[t,1,UL],[e,1,cU],[e,3,3*cU],[i,1,zE]];function a(c,u,h){const d=u<c;d&&([c,u]=[u,c]);const f=h&&typeof h.range=="function"?h:l(c,u,h),g=f?f.range(c,+u+1):[];return d?g.reverse():g}function l(c,u,h){const d=Math.abs(u-c)/h,f=PL(([,,m])=>m).right(o,d);if(f===o.length)return i.every(kk(c/zE,u/zE,h));if(f===0)return Yw.every(Math.max(kk(c,u,h),1));const[g,v]=o[d/o[f-1][2]<o[f][2]/d?f-1:f];return g.every(v)}return[a,l]}const[gSe,_Se]=mSe(gl,VL,TS,dv,FL,zL);function FE(i){if(0<=i.y&&i.y<100){var e=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return e.setFullYear(i.y),e}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function BE(i){if(0<=i.y&&i.y<100){var e=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return e.setUTCFullYear(i.y),e}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function e0(i,e,t){return{y:i,m:e,d:t,H:0,M:0,S:0,L:0}}function ySe(i){var e=i.dateTime,t=i.date,r=i.time,n=i.periods,s=i.days,o=i.shortDays,a=i.months,l=i.shortMonths,c=t0(n),u=i0(n),h=t0(s),d=i0(s),f=t0(o),g=i0(o),v=t0(a),m=i0(a),p=t0(l),y=i0(l),_={a:Q,A:j,b:X,B:ne,c:null,d:mU,e:mU,f:BSe,g:ZSe,G:QSe,H:USe,I:zSe,j:FSe,L:YH,m:VSe,M:jSe,p:ge,q:pe,Q:yU,s:vU,S:HSe,u:GSe,U:WSe,V:qSe,w:XSe,W:YSe,x:null,X:null,y:KSe,Y:JSe,Z:e2e,"%":_U},x={a:V,A:Y,b:ae,B:J,c:null,d:gU,e:gU,f:n2e,g:f2e,G:g2e,H:t2e,I:i2e,j:r2e,L:ZH,m:s2e,M:o2e,p:z,q:_e,Q:yU,s:vU,S:a2e,u:l2e,U:c2e,V:u2e,w:h2e,W:d2e,x:null,X:null,y:p2e,Y:m2e,Z:_2e,"%":_U},w={a:b,A:P,b:N,B:D,c:U,d:pU,e:pU,f:NSe,g:dU,G:hU,H:fU,I:fU,j:$Se,L:PSe,m:CSe,M:LSe,p:M,q:kSe,Q:DSe,s:OSe,S:RSe,u:MSe,U:SSe,V:TSe,w:wSe,W:ESe,x:G,X:B,y:dU,Y:hU,Z:ASe,"%":ISe};_.x=S(t,_),_.X=S(r,_),_.c=S(e,_),x.x=S(t,x),x.X=S(r,x),x.c=S(e,x);function S(ee,te){return function(be){var oe=[],Te=-1,Ae=0,Qe=ee.length,Ze,ht,wt;for(be instanceof Date||(be=new Date(+be));++Te<Qe;)ee.charCodeAt(Te)===37&&(oe.push(ee.slice(Ae,Te)),(ht=uU[Ze=ee.charAt(++Te)])!=null?Ze=ee.charAt(++Te):ht=Ze==="e"?" ":"0",(wt=te[Ze])&&(Ze=wt(be,ht)),oe.push(Ze),Ae=Te+1);return oe.push(ee.slice(Ae,Te)),oe.join("")}}function A(ee,te){return function(be){var oe=e0(1900,void 0,1),Te=k(oe,ee,be+="",0),Ae,Qe;if(Te!=be.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(te&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(Ae=BE(e0(oe.y,0,1)),Qe=Ae.getUTCDay(),Ae=Qe>4||Qe===0?Zw.ceil(Ae):Zw(Ae),Ae=BL.offset(Ae,(oe.V-1)*7),oe.y=Ae.getUTCFullYear(),oe.m=Ae.getUTCMonth(),oe.d=Ae.getUTCDate()+(oe.w+6)%7):(Ae=FE(e0(oe.y,0,1)),Qe=Ae.getDay(),Ae=Qe>4||Qe===0?Kw.ceil(Ae):Kw(Ae),Ae=dv.offset(Ae,(oe.V-1)*7),oe.y=Ae.getFullYear(),oe.m=Ae.getMonth(),oe.d=Ae.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),Qe="Z"in oe?BE(e0(oe.y,0,1)).getUTCDay():FE(e0(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(Qe+5)%7:oe.w+oe.U*7-(Qe+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,BE(oe)):FE(oe)}}function k(ee,te,be,oe){for(var Te=0,Ae=te.length,Qe=be.length,Ze,ht;Te<Ae;){if(oe>=Qe)return-1;if(Ze=te.charCodeAt(Te++),Ze===37){if(Ze=te.charAt(Te++),ht=w[Ze in uU?te.charAt(Te++):Ze],!ht||(oe=ht(ee,be,oe))<0)return-1}else if(Ze!=be.charCodeAt(oe++))return-1}return oe}function M(ee,te,be){var oe=c.exec(te.slice(be));return oe?(ee.p=u.get(oe[0].toLowerCase()),be+oe[0].length):-1}function b(ee,te,be){var oe=f.exec(te.slice(be));return oe?(ee.w=g.get(oe[0].toLowerCase()),be+oe[0].length):-1}function P(ee,te,be){var oe=h.exec(te.slice(be));return oe?(ee.w=d.get(oe[0].toLowerCase()),be+oe[0].length):-1}function N(ee,te,be){var oe=p.exec(te.slice(be));return oe?(ee.m=y.get(oe[0].toLowerCase()),be+oe[0].length):-1}function D(ee,te,be){var oe=v.exec(te.slice(be));return oe?(ee.m=m.get(oe[0].toLowerCase()),be+oe[0].length):-1}function U(ee,te,be){return k(ee,e,te,be)}function G(ee,te,be){return k(ee,t,te,be)}function B(ee,te,be){return k(ee,r,te,be)}function Q(ee){return o[ee.getDay()]}function j(ee){return s[ee.getDay()]}function X(ee){return l[ee.getMonth()]}function ne(ee){return a[ee.getMonth()]}function ge(ee){return n[+(ee.getHours()>=12)]}function pe(ee){return 1+~~(ee.getMonth()/3)}function V(ee){return o[ee.getUTCDay()]}function Y(ee){return s[ee.getUTCDay()]}function ae(ee){return l[ee.getUTCMonth()]}function J(ee){return a[ee.getUTCMonth()]}function z(ee){return n[+(ee.getUTCHours()>=12)]}function _e(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var te=S(ee+="",_);return te.toString=function(){return ee},te},parse:function(ee){var te=A(ee+="",!1);return te.toString=function(){return ee},te},utcFormat:function(ee){var te=S(ee+="",x);return te.toString=function(){return ee},te},utcParse:function(ee){var te=A(ee+="",!0);return te.toString=function(){return ee},te}}}var uU={"-":"",_:" ",0:"0"},br=/^\s*\d+/,vSe=/^%/,bSe=/[\\^$*+?|[\]().{}]/g;function Qt(i,e,t){var r=i<0?"-":"",n=(r?-i:i)+"",s=n.length;return r+(s<t?new Array(t-s+1).join(e)+n:n)}function xSe(i){return i.replace(bSe,"\\$&")}function t0(i){return new RegExp("^(?:"+i.map(xSe).join("|")+")","i")}function i0(i){return new Map(i.map((e,t)=>[e.toLowerCase(),t]))}function wSe(i,e,t){var r=br.exec(e.slice(t,t+1));return r?(i.w=+r[0],t+r[0].length):-1}function MSe(i,e,t){var r=br.exec(e.slice(t,t+1));return r?(i.u=+r[0],t+r[0].length):-1}function SSe(i,e,t){var r=br.exec(e.slice(t,t+2));return r?(i.U=+r[0],t+r[0].length):-1}function TSe(i,e,t){var r=br.exec(e.slice(t,t+2));return r?(i.V=+r[0],t+r[0].length):-1}function ESe(i,e,t){var r=br.exec(e.slice(t,t+2));return r?(i.W=+r[0],t+r[0].length):-1}function hU(i,e,t){var r=br.exec(e.slice(t,t+4));return r?(i.y=+r[0],t+r[0].length):-1}function dU(i,e,t){var r=br.exec(e.slice(t,t+2));return r?(i.y=+r[0]+(+r[0]>68?1900:2e3),t+r[0].length):-1}function ASe(i,e,t){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return r?(i.Z=r[1]?0:-(r[2]+(r[3]||"00")),t+r[0].length):-1}function kSe(i,e,t){var r=br.exec(e.slice(t,t+1));return r?(i.q=r[0]*3-3,t+r[0].length):-1}function CSe(i,e,t){var r=br.exec(e.slice(t,t+2));return r?(i.m=r[0]-1,t+r[0].length):-1}function pU(i,e,t){var r=br.exec(e.slice(t,t+2));return r?(i.d=+r[0],t+r[0].length):-1}function $Se(i,e,t){var r=br.exec(e.slice(t,t+3));return r?(i.m=0,i.d=+r[0],t+r[0].length):-1}function fU(i,e,t){var r=br.exec(e.slice(t,t+2));return r?(i.H=+r[0],t+r[0].length):-1}function LSe(i,e,t){var r=br.exec(e.slice(t,t+2));return r?(i.M=+r[0],t+r[0].length):-1}function RSe(i,e,t){var r=br.exec(e.slice(t,t+2));return r?(i.S=+r[0],t+r[0].length):-1}function PSe(i,e,t){var r=br.exec(e.slice(t,t+3));return r?(i.L=+r[0],t+r[0].length):-1}function NSe(i,e,t){var r=br.exec(e.slice(t,t+6));return r?(i.L=Math.floor(r[0]/1e3),t+r[0].length):-1}function ISe(i,e,t){var r=vSe.exec(e.slice(t,t+1));return r?t+r[0].length:-1}function DSe(i,e,t){var r=br.exec(e.slice(t));return r?(i.Q=+r[0],t+r[0].length):-1}function OSe(i,e,t){var r=br.exec(e.slice(t));return r?(i.s=+r[0],t+r[0].length):-1}function mU(i,e){return Qt(i.getDate(),e,2)}function USe(i,e){return Qt(i.getHours(),e,2)}function zSe(i,e){return Qt(i.getHours()%12||12,e,2)}function FSe(i,e){return Qt(1+dv.count(gl(i),i),e,3)}function YH(i,e){return Qt(i.getMilliseconds(),e,3)}function BSe(i,e){return YH(i,e)+"000"}function VSe(i,e){return Qt(i.getMonth()+1,e,2)}function jSe(i,e){return Qt(i.getMinutes(),e,2)}function HSe(i,e){return Qt(i.getSeconds(),e,2)}function GSe(i){var e=i.getDay();return e===0?7:e}function WSe(i,e){return Qt(TS.count(gl(i)-1,i),e,2)}function KH(i){var e=i.getDay();return e>=4||e===0?Mm(i):Mm.ceil(i)}function qSe(i,e){return i=KH(i),Qt(Mm.count(gl(i),i)+(gl(i).getDay()===4),e,2)}function XSe(i){return i.getDay()}function YSe(i,e){return Qt(Kw.count(gl(i)-1,i),e,2)}function KSe(i,e){return Qt(i.getFullYear()%100,e,2)}function ZSe(i,e){return i=KH(i),Qt(i.getFullYear()%100,e,2)}function JSe(i,e){return Qt(i.getFullYear()%1e4,e,4)}function QSe(i,e){var t=i.getDay();return i=t>=4||t===0?Mm(i):Mm.ceil(i),Qt(i.getFullYear()%1e4,e,4)}function e2e(i){var e=i.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Qt(e/60|0,"0",2)+Qt(e%60,"0",2)}function gU(i,e){return Qt(i.getUTCDate(),e,2)}function t2e(i,e){return Qt(i.getUTCHours(),e,2)}function i2e(i,e){return Qt(i.getUTCHours()%12||12,e,2)}function r2e(i,e){return Qt(1+BL.count(Wh(i),i),e,3)}function ZH(i,e){return Qt(i.getUTCMilliseconds(),e,3)}function n2e(i,e){return ZH(i,e)+"000"}function s2e(i,e){return Qt(i.getUTCMonth()+1,e,2)}function o2e(i,e){return Qt(i.getUTCMinutes(),e,2)}function a2e(i,e){return Qt(i.getUTCSeconds(),e,2)}function l2e(i){var e=i.getUTCDay();return e===0?7:e}function c2e(i,e){return Qt(XH.count(Wh(i)-1,i),e,2)}function JH(i){var e=i.getUTCDay();return e>=4||e===0?Sm(i):Sm.ceil(i)}function u2e(i,e){return i=JH(i),Qt(Sm.count(Wh(i),i)+(Wh(i).getUTCDay()===4),e,2)}function h2e(i){return i.getUTCDay()}function d2e(i,e){return Qt(Zw.count(Wh(i)-1,i),e,2)}function p2e(i,e){return Qt(i.getUTCFullYear()%100,e,2)}function f2e(i,e){return i=JH(i),Qt(i.getUTCFullYear()%100,e,2)}function m2e(i,e){return Qt(i.getUTCFullYear()%1e4,e,4)}function g2e(i,e){var t=i.getUTCDay();return i=t>=4||t===0?Sm(i):Sm.ceil(i),Qt(i.getUTCFullYear()%1e4,e,4)}function _2e(){return"+0000"}function _U(){return"%"}function yU(i){return+i}function vU(i){return Math.floor(+i/1e3)}var vp,QH;y2e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function y2e(i){return vp=ySe(i),QH=vp.format,vp.parse,vp.utcFormat,vp.utcParse,vp}function v2e(i){return new Date(i)}function b2e(i){return i instanceof Date?+i:+new Date(+i)}function e9(i,e,t,r,n,s,o,a,l,c){var u=WH(),h=u.invert,d=u.domain,f=c(".%L"),g=c(":%S"),v=c("%I:%M"),m=c("%I %p"),p=c("%a %d"),y=c("%b %d"),_=c("%B"),x=c("%Y");function w(S){return(l(S)<S?f:a(S)<S?g:o(S)<S?v:s(S)<S?m:r(S)<S?n(S)<S?p:y:t(S)<S?_:x)(S)}return u.invert=function(S){return new Date(h(S))},u.domain=function(S){return arguments.length?d(Array.from(S,b2e)):d().map(v2e)},u.ticks=function(S){var A=d();return i(A[0],A[A.length-1],S??10)},u.tickFormat=function(S,A){return A==null?w:c(A)},u.nice=function(S){var A=d();return(!S||typeof S.range!="function")&&(S=e(A[0],A[A.length-1],S??10)),S?d(iSe(A,S)):u},u.copy=function(){return GH(u,e9(i,e,t,r,n,s,o,a,l,c))},u}function x2e(){return OL.apply(e9(gSe,_Se,gl,VL,TS,dv,FL,zL,ff,QH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function w2e(i){for(var e=i.length/6|0,t=new Array(e),r=0;r<e;)t[r]="#"+i.slice(r*6,++r*6);return t}const M2e=w2e("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const k_=(i,e)=>{var t;const r=i._$AN;if(r===void 0)return!1;for(const n of r)(t=n._$AO)==null||t.call(n,e,!1),k_(n,e);return!0},Jw=i=>{let e,t;do{if((e=i._$AM)===void 0)break;t=e._$AN,t.delete(i),i=e}while((t==null?void 0:t.size)===0)},t9=i=>{for(let e;e=i._$AM;i=e){let t=e._$AN;if(t===void 0)e._$AN=t=new Set;else if(t.has(i))break;t.add(i),E2e(e)}};function S2e(i){this._$AN!==void 0?(Jw(this),this._$AM=i,t9(this)):this._$AM=i}function T2e(i,e=!1,t=0){const r=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(r))for(let s=t;s<r.length;s++)k_(r[s],!1),Jw(r[s]);else r!=null&&(k_(r,!1),Jw(r));else k_(this,i)}const E2e=i=>{i.type==tj.CHILD&&(i._$AP??(i._$AP=T2e),i._$AQ??(i._$AQ=S2e))};class A2e extends oL{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,r){super._$AT(e,t,r),t9(this),this.isConnected=e._$AU}_$AO(e,t=!0){var r,n;e!==this.isConnected&&(this.isConnected=e,e?(r=this.reconnected)==null||r.call(this):(n=this.disconnected)==null||n.call(this)),t&&(k_(this,e),Jw(this))}setValue(e){if(Ege(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}const VE=new WeakMap,C_=sL(class extends A2e{render(i){return Ni}update(i,[e]){var t;const r=e!==this.Y;return r&&this.Y!==void 0&&this.rt(void 0),(r||this.lt!==this.ct)&&(this.Y=e,this.ht=(t=i.options)==null?void 0:t.host,this.rt(this.ct=i.element)),Ni}rt(i){if(this.isConnected||(i=void 0),typeof this.Y=="function"){const e=this.ht??globalThis;let t=VE.get(e);t===void 0&&(t=new WeakMap,VE.set(e,t)),t.get(this.Y)!==void 0&&this.Y.call(this.ht,void 0),t.set(this.Y,i),i!==void 0&&this.Y.call(this.ht,i)}else this.Y.value=i}get lt(){var i,e;return typeof this.Y=="function"?(i=VE.get(this.ht??globalThis))==null?void 0:i.get(this.Y):(e=this.Y)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});function k2e(i,e,t){return x2e().domain([t-e,t]).range([0,i])}function C2e(i){const e=FH(i).tickFormat(t=>`${t.getTime()/1e3}`);return bi`
    <g 
      class="axis axis--x" 
      ${C_(t=>{e(Vr(t))})}>
    </g> 
  `}function $2e(i,e){const t=FH(i).tickSize(-e).tickFormat("");return bi`
    <g 
      class="axis-x-grid" 
      ${C_(r=>{t(Vr(r))})}>
    </g> 
  `}var L2e=Object.defineProperty,pv=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&L2e(e,t,n),n};class vd extends ct{constructor(){super(...arguments),this.value=0,this.color="",this.hide=!1,this.yAxis=0,this.displayName=""}}pv([W({type:Number})],vd.prototype,"value");pv([W({type:String})],vd.prototype,"color");pv([W({type:Boolean})],vd.prototype,"hide");pv([W({type:Number,attribute:"y-axis"})],vd.prototype,"yAxis");pv([W({type:String,attribute:"display-name",reflect:!0})],vd.prototype,"displayName");customElements.get("frc-line-chart-data")||customElements.define("frc-line-chart-data",vd);var R2e=Object.defineProperty,bd=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&R2e(e,t,n),n};const P2e=HH().domain(Array(8).fill(0).map((i,e)=>e)).range(M2e);var bp;const uu=(bp=class extends ct{constructor(){super(...arguments),this.viewTime=10,this.chartTitle="",this.data=[],this.startTime=0,this.elapsedTimeMs=0}firstUpdated(){this.startTime=Date.now(),requestAnimationFrame(()=>{this.updateChart()})}getFilteredData(i){const e=i.findIndex(({timeMs:t})=>this.elapsedTimeMs-t<Math.round(this.viewTime*1e3))-1;return e<0?i:i.slice(e)}updateChart(){this.elapsedTimeMs=Date.now()-this.startTime;const i=[...this.children].filter(e=>e.tagName.toLowerCase()==="frc-line-chart-data");this.data=i.map((e,t)=>{var r;const n=((r=this.data[t])==null?void 0:r.data)??[];return n.push({value:e.value??0,timeMs:this.elapsedTimeMs}),{data:this.getFilteredData(n),color:e.color||P2e(t%8),hide:e.hide??!1,yAxis:e.yAxis??0,displayName:e.displayName||`Data ${t}`}}),requestAnimationFrame(()=>{this.updateChart()})}static getYScale(i,e,t){const{invert:r,lockMin:n,lockMax:s}=t;let{min:o,max:a}=t;(!n||!s)&&e.forEach(c=>{c.data.forEach(({value:u})=>{n||(o=Math.min(o,u)),s||(a=Math.max(a,u))})});const l=r?[0,i]:[i,0];return qH().domain([o,a]).range(l)}getDimensions(){var i;const e={top:0,right:40,bottom:20,left:40},t=((i=this.chartContainer)==null?void 0:i.getBoundingClientRect())??{width:960,height:500},r=t.width,n=t.height,s=r-e.left-e.right,o=n-e.top-e.bottom;return{margin:e,svgWidth:r,svgHeight:n,width:s,height:o}}getYScales(){const{height:i}=this.getDimensions(),e=[...this.children].filter(t=>t.tagName.toLowerCase()==="frc-line-chart-axis");if(e.length===0){const t={min:-1,max:1,lockMin:!1,lockMax:!1,invert:!1,side:"left",hideGridLines:!1,hide:!1};return[{chartAxis:t,scale:bp.getYScale(i,this.data.filter(({yAxis:r})=>r===0),t)}]}return e.map((t,r)=>{const n=t,s={min:n.min??-1,max:n.max??1,lockMin:n.lockMin??!1,lockMax:n.lockMax??!1,invert:n.invert??!1,side:n.side??"left",hideGridLines:n.hideGridLines??!1,hide:n.hide??!1};return{chartAxis:s,scale:bp.getYScale(i,this.data.filter(({yAxis:o})=>o===r),s)}})}static getPath(i,e,t){return`M${i.map(r=>[e(r).toFixed(3),t(r).toFixed(3)].join(",")).join("L")}`}getLegend(){const i=[...this.children].find(t=>t.tagName.toLowerCase()==="frc-line-chart-legend");if(!i)return{direction:"horizontal",position:"n",inside:!1,hide:!1};const e=i;return{direction:e.direction??"horizontal",position:e.position??"n",inside:e.inside??!1,hide:e.hide??!1}}render(){const{inside:i,position:e,direction:t,hide:r}=this.getLegend(),n=e==="w"||e==="e"||["ne","nw","se","sw"].includes(e)&&t==="vertical",s=n&&["ne","e","se"].includes(e)||!n&&["sw","s","se"].includes(e),o=df({display:i?"block":"flex",flexDirection:`${n?"row":"column"}${s?"-reverse":""}`}),a=i?{width:"100%",height:"100%"}:{flex:"1"};return qe`
      <div class="chart-and-header">
        ${this.chartTitle?qe`<header>${this.chartTitle}</header>`:""}
        <div class="chart-and-legend" style=${o}>
          ${r?"":this.renderLegend()}
          <div class="chart-container" style=${df(a)}>
            ${this.renderChart()}
          </div>
        </div>
      </div>
    `}renderLegend(){const{margin:i}=this.getDimensions(),{inside:e,direction:t,position:r}=this.getLegend(),n=["n","s","e","w"].includes(r)?"center":r==="nw"?"flex-start":r==="se"?"flex-end":r==="ne"?t==="horizontal"?"flex-end":"flex-start":t==="vertical"?"flex-end":"flex-start",s=(()=>{if(!e)return{};const a={alignItems:"center"};return r.includes("n")?a.top=`${i.top}px`:r.includes("s")&&(a.bottom=`${i.bottom}px`),r.includes("w")?a.left=`${i.left}px`:r.includes("e")&&(a.right=`${i.right}px`),["n","s","e","w"].includes(r)&&(a.justifyContent="center"),["n","s"].includes(r)&&(a.left="0",a.right="0"),["e","w"].includes(r)&&(a.top="0",a.bottom="0"),a})(),o=df({alignSelf:n,...s});return qe`
      <div
        class="legend ${e?"inside":"outside"} ${t==="horizontal"?"horizontal":"vertical"}"
        style=${o}
      >
        ${this.data.map(({color:a,displayName:l})=>qe`
            <div class="legend-item">
              <div
                class="legend-item-box"
                style=${df({background:a})}
              ></div>
              <span class="legend-item-label">${l}</span>
            </div>
          `)}
      </div>
    `}renderChart(){const{margin:i,svgWidth:e,svgHeight:t,width:r,height:n}=this.getDimensions(),s=k2e(r,Math.round(this.viewTime*1e3),this.elapsedTimeMs),o=this.getYScales().filter(({chartAxis:l})=>!l.hide),a=o.map(l=>c=>bp.getPath(c,u=>s(new Date(u.timeMs)),u=>l.scale(u.value)));return bi`
      <svg width=${e} height=${t} style="position: absolute">
        <g transform="translate(${i.left},${i.top})">
          <defs>
            <clipPath id="clip">
              <rect width=${r} height=${n}></rect>
            </clipPath>
          </defs>
          <g transform="translate(0,${n})">
            ${C2e(s)}
            ${$2e(s,n)}
          </g>
          ${this.renderScales(o,"left")}
          ${this.renderScales(o,"right")}
          <rect class="chart-border" width=${r} height=${n}></rect>
          ${this.data.filter(({hide:l,yAxis:c})=>!l&&c<o.length&&c>=0).map(l=>bi`
            <g clip-path="url(#clip)">
              <path 
                class="data-path"
                ${C_(c=>{const u=Vr(c),h=a[l.yAxis](l.data);u.attr("class","line").attr("stroke",l.color).attr("d",h)})}>
              ></path>
            </g>
          `)}
        </g>
      </svg>
    `}renderScales(i,e){const{width:t}=this.getDimensions();return bi`
     ${i.filter(r=>r.chartAxis.side===e).map((r,n)=>{const s=r.chartAxis.side==="left"?-n*25:t;return bi`
              <g 
                class="axis axis--y" 
                transform="translate(${s}, 0)"
                ${C_(o=>{(r.chartAxis.side==="left"?tU:$Me)(r.scale)(Vr(o))})}>
              </g>
              ${r.chartAxis.hideGridLines?"":bi`
                    <g 
                      class="axis-y-grid" 
                      ${C_(o=>{tU(r.scale).tickSize(-t).tickFormat("")(Vr(o))})}>
                    </g> 
                  `}
            `})}
    `}},bp.styles=Ct`
    :host {
      display: inline-block;
      width: 700px;
      height: 400px;
      color: var(--frc-line-chart-text-color, black);
    }

    .chart-and-header {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .chart-and-header header {
      font-size: 18px;
      font-family: sans-serif;
      margin: 3px 0;
    }

    .chart-and-legend {
      flex: 1;
      width: 100%;
      position: relative;
    }

    .legend-container {
      position: relative;
    }

    .legend {
      display: flex;
      z-index: 100;
    }

    .legend.outside {
      position: relative;
    }

    .legend.inside {
      position: absolute;
    }

    .legend-item {
      display: flex;
      flex-wrap: no-wrap;
      gap: 5px;
      align-items: center;
      padding: 5px;
    }

    .legend.horizontal {
      flex-direction: row;
    }

    .legend.vertical {
      flex-direction: column;
    }

    .legend-item-box {
      width: 15px;
      height: 15px;
    }

    .legend-item-label {
      font-family: sans-serif;
      font-size: 15px;
    }

    .line {
      fill: none;
      stroke-width: 1.5px;
    }

    .chart-border {
      fill: none;
      stroke-width: 1;
      stroke: var(--frc-line-chart-border-color, black);
    }

    .axis-x-grid line,
    .axis-y-grid line {
      stroke: var(--frc-line-chart-grid-color, #eee);
    }

    .axis--y {
      font-family: monospace;
    }

    svg {
      overflow: visible;
    }
  `,bp);bd([W({type:Number,attribute:"view-time"})],uu.prototype,"viewTime");bd([W({type:String,attribute:"chart-title",reflect:!0})],uu.prototype,"chartTitle");bd([Ui()],uu.prototype,"data");bd([ri(".data-path")],uu.prototype,"path");bd([ri("svg")],uu.prototype,"svg");bd([ri(".axis--x")],uu.prototype,"xAxis");bd([ri(".chart-container")],uu.prototype,"chartContainer");let i9=uu;customElements.get("frc-line-chart")||customElements.define("frc-line-chart",i9);var N2e=Object.defineProperty,hu=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&N2e(e,t,n),n};let ua=class extends ct{constructor(){super(...arguments),this.min=-1,this.max=1,this.lockMin=!1,this.lockMax=!1,this.invert=!1,this.side="left",this.hideGridLines=!1,this.hide=!1}};hu([W({type:Number})],ua.prototype,"min");hu([W({type:Number})],ua.prototype,"max");hu([W({type:Boolean,attribute:"lock-min"})],ua.prototype,"lockMin");hu([W({type:Boolean,attribute:"lock-max"})],ua.prototype,"lockMax");hu([W({type:Boolean})],ua.prototype,"invert");hu([W({type:String,reflect:!0})],ua.prototype,"side");hu([W({type:Boolean,attribute:"hide-grid-lines"})],ua.prototype,"hideGridLines");hu([W({type:Boolean})],ua.prototype,"hide");customElements.get("frc-line-chart-axis")||customElements.define("frc-line-chart-axis",ua);var I2e=Object.defineProperty,ES=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&I2e(e,t,n),n};class rg extends ct{constructor(){super(...arguments),this.position="n",this.direction="horizontal",this.hide=!1,this.inside=!1}}ES([W({type:String})],rg.prototype,"position");ES([W({type:String})],rg.prototype,"direction");ES([W({type:Boolean})],rg.prototype,"hide");ES([W({type:Boolean})],rg.prototype,"inside");customElements.get("frc-line-chart-legend")||customElements.define("frc-line-chart-legend",rg);xt({tagName:"frc-line-chart",elementClass:i9,react:yt});xt({tagName:"frc-line-chart-axis",elementClass:ua,react:yt});xt({tagName:"frc-line-chart-data",elementClass:vd,react:yt});xt({tagName:"frc-line-chart-legend",elementClass:rg,react:yt});const Kr={info:{color:"#fff",name:"INFO",level:1},debug:{color:"#fff",name:"DEBUG",level:0},fatal:{color:"#FF3E3E",name:"ERROR",level:4},warning:{color:"#FFC53E",name:"WARNING",level:3},success:{color:"#3EFF45",name:"SUCCESS",level:2}},D2e={name:"Html Logger",enabled:!0,maxLogCount:1e3,loggingFormat:"[MESSAGE]",argumentsSeparator:" ",utcTime:!1,level:0};var O2e=function(i){var e=[].slice.call(arguments,1);return e.forEach(function(t){for(var r in t)i[r]=t[r]}),i};let U2e=class{constructor(e,t=document.body){this.options=O2e({},D2e,e||{}),this.parent=t,this.linesCount=0,this.$={},this.initialized=!1}init(){if(this.initialized)return;if(!document||!document.createElement||!document.body||!document.body.appendChild)throw new Error("HtmlLogger not initialized");this.$.container=document.createElement("div"),this.$.container.setAttribute("style",`width:100%; height: 100%;
					margin:0;
					left:0;
					background: rgba(0, 0, 0, 0.8);
					overflow:auto;
					padding: 5px 7px;
    			box-sizing: border-box;`),this.$.log=document.createElement("div");const e=document.createElement("span");e.style.color="#afa",e.style.fontWeight="bold";const t=`===== ${this.options.name} - Logger started at ${this.options.utcTime?new Date().toUTCString():new Date} =====`;e.appendChild(document.createTextNode(t));const r=document.createElement("div");r.appendChild(e),r.appendChild(document.createElement("br")),r.appendChild(document.createElement("br")),this.$.container.appendChild(r),this.$.container.appendChild(this.$.log),this.parent.appendChild(this.$.container),this.initialized=!0}setLevel(e){this.options.level=e}setEnable(e=!0){this.initialized&&(this.options.enabled=e,this.$.log.style.color=e?"#fff":"#444")}clean(){if(this.initialized){for(;this.$.log.firstChild;)this.$.log.removeChild(this.$.log.firstChild);this.linesCount=0}}print(e,t=Kr.info.color,r=Kr.info.name){if(!this.initialized||!this.options.enabled)return;const n=this.$.container.scrollTop>this.$.container.scrollHeight-this.$.container.clientHeight-5,s=(e.length?e:"[empty]").split(/\r\n|\r|\n/);for(let a=0;a<s.length;a++){let l=document.createElement("div");l.setAttribute("style","color:#999;float:left;");let c=this._getTime();l.appendChild(document.createTextNode(`${c} `));let u=this.options.loggingFormat.replace("[LEVEL]",r).replace("[MESSAGE]",s[a]),h=document.createElement("div");h.setAttribute("style",`word-wrap:break-word;margin-left:6.0em;color: ${t}`),h.appendChild(document.createTextNode(u));let d=document.createElement("div");d.setAttribute("style","clear:both;");var o=document.createElement("div");for(o.appendChild(l),o.appendChild(h),o.appendChild(d),this.$.log.appendChild(o),this.linesCount++;this.linesCount>this.options.maxLogCount;)this.$.log.childNodes[0].remove(),this.linesCount--;n&&(this.$.container.scrollTop=this.$.container.scrollHeight)}}info(){this.options.level<=Kr.info.level&&this.print([].map.call(arguments,this._determineString).join(this.options.argumentsSeparator))}debug(){this.options.level<=Kr.debug.level&&this.print([].map.call(arguments,this._determineString).join(this.options.argumentsSeparator),Kr.debug.color,Kr.debug.name)}warning(){this.options.level<=Kr.warning.level&&this.print([].map.call(arguments,this._determineString).join(this.options.argumentsSeparator),Kr.warning.color,Kr.warning.name)}success(){this.options.level<=Kr.success.level&&this.print([].map.call(arguments,this._determineString).join(this.options.argumentsSeparator),Kr.success.color,Kr.success.name)}error(){this.options.level<=Kr.fatal.level&&this.print([].map.call(arguments,this._determineString).join(this.options.argumentsSeparator),Kr.fatal.color,Kr.fatal.name)}_getTime(){return(this.options.utcTime?new Date().toUTCString():new Date().toString()).match(/([01]?[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]/)[0]}_determineString(e){if(e===void 0)return"undefined";if(e===null)return"null";if(e instanceof Array)return JSON.stringify(e);switch(typeof e){default:case"object":return`${e.constructor?e.constructor.name:e.toString()} -> ${JSON.stringify(e)}`;case"function":return e.name||"[function]";case"number":case"string":case"boolean":return e}}};var z2e=Object.defineProperty,Nl=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&z2e(e,t,n),n};const r9=class extends ct{constructor(){super(...arguments),this.title="Robot Logger",this.maxLogCount=1e3,this.debug="",this.info="",this.success="",this.warning="",this.error="",this.level="info",this.disabled=!1,this.levels=["debug","info","success","warning","error"]}firstUpdated(){const e=this.renderRoot.querySelector("[part=logger]");this.logger=new U2e({name:this.title,maxLogCount:Math.max(0,this.maxLogCount),level:this.levels.indexOf(this.level),enabled:!this.disabled},e),this.logger.init()}updated(e){this.levels.forEach(t=>{e.has(t)&&this[t]&&this.logger[t](this[t])}),e.has("maxLogCount")&&(this.logger.options.maxLogCount=Math.max(0,this.maxLogCount)),e.has("level")&&this.logger.setLevel(this.levels.indexOf(this.level)),e.has("disabled")&&this.logger.setEnable(!this.disabled)}render(){return qe` <div part="logger"></div> `}};r9.styles=Ct`
    :host {
      display: inline-block;
      width: 500px;
      height: 400px;
      font-family: monospace;
      font-size: 14px;
    }

    [part='logger'] {
      width: 100%;
      height: 100%;
    }
  `;let Lo=r9;Nl([W({type:String})],Lo.prototype,"title");Nl([W({type:Number,attribute:"max-log-count"})],Lo.prototype,"maxLogCount");Nl([W({type:String})],Lo.prototype,"debug");Nl([W({type:String})],Lo.prototype,"info");Nl([W({type:String})],Lo.prototype,"success");Nl([W({type:String})],Lo.prototype,"warning");Nl([W({type:String})],Lo.prototype,"error");Nl([W({type:String})],Lo.prototype,"level");Nl([W({type:Boolean})],Lo.prototype,"disabled");customElements.get("frc-logger")||customElements.define("frc-logger",Lo);xt({tagName:"frc-logger",elementClass:Lo,react:yt});var F2e=Object.defineProperty,fv=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&F2e(e,t,n),n};function n9(i){const e=(i==null?void 0:i.getChildren())??{};return Object.values(e).filter(t=>{var r;return t.hasChildren()&&((r=t.getChildren()[".type"])==null?void 0:r.getSourceValue())==="line"}).map(t=>{const r=t.getChildren();return{angle:r.angle.getSourceValue()??0,color:r.color.getSourceValue()??"#ffffff",length:r.length.getSourceValue()??1,weight:r.weight.getSourceValue()??1,children:n9(t)}})}function B2e(i){const e=(i==null?void 0:i.getChildren())??{};return Object.values(e).filter(t=>t.hasChildren()).map(t=>({x:t.getChildren().x.getSourceValue()??0,y:t.getChildren().y.getSourceValue()??0,children:n9(t)}))}const s9=class extends ct{constructor(){super(...arguments),this.backgroundColor="#000020",this.dims=[3,3],this.roots=[],this.mechanism2d=this.getMechanism2d()}firstUpdated(){new ResizeObserver(()=>{this.resized()}).observe(this),requestAnimationFrame(()=>{this.updateMechanism2d()})}getMech2dSize(){const{width:e,height:t}=this.getBoundingClientRect(),[r,n]=this.dims;return n/r*e<t?[e,n/r*e]:[r/n*t,t]}resized(){this.requestUpdate()}getSize(){const{width:e}=this.getBoundingClientRect();return e}updated(e){e.has("backgroundColor")&&this._svg.style.setProperty("background-color",this.backgroundColor),e.has("dims")&&this.requestUpdate()}updateMechanism2d(){this.mechanism2d=this.getMechanism2d(),requestAnimationFrame(()=>{this.updateMechanism2d()})}getMechanism2d(){return{backgroundColor:this.backgroundColor,dims:this.dims,roots:this.roots}}render(){const[e,t]=this.getMech2dSize();return bi`
      <svg
        style="width: ${e}px; height: ${t}px; background: ${this.mechanism2d.backgroundColor}"
      >
        ${this.mechanism2d.roots.map(r=>this.renderMechanism2dRoot(r))}
      </svg>
    `}renderMechanism2dRoot(e){const[t,r]=this.dims,[n,s]=this.getMech2dSize(),o=e.x/t*n,a=e.y/r*s;return bi`
      <g style="transform: translate(${o}px, ${s-a}px)">
        ${e.children.map(l=>this.renderMechanism2dLine(l))}
      </g>
    `}renderMechanism2dLine(e){const[t]=this.dims,[r]=this.getMech2dSize(),n=r/t*e.length,s=e.angle*Math.PI/180,o=Math.cos(s)*n,a=-Math.sin(s)*n,l=Math.max(1,e.weight*2/3);return bi`
      <line stroke=${e.color} stroke-width=${l} x1="0" y1="0" x2="${o}px" y2="${a}px"  />
      <g style="transform: translate(${o}px, ${a}px) rotate(${-e.angle}deg)">
        ${e.children.map(c=>this.renderMechanism2dLine(c))}
      </g>
    `}};s9.styles=Ct`
    :host {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 300px;
      height: 300px;
    }

    svg {
      width: 100%;
      height: 100%;
    }
  `;let xd=s9;fv([W({type:String,attribute:"background-color"})],xd.prototype,"backgroundColor");fv([W({type:Array})],xd.prototype,"dims");fv([W({type:Array})],xd.prototype,"roots");fv([ri("svg")],xd.prototype,"_svg");fv([Ui()],xd.prototype,"mechanism2d");customElements.get("frc-mechanism2d")||customElements.define("frc-mechanism2d",xd);var V2e=Object.defineProperty,AS=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&V2e(e,t,n),n};const o9=class extends ct{constructor(){super(...arguments),this.backgroundColor="#000020",this.dims=[3,3],this.roots=[]}updateMechanism2d(){this.roots=this.source?B2e(this.source):[],requestAnimationFrame(()=>{this.updateMechanism2d()})}firstUpdated(){this.updateMechanism2d()}render(){return qe`
      <frc-mechanism2d
        .roots=${this.roots}
        .backgroundColor=${this.backgroundColor}
        .dims=${this.dims}
      ></frc-mechanism2d>
    `}};o9.styles=Ct`
    :host {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 300px;
      height: 300px;
    }

    frc-mechanism2d {
      width: 100%;
      height: 100%;
    }
  `;let mv=o9;AS([W({type:String,attribute:"background-color"})],mv.prototype,"backgroundColor");AS([W({type:Array})],mv.prototype,"dims");AS([W({type:Object})],mv.prototype,"source");AS([Ui()],mv.prototype,"roots");customElements.get("frc-mechanism2d-wrapper")||customElements.define("frc-mechanism2d-wrapper",mv);xt({tagName:"frc-mechanism2d",elementClass:xd,react:yt});/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function xc(i,e,t){return i?e(i):t==null?void 0:t(i)}var j2e=Object.defineProperty,gv=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&j2e(e,t,n),n};const H2e="m40-120 440-760 440 760H40Zm138-80h604L480-720 178-200Zm302-40q17 0 28.5-11.5T520-280q0-17-11.5-28.5T480-320q-17 0-28.5 11.5T440-280q0 17 11.5 28.5T480-240Zm-40-120h80v-200h-80v200Zm40-100Z",G2e="M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z",W2e="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z",a9=class extends ct{constructor(){super(...arguments),this.errors=[],this.warnings=[],this.infos=[],this.level="info",this.hideTitle=!1}render(){return qe`
      <div class="alerts-container">
        ${xc(!this.hideTitle,()=>qe` <header>Alerts</header> `)}
        <div class="alerts-list">
          ${this.errors.map(e=>qe`
              <div class="alert">
                <div class="icon">
                  <frc-icon
                    color="red"
                    svg-path=${G2e}
                    view-box="0 -960 960 960"
                  ></frc-icon>
                </div>
                <label>${e}</label>
              </div>
            `)}
          ${xc(this.level!=="error",()=>qe`
              ${this.warnings.map(e=>qe`
                  <div class="alert">
                    <div class="icon">
                      <frc-icon
                        color="yellow"
                        svg-path=${H2e}
                        view-box="0 -960 960 960"
                      ></frc-icon>
                    </div>
                    <label>${e}</label>
                  </div>
                `)}
            `)}
          ${xc(this.level==="info",()=>qe`
              ${this.infos.map(e=>qe`
                  <div class="alert">
                    <div class="icon">
                      <frc-icon
                        color="green"
                        svg-path=${W2e}
                        view-box="0 -960 960 960"
                      ></frc-icon>
                    </div>
                    <label>${e}</label>
                  </div>
                `)}
            `)}
        </div>
      </div>
    `}};a9.styles=Ct`
    :host {
      font-family: sans-serif;
      display: inline-block;
      width: 300px;
      height: auto;
      box-sizing: border-box;
      color: var(--frc-network-alerts-text-color, black);
    }

    .alerts-container {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    header {
      background: var(--frc-network-alerts-header-color, lightblue);
      padding: 10px 0;
      text-align: center;
      font-weight: bold;
    }

    .alerts-list {
      padding: 8px 5px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 9px;
      flex: 1;
      overflow-y: auto;
    }

    .alert {
      display: flex;
      align-items: center;
      gap: 9px;
    }

    .icon {
      width: 24px;
      height: 24px;
    }

    .alert label {
      flex: 1;
    }

    .icon frc-icon {
      width: 100%;
      height: 100%;
    }
  `;let wd=a9;gv([W({type:Array})],wd.prototype,"errors");gv([W({type:Array})],wd.prototype,"warnings");gv([W({type:Array})],wd.prototype,"infos");gv([W({type:String})],wd.prototype,"level");gv([W({type:Boolean,attribute:"hide-title"})],wd.prototype,"hideTitle");customElements.get("frc-network-alerts")||customElements.define("frc-network-alerts",wd);xt({tagName:"frc-network-alerts",elementClass:wd,react:yt});xt({tagName:"frc-number-bar",elementClass:Is,react:yt});var l9=i=>{throw TypeError(i)},q2e=(i,e,t)=>e.has(i)||l9("Cannot "+t),X2e=(i,e,t)=>e.has(i)?l9("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Y2e=(i,e,t)=>(q2e(i,e,"access private method"),t),K2e=Object.defineProperty,kS=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&K2e(e,t,n),n},Lk,c9;const u9=class extends ct{constructor(){super(...arguments),X2e(this,Lk),this.value=0,this.min=-1,this.max=1,this.blockIncrement=.05}onChange(e){this.value=parseFloat(e.target.value),Y2e(this,Lk,c9).call(this)}firstUpdated(){setTimeout(()=>{const e=this.renderRoot.querySelector("#slider");e&&(e.value=this.value)})}render(){const e=Math.min(this.min,this.max),t=Math.max(this.min,this.max),r=Math.max(e,Math.min(this.value,t));return qe`
      <div class="slider-container">
        <input
          id="slider"
          type="range"
          .value="${r.toString()}"
          min="${e}"
          max="${t}"
          step="${this.blockIncrement}"
          @change="${this.onChange}"
        />

        <frc-axis ticks="5" min=${e} max=${t}></frc-axis>
      </div>
    `}};Lk=new WeakSet,c9=function(){this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0,composed:!0}))},u9.styles=Ct`
    :host {
      display: inline-block;
      height: 50px;
      width: 300px;
    }

    .slider-container {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 15px;
    }

    input {
      width: 100%;
    }

    table-axis {
      width: calc(85% - 14px);
      max-width: calc(100% - 74px);
      display: block;
    }
  `;let ng=u9;kS([W({type:Number})],ng.prototype,"value");kS([W({type:Number})],ng.prototype,"min");kS([W({type:Number})],ng.prototype,"max");kS([W({type:Number,attribute:"block-increment"})],ng.prototype,"blockIncrement");customElements.get("frc-number-slider")||customElements.define("frc-number-slider",ng);xt({tagName:"frc-number-slider",elementClass:ng,react:yt,events:{onchange:"change"}});var Z2e=Object.getPrototypeOf,J2e=Reflect.get,Q2e=(i,e,t)=>J2e(Z2e(i),t,e),eTe=Object.defineProperty,du=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&eTe(e,t,n),n};const Cx=class extends Is{constructor(){super(...arguments),this.value=0,this.min=0,this.max=5,this.center=0,this.precision=2,this.hideText=!1,this.numTickMarks=3,this.unit="V"}};Cx.styles=[...Q2e(Cx,Cx,"styles"),Ct`
      [part='bar']::part(foreground) {
        background: var(--frc-voltage-view-foreground-color, #ffbd2f);
      }
    `];let ha=Cx;du([W({type:Number})],ha.prototype,"value");du([W({type:Number})],ha.prototype,"min");du([W({type:Number})],ha.prototype,"max");du([W({type:Number})],ha.prototype,"center");du([W({type:Number})],ha.prototype,"precision");du([W({type:Boolean,attribute:"hide-text"})],ha.prototype,"hideText");du([W({type:Number,attribute:"num-tick-marks"})],ha.prototype,"numTickMarks");du([W({type:String})],ha.prototype,"unit");customElements.get("frc-voltage-view")||customElements.define("frc-voltage-view",ha);var tTe=Object.defineProperty,jL=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&tTe(e,t,n),n};function vb(i,e){const t=[];for(let r=i;r<e;r+=1)t.push(r);return t}const h9=class extends ct{constructor(){super(...arguments),this.voltage=0,this.totalCurrent=0,this.channels=Array(16).fill(0)}renderChannel(e){return qe`
      <frc-number-bar
        class="channel"
        part="channel"
        value=${this.channels[e]??0}
        min="0"
        max="40"
        center="0"
        precision="2"
        ?hide-text="${!1}"
        num-tick-marks="0"
        unit="A"
      ></frc-number-bar>
    `}render(){return qe`
      <div part="channels">
        ${vb(0,8).map(e=>qe`
            <label part="channel-label">
              <slot name="${`channel-label${e}`}">Ch. ${e}</slot>
            </label>
          `)}
        ${vb(0,8).map(e=>qe` ${this.renderChannel(e)} `)}
        ${vb(8,16).map(e=>qe`
            <label part="channel-label">
              <slot name="${`channel-label${e}`}">Ch. ${e}</slot>
            </label>
          `)}
        ${vb(8,16).map(e=>qe` ${this.renderChannel(e)} `)}
      </div>
      <div part="voltage-and-total-current">
        <label part="voltage-label">
          <slot name="voltage-label">Voltage</slot>
        </label>
        <label part="total-current-label">
          <slot name="total-current">Total Current</slot>
        </label>
        <frc-voltage-view
          class="voltage"
          part="voltage"
          value="${this.voltage}"
          min="0"
          max="15"
          center="0"
          precision="2"
          ?hide-text="${!1}"
          num-tick-marks="0"
        ></frc-voltage-view>
        <frc-number-bar
          class="total-current"
          part="total-current"
          value="${this.totalCurrent}"
          min="0"
          max="500"
          center="0"
          precision="2"
          ?hide-text="${!1}"
          num-tick-marks="0"
          unit="A"
        ></frc-number-bar>
      </div>
    `}};h9.styles=Ct`
    :host {
      display: inline-block;
      width: 350px;
      margin: 5px;
      color: var(--frc-label-text-color, black);
      font-family: sans-serif;
      font-size: 16px;
    }

    [part='channels'] {
      display: grid;
      grid-auto-flow: column;
      grid-template-columns: min-content 1fr min-content 1fr;
      grid-template-rows: auto auto auto auto auto auto auto auto;
      width: 100%;
      height: auto;
      align-items: center;
      gap: 3px;
    }

    .channel,
    .voltage,
    .total-current {
      width: auto;
    }

    [part='channel-label'] {
      padding-left: 5px;
      text-align: right;
      white-space: nowrap;
    }

    [part='voltage-and-total-current'] {
      margin-top: 5px;
      display: grid;
      grid-auto-flow: column;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto;
      column-gap: 10px;
      width: 100%;
      height: auto;
      align-items: center;
      gap: 3px;
    }

    [part='voltage-and-total-current'] {
      white-space: nowrap;
    }
  `;let _v=h9;jL([W({type:Number})],_v.prototype,"voltage");jL([W({type:Number,attribute:"total-current"})],_v.prototype,"totalCurrent");jL([W({type:Array})],_v.prototype,"channels");customElements.get("frc-pdp")||customElements.define("frc-pdp",_v);xt({tagName:"frc-pdp",elementClass:_v,react:yt});var d9=i=>{throw TypeError(i)},iTe=(i,e,t)=>e.has(i)||d9("Cannot "+t),HL=(i,e,t)=>e.has(i)?d9("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Gn=(i,e,t)=>(iTe(i,e,"access private method"),t),rTe=Object.defineProperty,yv=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&rTe(e,t,n),n},Gu,Vp;const p9=class extends ct{constructor(){super(...arguments),HL(this,Gu),this.p=0,this.i=0,this.d=0,this.setpoint=0,this.running=!1}onPChange(i){this.p=parseFloat(i.target.value),Gn(this,Gu,Vp).call(this)}onIChange(i){this.i=parseFloat(i.target.value),Gn(this,Gu,Vp).call(this)}onDChange(i){this.d=parseFloat(i.target.value),Gn(this,Gu,Vp).call(this)}onSetpointChange(i){this.setpoint=parseFloat(i.target.value),Gn(this,Gu,Vp).call(this)}onRunningClick(){this.running=!this.running,Gn(this,Gu,Vp).call(this)}render(){return qe`
      <input
        type="checkbox"
        id="running"
        .checked=${this.running}
        @click=${this.onRunningClick}
      />
      <label for="running">Running</label>
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Setpoint</label>
      <input
        type="number"
        .value=${this.setpoint}
        @change=${this.onSetpointChange}
      />
    `}};Gu=new WeakSet,Vp=function(){this.dispatchEvent(new CustomEvent("change",{detail:{p:this.p,i:this.i,d:this.d,setpoint:this.setpoint,running:this.running}}))},p9.styles=Ct`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      width: 150px;
      height: auto;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input[type='number'] {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }

    input[type='checkbox'] {
      justify-self: right;
      margin: 0;
      width: 16px;
      height: 16px;
    }

    label[for='running'] {
      justify-self: left;
    }
  `;let Md=p9;yv([W({type:Number})],Md.prototype,"p");yv([W({type:Number})],Md.prototype,"i");yv([W({type:Number})],Md.prototype,"d");yv([W({type:Number})],Md.prototype,"setpoint");yv([W({type:Boolean,reflect:!0})],Md.prototype,"running");customElements.get("frc-pid-command")||customElements.define("frc-pid-command",Md);var nTe=Object.defineProperty,CS=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&nTe(e,t,n),n},jp,W0;const f9=class extends ct{constructor(){super(...arguments),HL(this,jp),this.p=0,this.i=0,this.d=0,this.setpoint=0}onPChange(i){this.p=parseFloat(i.target.value),Gn(this,jp,W0).call(this)}onIChange(i){this.i=parseFloat(i.target.value),Gn(this,jp,W0).call(this)}onDChange(i){this.d=parseFloat(i.target.value),Gn(this,jp,W0).call(this)}onSetpointChange(i){this.setpoint=parseFloat(i.target.value),Gn(this,jp,W0).call(this)}render(){return qe`
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Setpoint</label>
      <input
        type="number"
        .value=${this.setpoint}
        @change=${this.onSetpointChange}
      />
    `}};jp=new WeakSet,W0=function(){this.dispatchEvent(new CustomEvent("change",{detail:{p:this.p,i:this.i,d:this.d,setpoint:this.setpoint}}))},f9.styles=Ct`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      height: auto;
      width: 150px;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }
  `;let sg=f9;CS([W({type:Number})],sg.prototype,"p");CS([W({type:Number})],sg.prototype,"i");CS([W({type:Number})],sg.prototype,"d");CS([W({type:Number})],sg.prototype,"setpoint");customElements.get("frc-pid-controller")||customElements.define("frc-pid-controller",sg);var sTe=Object.defineProperty,$S=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&sTe(e,t,n),n},Hp,q0;const m9=class extends ct{constructor(){super(...arguments),HL(this,Hp),this.p=0,this.i=0,this.d=0,this.goal=0}onPChange(e){this.p=parseFloat(e.target.value),Gn(this,Hp,q0).call(this)}onIChange(e){this.i=parseFloat(e.target.value),Gn(this,Hp,q0).call(this)}onDChange(e){this.d=parseFloat(e.target.value),Gn(this,Hp,q0).call(this)}onGoalChange(e){this.goal=parseFloat(e.target.value),Gn(this,Hp,q0).call(this)}render(){return qe`
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Goal</label>
      <input type="number" .value=${this.goal} @change=${this.onGoalChange} />
    `}};Hp=new WeakSet,q0=function(){this.dispatchEvent(new CustomEvent("change",{detail:{p:this.p,i:this.i,d:this.d,goal:this.goal}}))},m9.styles=Ct`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      height: auto;
      width: 150px;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }
  `;let og=m9;$S([W({type:Number})],og.prototype,"p");$S([W({type:Number})],og.prototype,"i");$S([W({type:Number})],og.prototype,"d");$S([W({type:Number})],og.prototype,"goal");customElements.get("frc-profiled-pid-controller")||customElements.define("frc-profiled-pid-controller",og);xt({tagName:"frc-pid-command",elementClass:Md,react:yt,events:{onchange:"change"}});xt({tagName:"frc-pid-controller",elementClass:sg,react:yt,events:{onchange:"change"}});xt({tagName:"frc-profiled-pid-controller",elementClass:og,react:yt,events:{onchange:"change"}});var g9=i=>{throw TypeError(i)},oTe=(i,e,t)=>e.has(i)||g9("Cannot "+t),aTe=(i,e,t)=>e.has(i)?g9("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),bU=(i,e,t)=>(oTe(i,e,"access private method"),t),lTe=Object.defineProperty,GL=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&lTe(e,t,n),n},$x,_9,y9;const v9=class extends ct{constructor(){super(...arguments),aTe(this,$x),this.options=["On","Off"],this.value="",this.direction="vertical"}async setValue(e){this.value=e}updated(e){e.has("options")&&!this.options.includes(this.value)&&(this.value=this.options[0]??""),e.has("value")&&bU(this,$x,_9).call(this),e.has("options")&&bU(this,$x,y9).call(this),e.has("direction")&&this.style.setProperty("flex-direction",this.direction==="vertical"?"column":"row")}render(){return qe`
      ${this.options.map(e=>qe`
          <button
            class="${this.value===e?"toggled":""}"
            @click="${()=>this.setValue(e)}"
          >
            ${e}
          </button>
        `)}
    `}};$x=new WeakSet,_9=function(){this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0,composed:!0}))},y9=function(){this.dispatchEvent(new CustomEvent("optionsUpdate",{detail:{options:this.options},bubbles:!0,composed:!0}))},v9.styles=Ct`
    :host {
      display: inline-flex;
      flex-direction: column;
      width: 150px;
      height: 300px;
      gap: 0;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    button {
      width: 100%;
      height: 100%;
      margin: 0;
      border: none;
      font-size: inherit;
      font-family: inherit;
      letter-spacing: inherit;
      background: var(--frc-button-background-color, rgb(230, 230, 230));
      color: var(--frc-button-text-color, black);
      flex: 1;
    }

    .toggled {
      background: var(--frc-button-toggled-background-color, black);
      color: var(--frc-button-toggled-text-color, white);
      font-weight: bold;
    }

    [part='button'] {
      border-radius: 0;
      margin: 0;
      flex: 1;
      font-size: inherit;
      height: 100%;
      padding: 0;
    }
  `;let vv=v9;GL([W({type:Array})],vv.prototype,"options");GL([W({type:String})],vv.prototype,"value");GL([W({type:String})],vv.prototype,"direction");customElements.get("frc-toggle-group")||customElements.define("frc-toggle-group",vv);var b9=i=>{throw TypeError(i)},cTe=(i,e,t)=>e.has(i)||b9("Cannot "+t),uTe=(i,e,t)=>e.has(i)?b9("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),hTe=(i,e,t)=>(cTe(i,e,"access private method"),t),dTe=Object.defineProperty,x9=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&dTe(e,t,n),n};const pTe=["Off","On","Forward","Reverse"];var Rk,w9;const M9=class extends ct{constructor(){super(...arguments),uTe(this,Rk),this.value="Off",this.direction="vertical"}render(){return qe`
      <frc-toggle-group
        @change=${hTe(this,Rk,w9)}
        .options=${pTe}
        value=${this.value}
        direction=${this.direction}
      ></frc-toggle-group>
    `}};Rk=new WeakSet,w9=function(i){this.value=i.detail.value},M9.styles=Ct`
    :host {
      display: inline-block;
      width: 150px;
      height: 300px;
    }

    frc-toggle-group {
      width: 100%;
      height: 100%;
    }
  `;let LS=M9;x9([W({type:String})],LS.prototype,"value");x9([W({type:String})],LS.prototype,"direction");customElements.get("frc-relay")||customElements.define("frc-relay",LS);xt({tagName:"frc-relay",elementClass:LS,react:yt,events:{onchange:"change"}});var S9=i=>{throw TypeError(i)},fTe=(i,e,t)=>e.has(i)||S9("Cannot "+t),T9=(i,e,t)=>e.has(i)?S9("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Pk=(i,e,t)=>(fTe(i,e,"access private method"),t),mTe=Object.defineProperty,bv=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&mTe(e,t,n),n},Nk,E9;const A9=class extends ct{constructor(){super(...arguments),T9(this,Nk),this.nodeId=1,this.selected=!1,this.cones=0,this.cubes=0,this.background=""}updated(i){(i.has("selected")||i.has("nodeId"))&&Pk(this,Nk,E9).call(this)}render(){return qe`
      <div style="text-align: center; margin-block:auto;">${this.nodeId}</div>

      <!-- empty on:click binding above passes click events to be bound on the Node component -->
      ${bi`
        <svg
          viewBox="-2 -2 28 28"
          style="margin-right: 8px; width:100%; height:100%; pointer-events:none"
        >
          ${xc(this.cubes>1,()=>bi`
              <polygon
                points="8,8 8,20 20,20, 20,8"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
              <polygon
                points="4,4 4,16 16,16, 16,4"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `)}
          ${xc(this.cubes===1,()=>bi`
              <polygon
                points="6,6 6,18 18,18, 18,6"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `)}
          ${xc(this.cones>1,()=>bi`
              <polygon
                points="13,8 11,8 8,22 5,22 19,22 16,22"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
              <polygon
                points="13,4 11,4 8,18 5,18 19,18 16,18"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `)}
          
          ${xc(this.cones===1,()=>bi`
              <polygon
                points="13,6 11,6 8,20 5,20 19,20 16,20"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `)}  
        </svg>
      `}
    `}};Nk=new WeakSet,E9=function(){this.selected?this.background="green":this.nodeId>=1&&this.nodeId<=9?this.background="lightgray":(this.nodeId-1)%3===1?this.background="purple":this.background="yellow",this.style.setProperty("background-color",this.background)},A9.styles=Ct`
    :host {
      display: block;
      color: black;
      font-size: 2em;
      height: 100%;
      flex-grow: 1;
      border: 1px solid black;
      box-sizing: border-box;
    }
  `;let ag=A9;bv([W({type:Number,attribute:"node-id"})],ag.prototype,"nodeId");bv([W({type:Boolean})],ag.prototype,"selected");bv([W({type:Number})],ag.prototype,"cones");bv([W({type:Number})],ag.prototype,"cubes");bv([Ui()],ag.prototype,"background");customElements.get("frc-scoring-grid-node")||customElements.define("frc-scoring-grid-node",ag);var gTe=Object.defineProperty,Sd=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&gTe(e,t,n),n};function jE(i,e=!1){return e?9-(i-1)%9:1+(i-1)%9}function xU(i,e=!1){return e?3-Math.floor((i-1)/9):Math.floor((i-1)/9)+1}function _Te(i,e){return Array.from(Array(e+1).keys()).slice(i)}var Lx,k9,C9;const $9=class extends ct{constructor(){super(...arguments),T9(this,Lx),this.selection=0,this.cubesScored=[],this.conesScored=[],this.hideLinks=!1,this.reverseRow=!1,this.reverseCol=!1,this.leftOfLinks=[]}updated(e){(e.has("cubesScored")||e.has("conesScored"))&&Pk(this,Lx,C9).call(this)}renderLinks(){return this.hideLinks?qe``:qe`
      ${this.leftOfLinks.map(e=>qe`
          <div
            class="link"
            style=${df({gridColumn:`${Math.min(jE(e,this.reverseCol),jE(e+2,this.reverseCol))} / span 3`,gridRow:xU(e,this.reverseRow)})}
          ></div>
        `)}
    `}render(){return qe`
      <div class="grid">
        ${_Te(1,27).map(e=>qe`
            <div
              style=${df({gridColumn:jE(e,this.reverseCol),gridRow:xU(e,this.reverseRow)})}
            >
              <frc-scoring-grid-node
                node-id=${e}
                ?selected=${this.selection===e}
                @click=${()=>{Pk(this,Lx,k9).call(this,e)}}
                cubes=${this.cubesScored.filter(t=>t===e).length}
                cones=${this.conesScored.filter(t=>t===e).length}
              >
              </frc-scoring-grid-node>
            </div>
          `)}
        ${this.renderLinks()}
      </div>
    `}};Lx=new WeakSet,k9=function(i){this.selection===i?this.selection=0:this.selection=i;const e=new CustomEvent("select",{bubbles:!0,composed:!0,detail:{nodeId:this.selection}});this.dispatchEvent(e)},C9=function(){const i=[],e=this.cubesScored.concat(this.conesScored);for(let t=0;t<3;t+=1)for(let r=1;r<=7;r+=1)e.includes(t*9+r)&&e.includes(t*9+r+1)&&e.includes(t*9+r+2)&&(i.push(t*9+r),r+=2);this.leftOfLinks=i},$9.styles=Ct`
    :host {
      display: inline-block;
      width: 550px;
      height: 380px;
    }

    .grid {
      display:grid;
      grid-template-columns: repeat(9, calc(100% / 9));
      grid-template-rows: repeat(3, calc(100% / 3));
      height:100%;
      width:100%;
      flex-direction:row-reverse;
      grid-auto-flow: dense;"
    }

    .link {
      border: 5px solid black;
      border-radius: 10px;
      margin: 5px;
      box-sizing: border-box;
      pointer-events: none;
    }
  `;let Il=$9;Sd([W({type:Number})],Il.prototype,"selection");Sd([W({type:Array,attribute:"cubes-scored"})],Il.prototype,"cubesScored");Sd([W({type:Array,attribute:"cones-scored"})],Il.prototype,"conesScored");Sd([W({type:Boolean,attribute:"hide-links"})],Il.prototype,"hideLinks");Sd([W({type:Boolean,attribute:"reverse-row"})],Il.prototype,"reverseRow");Sd([W({type:Boolean,attribute:"reverse-col"})],Il.prototype,"reverseCol");Sd([Ui()],Il.prototype,"leftOfLinks");customElements.get("frc-scoring-grid")||customElements.define("frc-scoring-grid",Il);xt({tagName:"frc-scoring-grid",elementClass:Il,react:yt,events:{onselect:"select"}});var L9=i=>{throw TypeError(i)},yTe=(i,e,t)=>e.has(i)||L9("Cannot "+t),R9=(i,e,t)=>e.has(i)?L9("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Qw=(i,e,t)=>(yTe(i,e,"access private method"),t),vTe=Object.defineProperty,lg=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&vTe(e,t,n),n},Ik,P9;const N9=class extends ct{constructor(){super(...arguments),R9(this,Ik),this.options=[],this.selected="",this.default="",this.active="",this.label="Auto Choices"}onChange(){this.selected=this.selectElement.value,Qw(this,Ik,P9).call(this)}render(){return qe`
      <div class="container">
        ${this.label?qe` <p>${this.label}</p> `:""}
        <div class="input-container">
          <label>
            <select @change=${this.onChange} .value=${this.selected}>
              ${this.options.map(e=>qe`
                  <option value=${e} ?selected=${this.selected===e}>
                    ${e}
                  </option>
                `)}
            </select>
          </label>
          ${this.options.length>0?qe`
                ${this.selected===this.active?qe`<frc-icon icon="check" color="green"></frc-icon>`:qe`<frc-icon icon="close" color="red"></frc-icon>`}
              `:""}
        </div>
      </div>
    `}};Ik=new WeakSet,P9=function(){this.dispatchEvent(new CustomEvent("change",{detail:{selected:this.selected},bubbles:!0,composed:!0}))},N9.styles=Ct`
    :host {
      display: inline-block;
      min-width: 220px;
      font-family: sans-serif;
    }

    .input-container {
      display: flex;
      align-items: flex-end;
      gap: 7px;
      width: 100%;
    }

    frc-icon {
      width: 20px;
      height: 20px;
      margin-bottom: 12px;
    }

    label {
      position: relative;
      display: inline-block;
      width: 100%;
    }

    label:after {
      content: ' ';
      position: absolute;
      right: 15px;
      top: 46%;
      margin-top: -3px;
      z-index: 2;
      pointer-events: none;
      width: 0;
      height: 0;
      border-style: solid;
      border-width: 6.9px 4px 0 4px;
      border-color: #aaa transparent transparent transparent;
      pointer-events: none;
    }

    select {
      width: 100%;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      outline: 0 none;

      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      padding: 0 30px 0 10px;

      border: 1px solid #e0e0e0;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      background: #fff;
      margin: 0 5px 5px 0;
    }

    p {
      color: var(--frc-sendable-chooser-label-color, black);
      margin: 0;
      font-size: 13px;
      padding-left: 3px;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
  `;let pu=N9;lg([W({type:Array})],pu.prototype,"options");lg([W({type:String,reflect:!0})],pu.prototype,"selected");lg([W({type:String})],pu.prototype,"default");lg([W({type:String})],pu.prototype,"active");lg([W({type:String,reflect:!0})],pu.prototype,"label");lg([ri("select",!0)],pu.prototype,"selectElement");customElements.get("frc-sendable-chooser")||customElements.define("frc-sendable-chooser",pu);var bTe=Object.defineProperty,Dl=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&bTe(e,t,n),n},$_,Dk,I9;const D9=class extends ct{constructor(){super(...arguments),R9(this,$_),this.options=[],this.selected="",this.default="",this.active="",this.label="Auto Choices",this.sourceProvider="",this.sourceKey=""}updated(e){e.has("default")&&(this.options.includes(this.selected)||Qw(this,$_,Dk).call(this))}render(){return qe`
      <frc-sendable-chooser
        @change=${Qw(this,$_,I9)}
        .options=${this.options}
        .selected=${this.selected}
        .default=${this.default}
        .active=${this.active}
        .label=${this.label}
      ></frc-sendable-chooser>
    `}};$_=new WeakSet,Dk=function(){const{provider:i,store:e,sourceProvider:t,sourceKey:r,default:n}=this;if(!i||!e||!t||!r)return;const s=e.getSource(t,r),o=e.getSource(t,`${r}/selected`);if(s!=null&&s.hasChildren()&&!(o!=null&&o.hasValue())){const a=this.options.includes(this.selected)?this.selected:n;i.userUpdate(`${r}/selected`,a)}},I9=function(i){this.selected=i.detail.selected,Qw(this,$_,Dk).call(this)},D9.styles=Ct`
    :host {
      display: inline-block;
      min-width: 220px;
      font-family: sans-serif;
    }

    frc-sendable-chooser {
      width: 100%;
      height: 100%;
    }
  `;let da=D9;Dl([W({type:Array})],da.prototype,"options");Dl([W({type:String,reflect:!0})],da.prototype,"selected");Dl([W({type:String})],da.prototype,"default");Dl([W({type:String})],da.prototype,"active");Dl([W({type:String,reflect:!0})],da.prototype,"label");Dl([W({type:Object,attribute:!1})],da.prototype,"provider");Dl([W({type:Object,attribute:!1})],da.prototype,"store");Dl([W({type:String,attribute:"source-provider"})],da.prototype,"sourceProvider");Dl([W({type:String,attribute:"source-key"})],da.prototype,"sourceKey");customElements.get("frc-sendable-chooser-wrapper")||customElements.define("frc-sendable-chooser-wrapper",da);const xTe=xt({tagName:"frc-sendable-chooser",elementClass:pu,react:yt,events:{onchange:"change"}}),wTe=xt({tagName:"frc-toggle-button",elementClass:nv,react:yt,events:{ontoggle:"toggle"}});xt({tagName:"frc-toggle-group",elementClass:vv,react:yt,events:{onchange:"change"}});var MTe=Object.defineProperty,STe=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&MTe(e,t,n),n};const O9=class extends ct{constructor(){super(...arguments),this.toggled=!1}firstUpdated(){new ResizeObserver(()=>this.resized()).observe(this)}resized(){const e=this.getBoundingClientRect(),{width:t,height:r}=e,n=this.renderRoot.querySelector("[part=switch]");n&&(n.style.borderRadius=`${t}px`,n.style.setProperty("--circle-width",`${r*.8}px`),n.style.setProperty("--circle-height",`${r*.8}px`),n.style.setProperty("--circle-left",`${t/2-r*.8}px`),n.style.setProperty("--circle-top",`${r*.1}px`),n.style.setProperty("--circle-translate-x",`${t-r}px`))}onClick(){this.toggled=!this.toggled;const e=new CustomEvent("toggle",{detail:{toggled:this.toggled},bubbles:!0,composed:!0});this.dispatchEvent(e)}render(){return qe`
      <label class="switch" @click="${this.onClick}">
        <input type="checkbox" .checked="${this.toggled}" disabled />
        <span part="switch">
          <span part="knob"></span>
        </span>
      </label>
    `}};O9.styles=Ct`
    :host {
      display: inline-block;
      width: 60px;
      height: 34px;
    }
    .switch {
      position: relative;
      display: inline-block;
      width: 100%;
      height: 100%;
      margin-bottom: 0;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    [part='switch'] {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--frc-toggle-switch-color, #ccc);
      -webkit-transition: 0.4s;
      transition: 0.4s;
    }
    [part='knob'] {
      position: absolute;
      display: inline-block;
      content: '';
      height: var(--circle-height);
      width: var(--circle-width);
      left: var(--circle-top);
      top: var(--circle-top);
      background-color: white;
      -webkit-transition: 0.4s;
      transition: 0.4s;
      border-radius: 50%;
    }
    input:checked + [part='switch'] {
      background-color: #2196f3;
    }
    input:focus + [part='switch'] {
      box-shadow: 0 0 1px #2196f3;
    }
    input:checked + [part='switch'] [part='knob'] {
      transform: translateX(var(--circle-translate-x));
    }
  `;let WL=O9;STe([W({type:Boolean})],WL.prototype,"toggled");customElements.get("frc-toggle-switch")||customElements.define("frc-toggle-switch",WL);xt({tagName:"frc-toggle-switch",elementClass:WL,react:yt,events:{ontoggle:"toggle"}});xt({tagName:"frc-voltage-view",elementClass:ha,react:yt});var U9=i=>{throw TypeError(i)},qL=(i,e,t)=>e.has(i)||U9("Cannot "+t),Ok=(i,e,t)=>(qL(i,e,"read from private field"),t?t.call(i):e.get(i)),Rx=(i,e,t)=>e.has(i)?U9("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),Uk=(i,e,t,r)=>(qL(i,e,"write to private field"),r?r.call(i,t):e.set(i,t),t),vs=(i,e,t)=>(qL(i,e,"access private method"),t),TTe=Object.defineProperty,RS=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&TTe(e,t,n),n},io,wU,z9,xp,zk;const F9=class extends ct{constructor(){super(...arguments),Rx(this,io),this.sourceRoot="",this.preferences={},this.search="",this.hideTitle=!1}render(){return qe`
      <div class="container">
        ${xc(!this.hideTitle,()=>qe` <header>Preferences</header> `)}

        <div class="search-input">
          <input
            placeholder="Search..."
            .value=${this.search}
            @input=${i=>{this.search=i.target.value,vs(this,io,z9).call(this)}}
          />
        </div>
        <div class="preferences-container">
          <div class="preferences">${vs(this,io,zk).call(this,this.preferences)}</div>
        </div>
      </div>
    `}};io=new WeakSet,wU=function(i,e){this.dispatchEvent(new CustomEvent("change",{detail:{property:i,value:e},bubbles:!0,composed:!0}))},z9=function(){this.dispatchEvent(new CustomEvent("search",{detail:{search:this.search},bubbles:!0,composed:!0}))},xp=function(i,e,t,r){t[r]=e,vs(this,io,wU).call(this,i,e),this.requestUpdate()},zk=function(i,e){const t=Object.entries(i).filter(([r,n])=>{const s=typeof e<"u"?[e,r].join("/"):r;return r.startsWith(".")?!1:!this.search||typeof n=="object"?!0:s.toLowerCase().includes(this.search.toLowerCase())});return qe`
      ${t.map(([r,n])=>{const s=typeof e<"u"?[e,r].join("/"):r;return typeof n=="boolean"?qe`
            <label title=${s}>${s}</label>
            <input
              type="checkbox"
              .checked=${n}
              @change=${o=>{vs(this,io,xp).call(this,s,o.target.checked,i,r)}}
            />
          `:typeof n=="number"?qe`
            <label title=${s}>${s}</label>
            <div class="number-input">
              <button
                @click=${()=>{vs(this,io,xp).call(this,s,n-1,i,r)}}
              >
                -
              </button>
              <input
                type="number"
                .value=${n}
                @change=${o=>{vs(this,io,xp).call(this,s,parseFloat(o.target.value),i,r)}}
              />
              <button
                @click=${()=>{vs(this,io,xp).call(this,s,n+1,i,r)}}
              >
                +
              </button>
            </div>
          `:typeof n=="string"?qe`
            <label title=${s}>${s}</label>
            <input
              type="text"
              .value=${n}
              @change=${o=>{vs(this,io,xp).call(this,s,o.target.value,i,r)}}
            />
          `:vs(this,io,zk).call(this,n,s)})}
    `},F9.styles=Ct`
    :host {
      display: inline-block;
      width: 250px;
      height: 250px;
      font-family: sans-serif;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 3px;
      height: 100%;
      width: 100%;
    }

    header {
      background: var(--frc-preferences-header-background-color, lightblue);
      color: var(--frc-preferences-label-color, black);
      text-align: center;
      padding: 5px 3px;
      border-radius: 3px;
      margin: 0 3px;
      font-size: 15px;
    }

    .search-input {
      padding: 0 3px;
    }

    .preferences-container {
      flex: 1;
      overflow: auto;
      width: 100%;
      box-sizing: border-box;

      .preferences {
        padding: 3px;
        display: inline-grid;
        grid-template-columns: repeat(2, 1fr);
        column-gap: 8px;
        row-gap: 5px;
        align-items: center;
        justify-items: start;
        font-family: sans-serif;
        box-sizing: border-box;
      }
    }

    input::placeholder {
      color: var(--frc-preferences-placeholder-text-color, #888);
    }

    input:not([type='checkbox']) {
      width: 100%;
      border: none;
      outline: none;
      padding: 2px 4px;
      box-sizing: border-box;
      border-radius: 2px;
    }

    input[type='checkbox'] {
      width: 20px;
      height: 20px;
      appearance: none;
      -webkit-appearance: none;
      display: flex;
      align-content: center;
      justify-content: center;
      font-size: 2rem;
      padding: 0.1rem;
      border-radius: 3px;
    }

    input[type='checkbox']::before {
      content: ' ';
      /* https://yoksel.github.io/url-encoder/ */
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 -960 960 960' width='24' style='&%2310; fill: white;&%2310;'%3E%3Cpath d='M382-218 130-470l75-75 177 177 375-375 75 75-450 450Z'/%3E%3C/svg%3E");
      width: 100%;
      background-size: 100% 100%;
      width: 100%;
      height: 100%;
      transform-origin: bottom left;
      transform: scale(0);
    }

    input[type='checkbox']:checked::before {
      transform: scale(1);
    }

    input[type='checkbox']:checked {
      background: #0c6ce9;
    }

    input {
      margin: 0;
      box-sizing: border-box;
      color: var(--frc-preferences-input-text-color, black);
      background: var(
        --frc-preferences-input-background-color,
        rgba(0, 0, 0, 0.1)
      );
    }

    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    /* Firefox */
    input[type='number'] {
      -moz-appearance: textfield;
    }

    .number-input {
      display: flex;
      background: var(
        --frc-preferences-input-background-color,
        rgba(0, 0, 0, 0.1)
      );
      box-sizing: border-box;
      height: 20px;
      border-radius: 2px;

      button {
        padding: 0;
        height: 100%;
        width: 20px;
        border: none;
        cursor: pointer;
        background: none;
        line-height: 20px;
        font-size: 15px;
        color: var(--frc-preferences-input-button-text-color, #444);
      }

      input {
        flex: 1;
        background: none;
        text-align: center;
      }
    }

    label {
      color: var(--frc-preferences-label-color, black);
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      width: 100%;
    }
  `;let cg=F9;RS([W({type:String,attribute:"source-root"})],cg.prototype,"sourceRoot");RS([W({type:Object})],cg.prototype,"preferences");RS([W({type:String})],cg.prototype,"search");RS([W({type:Boolean,attribute:"hide-title"})],cg.prototype,"hideTitle");customElements.get("frc-preferences")||customElements.define("frc-preferences",cg);var ETe=Object.defineProperty,Td=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&ETe(e,t,n),n},L_,R_,X0,B9,V9,j9;const H9=class extends ct{constructor(){super(...arguments),Rx(this,X0),Rx(this,L_),Rx(this,R_),this.search="",this.hideTitle=!1,this.sourceKey="",this.sourceProvider="",Uk(this,L_,{})}updated(i){(i.has("sourceProvider")||i.has("sourceKey")||i.has("store"))&&vs(this,X0,j9).call(this)}disconnectedCallback(){var i;super.disconnectedCallback(),(i=Ok(this,R_))==null||i.call(this)}render(){return qe`
      <frc-preferences
        @change=${i=>vs(this,X0,B9).call(this,i)}
        @search=${i=>vs(this,X0,V9).call(this,i)}
        source-root=${this.sourceKey}
        search=${this.search}
        ?hide-title=${this.hideTitle}
        .preferences=${Ok(this,L_)}
      ></frc-preferences>
    `}};L_=new WeakMap,R_=new WeakMap,X0=new WeakSet,B9=function(i){var e;const{property:t,value:r}=i.detail;(e=this.provider)==null||e.userUpdate([this.sourceKey,t].join("/"),r)},V9=function(i){const{search:e}=i.detail;this.search=e},j9=function(){var i,e;(i=Ok(this,R_))==null||i.call(this),Uk(this,R_,(e=this.store)==null?void 0:e.subscribe(this.sourceProvider,this.sourceKey,()=>{var t;const r=(t=this.store)==null?void 0:t.getSource(this.sourceProvider,this.sourceKey);Uk(this,L_,(r==null?void 0:r.getJson(!1))??{}),this.requestUpdate()},!0))},H9.styles=Ct`
    :host {
      display: inline-block;
      width: 250px;
      height: 250px;
    }

    frc-preferences {
      width: 100%;
      height: 100%;
    }
  `;let fu=H9;Td([W({type:String})],fu.prototype,"search");Td([W({type:Boolean,attribute:"hide-title"})],fu.prototype,"hideTitle");Td([W({type:String,attribute:"source-key"})],fu.prototype,"sourceKey");Td([W({type:String,attribute:"source-provider"})],fu.prototype,"sourceProvider");Td([W({type:Object})],fu.prototype,"source");Td([W({type:Object,attribute:!1})],fu.prototype,"provider");Td([W({type:Object,attribute:!1})],fu.prototype,"store");customElements.get("frc-preferences-wrapper")||customElements.define("frc-preferences-wrapper",fu);xt({tagName:"frc-preferences",elementClass:cg,react:yt,events:{onchange:"change",onsearch:"search"}});var ATe=Object.defineProperty,kTe=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&ATe(e,t,n),n};const G9=class extends ct{constructor(){super(...arguments),this.text=""}render(){return qe`${this.text}`}};G9.styles=Ct`
    :host {
      display: inline;
      font-size: inherit;
      font-family: inherit;
      font-weight: inherit;
      text-align: inherit;
      margin: 0;
      padding: 0;
      color: var(--frc-label-text-color, black);
    }
  `;let XL=G9;kTe([W({type:String})],XL.prototype,"text");customElements.get("frc-label")||customElements.define("frc-label",XL);var CTe=Object.defineProperty,W9=(i,e,t,r)=>{for(var n=void 0,s=i.length-1,o;s>=0;s--)(o=i[s])&&(n=o(e,t,n)||n);return n&&CTe(e,t,n),n};const q9=class extends ct{constructor(){super(...arguments),this.value=0,this.precision=2}render(){const e=Math.max(0,this.precision),t=this.value.toFixed(e);return qe`${t}`}};q9.styles=Ct`
    :host {
      display: inline;
      font-size: inherit;
      font-family: inherit;
      font-weight: inherit;
      text-align: inherit;
      margin: 0;
      padding: 0;
      color: var(--frc-label-text-color, black);
    }
  `;let PS=q9;W9([W({type:Number})],PS.prototype,"value");W9([W({type:Number})],PS.prototype,"precision");customElements.get("frc-number-label")||customElements.define("frc-number-label",PS);xt({tagName:"frc-label",elementClass:XL,react:yt});xt({tagName:"frc-number-label",elementClass:PS,react:yt});function $Te(i,e,t){const{store:r}=YV();xo.useEffect(()=>r.subscribe("NetworkTables",i,n=>{e(i,n)},t),[])}function HE(i,e){const{nt4Provider:t}=YV(),[r,n]=xo.useState(e),s=xo.useCallback(o=>{t.userUpdate(i,o)},[]);return $Te(i,(o,a)=>{n(a===void 0?e:a)},!0),[r,s]}const LTe="m80-80 200-560 360 360L80-80Zm132-132 282-100-182-182-100 282Zm370-246-42-42 224-224q32-32 77-32t77 32l24 24-42 42-24-24q-14-14-35-14t-35 14L582-458ZM422-618l-42-42 24-24q14-14 14-34t-14-34l-26-26 42-42 26 26q32 32 32 76t-32 76l-24 24Zm80 80-42-42 144-144q14-14 14-35t-14-35l-64-64 42-42 64 64q32 32 32 77t-32 77L502-538Zm160 160-42-42 64-64q32-32 77-32t77 32l64 64-42 42-64-64q-14-14-35-14t-35 14l-64 64ZM212-212Z";function RTe({count:i,onIncrement:e=()=>{}}){const t={background:"var(--my-element-background, cadetblue)",color:"var(--my-element-color, black)",border:"none",borderRadius:"3px",padding:"8px",display:"inline-flex",alignItems:"center",gap:"8px"};return Ei.jsxs("button",{style:t,onClick:()=>e(i+1),children:[Ei.jsx(uMe,{color:"pink",viewBox:"0 -960 960 960",svgPath:LTe}),"Party Gusts: ",i]})}const PTe=()=>{const[i,e]=HE("/dashboard/toggled",!1),[t]=HE("/SmartDashboard/Field/Robot",[0,0,0]),[r,n]=HE("/dashboard/count",0),s=()=>{e(!i)},o={display:"flex",gap:"15px",alignItems:"start"},a={width:"500px",height:"300px"};return Ei.jsxs(Ei.Fragment,{children:[Ei.jsxs("div",{style:o,children:[Ei.jsx(xTe,{"source-key":"/Shuffleboard/Autonomous/SendableChooser[0]"}),Ei.jsx(bge,{"source-key":"/FMSInfo"}),Ei.jsx(wTe,{label:"Toggle Button",toggled:i,ontoggle:s}),Ei.jsx(RTe,{count:r,onIncrement:l=>n(l)})]}),Ei.jsx(f0e,{style:a,cropLeft:.1,cropRight:.9,rotationUnit:"deg",children:Ei.jsx(m0e,{color:"blue",opacity:1,pose:t})})]})};function NTe(){return Ei.jsxs("div",{className:"App",children:[Ei.jsx(Tq,{}),Ei.jsx(PTe,{})]})}GE.createRoot(document.getElementById("app")).render(Ei.jsx(yt.StrictMode,{children:Ei.jsx(hge,{address:"localhost",children:Ei.jsx(NTe,{})})}));
