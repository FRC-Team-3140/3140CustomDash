(function(S,m){typeof exports=="object"&&typeof module<"u"?m(exports):typeof define=="function"&&define.amd?define(["exports"],m):(S=typeof globalThis<"u"?globalThis:S||self,m(S.MyLib={}))})(this,function(S){"use strict";var Re=(S,m,v)=>{if(!m.has(S))throw TypeError("Cannot "+v)};var i=(S,m,v)=>(Re(S,m,"read from private field"),v?v.call(S):m.get(S)),h=(S,m,v)=>{if(m.has(S))throw TypeError("Cannot add the same private member more than once");m instanceof WeakSet?m.add(S):m.set(S,v)},d=(S,m,v,N)=>(Re(S,m,"write to private field"),N?N.call(S,v):m.set(S,v),v);var y=(S,m,v)=>(Re(S,m,"access private method"),v);var w,_,D,R,$,be,ze,se,Le,ne,Ue,C,L,U,T,z,J,K,Y,Z,M,X,ge,Je,ye,Ye,q,Ce,Se,Ze,Ee,Xe,Pe,qe,F,j,k,H,ee,te,re,Ve,ue,Me,ae,Fe,me,et,ve,tt,le,ke;var m=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},v={exports:{}};v.exports,function(s,e){(function(t,r){var n={};t.PubSub?(n=t.PubSub,console.warn("PubSub already loaded, using existing version")):(t.PubSub=n,r(n)),s!==void 0&&s.exports&&(e=s.exports=n),e.PubSub=n,s.exports=e=n})(typeof window=="object"&&window||m,function(t){var r={},n=-1,u="*";function f(o){var c;for(c in o)if(Object.prototype.hasOwnProperty.call(o,c))return!0;return!1}function l(o){return function(){throw o}}function p(o,c,a){try{o(c,a)}catch(b){setTimeout(l(b),0)}}function O(o,c,a){o(c,a)}function E(o,c,a,b){var g=r[c],V=b?O:p,Q;if(Object.prototype.hasOwnProperty.call(r,c))for(Q in g)Object.prototype.hasOwnProperty.call(g,Q)&&V(g[Q],o,a)}function I(o,c,a){return function(){var g=String(o),V=g.lastIndexOf(".");for(E(o,o,c,a);V!==-1;)g=g.substr(0,V),V=g.lastIndexOf("."),E(o,g,c,a);E(o,u,c,a)}}function P(o){var c=String(o),a=!!(Object.prototype.hasOwnProperty.call(r,c)&&f(r[c]));return a}function x(o){for(var c=String(o),a=P(c)||P(u),b=c.lastIndexOf(".");!a&&b!==-1;)c=c.substr(0,b),b=c.lastIndexOf("."),a=P(c);return a}function A(o,c,a,b){o=typeof o=="symbol"?o.toString():o;var g=I(o,c,b),V=x(o);return V?(a===!0?g():setTimeout(g,0),!0):!1}t.publish=function(o,c){return A(o,c,!1,t.immediateExceptions)},t.publishSync=function(o,c){return A(o,c,!0,t.immediateExceptions)},t.subscribe=function(o,c){if(typeof c!="function")return!1;o=typeof o=="symbol"?o.toString():o,Object.prototype.hasOwnProperty.call(r,o)||(r[o]={});var a="uid_"+String(++n);return r[o][a]=c,a},t.subscribeAll=function(o){return t.subscribe(u,o)},t.subscribeOnce=function(o,c){var a=t.subscribe(o,function(){t.unsubscribe(a),c.apply(this,arguments)});return t},t.clearAllSubscriptions=function(){r={}},t.clearSubscriptions=function(c){var a;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&a.indexOf(c)===0&&delete r[a]},t.countSubscriptions=function(c){var a,b,g=0;for(a in r)if(Object.prototype.hasOwnProperty.call(r,a)&&a.indexOf(c)===0){for(b in r[a])g++;break}return g},t.getSubscriptions=function(c){var a,b=[];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&a.indexOf(c)===0&&b.push(a);return b},t.unsubscribe=function(o){var c=function(Et){var De;for(De in r)if(Object.prototype.hasOwnProperty.call(r,De)&&De.indexOf(Et)===0)return!0;return!1},a=typeof o=="string"&&(Object.prototype.hasOwnProperty.call(r,o)||c(o)),b=!a&&typeof o=="string",g=typeof o=="function",V=!1,Q,G,Oe;if(a){t.clearSubscriptions(o);return}for(Q in r)if(Object.prototype.hasOwnProperty.call(r,Q)){if(G=r[Q],b&&G[o]){delete G[o],V=o;break}if(g)for(Oe in G)Object.prototype.hasOwnProperty.call(G,Oe)&&G[Oe]===o&&(delete G[Oe],V=!0)}return V}})}(v,v.exports);var N=v.exports,fe=function(){return fe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},fe.apply(this,arguments)};function rt(s){return s.toLowerCase()}var it=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],st=/[^A-Z0-9]+/gi;function nt(s,e){e===void 0&&(e={});for(var t=e.splitRegexp,r=t===void 0?it:t,n=e.stripRegexp,u=n===void 0?st:n,f=e.transform,l=f===void 0?rt:f,p=e.delimiter,O=p===void 0?" ":p,E=Be(Be(s,r,"$1\0$2"),u,"\0"),I=0,P=E.length;E.charAt(I)==="\0";)I++;for(;E.charAt(P-1)==="\0";)P--;return E.slice(I,P).split("\0").map(l).join(O)}function Be(s,e,t){return e instanceof RegExp?s.replace(e,t):e.reduce(function(r,n){return r.replace(n,t)},s)}function We(s,e){var t=s.charAt(0),r=s.substr(1).toLowerCase();return e>0&&t>="0"&&t<="9"?"_"+t+r:""+t.toUpperCase()+r}function ot(s){return s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()}function ct(s,e){return e===void 0&&(e={}),nt(s,fe({delimiter:"",transform:We},e))}function ut(s,e){return e===0?s.toLowerCase():We(s,e)}function at(s,e){return e===0?s.toLowerCase():ot(s)}function lt(s,e){return e===void 0&&(e={}),ct(s,fe({transform:ut},e))}function ft(s){switch(s){case"String":return"";case"Boolean":return!1;case"Number":return 0;case"Array":return[];case"SourceProvider":return;case"Store":return;case"Object":default:return{}}}const ht=(s,{property:e=s,description:t="",type:r="String",defaultValue:n,attribute:u=s.toLowerCase(),reflect:f=!1,primary:l=!1,changeEvent:p,...O}={})=>{const E=typeof r=="function"?r.name:r,I=n??ft(E);return{property:e,description:t,type:E,defaultValue:I,attribute:u,reflect:!!f,primary:!!l,changeEvent:p,...O}},we=({description:s="",group:e="default",defaultSourceKey:t,defaultSourceProvider:r,dashboard:n,properties:u={},events:f=[],slots:l=[],cssProperties:p=[],cssParts:O=[],...E}={})=>({description:s,group:e,defaultSourceKey:t,defaultSourceProvider:r,dashboard:{topLevel:!0,...n},properties:Object.fromEntries(Object.entries(u).map(([I,P])=>[I,ht(I,P)])),events:f,slots:l,cssProperties:p,cssParts:O,...E}),he=s=>typeof s=="string"?"String":typeof s=="number"?"Number":typeof s=="boolean"?"Boolean":s instanceof Array?"Array":s instanceof Object?"Object":null,B=(s,e)=>{if(s===e)return!0;if(typeof s!=typeof e)return!1;if(s instanceof Array&&e instanceof Array){if(s.length!==e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!==e[t])return!1;return!0}return!1};function Te(){}class Ae{static prop2PropValue(e){if(e===null)return null;if(e instanceof Array)return e;if(typeof e=="string")try{const t=JSON.parse(e);return t instanceof Array?t:[]}catch{return[]}return[]}static prop2AttrValue(e){const t=Ae.prop2PropValue(e);return t===null?null:JSON.stringify(t)}static attr2PropValue(e){if(e===null)return null;try{const t=JSON.parse(e);return t instanceof Array?t:[]}catch{return[]}}}class pt{static prop2PropValue(e){return e===null?null:!!e}static prop2AttrValue(e){return e?"":null}static attr2PropValue(e){return e!==null}}class dt{static prop2PropValue(e){return e===null?null:parseFloat(e)}static prop2AttrValue(e){return e===null?null:parseFloat(e).toString()}static attr2PropValue(e,t){return e===null?null:parseFloat(e)}}class Ne{static prop2PropValue(e){if(e===null)return null;if(e instanceof Object)return e;if(typeof e=="string")try{const t=JSON.parse(e);return t instanceof Object?t:{}}catch{return{}}return{}}static prop2AttrValue(e){const t=Ne.prop2PropValue(e);return t===null?null:JSON.stringify(t)}static attr2PropValue(e){if(e===null)return null;try{const t=JSON.parse(e);return t instanceof Object?t:{}}catch{return{}}}}class bt{static prop2PropValue(e){return e===null?null:(e==null?void 0:e.toString())||""}static prop2AttrValue(e){return e===null?null:(e==null?void 0:e.toString())||""}static attr2PropValue(e,t){return e===null?null:e}}const Ie={Array:Ae,Boolean:pt,Number:dt,Object:Ne,String:bt},W=(s,e)=>{var t;return((t=Ie[e])==null?void 0:t.prop2PropValue(s))??null},Ke=(s,e)=>{var t;return((t=Ie[e])==null?void 0:t.prop2AttrValue(s))??null},xe=(s,e)=>{var t;return((t=Ie[e])==null?void 0:t.attr2PropValue(s))??null},oe=class oe{constructor(e,t){h(this,be);h(this,se);h(this,ne);h(this,w,void 0);h(this,_,void 0);h(this,D,!1);h(this,R,void 0);h(this,$,void 0);oe.UNIQUE_ID+=1,d(this,$,Symbol(`WEBBIT_PROPERTY_CHANGE_${oe.UNIQUE_ID}`)),d(this,w,e),d(this,_,t),d(this,D,!1),d(this,R,this.value),y(this,be,ze).call(this)}get value(){const{reflect:e,attribute:t,property:r,type:n}=i(this,_);return typeof r=="string"&&r in i(this,w)?i(this,w)[r]:xe(t&&e?i(this,w).getAttribute(t):t?i(this,w).getAttribute(t):null,n)}set value(e){const{attribute:t,property:r,type:n}=i(this,_),u=he(e),f=this.value;if(e===null||typeof e>"u"){if(e===f)return}else if(B(W(f,u),e))return;if(r){const l=W(e,n),p=W(l,u);B(e,p)&&(i(this,w)[r]=l)}else if(t){const l=Ke(e,n),p=xe(l,u);B(e,p)&&(l===null?i(this,w).removeAttribute(t):i(this,w).setAttribute(t,l))}}isAttribute(){return typeof i(this,_).attribute=="string"}getStoredAttribute(){const{type:e}=i(this,_);return Ke(i(this,R),e)}connect(){if(!i(this,D)){const e=this.value;d(this,R,typeof e<"u"?e:i(this,_).defaultValue),d(this,D,!0)}}disconnect(){i(this,D)&&(d(this,D,!1),y(this,ne,Ue).call(this))}isConnected(){return i(this,D)}update(e){this.connect(),this.value=e}subscribe(e,t=!1){N.subscribe(i(this,$),(r,n)=>{(i(this,D)||t)&&e(n)})}getProperty(){return i(this,_)}setStoredValue(e){d(this,R,e),this.isConnected()||y(this,ne,Ue).call(this)}getStoredValue(){return i(this,R)}};w=new WeakMap,_=new WeakMap,D=new WeakMap,R=new WeakMap,$=new WeakMap,be=new WeakSet,ze=function(){const{changeEvent:e,attribute:t}=i(this,_);if(e){const r=()=>{y(this,se,Le).call(this)};i(this,w).addEventListener(e,r,!1)}else t&&new MutationObserver(()=>{y(this,se,Le).call(this)}).observe(i(this,w),{attributes:!0,attributeFilter:[t]})},se=new WeakSet,Le=function(){const{value:e}=this;this.isConnected()||d(this,R,e),N.publish(i(this,$),e)},ne=new WeakSet,Ue=function(){this.value=i(this,R)},oe.UNIQUE_ID=0;let _e=oe;function pe(s){return lt(s,{transform:at})}function He(s,e){const r=Object.entries(s).find(([f])=>pe(f)===e);if(!r)return;const[n,u]=r;return{name:n,source:u}}const ce=class ce{constructor(e,t,r){h(this,ge);h(this,ye);h(this,q);h(this,Se);h(this,Ee);h(this,Pe);h(this,C,void 0);h(this,L,void 0);h(this,U,void 0);h(this,T,void 0);h(this,z,void 0);h(this,J,void 0);h(this,K,!1);h(this,Y,void 0);h(this,Z,{});h(this,M,Te);h(this,X,void 0);ce.UNIQUE_ID+=1,d(this,X,Symbol(`WEBBIT_ANY_PROPERTY_CHANGE_${ce.UNIQUE_ID}`)),d(this,C,e),d(this,L,t),d(this,U,we(r||{name:e.tagName.toLowerCase()}));const n=Object.entries(i(this,U).properties).filter(([,u])=>!["SourceProvider","Store","Source"].includes(u.type)).map(([u,f])=>({...f,name:u}));d(this,T,new Map(n.map(u=>{const f=new _e(i(this,C),u);return f.subscribe(l=>{f.isConnected()&&y(this,Pe,qe).call(this,u,l),N.publish(i(this,X),{property:u,value:l,connected:i(this,K)})},!0),[u.name,f]}))),d(this,z,n.find(({primary:u})=>u)),d(this,J,i(this,z)?i(this,T).get(i(this,z).name):void 0),d(this,Y,y(this,ge,Je).call(this)),i(this,L).defaultSourceProviderSet(u=>{this.sourceProvider===null&&(this.sourceProvider=u)}),this.connect()}get sourceProvider(){return i(this,C).getAttribute("source-provider")??void 0}set sourceProvider(e){typeof e<"u"?i(this,C).setAttribute("source-provider",e):i(this,C).removeAttribute("source-provider")}get sourceKey(){return i(this,C).getAttribute("source-key")??void 0}set sourceKey(e){typeof e<"u"?i(this,C).setAttribute("source-key",e):i(this,C).removeAttribute("source-key")}get source(){if(typeof this.sourceProvider<"u"&&typeof this.sourceKey<"u")return i(this,L).getSource(this.sourceProvider,this.sourceKey)}get hasSource(){return typeof this.source<"u"}subscribe(e){const t=N.subscribe(i(this,X),(r,n)=>{e(n)});return()=>N.unsubscribe(t)}getPropertyHandler(e){return i(this,T).get(e)}connect(){d(this,K,!0),i(this,Y).connect(),y(this,q,Ce).call(this)}disconnect(){d(this,K,!1),i(this,Y).disconnect(),y(this,q,Ce).call(this)}setDefaultPropertyValue(e,t){i(this,Z)[e]=t}getDefaultPropertyValue(e){return i(this,Z)[e]}getDefaultPropertyValues(){return i(this,Z)}getConfig(){return i(this,U)}};C=new WeakMap,L=new WeakMap,U=new WeakMap,T=new WeakMap,z=new WeakMap,J=new WeakMap,K=new WeakMap,Y=new WeakMap,Z=new WeakMap,M=new WeakMap,X=new WeakMap,ge=new WeakSet,Je=function(){const e=new MutationObserver(()=>{y(this,q,Ce).call(this)});return{connect:()=>{e.observe(i(this,C),{attributes:!0,attributeFilter:["source-provider","source-key"]})},disconnect:()=>{e.disconnect()}}},ye=new WeakSet,Ye=function(){const e=i(this,C).closest("[default-source-provider]");return(e==null?void 0:e.getAttribute("default-source-provider"))??void 0},q=new WeakSet,Ce=function(){if(y(this,Se,Ze).call(this),!i(this,K)){i(this,M).call(this),d(this,M,Te),i(this,T).forEach(e=>e.disconnect());return}this.sourceKey||(this.sourceKey=i(this,U).defaultSourceKey),this.sourceProvider||(this.sourceProvider=i(this,U).defaultSourceProvider||y(this,ye,Ye).call(this)||i(this,L).getDefaultSourceProvider()),!this.sourceKey||!this.sourceProvider?(i(this,M).call(this),d(this,M,Te),i(this,T).forEach(e=>e.disconnect())):(i(this,M).call(this),i(this,T).forEach(e=>{e.disconnect()}),d(this,M,i(this,L).subscribe(this.sourceProvider,this.sourceKey,(e,t,r)=>{y(this,Ee,Xe).call(this,t,r)},!0)))},Se=new WeakSet,Ze=function(){const e=this.sourceProvider?i(this,L).getSourceProvider(this.sourceProvider):void 0;Object.entries(i(this,U).properties).forEach(([,{property:t,type:r}])=>{t&&(r==="SourceProvider"?i(this,C)[t]=e:r==="Store"?i(this,C)[t]=i(this,L):r==="Source"&&(i(this,C)[t]=this.source))})},Ee=new WeakSet,Xe=function(e,t){var r,n;if(typeof this.source>"u")i(this,T).forEach(u=>{u.disconnect()});else if(this.source.hasChildren()){const u=this.source.getChildren();if(e===t){const f=Object.entries(u);[...i(this,T).entries()].forEach(([l,p])=>{const O=f.find(([E])=>pe(E)===l);if(O){const[,E]=O;p.update(E.getSourceValue())}})}else{const f=pe(t.replace(`${e}/`,""));if(i(this,T).has(f)){const l=i(this,T).get(f),p=(n=(r=He(u,f))==null?void 0:r.source)==null?void 0:n.getSourceValue();typeof p>"u"?l==null||l.disconnect():l==null||l.update(p)}}}else i(this,J)&&i(this,J).update(this.source.getSourceValue())},Pe=new WeakSet,qe=function({name:e,primary:t},r){if(typeof this.source>"u")return;const n=he(r),u=this.source.getChildren(),f=Object.entries(u);if(this.source.hasChildren())if(r===null){const l=f.find(([p])=>pe(p)===e);if(l){const[,p]=l;p.getSourceValue()!==null&&p.setSourceValue(r)}}else{const l=He(u,e);if(!l)return;const p=he(l.source.getSourceValue())||n,O=W(r,p),E=W(O,n);B(r,E)&&!B(l.source.getSourceValue(),O)&&l.source.setSourceValue(r)}else{if(!t)return;if(r===null)this.source.getSourceValue()!==null&&this.source.setSourceValue(r);else{const l=he(this.source.getSourceValue())||n,p=W(r,l),O=W(p,n);B(r,O)&&!B(this.source.getSourceValue(),p)&&this.source.setSourceValue(p)}}},ce.UNIQUE_ID=0;let de=ce;var Qe=function(s){var e=s,t,r={a:0,b:0,c:0},n=[],u=/(\[[^\]]+\])/g,f=/(#[^\#\s\+>~\.\[:\)]+)/g,l=/(\.[^\s\+>~\.\[:\)]+)/g,p=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,O=/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,E=/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,I=/([^\s\+>~\.\[:]+)/g;return t=function(P,x){var A,o,c,a,b,g;if(P.test(e))for(A=e.match(P),o=0,c=A.length;o<c;o+=1)r[x]+=1,a=A[o],b=e.indexOf(a),g=a.length,n.push({selector:s.substr(b,g),type:x,index:b,length:g}),e=e.replace(a,Array(g+1).join(" "))},function(){var P=function(c){var a,b,g,V;if(c.test(e))for(a=e.match(c),b=0,g=a.length;b<g;b+=1)V=a[b],e=e.replace(V,Array(V.length+1).join("A"))},x=/\\[0-9A-Fa-f]{6}\s?/g,A=/\\[0-9A-Fa-f]{1,5}\s/g,o=/\\./g;P(x),P(A),P(o)}(),function(){var P=/{[^]*/gm,x,A,o,c;if(P.test(e))for(x=e.match(P),A=0,o=x.length;A<o;A+=1)c=x[A],e=e.replace(c,Array(c.length+1).join(" "))}(),t(u,"b"),t(f,"a"),t(l,"b"),t(p,"c"),t(O,"b"),t(E,"b"),e=e.replace(/[\*\s\+>~]/g," "),e=e.replace(/[#\.]/g," "),e=e.replace(/:not/g,"    "),e=e.replace(/:local/g,"      "),e=e.replace(/:global/g,"       "),e=e.replace(/[\(\)]/g," "),t(I,"c"),n.sort(function(P,x){return P.index-x.index}),{selector:s,specificity:"0,"+r.a.toString()+","+r.b.toString()+","+r.c.toString(),specificityArray:[0,r.a,r.b,r.c],parts:n}},Ge=function(s,e){var t,r,n;if(typeof s=="string"){if(s.indexOf(",")!==-1)throw"Invalid CSS selector";t=Qe(s).specificityArray}else if(Array.isArray(s)){if(s.filter(function(u){return typeof u=="number"}).length!==4)throw"Invalid specificity array";t=s}else throw"Invalid CSS selector or specificity array";if(typeof e=="string"){if(e.indexOf(",")!==-1)throw"Invalid CSS selector";r=Qe(e).specificityArray}else if(Array.isArray(e)){if(e.filter(function(u){return typeof u=="number"}).length!==4)throw"Invalid specificity array";r=e}else throw"Invalid CSS selector or specificity array";for(n=0;n<4;n+=1){if(t[n]<r[n])return-1;if(t[n]>r[n])return 1}return 0};function gt(s,e){const t=[...s.entries()].find(([r])=>e.matches(r));return t==null?void 0:t[1]}function $e(s,e,t){const r=s,n=gt(t,r);return typeof n>"u"||!r.hasAttribute("source-provider")&&typeof n.defaultSourceProvider>"u"&&typeof e>"u"?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}function yt(s,e){return t=>$e(t,s,e)}function St(s,e,t){return document.createNodeIterator(s,NodeFilter.SHOW_ELEMENT,yt(e,t))}const ie=class ie{constructor(e,t,r={},n="default"){h(this,re);h(this,ue);h(this,ae);h(this,me);h(this,ve);h(this,le);h(this,F,void 0);h(this,j,new Map);h(this,k,new Map);h(this,H,void 0);h(this,ee,void 0);h(this,te,void 0);ie.UNIQUE_ID+=1,d(this,ee,Symbol(`WEBBIT_CONNECTOR_ELEMENT_CONNECTED_${ie.UNIQUE_ID}`)),d(this,te,Symbol(`WEBBIT_CONNECTOR_ELEMENT_DISCONNECTED_${ie.UNIQUE_ID}`)),d(this,F,t),i(this,F).defaultSourceProviderSet(u=>{i(this,k).forEach((f,l)=>{f.sourceProvider===null&&this.setSourceProvider(l,u)})}),d(this,H,e),y(this,me,et).call(this),this.addElementConfigs(r,n)}addElementConfigs(e={},t="default"){Object.entries(e).forEach(([r,n])=>{i(this,j).set(r,we({group:t,...n}))}),y(this,ae,Fe).call(this,i(this,H))}subscribeElementConnected(e){N.subscribe(i(this,ee),(t,r)=>{e(r)})}subscribeElementDisconnected(e){N.subscribe(i(this,te),(t,r)=>{e(r)})}getRootElement(){return i(this,H)}getMatchingElementConfig(e){if(!e)return;const r=[...i(this,j).keys()].filter(n=>e.matches(n)).sort(Ge).at(-1);return r?this.getElementConfig(r):void 0}getMatchingElementSelector(e){return e?[...i(this,j).keys()].filter(r=>e.matches(r)).sort(Ge).at(-1):void 0}getElementConfigSelectors(){return[...i(this,j).keys()]}getElementConfig(e){return i(this,j).get(e)}hasElementConfig(e){return i(this,j).has(e)}setDefaultPropertyValue(e,t,r){const n=this.getElementWebbit(e);n&&n.setDefaultPropertyValue(t,r)}setSourceProvider(e,t){const r=this.getElementWebbit(e);r&&(r.sourceProvider=t)}setSourceKey(e,t){const r=this.getElementWebbit(e);r&&(r.sourceKey=t)}getDefaultPropertyValue(e,t){const r=this.getElementWebbit(e);return r?r.getDefaultPropertyValue(t):void 0}getDefaultPropertyValues(e){const t=this.getElementWebbit(e);return t?t.getDefaultPropertyValues():{}}getSourceProvider(e){const t=this.getElementWebbit(e);return t?t.sourceProvider:i(this,F).getDefaultSourceProvider()}getSourceKey(e){const t=this.getElementWebbit(e);return t?t.sourceKey:void 0}getElementWebbit(e){return i(this,k).get(e)}hasElement(e){return i(this,k).has(e)}getStore(){return i(this,F)}};F=new WeakMap,j=new WeakMap,k=new WeakMap,H=new WeakMap,ee=new WeakMap,te=new WeakMap,re=new WeakSet,Ve=function(e){const t=this.getMatchingElementConfig(e);if(this.hasElement(e)||!t)return;const r=new de(e,i(this,F),t);i(this,k).set(e,r),N.publish(i(this,ee),{element:e})},ue=new WeakSet,Me=function(e){const t=this.getElementWebbit(e);t&&(t.disconnect(),i(this,k).delete(e),N.publish(i(this,te),{element:e}))},ae=new WeakSet,Fe=function(e){const t=y(this,ve,tt).call(this,e);for(;t.nextNode();)y(this,re,Ve).call(this,t.referenceNode)},me=new WeakSet,et=function(){new MutationObserver(t=>{t.forEach(r=>{if(r.type==="childList"){const n=r.addedNodes||[],u=r.removedNodes||[];n.forEach(f=>{f instanceof HTMLElement&&(y(this,le,ke).call(this,f)&&y(this,re,Ve).call(this,f),y(this,ae,Fe).call(this,f))}),u.forEach(f=>{y(this,ue,Me).call(this,f),[...i(this,k).keys()].forEach(l=>{f.contains(l)&&y(this,ue,Me).call(this,l)})})}else r.type==="attributes"&&r.target instanceof HTMLElement&&y(this,le,ke).call(this,r.target)&&y(this,re,Ve).call(this,r.target)})}).observe(i(this,H),{childList:!0,subtree:!0,attributes:!0,attributeFilter:["source-key","source-provider"]})},ve=new WeakSet,tt=function(e){return St(e,this.getStore().getDefaultSourceProvider(),i(this,j))},le=new WeakSet,ke=function(e){return $e(e,i(this,F).getDefaultSourceProvider(),i(this,j))===NodeFilter.FILTER_ACCEPT},ie.UNIQUE_ID=0;let je=ie;S.WebbitConnector=je,S.default=de,S.normalizeConfig=we,Object.defineProperties(S,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
