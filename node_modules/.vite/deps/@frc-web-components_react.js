import "./chunk-3BXBICV5.js";
import {
  H,
  Mt,
  Ot,
  Tt,
  Ut,
  c,
  d,
  ft,
  h,
  i,
  it,
  l,
  mt,
  n2 as n,
  ot,
  v,
  yt
} from "./chunk-TPN2HBKI.js";
import {
  require_jsx_runtime
} from "./chunk-KVTEQNHM.js";
import {
  require_react
} from "./chunk-VGQVIESM.js";
import {
  __toESM
} from "./chunk-TCQZMY3T.js";

// node_modules/@frc-web-components/react/dist/components/3AxisAccelerometer.es.js
var import_react = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/property-C4BPH-wS-7fb0a59c.js
var ct = /* @__PURE__ */ new Set(["children", "localName", "ref", "style", "className"]);
var B = /* @__PURE__ */ new WeakMap();
var I = (e11, t19, s18, i27, n33) => {
  const r24 = n33 == null ? void 0 : n33[t19];
  r24 === void 0 ? (e11[t19] = s18, s18 == null && t19 in HTMLElement.prototype && e11.removeAttribute(t19)) : s18 !== i27 && ((o12, h26, l25) => {
    let a22 = B.get(o12);
    a22 === void 0 && B.set(o12, a22 = /* @__PURE__ */ new Map());
    let c27 = a22.get(h26);
    l25 !== void 0 ? c27 === void 0 ? (a22.set(h26, c27 = { handleEvent: l25 }), o12.addEventListener(h26, c27)) : c27.handleEvent = l25 : c27 !== void 0 && (a22.delete(h26), o12.removeEventListener(h26, c27));
  })(e11, r24, s18);
};
var xt = ({ react: e11, tagName: t19, elementClass: s18, events: i27, displayName: n33 }) => {
  const r24 = new Set(Object.keys(i27 ?? {})), o12 = e11.forwardRef((h26, l25) => {
    const a22 = e11.useRef(/* @__PURE__ */ new Map()), c27 = e11.useRef(null), d34 = {}, _19 = {};
    for (const [u35, $24] of Object.entries(h26))
      ct.has(u35) ? d34[u35 === "className" ? "class" : u35] = $24 : r24.has(u35) || u35 in s18.prototype ? _19[u35] = $24 : d34[u35] = $24;
    return e11.useLayoutEffect(() => {
      if (c27.current === null)
        return;
      const u35 = /* @__PURE__ */ new Map();
      for (const $24 in _19)
        I(c27.current, $24, h26[$24], a22.current.get($24), i27), a22.current.delete($24), u35.set($24, h26[$24]);
      for (const [$24, at10] of a22.current)
        I(c27.current, $24, void 0, at10, i27);
      a22.current = u35;
    }), e11.useLayoutEffect(() => {
      var u35;
      (u35 = c27.current) == null || u35.removeAttribute("defer-hydration");
    }, []), d34.suppressHydrationWarning = true, e11.createElement(t19, { ...d34, ref: e11.useCallback((u35) => {
      c27.current = u35, typeof l25 == "function" ? l25(u35) : l25 !== null && (l25.current = u35);
    }, [l25]) });
  });
  return o12.displayName = n33 ?? s18.name, o12;
};
var T = globalThis;
var L = T.ShadowRoot && (T.ShadyCSS === void 0 || T.ShadyCSS.nativeShadow) && "adoptedStyleSheets" in Document.prototype && "replace" in CSSStyleSheet.prototype;
var j = Symbol();
var V = /* @__PURE__ */ new WeakMap();
var it2 = class {
  constructor(e11, t19, s18) {
    if (this._$cssResult$ = true, s18 !== j)
      throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");
    this.cssText = e11, this.t = t19;
  }
  get styleSheet() {
    let e11 = this.o;
    const t19 = this.t;
    if (L && e11 === void 0) {
      const s18 = t19 !== void 0 && t19.length === 1;
      s18 && (e11 = V.get(t19)), e11 === void 0 && ((this.o = e11 = new CSSStyleSheet()).replaceSync(this.cssText), s18 && V.set(t19, e11));
    }
    return e11;
  }
  toString() {
    return this.cssText;
  }
};
var dt = (e11) => new it2(typeof e11 == "string" ? e11 : e11 + "", void 0, j);
var Mt2 = (e11, ...t19) => {
  const s18 = e11.length === 1 ? e11[0] : t19.reduce((i27, n33, r24) => i27 + ((o12) => {
    if (o12._$cssResult$ === true)
      return o12.cssText;
    if (typeof o12 == "number")
      return o12;
    throw Error("Value passed to 'css' function must be a 'css' function result: " + o12 + ". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.");
  })(n33) + e11[r24 + 1], e11[0]);
  return new it2(s18, e11, j);
};
var ut = (e11, t19) => {
  if (L)
    e11.adoptedStyleSheets = t19.map((s18) => s18 instanceof CSSStyleSheet ? s18 : s18.styleSheet);
  else
    for (const s18 of t19) {
      const i27 = document.createElement("style"), n33 = T.litNonce;
      n33 !== void 0 && i27.setAttribute("nonce", n33), i27.textContent = s18.cssText, e11.appendChild(i27);
    }
};
var W = L ? (e11) => e11 : (e11) => e11 instanceof CSSStyleSheet ? ((t19) => {
  let s18 = "";
  for (const i27 of t19.cssRules)
    s18 += i27.cssText;
  return dt(s18);
})(e11) : e11;
var { is: pt, defineProperty: $t, getOwnPropertyDescriptor: _t, getOwnPropertyNames: ft2, getOwnPropertySymbols: vt, getPrototypeOf: mt2 } = Object;
var g = globalThis;
var q = g.trustedTypes;
var At = q ? q.emptyScript : "";
var J = g.reactiveElementPolyfillSupport;
var w = (e11, t19) => e11;
var M = { toAttribute(e11, t19) {
  switch (t19) {
    case Boolean:
      e11 = e11 ? At : null;
      break;
    case Object:
    case Array:
      e11 = e11 == null ? e11 : JSON.stringify(e11);
  }
  return e11;
}, fromAttribute(e11, t19) {
  let s18 = e11;
  switch (t19) {
    case Boolean:
      s18 = e11 !== null;
      break;
    case Number:
      s18 = e11 === null ? null : Number(e11);
      break;
    case Object:
    case Array:
      try {
        s18 = JSON.parse(e11);
      } catch {
        s18 = null;
      }
  }
  return s18;
} };
var z = (e11, t19) => !pt(e11, t19);
var K = { attribute: true, type: String, converter: M, reflect: false, hasChanged: z };
Symbol.metadata ?? (Symbol.metadata = Symbol("metadata")), g.litPropertyMetadata ?? (g.litPropertyMetadata = /* @__PURE__ */ new WeakMap());
var y = class extends HTMLElement {
  static addInitializer(e11) {
    this._$Ei(), (this.l ?? (this.l = [])).push(e11);
  }
  static get observedAttributes() {
    return this.finalize(), this._$Eh && [...this._$Eh.keys()];
  }
  static createProperty(e11, t19 = K) {
    if (t19.state && (t19.attribute = false), this._$Ei(), this.elementProperties.set(e11, t19), !t19.noAccessor) {
      const s18 = Symbol(), i27 = this.getPropertyDescriptor(e11, s18, t19);
      i27 !== void 0 && $t(this.prototype, e11, i27);
    }
  }
  static getPropertyDescriptor(e11, t19, s18) {
    const { get: i27, set: n33 } = _t(this.prototype, e11) ?? { get() {
      return this[t19];
    }, set(r24) {
      this[t19] = r24;
    } };
    return { get() {
      return i27 == null ? void 0 : i27.call(this);
    }, set(r24) {
      const o12 = i27 == null ? void 0 : i27.call(this);
      n33.call(this, r24), this.requestUpdate(e11, o12, s18);
    }, configurable: true, enumerable: true };
  }
  static getPropertyOptions(e11) {
    return this.elementProperties.get(e11) ?? K;
  }
  static _$Ei() {
    if (this.hasOwnProperty(w("elementProperties")))
      return;
    const e11 = mt2(this);
    e11.finalize(), e11.l !== void 0 && (this.l = [...e11.l]), this.elementProperties = new Map(e11.elementProperties);
  }
  static finalize() {
    if (this.hasOwnProperty(w("finalized")))
      return;
    if (this.finalized = true, this._$Ei(), this.hasOwnProperty(w("properties"))) {
      const t19 = this.properties, s18 = [...ft2(t19), ...vt(t19)];
      for (const i27 of s18)
        this.createProperty(i27, t19[i27]);
    }
    const e11 = this[Symbol.metadata];
    if (e11 !== null) {
      const t19 = litPropertyMetadata.get(e11);
      if (t19 !== void 0)
        for (const [s18, i27] of t19)
          this.elementProperties.set(s18, i27);
    }
    this._$Eh = /* @__PURE__ */ new Map();
    for (const [t19, s18] of this.elementProperties) {
      const i27 = this._$Eu(t19, s18);
      i27 !== void 0 && this._$Eh.set(i27, t19);
    }
    this.elementStyles = this.finalizeStyles(this.styles);
  }
  static finalizeStyles(e11) {
    const t19 = [];
    if (Array.isArray(e11)) {
      const s18 = new Set(e11.flat(1 / 0).reverse());
      for (const i27 of s18)
        t19.unshift(W(i27));
    } else
      e11 !== void 0 && t19.push(W(e11));
    return t19;
  }
  static _$Eu(e11, t19) {
    const s18 = t19.attribute;
    return s18 === false ? void 0 : typeof s18 == "string" ? s18 : typeof e11 == "string" ? e11.toLowerCase() : void 0;
  }
  constructor() {
    super(), this._$Ep = void 0, this.isUpdatePending = false, this.hasUpdated = false, this._$Em = null, this._$Ev();
  }
  _$Ev() {
    var e11;
    this._$ES = new Promise((t19) => this.enableUpdating = t19), this._$AL = /* @__PURE__ */ new Map(), this._$E_(), this.requestUpdate(), (e11 = this.constructor.l) == null || e11.forEach((t19) => t19(this));
  }
  addController(e11) {
    var t19;
    (this._$EO ?? (this._$EO = /* @__PURE__ */ new Set())).add(e11), this.renderRoot !== void 0 && this.isConnected && ((t19 = e11.hostConnected) == null || t19.call(e11));
  }
  removeController(e11) {
    var t19;
    (t19 = this._$EO) == null || t19.delete(e11);
  }
  _$E_() {
    const e11 = /* @__PURE__ */ new Map(), t19 = this.constructor.elementProperties;
    for (const s18 of t19.keys())
      this.hasOwnProperty(s18) && (e11.set(s18, this[s18]), delete this[s18]);
    e11.size > 0 && (this._$Ep = e11);
  }
  createRenderRoot() {
    const e11 = this.shadowRoot ?? this.attachShadow(this.constructor.shadowRootOptions);
    return ut(e11, this.constructor.elementStyles), e11;
  }
  connectedCallback() {
    var e11;
    this.renderRoot ?? (this.renderRoot = this.createRenderRoot()), this.enableUpdating(true), (e11 = this._$EO) == null || e11.forEach((t19) => {
      var s18;
      return (s18 = t19.hostConnected) == null ? void 0 : s18.call(t19);
    });
  }
  enableUpdating(e11) {
  }
  disconnectedCallback() {
    var e11;
    (e11 = this._$EO) == null || e11.forEach((t19) => {
      var s18;
      return (s18 = t19.hostDisconnected) == null ? void 0 : s18.call(t19);
    });
  }
  attributeChangedCallback(e11, t19, s18) {
    this._$AK(e11, s18);
  }
  _$EC(e11, t19) {
    var s18;
    const i27 = this.constructor.elementProperties.get(e11), n33 = this.constructor._$Eu(e11, i27);
    if (n33 !== void 0 && i27.reflect === true) {
      const r24 = (((s18 = i27.converter) == null ? void 0 : s18.toAttribute) !== void 0 ? i27.converter : M).toAttribute(t19, i27.type);
      this._$Em = e11, r24 == null ? this.removeAttribute(n33) : this.setAttribute(n33, r24), this._$Em = null;
    }
  }
  _$AK(e11, t19) {
    var s18;
    const i27 = this.constructor, n33 = i27._$Eh.get(e11);
    if (n33 !== void 0 && this._$Em !== n33) {
      const r24 = i27.getPropertyOptions(n33), o12 = typeof r24.converter == "function" ? { fromAttribute: r24.converter } : ((s18 = r24.converter) == null ? void 0 : s18.fromAttribute) !== void 0 ? r24.converter : M;
      this._$Em = n33, this[n33] = o12.fromAttribute(t19, r24.type), this._$Em = null;
    }
  }
  requestUpdate(e11, t19, s18) {
    if (e11 !== void 0) {
      if (s18 ?? (s18 = this.constructor.getPropertyOptions(e11)), !(s18.hasChanged ?? z)(this[e11], t19))
        return;
      this.P(e11, t19, s18);
    }
    this.isUpdatePending === false && (this._$ES = this._$ET());
  }
  P(e11, t19, s18) {
    this._$AL.has(e11) || this._$AL.set(e11, t19), s18.reflect === true && this._$Em !== e11 && (this._$Ej ?? (this._$Ej = /* @__PURE__ */ new Set())).add(e11);
  }
  async _$ET() {
    this.isUpdatePending = true;
    try {
      await this._$ES;
    } catch (t19) {
      Promise.reject(t19);
    }
    const e11 = this.scheduleUpdate();
    return e11 != null && await e11, !this.isUpdatePending;
  }
  scheduleUpdate() {
    return this.performUpdate();
  }
  performUpdate() {
    var e11;
    if (!this.isUpdatePending)
      return;
    if (!this.hasUpdated) {
      if (this.renderRoot ?? (this.renderRoot = this.createRenderRoot()), this._$Ep) {
        for (const [n33, r24] of this._$Ep)
          this[n33] = r24;
        this._$Ep = void 0;
      }
      const i27 = this.constructor.elementProperties;
      if (i27.size > 0)
        for (const [n33, r24] of i27)
          r24.wrapped !== true || this._$AL.has(n33) || this[n33] === void 0 || this.P(n33, this[n33], r24);
    }
    let t19 = false;
    const s18 = this._$AL;
    try {
      t19 = this.shouldUpdate(s18), t19 ? (this.willUpdate(s18), (e11 = this._$EO) == null || e11.forEach((i27) => {
        var n33;
        return (n33 = i27.hostUpdate) == null ? void 0 : n33.call(i27);
      }), this.update(s18)) : this._$EU();
    } catch (i27) {
      throw t19 = false, this._$EU(), i27;
    }
    t19 && this._$AE(s18);
  }
  willUpdate(e11) {
  }
  _$AE(e11) {
    var t19;
    (t19 = this._$EO) == null || t19.forEach((s18) => {
      var i27;
      return (i27 = s18.hostUpdated) == null ? void 0 : i27.call(s18);
    }), this.hasUpdated || (this.hasUpdated = true, this.firstUpdated(e11)), this.updated(e11);
  }
  _$EU() {
    this._$AL = /* @__PURE__ */ new Map(), this.isUpdatePending = false;
  }
  get updateComplete() {
    return this.getUpdateComplete();
  }
  getUpdateComplete() {
    return this._$ES;
  }
  shouldUpdate(e11) {
    return true;
  }
  update(e11) {
    this._$Ej && (this._$Ej = this._$Ej.forEach((t19) => this._$EC(t19, this[t19]))), this._$EU();
  }
  updated(e11) {
  }
  firstUpdated(e11) {
  }
};
y.elementStyles = [], y.shadowRootOptions = { mode: "open" }, y[w("elementProperties")] = /* @__PURE__ */ new Map(), y[w("finalized")] = /* @__PURE__ */ new Map(), J == null || J({ ReactiveElement: y }), (g.reactiveElementVersions ?? (g.reactiveElementVersions = [])).push("2.0.4");
var H2 = globalThis;
var N = H2.trustedTypes;
var Z = N ? N.createPolicy("lit-html", { createHTML: (e11) => e11 }) : void 0;
var nt = "$lit$";
var f = `lit$${Math.random().toFixed(9).slice(2)}$`;
var ot2 = "?" + f;
var yt2 = `<${ot2}>`;
var A = document;
var C = () => A.createComment("");
var P = (e11) => e11 === null || typeof e11 != "object" && typeof e11 != "function";
var D = Array.isArray;
var gt = (e11) => D(e11) || typeof (e11 == null ? void 0 : e11[Symbol.iterator]) == "function";
var k = `[ 	
\f\r]`;
var S = /<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g;
var F = /-->/g;
var G = />/g;
var v2 = RegExp(`>|${k}(?:([^\\s"'>=/]+)(${k}*=${k}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`, "g");
var Q = /'/g;
var X = /"/g;
var rt = /^(?:script|style|textarea|title)$/i;
var lt = (e11) => (t19, ...s18) => ({ _$litType$: e11, strings: t19, values: s18 });
var Ht = lt(1);
var Nt = lt(2);
var E = Symbol.for("lit-noChange");
var p = Symbol.for("lit-nothing");
var Y = /* @__PURE__ */ new WeakMap();
var m = A.createTreeWalker(A, 129);
function ht(e11, t19) {
  if (!D(e11) || !e11.hasOwnProperty("raw"))
    throw Error("invalid template strings array");
  return Z !== void 0 ? Z.createHTML(t19) : t19;
}
var Et = (e11, t19) => {
  const s18 = e11.length - 1, i27 = [];
  let n33, r24 = t19 === 2 ? "<svg>" : t19 === 3 ? "<math>" : "", o12 = S;
  for (let h26 = 0; h26 < s18; h26++) {
    const l25 = e11[h26];
    let a22, c27, d34 = -1, _19 = 0;
    for (; _19 < l25.length && (o12.lastIndex = _19, c27 = o12.exec(l25), c27 !== null); )
      _19 = o12.lastIndex, o12 === S ? c27[1] === "!--" ? o12 = F : c27[1] !== void 0 ? o12 = G : c27[2] !== void 0 ? (rt.test(c27[2]) && (n33 = RegExp("</" + c27[2], "g")), o12 = v2) : c27[3] !== void 0 && (o12 = v2) : o12 === v2 ? c27[0] === ">" ? (o12 = n33 ?? S, d34 = -1) : c27[1] === void 0 ? d34 = -2 : (d34 = o12.lastIndex - c27[2].length, a22 = c27[1], o12 = c27[3] === void 0 ? v2 : c27[3] === '"' ? X : Q) : o12 === X || o12 === Q ? o12 = v2 : o12 === F || o12 === G ? o12 = S : (o12 = v2, n33 = void 0);
    const u35 = o12 === v2 && e11[h26 + 1].startsWith("/>") ? " " : "";
    r24 += o12 === S ? l25 + yt2 : d34 >= 0 ? (i27.push(a22), l25.slice(0, d34) + nt + l25.slice(d34) + f + u35) : l25 + f + (d34 === -2 ? h26 : u35);
  }
  return [ht(e11, r24 + (e11[s18] || "<?>") + (t19 === 2 ? "</svg>" : t19 === 3 ? "</math>" : "")), i27];
};
var U = class _U {
  constructor({ strings: t19, _$litType$: s18 }, i27) {
    let n33;
    this.parts = [];
    let r24 = 0, o12 = 0;
    const h26 = t19.length - 1, l25 = this.parts, [a22, c27] = Et(t19, s18);
    if (this.el = _U.createElement(a22, i27), m.currentNode = this.el.content, s18 === 2 || s18 === 3) {
      const d34 = this.el.content.firstChild;
      d34.replaceWith(...d34.childNodes);
    }
    for (; (n33 = m.nextNode()) !== null && l25.length < h26; ) {
      if (n33.nodeType === 1) {
        if (n33.hasAttributes())
          for (const d34 of n33.getAttributeNames())
            if (d34.endsWith(nt)) {
              const _19 = c27[o12++], u35 = n33.getAttribute(d34).split(f), $24 = /([.?@])?(.*)/.exec(_19);
              l25.push({ type: 1, index: r24, name: $24[2], strings: u35, ctor: $24[1] === "." ? St : $24[1] === "?" ? wt : $24[1] === "@" ? Ct : R }), n33.removeAttribute(d34);
            } else
              d34.startsWith(f) && (l25.push({ type: 6, index: r24 }), n33.removeAttribute(d34));
        if (rt.test(n33.tagName)) {
          const d34 = n33.textContent.split(f), _19 = d34.length - 1;
          if (_19 > 0) {
            n33.textContent = N ? N.emptyScript : "";
            for (let u35 = 0; u35 < _19; u35++)
              n33.append(d34[u35], C()), m.nextNode(), l25.push({ type: 2, index: ++r24 });
            n33.append(d34[_19], C());
          }
        }
      } else if (n33.nodeType === 8)
        if (n33.data === ot2)
          l25.push({ type: 2, index: r24 });
        else {
          let d34 = -1;
          for (; (d34 = n33.data.indexOf(f, d34 + 1)) !== -1; )
            l25.push({ type: 7, index: r24 }), d34 += f.length - 1;
        }
      r24++;
    }
  }
  static createElement(t19, s18) {
    const i27 = A.createElement("template");
    return i27.innerHTML = t19, i27;
  }
};
function b(e11, t19, s18 = e11, i27) {
  var n33, r24;
  if (t19 === E)
    return t19;
  let o12 = i27 !== void 0 ? (n33 = s18._$Co) == null ? void 0 : n33[i27] : s18._$Cl;
  const h26 = P(t19) ? void 0 : t19._$litDirective$;
  return (o12 == null ? void 0 : o12.constructor) !== h26 && ((r24 = o12 == null ? void 0 : o12._$AO) == null || r24.call(o12, false), h26 === void 0 ? o12 = void 0 : (o12 = new h26(e11), o12._$AT(e11, s18, i27)), i27 !== void 0 ? (s18._$Co ?? (s18._$Co = []))[i27] = o12 : s18._$Cl = o12), o12 !== void 0 && (t19 = b(e11, o12._$AS(e11, t19.values), o12, i27)), t19;
}
var bt = class {
  constructor(t19, s18) {
    this._$AV = [], this._$AN = void 0, this._$AD = t19, this._$AM = s18;
  }
  get parentNode() {
    return this._$AM.parentNode;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  u(t19) {
    const { el: { content: s18 }, parts: i27 } = this._$AD, n33 = ((t19 == null ? void 0 : t19.creationScope) ?? A).importNode(s18, true);
    m.currentNode = n33;
    let r24 = m.nextNode(), o12 = 0, h26 = 0, l25 = i27[0];
    for (; l25 !== void 0; ) {
      if (o12 === l25.index) {
        let a22;
        l25.type === 2 ? a22 = new O(r24, r24.nextSibling, this, t19) : l25.type === 1 ? a22 = new l25.ctor(r24, l25.name, l25.strings, this, t19) : l25.type === 6 && (a22 = new Pt(r24, this, t19)), this._$AV.push(a22), l25 = i27[++h26];
      }
      o12 !== (l25 == null ? void 0 : l25.index) && (r24 = m.nextNode(), o12++);
    }
    return m.currentNode = A, n33;
  }
  p(t19) {
    let s18 = 0;
    for (const i27 of this._$AV)
      i27 !== void 0 && (i27.strings !== void 0 ? (i27._$AI(t19, i27, s18), s18 += i27.strings.length - 2) : i27._$AI(t19[s18])), s18++;
  }
};
var O = class _O {
  get _$AU() {
    var t19;
    return ((t19 = this._$AM) == null ? void 0 : t19._$AU) ?? this._$Cv;
  }
  constructor(t19, s18, i27, n33) {
    this.type = 2, this._$AH = p, this._$AN = void 0, this._$AA = t19, this._$AB = s18, this._$AM = i27, this.options = n33, this._$Cv = (n33 == null ? void 0 : n33.isConnected) ?? true;
  }
  get parentNode() {
    let t19 = this._$AA.parentNode;
    const s18 = this._$AM;
    return s18 !== void 0 && (t19 == null ? void 0 : t19.nodeType) === 11 && (t19 = s18.parentNode), t19;
  }
  get startNode() {
    return this._$AA;
  }
  get endNode() {
    return this._$AB;
  }
  _$AI(t19, s18 = this) {
    t19 = b(this, t19, s18), P(t19) ? t19 === p || t19 == null || t19 === "" ? (this._$AH !== p && this._$AR(), this._$AH = p) : t19 !== this._$AH && t19 !== E && this._(t19) : t19._$litType$ !== void 0 ? this.$(t19) : t19.nodeType !== void 0 ? this.T(t19) : gt(t19) ? this.k(t19) : this._(t19);
  }
  O(t19) {
    return this._$AA.parentNode.insertBefore(t19, this._$AB);
  }
  T(t19) {
    this._$AH !== t19 && (this._$AR(), this._$AH = this.O(t19));
  }
  _(t19) {
    this._$AH !== p && P(this._$AH) ? this._$AA.nextSibling.data = t19 : this.T(A.createTextNode(t19)), this._$AH = t19;
  }
  $(t19) {
    var s18;
    const { values: i27, _$litType$: n33 } = t19, r24 = typeof n33 == "number" ? this._$AC(t19) : (n33.el === void 0 && (n33.el = U.createElement(ht(n33.h, n33.h[0]), this.options)), n33);
    if (((s18 = this._$AH) == null ? void 0 : s18._$AD) === r24)
      this._$AH.p(i27);
    else {
      const o12 = new bt(r24, this), h26 = o12.u(this.options);
      o12.p(i27), this.T(h26), this._$AH = o12;
    }
  }
  _$AC(t19) {
    let s18 = Y.get(t19.strings);
    return s18 === void 0 && Y.set(t19.strings, s18 = new U(t19)), s18;
  }
  k(t19) {
    D(this._$AH) || (this._$AH = [], this._$AR());
    const s18 = this._$AH;
    let i27, n33 = 0;
    for (const r24 of t19)
      n33 === s18.length ? s18.push(i27 = new _O(this.O(C()), this.O(C()), this, this.options)) : i27 = s18[n33], i27._$AI(r24), n33++;
    n33 < s18.length && (this._$AR(i27 && i27._$AB.nextSibling, n33), s18.length = n33);
  }
  _$AR(t19 = this._$AA.nextSibling, s18) {
    var i27;
    for ((i27 = this._$AP) == null ? void 0 : i27.call(this, false, true, s18); t19 && t19 !== this._$AB; ) {
      const n33 = t19.nextSibling;
      t19.remove(), t19 = n33;
    }
  }
  setConnected(t19) {
    var s18;
    this._$AM === void 0 && (this._$Cv = t19, (s18 = this._$AP) == null || s18.call(this, t19));
  }
};
var R = class {
  get tagName() {
    return this.element.tagName;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  constructor(t19, s18, i27, n33, r24) {
    this.type = 1, this._$AH = p, this._$AN = void 0, this.element = t19, this.name = s18, this._$AM = n33, this.options = r24, i27.length > 2 || i27[0] !== "" || i27[1] !== "" ? (this._$AH = Array(i27.length - 1).fill(new String()), this.strings = i27) : this._$AH = p;
  }
  _$AI(t19, s18 = this, i27, n33) {
    const r24 = this.strings;
    let o12 = false;
    if (r24 === void 0)
      t19 = b(this, t19, s18, 0), o12 = !P(t19) || t19 !== this._$AH && t19 !== E, o12 && (this._$AH = t19);
    else {
      const h26 = t19;
      let l25, a22;
      for (t19 = r24[0], l25 = 0; l25 < r24.length - 1; l25++)
        a22 = b(this, h26[i27 + l25], s18, l25), a22 === E && (a22 = this._$AH[l25]), o12 || (o12 = !P(a22) || a22 !== this._$AH[l25]), a22 === p ? t19 = p : t19 !== p && (t19 += (a22 ?? "") + r24[l25 + 1]), this._$AH[l25] = a22;
    }
    o12 && !n33 && this.j(t19);
  }
  j(t19) {
    t19 === p ? this.element.removeAttribute(this.name) : this.element.setAttribute(this.name, t19 ?? "");
  }
};
var St = class extends R {
  constructor() {
    super(...arguments), this.type = 3;
  }
  j(t19) {
    this.element[this.name] = t19 === p ? void 0 : t19;
  }
};
var wt = class extends R {
  constructor() {
    super(...arguments), this.type = 4;
  }
  j(t19) {
    this.element.toggleAttribute(this.name, !!t19 && t19 !== p);
  }
};
var Ct = class extends R {
  constructor(t19, s18, i27, n33, r24) {
    super(t19, s18, i27, n33, r24), this.type = 5;
  }
  _$AI(t19, s18 = this) {
    if ((t19 = b(this, t19, s18, 0) ?? p) === E)
      return;
    const i27 = this._$AH, n33 = t19 === p && i27 !== p || t19.capture !== i27.capture || t19.once !== i27.once || t19.passive !== i27.passive, r24 = t19 !== p && (i27 === p || n33);
    n33 && this.element.removeEventListener(this.name, this, i27), r24 && this.element.addEventListener(this.name, this, t19), this._$AH = t19;
  }
  handleEvent(t19) {
    var s18;
    typeof this._$AH == "function" ? this._$AH.call(((s18 = this.options) == null ? void 0 : s18.host) ?? this.element, t19) : this._$AH.handleEvent(t19);
  }
};
var Pt = class {
  constructor(t19, s18, i27) {
    this.element = t19, this.type = 6, this._$AN = void 0, this._$AM = s18, this.options = i27;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  _$AI(t19) {
    b(this, t19);
  }
};
var tt = H2.litHtmlPolyfillSupport;
tt == null || tt(U, O), (H2.litHtmlVersions ?? (H2.litHtmlVersions = [])).push("3.2.1");
var Ut2 = (e11, t19, s18) => {
  const i27 = (s18 == null ? void 0 : s18.renderBefore) ?? t19;
  let n33 = i27._$litPart$;
  if (n33 === void 0) {
    const r24 = (s18 == null ? void 0 : s18.renderBefore) ?? null;
    i27._$litPart$ = n33 = new O(t19.insertBefore(C(), r24), r24, void 0, s18 ?? {});
  }
  return n33._$AI(e11), n33;
};
var x = class extends y {
  constructor() {
    super(...arguments), this.renderOptions = { host: this }, this._$Do = void 0;
  }
  createRenderRoot() {
    var e11;
    const t19 = super.createRenderRoot();
    return (e11 = this.renderOptions).renderBefore ?? (e11.renderBefore = t19.firstChild), t19;
  }
  update(e11) {
    const t19 = this.render();
    this.hasUpdated || (this.renderOptions.isConnected = this.isConnected), super.update(e11), this._$Do = Ut2(t19, this.renderRoot, this.renderOptions);
  }
  connectedCallback() {
    var e11;
    super.connectedCallback(), (e11 = this._$Do) == null || e11.setConnected(true);
  }
  disconnectedCallback() {
    var e11;
    super.disconnectedCallback(), (e11 = this._$Do) == null || e11.setConnected(false);
  }
  render() {
    return E;
  }
};
var et;
x._$litElement$ = true, x.finalized = true, (et = globalThis.litElementHydrateSupport) == null || et.call(globalThis, { LitElement: x });
var st = globalThis.litElementPolyfillSupport;
st == null || st({ LitElement: x });
(globalThis.litElementVersions ?? (globalThis.litElementVersions = [])).push("4.1.1");
var Ot2 = { attribute: true, type: String, converter: M, reflect: false, hasChanged: z };
var Tt2 = (e11 = Ot2, t19, s18) => {
  const { kind: i27, metadata: n33 } = s18;
  let r24 = globalThis.litPropertyMetadata.get(n33);
  if (r24 === void 0 && globalThis.litPropertyMetadata.set(n33, r24 = /* @__PURE__ */ new Map()), r24.set(s18.name, e11), i27 === "accessor") {
    const { name: o12 } = s18;
    return { set(h26) {
      const l25 = t19.get.call(this);
      t19.set.call(this, h26), this.requestUpdate(o12, l25, e11);
    }, init(h26) {
      return h26 !== void 0 && this.P(o12, void 0, e11), h26;
    } };
  }
  if (i27 === "setter") {
    const { name: o12 } = s18;
    return function(h26) {
      const l25 = this[o12];
      t19.call(this, h26), this.requestUpdate(o12, l25, e11);
    };
  }
  throw Error("Unsupported decorator location: " + i27);
};
function Rt(e11) {
  return (t19, s18) => typeof s18 == "object" ? Tt2(e11, t19, s18) : ((i27, n33, r24) => {
    const o12 = n33.hasOwnProperty(r24);
    return n33.constructor.createProperty(r24, o12 ? { ...i27, wrapped: true } : i27), o12 ? Object.getOwnPropertyDescriptor(n33, r24) : void 0;
  })(e11, t19, s18);
}

// node_modules/@frc-web-components/react/dist/state-Cn3aen3G-6b8e5a08.js
function n2(t19) {
  return Rt({ ...t19, state: true, attribute: false });
}

// node_modules/@frc-web-components/react/dist/query-BrpQj_Qi-db00b239.js
var i2 = (o12, r24, t19) => (t19.configurable = true, t19.enumerable = true, Reflect.decorate && typeof r24 != "object" && Object.defineProperty(o12, r24, t19), t19);
function a(o12, r24) {
  return (t19, u35, l25) => {
    const c27 = (s18) => {
      var n33;
      return ((n33 = s18.renderRoot) == null ? void 0 : n33.querySelector(o12)) ?? null;
    };
    if (r24) {
      const { get: s18, set: n33 } = typeof u35 == "object" ? t19 : l25 ?? (() => {
        const e11 = Symbol();
        return { get() {
          return this[e11];
        }, set(h26) {
          this[e11] = h26;
        } };
      })();
      return i2(t19, u35, { get() {
        let e11 = s18.call(this);
        return e11 === void 0 && (e11 = c27(this), (e11 !== null || this.hasUpdated) && n33.call(this, e11)), e11;
      } });
    }
    return i2(t19, u35, { get() {
      return c27(this);
    } });
  };
}

// node_modules/@frc-web-components/react/dist/bar.es-bc02d3c5.js
var b2 = Object.defineProperty;
var v3 = Object.getOwnPropertyDescriptor;
var a2 = (d34, t19, e11, o12) => {
  for (var s18 = o12 > 1 ? void 0 : o12 ? v3(t19, e11) : t19, r24 = d34.length - 1, i27; r24 >= 0; r24--)
    (i27 = d34[r24]) && (s18 = (o12 ? i27(t19, e11, s18) : i27(s18)) || s18);
  return o12 && s18 && b2(t19, e11, s18), s18;
};
function u(d34, t19, e11) {
  return Math.min(e11, Math.max(d34, t19));
}
var h2 = class extends x {
  constructor() {
    super(...arguments), this._min = -1, this._max = 1, this.value = 0, this.center = 0, this.dragging = false;
  }
  get min() {
    return Math.min(this._min, this._max);
  }
  set min(t19) {
    const e11 = this._min;
    this._min = t19, this.requestUpdate("min", e11);
  }
  get max() {
    return Math.max(this._min, this._max);
  }
  set max(t19) {
    const e11 = this._max;
    this._max = t19, this.requestUpdate("max", e11);
  }
  updateForeground() {
    const { min: t19, max: e11, center: o12, value: s18, foreground: r24 } = this, i27 = u(s18, t19, e11);
    e11 < o12 ? (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - e11) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-left", "auto"), r24.style.setProperty("--foreground-right", "0")) : t19 > o12 ? (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - t19) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-left", "0"), r24.style.setProperty("--foreground-right", "auto")) : i27 > o12 ? (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - o12) / (e11 - t19) * 100}%`
    ), r24.style.setProperty(
      "--foreground-left",
      `${Math.abs(t19 - o12) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-right", "auto")) : (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - o12) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-left", "auto"), r24.style.setProperty(
      "--foreground-right",
      `${Math.abs(e11 - o12) / (e11 - t19) * 100}%`
    ));
  }
  resized() {
    this.updateForeground();
  }
  updated() {
    this.updateForeground();
  }
  setDragPosition(t19) {
    const { left: e11, width: o12 } = this.getBoundingClientRect(), s18 = t19.clientX - e11, r24 = u(s18 / o12, 0, 1), i27 = this.min + (this.max - this.min) * r24, p26 = new CustomEvent("barDrag", {
      bubbles: true,
      composed: true,
      detail: { value: i27 }
    });
    this.dispatchEvent(p26);
  }
  firstUpdated() {
    this.setAttribute("draggable", "false"), window.addEventListener("mousemove", (t19) => {
      this.dragging && this.setDragPosition(t19);
    }), window.addEventListener("mouseup", () => {
      this.dragging = false;
    });
  }
  onMouseDown(t19) {
    this.dragging = true, this.setDragPosition(t19);
  }
  render() {
    return Ht`
      <div part="foreground" draggble="false"></div>
      <div class="content" draggable="false">
        <slot></slot>
      </div>
      <div part="dragger" @mousedown="${this.onMouseDown}"></div>
    `;
  }
};
h2.styles = Mt2`
    :host {
      display: inline-block;
      position: relative;
      width: 300px;
      height: 20px;
      background: var(--frc-bar-background, #ddd);
      color: var(--frc-bar-color, black);
      font-size: 15px;
      line-height: 18px;
      text-align: center;
    }

    [part='dragger'] {
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    }

    [part='foreground'] {
      position: absolute;
      top: 0;
      height: 100%;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
      width: var(--foreground-width);
      left: var(--foreground-left);
      right: var(--foreground-right);
      pointer-events: none;
    }

    .content {
      position: relative;
    }
  `;
var n3 = h2;
a2([
  Rt({ type: Number })
], n3.prototype, "value", 2);
a2([
  Rt({ type: Number })
], n3.prototype, "center", 2);
a2([
  n2()
], n3.prototype, "dragging", 2);
a2([
  Rt({ type: Number })
], n3.prototype, "min", 1);
a2([
  Rt({ type: Number })
], n3.prototype, "max", 1);
a2([
  a("[part=foreground]")
], n3.prototype, "foreground", 2);
customElements.get("frc-bar") || customElements.define("frc-bar", n3);

// node_modules/@frc-web-components/react/dist/transform-DR-Bw75L-3629b551.js
var fn = { value: () => {
} };
function Ht2() {
  for (var t19 = 0, n33 = arguments.length, e11 = {}, r24; t19 < n33; ++t19) {
    if (!(r24 = arguments[t19] + "") || r24 in e11 || /[\s.]/.test(r24))
      throw new Error("illegal type: " + r24);
    e11[r24] = [];
  }
  return new F2(e11);
}
function F2(t19) {
  this._ = t19;
}
function pn(t19, n33) {
  return t19.trim().split(/^|\s+/).map(function(e11) {
    var r24 = "", i27 = e11.indexOf(".");
    if (i27 >= 0 && (r24 = e11.slice(i27 + 1), e11 = e11.slice(0, i27)), e11 && !n33.hasOwnProperty(e11))
      throw new Error("unknown type: " + e11);
    return { type: e11, name: r24 };
  });
}
F2.prototype = Ht2.prototype = {
  constructor: F2,
  on: function(t19, n33) {
    var e11 = this._, r24 = pn(t19 + "", e11), i27, o12 = -1, u35 = r24.length;
    if (arguments.length < 2) {
      for (; ++o12 < u35; )
        if ((i27 = (t19 = r24[o12]).type) && (i27 = gn(e11[i27], t19.name)))
          return i27;
      return;
    }
    if (n33 != null && typeof n33 != "function")
      throw new Error("invalid callback: " + n33);
    for (; ++o12 < u35; )
      if (i27 = (t19 = r24[o12]).type)
        e11[i27] = bt2(e11[i27], t19.name, n33);
      else if (n33 == null)
        for (i27 in e11)
          e11[i27] = bt2(e11[i27], t19.name, null);
    return this;
  },
  copy: function() {
    var t19 = {}, n33 = this._;
    for (var e11 in n33)
      t19[e11] = n33[e11].slice();
    return new F2(t19);
  },
  call: function(t19, n33) {
    if ((i27 = arguments.length - 2) > 0)
      for (var e11 = new Array(i27), r24 = 0, i27, o12; r24 < i27; ++r24)
        e11[r24] = arguments[r24 + 2];
    if (!this._.hasOwnProperty(t19))
      throw new Error("unknown type: " + t19);
    for (o12 = this._[t19], r24 = 0, i27 = o12.length; r24 < i27; ++r24)
      o12[r24].value.apply(n33, e11);
  },
  apply: function(t19, n33, e11) {
    if (!this._.hasOwnProperty(t19))
      throw new Error("unknown type: " + t19);
    for (var r24 = this._[t19], i27 = 0, o12 = r24.length; i27 < o12; ++i27)
      r24[i27].value.apply(n33, e11);
  }
};
function gn(t19, n33) {
  for (var e11 = 0, r24 = t19.length, i27; e11 < r24; ++e11)
    if ((i27 = t19[e11]).name === n33)
      return i27.value;
}
function bt2(t19, n33, e11) {
  for (var r24 = 0, i27 = t19.length; r24 < i27; ++r24)
    if (t19[r24].name === n33) {
      t19[r24] = fn, t19 = t19.slice(0, r24).concat(t19.slice(r24 + 1));
      break;
    }
  return e11 != null && t19.push({ name: n33, value: e11 }), t19;
}
var at = "http://www.w3.org/1999/xhtml";
var xt2 = {
  svg: "http://www.w3.org/2000/svg",
  xhtml: at,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};
function et2(t19) {
  var n33 = t19 += "", e11 = n33.indexOf(":");
  return e11 >= 0 && (n33 = t19.slice(0, e11)) !== "xmlns" && (t19 = t19.slice(e11 + 1)), xt2.hasOwnProperty(n33) ? { space: xt2[n33], local: t19 } : t19;
}
function dn(t19) {
  return function() {
    var n33 = this.ownerDocument, e11 = this.namespaceURI;
    return e11 === at && n33.documentElement.namespaceURI === at ? n33.createElement(t19) : n33.createElementNS(e11, t19);
  };
}
function yn(t19) {
  return function() {
    return this.ownerDocument.createElementNS(t19.space, t19.local);
  };
}
function jt(t19) {
  var n33 = et2(t19);
  return (n33.local ? yn : dn)(n33);
}
function mn() {
}
function pt2(t19) {
  return t19 == null ? mn : function() {
    return this.querySelector(t19);
  };
}
function vn(t19) {
  typeof t19 != "function" && (t19 = pt2(t19));
  for (var n33 = this._groups, e11 = n33.length, r24 = new Array(e11), i27 = 0; i27 < e11; ++i27)
    for (var o12 = n33[i27], u35 = o12.length, a22 = r24[i27] = new Array(u35), s18, l25, c27 = 0; c27 < u35; ++c27)
      (s18 = o12[c27]) && (l25 = t19.call(s18, s18.__data__, c27, o12)) && ("__data__" in s18 && (l25.__data__ = s18.__data__), a22[c27] = l25);
  return new m2(r24, this._parents);
}
function _n(t19) {
  return t19 == null ? [] : Array.isArray(t19) ? t19 : Array.from(t19);
}
function wn() {
  return [];
}
function It(t19) {
  return t19 == null ? wn : function() {
    return this.querySelectorAll(t19);
  };
}
function bn(t19) {
  return function() {
    return _n(t19.apply(this, arguments));
  };
}
function xn(t19) {
  typeof t19 == "function" ? t19 = bn(t19) : t19 = It(t19);
  for (var n33 = this._groups, e11 = n33.length, r24 = [], i27 = [], o12 = 0; o12 < e11; ++o12)
    for (var u35 = n33[o12], a22 = u35.length, s18, l25 = 0; l25 < a22; ++l25)
      (s18 = u35[l25]) && (r24.push(t19.call(s18, s18.__data__, l25, u35)), i27.push(s18));
  return new m2(r24, i27);
}
function Lt(t19) {
  return function() {
    return this.matches(t19);
  };
}
function Dt(t19) {
  return function(n33) {
    return n33.matches(t19);
  };
}
var kn = Array.prototype.find;
function An(t19) {
  return function() {
    return kn.call(this.children, t19);
  };
}
function Nn() {
  return this.firstElementChild;
}
function En(t19) {
  return this.select(t19 == null ? Nn : An(typeof t19 == "function" ? t19 : Dt(t19)));
}
var $n = Array.prototype.filter;
function Sn() {
  return Array.from(this.children);
}
function Mn(t19) {
  return function() {
    return $n.call(this.children, t19);
  };
}
function Cn(t19) {
  return this.selectAll(t19 == null ? Sn : Mn(typeof t19 == "function" ? t19 : Dt(t19)));
}
function qn(t19) {
  typeof t19 != "function" && (t19 = Lt(t19));
  for (var n33 = this._groups, e11 = n33.length, r24 = new Array(e11), i27 = 0; i27 < e11; ++i27)
    for (var o12 = n33[i27], u35 = o12.length, a22 = r24[i27] = [], s18, l25 = 0; l25 < u35; ++l25)
      (s18 = o12[l25]) && t19.call(s18, s18.__data__, l25, o12) && a22.push(s18);
  return new m2(r24, this._parents);
}
function Bt(t19) {
  return new Array(t19.length);
}
function Xn() {
  return new m2(this._enter || this._groups.map(Bt), this._parents);
}
function G2(t19, n33) {
  this.ownerDocument = t19.ownerDocument, this.namespaceURI = t19.namespaceURI, this._next = null, this._parent = t19, this.__data__ = n33;
}
G2.prototype = {
  constructor: G2,
  appendChild: function(t19) {
    return this._parent.insertBefore(t19, this._next);
  },
  insertBefore: function(t19, n33) {
    return this._parent.insertBefore(t19, n33);
  },
  querySelector: function(t19) {
    return this._parent.querySelector(t19);
  },
  querySelectorAll: function(t19) {
    return this._parent.querySelectorAll(t19);
  }
};
function Pn(t19) {
  return function() {
    return t19;
  };
}
function On(t19, n33, e11, r24, i27, o12) {
  for (var u35 = 0, a22, s18 = n33.length, l25 = o12.length; u35 < l25; ++u35)
    (a22 = n33[u35]) ? (a22.__data__ = o12[u35], r24[u35] = a22) : e11[u35] = new G2(t19, o12[u35]);
  for (; u35 < s18; ++u35)
    (a22 = n33[u35]) && (i27[u35] = a22);
}
function Tn(t19, n33, e11, r24, i27, o12, u35) {
  var a22, s18, l25 = /* @__PURE__ */ new Map(), c27 = n33.length, h26 = o12.length, f39 = new Array(c27), p26;
  for (a22 = 0; a22 < c27; ++a22)
    (s18 = n33[a22]) && (f39[a22] = p26 = u35.call(s18, s18.__data__, a22, n33) + "", l25.has(p26) ? i27[a22] = s18 : l25.set(p26, s18));
  for (a22 = 0; a22 < h26; ++a22)
    p26 = u35.call(t19, o12[a22], a22, o12) + "", (s18 = l25.get(p26)) ? (r24[a22] = s18, s18.__data__ = o12[a22], l25.delete(p26)) : e11[a22] = new G2(t19, o12[a22]);
  for (a22 = 0; a22 < c27; ++a22)
    (s18 = n33[a22]) && l25.get(f39[a22]) === s18 && (i27[a22] = s18);
}
function Rn(t19) {
  return t19.__data__;
}
function Hn(t19, n33) {
  if (!arguments.length)
    return Array.from(this, Rn);
  var e11 = n33 ? Tn : On, r24 = this._parents, i27 = this._groups;
  typeof t19 != "function" && (t19 = Pn(t19));
  for (var o12 = i27.length, u35 = new Array(o12), a22 = new Array(o12), s18 = new Array(o12), l25 = 0; l25 < o12; ++l25) {
    var c27 = r24[l25], h26 = i27[l25], f39 = h26.length, p26 = jn(t19.call(c27, c27 && c27.__data__, l25, r24)), g31 = p26.length, d34 = a22[l25] = new Array(g31), N19 = u35[l25] = new Array(g31), hn4 = s18[l25] = new Array(f39);
    e11(c27, h26, d34, N19, hn4, p26, n33);
    for (var X12 = 0, Y11 = 0, _t9, wt9; X12 < g31; ++X12)
      if (_t9 = d34[X12]) {
        for (X12 >= Y11 && (Y11 = X12 + 1); !(wt9 = N19[Y11]) && ++Y11 < g31; )
          ;
        _t9._next = wt9 || null;
      }
  }
  return u35 = new m2(u35, r24), u35._enter = a22, u35._exit = s18, u35;
}
function jn(t19) {
  return typeof t19 == "object" && "length" in t19 ? t19 : Array.from(t19);
}
function In() {
  return new m2(this._exit || this._groups.map(Bt), this._parents);
}
function Ln(t19, n33, e11) {
  var r24 = this.enter(), i27 = this, o12 = this.exit();
  return typeof t19 == "function" ? (r24 = t19(r24), r24 && (r24 = r24.selection())) : r24 = r24.append(t19 + ""), n33 != null && (i27 = n33(i27), i27 && (i27 = i27.selection())), e11 == null ? o12.remove() : e11(o12), r24 && i27 ? r24.merge(i27).order() : i27;
}
function Dn(t19) {
  for (var n33 = t19.selection ? t19.selection() : t19, e11 = this._groups, r24 = n33._groups, i27 = e11.length, o12 = r24.length, u35 = Math.min(i27, o12), a22 = new Array(i27), s18 = 0; s18 < u35; ++s18)
    for (var l25 = e11[s18], c27 = r24[s18], h26 = l25.length, f39 = a22[s18] = new Array(h26), p26, g31 = 0; g31 < h26; ++g31)
      (p26 = l25[g31] || c27[g31]) && (f39[g31] = p26);
  for (; s18 < i27; ++s18)
    a22[s18] = e11[s18];
  return new m2(a22, this._parents);
}
function Bn() {
  for (var t19 = this._groups, n33 = -1, e11 = t19.length; ++n33 < e11; )
    for (var r24 = t19[n33], i27 = r24.length - 1, o12 = r24[i27], u35; --i27 >= 0; )
      (u35 = r24[i27]) && (o12 && u35.compareDocumentPosition(o12) ^ 4 && o12.parentNode.insertBefore(u35, o12), o12 = u35);
  return this;
}
function Yn(t19) {
  t19 || (t19 = Vn);
  function n33(h26, f39) {
    return h26 && f39 ? t19(h26.__data__, f39.__data__) : !h26 - !f39;
  }
  for (var e11 = this._groups, r24 = e11.length, i27 = new Array(r24), o12 = 0; o12 < r24; ++o12) {
    for (var u35 = e11[o12], a22 = u35.length, s18 = i27[o12] = new Array(a22), l25, c27 = 0; c27 < a22; ++c27)
      (l25 = u35[c27]) && (s18[c27] = l25);
    s18.sort(n33);
  }
  return new m2(i27, this._parents).order();
}
function Vn(t19, n33) {
  return t19 < n33 ? -1 : t19 > n33 ? 1 : t19 >= n33 ? 0 : NaN;
}
function zn() {
  var t19 = arguments[0];
  return arguments[0] = this, t19.apply(null, arguments), this;
}
function Un() {
  return Array.from(this);
}
function Fn() {
  for (var t19 = this._groups, n33 = 0, e11 = t19.length; n33 < e11; ++n33)
    for (var r24 = t19[n33], i27 = 0, o12 = r24.length; i27 < o12; ++i27) {
      var u35 = r24[i27];
      if (u35)
        return u35;
    }
  return null;
}
function Kn() {
  let t19 = 0;
  for (const n33 of this)
    ++t19;
  return t19;
}
function Wn() {
  return !this.node();
}
function Gn(t19) {
  for (var n33 = this._groups, e11 = 0, r24 = n33.length; e11 < r24; ++e11)
    for (var i27 = n33[e11], o12 = 0, u35 = i27.length, a22; o12 < u35; ++o12)
      (a22 = i27[o12]) && t19.call(a22, a22.__data__, o12, i27);
  return this;
}
function Jn(t19) {
  return function() {
    this.removeAttribute(t19);
  };
}
function Qn(t19) {
  return function() {
    this.removeAttributeNS(t19.space, t19.local);
  };
}
function Zn(t19, n33) {
  return function() {
    this.setAttribute(t19, n33);
  };
}
function te(t19, n33) {
  return function() {
    this.setAttributeNS(t19.space, t19.local, n33);
  };
}
function ne(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    e11 == null ? this.removeAttribute(t19) : this.setAttribute(t19, e11);
  };
}
function ee(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    e11 == null ? this.removeAttributeNS(t19.space, t19.local) : this.setAttributeNS(t19.space, t19.local, e11);
  };
}
function re(t19, n33) {
  var e11 = et2(t19);
  if (arguments.length < 2) {
    var r24 = this.node();
    return e11.local ? r24.getAttributeNS(e11.space, e11.local) : r24.getAttribute(e11);
  }
  return this.each((n33 == null ? e11.local ? Qn : Jn : typeof n33 == "function" ? e11.local ? ee : ne : e11.local ? te : Zn)(e11, n33));
}
function Yt(t19) {
  return t19.ownerDocument && t19.ownerDocument.defaultView || t19.document && t19 || t19.defaultView;
}
function ie(t19) {
  return function() {
    this.style.removeProperty(t19);
  };
}
function oe(t19, n33, e11) {
  return function() {
    this.style.setProperty(t19, n33, e11);
  };
}
function ue(t19, n33, e11) {
  return function() {
    var r24 = n33.apply(this, arguments);
    r24 == null ? this.style.removeProperty(t19) : this.style.setProperty(t19, r24, e11);
  };
}
function ae(t19, n33, e11) {
  return arguments.length > 1 ? this.each((n33 == null ? ie : typeof n33 == "function" ? ue : oe)(t19, n33, e11 ?? "")) : C2(this.node(), t19);
}
function C2(t19, n33) {
  return t19.style.getPropertyValue(n33) || Yt(t19).getComputedStyle(t19, null).getPropertyValue(n33);
}
function se(t19) {
  return function() {
    delete this[t19];
  };
}
function le(t19, n33) {
  return function() {
    this[t19] = n33;
  };
}
function ce(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    e11 == null ? delete this[t19] : this[t19] = e11;
  };
}
function he(t19, n33) {
  return arguments.length > 1 ? this.each((n33 == null ? se : typeof n33 == "function" ? ce : le)(t19, n33)) : this.node()[t19];
}
function Vt(t19) {
  return t19.trim().split(/^|\s+/);
}
function gt2(t19) {
  return t19.classList || new zt(t19);
}
function zt(t19) {
  this._node = t19, this._names = Vt(t19.getAttribute("class") || "");
}
zt.prototype = {
  add: function(t19) {
    var n33 = this._names.indexOf(t19);
    n33 < 0 && (this._names.push(t19), this._node.setAttribute("class", this._names.join(" ")));
  },
  remove: function(t19) {
    var n33 = this._names.indexOf(t19);
    n33 >= 0 && (this._names.splice(n33, 1), this._node.setAttribute("class", this._names.join(" ")));
  },
  contains: function(t19) {
    return this._names.indexOf(t19) >= 0;
  }
};
function Ut3(t19, n33) {
  for (var e11 = gt2(t19), r24 = -1, i27 = n33.length; ++r24 < i27; )
    e11.add(n33[r24]);
}
function Ft(t19, n33) {
  for (var e11 = gt2(t19), r24 = -1, i27 = n33.length; ++r24 < i27; )
    e11.remove(n33[r24]);
}
function fe(t19) {
  return function() {
    Ut3(this, t19);
  };
}
function pe(t19) {
  return function() {
    Ft(this, t19);
  };
}
function ge(t19, n33) {
  return function() {
    (n33.apply(this, arguments) ? Ut3 : Ft)(this, t19);
  };
}
function de(t19, n33) {
  var e11 = Vt(t19 + "");
  if (arguments.length < 2) {
    for (var r24 = gt2(this.node()), i27 = -1, o12 = e11.length; ++i27 < o12; )
      if (!r24.contains(e11[i27]))
        return false;
    return true;
  }
  return this.each((typeof n33 == "function" ? ge : n33 ? fe : pe)(e11, n33));
}
function ye() {
  this.textContent = "";
}
function me(t19) {
  return function() {
    this.textContent = t19;
  };
}
function ve(t19) {
  return function() {
    var n33 = t19.apply(this, arguments);
    this.textContent = n33 ?? "";
  };
}
function _e(t19) {
  return arguments.length ? this.each(t19 == null ? ye : (typeof t19 == "function" ? ve : me)(t19)) : this.node().textContent;
}
function we() {
  this.innerHTML = "";
}
function be(t19) {
  return function() {
    this.innerHTML = t19;
  };
}
function xe(t19) {
  return function() {
    var n33 = t19.apply(this, arguments);
    this.innerHTML = n33 ?? "";
  };
}
function ke(t19) {
  return arguments.length ? this.each(t19 == null ? we : (typeof t19 == "function" ? xe : be)(t19)) : this.node().innerHTML;
}
function Ae() {
  this.nextSibling && this.parentNode.appendChild(this);
}
function Ne() {
  return this.each(Ae);
}
function Ee() {
  this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function $e() {
  return this.each(Ee);
}
function Se(t19) {
  var n33 = typeof t19 == "function" ? t19 : jt(t19);
  return this.select(function() {
    return this.appendChild(n33.apply(this, arguments));
  });
}
function Me() {
  return null;
}
function Ce(t19, n33) {
  var e11 = typeof t19 == "function" ? t19 : jt(t19), r24 = n33 == null ? Me : typeof n33 == "function" ? n33 : pt2(n33);
  return this.select(function() {
    return this.insertBefore(e11.apply(this, arguments), r24.apply(this, arguments) || null);
  });
}
function qe() {
  var t19 = this.parentNode;
  t19 && t19.removeChild(this);
}
function Xe() {
  return this.each(qe);
}
function Pe() {
  var t19 = this.cloneNode(false), n33 = this.parentNode;
  return n33 ? n33.insertBefore(t19, this.nextSibling) : t19;
}
function Oe() {
  var t19 = this.cloneNode(true), n33 = this.parentNode;
  return n33 ? n33.insertBefore(t19, this.nextSibling) : t19;
}
function Te(t19) {
  return this.select(t19 ? Oe : Pe);
}
function Re(t19) {
  return arguments.length ? this.property("__data__", t19) : this.node().__data__;
}
function He(t19) {
  return function(n33) {
    t19.call(this, n33, this.__data__);
  };
}
function je(t19) {
  return t19.trim().split(/^|\s+/).map(function(n33) {
    var e11 = "", r24 = n33.indexOf(".");
    return r24 >= 0 && (e11 = n33.slice(r24 + 1), n33 = n33.slice(0, r24)), { type: n33, name: e11 };
  });
}
function Ie(t19) {
  return function() {
    var n33 = this.__on;
    if (n33) {
      for (var e11 = 0, r24 = -1, i27 = n33.length, o12; e11 < i27; ++e11)
        o12 = n33[e11], (!t19.type || o12.type === t19.type) && o12.name === t19.name ? this.removeEventListener(o12.type, o12.listener, o12.options) : n33[++r24] = o12;
      ++r24 ? n33.length = r24 : delete this.__on;
    }
  };
}
function Le(t19, n33, e11) {
  return function() {
    var r24 = this.__on, i27, o12 = He(n33);
    if (r24) {
      for (var u35 = 0, a22 = r24.length; u35 < a22; ++u35)
        if ((i27 = r24[u35]).type === t19.type && i27.name === t19.name) {
          this.removeEventListener(i27.type, i27.listener, i27.options), this.addEventListener(i27.type, i27.listener = o12, i27.options = e11), i27.value = n33;
          return;
        }
    }
    this.addEventListener(t19.type, o12, e11), i27 = { type: t19.type, name: t19.name, value: n33, listener: o12, options: e11 }, r24 ? r24.push(i27) : this.__on = [i27];
  };
}
function De(t19, n33, e11) {
  var r24 = je(t19 + ""), i27, o12 = r24.length, u35;
  if (arguments.length < 2) {
    var a22 = this.node().__on;
    if (a22) {
      for (var s18 = 0, l25 = a22.length, c27; s18 < l25; ++s18)
        for (i27 = 0, c27 = a22[s18]; i27 < o12; ++i27)
          if ((u35 = r24[i27]).type === c27.type && u35.name === c27.name)
            return c27.value;
    }
    return;
  }
  for (a22 = n33 ? Le : Ie, i27 = 0; i27 < o12; ++i27)
    this.each(a22(r24[i27], n33, e11));
  return this;
}
function Kt(t19, n33, e11) {
  var r24 = Yt(t19), i27 = r24.CustomEvent;
  typeof i27 == "function" ? i27 = new i27(n33, e11) : (i27 = r24.document.createEvent("Event"), e11 ? (i27.initEvent(n33, e11.bubbles, e11.cancelable), i27.detail = e11.detail) : i27.initEvent(n33, false, false)), t19.dispatchEvent(i27);
}
function Be(t19, n33) {
  return function() {
    return Kt(this, t19, n33);
  };
}
function Ye(t19, n33) {
  return function() {
    return Kt(this, t19, n33.apply(this, arguments));
  };
}
function Ve(t19, n33) {
  return this.each((typeof n33 == "function" ? Ye : Be)(t19, n33));
}
function* ze() {
  for (var t19 = this._groups, n33 = 0, e11 = t19.length; n33 < e11; ++n33)
    for (var r24 = t19[n33], i27 = 0, o12 = r24.length, u35; i27 < o12; ++i27)
      (u35 = r24[i27]) && (yield u35);
}
var Wt = [null];
function m2(t19, n33) {
  this._groups = t19, this._parents = n33;
}
function D2() {
  return new m2([[document.documentElement]], Wt);
}
function Ue() {
  return this;
}
m2.prototype = D2.prototype = {
  constructor: m2,
  select: vn,
  selectAll: xn,
  selectChild: En,
  selectChildren: Cn,
  filter: qn,
  data: Hn,
  enter: Xn,
  exit: In,
  join: Ln,
  merge: Dn,
  selection: Ue,
  order: Bn,
  sort: Yn,
  call: zn,
  nodes: Un,
  node: Fn,
  size: Kn,
  empty: Wn,
  each: Gn,
  attr: re,
  style: ae,
  property: he,
  classed: de,
  text: _e,
  html: ke,
  raise: Ne,
  lower: $e,
  append: Se,
  insert: Ce,
  remove: Xe,
  clone: Te,
  datum: Re,
  on: De,
  dispatch: Ve,
  [Symbol.iterator]: ze
};
function $i(t19) {
  return typeof t19 == "string" ? new m2([[document.querySelector(t19)]], [document.documentElement]) : new m2([[t19]], Wt);
}
function dt2(t19, n33, e11) {
  t19.prototype = n33.prototype = e11, e11.constructor = t19;
}
function Gt(t19, n33) {
  var e11 = Object.create(t19.prototype);
  for (var r24 in n33)
    e11[r24] = n33[r24];
  return e11;
}
function B2() {
}
var H3 = 0.7;
var J2 = 1 / H3;
var M2 = "\\s*([+-]?\\d+)\\s*";
var j2 = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*";
var w2 = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*";
var Fe = /^#([0-9a-f]{3,8})$/;
var Ke = new RegExp(`^rgb\\(${M2},${M2},${M2}\\)$`);
var We = new RegExp(`^rgb\\(${w2},${w2},${w2}\\)$`);
var Ge = new RegExp(`^rgba\\(${M2},${M2},${M2},${j2}\\)$`);
var Je = new RegExp(`^rgba\\(${w2},${w2},${w2},${j2}\\)$`);
var Qe = new RegExp(`^hsl\\(${j2},${w2},${w2}\\)$`);
var Ze = new RegExp(`^hsla\\(${j2},${w2},${w2},${j2}\\)$`);
var kt = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
dt2(B2, I2, {
  copy(t19) {
    return Object.assign(new this.constructor(), this, t19);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: At2,
  // Deprecated! Use color.formatHex.
  formatHex: At2,
  formatHex8: tr,
  formatHsl: nr,
  formatRgb: Nt2,
  toString: Nt2
});
function At2() {
  return this.rgb().formatHex();
}
function tr() {
  return this.rgb().formatHex8();
}
function nr() {
  return Jt(this).formatHsl();
}
function Nt2() {
  return this.rgb().formatRgb();
}
function I2(t19) {
  var n33, e11;
  return t19 = (t19 + "").trim().toLowerCase(), (n33 = Fe.exec(t19)) ? (e11 = n33[1].length, n33 = parseInt(n33[1], 16), e11 === 6 ? Et2(n33) : e11 === 3 ? new y2(n33 >> 8 & 15 | n33 >> 4 & 240, n33 >> 4 & 15 | n33 & 240, (n33 & 15) << 4 | n33 & 15, 1) : e11 === 8 ? V2(n33 >> 24 & 255, n33 >> 16 & 255, n33 >> 8 & 255, (n33 & 255) / 255) : e11 === 4 ? V2(n33 >> 12 & 15 | n33 >> 8 & 240, n33 >> 8 & 15 | n33 >> 4 & 240, n33 >> 4 & 15 | n33 & 240, ((n33 & 15) << 4 | n33 & 15) / 255) : null) : (n33 = Ke.exec(t19)) ? new y2(n33[1], n33[2], n33[3], 1) : (n33 = We.exec(t19)) ? new y2(n33[1] * 255 / 100, n33[2] * 255 / 100, n33[3] * 255 / 100, 1) : (n33 = Ge.exec(t19)) ? V2(n33[1], n33[2], n33[3], n33[4]) : (n33 = Je.exec(t19)) ? V2(n33[1] * 255 / 100, n33[2] * 255 / 100, n33[3] * 255 / 100, n33[4]) : (n33 = Qe.exec(t19)) ? Mt3(n33[1], n33[2] / 100, n33[3] / 100, 1) : (n33 = Ze.exec(t19)) ? Mt3(n33[1], n33[2] / 100, n33[3] / 100, n33[4]) : kt.hasOwnProperty(t19) ? Et2(kt[t19]) : t19 === "transparent" ? new y2(NaN, NaN, NaN, 0) : null;
}
function Et2(t19) {
  return new y2(t19 >> 16 & 255, t19 >> 8 & 255, t19 & 255, 1);
}
function V2(t19, n33, e11, r24) {
  return r24 <= 0 && (t19 = n33 = e11 = NaN), new y2(t19, n33, e11, r24);
}
function er(t19) {
  return t19 instanceof B2 || (t19 = I2(t19)), t19 ? (t19 = t19.rgb(), new y2(t19.r, t19.g, t19.b, t19.opacity)) : new y2();
}
function st2(t19, n33, e11, r24) {
  return arguments.length === 1 ? er(t19) : new y2(t19, n33, e11, r24 ?? 1);
}
function y2(t19, n33, e11, r24) {
  this.r = +t19, this.g = +n33, this.b = +e11, this.opacity = +r24;
}
dt2(y2, st2, Gt(B2, {
  brighter(t19) {
    return t19 = t19 == null ? J2 : Math.pow(J2, t19), new y2(this.r * t19, this.g * t19, this.b * t19, this.opacity);
  },
  darker(t19) {
    return t19 = t19 == null ? H3 : Math.pow(H3, t19), new y2(this.r * t19, this.g * t19, this.b * t19, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new y2($(this.r), $(this.g), $(this.b), Q2(this.opacity));
  },
  displayable() {
    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: $t2,
  // Deprecated! Use color.formatHex.
  formatHex: $t2,
  formatHex8: rr,
  formatRgb: St2,
  toString: St2
}));
function $t2() {
  return `#${E2(this.r)}${E2(this.g)}${E2(this.b)}`;
}
function rr() {
  return `#${E2(this.r)}${E2(this.g)}${E2(this.b)}${E2((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}
function St2() {
  const t19 = Q2(this.opacity);
  return `${t19 === 1 ? "rgb(" : "rgba("}${$(this.r)}, ${$(this.g)}, ${$(this.b)}${t19 === 1 ? ")" : `, ${t19})`}`;
}
function Q2(t19) {
  return isNaN(t19) ? 1 : Math.max(0, Math.min(1, t19));
}
function $(t19) {
  return Math.max(0, Math.min(255, Math.round(t19) || 0));
}
function E2(t19) {
  return t19 = $(t19), (t19 < 16 ? "0" : "") + t19.toString(16);
}
function Mt3(t19, n33, e11, r24) {
  return r24 <= 0 ? t19 = n33 = e11 = NaN : e11 <= 0 || e11 >= 1 ? t19 = n33 = NaN : n33 <= 0 && (t19 = NaN), new v4(t19, n33, e11, r24);
}
function Jt(t19) {
  if (t19 instanceof v4)
    return new v4(t19.h, t19.s, t19.l, t19.opacity);
  if (t19 instanceof B2 || (t19 = I2(t19)), !t19)
    return new v4();
  if (t19 instanceof v4)
    return t19;
  t19 = t19.rgb();
  var n33 = t19.r / 255, e11 = t19.g / 255, r24 = t19.b / 255, i27 = Math.min(n33, e11, r24), o12 = Math.max(n33, e11, r24), u35 = NaN, a22 = o12 - i27, s18 = (o12 + i27) / 2;
  return a22 ? (n33 === o12 ? u35 = (e11 - r24) / a22 + (e11 < r24) * 6 : e11 === o12 ? u35 = (r24 - n33) / a22 + 2 : u35 = (n33 - e11) / a22 + 4, a22 /= s18 < 0.5 ? o12 + i27 : 2 - o12 - i27, u35 *= 60) : a22 = s18 > 0 && s18 < 1 ? 0 : u35, new v4(u35, a22, s18, t19.opacity);
}
function ir(t19, n33, e11, r24) {
  return arguments.length === 1 ? Jt(t19) : new v4(t19, n33, e11, r24 ?? 1);
}
function v4(t19, n33, e11, r24) {
  this.h = +t19, this.s = +n33, this.l = +e11, this.opacity = +r24;
}
dt2(v4, ir, Gt(B2, {
  brighter(t19) {
    return t19 = t19 == null ? J2 : Math.pow(J2, t19), new v4(this.h, this.s, this.l * t19, this.opacity);
  },
  darker(t19) {
    return t19 = t19 == null ? H3 : Math.pow(H3, t19), new v4(this.h, this.s, this.l * t19, this.opacity);
  },
  rgb() {
    var t19 = this.h % 360 + (this.h < 0) * 360, n33 = isNaN(t19) || isNaN(this.s) ? 0 : this.s, e11 = this.l, r24 = e11 + (e11 < 0.5 ? e11 : 1 - e11) * n33, i27 = 2 * e11 - r24;
    return new y2(
      ot3(t19 >= 240 ? t19 - 240 : t19 + 120, i27, r24),
      ot3(t19, i27, r24),
      ot3(t19 < 120 ? t19 + 240 : t19 - 120, i27, r24),
      this.opacity
    );
  },
  clamp() {
    return new v4(Ct2(this.h), z2(this.s), z2(this.l), Q2(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  },
  formatHsl() {
    const t19 = Q2(this.opacity);
    return `${t19 === 1 ? "hsl(" : "hsla("}${Ct2(this.h)}, ${z2(this.s) * 100}%, ${z2(this.l) * 100}%${t19 === 1 ? ")" : `, ${t19})`}`;
  }
}));
function Ct2(t19) {
  return t19 = (t19 || 0) % 360, t19 < 0 ? t19 + 360 : t19;
}
function z2(t19) {
  return Math.max(0, Math.min(1, t19 || 0));
}
function ot3(t19, n33, e11) {
  return (t19 < 60 ? n33 + (e11 - n33) * t19 / 60 : t19 < 180 ? e11 : t19 < 240 ? n33 + (e11 - n33) * (240 - t19) / 60 : n33) * 255;
}
var Qt = (t19) => () => t19;
function or(t19, n33) {
  return function(e11) {
    return t19 + e11 * n33;
  };
}
function ur(t19, n33, e11) {
  return t19 = Math.pow(t19, e11), n33 = Math.pow(n33, e11) - t19, e11 = 1 / e11, function(r24) {
    return Math.pow(t19 + r24 * n33, e11);
  };
}
function ar(t19) {
  return (t19 = +t19) == 1 ? Zt : function(n33, e11) {
    return e11 - n33 ? ur(n33, e11, t19) : Qt(isNaN(n33) ? e11 : n33);
  };
}
function Zt(t19, n33) {
  var e11 = n33 - t19;
  return e11 ? or(t19, e11) : Qt(isNaN(t19) ? n33 : t19);
}
var qt = function t(n33) {
  var e11 = ar(n33);
  function r24(i27, o12) {
    var u35 = e11((i27 = st2(i27)).r, (o12 = st2(o12)).r), a22 = e11(i27.g, o12.g), s18 = e11(i27.b, o12.b), l25 = Zt(i27.opacity, o12.opacity);
    return function(c27) {
      return i27.r = u35(c27), i27.g = a22(c27), i27.b = s18(c27), i27.opacity = l25(c27), i27 + "";
    };
  }
  return r24.gamma = t, r24;
}(1);
function A2(t19, n33) {
  return t19 = +t19, n33 = +n33, function(e11) {
    return t19 * (1 - e11) + n33 * e11;
  };
}
var lt2 = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
var ut2 = new RegExp(lt2.source, "g");
function sr(t19) {
  return function() {
    return t19;
  };
}
function lr(t19) {
  return function(n33) {
    return t19(n33) + "";
  };
}
function cr(t19, n33) {
  var e11 = lt2.lastIndex = ut2.lastIndex = 0, r24, i27, o12, u35 = -1, a22 = [], s18 = [];
  for (t19 = t19 + "", n33 = n33 + ""; (r24 = lt2.exec(t19)) && (i27 = ut2.exec(n33)); )
    (o12 = i27.index) > e11 && (o12 = n33.slice(e11, o12), a22[u35] ? a22[u35] += o12 : a22[++u35] = o12), (r24 = r24[0]) === (i27 = i27[0]) ? a22[u35] ? a22[u35] += i27 : a22[++u35] = i27 : (a22[++u35] = null, s18.push({ i: u35, x: A2(r24, i27) })), e11 = ut2.lastIndex;
  return e11 < n33.length && (o12 = n33.slice(e11), a22[u35] ? a22[u35] += o12 : a22[++u35] = o12), a22.length < 2 ? s18[0] ? lr(s18[0].x) : sr(n33) : (n33 = s18.length, function(l25) {
    for (var c27 = 0, h26; c27 < n33; ++c27)
      a22[(h26 = s18[c27]).i] = h26.x(l25);
    return a22.join("");
  });
}
var Xt = 180 / Math.PI;
var tn = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
function nn(t19, n33, e11, r24, i27, o12) {
  var u35, a22, s18;
  return (u35 = Math.sqrt(t19 * t19 + n33 * n33)) && (t19 /= u35, n33 /= u35), (s18 = t19 * e11 + n33 * r24) && (e11 -= t19 * s18, r24 -= n33 * s18), (a22 = Math.sqrt(e11 * e11 + r24 * r24)) && (e11 /= a22, r24 /= a22, s18 /= a22), t19 * r24 < n33 * e11 && (t19 = -t19, n33 = -n33, s18 = -s18, u35 = -u35), {
    translateX: i27,
    translateY: o12,
    rotate: Math.atan2(n33, t19) * Xt,
    skewX: Math.atan(s18) * Xt,
    scaleX: u35,
    scaleY: a22
  };
}
var U2;
function hr(t19) {
  const n33 = new (typeof DOMMatrix == "function" ? DOMMatrix : WebKitCSSMatrix)(t19 + "");
  return n33.isIdentity ? tn : nn(n33.a, n33.b, n33.c, n33.d, n33.e, n33.f);
}
function fr(t19) {
  return t19 == null || (U2 || (U2 = document.createElementNS("http://www.w3.org/2000/svg", "g")), U2.setAttribute("transform", t19), !(t19 = U2.transform.baseVal.consolidate())) ? tn : (t19 = t19.matrix, nn(t19.a, t19.b, t19.c, t19.d, t19.e, t19.f));
}
function en(t19, n33, e11, r24) {
  function i27(l25) {
    return l25.length ? l25.pop() + " " : "";
  }
  function o12(l25, c27, h26, f39, p26, g31) {
    if (l25 !== h26 || c27 !== f39) {
      var d34 = p26.push("translate(", null, n33, null, e11);
      g31.push({ i: d34 - 4, x: A2(l25, h26) }, { i: d34 - 2, x: A2(c27, f39) });
    } else
      (h26 || f39) && p26.push("translate(" + h26 + n33 + f39 + e11);
  }
  function u35(l25, c27, h26, f39) {
    l25 !== c27 ? (l25 - c27 > 180 ? c27 += 360 : c27 - l25 > 180 && (l25 += 360), f39.push({ i: h26.push(i27(h26) + "rotate(", null, r24) - 2, x: A2(l25, c27) })) : c27 && h26.push(i27(h26) + "rotate(" + c27 + r24);
  }
  function a22(l25, c27, h26, f39) {
    l25 !== c27 ? f39.push({ i: h26.push(i27(h26) + "skewX(", null, r24) - 2, x: A2(l25, c27) }) : c27 && h26.push(i27(h26) + "skewX(" + c27 + r24);
  }
  function s18(l25, c27, h26, f39, p26, g31) {
    if (l25 !== h26 || c27 !== f39) {
      var d34 = p26.push(i27(p26) + "scale(", null, ",", null, ")");
      g31.push({ i: d34 - 4, x: A2(l25, h26) }, { i: d34 - 2, x: A2(c27, f39) });
    } else
      (h26 !== 1 || f39 !== 1) && p26.push(i27(p26) + "scale(" + h26 + "," + f39 + ")");
  }
  return function(l25, c27) {
    var h26 = [], f39 = [];
    return l25 = t19(l25), c27 = t19(c27), o12(l25.translateX, l25.translateY, c27.translateX, c27.translateY, h26, f39), u35(l25.rotate, c27.rotate, h26, f39), a22(l25.skewX, c27.skewX, h26, f39), s18(l25.scaleX, l25.scaleY, c27.scaleX, c27.scaleY, h26, f39), l25 = c27 = null, function(p26) {
      for (var g31 = -1, d34 = f39.length, N19; ++g31 < d34; )
        h26[(N19 = f39[g31]).i] = N19.x(p26);
      return h26.join("");
    };
  };
}
var pr = en(hr, "px, ", "px)", "deg)");
var gr = en(fr, ", ", ")", ")");
var q2 = 0;
var O2 = 0;
var P2 = 0;
var rn = 1e3;
var Z2;
var T2;
var tt2 = 0;
var S2 = 0;
var rt2 = 0;
var L2 = typeof performance == "object" && performance.now ? performance : Date;
var on = typeof window == "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(t19) {
  setTimeout(t19, 17);
};
function yt3() {
  return S2 || (on(dr), S2 = L2.now() + rt2);
}
function dr() {
  S2 = 0;
}
function nt2() {
  this._call = this._time = this._next = null;
}
nt2.prototype = un.prototype = {
  constructor: nt2,
  restart: function(t19, n33, e11) {
    if (typeof t19 != "function")
      throw new TypeError("callback is not a function");
    e11 = (e11 == null ? yt3() : +e11) + (n33 == null ? 0 : +n33), !this._next && T2 !== this && (T2 ? T2._next = this : Z2 = this, T2 = this), this._call = t19, this._time = e11, ct2();
  },
  stop: function() {
    this._call && (this._call = null, this._time = 1 / 0, ct2());
  }
};
function un(t19, n33, e11) {
  var r24 = new nt2();
  return r24.restart(t19, n33, e11), r24;
}
function yr() {
  yt3(), ++q2;
  for (var t19 = Z2, n33; t19; )
    (n33 = S2 - t19._time) >= 0 && t19._call.call(void 0, n33), t19 = t19._next;
  --q2;
}
function Pt2() {
  S2 = (tt2 = L2.now()) + rt2, q2 = O2 = 0;
  try {
    yr();
  } finally {
    q2 = 0, vr(), S2 = 0;
  }
}
function mr() {
  var t19 = L2.now(), n33 = t19 - tt2;
  n33 > rn && (rt2 -= n33, tt2 = t19);
}
function vr() {
  for (var t19, n33 = Z2, e11, r24 = 1 / 0; n33; )
    n33._call ? (r24 > n33._time && (r24 = n33._time), t19 = n33, n33 = n33._next) : (e11 = n33._next, n33._next = null, n33 = t19 ? t19._next = e11 : Z2 = e11);
  T2 = t19, ct2(r24);
}
function ct2(t19) {
  if (!q2) {
    O2 && (O2 = clearTimeout(O2));
    var n33 = t19 - S2;
    n33 > 24 ? (t19 < 1 / 0 && (O2 = setTimeout(Pt2, t19 - L2.now() - rt2)), P2 && (P2 = clearInterval(P2))) : (P2 || (tt2 = L2.now(), P2 = setInterval(mr, rn)), q2 = 1, on(Pt2));
  }
}
function Ot3(t19, n33, e11) {
  var r24 = new nt2();
  return n33 = n33 == null ? 0 : +n33, r24.restart((i27) => {
    r24.stop(), t19(i27 + n33);
  }, n33, e11), r24;
}
var _r = Ht2("start", "end", "cancel", "interrupt");
var wr = [];
var an = 0;
var Tt3 = 1;
var ht2 = 2;
var K2 = 3;
var Rt2 = 4;
var ft3 = 5;
var W2 = 6;
function it3(t19, n33, e11, r24, i27, o12) {
  var u35 = t19.__transition;
  if (!u35)
    t19.__transition = {};
  else if (e11 in u35)
    return;
  br(t19, e11, {
    name: n33,
    index: r24,
    // For context during callback.
    group: i27,
    // For context during callback.
    on: _r,
    tween: wr,
    time: o12.time,
    delay: o12.delay,
    duration: o12.duration,
    ease: o12.ease,
    timer: null,
    state: an
  });
}
function mt3(t19, n33) {
  var e11 = _(t19, n33);
  if (e11.state > an)
    throw new Error("too late; already scheduled");
  return e11;
}
function b3(t19, n33) {
  var e11 = _(t19, n33);
  if (e11.state > K2)
    throw new Error("too late; already running");
  return e11;
}
function _(t19, n33) {
  var e11 = t19.__transition;
  if (!e11 || !(e11 = e11[n33]))
    throw new Error("transition not found");
  return e11;
}
function br(t19, n33, e11) {
  var r24 = t19.__transition, i27;
  r24[n33] = e11, e11.timer = un(o12, 0, e11.time);
  function o12(l25) {
    e11.state = Tt3, e11.timer.restart(u35, e11.delay, e11.time), e11.delay <= l25 && u35(l25 - e11.delay);
  }
  function u35(l25) {
    var c27, h26, f39, p26;
    if (e11.state !== Tt3)
      return s18();
    for (c27 in r24)
      if (p26 = r24[c27], p26.name === e11.name) {
        if (p26.state === K2)
          return Ot3(u35);
        p26.state === Rt2 ? (p26.state = W2, p26.timer.stop(), p26.on.call("interrupt", t19, t19.__data__, p26.index, p26.group), delete r24[c27]) : +c27 < n33 && (p26.state = W2, p26.timer.stop(), p26.on.call("cancel", t19, t19.__data__, p26.index, p26.group), delete r24[c27]);
      }
    if (Ot3(function() {
      e11.state === K2 && (e11.state = Rt2, e11.timer.restart(a22, e11.delay, e11.time), a22(l25));
    }), e11.state = ht2, e11.on.call("start", t19, t19.__data__, e11.index, e11.group), e11.state === ht2) {
      for (e11.state = K2, i27 = new Array(f39 = e11.tween.length), c27 = 0, h26 = -1; c27 < f39; ++c27)
        (p26 = e11.tween[c27].value.call(t19, t19.__data__, e11.index, e11.group)) && (i27[++h26] = p26);
      i27.length = h26 + 1;
    }
  }
  function a22(l25) {
    for (var c27 = l25 < e11.duration ? e11.ease.call(null, l25 / e11.duration) : (e11.timer.restart(s18), e11.state = ft3, 1), h26 = -1, f39 = i27.length; ++h26 < f39; )
      i27[h26].call(t19, c27);
    e11.state === ft3 && (e11.on.call("end", t19, t19.__data__, e11.index, e11.group), s18());
  }
  function s18() {
    e11.state = W2, e11.timer.stop(), delete r24[n33];
    for (var l25 in r24)
      return;
    delete t19.__transition;
  }
}
function xr(t19, n33) {
  var e11 = t19.__transition, r24, i27, o12 = true, u35;
  if (e11) {
    n33 = n33 == null ? null : n33 + "";
    for (u35 in e11) {
      if ((r24 = e11[u35]).name !== n33) {
        o12 = false;
        continue;
      }
      i27 = r24.state > ht2 && r24.state < ft3, r24.state = W2, r24.timer.stop(), r24.on.call(i27 ? "interrupt" : "cancel", t19, t19.__data__, r24.index, r24.group), delete e11[u35];
    }
    o12 && delete t19.__transition;
  }
}
function kr(t19) {
  return this.each(function() {
    xr(this, t19);
  });
}
function Ar(t19, n33) {
  var e11, r24;
  return function() {
    var i27 = b3(this, t19), o12 = i27.tween;
    if (o12 !== e11) {
      r24 = e11 = o12;
      for (var u35 = 0, a22 = r24.length; u35 < a22; ++u35)
        if (r24[u35].name === n33) {
          r24 = r24.slice(), r24.splice(u35, 1);
          break;
        }
    }
    i27.tween = r24;
  };
}
function Nr(t19, n33, e11) {
  var r24, i27;
  if (typeof e11 != "function")
    throw new Error();
  return function() {
    var o12 = b3(this, t19), u35 = o12.tween;
    if (u35 !== r24) {
      i27 = (r24 = u35).slice();
      for (var a22 = { name: n33, value: e11 }, s18 = 0, l25 = i27.length; s18 < l25; ++s18)
        if (i27[s18].name === n33) {
          i27[s18] = a22;
          break;
        }
      s18 === l25 && i27.push(a22);
    }
    o12.tween = i27;
  };
}
function Er(t19, n33) {
  var e11 = this._id;
  if (t19 += "", arguments.length < 2) {
    for (var r24 = _(this.node(), e11).tween, i27 = 0, o12 = r24.length, u35; i27 < o12; ++i27)
      if ((u35 = r24[i27]).name === t19)
        return u35.value;
    return null;
  }
  return this.each((n33 == null ? Ar : Nr)(e11, t19, n33));
}
function vt2(t19, n33, e11) {
  var r24 = t19._id;
  return t19.each(function() {
    var i27 = b3(this, r24);
    (i27.value || (i27.value = {}))[n33] = e11.apply(this, arguments);
  }), function(i27) {
    return _(i27, r24).value[n33];
  };
}
function sn(t19, n33) {
  var e11;
  return (typeof n33 == "number" ? A2 : n33 instanceof I2 ? qt : (e11 = I2(n33)) ? (n33 = e11, qt) : cr)(t19, n33);
}
function $r(t19) {
  return function() {
    this.removeAttribute(t19);
  };
}
function Sr(t19) {
  return function() {
    this.removeAttributeNS(t19.space, t19.local);
  };
}
function Mr(t19, n33, e11) {
  var r24, i27 = e11 + "", o12;
  return function() {
    var u35 = this.getAttribute(t19);
    return u35 === i27 ? null : u35 === r24 ? o12 : o12 = n33(r24 = u35, e11);
  };
}
function Cr(t19, n33, e11) {
  var r24, i27 = e11 + "", o12;
  return function() {
    var u35 = this.getAttributeNS(t19.space, t19.local);
    return u35 === i27 ? null : u35 === r24 ? o12 : o12 = n33(r24 = u35, e11);
  };
}
function qr(t19, n33, e11) {
  var r24, i27, o12;
  return function() {
    var u35, a22 = e11(this), s18;
    return a22 == null ? void this.removeAttribute(t19) : (u35 = this.getAttribute(t19), s18 = a22 + "", u35 === s18 ? null : u35 === r24 && s18 === i27 ? o12 : (i27 = s18, o12 = n33(r24 = u35, a22)));
  };
}
function Xr(t19, n33, e11) {
  var r24, i27, o12;
  return function() {
    var u35, a22 = e11(this), s18;
    return a22 == null ? void this.removeAttributeNS(t19.space, t19.local) : (u35 = this.getAttributeNS(t19.space, t19.local), s18 = a22 + "", u35 === s18 ? null : u35 === r24 && s18 === i27 ? o12 : (i27 = s18, o12 = n33(r24 = u35, a22)));
  };
}
function Pr(t19, n33) {
  var e11 = et2(t19), r24 = e11 === "transform" ? gr : sn;
  return this.attrTween(t19, typeof n33 == "function" ? (e11.local ? Xr : qr)(e11, r24, vt2(this, "attr." + t19, n33)) : n33 == null ? (e11.local ? Sr : $r)(e11) : (e11.local ? Cr : Mr)(e11, r24, n33));
}
function Or(t19, n33) {
  return function(e11) {
    this.setAttribute(t19, n33.call(this, e11));
  };
}
function Tr(t19, n33) {
  return function(e11) {
    this.setAttributeNS(t19.space, t19.local, n33.call(this, e11));
  };
}
function Rr(t19, n33) {
  var e11, r24;
  function i27() {
    var o12 = n33.apply(this, arguments);
    return o12 !== r24 && (e11 = (r24 = o12) && Tr(t19, o12)), e11;
  }
  return i27._value = n33, i27;
}
function Hr(t19, n33) {
  var e11, r24;
  function i27() {
    var o12 = n33.apply(this, arguments);
    return o12 !== r24 && (e11 = (r24 = o12) && Or(t19, o12)), e11;
  }
  return i27._value = n33, i27;
}
function jr(t19, n33) {
  var e11 = "attr." + t19;
  if (arguments.length < 2)
    return (e11 = this.tween(e11)) && e11._value;
  if (n33 == null)
    return this.tween(e11, null);
  if (typeof n33 != "function")
    throw new Error();
  var r24 = et2(t19);
  return this.tween(e11, (r24.local ? Rr : Hr)(r24, n33));
}
function Ir(t19, n33) {
  return function() {
    mt3(this, t19).delay = +n33.apply(this, arguments);
  };
}
function Lr(t19, n33) {
  return n33 = +n33, function() {
    mt3(this, t19).delay = n33;
  };
}
function Dr(t19) {
  var n33 = this._id;
  return arguments.length ? this.each((typeof t19 == "function" ? Ir : Lr)(n33, t19)) : _(this.node(), n33).delay;
}
function Br(t19, n33) {
  return function() {
    b3(this, t19).duration = +n33.apply(this, arguments);
  };
}
function Yr(t19, n33) {
  return n33 = +n33, function() {
    b3(this, t19).duration = n33;
  };
}
function Vr(t19) {
  var n33 = this._id;
  return arguments.length ? this.each((typeof t19 == "function" ? Br : Yr)(n33, t19)) : _(this.node(), n33).duration;
}
function zr(t19, n33) {
  if (typeof n33 != "function")
    throw new Error();
  return function() {
    b3(this, t19).ease = n33;
  };
}
function Ur(t19) {
  var n33 = this._id;
  return arguments.length ? this.each(zr(n33, t19)) : _(this.node(), n33).ease;
}
function Fr(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    if (typeof e11 != "function")
      throw new Error();
    b3(this, t19).ease = e11;
  };
}
function Kr(t19) {
  if (typeof t19 != "function")
    throw new Error();
  return this.each(Fr(this._id, t19));
}
function Wr(t19) {
  typeof t19 != "function" && (t19 = Lt(t19));
  for (var n33 = this._groups, e11 = n33.length, r24 = new Array(e11), i27 = 0; i27 < e11; ++i27)
    for (var o12 = n33[i27], u35 = o12.length, a22 = r24[i27] = [], s18, l25 = 0; l25 < u35; ++l25)
      (s18 = o12[l25]) && t19.call(s18, s18.__data__, l25, o12) && a22.push(s18);
  return new k2(r24, this._parents, this._name, this._id);
}
function Gr(t19) {
  if (t19._id !== this._id)
    throw new Error();
  for (var n33 = this._groups, e11 = t19._groups, r24 = n33.length, i27 = e11.length, o12 = Math.min(r24, i27), u35 = new Array(r24), a22 = 0; a22 < o12; ++a22)
    for (var s18 = n33[a22], l25 = e11[a22], c27 = s18.length, h26 = u35[a22] = new Array(c27), f39, p26 = 0; p26 < c27; ++p26)
      (f39 = s18[p26] || l25[p26]) && (h26[p26] = f39);
  for (; a22 < r24; ++a22)
    u35[a22] = n33[a22];
  return new k2(u35, this._parents, this._name, this._id);
}
function Jr(t19) {
  return (t19 + "").trim().split(/^|\s+/).every(function(n33) {
    var e11 = n33.indexOf(".");
    return e11 >= 0 && (n33 = n33.slice(0, e11)), !n33 || n33 === "start";
  });
}
function Qr(t19, n33, e11) {
  var r24, i27, o12 = Jr(n33) ? mt3 : b3;
  return function() {
    var u35 = o12(this, t19), a22 = u35.on;
    a22 !== r24 && (i27 = (r24 = a22).copy()).on(n33, e11), u35.on = i27;
  };
}
function Zr(t19, n33) {
  var e11 = this._id;
  return arguments.length < 2 ? _(this.node(), e11).on.on(t19) : this.each(Qr(e11, t19, n33));
}
function ti(t19) {
  return function() {
    var n33 = this.parentNode;
    for (var e11 in this.__transition)
      if (+e11 !== t19)
        return;
    n33 && n33.removeChild(this);
  };
}
function ni() {
  return this.on("end.remove", ti(this._id));
}
function ei(t19) {
  var n33 = this._name, e11 = this._id;
  typeof t19 != "function" && (t19 = pt2(t19));
  for (var r24 = this._groups, i27 = r24.length, o12 = new Array(i27), u35 = 0; u35 < i27; ++u35)
    for (var a22 = r24[u35], s18 = a22.length, l25 = o12[u35] = new Array(s18), c27, h26, f39 = 0; f39 < s18; ++f39)
      (c27 = a22[f39]) && (h26 = t19.call(c27, c27.__data__, f39, a22)) && ("__data__" in c27 && (h26.__data__ = c27.__data__), l25[f39] = h26, it3(l25[f39], n33, e11, f39, l25, _(c27, e11)));
  return new k2(o12, this._parents, n33, e11);
}
function ri(t19) {
  var n33 = this._name, e11 = this._id;
  typeof t19 != "function" && (t19 = It(t19));
  for (var r24 = this._groups, i27 = r24.length, o12 = [], u35 = [], a22 = 0; a22 < i27; ++a22)
    for (var s18 = r24[a22], l25 = s18.length, c27, h26 = 0; h26 < l25; ++h26)
      if (c27 = s18[h26]) {
        for (var f39 = t19.call(c27, c27.__data__, h26, s18), p26, g31 = _(c27, e11), d34 = 0, N19 = f39.length; d34 < N19; ++d34)
          (p26 = f39[d34]) && it3(p26, n33, e11, d34, f39, g31);
        o12.push(f39), u35.push(c27);
      }
  return new k2(o12, u35, n33, e11);
}
var ii = D2.prototype.constructor;
function oi() {
  return new ii(this._groups, this._parents);
}
function ui(t19, n33) {
  var e11, r24, i27;
  return function() {
    var o12 = C2(this, t19), u35 = (this.style.removeProperty(t19), C2(this, t19));
    return o12 === u35 ? null : o12 === e11 && u35 === r24 ? i27 : i27 = n33(e11 = o12, r24 = u35);
  };
}
function ln(t19) {
  return function() {
    this.style.removeProperty(t19);
  };
}
function ai(t19, n33, e11) {
  var r24, i27 = e11 + "", o12;
  return function() {
    var u35 = C2(this, t19);
    return u35 === i27 ? null : u35 === r24 ? o12 : o12 = n33(r24 = u35, e11);
  };
}
function si(t19, n33, e11) {
  var r24, i27, o12;
  return function() {
    var u35 = C2(this, t19), a22 = e11(this), s18 = a22 + "";
    return a22 == null && (s18 = a22 = (this.style.removeProperty(t19), C2(this, t19))), u35 === s18 ? null : u35 === r24 && s18 === i27 ? o12 : (i27 = s18, o12 = n33(r24 = u35, a22));
  };
}
function li(t19, n33) {
  var e11, r24, i27, o12 = "style." + n33, u35 = "end." + o12, a22;
  return function() {
    var s18 = b3(this, t19), l25 = s18.on, c27 = s18.value[o12] == null ? a22 || (a22 = ln(n33)) : void 0;
    (l25 !== e11 || i27 !== c27) && (r24 = (e11 = l25).copy()).on(u35, i27 = c27), s18.on = r24;
  };
}
function ci(t19, n33, e11) {
  var r24 = (t19 += "") == "transform" ? pr : sn;
  return n33 == null ? this.styleTween(t19, ui(t19, r24)).on("end.style." + t19, ln(t19)) : typeof n33 == "function" ? this.styleTween(t19, si(t19, r24, vt2(this, "style." + t19, n33))).each(li(this._id, t19)) : this.styleTween(t19, ai(t19, r24, n33), e11).on("end.style." + t19, null);
}
function hi(t19, n33, e11) {
  return function(r24) {
    this.style.setProperty(t19, n33.call(this, r24), e11);
  };
}
function fi(t19, n33, e11) {
  var r24, i27;
  function o12() {
    var u35 = n33.apply(this, arguments);
    return u35 !== i27 && (r24 = (i27 = u35) && hi(t19, u35, e11)), r24;
  }
  return o12._value = n33, o12;
}
function pi(t19, n33, e11) {
  var r24 = "style." + (t19 += "");
  if (arguments.length < 2)
    return (r24 = this.tween(r24)) && r24._value;
  if (n33 == null)
    return this.tween(r24, null);
  if (typeof n33 != "function")
    throw new Error();
  return this.tween(r24, fi(t19, n33, e11 ?? ""));
}
function gi(t19) {
  return function() {
    this.textContent = t19;
  };
}
function di(t19) {
  return function() {
    var n33 = t19(this);
    this.textContent = n33 ?? "";
  };
}
function yi(t19) {
  return this.tween("text", typeof t19 == "function" ? di(vt2(this, "text", t19)) : gi(t19 == null ? "" : t19 + ""));
}
function mi(t19) {
  return function(n33) {
    this.textContent = t19.call(this, n33);
  };
}
function vi(t19) {
  var n33, e11;
  function r24() {
    var i27 = t19.apply(this, arguments);
    return i27 !== e11 && (n33 = (e11 = i27) && mi(i27)), n33;
  }
  return r24._value = t19, r24;
}
function _i(t19) {
  var n33 = "text";
  if (arguments.length < 1)
    return (n33 = this.tween(n33)) && n33._value;
  if (t19 == null)
    return this.tween(n33, null);
  if (typeof t19 != "function")
    throw new Error();
  return this.tween(n33, vi(t19));
}
function wi() {
  for (var t19 = this._name, n33 = this._id, e11 = cn(), r24 = this._groups, i27 = r24.length, o12 = 0; o12 < i27; ++o12)
    for (var u35 = r24[o12], a22 = u35.length, s18, l25 = 0; l25 < a22; ++l25)
      if (s18 = u35[l25]) {
        var c27 = _(s18, n33);
        it3(s18, t19, e11, l25, u35, {
          time: c27.time + c27.delay + c27.duration,
          delay: 0,
          duration: c27.duration,
          ease: c27.ease
        });
      }
  return new k2(r24, this._parents, t19, e11);
}
function bi() {
  var t19, n33, e11 = this, r24 = e11._id, i27 = e11.size();
  return new Promise(function(o12, u35) {
    var a22 = { value: u35 }, s18 = { value: function() {
      --i27 === 0 && o12();
    } };
    e11.each(function() {
      var l25 = b3(this, r24), c27 = l25.on;
      c27 !== t19 && (n33 = (t19 = c27).copy(), n33._.cancel.push(a22), n33._.interrupt.push(a22), n33._.end.push(s18)), l25.on = n33;
    }), i27 === 0 && o12();
  });
}
var xi = 0;
function k2(t19, n33, e11, r24) {
  this._groups = t19, this._parents = n33, this._name = e11, this._id = r24;
}
function cn() {
  return ++xi;
}
var x2 = D2.prototype;
k2.prototype = {
  constructor: k2,
  select: ei,
  selectAll: ri,
  selectChild: x2.selectChild,
  selectChildren: x2.selectChildren,
  filter: Wr,
  merge: Gr,
  selection: oi,
  transition: wi,
  call: x2.call,
  nodes: x2.nodes,
  node: x2.node,
  size: x2.size,
  empty: x2.empty,
  each: x2.each,
  on: Zr,
  attr: Pr,
  attrTween: jr,
  style: ci,
  styleTween: pi,
  text: yi,
  textTween: _i,
  remove: ni,
  tween: Er,
  delay: Dr,
  duration: Vr,
  ease: Ur,
  easeVarying: Kr,
  end: bi,
  [Symbol.iterator]: x2[Symbol.iterator]
};
function ki(t19) {
  return ((t19 *= 2) <= 1 ? t19 * t19 * t19 : (t19 -= 2) * t19 * t19 + 2) / 2;
}
var Ai = {
  time: null,
  // Set on use.
  delay: 0,
  duration: 250,
  ease: ki
};
function Ni(t19, n33) {
  for (var e11; !(e11 = t19.__transition) || !(e11 = e11[n33]); )
    if (!(t19 = t19.parentNode))
      throw new Error(`transition ${n33} not found`);
  return e11;
}
function Ei(t19) {
  var n33, e11;
  t19 instanceof k2 ? (n33 = t19._id, t19 = t19._name) : (n33 = cn(), (e11 = Ai).time = yt3(), t19 = t19 == null ? null : t19 + "");
  for (var r24 = this._groups, i27 = r24.length, o12 = 0; o12 < i27; ++o12)
    for (var u35 = r24[o12], a22 = u35.length, s18, l25 = 0; l25 < a22; ++l25)
      (s18 = u35[l25]) && it3(s18, t19, n33, l25, u35, e11 || Ni(s18, n33));
  return new k2(r24, this._parents, t19, n33);
}
D2.prototype.interrupt = kr;
D2.prototype.transition = Ei;
function R2(t19, n33, e11) {
  this.k = t19, this.x = n33, this.y = e11;
}
R2.prototype = {
  constructor: R2,
  scale: function(t19) {
    return t19 === 1 ? this : new R2(this.k * t19, this.x, this.y);
  },
  translate: function(t19, n33) {
    return t19 === 0 & n33 === 0 ? this : new R2(this.k, this.x + this.k * t19, this.y + this.k * n33);
  },
  apply: function(t19) {
    return [t19[0] * this.k + this.x, t19[1] * this.k + this.y];
  },
  applyX: function(t19) {
    return t19 * this.k + this.x;
  },
  applyY: function(t19) {
    return t19 * this.k + this.y;
  },
  invert: function(t19) {
    return [(t19[0] - this.x) / this.k, (t19[1] - this.y) / this.k];
  },
  invertX: function(t19) {
    return (t19 - this.x) / this.k;
  },
  invertY: function(t19) {
    return (t19 - this.y) / this.k;
  },
  rescaleX: function(t19) {
    return t19.copy().domain(t19.range().map(this.invertX, this).map(t19.invert, t19));
  },
  rescaleY: function(t19) {
    return t19.copy().domain(t19.range().map(this.invertY, this).map(t19.invert, t19));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};
R2.prototype;

// node_modules/@frc-web-components/react/dist/axis.es-29b40501.js
var T3 = Object.defineProperty;
var s = (d34, o12, l25, p26) => {
  for (var t19 = void 0, h26 = d34.length - 1, a22; h26 >= 0; h26--)
    (a22 = d34[h26]) && (t19 = a22(o12, l25, t19) || t19);
  return t19 && T3(o12, l25, t19), t19;
};
var f2 = class extends x {
  constructor() {
    super(...arguments), this.vertical = false, this.ticks = 5, this.min = -1, this.max = 1, this.unit = "", this.prevSize = 0, this.prevTicks = 0, this.prevMin = null, this.prevMax = null;
  }
  setAxis(o12) {
    var l25;
    const p26 = this.vertical ? this.clientHeight : this.clientWidth, t19 = p26 / Math.max(1, this.ticks - 1), h26 = 30, { min: a22, max: c27 } = this;
    let y33 = -1 / 0, m33 = -1 / 0;
    if (this.prevSize === p26 && this.prevTicks === this.ticks && this.prevMin === a22 && this.prevMax === c27 && !o12.has("unit") && !o12.has("vertical"))
      return;
    this.prevSize = p26, this.prevTicks = this.ticks, this.prevMin = a22, this.prevMax = c27, this.svg.innerHTML = "";
    const n33 = $i(this.svg).attr("width", this.vertical ? h26 : p26).attr("height", this.vertical ? p26 : h26);
    for (let i27 = 0; i27 < this.ticks; i27 += 1) {
      if (this.vertical ? n33.append("line").attr("x1", 0).attr("y1", i27 * t19).attr("x2", 8).attr("y2", i27 * t19) : n33.append("line").attr("x1", i27 * t19).attr("y1", 0).attr("x2", i27 * t19).attr("y2", 8), this.vertical) {
        const r24 = a22 + i27 * (c27 - a22) / Math.max(this.ticks - 1, 1);
        n33.append("text").attr("x", -3).attr("y", i27 * t19 + 4).attr("text-anchor", "end").text(r24.toFixed(2) + (this.unit ? ` ${this.unit}` : ""));
      } else {
        const r24 = (i27 - y33) * t19, u35 = y33 * t19 + r24 * 0.4;
        if (m33 < 0 || u35 > m33) {
          const g31 = a22 + i27 * (c27 - a22) / Math.max(this.ticks - 1, 1), k27 = n33.append("text").attr("x", i27 * t19).attr("y", 25).attr("text-anchor", "middle").text(g31.toFixed(2) + (this.unit ? ` ${this.unit}` : ""));
          m33 = i27 * t19 + (((l25 = k27.node()) == null ? void 0 : l25.getBBox().width) ?? 0) / 2, y33 = i27;
        }
      }
      if (i27 < this.ticks - 1)
        for (let r24 = 1; r24 < 4; r24 += 1)
          this.vertical ? n33.append("line").attr("x1", 4).attr("y1", i27 * t19 + r24 * t19 / 4).attr("x2", 8).attr("y2", i27 * t19 + r24 * t19 / 4) : n33.append("line").attr("x1", i27 * t19 + r24 * t19 / 4).attr("y1", 0).attr("x2", i27 * t19 + r24 * t19 / 4).attr("y2", 4);
    }
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.requestUpdate();
    }).observe(this);
  }
  updated(o12) {
    this.setAxis(o12);
  }
  render() {
    return Ht` <svg id="svg"></svg> `;
  }
};
f2.styles = Mt2`
    :host {
      display: inline-block;
      position: relative;
    }

    :host([vertical]) {
      height: 100%;
    }

    :host(:not([vertical])) {
      width: 100%;
    }

    svg {
      overflow: visible;
      position: absolute;
      top: 0;
      left: 0;
    }

    line {
      stroke: rgb(150, 150, 150);
      stroke-width: 2;
    }

    text {
      font-weight: normal;
      font-size: 13px;
      fill: var(--frc-axis-text-color, #000);
    }
  `;
var e = f2;
s([
  Rt({ type: Boolean })
], e.prototype, "vertical");
s([
  Rt({ type: Number })
], e.prototype, "ticks");
s([
  Rt({ type: Number })
], e.prototype, "min");
s([
  Rt({ type: Number })
], e.prototype, "max");
s([
  Rt({ type: String })
], e.prototype, "unit");
s([
  n2()
], e.prototype, "prevSize");
s([
  n2()
], e.prototype, "prevTicks");
s([
  n2()
], e.prototype, "prevMin");
s([
  n2()
], e.prototype, "prevMax");
s([
  a("#svg")
], e.prototype, "svg");
customElements.get("frc-axis") || customElements.define("frc-axis", e);

// node_modules/@frc-web-components/react/dist/number-bar.es-14bfc169.js
var x3 = Object.defineProperty;
var i3 = (n33, r24, a22, y33) => {
  for (var s18 = void 0, o12 = n33.length - 1, p26; o12 >= 0; o12--)
    (p26 = n33[o12]) && (s18 = p26(r24, a22, s18) || s18);
  return s18 && x3(r24, a22, s18), s18;
};
function b4(n33, r24, a22) {
  return Math.min(a22, Math.max(n33, r24));
}
var h3 = class extends x {
  constructor() {
    super(...arguments), this.value = 0, this.min = -1, this.max = 1, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "";
  }
  render() {
    const r24 = Math.min(this.min, this.max), a22 = Math.max(this.min, this.max);
    return Ht`
      <frc-bar
        value="${this.value}"
        min="${r24}"
        max="${a22}"
        center="${this.center}"
        part="bar"
      >
        ${this.hideText ? "" : Ht`
              ${this.value.toFixed(b4(this.precision, 0, 100))} ${this.unit}
            `}
      </frc-bar>
      ${this.numTickMarks > 0 ? Ht`
            <frc-axis
              part="axis"
              ticks="${this.numTickMarks}"
              min=${r24}
              max=${a22}
              unit="${this.unit}"
            ></frc-axis>
          ` : ""}
    `;
  }
};
h3.styles = [
  Mt2`
      :host {
        display: inline-block;
        width: 300px;
        height: auto;
        font-family: sans-serif;
      }

      [part='bar'] {
        width: 100%;
        margin: 0;
      }

      [part='bar'] {
        position: relative;
        height: 20px;
        border-radius: 3px;
      }

      [part='axis'] {
        width: calc(100% - 45px);
        margin: 2px auto 0;
        display: block;
      }
    `
];
var t2 = h3;
i3([
  Rt({ type: Number })
], t2.prototype, "value");
i3([
  Rt({ type: Number })
], t2.prototype, "min");
i3([
  Rt({ type: Number })
], t2.prototype, "max");
i3([
  Rt({ type: Number })
], t2.prototype, "center");
i3([
  Rt({ type: Number })
], t2.prototype, "precision");
i3([
  Rt({ type: Boolean, attribute: "hide-text" })
], t2.prototype, "hideText");
i3([
  Rt({ type: Number, attribute: "num-tick-marks" })
], t2.prototype, "numTickMarks");
i3([
  Rt({ type: String })
], t2.prototype, "unit");
customElements.get("frc-number-bar") || customElements.define("frc-number-bar", t2);

// node_modules/@frc-web-components/react/dist/accelerometer.es-1e0be328.js
var u2 = Object.defineProperty;
var r = (p26, m33, s18, y33) => {
  for (var o12 = void 0, i27 = p26.length - 1, n33; i27 >= 0; i27--)
    (n33 = p26[i27]) && (o12 = n33(m33, s18, o12) || o12);
  return o12 && u2(m33, s18, o12), o12;
};
var t3 = class extends t2 {
  constructor() {
    super(...arguments), this.value = 0, this.min = -1, this.max = 1, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "g";
  }
};
r([
  Rt({ type: Number })
], t3.prototype, "value");
r([
  Rt({ type: Number })
], t3.prototype, "min");
r([
  Rt({ type: Number })
], t3.prototype, "max");
r([
  Rt({ type: Number })
], t3.prototype, "center");
r([
  Rt({ type: Number })
], t3.prototype, "precision");
r([
  Rt({ type: Boolean, attribute: "hide-text" })
], t3.prototype, "hideText");
r([
  Rt({ type: Number, attribute: "num-tick-marks" })
], t3.prototype, "numTickMarks");
r([
  Rt({ type: String })
], t3.prototype, "unit");
customElements.get("frc-accelerometer") || customElements.define("frc-accelerometer", t3);

// node_modules/@frc-web-components/react/dist/components/3AxisAccelerometer.es.js
var x4 = Object.defineProperty;
var r2 = (m33, i27, c27, y33) => {
  for (var o12 = void 0, a22 = m33.length - 1, s18; a22 >= 0; a22--)
    (s18 = m33[a22]) && (o12 = s18(i27, c27, o12) || o12);
  return o12 && x4(i27, c27, o12), o12;
};
var n4 = class extends x {
  constructor() {
    super(...arguments), this.x = 0, this.y = 0, this.z = 0, this.min = -1, this.max = 1, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "g";
  }
  renderAccelerometer(i27, c27) {
    return Ht`
      <div part="accelerometer">
        <label part="label">${i27}</label>
        <frc-accelerometer
          part="${i27}"
          value="${this[i27] || 0}"
          min="${this.min}"
          max="${this.max}"
          center="${this.center}"
          precision="${this.precision}"
          ?hide-text="${this.hideText}"
          num-tick-marks="${c27}"
          unit="${this.unit}"
        ></frc-accelerometer>
      </div>
    `;
  }
  render() {
    return Ht`
      ${this.renderAccelerometer("x", 0)} ${this.renderAccelerometer("y", 0)}
      ${this.renderAccelerometer("z", this.numTickMarks)}
    `;
  }
};
n4.styles = Mt2`
    :host {
      display: inline-flex;
      flex-direction: column;
      height: auto;
      font-family: sans-serif;
      width: 300px;
    }

    [part='accelerometer'] {
      width: 100%;
      display: flex;
      gap: 8px;
      align-items: center;
      margin-bottom: 10px;
    }

    [part='accelerometer']:last-child {
      margin-bottom: 0;
    }

    [part='accelerometer'] label {
      width: 10px;
      padding-top: 2px;
      font-weight: bold;
      text-transform: uppercase;
      color: var(--frc-3-axis-accelerometer-label-color, #000);
    }

    frc-accelerometer {
      width: 100%;
      flex: 1;
    }

    frc-accelerometer::part(bar) {
      width: 100%;
      margin: 0;
    }
  `;
var e2 = n4;
r2([
  Rt({ type: Number })
], e2.prototype, "x");
r2([
  Rt({ type: Number })
], e2.prototype, "y");
r2([
  Rt({ type: Number })
], e2.prototype, "z");
r2([
  Rt({ type: Number })
], e2.prototype, "min");
r2([
  Rt({ type: Number })
], e2.prototype, "max");
r2([
  Rt({ type: Number })
], e2.prototype, "center");
r2([
  Rt({ type: Number })
], e2.prototype, "precision");
r2([
  Rt({ type: Boolean, attribute: "hide-text" })
], e2.prototype, "hideText");
r2([
  Rt({ type: Number, attribute: "num-tick-marks" })
], e2.prototype, "numTickMarks");
r2([
  Rt({ type: String })
], e2.prototype, "unit");
customElements.get("frc-3-axis-accelerometer") || customElements.define("frc-3-axis-accelerometer", e2);
var M3 = xt({
  tagName: "frc-3-axis-accelerometer",
  elementClass: e2,
  react: import_react.default
});

// node_modules/@frc-web-components/react/dist/components/Accelerometer.es.js
var import_react2 = __toESM(require_react(), 1);
var n5 = xt({
  tagName: "frc-accelerometer",
  elementClass: t3,
  react: import_react2.default
});

// node_modules/@frc-web-components/react/dist/components/Axis.es.js
var import_react3 = __toESM(require_react(), 1);
var f3 = xt({
  tagName: "frc-axis",
  elementClass: e,
  react: import_react3.default
});

// node_modules/@frc-web-components/react/dist/components/Bar.es.js
var import_react4 = __toESM(require_react(), 1);
var i4 = xt({
  tagName: "frc-bar",
  elementClass: n3,
  react: import_react4.default
});

// node_modules/@frc-web-components/react/dist/components/BasicFmsInfo.es.js
var import_react6 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/icon-Dc8f99z4-878f257b.js
var s2 = {
  check: "M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",
  "check-circle": "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z",
  close: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z",
  edit: "M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"
};
var d2 = Object.defineProperty;
var n6 = (t19, o12, l25, v30) => {
  for (var e11 = void 0, c27 = t19.length - 1, p26; c27 >= 0; c27--)
    (p26 = t19[c27]) && (e11 = p26(o12, l25, e11) || e11);
  return e11 && d2(o12, l25, e11), e11;
};
`${Object.keys(s2)[0]}`, Object.keys(s2)[0];
var a3 = class extends x {
  constructor() {
    super(...arguments), this.color = "#000000", this.icon = "", this.svgPath = "", this.viewBox = "0 0 24 24";
  }
  render() {
    const o12 = this.icon === "Custom" || !this.icon;
    return Ht`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="24px"
        viewBox=${o12 ? this.viewBox : "0 0 24 24"}
        width="24px"
        fill=${this.color}
      >
        <path d=${o12 ? this.svgPath : s2[this.icon]} />
      </svg>
    `;
  }
};
a3.styles = Mt2`
    :host {
      display: inline-block;
      width: 24px;
      height: 24px;
    }

    svg {
      width: 100%;
      height: 100%;
    }
  `;
var i5 = a3;
n6([
  Rt({ type: String })
], i5.prototype, "color");
n6([
  Rt({ type: String })
], i5.prototype, "icon");
n6([
  Rt({ type: String, attribute: "svg-path" })
], i5.prototype, "svgPath");
n6([
  Rt({ type: String, attribute: "view-box" })
], i5.prototype, "viewBox");
customElements.get("frc-icon") || customElements.define("frc-icon", i5);

// node_modules/@frc-web-components/react/dist/NT4Provider-5cc60b98.js
var import_jsx_runtime = __toESM(require_jsx_runtime(), 1);
var import_react5 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/fwc/dist/index.es-3BKgpzRw.js
var _2 = (r24, e11, t19) => {
  if (!e11.has(r24))
    throw TypeError("Cannot " + t19);
};
var s3 = (r24, e11, t19) => (_2(r24, e11, "read from private field"), t19 ? t19.call(r24) : e11.get(r24));
var n7 = (r24, e11, t19) => {
  if (e11.has(r24))
    throw TypeError("Cannot add the same private member more than once");
  e11 instanceof WeakSet ? e11.add(r24) : e11.set(r24, t19);
};
var h4 = (r24, e11, t19, i27) => (_2(r24, e11, "write to private field"), e11.set(r24, t19), t19);
var a4 = (r24, e11, t19) => (_2(r24, e11, "access private method"), t19);
var Ve2 = 1 / 0;
var Pe2 = "[object Symbol]";
var Te2 = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;
var Re2 = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;
var J3 = "\\ud800-\\udfff";
var de2 = "\\u0300-\\u036f\\ufe20-\\ufe23";
var fe2 = "\\u20d0-\\u20f0";
var pe2 = "\\u2700-\\u27bf";
var ve2 = "a-z\\xdf-\\xf6\\xf8-\\xff";
var Ue2 = "\\xac\\xb1\\xd7\\xf7";
var Ie2 = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf";
var ze2 = "\\u2000-\\u206f";
var Le2 = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000";
var Se2 = "A-Z\\xc0-\\xd6\\xd8-\\xde";
var ge2 = "\\ufe0e\\ufe0f";
var be2 = Ue2 + Ie2 + ze2 + Le2;
var ee2 = "['’]";
var Ze2 = "[" + J3 + "]";
var ie2 = "[" + be2 + "]";
var D3 = "[" + de2 + fe2 + "]";
var we2 = "\\d+";
var He2 = "[" + pe2 + "]";
var me2 = "[" + ve2 + "]";
var ye2 = "[^" + J3 + be2 + we2 + pe2 + ve2 + Se2 + "]";
var q3 = "\\ud83c[\\udffb-\\udfff]";
var Ne2 = "(?:" + D3 + "|" + q3 + ")";
var xe2 = "[^" + J3 + "]";
var te2 = "(?:\\ud83c[\\udde6-\\uddff]){2}";
var re2 = "[\\ud800-\\udbff][\\udc00-\\udfff]";
var g2 = "[" + Se2 + "]";
var Ee2 = "\\u200d";
var oe2 = "(?:" + me2 + "|" + ye2 + ")";
var De2 = "(?:" + g2 + "|" + ye2 + ")";
var ne2 = "(?:" + ee2 + "(?:d|ll|m|re|s|t|ve))?";
var ue2 = "(?:" + ee2 + "(?:D|LL|M|RE|S|T|VE))?";
var ke2 = Ne2 + "?";
var je2 = "[" + ge2 + "]?";
var Ge2 = "(?:" + Ee2 + "(?:" + [xe2, te2, re2].join("|") + ")" + je2 + ke2 + ")*";
var We2 = je2 + ke2 + Ge2;
var Je2 = "(?:" + [He2, te2, re2].join("|") + ")" + We2;
var Ke2 = "(?:" + [xe2 + D3 + "?", D3, te2, re2, Ze2].join("|") + ")";
var Fe2 = RegExp(ee2, "g");
var Ye2 = RegExp(D3, "g");
var qe2 = RegExp(q3 + "(?=" + q3 + ")|" + Ke2 + We2, "g");
var $e2 = RegExp([
  g2 + "?" + me2 + "+" + ne2 + "(?=" + [ie2, g2, "$"].join("|") + ")",
  De2 + "+" + ue2 + "(?=" + [ie2, g2 + oe2, "$"].join("|") + ")",
  g2 + "?" + oe2 + "+" + ne2,
  g2 + "+" + ue2,
  we2,
  Je2
].join("|"), "g");
var Be2 = RegExp("[" + Ee2 + J3 + de2 + fe2 + ge2 + "]");
var Qe2 = /[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;
var Xe2 = {
  // Latin-1 Supplement block.
  À: "A",
  Á: "A",
  Â: "A",
  Ã: "A",
  Ä: "A",
  Å: "A",
  à: "a",
  á: "a",
  â: "a",
  ã: "a",
  ä: "a",
  å: "a",
  Ç: "C",
  ç: "c",
  Ð: "D",
  ð: "d",
  È: "E",
  É: "E",
  Ê: "E",
  Ë: "E",
  è: "e",
  é: "e",
  ê: "e",
  ë: "e",
  Ì: "I",
  Í: "I",
  Î: "I",
  Ï: "I",
  ì: "i",
  í: "i",
  î: "i",
  ï: "i",
  Ñ: "N",
  ñ: "n",
  Ò: "O",
  Ó: "O",
  Ô: "O",
  Õ: "O",
  Ö: "O",
  Ø: "O",
  ò: "o",
  ó: "o",
  ô: "o",
  õ: "o",
  ö: "o",
  ø: "o",
  Ù: "U",
  Ú: "U",
  Û: "U",
  Ü: "U",
  ù: "u",
  ú: "u",
  û: "u",
  ü: "u",
  Ý: "Y",
  ý: "y",
  ÿ: "y",
  Æ: "Ae",
  æ: "ae",
  Þ: "Th",
  þ: "th",
  ß: "ss",
  // Latin Extended-A block.
  Ā: "A",
  Ă: "A",
  Ą: "A",
  ā: "a",
  ă: "a",
  ą: "a",
  Ć: "C",
  Ĉ: "C",
  Ċ: "C",
  Č: "C",
  ć: "c",
  ĉ: "c",
  ċ: "c",
  č: "c",
  Ď: "D",
  Đ: "D",
  ď: "d",
  đ: "d",
  Ē: "E",
  Ĕ: "E",
  Ė: "E",
  Ę: "E",
  Ě: "E",
  ē: "e",
  ĕ: "e",
  ė: "e",
  ę: "e",
  ě: "e",
  Ĝ: "G",
  Ğ: "G",
  Ġ: "G",
  Ģ: "G",
  ĝ: "g",
  ğ: "g",
  ġ: "g",
  ģ: "g",
  Ĥ: "H",
  Ħ: "H",
  ĥ: "h",
  ħ: "h",
  Ĩ: "I",
  Ī: "I",
  Ĭ: "I",
  Į: "I",
  İ: "I",
  ĩ: "i",
  ī: "i",
  ĭ: "i",
  į: "i",
  ı: "i",
  Ĵ: "J",
  ĵ: "j",
  Ķ: "K",
  ķ: "k",
  ĸ: "k",
  Ĺ: "L",
  Ļ: "L",
  Ľ: "L",
  Ŀ: "L",
  Ł: "L",
  ĺ: "l",
  ļ: "l",
  ľ: "l",
  ŀ: "l",
  ł: "l",
  Ń: "N",
  Ņ: "N",
  Ň: "N",
  Ŋ: "N",
  ń: "n",
  ņ: "n",
  ň: "n",
  ŋ: "n",
  Ō: "O",
  Ŏ: "O",
  Ő: "O",
  ō: "o",
  ŏ: "o",
  ő: "o",
  Ŕ: "R",
  Ŗ: "R",
  Ř: "R",
  ŕ: "r",
  ŗ: "r",
  ř: "r",
  Ś: "S",
  Ŝ: "S",
  Ş: "S",
  Š: "S",
  ś: "s",
  ŝ: "s",
  ş: "s",
  š: "s",
  Ţ: "T",
  Ť: "T",
  Ŧ: "T",
  ţ: "t",
  ť: "t",
  ŧ: "t",
  Ũ: "U",
  Ū: "U",
  Ŭ: "U",
  Ů: "U",
  Ű: "U",
  Ų: "U",
  ũ: "u",
  ū: "u",
  ŭ: "u",
  ů: "u",
  ű: "u",
  ų: "u",
  Ŵ: "W",
  ŵ: "w",
  Ŷ: "Y",
  ŷ: "y",
  Ÿ: "Y",
  Ź: "Z",
  Ż: "Z",
  Ž: "Z",
  ź: "z",
  ż: "z",
  ž: "z",
  Ĳ: "IJ",
  ĳ: "ij",
  Œ: "Oe",
  œ: "oe",
  ŉ: "'n",
  ſ: "ss"
};
var _e2 = typeof global == "object" && global && global.Object === Object && global;
var et3 = typeof self == "object" && self && self.Object === Object && self;
var tt3 = _e2 || et3 || Function("return this")();
function rt3(r24, e11, t19, i27) {
  var o12 = -1, u35 = r24 ? r24.length : 0;
  for (i27; ++o12 < u35; )
    t19 = e11(t19, r24[o12], o12, r24);
  return t19;
}
function st3(r24) {
  return r24.split("");
}
function it4(r24) {
  return r24.match(Te2) || [];
}
function ot4(r24) {
  return function(e11) {
    return r24 == null ? void 0 : r24[e11];
  };
}
var nt3 = ot4(Xe2);
function Me2(r24) {
  return Be2.test(r24);
}
function ut3(r24) {
  return Qe2.test(r24);
}
function at2(r24) {
  return Me2(r24) ? ht3(r24) : st3(r24);
}
function ht3(r24) {
  return r24.match(qe2) || [];
}
function ct3(r24) {
  return r24.match($e2) || [];
}
var lt3 = Object.prototype;
var dt3 = lt3.toString;
var ae2 = tt3.Symbol;
var he2 = ae2 ? ae2.prototype : void 0;
var ce2 = he2 ? he2.toString : void 0;
function ft4(r24, e11, t19) {
  var i27 = -1, o12 = r24.length;
  e11 < 0 && (e11 = -e11 > o12 ? 0 : o12 + e11), t19 = t19 > o12 ? o12 : t19, t19 < 0 && (t19 += o12), o12 = e11 > t19 ? 0 : t19 - e11 >>> 0, e11 >>>= 0;
  for (var u35 = Array(o12); ++i27 < o12; )
    u35[i27] = r24[i27 + e11];
  return u35;
}
function pt3(r24) {
  if (typeof r24 == "string")
    return r24;
  if (wt2(r24))
    return ce2 ? ce2.call(r24) : "";
  var e11 = r24 + "";
  return e11 == "0" && 1 / r24 == -Ve2 ? "-0" : e11;
}
function vt3(r24, e11, t19) {
  var i27 = r24.length;
  return t19 = t19 === void 0 ? i27 : t19, !e11 && t19 >= i27 ? r24 : ft4(r24, e11, t19);
}
function St3(r24) {
  return function(e11) {
    e11 = K3(e11);
    var t19 = Me2(e11) ? at2(e11) : void 0, i27 = t19 ? t19[0] : e11.charAt(0), o12 = t19 ? vt3(t19, 1).join("") : e11.slice(1);
    return i27[r24]() + o12;
  };
}
function gt3(r24) {
  return function(e11) {
    return rt3(kt2(xt3(e11).replace(Fe2, "")), r24, "");
  };
}
function bt3(r24) {
  return !!r24 && typeof r24 == "object";
}
function wt2(r24) {
  return typeof r24 == "symbol" || bt3(r24) && dt3.call(r24) == Pe2;
}
function K3(r24) {
  return r24 == null ? "" : pt3(r24);
}
var mt4 = gt3(function(r24, e11, t19) {
  return e11 = e11.toLowerCase(), r24 + (t19 ? yt4(e11) : e11);
});
function yt4(r24) {
  return Et3(K3(r24).toLowerCase());
}
function xt3(r24) {
  return r24 = K3(r24), r24 && r24.replace(Re2, nt3).replace(Ye2, "");
}
var Et3 = St3("toUpperCase");
function kt2(r24, e11, t19) {
  return r24 = K3(r24), e11 = e11, e11 === void 0 ? ut3(r24) ? ct3(r24) : it4(r24) : r24.match(e11) || [];
}
var j3;
var p2;
var R3;
var v5;
var W3;
var b5;
var U3;
var jt2 = class {
  constructor(e11, t19, i27, o12) {
    n7(this, j3, void 0), n7(this, p2, {}), n7(this, R3, void 0), n7(this, v5, void 0), n7(this, W3, false), n7(this, b5, void 0), n7(this, U3, void 0), h4(this, U3, e11), h4(this, b5, t19), h4(this, j3, i27), h4(this, R3, o12);
  }
  getKey() {
    return s3(this, j3);
  }
  hasValue() {
    return s3(this, W3);
  }
  getValue() {
    return s3(this, v5);
  }
  setValue(e11) {
    h4(this, v5, e11), h4(this, W3, true);
  }
  removeValue() {
    h4(this, v5, void 0), h4(this, W3, false);
  }
  getSourceValue() {
    return this.hasChildren() ? s3(this, b5) : s3(this, v5);
  }
  setSourceValue(e11) {
    s3(this, U3).userUpdate(s3(this, j3), e11);
  }
  getChildren() {
    return s3(this, p2);
  }
  hasChildren() {
    return Object.getOwnPropertyNames(s3(this, p2)).length > 0;
  }
  addChild(e11, t19) {
    const i27 = e11.split("/").at(-1);
    typeof i27 > "u" || (s3(this, p2)[i27] = t19, !(typeof i27 > "u") && Object.defineProperty(s3(this, b5), i27, {
      configurable: true,
      enumerable: true,
      set(o12) {
        t19.setSourceValue(o12);
      },
      get() {
        return t19.getSourceValue();
      }
    }));
  }
  removeChild(e11) {
    const t19 = e11.split("/").at(-1);
    typeof t19 < "u" && (delete s3(this, p2)[t19], delete s3(this, b5)[t19]);
  }
  getParent() {
    return s3(this, R3);
  }
  getJson(e11 = true) {
    if (this.hasChildren()) {
      const t19 = {};
      return Object.entries(s3(this, p2)).forEach(([i27, o12]) => {
        const u35 = e11 ? mt4(i27) : i27;
        t19[u35] = o12.getJson(e11);
      }), t19;
    }
    return s3(this, v5);
  }
};
j3 = /* @__PURE__ */ new WeakMap(), p2 = /* @__PURE__ */ new WeakMap(), R3 = /* @__PURE__ */ new WeakMap(), v5 = /* @__PURE__ */ new WeakMap(), W3 = /* @__PURE__ */ new WeakMap(), b5 = /* @__PURE__ */ new WeakMap(), U3 = /* @__PURE__ */ new WeakMap();
function Wt2(r24) {
  return r24.hasValue() ? false : Object.keys(r24.getChildren()).length === 0;
}
var M4;
var E3;
var d3;
var x5;
var f4;
var V3;
var I3;
var $2;
var Oe2;
var B3;
var Ae2;
var G3;
var Q3;
var X2;
var le2;
var S3;
var w3;
var Mt4 = class {
  constructor(e11) {
    n7(this, $2), n7(this, B3), n7(this, G3), n7(this, X2), n7(this, S3), n7(this, M4, /* @__PURE__ */ new Map()), n7(this, E3, /* @__PURE__ */ new Set()), n7(this, d3, /* @__PURE__ */ new Map()), n7(this, x5, void 0), n7(this, f4, {}), n7(this, V3, /* @__PURE__ */ new Map()), n7(this, I3, void 0), h4(this, x5, e11), h4(this, I3, {
      clearSources: e11.addClearSourcesHandler(() => {
        this.clearSources();
      }),
      sourcesChanged: e11.addSourcesChangedHandler((t19) => {
        Object.entries(t19).forEach(([i27, o12]) => {
          this.updateSource(i27, o12, false);
        }), Object.entries(t19).forEach(([i27]) => {
          a4(this, S3, w3).call(this, i27);
        });
      }),
      sourcesRemoved: e11.addSourcesRemovedHandler((t19) => {
        const i27 = t19.filter((o12) => s3(this, d3).has(o12));
        i27.forEach((o12) => this.removeSource(o12), false), i27.forEach((o12) => {
          a4(this, S3, w3).call(this, o12);
        });
      })
    });
  }
  getSourceProvider() {
    return s3(this, x5);
  }
  getSource(e11) {
    return s3(this, d3).get(e11);
  }
  getSourceValue(e11) {
    var t19;
    return (t19 = this.getSource(e11)) == null ? void 0 : t19.getSourceValue();
  }
  updateSource(e11, t19, i27 = true) {
    a4(this, $2, Oe2).call(this, e11), a4(this, B3, Ae2).call(this, e11);
    const o12 = s3(this, d3).get(e11);
    o12 == null || o12.setValue(t19), i27 && a4(this, S3, w3).call(this, e11);
  }
  clearSources() {
    const e11 = [];
    s3(this, d3).forEach((t19, i27) => {
      e11.push(i27), this.removeSource(i27, false);
    }), e11.forEach((t19) => a4(this, S3, w3).call(this, t19));
  }
  removeSource(e11, t19 = true) {
    const i27 = s3(this, d3).get(e11);
    i27 && (i27.removeValue(), a4(this, G3, Q3).call(this, i27), t19 && a4(this, S3, w3).call(this, e11), s3(this, E3).delete(e11));
  }
  subscribe(e11, t19, i27) {
    var o12;
    typeof s3(this, f4)[e11] > "u" && (s3(this, f4)[e11] = /* @__PURE__ */ new Map());
    const u35 = Symbol("SourceSubscriber");
    return s3(this, f4)[e11].set(u35, t19), i27 && ((o12 = this.getSource(e11)) != null && o12.hasValue() || s3(this, x5).requestSource(e11), t19(this.getSourceValue(e11), e11, e11)), () => {
      s3(this, f4)[e11].delete(u35);
    };
  }
  subscribeAll(e11, t19) {
    const i27 = Symbol("SourceSubscriberAll");
    return s3(this, V3).set(i27, e11), t19 && s3(this, E3).forEach((o12) => {
      e11(this.getSourceValue(o12), o12);
    }), () => {
      s3(this, V3).delete(i27);
    };
  }
  unsubscribeFromProvider() {
    const { clearSources: e11, sourcesChanged: t19, sourcesRemoved: i27 } = s3(this, I3);
    e11(), t19(), i27();
  }
};
M4 = /* @__PURE__ */ new WeakMap(), E3 = /* @__PURE__ */ new WeakMap(), d3 = /* @__PURE__ */ new WeakMap(), x5 = /* @__PURE__ */ new WeakMap(), f4 = /* @__PURE__ */ new WeakMap(), V3 = /* @__PURE__ */ new WeakMap(), I3 = /* @__PURE__ */ new WeakMap(), $2 = /* @__PURE__ */ new WeakSet(), Oe2 = function(r24) {
  s3(this, E3).has(r24) || s3(this, E3).add(r24);
}, B3 = /* @__PURE__ */ new WeakSet(), Ae2 = function(r24) {
  const e11 = r24.split("/");
  let t19;
  e11.forEach((i27, o12) => {
    const u35 = e11.slice(0, o12 + 1).join("/");
    if (!s3(this, d3).has(u35)) {
      const k27 = s3(this, d3).get(t19), se6 = new jt2(
        s3(this, x5),
        a4(this, X2, le2).call(this, u35),
        u35,
        k27
      );
      s3(this, d3).set(u35, se6), k27 == null || k27.addChild(u35, se6);
    }
    t19 = u35;
  });
}, G3 = /* @__PURE__ */ new WeakSet(), Q3 = function(r24) {
  const e11 = Wt2(r24), t19 = r24.getParent();
  e11 && t19 && (t19.removeChild(r24.getKey()), s3(this, d3).delete(r24.getKey()), a4(this, G3, Q3).call(this, t19));
}, X2 = /* @__PURE__ */ new WeakSet(), le2 = function(r24) {
  return s3(this, M4).has(r24) || s3(this, M4).set(r24, {}), s3(this, M4).get(r24);
}, S3 = /* @__PURE__ */ new WeakSet(), w3 = function(r24) {
  const e11 = r24.split("/"), t19 = this.getSourceValue(r24);
  e11.forEach((i27, o12) => {
    const u35 = e11.slice(0, o12 + 1).join("/");
    u35 in s3(this, f4) && s3(this, f4)[u35].forEach((k27) => {
      k27(this.getSourceValue(u35), u35, r24);
    });
  }), s3(this, V3).forEach((i27) => {
    i27(t19, r24);
  });
};
var c2;
var z3;
var L3;
var Z3;
var Ot4 = class {
  constructor() {
    n7(this, c2, {}), n7(this, z3, []), n7(this, L3, void 0), n7(this, Z3, []);
  }
  hasSourceProvider(e11) {
    return e11 in s3(this, c2);
  }
  addSourceProvider(e11, t19) {
    if (this.hasSourceProvider(e11))
      throw new Error("A source provider with that name has already been added.");
    const i27 = new Mt4(t19);
    s3(this, c2)[e11] = i27, s3(this, z3).forEach((o12) => {
      o12(e11);
    });
  }
  sourceProviderAdded(e11) {
    s3(this, z3).push(e11);
  }
  removeSourceProvider(e11) {
    this.hasSourceProvider(e11) && (this.getSourceProvider(e11).disconnect(), s3(this, c2)[e11].unsubscribeFromProvider(), delete s3(this, c2)[e11]);
  }
  getSourceProvider(e11) {
    return s3(this, c2)[e11].getSourceProvider();
  }
  getSourceProviderNames() {
    return Object.keys(s3(this, c2));
  }
  setDefaultSourceProvider(e11) {
    h4(this, L3, e11), s3(this, Z3).forEach((t19) => {
      t19(e11);
    });
  }
  defaultSourceProviderSet(e11) {
    if (typeof e11 != "function")
      throw new Error("listener is not a function");
    s3(this, Z3).push(e11);
  }
  getDefaultSourceProvider() {
    return s3(this, L3);
  }
  getSource(e11, t19) {
    var i27;
    return (i27 = s3(this, c2)[e11]) == null ? void 0 : i27.getSource(t19);
  }
  getSourceValue(e11, t19) {
    var i27;
    return (i27 = s3(this, c2)[e11]) == null ? void 0 : i27.getSourceValue(t19);
  }
  subscribe(e11, t19, i27, o12) {
    var u35;
    return (u35 = s3(this, c2)[e11]) == null ? void 0 : u35.subscribe(t19, i27, o12);
  }
  subscribeAll(e11, t19, i27) {
    var o12;
    return (o12 = s3(this, c2)[e11]) == null ? void 0 : o12.subscribeAll(t19, i27);
  }
};
c2 = /* @__PURE__ */ new WeakMap(), z3 = /* @__PURE__ */ new WeakMap(), L3 = /* @__PURE__ */ new WeakMap(), Z3 = /* @__PURE__ */ new WeakMap();
var Ce2 = () => {
};
var m3;
var l3;
var O3;
var A3;
var P3;
var T4;
var y3;
var C3;
var H4;
var F3;
var N2;
var Y2;
var At3 = class {
  constructor(e11 = {}, t19 = 0) {
    n7(this, y3), n7(this, H4), n7(this, N2), n7(this, m3, void 0), n7(this, l3, {}), n7(this, O3, void 0), n7(this, A3, /* @__PURE__ */ new Map()), n7(this, P3, /* @__PURE__ */ new Map()), n7(this, T4, /* @__PURE__ */ new Map()), t19 && h4(this, m3, setInterval(a4(this, y3, C3).bind(this), t19)), Object.entries(e11).forEach(([i27, o12]) => {
      this.updateSource(i27, o12);
    });
  }
  /**
   * Updates the value of a source in the store. If the source doesn't
   * exist then it is added. Should only be called internally by the
   * source provider.
   *
   * @protected
   * @param {string} key - The source's key. This is a string separated
   * by '/'.
   * @param {*} value - The new value.
   */
  updateSource(e11, t19) {
    clearTimeout(s3(this, O3)), s3(this, l3)[e11] === void 0 ? s3(this, l3)[e11] = {
      first: {
        type: "change",
        value: t19
      }
    } : s3(this, l3)[e11].last = {
      type: "change",
      value: t19
    }, s3(this, m3) || a4(this, y3, C3).call(this);
  }
  /**
   * Removes an existing source from the store. If the source
   * doesn't exist this does nothing. Should only be called
   * internally by the source provider.
   *
   * @protected
   * @param {string} key - The source's key. This is a string separated
   * by '/'.
   */
  removeSource(e11) {
    s3(this, l3)[e11] === void 0 ? s3(this, l3)[e11] = {
      first: {
        type: "removal"
      }
    } : s3(this, l3)[e11].last = {
      type: "removal"
    }, s3(this, m3) || a4(this, y3, C3).call(this);
  }
  /**
   * Removes all sources in the store for this provider. Should only be
   * called internally by the source provider.
   *
   * @protected
   * @param {function} callback - An optional callback. Called when sources
   * have been cleared.
   */
  clearSources(e11 = Ce2) {
    a4(this, y3, C3).call(this, () => {
      s3(this, A3).forEach((t19) => t19()), e11();
    });
  }
  /**
   * Removes all sources in the store for this provider after a period of time.
   * If a source is set or this function is called before that period of time
   * ends, sources will not be cleared. This is useful for preventing sources
   * from being cleared on an unreliable network. Should only be called internally
   * by the source provider.
   *
   * @protected
   * @param {number} timeout - The period of time before clearing the sources
   * in milliseconds.
   * @param {function} callback - An optional callback. Called when sources
   * have been cleared.
   */
  clearSourcesWithTimeout(e11, t19) {
    clearTimeout(s3(this, O3)), h4(this, O3, setTimeout(() => {
      this.clearSources(t19);
    }, e11));
  }
  /**
   * Called when a source's value is modified by the user. This method
   * should be overridden by the child class to handle these updates.
   * This method should not be called directly.
   *
   * @protected
   * @param {string} key - The source's key. This is a string separated
   * by '/'.
   * @param {*} value - The source's updated value.
   */
  userUpdate(e11, t19) {
    this.updateSource(e11, t19);
  }
  /**
   * This optional method is called when a key is subscribed to that the store does not
   * already have. A SourceProvider can override this method to update the store with
   * the requested source.
   * @Override
   * @param {string} key
   */
  // eslint-disable-next-line class-methods-use-this, @typescript-eslint/no-empty-function
  requestSource(e11) {
  }
  /**
   * Helper function to get the type of a variable represented
   * by a string.
   *
   * @param {*} value
   * @returns {string} - The value's type.
   */
  static getType(e11) {
    return typeof e11 == "string" ? "string" : typeof e11 == "number" ? "number" : typeof e11 == "boolean" ? "boolean" : e11 instanceof Array ? "Array" : e11 === null ? "null" : null;
  }
  addClearSourcesHandler(e11) {
    const t19 = Symbol("clearSources");
    return s3(this, A3).set(t19, e11), () => {
      s3(this, A3).delete(t19);
    };
  }
  addSourcesChangedHandler(e11) {
    const t19 = Symbol("sourcesChanged");
    return s3(this, P3).set(t19, e11), () => {
      s3(this, P3).delete(t19);
    };
  }
  addSourcesRemovedHandler(e11) {
    const t19 = Symbol("sourcesRemoved");
    return s3(this, T4).set(t19, e11), () => {
      s3(this, T4).delete(t19);
    };
  }
  disconnect() {
    clearTimeout(s3(this, m3));
  }
};
m3 = /* @__PURE__ */ new WeakMap(), l3 = /* @__PURE__ */ new WeakMap(), O3 = /* @__PURE__ */ new WeakMap(), A3 = /* @__PURE__ */ new WeakMap(), P3 = /* @__PURE__ */ new WeakMap(), T4 = /* @__PURE__ */ new WeakMap(), y3 = /* @__PURE__ */ new WeakSet(), C3 = function(r24 = Ce2) {
  if (Object.keys(s3(this, l3)).length === 0) {
    r24();
    return;
  }
  const e11 = { ...s3(this, l3) };
  h4(this, l3, {});
  const t19 = {}, i27 = {};
  Object.entries(e11).forEach(([o12, u35]) => {
    t19[o12] = u35.first, typeof u35.last < "u" && (i27[o12] = u35.last);
  }), a4(this, H4, F3).call(this, t19), a4(this, N2, Y2).call(this, t19), Object.keys(i27).length > 0 ? setTimeout(() => {
    a4(this, H4, F3).call(this, i27), a4(this, N2, Y2).call(this, i27), r24();
  }) : r24();
}, H4 = /* @__PURE__ */ new WeakSet(), F3 = function(r24) {
  const e11 = {};
  Object.entries(r24).forEach(([t19, { type: i27 }]) => {
    i27 === "change" && (e11[t19] = r24[t19].value);
  }), Object.keys(e11).length > 0 && s3(this, P3).forEach((t19) => t19(e11));
}, N2 = /* @__PURE__ */ new WeakSet(), Y2 = function(r24) {
  const e11 = [];
  Object.entries(r24).forEach(([t19, { type: i27 }]) => {
    i27 === "removal" && e11.push(t19);
  }), e11.length > 0 && s3(this, T4).forEach((t19) => t19(e11));
};

// node_modules/@frc-web-components/fwc/dist/transform-DR-Bw75L.js
var hn = { value: () => {
} };
function Dt2() {
  for (var t19 = 0, n33 = arguments.length, e11 = {}, r24; t19 < n33; ++t19) {
    if (!(r24 = arguments[t19] + "") || r24 in e11 || /[\s.]/.test(r24))
      throw new Error("illegal type: " + r24);
    e11[r24] = [];
  }
  return new K4(e11);
}
function K4(t19) {
  this._ = t19;
}
function pn2(t19, n33) {
  return t19.trim().split(/^|\s+/).map(function(e11) {
    var r24 = "", i27 = e11.indexOf(".");
    if (i27 >= 0 && (r24 = e11.slice(i27 + 1), e11 = e11.slice(0, i27)), e11 && !n33.hasOwnProperty(e11))
      throw new Error("unknown type: " + e11);
    return { type: e11, name: r24 };
  });
}
K4.prototype = Dt2.prototype = {
  constructor: K4,
  on: function(t19, n33) {
    var e11 = this._, r24 = pn2(t19 + "", e11), i27, o12 = -1, s18 = r24.length;
    if (arguments.length < 2) {
      for (; ++o12 < s18; )
        if ((i27 = (t19 = r24[o12]).type) && (i27 = dn2(e11[i27], t19.name)))
          return i27;
      return;
    }
    if (n33 != null && typeof n33 != "function")
      throw new Error("invalid callback: " + n33);
    for (; ++o12 < s18; )
      if (i27 = (t19 = r24[o12]).type)
        e11[i27] = bt4(e11[i27], t19.name, n33);
      else if (n33 == null)
        for (i27 in e11)
          e11[i27] = bt4(e11[i27], t19.name, null);
    return this;
  },
  copy: function() {
    var t19 = {}, n33 = this._;
    for (var e11 in n33)
      t19[e11] = n33[e11].slice();
    return new K4(t19);
  },
  call: function(t19, n33) {
    if ((i27 = arguments.length - 2) > 0)
      for (var e11 = new Array(i27), r24 = 0, i27, o12; r24 < i27; ++r24)
        e11[r24] = arguments[r24 + 2];
    if (!this._.hasOwnProperty(t19))
      throw new Error("unknown type: " + t19);
    for (o12 = this._[t19], r24 = 0, i27 = o12.length; r24 < i27; ++r24)
      o12[r24].value.apply(n33, e11);
  },
  apply: function(t19, n33, e11) {
    if (!this._.hasOwnProperty(t19))
      throw new Error("unknown type: " + t19);
    for (var r24 = this._[t19], i27 = 0, o12 = r24.length; i27 < o12; ++i27)
      r24[i27].value.apply(n33, e11);
  }
};
function dn2(t19, n33) {
  for (var e11 = 0, r24 = t19.length, i27; e11 < r24; ++e11)
    if ((i27 = t19[e11]).name === n33)
      return i27.value;
}
function bt4(t19, n33, e11) {
  for (var r24 = 0, i27 = t19.length; r24 < i27; ++r24)
    if (t19[r24].name === n33) {
      t19[r24] = hn, t19 = t19.slice(0, r24).concat(t19.slice(r24 + 1));
      break;
    }
  return e11 != null && t19.push({ name: n33, value: e11 }), t19;
}
var at3 = "http://www.w3.org/1999/xhtml";
var Nt3 = {
  svg: "http://www.w3.org/2000/svg",
  xhtml: at3,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};
function et4(t19) {
  var n33 = t19 += "", e11 = n33.indexOf(":");
  return e11 >= 0 && (n33 = t19.slice(0, e11)) !== "xmlns" && (t19 = t19.slice(e11 + 1)), Nt3.hasOwnProperty(n33) ? { space: Nt3[n33], local: t19 } : t19;
}
function _n2(t19) {
  return function() {
    var n33 = this.ownerDocument, e11 = this.namespaceURI;
    return e11 === at3 && n33.documentElement.namespaceURI === at3 ? n33.createElement(t19) : n33.createElementNS(e11, t19);
  };
}
function gn2(t19) {
  return function() {
    return this.ownerDocument.createElementNS(t19.space, t19.local);
  };
}
function Pt3(t19) {
  var n33 = et4(t19);
  return (n33.local ? gn2 : _n2)(n33);
}
function yn2() {
}
function dt4(t19) {
  return t19 == null ? yn2 : function() {
    return this.querySelector(t19);
  };
}
function wn2(t19) {
  typeof t19 != "function" && (t19 = dt4(t19));
  for (var n33 = this._groups, e11 = n33.length, r24 = new Array(e11), i27 = 0; i27 < e11; ++i27)
    for (var o12 = n33[i27], s18 = o12.length, a22 = r24[i27] = new Array(s18), u35, f39, l25 = 0; l25 < s18; ++l25)
      (u35 = o12[l25]) && (f39 = t19.call(u35, u35.__data__, l25, o12)) && ("__data__" in u35 && (f39.__data__ = u35.__data__), a22[l25] = f39);
  return new y4(r24, this._parents);
}
function xn2(t19) {
  return t19 == null ? [] : Array.isArray(t19) ? t19 : Array.from(t19);
}
function vn2() {
  return [];
}
function Ot5(t19) {
  return t19 == null ? vn2 : function() {
    return this.querySelectorAll(t19);
  };
}
function mn2(t19) {
  return function() {
    return xn2(t19.apply(this, arguments));
  };
}
function bn2(t19) {
  typeof t19 == "function" ? t19 = mn2(t19) : t19 = Ot5(t19);
  for (var n33 = this._groups, e11 = n33.length, r24 = [], i27 = [], o12 = 0; o12 < e11; ++o12)
    for (var s18 = n33[o12], a22 = s18.length, u35, f39 = 0; f39 < a22; ++f39)
      (u35 = s18[f39]) && (r24.push(t19.call(u35, u35.__data__, f39, s18)), i27.push(u35));
  return new y4(r24, i27);
}
function Lt2(t19) {
  return function() {
    return this.matches(t19);
  };
}
function Vt2(t19) {
  return function(n33) {
    return n33.matches(t19);
  };
}
var Nn2 = Array.prototype.find;
function An2(t19) {
  return function() {
    return Nn2.call(this.children, t19);
  };
}
function $n2() {
  return this.firstElementChild;
}
function kn2(t19) {
  return this.select(t19 == null ? $n2 : An2(typeof t19 == "function" ? t19 : Vt2(t19)));
}
var En2 = Array.prototype.filter;
function Sn2() {
  return Array.from(this.children);
}
function Cn2(t19) {
  return function() {
    return En2.call(this.children, t19);
  };
}
function Tn2(t19) {
  return this.selectAll(t19 == null ? Sn2 : Cn2(typeof t19 == "function" ? t19 : Vt2(t19)));
}
function Rn2(t19) {
  typeof t19 != "function" && (t19 = Lt2(t19));
  for (var n33 = this._groups, e11 = n33.length, r24 = new Array(e11), i27 = 0; i27 < e11; ++i27)
    for (var o12 = n33[i27], s18 = o12.length, a22 = r24[i27] = [], u35, f39 = 0; f39 < s18; ++f39)
      (u35 = o12[f39]) && t19.call(u35, u35.__data__, f39, o12) && a22.push(u35);
  return new y4(r24, this._parents);
}
function Yt2(t19) {
  return new Array(t19.length);
}
function Mn2() {
  return new y4(this._enter || this._groups.map(Yt2), this._parents);
}
function J4(t19, n33) {
  this.ownerDocument = t19.ownerDocument, this.namespaceURI = t19.namespaceURI, this._next = null, this._parent = t19, this.__data__ = n33;
}
J4.prototype = {
  constructor: J4,
  appendChild: function(t19) {
    return this._parent.insertBefore(t19, this._next);
  },
  insertBefore: function(t19, n33) {
    return this._parent.insertBefore(t19, n33);
  },
  querySelector: function(t19) {
    return this._parent.querySelector(t19);
  },
  querySelectorAll: function(t19) {
    return this._parent.querySelectorAll(t19);
  }
};
function In2(t19) {
  return function() {
    return t19;
  };
}
function Fn2(t19, n33, e11, r24, i27, o12) {
  for (var s18 = 0, a22, u35 = n33.length, f39 = o12.length; s18 < f39; ++s18)
    (a22 = n33[s18]) ? (a22.__data__ = o12[s18], r24[s18] = a22) : e11[s18] = new J4(t19, o12[s18]);
  for (; s18 < u35; ++s18)
    (a22 = n33[s18]) && (i27[s18] = a22);
}
function Hn2(t19, n33, e11, r24, i27, o12, s18) {
  var a22, u35, f39 = /* @__PURE__ */ new Map(), l25 = n33.length, c27 = o12.length, h26 = new Array(l25), p26;
  for (a22 = 0; a22 < l25; ++a22)
    (u35 = n33[a22]) && (h26[a22] = p26 = s18.call(u35, u35.__data__, a22, n33) + "", f39.has(p26) ? i27[a22] = u35 : f39.set(p26, u35));
  for (a22 = 0; a22 < c27; ++a22)
    p26 = s18.call(t19, o12[a22], a22, o12) + "", (u35 = f39.get(p26)) ? (r24[a22] = u35, u35.__data__ = o12[a22], f39.delete(p26)) : e11[a22] = new J4(t19, o12[a22]);
  for (a22 = 0; a22 < l25; ++a22)
    (u35 = n33[a22]) && f39.get(h26[a22]) === u35 && (i27[a22] = u35);
}
function qn2(t19) {
  return t19.__data__;
}
function Xn2(t19, n33) {
  if (!arguments.length)
    return Array.from(this, qn2);
  var e11 = n33 ? Hn2 : Fn2, r24 = this._parents, i27 = this._groups;
  typeof t19 != "function" && (t19 = In2(t19));
  for (var o12 = i27.length, s18 = new Array(o12), a22 = new Array(o12), u35 = new Array(o12), f39 = 0; f39 < o12; ++f39) {
    var l25 = r24[f39], c27 = i27[f39], h26 = c27.length, p26 = Dn2(t19.call(l25, l25 && l25.__data__, f39, r24)), d34 = p26.length, _19 = a22[f39] = new Array(d34), $24 = s18[f39] = new Array(d34), cn3 = u35[f39] = new Array(h26);
    e11(l25, c27, _19, $24, cn3, p26, n33);
    for (var M12 = 0, Y11 = 0, vt8, mt12; M12 < d34; ++M12)
      if (vt8 = _19[M12]) {
        for (M12 >= Y11 && (Y11 = M12 + 1); !(mt12 = $24[Y11]) && ++Y11 < d34; )
          ;
        vt8._next = mt12 || null;
      }
  }
  return s18 = new y4(s18, r24), s18._enter = a22, s18._exit = u35, s18;
}
function Dn2(t19) {
  return typeof t19 == "object" && "length" in t19 ? t19 : Array.from(t19);
}
function Pn2() {
  return new y4(this._exit || this._groups.map(Yt2), this._parents);
}
function On2(t19, n33, e11) {
  var r24 = this.enter(), i27 = this, o12 = this.exit();
  return typeof t19 == "function" ? (r24 = t19(r24), r24 && (r24 = r24.selection())) : r24 = r24.append(t19 + ""), n33 != null && (i27 = n33(i27), i27 && (i27 = i27.selection())), e11 == null ? o12.remove() : e11(o12), r24 && i27 ? r24.merge(i27).order() : i27;
}
function Ln2(t19) {
  for (var n33 = t19.selection ? t19.selection() : t19, e11 = this._groups, r24 = n33._groups, i27 = e11.length, o12 = r24.length, s18 = Math.min(i27, o12), a22 = new Array(i27), u35 = 0; u35 < s18; ++u35)
    for (var f39 = e11[u35], l25 = r24[u35], c27 = f39.length, h26 = a22[u35] = new Array(c27), p26, d34 = 0; d34 < c27; ++d34)
      (p26 = f39[d34] || l25[d34]) && (h26[d34] = p26);
  for (; u35 < i27; ++u35)
    a22[u35] = e11[u35];
  return new y4(a22, this._parents);
}
function Vn2() {
  for (var t19 = this._groups, n33 = -1, e11 = t19.length; ++n33 < e11; )
    for (var r24 = t19[n33], i27 = r24.length - 1, o12 = r24[i27], s18; --i27 >= 0; )
      (s18 = r24[i27]) && (o12 && s18.compareDocumentPosition(o12) ^ 4 && o12.parentNode.insertBefore(s18, o12), o12 = s18);
  return this;
}
function Yn2(t19) {
  t19 || (t19 = Bn2);
  function n33(c27, h26) {
    return c27 && h26 ? t19(c27.__data__, h26.__data__) : !c27 - !h26;
  }
  for (var e11 = this._groups, r24 = e11.length, i27 = new Array(r24), o12 = 0; o12 < r24; ++o12) {
    for (var s18 = e11[o12], a22 = s18.length, u35 = i27[o12] = new Array(a22), f39, l25 = 0; l25 < a22; ++l25)
      (f39 = s18[l25]) && (u35[l25] = f39);
    u35.sort(n33);
  }
  return new y4(i27, this._parents).order();
}
function Bn2(t19, n33) {
  return t19 < n33 ? -1 : t19 > n33 ? 1 : t19 >= n33 ? 0 : NaN;
}
function zn2() {
  var t19 = arguments[0];
  return arguments[0] = this, t19.apply(null, arguments), this;
}
function Un2() {
  return Array.from(this);
}
function Kn2() {
  for (var t19 = this._groups, n33 = 0, e11 = t19.length; n33 < e11; ++n33)
    for (var r24 = t19[n33], i27 = 0, o12 = r24.length; i27 < o12; ++i27) {
      var s18 = r24[i27];
      if (s18)
        return s18;
    }
  return null;
}
function Gn2() {
  let t19 = 0;
  for (const n33 of this)
    ++t19;
  return t19;
}
function Wn2() {
  return !this.node();
}
function Jn2(t19) {
  for (var n33 = this._groups, e11 = 0, r24 = n33.length; e11 < r24; ++e11)
    for (var i27 = n33[e11], o12 = 0, s18 = i27.length, a22; o12 < s18; ++o12)
      (a22 = i27[o12]) && t19.call(a22, a22.__data__, o12, i27);
  return this;
}
function Qn2(t19) {
  return function() {
    this.removeAttribute(t19);
  };
}
function Zn2(t19) {
  return function() {
    this.removeAttributeNS(t19.space, t19.local);
  };
}
function jn2(t19, n33) {
  return function() {
    this.setAttribute(t19, n33);
  };
}
function te3(t19, n33) {
  return function() {
    this.setAttributeNS(t19.space, t19.local, n33);
  };
}
function ne3(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    e11 == null ? this.removeAttribute(t19) : this.setAttribute(t19, e11);
  };
}
function ee3(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    e11 == null ? this.removeAttributeNS(t19.space, t19.local) : this.setAttributeNS(t19.space, t19.local, e11);
  };
}
function re3(t19, n33) {
  var e11 = et4(t19);
  if (arguments.length < 2) {
    var r24 = this.node();
    return e11.local ? r24.getAttributeNS(e11.space, e11.local) : r24.getAttribute(e11);
  }
  return this.each((n33 == null ? e11.local ? Zn2 : Qn2 : typeof n33 == "function" ? e11.local ? ee3 : ne3 : e11.local ? te3 : jn2)(e11, n33));
}
function Bt2(t19) {
  return t19.ownerDocument && t19.ownerDocument.defaultView || t19.document && t19 || t19.defaultView;
}
function ie3(t19) {
  return function() {
    this.style.removeProperty(t19);
  };
}
function oe3(t19, n33, e11) {
  return function() {
    this.style.setProperty(t19, n33, e11);
  };
}
function se2(t19, n33, e11) {
  return function() {
    var r24 = n33.apply(this, arguments);
    r24 == null ? this.style.removeProperty(t19) : this.style.setProperty(t19, r24, e11);
  };
}
function ae3(t19, n33, e11) {
  return arguments.length > 1 ? this.each((n33 == null ? ie3 : typeof n33 == "function" ? se2 : oe3)(t19, n33, e11 ?? "")) : T5(this.node(), t19);
}
function T5(t19, n33) {
  return t19.style.getPropertyValue(n33) || Bt2(t19).getComputedStyle(t19, null).getPropertyValue(n33);
}
function ue3(t19) {
  return function() {
    delete this[t19];
  };
}
function fe3(t19, n33) {
  return function() {
    this[t19] = n33;
  };
}
function le3(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    e11 == null ? delete this[t19] : this[t19] = e11;
  };
}
function ce3(t19, n33) {
  return arguments.length > 1 ? this.each((n33 == null ? ue3 : typeof n33 == "function" ? le3 : fe3)(t19, n33)) : this.node()[t19];
}
function zt2(t19) {
  return t19.trim().split(/^|\s+/);
}
function _t2(t19) {
  return t19.classList || new Ut4(t19);
}
function Ut4(t19) {
  this._node = t19, this._names = zt2(t19.getAttribute("class") || "");
}
Ut4.prototype = {
  add: function(t19) {
    var n33 = this._names.indexOf(t19);
    n33 < 0 && (this._names.push(t19), this._node.setAttribute("class", this._names.join(" ")));
  },
  remove: function(t19) {
    var n33 = this._names.indexOf(t19);
    n33 >= 0 && (this._names.splice(n33, 1), this._node.setAttribute("class", this._names.join(" ")));
  },
  contains: function(t19) {
    return this._names.indexOf(t19) >= 0;
  }
};
function Kt2(t19, n33) {
  for (var e11 = _t2(t19), r24 = -1, i27 = n33.length; ++r24 < i27; )
    e11.add(n33[r24]);
}
function Gt2(t19, n33) {
  for (var e11 = _t2(t19), r24 = -1, i27 = n33.length; ++r24 < i27; )
    e11.remove(n33[r24]);
}
function he3(t19) {
  return function() {
    Kt2(this, t19);
  };
}
function pe3(t19) {
  return function() {
    Gt2(this, t19);
  };
}
function de3(t19, n33) {
  return function() {
    (n33.apply(this, arguments) ? Kt2 : Gt2)(this, t19);
  };
}
function _e3(t19, n33) {
  var e11 = zt2(t19 + "");
  if (arguments.length < 2) {
    for (var r24 = _t2(this.node()), i27 = -1, o12 = e11.length; ++i27 < o12; )
      if (!r24.contains(e11[i27]))
        return false;
    return true;
  }
  return this.each((typeof n33 == "function" ? de3 : n33 ? he3 : pe3)(e11, n33));
}
function ge3() {
  this.textContent = "";
}
function ye3(t19) {
  return function() {
    this.textContent = t19;
  };
}
function we3(t19) {
  return function() {
    var n33 = t19.apply(this, arguments);
    this.textContent = n33 ?? "";
  };
}
function xe3(t19) {
  return arguments.length ? this.each(t19 == null ? ge3 : (typeof t19 == "function" ? we3 : ye3)(t19)) : this.node().textContent;
}
function ve3() {
  this.innerHTML = "";
}
function me3(t19) {
  return function() {
    this.innerHTML = t19;
  };
}
function be3(t19) {
  return function() {
    var n33 = t19.apply(this, arguments);
    this.innerHTML = n33 ?? "";
  };
}
function Ne3(t19) {
  return arguments.length ? this.each(t19 == null ? ve3 : (typeof t19 == "function" ? be3 : me3)(t19)) : this.node().innerHTML;
}
function Ae3() {
  this.nextSibling && this.parentNode.appendChild(this);
}
function $e3() {
  return this.each(Ae3);
}
function ke3() {
  this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function Ee3() {
  return this.each(ke3);
}
function Se3(t19) {
  var n33 = typeof t19 == "function" ? t19 : Pt3(t19);
  return this.select(function() {
    return this.appendChild(n33.apply(this, arguments));
  });
}
function Ce3() {
  return null;
}
function Te3(t19, n33) {
  var e11 = typeof t19 == "function" ? t19 : Pt3(t19), r24 = n33 == null ? Ce3 : typeof n33 == "function" ? n33 : dt4(n33);
  return this.select(function() {
    return this.insertBefore(e11.apply(this, arguments), r24.apply(this, arguments) || null);
  });
}
function Re3() {
  var t19 = this.parentNode;
  t19 && t19.removeChild(this);
}
function Me3() {
  return this.each(Re3);
}
function Ie3() {
  var t19 = this.cloneNode(false), n33 = this.parentNode;
  return n33 ? n33.insertBefore(t19, this.nextSibling) : t19;
}
function Fe3() {
  var t19 = this.cloneNode(true), n33 = this.parentNode;
  return n33 ? n33.insertBefore(t19, this.nextSibling) : t19;
}
function He3(t19) {
  return this.select(t19 ? Fe3 : Ie3);
}
function qe3(t19) {
  return arguments.length ? this.property("__data__", t19) : this.node().__data__;
}
function Xe3(t19) {
  return function(n33) {
    t19.call(this, n33, this.__data__);
  };
}
function De3(t19) {
  return t19.trim().split(/^|\s+/).map(function(n33) {
    var e11 = "", r24 = n33.indexOf(".");
    return r24 >= 0 && (e11 = n33.slice(r24 + 1), n33 = n33.slice(0, r24)), { type: n33, name: e11 };
  });
}
function Pe3(t19) {
  return function() {
    var n33 = this.__on;
    if (n33) {
      for (var e11 = 0, r24 = -1, i27 = n33.length, o12; e11 < i27; ++e11)
        o12 = n33[e11], (!t19.type || o12.type === t19.type) && o12.name === t19.name ? this.removeEventListener(o12.type, o12.listener, o12.options) : n33[++r24] = o12;
      ++r24 ? n33.length = r24 : delete this.__on;
    }
  };
}
function Oe3(t19, n33, e11) {
  return function() {
    var r24 = this.__on, i27, o12 = Xe3(n33);
    if (r24) {
      for (var s18 = 0, a22 = r24.length; s18 < a22; ++s18)
        if ((i27 = r24[s18]).type === t19.type && i27.name === t19.name) {
          this.removeEventListener(i27.type, i27.listener, i27.options), this.addEventListener(i27.type, i27.listener = o12, i27.options = e11), i27.value = n33;
          return;
        }
    }
    this.addEventListener(t19.type, o12, e11), i27 = { type: t19.type, name: t19.name, value: n33, listener: o12, options: e11 }, r24 ? r24.push(i27) : this.__on = [i27];
  };
}
function Le3(t19, n33, e11) {
  var r24 = De3(t19 + ""), i27, o12 = r24.length, s18;
  if (arguments.length < 2) {
    var a22 = this.node().__on;
    if (a22) {
      for (var u35 = 0, f39 = a22.length, l25; u35 < f39; ++u35)
        for (i27 = 0, l25 = a22[u35]; i27 < o12; ++i27)
          if ((s18 = r24[i27]).type === l25.type && s18.name === l25.name)
            return l25.value;
    }
    return;
  }
  for (a22 = n33 ? Oe3 : Pe3, i27 = 0; i27 < o12; ++i27)
    this.each(a22(r24[i27], n33, e11));
  return this;
}
function Wt3(t19, n33, e11) {
  var r24 = Bt2(t19), i27 = r24.CustomEvent;
  typeof i27 == "function" ? i27 = new i27(n33, e11) : (i27 = r24.document.createEvent("Event"), e11 ? (i27.initEvent(n33, e11.bubbles, e11.cancelable), i27.detail = e11.detail) : i27.initEvent(n33, false, false)), t19.dispatchEvent(i27);
}
function Ve3(t19, n33) {
  return function() {
    return Wt3(this, t19, n33);
  };
}
function Ye3(t19, n33) {
  return function() {
    return Wt3(this, t19, n33.apply(this, arguments));
  };
}
function Be3(t19, n33) {
  return this.each((typeof n33 == "function" ? Ye3 : Ve3)(t19, n33));
}
function* ze3() {
  for (var t19 = this._groups, n33 = 0, e11 = t19.length; n33 < e11; ++n33)
    for (var r24 = t19[n33], i27 = 0, o12 = r24.length, s18; i27 < o12; ++i27)
      (s18 = r24[i27]) && (yield s18);
}
var Jt2 = [null];
function y4(t19, n33) {
  this._groups = t19, this._parents = n33;
}
function L4() {
  return new y4([[document.documentElement]], Jt2);
}
function Ue3() {
  return this;
}
y4.prototype = L4.prototype = {
  constructor: y4,
  select: wn2,
  selectAll: bn2,
  selectChild: kn2,
  selectChildren: Tn2,
  filter: Rn2,
  data: Xn2,
  enter: Mn2,
  exit: Pn2,
  join: On2,
  merge: Ln2,
  selection: Ue3,
  order: Vn2,
  sort: Yn2,
  call: zn2,
  nodes: Un2,
  node: Kn2,
  size: Gn2,
  empty: Wn2,
  each: Jn2,
  attr: re3,
  style: ae3,
  property: ce3,
  classed: _e3,
  text: xe3,
  html: Ne3,
  raise: $e3,
  lower: Ee3,
  append: Se3,
  insert: Te3,
  remove: Me3,
  clone: He3,
  datum: qe3,
  on: Le3,
  dispatch: Be3,
  [Symbol.iterator]: ze3
};
function Ei2(t19) {
  return typeof t19 == "string" ? new y4([[document.querySelector(t19)]], [document.documentElement]) : new y4([[t19]], Jt2);
}
function gt4(t19, n33, e11) {
  t19.prototype = n33.prototype = e11, e11.constructor = t19;
}
function Qt2(t19, n33) {
  var e11 = Object.create(t19.prototype);
  for (var r24 in n33)
    e11[r24] = n33[r24];
  return e11;
}
function V4() {
}
var X3 = 0.7;
var Q4 = 1 / X3;
var C4 = "\\s*([+-]?\\d+)\\s*";
var D4 = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*";
var v6 = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*";
var Ke3 = /^#([0-9a-f]{3,8})$/;
var Ge3 = new RegExp(`^rgb\\(${C4},${C4},${C4}\\)$`);
var We3 = new RegExp(`^rgb\\(${v6},${v6},${v6}\\)$`);
var Je3 = new RegExp(`^rgba\\(${C4},${C4},${C4},${D4}\\)$`);
var Qe3 = new RegExp(`^rgba\\(${v6},${v6},${v6},${D4}\\)$`);
var Ze3 = new RegExp(`^hsl\\(${D4},${v6},${v6}\\)$`);
var je3 = new RegExp(`^hsla\\(${D4},${v6},${v6},${D4}\\)$`);
var At4 = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
gt4(V4, P4, {
  copy(t19) {
    return Object.assign(new this.constructor(), this, t19);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: $t3,
  // Deprecated! Use color.formatHex.
  formatHex: $t3,
  formatHex8: tr2,
  formatHsl: nr2,
  formatRgb: kt3,
  toString: kt3
});
function $t3() {
  return this.rgb().formatHex();
}
function tr2() {
  return this.rgb().formatHex8();
}
function nr2() {
  return Zt2(this).formatHsl();
}
function kt3() {
  return this.rgb().formatRgb();
}
function P4(t19) {
  var n33, e11;
  return t19 = (t19 + "").trim().toLowerCase(), (n33 = Ke3.exec(t19)) ? (e11 = n33[1].length, n33 = parseInt(n33[1], 16), e11 === 6 ? Et4(n33) : e11 === 3 ? new g3(n33 >> 8 & 15 | n33 >> 4 & 240, n33 >> 4 & 15 | n33 & 240, (n33 & 15) << 4 | n33 & 15, 1) : e11 === 8 ? B4(n33 >> 24 & 255, n33 >> 16 & 255, n33 >> 8 & 255, (n33 & 255) / 255) : e11 === 4 ? B4(n33 >> 12 & 15 | n33 >> 8 & 240, n33 >> 8 & 15 | n33 >> 4 & 240, n33 >> 4 & 15 | n33 & 240, ((n33 & 15) << 4 | n33 & 15) / 255) : null) : (n33 = Ge3.exec(t19)) ? new g3(n33[1], n33[2], n33[3], 1) : (n33 = We3.exec(t19)) ? new g3(n33[1] * 255 / 100, n33[2] * 255 / 100, n33[3] * 255 / 100, 1) : (n33 = Je3.exec(t19)) ? B4(n33[1], n33[2], n33[3], n33[4]) : (n33 = Qe3.exec(t19)) ? B4(n33[1] * 255 / 100, n33[2] * 255 / 100, n33[3] * 255 / 100, n33[4]) : (n33 = Ze3.exec(t19)) ? Tt4(n33[1], n33[2] / 100, n33[3] / 100, 1) : (n33 = je3.exec(t19)) ? Tt4(n33[1], n33[2] / 100, n33[3] / 100, n33[4]) : At4.hasOwnProperty(t19) ? Et4(At4[t19]) : t19 === "transparent" ? new g3(NaN, NaN, NaN, 0) : null;
}
function Et4(t19) {
  return new g3(t19 >> 16 & 255, t19 >> 8 & 255, t19 & 255, 1);
}
function B4(t19, n33, e11, r24) {
  return r24 <= 0 && (t19 = n33 = e11 = NaN), new g3(t19, n33, e11, r24);
}
function er2(t19) {
  return t19 instanceof V4 || (t19 = P4(t19)), t19 ? (t19 = t19.rgb(), new g3(t19.r, t19.g, t19.b, t19.opacity)) : new g3();
}
function ut4(t19, n33, e11, r24) {
  return arguments.length === 1 ? er2(t19) : new g3(t19, n33, e11, r24 ?? 1);
}
function g3(t19, n33, e11, r24) {
  this.r = +t19, this.g = +n33, this.b = +e11, this.opacity = +r24;
}
gt4(g3, ut4, Qt2(V4, {
  brighter(t19) {
    return t19 = t19 == null ? Q4 : Math.pow(Q4, t19), new g3(this.r * t19, this.g * t19, this.b * t19, this.opacity);
  },
  darker(t19) {
    return t19 = t19 == null ? X3 : Math.pow(X3, t19), new g3(this.r * t19, this.g * t19, this.b * t19, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new g3(E4(this.r), E4(this.g), E4(this.b), Z4(this.opacity));
  },
  displayable() {
    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: St4,
  // Deprecated! Use color.formatHex.
  formatHex: St4,
  formatHex8: rr2,
  formatRgb: Ct3,
  toString: Ct3
}));
function St4() {
  return `#${k3(this.r)}${k3(this.g)}${k3(this.b)}`;
}
function rr2() {
  return `#${k3(this.r)}${k3(this.g)}${k3(this.b)}${k3((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}
function Ct3() {
  const t19 = Z4(this.opacity);
  return `${t19 === 1 ? "rgb(" : "rgba("}${E4(this.r)}, ${E4(this.g)}, ${E4(this.b)}${t19 === 1 ? ")" : `, ${t19})`}`;
}
function Z4(t19) {
  return isNaN(t19) ? 1 : Math.max(0, Math.min(1, t19));
}
function E4(t19) {
  return Math.max(0, Math.min(255, Math.round(t19) || 0));
}
function k3(t19) {
  return t19 = E4(t19), (t19 < 16 ? "0" : "") + t19.toString(16);
}
function Tt4(t19, n33, e11, r24) {
  return r24 <= 0 ? t19 = n33 = e11 = NaN : e11 <= 0 || e11 >= 1 ? t19 = n33 = NaN : n33 <= 0 && (t19 = NaN), new w4(t19, n33, e11, r24);
}
function Zt2(t19) {
  if (t19 instanceof w4)
    return new w4(t19.h, t19.s, t19.l, t19.opacity);
  if (t19 instanceof V4 || (t19 = P4(t19)), !t19)
    return new w4();
  if (t19 instanceof w4)
    return t19;
  t19 = t19.rgb();
  var n33 = t19.r / 255, e11 = t19.g / 255, r24 = t19.b / 255, i27 = Math.min(n33, e11, r24), o12 = Math.max(n33, e11, r24), s18 = NaN, a22 = o12 - i27, u35 = (o12 + i27) / 2;
  return a22 ? (n33 === o12 ? s18 = (e11 - r24) / a22 + (e11 < r24) * 6 : e11 === o12 ? s18 = (r24 - n33) / a22 + 2 : s18 = (n33 - e11) / a22 + 4, a22 /= u35 < 0.5 ? o12 + i27 : 2 - o12 - i27, s18 *= 60) : a22 = u35 > 0 && u35 < 1 ? 0 : s18, new w4(s18, a22, u35, t19.opacity);
}
function ir2(t19, n33, e11, r24) {
  return arguments.length === 1 ? Zt2(t19) : new w4(t19, n33, e11, r24 ?? 1);
}
function w4(t19, n33, e11, r24) {
  this.h = +t19, this.s = +n33, this.l = +e11, this.opacity = +r24;
}
gt4(w4, ir2, Qt2(V4, {
  brighter(t19) {
    return t19 = t19 == null ? Q4 : Math.pow(Q4, t19), new w4(this.h, this.s, this.l * t19, this.opacity);
  },
  darker(t19) {
    return t19 = t19 == null ? X3 : Math.pow(X3, t19), new w4(this.h, this.s, this.l * t19, this.opacity);
  },
  rgb() {
    var t19 = this.h % 360 + (this.h < 0) * 360, n33 = isNaN(t19) || isNaN(this.s) ? 0 : this.s, e11 = this.l, r24 = e11 + (e11 < 0.5 ? e11 : 1 - e11) * n33, i27 = 2 * e11 - r24;
    return new g3(
      ot5(t19 >= 240 ? t19 - 240 : t19 + 120, i27, r24),
      ot5(t19, i27, r24),
      ot5(t19 < 120 ? t19 + 240 : t19 - 120, i27, r24),
      this.opacity
    );
  },
  clamp() {
    return new w4(Rt3(this.h), z4(this.s), z4(this.l), Z4(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  },
  formatHsl() {
    const t19 = Z4(this.opacity);
    return `${t19 === 1 ? "hsl(" : "hsla("}${Rt3(this.h)}, ${z4(this.s) * 100}%, ${z4(this.l) * 100}%${t19 === 1 ? ")" : `, ${t19})`}`;
  }
}));
function Rt3(t19) {
  return t19 = (t19 || 0) % 360, t19 < 0 ? t19 + 360 : t19;
}
function z4(t19) {
  return Math.max(0, Math.min(1, t19 || 0));
}
function ot5(t19, n33, e11) {
  return (t19 < 60 ? n33 + (e11 - n33) * t19 / 60 : t19 < 180 ? e11 : t19 < 240 ? n33 + (e11 - n33) * (240 - t19) / 60 : n33) * 255;
}
var jt3 = (t19) => () => t19;
function or2(t19, n33) {
  return function(e11) {
    return t19 + e11 * n33;
  };
}
function sr2(t19, n33, e11) {
  return t19 = Math.pow(t19, e11), n33 = Math.pow(n33, e11) - t19, e11 = 1 / e11, function(r24) {
    return Math.pow(t19 + r24 * n33, e11);
  };
}
function ar2(t19) {
  return (t19 = +t19) == 1 ? tn2 : function(n33, e11) {
    return e11 - n33 ? sr2(n33, e11, t19) : jt3(isNaN(n33) ? e11 : n33);
  };
}
function tn2(t19, n33) {
  var e11 = n33 - t19;
  return e11 ? or2(t19, e11) : jt3(isNaN(t19) ? n33 : t19);
}
var Mt5 = function t5(n33) {
  var e11 = ar2(n33);
  function r24(i27, o12) {
    var s18 = e11((i27 = ut4(i27)).r, (o12 = ut4(o12)).r), a22 = e11(i27.g, o12.g), u35 = e11(i27.b, o12.b), f39 = tn2(i27.opacity, o12.opacity);
    return function(l25) {
      return i27.r = s18(l25), i27.g = a22(l25), i27.b = u35(l25), i27.opacity = f39(l25), i27 + "";
    };
  }
  return r24.gamma = t5, r24;
}(1);
function A4(t19, n33) {
  return t19 = +t19, n33 = +n33, function(e11) {
    return t19 * (1 - e11) + n33 * e11;
  };
}
var ft5 = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
var st4 = new RegExp(ft5.source, "g");
function ur2(t19) {
  return function() {
    return t19;
  };
}
function fr2(t19) {
  return function(n33) {
    return t19(n33) + "";
  };
}
function lr2(t19, n33) {
  var e11 = ft5.lastIndex = st4.lastIndex = 0, r24, i27, o12, s18 = -1, a22 = [], u35 = [];
  for (t19 = t19 + "", n33 = n33 + ""; (r24 = ft5.exec(t19)) && (i27 = st4.exec(n33)); )
    (o12 = i27.index) > e11 && (o12 = n33.slice(e11, o12), a22[s18] ? a22[s18] += o12 : a22[++s18] = o12), (r24 = r24[0]) === (i27 = i27[0]) ? a22[s18] ? a22[s18] += i27 : a22[++s18] = i27 : (a22[++s18] = null, u35.push({ i: s18, x: A4(r24, i27) })), e11 = st4.lastIndex;
  return e11 < n33.length && (o12 = n33.slice(e11), a22[s18] ? a22[s18] += o12 : a22[++s18] = o12), a22.length < 2 ? u35[0] ? fr2(u35[0].x) : ur2(n33) : (n33 = u35.length, function(f39) {
    for (var l25 = 0, c27; l25 < n33; ++l25)
      a22[(c27 = u35[l25]).i] = c27.x(f39);
    return a22.join("");
  });
}
var It2 = 180 / Math.PI;
var lt4 = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
function nn2(t19, n33, e11, r24, i27, o12) {
  var s18, a22, u35;
  return (s18 = Math.sqrt(t19 * t19 + n33 * n33)) && (t19 /= s18, n33 /= s18), (u35 = t19 * e11 + n33 * r24) && (e11 -= t19 * u35, r24 -= n33 * u35), (a22 = Math.sqrt(e11 * e11 + r24 * r24)) && (e11 /= a22, r24 /= a22, u35 /= a22), t19 * r24 < n33 * e11 && (t19 = -t19, n33 = -n33, u35 = -u35, s18 = -s18), {
    translateX: i27,
    translateY: o12,
    rotate: Math.atan2(n33, t19) * It2,
    skewX: Math.atan(u35) * It2,
    scaleX: s18,
    scaleY: a22
  };
}
var U4;
function cr2(t19) {
  const n33 = new (typeof DOMMatrix == "function" ? DOMMatrix : WebKitCSSMatrix)(t19 + "");
  return n33.isIdentity ? lt4 : nn2(n33.a, n33.b, n33.c, n33.d, n33.e, n33.f);
}
function hr2(t19) {
  return t19 == null || (U4 || (U4 = document.createElementNS("http://www.w3.org/2000/svg", "g")), U4.setAttribute("transform", t19), !(t19 = U4.transform.baseVal.consolidate())) ? lt4 : (t19 = t19.matrix, nn2(t19.a, t19.b, t19.c, t19.d, t19.e, t19.f));
}
function en2(t19, n33, e11, r24) {
  function i27(f39) {
    return f39.length ? f39.pop() + " " : "";
  }
  function o12(f39, l25, c27, h26, p26, d34) {
    if (f39 !== c27 || l25 !== h26) {
      var _19 = p26.push("translate(", null, n33, null, e11);
      d34.push({ i: _19 - 4, x: A4(f39, c27) }, { i: _19 - 2, x: A4(l25, h26) });
    } else
      (c27 || h26) && p26.push("translate(" + c27 + n33 + h26 + e11);
  }
  function s18(f39, l25, c27, h26) {
    f39 !== l25 ? (f39 - l25 > 180 ? l25 += 360 : l25 - f39 > 180 && (f39 += 360), h26.push({ i: c27.push(i27(c27) + "rotate(", null, r24) - 2, x: A4(f39, l25) })) : l25 && c27.push(i27(c27) + "rotate(" + l25 + r24);
  }
  function a22(f39, l25, c27, h26) {
    f39 !== l25 ? h26.push({ i: c27.push(i27(c27) + "skewX(", null, r24) - 2, x: A4(f39, l25) }) : l25 && c27.push(i27(c27) + "skewX(" + l25 + r24);
  }
  function u35(f39, l25, c27, h26, p26, d34) {
    if (f39 !== c27 || l25 !== h26) {
      var _19 = p26.push(i27(p26) + "scale(", null, ",", null, ")");
      d34.push({ i: _19 - 4, x: A4(f39, c27) }, { i: _19 - 2, x: A4(l25, h26) });
    } else
      (c27 !== 1 || h26 !== 1) && p26.push(i27(p26) + "scale(" + c27 + "," + h26 + ")");
  }
  return function(f39, l25) {
    var c27 = [], h26 = [];
    return f39 = t19(f39), l25 = t19(l25), o12(f39.translateX, f39.translateY, l25.translateX, l25.translateY, c27, h26), s18(f39.rotate, l25.rotate, c27, h26), a22(f39.skewX, l25.skewX, c27, h26), u35(f39.scaleX, f39.scaleY, l25.scaleX, l25.scaleY, c27, h26), f39 = l25 = null, function(p26) {
      for (var d34 = -1, _19 = h26.length, $24; ++d34 < _19; )
        c27[($24 = h26[d34]).i] = $24.x(p26);
      return c27.join("");
    };
  };
}
var pr2 = en2(cr2, "px, ", "px)", "deg)");
var dr2 = en2(hr2, ", ", ")", ")");
var R4 = 0;
var F4 = 0;
var I4 = 0;
var rn2 = 1e3;
var j4;
var H5;
var tt4 = 0;
var S4 = 0;
var rt4 = 0;
var O4 = typeof performance == "object" && performance.now ? performance : Date;
var on2 = typeof window == "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(t19) {
  setTimeout(t19, 17);
};
function yt5() {
  return S4 || (on2(_r2), S4 = O4.now() + rt4);
}
function _r2() {
  S4 = 0;
}
function nt4() {
  this._call = this._time = this._next = null;
}
nt4.prototype = sn2.prototype = {
  constructor: nt4,
  restart: function(t19, n33, e11) {
    if (typeof t19 != "function")
      throw new TypeError("callback is not a function");
    e11 = (e11 == null ? yt5() : +e11) + (n33 == null ? 0 : +n33), !this._next && H5 !== this && (H5 ? H5._next = this : j4 = this, H5 = this), this._call = t19, this._time = e11, ct4();
  },
  stop: function() {
    this._call && (this._call = null, this._time = 1 / 0, ct4());
  }
};
function sn2(t19, n33, e11) {
  var r24 = new nt4();
  return r24.restart(t19, n33, e11), r24;
}
function gr2() {
  yt5(), ++R4;
  for (var t19 = j4, n33; t19; )
    (n33 = S4 - t19._time) >= 0 && t19._call.call(void 0, n33), t19 = t19._next;
  --R4;
}
function Ft2() {
  S4 = (tt4 = O4.now()) + rt4, R4 = F4 = 0;
  try {
    gr2();
  } finally {
    R4 = 0, wr2(), S4 = 0;
  }
}
function yr2() {
  var t19 = O4.now(), n33 = t19 - tt4;
  n33 > rn2 && (rt4 -= n33, tt4 = t19);
}
function wr2() {
  for (var t19, n33 = j4, e11, r24 = 1 / 0; n33; )
    n33._call ? (r24 > n33._time && (r24 = n33._time), t19 = n33, n33 = n33._next) : (e11 = n33._next, n33._next = null, n33 = t19 ? t19._next = e11 : j4 = e11);
  H5 = t19, ct4(r24);
}
function ct4(t19) {
  if (!R4) {
    F4 && (F4 = clearTimeout(F4));
    var n33 = t19 - S4;
    n33 > 24 ? (t19 < 1 / 0 && (F4 = setTimeout(Ft2, t19 - O4.now() - rt4)), I4 && (I4 = clearInterval(I4))) : (I4 || (tt4 = O4.now(), I4 = setInterval(yr2, rn2)), R4 = 1, on2(Ft2));
  }
}
function Ht3(t19, n33, e11) {
  var r24 = new nt4();
  return n33 = n33 == null ? 0 : +n33, r24.restart((i27) => {
    r24.stop(), t19(i27 + n33);
  }, n33, e11), r24;
}
var xr2 = Dt2("start", "end", "cancel", "interrupt");
var vr2 = [];
var an2 = 0;
var qt2 = 1;
var ht4 = 2;
var G4 = 3;
var Xt2 = 4;
var pt4 = 5;
var W4 = 6;
function it5(t19, n33, e11, r24, i27, o12) {
  var s18 = t19.__transition;
  if (!s18)
    t19.__transition = {};
  else if (e11 in s18)
    return;
  mr2(t19, e11, {
    name: n33,
    index: r24,
    // For context during callback.
    group: i27,
    // For context during callback.
    on: xr2,
    tween: vr2,
    time: o12.time,
    delay: o12.delay,
    duration: o12.duration,
    ease: o12.ease,
    timer: null,
    state: an2
  });
}
function wt3(t19, n33) {
  var e11 = x6(t19, n33);
  if (e11.state > an2)
    throw new Error("too late; already scheduled");
  return e11;
}
function m4(t19, n33) {
  var e11 = x6(t19, n33);
  if (e11.state > G4)
    throw new Error("too late; already running");
  return e11;
}
function x6(t19, n33) {
  var e11 = t19.__transition;
  if (!e11 || !(e11 = e11[n33]))
    throw new Error("transition not found");
  return e11;
}
function mr2(t19, n33, e11) {
  var r24 = t19.__transition, i27;
  r24[n33] = e11, e11.timer = sn2(o12, 0, e11.time);
  function o12(f39) {
    e11.state = qt2, e11.timer.restart(s18, e11.delay, e11.time), e11.delay <= f39 && s18(f39 - e11.delay);
  }
  function s18(f39) {
    var l25, c27, h26, p26;
    if (e11.state !== qt2)
      return u35();
    for (l25 in r24)
      if (p26 = r24[l25], p26.name === e11.name) {
        if (p26.state === G4)
          return Ht3(s18);
        p26.state === Xt2 ? (p26.state = W4, p26.timer.stop(), p26.on.call("interrupt", t19, t19.__data__, p26.index, p26.group), delete r24[l25]) : +l25 < n33 && (p26.state = W4, p26.timer.stop(), p26.on.call("cancel", t19, t19.__data__, p26.index, p26.group), delete r24[l25]);
      }
    if (Ht3(function() {
      e11.state === G4 && (e11.state = Xt2, e11.timer.restart(a22, e11.delay, e11.time), a22(f39));
    }), e11.state = ht4, e11.on.call("start", t19, t19.__data__, e11.index, e11.group), e11.state === ht4) {
      for (e11.state = G4, i27 = new Array(h26 = e11.tween.length), l25 = 0, c27 = -1; l25 < h26; ++l25)
        (p26 = e11.tween[l25].value.call(t19, t19.__data__, e11.index, e11.group)) && (i27[++c27] = p26);
      i27.length = c27 + 1;
    }
  }
  function a22(f39) {
    for (var l25 = f39 < e11.duration ? e11.ease.call(null, f39 / e11.duration) : (e11.timer.restart(u35), e11.state = pt4, 1), c27 = -1, h26 = i27.length; ++c27 < h26; )
      i27[c27].call(t19, l25);
    e11.state === pt4 && (e11.on.call("end", t19, t19.__data__, e11.index, e11.group), u35());
  }
  function u35() {
    e11.state = W4, e11.timer.stop(), delete r24[n33];
    for (var f39 in r24)
      return;
    delete t19.__transition;
  }
}
function br2(t19, n33) {
  var e11 = t19.__transition, r24, i27, o12 = true, s18;
  if (e11) {
    n33 = n33 == null ? null : n33 + "";
    for (s18 in e11) {
      if ((r24 = e11[s18]).name !== n33) {
        o12 = false;
        continue;
      }
      i27 = r24.state > ht4 && r24.state < pt4, r24.state = W4, r24.timer.stop(), r24.on.call(i27 ? "interrupt" : "cancel", t19, t19.__data__, r24.index, r24.group), delete e11[s18];
    }
    o12 && delete t19.__transition;
  }
}
function Nr2(t19) {
  return this.each(function() {
    br2(this, t19);
  });
}
function Ar2(t19, n33) {
  var e11, r24;
  return function() {
    var i27 = m4(this, t19), o12 = i27.tween;
    if (o12 !== e11) {
      r24 = e11 = o12;
      for (var s18 = 0, a22 = r24.length; s18 < a22; ++s18)
        if (r24[s18].name === n33) {
          r24 = r24.slice(), r24.splice(s18, 1);
          break;
        }
    }
    i27.tween = r24;
  };
}
function $r2(t19, n33, e11) {
  var r24, i27;
  if (typeof e11 != "function")
    throw new Error();
  return function() {
    var o12 = m4(this, t19), s18 = o12.tween;
    if (s18 !== r24) {
      i27 = (r24 = s18).slice();
      for (var a22 = { name: n33, value: e11 }, u35 = 0, f39 = i27.length; u35 < f39; ++u35)
        if (i27[u35].name === n33) {
          i27[u35] = a22;
          break;
        }
      u35 === f39 && i27.push(a22);
    }
    o12.tween = i27;
  };
}
function kr2(t19, n33) {
  var e11 = this._id;
  if (t19 += "", arguments.length < 2) {
    for (var r24 = x6(this.node(), e11).tween, i27 = 0, o12 = r24.length, s18; i27 < o12; ++i27)
      if ((s18 = r24[i27]).name === t19)
        return s18.value;
    return null;
  }
  return this.each((n33 == null ? Ar2 : $r2)(e11, t19, n33));
}
function xt4(t19, n33, e11) {
  var r24 = t19._id;
  return t19.each(function() {
    var i27 = m4(this, r24);
    (i27.value || (i27.value = {}))[n33] = e11.apply(this, arguments);
  }), function(i27) {
    return x6(i27, r24).value[n33];
  };
}
function un2(t19, n33) {
  var e11;
  return (typeof n33 == "number" ? A4 : n33 instanceof P4 ? Mt5 : (e11 = P4(n33)) ? (n33 = e11, Mt5) : lr2)(t19, n33);
}
function Er2(t19) {
  return function() {
    this.removeAttribute(t19);
  };
}
function Sr2(t19) {
  return function() {
    this.removeAttributeNS(t19.space, t19.local);
  };
}
function Cr2(t19, n33, e11) {
  var r24, i27 = e11 + "", o12;
  return function() {
    var s18 = this.getAttribute(t19);
    return s18 === i27 ? null : s18 === r24 ? o12 : o12 = n33(r24 = s18, e11);
  };
}
function Tr2(t19, n33, e11) {
  var r24, i27 = e11 + "", o12;
  return function() {
    var s18 = this.getAttributeNS(t19.space, t19.local);
    return s18 === i27 ? null : s18 === r24 ? o12 : o12 = n33(r24 = s18, e11);
  };
}
function Rr2(t19, n33, e11) {
  var r24, i27, o12;
  return function() {
    var s18, a22 = e11(this), u35;
    return a22 == null ? void this.removeAttribute(t19) : (s18 = this.getAttribute(t19), u35 = a22 + "", s18 === u35 ? null : s18 === r24 && u35 === i27 ? o12 : (i27 = u35, o12 = n33(r24 = s18, a22)));
  };
}
function Mr2(t19, n33, e11) {
  var r24, i27, o12;
  return function() {
    var s18, a22 = e11(this), u35;
    return a22 == null ? void this.removeAttributeNS(t19.space, t19.local) : (s18 = this.getAttributeNS(t19.space, t19.local), u35 = a22 + "", s18 === u35 ? null : s18 === r24 && u35 === i27 ? o12 : (i27 = u35, o12 = n33(r24 = s18, a22)));
  };
}
function Ir2(t19, n33) {
  var e11 = et4(t19), r24 = e11 === "transform" ? dr2 : un2;
  return this.attrTween(t19, typeof n33 == "function" ? (e11.local ? Mr2 : Rr2)(e11, r24, xt4(this, "attr." + t19, n33)) : n33 == null ? (e11.local ? Sr2 : Er2)(e11) : (e11.local ? Tr2 : Cr2)(e11, r24, n33));
}
function Fr2(t19, n33) {
  return function(e11) {
    this.setAttribute(t19, n33.call(this, e11));
  };
}
function Hr2(t19, n33) {
  return function(e11) {
    this.setAttributeNS(t19.space, t19.local, n33.call(this, e11));
  };
}
function qr2(t19, n33) {
  var e11, r24;
  function i27() {
    var o12 = n33.apply(this, arguments);
    return o12 !== r24 && (e11 = (r24 = o12) && Hr2(t19, o12)), e11;
  }
  return i27._value = n33, i27;
}
function Xr2(t19, n33) {
  var e11, r24;
  function i27() {
    var o12 = n33.apply(this, arguments);
    return o12 !== r24 && (e11 = (r24 = o12) && Fr2(t19, o12)), e11;
  }
  return i27._value = n33, i27;
}
function Dr2(t19, n33) {
  var e11 = "attr." + t19;
  if (arguments.length < 2)
    return (e11 = this.tween(e11)) && e11._value;
  if (n33 == null)
    return this.tween(e11, null);
  if (typeof n33 != "function")
    throw new Error();
  var r24 = et4(t19);
  return this.tween(e11, (r24.local ? qr2 : Xr2)(r24, n33));
}
function Pr2(t19, n33) {
  return function() {
    wt3(this, t19).delay = +n33.apply(this, arguments);
  };
}
function Or2(t19, n33) {
  return n33 = +n33, function() {
    wt3(this, t19).delay = n33;
  };
}
function Lr2(t19) {
  var n33 = this._id;
  return arguments.length ? this.each((typeof t19 == "function" ? Pr2 : Or2)(n33, t19)) : x6(this.node(), n33).delay;
}
function Vr2(t19, n33) {
  return function() {
    m4(this, t19).duration = +n33.apply(this, arguments);
  };
}
function Yr2(t19, n33) {
  return n33 = +n33, function() {
    m4(this, t19).duration = n33;
  };
}
function Br2(t19) {
  var n33 = this._id;
  return arguments.length ? this.each((typeof t19 == "function" ? Vr2 : Yr2)(n33, t19)) : x6(this.node(), n33).duration;
}
function zr2(t19, n33) {
  if (typeof n33 != "function")
    throw new Error();
  return function() {
    m4(this, t19).ease = n33;
  };
}
function Ur2(t19) {
  var n33 = this._id;
  return arguments.length ? this.each(zr2(n33, t19)) : x6(this.node(), n33).ease;
}
function Kr2(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    if (typeof e11 != "function")
      throw new Error();
    m4(this, t19).ease = e11;
  };
}
function Gr2(t19) {
  if (typeof t19 != "function")
    throw new Error();
  return this.each(Kr2(this._id, t19));
}
function Wr2(t19) {
  typeof t19 != "function" && (t19 = Lt2(t19));
  for (var n33 = this._groups, e11 = n33.length, r24 = new Array(e11), i27 = 0; i27 < e11; ++i27)
    for (var o12 = n33[i27], s18 = o12.length, a22 = r24[i27] = [], u35, f39 = 0; f39 < s18; ++f39)
      (u35 = o12[f39]) && t19.call(u35, u35.__data__, f39, o12) && a22.push(u35);
  return new N3(r24, this._parents, this._name, this._id);
}
function Jr2(t19) {
  if (t19._id !== this._id)
    throw new Error();
  for (var n33 = this._groups, e11 = t19._groups, r24 = n33.length, i27 = e11.length, o12 = Math.min(r24, i27), s18 = new Array(r24), a22 = 0; a22 < o12; ++a22)
    for (var u35 = n33[a22], f39 = e11[a22], l25 = u35.length, c27 = s18[a22] = new Array(l25), h26, p26 = 0; p26 < l25; ++p26)
      (h26 = u35[p26] || f39[p26]) && (c27[p26] = h26);
  for (; a22 < r24; ++a22)
    s18[a22] = n33[a22];
  return new N3(s18, this._parents, this._name, this._id);
}
function Qr2(t19) {
  return (t19 + "").trim().split(/^|\s+/).every(function(n33) {
    var e11 = n33.indexOf(".");
    return e11 >= 0 && (n33 = n33.slice(0, e11)), !n33 || n33 === "start";
  });
}
function Zr2(t19, n33, e11) {
  var r24, i27, o12 = Qr2(n33) ? wt3 : m4;
  return function() {
    var s18 = o12(this, t19), a22 = s18.on;
    a22 !== r24 && (i27 = (r24 = a22).copy()).on(n33, e11), s18.on = i27;
  };
}
function jr2(t19, n33) {
  var e11 = this._id;
  return arguments.length < 2 ? x6(this.node(), e11).on.on(t19) : this.each(Zr2(e11, t19, n33));
}
function ti2(t19) {
  return function() {
    var n33 = this.parentNode;
    for (var e11 in this.__transition)
      if (+e11 !== t19)
        return;
    n33 && n33.removeChild(this);
  };
}
function ni2() {
  return this.on("end.remove", ti2(this._id));
}
function ei2(t19) {
  var n33 = this._name, e11 = this._id;
  typeof t19 != "function" && (t19 = dt4(t19));
  for (var r24 = this._groups, i27 = r24.length, o12 = new Array(i27), s18 = 0; s18 < i27; ++s18)
    for (var a22 = r24[s18], u35 = a22.length, f39 = o12[s18] = new Array(u35), l25, c27, h26 = 0; h26 < u35; ++h26)
      (l25 = a22[h26]) && (c27 = t19.call(l25, l25.__data__, h26, a22)) && ("__data__" in l25 && (c27.__data__ = l25.__data__), f39[h26] = c27, it5(f39[h26], n33, e11, h26, f39, x6(l25, e11)));
  return new N3(o12, this._parents, n33, e11);
}
function ri2(t19) {
  var n33 = this._name, e11 = this._id;
  typeof t19 != "function" && (t19 = Ot5(t19));
  for (var r24 = this._groups, i27 = r24.length, o12 = [], s18 = [], a22 = 0; a22 < i27; ++a22)
    for (var u35 = r24[a22], f39 = u35.length, l25, c27 = 0; c27 < f39; ++c27)
      if (l25 = u35[c27]) {
        for (var h26 = t19.call(l25, l25.__data__, c27, u35), p26, d34 = x6(l25, e11), _19 = 0, $24 = h26.length; _19 < $24; ++_19)
          (p26 = h26[_19]) && it5(p26, n33, e11, _19, h26, d34);
        o12.push(h26), s18.push(l25);
      }
  return new N3(o12, s18, n33, e11);
}
var ii2 = L4.prototype.constructor;
function oi2() {
  return new ii2(this._groups, this._parents);
}
function si2(t19, n33) {
  var e11, r24, i27;
  return function() {
    var o12 = T5(this, t19), s18 = (this.style.removeProperty(t19), T5(this, t19));
    return o12 === s18 ? null : o12 === e11 && s18 === r24 ? i27 : i27 = n33(e11 = o12, r24 = s18);
  };
}
function fn2(t19) {
  return function() {
    this.style.removeProperty(t19);
  };
}
function ai2(t19, n33, e11) {
  var r24, i27 = e11 + "", o12;
  return function() {
    var s18 = T5(this, t19);
    return s18 === i27 ? null : s18 === r24 ? o12 : o12 = n33(r24 = s18, e11);
  };
}
function ui2(t19, n33, e11) {
  var r24, i27, o12;
  return function() {
    var s18 = T5(this, t19), a22 = e11(this), u35 = a22 + "";
    return a22 == null && (u35 = a22 = (this.style.removeProperty(t19), T5(this, t19))), s18 === u35 ? null : s18 === r24 && u35 === i27 ? o12 : (i27 = u35, o12 = n33(r24 = s18, a22));
  };
}
function fi2(t19, n33) {
  var e11, r24, i27, o12 = "style." + n33, s18 = "end." + o12, a22;
  return function() {
    var u35 = m4(this, t19), f39 = u35.on, l25 = u35.value[o12] == null ? a22 || (a22 = fn2(n33)) : void 0;
    (f39 !== e11 || i27 !== l25) && (r24 = (e11 = f39).copy()).on(s18, i27 = l25), u35.on = r24;
  };
}
function li2(t19, n33, e11) {
  var r24 = (t19 += "") == "transform" ? pr2 : un2;
  return n33 == null ? this.styleTween(t19, si2(t19, r24)).on("end.style." + t19, fn2(t19)) : typeof n33 == "function" ? this.styleTween(t19, ui2(t19, r24, xt4(this, "style." + t19, n33))).each(fi2(this._id, t19)) : this.styleTween(t19, ai2(t19, r24, n33), e11).on("end.style." + t19, null);
}
function ci2(t19, n33, e11) {
  return function(r24) {
    this.style.setProperty(t19, n33.call(this, r24), e11);
  };
}
function hi2(t19, n33, e11) {
  var r24, i27;
  function o12() {
    var s18 = n33.apply(this, arguments);
    return s18 !== i27 && (r24 = (i27 = s18) && ci2(t19, s18, e11)), r24;
  }
  return o12._value = n33, o12;
}
function pi2(t19, n33, e11) {
  var r24 = "style." + (t19 += "");
  if (arguments.length < 2)
    return (r24 = this.tween(r24)) && r24._value;
  if (n33 == null)
    return this.tween(r24, null);
  if (typeof n33 != "function")
    throw new Error();
  return this.tween(r24, hi2(t19, n33, e11 ?? ""));
}
function di2(t19) {
  return function() {
    this.textContent = t19;
  };
}
function _i2(t19) {
  return function() {
    var n33 = t19(this);
    this.textContent = n33 ?? "";
  };
}
function gi2(t19) {
  return this.tween("text", typeof t19 == "function" ? _i2(xt4(this, "text", t19)) : di2(t19 == null ? "" : t19 + ""));
}
function yi2(t19) {
  return function(n33) {
    this.textContent = t19.call(this, n33);
  };
}
function wi2(t19) {
  var n33, e11;
  function r24() {
    var i27 = t19.apply(this, arguments);
    return i27 !== e11 && (n33 = (e11 = i27) && yi2(i27)), n33;
  }
  return r24._value = t19, r24;
}
function xi2(t19) {
  var n33 = "text";
  if (arguments.length < 1)
    return (n33 = this.tween(n33)) && n33._value;
  if (t19 == null)
    return this.tween(n33, null);
  if (typeof t19 != "function")
    throw new Error();
  return this.tween(n33, wi2(t19));
}
function vi2() {
  for (var t19 = this._name, n33 = this._id, e11 = ln2(), r24 = this._groups, i27 = r24.length, o12 = 0; o12 < i27; ++o12)
    for (var s18 = r24[o12], a22 = s18.length, u35, f39 = 0; f39 < a22; ++f39)
      if (u35 = s18[f39]) {
        var l25 = x6(u35, n33);
        it5(u35, t19, e11, f39, s18, {
          time: l25.time + l25.delay + l25.duration,
          delay: 0,
          duration: l25.duration,
          ease: l25.ease
        });
      }
  return new N3(r24, this._parents, t19, e11);
}
function mi2() {
  var t19, n33, e11 = this, r24 = e11._id, i27 = e11.size();
  return new Promise(function(o12, s18) {
    var a22 = { value: s18 }, u35 = { value: function() {
      --i27 === 0 && o12();
    } };
    e11.each(function() {
      var f39 = m4(this, r24), l25 = f39.on;
      l25 !== t19 && (n33 = (t19 = l25).copy(), n33._.cancel.push(a22), n33._.interrupt.push(a22), n33._.end.push(u35)), f39.on = n33;
    }), i27 === 0 && o12();
  });
}
var bi2 = 0;
function N3(t19, n33, e11, r24) {
  this._groups = t19, this._parents = n33, this._name = e11, this._id = r24;
}
function ln2() {
  return ++bi2;
}
var b6 = L4.prototype;
N3.prototype = {
  constructor: N3,
  select: ei2,
  selectAll: ri2,
  selectChild: b6.selectChild,
  selectChildren: b6.selectChildren,
  filter: Wr2,
  merge: Jr2,
  selection: oi2,
  transition: vi2,
  call: b6.call,
  nodes: b6.nodes,
  node: b6.node,
  size: b6.size,
  empty: b6.empty,
  each: b6.each,
  on: jr2,
  attr: Ir2,
  attrTween: Dr2,
  style: li2,
  styleTween: pi2,
  text: gi2,
  textTween: xi2,
  remove: ni2,
  tween: kr2,
  delay: Lr2,
  duration: Br2,
  ease: Ur2,
  easeVarying: Gr2,
  end: mi2,
  [Symbol.iterator]: b6[Symbol.iterator]
};
function Ni2(t19) {
  return ((t19 *= 2) <= 1 ? t19 * t19 * t19 : (t19 -= 2) * t19 * t19 + 2) / 2;
}
var Ai2 = {
  time: null,
  // Set on use.
  delay: 0,
  duration: 250,
  ease: Ni2
};
function $i2(t19, n33) {
  for (var e11; !(e11 = t19.__transition) || !(e11 = e11[n33]); )
    if (!(t19 = t19.parentNode))
      throw new Error(`transition ${n33} not found`);
  return e11;
}
function ki2(t19) {
  var n33, e11;
  t19 instanceof N3 ? (n33 = t19._id, t19 = t19._name) : (n33 = ln2(), (e11 = Ai2).time = yt5(), t19 = t19 == null ? null : t19 + "");
  for (var r24 = this._groups, i27 = r24.length, o12 = 0; o12 < i27; ++o12)
    for (var s18 = r24[o12], a22 = s18.length, u35, f39 = 0; f39 < a22; ++f39)
      (u35 = s18[f39]) && it5(u35, t19, n33, f39, s18, e11 || $i2(u35, n33));
  return new N3(r24, this._parents, t19, n33);
}
L4.prototype.interrupt = Nr2;
L4.prototype.transition = ki2;
function q4(t19, n33, e11) {
  this.k = t19, this.x = n33, this.y = e11;
}
q4.prototype = {
  constructor: q4,
  scale: function(t19) {
    return t19 === 1 ? this : new q4(this.k * t19, this.x, this.y);
  },
  translate: function(t19, n33) {
    return t19 === 0 & n33 === 0 ? this : new q4(this.k, this.x + this.k * t19, this.y + this.k * n33);
  },
  apply: function(t19) {
    return [t19[0] * this.k + this.x, t19[1] * this.k + this.y];
  },
  applyX: function(t19) {
    return t19 * this.k + this.x;
  },
  applyY: function(t19) {
    return t19 * this.k + this.y;
  },
  invert: function(t19) {
    return [(t19[0] - this.x) / this.k, (t19[1] - this.y) / this.k];
  },
  invertX: function(t19) {
    return (t19 - this.x) / this.k;
  },
  invertY: function(t19) {
    return (t19 - this.y) / this.k;
  },
  rescaleX: function(t19) {
    return t19.copy().domain(t19.range().map(this.invertX, this).map(t19.invert, t19));
  },
  rescaleY: function(t19) {
    return t19.copy().domain(t19.range().map(this.invertY, this).map(t19.invert, t19));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};
q4.prototype;

// node_modules/@frc-web-components/fwc/dist/components/axis.es.js
var N4 = Object.defineProperty;
var a5 = (u35, o12, p26, t19) => {
  for (var n33 = void 0, s18 = u35.length - 1, l25; s18 >= 0; s18--)
    (l25 = u35[s18]) && (n33 = l25(o12, p26, n33) || n33);
  return n33 && N4(o12, p26, n33), n33;
};
var O5 = {
  dashboard: {
    topLevel: false,
    displayName: "Axis"
  },
  properties: {
    vertical: { type: "Boolean" },
    ticks: { type: "Number", defaultValue: 5 },
    min: { type: "Number", defaultValue: -1 },
    max: { type: "Number", defaultValue: 1 },
    unit: { type: "String" }
  }
};
var f5 = class f6 extends H {
  constructor() {
    super(...arguments), this.vertical = false, this.ticks = 5, this.min = -1, this.max = 1, this.unit = "", this.prevSize = 0, this.prevTicks = 0, this.prevMin = null, this.prevMax = null;
  }
  setAxis(o12) {
    var y33;
    const p26 = this.vertical ? this.clientHeight : this.clientWidth, t19 = p26 / Math.max(1, this.ticks - 1), n33 = 30, { min: s18, max: l25 } = this;
    let x34 = -1 / 0, d34 = -1 / 0;
    if (this.prevSize === p26 && this.prevTicks === this.ticks && this.prevMin === s18 && this.prevMax === l25 && !o12.has("unit") && !o12.has("vertical"))
      return;
    this.prevSize = p26, this.prevTicks = this.ticks, this.prevMin = s18, this.prevMax = l25, this.svg.innerHTML = "";
    const h26 = Ei2(this.svg).attr("width", this.vertical ? n33 : p26).attr("height", this.vertical ? p26 : n33);
    for (let e11 = 0; e11 < this.ticks; e11 += 1) {
      if (this.vertical ? h26.append("line").attr("x1", 0).attr("y1", e11 * t19).attr("x2", 8).attr("y2", e11 * t19) : h26.append("line").attr("x1", e11 * t19).attr("y1", 0).attr("x2", e11 * t19).attr("y2", 8), this.vertical) {
        const r24 = s18 + e11 * (l25 - s18) / Math.max(this.ticks - 1, 1);
        h26.append("text").attr("x", -3).attr("y", e11 * t19 + 4).attr("text-anchor", "end").text(r24.toFixed(2) + (this.unit ? ` ${this.unit}` : ""));
      } else {
        const r24 = (e11 - x34) * t19, m33 = x34 * t19 + r24 * 0.4;
        if (d34 < 0 || m33 > d34) {
          const g31 = s18 + e11 * (l25 - s18) / Math.max(this.ticks - 1, 1), k27 = h26.append("text").attr("x", e11 * t19).attr("y", 25).attr("text-anchor", "middle").text(g31.toFixed(2) + (this.unit ? ` ${this.unit}` : ""));
          d34 = e11 * t19 + (((y33 = k27.node()) == null ? void 0 : y33.getBBox().width) ?? 0) / 2, x34 = e11;
        }
      }
      if (e11 < this.ticks - 1)
        for (let r24 = 1; r24 < 4; r24 += 1)
          this.vertical ? h26.append("line").attr("x1", 4).attr("y1", e11 * t19 + r24 * t19 / 4).attr("x2", 8).attr("y2", e11 * t19 + r24 * t19 / 4) : h26.append("line").attr("x1", e11 * t19 + r24 * t19 / 4).attr("y1", 0).attr("x2", e11 * t19 + r24 * t19 / 4).attr("y2", 4);
    }
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.requestUpdate();
    }).observe(this);
  }
  updated(o12) {
    this.setAxis(o12);
  }
  render() {
    return Ot` <svg id="svg"></svg> `;
  }
};
f5.styles = Ut`
    :host {
      display: inline-block;
      position: relative;
    }

    :host([vertical]) {
      height: 100%;
    }

    :host(:not([vertical])) {
      width: 100%;
    }

    svg {
      overflow: visible;
      position: absolute;
      top: 0;
      left: 0;
    }

    line {
      stroke: rgb(150, 150, 150);
      stroke-width: 2;
    }

    text {
      font-weight: normal;
      font-size: 13px;
      fill: var(--frc-axis-text-color, #000);
    }
  `;
var i6 = f5;
a5([
  Mt({ type: Boolean })
], i6.prototype, "vertical");
a5([
  Mt({ type: Number })
], i6.prototype, "ticks");
a5([
  Mt({ type: Number })
], i6.prototype, "min");
a5([
  Mt({ type: Number })
], i6.prototype, "max");
a5([
  Mt({ type: String })
], i6.prototype, "unit");
a5([
  n()
], i6.prototype, "prevSize");
a5([
  n()
], i6.prototype, "prevTicks");
a5([
  n()
], i6.prototype, "prevMin");
a5([
  n()
], i6.prototype, "prevMax");
a5([
  h("#svg")
], i6.prototype, "svg");
customElements.get("frc-axis") || customElements.define("frc-axis", i6);

// node_modules/@frc-web-components/fwc/dist/components/bar.es.js
var y5 = Object.defineProperty;
var v7 = Object.getOwnPropertyDescriptor;
var n8 = (d34, t19, e11, o12) => {
  for (var s18 = o12 > 1 ? void 0 : o12 ? v7(t19, e11) : t19, r24 = d34.length - 1, i27; r24 >= 0; r24--)
    (i27 = d34[r24]) && (s18 = (o12 ? i27(t19, e11, s18) : i27(s18)) || s18);
  return o12 && s18 && y5(t19, e11, s18), s18;
};
var _3 = {
  dashboard: {
    topLevel: false,
    displayName: "Bar"
  },
  properties: {
    value: { type: "Number" },
    min: { type: "Number", defaultValue: -1 },
    max: { type: "Number", defaultValue: 1 },
    center: { type: "Number" }
  }
};
function g4(d34, t19, e11) {
  return Math.min(e11, Math.max(d34, t19));
}
var l4 = class l5 extends H {
  constructor() {
    super(...arguments), this._min = -1, this._max = 1, this.value = 0, this.center = 0, this.dragging = false;
  }
  get min() {
    return Math.min(this._min, this._max);
  }
  set min(t19) {
    const e11 = this._min;
    this._min = t19, this.requestUpdate("min", e11);
  }
  get max() {
    return Math.max(this._min, this._max);
  }
  set max(t19) {
    const e11 = this._max;
    this._max = t19, this.requestUpdate("max", e11);
  }
  updateForeground() {
    const { min: t19, max: e11, center: o12, value: s18, foreground: r24 } = this, i27 = g4(s18, t19, e11);
    e11 < o12 ? (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - e11) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-left", "auto"), r24.style.setProperty("--foreground-right", "0")) : t19 > o12 ? (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - t19) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-left", "0"), r24.style.setProperty("--foreground-right", "auto")) : i27 > o12 ? (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - o12) / (e11 - t19) * 100}%`
    ), r24.style.setProperty(
      "--foreground-left",
      `${Math.abs(t19 - o12) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-right", "auto")) : (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - o12) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-left", "auto"), r24.style.setProperty(
      "--foreground-right",
      `${Math.abs(e11 - o12) / (e11 - t19) * 100}%`
    ));
  }
  resized() {
    this.updateForeground();
  }
  updated() {
    this.updateForeground();
  }
  setDragPosition(t19) {
    const { left: e11, width: o12 } = this.getBoundingClientRect(), s18 = t19.clientX - e11, r24 = g4(s18 / o12, 0, 1), i27 = this.min + (this.max - this.min) * r24, p26 = new CustomEvent("barDrag", {
      bubbles: true,
      composed: true,
      detail: { value: i27 }
    });
    this.dispatchEvent(p26);
  }
  firstUpdated() {
    this.setAttribute("draggable", "false"), window.addEventListener("mousemove", (t19) => {
      this.dragging && this.setDragPosition(t19);
    }), window.addEventListener("mouseup", () => {
      this.dragging = false;
    });
  }
  onMouseDown(t19) {
    this.dragging = true, this.setDragPosition(t19);
  }
  render() {
    return Ot`
      <div part="foreground" draggble="false"></div>
      <div class="content" draggable="false">
        <slot></slot>
      </div>
      <div part="dragger" @mousedown="${this.onMouseDown}"></div>
    `;
  }
};
l4.styles = Ut`
    :host {
      display: inline-block;
      position: relative;
      width: 300px;
      height: 20px;
      background: var(--frc-bar-background, #ddd);
      color: var(--frc-bar-color, black);
      font-size: 15px;
      line-height: 18px;
      text-align: center;
    }

    [part='dragger'] {
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    }

    [part='foreground'] {
      position: absolute;
      top: 0;
      height: 100%;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
      width: var(--foreground-width);
      left: var(--foreground-left);
      right: var(--foreground-right);
      pointer-events: none;
    }

    .content {
      position: relative;
    }
  `;
var a6 = l4;
n8([
  Mt({ type: Number })
], a6.prototype, "value", 2);
n8([
  Mt({ type: Number })
], a6.prototype, "center", 2);
n8([
  n()
], a6.prototype, "dragging", 2);
n8([
  Mt({ type: Number })
], a6.prototype, "min", 1);
n8([
  Mt({ type: Number })
], a6.prototype, "max", 1);
n8([
  h("[part=foreground]")
], a6.prototype, "foreground", 2);
customElements.get("frc-bar") || customElements.define("frc-bar", a6);

// node_modules/@frc-web-components/fwc/dist/components/drivebases.es.js
function C5(i27) {
  return i27 * 180 / Math.PI;
}
function tt5(i27, t19, e11, o12) {
  return `<line x1="${i27}" y1="${t19}" x2="${e11}" y2="${o12}" />`;
}
function G5(i27, t19, e11) {
  return `<polygon 
            points="${i27.x},${i27.y} ${t19.x},${t19.y} ${e11.x},${e11.y}" />`;
}
function j5(i27, t19, e11, o12) {
  const r24 = o12 * Math.PI / 180;
  return {
    x: i27 + e11 * Math.cos(r24),
    y: t19 - e11 * Math.sin(r24)
  };
}
function et5(i27, t19, e11, o12, r24) {
  const s18 = j5(i27, t19, e11, r24), n33 = j5(i27, t19, e11, o12), a22 = r24 - o12 <= 180 ? "0" : "1", d34 = r24 > o12 ? 1 : 0;
  return [
    "M",
    s18.x,
    s18.y,
    "A",
    e11,
    e11,
    0,
    a22,
    d34,
    n33.x,
    n33.y
  ].join(" ");
}
function rt5(i27, t19, e11, o12, r24) {
  return `<path d="${et5(i27, t19, e11, o12, r24)}"/>`;
}
function ot6(i27, t19, e11, o12) {
  const r24 = t19 / 2, s18 = Math.cos(i27), n33 = Math.sin(i27), a22 = Math.cos(i27 + Math.PI / 2) * r24, d34 = Math.sin(i27 + Math.PI / 2) * r24, c27 = {
    x: s18 * o12 - a22 + e11,
    y: n33 * o12 - d34
  }, h26 = {
    x: s18 * o12 + a22 + e11,
    y: n33 * o12 + d34
  }, l25 = {
    x: s18 * (t19 + o12) + e11,
    y: n33 * (t19 + o12)
  };
  return G5(c27, h26, l25);
}
function q5(i27, t19, e11, o12) {
  const r24 = Math.cos(t19) * i27, s18 = Math.sin(t19) * i27, n33 = tt5(e11, 0, r24 + e11, s18), a22 = ot6(t19, o12, e11, i27);
  return n33 + a22;
}
function it6(i27, t19, e11, o12) {
  const r24 = e11 / t19, s18 = C5(r24);
  return rt5(
    o12,
    0,
    t19,
    C5(i27),
    C5(i27) - s18
  );
}
function st5(i27, t19, e11, o12, r24) {
  const s18 = t19 / 2, n33 = r24 / e11 - i27, a22 = Math.sqrt(t19 * t19 + e11 * e11), d34 = (r24 + t19 * Math.sign(r24)) / e11 - i27, c27 = Math.cos(n33), h26 = Math.sin(n33), l25 = {
    x: (e11 + s18) * c27 + o12,
    y: (e11 + s18) * h26
  }, g31 = {
    x: (e11 - s18) * c27 + o12,
    y: (e11 - s18) * h26
  }, v30 = {
    x: a22 * Math.cos(d34) + o12,
    y: a22 * Math.sin(d34)
  };
  return G5(l25, v30, g31);
}
function X4(i27, t19, e11, o12, r24) {
  if (t19 < 0)
    throw new Error(`Radius cannot be negative. Given: ${t19}`);
  return t19 === 1 / 0 ? q5(e11, i27, o12, r24) : it6(i27, t19, e11, o12) + st5(i27, r24, t19, o12, e11);
}
function V5(i27, t19, e11, o12, r24) {
  return X4(i27, t19, t19 * e11, o12, r24);
}
var nt5 = Object.defineProperty;
var J5 = (i27, t19, e11, o12) => {
  for (var r24 = void 0, s18 = i27.length - 1, n33; s18 >= 0; s18--)
    (n33 = i27[s18]) && (r24 = n33(t19, e11, r24) || r24);
  return r24 && nt5(t19, e11, r24), r24;
};
var bt5 = {
  dashboard: {
    displayName: "Differential Drivebase"
  },
  properties: {
    leftMotorSpeed: { type: "Number", attribute: "left-motor-speed" },
    rightMotorSpeed: { type: "Number", attribute: "right-motor-speed" }
  }
};
function I5(i27, t19, e11) {
  return Math.min(e11, Math.max(i27, t19));
}
function at4(i27, t19, e11, o12, r24) {
  return (i27 - t19) * (r24 - o12) / (e11 - t19) + o12;
}
function dt5(i27) {
  const t19 = i27 / 2, e11 = `
    <line 
      x1="${-t19}"
      y1="${-t19}"
      x2="${t19}"
      y2="${t19}"
    />
  `, o12 = `
    <line 
      x1="${-t19}"
      y1="${t19}"
      x2="${t19}"
      y2="${-t19}"
    />
  `;
  return `<g class="x">${e11} ${o12}</g>`;
}
var A5 = class A6 extends H {
  constructor() {
    super(), this.leftMotorSpeed = 0, this.rightMotorSpeed = 0, new ResizeObserver(() => {
      this.resized();
    }).observe(this);
  }
  get clampedLeftMotorSpeed() {
    return I5(this.leftMotorSpeed, -1, 1);
  }
  get clampedRightMotorSpeed() {
    return I5(this.rightMotorSpeed, -1, 1);
  }
  drawMotionVector(t19, e11) {
    const r24 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), s18 = r24.width * 0.13, n33 = 20, a22 = 20, d34 = r24.width - (s18 + n33) * 2, c27 = r24.height - a22 * 2;
    if (Math.abs(t19) <= 0.05 && Math.abs(e11) <= 0.05)
      return dt5(r24.width * 0.2);
    const h26 = Math.min(d34, c27) / 2 - 8, l25 = 8;
    if (Math.abs(t19 - e11) <= 1e-3)
      return `<g class="arrow">${q5(
        Math.abs(t19 * h26),
        -Math.sign(t19) * Math.PI / 2,
        0,
        l25
      )}</g>`;
    const g31 = Math.PI, v30 = (e11 - t19) / 2, b33 = (t19 + e11) / 2, m33 = b33 / v30;
    let k27;
    if (Math.abs(m33) >= 1) {
      const y33 = -Math.sign(m33), w29 = (y33 + 1) * g31 / 2, x34 = Math.abs(m33 * h26);
      k27 = X4(
        w29,
        x34,
        y33 * b33 * h26,
        y33 * x34,
        l25
      );
    } else {
      const y33 = Math.sign(t19 - e11);
      if (m33 === 0) {
        const w29 = Math.max(t19, e11) * h26, x34 = y33 * g31, L11 = v30 < 0 ? g31 : 0;
        k27 = V5(L11, w29, x34, 0, l25);
      } else {
        const w29 = m33 < 0 ? t19 : e11, x34 = m33 < 0 ? e11 : t19, L11 = Math.abs(w29) * h26, Q11 = -m33 * L11, Y11 = at4(x34 / w29, 0, -1, 0.5, g31), Z11 = m33 < 0 ? g31 : 0;
        k27 = V5(
          Z11,
          L11,
          y33 * Y11,
          Q11,
          l25
        );
      }
    }
    return `<g class="arrow">${k27}</g>`;
  }
  drawDrivetrain() {
    const e11 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), o12 = e11.width * 0.13, r24 = Math.min(e11.width * 0.13, e11.height * 0.15), s18 = 20, n33 = 20, a22 = `
      <rect 
        width="calc(100% - ${(o12 + s18) * 2}px)" 
        height="calc(100% - ${n33 * 2}px)"
        x="${o12 + s18}" 
        y="20px" 
      />
    `, d34 = `
      <rect 
        width="${o12}px" 
        height="${r24 * 2}" 
        x="${s18}px" 
        y="${n33}px" 
      />
    `, c27 = `
      <rect 
        width="${o12}px" 
        height="${r24 * 2}" 
        x="calc(100% - ${o12 + s18}px)" 
        y="${n33}px" 
      />
    `, h26 = `
      <rect 
        width="${o12}px" 
        height="${r24 * 2}" 
        x="${s18}px"
        y="calc(100% - ${r24 * 2 + n33}px)"
      />
    `, l25 = `
      <rect 
        width="${o12}px" 
        height="${r24 * 2}" 
        x="calc(100% - ${o12 + s18}px)" 
        y="calc(100% - ${r24 * 2 + n33}px)"
      />
    `;
    return a22 + d34 + c27 + h26 + l25;
  }
  getLeftForegroundStyle() {
    return this.getForegroundStyle(this.clampedLeftMotorSpeed);
  }
  getRightForegroundStyle() {
    return this.getForegroundStyle(this.clampedRightMotorSpeed);
  }
  getForegroundStyle(t19) {
    const r24 = I5(t19, -1, 1);
    return r24 > 0 ? `
        height: ${Math.abs(r24) / 2 * 100}%;
        top: auto;
        bottom: 50%;
      ` : `
        height: ${Math.abs(r24) / 2 * 100}%;
        top: 50%;
        bottom: auto;
      `;
  }
  firstUpdated() {
    const t19 = this.drawMotionVector(0, 0);
    this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain(), this.renderRoot.querySelector("#forceVector").innerHTML = t19;
  }
  resized() {
    const t19 = this.drawMotionVector(
      this.clampedLeftMotorSpeed,
      this.clampedRightMotorSpeed
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = t19;
    const o12 = this.renderRoot.querySelector("#svg").getBoundingClientRect();
    this.renderRoot.querySelector("#forceVector").style.transform = `translate(${o12.width * 0.5}px, ${o12.height * 0.5}px)`, this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain();
  }
  updated() {
    const t19 = this.drawMotionVector(
      this.clampedLeftMotorSpeed,
      this.clampedRightMotorSpeed
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = t19;
  }
  render() {
    return Ot`
      <div class="diff-drive-container">
        <div class="speed">
          <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
          <div class="bar">
            <div
              class="foreground"
              style="${this.getLeftForegroundStyle()}"
            ></div>
          </div>
        </div>
        <svg id="svg">
          <g id="forceVector"></g>
          <g id="drivetrain" class="drivetrain"></g>
        </svg>
        <div class="speed">
          <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
          <div class="bar">
            <div
              class="foreground"
              style="${this.getRightForegroundStyle()}"
            ></div>
          </div>
        </div>
      </div>
    `;
  }
};
A5.styles = Ut`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
      padding: 0 10px;
      font-family: sans-serif;
    }

    .diff-drive-container {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
    }

    svg {
      overflow: overlay;
      flex: 1;
      height: 100%;
    }

    svg .x {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
    }

    svg .arrow line,
    svg .arrow path {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
      fill: none;
    }

    svg .arrow polygon {
      stroke: rgb(50, 50, 255);
      fill: rgb(50, 50, 255);
    }

    svg .drivetrain {
      fill: none;
      stroke: var(--frc-differential-drivebase-drivetrain-color, #000);
    }

    .bar {
      position: relative;
      height: calc(100% - 30px);
      width: 20px;
      border-radius: 3px;
      margin: 15px 0;
      background: var(--frc-bar-background, #ddd);
    }

    .speed {
      display: flex;
      height: 100%;
      flex-direction: row;
      align-items: center;
      margin-left: 30px;
    }

    frc-axis {
      width: 10px;
      height: calc(100% - 35px);
    }

    .foreground {
      position: absolute;
      top: 0;
      width: 20px;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
    }
  `;
var z5 = A5;
J5([
  Mt({ type: Number, attribute: "left-motor-speed" })
], z5.prototype, "leftMotorSpeed");
J5([
  Mt({ type: Number, attribute: "right-motor-speed" })
], z5.prototype, "rightMotorSpeed");
customElements.get("frc-differential-drivebase") || customElements.define("frc-differential-drivebase", z5);
var ct5 = Object.defineProperty;
var P5 = (i27, t19, e11, o12) => {
  for (var r24 = void 0, s18 = i27.length - 1, n33; s18 >= 0; s18--)
    (n33 = i27[s18]) && (r24 = n33(t19, e11, r24) || r24);
  return r24 && ct5(t19, e11, r24), r24;
};
var yt6 = {
  dashboard: {
    displayName: "Mecanum Drivebase"
  },
  properties: {
    frontLeftMotorSpeed: {
      type: "Number",
      attribute: "front-left-motor-speed"
    },
    frontRightMotorSpeed: {
      type: "Number",
      attribute: "front-right-motor-speed"
    },
    rearLeftMotorSpeed: { type: "Number", attribute: "rear-left-motor-speed" },
    rearRightMotorSpeed: {
      type: "Number",
      attribute: "rear-right-motor-speed"
    }
  }
};
function ht5(i27) {
  const t19 = i27 / 2, e11 = `
    <line 
      x1="${-t19}"
      y1="${-t19}"
      x2="${t19}"
      y2="${t19}"
    />
  `, o12 = `
    <line 
      x1="${-t19}"
      y1="${t19}"
      x2="${t19}"
      y2="${-t19}"
    />
  `;
  return `<g class="x">${e11} ${o12}</g>`;
}
function $3(i27) {
  return Math.min(1, Math.max(i27, -1));
}
function F5(i27) {
  const o12 = $3(i27);
  return o12 > 0 ? `
      height: ${Math.abs(o12) / 2 * 100}%;
      top: auto;
      bottom: 50%;
    ` : `
    height: ${Math.abs(o12) / 2 * 100}%;
    top: 50%;
    bottom: auto;
  `;
}
var U5 = class U6 extends H {
  constructor() {
    super(), this.frontLeftMotorSpeed = 0, this.frontRightMotorSpeed = 0, this.rearLeftMotorSpeed = 0, this.rearRightMotorSpeed = 0, new ResizeObserver(() => {
      this.resized();
    }).observe(this);
  }
  drawMotionVector(t19, e11, o12, r24) {
    const n33 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), a22 = n33.width * 0.13, d34 = 20, c27 = 20, h26 = n33.width - (a22 + d34) * 2, l25 = n33.height - c27 * 2, g31 = Math.min(h26, l25) / 2 - 16, v30 = {
      x: (t19 - e11 - o12 + r24) / 4,
      y: (t19 + e11 + o12 + r24) / 4
    }, b33 = (-t19 + e11 - o12 + r24) / 4, m33 = Math.hypot(v30.x, v30.y), k27 = Math.atan2(v30.y, v30.x);
    if (Math.abs(b33) <= 0.01 && m33 <= 0.01)
      return ht5(n33.width * 0.2);
    let y33 = "", w29 = "", x34 = "";
    return Math.abs(b33) > 0.01 && (y33 = V5(
      0,
      g31,
      -b33 * Math.PI,
      0,
      8
    ), w29 = V5(
      Math.PI,
      g31,
      -b33 * Math.PI,
      0,
      8
    )), m33 > 0.01 && (x34 = q5(
      m33 * g31,
      -k27,
      0,
      8
    )), `<g class="arrow">${y33} ${w29} ${x34}</g>`;
  }
  drawDrivetrain() {
    const e11 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), o12 = e11.width * 0.13, r24 = Math.min(e11.width * 0.13, e11.height * 0.15), s18 = 20, n33 = 20, a22 = `
      <rect 
        width="calc(100% - ${(o12 + s18) * 2}px)" 
        height="calc(100% - ${n33 * 2}px)"
        x="${o12 + s18}" 
        y="20px" 
      />
    `, d34 = `
      <rect 
        width="${o12}px" 
        height="${r24 * 2}" 
        x="${s18}px" 
        y="${n33}px" 
      />
    `, c27 = `
      <rect 
        width="${o12}px" 
        height="${r24 * 2}" 
        x="calc(100% - ${o12 + s18}px)" 
        y="${n33}px" 
      />
    `, h26 = `
      <rect 
        width="${o12}px" 
        height="${r24 * 2}" 
        x="${s18}px"
        y="calc(100% - ${r24 * 2 + n33}px)"
      />
    `, l25 = `
      <rect 
        width="${o12}px" 
        height="${r24 * 2}" 
        x="calc(100% - ${o12 + s18}px)" 
        y="calc(100% - ${r24 * 2 + n33}px)"
      />
    `;
    return a22 + d34 + c27 + h26 + l25;
  }
  getFlForegroundStyle() {
    return F5(this.frontLeftMotorSpeed);
  }
  getFrForegroundStyle() {
    return F5(this.frontRightMotorSpeed);
  }
  getRlForegroundStyle() {
    return F5(this.rearLeftMotorSpeed);
  }
  getRrForegroundStyle() {
    return F5(this.rearRightMotorSpeed);
  }
  firstUpdated() {
    const t19 = this.drawMotionVector(0, 0, 0, 0);
    this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain(), this.renderRoot.querySelector("#forceVector").innerHTML = t19;
  }
  resized() {
    const t19 = this.drawMotionVector(
      $3(this.frontLeftMotorSpeed),
      $3(this.frontRightMotorSpeed),
      $3(this.rearLeftMotorSpeed),
      $3(this.rearRightMotorSpeed)
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = t19;
    const o12 = this.renderRoot.querySelector("#svg").getBoundingClientRect();
    this.renderRoot.querySelector("#forceVector").style.transform = `translate(${o12.width * 0.5}px, ${o12.height * 0.5}px)`, this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain();
  }
  updated(t19) {
    super.updated(t19);
    const e11 = this.drawMotionVector(
      $3(this.frontLeftMotorSpeed),
      $3(this.frontRightMotorSpeed),
      $3(this.rearLeftMotorSpeed),
      $3(this.rearRightMotorSpeed)
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = e11;
  }
  render() {
    return Ot`
      <div class="diff-drive-container">
        <div class="speed-pair">
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getFlForegroundStyle()}"
              ></div>
            </div>
          </div>
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getRlForegroundStyle()}"
              ></div>
            </div>
          </div>
        </div>
        <svg id="svg">
          <g id="forceVector"></g>
          <g id="drivetrain" class="drivetrain"></g>
        </svg>
        <div class="speed-pair">
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getFrForegroundStyle()}"
              ></div>
            </div>
          </div>
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getRrForegroundStyle()}"
              ></div>
            </div>
          </div>
        </div>
      </div>
    `;
  }
};
U5.styles = Ut`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
      padding: 0 10px;
      font-family: sans-serif;
    }

    .diff-drive-container {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
    }

    svg {
      overflow: overlay;
      flex: 1;
      height: 100%;
    }

    svg .x {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
    }

    svg .arrow line,
    svg .arrow path {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
      fill: none;
    }

    svg .arrow polygon {
      stroke: rgb(50, 50, 255);
      fill: rgb(50, 50, 255);
    }

    svg .drivetrain {
      fill: none;
      stroke: var(--frc-mecanum-drivebase-drivetrain-color, #000);
    }

    .bar {
      position: relative;
      height: calc(100% - 30px);
      width: 20px;
      border-radius: 3px;
      margin: 15px 0;
      background: var(--frc-bar-background, #ddd);
    }

    .speed-pair {
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-around;
    }

    .speed {
      display: flex;
      height: 48%;
      flex-direction: row;
      align-items: center;
      margin-left: 30px;
    }

    frc-axis {
      width: 10px;
      height: calc(100% - 35px);
    }

    .foreground {
      position: absolute;
      top: 0;
      width: 20px;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
    }
  `;
var R5 = U5;
P5([
  Mt({ type: Number, attribute: "front-left-motor-speed" })
], R5.prototype, "frontLeftMotorSpeed");
P5([
  Mt({ type: Number, attribute: "front-right-motor-speed" })
], R5.prototype, "frontRightMotorSpeed");
P5([
  Mt({ type: Number, attribute: "rear-left-motor-speed" })
], R5.prototype, "rearLeftMotorSpeed");
P5([
  Mt({ type: Number, attribute: "rear-right-motor-speed" })
], R5.prototype, "rearRightMotorSpeed");
customElements.get("frc-mecanum-drivebase") || customElements.define("frc-mecanum-drivebase", R5);
var lt5 = Object.defineProperty;
var f7 = (i27, t19, e11, o12) => {
  for (var r24 = void 0, s18 = i27.length - 1, n33; s18 >= 0; s18--)
    (n33 = i27[s18]) && (r24 = n33(t19, e11, r24) || r24);
  return r24 && lt5(t19, e11, r24), r24;
};
var wt4 = {
  dashboard: {
    displayName: "Swerve Drivebase"
  },
  properties: {
    moduleCount: {
      type: "Number",
      defaultValue: 4,
      description: "The number of swerve modules"
    },
    wheelLocations: {
      type: "Array",
      defaultValue: [1, -1, 1, 1, -1, -1, -1, 1],
      description: "An array of numbers describing the location of the swerve module wheels relative to the physical center of the robot"
    },
    measuredStates: {
      type: "Array",
      defaultValue: [0, 0, 0, 0, 0, 0, 0, 0],
      description: "An array of rotation and velocity values describing the measured state of each swerve module"
    },
    desiredStates: {
      type: "Array",
      defaultValue: [0, 0, 0, 0, 0, 0, 0, 0],
      description: "An array of rotation and velocity values describing the desired state of each swerve module"
    },
    robotRotation: {
      type: "Number",
      description: "The robot's current rotation based on odometry or gyro readings"
    },
    maxSpeed: {
      type: "Number",
      defaultValue: 1,
      description: "The maximum achievable speed of the modules, used to adjust the size of the vectors."
    },
    rotationUnit: {
      type: "String",
      defaultValue: "radians",
      description: "The units of the module rotations and robot rotation",
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["radians", "degrees"];
        }
      }
    },
    sizeLeftRight: {
      type: "Number",
      defaultValue: 2,
      description: "The distance between the left and right modules."
    },
    sizeFrontBack: {
      type: "Number",
      defaultValue: 2,
      description: "The distance between the front and back modules."
    }
    // forwardDirection: {
    //   type: 'String',
    //   defaultValue: 'up',
    //   description:
    //     'The direction the robot should be facing when the "Robot Rotation" is zero or blank. This option is often useful to align with odometry data or match videos.',
    //   input: {
    //     type: 'StringDropdown',
    //     allowCustomValues: false,
    //     getOptions(): string[] {
    //       return ['up', 'right', 'down', 'left'];
    //     },
    //   },
    // },
    // maxAngularVelocity: {
    //   type: 'Number',
    //   defaultValue: Math.PI * 2,
    //   description:
    //     'The maximum achievable angular velocity of the robot. This is used to visualize the angular velocity from the chassis speeds properties.',
    // },
    // measuredChassisSpeeds: {
    //   type: 'Array',
    //   description:
    //     'Describes the measured forward, sideways and angular velocity of the robot',
    // },
    // desiredChassisSpeeds: {
    //   type: 'Array',
    //   description:
    //     'Describes the desired forward, sideways and angular velocity of the robot',
    // },
  }
};
function T6(i27, ...t19) {
  return t19.some((e11) => i27.has(e11));
}
function K5(i27) {
  return i27 * Math.PI / 180;
}
function H6(i27) {
  return i27 * 180 / Math.PI;
}
function ut5(i27, t19, e11) {
  return Math.max(Math.min(i27, e11), t19);
}
function O6(i27, t19 = false) {
  const e11 = K5(-(i27 - 90));
  return [t19 ? -Math.cos(e11) : Math.cos(e11), Math.sin(e11)];
}
var S5 = 35;
var E5 = class E6 extends H {
  constructor() {
    super(...arguments), this.moduleCount = 4, this.wheelLocations = [
      2.5,
      2,
      2.5,
      -2,
      -2.5,
      2,
      -2.5,
      -2
    ], this.measuredStates = [
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0
    ], this.desiredStates = [
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0
    ], this.robotRotation = 0, this.maxSpeed = 1, this.rotationUnit = "radians", this.sizeLeftRight = 4, this.sizeFrontBack = 5, this.normalizedRotation = 0;
  }
  drawBase() {
    const [t19, e11] = this.getBaseSize();
    Ei2(this._base).attr("width", t19).attr("height", e11).attr("stroke-width", 5).attr("fill", "none");
  }
  setSwerveRotation() {
    Ei2(this._swerve).attr(
      "transform",
      `rotate(${-this.normalizedRotation})`
    );
  }
  setSwerveOrigin() {
    const [t19, e11] = this.getBaseSize();
    Ei2(this._swerve).attr(
      "transform-origin",
      `${t19 / 2} ${e11 / 2}`
    );
  }
  getRobotRotationRad() {
    const t19 = this.robotRotation;
    return this.rotationUnit === "radians" ? t19 : K5(t19);
  }
  getSvgSize() {
    const { width: t19 } = this.getBoundingClientRect();
    return [t19, t19 * this.sizeFrontBack / this.sizeLeftRight];
  }
  getBaseSize() {
    const [t19] = this.getSvgSize();
    return [t19, t19 * this.sizeFrontBack / this.sizeLeftRight];
  }
  updated(t19) {
    if (t19.has("robotRotation")) {
      const e11 = this.robotRotation ?? 0, r24 = (t19.get("robotRotation") ?? e11) - e11, s18 = this.rotationUnit === "degrees" ? r24 : H6(r24), n33 = [
        s18 - 720,
        s18 - 360,
        s18,
        s18 + 360,
        s18 + 720
      ];
      let a22 = 0, d34 = Math.abs(n33[0]);
      for (let c27 = 1; c27 < n33.length; c27 += 1) {
        const h26 = Math.abs(n33[c27]);
        h26 < d34 && (a22 = c27, d34 = h26);
      }
      this.normalizedRotation -= n33[a22];
    }
    T6(
      t19,
      "sizeLeftRight",
      "sizeFrontBack",
      "robotRotation",
      "rotationUnit"
    ) && this.drawBase(), T6(t19, "robotRotation", "rotationUnit") && this.setSwerveRotation(), T6(t19, "sizeLeftRight", "sizeFrontBack") && this.setSwerveOrigin();
  }
  resized() {
    const [t19, e11] = this.getSvgSize();
    Ei2(this._svg).attr("width", t19).attr("height", e11), this.drawBase(), this.setSwerveOrigin(), this.requestUpdate();
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.resized();
    }).observe(this), this.resized();
  }
  getSwerveModules() {
    const t19 = [];
    for (let e11 = 0; e11 < this.moduleCount; e11 += 1) {
      const r24 = {
        location: [
          this.wheelLocations[e11 * 2],
          this.wheelLocations[e11 * 2 + 1]
        ],
        desiredRotation: this.desiredStates[e11 * 2],
        desiredVelocity: this.desiredStates[e11 * 2 + 1],
        measuredRotation: this.measuredStates[e11 * 2],
        measuredVelocity: this.measuredStates[e11 * 2 + 1]
      };
      t19.push(r24);
    }
    return t19;
  }
  renderModuleDirectionIndicator(t19, e11, o12) {
    const r24 = this.rotationUnit === "degrees" ? e11 : H6(e11), [s18, n33] = O6(r24 - 15, true), [a22, d34] = O6(r24 + 15, true), c27 = `M ${-s18 * 60},${n33 * 60} L 0,0 ${-a22 * 60},${d34 * 60}`;
    return Tt`
      <defs>
        <clipPath id=${t19}>
          <path d=${c27} fill="white" stroke="5" stroke="white" />
        </clipPath>
      </defs>
      <circle r=${S5 - 2.5} fill=${o12} stroke-width="0" clip-path=${`url(#${t19})`}></circle>
    `;
  }
  renderModuleVelocityIndicator(t19, e11, o12, r24) {
    const s18 = this.rotationUnit === "degrees" ? e11 : H6(e11);
    let n33 = ut5(100 * o12 / this.maxSpeed, -100, 100);
    n33 += S5 * Math.sign(n33), n33 *= -1;
    const a22 = Math.abs(n33) - 20, d34 = Math.abs(n33), c27 = `M -17.5,${a22} L 2.5,${d34} L 22.5,${a22}`, h26 = `rotate(${-s18 + (n33 < 0 ? 180 : 0)})`, l25 = `${t19}-velocity`;
    return Tt`
     <defs>
        <mask id=${l25}>
          <circle r="300" fill="white" ></circle>
          <circle r=${S5 + 2.5} fill="black" ></circle>
        </mask>
      </defs>
      <g class="velocity-indicator" transform=${h26} mask="url(#${l25})">
        <rect width="5" height=${Math.abs(n33)} fill=${r24}></rect>
        <path d=${c27} stroke=${r24} stroke-width="5" fill="none" />
      </g>
    `;
  }
  renderModules() {
    const t19 = this.getSwerveModules(), [e11, o12] = this.getBaseSize();
    return Tt`
      <g class="modules">
        ${t19.map((r24, s18) => {
      const {
        desiredRotation: n33,
        measuredRotation: a22,
        location: d34,
        measuredVelocity: c27,
        desiredVelocity: h26
      } = r24, l25 = o12 / 2 * (1 - d34[0]) + S5 * Math.sign(d34[0]), g31 = e11 / 2 * (d34[1] + 1) - S5 * Math.sign(d34[1]), v30 = `module-${s18}-measured-clip`, b33 = `module-${s18}-desired-clip`;
      return Tt`
            <g transform=${`translate(${g31}, ${l25})`}>
              <circle class="module-circle" r=${S5} stroke-width="5" fill="none"></circle>
              ${this.renderModuleDirectionIndicator(
        v30,
        a22,
        "blue"
      )}
              ${this.renderModuleDirectionIndicator(
        b33,
        n33,
        "red"
      )}
              ${this.renderModuleVelocityIndicator(
        v30,
        a22,
        c27,
        "blue"
      )}
              ${this.renderModuleVelocityIndicator(
        b33,
        n33,
        h26,
        "red"
      )}
            </g>
          `;
    })} 
      </g>
    `;
  }
  renderWheelMask() {
    const t19 = this.getSwerveModules(), [e11, o12] = this.getBaseSize();
    return Tt`
      <defs>
        <mask id="wheel-mask">
          <rect fill="white" width=${e11} height=${o12} stroke-width="5" stroke="white"></rect>
          ${t19.map((r24) => {
      const s18 = o12 / 2 - o12 * r24.location[0] / this.sizeFrontBack, n33 = e11 / 2 - e11 * r24.location[1] / this.sizeLeftRight;
      return Tt`
              <circle r="50" fill="black" transform=${`translate(${n33}, ${s18})`}></circle>
            `;
    })}
        </mask>
      </defs>
    `;
  }
  renderArrow() {
    const [t19, e11] = this.getBaseSize(), o12 = `M ${t19 / 2 - 30},100 L ${t19 / 2},70 L ${t19 / 2 + 30},100`;
    return Tt`
      <line class="arrow" x1=${t19 / 2} y1=${70} x2=${t19 / 2} y2=${e11 - 30} stroke-width="5" />
      <path class="arrow" d=${o12} stroke-width="5" fill="none" />
    `;
  }
  render() {
    return Ot`
      <div>
        ${Tt`
          <svg>
            ${this.renderWheelMask()}
            <g class="swerve">
              <rect class="base" rx=${S5}></rect>
              ${this.renderModules()}
              ${this.renderArrow()}
            </g>
          </svg>
      `}
      </div>
    `;
  }
};
E5.styles = Ut`
    :host {
      display: inline-block;
      width: 300px;
      height: auto;
      overflow: visible;
    }

    svg {
      width: 100%;
      overflow: visible;
    }

    .base {
      stroke: var(--frc-swerve-drive-color, black);
    }

    .arrow {
      stroke: var(--frc-swerve-drive-color, black);
    }

    .module-circle {
      stroke: var(--frc-swerve-drive-color, black);
    }
  `;
var u3 = E5;
f7([
  Mt({ type: Number, attribute: "module-count" })
], u3.prototype, "moduleCount");
f7([
  Mt({ type: Array, attribute: "wheel-locations" })
], u3.prototype, "wheelLocations");
f7([
  Mt({ type: Array, attribute: "measured-states" })
], u3.prototype, "measuredStates");
f7([
  Mt({ type: Array, attribute: "desired-states" })
], u3.prototype, "desiredStates");
f7([
  Mt({ type: Number, attribute: "robot-rotation" })
], u3.prototype, "robotRotation");
f7([
  Mt({ type: Number, attribute: "max-speed" })
], u3.prototype, "maxSpeed");
f7([
  Mt({ type: String, attribute: "rotation-unit" })
], u3.prototype, "rotationUnit");
f7([
  Mt({ type: Number, attribute: "size-left-right" })
], u3.prototype, "sizeLeftRight");
f7([
  Mt({ type: Number, attribute: "size-front-back" })
], u3.prototype, "sizeFrontBack");
f7([
  h("svg")
], u3.prototype, "_svg");
f7([
  h(".swerve")
], u3.prototype, "_swerve");
f7([
  h(".base")
], u3.prototype, "_base");
f7([
  h(".modules")
], u3.prototype, "_modules");
customElements.get("frc-swerve-drivebase") || customElements.define("frc-swerve-drivebase", u3);

// node_modules/@frc-web-components/fwc/dist/components/field3d.es.js
var $a = (a22) => {
  throw TypeError(a22);
};
var Ao = (a22, e11, t19) => e11.has(a22) || $a("Cannot " + t19);
var ft6 = (a22, e11, t19) => (Ao(a22, e11, "read from private field"), t19 ? t19.call(a22) : e11.get(a22));
var Ft3 = (a22, e11, t19) => e11.has(a22) ? $a("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(a22) : e11.set(a22, t19);
var Kt3 = (a22, e11, t19, n33) => (Ao(a22, e11, "write to private field"), n33 ? n33.call(a22, t19) : e11.set(a22, t19), t19);
var An3 = (a22, e11, t19) => (Ao(a22, e11, "access private method"), t19);
var Ea = "151";
var qi = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };
var Xi = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };
var eh = 0;
var el = 1;
var th = 2;
var Zc = 1;
var nh = 2;
var Ks = 3;
var Pn3 = 0;
var sn3 = 1;
var fn3 = 2;
var li3 = 0;
var gs = 1;
var tl = 2;
var nl = 3;
var il = 4;
var ih = 5;
var fs = 100;
var sh = 101;
var rh = 102;
var sl = 103;
var rl = 104;
var oh = 200;
var ah = 201;
var lh = 202;
var ch = 203;
var $c = 204;
var Qc = 205;
var uh = 206;
var hh = 207;
var dh = 208;
var fh = 209;
var ph = 210;
var mh = 0;
var gh = 1;
var _h = 2;
var ha = 3;
var xh = 4;
var yh = 5;
var vh = 6;
var bh = 7;
var ao = 0;
var Mh = 1;
var Sh = 2;
var Wn3 = 0;
var wh = 1;
var Th = 2;
var Ah = 3;
var Eh = 4;
var Ch = 5;
var eu = 300;
var Ss = 301;
var ws = 302;
var da = 303;
var fa = 304;
var lo = 306;
var Rn3 = 1e3;
var Zt3 = 1001;
var to = 1002;
var Bt3 = 1003;
var pa = 1004;
var Qr3 = 1005;
var Ht4 = 1006;
var tu = 1007;
var jn3 = 1008;
var Ei3 = 1009;
var Lh = 1010;
var Rh = 1011;
var nu = 1012;
var Ph = 1013;
var vi3 = 1014;
var ai3 = 1015;
var Qs = 1016;
var Ih = 1017;
var Dh = 1018;
var _s = 1020;
var Nh = 1021;
var pn3 = 1023;
var Uh = 1024;
var kh = 1025;
var Ti = 1026;
var Ts = 1027;
var Oh = 1028;
var Fh = 1029;
var zh = 1030;
var Bh = 1031;
var Vh = 1033;
var Eo = 33776;
var Co = 33777;
var Lo = 33778;
var Ro = 33779;
var ol = 35840;
var al = 35841;
var ll = 35842;
var cl = 35843;
var Gh = 36196;
var ul = 37492;
var hl = 37496;
var dl = 37808;
var fl = 37809;
var pl = 37810;
var ml = 37811;
var gl = 37812;
var _l = 37813;
var xl = 37814;
var yl = 37815;
var vl = 37816;
var bl = 37817;
var Ml = 37818;
var Sl = 37819;
var wl = 37820;
var Tl = 37821;
var Po = 36492;
var Hh = 36283;
var Al = 36284;
var El = 36285;
var Cl = 36286;
var er3 = 2300;
var As = 2301;
var Io = 2302;
var Ll = 2400;
var Rl = 2401;
var Pl = 2402;
var Wh = 2500;
var jh = 0;
var iu = 1;
var ma = 2;
var Ci = 3e3;
var st6 = 3001;
var qh = 3200;
var Xh = 3201;
var co = 0;
var Kh = 1;
var bn3 = "srgb";
var tr3 = "srgb-linear";
var su = "display-p3";
var Do = 7680;
var Yh = 519;
var ga = 35044;
var Il = "300 es";
var _a = 1035;
var Ni3 = class {
  addEventListener(e11, t19) {
    this._listeners === void 0 && (this._listeners = {});
    const n33 = this._listeners;
    n33[e11] === void 0 && (n33[e11] = []), n33[e11].indexOf(t19) === -1 && n33[e11].push(t19);
  }
  hasEventListener(e11, t19) {
    if (this._listeners === void 0)
      return false;
    const n33 = this._listeners;
    return n33[e11] !== void 0 && n33[e11].indexOf(t19) !== -1;
  }
  removeEventListener(e11, t19) {
    if (this._listeners === void 0)
      return;
    const i27 = this._listeners[e11];
    if (i27 !== void 0) {
      const s18 = i27.indexOf(t19);
      s18 !== -1 && i27.splice(s18, 1);
    }
  }
  dispatchEvent(e11) {
    if (this._listeners === void 0)
      return;
    const n33 = this._listeners[e11.type];
    if (n33 !== void 0) {
      e11.target = this;
      const i27 = n33.slice(0);
      for (let s18 = 0, r24 = i27.length; s18 < r24; s18++)
        i27[s18].call(this, e11);
      e11.target = null;
    }
  }
};
var Yt3 = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "0a", "0b", "0c", "0d", "0e", "0f", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "1a", "1b", "1c", "1d", "1e", "1f", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "2a", "2b", "2c", "2d", "2e", "2f", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "3a", "3b", "3c", "3d", "3e", "3f", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "4a", "4b", "4c", "4d", "4e", "4f", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "5a", "5b", "5c", "5d", "5e", "5f", "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "6a", "6b", "6c", "6d", "6e", "6f", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "7a", "7b", "7c", "7d", "7e", "7f", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "8a", "8b", "8c", "8d", "8e", "8f", "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "9a", "9b", "9c", "9d", "9e", "9f", "a0", "a1", "a2", "a3", "a4", "a5", "a6", "a7", "a8", "a9", "aa", "ab", "ac", "ad", "ae", "af", "b0", "b1", "b2", "b3", "b4", "b5", "b6", "b7", "b8", "b9", "ba", "bb", "bc", "bd", "be", "bf", "c0", "c1", "c2", "c3", "c4", "c5", "c6", "c7", "c8", "c9", "ca", "cb", "cc", "cd", "ce", "cf", "d0", "d1", "d2", "d3", "d4", "d5", "d6", "d7", "d8", "d9", "da", "db", "dc", "dd", "de", "df", "e0", "e1", "e2", "e3", "e4", "e5", "e6", "e7", "e8", "e9", "ea", "eb", "ec", "ed", "ee", "ef", "f0", "f1", "f2", "f3", "f4", "f5", "f6", "f7", "f8", "f9", "fa", "fb", "fc", "fd", "fe", "ff"];
var Dl = 1234567;
var xs = Math.PI / 180;
var Es = 180 / Math.PI;
function Sn3() {
  const a22 = Math.random() * 4294967295 | 0, e11 = Math.random() * 4294967295 | 0, t19 = Math.random() * 4294967295 | 0, n33 = Math.random() * 4294967295 | 0;
  return (Yt3[a22 & 255] + Yt3[a22 >> 8 & 255] + Yt3[a22 >> 16 & 255] + Yt3[a22 >> 24 & 255] + "-" + Yt3[e11 & 255] + Yt3[e11 >> 8 & 255] + "-" + Yt3[e11 >> 16 & 15 | 64] + Yt3[e11 >> 24 & 255] + "-" + Yt3[t19 & 63 | 128] + Yt3[t19 >> 8 & 255] + "-" + Yt3[t19 >> 16 & 255] + Yt3[t19 >> 24 & 255] + Yt3[n33 & 255] + Yt3[n33 >> 8 & 255] + Yt3[n33 >> 16 & 255] + Yt3[n33 >> 24 & 255]).toLowerCase();
}
function Wt4(a22, e11, t19) {
  return Math.max(e11, Math.min(t19, a22));
}
function Ca(a22, e11) {
  return (a22 % e11 + e11) % e11;
}
function Jh(a22, e11, t19, n33, i27) {
  return n33 + (a22 - e11) * (i27 - n33) / (t19 - e11);
}
function Zh(a22, e11, t19) {
  return a22 !== e11 ? (t19 - a22) / (e11 - a22) : 0;
}
function Js(a22, e11, t19) {
  return (1 - t19) * a22 + t19 * e11;
}
function $h(a22, e11, t19, n33) {
  return Js(a22, e11, 1 - Math.exp(-t19 * n33));
}
function Qh(a22, e11 = 1) {
  return e11 - Math.abs(Ca(a22, e11 * 2) - e11);
}
function ed(a22, e11, t19) {
  return a22 <= e11 ? 0 : a22 >= t19 ? 1 : (a22 = (a22 - e11) / (t19 - e11), a22 * a22 * (3 - 2 * a22));
}
function td(a22, e11, t19) {
  return a22 <= e11 ? 0 : a22 >= t19 ? 1 : (a22 = (a22 - e11) / (t19 - e11), a22 * a22 * a22 * (a22 * (a22 * 6 - 15) + 10));
}
function nd(a22, e11) {
  return a22 + Math.floor(Math.random() * (e11 - a22 + 1));
}
function id(a22, e11) {
  return a22 + Math.random() * (e11 - a22);
}
function sd(a22) {
  return a22 * (0.5 - Math.random());
}
function rd(a22) {
  a22 !== void 0 && (Dl = a22);
  let e11 = Dl += 1831565813;
  return e11 = Math.imul(e11 ^ e11 >>> 15, e11 | 1), e11 ^= e11 + Math.imul(e11 ^ e11 >>> 7, e11 | 61), ((e11 ^ e11 >>> 14) >>> 0) / 4294967296;
}
function od(a22) {
  return a22 * xs;
}
function ad(a22) {
  return a22 * Es;
}
function xa(a22) {
  return (a22 & a22 - 1) === 0 && a22 !== 0;
}
function ru(a22) {
  return Math.pow(2, Math.ceil(Math.log(a22) / Math.LN2));
}
function ou(a22) {
  return Math.pow(2, Math.floor(Math.log(a22) / Math.LN2));
}
function ld(a22, e11, t19, n33, i27) {
  const s18 = Math.cos, r24 = Math.sin, o12 = s18(t19 / 2), c27 = r24(t19 / 2), l25 = s18((e11 + n33) / 2), u35 = r24((e11 + n33) / 2), h26 = s18((e11 - n33) / 2), d34 = r24((e11 - n33) / 2), p26 = s18((n33 - e11) / 2), g31 = r24((n33 - e11) / 2);
  switch (i27) {
    case "XYX":
      a22.set(o12 * u35, c27 * h26, c27 * d34, o12 * l25);
      break;
    case "YZY":
      a22.set(c27 * d34, o12 * u35, c27 * h26, o12 * l25);
      break;
    case "ZXZ":
      a22.set(c27 * h26, c27 * d34, o12 * u35, o12 * l25);
      break;
    case "XZX":
      a22.set(o12 * u35, c27 * g31, c27 * p26, o12 * l25);
      break;
    case "YXY":
      a22.set(c27 * p26, o12 * u35, c27 * g31, o12 * l25);
      break;
    case "ZYZ":
      a22.set(c27 * g31, c27 * p26, o12 * u35, o12 * l25);
      break;
    default:
      console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: " + i27);
  }
}
function Hn3(a22, e11) {
  switch (e11.constructor) {
    case Float32Array:
      return a22;
    case Uint16Array:
      return a22 / 65535;
    case Uint8Array:
      return a22 / 255;
    case Int16Array:
      return Math.max(a22 / 32767, -1);
    case Int8Array:
      return Math.max(a22 / 127, -1);
    default:
      throw new Error("Invalid component type.");
  }
}
function mt5(a22, e11) {
  switch (e11.constructor) {
    case Float32Array:
      return a22;
    case Uint16Array:
      return Math.round(a22 * 65535);
    case Uint8Array:
      return Math.round(a22 * 255);
    case Int16Array:
      return Math.round(a22 * 32767);
    case Int8Array:
      return Math.round(a22 * 127);
    default:
      throw new Error("Invalid component type.");
  }
}
var ps = {
  DEG2RAD: xs,
  RAD2DEG: Es,
  generateUUID: Sn3,
  clamp: Wt4,
  euclideanModulo: Ca,
  mapLinear: Jh,
  inverseLerp: Zh,
  lerp: Js,
  damp: $h,
  pingpong: Qh,
  smoothstep: ed,
  smootherstep: td,
  randInt: nd,
  randFloat: id,
  randFloatSpread: sd,
  seededRandom: rd,
  degToRad: od,
  radToDeg: ad,
  isPowerOfTwo: xa,
  ceilPowerOfTwo: ru,
  floorPowerOfTwo: ou,
  setQuaternionFromProperEuler: ld,
  normalize: mt5,
  denormalize: Hn3
};
var We4 = class _We {
  constructor(e11 = 0, t19 = 0) {
    _We.prototype.isVector2 = true, this.x = e11, this.y = t19;
  }
  get width() {
    return this.x;
  }
  set width(e11) {
    this.x = e11;
  }
  get height() {
    return this.y;
  }
  set height(e11) {
    this.y = e11;
  }
  set(e11, t19) {
    return this.x = e11, this.y = t19, this;
  }
  setScalar(e11) {
    return this.x = e11, this.y = e11, this;
  }
  setX(e11) {
    return this.x = e11, this;
  }
  setY(e11) {
    return this.y = e11, this;
  }
  setComponent(e11, t19) {
    switch (e11) {
      case 0:
        this.x = t19;
        break;
      case 1:
        this.y = t19;
        break;
      default:
        throw new Error("index is out of range: " + e11);
    }
    return this;
  }
  getComponent(e11) {
    switch (e11) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      default:
        throw new Error("index is out of range: " + e11);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y);
  }
  copy(e11) {
    return this.x = e11.x, this.y = e11.y, this;
  }
  add(e11) {
    return this.x += e11.x, this.y += e11.y, this;
  }
  addScalar(e11) {
    return this.x += e11, this.y += e11, this;
  }
  addVectors(e11, t19) {
    return this.x = e11.x + t19.x, this.y = e11.y + t19.y, this;
  }
  addScaledVector(e11, t19) {
    return this.x += e11.x * t19, this.y += e11.y * t19, this;
  }
  sub(e11) {
    return this.x -= e11.x, this.y -= e11.y, this;
  }
  subScalar(e11) {
    return this.x -= e11, this.y -= e11, this;
  }
  subVectors(e11, t19) {
    return this.x = e11.x - t19.x, this.y = e11.y - t19.y, this;
  }
  multiply(e11) {
    return this.x *= e11.x, this.y *= e11.y, this;
  }
  multiplyScalar(e11) {
    return this.x *= e11, this.y *= e11, this;
  }
  divide(e11) {
    return this.x /= e11.x, this.y /= e11.y, this;
  }
  divideScalar(e11) {
    return this.multiplyScalar(1 / e11);
  }
  applyMatrix3(e11) {
    const t19 = this.x, n33 = this.y, i27 = e11.elements;
    return this.x = i27[0] * t19 + i27[3] * n33 + i27[6], this.y = i27[1] * t19 + i27[4] * n33 + i27[7], this;
  }
  min(e11) {
    return this.x = Math.min(this.x, e11.x), this.y = Math.min(this.y, e11.y), this;
  }
  max(e11) {
    return this.x = Math.max(this.x, e11.x), this.y = Math.max(this.y, e11.y), this;
  }
  clamp(e11, t19) {
    return this.x = Math.max(e11.x, Math.min(t19.x, this.x)), this.y = Math.max(e11.y, Math.min(t19.y, this.y)), this;
  }
  clampScalar(e11, t19) {
    return this.x = Math.max(e11, Math.min(t19, this.x)), this.y = Math.max(e11, Math.min(t19, this.y)), this;
  }
  clampLength(e11, t19) {
    const n33 = this.length();
    return this.divideScalar(n33 || 1).multiplyScalar(Math.max(e11, Math.min(t19, n33)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this;
  }
  roundToZero() {
    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this;
  }
  dot(e11) {
    return this.x * e11.x + this.y * e11.y;
  }
  cross(e11) {
    return this.x * e11.y - this.y * e11.x;
  }
  lengthSq() {
    return this.x * this.x + this.y * this.y;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  angle() {
    return Math.atan2(-this.y, -this.x) + Math.PI;
  }
  angleTo(e11) {
    const t19 = Math.sqrt(this.lengthSq() * e11.lengthSq());
    if (t19 === 0)
      return Math.PI / 2;
    const n33 = this.dot(e11) / t19;
    return Math.acos(Wt4(n33, -1, 1));
  }
  distanceTo(e11) {
    return Math.sqrt(this.distanceToSquared(e11));
  }
  distanceToSquared(e11) {
    const t19 = this.x - e11.x, n33 = this.y - e11.y;
    return t19 * t19 + n33 * n33;
  }
  manhattanDistanceTo(e11) {
    return Math.abs(this.x - e11.x) + Math.abs(this.y - e11.y);
  }
  setLength(e11) {
    return this.normalize().multiplyScalar(e11);
  }
  lerp(e11, t19) {
    return this.x += (e11.x - this.x) * t19, this.y += (e11.y - this.y) * t19, this;
  }
  lerpVectors(e11, t19, n33) {
    return this.x = e11.x + (t19.x - e11.x) * n33, this.y = e11.y + (t19.y - e11.y) * n33, this;
  }
  equals(e11) {
    return e11.x === this.x && e11.y === this.y;
  }
  fromArray(e11, t19 = 0) {
    return this.x = e11[t19], this.y = e11[t19 + 1], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.x, e11[t19 + 1] = this.y, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.x = e11.getX(t19), this.y = e11.getY(t19), this;
  }
  rotateAround(e11, t19) {
    const n33 = Math.cos(t19), i27 = Math.sin(t19), s18 = this.x - e11.x, r24 = this.y - e11.y;
    return this.x = s18 * n33 - r24 * i27 + e11.x, this.y = s18 * i27 + r24 * n33 + e11.y, this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y;
  }
};
var Qe4 = class _Qe {
  constructor() {
    _Qe.prototype.isMatrix3 = true, this.elements = [
      1,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      1
    ];
  }
  set(e11, t19, n33, i27, s18, r24, o12, c27, l25) {
    const u35 = this.elements;
    return u35[0] = e11, u35[1] = i27, u35[2] = o12, u35[3] = t19, u35[4] = s18, u35[5] = c27, u35[6] = n33, u35[7] = r24, u35[8] = l25, this;
  }
  identity() {
    return this.set(
      1,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      1
    ), this;
  }
  copy(e11) {
    const t19 = this.elements, n33 = e11.elements;
    return t19[0] = n33[0], t19[1] = n33[1], t19[2] = n33[2], t19[3] = n33[3], t19[4] = n33[4], t19[5] = n33[5], t19[6] = n33[6], t19[7] = n33[7], t19[8] = n33[8], this;
  }
  extractBasis(e11, t19, n33) {
    return e11.setFromMatrix3Column(this, 0), t19.setFromMatrix3Column(this, 1), n33.setFromMatrix3Column(this, 2), this;
  }
  setFromMatrix4(e11) {
    const t19 = e11.elements;
    return this.set(
      t19[0],
      t19[4],
      t19[8],
      t19[1],
      t19[5],
      t19[9],
      t19[2],
      t19[6],
      t19[10]
    ), this;
  }
  multiply(e11) {
    return this.multiplyMatrices(this, e11);
  }
  premultiply(e11) {
    return this.multiplyMatrices(e11, this);
  }
  multiplyMatrices(e11, t19) {
    const n33 = e11.elements, i27 = t19.elements, s18 = this.elements, r24 = n33[0], o12 = n33[3], c27 = n33[6], l25 = n33[1], u35 = n33[4], h26 = n33[7], d34 = n33[2], p26 = n33[5], g31 = n33[8], y33 = i27[0], m33 = i27[3], f39 = i27[6], E24 = i27[1], b33 = i27[4], w29 = i27[7], S21 = i27[2], D17 = i27[5], N19 = i27[8];
    return s18[0] = r24 * y33 + o12 * E24 + c27 * S21, s18[3] = r24 * m33 + o12 * b33 + c27 * D17, s18[6] = r24 * f39 + o12 * w29 + c27 * N19, s18[1] = l25 * y33 + u35 * E24 + h26 * S21, s18[4] = l25 * m33 + u35 * b33 + h26 * D17, s18[7] = l25 * f39 + u35 * w29 + h26 * N19, s18[2] = d34 * y33 + p26 * E24 + g31 * S21, s18[5] = d34 * m33 + p26 * b33 + g31 * D17, s18[8] = d34 * f39 + p26 * w29 + g31 * N19, this;
  }
  multiplyScalar(e11) {
    const t19 = this.elements;
    return t19[0] *= e11, t19[3] *= e11, t19[6] *= e11, t19[1] *= e11, t19[4] *= e11, t19[7] *= e11, t19[2] *= e11, t19[5] *= e11, t19[8] *= e11, this;
  }
  determinant() {
    const e11 = this.elements, t19 = e11[0], n33 = e11[1], i27 = e11[2], s18 = e11[3], r24 = e11[4], o12 = e11[5], c27 = e11[6], l25 = e11[7], u35 = e11[8];
    return t19 * r24 * u35 - t19 * o12 * l25 - n33 * s18 * u35 + n33 * o12 * c27 + i27 * s18 * l25 - i27 * r24 * c27;
  }
  invert() {
    const e11 = this.elements, t19 = e11[0], n33 = e11[1], i27 = e11[2], s18 = e11[3], r24 = e11[4], o12 = e11[5], c27 = e11[6], l25 = e11[7], u35 = e11[8], h26 = u35 * r24 - o12 * l25, d34 = o12 * c27 - u35 * s18, p26 = l25 * s18 - r24 * c27, g31 = t19 * h26 + n33 * d34 + i27 * p26;
    if (g31 === 0)
      return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);
    const y33 = 1 / g31;
    return e11[0] = h26 * y33, e11[1] = (i27 * l25 - u35 * n33) * y33, e11[2] = (o12 * n33 - i27 * r24) * y33, e11[3] = d34 * y33, e11[4] = (u35 * t19 - i27 * c27) * y33, e11[5] = (i27 * s18 - o12 * t19) * y33, e11[6] = p26 * y33, e11[7] = (n33 * c27 - l25 * t19) * y33, e11[8] = (r24 * t19 - n33 * s18) * y33, this;
  }
  transpose() {
    let e11;
    const t19 = this.elements;
    return e11 = t19[1], t19[1] = t19[3], t19[3] = e11, e11 = t19[2], t19[2] = t19[6], t19[6] = e11, e11 = t19[5], t19[5] = t19[7], t19[7] = e11, this;
  }
  getNormalMatrix(e11) {
    return this.setFromMatrix4(e11).invert().transpose();
  }
  transposeIntoArray(e11) {
    const t19 = this.elements;
    return e11[0] = t19[0], e11[1] = t19[3], e11[2] = t19[6], e11[3] = t19[1], e11[4] = t19[4], e11[5] = t19[7], e11[6] = t19[2], e11[7] = t19[5], e11[8] = t19[8], this;
  }
  setUvTransform(e11, t19, n33, i27, s18, r24, o12) {
    const c27 = Math.cos(s18), l25 = Math.sin(s18);
    return this.set(
      n33 * c27,
      n33 * l25,
      -n33 * (c27 * r24 + l25 * o12) + r24 + e11,
      -i27 * l25,
      i27 * c27,
      -i27 * (-l25 * r24 + c27 * o12) + o12 + t19,
      0,
      0,
      1
    ), this;
  }
  //
  scale(e11, t19) {
    return this.premultiply(No.makeScale(e11, t19)), this;
  }
  rotate(e11) {
    return this.premultiply(No.makeRotation(-e11)), this;
  }
  translate(e11, t19) {
    return this.premultiply(No.makeTranslation(e11, t19)), this;
  }
  // for 2D Transforms
  makeTranslation(e11, t19) {
    return this.set(
      1,
      0,
      e11,
      0,
      1,
      t19,
      0,
      0,
      1
    ), this;
  }
  makeRotation(e11) {
    const t19 = Math.cos(e11), n33 = Math.sin(e11);
    return this.set(
      t19,
      -n33,
      0,
      n33,
      t19,
      0,
      0,
      0,
      1
    ), this;
  }
  makeScale(e11, t19) {
    return this.set(
      e11,
      0,
      0,
      0,
      t19,
      0,
      0,
      0,
      1
    ), this;
  }
  //
  equals(e11) {
    const t19 = this.elements, n33 = e11.elements;
    for (let i27 = 0; i27 < 9; i27++)
      if (t19[i27] !== n33[i27])
        return false;
    return true;
  }
  fromArray(e11, t19 = 0) {
    for (let n33 = 0; n33 < 9; n33++)
      this.elements[n33] = e11[n33 + t19];
    return this;
  }
  toArray(e11 = [], t19 = 0) {
    const n33 = this.elements;
    return e11[t19] = n33[0], e11[t19 + 1] = n33[1], e11[t19 + 2] = n33[2], e11[t19 + 3] = n33[3], e11[t19 + 4] = n33[4], e11[t19 + 5] = n33[5], e11[t19 + 6] = n33[6], e11[t19 + 7] = n33[7], e11[t19 + 8] = n33[8], e11;
  }
  clone() {
    return new this.constructor().fromArray(this.elements);
  }
};
var No = new Qe4();
function au(a22) {
  for (let e11 = a22.length - 1; e11 >= 0; --e11)
    if (a22[e11] >= 65535)
      return true;
  return false;
}
function nr3(a22) {
  return document.createElementNS("http://www.w3.org/1999/xhtml", a22);
}
function ys(a22) {
  return a22 < 0.04045 ? a22 * 0.0773993808 : Math.pow(a22 * 0.9478672986 + 0.0521327014, 2.4);
}
function Uo(a22) {
  return a22 < 31308e-7 ? a22 * 12.92 : 1.055 * Math.pow(a22, 0.41666) - 0.055;
}
var cd = new Qe4().fromArray([
  0.8224621,
  0.0331941,
  0.0170827,
  0.177538,
  0.9668058,
  0.0723974,
  -1e-7,
  1e-7,
  0.9105199
]);
var ud = new Qe4().fromArray([
  1.2249401,
  -0.0420569,
  -0.0196376,
  -0.2249404,
  1.0420571,
  -0.0786361,
  1e-7,
  0,
  1.0982735
]);
function hd(a22) {
  return a22.convertSRGBToLinear().applyMatrix3(ud);
}
function dd(a22) {
  return a22.applyMatrix3(cd).convertLinearToSRGB();
}
var fd = {
  [tr3]: (a22) => a22,
  [bn3]: (a22) => a22.convertSRGBToLinear(),
  [su]: hd
};
var pd = {
  [tr3]: (a22) => a22,
  [bn3]: (a22) => a22.convertLinearToSRGB(),
  [su]: dd
};
var rn3 = {
  enabled: false,
  get legacyMode() {
    return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."), !this.enabled;
  },
  set legacyMode(a22) {
    console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."), this.enabled = !a22;
  },
  get workingColorSpace() {
    return tr3;
  },
  set workingColorSpace(a22) {
    console.warn("THREE.ColorManagement: .workingColorSpace is readonly.");
  },
  convert: function(a22, e11, t19) {
    if (this.enabled === false || e11 === t19 || !e11 || !t19)
      return a22;
    const n33 = fd[e11], i27 = pd[t19];
    if (n33 === void 0 || i27 === void 0)
      throw new Error(`Unsupported color space conversion, "${e11}" to "${t19}".`);
    return i27(n33(a22));
  },
  fromWorkingColorSpace: function(a22, e11) {
    return this.convert(a22, this.workingColorSpace, e11);
  },
  toWorkingColorSpace: function(a22, e11) {
    return this.convert(a22, e11, this.workingColorSpace);
  }
};
var Ki;
var lu = class {
  static getDataURL(e11) {
    if (/^data:/i.test(e11.src) || typeof HTMLCanvasElement > "u")
      return e11.src;
    let t19;
    if (e11 instanceof HTMLCanvasElement)
      t19 = e11;
    else {
      Ki === void 0 && (Ki = nr3("canvas")), Ki.width = e11.width, Ki.height = e11.height;
      const n33 = Ki.getContext("2d");
      e11 instanceof ImageData ? n33.putImageData(e11, 0, 0) : n33.drawImage(e11, 0, 0, e11.width, e11.height), t19 = Ki;
    }
    return t19.width > 2048 || t19.height > 2048 ? (console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons", e11), t19.toDataURL("image/jpeg", 0.6)) : t19.toDataURL("image/png");
  }
  static sRGBToLinear(e11) {
    if (typeof HTMLImageElement < "u" && e11 instanceof HTMLImageElement || typeof HTMLCanvasElement < "u" && e11 instanceof HTMLCanvasElement || typeof ImageBitmap < "u" && e11 instanceof ImageBitmap) {
      const t19 = nr3("canvas");
      t19.width = e11.width, t19.height = e11.height;
      const n33 = t19.getContext("2d");
      n33.drawImage(e11, 0, 0, e11.width, e11.height);
      const i27 = n33.getImageData(0, 0, e11.width, e11.height), s18 = i27.data;
      for (let r24 = 0; r24 < s18.length; r24++)
        s18[r24] = ys(s18[r24] / 255) * 255;
      return n33.putImageData(i27, 0, 0), t19;
    } else if (e11.data) {
      const t19 = e11.data.slice(0);
      for (let n33 = 0; n33 < t19.length; n33++)
        t19 instanceof Uint8Array || t19 instanceof Uint8ClampedArray ? t19[n33] = Math.floor(ys(t19[n33] / 255) * 255) : t19[n33] = ys(t19[n33]);
      return {
        data: t19,
        width: e11.width,
        height: e11.height
      };
    } else
      return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."), e11;
  }
};
var cu = class {
  constructor(e11 = null) {
    this.isSource = true, this.uuid = Sn3(), this.data = e11, this.version = 0;
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string";
    if (!t19 && e11.images[this.uuid] !== void 0)
      return e11.images[this.uuid];
    const n33 = {
      uuid: this.uuid,
      url: ""
    }, i27 = this.data;
    if (i27 !== null) {
      let s18;
      if (Array.isArray(i27)) {
        s18 = [];
        for (let r24 = 0, o12 = i27.length; r24 < o12; r24++)
          i27[r24].isDataTexture ? s18.push(ko(i27[r24].image)) : s18.push(ko(i27[r24]));
      } else
        s18 = ko(i27);
      n33.url = s18;
    }
    return t19 || (e11.images[this.uuid] = n33), n33;
  }
};
function ko(a22) {
  return typeof HTMLImageElement < "u" && a22 instanceof HTMLImageElement || typeof HTMLCanvasElement < "u" && a22 instanceof HTMLCanvasElement || typeof ImageBitmap < "u" && a22 instanceof ImageBitmap ? lu.getDataURL(a22) : a22.data ? {
    data: Array.from(a22.data),
    width: a22.width,
    height: a22.height,
    type: a22.data.constructor.name
  } : (console.warn("THREE.Texture: Unable to serialize Texture."), {});
}
var md = 0;
var jt4 = class _jt extends Ni3 {
  constructor(e11 = _jt.DEFAULT_IMAGE, t19 = _jt.DEFAULT_MAPPING, n33 = Zt3, i27 = Zt3, s18 = Ht4, r24 = jn3, o12 = pn3, c27 = Ei3, l25 = _jt.DEFAULT_ANISOTROPY, u35 = Ci) {
    super(), this.isTexture = true, Object.defineProperty(this, "id", { value: md++ }), this.uuid = Sn3(), this.name = "", this.source = new cu(e11), this.mipmaps = [], this.mapping = t19, this.channel = 0, this.wrapS = n33, this.wrapT = i27, this.magFilter = s18, this.minFilter = r24, this.anisotropy = l25, this.format = o12, this.internalFormat = null, this.type = c27, this.offset = new We4(0, 0), this.repeat = new We4(1, 1), this.center = new We4(0, 0), this.rotation = 0, this.matrixAutoUpdate = true, this.matrix = new Qe4(), this.generateMipmaps = true, this.premultiplyAlpha = false, this.flipY = true, this.unpackAlignment = 4, this.encoding = u35, this.userData = {}, this.version = 0, this.onUpdate = null, this.isRenderTargetTexture = false, this.needsPMREMUpdate = false;
  }
  get image() {
    return this.source.data;
  }
  set image(e11 = null) {
    this.source.data = e11;
  }
  updateMatrix() {
    this.matrix.setUvTransform(this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    return this.name = e11.name, this.source = e11.source, this.mipmaps = e11.mipmaps.slice(0), this.mapping = e11.mapping, this.channel = e11.channel, this.wrapS = e11.wrapS, this.wrapT = e11.wrapT, this.magFilter = e11.magFilter, this.minFilter = e11.minFilter, this.anisotropy = e11.anisotropy, this.format = e11.format, this.internalFormat = e11.internalFormat, this.type = e11.type, this.offset.copy(e11.offset), this.repeat.copy(e11.repeat), this.center.copy(e11.center), this.rotation = e11.rotation, this.matrixAutoUpdate = e11.matrixAutoUpdate, this.matrix.copy(e11.matrix), this.generateMipmaps = e11.generateMipmaps, this.premultiplyAlpha = e11.premultiplyAlpha, this.flipY = e11.flipY, this.unpackAlignment = e11.unpackAlignment, this.encoding = e11.encoding, this.userData = JSON.parse(JSON.stringify(e11.userData)), this.needsUpdate = true, this;
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string";
    if (!t19 && e11.textures[this.uuid] !== void 0)
      return e11.textures[this.uuid];
    const n33 = {
      metadata: {
        version: 4.5,
        type: "Texture",
        generator: "Texture.toJSON"
      },
      uuid: this.uuid,
      name: this.name,
      image: this.source.toJSON(e11).uuid,
      mapping: this.mapping,
      channel: this.channel,
      repeat: [this.repeat.x, this.repeat.y],
      offset: [this.offset.x, this.offset.y],
      center: [this.center.x, this.center.y],
      rotation: this.rotation,
      wrap: [this.wrapS, this.wrapT],
      format: this.format,
      internalFormat: this.internalFormat,
      type: this.type,
      encoding: this.encoding,
      minFilter: this.minFilter,
      magFilter: this.magFilter,
      anisotropy: this.anisotropy,
      flipY: this.flipY,
      generateMipmaps: this.generateMipmaps,
      premultiplyAlpha: this.premultiplyAlpha,
      unpackAlignment: this.unpackAlignment
    };
    return Object.keys(this.userData).length > 0 && (n33.userData = this.userData), t19 || (e11.textures[this.uuid] = n33), n33;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
  transformUv(e11) {
    if (this.mapping !== eu)
      return e11;
    if (e11.applyMatrix3(this.matrix), e11.x < 0 || e11.x > 1)
      switch (this.wrapS) {
        case Rn3:
          e11.x = e11.x - Math.floor(e11.x);
          break;
        case Zt3:
          e11.x = e11.x < 0 ? 0 : 1;
          break;
        case to:
          Math.abs(Math.floor(e11.x) % 2) === 1 ? e11.x = Math.ceil(e11.x) - e11.x : e11.x = e11.x - Math.floor(e11.x);
          break;
      }
    if (e11.y < 0 || e11.y > 1)
      switch (this.wrapT) {
        case Rn3:
          e11.y = e11.y - Math.floor(e11.y);
          break;
        case Zt3:
          e11.y = e11.y < 0 ? 0 : 1;
          break;
        case to:
          Math.abs(Math.floor(e11.y) % 2) === 1 ? e11.y = Math.ceil(e11.y) - e11.y : e11.y = e11.y - Math.floor(e11.y);
          break;
      }
    return this.flipY && (e11.y = 1 - e11.y), e11;
  }
  set needsUpdate(e11) {
    e11 === true && (this.version++, this.source.needsUpdate = true);
  }
};
jt4.DEFAULT_IMAGE = null;
jt4.DEFAULT_MAPPING = eu;
jt4.DEFAULT_ANISOTROPY = 1;
var gt5 = class _gt {
  constructor(e11 = 0, t19 = 0, n33 = 0, i27 = 1) {
    _gt.prototype.isVector4 = true, this.x = e11, this.y = t19, this.z = n33, this.w = i27;
  }
  get width() {
    return this.z;
  }
  set width(e11) {
    this.z = e11;
  }
  get height() {
    return this.w;
  }
  set height(e11) {
    this.w = e11;
  }
  set(e11, t19, n33, i27) {
    return this.x = e11, this.y = t19, this.z = n33, this.w = i27, this;
  }
  setScalar(e11) {
    return this.x = e11, this.y = e11, this.z = e11, this.w = e11, this;
  }
  setX(e11) {
    return this.x = e11, this;
  }
  setY(e11) {
    return this.y = e11, this;
  }
  setZ(e11) {
    return this.z = e11, this;
  }
  setW(e11) {
    return this.w = e11, this;
  }
  setComponent(e11, t19) {
    switch (e11) {
      case 0:
        this.x = t19;
        break;
      case 1:
        this.y = t19;
        break;
      case 2:
        this.z = t19;
        break;
      case 3:
        this.w = t19;
        break;
      default:
        throw new Error("index is out of range: " + e11);
    }
    return this;
  }
  getComponent(e11) {
    switch (e11) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      case 2:
        return this.z;
      case 3:
        return this.w;
      default:
        throw new Error("index is out of range: " + e11);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y, this.z, this.w);
  }
  copy(e11) {
    return this.x = e11.x, this.y = e11.y, this.z = e11.z, this.w = e11.w !== void 0 ? e11.w : 1, this;
  }
  add(e11) {
    return this.x += e11.x, this.y += e11.y, this.z += e11.z, this.w += e11.w, this;
  }
  addScalar(e11) {
    return this.x += e11, this.y += e11, this.z += e11, this.w += e11, this;
  }
  addVectors(e11, t19) {
    return this.x = e11.x + t19.x, this.y = e11.y + t19.y, this.z = e11.z + t19.z, this.w = e11.w + t19.w, this;
  }
  addScaledVector(e11, t19) {
    return this.x += e11.x * t19, this.y += e11.y * t19, this.z += e11.z * t19, this.w += e11.w * t19, this;
  }
  sub(e11) {
    return this.x -= e11.x, this.y -= e11.y, this.z -= e11.z, this.w -= e11.w, this;
  }
  subScalar(e11) {
    return this.x -= e11, this.y -= e11, this.z -= e11, this.w -= e11, this;
  }
  subVectors(e11, t19) {
    return this.x = e11.x - t19.x, this.y = e11.y - t19.y, this.z = e11.z - t19.z, this.w = e11.w - t19.w, this;
  }
  multiply(e11) {
    return this.x *= e11.x, this.y *= e11.y, this.z *= e11.z, this.w *= e11.w, this;
  }
  multiplyScalar(e11) {
    return this.x *= e11, this.y *= e11, this.z *= e11, this.w *= e11, this;
  }
  applyMatrix4(e11) {
    const t19 = this.x, n33 = this.y, i27 = this.z, s18 = this.w, r24 = e11.elements;
    return this.x = r24[0] * t19 + r24[4] * n33 + r24[8] * i27 + r24[12] * s18, this.y = r24[1] * t19 + r24[5] * n33 + r24[9] * i27 + r24[13] * s18, this.z = r24[2] * t19 + r24[6] * n33 + r24[10] * i27 + r24[14] * s18, this.w = r24[3] * t19 + r24[7] * n33 + r24[11] * i27 + r24[15] * s18, this;
  }
  divideScalar(e11) {
    return this.multiplyScalar(1 / e11);
  }
  setAxisAngleFromQuaternion(e11) {
    this.w = 2 * Math.acos(e11.w);
    const t19 = Math.sqrt(1 - e11.w * e11.w);
    return t19 < 1e-4 ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = e11.x / t19, this.y = e11.y / t19, this.z = e11.z / t19), this;
  }
  setAxisAngleFromRotationMatrix(e11) {
    let t19, n33, i27, s18;
    const c27 = e11.elements, l25 = c27[0], u35 = c27[4], h26 = c27[8], d34 = c27[1], p26 = c27[5], g31 = c27[9], y33 = c27[2], m33 = c27[6], f39 = c27[10];
    if (Math.abs(u35 - d34) < 0.01 && Math.abs(h26 - y33) < 0.01 && Math.abs(g31 - m33) < 0.01) {
      if (Math.abs(u35 + d34) < 0.1 && Math.abs(h26 + y33) < 0.1 && Math.abs(g31 + m33) < 0.1 && Math.abs(l25 + p26 + f39 - 3) < 0.1)
        return this.set(1, 0, 0, 0), this;
      t19 = Math.PI;
      const b33 = (l25 + 1) / 2, w29 = (p26 + 1) / 2, S21 = (f39 + 1) / 2, D17 = (u35 + d34) / 4, N19 = (h26 + y33) / 4, I16 = (g31 + m33) / 4;
      return b33 > w29 && b33 > S21 ? b33 < 0.01 ? (n33 = 0, i27 = 0.707106781, s18 = 0.707106781) : (n33 = Math.sqrt(b33), i27 = D17 / n33, s18 = N19 / n33) : w29 > S21 ? w29 < 0.01 ? (n33 = 0.707106781, i27 = 0, s18 = 0.707106781) : (i27 = Math.sqrt(w29), n33 = D17 / i27, s18 = I16 / i27) : S21 < 0.01 ? (n33 = 0.707106781, i27 = 0.707106781, s18 = 0) : (s18 = Math.sqrt(S21), n33 = N19 / s18, i27 = I16 / s18), this.set(n33, i27, s18, t19), this;
    }
    let E24 = Math.sqrt((m33 - g31) * (m33 - g31) + (h26 - y33) * (h26 - y33) + (d34 - u35) * (d34 - u35));
    return Math.abs(E24) < 1e-3 && (E24 = 1), this.x = (m33 - g31) / E24, this.y = (h26 - y33) / E24, this.z = (d34 - u35) / E24, this.w = Math.acos((l25 + p26 + f39 - 1) / 2), this;
  }
  min(e11) {
    return this.x = Math.min(this.x, e11.x), this.y = Math.min(this.y, e11.y), this.z = Math.min(this.z, e11.z), this.w = Math.min(this.w, e11.w), this;
  }
  max(e11) {
    return this.x = Math.max(this.x, e11.x), this.y = Math.max(this.y, e11.y), this.z = Math.max(this.z, e11.z), this.w = Math.max(this.w, e11.w), this;
  }
  clamp(e11, t19) {
    return this.x = Math.max(e11.x, Math.min(t19.x, this.x)), this.y = Math.max(e11.y, Math.min(t19.y, this.y)), this.z = Math.max(e11.z, Math.min(t19.z, this.z)), this.w = Math.max(e11.w, Math.min(t19.w, this.w)), this;
  }
  clampScalar(e11, t19) {
    return this.x = Math.max(e11, Math.min(t19, this.x)), this.y = Math.max(e11, Math.min(t19, this.y)), this.z = Math.max(e11, Math.min(t19, this.z)), this.w = Math.max(e11, Math.min(t19, this.w)), this;
  }
  clampLength(e11, t19) {
    const n33 = this.length();
    return this.divideScalar(n33 || 1).multiplyScalar(Math.max(e11, Math.min(t19, n33)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this;
  }
  roundToZero() {
    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this;
  }
  dot(e11) {
    return this.x * e11.x + this.y * e11.y + this.z * e11.z + this.w * e11.w;
  }
  lengthSq() {
    return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  setLength(e11) {
    return this.normalize().multiplyScalar(e11);
  }
  lerp(e11, t19) {
    return this.x += (e11.x - this.x) * t19, this.y += (e11.y - this.y) * t19, this.z += (e11.z - this.z) * t19, this.w += (e11.w - this.w) * t19, this;
  }
  lerpVectors(e11, t19, n33) {
    return this.x = e11.x + (t19.x - e11.x) * n33, this.y = e11.y + (t19.y - e11.y) * n33, this.z = e11.z + (t19.z - e11.z) * n33, this.w = e11.w + (t19.w - e11.w) * n33, this;
  }
  equals(e11) {
    return e11.x === this.x && e11.y === this.y && e11.z === this.z && e11.w === this.w;
  }
  fromArray(e11, t19 = 0) {
    return this.x = e11[t19], this.y = e11[t19 + 1], this.z = e11[t19 + 2], this.w = e11[t19 + 3], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.x, e11[t19 + 1] = this.y, e11[t19 + 2] = this.z, e11[t19 + 3] = this.w, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.x = e11.getX(t19), this.y = e11.getY(t19), this.z = e11.getZ(t19), this.w = e11.getW(t19), this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this.z = Math.random(), this.w = Math.random(), this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y, yield this.z, yield this.w;
  }
};
var Li = class extends Ni3 {
  constructor(e11 = 1, t19 = 1, n33 = {}) {
    super(), this.isWebGLRenderTarget = true, this.width = e11, this.height = t19, this.depth = 1, this.scissor = new gt5(0, 0, e11, t19), this.scissorTest = false, this.viewport = new gt5(0, 0, e11, t19);
    const i27 = { width: e11, height: t19, depth: 1 };
    this.texture = new jt4(i27, n33.mapping, n33.wrapS, n33.wrapT, n33.magFilter, n33.minFilter, n33.format, n33.type, n33.anisotropy, n33.encoding), this.texture.isRenderTargetTexture = true, this.texture.flipY = false, this.texture.generateMipmaps = n33.generateMipmaps !== void 0 ? n33.generateMipmaps : false, this.texture.internalFormat = n33.internalFormat !== void 0 ? n33.internalFormat : null, this.texture.minFilter = n33.minFilter !== void 0 ? n33.minFilter : Ht4, this.depthBuffer = n33.depthBuffer !== void 0 ? n33.depthBuffer : true, this.stencilBuffer = n33.stencilBuffer !== void 0 ? n33.stencilBuffer : false, this.depthTexture = n33.depthTexture !== void 0 ? n33.depthTexture : null, this.samples = n33.samples !== void 0 ? n33.samples : 0;
  }
  setSize(e11, t19, n33 = 1) {
    (this.width !== e11 || this.height !== t19 || this.depth !== n33) && (this.width = e11, this.height = t19, this.depth = n33, this.texture.image.width = e11, this.texture.image.height = t19, this.texture.image.depth = n33, this.dispose()), this.viewport.set(0, 0, e11, t19), this.scissor.set(0, 0, e11, t19);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    this.width = e11.width, this.height = e11.height, this.depth = e11.depth, this.viewport.copy(e11.viewport), this.texture = e11.texture.clone(), this.texture.isRenderTargetTexture = true;
    const t19 = Object.assign({}, e11.texture.image);
    return this.texture.source = new cu(t19), this.depthBuffer = e11.depthBuffer, this.stencilBuffer = e11.stencilBuffer, e11.depthTexture !== null && (this.depthTexture = e11.depthTexture.clone()), this.samples = e11.samples, this;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
};
var uu = class extends jt4 {
  constructor(e11 = null, t19 = 1, n33 = 1, i27 = 1) {
    super(null), this.isDataArrayTexture = true, this.image = { data: e11, width: t19, height: n33, depth: i27 }, this.magFilter = Bt3, this.minFilter = Bt3, this.wrapR = Zt3, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1;
  }
};
var gd = class extends jt4 {
  constructor(e11 = null, t19 = 1, n33 = 1, i27 = 1) {
    super(null), this.isData3DTexture = true, this.image = { data: e11, width: t19, height: n33, depth: i27 }, this.magFilter = Bt3, this.minFilter = Bt3, this.wrapR = Zt3, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1;
  }
};
var qt3 = class {
  constructor(e11 = 0, t19 = 0, n33 = 0, i27 = 1) {
    this.isQuaternion = true, this._x = e11, this._y = t19, this._z = n33, this._w = i27;
  }
  static slerpFlat(e11, t19, n33, i27, s18, r24, o12) {
    let c27 = n33[i27 + 0], l25 = n33[i27 + 1], u35 = n33[i27 + 2], h26 = n33[i27 + 3];
    const d34 = s18[r24 + 0], p26 = s18[r24 + 1], g31 = s18[r24 + 2], y33 = s18[r24 + 3];
    if (o12 === 0) {
      e11[t19 + 0] = c27, e11[t19 + 1] = l25, e11[t19 + 2] = u35, e11[t19 + 3] = h26;
      return;
    }
    if (o12 === 1) {
      e11[t19 + 0] = d34, e11[t19 + 1] = p26, e11[t19 + 2] = g31, e11[t19 + 3] = y33;
      return;
    }
    if (h26 !== y33 || c27 !== d34 || l25 !== p26 || u35 !== g31) {
      let m33 = 1 - o12;
      const f39 = c27 * d34 + l25 * p26 + u35 * g31 + h26 * y33, E24 = f39 >= 0 ? 1 : -1, b33 = 1 - f39 * f39;
      if (b33 > Number.EPSILON) {
        const S21 = Math.sqrt(b33), D17 = Math.atan2(S21, f39 * E24);
        m33 = Math.sin(m33 * D17) / S21, o12 = Math.sin(o12 * D17) / S21;
      }
      const w29 = o12 * E24;
      if (c27 = c27 * m33 + d34 * w29, l25 = l25 * m33 + p26 * w29, u35 = u35 * m33 + g31 * w29, h26 = h26 * m33 + y33 * w29, m33 === 1 - o12) {
        const S21 = 1 / Math.sqrt(c27 * c27 + l25 * l25 + u35 * u35 + h26 * h26);
        c27 *= S21, l25 *= S21, u35 *= S21, h26 *= S21;
      }
    }
    e11[t19] = c27, e11[t19 + 1] = l25, e11[t19 + 2] = u35, e11[t19 + 3] = h26;
  }
  static multiplyQuaternionsFlat(e11, t19, n33, i27, s18, r24) {
    const o12 = n33[i27], c27 = n33[i27 + 1], l25 = n33[i27 + 2], u35 = n33[i27 + 3], h26 = s18[r24], d34 = s18[r24 + 1], p26 = s18[r24 + 2], g31 = s18[r24 + 3];
    return e11[t19] = o12 * g31 + u35 * h26 + c27 * p26 - l25 * d34, e11[t19 + 1] = c27 * g31 + u35 * d34 + l25 * h26 - o12 * p26, e11[t19 + 2] = l25 * g31 + u35 * p26 + o12 * d34 - c27 * h26, e11[t19 + 3] = u35 * g31 - o12 * h26 - c27 * d34 - l25 * p26, e11;
  }
  get x() {
    return this._x;
  }
  set x(e11) {
    this._x = e11, this._onChangeCallback();
  }
  get y() {
    return this._y;
  }
  set y(e11) {
    this._y = e11, this._onChangeCallback();
  }
  get z() {
    return this._z;
  }
  set z(e11) {
    this._z = e11, this._onChangeCallback();
  }
  get w() {
    return this._w;
  }
  set w(e11) {
    this._w = e11, this._onChangeCallback();
  }
  set(e11, t19, n33, i27) {
    return this._x = e11, this._y = t19, this._z = n33, this._w = i27, this._onChangeCallback(), this;
  }
  clone() {
    return new this.constructor(this._x, this._y, this._z, this._w);
  }
  copy(e11) {
    return this._x = e11.x, this._y = e11.y, this._z = e11.z, this._w = e11.w, this._onChangeCallback(), this;
  }
  setFromEuler(e11, t19) {
    const n33 = e11._x, i27 = e11._y, s18 = e11._z, r24 = e11._order, o12 = Math.cos, c27 = Math.sin, l25 = o12(n33 / 2), u35 = o12(i27 / 2), h26 = o12(s18 / 2), d34 = c27(n33 / 2), p26 = c27(i27 / 2), g31 = c27(s18 / 2);
    switch (r24) {
      case "XYZ":
        this._x = d34 * u35 * h26 + l25 * p26 * g31, this._y = l25 * p26 * h26 - d34 * u35 * g31, this._z = l25 * u35 * g31 + d34 * p26 * h26, this._w = l25 * u35 * h26 - d34 * p26 * g31;
        break;
      case "YXZ":
        this._x = d34 * u35 * h26 + l25 * p26 * g31, this._y = l25 * p26 * h26 - d34 * u35 * g31, this._z = l25 * u35 * g31 - d34 * p26 * h26, this._w = l25 * u35 * h26 + d34 * p26 * g31;
        break;
      case "ZXY":
        this._x = d34 * u35 * h26 - l25 * p26 * g31, this._y = l25 * p26 * h26 + d34 * u35 * g31, this._z = l25 * u35 * g31 + d34 * p26 * h26, this._w = l25 * u35 * h26 - d34 * p26 * g31;
        break;
      case "ZYX":
        this._x = d34 * u35 * h26 - l25 * p26 * g31, this._y = l25 * p26 * h26 + d34 * u35 * g31, this._z = l25 * u35 * g31 - d34 * p26 * h26, this._w = l25 * u35 * h26 + d34 * p26 * g31;
        break;
      case "YZX":
        this._x = d34 * u35 * h26 + l25 * p26 * g31, this._y = l25 * p26 * h26 + d34 * u35 * g31, this._z = l25 * u35 * g31 - d34 * p26 * h26, this._w = l25 * u35 * h26 - d34 * p26 * g31;
        break;
      case "XZY":
        this._x = d34 * u35 * h26 - l25 * p26 * g31, this._y = l25 * p26 * h26 - d34 * u35 * g31, this._z = l25 * u35 * g31 + d34 * p26 * h26, this._w = l25 * u35 * h26 + d34 * p26 * g31;
        break;
      default:
        console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: " + r24);
    }
    return t19 !== false && this._onChangeCallback(), this;
  }
  setFromAxisAngle(e11, t19) {
    const n33 = t19 / 2, i27 = Math.sin(n33);
    return this._x = e11.x * i27, this._y = e11.y * i27, this._z = e11.z * i27, this._w = Math.cos(n33), this._onChangeCallback(), this;
  }
  setFromRotationMatrix(e11) {
    const t19 = e11.elements, n33 = t19[0], i27 = t19[4], s18 = t19[8], r24 = t19[1], o12 = t19[5], c27 = t19[9], l25 = t19[2], u35 = t19[6], h26 = t19[10], d34 = n33 + o12 + h26;
    if (d34 > 0) {
      const p26 = 0.5 / Math.sqrt(d34 + 1);
      this._w = 0.25 / p26, this._x = (u35 - c27) * p26, this._y = (s18 - l25) * p26, this._z = (r24 - i27) * p26;
    } else if (n33 > o12 && n33 > h26) {
      const p26 = 2 * Math.sqrt(1 + n33 - o12 - h26);
      this._w = (u35 - c27) / p26, this._x = 0.25 * p26, this._y = (i27 + r24) / p26, this._z = (s18 + l25) / p26;
    } else if (o12 > h26) {
      const p26 = 2 * Math.sqrt(1 + o12 - n33 - h26);
      this._w = (s18 - l25) / p26, this._x = (i27 + r24) / p26, this._y = 0.25 * p26, this._z = (c27 + u35) / p26;
    } else {
      const p26 = 2 * Math.sqrt(1 + h26 - n33 - o12);
      this._w = (r24 - i27) / p26, this._x = (s18 + l25) / p26, this._y = (c27 + u35) / p26, this._z = 0.25 * p26;
    }
    return this._onChangeCallback(), this;
  }
  setFromUnitVectors(e11, t19) {
    let n33 = e11.dot(t19) + 1;
    return n33 < Number.EPSILON ? (n33 = 0, Math.abs(e11.x) > Math.abs(e11.z) ? (this._x = -e11.y, this._y = e11.x, this._z = 0, this._w = n33) : (this._x = 0, this._y = -e11.z, this._z = e11.y, this._w = n33)) : (this._x = e11.y * t19.z - e11.z * t19.y, this._y = e11.z * t19.x - e11.x * t19.z, this._z = e11.x * t19.y - e11.y * t19.x, this._w = n33), this.normalize();
  }
  angleTo(e11) {
    return 2 * Math.acos(Math.abs(Wt4(this.dot(e11), -1, 1)));
  }
  rotateTowards(e11, t19) {
    const n33 = this.angleTo(e11);
    if (n33 === 0)
      return this;
    const i27 = Math.min(1, t19 / n33);
    return this.slerp(e11, i27), this;
  }
  identity() {
    return this.set(0, 0, 0, 1);
  }
  invert() {
    return this.conjugate();
  }
  conjugate() {
    return this._x *= -1, this._y *= -1, this._z *= -1, this._onChangeCallback(), this;
  }
  dot(e11) {
    return this._x * e11._x + this._y * e11._y + this._z * e11._z + this._w * e11._w;
  }
  lengthSq() {
    return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;
  }
  length() {
    return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w);
  }
  normalize() {
    let e11 = this.length();
    return e11 === 0 ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (e11 = 1 / e11, this._x = this._x * e11, this._y = this._y * e11, this._z = this._z * e11, this._w = this._w * e11), this._onChangeCallback(), this;
  }
  multiply(e11) {
    return this.multiplyQuaternions(this, e11);
  }
  premultiply(e11) {
    return this.multiplyQuaternions(e11, this);
  }
  multiplyQuaternions(e11, t19) {
    const n33 = e11._x, i27 = e11._y, s18 = e11._z, r24 = e11._w, o12 = t19._x, c27 = t19._y, l25 = t19._z, u35 = t19._w;
    return this._x = n33 * u35 + r24 * o12 + i27 * l25 - s18 * c27, this._y = i27 * u35 + r24 * c27 + s18 * o12 - n33 * l25, this._z = s18 * u35 + r24 * l25 + n33 * c27 - i27 * o12, this._w = r24 * u35 - n33 * o12 - i27 * c27 - s18 * l25, this._onChangeCallback(), this;
  }
  slerp(e11, t19) {
    if (t19 === 0)
      return this;
    if (t19 === 1)
      return this.copy(e11);
    const n33 = this._x, i27 = this._y, s18 = this._z, r24 = this._w;
    let o12 = r24 * e11._w + n33 * e11._x + i27 * e11._y + s18 * e11._z;
    if (o12 < 0 ? (this._w = -e11._w, this._x = -e11._x, this._y = -e11._y, this._z = -e11._z, o12 = -o12) : this.copy(e11), o12 >= 1)
      return this._w = r24, this._x = n33, this._y = i27, this._z = s18, this;
    const c27 = 1 - o12 * o12;
    if (c27 <= Number.EPSILON) {
      const p26 = 1 - t19;
      return this._w = p26 * r24 + t19 * this._w, this._x = p26 * n33 + t19 * this._x, this._y = p26 * i27 + t19 * this._y, this._z = p26 * s18 + t19 * this._z, this.normalize(), this._onChangeCallback(), this;
    }
    const l25 = Math.sqrt(c27), u35 = Math.atan2(l25, o12), h26 = Math.sin((1 - t19) * u35) / l25, d34 = Math.sin(t19 * u35) / l25;
    return this._w = r24 * h26 + this._w * d34, this._x = n33 * h26 + this._x * d34, this._y = i27 * h26 + this._y * d34, this._z = s18 * h26 + this._z * d34, this._onChangeCallback(), this;
  }
  slerpQuaternions(e11, t19, n33) {
    return this.copy(e11).slerp(t19, n33);
  }
  random() {
    const e11 = Math.random(), t19 = Math.sqrt(1 - e11), n33 = Math.sqrt(e11), i27 = 2 * Math.PI * Math.random(), s18 = 2 * Math.PI * Math.random();
    return this.set(
      t19 * Math.cos(i27),
      n33 * Math.sin(s18),
      n33 * Math.cos(s18),
      t19 * Math.sin(i27)
    );
  }
  equals(e11) {
    return e11._x === this._x && e11._y === this._y && e11._z === this._z && e11._w === this._w;
  }
  fromArray(e11, t19 = 0) {
    return this._x = e11[t19], this._y = e11[t19 + 1], this._z = e11[t19 + 2], this._w = e11[t19 + 3], this._onChangeCallback(), this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this._x, e11[t19 + 1] = this._y, e11[t19 + 2] = this._z, e11[t19 + 3] = this._w, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this._x = e11.getX(t19), this._y = e11.getY(t19), this._z = e11.getZ(t19), this._w = e11.getW(t19), this;
  }
  toJSON() {
    return this.toArray();
  }
  _onChange(e11) {
    return this._onChangeCallback = e11, this;
  }
  _onChangeCallback() {
  }
  *[Symbol.iterator]() {
    yield this._x, yield this._y, yield this._z, yield this._w;
  }
};
var U7 = class _U {
  constructor(e11 = 0, t19 = 0, n33 = 0) {
    _U.prototype.isVector3 = true, this.x = e11, this.y = t19, this.z = n33;
  }
  set(e11, t19, n33) {
    return n33 === void 0 && (n33 = this.z), this.x = e11, this.y = t19, this.z = n33, this;
  }
  setScalar(e11) {
    return this.x = e11, this.y = e11, this.z = e11, this;
  }
  setX(e11) {
    return this.x = e11, this;
  }
  setY(e11) {
    return this.y = e11, this;
  }
  setZ(e11) {
    return this.z = e11, this;
  }
  setComponent(e11, t19) {
    switch (e11) {
      case 0:
        this.x = t19;
        break;
      case 1:
        this.y = t19;
        break;
      case 2:
        this.z = t19;
        break;
      default:
        throw new Error("index is out of range: " + e11);
    }
    return this;
  }
  getComponent(e11) {
    switch (e11) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      case 2:
        return this.z;
      default:
        throw new Error("index is out of range: " + e11);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y, this.z);
  }
  copy(e11) {
    return this.x = e11.x, this.y = e11.y, this.z = e11.z, this;
  }
  add(e11) {
    return this.x += e11.x, this.y += e11.y, this.z += e11.z, this;
  }
  addScalar(e11) {
    return this.x += e11, this.y += e11, this.z += e11, this;
  }
  addVectors(e11, t19) {
    return this.x = e11.x + t19.x, this.y = e11.y + t19.y, this.z = e11.z + t19.z, this;
  }
  addScaledVector(e11, t19) {
    return this.x += e11.x * t19, this.y += e11.y * t19, this.z += e11.z * t19, this;
  }
  sub(e11) {
    return this.x -= e11.x, this.y -= e11.y, this.z -= e11.z, this;
  }
  subScalar(e11) {
    return this.x -= e11, this.y -= e11, this.z -= e11, this;
  }
  subVectors(e11, t19) {
    return this.x = e11.x - t19.x, this.y = e11.y - t19.y, this.z = e11.z - t19.z, this;
  }
  multiply(e11) {
    return this.x *= e11.x, this.y *= e11.y, this.z *= e11.z, this;
  }
  multiplyScalar(e11) {
    return this.x *= e11, this.y *= e11, this.z *= e11, this;
  }
  multiplyVectors(e11, t19) {
    return this.x = e11.x * t19.x, this.y = e11.y * t19.y, this.z = e11.z * t19.z, this;
  }
  applyEuler(e11) {
    return this.applyQuaternion(Nl.setFromEuler(e11));
  }
  applyAxisAngle(e11, t19) {
    return this.applyQuaternion(Nl.setFromAxisAngle(e11, t19));
  }
  applyMatrix3(e11) {
    const t19 = this.x, n33 = this.y, i27 = this.z, s18 = e11.elements;
    return this.x = s18[0] * t19 + s18[3] * n33 + s18[6] * i27, this.y = s18[1] * t19 + s18[4] * n33 + s18[7] * i27, this.z = s18[2] * t19 + s18[5] * n33 + s18[8] * i27, this;
  }
  applyNormalMatrix(e11) {
    return this.applyMatrix3(e11).normalize();
  }
  applyMatrix4(e11) {
    const t19 = this.x, n33 = this.y, i27 = this.z, s18 = e11.elements, r24 = 1 / (s18[3] * t19 + s18[7] * n33 + s18[11] * i27 + s18[15]);
    return this.x = (s18[0] * t19 + s18[4] * n33 + s18[8] * i27 + s18[12]) * r24, this.y = (s18[1] * t19 + s18[5] * n33 + s18[9] * i27 + s18[13]) * r24, this.z = (s18[2] * t19 + s18[6] * n33 + s18[10] * i27 + s18[14]) * r24, this;
  }
  applyQuaternion(e11) {
    const t19 = this.x, n33 = this.y, i27 = this.z, s18 = e11.x, r24 = e11.y, o12 = e11.z, c27 = e11.w, l25 = c27 * t19 + r24 * i27 - o12 * n33, u35 = c27 * n33 + o12 * t19 - s18 * i27, h26 = c27 * i27 + s18 * n33 - r24 * t19, d34 = -s18 * t19 - r24 * n33 - o12 * i27;
    return this.x = l25 * c27 + d34 * -s18 + u35 * -o12 - h26 * -r24, this.y = u35 * c27 + d34 * -r24 + h26 * -s18 - l25 * -o12, this.z = h26 * c27 + d34 * -o12 + l25 * -r24 - u35 * -s18, this;
  }
  project(e11) {
    return this.applyMatrix4(e11.matrixWorldInverse).applyMatrix4(e11.projectionMatrix);
  }
  unproject(e11) {
    return this.applyMatrix4(e11.projectionMatrixInverse).applyMatrix4(e11.matrixWorld);
  }
  transformDirection(e11) {
    const t19 = this.x, n33 = this.y, i27 = this.z, s18 = e11.elements;
    return this.x = s18[0] * t19 + s18[4] * n33 + s18[8] * i27, this.y = s18[1] * t19 + s18[5] * n33 + s18[9] * i27, this.z = s18[2] * t19 + s18[6] * n33 + s18[10] * i27, this.normalize();
  }
  divide(e11) {
    return this.x /= e11.x, this.y /= e11.y, this.z /= e11.z, this;
  }
  divideScalar(e11) {
    return this.multiplyScalar(1 / e11);
  }
  min(e11) {
    return this.x = Math.min(this.x, e11.x), this.y = Math.min(this.y, e11.y), this.z = Math.min(this.z, e11.z), this;
  }
  max(e11) {
    return this.x = Math.max(this.x, e11.x), this.y = Math.max(this.y, e11.y), this.z = Math.max(this.z, e11.z), this;
  }
  clamp(e11, t19) {
    return this.x = Math.max(e11.x, Math.min(t19.x, this.x)), this.y = Math.max(e11.y, Math.min(t19.y, this.y)), this.z = Math.max(e11.z, Math.min(t19.z, this.z)), this;
  }
  clampScalar(e11, t19) {
    return this.x = Math.max(e11, Math.min(t19, this.x)), this.y = Math.max(e11, Math.min(t19, this.y)), this.z = Math.max(e11, Math.min(t19, this.z)), this;
  }
  clampLength(e11, t19) {
    const n33 = this.length();
    return this.divideScalar(n33 || 1).multiplyScalar(Math.max(e11, Math.min(t19, n33)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this;
  }
  roundToZero() {
    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this.z = -this.z, this;
  }
  dot(e11) {
    return this.x * e11.x + this.y * e11.y + this.z * e11.z;
  }
  // TODO lengthSquared?
  lengthSq() {
    return this.x * this.x + this.y * this.y + this.z * this.z;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  setLength(e11) {
    return this.normalize().multiplyScalar(e11);
  }
  lerp(e11, t19) {
    return this.x += (e11.x - this.x) * t19, this.y += (e11.y - this.y) * t19, this.z += (e11.z - this.z) * t19, this;
  }
  lerpVectors(e11, t19, n33) {
    return this.x = e11.x + (t19.x - e11.x) * n33, this.y = e11.y + (t19.y - e11.y) * n33, this.z = e11.z + (t19.z - e11.z) * n33, this;
  }
  cross(e11) {
    return this.crossVectors(this, e11);
  }
  crossVectors(e11, t19) {
    const n33 = e11.x, i27 = e11.y, s18 = e11.z, r24 = t19.x, o12 = t19.y, c27 = t19.z;
    return this.x = i27 * c27 - s18 * o12, this.y = s18 * r24 - n33 * c27, this.z = n33 * o12 - i27 * r24, this;
  }
  projectOnVector(e11) {
    const t19 = e11.lengthSq();
    if (t19 === 0)
      return this.set(0, 0, 0);
    const n33 = e11.dot(this) / t19;
    return this.copy(e11).multiplyScalar(n33);
  }
  projectOnPlane(e11) {
    return Oo.copy(this).projectOnVector(e11), this.sub(Oo);
  }
  reflect(e11) {
    return this.sub(Oo.copy(e11).multiplyScalar(2 * this.dot(e11)));
  }
  angleTo(e11) {
    const t19 = Math.sqrt(this.lengthSq() * e11.lengthSq());
    if (t19 === 0)
      return Math.PI / 2;
    const n33 = this.dot(e11) / t19;
    return Math.acos(Wt4(n33, -1, 1));
  }
  distanceTo(e11) {
    return Math.sqrt(this.distanceToSquared(e11));
  }
  distanceToSquared(e11) {
    const t19 = this.x - e11.x, n33 = this.y - e11.y, i27 = this.z - e11.z;
    return t19 * t19 + n33 * n33 + i27 * i27;
  }
  manhattanDistanceTo(e11) {
    return Math.abs(this.x - e11.x) + Math.abs(this.y - e11.y) + Math.abs(this.z - e11.z);
  }
  setFromSpherical(e11) {
    return this.setFromSphericalCoords(e11.radius, e11.phi, e11.theta);
  }
  setFromSphericalCoords(e11, t19, n33) {
    const i27 = Math.sin(t19) * e11;
    return this.x = i27 * Math.sin(n33), this.y = Math.cos(t19) * e11, this.z = i27 * Math.cos(n33), this;
  }
  setFromCylindrical(e11) {
    return this.setFromCylindricalCoords(e11.radius, e11.theta, e11.y);
  }
  setFromCylindricalCoords(e11, t19, n33) {
    return this.x = e11 * Math.sin(t19), this.y = n33, this.z = e11 * Math.cos(t19), this;
  }
  setFromMatrixPosition(e11) {
    const t19 = e11.elements;
    return this.x = t19[12], this.y = t19[13], this.z = t19[14], this;
  }
  setFromMatrixScale(e11) {
    const t19 = this.setFromMatrixColumn(e11, 0).length(), n33 = this.setFromMatrixColumn(e11, 1).length(), i27 = this.setFromMatrixColumn(e11, 2).length();
    return this.x = t19, this.y = n33, this.z = i27, this;
  }
  setFromMatrixColumn(e11, t19) {
    return this.fromArray(e11.elements, t19 * 4);
  }
  setFromMatrix3Column(e11, t19) {
    return this.fromArray(e11.elements, t19 * 3);
  }
  setFromEuler(e11) {
    return this.x = e11._x, this.y = e11._y, this.z = e11._z, this;
  }
  setFromColor(e11) {
    return this.x = e11.r, this.y = e11.g, this.z = e11.b, this;
  }
  equals(e11) {
    return e11.x === this.x && e11.y === this.y && e11.z === this.z;
  }
  fromArray(e11, t19 = 0) {
    return this.x = e11[t19], this.y = e11[t19 + 1], this.z = e11[t19 + 2], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.x, e11[t19 + 1] = this.y, e11[t19 + 2] = this.z, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.x = e11.getX(t19), this.y = e11.getY(t19), this.z = e11.getZ(t19), this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this.z = Math.random(), this;
  }
  randomDirection() {
    const e11 = (Math.random() - 0.5) * 2, t19 = Math.random() * Math.PI * 2, n33 = Math.sqrt(1 - e11 ** 2);
    return this.x = n33 * Math.cos(t19), this.y = n33 * Math.sin(t19), this.z = e11, this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y, yield this.z;
  }
};
var Oo = new U7();
var Nl = new qt3();
var qn3 = class {
  constructor(e11 = new U7(1 / 0, 1 / 0, 1 / 0), t19 = new U7(-1 / 0, -1 / 0, -1 / 0)) {
    this.isBox3 = true, this.min = e11, this.max = t19;
  }
  set(e11, t19) {
    return this.min.copy(e11), this.max.copy(t19), this;
  }
  setFromArray(e11) {
    this.makeEmpty();
    for (let t19 = 0, n33 = e11.length; t19 < n33; t19 += 3)
      this.expandByPoint(On3.fromArray(e11, t19));
    return this;
  }
  setFromBufferAttribute(e11) {
    this.makeEmpty();
    for (let t19 = 0, n33 = e11.count; t19 < n33; t19++)
      this.expandByPoint(On3.fromBufferAttribute(e11, t19));
    return this;
  }
  setFromPoints(e11) {
    this.makeEmpty();
    for (let t19 = 0, n33 = e11.length; t19 < n33; t19++)
      this.expandByPoint(e11[t19]);
    return this;
  }
  setFromCenterAndSize(e11, t19) {
    const n33 = On3.copy(t19).multiplyScalar(0.5);
    return this.min.copy(e11).sub(n33), this.max.copy(e11).add(n33), this;
  }
  setFromObject(e11, t19 = false) {
    return this.makeEmpty(), this.expandByObject(e11, t19);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    return this.min.copy(e11.min), this.max.copy(e11.max), this;
  }
  makeEmpty() {
    return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, this;
  }
  isEmpty() {
    return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z;
  }
  getCenter(e11) {
    return this.isEmpty() ? e11.set(0, 0, 0) : e11.addVectors(this.min, this.max).multiplyScalar(0.5);
  }
  getSize(e11) {
    return this.isEmpty() ? e11.set(0, 0, 0) : e11.subVectors(this.max, this.min);
  }
  expandByPoint(e11) {
    return this.min.min(e11), this.max.max(e11), this;
  }
  expandByVector(e11) {
    return this.min.sub(e11), this.max.add(e11), this;
  }
  expandByScalar(e11) {
    return this.min.addScalar(-e11), this.max.addScalar(e11), this;
  }
  expandByObject(e11, t19 = false) {
    if (e11.updateWorldMatrix(false, false), e11.boundingBox !== void 0)
      e11.boundingBox === null && e11.computeBoundingBox(), Yi.copy(e11.boundingBox), Yi.applyMatrix4(e11.matrixWorld), this.union(Yi);
    else {
      const i27 = e11.geometry;
      if (i27 !== void 0)
        if (t19 && i27.attributes !== void 0 && i27.attributes.position !== void 0) {
          const s18 = i27.attributes.position;
          for (let r24 = 0, o12 = s18.count; r24 < o12; r24++)
            On3.fromBufferAttribute(s18, r24).applyMatrix4(e11.matrixWorld), this.expandByPoint(On3);
        } else
          i27.boundingBox === null && i27.computeBoundingBox(), Yi.copy(i27.boundingBox), Yi.applyMatrix4(e11.matrixWorld), this.union(Yi);
    }
    const n33 = e11.children;
    for (let i27 = 0, s18 = n33.length; i27 < s18; i27++)
      this.expandByObject(n33[i27], t19);
    return this;
  }
  containsPoint(e11) {
    return !(e11.x < this.min.x || e11.x > this.max.x || e11.y < this.min.y || e11.y > this.max.y || e11.z < this.min.z || e11.z > this.max.z);
  }
  containsBox(e11) {
    return this.min.x <= e11.min.x && e11.max.x <= this.max.x && this.min.y <= e11.min.y && e11.max.y <= this.max.y && this.min.z <= e11.min.z && e11.max.z <= this.max.z;
  }
  getParameter(e11, t19) {
    return t19.set(
      (e11.x - this.min.x) / (this.max.x - this.min.x),
      (e11.y - this.min.y) / (this.max.y - this.min.y),
      (e11.z - this.min.z) / (this.max.z - this.min.z)
    );
  }
  intersectsBox(e11) {
    return !(e11.max.x < this.min.x || e11.min.x > this.max.x || e11.max.y < this.min.y || e11.min.y > this.max.y || e11.max.z < this.min.z || e11.min.z > this.max.z);
  }
  intersectsSphere(e11) {
    return this.clampPoint(e11.center, On3), On3.distanceToSquared(e11.center) <= e11.radius * e11.radius;
  }
  intersectsPlane(e11) {
    let t19, n33;
    return e11.normal.x > 0 ? (t19 = e11.normal.x * this.min.x, n33 = e11.normal.x * this.max.x) : (t19 = e11.normal.x * this.max.x, n33 = e11.normal.x * this.min.x), e11.normal.y > 0 ? (t19 += e11.normal.y * this.min.y, n33 += e11.normal.y * this.max.y) : (t19 += e11.normal.y * this.max.y, n33 += e11.normal.y * this.min.y), e11.normal.z > 0 ? (t19 += e11.normal.z * this.min.z, n33 += e11.normal.z * this.max.z) : (t19 += e11.normal.z * this.max.z, n33 += e11.normal.z * this.min.z), t19 <= -e11.constant && n33 >= -e11.constant;
  }
  intersectsTriangle(e11) {
    if (this.isEmpty())
      return false;
    this.getCenter(zs), vr3.subVectors(this.max, zs), Ji.subVectors(e11.a, zs), Zi.subVectors(e11.b, zs), $i3.subVectors(e11.c, zs), Jn3.subVectors(Zi, Ji), Zn3.subVectors($i3, Zi), pi3.subVectors(Ji, $i3);
    let t19 = [
      0,
      -Jn3.z,
      Jn3.y,
      0,
      -Zn3.z,
      Zn3.y,
      0,
      -pi3.z,
      pi3.y,
      Jn3.z,
      0,
      -Jn3.x,
      Zn3.z,
      0,
      -Zn3.x,
      pi3.z,
      0,
      -pi3.x,
      -Jn3.y,
      Jn3.x,
      0,
      -Zn3.y,
      Zn3.x,
      0,
      -pi3.y,
      pi3.x,
      0
    ];
    return !Fo(t19, Ji, Zi, $i3, vr3) || (t19 = [1, 0, 0, 0, 1, 0, 0, 0, 1], !Fo(t19, Ji, Zi, $i3, vr3)) ? false : (br3.crossVectors(Jn3, Zn3), t19 = [br3.x, br3.y, br3.z], Fo(t19, Ji, Zi, $i3, vr3));
  }
  clampPoint(e11, t19) {
    return t19.copy(e11).clamp(this.min, this.max);
  }
  distanceToPoint(e11) {
    return this.clampPoint(e11, On3).distanceTo(e11);
  }
  getBoundingSphere(e11) {
    return this.isEmpty() ? e11.makeEmpty() : (this.getCenter(e11.center), e11.radius = this.getSize(On3).length() * 0.5), e11;
  }
  intersect(e11) {
    return this.min.max(e11.min), this.max.min(e11.max), this.isEmpty() && this.makeEmpty(), this;
  }
  union(e11) {
    return this.min.min(e11.min), this.max.max(e11.max), this;
  }
  applyMatrix4(e11) {
    return this.isEmpty() ? this : (kn3[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(e11), kn3[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(e11), kn3[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(e11), kn3[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(e11), kn3[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(e11), kn3[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(e11), kn3[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(e11), kn3[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(e11), this.setFromPoints(kn3), this);
  }
  translate(e11) {
    return this.min.add(e11), this.max.add(e11), this;
  }
  equals(e11) {
    return e11.min.equals(this.min) && e11.max.equals(this.max);
  }
};
var kn3 = [
  new U7(),
  new U7(),
  new U7(),
  new U7(),
  new U7(),
  new U7(),
  new U7(),
  new U7()
];
var On3 = new U7();
var Yi = new qn3();
var Ji = new U7();
var Zi = new U7();
var $i3 = new U7();
var Jn3 = new U7();
var Zn3 = new U7();
var pi3 = new U7();
var zs = new U7();
var vr3 = new U7();
var br3 = new U7();
var mi3 = new U7();
function Fo(a22, e11, t19, n33, i27) {
  for (let s18 = 0, r24 = a22.length - 3; s18 <= r24; s18 += 3) {
    mi3.fromArray(a22, s18);
    const o12 = i27.x * Math.abs(mi3.x) + i27.y * Math.abs(mi3.y) + i27.z * Math.abs(mi3.z), c27 = e11.dot(mi3), l25 = t19.dot(mi3), u35 = n33.dot(mi3);
    if (Math.max(-Math.max(c27, l25, u35), Math.min(c27, l25, u35)) > o12)
      return false;
  }
  return true;
}
var _d = new qn3();
var Bs = new U7();
var zo = new U7();
var Xn3 = class {
  constructor(e11 = new U7(), t19 = -1) {
    this.center = e11, this.radius = t19;
  }
  set(e11, t19) {
    return this.center.copy(e11), this.radius = t19, this;
  }
  setFromPoints(e11, t19) {
    const n33 = this.center;
    t19 !== void 0 ? n33.copy(t19) : _d.setFromPoints(e11).getCenter(n33);
    let i27 = 0;
    for (let s18 = 0, r24 = e11.length; s18 < r24; s18++)
      i27 = Math.max(i27, n33.distanceToSquared(e11[s18]));
    return this.radius = Math.sqrt(i27), this;
  }
  copy(e11) {
    return this.center.copy(e11.center), this.radius = e11.radius, this;
  }
  isEmpty() {
    return this.radius < 0;
  }
  makeEmpty() {
    return this.center.set(0, 0, 0), this.radius = -1, this;
  }
  containsPoint(e11) {
    return e11.distanceToSquared(this.center) <= this.radius * this.radius;
  }
  distanceToPoint(e11) {
    return e11.distanceTo(this.center) - this.radius;
  }
  intersectsSphere(e11) {
    const t19 = this.radius + e11.radius;
    return e11.center.distanceToSquared(this.center) <= t19 * t19;
  }
  intersectsBox(e11) {
    return e11.intersectsSphere(this);
  }
  intersectsPlane(e11) {
    return Math.abs(e11.distanceToPoint(this.center)) <= this.radius;
  }
  clampPoint(e11, t19) {
    const n33 = this.center.distanceToSquared(e11);
    return t19.copy(e11), n33 > this.radius * this.radius && (t19.sub(this.center).normalize(), t19.multiplyScalar(this.radius).add(this.center)), t19;
  }
  getBoundingBox(e11) {
    return this.isEmpty() ? (e11.makeEmpty(), e11) : (e11.set(this.center, this.center), e11.expandByScalar(this.radius), e11);
  }
  applyMatrix4(e11) {
    return this.center.applyMatrix4(e11), this.radius = this.radius * e11.getMaxScaleOnAxis(), this;
  }
  translate(e11) {
    return this.center.add(e11), this;
  }
  expandByPoint(e11) {
    if (this.isEmpty())
      return this.center.copy(e11), this.radius = 0, this;
    Bs.subVectors(e11, this.center);
    const t19 = Bs.lengthSq();
    if (t19 > this.radius * this.radius) {
      const n33 = Math.sqrt(t19), i27 = (n33 - this.radius) * 0.5;
      this.center.addScaledVector(Bs, i27 / n33), this.radius += i27;
    }
    return this;
  }
  union(e11) {
    return e11.isEmpty() ? this : this.isEmpty() ? (this.copy(e11), this) : (this.center.equals(e11.center) === true ? this.radius = Math.max(this.radius, e11.radius) : (zo.subVectors(e11.center, this.center).setLength(e11.radius), this.expandByPoint(Bs.copy(e11.center).add(zo)), this.expandByPoint(Bs.copy(e11.center).sub(zo))), this);
  }
  equals(e11) {
    return e11.center.equals(this.center) && e11.radius === this.radius;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var Fn3 = new U7();
var Bo = new U7();
var Mr3 = new U7();
var $n3 = new U7();
var Vo = new U7();
var Sr3 = new U7();
var Go = new U7();
var La = class {
  constructor(e11 = new U7(), t19 = new U7(0, 0, -1)) {
    this.origin = e11, this.direction = t19;
  }
  set(e11, t19) {
    return this.origin.copy(e11), this.direction.copy(t19), this;
  }
  copy(e11) {
    return this.origin.copy(e11.origin), this.direction.copy(e11.direction), this;
  }
  at(e11, t19) {
    return t19.copy(this.origin).addScaledVector(this.direction, e11);
  }
  lookAt(e11) {
    return this.direction.copy(e11).sub(this.origin).normalize(), this;
  }
  recast(e11) {
    return this.origin.copy(this.at(e11, Fn3)), this;
  }
  closestPointToPoint(e11, t19) {
    t19.subVectors(e11, this.origin);
    const n33 = t19.dot(this.direction);
    return n33 < 0 ? t19.copy(this.origin) : t19.copy(this.origin).addScaledVector(this.direction, n33);
  }
  distanceToPoint(e11) {
    return Math.sqrt(this.distanceSqToPoint(e11));
  }
  distanceSqToPoint(e11) {
    const t19 = Fn3.subVectors(e11, this.origin).dot(this.direction);
    return t19 < 0 ? this.origin.distanceToSquared(e11) : (Fn3.copy(this.origin).addScaledVector(this.direction, t19), Fn3.distanceToSquared(e11));
  }
  distanceSqToSegment(e11, t19, n33, i27) {
    Bo.copy(e11).add(t19).multiplyScalar(0.5), Mr3.copy(t19).sub(e11).normalize(), $n3.copy(this.origin).sub(Bo);
    const s18 = e11.distanceTo(t19) * 0.5, r24 = -this.direction.dot(Mr3), o12 = $n3.dot(this.direction), c27 = -$n3.dot(Mr3), l25 = $n3.lengthSq(), u35 = Math.abs(1 - r24 * r24);
    let h26, d34, p26, g31;
    if (u35 > 0)
      if (h26 = r24 * c27 - o12, d34 = r24 * o12 - c27, g31 = s18 * u35, h26 >= 0)
        if (d34 >= -g31)
          if (d34 <= g31) {
            const y33 = 1 / u35;
            h26 *= y33, d34 *= y33, p26 = h26 * (h26 + r24 * d34 + 2 * o12) + d34 * (r24 * h26 + d34 + 2 * c27) + l25;
          } else
            d34 = s18, h26 = Math.max(0, -(r24 * d34 + o12)), p26 = -h26 * h26 + d34 * (d34 + 2 * c27) + l25;
        else
          d34 = -s18, h26 = Math.max(0, -(r24 * d34 + o12)), p26 = -h26 * h26 + d34 * (d34 + 2 * c27) + l25;
      else
        d34 <= -g31 ? (h26 = Math.max(0, -(-r24 * s18 + o12)), d34 = h26 > 0 ? -s18 : Math.min(Math.max(-s18, -c27), s18), p26 = -h26 * h26 + d34 * (d34 + 2 * c27) + l25) : d34 <= g31 ? (h26 = 0, d34 = Math.min(Math.max(-s18, -c27), s18), p26 = d34 * (d34 + 2 * c27) + l25) : (h26 = Math.max(0, -(r24 * s18 + o12)), d34 = h26 > 0 ? s18 : Math.min(Math.max(-s18, -c27), s18), p26 = -h26 * h26 + d34 * (d34 + 2 * c27) + l25);
    else
      d34 = r24 > 0 ? -s18 : s18, h26 = Math.max(0, -(r24 * d34 + o12)), p26 = -h26 * h26 + d34 * (d34 + 2 * c27) + l25;
    return n33 && n33.copy(this.origin).addScaledVector(this.direction, h26), i27 && i27.copy(Bo).addScaledVector(Mr3, d34), p26;
  }
  intersectSphere(e11, t19) {
    Fn3.subVectors(e11.center, this.origin);
    const n33 = Fn3.dot(this.direction), i27 = Fn3.dot(Fn3) - n33 * n33, s18 = e11.radius * e11.radius;
    if (i27 > s18)
      return null;
    const r24 = Math.sqrt(s18 - i27), o12 = n33 - r24, c27 = n33 + r24;
    return c27 < 0 ? null : o12 < 0 ? this.at(c27, t19) : this.at(o12, t19);
  }
  intersectsSphere(e11) {
    return this.distanceSqToPoint(e11.center) <= e11.radius * e11.radius;
  }
  distanceToPlane(e11) {
    const t19 = e11.normal.dot(this.direction);
    if (t19 === 0)
      return e11.distanceToPoint(this.origin) === 0 ? 0 : null;
    const n33 = -(this.origin.dot(e11.normal) + e11.constant) / t19;
    return n33 >= 0 ? n33 : null;
  }
  intersectPlane(e11, t19) {
    const n33 = this.distanceToPlane(e11);
    return n33 === null ? null : this.at(n33, t19);
  }
  intersectsPlane(e11) {
    const t19 = e11.distanceToPoint(this.origin);
    return t19 === 0 || e11.normal.dot(this.direction) * t19 < 0;
  }
  intersectBox(e11, t19) {
    let n33, i27, s18, r24, o12, c27;
    const l25 = 1 / this.direction.x, u35 = 1 / this.direction.y, h26 = 1 / this.direction.z, d34 = this.origin;
    return l25 >= 0 ? (n33 = (e11.min.x - d34.x) * l25, i27 = (e11.max.x - d34.x) * l25) : (n33 = (e11.max.x - d34.x) * l25, i27 = (e11.min.x - d34.x) * l25), u35 >= 0 ? (s18 = (e11.min.y - d34.y) * u35, r24 = (e11.max.y - d34.y) * u35) : (s18 = (e11.max.y - d34.y) * u35, r24 = (e11.min.y - d34.y) * u35), n33 > r24 || s18 > i27 || ((s18 > n33 || isNaN(n33)) && (n33 = s18), (r24 < i27 || isNaN(i27)) && (i27 = r24), h26 >= 0 ? (o12 = (e11.min.z - d34.z) * h26, c27 = (e11.max.z - d34.z) * h26) : (o12 = (e11.max.z - d34.z) * h26, c27 = (e11.min.z - d34.z) * h26), n33 > c27 || o12 > i27) || ((o12 > n33 || n33 !== n33) && (n33 = o12), (c27 < i27 || i27 !== i27) && (i27 = c27), i27 < 0) ? null : this.at(n33 >= 0 ? n33 : i27, t19);
  }
  intersectsBox(e11) {
    return this.intersectBox(e11, Fn3) !== null;
  }
  intersectTriangle(e11, t19, n33, i27, s18) {
    Vo.subVectors(t19, e11), Sr3.subVectors(n33, e11), Go.crossVectors(Vo, Sr3);
    let r24 = this.direction.dot(Go), o12;
    if (r24 > 0) {
      if (i27)
        return null;
      o12 = 1;
    } else if (r24 < 0)
      o12 = -1, r24 = -r24;
    else
      return null;
    $n3.subVectors(this.origin, e11);
    const c27 = o12 * this.direction.dot(Sr3.crossVectors($n3, Sr3));
    if (c27 < 0)
      return null;
    const l25 = o12 * this.direction.dot(Vo.cross($n3));
    if (l25 < 0 || c27 + l25 > r24)
      return null;
    const u35 = -o12 * $n3.dot(Go);
    return u35 < 0 ? null : this.at(u35 / r24, s18);
  }
  applyMatrix4(e11) {
    return this.origin.applyMatrix4(e11), this.direction.transformDirection(e11), this;
  }
  equals(e11) {
    return e11.origin.equals(this.origin) && e11.direction.equals(this.direction);
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var Ve4 = class _Ve {
  constructor() {
    _Ve.prototype.isMatrix4 = true, this.elements = [
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ];
  }
  set(e11, t19, n33, i27, s18, r24, o12, c27, l25, u35, h26, d34, p26, g31, y33, m33) {
    const f39 = this.elements;
    return f39[0] = e11, f39[4] = t19, f39[8] = n33, f39[12] = i27, f39[1] = s18, f39[5] = r24, f39[9] = o12, f39[13] = c27, f39[2] = l25, f39[6] = u35, f39[10] = h26, f39[14] = d34, f39[3] = p26, f39[7] = g31, f39[11] = y33, f39[15] = m33, this;
  }
  identity() {
    return this.set(
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  clone() {
    return new _Ve().fromArray(this.elements);
  }
  copy(e11) {
    const t19 = this.elements, n33 = e11.elements;
    return t19[0] = n33[0], t19[1] = n33[1], t19[2] = n33[2], t19[3] = n33[3], t19[4] = n33[4], t19[5] = n33[5], t19[6] = n33[6], t19[7] = n33[7], t19[8] = n33[8], t19[9] = n33[9], t19[10] = n33[10], t19[11] = n33[11], t19[12] = n33[12], t19[13] = n33[13], t19[14] = n33[14], t19[15] = n33[15], this;
  }
  copyPosition(e11) {
    const t19 = this.elements, n33 = e11.elements;
    return t19[12] = n33[12], t19[13] = n33[13], t19[14] = n33[14], this;
  }
  setFromMatrix3(e11) {
    const t19 = e11.elements;
    return this.set(
      t19[0],
      t19[3],
      t19[6],
      0,
      t19[1],
      t19[4],
      t19[7],
      0,
      t19[2],
      t19[5],
      t19[8],
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  extractBasis(e11, t19, n33) {
    return e11.setFromMatrixColumn(this, 0), t19.setFromMatrixColumn(this, 1), n33.setFromMatrixColumn(this, 2), this;
  }
  makeBasis(e11, t19, n33) {
    return this.set(
      e11.x,
      t19.x,
      n33.x,
      0,
      e11.y,
      t19.y,
      n33.y,
      0,
      e11.z,
      t19.z,
      n33.z,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  extractRotation(e11) {
    const t19 = this.elements, n33 = e11.elements, i27 = 1 / Qi.setFromMatrixColumn(e11, 0).length(), s18 = 1 / Qi.setFromMatrixColumn(e11, 1).length(), r24 = 1 / Qi.setFromMatrixColumn(e11, 2).length();
    return t19[0] = n33[0] * i27, t19[1] = n33[1] * i27, t19[2] = n33[2] * i27, t19[3] = 0, t19[4] = n33[4] * s18, t19[5] = n33[5] * s18, t19[6] = n33[6] * s18, t19[7] = 0, t19[8] = n33[8] * r24, t19[9] = n33[9] * r24, t19[10] = n33[10] * r24, t19[11] = 0, t19[12] = 0, t19[13] = 0, t19[14] = 0, t19[15] = 1, this;
  }
  makeRotationFromEuler(e11) {
    const t19 = this.elements, n33 = e11.x, i27 = e11.y, s18 = e11.z, r24 = Math.cos(n33), o12 = Math.sin(n33), c27 = Math.cos(i27), l25 = Math.sin(i27), u35 = Math.cos(s18), h26 = Math.sin(s18);
    if (e11.order === "XYZ") {
      const d34 = r24 * u35, p26 = r24 * h26, g31 = o12 * u35, y33 = o12 * h26;
      t19[0] = c27 * u35, t19[4] = -c27 * h26, t19[8] = l25, t19[1] = p26 + g31 * l25, t19[5] = d34 - y33 * l25, t19[9] = -o12 * c27, t19[2] = y33 - d34 * l25, t19[6] = g31 + p26 * l25, t19[10] = r24 * c27;
    } else if (e11.order === "YXZ") {
      const d34 = c27 * u35, p26 = c27 * h26, g31 = l25 * u35, y33 = l25 * h26;
      t19[0] = d34 + y33 * o12, t19[4] = g31 * o12 - p26, t19[8] = r24 * l25, t19[1] = r24 * h26, t19[5] = r24 * u35, t19[9] = -o12, t19[2] = p26 * o12 - g31, t19[6] = y33 + d34 * o12, t19[10] = r24 * c27;
    } else if (e11.order === "ZXY") {
      const d34 = c27 * u35, p26 = c27 * h26, g31 = l25 * u35, y33 = l25 * h26;
      t19[0] = d34 - y33 * o12, t19[4] = -r24 * h26, t19[8] = g31 + p26 * o12, t19[1] = p26 + g31 * o12, t19[5] = r24 * u35, t19[9] = y33 - d34 * o12, t19[2] = -r24 * l25, t19[6] = o12, t19[10] = r24 * c27;
    } else if (e11.order === "ZYX") {
      const d34 = r24 * u35, p26 = r24 * h26, g31 = o12 * u35, y33 = o12 * h26;
      t19[0] = c27 * u35, t19[4] = g31 * l25 - p26, t19[8] = d34 * l25 + y33, t19[1] = c27 * h26, t19[5] = y33 * l25 + d34, t19[9] = p26 * l25 - g31, t19[2] = -l25, t19[6] = o12 * c27, t19[10] = r24 * c27;
    } else if (e11.order === "YZX") {
      const d34 = r24 * c27, p26 = r24 * l25, g31 = o12 * c27, y33 = o12 * l25;
      t19[0] = c27 * u35, t19[4] = y33 - d34 * h26, t19[8] = g31 * h26 + p26, t19[1] = h26, t19[5] = r24 * u35, t19[9] = -o12 * u35, t19[2] = -l25 * u35, t19[6] = p26 * h26 + g31, t19[10] = d34 - y33 * h26;
    } else if (e11.order === "XZY") {
      const d34 = r24 * c27, p26 = r24 * l25, g31 = o12 * c27, y33 = o12 * l25;
      t19[0] = c27 * u35, t19[4] = -h26, t19[8] = l25 * u35, t19[1] = d34 * h26 + y33, t19[5] = r24 * u35, t19[9] = p26 * h26 - g31, t19[2] = g31 * h26 - p26, t19[6] = o12 * u35, t19[10] = y33 * h26 + d34;
    }
    return t19[3] = 0, t19[7] = 0, t19[11] = 0, t19[12] = 0, t19[13] = 0, t19[14] = 0, t19[15] = 1, this;
  }
  makeRotationFromQuaternion(e11) {
    return this.compose(xd, e11, yd);
  }
  lookAt(e11, t19, n33) {
    const i27 = this.elements;
    return on3.subVectors(e11, t19), on3.lengthSq() === 0 && (on3.z = 1), on3.normalize(), Qn3.crossVectors(n33, on3), Qn3.lengthSq() === 0 && (Math.abs(n33.z) === 1 ? on3.x += 1e-4 : on3.z += 1e-4, on3.normalize(), Qn3.crossVectors(n33, on3)), Qn3.normalize(), wr3.crossVectors(on3, Qn3), i27[0] = Qn3.x, i27[4] = wr3.x, i27[8] = on3.x, i27[1] = Qn3.y, i27[5] = wr3.y, i27[9] = on3.y, i27[2] = Qn3.z, i27[6] = wr3.z, i27[10] = on3.z, this;
  }
  multiply(e11) {
    return this.multiplyMatrices(this, e11);
  }
  premultiply(e11) {
    return this.multiplyMatrices(e11, this);
  }
  multiplyMatrices(e11, t19) {
    const n33 = e11.elements, i27 = t19.elements, s18 = this.elements, r24 = n33[0], o12 = n33[4], c27 = n33[8], l25 = n33[12], u35 = n33[1], h26 = n33[5], d34 = n33[9], p26 = n33[13], g31 = n33[2], y33 = n33[6], m33 = n33[10], f39 = n33[14], E24 = n33[3], b33 = n33[7], w29 = n33[11], S21 = n33[15], D17 = i27[0], N19 = i27[4], I16 = i27[8], v30 = i27[12], L11 = i27[1], G15 = i27[5], B21 = i27[9], k27 = i27[13], V14 = i27[2], H15 = i27[6], W8 = i27[10], te7 = i27[14], J11 = i27[3], ie8 = i27[7], le7 = i27[11], me9 = i27[15];
    return s18[0] = r24 * D17 + o12 * L11 + c27 * V14 + l25 * J11, s18[4] = r24 * N19 + o12 * G15 + c27 * H15 + l25 * ie8, s18[8] = r24 * I16 + o12 * B21 + c27 * W8 + l25 * le7, s18[12] = r24 * v30 + o12 * k27 + c27 * te7 + l25 * me9, s18[1] = u35 * D17 + h26 * L11 + d34 * V14 + p26 * J11, s18[5] = u35 * N19 + h26 * G15 + d34 * H15 + p26 * ie8, s18[9] = u35 * I16 + h26 * B21 + d34 * W8 + p26 * le7, s18[13] = u35 * v30 + h26 * k27 + d34 * te7 + p26 * me9, s18[2] = g31 * D17 + y33 * L11 + m33 * V14 + f39 * J11, s18[6] = g31 * N19 + y33 * G15 + m33 * H15 + f39 * ie8, s18[10] = g31 * I16 + y33 * B21 + m33 * W8 + f39 * le7, s18[14] = g31 * v30 + y33 * k27 + m33 * te7 + f39 * me9, s18[3] = E24 * D17 + b33 * L11 + w29 * V14 + S21 * J11, s18[7] = E24 * N19 + b33 * G15 + w29 * H15 + S21 * ie8, s18[11] = E24 * I16 + b33 * B21 + w29 * W8 + S21 * le7, s18[15] = E24 * v30 + b33 * k27 + w29 * te7 + S21 * me9, this;
  }
  multiplyScalar(e11) {
    const t19 = this.elements;
    return t19[0] *= e11, t19[4] *= e11, t19[8] *= e11, t19[12] *= e11, t19[1] *= e11, t19[5] *= e11, t19[9] *= e11, t19[13] *= e11, t19[2] *= e11, t19[6] *= e11, t19[10] *= e11, t19[14] *= e11, t19[3] *= e11, t19[7] *= e11, t19[11] *= e11, t19[15] *= e11, this;
  }
  determinant() {
    const e11 = this.elements, t19 = e11[0], n33 = e11[4], i27 = e11[8], s18 = e11[12], r24 = e11[1], o12 = e11[5], c27 = e11[9], l25 = e11[13], u35 = e11[2], h26 = e11[6], d34 = e11[10], p26 = e11[14], g31 = e11[3], y33 = e11[7], m33 = e11[11], f39 = e11[15];
    return g31 * (+s18 * c27 * h26 - i27 * l25 * h26 - s18 * o12 * d34 + n33 * l25 * d34 + i27 * o12 * p26 - n33 * c27 * p26) + y33 * (+t19 * c27 * p26 - t19 * l25 * d34 + s18 * r24 * d34 - i27 * r24 * p26 + i27 * l25 * u35 - s18 * c27 * u35) + m33 * (+t19 * l25 * h26 - t19 * o12 * p26 - s18 * r24 * h26 + n33 * r24 * p26 + s18 * o12 * u35 - n33 * l25 * u35) + f39 * (-i27 * o12 * u35 - t19 * c27 * h26 + t19 * o12 * d34 + i27 * r24 * h26 - n33 * r24 * d34 + n33 * c27 * u35);
  }
  transpose() {
    const e11 = this.elements;
    let t19;
    return t19 = e11[1], e11[1] = e11[4], e11[4] = t19, t19 = e11[2], e11[2] = e11[8], e11[8] = t19, t19 = e11[6], e11[6] = e11[9], e11[9] = t19, t19 = e11[3], e11[3] = e11[12], e11[12] = t19, t19 = e11[7], e11[7] = e11[13], e11[13] = t19, t19 = e11[11], e11[11] = e11[14], e11[14] = t19, this;
  }
  setPosition(e11, t19, n33) {
    const i27 = this.elements;
    return e11.isVector3 ? (i27[12] = e11.x, i27[13] = e11.y, i27[14] = e11.z) : (i27[12] = e11, i27[13] = t19, i27[14] = n33), this;
  }
  invert() {
    const e11 = this.elements, t19 = e11[0], n33 = e11[1], i27 = e11[2], s18 = e11[3], r24 = e11[4], o12 = e11[5], c27 = e11[6], l25 = e11[7], u35 = e11[8], h26 = e11[9], d34 = e11[10], p26 = e11[11], g31 = e11[12], y33 = e11[13], m33 = e11[14], f39 = e11[15], E24 = h26 * m33 * l25 - y33 * d34 * l25 + y33 * c27 * p26 - o12 * m33 * p26 - h26 * c27 * f39 + o12 * d34 * f39, b33 = g31 * d34 * l25 - u35 * m33 * l25 - g31 * c27 * p26 + r24 * m33 * p26 + u35 * c27 * f39 - r24 * d34 * f39, w29 = u35 * y33 * l25 - g31 * h26 * l25 + g31 * o12 * p26 - r24 * y33 * p26 - u35 * o12 * f39 + r24 * h26 * f39, S21 = g31 * h26 * c27 - u35 * y33 * c27 - g31 * o12 * d34 + r24 * y33 * d34 + u35 * o12 * m33 - r24 * h26 * m33, D17 = t19 * E24 + n33 * b33 + i27 * w29 + s18 * S21;
    if (D17 === 0)
      return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
    const N19 = 1 / D17;
    return e11[0] = E24 * N19, e11[1] = (y33 * d34 * s18 - h26 * m33 * s18 - y33 * i27 * p26 + n33 * m33 * p26 + h26 * i27 * f39 - n33 * d34 * f39) * N19, e11[2] = (o12 * m33 * s18 - y33 * c27 * s18 + y33 * i27 * l25 - n33 * m33 * l25 - o12 * i27 * f39 + n33 * c27 * f39) * N19, e11[3] = (h26 * c27 * s18 - o12 * d34 * s18 - h26 * i27 * l25 + n33 * d34 * l25 + o12 * i27 * p26 - n33 * c27 * p26) * N19, e11[4] = b33 * N19, e11[5] = (u35 * m33 * s18 - g31 * d34 * s18 + g31 * i27 * p26 - t19 * m33 * p26 - u35 * i27 * f39 + t19 * d34 * f39) * N19, e11[6] = (g31 * c27 * s18 - r24 * m33 * s18 - g31 * i27 * l25 + t19 * m33 * l25 + r24 * i27 * f39 - t19 * c27 * f39) * N19, e11[7] = (r24 * d34 * s18 - u35 * c27 * s18 + u35 * i27 * l25 - t19 * d34 * l25 - r24 * i27 * p26 + t19 * c27 * p26) * N19, e11[8] = w29 * N19, e11[9] = (g31 * h26 * s18 - u35 * y33 * s18 - g31 * n33 * p26 + t19 * y33 * p26 + u35 * n33 * f39 - t19 * h26 * f39) * N19, e11[10] = (r24 * y33 * s18 - g31 * o12 * s18 + g31 * n33 * l25 - t19 * y33 * l25 - r24 * n33 * f39 + t19 * o12 * f39) * N19, e11[11] = (u35 * o12 * s18 - r24 * h26 * s18 - u35 * n33 * l25 + t19 * h26 * l25 + r24 * n33 * p26 - t19 * o12 * p26) * N19, e11[12] = S21 * N19, e11[13] = (u35 * y33 * i27 - g31 * h26 * i27 + g31 * n33 * d34 - t19 * y33 * d34 - u35 * n33 * m33 + t19 * h26 * m33) * N19, e11[14] = (g31 * o12 * i27 - r24 * y33 * i27 - g31 * n33 * c27 + t19 * y33 * c27 + r24 * n33 * m33 - t19 * o12 * m33) * N19, e11[15] = (r24 * h26 * i27 - u35 * o12 * i27 + u35 * n33 * c27 - t19 * h26 * c27 - r24 * n33 * d34 + t19 * o12 * d34) * N19, this;
  }
  scale(e11) {
    const t19 = this.elements, n33 = e11.x, i27 = e11.y, s18 = e11.z;
    return t19[0] *= n33, t19[4] *= i27, t19[8] *= s18, t19[1] *= n33, t19[5] *= i27, t19[9] *= s18, t19[2] *= n33, t19[6] *= i27, t19[10] *= s18, t19[3] *= n33, t19[7] *= i27, t19[11] *= s18, this;
  }
  getMaxScaleOnAxis() {
    const e11 = this.elements, t19 = e11[0] * e11[0] + e11[1] * e11[1] + e11[2] * e11[2], n33 = e11[4] * e11[4] + e11[5] * e11[5] + e11[6] * e11[6], i27 = e11[8] * e11[8] + e11[9] * e11[9] + e11[10] * e11[10];
    return Math.sqrt(Math.max(t19, n33, i27));
  }
  makeTranslation(e11, t19, n33) {
    return this.set(
      1,
      0,
      0,
      e11,
      0,
      1,
      0,
      t19,
      0,
      0,
      1,
      n33,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationX(e11) {
    const t19 = Math.cos(e11), n33 = Math.sin(e11);
    return this.set(
      1,
      0,
      0,
      0,
      0,
      t19,
      -n33,
      0,
      0,
      n33,
      t19,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationY(e11) {
    const t19 = Math.cos(e11), n33 = Math.sin(e11);
    return this.set(
      t19,
      0,
      n33,
      0,
      0,
      1,
      0,
      0,
      -n33,
      0,
      t19,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationZ(e11) {
    const t19 = Math.cos(e11), n33 = Math.sin(e11);
    return this.set(
      t19,
      -n33,
      0,
      0,
      n33,
      t19,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationAxis(e11, t19) {
    const n33 = Math.cos(t19), i27 = Math.sin(t19), s18 = 1 - n33, r24 = e11.x, o12 = e11.y, c27 = e11.z, l25 = s18 * r24, u35 = s18 * o12;
    return this.set(
      l25 * r24 + n33,
      l25 * o12 - i27 * c27,
      l25 * c27 + i27 * o12,
      0,
      l25 * o12 + i27 * c27,
      u35 * o12 + n33,
      u35 * c27 - i27 * r24,
      0,
      l25 * c27 - i27 * o12,
      u35 * c27 + i27 * r24,
      s18 * c27 * c27 + n33,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeScale(e11, t19, n33) {
    return this.set(
      e11,
      0,
      0,
      0,
      0,
      t19,
      0,
      0,
      0,
      0,
      n33,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeShear(e11, t19, n33, i27, s18, r24) {
    return this.set(
      1,
      n33,
      s18,
      0,
      e11,
      1,
      r24,
      0,
      t19,
      i27,
      1,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  compose(e11, t19, n33) {
    const i27 = this.elements, s18 = t19._x, r24 = t19._y, o12 = t19._z, c27 = t19._w, l25 = s18 + s18, u35 = r24 + r24, h26 = o12 + o12, d34 = s18 * l25, p26 = s18 * u35, g31 = s18 * h26, y33 = r24 * u35, m33 = r24 * h26, f39 = o12 * h26, E24 = c27 * l25, b33 = c27 * u35, w29 = c27 * h26, S21 = n33.x, D17 = n33.y, N19 = n33.z;
    return i27[0] = (1 - (y33 + f39)) * S21, i27[1] = (p26 + w29) * S21, i27[2] = (g31 - b33) * S21, i27[3] = 0, i27[4] = (p26 - w29) * D17, i27[5] = (1 - (d34 + f39)) * D17, i27[6] = (m33 + E24) * D17, i27[7] = 0, i27[8] = (g31 + b33) * N19, i27[9] = (m33 - E24) * N19, i27[10] = (1 - (d34 + y33)) * N19, i27[11] = 0, i27[12] = e11.x, i27[13] = e11.y, i27[14] = e11.z, i27[15] = 1, this;
  }
  decompose(e11, t19, n33) {
    const i27 = this.elements;
    let s18 = Qi.set(i27[0], i27[1], i27[2]).length();
    const r24 = Qi.set(i27[4], i27[5], i27[6]).length(), o12 = Qi.set(i27[8], i27[9], i27[10]).length();
    this.determinant() < 0 && (s18 = -s18), e11.x = i27[12], e11.y = i27[13], e11.z = i27[14], xn3.copy(this);
    const l25 = 1 / s18, u35 = 1 / r24, h26 = 1 / o12;
    return xn3.elements[0] *= l25, xn3.elements[1] *= l25, xn3.elements[2] *= l25, xn3.elements[4] *= u35, xn3.elements[5] *= u35, xn3.elements[6] *= u35, xn3.elements[8] *= h26, xn3.elements[9] *= h26, xn3.elements[10] *= h26, t19.setFromRotationMatrix(xn3), n33.x = s18, n33.y = r24, n33.z = o12, this;
  }
  makePerspective(e11, t19, n33, i27, s18, r24) {
    const o12 = this.elements, c27 = 2 * s18 / (t19 - e11), l25 = 2 * s18 / (n33 - i27), u35 = (t19 + e11) / (t19 - e11), h26 = (n33 + i27) / (n33 - i27), d34 = -(r24 + s18) / (r24 - s18), p26 = -2 * r24 * s18 / (r24 - s18);
    return o12[0] = c27, o12[4] = 0, o12[8] = u35, o12[12] = 0, o12[1] = 0, o12[5] = l25, o12[9] = h26, o12[13] = 0, o12[2] = 0, o12[6] = 0, o12[10] = d34, o12[14] = p26, o12[3] = 0, o12[7] = 0, o12[11] = -1, o12[15] = 0, this;
  }
  makeOrthographic(e11, t19, n33, i27, s18, r24) {
    const o12 = this.elements, c27 = 1 / (t19 - e11), l25 = 1 / (n33 - i27), u35 = 1 / (r24 - s18), h26 = (t19 + e11) * c27, d34 = (n33 + i27) * l25, p26 = (r24 + s18) * u35;
    return o12[0] = 2 * c27, o12[4] = 0, o12[8] = 0, o12[12] = -h26, o12[1] = 0, o12[5] = 2 * l25, o12[9] = 0, o12[13] = -d34, o12[2] = 0, o12[6] = 0, o12[10] = -2 * u35, o12[14] = -p26, o12[3] = 0, o12[7] = 0, o12[11] = 0, o12[15] = 1, this;
  }
  equals(e11) {
    const t19 = this.elements, n33 = e11.elements;
    for (let i27 = 0; i27 < 16; i27++)
      if (t19[i27] !== n33[i27])
        return false;
    return true;
  }
  fromArray(e11, t19 = 0) {
    for (let n33 = 0; n33 < 16; n33++)
      this.elements[n33] = e11[n33 + t19];
    return this;
  }
  toArray(e11 = [], t19 = 0) {
    const n33 = this.elements;
    return e11[t19] = n33[0], e11[t19 + 1] = n33[1], e11[t19 + 2] = n33[2], e11[t19 + 3] = n33[3], e11[t19 + 4] = n33[4], e11[t19 + 5] = n33[5], e11[t19 + 6] = n33[6], e11[t19 + 7] = n33[7], e11[t19 + 8] = n33[8], e11[t19 + 9] = n33[9], e11[t19 + 10] = n33[10], e11[t19 + 11] = n33[11], e11[t19 + 12] = n33[12], e11[t19 + 13] = n33[13], e11[t19 + 14] = n33[14], e11[t19 + 15] = n33[15], e11;
  }
};
var Qi = new U7();
var xn3 = new Ve4();
var xd = new U7(0, 0, 0);
var yd = new U7(1, 1, 1);
var Qn3 = new U7();
var wr3 = new U7();
var on3 = new U7();
var Ul = new Ve4();
var kl = new qt3();
var Ds = class _Ds {
  constructor(e11 = 0, t19 = 0, n33 = 0, i27 = _Ds.DEFAULT_ORDER) {
    this.isEuler = true, this._x = e11, this._y = t19, this._z = n33, this._order = i27;
  }
  get x() {
    return this._x;
  }
  set x(e11) {
    this._x = e11, this._onChangeCallback();
  }
  get y() {
    return this._y;
  }
  set y(e11) {
    this._y = e11, this._onChangeCallback();
  }
  get z() {
    return this._z;
  }
  set z(e11) {
    this._z = e11, this._onChangeCallback();
  }
  get order() {
    return this._order;
  }
  set order(e11) {
    this._order = e11, this._onChangeCallback();
  }
  set(e11, t19, n33, i27 = this._order) {
    return this._x = e11, this._y = t19, this._z = n33, this._order = i27, this._onChangeCallback(), this;
  }
  clone() {
    return new this.constructor(this._x, this._y, this._z, this._order);
  }
  copy(e11) {
    return this._x = e11._x, this._y = e11._y, this._z = e11._z, this._order = e11._order, this._onChangeCallback(), this;
  }
  setFromRotationMatrix(e11, t19 = this._order, n33 = true) {
    const i27 = e11.elements, s18 = i27[0], r24 = i27[4], o12 = i27[8], c27 = i27[1], l25 = i27[5], u35 = i27[9], h26 = i27[2], d34 = i27[6], p26 = i27[10];
    switch (t19) {
      case "XYZ":
        this._y = Math.asin(Wt4(o12, -1, 1)), Math.abs(o12) < 0.9999999 ? (this._x = Math.atan2(-u35, p26), this._z = Math.atan2(-r24, s18)) : (this._x = Math.atan2(d34, l25), this._z = 0);
        break;
      case "YXZ":
        this._x = Math.asin(-Wt4(u35, -1, 1)), Math.abs(u35) < 0.9999999 ? (this._y = Math.atan2(o12, p26), this._z = Math.atan2(c27, l25)) : (this._y = Math.atan2(-h26, s18), this._z = 0);
        break;
      case "ZXY":
        this._x = Math.asin(Wt4(d34, -1, 1)), Math.abs(d34) < 0.9999999 ? (this._y = Math.atan2(-h26, p26), this._z = Math.atan2(-r24, l25)) : (this._y = 0, this._z = Math.atan2(c27, s18));
        break;
      case "ZYX":
        this._y = Math.asin(-Wt4(h26, -1, 1)), Math.abs(h26) < 0.9999999 ? (this._x = Math.atan2(d34, p26), this._z = Math.atan2(c27, s18)) : (this._x = 0, this._z = Math.atan2(-r24, l25));
        break;
      case "YZX":
        this._z = Math.asin(Wt4(c27, -1, 1)), Math.abs(c27) < 0.9999999 ? (this._x = Math.atan2(-u35, l25), this._y = Math.atan2(-h26, s18)) : (this._x = 0, this._y = Math.atan2(o12, p26));
        break;
      case "XZY":
        this._z = Math.asin(-Wt4(r24, -1, 1)), Math.abs(r24) < 0.9999999 ? (this._x = Math.atan2(d34, l25), this._y = Math.atan2(o12, s18)) : (this._x = Math.atan2(-u35, p26), this._y = 0);
        break;
      default:
        console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: " + t19);
    }
    return this._order = t19, n33 === true && this._onChangeCallback(), this;
  }
  setFromQuaternion(e11, t19, n33) {
    return Ul.makeRotationFromQuaternion(e11), this.setFromRotationMatrix(Ul, t19, n33);
  }
  setFromVector3(e11, t19 = this._order) {
    return this.set(e11.x, e11.y, e11.z, t19);
  }
  reorder(e11) {
    return kl.setFromEuler(this), this.setFromQuaternion(kl, e11);
  }
  equals(e11) {
    return e11._x === this._x && e11._y === this._y && e11._z === this._z && e11._order === this._order;
  }
  fromArray(e11) {
    return this._x = e11[0], this._y = e11[1], this._z = e11[2], e11[3] !== void 0 && (this._order = e11[3]), this._onChangeCallback(), this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this._x, e11[t19 + 1] = this._y, e11[t19 + 2] = this._z, e11[t19 + 3] = this._order, e11;
  }
  _onChange(e11) {
    return this._onChangeCallback = e11, this;
  }
  _onChangeCallback() {
  }
  *[Symbol.iterator]() {
    yield this._x, yield this._y, yield this._z, yield this._order;
  }
};
Ds.DEFAULT_ORDER = "XYZ";
var hu = class {
  constructor() {
    this.mask = 1;
  }
  set(e11) {
    this.mask = (1 << e11 | 0) >>> 0;
  }
  enable(e11) {
    this.mask |= 1 << e11 | 0;
  }
  enableAll() {
    this.mask = -1;
  }
  toggle(e11) {
    this.mask ^= 1 << e11 | 0;
  }
  disable(e11) {
    this.mask &= ~(1 << e11 | 0);
  }
  disableAll() {
    this.mask = 0;
  }
  test(e11) {
    return (this.mask & e11.mask) !== 0;
  }
  isEnabled(e11) {
    return (this.mask & (1 << e11 | 0)) !== 0;
  }
};
var vd = 0;
var Ol = new U7();
var es = new qt3();
var zn3 = new Ve4();
var Tr3 = new U7();
var Vs = new U7();
var bd = new U7();
var Md = new qt3();
var Fl = new U7(1, 0, 0);
var zl = new U7(0, 1, 0);
var Bl = new U7(0, 0, 1);
var Sd = { type: "added" };
var Vl = { type: "removed" };
var _t3 = class __t extends Ni3 {
  constructor() {
    super(), this.isObject3D = true, Object.defineProperty(this, "id", { value: vd++ }), this.uuid = Sn3(), this.name = "", this.type = "Object3D", this.parent = null, this.children = [], this.up = __t.DEFAULT_UP.clone();
    const e11 = new U7(), t19 = new Ds(), n33 = new qt3(), i27 = new U7(1, 1, 1);
    function s18() {
      n33.setFromEuler(t19, false);
    }
    function r24() {
      t19.setFromQuaternion(n33, void 0, false);
    }
    t19._onChange(s18), n33._onChange(r24), Object.defineProperties(this, {
      position: {
        configurable: true,
        enumerable: true,
        value: e11
      },
      rotation: {
        configurable: true,
        enumerable: true,
        value: t19
      },
      quaternion: {
        configurable: true,
        enumerable: true,
        value: n33
      },
      scale: {
        configurable: true,
        enumerable: true,
        value: i27
      },
      modelViewMatrix: {
        value: new Ve4()
      },
      normalMatrix: {
        value: new Qe4()
      }
    }), this.matrix = new Ve4(), this.matrixWorld = new Ve4(), this.matrixAutoUpdate = __t.DEFAULT_MATRIX_AUTO_UPDATE, this.matrixWorldNeedsUpdate = false, this.matrixWorldAutoUpdate = __t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE, this.layers = new hu(), this.visible = true, this.castShadow = false, this.receiveShadow = false, this.frustumCulled = true, this.renderOrder = 0, this.animations = [], this.userData = {};
  }
  onBeforeRender() {
  }
  onAfterRender() {
  }
  applyMatrix4(e11) {
    this.matrixAutoUpdate && this.updateMatrix(), this.matrix.premultiply(e11), this.matrix.decompose(this.position, this.quaternion, this.scale);
  }
  applyQuaternion(e11) {
    return this.quaternion.premultiply(e11), this;
  }
  setRotationFromAxisAngle(e11, t19) {
    this.quaternion.setFromAxisAngle(e11, t19);
  }
  setRotationFromEuler(e11) {
    this.quaternion.setFromEuler(e11, true);
  }
  setRotationFromMatrix(e11) {
    this.quaternion.setFromRotationMatrix(e11);
  }
  setRotationFromQuaternion(e11) {
    this.quaternion.copy(e11);
  }
  rotateOnAxis(e11, t19) {
    return es.setFromAxisAngle(e11, t19), this.quaternion.multiply(es), this;
  }
  rotateOnWorldAxis(e11, t19) {
    return es.setFromAxisAngle(e11, t19), this.quaternion.premultiply(es), this;
  }
  rotateX(e11) {
    return this.rotateOnAxis(Fl, e11);
  }
  rotateY(e11) {
    return this.rotateOnAxis(zl, e11);
  }
  rotateZ(e11) {
    return this.rotateOnAxis(Bl, e11);
  }
  translateOnAxis(e11, t19) {
    return Ol.copy(e11).applyQuaternion(this.quaternion), this.position.add(Ol.multiplyScalar(t19)), this;
  }
  translateX(e11) {
    return this.translateOnAxis(Fl, e11);
  }
  translateY(e11) {
    return this.translateOnAxis(zl, e11);
  }
  translateZ(e11) {
    return this.translateOnAxis(Bl, e11);
  }
  localToWorld(e11) {
    return this.updateWorldMatrix(true, false), e11.applyMatrix4(this.matrixWorld);
  }
  worldToLocal(e11) {
    return this.updateWorldMatrix(true, false), e11.applyMatrix4(zn3.copy(this.matrixWorld).invert());
  }
  lookAt(e11, t19, n33) {
    e11.isVector3 ? Tr3.copy(e11) : Tr3.set(e11, t19, n33);
    const i27 = this.parent;
    this.updateWorldMatrix(true, false), Vs.setFromMatrixPosition(this.matrixWorld), this.isCamera || this.isLight ? zn3.lookAt(Vs, Tr3, this.up) : zn3.lookAt(Tr3, Vs, this.up), this.quaternion.setFromRotationMatrix(zn3), i27 && (zn3.extractRotation(i27.matrixWorld), es.setFromRotationMatrix(zn3), this.quaternion.premultiply(es.invert()));
  }
  add(e11) {
    if (arguments.length > 1) {
      for (let t19 = 0; t19 < arguments.length; t19++)
        this.add(arguments[t19]);
      return this;
    }
    return e11 === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", e11), this) : (e11 && e11.isObject3D ? (e11.parent !== null && e11.parent.remove(e11), e11.parent = this, this.children.push(e11), e11.dispatchEvent(Sd)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", e11), this);
  }
  remove(e11) {
    if (arguments.length > 1) {
      for (let n33 = 0; n33 < arguments.length; n33++)
        this.remove(arguments[n33]);
      return this;
    }
    const t19 = this.children.indexOf(e11);
    return t19 !== -1 && (e11.parent = null, this.children.splice(t19, 1), e11.dispatchEvent(Vl)), this;
  }
  removeFromParent() {
    const e11 = this.parent;
    return e11 !== null && e11.remove(this), this;
  }
  clear() {
    for (let e11 = 0; e11 < this.children.length; e11++) {
      const t19 = this.children[e11];
      t19.parent = null, t19.dispatchEvent(Vl);
    }
    return this.children.length = 0, this;
  }
  attach(e11) {
    return this.updateWorldMatrix(true, false), zn3.copy(this.matrixWorld).invert(), e11.parent !== null && (e11.parent.updateWorldMatrix(true, false), zn3.multiply(e11.parent.matrixWorld)), e11.applyMatrix4(zn3), this.add(e11), e11.updateWorldMatrix(false, true), this;
  }
  getObjectById(e11) {
    return this.getObjectByProperty("id", e11);
  }
  getObjectByName(e11) {
    return this.getObjectByProperty("name", e11);
  }
  getObjectByProperty(e11, t19) {
    if (this[e11] === t19)
      return this;
    for (let n33 = 0, i27 = this.children.length; n33 < i27; n33++) {
      const r24 = this.children[n33].getObjectByProperty(e11, t19);
      if (r24 !== void 0)
        return r24;
    }
  }
  getObjectsByProperty(e11, t19) {
    let n33 = [];
    this[e11] === t19 && n33.push(this);
    for (let i27 = 0, s18 = this.children.length; i27 < s18; i27++) {
      const r24 = this.children[i27].getObjectsByProperty(e11, t19);
      r24.length > 0 && (n33 = n33.concat(r24));
    }
    return n33;
  }
  getWorldPosition(e11) {
    return this.updateWorldMatrix(true, false), e11.setFromMatrixPosition(this.matrixWorld);
  }
  getWorldQuaternion(e11) {
    return this.updateWorldMatrix(true, false), this.matrixWorld.decompose(Vs, e11, bd), e11;
  }
  getWorldScale(e11) {
    return this.updateWorldMatrix(true, false), this.matrixWorld.decompose(Vs, Md, e11), e11;
  }
  getWorldDirection(e11) {
    this.updateWorldMatrix(true, false);
    const t19 = this.matrixWorld.elements;
    return e11.set(t19[8], t19[9], t19[10]).normalize();
  }
  raycast() {
  }
  traverse(e11) {
    e11(this);
    const t19 = this.children;
    for (let n33 = 0, i27 = t19.length; n33 < i27; n33++)
      t19[n33].traverse(e11);
  }
  traverseVisible(e11) {
    if (this.visible === false)
      return;
    e11(this);
    const t19 = this.children;
    for (let n33 = 0, i27 = t19.length; n33 < i27; n33++)
      t19[n33].traverseVisible(e11);
  }
  traverseAncestors(e11) {
    const t19 = this.parent;
    t19 !== null && (e11(t19), t19.traverseAncestors(e11));
  }
  updateMatrix() {
    this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = true;
  }
  updateMatrixWorld(e11) {
    this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || e11) && (this.parent === null ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = false, e11 = true);
    const t19 = this.children;
    for (let n33 = 0, i27 = t19.length; n33 < i27; n33++) {
      const s18 = t19[n33];
      (s18.matrixWorldAutoUpdate === true || e11 === true) && s18.updateMatrixWorld(e11);
    }
  }
  updateWorldMatrix(e11, t19) {
    const n33 = this.parent;
    if (e11 === true && n33 !== null && n33.matrixWorldAutoUpdate === true && n33.updateWorldMatrix(true, false), this.matrixAutoUpdate && this.updateMatrix(), this.parent === null ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), t19 === true) {
      const i27 = this.children;
      for (let s18 = 0, r24 = i27.length; s18 < r24; s18++) {
        const o12 = i27[s18];
        o12.matrixWorldAutoUpdate === true && o12.updateWorldMatrix(false, true);
      }
    }
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string", n33 = {};
    t19 && (e11 = {
      geometries: {},
      materials: {},
      textures: {},
      images: {},
      shapes: {},
      skeletons: {},
      animations: {},
      nodes: {}
    }, n33.metadata = {
      version: 4.5,
      type: "Object",
      generator: "Object3D.toJSON"
    });
    const i27 = {};
    i27.uuid = this.uuid, i27.type = this.type, this.name !== "" && (i27.name = this.name), this.castShadow === true && (i27.castShadow = true), this.receiveShadow === true && (i27.receiveShadow = true), this.visible === false && (i27.visible = false), this.frustumCulled === false && (i27.frustumCulled = false), this.renderOrder !== 0 && (i27.renderOrder = this.renderOrder), Object.keys(this.userData).length > 0 && (i27.userData = this.userData), i27.layers = this.layers.mask, i27.matrix = this.matrix.toArray(), i27.up = this.up.toArray(), this.matrixAutoUpdate === false && (i27.matrixAutoUpdate = false), this.isInstancedMesh && (i27.type = "InstancedMesh", i27.count = this.count, i27.instanceMatrix = this.instanceMatrix.toJSON(), this.instanceColor !== null && (i27.instanceColor = this.instanceColor.toJSON()));
    function s18(o12, c27) {
      return o12[c27.uuid] === void 0 && (o12[c27.uuid] = c27.toJSON(e11)), c27.uuid;
    }
    if (this.isScene)
      this.background && (this.background.isColor ? i27.background = this.background.toJSON() : this.background.isTexture && (i27.background = this.background.toJSON(e11).uuid)), this.environment && this.environment.isTexture && this.environment.isRenderTargetTexture !== true && (i27.environment = this.environment.toJSON(e11).uuid);
    else if (this.isMesh || this.isLine || this.isPoints) {
      i27.geometry = s18(e11.geometries, this.geometry);
      const o12 = this.geometry.parameters;
      if (o12 !== void 0 && o12.shapes !== void 0) {
        const c27 = o12.shapes;
        if (Array.isArray(c27))
          for (let l25 = 0, u35 = c27.length; l25 < u35; l25++) {
            const h26 = c27[l25];
            s18(e11.shapes, h26);
          }
        else
          s18(e11.shapes, c27);
      }
    }
    if (this.isSkinnedMesh && (i27.bindMode = this.bindMode, i27.bindMatrix = this.bindMatrix.toArray(), this.skeleton !== void 0 && (s18(e11.skeletons, this.skeleton), i27.skeleton = this.skeleton.uuid)), this.material !== void 0)
      if (Array.isArray(this.material)) {
        const o12 = [];
        for (let c27 = 0, l25 = this.material.length; c27 < l25; c27++)
          o12.push(s18(e11.materials, this.material[c27]));
        i27.material = o12;
      } else
        i27.material = s18(e11.materials, this.material);
    if (this.children.length > 0) {
      i27.children = [];
      for (let o12 = 0; o12 < this.children.length; o12++)
        i27.children.push(this.children[o12].toJSON(e11).object);
    }
    if (this.animations.length > 0) {
      i27.animations = [];
      for (let o12 = 0; o12 < this.animations.length; o12++) {
        const c27 = this.animations[o12];
        i27.animations.push(s18(e11.animations, c27));
      }
    }
    if (t19) {
      const o12 = r24(e11.geometries), c27 = r24(e11.materials), l25 = r24(e11.textures), u35 = r24(e11.images), h26 = r24(e11.shapes), d34 = r24(e11.skeletons), p26 = r24(e11.animations), g31 = r24(e11.nodes);
      o12.length > 0 && (n33.geometries = o12), c27.length > 0 && (n33.materials = c27), l25.length > 0 && (n33.textures = l25), u35.length > 0 && (n33.images = u35), h26.length > 0 && (n33.shapes = h26), d34.length > 0 && (n33.skeletons = d34), p26.length > 0 && (n33.animations = p26), g31.length > 0 && (n33.nodes = g31);
    }
    return n33.object = i27, n33;
    function r24(o12) {
      const c27 = [];
      for (const l25 in o12) {
        const u35 = o12[l25];
        delete u35.metadata, c27.push(u35);
      }
      return c27;
    }
  }
  clone(e11) {
    return new this.constructor().copy(this, e11);
  }
  copy(e11, t19 = true) {
    if (this.name = e11.name, this.up.copy(e11.up), this.position.copy(e11.position), this.rotation.order = e11.rotation.order, this.quaternion.copy(e11.quaternion), this.scale.copy(e11.scale), this.matrix.copy(e11.matrix), this.matrixWorld.copy(e11.matrixWorld), this.matrixAutoUpdate = e11.matrixAutoUpdate, this.matrixWorldNeedsUpdate = e11.matrixWorldNeedsUpdate, this.matrixWorldAutoUpdate = e11.matrixWorldAutoUpdate, this.layers.mask = e11.layers.mask, this.visible = e11.visible, this.castShadow = e11.castShadow, this.receiveShadow = e11.receiveShadow, this.frustumCulled = e11.frustumCulled, this.renderOrder = e11.renderOrder, this.userData = JSON.parse(JSON.stringify(e11.userData)), t19 === true)
      for (let n33 = 0; n33 < e11.children.length; n33++) {
        const i27 = e11.children[n33];
        this.add(i27.clone());
      }
    return this;
  }
};
_t3.DEFAULT_UP = new U7(0, 1, 0);
_t3.DEFAULT_MATRIX_AUTO_UPDATE = true;
_t3.DEFAULT_MATRIX_WORLD_AUTO_UPDATE = true;
var yn3 = new U7();
var Bn3 = new U7();
var Ho = new U7();
var Vn3 = new U7();
var ts = new U7();
var ns = new U7();
var Gl = new U7();
var Wo = new U7();
var jo = new U7();
var qo = new U7();
var Ar3 = false;
var dn3 = class _dn {
  constructor(e11 = new U7(), t19 = new U7(), n33 = new U7()) {
    this.a = e11, this.b = t19, this.c = n33;
  }
  static getNormal(e11, t19, n33, i27) {
    i27.subVectors(n33, t19), yn3.subVectors(e11, t19), i27.cross(yn3);
    const s18 = i27.lengthSq();
    return s18 > 0 ? i27.multiplyScalar(1 / Math.sqrt(s18)) : i27.set(0, 0, 0);
  }
  // static/instance method to calculate barycentric coordinates
  // based on: http://www.blackpawn.com/texts/pointinpoly/default.html
  static getBarycoord(e11, t19, n33, i27, s18) {
    yn3.subVectors(i27, t19), Bn3.subVectors(n33, t19), Ho.subVectors(e11, t19);
    const r24 = yn3.dot(yn3), o12 = yn3.dot(Bn3), c27 = yn3.dot(Ho), l25 = Bn3.dot(Bn3), u35 = Bn3.dot(Ho), h26 = r24 * l25 - o12 * o12;
    if (h26 === 0)
      return s18.set(-2, -1, -1);
    const d34 = 1 / h26, p26 = (l25 * c27 - o12 * u35) * d34, g31 = (r24 * u35 - o12 * c27) * d34;
    return s18.set(1 - p26 - g31, g31, p26);
  }
  static containsPoint(e11, t19, n33, i27) {
    return this.getBarycoord(e11, t19, n33, i27, Vn3), Vn3.x >= 0 && Vn3.y >= 0 && Vn3.x + Vn3.y <= 1;
  }
  static getUV(e11, t19, n33, i27, s18, r24, o12, c27) {
    return Ar3 === false && (console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."), Ar3 = true), this.getInterpolation(e11, t19, n33, i27, s18, r24, o12, c27);
  }
  static getInterpolation(e11, t19, n33, i27, s18, r24, o12, c27) {
    return this.getBarycoord(e11, t19, n33, i27, Vn3), c27.setScalar(0), c27.addScaledVector(s18, Vn3.x), c27.addScaledVector(r24, Vn3.y), c27.addScaledVector(o12, Vn3.z), c27;
  }
  static isFrontFacing(e11, t19, n33, i27) {
    return yn3.subVectors(n33, t19), Bn3.subVectors(e11, t19), yn3.cross(Bn3).dot(i27) < 0;
  }
  set(e11, t19, n33) {
    return this.a.copy(e11), this.b.copy(t19), this.c.copy(n33), this;
  }
  setFromPointsAndIndices(e11, t19, n33, i27) {
    return this.a.copy(e11[t19]), this.b.copy(e11[n33]), this.c.copy(e11[i27]), this;
  }
  setFromAttributeAndIndices(e11, t19, n33, i27) {
    return this.a.fromBufferAttribute(e11, t19), this.b.fromBufferAttribute(e11, n33), this.c.fromBufferAttribute(e11, i27), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    return this.a.copy(e11.a), this.b.copy(e11.b), this.c.copy(e11.c), this;
  }
  getArea() {
    return yn3.subVectors(this.c, this.b), Bn3.subVectors(this.a, this.b), yn3.cross(Bn3).length() * 0.5;
  }
  getMidpoint(e11) {
    return e11.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3);
  }
  getNormal(e11) {
    return _dn.getNormal(this.a, this.b, this.c, e11);
  }
  getPlane(e11) {
    return e11.setFromCoplanarPoints(this.a, this.b, this.c);
  }
  getBarycoord(e11, t19) {
    return _dn.getBarycoord(e11, this.a, this.b, this.c, t19);
  }
  getUV(e11, t19, n33, i27, s18) {
    return Ar3 === false && (console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."), Ar3 = true), _dn.getInterpolation(e11, this.a, this.b, this.c, t19, n33, i27, s18);
  }
  getInterpolation(e11, t19, n33, i27, s18) {
    return _dn.getInterpolation(e11, this.a, this.b, this.c, t19, n33, i27, s18);
  }
  containsPoint(e11) {
    return _dn.containsPoint(e11, this.a, this.b, this.c);
  }
  isFrontFacing(e11) {
    return _dn.isFrontFacing(this.a, this.b, this.c, e11);
  }
  intersectsBox(e11) {
    return e11.intersectsTriangle(this);
  }
  closestPointToPoint(e11, t19) {
    const n33 = this.a, i27 = this.b, s18 = this.c;
    let r24, o12;
    ts.subVectors(i27, n33), ns.subVectors(s18, n33), Wo.subVectors(e11, n33);
    const c27 = ts.dot(Wo), l25 = ns.dot(Wo);
    if (c27 <= 0 && l25 <= 0)
      return t19.copy(n33);
    jo.subVectors(e11, i27);
    const u35 = ts.dot(jo), h26 = ns.dot(jo);
    if (u35 >= 0 && h26 <= u35)
      return t19.copy(i27);
    const d34 = c27 * h26 - u35 * l25;
    if (d34 <= 0 && c27 >= 0 && u35 <= 0)
      return r24 = c27 / (c27 - u35), t19.copy(n33).addScaledVector(ts, r24);
    qo.subVectors(e11, s18);
    const p26 = ts.dot(qo), g31 = ns.dot(qo);
    if (g31 >= 0 && p26 <= g31)
      return t19.copy(s18);
    const y33 = p26 * l25 - c27 * g31;
    if (y33 <= 0 && l25 >= 0 && g31 <= 0)
      return o12 = l25 / (l25 - g31), t19.copy(n33).addScaledVector(ns, o12);
    const m33 = u35 * g31 - p26 * h26;
    if (m33 <= 0 && h26 - u35 >= 0 && p26 - g31 >= 0)
      return Gl.subVectors(s18, i27), o12 = (h26 - u35) / (h26 - u35 + (p26 - g31)), t19.copy(i27).addScaledVector(Gl, o12);
    const f39 = 1 / (m33 + y33 + d34);
    return r24 = y33 * f39, o12 = d34 * f39, t19.copy(n33).addScaledVector(ts, r24).addScaledVector(ns, o12);
  }
  equals(e11) {
    return e11.a.equals(this.a) && e11.b.equals(this.b) && e11.c.equals(this.c);
  }
};
var wd = 0;
var mn3 = class extends Ni3 {
  constructor() {
    super(), this.isMaterial = true, Object.defineProperty(this, "id", { value: wd++ }), this.uuid = Sn3(), this.name = "", this.type = "Material", this.blending = gs, this.side = Pn3, this.vertexColors = false, this.opacity = 1, this.transparent = false, this.blendSrc = $c, this.blendDst = Qc, this.blendEquation = fs, this.blendSrcAlpha = null, this.blendDstAlpha = null, this.blendEquationAlpha = null, this.depthFunc = ha, this.depthTest = true, this.depthWrite = true, this.stencilWriteMask = 255, this.stencilFunc = Yh, this.stencilRef = 0, this.stencilFuncMask = 255, this.stencilFail = Do, this.stencilZFail = Do, this.stencilZPass = Do, this.stencilWrite = false, this.clippingPlanes = null, this.clipIntersection = false, this.clipShadows = false, this.shadowSide = null, this.colorWrite = true, this.precision = null, this.polygonOffset = false, this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.dithering = false, this.alphaToCoverage = false, this.premultipliedAlpha = false, this.forceSinglePass = false, this.visible = true, this.toneMapped = true, this.userData = {}, this.version = 0, this._alphaTest = 0;
  }
  get alphaTest() {
    return this._alphaTest;
  }
  set alphaTest(e11) {
    this._alphaTest > 0 != e11 > 0 && this.version++, this._alphaTest = e11;
  }
  onBuild() {
  }
  onBeforeRender() {
  }
  onBeforeCompile() {
  }
  customProgramCacheKey() {
    return this.onBeforeCompile.toString();
  }
  setValues(e11) {
    if (e11 !== void 0)
      for (const t19 in e11) {
        const n33 = e11[t19];
        if (n33 === void 0) {
          console.warn(`THREE.Material: parameter '${t19}' has value of undefined.`);
          continue;
        }
        const i27 = this[t19];
        if (i27 === void 0) {
          console.warn(`THREE.Material: '${t19}' is not a property of THREE.${this.type}.`);
          continue;
        }
        i27 && i27.isColor ? i27.set(n33) : i27 && i27.isVector3 && n33 && n33.isVector3 ? i27.copy(n33) : this[t19] = n33;
      }
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string";
    t19 && (e11 = {
      textures: {},
      images: {}
    });
    const n33 = {
      metadata: {
        version: 4.5,
        type: "Material",
        generator: "Material.toJSON"
      }
    };
    n33.uuid = this.uuid, n33.type = this.type, this.name !== "" && (n33.name = this.name), this.color && this.color.isColor && (n33.color = this.color.getHex()), this.roughness !== void 0 && (n33.roughness = this.roughness), this.metalness !== void 0 && (n33.metalness = this.metalness), this.sheen !== void 0 && (n33.sheen = this.sheen), this.sheenColor && this.sheenColor.isColor && (n33.sheenColor = this.sheenColor.getHex()), this.sheenRoughness !== void 0 && (n33.sheenRoughness = this.sheenRoughness), this.emissive && this.emissive.isColor && (n33.emissive = this.emissive.getHex()), this.emissiveIntensity && this.emissiveIntensity !== 1 && (n33.emissiveIntensity = this.emissiveIntensity), this.specular && this.specular.isColor && (n33.specular = this.specular.getHex()), this.specularIntensity !== void 0 && (n33.specularIntensity = this.specularIntensity), this.specularColor && this.specularColor.isColor && (n33.specularColor = this.specularColor.getHex()), this.shininess !== void 0 && (n33.shininess = this.shininess), this.clearcoat !== void 0 && (n33.clearcoat = this.clearcoat), this.clearcoatRoughness !== void 0 && (n33.clearcoatRoughness = this.clearcoatRoughness), this.clearcoatMap && this.clearcoatMap.isTexture && (n33.clearcoatMap = this.clearcoatMap.toJSON(e11).uuid), this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture && (n33.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON(e11).uuid), this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture && (n33.clearcoatNormalMap = this.clearcoatNormalMap.toJSON(e11).uuid, n33.clearcoatNormalScale = this.clearcoatNormalScale.toArray()), this.iridescence !== void 0 && (n33.iridescence = this.iridescence), this.iridescenceIOR !== void 0 && (n33.iridescenceIOR = this.iridescenceIOR), this.iridescenceThicknessRange !== void 0 && (n33.iridescenceThicknessRange = this.iridescenceThicknessRange), this.iridescenceMap && this.iridescenceMap.isTexture && (n33.iridescenceMap = this.iridescenceMap.toJSON(e11).uuid), this.iridescenceThicknessMap && this.iridescenceThicknessMap.isTexture && (n33.iridescenceThicknessMap = this.iridescenceThicknessMap.toJSON(e11).uuid), this.map && this.map.isTexture && (n33.map = this.map.toJSON(e11).uuid), this.matcap && this.matcap.isTexture && (n33.matcap = this.matcap.toJSON(e11).uuid), this.alphaMap && this.alphaMap.isTexture && (n33.alphaMap = this.alphaMap.toJSON(e11).uuid), this.lightMap && this.lightMap.isTexture && (n33.lightMap = this.lightMap.toJSON(e11).uuid, n33.lightMapIntensity = this.lightMapIntensity), this.aoMap && this.aoMap.isTexture && (n33.aoMap = this.aoMap.toJSON(e11).uuid, n33.aoMapIntensity = this.aoMapIntensity), this.bumpMap && this.bumpMap.isTexture && (n33.bumpMap = this.bumpMap.toJSON(e11).uuid, n33.bumpScale = this.bumpScale), this.normalMap && this.normalMap.isTexture && (n33.normalMap = this.normalMap.toJSON(e11).uuid, n33.normalMapType = this.normalMapType, n33.normalScale = this.normalScale.toArray()), this.displacementMap && this.displacementMap.isTexture && (n33.displacementMap = this.displacementMap.toJSON(e11).uuid, n33.displacementScale = this.displacementScale, n33.displacementBias = this.displacementBias), this.roughnessMap && this.roughnessMap.isTexture && (n33.roughnessMap = this.roughnessMap.toJSON(e11).uuid), this.metalnessMap && this.metalnessMap.isTexture && (n33.metalnessMap = this.metalnessMap.toJSON(e11).uuid), this.emissiveMap && this.emissiveMap.isTexture && (n33.emissiveMap = this.emissiveMap.toJSON(e11).uuid), this.specularMap && this.specularMap.isTexture && (n33.specularMap = this.specularMap.toJSON(e11).uuid), this.specularIntensityMap && this.specularIntensityMap.isTexture && (n33.specularIntensityMap = this.specularIntensityMap.toJSON(e11).uuid), this.specularColorMap && this.specularColorMap.isTexture && (n33.specularColorMap = this.specularColorMap.toJSON(e11).uuid), this.envMap && this.envMap.isTexture && (n33.envMap = this.envMap.toJSON(e11).uuid, this.combine !== void 0 && (n33.combine = this.combine)), this.envMapIntensity !== void 0 && (n33.envMapIntensity = this.envMapIntensity), this.reflectivity !== void 0 && (n33.reflectivity = this.reflectivity), this.refractionRatio !== void 0 && (n33.refractionRatio = this.refractionRatio), this.gradientMap && this.gradientMap.isTexture && (n33.gradientMap = this.gradientMap.toJSON(e11).uuid), this.transmission !== void 0 && (n33.transmission = this.transmission), this.transmissionMap && this.transmissionMap.isTexture && (n33.transmissionMap = this.transmissionMap.toJSON(e11).uuid), this.thickness !== void 0 && (n33.thickness = this.thickness), this.thicknessMap && this.thicknessMap.isTexture && (n33.thicknessMap = this.thicknessMap.toJSON(e11).uuid), this.attenuationDistance !== void 0 && this.attenuationDistance !== 1 / 0 && (n33.attenuationDistance = this.attenuationDistance), this.attenuationColor !== void 0 && (n33.attenuationColor = this.attenuationColor.getHex()), this.size !== void 0 && (n33.size = this.size), this.shadowSide !== null && (n33.shadowSide = this.shadowSide), this.sizeAttenuation !== void 0 && (n33.sizeAttenuation = this.sizeAttenuation), this.blending !== gs && (n33.blending = this.blending), this.side !== Pn3 && (n33.side = this.side), this.vertexColors && (n33.vertexColors = true), this.opacity < 1 && (n33.opacity = this.opacity), this.transparent === true && (n33.transparent = this.transparent), n33.depthFunc = this.depthFunc, n33.depthTest = this.depthTest, n33.depthWrite = this.depthWrite, n33.colorWrite = this.colorWrite, n33.stencilWrite = this.stencilWrite, n33.stencilWriteMask = this.stencilWriteMask, n33.stencilFunc = this.stencilFunc, n33.stencilRef = this.stencilRef, n33.stencilFuncMask = this.stencilFuncMask, n33.stencilFail = this.stencilFail, n33.stencilZFail = this.stencilZFail, n33.stencilZPass = this.stencilZPass, this.rotation !== void 0 && this.rotation !== 0 && (n33.rotation = this.rotation), this.polygonOffset === true && (n33.polygonOffset = true), this.polygonOffsetFactor !== 0 && (n33.polygonOffsetFactor = this.polygonOffsetFactor), this.polygonOffsetUnits !== 0 && (n33.polygonOffsetUnits = this.polygonOffsetUnits), this.linewidth !== void 0 && this.linewidth !== 1 && (n33.linewidth = this.linewidth), this.dashSize !== void 0 && (n33.dashSize = this.dashSize), this.gapSize !== void 0 && (n33.gapSize = this.gapSize), this.scale !== void 0 && (n33.scale = this.scale), this.dithering === true && (n33.dithering = true), this.alphaTest > 0 && (n33.alphaTest = this.alphaTest), this.alphaToCoverage === true && (n33.alphaToCoverage = this.alphaToCoverage), this.premultipliedAlpha === true && (n33.premultipliedAlpha = this.premultipliedAlpha), this.forceSinglePass === true && (n33.forceSinglePass = this.forceSinglePass), this.wireframe === true && (n33.wireframe = this.wireframe), this.wireframeLinewidth > 1 && (n33.wireframeLinewidth = this.wireframeLinewidth), this.wireframeLinecap !== "round" && (n33.wireframeLinecap = this.wireframeLinecap), this.wireframeLinejoin !== "round" && (n33.wireframeLinejoin = this.wireframeLinejoin), this.flatShading === true && (n33.flatShading = this.flatShading), this.visible === false && (n33.visible = false), this.toneMapped === false && (n33.toneMapped = false), this.fog === false && (n33.fog = false), Object.keys(this.userData).length > 0 && (n33.userData = this.userData);
    function i27(s18) {
      const r24 = [];
      for (const o12 in s18) {
        const c27 = s18[o12];
        delete c27.metadata, r24.push(c27);
      }
      return r24;
    }
    if (t19) {
      const s18 = i27(e11.textures), r24 = i27(e11.images);
      s18.length > 0 && (n33.textures = s18), r24.length > 0 && (n33.images = r24);
    }
    return n33;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    this.name = e11.name, this.blending = e11.blending, this.side = e11.side, this.vertexColors = e11.vertexColors, this.opacity = e11.opacity, this.transparent = e11.transparent, this.blendSrc = e11.blendSrc, this.blendDst = e11.blendDst, this.blendEquation = e11.blendEquation, this.blendSrcAlpha = e11.blendSrcAlpha, this.blendDstAlpha = e11.blendDstAlpha, this.blendEquationAlpha = e11.blendEquationAlpha, this.depthFunc = e11.depthFunc, this.depthTest = e11.depthTest, this.depthWrite = e11.depthWrite, this.stencilWriteMask = e11.stencilWriteMask, this.stencilFunc = e11.stencilFunc, this.stencilRef = e11.stencilRef, this.stencilFuncMask = e11.stencilFuncMask, this.stencilFail = e11.stencilFail, this.stencilZFail = e11.stencilZFail, this.stencilZPass = e11.stencilZPass, this.stencilWrite = e11.stencilWrite;
    const t19 = e11.clippingPlanes;
    let n33 = null;
    if (t19 !== null) {
      const i27 = t19.length;
      n33 = new Array(i27);
      for (let s18 = 0; s18 !== i27; ++s18)
        n33[s18] = t19[s18].clone();
    }
    return this.clippingPlanes = n33, this.clipIntersection = e11.clipIntersection, this.clipShadows = e11.clipShadows, this.shadowSide = e11.shadowSide, this.colorWrite = e11.colorWrite, this.precision = e11.precision, this.polygonOffset = e11.polygonOffset, this.polygonOffsetFactor = e11.polygonOffsetFactor, this.polygonOffsetUnits = e11.polygonOffsetUnits, this.dithering = e11.dithering, this.alphaTest = e11.alphaTest, this.alphaToCoverage = e11.alphaToCoverage, this.premultipliedAlpha = e11.premultipliedAlpha, this.forceSinglePass = e11.forceSinglePass, this.visible = e11.visible, this.toneMapped = e11.toneMapped, this.userData = JSON.parse(JSON.stringify(e11.userData)), this;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
};
var du = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
var vn3 = { h: 0, s: 0, l: 0 };
var Er3 = { h: 0, s: 0, l: 0 };
function Xo(a22, e11, t19) {
  return t19 < 0 && (t19 += 1), t19 > 1 && (t19 -= 1), t19 < 1 / 6 ? a22 + (e11 - a22) * 6 * t19 : t19 < 1 / 2 ? e11 : t19 < 2 / 3 ? a22 + (e11 - a22) * 6 * (2 / 3 - t19) : a22;
}
var ze4 = class {
  constructor(e11, t19, n33) {
    return this.isColor = true, this.r = 1, this.g = 1, this.b = 1, t19 === void 0 && n33 === void 0 ? this.set(e11) : this.setRGB(e11, t19, n33);
  }
  set(e11) {
    return e11 && e11.isColor ? this.copy(e11) : typeof e11 == "number" ? this.setHex(e11) : typeof e11 == "string" && this.setStyle(e11), this;
  }
  setScalar(e11) {
    return this.r = e11, this.g = e11, this.b = e11, this;
  }
  setHex(e11, t19 = bn3) {
    return e11 = Math.floor(e11), this.r = (e11 >> 16 & 255) / 255, this.g = (e11 >> 8 & 255) / 255, this.b = (e11 & 255) / 255, rn3.toWorkingColorSpace(this, t19), this;
  }
  setRGB(e11, t19, n33, i27 = rn3.workingColorSpace) {
    return this.r = e11, this.g = t19, this.b = n33, rn3.toWorkingColorSpace(this, i27), this;
  }
  setHSL(e11, t19, n33, i27 = rn3.workingColorSpace) {
    if (e11 = Ca(e11, 1), t19 = Wt4(t19, 0, 1), n33 = Wt4(n33, 0, 1), t19 === 0)
      this.r = this.g = this.b = n33;
    else {
      const s18 = n33 <= 0.5 ? n33 * (1 + t19) : n33 + t19 - n33 * t19, r24 = 2 * n33 - s18;
      this.r = Xo(r24, s18, e11 + 1 / 3), this.g = Xo(r24, s18, e11), this.b = Xo(r24, s18, e11 - 1 / 3);
    }
    return rn3.toWorkingColorSpace(this, i27), this;
  }
  setStyle(e11, t19 = bn3) {
    function n33(s18) {
      s18 !== void 0 && parseFloat(s18) < 1 && console.warn("THREE.Color: Alpha component of " + e11 + " will be ignored.");
    }
    let i27;
    if (i27 = /^(\w+)\(([^\)]*)\)/.exec(e11)) {
      let s18;
      const r24 = i27[1], o12 = i27[2];
      switch (r24) {
        case "rgb":
        case "rgba":
          if (s18 = /^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o12))
            return this.r = Math.min(255, parseInt(s18[1], 10)) / 255, this.g = Math.min(255, parseInt(s18[2], 10)) / 255, this.b = Math.min(255, parseInt(s18[3], 10)) / 255, rn3.toWorkingColorSpace(this, t19), n33(s18[4]), this;
          if (s18 = /^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o12))
            return this.r = Math.min(100, parseInt(s18[1], 10)) / 100, this.g = Math.min(100, parseInt(s18[2], 10)) / 100, this.b = Math.min(100, parseInt(s18[3], 10)) / 100, rn3.toWorkingColorSpace(this, t19), n33(s18[4]), this;
          break;
        case "hsl":
        case "hsla":
          if (s18 = /^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o12)) {
            const c27 = parseFloat(s18[1]) / 360, l25 = parseFloat(s18[2]) / 100, u35 = parseFloat(s18[3]) / 100;
            return n33(s18[4]), this.setHSL(c27, l25, u35, t19);
          }
          break;
        default:
          console.warn("THREE.Color: Unknown color model " + e11);
      }
    } else if (i27 = /^\#([A-Fa-f\d]+)$/.exec(e11)) {
      const s18 = i27[1], r24 = s18.length;
      if (r24 === 3)
        return this.setRGB(
          parseInt(s18.charAt(0), 16) / 15,
          parseInt(s18.charAt(1), 16) / 15,
          parseInt(s18.charAt(2), 16) / 15,
          t19
        );
      if (r24 === 6)
        return this.setHex(parseInt(s18, 16), t19);
      console.warn("THREE.Color: Invalid hex color " + e11);
    } else if (e11 && e11.length > 0)
      return this.setColorName(e11, t19);
    return this;
  }
  setColorName(e11, t19 = bn3) {
    const n33 = du[e11.toLowerCase()];
    return n33 !== void 0 ? this.setHex(n33, t19) : console.warn("THREE.Color: Unknown color " + e11), this;
  }
  clone() {
    return new this.constructor(this.r, this.g, this.b);
  }
  copy(e11) {
    return this.r = e11.r, this.g = e11.g, this.b = e11.b, this;
  }
  copySRGBToLinear(e11) {
    return this.r = ys(e11.r), this.g = ys(e11.g), this.b = ys(e11.b), this;
  }
  copyLinearToSRGB(e11) {
    return this.r = Uo(e11.r), this.g = Uo(e11.g), this.b = Uo(e11.b), this;
  }
  convertSRGBToLinear() {
    return this.copySRGBToLinear(this), this;
  }
  convertLinearToSRGB() {
    return this.copyLinearToSRGB(this), this;
  }
  getHex(e11 = bn3) {
    return rn3.fromWorkingColorSpace(Jt3.copy(this), e11), Wt4(Jt3.r * 255, 0, 255) << 16 ^ Wt4(Jt3.g * 255, 0, 255) << 8 ^ Wt4(Jt3.b * 255, 0, 255) << 0;
  }
  getHexString(e11 = bn3) {
    return ("000000" + this.getHex(e11).toString(16)).slice(-6);
  }
  getHSL(e11, t19 = rn3.workingColorSpace) {
    rn3.fromWorkingColorSpace(Jt3.copy(this), t19);
    const n33 = Jt3.r, i27 = Jt3.g, s18 = Jt3.b, r24 = Math.max(n33, i27, s18), o12 = Math.min(n33, i27, s18);
    let c27, l25;
    const u35 = (o12 + r24) / 2;
    if (o12 === r24)
      c27 = 0, l25 = 0;
    else {
      const h26 = r24 - o12;
      switch (l25 = u35 <= 0.5 ? h26 / (r24 + o12) : h26 / (2 - r24 - o12), r24) {
        case n33:
          c27 = (i27 - s18) / h26 + (i27 < s18 ? 6 : 0);
          break;
        case i27:
          c27 = (s18 - n33) / h26 + 2;
          break;
        case s18:
          c27 = (n33 - i27) / h26 + 4;
          break;
      }
      c27 /= 6;
    }
    return e11.h = c27, e11.s = l25, e11.l = u35, e11;
  }
  getRGB(e11, t19 = rn3.workingColorSpace) {
    return rn3.fromWorkingColorSpace(Jt3.copy(this), t19), e11.r = Jt3.r, e11.g = Jt3.g, e11.b = Jt3.b, e11;
  }
  getStyle(e11 = bn3) {
    rn3.fromWorkingColorSpace(Jt3.copy(this), e11);
    const t19 = Jt3.r, n33 = Jt3.g, i27 = Jt3.b;
    return e11 !== bn3 ? `color(${e11} ${t19.toFixed(3)} ${n33.toFixed(3)} ${i27.toFixed(3)})` : `rgb(${t19 * 255 | 0},${n33 * 255 | 0},${i27 * 255 | 0})`;
  }
  offsetHSL(e11, t19, n33) {
    return this.getHSL(vn3), vn3.h += e11, vn3.s += t19, vn3.l += n33, this.setHSL(vn3.h, vn3.s, vn3.l), this;
  }
  add(e11) {
    return this.r += e11.r, this.g += e11.g, this.b += e11.b, this;
  }
  addColors(e11, t19) {
    return this.r = e11.r + t19.r, this.g = e11.g + t19.g, this.b = e11.b + t19.b, this;
  }
  addScalar(e11) {
    return this.r += e11, this.g += e11, this.b += e11, this;
  }
  sub(e11) {
    return this.r = Math.max(0, this.r - e11.r), this.g = Math.max(0, this.g - e11.g), this.b = Math.max(0, this.b - e11.b), this;
  }
  multiply(e11) {
    return this.r *= e11.r, this.g *= e11.g, this.b *= e11.b, this;
  }
  multiplyScalar(e11) {
    return this.r *= e11, this.g *= e11, this.b *= e11, this;
  }
  lerp(e11, t19) {
    return this.r += (e11.r - this.r) * t19, this.g += (e11.g - this.g) * t19, this.b += (e11.b - this.b) * t19, this;
  }
  lerpColors(e11, t19, n33) {
    return this.r = e11.r + (t19.r - e11.r) * n33, this.g = e11.g + (t19.g - e11.g) * n33, this.b = e11.b + (t19.b - e11.b) * n33, this;
  }
  lerpHSL(e11, t19) {
    this.getHSL(vn3), e11.getHSL(Er3);
    const n33 = Js(vn3.h, Er3.h, t19), i27 = Js(vn3.s, Er3.s, t19), s18 = Js(vn3.l, Er3.l, t19);
    return this.setHSL(n33, i27, s18), this;
  }
  setFromVector3(e11) {
    return this.r = e11.x, this.g = e11.y, this.b = e11.z, this;
  }
  applyMatrix3(e11) {
    const t19 = this.r, n33 = this.g, i27 = this.b, s18 = e11.elements;
    return this.r = s18[0] * t19 + s18[3] * n33 + s18[6] * i27, this.g = s18[1] * t19 + s18[4] * n33 + s18[7] * i27, this.b = s18[2] * t19 + s18[5] * n33 + s18[8] * i27, this;
  }
  equals(e11) {
    return e11.r === this.r && e11.g === this.g && e11.b === this.b;
  }
  fromArray(e11, t19 = 0) {
    return this.r = e11[t19], this.g = e11[t19 + 1], this.b = e11[t19 + 2], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.r, e11[t19 + 1] = this.g, e11[t19 + 2] = this.b, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.r = e11.getX(t19), this.g = e11.getY(t19), this.b = e11.getZ(t19), this;
  }
  toJSON() {
    return this.getHex();
  }
  *[Symbol.iterator]() {
    yield this.r, yield this.g, yield this.b;
  }
};
var Jt3 = new ze4();
ze4.NAMES = du;
var Mn3 = class extends mn3 {
  constructor(e11) {
    super(), this.isMeshBasicMaterial = true, this.type = "MeshBasicMaterial", this.color = new ze4(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = ao, this.reflectivity = 1, this.refractionRatio = 0.98, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.specularMap = e11.specularMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.combine = e11.combine, this.reflectivity = e11.reflectivity, this.refractionRatio = e11.refractionRatio, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.fog = e11.fog, this;
  }
};
var Rt4 = new U7();
var Cr3 = new We4();
var Gt3 = class {
  constructor(e11, t19, n33 = false) {
    if (Array.isArray(e11))
      throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");
    this.isBufferAttribute = true, this.name = "", this.array = e11, this.itemSize = t19, this.count = e11 !== void 0 ? e11.length / t19 : 0, this.normalized = n33, this.usage = ga, this.updateRange = { offset: 0, count: -1 }, this.version = 0;
  }
  onUploadCallback() {
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
  setUsage(e11) {
    return this.usage = e11, this;
  }
  copy(e11) {
    return this.name = e11.name, this.array = new e11.array.constructor(e11.array), this.itemSize = e11.itemSize, this.count = e11.count, this.normalized = e11.normalized, this.usage = e11.usage, this;
  }
  copyAt(e11, t19, n33) {
    e11 *= this.itemSize, n33 *= t19.itemSize;
    for (let i27 = 0, s18 = this.itemSize; i27 < s18; i27++)
      this.array[e11 + i27] = t19.array[n33 + i27];
    return this;
  }
  copyArray(e11) {
    return this.array.set(e11), this;
  }
  applyMatrix3(e11) {
    if (this.itemSize === 2)
      for (let t19 = 0, n33 = this.count; t19 < n33; t19++)
        Cr3.fromBufferAttribute(this, t19), Cr3.applyMatrix3(e11), this.setXY(t19, Cr3.x, Cr3.y);
    else if (this.itemSize === 3)
      for (let t19 = 0, n33 = this.count; t19 < n33; t19++)
        Rt4.fromBufferAttribute(this, t19), Rt4.applyMatrix3(e11), this.setXYZ(t19, Rt4.x, Rt4.y, Rt4.z);
    return this;
  }
  applyMatrix4(e11) {
    for (let t19 = 0, n33 = this.count; t19 < n33; t19++)
      Rt4.fromBufferAttribute(this, t19), Rt4.applyMatrix4(e11), this.setXYZ(t19, Rt4.x, Rt4.y, Rt4.z);
    return this;
  }
  applyNormalMatrix(e11) {
    for (let t19 = 0, n33 = this.count; t19 < n33; t19++)
      Rt4.fromBufferAttribute(this, t19), Rt4.applyNormalMatrix(e11), this.setXYZ(t19, Rt4.x, Rt4.y, Rt4.z);
    return this;
  }
  transformDirection(e11) {
    for (let t19 = 0, n33 = this.count; t19 < n33; t19++)
      Rt4.fromBufferAttribute(this, t19), Rt4.transformDirection(e11), this.setXYZ(t19, Rt4.x, Rt4.y, Rt4.z);
    return this;
  }
  set(e11, t19 = 0) {
    return this.array.set(e11, t19), this;
  }
  getX(e11) {
    let t19 = this.array[e11 * this.itemSize];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  setX(e11, t19) {
    return this.normalized && (t19 = mt5(t19, this.array)), this.array[e11 * this.itemSize] = t19, this;
  }
  getY(e11) {
    let t19 = this.array[e11 * this.itemSize + 1];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  setY(e11, t19) {
    return this.normalized && (t19 = mt5(t19, this.array)), this.array[e11 * this.itemSize + 1] = t19, this;
  }
  getZ(e11) {
    let t19 = this.array[e11 * this.itemSize + 2];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  setZ(e11, t19) {
    return this.normalized && (t19 = mt5(t19, this.array)), this.array[e11 * this.itemSize + 2] = t19, this;
  }
  getW(e11) {
    let t19 = this.array[e11 * this.itemSize + 3];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  setW(e11, t19) {
    return this.normalized && (t19 = mt5(t19, this.array)), this.array[e11 * this.itemSize + 3] = t19, this;
  }
  setXY(e11, t19, n33) {
    return e11 *= this.itemSize, this.normalized && (t19 = mt5(t19, this.array), n33 = mt5(n33, this.array)), this.array[e11 + 0] = t19, this.array[e11 + 1] = n33, this;
  }
  setXYZ(e11, t19, n33, i27) {
    return e11 *= this.itemSize, this.normalized && (t19 = mt5(t19, this.array), n33 = mt5(n33, this.array), i27 = mt5(i27, this.array)), this.array[e11 + 0] = t19, this.array[e11 + 1] = n33, this.array[e11 + 2] = i27, this;
  }
  setXYZW(e11, t19, n33, i27, s18) {
    return e11 *= this.itemSize, this.normalized && (t19 = mt5(t19, this.array), n33 = mt5(n33, this.array), i27 = mt5(i27, this.array), s18 = mt5(s18, this.array)), this.array[e11 + 0] = t19, this.array[e11 + 1] = n33, this.array[e11 + 2] = i27, this.array[e11 + 3] = s18, this;
  }
  onUpload(e11) {
    return this.onUploadCallback = e11, this;
  }
  clone() {
    return new this.constructor(this.array, this.itemSize).copy(this);
  }
  toJSON() {
    const e11 = {
      itemSize: this.itemSize,
      type: this.array.constructor.name,
      array: Array.from(this.array),
      normalized: this.normalized
    };
    return this.name !== "" && (e11.name = this.name), this.usage !== ga && (e11.usage = this.usage), (this.updateRange.offset !== 0 || this.updateRange.count !== -1) && (e11.updateRange = this.updateRange), e11;
  }
  copyColorsArray() {
    console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.");
  }
  copyVector2sArray() {
    console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.");
  }
  copyVector3sArray() {
    console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.");
  }
  copyVector4sArray() {
    console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.");
  }
};
var fu = class extends Gt3 {
  constructor(e11, t19, n33) {
    super(new Uint16Array(e11), t19, n33);
  }
};
var pu = class extends Gt3 {
  constructor(e11, t19, n33) {
    super(new Uint32Array(e11), t19, n33);
  }
};
var yt7 = class extends Gt3 {
  constructor(e11, t19, n33) {
    super(new Float32Array(e11), t19, n33);
  }
};
var Td = 0;
var un3 = new Ve4();
var Ko = new _t3();
var is = new U7();
var an3 = new qn3();
var Gs = new qn3();
var zt3 = new U7();
var Xt3 = class _Xt extends Ni3 {
  constructor() {
    super(), this.isBufferGeometry = true, Object.defineProperty(this, "id", { value: Td++ }), this.uuid = Sn3(), this.name = "", this.type = "BufferGeometry", this.index = null, this.attributes = {}, this.morphAttributes = {}, this.morphTargetsRelative = false, this.groups = [], this.boundingBox = null, this.boundingSphere = null, this.drawRange = { start: 0, count: 1 / 0 }, this.userData = {};
  }
  getIndex() {
    return this.index;
  }
  setIndex(e11) {
    return Array.isArray(e11) ? this.index = new (au(e11) ? pu : fu)(e11, 1) : this.index = e11, this;
  }
  getAttribute(e11) {
    return this.attributes[e11];
  }
  setAttribute(e11, t19) {
    return this.attributes[e11] = t19, this;
  }
  deleteAttribute(e11) {
    return delete this.attributes[e11], this;
  }
  hasAttribute(e11) {
    return this.attributes[e11] !== void 0;
  }
  addGroup(e11, t19, n33 = 0) {
    this.groups.push({
      start: e11,
      count: t19,
      materialIndex: n33
    });
  }
  clearGroups() {
    this.groups = [];
  }
  setDrawRange(e11, t19) {
    this.drawRange.start = e11, this.drawRange.count = t19;
  }
  applyMatrix4(e11) {
    const t19 = this.attributes.position;
    t19 !== void 0 && (t19.applyMatrix4(e11), t19.needsUpdate = true);
    const n33 = this.attributes.normal;
    if (n33 !== void 0) {
      const s18 = new Qe4().getNormalMatrix(e11);
      n33.applyNormalMatrix(s18), n33.needsUpdate = true;
    }
    const i27 = this.attributes.tangent;
    return i27 !== void 0 && (i27.transformDirection(e11), i27.needsUpdate = true), this.boundingBox !== null && this.computeBoundingBox(), this.boundingSphere !== null && this.computeBoundingSphere(), this;
  }
  applyQuaternion(e11) {
    return un3.makeRotationFromQuaternion(e11), this.applyMatrix4(un3), this;
  }
  rotateX(e11) {
    return un3.makeRotationX(e11), this.applyMatrix4(un3), this;
  }
  rotateY(e11) {
    return un3.makeRotationY(e11), this.applyMatrix4(un3), this;
  }
  rotateZ(e11) {
    return un3.makeRotationZ(e11), this.applyMatrix4(un3), this;
  }
  translate(e11, t19, n33) {
    return un3.makeTranslation(e11, t19, n33), this.applyMatrix4(un3), this;
  }
  scale(e11, t19, n33) {
    return un3.makeScale(e11, t19, n33), this.applyMatrix4(un3), this;
  }
  lookAt(e11) {
    return Ko.lookAt(e11), Ko.updateMatrix(), this.applyMatrix4(Ko.matrix), this;
  }
  center() {
    return this.computeBoundingBox(), this.boundingBox.getCenter(is).negate(), this.translate(is.x, is.y, is.z), this;
  }
  setFromPoints(e11) {
    const t19 = [];
    for (let n33 = 0, i27 = e11.length; n33 < i27; n33++) {
      const s18 = e11[n33];
      t19.push(s18.x, s18.y, s18.z || 0);
    }
    return this.setAttribute("position", new yt7(t19, 3)), this;
  }
  computeBoundingBox() {
    this.boundingBox === null && (this.boundingBox = new qn3());
    const e11 = this.attributes.position, t19 = this.morphAttributes.position;
    if (e11 && e11.isGLBufferAttribute) {
      console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".', this), this.boundingBox.set(
        new U7(-1 / 0, -1 / 0, -1 / 0),
        new U7(1 / 0, 1 / 0, 1 / 0)
      );
      return;
    }
    if (e11 !== void 0) {
      if (this.boundingBox.setFromBufferAttribute(e11), t19)
        for (let n33 = 0, i27 = t19.length; n33 < i27; n33++) {
          const s18 = t19[n33];
          an3.setFromBufferAttribute(s18), this.morphTargetsRelative ? (zt3.addVectors(this.boundingBox.min, an3.min), this.boundingBox.expandByPoint(zt3), zt3.addVectors(this.boundingBox.max, an3.max), this.boundingBox.expandByPoint(zt3)) : (this.boundingBox.expandByPoint(an3.min), this.boundingBox.expandByPoint(an3.max));
        }
    } else
      this.boundingBox.makeEmpty();
    (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this);
  }
  computeBoundingSphere() {
    this.boundingSphere === null && (this.boundingSphere = new Xn3());
    const e11 = this.attributes.position, t19 = this.morphAttributes.position;
    if (e11 && e11.isGLBufferAttribute) {
      console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".', this), this.boundingSphere.set(new U7(), 1 / 0);
      return;
    }
    if (e11) {
      const n33 = this.boundingSphere.center;
      if (an3.setFromBufferAttribute(e11), t19)
        for (let s18 = 0, r24 = t19.length; s18 < r24; s18++) {
          const o12 = t19[s18];
          Gs.setFromBufferAttribute(o12), this.morphTargetsRelative ? (zt3.addVectors(an3.min, Gs.min), an3.expandByPoint(zt3), zt3.addVectors(an3.max, Gs.max), an3.expandByPoint(zt3)) : (an3.expandByPoint(Gs.min), an3.expandByPoint(Gs.max));
        }
      an3.getCenter(n33);
      let i27 = 0;
      for (let s18 = 0, r24 = e11.count; s18 < r24; s18++)
        zt3.fromBufferAttribute(e11, s18), i27 = Math.max(i27, n33.distanceToSquared(zt3));
      if (t19)
        for (let s18 = 0, r24 = t19.length; s18 < r24; s18++) {
          const o12 = t19[s18], c27 = this.morphTargetsRelative;
          for (let l25 = 0, u35 = o12.count; l25 < u35; l25++)
            zt3.fromBufferAttribute(o12, l25), c27 && (is.fromBufferAttribute(e11, l25), zt3.add(is)), i27 = Math.max(i27, n33.distanceToSquared(zt3));
        }
      this.boundingSphere.radius = Math.sqrt(i27), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this);
    }
  }
  computeTangents() {
    const e11 = this.index, t19 = this.attributes;
    if (e11 === null || t19.position === void 0 || t19.normal === void 0 || t19.uv === void 0) {
      console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");
      return;
    }
    const n33 = e11.array, i27 = t19.position.array, s18 = t19.normal.array, r24 = t19.uv.array, o12 = i27.length / 3;
    this.hasAttribute("tangent") === false && this.setAttribute("tangent", new Gt3(new Float32Array(4 * o12), 4));
    const c27 = this.getAttribute("tangent").array, l25 = [], u35 = [];
    for (let L11 = 0; L11 < o12; L11++)
      l25[L11] = new U7(), u35[L11] = new U7();
    const h26 = new U7(), d34 = new U7(), p26 = new U7(), g31 = new We4(), y33 = new We4(), m33 = new We4(), f39 = new U7(), E24 = new U7();
    function b33(L11, G15, B21) {
      h26.fromArray(i27, L11 * 3), d34.fromArray(i27, G15 * 3), p26.fromArray(i27, B21 * 3), g31.fromArray(r24, L11 * 2), y33.fromArray(r24, G15 * 2), m33.fromArray(r24, B21 * 2), d34.sub(h26), p26.sub(h26), y33.sub(g31), m33.sub(g31);
      const k27 = 1 / (y33.x * m33.y - m33.x * y33.y);
      isFinite(k27) && (f39.copy(d34).multiplyScalar(m33.y).addScaledVector(p26, -y33.y).multiplyScalar(k27), E24.copy(p26).multiplyScalar(y33.x).addScaledVector(d34, -m33.x).multiplyScalar(k27), l25[L11].add(f39), l25[G15].add(f39), l25[B21].add(f39), u35[L11].add(E24), u35[G15].add(E24), u35[B21].add(E24));
    }
    let w29 = this.groups;
    w29.length === 0 && (w29 = [{
      start: 0,
      count: n33.length
    }]);
    for (let L11 = 0, G15 = w29.length; L11 < G15; ++L11) {
      const B21 = w29[L11], k27 = B21.start, V14 = B21.count;
      for (let H15 = k27, W8 = k27 + V14; H15 < W8; H15 += 3)
        b33(
          n33[H15 + 0],
          n33[H15 + 1],
          n33[H15 + 2]
        );
    }
    const S21 = new U7(), D17 = new U7(), N19 = new U7(), I16 = new U7();
    function v30(L11) {
      N19.fromArray(s18, L11 * 3), I16.copy(N19);
      const G15 = l25[L11];
      S21.copy(G15), S21.sub(N19.multiplyScalar(N19.dot(G15))).normalize(), D17.crossVectors(I16, G15);
      const k27 = D17.dot(u35[L11]) < 0 ? -1 : 1;
      c27[L11 * 4] = S21.x, c27[L11 * 4 + 1] = S21.y, c27[L11 * 4 + 2] = S21.z, c27[L11 * 4 + 3] = k27;
    }
    for (let L11 = 0, G15 = w29.length; L11 < G15; ++L11) {
      const B21 = w29[L11], k27 = B21.start, V14 = B21.count;
      for (let H15 = k27, W8 = k27 + V14; H15 < W8; H15 += 3)
        v30(n33[H15 + 0]), v30(n33[H15 + 1]), v30(n33[H15 + 2]);
    }
  }
  computeVertexNormals() {
    const e11 = this.index, t19 = this.getAttribute("position");
    if (t19 !== void 0) {
      let n33 = this.getAttribute("normal");
      if (n33 === void 0)
        n33 = new Gt3(new Float32Array(t19.count * 3), 3), this.setAttribute("normal", n33);
      else
        for (let d34 = 0, p26 = n33.count; d34 < p26; d34++)
          n33.setXYZ(d34, 0, 0, 0);
      const i27 = new U7(), s18 = new U7(), r24 = new U7(), o12 = new U7(), c27 = new U7(), l25 = new U7(), u35 = new U7(), h26 = new U7();
      if (e11)
        for (let d34 = 0, p26 = e11.count; d34 < p26; d34 += 3) {
          const g31 = e11.getX(d34 + 0), y33 = e11.getX(d34 + 1), m33 = e11.getX(d34 + 2);
          i27.fromBufferAttribute(t19, g31), s18.fromBufferAttribute(t19, y33), r24.fromBufferAttribute(t19, m33), u35.subVectors(r24, s18), h26.subVectors(i27, s18), u35.cross(h26), o12.fromBufferAttribute(n33, g31), c27.fromBufferAttribute(n33, y33), l25.fromBufferAttribute(n33, m33), o12.add(u35), c27.add(u35), l25.add(u35), n33.setXYZ(g31, o12.x, o12.y, o12.z), n33.setXYZ(y33, c27.x, c27.y, c27.z), n33.setXYZ(m33, l25.x, l25.y, l25.z);
        }
      else
        for (let d34 = 0, p26 = t19.count; d34 < p26; d34 += 3)
          i27.fromBufferAttribute(t19, d34 + 0), s18.fromBufferAttribute(t19, d34 + 1), r24.fromBufferAttribute(t19, d34 + 2), u35.subVectors(r24, s18), h26.subVectors(i27, s18), u35.cross(h26), n33.setXYZ(d34 + 0, u35.x, u35.y, u35.z), n33.setXYZ(d34 + 1, u35.x, u35.y, u35.z), n33.setXYZ(d34 + 2, u35.x, u35.y, u35.z);
      this.normalizeNormals(), n33.needsUpdate = true;
    }
  }
  merge() {
    return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."), this;
  }
  normalizeNormals() {
    const e11 = this.attributes.normal;
    for (let t19 = 0, n33 = e11.count; t19 < n33; t19++)
      zt3.fromBufferAttribute(e11, t19), zt3.normalize(), e11.setXYZ(t19, zt3.x, zt3.y, zt3.z);
  }
  toNonIndexed() {
    function e11(o12, c27) {
      const l25 = o12.array, u35 = o12.itemSize, h26 = o12.normalized, d34 = new l25.constructor(c27.length * u35);
      let p26 = 0, g31 = 0;
      for (let y33 = 0, m33 = c27.length; y33 < m33; y33++) {
        o12.isInterleavedBufferAttribute ? p26 = c27[y33] * o12.data.stride + o12.offset : p26 = c27[y33] * u35;
        for (let f39 = 0; f39 < u35; f39++)
          d34[g31++] = l25[p26++];
      }
      return new Gt3(d34, u35, h26);
    }
    if (this.index === null)
      return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."), this;
    const t19 = new _Xt(), n33 = this.index.array, i27 = this.attributes;
    for (const o12 in i27) {
      const c27 = i27[o12], l25 = e11(c27, n33);
      t19.setAttribute(o12, l25);
    }
    const s18 = this.morphAttributes;
    for (const o12 in s18) {
      const c27 = [], l25 = s18[o12];
      for (let u35 = 0, h26 = l25.length; u35 < h26; u35++) {
        const d34 = l25[u35], p26 = e11(d34, n33);
        c27.push(p26);
      }
      t19.morphAttributes[o12] = c27;
    }
    t19.morphTargetsRelative = this.morphTargetsRelative;
    const r24 = this.groups;
    for (let o12 = 0, c27 = r24.length; o12 < c27; o12++) {
      const l25 = r24[o12];
      t19.addGroup(l25.start, l25.count, l25.materialIndex);
    }
    return t19;
  }
  toJSON() {
    const e11 = {
      metadata: {
        version: 4.5,
        type: "BufferGeometry",
        generator: "BufferGeometry.toJSON"
      }
    };
    if (e11.uuid = this.uuid, e11.type = this.type, this.name !== "" && (e11.name = this.name), Object.keys(this.userData).length > 0 && (e11.userData = this.userData), this.parameters !== void 0) {
      const c27 = this.parameters;
      for (const l25 in c27)
        c27[l25] !== void 0 && (e11[l25] = c27[l25]);
      return e11;
    }
    e11.data = { attributes: {} };
    const t19 = this.index;
    t19 !== null && (e11.data.index = {
      type: t19.array.constructor.name,
      array: Array.prototype.slice.call(t19.array)
    });
    const n33 = this.attributes;
    for (const c27 in n33) {
      const l25 = n33[c27];
      e11.data.attributes[c27] = l25.toJSON(e11.data);
    }
    const i27 = {};
    let s18 = false;
    for (const c27 in this.morphAttributes) {
      const l25 = this.morphAttributes[c27], u35 = [];
      for (let h26 = 0, d34 = l25.length; h26 < d34; h26++) {
        const p26 = l25[h26];
        u35.push(p26.toJSON(e11.data));
      }
      u35.length > 0 && (i27[c27] = u35, s18 = true);
    }
    s18 && (e11.data.morphAttributes = i27, e11.data.morphTargetsRelative = this.morphTargetsRelative);
    const r24 = this.groups;
    r24.length > 0 && (e11.data.groups = JSON.parse(JSON.stringify(r24)));
    const o12 = this.boundingSphere;
    return o12 !== null && (e11.data.boundingSphere = {
      center: o12.center.toArray(),
      radius: o12.radius
    }), e11;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    this.index = null, this.attributes = {}, this.morphAttributes = {}, this.groups = [], this.boundingBox = null, this.boundingSphere = null;
    const t19 = {};
    this.name = e11.name;
    const n33 = e11.index;
    n33 !== null && this.setIndex(n33.clone(t19));
    const i27 = e11.attributes;
    for (const l25 in i27) {
      const u35 = i27[l25];
      this.setAttribute(l25, u35.clone(t19));
    }
    const s18 = e11.morphAttributes;
    for (const l25 in s18) {
      const u35 = [], h26 = s18[l25];
      for (let d34 = 0, p26 = h26.length; d34 < p26; d34++)
        u35.push(h26[d34].clone(t19));
      this.morphAttributes[l25] = u35;
    }
    this.morphTargetsRelative = e11.morphTargetsRelative;
    const r24 = e11.groups;
    for (let l25 = 0, u35 = r24.length; l25 < u35; l25++) {
      const h26 = r24[l25];
      this.addGroup(h26.start, h26.count, h26.materialIndex);
    }
    const o12 = e11.boundingBox;
    o12 !== null && (this.boundingBox = o12.clone());
    const c27 = e11.boundingSphere;
    return c27 !== null && (this.boundingSphere = c27.clone()), this.drawRange.start = e11.drawRange.start, this.drawRange.count = e11.drawRange.count, this.userData = e11.userData, this;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
};
var Hl = new Ve4();
var En3 = new La();
var Lr3 = new Xn3();
var Wl = new U7();
var ss = new U7();
var rs = new U7();
var os = new U7();
var Yo = new U7();
var Rr3 = new U7();
var Pr3 = new We4();
var Ir3 = new We4();
var Dr3 = new We4();
var jl = new U7();
var ql = new U7();
var Xl = new U7();
var Nr3 = new U7();
var Ur3 = new U7();
var Pt4 = class extends _t3 {
  constructor(e11 = new Xt3(), t19 = new Mn3()) {
    super(), this.isMesh = true, this.type = "Mesh", this.geometry = e11, this.material = t19, this.updateMorphTargets();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), e11.morphTargetInfluences !== void 0 && (this.morphTargetInfluences = e11.morphTargetInfluences.slice()), e11.morphTargetDictionary !== void 0 && (this.morphTargetDictionary = Object.assign({}, e11.morphTargetDictionary)), this.material = e11.material, this.geometry = e11.geometry, this;
  }
  updateMorphTargets() {
    const t19 = this.geometry.morphAttributes, n33 = Object.keys(t19);
    if (n33.length > 0) {
      const i27 = t19[n33[0]];
      if (i27 !== void 0) {
        this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (let s18 = 0, r24 = i27.length; s18 < r24; s18++) {
          const o12 = i27[s18].name || String(s18);
          this.morphTargetInfluences.push(0), this.morphTargetDictionary[o12] = s18;
        }
      }
    }
  }
  getVertexPosition(e11, t19) {
    const n33 = this.geometry, i27 = n33.attributes.position, s18 = n33.morphAttributes.position, r24 = n33.morphTargetsRelative;
    t19.fromBufferAttribute(i27, e11);
    const o12 = this.morphTargetInfluences;
    if (s18 && o12) {
      Rr3.set(0, 0, 0);
      for (let c27 = 0, l25 = s18.length; c27 < l25; c27++) {
        const u35 = o12[c27], h26 = s18[c27];
        u35 !== 0 && (Yo.fromBufferAttribute(h26, e11), r24 ? Rr3.addScaledVector(Yo, u35) : Rr3.addScaledVector(Yo.sub(t19), u35));
      }
      t19.add(Rr3);
    }
    return this.isSkinnedMesh && this.applyBoneTransform(e11, t19), t19;
  }
  raycast(e11, t19) {
    const n33 = this.geometry, i27 = this.material, s18 = this.matrixWorld;
    if (i27 === void 0 || (n33.boundingSphere === null && n33.computeBoundingSphere(), Lr3.copy(n33.boundingSphere), Lr3.applyMatrix4(s18), En3.copy(e11.ray).recast(e11.near), Lr3.containsPoint(En3.origin) === false && (En3.intersectSphere(Lr3, Wl) === null || En3.origin.distanceToSquared(Wl) > (e11.far - e11.near) ** 2)) || (Hl.copy(s18).invert(), En3.copy(e11.ray).applyMatrix4(Hl), n33.boundingBox !== null && En3.intersectsBox(n33.boundingBox) === false))
      return;
    let r24;
    const o12 = n33.index, c27 = n33.attributes.position, l25 = n33.attributes.uv, u35 = n33.attributes.uv2, h26 = n33.attributes.normal, d34 = n33.groups, p26 = n33.drawRange;
    if (o12 !== null)
      if (Array.isArray(i27))
        for (let g31 = 0, y33 = d34.length; g31 < y33; g31++) {
          const m33 = d34[g31], f39 = i27[m33.materialIndex], E24 = Math.max(m33.start, p26.start), b33 = Math.min(o12.count, Math.min(m33.start + m33.count, p26.start + p26.count));
          for (let w29 = E24, S21 = b33; w29 < S21; w29 += 3) {
            const D17 = o12.getX(w29), N19 = o12.getX(w29 + 1), I16 = o12.getX(w29 + 2);
            r24 = kr3(this, f39, e11, En3, l25, u35, h26, D17, N19, I16), r24 && (r24.faceIndex = Math.floor(w29 / 3), r24.face.materialIndex = m33.materialIndex, t19.push(r24));
          }
        }
      else {
        const g31 = Math.max(0, p26.start), y33 = Math.min(o12.count, p26.start + p26.count);
        for (let m33 = g31, f39 = y33; m33 < f39; m33 += 3) {
          const E24 = o12.getX(m33), b33 = o12.getX(m33 + 1), w29 = o12.getX(m33 + 2);
          r24 = kr3(this, i27, e11, En3, l25, u35, h26, E24, b33, w29), r24 && (r24.faceIndex = Math.floor(m33 / 3), t19.push(r24));
        }
      }
    else if (c27 !== void 0)
      if (Array.isArray(i27))
        for (let g31 = 0, y33 = d34.length; g31 < y33; g31++) {
          const m33 = d34[g31], f39 = i27[m33.materialIndex], E24 = Math.max(m33.start, p26.start), b33 = Math.min(c27.count, Math.min(m33.start + m33.count, p26.start + p26.count));
          for (let w29 = E24, S21 = b33; w29 < S21; w29 += 3) {
            const D17 = w29, N19 = w29 + 1, I16 = w29 + 2;
            r24 = kr3(this, f39, e11, En3, l25, u35, h26, D17, N19, I16), r24 && (r24.faceIndex = Math.floor(w29 / 3), r24.face.materialIndex = m33.materialIndex, t19.push(r24));
          }
        }
      else {
        const g31 = Math.max(0, p26.start), y33 = Math.min(c27.count, p26.start + p26.count);
        for (let m33 = g31, f39 = y33; m33 < f39; m33 += 3) {
          const E24 = m33, b33 = m33 + 1, w29 = m33 + 2;
          r24 = kr3(this, i27, e11, En3, l25, u35, h26, E24, b33, w29), r24 && (r24.faceIndex = Math.floor(m33 / 3), t19.push(r24));
        }
      }
  }
};
function Ad(a22, e11, t19, n33, i27, s18, r24, o12) {
  let c27;
  if (e11.side === sn3 ? c27 = n33.intersectTriangle(r24, s18, i27, true, o12) : c27 = n33.intersectTriangle(i27, s18, r24, e11.side === Pn3, o12), c27 === null)
    return null;
  Ur3.copy(o12), Ur3.applyMatrix4(a22.matrixWorld);
  const l25 = t19.ray.origin.distanceTo(Ur3);
  return l25 < t19.near || l25 > t19.far ? null : {
    distance: l25,
    point: Ur3.clone(),
    object: a22
  };
}
function kr3(a22, e11, t19, n33, i27, s18, r24, o12, c27, l25) {
  a22.getVertexPosition(o12, ss), a22.getVertexPosition(c27, rs), a22.getVertexPosition(l25, os);
  const u35 = Ad(a22, e11, t19, n33, ss, rs, os, Nr3);
  if (u35) {
    i27 && (Pr3.fromBufferAttribute(i27, o12), Ir3.fromBufferAttribute(i27, c27), Dr3.fromBufferAttribute(i27, l25), u35.uv = dn3.getInterpolation(Nr3, ss, rs, os, Pr3, Ir3, Dr3, new We4())), s18 && (Pr3.fromBufferAttribute(s18, o12), Ir3.fromBufferAttribute(s18, c27), Dr3.fromBufferAttribute(s18, l25), u35.uv2 = dn3.getInterpolation(Nr3, ss, rs, os, Pr3, Ir3, Dr3, new We4())), r24 && (jl.fromBufferAttribute(r24, o12), ql.fromBufferAttribute(r24, c27), Xl.fromBufferAttribute(r24, l25), u35.normal = dn3.getInterpolation(Nr3, ss, rs, os, jl, ql, Xl, new U7()), u35.normal.dot(n33.direction) > 0 && u35.normal.multiplyScalar(-1));
    const h26 = {
      a: o12,
      b: c27,
      c: l25,
      normal: new U7(),
      materialIndex: 0
    };
    dn3.getNormal(ss, rs, os, h26.normal), u35.face = h26;
  }
  return u35;
}
var Ui = class _Ui extends Xt3 {
  constructor(e11 = 1, t19 = 1, n33 = 1, i27 = 1, s18 = 1, r24 = 1) {
    super(), this.type = "BoxGeometry", this.parameters = {
      width: e11,
      height: t19,
      depth: n33,
      widthSegments: i27,
      heightSegments: s18,
      depthSegments: r24
    };
    const o12 = this;
    i27 = Math.floor(i27), s18 = Math.floor(s18), r24 = Math.floor(r24);
    const c27 = [], l25 = [], u35 = [], h26 = [];
    let d34 = 0, p26 = 0;
    g31("z", "y", "x", -1, -1, n33, t19, e11, r24, s18, 0), g31("z", "y", "x", 1, -1, n33, t19, -e11, r24, s18, 1), g31("x", "z", "y", 1, 1, e11, n33, t19, i27, r24, 2), g31("x", "z", "y", 1, -1, e11, n33, -t19, i27, r24, 3), g31("x", "y", "z", 1, -1, e11, t19, n33, i27, s18, 4), g31("x", "y", "z", -1, -1, e11, t19, -n33, i27, s18, 5), this.setIndex(c27), this.setAttribute("position", new yt7(l25, 3)), this.setAttribute("normal", new yt7(u35, 3)), this.setAttribute("uv", new yt7(h26, 2));
    function g31(y33, m33, f39, E24, b33, w29, S21, D17, N19, I16, v30) {
      const L11 = w29 / N19, G15 = S21 / I16, B21 = w29 / 2, k27 = S21 / 2, V14 = D17 / 2, H15 = N19 + 1, W8 = I16 + 1;
      let te7 = 0, J11 = 0;
      const ie8 = new U7();
      for (let le7 = 0; le7 < W8; le7++) {
        const me9 = le7 * G15 - k27;
        for (let he8 = 0; he8 < H15; he8++) {
          const j18 = he8 * L11 - B21;
          ie8[y33] = j18 * E24, ie8[m33] = me9 * b33, ie8[f39] = V14, l25.push(ie8.x, ie8.y, ie8.z), ie8[y33] = 0, ie8[m33] = 0, ie8[f39] = D17 > 0 ? 1 : -1, u35.push(ie8.x, ie8.y, ie8.z), h26.push(he8 / N19), h26.push(1 - le7 / I16), te7 += 1;
        }
      }
      for (let le7 = 0; le7 < I16; le7++)
        for (let me9 = 0; me9 < N19; me9++) {
          const he8 = d34 + me9 + H15 * le7, j18 = d34 + me9 + H15 * (le7 + 1), X12 = d34 + (me9 + 1) + H15 * (le7 + 1), ee7 = d34 + (me9 + 1) + H15 * le7;
          c27.push(he8, j18, ee7), c27.push(j18, X12, ee7), J11 += 6;
        }
      o12.addGroup(p26, J11, v30), p26 += J11, d34 += te7;
    }
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _Ui(e11.width, e11.height, e11.depth, e11.widthSegments, e11.heightSegments, e11.depthSegments);
  }
};
function Cs(a22) {
  const e11 = {};
  for (const t19 in a22) {
    e11[t19] = {};
    for (const n33 in a22[t19]) {
      const i27 = a22[t19][n33];
      i27 && (i27.isColor || i27.isMatrix3 || i27.isMatrix4 || i27.isVector2 || i27.isVector3 || i27.isVector4 || i27.isTexture || i27.isQuaternion) ? i27.isRenderTargetTexture ? (console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."), e11[t19][n33] = null) : e11[t19][n33] = i27.clone() : Array.isArray(i27) ? e11[t19][n33] = i27.slice() : e11[t19][n33] = i27;
    }
  }
  return e11;
}
function tn3(a22) {
  const e11 = {};
  for (let t19 = 0; t19 < a22.length; t19++) {
    const n33 = Cs(a22[t19]);
    for (const i27 in n33)
      e11[i27] = n33[i27];
  }
  return e11;
}
function Ed(a22) {
  const e11 = [];
  for (let t19 = 0; t19 < a22.length; t19++)
    e11.push(a22[t19].clone());
  return e11;
}
function mu(a22) {
  return a22.getRenderTarget() === null && a22.outputEncoding === st6 ? bn3 : tr3;
}
var Cd = { clone: Cs, merge: tn3 };
var Ld = `void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`;
var Rd = `void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;
var Ri = class extends mn3 {
  constructor(e11) {
    super(), this.isShaderMaterial = true, this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, this.uniformsGroups = [], this.vertexShader = Ld, this.fragmentShader = Rd, this.linewidth = 1, this.wireframe = false, this.wireframeLinewidth = 1, this.fog = false, this.lights = false, this.clipping = false, this.forceSinglePass = true, this.extensions = {
      derivatives: false,
      // set to use derivatives
      fragDepth: false,
      // set to use fragment depth values
      drawBuffers: false,
      // set to use draw buffers
      shaderTextureLOD: false
      // set to use shader texture LOD
    }, this.defaultAttributeValues = {
      color: [1, 1, 1],
      uv: [0, 0],
      uv2: [0, 0]
    }, this.index0AttributeName = void 0, this.uniformsNeedUpdate = false, this.glslVersion = null, e11 !== void 0 && this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.fragmentShader = e11.fragmentShader, this.vertexShader = e11.vertexShader, this.uniforms = Cs(e11.uniforms), this.uniformsGroups = Ed(e11.uniformsGroups), this.defines = Object.assign({}, e11.defines), this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.fog = e11.fog, this.lights = e11.lights, this.clipping = e11.clipping, this.extensions = Object.assign({}, e11.extensions), this.glslVersion = e11.glslVersion, this;
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    t19.glslVersion = this.glslVersion, t19.uniforms = {};
    for (const i27 in this.uniforms) {
      const r24 = this.uniforms[i27].value;
      r24 && r24.isTexture ? t19.uniforms[i27] = {
        type: "t",
        value: r24.toJSON(e11).uuid
      } : r24 && r24.isColor ? t19.uniforms[i27] = {
        type: "c",
        value: r24.getHex()
      } : r24 && r24.isVector2 ? t19.uniforms[i27] = {
        type: "v2",
        value: r24.toArray()
      } : r24 && r24.isVector3 ? t19.uniforms[i27] = {
        type: "v3",
        value: r24.toArray()
      } : r24 && r24.isVector4 ? t19.uniforms[i27] = {
        type: "v4",
        value: r24.toArray()
      } : r24 && r24.isMatrix3 ? t19.uniforms[i27] = {
        type: "m3",
        value: r24.toArray()
      } : r24 && r24.isMatrix4 ? t19.uniforms[i27] = {
        type: "m4",
        value: r24.toArray()
      } : t19.uniforms[i27] = {
        value: r24
      };
    }
    Object.keys(this.defines).length > 0 && (t19.defines = this.defines), t19.vertexShader = this.vertexShader, t19.fragmentShader = this.fragmentShader;
    const n33 = {};
    for (const i27 in this.extensions)
      this.extensions[i27] === true && (n33[i27] = true);
    return Object.keys(n33).length > 0 && (t19.extensions = n33), t19;
  }
};
var gu = class extends _t3 {
  constructor() {
    super(), this.isCamera = true, this.type = "Camera", this.matrixWorldInverse = new Ve4(), this.projectionMatrix = new Ve4(), this.projectionMatrixInverse = new Ve4();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.matrixWorldInverse.copy(e11.matrixWorldInverse), this.projectionMatrix.copy(e11.projectionMatrix), this.projectionMatrixInverse.copy(e11.projectionMatrixInverse), this;
  }
  getWorldDirection(e11) {
    this.updateWorldMatrix(true, false);
    const t19 = this.matrixWorld.elements;
    return e11.set(-t19[8], -t19[9], -t19[10]).normalize();
  }
  updateMatrixWorld(e11) {
    super.updateMatrixWorld(e11), this.matrixWorldInverse.copy(this.matrixWorld).invert();
  }
  updateWorldMatrix(e11, t19) {
    super.updateWorldMatrix(e11, t19), this.matrixWorldInverse.copy(this.matrixWorld).invert();
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var Vt3 = class extends gu {
  constructor(e11 = 50, t19 = 1, n33 = 0.1, i27 = 2e3) {
    super(), this.isPerspectiveCamera = true, this.type = "PerspectiveCamera", this.fov = e11, this.zoom = 1, this.near = n33, this.far = i27, this.focus = 10, this.aspect = t19, this.view = null, this.filmGauge = 35, this.filmOffset = 0, this.updateProjectionMatrix();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.fov = e11.fov, this.zoom = e11.zoom, this.near = e11.near, this.far = e11.far, this.focus = e11.focus, this.aspect = e11.aspect, this.view = e11.view === null ? null : Object.assign({}, e11.view), this.filmGauge = e11.filmGauge, this.filmOffset = e11.filmOffset, this;
  }
  /**
   * Sets the FOV by focal length in respect to the current .filmGauge.
   *
   * The default film gauge is 35, so that the focal length can be specified for
   * a 35mm (full frame) camera.
   *
   * Values for focal length and film gauge must have the same unit.
   */
  setFocalLength(e11) {
    const t19 = 0.5 * this.getFilmHeight() / e11;
    this.fov = Es * 2 * Math.atan(t19), this.updateProjectionMatrix();
  }
  /**
   * Calculates the focal length from the current .fov and .filmGauge.
   */
  getFocalLength() {
    const e11 = Math.tan(xs * 0.5 * this.fov);
    return 0.5 * this.getFilmHeight() / e11;
  }
  getEffectiveFOV() {
    return Es * 2 * Math.atan(
      Math.tan(xs * 0.5 * this.fov) / this.zoom
    );
  }
  getFilmWidth() {
    return this.filmGauge * Math.min(this.aspect, 1);
  }
  getFilmHeight() {
    return this.filmGauge / Math.max(this.aspect, 1);
  }
  /**
   * Sets an offset in a larger frustum. This is useful for multi-window or
   * multi-monitor/multi-machine setups.
   *
   * For example, if you have 3x2 monitors and each monitor is 1920x1080 and
   * the monitors are in grid like this
   *
   *   +---+---+---+
   *   | A | B | C |
   *   +---+---+---+
   *   | D | E | F |
   *   +---+---+---+
   *
   * then for each monitor you would call it like this
   *
   *   const w = 1920;
   *   const h = 1080;
   *   const fullWidth = w * 3;
   *   const fullHeight = h * 2;
   *
   *   --A--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );
   *   --B--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );
   *   --C--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );
   *   --D--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );
   *   --E--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );
   *   --F--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );
   *
   *   Note there is no reason monitors have to be the same size or in a grid.
   */
  setViewOffset(e11, t19, n33, i27, s18, r24) {
    this.aspect = e11 / t19, this.view === null && (this.view = {
      enabled: true,
      fullWidth: 1,
      fullHeight: 1,
      offsetX: 0,
      offsetY: 0,
      width: 1,
      height: 1
    }), this.view.enabled = true, this.view.fullWidth = e11, this.view.fullHeight = t19, this.view.offsetX = n33, this.view.offsetY = i27, this.view.width = s18, this.view.height = r24, this.updateProjectionMatrix();
  }
  clearViewOffset() {
    this.view !== null && (this.view.enabled = false), this.updateProjectionMatrix();
  }
  updateProjectionMatrix() {
    const e11 = this.near;
    let t19 = e11 * Math.tan(xs * 0.5 * this.fov) / this.zoom, n33 = 2 * t19, i27 = this.aspect * n33, s18 = -0.5 * i27;
    const r24 = this.view;
    if (this.view !== null && this.view.enabled) {
      const c27 = r24.fullWidth, l25 = r24.fullHeight;
      s18 += r24.offsetX * i27 / c27, t19 -= r24.offsetY * n33 / l25, i27 *= r24.width / c27, n33 *= r24.height / l25;
    }
    const o12 = this.filmOffset;
    o12 !== 0 && (s18 += e11 * o12 / this.getFilmWidth()), this.projectionMatrix.makePerspective(s18, s18 + i27, t19, t19 - n33, e11, this.far), this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return t19.object.fov = this.fov, t19.object.zoom = this.zoom, t19.object.near = this.near, t19.object.far = this.far, t19.object.focus = this.focus, t19.object.aspect = this.aspect, this.view !== null && (t19.object.view = Object.assign({}, this.view)), t19.object.filmGauge = this.filmGauge, t19.object.filmOffset = this.filmOffset, t19;
  }
};
var as = -90;
var ls = 1;
var Pd = class extends _t3 {
  constructor(e11, t19, n33) {
    super(), this.type = "CubeCamera", this.renderTarget = n33;
    const i27 = new Vt3(as, ls, e11, t19);
    i27.layers = this.layers, i27.up.set(0, 1, 0), i27.lookAt(1, 0, 0), this.add(i27);
    const s18 = new Vt3(as, ls, e11, t19);
    s18.layers = this.layers, s18.up.set(0, 1, 0), s18.lookAt(-1, 0, 0), this.add(s18);
    const r24 = new Vt3(as, ls, e11, t19);
    r24.layers = this.layers, r24.up.set(0, 0, -1), r24.lookAt(0, 1, 0), this.add(r24);
    const o12 = new Vt3(as, ls, e11, t19);
    o12.layers = this.layers, o12.up.set(0, 0, 1), o12.lookAt(0, -1, 0), this.add(o12);
    const c27 = new Vt3(as, ls, e11, t19);
    c27.layers = this.layers, c27.up.set(0, 1, 0), c27.lookAt(0, 0, 1), this.add(c27);
    const l25 = new Vt3(as, ls, e11, t19);
    l25.layers = this.layers, l25.up.set(0, 1, 0), l25.lookAt(0, 0, -1), this.add(l25);
  }
  update(e11, t19) {
    this.parent === null && this.updateMatrixWorld();
    const n33 = this.renderTarget, [i27, s18, r24, o12, c27, l25] = this.children, u35 = e11.getRenderTarget(), h26 = e11.toneMapping, d34 = e11.xr.enabled;
    e11.toneMapping = Wn3, e11.xr.enabled = false;
    const p26 = n33.texture.generateMipmaps;
    n33.texture.generateMipmaps = false, e11.setRenderTarget(n33, 0), e11.render(t19, i27), e11.setRenderTarget(n33, 1), e11.render(t19, s18), e11.setRenderTarget(n33, 2), e11.render(t19, r24), e11.setRenderTarget(n33, 3), e11.render(t19, o12), e11.setRenderTarget(n33, 4), e11.render(t19, c27), n33.texture.generateMipmaps = p26, e11.setRenderTarget(n33, 5), e11.render(t19, l25), e11.setRenderTarget(u35), e11.toneMapping = h26, e11.xr.enabled = d34, n33.texture.needsPMREMUpdate = true;
  }
};
var _u = class extends jt4 {
  constructor(e11, t19, n33, i27, s18, r24, o12, c27, l25, u35) {
    e11 = e11 !== void 0 ? e11 : [], t19 = t19 !== void 0 ? t19 : Ss, super(e11, t19, n33, i27, s18, r24, o12, c27, l25, u35), this.isCubeTexture = true, this.flipY = false;
  }
  get images() {
    return this.image;
  }
  set images(e11) {
    this.image = e11;
  }
};
var Id = class extends Li {
  constructor(e11 = 1, t19 = {}) {
    super(e11, e11, t19), this.isWebGLCubeRenderTarget = true;
    const n33 = { width: e11, height: e11, depth: 1 }, i27 = [n33, n33, n33, n33, n33, n33];
    this.texture = new _u(i27, t19.mapping, t19.wrapS, t19.wrapT, t19.magFilter, t19.minFilter, t19.format, t19.type, t19.anisotropy, t19.encoding), this.texture.isRenderTargetTexture = true, this.texture.generateMipmaps = t19.generateMipmaps !== void 0 ? t19.generateMipmaps : false, this.texture.minFilter = t19.minFilter !== void 0 ? t19.minFilter : Ht4;
  }
  fromEquirectangularTexture(e11, t19) {
    this.texture.type = t19.type, this.texture.encoding = t19.encoding, this.texture.generateMipmaps = t19.generateMipmaps, this.texture.minFilter = t19.minFilter, this.texture.magFilter = t19.magFilter;
    const n33 = {
      uniforms: {
        tEquirect: { value: null }
      },
      vertexShader: (
        /* glsl */
        `

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`
      ),
      fragmentShader: (
        /* glsl */
        `

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`
      )
    }, i27 = new Ui(5, 5, 5), s18 = new Ri({
      name: "CubemapFromEquirect",
      uniforms: Cs(n33.uniforms),
      vertexShader: n33.vertexShader,
      fragmentShader: n33.fragmentShader,
      side: sn3,
      blending: li3
    });
    s18.uniforms.tEquirect.value = t19;
    const r24 = new Pt4(i27, s18), o12 = t19.minFilter;
    return t19.minFilter === jn3 && (t19.minFilter = Ht4), new Pd(1, 10, this).update(e11, r24), t19.minFilter = o12, r24.geometry.dispose(), r24.material.dispose(), this;
  }
  clear(e11, t19, n33, i27) {
    const s18 = e11.getRenderTarget();
    for (let r24 = 0; r24 < 6; r24++)
      e11.setRenderTarget(this, r24), e11.clear(t19, n33, i27);
    e11.setRenderTarget(s18);
  }
};
var Jo = new U7();
var Dd = new U7();
var Nd = new Qe4();
var _i3 = class {
  constructor(e11 = new U7(1, 0, 0), t19 = 0) {
    this.isPlane = true, this.normal = e11, this.constant = t19;
  }
  set(e11, t19) {
    return this.normal.copy(e11), this.constant = t19, this;
  }
  setComponents(e11, t19, n33, i27) {
    return this.normal.set(e11, t19, n33), this.constant = i27, this;
  }
  setFromNormalAndCoplanarPoint(e11, t19) {
    return this.normal.copy(e11), this.constant = -t19.dot(this.normal), this;
  }
  setFromCoplanarPoints(e11, t19, n33) {
    const i27 = Jo.subVectors(n33, t19).cross(Dd.subVectors(e11, t19)).normalize();
    return this.setFromNormalAndCoplanarPoint(i27, e11), this;
  }
  copy(e11) {
    return this.normal.copy(e11.normal), this.constant = e11.constant, this;
  }
  normalize() {
    const e11 = 1 / this.normal.length();
    return this.normal.multiplyScalar(e11), this.constant *= e11, this;
  }
  negate() {
    return this.constant *= -1, this.normal.negate(), this;
  }
  distanceToPoint(e11) {
    return this.normal.dot(e11) + this.constant;
  }
  distanceToSphere(e11) {
    return this.distanceToPoint(e11.center) - e11.radius;
  }
  projectPoint(e11, t19) {
    return t19.copy(e11).addScaledVector(this.normal, -this.distanceToPoint(e11));
  }
  intersectLine(e11, t19) {
    const n33 = e11.delta(Jo), i27 = this.normal.dot(n33);
    if (i27 === 0)
      return this.distanceToPoint(e11.start) === 0 ? t19.copy(e11.start) : null;
    const s18 = -(e11.start.dot(this.normal) + this.constant) / i27;
    return s18 < 0 || s18 > 1 ? null : t19.copy(e11.start).addScaledVector(n33, s18);
  }
  intersectsLine(e11) {
    const t19 = this.distanceToPoint(e11.start), n33 = this.distanceToPoint(e11.end);
    return t19 < 0 && n33 > 0 || n33 < 0 && t19 > 0;
  }
  intersectsBox(e11) {
    return e11.intersectsPlane(this);
  }
  intersectsSphere(e11) {
    return e11.intersectsPlane(this);
  }
  coplanarPoint(e11) {
    return e11.copy(this.normal).multiplyScalar(-this.constant);
  }
  applyMatrix4(e11, t19) {
    const n33 = t19 || Nd.getNormalMatrix(e11), i27 = this.coplanarPoint(Jo).applyMatrix4(e11), s18 = this.normal.applyMatrix3(n33).normalize();
    return this.constant = -i27.dot(s18), this;
  }
  translate(e11) {
    return this.constant -= e11.dot(this.normal), this;
  }
  equals(e11) {
    return e11.normal.equals(this.normal) && e11.constant === this.constant;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var gi3 = new Xn3();
var Or3 = new U7();
var Ra = class {
  constructor(e11 = new _i3(), t19 = new _i3(), n33 = new _i3(), i27 = new _i3(), s18 = new _i3(), r24 = new _i3()) {
    this.planes = [e11, t19, n33, i27, s18, r24];
  }
  set(e11, t19, n33, i27, s18, r24) {
    const o12 = this.planes;
    return o12[0].copy(e11), o12[1].copy(t19), o12[2].copy(n33), o12[3].copy(i27), o12[4].copy(s18), o12[5].copy(r24), this;
  }
  copy(e11) {
    const t19 = this.planes;
    for (let n33 = 0; n33 < 6; n33++)
      t19[n33].copy(e11.planes[n33]);
    return this;
  }
  setFromProjectionMatrix(e11) {
    const t19 = this.planes, n33 = e11.elements, i27 = n33[0], s18 = n33[1], r24 = n33[2], o12 = n33[3], c27 = n33[4], l25 = n33[5], u35 = n33[6], h26 = n33[7], d34 = n33[8], p26 = n33[9], g31 = n33[10], y33 = n33[11], m33 = n33[12], f39 = n33[13], E24 = n33[14], b33 = n33[15];
    return t19[0].setComponents(o12 - i27, h26 - c27, y33 - d34, b33 - m33).normalize(), t19[1].setComponents(o12 + i27, h26 + c27, y33 + d34, b33 + m33).normalize(), t19[2].setComponents(o12 + s18, h26 + l25, y33 + p26, b33 + f39).normalize(), t19[3].setComponents(o12 - s18, h26 - l25, y33 - p26, b33 - f39).normalize(), t19[4].setComponents(o12 - r24, h26 - u35, y33 - g31, b33 - E24).normalize(), t19[5].setComponents(o12 + r24, h26 + u35, y33 + g31, b33 + E24).normalize(), this;
  }
  intersectsObject(e11) {
    if (e11.boundingSphere !== void 0)
      e11.boundingSphere === null && e11.computeBoundingSphere(), gi3.copy(e11.boundingSphere).applyMatrix4(e11.matrixWorld);
    else {
      const t19 = e11.geometry;
      t19.boundingSphere === null && t19.computeBoundingSphere(), gi3.copy(t19.boundingSphere).applyMatrix4(e11.matrixWorld);
    }
    return this.intersectsSphere(gi3);
  }
  intersectsSprite(e11) {
    return gi3.center.set(0, 0, 0), gi3.radius = 0.7071067811865476, gi3.applyMatrix4(e11.matrixWorld), this.intersectsSphere(gi3);
  }
  intersectsSphere(e11) {
    const t19 = this.planes, n33 = e11.center, i27 = -e11.radius;
    for (let s18 = 0; s18 < 6; s18++)
      if (t19[s18].distanceToPoint(n33) < i27)
        return false;
    return true;
  }
  intersectsBox(e11) {
    const t19 = this.planes;
    for (let n33 = 0; n33 < 6; n33++) {
      const i27 = t19[n33];
      if (Or3.x = i27.normal.x > 0 ? e11.max.x : e11.min.x, Or3.y = i27.normal.y > 0 ? e11.max.y : e11.min.y, Or3.z = i27.normal.z > 0 ? e11.max.z : e11.min.z, i27.distanceToPoint(Or3) < 0)
        return false;
    }
    return true;
  }
  containsPoint(e11) {
    const t19 = this.planes;
    for (let n33 = 0; n33 < 6; n33++)
      if (t19[n33].distanceToPoint(e11) < 0)
        return false;
    return true;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
function xu() {
  let a22 = null, e11 = false, t19 = null, n33 = null;
  function i27(s18, r24) {
    t19(s18, r24), n33 = a22.requestAnimationFrame(i27);
  }
  return {
    start: function() {
      e11 !== true && t19 !== null && (n33 = a22.requestAnimationFrame(i27), e11 = true);
    },
    stop: function() {
      a22.cancelAnimationFrame(n33), e11 = false;
    },
    setAnimationLoop: function(s18) {
      t19 = s18;
    },
    setContext: function(s18) {
      a22 = s18;
    }
  };
}
function Ud(a22, e11) {
  const t19 = e11.isWebGL2, n33 = /* @__PURE__ */ new WeakMap();
  function i27(l25, u35) {
    const h26 = l25.array, d34 = l25.usage, p26 = a22.createBuffer();
    a22.bindBuffer(u35, p26), a22.bufferData(u35, h26, d34), l25.onUploadCallback();
    let g31;
    if (h26 instanceof Float32Array)
      g31 = 5126;
    else if (h26 instanceof Uint16Array)
      if (l25.isFloat16BufferAttribute)
        if (t19)
          g31 = 5131;
        else
          throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");
      else
        g31 = 5123;
    else if (h26 instanceof Int16Array)
      g31 = 5122;
    else if (h26 instanceof Uint32Array)
      g31 = 5125;
    else if (h26 instanceof Int32Array)
      g31 = 5124;
    else if (h26 instanceof Int8Array)
      g31 = 5120;
    else if (h26 instanceof Uint8Array)
      g31 = 5121;
    else if (h26 instanceof Uint8ClampedArray)
      g31 = 5121;
    else
      throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: " + h26);
    return {
      buffer: p26,
      type: g31,
      bytesPerElement: h26.BYTES_PER_ELEMENT,
      version: l25.version
    };
  }
  function s18(l25, u35, h26) {
    const d34 = u35.array, p26 = u35.updateRange;
    a22.bindBuffer(h26, l25), p26.count === -1 ? a22.bufferSubData(h26, 0, d34) : (t19 ? a22.bufferSubData(
      h26,
      p26.offset * d34.BYTES_PER_ELEMENT,
      d34,
      p26.offset,
      p26.count
    ) : a22.bufferSubData(
      h26,
      p26.offset * d34.BYTES_PER_ELEMENT,
      d34.subarray(p26.offset, p26.offset + p26.count)
    ), p26.count = -1), u35.onUploadCallback();
  }
  function r24(l25) {
    return l25.isInterleavedBufferAttribute && (l25 = l25.data), n33.get(l25);
  }
  function o12(l25) {
    l25.isInterleavedBufferAttribute && (l25 = l25.data);
    const u35 = n33.get(l25);
    u35 && (a22.deleteBuffer(u35.buffer), n33.delete(l25));
  }
  function c27(l25, u35) {
    if (l25.isGLBufferAttribute) {
      const d34 = n33.get(l25);
      (!d34 || d34.version < l25.version) && n33.set(l25, {
        buffer: l25.buffer,
        type: l25.type,
        bytesPerElement: l25.elementSize,
        version: l25.version
      });
      return;
    }
    l25.isInterleavedBufferAttribute && (l25 = l25.data);
    const h26 = n33.get(l25);
    h26 === void 0 ? n33.set(l25, i27(l25, u35)) : h26.version < l25.version && (s18(h26.buffer, l25, u35), h26.version = l25.version);
  }
  return {
    get: r24,
    remove: o12,
    update: c27
  };
}
var uo = class _uo extends Xt3 {
  constructor(e11 = 1, t19 = 1, n33 = 1, i27 = 1) {
    super(), this.type = "PlaneGeometry", this.parameters = {
      width: e11,
      height: t19,
      widthSegments: n33,
      heightSegments: i27
    };
    const s18 = e11 / 2, r24 = t19 / 2, o12 = Math.floor(n33), c27 = Math.floor(i27), l25 = o12 + 1, u35 = c27 + 1, h26 = e11 / o12, d34 = t19 / c27, p26 = [], g31 = [], y33 = [], m33 = [];
    for (let f39 = 0; f39 < u35; f39++) {
      const E24 = f39 * d34 - r24;
      for (let b33 = 0; b33 < l25; b33++) {
        const w29 = b33 * h26 - s18;
        g31.push(w29, -E24, 0), y33.push(0, 0, 1), m33.push(b33 / o12), m33.push(1 - f39 / c27);
      }
    }
    for (let f39 = 0; f39 < c27; f39++)
      for (let E24 = 0; E24 < o12; E24++) {
        const b33 = E24 + l25 * f39, w29 = E24 + l25 * (f39 + 1), S21 = E24 + 1 + l25 * (f39 + 1), D17 = E24 + 1 + l25 * f39;
        p26.push(b33, w29, D17), p26.push(w29, S21, D17);
      }
    this.setIndex(p26), this.setAttribute("position", new yt7(g31, 3)), this.setAttribute("normal", new yt7(y33, 3)), this.setAttribute("uv", new yt7(m33, 2));
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _uo(e11.width, e11.height, e11.widthSegments, e11.heightSegments);
  }
};
var kd = `#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`;
var Od = `#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`;
var Fd = `#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`;
var zd = `#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`;
var Bd = `#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`;
var Vd = `#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`;
var Gd = "vec3 transformed = vec3( position );";
var Hd = `vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`;
var Wd = `float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`;
var jd = `#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`;
var qd = `#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`;
var Xd = `#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`;
var Kd = `#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`;
var Yd = `#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`;
var Jd = `#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`;
var Zd = `#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`;
var $d = `#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`;
var Qd = `#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`;
var ef = `#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`;
var tf = `#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`;
var nf = `#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`;
var sf = `vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`;
var rf = `#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`;
var of = `#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`;
var af = `#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`;
var lf = `#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`;
var cf = "gl_FragColor = linearToOutputTexel( gl_FragColor );";
var uf = `vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`;
var hf = `#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`;
var df = `#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`;
var ff = `#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`;
var pf = `#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`;
var mf = `#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`;
var gf = `#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`;
var _f = `#ifdef USE_FOG
	varying float vFogDepth;
#endif`;
var xf = `#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`;
var yf = `#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`;
var vf = `#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`;
var bf = `#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`;
var Mf = `#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`;
var Sf = `LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`;
var wf = `varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`;
var Tf = `uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`;
var Af = `#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`;
var Ef = `ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`;
var Cf = `varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`;
var Lf = `BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`;
var Rf = `varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`;
var Pf = `PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`;
var If = `struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`;
var Df = `
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`;
var Nf = `#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`;
var Uf = `#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`;
var kf = `#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`;
var Of = `#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`;
var Ff = `#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`;
var zf = `#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`;
var Bf = `#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`;
var Vf = `#ifdef USE_MAP
	uniform sampler2D map;
#endif`;
var Gf = `#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`;
var Hf = `#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`;
var Wf = `float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`;
var jf = `#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`;
var qf = `#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`;
var Xf = `#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`;
var Kf = `#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`;
var Yf = `#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`;
var Jf = `float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`;
var Zf = `#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`;
var $f = `#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`;
var Qf = `#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`;
var ep = `#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`;
var tp = `#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`;
var np = `#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`;
var ip = `#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`;
var sp = `#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`;
var rp = `#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`;
var op = `#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`;
var ap = `vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`;
var lp = `#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`;
var cp = `vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`;
var up = `#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`;
var hp = `#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`;
var dp = `float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`;
var fp = `#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`;
var pp = `#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`;
var mp = `#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`;
var gp = `#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`;
var _p = `float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`;
var xp = `#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`;
var yp = `#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`;
var vp = `#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`;
var bp = `#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`;
var Mp = `float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`;
var Sp = `#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`;
var wp = `#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`;
var Tp = `#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`;
var Ap = `#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`;
var Ep = `#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`;
var Cp = `#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`;
var Lp = `#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_UV2
	attribute vec2 uv2;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`;
var Rp = `#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`;
var Pp = `#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;
var Ip = `varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`;
var Dp = `uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var Np = `varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`;
var Up = `#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var kp = `varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`;
var Op = `uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var Fp = `#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`;
var zp = `#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`;
var Bp = `#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`;
var Vp = `#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`;
var Gp = `varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`;
var Hp = `uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var Wp = `uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;
var jp = `uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`;
var qp = `#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`;
var Xp = `uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var Kp = `#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var Yp = `#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var Jp = `#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`;
var Zp = `#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var $p = `#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`;
var Qp = `#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`;
var em = `#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var tm = `#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var nm = `#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`;
var im = `#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var sm = `#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var rm = `#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var om = `uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`;
var am = `uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`;
var lm = `#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var cm = `uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`;
var um = `uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;
var hm = `uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`;
var Je4 = {
  alphamap_fragment: kd,
  alphamap_pars_fragment: Od,
  alphatest_fragment: Fd,
  alphatest_pars_fragment: zd,
  aomap_fragment: Bd,
  aomap_pars_fragment: Vd,
  begin_vertex: Gd,
  beginnormal_vertex: Hd,
  bsdfs: Wd,
  iridescence_fragment: jd,
  bumpmap_pars_fragment: qd,
  clipping_planes_fragment: Xd,
  clipping_planes_pars_fragment: Kd,
  clipping_planes_pars_vertex: Yd,
  clipping_planes_vertex: Jd,
  color_fragment: Zd,
  color_pars_fragment: $d,
  color_pars_vertex: Qd,
  color_vertex: ef,
  common: tf,
  cube_uv_reflection_fragment: nf,
  defaultnormal_vertex: sf,
  displacementmap_pars_vertex: rf,
  displacementmap_vertex: of,
  emissivemap_fragment: af,
  emissivemap_pars_fragment: lf,
  encodings_fragment: cf,
  encodings_pars_fragment: uf,
  envmap_fragment: hf,
  envmap_common_pars_fragment: df,
  envmap_pars_fragment: ff,
  envmap_pars_vertex: pf,
  envmap_physical_pars_fragment: Af,
  envmap_vertex: mf,
  fog_vertex: gf,
  fog_pars_vertex: _f,
  fog_fragment: xf,
  fog_pars_fragment: yf,
  gradientmap_pars_fragment: vf,
  lightmap_fragment: bf,
  lightmap_pars_fragment: Mf,
  lights_lambert_fragment: Sf,
  lights_lambert_pars_fragment: wf,
  lights_pars_begin: Tf,
  lights_toon_fragment: Ef,
  lights_toon_pars_fragment: Cf,
  lights_phong_fragment: Lf,
  lights_phong_pars_fragment: Rf,
  lights_physical_fragment: Pf,
  lights_physical_pars_fragment: If,
  lights_fragment_begin: Df,
  lights_fragment_maps: Nf,
  lights_fragment_end: Uf,
  logdepthbuf_fragment: kf,
  logdepthbuf_pars_fragment: Of,
  logdepthbuf_pars_vertex: Ff,
  logdepthbuf_vertex: zf,
  map_fragment: Bf,
  map_pars_fragment: Vf,
  map_particle_fragment: Gf,
  map_particle_pars_fragment: Hf,
  metalnessmap_fragment: Wf,
  metalnessmap_pars_fragment: jf,
  morphcolor_vertex: qf,
  morphnormal_vertex: Xf,
  morphtarget_pars_vertex: Kf,
  morphtarget_vertex: Yf,
  normal_fragment_begin: Jf,
  normal_fragment_maps: Zf,
  normal_pars_fragment: $f,
  normal_pars_vertex: Qf,
  normal_vertex: ep,
  normalmap_pars_fragment: tp,
  clearcoat_normal_fragment_begin: np,
  clearcoat_normal_fragment_maps: ip,
  clearcoat_pars_fragment: sp,
  iridescence_pars_fragment: rp,
  output_fragment: op,
  packing: ap,
  premultiplied_alpha_fragment: lp,
  project_vertex: cp,
  dithering_fragment: up,
  dithering_pars_fragment: hp,
  roughnessmap_fragment: dp,
  roughnessmap_pars_fragment: fp,
  shadowmap_pars_fragment: pp,
  shadowmap_pars_vertex: mp,
  shadowmap_vertex: gp,
  shadowmask_pars_fragment: _p,
  skinbase_vertex: xp,
  skinning_pars_vertex: yp,
  skinning_vertex: vp,
  skinnormal_vertex: bp,
  specularmap_fragment: Mp,
  specularmap_pars_fragment: Sp,
  tonemapping_fragment: wp,
  tonemapping_pars_fragment: Tp,
  transmission_fragment: Ap,
  transmission_pars_fragment: Ep,
  uv_pars_fragment: Cp,
  uv_pars_vertex: Lp,
  uv_vertex: Rp,
  worldpos_vertex: Pp,
  background_vert: Ip,
  background_frag: Dp,
  backgroundCube_vert: Np,
  backgroundCube_frag: Up,
  cube_vert: kp,
  cube_frag: Op,
  depth_vert: Fp,
  depth_frag: zp,
  distanceRGBA_vert: Bp,
  distanceRGBA_frag: Vp,
  equirect_vert: Gp,
  equirect_frag: Hp,
  linedashed_vert: Wp,
  linedashed_frag: jp,
  meshbasic_vert: qp,
  meshbasic_frag: Xp,
  meshlambert_vert: Kp,
  meshlambert_frag: Yp,
  meshmatcap_vert: Jp,
  meshmatcap_frag: Zp,
  meshnormal_vert: $p,
  meshnormal_frag: Qp,
  meshphong_vert: em,
  meshphong_frag: tm,
  meshphysical_vert: nm,
  meshphysical_frag: im,
  meshtoon_vert: sm,
  meshtoon_frag: rm,
  points_vert: om,
  points_frag: am,
  shadow_vert: lm,
  shadow_frag: cm,
  sprite_vert: um,
  sprite_frag: hm
};
var xe4 = {
  common: {
    diffuse: { value: new ze4(16777215) },
    opacity: { value: 1 },
    map: { value: null },
    mapTransform: { value: new Qe4() },
    alphaMap: { value: null },
    alphaMapTransform: { value: new Qe4() },
    alphaTest: { value: 0 }
  },
  specularmap: {
    specularMap: { value: null },
    specularMapTransform: { value: new Qe4() }
  },
  envmap: {
    envMap: { value: null },
    flipEnvMap: { value: -1 },
    reflectivity: { value: 1 },
    // basic, lambert, phong
    ior: { value: 1.5 },
    // physical
    refractionRatio: { value: 0.98 }
    // basic, lambert, phong
  },
  aomap: {
    aoMap: { value: null },
    aoMapIntensity: { value: 1 },
    aoMapTransform: { value: new Qe4() }
  },
  lightmap: {
    lightMap: { value: null },
    lightMapIntensity: { value: 1 },
    lightMapTransform: { value: new Qe4() }
  },
  bumpmap: {
    bumpMap: { value: null },
    bumpMapTransform: { value: new Qe4() },
    bumpScale: { value: 1 }
  },
  normalmap: {
    normalMap: { value: null },
    normalMapTransform: { value: new Qe4() },
    normalScale: { value: new We4(1, 1) }
  },
  displacementmap: {
    displacementMap: { value: null },
    displacementMapTransform: { value: new Qe4() },
    displacementScale: { value: 1 },
    displacementBias: { value: 0 }
  },
  emissivemap: {
    emissiveMap: { value: null },
    emissiveMapTransform: { value: new Qe4() }
  },
  metalnessmap: {
    metalnessMap: { value: null },
    metalnessMapTransform: { value: new Qe4() }
  },
  roughnessmap: {
    roughnessMap: { value: null },
    roughnessMapTransform: { value: new Qe4() }
  },
  gradientmap: {
    gradientMap: { value: null }
  },
  fog: {
    fogDensity: { value: 25e-5 },
    fogNear: { value: 1 },
    fogFar: { value: 2e3 },
    fogColor: { value: new ze4(16777215) }
  },
  lights: {
    ambientLightColor: { value: [] },
    lightProbe: { value: [] },
    directionalLights: { value: [], properties: {
      direction: {},
      color: {}
    } },
    directionalLightShadows: { value: [], properties: {
      shadowBias: {},
      shadowNormalBias: {},
      shadowRadius: {},
      shadowMapSize: {}
    } },
    directionalShadowMap: { value: [] },
    directionalShadowMatrix: { value: [] },
    spotLights: { value: [], properties: {
      color: {},
      position: {},
      direction: {},
      distance: {},
      coneCos: {},
      penumbraCos: {},
      decay: {}
    } },
    spotLightShadows: { value: [], properties: {
      shadowBias: {},
      shadowNormalBias: {},
      shadowRadius: {},
      shadowMapSize: {}
    } },
    spotLightMap: { value: [] },
    spotShadowMap: { value: [] },
    spotLightMatrix: { value: [] },
    pointLights: { value: [], properties: {
      color: {},
      position: {},
      decay: {},
      distance: {}
    } },
    pointLightShadows: { value: [], properties: {
      shadowBias: {},
      shadowNormalBias: {},
      shadowRadius: {},
      shadowMapSize: {},
      shadowCameraNear: {},
      shadowCameraFar: {}
    } },
    pointShadowMap: { value: [] },
    pointShadowMatrix: { value: [] },
    hemisphereLights: { value: [], properties: {
      direction: {},
      skyColor: {},
      groundColor: {}
    } },
    // TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src
    rectAreaLights: { value: [], properties: {
      color: {},
      position: {},
      width: {},
      height: {}
    } },
    ltc_1: { value: null },
    ltc_2: { value: null }
  },
  points: {
    diffuse: { value: new ze4(16777215) },
    opacity: { value: 1 },
    size: { value: 1 },
    scale: { value: 1 },
    map: { value: null },
    alphaMap: { value: null },
    alphaTest: { value: 0 },
    uvTransform: { value: new Qe4() }
  },
  sprite: {
    diffuse: { value: new ze4(16777215) },
    opacity: { value: 1 },
    center: { value: new We4(0.5, 0.5) },
    rotation: { value: 0 },
    map: { value: null },
    mapTransform: { value: new Qe4() },
    alphaMap: { value: null },
    alphaTest: { value: 0 }
  }
};
var Cn3 = {
  basic: {
    uniforms: tn3([
      xe4.common,
      xe4.specularmap,
      xe4.envmap,
      xe4.aomap,
      xe4.lightmap,
      xe4.fog
    ]),
    vertexShader: Je4.meshbasic_vert,
    fragmentShader: Je4.meshbasic_frag
  },
  lambert: {
    uniforms: tn3([
      xe4.common,
      xe4.specularmap,
      xe4.envmap,
      xe4.aomap,
      xe4.lightmap,
      xe4.emissivemap,
      xe4.bumpmap,
      xe4.normalmap,
      xe4.displacementmap,
      xe4.fog,
      xe4.lights,
      {
        emissive: { value: new ze4(0) }
      }
    ]),
    vertexShader: Je4.meshlambert_vert,
    fragmentShader: Je4.meshlambert_frag
  },
  phong: {
    uniforms: tn3([
      xe4.common,
      xe4.specularmap,
      xe4.envmap,
      xe4.aomap,
      xe4.lightmap,
      xe4.emissivemap,
      xe4.bumpmap,
      xe4.normalmap,
      xe4.displacementmap,
      xe4.fog,
      xe4.lights,
      {
        emissive: { value: new ze4(0) },
        specular: { value: new ze4(1118481) },
        shininess: { value: 30 }
      }
    ]),
    vertexShader: Je4.meshphong_vert,
    fragmentShader: Je4.meshphong_frag
  },
  standard: {
    uniforms: tn3([
      xe4.common,
      xe4.envmap,
      xe4.aomap,
      xe4.lightmap,
      xe4.emissivemap,
      xe4.bumpmap,
      xe4.normalmap,
      xe4.displacementmap,
      xe4.roughnessmap,
      xe4.metalnessmap,
      xe4.fog,
      xe4.lights,
      {
        emissive: { value: new ze4(0) },
        roughness: { value: 1 },
        metalness: { value: 0 },
        envMapIntensity: { value: 1 }
        // temporary
      }
    ]),
    vertexShader: Je4.meshphysical_vert,
    fragmentShader: Je4.meshphysical_frag
  },
  toon: {
    uniforms: tn3([
      xe4.common,
      xe4.aomap,
      xe4.lightmap,
      xe4.emissivemap,
      xe4.bumpmap,
      xe4.normalmap,
      xe4.displacementmap,
      xe4.gradientmap,
      xe4.fog,
      xe4.lights,
      {
        emissive: { value: new ze4(0) }
      }
    ]),
    vertexShader: Je4.meshtoon_vert,
    fragmentShader: Je4.meshtoon_frag
  },
  matcap: {
    uniforms: tn3([
      xe4.common,
      xe4.bumpmap,
      xe4.normalmap,
      xe4.displacementmap,
      xe4.fog,
      {
        matcap: { value: null }
      }
    ]),
    vertexShader: Je4.meshmatcap_vert,
    fragmentShader: Je4.meshmatcap_frag
  },
  points: {
    uniforms: tn3([
      xe4.points,
      xe4.fog
    ]),
    vertexShader: Je4.points_vert,
    fragmentShader: Je4.points_frag
  },
  dashed: {
    uniforms: tn3([
      xe4.common,
      xe4.fog,
      {
        scale: { value: 1 },
        dashSize: { value: 1 },
        totalSize: { value: 2 }
      }
    ]),
    vertexShader: Je4.linedashed_vert,
    fragmentShader: Je4.linedashed_frag
  },
  depth: {
    uniforms: tn3([
      xe4.common,
      xe4.displacementmap
    ]),
    vertexShader: Je4.depth_vert,
    fragmentShader: Je4.depth_frag
  },
  normal: {
    uniforms: tn3([
      xe4.common,
      xe4.bumpmap,
      xe4.normalmap,
      xe4.displacementmap,
      {
        opacity: { value: 1 }
      }
    ]),
    vertexShader: Je4.meshnormal_vert,
    fragmentShader: Je4.meshnormal_frag
  },
  sprite: {
    uniforms: tn3([
      xe4.sprite,
      xe4.fog
    ]),
    vertexShader: Je4.sprite_vert,
    fragmentShader: Je4.sprite_frag
  },
  background: {
    uniforms: {
      uvTransform: { value: new Qe4() },
      t2D: { value: null },
      backgroundIntensity: { value: 1 }
    },
    vertexShader: Je4.background_vert,
    fragmentShader: Je4.background_frag
  },
  backgroundCube: {
    uniforms: {
      envMap: { value: null },
      flipEnvMap: { value: -1 },
      backgroundBlurriness: { value: 0 },
      backgroundIntensity: { value: 1 }
    },
    vertexShader: Je4.backgroundCube_vert,
    fragmentShader: Je4.backgroundCube_frag
  },
  cube: {
    uniforms: {
      tCube: { value: null },
      tFlip: { value: -1 },
      opacity: { value: 1 }
    },
    vertexShader: Je4.cube_vert,
    fragmentShader: Je4.cube_frag
  },
  equirect: {
    uniforms: {
      tEquirect: { value: null }
    },
    vertexShader: Je4.equirect_vert,
    fragmentShader: Je4.equirect_frag
  },
  distanceRGBA: {
    uniforms: tn3([
      xe4.common,
      xe4.displacementmap,
      {
        referencePosition: { value: new U7() },
        nearDistance: { value: 1 },
        farDistance: { value: 1e3 }
      }
    ]),
    vertexShader: Je4.distanceRGBA_vert,
    fragmentShader: Je4.distanceRGBA_frag
  },
  shadow: {
    uniforms: tn3([
      xe4.lights,
      xe4.fog,
      {
        color: { value: new ze4(0) },
        opacity: { value: 1 }
      }
    ]),
    vertexShader: Je4.shadow_vert,
    fragmentShader: Je4.shadow_frag
  }
};
Cn3.physical = {
  uniforms: tn3([
    Cn3.standard.uniforms,
    {
      clearcoat: { value: 0 },
      clearcoatMap: { value: null },
      clearcoatMapTransform: { value: new Qe4() },
      clearcoatNormalMap: { value: null },
      clearcoatNormalMapTransform: { value: new Qe4() },
      clearcoatNormalScale: { value: new We4(1, 1) },
      clearcoatRoughness: { value: 0 },
      clearcoatRoughnessMap: { value: null },
      clearcoatRoughnessMapTransform: { value: new Qe4() },
      iridescence: { value: 0 },
      iridescenceMap: { value: null },
      iridescenceMapTransform: { value: new Qe4() },
      iridescenceIOR: { value: 1.3 },
      iridescenceThicknessMinimum: { value: 100 },
      iridescenceThicknessMaximum: { value: 400 },
      iridescenceThicknessMap: { value: null },
      iridescenceThicknessMapTransform: { value: new Qe4() },
      sheen: { value: 0 },
      sheenColor: { value: new ze4(0) },
      sheenColorMap: { value: null },
      sheenColorMapTransform: { value: new Qe4() },
      sheenRoughness: { value: 1 },
      sheenRoughnessMap: { value: null },
      sheenRoughnessMapTransform: { value: new Qe4() },
      transmission: { value: 0 },
      transmissionMap: { value: null },
      transmissionMapTransform: { value: new Qe4() },
      transmissionSamplerSize: { value: new We4() },
      transmissionSamplerMap: { value: null },
      thickness: { value: 0 },
      thicknessMap: { value: null },
      thicknessMapTransform: { value: new Qe4() },
      attenuationDistance: { value: 0 },
      attenuationColor: { value: new ze4(0) },
      specularColor: { value: new ze4(1, 1, 1) },
      specularColorMap: { value: null },
      specularColorMapTransform: { value: new Qe4() },
      specularIntensity: { value: 1 },
      specularIntensityMap: { value: null },
      specularIntensityMapTransform: { value: new Qe4() }
    }
  ]),
  vertexShader: Je4.meshphysical_vert,
  fragmentShader: Je4.meshphysical_frag
};
var Fr3 = { r: 0, b: 0, g: 0 };
function dm(a22, e11, t19, n33, i27, s18, r24) {
  const o12 = new ze4(0);
  let c27 = s18 === true ? 0 : 1, l25, u35, h26 = null, d34 = 0, p26 = null;
  function g31(m33, f39) {
    let E24 = false, b33 = f39.isScene === true ? f39.background : null;
    b33 && b33.isTexture && (b33 = (f39.backgroundBlurriness > 0 ? t19 : e11).get(b33));
    const w29 = a22.xr, S21 = w29.getSession && w29.getSession();
    S21 && S21.environmentBlendMode === "additive" && (b33 = null), b33 === null ? y33(o12, c27) : b33 && b33.isColor && (y33(b33, 1), E24 = true), (a22.autoClear || E24) && a22.clear(a22.autoClearColor, a22.autoClearDepth, a22.autoClearStencil), b33 && (b33.isCubeTexture || b33.mapping === lo) ? (u35 === void 0 && (u35 = new Pt4(
      new Ui(1, 1, 1),
      new Ri({
        name: "BackgroundCubeMaterial",
        uniforms: Cs(Cn3.backgroundCube.uniforms),
        vertexShader: Cn3.backgroundCube.vertexShader,
        fragmentShader: Cn3.backgroundCube.fragmentShader,
        side: sn3,
        depthTest: false,
        depthWrite: false,
        fog: false
      })
    ), u35.geometry.deleteAttribute("normal"), u35.geometry.deleteAttribute("uv"), u35.onBeforeRender = function(D17, N19, I16) {
      this.matrixWorld.copyPosition(I16.matrixWorld);
    }, Object.defineProperty(u35.material, "envMap", {
      get: function() {
        return this.uniforms.envMap.value;
      }
    }), i27.update(u35)), u35.material.uniforms.envMap.value = b33, u35.material.uniforms.flipEnvMap.value = b33.isCubeTexture && b33.isRenderTargetTexture === false ? -1 : 1, u35.material.uniforms.backgroundBlurriness.value = f39.backgroundBlurriness, u35.material.uniforms.backgroundIntensity.value = f39.backgroundIntensity, u35.material.toneMapped = b33.encoding !== st6, (h26 !== b33 || d34 !== b33.version || p26 !== a22.toneMapping) && (u35.material.needsUpdate = true, h26 = b33, d34 = b33.version, p26 = a22.toneMapping), u35.layers.enableAll(), m33.unshift(u35, u35.geometry, u35.material, 0, 0, null)) : b33 && b33.isTexture && (l25 === void 0 && (l25 = new Pt4(
      new uo(2, 2),
      new Ri({
        name: "BackgroundMaterial",
        uniforms: Cs(Cn3.background.uniforms),
        vertexShader: Cn3.background.vertexShader,
        fragmentShader: Cn3.background.fragmentShader,
        side: Pn3,
        depthTest: false,
        depthWrite: false,
        fog: false
      })
    ), l25.geometry.deleteAttribute("normal"), Object.defineProperty(l25.material, "map", {
      get: function() {
        return this.uniforms.t2D.value;
      }
    }), i27.update(l25)), l25.material.uniforms.t2D.value = b33, l25.material.uniforms.backgroundIntensity.value = f39.backgroundIntensity, l25.material.toneMapped = b33.encoding !== st6, b33.matrixAutoUpdate === true && b33.updateMatrix(), l25.material.uniforms.uvTransform.value.copy(b33.matrix), (h26 !== b33 || d34 !== b33.version || p26 !== a22.toneMapping) && (l25.material.needsUpdate = true, h26 = b33, d34 = b33.version, p26 = a22.toneMapping), l25.layers.enableAll(), m33.unshift(l25, l25.geometry, l25.material, 0, 0, null));
  }
  function y33(m33, f39) {
    m33.getRGB(Fr3, mu(a22)), n33.buffers.color.setClear(Fr3.r, Fr3.g, Fr3.b, f39, r24);
  }
  return {
    getClearColor: function() {
      return o12;
    },
    setClearColor: function(m33, f39 = 1) {
      o12.set(m33), c27 = f39, y33(o12, c27);
    },
    getClearAlpha: function() {
      return c27;
    },
    setClearAlpha: function(m33) {
      c27 = m33, y33(o12, c27);
    },
    render: g31
  };
}
function fm(a22, e11, t19, n33) {
  const i27 = a22.getParameter(34921), s18 = n33.isWebGL2 ? null : e11.get("OES_vertex_array_object"), r24 = n33.isWebGL2 || s18 !== null, o12 = {}, c27 = m33(null);
  let l25 = c27, u35 = false;
  function h26(V14, H15, W8, te7, J11) {
    let ie8 = false;
    if (r24) {
      const le7 = y33(te7, W8, H15);
      l25 !== le7 && (l25 = le7, p26(l25.object)), ie8 = f39(V14, te7, W8, J11), ie8 && E24(V14, te7, W8, J11);
    } else {
      const le7 = H15.wireframe === true;
      (l25.geometry !== te7.id || l25.program !== W8.id || l25.wireframe !== le7) && (l25.geometry = te7.id, l25.program = W8.id, l25.wireframe = le7, ie8 = true);
    }
    J11 !== null && t19.update(J11, 34963), (ie8 || u35) && (u35 = false, I16(V14, H15, W8, te7), J11 !== null && a22.bindBuffer(34963, t19.get(J11).buffer));
  }
  function d34() {
    return n33.isWebGL2 ? a22.createVertexArray() : s18.createVertexArrayOES();
  }
  function p26(V14) {
    return n33.isWebGL2 ? a22.bindVertexArray(V14) : s18.bindVertexArrayOES(V14);
  }
  function g31(V14) {
    return n33.isWebGL2 ? a22.deleteVertexArray(V14) : s18.deleteVertexArrayOES(V14);
  }
  function y33(V14, H15, W8) {
    const te7 = W8.wireframe === true;
    let J11 = o12[V14.id];
    J11 === void 0 && (J11 = {}, o12[V14.id] = J11);
    let ie8 = J11[H15.id];
    ie8 === void 0 && (ie8 = {}, J11[H15.id] = ie8);
    let le7 = ie8[te7];
    return le7 === void 0 && (le7 = m33(d34()), ie8[te7] = le7), le7;
  }
  function m33(V14) {
    const H15 = [], W8 = [], te7 = [];
    for (let J11 = 0; J11 < i27; J11++)
      H15[J11] = 0, W8[J11] = 0, te7[J11] = 0;
    return {
      // for backward compatibility on non-VAO support browser
      geometry: null,
      program: null,
      wireframe: false,
      newAttributes: H15,
      enabledAttributes: W8,
      attributeDivisors: te7,
      object: V14,
      attributes: {},
      index: null
    };
  }
  function f39(V14, H15, W8, te7) {
    const J11 = l25.attributes, ie8 = H15.attributes;
    let le7 = 0;
    const me9 = W8.getAttributes();
    for (const he8 in me9)
      if (me9[he8].location >= 0) {
        const X12 = J11[he8];
        let ee7 = ie8[he8];
        if (ee7 === void 0 && (he8 === "instanceMatrix" && V14.instanceMatrix && (ee7 = V14.instanceMatrix), he8 === "instanceColor" && V14.instanceColor && (ee7 = V14.instanceColor)), X12 === void 0 || X12.attribute !== ee7 || ee7 && X12.data !== ee7.data)
          return true;
        le7++;
      }
    return l25.attributesNum !== le7 || l25.index !== te7;
  }
  function E24(V14, H15, W8, te7) {
    const J11 = {}, ie8 = H15.attributes;
    let le7 = 0;
    const me9 = W8.getAttributes();
    for (const he8 in me9)
      if (me9[he8].location >= 0) {
        let X12 = ie8[he8];
        X12 === void 0 && (he8 === "instanceMatrix" && V14.instanceMatrix && (X12 = V14.instanceMatrix), he8 === "instanceColor" && V14.instanceColor && (X12 = V14.instanceColor));
        const ee7 = {};
        ee7.attribute = X12, X12 && X12.data && (ee7.data = X12.data), J11[he8] = ee7, le7++;
      }
    l25.attributes = J11, l25.attributesNum = le7, l25.index = te7;
  }
  function b33() {
    const V14 = l25.newAttributes;
    for (let H15 = 0, W8 = V14.length; H15 < W8; H15++)
      V14[H15] = 0;
  }
  function w29(V14) {
    S21(V14, 0);
  }
  function S21(V14, H15) {
    const W8 = l25.newAttributes, te7 = l25.enabledAttributes, J11 = l25.attributeDivisors;
    W8[V14] = 1, te7[V14] === 0 && (a22.enableVertexAttribArray(V14), te7[V14] = 1), J11[V14] !== H15 && ((n33.isWebGL2 ? a22 : e11.get("ANGLE_instanced_arrays"))[n33.isWebGL2 ? "vertexAttribDivisor" : "vertexAttribDivisorANGLE"](V14, H15), J11[V14] = H15);
  }
  function D17() {
    const V14 = l25.newAttributes, H15 = l25.enabledAttributes;
    for (let W8 = 0, te7 = H15.length; W8 < te7; W8++)
      H15[W8] !== V14[W8] && (a22.disableVertexAttribArray(W8), H15[W8] = 0);
  }
  function N19(V14, H15, W8, te7, J11, ie8) {
    n33.isWebGL2 === true && (W8 === 5124 || W8 === 5125) ? a22.vertexAttribIPointer(V14, H15, W8, J11, ie8) : a22.vertexAttribPointer(V14, H15, W8, te7, J11, ie8);
  }
  function I16(V14, H15, W8, te7) {
    if (n33.isWebGL2 === false && (V14.isInstancedMesh || te7.isInstancedBufferGeometry) && e11.get("ANGLE_instanced_arrays") === null)
      return;
    b33();
    const J11 = te7.attributes, ie8 = W8.getAttributes(), le7 = H15.defaultAttributeValues;
    for (const me9 in ie8) {
      const he8 = ie8[me9];
      if (he8.location >= 0) {
        let j18 = J11[me9];
        if (j18 === void 0 && (me9 === "instanceMatrix" && V14.instanceMatrix && (j18 = V14.instanceMatrix), me9 === "instanceColor" && V14.instanceColor && (j18 = V14.instanceColor)), j18 !== void 0) {
          const X12 = j18.normalized, ee7 = j18.itemSize, $24 = t19.get(j18);
          if ($24 === void 0)
            continue;
          const z19 = $24.buffer, be7 = $24.type, Ee5 = $24.bytesPerElement;
          if (j18.isInterleavedBufferAttribute) {
            const pe8 = j18.data, ke7 = pe8.stride, nt14 = j18.offset;
            if (pe8.isInstancedInterleavedBuffer) {
              for (let Ie7 = 0; Ie7 < he8.locationSize; Ie7++)
                S21(he8.location + Ie7, pe8.meshPerAttribute);
              V14.isInstancedMesh !== true && te7._maxInstanceCount === void 0 && (te7._maxInstanceCount = pe8.meshPerAttribute * pe8.count);
            } else
              for (let Ie7 = 0; Ie7 < he8.locationSize; Ie7++)
                w29(he8.location + Ie7);
            a22.bindBuffer(34962, z19);
            for (let Ie7 = 0; Ie7 < he8.locationSize; Ie7++)
              N19(
                he8.location + Ie7,
                ee7 / he8.locationSize,
                be7,
                X12,
                ke7 * Ee5,
                (nt14 + ee7 / he8.locationSize * Ie7) * Ee5
              );
          } else {
            if (j18.isInstancedBufferAttribute) {
              for (let pe8 = 0; pe8 < he8.locationSize; pe8++)
                S21(he8.location + pe8, j18.meshPerAttribute);
              V14.isInstancedMesh !== true && te7._maxInstanceCount === void 0 && (te7._maxInstanceCount = j18.meshPerAttribute * j18.count);
            } else
              for (let pe8 = 0; pe8 < he8.locationSize; pe8++)
                w29(he8.location + pe8);
            a22.bindBuffer(34962, z19);
            for (let pe8 = 0; pe8 < he8.locationSize; pe8++)
              N19(
                he8.location + pe8,
                ee7 / he8.locationSize,
                be7,
                X12,
                ee7 * Ee5,
                ee7 / he8.locationSize * pe8 * Ee5
              );
          }
        } else if (le7 !== void 0) {
          const X12 = le7[me9];
          if (X12 !== void 0)
            switch (X12.length) {
              case 2:
                a22.vertexAttrib2fv(he8.location, X12);
                break;
              case 3:
                a22.vertexAttrib3fv(he8.location, X12);
                break;
              case 4:
                a22.vertexAttrib4fv(he8.location, X12);
                break;
              default:
                a22.vertexAttrib1fv(he8.location, X12);
            }
        }
      }
    }
    D17();
  }
  function v30() {
    B21();
    for (const V14 in o12) {
      const H15 = o12[V14];
      for (const W8 in H15) {
        const te7 = H15[W8];
        for (const J11 in te7)
          g31(te7[J11].object), delete te7[J11];
        delete H15[W8];
      }
      delete o12[V14];
    }
  }
  function L11(V14) {
    if (o12[V14.id] === void 0)
      return;
    const H15 = o12[V14.id];
    for (const W8 in H15) {
      const te7 = H15[W8];
      for (const J11 in te7)
        g31(te7[J11].object), delete te7[J11];
      delete H15[W8];
    }
    delete o12[V14.id];
  }
  function G15(V14) {
    for (const H15 in o12) {
      const W8 = o12[H15];
      if (W8[V14.id] === void 0)
        continue;
      const te7 = W8[V14.id];
      for (const J11 in te7)
        g31(te7[J11].object), delete te7[J11];
      delete W8[V14.id];
    }
  }
  function B21() {
    k27(), u35 = true, l25 !== c27 && (l25 = c27, p26(l25.object));
  }
  function k27() {
    c27.geometry = null, c27.program = null, c27.wireframe = false;
  }
  return {
    setup: h26,
    reset: B21,
    resetDefaultState: k27,
    dispose: v30,
    releaseStatesOfGeometry: L11,
    releaseStatesOfProgram: G15,
    initAttributes: b33,
    enableAttribute: w29,
    disableUnusedAttributes: D17
  };
}
function pm(a22, e11, t19, n33) {
  const i27 = n33.isWebGL2;
  let s18;
  function r24(l25) {
    s18 = l25;
  }
  function o12(l25, u35) {
    a22.drawArrays(s18, l25, u35), t19.update(u35, s18, 1);
  }
  function c27(l25, u35, h26) {
    if (h26 === 0)
      return;
    let d34, p26;
    if (i27)
      d34 = a22, p26 = "drawArraysInstanced";
    else if (d34 = e11.get("ANGLE_instanced_arrays"), p26 = "drawArraysInstancedANGLE", d34 === null) {
      console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
      return;
    }
    d34[p26](s18, l25, u35, h26), t19.update(u35, s18, h26);
  }
  this.setMode = r24, this.render = o12, this.renderInstances = c27;
}
function mm(a22, e11, t19) {
  let n33;
  function i27() {
    if (n33 !== void 0)
      return n33;
    if (e11.has("EXT_texture_filter_anisotropic") === true) {
      const N19 = e11.get("EXT_texture_filter_anisotropic");
      n33 = a22.getParameter(N19.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
    } else
      n33 = 0;
    return n33;
  }
  function s18(N19) {
    if (N19 === "highp") {
      if (a22.getShaderPrecisionFormat(35633, 36338).precision > 0 && a22.getShaderPrecisionFormat(35632, 36338).precision > 0)
        return "highp";
      N19 = "mediump";
    }
    return N19 === "mediump" && a22.getShaderPrecisionFormat(35633, 36337).precision > 0 && a22.getShaderPrecisionFormat(35632, 36337).precision > 0 ? "mediump" : "lowp";
  }
  const r24 = typeof WebGL2RenderingContext < "u" && a22.constructor.name === "WebGL2RenderingContext";
  let o12 = t19.precision !== void 0 ? t19.precision : "highp";
  const c27 = s18(o12);
  c27 !== o12 && (console.warn("THREE.WebGLRenderer:", o12, "not supported, using", c27, "instead."), o12 = c27);
  const l25 = r24 || e11.has("WEBGL_draw_buffers"), u35 = t19.logarithmicDepthBuffer === true, h26 = a22.getParameter(34930), d34 = a22.getParameter(35660), p26 = a22.getParameter(3379), g31 = a22.getParameter(34076), y33 = a22.getParameter(34921), m33 = a22.getParameter(36347), f39 = a22.getParameter(36348), E24 = a22.getParameter(36349), b33 = d34 > 0, w29 = r24 || e11.has("OES_texture_float"), S21 = b33 && w29, D17 = r24 ? a22.getParameter(36183) : 0;
  return {
    isWebGL2: r24,
    drawBuffers: l25,
    getMaxAnisotropy: i27,
    getMaxPrecision: s18,
    precision: o12,
    logarithmicDepthBuffer: u35,
    maxTextures: h26,
    maxVertexTextures: d34,
    maxTextureSize: p26,
    maxCubemapSize: g31,
    maxAttributes: y33,
    maxVertexUniforms: m33,
    maxVaryings: f39,
    maxFragmentUniforms: E24,
    vertexTextures: b33,
    floatFragmentTextures: w29,
    floatVertexTextures: S21,
    maxSamples: D17
  };
}
function gm(a22) {
  const e11 = this;
  let t19 = null, n33 = 0, i27 = false, s18 = false;
  const r24 = new _i3(), o12 = new Qe4(), c27 = { value: null, needsUpdate: false };
  this.uniform = c27, this.numPlanes = 0, this.numIntersection = 0, this.init = function(h26, d34) {
    const p26 = h26.length !== 0 || d34 || // enable state of previous frame - the clipping code has to
    // run another frame in order to reset the state:
    n33 !== 0 || i27;
    return i27 = d34, n33 = h26.length, p26;
  }, this.beginShadows = function() {
    s18 = true, u35(null);
  }, this.endShadows = function() {
    s18 = false;
  }, this.setGlobalState = function(h26, d34) {
    t19 = u35(h26, d34, 0);
  }, this.setState = function(h26, d34, p26) {
    const g31 = h26.clippingPlanes, y33 = h26.clipIntersection, m33 = h26.clipShadows, f39 = a22.get(h26);
    if (!i27 || g31 === null || g31.length === 0 || s18 && !m33)
      s18 ? u35(null) : l25();
    else {
      const E24 = s18 ? 0 : n33, b33 = E24 * 4;
      let w29 = f39.clippingState || null;
      c27.value = w29, w29 = u35(g31, d34, b33, p26);
      for (let S21 = 0; S21 !== b33; ++S21)
        w29[S21] = t19[S21];
      f39.clippingState = w29, this.numIntersection = y33 ? this.numPlanes : 0, this.numPlanes += E24;
    }
  };
  function l25() {
    c27.value !== t19 && (c27.value = t19, c27.needsUpdate = n33 > 0), e11.numPlanes = n33, e11.numIntersection = 0;
  }
  function u35(h26, d34, p26, g31) {
    const y33 = h26 !== null ? h26.length : 0;
    let m33 = null;
    if (y33 !== 0) {
      if (m33 = c27.value, g31 !== true || m33 === null) {
        const f39 = p26 + y33 * 4, E24 = d34.matrixWorldInverse;
        o12.getNormalMatrix(E24), (m33 === null || m33.length < f39) && (m33 = new Float32Array(f39));
        for (let b33 = 0, w29 = p26; b33 !== y33; ++b33, w29 += 4)
          r24.copy(h26[b33]).applyMatrix4(E24, o12), r24.normal.toArray(m33, w29), m33[w29 + 3] = r24.constant;
      }
      c27.value = m33, c27.needsUpdate = true;
    }
    return e11.numPlanes = y33, e11.numIntersection = 0, m33;
  }
}
function _m(a22) {
  let e11 = /* @__PURE__ */ new WeakMap();
  function t19(r24, o12) {
    return o12 === da ? r24.mapping = Ss : o12 === fa && (r24.mapping = ws), r24;
  }
  function n33(r24) {
    if (r24 && r24.isTexture && r24.isRenderTargetTexture === false) {
      const o12 = r24.mapping;
      if (o12 === da || o12 === fa)
        if (e11.has(r24)) {
          const c27 = e11.get(r24).texture;
          return t19(c27, r24.mapping);
        } else {
          const c27 = r24.image;
          if (c27 && c27.height > 0) {
            const l25 = new Id(c27.height / 2);
            return l25.fromEquirectangularTexture(a22, r24), e11.set(r24, l25), r24.addEventListener("dispose", i27), t19(l25.texture, r24.mapping);
          } else
            return null;
        }
    }
    return r24;
  }
  function i27(r24) {
    const o12 = r24.target;
    o12.removeEventListener("dispose", i27);
    const c27 = e11.get(o12);
    c27 !== void 0 && (e11.delete(o12), c27.dispose());
  }
  function s18() {
    e11 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: n33,
    dispose: s18
  };
}
var ho = class extends gu {
  constructor(e11 = -1, t19 = 1, n33 = 1, i27 = -1, s18 = 0.1, r24 = 2e3) {
    super(), this.isOrthographicCamera = true, this.type = "OrthographicCamera", this.zoom = 1, this.view = null, this.left = e11, this.right = t19, this.top = n33, this.bottom = i27, this.near = s18, this.far = r24, this.updateProjectionMatrix();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.left = e11.left, this.right = e11.right, this.top = e11.top, this.bottom = e11.bottom, this.near = e11.near, this.far = e11.far, this.zoom = e11.zoom, this.view = e11.view === null ? null : Object.assign({}, e11.view), this;
  }
  setViewOffset(e11, t19, n33, i27, s18, r24) {
    this.view === null && (this.view = {
      enabled: true,
      fullWidth: 1,
      fullHeight: 1,
      offsetX: 0,
      offsetY: 0,
      width: 1,
      height: 1
    }), this.view.enabled = true, this.view.fullWidth = e11, this.view.fullHeight = t19, this.view.offsetX = n33, this.view.offsetY = i27, this.view.width = s18, this.view.height = r24, this.updateProjectionMatrix();
  }
  clearViewOffset() {
    this.view !== null && (this.view.enabled = false), this.updateProjectionMatrix();
  }
  updateProjectionMatrix() {
    const e11 = (this.right - this.left) / (2 * this.zoom), t19 = (this.top - this.bottom) / (2 * this.zoom), n33 = (this.right + this.left) / 2, i27 = (this.top + this.bottom) / 2;
    let s18 = n33 - e11, r24 = n33 + e11, o12 = i27 + t19, c27 = i27 - t19;
    if (this.view !== null && this.view.enabled) {
      const l25 = (this.right - this.left) / this.view.fullWidth / this.zoom, u35 = (this.top - this.bottom) / this.view.fullHeight / this.zoom;
      s18 += l25 * this.view.offsetX, r24 = s18 + l25 * this.view.width, o12 -= u35 * this.view.offsetY, c27 = o12 - u35 * this.view.height;
    }
    this.projectionMatrix.makeOrthographic(s18, r24, o12, c27, this.near, this.far), this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return t19.object.zoom = this.zoom, t19.object.left = this.left, t19.object.right = this.right, t19.object.top = this.top, t19.object.bottom = this.bottom, t19.object.near = this.near, t19.object.far = this.far, this.view !== null && (t19.object.view = Object.assign({}, this.view)), t19;
  }
};
var ms = 4;
var Kl = [0.125, 0.215, 0.35, 0.446, 0.526, 0.582];
var yi3 = 20;
var Zo = new ho();
var Yl = new ze4();
var $o = null;
var xi3 = (1 + Math.sqrt(5)) / 2;
var cs = 1 / xi3;
var Jl = [
  new U7(1, 1, 1),
  new U7(-1, 1, 1),
  new U7(1, 1, -1),
  new U7(-1, 1, -1),
  new U7(0, xi3, cs),
  new U7(0, xi3, -cs),
  new U7(cs, 0, xi3),
  new U7(-cs, 0, xi3),
  new U7(xi3, cs, 0),
  new U7(-xi3, cs, 0)
];
var Zl = class {
  constructor(e11) {
    this._renderer = e11, this._pingPongRenderTarget = null, this._lodMax = 0, this._cubeSize = 0, this._lodPlanes = [], this._sizeLods = [], this._sigmas = [], this._blurMaterial = null, this._cubemapMaterial = null, this._equirectMaterial = null, this._compileMaterial(this._blurMaterial);
  }
  /**
   * Generates a PMREM from a supplied Scene, which can be faster than using an
   * image if networking bandwidth is low. Optional sigma specifies a blur radius
   * in radians to be applied to the scene before PMREM generation. Optional near
   * and far planes ensure the scene is rendered in its entirety (the cubeCamera
   * is placed at the origin).
   */
  fromScene(e11, t19 = 0, n33 = 0.1, i27 = 100) {
    $o = this._renderer.getRenderTarget(), this._setSize(256);
    const s18 = this._allocateTargets();
    return s18.depthBuffer = true, this._sceneToCubeUV(e11, n33, i27, s18), t19 > 0 && this._blur(s18, 0, 0, t19), this._applyPMREM(s18), this._cleanup(s18), s18;
  }
  /**
   * Generates a PMREM from an equirectangular texture, which can be either LDR
   * or HDR. The ideal input image size is 1k (1024 x 512),
   * as this matches best with the 256 x 256 cubemap output.
   */
  fromEquirectangular(e11, t19 = null) {
    return this._fromTexture(e11, t19);
  }
  /**
   * Generates a PMREM from an cubemap texture, which can be either LDR
   * or HDR. The ideal input cube size is 256 x 256,
   * as this matches best with the 256 x 256 cubemap output.
   */
  fromCubemap(e11, t19 = null) {
    return this._fromTexture(e11, t19);
  }
  /**
   * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during
   * your texture's network fetch for increased concurrency.
   */
  compileCubemapShader() {
    this._cubemapMaterial === null && (this._cubemapMaterial = ec(), this._compileMaterial(this._cubemapMaterial));
  }
  /**
   * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during
   * your texture's network fetch for increased concurrency.
   */
  compileEquirectangularShader() {
    this._equirectMaterial === null && (this._equirectMaterial = Ql(), this._compileMaterial(this._equirectMaterial));
  }
  /**
   * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,
   * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on
   * one of them will cause any others to also become unusable.
   */
  dispose() {
    this._dispose(), this._cubemapMaterial !== null && this._cubemapMaterial.dispose(), this._equirectMaterial !== null && this._equirectMaterial.dispose();
  }
  // private interface
  _setSize(e11) {
    this._lodMax = Math.floor(Math.log2(e11)), this._cubeSize = Math.pow(2, this._lodMax);
  }
  _dispose() {
    this._blurMaterial !== null && this._blurMaterial.dispose(), this._pingPongRenderTarget !== null && this._pingPongRenderTarget.dispose();
    for (let e11 = 0; e11 < this._lodPlanes.length; e11++)
      this._lodPlanes[e11].dispose();
  }
  _cleanup(e11) {
    this._renderer.setRenderTarget($o), e11.scissorTest = false, zr3(e11, 0, 0, e11.width, e11.height);
  }
  _fromTexture(e11, t19) {
    e11.mapping === Ss || e11.mapping === ws ? this._setSize(e11.image.length === 0 ? 16 : e11.image[0].width || e11.image[0].image.width) : this._setSize(e11.image.width / 4), $o = this._renderer.getRenderTarget();
    const n33 = t19 || this._allocateTargets();
    return this._textureToCubeUV(e11, n33), this._applyPMREM(n33), this._cleanup(n33), n33;
  }
  _allocateTargets() {
    const e11 = 3 * Math.max(this._cubeSize, 112), t19 = 4 * this._cubeSize, n33 = {
      magFilter: Ht4,
      minFilter: Ht4,
      generateMipmaps: false,
      type: Qs,
      format: pn3,
      encoding: Ci,
      depthBuffer: false
    }, i27 = $l(e11, t19, n33);
    if (this._pingPongRenderTarget === null || this._pingPongRenderTarget.width !== e11 || this._pingPongRenderTarget.height !== t19) {
      this._pingPongRenderTarget !== null && this._dispose(), this._pingPongRenderTarget = $l(e11, t19, n33);
      const { _lodMax: s18 } = this;
      ({ sizeLods: this._sizeLods, lodPlanes: this._lodPlanes, sigmas: this._sigmas } = xm(s18)), this._blurMaterial = ym(s18, e11, t19);
    }
    return i27;
  }
  _compileMaterial(e11) {
    const t19 = new Pt4(this._lodPlanes[0], e11);
    this._renderer.compile(t19, Zo);
  }
  _sceneToCubeUV(e11, t19, n33, i27) {
    const o12 = new Vt3(90, 1, t19, n33), c27 = [1, -1, 1, 1, 1, 1], l25 = [1, 1, 1, -1, -1, -1], u35 = this._renderer, h26 = u35.autoClear, d34 = u35.toneMapping;
    u35.getClearColor(Yl), u35.toneMapping = Wn3, u35.autoClear = false;
    const p26 = new Mn3({
      name: "PMREM.Background",
      side: sn3,
      depthWrite: false,
      depthTest: false
    }), g31 = new Pt4(new Ui(), p26);
    let y33 = false;
    const m33 = e11.background;
    m33 ? m33.isColor && (p26.color.copy(m33), e11.background = null, y33 = true) : (p26.color.copy(Yl), y33 = true);
    for (let f39 = 0; f39 < 6; f39++) {
      const E24 = f39 % 3;
      E24 === 0 ? (o12.up.set(0, c27[f39], 0), o12.lookAt(l25[f39], 0, 0)) : E24 === 1 ? (o12.up.set(0, 0, c27[f39]), o12.lookAt(0, l25[f39], 0)) : (o12.up.set(0, c27[f39], 0), o12.lookAt(0, 0, l25[f39]));
      const b33 = this._cubeSize;
      zr3(i27, E24 * b33, f39 > 2 ? b33 : 0, b33, b33), u35.setRenderTarget(i27), y33 && u35.render(g31, o12), u35.render(e11, o12);
    }
    g31.geometry.dispose(), g31.material.dispose(), u35.toneMapping = d34, u35.autoClear = h26, e11.background = m33;
  }
  _textureToCubeUV(e11, t19) {
    const n33 = this._renderer, i27 = e11.mapping === Ss || e11.mapping === ws;
    i27 ? (this._cubemapMaterial === null && (this._cubemapMaterial = ec()), this._cubemapMaterial.uniforms.flipEnvMap.value = e11.isRenderTargetTexture === false ? -1 : 1) : this._equirectMaterial === null && (this._equirectMaterial = Ql());
    const s18 = i27 ? this._cubemapMaterial : this._equirectMaterial, r24 = new Pt4(this._lodPlanes[0], s18), o12 = s18.uniforms;
    o12.envMap.value = e11;
    const c27 = this._cubeSize;
    zr3(t19, 0, 0, 3 * c27, 2 * c27), n33.setRenderTarget(t19), n33.render(r24, Zo);
  }
  _applyPMREM(e11) {
    const t19 = this._renderer, n33 = t19.autoClear;
    t19.autoClear = false;
    for (let i27 = 1; i27 < this._lodPlanes.length; i27++) {
      const s18 = Math.sqrt(this._sigmas[i27] * this._sigmas[i27] - this._sigmas[i27 - 1] * this._sigmas[i27 - 1]), r24 = Jl[(i27 - 1) % Jl.length];
      this._blur(e11, i27 - 1, i27, s18, r24);
    }
    t19.autoClear = n33;
  }
  /**
   * This is a two-pass Gaussian blur for a cubemap. Normally this is done
   * vertically and horizontally, but this breaks down on a cube. Here we apply
   * the blur latitudinally (around the poles), and then longitudinally (towards
   * the poles) to approximate the orthogonally-separable blur. It is least
   * accurate at the poles, but still does a decent job.
   */
  _blur(e11, t19, n33, i27, s18) {
    const r24 = this._pingPongRenderTarget;
    this._halfBlur(
      e11,
      r24,
      t19,
      n33,
      i27,
      "latitudinal",
      s18
    ), this._halfBlur(
      r24,
      e11,
      n33,
      n33,
      i27,
      "longitudinal",
      s18
    );
  }
  _halfBlur(e11, t19, n33, i27, s18, r24, o12) {
    const c27 = this._renderer, l25 = this._blurMaterial;
    r24 !== "latitudinal" && r24 !== "longitudinal" && console.error(
      "blur direction must be either latitudinal or longitudinal!"
    );
    const u35 = 3, h26 = new Pt4(this._lodPlanes[i27], l25), d34 = l25.uniforms, p26 = this._sizeLods[n33] - 1, g31 = isFinite(s18) ? Math.PI / (2 * p26) : 2 * Math.PI / (2 * yi3 - 1), y33 = s18 / g31, m33 = isFinite(s18) ? 1 + Math.floor(u35 * y33) : yi3;
    m33 > yi3 && console.warn(`sigmaRadians, ${s18}, is too large and will clip, as it requested ${m33} samples when the maximum is set to ${yi3}`);
    const f39 = [];
    let E24 = 0;
    for (let N19 = 0; N19 < yi3; ++N19) {
      const I16 = N19 / y33, v30 = Math.exp(-I16 * I16 / 2);
      f39.push(v30), N19 === 0 ? E24 += v30 : N19 < m33 && (E24 += 2 * v30);
    }
    for (let N19 = 0; N19 < f39.length; N19++)
      f39[N19] = f39[N19] / E24;
    d34.envMap.value = e11.texture, d34.samples.value = m33, d34.weights.value = f39, d34.latitudinal.value = r24 === "latitudinal", o12 && (d34.poleAxis.value = o12);
    const { _lodMax: b33 } = this;
    d34.dTheta.value = g31, d34.mipInt.value = b33 - n33;
    const w29 = this._sizeLods[i27], S21 = 3 * w29 * (i27 > b33 - ms ? i27 - b33 + ms : 0), D17 = 4 * (this._cubeSize - w29);
    zr3(t19, S21, D17, 3 * w29, 2 * w29), c27.setRenderTarget(t19), c27.render(h26, Zo);
  }
};
function xm(a22) {
  const e11 = [], t19 = [], n33 = [];
  let i27 = a22;
  const s18 = a22 - ms + 1 + Kl.length;
  for (let r24 = 0; r24 < s18; r24++) {
    const o12 = Math.pow(2, i27);
    t19.push(o12);
    let c27 = 1 / o12;
    r24 > a22 - ms ? c27 = Kl[r24 - a22 + ms - 1] : r24 === 0 && (c27 = 0), n33.push(c27);
    const l25 = 1 / (o12 - 2), u35 = -l25, h26 = 1 + l25, d34 = [u35, u35, h26, u35, h26, h26, u35, u35, h26, h26, u35, h26], p26 = 6, g31 = 6, y33 = 3, m33 = 2, f39 = 1, E24 = new Float32Array(y33 * g31 * p26), b33 = new Float32Array(m33 * g31 * p26), w29 = new Float32Array(f39 * g31 * p26);
    for (let D17 = 0; D17 < p26; D17++) {
      const N19 = D17 % 3 * 2 / 3 - 1, I16 = D17 > 2 ? 0 : -1, v30 = [
        N19,
        I16,
        0,
        N19 + 2 / 3,
        I16,
        0,
        N19 + 2 / 3,
        I16 + 1,
        0,
        N19,
        I16,
        0,
        N19 + 2 / 3,
        I16 + 1,
        0,
        N19,
        I16 + 1,
        0
      ];
      E24.set(v30, y33 * g31 * D17), b33.set(d34, m33 * g31 * D17);
      const L11 = [D17, D17, D17, D17, D17, D17];
      w29.set(L11, f39 * g31 * D17);
    }
    const S21 = new Xt3();
    S21.setAttribute("position", new Gt3(E24, y33)), S21.setAttribute("uv", new Gt3(b33, m33)), S21.setAttribute("faceIndex", new Gt3(w29, f39)), e11.push(S21), i27 > ms && i27--;
  }
  return { lodPlanes: e11, sizeLods: t19, sigmas: n33 };
}
function $l(a22, e11, t19) {
  const n33 = new Li(a22, e11, t19);
  return n33.texture.mapping = lo, n33.texture.name = "PMREM.cubeUv", n33.scissorTest = true, n33;
}
function zr3(a22, e11, t19, n33, i27) {
  a22.viewport.set(e11, t19, n33, i27), a22.scissor.set(e11, t19, n33, i27);
}
function ym(a22, e11, t19) {
  const n33 = new Float32Array(yi3), i27 = new U7(0, 1, 0);
  return new Ri({
    name: "SphericalGaussianBlur",
    defines: {
      n: yi3,
      CUBEUV_TEXEL_WIDTH: 1 / e11,
      CUBEUV_TEXEL_HEIGHT: 1 / t19,
      CUBEUV_MAX_MIP: `${a22}.0`
    },
    uniforms: {
      envMap: { value: null },
      samples: { value: 1 },
      weights: { value: n33 },
      latitudinal: { value: false },
      dTheta: { value: 0 },
      mipInt: { value: 0 },
      poleAxis: { value: i27 }
    },
    vertexShader: Pa(),
    fragmentShader: (
      /* glsl */
      `

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`
    ),
    blending: li3,
    depthTest: false,
    depthWrite: false
  });
}
function Ql() {
  return new Ri({
    name: "EquirectangularToCubeUV",
    uniforms: {
      envMap: { value: null }
    },
    vertexShader: Pa(),
    fragmentShader: (
      /* glsl */
      `

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`
    ),
    blending: li3,
    depthTest: false,
    depthWrite: false
  });
}
function ec() {
  return new Ri({
    name: "CubemapToCubeUV",
    uniforms: {
      envMap: { value: null },
      flipEnvMap: { value: -1 }
    },
    vertexShader: Pa(),
    fragmentShader: (
      /* glsl */
      `

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`
    ),
    blending: li3,
    depthTest: false,
    depthWrite: false
  });
}
function Pa() {
  return (
    /* glsl */
    `

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`
  );
}
function vm(a22) {
  let e11 = /* @__PURE__ */ new WeakMap(), t19 = null;
  function n33(o12) {
    if (o12 && o12.isTexture) {
      const c27 = o12.mapping, l25 = c27 === da || c27 === fa, u35 = c27 === Ss || c27 === ws;
      if (l25 || u35)
        if (o12.isRenderTargetTexture && o12.needsPMREMUpdate === true) {
          o12.needsPMREMUpdate = false;
          let h26 = e11.get(o12);
          return t19 === null && (t19 = new Zl(a22)), h26 = l25 ? t19.fromEquirectangular(o12, h26) : t19.fromCubemap(o12, h26), e11.set(o12, h26), h26.texture;
        } else {
          if (e11.has(o12))
            return e11.get(o12).texture;
          {
            const h26 = o12.image;
            if (l25 && h26 && h26.height > 0 || u35 && h26 && i27(h26)) {
              t19 === null && (t19 = new Zl(a22));
              const d34 = l25 ? t19.fromEquirectangular(o12) : t19.fromCubemap(o12);
              return e11.set(o12, d34), o12.addEventListener("dispose", s18), d34.texture;
            } else
              return null;
          }
        }
    }
    return o12;
  }
  function i27(o12) {
    let c27 = 0;
    const l25 = 6;
    for (let u35 = 0; u35 < l25; u35++)
      o12[u35] !== void 0 && c27++;
    return c27 === l25;
  }
  function s18(o12) {
    const c27 = o12.target;
    c27.removeEventListener("dispose", s18);
    const l25 = e11.get(c27);
    l25 !== void 0 && (e11.delete(c27), l25.dispose());
  }
  function r24() {
    e11 = /* @__PURE__ */ new WeakMap(), t19 !== null && (t19.dispose(), t19 = null);
  }
  return {
    get: n33,
    dispose: r24
  };
}
function bm(a22) {
  const e11 = {};
  function t19(n33) {
    if (e11[n33] !== void 0)
      return e11[n33];
    let i27;
    switch (n33) {
      case "WEBGL_depth_texture":
        i27 = a22.getExtension("WEBGL_depth_texture") || a22.getExtension("MOZ_WEBGL_depth_texture") || a22.getExtension("WEBKIT_WEBGL_depth_texture");
        break;
      case "EXT_texture_filter_anisotropic":
        i27 = a22.getExtension("EXT_texture_filter_anisotropic") || a22.getExtension("MOZ_EXT_texture_filter_anisotropic") || a22.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
        break;
      case "WEBGL_compressed_texture_s3tc":
        i27 = a22.getExtension("WEBGL_compressed_texture_s3tc") || a22.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || a22.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
        break;
      case "WEBGL_compressed_texture_pvrtc":
        i27 = a22.getExtension("WEBGL_compressed_texture_pvrtc") || a22.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
        break;
      default:
        i27 = a22.getExtension(n33);
    }
    return e11[n33] = i27, i27;
  }
  return {
    has: function(n33) {
      return t19(n33) !== null;
    },
    init: function(n33) {
      n33.isWebGL2 ? t19("EXT_color_buffer_float") : (t19("WEBGL_depth_texture"), t19("OES_texture_float"), t19("OES_texture_half_float"), t19("OES_texture_half_float_linear"), t19("OES_standard_derivatives"), t19("OES_element_index_uint"), t19("OES_vertex_array_object"), t19("ANGLE_instanced_arrays")), t19("OES_texture_float_linear"), t19("EXT_color_buffer_half_float"), t19("WEBGL_multisampled_render_to_texture");
    },
    get: function(n33) {
      const i27 = t19(n33);
      return i27 === null && console.warn("THREE.WebGLRenderer: " + n33 + " extension not supported."), i27;
    }
  };
}
function Mm(a22, e11, t19, n33) {
  const i27 = {}, s18 = /* @__PURE__ */ new WeakMap();
  function r24(h26) {
    const d34 = h26.target;
    d34.index !== null && e11.remove(d34.index);
    for (const g31 in d34.attributes)
      e11.remove(d34.attributes[g31]);
    d34.removeEventListener("dispose", r24), delete i27[d34.id];
    const p26 = s18.get(d34);
    p26 && (e11.remove(p26), s18.delete(d34)), n33.releaseStatesOfGeometry(d34), d34.isInstancedBufferGeometry === true && delete d34._maxInstanceCount, t19.memory.geometries--;
  }
  function o12(h26, d34) {
    return i27[d34.id] === true || (d34.addEventListener("dispose", r24), i27[d34.id] = true, t19.memory.geometries++), d34;
  }
  function c27(h26) {
    const d34 = h26.attributes;
    for (const g31 in d34)
      e11.update(d34[g31], 34962);
    const p26 = h26.morphAttributes;
    for (const g31 in p26) {
      const y33 = p26[g31];
      for (let m33 = 0, f39 = y33.length; m33 < f39; m33++)
        e11.update(y33[m33], 34962);
    }
  }
  function l25(h26) {
    const d34 = [], p26 = h26.index, g31 = h26.attributes.position;
    let y33 = 0;
    if (p26 !== null) {
      const E24 = p26.array;
      y33 = p26.version;
      for (let b33 = 0, w29 = E24.length; b33 < w29; b33 += 3) {
        const S21 = E24[b33 + 0], D17 = E24[b33 + 1], N19 = E24[b33 + 2];
        d34.push(S21, D17, D17, N19, N19, S21);
      }
    } else {
      const E24 = g31.array;
      y33 = g31.version;
      for (let b33 = 0, w29 = E24.length / 3 - 1; b33 < w29; b33 += 3) {
        const S21 = b33 + 0, D17 = b33 + 1, N19 = b33 + 2;
        d34.push(S21, D17, D17, N19, N19, S21);
      }
    }
    const m33 = new (au(d34) ? pu : fu)(d34, 1);
    m33.version = y33;
    const f39 = s18.get(h26);
    f39 && e11.remove(f39), s18.set(h26, m33);
  }
  function u35(h26) {
    const d34 = s18.get(h26);
    if (d34) {
      const p26 = h26.index;
      p26 !== null && d34.version < p26.version && l25(h26);
    } else
      l25(h26);
    return s18.get(h26);
  }
  return {
    get: o12,
    update: c27,
    getWireframeAttribute: u35
  };
}
function Sm(a22, e11, t19, n33) {
  const i27 = n33.isWebGL2;
  let s18;
  function r24(d34) {
    s18 = d34;
  }
  let o12, c27;
  function l25(d34) {
    o12 = d34.type, c27 = d34.bytesPerElement;
  }
  function u35(d34, p26) {
    a22.drawElements(s18, p26, o12, d34 * c27), t19.update(p26, s18, 1);
  }
  function h26(d34, p26, g31) {
    if (g31 === 0)
      return;
    let y33, m33;
    if (i27)
      y33 = a22, m33 = "drawElementsInstanced";
    else if (y33 = e11.get("ANGLE_instanced_arrays"), m33 = "drawElementsInstancedANGLE", y33 === null) {
      console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
      return;
    }
    y33[m33](s18, p26, o12, d34 * c27, g31), t19.update(p26, s18, g31);
  }
  this.setMode = r24, this.setIndex = l25, this.render = u35, this.renderInstances = h26;
}
function wm(a22) {
  const e11 = {
    geometries: 0,
    textures: 0
  }, t19 = {
    frame: 0,
    calls: 0,
    triangles: 0,
    points: 0,
    lines: 0
  };
  function n33(s18, r24, o12) {
    switch (t19.calls++, r24) {
      case 4:
        t19.triangles += o12 * (s18 / 3);
        break;
      case 1:
        t19.lines += o12 * (s18 / 2);
        break;
      case 3:
        t19.lines += o12 * (s18 - 1);
        break;
      case 2:
        t19.lines += o12 * s18;
        break;
      case 0:
        t19.points += o12 * s18;
        break;
      default:
        console.error("THREE.WebGLInfo: Unknown draw mode:", r24);
        break;
    }
  }
  function i27() {
    t19.frame++, t19.calls = 0, t19.triangles = 0, t19.points = 0, t19.lines = 0;
  }
  return {
    memory: e11,
    render: t19,
    programs: null,
    autoReset: true,
    reset: i27,
    update: n33
  };
}
function Tm(a22, e11) {
  return a22[0] - e11[0];
}
function Am(a22, e11) {
  return Math.abs(e11[1]) - Math.abs(a22[1]);
}
function Em(a22, e11, t19) {
  const n33 = {}, i27 = new Float32Array(8), s18 = /* @__PURE__ */ new WeakMap(), r24 = new gt5(), o12 = [];
  for (let l25 = 0; l25 < 8; l25++)
    o12[l25] = [l25, 0];
  function c27(l25, u35, h26) {
    const d34 = l25.morphTargetInfluences;
    if (e11.isWebGL2 === true) {
      const p26 = u35.morphAttributes.position || u35.morphAttributes.normal || u35.morphAttributes.color, g31 = p26 !== void 0 ? p26.length : 0;
      let y33 = s18.get(u35);
      if (y33 === void 0 || y33.count !== g31) {
        let V14 = function() {
          B21.dispose(), s18.delete(u35), u35.removeEventListener("dispose", V14);
        };
        y33 !== void 0 && y33.texture.dispose();
        const E24 = u35.morphAttributes.position !== void 0, b33 = u35.morphAttributes.normal !== void 0, w29 = u35.morphAttributes.color !== void 0, S21 = u35.morphAttributes.position || [], D17 = u35.morphAttributes.normal || [], N19 = u35.morphAttributes.color || [];
        let I16 = 0;
        E24 === true && (I16 = 1), b33 === true && (I16 = 2), w29 === true && (I16 = 3);
        let v30 = u35.attributes.position.count * I16, L11 = 1;
        v30 > e11.maxTextureSize && (L11 = Math.ceil(v30 / e11.maxTextureSize), v30 = e11.maxTextureSize);
        const G15 = new Float32Array(v30 * L11 * 4 * g31), B21 = new uu(G15, v30, L11, g31);
        B21.type = ai3, B21.needsUpdate = true;
        const k27 = I16 * 4;
        for (let H15 = 0; H15 < g31; H15++) {
          const W8 = S21[H15], te7 = D17[H15], J11 = N19[H15], ie8 = v30 * L11 * 4 * H15;
          for (let le7 = 0; le7 < W8.count; le7++) {
            const me9 = le7 * k27;
            E24 === true && (r24.fromBufferAttribute(W8, le7), G15[ie8 + me9 + 0] = r24.x, G15[ie8 + me9 + 1] = r24.y, G15[ie8 + me9 + 2] = r24.z, G15[ie8 + me9 + 3] = 0), b33 === true && (r24.fromBufferAttribute(te7, le7), G15[ie8 + me9 + 4] = r24.x, G15[ie8 + me9 + 5] = r24.y, G15[ie8 + me9 + 6] = r24.z, G15[ie8 + me9 + 7] = 0), w29 === true && (r24.fromBufferAttribute(J11, le7), G15[ie8 + me9 + 8] = r24.x, G15[ie8 + me9 + 9] = r24.y, G15[ie8 + me9 + 10] = r24.z, G15[ie8 + me9 + 11] = J11.itemSize === 4 ? r24.w : 1);
          }
        }
        y33 = {
          count: g31,
          texture: B21,
          size: new We4(v30, L11)
        }, s18.set(u35, y33), u35.addEventListener("dispose", V14);
      }
      let m33 = 0;
      for (let E24 = 0; E24 < d34.length; E24++)
        m33 += d34[E24];
      const f39 = u35.morphTargetsRelative ? 1 : 1 - m33;
      h26.getUniforms().setValue(a22, "morphTargetBaseInfluence", f39), h26.getUniforms().setValue(a22, "morphTargetInfluences", d34), h26.getUniforms().setValue(a22, "morphTargetsTexture", y33.texture, t19), h26.getUniforms().setValue(a22, "morphTargetsTextureSize", y33.size);
    } else {
      const p26 = d34 === void 0 ? 0 : d34.length;
      let g31 = n33[u35.id];
      if (g31 === void 0 || g31.length !== p26) {
        g31 = [];
        for (let b33 = 0; b33 < p26; b33++)
          g31[b33] = [b33, 0];
        n33[u35.id] = g31;
      }
      for (let b33 = 0; b33 < p26; b33++) {
        const w29 = g31[b33];
        w29[0] = b33, w29[1] = d34[b33];
      }
      g31.sort(Am);
      for (let b33 = 0; b33 < 8; b33++)
        b33 < p26 && g31[b33][1] ? (o12[b33][0] = g31[b33][0], o12[b33][1] = g31[b33][1]) : (o12[b33][0] = Number.MAX_SAFE_INTEGER, o12[b33][1] = 0);
      o12.sort(Tm);
      const y33 = u35.morphAttributes.position, m33 = u35.morphAttributes.normal;
      let f39 = 0;
      for (let b33 = 0; b33 < 8; b33++) {
        const w29 = o12[b33], S21 = w29[0], D17 = w29[1];
        S21 !== Number.MAX_SAFE_INTEGER && D17 ? (y33 && u35.getAttribute("morphTarget" + b33) !== y33[S21] && u35.setAttribute("morphTarget" + b33, y33[S21]), m33 && u35.getAttribute("morphNormal" + b33) !== m33[S21] && u35.setAttribute("morphNormal" + b33, m33[S21]), i27[b33] = D17, f39 += D17) : (y33 && u35.hasAttribute("morphTarget" + b33) === true && u35.deleteAttribute("morphTarget" + b33), m33 && u35.hasAttribute("morphNormal" + b33) === true && u35.deleteAttribute("morphNormal" + b33), i27[b33] = 0);
      }
      const E24 = u35.morphTargetsRelative ? 1 : 1 - f39;
      h26.getUniforms().setValue(a22, "morphTargetBaseInfluence", E24), h26.getUniforms().setValue(a22, "morphTargetInfluences", i27);
    }
  }
  return {
    update: c27
  };
}
function Cm(a22, e11, t19, n33) {
  let i27 = /* @__PURE__ */ new WeakMap();
  function s18(c27) {
    const l25 = n33.render.frame, u35 = c27.geometry, h26 = e11.get(c27, u35);
    return i27.get(h26) !== l25 && (e11.update(h26), i27.set(h26, l25)), c27.isInstancedMesh && (c27.hasEventListener("dispose", o12) === false && c27.addEventListener("dispose", o12), t19.update(c27.instanceMatrix, 34962), c27.instanceColor !== null && t19.update(c27.instanceColor, 34962)), h26;
  }
  function r24() {
    i27 = /* @__PURE__ */ new WeakMap();
  }
  function o12(c27) {
    const l25 = c27.target;
    l25.removeEventListener("dispose", o12), t19.remove(l25.instanceMatrix), l25.instanceColor !== null && t19.remove(l25.instanceColor);
  }
  return {
    update: s18,
    dispose: r24
  };
}
var yu = new jt4();
var vu = new uu();
var bu = new gd();
var Mu = new _u();
var tc = [];
var nc = [];
var ic = new Float32Array(16);
var sc = new Float32Array(9);
var rc = new Float32Array(4);
function Ns(a22, e11, t19) {
  const n33 = a22[0];
  if (n33 <= 0 || n33 > 0)
    return a22;
  const i27 = e11 * t19;
  let s18 = tc[i27];
  if (s18 === void 0 && (s18 = new Float32Array(i27), tc[i27] = s18), e11 !== 0) {
    n33.toArray(s18, 0);
    for (let r24 = 1, o12 = 0; r24 !== e11; ++r24)
      o12 += t19, a22[r24].toArray(s18, o12);
  }
  return s18;
}
function Nt4(a22, e11) {
  if (a22.length !== e11.length)
    return false;
  for (let t19 = 0, n33 = a22.length; t19 < n33; t19++)
    if (a22[t19] !== e11[t19])
      return false;
  return true;
}
function Ut5(a22, e11) {
  for (let t19 = 0, n33 = e11.length; t19 < n33; t19++)
    a22[t19] = e11[t19];
}
function fo(a22, e11) {
  let t19 = nc[e11];
  t19 === void 0 && (t19 = new Int32Array(e11), nc[e11] = t19);
  for (let n33 = 0; n33 !== e11; ++n33)
    t19[n33] = a22.allocateTextureUnit();
  return t19;
}
function Lm(a22, e11) {
  const t19 = this.cache;
  t19[0] !== e11 && (a22.uniform1f(this.addr, e11), t19[0] = e11);
}
function Rm(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y) && (a22.uniform2f(this.addr, e11.x, e11.y), t19[0] = e11.x, t19[1] = e11.y);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform2fv(this.addr, e11), Ut5(t19, e11);
  }
}
function Pm(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z) && (a22.uniform3f(this.addr, e11.x, e11.y, e11.z), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z);
  else if (e11.r !== void 0)
    (t19[0] !== e11.r || t19[1] !== e11.g || t19[2] !== e11.b) && (a22.uniform3f(this.addr, e11.r, e11.g, e11.b), t19[0] = e11.r, t19[1] = e11.g, t19[2] = e11.b);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform3fv(this.addr, e11), Ut5(t19, e11);
  }
}
function Im(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z || t19[3] !== e11.w) && (a22.uniform4f(this.addr, e11.x, e11.y, e11.z, e11.w), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z, t19[3] = e11.w);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform4fv(this.addr, e11), Ut5(t19, e11);
  }
}
function Dm(a22, e11) {
  const t19 = this.cache, n33 = e11.elements;
  if (n33 === void 0) {
    if (Nt4(t19, e11))
      return;
    a22.uniformMatrix2fv(this.addr, false, e11), Ut5(t19, e11);
  } else {
    if (Nt4(t19, n33))
      return;
    rc.set(n33), a22.uniformMatrix2fv(this.addr, false, rc), Ut5(t19, n33);
  }
}
function Nm(a22, e11) {
  const t19 = this.cache, n33 = e11.elements;
  if (n33 === void 0) {
    if (Nt4(t19, e11))
      return;
    a22.uniformMatrix3fv(this.addr, false, e11), Ut5(t19, e11);
  } else {
    if (Nt4(t19, n33))
      return;
    sc.set(n33), a22.uniformMatrix3fv(this.addr, false, sc), Ut5(t19, n33);
  }
}
function Um(a22, e11) {
  const t19 = this.cache, n33 = e11.elements;
  if (n33 === void 0) {
    if (Nt4(t19, e11))
      return;
    a22.uniformMatrix4fv(this.addr, false, e11), Ut5(t19, e11);
  } else {
    if (Nt4(t19, n33))
      return;
    ic.set(n33), a22.uniformMatrix4fv(this.addr, false, ic), Ut5(t19, n33);
  }
}
function km(a22, e11) {
  const t19 = this.cache;
  t19[0] !== e11 && (a22.uniform1i(this.addr, e11), t19[0] = e11);
}
function Om(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y) && (a22.uniform2i(this.addr, e11.x, e11.y), t19[0] = e11.x, t19[1] = e11.y);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform2iv(this.addr, e11), Ut5(t19, e11);
  }
}
function Fm(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z) && (a22.uniform3i(this.addr, e11.x, e11.y, e11.z), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform3iv(this.addr, e11), Ut5(t19, e11);
  }
}
function zm(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z || t19[3] !== e11.w) && (a22.uniform4i(this.addr, e11.x, e11.y, e11.z, e11.w), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z, t19[3] = e11.w);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform4iv(this.addr, e11), Ut5(t19, e11);
  }
}
function Bm(a22, e11) {
  const t19 = this.cache;
  t19[0] !== e11 && (a22.uniform1ui(this.addr, e11), t19[0] = e11);
}
function Vm(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y) && (a22.uniform2ui(this.addr, e11.x, e11.y), t19[0] = e11.x, t19[1] = e11.y);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform2uiv(this.addr, e11), Ut5(t19, e11);
  }
}
function Gm(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z) && (a22.uniform3ui(this.addr, e11.x, e11.y, e11.z), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform3uiv(this.addr, e11), Ut5(t19, e11);
  }
}
function Hm(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z || t19[3] !== e11.w) && (a22.uniform4ui(this.addr, e11.x, e11.y, e11.z, e11.w), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z, t19[3] = e11.w);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform4uiv(this.addr, e11), Ut5(t19, e11);
  }
}
function Wm(a22, e11, t19) {
  const n33 = this.cache, i27 = t19.allocateTextureUnit();
  n33[0] !== i27 && (a22.uniform1i(this.addr, i27), n33[0] = i27), t19.setTexture2D(e11 || yu, i27);
}
function jm(a22, e11, t19) {
  const n33 = this.cache, i27 = t19.allocateTextureUnit();
  n33[0] !== i27 && (a22.uniform1i(this.addr, i27), n33[0] = i27), t19.setTexture3D(e11 || bu, i27);
}
function qm(a22, e11, t19) {
  const n33 = this.cache, i27 = t19.allocateTextureUnit();
  n33[0] !== i27 && (a22.uniform1i(this.addr, i27), n33[0] = i27), t19.setTextureCube(e11 || Mu, i27);
}
function Xm(a22, e11, t19) {
  const n33 = this.cache, i27 = t19.allocateTextureUnit();
  n33[0] !== i27 && (a22.uniform1i(this.addr, i27), n33[0] = i27), t19.setTexture2DArray(e11 || vu, i27);
}
function Km(a22) {
  switch (a22) {
    case 5126:
      return Lm;
    case 35664:
      return Rm;
    case 35665:
      return Pm;
    case 35666:
      return Im;
    case 35674:
      return Dm;
    case 35675:
      return Nm;
    case 35676:
      return Um;
    case 5124:
    case 35670:
      return km;
    case 35667:
    case 35671:
      return Om;
    case 35668:
    case 35672:
      return Fm;
    case 35669:
    case 35673:
      return zm;
    case 5125:
      return Bm;
    case 36294:
      return Vm;
    case 36295:
      return Gm;
    case 36296:
      return Hm;
    case 35678:
    case 36198:
    case 36298:
    case 36306:
    case 35682:
      return Wm;
    case 35679:
    case 36299:
    case 36307:
      return jm;
    case 35680:
    case 36300:
    case 36308:
    case 36293:
      return qm;
    case 36289:
    case 36303:
    case 36311:
    case 36292:
      return Xm;
  }
}
function Ym(a22, e11) {
  a22.uniform1fv(this.addr, e11);
}
function Jm(a22, e11) {
  const t19 = Ns(e11, this.size, 2);
  a22.uniform2fv(this.addr, t19);
}
function Zm(a22, e11) {
  const t19 = Ns(e11, this.size, 3);
  a22.uniform3fv(this.addr, t19);
}
function $m(a22, e11) {
  const t19 = Ns(e11, this.size, 4);
  a22.uniform4fv(this.addr, t19);
}
function Qm(a22, e11) {
  const t19 = Ns(e11, this.size, 4);
  a22.uniformMatrix2fv(this.addr, false, t19);
}
function eg(a22, e11) {
  const t19 = Ns(e11, this.size, 9);
  a22.uniformMatrix3fv(this.addr, false, t19);
}
function tg(a22, e11) {
  const t19 = Ns(e11, this.size, 16);
  a22.uniformMatrix4fv(this.addr, false, t19);
}
function ng(a22, e11) {
  a22.uniform1iv(this.addr, e11);
}
function ig(a22, e11) {
  a22.uniform2iv(this.addr, e11);
}
function sg(a22, e11) {
  a22.uniform3iv(this.addr, e11);
}
function rg(a22, e11) {
  a22.uniform4iv(this.addr, e11);
}
function og(a22, e11) {
  a22.uniform1uiv(this.addr, e11);
}
function ag(a22, e11) {
  a22.uniform2uiv(this.addr, e11);
}
function lg(a22, e11) {
  a22.uniform3uiv(this.addr, e11);
}
function cg(a22, e11) {
  a22.uniform4uiv(this.addr, e11);
}
function ug(a22, e11, t19) {
  const n33 = this.cache, i27 = e11.length, s18 = fo(t19, i27);
  Nt4(n33, s18) || (a22.uniform1iv(this.addr, s18), Ut5(n33, s18));
  for (let r24 = 0; r24 !== i27; ++r24)
    t19.setTexture2D(e11[r24] || yu, s18[r24]);
}
function hg(a22, e11, t19) {
  const n33 = this.cache, i27 = e11.length, s18 = fo(t19, i27);
  Nt4(n33, s18) || (a22.uniform1iv(this.addr, s18), Ut5(n33, s18));
  for (let r24 = 0; r24 !== i27; ++r24)
    t19.setTexture3D(e11[r24] || bu, s18[r24]);
}
function dg(a22, e11, t19) {
  const n33 = this.cache, i27 = e11.length, s18 = fo(t19, i27);
  Nt4(n33, s18) || (a22.uniform1iv(this.addr, s18), Ut5(n33, s18));
  for (let r24 = 0; r24 !== i27; ++r24)
    t19.setTextureCube(e11[r24] || Mu, s18[r24]);
}
function fg(a22, e11, t19) {
  const n33 = this.cache, i27 = e11.length, s18 = fo(t19, i27);
  Nt4(n33, s18) || (a22.uniform1iv(this.addr, s18), Ut5(n33, s18));
  for (let r24 = 0; r24 !== i27; ++r24)
    t19.setTexture2DArray(e11[r24] || vu, s18[r24]);
}
function pg(a22) {
  switch (a22) {
    case 5126:
      return Ym;
    case 35664:
      return Jm;
    case 35665:
      return Zm;
    case 35666:
      return $m;
    case 35674:
      return Qm;
    case 35675:
      return eg;
    case 35676:
      return tg;
    case 5124:
    case 35670:
      return ng;
    case 35667:
    case 35671:
      return ig;
    case 35668:
    case 35672:
      return sg;
    case 35669:
    case 35673:
      return rg;
    case 5125:
      return og;
    case 36294:
      return ag;
    case 36295:
      return lg;
    case 36296:
      return cg;
    case 35678:
    case 36198:
    case 36298:
    case 36306:
    case 35682:
      return ug;
    case 35679:
    case 36299:
    case 36307:
      return hg;
    case 35680:
    case 36300:
    case 36308:
    case 36293:
      return dg;
    case 36289:
    case 36303:
    case 36311:
    case 36292:
      return fg;
  }
}
var mg = class {
  constructor(e11, t19, n33) {
    this.id = e11, this.addr = n33, this.cache = [], this.setValue = Km(t19.type);
  }
};
var gg = class {
  constructor(e11, t19, n33) {
    this.id = e11, this.addr = n33, this.cache = [], this.size = t19.size, this.setValue = pg(t19.type);
  }
};
var _g = class {
  constructor(e11) {
    this.id = e11, this.seq = [], this.map = {};
  }
  setValue(e11, t19, n33) {
    const i27 = this.seq;
    for (let s18 = 0, r24 = i27.length; s18 !== r24; ++s18) {
      const o12 = i27[s18];
      o12.setValue(e11, t19[o12.id], n33);
    }
  }
};
var Qo = /(\w+)(\])?(\[|\.)?/g;
function oc(a22, e11) {
  a22.seq.push(e11), a22.map[e11.id] = e11;
}
function xg(a22, e11, t19) {
  const n33 = a22.name, i27 = n33.length;
  for (Qo.lastIndex = 0; ; ) {
    const s18 = Qo.exec(n33), r24 = Qo.lastIndex;
    let o12 = s18[1];
    const c27 = s18[2] === "]", l25 = s18[3];
    if (c27 && (o12 = o12 | 0), l25 === void 0 || l25 === "[" && r24 + 2 === i27) {
      oc(t19, l25 === void 0 ? new mg(o12, a22, e11) : new gg(o12, a22, e11));
      break;
    } else {
      let h26 = t19.map[o12];
      h26 === void 0 && (h26 = new _g(o12), oc(t19, h26)), t19 = h26;
    }
  }
}
var eo = class {
  constructor(e11, t19) {
    this.seq = [], this.map = {};
    const n33 = e11.getProgramParameter(t19, 35718);
    for (let i27 = 0; i27 < n33; ++i27) {
      const s18 = e11.getActiveUniform(t19, i27), r24 = e11.getUniformLocation(t19, s18.name);
      xg(s18, r24, this);
    }
  }
  setValue(e11, t19, n33, i27) {
    const s18 = this.map[t19];
    s18 !== void 0 && s18.setValue(e11, n33, i27);
  }
  setOptional(e11, t19, n33) {
    const i27 = t19[n33];
    i27 !== void 0 && this.setValue(e11, n33, i27);
  }
  static upload(e11, t19, n33, i27) {
    for (let s18 = 0, r24 = t19.length; s18 !== r24; ++s18) {
      const o12 = t19[s18], c27 = n33[o12.id];
      c27.needsUpdate !== false && o12.setValue(e11, c27.value, i27);
    }
  }
  static seqWithValue(e11, t19) {
    const n33 = [];
    for (let i27 = 0, s18 = e11.length; i27 !== s18; ++i27) {
      const r24 = e11[i27];
      r24.id in t19 && n33.push(r24);
    }
    return n33;
  }
};
function ac(a22, e11, t19) {
  const n33 = a22.createShader(e11);
  return a22.shaderSource(n33, t19), a22.compileShader(n33), n33;
}
var yg = 0;
function vg(a22, e11) {
  const t19 = a22.split(`
`), n33 = [], i27 = Math.max(e11 - 6, 0), s18 = Math.min(e11 + 6, t19.length);
  for (let r24 = i27; r24 < s18; r24++) {
    const o12 = r24 + 1;
    n33.push(`${o12 === e11 ? ">" : " "} ${o12}: ${t19[r24]}`);
  }
  return n33.join(`
`);
}
function bg(a22) {
  switch (a22) {
    case Ci:
      return ["Linear", "( value )"];
    case st6:
      return ["sRGB", "( value )"];
    default:
      return console.warn("THREE.WebGLProgram: Unsupported encoding:", a22), ["Linear", "( value )"];
  }
}
function lc(a22, e11, t19) {
  const n33 = a22.getShaderParameter(e11, 35713), i27 = a22.getShaderInfoLog(e11).trim();
  if (n33 && i27 === "")
    return "";
  const s18 = /ERROR: 0:(\d+)/.exec(i27);
  if (s18) {
    const r24 = parseInt(s18[1]);
    return t19.toUpperCase() + `

` + i27 + `

` + vg(a22.getShaderSource(e11), r24);
  } else
    return i27;
}
function Mg(a22, e11) {
  const t19 = bg(e11);
  return "vec4 " + a22 + "( vec4 value ) { return LinearTo" + t19[0] + t19[1] + "; }";
}
function Sg(a22, e11) {
  let t19;
  switch (e11) {
    case wh:
      t19 = "Linear";
      break;
    case Th:
      t19 = "Reinhard";
      break;
    case Ah:
      t19 = "OptimizedCineon";
      break;
    case Eh:
      t19 = "ACESFilmic";
      break;
    case Ch:
      t19 = "Custom";
      break;
    default:
      console.warn("THREE.WebGLProgram: Unsupported toneMapping:", e11), t19 = "Linear";
  }
  return "vec3 " + a22 + "( vec3 color ) { return " + t19 + "ToneMapping( color ); }";
}
function wg(a22) {
  return [
    a22.extensionDerivatives || a22.envMapCubeUVHeight || a22.bumpMap || a22.normalMapTangentSpace || a22.clearcoatNormalMap || a22.flatShading || a22.shaderID === "physical" ? "#extension GL_OES_standard_derivatives : enable" : "",
    (a22.extensionFragDepth || a22.logarithmicDepthBuffer) && a22.rendererExtensionFragDepth ? "#extension GL_EXT_frag_depth : enable" : "",
    a22.extensionDrawBuffers && a22.rendererExtensionDrawBuffers ? "#extension GL_EXT_draw_buffers : require" : "",
    (a22.extensionShaderTextureLOD || a22.envMap || a22.transmission) && a22.rendererExtensionShaderTextureLod ? "#extension GL_EXT_shader_texture_lod : enable" : ""
  ].filter(Ys).join(`
`);
}
function Tg(a22) {
  const e11 = [];
  for (const t19 in a22) {
    const n33 = a22[t19];
    n33 !== false && e11.push("#define " + t19 + " " + n33);
  }
  return e11.join(`
`);
}
function Ag(a22, e11) {
  const t19 = {}, n33 = a22.getProgramParameter(e11, 35721);
  for (let i27 = 0; i27 < n33; i27++) {
    const s18 = a22.getActiveAttrib(e11, i27), r24 = s18.name;
    let o12 = 1;
    s18.type === 35674 && (o12 = 2), s18.type === 35675 && (o12 = 3), s18.type === 35676 && (o12 = 4), t19[r24] = {
      type: s18.type,
      location: a22.getAttribLocation(e11, r24),
      locationSize: o12
    };
  }
  return t19;
}
function Ys(a22) {
  return a22 !== "";
}
function cc(a22, e11) {
  const t19 = e11.numSpotLightShadows + e11.numSpotLightMaps - e11.numSpotLightShadowsWithMaps;
  return a22.replace(/NUM_DIR_LIGHTS/g, e11.numDirLights).replace(/NUM_SPOT_LIGHTS/g, e11.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g, e11.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g, t19).replace(/NUM_RECT_AREA_LIGHTS/g, e11.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g, e11.numPointLights).replace(/NUM_HEMI_LIGHTS/g, e11.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g, e11.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g, e11.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g, e11.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g, e11.numPointLightShadows);
}
function uc(a22, e11) {
  return a22.replace(/NUM_CLIPPING_PLANES/g, e11.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g, e11.numClippingPlanes - e11.numClipIntersection);
}
var Eg = /^[ \t]*#include +<([\w\d./]+)>/gm;
function ya(a22) {
  return a22.replace(Eg, Cg);
}
function Cg(a22, e11) {
  const t19 = Je4[e11];
  if (t19 === void 0)
    throw new Error("Can not resolve #include <" + e11 + ">");
  return ya(t19);
}
var Lg = /#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;
function hc(a22) {
  return a22.replace(Lg, Rg);
}
function Rg(a22, e11, t19, n33) {
  let i27 = "";
  for (let s18 = parseInt(e11); s18 < parseInt(t19); s18++)
    i27 += n33.replace(/\[\s*i\s*\]/g, "[ " + s18 + " ]").replace(/UNROLLED_LOOP_INDEX/g, s18);
  return i27;
}
function dc(a22) {
  let e11 = "precision " + a22.precision + ` float;
precision ` + a22.precision + " int;";
  return a22.precision === "highp" ? e11 += `
#define HIGH_PRECISION` : a22.precision === "mediump" ? e11 += `
#define MEDIUM_PRECISION` : a22.precision === "lowp" && (e11 += `
#define LOW_PRECISION`), e11;
}
function Pg(a22) {
  let e11 = "SHADOWMAP_TYPE_BASIC";
  return a22.shadowMapType === Zc ? e11 = "SHADOWMAP_TYPE_PCF" : a22.shadowMapType === nh ? e11 = "SHADOWMAP_TYPE_PCF_SOFT" : a22.shadowMapType === Ks && (e11 = "SHADOWMAP_TYPE_VSM"), e11;
}
function Ig(a22) {
  let e11 = "ENVMAP_TYPE_CUBE";
  if (a22.envMap)
    switch (a22.envMapMode) {
      case Ss:
      case ws:
        e11 = "ENVMAP_TYPE_CUBE";
        break;
      case lo:
        e11 = "ENVMAP_TYPE_CUBE_UV";
        break;
    }
  return e11;
}
function Dg(a22) {
  let e11 = "ENVMAP_MODE_REFLECTION";
  if (a22.envMap)
    switch (a22.envMapMode) {
      case ws:
        e11 = "ENVMAP_MODE_REFRACTION";
        break;
    }
  return e11;
}
function Ng(a22) {
  let e11 = "ENVMAP_BLENDING_NONE";
  if (a22.envMap)
    switch (a22.combine) {
      case ao:
        e11 = "ENVMAP_BLENDING_MULTIPLY";
        break;
      case Mh:
        e11 = "ENVMAP_BLENDING_MIX";
        break;
      case Sh:
        e11 = "ENVMAP_BLENDING_ADD";
        break;
    }
  return e11;
}
function Ug(a22) {
  const e11 = a22.envMapCubeUVHeight;
  if (e11 === null)
    return null;
  const t19 = Math.log2(e11) - 2, n33 = 1 / e11;
  return { texelWidth: 1 / (3 * Math.max(Math.pow(2, t19), 7 * 16)), texelHeight: n33, maxMip: t19 };
}
function kg(a22, e11, t19, n33) {
  const i27 = a22.getContext(), s18 = t19.defines;
  let r24 = t19.vertexShader, o12 = t19.fragmentShader;
  const c27 = Pg(t19), l25 = Ig(t19), u35 = Dg(t19), h26 = Ng(t19), d34 = Ug(t19), p26 = t19.isWebGL2 ? "" : wg(t19), g31 = Tg(s18), y33 = i27.createProgram();
  let m33, f39, E24 = t19.glslVersion ? "#version " + t19.glslVersion + `
` : "";
  t19.isRawShaderMaterial ? (m33 = [
    g31
  ].filter(Ys).join(`
`), m33.length > 0 && (m33 += `
`), f39 = [
    p26,
    g31
  ].filter(Ys).join(`
`), f39.length > 0 && (f39 += `
`)) : (m33 = [
    dc(t19),
    "#define SHADER_NAME " + t19.shaderName,
    g31,
    t19.instancing ? "#define USE_INSTANCING" : "",
    t19.instancingColor ? "#define USE_INSTANCING_COLOR" : "",
    t19.useFog && t19.fog ? "#define USE_FOG" : "",
    t19.useFog && t19.fogExp2 ? "#define FOG_EXP2" : "",
    t19.map ? "#define USE_MAP" : "",
    t19.envMap ? "#define USE_ENVMAP" : "",
    t19.envMap ? "#define " + u35 : "",
    t19.lightMap ? "#define USE_LIGHTMAP" : "",
    t19.aoMap ? "#define USE_AOMAP" : "",
    t19.bumpMap ? "#define USE_BUMPMAP" : "",
    t19.normalMap ? "#define USE_NORMALMAP" : "",
    t19.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "",
    t19.normalMapTangentSpace ? "#define USE_NORMALMAP_TANGENTSPACE" : "",
    t19.displacementMap ? "#define USE_DISPLACEMENTMAP" : "",
    t19.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
    t19.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
    t19.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "",
    t19.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
    t19.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
    t19.iridescenceThicknessMap ? "#define USE_IRIDESCENCE_THICKNESSMAP" : "",
    t19.specularMap ? "#define USE_SPECULARMAP" : "",
    t19.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "",
    t19.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "",
    t19.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
    t19.metalnessMap ? "#define USE_METALNESSMAP" : "",
    t19.alphaMap ? "#define USE_ALPHAMAP" : "",
    t19.transmission ? "#define USE_TRANSMISSION" : "",
    t19.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
    t19.thicknessMap ? "#define USE_THICKNESSMAP" : "",
    t19.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "",
    t19.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "",
    //
    t19.mapUv ? "#define MAP_UV " + t19.mapUv : "",
    t19.alphaMapUv ? "#define ALPHAMAP_UV " + t19.alphaMapUv : "",
    t19.lightMapUv ? "#define LIGHTMAP_UV " + t19.lightMapUv : "",
    t19.aoMapUv ? "#define AOMAP_UV " + t19.aoMapUv : "",
    t19.emissiveMapUv ? "#define EMISSIVEMAP_UV " + t19.emissiveMapUv : "",
    t19.bumpMapUv ? "#define BUMPMAP_UV " + t19.bumpMapUv : "",
    t19.normalMapUv ? "#define NORMALMAP_UV " + t19.normalMapUv : "",
    t19.displacementMapUv ? "#define DISPLACEMENTMAP_UV " + t19.displacementMapUv : "",
    t19.metalnessMapUv ? "#define METALNESSMAP_UV " + t19.metalnessMapUv : "",
    t19.roughnessMapUv ? "#define ROUGHNESSMAP_UV " + t19.roughnessMapUv : "",
    t19.clearcoatMapUv ? "#define CLEARCOATMAP_UV " + t19.clearcoatMapUv : "",
    t19.clearcoatNormalMapUv ? "#define CLEARCOAT_NORMALMAP_UV " + t19.clearcoatNormalMapUv : "",
    t19.clearcoatRoughnessMapUv ? "#define CLEARCOAT_ROUGHNESSMAP_UV " + t19.clearcoatRoughnessMapUv : "",
    t19.iridescenceMapUv ? "#define IRIDESCENCEMAP_UV " + t19.iridescenceMapUv : "",
    t19.iridescenceThicknessMapUv ? "#define IRIDESCENCE_THICKNESSMAP_UV " + t19.iridescenceThicknessMapUv : "",
    t19.sheenColorMapUv ? "#define SHEEN_COLORMAP_UV " + t19.sheenColorMapUv : "",
    t19.sheenRoughnessMapUv ? "#define SHEEN_ROUGHNESSMAP_UV " + t19.sheenRoughnessMapUv : "",
    t19.specularMapUv ? "#define SPECULARMAP_UV " + t19.specularMapUv : "",
    t19.specularColorMapUv ? "#define SPECULAR_COLORMAP_UV " + t19.specularColorMapUv : "",
    t19.specularIntensityMapUv ? "#define SPECULAR_INTENSITYMAP_UV " + t19.specularIntensityMapUv : "",
    t19.transmissionMapUv ? "#define TRANSMISSIONMAP_UV " + t19.transmissionMapUv : "",
    t19.thicknessMapUv ? "#define THICKNESSMAP_UV " + t19.thicknessMapUv : "",
    //
    t19.vertexTangents ? "#define USE_TANGENT" : "",
    t19.vertexColors ? "#define USE_COLOR" : "",
    t19.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
    t19.vertexUvs2 ? "#define USE_UV2" : "",
    t19.pointsUvs ? "#define USE_POINTS_UV" : "",
    t19.flatShading ? "#define FLAT_SHADED" : "",
    t19.skinning ? "#define USE_SKINNING" : "",
    t19.morphTargets ? "#define USE_MORPHTARGETS" : "",
    t19.morphNormals && t19.flatShading === false ? "#define USE_MORPHNORMALS" : "",
    t19.morphColors && t19.isWebGL2 ? "#define USE_MORPHCOLORS" : "",
    t19.morphTargetsCount > 0 && t19.isWebGL2 ? "#define MORPHTARGETS_TEXTURE" : "",
    t19.morphTargetsCount > 0 && t19.isWebGL2 ? "#define MORPHTARGETS_TEXTURE_STRIDE " + t19.morphTextureStride : "",
    t19.morphTargetsCount > 0 && t19.isWebGL2 ? "#define MORPHTARGETS_COUNT " + t19.morphTargetsCount : "",
    t19.doubleSided ? "#define DOUBLE_SIDED" : "",
    t19.flipSided ? "#define FLIP_SIDED" : "",
    t19.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
    t19.shadowMapEnabled ? "#define " + c27 : "",
    t19.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "",
    t19.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
    t19.logarithmicDepthBuffer && t19.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "",
    "uniform mat4 modelMatrix;",
    "uniform mat4 modelViewMatrix;",
    "uniform mat4 projectionMatrix;",
    "uniform mat4 viewMatrix;",
    "uniform mat3 normalMatrix;",
    "uniform vec3 cameraPosition;",
    "uniform bool isOrthographic;",
    "#ifdef USE_INSTANCING",
    "	attribute mat4 instanceMatrix;",
    "#endif",
    "#ifdef USE_INSTANCING_COLOR",
    "	attribute vec3 instanceColor;",
    "#endif",
    "attribute vec3 position;",
    "attribute vec3 normal;",
    "attribute vec2 uv;",
    "#ifdef USE_TANGENT",
    "	attribute vec4 tangent;",
    "#endif",
    "#if defined( USE_COLOR_ALPHA )",
    "	attribute vec4 color;",
    "#elif defined( USE_COLOR )",
    "	attribute vec3 color;",
    "#endif",
    "#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )",
    "	attribute vec3 morphTarget0;",
    "	attribute vec3 morphTarget1;",
    "	attribute vec3 morphTarget2;",
    "	attribute vec3 morphTarget3;",
    "	#ifdef USE_MORPHNORMALS",
    "		attribute vec3 morphNormal0;",
    "		attribute vec3 morphNormal1;",
    "		attribute vec3 morphNormal2;",
    "		attribute vec3 morphNormal3;",
    "	#else",
    "		attribute vec3 morphTarget4;",
    "		attribute vec3 morphTarget5;",
    "		attribute vec3 morphTarget6;",
    "		attribute vec3 morphTarget7;",
    "	#endif",
    "#endif",
    "#ifdef USE_SKINNING",
    "	attribute vec4 skinIndex;",
    "	attribute vec4 skinWeight;",
    "#endif",
    `
`
  ].filter(Ys).join(`
`), f39 = [
    p26,
    dc(t19),
    "#define SHADER_NAME " + t19.shaderName,
    g31,
    t19.useFog && t19.fog ? "#define USE_FOG" : "",
    t19.useFog && t19.fogExp2 ? "#define FOG_EXP2" : "",
    t19.map ? "#define USE_MAP" : "",
    t19.matcap ? "#define USE_MATCAP" : "",
    t19.envMap ? "#define USE_ENVMAP" : "",
    t19.envMap ? "#define " + l25 : "",
    t19.envMap ? "#define " + u35 : "",
    t19.envMap ? "#define " + h26 : "",
    d34 ? "#define CUBEUV_TEXEL_WIDTH " + d34.texelWidth : "",
    d34 ? "#define CUBEUV_TEXEL_HEIGHT " + d34.texelHeight : "",
    d34 ? "#define CUBEUV_MAX_MIP " + d34.maxMip + ".0" : "",
    t19.lightMap ? "#define USE_LIGHTMAP" : "",
    t19.aoMap ? "#define USE_AOMAP" : "",
    t19.bumpMap ? "#define USE_BUMPMAP" : "",
    t19.normalMap ? "#define USE_NORMALMAP" : "",
    t19.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "",
    t19.normalMapTangentSpace ? "#define USE_NORMALMAP_TANGENTSPACE" : "",
    t19.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
    t19.clearcoat ? "#define USE_CLEARCOAT" : "",
    t19.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
    t19.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "",
    t19.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
    t19.iridescence ? "#define USE_IRIDESCENCE" : "",
    t19.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
    t19.iridescenceThicknessMap ? "#define USE_IRIDESCENCE_THICKNESSMAP" : "",
    t19.specularMap ? "#define USE_SPECULARMAP" : "",
    t19.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "",
    t19.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "",
    t19.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
    t19.metalnessMap ? "#define USE_METALNESSMAP" : "",
    t19.alphaMap ? "#define USE_ALPHAMAP" : "",
    t19.alphaTest ? "#define USE_ALPHATEST" : "",
    t19.sheen ? "#define USE_SHEEN" : "",
    t19.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "",
    t19.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "",
    t19.transmission ? "#define USE_TRANSMISSION" : "",
    t19.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
    t19.thicknessMap ? "#define USE_THICKNESSMAP" : "",
    t19.decodeVideoTexture ? "#define DECODE_VIDEO_TEXTURE" : "",
    t19.vertexTangents ? "#define USE_TANGENT" : "",
    t19.vertexColors || t19.instancingColor ? "#define USE_COLOR" : "",
    t19.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
    t19.vertexUvs2 ? "#define USE_UV2" : "",
    t19.pointsUvs ? "#define USE_POINTS_UV" : "",
    t19.gradientMap ? "#define USE_GRADIENTMAP" : "",
    t19.flatShading ? "#define FLAT_SHADED" : "",
    t19.doubleSided ? "#define DOUBLE_SIDED" : "",
    t19.flipSided ? "#define FLIP_SIDED" : "",
    t19.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
    t19.shadowMapEnabled ? "#define " + c27 : "",
    t19.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "",
    t19.useLegacyLights ? "#define LEGACY_LIGHTS" : "",
    t19.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
    t19.logarithmicDepthBuffer && t19.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "",
    "uniform mat4 viewMatrix;",
    "uniform vec3 cameraPosition;",
    "uniform bool isOrthographic;",
    t19.toneMapping !== Wn3 ? "#define TONE_MAPPING" : "",
    t19.toneMapping !== Wn3 ? Je4.tonemapping_pars_fragment : "",
    // this code is required here because it is used by the toneMapping() function defined below
    t19.toneMapping !== Wn3 ? Sg("toneMapping", t19.toneMapping) : "",
    t19.dithering ? "#define DITHERING" : "",
    t19.opaque ? "#define OPAQUE" : "",
    Je4.encodings_pars_fragment,
    // this code is required here because it is used by the various encoding/decoding function defined below
    Mg("linearToOutputTexel", t19.outputEncoding),
    t19.useDepthPacking ? "#define DEPTH_PACKING " + t19.depthPacking : "",
    `
`
  ].filter(Ys).join(`
`)), r24 = ya(r24), r24 = cc(r24, t19), r24 = uc(r24, t19), o12 = ya(o12), o12 = cc(o12, t19), o12 = uc(o12, t19), r24 = hc(r24), o12 = hc(o12), t19.isWebGL2 && t19.isRawShaderMaterial !== true && (E24 = `#version 300 es
`, m33 = [
    "precision mediump sampler2DArray;",
    "#define attribute in",
    "#define varying out",
    "#define texture2D texture"
  ].join(`
`) + `
` + m33, f39 = [
    "#define varying in",
    t19.glslVersion === Il ? "" : "layout(location = 0) out highp vec4 pc_fragColor;",
    t19.glslVersion === Il ? "" : "#define gl_FragColor pc_fragColor",
    "#define gl_FragDepthEXT gl_FragDepth",
    "#define texture2D texture",
    "#define textureCube texture",
    "#define texture2DProj textureProj",
    "#define texture2DLodEXT textureLod",
    "#define texture2DProjLodEXT textureProjLod",
    "#define textureCubeLodEXT textureLod",
    "#define texture2DGradEXT textureGrad",
    "#define texture2DProjGradEXT textureProjGrad",
    "#define textureCubeGradEXT textureGrad"
  ].join(`
`) + `
` + f39);
  const b33 = E24 + m33 + r24, w29 = E24 + f39 + o12, S21 = ac(i27, 35633, b33), D17 = ac(i27, 35632, w29);
  if (i27.attachShader(y33, S21), i27.attachShader(y33, D17), t19.index0AttributeName !== void 0 ? i27.bindAttribLocation(y33, 0, t19.index0AttributeName) : t19.morphTargets === true && i27.bindAttribLocation(y33, 0, "position"), i27.linkProgram(y33), a22.debug.checkShaderErrors) {
    const v30 = i27.getProgramInfoLog(y33).trim(), L11 = i27.getShaderInfoLog(S21).trim(), G15 = i27.getShaderInfoLog(D17).trim();
    let B21 = true, k27 = true;
    if (i27.getProgramParameter(y33, 35714) === false)
      if (B21 = false, typeof a22.debug.onShaderError == "function")
        a22.debug.onShaderError(i27, y33, S21, D17);
      else {
        const V14 = lc(i27, S21, "vertex"), H15 = lc(i27, D17, "fragment");
        console.error(
          "THREE.WebGLProgram: Shader Error " + i27.getError() + " - VALIDATE_STATUS " + i27.getProgramParameter(y33, 35715) + `

Program Info Log: ` + v30 + `
` + V14 + `
` + H15
        );
      }
    else
      v30 !== "" ? console.warn("THREE.WebGLProgram: Program Info Log:", v30) : (L11 === "" || G15 === "") && (k27 = false);
    k27 && (this.diagnostics = {
      runnable: B21,
      programLog: v30,
      vertexShader: {
        log: L11,
        prefix: m33
      },
      fragmentShader: {
        log: G15,
        prefix: f39
      }
    });
  }
  i27.deleteShader(S21), i27.deleteShader(D17);
  let N19;
  this.getUniforms = function() {
    return N19 === void 0 && (N19 = new eo(i27, y33)), N19;
  };
  let I16;
  return this.getAttributes = function() {
    return I16 === void 0 && (I16 = Ag(i27, y33)), I16;
  }, this.destroy = function() {
    n33.releaseStatesOfProgram(this), i27.deleteProgram(y33), this.program = void 0;
  }, this.name = t19.shaderName, this.id = yg++, this.cacheKey = e11, this.usedTimes = 1, this.program = y33, this.vertexShader = S21, this.fragmentShader = D17, this;
}
var Og = 0;
var Fg = class {
  constructor() {
    this.shaderCache = /* @__PURE__ */ new Map(), this.materialCache = /* @__PURE__ */ new Map();
  }
  update(e11) {
    const t19 = e11.vertexShader, n33 = e11.fragmentShader, i27 = this._getShaderStage(t19), s18 = this._getShaderStage(n33), r24 = this._getShaderCacheForMaterial(e11);
    return r24.has(i27) === false && (r24.add(i27), i27.usedTimes++), r24.has(s18) === false && (r24.add(s18), s18.usedTimes++), this;
  }
  remove(e11) {
    const t19 = this.materialCache.get(e11);
    for (const n33 of t19)
      n33.usedTimes--, n33.usedTimes === 0 && this.shaderCache.delete(n33.code);
    return this.materialCache.delete(e11), this;
  }
  getVertexShaderID(e11) {
    return this._getShaderStage(e11.vertexShader).id;
  }
  getFragmentShaderID(e11) {
    return this._getShaderStage(e11.fragmentShader).id;
  }
  dispose() {
    this.shaderCache.clear(), this.materialCache.clear();
  }
  _getShaderCacheForMaterial(e11) {
    const t19 = this.materialCache;
    let n33 = t19.get(e11);
    return n33 === void 0 && (n33 = /* @__PURE__ */ new Set(), t19.set(e11, n33)), n33;
  }
  _getShaderStage(e11) {
    const t19 = this.shaderCache;
    let n33 = t19.get(e11);
    return n33 === void 0 && (n33 = new zg(e11), t19.set(e11, n33)), n33;
  }
};
var zg = class {
  constructor(e11) {
    this.id = Og++, this.code = e11, this.usedTimes = 0;
  }
};
function Bg(a22, e11, t19, n33, i27, s18, r24) {
  const o12 = new hu(), c27 = new Fg(), l25 = [], u35 = i27.isWebGL2, h26 = i27.logarithmicDepthBuffer, d34 = i27.vertexTextures;
  let p26 = i27.precision;
  const g31 = {
    MeshDepthMaterial: "depth",
    MeshDistanceMaterial: "distanceRGBA",
    MeshNormalMaterial: "normal",
    MeshBasicMaterial: "basic",
    MeshLambertMaterial: "lambert",
    MeshPhongMaterial: "phong",
    MeshToonMaterial: "toon",
    MeshStandardMaterial: "physical",
    MeshPhysicalMaterial: "physical",
    MeshMatcapMaterial: "matcap",
    LineBasicMaterial: "basic",
    LineDashedMaterial: "dashed",
    PointsMaterial: "points",
    ShadowMaterial: "shadow",
    SpriteMaterial: "sprite"
  };
  function y33(v30) {
    return v30 === 1 ? "uv2" : "uv";
  }
  function m33(v30, L11, G15, B21, k27) {
    const V14 = B21.fog, H15 = k27.geometry, W8 = v30.isMeshStandardMaterial ? B21.environment : null, te7 = (v30.isMeshStandardMaterial ? t19 : e11).get(v30.envMap || W8), J11 = te7 && te7.mapping === lo ? te7.image.height : null, ie8 = g31[v30.type];
    v30.precision !== null && (p26 = i27.getMaxPrecision(v30.precision), p26 !== v30.precision && console.warn("THREE.WebGLProgram.getParameters:", v30.precision, "not supported, using", p26, "instead."));
    const le7 = H15.morphAttributes.position || H15.morphAttributes.normal || H15.morphAttributes.color, me9 = le7 !== void 0 ? le7.length : 0;
    let he8 = 0;
    H15.morphAttributes.position !== void 0 && (he8 = 1), H15.morphAttributes.normal !== void 0 && (he8 = 2), H15.morphAttributes.color !== void 0 && (he8 = 3);
    let j18, X12, ee7, $24;
    if (ie8) {
      const Se7 = Cn3[ie8];
      j18 = Se7.vertexShader, X12 = Se7.fragmentShader;
    } else
      j18 = v30.vertexShader, X12 = v30.fragmentShader, c27.update(v30), ee7 = c27.getVertexShaderID(v30), $24 = c27.getFragmentShaderID(v30);
    const z19 = a22.getRenderTarget(), be7 = k27.isInstancedMesh === true, Ee5 = !!v30.map, pe8 = !!v30.matcap, ke7 = !!te7, nt14 = !!v30.aoMap, Ie7 = !!v30.lightMap, je7 = !!v30.bumpMap, bt9 = !!v30.normalMap, xt8 = !!v30.displacementMap, St8 = !!v30.emissiveMap, wt9 = !!v30.metalnessMap, et13 = !!v30.roughnessMap, ct11 = v30.clearcoat > 0, kt10 = v30.iridescence > 0, P19 = v30.sheen > 0, C19 = v30.transmission > 0, Q11 = ct11 && !!v30.clearcoatMap, de9 = ct11 && !!v30.clearcoatNormalMap, fe7 = ct11 && !!v30.clearcoatRoughnessMap, _e7 = kt10 && !!v30.iridescenceMap, O20 = kt10 && !!v30.iridescenceThicknessMap, ae7 = P19 && !!v30.sheenColorMap, Z11 = P19 && !!v30.sheenRoughnessMap, ye7 = !!v30.specularMap, Te7 = !!v30.specularColorMap, Le7 = !!v30.specularIntensityMap, Me7 = C19 && !!v30.transmissionMap, Ce7 = C19 && !!v30.thicknessMap, Ge7 = !!v30.gradientMap, Xe7 = !!v30.alphaMap, Mt10 = v30.alphaTest > 0, F17 = !!v30.extensions, se6 = !!H15.attributes.uv2;
    return {
      isWebGL2: u35,
      shaderID: ie8,
      shaderName: v30.type,
      vertexShader: j18,
      fragmentShader: X12,
      defines: v30.defines,
      customVertexShaderID: ee7,
      customFragmentShaderID: $24,
      isRawShaderMaterial: v30.isRawShaderMaterial === true,
      glslVersion: v30.glslVersion,
      precision: p26,
      instancing: be7,
      instancingColor: be7 && k27.instanceColor !== null,
      supportsVertexTextures: d34,
      outputEncoding: z19 === null ? a22.outputEncoding : z19.isXRRenderTarget === true ? z19.texture.encoding : Ci,
      map: Ee5,
      matcap: pe8,
      envMap: ke7,
      envMapMode: ke7 && te7.mapping,
      envMapCubeUVHeight: J11,
      aoMap: nt14,
      lightMap: Ie7,
      bumpMap: je7,
      normalMap: bt9,
      displacementMap: d34 && xt8,
      emissiveMap: St8,
      normalMapObjectSpace: bt9 && v30.normalMapType === Kh,
      normalMapTangentSpace: bt9 && v30.normalMapType === co,
      decodeVideoTexture: Ee5 && v30.map.isVideoTexture === true && v30.map.encoding === st6,
      metalnessMap: wt9,
      roughnessMap: et13,
      clearcoat: ct11,
      clearcoatMap: Q11,
      clearcoatNormalMap: de9,
      clearcoatRoughnessMap: fe7,
      iridescence: kt10,
      iridescenceMap: _e7,
      iridescenceThicknessMap: O20,
      sheen: P19,
      sheenColorMap: ae7,
      sheenRoughnessMap: Z11,
      specularMap: ye7,
      specularColorMap: Te7,
      specularIntensityMap: Le7,
      transmission: C19,
      transmissionMap: Me7,
      thicknessMap: Ce7,
      gradientMap: Ge7,
      opaque: v30.transparent === false && v30.blending === gs,
      alphaMap: Xe7,
      alphaTest: Mt10,
      combine: v30.combine,
      //
      mapUv: Ee5 && y33(v30.map.channel),
      aoMapUv: nt14 && y33(v30.aoMap.channel),
      lightMapUv: Ie7 && y33(v30.lightMap.channel),
      bumpMapUv: je7 && y33(v30.bumpMap.channel),
      normalMapUv: bt9 && y33(v30.normalMap.channel),
      displacementMapUv: xt8 && y33(v30.displacementMap.channel),
      emissiveMapUv: St8 && y33(v30.emissiveMap.channel),
      metalnessMapUv: wt9 && y33(v30.metalnessMap.channel),
      roughnessMapUv: et13 && y33(v30.roughnessMap.channel),
      clearcoatMapUv: Q11 && y33(v30.clearcoatMap.channel),
      clearcoatNormalMapUv: de9 && y33(v30.clearcoatNormalMap.channel),
      clearcoatRoughnessMapUv: fe7 && y33(v30.clearcoatRoughnessMap.channel),
      iridescenceMapUv: _e7 && y33(v30.iridescenceMap.channel),
      iridescenceThicknessMapUv: O20 && y33(v30.iridescenceThicknessMap.channel),
      sheenColorMapUv: ae7 && y33(v30.sheenColorMap.channel),
      sheenRoughnessMapUv: Z11 && y33(v30.sheenRoughnessMap.channel),
      specularMapUv: ye7 && y33(v30.specularMap.channel),
      specularColorMapUv: Te7 && y33(v30.specularColorMap.channel),
      specularIntensityMapUv: Le7 && y33(v30.specularIntensityMap.channel),
      transmissionMapUv: Me7 && y33(v30.transmissionMap.channel),
      thicknessMapUv: Ce7 && y33(v30.thicknessMap.channel),
      alphaMapUv: Xe7 && y33(v30.alphaMap.channel),
      //
      vertexTangents: bt9 && !!H15.attributes.tangent,
      vertexColors: v30.vertexColors,
      vertexAlphas: v30.vertexColors === true && !!H15.attributes.color && H15.attributes.color.itemSize === 4,
      vertexUvs2: se6,
      pointsUvs: k27.isPoints === true && !!H15.attributes.uv && (Ee5 || Xe7),
      fog: !!V14,
      useFog: v30.fog === true,
      fogExp2: V14 && V14.isFogExp2,
      flatShading: v30.flatShading === true,
      sizeAttenuation: v30.sizeAttenuation === true,
      logarithmicDepthBuffer: h26,
      skinning: k27.isSkinnedMesh === true,
      morphTargets: H15.morphAttributes.position !== void 0,
      morphNormals: H15.morphAttributes.normal !== void 0,
      morphColors: H15.morphAttributes.color !== void 0,
      morphTargetsCount: me9,
      morphTextureStride: he8,
      numDirLights: L11.directional.length,
      numPointLights: L11.point.length,
      numSpotLights: L11.spot.length,
      numSpotLightMaps: L11.spotLightMap.length,
      numRectAreaLights: L11.rectArea.length,
      numHemiLights: L11.hemi.length,
      numDirLightShadows: L11.directionalShadowMap.length,
      numPointLightShadows: L11.pointShadowMap.length,
      numSpotLightShadows: L11.spotShadowMap.length,
      numSpotLightShadowsWithMaps: L11.numSpotLightShadowsWithMaps,
      numClippingPlanes: r24.numPlanes,
      numClipIntersection: r24.numIntersection,
      dithering: v30.dithering,
      shadowMapEnabled: a22.shadowMap.enabled && G15.length > 0,
      shadowMapType: a22.shadowMap.type,
      toneMapping: v30.toneMapped ? a22.toneMapping : Wn3,
      useLegacyLights: a22.useLegacyLights,
      premultipliedAlpha: v30.premultipliedAlpha,
      doubleSided: v30.side === fn3,
      flipSided: v30.side === sn3,
      useDepthPacking: v30.depthPacking >= 0,
      depthPacking: v30.depthPacking || 0,
      index0AttributeName: v30.index0AttributeName,
      extensionDerivatives: F17 && v30.extensions.derivatives === true,
      extensionFragDepth: F17 && v30.extensions.fragDepth === true,
      extensionDrawBuffers: F17 && v30.extensions.drawBuffers === true,
      extensionShaderTextureLOD: F17 && v30.extensions.shaderTextureLOD === true,
      rendererExtensionFragDepth: u35 || n33.has("EXT_frag_depth"),
      rendererExtensionDrawBuffers: u35 || n33.has("WEBGL_draw_buffers"),
      rendererExtensionShaderTextureLod: u35 || n33.has("EXT_shader_texture_lod"),
      customProgramCacheKey: v30.customProgramCacheKey()
    };
  }
  function f39(v30) {
    const L11 = [];
    if (v30.shaderID ? L11.push(v30.shaderID) : (L11.push(v30.customVertexShaderID), L11.push(v30.customFragmentShaderID)), v30.defines !== void 0)
      for (const G15 in v30.defines)
        L11.push(G15), L11.push(v30.defines[G15]);
    return v30.isRawShaderMaterial === false && (E24(L11, v30), b33(L11, v30), L11.push(a22.outputEncoding)), L11.push(v30.customProgramCacheKey), L11.join();
  }
  function E24(v30, L11) {
    v30.push(L11.precision), v30.push(L11.outputEncoding), v30.push(L11.envMapMode), v30.push(L11.envMapCubeUVHeight), v30.push(L11.mapUv), v30.push(L11.alphaMapUv), v30.push(L11.lightMapUv), v30.push(L11.aoMapUv), v30.push(L11.bumpMapUv), v30.push(L11.normalMapUv), v30.push(L11.displacementMapUv), v30.push(L11.emissiveMapUv), v30.push(L11.metalnessMapUv), v30.push(L11.roughnessMapUv), v30.push(L11.clearcoatMapUv), v30.push(L11.clearcoatNormalMapUv), v30.push(L11.clearcoatRoughnessMapUv), v30.push(L11.iridescenceMapUv), v30.push(L11.iridescenceThicknessMapUv), v30.push(L11.sheenColorMapUv), v30.push(L11.sheenRoughnessMapUv), v30.push(L11.specularMapUv), v30.push(L11.specularColorMapUv), v30.push(L11.specularIntensityMapUv), v30.push(L11.transmissionMapUv), v30.push(L11.thicknessMapUv), v30.push(L11.combine), v30.push(L11.fogExp2), v30.push(L11.sizeAttenuation), v30.push(L11.morphTargetsCount), v30.push(L11.morphAttributeCount), v30.push(L11.numDirLights), v30.push(L11.numPointLights), v30.push(L11.numSpotLights), v30.push(L11.numSpotLightMaps), v30.push(L11.numHemiLights), v30.push(L11.numRectAreaLights), v30.push(L11.numDirLightShadows), v30.push(L11.numPointLightShadows), v30.push(L11.numSpotLightShadows), v30.push(L11.numSpotLightShadowsWithMaps), v30.push(L11.shadowMapType), v30.push(L11.toneMapping), v30.push(L11.numClippingPlanes), v30.push(L11.numClipIntersection), v30.push(L11.depthPacking);
  }
  function b33(v30, L11) {
    o12.disableAll(), L11.isWebGL2 && o12.enable(0), L11.supportsVertexTextures && o12.enable(1), L11.instancing && o12.enable(2), L11.instancingColor && o12.enable(3), L11.matcap && o12.enable(4), L11.envMap && o12.enable(5), L11.normalMapObjectSpace && o12.enable(6), L11.normalMapTangentSpace && o12.enable(7), L11.clearcoat && o12.enable(8), L11.iridescence && o12.enable(9), L11.alphaTest && o12.enable(10), L11.vertexColors && o12.enable(11), L11.vertexAlphas && o12.enable(12), L11.vertexUvs2 && o12.enable(13), L11.vertexTangents && o12.enable(14), v30.push(o12.mask), o12.disableAll(), L11.fog && o12.enable(0), L11.useFog && o12.enable(1), L11.flatShading && o12.enable(2), L11.logarithmicDepthBuffer && o12.enable(3), L11.skinning && o12.enable(4), L11.morphTargets && o12.enable(5), L11.morphNormals && o12.enable(6), L11.morphColors && o12.enable(7), L11.premultipliedAlpha && o12.enable(8), L11.shadowMapEnabled && o12.enable(9), L11.useLegacyLights && o12.enable(10), L11.doubleSided && o12.enable(11), L11.flipSided && o12.enable(12), L11.useDepthPacking && o12.enable(13), L11.dithering && o12.enable(14), L11.transmission && o12.enable(15), L11.sheen && o12.enable(16), L11.decodeVideoTexture && o12.enable(17), L11.opaque && o12.enable(18), L11.pointsUvs && o12.enable(19), v30.push(o12.mask);
  }
  function w29(v30) {
    const L11 = g31[v30.type];
    let G15;
    if (L11) {
      const B21 = Cn3[L11];
      G15 = Cd.clone(B21.uniforms);
    } else
      G15 = v30.uniforms;
    return G15;
  }
  function S21(v30, L11) {
    let G15;
    for (let B21 = 0, k27 = l25.length; B21 < k27; B21++) {
      const V14 = l25[B21];
      if (V14.cacheKey === L11) {
        G15 = V14, ++G15.usedTimes;
        break;
      }
    }
    return G15 === void 0 && (G15 = new kg(a22, L11, v30, s18), l25.push(G15)), G15;
  }
  function D17(v30) {
    if (--v30.usedTimes === 0) {
      const L11 = l25.indexOf(v30);
      l25[L11] = l25[l25.length - 1], l25.pop(), v30.destroy();
    }
  }
  function N19(v30) {
    c27.remove(v30);
  }
  function I16() {
    c27.dispose();
  }
  return {
    getParameters: m33,
    getProgramCacheKey: f39,
    getUniforms: w29,
    acquireProgram: S21,
    releaseProgram: D17,
    releaseShaderCache: N19,
    // Exposed for resource monitoring & error feedback via renderer.info:
    programs: l25,
    dispose: I16
  };
}
function Vg() {
  let a22 = /* @__PURE__ */ new WeakMap();
  function e11(s18) {
    let r24 = a22.get(s18);
    return r24 === void 0 && (r24 = {}, a22.set(s18, r24)), r24;
  }
  function t19(s18) {
    a22.delete(s18);
  }
  function n33(s18, r24, o12) {
    a22.get(s18)[r24] = o12;
  }
  function i27() {
    a22 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: e11,
    remove: t19,
    update: n33,
    dispose: i27
  };
}
function Gg(a22, e11) {
  return a22.groupOrder !== e11.groupOrder ? a22.groupOrder - e11.groupOrder : a22.renderOrder !== e11.renderOrder ? a22.renderOrder - e11.renderOrder : a22.material.id !== e11.material.id ? a22.material.id - e11.material.id : a22.z !== e11.z ? a22.z - e11.z : a22.id - e11.id;
}
function fc(a22, e11) {
  return a22.groupOrder !== e11.groupOrder ? a22.groupOrder - e11.groupOrder : a22.renderOrder !== e11.renderOrder ? a22.renderOrder - e11.renderOrder : a22.z !== e11.z ? e11.z - a22.z : a22.id - e11.id;
}
function pc() {
  const a22 = [];
  let e11 = 0;
  const t19 = [], n33 = [], i27 = [];
  function s18() {
    e11 = 0, t19.length = 0, n33.length = 0, i27.length = 0;
  }
  function r24(h26, d34, p26, g31, y33, m33) {
    let f39 = a22[e11];
    return f39 === void 0 ? (f39 = {
      id: h26.id,
      object: h26,
      geometry: d34,
      material: p26,
      groupOrder: g31,
      renderOrder: h26.renderOrder,
      z: y33,
      group: m33
    }, a22[e11] = f39) : (f39.id = h26.id, f39.object = h26, f39.geometry = d34, f39.material = p26, f39.groupOrder = g31, f39.renderOrder = h26.renderOrder, f39.z = y33, f39.group = m33), e11++, f39;
  }
  function o12(h26, d34, p26, g31, y33, m33) {
    const f39 = r24(h26, d34, p26, g31, y33, m33);
    p26.transmission > 0 ? n33.push(f39) : p26.transparent === true ? i27.push(f39) : t19.push(f39);
  }
  function c27(h26, d34, p26, g31, y33, m33) {
    const f39 = r24(h26, d34, p26, g31, y33, m33);
    p26.transmission > 0 ? n33.unshift(f39) : p26.transparent === true ? i27.unshift(f39) : t19.unshift(f39);
  }
  function l25(h26, d34) {
    t19.length > 1 && t19.sort(h26 || Gg), n33.length > 1 && n33.sort(d34 || fc), i27.length > 1 && i27.sort(d34 || fc);
  }
  function u35() {
    for (let h26 = e11, d34 = a22.length; h26 < d34; h26++) {
      const p26 = a22[h26];
      if (p26.id === null)
        break;
      p26.id = null, p26.object = null, p26.geometry = null, p26.material = null, p26.group = null;
    }
  }
  return {
    opaque: t19,
    transmissive: n33,
    transparent: i27,
    init: s18,
    push: o12,
    unshift: c27,
    finish: u35,
    sort: l25
  };
}
function Hg() {
  let a22 = /* @__PURE__ */ new WeakMap();
  function e11(n33, i27) {
    const s18 = a22.get(n33);
    let r24;
    return s18 === void 0 ? (r24 = new pc(), a22.set(n33, [r24])) : i27 >= s18.length ? (r24 = new pc(), s18.push(r24)) : r24 = s18[i27], r24;
  }
  function t19() {
    a22 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: e11,
    dispose: t19
  };
}
function Wg() {
  const a22 = {};
  return {
    get: function(e11) {
      if (a22[e11.id] !== void 0)
        return a22[e11.id];
      let t19;
      switch (e11.type) {
        case "DirectionalLight":
          t19 = {
            direction: new U7(),
            color: new ze4()
          };
          break;
        case "SpotLight":
          t19 = {
            position: new U7(),
            direction: new U7(),
            color: new ze4(),
            distance: 0,
            coneCos: 0,
            penumbraCos: 0,
            decay: 0
          };
          break;
        case "PointLight":
          t19 = {
            position: new U7(),
            color: new ze4(),
            distance: 0,
            decay: 0
          };
          break;
        case "HemisphereLight":
          t19 = {
            direction: new U7(),
            skyColor: new ze4(),
            groundColor: new ze4()
          };
          break;
        case "RectAreaLight":
          t19 = {
            color: new ze4(),
            position: new U7(),
            halfWidth: new U7(),
            halfHeight: new U7()
          };
          break;
      }
      return a22[e11.id] = t19, t19;
    }
  };
}
function jg() {
  const a22 = {};
  return {
    get: function(e11) {
      if (a22[e11.id] !== void 0)
        return a22[e11.id];
      let t19;
      switch (e11.type) {
        case "DirectionalLight":
          t19 = {
            shadowBias: 0,
            shadowNormalBias: 0,
            shadowRadius: 1,
            shadowMapSize: new We4()
          };
          break;
        case "SpotLight":
          t19 = {
            shadowBias: 0,
            shadowNormalBias: 0,
            shadowRadius: 1,
            shadowMapSize: new We4()
          };
          break;
        case "PointLight":
          t19 = {
            shadowBias: 0,
            shadowNormalBias: 0,
            shadowRadius: 1,
            shadowMapSize: new We4(),
            shadowCameraNear: 1,
            shadowCameraFar: 1e3
          };
          break;
      }
      return a22[e11.id] = t19, t19;
    }
  };
}
var qg = 0;
function Xg(a22, e11) {
  return (e11.castShadow ? 2 : 0) - (a22.castShadow ? 2 : 0) + (e11.map ? 1 : 0) - (a22.map ? 1 : 0);
}
function Kg(a22, e11) {
  const t19 = new Wg(), n33 = jg(), i27 = {
    version: 0,
    hash: {
      directionalLength: -1,
      pointLength: -1,
      spotLength: -1,
      rectAreaLength: -1,
      hemiLength: -1,
      numDirectionalShadows: -1,
      numPointShadows: -1,
      numSpotShadows: -1,
      numSpotMaps: -1
    },
    ambient: [0, 0, 0],
    probe: [],
    directional: [],
    directionalShadow: [],
    directionalShadowMap: [],
    directionalShadowMatrix: [],
    spot: [],
    spotLightMap: [],
    spotShadow: [],
    spotShadowMap: [],
    spotLightMatrix: [],
    rectArea: [],
    rectAreaLTC1: null,
    rectAreaLTC2: null,
    point: [],
    pointShadow: [],
    pointShadowMap: [],
    pointShadowMatrix: [],
    hemi: [],
    numSpotLightShadowsWithMaps: 0
  };
  for (let u35 = 0; u35 < 9; u35++)
    i27.probe.push(new U7());
  const s18 = new U7(), r24 = new Ve4(), o12 = new Ve4();
  function c27(u35, h26) {
    let d34 = 0, p26 = 0, g31 = 0;
    for (let G15 = 0; G15 < 9; G15++)
      i27.probe[G15].set(0, 0, 0);
    let y33 = 0, m33 = 0, f39 = 0, E24 = 0, b33 = 0, w29 = 0, S21 = 0, D17 = 0, N19 = 0, I16 = 0;
    u35.sort(Xg);
    const v30 = h26 === true ? Math.PI : 1;
    for (let G15 = 0, B21 = u35.length; G15 < B21; G15++) {
      const k27 = u35[G15], V14 = k27.color, H15 = k27.intensity, W8 = k27.distance, te7 = k27.shadow && k27.shadow.map ? k27.shadow.map.texture : null;
      if (k27.isAmbientLight)
        d34 += V14.r * H15 * v30, p26 += V14.g * H15 * v30, g31 += V14.b * H15 * v30;
      else if (k27.isLightProbe)
        for (let J11 = 0; J11 < 9; J11++)
          i27.probe[J11].addScaledVector(k27.sh.coefficients[J11], H15);
      else if (k27.isDirectionalLight) {
        const J11 = t19.get(k27);
        if (J11.color.copy(k27.color).multiplyScalar(k27.intensity * v30), k27.castShadow) {
          const ie8 = k27.shadow, le7 = n33.get(k27);
          le7.shadowBias = ie8.bias, le7.shadowNormalBias = ie8.normalBias, le7.shadowRadius = ie8.radius, le7.shadowMapSize = ie8.mapSize, i27.directionalShadow[y33] = le7, i27.directionalShadowMap[y33] = te7, i27.directionalShadowMatrix[y33] = k27.shadow.matrix, w29++;
        }
        i27.directional[y33] = J11, y33++;
      } else if (k27.isSpotLight) {
        const J11 = t19.get(k27);
        J11.position.setFromMatrixPosition(k27.matrixWorld), J11.color.copy(V14).multiplyScalar(H15 * v30), J11.distance = W8, J11.coneCos = Math.cos(k27.angle), J11.penumbraCos = Math.cos(k27.angle * (1 - k27.penumbra)), J11.decay = k27.decay, i27.spot[f39] = J11;
        const ie8 = k27.shadow;
        if (k27.map && (i27.spotLightMap[N19] = k27.map, N19++, ie8.updateMatrices(k27), k27.castShadow && I16++), i27.spotLightMatrix[f39] = ie8.matrix, k27.castShadow) {
          const le7 = n33.get(k27);
          le7.shadowBias = ie8.bias, le7.shadowNormalBias = ie8.normalBias, le7.shadowRadius = ie8.radius, le7.shadowMapSize = ie8.mapSize, i27.spotShadow[f39] = le7, i27.spotShadowMap[f39] = te7, D17++;
        }
        f39++;
      } else if (k27.isRectAreaLight) {
        const J11 = t19.get(k27);
        J11.color.copy(V14).multiplyScalar(H15), J11.halfWidth.set(k27.width * 0.5, 0, 0), J11.halfHeight.set(0, k27.height * 0.5, 0), i27.rectArea[E24] = J11, E24++;
      } else if (k27.isPointLight) {
        const J11 = t19.get(k27);
        if (J11.color.copy(k27.color).multiplyScalar(k27.intensity * v30), J11.distance = k27.distance, J11.decay = k27.decay, k27.castShadow) {
          const ie8 = k27.shadow, le7 = n33.get(k27);
          le7.shadowBias = ie8.bias, le7.shadowNormalBias = ie8.normalBias, le7.shadowRadius = ie8.radius, le7.shadowMapSize = ie8.mapSize, le7.shadowCameraNear = ie8.camera.near, le7.shadowCameraFar = ie8.camera.far, i27.pointShadow[m33] = le7, i27.pointShadowMap[m33] = te7, i27.pointShadowMatrix[m33] = k27.shadow.matrix, S21++;
        }
        i27.point[m33] = J11, m33++;
      } else if (k27.isHemisphereLight) {
        const J11 = t19.get(k27);
        J11.skyColor.copy(k27.color).multiplyScalar(H15 * v30), J11.groundColor.copy(k27.groundColor).multiplyScalar(H15 * v30), i27.hemi[b33] = J11, b33++;
      }
    }
    E24 > 0 && (e11.isWebGL2 || a22.has("OES_texture_float_linear") === true ? (i27.rectAreaLTC1 = xe4.LTC_FLOAT_1, i27.rectAreaLTC2 = xe4.LTC_FLOAT_2) : a22.has("OES_texture_half_float_linear") === true ? (i27.rectAreaLTC1 = xe4.LTC_HALF_1, i27.rectAreaLTC2 = xe4.LTC_HALF_2) : console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")), i27.ambient[0] = d34, i27.ambient[1] = p26, i27.ambient[2] = g31;
    const L11 = i27.hash;
    (L11.directionalLength !== y33 || L11.pointLength !== m33 || L11.spotLength !== f39 || L11.rectAreaLength !== E24 || L11.hemiLength !== b33 || L11.numDirectionalShadows !== w29 || L11.numPointShadows !== S21 || L11.numSpotShadows !== D17 || L11.numSpotMaps !== N19) && (i27.directional.length = y33, i27.spot.length = f39, i27.rectArea.length = E24, i27.point.length = m33, i27.hemi.length = b33, i27.directionalShadow.length = w29, i27.directionalShadowMap.length = w29, i27.pointShadow.length = S21, i27.pointShadowMap.length = S21, i27.spotShadow.length = D17, i27.spotShadowMap.length = D17, i27.directionalShadowMatrix.length = w29, i27.pointShadowMatrix.length = S21, i27.spotLightMatrix.length = D17 + N19 - I16, i27.spotLightMap.length = N19, i27.numSpotLightShadowsWithMaps = I16, L11.directionalLength = y33, L11.pointLength = m33, L11.spotLength = f39, L11.rectAreaLength = E24, L11.hemiLength = b33, L11.numDirectionalShadows = w29, L11.numPointShadows = S21, L11.numSpotShadows = D17, L11.numSpotMaps = N19, i27.version = qg++);
  }
  function l25(u35, h26) {
    let d34 = 0, p26 = 0, g31 = 0, y33 = 0, m33 = 0;
    const f39 = h26.matrixWorldInverse;
    for (let E24 = 0, b33 = u35.length; E24 < b33; E24++) {
      const w29 = u35[E24];
      if (w29.isDirectionalLight) {
        const S21 = i27.directional[d34];
        S21.direction.setFromMatrixPosition(w29.matrixWorld), s18.setFromMatrixPosition(w29.target.matrixWorld), S21.direction.sub(s18), S21.direction.transformDirection(f39), d34++;
      } else if (w29.isSpotLight) {
        const S21 = i27.spot[g31];
        S21.position.setFromMatrixPosition(w29.matrixWorld), S21.position.applyMatrix4(f39), S21.direction.setFromMatrixPosition(w29.matrixWorld), s18.setFromMatrixPosition(w29.target.matrixWorld), S21.direction.sub(s18), S21.direction.transformDirection(f39), g31++;
      } else if (w29.isRectAreaLight) {
        const S21 = i27.rectArea[y33];
        S21.position.setFromMatrixPosition(w29.matrixWorld), S21.position.applyMatrix4(f39), o12.identity(), r24.copy(w29.matrixWorld), r24.premultiply(f39), o12.extractRotation(r24), S21.halfWidth.set(w29.width * 0.5, 0, 0), S21.halfHeight.set(0, w29.height * 0.5, 0), S21.halfWidth.applyMatrix4(o12), S21.halfHeight.applyMatrix4(o12), y33++;
      } else if (w29.isPointLight) {
        const S21 = i27.point[p26];
        S21.position.setFromMatrixPosition(w29.matrixWorld), S21.position.applyMatrix4(f39), p26++;
      } else if (w29.isHemisphereLight) {
        const S21 = i27.hemi[m33];
        S21.direction.setFromMatrixPosition(w29.matrixWorld), S21.direction.transformDirection(f39), m33++;
      }
    }
  }
  return {
    setup: c27,
    setupView: l25,
    state: i27
  };
}
function mc(a22, e11) {
  const t19 = new Kg(a22, e11), n33 = [], i27 = [];
  function s18() {
    n33.length = 0, i27.length = 0;
  }
  function r24(h26) {
    n33.push(h26);
  }
  function o12(h26) {
    i27.push(h26);
  }
  function c27(h26) {
    t19.setup(n33, h26);
  }
  function l25(h26) {
    t19.setupView(n33, h26);
  }
  return {
    init: s18,
    state: {
      lightsArray: n33,
      shadowsArray: i27,
      lights: t19
    },
    setupLights: c27,
    setupLightsView: l25,
    pushLight: r24,
    pushShadow: o12
  };
}
function Yg(a22, e11) {
  let t19 = /* @__PURE__ */ new WeakMap();
  function n33(s18, r24 = 0) {
    const o12 = t19.get(s18);
    let c27;
    return o12 === void 0 ? (c27 = new mc(a22, e11), t19.set(s18, [c27])) : r24 >= o12.length ? (c27 = new mc(a22, e11), o12.push(c27)) : c27 = o12[r24], c27;
  }
  function i27() {
    t19 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: n33,
    dispose: i27
  };
}
var Jg = class extends mn3 {
  constructor(e11) {
    super(), this.isMeshDepthMaterial = true, this.type = "MeshDepthMaterial", this.depthPacking = qh, this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.wireframe = false, this.wireframeLinewidth = 1, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.depthPacking = e11.depthPacking, this.map = e11.map, this.alphaMap = e11.alphaMap, this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this;
  }
};
var Zg = class extends mn3 {
  constructor(e11) {
    super(), this.isMeshDistanceMaterial = true, this.type = "MeshDistanceMaterial", this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.map = e11.map, this.alphaMap = e11.alphaMap, this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this;
  }
};
var $g = `void main() {
	gl_Position = vec4( position, 1.0 );
}`;
var Qg = `uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;
function e0(a22, e11, t19) {
  let n33 = new Ra();
  const i27 = new We4(), s18 = new We4(), r24 = new gt5(), o12 = new Jg({ depthPacking: Xh }), c27 = new Zg(), l25 = {}, u35 = t19.maxTextureSize, h26 = { [Pn3]: sn3, [sn3]: Pn3, [fn3]: fn3 }, d34 = new Ri({
    defines: {
      VSM_SAMPLES: 8
    },
    uniforms: {
      shadow_pass: { value: null },
      resolution: { value: new We4() },
      radius: { value: 4 }
    },
    vertexShader: $g,
    fragmentShader: Qg
  }), p26 = d34.clone();
  p26.defines.HORIZONTAL_PASS = 1;
  const g31 = new Xt3();
  g31.setAttribute(
    "position",
    new Gt3(
      new Float32Array([-1, -1, 0.5, 3, -1, 0.5, -1, 3, 0.5]),
      3
    )
  );
  const y33 = new Pt4(g31, d34), m33 = this;
  this.enabled = false, this.autoUpdate = true, this.needsUpdate = false, this.type = Zc, this.render = function(w29, S21, D17) {
    if (m33.enabled === false || m33.autoUpdate === false && m33.needsUpdate === false || w29.length === 0)
      return;
    const N19 = a22.getRenderTarget(), I16 = a22.getActiveCubeFace(), v30 = a22.getActiveMipmapLevel(), L11 = a22.state;
    L11.setBlending(li3), L11.buffers.color.setClear(1, 1, 1, 1), L11.buffers.depth.setTest(true), L11.setScissorTest(false);
    for (let G15 = 0, B21 = w29.length; G15 < B21; G15++) {
      const k27 = w29[G15], V14 = k27.shadow;
      if (V14 === void 0) {
        console.warn("THREE.WebGLShadowMap:", k27, "has no shadow.");
        continue;
      }
      if (V14.autoUpdate === false && V14.needsUpdate === false)
        continue;
      i27.copy(V14.mapSize);
      const H15 = V14.getFrameExtents();
      if (i27.multiply(H15), s18.copy(V14.mapSize), (i27.x > u35 || i27.y > u35) && (i27.x > u35 && (s18.x = Math.floor(u35 / H15.x), i27.x = s18.x * H15.x, V14.mapSize.x = s18.x), i27.y > u35 && (s18.y = Math.floor(u35 / H15.y), i27.y = s18.y * H15.y, V14.mapSize.y = s18.y)), V14.map === null) {
        const te7 = this.type !== Ks ? { minFilter: Bt3, magFilter: Bt3 } : {};
        V14.map = new Li(i27.x, i27.y, te7), V14.map.texture.name = k27.name + ".shadowMap", V14.camera.updateProjectionMatrix();
      }
      a22.setRenderTarget(V14.map), a22.clear();
      const W8 = V14.getViewportCount();
      for (let te7 = 0; te7 < W8; te7++) {
        const J11 = V14.getViewport(te7);
        r24.set(
          s18.x * J11.x,
          s18.y * J11.y,
          s18.x * J11.z,
          s18.y * J11.w
        ), L11.viewport(r24), V14.updateMatrices(k27, te7), n33 = V14.getFrustum(), b33(S21, D17, V14.camera, k27, this.type);
      }
      V14.isPointLightShadow !== true && this.type === Ks && f39(V14, D17), V14.needsUpdate = false;
    }
    m33.needsUpdate = false, a22.setRenderTarget(N19, I16, v30);
  };
  function f39(w29, S21) {
    const D17 = e11.update(y33);
    d34.defines.VSM_SAMPLES !== w29.blurSamples && (d34.defines.VSM_SAMPLES = w29.blurSamples, p26.defines.VSM_SAMPLES = w29.blurSamples, d34.needsUpdate = true, p26.needsUpdate = true), w29.mapPass === null && (w29.mapPass = new Li(i27.x, i27.y)), d34.uniforms.shadow_pass.value = w29.map.texture, d34.uniforms.resolution.value = w29.mapSize, d34.uniforms.radius.value = w29.radius, a22.setRenderTarget(w29.mapPass), a22.clear(), a22.renderBufferDirect(S21, null, D17, d34, y33, null), p26.uniforms.shadow_pass.value = w29.mapPass.texture, p26.uniforms.resolution.value = w29.mapSize, p26.uniforms.radius.value = w29.radius, a22.setRenderTarget(w29.map), a22.clear(), a22.renderBufferDirect(S21, null, D17, p26, y33, null);
  }
  function E24(w29, S21, D17, N19) {
    let I16 = null;
    const v30 = D17.isPointLight === true ? w29.customDistanceMaterial : w29.customDepthMaterial;
    if (v30 !== void 0)
      I16 = v30;
    else if (I16 = D17.isPointLight === true ? c27 : o12, a22.localClippingEnabled && S21.clipShadows === true && Array.isArray(S21.clippingPlanes) && S21.clippingPlanes.length !== 0 || S21.displacementMap && S21.displacementScale !== 0 || S21.alphaMap && S21.alphaTest > 0 || S21.map && S21.alphaTest > 0) {
      const L11 = I16.uuid, G15 = S21.uuid;
      let B21 = l25[L11];
      B21 === void 0 && (B21 = {}, l25[L11] = B21);
      let k27 = B21[G15];
      k27 === void 0 && (k27 = I16.clone(), B21[G15] = k27), I16 = k27;
    }
    if (I16.visible = S21.visible, I16.wireframe = S21.wireframe, N19 === Ks ? I16.side = S21.shadowSide !== null ? S21.shadowSide : S21.side : I16.side = S21.shadowSide !== null ? S21.shadowSide : h26[S21.side], I16.alphaMap = S21.alphaMap, I16.alphaTest = S21.alphaTest, I16.map = S21.map, I16.clipShadows = S21.clipShadows, I16.clippingPlanes = S21.clippingPlanes, I16.clipIntersection = S21.clipIntersection, I16.displacementMap = S21.displacementMap, I16.displacementScale = S21.displacementScale, I16.displacementBias = S21.displacementBias, I16.wireframeLinewidth = S21.wireframeLinewidth, I16.linewidth = S21.linewidth, D17.isPointLight === true && I16.isMeshDistanceMaterial === true) {
      const L11 = a22.properties.get(I16);
      L11.light = D17;
    }
    return I16;
  }
  function b33(w29, S21, D17, N19, I16) {
    if (w29.visible === false)
      return;
    if (w29.layers.test(S21.layers) && (w29.isMesh || w29.isLine || w29.isPoints) && (w29.castShadow || w29.receiveShadow && I16 === Ks) && (!w29.frustumCulled || n33.intersectsObject(w29))) {
      w29.modelViewMatrix.multiplyMatrices(D17.matrixWorldInverse, w29.matrixWorld);
      const G15 = e11.update(w29), B21 = w29.material;
      if (Array.isArray(B21)) {
        const k27 = G15.groups;
        for (let V14 = 0, H15 = k27.length; V14 < H15; V14++) {
          const W8 = k27[V14], te7 = B21[W8.materialIndex];
          if (te7 && te7.visible) {
            const J11 = E24(w29, te7, N19, I16);
            a22.renderBufferDirect(D17, null, G15, J11, w29, W8);
          }
        }
      } else if (B21.visible) {
        const k27 = E24(w29, B21, N19, I16);
        a22.renderBufferDirect(D17, null, G15, k27, w29, null);
      }
    }
    const L11 = w29.children;
    for (let G15 = 0, B21 = L11.length; G15 < B21; G15++)
      b33(L11[G15], S21, D17, N19, I16);
  }
}
function t0(a22, e11, t19) {
  const n33 = t19.isWebGL2;
  function i27() {
    let F17 = false;
    const se6 = new gt5();
    let ue8 = null;
    const Se7 = new gt5(0, 0, 0, 0);
    return {
      setMask: function(De6) {
        ue8 !== De6 && !F17 && (a22.colorMask(De6, De6, De6, De6), ue8 = De6);
      },
      setLocked: function(De6) {
        F17 = De6;
      },
      setClear: function(De6, pt11, vt8, It7, Tn6) {
        Tn6 === true && (De6 *= It7, pt11 *= It7, vt8 *= It7), se6.set(De6, pt11, vt8, It7), Se7.equals(se6) === false && (a22.clearColor(De6, pt11, vt8, It7), Se7.copy(se6));
      },
      reset: function() {
        F17 = false, ue8 = null, Se7.set(-1, 0, 0, 0);
      }
    };
  }
  function s18() {
    let F17 = false, se6 = null, ue8 = null, Se7 = null;
    return {
      setTest: function(De6) {
        De6 ? z19(2929) : be7(2929);
      },
      setMask: function(De6) {
        se6 !== De6 && !F17 && (a22.depthMask(De6), se6 = De6);
      },
      setFunc: function(De6) {
        if (ue8 !== De6) {
          switch (De6) {
            case mh:
              a22.depthFunc(512);
              break;
            case gh:
              a22.depthFunc(519);
              break;
            case _h:
              a22.depthFunc(513);
              break;
            case ha:
              a22.depthFunc(515);
              break;
            case xh:
              a22.depthFunc(514);
              break;
            case yh:
              a22.depthFunc(518);
              break;
            case vh:
              a22.depthFunc(516);
              break;
            case bh:
              a22.depthFunc(517);
              break;
            default:
              a22.depthFunc(515);
          }
          ue8 = De6;
        }
      },
      setLocked: function(De6) {
        F17 = De6;
      },
      setClear: function(De6) {
        Se7 !== De6 && (a22.clearDepth(De6), Se7 = De6);
      },
      reset: function() {
        F17 = false, se6 = null, ue8 = null, Se7 = null;
      }
    };
  }
  function r24() {
    let F17 = false, se6 = null, ue8 = null, Se7 = null, De6 = null, pt11 = null, vt8 = null, It7 = null, Tn6 = null;
    return {
      setTest: function(it14) {
        F17 || (it14 ? z19(2960) : be7(2960));
      },
      setMask: function(it14) {
        se6 !== it14 && !F17 && (a22.stencilMask(it14), se6 = it14);
      },
      setFunc: function(it14, $t8, cn3) {
        (ue8 !== it14 || Se7 !== $t8 || De6 !== cn3) && (a22.stencilFunc(it14, $t8, cn3), ue8 = it14, Se7 = $t8, De6 = cn3);
      },
      setOp: function(it14, $t8, cn3) {
        (pt11 !== it14 || vt8 !== $t8 || It7 !== cn3) && (a22.stencilOp(it14, $t8, cn3), pt11 = it14, vt8 = $t8, It7 = cn3);
      },
      setLocked: function(it14) {
        F17 = it14;
      },
      setClear: function(it14) {
        Tn6 !== it14 && (a22.clearStencil(it14), Tn6 = it14);
      },
      reset: function() {
        F17 = false, se6 = null, ue8 = null, Se7 = null, De6 = null, pt11 = null, vt8 = null, It7 = null, Tn6 = null;
      }
    };
  }
  const o12 = new i27(), c27 = new s18(), l25 = new r24(), u35 = /* @__PURE__ */ new WeakMap(), h26 = /* @__PURE__ */ new WeakMap();
  let d34 = {}, p26 = {}, g31 = /* @__PURE__ */ new WeakMap(), y33 = [], m33 = null, f39 = false, E24 = null, b33 = null, w29 = null, S21 = null, D17 = null, N19 = null, I16 = null, v30 = false, L11 = null, G15 = null, B21 = null, k27 = null, V14 = null;
  const H15 = a22.getParameter(35661);
  let W8 = false, te7 = 0;
  const J11 = a22.getParameter(7938);
  J11.indexOf("WebGL") !== -1 ? (te7 = parseFloat(/^WebGL (\d)/.exec(J11)[1]), W8 = te7 >= 1) : J11.indexOf("OpenGL ES") !== -1 && (te7 = parseFloat(/^OpenGL ES (\d)/.exec(J11)[1]), W8 = te7 >= 2);
  let ie8 = null, le7 = {};
  const me9 = a22.getParameter(3088), he8 = a22.getParameter(2978), j18 = new gt5().fromArray(me9), X12 = new gt5().fromArray(he8);
  function ee7(F17, se6, ue8) {
    const Se7 = new Uint8Array(4), De6 = a22.createTexture();
    a22.bindTexture(F17, De6), a22.texParameteri(F17, 10241, 9728), a22.texParameteri(F17, 10240, 9728);
    for (let pt11 = 0; pt11 < ue8; pt11++)
      a22.texImage2D(se6 + pt11, 0, 6408, 1, 1, 0, 6408, 5121, Se7);
    return De6;
  }
  const $24 = {};
  $24[3553] = ee7(3553, 3553, 1), $24[34067] = ee7(34067, 34069, 6), o12.setClear(0, 0, 0, 1), c27.setClear(1), l25.setClear(0), z19(2929), c27.setFunc(ha), xt8(false), St8(el), z19(2884), je7(li3);
  function z19(F17) {
    d34[F17] !== true && (a22.enable(F17), d34[F17] = true);
  }
  function be7(F17) {
    d34[F17] !== false && (a22.disable(F17), d34[F17] = false);
  }
  function Ee5(F17, se6) {
    return p26[F17] !== se6 ? (a22.bindFramebuffer(F17, se6), p26[F17] = se6, n33 && (F17 === 36009 && (p26[36160] = se6), F17 === 36160 && (p26[36009] = se6)), true) : false;
  }
  function pe8(F17, se6) {
    let ue8 = y33, Se7 = false;
    if (F17)
      if (ue8 = g31.get(se6), ue8 === void 0 && (ue8 = [], g31.set(se6, ue8)), F17.isWebGLMultipleRenderTargets) {
        const De6 = F17.texture;
        if (ue8.length !== De6.length || ue8[0] !== 36064) {
          for (let pt11 = 0, vt8 = De6.length; pt11 < vt8; pt11++)
            ue8[pt11] = 36064 + pt11;
          ue8.length = De6.length, Se7 = true;
        }
      } else
        ue8[0] !== 36064 && (ue8[0] = 36064, Se7 = true);
    else
      ue8[0] !== 1029 && (ue8[0] = 1029, Se7 = true);
    Se7 && (t19.isWebGL2 ? a22.drawBuffers(ue8) : e11.get("WEBGL_draw_buffers").drawBuffersWEBGL(ue8));
  }
  function ke7(F17) {
    return m33 !== F17 ? (a22.useProgram(F17), m33 = F17, true) : false;
  }
  const nt14 = {
    [fs]: 32774,
    [sh]: 32778,
    [rh]: 32779
  };
  if (n33)
    nt14[sl] = 32775, nt14[rl] = 32776;
  else {
    const F17 = e11.get("EXT_blend_minmax");
    F17 !== null && (nt14[sl] = F17.MIN_EXT, nt14[rl] = F17.MAX_EXT);
  }
  const Ie7 = {
    [oh]: 0,
    [ah]: 1,
    [lh]: 768,
    [$c]: 770,
    [ph]: 776,
    [dh]: 774,
    [uh]: 772,
    [ch]: 769,
    [Qc]: 771,
    [fh]: 775,
    [hh]: 773
  };
  function je7(F17, se6, ue8, Se7, De6, pt11, vt8, It7) {
    if (F17 === li3) {
      f39 === true && (be7(3042), f39 = false);
      return;
    }
    if (f39 === false && (z19(3042), f39 = true), F17 !== ih) {
      if (F17 !== E24 || It7 !== v30) {
        if ((b33 !== fs || D17 !== fs) && (a22.blendEquation(32774), b33 = fs, D17 = fs), It7)
          switch (F17) {
            case gs:
              a22.blendFuncSeparate(1, 771, 1, 771);
              break;
            case tl:
              a22.blendFunc(1, 1);
              break;
            case nl:
              a22.blendFuncSeparate(0, 769, 0, 1);
              break;
            case il:
              a22.blendFuncSeparate(0, 768, 0, 770);
              break;
            default:
              console.error("THREE.WebGLState: Invalid blending: ", F17);
              break;
          }
        else
          switch (F17) {
            case gs:
              a22.blendFuncSeparate(770, 771, 1, 771);
              break;
            case tl:
              a22.blendFunc(770, 1);
              break;
            case nl:
              a22.blendFuncSeparate(0, 769, 0, 1);
              break;
            case il:
              a22.blendFunc(0, 768);
              break;
            default:
              console.error("THREE.WebGLState: Invalid blending: ", F17);
              break;
          }
        w29 = null, S21 = null, N19 = null, I16 = null, E24 = F17, v30 = It7;
      }
      return;
    }
    De6 = De6 || se6, pt11 = pt11 || ue8, vt8 = vt8 || Se7, (se6 !== b33 || De6 !== D17) && (a22.blendEquationSeparate(nt14[se6], nt14[De6]), b33 = se6, D17 = De6), (ue8 !== w29 || Se7 !== S21 || pt11 !== N19 || vt8 !== I16) && (a22.blendFuncSeparate(Ie7[ue8], Ie7[Se7], Ie7[pt11], Ie7[vt8]), w29 = ue8, S21 = Se7, N19 = pt11, I16 = vt8), E24 = F17, v30 = false;
  }
  function bt9(F17, se6) {
    F17.side === fn3 ? be7(2884) : z19(2884);
    let ue8 = F17.side === sn3;
    se6 && (ue8 = !ue8), xt8(ue8), F17.blending === gs && F17.transparent === false ? je7(li3) : je7(F17.blending, F17.blendEquation, F17.blendSrc, F17.blendDst, F17.blendEquationAlpha, F17.blendSrcAlpha, F17.blendDstAlpha, F17.premultipliedAlpha), c27.setFunc(F17.depthFunc), c27.setTest(F17.depthTest), c27.setMask(F17.depthWrite), o12.setMask(F17.colorWrite);
    const Se7 = F17.stencilWrite;
    l25.setTest(Se7), Se7 && (l25.setMask(F17.stencilWriteMask), l25.setFunc(F17.stencilFunc, F17.stencilRef, F17.stencilFuncMask), l25.setOp(F17.stencilFail, F17.stencilZFail, F17.stencilZPass)), et13(F17.polygonOffset, F17.polygonOffsetFactor, F17.polygonOffsetUnits), F17.alphaToCoverage === true ? z19(32926) : be7(32926);
  }
  function xt8(F17) {
    L11 !== F17 && (F17 ? a22.frontFace(2304) : a22.frontFace(2305), L11 = F17);
  }
  function St8(F17) {
    F17 !== eh ? (z19(2884), F17 !== G15 && (F17 === el ? a22.cullFace(1029) : F17 === th ? a22.cullFace(1028) : a22.cullFace(1032))) : be7(2884), G15 = F17;
  }
  function wt9(F17) {
    F17 !== B21 && (W8 && a22.lineWidth(F17), B21 = F17);
  }
  function et13(F17, se6, ue8) {
    F17 ? (z19(32823), (k27 !== se6 || V14 !== ue8) && (a22.polygonOffset(se6, ue8), k27 = se6, V14 = ue8)) : be7(32823);
  }
  function ct11(F17) {
    F17 ? z19(3089) : be7(3089);
  }
  function kt10(F17) {
    F17 === void 0 && (F17 = 33984 + H15 - 1), ie8 !== F17 && (a22.activeTexture(F17), ie8 = F17);
  }
  function P19(F17, se6, ue8) {
    ue8 === void 0 && (ie8 === null ? ue8 = 33984 + H15 - 1 : ue8 = ie8);
    let Se7 = le7[ue8];
    Se7 === void 0 && (Se7 = { type: void 0, texture: void 0 }, le7[ue8] = Se7), (Se7.type !== F17 || Se7.texture !== se6) && (ie8 !== ue8 && (a22.activeTexture(ue8), ie8 = ue8), a22.bindTexture(F17, se6 || $24[F17]), Se7.type = F17, Se7.texture = se6);
  }
  function C19() {
    const F17 = le7[ie8];
    F17 !== void 0 && F17.type !== void 0 && (a22.bindTexture(F17.type, null), F17.type = void 0, F17.texture = void 0);
  }
  function Q11() {
    try {
      a22.compressedTexImage2D.apply(a22, arguments);
    } catch (F17) {
      console.error("THREE.WebGLState:", F17);
    }
  }
  function de9() {
    try {
      a22.compressedTexImage3D.apply(a22, arguments);
    } catch (F17) {
      console.error("THREE.WebGLState:", F17);
    }
  }
  function fe7() {
    try {
      a22.texSubImage2D.apply(a22, arguments);
    } catch (F17) {
      console.error("THREE.WebGLState:", F17);
    }
  }
  function _e7() {
    try {
      a22.texSubImage3D.apply(a22, arguments);
    } catch (F17) {
      console.error("THREE.WebGLState:", F17);
    }
  }
  function O20() {
    try {
      a22.compressedTexSubImage2D.apply(a22, arguments);
    } catch (F17) {
      console.error("THREE.WebGLState:", F17);
    }
  }
  function ae7() {
    try {
      a22.compressedTexSubImage3D.apply(a22, arguments);
    } catch (F17) {
      console.error("THREE.WebGLState:", F17);
    }
  }
  function Z11() {
    try {
      a22.texStorage2D.apply(a22, arguments);
    } catch (F17) {
      console.error("THREE.WebGLState:", F17);
    }
  }
  function ye7() {
    try {
      a22.texStorage3D.apply(a22, arguments);
    } catch (F17) {
      console.error("THREE.WebGLState:", F17);
    }
  }
  function Te7() {
    try {
      a22.texImage2D.apply(a22, arguments);
    } catch (F17) {
      console.error("THREE.WebGLState:", F17);
    }
  }
  function Le7() {
    try {
      a22.texImage3D.apply(a22, arguments);
    } catch (F17) {
      console.error("THREE.WebGLState:", F17);
    }
  }
  function Me7(F17) {
    j18.equals(F17) === false && (a22.scissor(F17.x, F17.y, F17.z, F17.w), j18.copy(F17));
  }
  function Ce7(F17) {
    X12.equals(F17) === false && (a22.viewport(F17.x, F17.y, F17.z, F17.w), X12.copy(F17));
  }
  function Ge7(F17, se6) {
    let ue8 = h26.get(se6);
    ue8 === void 0 && (ue8 = /* @__PURE__ */ new WeakMap(), h26.set(se6, ue8));
    let Se7 = ue8.get(F17);
    Se7 === void 0 && (Se7 = a22.getUniformBlockIndex(se6, F17.name), ue8.set(F17, Se7));
  }
  function Xe7(F17, se6) {
    const Se7 = h26.get(se6).get(F17);
    u35.get(se6) !== Se7 && (a22.uniformBlockBinding(se6, Se7, F17.__bindingPointIndex), u35.set(se6, Se7));
  }
  function Mt10() {
    a22.disable(3042), a22.disable(2884), a22.disable(2929), a22.disable(32823), a22.disable(3089), a22.disable(2960), a22.disable(32926), a22.blendEquation(32774), a22.blendFunc(1, 0), a22.blendFuncSeparate(1, 0, 1, 0), a22.colorMask(true, true, true, true), a22.clearColor(0, 0, 0, 0), a22.depthMask(true), a22.depthFunc(513), a22.clearDepth(1), a22.stencilMask(4294967295), a22.stencilFunc(519, 0, 4294967295), a22.stencilOp(7680, 7680, 7680), a22.clearStencil(0), a22.cullFace(1029), a22.frontFace(2305), a22.polygonOffset(0, 0), a22.activeTexture(33984), a22.bindFramebuffer(36160, null), n33 === true && (a22.bindFramebuffer(36009, null), a22.bindFramebuffer(36008, null)), a22.useProgram(null), a22.lineWidth(1), a22.scissor(0, 0, a22.canvas.width, a22.canvas.height), a22.viewport(0, 0, a22.canvas.width, a22.canvas.height), d34 = {}, ie8 = null, le7 = {}, p26 = {}, g31 = /* @__PURE__ */ new WeakMap(), y33 = [], m33 = null, f39 = false, E24 = null, b33 = null, w29 = null, S21 = null, D17 = null, N19 = null, I16 = null, v30 = false, L11 = null, G15 = null, B21 = null, k27 = null, V14 = null, j18.set(0, 0, a22.canvas.width, a22.canvas.height), X12.set(0, 0, a22.canvas.width, a22.canvas.height), o12.reset(), c27.reset(), l25.reset();
  }
  return {
    buffers: {
      color: o12,
      depth: c27,
      stencil: l25
    },
    enable: z19,
    disable: be7,
    bindFramebuffer: Ee5,
    drawBuffers: pe8,
    useProgram: ke7,
    setBlending: je7,
    setMaterial: bt9,
    setFlipSided: xt8,
    setCullFace: St8,
    setLineWidth: wt9,
    setPolygonOffset: et13,
    setScissorTest: ct11,
    activeTexture: kt10,
    bindTexture: P19,
    unbindTexture: C19,
    compressedTexImage2D: Q11,
    compressedTexImage3D: de9,
    texImage2D: Te7,
    texImage3D: Le7,
    updateUBOMapping: Ge7,
    uniformBlockBinding: Xe7,
    texStorage2D: Z11,
    texStorage3D: ye7,
    texSubImage2D: fe7,
    texSubImage3D: _e7,
    compressedTexSubImage2D: O20,
    compressedTexSubImage3D: ae7,
    scissor: Me7,
    viewport: Ce7,
    reset: Mt10
  };
}
function n0(a22, e11, t19, n33, i27, s18, r24) {
  const o12 = i27.isWebGL2, c27 = i27.maxTextures, l25 = i27.maxCubemapSize, u35 = i27.maxTextureSize, h26 = i27.maxSamples, d34 = e11.has("WEBGL_multisampled_render_to_texture") ? e11.get("WEBGL_multisampled_render_to_texture") : null, p26 = typeof navigator > "u" ? false : /OculusBrowser/g.test(navigator.userAgent), g31 = /* @__PURE__ */ new WeakMap();
  let y33;
  const m33 = /* @__PURE__ */ new WeakMap();
  let f39 = false;
  try {
    f39 = typeof OffscreenCanvas < "u" && new OffscreenCanvas(1, 1).getContext("2d") !== null;
  } catch {
  }
  function E24(P19, C19) {
    return f39 ? (
      // eslint-disable-next-line compat/compat
      new OffscreenCanvas(P19, C19)
    ) : nr3("canvas");
  }
  function b33(P19, C19, Q11, de9) {
    let fe7 = 1;
    if ((P19.width > de9 || P19.height > de9) && (fe7 = de9 / Math.max(P19.width, P19.height)), fe7 < 1 || C19 === true)
      if (typeof HTMLImageElement < "u" && P19 instanceof HTMLImageElement || typeof HTMLCanvasElement < "u" && P19 instanceof HTMLCanvasElement || typeof ImageBitmap < "u" && P19 instanceof ImageBitmap) {
        const _e7 = C19 ? ou : Math.floor, O20 = _e7(fe7 * P19.width), ae7 = _e7(fe7 * P19.height);
        y33 === void 0 && (y33 = E24(O20, ae7));
        const Z11 = Q11 ? E24(O20, ae7) : y33;
        return Z11.width = O20, Z11.height = ae7, Z11.getContext("2d").drawImage(P19, 0, 0, O20, ae7), console.warn("THREE.WebGLRenderer: Texture has been resized from (" + P19.width + "x" + P19.height + ") to (" + O20 + "x" + ae7 + ")."), Z11;
      } else
        return "data" in P19 && console.warn("THREE.WebGLRenderer: Image in DataTexture is too big (" + P19.width + "x" + P19.height + ")."), P19;
    return P19;
  }
  function w29(P19) {
    return xa(P19.width) && xa(P19.height);
  }
  function S21(P19) {
    return o12 ? false : P19.wrapS !== Zt3 || P19.wrapT !== Zt3 || P19.minFilter !== Bt3 && P19.minFilter !== Ht4;
  }
  function D17(P19, C19) {
    return P19.generateMipmaps && C19 && P19.minFilter !== Bt3 && P19.minFilter !== Ht4;
  }
  function N19(P19) {
    a22.generateMipmap(P19);
  }
  function I16(P19, C19, Q11, de9, fe7 = false) {
    if (o12 === false)
      return C19;
    if (P19 !== null) {
      if (a22[P19] !== void 0)
        return a22[P19];
      console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '" + P19 + "'");
    }
    let _e7 = C19;
    return C19 === 6403 && (Q11 === 5126 && (_e7 = 33326), Q11 === 5131 && (_e7 = 33325), Q11 === 5121 && (_e7 = 33321)), C19 === 33319 && (Q11 === 5126 && (_e7 = 33328), Q11 === 5131 && (_e7 = 33327), Q11 === 5121 && (_e7 = 33323)), C19 === 6408 && (Q11 === 5126 && (_e7 = 34836), Q11 === 5131 && (_e7 = 34842), Q11 === 5121 && (_e7 = de9 === st6 && fe7 === false ? 35907 : 32856), Q11 === 32819 && (_e7 = 32854), Q11 === 32820 && (_e7 = 32855)), (_e7 === 33325 || _e7 === 33326 || _e7 === 33327 || _e7 === 33328 || _e7 === 34842 || _e7 === 34836) && e11.get("EXT_color_buffer_float"), _e7;
  }
  function v30(P19, C19, Q11) {
    return D17(P19, Q11) === true || P19.isFramebufferTexture && P19.minFilter !== Bt3 && P19.minFilter !== Ht4 ? Math.log2(Math.max(C19.width, C19.height)) + 1 : P19.mipmaps !== void 0 && P19.mipmaps.length > 0 ? P19.mipmaps.length : P19.isCompressedTexture && Array.isArray(P19.image) ? C19.mipmaps.length : 1;
  }
  function L11(P19) {
    return P19 === Bt3 || P19 === pa || P19 === Qr3 ? 9728 : 9729;
  }
  function G15(P19) {
    const C19 = P19.target;
    C19.removeEventListener("dispose", G15), k27(C19), C19.isVideoTexture && g31.delete(C19);
  }
  function B21(P19) {
    const C19 = P19.target;
    C19.removeEventListener("dispose", B21), H15(C19);
  }
  function k27(P19) {
    const C19 = n33.get(P19);
    if (C19.__webglInit === void 0)
      return;
    const Q11 = P19.source, de9 = m33.get(Q11);
    if (de9) {
      const fe7 = de9[C19.__cacheKey];
      fe7.usedTimes--, fe7.usedTimes === 0 && V14(P19), Object.keys(de9).length === 0 && m33.delete(Q11);
    }
    n33.remove(P19);
  }
  function V14(P19) {
    const C19 = n33.get(P19);
    a22.deleteTexture(C19.__webglTexture);
    const Q11 = P19.source, de9 = m33.get(Q11);
    delete de9[C19.__cacheKey], r24.memory.textures--;
  }
  function H15(P19) {
    const C19 = P19.texture, Q11 = n33.get(P19), de9 = n33.get(C19);
    if (de9.__webglTexture !== void 0 && (a22.deleteTexture(de9.__webglTexture), r24.memory.textures--), P19.depthTexture && P19.depthTexture.dispose(), P19.isWebGLCubeRenderTarget)
      for (let fe7 = 0; fe7 < 6; fe7++)
        a22.deleteFramebuffer(Q11.__webglFramebuffer[fe7]), Q11.__webglDepthbuffer && a22.deleteRenderbuffer(Q11.__webglDepthbuffer[fe7]);
    else {
      if (a22.deleteFramebuffer(Q11.__webglFramebuffer), Q11.__webglDepthbuffer && a22.deleteRenderbuffer(Q11.__webglDepthbuffer), Q11.__webglMultisampledFramebuffer && a22.deleteFramebuffer(Q11.__webglMultisampledFramebuffer), Q11.__webglColorRenderbuffer)
        for (let fe7 = 0; fe7 < Q11.__webglColorRenderbuffer.length; fe7++)
          Q11.__webglColorRenderbuffer[fe7] && a22.deleteRenderbuffer(Q11.__webglColorRenderbuffer[fe7]);
      Q11.__webglDepthRenderbuffer && a22.deleteRenderbuffer(Q11.__webglDepthRenderbuffer);
    }
    if (P19.isWebGLMultipleRenderTargets)
      for (let fe7 = 0, _e7 = C19.length; fe7 < _e7; fe7++) {
        const O20 = n33.get(C19[fe7]);
        O20.__webglTexture && (a22.deleteTexture(O20.__webglTexture), r24.memory.textures--), n33.remove(C19[fe7]);
      }
    n33.remove(C19), n33.remove(P19);
  }
  let W8 = 0;
  function te7() {
    W8 = 0;
  }
  function J11() {
    const P19 = W8;
    return P19 >= c27 && console.warn("THREE.WebGLTextures: Trying to use " + P19 + " texture units while this GPU supports only " + c27), W8 += 1, P19;
  }
  function ie8(P19) {
    const C19 = [];
    return C19.push(P19.wrapS), C19.push(P19.wrapT), C19.push(P19.wrapR || 0), C19.push(P19.magFilter), C19.push(P19.minFilter), C19.push(P19.anisotropy), C19.push(P19.internalFormat), C19.push(P19.format), C19.push(P19.type), C19.push(P19.generateMipmaps), C19.push(P19.premultiplyAlpha), C19.push(P19.flipY), C19.push(P19.unpackAlignment), C19.push(P19.encoding), C19.join();
  }
  function le7(P19, C19) {
    const Q11 = n33.get(P19);
    if (P19.isVideoTexture && ct11(P19), P19.isRenderTargetTexture === false && P19.version > 0 && Q11.__version !== P19.version) {
      const de9 = P19.image;
      if (de9 === null)
        console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");
      else if (de9.complete === false)
        console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");
      else {
        be7(Q11, P19, C19);
        return;
      }
    }
    t19.bindTexture(3553, Q11.__webglTexture, 33984 + C19);
  }
  function me9(P19, C19) {
    const Q11 = n33.get(P19);
    if (P19.version > 0 && Q11.__version !== P19.version) {
      be7(Q11, P19, C19);
      return;
    }
    t19.bindTexture(35866, Q11.__webglTexture, 33984 + C19);
  }
  function he8(P19, C19) {
    const Q11 = n33.get(P19);
    if (P19.version > 0 && Q11.__version !== P19.version) {
      be7(Q11, P19, C19);
      return;
    }
    t19.bindTexture(32879, Q11.__webglTexture, 33984 + C19);
  }
  function j18(P19, C19) {
    const Q11 = n33.get(P19);
    if (P19.version > 0 && Q11.__version !== P19.version) {
      Ee5(Q11, P19, C19);
      return;
    }
    t19.bindTexture(34067, Q11.__webglTexture, 33984 + C19);
  }
  const X12 = {
    [Rn3]: 10497,
    [Zt3]: 33071,
    [to]: 33648
  }, ee7 = {
    [Bt3]: 9728,
    [pa]: 9984,
    [Qr3]: 9986,
    [Ht4]: 9729,
    [tu]: 9985,
    [jn3]: 9987
  };
  function $24(P19, C19, Q11) {
    if (Q11 ? (a22.texParameteri(P19, 10242, X12[C19.wrapS]), a22.texParameteri(P19, 10243, X12[C19.wrapT]), (P19 === 32879 || P19 === 35866) && a22.texParameteri(P19, 32882, X12[C19.wrapR]), a22.texParameteri(P19, 10240, ee7[C19.magFilter]), a22.texParameteri(P19, 10241, ee7[C19.minFilter])) : (a22.texParameteri(P19, 10242, 33071), a22.texParameteri(P19, 10243, 33071), (P19 === 32879 || P19 === 35866) && a22.texParameteri(P19, 32882, 33071), (C19.wrapS !== Zt3 || C19.wrapT !== Zt3) && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."), a22.texParameteri(P19, 10240, L11(C19.magFilter)), a22.texParameteri(P19, 10241, L11(C19.minFilter)), C19.minFilter !== Bt3 && C19.minFilter !== Ht4 && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")), e11.has("EXT_texture_filter_anisotropic") === true) {
      const de9 = e11.get("EXT_texture_filter_anisotropic");
      if (C19.magFilter === Bt3 || C19.minFilter !== Qr3 && C19.minFilter !== jn3 || C19.type === ai3 && e11.has("OES_texture_float_linear") === false || o12 === false && C19.type === Qs && e11.has("OES_texture_half_float_linear") === false)
        return;
      (C19.anisotropy > 1 || n33.get(C19).__currentAnisotropy) && (a22.texParameterf(P19, de9.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(C19.anisotropy, i27.getMaxAnisotropy())), n33.get(C19).__currentAnisotropy = C19.anisotropy);
    }
  }
  function z19(P19, C19) {
    let Q11 = false;
    P19.__webglInit === void 0 && (P19.__webglInit = true, C19.addEventListener("dispose", G15));
    const de9 = C19.source;
    let fe7 = m33.get(de9);
    fe7 === void 0 && (fe7 = {}, m33.set(de9, fe7));
    const _e7 = ie8(C19);
    if (_e7 !== P19.__cacheKey) {
      fe7[_e7] === void 0 && (fe7[_e7] = {
        texture: a22.createTexture(),
        usedTimes: 0
      }, r24.memory.textures++, Q11 = true), fe7[_e7].usedTimes++;
      const O20 = fe7[P19.__cacheKey];
      O20 !== void 0 && (fe7[P19.__cacheKey].usedTimes--, O20.usedTimes === 0 && V14(C19)), P19.__cacheKey = _e7, P19.__webglTexture = fe7[_e7].texture;
    }
    return Q11;
  }
  function be7(P19, C19, Q11) {
    let de9 = 3553;
    (C19.isDataArrayTexture || C19.isCompressedArrayTexture) && (de9 = 35866), C19.isData3DTexture && (de9 = 32879);
    const fe7 = z19(P19, C19), _e7 = C19.source;
    t19.bindTexture(de9, P19.__webglTexture, 33984 + Q11);
    const O20 = n33.get(_e7);
    if (_e7.version !== O20.__version || fe7 === true) {
      t19.activeTexture(33984 + Q11), a22.pixelStorei(37440, C19.flipY), a22.pixelStorei(37441, C19.premultiplyAlpha), a22.pixelStorei(3317, C19.unpackAlignment), a22.pixelStorei(37443, 0);
      const ae7 = S21(C19) && w29(C19.image) === false;
      let Z11 = b33(C19.image, ae7, false, u35);
      Z11 = kt10(C19, Z11);
      const ye7 = w29(Z11) || o12, Te7 = s18.convert(C19.format, C19.encoding);
      let Le7 = s18.convert(C19.type), Me7 = I16(C19.internalFormat, Te7, Le7, C19.encoding, C19.isVideoTexture);
      $24(de9, C19, ye7);
      let Ce7;
      const Ge7 = C19.mipmaps, Xe7 = o12 && C19.isVideoTexture !== true, Mt10 = O20.__version === void 0 || fe7 === true, F17 = v30(C19, Z11, ye7);
      if (C19.isDepthTexture)
        Me7 = 6402, o12 ? C19.type === ai3 ? Me7 = 36012 : C19.type === vi3 ? Me7 = 33190 : C19.type === _s ? Me7 = 35056 : Me7 = 33189 : C19.type === ai3 && console.error("WebGLRenderer: Floating point depth texture requires WebGL2."), C19.format === Ti && Me7 === 6402 && C19.type !== nu && C19.type !== vi3 && (console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."), C19.type = vi3, Le7 = s18.convert(C19.type)), C19.format === Ts && Me7 === 6402 && (Me7 = 34041, C19.type !== _s && (console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."), C19.type = _s, Le7 = s18.convert(C19.type))), Mt10 && (Xe7 ? t19.texStorage2D(3553, 1, Me7, Z11.width, Z11.height) : t19.texImage2D(3553, 0, Me7, Z11.width, Z11.height, 0, Te7, Le7, null));
      else if (C19.isDataTexture)
        if (Ge7.length > 0 && ye7) {
          Xe7 && Mt10 && t19.texStorage2D(3553, F17, Me7, Ge7[0].width, Ge7[0].height);
          for (let se6 = 0, ue8 = Ge7.length; se6 < ue8; se6++)
            Ce7 = Ge7[se6], Xe7 ? t19.texSubImage2D(3553, se6, 0, 0, Ce7.width, Ce7.height, Te7, Le7, Ce7.data) : t19.texImage2D(3553, se6, Me7, Ce7.width, Ce7.height, 0, Te7, Le7, Ce7.data);
          C19.generateMipmaps = false;
        } else
          Xe7 ? (Mt10 && t19.texStorage2D(3553, F17, Me7, Z11.width, Z11.height), t19.texSubImage2D(3553, 0, 0, 0, Z11.width, Z11.height, Te7, Le7, Z11.data)) : t19.texImage2D(3553, 0, Me7, Z11.width, Z11.height, 0, Te7, Le7, Z11.data);
      else if (C19.isCompressedTexture)
        if (C19.isCompressedArrayTexture) {
          Xe7 && Mt10 && t19.texStorage3D(35866, F17, Me7, Ge7[0].width, Ge7[0].height, Z11.depth);
          for (let se6 = 0, ue8 = Ge7.length; se6 < ue8; se6++)
            Ce7 = Ge7[se6], C19.format !== pn3 ? Te7 !== null ? Xe7 ? t19.compressedTexSubImage3D(35866, se6, 0, 0, 0, Ce7.width, Ce7.height, Z11.depth, Te7, Ce7.data, 0, 0) : t19.compressedTexImage3D(35866, se6, Me7, Ce7.width, Ce7.height, Z11.depth, 0, Ce7.data, 0, 0) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : Xe7 ? t19.texSubImage3D(35866, se6, 0, 0, 0, Ce7.width, Ce7.height, Z11.depth, Te7, Le7, Ce7.data) : t19.texImage3D(35866, se6, Me7, Ce7.width, Ce7.height, Z11.depth, 0, Te7, Le7, Ce7.data);
        } else {
          Xe7 && Mt10 && t19.texStorage2D(3553, F17, Me7, Ge7[0].width, Ge7[0].height);
          for (let se6 = 0, ue8 = Ge7.length; se6 < ue8; se6++)
            Ce7 = Ge7[se6], C19.format !== pn3 ? Te7 !== null ? Xe7 ? t19.compressedTexSubImage2D(3553, se6, 0, 0, Ce7.width, Ce7.height, Te7, Ce7.data) : t19.compressedTexImage2D(3553, se6, Me7, Ce7.width, Ce7.height, 0, Ce7.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : Xe7 ? t19.texSubImage2D(3553, se6, 0, 0, Ce7.width, Ce7.height, Te7, Le7, Ce7.data) : t19.texImage2D(3553, se6, Me7, Ce7.width, Ce7.height, 0, Te7, Le7, Ce7.data);
        }
      else if (C19.isDataArrayTexture)
        Xe7 ? (Mt10 && t19.texStorage3D(35866, F17, Me7, Z11.width, Z11.height, Z11.depth), t19.texSubImage3D(35866, 0, 0, 0, 0, Z11.width, Z11.height, Z11.depth, Te7, Le7, Z11.data)) : t19.texImage3D(35866, 0, Me7, Z11.width, Z11.height, Z11.depth, 0, Te7, Le7, Z11.data);
      else if (C19.isData3DTexture)
        Xe7 ? (Mt10 && t19.texStorage3D(32879, F17, Me7, Z11.width, Z11.height, Z11.depth), t19.texSubImage3D(32879, 0, 0, 0, 0, Z11.width, Z11.height, Z11.depth, Te7, Le7, Z11.data)) : t19.texImage3D(32879, 0, Me7, Z11.width, Z11.height, Z11.depth, 0, Te7, Le7, Z11.data);
      else if (C19.isFramebufferTexture) {
        if (Mt10)
          if (Xe7)
            t19.texStorage2D(3553, F17, Me7, Z11.width, Z11.height);
          else {
            let se6 = Z11.width, ue8 = Z11.height;
            for (let Se7 = 0; Se7 < F17; Se7++)
              t19.texImage2D(3553, Se7, Me7, se6, ue8, 0, Te7, Le7, null), se6 >>= 1, ue8 >>= 1;
          }
      } else if (Ge7.length > 0 && ye7) {
        Xe7 && Mt10 && t19.texStorage2D(3553, F17, Me7, Ge7[0].width, Ge7[0].height);
        for (let se6 = 0, ue8 = Ge7.length; se6 < ue8; se6++)
          Ce7 = Ge7[se6], Xe7 ? t19.texSubImage2D(3553, se6, 0, 0, Te7, Le7, Ce7) : t19.texImage2D(3553, se6, Me7, Te7, Le7, Ce7);
        C19.generateMipmaps = false;
      } else
        Xe7 ? (Mt10 && t19.texStorage2D(3553, F17, Me7, Z11.width, Z11.height), t19.texSubImage2D(3553, 0, 0, 0, Te7, Le7, Z11)) : t19.texImage2D(3553, 0, Me7, Te7, Le7, Z11);
      D17(C19, ye7) && N19(de9), O20.__version = _e7.version, C19.onUpdate && C19.onUpdate(C19);
    }
    P19.__version = C19.version;
  }
  function Ee5(P19, C19, Q11) {
    if (C19.image.length !== 6)
      return;
    const de9 = z19(P19, C19), fe7 = C19.source;
    t19.bindTexture(34067, P19.__webglTexture, 33984 + Q11);
    const _e7 = n33.get(fe7);
    if (fe7.version !== _e7.__version || de9 === true) {
      t19.activeTexture(33984 + Q11), a22.pixelStorei(37440, C19.flipY), a22.pixelStorei(37441, C19.premultiplyAlpha), a22.pixelStorei(3317, C19.unpackAlignment), a22.pixelStorei(37443, 0);
      const O20 = C19.isCompressedTexture || C19.image[0].isCompressedTexture, ae7 = C19.image[0] && C19.image[0].isDataTexture, Z11 = [];
      for (let se6 = 0; se6 < 6; se6++)
        !O20 && !ae7 ? Z11[se6] = b33(C19.image[se6], false, true, l25) : Z11[se6] = ae7 ? C19.image[se6].image : C19.image[se6], Z11[se6] = kt10(C19, Z11[se6]);
      const ye7 = Z11[0], Te7 = w29(ye7) || o12, Le7 = s18.convert(C19.format, C19.encoding), Me7 = s18.convert(C19.type), Ce7 = I16(C19.internalFormat, Le7, Me7, C19.encoding), Ge7 = o12 && C19.isVideoTexture !== true, Xe7 = _e7.__version === void 0 || de9 === true;
      let Mt10 = v30(C19, ye7, Te7);
      $24(34067, C19, Te7);
      let F17;
      if (O20) {
        Ge7 && Xe7 && t19.texStorage2D(34067, Mt10, Ce7, ye7.width, ye7.height);
        for (let se6 = 0; se6 < 6; se6++) {
          F17 = Z11[se6].mipmaps;
          for (let ue8 = 0; ue8 < F17.length; ue8++) {
            const Se7 = F17[ue8];
            C19.format !== pn3 ? Le7 !== null ? Ge7 ? t19.compressedTexSubImage2D(34069 + se6, ue8, 0, 0, Se7.width, Se7.height, Le7, Se7.data) : t19.compressedTexImage2D(34069 + se6, ue8, Ce7, Se7.width, Se7.height, 0, Se7.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()") : Ge7 ? t19.texSubImage2D(34069 + se6, ue8, 0, 0, Se7.width, Se7.height, Le7, Me7, Se7.data) : t19.texImage2D(34069 + se6, ue8, Ce7, Se7.width, Se7.height, 0, Le7, Me7, Se7.data);
          }
        }
      } else {
        F17 = C19.mipmaps, Ge7 && Xe7 && (F17.length > 0 && Mt10++, t19.texStorage2D(34067, Mt10, Ce7, Z11[0].width, Z11[0].height));
        for (let se6 = 0; se6 < 6; se6++)
          if (ae7) {
            Ge7 ? t19.texSubImage2D(34069 + se6, 0, 0, 0, Z11[se6].width, Z11[se6].height, Le7, Me7, Z11[se6].data) : t19.texImage2D(34069 + se6, 0, Ce7, Z11[se6].width, Z11[se6].height, 0, Le7, Me7, Z11[se6].data);
            for (let ue8 = 0; ue8 < F17.length; ue8++) {
              const De6 = F17[ue8].image[se6].image;
              Ge7 ? t19.texSubImage2D(34069 + se6, ue8 + 1, 0, 0, De6.width, De6.height, Le7, Me7, De6.data) : t19.texImage2D(34069 + se6, ue8 + 1, Ce7, De6.width, De6.height, 0, Le7, Me7, De6.data);
            }
          } else {
            Ge7 ? t19.texSubImage2D(34069 + se6, 0, 0, 0, Le7, Me7, Z11[se6]) : t19.texImage2D(34069 + se6, 0, Ce7, Le7, Me7, Z11[se6]);
            for (let ue8 = 0; ue8 < F17.length; ue8++) {
              const Se7 = F17[ue8];
              Ge7 ? t19.texSubImage2D(34069 + se6, ue8 + 1, 0, 0, Le7, Me7, Se7.image[se6]) : t19.texImage2D(34069 + se6, ue8 + 1, Ce7, Le7, Me7, Se7.image[se6]);
            }
          }
      }
      D17(C19, Te7) && N19(34067), _e7.__version = fe7.version, C19.onUpdate && C19.onUpdate(C19);
    }
    P19.__version = C19.version;
  }
  function pe8(P19, C19, Q11, de9, fe7) {
    const _e7 = s18.convert(Q11.format, Q11.encoding), O20 = s18.convert(Q11.type), ae7 = I16(Q11.internalFormat, _e7, O20, Q11.encoding);
    n33.get(C19).__hasExternalTextures || (fe7 === 32879 || fe7 === 35866 ? t19.texImage3D(fe7, 0, ae7, C19.width, C19.height, C19.depth, 0, _e7, O20, null) : t19.texImage2D(fe7, 0, ae7, C19.width, C19.height, 0, _e7, O20, null)), t19.bindFramebuffer(36160, P19), et13(C19) ? d34.framebufferTexture2DMultisampleEXT(36160, de9, fe7, n33.get(Q11).__webglTexture, 0, wt9(C19)) : (fe7 === 3553 || fe7 >= 34069 && fe7 <= 34074) && a22.framebufferTexture2D(36160, de9, fe7, n33.get(Q11).__webglTexture, 0), t19.bindFramebuffer(36160, null);
  }
  function ke7(P19, C19, Q11) {
    if (a22.bindRenderbuffer(36161, P19), C19.depthBuffer && !C19.stencilBuffer) {
      let de9 = 33189;
      if (Q11 || et13(C19)) {
        const fe7 = C19.depthTexture;
        fe7 && fe7.isDepthTexture && (fe7.type === ai3 ? de9 = 36012 : fe7.type === vi3 && (de9 = 33190));
        const _e7 = wt9(C19);
        et13(C19) ? d34.renderbufferStorageMultisampleEXT(36161, _e7, de9, C19.width, C19.height) : a22.renderbufferStorageMultisample(36161, _e7, de9, C19.width, C19.height);
      } else
        a22.renderbufferStorage(36161, de9, C19.width, C19.height);
      a22.framebufferRenderbuffer(36160, 36096, 36161, P19);
    } else if (C19.depthBuffer && C19.stencilBuffer) {
      const de9 = wt9(C19);
      Q11 && et13(C19) === false ? a22.renderbufferStorageMultisample(36161, de9, 35056, C19.width, C19.height) : et13(C19) ? d34.renderbufferStorageMultisampleEXT(36161, de9, 35056, C19.width, C19.height) : a22.renderbufferStorage(36161, 34041, C19.width, C19.height), a22.framebufferRenderbuffer(36160, 33306, 36161, P19);
    } else {
      const de9 = C19.isWebGLMultipleRenderTargets === true ? C19.texture : [C19.texture];
      for (let fe7 = 0; fe7 < de9.length; fe7++) {
        const _e7 = de9[fe7], O20 = s18.convert(_e7.format, _e7.encoding), ae7 = s18.convert(_e7.type), Z11 = I16(_e7.internalFormat, O20, ae7, _e7.encoding), ye7 = wt9(C19);
        Q11 && et13(C19) === false ? a22.renderbufferStorageMultisample(36161, ye7, Z11, C19.width, C19.height) : et13(C19) ? d34.renderbufferStorageMultisampleEXT(36161, ye7, Z11, C19.width, C19.height) : a22.renderbufferStorage(36161, Z11, C19.width, C19.height);
      }
    }
    a22.bindRenderbuffer(36161, null);
  }
  function nt14(P19, C19) {
    if (C19 && C19.isWebGLCubeRenderTarget)
      throw new Error("Depth Texture with cube render targets is not supported");
    if (t19.bindFramebuffer(36160, P19), !(C19.depthTexture && C19.depthTexture.isDepthTexture))
      throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");
    (!n33.get(C19.depthTexture).__webglTexture || C19.depthTexture.image.width !== C19.width || C19.depthTexture.image.height !== C19.height) && (C19.depthTexture.image.width = C19.width, C19.depthTexture.image.height = C19.height, C19.depthTexture.needsUpdate = true), le7(C19.depthTexture, 0);
    const de9 = n33.get(C19.depthTexture).__webglTexture, fe7 = wt9(C19);
    if (C19.depthTexture.format === Ti)
      et13(C19) ? d34.framebufferTexture2DMultisampleEXT(36160, 36096, 3553, de9, 0, fe7) : a22.framebufferTexture2D(36160, 36096, 3553, de9, 0);
    else if (C19.depthTexture.format === Ts)
      et13(C19) ? d34.framebufferTexture2DMultisampleEXT(36160, 33306, 3553, de9, 0, fe7) : a22.framebufferTexture2D(36160, 33306, 3553, de9, 0);
    else
      throw new Error("Unknown depthTexture format");
  }
  function Ie7(P19) {
    const C19 = n33.get(P19), Q11 = P19.isWebGLCubeRenderTarget === true;
    if (P19.depthTexture && !C19.__autoAllocateDepthBuffer) {
      if (Q11)
        throw new Error("target.depthTexture not supported in Cube render targets");
      nt14(C19.__webglFramebuffer, P19);
    } else if (Q11) {
      C19.__webglDepthbuffer = [];
      for (let de9 = 0; de9 < 6; de9++)
        t19.bindFramebuffer(36160, C19.__webglFramebuffer[de9]), C19.__webglDepthbuffer[de9] = a22.createRenderbuffer(), ke7(C19.__webglDepthbuffer[de9], P19, false);
    } else
      t19.bindFramebuffer(36160, C19.__webglFramebuffer), C19.__webglDepthbuffer = a22.createRenderbuffer(), ke7(C19.__webglDepthbuffer, P19, false);
    t19.bindFramebuffer(36160, null);
  }
  function je7(P19, C19, Q11) {
    const de9 = n33.get(P19);
    C19 !== void 0 && pe8(de9.__webglFramebuffer, P19, P19.texture, 36064, 3553), Q11 !== void 0 && Ie7(P19);
  }
  function bt9(P19) {
    const C19 = P19.texture, Q11 = n33.get(P19), de9 = n33.get(C19);
    P19.addEventListener("dispose", B21), P19.isWebGLMultipleRenderTargets !== true && (de9.__webglTexture === void 0 && (de9.__webglTexture = a22.createTexture()), de9.__version = C19.version, r24.memory.textures++);
    const fe7 = P19.isWebGLCubeRenderTarget === true, _e7 = P19.isWebGLMultipleRenderTargets === true, O20 = w29(P19) || o12;
    if (fe7) {
      Q11.__webglFramebuffer = [];
      for (let ae7 = 0; ae7 < 6; ae7++)
        Q11.__webglFramebuffer[ae7] = a22.createFramebuffer();
    } else {
      if (Q11.__webglFramebuffer = a22.createFramebuffer(), _e7)
        if (i27.drawBuffers) {
          const ae7 = P19.texture;
          for (let Z11 = 0, ye7 = ae7.length; Z11 < ye7; Z11++) {
            const Te7 = n33.get(ae7[Z11]);
            Te7.__webglTexture === void 0 && (Te7.__webglTexture = a22.createTexture(), r24.memory.textures++);
          }
        } else
          console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");
      if (o12 && P19.samples > 0 && et13(P19) === false) {
        const ae7 = _e7 ? C19 : [C19];
        Q11.__webglMultisampledFramebuffer = a22.createFramebuffer(), Q11.__webglColorRenderbuffer = [], t19.bindFramebuffer(36160, Q11.__webglMultisampledFramebuffer);
        for (let Z11 = 0; Z11 < ae7.length; Z11++) {
          const ye7 = ae7[Z11];
          Q11.__webglColorRenderbuffer[Z11] = a22.createRenderbuffer(), a22.bindRenderbuffer(36161, Q11.__webglColorRenderbuffer[Z11]);
          const Te7 = s18.convert(ye7.format, ye7.encoding), Le7 = s18.convert(ye7.type), Me7 = I16(ye7.internalFormat, Te7, Le7, ye7.encoding, P19.isXRRenderTarget === true), Ce7 = wt9(P19);
          a22.renderbufferStorageMultisample(36161, Ce7, Me7, P19.width, P19.height), a22.framebufferRenderbuffer(36160, 36064 + Z11, 36161, Q11.__webglColorRenderbuffer[Z11]);
        }
        a22.bindRenderbuffer(36161, null), P19.depthBuffer && (Q11.__webglDepthRenderbuffer = a22.createRenderbuffer(), ke7(Q11.__webglDepthRenderbuffer, P19, true)), t19.bindFramebuffer(36160, null);
      }
    }
    if (fe7) {
      t19.bindTexture(34067, de9.__webglTexture), $24(34067, C19, O20);
      for (let ae7 = 0; ae7 < 6; ae7++)
        pe8(Q11.__webglFramebuffer[ae7], P19, C19, 36064, 34069 + ae7);
      D17(C19, O20) && N19(34067), t19.unbindTexture();
    } else if (_e7) {
      const ae7 = P19.texture;
      for (let Z11 = 0, ye7 = ae7.length; Z11 < ye7; Z11++) {
        const Te7 = ae7[Z11], Le7 = n33.get(Te7);
        t19.bindTexture(3553, Le7.__webglTexture), $24(3553, Te7, O20), pe8(Q11.__webglFramebuffer, P19, Te7, 36064 + Z11, 3553), D17(Te7, O20) && N19(3553);
      }
      t19.unbindTexture();
    } else {
      let ae7 = 3553;
      (P19.isWebGL3DRenderTarget || P19.isWebGLArrayRenderTarget) && (o12 ? ae7 = P19.isWebGL3DRenderTarget ? 32879 : 35866 : console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")), t19.bindTexture(ae7, de9.__webglTexture), $24(ae7, C19, O20), pe8(Q11.__webglFramebuffer, P19, C19, 36064, ae7), D17(C19, O20) && N19(ae7), t19.unbindTexture();
    }
    P19.depthBuffer && Ie7(P19);
  }
  function xt8(P19) {
    const C19 = w29(P19) || o12, Q11 = P19.isWebGLMultipleRenderTargets === true ? P19.texture : [P19.texture];
    for (let de9 = 0, fe7 = Q11.length; de9 < fe7; de9++) {
      const _e7 = Q11[de9];
      if (D17(_e7, C19)) {
        const O20 = P19.isWebGLCubeRenderTarget ? 34067 : 3553, ae7 = n33.get(_e7).__webglTexture;
        t19.bindTexture(O20, ae7), N19(O20), t19.unbindTexture();
      }
    }
  }
  function St8(P19) {
    if (o12 && P19.samples > 0 && et13(P19) === false) {
      const C19 = P19.isWebGLMultipleRenderTargets ? P19.texture : [P19.texture], Q11 = P19.width, de9 = P19.height;
      let fe7 = 16384;
      const _e7 = [], O20 = P19.stencilBuffer ? 33306 : 36096, ae7 = n33.get(P19), Z11 = P19.isWebGLMultipleRenderTargets === true;
      if (Z11)
        for (let ye7 = 0; ye7 < C19.length; ye7++)
          t19.bindFramebuffer(36160, ae7.__webglMultisampledFramebuffer), a22.framebufferRenderbuffer(36160, 36064 + ye7, 36161, null), t19.bindFramebuffer(36160, ae7.__webglFramebuffer), a22.framebufferTexture2D(36009, 36064 + ye7, 3553, null, 0);
      t19.bindFramebuffer(36008, ae7.__webglMultisampledFramebuffer), t19.bindFramebuffer(36009, ae7.__webglFramebuffer);
      for (let ye7 = 0; ye7 < C19.length; ye7++) {
        _e7.push(36064 + ye7), P19.depthBuffer && _e7.push(O20);
        const Te7 = ae7.__ignoreDepthValues !== void 0 ? ae7.__ignoreDepthValues : false;
        if (Te7 === false && (P19.depthBuffer && (fe7 |= 256), P19.stencilBuffer && (fe7 |= 1024)), Z11 && a22.framebufferRenderbuffer(36008, 36064, 36161, ae7.__webglColorRenderbuffer[ye7]), Te7 === true && (a22.invalidateFramebuffer(36008, [O20]), a22.invalidateFramebuffer(36009, [O20])), Z11) {
          const Le7 = n33.get(C19[ye7]).__webglTexture;
          a22.framebufferTexture2D(36009, 36064, 3553, Le7, 0);
        }
        a22.blitFramebuffer(0, 0, Q11, de9, 0, 0, Q11, de9, fe7, 9728), p26 && a22.invalidateFramebuffer(36008, _e7);
      }
      if (t19.bindFramebuffer(36008, null), t19.bindFramebuffer(36009, null), Z11)
        for (let ye7 = 0; ye7 < C19.length; ye7++) {
          t19.bindFramebuffer(36160, ae7.__webglMultisampledFramebuffer), a22.framebufferRenderbuffer(36160, 36064 + ye7, 36161, ae7.__webglColorRenderbuffer[ye7]);
          const Te7 = n33.get(C19[ye7]).__webglTexture;
          t19.bindFramebuffer(36160, ae7.__webglFramebuffer), a22.framebufferTexture2D(36009, 36064 + ye7, 3553, Te7, 0);
        }
      t19.bindFramebuffer(36009, ae7.__webglMultisampledFramebuffer);
    }
  }
  function wt9(P19) {
    return Math.min(h26, P19.samples);
  }
  function et13(P19) {
    const C19 = n33.get(P19);
    return o12 && P19.samples > 0 && e11.has("WEBGL_multisampled_render_to_texture") === true && C19.__useRenderToTexture !== false;
  }
  function ct11(P19) {
    const C19 = r24.render.frame;
    g31.get(P19) !== C19 && (g31.set(P19, C19), P19.update());
  }
  function kt10(P19, C19) {
    const Q11 = P19.encoding, de9 = P19.format, fe7 = P19.type;
    return P19.isCompressedTexture === true || P19.isVideoTexture === true || P19.format === _a || Q11 !== Ci && (Q11 === st6 ? o12 === false ? e11.has("EXT_sRGB") === true && de9 === pn3 ? (P19.format = _a, P19.minFilter = Ht4, P19.generateMipmaps = false) : C19 = lu.sRGBToLinear(C19) : (de9 !== pn3 || fe7 !== Ei3) && console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.") : console.error("THREE.WebGLTextures: Unsupported texture encoding:", Q11)), C19;
  }
  this.allocateTextureUnit = J11, this.resetTextureUnits = te7, this.setTexture2D = le7, this.setTexture2DArray = me9, this.setTexture3D = he8, this.setTextureCube = j18, this.rebindTextures = je7, this.setupRenderTarget = bt9, this.updateRenderTargetMipmap = xt8, this.updateMultisampleRenderTarget = St8, this.setupDepthRenderbuffer = Ie7, this.setupFrameBufferTexture = pe8, this.useMultisampledRTT = et13;
}
function i0(a22, e11, t19) {
  const n33 = t19.isWebGL2;
  function i27(s18, r24 = null) {
    let o12;
    if (s18 === Ei3)
      return 5121;
    if (s18 === Ih)
      return 32819;
    if (s18 === Dh)
      return 32820;
    if (s18 === Lh)
      return 5120;
    if (s18 === Rh)
      return 5122;
    if (s18 === nu)
      return 5123;
    if (s18 === Ph)
      return 5124;
    if (s18 === vi3)
      return 5125;
    if (s18 === ai3)
      return 5126;
    if (s18 === Qs)
      return n33 ? 5131 : (o12 = e11.get("OES_texture_half_float"), o12 !== null ? o12.HALF_FLOAT_OES : null);
    if (s18 === Nh)
      return 6406;
    if (s18 === pn3)
      return 6408;
    if (s18 === Uh)
      return 6409;
    if (s18 === kh)
      return 6410;
    if (s18 === Ti)
      return 6402;
    if (s18 === Ts)
      return 34041;
    if (s18 === _a)
      return o12 = e11.get("EXT_sRGB"), o12 !== null ? o12.SRGB_ALPHA_EXT : null;
    if (s18 === Oh)
      return 6403;
    if (s18 === Fh)
      return 36244;
    if (s18 === zh)
      return 33319;
    if (s18 === Bh)
      return 33320;
    if (s18 === Vh)
      return 36249;
    if (s18 === Eo || s18 === Co || s18 === Lo || s18 === Ro)
      if (r24 === st6)
        if (o12 = e11.get("WEBGL_compressed_texture_s3tc_srgb"), o12 !== null) {
          if (s18 === Eo)
            return o12.COMPRESSED_SRGB_S3TC_DXT1_EXT;
          if (s18 === Co)
            return o12.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;
          if (s18 === Lo)
            return o12.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;
          if (s18 === Ro)
            return o12.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;
        } else
          return null;
      else if (o12 = e11.get("WEBGL_compressed_texture_s3tc"), o12 !== null) {
        if (s18 === Eo)
          return o12.COMPRESSED_RGB_S3TC_DXT1_EXT;
        if (s18 === Co)
          return o12.COMPRESSED_RGBA_S3TC_DXT1_EXT;
        if (s18 === Lo)
          return o12.COMPRESSED_RGBA_S3TC_DXT3_EXT;
        if (s18 === Ro)
          return o12.COMPRESSED_RGBA_S3TC_DXT5_EXT;
      } else
        return null;
    if (s18 === ol || s18 === al || s18 === ll || s18 === cl)
      if (o12 = e11.get("WEBGL_compressed_texture_pvrtc"), o12 !== null) {
        if (s18 === ol)
          return o12.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
        if (s18 === al)
          return o12.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
        if (s18 === ll)
          return o12.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
        if (s18 === cl)
          return o12.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
      } else
        return null;
    if (s18 === Gh)
      return o12 = e11.get("WEBGL_compressed_texture_etc1"), o12 !== null ? o12.COMPRESSED_RGB_ETC1_WEBGL : null;
    if (s18 === ul || s18 === hl)
      if (o12 = e11.get("WEBGL_compressed_texture_etc"), o12 !== null) {
        if (s18 === ul)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ETC2 : o12.COMPRESSED_RGB8_ETC2;
        if (s18 === hl)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC : o12.COMPRESSED_RGBA8_ETC2_EAC;
      } else
        return null;
    if (s18 === dl || s18 === fl || s18 === pl || s18 === ml || s18 === gl || s18 === _l || s18 === xl || s18 === yl || s18 === vl || s18 === bl || s18 === Ml || s18 === Sl || s18 === wl || s18 === Tl)
      if (o12 = e11.get("WEBGL_compressed_texture_astc"), o12 !== null) {
        if (s18 === dl)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR : o12.COMPRESSED_RGBA_ASTC_4x4_KHR;
        if (s18 === fl)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR : o12.COMPRESSED_RGBA_ASTC_5x4_KHR;
        if (s18 === pl)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR : o12.COMPRESSED_RGBA_ASTC_5x5_KHR;
        if (s18 === ml)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR : o12.COMPRESSED_RGBA_ASTC_6x5_KHR;
        if (s18 === gl)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR : o12.COMPRESSED_RGBA_ASTC_6x6_KHR;
        if (s18 === _l)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR : o12.COMPRESSED_RGBA_ASTC_8x5_KHR;
        if (s18 === xl)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR : o12.COMPRESSED_RGBA_ASTC_8x6_KHR;
        if (s18 === yl)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR : o12.COMPRESSED_RGBA_ASTC_8x8_KHR;
        if (s18 === vl)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR : o12.COMPRESSED_RGBA_ASTC_10x5_KHR;
        if (s18 === bl)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR : o12.COMPRESSED_RGBA_ASTC_10x6_KHR;
        if (s18 === Ml)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR : o12.COMPRESSED_RGBA_ASTC_10x8_KHR;
        if (s18 === Sl)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR : o12.COMPRESSED_RGBA_ASTC_10x10_KHR;
        if (s18 === wl)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR : o12.COMPRESSED_RGBA_ASTC_12x10_KHR;
        if (s18 === Tl)
          return r24 === st6 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR : o12.COMPRESSED_RGBA_ASTC_12x12_KHR;
      } else
        return null;
    if (s18 === Po)
      if (o12 = e11.get("EXT_texture_compression_bptc"), o12 !== null) {
        if (s18 === Po)
          return r24 === st6 ? o12.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT : o12.COMPRESSED_RGBA_BPTC_UNORM_EXT;
      } else
        return null;
    if (s18 === Hh || s18 === Al || s18 === El || s18 === Cl)
      if (o12 = e11.get("EXT_texture_compression_rgtc"), o12 !== null) {
        if (s18 === Po)
          return o12.COMPRESSED_RED_RGTC1_EXT;
        if (s18 === Al)
          return o12.COMPRESSED_SIGNED_RED_RGTC1_EXT;
        if (s18 === El)
          return o12.COMPRESSED_RED_GREEN_RGTC2_EXT;
        if (s18 === Cl)
          return o12.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;
      } else
        return null;
    return s18 === _s ? n33 ? 34042 : (o12 = e11.get("WEBGL_depth_texture"), o12 !== null ? o12.UNSIGNED_INT_24_8_WEBGL : null) : a22[s18] !== void 0 ? a22[s18] : null;
  }
  return { convert: i27 };
}
var s0 = class extends Vt3 {
  constructor(e11 = []) {
    super(), this.isArrayCamera = true, this.cameras = e11;
  }
};
var Ct4 = class extends _t3 {
  constructor() {
    super(), this.isGroup = true, this.type = "Group";
  }
};
var r0 = { type: "move" };
var ea = class {
  constructor() {
    this._targetRay = null, this._grip = null, this._hand = null;
  }
  getHandSpace() {
    return this._hand === null && (this._hand = new Ct4(), this._hand.matrixAutoUpdate = false, this._hand.visible = false, this._hand.joints = {}, this._hand.inputState = { pinching: false }), this._hand;
  }
  getTargetRaySpace() {
    return this._targetRay === null && (this._targetRay = new Ct4(), this._targetRay.matrixAutoUpdate = false, this._targetRay.visible = false, this._targetRay.hasLinearVelocity = false, this._targetRay.linearVelocity = new U7(), this._targetRay.hasAngularVelocity = false, this._targetRay.angularVelocity = new U7()), this._targetRay;
  }
  getGripSpace() {
    return this._grip === null && (this._grip = new Ct4(), this._grip.matrixAutoUpdate = false, this._grip.visible = false, this._grip.hasLinearVelocity = false, this._grip.linearVelocity = new U7(), this._grip.hasAngularVelocity = false, this._grip.angularVelocity = new U7()), this._grip;
  }
  dispatchEvent(e11) {
    return this._targetRay !== null && this._targetRay.dispatchEvent(e11), this._grip !== null && this._grip.dispatchEvent(e11), this._hand !== null && this._hand.dispatchEvent(e11), this;
  }
  connect(e11) {
    if (e11 && e11.hand) {
      const t19 = this._hand;
      if (t19)
        for (const n33 of e11.hand.values())
          this._getHandJoint(t19, n33);
    }
    return this.dispatchEvent({ type: "connected", data: e11 }), this;
  }
  disconnect(e11) {
    return this.dispatchEvent({ type: "disconnected", data: e11 }), this._targetRay !== null && (this._targetRay.visible = false), this._grip !== null && (this._grip.visible = false), this._hand !== null && (this._hand.visible = false), this;
  }
  update(e11, t19, n33) {
    let i27 = null, s18 = null, r24 = null;
    const o12 = this._targetRay, c27 = this._grip, l25 = this._hand;
    if (e11 && t19.session.visibilityState !== "visible-blurred") {
      if (l25 && e11.hand) {
        r24 = true;
        for (const y33 of e11.hand.values()) {
          const m33 = t19.getJointPose(y33, n33), f39 = this._getHandJoint(l25, y33);
          m33 !== null && (f39.matrix.fromArray(m33.transform.matrix), f39.matrix.decompose(f39.position, f39.rotation, f39.scale), f39.jointRadius = m33.radius), f39.visible = m33 !== null;
        }
        const u35 = l25.joints["index-finger-tip"], h26 = l25.joints["thumb-tip"], d34 = u35.position.distanceTo(h26.position), p26 = 0.02, g31 = 5e-3;
        l25.inputState.pinching && d34 > p26 + g31 ? (l25.inputState.pinching = false, this.dispatchEvent({
          type: "pinchend",
          handedness: e11.handedness,
          target: this
        })) : !l25.inputState.pinching && d34 <= p26 - g31 && (l25.inputState.pinching = true, this.dispatchEvent({
          type: "pinchstart",
          handedness: e11.handedness,
          target: this
        }));
      } else
        c27 !== null && e11.gripSpace && (s18 = t19.getPose(e11.gripSpace, n33), s18 !== null && (c27.matrix.fromArray(s18.transform.matrix), c27.matrix.decompose(c27.position, c27.rotation, c27.scale), s18.linearVelocity ? (c27.hasLinearVelocity = true, c27.linearVelocity.copy(s18.linearVelocity)) : c27.hasLinearVelocity = false, s18.angularVelocity ? (c27.hasAngularVelocity = true, c27.angularVelocity.copy(s18.angularVelocity)) : c27.hasAngularVelocity = false));
      o12 !== null && (i27 = t19.getPose(e11.targetRaySpace, n33), i27 === null && s18 !== null && (i27 = s18), i27 !== null && (o12.matrix.fromArray(i27.transform.matrix), o12.matrix.decompose(o12.position, o12.rotation, o12.scale), i27.linearVelocity ? (o12.hasLinearVelocity = true, o12.linearVelocity.copy(i27.linearVelocity)) : o12.hasLinearVelocity = false, i27.angularVelocity ? (o12.hasAngularVelocity = true, o12.angularVelocity.copy(i27.angularVelocity)) : o12.hasAngularVelocity = false, this.dispatchEvent(r0)));
    }
    return o12 !== null && (o12.visible = i27 !== null), c27 !== null && (c27.visible = s18 !== null), l25 !== null && (l25.visible = r24 !== null), this;
  }
  // private method
  _getHandJoint(e11, t19) {
    if (e11.joints[t19.jointName] === void 0) {
      const n33 = new Ct4();
      n33.matrixAutoUpdate = false, n33.visible = false, e11.joints[t19.jointName] = n33, e11.add(n33);
    }
    return e11.joints[t19.jointName];
  }
};
var o0 = class extends jt4 {
  constructor(e11, t19, n33, i27, s18, r24, o12, c27, l25, u35) {
    if (u35 = u35 !== void 0 ? u35 : Ti, u35 !== Ti && u35 !== Ts)
      throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");
    n33 === void 0 && u35 === Ti && (n33 = vi3), n33 === void 0 && u35 === Ts && (n33 = _s), super(null, i27, s18, r24, o12, c27, u35, n33, l25), this.isDepthTexture = true, this.image = { width: e11, height: t19 }, this.magFilter = o12 !== void 0 ? o12 : Bt3, this.minFilter = c27 !== void 0 ? c27 : Bt3, this.flipY = false, this.generateMipmaps = false;
  }
};
var a0 = class extends Ni3 {
  constructor(e11, t19) {
    super();
    const n33 = this;
    let i27 = null, s18 = 1, r24 = null, o12 = "local-floor", c27 = 1, l25 = null, u35 = null, h26 = null, d34 = null, p26 = null, g31 = null;
    const y33 = t19.getContextAttributes();
    let m33 = null, f39 = null;
    const E24 = [], b33 = [], w29 = /* @__PURE__ */ new Set(), S21 = /* @__PURE__ */ new Map(), D17 = new Vt3();
    D17.layers.enable(1), D17.viewport = new gt5();
    const N19 = new Vt3();
    N19.layers.enable(2), N19.viewport = new gt5();
    const I16 = [D17, N19], v30 = new s0();
    v30.layers.enable(1), v30.layers.enable(2);
    let L11 = null, G15 = null;
    this.cameraAutoUpdate = true, this.enabled = false, this.isPresenting = false, this.getController = function(j18) {
      let X12 = E24[j18];
      return X12 === void 0 && (X12 = new ea(), E24[j18] = X12), X12.getTargetRaySpace();
    }, this.getControllerGrip = function(j18) {
      let X12 = E24[j18];
      return X12 === void 0 && (X12 = new ea(), E24[j18] = X12), X12.getGripSpace();
    }, this.getHand = function(j18) {
      let X12 = E24[j18];
      return X12 === void 0 && (X12 = new ea(), E24[j18] = X12), X12.getHandSpace();
    };
    function B21(j18) {
      const X12 = b33.indexOf(j18.inputSource);
      if (X12 === -1)
        return;
      const ee7 = E24[X12];
      ee7 !== void 0 && ee7.dispatchEvent({ type: j18.type, data: j18.inputSource });
    }
    function k27() {
      i27.removeEventListener("select", B21), i27.removeEventListener("selectstart", B21), i27.removeEventListener("selectend", B21), i27.removeEventListener("squeeze", B21), i27.removeEventListener("squeezestart", B21), i27.removeEventListener("squeezeend", B21), i27.removeEventListener("end", k27), i27.removeEventListener("inputsourceschange", V14);
      for (let j18 = 0; j18 < E24.length; j18++) {
        const X12 = b33[j18];
        X12 !== null && (b33[j18] = null, E24[j18].disconnect(X12));
      }
      L11 = null, G15 = null, e11.setRenderTarget(m33), p26 = null, d34 = null, h26 = null, i27 = null, f39 = null, he8.stop(), n33.isPresenting = false, n33.dispatchEvent({ type: "sessionend" });
    }
    this.setFramebufferScaleFactor = function(j18) {
      s18 = j18, n33.isPresenting === true && console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.");
    }, this.setReferenceSpaceType = function(j18) {
      o12 = j18, n33.isPresenting === true && console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.");
    }, this.getReferenceSpace = function() {
      return l25 || r24;
    }, this.setReferenceSpace = function(j18) {
      l25 = j18;
    }, this.getBaseLayer = function() {
      return d34 !== null ? d34 : p26;
    }, this.getBinding = function() {
      return h26;
    }, this.getFrame = function() {
      return g31;
    }, this.getSession = function() {
      return i27;
    }, this.setSession = async function(j18) {
      if (i27 = j18, i27 !== null) {
        if (m33 = e11.getRenderTarget(), i27.addEventListener("select", B21), i27.addEventListener("selectstart", B21), i27.addEventListener("selectend", B21), i27.addEventListener("squeeze", B21), i27.addEventListener("squeezestart", B21), i27.addEventListener("squeezeend", B21), i27.addEventListener("end", k27), i27.addEventListener("inputsourceschange", V14), y33.xrCompatible !== true && await t19.makeXRCompatible(), i27.renderState.layers === void 0 || e11.capabilities.isWebGL2 === false) {
          const X12 = {
            antialias: i27.renderState.layers === void 0 ? y33.antialias : true,
            alpha: y33.alpha,
            depth: y33.depth,
            stencil: y33.stencil,
            framebufferScaleFactor: s18
          };
          p26 = new XRWebGLLayer(i27, t19, X12), i27.updateRenderState({ baseLayer: p26 }), f39 = new Li(
            p26.framebufferWidth,
            p26.framebufferHeight,
            {
              format: pn3,
              type: Ei3,
              encoding: e11.outputEncoding,
              stencilBuffer: y33.stencil
            }
          );
        } else {
          let X12 = null, ee7 = null, $24 = null;
          y33.depth && ($24 = y33.stencil ? 35056 : 33190, X12 = y33.stencil ? Ts : Ti, ee7 = y33.stencil ? _s : vi3);
          const z19 = {
            colorFormat: 32856,
            depthFormat: $24,
            scaleFactor: s18
          };
          h26 = new XRWebGLBinding(i27, t19), d34 = h26.createProjectionLayer(z19), i27.updateRenderState({ layers: [d34] }), f39 = new Li(
            d34.textureWidth,
            d34.textureHeight,
            {
              format: pn3,
              type: Ei3,
              depthTexture: new o0(d34.textureWidth, d34.textureHeight, ee7, void 0, void 0, void 0, void 0, void 0, void 0, X12),
              stencilBuffer: y33.stencil,
              encoding: e11.outputEncoding,
              samples: y33.antialias ? 4 : 0
            }
          );
          const be7 = e11.properties.get(f39);
          be7.__ignoreDepthValues = d34.ignoreDepthValues;
        }
        f39.isXRRenderTarget = true, this.setFoveation(c27), l25 = null, r24 = await i27.requestReferenceSpace(o12), he8.setContext(i27), he8.start(), n33.isPresenting = true, n33.dispatchEvent({ type: "sessionstart" });
      }
    };
    function V14(j18) {
      for (let X12 = 0; X12 < j18.removed.length; X12++) {
        const ee7 = j18.removed[X12], $24 = b33.indexOf(ee7);
        $24 >= 0 && (b33[$24] = null, E24[$24].disconnect(ee7));
      }
      for (let X12 = 0; X12 < j18.added.length; X12++) {
        const ee7 = j18.added[X12];
        let $24 = b33.indexOf(ee7);
        if ($24 === -1) {
          for (let be7 = 0; be7 < E24.length; be7++)
            if (be7 >= b33.length) {
              b33.push(ee7), $24 = be7;
              break;
            } else if (b33[be7] === null) {
              b33[be7] = ee7, $24 = be7;
              break;
            }
          if ($24 === -1)
            break;
        }
        const z19 = E24[$24];
        z19 && z19.connect(ee7);
      }
    }
    const H15 = new U7(), W8 = new U7();
    function te7(j18, X12, ee7) {
      H15.setFromMatrixPosition(X12.matrixWorld), W8.setFromMatrixPosition(ee7.matrixWorld);
      const $24 = H15.distanceTo(W8), z19 = X12.projectionMatrix.elements, be7 = ee7.projectionMatrix.elements, Ee5 = z19[14] / (z19[10] - 1), pe8 = z19[14] / (z19[10] + 1), ke7 = (z19[9] + 1) / z19[5], nt14 = (z19[9] - 1) / z19[5], Ie7 = (z19[8] - 1) / z19[0], je7 = (be7[8] + 1) / be7[0], bt9 = Ee5 * Ie7, xt8 = Ee5 * je7, St8 = $24 / (-Ie7 + je7), wt9 = St8 * -Ie7;
      X12.matrixWorld.decompose(j18.position, j18.quaternion, j18.scale), j18.translateX(wt9), j18.translateZ(St8), j18.matrixWorld.compose(j18.position, j18.quaternion, j18.scale), j18.matrixWorldInverse.copy(j18.matrixWorld).invert();
      const et13 = Ee5 + St8, ct11 = pe8 + St8, kt10 = bt9 - wt9, P19 = xt8 + ($24 - wt9), C19 = ke7 * pe8 / ct11 * et13, Q11 = nt14 * pe8 / ct11 * et13;
      j18.projectionMatrix.makePerspective(kt10, P19, C19, Q11, et13, ct11), j18.projectionMatrixInverse.copy(j18.projectionMatrix).invert();
    }
    function J11(j18, X12) {
      X12 === null ? j18.matrixWorld.copy(j18.matrix) : j18.matrixWorld.multiplyMatrices(X12.matrixWorld, j18.matrix), j18.matrixWorldInverse.copy(j18.matrixWorld).invert();
    }
    this.updateCamera = function(j18) {
      if (i27 === null)
        return;
      v30.near = N19.near = D17.near = j18.near, v30.far = N19.far = D17.far = j18.far, (L11 !== v30.near || G15 !== v30.far) && (i27.updateRenderState({
        depthNear: v30.near,
        depthFar: v30.far
      }), L11 = v30.near, G15 = v30.far);
      const X12 = j18.parent, ee7 = v30.cameras;
      J11(v30, X12);
      for (let $24 = 0; $24 < ee7.length; $24++)
        J11(ee7[$24], X12);
      ee7.length === 2 ? te7(v30, D17, N19) : v30.projectionMatrix.copy(D17.projectionMatrix), ie8(j18, v30, X12);
    };
    function ie8(j18, X12, ee7) {
      ee7 === null ? j18.matrix.copy(X12.matrixWorld) : (j18.matrix.copy(ee7.matrixWorld), j18.matrix.invert(), j18.matrix.multiply(X12.matrixWorld)), j18.matrix.decompose(j18.position, j18.quaternion, j18.scale), j18.updateMatrixWorld(true);
      const $24 = j18.children;
      for (let z19 = 0, be7 = $24.length; z19 < be7; z19++)
        $24[z19].updateMatrixWorld(true);
      j18.projectionMatrix.copy(X12.projectionMatrix), j18.projectionMatrixInverse.copy(X12.projectionMatrixInverse), j18.isPerspectiveCamera && (j18.fov = Es * 2 * Math.atan(1 / j18.projectionMatrix.elements[5]), j18.zoom = 1);
    }
    this.getCamera = function() {
      return v30;
    }, this.getFoveation = function() {
      if (!(d34 === null && p26 === null))
        return c27;
    }, this.setFoveation = function(j18) {
      c27 = j18, d34 !== null && (d34.fixedFoveation = j18), p26 !== null && p26.fixedFoveation !== void 0 && (p26.fixedFoveation = j18);
    }, this.getPlanes = function() {
      return w29;
    };
    let le7 = null;
    function me9(j18, X12) {
      if (u35 = X12.getViewerPose(l25 || r24), g31 = X12, u35 !== null) {
        const ee7 = u35.views;
        p26 !== null && (e11.setRenderTargetFramebuffer(f39, p26.framebuffer), e11.setRenderTarget(f39));
        let $24 = false;
        ee7.length !== v30.cameras.length && (v30.cameras.length = 0, $24 = true);
        for (let z19 = 0; z19 < ee7.length; z19++) {
          const be7 = ee7[z19];
          let Ee5 = null;
          if (p26 !== null)
            Ee5 = p26.getViewport(be7);
          else {
            const ke7 = h26.getViewSubImage(d34, be7);
            Ee5 = ke7.viewport, z19 === 0 && (e11.setRenderTargetTextures(
              f39,
              ke7.colorTexture,
              d34.ignoreDepthValues ? void 0 : ke7.depthStencilTexture
            ), e11.setRenderTarget(f39));
          }
          let pe8 = I16[z19];
          pe8 === void 0 && (pe8 = new Vt3(), pe8.layers.enable(z19), pe8.viewport = new gt5(), I16[z19] = pe8), pe8.matrix.fromArray(be7.transform.matrix), pe8.matrix.decompose(pe8.position, pe8.quaternion, pe8.scale), pe8.projectionMatrix.fromArray(be7.projectionMatrix), pe8.projectionMatrixInverse.copy(pe8.projectionMatrix).invert(), pe8.viewport.set(Ee5.x, Ee5.y, Ee5.width, Ee5.height), z19 === 0 && (v30.matrix.copy(pe8.matrix), v30.matrix.decompose(v30.position, v30.quaternion, v30.scale)), $24 === true && v30.cameras.push(pe8);
        }
      }
      for (let ee7 = 0; ee7 < E24.length; ee7++) {
        const $24 = b33[ee7], z19 = E24[ee7];
        $24 !== null && z19 !== void 0 && z19.update($24, X12, l25 || r24);
      }
      if (le7 && le7(j18, X12), X12.detectedPlanes) {
        n33.dispatchEvent({ type: "planesdetected", data: X12.detectedPlanes });
        let ee7 = null;
        for (const $24 of w29)
          X12.detectedPlanes.has($24) || (ee7 === null && (ee7 = []), ee7.push($24));
        if (ee7 !== null)
          for (const $24 of ee7)
            w29.delete($24), S21.delete($24), n33.dispatchEvent({ type: "planeremoved", data: $24 });
        for (const $24 of X12.detectedPlanes)
          if (!w29.has($24))
            w29.add($24), S21.set($24, X12.lastChangedTime), n33.dispatchEvent({ type: "planeadded", data: $24 });
          else {
            const z19 = S21.get($24);
            $24.lastChangedTime > z19 && (S21.set($24, $24.lastChangedTime), n33.dispatchEvent({ type: "planechanged", data: $24 }));
          }
      }
      g31 = null;
    }
    const he8 = new xu();
    he8.setAnimationLoop(me9), this.setAnimationLoop = function(j18) {
      le7 = j18;
    }, this.dispose = function() {
    };
  }
};
function l0(a22, e11) {
  function t19(m33, f39) {
    m33.matrixAutoUpdate === true && m33.updateMatrix(), f39.value.copy(m33.matrix);
  }
  function n33(m33, f39) {
    f39.color.getRGB(m33.fogColor.value, mu(a22)), f39.isFog ? (m33.fogNear.value = f39.near, m33.fogFar.value = f39.far) : f39.isFogExp2 && (m33.fogDensity.value = f39.density);
  }
  function i27(m33, f39, E24, b33, w29) {
    f39.isMeshBasicMaterial || f39.isMeshLambertMaterial ? s18(m33, f39) : f39.isMeshToonMaterial ? (s18(m33, f39), h26(m33, f39)) : f39.isMeshPhongMaterial ? (s18(m33, f39), u35(m33, f39)) : f39.isMeshStandardMaterial ? (s18(m33, f39), d34(m33, f39), f39.isMeshPhysicalMaterial && p26(m33, f39, w29)) : f39.isMeshMatcapMaterial ? (s18(m33, f39), g31(m33, f39)) : f39.isMeshDepthMaterial ? s18(m33, f39) : f39.isMeshDistanceMaterial ? (s18(m33, f39), y33(m33, f39)) : f39.isMeshNormalMaterial ? s18(m33, f39) : f39.isLineBasicMaterial ? (r24(m33, f39), f39.isLineDashedMaterial && o12(m33, f39)) : f39.isPointsMaterial ? c27(m33, f39, E24, b33) : f39.isSpriteMaterial ? l25(m33, f39) : f39.isShadowMaterial ? (m33.color.value.copy(f39.color), m33.opacity.value = f39.opacity) : f39.isShaderMaterial && (f39.uniformsNeedUpdate = false);
  }
  function s18(m33, f39) {
    m33.opacity.value = f39.opacity, f39.color && m33.diffuse.value.copy(f39.color), f39.emissive && m33.emissive.value.copy(f39.emissive).multiplyScalar(f39.emissiveIntensity), f39.map && (m33.map.value = f39.map, t19(f39.map, m33.mapTransform)), f39.alphaMap && (m33.alphaMap.value = f39.alphaMap, t19(f39.alphaMap, m33.alphaMapTransform)), f39.bumpMap && (m33.bumpMap.value = f39.bumpMap, t19(f39.bumpMap, m33.bumpMapTransform), m33.bumpScale.value = f39.bumpScale, f39.side === sn3 && (m33.bumpScale.value *= -1)), f39.normalMap && (m33.normalMap.value = f39.normalMap, t19(f39.normalMap, m33.normalMapTransform), m33.normalScale.value.copy(f39.normalScale), f39.side === sn3 && m33.normalScale.value.negate()), f39.displacementMap && (m33.displacementMap.value = f39.displacementMap, t19(f39.displacementMap, m33.displacementMapTransform), m33.displacementScale.value = f39.displacementScale, m33.displacementBias.value = f39.displacementBias), f39.emissiveMap && (m33.emissiveMap.value = f39.emissiveMap, t19(f39.emissiveMap, m33.emissiveMapTransform)), f39.specularMap && (m33.specularMap.value = f39.specularMap, t19(f39.specularMap, m33.specularMapTransform)), f39.alphaTest > 0 && (m33.alphaTest.value = f39.alphaTest);
    const E24 = e11.get(f39).envMap;
    if (E24 && (m33.envMap.value = E24, m33.flipEnvMap.value = E24.isCubeTexture && E24.isRenderTargetTexture === false ? -1 : 1, m33.reflectivity.value = f39.reflectivity, m33.ior.value = f39.ior, m33.refractionRatio.value = f39.refractionRatio), f39.lightMap) {
      m33.lightMap.value = f39.lightMap;
      const b33 = a22.useLegacyLights === true ? Math.PI : 1;
      m33.lightMapIntensity.value = f39.lightMapIntensity * b33, t19(f39.lightMap, m33.lightMapTransform);
    }
    f39.aoMap && (m33.aoMap.value = f39.aoMap, m33.aoMapIntensity.value = f39.aoMapIntensity, t19(f39.aoMap, m33.aoMapTransform));
  }
  function r24(m33, f39) {
    m33.diffuse.value.copy(f39.color), m33.opacity.value = f39.opacity, f39.map && (m33.map.value = f39.map, t19(f39.map, m33.mapTransform));
  }
  function o12(m33, f39) {
    m33.dashSize.value = f39.dashSize, m33.totalSize.value = f39.dashSize + f39.gapSize, m33.scale.value = f39.scale;
  }
  function c27(m33, f39, E24, b33) {
    m33.diffuse.value.copy(f39.color), m33.opacity.value = f39.opacity, m33.size.value = f39.size * E24, m33.scale.value = b33 * 0.5, f39.map && (m33.map.value = f39.map, t19(f39.map, m33.uvTransform)), f39.alphaMap && (m33.alphaMap.value = f39.alphaMap), f39.alphaTest > 0 && (m33.alphaTest.value = f39.alphaTest);
  }
  function l25(m33, f39) {
    m33.diffuse.value.copy(f39.color), m33.opacity.value = f39.opacity, m33.rotation.value = f39.rotation, f39.map && (m33.map.value = f39.map, t19(f39.map, m33.mapTransform)), f39.alphaMap && (m33.alphaMap.value = f39.alphaMap), f39.alphaTest > 0 && (m33.alphaTest.value = f39.alphaTest);
  }
  function u35(m33, f39) {
    m33.specular.value.copy(f39.specular), m33.shininess.value = Math.max(f39.shininess, 1e-4);
  }
  function h26(m33, f39) {
    f39.gradientMap && (m33.gradientMap.value = f39.gradientMap);
  }
  function d34(m33, f39) {
    m33.metalness.value = f39.metalness, f39.metalnessMap && (m33.metalnessMap.value = f39.metalnessMap, t19(f39.metalnessMap, m33.metalnessMapTransform)), m33.roughness.value = f39.roughness, f39.roughnessMap && (m33.roughnessMap.value = f39.roughnessMap, t19(f39.roughnessMap, m33.roughnessMapTransform)), e11.get(f39).envMap && (m33.envMapIntensity.value = f39.envMapIntensity);
  }
  function p26(m33, f39, E24) {
    m33.ior.value = f39.ior, f39.sheen > 0 && (m33.sheenColor.value.copy(f39.sheenColor).multiplyScalar(f39.sheen), m33.sheenRoughness.value = f39.sheenRoughness, f39.sheenColorMap && (m33.sheenColorMap.value = f39.sheenColorMap, t19(f39.sheenColorMap, m33.sheenColorMapTransform)), f39.sheenRoughnessMap && (m33.sheenRoughnessMap.value = f39.sheenRoughnessMap, t19(f39.sheenRoughnessMap, m33.sheenRoughnessMapTransform))), f39.clearcoat > 0 && (m33.clearcoat.value = f39.clearcoat, m33.clearcoatRoughness.value = f39.clearcoatRoughness, f39.clearcoatMap && (m33.clearcoatMap.value = f39.clearcoatMap, t19(f39.clearcoatMap, m33.clearcoatMapTransform)), f39.clearcoatRoughnessMap && (m33.clearcoatRoughnessMap.value = f39.clearcoatRoughnessMap, t19(f39.clearcoatRoughnessMap, m33.clearcoatRoughnessMapTransform)), f39.clearcoatNormalMap && (m33.clearcoatNormalMap.value = f39.clearcoatNormalMap, t19(f39.clearcoatNormalMap, m33.clearcoatNormalMapTransform), m33.clearcoatNormalScale.value.copy(f39.clearcoatNormalScale), f39.side === sn3 && m33.clearcoatNormalScale.value.negate())), f39.iridescence > 0 && (m33.iridescence.value = f39.iridescence, m33.iridescenceIOR.value = f39.iridescenceIOR, m33.iridescenceThicknessMinimum.value = f39.iridescenceThicknessRange[0], m33.iridescenceThicknessMaximum.value = f39.iridescenceThicknessRange[1], f39.iridescenceMap && (m33.iridescenceMap.value = f39.iridescenceMap, t19(f39.iridescenceMap, m33.iridescenceMapTransform)), f39.iridescenceThicknessMap && (m33.iridescenceThicknessMap.value = f39.iridescenceThicknessMap, t19(f39.iridescenceThicknessMap, m33.iridescenceThicknessMapTransform))), f39.transmission > 0 && (m33.transmission.value = f39.transmission, m33.transmissionSamplerMap.value = E24.texture, m33.transmissionSamplerSize.value.set(E24.width, E24.height), f39.transmissionMap && (m33.transmissionMap.value = f39.transmissionMap, t19(f39.transmissionMap, m33.transmissionMapTransform)), m33.thickness.value = f39.thickness, f39.thicknessMap && (m33.thicknessMap.value = f39.thicknessMap, t19(f39.thicknessMap, m33.thicknessMapTransform)), m33.attenuationDistance.value = f39.attenuationDistance, m33.attenuationColor.value.copy(f39.attenuationColor)), m33.specularIntensity.value = f39.specularIntensity, m33.specularColor.value.copy(f39.specularColor), f39.specularColorMap && (m33.specularColorMap.value = f39.specularColorMap, t19(f39.specularColorMap, m33.specularColorMapTransform)), f39.specularIntensityMap && (m33.specularIntensityMap.value = f39.specularIntensityMap, t19(f39.specularIntensityMap, m33.specularIntensityMapTransform));
  }
  function g31(m33, f39) {
    f39.matcap && (m33.matcap.value = f39.matcap);
  }
  function y33(m33, f39) {
    const E24 = e11.get(f39).light;
    m33.referencePosition.value.setFromMatrixPosition(E24.matrixWorld), m33.nearDistance.value = E24.shadow.camera.near, m33.farDistance.value = E24.shadow.camera.far;
  }
  return {
    refreshFogUniforms: n33,
    refreshMaterialUniforms: i27
  };
}
function c0(a22, e11, t19, n33) {
  let i27 = {}, s18 = {}, r24 = [];
  const o12 = t19.isWebGL2 ? a22.getParameter(35375) : 0;
  function c27(E24, b33) {
    const w29 = b33.program;
    n33.uniformBlockBinding(E24, w29);
  }
  function l25(E24, b33) {
    let w29 = i27[E24.id];
    w29 === void 0 && (g31(E24), w29 = u35(E24), i27[E24.id] = w29, E24.addEventListener("dispose", m33));
    const S21 = b33.program;
    n33.updateUBOMapping(E24, S21);
    const D17 = e11.render.frame;
    s18[E24.id] !== D17 && (d34(E24), s18[E24.id] = D17);
  }
  function u35(E24) {
    const b33 = h26();
    E24.__bindingPointIndex = b33;
    const w29 = a22.createBuffer(), S21 = E24.__size, D17 = E24.usage;
    return a22.bindBuffer(35345, w29), a22.bufferData(35345, S21, D17), a22.bindBuffer(35345, null), a22.bindBufferBase(35345, b33, w29), w29;
  }
  function h26() {
    for (let E24 = 0; E24 < o12; E24++)
      if (r24.indexOf(E24) === -1)
        return r24.push(E24), E24;
    return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."), 0;
  }
  function d34(E24) {
    const b33 = i27[E24.id], w29 = E24.uniforms, S21 = E24.__cache;
    a22.bindBuffer(35345, b33);
    for (let D17 = 0, N19 = w29.length; D17 < N19; D17++) {
      const I16 = w29[D17];
      if (p26(I16, D17, S21) === true) {
        const v30 = I16.__offset, L11 = Array.isArray(I16.value) ? I16.value : [I16.value];
        let G15 = 0;
        for (let B21 = 0; B21 < L11.length; B21++) {
          const k27 = L11[B21], V14 = y33(k27);
          typeof k27 == "number" ? (I16.__data[0] = k27, a22.bufferSubData(35345, v30 + G15, I16.__data)) : k27.isMatrix3 ? (I16.__data[0] = k27.elements[0], I16.__data[1] = k27.elements[1], I16.__data[2] = k27.elements[2], I16.__data[3] = k27.elements[0], I16.__data[4] = k27.elements[3], I16.__data[5] = k27.elements[4], I16.__data[6] = k27.elements[5], I16.__data[7] = k27.elements[0], I16.__data[8] = k27.elements[6], I16.__data[9] = k27.elements[7], I16.__data[10] = k27.elements[8], I16.__data[11] = k27.elements[0]) : (k27.toArray(I16.__data, G15), G15 += V14.storage / Float32Array.BYTES_PER_ELEMENT);
        }
        a22.bufferSubData(35345, v30, I16.__data);
      }
    }
    a22.bindBuffer(35345, null);
  }
  function p26(E24, b33, w29) {
    const S21 = E24.value;
    if (w29[b33] === void 0) {
      if (typeof S21 == "number")
        w29[b33] = S21;
      else {
        const D17 = Array.isArray(S21) ? S21 : [S21], N19 = [];
        for (let I16 = 0; I16 < D17.length; I16++)
          N19.push(D17[I16].clone());
        w29[b33] = N19;
      }
      return true;
    } else if (typeof S21 == "number") {
      if (w29[b33] !== S21)
        return w29[b33] = S21, true;
    } else {
      const D17 = Array.isArray(w29[b33]) ? w29[b33] : [w29[b33]], N19 = Array.isArray(S21) ? S21 : [S21];
      for (let I16 = 0; I16 < D17.length; I16++) {
        const v30 = D17[I16];
        if (v30.equals(N19[I16]) === false)
          return v30.copy(N19[I16]), true;
      }
    }
    return false;
  }
  function g31(E24) {
    const b33 = E24.uniforms;
    let w29 = 0;
    const S21 = 16;
    let D17 = 0;
    for (let N19 = 0, I16 = b33.length; N19 < I16; N19++) {
      const v30 = b33[N19], L11 = {
        boundary: 0,
        // bytes
        storage: 0
        // bytes
      }, G15 = Array.isArray(v30.value) ? v30.value : [v30.value];
      for (let B21 = 0, k27 = G15.length; B21 < k27; B21++) {
        const V14 = G15[B21], H15 = y33(V14);
        L11.boundary += H15.boundary, L11.storage += H15.storage;
      }
      if (v30.__data = new Float32Array(L11.storage / Float32Array.BYTES_PER_ELEMENT), v30.__offset = w29, N19 > 0) {
        D17 = w29 % S21;
        const B21 = S21 - D17;
        D17 !== 0 && B21 - L11.boundary < 0 && (w29 += S21 - D17, v30.__offset = w29);
      }
      w29 += L11.storage;
    }
    return D17 = w29 % S21, D17 > 0 && (w29 += S21 - D17), E24.__size = w29, E24.__cache = {}, this;
  }
  function y33(E24) {
    const b33 = {
      boundary: 0,
      // bytes
      storage: 0
      // bytes
    };
    return typeof E24 == "number" ? (b33.boundary = 4, b33.storage = 4) : E24.isVector2 ? (b33.boundary = 8, b33.storage = 8) : E24.isVector3 || E24.isColor ? (b33.boundary = 16, b33.storage = 12) : E24.isVector4 ? (b33.boundary = 16, b33.storage = 16) : E24.isMatrix3 ? (b33.boundary = 48, b33.storage = 48) : E24.isMatrix4 ? (b33.boundary = 64, b33.storage = 64) : E24.isTexture ? console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.") : console.warn("THREE.WebGLRenderer: Unsupported uniform value type.", E24), b33;
  }
  function m33(E24) {
    const b33 = E24.target;
    b33.removeEventListener("dispose", m33);
    const w29 = r24.indexOf(b33.__bindingPointIndex);
    r24.splice(w29, 1), a22.deleteBuffer(i27[b33.id]), delete i27[b33.id], delete s18[b33.id];
  }
  function f39() {
    for (const E24 in i27)
      a22.deleteBuffer(i27[E24]);
    r24 = [], i27 = {}, s18 = {};
  }
  return {
    bind: c27,
    update: l25,
    dispose: f39
  };
}
function u0() {
  const a22 = nr3("canvas");
  return a22.style.display = "block", a22;
}
var Ia = class {
  constructor(e11 = {}) {
    const {
      canvas: t19 = u0(),
      context: n33 = null,
      depth: i27 = true,
      stencil: s18 = true,
      alpha: r24 = false,
      antialias: o12 = false,
      premultipliedAlpha: c27 = true,
      preserveDrawingBuffer: l25 = false,
      powerPreference: u35 = "default",
      failIfMajorPerformanceCaveat: h26 = false
    } = e11;
    this.isWebGLRenderer = true;
    let d34;
    n33 !== null ? d34 = n33.getContextAttributes().alpha : d34 = r24;
    let p26 = null, g31 = null;
    const y33 = [], m33 = [];
    this.domElement = t19, this.debug = {
      /**
       * Enables error checking and reporting when shader programs are being compiled
       * @type {boolean}
       */
      checkShaderErrors: true,
      /**
       * Callback for custom error reporting.
       * @type {?Function}
       */
      onShaderError: null
    }, this.autoClear = true, this.autoClearColor = true, this.autoClearDepth = true, this.autoClearStencil = true, this.sortObjects = true, this.clippingPlanes = [], this.localClippingEnabled = false, this.outputEncoding = Ci, this.useLegacyLights = true, this.toneMapping = Wn3, this.toneMappingExposure = 1;
    const f39 = this;
    let E24 = false, b33 = 0, w29 = 0, S21 = null, D17 = -1, N19 = null;
    const I16 = new gt5(), v30 = new gt5();
    let L11 = null, G15 = t19.width, B21 = t19.height, k27 = 1, V14 = null, H15 = null;
    const W8 = new gt5(0, 0, G15, B21), te7 = new gt5(0, 0, G15, B21);
    let J11 = false;
    const ie8 = new Ra();
    let le7 = false, me9 = false, he8 = null;
    const j18 = new Ve4(), X12 = new U7(), ee7 = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };
    function $24() {
      return S21 === null ? k27 : 1;
    }
    let z19 = n33;
    function be7(R20, K13) {
      for (let ne8 = 0; ne8 < R20.length; ne8++) {
        const q13 = R20[ne8], oe7 = t19.getContext(q13, K13);
        if (oe7 !== null)
          return oe7;
      }
      return null;
    }
    try {
      const R20 = {
        alpha: true,
        depth: i27,
        stencil: s18,
        antialias: o12,
        premultipliedAlpha: c27,
        preserveDrawingBuffer: l25,
        powerPreference: u35,
        failIfMajorPerformanceCaveat: h26
      };
      if ("setAttribute" in t19 && t19.setAttribute("data-engine", `three.js r${Ea}`), t19.addEventListener("webglcontextlost", Ce7, false), t19.addEventListener("webglcontextrestored", Ge7, false), t19.addEventListener("webglcontextcreationerror", Xe7, false), z19 === null) {
        const K13 = ["webgl2", "webgl", "experimental-webgl"];
        if (f39.isWebGL1Renderer === true && K13.shift(), z19 = be7(K13, R20), z19 === null)
          throw be7(K13) ? new Error("Error creating WebGL context with your selected attributes.") : new Error("Error creating WebGL context.");
      }
      z19.getShaderPrecisionFormat === void 0 && (z19.getShaderPrecisionFormat = function() {
        return { rangeMin: 1, rangeMax: 1, precision: 1 };
      });
    } catch (R20) {
      throw console.error("THREE.WebGLRenderer: " + R20.message), R20;
    }
    let Ee5, pe8, ke7, nt14, Ie7, je7, bt9, xt8, St8, wt9, et13, ct11, kt10, P19, C19, Q11, de9, fe7, _e7, O20, ae7, Z11, ye7, Te7;
    function Le7() {
      Ee5 = new bm(z19), pe8 = new mm(z19, Ee5, e11), Ee5.init(pe8), Z11 = new i0(z19, Ee5, pe8), ke7 = new t0(z19, Ee5, pe8), nt14 = new wm(), Ie7 = new Vg(), je7 = new n0(z19, Ee5, ke7, Ie7, pe8, Z11, nt14), bt9 = new _m(f39), xt8 = new vm(f39), St8 = new Ud(z19, pe8), ye7 = new fm(z19, Ee5, St8, pe8), wt9 = new Mm(z19, St8, nt14, ye7), et13 = new Cm(z19, wt9, St8, nt14), _e7 = new Em(z19, pe8, je7), Q11 = new gm(Ie7), ct11 = new Bg(f39, bt9, xt8, Ee5, pe8, ye7, Q11), kt10 = new l0(f39, Ie7), P19 = new Hg(), C19 = new Yg(Ee5, pe8), fe7 = new dm(f39, bt9, xt8, ke7, et13, d34, c27), de9 = new e0(f39, et13, pe8), Te7 = new c0(z19, nt14, pe8, ke7), O20 = new pm(z19, Ee5, nt14, pe8), ae7 = new Sm(z19, Ee5, nt14, pe8), nt14.programs = ct11.programs, f39.capabilities = pe8, f39.extensions = Ee5, f39.properties = Ie7, f39.renderLists = P19, f39.shadowMap = de9, f39.state = ke7, f39.info = nt14;
    }
    Le7();
    const Me7 = new a0(f39, z19);
    this.xr = Me7, this.getContext = function() {
      return z19;
    }, this.getContextAttributes = function() {
      return z19.getContextAttributes();
    }, this.forceContextLoss = function() {
      const R20 = Ee5.get("WEBGL_lose_context");
      R20 && R20.loseContext();
    }, this.forceContextRestore = function() {
      const R20 = Ee5.get("WEBGL_lose_context");
      R20 && R20.restoreContext();
    }, this.getPixelRatio = function() {
      return k27;
    }, this.setPixelRatio = function(R20) {
      R20 !== void 0 && (k27 = R20, this.setSize(G15, B21, false));
    }, this.getSize = function(R20) {
      return R20.set(G15, B21);
    }, this.setSize = function(R20, K13, ne8 = true) {
      if (Me7.isPresenting) {
        console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");
        return;
      }
      G15 = R20, B21 = K13, t19.width = Math.floor(R20 * k27), t19.height = Math.floor(K13 * k27), ne8 === true && (t19.style.width = R20 + "px", t19.style.height = K13 + "px"), this.setViewport(0, 0, R20, K13);
    }, this.getDrawingBufferSize = function(R20) {
      return R20.set(G15 * k27, B21 * k27).floor();
    }, this.setDrawingBufferSize = function(R20, K13, ne8) {
      G15 = R20, B21 = K13, k27 = ne8, t19.width = Math.floor(R20 * ne8), t19.height = Math.floor(K13 * ne8), this.setViewport(0, 0, R20, K13);
    }, this.getCurrentViewport = function(R20) {
      return R20.copy(I16);
    }, this.getViewport = function(R20) {
      return R20.copy(W8);
    }, this.setViewport = function(R20, K13, ne8, q13) {
      R20.isVector4 ? W8.set(R20.x, R20.y, R20.z, R20.w) : W8.set(R20, K13, ne8, q13), ke7.viewport(I16.copy(W8).multiplyScalar(k27).floor());
    }, this.getScissor = function(R20) {
      return R20.copy(te7);
    }, this.setScissor = function(R20, K13, ne8, q13) {
      R20.isVector4 ? te7.set(R20.x, R20.y, R20.z, R20.w) : te7.set(R20, K13, ne8, q13), ke7.scissor(v30.copy(te7).multiplyScalar(k27).floor());
    }, this.getScissorTest = function() {
      return J11;
    }, this.setScissorTest = function(R20) {
      ke7.setScissorTest(J11 = R20);
    }, this.setOpaqueSort = function(R20) {
      V14 = R20;
    }, this.setTransparentSort = function(R20) {
      H15 = R20;
    }, this.getClearColor = function(R20) {
      return R20.copy(fe7.getClearColor());
    }, this.setClearColor = function() {
      fe7.setClearColor.apply(fe7, arguments);
    }, this.getClearAlpha = function() {
      return fe7.getClearAlpha();
    }, this.setClearAlpha = function() {
      fe7.setClearAlpha.apply(fe7, arguments);
    }, this.clear = function(R20 = true, K13 = true, ne8 = true) {
      let q13 = 0;
      R20 && (q13 |= 16384), K13 && (q13 |= 256), ne8 && (q13 |= 1024), z19.clear(q13);
    }, this.clearColor = function() {
      this.clear(true, false, false);
    }, this.clearDepth = function() {
      this.clear(false, true, false);
    }, this.clearStencil = function() {
      this.clear(false, false, true);
    }, this.dispose = function() {
      t19.removeEventListener("webglcontextlost", Ce7, false), t19.removeEventListener("webglcontextrestored", Ge7, false), t19.removeEventListener("webglcontextcreationerror", Xe7, false), P19.dispose(), C19.dispose(), Ie7.dispose(), bt9.dispose(), xt8.dispose(), et13.dispose(), ye7.dispose(), Te7.dispose(), ct11.dispose(), Me7.dispose(), Me7.removeEventListener("sessionstart", De6), Me7.removeEventListener("sessionend", pt11), he8 && (he8.dispose(), he8 = null), vt8.stop();
    };
    function Ce7(R20) {
      R20.preventDefault(), console.log("THREE.WebGLRenderer: Context Lost."), E24 = true;
    }
    function Ge7() {
      console.log("THREE.WebGLRenderer: Context Restored."), E24 = false;
      const R20 = nt14.autoReset, K13 = de9.enabled, ne8 = de9.autoUpdate, q13 = de9.needsUpdate, oe7 = de9.type;
      Le7(), nt14.autoReset = R20, de9.enabled = K13, de9.autoUpdate = ne8, de9.needsUpdate = q13, de9.type = oe7;
    }
    function Xe7(R20) {
      console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ", R20.statusMessage);
    }
    function Mt10(R20) {
      const K13 = R20.target;
      K13.removeEventListener("dispose", Mt10), F17(K13);
    }
    function F17(R20) {
      se6(R20), Ie7.remove(R20);
    }
    function se6(R20) {
      const K13 = Ie7.get(R20).programs;
      K13 !== void 0 && (K13.forEach(function(ne8) {
        ct11.releaseProgram(ne8);
      }), R20.isShaderMaterial && ct11.releaseShaderCache(R20));
    }
    this.renderBufferDirect = function(R20, K13, ne8, q13, oe7, Ue7) {
      K13 === null && (K13 = ee7);
      const Be7 = oe7.isMesh && oe7.matrixWorld.determinant() < 0, He8 = vo2(R20, K13, ne8, q13, oe7);
      ke7.setMaterial(q13, Be7);
      let qe8 = ne8.index, Ke7 = 1;
      q13.wireframe === true && (qe8 = wt9.getWireframeAttribute(ne8), Ke7 = 2);
      const Ye7 = ne8.drawRange, Ze7 = ne8.attributes.position;
      let at10 = Ye7.start * Ke7, ut11 = (Ye7.start + Ye7.count) * Ke7;
      Ue7 !== null && (at10 = Math.max(at10, Ue7.start * Ke7), ut11 = Math.min(ut11, (Ue7.start + Ue7.count) * Ke7)), qe8 !== null ? (at10 = Math.max(at10, 0), ut11 = Math.min(ut11, qe8.count)) : Ze7 != null && (at10 = Math.max(at10, 0), ut11 = Math.min(ut11, Ze7.count));
      const Ot10 = ut11 - at10;
      if (Ot10 < 0 || Ot10 === 1 / 0)
        return;
      ye7.setup(oe7, q13, He8, ne8, qe8);
      let _n6, Tt9 = O20;
      if (qe8 !== null && (_n6 = St8.get(qe8), Tt9 = ae7, Tt9.setIndex(_n6)), oe7.isMesh)
        q13.wireframe === true ? (ke7.setLineWidth(q13.wireframeLinewidth * $24()), Tt9.setMode(1)) : Tt9.setMode(4);
      else if (oe7.isLine) {
        let $e6 = q13.linewidth;
        $e6 === void 0 && ($e6 = 1), ke7.setLineWidth($e6 * $24()), oe7.isLineSegments ? Tt9.setMode(1) : oe7.isLineLoop ? Tt9.setMode(2) : Tt9.setMode(3);
      } else
        oe7.isPoints ? Tt9.setMode(0) : oe7.isSprite && Tt9.setMode(4);
      if (oe7.isInstancedMesh)
        Tt9.renderInstances(at10, Ot10, oe7.count);
      else if (ne8.isInstancedBufferGeometry) {
        const $e6 = ne8._maxInstanceCount !== void 0 ? ne8._maxInstanceCount : 1 / 0, Vi5 = Math.min(ne8.instanceCount, $e6);
        Tt9.renderInstances(at10, Ot10, Vi5);
      } else
        Tt9.render(at10, Ot10);
    }, this.compile = function(R20, K13) {
      function ne8(q13, oe7, Ue7) {
        q13.transparent === true && q13.side === fn3 && q13.forceSinglePass === false ? (q13.side = sn3, q13.needsUpdate = true, Bi4(q13, oe7, Ue7), q13.side = Pn3, q13.needsUpdate = true, Bi4(q13, oe7, Ue7), q13.side = fn3) : Bi4(q13, oe7, Ue7);
      }
      g31 = C19.get(R20), g31.init(), m33.push(g31), R20.traverseVisible(function(q13) {
        q13.isLight && q13.layers.test(K13.layers) && (g31.pushLight(q13), q13.castShadow && g31.pushShadow(q13));
      }), g31.setupLights(f39.useLegacyLights), R20.traverse(function(q13) {
        const oe7 = q13.material;
        if (oe7)
          if (Array.isArray(oe7))
            for (let Ue7 = 0; Ue7 < oe7.length; Ue7++) {
              const Be7 = oe7[Ue7];
              ne8(Be7, R20, q13);
            }
          else
            ne8(oe7, R20, q13);
      }), m33.pop(), g31 = null;
    };
    let ue8 = null;
    function Se7(R20) {
      ue8 && ue8(R20);
    }
    function De6() {
      vt8.stop();
    }
    function pt11() {
      vt8.start();
    }
    const vt8 = new xu();
    vt8.setAnimationLoop(Se7), typeof self < "u" && vt8.setContext(self), this.setAnimationLoop = function(R20) {
      ue8 = R20, Me7.setAnimationLoop(R20), R20 === null ? vt8.stop() : vt8.start();
    }, Me7.addEventListener("sessionstart", De6), Me7.addEventListener("sessionend", pt11), this.render = function(R20, K13) {
      if (K13 !== void 0 && K13.isCamera !== true) {
        console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
        return;
      }
      if (E24 === true)
        return;
      R20.matrixWorldAutoUpdate === true && R20.updateMatrixWorld(), K13.parent === null && K13.matrixWorldAutoUpdate === true && K13.updateMatrixWorld(), Me7.enabled === true && Me7.isPresenting === true && (Me7.cameraAutoUpdate === true && Me7.updateCamera(K13), K13 = Me7.getCamera()), R20.isScene === true && R20.onBeforeRender(f39, R20, K13, S21), g31 = C19.get(R20, m33.length), g31.init(), m33.push(g31), j18.multiplyMatrices(K13.projectionMatrix, K13.matrixWorldInverse), ie8.setFromProjectionMatrix(j18), me9 = this.localClippingEnabled, le7 = Q11.init(this.clippingPlanes, me9), p26 = P19.get(R20, y33.length), p26.init(), y33.push(p26), It7(R20, K13, 0, f39.sortObjects), p26.finish(), f39.sortObjects === true && p26.sort(V14, H15), le7 === true && Q11.beginShadows();
      const ne8 = g31.state.shadowsArray;
      if (de9.render(ne8, R20, K13), le7 === true && Q11.endShadows(), this.info.autoReset === true && this.info.reset(), fe7.render(p26, R20), g31.setupLights(f39.useLegacyLights), K13.isArrayCamera) {
        const q13 = K13.cameras;
        for (let oe7 = 0, Ue7 = q13.length; oe7 < Ue7; oe7++) {
          const Be7 = q13[oe7];
          Tn6(p26, R20, Be7, Be7.viewport);
        }
      } else
        Tn6(p26, R20, K13);
      S21 !== null && (je7.updateMultisampleRenderTarget(S21), je7.updateRenderTargetMipmap(S21)), R20.isScene === true && R20.onAfterRender(f39, R20, K13), ye7.resetDefaultState(), D17 = -1, N19 = null, m33.pop(), m33.length > 0 ? g31 = m33[m33.length - 1] : g31 = null, y33.pop(), y33.length > 0 ? p26 = y33[y33.length - 1] : p26 = null;
    };
    function It7(R20, K13, ne8, q13) {
      if (R20.visible === false)
        return;
      if (R20.layers.test(K13.layers)) {
        if (R20.isGroup)
          ne8 = R20.renderOrder;
        else if (R20.isLOD)
          R20.autoUpdate === true && R20.update(K13);
        else if (R20.isLight)
          g31.pushLight(R20), R20.castShadow && g31.pushShadow(R20);
        else if (R20.isSprite) {
          if (!R20.frustumCulled || ie8.intersectsSprite(R20)) {
            q13 && X12.setFromMatrixPosition(R20.matrixWorld).applyMatrix4(j18);
            const Be7 = et13.update(R20), He8 = R20.material;
            He8.visible && p26.push(R20, Be7, He8, ne8, X12.z, null);
          }
        } else if ((R20.isMesh || R20.isLine || R20.isPoints) && (R20.isSkinnedMesh && R20.skeleton.frame !== nt14.render.frame && (R20.skeleton.update(), R20.skeleton.frame = nt14.render.frame), !R20.frustumCulled || ie8.intersectsObject(R20))) {
          q13 && X12.setFromMatrixPosition(R20.matrixWorld).applyMatrix4(j18);
          const Be7 = et13.update(R20), He8 = R20.material;
          if (Array.isArray(He8)) {
            const qe8 = Be7.groups;
            for (let Ke7 = 0, Ye7 = qe8.length; Ke7 < Ye7; Ke7++) {
              const Ze7 = qe8[Ke7], at10 = He8[Ze7.materialIndex];
              at10 && at10.visible && p26.push(R20, Be7, at10, ne8, X12.z, Ze7);
            }
          } else
            He8.visible && p26.push(R20, Be7, He8, ne8, X12.z, null);
        }
      }
      const Ue7 = R20.children;
      for (let Be7 = 0, He8 = Ue7.length; Be7 < He8; Be7++)
        It7(Ue7[Be7], K13, ne8, q13);
    }
    function Tn6(R20, K13, ne8, q13) {
      const oe7 = R20.opaque, Ue7 = R20.transmissive, Be7 = R20.transparent;
      g31.setupLightsView(ne8), le7 === true && Q11.setGlobalState(f39.clippingPlanes, ne8), Ue7.length > 0 && it14(oe7, Ue7, K13, ne8), q13 && ke7.viewport(I16.copy(q13)), oe7.length > 0 && $t8(oe7, K13, ne8), Ue7.length > 0 && $t8(Ue7, K13, ne8), Be7.length > 0 && $t8(Be7, K13, ne8), ke7.buffers.depth.setTest(true), ke7.buffers.depth.setMask(true), ke7.buffers.color.setMask(true), ke7.setPolygonOffset(false);
    }
    function it14(R20, K13, ne8, q13) {
      if (he8 === null) {
        const He8 = pe8.isWebGL2;
        he8 = new Li(1024, 1024, {
          generateMipmaps: true,
          type: Ee5.has("EXT_color_buffer_half_float") ? Qs : Ei3,
          minFilter: jn3,
          samples: He8 && o12 === true ? 4 : 0
        });
      }
      const oe7 = f39.getRenderTarget();
      f39.setRenderTarget(he8), f39.clear();
      const Ue7 = f39.toneMapping;
      f39.toneMapping = Wn3, $t8(R20, ne8, q13), je7.updateMultisampleRenderTarget(he8), je7.updateRenderTargetMipmap(he8);
      let Be7 = false;
      for (let He8 = 0, qe8 = K13.length; He8 < qe8; He8++) {
        const Ke7 = K13[He8], Ye7 = Ke7.object, Ze7 = Ke7.geometry, at10 = Ke7.material, ut11 = Ke7.group;
        if (at10.side === fn3 && Ye7.layers.test(q13.layers)) {
          const Ot10 = at10.side;
          at10.side = sn3, at10.needsUpdate = true, cn3(Ye7, ne8, q13, Ze7, at10, ut11), at10.side = Ot10, at10.needsUpdate = true, Be7 = true;
        }
      }
      Be7 === true && (je7.updateMultisampleRenderTarget(he8), je7.updateRenderTargetMipmap(he8)), f39.setRenderTarget(oe7), f39.toneMapping = Ue7;
    }
    function $t8(R20, K13, ne8) {
      const q13 = K13.isScene === true ? K13.overrideMaterial : null;
      for (let oe7 = 0, Ue7 = R20.length; oe7 < Ue7; oe7++) {
        const Be7 = R20[oe7], He8 = Be7.object, qe8 = Be7.geometry, Ke7 = q13 === null ? Be7.material : q13, Ye7 = Be7.group;
        He8.layers.test(ne8.layers) && cn3(He8, K13, ne8, qe8, Ke7, Ye7);
      }
    }
    function cn3(R20, K13, ne8, q13, oe7, Ue7) {
      R20.onBeforeRender(f39, K13, ne8, q13, oe7, Ue7), R20.modelViewMatrix.multiplyMatrices(ne8.matrixWorldInverse, R20.matrixWorld), R20.normalMatrix.getNormalMatrix(R20.modelViewMatrix), oe7.onBeforeRender(f39, K13, ne8, q13, R20, Ue7), oe7.transparent === true && oe7.side === fn3 && oe7.forceSinglePass === false ? (oe7.side = sn3, oe7.needsUpdate = true, f39.renderBufferDirect(ne8, K13, q13, oe7, R20, Ue7), oe7.side = Pn3, oe7.needsUpdate = true, f39.renderBufferDirect(ne8, K13, q13, oe7, R20, Ue7), oe7.side = fn3) : f39.renderBufferDirect(ne8, K13, q13, oe7, R20, Ue7), R20.onAfterRender(f39, K13, ne8, q13, oe7, Ue7);
    }
    function Bi4(R20, K13, ne8) {
      K13.isScene !== true && (K13 = ee7);
      const q13 = Ie7.get(R20), oe7 = g31.state.lights, Ue7 = g31.state.shadowsArray, Be7 = oe7.state.version, He8 = ct11.getParameters(R20, oe7.state, Ue7, K13, ne8), qe8 = ct11.getProgramCacheKey(He8);
      let Ke7 = q13.programs;
      q13.environment = R20.isMeshStandardMaterial ? K13.environment : null, q13.fog = K13.fog, q13.envMap = (R20.isMeshStandardMaterial ? xt8 : bt9).get(R20.envMap || q13.environment), Ke7 === void 0 && (R20.addEventListener("dispose", Mt10), Ke7 = /* @__PURE__ */ new Map(), q13.programs = Ke7);
      let Ye7 = Ke7.get(qe8);
      if (Ye7 !== void 0) {
        if (q13.currentProgram === Ye7 && q13.lightsStateVersion === Be7)
          return pr6(R20, He8), Ye7;
      } else
        He8.uniforms = ct11.getUniforms(R20), R20.onBuild(ne8, He8, f39), R20.onBeforeCompile(He8, f39), Ye7 = ct11.acquireProgram(He8, qe8), Ke7.set(qe8, Ye7), q13.uniforms = He8.uniforms;
      const Ze7 = q13.uniforms;
      (!R20.isShaderMaterial && !R20.isRawShaderMaterial || R20.clipping === true) && (Ze7.clippingPlanes = Q11.uniform), pr6(R20, He8), q13.needsLights = Mo2(R20), q13.lightsStateVersion = Be7, q13.needsLights && (Ze7.ambientLightColor.value = oe7.state.ambient, Ze7.lightProbe.value = oe7.state.probe, Ze7.directionalLights.value = oe7.state.directional, Ze7.directionalLightShadows.value = oe7.state.directionalShadow, Ze7.spotLights.value = oe7.state.spot, Ze7.spotLightShadows.value = oe7.state.spotShadow, Ze7.rectAreaLights.value = oe7.state.rectArea, Ze7.ltc_1.value = oe7.state.rectAreaLTC1, Ze7.ltc_2.value = oe7.state.rectAreaLTC2, Ze7.pointLights.value = oe7.state.point, Ze7.pointLightShadows.value = oe7.state.pointShadow, Ze7.hemisphereLights.value = oe7.state.hemi, Ze7.directionalShadowMap.value = oe7.state.directionalShadowMap, Ze7.directionalShadowMatrix.value = oe7.state.directionalShadowMatrix, Ze7.spotShadowMap.value = oe7.state.spotShadowMap, Ze7.spotLightMatrix.value = oe7.state.spotLightMatrix, Ze7.spotLightMap.value = oe7.state.spotLightMap, Ze7.pointShadowMap.value = oe7.state.pointShadowMap, Ze7.pointShadowMatrix.value = oe7.state.pointShadowMatrix);
      const at10 = Ye7.getUniforms(), ut11 = eo.seqWithValue(at10.seq, Ze7);
      return q13.currentProgram = Ye7, q13.uniformsList = ut11, Ye7;
    }
    function pr6(R20, K13) {
      const ne8 = Ie7.get(R20);
      ne8.outputEncoding = K13.outputEncoding, ne8.instancing = K13.instancing, ne8.skinning = K13.skinning, ne8.morphTargets = K13.morphTargets, ne8.morphNormals = K13.morphNormals, ne8.morphColors = K13.morphColors, ne8.morphTargetsCount = K13.morphTargetsCount, ne8.numClippingPlanes = K13.numClippingPlanes, ne8.numIntersection = K13.numClipIntersection, ne8.vertexAlphas = K13.vertexAlphas, ne8.vertexTangents = K13.vertexTangents, ne8.toneMapping = K13.toneMapping;
    }
    function vo2(R20, K13, ne8, q13, oe7) {
      K13.isScene !== true && (K13 = ee7), je7.resetTextureUnits();
      const Ue7 = K13.fog, Be7 = q13.isMeshStandardMaterial ? K13.environment : null, He8 = S21 === null ? f39.outputEncoding : S21.isXRRenderTarget === true ? S21.texture.encoding : Ci, qe8 = (q13.isMeshStandardMaterial ? xt8 : bt9).get(q13.envMap || Be7), Ke7 = q13.vertexColors === true && !!ne8.attributes.color && ne8.attributes.color.itemSize === 4, Ye7 = !!q13.normalMap && !!ne8.attributes.tangent, Ze7 = !!ne8.morphAttributes.position, at10 = !!ne8.morphAttributes.normal, ut11 = !!ne8.morphAttributes.color, Ot10 = q13.toneMapped ? f39.toneMapping : Wn3, _n6 = ne8.morphAttributes.position || ne8.morphAttributes.normal || ne8.morphAttributes.color, Tt9 = _n6 !== void 0 ? _n6.length : 0, $e6 = Ie7.get(q13), Vi5 = g31.state.lights;
      if (le7 === true && (me9 === true || R20 !== N19)) {
        const Qt7 = R20 === N19 && q13.id === D17;
        Q11.setState(q13, R20, Qt7);
      }
      let Lt7 = false;
      q13.version === $e6.__version ? ($e6.needsLights && $e6.lightsStateVersion !== Vi5.state.version || $e6.outputEncoding !== He8 || oe7.isInstancedMesh && $e6.instancing === false || !oe7.isInstancedMesh && $e6.instancing === true || oe7.isSkinnedMesh && $e6.skinning === false || !oe7.isSkinnedMesh && $e6.skinning === true || $e6.envMap !== qe8 || q13.fog === true && $e6.fog !== Ue7 || $e6.numClippingPlanes !== void 0 && ($e6.numClippingPlanes !== Q11.numPlanes || $e6.numIntersection !== Q11.numIntersection) || $e6.vertexAlphas !== Ke7 || $e6.vertexTangents !== Ye7 || $e6.morphTargets !== Ze7 || $e6.morphNormals !== at10 || $e6.morphColors !== ut11 || $e6.toneMapping !== Ot10 || pe8.isWebGL2 === true && $e6.morphTargetsCount !== Tt9) && (Lt7 = true) : (Lt7 = true, $e6.__version = q13.version);
      let Dn6 = $e6.currentProgram;
      Lt7 === true && (Dn6 = Bi4(q13, K13, oe7));
      let mr6 = false, Yn6 = false, Gi3 = false;
      const Et8 = Dn6.getUniforms(), Nn6 = $e6.uniforms;
      if (ke7.useProgram(Dn6.program) && (mr6 = true, Yn6 = true, Gi3 = true), q13.id !== D17 && (D17 = q13.id, Yn6 = true), mr6 || N19 !== R20) {
        if (Et8.setValue(z19, "projectionMatrix", R20.projectionMatrix), pe8.logarithmicDepthBuffer && Et8.setValue(
          z19,
          "logDepthBufFC",
          2 / (Math.log(R20.far + 1) / Math.LN2)
        ), N19 !== R20 && (N19 = R20, Yn6 = true, Gi3 = true), q13.isShaderMaterial || q13.isMeshPhongMaterial || q13.isMeshToonMaterial || q13.isMeshStandardMaterial || q13.envMap) {
          const Qt7 = Et8.map.cameraPosition;
          Qt7 !== void 0 && Qt7.setValue(
            z19,
            X12.setFromMatrixPosition(R20.matrixWorld)
          );
        }
        (q13.isMeshPhongMaterial || q13.isMeshToonMaterial || q13.isMeshLambertMaterial || q13.isMeshBasicMaterial || q13.isMeshStandardMaterial || q13.isShaderMaterial) && Et8.setValue(z19, "isOrthographic", R20.isOrthographicCamera === true), (q13.isMeshPhongMaterial || q13.isMeshToonMaterial || q13.isMeshLambertMaterial || q13.isMeshBasicMaterial || q13.isMeshStandardMaterial || q13.isShaderMaterial || q13.isShadowMaterial || oe7.isSkinnedMesh) && Et8.setValue(z19, "viewMatrix", R20.matrixWorldInverse);
      }
      if (oe7.isSkinnedMesh) {
        Et8.setOptional(z19, oe7, "bindMatrix"), Et8.setOptional(z19, oe7, "bindMatrixInverse");
        const Qt7 = oe7.skeleton;
        Qt7 && (pe8.floatVertexTextures ? (Qt7.boneTexture === null && Qt7.computeBoneTexture(), Et8.setValue(z19, "boneTexture", Qt7.boneTexture, je7), Et8.setValue(z19, "boneTextureSize", Qt7.boneTextureSize)) : console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."));
      }
      const Hi5 = ne8.morphAttributes;
      if ((Hi5.position !== void 0 || Hi5.normal !== void 0 || Hi5.color !== void 0 && pe8.isWebGL2 === true) && _e7.update(oe7, ne8, Dn6), (Yn6 || $e6.receiveShadow !== oe7.receiveShadow) && ($e6.receiveShadow = oe7.receiveShadow, Et8.setValue(z19, "receiveShadow", oe7.receiveShadow)), q13.isMeshGouraudMaterial && q13.envMap !== null && (Nn6.envMap.value = qe8, Nn6.flipEnvMap.value = qe8.isCubeTexture && qe8.isRenderTargetTexture === false ? -1 : 1), Yn6 && (Et8.setValue(z19, "toneMappingExposure", f39.toneMappingExposure), $e6.needsLights && bo2(Nn6, Gi3), Ue7 && q13.fog === true && kt10.refreshFogUniforms(Nn6, Ue7), kt10.refreshMaterialUniforms(Nn6, q13, k27, B21, he8), eo.upload(z19, $e6.uniformsList, Nn6, je7)), q13.isShaderMaterial && q13.uniformsNeedUpdate === true && (eo.upload(z19, $e6.uniformsList, Nn6, je7), q13.uniformsNeedUpdate = false), q13.isSpriteMaterial && Et8.setValue(z19, "center", oe7.center), Et8.setValue(z19, "modelViewMatrix", oe7.modelViewMatrix), Et8.setValue(z19, "normalMatrix", oe7.normalMatrix), Et8.setValue(z19, "modelMatrix", oe7.matrixWorld), q13.isShaderMaterial || q13.isRawShaderMaterial) {
        const Qt7 = q13.uniformsGroups;
        for (let Wi4 = 0, So2 = Qt7.length; Wi4 < So2; Wi4++)
          if (pe8.isWebGL2) {
            const gr7 = Qt7[Wi4];
            Te7.update(gr7, Dn6), Te7.bind(gr7, Dn6);
          } else
            console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");
      }
      return Dn6;
    }
    function bo2(R20, K13) {
      R20.ambientLightColor.needsUpdate = K13, R20.lightProbe.needsUpdate = K13, R20.directionalLights.needsUpdate = K13, R20.directionalLightShadows.needsUpdate = K13, R20.pointLights.needsUpdate = K13, R20.pointLightShadows.needsUpdate = K13, R20.spotLights.needsUpdate = K13, R20.spotLightShadows.needsUpdate = K13, R20.rectAreaLights.needsUpdate = K13, R20.hemisphereLights.needsUpdate = K13;
    }
    function Mo2(R20) {
      return R20.isMeshLambertMaterial || R20.isMeshToonMaterial || R20.isMeshPhongMaterial || R20.isMeshStandardMaterial || R20.isShadowMaterial || R20.isShaderMaterial && R20.lights === true;
    }
    this.getActiveCubeFace = function() {
      return b33;
    }, this.getActiveMipmapLevel = function() {
      return w29;
    }, this.getRenderTarget = function() {
      return S21;
    }, this.setRenderTargetTextures = function(R20, K13, ne8) {
      Ie7.get(R20.texture).__webglTexture = K13, Ie7.get(R20.depthTexture).__webglTexture = ne8;
      const q13 = Ie7.get(R20);
      q13.__hasExternalTextures = true, q13.__hasExternalTextures && (q13.__autoAllocateDepthBuffer = ne8 === void 0, q13.__autoAllocateDepthBuffer || Ee5.has("WEBGL_multisampled_render_to_texture") === true && (console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"), q13.__useRenderToTexture = false));
    }, this.setRenderTargetFramebuffer = function(R20, K13) {
      const ne8 = Ie7.get(R20);
      ne8.__webglFramebuffer = K13, ne8.__useDefaultFramebuffer = K13 === void 0;
    }, this.setRenderTarget = function(R20, K13 = 0, ne8 = 0) {
      S21 = R20, b33 = K13, w29 = ne8;
      let q13 = true, oe7 = null, Ue7 = false, Be7 = false;
      if (R20) {
        const qe8 = Ie7.get(R20);
        qe8.__useDefaultFramebuffer !== void 0 ? (ke7.bindFramebuffer(36160, null), q13 = false) : qe8.__webglFramebuffer === void 0 ? je7.setupRenderTarget(R20) : qe8.__hasExternalTextures && je7.rebindTextures(R20, Ie7.get(R20.texture).__webglTexture, Ie7.get(R20.depthTexture).__webglTexture);
        const Ke7 = R20.texture;
        (Ke7.isData3DTexture || Ke7.isDataArrayTexture || Ke7.isCompressedArrayTexture) && (Be7 = true);
        const Ye7 = Ie7.get(R20).__webglFramebuffer;
        R20.isWebGLCubeRenderTarget ? (oe7 = Ye7[K13], Ue7 = true) : pe8.isWebGL2 && R20.samples > 0 && je7.useMultisampledRTT(R20) === false ? oe7 = Ie7.get(R20).__webglMultisampledFramebuffer : oe7 = Ye7, I16.copy(R20.viewport), v30.copy(R20.scissor), L11 = R20.scissorTest;
      } else
        I16.copy(W8).multiplyScalar(k27).floor(), v30.copy(te7).multiplyScalar(k27).floor(), L11 = J11;
      if (ke7.bindFramebuffer(36160, oe7) && pe8.drawBuffers && q13 && ke7.drawBuffers(R20, oe7), ke7.viewport(I16), ke7.scissor(v30), ke7.setScissorTest(L11), Ue7) {
        const qe8 = Ie7.get(R20.texture);
        z19.framebufferTexture2D(36160, 36064, 34069 + K13, qe8.__webglTexture, ne8);
      } else if (Be7) {
        const qe8 = Ie7.get(R20.texture), Ke7 = K13 || 0;
        z19.framebufferTextureLayer(36160, 36064, qe8.__webglTexture, ne8 || 0, Ke7);
      }
      D17 = -1;
    }, this.readRenderTargetPixels = function(R20, K13, ne8, q13, oe7, Ue7, Be7) {
      if (!(R20 && R20.isWebGLRenderTarget)) {
        console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");
        return;
      }
      let He8 = Ie7.get(R20).__webglFramebuffer;
      if (R20.isWebGLCubeRenderTarget && Be7 !== void 0 && (He8 = He8[Be7]), He8) {
        ke7.bindFramebuffer(36160, He8);
        try {
          const qe8 = R20.texture, Ke7 = qe8.format, Ye7 = qe8.type;
          if (Ke7 !== pn3 && Z11.convert(Ke7) !== z19.getParameter(35739)) {
            console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
            return;
          }
          const Ze7 = Ye7 === Qs && (Ee5.has("EXT_color_buffer_half_float") || pe8.isWebGL2 && Ee5.has("EXT_color_buffer_float"));
          if (Ye7 !== Ei3 && Z11.convert(Ye7) !== z19.getParameter(35738) && // Edge and Chrome Mac < 52 (#9513)
          !(Ye7 === ai3 && (pe8.isWebGL2 || Ee5.has("OES_texture_float") || Ee5.has("WEBGL_color_buffer_float"))) && // Chrome Mac >= 52 and Firefox
          !Ze7) {
            console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");
            return;
          }
          K13 >= 0 && K13 <= R20.width - q13 && ne8 >= 0 && ne8 <= R20.height - oe7 && z19.readPixels(K13, ne8, q13, oe7, Z11.convert(Ke7), Z11.convert(Ye7), Ue7);
        } finally {
          const qe8 = S21 !== null ? Ie7.get(S21).__webglFramebuffer : null;
          ke7.bindFramebuffer(36160, qe8);
        }
      }
    }, this.copyFramebufferToTexture = function(R20, K13, ne8 = 0) {
      const q13 = Math.pow(2, -ne8), oe7 = Math.floor(K13.image.width * q13), Ue7 = Math.floor(K13.image.height * q13);
      je7.setTexture2D(K13, 0), z19.copyTexSubImage2D(3553, ne8, 0, 0, R20.x, R20.y, oe7, Ue7), ke7.unbindTexture();
    }, this.copyTextureToTexture = function(R20, K13, ne8, q13 = 0) {
      const oe7 = K13.image.width, Ue7 = K13.image.height, Be7 = Z11.convert(ne8.format), He8 = Z11.convert(ne8.type);
      je7.setTexture2D(ne8, 0), z19.pixelStorei(37440, ne8.flipY), z19.pixelStorei(37441, ne8.premultiplyAlpha), z19.pixelStorei(3317, ne8.unpackAlignment), K13.isDataTexture ? z19.texSubImage2D(3553, q13, R20.x, R20.y, oe7, Ue7, Be7, He8, K13.image.data) : K13.isCompressedTexture ? z19.compressedTexSubImage2D(3553, q13, R20.x, R20.y, K13.mipmaps[0].width, K13.mipmaps[0].height, Be7, K13.mipmaps[0].data) : z19.texSubImage2D(3553, q13, R20.x, R20.y, Be7, He8, K13.image), q13 === 0 && ne8.generateMipmaps && z19.generateMipmap(3553), ke7.unbindTexture();
    }, this.copyTextureToTexture3D = function(R20, K13, ne8, q13, oe7 = 0) {
      if (f39.isWebGL1Renderer) {
        console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");
        return;
      }
      const Ue7 = R20.max.x - R20.min.x + 1, Be7 = R20.max.y - R20.min.y + 1, He8 = R20.max.z - R20.min.z + 1, qe8 = Z11.convert(q13.format), Ke7 = Z11.convert(q13.type);
      let Ye7;
      if (q13.isData3DTexture)
        je7.setTexture3D(q13, 0), Ye7 = 32879;
      else if (q13.isDataArrayTexture)
        je7.setTexture2DArray(q13, 0), Ye7 = 35866;
      else {
        console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");
        return;
      }
      z19.pixelStorei(37440, q13.flipY), z19.pixelStorei(37441, q13.premultiplyAlpha), z19.pixelStorei(3317, q13.unpackAlignment);
      const Ze7 = z19.getParameter(3314), at10 = z19.getParameter(32878), ut11 = z19.getParameter(3316), Ot10 = z19.getParameter(3315), _n6 = z19.getParameter(32877), Tt9 = ne8.isCompressedTexture ? ne8.mipmaps[0] : ne8.image;
      z19.pixelStorei(3314, Tt9.width), z19.pixelStorei(32878, Tt9.height), z19.pixelStorei(3316, R20.min.x), z19.pixelStorei(3315, R20.min.y), z19.pixelStorei(32877, R20.min.z), ne8.isDataTexture || ne8.isData3DTexture ? z19.texSubImage3D(Ye7, oe7, K13.x, K13.y, K13.z, Ue7, Be7, He8, qe8, Ke7, Tt9.data) : ne8.isCompressedArrayTexture ? (console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."), z19.compressedTexSubImage3D(Ye7, oe7, K13.x, K13.y, K13.z, Ue7, Be7, He8, qe8, Tt9.data)) : z19.texSubImage3D(Ye7, oe7, K13.x, K13.y, K13.z, Ue7, Be7, He8, qe8, Ke7, Tt9), z19.pixelStorei(3314, Ze7), z19.pixelStorei(32878, at10), z19.pixelStorei(3316, ut11), z19.pixelStorei(3315, Ot10), z19.pixelStorei(32877, _n6), oe7 === 0 && q13.generateMipmaps && z19.generateMipmap(Ye7), ke7.unbindTexture();
    }, this.initTexture = function(R20) {
      R20.isCubeTexture ? je7.setTextureCube(R20, 0) : R20.isData3DTexture ? je7.setTexture3D(R20, 0) : R20.isDataArrayTexture || R20.isCompressedArrayTexture ? je7.setTexture2DArray(R20, 0) : je7.setTexture2D(R20, 0), ke7.unbindTexture();
    }, this.resetState = function() {
      b33 = 0, w29 = 0, S21 = null, ke7.reset(), ye7.reset();
    }, typeof __THREE_DEVTOOLS__ < "u" && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", { detail: this }));
  }
  get physicallyCorrectLights() {
    return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."), !this.useLegacyLights;
  }
  set physicallyCorrectLights(e11) {
    console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."), this.useLegacyLights = !e11;
  }
};
var h0 = class extends Ia {
};
h0.prototype.isWebGL1Renderer = true;
var Da = class extends _t3 {
  constructor() {
    super(), this.isScene = true, this.type = "Scene", this.background = null, this.environment = null, this.fog = null, this.backgroundBlurriness = 0, this.backgroundIntensity = 1, this.overrideMaterial = null, typeof __THREE_DEVTOOLS__ < "u" && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", { detail: this }));
  }
  copy(e11, t19) {
    return super.copy(e11, t19), e11.background !== null && (this.background = e11.background.clone()), e11.environment !== null && (this.environment = e11.environment.clone()), e11.fog !== null && (this.fog = e11.fog.clone()), this.backgroundBlurriness = e11.backgroundBlurriness, this.backgroundIntensity = e11.backgroundIntensity, e11.overrideMaterial !== null && (this.overrideMaterial = e11.overrideMaterial.clone()), this.matrixAutoUpdate = e11.matrixAutoUpdate, this;
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return this.fog !== null && (t19.object.fog = this.fog.toJSON()), this.backgroundBlurriness > 0 && (t19.object.backgroundBlurriness = this.backgroundBlurriness), this.backgroundIntensity !== 1 && (t19.object.backgroundIntensity = this.backgroundIntensity), t19;
  }
  get autoUpdate() {
    return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."), this.matrixWorldAutoUpdate;
  }
  set autoUpdate(e11) {
    console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."), this.matrixWorldAutoUpdate = e11;
  }
};
var d0 = class {
  constructor(e11, t19) {
    this.isInterleavedBuffer = true, this.array = e11, this.stride = t19, this.count = e11 !== void 0 ? e11.length / t19 : 0, this.usage = ga, this.updateRange = { offset: 0, count: -1 }, this.version = 0, this.uuid = Sn3();
  }
  onUploadCallback() {
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
  setUsage(e11) {
    return this.usage = e11, this;
  }
  copy(e11) {
    return this.array = new e11.array.constructor(e11.array), this.count = e11.count, this.stride = e11.stride, this.usage = e11.usage, this;
  }
  copyAt(e11, t19, n33) {
    e11 *= this.stride, n33 *= t19.stride;
    for (let i27 = 0, s18 = this.stride; i27 < s18; i27++)
      this.array[e11 + i27] = t19.array[n33 + i27];
    return this;
  }
  set(e11, t19 = 0) {
    return this.array.set(e11, t19), this;
  }
  clone(e11) {
    e11.arrayBuffers === void 0 && (e11.arrayBuffers = {}), this.array.buffer._uuid === void 0 && (this.array.buffer._uuid = Sn3()), e11.arrayBuffers[this.array.buffer._uuid] === void 0 && (e11.arrayBuffers[this.array.buffer._uuid] = this.array.slice(0).buffer);
    const t19 = new this.array.constructor(e11.arrayBuffers[this.array.buffer._uuid]), n33 = new this.constructor(t19, this.stride);
    return n33.setUsage(this.usage), n33;
  }
  onUpload(e11) {
    return this.onUploadCallback = e11, this;
  }
  toJSON(e11) {
    return e11.arrayBuffers === void 0 && (e11.arrayBuffers = {}), this.array.buffer._uuid === void 0 && (this.array.buffer._uuid = Sn3()), e11.arrayBuffers[this.array.buffer._uuid] === void 0 && (e11.arrayBuffers[this.array.buffer._uuid] = Array.from(new Uint32Array(this.array.buffer))), {
      uuid: this.uuid,
      buffer: this.array.buffer._uuid,
      type: this.array.constructor.name,
      stride: this.stride
    };
  }
};
var en3 = new U7();
var Na = class _Na {
  constructor(e11, t19, n33, i27 = false) {
    this.isInterleavedBufferAttribute = true, this.name = "", this.data = e11, this.itemSize = t19, this.offset = n33, this.normalized = i27;
  }
  get count() {
    return this.data.count;
  }
  get array() {
    return this.data.array;
  }
  set needsUpdate(e11) {
    this.data.needsUpdate = e11;
  }
  applyMatrix4(e11) {
    for (let t19 = 0, n33 = this.data.count; t19 < n33; t19++)
      en3.fromBufferAttribute(this, t19), en3.applyMatrix4(e11), this.setXYZ(t19, en3.x, en3.y, en3.z);
    return this;
  }
  applyNormalMatrix(e11) {
    for (let t19 = 0, n33 = this.count; t19 < n33; t19++)
      en3.fromBufferAttribute(this, t19), en3.applyNormalMatrix(e11), this.setXYZ(t19, en3.x, en3.y, en3.z);
    return this;
  }
  transformDirection(e11) {
    for (let t19 = 0, n33 = this.count; t19 < n33; t19++)
      en3.fromBufferAttribute(this, t19), en3.transformDirection(e11), this.setXYZ(t19, en3.x, en3.y, en3.z);
    return this;
  }
  setX(e11, t19) {
    return this.normalized && (t19 = mt5(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset] = t19, this;
  }
  setY(e11, t19) {
    return this.normalized && (t19 = mt5(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset + 1] = t19, this;
  }
  setZ(e11, t19) {
    return this.normalized && (t19 = mt5(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset + 2] = t19, this;
  }
  setW(e11, t19) {
    return this.normalized && (t19 = mt5(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset + 3] = t19, this;
  }
  getX(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  getY(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset + 1];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  getZ(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset + 2];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  getW(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset + 3];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  setXY(e11, t19, n33) {
    return e11 = e11 * this.data.stride + this.offset, this.normalized && (t19 = mt5(t19, this.array), n33 = mt5(n33, this.array)), this.data.array[e11 + 0] = t19, this.data.array[e11 + 1] = n33, this;
  }
  setXYZ(e11, t19, n33, i27) {
    return e11 = e11 * this.data.stride + this.offset, this.normalized && (t19 = mt5(t19, this.array), n33 = mt5(n33, this.array), i27 = mt5(i27, this.array)), this.data.array[e11 + 0] = t19, this.data.array[e11 + 1] = n33, this.data.array[e11 + 2] = i27, this;
  }
  setXYZW(e11, t19, n33, i27, s18) {
    return e11 = e11 * this.data.stride + this.offset, this.normalized && (t19 = mt5(t19, this.array), n33 = mt5(n33, this.array), i27 = mt5(i27, this.array), s18 = mt5(s18, this.array)), this.data.array[e11 + 0] = t19, this.data.array[e11 + 1] = n33, this.data.array[e11 + 2] = i27, this.data.array[e11 + 3] = s18, this;
  }
  clone(e11) {
    if (e11 === void 0) {
      console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");
      const t19 = [];
      for (let n33 = 0; n33 < this.count; n33++) {
        const i27 = n33 * this.data.stride + this.offset;
        for (let s18 = 0; s18 < this.itemSize; s18++)
          t19.push(this.data.array[i27 + s18]);
      }
      return new Gt3(new this.array.constructor(t19), this.itemSize, this.normalized);
    } else
      return e11.interleavedBuffers === void 0 && (e11.interleavedBuffers = {}), e11.interleavedBuffers[this.data.uuid] === void 0 && (e11.interleavedBuffers[this.data.uuid] = this.data.clone(e11)), new _Na(e11.interleavedBuffers[this.data.uuid], this.itemSize, this.offset, this.normalized);
  }
  toJSON(e11) {
    if (e11 === void 0) {
      console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");
      const t19 = [];
      for (let n33 = 0; n33 < this.count; n33++) {
        const i27 = n33 * this.data.stride + this.offset;
        for (let s18 = 0; s18 < this.itemSize; s18++)
          t19.push(this.data.array[i27 + s18]);
      }
      return {
        itemSize: this.itemSize,
        type: this.array.constructor.name,
        array: t19,
        normalized: this.normalized
      };
    } else
      return e11.interleavedBuffers === void 0 && (e11.interleavedBuffers = {}), e11.interleavedBuffers[this.data.uuid] === void 0 && (e11.interleavedBuffers[this.data.uuid] = this.data.toJSON(e11)), {
        isInterleavedBufferAttribute: true,
        itemSize: this.itemSize,
        data: this.data.uuid,
        offset: this.offset,
        normalized: this.normalized
      };
  }
};
var gc = new U7();
var _c = new gt5();
var xc = new gt5();
var f0 = new U7();
var yc = new Ve4();
var us = new U7();
var Su = class extends Pt4 {
  constructor(e11, t19) {
    super(e11, t19), this.isSkinnedMesh = true, this.type = "SkinnedMesh", this.bindMode = "attached", this.bindMatrix = new Ve4(), this.bindMatrixInverse = new Ve4(), this.boundingBox = null, this.boundingSphere = null;
  }
  computeBoundingBox() {
    const e11 = this.geometry;
    this.boundingBox === null && (this.boundingBox = new qn3()), this.boundingBox.makeEmpty();
    const t19 = e11.getAttribute("position");
    for (let n33 = 0; n33 < t19.count; n33++)
      us.fromBufferAttribute(t19, n33), this.applyBoneTransform(n33, us), this.boundingBox.expandByPoint(us);
  }
  computeBoundingSphere() {
    const e11 = this.geometry;
    this.boundingSphere === null && (this.boundingSphere = new Xn3()), this.boundingSphere.makeEmpty();
    const t19 = e11.getAttribute("position");
    for (let n33 = 0; n33 < t19.count; n33++)
      us.fromBufferAttribute(t19, n33), this.applyBoneTransform(n33, us), this.boundingSphere.expandByPoint(us);
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.bindMode = e11.bindMode, this.bindMatrix.copy(e11.bindMatrix), this.bindMatrixInverse.copy(e11.bindMatrixInverse), this.skeleton = e11.skeleton, this;
  }
  bind(e11, t19) {
    this.skeleton = e11, t19 === void 0 && (this.updateMatrixWorld(true), this.skeleton.calculateInverses(), t19 = this.matrixWorld), this.bindMatrix.copy(t19), this.bindMatrixInverse.copy(t19).invert();
  }
  pose() {
    this.skeleton.pose();
  }
  normalizeSkinWeights() {
    const e11 = new gt5(), t19 = this.geometry.attributes.skinWeight;
    for (let n33 = 0, i27 = t19.count; n33 < i27; n33++) {
      e11.fromBufferAttribute(t19, n33);
      const s18 = 1 / e11.manhattanLength();
      s18 !== 1 / 0 ? e11.multiplyScalar(s18) : e11.set(1, 0, 0, 0), t19.setXYZW(n33, e11.x, e11.y, e11.z, e11.w);
    }
  }
  updateMatrixWorld(e11) {
    super.updateMatrixWorld(e11), this.bindMode === "attached" ? this.bindMatrixInverse.copy(this.matrixWorld).invert() : this.bindMode === "detached" ? this.bindMatrixInverse.copy(this.bindMatrix).invert() : console.warn("THREE.SkinnedMesh: Unrecognized bindMode: " + this.bindMode);
  }
  applyBoneTransform(e11, t19) {
    const n33 = this.skeleton, i27 = this.geometry;
    _c.fromBufferAttribute(i27.attributes.skinIndex, e11), xc.fromBufferAttribute(i27.attributes.skinWeight, e11), gc.copy(t19).applyMatrix4(this.bindMatrix), t19.set(0, 0, 0);
    for (let s18 = 0; s18 < 4; s18++) {
      const r24 = xc.getComponent(s18);
      if (r24 !== 0) {
        const o12 = _c.getComponent(s18);
        yc.multiplyMatrices(n33.bones[o12].matrixWorld, n33.boneInverses[o12]), t19.addScaledVector(f0.copy(gc).applyMatrix4(yc), r24);
      }
    }
    return t19.applyMatrix4(this.bindMatrixInverse);
  }
  boneTransform(e11, t19) {
    return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."), this.applyBoneTransform(e11, t19);
  }
};
var Ua = class extends _t3 {
  constructor() {
    super(), this.isBone = true, this.type = "Bone";
  }
};
var wu = class extends jt4 {
  constructor(e11 = null, t19 = 1, n33 = 1, i27, s18, r24, o12, c27, l25 = Bt3, u35 = Bt3, h26, d34) {
    super(null, r24, o12, c27, l25, u35, i27, s18, h26, d34), this.isDataTexture = true, this.image = { data: e11, width: t19, height: n33 }, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1;
  }
};
var vc = new Ve4();
var p0 = new Ve4();
var po = class _po {
  constructor(e11 = [], t19 = []) {
    this.uuid = Sn3(), this.bones = e11.slice(0), this.boneInverses = t19, this.boneMatrices = null, this.boneTexture = null, this.boneTextureSize = 0, this.frame = -1, this.init();
  }
  init() {
    const e11 = this.bones, t19 = this.boneInverses;
    if (this.boneMatrices = new Float32Array(e11.length * 16), t19.length === 0)
      this.calculateInverses();
    else if (e11.length !== t19.length) {
      console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."), this.boneInverses = [];
      for (let n33 = 0, i27 = this.bones.length; n33 < i27; n33++)
        this.boneInverses.push(new Ve4());
    }
  }
  calculateInverses() {
    this.boneInverses.length = 0;
    for (let e11 = 0, t19 = this.bones.length; e11 < t19; e11++) {
      const n33 = new Ve4();
      this.bones[e11] && n33.copy(this.bones[e11].matrixWorld).invert(), this.boneInverses.push(n33);
    }
  }
  pose() {
    for (let e11 = 0, t19 = this.bones.length; e11 < t19; e11++) {
      const n33 = this.bones[e11];
      n33 && n33.matrixWorld.copy(this.boneInverses[e11]).invert();
    }
    for (let e11 = 0, t19 = this.bones.length; e11 < t19; e11++) {
      const n33 = this.bones[e11];
      n33 && (n33.parent && n33.parent.isBone ? (n33.matrix.copy(n33.parent.matrixWorld).invert(), n33.matrix.multiply(n33.matrixWorld)) : n33.matrix.copy(n33.matrixWorld), n33.matrix.decompose(n33.position, n33.quaternion, n33.scale));
    }
  }
  update() {
    const e11 = this.bones, t19 = this.boneInverses, n33 = this.boneMatrices, i27 = this.boneTexture;
    for (let s18 = 0, r24 = e11.length; s18 < r24; s18++) {
      const o12 = e11[s18] ? e11[s18].matrixWorld : p0;
      vc.multiplyMatrices(o12, t19[s18]), vc.toArray(n33, s18 * 16);
    }
    i27 !== null && (i27.needsUpdate = true);
  }
  clone() {
    return new _po(this.bones, this.boneInverses);
  }
  computeBoneTexture() {
    let e11 = Math.sqrt(this.bones.length * 4);
    e11 = ru(e11), e11 = Math.max(e11, 4);
    const t19 = new Float32Array(e11 * e11 * 4);
    t19.set(this.boneMatrices);
    const n33 = new wu(t19, e11, e11, pn3, ai3);
    return n33.needsUpdate = true, this.boneMatrices = t19, this.boneTexture = n33, this.boneTextureSize = e11, this;
  }
  getBoneByName(e11) {
    for (let t19 = 0, n33 = this.bones.length; t19 < n33; t19++) {
      const i27 = this.bones[t19];
      if (i27.name === e11)
        return i27;
    }
  }
  dispose() {
    this.boneTexture !== null && (this.boneTexture.dispose(), this.boneTexture = null);
  }
  fromJSON(e11, t19) {
    this.uuid = e11.uuid;
    for (let n33 = 0, i27 = e11.bones.length; n33 < i27; n33++) {
      const s18 = e11.bones[n33];
      let r24 = t19[s18];
      r24 === void 0 && (console.warn("THREE.Skeleton: No bone found with UUID:", s18), r24 = new Ua()), this.bones.push(r24), this.boneInverses.push(new Ve4().fromArray(e11.boneInverses[n33]));
    }
    return this.init(), this;
  }
  toJSON() {
    const e11 = {
      metadata: {
        version: 4.5,
        type: "Skeleton",
        generator: "Skeleton.toJSON"
      },
      bones: [],
      boneInverses: []
    };
    e11.uuid = this.uuid;
    const t19 = this.bones, n33 = this.boneInverses;
    for (let i27 = 0, s18 = t19.length; i27 < s18; i27++) {
      const r24 = t19[i27];
      e11.bones.push(r24.uuid);
      const o12 = n33[i27];
      e11.boneInverses.push(o12.toArray());
    }
    return e11;
  }
};
var bc = class extends Gt3 {
  constructor(e11, t19, n33, i27 = 1) {
    super(e11, t19, n33), this.isInstancedBufferAttribute = true, this.meshPerAttribute = i27;
  }
  copy(e11) {
    return super.copy(e11), this.meshPerAttribute = e11.meshPerAttribute, this;
  }
  toJSON() {
    const e11 = super.toJSON();
    return e11.meshPerAttribute = this.meshPerAttribute, e11.isInstancedBufferAttribute = true, e11;
  }
};
var hs = new Ve4();
var Mc = new Ve4();
var Br3 = [];
var Sc = new qn3();
var m0 = new Ve4();
var Hs = new Pt4();
var Ws = new Xn3();
var g0 = class extends Pt4 {
  constructor(e11, t19, n33) {
    super(e11, t19), this.isInstancedMesh = true, this.instanceMatrix = new bc(new Float32Array(n33 * 16), 16), this.instanceColor = null, this.count = n33, this.boundingBox = null, this.boundingSphere = null;
    for (let i27 = 0; i27 < n33; i27++)
      this.setMatrixAt(i27, m0);
  }
  computeBoundingBox() {
    const e11 = this.geometry, t19 = this.count;
    this.boundingBox === null && (this.boundingBox = new qn3()), e11.boundingBox === null && e11.computeBoundingBox(), this.boundingBox.makeEmpty();
    for (let n33 = 0; n33 < t19; n33++)
      this.getMatrixAt(n33, hs), Sc.copy(e11.boundingBox).applyMatrix4(hs), this.boundingBox.union(Sc);
  }
  computeBoundingSphere() {
    const e11 = this.geometry, t19 = this.count;
    this.boundingSphere === null && (this.boundingSphere = new Xn3()), e11.boundingSphere === null && e11.computeBoundingSphere(), this.boundingSphere.makeEmpty();
    for (let n33 = 0; n33 < t19; n33++)
      this.getMatrixAt(n33, hs), Ws.copy(e11.boundingSphere).applyMatrix4(hs), this.boundingSphere.union(Ws);
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.instanceMatrix.copy(e11.instanceMatrix), e11.instanceColor !== null && (this.instanceColor = e11.instanceColor.clone()), this.count = e11.count, this;
  }
  getColorAt(e11, t19) {
    t19.fromArray(this.instanceColor.array, e11 * 3);
  }
  getMatrixAt(e11, t19) {
    t19.fromArray(this.instanceMatrix.array, e11 * 16);
  }
  raycast(e11, t19) {
    const n33 = this.matrixWorld, i27 = this.count;
    if (Hs.geometry = this.geometry, Hs.material = this.material, Hs.material !== void 0 && (this.boundingSphere === null && this.computeBoundingSphere(), Ws.copy(this.boundingSphere), Ws.applyMatrix4(n33), e11.ray.intersectsSphere(Ws) !== false))
      for (let s18 = 0; s18 < i27; s18++) {
        this.getMatrixAt(s18, hs), Mc.multiplyMatrices(n33, hs), Hs.matrixWorld = Mc, Hs.raycast(e11, Br3);
        for (let r24 = 0, o12 = Br3.length; r24 < o12; r24++) {
          const c27 = Br3[r24];
          c27.instanceId = s18, c27.object = this, t19.push(c27);
        }
        Br3.length = 0;
      }
  }
  setColorAt(e11, t19) {
    this.instanceColor === null && (this.instanceColor = new bc(new Float32Array(this.instanceMatrix.count * 3), 3)), t19.toArray(this.instanceColor.array, e11 * 3);
  }
  setMatrixAt(e11, t19) {
    t19.toArray(this.instanceMatrix.array, e11 * 16);
  }
  updateMorphTargets() {
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
};
var Ls = class extends mn3 {
  constructor(e11) {
    super(), this.isLineBasicMaterial = true, this.type = "LineBasicMaterial", this.color = new ze4(16777215), this.map = null, this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.linewidth = e11.linewidth, this.linecap = e11.linecap, this.linejoin = e11.linejoin, this.fog = e11.fog, this;
  }
};
var wc = new U7();
var Tc = new U7();
var Ac = new Ve4();
var ta = new La();
var Vr3 = new Xn3();
var cr3 = class extends _t3 {
  constructor(e11 = new Xt3(), t19 = new Ls()) {
    super(), this.isLine = true, this.type = "Line", this.geometry = e11, this.material = t19, this.updateMorphTargets();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.material = e11.material, this.geometry = e11.geometry, this;
  }
  computeLineDistances() {
    const e11 = this.geometry;
    if (e11.index === null) {
      const t19 = e11.attributes.position, n33 = [0];
      for (let i27 = 1, s18 = t19.count; i27 < s18; i27++)
        wc.fromBufferAttribute(t19, i27 - 1), Tc.fromBufferAttribute(t19, i27), n33[i27] = n33[i27 - 1], n33[i27] += wc.distanceTo(Tc);
      e11.setAttribute("lineDistance", new yt7(n33, 1));
    } else
      console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
    return this;
  }
  raycast(e11, t19) {
    const n33 = this.geometry, i27 = this.matrixWorld, s18 = e11.params.Line.threshold, r24 = n33.drawRange;
    if (n33.boundingSphere === null && n33.computeBoundingSphere(), Vr3.copy(n33.boundingSphere), Vr3.applyMatrix4(i27), Vr3.radius += s18, e11.ray.intersectsSphere(Vr3) === false)
      return;
    Ac.copy(i27).invert(), ta.copy(e11.ray).applyMatrix4(Ac);
    const o12 = s18 / ((this.scale.x + this.scale.y + this.scale.z) / 3), c27 = o12 * o12, l25 = new U7(), u35 = new U7(), h26 = new U7(), d34 = new U7(), p26 = this.isLineSegments ? 2 : 1, g31 = n33.index, m33 = n33.attributes.position;
    if (g31 !== null) {
      const f39 = Math.max(0, r24.start), E24 = Math.min(g31.count, r24.start + r24.count);
      for (let b33 = f39, w29 = E24 - 1; b33 < w29; b33 += p26) {
        const S21 = g31.getX(b33), D17 = g31.getX(b33 + 1);
        if (l25.fromBufferAttribute(m33, S21), u35.fromBufferAttribute(m33, D17), ta.distanceSqToSegment(l25, u35, d34, h26) > c27)
          continue;
        d34.applyMatrix4(this.matrixWorld);
        const I16 = e11.ray.origin.distanceTo(d34);
        I16 < e11.near || I16 > e11.far || t19.push({
          distance: I16,
          // What do we want? intersection point on the ray or on the segment??
          // point: raycaster.ray.at( distance ),
          point: h26.clone().applyMatrix4(this.matrixWorld),
          index: b33,
          face: null,
          faceIndex: null,
          object: this
        });
      }
    } else {
      const f39 = Math.max(0, r24.start), E24 = Math.min(m33.count, r24.start + r24.count);
      for (let b33 = f39, w29 = E24 - 1; b33 < w29; b33 += p26) {
        if (l25.fromBufferAttribute(m33, b33), u35.fromBufferAttribute(m33, b33 + 1), ta.distanceSqToSegment(l25, u35, d34, h26) > c27)
          continue;
        d34.applyMatrix4(this.matrixWorld);
        const D17 = e11.ray.origin.distanceTo(d34);
        D17 < e11.near || D17 > e11.far || t19.push({
          distance: D17,
          // What do we want? intersection point on the ray or on the segment??
          // point: raycaster.ray.at( distance ),
          point: h26.clone().applyMatrix4(this.matrixWorld),
          index: b33,
          face: null,
          faceIndex: null,
          object: this
        });
      }
    }
  }
  updateMorphTargets() {
    const t19 = this.geometry.morphAttributes, n33 = Object.keys(t19);
    if (n33.length > 0) {
      const i27 = t19[n33[0]];
      if (i27 !== void 0) {
        this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (let s18 = 0, r24 = i27.length; s18 < r24; s18++) {
          const o12 = i27[s18].name || String(s18);
          this.morphTargetInfluences.push(0), this.morphTargetDictionary[o12] = s18;
        }
      }
    }
  }
};
var Ec = new U7();
var Cc = new U7();
var ka = class extends cr3 {
  constructor(e11, t19) {
    super(e11, t19), this.isLineSegments = true, this.type = "LineSegments";
  }
  computeLineDistances() {
    const e11 = this.geometry;
    if (e11.index === null) {
      const t19 = e11.attributes.position, n33 = [];
      for (let i27 = 0, s18 = t19.count; i27 < s18; i27 += 2)
        Ec.fromBufferAttribute(t19, i27), Cc.fromBufferAttribute(t19, i27 + 1), n33[i27] = i27 === 0 ? 0 : n33[i27 - 1], n33[i27 + 1] = n33[i27] + Ec.distanceTo(Cc);
      e11.setAttribute("lineDistance", new yt7(n33, 1));
    } else
      console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
    return this;
  }
};
var _0 = class extends cr3 {
  constructor(e11, t19) {
    super(e11, t19), this.isLineLoop = true, this.type = "LineLoop";
  }
};
var Tu = class extends mn3 {
  constructor(e11) {
    super(), this.isPointsMaterial = true, this.type = "PointsMaterial", this.color = new ze4(16777215), this.map = null, this.alphaMap = null, this.size = 1, this.sizeAttenuation = true, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.alphaMap = e11.alphaMap, this.size = e11.size, this.sizeAttenuation = e11.sizeAttenuation, this.fog = e11.fog, this;
  }
};
var Lc = new Ve4();
var va = new La();
var Gr3 = new Xn3();
var Hr3 = new U7();
var x0 = class extends _t3 {
  constructor(e11 = new Xt3(), t19 = new Tu()) {
    super(), this.isPoints = true, this.type = "Points", this.geometry = e11, this.material = t19, this.updateMorphTargets();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.material = e11.material, this.geometry = e11.geometry, this;
  }
  raycast(e11, t19) {
    const n33 = this.geometry, i27 = this.matrixWorld, s18 = e11.params.Points.threshold, r24 = n33.drawRange;
    if (n33.boundingSphere === null && n33.computeBoundingSphere(), Gr3.copy(n33.boundingSphere), Gr3.applyMatrix4(i27), Gr3.radius += s18, e11.ray.intersectsSphere(Gr3) === false)
      return;
    Lc.copy(i27).invert(), va.copy(e11.ray).applyMatrix4(Lc);
    const o12 = s18 / ((this.scale.x + this.scale.y + this.scale.z) / 3), c27 = o12 * o12, l25 = n33.index, h26 = n33.attributes.position;
    if (l25 !== null) {
      const d34 = Math.max(0, r24.start), p26 = Math.min(l25.count, r24.start + r24.count);
      for (let g31 = d34, y33 = p26; g31 < y33; g31++) {
        const m33 = l25.getX(g31);
        Hr3.fromBufferAttribute(h26, m33), Rc(Hr3, m33, c27, i27, e11, t19, this);
      }
    } else {
      const d34 = Math.max(0, r24.start), p26 = Math.min(h26.count, r24.start + r24.count);
      for (let g31 = d34, y33 = p26; g31 < y33; g31++)
        Hr3.fromBufferAttribute(h26, g31), Rc(Hr3, g31, c27, i27, e11, t19, this);
    }
  }
  updateMorphTargets() {
    const t19 = this.geometry.morphAttributes, n33 = Object.keys(t19);
    if (n33.length > 0) {
      const i27 = t19[n33[0]];
      if (i27 !== void 0) {
        this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (let s18 = 0, r24 = i27.length; s18 < r24; s18++) {
          const o12 = i27[s18].name || String(s18);
          this.morphTargetInfluences.push(0), this.morphTargetDictionary[o12] = s18;
        }
      }
    }
  }
};
function Rc(a22, e11, t19, n33, i27, s18, r24) {
  const o12 = va.distanceSqToPoint(a22);
  if (o12 < t19) {
    const c27 = new U7();
    va.closestPointToPoint(a22, c27), c27.applyMatrix4(n33);
    const l25 = i27.ray.origin.distanceTo(c27);
    if (l25 < i27.near || l25 > i27.far)
      return;
    s18.push({
      distance: l25,
      distanceToRay: Math.sqrt(o12),
      point: c27,
      index: e11,
      face: null,
      object: r24
    });
  }
}
var mo = class _mo extends Xt3 {
  constructor(e11 = 1, t19 = 1, n33 = 1, i27 = 32, s18 = 1, r24 = false, o12 = 0, c27 = Math.PI * 2) {
    super(), this.type = "CylinderGeometry", this.parameters = {
      radiusTop: e11,
      radiusBottom: t19,
      height: n33,
      radialSegments: i27,
      heightSegments: s18,
      openEnded: r24,
      thetaStart: o12,
      thetaLength: c27
    };
    const l25 = this;
    i27 = Math.floor(i27), s18 = Math.floor(s18);
    const u35 = [], h26 = [], d34 = [], p26 = [];
    let g31 = 0;
    const y33 = [], m33 = n33 / 2;
    let f39 = 0;
    E24(), r24 === false && (e11 > 0 && b33(true), t19 > 0 && b33(false)), this.setIndex(u35), this.setAttribute("position", new yt7(h26, 3)), this.setAttribute("normal", new yt7(d34, 3)), this.setAttribute("uv", new yt7(p26, 2));
    function E24() {
      const w29 = new U7(), S21 = new U7();
      let D17 = 0;
      const N19 = (t19 - e11) / n33;
      for (let I16 = 0; I16 <= s18; I16++) {
        const v30 = [], L11 = I16 / s18, G15 = L11 * (t19 - e11) + e11;
        for (let B21 = 0; B21 <= i27; B21++) {
          const k27 = B21 / i27, V14 = k27 * c27 + o12, H15 = Math.sin(V14), W8 = Math.cos(V14);
          S21.x = G15 * H15, S21.y = -L11 * n33 + m33, S21.z = G15 * W8, h26.push(S21.x, S21.y, S21.z), w29.set(H15, N19, W8).normalize(), d34.push(w29.x, w29.y, w29.z), p26.push(k27, 1 - L11), v30.push(g31++);
        }
        y33.push(v30);
      }
      for (let I16 = 0; I16 < i27; I16++)
        for (let v30 = 0; v30 < s18; v30++) {
          const L11 = y33[v30][I16], G15 = y33[v30 + 1][I16], B21 = y33[v30 + 1][I16 + 1], k27 = y33[v30][I16 + 1];
          u35.push(L11, G15, k27), u35.push(G15, B21, k27), D17 += 6;
        }
      l25.addGroup(f39, D17, 0), f39 += D17;
    }
    function b33(w29) {
      const S21 = g31, D17 = new We4(), N19 = new U7();
      let I16 = 0;
      const v30 = w29 === true ? e11 : t19, L11 = w29 === true ? 1 : -1;
      for (let B21 = 1; B21 <= i27; B21++)
        h26.push(0, m33 * L11, 0), d34.push(0, L11, 0), p26.push(0.5, 0.5), g31++;
      const G15 = g31;
      for (let B21 = 0; B21 <= i27; B21++) {
        const V14 = B21 / i27 * c27 + o12, H15 = Math.cos(V14), W8 = Math.sin(V14);
        N19.x = v30 * W8, N19.y = m33 * L11, N19.z = v30 * H15, h26.push(N19.x, N19.y, N19.z), d34.push(0, L11, 0), D17.x = H15 * 0.5 + 0.5, D17.y = W8 * 0.5 * L11 + 0.5, p26.push(D17.x, D17.y), g31++;
      }
      for (let B21 = 0; B21 < i27; B21++) {
        const k27 = S21 + B21, V14 = G15 + B21;
        w29 === true ? u35.push(V14, V14 + 1, k27) : u35.push(V14 + 1, V14, k27), I16 += 3;
      }
      l25.addGroup(f39, I16, w29 === true ? 1 : 2), f39 += I16;
    }
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _mo(e11.radiusTop, e11.radiusBottom, e11.height, e11.radialSegments, e11.heightSegments, e11.openEnded, e11.thetaStart, e11.thetaLength);
  }
};
var Wr3 = new U7();
var jr3 = new U7();
var na = new U7();
var qr3 = new dn3();
var y0 = class extends Xt3 {
  constructor(e11 = null, t19 = 1) {
    if (super(), this.type = "EdgesGeometry", this.parameters = {
      geometry: e11,
      thresholdAngle: t19
    }, e11 !== null) {
      const i27 = Math.pow(10, 4), s18 = Math.cos(xs * t19), r24 = e11.getIndex(), o12 = e11.getAttribute("position"), c27 = r24 ? r24.count : o12.count, l25 = [0, 0, 0], u35 = ["a", "b", "c"], h26 = new Array(3), d34 = {}, p26 = [];
      for (let g31 = 0; g31 < c27; g31 += 3) {
        r24 ? (l25[0] = r24.getX(g31), l25[1] = r24.getX(g31 + 1), l25[2] = r24.getX(g31 + 2)) : (l25[0] = g31, l25[1] = g31 + 1, l25[2] = g31 + 2);
        const { a: y33, b: m33, c: f39 } = qr3;
        if (y33.fromBufferAttribute(o12, l25[0]), m33.fromBufferAttribute(o12, l25[1]), f39.fromBufferAttribute(o12, l25[2]), qr3.getNormal(na), h26[0] = `${Math.round(y33.x * i27)},${Math.round(y33.y * i27)},${Math.round(y33.z * i27)}`, h26[1] = `${Math.round(m33.x * i27)},${Math.round(m33.y * i27)},${Math.round(m33.z * i27)}`, h26[2] = `${Math.round(f39.x * i27)},${Math.round(f39.y * i27)},${Math.round(f39.z * i27)}`, !(h26[0] === h26[1] || h26[1] === h26[2] || h26[2] === h26[0]))
          for (let E24 = 0; E24 < 3; E24++) {
            const b33 = (E24 + 1) % 3, w29 = h26[E24], S21 = h26[b33], D17 = qr3[u35[E24]], N19 = qr3[u35[b33]], I16 = `${w29}_${S21}`, v30 = `${S21}_${w29}`;
            v30 in d34 && d34[v30] ? (na.dot(d34[v30].normal) <= s18 && (p26.push(D17.x, D17.y, D17.z), p26.push(N19.x, N19.y, N19.z)), d34[v30] = null) : I16 in d34 || (d34[I16] = {
              index0: l25[E24],
              index1: l25[b33],
              normal: na.clone()
            });
          }
      }
      for (const g31 in d34)
        if (d34[g31]) {
          const { index0: y33, index1: m33 } = d34[g31];
          Wr3.fromBufferAttribute(o12, y33), jr3.fromBufferAttribute(o12, m33), p26.push(Wr3.x, Wr3.y, Wr3.z), p26.push(jr3.x, jr3.y, jr3.z);
        }
      this.setAttribute("position", new yt7(p26, 3));
    }
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
};
var Oa = class _Oa extends Xt3 {
  constructor(e11 = 1, t19 = 32, n33 = 16, i27 = 0, s18 = Math.PI * 2, r24 = 0, o12 = Math.PI) {
    super(), this.type = "SphereGeometry", this.parameters = {
      radius: e11,
      widthSegments: t19,
      heightSegments: n33,
      phiStart: i27,
      phiLength: s18,
      thetaStart: r24,
      thetaLength: o12
    }, t19 = Math.max(3, Math.floor(t19)), n33 = Math.max(2, Math.floor(n33));
    const c27 = Math.min(r24 + o12, Math.PI);
    let l25 = 0;
    const u35 = [], h26 = new U7(), d34 = new U7(), p26 = [], g31 = [], y33 = [], m33 = [];
    for (let f39 = 0; f39 <= n33; f39++) {
      const E24 = [], b33 = f39 / n33;
      let w29 = 0;
      f39 === 0 && r24 === 0 ? w29 = 0.5 / t19 : f39 === n33 && c27 === Math.PI && (w29 = -0.5 / t19);
      for (let S21 = 0; S21 <= t19; S21++) {
        const D17 = S21 / t19;
        h26.x = -e11 * Math.cos(i27 + D17 * s18) * Math.sin(r24 + b33 * o12), h26.y = e11 * Math.cos(r24 + b33 * o12), h26.z = e11 * Math.sin(i27 + D17 * s18) * Math.sin(r24 + b33 * o12), g31.push(h26.x, h26.y, h26.z), d34.copy(h26).normalize(), y33.push(d34.x, d34.y, d34.z), m33.push(D17 + w29, 1 - b33), E24.push(l25++);
      }
      u35.push(E24);
    }
    for (let f39 = 0; f39 < n33; f39++)
      for (let E24 = 0; E24 < t19; E24++) {
        const b33 = u35[f39][E24 + 1], w29 = u35[f39][E24], S21 = u35[f39 + 1][E24], D17 = u35[f39 + 1][E24 + 1];
        (f39 !== 0 || r24 > 0) && p26.push(b33, w29, D17), (f39 !== n33 - 1 || c27 < Math.PI) && p26.push(w29, S21, D17);
      }
    this.setIndex(p26), this.setAttribute("position", new yt7(g31, 3)), this.setAttribute("normal", new yt7(y33, 3)), this.setAttribute("uv", new yt7(m33, 2));
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _Oa(e11.radius, e11.widthSegments, e11.heightSegments, e11.phiStart, e11.phiLength, e11.thetaStart, e11.thetaLength);
  }
};
var ur3 = class extends mn3 {
  constructor(e11) {
    super(), this.isMeshStandardMaterial = true, this.defines = { STANDARD: "" }, this.type = "MeshStandardMaterial", this.color = new ze4(16777215), this.roughness = 1, this.metalness = 0, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new ze4(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = co, this.normalScale = new We4(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.roughnessMap = null, this.metalnessMap = null, this.alphaMap = null, this.envMap = null, this.envMapIntensity = 1, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.flatShading = false, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.defines = { STANDARD: "" }, this.color.copy(e11.color), this.roughness = e11.roughness, this.metalness = e11.metalness, this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.emissive.copy(e11.emissive), this.emissiveMap = e11.emissiveMap, this.emissiveIntensity = e11.emissiveIntensity, this.bumpMap = e11.bumpMap, this.bumpScale = e11.bumpScale, this.normalMap = e11.normalMap, this.normalMapType = e11.normalMapType, this.normalScale.copy(e11.normalScale), this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.roughnessMap = e11.roughnessMap, this.metalnessMap = e11.metalnessMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.envMapIntensity = e11.envMapIntensity, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.flatShading = e11.flatShading, this.fog = e11.fog, this;
  }
};
var ki3 = class extends ur3 {
  constructor(e11) {
    super(), this.isMeshPhysicalMaterial = true, this.defines = {
      STANDARD: "",
      PHYSICAL: ""
    }, this.type = "MeshPhysicalMaterial", this.clearcoatMap = null, this.clearcoatRoughness = 0, this.clearcoatRoughnessMap = null, this.clearcoatNormalScale = new We4(1, 1), this.clearcoatNormalMap = null, this.ior = 1.5, Object.defineProperty(this, "reflectivity", {
      get: function() {
        return Wt4(2.5 * (this.ior - 1) / (this.ior + 1), 0, 1);
      },
      set: function(t19) {
        this.ior = (1 + 0.4 * t19) / (1 - 0.4 * t19);
      }
    }), this.iridescenceMap = null, this.iridescenceIOR = 1.3, this.iridescenceThicknessRange = [100, 400], this.iridescenceThicknessMap = null, this.sheenColor = new ze4(0), this.sheenColorMap = null, this.sheenRoughness = 1, this.sheenRoughnessMap = null, this.transmissionMap = null, this.thickness = 0, this.thicknessMap = null, this.attenuationDistance = 1 / 0, this.attenuationColor = new ze4(1, 1, 1), this.specularIntensity = 1, this.specularIntensityMap = null, this.specularColor = new ze4(1, 1, 1), this.specularColorMap = null, this._sheen = 0, this._clearcoat = 0, this._iridescence = 0, this._transmission = 0, this.setValues(e11);
  }
  get sheen() {
    return this._sheen;
  }
  set sheen(e11) {
    this._sheen > 0 != e11 > 0 && this.version++, this._sheen = e11;
  }
  get clearcoat() {
    return this._clearcoat;
  }
  set clearcoat(e11) {
    this._clearcoat > 0 != e11 > 0 && this.version++, this._clearcoat = e11;
  }
  get iridescence() {
    return this._iridescence;
  }
  set iridescence(e11) {
    this._iridescence > 0 != e11 > 0 && this.version++, this._iridescence = e11;
  }
  get transmission() {
    return this._transmission;
  }
  set transmission(e11) {
    this._transmission > 0 != e11 > 0 && this.version++, this._transmission = e11;
  }
  copy(e11) {
    return super.copy(e11), this.defines = {
      STANDARD: "",
      PHYSICAL: ""
    }, this.clearcoat = e11.clearcoat, this.clearcoatMap = e11.clearcoatMap, this.clearcoatRoughness = e11.clearcoatRoughness, this.clearcoatRoughnessMap = e11.clearcoatRoughnessMap, this.clearcoatNormalMap = e11.clearcoatNormalMap, this.clearcoatNormalScale.copy(e11.clearcoatNormalScale), this.ior = e11.ior, this.iridescence = e11.iridescence, this.iridescenceMap = e11.iridescenceMap, this.iridescenceIOR = e11.iridescenceIOR, this.iridescenceThicknessRange = [...e11.iridescenceThicknessRange], this.iridescenceThicknessMap = e11.iridescenceThicknessMap, this.sheen = e11.sheen, this.sheenColor.copy(e11.sheenColor), this.sheenColorMap = e11.sheenColorMap, this.sheenRoughness = e11.sheenRoughness, this.sheenRoughnessMap = e11.sheenRoughnessMap, this.transmission = e11.transmission, this.transmissionMap = e11.transmissionMap, this.thickness = e11.thickness, this.thicknessMap = e11.thicknessMap, this.attenuationDistance = e11.attenuationDistance, this.attenuationColor.copy(e11.attenuationColor), this.specularIntensity = e11.specularIntensity, this.specularIntensityMap = e11.specularIntensityMap, this.specularColor.copy(e11.specularColor), this.specularColorMap = e11.specularColorMap, this;
  }
};
var Zs = class extends mn3 {
  constructor(e11) {
    super(), this.isMeshPhongMaterial = true, this.type = "MeshPhongMaterial", this.color = new ze4(16777215), this.specular = new ze4(1118481), this.shininess = 30, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new ze4(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = co, this.normalScale = new We4(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = ao, this.reflectivity = 1, this.refractionRatio = 0.98, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.flatShading = false, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.specular.copy(e11.specular), this.shininess = e11.shininess, this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.emissive.copy(e11.emissive), this.emissiveMap = e11.emissiveMap, this.emissiveIntensity = e11.emissiveIntensity, this.bumpMap = e11.bumpMap, this.bumpScale = e11.bumpScale, this.normalMap = e11.normalMap, this.normalMapType = e11.normalMapType, this.normalScale.copy(e11.normalScale), this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.specularMap = e11.specularMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.combine = e11.combine, this.reflectivity = e11.reflectivity, this.refractionRatio = e11.refractionRatio, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.flatShading = e11.flatShading, this.fog = e11.fog, this;
  }
};
var v0 = class extends mn3 {
  constructor(e11) {
    super(), this.isMeshLambertMaterial = true, this.type = "MeshLambertMaterial", this.color = new ze4(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new ze4(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = co, this.normalScale = new We4(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = ao, this.reflectivity = 1, this.refractionRatio = 0.98, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.flatShading = false, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.emissive.copy(e11.emissive), this.emissiveMap = e11.emissiveMap, this.emissiveIntensity = e11.emissiveIntensity, this.bumpMap = e11.bumpMap, this.bumpScale = e11.bumpScale, this.normalMap = e11.normalMap, this.normalMapType = e11.normalMapType, this.normalScale.copy(e11.normalScale), this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.specularMap = e11.specularMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.combine = e11.combine, this.reflectivity = e11.reflectivity, this.refractionRatio = e11.refractionRatio, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.flatShading = e11.flatShading, this.fog = e11.fog, this;
  }
};
function ei3(a22, e11, t19) {
  return Au(a22) ? new a22.constructor(a22.subarray(e11, t19 !== void 0 ? t19 : a22.length)) : a22.slice(e11, t19);
}
function Xr3(a22, e11, t19) {
  return !a22 || // let 'undefined' and 'null' pass
  !t19 && a22.constructor === e11 ? a22 : typeof e11.BYTES_PER_ELEMENT == "number" ? new e11(a22) : Array.prototype.slice.call(a22);
}
function Au(a22) {
  return ArrayBuffer.isView(a22) && !(a22 instanceof DataView);
}
function b0(a22) {
  function e11(i27, s18) {
    return a22[i27] - a22[s18];
  }
  const t19 = a22.length, n33 = new Array(t19);
  for (let i27 = 0; i27 !== t19; ++i27)
    n33[i27] = i27;
  return n33.sort(e11), n33;
}
function Pc(a22, e11, t19) {
  const n33 = a22.length, i27 = new a22.constructor(n33);
  for (let s18 = 0, r24 = 0; r24 !== n33; ++s18) {
    const o12 = t19[s18] * e11;
    for (let c27 = 0; c27 !== e11; ++c27)
      i27[r24++] = a22[o12 + c27];
  }
  return i27;
}
function Eu(a22, e11, t19, n33) {
  let i27 = 1, s18 = a22[0];
  for (; s18 !== void 0 && s18[n33] === void 0; )
    s18 = a22[i27++];
  if (s18 === void 0)
    return;
  let r24 = s18[n33];
  if (r24 !== void 0)
    if (Array.isArray(r24))
      do
        r24 = s18[n33], r24 !== void 0 && (e11.push(s18.time), t19.push.apply(t19, r24)), s18 = a22[i27++];
      while (s18 !== void 0);
    else if (r24.toArray !== void 0)
      do
        r24 = s18[n33], r24 !== void 0 && (e11.push(s18.time), r24.toArray(t19, t19.length)), s18 = a22[i27++];
      while (s18 !== void 0);
    else
      do
        r24 = s18[n33], r24 !== void 0 && (e11.push(s18.time), t19.push(r24)), s18 = a22[i27++];
      while (s18 !== void 0);
}
var hr3 = class {
  constructor(e11, t19, n33, i27) {
    this.parameterPositions = e11, this._cachedIndex = 0, this.resultBuffer = i27 !== void 0 ? i27 : new t19.constructor(n33), this.sampleValues = t19, this.valueSize = n33, this.settings = null, this.DefaultSettings_ = {};
  }
  evaluate(e11) {
    const t19 = this.parameterPositions;
    let n33 = this._cachedIndex, i27 = t19[n33], s18 = t19[n33 - 1];
    n: {
      e: {
        let r24;
        t: {
          i:
            if (!(e11 < i27)) {
              for (let o12 = n33 + 2; ; ) {
                if (i27 === void 0) {
                  if (e11 < s18)
                    break i;
                  return n33 = t19.length, this._cachedIndex = n33, this.copySampleValue_(n33 - 1);
                }
                if (n33 === o12)
                  break;
                if (s18 = i27, i27 = t19[++n33], e11 < i27)
                  break e;
              }
              r24 = t19.length;
              break t;
            }
          if (!(e11 >= s18)) {
            const o12 = t19[1];
            e11 < o12 && (n33 = 2, s18 = o12);
            for (let c27 = n33 - 2; ; ) {
              if (s18 === void 0)
                return this._cachedIndex = 0, this.copySampleValue_(0);
              if (n33 === c27)
                break;
              if (i27 = s18, s18 = t19[--n33 - 1], e11 >= s18)
                break e;
            }
            r24 = n33, n33 = 0;
            break t;
          }
          break n;
        }
        for (; n33 < r24; ) {
          const o12 = n33 + r24 >>> 1;
          e11 < t19[o12] ? r24 = o12 : n33 = o12 + 1;
        }
        if (i27 = t19[n33], s18 = t19[n33 - 1], s18 === void 0)
          return this._cachedIndex = 0, this.copySampleValue_(0);
        if (i27 === void 0)
          return n33 = t19.length, this._cachedIndex = n33, this.copySampleValue_(n33 - 1);
      }
      this._cachedIndex = n33, this.intervalChanged_(n33, s18, i27);
    }
    return this.interpolate_(n33, s18, e11, i27);
  }
  getSettings_() {
    return this.settings || this.DefaultSettings_;
  }
  copySampleValue_(e11) {
    const t19 = this.resultBuffer, n33 = this.sampleValues, i27 = this.valueSize, s18 = e11 * i27;
    for (let r24 = 0; r24 !== i27; ++r24)
      t19[r24] = n33[s18 + r24];
    return t19;
  }
  // Template methods for derived classes:
  interpolate_() {
    throw new Error("call to abstract method");
  }
  intervalChanged_() {
  }
};
var M0 = class extends hr3 {
  constructor(e11, t19, n33, i27) {
    super(e11, t19, n33, i27), this._weightPrev = -0, this._offsetPrev = -0, this._weightNext = -0, this._offsetNext = -0, this.DefaultSettings_ = {
      endingStart: Ll,
      endingEnd: Ll
    };
  }
  intervalChanged_(e11, t19, n33) {
    const i27 = this.parameterPositions;
    let s18 = e11 - 2, r24 = e11 + 1, o12 = i27[s18], c27 = i27[r24];
    if (o12 === void 0)
      switch (this.getSettings_().endingStart) {
        case Rl:
          s18 = e11, o12 = 2 * t19 - n33;
          break;
        case Pl:
          s18 = i27.length - 2, o12 = t19 + i27[s18] - i27[s18 + 1];
          break;
        default:
          s18 = e11, o12 = n33;
      }
    if (c27 === void 0)
      switch (this.getSettings_().endingEnd) {
        case Rl:
          r24 = e11, c27 = 2 * n33 - t19;
          break;
        case Pl:
          r24 = 1, c27 = n33 + i27[1] - i27[0];
          break;
        default:
          r24 = e11 - 1, c27 = t19;
      }
    const l25 = (n33 - t19) * 0.5, u35 = this.valueSize;
    this._weightPrev = l25 / (t19 - o12), this._weightNext = l25 / (c27 - n33), this._offsetPrev = s18 * u35, this._offsetNext = r24 * u35;
  }
  interpolate_(e11, t19, n33, i27) {
    const s18 = this.resultBuffer, r24 = this.sampleValues, o12 = this.valueSize, c27 = e11 * o12, l25 = c27 - o12, u35 = this._offsetPrev, h26 = this._offsetNext, d34 = this._weightPrev, p26 = this._weightNext, g31 = (n33 - t19) / (i27 - t19), y33 = g31 * g31, m33 = y33 * g31, f39 = -d34 * m33 + 2 * d34 * y33 - d34 * g31, E24 = (1 + d34) * m33 + (-1.5 - 2 * d34) * y33 + (-0.5 + d34) * g31 + 1, b33 = (-1 - p26) * m33 + (1.5 + p26) * y33 + 0.5 * g31, w29 = p26 * m33 - p26 * y33;
    for (let S21 = 0; S21 !== o12; ++S21)
      s18[S21] = f39 * r24[u35 + S21] + E24 * r24[l25 + S21] + b33 * r24[c27 + S21] + w29 * r24[h26 + S21];
    return s18;
  }
};
var S0 = class extends hr3 {
  constructor(e11, t19, n33, i27) {
    super(e11, t19, n33, i27);
  }
  interpolate_(e11, t19, n33, i27) {
    const s18 = this.resultBuffer, r24 = this.sampleValues, o12 = this.valueSize, c27 = e11 * o12, l25 = c27 - o12, u35 = (n33 - t19) / (i27 - t19), h26 = 1 - u35;
    for (let d34 = 0; d34 !== o12; ++d34)
      s18[d34] = r24[l25 + d34] * h26 + r24[c27 + d34] * u35;
    return s18;
  }
};
var w0 = class extends hr3 {
  constructor(e11, t19, n33, i27) {
    super(e11, t19, n33, i27);
  }
  interpolate_(e11) {
    return this.copySampleValue_(e11 - 1);
  }
};
var In3 = class {
  constructor(e11, t19, n33, i27) {
    if (e11 === void 0)
      throw new Error("THREE.KeyframeTrack: track name is undefined");
    if (t19 === void 0 || t19.length === 0)
      throw new Error("THREE.KeyframeTrack: no keyframes in track named " + e11);
    this.name = e11, this.times = Xr3(t19, this.TimeBufferType), this.values = Xr3(n33, this.ValueBufferType), this.setInterpolation(i27 || this.DefaultInterpolation);
  }
  // Serialization (in static context, because of constructor invocation
  // and automatic invocation of .toJSON):
  static toJSON(e11) {
    const t19 = e11.constructor;
    let n33;
    if (t19.toJSON !== this.toJSON)
      n33 = t19.toJSON(e11);
    else {
      n33 = {
        name: e11.name,
        times: Xr3(e11.times, Array),
        values: Xr3(e11.values, Array)
      };
      const i27 = e11.getInterpolation();
      i27 !== e11.DefaultInterpolation && (n33.interpolation = i27);
    }
    return n33.type = e11.ValueTypeName, n33;
  }
  InterpolantFactoryMethodDiscrete(e11) {
    return new w0(this.times, this.values, this.getValueSize(), e11);
  }
  InterpolantFactoryMethodLinear(e11) {
    return new S0(this.times, this.values, this.getValueSize(), e11);
  }
  InterpolantFactoryMethodSmooth(e11) {
    return new M0(this.times, this.values, this.getValueSize(), e11);
  }
  setInterpolation(e11) {
    let t19;
    switch (e11) {
      case er3:
        t19 = this.InterpolantFactoryMethodDiscrete;
        break;
      case As:
        t19 = this.InterpolantFactoryMethodLinear;
        break;
      case Io:
        t19 = this.InterpolantFactoryMethodSmooth;
        break;
    }
    if (t19 === void 0) {
      const n33 = "unsupported interpolation for " + this.ValueTypeName + " keyframe track named " + this.name;
      if (this.createInterpolant === void 0)
        if (e11 !== this.DefaultInterpolation)
          this.setInterpolation(this.DefaultInterpolation);
        else
          throw new Error(n33);
      return console.warn("THREE.KeyframeTrack:", n33), this;
    }
    return this.createInterpolant = t19, this;
  }
  getInterpolation() {
    switch (this.createInterpolant) {
      case this.InterpolantFactoryMethodDiscrete:
        return er3;
      case this.InterpolantFactoryMethodLinear:
        return As;
      case this.InterpolantFactoryMethodSmooth:
        return Io;
    }
  }
  getValueSize() {
    return this.values.length / this.times.length;
  }
  // move all keyframes either forwards or backwards in time
  shift(e11) {
    if (e11 !== 0) {
      const t19 = this.times;
      for (let n33 = 0, i27 = t19.length; n33 !== i27; ++n33)
        t19[n33] += e11;
    }
    return this;
  }
  // scale all keyframe times by a factor (useful for frame <-> seconds conversions)
  scale(e11) {
    if (e11 !== 1) {
      const t19 = this.times;
      for (let n33 = 0, i27 = t19.length; n33 !== i27; ++n33)
        t19[n33] *= e11;
    }
    return this;
  }
  // removes keyframes before and after animation without changing any values within the range [startTime, endTime].
  // IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values
  trim(e11, t19) {
    const n33 = this.times, i27 = n33.length;
    let s18 = 0, r24 = i27 - 1;
    for (; s18 !== i27 && n33[s18] < e11; )
      ++s18;
    for (; r24 !== -1 && n33[r24] > t19; )
      --r24;
    if (++r24, s18 !== 0 || r24 !== i27) {
      s18 >= r24 && (r24 = Math.max(r24, 1), s18 = r24 - 1);
      const o12 = this.getValueSize();
      this.times = ei3(n33, s18, r24), this.values = ei3(this.values, s18 * o12, r24 * o12);
    }
    return this;
  }
  // ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable
  validate() {
    let e11 = true;
    const t19 = this.getValueSize();
    t19 - Math.floor(t19) !== 0 && (console.error("THREE.KeyframeTrack: Invalid value size in track.", this), e11 = false);
    const n33 = this.times, i27 = this.values, s18 = n33.length;
    s18 === 0 && (console.error("THREE.KeyframeTrack: Track is empty.", this), e11 = false);
    let r24 = null;
    for (let o12 = 0; o12 !== s18; o12++) {
      const c27 = n33[o12];
      if (typeof c27 == "number" && isNaN(c27)) {
        console.error("THREE.KeyframeTrack: Time is not a valid number.", this, o12, c27), e11 = false;
        break;
      }
      if (r24 !== null && r24 > c27) {
        console.error("THREE.KeyframeTrack: Out of order keys.", this, o12, c27, r24), e11 = false;
        break;
      }
      r24 = c27;
    }
    if (i27 !== void 0 && Au(i27))
      for (let o12 = 0, c27 = i27.length; o12 !== c27; ++o12) {
        const l25 = i27[o12];
        if (isNaN(l25)) {
          console.error("THREE.KeyframeTrack: Value is not a valid number.", this, o12, l25), e11 = false;
          break;
        }
      }
    return e11;
  }
  // removes equivalent sequential keys as common in morph target sequences
  // (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)
  optimize() {
    const e11 = ei3(this.times), t19 = ei3(this.values), n33 = this.getValueSize(), i27 = this.getInterpolation() === Io, s18 = e11.length - 1;
    let r24 = 1;
    for (let o12 = 1; o12 < s18; ++o12) {
      let c27 = false;
      const l25 = e11[o12], u35 = e11[o12 + 1];
      if (l25 !== u35 && (o12 !== 1 || l25 !== e11[0]))
        if (i27)
          c27 = true;
        else {
          const h26 = o12 * n33, d34 = h26 - n33, p26 = h26 + n33;
          for (let g31 = 0; g31 !== n33; ++g31) {
            const y33 = t19[h26 + g31];
            if (y33 !== t19[d34 + g31] || y33 !== t19[p26 + g31]) {
              c27 = true;
              break;
            }
          }
        }
      if (c27) {
        if (o12 !== r24) {
          e11[r24] = e11[o12];
          const h26 = o12 * n33, d34 = r24 * n33;
          for (let p26 = 0; p26 !== n33; ++p26)
            t19[d34 + p26] = t19[h26 + p26];
        }
        ++r24;
      }
    }
    if (s18 > 0) {
      e11[r24] = e11[s18];
      for (let o12 = s18 * n33, c27 = r24 * n33, l25 = 0; l25 !== n33; ++l25)
        t19[c27 + l25] = t19[o12 + l25];
      ++r24;
    }
    return r24 !== e11.length ? (this.times = ei3(e11, 0, r24), this.values = ei3(t19, 0, r24 * n33)) : (this.times = e11, this.values = t19), this;
  }
  clone() {
    const e11 = ei3(this.times, 0), t19 = ei3(this.values, 0), n33 = this.constructor, i27 = new n33(this.name, e11, t19);
    return i27.createInterpolant = this.createInterpolant, i27;
  }
};
In3.prototype.TimeBufferType = Float32Array;
In3.prototype.ValueBufferType = Float32Array;
In3.prototype.DefaultInterpolation = As;
var Us = class extends In3 {
};
Us.prototype.ValueTypeName = "bool";
Us.prototype.ValueBufferType = Array;
Us.prototype.DefaultInterpolation = er3;
Us.prototype.InterpolantFactoryMethodLinear = void 0;
Us.prototype.InterpolantFactoryMethodSmooth = void 0;
var Cu = class extends In3 {
};
Cu.prototype.ValueTypeName = "color";
var ir3 = class extends In3 {
};
ir3.prototype.ValueTypeName = "number";
var T0 = class extends hr3 {
  constructor(e11, t19, n33, i27) {
    super(e11, t19, n33, i27);
  }
  interpolate_(e11, t19, n33, i27) {
    const s18 = this.resultBuffer, r24 = this.sampleValues, o12 = this.valueSize, c27 = (n33 - t19) / (i27 - t19);
    let l25 = e11 * o12;
    for (let u35 = l25 + o12; l25 !== u35; l25 += 4)
      qt3.slerpFlat(s18, 0, r24, l25 - o12, r24, l25, c27);
    return s18;
  }
};
var ui3 = class extends In3 {
  InterpolantFactoryMethodLinear(e11) {
    return new T0(this.times, this.values, this.getValueSize(), e11);
  }
};
ui3.prototype.ValueTypeName = "quaternion";
ui3.prototype.DefaultInterpolation = As;
ui3.prototype.InterpolantFactoryMethodSmooth = void 0;
var ks = class extends In3 {
};
ks.prototype.ValueTypeName = "string";
ks.prototype.ValueBufferType = Array;
ks.prototype.DefaultInterpolation = er3;
ks.prototype.InterpolantFactoryMethodLinear = void 0;
ks.prototype.InterpolantFactoryMethodSmooth = void 0;
var Pi = class extends In3 {
};
Pi.prototype.ValueTypeName = "vector";
var ba = class {
  constructor(e11, t19 = -1, n33, i27 = Wh) {
    this.name = e11, this.tracks = n33, this.duration = t19, this.blendMode = i27, this.uuid = Sn3(), this.duration < 0 && this.resetDuration();
  }
  static parse(e11) {
    const t19 = [], n33 = e11.tracks, i27 = 1 / (e11.fps || 1);
    for (let r24 = 0, o12 = n33.length; r24 !== o12; ++r24)
      t19.push(E0(n33[r24]).scale(i27));
    const s18 = new this(e11.name, e11.duration, t19, e11.blendMode);
    return s18.uuid = e11.uuid, s18;
  }
  static toJSON(e11) {
    const t19 = [], n33 = e11.tracks, i27 = {
      name: e11.name,
      duration: e11.duration,
      tracks: t19,
      uuid: e11.uuid,
      blendMode: e11.blendMode
    };
    for (let s18 = 0, r24 = n33.length; s18 !== r24; ++s18)
      t19.push(In3.toJSON(n33[s18]));
    return i27;
  }
  static CreateFromMorphTargetSequence(e11, t19, n33, i27) {
    const s18 = t19.length, r24 = [];
    for (let o12 = 0; o12 < s18; o12++) {
      let c27 = [], l25 = [];
      c27.push(
        (o12 + s18 - 1) % s18,
        o12,
        (o12 + 1) % s18
      ), l25.push(0, 1, 0);
      const u35 = b0(c27);
      c27 = Pc(c27, 1, u35), l25 = Pc(l25, 1, u35), !i27 && c27[0] === 0 && (c27.push(s18), l25.push(l25[0])), r24.push(
        new ir3(
          ".morphTargetInfluences[" + t19[o12].name + "]",
          c27,
          l25
        ).scale(1 / n33)
      );
    }
    return new this(e11, -1, r24);
  }
  static findByName(e11, t19) {
    let n33 = e11;
    if (!Array.isArray(e11)) {
      const i27 = e11;
      n33 = i27.geometry && i27.geometry.animations || i27.animations;
    }
    for (let i27 = 0; i27 < n33.length; i27++)
      if (n33[i27].name === t19)
        return n33[i27];
    return null;
  }
  static CreateClipsFromMorphTargetSequences(e11, t19, n33) {
    const i27 = {}, s18 = /^([\w-]*?)([\d]+)$/;
    for (let o12 = 0, c27 = e11.length; o12 < c27; o12++) {
      const l25 = e11[o12], u35 = l25.name.match(s18);
      if (u35 && u35.length > 1) {
        const h26 = u35[1];
        let d34 = i27[h26];
        d34 || (i27[h26] = d34 = []), d34.push(l25);
      }
    }
    const r24 = [];
    for (const o12 in i27)
      r24.push(this.CreateFromMorphTargetSequence(o12, i27[o12], t19, n33));
    return r24;
  }
  // parse the animation.hierarchy format
  static parseAnimation(e11, t19) {
    if (!e11)
      return console.error("THREE.AnimationClip: No animation in JSONLoader data."), null;
    const n33 = function(h26, d34, p26, g31, y33) {
      if (p26.length !== 0) {
        const m33 = [], f39 = [];
        Eu(p26, m33, f39, g31), m33.length !== 0 && y33.push(new h26(d34, m33, f39));
      }
    }, i27 = [], s18 = e11.name || "default", r24 = e11.fps || 30, o12 = e11.blendMode;
    let c27 = e11.length || -1;
    const l25 = e11.hierarchy || [];
    for (let h26 = 0; h26 < l25.length; h26++) {
      const d34 = l25[h26].keys;
      if (!(!d34 || d34.length === 0))
        if (d34[0].morphTargets) {
          const p26 = {};
          let g31;
          for (g31 = 0; g31 < d34.length; g31++)
            if (d34[g31].morphTargets)
              for (let y33 = 0; y33 < d34[g31].morphTargets.length; y33++)
                p26[d34[g31].morphTargets[y33]] = -1;
          for (const y33 in p26) {
            const m33 = [], f39 = [];
            for (let E24 = 0; E24 !== d34[g31].morphTargets.length; ++E24) {
              const b33 = d34[g31];
              m33.push(b33.time), f39.push(b33.morphTarget === y33 ? 1 : 0);
            }
            i27.push(new ir3(".morphTargetInfluence[" + y33 + "]", m33, f39));
          }
          c27 = p26.length * r24;
        } else {
          const p26 = ".bones[" + t19[h26].name + "]";
          n33(
            Pi,
            p26 + ".position",
            d34,
            "pos",
            i27
          ), n33(
            ui3,
            p26 + ".quaternion",
            d34,
            "rot",
            i27
          ), n33(
            Pi,
            p26 + ".scale",
            d34,
            "scl",
            i27
          );
        }
    }
    return i27.length === 0 ? null : new this(s18, c27, i27, o12);
  }
  resetDuration() {
    const e11 = this.tracks;
    let t19 = 0;
    for (let n33 = 0, i27 = e11.length; n33 !== i27; ++n33) {
      const s18 = this.tracks[n33];
      t19 = Math.max(t19, s18.times[s18.times.length - 1]);
    }
    return this.duration = t19, this;
  }
  trim() {
    for (let e11 = 0; e11 < this.tracks.length; e11++)
      this.tracks[e11].trim(0, this.duration);
    return this;
  }
  validate() {
    let e11 = true;
    for (let t19 = 0; t19 < this.tracks.length; t19++)
      e11 = e11 && this.tracks[t19].validate();
    return e11;
  }
  optimize() {
    for (let e11 = 0; e11 < this.tracks.length; e11++)
      this.tracks[e11].optimize();
    return this;
  }
  clone() {
    const e11 = [];
    for (let t19 = 0; t19 < this.tracks.length; t19++)
      e11.push(this.tracks[t19].clone());
    return new this.constructor(this.name, this.duration, e11, this.blendMode);
  }
  toJSON() {
    return this.constructor.toJSON(this);
  }
};
function A0(a22) {
  switch (a22.toLowerCase()) {
    case "scalar":
    case "double":
    case "float":
    case "number":
    case "integer":
      return ir3;
    case "vector":
    case "vector2":
    case "vector3":
    case "vector4":
      return Pi;
    case "color":
      return Cu;
    case "quaternion":
      return ui3;
    case "bool":
    case "boolean":
      return Us;
    case "string":
      return ks;
  }
  throw new Error("THREE.KeyframeTrack: Unsupported typeName: " + a22);
}
function E0(a22) {
  if (a22.type === void 0)
    throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");
  const e11 = A0(a22.type);
  if (a22.times === void 0) {
    const t19 = [], n33 = [];
    Eu(a22.keys, t19, n33, "value"), a22.times = t19, a22.values = n33;
  }
  return e11.parse !== void 0 ? e11.parse(a22) : new e11(a22.name, a22.times, a22.values, a22.interpolation);
}
var Rs = {
  enabled: false,
  files: {},
  add: function(a22, e11) {
    this.enabled !== false && (this.files[a22] = e11);
  },
  get: function(a22) {
    if (this.enabled !== false)
      return this.files[a22];
  },
  remove: function(a22) {
    delete this.files[a22];
  },
  clear: function() {
    this.files = {};
  }
};
var Fa = class {
  constructor(e11, t19, n33) {
    const i27 = this;
    let s18 = false, r24 = 0, o12 = 0, c27;
    const l25 = [];
    this.onStart = void 0, this.onLoad = e11, this.onProgress = t19, this.onError = n33, this.itemStart = function(u35) {
      o12++, s18 === false && i27.onStart !== void 0 && i27.onStart(u35, r24, o12), s18 = true;
    }, this.itemEnd = function(u35) {
      r24++, i27.onProgress !== void 0 && i27.onProgress(u35, r24, o12), r24 === o12 && (s18 = false, i27.onLoad !== void 0 && i27.onLoad());
    }, this.itemError = function(u35) {
      i27.onError !== void 0 && i27.onError(u35);
    }, this.resolveURL = function(u35) {
      return c27 ? c27(u35) : u35;
    }, this.setURLModifier = function(u35) {
      return c27 = u35, this;
    }, this.addHandler = function(u35, h26) {
      return l25.push(u35, h26), this;
    }, this.removeHandler = function(u35) {
      const h26 = l25.indexOf(u35);
      return h26 !== -1 && l25.splice(h26, 2), this;
    }, this.getHandler = function(u35) {
      for (let h26 = 0, d34 = l25.length; h26 < d34; h26 += 2) {
        const p26 = l25[h26], g31 = l25[h26 + 1];
        if (p26.global && (p26.lastIndex = 0), p26.test(u35))
          return g31;
      }
      return null;
    };
  }
};
var Lu = new Fa();
var hi3 = class {
  constructor(e11) {
    this.manager = e11 !== void 0 ? e11 : Lu, this.crossOrigin = "anonymous", this.withCredentials = false, this.path = "", this.resourcePath = "", this.requestHeader = {};
  }
  load() {
  }
  loadAsync(e11, t19) {
    const n33 = this;
    return new Promise(function(i27, s18) {
      n33.load(e11, i27, t19, s18);
    });
  }
  parse() {
  }
  setCrossOrigin(e11) {
    return this.crossOrigin = e11, this;
  }
  setWithCredentials(e11) {
    return this.withCredentials = e11, this;
  }
  setPath(e11) {
    return this.path = e11, this;
  }
  setResourcePath(e11) {
    return this.resourcePath = e11, this;
  }
  setRequestHeader(e11) {
    return this.requestHeader = e11, this;
  }
};
var Gn3 = {};
var C0 = class extends Error {
  constructor(e11, t19) {
    super(e11), this.response = t19;
  }
};
var dr3 = class extends hi3 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, n33, i27) {
    e11 === void 0 && (e11 = ""), this.path !== void 0 && (e11 = this.path + e11), e11 = this.manager.resolveURL(e11);
    const s18 = Rs.get(e11);
    if (s18 !== void 0)
      return this.manager.itemStart(e11), setTimeout(() => {
        t19 && t19(s18), this.manager.itemEnd(e11);
      }, 0), s18;
    if (Gn3[e11] !== void 0) {
      Gn3[e11].push({
        onLoad: t19,
        onProgress: n33,
        onError: i27
      });
      return;
    }
    Gn3[e11] = [], Gn3[e11].push({
      onLoad: t19,
      onProgress: n33,
      onError: i27
    });
    const r24 = new Request(e11, {
      headers: new Headers(this.requestHeader),
      credentials: this.withCredentials ? "include" : "same-origin"
      // An abort controller could be added within a future PR
    }), o12 = this.mimeType, c27 = this.responseType;
    fetch(r24).then((l25) => {
      if (l25.status === 200 || l25.status === 0) {
        if (l25.status === 0 && console.warn("THREE.FileLoader: HTTP Status 0 received."), typeof ReadableStream > "u" || l25.body === void 0 || l25.body.getReader === void 0)
          return l25;
        const u35 = Gn3[e11], h26 = l25.body.getReader(), d34 = l25.headers.get("Content-Length") || l25.headers.get("X-File-Size"), p26 = d34 ? parseInt(d34) : 0, g31 = p26 !== 0;
        let y33 = 0;
        const m33 = new ReadableStream({
          start(f39) {
            E24();
            function E24() {
              h26.read().then(({ done: b33, value: w29 }) => {
                if (b33)
                  f39.close();
                else {
                  y33 += w29.byteLength;
                  const S21 = new ProgressEvent("progress", { lengthComputable: g31, loaded: y33, total: p26 });
                  for (let D17 = 0, N19 = u35.length; D17 < N19; D17++) {
                    const I16 = u35[D17];
                    I16.onProgress && I16.onProgress(S21);
                  }
                  f39.enqueue(w29), E24();
                }
              });
            }
          }
        });
        return new Response(m33);
      } else
        throw new C0(`fetch for "${l25.url}" responded with ${l25.status}: ${l25.statusText}`, l25);
    }).then((l25) => {
      switch (c27) {
        case "arraybuffer":
          return l25.arrayBuffer();
        case "blob":
          return l25.blob();
        case "document":
          return l25.text().then((u35) => new DOMParser().parseFromString(u35, o12));
        case "json":
          return l25.json();
        default:
          if (o12 === void 0)
            return l25.text();
          {
            const h26 = /charset="?([^;"\s]*)"?/i.exec(o12), d34 = h26 && h26[1] ? h26[1].toLowerCase() : void 0, p26 = new TextDecoder(d34);
            return l25.arrayBuffer().then((g31) => p26.decode(g31));
          }
      }
    }).then((l25) => {
      Rs.add(e11, l25);
      const u35 = Gn3[e11];
      delete Gn3[e11];
      for (let h26 = 0, d34 = u35.length; h26 < d34; h26++) {
        const p26 = u35[h26];
        p26.onLoad && p26.onLoad(l25);
      }
    }).catch((l25) => {
      const u35 = Gn3[e11];
      if (u35 === void 0)
        throw this.manager.itemError(e11), l25;
      delete Gn3[e11];
      for (let h26 = 0, d34 = u35.length; h26 < d34; h26++) {
        const p26 = u35[h26];
        p26.onError && p26.onError(l25);
      }
      this.manager.itemError(e11);
    }).finally(() => {
      this.manager.itemEnd(e11);
    }), this.manager.itemStart(e11);
  }
  setResponseType(e11) {
    return this.responseType = e11, this;
  }
  setMimeType(e11) {
    return this.mimeType = e11, this;
  }
};
var L0 = class extends hi3 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, n33, i27) {
    this.path !== void 0 && (e11 = this.path + e11), e11 = this.manager.resolveURL(e11);
    const s18 = this, r24 = Rs.get(e11);
    if (r24 !== void 0)
      return s18.manager.itemStart(e11), setTimeout(function() {
        t19 && t19(r24), s18.manager.itemEnd(e11);
      }, 0), r24;
    const o12 = nr3("img");
    function c27() {
      u35(), Rs.add(e11, this), t19 && t19(this), s18.manager.itemEnd(e11);
    }
    function l25(h26) {
      u35(), i27 && i27(h26), s18.manager.itemError(e11), s18.manager.itemEnd(e11);
    }
    function u35() {
      o12.removeEventListener("load", c27, false), o12.removeEventListener("error", l25, false);
    }
    return o12.addEventListener("load", c27, false), o12.addEventListener("error", l25, false), e11.slice(0, 5) !== "data:" && this.crossOrigin !== void 0 && (o12.crossOrigin = this.crossOrigin), s18.manager.itemStart(e11), o12.src = e11, o12;
  }
};
var R0 = class extends hi3 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, n33, i27) {
    const s18 = this, r24 = new wu(), o12 = new dr3(this.manager);
    return o12.setResponseType("arraybuffer"), o12.setRequestHeader(this.requestHeader), o12.setPath(this.path), o12.setWithCredentials(s18.withCredentials), o12.load(e11, function(c27) {
      const l25 = s18.parse(c27);
      l25 && (l25.image !== void 0 ? r24.image = l25.image : l25.data !== void 0 && (r24.image.width = l25.width, r24.image.height = l25.height, r24.image.data = l25.data), r24.wrapS = l25.wrapS !== void 0 ? l25.wrapS : Zt3, r24.wrapT = l25.wrapT !== void 0 ? l25.wrapT : Zt3, r24.magFilter = l25.magFilter !== void 0 ? l25.magFilter : Ht4, r24.minFilter = l25.minFilter !== void 0 ? l25.minFilter : Ht4, r24.anisotropy = l25.anisotropy !== void 0 ? l25.anisotropy : 1, l25.encoding !== void 0 && (r24.encoding = l25.encoding), l25.flipY !== void 0 && (r24.flipY = l25.flipY), l25.format !== void 0 && (r24.format = l25.format), l25.type !== void 0 && (r24.type = l25.type), l25.mipmaps !== void 0 && (r24.mipmaps = l25.mipmaps, r24.minFilter = jn3), l25.mipmapCount === 1 && (r24.minFilter = Ht4), l25.generateMipmaps !== void 0 && (r24.generateMipmaps = l25.generateMipmaps), r24.needsUpdate = true, t19 && t19(r24, l25));
    }, n33, i27), r24;
  }
};
var za = class extends hi3 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, n33, i27) {
    const s18 = new jt4(), r24 = new L0(this.manager);
    return r24.setCrossOrigin(this.crossOrigin), r24.setPath(this.path), r24.load(e11, function(o12) {
      s18.image = o12, s18.needsUpdate = true, t19 !== void 0 && t19(s18);
    }, n33, i27), s18;
  }
};
var fr3 = class extends _t3 {
  constructor(e11, t19 = 1) {
    super(), this.isLight = true, this.type = "Light", this.color = new ze4(e11), this.intensity = t19;
  }
  dispose() {
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.color.copy(e11.color), this.intensity = e11.intensity, this;
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return t19.object.color = this.color.getHex(), t19.object.intensity = this.intensity, this.groundColor !== void 0 && (t19.object.groundColor = this.groundColor.getHex()), this.distance !== void 0 && (t19.object.distance = this.distance), this.angle !== void 0 && (t19.object.angle = this.angle), this.decay !== void 0 && (t19.object.decay = this.decay), this.penumbra !== void 0 && (t19.object.penumbra = this.penumbra), this.shadow !== void 0 && (t19.object.shadow = this.shadow.toJSON()), t19;
  }
};
var Ru = class extends fr3 {
  constructor(e11, t19, n33) {
    super(e11, n33), this.isHemisphereLight = true, this.type = "HemisphereLight", this.position.copy(_t3.DEFAULT_UP), this.updateMatrix(), this.groundColor = new ze4(t19);
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.groundColor.copy(e11.groundColor), this;
  }
};
var ia = new Ve4();
var Ic = new U7();
var Dc = new U7();
var Ba = class {
  constructor(e11) {
    this.camera = e11, this.bias = 0, this.normalBias = 0, this.radius = 1, this.blurSamples = 8, this.mapSize = new We4(512, 512), this.map = null, this.mapPass = null, this.matrix = new Ve4(), this.autoUpdate = true, this.needsUpdate = false, this._frustum = new Ra(), this._frameExtents = new We4(1, 1), this._viewportCount = 1, this._viewports = [
      new gt5(0, 0, 1, 1)
    ];
  }
  getViewportCount() {
    return this._viewportCount;
  }
  getFrustum() {
    return this._frustum;
  }
  updateMatrices(e11) {
    const t19 = this.camera, n33 = this.matrix;
    Ic.setFromMatrixPosition(e11.matrixWorld), t19.position.copy(Ic), Dc.setFromMatrixPosition(e11.target.matrixWorld), t19.lookAt(Dc), t19.updateMatrixWorld(), ia.multiplyMatrices(t19.projectionMatrix, t19.matrixWorldInverse), this._frustum.setFromProjectionMatrix(ia), n33.set(
      0.5,
      0,
      0,
      0.5,
      0,
      0.5,
      0,
      0.5,
      0,
      0,
      0.5,
      0.5,
      0,
      0,
      0,
      1
    ), n33.multiply(ia);
  }
  getViewport(e11) {
    return this._viewports[e11];
  }
  getFrameExtents() {
    return this._frameExtents;
  }
  dispose() {
    this.map && this.map.dispose(), this.mapPass && this.mapPass.dispose();
  }
  copy(e11) {
    return this.camera = e11.camera.clone(), this.bias = e11.bias, this.radius = e11.radius, this.mapSize.copy(e11.mapSize), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  toJSON() {
    const e11 = {};
    return this.bias !== 0 && (e11.bias = this.bias), this.normalBias !== 0 && (e11.normalBias = this.normalBias), this.radius !== 1 && (e11.radius = this.radius), (this.mapSize.x !== 512 || this.mapSize.y !== 512) && (e11.mapSize = this.mapSize.toArray()), e11.camera = this.camera.toJSON(false).object, delete e11.camera.matrix, e11;
  }
};
var P0 = class extends Ba {
  constructor() {
    super(new Vt3(50, 1, 0.5, 500)), this.isSpotLightShadow = true, this.focus = 1;
  }
  updateMatrices(e11) {
    const t19 = this.camera, n33 = Es * 2 * e11.angle * this.focus, i27 = this.mapSize.width / this.mapSize.height, s18 = e11.distance || t19.far;
    (n33 !== t19.fov || i27 !== t19.aspect || s18 !== t19.far) && (t19.fov = n33, t19.aspect = i27, t19.far = s18, t19.updateProjectionMatrix()), super.updateMatrices(e11);
  }
  copy(e11) {
    return super.copy(e11), this.focus = e11.focus, this;
  }
};
var Pu = class extends fr3 {
  constructor(e11, t19, n33 = 0, i27 = Math.PI / 3, s18 = 0, r24 = 2) {
    super(e11, t19), this.isSpotLight = true, this.type = "SpotLight", this.position.copy(_t3.DEFAULT_UP), this.updateMatrix(), this.target = new _t3(), this.distance = n33, this.angle = i27, this.penumbra = s18, this.decay = r24, this.map = null, this.shadow = new P0();
  }
  get power() {
    return this.intensity * Math.PI;
  }
  set power(e11) {
    this.intensity = e11 / Math.PI;
  }
  dispose() {
    this.shadow.dispose();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.distance = e11.distance, this.angle = e11.angle, this.penumbra = e11.penumbra, this.decay = e11.decay, this.target = e11.target.clone(), this.shadow = e11.shadow.clone(), this;
  }
};
var Nc = new Ve4();
var js = new U7();
var sa = new U7();
var I0 = class extends Ba {
  constructor() {
    super(new Vt3(90, 1, 0.5, 500)), this.isPointLightShadow = true, this._frameExtents = new We4(4, 2), this._viewportCount = 6, this._viewports = [
      // These viewports map a cube-map onto a 2D texture with the
      // following orientation:
      //
      //  xzXZ
      //   y Y
      //
      // X - Positive x direction
      // x - Negative x direction
      // Y - Positive y direction
      // y - Negative y direction
      // Z - Positive z direction
      // z - Negative z direction
      // positive X
      new gt5(2, 1, 1, 1),
      // negative X
      new gt5(0, 1, 1, 1),
      // positive Z
      new gt5(3, 1, 1, 1),
      // negative Z
      new gt5(1, 1, 1, 1),
      // positive Y
      new gt5(3, 0, 1, 1),
      // negative Y
      new gt5(1, 0, 1, 1)
    ], this._cubeDirections = [
      new U7(1, 0, 0),
      new U7(-1, 0, 0),
      new U7(0, 0, 1),
      new U7(0, 0, -1),
      new U7(0, 1, 0),
      new U7(0, -1, 0)
    ], this._cubeUps = [
      new U7(0, 1, 0),
      new U7(0, 1, 0),
      new U7(0, 1, 0),
      new U7(0, 1, 0),
      new U7(0, 0, 1),
      new U7(0, 0, -1)
    ];
  }
  updateMatrices(e11, t19 = 0) {
    const n33 = this.camera, i27 = this.matrix, s18 = e11.distance || n33.far;
    s18 !== n33.far && (n33.far = s18, n33.updateProjectionMatrix()), js.setFromMatrixPosition(e11.matrixWorld), n33.position.copy(js), sa.copy(n33.position), sa.add(this._cubeDirections[t19]), n33.up.copy(this._cubeUps[t19]), n33.lookAt(sa), n33.updateMatrixWorld(), i27.makeTranslation(-js.x, -js.y, -js.z), Nc.multiplyMatrices(n33.projectionMatrix, n33.matrixWorldInverse), this._frustum.setFromProjectionMatrix(Nc);
  }
};
var go = class extends fr3 {
  constructor(e11, t19, n33 = 0, i27 = 2) {
    super(e11, t19), this.isPointLight = true, this.type = "PointLight", this.distance = n33, this.decay = i27, this.shadow = new I0();
  }
  get power() {
    return this.intensity * 4 * Math.PI;
  }
  set power(e11) {
    this.intensity = e11 / (4 * Math.PI);
  }
  dispose() {
    this.shadow.dispose();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.distance = e11.distance, this.decay = e11.decay, this.shadow = e11.shadow.clone(), this;
  }
};
var D0 = class extends Ba {
  constructor() {
    super(new ho(-5, 5, 5, -5, 0.5, 500)), this.isDirectionalLightShadow = true;
  }
};
var Iu = class extends fr3 {
  constructor(e11, t19) {
    super(e11, t19), this.isDirectionalLight = true, this.type = "DirectionalLight", this.position.copy(_t3.DEFAULT_UP), this.updateMatrix(), this.target = new _t3(), this.shadow = new D0();
  }
  dispose() {
    this.shadow.dispose();
  }
  copy(e11) {
    return super.copy(e11), this.target = e11.target.clone(), this.shadow = e11.shadow.clone(), this;
  }
};
var N0 = class extends fr3 {
  constructor(e11, t19) {
    super(e11, t19), this.isAmbientLight = true, this.type = "AmbientLight";
  }
};
var sr3 = class {
  static decodeText(e11) {
    if (typeof TextDecoder < "u")
      return new TextDecoder().decode(e11);
    let t19 = "";
    for (let n33 = 0, i27 = e11.length; n33 < i27; n33++)
      t19 += String.fromCharCode(e11[n33]);
    try {
      return decodeURIComponent(escape(t19));
    } catch {
      return t19;
    }
  }
  static extractUrlBase(e11) {
    const t19 = e11.lastIndexOf("/");
    return t19 === -1 ? "./" : e11.slice(0, t19 + 1);
  }
  static resolveURL(e11, t19) {
    return typeof e11 != "string" || e11 === "" ? "" : (/^https?:\/\//i.test(t19) && /^\//.test(e11) && (t19 = t19.replace(/(^https?:\/\/[^\/]+).*/i, "$1")), /^(https?:)?\/\//i.test(e11) || /^data:.*,.*$/i.test(e11) || /^blob:.*$/i.test(e11) ? e11 : t19 + e11);
  }
};
var U0 = class extends hi3 {
  constructor(e11) {
    super(e11), this.isImageBitmapLoader = true, typeof createImageBitmap > "u" && console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."), typeof fetch > "u" && console.warn("THREE.ImageBitmapLoader: fetch() not supported."), this.options = { premultiplyAlpha: "none" };
  }
  setOptions(e11) {
    return this.options = e11, this;
  }
  load(e11, t19, n33, i27) {
    e11 === void 0 && (e11 = ""), this.path !== void 0 && (e11 = this.path + e11), e11 = this.manager.resolveURL(e11);
    const s18 = this, r24 = Rs.get(e11);
    if (r24 !== void 0)
      return s18.manager.itemStart(e11), setTimeout(function() {
        t19 && t19(r24), s18.manager.itemEnd(e11);
      }, 0), r24;
    const o12 = {};
    o12.credentials = this.crossOrigin === "anonymous" ? "same-origin" : "include", o12.headers = this.requestHeader, fetch(e11, o12).then(function(c27) {
      return c27.blob();
    }).then(function(c27) {
      return createImageBitmap(c27, Object.assign(s18.options, { colorSpaceConversion: "none" }));
    }).then(function(c27) {
      Rs.add(e11, c27), t19 && t19(c27), s18.manager.itemEnd(e11);
    }).catch(function(c27) {
      i27 && i27(c27), s18.manager.itemError(e11), s18.manager.itemEnd(e11);
    }), s18.manager.itemStart(e11);
  }
};
var Va = "\\[\\]\\.:\\/";
var k0 = new RegExp("[" + Va + "]", "g");
var Ga = "[^" + Va + "]";
var O0 = "[^" + Va.replace("\\.", "") + "]";
var F0 = /((?:WC+[\/:])*)/.source.replace("WC", Ga);
var z0 = /(WCOD+)?/.source.replace("WCOD", O0);
var B0 = /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC", Ga);
var V0 = /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", Ga);
var G0 = new RegExp(
  "^" + F0 + z0 + B0 + V0 + "$"
);
var H0 = ["material", "materials", "bones", "map"];
var W0 = class {
  constructor(e11, t19, n33) {
    const i27 = n33 || dt6.parseTrackName(t19);
    this._targetGroup = e11, this._bindings = e11.subscribe_(t19, i27);
  }
  getValue(e11, t19) {
    this.bind();
    const n33 = this._targetGroup.nCachedObjects_, i27 = this._bindings[n33];
    i27 !== void 0 && i27.getValue(e11, t19);
  }
  setValue(e11, t19) {
    const n33 = this._bindings;
    for (let i27 = this._targetGroup.nCachedObjects_, s18 = n33.length; i27 !== s18; ++i27)
      n33[i27].setValue(e11, t19);
  }
  bind() {
    const e11 = this._bindings;
    for (let t19 = this._targetGroup.nCachedObjects_, n33 = e11.length; t19 !== n33; ++t19)
      e11[t19].bind();
  }
  unbind() {
    const e11 = this._bindings;
    for (let t19 = this._targetGroup.nCachedObjects_, n33 = e11.length; t19 !== n33; ++t19)
      e11[t19].unbind();
  }
};
var dt6 = class _dt {
  constructor(e11, t19, n33) {
    this.path = t19, this.parsedPath = n33 || _dt.parseTrackName(t19), this.node = _dt.findNode(e11, this.parsedPath.nodeName), this.rootNode = e11, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound;
  }
  static create(e11, t19, n33) {
    return e11 && e11.isAnimationObjectGroup ? new _dt.Composite(e11, t19, n33) : new _dt(e11, t19, n33);
  }
  /**
   * Replaces spaces with underscores and removes unsupported characters from
   * node names, to ensure compatibility with parseTrackName().
   *
   * @param {string} name Node name to be sanitized.
   * @return {string}
   */
  static sanitizeNodeName(e11) {
    return e11.replace(/\s/g, "_").replace(k0, "");
  }
  static parseTrackName(e11) {
    const t19 = G0.exec(e11);
    if (t19 === null)
      throw new Error("PropertyBinding: Cannot parse trackName: " + e11);
    const n33 = {
      // directoryName: matches[ 1 ], // (tschw) currently unused
      nodeName: t19[2],
      objectName: t19[3],
      objectIndex: t19[4],
      propertyName: t19[5],
      // required
      propertyIndex: t19[6]
    }, i27 = n33.nodeName && n33.nodeName.lastIndexOf(".");
    if (i27 !== void 0 && i27 !== -1) {
      const s18 = n33.nodeName.substring(i27 + 1);
      H0.indexOf(s18) !== -1 && (n33.nodeName = n33.nodeName.substring(0, i27), n33.objectName = s18);
    }
    if (n33.propertyName === null || n33.propertyName.length === 0)
      throw new Error("PropertyBinding: can not parse propertyName from trackName: " + e11);
    return n33;
  }
  static findNode(e11, t19) {
    if (t19 === void 0 || t19 === "" || t19 === "." || t19 === -1 || t19 === e11.name || t19 === e11.uuid)
      return e11;
    if (e11.skeleton) {
      const n33 = e11.skeleton.getBoneByName(t19);
      if (n33 !== void 0)
        return n33;
    }
    if (e11.children) {
      const n33 = function(s18) {
        for (let r24 = 0; r24 < s18.length; r24++) {
          const o12 = s18[r24];
          if (o12.name === t19 || o12.uuid === t19)
            return o12;
          const c27 = n33(o12.children);
          if (c27)
            return c27;
        }
        return null;
      }, i27 = n33(e11.children);
      if (i27)
        return i27;
    }
    return null;
  }
  // these are used to "bind" a nonexistent property
  _getValue_unavailable() {
  }
  _setValue_unavailable() {
  }
  // Getters
  _getValue_direct(e11, t19) {
    e11[t19] = this.targetObject[this.propertyName];
  }
  _getValue_array(e11, t19) {
    const n33 = this.resolvedProperty;
    for (let i27 = 0, s18 = n33.length; i27 !== s18; ++i27)
      e11[t19++] = n33[i27];
  }
  _getValue_arrayElement(e11, t19) {
    e11[t19] = this.resolvedProperty[this.propertyIndex];
  }
  _getValue_toArray(e11, t19) {
    this.resolvedProperty.toArray(e11, t19);
  }
  // Direct
  _setValue_direct(e11, t19) {
    this.targetObject[this.propertyName] = e11[t19];
  }
  _setValue_direct_setNeedsUpdate(e11, t19) {
    this.targetObject[this.propertyName] = e11[t19], this.targetObject.needsUpdate = true;
  }
  _setValue_direct_setMatrixWorldNeedsUpdate(e11, t19) {
    this.targetObject[this.propertyName] = e11[t19], this.targetObject.matrixWorldNeedsUpdate = true;
  }
  // EntireArray
  _setValue_array(e11, t19) {
    const n33 = this.resolvedProperty;
    for (let i27 = 0, s18 = n33.length; i27 !== s18; ++i27)
      n33[i27] = e11[t19++];
  }
  _setValue_array_setNeedsUpdate(e11, t19) {
    const n33 = this.resolvedProperty;
    for (let i27 = 0, s18 = n33.length; i27 !== s18; ++i27)
      n33[i27] = e11[t19++];
    this.targetObject.needsUpdate = true;
  }
  _setValue_array_setMatrixWorldNeedsUpdate(e11, t19) {
    const n33 = this.resolvedProperty;
    for (let i27 = 0, s18 = n33.length; i27 !== s18; ++i27)
      n33[i27] = e11[t19++];
    this.targetObject.matrixWorldNeedsUpdate = true;
  }
  // ArrayElement
  _setValue_arrayElement(e11, t19) {
    this.resolvedProperty[this.propertyIndex] = e11[t19];
  }
  _setValue_arrayElement_setNeedsUpdate(e11, t19) {
    this.resolvedProperty[this.propertyIndex] = e11[t19], this.targetObject.needsUpdate = true;
  }
  _setValue_arrayElement_setMatrixWorldNeedsUpdate(e11, t19) {
    this.resolvedProperty[this.propertyIndex] = e11[t19], this.targetObject.matrixWorldNeedsUpdate = true;
  }
  // HasToFromArray
  _setValue_fromArray(e11, t19) {
    this.resolvedProperty.fromArray(e11, t19);
  }
  _setValue_fromArray_setNeedsUpdate(e11, t19) {
    this.resolvedProperty.fromArray(e11, t19), this.targetObject.needsUpdate = true;
  }
  _setValue_fromArray_setMatrixWorldNeedsUpdate(e11, t19) {
    this.resolvedProperty.fromArray(e11, t19), this.targetObject.matrixWorldNeedsUpdate = true;
  }
  _getValue_unbound(e11, t19) {
    this.bind(), this.getValue(e11, t19);
  }
  _setValue_unbound(e11, t19) {
    this.bind(), this.setValue(e11, t19);
  }
  // create getter / setter pair for a property in the scene graph
  bind() {
    let e11 = this.node;
    const t19 = this.parsedPath, n33 = t19.objectName, i27 = t19.propertyName;
    let s18 = t19.propertyIndex;
    if (e11 || (e11 = _dt.findNode(this.rootNode, t19.nodeName), this.node = e11), this.getValue = this._getValue_unavailable, this.setValue = this._setValue_unavailable, !e11) {
      console.error("THREE.PropertyBinding: Trying to update node for track: " + this.path + " but it wasn't found.");
      return;
    }
    if (n33) {
      let l25 = t19.objectIndex;
      switch (n33) {
        case "materials":
          if (!e11.material) {
            console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this);
            return;
          }
          if (!e11.material.materials) {
            console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.", this);
            return;
          }
          e11 = e11.material.materials;
          break;
        case "bones":
          if (!e11.skeleton) {
            console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.", this);
            return;
          }
          e11 = e11.skeleton.bones;
          for (let u35 = 0; u35 < e11.length; u35++)
            if (e11[u35].name === l25) {
              l25 = u35;
              break;
            }
          break;
        case "map":
          if ("map" in e11) {
            e11 = e11.map;
            break;
          }
          if (!e11.material) {
            console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this);
            return;
          }
          if (!e11.material.map) {
            console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.", this);
            return;
          }
          e11 = e11.material.map;
          break;
        default:
          if (e11[n33] === void 0) {
            console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.", this);
            return;
          }
          e11 = e11[n33];
      }
      if (l25 !== void 0) {
        if (e11[l25] === void 0) {
          console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.", this, e11);
          return;
        }
        e11 = e11[l25];
      }
    }
    const r24 = e11[i27];
    if (r24 === void 0) {
      const l25 = t19.nodeName;
      console.error("THREE.PropertyBinding: Trying to update property for track: " + l25 + "." + i27 + " but it wasn't found.", e11);
      return;
    }
    let o12 = this.Versioning.None;
    this.targetObject = e11, e11.needsUpdate !== void 0 ? o12 = this.Versioning.NeedsUpdate : e11.matrixWorldNeedsUpdate !== void 0 && (o12 = this.Versioning.MatrixWorldNeedsUpdate);
    let c27 = this.BindingType.Direct;
    if (s18 !== void 0) {
      if (i27 === "morphTargetInfluences") {
        if (!e11.geometry) {
          console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.", this);
          return;
        }
        if (!e11.geometry.morphAttributes) {
          console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.", this);
          return;
        }
        e11.morphTargetDictionary[s18] !== void 0 && (s18 = e11.morphTargetDictionary[s18]);
      }
      c27 = this.BindingType.ArrayElement, this.resolvedProperty = r24, this.propertyIndex = s18;
    } else
      r24.fromArray !== void 0 && r24.toArray !== void 0 ? (c27 = this.BindingType.HasFromToArray, this.resolvedProperty = r24) : Array.isArray(r24) ? (c27 = this.BindingType.EntireArray, this.resolvedProperty = r24) : this.propertyName = i27;
    this.getValue = this.GetterByBindingType[c27], this.setValue = this.SetterByBindingTypeAndVersioning[c27][o12];
  }
  unbind() {
    this.node = null, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound;
  }
};
dt6.Composite = W0;
dt6.prototype.BindingType = {
  Direct: 0,
  EntireArray: 1,
  ArrayElement: 2,
  HasFromToArray: 3
};
dt6.prototype.Versioning = {
  None: 0,
  NeedsUpdate: 1,
  MatrixWorldNeedsUpdate: 2
};
dt6.prototype.GetterByBindingType = [
  dt6.prototype._getValue_direct,
  dt6.prototype._getValue_array,
  dt6.prototype._getValue_arrayElement,
  dt6.prototype._getValue_toArray
];
dt6.prototype.SetterByBindingTypeAndVersioning = [
  [
    // Direct
    dt6.prototype._setValue_direct,
    dt6.prototype._setValue_direct_setNeedsUpdate,
    dt6.prototype._setValue_direct_setMatrixWorldNeedsUpdate
  ],
  [
    // EntireArray
    dt6.prototype._setValue_array,
    dt6.prototype._setValue_array_setNeedsUpdate,
    dt6.prototype._setValue_array_setMatrixWorldNeedsUpdate
  ],
  [
    // ArrayElement
    dt6.prototype._setValue_arrayElement,
    dt6.prototype._setValue_arrayElement_setNeedsUpdate,
    dt6.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate
  ],
  [
    // HasToFromArray
    dt6.prototype._setValue_fromArray,
    dt6.prototype._setValue_fromArray_setNeedsUpdate,
    dt6.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate
  ]
];
var Uc = class {
  constructor(e11 = 1, t19 = 0, n33 = 0) {
    return this.radius = e11, this.phi = t19, this.theta = n33, this;
  }
  set(e11, t19, n33) {
    return this.radius = e11, this.phi = t19, this.theta = n33, this;
  }
  copy(e11) {
    return this.radius = e11.radius, this.phi = e11.phi, this.theta = e11.theta, this;
  }
  // restrict phi to be between EPS and PI-EPS
  makeSafe() {
    return this.phi = Math.max(1e-6, Math.min(Math.PI - 1e-6, this.phi)), this;
  }
  setFromVector3(e11) {
    return this.setFromCartesianCoords(e11.x, e11.y, e11.z);
  }
  setFromCartesianCoords(e11, t19, n33) {
    return this.radius = Math.sqrt(e11 * e11 + t19 * t19 + n33 * n33), this.radius === 0 ? (this.theta = 0, this.phi = 0) : (this.theta = Math.atan2(e11, n33), this.phi = Math.acos(Wt4(t19 / this.radius, -1, 1))), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var kc = new U7();
var Kr3;
var ra;
var oa = class extends _t3 {
  // dir is assumed to be normalized
  constructor(e11 = new U7(0, 0, 1), t19 = new U7(0, 0, 0), n33 = 1, i27 = 16776960, s18 = n33 * 0.2, r24 = s18 * 0.2) {
    super(), this.type = "ArrowHelper", Kr3 === void 0 && (Kr3 = new Xt3(), Kr3.setAttribute("position", new yt7([0, 0, 0, 0, 1, 0], 3)), ra = new mo(0, 0.5, 1, 5, 1), ra.translate(0, -0.5, 0)), this.position.copy(t19), this.line = new cr3(Kr3, new Ls({ color: i27, toneMapped: false })), this.line.matrixAutoUpdate = false, this.add(this.line), this.cone = new Pt4(ra, new Mn3({ color: i27, toneMapped: false })), this.cone.matrixAutoUpdate = false, this.add(this.cone), this.setDirection(e11), this.setLength(n33, s18, r24);
  }
  setDirection(e11) {
    if (e11.y > 0.99999)
      this.quaternion.set(0, 0, 0, 1);
    else if (e11.y < -0.99999)
      this.quaternion.set(1, 0, 0, 0);
    else {
      kc.set(e11.z, 0, -e11.x).normalize();
      const t19 = Math.acos(e11.y);
      this.quaternion.setFromAxisAngle(kc, t19);
    }
  }
  setLength(e11, t19 = e11 * 0.2, n33 = t19 * 0.2) {
    this.line.scale.set(1, Math.max(1e-4, e11 - t19), 1), this.line.updateMatrix(), this.cone.scale.set(n33, t19, n33), this.cone.position.y = e11, this.cone.updateMatrix();
  }
  setColor(e11) {
    this.line.material.color.set(e11), this.cone.material.color.set(e11);
  }
  copy(e11) {
    return super.copy(e11, false), this.line.copy(e11.line), this.cone.copy(e11.cone), this;
  }
  dispose() {
    this.line.geometry.dispose(), this.line.material.dispose(), this.cone.geometry.dispose(), this.cone.material.dispose();
  }
};
typeof __THREE_DEVTOOLS__ < "u" && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register", { detail: {
  revision: Ea
} }));
typeof window < "u" && (window.__THREE__ ? console.warn("WARNING: Multiple instances of Three.js being imported.") : window.__THREE__ = Ea);
function Oc(a22, e11) {
  if (e11 === jh)
    return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."), a22;
  if (e11 === ma || e11 === iu) {
    let t19 = a22.getIndex();
    if (t19 === null) {
      const r24 = [], o12 = a22.getAttribute("position");
      if (o12 !== void 0) {
        for (let c27 = 0; c27 < o12.count; c27++)
          r24.push(c27);
        a22.setIndex(r24), t19 = a22.getIndex();
      } else
        return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."), a22;
    }
    const n33 = t19.count - 2, i27 = [];
    if (e11 === ma)
      for (let r24 = 1; r24 <= n33; r24++)
        i27.push(t19.getX(0)), i27.push(t19.getX(r24)), i27.push(t19.getX(r24 + 1));
    else
      for (let r24 = 0; r24 < n33; r24++)
        r24 % 2 === 0 ? (i27.push(t19.getX(r24)), i27.push(t19.getX(r24 + 1)), i27.push(t19.getX(r24 + 2))) : (i27.push(t19.getX(r24 + 2)), i27.push(t19.getX(r24 + 1)), i27.push(t19.getX(r24)));
    i27.length / 3 !== n33 && console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");
    const s18 = a22.clone();
    return s18.setIndex(i27), s18.clearGroups(), s18;
  } else
    return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:", e11), a22;
}
var Ha = class extends hi3 {
  constructor(e11) {
    super(e11), this.dracoLoader = null, this.ktx2Loader = null, this.meshoptDecoder = null, this.pluginCallbacks = [], this.register(function(t19) {
      return new Y0(t19);
    }), this.register(function(t19) {
      return new n_(t19);
    }), this.register(function(t19) {
      return new i_(t19);
    }), this.register(function(t19) {
      return new s_(t19);
    }), this.register(function(t19) {
      return new Z0(t19);
    }), this.register(function(t19) {
      return new $0(t19);
    }), this.register(function(t19) {
      return new Q0(t19);
    }), this.register(function(t19) {
      return new e_(t19);
    }), this.register(function(t19) {
      return new K0(t19);
    }), this.register(function(t19) {
      return new t_(t19);
    }), this.register(function(t19) {
      return new J0(t19);
    }), this.register(function(t19) {
      return new q0(t19);
    }), this.register(function(t19) {
      return new r_(t19);
    }), this.register(function(t19) {
      return new o_(t19);
    });
  }
  load(e11, t19, n33, i27) {
    const s18 = this;
    let r24;
    this.resourcePath !== "" ? r24 = this.resourcePath : this.path !== "" ? r24 = this.path : r24 = sr3.extractUrlBase(e11), this.manager.itemStart(e11);
    const o12 = function(l25) {
      i27 ? i27(l25) : console.error(l25), s18.manager.itemError(e11), s18.manager.itemEnd(e11);
    }, c27 = new dr3(this.manager);
    c27.setPath(this.path), c27.setResponseType("arraybuffer"), c27.setRequestHeader(this.requestHeader), c27.setWithCredentials(this.withCredentials), c27.load(e11, function(l25) {
      try {
        s18.parse(l25, r24, function(u35) {
          t19(u35), s18.manager.itemEnd(e11);
        }, o12);
      } catch (u35) {
        o12(u35);
      }
    }, n33, o12);
  }
  setDRACOLoader(e11) {
    return this.dracoLoader = e11, this;
  }
  setDDSLoader() {
    throw new Error(
      'THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".'
    );
  }
  setKTX2Loader(e11) {
    return this.ktx2Loader = e11, this;
  }
  setMeshoptDecoder(e11) {
    return this.meshoptDecoder = e11, this;
  }
  register(e11) {
    return this.pluginCallbacks.indexOf(e11) === -1 && this.pluginCallbacks.push(e11), this;
  }
  unregister(e11) {
    return this.pluginCallbacks.indexOf(e11) !== -1 && this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e11), 1), this;
  }
  parse(e11, t19, n33, i27) {
    let s18;
    const r24 = {}, o12 = {}, c27 = new TextDecoder();
    if (typeof e11 == "string")
      s18 = JSON.parse(e11);
    else if (e11 instanceof ArrayBuffer)
      if (c27.decode(new Uint8Array(e11, 0, 4)) === Du) {
        try {
          r24[tt6.KHR_BINARY_GLTF] = new a_(e11);
        } catch (h26) {
          i27 && i27(h26);
          return;
        }
        s18 = JSON.parse(r24[tt6.KHR_BINARY_GLTF].content);
      } else
        s18 = JSON.parse(c27.decode(e11));
    else
      s18 = e11;
    if (s18.asset === void 0 || s18.asset.version[0] < 2) {
      i27 && i27(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));
      return;
    }
    const l25 = new v_(s18, {
      path: t19 || this.resourcePath || "",
      crossOrigin: this.crossOrigin,
      requestHeader: this.requestHeader,
      manager: this.manager,
      ktx2Loader: this.ktx2Loader,
      meshoptDecoder: this.meshoptDecoder
    });
    l25.fileLoader.setRequestHeader(this.requestHeader);
    for (let u35 = 0; u35 < this.pluginCallbacks.length; u35++) {
      const h26 = this.pluginCallbacks[u35](l25);
      o12[h26.name] = h26, r24[h26.name] = true;
    }
    if (s18.extensionsUsed)
      for (let u35 = 0; u35 < s18.extensionsUsed.length; ++u35) {
        const h26 = s18.extensionsUsed[u35], d34 = s18.extensionsRequired || [];
        switch (h26) {
          case tt6.KHR_MATERIALS_UNLIT:
            r24[h26] = new X0();
            break;
          case tt6.KHR_DRACO_MESH_COMPRESSION:
            r24[h26] = new l_(s18, this.dracoLoader);
            break;
          case tt6.KHR_TEXTURE_TRANSFORM:
            r24[h26] = new c_();
            break;
          case tt6.KHR_MESH_QUANTIZATION:
            r24[h26] = new u_();
            break;
          default:
            d34.indexOf(h26) >= 0 && o12[h26] === void 0 && console.warn('THREE.GLTFLoader: Unknown extension "' + h26 + '".');
        }
      }
    l25.setExtensions(r24), l25.setPlugins(o12), l25.parse(n33, i27);
  }
  parseAsync(e11, t19) {
    const n33 = this;
    return new Promise(function(i27, s18) {
      n33.parse(e11, t19, i27, s18);
    });
  }
};
function j0() {
  let a22 = {};
  return {
    get: function(e11) {
      return a22[e11];
    },
    add: function(e11, t19) {
      a22[e11] = t19;
    },
    remove: function(e11) {
      delete a22[e11];
    },
    removeAll: function() {
      a22 = {};
    }
  };
}
var tt6 = {
  KHR_BINARY_GLTF: "KHR_binary_glTF",
  KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression",
  KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual",
  KHR_MATERIALS_CLEARCOAT: "KHR_materials_clearcoat",
  KHR_MATERIALS_IOR: "KHR_materials_ior",
  KHR_MATERIALS_SHEEN: "KHR_materials_sheen",
  KHR_MATERIALS_SPECULAR: "KHR_materials_specular",
  KHR_MATERIALS_TRANSMISSION: "KHR_materials_transmission",
  KHR_MATERIALS_IRIDESCENCE: "KHR_materials_iridescence",
  KHR_MATERIALS_UNLIT: "KHR_materials_unlit",
  KHR_MATERIALS_VOLUME: "KHR_materials_volume",
  KHR_TEXTURE_BASISU: "KHR_texture_basisu",
  KHR_TEXTURE_TRANSFORM: "KHR_texture_transform",
  KHR_MESH_QUANTIZATION: "KHR_mesh_quantization",
  KHR_MATERIALS_EMISSIVE_STRENGTH: "KHR_materials_emissive_strength",
  EXT_TEXTURE_WEBP: "EXT_texture_webp",
  EXT_TEXTURE_AVIF: "EXT_texture_avif",
  EXT_MESHOPT_COMPRESSION: "EXT_meshopt_compression",
  EXT_MESH_GPU_INSTANCING: "EXT_mesh_gpu_instancing"
};
var q0 = class {
  constructor(e11) {
    this.parser = e11, this.name = tt6.KHR_LIGHTS_PUNCTUAL, this.cache = { refs: {}, uses: {} };
  }
  _markDefs() {
    const e11 = this.parser, t19 = this.parser.json.nodes || [];
    for (let n33 = 0, i27 = t19.length; n33 < i27; n33++) {
      const s18 = t19[n33];
      s18.extensions && s18.extensions[this.name] && s18.extensions[this.name].light !== void 0 && e11._addNodeRef(this.cache, s18.extensions[this.name].light);
    }
  }
  _loadLight(e11) {
    const t19 = this.parser, n33 = "light:" + e11;
    let i27 = t19.cache.get(n33);
    if (i27)
      return i27;
    const s18 = t19.json, c27 = ((s18.extensions && s18.extensions[this.name] || {}).lights || [])[e11];
    let l25;
    const u35 = new ze4(16777215);
    c27.color !== void 0 && u35.fromArray(c27.color);
    const h26 = c27.range !== void 0 ? c27.range : 0;
    switch (c27.type) {
      case "directional":
        l25 = new Iu(u35), l25.target.position.set(0, 0, -1), l25.add(l25.target);
        break;
      case "point":
        l25 = new go(u35), l25.distance = h26;
        break;
      case "spot":
        l25 = new Pu(u35), l25.distance = h26, c27.spot = c27.spot || {}, c27.spot.innerConeAngle = c27.spot.innerConeAngle !== void 0 ? c27.spot.innerConeAngle : 0, c27.spot.outerConeAngle = c27.spot.outerConeAngle !== void 0 ? c27.spot.outerConeAngle : Math.PI / 4, l25.angle = c27.spot.outerConeAngle, l25.penumbra = 1 - c27.spot.innerConeAngle / c27.spot.outerConeAngle, l25.target.position.set(0, 0, -1), l25.add(l25.target);
        break;
      default:
        throw new Error("THREE.GLTFLoader: Unexpected light type: " + c27.type);
    }
    return l25.position.set(0, 0, 0), l25.decay = 2, ii3(l25, c27), c27.intensity !== void 0 && (l25.intensity = c27.intensity), l25.name = t19.createUniqueName(c27.name || "light_" + e11), i27 = Promise.resolve(l25), t19.cache.add(n33, i27), i27;
  }
  getDependency(e11, t19) {
    if (e11 === "light")
      return this._loadLight(t19);
  }
  createNodeAttachment(e11) {
    const t19 = this, n33 = this.parser, s18 = n33.json.nodes[e11], o12 = (s18.extensions && s18.extensions[this.name] || {}).light;
    return o12 === void 0 ? null : this._loadLight(o12).then(function(c27) {
      return n33._getNodeRef(t19.cache, o12, c27);
    });
  }
};
var X0 = class {
  constructor() {
    this.name = tt6.KHR_MATERIALS_UNLIT;
  }
  getMaterialType() {
    return Mn3;
  }
  extendParams(e11, t19, n33) {
    const i27 = [];
    e11.color = new ze4(1, 1, 1), e11.opacity = 1;
    const s18 = t19.pbrMetallicRoughness;
    if (s18) {
      if (Array.isArray(s18.baseColorFactor)) {
        const r24 = s18.baseColorFactor;
        e11.color.fromArray(r24), e11.opacity = r24[3];
      }
      s18.baseColorTexture !== void 0 && i27.push(n33.assignTexture(e11, "map", s18.baseColorTexture, st6));
    }
    return Promise.all(i27);
  }
};
var K0 = class {
  constructor(e11) {
    this.parser = e11, this.name = tt6.KHR_MATERIALS_EMISSIVE_STRENGTH;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = i27.extensions[this.name].emissiveStrength;
    return s18 !== void 0 && (t19.emissiveIntensity = s18), Promise.resolve();
  }
};
var Y0 = class {
  constructor(e11) {
    this.parser = e11, this.name = tt6.KHR_MATERIALS_CLEARCOAT;
  }
  getMaterialType(e11) {
    const n33 = this.parser.json.materials[e11];
    return !n33.extensions || !n33.extensions[this.name] ? null : ki3;
  }
  extendMaterialParams(e11, t19) {
    const n33 = this.parser, i27 = n33.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = [], r24 = i27.extensions[this.name];
    if (r24.clearcoatFactor !== void 0 && (t19.clearcoat = r24.clearcoatFactor), r24.clearcoatTexture !== void 0 && s18.push(n33.assignTexture(t19, "clearcoatMap", r24.clearcoatTexture)), r24.clearcoatRoughnessFactor !== void 0 && (t19.clearcoatRoughness = r24.clearcoatRoughnessFactor), r24.clearcoatRoughnessTexture !== void 0 && s18.push(n33.assignTexture(t19, "clearcoatRoughnessMap", r24.clearcoatRoughnessTexture)), r24.clearcoatNormalTexture !== void 0 && (s18.push(n33.assignTexture(t19, "clearcoatNormalMap", r24.clearcoatNormalTexture)), r24.clearcoatNormalTexture.scale !== void 0)) {
      const o12 = r24.clearcoatNormalTexture.scale;
      t19.clearcoatNormalScale = new We4(o12, o12);
    }
    return Promise.all(s18);
  }
};
var J0 = class {
  constructor(e11) {
    this.parser = e11, this.name = tt6.KHR_MATERIALS_IRIDESCENCE;
  }
  getMaterialType(e11) {
    const n33 = this.parser.json.materials[e11];
    return !n33.extensions || !n33.extensions[this.name] ? null : ki3;
  }
  extendMaterialParams(e11, t19) {
    const n33 = this.parser, i27 = n33.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = [], r24 = i27.extensions[this.name];
    return r24.iridescenceFactor !== void 0 && (t19.iridescence = r24.iridescenceFactor), r24.iridescenceTexture !== void 0 && s18.push(n33.assignTexture(t19, "iridescenceMap", r24.iridescenceTexture)), r24.iridescenceIor !== void 0 && (t19.iridescenceIOR = r24.iridescenceIor), t19.iridescenceThicknessRange === void 0 && (t19.iridescenceThicknessRange = [100, 400]), r24.iridescenceThicknessMinimum !== void 0 && (t19.iridescenceThicknessRange[0] = r24.iridescenceThicknessMinimum), r24.iridescenceThicknessMaximum !== void 0 && (t19.iridescenceThicknessRange[1] = r24.iridescenceThicknessMaximum), r24.iridescenceThicknessTexture !== void 0 && s18.push(n33.assignTexture(t19, "iridescenceThicknessMap", r24.iridescenceThicknessTexture)), Promise.all(s18);
  }
};
var Z0 = class {
  constructor(e11) {
    this.parser = e11, this.name = tt6.KHR_MATERIALS_SHEEN;
  }
  getMaterialType(e11) {
    const n33 = this.parser.json.materials[e11];
    return !n33.extensions || !n33.extensions[this.name] ? null : ki3;
  }
  extendMaterialParams(e11, t19) {
    const n33 = this.parser, i27 = n33.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = [];
    t19.sheenColor = new ze4(0, 0, 0), t19.sheenRoughness = 0, t19.sheen = 1;
    const r24 = i27.extensions[this.name];
    return r24.sheenColorFactor !== void 0 && t19.sheenColor.fromArray(r24.sheenColorFactor), r24.sheenRoughnessFactor !== void 0 && (t19.sheenRoughness = r24.sheenRoughnessFactor), r24.sheenColorTexture !== void 0 && s18.push(n33.assignTexture(t19, "sheenColorMap", r24.sheenColorTexture, st6)), r24.sheenRoughnessTexture !== void 0 && s18.push(n33.assignTexture(t19, "sheenRoughnessMap", r24.sheenRoughnessTexture)), Promise.all(s18);
  }
};
var $0 = class {
  constructor(e11) {
    this.parser = e11, this.name = tt6.KHR_MATERIALS_TRANSMISSION;
  }
  getMaterialType(e11) {
    const n33 = this.parser.json.materials[e11];
    return !n33.extensions || !n33.extensions[this.name] ? null : ki3;
  }
  extendMaterialParams(e11, t19) {
    const n33 = this.parser, i27 = n33.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = [], r24 = i27.extensions[this.name];
    return r24.transmissionFactor !== void 0 && (t19.transmission = r24.transmissionFactor), r24.transmissionTexture !== void 0 && s18.push(n33.assignTexture(t19, "transmissionMap", r24.transmissionTexture)), Promise.all(s18);
  }
};
var Q0 = class {
  constructor(e11) {
    this.parser = e11, this.name = tt6.KHR_MATERIALS_VOLUME;
  }
  getMaterialType(e11) {
    const n33 = this.parser.json.materials[e11];
    return !n33.extensions || !n33.extensions[this.name] ? null : ki3;
  }
  extendMaterialParams(e11, t19) {
    const n33 = this.parser, i27 = n33.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = [], r24 = i27.extensions[this.name];
    t19.thickness = r24.thicknessFactor !== void 0 ? r24.thicknessFactor : 0, r24.thicknessTexture !== void 0 && s18.push(n33.assignTexture(t19, "thicknessMap", r24.thicknessTexture)), t19.attenuationDistance = r24.attenuationDistance || 1 / 0;
    const o12 = r24.attenuationColor || [1, 1, 1];
    return t19.attenuationColor = new ze4(o12[0], o12[1], o12[2]), Promise.all(s18);
  }
};
var e_ = class {
  constructor(e11) {
    this.parser = e11, this.name = tt6.KHR_MATERIALS_IOR;
  }
  getMaterialType(e11) {
    const n33 = this.parser.json.materials[e11];
    return !n33.extensions || !n33.extensions[this.name] ? null : ki3;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = i27.extensions[this.name];
    return t19.ior = s18.ior !== void 0 ? s18.ior : 1.5, Promise.resolve();
  }
};
var t_ = class {
  constructor(e11) {
    this.parser = e11, this.name = tt6.KHR_MATERIALS_SPECULAR;
  }
  getMaterialType(e11) {
    const n33 = this.parser.json.materials[e11];
    return !n33.extensions || !n33.extensions[this.name] ? null : ki3;
  }
  extendMaterialParams(e11, t19) {
    const n33 = this.parser, i27 = n33.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = [], r24 = i27.extensions[this.name];
    t19.specularIntensity = r24.specularFactor !== void 0 ? r24.specularFactor : 1, r24.specularTexture !== void 0 && s18.push(n33.assignTexture(t19, "specularIntensityMap", r24.specularTexture));
    const o12 = r24.specularColorFactor || [1, 1, 1];
    return t19.specularColor = new ze4(o12[0], o12[1], o12[2]), r24.specularColorTexture !== void 0 && s18.push(n33.assignTexture(t19, "specularColorMap", r24.specularColorTexture, st6)), Promise.all(s18);
  }
};
var n_ = class {
  constructor(e11) {
    this.parser = e11, this.name = tt6.KHR_TEXTURE_BASISU;
  }
  loadTexture(e11) {
    const t19 = this.parser, n33 = t19.json, i27 = n33.textures[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return null;
    const s18 = i27.extensions[this.name], r24 = t19.options.ktx2Loader;
    if (!r24) {
      if (n33.extensionsRequired && n33.extensionsRequired.indexOf(this.name) >= 0)
        throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");
      return null;
    }
    return t19.loadTextureImage(e11, s18.source, r24);
  }
};
var i_ = class {
  constructor(e11) {
    this.parser = e11, this.name = tt6.EXT_TEXTURE_WEBP, this.isSupported = null;
  }
  loadTexture(e11) {
    const t19 = this.name, n33 = this.parser, i27 = n33.json, s18 = i27.textures[e11];
    if (!s18.extensions || !s18.extensions[t19])
      return null;
    const r24 = s18.extensions[t19], o12 = i27.images[r24.source];
    let c27 = n33.textureLoader;
    if (o12.uri) {
      const l25 = n33.options.manager.getHandler(o12.uri);
      l25 !== null && (c27 = l25);
    }
    return this.detectSupport().then(function(l25) {
      if (l25)
        return n33.loadTextureImage(e11, r24.source, c27);
      if (i27.extensionsRequired && i27.extensionsRequired.indexOf(t19) >= 0)
        throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");
      return n33.loadTexture(e11);
    });
  }
  detectSupport() {
    return this.isSupported || (this.isSupported = new Promise(function(e11) {
      const t19 = new Image();
      t19.src = "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA", t19.onload = t19.onerror = function() {
        e11(t19.height === 1);
      };
    })), this.isSupported;
  }
};
var s_ = class {
  constructor(e11) {
    this.parser = e11, this.name = tt6.EXT_TEXTURE_AVIF, this.isSupported = null;
  }
  loadTexture(e11) {
    const t19 = this.name, n33 = this.parser, i27 = n33.json, s18 = i27.textures[e11];
    if (!s18.extensions || !s18.extensions[t19])
      return null;
    const r24 = s18.extensions[t19], o12 = i27.images[r24.source];
    let c27 = n33.textureLoader;
    if (o12.uri) {
      const l25 = n33.options.manager.getHandler(o12.uri);
      l25 !== null && (c27 = l25);
    }
    return this.detectSupport().then(function(l25) {
      if (l25)
        return n33.loadTextureImage(e11, r24.source, c27);
      if (i27.extensionsRequired && i27.extensionsRequired.indexOf(t19) >= 0)
        throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");
      return n33.loadTexture(e11);
    });
  }
  detectSupport() {
    return this.isSupported || (this.isSupported = new Promise(function(e11) {
      const t19 = new Image();
      t19.src = "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=", t19.onload = t19.onerror = function() {
        e11(t19.height === 1);
      };
    })), this.isSupported;
  }
};
var r_ = class {
  constructor(e11) {
    this.name = tt6.EXT_MESHOPT_COMPRESSION, this.parser = e11;
  }
  loadBufferView(e11) {
    const t19 = this.parser.json, n33 = t19.bufferViews[e11];
    if (n33.extensions && n33.extensions[this.name]) {
      const i27 = n33.extensions[this.name], s18 = this.parser.getDependency("buffer", i27.buffer), r24 = this.parser.options.meshoptDecoder;
      if (!r24 || !r24.supported) {
        if (t19.extensionsRequired && t19.extensionsRequired.indexOf(this.name) >= 0)
          throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");
        return null;
      }
      return s18.then(function(o12) {
        const c27 = i27.byteOffset || 0, l25 = i27.byteLength || 0, u35 = i27.count, h26 = i27.byteStride, d34 = new Uint8Array(o12, c27, l25);
        return r24.decodeGltfBufferAsync ? r24.decodeGltfBufferAsync(u35, h26, d34, i27.mode, i27.filter).then(function(p26) {
          return p26.buffer;
        }) : r24.ready.then(function() {
          const p26 = new ArrayBuffer(u35 * h26);
          return r24.decodeGltfBuffer(new Uint8Array(p26), u35, h26, d34, i27.mode, i27.filter), p26;
        });
      });
    } else
      return null;
  }
};
var o_ = class {
  constructor(e11) {
    this.name = tt6.EXT_MESH_GPU_INSTANCING, this.parser = e11;
  }
  createNodeMesh(e11) {
    const t19 = this.parser.json, n33 = t19.nodes[e11];
    if (!n33.extensions || !n33.extensions[this.name] || n33.mesh === void 0)
      return null;
    const i27 = t19.meshes[n33.mesh];
    for (const l25 of i27.primitives)
      if (l25.mode !== hn2.TRIANGLES && l25.mode !== hn2.TRIANGLE_STRIP && l25.mode !== hn2.TRIANGLE_FAN && l25.mode !== void 0)
        return null;
    const r24 = n33.extensions[this.name].attributes, o12 = [], c27 = {};
    for (const l25 in r24)
      o12.push(this.parser.getDependency("accessor", r24[l25]).then((u35) => (c27[l25] = u35, c27[l25])));
    return o12.length < 1 ? null : (o12.push(this.parser.createNodeMesh(e11)), Promise.all(o12).then((l25) => {
      const u35 = l25.pop(), h26 = u35.isGroup ? u35.children : [u35], d34 = l25[0].count, p26 = [];
      for (const g31 of h26) {
        const y33 = new Ve4(), m33 = new U7(), f39 = new qt3(), E24 = new U7(1, 1, 1), b33 = new g0(g31.geometry, g31.material, d34);
        for (let w29 = 0; w29 < d34; w29++)
          c27.TRANSLATION && m33.fromBufferAttribute(c27.TRANSLATION, w29), c27.ROTATION && f39.fromBufferAttribute(c27.ROTATION, w29), c27.SCALE && E24.fromBufferAttribute(c27.SCALE, w29), b33.setMatrixAt(w29, y33.compose(m33, f39, E24));
        for (const w29 in c27)
          w29 !== "TRANSLATION" && w29 !== "ROTATION" && w29 !== "SCALE" && g31.geometry.setAttribute(w29, c27[w29]);
        _t3.prototype.copy.call(b33, g31), this.parser.assignFinalMaterial(b33), p26.push(b33);
      }
      return u35.isGroup ? (u35.clear(), u35.add(...p26), u35) : p26[0];
    }));
  }
};
var Du = "glTF";
var qs = 12;
var Fc = { JSON: 1313821514, BIN: 5130562 };
var a_ = class {
  constructor(e11) {
    this.name = tt6.KHR_BINARY_GLTF, this.content = null, this.body = null;
    const t19 = new DataView(e11, 0, qs), n33 = new TextDecoder();
    if (this.header = {
      magic: n33.decode(new Uint8Array(e11.slice(0, 4))),
      version: t19.getUint32(4, true),
      length: t19.getUint32(8, true)
    }, this.header.magic !== Du)
      throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");
    if (this.header.version < 2)
      throw new Error("THREE.GLTFLoader: Legacy binary file detected.");
    const i27 = this.header.length - qs, s18 = new DataView(e11, qs);
    let r24 = 0;
    for (; r24 < i27; ) {
      const o12 = s18.getUint32(r24, true);
      r24 += 4;
      const c27 = s18.getUint32(r24, true);
      if (r24 += 4, c27 === Fc.JSON) {
        const l25 = new Uint8Array(e11, qs + r24, o12);
        this.content = n33.decode(l25);
      } else if (c27 === Fc.BIN) {
        const l25 = qs + r24;
        this.body = e11.slice(l25, l25 + o12);
      }
      r24 += o12;
    }
    if (this.content === null)
      throw new Error("THREE.GLTFLoader: JSON content not found.");
  }
};
var l_ = class {
  constructor(e11, t19) {
    if (!t19)
      throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");
    this.name = tt6.KHR_DRACO_MESH_COMPRESSION, this.json = e11, this.dracoLoader = t19, this.dracoLoader.preload();
  }
  decodePrimitive(e11, t19) {
    const n33 = this.json, i27 = this.dracoLoader, s18 = e11.extensions[this.name].bufferView, r24 = e11.extensions[this.name].attributes, o12 = {}, c27 = {}, l25 = {};
    for (const u35 in r24) {
      const h26 = Ma[u35] || u35.toLowerCase();
      o12[h26] = r24[u35];
    }
    for (const u35 in e11.attributes) {
      const h26 = Ma[u35] || u35.toLowerCase();
      if (r24[u35] !== void 0) {
        const d34 = n33.accessors[e11.attributes[u35]], p26 = vs[d34.componentType];
        l25[h26] = p26.name, c27[h26] = d34.normalized === true;
      }
    }
    return t19.getDependency("bufferView", s18).then(function(u35) {
      return new Promise(function(h26) {
        i27.decodeDracoFile(u35, function(d34) {
          for (const p26 in d34.attributes) {
            const g31 = d34.attributes[p26], y33 = c27[p26];
            y33 !== void 0 && (g31.normalized = y33);
          }
          h26(d34);
        }, o12, l25);
      });
    });
  }
};
var c_ = class {
  constructor() {
    this.name = tt6.KHR_TEXTURE_TRANSFORM;
  }
  extendTexture(e11, t19) {
    return (t19.texCoord === void 0 || t19.texCoord === e11.channel) && t19.offset === void 0 && t19.rotation === void 0 && t19.scale === void 0 || (e11 = e11.clone(), t19.texCoord !== void 0 && (e11.channel = t19.texCoord), t19.offset !== void 0 && e11.offset.fromArray(t19.offset), t19.rotation !== void 0 && (e11.rotation = t19.rotation), t19.scale !== void 0 && e11.repeat.fromArray(t19.scale), e11.needsUpdate = true), e11;
  }
};
var u_ = class {
  constructor() {
    this.name = tt6.KHR_MESH_QUANTIZATION;
  }
};
var Nu = class extends hr3 {
  constructor(e11, t19, n33, i27) {
    super(e11, t19, n33, i27);
  }
  copySampleValue_(e11) {
    const t19 = this.resultBuffer, n33 = this.sampleValues, i27 = this.valueSize, s18 = e11 * i27 * 3 + i27;
    for (let r24 = 0; r24 !== i27; r24++)
      t19[r24] = n33[s18 + r24];
    return t19;
  }
  interpolate_(e11, t19, n33, i27) {
    const s18 = this.resultBuffer, r24 = this.sampleValues, o12 = this.valueSize, c27 = o12 * 2, l25 = o12 * 3, u35 = i27 - t19, h26 = (n33 - t19) / u35, d34 = h26 * h26, p26 = d34 * h26, g31 = e11 * l25, y33 = g31 - l25, m33 = -2 * p26 + 3 * d34, f39 = p26 - d34, E24 = 1 - m33, b33 = f39 - d34 + h26;
    for (let w29 = 0; w29 !== o12; w29++) {
      const S21 = r24[y33 + w29 + o12], D17 = r24[y33 + w29 + c27] * u35, N19 = r24[g31 + w29 + o12], I16 = r24[g31 + w29] * u35;
      s18[w29] = E24 * S21 + b33 * D17 + m33 * N19 + f39 * I16;
    }
    return s18;
  }
};
var h_ = new qt3();
var d_ = class extends Nu {
  interpolate_(e11, t19, n33, i27) {
    const s18 = super.interpolate_(e11, t19, n33, i27);
    return h_.fromArray(s18).normalize().toArray(s18), s18;
  }
};
var hn2 = {
  FLOAT: 5126,
  //FLOAT_MAT2: 35674,
  FLOAT_MAT3: 35675,
  FLOAT_MAT4: 35676,
  FLOAT_VEC2: 35664,
  FLOAT_VEC3: 35665,
  FLOAT_VEC4: 35666,
  LINEAR: 9729,
  REPEAT: 10497,
  SAMPLER_2D: 35678,
  POINTS: 0,
  LINES: 1,
  LINE_LOOP: 2,
  LINE_STRIP: 3,
  TRIANGLES: 4,
  TRIANGLE_STRIP: 5,
  TRIANGLE_FAN: 6,
  UNSIGNED_BYTE: 5121,
  UNSIGNED_SHORT: 5123
};
var vs = {
  5120: Int8Array,
  5121: Uint8Array,
  5122: Int16Array,
  5123: Uint16Array,
  5125: Uint32Array,
  5126: Float32Array
};
var zc = {
  9728: Bt3,
  9729: Ht4,
  9984: pa,
  9985: tu,
  9986: Qr3,
  9987: jn3
};
var Bc = {
  33071: Zt3,
  33648: to,
  10497: Rn3
};
var aa = {
  SCALAR: 1,
  VEC2: 2,
  VEC3: 3,
  VEC4: 4,
  MAT2: 4,
  MAT3: 9,
  MAT4: 16
};
var Ma = {
  POSITION: "position",
  NORMAL: "normal",
  TANGENT: "tangent",
  TEXCOORD_0: "uv",
  TEXCOORD_1: "uv2",
  COLOR_0: "color",
  WEIGHTS_0: "skinWeight",
  JOINTS_0: "skinIndex"
};
var ti3 = {
  scale: "scale",
  translation: "position",
  rotation: "quaternion",
  weights: "morphTargetInfluences"
};
var f_ = {
  CUBICSPLINE: void 0,
  // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each
  // keyframe track will be initialized with a default interpolation type, then modified.
  LINEAR: As,
  STEP: er3
};
var la = {
  OPAQUE: "OPAQUE",
  MASK: "MASK",
  BLEND: "BLEND"
};
function p_(a22) {
  return a22.DefaultMaterial === void 0 && (a22.DefaultMaterial = new ur3({
    color: 16777215,
    emissive: 0,
    metalness: 1,
    roughness: 1,
    transparent: false,
    depthTest: true,
    side: Pn3
  })), a22.DefaultMaterial;
}
function Xs(a22, e11, t19) {
  for (const n33 in t19.extensions)
    a22[n33] === void 0 && (e11.userData.gltfExtensions = e11.userData.gltfExtensions || {}, e11.userData.gltfExtensions[n33] = t19.extensions[n33]);
}
function ii3(a22, e11) {
  e11.extras !== void 0 && (typeof e11.extras == "object" ? Object.assign(a22.userData, e11.extras) : console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, " + e11.extras));
}
function m_(a22, e11, t19) {
  let n33 = false, i27 = false, s18 = false;
  for (let l25 = 0, u35 = e11.length; l25 < u35; l25++) {
    const h26 = e11[l25];
    if (h26.POSITION !== void 0 && (n33 = true), h26.NORMAL !== void 0 && (i27 = true), h26.COLOR_0 !== void 0 && (s18 = true), n33 && i27 && s18)
      break;
  }
  if (!n33 && !i27 && !s18)
    return Promise.resolve(a22);
  const r24 = [], o12 = [], c27 = [];
  for (let l25 = 0, u35 = e11.length; l25 < u35; l25++) {
    const h26 = e11[l25];
    if (n33) {
      const d34 = h26.POSITION !== void 0 ? t19.getDependency("accessor", h26.POSITION) : a22.attributes.position;
      r24.push(d34);
    }
    if (i27) {
      const d34 = h26.NORMAL !== void 0 ? t19.getDependency("accessor", h26.NORMAL) : a22.attributes.normal;
      o12.push(d34);
    }
    if (s18) {
      const d34 = h26.COLOR_0 !== void 0 ? t19.getDependency("accessor", h26.COLOR_0) : a22.attributes.color;
      c27.push(d34);
    }
  }
  return Promise.all([
    Promise.all(r24),
    Promise.all(o12),
    Promise.all(c27)
  ]).then(function(l25) {
    const u35 = l25[0], h26 = l25[1], d34 = l25[2];
    return n33 && (a22.morphAttributes.position = u35), i27 && (a22.morphAttributes.normal = h26), s18 && (a22.morphAttributes.color = d34), a22.morphTargetsRelative = true, a22;
  });
}
function g_(a22, e11) {
  if (a22.updateMorphTargets(), e11.weights !== void 0)
    for (let t19 = 0, n33 = e11.weights.length; t19 < n33; t19++)
      a22.morphTargetInfluences[t19] = e11.weights[t19];
  if (e11.extras && Array.isArray(e11.extras.targetNames)) {
    const t19 = e11.extras.targetNames;
    if (a22.morphTargetInfluences.length === t19.length) {
      a22.morphTargetDictionary = {};
      for (let n33 = 0, i27 = t19.length; n33 < i27; n33++)
        a22.morphTargetDictionary[t19[n33]] = n33;
    } else
      console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.");
  }
}
function __(a22) {
  const e11 = a22.extensions && a22.extensions[tt6.KHR_DRACO_MESH_COMPRESSION];
  let t19;
  return e11 ? t19 = "draco:" + e11.bufferView + ":" + e11.indices + ":" + Vc(e11.attributes) : t19 = a22.indices + ":" + Vc(a22.attributes) + ":" + a22.mode, t19;
}
function Vc(a22) {
  let e11 = "";
  const t19 = Object.keys(a22).sort();
  for (let n33 = 0, i27 = t19.length; n33 < i27; n33++)
    e11 += t19[n33] + ":" + a22[t19[n33]] + ";";
  return e11;
}
function Sa(a22) {
  switch (a22) {
    case Int8Array:
      return 1 / 127;
    case Uint8Array:
      return 1 / 255;
    case Int16Array:
      return 1 / 32767;
    case Uint16Array:
      return 1 / 65535;
    default:
      throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.");
  }
}
function x_(a22) {
  return a22.search(/\.jpe?g($|\?)/i) > 0 || a22.search(/^data\:image\/jpeg/) === 0 ? "image/jpeg" : a22.search(/\.webp($|\?)/i) > 0 || a22.search(/^data\:image\/webp/) === 0 ? "image/webp" : "image/png";
}
var y_ = new Ve4();
var v_ = class {
  constructor(e11 = {}, t19 = {}) {
    this.json = e11, this.extensions = {}, this.plugins = {}, this.options = t19, this.cache = new j0(), this.associations = /* @__PURE__ */ new Map(), this.primitiveCache = {}, this.nodeCache = {}, this.meshCache = { refs: {}, uses: {} }, this.cameraCache = { refs: {}, uses: {} }, this.lightCache = { refs: {}, uses: {} }, this.sourceCache = {}, this.textureCache = {}, this.nodeNamesUsed = {};
    let n33 = false, i27 = false, s18 = -1;
    typeof navigator < "u" && (n33 = /^((?!chrome|android).)*safari/i.test(navigator.userAgent) === true, i27 = navigator.userAgent.indexOf("Firefox") > -1, s18 = i27 ? navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1] : -1), typeof createImageBitmap > "u" || n33 || i27 && s18 < 98 ? this.textureLoader = new za(this.options.manager) : this.textureLoader = new U0(this.options.manager), this.textureLoader.setCrossOrigin(this.options.crossOrigin), this.textureLoader.setRequestHeader(this.options.requestHeader), this.fileLoader = new dr3(this.options.manager), this.fileLoader.setResponseType("arraybuffer"), this.options.crossOrigin === "use-credentials" && this.fileLoader.setWithCredentials(true);
  }
  setExtensions(e11) {
    this.extensions = e11;
  }
  setPlugins(e11) {
    this.plugins = e11;
  }
  parse(e11, t19) {
    const n33 = this, i27 = this.json, s18 = this.extensions;
    this.cache.removeAll(), this.nodeCache = {}, this._invokeAll(function(r24) {
      return r24._markDefs && r24._markDefs();
    }), Promise.all(this._invokeAll(function(r24) {
      return r24.beforeRoot && r24.beforeRoot();
    })).then(function() {
      return Promise.all([
        n33.getDependencies("scene"),
        n33.getDependencies("animation"),
        n33.getDependencies("camera")
      ]);
    }).then(function(r24) {
      const o12 = {
        scene: r24[0][i27.scene || 0],
        scenes: r24[0],
        animations: r24[1],
        cameras: r24[2],
        asset: i27.asset,
        parser: n33,
        userData: {}
      };
      Xs(s18, o12, i27), ii3(o12, i27), Promise.all(n33._invokeAll(function(c27) {
        return c27.afterRoot && c27.afterRoot(o12);
      })).then(function() {
        e11(o12);
      });
    }).catch(t19);
  }
  /**
   * Marks the special nodes/meshes in json for efficient parse.
   */
  _markDefs() {
    const e11 = this.json.nodes || [], t19 = this.json.skins || [], n33 = this.json.meshes || [];
    for (let i27 = 0, s18 = t19.length; i27 < s18; i27++) {
      const r24 = t19[i27].joints;
      for (let o12 = 0, c27 = r24.length; o12 < c27; o12++)
        e11[r24[o12]].isBone = true;
    }
    for (let i27 = 0, s18 = e11.length; i27 < s18; i27++) {
      const r24 = e11[i27];
      r24.mesh !== void 0 && (this._addNodeRef(this.meshCache, r24.mesh), r24.skin !== void 0 && (n33[r24.mesh].isSkinnedMesh = true)), r24.camera !== void 0 && this._addNodeRef(this.cameraCache, r24.camera);
    }
  }
  /**
   * Counts references to shared node / Object3D resources. These resources
   * can be reused, or "instantiated", at multiple nodes in the scene
   * hierarchy. Mesh, Camera, and Light instances are instantiated and must
   * be marked. Non-scenegraph resources (like Materials, Geometries, and
   * Textures) can be reused directly and are not marked here.
   *
   * Example: CesiumMilkTruck sample model reuses "Wheel" meshes.
   */
  _addNodeRef(e11, t19) {
    t19 !== void 0 && (e11.refs[t19] === void 0 && (e11.refs[t19] = e11.uses[t19] = 0), e11.refs[t19]++);
  }
  /** Returns a reference to a shared resource, cloning it if necessary. */
  _getNodeRef(e11, t19, n33) {
    if (e11.refs[t19] <= 1)
      return n33;
    const i27 = n33.clone(), s18 = (r24, o12) => {
      const c27 = this.associations.get(r24);
      c27 != null && this.associations.set(o12, c27);
      for (const [l25, u35] of r24.children.entries())
        s18(u35, o12.children[l25]);
    };
    return s18(n33, i27), i27.name += "_instance_" + e11.uses[t19]++, i27;
  }
  _invokeOne(e11) {
    const t19 = Object.values(this.plugins);
    t19.push(this);
    for (let n33 = 0; n33 < t19.length; n33++) {
      const i27 = e11(t19[n33]);
      if (i27)
        return i27;
    }
    return null;
  }
  _invokeAll(e11) {
    const t19 = Object.values(this.plugins);
    t19.unshift(this);
    const n33 = [];
    for (let i27 = 0; i27 < t19.length; i27++) {
      const s18 = e11(t19[i27]);
      s18 && n33.push(s18);
    }
    return n33;
  }
  /**
   * Requests the specified dependency asynchronously, with caching.
   * @param {string} type
   * @param {number} index
   * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}
   */
  getDependency(e11, t19) {
    const n33 = e11 + ":" + t19;
    let i27 = this.cache.get(n33);
    if (!i27) {
      switch (e11) {
        case "scene":
          i27 = this.loadScene(t19);
          break;
        case "node":
          i27 = this._invokeOne(function(s18) {
            return s18.loadNode && s18.loadNode(t19);
          });
          break;
        case "mesh":
          i27 = this._invokeOne(function(s18) {
            return s18.loadMesh && s18.loadMesh(t19);
          });
          break;
        case "accessor":
          i27 = this.loadAccessor(t19);
          break;
        case "bufferView":
          i27 = this._invokeOne(function(s18) {
            return s18.loadBufferView && s18.loadBufferView(t19);
          });
          break;
        case "buffer":
          i27 = this.loadBuffer(t19);
          break;
        case "material":
          i27 = this._invokeOne(function(s18) {
            return s18.loadMaterial && s18.loadMaterial(t19);
          });
          break;
        case "texture":
          i27 = this._invokeOne(function(s18) {
            return s18.loadTexture && s18.loadTexture(t19);
          });
          break;
        case "skin":
          i27 = this.loadSkin(t19);
          break;
        case "animation":
          i27 = this._invokeOne(function(s18) {
            return s18.loadAnimation && s18.loadAnimation(t19);
          });
          break;
        case "camera":
          i27 = this.loadCamera(t19);
          break;
        default:
          if (i27 = this._invokeOne(function(s18) {
            return s18 != this && s18.getDependency && s18.getDependency(e11, t19);
          }), !i27)
            throw new Error("Unknown type: " + e11);
          break;
      }
      this.cache.add(n33, i27);
    }
    return i27;
  }
  /**
   * Requests all dependencies of the specified type asynchronously, with caching.
   * @param {string} type
   * @return {Promise<Array<Object>>}
   */
  getDependencies(e11) {
    let t19 = this.cache.get(e11);
    if (!t19) {
      const n33 = this, i27 = this.json[e11 + (e11 === "mesh" ? "es" : "s")] || [];
      t19 = Promise.all(i27.map(function(s18, r24) {
        return n33.getDependency(e11, r24);
      })), this.cache.add(e11, t19);
    }
    return t19;
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views
   * @param {number} bufferIndex
   * @return {Promise<ArrayBuffer>}
   */
  loadBuffer(e11) {
    const t19 = this.json.buffers[e11], n33 = this.fileLoader;
    if (t19.type && t19.type !== "arraybuffer")
      throw new Error("THREE.GLTFLoader: " + t19.type + " buffer type is not supported.");
    if (t19.uri === void 0 && e11 === 0)
      return Promise.resolve(this.extensions[tt6.KHR_BINARY_GLTF].body);
    const i27 = this.options;
    return new Promise(function(s18, r24) {
      n33.load(sr3.resolveURL(t19.uri, i27.path), s18, void 0, function() {
        r24(new Error('THREE.GLTFLoader: Failed to load buffer "' + t19.uri + '".'));
      });
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views
   * @param {number} bufferViewIndex
   * @return {Promise<ArrayBuffer>}
   */
  loadBufferView(e11) {
    const t19 = this.json.bufferViews[e11];
    return this.getDependency("buffer", t19.buffer).then(function(n33) {
      const i27 = t19.byteLength || 0, s18 = t19.byteOffset || 0;
      return n33.slice(s18, s18 + i27);
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors
   * @param {number} accessorIndex
   * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}
   */
  loadAccessor(e11) {
    const t19 = this, n33 = this.json, i27 = this.json.accessors[e11];
    if (i27.bufferView === void 0 && i27.sparse === void 0) {
      const r24 = aa[i27.type], o12 = vs[i27.componentType], c27 = i27.normalized === true, l25 = new o12(i27.count * r24);
      return Promise.resolve(new Gt3(l25, r24, c27));
    }
    const s18 = [];
    return i27.bufferView !== void 0 ? s18.push(this.getDependency("bufferView", i27.bufferView)) : s18.push(null), i27.sparse !== void 0 && (s18.push(this.getDependency("bufferView", i27.sparse.indices.bufferView)), s18.push(this.getDependency("bufferView", i27.sparse.values.bufferView))), Promise.all(s18).then(function(r24) {
      const o12 = r24[0], c27 = aa[i27.type], l25 = vs[i27.componentType], u35 = l25.BYTES_PER_ELEMENT, h26 = u35 * c27, d34 = i27.byteOffset || 0, p26 = i27.bufferView !== void 0 ? n33.bufferViews[i27.bufferView].byteStride : void 0, g31 = i27.normalized === true;
      let y33, m33;
      if (p26 && p26 !== h26) {
        const f39 = Math.floor(d34 / p26), E24 = "InterleavedBuffer:" + i27.bufferView + ":" + i27.componentType + ":" + f39 + ":" + i27.count;
        let b33 = t19.cache.get(E24);
        b33 || (y33 = new l25(o12, f39 * p26, i27.count * p26 / u35), b33 = new d0(y33, p26 / u35), t19.cache.add(E24, b33)), m33 = new Na(b33, c27, d34 % p26 / u35, g31);
      } else
        o12 === null ? y33 = new l25(i27.count * c27) : y33 = new l25(o12, d34, i27.count * c27), m33 = new Gt3(y33, c27, g31);
      if (i27.sparse !== void 0) {
        const f39 = aa.SCALAR, E24 = vs[i27.sparse.indices.componentType], b33 = i27.sparse.indices.byteOffset || 0, w29 = i27.sparse.values.byteOffset || 0, S21 = new E24(r24[1], b33, i27.sparse.count * f39), D17 = new l25(r24[2], w29, i27.sparse.count * c27);
        o12 !== null && (m33 = new Gt3(m33.array.slice(), m33.itemSize, m33.normalized));
        for (let N19 = 0, I16 = S21.length; N19 < I16; N19++) {
          const v30 = S21[N19];
          if (m33.setX(v30, D17[N19 * c27]), c27 >= 2 && m33.setY(v30, D17[N19 * c27 + 1]), c27 >= 3 && m33.setZ(v30, D17[N19 * c27 + 2]), c27 >= 4 && m33.setW(v30, D17[N19 * c27 + 3]), c27 >= 5)
            throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.");
        }
      }
      return m33;
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures
   * @param {number} textureIndex
   * @return {Promise<THREE.Texture|null>}
   */
  loadTexture(e11) {
    const t19 = this.json, n33 = this.options, s18 = t19.textures[e11].source, r24 = t19.images[s18];
    let o12 = this.textureLoader;
    if (r24.uri) {
      const c27 = n33.manager.getHandler(r24.uri);
      c27 !== null && (o12 = c27);
    }
    return this.loadTextureImage(e11, s18, o12);
  }
  loadTextureImage(e11, t19, n33) {
    const i27 = this, s18 = this.json, r24 = s18.textures[e11], o12 = s18.images[t19], c27 = (o12.uri || o12.bufferView) + ":" + r24.sampler;
    if (this.textureCache[c27])
      return this.textureCache[c27];
    const l25 = this.loadImageSource(t19, n33).then(function(u35) {
      u35.flipY = false, u35.name = r24.name || o12.name || "", u35.name === "" && typeof o12.uri == "string" && o12.uri.startsWith("data:image/") === false && (u35.name = o12.uri);
      const d34 = (s18.samplers || {})[r24.sampler] || {};
      return u35.magFilter = zc[d34.magFilter] || Ht4, u35.minFilter = zc[d34.minFilter] || jn3, u35.wrapS = Bc[d34.wrapS] || Rn3, u35.wrapT = Bc[d34.wrapT] || Rn3, i27.associations.set(u35, { textures: e11 }), u35;
    }).catch(function() {
      return null;
    });
    return this.textureCache[c27] = l25, l25;
  }
  loadImageSource(e11, t19) {
    const n33 = this, i27 = this.json, s18 = this.options;
    if (this.sourceCache[e11] !== void 0)
      return this.sourceCache[e11].then((h26) => h26.clone());
    const r24 = i27.images[e11], o12 = self.URL || self.webkitURL;
    let c27 = r24.uri || "", l25 = false;
    if (r24.bufferView !== void 0)
      c27 = n33.getDependency("bufferView", r24.bufferView).then(function(h26) {
        l25 = true;
        const d34 = new Blob([h26], { type: r24.mimeType });
        return c27 = o12.createObjectURL(d34), c27;
      });
    else if (r24.uri === void 0)
      throw new Error("THREE.GLTFLoader: Image " + e11 + " is missing URI and bufferView");
    const u35 = Promise.resolve(c27).then(function(h26) {
      return new Promise(function(d34, p26) {
        let g31 = d34;
        t19.isImageBitmapLoader === true && (g31 = function(y33) {
          const m33 = new jt4(y33);
          m33.needsUpdate = true, d34(m33);
        }), t19.load(sr3.resolveURL(h26, s18.path), g31, void 0, p26);
      });
    }).then(function(h26) {
      return l25 === true && o12.revokeObjectURL(c27), h26.userData.mimeType = r24.mimeType || x_(r24.uri), h26;
    }).catch(function(h26) {
      throw console.error("THREE.GLTFLoader: Couldn't load texture", c27), h26;
    });
    return this.sourceCache[e11] = u35, u35;
  }
  /**
   * Asynchronously assigns a texture to the given material parameters.
   * @param {Object} materialParams
   * @param {string} mapName
   * @param {Object} mapDef
   * @return {Promise<Texture>}
   */
  assignTexture(e11, t19, n33, i27) {
    const s18 = this;
    return this.getDependency("texture", n33.index).then(function(r24) {
      if (!r24)
        return null;
      if (n33.texCoord !== void 0 && n33.texCoord > 0 && (r24 = r24.clone(), r24.channel = n33.texCoord), s18.extensions[tt6.KHR_TEXTURE_TRANSFORM]) {
        const o12 = n33.extensions !== void 0 ? n33.extensions[tt6.KHR_TEXTURE_TRANSFORM] : void 0;
        if (o12) {
          const c27 = s18.associations.get(r24);
          r24 = s18.extensions[tt6.KHR_TEXTURE_TRANSFORM].extendTexture(r24, o12), s18.associations.set(r24, c27);
        }
      }
      return i27 !== void 0 && (r24.encoding = i27), e11[t19] = r24, r24;
    });
  }
  /**
   * Assigns final material to a Mesh, Line, or Points instance. The instance
   * already has a material (generated from the glTF material options alone)
   * but reuse of the same glTF material may require multiple threejs materials
   * to accommodate different primitive types, defines, etc. New materials will
   * be created if necessary, and reused from a cache.
   * @param  {Object3D} mesh Mesh, Line, or Points instance.
   */
  assignFinalMaterial(e11) {
    const t19 = e11.geometry;
    let n33 = e11.material;
    const i27 = t19.attributes.tangent === void 0, s18 = t19.attributes.color !== void 0, r24 = t19.attributes.normal === void 0;
    if (e11.isPoints) {
      const o12 = "PointsMaterial:" + n33.uuid;
      let c27 = this.cache.get(o12);
      c27 || (c27 = new Tu(), mn3.prototype.copy.call(c27, n33), c27.color.copy(n33.color), c27.map = n33.map, c27.sizeAttenuation = false, this.cache.add(o12, c27)), n33 = c27;
    } else if (e11.isLine) {
      const o12 = "LineBasicMaterial:" + n33.uuid;
      let c27 = this.cache.get(o12);
      c27 || (c27 = new Ls(), mn3.prototype.copy.call(c27, n33), c27.color.copy(n33.color), c27.map = n33.map, this.cache.add(o12, c27)), n33 = c27;
    }
    if (i27 || s18 || r24) {
      let o12 = "ClonedMaterial:" + n33.uuid + ":";
      i27 && (o12 += "derivative-tangents:"), s18 && (o12 += "vertex-colors:"), r24 && (o12 += "flat-shading:");
      let c27 = this.cache.get(o12);
      c27 || (c27 = n33.clone(), s18 && (c27.vertexColors = true), r24 && (c27.flatShading = true), i27 && (c27.normalScale && (c27.normalScale.y *= -1), c27.clearcoatNormalScale && (c27.clearcoatNormalScale.y *= -1)), this.cache.add(o12, c27), this.associations.set(c27, this.associations.get(n33))), n33 = c27;
    }
    e11.material = n33;
  }
  getMaterialType() {
    return ur3;
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials
   * @param {number} materialIndex
   * @return {Promise<Material>}
   */
  loadMaterial(e11) {
    const t19 = this, n33 = this.json, i27 = this.extensions, s18 = n33.materials[e11];
    let r24;
    const o12 = {}, c27 = s18.extensions || {}, l25 = [];
    if (c27[tt6.KHR_MATERIALS_UNLIT]) {
      const h26 = i27[tt6.KHR_MATERIALS_UNLIT];
      r24 = h26.getMaterialType(), l25.push(h26.extendParams(o12, s18, t19));
    } else {
      const h26 = s18.pbrMetallicRoughness || {};
      if (o12.color = new ze4(1, 1, 1), o12.opacity = 1, Array.isArray(h26.baseColorFactor)) {
        const d34 = h26.baseColorFactor;
        o12.color.fromArray(d34), o12.opacity = d34[3];
      }
      h26.baseColorTexture !== void 0 && l25.push(t19.assignTexture(o12, "map", h26.baseColorTexture, st6)), o12.metalness = h26.metallicFactor !== void 0 ? h26.metallicFactor : 1, o12.roughness = h26.roughnessFactor !== void 0 ? h26.roughnessFactor : 1, h26.metallicRoughnessTexture !== void 0 && (l25.push(t19.assignTexture(o12, "metalnessMap", h26.metallicRoughnessTexture)), l25.push(t19.assignTexture(o12, "roughnessMap", h26.metallicRoughnessTexture))), r24 = this._invokeOne(function(d34) {
        return d34.getMaterialType && d34.getMaterialType(e11);
      }), l25.push(Promise.all(this._invokeAll(function(d34) {
        return d34.extendMaterialParams && d34.extendMaterialParams(e11, o12);
      })));
    }
    s18.doubleSided === true && (o12.side = fn3);
    const u35 = s18.alphaMode || la.OPAQUE;
    if (u35 === la.BLEND ? (o12.transparent = true, o12.depthWrite = false) : (o12.transparent = false, u35 === la.MASK && (o12.alphaTest = s18.alphaCutoff !== void 0 ? s18.alphaCutoff : 0.5)), s18.normalTexture !== void 0 && r24 !== Mn3 && (l25.push(t19.assignTexture(o12, "normalMap", s18.normalTexture)), o12.normalScale = new We4(1, 1), s18.normalTexture.scale !== void 0)) {
      const h26 = s18.normalTexture.scale;
      o12.normalScale.set(h26, h26);
    }
    return s18.occlusionTexture !== void 0 && r24 !== Mn3 && (l25.push(t19.assignTexture(o12, "aoMap", s18.occlusionTexture)), s18.occlusionTexture.strength !== void 0 && (o12.aoMapIntensity = s18.occlusionTexture.strength)), s18.emissiveFactor !== void 0 && r24 !== Mn3 && (o12.emissive = new ze4().fromArray(s18.emissiveFactor)), s18.emissiveTexture !== void 0 && r24 !== Mn3 && l25.push(t19.assignTexture(o12, "emissiveMap", s18.emissiveTexture, st6)), Promise.all(l25).then(function() {
      const h26 = new r24(o12);
      return s18.name && (h26.name = s18.name), ii3(h26, s18), t19.associations.set(h26, { materials: e11 }), s18.extensions && Xs(i27, h26, s18), h26;
    });
  }
  /** When Object3D instances are targeted by animation, they need unique names. */
  createUniqueName(e11) {
    const t19 = dt6.sanitizeNodeName(e11 || "");
    let n33 = t19;
    for (let i27 = 1; this.nodeNamesUsed[n33]; ++i27)
      n33 = t19 + "_" + i27;
    return this.nodeNamesUsed[n33] = true, n33;
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry
   *
   * Creates BufferGeometries from primitives.
   *
   * @param {Array<GLTF.Primitive>} primitives
   * @return {Promise<Array<BufferGeometry>>}
   */
  loadGeometries(e11) {
    const t19 = this, n33 = this.extensions, i27 = this.primitiveCache;
    function s18(o12) {
      return n33[tt6.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o12, t19).then(function(c27) {
        return Gc(c27, o12, t19);
      });
    }
    const r24 = [];
    for (let o12 = 0, c27 = e11.length; o12 < c27; o12++) {
      const l25 = e11[o12], u35 = __(l25), h26 = i27[u35];
      if (h26)
        r24.push(h26.promise);
      else {
        let d34;
        l25.extensions && l25.extensions[tt6.KHR_DRACO_MESH_COMPRESSION] ? d34 = s18(l25) : d34 = Gc(new Xt3(), l25, t19), i27[u35] = { primitive: l25, promise: d34 }, r24.push(d34);
      }
    }
    return Promise.all(r24);
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes
   * @param {number} meshIndex
   * @return {Promise<Group|Mesh|SkinnedMesh>}
   */
  loadMesh(e11) {
    const t19 = this, n33 = this.json, i27 = this.extensions, s18 = n33.meshes[e11], r24 = s18.primitives, o12 = [];
    for (let c27 = 0, l25 = r24.length; c27 < l25; c27++) {
      const u35 = r24[c27].material === void 0 ? p_(this.cache) : this.getDependency("material", r24[c27].material);
      o12.push(u35);
    }
    return o12.push(t19.loadGeometries(r24)), Promise.all(o12).then(function(c27) {
      const l25 = c27.slice(0, c27.length - 1), u35 = c27[c27.length - 1], h26 = [];
      for (let p26 = 0, g31 = u35.length; p26 < g31; p26++) {
        const y33 = u35[p26], m33 = r24[p26];
        let f39;
        const E24 = l25[p26];
        if (m33.mode === hn2.TRIANGLES || m33.mode === hn2.TRIANGLE_STRIP || m33.mode === hn2.TRIANGLE_FAN || m33.mode === void 0)
          f39 = s18.isSkinnedMesh === true ? new Su(y33, E24) : new Pt4(y33, E24), f39.isSkinnedMesh === true && f39.normalizeSkinWeights(), m33.mode === hn2.TRIANGLE_STRIP ? f39.geometry = Oc(f39.geometry, iu) : m33.mode === hn2.TRIANGLE_FAN && (f39.geometry = Oc(f39.geometry, ma));
        else if (m33.mode === hn2.LINES)
          f39 = new ka(y33, E24);
        else if (m33.mode === hn2.LINE_STRIP)
          f39 = new cr3(y33, E24);
        else if (m33.mode === hn2.LINE_LOOP)
          f39 = new _0(y33, E24);
        else if (m33.mode === hn2.POINTS)
          f39 = new x0(y33, E24);
        else
          throw new Error("THREE.GLTFLoader: Primitive mode unsupported: " + m33.mode);
        Object.keys(f39.geometry.morphAttributes).length > 0 && g_(f39, s18), f39.name = t19.createUniqueName(s18.name || "mesh_" + e11), ii3(f39, s18), m33.extensions && Xs(i27, f39, m33), t19.assignFinalMaterial(f39), h26.push(f39);
      }
      for (let p26 = 0, g31 = h26.length; p26 < g31; p26++)
        t19.associations.set(h26[p26], {
          meshes: e11,
          primitives: p26
        });
      if (h26.length === 1)
        return h26[0];
      const d34 = new Ct4();
      t19.associations.set(d34, { meshes: e11 });
      for (let p26 = 0, g31 = h26.length; p26 < g31; p26++)
        d34.add(h26[p26]);
      return d34;
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras
   * @param {number} cameraIndex
   * @return {Promise<THREE.Camera>}
   */
  loadCamera(e11) {
    let t19;
    const n33 = this.json.cameras[e11], i27 = n33[n33.type];
    if (!i27) {
      console.warn("THREE.GLTFLoader: Missing camera parameters.");
      return;
    }
    return n33.type === "perspective" ? t19 = new Vt3(ps.radToDeg(i27.yfov), i27.aspectRatio || 1, i27.znear || 1, i27.zfar || 2e6) : n33.type === "orthographic" && (t19 = new ho(-i27.xmag, i27.xmag, i27.ymag, -i27.ymag, i27.znear, i27.zfar)), n33.name && (t19.name = this.createUniqueName(n33.name)), ii3(t19, n33), Promise.resolve(t19);
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins
   * @param {number} skinIndex
   * @return {Promise<Skeleton>}
   */
  loadSkin(e11) {
    const t19 = this.json.skins[e11], n33 = [];
    for (let i27 = 0, s18 = t19.joints.length; i27 < s18; i27++)
      n33.push(this._loadNodeShallow(t19.joints[i27]));
    return t19.inverseBindMatrices !== void 0 ? n33.push(this.getDependency("accessor", t19.inverseBindMatrices)) : n33.push(null), Promise.all(n33).then(function(i27) {
      const s18 = i27.pop(), r24 = i27, o12 = [], c27 = [];
      for (let l25 = 0, u35 = r24.length; l25 < u35; l25++) {
        const h26 = r24[l25];
        if (h26) {
          o12.push(h26);
          const d34 = new Ve4();
          s18 !== null && d34.fromArray(s18.array, l25 * 16), c27.push(d34);
        } else
          console.warn('THREE.GLTFLoader: Joint "%s" could not be found.', t19.joints[l25]);
      }
      return new po(o12, c27);
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations
   * @param {number} animationIndex
   * @return {Promise<AnimationClip>}
   */
  loadAnimation(e11) {
    const n33 = this.json.animations[e11], i27 = n33.name ? n33.name : "animation_" + e11, s18 = [], r24 = [], o12 = [], c27 = [], l25 = [];
    for (let u35 = 0, h26 = n33.channels.length; u35 < h26; u35++) {
      const d34 = n33.channels[u35], p26 = n33.samplers[d34.sampler], g31 = d34.target, y33 = g31.node, m33 = n33.parameters !== void 0 ? n33.parameters[p26.input] : p26.input, f39 = n33.parameters !== void 0 ? n33.parameters[p26.output] : p26.output;
      g31.node !== void 0 && (s18.push(this.getDependency("node", y33)), r24.push(this.getDependency("accessor", m33)), o12.push(this.getDependency("accessor", f39)), c27.push(p26), l25.push(g31));
    }
    return Promise.all([
      Promise.all(s18),
      Promise.all(r24),
      Promise.all(o12),
      Promise.all(c27),
      Promise.all(l25)
    ]).then(function(u35) {
      const h26 = u35[0], d34 = u35[1], p26 = u35[2], g31 = u35[3], y33 = u35[4], m33 = [];
      for (let f39 = 0, E24 = h26.length; f39 < E24; f39++) {
        const b33 = h26[f39], w29 = d34[f39], S21 = p26[f39], D17 = g31[f39], N19 = y33[f39];
        if (b33 === void 0)
          continue;
        b33.updateMatrix();
        let I16;
        switch (ti3[N19.path]) {
          case ti3.weights:
            I16 = ir3;
            break;
          case ti3.rotation:
            I16 = ui3;
            break;
          case ti3.position:
          case ti3.scale:
          default:
            I16 = Pi;
            break;
        }
        const v30 = b33.name ? b33.name : b33.uuid, L11 = D17.interpolation !== void 0 ? f_[D17.interpolation] : As, G15 = [];
        ti3[N19.path] === ti3.weights ? b33.traverse(function(k27) {
          k27.morphTargetInfluences && G15.push(k27.name ? k27.name : k27.uuid);
        }) : G15.push(v30);
        let B21 = S21.array;
        if (S21.normalized) {
          const k27 = Sa(B21.constructor), V14 = new Float32Array(B21.length);
          for (let H15 = 0, W8 = B21.length; H15 < W8; H15++)
            V14[H15] = B21[H15] * k27;
          B21 = V14;
        }
        for (let k27 = 0, V14 = G15.length; k27 < V14; k27++) {
          const H15 = new I16(
            G15[k27] + "." + ti3[N19.path],
            w29.array,
            B21,
            L11
          );
          D17.interpolation === "CUBICSPLINE" && (H15.createInterpolant = function(te7) {
            const J11 = this instanceof ui3 ? d_ : Nu;
            return new J11(this.times, this.values, this.getValueSize() / 3, te7);
          }, H15.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true), m33.push(H15);
        }
      }
      return new ba(i27, void 0, m33);
    });
  }
  createNodeMesh(e11) {
    const t19 = this.json, n33 = this, i27 = t19.nodes[e11];
    return i27.mesh === void 0 ? null : n33.getDependency("mesh", i27.mesh).then(function(s18) {
      const r24 = n33._getNodeRef(n33.meshCache, i27.mesh, s18);
      return i27.weights !== void 0 && r24.traverse(function(o12) {
        if (o12.isMesh)
          for (let c27 = 0, l25 = i27.weights.length; c27 < l25; c27++)
            o12.morphTargetInfluences[c27] = i27.weights[c27];
      }), r24;
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy
   * @param {number} nodeIndex
   * @return {Promise<Object3D>}
   */
  loadNode(e11) {
    const t19 = this.json, n33 = this, i27 = t19.nodes[e11], s18 = n33._loadNodeShallow(e11), r24 = [], o12 = i27.children || [];
    for (let l25 = 0, u35 = o12.length; l25 < u35; l25++)
      r24.push(n33.getDependency("node", o12[l25]));
    const c27 = i27.skin === void 0 ? Promise.resolve(null) : n33.getDependency("skin", i27.skin);
    return Promise.all([
      s18,
      Promise.all(r24),
      c27
    ]).then(function(l25) {
      const u35 = l25[0], h26 = l25[1], d34 = l25[2];
      d34 !== null && u35.traverse(function(p26) {
        p26.isSkinnedMesh && p26.bind(d34, y_);
      });
      for (let p26 = 0, g31 = h26.length; p26 < g31; p26++)
        u35.add(h26[p26]);
      return u35;
    });
  }
  // ._loadNodeShallow() parses a single node.
  // skin and child nodes are created and added in .loadNode() (no '_' prefix).
  _loadNodeShallow(e11) {
    const t19 = this.json, n33 = this.extensions, i27 = this;
    if (this.nodeCache[e11] !== void 0)
      return this.nodeCache[e11];
    const s18 = t19.nodes[e11], r24 = s18.name ? i27.createUniqueName(s18.name) : "", o12 = [], c27 = i27._invokeOne(function(l25) {
      return l25.createNodeMesh && l25.createNodeMesh(e11);
    });
    return c27 && o12.push(c27), s18.camera !== void 0 && o12.push(i27.getDependency("camera", s18.camera).then(function(l25) {
      return i27._getNodeRef(i27.cameraCache, s18.camera, l25);
    })), i27._invokeAll(function(l25) {
      return l25.createNodeAttachment && l25.createNodeAttachment(e11);
    }).forEach(function(l25) {
      o12.push(l25);
    }), this.nodeCache[e11] = Promise.all(o12).then(function(l25) {
      let u35;
      if (s18.isBone === true ? u35 = new Ua() : l25.length > 1 ? u35 = new Ct4() : l25.length === 1 ? u35 = l25[0] : u35 = new _t3(), u35 !== l25[0])
        for (let h26 = 0, d34 = l25.length; h26 < d34; h26++)
          u35.add(l25[h26]);
      if (s18.name && (u35.userData.name = s18.name, u35.name = r24), ii3(u35, s18), s18.extensions && Xs(n33, u35, s18), s18.matrix !== void 0) {
        const h26 = new Ve4();
        h26.fromArray(s18.matrix), u35.applyMatrix4(h26);
      } else
        s18.translation !== void 0 && u35.position.fromArray(s18.translation), s18.rotation !== void 0 && u35.quaternion.fromArray(s18.rotation), s18.scale !== void 0 && u35.scale.fromArray(s18.scale);
      return i27.associations.has(u35) || i27.associations.set(u35, {}), i27.associations.get(u35).nodes = e11, u35;
    }), this.nodeCache[e11];
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes
   * @param {number} sceneIndex
   * @return {Promise<Group>}
   */
  loadScene(e11) {
    const t19 = this.extensions, n33 = this.json.scenes[e11], i27 = this, s18 = new Ct4();
    n33.name && (s18.name = i27.createUniqueName(n33.name)), ii3(s18, n33), n33.extensions && Xs(t19, s18, n33);
    const r24 = n33.nodes || [], o12 = [];
    for (let c27 = 0, l25 = r24.length; c27 < l25; c27++)
      o12.push(i27.getDependency("node", r24[c27]));
    return Promise.all(o12).then(function(c27) {
      for (let u35 = 0, h26 = c27.length; u35 < h26; u35++)
        s18.add(c27[u35]);
      const l25 = (u35) => {
        const h26 = /* @__PURE__ */ new Map();
        for (const [d34, p26] of i27.associations)
          (d34 instanceof mn3 || d34 instanceof jt4) && h26.set(d34, p26);
        return u35.traverse((d34) => {
          const p26 = i27.associations.get(d34);
          p26 != null && h26.set(d34, p26);
        }), h26;
      };
      return i27.associations = l25(s18), s18;
    });
  }
};
function b_(a22, e11, t19) {
  const n33 = e11.attributes, i27 = new qn3();
  if (n33.POSITION !== void 0) {
    const o12 = t19.json.accessors[n33.POSITION], c27 = o12.min, l25 = o12.max;
    if (c27 !== void 0 && l25 !== void 0) {
      if (i27.set(
        new U7(c27[0], c27[1], c27[2]),
        new U7(l25[0], l25[1], l25[2])
      ), o12.normalized) {
        const u35 = Sa(vs[o12.componentType]);
        i27.min.multiplyScalar(u35), i27.max.multiplyScalar(u35);
      }
    } else {
      console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");
      return;
    }
  } else
    return;
  const s18 = e11.targets;
  if (s18 !== void 0) {
    const o12 = new U7(), c27 = new U7();
    for (let l25 = 0, u35 = s18.length; l25 < u35; l25++) {
      const h26 = s18[l25];
      if (h26.POSITION !== void 0) {
        const d34 = t19.json.accessors[h26.POSITION], p26 = d34.min, g31 = d34.max;
        if (p26 !== void 0 && g31 !== void 0) {
          if (c27.setX(Math.max(Math.abs(p26[0]), Math.abs(g31[0]))), c27.setY(Math.max(Math.abs(p26[1]), Math.abs(g31[1]))), c27.setZ(Math.max(Math.abs(p26[2]), Math.abs(g31[2]))), d34.normalized) {
            const y33 = Sa(vs[d34.componentType]);
            c27.multiplyScalar(y33);
          }
          o12.max(c27);
        } else
          console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");
      }
    }
    i27.expandByVector(o12);
  }
  a22.boundingBox = i27;
  const r24 = new Xn3();
  i27.getCenter(r24.center), r24.radius = i27.min.distanceTo(i27.max) / 2, a22.boundingSphere = r24;
}
function Gc(a22, e11, t19) {
  const n33 = e11.attributes, i27 = [];
  function s18(r24, o12) {
    return t19.getDependency("accessor", r24).then(function(c27) {
      a22.setAttribute(o12, c27);
    });
  }
  for (const r24 in n33) {
    const o12 = Ma[r24] || r24.toLowerCase();
    o12 in a22.attributes || i27.push(s18(n33[r24], o12));
  }
  if (e11.indices !== void 0 && !a22.index) {
    const r24 = t19.getDependency("accessor", e11.indices).then(function(o12) {
      a22.setIndex(o12);
    });
    i27.push(r24);
  }
  return ii3(a22, e11), b_(a22, e11, t19), Promise.all(i27).then(function() {
    return e11.targets !== void 0 ? m_(a22, e11.targets, t19) : a22;
  });
}
var Hc = { type: "change" };
var ca = { type: "start" };
var Wc = { type: "end" };
var Uu = class extends Ni3 {
  constructor(e11, t19) {
    super(), this.object = e11, this.domElement = t19, this.domElement.style.touchAction = "none", this.enabled = true, this.target = new U7(), this.minDistance = 0, this.maxDistance = 1 / 0, this.minZoom = 0, this.maxZoom = 1 / 0, this.minPolarAngle = 0, this.maxPolarAngle = Math.PI, this.minAzimuthAngle = -1 / 0, this.maxAzimuthAngle = 1 / 0, this.enableDamping = false, this.dampingFactor = 0.05, this.enableZoom = true, this.zoomSpeed = 1, this.enableRotate = true, this.rotateSpeed = 1, this.enablePan = true, this.panSpeed = 1, this.screenSpacePanning = true, this.keyPanSpeed = 7, this.autoRotate = false, this.autoRotateSpeed = 2, this.keys = { LEFT: "ArrowLeft", UP: "ArrowUp", RIGHT: "ArrowRight", BOTTOM: "ArrowDown" }, this.mouseButtons = { LEFT: qi.ROTATE, MIDDLE: qi.DOLLY, RIGHT: qi.PAN }, this.touches = { ONE: Xi.ROTATE, TWO: Xi.DOLLY_PAN }, this.target0 = this.target.clone(), this.position0 = this.object.position.clone(), this.zoom0 = this.object.zoom, this._domElementKeyEvents = null, this.getPolarAngle = function() {
      return o12.phi;
    }, this.getAzimuthalAngle = function() {
      return o12.theta;
    }, this.getDistance = function() {
      return this.object.position.distanceTo(this.target);
    }, this.listenToKeyEvents = function(O20) {
      O20.addEventListener("keydown", ct11), this._domElementKeyEvents = O20;
    }, this.stopListenToKeyEvents = function() {
      this._domElementKeyEvents.removeEventListener("keydown", ct11), this._domElementKeyEvents = null;
    }, this.saveState = function() {
      n33.target0.copy(n33.target), n33.position0.copy(n33.object.position), n33.zoom0 = n33.object.zoom;
    }, this.reset = function() {
      n33.target.copy(n33.target0), n33.object.position.copy(n33.position0), n33.object.zoom = n33.zoom0, n33.object.updateProjectionMatrix(), n33.dispatchEvent(Hc), n33.update(), s18 = i27.NONE;
    }, this.update = function() {
      const O20 = new U7(), ae7 = new qt3().setFromUnitVectors(e11.up, new U7(0, 1, 0)), Z11 = ae7.clone().invert(), ye7 = new U7(), Te7 = new qt3(), Le7 = 2 * Math.PI;
      return function() {
        const Ce7 = n33.object.position;
        O20.copy(Ce7).sub(n33.target), O20.applyQuaternion(ae7), o12.setFromVector3(O20), n33.autoRotate && s18 === i27.NONE && v30(N19()), n33.enableDamping ? (o12.theta += c27.theta * n33.dampingFactor, o12.phi += c27.phi * n33.dampingFactor) : (o12.theta += c27.theta, o12.phi += c27.phi);
        let Ge7 = n33.minAzimuthAngle, Xe7 = n33.maxAzimuthAngle;
        return isFinite(Ge7) && isFinite(Xe7) && (Ge7 < -Math.PI ? Ge7 += Le7 : Ge7 > Math.PI && (Ge7 -= Le7), Xe7 < -Math.PI ? Xe7 += Le7 : Xe7 > Math.PI && (Xe7 -= Le7), Ge7 <= Xe7 ? o12.theta = Math.max(Ge7, Math.min(Xe7, o12.theta)) : o12.theta = o12.theta > (Ge7 + Xe7) / 2 ? Math.max(Ge7, o12.theta) : Math.min(Xe7, o12.theta)), o12.phi = Math.max(n33.minPolarAngle, Math.min(n33.maxPolarAngle, o12.phi)), o12.makeSafe(), o12.radius *= l25, o12.radius = Math.max(n33.minDistance, Math.min(n33.maxDistance, o12.radius)), n33.enableDamping === true ? n33.target.addScaledVector(u35, n33.dampingFactor) : n33.target.add(u35), O20.setFromSpherical(o12), O20.applyQuaternion(Z11), Ce7.copy(n33.target).add(O20), n33.object.lookAt(n33.target), n33.enableDamping === true ? (c27.theta *= 1 - n33.dampingFactor, c27.phi *= 1 - n33.dampingFactor, u35.multiplyScalar(1 - n33.dampingFactor)) : (c27.set(0, 0, 0), u35.set(0, 0, 0)), l25 = 1, h26 || ye7.distanceToSquared(n33.object.position) > r24 || 8 * (1 - Te7.dot(n33.object.quaternion)) > r24 ? (n33.dispatchEvent(Hc), ye7.copy(n33.object.position), Te7.copy(n33.object.quaternion), h26 = false, true) : false;
      };
    }(), this.dispose = function() {
      n33.domElement.removeEventListener("contextmenu", C19), n33.domElement.removeEventListener("pointerdown", je7), n33.domElement.removeEventListener("pointercancel", xt8), n33.domElement.removeEventListener("wheel", et13), n33.domElement.removeEventListener("pointermove", bt9), n33.domElement.removeEventListener("pointerup", xt8), n33._domElementKeyEvents !== null && (n33._domElementKeyEvents.removeEventListener("keydown", ct11), n33._domElementKeyEvents = null);
    };
    const n33 = this, i27 = {
      NONE: -1,
      ROTATE: 0,
      DOLLY: 1,
      PAN: 2,
      TOUCH_ROTATE: 3,
      TOUCH_PAN: 4,
      TOUCH_DOLLY_PAN: 5,
      TOUCH_DOLLY_ROTATE: 6
    };
    let s18 = i27.NONE;
    const r24 = 1e-6, o12 = new Uc(), c27 = new Uc();
    let l25 = 1;
    const u35 = new U7();
    let h26 = false;
    const d34 = new We4(), p26 = new We4(), g31 = new We4(), y33 = new We4(), m33 = new We4(), f39 = new We4(), E24 = new We4(), b33 = new We4(), w29 = new We4(), S21 = [], D17 = {};
    function N19() {
      return 2 * Math.PI / 60 / 60 * n33.autoRotateSpeed;
    }
    function I16() {
      return Math.pow(0.95, n33.zoomSpeed);
    }
    function v30(O20) {
      c27.theta -= O20;
    }
    function L11(O20) {
      c27.phi -= O20;
    }
    const G15 = function() {
      const O20 = new U7();
      return function(Z11, ye7) {
        O20.setFromMatrixColumn(ye7, 0), O20.multiplyScalar(-Z11), u35.add(O20);
      };
    }(), B21 = function() {
      const O20 = new U7();
      return function(Z11, ye7) {
        n33.screenSpacePanning === true ? O20.setFromMatrixColumn(ye7, 1) : (O20.setFromMatrixColumn(ye7, 0), O20.crossVectors(n33.object.up, O20)), O20.multiplyScalar(Z11), u35.add(O20);
      };
    }(), k27 = function() {
      const O20 = new U7();
      return function(Z11, ye7) {
        const Te7 = n33.domElement;
        if (n33.object.isPerspectiveCamera) {
          const Le7 = n33.object.position;
          O20.copy(Le7).sub(n33.target);
          let Me7 = O20.length();
          Me7 *= Math.tan(n33.object.fov / 2 * Math.PI / 180), G15(2 * Z11 * Me7 / Te7.clientHeight, n33.object.matrix), B21(2 * ye7 * Me7 / Te7.clientHeight, n33.object.matrix);
        } else
          n33.object.isOrthographicCamera ? (G15(Z11 * (n33.object.right - n33.object.left) / n33.object.zoom / Te7.clientWidth, n33.object.matrix), B21(ye7 * (n33.object.top - n33.object.bottom) / n33.object.zoom / Te7.clientHeight, n33.object.matrix)) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."), n33.enablePan = false);
      };
    }();
    function V14(O20) {
      n33.object.isPerspectiveCamera ? l25 /= O20 : n33.object.isOrthographicCamera ? (n33.object.zoom = Math.max(n33.minZoom, Math.min(n33.maxZoom, n33.object.zoom * O20)), n33.object.updateProjectionMatrix(), h26 = true) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), n33.enableZoom = false);
    }
    function H15(O20) {
      n33.object.isPerspectiveCamera ? l25 *= O20 : n33.object.isOrthographicCamera ? (n33.object.zoom = Math.max(n33.minZoom, Math.min(n33.maxZoom, n33.object.zoom / O20)), n33.object.updateProjectionMatrix(), h26 = true) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), n33.enableZoom = false);
    }
    function W8(O20) {
      d34.set(O20.clientX, O20.clientY);
    }
    function te7(O20) {
      E24.set(O20.clientX, O20.clientY);
    }
    function J11(O20) {
      y33.set(O20.clientX, O20.clientY);
    }
    function ie8(O20) {
      p26.set(O20.clientX, O20.clientY), g31.subVectors(p26, d34).multiplyScalar(n33.rotateSpeed);
      const ae7 = n33.domElement;
      v30(2 * Math.PI * g31.x / ae7.clientHeight), L11(2 * Math.PI * g31.y / ae7.clientHeight), d34.copy(p26), n33.update();
    }
    function le7(O20) {
      b33.set(O20.clientX, O20.clientY), w29.subVectors(b33, E24), w29.y > 0 ? V14(I16()) : w29.y < 0 && H15(I16()), E24.copy(b33), n33.update();
    }
    function me9(O20) {
      m33.set(O20.clientX, O20.clientY), f39.subVectors(m33, y33).multiplyScalar(n33.panSpeed), k27(f39.x, f39.y), y33.copy(m33), n33.update();
    }
    function he8(O20) {
      O20.deltaY < 0 ? H15(I16()) : O20.deltaY > 0 && V14(I16()), n33.update();
    }
    function j18(O20) {
      let ae7 = false;
      switch (O20.code) {
        case n33.keys.UP:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? L11(2 * Math.PI * n33.rotateSpeed / n33.domElement.clientHeight) : k27(0, n33.keyPanSpeed), ae7 = true;
          break;
        case n33.keys.BOTTOM:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? L11(-2 * Math.PI * n33.rotateSpeed / n33.domElement.clientHeight) : k27(0, -n33.keyPanSpeed), ae7 = true;
          break;
        case n33.keys.LEFT:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? v30(2 * Math.PI * n33.rotateSpeed / n33.domElement.clientHeight) : k27(n33.keyPanSpeed, 0), ae7 = true;
          break;
        case n33.keys.RIGHT:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? v30(-2 * Math.PI * n33.rotateSpeed / n33.domElement.clientHeight) : k27(-n33.keyPanSpeed, 0), ae7 = true;
          break;
      }
      ae7 && (O20.preventDefault(), n33.update());
    }
    function X12() {
      if (S21.length === 1)
        d34.set(S21[0].pageX, S21[0].pageY);
      else {
        const O20 = 0.5 * (S21[0].pageX + S21[1].pageX), ae7 = 0.5 * (S21[0].pageY + S21[1].pageY);
        d34.set(O20, ae7);
      }
    }
    function ee7() {
      if (S21.length === 1)
        y33.set(S21[0].pageX, S21[0].pageY);
      else {
        const O20 = 0.5 * (S21[0].pageX + S21[1].pageX), ae7 = 0.5 * (S21[0].pageY + S21[1].pageY);
        y33.set(O20, ae7);
      }
    }
    function $24() {
      const O20 = S21[0].pageX - S21[1].pageX, ae7 = S21[0].pageY - S21[1].pageY, Z11 = Math.sqrt(O20 * O20 + ae7 * ae7);
      E24.set(0, Z11);
    }
    function z19() {
      n33.enableZoom && $24(), n33.enablePan && ee7();
    }
    function be7() {
      n33.enableZoom && $24(), n33.enableRotate && X12();
    }
    function Ee5(O20) {
      if (S21.length == 1)
        p26.set(O20.pageX, O20.pageY);
      else {
        const Z11 = _e7(O20), ye7 = 0.5 * (O20.pageX + Z11.x), Te7 = 0.5 * (O20.pageY + Z11.y);
        p26.set(ye7, Te7);
      }
      g31.subVectors(p26, d34).multiplyScalar(n33.rotateSpeed);
      const ae7 = n33.domElement;
      v30(2 * Math.PI * g31.x / ae7.clientHeight), L11(2 * Math.PI * g31.y / ae7.clientHeight), d34.copy(p26);
    }
    function pe8(O20) {
      if (S21.length === 1)
        m33.set(O20.pageX, O20.pageY);
      else {
        const ae7 = _e7(O20), Z11 = 0.5 * (O20.pageX + ae7.x), ye7 = 0.5 * (O20.pageY + ae7.y);
        m33.set(Z11, ye7);
      }
      f39.subVectors(m33, y33).multiplyScalar(n33.panSpeed), k27(f39.x, f39.y), y33.copy(m33);
    }
    function ke7(O20) {
      const ae7 = _e7(O20), Z11 = O20.pageX - ae7.x, ye7 = O20.pageY - ae7.y, Te7 = Math.sqrt(Z11 * Z11 + ye7 * ye7);
      b33.set(0, Te7), w29.set(0, Math.pow(b33.y / E24.y, n33.zoomSpeed)), V14(w29.y), E24.copy(b33);
    }
    function nt14(O20) {
      n33.enableZoom && ke7(O20), n33.enablePan && pe8(O20);
    }
    function Ie7(O20) {
      n33.enableZoom && ke7(O20), n33.enableRotate && Ee5(O20);
    }
    function je7(O20) {
      n33.enabled !== false && (S21.length === 0 && (n33.domElement.setPointerCapture(O20.pointerId), n33.domElement.addEventListener("pointermove", bt9), n33.domElement.addEventListener("pointerup", xt8)), Q11(O20), O20.pointerType === "touch" ? kt10(O20) : St8(O20));
    }
    function bt9(O20) {
      n33.enabled !== false && (O20.pointerType === "touch" ? P19(O20) : wt9(O20));
    }
    function xt8(O20) {
      de9(O20), S21.length === 0 && (n33.domElement.releasePointerCapture(O20.pointerId), n33.domElement.removeEventListener("pointermove", bt9), n33.domElement.removeEventListener("pointerup", xt8)), n33.dispatchEvent(Wc), s18 = i27.NONE;
    }
    function St8(O20) {
      let ae7;
      switch (O20.button) {
        case 0:
          ae7 = n33.mouseButtons.LEFT;
          break;
        case 1:
          ae7 = n33.mouseButtons.MIDDLE;
          break;
        case 2:
          ae7 = n33.mouseButtons.RIGHT;
          break;
        default:
          ae7 = -1;
      }
      switch (ae7) {
        case qi.DOLLY:
          if (n33.enableZoom === false)
            return;
          te7(O20), s18 = i27.DOLLY;
          break;
        case qi.ROTATE:
          if (O20.ctrlKey || O20.metaKey || O20.shiftKey) {
            if (n33.enablePan === false)
              return;
            J11(O20), s18 = i27.PAN;
          } else {
            if (n33.enableRotate === false)
              return;
            W8(O20), s18 = i27.ROTATE;
          }
          break;
        case qi.PAN:
          if (O20.ctrlKey || O20.metaKey || O20.shiftKey) {
            if (n33.enableRotate === false)
              return;
            W8(O20), s18 = i27.ROTATE;
          } else {
            if (n33.enablePan === false)
              return;
            J11(O20), s18 = i27.PAN;
          }
          break;
        default:
          s18 = i27.NONE;
      }
      s18 !== i27.NONE && n33.dispatchEvent(ca);
    }
    function wt9(O20) {
      switch (s18) {
        case i27.ROTATE:
          if (n33.enableRotate === false)
            return;
          ie8(O20);
          break;
        case i27.DOLLY:
          if (n33.enableZoom === false)
            return;
          le7(O20);
          break;
        case i27.PAN:
          if (n33.enablePan === false)
            return;
          me9(O20);
          break;
      }
    }
    function et13(O20) {
      n33.enabled === false || n33.enableZoom === false || s18 !== i27.NONE || (O20.preventDefault(), n33.dispatchEvent(ca), he8(O20), n33.dispatchEvent(Wc));
    }
    function ct11(O20) {
      n33.enabled === false || n33.enablePan === false || j18(O20);
    }
    function kt10(O20) {
      switch (fe7(O20), S21.length) {
        case 1:
          switch (n33.touches.ONE) {
            case Xi.ROTATE:
              if (n33.enableRotate === false)
                return;
              X12(), s18 = i27.TOUCH_ROTATE;
              break;
            case Xi.PAN:
              if (n33.enablePan === false)
                return;
              ee7(), s18 = i27.TOUCH_PAN;
              break;
            default:
              s18 = i27.NONE;
          }
          break;
        case 2:
          switch (n33.touches.TWO) {
            case Xi.DOLLY_PAN:
              if (n33.enableZoom === false && n33.enablePan === false)
                return;
              z19(), s18 = i27.TOUCH_DOLLY_PAN;
              break;
            case Xi.DOLLY_ROTATE:
              if (n33.enableZoom === false && n33.enableRotate === false)
                return;
              be7(), s18 = i27.TOUCH_DOLLY_ROTATE;
              break;
            default:
              s18 = i27.NONE;
          }
          break;
        default:
          s18 = i27.NONE;
      }
      s18 !== i27.NONE && n33.dispatchEvent(ca);
    }
    function P19(O20) {
      switch (fe7(O20), s18) {
        case i27.TOUCH_ROTATE:
          if (n33.enableRotate === false)
            return;
          Ee5(O20), n33.update();
          break;
        case i27.TOUCH_PAN:
          if (n33.enablePan === false)
            return;
          pe8(O20), n33.update();
          break;
        case i27.TOUCH_DOLLY_PAN:
          if (n33.enableZoom === false && n33.enablePan === false)
            return;
          nt14(O20), n33.update();
          break;
        case i27.TOUCH_DOLLY_ROTATE:
          if (n33.enableZoom === false && n33.enableRotate === false)
            return;
          Ie7(O20), n33.update();
          break;
        default:
          s18 = i27.NONE;
      }
    }
    function C19(O20) {
      n33.enabled !== false && O20.preventDefault();
    }
    function Q11(O20) {
      S21.push(O20);
    }
    function de9(O20) {
      delete D17[O20.pointerId];
      for (let ae7 = 0; ae7 < S21.length; ae7++)
        if (S21[ae7].pointerId == O20.pointerId) {
          S21.splice(ae7, 1);
          return;
        }
    }
    function fe7(O20) {
      let ae7 = D17[O20.pointerId];
      ae7 === void 0 && (ae7 = new We4(), D17[O20.pointerId] = ae7), ae7.set(O20.pageX, O20.pageY);
    }
    function _e7(O20) {
      const ae7 = O20.pointerId === S21[0].pointerId ? S21[1] : S21[0];
      return D17[ae7.pointerId];
    }
    n33.domElement.addEventListener("contextmenu", C19), n33.domElement.addEventListener("pointerdown", je7), n33.domElement.addEventListener("pointercancel", xt8), n33.domElement.addEventListener("wheel", et13, { passive: false }), this.update();
  }
};
var Ii = class _Ii {
  static createButton(e11) {
    const t19 = document.createElement("button");
    function n33() {
      let c27 = null;
      async function l25(h26) {
        h26.addEventListener("end", u35), await e11.xr.setSession(h26), t19.textContent = "EXIT VR", c27 = h26;
      }
      function u35() {
        c27.removeEventListener("end", u35), t19.textContent = "ENTER VR", c27 = null;
      }
      t19.style.display = "", t19.style.cursor = "pointer", t19.style.left = "calc(50% - 50px)", t19.style.width = "100px", t19.textContent = "ENTER VR", t19.onmouseenter = function() {
        t19.style.opacity = "1.0";
      }, t19.onmouseleave = function() {
        t19.style.opacity = "0.5";
      }, t19.onclick = function() {
        if (c27 === null) {
          const h26 = { optionalFeatures: ["local-floor", "bounded-floor", "hand-tracking", "layers"] };
          navigator.xr.requestSession("immersive-vr", h26).then(l25);
        } else
          c27.end();
      };
    }
    function i27() {
      t19.style.display = "", t19.style.cursor = "auto", t19.style.left = "calc(50% - 75px)", t19.style.width = "150px", t19.onmouseenter = null, t19.onmouseleave = null, t19.onclick = null;
    }
    function s18() {
      i27(), t19.textContent = "VR NOT SUPPORTED";
    }
    function r24(c27) {
      i27(), console.warn("Exception when trying to call xr.isSessionSupported", c27), t19.textContent = "VR NOT ALLOWED";
    }
    function o12(c27) {
      c27.style.position = "absolute", c27.style.bottom = "20px", c27.style.padding = "12px 6px", c27.style.border = "1px solid #fff", c27.style.borderRadius = "4px", c27.style.background = "rgba(0,0,0,0.1)", c27.style.color = "#fff", c27.style.font = "normal 13px sans-serif", c27.style.textAlign = "center", c27.style.opacity = "0.5", c27.style.outline = "none", c27.style.zIndex = "999";
    }
    if ("xr" in navigator)
      return t19.id = "VRButton", t19.style.display = "none", o12(t19), navigator.xr.isSessionSupported("immersive-vr").then(function(c27) {
        c27 ? n33() : s18(), c27 && _Ii.xrSessionIsGranted && t19.click();
      }).catch(r24), t19;
    {
      const c27 = document.createElement("a");
      return window.isSecureContext === false ? (c27.href = document.location.href.replace(/^http:/, "https:"), c27.innerHTML = "WEBXR NEEDS HTTPS") : (c27.href = "https://immersiveweb.dev/", c27.innerHTML = "WEBXR NOT AVAILABLE"), c27.style.left = "calc(50% - 90px)", c27.style.width = "180px", c27.style.textDecoration = "none", o12(c27), c27;
    }
  }
  static registerSessionGrantedListener() {
    if ("xr" in navigator) {
      if (/WebXRViewer\//i.test(navigator.userAgent))
        return;
      navigator.xr.addEventListener("sessiongranted", () => {
        _Ii.xrSessionIsGranted = true;
      });
    }
  }
};
Ii.xrSessionIsGranted = false;
Ii.registerSessionGrantedListener();
function Ai3(a22) {
  const e11 = new qt3();
  return a22.forEach((t19) => {
    const n33 = new U7(0, 0, 0);
    t19.axis === "x" && n33.setX(1), t19.axis === "y" && n33.setY(1), t19.axis === "z" && n33.setZ(1);
    const i27 = t19.degrees * Math.PI / 180;
    e11.premultiply(new qt3().setFromAxisAngle(n33, i27));
  }), e11;
}
function $s(a22) {
  const [e11, t19, n33, i27] = Ai3(a22);
  return [i27, e11, t19, n33];
}
function _o(a22) {
  return new qt3(a22[1], a22[2], a22[3], a22[0]);
}
function ku(a22) {
  if (a22.length === 3) {
    const [e11, t19, n33] = a22;
    return {
      translation: [e11, t19, 0],
      rotation: $s([{ axis: "z", degrees: n33 }])
    };
  } else if (a22.length === 4) {
    const [e11, t19, n33, i27] = a22;
    return {
      translation: [e11, t19, n33],
      rotation: $s([{ axis: "z", degrees: i27 }])
    };
  } else if (a22.length === 6) {
    const [e11, t19, n33, i27, s18, r24] = a22;
    return {
      translation: [e11, t19, n33],
      rotation: $s([
        { axis: "x", degrees: i27 },
        { axis: "y", degrees: s18 },
        { axis: "z", degrees: r24 }
      ])
    };
  } else if (a22.length === 7) {
    const e11 = a22.slice(0, 3), t19 = a22.slice(3, 7);
    return { translation: e11, rotation: t19 };
  }
  return Wa();
}
function Wa() {
  return {
    translation: [0, 0, 0],
    rotation: [0, 0, 0, 0]
  };
}
var Ou = [
  {
    game: "Reefscape",
    src: "/3d-models/Field3d_2025.glb",
    rotations: [{ axis: "x", degrees: 90 }],
    size: [57.57291667, 26.4167],
    unit: "foot"
  },
  {
    game: "Crescendo",
    src: "/3d-models/Field3d_2024.glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 180 }
    ],
    size: [54.2708333, 26.9375],
    unit: "foot"
  },
  {
    game: "Charged Up",
    src: "/3d-models/Field3d_2023.glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 180 }
    ],
    size: [54.27083, 26.2916],
    unit: "foot"
  },
  {
    game: "Rapid React",
    src: "/3d-models/Field3d_2022.glb",
    rotations: [{ axis: "x", degrees: 90 }],
    size: [54, 27],
    unit: "foot"
  },
  {
    game: "Infinite Recharge",
    src: "/3d-models/Field3d_2021.glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 90 }
    ],
    size: [52.4375, 26.9375],
    unit: "foot"
  },
  {
    game: "Evergreen",
    src: "/3d-models/Field3d_Evergreen.glb",
    rotations: [{ axis: "x", degrees: 90 }],
    size: [54, 27],
    unit: "foot"
  }
];
var ja = [
  {
    name: "KitBot",
    src: "/3d-models/Robot_KitBot.glb",
    rotations: [{ axis: "z", degrees: 90 }],
    position: [0.12, 3.15, 0]
  },
  {
    name: "Duck Bot",
    src: "/3d-models/Robot_Duck Bot.glb",
    rotations: [{ axis: "z", degrees: 90 }],
    position: [0, 0, 0]
  },
  {
    name: "Crab Bot",
    src: "/3d-models/Robot_Crab Bot.glb",
    rotations: [
      {
        axis: "z",
        degrees: 180
      }
    ],
    position: [0, 0, 0.045]
  },
  {
    name: "Bot-Bot Awakens (6328)",
    src: "/3d-models/Robot_Bot-Bot Awakens (6328).glb",
    rotations: [
      { axis: "z", degrees: 90 },
      { axis: "y", degrees: 90 }
    ],
    position: [0, 0, 0]
  },
  {
    name: "Bot-Bot Strikes Back (6328)",
    src: "/3d-models/Robot_Bot-Bot Strikes Back (6328).glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 90 }
    ],
    position: [0.05, 0, 0.06]
  },
  {
    name: "REV 2023 Starter Bot",
    src: "/3d-models/Robot_REV 2023 Starter Bot.glb",
    rotations: [
      {
        axis: "x",
        degrees: 90
      },
      {
        axis: "z",
        degrees: 90
      }
    ],
    position: [0, 0, 0],
    components: [
      {
        name: "0",
        src: "/3d-models/Robot_REV 2023 Starter Bot_0.glb",
        rotations: [
          {
            axis: "x",
            degrees: 90
          },
          {
            axis: "z",
            degrees: 90
          },
          {
            axis: "y",
            degrees: 211
          }
        ],
        position: [0.645, 0, 0.48]
      },
      {
        name: "1",
        src: "/3d-models/Robot_REV 2023 Starter Bot_1.glb",
        rotations: [
          {
            axis: "x",
            degrees: 90
          },
          {
            axis: "z",
            degrees: 90
          }
        ],
        position: [0.305, 0, -0.37]
      }
    ]
  }
];
var xo = [
  {
    name: "R2D2",
    content: `
    <robot name="flexible">
      <link name="base_link">
        <visual>
          <geometry>
            <cylinder length="0.6" radius="0.2"/>
          </geometry>
          <material name="blue">
            <color rgba="0 0 .8 1"/>
          </material>
        </visual>
      </link>
    
      <link name="right_leg">
        <visual>
          <geometry>
            <box size="0.6 .2 .1"/>
          </geometry>
          <origin rpy="0 1.57075 0" xyz="0 0 -0.3"/>
          <material name="white">
            <color rgba="1 1 1 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="base_to_right_leg" type="fixed">
        <parent link="base_link"/>
        <child link="right_leg"/>
        <origin xyz="0.22 0 .25"/>
      </joint>
    
      <link name="right_base">
        <visual>
          <geometry>
            <box size=".1 0.4 .1"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="right_base_joint" type="fixed">
        <parent link="right_leg"/>
        <child link="right_base"/>
        <origin xyz="0 0 -0.6"/>
      </joint>
    
      <link name="right_front_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black">
            <color rgba="0 0 0 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="right_front_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="right_base"/>
        <child link="right_front_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="right_back_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="right_back_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="right_base"/>
        <child link="right_back_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 -0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="left_leg">
        <visual>
          <geometry>
            <box size="0.6 .2 .1"/>
          </geometry>
          <origin rpy="0 1.57075 0" xyz="0 0 -0.3"/>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="base_to_left_leg" type="fixed">
        <parent link="base_link"/>
        <child link="left_leg"/>
        <origin xyz="-0.22 0 .25"/>
      </joint>
    
      <link name="left_base">
        <visual>
          <geometry>
            <box size=".1 0.4 .1"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="left_base_joint" type="fixed">
        <parent link="left_leg"/>
        <child link="left_base"/>
        <origin xyz="0 0 -0.6"/>
      </joint>
    
      <link name="left_front_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="left_front_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="left_base"/>
        <child link="left_front_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="left_back_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="left_back_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="left_base"/>
        <child link="left_back_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 -0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
      <joint name="gripper_extension" type="prismatic">
        <parent link="base_link"/>
        <child link="gripper_pole"/>
        <limit effort="1000.0" lower="-0.38" upper="0" velocity="0.5"/>
        <origin rpy="0 0 1.57075" xyz="0 0.19 .2"/>
      </joint>
    
      <link name="gripper_pole">
        <visual>
          <geometry>
            <cylinder length="0.2" radius=".01"/>
          </geometry>
          <origin rpy="0 1.57075 0 " xyz="0.1 0 0"/>
          <material name="Gray">
            <color rgba=".7 .7 .7 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="left_gripper_joint" type="revolute">
        <axis xyz="0 0 1"/>
        <limit effort="1000.0" lower="0.0" upper="0.548" velocity="0.5"/>
        <origin rpy="0 0 0" xyz="0.2 0.01 0"/>
        <parent link="gripper_pole"/>
        <child link="left_gripper"/>
      </joint>
    
      <link name="left_gripper">
        <visual>
          <origin rpy="0.0 0 0" xyz="0 0 0"/>
          <geometry>
            <box size="0.1 0.02 0.02"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="left_tip_joint" type="fixed">
        <parent link="left_gripper"/>
        <child link="left_tip"/>
      </joint>
    
      <link name="left_tip">
        <visual>
          <origin rpy="0.0 0 0" xyz="0.09137 0.00495 0"/>
          <geometry>
            <mesh filename="package://pr2_description/meshes/gripper_v0/l_finger_tip.dae"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="right_gripper_joint" type="revolute">
        <axis xyz="0 0 -1"/>
        <limit effort="1000.0" lower="0.0" upper="0.548" velocity="0.5"/>
        <origin rpy="0 0 0" xyz="0.2 -0.01 0"/>
        <parent link="gripper_pole"/>
        <child link="right_gripper"/>
      </joint>
    
      <link name="right_gripper">
        <visual>
          <origin rpy="-3.1415 0 0" xyz="0 0 0"/>
          <geometry>
             <box size="0.1 0.02 0.02"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="right_tip_joint" type="fixed">
        <parent link="right_gripper"/>
        <child link="right_tip"/>
      </joint>
    
      <link name="right_tip">
        <visual>
          <origin rpy="-3.1415 0 0" xyz="0.09137 0.00495 0"/>
          <geometry>
            <mesh filename="package://pr2_description/meshes/gripper_v0/l_finger_tip.dae"/>
          </geometry>
        </visual>
      </link>
    
      <link name="head">
        <visual>
          <geometry>
            <sphere radius="0.2"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="head_swivel" type="continuous">
        <parent link="base_link"/>
        <child link="head"/>
        <axis xyz="0 0 1"/>
        <origin xyz="0 0 0.3"/>
      </joint>
    
      <link name="box">
        <visual>
          <geometry>
            <box size=".08 .08 .08"/>
          </geometry>
          <material name="blue"/>
        </visual>
      </link>
    
      <joint name="tobox" type="fixed">
        <parent link="head"/>
        <child link="box"/>
        <origin xyz="0 0.1414 0.1414"/>
      </joint>
    
    </robot>
    
    `,
    rotations: [{ axis: "z", degrees: -90 }],
    position: [0, 0, 0.5]
  },
  {
    name: "PI Robot",
    content: `
    <robot name="pi_robot">

      <!-- * * * Link Definitions * * * -->

      <link name="base_link">
        <visual>
            <origin xyz="0 0 0.0425" rpy="0 0 0"/>
          <geometry>
            <box size="0.32 0.26 0.085"/>
          </geometry>
          <material name="Cyan1">
                <color rgba="0 0.9 0.9 1.0"/>
            </material>
        </visual>	
      </link>

      <link name="base_laser">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.025" length="0.07"/>
          </geometry>
          <material name="Black1">
                <color rgba="0.2 0.2 0.2 1.0"/>
            </material>
        </visual>	
      </link>

      <link name="cpu_link">
        <visual>
            <origin xyz="0 0 0.035" rpy="0 0 0"/>
          <geometry>
            <box size="0.19 0.19 0.07"/>
          </geometry>
          <material name="Cyan2">
                <color rgba="0 0.7 0.7 1.0"/>
            </material>
        </visual>	
      </link>

        <link name="upper_base_link">
        <visual>
          <origin xyz="0 0 0.05" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.085" length="0.10"/>
          </geometry>
            <material name="Cyan3">
            <color rgba="0 0.5 0.5 0"/>
          </material>
        </visual>
      </link>

        <link name="torso_link">
        <visual>
          <origin xyz="0 0 0.12" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.05" length="0.24"/>
          </geometry>
            <material name="Yellow2">
            <color rgba="0.8 0.8 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_pan_link">
        <visual>
          <origin xyz="0 0 0.0225" rpy="0 0 0"/>
          <geometry>
            <box size="0.05 0.045 0.045"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_tilt_link">
        <visual>
          <origin xyz="0 0 0.02" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.038 0.04"/>
          </geometry>
            <material name="Green2">
            <color rgba="0.1 0.8 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="neck_link">
        <visual>
          <origin xyz="0 0 0.021" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.042"/>
          </geometry>
            <material name="Green3">
            <color rgba="0.1 0.5 0.1 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_link">
        <visual>
          <origin xyz="0 0 0.025" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.07 0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <!--	
      <link name="eyes_link">
        <visual>
          <origin xyz="0 0 0.035" rpy="0 0 0" />
          <geometry>
            <box size="0.01 0.04 0.01" />
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>
      -->

      <link name="antenna_link">
        <visual>
          <origin xyz="0 0 0.035" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.002" length="0.05"/>
          </geometry>
            <material name="Grey3">
            <color rgba="0.8 0.8 0.8 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.025 0.015 0.05"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_shoulder_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.025 0.015 0.05"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_forward_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue1">
            <color rgba="0 0 0.9 1.0"/>
          </material>
        </visual>
      </link>
        
      <link name="right_shoulder_forward_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue1">
            <color rgba="0 0 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_up_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_shoulder_up_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_upper_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.05"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_upper_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.05"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_elbow_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 1.57"/>
          <geometry>
            <box size="0.035 0.035 0.05"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_elbow_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 1.57"/>
          <geometry>
            <box size="0.035 0.035 0.05"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_lower_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_lower_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_wrist_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_wrist_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_hand_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.01 0.06"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.7 0.7 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_hand_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.01 0.06"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <!-- * * * Joint Definitions * * * -->

      <joint name="cpu_joint" type="fixed">
          <parent link="base_link"/>
          <child link="cpu_link"/>
          <origin xyz="0.025 0 0.085" rpy="0 0 0"/>
      </joint>

      <joint name="base_laser_joint" type="fixed">
          <parent link="base_link"/>
          <child link="base_laser"/>
          <origin xyz="0.18 0 0.07" rpy="0 0 0"/>
      </joint>

      <joint name="upper_base_joint" type="fixed">
          <parent link="cpu_link"/>
          <child link="upper_base_link"/>
          <origin xyz="0 0 0.07" rpy="0 0 0"/>
      </joint>

      <joint name="torso_joint" type="revolute">
          <parent link="upper_base_link"/>
          <child link="torso_link"/>
          <origin xyz="0 0 0.10" rpy="0 0 0"/>
          <axis xyz="0 0 1"/>
          <limit lower="-3.1416" upper="3.1416" effort="10" velocity="3"/>
        </joint>

      <joint name="head_pan_servo" type="fixed">
          <parent link="torso_link"/>
          <child link="head_pan_link"/>
          <origin xyz="0 0 0.225" rpy="0 0 0"/>
      </joint>

      <joint name="head_pan_joint" type="revolute">
          <parent link="head_pan_link"/>
          <child link="head_tilt_link"/>
          <origin xyz="0 0 0.045" rpy="0 0 0"/>
          <axis xyz="0 0 1"/>
          <limit lower="-3.1416" upper="3.1416" effort="10" velocity="3"/>
        </joint>
        
      <joint name="head_tilt_joint" type="revolute">
          <parent link="head_tilt_link"/>
          <child link="neck_link"/>
          <origin xyz="0 0 0.04" rpy="0 0 0"/>
          <axis xyz="0 1 0"/>
          <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
        </joint>
        
      <joint name="neck_joint" type="fixed">
          <parent link="neck_link"/>
          <child link="head_link"/>
          <origin xyz="0.05 0 0.015" rpy="0 0 0"/>
      </joint>
      <!--	
      <joint name="eyes_joint" type="fixed">
          <parent link="head_link" />
          <child link="eyes_link" />
          <origin xyz="0.02 0 0.03" rpy="0 0 0" />
      </joint>
      -->

      <joint name="antenna_joint" type="fixed">
          <parent link="head_link"/>
          <child link="antenna_link"/>
          <origin xyz="0.0 -0.025 0.065" rpy="0 0 0"/>
      </joint>

      <joint name="left_shoulder_joint" type="fixed">
          <parent link="torso_link"/>
          <child link="left_shoulder_link"/>
          <origin xyz="0 0.055 0.165" rpy="0 0 0"/>
      </joint>

      <joint name="right_shoulder_joint" type="fixed">
          <parent link="torso_link"/>
          <child link="right_shoulder_link"/>
          <origin xyz="0 -0.055 0.165" rpy="0 0 0"/>
      </joint>

      <joint name="left_shoulder_forward_joint" type="revolute">
          <parent link="left_shoulder_link"/>
          <child link="left_shoulder_forward_link"/>
          <origin xyz="0 0.025 0" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="right_shoulder_forward_joint" type="revolute">
          <parent link="right_shoulder_link"/>
          <child link="right_shoulder_forward_link"/>
          <origin xyz="0 -0.025 0" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="left_shoulder_up_joint" type="revolute">
          <parent link="left_shoulder_forward_link"/>
          <child link="left_shoulder_up_link"/>
          <origin xyz="0 0.04 -0.01" rpy="0 -0.707 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 1 0"/>
      </joint>

      <joint name="right_shoulder_up_joint" type="revolute">
          <parent link="right_shoulder_forward_link"/>
          <child link="right_shoulder_up_link"/>
          <origin xyz="0 -0.04 -0.01" rpy="0 -0.707 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 1 0"/>
      </joint>

      <joint name="left_upper_arm_joint" type="fixed">
          <parent link="left_shoulder_up_link"/>
          <child link="left_upper_arm_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
      </joint>

      <joint name="right_upper_arm_joint" type="fixed">
          <parent link="right_shoulder_up_link"/>
          <child link="right_upper_arm_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
      </joint>

      <joint name="left_elbow_joint" type="revolute">
          <parent link="left_upper_arm_link"/>
          <child link="left_elbow_link"/>
          <origin xyz="-0.005 0 -0.05" rpy="0 0 0"/>
            <limit lower="-3.146" upper="3.146" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="right_elbow_joint" type="revolute">
          <parent link="right_upper_arm_link"/>
          <child link="right_elbow_link"/>
          <origin xyz="-0.005 0 -0.05" rpy="0 0 0"/>
            <limit lower="-3.146" upper="3.146" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="left_lower_arm_joint" type="fixed">
          <parent link="left_elbow_link"/>
          <child link="left_lower_arm_link"/>
          <origin xyz="0 0 -0.08" rpy="0 0 0"/>
      </joint>

      <joint name="right_lower_arm_joint" type="fixed">
          <parent link="right_elbow_link"/>
          <child link="right_lower_arm_link"/>
          <origin xyz="0 0 -0.08" rpy="0 0 0"/>
      </joint>

      <joint name="left_wrist_joint" type="revolute">
          <parent link="left_lower_arm_link"/>
          <child link="left_wrist_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="1 0 0"/>
      </joint>

      <joint name="right_wrist_joint" type="revolute">
          <parent link="right_lower_arm_link"/>
          <child link="right_wrist_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="1 0 0"/>
      </joint>

      <joint name="left_hand_joint" type="fixed">
          <parent link="left_wrist_link"/>
          <child link="left_hand_link"/>
          <origin xyz="0 0 -0.055" rpy="0 0 0"/>
      </joint>

      <joint name="right_hand_joint" type="fixed">
          <parent link="right_wrist_link"/>
          <child link="right_hand_link"/>
          <origin xyz="0 0 -0.055" rpy="0 0 0"/>
      </joint>

      </robot>

    `,
    rotations: [],
    position: [0, 0, 0]
  }
];
var bs;
var rr3;
var or3;
var bi3;
var M_ = class {
  constructor(e11, t19, n33) {
    Ft3(this, bs);
    Ft3(this, rr3);
    Ft3(this, or3);
    Ft3(this, bi3, new Ct4());
    Kt3(this, bs, e11), Kt3(this, rr3, t19), Kt3(this, or3, n33), this.create();
  }
  create() {
    var n33, i27;
    const e11 = ft6(this, bs).getFieldGroup();
    e11.remove(ft6(this, bi3)), (n33 = ft6(this, or3)) == null || n33.call(this, this);
    const t19 = new Ct4();
    Kt3(this, bi3, t19), e11.add(ft6(this, bi3)), (i27 = ft6(this, rr3)) == null || i27.call(this, this);
  }
  getGroup() {
    return ft6(this, bi3);
  }
  getField3d() {
    return ft6(this, bs);
  }
};
bs = /* @__PURE__ */ new WeakMap(), rr3 = /* @__PURE__ */ new WeakMap(), or3 = /* @__PURE__ */ new WeakMap(), bi3 = /* @__PURE__ */ new WeakMap();
var Ps = (a22, e11) => `${a22.replace(/\/$/, "")}/${e11.replace(/^\//, "")}`;
function Fu(a22) {
  const e11 = a22.lastIndexOf("/");
  return e11 < 0 ? "" : a22.substring(0, e11);
}
var S_ = Object.defineProperty;
var Oi = (a22, e11, t19, n33) => {
  for (var i27 = void 0, s18 = a22.length - 1, r24; s18 >= 0; s18--)
    (r24 = a22[s18]) && (i27 = r24(e11, t19, i27) || i27);
  return i27 && S_(e11, t19, i27), i27;
};
var di3 = class wa extends H {
  constructor() {
    super(...arguments), this.objectConfigs = ja, this.name = this.objectConfigs[0].name, this.pose = [0, 0, 0], this._translation = [0, 0, 0], this._rotation = [0, 0, 0, 0], this.loader = new Ha(), this.group = new Ct4();
  }
  getObjectConfig() {
    return this.objectConfigs.find(({ name: e11 }) => e11 === this.name) ?? this.objectConfigs[0];
  }
  getField() {
    const e11 = this.closest("frc-field3d");
    if (e11)
      return e11;
  }
  static adjustMaterials(e11) {
    e11.traverse((t19) => {
      const n33 = t19;
      if (n33.isMesh && n33.material instanceof ur3) {
        const i27 = n33.material;
        i27.metalness = 0, i27.roughness = 1;
      }
    });
  }
  static updatePose(e11, t19) {
    const [n33, i27, s18] = t19.translation;
    e11.position.set(n33, i27, s18), e11.rotation.setFromQuaternion(_o(t19.rotation));
  }
  loadRobotModel() {
    const e11 = this.getField(), t19 = this.getObjectConfig();
    if (!e11)
      return;
    const n33 = e11.getFieldGroup();
    n33.remove(this.group), this.object && this.group.remove(this.object);
    const i27 = t19.components ?? [], r24 = [t19.src].concat(
      i27.map(({ src: l25 }) => l25)
    ).map(
      (l25) => new Promise((u35) => {
        this.loader.load(
          Ps(e11.assetPathPrefix ?? "", l25),
          (h26) => u35(h26)
        );
      })
    ), o12 = new Ct4();
    this.group = o12, n33.add(this.group);
    const c27 = new Ct4();
    this.object = c27, o12.add(c27), c27.rotation.setFromQuaternion(
      Ai3(t19.rotations)
    ), c27.position.set(...t19.position), Promise.all(r24).then((l25) => {
      l25.forEach((u35) => {
        wa.adjustMaterials(u35.scene), c27.add(u35.scene);
      });
    });
  }
  firstUpdated() {
    this.updateObjectConfigs(), this.renderObject();
  }
  updated(e11) {
    if (e11.has("name") && this.loadRobotModel(), e11.has("translation") || e11.has("rotation") || e11.has("pose"))
      if (this.translation || this.rotation)
        this._translation = this.translation ?? [0, 0, 0], this._rotation = this.rotation ?? [0, 0, 0, 0];
      else if (this.pose.length >= 7)
        this._translation = this.pose.slice(0, 3), this._rotation = this.pose.slice(3, 7);
      else {
        const [t19 = 0, n33 = 0, i27 = 0] = this.pose;
        this._translation = [t19, n33], this._rotation = i27;
      }
  }
  updateObjectConfigs() {
    const e11 = this.getField(), t19 = e11 == null ? void 0 : e11.objectConfigs;
    t19 != null && t19.length && t19 !== this.objectConfigs && (this.objectConfigs = t19, this.objectConfigs.some(
      (i27) => i27.name === this.name
    ) || (this.name = this.objectConfigs[0].name));
  }
  renderObject() {
    this.group && wa.updatePose(this.group, {
      translation: this._translation.length === 2 ? [...this._translation, 0] : this._translation,
      rotation: typeof this._rotation == "number" ? $s([{ axis: "z", degrees: this._rotation }]) : this._rotation
    }), requestAnimationFrame(() => {
      this.renderObject();
    });
  }
};
Oi([
  n()
], di3.prototype, "objectConfigs");
Oi([
  Mt({ type: String })
], di3.prototype, "name");
Oi([
  Mt({ type: Array })
], di3.prototype, "pose");
Oi([
  Mt({ type: Array })
], di3.prototype, "translation");
Oi([
  Mt({ type: Array })
], di3.prototype, "rotation");
Oi([
  n()
], di3.prototype, "_translation");
Oi([
  n()
], di3.prototype, "_rotation");
var w_ = di3;
customElements.get("frc-field3d-object") || customElements.define("frc-field3d-object", w_);
var T_ = class extends hi3 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, n33, i27) {
    const s18 = this, r24 = new dr3(this.manager);
    r24.setPath(this.path), r24.setResponseType("arraybuffer"), r24.setRequestHeader(this.requestHeader), r24.setWithCredentials(this.withCredentials), r24.load(e11, function(o12) {
      try {
        t19(s18.parse(o12));
      } catch (c27) {
        i27 ? i27(c27) : console.error(c27), s18.manager.itemError(e11);
      }
    }, n33, i27);
  }
  parse(e11) {
    function t19(l25) {
      const u35 = new DataView(l25), h26 = 32 / 8 * 3 + 32 / 8 * 3 * 3 + 16 / 8, d34 = u35.getUint32(80, true);
      if (80 + 32 / 8 + d34 * h26 === u35.byteLength)
        return true;
      const g31 = [115, 111, 108, 105, 100];
      for (let y33 = 0; y33 < 5; y33++)
        if (n33(g31, u35, y33))
          return false;
      return true;
    }
    function n33(l25, u35, h26) {
      for (let d34 = 0, p26 = l25.length; d34 < p26; d34++)
        if (l25[d34] !== u35.getUint8(h26 + d34))
          return false;
      return true;
    }
    function i27(l25) {
      const u35 = new DataView(l25), h26 = u35.getUint32(80, true);
      let d34, p26, g31, y33 = false, m33, f39, E24, b33, w29;
      for (let L11 = 0; L11 < 70; L11++)
        u35.getUint32(L11, false) == 1129270351 && u35.getUint8(L11 + 4) == 82 && u35.getUint8(L11 + 5) == 61 && (y33 = true, m33 = new Float32Array(h26 * 3 * 3), f39 = u35.getUint8(L11 + 6) / 255, E24 = u35.getUint8(L11 + 7) / 255, b33 = u35.getUint8(L11 + 8) / 255, w29 = u35.getUint8(L11 + 9) / 255);
      const S21 = 84, D17 = 12 * 4 + 2, N19 = new Xt3(), I16 = new Float32Array(h26 * 3 * 3), v30 = new Float32Array(h26 * 3 * 3);
      for (let L11 = 0; L11 < h26; L11++) {
        const G15 = S21 + L11 * D17, B21 = u35.getFloat32(G15, true), k27 = u35.getFloat32(G15 + 4, true), V14 = u35.getFloat32(G15 + 8, true);
        if (y33) {
          const H15 = u35.getUint16(G15 + 48, true);
          H15 & 32768 ? (d34 = f39, p26 = E24, g31 = b33) : (d34 = (H15 & 31) / 31, p26 = (H15 >> 5 & 31) / 31, g31 = (H15 >> 10 & 31) / 31);
        }
        for (let H15 = 1; H15 <= 3; H15++) {
          const W8 = G15 + H15 * 12, te7 = L11 * 3 * 3 + (H15 - 1) * 3;
          I16[te7] = u35.getFloat32(W8, true), I16[te7 + 1] = u35.getFloat32(W8 + 4, true), I16[te7 + 2] = u35.getFloat32(W8 + 8, true), v30[te7] = B21, v30[te7 + 1] = k27, v30[te7 + 2] = V14, y33 && (m33[te7] = d34, m33[te7 + 1] = p26, m33[te7 + 2] = g31);
        }
      }
      return N19.setAttribute("position", new Gt3(I16, 3)), N19.setAttribute("normal", new Gt3(v30, 3)), y33 && (N19.setAttribute("color", new Gt3(m33, 3)), N19.hasColors = true, N19.alpha = w29), N19;
    }
    function s18(l25) {
      const u35 = new Xt3(), h26 = /solid([\s\S]*?)endsolid/g, d34 = /facet([\s\S]*?)endfacet/g;
      let p26 = 0;
      const g31 = /[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source, y33 = new RegExp("vertex" + g31 + g31 + g31, "g"), m33 = new RegExp("normal" + g31 + g31 + g31, "g"), f39 = [], E24 = [], b33 = new U7();
      let w29, S21 = 0, D17 = 0, N19 = 0;
      for (; (w29 = h26.exec(l25)) !== null; ) {
        D17 = N19;
        const I16 = w29[0];
        for (; (w29 = d34.exec(I16)) !== null; ) {
          let G15 = 0, B21 = 0;
          const k27 = w29[0];
          for (; (w29 = m33.exec(k27)) !== null; )
            b33.x = parseFloat(w29[1]), b33.y = parseFloat(w29[2]), b33.z = parseFloat(w29[3]), B21++;
          for (; (w29 = y33.exec(k27)) !== null; )
            f39.push(parseFloat(w29[1]), parseFloat(w29[2]), parseFloat(w29[3])), E24.push(b33.x, b33.y, b33.z), G15++, N19++;
          B21 !== 1 && console.error("THREE.STLLoader: Something isn't right with the normal of face number " + p26), G15 !== 3 && console.error("THREE.STLLoader: Something isn't right with the vertices of face number " + p26), p26++;
        }
        const v30 = D17, L11 = N19 - D17;
        u35.addGroup(v30, L11, S21), S21++;
      }
      return u35.setAttribute("position", new yt7(f39, 3)), u35.setAttribute("normal", new yt7(E24, 3)), u35;
    }
    function r24(l25) {
      return typeof l25 != "string" ? new TextDecoder().decode(l25) : l25;
    }
    function o12(l25) {
      if (typeof l25 == "string") {
        const u35 = new Uint8Array(l25.length);
        for (let h26 = 0; h26 < l25.length; h26++)
          u35[h26] = l25.charCodeAt(h26) & 255;
        return u35.buffer || u35;
      } else
        return l25;
    }
    const c27 = o12(e11);
    return t19(c27) ? i27(c27) : s18(r24(e11));
  }
};
var jc = class extends R0 {
  constructor(e11) {
    super(e11);
  }
  parse(e11) {
    function t19(W8) {
      switch (W8.image_type) {
        case d34:
        case y33:
          (W8.colormap_length > 256 || W8.colormap_size !== 24 || W8.colormap_type !== 1) && console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");
          break;
        case p26:
        case g31:
        case m33:
        case f39:
          W8.colormap_type && console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");
          break;
        case h26:
          console.error("THREE.TGALoader: No data.");
        default:
          console.error('THREE.TGALoader: Invalid type "%s".', W8.image_type);
      }
      (W8.width <= 0 || W8.height <= 0) && console.error("THREE.TGALoader: Invalid image size."), W8.pixel_size !== 8 && W8.pixel_size !== 16 && W8.pixel_size !== 24 && W8.pixel_size !== 32 && console.error('THREE.TGALoader: Invalid pixel size "%s".', W8.pixel_size);
    }
    function n33(W8, te7, J11, ie8, le7) {
      let me9, he8;
      const j18 = J11.pixel_size >> 3, X12 = J11.width * J11.height * j18;
      if (te7 && (he8 = le7.subarray(ie8, ie8 += J11.colormap_length * (J11.colormap_size >> 3))), W8) {
        me9 = new Uint8Array(X12);
        let ee7, $24, z19, be7 = 0;
        const Ee5 = new Uint8Array(j18);
        for (; be7 < X12; )
          if (ee7 = le7[ie8++], $24 = (ee7 & 127) + 1, ee7 & 128) {
            for (z19 = 0; z19 < j18; ++z19)
              Ee5[z19] = le7[ie8++];
            for (z19 = 0; z19 < $24; ++z19)
              me9.set(Ee5, be7 + z19 * j18);
            be7 += j18 * $24;
          } else {
            for ($24 *= j18, z19 = 0; z19 < $24; ++z19)
              me9[be7 + z19] = le7[ie8++];
            be7 += $24;
          }
      } else
        me9 = le7.subarray(
          ie8,
          ie8 += te7 ? J11.width * J11.height : X12
        );
      return {
        pixel_data: me9,
        palettes: he8
      };
    }
    function i27(W8, te7, J11, ie8, le7, me9, he8, j18, X12) {
      const ee7 = X12;
      let $24, z19 = 0, be7, Ee5;
      const pe8 = L11.width;
      for (Ee5 = te7; Ee5 !== ie8; Ee5 += J11)
        for (be7 = le7; be7 !== he8; be7 += me9, z19++)
          $24 = j18[z19], W8[(be7 + pe8 * Ee5) * 4 + 3] = 255, W8[(be7 + pe8 * Ee5) * 4 + 2] = ee7[$24 * 3 + 0], W8[(be7 + pe8 * Ee5) * 4 + 1] = ee7[$24 * 3 + 1], W8[(be7 + pe8 * Ee5) * 4 + 0] = ee7[$24 * 3 + 2];
      return W8;
    }
    function s18(W8, te7, J11, ie8, le7, me9, he8, j18) {
      let X12, ee7 = 0, $24, z19;
      const be7 = L11.width;
      for (z19 = te7; z19 !== ie8; z19 += J11)
        for ($24 = le7; $24 !== he8; $24 += me9, ee7 += 2)
          X12 = j18[ee7 + 0] + (j18[ee7 + 1] << 8), W8[($24 + be7 * z19) * 4 + 0] = (X12 & 31744) >> 7, W8[($24 + be7 * z19) * 4 + 1] = (X12 & 992) >> 2, W8[($24 + be7 * z19) * 4 + 2] = (X12 & 31) << 3, W8[($24 + be7 * z19) * 4 + 3] = X12 & 32768 ? 0 : 255;
      return W8;
    }
    function r24(W8, te7, J11, ie8, le7, me9, he8, j18) {
      let X12 = 0, ee7, $24;
      const z19 = L11.width;
      for ($24 = te7; $24 !== ie8; $24 += J11)
        for (ee7 = le7; ee7 !== he8; ee7 += me9, X12 += 3)
          W8[(ee7 + z19 * $24) * 4 + 3] = 255, W8[(ee7 + z19 * $24) * 4 + 2] = j18[X12 + 0], W8[(ee7 + z19 * $24) * 4 + 1] = j18[X12 + 1], W8[(ee7 + z19 * $24) * 4 + 0] = j18[X12 + 2];
      return W8;
    }
    function o12(W8, te7, J11, ie8, le7, me9, he8, j18) {
      let X12 = 0, ee7, $24;
      const z19 = L11.width;
      for ($24 = te7; $24 !== ie8; $24 += J11)
        for (ee7 = le7; ee7 !== he8; ee7 += me9, X12 += 4)
          W8[(ee7 + z19 * $24) * 4 + 2] = j18[X12 + 0], W8[(ee7 + z19 * $24) * 4 + 1] = j18[X12 + 1], W8[(ee7 + z19 * $24) * 4 + 0] = j18[X12 + 2], W8[(ee7 + z19 * $24) * 4 + 3] = j18[X12 + 3];
      return W8;
    }
    function c27(W8, te7, J11, ie8, le7, me9, he8, j18) {
      let X12, ee7 = 0, $24, z19;
      const be7 = L11.width;
      for (z19 = te7; z19 !== ie8; z19 += J11)
        for ($24 = le7; $24 !== he8; $24 += me9, ee7++)
          X12 = j18[ee7], W8[($24 + be7 * z19) * 4 + 0] = X12, W8[($24 + be7 * z19) * 4 + 1] = X12, W8[($24 + be7 * z19) * 4 + 2] = X12, W8[($24 + be7 * z19) * 4 + 3] = 255;
      return W8;
    }
    function l25(W8, te7, J11, ie8, le7, me9, he8, j18) {
      let X12 = 0, ee7, $24;
      const z19 = L11.width;
      for ($24 = te7; $24 !== ie8; $24 += J11)
        for (ee7 = le7; ee7 !== he8; ee7 += me9, X12 += 2)
          W8[(ee7 + z19 * $24) * 4 + 0] = j18[X12 + 0], W8[(ee7 + z19 * $24) * 4 + 1] = j18[X12 + 0], W8[(ee7 + z19 * $24) * 4 + 2] = j18[X12 + 0], W8[(ee7 + z19 * $24) * 4 + 3] = j18[X12 + 1];
      return W8;
    }
    function u35(W8, te7, J11, ie8, le7) {
      let me9, he8, j18, X12, ee7, $24;
      switch ((L11.flags & E24) >> b33) {
        default:
        case D17:
          me9 = 0, j18 = 1, ee7 = te7, he8 = 0, X12 = 1, $24 = J11;
          break;
        case w29:
          me9 = 0, j18 = 1, ee7 = te7, he8 = J11 - 1, X12 = -1, $24 = -1;
          break;
        case N19:
          me9 = te7 - 1, j18 = -1, ee7 = -1, he8 = 0, X12 = 1, $24 = J11;
          break;
        case S21:
          me9 = te7 - 1, j18 = -1, ee7 = -1, he8 = J11 - 1, X12 = -1, $24 = -1;
          break;
      }
      if (k27)
        switch (L11.pixel_size) {
          case 8:
            c27(W8, he8, X12, $24, me9, j18, ee7, ie8);
            break;
          case 16:
            l25(W8, he8, X12, $24, me9, j18, ee7, ie8);
            break;
          default:
            console.error("THREE.TGALoader: Format not supported.");
            break;
        }
      else
        switch (L11.pixel_size) {
          case 8:
            i27(W8, he8, X12, $24, me9, j18, ee7, ie8, le7);
            break;
          case 16:
            s18(W8, he8, X12, $24, me9, j18, ee7, ie8);
            break;
          case 24:
            r24(W8, he8, X12, $24, me9, j18, ee7, ie8);
            break;
          case 32:
            o12(W8, he8, X12, $24, me9, j18, ee7, ie8);
            break;
          default:
            console.error("THREE.TGALoader: Format not supported.");
            break;
        }
      return W8;
    }
    const h26 = 0, d34 = 1, p26 = 2, g31 = 3, y33 = 9, m33 = 10, f39 = 11, E24 = 48, b33 = 4, w29 = 0, S21 = 1, D17 = 2, N19 = 3;
    e11.length < 19 && console.error("THREE.TGALoader: Not enough data to contain header.");
    let I16 = 0;
    const v30 = new Uint8Array(e11), L11 = {
      id_length: v30[I16++],
      colormap_type: v30[I16++],
      image_type: v30[I16++],
      colormap_index: v30[I16++] | v30[I16++] << 8,
      colormap_length: v30[I16++] | v30[I16++] << 8,
      colormap_size: v30[I16++],
      origin: [
        v30[I16++] | v30[I16++] << 8,
        v30[I16++] | v30[I16++] << 8
      ],
      width: v30[I16++] | v30[I16++] << 8,
      height: v30[I16++] | v30[I16++] << 8,
      pixel_size: v30[I16++],
      flags: v30[I16++]
    };
    t19(L11), L11.id_length + I16 > e11.length && console.error("THREE.TGALoader: No data."), I16 += L11.id_length;
    let G15 = false, B21 = false, k27 = false;
    switch (L11.image_type) {
      case y33:
        G15 = true, B21 = true;
        break;
      case d34:
        B21 = true;
        break;
      case m33:
        G15 = true;
        break;
      case p26:
        break;
      case f39:
        G15 = true, k27 = true;
        break;
      case g31:
        k27 = true;
        break;
    }
    const V14 = new Uint8Array(L11.width * L11.height * 4), H15 = n33(G15, B21, L11, I16, v30);
    return u35(V14, L11.width, L11.height, H15.pixel_data, H15.palettes), {
      data: V14,
      width: L11.width,
      height: L11.height,
      flipY: true,
      generateMipmaps: true,
      minFilter: jn3
    };
  }
};
var A_ = class extends hi3 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, n33, i27) {
    const s18 = this, r24 = s18.path === "" ? sr3.extractUrlBase(e11) : s18.path, o12 = new dr3(s18.manager);
    o12.setPath(s18.path), o12.setRequestHeader(s18.requestHeader), o12.setWithCredentials(s18.withCredentials), o12.load(e11, function(c27) {
      try {
        t19(s18.parse(c27, r24));
      } catch (l25) {
        i27 ? i27(l25) : console.error(l25), s18.manager.itemError(e11);
      }
    }, n33, i27);
  }
  parse(e11, t19) {
    function n33(x34, _19) {
      const T20 = [], M12 = x34.childNodes;
      for (let A17 = 0, Y11 = M12.length; A17 < Y11; A17++) {
        const re8 = M12[A17];
        re8.nodeName === _19 && T20.push(re8);
      }
      return T20;
    }
    function i27(x34) {
      if (x34.length === 0)
        return [];
      const _19 = x34.trim().split(/\s+/), T20 = new Array(_19.length);
      for (let M12 = 0, A17 = _19.length; M12 < A17; M12++)
        T20[M12] = _19[M12];
      return T20;
    }
    function s18(x34) {
      if (x34.length === 0)
        return [];
      const _19 = x34.trim().split(/\s+/), T20 = new Array(_19.length);
      for (let M12 = 0, A17 = _19.length; M12 < A17; M12++)
        T20[M12] = parseFloat(_19[M12]);
      return T20;
    }
    function r24(x34) {
      if (x34.length === 0)
        return [];
      const _19 = x34.trim().split(/\s+/), T20 = new Array(_19.length);
      for (let M12 = 0, A17 = _19.length; M12 < A17; M12++)
        T20[M12] = parseInt(_19[M12]);
      return T20;
    }
    function o12(x34) {
      return x34.substring(1);
    }
    function c27() {
      return "three_default_" + $u2++;
    }
    function l25(x34) {
      return Object.keys(x34).length === 0;
    }
    function u35(x34) {
      return {
        unit: h26(n33(x34, "unit")[0]),
        upAxis: d34(n33(x34, "up_axis")[0])
      };
    }
    function h26(x34) {
      return x34 !== void 0 && x34.hasAttribute("meter") === true ? parseFloat(x34.getAttribute("meter")) : 1;
    }
    function d34(x34) {
      return x34 !== void 0 ? x34.textContent : "Y_UP";
    }
    function p26(x34, _19, T20, M12) {
      const A17 = n33(x34, _19)[0];
      if (A17 !== void 0) {
        const Y11 = n33(A17, T20);
        for (let re8 = 0; re8 < Y11.length; re8++)
          M12(Y11[re8]);
      }
    }
    function g31(x34, _19) {
      for (const T20 in x34) {
        const M12 = x34[T20];
        M12.build = _19(x34[T20]);
      }
    }
    function y33(x34, _19) {
      return x34.build !== void 0 || (x34.build = _19(x34)), x34.build;
    }
    function m33(x34) {
      const _19 = {
        sources: {},
        samplers: {},
        channels: {}
      };
      let T20 = false;
      for (let M12 = 0, A17 = x34.childNodes.length; M12 < A17; M12++) {
        const Y11 = x34.childNodes[M12];
        if (Y11.nodeType !== 1)
          continue;
        let re8;
        switch (Y11.nodeName) {
          case "source":
            re8 = Y11.getAttribute("id"), _19.sources[re8] = ue8(Y11);
            break;
          case "sampler":
            re8 = Y11.getAttribute("id"), _19.samplers[re8] = f39(Y11);
            break;
          case "channel":
            re8 = Y11.getAttribute("target"), _19.channels[re8] = E24(Y11);
            break;
          case "animation":
            m33(Y11), T20 = true;
            break;
          default:
            console.log(Y11);
        }
      }
      T20 === false && (Fe7.animations[x34.getAttribute("id") || ps.generateUUID()] = _19);
    }
    function f39(x34) {
      const _19 = {
        inputs: {}
      };
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "input":
              const Y11 = o12(A17.getAttribute("source")), re8 = A17.getAttribute("semantic");
              _19.inputs[re8] = Y11;
              break;
          }
      }
      return _19;
    }
    function E24(x34) {
      const _19 = {};
      let M12 = x34.getAttribute("target").split("/");
      const A17 = M12.shift();
      let Y11 = M12.shift();
      const re8 = Y11.indexOf("(") !== -1, we8 = Y11.indexOf(".") !== -1;
      if (we8)
        M12 = Y11.split("."), Y11 = M12.shift(), _19.member = M12.shift();
      else if (re8) {
        const ge7 = Y11.split("(");
        Y11 = ge7.shift();
        for (let ve9 = 0; ve9 < ge7.length; ve9++)
          ge7[ve9] = parseInt(ge7[ve9].replace(/\)/, ""));
        _19.indices = ge7;
      }
      return _19.id = A17, _19.sid = Y11, _19.arraySyntax = re8, _19.memberSyntax = we8, _19.sampler = o12(x34.getAttribute("source")), _19;
    }
    function b33(x34) {
      const _19 = [], T20 = x34.channels, M12 = x34.samplers, A17 = x34.sources;
      for (const Y11 in T20)
        if (T20.hasOwnProperty(Y11)) {
          const re8 = T20[Y11], we8 = M12[re8.sampler], ge7 = we8.inputs.INPUT, ve9 = we8.inputs.OUTPUT, Pe6 = A17[ge7], ce9 = A17[ve9], Re7 = S21(re8, Pe6, ce9);
          L11(Re7, _19);
        }
      return _19;
    }
    function w29(x34) {
      return y33(Fe7.animations[x34], b33);
    }
    function S21(x34, _19, T20) {
      const M12 = Fe7.nodes[x34.id], A17 = Et8(M12.id), Y11 = M12.transforms[x34.sid], re8 = M12.matrix.clone().transpose();
      let we8, ge7, ve9, Pe6, ce9, Re7;
      const Ae6 = {};
      switch (Y11) {
        case "matrix":
          for (ve9 = 0, Pe6 = _19.array.length; ve9 < Pe6; ve9++)
            if (we8 = _19.array[ve9], ge7 = ve9 * T20.stride, Ae6[we8] === void 0 && (Ae6[we8] = {}), x34.arraySyntax === true) {
              const At8 = T20.array[ge7], ht14 = x34.indices[0] + 4 * x34.indices[1];
              Ae6[we8][ht14] = At8;
            } else
              for (ce9 = 0, Re7 = T20.stride; ce9 < Re7; ce9++)
                Ae6[we8][ce9] = T20.array[ge7 + ce9];
          break;
        case "translate":
          console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', Y11);
          break;
        case "rotate":
          console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', Y11);
          break;
        case "scale":
          console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', Y11);
          break;
      }
      const Oe5 = D17(Ae6, re8);
      return {
        name: A17.uuid,
        keyframes: Oe5
      };
    }
    function D17(x34, _19) {
      const T20 = [];
      for (const A17 in x34)
        T20.push({ time: parseFloat(A17), value: x34[A17] });
      T20.sort(M12);
      for (let A17 = 0; A17 < 16; A17++)
        G15(T20, A17, _19.elements[A17]);
      return T20;
      function M12(A17, Y11) {
        return A17.time - Y11.time;
      }
    }
    const N19 = new U7(), I16 = new U7(), v30 = new qt3();
    function L11(x34, _19) {
      const T20 = x34.keyframes, M12 = x34.name, A17 = [], Y11 = [], re8 = [], we8 = [];
      for (let ge7 = 0, ve9 = T20.length; ge7 < ve9; ge7++) {
        const Pe6 = T20[ge7], ce9 = Pe6.time, Re7 = Pe6.value;
        ut11.fromArray(Re7).transpose(), ut11.decompose(N19, v30, I16), A17.push(ce9), Y11.push(N19.x, N19.y, N19.z), re8.push(v30.x, v30.y, v30.z, v30.w), we8.push(I16.x, I16.y, I16.z);
      }
      return Y11.length > 0 && _19.push(new Pi(M12 + ".position", A17, Y11)), re8.length > 0 && _19.push(new ui3(M12 + ".quaternion", A17, re8)), we8.length > 0 && _19.push(new Pi(M12 + ".scale", A17, we8)), _19;
    }
    function G15(x34, _19, T20) {
      let M12, A17 = true, Y11, re8;
      for (Y11 = 0, re8 = x34.length; Y11 < re8; Y11++)
        M12 = x34[Y11], M12.value[_19] === void 0 ? M12.value[_19] = null : A17 = false;
      if (A17 === true)
        for (Y11 = 0, re8 = x34.length; Y11 < re8; Y11++)
          M12 = x34[Y11], M12.value[_19] = T20;
      else
        B21(x34, _19);
    }
    function B21(x34, _19) {
      let T20, M12;
      for (let A17 = 0, Y11 = x34.length; A17 < Y11; A17++) {
        const re8 = x34[A17];
        if (re8.value[_19] === null) {
          if (T20 = k27(x34, A17, _19), M12 = V14(x34, A17, _19), T20 === null) {
            re8.value[_19] = M12.value[_19];
            continue;
          }
          if (M12 === null) {
            re8.value[_19] = T20.value[_19];
            continue;
          }
          H15(re8, T20, M12, _19);
        }
      }
    }
    function k27(x34, _19, T20) {
      for (; _19 >= 0; ) {
        const M12 = x34[_19];
        if (M12.value[T20] !== null)
          return M12;
        _19--;
      }
      return null;
    }
    function V14(x34, _19, T20) {
      for (; _19 < x34.length; ) {
        const M12 = x34[_19];
        if (M12.value[T20] !== null)
          return M12;
        _19++;
      }
      return null;
    }
    function H15(x34, _19, T20, M12) {
      if (T20.time - _19.time === 0) {
        x34.value[M12] = _19.value[M12];
        return;
      }
      x34.value[M12] = (x34.time - _19.time) * (T20.value[M12] - _19.value[M12]) / (T20.time - _19.time) + _19.value[M12];
    }
    function W8(x34) {
      const _19 = {
        name: x34.getAttribute("id") || "default",
        start: parseFloat(x34.getAttribute("start") || 0),
        end: parseFloat(x34.getAttribute("end") || 0),
        animations: []
      };
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "instance_animation":
              _19.animations.push(o12(A17.getAttribute("url")));
              break;
          }
      }
      Fe7.clips[x34.getAttribute("id")] = _19;
    }
    function te7(x34) {
      const _19 = [], T20 = x34.name, M12 = x34.end - x34.start || -1, A17 = x34.animations;
      for (let Y11 = 0, re8 = A17.length; Y11 < re8; Y11++) {
        const we8 = w29(A17[Y11]);
        for (let ge7 = 0, ve9 = we8.length; ge7 < ve9; ge7++)
          _19.push(we8[ge7]);
      }
      return new ba(T20, M12, _19);
    }
    function J11(x34) {
      return y33(Fe7.clips[x34], te7);
    }
    function ie8(x34) {
      const _19 = {};
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "skin":
              _19.id = o12(A17.getAttribute("source")), _19.skin = le7(A17);
              break;
            case "morph":
              _19.id = o12(A17.getAttribute("source")), console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");
              break;
          }
      }
      Fe7.controllers[x34.getAttribute("id")] = _19;
    }
    function le7(x34) {
      const _19 = {
        sources: {}
      };
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "bind_shape_matrix":
              _19.bindShapeMatrix = s18(A17.textContent);
              break;
            case "source":
              const Y11 = A17.getAttribute("id");
              _19.sources[Y11] = ue8(A17);
              break;
            case "joints":
              _19.joints = me9(A17);
              break;
            case "vertex_weights":
              _19.vertexWeights = he8(A17);
              break;
          }
      }
      return _19;
    }
    function me9(x34) {
      const _19 = {
        inputs: {}
      };
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "input":
              const Y11 = A17.getAttribute("semantic"), re8 = o12(A17.getAttribute("source"));
              _19.inputs[Y11] = re8;
              break;
          }
      }
      return _19;
    }
    function he8(x34) {
      const _19 = {
        inputs: {}
      };
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "input":
              const Y11 = A17.getAttribute("semantic"), re8 = o12(A17.getAttribute("source")), we8 = parseInt(A17.getAttribute("offset"));
              _19.inputs[Y11] = { id: re8, offset: we8 };
              break;
            case "vcount":
              _19.vcount = r24(A17.textContent);
              break;
            case "v":
              _19.v = r24(A17.textContent);
              break;
          }
      }
      return _19;
    }
    function j18(x34) {
      const _19 = {
        id: x34.id
      }, T20 = Fe7.geometries[_19.id];
      return x34.skin !== void 0 && (_19.skin = X12(x34.skin), T20.sources.skinIndices = _19.skin.indices, T20.sources.skinWeights = _19.skin.weights), _19;
    }
    function X12(x34) {
      const T20 = {
        joints: [],
        // this must be an array to preserve the joint order
        indices: {
          array: [],
          stride: 4
        },
        weights: {
          array: [],
          stride: 4
        }
      }, M12 = x34.sources, A17 = x34.vertexWeights, Y11 = A17.vcount, re8 = A17.v, we8 = A17.inputs.JOINT.offset, ge7 = A17.inputs.WEIGHT.offset, ve9 = x34.sources[x34.joints.inputs.JOINT], Pe6 = x34.sources[x34.joints.inputs.INV_BIND_MATRIX], ce9 = M12[A17.inputs.WEIGHT.id].array;
      let Re7 = 0, Ae6, Oe5, Ne7;
      for (Ae6 = 0, Ne7 = Y11.length; Ae6 < Ne7; Ae6++) {
        const ht14 = Y11[Ae6], rt13 = [];
        for (Oe5 = 0; Oe5 < ht14; Oe5++) {
          const ot13 = re8[Re7 + we8], Un6 = re8[Re7 + ge7], nn4 = ce9[Un6];
          rt13.push({ index: ot13, weight: nn4 }), Re7 += 2;
        }
        for (rt13.sort(At8), Oe5 = 0; Oe5 < 4; Oe5++) {
          const ot13 = rt13[Oe5];
          ot13 !== void 0 ? (T20.indices.array.push(ot13.index), T20.weights.array.push(ot13.weight)) : (T20.indices.array.push(0), T20.weights.array.push(0));
        }
      }
      for (x34.bindShapeMatrix ? T20.bindMatrix = new Ve4().fromArray(x34.bindShapeMatrix).transpose() : T20.bindMatrix = new Ve4().identity(), Ae6 = 0, Ne7 = ve9.array.length; Ae6 < Ne7; Ae6++) {
        const ht14 = ve9.array[Ae6], rt13 = new Ve4().fromArray(Pe6.array, Ae6 * Pe6.stride).transpose();
        T20.joints.push({ name: ht14, boneInverse: rt13 });
      }
      return T20;
      function At8(ht14, rt13) {
        return rt13.weight - ht14.weight;
      }
    }
    function ee7(x34) {
      return y33(Fe7.controllers[x34], j18);
    }
    function $24(x34) {
      const _19 = {
        init_from: n33(x34, "init_from")[0].textContent
      };
      Fe7.images[x34.getAttribute("id")] = _19;
    }
    function z19(x34) {
      return x34.build !== void 0 ? x34.build : x34.init_from;
    }
    function be7(x34) {
      const _19 = Fe7.images[x34];
      return _19 !== void 0 ? y33(_19, z19) : (console.warn("THREE.ColladaLoader: Couldn't find image with ID:", x34), null);
    }
    function Ee5(x34) {
      const _19 = {};
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "profile_COMMON":
              _19.profile = pe8(A17);
              break;
          }
      }
      Fe7.effects[x34.getAttribute("id")] = _19;
    }
    function pe8(x34) {
      const _19 = {
        surfaces: {},
        samplers: {}
      };
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "newparam":
              ke7(A17, _19);
              break;
            case "technique":
              _19.technique = je7(A17);
              break;
            case "extra":
              _19.extra = ct11(A17);
              break;
          }
      }
      return _19;
    }
    function ke7(x34, _19) {
      const T20 = x34.getAttribute("sid");
      for (let M12 = 0, A17 = x34.childNodes.length; M12 < A17; M12++) {
        const Y11 = x34.childNodes[M12];
        if (Y11.nodeType === 1)
          switch (Y11.nodeName) {
            case "surface":
              _19.surfaces[T20] = nt14(Y11);
              break;
            case "sampler2D":
              _19.samplers[T20] = Ie7(Y11);
              break;
          }
      }
    }
    function nt14(x34) {
      const _19 = {};
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "init_from":
              _19.init_from = A17.textContent;
              break;
          }
      }
      return _19;
    }
    function Ie7(x34) {
      const _19 = {};
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "source":
              _19.source = A17.textContent;
              break;
          }
      }
      return _19;
    }
    function je7(x34) {
      const _19 = {};
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "constant":
            case "lambert":
            case "blinn":
            case "phong":
              _19.type = A17.nodeName, _19.parameters = bt9(A17);
              break;
            case "extra":
              _19.extra = ct11(A17);
              break;
          }
      }
      return _19;
    }
    function bt9(x34) {
      const _19 = {};
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "emission":
            case "diffuse":
            case "specular":
            case "bump":
            case "ambient":
            case "shininess":
            case "transparency":
              _19[A17.nodeName] = xt8(A17);
              break;
            case "transparent":
              _19[A17.nodeName] = {
                opaque: A17.hasAttribute("opaque") ? A17.getAttribute("opaque") : "A_ONE",
                data: xt8(A17)
              };
              break;
          }
      }
      return _19;
    }
    function xt8(x34) {
      const _19 = {};
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "color":
              _19[A17.nodeName] = s18(A17.textContent);
              break;
            case "float":
              _19[A17.nodeName] = parseFloat(A17.textContent);
              break;
            case "texture":
              _19[A17.nodeName] = { id: A17.getAttribute("texture"), extra: St8(A17) };
              break;
          }
      }
      return _19;
    }
    function St8(x34) {
      const _19 = {
        technique: {}
      };
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "extra":
              wt9(A17, _19);
              break;
          }
      }
      return _19;
    }
    function wt9(x34, _19) {
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "technique":
              et13(A17, _19);
              break;
          }
      }
    }
    function et13(x34, _19) {
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "repeatU":
            case "repeatV":
            case "offsetU":
            case "offsetV":
              _19.technique[A17.nodeName] = parseFloat(A17.textContent);
              break;
            case "wrapU":
            case "wrapV":
              A17.textContent.toUpperCase() === "TRUE" ? _19.technique[A17.nodeName] = 1 : A17.textContent.toUpperCase() === "FALSE" ? _19.technique[A17.nodeName] = 0 : _19.technique[A17.nodeName] = parseInt(A17.textContent);
              break;
            case "bump":
              _19[A17.nodeName] = P19(A17);
              break;
          }
      }
    }
    function ct11(x34) {
      const _19 = {};
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "technique":
              _19.technique = kt10(A17);
              break;
          }
      }
      return _19;
    }
    function kt10(x34) {
      const _19 = {};
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "double_sided":
              _19[A17.nodeName] = parseInt(A17.textContent);
              break;
            case "bump":
              _19[A17.nodeName] = P19(A17);
              break;
          }
      }
      return _19;
    }
    function P19(x34) {
      const _19 = {};
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "texture":
              _19[A17.nodeName] = { id: A17.getAttribute("texture"), texcoord: A17.getAttribute("texcoord"), extra: St8(A17) };
              break;
          }
      }
      return _19;
    }
    function C19(x34) {
      return x34;
    }
    function Q11(x34) {
      return y33(Fe7.effects[x34], C19);
    }
    function de9(x34) {
      const _19 = {
        name: x34.getAttribute("name")
      };
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "instance_effect":
              _19.url = o12(A17.getAttribute("url"));
              break;
          }
      }
      Fe7.materials[x34.getAttribute("id")] = _19;
    }
    function fe7(x34) {
      let _19, T20 = x34.slice((x34.lastIndexOf(".") - 1 >>> 0) + 2);
      switch (T20 = T20.toLowerCase(), T20) {
        case "tga":
          _19 = To2;
          break;
        default:
          _19 = Ya2;
      }
      return _19;
    }
    function _e7(x34) {
      const _19 = Q11(x34.url), T20 = _19.profile.technique;
      let M12;
      switch (T20.type) {
        case "phong":
        case "blinn":
          M12 = new Zs();
          break;
        case "lambert":
          M12 = new v0();
          break;
        default:
          M12 = new Mn3();
          break;
      }
      M12.name = x34.name || "";
      function A17(ge7, ve9 = null) {
        const Pe6 = _19.profile.samplers[ge7.id];
        let ce9 = null;
        if (Pe6 !== void 0) {
          const Re7 = _19.profile.surfaces[Pe6.source];
          ce9 = be7(Re7.init_from);
        } else
          console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."), ce9 = be7(ge7.id);
        if (ce9 !== null) {
          const Re7 = fe7(ce9);
          if (Re7 !== void 0) {
            const Ae6 = Re7.load(ce9), Oe5 = ge7.extra;
            if (Oe5 !== void 0 && Oe5.technique !== void 0 && l25(Oe5.technique) === false) {
              const Ne7 = Oe5.technique;
              Ae6.wrapS = Ne7.wrapU ? Rn3 : Zt3, Ae6.wrapT = Ne7.wrapV ? Rn3 : Zt3, Ae6.offset.set(Ne7.offsetU || 0, Ne7.offsetV || 0), Ae6.repeat.set(Ne7.repeatU || 1, Ne7.repeatV || 1);
            } else
              Ae6.wrapS = Rn3, Ae6.wrapT = Rn3;
            return ve9 !== null && (Ae6.encoding = ve9), Ae6;
          } else
            return console.warn("THREE.ColladaLoader: Loader for texture %s not found.", ce9), null;
        } else
          return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:", ge7.id), null;
      }
      const Y11 = T20.parameters;
      for (const ge7 in Y11) {
        const ve9 = Y11[ge7];
        switch (ge7) {
          case "diffuse":
            ve9.color && M12.color.fromArray(ve9.color), ve9.texture && (M12.map = A17(ve9.texture, st6));
            break;
          case "specular":
            ve9.color && M12.specular && M12.specular.fromArray(ve9.color), ve9.texture && (M12.specularMap = A17(ve9.texture));
            break;
          case "bump":
            ve9.texture && (M12.normalMap = A17(ve9.texture));
            break;
          case "ambient":
            ve9.texture && (M12.lightMap = A17(ve9.texture, st6));
            break;
          case "shininess":
            ve9.float && M12.shininess && (M12.shininess = ve9.float);
            break;
          case "emission":
            ve9.color && M12.emissive && M12.emissive.fromArray(ve9.color), ve9.texture && (M12.emissiveMap = A17(ve9.texture, st6));
            break;
        }
      }
      M12.color.convertSRGBToLinear(), M12.specular && M12.specular.convertSRGBToLinear(), M12.emissive && M12.emissive.convertSRGBToLinear();
      let re8 = Y11.transparent, we8 = Y11.transparency;
      if (we8 === void 0 && re8 && (we8 = {
        float: 1
      }), re8 === void 0 && we8 && (re8 = {
        opaque: "A_ONE",
        data: {
          color: [1, 1, 1, 1]
        }
      }), re8 && we8)
        if (re8.data.texture)
          M12.transparent = true;
        else {
          const ge7 = re8.data.color;
          switch (re8.opaque) {
            case "A_ONE":
              M12.opacity = ge7[3] * we8.float;
              break;
            case "RGB_ZERO":
              M12.opacity = 1 - ge7[0] * we8.float;
              break;
            case "A_ZERO":
              M12.opacity = 1 - ge7[3] * we8.float;
              break;
            case "RGB_ONE":
              M12.opacity = ge7[0] * we8.float;
              break;
            default:
              console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.', re8.opaque);
          }
          M12.opacity < 1 && (M12.transparent = true);
        }
      if (T20.extra !== void 0 && T20.extra.technique !== void 0) {
        const ge7 = T20.extra.technique;
        for (const ve9 in ge7) {
          const Pe6 = ge7[ve9];
          switch (ve9) {
            case "double_sided":
              M12.side = Pe6 === 1 ? fn3 : Pn3;
              break;
            case "bump":
              M12.normalMap = A17(Pe6.texture), M12.normalScale = new We4(1, 1);
              break;
          }
        }
      }
      return M12;
    }
    function O20(x34) {
      return y33(Fe7.materials[x34], _e7);
    }
    function ae7(x34) {
      const _19 = {
        name: x34.getAttribute("name")
      };
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "optics":
              _19.optics = Z11(A17);
              break;
          }
      }
      Fe7.cameras[x34.getAttribute("id")] = _19;
    }
    function Z11(x34) {
      for (let _19 = 0; _19 < x34.childNodes.length; _19++) {
        const T20 = x34.childNodes[_19];
        switch (T20.nodeName) {
          case "technique_common":
            return ye7(T20);
        }
      }
      return {};
    }
    function ye7(x34) {
      const _19 = {};
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        switch (M12.nodeName) {
          case "perspective":
          case "orthographic":
            _19.technique = M12.nodeName, _19.parameters = Te7(M12);
            break;
        }
      }
      return _19;
    }
    function Te7(x34) {
      const _19 = {};
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        switch (M12.nodeName) {
          case "xfov":
          case "yfov":
          case "xmag":
          case "ymag":
          case "znear":
          case "zfar":
          case "aspect_ratio":
            _19[M12.nodeName] = parseFloat(M12.textContent);
            break;
        }
      }
      return _19;
    }
    function Le7(x34) {
      let _19;
      switch (x34.optics.technique) {
        case "perspective":
          _19 = new Vt3(
            x34.optics.parameters.yfov,
            x34.optics.parameters.aspect_ratio,
            x34.optics.parameters.znear,
            x34.optics.parameters.zfar
          );
          break;
        case "orthographic":
          let T20 = x34.optics.parameters.ymag, M12 = x34.optics.parameters.xmag;
          const A17 = x34.optics.parameters.aspect_ratio;
          M12 = M12 === void 0 ? T20 * A17 : M12, T20 = T20 === void 0 ? M12 / A17 : T20, M12 *= 0.5, T20 *= 0.5, _19 = new ho(
            -M12,
            M12,
            T20,
            -T20,
            // left, right, top, bottom
            x34.optics.parameters.znear,
            x34.optics.parameters.zfar
          );
          break;
        default:
          _19 = new Vt3();
          break;
      }
      return _19.name = x34.name || "", _19;
    }
    function Me7(x34) {
      const _19 = Fe7.cameras[x34];
      return _19 !== void 0 ? y33(_19, Le7) : (console.warn("THREE.ColladaLoader: Couldn't find camera with ID:", x34), null);
    }
    function Ce7(x34) {
      let _19 = {};
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "technique_common":
              _19 = Ge7(A17);
              break;
          }
      }
      Fe7.lights[x34.getAttribute("id")] = _19;
    }
    function Ge7(x34) {
      const _19 = {};
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "directional":
            case "point":
            case "spot":
            case "ambient":
              _19.technique = A17.nodeName, _19.parameters = Xe7(A17);
          }
      }
      return _19;
    }
    function Xe7(x34) {
      const _19 = {};
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "color":
              const Y11 = s18(A17.textContent);
              _19.color = new ze4().fromArray(Y11).convertSRGBToLinear();
              break;
            case "falloff_angle":
              _19.falloffAngle = parseFloat(A17.textContent);
              break;
            case "quadratic_attenuation":
              const re8 = parseFloat(A17.textContent);
              _19.distance = re8 ? Math.sqrt(1 / re8) : 0;
              break;
          }
      }
      return _19;
    }
    function Mt10(x34) {
      let _19;
      switch (x34.technique) {
        case "directional":
          _19 = new Iu();
          break;
        case "point":
          _19 = new go();
          break;
        case "spot":
          _19 = new Pu();
          break;
        case "ambient":
          _19 = new N0();
          break;
      }
      return x34.parameters.color && _19.color.copy(x34.parameters.color), x34.parameters.distance && (_19.distance = x34.parameters.distance), _19;
    }
    function F17(x34) {
      const _19 = Fe7.lights[x34];
      return _19 !== void 0 ? y33(_19, Mt10) : (console.warn("THREE.ColladaLoader: Couldn't find light with ID:", x34), null);
    }
    function se6(x34) {
      const _19 = {
        name: x34.getAttribute("name"),
        sources: {},
        vertices: {},
        primitives: []
      }, T20 = n33(x34, "mesh")[0];
      if (T20 !== void 0) {
        for (let M12 = 0; M12 < T20.childNodes.length; M12++) {
          const A17 = T20.childNodes[M12];
          if (A17.nodeType !== 1)
            continue;
          const Y11 = A17.getAttribute("id");
          switch (A17.nodeName) {
            case "source":
              _19.sources[Y11] = ue8(A17);
              break;
            case "vertices":
              _19.vertices = Se7(A17);
              break;
            case "polygons":
              console.warn("THREE.ColladaLoader: Unsupported primitive type: ", A17.nodeName);
              break;
            case "lines":
            case "linestrips":
            case "polylist":
            case "triangles":
              _19.primitives.push(De6(A17));
              break;
            default:
              console.log(A17);
          }
        }
        Fe7.geometries[x34.getAttribute("id")] = _19;
      }
    }
    function ue8(x34) {
      const _19 = {
        array: [],
        stride: 3
      };
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        if (M12.nodeType === 1)
          switch (M12.nodeName) {
            case "float_array":
              _19.array = s18(M12.textContent);
              break;
            case "Name_array":
              _19.array = i27(M12.textContent);
              break;
            case "technique_common":
              const A17 = n33(M12, "accessor")[0];
              A17 !== void 0 && (_19.stride = parseInt(A17.getAttribute("stride")));
              break;
          }
      }
      return _19;
    }
    function Se7(x34) {
      const _19 = {};
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        M12.nodeType === 1 && (_19[M12.getAttribute("semantic")] = o12(M12.getAttribute("source")));
      }
      return _19;
    }
    function De6(x34) {
      const _19 = {
        type: x34.nodeName,
        material: x34.getAttribute("material"),
        count: parseInt(x34.getAttribute("count")),
        inputs: {},
        stride: 0,
        hasUV: false
      };
      for (let T20 = 0, M12 = x34.childNodes.length; T20 < M12; T20++) {
        const A17 = x34.childNodes[T20];
        if (A17.nodeType === 1)
          switch (A17.nodeName) {
            case "input":
              const Y11 = o12(A17.getAttribute("source")), re8 = A17.getAttribute("semantic"), we8 = parseInt(A17.getAttribute("offset")), ge7 = parseInt(A17.getAttribute("set")), ve9 = ge7 > 0 ? re8 + ge7 : re8;
              _19.inputs[ve9] = { id: Y11, offset: we8 }, _19.stride = Math.max(_19.stride, we8 + 1), re8 === "TEXCOORD" && (_19.hasUV = true);
              break;
            case "vcount":
              _19.vcount = r24(A17.textContent);
              break;
            case "p":
              _19.p = r24(A17.textContent);
              break;
          }
      }
      return _19;
    }
    function pt11(x34) {
      const _19 = {};
      for (let T20 = 0; T20 < x34.length; T20++) {
        const M12 = x34[T20];
        _19[M12.type] === void 0 && (_19[M12.type] = []), _19[M12.type].push(M12);
      }
      return _19;
    }
    function vt8(x34) {
      let _19 = 0;
      for (let T20 = 0, M12 = x34.length; T20 < M12; T20++)
        x34[T20].hasUV === true && _19++;
      _19 > 0 && _19 < x34.length && (x34.uvsNeedsFix = true);
    }
    function It7(x34) {
      const _19 = {}, T20 = x34.sources, M12 = x34.vertices, A17 = x34.primitives;
      if (A17.length === 0)
        return {};
      const Y11 = pt11(A17);
      for (const re8 in Y11) {
        const we8 = Y11[re8];
        vt8(we8), _19[re8] = Tn6(we8, T20, M12);
      }
      return _19;
    }
    function Tn6(x34, _19, T20) {
      const M12 = {}, A17 = { array: [], stride: 0 }, Y11 = { array: [], stride: 0 }, re8 = { array: [], stride: 0 }, we8 = { array: [], stride: 0 }, ge7 = { array: [], stride: 0 }, ve9 = { array: [], stride: 4 }, Pe6 = { array: [], stride: 4 }, ce9 = new Xt3(), Re7 = [];
      let Ae6 = 0;
      for (let Oe5 = 0; Oe5 < x34.length; Oe5++) {
        const Ne7 = x34[Oe5], At8 = Ne7.inputs;
        let ht14 = 0;
        switch (Ne7.type) {
          case "lines":
          case "linestrips":
            ht14 = Ne7.count * 2;
            break;
          case "triangles":
            ht14 = Ne7.count * 3;
            break;
          case "polylist":
            for (let rt13 = 0; rt13 < Ne7.count; rt13++) {
              const ot13 = Ne7.vcount[rt13];
              switch (ot13) {
                case 3:
                  ht14 += 3;
                  break;
                case 4:
                  ht14 += 6;
                  break;
                default:
                  ht14 += (ot13 - 2) * 3;
                  break;
              }
            }
            break;
          default:
            console.warn("THREE.ColladaLoader: Unknow primitive type:", Ne7.type);
        }
        ce9.addGroup(Ae6, ht14, Oe5), Ae6 += ht14, Ne7.material && Re7.push(Ne7.material);
        for (const rt13 in At8) {
          const ot13 = At8[rt13];
          switch (rt13) {
            case "VERTEX":
              for (const Un6 in T20) {
                const nn4 = T20[Un6];
                switch (Un6) {
                  case "POSITION":
                    const ji3 = A17.array.length;
                    if (it14(Ne7, _19[nn4], ot13.offset, A17.array), A17.stride = _19[nn4].stride, _19.skinWeights && _19.skinIndices && (it14(Ne7, _19.skinIndices, ot13.offset, ve9.array), it14(Ne7, _19.skinWeights, ot13.offset, Pe6.array)), Ne7.hasUV === false && x34.uvsNeedsFix === true) {
                      const Qu2 = (A17.array.length - ji3) / A17.stride;
                      for (let Za2 = 0; Za2 < Qu2; Za2++)
                        re8.array.push(0, 0);
                    }
                    break;
                  case "NORMAL":
                    it14(Ne7, _19[nn4], ot13.offset, Y11.array), Y11.stride = _19[nn4].stride;
                    break;
                  case "COLOR":
                    it14(Ne7, _19[nn4], ot13.offset, ge7.array), ge7.stride = _19[nn4].stride;
                    break;
                  case "TEXCOORD":
                    it14(Ne7, _19[nn4], ot13.offset, re8.array), re8.stride = _19[nn4].stride;
                    break;
                  case "TEXCOORD1":
                    it14(Ne7, _19[nn4], ot13.offset, we8.array), re8.stride = _19[nn4].stride;
                    break;
                  default:
                    console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.', Un6);
                }
              }
              break;
            case "NORMAL":
              it14(Ne7, _19[ot13.id], ot13.offset, Y11.array), Y11.stride = _19[ot13.id].stride;
              break;
            case "COLOR":
              it14(Ne7, _19[ot13.id], ot13.offset, ge7.array, true), ge7.stride = _19[ot13.id].stride;
              break;
            case "TEXCOORD":
              it14(Ne7, _19[ot13.id], ot13.offset, re8.array), re8.stride = _19[ot13.id].stride;
              break;
            case "TEXCOORD1":
              it14(Ne7, _19[ot13.id], ot13.offset, we8.array), we8.stride = _19[ot13.id].stride;
              break;
          }
        }
      }
      return A17.array.length > 0 && ce9.setAttribute("position", new yt7(A17.array, A17.stride)), Y11.array.length > 0 && ce9.setAttribute("normal", new yt7(Y11.array, Y11.stride)), ge7.array.length > 0 && ce9.setAttribute("color", new yt7(ge7.array, ge7.stride)), re8.array.length > 0 && ce9.setAttribute("uv", new yt7(re8.array, re8.stride)), we8.array.length > 0 && ce9.setAttribute("uv2", new yt7(we8.array, we8.stride)), ve9.array.length > 0 && ce9.setAttribute("skinIndex", new yt7(ve9.array, ve9.stride)), Pe6.array.length > 0 && ce9.setAttribute("skinWeight", new yt7(Pe6.array, Pe6.stride)), M12.data = ce9, M12.type = x34[0].type, M12.materialKeys = Re7, M12;
    }
    function it14(x34, _19, T20, M12, A17 = false) {
      const Y11 = x34.p, re8 = x34.stride, we8 = x34.vcount;
      function ge7(ce9) {
        let Re7 = Y11[ce9 + T20] * Pe6;
        const Ae6 = Re7 + Pe6;
        for (; Re7 < Ae6; Re7++)
          M12.push(ve9[Re7]);
        if (A17) {
          const Oe5 = M12.length - Pe6 - 1;
          _r6.setRGB(
            M12[Oe5 + 0],
            M12[Oe5 + 1],
            M12[Oe5 + 2]
          ).convertSRGBToLinear(), M12[Oe5 + 0] = _r6.r, M12[Oe5 + 1] = _r6.g, M12[Oe5 + 2] = _r6.b;
        }
      }
      const ve9 = _19.array, Pe6 = _19.stride;
      if (x34.vcount !== void 0) {
        let ce9 = 0;
        for (let Re7 = 0, Ae6 = we8.length; Re7 < Ae6; Re7++) {
          const Oe5 = we8[Re7];
          if (Oe5 === 4) {
            const Ne7 = ce9 + re8 * 0, At8 = ce9 + re8 * 1, ht14 = ce9 + re8 * 2, rt13 = ce9 + re8 * 3;
            ge7(Ne7), ge7(At8), ge7(rt13), ge7(At8), ge7(ht14), ge7(rt13);
          } else if (Oe5 === 3) {
            const Ne7 = ce9 + re8 * 0, At8 = ce9 + re8 * 1, ht14 = ce9 + re8 * 2;
            ge7(Ne7), ge7(At8), ge7(ht14);
          } else if (Oe5 > 4)
            for (let Ne7 = 1, At8 = Oe5 - 2; Ne7 <= At8; Ne7++) {
              const ht14 = ce9 + re8 * 0, rt13 = ce9 + re8 * Ne7, ot13 = ce9 + re8 * (Ne7 + 1);
              ge7(ht14), ge7(rt13), ge7(ot13);
            }
          ce9 += re8 * Oe5;
        }
      } else
        for (let ce9 = 0, Re7 = Y11.length; ce9 < Re7; ce9 += re8)
          ge7(ce9);
    }
    function $t8(x34) {
      return y33(Fe7.geometries[x34], It7);
    }
    function cn3(x34) {
      const _19 = {
        name: x34.getAttribute("name") || "",
        joints: {},
        links: []
      };
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        if (M12.nodeType === 1)
          switch (M12.nodeName) {
            case "technique_common":
              vo2(M12, _19);
              break;
          }
      }
      Fe7.kinematicsModels[x34.getAttribute("id")] = _19;
    }
    function Bi4(x34) {
      return x34.build !== void 0 ? x34.build : x34;
    }
    function pr6(x34) {
      return y33(Fe7.kinematicsModels[x34], Bi4);
    }
    function vo2(x34, _19) {
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        if (M12.nodeType === 1)
          switch (M12.nodeName) {
            case "joint":
              _19.joints[M12.getAttribute("sid")] = bo2(M12);
              break;
            case "link":
              _19.links.push(R20(M12));
              break;
          }
      }
    }
    function bo2(x34) {
      let _19;
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        if (M12.nodeType === 1)
          switch (M12.nodeName) {
            case "prismatic":
            case "revolute":
              _19 = Mo2(M12);
              break;
          }
      }
      return _19;
    }
    function Mo2(x34) {
      const _19 = {
        sid: x34.getAttribute("sid"),
        name: x34.getAttribute("name") || "",
        axis: new U7(),
        limits: {
          min: 0,
          max: 0
        },
        type: x34.nodeName,
        static: false,
        zeroPosition: 0,
        middlePosition: 0
      };
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        if (M12.nodeType === 1)
          switch (M12.nodeName) {
            case "axis":
              const A17 = s18(M12.textContent);
              _19.axis.fromArray(A17);
              break;
            case "limits":
              const Y11 = M12.getElementsByTagName("max")[0], re8 = M12.getElementsByTagName("min")[0];
              _19.limits.max = parseFloat(Y11.textContent), _19.limits.min = parseFloat(re8.textContent);
              break;
          }
      }
      return _19.limits.min >= _19.limits.max && (_19.static = true), _19.middlePosition = (_19.limits.min + _19.limits.max) / 2, _19;
    }
    function R20(x34) {
      const _19 = {
        sid: x34.getAttribute("sid"),
        name: x34.getAttribute("name") || "",
        attachments: [],
        transforms: []
      };
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        if (M12.nodeType === 1)
          switch (M12.nodeName) {
            case "attachment_full":
              _19.attachments.push(K13(M12));
              break;
            case "matrix":
            case "translate":
            case "rotate":
              _19.transforms.push(ne8(M12));
              break;
          }
      }
      return _19;
    }
    function K13(x34) {
      const _19 = {
        joint: x34.getAttribute("joint").split("/").pop(),
        transforms: [],
        links: []
      };
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        if (M12.nodeType === 1)
          switch (M12.nodeName) {
            case "link":
              _19.links.push(R20(M12));
              break;
            case "matrix":
            case "translate":
            case "rotate":
              _19.transforms.push(ne8(M12));
              break;
          }
      }
      return _19;
    }
    function ne8(x34) {
      const _19 = {
        type: x34.nodeName
      }, T20 = s18(x34.textContent);
      switch (_19.type) {
        case "matrix":
          _19.obj = new Ve4(), _19.obj.fromArray(T20).transpose();
          break;
        case "translate":
          _19.obj = new U7(), _19.obj.fromArray(T20);
          break;
        case "rotate":
          _19.obj = new U7(), _19.obj.fromArray(T20), _19.angle = ps.degToRad(T20[3]);
          break;
      }
      return _19;
    }
    function q13(x34) {
      const _19 = {
        name: x34.getAttribute("name") || "",
        rigidBodies: {}
      };
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        if (M12.nodeType === 1)
          switch (M12.nodeName) {
            case "rigid_body":
              _19.rigidBodies[M12.getAttribute("name")] = {}, oe7(M12, _19.rigidBodies[M12.getAttribute("name")]);
              break;
          }
      }
      Fe7.physicsModels[x34.getAttribute("id")] = _19;
    }
    function oe7(x34, _19) {
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        if (M12.nodeType === 1)
          switch (M12.nodeName) {
            case "technique_common":
              Ue7(M12, _19);
              break;
          }
      }
    }
    function Ue7(x34, _19) {
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        if (M12.nodeType === 1)
          switch (M12.nodeName) {
            case "inertia":
              _19.inertia = s18(M12.textContent);
              break;
            case "mass":
              _19.mass = s18(M12.textContent)[0];
              break;
          }
      }
    }
    function Be7(x34) {
      const _19 = {
        bindJointAxis: []
      };
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        if (M12.nodeType === 1)
          switch (M12.nodeName) {
            case "bind_joint_axis":
              _19.bindJointAxis.push(He8(M12));
              break;
          }
      }
      Fe7.kinematicsScenes[o12(x34.getAttribute("url"))] = _19;
    }
    function He8(x34) {
      const _19 = {
        target: x34.getAttribute("target").split("/").pop()
      };
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        if (M12.nodeType === 1)
          switch (M12.nodeName) {
            case "axis":
              const A17 = M12.getElementsByTagName("param")[0];
              _19.axis = A17.textContent;
              const Y11 = _19.axis.split("inst_").pop().split("axis")[0];
              _19.jointIndex = Y11.substring(0, Y11.length - 1);
              break;
          }
      }
      return _19;
    }
    function qe8(x34) {
      return x34.build !== void 0 ? x34.build : x34;
    }
    function Ke7(x34) {
      return y33(Fe7.kinematicsScenes[x34], qe8);
    }
    function Ye7() {
      const x34 = Object.keys(Fe7.kinematicsModels)[0], _19 = Object.keys(Fe7.kinematicsScenes)[0], T20 = Object.keys(Fe7.visualScenes)[0];
      if (x34 === void 0 || _19 === void 0)
        return;
      const M12 = pr6(x34), A17 = Ke7(_19), Y11 = Wi4(T20), re8 = A17.bindJointAxis, we8 = {};
      for (let Pe6 = 0, ce9 = re8.length; Pe6 < ce9; Pe6++) {
        const Re7 = re8[Pe6], Ae6 = Dt6.querySelector('[sid="' + Re7.target + '"]');
        if (Ae6) {
          const Oe5 = Ae6.parentElement;
          ge7(Re7.jointIndex, Oe5);
        }
      }
      function ge7(Pe6, ce9) {
        const Re7 = ce9.getAttribute("name"), Ae6 = M12.joints[Pe6];
        Y11.traverse(function(Oe5) {
          Oe5.name === Re7 && (we8[Pe6] = {
            object: Oe5,
            transforms: Ze7(ce9),
            joint: Ae6,
            position: Ae6.zeroPosition
          });
        });
      }
      const ve9 = new Ve4();
      Ja2 = {
        joints: M12 && M12.joints,
        getJointValue: function(Pe6) {
          const ce9 = we8[Pe6];
          if (ce9)
            return ce9.position;
          console.warn("THREE.ColladaLoader: Joint " + Pe6 + " doesn't exist.");
        },
        setJointValue: function(Pe6, ce9) {
          const Re7 = we8[Pe6];
          if (Re7) {
            const Ae6 = Re7.joint;
            if (ce9 > Ae6.limits.max || ce9 < Ae6.limits.min)
              console.warn("THREE.ColladaLoader: Joint " + Pe6 + " value " + ce9 + " outside of limits (min: " + Ae6.limits.min + ", max: " + Ae6.limits.max + ").");
            else if (Ae6.static)
              console.warn("THREE.ColladaLoader: Joint " + Pe6 + " is static.");
            else {
              const Oe5 = Re7.object, Ne7 = Ae6.axis, At8 = Re7.transforms;
              ut11.identity();
              for (let ht14 = 0; ht14 < At8.length; ht14++) {
                const rt13 = At8[ht14];
                if (rt13.sid && rt13.sid.indexOf(Pe6) !== -1)
                  switch (Ae6.type) {
                    case "revolute":
                      ut11.multiply(ve9.makeRotationAxis(Ne7, ps.degToRad(ce9)));
                      break;
                    case "prismatic":
                      ut11.multiply(ve9.makeTranslation(Ne7.x * ce9, Ne7.y * ce9, Ne7.z * ce9));
                      break;
                    default:
                      console.warn("THREE.ColladaLoader: Unknown joint type: " + Ae6.type);
                      break;
                  }
                else
                  switch (rt13.type) {
                    case "matrix":
                      ut11.multiply(rt13.obj);
                      break;
                    case "translate":
                      ut11.multiply(ve9.makeTranslation(rt13.obj.x, rt13.obj.y, rt13.obj.z));
                      break;
                    case "scale":
                      ut11.scale(rt13.obj);
                      break;
                    case "rotate":
                      ut11.multiply(ve9.makeRotationAxis(rt13.obj, rt13.angle));
                      break;
                  }
              }
              Oe5.matrix.copy(ut11), Oe5.matrix.decompose(Oe5.position, Oe5.quaternion, Oe5.scale), we8[Pe6].position = ce9;
            }
          } else
            console.log("THREE.ColladaLoader: " + Pe6 + " does not exist.");
        }
      };
    }
    function Ze7(x34) {
      const _19 = [], T20 = Dt6.querySelector('[id="' + x34.id + '"]');
      for (let M12 = 0; M12 < T20.childNodes.length; M12++) {
        const A17 = T20.childNodes[M12];
        if (A17.nodeType !== 1)
          continue;
        let Y11, re8;
        switch (A17.nodeName) {
          case "matrix":
            Y11 = s18(A17.textContent);
            const we8 = new Ve4().fromArray(Y11).transpose();
            _19.push({
              sid: A17.getAttribute("sid"),
              type: A17.nodeName,
              obj: we8
            });
            break;
          case "translate":
          case "scale":
            Y11 = s18(A17.textContent), re8 = new U7().fromArray(Y11), _19.push({
              sid: A17.getAttribute("sid"),
              type: A17.nodeName,
              obj: re8
            });
            break;
          case "rotate":
            Y11 = s18(A17.textContent), re8 = new U7().fromArray(Y11);
            const ge7 = ps.degToRad(Y11[3]);
            _19.push({
              sid: A17.getAttribute("sid"),
              type: A17.nodeName,
              obj: re8,
              angle: ge7
            });
            break;
        }
      }
      return _19;
    }
    function at10(x34) {
      const _19 = x34.getElementsByTagName("node");
      for (let T20 = 0; T20 < _19.length; T20++) {
        const M12 = _19[T20];
        M12.hasAttribute("id") === false && M12.setAttribute("id", c27());
      }
    }
    const ut11 = new Ve4(), Ot10 = new U7();
    function _n6(x34) {
      const _19 = {
        name: x34.getAttribute("name") || "",
        type: x34.getAttribute("type"),
        id: x34.getAttribute("id"),
        sid: x34.getAttribute("sid"),
        matrix: new Ve4(),
        nodes: [],
        instanceCameras: [],
        instanceControllers: [],
        instanceLights: [],
        instanceGeometries: [],
        instanceNodes: [],
        transforms: {}
      };
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        if (M12.nodeType !== 1)
          continue;
        let A17;
        switch (M12.nodeName) {
          case "node":
            _19.nodes.push(M12.getAttribute("id")), _n6(M12);
            break;
          case "instance_camera":
            _19.instanceCameras.push(o12(M12.getAttribute("url")));
            break;
          case "instance_controller":
            _19.instanceControllers.push(Tt9(M12));
            break;
          case "instance_light":
            _19.instanceLights.push(o12(M12.getAttribute("url")));
            break;
          case "instance_geometry":
            _19.instanceGeometries.push(Tt9(M12));
            break;
          case "instance_node":
            _19.instanceNodes.push(o12(M12.getAttribute("url")));
            break;
          case "matrix":
            A17 = s18(M12.textContent), _19.matrix.multiply(ut11.fromArray(A17).transpose()), _19.transforms[M12.getAttribute("sid")] = M12.nodeName;
            break;
          case "translate":
            A17 = s18(M12.textContent), Ot10.fromArray(A17), _19.matrix.multiply(ut11.makeTranslation(Ot10.x, Ot10.y, Ot10.z)), _19.transforms[M12.getAttribute("sid")] = M12.nodeName;
            break;
          case "rotate":
            A17 = s18(M12.textContent);
            const Y11 = ps.degToRad(A17[3]);
            _19.matrix.multiply(ut11.makeRotationAxis(Ot10.fromArray(A17), Y11)), _19.transforms[M12.getAttribute("sid")] = M12.nodeName;
            break;
          case "scale":
            A17 = s18(M12.textContent), _19.matrix.scale(Ot10.fromArray(A17)), _19.transforms[M12.getAttribute("sid")] = M12.nodeName;
            break;
          case "extra":
            break;
          default:
            console.log(M12);
        }
      }
      return Gi3(_19.id) ? console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.", _19.id) : Fe7.nodes[_19.id] = _19, _19;
    }
    function Tt9(x34) {
      const _19 = {
        id: o12(x34.getAttribute("url")),
        materials: {},
        skeletons: []
      };
      for (let T20 = 0; T20 < x34.childNodes.length; T20++) {
        const M12 = x34.childNodes[T20];
        switch (M12.nodeName) {
          case "bind_material":
            const A17 = M12.getElementsByTagName("instance_material");
            for (let Y11 = 0; Y11 < A17.length; Y11++) {
              const re8 = A17[Y11], we8 = re8.getAttribute("symbol"), ge7 = re8.getAttribute("target");
              _19.materials[we8] = o12(ge7);
            }
            break;
          case "skeleton":
            _19.skeletons.push(o12(M12.textContent));
            break;
        }
      }
      return _19;
    }
    function $e6(x34, _19) {
      const T20 = [], M12 = [];
      let A17, Y11, re8;
      for (A17 = 0; A17 < x34.length; A17++) {
        const ve9 = x34[A17];
        let Pe6;
        if (Gi3(ve9))
          Pe6 = Et8(ve9), Vi5(Pe6, _19, T20);
        else if (Qt7(ve9)) {
          const Re7 = Fe7.visualScenes[ve9].children;
          for (let Ae6 = 0; Ae6 < Re7.length; Ae6++) {
            const Oe5 = Re7[Ae6];
            if (Oe5.type === "JOINT") {
              const Ne7 = Et8(Oe5.id);
              Vi5(Ne7, _19, T20);
            }
          }
        } else
          console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:", ve9);
      }
      for (A17 = 0; A17 < _19.length; A17++)
        for (Y11 = 0; Y11 < T20.length; Y11++)
          if (re8 = T20[Y11], re8.bone.name === _19[A17].name) {
            M12[A17] = re8, re8.processed = true;
            break;
          }
      for (A17 = 0; A17 < T20.length; A17++)
        re8 = T20[A17], re8.processed === false && (M12.push(re8), re8.processed = true);
      const we8 = [], ge7 = [];
      for (A17 = 0; A17 < M12.length; A17++)
        re8 = M12[A17], we8.push(re8.bone), ge7.push(re8.boneInverse);
      return new po(we8, ge7);
    }
    function Vi5(x34, _19, T20) {
      x34.traverse(function(M12) {
        if (M12.isBone === true) {
          let A17;
          for (let Y11 = 0; Y11 < _19.length; Y11++) {
            const re8 = _19[Y11];
            if (re8.name === M12.name) {
              A17 = re8.boneInverse;
              break;
            }
          }
          A17 === void 0 && (A17 = new Ve4()), T20.push({ bone: M12, boneInverse: A17, processed: false });
        }
      });
    }
    function Lt7(x34) {
      const _19 = [], T20 = x34.matrix, M12 = x34.nodes, A17 = x34.type, Y11 = x34.instanceCameras, re8 = x34.instanceControllers, we8 = x34.instanceLights, ge7 = x34.instanceGeometries, ve9 = x34.instanceNodes;
      for (let ce9 = 0, Re7 = M12.length; ce9 < Re7; ce9++)
        _19.push(Et8(M12[ce9]));
      for (let ce9 = 0, Re7 = Y11.length; ce9 < Re7; ce9++) {
        const Ae6 = Me7(Y11[ce9]);
        Ae6 !== null && _19.push(Ae6.clone());
      }
      for (let ce9 = 0, Re7 = re8.length; ce9 < Re7; ce9++) {
        const Ae6 = re8[ce9], Oe5 = ee7(Ae6.id), Ne7 = $t8(Oe5.id), At8 = Yn6(Ne7, Ae6.materials), ht14 = Ae6.skeletons, rt13 = Oe5.skin.joints, ot13 = $e6(ht14, rt13);
        for (let Un6 = 0, nn4 = At8.length; Un6 < nn4; Un6++) {
          const ji3 = At8[Un6];
          ji3.isSkinnedMesh && (ji3.bind(ot13, Oe5.skin.bindMatrix), ji3.normalizeSkinWeights()), _19.push(ji3);
        }
      }
      for (let ce9 = 0, Re7 = we8.length; ce9 < Re7; ce9++) {
        const Ae6 = F17(we8[ce9]);
        Ae6 !== null && _19.push(Ae6.clone());
      }
      for (let ce9 = 0, Re7 = ge7.length; ce9 < Re7; ce9++) {
        const Ae6 = ge7[ce9], Oe5 = $t8(Ae6.id), Ne7 = Yn6(Oe5, Ae6.materials);
        for (let At8 = 0, ht14 = Ne7.length; At8 < ht14; At8++)
          _19.push(Ne7[At8]);
      }
      for (let ce9 = 0, Re7 = ve9.length; ce9 < Re7; ce9++)
        _19.push(Et8(ve9[ce9]).clone());
      let Pe6;
      if (M12.length === 0 && _19.length === 1)
        Pe6 = _19[0];
      else {
        Pe6 = A17 === "JOINT" ? new Ua() : new Ct4();
        for (let ce9 = 0; ce9 < _19.length; ce9++)
          Pe6.add(_19[ce9]);
      }
      return Pe6.name = A17 === "JOINT" ? x34.sid : x34.name, Pe6.matrix.copy(T20), Pe6.matrix.decompose(Pe6.position, Pe6.quaternion, Pe6.scale), Pe6;
    }
    const Dn6 = new Mn3({ color: 16711935 });
    function mr6(x34, _19) {
      const T20 = [];
      for (let M12 = 0, A17 = x34.length; M12 < A17; M12++) {
        const Y11 = _19[x34[M12]];
        Y11 === void 0 ? (console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.", x34[M12]), T20.push(Dn6)) : T20.push(O20(Y11));
      }
      return T20;
    }
    function Yn6(x34, _19) {
      const T20 = [];
      for (const M12 in x34) {
        const A17 = x34[M12], Y11 = mr6(A17.materialKeys, _19);
        if (Y11.length === 0 && (M12 === "lines" || M12 === "linestrips" ? Y11.push(new Ls()) : Y11.push(new Zs())), M12 === "lines" || M12 === "linestrips")
          for (let ve9 = 0, Pe6 = Y11.length; ve9 < Pe6; ve9++) {
            const ce9 = Y11[ve9];
            if (ce9.isMeshPhongMaterial === true || ce9.isMeshLambertMaterial === true) {
              const Re7 = new Ls();
              Re7.color.copy(ce9.color), Re7.opacity = ce9.opacity, Re7.transparent = ce9.transparent, Y11[ve9] = Re7;
            }
          }
        const re8 = A17.data.attributes.skinIndex !== void 0, we8 = Y11.length === 1 ? Y11[0] : Y11;
        let ge7;
        switch (M12) {
          case "lines":
            ge7 = new ka(A17.data, we8);
            break;
          case "linestrips":
            ge7 = new cr3(A17.data, we8);
            break;
          case "triangles":
          case "polylist":
            re8 ? ge7 = new Su(A17.data, we8) : ge7 = new Pt4(A17.data, we8);
            break;
        }
        T20.push(ge7);
      }
      return T20;
    }
    function Gi3(x34) {
      return Fe7.nodes[x34] !== void 0;
    }
    function Et8(x34) {
      return y33(Fe7.nodes[x34], Lt7);
    }
    function Nn6(x34) {
      const _19 = {
        name: x34.getAttribute("name"),
        children: []
      };
      at10(x34);
      const T20 = n33(x34, "node");
      for (let M12 = 0; M12 < T20.length; M12++)
        _19.children.push(_n6(T20[M12]));
      Fe7.visualScenes[x34.getAttribute("id")] = _19;
    }
    function Hi5(x34) {
      const _19 = new Ct4();
      _19.name = x34.name;
      const T20 = x34.children;
      for (let M12 = 0; M12 < T20.length; M12++) {
        const A17 = T20[M12];
        _19.add(Et8(A17.id));
      }
      return _19;
    }
    function Qt7(x34) {
      return Fe7.visualScenes[x34] !== void 0;
    }
    function Wi4(x34) {
      return y33(Fe7.visualScenes[x34], Hi5);
    }
    function So2(x34) {
      const _19 = n33(x34, "instance_visual_scene")[0];
      return Wi4(o12(_19.getAttribute("url")));
    }
    function gr7() {
      const x34 = Fe7.clips;
      if (l25(x34) === true) {
        if (l25(Fe7.animations) === false) {
          const _19 = [];
          for (const T20 in Fe7.animations) {
            const M12 = w29(T20);
            for (let A17 = 0, Y11 = M12.length; A17 < Y11; A17++)
              _19.push(M12[A17]);
          }
          xr6.push(new ba("default", -1, _19));
        }
      } else
        for (const _19 in x34)
          xr6.push(J11(_19));
    }
    function Ju2(x34) {
      let _19 = "";
      const T20 = [x34];
      for (; T20.length; ) {
        const M12 = T20.shift();
        M12.nodeType === Node.TEXT_NODE ? _19 += M12.textContent : (_19 += `
`, T20.push.apply(T20, M12.childNodes));
      }
      return _19.trim();
    }
    if (e11.length === 0)
      return { scene: new Da() };
    const Xa2 = new DOMParser().parseFromString(e11, "application/xml"), Dt6 = n33(Xa2, "COLLADA")[0], wo2 = Xa2.getElementsByTagName("parsererror")[0];
    if (wo2 !== void 0) {
      const x34 = n33(wo2, "div")[0];
      let _19;
      return x34 ? _19 = x34.textContent : _19 = Ju2(wo2), console.error(`THREE.ColladaLoader: Failed to parse collada file.
`, _19), null;
    }
    const Zu2 = Dt6.getAttribute("version");
    console.debug("THREE.ColladaLoader: File version", Zu2);
    const Ka2 = u35(n33(Dt6, "asset")[0]), Ya2 = new za(this.manager);
    Ya2.setPath(this.resourcePath || t19).setCrossOrigin(this.crossOrigin);
    let To2;
    jc && (To2 = new jc(this.manager), To2.setPath(this.resourcePath || t19));
    const _r6 = new ze4(), xr6 = [];
    let Ja2 = {}, $u2 = 0;
    const Fe7 = {
      animations: {},
      clips: {},
      controllers: {},
      images: {},
      effects: {},
      materials: {},
      cameras: {},
      lights: {},
      geometries: {},
      nodes: {},
      visualScenes: {},
      kinematicsModels: {},
      physicsModels: {},
      kinematicsScenes: {}
    };
    p26(Dt6, "library_animations", "animation", m33), p26(Dt6, "library_animation_clips", "animation_clip", W8), p26(Dt6, "library_controllers", "controller", ie8), p26(Dt6, "library_images", "image", $24), p26(Dt6, "library_effects", "effect", Ee5), p26(Dt6, "library_materials", "material", de9), p26(Dt6, "library_cameras", "camera", ae7), p26(Dt6, "library_lights", "light", Ce7), p26(Dt6, "library_geometries", "geometry", se6), p26(Dt6, "library_nodes", "node", _n6), p26(Dt6, "library_visual_scenes", "visual_scene", Nn6), p26(Dt6, "library_kinematics_models", "kinematics_model", cn3), p26(Dt6, "library_physics_models", "physics_model", q13), p26(Dt6, "scene", "instance_kinematics_scene", Be7), g31(Fe7.animations, b33), g31(Fe7.clips, te7), g31(Fe7.controllers, j18), g31(Fe7.images, z19), g31(Fe7.effects, C19), g31(Fe7.materials, _e7), g31(Fe7.cameras, Le7), g31(Fe7.lights, Mt10), g31(Fe7.geometries, It7), g31(Fe7.visualScenes, Hi5), gr7(), Ye7();
    const yr6 = So2(n33(Dt6, "scene")[0]);
    return yr6.animations = xr6, Ka2.upAxis === "Z_UP" && (console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."), yr6.rotation.set(-Math.PI / 2, 0, 0)), yr6.scale.multiplyScalar(Ka2.unit), {
      get animations() {
        return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."), xr6;
      },
      kinematics: Ja2,
      library: Fe7,
      scene: yr6
    };
  }
};
var qc = new U7();
var E_ = new Ds();
var Yr3 = new Ve4();
var ni3 = new Ve4();
var Jr3 = new qt3();
var Zr3 = new U7(1, 1, 1);
var $r3 = new U7();
var yo = class extends _t3 {
  constructor(...e11) {
    super(...e11), this.urdfNode = null, this.urdfName = "";
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.urdfNode = e11.urdfNode, this.urdfName = e11.urdfName, this;
  }
};
var C_ = class extends yo {
  constructor(...e11) {
    super(...e11), this.isURDFCollider = true, this.type = "URDFCollider";
  }
};
var L_ = class extends yo {
  constructor(...e11) {
    super(...e11), this.isURDFVisual = true, this.type = "URDFVisual";
  }
};
var zu = class extends yo {
  constructor(...e11) {
    super(...e11), this.isURDFLink = true, this.type = "URDFLink";
  }
};
var Bu = class extends yo {
  get jointType() {
    return this._jointType;
  }
  set jointType(e11) {
    if (this.jointType !== e11)
      switch (this._jointType = e11, this.matrixWorldNeedsUpdate = true, e11) {
        case "fixed":
          this.jointValue = [];
          break;
        case "continuous":
        case "revolute":
        case "prismatic":
          this.jointValue = new Array(1).fill(0);
          break;
        case "planar":
          this.jointValue = new Array(3).fill(0), this.axis = new U7(0, 0, 1);
          break;
        case "floating":
          this.jointValue = new Array(6).fill(0);
          break;
      }
  }
  get angle() {
    return this.jointValue[0];
  }
  constructor(...e11) {
    super(...e11), this.isURDFJoint = true, this.type = "URDFJoint", this.jointValue = null, this.jointType = "fixed", this.axis = new U7(1, 0, 0), this.limit = { lower: 0, upper: 0 }, this.ignoreLimits = false, this.origPosition = null, this.origQuaternion = null, this.mimicJoints = [];
  }
  /* Overrides */
  copy(e11, t19) {
    return super.copy(e11, t19), this.jointType = e11.jointType, this.axis = e11.axis.clone(), this.limit.lower = e11.limit.lower, this.limit.upper = e11.limit.upper, this.ignoreLimits = false, this.jointValue = [...e11.jointValue], this.origPosition = e11.origPosition ? e11.origPosition.clone() : null, this.origQuaternion = e11.origQuaternion ? e11.origQuaternion.clone() : null, this.mimicJoints = [...e11.mimicJoints], this;
  }
  /* Public Functions */
  /**
   * @param {...number|null} values The joint value components to set, optionally null for no-op
   * @returns {boolean} Whether the invocation of this function resulted in an actual change to the joint value
   */
  setJointValue(...e11) {
    e11 = e11.map((n33) => n33 === null ? null : parseFloat(n33)), (!this.origPosition || !this.origQuaternion) && (this.origPosition = this.position.clone(), this.origQuaternion = this.quaternion.clone());
    let t19 = false;
    switch (this.mimicJoints.forEach((n33) => {
      t19 = n33.updateFromMimickedJoint(...e11) || t19;
    }), this.jointType) {
      case "fixed":
        return t19;
      case "continuous":
      case "revolute": {
        let n33 = e11[0];
        return n33 == null || n33 === this.jointValue[0] ? t19 : (!this.ignoreLimits && this.jointType === "revolute" && (n33 = Math.min(this.limit.upper, n33), n33 = Math.max(this.limit.lower, n33)), this.quaternion.setFromAxisAngle(this.axis, n33).premultiply(this.origQuaternion), this.jointValue[0] !== n33 ? (this.jointValue[0] = n33, this.matrixWorldNeedsUpdate = true, true) : t19);
      }
      case "prismatic": {
        let n33 = e11[0];
        return n33 == null || n33 === this.jointValue[0] ? t19 : (this.ignoreLimits || (n33 = Math.min(this.limit.upper, n33), n33 = Math.max(this.limit.lower, n33)), this.position.copy(this.origPosition), qc.copy(this.axis).applyEuler(this.rotation), this.position.addScaledVector(qc, n33), this.jointValue[0] !== n33 ? (this.jointValue[0] = n33, this.matrixWorldNeedsUpdate = true, true) : t19);
      }
      case "floating":
        return this.jointValue.every((n33, i27) => e11[i27] === n33 || e11[i27] === null) ? t19 : (this.jointValue[0] = e11[0] !== null ? e11[0] : this.jointValue[0], this.jointValue[1] = e11[1] !== null ? e11[1] : this.jointValue[1], this.jointValue[2] = e11[2] !== null ? e11[2] : this.jointValue[2], this.jointValue[3] = e11[3] !== null ? e11[3] : this.jointValue[3], this.jointValue[4] = e11[4] !== null ? e11[4] : this.jointValue[4], this.jointValue[5] = e11[5] !== null ? e11[5] : this.jointValue[5], ni3.compose(this.origPosition, this.origQuaternion, Zr3), Jr3.setFromEuler(
          E_.set(
            this.jointValue[3],
            this.jointValue[4],
            this.jointValue[5],
            "XYZ"
          )
        ), $r3.set(this.jointValue[0], this.jointValue[1], this.jointValue[2]), Yr3.compose($r3, Jr3, Zr3), ni3.premultiply(Yr3), this.position.setFromMatrixPosition(ni3), this.rotation.setFromRotationMatrix(ni3), this.matrixWorldNeedsUpdate = true, true);
      case "planar":
        return this.jointValue.every((n33, i27) => e11[i27] === n33 || e11[i27] === null) ? t19 : (this.jointValue[0] = e11[0] !== null ? e11[0] : this.jointValue[0], this.jointValue[1] = e11[1] !== null ? e11[1] : this.jointValue[1], this.jointValue[2] = e11[2] !== null ? e11[2] : this.jointValue[2], ni3.compose(this.origPosition, this.origQuaternion, Zr3), Jr3.setFromAxisAngle(this.axis, this.jointValue[2]), $r3.set(this.jointValue[0], this.jointValue[1], 0), Yr3.compose($r3, Jr3, Zr3), ni3.premultiply(Yr3), this.position.setFromMatrixPosition(ni3), this.rotation.setFromRotationMatrix(ni3), this.matrixWorldNeedsUpdate = true, true);
    }
    return t19;
  }
};
var Xc = class extends Bu {
  constructor(...e11) {
    super(...e11), this.type = "URDFMimicJoint", this.mimicJoint = null, this.offset = 0, this.multiplier = 1;
  }
  updateFromMimickedJoint(...e11) {
    const t19 = e11.map((n33) => n33 * this.multiplier + this.offset);
    return super.setJointValue(...t19);
  }
  /* Overrides */
  copy(e11, t19) {
    return super.copy(e11, t19), this.mimicJoint = e11.mimicJoint, this.offset = e11.offset, this.multiplier = e11.multiplier, this;
  }
};
var R_ = class extends zu {
  constructor(...e11) {
    super(...e11), this.isURDFRobot = true, this.urdfNode = null, this.urdfRobotNode = null, this.robotName = null, this.links = null, this.joints = null, this.colliders = null, this.visual = null, this.frames = null;
  }
  copy(e11, t19) {
    super.copy(e11, t19), this.urdfRobotNode = e11.urdfRobotNode, this.robotName = e11.robotName, this.links = {}, this.joints = {}, this.colliders = {}, this.visual = {}, this.traverse((n33) => {
      n33.isURDFJoint && n33.urdfName in e11.joints && (this.joints[n33.urdfName] = n33), n33.isURDFLink && n33.urdfName in e11.links && (this.links[n33.urdfName] = n33), n33.isURDFCollider && n33.urdfName in e11.colliders && (this.colliders[n33.urdfName] = n33), n33.isURDFVisual && n33.urdfName in e11.visual && (this.visual[n33.urdfName] = n33);
    });
    for (const n33 in this.joints)
      this.joints[n33].mimicJoints = this.joints[n33].mimicJoints.map((i27) => this.joints[i27.name]);
    return this.frames = {
      ...this.colliders,
      ...this.visual,
      ...this.links,
      ...this.joints
    }, this;
  }
  getFrame(e11) {
    return this.frames[e11];
  }
  setJointValue(e11, ...t19) {
    const n33 = this.joints[e11];
    return n33 ? n33.setJointValue(...t19) : false;
  }
  setJointValues(e11) {
    let t19 = false;
    for (const n33 in e11) {
      const i27 = e11[n33];
      Array.isArray(i27) ? t19 = this.setJointValue(n33, ...i27) || t19 : t19 = this.setJointValue(n33, i27) || t19;
    }
    return t19;
  }
};
var ua = new qt3();
var Kc = new Ds();
function ds(a22) {
  return a22 ? a22.trim().split(/\s+/g).map((e11) => parseFloat(e11)) : [0, 0, 0];
}
function Yc(a22, e11, t19 = false) {
  t19 || a22.rotation.set(0, 0, 0), Kc.set(e11[0], e11[1], e11[2], "ZYX"), ua.setFromEuler(Kc), ua.multiply(a22.quaternion), a22.quaternion.copy(ua);
}
var Vu = class {
  constructor(e11) {
    this.manager = e11 || Lu, this.loadMeshCb = this.defaultMeshLoader.bind(this), this.parseVisual = true, this.parseCollision = false, this.packages = "", this.workingPath = "", this.fetchOptions = {};
  }
  /* Public API */
  loadAsync(e11) {
    return new Promise((t19, n33) => {
      this.load(e11, t19, null, n33);
    });
  }
  // urdf:    The path to the URDF within the package OR absolute
  // onComplete:      Callback that is passed the model once loaded
  load(e11, t19, n33, i27) {
    const s18 = this.manager, r24 = sr3.extractUrlBase(e11), o12 = this.manager.resolveURL(e11);
    s18.itemStart(o12), fetch(o12, this.fetchOptions).then((c27) => {
      if (c27.ok)
        return n33 && n33(null), c27.text();
      throw new Error(`URDFLoader: Failed to load url '${o12}' with error code ${c27.status} : ${c27.statusText}.`);
    }).then((c27) => {
      this.workingPath === "" && (this.workingPath = r24);
      const l25 = this.parse(c27);
      t19(l25), s18.itemEnd(o12);
    }).catch((c27) => {
      i27 ? i27(c27) : console.error("URDFLoader: Error loading file.", c27), s18.itemError(o12), s18.itemEnd(o12);
    });
  }
  parse(e11) {
    const t19 = this.packages, n33 = this.loadMeshCb, i27 = this.parseVisual, s18 = this.parseCollision, r24 = this.workingPath, o12 = this.manager, c27 = {}, l25 = {}, u35 = {};
    function h26(E24) {
      if (!/^package:\/\//.test(E24))
        return r24 ? r24 + E24 : E24;
      const [b33, w29] = E24.replace(/^package:\/\//, "").split(/\/(.+)/);
      if (typeof t19 == "string")
        return t19.endsWith(b33) ? t19 + "/" + w29 : t19 + "/" + b33 + "/" + w29;
      if (t19 instanceof Function)
        return t19(b33) + "/" + w29;
      if (typeof t19 == "object")
        return b33 in t19 ? t19[b33] + "/" + w29 : (console.error(`URDFLoader : ${b33} not found in provided package list.`), null);
    }
    function d34(E24) {
      let b33;
      E24 instanceof Document ? b33 = [...E24.children] : E24 instanceof Element ? b33 = [E24] : b33 = [...new DOMParser().parseFromString(E24, "text/xml").children];
      const w29 = b33.filter((S21) => S21.nodeName === "robot").pop();
      return p26(w29);
    }
    function p26(E24) {
      const b33 = [...E24.children], w29 = b33.filter((G15) => G15.nodeName.toLowerCase() === "link"), S21 = b33.filter((G15) => G15.nodeName.toLowerCase() === "joint"), D17 = b33.filter((G15) => G15.nodeName.toLowerCase() === "material"), N19 = new R_();
      N19.robotName = E24.getAttribute("name"), N19.urdfRobotNode = E24, D17.forEach((G15) => {
        const B21 = G15.getAttribute("name");
        u35[B21] = m33(G15);
      });
      const I16 = {}, v30 = {};
      w29.forEach((G15) => {
        const B21 = G15.getAttribute("name"), k27 = E24.querySelector(`child[link="${B21}"]`) === null;
        c27[B21] = y33(G15, I16, v30, k27 ? N19 : null);
      }), S21.forEach((G15) => {
        const B21 = G15.getAttribute("name");
        l25[B21] = g31(G15);
      }), N19.joints = l25, N19.links = c27, N19.colliders = v30, N19.visual = I16;
      const L11 = Object.values(l25);
      return L11.forEach((G15) => {
        G15 instanceof Xc && l25[G15.mimicJoint].mimicJoints.push(G15);
      }), L11.forEach((G15) => {
        const B21 = /* @__PURE__ */ new Set(), k27 = (V14) => {
          if (B21.has(V14))
            throw new Error("URDFLoader: Detected an infinite loop of mimic joints.");
          B21.add(V14), V14.mimicJoints.forEach((H15) => {
            k27(H15);
          });
        };
        k27(G15);
      }), N19.frames = {
        ...v30,
        ...I16,
        ...c27,
        ...l25
      }, N19;
    }
    function g31(E24) {
      const b33 = [...E24.children], w29 = E24.getAttribute("type");
      let S21;
      const D17 = b33.find((B21) => B21.nodeName.toLowerCase() === "mimic");
      D17 ? (S21 = new Xc(), S21.mimicJoint = D17.getAttribute("joint"), S21.multiplier = parseFloat(D17.getAttribute("multiplier") || 1), S21.offset = parseFloat(D17.getAttribute("offset") || 0)) : S21 = new Bu(), S21.urdfNode = E24, S21.name = E24.getAttribute("name"), S21.urdfName = S21.name, S21.jointType = w29;
      let N19 = null, I16 = null, v30 = [0, 0, 0], L11 = [0, 0, 0];
      b33.forEach((B21) => {
        const k27 = B21.nodeName.toLowerCase();
        k27 === "origin" ? (v30 = ds(B21.getAttribute("xyz")), L11 = ds(B21.getAttribute("rpy"))) : k27 === "child" ? I16 = c27[B21.getAttribute("link")] : k27 === "parent" ? N19 = c27[B21.getAttribute("link")] : k27 === "limit" && (S21.limit.lower = parseFloat(B21.getAttribute("lower") || S21.limit.lower), S21.limit.upper = parseFloat(B21.getAttribute("upper") || S21.limit.upper));
      }), N19.add(S21), S21.add(I16), Yc(S21, L11), S21.position.set(v30[0], v30[1], v30[2]);
      const G15 = b33.filter((B21) => B21.nodeName.toLowerCase() === "axis")[0];
      if (G15) {
        const B21 = G15.getAttribute("xyz").split(/\s+/g).map((k27) => parseFloat(k27));
        S21.axis = new U7(B21[0], B21[1], B21[2]), S21.axis.normalize();
      }
      return S21;
    }
    function y33(E24, b33, w29, S21 = null) {
      S21 === null && (S21 = new zu());
      const D17 = [...E24.children];
      return S21.name = E24.getAttribute("name"), S21.urdfName = S21.name, S21.urdfNode = E24, i27 && D17.filter((I16) => I16.nodeName.toLowerCase() === "visual").forEach((I16) => {
        const v30 = f39(I16, u35);
        if (S21.add(v30), I16.hasAttribute("name")) {
          const L11 = I16.getAttribute("name");
          v30.name = L11, v30.urdfName = L11, b33[L11] = v30;
        }
      }), s18 && D17.filter((I16) => I16.nodeName.toLowerCase() === "collision").forEach((I16) => {
        const v30 = f39(I16);
        if (S21.add(v30), I16.hasAttribute("name")) {
          const L11 = I16.getAttribute("name");
          v30.name = L11, v30.urdfName = L11, w29[L11] = v30;
        }
      }), S21;
    }
    function m33(E24) {
      const b33 = [...E24.children], w29 = new Zs();
      return w29.name = E24.getAttribute("name") || "", b33.forEach((S21) => {
        const D17 = S21.nodeName.toLowerCase();
        if (D17 === "color") {
          const N19 = S21.getAttribute("rgba").split(/\s/g).map((I16) => parseFloat(I16));
          w29.color.setRGB(N19[0], N19[1], N19[2]), w29.opacity = N19[3], w29.transparent = N19[3] < 1, w29.depthWrite = !w29.transparent;
        } else if (D17 === "texture") {
          const N19 = S21.getAttribute("filename");
          if (N19) {
            const I16 = new za(o12), v30 = h26(N19);
            w29.map = I16.load(v30), w29.map.colorSpace = bn3;
          }
        }
      }), w29;
    }
    function f39(E24, b33 = {}) {
      const w29 = E24.nodeName.toLowerCase() === "collision", S21 = [...E24.children];
      let D17 = null;
      const N19 = S21.filter((v30) => v30.nodeName.toLowerCase() === "material")[0];
      if (N19) {
        const v30 = N19.getAttribute("name");
        v30 && v30 in b33 ? D17 = b33[v30] : D17 = m33(N19);
      } else
        D17 = new Zs();
      const I16 = w29 ? new C_() : new L_();
      return I16.urdfNode = E24, S21.forEach((v30) => {
        const L11 = v30.nodeName.toLowerCase();
        if (L11 === "geometry") {
          const G15 = v30.children[0].nodeName.toLowerCase();
          if (G15 === "mesh") {
            const B21 = v30.children[0].getAttribute("filename"), k27 = h26(B21);
            if (k27 !== null) {
              const V14 = v30.children[0].getAttribute("scale");
              if (V14) {
                const H15 = ds(V14);
                I16.scale.set(H15[0], H15[1], H15[2]);
              }
              n33(k27, o12, (H15, W8) => {
                W8 ? console.error("URDFLoader: Error loading mesh.", W8) : H15 && (H15 instanceof Pt4 && (H15.material = D17), H15.position.set(0, 0, 0), H15.quaternion.identity(), I16.add(H15));
              });
            }
          } else if (G15 === "box") {
            const B21 = new Pt4();
            B21.geometry = new Ui(1, 1, 1), B21.material = D17;
            const k27 = ds(v30.children[0].getAttribute("size"));
            B21.scale.set(k27[0], k27[1], k27[2]), I16.add(B21);
          } else if (G15 === "sphere") {
            const B21 = new Pt4();
            B21.geometry = new Oa(1, 30, 30), B21.material = D17;
            const k27 = parseFloat(v30.children[0].getAttribute("radius")) || 0;
            B21.scale.set(k27, k27, k27), I16.add(B21);
          } else if (G15 === "cylinder") {
            const B21 = new Pt4();
            B21.geometry = new mo(1, 1, 1, 30), B21.material = D17;
            const k27 = parseFloat(v30.children[0].getAttribute("radius")) || 0, V14 = parseFloat(v30.children[0].getAttribute("length")) || 0;
            B21.scale.set(k27, V14, k27), B21.rotation.set(Math.PI / 2, 0, 0), I16.add(B21);
          }
        } else if (L11 === "origin") {
          const G15 = ds(v30.getAttribute("xyz")), B21 = ds(v30.getAttribute("rpy"));
          I16.position.set(G15[0], G15[1], G15[2]), I16.rotation.set(0, 0, 0), Yc(I16, B21);
        }
      }), I16;
    }
    return d34(e11);
  }
  // Default mesh loading function
  defaultMeshLoader(e11, t19, n33) {
    /\.stl$/i.test(e11) ? new T_(t19).load(e11, (s18) => {
      const r24 = new Pt4(s18, new Zs());
      n33(r24);
    }) : /\.dae$/i.test(e11) ? new A_(t19).load(e11, (s18) => n33(s18.scene)) : console.warn(`URDFLoader: Could not load model at ${e11}.
No loader available`);
  }
};
var P_ = Object.defineProperty;
var Os = (a22, e11, t19, n33) => {
  for (var i27 = void 0, s18 = a22.length - 1, r24; s18 >= 0; s18--)
    (r24 = a22[s18]) && (i27 = r24(e11, t19, i27) || i27);
  return i27 && P_(e11, t19, i27), i27;
};
var no;
var Gu;
var Ms;
var Fi = (Ms = class extends H {
  constructor() {
    super(...arguments);
    Ft3(this, no);
    this.urdfConfigs = xo, this.name = this.urdfConfigs[0].name, this.jointValues = {}, this.pose = [0, 0, 0], this._translation = [0, 0, 0], this._rotation = [0, 0, 0, 0], this.loader = new Ha(), this.group = new Ct4();
  }
  getUrdfConfig() {
    return this.urdfConfigs.find(({ name: t19 }) => t19 === this.name) ?? this.urdfConfigs[0];
  }
  getField() {
    const t19 = this.closest("frc-field3d");
    if (t19)
      return t19;
  }
  static updatePose(t19, n33) {
    const [i27, s18, r24] = n33.translation;
    t19.position.set(i27, s18, r24), t19.rotation.setFromQuaternion(_o(n33.rotation));
  }
  loadRobotModel() {
    const t19 = this.getField(), n33 = this.getUrdfConfig();
    if (!t19)
      return;
    const i27 = t19.getFieldGroup();
    i27.remove(this.group), this.object && this.group.remove(this.object);
    const s18 = new Fa(), r24 = new Vu(s18), o12 = Fu(n33.src ?? "");
    r24.packages = {
      "": Ps(t19.assetPathPrefix ?? "", o12)
      // The equivalent of a (list of) ROS package(s):// directory
    };
    const c27 = new Promise((h26) => {
      if (n33.src)
        r24.load(
          Ps(t19.assetPathPrefix ?? "", n33.src),
          (d34) => {
            h26(d34);
          }
        );
      else {
        const d34 = r24.parse(n33.content ?? "");
        h26(d34);
      }
    }), l25 = new Ct4();
    this.group = l25, i27.add(this.group);
    const u35 = new Ct4();
    this.object = u35, l25.add(u35), u35.rotation.setFromQuaternion(
      Ai3(n33.rotations)
    ), u35.position.set(...n33.position), c27.then((h26) => {
      this.robot = h26, this.updateJoints(), u35.add(h26), An3(this, no, Gu).call(this);
    });
  }
  updateJoints() {
    var t19;
    (t19 = this.robot) == null || t19.setJointValues(this.jointValues);
  }
  firstUpdated() {
    this.updateUrdfConfigs(), this.renderObject();
    const t19 = this.closest("frc-field3d");
    t19 == null || t19.addEventListener("urdfConfigsChange", () => {
      this.updateUrdfConfigs();
    });
  }
  updated(t19) {
    if (t19.has("name") && this.loadRobotModel(), t19.has("jointValues") && this.updateJoints(), t19.has("pose")) {
      const [n33 = 0, i27 = 0, s18 = 0] = this.pose;
      this._translation = [n33, i27], this._rotation = s18;
    }
  }
  updateUrdfConfigs() {
    const t19 = this.getField(), n33 = t19 == null ? void 0 : t19.urdfConfigs;
    n33 != null && n33.length && n33 !== this.urdfConfigs && (this.urdfConfigs = n33, this.urdfConfigs.some(
      (s18) => s18.name === this.name
    ) || (this.name = this.urdfConfigs[0].name));
  }
  renderObject() {
    this.group && Ms.updatePose(this.group, {
      translation: this._translation.length === 2 ? [...this._translation, 0] : this._translation,
      rotation: typeof this._rotation == "number" ? $s([{ axis: "z", degrees: this._rotation }]) : this._rotation
    }), requestAnimationFrame(() => {
      this.renderObject();
    });
  }
}, no = /* @__PURE__ */ new WeakSet(), Gu = function() {
  this.dispatchEvent(
    new CustomEvent("urdfLoad", {
      detail: {
        urdf: this.robot
      },
      bubbles: true,
      composed: true
    })
  );
}, Ms);
Os([
  n()
], Fi.prototype, "urdfConfigs");
Os([
  Mt({ type: String })
], Fi.prototype, "name");
Os([
  Mt({ type: Object, attribute: "joint-values" })
], Fi.prototype, "jointValues");
Os([
  Mt({ type: Array })
], Fi.prototype, "pose");
Os([
  n()
], Fi.prototype, "_translation");
Os([
  n()
], Fi.prototype, "_rotation");
var I_ = Fi;
customElements.get("frc-field3d-urdf") || customElements.define("frc-field3d-urdf", I_);
var D_ = Object.defineProperty;
var gn3 = (a22, e11, t19, n33) => {
  for (var i27 = void 0, s18 = a22.length - 1, r24; s18 >= 0; s18--)
    (r24 = a22[s18]) && (i27 = r24(e11, t19, i27) || i27);
  return i27 && D_(e11, t19, i27), i27;
};
var io;
var Hu;
var Ln3;
var ln3 = (Ln3 = class extends H {
  constructor() {
    super(...arguments);
    Ft3(this, io);
    this.fieldConfigs = Ou, this.objectConfigs = ja, this.urdfConfigs = xo, this.game = this.fieldConfigs[0].game, this.origin = "red", this.backgroundColor = "black", this.enableVR = false, this.fixedCamera = false, this.ORBIT_FIELD_DEFAULT_TARGET = new U7(0, 0.5, 0), this.ORBIT_FIELD_DEFAULT_POSITION = new U7(0, 6, -12), this.WPILIB_ROTATION = Ai3([
      {
        axis: "x",
        degrees: -90
      },
      {
        axis: "y",
        degrees: 180
      }
    ]), this.cameraPoseObject = new _t3(), this.scene = new Da(), this.loader = new Ha();
  }
  getFieldConfig() {
    return this.fieldConfigs.find(({ game: t19 }) => t19 === this.game) ?? this.fieldConfigs[0];
  }
  getCamera() {
    const t19 = this.getBoundingClientRect();
    return new Vt3(
      50,
      t19.width / t19.height,
      0.1,
      100
    );
  }
  static getOrbitControls(t19, n33) {
    const i27 = new Uu(t19, n33);
    return i27.maxDistance = 30, i27.enabled = true, i27.update(), i27;
  }
  static addLights(t19) {
    const s18 = new go(16777215, 0.2);
    s18.position.set(0, 10, 0), t19.add(s18);
    const r24 = 16777215, o12 = 4473924, c27 = 1, l25 = new Ru(
      r24,
      o12,
      c27
    );
    t19.add(l25);
  }
  initRenderer() {
    if (!this.canvas)
      return;
    this.renderer = new Ia({
      antialias: true,
      canvas: this.canvas
    });
    const t19 = this.getBoundingClientRect();
    this.renderer.setSize(t19.width, t19.height), this.vrButton = Ii.createButton(this.renderer), this.renderer.xr.enabled = this.enableVR, this.renderer.setAnimationLoop(() => this.renderField());
  }
  initScene() {
    this.wpilibCoordinateGroup = new Ct4(), this.scene.add(this.wpilibCoordinateGroup), this.wpilibCoordinateGroup.rotation.setFromQuaternion(this.WPILIB_ROTATION), this.wpilibFieldCoordinateGroup = new Ct4(), this.wpilibCoordinateGroup.add(this.wpilibFieldCoordinateGroup), this.wpilibFieldCoordinateGroup.add(this.cameraPoseObject);
  }
  updateCanvasSize() {
    var n33;
    const t19 = this.getBoundingClientRect();
    (n33 = this.renderer) == null || n33.setSize(t19.width, t19.height), this.camera.aspect = t19.width / t19.height, this.camera.updateProjectionMatrix();
  }
  static adjustMaterials(t19) {
    t19.traverse((n33) => {
      const i27 = n33;
      if (i27.isMesh && i27.material instanceof ur3) {
        const s18 = i27.material;
        s18.metalness = 0, s18.roughness = 1;
      }
    });
  }
  static updatePose(t19, n33) {
    const [i27, s18, r24] = n33.translation;
    t19.position.set(i27, s18, r24), t19.rotation.setFromQuaternion(_o(n33.rotation));
  }
  loadFieldModel(t19) {
    this.fieldObject && this.wpilibCoordinateGroup.remove(this.fieldObject);
    const n33 = Ps(this.assetPathPrefix ?? "", t19.src);
    this.loader.load(n33, (i27) => {
      this.fieldObject = i27.scene, this.wpilibCoordinateGroup.add(i27.scene), Ln3.adjustMaterials(i27.scene), i27.scene.rotation.setFromQuaternion(
        Ai3(t19.rotations)
      );
    });
  }
  getFieldGroup() {
    return this.wpilibFieldCoordinateGroup;
  }
  createFieldObject(t19) {
    return new M_(this, t19 == null ? void 0 : t19.onCreate, t19 == null ? void 0 : t19.onRemove);
  }
  firstUpdated() {
    this.initScene(), this.initRenderer(), this.camera = this.getCamera(), this.controls = Ln3.getOrbitControls(this.camera, this.canvas), this.camera.position.copy(this.ORBIT_FIELD_DEFAULT_POSITION), this.controls.target.copy(this.ORBIT_FIELD_DEFAULT_TARGET), Ln3.addLights(this.scene), new ResizeObserver(() => {
      this.updateCanvasSize();
    }).observe(this);
  }
  updated(t19) {
    if (t19.has("fieldConfigs") && (this.fieldConfigs.some(
      (i27) => i27.game === this.game
    ) || (this.game = this.fieldConfigs[0].game), this.loadFieldModel(this.getFieldConfig())), t19.has("game") && this.loadFieldModel(this.getFieldConfig()), t19.has("backgroundColor") && (this.scene.background = new ze4(this.backgroundColor)), t19.has("origin")) {
      const n33 = this.getFieldConfig();
      if (n33) {
        const i27 = this.origin !== "red";
        this.wpilibFieldCoordinateGroup.setRotationFromAxisAngle(
          new U7(0, 0, 1),
          i27 ? 0 : Math.PI
        ), this.wpilibFieldCoordinateGroup.position.set(
          c(n33.size[0] / 2, n33.unit, "m") * (i27 ? -1 : 1),
          c(n33.size[1] / 2, n33.unit, "m") * (i27 ? -1 : 1),
          0
        );
      }
    }
    if (t19.has("enableVR") && (this.enableVR ? this.container.appendChild(this.vrButton) : this.vrButton.remove(), this.renderer && (this.renderer.xr.enabled = this.enableVR)), t19.has("fixedCamera") && (this.controls.enabled = !this.fixedCamera), (t19.has("cameraPose") || t19.has("fixedCamera")) && this.fixedCamera) {
      const n33 = this.cameraPose ? ku(this.cameraPose) : Wa();
      An3(this, io, Hu).call(this, n33);
    }
    t19.has("urdfConfigs") && this.dispatchEvent(
      new CustomEvent("urdfConfigsChange", {
        detail: {
          urdfConfigs: this.urdfConfigs
        },
        bubbles: true,
        composed: true
      })
    );
  }
  renderField() {
    var t19;
    (t19 = this.renderer) == null || t19.render(this.scene, this.camera), this.fixedCamera || this.controls.update();
  }
  connectedCallback() {
    super.connectedCallback(), this.initRenderer();
  }
  disconnectedCallback() {
    var t19;
    super.disconnectedCallback(), (t19 = this.renderer) == null || t19.dispose(), this.renderer = void 0;
  }
  render() {
    return Ot` <div class="container">
      <canvas></canvas>
    </div>`;
  }
}, io = /* @__PURE__ */ new WeakSet(), Hu = function(t19) {
  Ln3.updatePose(this.cameraPoseObject, t19);
  const n33 = new U7();
  this.cameraPoseObject.getWorldPosition(n33);
  const i27 = new qt3();
  this.cameraPoseObject.getWorldQuaternion(i27), this.camera.position.copy(n33), this.camera.quaternion.copy(
    i27.multiply(
      Ai3([
        { axis: "z", degrees: -90 },
        { axis: "y", degrees: -90 }
      ])
    )
  ), this.camera.updateMatrixWorld();
}, Ln3.styles = Ut`
    :host {
      position: relative;
      display: block;
      width: 700px;
      height: 400px;
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
  `, Ln3);
gn3([
  Mt({ type: Array })
], ln3.prototype, "fieldConfigs");
gn3([
  Mt({ type: Array })
], ln3.prototype, "objectConfigs");
gn3([
  Mt({ type: Array })
], ln3.prototype, "urdfConfigs");
gn3([
  Mt({ type: String })
], ln3.prototype, "game");
gn3([
  Mt({ type: String })
], ln3.prototype, "origin");
gn3([
  Mt({ type: String, attribute: "background-color" })
], ln3.prototype, "backgroundColor");
gn3([
  Mt({ type: Boolean, attribute: "enable-vr" })
], ln3.prototype, "enableVR");
gn3([
  Mt({ type: String })
], ln3.prototype, "assetPathPrefix");
gn3([
  Mt({ type: Array, attribute: "camera-pose" })
], ln3.prototype, "cameraPose");
gn3([
  Mt({ type: Boolean, attribute: "fixed-camera" })
], ln3.prototype, "fixedCamera");
gn3([
  h("canvas")
], ln3.prototype, "canvas");
gn3([
  h(".container")
], ln3.prototype, "container");
var N_ = ln3;
customElements.get("frc-field3d") || customElements.define("frc-field3d", N_);
var U_ = Object.defineProperty;
var fi3 = (a22, e11, t19, n33) => {
  for (var i27 = void 0, s18 = a22.length - 1, r24; s18 >= 0; s18--)
    (r24 = a22[s18]) && (i27 = r24(e11, t19, i27) || i27);
  return i27 && U_(e11, t19, i27), i27;
};
var so;
var Wu;
var ci3;
var Kn3 = (ci3 = class extends H {
  constructor() {
    super(...arguments);
    Ft3(this, so);
    this.urdfConfigs = xo, this.name = this.urdfConfigs[0].name, this.backgroundColor = "black", this.enableVR = false, this.angles = {}, this.scene = new Da(), this.group = new Ct4();
  }
  getCamera() {
    const t19 = this.getBoundingClientRect(), n33 = new Vt3(
      50,
      t19.width / t19.height,
      0.1,
      100
    );
    return n33.position.set(1, 1, 1), n33.lookAt(0, 0, 0.5), n33.up.set(0, 0, 1), n33;
  }
  static getOrbitControls(t19, n33) {
    const i27 = new Uu(t19, n33);
    return i27.maxDistance = 30, i27.enabled = true, i27.update(), i27;
  }
  static addLights(t19) {
    const s18 = new go(16777215, 0.2);
    s18.position.set(0, 10, 0), t19.add(s18);
    const r24 = 16777215, o12 = 4473924, c27 = 1, l25 = new Ru(
      r24,
      o12,
      c27
    );
    t19.add(l25);
  }
  initRenderer() {
    if (!this.canvas)
      return;
    this.renderer = new Ia({
      antialias: true,
      canvas: this.canvas
    });
    const t19 = this.getBoundingClientRect();
    this.renderer.setSize(t19.width, t19.height), this.vrButton = Ii.createButton(this.renderer), this.renderer.xr.enabled = this.enableVR, this.renderer.setAnimationLoop(() => this.renderField());
  }
  updateCanvasSize() {
    var n33;
    const t19 = this.getBoundingClientRect();
    (n33 = this.renderer) == null || n33.setSize(t19.width, t19.height), this.camera.aspect = t19.width / t19.height, this.camera.updateProjectionMatrix();
  }
  firstUpdated() {
    this.initRenderer(), this.camera = this.getCamera(), this.controls = ci3.getOrbitControls(this.camera, this.canvas), ci3.addLights(this.scene);
    const t19 = new uo(5, 5, 20, 20), n33 = new Mn3({
      color: 65280,
      side: fn3,
      wireframe: true
    }), i27 = new Pt4(t19, n33);
    this.scene.add(i27), new ResizeObserver(() => {
      this.updateCanvasSize();
    }).observe(this);
  }
  getUrdfConfig() {
    return this.urdfConfigs.find(({ name: t19 }) => t19 === this.name) ?? this.urdfConfigs[0];
  }
  updateAngles() {
    var t19;
    (t19 = this.robot) == null || t19.setAngles(this.angles);
  }
  loadRobotModel() {
    const t19 = this.getUrdfConfig(), n33 = new Fa(), i27 = new Vu(n33), s18 = Fu(t19.src ?? "");
    i27.packages = {
      "": Ps(this.assetPathPrefix ?? "", s18)
      // The equivalent of a (list of) ROS package(s):// directory
    };
    const r24 = new Promise((l25) => {
      if (t19.src)
        i27.load(
          Ps(this.assetPathPrefix ?? "", t19.src),
          (u35) => {
            l25(u35);
          }
        );
      else {
        const u35 = i27.parse(t19.content ?? "");
        l25(u35);
      }
    }), o12 = new Ct4();
    this.group = o12, this.scene.add(this.group);
    const c27 = new Ct4();
    this.object = c27, o12.add(c27), c27.rotation.setFromQuaternion(
      Ai3(t19.rotations)
    ), c27.position.set(...t19.position), r24.then((l25) => {
      this.robot = l25, this.updateAngles(), c27.add(l25), An3(this, so, Wu).call(this);
    });
  }
  updated(t19) {
    (t19.has("urdfConfigs") || t19.has("name")) && (this.urdfConfigs.some(
      (i27) => i27.name === this.name
    ) || (this.name = this.urdfConfigs[0].name), this.loadRobotModel()), t19.has("backgroundColor") && (this.scene.background = new ze4(this.backgroundColor)), t19.has("enableVR") && (this.enableVR ? this.container.appendChild(this.vrButton) : this.vrButton.remove(), this.renderer && (this.renderer.xr.enabled = this.enableVR));
  }
  renderField() {
    var t19;
    (t19 = this.renderer) == null || t19.render(this.scene, this.camera), this.controls.update();
  }
  connectedCallback() {
    super.connectedCallback(), this.initRenderer();
  }
  disconnectedCallback() {
    var t19;
    super.disconnectedCallback(), (t19 = this.renderer) == null || t19.dispose(), this.renderer = void 0;
  }
  render() {
    return Ot` <div class="container">
      <canvas></canvas>
    </div>`;
  }
}, so = /* @__PURE__ */ new WeakSet(), Wu = function() {
  this.dispatchEvent(
    new CustomEvent("urdfLoad", {
      detail: {
        urdf: this.robot
      }
    })
  );
}, ci3.styles = Ut`
    :host {
      position: relative;
      display: block;
      width: 700px;
      height: 400px;
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
  `, ci3);
fi3([
  Mt({ type: Array })
], Kn3.prototype, "urdfConfigs");
fi3([
  Mt({ type: String })
], Kn3.prototype, "name");
fi3([
  Mt({ type: String, attribute: "background-color" })
], Kn3.prototype, "backgroundColor");
fi3([
  Mt({ type: Boolean, attribute: "enable-vr" })
], Kn3.prototype, "enableVR");
fi3([
  Mt({ type: String })
], Kn3.prototype, "assetPathPrefix");
fi3([
  Mt({ type: Object })
], Kn3.prototype, "angles");
fi3([
  h("canvas")
], Kn3.prototype, "canvas");
fi3([
  h(".container")
], Kn3.prototype, "container");
var k_ = Kn3;
customElements.get("frc-urdf") || customElements.define("frc-urdf", k_);
var O_ = Object.defineProperty;
var ju = (a22, e11, t19, n33) => {
  for (var i27 = void 0, s18 = a22.length - 1, r24; s18 >= 0; s18--)
    (r24 = a22[s18]) && (i27 = r24(e11, t19, i27) || i27);
  return i27 && O_(e11, t19, i27), i27;
};
var ar3;
var Mi;
var si3;
var Si;
var ri3;
var ro;
var qu;
var qa = class extends H {
  constructor() {
    super(...arguments);
    Ft3(this, ro);
    Ft3(this, ar3);
    Ft3(this, Mi);
    Ft3(this, si3);
    Ft3(this, Si);
    Ft3(this, ri3);
    this.pose = [0, 0, 0], this._pose3d = Wa();
  }
  getField() {
    return this.closest("frc-field3d");
  }
  loadRobotModel() {
    ft6(this, ar3).create();
  }
  firstUpdated() {
    const t19 = new Ui(0.2, 0.2, 0.2), n33 = new y0(t19), i27 = new Ls({ color: 16044581, linewidth: 4 }), s18 = new ka(n33, i27);
    Kt3(this, Mi, s18), Kt3(this, si3, new oa(
      new U7(1, 0, 0).normalize(),
      new U7(0, 0, 0),
      0.3,
      16711680,
      0.1,
      0.05
    )), Kt3(this, Si, new oa(
      new U7(1, 0, 0).normalize(),
      new U7(0, 0, 0),
      0.3,
      16711680,
      0.1,
      0.05
    )), Kt3(this, ri3, new oa(
      new U7(1, 0, 0).normalize(),
      new U7(0, 0, 0),
      0.3,
      16711680,
      0.1,
      0.05
    )), Kt3(this, ar3, this.getField().createFieldObject({
      onCreate: (r24) => {
        const o12 = r24.getGroup();
        o12.add(ft6(this, Mi)), o12.add(ft6(this, si3)), o12.add(ft6(this, Si)), o12.add(ft6(this, ri3));
      }
    }));
  }
  updated(t19) {
    t19.has("pose") && (this._pose3d = ku(this.pose), An3(this, ro, qu).call(this));
  }
};
ar3 = /* @__PURE__ */ new WeakMap(), Mi = /* @__PURE__ */ new WeakMap(), si3 = /* @__PURE__ */ new WeakMap(), Si = /* @__PURE__ */ new WeakMap(), ri3 = /* @__PURE__ */ new WeakMap(), ro = /* @__PURE__ */ new WeakSet(), qu = function() {
  const t19 = _o(this._pose3d.rotation), [n33, i27, s18] = this._pose3d.translation;
  ft6(this, Mi).position.set(n33, i27, s18), ft6(this, Mi).rotation.setFromQuaternion(t19), ft6(this, si3).rotation.setFromQuaternion(t19), ft6(this, si3).rotateZ(-Math.PI / 2), ft6(this, si3).position.set(n33, i27, s18), ft6(this, Si).rotation.setFromQuaternion(t19), ft6(this, Si).position.set(n33, i27, s18), ft6(this, ri3).setRotationFromQuaternion(t19), ft6(this, ri3).rotateX(Math.PI / 2), ft6(this, ri3).position.set(n33, i27, s18);
};
ju([
  Mt({ type: Array })
], qa.prototype, "pose");
ju([
  n()
], qa.prototype, "_pose3d");
customElements.get("frc-field3d-pose-visualizer") || customElements.define("frc-field3d-pose-visualizer", qa);
var z_ = Object.defineProperty;
var Fs = (a22, e11, t19, n33) => {
  for (var i27 = void 0, s18 = a22.length - 1, r24; s18 >= 0; s18--)
    (r24 = a22[s18]) && (i27 = r24(e11, t19, i27) || i27);
  return i27 && z_(e11, t19, i27), i27;
};
var oi3;
var wi3;
var lr3;
var wn3;
var Ta;
var Xu;
var Ku;
var Yu;
var zi = class extends H {
  constructor() {
    super(...arguments);
    Ft3(this, wn3);
    Ft3(this, oi3);
    Ft3(this, wi3);
    Ft3(this, lr3);
    this.name = "", this.pose = [0, 0, 0], this.sourceProvider = "", this.sourceKey = "", Kt3(this, oi3, []), Kt3(this, wi3, false);
  }
  getJointValues() {
    const t19 = An3(this, wn3, Ta).call(this);
    if (!(t19 != null && t19.hasChildren())) {
      const o12 = {};
      return ft6(this, oi3).forEach((c27) => {
        o12[c27] = 0;
      }), o12;
    }
    const n33 = [this.sourceKey, "joints"].join("/"), i27 = this.store.getSource(
      this.sourceProvider,
      n33
    ), s18 = (i27 == null ? void 0 : i27.getJson(false)) ?? {}, r24 = {};
    return ft6(this, oi3).forEach((o12) => {
      r24[o12] = s18[o12] ?? 0;
    }), r24;
  }
  createRenderRoot() {
    return this;
  }
  updated(t19) {
    (t19.has("sourceProvider") || t19.has("sourceKey") || t19.has("store")) && (Kt3(this, wi3, false), An3(this, wn3, Xu).call(this));
  }
  render() {
    return Ot`
      <frc-field3d-urdf
        @urdfLoad=${An3(this, wn3, Yu)}
        .jointValues=${this.getJointValues()}
        .pose=${this.pose}
        .name=${this.name}
      ></frc-field3d-urdf>
    `;
  }
};
oi3 = /* @__PURE__ */ new WeakMap(), wi3 = /* @__PURE__ */ new WeakMap(), lr3 = /* @__PURE__ */ new WeakMap(), wn3 = /* @__PURE__ */ new WeakSet(), Ta = function() {
  const { provider: t19, store: n33, sourceProvider: i27, sourceKey: s18 } = this;
  if (!(!t19 || !n33 || !i27 || !s18))
    return n33.getSource(i27, s18);
}, Xu = function() {
  var t19, n33;
  (t19 = ft6(this, lr3)) == null || t19.call(this), !(!this.sourceProvider || !this.sourceKey) && Kt3(this, lr3, (n33 = this.store) == null ? void 0 : n33.subscribe(
    this.sourceProvider,
    this.sourceKey,
    () => {
      An3(this, wn3, Ku).call(this), this.requestUpdate();
    },
    true
  ));
}, Ku = function() {
  ft6(this, wi3) || !An3(this, wn3, Ta).call(this) || (ft6(this, oi3).forEach((n33) => {
    var r24;
    const i27 = [this.sourceKey, "joints", n33].join(
      "/"
    ), s18 = this.store.getSource(
      this.sourceProvider,
      i27
    );
    s18 != null && s18.hasValue() || (r24 = this.provider) == null || r24.userUpdate(i27, 0);
  }), Kt3(this, wi3, true));
}, Yu = function(t19) {
  const n33 = t19.detail.urdf;
  Kt3(this, oi3, Object.keys(n33.joints).sort()), Object.values(n33.joints).forEach((i27) => {
    i27.ignoreLimits = true;
  }), this.requestUpdate();
};
Fs([
  Mt({ type: String })
], zi.prototype, "name");
Fs([
  Mt({ type: Array })
], zi.prototype, "pose");
Fs([
  Mt({ type: Object, attribute: false })
], zi.prototype, "provider");
Fs([
  Mt({ type: Object, attribute: false })
], zi.prototype, "store");
Fs([
  Mt({ type: String, attribute: "source-provider" })
], zi.prototype, "sourceProvider");
Fs([
  Mt({ type: String, attribute: "source-key" })
], zi.prototype, "sourceKey");
customElements.get("frc-field3d-urdf-wrapper") || customElements.define("frc-field3d-urdf-wrapper", zi);

// node_modules/@frc-web-components/fwc/dist/icon-Dc8f99z4.js
var o = {
  check: "M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",
  "check-circle": "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z",
  close: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z",
  edit: "M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"
};
var d4 = Object.defineProperty;
var n9 = (e11, s18, a22, v30) => {
  for (var i27 = void 0, c27 = e11.length - 1, p26; c27 >= 0; c27--)
    (p26 = e11[c27]) && (i27 = p26(s18, a22, i27) || i27);
  return i27 && d4(s18, a22, i27), i27;
};
var y6 = {
  dashboard: {
    displayName: "Icon",
    defaultHtml: `<frc-icon icon="${Object.keys(o)[0]}"></frc-icon>`
  },
  properties: {
    color: {
      type: "String",
      defaultValue: "#000000",
      input: { type: "ColorPicker" }
    },
    icon: {
      type: "String",
      defaultValue: Object.keys(o)[0],
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["Custom"].concat(Object.keys(o));
        }
      }
    },
    svgPath: {
      type: "String",
      attribute: "svg-path",
      defaultValue: "",
      input: {
        isDisabled({ icon: e11 }) {
          return e11 !== "Custom";
        }
      }
    },
    viewBox: {
      type: "String",
      attribute: "view-box",
      defaultValue: "0 0 24 24",
      input: {
        isDisabled({ icon: e11 }) {
          return e11 !== "Custom";
        }
      }
    }
  }
};
var l6 = class l7 extends H {
  constructor() {
    super(...arguments), this.color = "#000000", this.icon = "", this.svgPath = "", this.viewBox = "0 0 24 24";
  }
  render() {
    const s18 = this.icon === "Custom" || !this.icon;
    return Ot`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="24px"
        viewBox=${s18 ? this.viewBox : "0 0 24 24"}
        width="24px"
        fill=${this.color}
      >
        <path d=${s18 ? this.svgPath : o[this.icon]} />
      </svg>
    `;
  }
};
l6.styles = Ut`
    :host {
      display: inline-block;
      width: 24px;
      height: 24px;
    }

    svg {
      width: 100%;
      height: 100%;
    }
  `;
var t6 = l6;
n9([
  Mt({ type: String })
], t6.prototype, "color");
n9([
  Mt({ type: String })
], t6.prototype, "icon");
n9([
  Mt({ type: String, attribute: "svg-path" })
], t6.prototype, "svgPath");
n9([
  Mt({ type: String, attribute: "view-box" })
], t6.prototype, "viewBox");
customElements.get("frc-icon") || customElements.define("frc-icon", t6);

// node_modules/@frc-web-components/fwc/dist/components/number-bar.es.js
var l8 = Object.defineProperty;
var i7 = (n33, r24, a22, y33) => {
  for (var s18 = void 0, p26 = n33.length - 1, o12; p26 >= 0; p26--)
    (o12 = n33[p26]) && (s18 = o12(r24, a22, s18) || s18);
  return s18 && l8(r24, a22, s18), s18;
};
var k4 = {
  dashboard: {
    displayName: "Number Bar"
  },
  properties: {
    value: { type: "Number", primary: true },
    max: { type: "Number", defaultValue: 1 },
    min: { type: "Number", defaultValue: -1 },
    center: { type: "Number" },
    precision: { type: "Number", defaultValue: 2 },
    hideText: { type: "Boolean", attribute: "hide-text" },
    numTickMarks: {
      type: "Number",
      defaultValue: 3,
      attribute: "num-tick-marks"
    },
    unit: { type: "String" }
  }
};
function b7(n33, r24, a22) {
  return Math.min(a22, Math.max(n33, r24));
}
var m5 = class m6 extends H {
  constructor() {
    super(...arguments), this.value = 0, this.min = -1, this.max = 1, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "";
  }
  render() {
    const r24 = Math.min(this.min, this.max), a22 = Math.max(this.min, this.max);
    return Ot`
      <frc-bar
        value="${this.value}"
        min="${r24}"
        max="${a22}"
        center="${this.center}"
        part="bar"
      >
        ${this.hideText ? "" : Ot`
              ${this.value.toFixed(b7(this.precision, 0, 100))} ${this.unit}
            `}
      </frc-bar>
      ${this.numTickMarks > 0 ? Ot`
            <frc-axis
              part="axis"
              ticks="${this.numTickMarks}"
              min=${r24}
              max=${a22}
              unit="${this.unit}"
            ></frc-axis>
          ` : ""}
    `;
  }
};
m5.styles = [
  Ut`
      :host {
        display: inline-block;
        width: 300px;
        height: auto;
        font-family: sans-serif;
      }

      [part='bar'] {
        width: 100%;
        margin: 0;
      }

      [part='bar'] {
        position: relative;
        height: 20px;
        border-radius: 3px;
      }

      [part='axis'] {
        width: calc(100% - 45px);
        margin: 2px auto 0;
        display: block;
      }
    `
];
var t7 = m5;
i7([
  Mt({ type: Number })
], t7.prototype, "value");
i7([
  Mt({ type: Number })
], t7.prototype, "min");
i7([
  Mt({ type: Number })
], t7.prototype, "max");
i7([
  Mt({ type: Number })
], t7.prototype, "center");
i7([
  Mt({ type: Number })
], t7.prototype, "precision");
i7([
  Mt({ type: Boolean, attribute: "hide-text" })
], t7.prototype, "hideText");
i7([
  Mt({ type: Number, attribute: "num-tick-marks" })
], t7.prototype, "numTickMarks");
i7([
  Mt({ type: String })
], t7.prototype, "unit");
customElements.get("frc-number-bar") || customElements.define("frc-number-bar", t7);

// node_modules/@frc-web-components/fwc/dist/components/accelerometer.es.js
var n10 = Object.defineProperty;
var r5 = (u35, p26, o12, c27) => {
  for (var i27 = void 0, a22 = u35.length - 1, m33; a22 >= 0; a22--)
    (m33 = u35[a22]) && (i27 = m33(p26, o12, i27) || i27);
  return i27 && n10(p26, o12, i27), i27;
};
var b8 = {
  dashboard: {
    displayName: "Accelerometer"
  },
  properties: {
    value: { type: "Number", primary: true },
    max: { type: "Number", defaultValue: 1 },
    min: { type: "Number", defaultValue: -1 },
    center: { type: "Number" },
    precision: { type: "Number", defaultValue: 2 },
    hideText: { type: "Boolean", attribute: "hide-text" },
    numTickMarks: {
      type: "Number",
      defaultValue: 3,
      attribute: "num-tick-marks"
    },
    unit: { type: "String", defaultValue: "g" }
  }
};
var e3 = class extends t7 {
  constructor() {
    super(...arguments), this.value = 0, this.min = -1, this.max = 1, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "g";
  }
};
r5([
  Mt({ type: Number })
], e3.prototype, "value");
r5([
  Mt({ type: Number })
], e3.prototype, "min");
r5([
  Mt({ type: Number })
], e3.prototype, "max");
r5([
  Mt({ type: Number })
], e3.prototype, "center");
r5([
  Mt({ type: Number })
], e3.prototype, "precision");
r5([
  Mt({ type: Boolean, attribute: "hide-text" })
], e3.prototype, "hideText");
r5([
  Mt({ type: Number, attribute: "num-tick-marks" })
], e3.prototype, "numTickMarks");
r5([
  Mt({ type: String })
], e3.prototype, "unit");
customElements.get("frc-accelerometer") || customElements.define("frc-accelerometer", e3);

// node_modules/@frc-web-components/fwc/dist/components/3-axis-accelerometer.es.js
var d5 = Object.defineProperty;
var r6 = (s18, i27, o12, h26) => {
  for (var a22 = void 0, p26 = s18.length - 1, c27; p26 >= 0; p26--)
    (c27 = s18[p26]) && (a22 = c27(i27, o12, a22) || a22);
  return a22 && d5(i27, o12, a22), a22;
};
var N5 = {
  dashboard: {
    displayName: "3-Axis Accelerometer"
  },
  properties: {
    x: { type: "Number" },
    y: { type: "Number" },
    z: { type: "Number" },
    max: { type: "Number", defaultValue: 1 },
    min: { type: "Number", defaultValue: -1 },
    center: { type: "Number" },
    precision: { type: "Number", defaultValue: 2 },
    hideText: { type: "Boolean", attribute: "hide-text" },
    numTickMarks: {
      type: "Number",
      defaultValue: 3,
      attribute: "num-tick-marks"
    },
    unit: { type: "String", defaultValue: "g" }
  }
};
var m7 = class m8 extends H {
  constructor() {
    super(...arguments), this.x = 0, this.y = 0, this.z = 0, this.min = -1, this.max = 1, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "g";
  }
  renderAccelerometer(i27, o12) {
    return Ot`
      <div part="accelerometer">
        <label part="label">${i27}</label>
        <frc-accelerometer
          part="${i27}"
          value="${this[i27] || 0}"
          min="${this.min}"
          max="${this.max}"
          center="${this.center}"
          precision="${this.precision}"
          ?hide-text="${this.hideText}"
          num-tick-marks="${o12}"
          unit="${this.unit}"
        ></frc-accelerometer>
      </div>
    `;
  }
  render() {
    return Ot`
      ${this.renderAccelerometer("x", 0)} ${this.renderAccelerometer("y", 0)}
      ${this.renderAccelerometer("z", this.numTickMarks)}
    `;
  }
};
m7.styles = Ut`
    :host {
      display: inline-flex;
      flex-direction: column;
      height: auto;
      font-family: sans-serif;
      width: 300px;
    }

    [part='accelerometer'] {
      width: 100%;
      display: flex;
      gap: 8px;
      align-items: center;
      margin-bottom: 10px;
    }

    [part='accelerometer']:last-child {
      margin-bottom: 0;
    }

    [part='accelerometer'] label {
      width: 10px;
      padding-top: 2px;
      font-weight: bold;
      text-transform: uppercase;
      color: var(--frc-3-axis-accelerometer-label-color, #000);
    }

    frc-accelerometer {
      width: 100%;
      flex: 1;
    }

    frc-accelerometer::part(bar) {
      width: 100%;
      margin: 0;
    }
  `;
var e4 = m7;
r6([
  Mt({ type: Number })
], e4.prototype, "x");
r6([
  Mt({ type: Number })
], e4.prototype, "y");
r6([
  Mt({ type: Number })
], e4.prototype, "z");
r6([
  Mt({ type: Number })
], e4.prototype, "min");
r6([
  Mt({ type: Number })
], e4.prototype, "max");
r6([
  Mt({ type: Number })
], e4.prototype, "center");
r6([
  Mt({ type: Number })
], e4.prototype, "precision");
r6([
  Mt({ type: Boolean, attribute: "hide-text" })
], e4.prototype, "hideText");
r6([
  Mt({ type: Number, attribute: "num-tick-marks" })
], e4.prototype, "numTickMarks");
r6([
  Mt({ type: String })
], e4.prototype, "unit");
customElements.get("frc-3-axis-accelerometer") || customElements.define("frc-3-axis-accelerometer", e4);

// node_modules/@frc-web-components/fwc/dist/components/basic-fms-info.es.js
var h5 = Object.defineProperty;
var r7 = (i27, c27, p26, T20) => {
  for (var e11 = void 0, o12 = i27.length - 1, m33; o12 >= 0; o12--)
    (m33 = i27[o12]) && (e11 = m33(c27, p26, e11) || e11);
  return e11 && h5(c27, p26, e11), e11;
};
var E7 = {
  dashboard: {
    displayName: "Basic FMS Info"
  },
  properties: {
    matchType: { type: "Number", attribute: "match-type" },
    matchNumber: { type: "Number", attribute: "match-number" },
    eventName: { type: "String", attribute: "event-name" },
    fmsControlData: { type: "Number", attribute: "fms-control-data" }
  }
};
var u4 = 1;
var d6 = 2;
var b9 = 4;
var y7 = 8;
var g5 = 16;
var A7 = 32;
var D5 = ["Unknown", "Practice", "Qualification", "Elimination"];
var a7 = class a8 extends H {
  constructor() {
    super(...arguments), this.matchType = 0, this.matchNumber = 0, this.eventName = "", this.fmsControlData = 0;
  }
  getRobotState() {
    return this.isEnabled() ? this.isTest() ? "Test" : this.isAuto() ? "Autonomous" : "Teleoperated" : "Disabled";
  }
  isEnabled() {
    return !!(this.fmsControlData & u4);
  }
  isAuto() {
    return !!(this.fmsControlData & d6);
  }
  isTest() {
    return !!(this.fmsControlData & b9);
  }
  isEmergencyStopped() {
    return !!(this.fmsControlData & y7);
  }
  isFmsAttached() {
    return !!(this.fmsControlData & g5);
  }
  isDsAttached() {
    return !!(this.fmsControlData & A7);
  }
  render() {
    return Ot`
      <p>
        <strong>
          <span>${this.eventName}</span>
          <span>${D5[this.matchType]}</span>
          <span>match ${this.matchNumber}</span>
        </strong>
      </p>

      <p style="margin-bottom: 7px; font-weight: normal">
        <span style="margin-right: 5px;">
          ${this.isFmsAttached() ? Ot`
                <span class="info">
                  <frc-icon icon="check" color="green"></frc-icon>
                  FMS connected
                </span>
              ` : Ot`
                <span class="info">
                  <frc-icon icon="close" color="red"></frc-icon>
                  FMS disconnected
                </span>
              `}
        </span>
        <span>
          ${this.isDsAttached() ? Ot`
                <span class="info">
                  <frc-icon icon="check" color="green"></frc-icon>
                  DriverStation connected
                </span>
              ` : Ot`
                <span class="info">
                  <frc-icon icon="close" color="red"></frc-icon>
                  DriverStation disconnected
                </span>
              `}
        </span>
      </p>
      <p style="font-weight: normal">Robot state: ${this.getRobotState()}</p>
    `;
  }
};
a7.styles = Ut`
    p {
      margin: 5px 0;
    }
    p:first-child {
      margin-top: 0;
    }
    p:last-child {
      margin: 0;
    }
    :host {
      text-align: center;
      font-size: 15px;
      display: inline-flex;
      width: auto;
      flex-direction: column;
      justify-content: center;
      font-family: sans-serif;
      color: var(--frc-basic-fms-info-text-color, #000);
    }

    .info {
      display: inline-flex;
      align-items: center;
      gap: 3px;
    }
  `;
var t8 = a7;
r7([
  Mt({ type: Number, attribute: "match-type" })
], t8.prototype, "matchType");
r7([
  Mt({ type: Number, attribute: "match-number" })
], t8.prototype, "matchNumber");
r7([
  Mt({ type: String, attribute: "event-name" })
], t8.prototype, "eventName");
r7([
  Mt({ type: Number, attribute: "fms-control-data" })
], t8.prototype, "fmsControlData");
customElements.get("frc-basic-fms-info") || customElements.define("frc-basic-fms-info", t8);

// node_modules/@frc-web-components/fwc/dist/components/boolean-box.es.js
var d7 = Object.defineProperty;
var i8 = (n33, r24, l25, p26) => {
  for (var e11 = void 0, s18 = n33.length - 1, u35; s18 >= 0; s18--)
    (u35 = n33[s18]) && (e11 = u35(r24, l25, e11) || e11);
  return e11 && d7(r24, l25, e11), e11;
};
var C6 = {
  dashboard: {
    displayName: "Boolean Box"
  },
  properties: {
    value: { type: "Boolean", primary: true },
    trueColor: {
      type: "String",
      input: { type: "ColorPicker" },
      defaultValue: "#00ff00",
      attribute: "true-color"
    },
    falseColor: {
      type: "String",
      input: { type: "ColorPicker" },
      defaultValue: "#ff0000",
      attribute: "false-color"
    },
    label: { type: "String" }
  }
};
var t9;
var o2 = (t9 = class extends H {
  constructor() {
    super(...arguments), this.value = false, this.falseColor = t9.DEFAULT_FALSE_COLOR, this.trueColor = t9.DEFAULT_TRUE_COLOR, this.label = "";
  }
  updated() {
    const r24 = this.falseColor || t9.DEFAULT_FALSE_COLOR, l25 = this.trueColor || t9.DEFAULT_TRUE_COLOR, p26 = this.renderRoot.querySelector(
      "[part=box]"
    ), e11 = this.value ? l25 : r24;
    p26.style.setProperty("--box-color", e11);
  }
  render() {
    return Ot` <div part="box">${this.label || Ot`&nbsp;`}</div> `;
  }
}, t9.DEFAULT_FALSE_COLOR = "#ff0000", t9.DEFAULT_TRUE_COLOR = "#00ff00", t9.styles = Ut`
    :host {
      display: inline-block;
      width: 80px;
      height: 80px;
      padding: 5px;
      box-sizing: border-box;
    }

    [part='box'] {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-content: center;
      flex-wrap: wrap;
      background-color: var(--box-color);
      text-align: center;
    }
  `, t9);
i8([
  Mt({ type: Boolean })
], o2.prototype, "value");
i8([
  Mt({ type: String, attribute: "false-color" })
], o2.prototype, "falseColor");
i8([
  Mt({ type: String, attribute: "true-color" })
], o2.prototype, "trueColor");
i8([
  Mt({ type: String })
], o2.prototype, "label");
var y8 = o2;
customElements.get("frc-boolean-box") || customElements.define("frc-boolean-box", y8);

// node_modules/@frc-web-components/fwc/dist/components/gauge.es.js
var N6 = { exports: {} };
var ce4 = N6.exports;
var X5;
function fe4() {
  return X5 || (X5 = 1, function(A17) {
    (function(r24, g31) {
      var x34 = g31(r24);
      A17.exports ? A17.exports = x34 : r24.Gauge = x34;
    })(typeof window > "u" ? ce4 : window, function(r24, g31) {
      var x34 = r24.document, o12 = Array.prototype.slice, w29 = r24.requestAnimationFrame || r24.mozRequestAnimationFrame || r24.webkitRequestAnimationFrame || r24.msRequestAnimationFrame || function(d34) {
        return setTimeout(d34, 1e3 / 60);
      };
      function G15(d34) {
        var V14 = d34.duration, M12 = 1, q13 = 60 * V14, h26 = d34.start || 0, k27 = d34.end, E24 = k27 - h26, D17 = d34.step, z19 = d34.easing || function(t19) {
          return (t19 /= 0.5) < 1 ? 0.5 * Math.pow(t19, 3) : 0.5 * (Math.pow(t19 - 2, 3) + 2);
        };
        function S21() {
          var a22 = M12 / q13, t19 = E24 * z19(a22) + h26;
          D17(t19, M12), M12 += 1, a22 < 1 && w29(S21);
        }
        w29(S21);
      }
      var U18 = function() {
        var d34 = "http://www.w3.org/2000/svg", V14 = {
          centerX: 50,
          centerY: 50
        }, M12 = {
          dialRadius: 40,
          dialStartAngle: 135,
          dialEndAngle: 45,
          value: 0,
          max: 100,
          min: 0,
          valueDialClass: "value",
          valueClass: "value-text",
          dialClass: "dial",
          gaugeClass: "gauge",
          showValue: true,
          gaugeColor: null,
          label: function(a22) {
            return Math.round(a22);
          }
        };
        function q13() {
          var a22 = arguments[0], t19 = o12.call(arguments, 1);
          return t19.forEach(function(e11) {
            for (var n33 in e11)
              e11.hasOwnProperty(n33) && (a22[n33] = e11[n33]);
          }), a22;
        }
        function h26(a22, t19, e11) {
          var n33 = x34.createElementNS(d34, a22);
          for (var i27 in t19)
            n33.setAttribute(i27, t19[i27]);
          return e11 && e11.forEach(function(b33) {
            n33.appendChild(b33);
          }), n33;
        }
        function k27(a22, t19) {
          return a22 * t19 / 100;
        }
        function E24(a22, t19, e11) {
          var n33 = Number(a22);
          return n33 > e11 ? e11 : n33 < t19 ? t19 : n33;
        }
        function D17(a22, t19, e11) {
          var n33 = e11 - t19, i27 = a22 - t19;
          return 100 * i27 / n33;
        }
        function z19(a22, t19, e11, n33) {
          var i27 = n33 * Math.PI / 180;
          return {
            x: Math.round((a22 + e11 * Math.cos(i27)) * 1e3) / 1e3,
            y: Math.round((t19 + e11 * Math.sin(i27)) * 1e3) / 1e3
          };
        }
        function S21(a22, t19, e11) {
          var n33 = V14.centerX, i27 = V14.centerY;
          return {
            end: z19(n33, i27, a22, e11),
            start: z19(n33, i27, a22, t19)
          };
        }
        return function(t19, e11) {
          e11 = q13({}, M12, e11);
          var n33 = t19, i27 = e11.max, b33 = e11.min, s18 = E24(e11.value, b33, i27), F17 = e11.dialRadius, J11 = e11.showValue, c27 = e11.dialStartAngle, C19 = e11.dialEndAngle, K13 = e11.valueDialClass, Q11 = e11.valueClass;
          e11.valueLabelClass;
          var Z11 = e11.dialClass, ee7 = e11.gaugeClass, I16 = e11.color, O20, p26, te7 = e11.label, ae7 = e11.viewBox, P19;
          if (c27 < C19) {
            console.log("WARN! startAngle < endAngle, Swapping");
            var ne8 = c27;
            c27 = C19, C19 = ne8;
          }
          function j18(u35, m33, f39, l25) {
            var v30 = S21(u35, m33, f39), L11 = v30.start, W8 = v30.end, ie8 = typeof l25 > "u" ? 1 : l25;
            return [
              "M",
              L11.x,
              L11.y,
              "A",
              u35,
              u35,
              0,
              ie8,
              1,
              W8.x,
              W8.y
            ].join(" ");
          }
          function re8(u35) {
            O20 = h26("text", {
              x: 50,
              y: 50,
              fill: "#999",
              class: Q11,
              "font-size": "100%",
              "font-family": "sans-serif",
              "font-weight": "normal",
              "text-anchor": "middle",
              "alignment-baseline": "middle",
              "dominant-baseline": "central"
            }), p26 = h26("path", {
              class: K13,
              fill: "none",
              stroke: "#666",
              "stroke-width": 2.5,
              d: j18(F17, c27, c27)
              // value of 0
            });
            var m33 = k27(100, 360 - Math.abs(c27 - C19)), f39 = m33 <= 180 ? 0 : 1, l25 = h26("svg", { viewBox: ae7 || "0 0 100 100", class: ee7 }, [
              h26("path", {
                class: Z11,
                fill: "none",
                stroke: "#eee",
                "stroke-width": 2,
                d: j18(F17, c27, C19, f39)
              }),
              h26("g", { class: "text-container" }, [O20]),
              p26
            ]);
            u35.appendChild(l25);
          }
          function B21(u35, m33) {
            var f39 = D17(u35, b33, i27), l25 = k27(f39, 360 - Math.abs(c27 - C19)), v30 = l25 <= 180 ? 0 : 1;
            J11 && (O20.textContent = te7.call(e11, u35)), p26.setAttribute("d", j18(F17, c27, l25 + c27, v30));
          }
          function H15(u35, m33) {
            var f39 = I16.call(e11, u35), l25 = m33 * 1e3, v30 = "stroke " + l25 + "ms ease";
            p26.style.stroke = f39, p26.style["-webkit-transition"] = v30, p26.style["-moz-transition"] = v30, p26.style.transition = v30;
          }
          return P19 = {
            setMaxValue: function(u35) {
              i27 = u35, B21(s18);
            },
            setValue: function(u35) {
              s18 = E24(u35, b33, i27), I16 && H15(s18, 0), B21(s18);
            },
            setValueAnimated: function(u35, m33) {
              var f39 = s18;
              s18 = E24(u35, b33, i27), f39 !== s18 && (I16 && H15(s18, m33), G15({
                start: f39 || 0,
                end: s18,
                duration: m33 || 1,
                step: function(l25, v30) {
                  B21(l25);
                }
              }));
            },
            getValue: function() {
              return s18;
            }
          }, re8(n33), P19.setValue(s18), P19;
        };
      }();
      return U18;
    });
  }(N6)), N6.exports;
}
var T7;
var Y3;
function de4() {
  return Y3 || (Y3 = 1, T7 = fe4()), T7;
}
var me4 = de4();
var ve4 = l(me4);
var he4 = Object.defineProperty;
var R6 = (A17, r24, g31, x34) => {
  for (var o12 = void 0, w29 = A17.length - 1, G15; w29 >= 0; w29--)
    (G15 = A17[w29]) && (o12 = G15(r24, g31, o12) || o12);
  return o12 && he4(r24, g31, o12), o12;
};
var we4 = {
  dashboard: {
    displayName: "Gauge"
  },
  properties: {
    min: { type: "Number" },
    max: { type: "Number", defaultValue: 100 },
    value: { type: "Number", primary: true }
  }
};
var $4 = class $5 extends H {
  constructor() {
    super(...arguments), this.min = 0, this.max = 100, this.value = 0;
  }
  setSize() {
    const r24 = this.getBoundingClientRect(), g31 = r24.width, x34 = r24.height, o12 = Math.min(g31, x34);
    this.gaugeElement.style.width = `${o12}px`;
  }
  gaugeInit() {
    this.gaugeElement.innerHTML = "", this.gauge = ve4(this.gaugeElement, {
      min: Math.min(this.min, this.max),
      max: Math.max(this.min, this.max)
    }), this.setSize();
  }
  firstUpdated() {
    this.gaugeInit(), new ResizeObserver(() => this.setSize()).observe(this);
  }
  updated(r24) {
    var g31;
    (r24.has("min") || r24.has("max")) && this.gaugeInit(), (g31 = this.gauge) == null || g31.setValue(this.value);
  }
  render() {
    return Ot`
      <div class="gauge-container-container">
        <div id="gauge" class="gauge-container"></div>
      </div>
    `;
  }
};
$4.styles = Ut`
    :host {
      display: inline-block;
      width: 200px;
      height: 200px;
    }

    .gauge-container-container {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .gauge-container {
      display: block;
    }

    .gauge-container > .gauge > .dial {
      stroke: #ddd;
      stroke-width: 3;
      fill: rgba(0, 0, 0, 0);
      stroke: var(--frc-gauge-color, rgb(221, 221, 221));
    }
    .gauge-container > .gauge > .value {
      stroke: var(--frc-gauge-fill-color, rgb(47, 180, 200));
      stroke-width: 3;
      fill: rgba(0, 0, 0, 0);
    }
    .gauge-container > .gauge .value-text {
      fill: var(--frc-gauge-text-color, rgb(100, 100, 100));
      font-family: sans-serif;
      font-size: 1em;
    }
  `;
var y9 = $4;
R6([
  Mt({ type: Number })
], y9.prototype, "min");
R6([
  Mt({ type: Number })
], y9.prototype, "max");
R6([
  Mt({ type: Number })
], y9.prototype, "value");
R6([
  h("#gauge")
], y9.prototype, "gaugeElement");
customElements.get("frc-gauge") || customElements.define("frc-gauge", y9);

// node_modules/@frc-web-components/fwc/dist/components/gyro.es.js
function v8(i27, t19, e11) {
  i27 = +i27, t19 = +t19, e11 = (s18 = arguments.length) < 2 ? (t19 = i27, i27 = 0, 1) : s18 < 3 ? 1 : +e11;
  for (var n33 = -1, s18 = Math.max(0, Math.ceil((t19 - i27) / e11)) | 0, l25 = new Array(s18); ++n33 < s18; )
    l25[n33] = i27 + n33 * e11;
  return l25;
}
var k5 = Object.defineProperty;
var o3 = (i27, t19, e11, n33) => {
  for (var s18 = void 0, l25 = i27.length - 1, a22; l25 >= 0; l25--)
    (a22 = i27[l25]) && (s18 = a22(t19, e11, s18) || s18);
  return s18 && k5(t19, e11, s18), s18;
};
var z6 = {
  dashboard: {
    displayName: "Gyro"
  },
  properties: {
    value: { type: "Number", primary: true },
    hideLabel: { type: "Boolean", attribute: "hide-label" },
    precision: { type: "Number", defaultValue: 2 },
    counterClockwise: { type: "Boolean", attribute: "counter-clockwise" },
    fromRadians: { type: "Boolean", attribute: "from-radians" }
  }
};
function x7(i27) {
  return i27 * Math.PI / 180;
}
function f8(i27) {
  return i27 * 180 / Math.PI;
}
function w5(i27, t19, e11) {
  return Math.min(e11, Math.max(i27, t19));
}
function c3(i27, t19 = false) {
  const e11 = x7(-(i27 - 90));
  return [t19 ? -Math.cos(e11) : Math.cos(e11), Math.sin(e11)];
}
var g6 = class g7 extends H {
  constructor() {
    super(...arguments), this.value = 0, this.hideLabel = false, this.precision = 2, this.counterClockwise = false, this.fromRadians = false;
  }
  setLabels() {
    const t19 = this.getGyroRadius();
    Ei2(this._labels).selectAll("text").data([0, 45, 90, 135, 180, -135, -90, -45]).join(
      (e11) => e11.append("text").attr("text-anchor", "middle").attr("alignment-baseline", "middle").attr("font-size", 15).attr("fill", "var(--frc-gyro-color, #000)").text((n33) => `${n33}°`)
    ).attr(
      "x",
      (e11) => c3(e11, this.counterClockwise)[0] * (t19 + 30)
    ).attr(
      "y",
      (e11) => -c3(e11, this.counterClockwise)[1] * (t19 + 30)
    );
  }
  setDialAngle() {
    const t19 = this.getGyroRadius(), e11 = this.fromRadians ? f8(this.value) : this.value;
    Ei2(this._dial).attr(
      "x2",
      c3(e11, this.counterClockwise)[0] * (t19 - 7)
    ).attr(
      "y2",
      -c3(e11, this.counterClockwise)[1] * (t19 - 7)
    );
  }
  addTicks(t19, e11, n33, s18) {
    const l25 = this.getGyroRadius();
    Ei2(t19).selectAll("line").data(v8(0, 360, n33)).join(
      (a22) => a22.append("line").attr("stroke", "var(--frc-gyro-color, #000)").attr("stroke-width", s18)
    ).attr("x1", (a22) => c3(a22)[0] * l25).attr("y1", (a22) => -c3(a22)[1] * l25).attr(
      "x2",
      (a22) => c3(a22)[0] * (l25 + e11)
    ).attr(
      "y2",
      (a22) => -c3(a22)[1] * (l25 + e11)
    );
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.resized();
    }).observe(this), this.resized();
  }
  resized() {
    const t19 = this.getSize();
    Ei2(this._svg).attr("width", t19).attr("height", t19), Ei2(this._gyro).attr(
      "transform",
      `translate(${t19 / 2},${t19 / 2})`
    );
    const e11 = this.getGyroRadius();
    Ei2(this._gyroEdge).attr("r", e11), this.addTicks(this._minorTicks, 5, 5, 1), this.addTicks(this._majorTicks, 10, 45, 2), this.setLabels(), this.setDialAngle();
  }
  getSize() {
    const { width: t19 } = this.getBoundingClientRect();
    return t19;
  }
  getGyroRadius() {
    return this.getSize() / 2 - 53;
  }
  updated(t19) {
    (t19.has("value") || t19.has("fromRadians") || t19.has("counterClockwise")) && this.setDialAngle(), t19.has("counterClockwise") && this.setLabels();
  }
  render() {
    const e11 = `${(this.fromRadians ? f8(this.value) : this.value).toFixed(w5(this.precision, 0, 100))}`;
    return Ot`
      <div>
        ${Tt`
          <svg>
            <g class="gyro">
              <circle class="gyro-edge" stroke-width="2" stroke="var(--frc-gyro-color, #000)" style="fill: none"></circle>
              <g class="minor-ticks"></g>
              <g class="major-ticks"></g>
              <g class="labels"></g>
              <circle class="dial-circle" r="9"></circle>
              <line class="dial" x1="0" x2="0"></line>
            </g>
          </svg>
        `} ${this.hideLabel ? null : Ot`<label>${e11}&deg</label> `}
      </div>
    `;
  }
};
g6.styles = Ut`
    :host {
      font-family: sans-serif;
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      width: 300px;
      height: auto;
    }

    svg {
      width: 100%;
    }

    label {
      color: var(--frc-gyro-color, #000);
      text-align: center;
      display: block;
      font-size: 16px;
    }

    .dial-circle {
      fill: var(--frc-gyro-dial-color, blue);
    }

    .dial {
      stroke: var(--frc-gyro-dial-color, blue);
      stroke-width: 3;
    }
  `;
var r8 = g6;
o3([
  Mt({ type: Number })
], r8.prototype, "value");
o3([
  Mt({ type: Boolean, attribute: "hide-label" })
], r8.prototype, "hideLabel");
o3([
  Mt({ type: Number })
], r8.prototype, "precision");
o3([
  Mt({ type: Boolean, attribute: "counter-clockwise" })
], r8.prototype, "counterClockwise");
o3([
  Mt({ type: Boolean, attribute: "from-radians" })
], r8.prototype, "fromRadians");
o3([
  h("svg")
], r8.prototype, "_svg");
o3([
  h(".dial")
], r8.prototype, "_dial");
o3([
  h(".gyro")
], r8.prototype, "_gyro");
o3([
  h(".gyro-edge")
], r8.prototype, "_gyroEdge");
o3([
  h(".minor-ticks")
], r8.prototype, "_minorTicks");
o3([
  h(".major-ticks")
], r8.prototype, "_majorTicks");
o3([
  h(".labels")
], r8.prototype, "_labels");
customElements.get("frc-gyro") || customElements.define("frc-gyro", r8);

// node_modules/@frc-web-components/fwc/dist/components/sendable-chooser.es.js
var $6 = (i27) => {
  throw TypeError(i27);
};
var E8 = (i27, r24, e11) => r24.has(i27) || $6("Cannot " + e11);
var v9 = (i27, r24, e11) => r24.has(i27) ? $6("Cannot add the same private member more than once") : r24 instanceof WeakSet ? r24.add(i27) : r24.set(i27, e11);
var f9 = (i27, r24, e11) => (E8(i27, r24, "access private method"), e11);
var D6 = Object.defineProperty;
var h6 = (i27, r24, e11, u35) => {
  for (var t19 = void 0, s18 = i27.length - 1, l25; s18 >= 0; s18--)
    (l25 = i27[s18]) && (t19 = l25(r24, e11, t19) || t19);
  return t19 && D6(r24, e11, t19), t19;
};
var z7 = {
  dashboard: {
    displayName: "Sendable Chooser",
    topLevel: false
  },
  properties: {
    options: { type: "Array" },
    selected: { type: "String", input: { type: "StringDropdown" } },
    default: { type: "String" },
    active: { type: "String" },
    label: { type: "String", defaultValue: "Auto Choices" }
  }
};
var y10;
var k6;
var x8 = class x9 extends H {
  constructor() {
    super(...arguments);
    v9(this, y10);
    this.options = [], this.selected = "", this.default = "", this.active = "", this.label = "Auto Choices";
  }
  onChange() {
    this.selected = this.selectElement.value, f9(this, y10, k6).call(this);
  }
  render() {
    return Ot`
      <div class="container">
        ${this.label ? Ot` <p>${this.label}</p> ` : ""}
        <div class="input-container">
          <label>
            <select @change=${this.onChange} .value=${this.selected}>
              ${this.options.map(
      (e11) => Ot`
                  <option value=${e11} ?selected=${this.selected === e11}>
                    ${e11}
                  </option>
                `
    )}
            </select>
          </label>
          ${this.options.length > 0 ? Ot`
                ${this.selected === this.active ? Ot`<frc-icon icon="check" color="green"></frc-icon>` : Ot`<frc-icon icon="close" color="red"></frc-icon>`}
              ` : ""}
        </div>
      </div>
    `;
  }
};
y10 = /* @__PURE__ */ new WeakSet(), k6 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: { selected: this.selected },
      bubbles: true,
      composed: true
    })
  );
}, x8.styles = Ut`
    :host {
      display: inline-block;
      min-width: 220px;
      font-family: sans-serif;
    }

    .input-container {
      display: flex;
      align-items: flex-end;
      gap: 7px;
      width: 100%;
    }

    frc-icon {
      width: 20px;
      height: 20px;
      margin-bottom: 12px;
    }

    label {
      position: relative;
      display: inline-block;
      width: 100%;
    }

    label:after {
      content: ' ';
      position: absolute;
      right: 15px;
      top: 46%;
      margin-top: -3px;
      z-index: 2;
      pointer-events: none;
      width: 0;
      height: 0;
      border-style: solid;
      border-width: 6.9px 4px 0 4px;
      border-color: #aaa transparent transparent transparent;
      pointer-events: none;
    }

    select {
      width: 100%;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      outline: 0 none;

      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      padding: 0 30px 0 10px;

      border: 1px solid #e0e0e0;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      background: #fff;
      margin: 0 5px 5px 0;
    }

    p {
      color: var(--frc-sendable-chooser-label-color, black);
      margin: 0;
      font-size: 13px;
      padding-left: 3px;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
  `;
var p3 = x8;
h6([
  Mt({ type: Array })
], p3.prototype, "options");
h6([
  Mt({ type: String, reflect: true })
], p3.prototype, "selected");
h6([
  Mt({ type: String })
], p3.prototype, "default");
h6([
  Mt({ type: String })
], p3.prototype, "active");
h6([
  Mt({ type: String, reflect: true })
], p3.prototype, "label");
h6([
  h("select", true)
], p3.prototype, "selectElement");
customElements.get("frc-sendable-chooser") || customElements.define("frc-sendable-chooser", p3);
var K6 = Object.defineProperty;
var a9 = (i27, r24, e11, u35) => {
  for (var t19 = void 0, s18 = i27.length - 1, l25; s18 >= 0; s18--)
    (l25 = i27[s18]) && (t19 = l25(r24, e11, t19) || t19);
  return t19 && K6(r24, e11, t19), t19;
};
var L5 = {
  defaultSourceKey: "/SmartDashboard/Auto choices",
  defaultSourceProvider: "NetworkTables",
  dashboard: {
    displayName: "Sendable Chooser"
  },
  properties: {
    options: { type: "Array" },
    selected: { type: "String", input: { type: "StringDropdown" } },
    default: { type: "String" },
    active: { type: "String" },
    label: { type: "String", defaultValue: "Auto Choices" },
    provider: { type: "SourceProvider", property: "provider" },
    store: { type: "Store", property: "store" },
    sourceProvider: {
      type: "String",
      attribute: "source-provider",
      input: { type: "None" }
    },
    sourceKey: {
      type: "String",
      attribute: "source-key",
      input: { type: "None" }
    }
  }
};
var d8;
var m9;
var P6;
var S6 = class S7 extends H {
  constructor() {
    super(...arguments);
    v9(this, d8);
    this.options = [], this.selected = "", this.default = "", this.active = "", this.label = "Auto Choices", this.sourceProvider = "", this.sourceKey = "";
  }
  updated(e11) {
    e11.has("default") && (this.options.includes(this.selected) || f9(this, d8, m9).call(this));
  }
  render() {
    return Ot`
      <frc-sendable-chooser
        @change=${f9(this, d8, P6)}
        .options=${this.options}
        .selected=${this.selected}
        .default=${this.default}
        .active=${this.active}
        .label=${this.label}
      ></frc-sendable-chooser>
    `;
  }
};
d8 = /* @__PURE__ */ new WeakSet(), m9 = function() {
  const {
    provider: e11,
    store: u35,
    sourceProvider: t19,
    sourceKey: s18,
    default: l25
  } = this;
  if (!e11 || !u35 || !t19 || !s18)
    return;
  const g31 = u35.getSource(t19, s18), b33 = u35.getSource(
    t19,
    `${s18}/selected`
  );
  if (g31 != null && g31.hasChildren() && !(b33 != null && b33.hasValue())) {
    const A17 = this.options.includes(this.selected) ? this.selected : l25;
    e11.userUpdate(`${s18}/selected`, A17);
  }
}, P6 = function(e11) {
  this.selected = e11.detail.selected, f9(this, d8, m9).call(this);
}, S6.styles = Ut`
    :host {
      display: inline-block;
      min-width: 220px;
      font-family: sans-serif;
    }

    frc-sendable-chooser {
      width: 100%;
      height: 100%;
    }
  `;
var n11 = S6;
a9([
  Mt({ type: Array })
], n11.prototype, "options");
a9([
  Mt({ type: String, reflect: true })
], n11.prototype, "selected");
a9([
  Mt({ type: String })
], n11.prototype, "default");
a9([
  Mt({ type: String })
], n11.prototype, "active");
a9([
  Mt({ type: String, reflect: true })
], n11.prototype, "label");
a9([
  Mt({ type: Object, attribute: false })
], n11.prototype, "provider");
a9([
  Mt({ type: Object, attribute: false })
], n11.prototype, "store");
a9([
  Mt({ type: String, attribute: "source-provider" })
], n11.prototype, "sourceProvider");
a9([
  Mt({ type: String, attribute: "source-key" })
], n11.prototype, "sourceKey");
customElements.get("frc-sendable-chooser-wrapper") || customElements.define("frc-sendable-chooser-wrapper", n11);

// node_modules/@frc-web-components/fwc/dist/directive-helpers-CDfQTKPA.js
var r9 = (o12) => o12.strings === void 0;
var t10 = {};
var f10 = (o12, s18 = t10) => o12._$AH = s18;

// node_modules/@frc-web-components/fwc/dist/directive-B76A7YXI.js
var s4 = { ATTRIBUTE: 1, CHILD: 2, PROPERTY: 3, BOOLEAN_ATTRIBUTE: 4, EVENT: 5, ELEMENT: 6 };
var T8 = (r24) => (...t19) => ({ _$litDirective$: r24, values: t19 });
var _4 = class {
  constructor(t19) {
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  _$AT(t19, e11, i27) {
    this._$Ct = t19, this._$AM = e11, this._$Ci = i27;
  }
  _$AS(t19, e11) {
    return this.update(t19, e11);
  }
  update(t19, e11) {
    return this.render(...e11);
  }
};

// node_modules/@frc-web-components/fwc/dist/style-map-CXHve4fi.js
var o4 = "important";
var f11 = " !" + o4;
var p4 = T8(class extends _4 {
  constructor(n33) {
    var e11;
    if (super(n33), n33.type !== s4.ATTRIBUTE || n33.name !== "style" || ((e11 = n33.strings) == null ? void 0 : e11.length) > 2)
      throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.");
  }
  render(n33) {
    return Object.keys(n33).reduce((e11, s18) => {
      const t19 = n33[s18];
      return t19 == null ? e11 : e11 + `${s18 = s18.includes("-") ? s18 : s18.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g, "-$&").toLowerCase()}:${t19};`;
    }, "");
  }
  update(n33, [e11]) {
    const { style: s18 } = n33.element;
    if (this.ft === void 0)
      return this.ft = new Set(Object.keys(e11)), this.render(e11);
    for (const t19 of this.ft)
      e11[t19] == null && (this.ft.delete(t19), t19.includes("-") ? s18.removeProperty(t19) : s18[t19] = null);
    for (const t19 in e11) {
      const r24 = e11[t19];
      if (r24 != null) {
        this.ft.add(t19);
        const i27 = typeof r24 == "string" && r24.endsWith(f11);
        t19.includes("-") || i27 ? s18.setProperty(t19, i27 ? r24.slice(0, -11) : r24, i27 ? o4 : "") : s18[t19] = r24;
      }
    }
    return v;
  }
});

// node_modules/@frc-web-components/fwc/dist/components/line-chart.es.js
function $t4(t19, e11) {
  return t19 == null || e11 == null ? NaN : t19 < e11 ? -1 : t19 > e11 ? 1 : t19 >= e11 ? 0 : NaN;
}
function pn4(t19, e11) {
  return t19 == null || e11 == null ? NaN : e11 < t19 ? -1 : e11 > t19 ? 1 : e11 >= t19 ? 0 : NaN;
}
function te4(t19) {
  let e11, n33, r24;
  t19.length !== 2 ? (e11 = $t4, n33 = (u35, l25) => $t4(t19(u35), l25), r24 = (u35, l25) => t19(u35) - l25) : (e11 = t19 === $t4 || t19 === pn4 ? t19 : yn4, n33 = t19, r24 = t19);
  function i27(u35, l25, s18 = 0, g31 = u35.length) {
    if (s18 < g31) {
      if (e11(l25, l25) !== 0)
        return g31;
      do {
        const h26 = s18 + g31 >>> 1;
        n33(u35[h26], l25) < 0 ? s18 = h26 + 1 : g31 = h26;
      } while (s18 < g31);
    }
    return s18;
  }
  function a22(u35, l25, s18 = 0, g31 = u35.length) {
    if (s18 < g31) {
      if (e11(l25, l25) !== 0)
        return g31;
      do {
        const h26 = s18 + g31 >>> 1;
        n33(u35[h26], l25) <= 0 ? s18 = h26 + 1 : g31 = h26;
      } while (s18 < g31);
    }
    return s18;
  }
  function o12(u35, l25, s18 = 0, g31 = u35.length) {
    const h26 = i27(u35, l25, s18, g31 - 1);
    return h26 > s18 && r24(u35[h26 - 1], l25) > -r24(u35[h26], l25) ? h26 - 1 : h26;
  }
  return { left: i27, center: o12, right: a22 };
}
function yn4() {
  return 0;
}
function Mn4(t19) {
  return t19 === null ? NaN : +t19;
}
var xn4 = te4($t4);
var vn4 = xn4.right;
te4(Mn4).center;
var me5 = class extends Map {
  constructor(e11, n33 = Tn3) {
    if (super(), Object.defineProperties(this, { _intern: { value: /* @__PURE__ */ new Map() }, _key: { value: n33 } }), e11 != null)
      for (const [r24, i27] of e11)
        this.set(r24, i27);
  }
  get(e11) {
    return super.get(de5(this, e11));
  }
  has(e11) {
    return super.has(de5(this, e11));
  }
  set(e11, n33) {
    return super.set(wn4(this, e11), n33);
  }
  delete(e11) {
    return super.delete(Cn4(this, e11));
  }
};
function de5({ _intern: t19, _key: e11 }, n33) {
  const r24 = e11(n33);
  return t19.has(r24) ? t19.get(r24) : n33;
}
function wn4({ _intern: t19, _key: e11 }, n33) {
  const r24 = e11(n33);
  return t19.has(r24) ? t19.get(r24) : (t19.set(r24, n33), n33);
}
function Cn4({ _intern: t19, _key: e11 }, n33) {
  const r24 = e11(n33);
  return t19.has(r24) && (n33 = t19.get(r24), t19.delete(r24)), n33;
}
function Tn3(t19) {
  return t19 !== null && typeof t19 == "object" ? t19.valueOf() : t19;
}
var kn4 = Math.sqrt(50);
var bn4 = Math.sqrt(10);
var Sn4 = Math.sqrt(2);
function Nt5(t19, e11, n33) {
  const r24 = (e11 - t19) / Math.max(0, n33), i27 = Math.floor(Math.log10(r24)), a22 = r24 / Math.pow(10, i27), o12 = a22 >= kn4 ? 10 : a22 >= bn4 ? 5 : a22 >= Sn4 ? 2 : 1;
  let u35, l25, s18;
  return i27 < 0 ? (s18 = Math.pow(10, -i27) / o12, u35 = Math.round(t19 * s18), l25 = Math.round(e11 * s18), u35 / s18 < t19 && ++u35, l25 / s18 > e11 && --l25, s18 = -s18) : (s18 = Math.pow(10, i27) * o12, u35 = Math.round(t19 / s18), l25 = Math.round(e11 / s18), u35 * s18 < t19 && ++u35, l25 * s18 > e11 && --l25), l25 < u35 && 0.5 <= n33 && n33 < 2 ? Nt5(t19, e11, n33 * 2) : [u35, l25, s18];
}
function Dn3(t19, e11, n33) {
  if (e11 = +e11, t19 = +t19, n33 = +n33, !(n33 > 0))
    return [];
  if (t19 === e11)
    return [t19];
  const r24 = e11 < t19, [i27, a22, o12] = r24 ? Nt5(e11, t19, n33) : Nt5(t19, e11, n33);
  if (!(a22 >= i27))
    return [];
  const u35 = a22 - i27 + 1, l25 = new Array(u35);
  if (r24)
    if (o12 < 0)
      for (let s18 = 0; s18 < u35; ++s18)
        l25[s18] = (a22 - s18) / -o12;
    else
      for (let s18 = 0; s18 < u35; ++s18)
        l25[s18] = (a22 - s18) * o12;
  else if (o12 < 0)
    for (let s18 = 0; s18 < u35; ++s18)
      l25[s18] = (i27 + s18) / -o12;
  else
    for (let s18 = 0; s18 < u35; ++s18)
      l25[s18] = (i27 + s18) * o12;
  return l25;
}
function Xt4(t19, e11, n33) {
  return e11 = +e11, t19 = +t19, n33 = +n33, Nt5(t19, e11, n33)[2];
}
function Qt3(t19, e11, n33) {
  e11 = +e11, t19 = +t19, n33 = +n33;
  const r24 = e11 < t19, i27 = r24 ? Xt4(e11, t19, n33) : Xt4(t19, e11, n33);
  return (r24 ? -1 : 1) * (i27 < 0 ? 1 / -i27 : i27);
}
function Un3(t19) {
  return t19;
}
var Et5 = 1;
var At5 = 2;
var Jt4 = 3;
var Mt6 = 4;
var pe4 = 1e-6;
function $n4(t19) {
  return "translate(" + t19 + ",0)";
}
function An4(t19) {
  return "translate(0," + t19 + ")";
}
function Nn3(t19) {
  return (e11) => +t19(e11);
}
function Fn4(t19, e11) {
  return e11 = Math.max(0, t19.bandwidth() - e11 * 2) / 2, t19.round() && (e11 = Math.round(e11)), (n33) => +t19(n33) + e11;
}
function Yn3() {
  return !this.__axis;
}
function ee4(t19, e11) {
  var n33 = [], r24 = null, i27 = null, a22 = 6, o12 = 6, u35 = 3, l25 = typeof window < "u" && window.devicePixelRatio > 1 ? 0 : 0.5, s18 = t19 === Et5 || t19 === Mt6 ? -1 : 1, g31 = t19 === Mt6 || t19 === At5 ? "x" : "y", h26 = t19 === Et5 || t19 === Jt4 ? $n4 : An4;
  function f39(d34) {
    var b33 = r24 ?? (e11.ticks ? e11.ticks.apply(e11, n33) : e11.domain()), L11 = i27 ?? (e11.tickFormat ? e11.tickFormat.apply(e11, n33) : Un3), F17 = Math.max(a22, 0) + u35, _19 = e11.range(), P19 = +_19[0] + l25, T20 = +_19[_19.length - 1] + l25, N19 = (e11.bandwidth ? Fn4 : Nn3)(e11.copy(), l25), k27 = d34.selection ? d34.selection() : d34, p26 = k27.selectAll(".domain").data([null]), w29 = k27.selectAll(".tick").data(b33, e11).order(), O20 = w29.exit(), q13 = w29.enter().append("g").attr("class", "tick"), E24 = w29.select("line"), y33 = w29.select("text");
    p26 = p26.merge(p26.enter().insert("path", ".tick").attr("class", "domain").attr("stroke", "currentColor")), w29 = w29.merge(q13), E24 = E24.merge(q13.append("line").attr("stroke", "currentColor").attr(g31 + "2", s18 * a22)), y33 = y33.merge(q13.append("text").attr("fill", "currentColor").attr(g31, s18 * F17).attr("dy", t19 === Et5 ? "0em" : t19 === Jt4 ? "0.71em" : "0.32em")), d34 !== k27 && (p26 = p26.transition(d34), w29 = w29.transition(d34), E24 = E24.transition(d34), y33 = y33.transition(d34), O20 = O20.transition(d34).attr("opacity", pe4).attr("transform", function($24) {
      return isFinite($24 = N19($24)) ? h26($24 + l25) : this.getAttribute("transform");
    }), q13.attr("opacity", pe4).attr("transform", function($24) {
      var S21 = this.parentNode.__axis;
      return h26((S21 && isFinite(S21 = S21($24)) ? S21 : N19($24)) + l25);
    })), O20.remove(), p26.attr("d", t19 === Mt6 || t19 === At5 ? o12 ? "M" + s18 * o12 + "," + P19 + "H" + l25 + "V" + T20 + "H" + s18 * o12 : "M" + l25 + "," + P19 + "V" + T20 : o12 ? "M" + P19 + "," + s18 * o12 + "V" + l25 + "H" + T20 + "V" + s18 * o12 : "M" + P19 + "," + l25 + "H" + T20), w29.attr("opacity", 1).attr("transform", function($24) {
      return h26(N19($24) + l25);
    }), E24.attr(g31 + "2", s18 * a22), y33.attr(g31, s18 * F17).text(L11), k27.filter(Yn3).attr("fill", "none").attr("font-size", 10).attr("font-family", "sans-serif").attr("text-anchor", t19 === At5 ? "start" : t19 === Mt6 ? "end" : "middle"), k27.each(function() {
      this.__axis = N19;
    });
  }
  return f39.scale = function(d34) {
    return arguments.length ? (e11 = d34, f39) : e11;
  }, f39.ticks = function() {
    return n33 = Array.from(arguments), f39;
  }, f39.tickArguments = function(d34) {
    return arguments.length ? (n33 = d34 == null ? [] : Array.from(d34), f39) : n33.slice();
  }, f39.tickValues = function(d34) {
    return arguments.length ? (r24 = d34 == null ? null : Array.from(d34), f39) : r24 && r24.slice();
  }, f39.tickFormat = function(d34) {
    return arguments.length ? (i27 = d34, f39) : i27;
  }, f39.tickSize = function(d34) {
    return arguments.length ? (a22 = o12 = +d34, f39) : a22;
  }, f39.tickSizeInner = function(d34) {
    return arguments.length ? (a22 = +d34, f39) : a22;
  }, f39.tickSizeOuter = function(d34) {
    return arguments.length ? (o12 = +d34, f39) : o12;
  }, f39.tickPadding = function(d34) {
    return arguments.length ? (u35 = +d34, f39) : u35;
  }, f39.offset = function(d34) {
    return arguments.length ? (l25 = +d34, f39) : l25;
  }, f39;
}
function Ln4(t19) {
  return ee4(At5, t19);
}
function He4(t19) {
  return ee4(Jt4, t19);
}
function ye4(t19) {
  return ee4(Mt6, t19);
}
function _n3(t19, e11) {
  e11 || (e11 = []);
  var n33 = t19 ? Math.min(e11.length, t19.length) : 0, r24 = e11.slice(), i27;
  return function(a22) {
    for (i27 = 0; i27 < n33; ++i27)
      r24[i27] = t19[i27] * (1 - a22) + e11[i27] * a22;
    return r24;
  };
}
function Hn4(t19) {
  return ArrayBuffer.isView(t19) && !(t19 instanceof DataView);
}
function Wn4(t19, e11) {
  var n33 = e11 ? e11.length : 0, r24 = t19 ? Math.min(n33, t19.length) : 0, i27 = new Array(r24), a22 = new Array(n33), o12;
  for (o12 = 0; o12 < r24; ++o12)
    i27[o12] = ne4(t19[o12], e11[o12]);
  for (; o12 < n33; ++o12)
    a22[o12] = e11[o12];
  return function(u35) {
    for (o12 = 0; o12 < r24; ++o12)
      a22[o12] = i27[o12](u35);
    return a22;
  };
}
function Pn4(t19, e11) {
  var n33 = /* @__PURE__ */ new Date();
  return t19 = +t19, e11 = +e11, function(r24) {
    return n33.setTime(t19 * (1 - r24) + e11 * r24), n33;
  };
}
function zn4(t19, e11) {
  var n33 = {}, r24 = {}, i27;
  (t19 === null || typeof t19 != "object") && (t19 = {}), (e11 === null || typeof e11 != "object") && (e11 = {});
  for (i27 in e11)
    i27 in t19 ? n33[i27] = ne4(t19[i27], e11[i27]) : r24[i27] = e11[i27];
  return function(a22) {
    for (i27 in n33)
      r24[i27] = n33[i27](a22);
    return r24;
  };
}
function ne4(t19, e11) {
  var n33 = typeof e11, r24;
  return e11 == null || n33 === "boolean" ? jt3(e11) : (n33 === "number" ? A4 : n33 === "string" ? (r24 = P4(e11)) ? (e11 = r24, Mt5) : lr2 : e11 instanceof P4 ? Mt5 : e11 instanceof Date ? Pn4 : Hn4(e11) ? _n3 : Array.isArray(e11) ? Wn4 : typeof e11.valueOf != "function" && typeof e11.toString != "function" || isNaN(e11) ? zn4 : A4)(t19, e11);
}
function On4(t19, e11) {
  return t19 = +t19, e11 = +e11, function(n33) {
    return Math.round(t19 * (1 - n33) + e11 * n33);
  };
}
function In4(t19) {
  return Math.abs(t19 = Math.round(t19)) >= 1e21 ? t19.toLocaleString("en").replace(/,/g, "") : t19.toString(10);
}
function Ft4(t19, e11) {
  if ((n33 = (t19 = e11 ? t19.toExponential(e11 - 1) : t19.toExponential()).indexOf("e")) < 0)
    return null;
  var n33, r24 = t19.slice(0, n33);
  return [
    r24.length > 1 ? r24[0] + r24.slice(2) : r24,
    +t19.slice(n33 + 1)
  ];
}
function ft7(t19) {
  return t19 = Ft4(Math.abs(t19)), t19 ? t19[1] : NaN;
}
function En4(t19, e11) {
  return function(n33, r24) {
    for (var i27 = n33.length, a22 = [], o12 = 0, u35 = t19[0], l25 = 0; i27 > 0 && u35 > 0 && (l25 + u35 + 1 > r24 && (u35 = Math.max(1, r24 - l25)), a22.push(n33.substring(i27 -= u35, i27 + u35)), !((l25 += u35 + 1) > r24)); )
      u35 = t19[o12 = (o12 + 1) % t19.length];
    return a22.reverse().join(e11);
  };
}
function Vn4(t19) {
  return function(e11) {
    return e11.replace(/[0-9]/g, function(n33) {
      return t19[+n33];
    });
  };
}
var Bn4 = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
function Yt4(t19) {
  if (!(e11 = Bn4.exec(t19)))
    throw new Error("invalid format: " + t19);
  var e11;
  return new re4({
    fill: e11[1],
    align: e11[2],
    sign: e11[3],
    symbol: e11[4],
    zero: e11[5],
    width: e11[6],
    comma: e11[7],
    precision: e11[8] && e11[8].slice(1),
    trim: e11[9],
    type: e11[10]
  });
}
Yt4.prototype = re4.prototype;
function re4(t19) {
  this.fill = t19.fill === void 0 ? " " : t19.fill + "", this.align = t19.align === void 0 ? ">" : t19.align + "", this.sign = t19.sign === void 0 ? "-" : t19.sign + "", this.symbol = t19.symbol === void 0 ? "" : t19.symbol + "", this.zero = !!t19.zero, this.width = t19.width === void 0 ? void 0 : +t19.width, this.comma = !!t19.comma, this.precision = t19.precision === void 0 ? void 0 : +t19.precision, this.trim = !!t19.trim, this.type = t19.type === void 0 ? "" : t19.type + "";
}
re4.prototype.toString = function() {
  return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (this.width === void 0 ? "" : Math.max(1, this.width | 0)) + (this.comma ? "," : "") + (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) + (this.trim ? "~" : "") + this.type;
};
function Rn4(t19) {
  t:
    for (var e11 = t19.length, n33 = 1, r24 = -1, i27; n33 < e11; ++n33)
      switch (t19[n33]) {
        case ".":
          r24 = i27 = n33;
          break;
        case "0":
          r24 === 0 && (r24 = n33), i27 = n33;
          break;
        default:
          if (!+t19[n33])
            break t;
          r24 > 0 && (r24 = 0);
          break;
      }
  return r24 > 0 ? t19.slice(0, r24) + t19.slice(i27 + 1) : t19;
}
var We5;
function jn4(t19, e11) {
  var n33 = Ft4(t19, e11);
  if (!n33)
    return t19 + "";
  var r24 = n33[0], i27 = n33[1], a22 = i27 - (We5 = Math.max(-8, Math.min(8, Math.floor(i27 / 3))) * 3) + 1, o12 = r24.length;
  return a22 === o12 ? r24 : a22 > o12 ? r24 + new Array(a22 - o12 + 1).join("0") : a22 > 0 ? r24.slice(0, a22) + "." + r24.slice(a22) : "0." + new Array(1 - a22).join("0") + Ft4(t19, Math.max(0, e11 + a22 - 1))[0];
}
function Me4(t19, e11) {
  var n33 = Ft4(t19, e11);
  if (!n33)
    return t19 + "";
  var r24 = n33[0], i27 = n33[1];
  return i27 < 0 ? "0." + new Array(-i27).join("0") + r24 : r24.length > i27 + 1 ? r24.slice(0, i27 + 1) + "." + r24.slice(i27 + 1) : r24 + new Array(i27 - r24.length + 2).join("0");
}
var xe5 = {
  "%": (t19, e11) => (t19 * 100).toFixed(e11),
  b: (t19) => Math.round(t19).toString(2),
  c: (t19) => t19 + "",
  d: In4,
  e: (t19, e11) => t19.toExponential(e11),
  f: (t19, e11) => t19.toFixed(e11),
  g: (t19, e11) => t19.toPrecision(e11),
  o: (t19) => Math.round(t19).toString(8),
  p: (t19, e11) => Me4(t19 * 100, e11),
  r: Me4,
  s: jn4,
  X: (t19) => Math.round(t19).toString(16).toUpperCase(),
  x: (t19) => Math.round(t19).toString(16)
};
function ve5(t19) {
  return t19;
}
var we5 = Array.prototype.map;
var Ce4 = ["y", "z", "a", "f", "p", "n", "µ", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"];
function Gn4(t19) {
  var e11 = t19.grouping === void 0 || t19.thousands === void 0 ? ve5 : En4(we5.call(t19.grouping, Number), t19.thousands + ""), n33 = t19.currency === void 0 ? "" : t19.currency[0] + "", r24 = t19.currency === void 0 ? "" : t19.currency[1] + "", i27 = t19.decimal === void 0 ? "." : t19.decimal + "", a22 = t19.numerals === void 0 ? ve5 : Vn4(we5.call(t19.numerals, String)), o12 = t19.percent === void 0 ? "%" : t19.percent + "", u35 = t19.minus === void 0 ? "−" : t19.minus + "", l25 = t19.nan === void 0 ? "NaN" : t19.nan + "";
  function s18(h26) {
    h26 = Yt4(h26);
    var f39 = h26.fill, d34 = h26.align, b33 = h26.sign, L11 = h26.symbol, F17 = h26.zero, _19 = h26.width, P19 = h26.comma, T20 = h26.precision, N19 = h26.trim, k27 = h26.type;
    k27 === "n" ? (P19 = true, k27 = "g") : xe5[k27] || (T20 === void 0 && (T20 = 12), N19 = true, k27 = "g"), (F17 || f39 === "0" && d34 === "=") && (F17 = true, f39 = "0", d34 = "=");
    var p26 = L11 === "$" ? n33 : L11 === "#" && /[boxX]/.test(k27) ? "0" + k27.toLowerCase() : "", w29 = L11 === "$" ? r24 : /[%p]/.test(k27) ? o12 : "", O20 = xe5[k27], q13 = /[defgprs%]/.test(k27);
    T20 = T20 === void 0 ? 6 : /[gprs]/.test(k27) ? Math.max(1, Math.min(21, T20)) : Math.max(0, Math.min(20, T20));
    function E24(y33) {
      var $24 = p26, S21 = w29, X12, bt9, at10;
      if (k27 === "c")
        S21 = O20(y33) + S21, y33 = "";
      else {
        y33 = +y33;
        var ot13 = y33 < 0 || 1 / y33 < 0;
        if (y33 = isNaN(y33) ? l25 : O20(Math.abs(y33), T20), N19 && (y33 = Rn4(y33)), ot13 && +y33 == 0 && b33 !== "+" && (ot13 = false), $24 = (ot13 ? b33 === "(" ? b33 : u35 : b33 === "-" || b33 === "(" ? "" : b33) + $24, S21 = (k27 === "s" ? Ce4[8 + We5 / 3] : "") + S21 + (ot13 && b33 === "(" ? ")" : ""), q13) {
          for (X12 = -1, bt9 = y33.length; ++X12 < bt9; )
            if (at10 = y33.charCodeAt(X12), 48 > at10 || at10 > 57) {
              S21 = (at10 === 46 ? i27 + y33.slice(X12 + 1) : y33.slice(X12)) + S21, y33 = y33.slice(0, X12);
              break;
            }
        }
      }
      P19 && !F17 && (y33 = e11(y33, 1 / 0));
      var st12 = $24.length + y33.length + S21.length, I16 = st12 < _19 ? new Array(_19 - st12 + 1).join(f39) : "";
      switch (P19 && F17 && (y33 = e11(I16 + y33, I16.length ? _19 - S21.length : 1 / 0), I16 = ""), d34) {
        case "<":
          y33 = $24 + y33 + S21 + I16;
          break;
        case "=":
          y33 = $24 + I16 + y33 + S21;
          break;
        case "^":
          y33 = I16.slice(0, st12 = I16.length >> 1) + $24 + y33 + S21 + I16.slice(st12);
          break;
        default:
          y33 = I16 + $24 + y33 + S21;
          break;
      }
      return a22(y33);
    }
    return E24.toString = function() {
      return h26 + "";
    }, E24;
  }
  function g31(h26, f39) {
    var d34 = s18((h26 = Yt4(h26), h26.type = "f", h26)), b33 = Math.max(-8, Math.min(8, Math.floor(ft7(f39) / 3))) * 3, L11 = Math.pow(10, -b33), F17 = Ce4[8 + b33 / 3];
    return function(_19) {
      return d34(L11 * _19) + F17;
    };
  }
  return {
    format: s18,
    formatPrefix: g31
  };
}
var Ut6;
var Pe4;
var ze5;
Zn4({
  thousands: ",",
  grouping: [3],
  currency: ["$", ""]
});
function Zn4(t19) {
  return Ut6 = Gn4(t19), Pe4 = Ut6.format, ze5 = Ut6.formatPrefix, Ut6;
}
function qn4(t19) {
  return Math.max(0, -ft7(Math.abs(t19)));
}
function Xn4(t19, e11) {
  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(ft7(e11) / 3))) * 3 - ft7(Math.abs(t19)));
}
function Qn4(t19, e11) {
  return t19 = Math.abs(t19), e11 = Math.abs(e11) - t19, Math.max(0, ft7(e11) - ft7(t19)) + 1;
}
function ie4(t19, e11) {
  switch (arguments.length) {
    case 0:
      break;
    case 1:
      this.range(t19);
      break;
    default:
      this.range(e11).domain(t19);
      break;
  }
  return this;
}
var Te4 = Symbol("implicit");
function Oe4() {
  var t19 = new me5(), e11 = [], n33 = [], r24 = Te4;
  function i27(a22) {
    let o12 = t19.get(a22);
    if (o12 === void 0) {
      if (r24 !== Te4)
        return r24;
      t19.set(a22, o12 = e11.push(a22) - 1);
    }
    return n33[o12 % n33.length];
  }
  return i27.domain = function(a22) {
    if (!arguments.length)
      return e11.slice();
    e11 = [], t19 = new me5();
    for (const o12 of a22)
      t19.has(o12) || t19.set(o12, e11.push(o12) - 1);
    return i27;
  }, i27.range = function(a22) {
    return arguments.length ? (n33 = Array.from(a22), i27) : n33.slice();
  }, i27.unknown = function(a22) {
    return arguments.length ? (r24 = a22, i27) : r24;
  }, i27.copy = function() {
    return Oe4(e11, n33).unknown(r24);
  }, ie4.apply(i27, arguments), i27;
}
function Jn4(t19) {
  return function() {
    return t19;
  };
}
function Kn4(t19) {
  return +t19;
}
var ke4 = [0, 1];
function ct6(t19) {
  return t19;
}
function Kt4(t19, e11) {
  return (e11 -= t19 = +t19) ? function(n33) {
    return (n33 - t19) / e11;
  } : Jn4(isNaN(e11) ? NaN : 0.5);
}
function tr4(t19, e11) {
  var n33;
  return t19 > e11 && (n33 = t19, t19 = e11, e11 = n33), function(r24) {
    return Math.max(t19, Math.min(e11, r24));
  };
}
function er4(t19, e11, n33) {
  var r24 = t19[0], i27 = t19[1], a22 = e11[0], o12 = e11[1];
  return i27 < r24 ? (r24 = Kt4(i27, r24), a22 = n33(o12, a22)) : (r24 = Kt4(r24, i27), a22 = n33(a22, o12)), function(u35) {
    return a22(r24(u35));
  };
}
function nr4(t19, e11, n33) {
  var r24 = Math.min(t19.length, e11.length) - 1, i27 = new Array(r24), a22 = new Array(r24), o12 = -1;
  for (t19[r24] < t19[0] && (t19 = t19.slice().reverse(), e11 = e11.slice().reverse()); ++o12 < r24; )
    i27[o12] = Kt4(t19[o12], t19[o12 + 1]), a22[o12] = n33(e11[o12], e11[o12 + 1]);
  return function(u35) {
    var l25 = vn4(t19, u35, 1, r24) - 1;
    return a22[l25](i27[l25](u35));
  };
}
function Ie4(t19, e11) {
  return e11.domain(t19.domain()).range(t19.range()).interpolate(t19.interpolate()).clamp(t19.clamp()).unknown(t19.unknown());
}
function rr4() {
  var t19 = ke4, e11 = ke4, n33 = ne4, r24, i27, a22, o12 = ct6, u35, l25, s18;
  function g31() {
    var f39 = Math.min(t19.length, e11.length);
    return o12 !== ct6 && (o12 = tr4(t19[0], t19[f39 - 1])), u35 = f39 > 2 ? nr4 : er4, l25 = s18 = null, h26;
  }
  function h26(f39) {
    return f39 == null || isNaN(f39 = +f39) ? a22 : (l25 || (l25 = u35(t19.map(r24), e11, n33)))(r24(o12(f39)));
  }
  return h26.invert = function(f39) {
    return o12(i27((s18 || (s18 = u35(e11, t19.map(r24), A4)))(f39)));
  }, h26.domain = function(f39) {
    return arguments.length ? (t19 = Array.from(f39, Kn4), g31()) : t19.slice();
  }, h26.range = function(f39) {
    return arguments.length ? (e11 = Array.from(f39), g31()) : e11.slice();
  }, h26.rangeRound = function(f39) {
    return e11 = Array.from(f39), n33 = On4, g31();
  }, h26.clamp = function(f39) {
    return arguments.length ? (o12 = f39 ? true : ct6, g31()) : o12 !== ct6;
  }, h26.interpolate = function(f39) {
    return arguments.length ? (n33 = f39, g31()) : n33;
  }, h26.unknown = function(f39) {
    return arguments.length ? (a22 = f39, h26) : a22;
  }, function(f39, d34) {
    return r24 = f39, i27 = d34, g31();
  };
}
function Ee4() {
  return rr4()(ct6, ct6);
}
function ir4(t19, e11, n33, r24) {
  var i27 = Qt3(t19, e11, n33), a22;
  switch (r24 = Yt4(r24 ?? ",f"), r24.type) {
    case "s": {
      var o12 = Math.max(Math.abs(t19), Math.abs(e11));
      return r24.precision == null && !isNaN(a22 = Xn4(i27, o12)) && (r24.precision = a22), ze5(r24, o12);
    }
    case "":
    case "e":
    case "g":
    case "p":
    case "r": {
      r24.precision == null && !isNaN(a22 = Qn4(i27, Math.max(Math.abs(t19), Math.abs(e11)))) && (r24.precision = a22 - (r24.type === "e"));
      break;
    }
    case "f":
    case "%": {
      r24.precision == null && !isNaN(a22 = qn4(i27)) && (r24.precision = a22 - (r24.type === "%") * 2);
      break;
    }
  }
  return Pe4(r24);
}
function ar4(t19) {
  var e11 = t19.domain;
  return t19.ticks = function(n33) {
    var r24 = e11();
    return Dn3(r24[0], r24[r24.length - 1], n33 ?? 10);
  }, t19.tickFormat = function(n33, r24) {
    var i27 = e11();
    return ir4(i27[0], i27[i27.length - 1], n33 ?? 10, r24);
  }, t19.nice = function(n33) {
    n33 == null && (n33 = 10);
    var r24 = e11(), i27 = 0, a22 = r24.length - 1, o12 = r24[i27], u35 = r24[a22], l25, s18, g31 = 10;
    for (u35 < o12 && (s18 = o12, o12 = u35, u35 = s18, s18 = i27, i27 = a22, a22 = s18); g31-- > 0; ) {
      if (s18 = Xt4(o12, u35, n33), s18 === l25)
        return r24[i27] = o12, r24[a22] = u35, e11(r24);
      if (s18 > 0)
        o12 = Math.floor(o12 / s18) * s18, u35 = Math.ceil(u35 / s18) * s18;
      else if (s18 < 0)
        o12 = Math.ceil(o12 * s18) / s18, u35 = Math.floor(u35 * s18) / s18;
      else
        break;
      l25 = s18;
    }
    return t19;
  }, t19;
}
function Ve5() {
  var t19 = Ee4();
  return t19.copy = function() {
    return Ie4(t19, Ve5());
  }, ie4.apply(t19, arguments), ar4(t19);
}
function or4(t19, e11) {
  t19 = t19.slice();
  var n33 = 0, r24 = t19.length - 1, i27 = t19[n33], a22 = t19[r24], o12;
  return a22 < i27 && (o12 = n33, n33 = r24, r24 = o12, o12 = i27, i27 = a22, a22 = o12), t19[n33] = e11.floor(i27), t19[r24] = e11.ceil(a22), t19;
}
var Vt4 = /* @__PURE__ */ new Date();
var Bt4 = /* @__PURE__ */ new Date();
function U8(t19, e11, n33, r24) {
  function i27(a22) {
    return t19(a22 = arguments.length === 0 ? /* @__PURE__ */ new Date() : /* @__PURE__ */ new Date(+a22)), a22;
  }
  return i27.floor = (a22) => (t19(a22 = /* @__PURE__ */ new Date(+a22)), a22), i27.ceil = (a22) => (t19(a22 = new Date(a22 - 1)), e11(a22, 1), t19(a22), a22), i27.round = (a22) => {
    const o12 = i27(a22), u35 = i27.ceil(a22);
    return a22 - o12 < u35 - a22 ? o12 : u35;
  }, i27.offset = (a22, o12) => (e11(a22 = /* @__PURE__ */ new Date(+a22), o12 == null ? 1 : Math.floor(o12)), a22), i27.range = (a22, o12, u35) => {
    const l25 = [];
    if (a22 = i27.ceil(a22), u35 = u35 == null ? 1 : Math.floor(u35), !(a22 < o12) || !(u35 > 0))
      return l25;
    let s18;
    do
      l25.push(s18 = /* @__PURE__ */ new Date(+a22)), e11(a22, u35), t19(a22);
    while (s18 < a22 && a22 < o12);
    return l25;
  }, i27.filter = (a22) => U8((o12) => {
    if (o12 >= o12)
      for (; t19(o12), !a22(o12); )
        o12.setTime(o12 - 1);
  }, (o12, u35) => {
    if (o12 >= o12)
      if (u35 < 0)
        for (; ++u35 <= 0; )
          for (; e11(o12, -1), !a22(o12); )
            ;
      else
        for (; --u35 >= 0; )
          for (; e11(o12, 1), !a22(o12); )
            ;
  }), n33 && (i27.count = (a22, o12) => (Vt4.setTime(+a22), Bt4.setTime(+o12), t19(Vt4), t19(Bt4), Math.floor(n33(Vt4, Bt4))), i27.every = (a22) => (a22 = Math.floor(a22), !isFinite(a22) || !(a22 > 0) ? null : a22 > 1 ? i27.filter(r24 ? (o12) => r24(o12) % a22 === 0 : (o12) => i27.count(0, o12) % a22 === 0) : i27)), i27;
}
var Lt3 = U8(() => {
}, (t19, e11) => {
  t19.setTime(+t19 + e11);
}, (t19, e11) => e11 - t19);
Lt3.every = (t19) => (t19 = Math.floor(t19), !isFinite(t19) || !(t19 > 0) ? null : t19 > 1 ? U8((e11) => {
  e11.setTime(Math.floor(e11 / t19) * t19);
}, (e11, n33) => {
  e11.setTime(+e11 + n33 * t19);
}, (e11, n33) => (n33 - e11) / t19) : Lt3);
Lt3.range;
var V6 = 1e3;
var z8 = V6 * 60;
var B5 = z8 * 60;
var j6 = B5 * 24;
var ae4 = j6 * 7;
var be4 = j6 * 30;
var Rt5 = j6 * 365;
var lt6 = U8((t19) => {
  t19.setTime(t19 - t19.getMilliseconds());
}, (t19, e11) => {
  t19.setTime(+t19 + e11 * V6);
}, (t19, e11) => (e11 - t19) / V6, (t19) => t19.getUTCSeconds());
lt6.range;
var oe4 = U8((t19) => {
  t19.setTime(t19 - t19.getMilliseconds() - t19.getSeconds() * V6);
}, (t19, e11) => {
  t19.setTime(+t19 + e11 * z8);
}, (t19, e11) => (e11 - t19) / z8, (t19) => t19.getMinutes());
oe4.range;
var sr4 = U8((t19) => {
  t19.setUTCSeconds(0, 0);
}, (t19, e11) => {
  t19.setTime(+t19 + e11 * z8);
}, (t19, e11) => (e11 - t19) / z8, (t19) => t19.getUTCMinutes());
sr4.range;
var se3 = U8((t19) => {
  t19.setTime(t19 - t19.getMilliseconds() - t19.getSeconds() * V6 - t19.getMinutes() * z8);
}, (t19, e11) => {
  t19.setTime(+t19 + e11 * B5);
}, (t19, e11) => (e11 - t19) / B5, (t19) => t19.getHours());
se3.range;
var ur4 = U8((t19) => {
  t19.setUTCMinutes(0, 0, 0);
}, (t19, e11) => {
  t19.setTime(+t19 + e11 * B5);
}, (t19, e11) => (e11 - t19) / B5, (t19) => t19.getUTCHours());
ur4.range;
var Ct5 = U8(
  (t19) => t19.setHours(0, 0, 0, 0),
  (t19, e11) => t19.setDate(t19.getDate() + e11),
  (t19, e11) => (e11 - t19 - (e11.getTimezoneOffset() - t19.getTimezoneOffset()) * z8) / j6,
  (t19) => t19.getDate() - 1
);
Ct5.range;
var ue4 = U8((t19) => {
  t19.setUTCHours(0, 0, 0, 0);
}, (t19, e11) => {
  t19.setUTCDate(t19.getUTCDate() + e11);
}, (t19, e11) => (e11 - t19) / j6, (t19) => t19.getUTCDate() - 1);
ue4.range;
var cr4 = U8((t19) => {
  t19.setUTCHours(0, 0, 0, 0);
}, (t19, e11) => {
  t19.setUTCDate(t19.getUTCDate() + e11);
}, (t19, e11) => (e11 - t19) / j6, (t19) => Math.floor(t19 / j6));
cr4.range;
function nt6(t19) {
  return U8((e11) => {
    e11.setDate(e11.getDate() - (e11.getDay() + 7 - t19) % 7), e11.setHours(0, 0, 0, 0);
  }, (e11, n33) => {
    e11.setDate(e11.getDate() + n33 * 7);
  }, (e11, n33) => (n33 - e11 - (n33.getTimezoneOffset() - e11.getTimezoneOffset()) * z8) / ae4);
}
var Ot6 = nt6(0);
var _t4 = nt6(1);
var lr4 = nt6(2);
var fr4 = nt6(3);
var ht6 = nt6(4);
var hr4 = nt6(5);
var gr3 = nt6(6);
Ot6.range;
_t4.range;
lr4.range;
fr4.range;
ht6.range;
hr4.range;
gr3.range;
function rt6(t19) {
  return U8((e11) => {
    e11.setUTCDate(e11.getUTCDate() - (e11.getUTCDay() + 7 - t19) % 7), e11.setUTCHours(0, 0, 0, 0);
  }, (e11, n33) => {
    e11.setUTCDate(e11.getUTCDate() + n33 * 7);
  }, (e11, n33) => (n33 - e11) / ae4);
}
var Be4 = rt6(0);
var Ht5 = rt6(1);
var mr3 = rt6(2);
var dr4 = rt6(3);
var gt6 = rt6(4);
var pr3 = rt6(5);
var yr3 = rt6(6);
Be4.range;
Ht5.range;
mr3.range;
dr4.range;
gt6.range;
pr3.range;
yr3.range;
var ce5 = U8((t19) => {
  t19.setDate(1), t19.setHours(0, 0, 0, 0);
}, (t19, e11) => {
  t19.setMonth(t19.getMonth() + e11);
}, (t19, e11) => e11.getMonth() - t19.getMonth() + (e11.getFullYear() - t19.getFullYear()) * 12, (t19) => t19.getMonth());
ce5.range;
var Mr4 = U8((t19) => {
  t19.setUTCDate(1), t19.setUTCHours(0, 0, 0, 0);
}, (t19, e11) => {
  t19.setUTCMonth(t19.getUTCMonth() + e11);
}, (t19, e11) => e11.getUTCMonth() - t19.getUTCMonth() + (e11.getUTCFullYear() - t19.getUTCFullYear()) * 12, (t19) => t19.getUTCMonth());
Mr4.range;
var G6 = U8((t19) => {
  t19.setMonth(0, 1), t19.setHours(0, 0, 0, 0);
}, (t19, e11) => {
  t19.setFullYear(t19.getFullYear() + e11);
}, (t19, e11) => e11.getFullYear() - t19.getFullYear(), (t19) => t19.getFullYear());
G6.every = (t19) => !isFinite(t19 = Math.floor(t19)) || !(t19 > 0) ? null : U8((e11) => {
  e11.setFullYear(Math.floor(e11.getFullYear() / t19) * t19), e11.setMonth(0, 1), e11.setHours(0, 0, 0, 0);
}, (e11, n33) => {
  e11.setFullYear(e11.getFullYear() + n33 * t19);
});
G6.range;
var et6 = U8((t19) => {
  t19.setUTCMonth(0, 1), t19.setUTCHours(0, 0, 0, 0);
}, (t19, e11) => {
  t19.setUTCFullYear(t19.getUTCFullYear() + e11);
}, (t19, e11) => e11.getUTCFullYear() - t19.getUTCFullYear(), (t19) => t19.getUTCFullYear());
et6.every = (t19) => !isFinite(t19 = Math.floor(t19)) || !(t19 > 0) ? null : U8((e11) => {
  e11.setUTCFullYear(Math.floor(e11.getUTCFullYear() / t19) * t19), e11.setUTCMonth(0, 1), e11.setUTCHours(0, 0, 0, 0);
}, (e11, n33) => {
  e11.setUTCFullYear(e11.getUTCFullYear() + n33 * t19);
});
et6.range;
function xr3(t19, e11, n33, r24, i27, a22) {
  const o12 = [
    [lt6, 1, V6],
    [lt6, 5, 5 * V6],
    [lt6, 15, 15 * V6],
    [lt6, 30, 30 * V6],
    [a22, 1, z8],
    [a22, 5, 5 * z8],
    [a22, 15, 15 * z8],
    [a22, 30, 30 * z8],
    [i27, 1, B5],
    [i27, 3, 3 * B5],
    [i27, 6, 6 * B5],
    [i27, 12, 12 * B5],
    [r24, 1, j6],
    [r24, 2, 2 * j6],
    [n33, 1, ae4],
    [e11, 1, be4],
    [e11, 3, 3 * be4],
    [t19, 1, Rt5]
  ];
  function u35(s18, g31, h26) {
    const f39 = g31 < s18;
    f39 && ([s18, g31] = [g31, s18]);
    const d34 = h26 && typeof h26.range == "function" ? h26 : l25(s18, g31, h26), b33 = d34 ? d34.range(s18, +g31 + 1) : [];
    return f39 ? b33.reverse() : b33;
  }
  function l25(s18, g31, h26) {
    const f39 = Math.abs(g31 - s18) / h26, d34 = te4(([, , F17]) => F17).right(o12, f39);
    if (d34 === o12.length)
      return t19.every(Qt3(s18 / Rt5, g31 / Rt5, h26));
    if (d34 === 0)
      return Lt3.every(Math.max(Qt3(s18, g31, h26), 1));
    const [b33, L11] = o12[f39 / o12[d34 - 1][2] < o12[d34][2] / f39 ? d34 - 1 : d34];
    return b33.every(L11);
  }
  return [u35, l25];
}
var [vr4, wr4] = xr3(G6, ce5, Ot6, Ct5, se3, oe4);
function jt5(t19) {
  if (0 <= t19.y && t19.y < 100) {
    var e11 = new Date(-1, t19.m, t19.d, t19.H, t19.M, t19.S, t19.L);
    return e11.setFullYear(t19.y), e11;
  }
  return new Date(t19.y, t19.m, t19.d, t19.H, t19.M, t19.S, t19.L);
}
function Gt4(t19) {
  if (0 <= t19.y && t19.y < 100) {
    var e11 = new Date(Date.UTC(-1, t19.m, t19.d, t19.H, t19.M, t19.S, t19.L));
    return e11.setUTCFullYear(t19.y), e11;
  }
  return new Date(Date.UTC(t19.y, t19.m, t19.d, t19.H, t19.M, t19.S, t19.L));
}
function dt7(t19, e11, n33) {
  return { y: t19, m: e11, d: n33, H: 0, M: 0, S: 0, L: 0 };
}
function Cr4(t19) {
  var e11 = t19.dateTime, n33 = t19.date, r24 = t19.time, i27 = t19.periods, a22 = t19.days, o12 = t19.shortDays, u35 = t19.months, l25 = t19.shortMonths, s18 = pt5(i27), g31 = yt8(i27), h26 = pt5(a22), f39 = yt8(a22), d34 = pt5(o12), b33 = yt8(o12), L11 = pt5(u35), F17 = yt8(u35), _19 = pt5(l25), P19 = yt8(l25), T20 = {
    a: ot13,
    A: st12,
    b: I16,
    B: Je6,
    c: null,
    d: Ne4,
    e: Ne4,
    f: Rr4,
    g: ei4,
    G: ri4,
    H: Er4,
    I: Vr4,
    j: Br4,
    L: Re4,
    m: jr4,
    M: Gr4,
    p: Ke7,
    q: tn5,
    Q: Le4,
    s: _e4,
    S: Zr4,
    u: qr4,
    U: Xr4,
    V: Qr4,
    w: Jr4,
    W: Kr4,
    x: null,
    X: null,
    y: ti4,
    Y: ni4,
    Z: ii4,
    "%": Ye4
  }, N19 = {
    a: en6,
    A: nn4,
    b: rn5,
    B: an5,
    c: null,
    d: Fe4,
    e: Fe4,
    f: ui4,
    g: Mi2,
    G: vi4,
    H: ai4,
    I: oi4,
    j: si4,
    L: Ge4,
    m: ci4,
    M: li4,
    p: on5,
    q: sn5,
    Q: Le4,
    s: _e4,
    S: fi4,
    u: hi4,
    U: gi4,
    V: mi4,
    w: di4,
    W: pi4,
    x: null,
    X: null,
    y: yi4,
    Y: xi4,
    Z: wi4,
    "%": Ye4
  }, k27 = {
    a: E24,
    A: y33,
    b: $24,
    B: S21,
    c: X12,
    d: $e4,
    e: $e4,
    f: Pr4,
    g: Ue4,
    G: De4,
    H: Ae4,
    I: Ae4,
    j: Lr4,
    L: Wr4,
    m: Yr4,
    M: _r3,
    p: q13,
    q: Fr4,
    Q: Or4,
    s: Ir4,
    S: Hr4,
    u: Dr4,
    U: Ur4,
    V: $r4,
    w: Sr4,
    W: Ar4,
    x: bt9,
    X: at10,
    y: Ue4,
    Y: De4,
    Z: Nr4,
    "%": zr4
  };
  T20.x = p26(n33, T20), T20.X = p26(r24, T20), T20.c = p26(e11, T20), N19.x = p26(n33, N19), N19.X = p26(r24, N19), N19.c = p26(e11, N19);
  function p26(m33, M12) {
    return function(x34) {
      var c27 = [], Y11 = -1, C19 = 0, H15 = m33.length, W8, K13, le7;
      for (x34 instanceof Date || (x34 = /* @__PURE__ */ new Date(+x34)); ++Y11 < H15; )
        m33.charCodeAt(Y11) === 37 && (c27.push(m33.slice(C19, Y11)), (K13 = Se4[W8 = m33.charAt(++Y11)]) != null ? W8 = m33.charAt(++Y11) : K13 = W8 === "e" ? " " : "0", (le7 = M12[W8]) && (W8 = le7(x34, K13)), c27.push(W8), C19 = Y11 + 1);
      return c27.push(m33.slice(C19, Y11)), c27.join("");
    };
  }
  function w29(m33, M12) {
    return function(x34) {
      var c27 = dt7(1900, void 0, 1), Y11 = O20(c27, m33, x34 += "", 0), C19, H15;
      if (Y11 != x34.length)
        return null;
      if ("Q" in c27)
        return new Date(c27.Q);
      if ("s" in c27)
        return new Date(c27.s * 1e3 + ("L" in c27 ? c27.L : 0));
      if (M12 && !("Z" in c27) && (c27.Z = 0), "p" in c27 && (c27.H = c27.H % 12 + c27.p * 12), c27.m === void 0 && (c27.m = "q" in c27 ? c27.q : 0), "V" in c27) {
        if (c27.V < 1 || c27.V > 53)
          return null;
        "w" in c27 || (c27.w = 1), "Z" in c27 ? (C19 = Gt4(dt7(c27.y, 0, 1)), H15 = C19.getUTCDay(), C19 = H15 > 4 || H15 === 0 ? Ht5.ceil(C19) : Ht5(C19), C19 = ue4.offset(C19, (c27.V - 1) * 7), c27.y = C19.getUTCFullYear(), c27.m = C19.getUTCMonth(), c27.d = C19.getUTCDate() + (c27.w + 6) % 7) : (C19 = jt5(dt7(c27.y, 0, 1)), H15 = C19.getDay(), C19 = H15 > 4 || H15 === 0 ? _t4.ceil(C19) : _t4(C19), C19 = Ct5.offset(C19, (c27.V - 1) * 7), c27.y = C19.getFullYear(), c27.m = C19.getMonth(), c27.d = C19.getDate() + (c27.w + 6) % 7);
      } else
        ("W" in c27 || "U" in c27) && ("w" in c27 || (c27.w = "u" in c27 ? c27.u % 7 : "W" in c27 ? 1 : 0), H15 = "Z" in c27 ? Gt4(dt7(c27.y, 0, 1)).getUTCDay() : jt5(dt7(c27.y, 0, 1)).getDay(), c27.m = 0, c27.d = "W" in c27 ? (c27.w + 6) % 7 + c27.W * 7 - (H15 + 5) % 7 : c27.w + c27.U * 7 - (H15 + 6) % 7);
      return "Z" in c27 ? (c27.H += c27.Z / 100 | 0, c27.M += c27.Z % 100, Gt4(c27)) : jt5(c27);
    };
  }
  function O20(m33, M12, x34, c27) {
    for (var Y11 = 0, C19 = M12.length, H15 = x34.length, W8, K13; Y11 < C19; ) {
      if (c27 >= H15)
        return -1;
      if (W8 = M12.charCodeAt(Y11++), W8 === 37) {
        if (W8 = M12.charAt(Y11++), K13 = k27[W8 in Se4 ? M12.charAt(Y11++) : W8], !K13 || (c27 = K13(m33, x34, c27)) < 0)
          return -1;
      } else if (W8 != x34.charCodeAt(c27++))
        return -1;
    }
    return c27;
  }
  function q13(m33, M12, x34) {
    var c27 = s18.exec(M12.slice(x34));
    return c27 ? (m33.p = g31.get(c27[0].toLowerCase()), x34 + c27[0].length) : -1;
  }
  function E24(m33, M12, x34) {
    var c27 = d34.exec(M12.slice(x34));
    return c27 ? (m33.w = b33.get(c27[0].toLowerCase()), x34 + c27[0].length) : -1;
  }
  function y33(m33, M12, x34) {
    var c27 = h26.exec(M12.slice(x34));
    return c27 ? (m33.w = f39.get(c27[0].toLowerCase()), x34 + c27[0].length) : -1;
  }
  function $24(m33, M12, x34) {
    var c27 = _19.exec(M12.slice(x34));
    return c27 ? (m33.m = P19.get(c27[0].toLowerCase()), x34 + c27[0].length) : -1;
  }
  function S21(m33, M12, x34) {
    var c27 = L11.exec(M12.slice(x34));
    return c27 ? (m33.m = F17.get(c27[0].toLowerCase()), x34 + c27[0].length) : -1;
  }
  function X12(m33, M12, x34) {
    return O20(m33, e11, M12, x34);
  }
  function bt9(m33, M12, x34) {
    return O20(m33, n33, M12, x34);
  }
  function at10(m33, M12, x34) {
    return O20(m33, r24, M12, x34);
  }
  function ot13(m33) {
    return o12[m33.getDay()];
  }
  function st12(m33) {
    return a22[m33.getDay()];
  }
  function I16(m33) {
    return l25[m33.getMonth()];
  }
  function Je6(m33) {
    return u35[m33.getMonth()];
  }
  function Ke7(m33) {
    return i27[+(m33.getHours() >= 12)];
  }
  function tn5(m33) {
    return 1 + ~~(m33.getMonth() / 3);
  }
  function en6(m33) {
    return o12[m33.getUTCDay()];
  }
  function nn4(m33) {
    return a22[m33.getUTCDay()];
  }
  function rn5(m33) {
    return l25[m33.getUTCMonth()];
  }
  function an5(m33) {
    return u35[m33.getUTCMonth()];
  }
  function on5(m33) {
    return i27[+(m33.getUTCHours() >= 12)];
  }
  function sn5(m33) {
    return 1 + ~~(m33.getUTCMonth() / 3);
  }
  return {
    format: function(m33) {
      var M12 = p26(m33 += "", T20);
      return M12.toString = function() {
        return m33;
      }, M12;
    },
    parse: function(m33) {
      var M12 = w29(m33 += "", false);
      return M12.toString = function() {
        return m33;
      }, M12;
    },
    utcFormat: function(m33) {
      var M12 = p26(m33 += "", N19);
      return M12.toString = function() {
        return m33;
      }, M12;
    },
    utcParse: function(m33) {
      var M12 = w29(m33 += "", true);
      return M12.toString = function() {
        return m33;
      }, M12;
    }
  };
}
var Se4 = { "-": "", _: " ", 0: "0" };
var A8 = /^\s*\d+/;
var Tr4 = /^%/;
var kr4 = /[\\^$*+?|[\]().{}]/g;
function v10(t19, e11, n33) {
  var r24 = t19 < 0 ? "-" : "", i27 = (r24 ? -t19 : t19) + "", a22 = i27.length;
  return r24 + (a22 < n33 ? new Array(n33 - a22 + 1).join(e11) + i27 : i27);
}
function br4(t19) {
  return t19.replace(kr4, "\\$&");
}
function pt5(t19) {
  return new RegExp("^(?:" + t19.map(br4).join("|") + ")", "i");
}
function yt8(t19) {
  return new Map(t19.map((e11, n33) => [e11.toLowerCase(), n33]));
}
function Sr4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 1));
  return r24 ? (t19.w = +r24[0], n33 + r24[0].length) : -1;
}
function Dr4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 1));
  return r24 ? (t19.u = +r24[0], n33 + r24[0].length) : -1;
}
function Ur4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.U = +r24[0], n33 + r24[0].length) : -1;
}
function $r4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.V = +r24[0], n33 + r24[0].length) : -1;
}
function Ar4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.W = +r24[0], n33 + r24[0].length) : -1;
}
function De4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 4));
  return r24 ? (t19.y = +r24[0], n33 + r24[0].length) : -1;
}
function Ue4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.y = +r24[0] + (+r24[0] > 68 ? 1900 : 2e3), n33 + r24[0].length) : -1;
}
function Nr4(t19, e11, n33) {
  var r24 = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e11.slice(n33, n33 + 6));
  return r24 ? (t19.Z = r24[1] ? 0 : -(r24[2] + (r24[3] || "00")), n33 + r24[0].length) : -1;
}
function Fr4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 1));
  return r24 ? (t19.q = r24[0] * 3 - 3, n33 + r24[0].length) : -1;
}
function Yr4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.m = r24[0] - 1, n33 + r24[0].length) : -1;
}
function $e4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.d = +r24[0], n33 + r24[0].length) : -1;
}
function Lr4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 3));
  return r24 ? (t19.m = 0, t19.d = +r24[0], n33 + r24[0].length) : -1;
}
function Ae4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.H = +r24[0], n33 + r24[0].length) : -1;
}
function _r3(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.M = +r24[0], n33 + r24[0].length) : -1;
}
function Hr4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.S = +r24[0], n33 + r24[0].length) : -1;
}
function Wr4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 3));
  return r24 ? (t19.L = +r24[0], n33 + r24[0].length) : -1;
}
function Pr4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33, n33 + 6));
  return r24 ? (t19.L = Math.floor(r24[0] / 1e3), n33 + r24[0].length) : -1;
}
function zr4(t19, e11, n33) {
  var r24 = Tr4.exec(e11.slice(n33, n33 + 1));
  return r24 ? n33 + r24[0].length : -1;
}
function Or4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33));
  return r24 ? (t19.Q = +r24[0], n33 + r24[0].length) : -1;
}
function Ir4(t19, e11, n33) {
  var r24 = A8.exec(e11.slice(n33));
  return r24 ? (t19.s = +r24[0], n33 + r24[0].length) : -1;
}
function Ne4(t19, e11) {
  return v10(t19.getDate(), e11, 2);
}
function Er4(t19, e11) {
  return v10(t19.getHours(), e11, 2);
}
function Vr4(t19, e11) {
  return v10(t19.getHours() % 12 || 12, e11, 2);
}
function Br4(t19, e11) {
  return v10(1 + Ct5.count(G6(t19), t19), e11, 3);
}
function Re4(t19, e11) {
  return v10(t19.getMilliseconds(), e11, 3);
}
function Rr4(t19, e11) {
  return Re4(t19, e11) + "000";
}
function jr4(t19, e11) {
  return v10(t19.getMonth() + 1, e11, 2);
}
function Gr4(t19, e11) {
  return v10(t19.getMinutes(), e11, 2);
}
function Zr4(t19, e11) {
  return v10(t19.getSeconds(), e11, 2);
}
function qr4(t19) {
  var e11 = t19.getDay();
  return e11 === 0 ? 7 : e11;
}
function Xr4(t19, e11) {
  return v10(Ot6.count(G6(t19) - 1, t19), e11, 2);
}
function je4(t19) {
  var e11 = t19.getDay();
  return e11 >= 4 || e11 === 0 ? ht6(t19) : ht6.ceil(t19);
}
function Qr4(t19, e11) {
  return t19 = je4(t19), v10(ht6.count(G6(t19), t19) + (G6(t19).getDay() === 4), e11, 2);
}
function Jr4(t19) {
  return t19.getDay();
}
function Kr4(t19, e11) {
  return v10(_t4.count(G6(t19) - 1, t19), e11, 2);
}
function ti4(t19, e11) {
  return v10(t19.getFullYear() % 100, e11, 2);
}
function ei4(t19, e11) {
  return t19 = je4(t19), v10(t19.getFullYear() % 100, e11, 2);
}
function ni4(t19, e11) {
  return v10(t19.getFullYear() % 1e4, e11, 4);
}
function ri4(t19, e11) {
  var n33 = t19.getDay();
  return t19 = n33 >= 4 || n33 === 0 ? ht6(t19) : ht6.ceil(t19), v10(t19.getFullYear() % 1e4, e11, 4);
}
function ii4(t19) {
  var e11 = t19.getTimezoneOffset();
  return (e11 > 0 ? "-" : (e11 *= -1, "+")) + v10(e11 / 60 | 0, "0", 2) + v10(e11 % 60, "0", 2);
}
function Fe4(t19, e11) {
  return v10(t19.getUTCDate(), e11, 2);
}
function ai4(t19, e11) {
  return v10(t19.getUTCHours(), e11, 2);
}
function oi4(t19, e11) {
  return v10(t19.getUTCHours() % 12 || 12, e11, 2);
}
function si4(t19, e11) {
  return v10(1 + ue4.count(et6(t19), t19), e11, 3);
}
function Ge4(t19, e11) {
  return v10(t19.getUTCMilliseconds(), e11, 3);
}
function ui4(t19, e11) {
  return Ge4(t19, e11) + "000";
}
function ci4(t19, e11) {
  return v10(t19.getUTCMonth() + 1, e11, 2);
}
function li4(t19, e11) {
  return v10(t19.getUTCMinutes(), e11, 2);
}
function fi4(t19, e11) {
  return v10(t19.getUTCSeconds(), e11, 2);
}
function hi4(t19) {
  var e11 = t19.getUTCDay();
  return e11 === 0 ? 7 : e11;
}
function gi4(t19, e11) {
  return v10(Be4.count(et6(t19) - 1, t19), e11, 2);
}
function Ze4(t19) {
  var e11 = t19.getUTCDay();
  return e11 >= 4 || e11 === 0 ? gt6(t19) : gt6.ceil(t19);
}
function mi4(t19, e11) {
  return t19 = Ze4(t19), v10(gt6.count(et6(t19), t19) + (et6(t19).getUTCDay() === 4), e11, 2);
}
function di4(t19) {
  return t19.getUTCDay();
}
function pi4(t19, e11) {
  return v10(Ht5.count(et6(t19) - 1, t19), e11, 2);
}
function yi4(t19, e11) {
  return v10(t19.getUTCFullYear() % 100, e11, 2);
}
function Mi2(t19, e11) {
  return t19 = Ze4(t19), v10(t19.getUTCFullYear() % 100, e11, 2);
}
function xi4(t19, e11) {
  return v10(t19.getUTCFullYear() % 1e4, e11, 4);
}
function vi4(t19, e11) {
  var n33 = t19.getUTCDay();
  return t19 = n33 >= 4 || n33 === 0 ? gt6(t19) : gt6.ceil(t19), v10(t19.getUTCFullYear() % 1e4, e11, 4);
}
function wi4() {
  return "+0000";
}
function Ye4() {
  return "%";
}
function Le4(t19) {
  return +t19;
}
function _e4(t19) {
  return Math.floor(+t19 / 1e3);
}
var ut6;
var qe4;
Ci2({
  dateTime: "%x, %X",
  date: "%-m/%-d/%Y",
  time: "%-I:%M:%S %p",
  periods: ["AM", "PM"],
  days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
  shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
  shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
});
function Ci2(t19) {
  return ut6 = Cr4(t19), qe4 = ut6.format, ut6.parse, ut6.utcFormat, ut6.utcParse, ut6;
}
function Ti2(t19) {
  return new Date(t19);
}
function ki4(t19) {
  return t19 instanceof Date ? +t19 : +/* @__PURE__ */ new Date(+t19);
}
function Xe4(t19, e11, n33, r24, i27, a22, o12, u35, l25, s18) {
  var g31 = Ee4(), h26 = g31.invert, f39 = g31.domain, d34 = s18(".%L"), b33 = s18(":%S"), L11 = s18("%I:%M"), F17 = s18("%I %p"), _19 = s18("%a %d"), P19 = s18("%b %d"), T20 = s18("%B"), N19 = s18("%Y");
  function k27(p26) {
    return (l25(p26) < p26 ? d34 : u35(p26) < p26 ? b33 : o12(p26) < p26 ? L11 : a22(p26) < p26 ? F17 : r24(p26) < p26 ? i27(p26) < p26 ? _19 : P19 : n33(p26) < p26 ? T20 : N19)(p26);
  }
  return g31.invert = function(p26) {
    return new Date(h26(p26));
  }, g31.domain = function(p26) {
    return arguments.length ? f39(Array.from(p26, ki4)) : f39().map(Ti2);
  }, g31.ticks = function(p26) {
    var w29 = f39();
    return t19(w29[0], w29[w29.length - 1], p26 ?? 10);
  }, g31.tickFormat = function(p26, w29) {
    return w29 == null ? k27 : s18(w29);
  }, g31.nice = function(p26) {
    var w29 = f39();
    return (!p26 || typeof p26.range != "function") && (p26 = e11(w29[0], w29[w29.length - 1], p26 ?? 10)), p26 ? f39(or4(w29, p26)) : g31;
  }, g31.copy = function() {
    return Ie4(g31, Xe4(t19, e11, n33, r24, i27, a22, o12, u35, l25, s18));
  }, g31;
}
function bi4() {
  return ie4.apply(Xe4(vr4, wr4, G6, ce5, Ot6, Ct5, se3, oe4, lt6, qe4).domain([new Date(2e3, 0, 1), new Date(2e3, 0, 2)]), arguments);
}
function Si2(t19) {
  for (var e11 = t19.length / 6 | 0, n33 = new Array(e11), r24 = 0; r24 < e11; )
    n33[r24] = "#" + t19.slice(r24 * 6, ++r24 * 6);
  return n33;
}
var Di = Si2("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");
var vt4 = (t19, e11) => {
  var r24;
  const n33 = t19._$AN;
  if (n33 === void 0)
    return false;
  for (const i27 of n33)
    (r24 = i27._$AO) == null || r24.call(i27, e11, false), vt4(i27, e11);
  return true;
};
var Wt5 = (t19) => {
  let e11, n33;
  do {
    if ((e11 = t19._$AM) === void 0)
      break;
    n33 = e11._$AN, n33.delete(t19), t19 = e11;
  } while ((n33 == null ? void 0 : n33.size) === 0);
};
var Qe5 = (t19) => {
  for (let e11; e11 = t19._$AM; t19 = e11) {
    let n33 = e11._$AN;
    if (n33 === void 0)
      e11._$AN = n33 = /* @__PURE__ */ new Set();
    else if (n33.has(t19))
      break;
    n33.add(t19), Ai4(e11);
  }
};
function Ui2(t19) {
  this._$AN !== void 0 ? (Wt5(this), this._$AM = t19, Qe5(this)) : this._$AM = t19;
}
function $i4(t19, e11 = false, n33 = 0) {
  const r24 = this._$AH, i27 = this._$AN;
  if (i27 !== void 0 && i27.size !== 0)
    if (e11)
      if (Array.isArray(r24))
        for (let a22 = n33; a22 < r24.length; a22++)
          vt4(r24[a22], false), Wt5(r24[a22]);
      else
        r24 != null && (vt4(r24, false), Wt5(r24));
    else
      vt4(this, t19);
}
var Ai4 = (t19) => {
  t19.type == s4.CHILD && (t19._$AP ?? (t19._$AP = $i4), t19._$AQ ?? (t19._$AQ = Ui2));
};
var Ni4 = class extends _4 {
  constructor() {
    super(...arguments), this._$AN = void 0;
  }
  _$AT(e11, n33, r24) {
    super._$AT(e11, n33, r24), Qe5(this), this.isConnected = e11._$AU;
  }
  _$AO(e11, n33 = true) {
    var r24, i27;
    e11 !== this.isConnected && (this.isConnected = e11, e11 ? (r24 = this.reconnected) == null || r24.call(this) : (i27 = this.disconnected) == null || i27.call(this)), n33 && (vt4(this, e11), Wt5(this));
  }
  setValue(e11) {
    if (r9(this._$Ct))
      this._$Ct._$AI(e11, this);
    else {
      const n33 = [...this._$Ct._$AH];
      n33[this._$Ci] = e11, this._$Ct._$AI(n33, this, 0);
    }
  }
  disconnected() {
  }
  reconnected() {
  }
};
var Zt4 = /* @__PURE__ */ new WeakMap();
var wt5 = T8(class extends Ni4 {
  render(t19) {
    return d;
  }
  update(t19, [e11]) {
    var r24;
    const n33 = e11 !== this.Y;
    return n33 && this.Y !== void 0 && this.rt(void 0), (n33 || this.lt !== this.ct) && (this.Y = e11, this.ht = (r24 = t19.options) == null ? void 0 : r24.host, this.rt(this.ct = t19.element)), d;
  }
  rt(t19) {
    if (this.isConnected || (t19 = void 0), typeof this.Y == "function") {
      const e11 = this.ht ?? globalThis;
      let n33 = Zt4.get(e11);
      n33 === void 0 && (n33 = /* @__PURE__ */ new WeakMap(), Zt4.set(e11, n33)), n33.get(this.Y) !== void 0 && this.Y.call(this.ht, void 0), n33.set(this.Y, t19), t19 !== void 0 && this.Y.call(this.ht, t19);
    } else
      this.Y.value = t19;
  }
  get lt() {
    var t19, e11;
    return typeof this.Y == "function" ? (t19 = Zt4.get(this.ht ?? globalThis)) == null ? void 0 : t19.get(this.Y) : (e11 = this.Y) == null ? void 0 : e11.value;
  }
  disconnected() {
    this.lt === this.ct && this.rt(void 0);
  }
  reconnected() {
    this.rt(this.ct);
  }
});
function Fi2(t19, e11, n33) {
  return bi4().domain([n33 - e11, n33]).range([0, t19]);
}
function Yi2(t19) {
  const e11 = He4(t19).tickFormat((n33) => `${n33.getTime() / 1e3}`);
  return Tt`
    <g 
      class="axis axis--x" 
      ${wt5((n33) => {
    e11(Ei2(n33));
  })}>
    </g> 
  `;
}
function Li2(t19, e11) {
  const n33 = He4(t19).tickSize(-e11).tickFormat("");
  return Tt`
    <g 
      class="axis-x-grid" 
      ${wt5((r24) => {
    n33(Ei2(r24));
  })}>
    </g> 
  `;
}
var _i4 = Object.defineProperty;
var Tt5 = (t19, e11, n33, r24) => {
  for (var i27 = void 0, a22 = t19.length - 1, o12; a22 >= 0; a22--)
    (o12 = t19[a22]) && (i27 = o12(e11, n33, i27) || i27);
  return i27 && _i4(e11, n33, i27), i27;
};
var mt6 = class extends H {
  constructor() {
    super(...arguments), this.value = 0, this.color = "", this.hide = false, this.yAxis = 0, this.displayName = "";
  }
};
Tt5([
  Mt({ type: Number })
], mt6.prototype, "value");
Tt5([
  Mt({ type: String })
], mt6.prototype, "color");
Tt5([
  Mt({ type: Boolean })
], mt6.prototype, "hide");
Tt5([
  Mt({ type: Number, attribute: "y-axis" })
], mt6.prototype, "yAxis");
Tt5([
  Mt({ type: String, attribute: "display-name", reflect: true })
], mt6.prototype, "displayName");
customElements.get("frc-line-chart-data") || customElements.define("frc-line-chart-data", mt6);
var Hi = Object.defineProperty;
var it7 = (t19, e11, n33, r24) => {
  for (var i27 = void 0, a22 = t19.length - 1, o12; a22 >= 0; a22--)
    (o12 = t19[a22]) && (i27 = o12(e11, n33, i27) || i27);
  return i27 && Hi(e11, n33, i27), i27;
};
var Wi = Oe4().domain(
  Array(8).fill(0).map((t19, e11) => e11)
).range(Di);
var R7;
var Q5 = (R7 = class extends H {
  constructor() {
    super(...arguments), this.viewTime = 10, this.chartTitle = "", this.data = [], this.startTime = 0, this.elapsedTimeMs = 0;
  }
  firstUpdated() {
    this.startTime = Date.now(), requestAnimationFrame(() => {
      this.updateChart();
    });
  }
  getFilteredData(e11) {
    const n33 = e11.findIndex(
      ({ timeMs: r24 }) => this.elapsedTimeMs - r24 < Math.round(this.viewTime * 1e3)
    ) - 1;
    return n33 < 0 ? e11 : e11.slice(n33);
  }
  updateChart() {
    this.elapsedTimeMs = Date.now() - this.startTime;
    const e11 = [...this.children].filter(
      (n33) => n33.tagName.toLowerCase() === "frc-line-chart-data"
    );
    this.data = e11.map((n33, r24) => {
      var a22;
      const i27 = ((a22 = this.data[r24]) == null ? void 0 : a22.data) ?? [];
      return i27.push({
        value: n33.value ?? 0,
        timeMs: this.elapsedTimeMs
      }), {
        data: this.getFilteredData(i27),
        color: n33.color || Wi(r24 % 8),
        hide: n33.hide ?? false,
        yAxis: n33.yAxis ?? 0,
        displayName: n33.displayName || `Data ${r24}`
      };
    }), requestAnimationFrame(() => {
      this.updateChart();
    });
  }
  static getYScale(e11, n33, r24) {
    const { invert: i27, lockMin: a22, lockMax: o12 } = r24;
    let { min: u35, max: l25 } = r24;
    (!a22 || !o12) && n33.forEach((g31) => {
      g31.data.forEach(({ value: h26 }) => {
        a22 || (u35 = Math.min(u35, h26)), o12 || (l25 = Math.max(l25, h26));
      });
    });
    const s18 = i27 ? [0, e11] : [e11, 0];
    return Ve5().domain([u35, l25]).range(s18);
  }
  getDimensions() {
    var u35;
    const e11 = { top: 0, right: 40, bottom: 20, left: 40 }, n33 = ((u35 = this.chartContainer) == null ? void 0 : u35.getBoundingClientRect()) ?? {
      width: 960,
      height: 500
    }, r24 = n33.width, i27 = n33.height, a22 = r24 - e11.left - e11.right, o12 = i27 - e11.top - e11.bottom;
    return {
      margin: e11,
      svgWidth: r24,
      svgHeight: i27,
      width: a22,
      height: o12
    };
  }
  getYScales() {
    const { height: e11 } = this.getDimensions(), n33 = [...this.children].filter(
      (r24) => r24.tagName.toLowerCase() === "frc-line-chart-axis"
    );
    if (n33.length === 0) {
      const r24 = {
        min: -1,
        max: 1,
        lockMin: false,
        lockMax: false,
        invert: false,
        side: "left",
        hideGridLines: false,
        hide: false
      };
      return [
        {
          chartAxis: r24,
          scale: R7.getYScale(
            e11,
            this.data.filter(({ yAxis: i27 }) => i27 === 0),
            r24
          )
        }
      ];
    }
    return n33.map((r24, i27) => {
      const a22 = r24, o12 = {
        min: a22.min ?? -1,
        max: a22.max ?? 1,
        lockMin: a22.lockMin ?? false,
        lockMax: a22.lockMax ?? false,
        invert: a22.invert ?? false,
        side: a22.side ?? "left",
        hideGridLines: a22.hideGridLines ?? false,
        hide: a22.hide ?? false
      };
      return {
        chartAxis: o12,
        scale: R7.getYScale(
          e11,
          this.data.filter(({ yAxis: u35 }) => u35 === i27),
          o12
        )
      };
    });
  }
  static getPath(e11, n33, r24) {
    return `M${e11.map(
      (a22) => [n33(a22).toFixed(3), r24(a22).toFixed(3)].join(",")
    ).join("L")}`;
  }
  getLegend() {
    const e11 = [...this.children].find(
      (i27) => i27.tagName.toLowerCase() === "frc-line-chart-legend"
    );
    if (!e11)
      return {
        direction: "horizontal",
        position: "n",
        inside: false,
        hide: false
      };
    const n33 = e11;
    return {
      direction: n33.direction ?? "horizontal",
      position: n33.position ?? "n",
      inside: n33.inside ?? false,
      hide: n33.hide ?? false
    };
  }
  render() {
    const { inside: e11, position: n33, direction: r24, hide: i27 } = this.getLegend(), a22 = n33 === "w" || n33 === "e" || ["ne", "nw", "se", "sw"].includes(n33) && r24 === "vertical", o12 = a22 && ["ne", "e", "se"].includes(n33) || !a22 && ["sw", "s", "se"].includes(n33), u35 = p4({
      display: e11 ? "block" : "flex",
      flexDirection: `${a22 ? "row" : "column"}${o12 ? "-reverse" : ""}`
    }), l25 = e11 ? {
      width: "100%",
      height: "100%"
    } : { flex: "1" };
    return Ot`
      <div class="chart-and-header">
        ${this.chartTitle ? Ot`<header>${this.chartTitle}</header>` : ""}
        <div class="chart-and-legend" style=${u35}>
          ${i27 ? "" : this.renderLegend()}
          <div class="chart-container" style=${p4(l25)}>
            ${this.renderChart()}
          </div>
        </div>
      </div>
    `;
  }
  renderLegend() {
    const { margin: e11 } = this.getDimensions(), { inside: n33, direction: r24, position: i27 } = this.getLegend(), a22 = ["n", "s", "e", "w"].includes(i27) ? "center" : i27 === "nw" ? "flex-start" : i27 === "se" ? "flex-end" : i27 === "ne" ? r24 === "horizontal" ? "flex-end" : "flex-start" : r24 === "vertical" ? "flex-end" : "flex-start", o12 = (() => {
      if (!n33)
        return {};
      const s18 = {
        alignItems: "center"
      };
      return i27.includes("n") ? s18.top = `${e11.top}px` : i27.includes("s") && (s18.bottom = `${e11.bottom}px`), i27.includes("w") ? s18.left = `${e11.left}px` : i27.includes("e") && (s18.right = `${e11.right}px`), ["n", "s", "e", "w"].includes(i27) && (s18.justifyContent = "center"), ["n", "s"].includes(i27) && (s18.left = "0", s18.right = "0"), ["e", "w"].includes(i27) && (s18.top = "0", s18.bottom = "0"), s18;
    })(), u35 = p4({
      alignSelf: a22,
      ...o12
    });
    return Ot`
      <div
        class="legend ${n33 ? "inside" : "outside"} ${r24 === "horizontal" ? "horizontal" : "vertical"}"
        style=${u35}
      >
        ${this.data.map(
      ({ color: s18, displayName: g31 }) => Ot`
            <div class="legend-item">
              <div
                class="legend-item-box"
                style=${p4({
        background: s18
      })}
              ></div>
              <span class="legend-item-label">${g31}</span>
            </div>
          `
    )}
      </div>
    `;
  }
  renderChart() {
    const { margin: e11, svgWidth: n33, svgHeight: r24, width: i27, height: a22 } = this.getDimensions(), o12 = Fi2(
      i27,
      Math.round(this.viewTime * 1e3),
      this.elapsedTimeMs
    ), u35 = this.getYScales().filter(
      ({ chartAxis: s18 }) => !s18.hide
    ), l25 = u35.map((s18) => (h26) => R7.getPath(
      h26,
      (f39) => o12(new Date(f39.timeMs)),
      (f39) => s18.scale(f39.value)
    ));
    return Tt`
      <svg width=${n33} height=${r24} style="position: absolute">
        <g transform="translate(${e11.left},${e11.top})">
          <defs>
            <clipPath id="clip">
              <rect width=${i27} height=${a22}></rect>
            </clipPath>
          </defs>
          <g transform="translate(0,${a22})">
            ${Yi2(o12)}
            ${Li2(o12, a22)}
          </g>
          ${this.renderScales(u35, "left")}
          ${this.renderScales(u35, "right")}
          <rect class="chart-border" width=${i27} height=${a22}></rect>
          ${this.data.filter(
      ({ hide: s18, yAxis: g31 }) => !s18 && g31 < u35.length && g31 >= 0
    ).map(
      (s18) => Tt`
            <g clip-path="url(#clip)">
              <path 
                class="data-path"
                ${wt5((g31) => {
        const h26 = Ei2(g31), f39 = l25[s18.yAxis](s18.data);
        h26.attr("class", "line").attr("stroke", s18.color).attr("d", f39);
      })}>
              ></path>
            </g>
          `
    )}
        </g>
      </svg>
    `;
  }
  renderScales(e11, n33) {
    const { width: r24 } = this.getDimensions();
    return Tt`
     ${e11.filter((i27) => i27.chartAxis.side === n33).map((i27, a22) => {
      const o12 = i27.chartAxis.side === "left" ? -a22 * 25 : r24;
      return Tt`
              <g 
                class="axis axis--y" 
                transform="translate(${o12}, 0)"
                ${wt5((u35) => {
        (i27.chartAxis.side === "left" ? ye4 : Ln4)(i27.scale)(Ei2(u35));
      })}>
              </g>
              ${i27.chartAxis.hideGridLines ? "" : Tt`
                    <g 
                      class="axis-y-grid" 
                      ${wt5((u35) => {
        ye4(i27.scale).tickSize(-r24).tickFormat("")(Ei2(u35));
      })}>
                    </g> 
                  `}
            `;
    })}
    `;
  }
}, R7.styles = Ut`
    :host {
      display: inline-block;
      width: 700px;
      height: 400px;
      color: var(--frc-line-chart-text-color, black);
    }

    .chart-and-header {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .chart-and-header header {
      font-size: 18px;
      font-family: sans-serif;
      margin: 3px 0;
    }

    .chart-and-legend {
      flex: 1;
      width: 100%;
      position: relative;
    }

    .legend-container {
      position: relative;
    }

    .legend {
      display: flex;
      z-index: 100;
    }

    .legend.outside {
      position: relative;
    }

    .legend.inside {
      position: absolute;
    }

    .legend-item {
      display: flex;
      flex-wrap: no-wrap;
      gap: 5px;
      align-items: center;
      padding: 5px;
    }

    .legend.horizontal {
      flex-direction: row;
    }

    .legend.vertical {
      flex-direction: column;
    }

    .legend-item-box {
      width: 15px;
      height: 15px;
    }

    .legend-item-label {
      font-family: sans-serif;
      font-size: 15px;
    }

    .line {
      fill: none;
      stroke-width: 1.5px;
    }

    .chart-border {
      fill: none;
      stroke-width: 1;
      stroke: var(--frc-line-chart-border-color, black);
    }

    .axis-x-grid line,
    .axis-y-grid line {
      stroke: var(--frc-line-chart-grid-color, #eee);
    }

    .axis--y {
      font-family: monospace;
    }

    svg {
      overflow: visible;
    }
  `, R7);
it7([
  Mt({ type: Number, attribute: "view-time" })
], Q5.prototype, "viewTime");
it7([
  Mt({ type: String, attribute: "chart-title", reflect: true })
], Q5.prototype, "chartTitle");
it7([
  n()
], Q5.prototype, "data");
it7([
  h(".data-path")
], Q5.prototype, "path");
it7([
  h("svg")
], Q5.prototype, "svg");
it7([
  h(".axis--x")
], Q5.prototype, "xAxis");
it7([
  h(".chart-container")
], Q5.prototype, "chartContainer");
var Pi2 = Q5;
customElements.get("frc-line-chart") || customElements.define("frc-line-chart", Pi2);
var zi2 = Object.defineProperty;
var J6 = (t19, e11, n33, r24) => {
  for (var i27 = void 0, a22 = t19.length - 1, o12; a22 >= 0; a22--)
    (o12 = t19[a22]) && (i27 = o12(e11, n33, i27) || i27);
  return i27 && zi2(e11, n33, i27), i27;
};
var Z5 = class extends H {
  constructor() {
    super(...arguments), this.min = -1, this.max = 1, this.lockMin = false, this.lockMax = false, this.invert = false, this.side = "left", this.hideGridLines = false, this.hide = false;
  }
};
J6([
  Mt({ type: Number })
], Z5.prototype, "min");
J6([
  Mt({ type: Number })
], Z5.prototype, "max");
J6([
  Mt({ type: Boolean, attribute: "lock-min" })
], Z5.prototype, "lockMin");
J6([
  Mt({ type: Boolean, attribute: "lock-max" })
], Z5.prototype, "lockMax");
J6([
  Mt({ type: Boolean })
], Z5.prototype, "invert");
J6([
  Mt({ type: String, reflect: true })
], Z5.prototype, "side");
J6([
  Mt({ type: Boolean, attribute: "hide-grid-lines" })
], Z5.prototype, "hideGridLines");
J6([
  Mt({ type: Boolean })
], Z5.prototype, "hide");
customElements.get("frc-line-chart-axis") || customElements.define("frc-line-chart-axis", Z5);
var Oi2 = Object.defineProperty;
var It3 = (t19, e11, n33, r24) => {
  for (var i27 = void 0, a22 = t19.length - 1, o12; a22 >= 0; a22--)
    (o12 = t19[a22]) && (i27 = o12(e11, n33, i27) || i27);
  return i27 && Oi2(e11, n33, i27), i27;
};
var Ii2 = [
  "nw",
  "n",
  "ne",
  "w",
  "e",
  "sw",
  "s",
  "se"
];
var kt4 = class extends H {
  constructor() {
    super(...arguments), this.position = "n", this.direction = "horizontal", this.hide = false, this.inside = false;
  }
};
It3([
  Mt({ type: String })
], kt4.prototype, "position");
It3([
  Mt({ type: String })
], kt4.prototype, "direction");
It3([
  Mt({ type: Boolean })
], kt4.prototype, "hide");
It3([
  Mt({ type: Boolean })
], kt4.prototype, "inside");
customElements.get("frc-line-chart-legend") || customElements.define("frc-line-chart-legend", kt4);
var Ei4 = {
  dashboard: {
    displayName: (t19) => (t19 == null ? void 0 : t19.getAttribute("chart-title")) || "Line Chart",
    defaultHtml: `
      <frc-line-chart chart-title="Line Chart">
        <frc-line-chart-legend></frc-line-chart-legend>
        <frc-line-chart-axis side="left"></frc-line-chart-axis>
        <frc-line-chart-axis side="right"></frc-line-chart-axis>
        <frc-line-chart-data></frc-line-chart-data>
      </frc-line-chart>
    `
  },
  description: "A component used to graph data over time.",
  properties: {
    chartTitle: { type: "String", attribute: "chart-title", reflect: true },
    viewTime: { type: "Number", attribute: "view-time", defaultValue: 10 }
  },
  slots: [
    {
      name: "",
      allowedChildren: [
        "frc-line-chart-data",
        "frc-line-chart-axis",
        "frc-line-chart-legend"
      ]
    }
  ]
};
var Vi = {
  dashboard: {
    topLevel: false,
    displayName: (t19) => t19 ? `Chart Axis (${t19.getAttribute("side") || "left"})` : "Line Chart Axis"
  },
  properties: {
    min: { type: "Number", defaultValue: -1 },
    max: { type: "Number", defaultValue: 1 },
    lockMin: { type: "Boolean", attribute: "lock-min" },
    lockMax: { type: "Boolean", attribute: "lock-max" },
    invert: { type: "Boolean" },
    side: {
      type: "String",
      defaultValue: "left",
      reflect: true,
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["left", "right"];
        }
      }
    },
    hideGridLines: { type: "Boolean", attribute: "hide-grid-lines" },
    hide: { type: "Boolean" }
  }
};
var Bi = {
  dashboard: {
    topLevel: false,
    displayName: (t19) => {
      if (!t19)
        return "Line Chart Data";
      const r24 = [...t19.parentElement.children].filter(
        (a22) => a22.tagName.toLowerCase() === "frc-line-chart-data"
      ).indexOf(t19);
      return t19.getAttribute("display-name") || `Data ${r24}`;
    }
  },
  properties: {
    value: { type: "Number", primary: true },
    color: { type: "String", input: { type: "ColorPicker" } },
    hide: { type: "Boolean" },
    yAxis: { type: "Number", attribute: "y-axis" },
    displayName: { type: "String", attribute: "display-name", reflect: true }
  }
};
var Ri2 = {
  dashboard: {
    topLevel: false,
    displayName: "Chart Legend"
  },
  properties: {
    position: {
      type: "String",
      defaultValue: "n",
      input: {
        type: "StringDropdown",
        getOptions: () => Ii2
      }
    },
    direction: {
      type: "String",
      defaultValue: "horizontal",
      input: {
        type: "StringDropdown",
        getOptions: () => ["horizontal", "vertical"]
      }
    },
    hide: { type: "Boolean" },
    inside: { type: "Boolean" }
  }
};
var Ki2 = {
  "frc-line-chart": Ei4,
  "frc-line-chart-axis": Vi,
  "frc-line-chart-data": Bi,
  "frc-line-chart-legend": Ri2
};

// node_modules/@frc-web-components/fwc/dist/components/voltage-view.es.js
var y11 = Object.getPrototypeOf;
var l9 = Reflect.get;
var m10 = (a22, p26, o12) => l9(y11(a22), o12, p26);
var c4 = Object.defineProperty;
var r10 = (a22, p26, o12, d34) => {
  for (var i27 = void 0, s18 = a22.length - 1, n33; s18 >= 0; s18--)
    (n33 = a22[s18]) && (i27 = n33(p26, o12, i27) || i27);
  return i27 && c4(p26, o12, i27), i27;
};
var k7 = {
  dashboard: {
    displayName: "Voltage View"
  },
  properties: {
    value: { type: "Number" },
    max: { type: "Number", defaultValue: 5 },
    min: { type: "Number" },
    center: { type: "Number" },
    precision: { type: "Number", defaultValue: 2 },
    hideText: { type: "Boolean", attribute: "hide-text" },
    numTickMarks: {
      type: "Number",
      defaultValue: 3,
      attribute: "num-tick-marks"
    },
    unit: { type: "String", defaultValue: "V" }
  }
};
var u5 = class u6 extends t7 {
  constructor() {
    super(...arguments), this.value = 0, this.min = 0, this.max = 5, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "V";
  }
};
u5.styles = [
  ...m10(u5, u5, "styles"),
  Ut`
      [part='bar']::part(foreground) {
        background: var(--frc-voltage-view-foreground-color, #ffbd2f);
      }
    `
];
var e5 = u5;
r10([
  Mt({ type: Number })
], e5.prototype, "value");
r10([
  Mt({ type: Number })
], e5.prototype, "min");
r10([
  Mt({ type: Number })
], e5.prototype, "max");
r10([
  Mt({ type: Number })
], e5.prototype, "center");
r10([
  Mt({ type: Number })
], e5.prototype, "precision");
r10([
  Mt({ type: Boolean, attribute: "hide-text" })
], e5.prototype, "hideText");
r10([
  Mt({ type: Number, attribute: "num-tick-marks" })
], e5.prototype, "numTickMarks");
r10([
  Mt({ type: String })
], e5.prototype, "unit");
customElements.get("frc-voltage-view") || customElements.define("frc-voltage-view", e5);

// node_modules/@frc-web-components/fwc/dist/components/pdp.es.js
var d9 = Object.defineProperty;
var p5 = (n33, t19, r24, o12) => {
  for (var e11 = void 0, s18 = n33.length - 1, m33; s18 >= 0; s18--)
    (m33 = n33[s18]) && (e11 = m33(t19, r24, e11) || e11);
  return e11 && d9(t19, r24, e11), e11;
};
function i9(n33, t19) {
  const r24 = [];
  for (let o12 = n33; o12 < t19; o12 += 1)
    r24.push(o12);
  return r24;
}
var u7 = class u8 extends H {
  constructor() {
    super(...arguments), this.voltage = 0, this.totalCurrent = 0, this.channels = Array(16).fill(0);
  }
  renderChannel(t19) {
    return Ot`
      <frc-number-bar
        class="channel"
        part="channel"
        value=${this.channels[t19] ?? 0}
        min="0"
        max="40"
        center="0"
        precision="2"
        ?hide-text="${false}"
        num-tick-marks="0"
        unit="A"
      ></frc-number-bar>
    `;
  }
  render() {
    return Ot`
      <div part="channels">
        ${i9(0, 8).map(
      (t19) => Ot`
            <label part="channel-label">
              <slot name="${`channel-label${t19}`}">Ch. ${t19}</slot>
            </label>
          `
    )}
        ${i9(0, 8).map((t19) => Ot` ${this.renderChannel(t19)} `)}
        ${i9(8, 16).map(
      (t19) => Ot`
            <label part="channel-label">
              <slot name="${`channel-label${t19}`}">Ch. ${t19}</slot>
            </label>
          `
    )}
        ${i9(8, 16).map(
      (t19) => Ot` ${this.renderChannel(t19)} `
    )}
      </div>
      <div part="voltage-and-total-current">
        <label part="voltage-label">
          <slot name="voltage-label">Voltage</slot>
        </label>
        <label part="total-current-label">
          <slot name="total-current">Total Current</slot>
        </label>
        <frc-voltage-view
          class="voltage"
          part="voltage"
          value="${this.voltage}"
          min="0"
          max="15"
          center="0"
          precision="2"
          ?hide-text="${false}"
          num-tick-marks="0"
        ></frc-voltage-view>
        <frc-number-bar
          class="total-current"
          part="total-current"
          value="${this.totalCurrent}"
          min="0"
          max="500"
          center="0"
          precision="2"
          ?hide-text="${false}"
          num-tick-marks="0"
          unit="A"
        ></frc-number-bar>
      </div>
    `;
  }
};
u7.styles = Ut`
    :host {
      display: inline-block;
      width: 350px;
      margin: 5px;
      color: var(--frc-label-text-color, black);
      font-family: sans-serif;
      font-size: 16px;
    }

    [part='channels'] {
      display: grid;
      grid-auto-flow: column;
      grid-template-columns: min-content 1fr min-content 1fr;
      grid-template-rows: auto auto auto auto auto auto auto auto;
      width: 100%;
      height: auto;
      align-items: center;
      gap: 3px;
    }

    .channel,
    .voltage,
    .total-current {
      width: auto;
    }

    [part='channel-label'] {
      padding-left: 5px;
      text-align: right;
      white-space: nowrap;
    }

    [part='voltage-and-total-current'] {
      margin-top: 5px;
      display: grid;
      grid-auto-flow: column;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto;
      column-gap: 10px;
      width: 100%;
      height: auto;
      align-items: center;
      gap: 3px;
    }

    [part='voltage-and-total-current'] {
      white-space: nowrap;
    }
  `;
var l10 = u7;
p5([
  Mt({ type: Number })
], l10.prototype, "voltage");
p5([
  Mt({ type: Number, attribute: "total-current" })
], l10.prototype, "totalCurrent");
p5([
  Mt({ type: Array })
], l10.prototype, "channels");
customElements.get("frc-pdp") || customElements.define("frc-pdp", l10);

// node_modules/@frc-web-components/fwc/dist/components/number-slider.es.js
var h7 = (t19) => {
  throw TypeError(t19);
};
var x10 = (t19, i27, e11) => i27.has(t19) || h7("Cannot " + e11);
var p6 = (t19, i27, e11) => i27.has(t19) ? h7("Cannot add the same private member more than once") : i27 instanceof WeakSet ? i27.add(t19) : i27.set(t19, e11);
var d10 = (t19, i27, e11) => (x10(t19, i27, "access private method"), e11);
var g8 = Object.defineProperty;
var m11 = (t19, i27, e11, n33) => {
  for (var a22 = void 0, o12 = t19.length - 1, c27; o12 >= 0; o12--)
    (c27 = t19[o12]) && (a22 = c27(i27, e11, a22) || a22);
  return a22 && g8(i27, e11, a22), a22;
};
var $7 = {
  dashboard: {
    displayName: "Number Slider"
  },
  properties: {
    value: { type: "Number", primary: true, changeEvent: "change" },
    min: { type: "Number", defaultValue: -1 },
    max: { type: "Number", defaultValue: 1 },
    blockIncrement: {
      type: "Number",
      attribute: "block-increment",
      defaultValue: 0.05
    }
  }
};
var s5;
var b10;
var u9 = class u10 extends H {
  constructor() {
    super(...arguments);
    p6(this, s5);
    this.value = 0, this.min = -1, this.max = 1, this.blockIncrement = 0.05;
  }
  onChange(e11) {
    this.value = parseFloat(e11.target.value), d10(this, s5, b10).call(this);
  }
  firstUpdated() {
    setTimeout(() => {
      const e11 = this.renderRoot.querySelector("#slider");
      e11 && (e11.value = this.value);
    });
  }
  render() {
    const e11 = Math.min(this.min, this.max), n33 = Math.max(this.min, this.max), a22 = Math.max(e11, Math.min(this.value, n33));
    return Ot`
      <div class="slider-container">
        <input
          id="slider"
          type="range"
          .value="${a22.toString()}"
          min="${e11}"
          max="${n33}"
          step="${this.blockIncrement}"
          @change="${this.onChange}"
        />

        <frc-axis ticks="5" min=${e11} max=${n33}></frc-axis>
      </div>
    `;
  }
};
s5 = /* @__PURE__ */ new WeakSet(), b10 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: { value: this.value },
      bubbles: true,
      composed: true
    })
  );
}, u9.styles = Ut`
    :host {
      display: inline-block;
      height: 50px;
      width: 300px;
    }

    .slider-container {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 15px;
    }

    input {
      width: 100%;
    }

    table-axis {
      width: calc(85% - 14px);
      max-width: calc(100% - 74px);
      display: block;
    }
  `;
var r11 = u9;
m11([
  Mt({ type: Number })
], r11.prototype, "value");
m11([
  Mt({ type: Number })
], r11.prototype, "min");
m11([
  Mt({ type: Number })
], r11.prototype, "max");
m11([
  Mt({ type: Number, attribute: "block-increment" })
], r11.prototype, "blockIncrement");
customElements.get("frc-number-slider") || customElements.define("frc-number-slider", r11);

// node_modules/@frc-web-components/fwc/dist/components/toggle-switch.es.js
var g9 = Object.defineProperty;
var b11 = (l25, e11, i27, r24) => {
  for (var t19 = void 0, o12 = l25.length - 1, n33; o12 >= 0; o12--)
    (n33 = l25[o12]) && (t19 = n33(e11, i27, t19) || t19);
  return t19 && g9(e11, i27, t19), t19;
};
var w6 = {
  dashboard: {
    displayName: "Toggle Switch"
  },
  properties: {
    toggled: { type: "Boolean", primary: true, changeEvent: "toggle" }
  }
};
var c5 = class c6 extends H {
  constructor() {
    super(...arguments), this.toggled = false;
  }
  firstUpdated() {
    new ResizeObserver(() => this.resized()).observe(this);
  }
  resized() {
    const e11 = this.getBoundingClientRect(), { width: i27, height: r24 } = e11, t19 = this.renderRoot.querySelector("[part=switch]");
    t19 && (t19.style.borderRadius = `${i27}px`, t19.style.setProperty("--circle-width", `${r24 * 0.8}px`), t19.style.setProperty("--circle-height", `${r24 * 0.8}px`), t19.style.setProperty(
      "--circle-left",
      `${i27 / 2 - r24 * 0.8}px`
    ), t19.style.setProperty("--circle-top", `${r24 * 0.1}px`), t19.style.setProperty("--circle-translate-x", `${i27 - r24}px`));
  }
  onClick() {
    this.toggled = !this.toggled;
    const e11 = new CustomEvent("toggle", {
      detail: {
        toggled: this.toggled
      },
      bubbles: true,
      composed: true
    });
    this.dispatchEvent(e11);
  }
  render() {
    return Ot`
      <label class="switch" @click="${this.onClick}">
        <input type="checkbox" .checked="${this.toggled}" disabled />
        <span part="switch">
          <span part="knob"></span>
        </span>
      </label>
    `;
  }
};
c5.styles = Ut`
    :host {
      display: inline-block;
      width: 60px;
      height: 34px;
    }
    .switch {
      position: relative;
      display: inline-block;
      width: 100%;
      height: 100%;
      margin-bottom: 0;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    [part='switch'] {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--frc-toggle-switch-color, #ccc);
      -webkit-transition: 0.4s;
      transition: 0.4s;
    }
    [part='knob'] {
      position: absolute;
      display: inline-block;
      content: '';
      height: var(--circle-height);
      width: var(--circle-width);
      left: var(--circle-top);
      top: var(--circle-top);
      background-color: white;
      -webkit-transition: 0.4s;
      transition: 0.4s;
      border-radius: 50%;
    }
    input:checked + [part='switch'] {
      background-color: #2196f3;
    }
    input:focus + [part='switch'] {
      box-shadow: 0 0 1px #2196f3;
    }
    input:checked + [part='switch'] [part='knob'] {
      transform: translateX(var(--circle-translate-x));
    }
  `;
var s6 = c5;
b11([
  Mt({ type: Boolean })
], s6.prototype, "toggled");
customElements.get("frc-toggle-switch") || customElements.define("frc-toggle-switch", s6);

// node_modules/@frc-web-components/fwc/dist/components/toggle-button.es.js
var b12 = Object.defineProperty;
var r12 = (n33, s18, a22, f39) => {
  for (var t19 = void 0, o12 = n33.length - 1, g31; o12 >= 0; o12--)
    (g31 = n33[o12]) && (t19 = g31(s18, a22, t19) || t19);
  return t19 && b12(s18, a22, t19), t19;
};
var h8 = {
  dashboard: {
    displayName: "Toggle Button"
  },
  properties: {
    toggled: {
      type: "Boolean",
      defaultValue: false,
      primary: true,
      changeEvent: "toggle"
    },
    label: { type: "String", defaultValue: "Button" }
  }
};
var i10 = class i11 extends H {
  constructor() {
    super(...arguments), this.toggled = false, this.disabled = false, this.label = "Button";
  }
  onClick() {
    this.disabled || (this.toggled = !this.toggled, this.dispatchEvent(
      new CustomEvent("toggle", {
        detail: {
          toggled: this.toggled
        },
        bubbles: true,
        composed: true
      })
    ));
  }
  render() {
    return Ot`
      <button class="${this.toggled ? "toggled" : ""}" @click="${this.onClick}">
        ${this.label}
      </button>
    `;
  }
};
i10.styles = Ut`
    :host {
      display: inline-block;
      width: 100px;
      height: 50px;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    button {
      width: 100%;
      height: 100%;
      margin: 0;
      border: none;
      border-radius: 4px;
      font-size: inherit;
      font-family: inherit;
      letter-spacing: inherit;
      background: var(--frc-button-background-color, rgb(230, 230, 230));
      color: var(--frc-button-text-color, black);
    }

    .toggled {
      background: var(--frc-button-toggled-background-color, black);
      color: var(--frc-button-toggled-text-color, white);
      font-weight: bold;
    }
  `;
var e6 = i10;
r12([
  Mt({ type: Boolean })
], e6.prototype, "toggled");
r12([
  Mt({ type: Boolean })
], e6.prototype, "disabled");
r12([
  Mt({ type: String })
], e6.prototype, "label");
customElements.get("frc-toggle-button") || customElements.define("frc-toggle-button", e6);

// node_modules/@frc-web-components/fwc/dist/components/toggle-group.es.js
var d11 = (e11) => {
  throw TypeError(e11);
};
var b13 = (e11, i27, t19) => i27.has(e11) || d11("Cannot " + t19);
var h9 = (e11, i27, t19) => i27.has(e11) ? d11("Cannot add the same private member more than once") : i27 instanceof WeakSet ? i27.add(e11) : i27.set(e11, t19);
var a10 = (e11, i27, t19) => (b13(e11, i27, "access private method"), t19);
var x11 = Object.defineProperty;
var p7 = (e11, i27, t19, w29) => {
  for (var o12 = void 0, s18 = e11.length - 1, c27; s18 >= 0; s18--)
    (c27 = e11[s18]) && (o12 = c27(i27, t19, o12) || o12);
  return o12 && x11(i27, t19, o12), o12;
};
var k8 = {
  dashboard: {
    displayName: "Toggle Group"
  },
  properties: {
    options: {
      type: "Array",
      changeEvent: "optionsUpdate",
      defaultValue: ["On", "Off"],
      input: { type: "StringArray" }
    },
    value: {
      primary: true,
      type: "String",
      changeEvent: "change",
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions({ options: e11 }) {
          return e11;
        }
      }
    },
    direction: {
      type: "String",
      defaultValue: "vertical",
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["vertical", "horizontal"];
        }
      }
    }
  }
};
var n12;
var f12;
var v11;
var u11 = class u12 extends H {
  constructor() {
    super(...arguments);
    h9(this, n12);
    this.options = ["On", "Off"], this.value = "", this.direction = "vertical";
  }
  async setValue(t19) {
    this.value = t19;
  }
  updated(t19) {
    t19.has("options") && !this.options.includes(this.value) && (this.value = this.options[0] ?? ""), t19.has("value") && a10(this, n12, f12).call(this), t19.has("options") && a10(this, n12, v11).call(this), t19.has("direction") && this.style.setProperty(
      "flex-direction",
      this.direction === "vertical" ? "column" : "row"
    );
  }
  render() {
    return Ot`
      ${this.options.map(
      (t19) => Ot`
          <button
            class="${this.value === t19 ? "toggled" : ""}"
            @click="${() => this.setValue(t19)}"
          >
            ${t19}
          </button>
        `
    )}
    `;
  }
};
n12 = /* @__PURE__ */ new WeakSet(), f12 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: { value: this.value },
      bubbles: true,
      composed: true
    })
  );
}, v11 = function() {
  this.dispatchEvent(
    new CustomEvent("optionsUpdate", {
      detail: { options: this.options },
      bubbles: true,
      composed: true
    })
  );
}, u11.styles = Ut`
    :host {
      display: inline-flex;
      flex-direction: column;
      width: 150px;
      height: 300px;
      gap: 0;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    button {
      width: 100%;
      height: 100%;
      margin: 0;
      border: none;
      font-size: inherit;
      font-family: inherit;
      letter-spacing: inherit;
      background: var(--frc-button-background-color, rgb(230, 230, 230));
      color: var(--frc-button-text-color, black);
      flex: 1;
    }

    .toggled {
      background: var(--frc-button-toggled-background-color, black);
      color: var(--frc-button-toggled-text-color, white);
      font-weight: bold;
    }

    [part='button'] {
      border-radius: 0;
      margin: 0;
      flex: 1;
      font-size: inherit;
      height: 100%;
      padding: 0;
    }
  `;
var r13 = u11;
p7([
  Mt({ type: Array })
], r13.prototype, "options");
p7([
  Mt({ type: String })
], r13.prototype, "value");
p7([
  Mt({ type: String })
], r13.prototype, "direction");
customElements.get("frc-toggle-group") || customElements.define("frc-toggle-group", r13);

// node_modules/@frc-web-components/fwc/dist/components/relay.es.js
var p8 = (e11) => {
  throw TypeError(e11);
};
var h10 = (e11, t19, r24) => t19.has(e11) || p8("Cannot " + r24);
var u13 = (e11, t19, r24) => t19.has(e11) ? p8("Cannot add the same private member more than once") : t19 instanceof WeakSet ? t19.add(e11) : t19.set(e11, r24);
var f13 = (e11, t19, r24) => (h10(e11, t19, "access private method"), r24);
var O7 = Object.defineProperty;
var c7 = (e11, t19, r24, x34) => {
  for (var i27 = void 0, a22 = e11.length - 1, l25; a22 >= 0; a22--)
    (l25 = e11[a22]) && (i27 = l25(t19, r24, i27) || i27);
  return i27 && O7(t19, r24, i27), i27;
};
var _5 = {
  dashboard: {
    displayName: "Relay"
  },
  properties: {
    value: {
      type: "String",
      defaultValue: "Off",
      reflect: true,
      primary: true,
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["Off", "On", "Forward", "Reverse"];
        }
      }
    }
  }
};
var w7 = ["Off", "On", "Forward", "Reverse"];
var s7;
var g10;
var n13 = class n14 extends H {
  constructor() {
    super(...arguments);
    u13(this, s7);
    this.value = "Off", this.direction = "vertical";
  }
  render() {
    return Ot`
      <frc-toggle-group
        @change=${f13(this, s7, g10)}
        .options=${w7}
        value=${this.value}
        direction=${this.direction}
      ></frc-toggle-group>
    `;
  }
};
s7 = /* @__PURE__ */ new WeakSet(), g10 = function(r24) {
  this.value = r24.detail.value;
}, n13.styles = Ut`
    :host {
      display: inline-block;
      width: 150px;
      height: 300px;
    }

    frc-toggle-group {
      width: 100%;
      height: 100%;
    }
  `;
var o5 = n13;
c7([
  Mt({ type: String })
], o5.prototype, "value");
c7([
  Mt({ type: String })
], o5.prototype, "direction");
customElements.get("frc-relay") || customElements.define("frc-relay", o5);

// node_modules/@frc-web-components/fwc/dist/wrapper-BBKTpE7c.js
var k9 = Object.defineProperty;
var c8 = (i27, e11, r24, n33) => {
  for (var t19 = void 0, s18 = i27.length - 1, o12; s18 >= 0; s18--)
    (o12 = i27[s18]) && (t19 = o12(e11, r24, t19) || t19);
  return t19 && k9(e11, r24, t19), t19;
};
function C7(i27) {
  const e11 = (i27 == null ? void 0 : i27.getChildren()) ?? {};
  return Object.values(e11).filter(
    (t19) => {
      var s18;
      return t19.hasChildren() && ((s18 = t19.getChildren()[".type"]) == null ? void 0 : s18.getSourceValue()) === "line";
    }
  ).map((t19) => {
    const s18 = t19.getChildren();
    return {
      angle: s18.angle.getSourceValue() ?? 0,
      color: s18.color.getSourceValue() ?? "#ffffff",
      length: s18.length.getSourceValue() ?? 1,
      weight: s18.weight.getSourceValue() ?? 1,
      children: C7(t19)
    };
  });
}
function w8(i27) {
  const e11 = (i27 == null ? void 0 : i27.getChildren()) ?? {};
  return Object.values(e11).filter(
    (t19) => t19.hasChildren()
  ).map((t19) => ({
    x: t19.getChildren().x.getSourceValue() ?? 0,
    y: t19.getChildren().y.getSourceValue() ?? 0,
    children: C7(t19)
  }));
}
var p9 = class p10 extends H {
  constructor() {
    super(...arguments), this.backgroundColor = "#000020", this.dims = [3, 3], this.roots = [], this.mechanism2d = this.getMechanism2d();
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.resized();
    }).observe(this), requestAnimationFrame(() => {
      this.updateMechanism2d();
    });
  }
  getMech2dSize() {
    const { width: e11, height: r24 } = this.getBoundingClientRect(), [n33, t19] = this.dims;
    return t19 / n33 * e11 < r24 ? [e11, t19 / n33 * e11] : [n33 / t19 * r24, r24];
  }
  resized() {
    this.requestUpdate();
  }
  getSize() {
    const { width: e11 } = this.getBoundingClientRect();
    return e11;
  }
  updated(e11) {
    e11.has("backgroundColor") && this._svg.style.setProperty("background-color", this.backgroundColor), e11.has("dims") && this.requestUpdate();
  }
  updateMechanism2d() {
    this.mechanism2d = this.getMechanism2d(), requestAnimationFrame(() => {
      this.updateMechanism2d();
    });
  }
  getMechanism2d() {
    return {
      backgroundColor: this.backgroundColor,
      dims: this.dims,
      roots: this.roots
    };
  }
  render() {
    const [e11, r24] = this.getMech2dSize();
    return Tt`
      <svg
        style="width: ${e11}px; height: ${r24}px; background: ${this.mechanism2d.backgroundColor}"
      >
        ${this.mechanism2d.roots.map(
      (n33) => this.renderMechanism2dRoot(n33)
    )}
      </svg>
    `;
  }
  renderMechanism2dRoot(e11) {
    const [r24, n33] = this.dims, [t19, s18] = this.getMech2dSize(), o12 = e11.x / r24 * t19, l25 = e11.y / n33 * s18;
    return Tt`
      <g style="transform: translate(${o12}px, ${s18 - l25}px)">
        ${e11.children.map((g31) => this.renderMechanism2dLine(g31))}
      </g>
    `;
  }
  renderMechanism2dLine(e11) {
    const [r24] = this.dims, [n33] = this.getMech2dSize(), t19 = n33 / r24 * e11.length, s18 = e11.angle * Math.PI / 180, o12 = Math.cos(s18) * t19, l25 = -Math.sin(s18) * t19, g31 = Math.max(1, e11.weight * 2 / 3);
    return Tt`
      <line stroke=${e11.color} stroke-width=${g31} x1="0" y1="0" x2="${o12}px" y2="${l25}px"  />
      <g style="transform: translate(${o12}px, ${l25}px) rotate(${-e11.angle}deg)">
        ${e11.children.map((x34) => this.renderMechanism2dLine(x34))}
      </g>
    `;
  }
};
p9.styles = Ut`
    :host {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 300px;
      height: 300px;
    }

    svg {
      width: 100%;
      height: 100%;
    }
  `;
var h11 = p9;
c8([
  Mt({ type: String, attribute: "background-color" })
], h11.prototype, "backgroundColor");
c8([
  Mt({ type: Array })
], h11.prototype, "dims");
c8([
  Mt({ type: Array })
], h11.prototype, "roots");
c8([
  h("svg")
], h11.prototype, "_svg");
c8([
  n()
], h11.prototype, "mechanism2d");
customElements.get("frc-mechanism2d") || customElements.define("frc-mechanism2d", h11);
var S8 = Object.defineProperty;
var m12 = (i27, e11, r24, n33) => {
  for (var t19 = void 0, s18 = i27.length - 1, o12; s18 >= 0; s18--)
    (o12 = i27[s18]) && (t19 = o12(e11, r24, t19) || t19);
  return t19 && S8(e11, r24, t19), t19;
};
var O8 = {
  dashboard: {
    displayName: "Mechanism2d"
  },
  properties: {
    backgroundColor: {
      type: "String",
      attribute: "background-color",
      defaultValue: "#000020",
      input: { type: "ColorPicker" }
    },
    dims: {
      type: "Array",
      defaultValue: [3, 3],
      input: { type: "NumberArray" }
    },
    source: { type: "Source", primary: true, input: { type: "None" } }
  }
};
var f14 = class f15 extends H {
  constructor() {
    super(...arguments), this.backgroundColor = "#000020", this.dims = [3, 3], this.roots = [];
  }
  updateMechanism2d() {
    this.roots = this.source ? w8(this.source) : [], requestAnimationFrame(() => {
      this.updateMechanism2d();
    });
  }
  firstUpdated() {
    this.updateMechanism2d();
  }
  render() {
    return Ot`
      <frc-mechanism2d
        .roots=${this.roots}
        .backgroundColor=${this.backgroundColor}
        .dims=${this.dims}
      ></frc-mechanism2d>
    `;
  }
};
f14.styles = Ut`
    :host {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 300px;
      height: 300px;
    }

    frc-mechanism2d {
      width: 100%;
      height: 100%;
    }
  `;
var a11 = f14;
m12([
  Mt({ type: String, attribute: "background-color" })
], a11.prototype, "backgroundColor");
m12([
  Mt({ type: Array })
], a11.prototype, "dims");
m12([
  Mt({ type: Object })
], a11.prototype, "source");
m12([
  n()
], a11.prototype, "roots");
customElements.get("frc-mechanism2d-wrapper") || customElements.define("frc-mechanism2d-wrapper", a11);

// node_modules/@frc-web-components/fwc/dist/components/encoder.es.js
var m13 = Object.defineProperty;
var d12 = (a22, o12, n33, f39) => {
  for (var e11 = void 0, s18 = a22.length - 1, l25; s18 >= 0; s18--)
    (l25 = a22[s18]) && (e11 = l25(o12, n33, e11) || e11);
  return e11 && m13(o12, n33, e11), e11;
};
var h12 = {
  dashboard: {
    displayName: "Encoder"
  },
  properties: {
    distance: { type: "Number" },
    speed: { type: "Number" }
  }
};
var t11 = class t12 extends H {
  constructor() {
    super(...arguments), this.distance = 0, this.speed = 0;
  }
  render() {
    return Ot`
      <label class="distance-label">Distance</label>
      <span>${this.distance}</span>
      <label class="speed-label">Speed</label>
      <span>${this.speed}</span>
    `;
  }
};
t11.styles = Ut`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: 50% 50%;
      column-gap: 15px;
      row-gap: 5px;
      align-items: center;
      width: 250px;
      font-family: sans-serif;
    }

    label {
      font-weight: bold;
      text-align: right;
      color: var(--frc-encoder-label-color, #000);
    }

    span {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      padding: 5px;
      border: 1px dashed;
      border-color: var(--frc-encoder-value-color, #666);
      color: var(--frc-encoder-value-color, #666);
      border-radius: 3px;
      box-sizing: border-box;
    }
  `;
var r14 = t11;
d12([
  Mt({ type: Number })
], r14.prototype, "distance");
d12([
  Mt({ type: Number })
], r14.prototype, "speed");
customElements.get("frc-encoder") || customElements.define("frc-encoder", r14);

// node_modules/@frc-web-components/fwc/dist/when-CDK1Tt5Y.js
function o6(r24, n33, e11) {
  return r24 ? n33(r24) : e11 == null ? void 0 : e11(r24);
}

// node_modules/@frc-web-components/fwc/dist/components/network-alerts.es.js
var v12 = Object.defineProperty;
var l11 = (c27, e11, d34, g31) => {
  for (var i27 = void 0, s18 = c27.length - 1, p26; s18 >= 0; s18--)
    (p26 = c27[s18]) && (i27 = p26(e11, d34, i27) || i27);
  return i27 && v12(e11, d34, i27), i27;
};
var u14 = {
  dashboard: {
    displayName: "Network Alerts"
  },
  properties: {
    errors: { type: "Array" },
    warnings: { type: "Array" },
    infos: { type: "Array" },
    level: {
      type: "String",
      defaultValue: "info",
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["error", "warning", "info"];
        }
      }
    },
    hideTitle: { type: "Boolean", attribute: "hide-title" }
  }
};
var q6 = "m40-120 440-760 440 760H40Zm138-80h604L480-720 178-200Zm302-40q17 0 28.5-11.5T520-280q0-17-11.5-28.5T480-320q-17 0-28.5 11.5T440-280q0 17 11.5 28.5T480-240Zm-40-120h80v-200h-80v200Zm40-100Z";
var m14 = "M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z";
var T9 = "M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z";
var n15 = class n16 extends H {
  constructor() {
    super(...arguments), this.errors = [], this.warnings = [], this.infos = [], this.level = "info", this.hideTitle = false;
  }
  render() {
    return Ot`
      <div class="alerts-container">
        ${o6(!this.hideTitle, () => Ot` <header>Alerts</header> `)}
        <div class="alerts-list">
          ${this.errors.map(
      (e11) => Ot`
              <div class="alert">
                <div class="icon">
                  <frc-icon
                    color="red"
                    svg-path=${m14}
                    view-box="0 -960 960 960"
                  ></frc-icon>
                </div>
                <label>${e11}</label>
              </div>
            `
    )}
          ${o6(
      this.level !== "error",
      () => Ot`
              ${this.warnings.map(
        (e11) => Ot`
                  <div class="alert">
                    <div class="icon">
                      <frc-icon
                        color="yellow"
                        svg-path=${q6}
                        view-box="0 -960 960 960"
                      ></frc-icon>
                    </div>
                    <label>${e11}</label>
                  </div>
                `
      )}
            `
    )}
          ${o6(
      this.level === "info",
      () => Ot`
              ${this.infos.map(
        (e11) => Ot`
                  <div class="alert">
                    <div class="icon">
                      <frc-icon
                        color="green"
                        svg-path=${T9}
                        view-box="0 -960 960 960"
                      ></frc-icon>
                    </div>
                    <label>${e11}</label>
                  </div>
                `
      )}
            `
    )}
        </div>
      </div>
    `;
  }
};
n15.styles = Ut`
    :host {
      font-family: sans-serif;
      display: inline-block;
      width: 300px;
      height: auto;
      box-sizing: border-box;
      color: var(--frc-network-alerts-text-color, black);
    }

    .alerts-container {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    header {
      background: var(--frc-network-alerts-header-color, lightblue);
      padding: 10px 0;
      text-align: center;
      font-weight: bold;
    }

    .alerts-list {
      padding: 8px 5px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 9px;
      flex: 1;
      overflow-y: auto;
    }

    .alert {
      display: flex;
      align-items: center;
      gap: 9px;
    }

    .icon {
      width: 24px;
      height: 24px;
    }

    .alert label {
      flex: 1;
    }

    .icon frc-icon {
      width: 100%;
      height: 100%;
    }
  `;
var t13 = n15;
l11([
  Mt({ type: Array })
], t13.prototype, "errors");
l11([
  Mt({ type: Array })
], t13.prototype, "warnings");
l11([
  Mt({ type: Array })
], t13.prototype, "infos");
l11([
  Mt({ type: String })
], t13.prototype, "level");
l11([
  Mt({ type: Boolean, attribute: "hide-title" })
], t13.prototype, "hideTitle");
customElements.get("frc-network-alerts") || customElements.define("frc-network-alerts", t13);

// node_modules/@frc-web-components/fwc/dist/components/pid.es.js
var F6 = (n33) => {
  throw TypeError(n33);
};
var I6 = (n33, t19, e11) => t19.has(n33) || F6("Cannot " + e11);
var f16 = (n33, t19, e11) => t19.has(n33) ? F6("Cannot add the same private member more than once") : t19 instanceof WeakSet ? t19.add(n33) : t19.set(n33, e11);
var r15 = (n33, t19, e11) => (I6(n33, t19, "access private method"), e11);
var P7 = Object.defineProperty;
var y12 = (n33, t19, e11, D17) => {
  for (var i27 = void 0, a22 = n33.length - 1, l25; a22 >= 0; a22--)
    (l25 = n33[a22]) && (i27 = l25(t19, e11, i27) || i27);
  return i27 && P7(t19, e11, i27), i27;
};
var G7 = {
  dashboard: {
    displayName: "PID Command"
  },
  properties: {
    p: { type: "Number", changeEvent: "change" },
    i: { type: "Number", changeEvent: "change" },
    d: { type: "Number", changeEvent: "change" },
    setpoint: { type: "Number", changeEvent: "change" },
    running: { type: "Boolean", reflect: true, changeEvent: "change" }
  }
};
var p11;
var d13;
var w9 = class w10 extends H {
  constructor() {
    super(...arguments);
    f16(this, p11);
    this.p = 0, this.i = 0, this.d = 0, this.setpoint = 0, this.running = false;
  }
  onPChange(e11) {
    this.p = parseFloat(e11.target.value), r15(this, p11, d13).call(this);
  }
  onIChange(e11) {
    this.i = parseFloat(e11.target.value), r15(this, p11, d13).call(this);
  }
  onDChange(e11) {
    this.d = parseFloat(e11.target.value), r15(this, p11, d13).call(this);
  }
  onSetpointChange(e11) {
    this.setpoint = parseFloat(e11.target.value), r15(this, p11, d13).call(this);
  }
  onRunningClick() {
    this.running = !this.running, r15(this, p11, d13).call(this);
  }
  render() {
    return Ot`
      <input
        type="checkbox"
        id="running"
        .checked=${this.running}
        @click=${this.onRunningClick}
      />
      <label for="running">Running</label>
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Setpoint</label>
      <input
        type="number"
        .value=${this.setpoint}
        @change=${this.onSetpointChange}
      />
    `;
  }
};
p11 = /* @__PURE__ */ new WeakSet(), d13 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        p: this.p,
        i: this.i,
        d: this.d,
        setpoint: this.setpoint,
        running: this.running
      }
    })
  );
}, w9.styles = Ut`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      width: 150px;
      height: auto;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input[type='number'] {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }

    input[type='checkbox'] {
      justify-self: right;
      margin: 0;
      width: 16px;
      height: 16px;
    }

    label[for='running'] {
      justify-self: left;
    }
  `;
var s8 = w9;
y12([
  Mt({ type: Number })
], s8.prototype, "p");
y12([
  Mt({ type: Number })
], s8.prototype, "i");
y12([
  Mt({ type: Number })
], s8.prototype, "d");
y12([
  Mt({ type: Number })
], s8.prototype, "setpoint");
y12([
  Mt({ type: Boolean, reflect: true })
], s8.prototype, "running");
customElements.get("frc-pid-command") || customElements.define("frc-pid-command", s8);
var _6 = Object.defineProperty;
var v13 = (n33, t19, e11, D17) => {
  for (var i27 = void 0, a22 = n33.length - 1, l25; a22 >= 0; a22--)
    (l25 = n33[a22]) && (i27 = l25(t19, e11, i27) || i27);
  return i27 && _6(t19, e11, i27), i27;
};
var O9 = {
  dashboard: {
    displayName: "PID Controller"
  },
  properties: {
    p: { type: "Number" },
    i: { type: "Number" },
    d: { type: "Number" },
    setpoint: { type: "Number" }
  }
};
var h13;
var b14;
var k10 = class k11 extends H {
  constructor() {
    super(...arguments);
    f16(this, h13);
    this.p = 0, this.i = 0, this.d = 0, this.setpoint = 0;
  }
  onPChange(e11) {
    this.p = parseFloat(e11.target.value), r15(this, h13, b14).call(this);
  }
  onIChange(e11) {
    this.i = parseFloat(e11.target.value), r15(this, h13, b14).call(this);
  }
  onDChange(e11) {
    this.d = parseFloat(e11.target.value), r15(this, h13, b14).call(this);
  }
  onSetpointChange(e11) {
    this.setpoint = parseFloat(e11.target.value), r15(this, h13, b14).call(this);
  }
  render() {
    return Ot`
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Setpoint</label>
      <input
        type="number"
        .value=${this.setpoint}
        @change=${this.onSetpointChange}
      />
    `;
  }
};
h13 = /* @__PURE__ */ new WeakSet(), b14 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        p: this.p,
        i: this.i,
        d: this.d,
        setpoint: this.setpoint
      }
    })
  );
}, k10.styles = Ut`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      height: auto;
      width: 150px;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }
  `;
var g11 = k10;
v13([
  Mt({ type: Number })
], g11.prototype, "p");
v13([
  Mt({ type: Number })
], g11.prototype, "i");
v13([
  Mt({ type: Number })
], g11.prototype, "d");
v13([
  Mt({ type: Number })
], g11.prototype, "setpoint");
customElements.get("frc-pid-controller") || customElements.define("frc-pid-controller", g11);
var S9 = Object.defineProperty;
var x12 = (n33, t19, e11, D17) => {
  for (var i27 = void 0, a22 = n33.length - 1, l25; a22 >= 0; a22--)
    (l25 = n33[a22]) && (i27 = l25(t19, e11, i27) || i27);
  return i27 && S9(t19, e11, i27), i27;
};
var R8 = {
  dashboard: {
    displayName: "Profiled PID Controller"
  },
  properties: {
    p: { type: "Number" },
    i: { type: "Number" },
    d: { type: "Number" },
    goal: { type: "Number" }
  }
};
var u15;
var m15;
var E9 = class E10 extends H {
  constructor() {
    super(...arguments);
    f16(this, u15);
    this.p = 0, this.i = 0, this.d = 0, this.goal = 0;
  }
  onPChange(e11) {
    this.p = parseFloat(e11.target.value), r15(this, u15, m15).call(this);
  }
  onIChange(e11) {
    this.i = parseFloat(e11.target.value), r15(this, u15, m15).call(this);
  }
  onDChange(e11) {
    this.d = parseFloat(e11.target.value), r15(this, u15, m15).call(this);
  }
  onGoalChange(e11) {
    this.goal = parseFloat(e11.target.value), r15(this, u15, m15).call(this);
  }
  render() {
    return Ot`
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Goal</label>
      <input type="number" .value=${this.goal} @change=${this.onGoalChange} />
    `;
  }
};
u15 = /* @__PURE__ */ new WeakSet(), m15 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        p: this.p,
        i: this.i,
        d: this.d,
        goal: this.goal
      }
    })
  );
}, E9.styles = Ut`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      height: auto;
      width: 150px;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }
  `;
var c9 = E9;
x12([
  Mt({ type: Number })
], c9.prototype, "p");
x12([
  Mt({ type: Number })
], c9.prototype, "i");
x12([
  Mt({ type: Number })
], c9.prototype, "d");
x12([
  Mt({ type: Number })
], c9.prototype, "goal");
customElements.get("frc-profiled-pid-controller") || customElements.define("frc-profiled-pid-controller", c9);

// node_modules/@frc-web-components/fwc/dist/components/scoring-grid.es.js
var $8 = (t19) => {
  throw TypeError(t19);
};
var O10 = (t19, r24, e11) => r24.has(t19) || $8("Cannot " + e11);
var k12 = (t19, r24, e11) => r24.has(t19) ? $8("Cannot add the same private member more than once") : r24 instanceof WeakSet ? r24.add(t19) : r24.set(t19, e11);
var g12 = (t19, r24, e11) => (O10(t19, r24, "access private method"), e11);
var E11 = Object.defineProperty;
var b15 = (t19, r24, e11, i27) => {
  for (var s18 = void 0, o12 = t19.length - 1, h26; o12 >= 0; o12--)
    (h26 = t19[o12]) && (s18 = h26(r24, e11, s18) || s18);
  return s18 && E11(r24, e11, s18), s18;
};
var y13;
var I7;
var v14 = class v15 extends H {
  constructor() {
    super(...arguments);
    k12(this, y13);
    this.nodeId = 1, this.selected = false, this.cones = 0, this.cubes = 0, this.background = "";
  }
  updated(e11) {
    (e11.has("selected") || e11.has("nodeId")) && g12(this, y13, I7).call(this);
  }
  render() {
    return Ot`
      <div style="text-align: center; margin-block:auto;">${this.nodeId}</div>

      <!-- empty on:click binding above passes click events to be bound on the Node component -->
      ${Tt`
        <svg
          viewBox="-2 -2 28 28"
          style="margin-right: 8px; width:100%; height:100%; pointer-events:none"
        >
          ${o6(
      this.cubes > 1,
      () => Tt`
              <polygon
                points="8,8 8,20 20,20, 20,8"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
              <polygon
                points="4,4 4,16 16,16, 16,4"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}
          ${o6(
      this.cubes === 1,
      () => Tt`
              <polygon
                points="6,6 6,18 18,18, 18,6"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}
          ${o6(
      this.cones > 1,
      () => Tt`
              <polygon
                points="13,8 11,8 8,22 5,22 19,22 16,22"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
              <polygon
                points="13,4 11,4 8,18 5,18 19,18 16,18"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}
          
          ${o6(
      this.cones === 1,
      () => Tt`
              <polygon
                points="13,6 11,6 8,20 5,20 19,20 16,20"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}  
        </svg>
      `}
    `;
  }
};
y13 = /* @__PURE__ */ new WeakSet(), I7 = function() {
  this.selected ? this.background = "green" : this.nodeId >= 1 && this.nodeId <= 9 ? this.background = "lightgray" : (this.nodeId - 1) % 3 === 1 ? this.background = "purple" : this.background = "yellow", this.style.setProperty("background-color", this.background);
}, v14.styles = Ut`
    :host {
      display: block;
      color: black;
      font-size: 2em;
      height: 100%;
      flex-grow: 1;
      border: 1px solid black;
      box-sizing: border-box;
    }
  `;
var c10 = v14;
b15([
  Mt({ type: Number, attribute: "node-id" })
], c10.prototype, "nodeId");
b15([
  Mt({ type: Boolean })
], c10.prototype, "selected");
b15([
  Mt({ type: Number })
], c10.prototype, "cones");
b15([
  Mt({ type: Number })
], c10.prototype, "cubes");
b15([
  n()
], c10.prototype, "background");
customElements.get("frc-scoring-grid-node") || customElements.define("frc-scoring-grid-node", c10);
var N7 = Object.defineProperty;
var d14 = (t19, r24, e11, i27) => {
  for (var s18 = void 0, o12 = t19.length - 1, h26; o12 >= 0; o12--)
    (h26 = t19[o12]) && (s18 = h26(r24, e11, s18) || s18);
  return s18 && N7(r24, e11, s18), s18;
};
var D7 = {
  dashboard: {
    displayName: "Scoring Grid"
  },
  properties: {
    cubesScored: {
      type: "Array",
      attribute: "cubes-scored",
      input: { type: "NumberArray" }
    },
    conesScored: {
      type: "Array",
      attribute: "cones-scored",
      input: { type: "NumberArray" }
    },
    hideLinks: { type: "Boolean", attribute: "hide-links" },
    reverseRow: { type: "Boolean", attribute: "reverse-row" },
    reverseCol: { type: "Boolean", attribute: "reverse-col" }
  }
};
function m16(t19, r24 = false) {
  return r24 ? 9 - (t19 - 1) % 9 : 1 + (t19 - 1) % 9;
}
function C8(t19, r24 = false) {
  return r24 ? 3 - Math.floor((t19 - 1) / 9) : Math.floor((t19 - 1) / 9) + 1;
}
function _7(t19, r24) {
  return Array.from(Array(r24 + 1).keys()).slice(t19);
}
var p12;
var R9;
var A9;
var w11 = class w12 extends H {
  constructor() {
    super(...arguments);
    k12(this, p12);
    this.selection = 0, this.cubesScored = [], this.conesScored = [], this.hideLinks = false, this.reverseRow = false, this.reverseCol = false, this.leftOfLinks = [];
  }
  updated(e11) {
    (e11.has("cubesScored") || e11.has("conesScored")) && g12(this, p12, A9).call(this);
  }
  renderLinks() {
    return this.hideLinks ? Ot`` : Ot`
      ${this.leftOfLinks.map(
      (e11) => Ot`
          <div
            class="link"
            style=${p4({
        gridColumn: `${Math.min(
          m16(e11, this.reverseCol),
          m16(e11 + 2, this.reverseCol)
        )} / span 3`,
        gridRow: C8(e11, this.reverseRow)
      })}
          ></div>
        `
    )}
    `;
  }
  render() {
    return Ot`
      <div class="grid">
        ${_7(1, 27).map(
      (e11) => Ot`
            <div
              style=${p4({
        gridColumn: m16(e11, this.reverseCol),
        gridRow: C8(e11, this.reverseRow)
      })}
            >
              <frc-scoring-grid-node
                node-id=${e11}
                ?selected=${this.selection === e11}
                @click=${() => {
        g12(this, p12, R9).call(this, e11);
      }}
                cubes=${this.cubesScored.filter((i27) => i27 === e11).length}
                cones=${this.conesScored.filter((i27) => i27 === e11).length}
              >
              </frc-scoring-grid-node>
            </div>
          `
    )}
        ${this.renderLinks()}
      </div>
    `;
  }
};
p12 = /* @__PURE__ */ new WeakSet(), R9 = function(e11) {
  this.selection === e11 ? this.selection = 0 : this.selection = e11;
  const i27 = new CustomEvent("select", {
    bubbles: true,
    composed: true,
    detail: { nodeId: this.selection }
  });
  this.dispatchEvent(i27);
}, A9 = function() {
  const e11 = [], i27 = this.cubesScored.concat(this.conesScored);
  for (let s18 = 0; s18 < 3; s18 += 1)
    for (let o12 = 1; o12 <= 7; o12 += 1)
      i27.includes(s18 * 9 + o12) && i27.includes(s18 * 9 + o12 + 1) && i27.includes(s18 * 9 + o12 + 2) && (e11.push(s18 * 9 + o12), o12 += 2);
  this.leftOfLinks = e11;
}, w11.styles = Ut`
    :host {
      display: inline-block;
      width: 550px;
      height: 380px;
    }

    .grid {
      display:grid;
      grid-template-columns: repeat(9, calc(100% / 9));
      grid-template-rows: repeat(3, calc(100% / 3));
      height:100%;
      width:100%;
      flex-direction:row-reverse;
      grid-auto-flow: dense;"
    }

    .link {
      border: 5px solid black;
      border-radius: 10px;
      margin: 5px;
      box-sizing: border-box;
      pointer-events: none;
    }
  `;
var n17 = w11;
d14([
  Mt({ type: Number })
], n17.prototype, "selection");
d14([
  Mt({ type: Array, attribute: "cubes-scored" })
], n17.prototype, "cubesScored");
d14([
  Mt({ type: Array, attribute: "cones-scored" })
], n17.prototype, "conesScored");
d14([
  Mt({ type: Boolean, attribute: "hide-links" })
], n17.prototype, "hideLinks");
d14([
  Mt({ type: Boolean, attribute: "reverse-row" })
], n17.prototype, "reverseRow");
d14([
  Mt({ type: Boolean, attribute: "reverse-col" })
], n17.prototype, "reverseCol");
d14([
  n()
], n17.prototype, "leftOfLinks");
customElements.get("frc-scoring-grid") || customElements.define("frc-scoring-grid", n17);

// node_modules/@frc-web-components/fwc/dist/components/command-based.es.js
var f17 = (t19) => {
  throw TypeError(t19);
};
var C9 = (t19, e11, a22) => e11.has(t19) || f17("Cannot " + a22);
var b16 = (t19, e11, a22) => e11.has(t19) ? f17("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(t19) : e11.set(t19, a22);
var g13 = (t19, e11, a22) => (C9(t19, e11, "access private method"), a22);
var $9 = Object.defineProperty;
var u16 = (t19, e11, a22, S21) => {
  for (var o12 = void 0, l25 = t19.length - 1, m33; l25 >= 0; l25--)
    (m33 = t19[l25]) && (o12 = m33(e11, a22, o12) || o12);
  return o12 && $9(e11, a22, o12), o12;
};
var P8 = {
  dashboard: {
    displayName: "Command"
  },
  properties: {
    name: { type: "String", defaultValue: "Command" },
    running: { type: "Boolean", changeEvent: "toggle" },
    controllable: { type: "Boolean" },
    label: { type: "String" }
  }
};
var h14;
var x13;
var c11 = class c12 extends H {
  constructor() {
    super(...arguments);
    b16(this, h14);
    this.name = "Command", this.running = false, this.controllable = false, this.label = "";
  }
  render() {
    return Ot`
      <frc-toggle-button
        ?disabled="${!this.controllable}"
        ?toggled="${this.running}"
        label=${this.label || this.name}
        @toggle="${g13(this, h14, x13)}"
      >
      </frc-toggle-button>
    `;
  }
};
h14 = /* @__PURE__ */ new WeakSet(), x13 = function(a22) {
  a22.stopPropagation(), this.running = !this.running, this.dispatchEvent(
    new CustomEvent("toggle", {
      detail: {
        running: this.running
      },
      bubbles: true,
      composed: true
    })
  );
}, c11.styles = Ut`
    :host {
      display: inline-block;
      width: 100px;
      height: 50px;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    frc-toggle-button {
      width: 100%;
      height: 100%;
    }
  `;
var i12 = c11;
u16([
  Mt({ type: String })
], i12.prototype, "name");
u16([
  Mt({ type: Boolean })
], i12.prototype, "running");
u16([
  Mt({ type: Boolean })
], i12.prototype, "controllable");
u16([
  Mt({ type: String })
], i12.prototype, "label");
customElements.get("frc-robot-command") || customElements.define("frc-robot-command", i12);
var B6 = Object.defineProperty;
var p13 = (t19, e11, a22, S21) => {
  for (var o12 = void 0, l25 = t19.length - 1, m33; l25 >= 0; l25--)
    (m33 = t19[l25]) && (o12 = m33(e11, a22, o12) || o12);
  return o12 && B6(e11, a22, o12), o12;
};
var _8 = {
  dashboard: {
    displayName: "Subsystem"
  },
  properties: {
    default: { type: "String" },
    command: { type: "String" },
    hasCommand: { type: "Boolean", attribute: "has-command" },
    hasDefault: { type: "Boolean", attribute: "has-default" },
    label: { type: "String" },
    name: { type: "String" },
    hideName: { type: "Boolean", attribute: "hide-name" }
  }
};
var s9;
var r16 = (s9 = class extends H {
  constructor() {
    super(...arguments), this.default = "", this.command = "", this.hasCommand = false, this.hasDefault = false, this.label = "", this.name = "", this.hideName = false;
  }
  static renderValue(e11, a22) {
    return a22 ? Ot`<span class="has-value">${e11}</span>` : Ot`<span class="no-value">None</span>`;
  }
  render() {
    return Ot`
      ${this.hideName ? "" : Ot` <header>${this.label || this.name}</header> `}
      <div class="subsystem">
        <p>
          Default command:
          ${s9.renderValue(this.default, this.hasDefault)}
        </p>
        <p>
          Current command:
          ${s9.renderValue(this.command, this.hasCommand)}
        </p>
      </div>
    `;
  }
}, s9.styles = Ut`
    :host {
      display: inline-block;
      font-family: sans-serif;
      font-size: 16px;
      padding: 5px;
      color: var(--frc-label-text-color, black);
    }

    .subsystem {
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
    }

    p {
      margin: 0;
      margin-right: 10px;
      margin-top: 5px;
    }

    header {
      font-weight: bold;
      margin-bottom: 2px;
      color: var(--frc-robot-subsystem-header-color, purple);
    }

    .has-value {
      color: green;
    }

    .no-value {
      color: red;
    }
  `, s9);
p13([
  Mt({ type: String })
], r16.prototype, "default");
p13([
  Mt({ type: String })
], r16.prototype, "command");
p13([
  Mt({ type: Boolean, attribute: "has-command" })
], r16.prototype, "hasCommand");
p13([
  Mt({ type: Boolean, attribute: "has-default" })
], r16.prototype, "hasDefault");
p13([
  Mt({ type: String })
], r16.prototype, "label");
p13([
  Mt({ type: String })
], r16.prototype, "name");
p13([
  Mt({ type: Boolean, attribute: "hide-name" })
], r16.prototype, "hideName");
var D8 = r16;
customElements.get("frc-robot-subsystem") || customElements.define("frc-robot-subsystem", D8);

// node_modules/@frc-web-components/fwc/dist/components/canvas.es.js
var it8;
function st7(n33) {
  return (t19, r24) => i(t19, r24, { get() {
    return (this.renderRoot ?? it8 ?? (it8 = document.createDocumentFragment())).querySelectorAll(n33);
  } });
}
var ot7 = Object.defineProperty;
var A10 = (n33, t19, r24, o12) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && ot7(t19, r24, e11), e11;
};
var O11 = class extends H {
  constructor() {
    super(...arguments), this.points = [], this.opacity = 1, this.color = null, this.lineWidth = 2, this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["left", "top"], this.zIndex = 0, this._points = [];
  }
  updated(t19) {
    t19.has("points") && (this._points = it(this.points, 2));
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), t19.lineWidth = this.lineWidth ?? 2, t19.strokeStyle = this.color ?? "gray";
    const [r24, o12, e11] = this.transform ?? [
      0,
      0,
      0
    ];
    t19.translate(r24, o12);
    const [s18, a22] = this.transformOrigin ?? [0, 0], d34 = s18, l25 = a22;
    if (t19.translate(d34, l25), t19.rotate(-(e11 * Math.PI) / 180), t19.translate(-d34, -l25), this._points.length > 1) {
      for (let h26 = 0; h26 < this._points.length - 1; h26 += 1) {
        const [v30, p26] = this._points[h26], [c27, N19] = this._points[h26 + 1];
        t19.moveTo(v30, p26), t19.lineTo(c27, N19);
      }
      t19.stroke();
    }
  }
};
A10([
  Mt({ type: Array })
], O11.prototype, "points");
A10([
  Mt({ type: Number })
], O11.prototype, "opacity");
A10([
  Mt({ type: String })
], O11.prototype, "color");
A10([
  Mt({ type: Number, attribute: "line-width" })
], O11.prototype, "lineWidth");
A10([
  Mt({ type: Array })
], O11.prototype, "transform");
A10([
  Mt({ type: Array, attribute: "transform-origin" })
], O11.prototype, "transformOrigin");
A10([
  Mt({ type: Array, attribute: "draw-origin" })
], O11.prototype, "drawOrigin");
A10([
  Mt({ type: Array, attribute: "z-index" })
], O11.prototype, "zIndex");
A10([
  n()
], O11.prototype, "_points");
customElements.get("frc-canvas-line") || customElements.define("frc-canvas-line", O11);
var at5 = Object.defineProperty;
var u17 = (n33, t19, r24, o12) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && at5(t19, r24, e11), e11;
};
var m17 = class extends H {
  constructor() {
    super(...arguments), this.origin = [0, 0], this.width = 10, this.height = 10, this.radii = 0, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor, t19.lineWidth = this.strokeWidth);
    let [r24, o12] = this.origin;
    const [e11, s18] = this.drawOrigin ?? ["center", "center"];
    e11 === "center" ? r24 -= this.width / 2 : e11 === "right" && (r24 -= this.width), s18 === "center" ? o12 -= this.height / 2 : s18 === "bottom" && (o12 -= this.height);
    const [a22, d34, l25] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += a22, o12 += d34, t19.translate(r24, o12);
    const [h26, v30] = this.transformOrigin ?? [0, 0], p26 = h26 + this.width / 2, c27 = v30 + this.height / 2;
    t19.translate(p26, c27), t19.rotate(-(l25 * Math.PI) / 180), t19.translate(-p26, -c27), t19.roundRect(0, 0, this.width, this.height, this.radii), this.fillColor && t19.fill(), this.strokeColor && t19.stroke();
  }
};
u17([
  Mt({ type: Array })
], m17.prototype, "origin");
u17([
  Mt({ type: Number })
], m17.prototype, "width");
u17([
  Mt({ type: Number })
], m17.prototype, "height");
u17([
  Mt({ type: Number })
], m17.prototype, "radii");
u17([
  Mt({ type: Number })
], m17.prototype, "opacity");
u17([
  Mt({ type: String, attribute: "stroke-color" })
], m17.prototype, "strokeColor");
u17([
  Mt({ type: Number, attribute: "stroke-width" })
], m17.prototype, "strokeWidth");
u17([
  Mt({ type: String, attribute: "fill-color" })
], m17.prototype, "fillColor");
u17([
  Mt({ type: Array })
], m17.prototype, "transform");
u17([
  Mt({ type: Array, attribute: "transform-origin" })
], m17.prototype, "transformOrigin");
u17([
  Mt({ type: Array, attribute: "draw-origin" })
], m17.prototype, "drawOrigin");
u17([
  Mt({ type: Array, attribute: "z-index" })
], m17.prototype, "zIndex");
customElements.get("frc-canvas-rect") || customElements.define("frc-canvas-rect", m17);
var nt7 = Object.defineProperty;
var w13 = (n33, t19, r24, o12) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && nt7(t19, r24, e11), e11;
};
var f18 = class extends H {
  constructor() {
    super(...arguments), this.origin = [0, 0], this.radius = 10, this.startAngle = 0, this.endAngle = 360, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor, t19.lineWidth = this.strokeWidth);
    let [r24, o12] = this.origin;
    const [e11, s18] = this.drawOrigin ?? ["center", "center"];
    e11 === "left" ? r24 += this.radius : e11 === "right" && (r24 -= this.radius), s18 === "top" ? o12 += this.radius : s18 === "bottom" && (o12 -= this.radius);
    const [a22, d34, l25] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += a22, o12 += d34, t19.translate(r24, o12);
    const [h26, v30] = this.transformOrigin ?? [0, 0], p26 = h26, c27 = v30;
    t19.translate(p26, c27), t19.rotate(-(l25 * Math.PI) / 180), t19.translate(-p26, -c27), t19.beginPath(), t19.arc(
      0,
      0,
      this.radius,
      -(this.startAngle ?? 0) * Math.PI / 180,
      -(this.endAngle ?? 360) * Math.PI / 180,
      true
    ), this.fillColor && t19.fill(), this.strokeColor && t19.stroke();
  }
};
w13([
  Mt({ type: Array })
], f18.prototype, "origin");
w13([
  Mt({ type: Number })
], f18.prototype, "radius");
w13([
  Mt({ type: Number, attribute: "start-angle" })
], f18.prototype, "startAngle");
w13([
  Mt({ type: Number, attribute: "end-angle" })
], f18.prototype, "endAngle");
w13([
  Mt({ type: Number })
], f18.prototype, "opacity");
w13([
  Mt({ type: String, attribute: "stroke-color" })
], f18.prototype, "strokeColor");
w13([
  Mt({ type: Number, attribute: "stroke-width" })
], f18.prototype, "strokeWidth");
w13([
  Mt({ type: String, attribute: "fill-color" })
], f18.prototype, "fillColor");
w13([
  Mt({ type: Array })
], f18.prototype, "transform");
w13([
  Mt({ type: Array, attribute: "transform-origin" })
], f18.prototype, "transformOrigin");
w13([
  Mt({ type: Array, attribute: "draw-origin" })
], f18.prototype, "drawOrigin");
w13([
  Mt({ type: Array, attribute: "z-index" })
], f18.prototype, "zIndex");
customElements.get("frc-canvas-circle") || customElements.define("frc-canvas-circle", f18);
var ht7 = Object.defineProperty;
var C10 = (n33, t19, r24, o12) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && ht7(t19, r24, e11), e11;
};
var b17 = class extends H {
  constructor() {
    super(...arguments), this.origin = [0, 0], this.sides = 5, this.radius = 10, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor, t19.lineWidth = this.strokeWidth);
    let [r24, o12] = this.origin;
    const [e11, s18] = this.drawOrigin ?? ["center", "center"];
    e11 === "left" ? r24 += this.radius : e11 === "right" && (r24 -= this.radius), s18 === "top" ? o12 += this.radius : s18 === "bottom" && (o12 -= this.radius);
    const [a22, d34, l25] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += a22, o12 += d34, t19.translate(r24, o12);
    const [h26, v30] = this.transformOrigin ?? [0, 0], p26 = h26, c27 = v30;
    if (t19.translate(p26, c27), t19.rotate(-(l25 * Math.PI) / 180), t19.translate(-p26, -c27), this.sides < 3)
      return;
    const N19 = Math.PI * 2 / this.sides;
    t19.beginPath();
    for (let P19 = 0; P19 < this.sides; P19 += 1) {
      const x34 = P19 * N19, M12 = this.radius * Math.cos(x34), G15 = this.radius * Math.sin(x34);
      P19 === 0 ? t19.moveTo(M12, G15) : t19.lineTo(M12, G15);
    }
    t19.closePath(), this.fillColor && t19.fill(), this.strokeColor && t19.stroke();
  }
};
C10([
  Mt({ type: Array })
], b17.prototype, "origin");
C10([
  Mt({ type: Number })
], b17.prototype, "sides");
C10([
  Mt({ type: Number })
], b17.prototype, "radius");
C10([
  Mt({ type: Number })
], b17.prototype, "opacity");
C10([
  Mt({ type: String, attribute: "stroke-color" })
], b17.prototype, "strokeColor");
C10([
  Mt({ type: Number, attribute: "stroke-width" })
], b17.prototype, "strokeWidth");
C10([
  Mt({ type: String, attribute: "fill-color" })
], b17.prototype, "fillColor");
C10([
  Mt({ type: Array })
], b17.prototype, "transform");
C10([
  Mt({ type: Array, attribute: "transform-origin" })
], b17.prototype, "transformOrigin");
C10([
  Mt({ type: Array, attribute: "draw-origin" })
], b17.prototype, "drawOrigin");
C10([
  Mt({ type: Array, attribute: "z-index" })
], b17.prototype, "zIndex");
customElements.get("frc-canvas-ngon") || customElements.define("frc-canvas-ngon", b17);
var lt7 = Object.defineProperty;
var R10 = (n33, t19, r24, o12) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && lt7(t19, r24, e11), e11;
};
var B7 = class extends H {
  constructor() {
    super(...arguments), this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.zIndex = 0;
  }
  draw(t19) {
    const { ctx: r24 } = t19, [o12, e11, s18] = this.transform ?? [
      0,
      0,
      0
    ];
    r24.translate(o12, e11);
    const [a22, d34] = this.transformOrigin ?? [0, 0], l25 = a22, h26 = d34;
    r24.translate(l25, h26), r24.rotate(-(s18 * Math.PI) / 180), r24.translate(-l25, -h26), [...this.children].forEach((v30) => {
      var c27;
      r24.save(), r24.beginPath();
      const p26 = v30;
      (c27 = p26.draw) == null || c27.call(p26, t19), r24.restore();
    });
  }
};
R10([
  Mt({ type: Array })
], B7.prototype, "transform");
R10([
  Mt({ type: Array, attribute: "transform-origin" })
], B7.prototype, "transformOrigin");
R10([
  Mt({ type: Array, attribute: "z-index" })
], B7.prototype, "zIndex");
customElements.get("frc-canvas-group") || customElements.define("frc-canvas-group", B7);
var dt8 = Object.defineProperty;
var y14 = (n33, t19, r24, o12) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && dt8(t19, r24, e11), e11;
};
var g14 = class extends H {
  constructor() {
    super(...arguments), this.text = "", this.origin = [0, 0], this.maxWidth = null, this.fontName = "sans-serif", this.fontSize = 12, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity ?? 1)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor), t19.textAlign = "center", t19.textBaseline = "middle", t19.font = `${this.fontSize ?? 12}px ${this.fontName || "sans-serif"}`;
    let [r24, o12] = this.origin ?? [0, 0];
    const { width: e11, actualBoundingBoxAscent: s18, actualBoundingBoxDescent: a22 } = t19.measureText(this.text ?? ""), d34 = s18 + a22, [l25, h26] = this.drawOrigin ?? ["center", "center"];
    l25 === "left" ? r24 += e11 / 2 : l25 === "right" && (r24 -= e11 / 2), h26 === "top" ? o12 += d34 / 2 : h26 === "bottom" && (o12 -= d34 / 2);
    const [v30, p26, c27] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += v30, o12 += p26, t19.translate(r24, o12);
    const [N19, P19] = this.transformOrigin ?? [0, 0], x34 = N19, M12 = P19;
    t19.translate(x34, M12), t19.rotate(-(c27 * Math.PI) / 180), t19.translate(-x34, -M12), this.fillColor && t19.fillText(this.text ?? "", 0, 0), this.strokeColor && (t19.lineWidth = this.strokeWidth ?? 2, t19.strokeText(this.text ?? "", 0, 0));
  }
};
y14([
  Mt({ type: String })
], g14.prototype, "text");
y14([
  Mt({ type: Array })
], g14.prototype, "origin");
y14([
  Mt({ type: Number, attribute: "max-width" })
], g14.prototype, "maxWidth");
y14([
  Mt({ type: String, attribute: "font-name" })
], g14.prototype, "fontName");
y14([
  Mt({ type: Number, attribute: "font-size" })
], g14.prototype, "fontSize");
y14([
  Mt({ type: Number })
], g14.prototype, "opacity");
y14([
  Mt({ type: String, attribute: "stroke-color" })
], g14.prototype, "strokeColor");
y14([
  Mt({ type: Number, attribute: "stroke-width" })
], g14.prototype, "strokeWidth");
y14([
  Mt({ type: String, attribute: "fill-color" })
], g14.prototype, "fillColor");
y14([
  Mt({ type: Array })
], g14.prototype, "transform");
y14([
  Mt({ type: Array, attribute: "transform-origin" })
], g14.prototype, "transformOrigin");
y14([
  Mt({ type: Array, attribute: "draw-origin" })
], g14.prototype, "drawOrigin");
y14([
  Mt({ type: Array, attribute: "z-index" })
], g14.prototype, "zIndex");
customElements.get("frc-canvas-text") || customElements.define("frc-canvas-text", g14);
var pt6 = T8(class extends _4 {
  constructor() {
    super(...arguments), this.key = d;
  }
  render(n33, t19) {
    return this.key = n33, t19;
  }
  update(n33, [t19, r24]) {
    return t19 !== this.key && (f10(n33), this.key = t19), r24;
  }
});
var D9 = (n33) => n33 ?? d;
var ct7 = Object.defineProperty;
var $10 = (n33, t19, r24, o12) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && ct7(t19, r24, e11), e11;
};
var U9 = class U10 extends H {
  constructor() {
    super(...arguments), this.src = "", this.width = null, this.height = null, this.origin = [0, 0], this.disabled = false, this.hideCrosshair = false, this.crosshairColor = "white", this.image = new Image(), this.connected = false, this.throttleUpdateImage = ot(() => this.updateImage(), 5e3), this.onImageLoadBound = this.onImageLoad.bind(this), this.onImageErrorBound = this.onImageError.bind(this);
  }
  getImageSize(t19) {
    const r24 = {
      width: this.width || t19.width,
      height: this.height || t19.height
    };
    return this.image.height / this.image.width * r24.width > r24.height ? {
      height: r24.height,
      width: this.image.width / this.image.height * r24.height
    } : {
      height: this.image.height / this.image.width * r24.width,
      width: r24.width
    };
  }
  draw({ ctx: t19, canvas: r24 }) {
    const { width: o12, height: e11 } = this.getImageSize(r24), s18 = {
      width: this.width || r24.width,
      height: this.height || r24.height
    }, [a22, d34] = this.origin ?? [0, 0];
    if (t19.translate(a22, d34), !!this.connected)
      try {
        const l25 = (s18.width - o12) / 2, h26 = (s18.height - e11) / 2;
        t19.drawImage(this.image, l25, h26, o12, e11), this.hideCrosshair || (t19.strokeStyle = this.crosshairColor || "white", t19.lineWidth = 1, t19.beginPath(), t19.setLineDash([7, 7]), t19.moveTo(l25, h26 + e11 / 2), t19.lineTo(l25 + o12, h26 + e11 / 2), t19.stroke(), t19.beginPath(), t19.setLineDash([5, 5]), t19.moveTo(l25 + o12 / 2, h26), t19.lineTo(l25 + o12 / 2, h26 + e11), t19.stroke());
      } catch {
        this.throttleUpdateImage();
      }
  }
  disconnectedCallback() {
    super.disconnectedCallback(), clearTimeout(this.loadedTimeout), this.image.src = "";
  }
  connectedCallback() {
    super.connectedCallback(), this.throttleUpdateImage();
  }
  isImageLoaded() {
    return this.image.complete && this.image.naturalHeight !== 0;
  }
  updateImage() {
    if (clearTimeout(this.loadedTimeout), !this.disabled) {
      if (!this.isConnected) {
        this.setConnected(false);
        return;
      }
      this.isImageLoaded() || (this.loadedTimeout = setTimeout(() => {
        this.throttleUpdateImage();
      }, 5e3), this.image.removeEventListener("load", this.onImageLoadBound), this.image.removeEventListener("error", this.onImageErrorBound), this.image.src = "", this.image = new Image(), this.setConnected(false), this.image.src = this.src ?? "", this.image.addEventListener("load", this.onImageLoadBound), this.image.addEventListener("error", this.onImageErrorBound));
    }
  }
  setConnected(t19) {
    this.connected && !t19 ? (this.connected = false, this.dispatchDisconnect()) : !this.connected && t19 && (this.connected = true, this.dispatchConnect());
  }
  onImageLoad() {
    this.setConnected(true), clearTimeout(this.loadedTimeout);
  }
  onImageError() {
    this.throttleUpdateImage();
  }
  dispatchConnect() {
    this.dispatchEvent(
      new CustomEvent("connect", {
        bubbles: true,
        composed: true
      })
    );
  }
  dispatchDisconnect() {
    this.dispatchEvent(
      new CustomEvent("disconnect", {
        bubbles: true,
        composed: true
      })
    );
  }
  updated(t19) {
    t19.has("src") && this.throttleUpdateImage(), t19.has("disabled") && (this.disabled ? (clearTimeout(this.loadedTimeout), this.image.src = "") : this.throttleUpdateImage());
  }
};
U9.styles = Ut`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    canvas {
      width: 100%;
      height: 100%;
    }
  `;
var k13 = U9;
$10([
  Mt({ type: String })
], k13.prototype, "src");
$10([
  Mt({ type: Number })
], k13.prototype, "width");
$10([
  Mt({ type: Number })
], k13.prototype, "height");
$10([
  Mt({ type: Array })
], k13.prototype, "origin");
$10([
  Mt({ type: Boolean })
], k13.prototype, "disabled");
$10([
  Mt({ type: Boolean, attribute: "hide-crosshair" })
], k13.prototype, "hideCrosshair");
$10([
  Mt({ type: String, attribute: "crosshair-color" })
], k13.prototype, "crosshairColor");
customElements.get("frc-canvas-mjpg-stream-instance") || customElements.define(
  "frc-canvas-mjpg-stream-instance",
  k13
);
var gt7 = Object.defineProperty;
var S10 = (n33, t19, r24, o12) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && gt7(t19, r24, e11), e11;
};
var E12;
var _9 = (E12 = class extends H {
  constructor() {
    super(...arguments), this.srcs = [], this.width = null, this.height = null, this.origin = [0, 0], this.waitImage = E12.DEFAULT_WAIT_IMAGE, this.hideCrosshair = false, this.crosshairColor = "white", this.waitImageElement = new Image();
  }
  getImageSize(t19) {
    const r24 = {
      width: this.width || t19.width,
      height: this.height || t19.height
    };
    return this.waitImageElement.height / this.waitImageElement.width * r24.width > r24.height ? {
      height: r24.height,
      width: this.waitImageElement.width / this.waitImageElement.height * r24.height
    } : {
      height: this.waitImageElement.height / this.waitImageElement.width * r24.width,
      width: r24.width
    };
  }
  draw(t19) {
    const { canvas: r24, ctx: o12 } = t19, e11 = [...this.streamInstances].find(
      (s18) => s18.src === this._connectedSrc
    );
    if (e11)
      e11.draw(t19);
    else {
      const { width: s18, height: a22 } = this.getImageSize(r24), d34 = {
        width: this.width || r24.width,
        height: this.height || r24.height
      }, [l25, h26] = this.origin ?? [0, 0];
      o12.translate(l25, h26);
      try {
        o12.drawImage(
          this.waitImageElement,
          (d34.width - s18) / 2,
          (d34.height - a22) / 2,
          s18,
          a22
        );
      } catch {
      }
    }
  }
  updated(t19) {
    t19.has("srcs") && this._connectedSrc && !this.srcs.includes(this._connectedSrc) && (this._connectedSrc = void 0), t19.has("waitImage") && (this.waitImageElement.src = this.waitImage);
  }
  onConnect(t19) {
    this._connectedSrc || (this._connectedSrc = t19);
  }
  onDisconnect(t19) {
    this._connectedSrc === t19 && (this._connectedSrc = void 0);
  }
  renderStreamInstance(t19) {
    return Ot`
      ${pt6(
      t19,
      Ot`
          <frc-canvas-mjpg-stream-instance
            @connect=${() => this.onConnect(t19)}
            @disconnect=${() => this.onDisconnect(t19)}
            src=${t19}
            width=${D9(this.width !== null ? this.width : void 0)}
            height=${D9(this.height !== null ? this.height : void 0)}
            .origin=${D9(this.origin !== null ? this.origin : void 0)}
            ?disabled=${this._connectedSrc && this._connectedSrc !== t19}
            ?hide-crosshair=${this.hideCrosshair}
            crosshair-color=${this.crosshairColor}
          ></frc-canvas-mjpg-stream-instance>
        `
    )}
    `;
  }
  render() {
    return Ot`
      ${this.srcs.map(
      (t19) => this.renderStreamInstance(t19.replace("mjpg:", ""))
    )}
    `;
  }
}, E12.DEFAULT_WAIT_IMAGE = "./no-camera-stream.jpg", E12);
S10([
  Mt({ type: Array })
], _9.prototype, "srcs");
S10([
  Mt({ type: Number })
], _9.prototype, "width");
S10([
  Mt({ type: Number })
], _9.prototype, "height");
S10([
  Mt({ type: Array })
], _9.prototype, "origin");
S10([
  Mt({ type: String, attribute: "wait-image" })
], _9.prototype, "waitImage");
S10([
  Mt({ type: Boolean, attribute: "hide-crosshair" })
], _9.prototype, "hideCrosshair");
S10([
  Mt({ type: String, attribute: "crosshair-color" })
], _9.prototype, "crosshairColor");
S10([
  n()
], _9.prototype, "_connectedSrc");
S10([
  st7("frc-canvas-mjpg-stream-instance")
], _9.prototype, "streamInstances");
var H7 = _9;
customElements.get("frc-canvas-mjpg-stream") || customElements.define("frc-canvas-mjpg-stream", H7);
var mt7 = Object.defineProperty;
var X6 = (n33, t19, r24, o12) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && mt7(t19, r24, e11), e11;
};
var Y4 = class Y5 extends H {
  constructor() {
    super(...arguments), this.width = null, this.backgroundColor = "black";
  }
  getCanvasCtx() {
    return this.canvas.getContext("2d");
  }
  drawChildren() {
    const t19 = {
      canvas: this.canvas,
      ctx: this.getCanvasCtx(),
      domRect: this.getBoundingClientRect()
    };
    [...this.children].forEach((r24) => {
      var s18;
      const o12 = this.getCanvasCtx();
      o12.save(), o12.beginPath();
      const e11 = r24;
      (s18 = e11.draw) == null || s18.call(e11, t19), o12.restore();
    });
  }
  drawBackground() {
    const t19 = this.getCanvasCtx();
    t19.save(), t19.fillStyle = this.backgroundColor, t19.fillRect(0, 0, this.canvas.width, this.canvas.height), t19.restore();
  }
  drawCanvas() {
    this.drawBackground(), this.drawChildren(), window.requestAnimationFrame(() => {
      this.drawCanvas();
    });
  }
  firstUpdated() {
    this.drawCanvas(), new ResizeObserver(() => this.resized()).observe(this), this.resized();
  }
  resized() {
    const t19 = this.getBoundingClientRect(), { width: r24, height: o12 } = t19;
    typeof this.width != "number" ? (this.canvas.width = r24, this.canvas.height = o12) : (this.canvas.width = this.width, this.canvas.height = this.width * o12 / r24);
  }
  render() {
    return Ot` <canvas></canvas> `;
  }
};
Y4.styles = Ut`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    canvas {
      width: 100%;
      height: 100%;
    }

    [part='box'] {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-content: center;
      flex-wrap: wrap;
      background-color: var(--box-color);
      text-align: center;
    }
  `;
var z9 = Y4;
X6([
  h("canvas")
], z9.prototype, "canvas");
X6([
  Mt({ type: Number })
], z9.prototype, "width");
X6([
  Mt({ type: String, attribute: "background-color" })
], z9.prototype, "backgroundColor");
customElements.get("frc-canvas") || customElements.define("frc-canvas", z9);
var ft8 = Object.defineProperty;
var j7 = (n33, t19, r24, o12) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && ft8(t19, r24, e11), e11;
};
var kt5 = {
  dashboard: {
    displayName: "Camera"
  },
  properties: {
    streams: { type: "Array" },
    backgroundColor: {
      type: "String",
      attribute: "background-color",
      defaultValue: "#000000",
      input: { type: "ColorPicker" }
    },
    waitImage: {
      type: "String",
      attribute: "wait-image"
      // input: { type: 'Upload' },
    },
    hideCrosshair: {
      type: "Boolean",
      attribute: "hide-crosshair"
    },
    crosshairColor: {
      type: "String",
      attribute: "crosshair-color",
      defaultValue: "#ffffff",
      input: { type: "ColorPicker" }
    }
  }
};
var F7 = class F8 extends H {
  constructor() {
    super(...arguments), this.streams = [], this.backgroundColor = "black", this.waitImage = H7.DEFAULT_WAIT_IMAGE, this.hideCrosshair = false, this.crosshairColor = "white";
  }
  render() {
    return Ot`
      <frc-canvas background-color=${this.backgroundColor}>
        <frc-canvas-mjpg-stream
          wait-image=${this.waitImage}
          crosshair-color=${this.crosshairColor}
          ?hide-crosshair=${this.hideCrosshair}
          .srcs=${this.streams}
        ></frc-canvas-mjpg-stream>
      </frc-canvas>
    `;
  }
};
F7.styles = Ut`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    frc-canvas {
      width: 100%;
      height: 100%;
    }
  `;
var T10 = F7;
j7([
  Mt({ type: Array })
], T10.prototype, "streams");
j7([
  Mt({ type: String, attribute: "background-color" })
], T10.prototype, "backgroundColor");
j7([
  Mt({ type: String, attribute: "wait-image" })
], T10.prototype, "waitImage");
j7([
  Mt({ type: Boolean, attribute: "hide-crosshair" })
], T10.prototype, "hideCrosshair");
j7([
  Mt({ type: String, attribute: "crosshair-color" })
], T10.prototype, "crosshairColor");
customElements.get("frc-camera-wrapper") || customElements.define("frc-camera-wrapper", T10);

// node_modules/@frc-web-components/fwc/dist/components/label.es.js
var b18 = Object.defineProperty;
var y15 = (n33, t19, r24, h26) => {
  for (var e11 = void 0, i27 = n33.length - 1, s18; i27 >= 0; i27--)
    (s18 = n33[i27]) && (e11 = s18(t19, r24, e11) || e11);
  return e11 && b18(t19, r24, e11), e11;
};
var x14 = {
  dashboard: {
    displayName: "Label",
    defaultHtml: '<frc-label text="label"></frc-label>'
  },
  properties: {
    text: { type: "String", primary: true }
  }
};
var p14 = class p15 extends H {
  constructor() {
    super(...arguments), this.text = "";
  }
  render() {
    return Ot`${this.text}`;
  }
};
p14.styles = Ut`
    :host {
      display: inline;
      font-size: inherit;
      font-family: inherit;
      font-weight: inherit;
      text-align: inherit;
      margin: 0;
      padding: 0;
      color: var(--frc-label-text-color, black);
    }
  `;
var l12 = p14;
y15([
  Mt({ type: String })
], l12.prototype, "text");
customElements.get("frc-label") || customElements.define("frc-label", l12);
var v16 = Object.defineProperty;
var m18 = (n33, t19, r24, h26) => {
  for (var e11 = void 0, i27 = n33.length - 1, s18; i27 >= 0; i27--)
    (s18 = n33[i27]) && (e11 = s18(t19, r24, e11) || e11);
  return e11 && v16(t19, r24, e11), e11;
};
var _10 = {
  dashboard: {
    displayName: "Number Label"
  },
  properties: {
    value: { type: "Number", primary: true },
    precision: { type: "Number", defaultValue: 2 }
  }
};
var c13 = class c14 extends H {
  constructor() {
    super(...arguments), this.value = 0, this.precision = 2;
  }
  render() {
    const t19 = Math.max(0, this.precision), r24 = this.value.toFixed(t19);
    return Ot`${r24}`;
  }
};
c13.styles = Ut`
    :host {
      display: inline;
      font-size: inherit;
      font-family: inherit;
      font-weight: inherit;
      text-align: inherit;
      margin: 0;
      padding: 0;
      color: var(--frc-label-text-color, black);
    }
  `;
var a12 = c13;
m18([
  Mt({ type: Number })
], a12.prototype, "value");
m18([
  Mt({ type: Number })
], a12.prototype, "precision");
customElements.get("frc-number-label") || customElements.define("frc-number-label", a12);

// node_modules/@frc-web-components/fwc/dist/components/preferences.es.js
var z10 = (r24) => {
  throw TypeError(r24);
};
var S11 = (r24, s18, e11) => s18.has(r24) || z10("Cannot " + e11);
var k14 = (r24, s18, e11) => (S11(r24, s18, "read from private field"), e11 ? e11.call(r24) : s18.get(r24));
var m19 = (r24, s18, e11) => s18.has(r24) ? z10("Cannot add the same private member more than once") : s18 instanceof WeakSet ? s18.add(r24) : s18.set(r24, e11);
var w14 = (r24, s18, e11, o12) => (S11(r24, s18, "write to private field"), o12 ? o12.call(r24, e11) : s18.set(r24, e11), e11);
var p16 = (r24, s18, e11) => (S11(r24, s18, "access private method"), e11);
var U11 = Object.defineProperty;
var $11 = (r24, s18, e11, o12) => {
  for (var i27 = void 0, t19 = r24.length - 1, n33; t19 >= 0; t19--)
    (n33 = r24[t19]) && (i27 = n33(s18, e11, i27) || i27);
  return i27 && U11(s18, e11, i27), i27;
};
var c15;
var O12;
var T11;
var g15;
var C11;
var j8 = class j9 extends H {
  constructor() {
    super(...arguments);
    m19(this, c15);
    this.sourceRoot = "", this.preferences = {}, this.search = "", this.hideTitle = false;
  }
  render() {
    return Ot`
      <div class="container">
        ${o6(!this.hideTitle, () => Ot` <header>Preferences</header> `)}

        <div class="search-input">
          <input
            placeholder="Search..."
            .value=${this.search}
            @input=${(e11) => {
      this.search = e11.target.value, p16(this, c15, T11).call(this);
    }}
          />
        </div>
        <div class="preferences-container">
          <div class="preferences">${p16(this, c15, C11).call(this, this.preferences)}</div>
        </div>
      </div>
    `;
  }
};
c15 = /* @__PURE__ */ new WeakSet(), O12 = function(e11, o12) {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        property: e11,
        value: o12
      },
      bubbles: true,
      composed: true
    })
  );
}, T11 = function() {
  this.dispatchEvent(
    new CustomEvent("search", {
      detail: {
        search: this.search
      },
      bubbles: true,
      composed: true
    })
  );
}, g15 = function(e11, o12, i27, t19) {
  i27[t19] = o12, p16(this, c15, O12).call(this, e11, o12), this.requestUpdate();
}, C11 = function(e11, o12) {
  const i27 = Object.entries(e11).filter(
    ([t19, n33]) => {
      const a22 = typeof o12 < "u" ? [o12, t19].join("/") : t19;
      return t19.startsWith(".") ? false : !this.search || typeof n33 == "object" ? true : a22.toLowerCase().includes(this.search.toLowerCase());
    }
  );
  return Ot`
      ${i27.map(([t19, n33]) => {
    const a22 = typeof o12 < "u" ? [o12, t19].join("/") : t19;
    return typeof n33 == "boolean" ? Ot`
            <label title=${a22}>${a22}</label>
            <input
              type="checkbox"
              .checked=${n33}
              @change=${(v30) => {
      p16(this, c15, g15).call(this, a22, v30.target.checked, e11, t19);
    }}
            />
          ` : typeof n33 == "number" ? Ot`
            <label title=${a22}>${a22}</label>
            <div class="number-input">
              <button
                @click=${() => {
      p16(this, c15, g15).call(this, a22, n33 - 1, e11, t19);
    }}
              >
                -
              </button>
              <input
                type="number"
                .value=${n33}
                @change=${(v30) => {
      p16(this, c15, g15).call(this, a22, parseFloat(v30.target.value), e11, t19);
    }}
              />
              <button
                @click=${() => {
      p16(this, c15, g15).call(this, a22, n33 + 1, e11, t19);
    }}
              >
                +
              </button>
            </div>
          ` : typeof n33 == "string" ? Ot`
            <label title=${a22}>${a22}</label>
            <input
              type="text"
              .value=${n33}
              @change=${(v30) => {
      p16(this, c15, g15).call(this, a22, v30.target.value, e11, t19);
    }}
            />
          ` : p16(this, c15, C11).call(this, n33, a22);
  })}
    `;
}, j8.styles = Ut`
    :host {
      display: inline-block;
      width: 250px;
      height: 250px;
      font-family: sans-serif;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 3px;
      height: 100%;
      width: 100%;
    }

    header {
      background: var(--frc-preferences-header-background-color, lightblue);
      color: var(--frc-preferences-label-color, black);
      text-align: center;
      padding: 5px 3px;
      border-radius: 3px;
      margin: 0 3px;
      font-size: 15px;
    }

    .search-input {
      padding: 0 3px;
    }

    .preferences-container {
      flex: 1;
      overflow: auto;
      width: 100%;
      box-sizing: border-box;

      .preferences {
        padding: 3px;
        display: inline-grid;
        grid-template-columns: repeat(2, 1fr);
        column-gap: 8px;
        row-gap: 5px;
        align-items: center;
        justify-items: start;
        font-family: sans-serif;
        box-sizing: border-box;
      }
    }

    input::placeholder {
      color: var(--frc-preferences-placeholder-text-color, #888);
    }

    input:not([type='checkbox']) {
      width: 100%;
      border: none;
      outline: none;
      padding: 2px 4px;
      box-sizing: border-box;
      border-radius: 2px;
    }

    input[type='checkbox'] {
      width: 20px;
      height: 20px;
      appearance: none;
      -webkit-appearance: none;
      display: flex;
      align-content: center;
      justify-content: center;
      font-size: 2rem;
      padding: 0.1rem;
      border-radius: 3px;
    }

    input[type='checkbox']::before {
      content: ' ';
      /* https://yoksel.github.io/url-encoder/ */
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 -960 960 960' width='24' style='&%2310; fill: white;&%2310;'%3E%3Cpath d='M382-218 130-470l75-75 177 177 375-375 75 75-450 450Z'/%3E%3C/svg%3E");
      width: 100%;
      background-size: 100% 100%;
      width: 100%;
      height: 100%;
      transform-origin: bottom left;
      transform: scale(0);
    }

    input[type='checkbox']:checked::before {
      transform: scale(1);
    }

    input[type='checkbox']:checked {
      background: #0c6ce9;
    }

    input {
      margin: 0;
      box-sizing: border-box;
      color: var(--frc-preferences-input-text-color, black);
      background: var(
        --frc-preferences-input-background-color,
        rgba(0, 0, 0, 0.1)
      );
    }

    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    /* Firefox */
    input[type='number'] {
      -moz-appearance: textfield;
    }

    .number-input {
      display: flex;
      background: var(
        --frc-preferences-input-background-color,
        rgba(0, 0, 0, 0.1)
      );
      box-sizing: border-box;
      height: 20px;
      border-radius: 2px;

      button {
        padding: 0;
        height: 100%;
        width: 20px;
        border: none;
        cursor: pointer;
        background: none;
        line-height: 20px;
        font-size: 15px;
        color: var(--frc-preferences-input-button-text-color, #444);
      }

      input {
        flex: 1;
        background: none;
        text-align: center;
      }
    }

    label {
      color: var(--frc-preferences-label-color, black);
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      width: 100%;
    }
  `;
var b19 = j8;
$11([
  Mt({ type: String, attribute: "source-root" })
], b19.prototype, "sourceRoot");
$11([
  Mt({ type: Object })
], b19.prototype, "preferences");
$11([
  Mt({ type: String })
], b19.prototype, "search");
$11([
  Mt({ type: Boolean, attribute: "hide-title" })
], b19.prototype, "hideTitle");
customElements.get("frc-preferences") || customElements.define("frc-preferences", b19);
var q7 = Object.defineProperty;
var f19 = (r24, s18, e11, o12) => {
  for (var i27 = void 0, t19 = r24.length - 1, n33; t19 >= 0; t19--)
    (n33 = r24[t19]) && (i27 = n33(s18, e11, i27) || i27);
  return i27 && q7(s18, e11, i27), i27;
};
var H8 = {
  dashboard: {
    displayName: "Preferences",
    defaultHtml: '<frc-preferences-wrapper source-key="/Preferences"></frc-preferences-wrapper>'
  },
  properties: {
    search: {
      type: "String"
    },
    hideTitle: {
      type: "Boolean",
      attribute: "hide-title"
    },
    source: { type: "Source", primary: true, input: { type: "None" } },
    sourceKey: {
      type: "String",
      attribute: "source-key",
      input: { type: "None" }
    },
    store: { type: "Store", property: "store" },
    sourceProvider: {
      type: "String",
      attribute: "source-provider",
      input: { type: "None" }
    },
    provider: { type: "SourceProvider", property: "provider" }
  }
};
var y16;
var x15;
var d15;
var _11;
var B8;
var N8;
var E13 = class E14 extends H {
  constructor() {
    super(...arguments);
    m19(this, d15);
    m19(this, y16);
    m19(this, x15);
    this.search = "", this.hideTitle = false, this.sourceKey = "", this.sourceProvider = "", w14(this, y16, {});
  }
  updated(e11) {
    (e11.has("sourceProvider") || e11.has("sourceKey") || e11.has("store")) && p16(this, d15, N8).call(this);
  }
  disconnectedCallback() {
    var e11;
    super.disconnectedCallback(), (e11 = k14(this, x15)) == null || e11.call(this);
  }
  render() {
    return Ot`
      <frc-preferences
        @change=${(e11) => p16(this, d15, _11).call(this, e11)}
        @search=${(e11) => p16(this, d15, B8).call(this, e11)}
        source-root=${this.sourceKey}
        search=${this.search}
        ?hide-title=${this.hideTitle}
        .preferences=${k14(this, y16)}
      ></frc-preferences>
    `;
  }
};
y16 = /* @__PURE__ */ new WeakMap(), x15 = /* @__PURE__ */ new WeakMap(), d15 = /* @__PURE__ */ new WeakSet(), _11 = function(e11) {
  var t19;
  const { property: o12, value: i27 } = e11.detail;
  (t19 = this.provider) == null || t19.userUpdate([this.sourceKey, o12].join("/"), i27);
}, B8 = function(e11) {
  const { search: o12 } = e11.detail;
  this.search = o12;
}, N8 = function() {
  var e11, o12;
  (e11 = k14(this, x15)) == null || e11.call(this), w14(this, x15, (o12 = this.store) == null ? void 0 : o12.subscribe(
    this.sourceProvider,
    this.sourceKey,
    () => {
      var t19;
      const i27 = (t19 = this.store) == null ? void 0 : t19.getSource(
        this.sourceProvider,
        this.sourceKey
      );
      w14(this, y16, (i27 == null ? void 0 : i27.getJson(false)) ?? {}), this.requestUpdate();
    },
    true
  ));
}, E13.styles = Ut`
    :host {
      display: inline-block;
      width: 250px;
      height: 250px;
    }

    frc-preferences {
      width: 100%;
      height: 100%;
    }
  `;
var u18 = E13;
f19([
  Mt({ type: String })
], u18.prototype, "search");
f19([
  Mt({ type: Boolean, attribute: "hide-title" })
], u18.prototype, "hideTitle");
f19([
  Mt({ type: String, attribute: "source-key" })
], u18.prototype, "sourceKey");
f19([
  Mt({ type: String, attribute: "source-provider" })
], u18.prototype, "sourceProvider");
f19([
  Mt({ type: Object })
], u18.prototype, "source");
f19([
  Mt({ type: Object, attribute: false })
], u18.prototype, "provider");
f19([
  Mt({ type: Object, attribute: false })
], u18.prototype, "store");
customElements.get("frc-preferences-wrapper") || customElements.define("frc-preferences-wrapper", u18);

// node_modules/@frc-web-components/fwc/dist/components/form-elements.es.js
var f20 = (a22) => {
  throw TypeError(a22);
};
var E15 = (a22, t19, e11) => t19.has(a22) || f20("Cannot " + e11);
var h15 = (a22, t19, e11) => t19.has(a22) ? f20("Cannot add the same private member more than once") : t19 instanceof WeakSet ? t19.add(a22) : t19.set(a22, e11);
var m20 = (a22, t19, e11) => (E15(a22, t19, "access private method"), e11);
var k15 = Object.defineProperty;
var s10 = (a22, t19, e11, y33) => {
  for (var r24 = void 0, n33 = a22.length - 1, d34; n33 >= 0; n33--)
    (d34 = a22[n33]) && (r24 = d34(t19, e11, r24) || r24);
  return r24 && k15(t19, e11, r24), r24;
};
var N9 = {
  dashboard: {
    displayName: "Checkbox Group",
    defaultHtml: `
      <frc-checkbox-group options='["1", "2", "3"]'>
      </frc-checkbox-group>
    `
  },
  properties: {
    disabled: { type: "Boolean", reflect: true },
    label: { type: "String" },
    options: { type: "Array" },
    selected: { type: "Array", changeEvent: "change", primary: true },
    direction: {
      type: "String",
      defaultValue: "vertical",
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["vertical", "horizontal"];
        }
      }
    }
  }
};
var u19;
var $12;
var g16 = class g17 extends H {
  constructor() {
    super(...arguments);
    h15(this, u19);
    this.disabled = false, this.label = "", this.options = [], this.selected = [], this.direction = "vertical";
  }
  render() {
    return Ot`
      <vaadin-checkbox-group
        .disabled=${this.disabled}
        .label=${this.label}
        theme=${this.direction}
        .value=${this.selected}
      >
        ${this.options.map(
      (e11) => Ot`
            <vaadin-checkbox value=${e11} @change=${() => m20(this, u19, $12).call(this)}
              >${e11}</vaadin-checkbox
            >
          `
    )}
      </vaadin-checkbox-group>
    `;
  }
};
u19 = /* @__PURE__ */ new WeakSet(), $12 = function() {
  this.selected = this.element.value;
  const e11 = new CustomEvent("change", {
    bubbles: true,
    composed: true,
    detail: { selected: this.selected }
  });
  this.dispatchEvent(e11);
}, g16.styles = Ut`
    :host {
      display: inline-block;
    }
  `;
var i13 = g16;
s10([
  Mt({ type: Boolean })
], i13.prototype, "disabled");
s10([
  Mt({ type: String })
], i13.prototype, "label");
s10([
  Mt({ type: Array })
], i13.prototype, "options");
s10([
  Mt({ type: Array })
], i13.prototype, "selected");
s10([
  Mt({ type: String })
], i13.prototype, "direction");
s10([
  h("vaadin-checkbox-group")
], i13.prototype, "element");
customElements.get("frc-checkbox-group") || customElements.define("frc-checkbox-group", i13);
var V7 = Object.defineProperty;
var p17 = (a22, t19, e11, y33) => {
  for (var r24 = void 0, n33 = a22.length - 1, d34; n33 >= 0; n33--)
    (d34 = a22[n33]) && (r24 = d34(t19, e11, r24) || r24);
  return r24 && V7(t19, e11, r24), r24;
};
var w15 = {
  dashboard: {
    displayName: "Radio Group",
    defaultHtml: `
      <frc-radio-group options='["1", "2", "3"]'>
      </frc-radio-group>
    `
  },
  properties: {
    disabled: { type: "Boolean", reflect: true },
    label: { type: "String" },
    options: { type: "Array" },
    selected: { type: "String", changeEvent: "change", primary: true },
    direction: {
      type: "String",
      defaultValue: "vertical",
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["vertical", "horizontal"];
        }
      }
    }
  }
};
var b20;
var B9;
var v17 = class v18 extends H {
  constructor() {
    super(...arguments);
    h15(this, b20);
    this.disabled = false, this.label = "", this.options = [], this.selected = "", this.direction = "vertical";
  }
  render() {
    return Ot`
      <vaadin-radio-group
        @value-changed=${(e11) => m20(this, b20, B9).call(this, e11)}
        .disabled=${this.disabled}
        .label=${this.label}
        theme=${this.direction}
        .value=${this.selected}
      >
        ${this.options.map(
      (e11) => Ot`
            <vaadin-radio-button value=${e11}>${e11}</vaadin-radio-button>
          `
    )}
      </vaadin-radio-group>
    `;
  }
};
b20 = /* @__PURE__ */ new WeakSet(), B9 = function(e11) {
  this.selected = e11.detail.value;
  const y33 = new CustomEvent("change", {
    bubbles: true,
    composed: true,
    detail: { selected: this.selected }
  });
  this.dispatchEvent(y33);
}, v17.styles = Ut`
    :host {
      display: inline-block;
    }
  `;
var l13 = v17;
p17([
  Mt({ type: Boolean })
], l13.prototype, "disabled");
p17([
  Mt({ type: String })
], l13.prototype, "label");
p17([
  Mt({ type: Array })
], l13.prototype, "options");
p17([
  Mt({ type: String })
], l13.prototype, "selected");
p17([
  Mt({ type: String })
], l13.prototype, "direction");
customElements.get("frc-radio-group") || customElements.define("frc-radio-group", l13);
var H9 = {
  "frc-checkbox-group": N9,
  "frc-radio-group": w15,
  "vaadin-combo-box": {
    dashboard: {
      displayName: "Combo Box",
      defaultHtml: `<vaadin-combo-box items='["Item 1", "Item 2"]' value="Item 1"></vaadin-combo-box>`
    },
    properties: {
      items: { type: "Array" },
      value: {
        type: "String",
        changeEvent: "value-changed",
        primary: true
      },
      allowCustomValue: { type: "Boolean", attribute: "allow-custom-value" },
      label: { type: "String" },
      placeholder: { type: "String" },
      disabled: { type: "Boolean", reflect: true },
      readonly: { type: "Boolean", reflect: true }
    }
  },
  "vaadin-number-field": {
    dashboard: {
      displayName: "Number Field",
      defaultHtml: '<vaadin-number-field label="Label" value="0"></vaadin-number-field>'
    },
    properties: {
      value: {
        type: "Number",
        defaultValue: 0,
        primary: true,
        reflect: true,
        changeEvent: "change"
      },
      label: { type: "String" },
      placeholder: { type: "String" },
      min: { type: "Number" },
      max: { type: "Number" },
      step: { type: "Number", defaultValue: 1 },
      hasControls: { type: "Boolean" },
      clearButtonVisible: {
        type: "Boolean",
        attribute: "clear-button-visible"
      },
      disabled: { type: "Boolean" },
      readonly: { type: "Boolean" }
    }
  },
  "vaadin-text-field": {
    dashboard: {
      displayName: "Text Field",
      defaultHtml: '<vaadin-text-field label="Label"></vaadin-text-field>'
    },
    properties: {
      value: {
        type: "String",
        primary: true,
        reflect: true,
        changeEvent: "change"
      },
      label: { type: "String" },
      placeholder: { type: "String" },
      clearButtonVisible: {
        type: "Boolean",
        attribute: "clear-button-visible"
      },
      disabled: { type: "Boolean" },
      readonly: { type: "Boolean" }
    }
  }
};

// node_modules/@frc-web-components/fwc/dist/components.es.js
var gr4 = {
  "frc-axis": O5,
  "frc-bar": _3,
  "frc-differential-drivebase": bt5,
  "frc-mecanum-drivebase": yt6,
  "frc-swerve-drivebase": wt4,
  "frc-icon": y6,
  "frc-3-axis-accelerometer": N5,
  "frc-accelerometer": b8,
  "frc-basic-fms-info": E7,
  "frc-boolean-box": C6,
  "frc-gauge": we4,
  "frc-gyro": z6,
  "frc-number-bar": k4,
  "frc-sendable-chooser": z7,
  "frc-sendable-chooser-wrapper": L5,
  "frc-voltage-view": k7,
  "frc-number-slider": $7,
  "frc-toggle-switch": w6,
  "frc-toggle-button": h8,
  "frc-toggle-group": k8,
  "frc-relay": _5,
  "frc-encoder": h12,
  "frc-network-alerts": u14,
  "frc-pid-command": G7,
  "frc-pid-controller": O9,
  "frc-profiled-pid-controller": R8,
  "frc-scoring-grid": D7,
  "frc-robot-command": P8,
  "frc-robot-subsystem": _8,
  "frc-mechanism2d-wrapper": O8,
  "frc-field-wrapper": mt,
  "frc-field-robot": yt,
  "frc-field-path": ft,
  "frc-camera-wrapper": kt5,
  "frc-label": x14,
  "frc-number-label": _10,
  "frc-preferences-wrapper": H8,
  ...Ki2,
  ...H9
};

// node_modules/@frc-web-components/fwc/dist/fwc.es.js
var ce6 = (a22, t19, i27) => {
  if (!t19.has(a22))
    throw TypeError("Cannot " + i27);
};
var w16 = (a22, t19, i27) => (ce6(a22, t19, "read from private field"), i27 ? i27.call(a22) : t19.get(a22));
var P10 = (a22, t19, i27) => {
  if (t19.has(a22))
    throw TypeError("Cannot add the same private member more than once");
  t19 instanceof WeakSet ? t19.add(a22) : t19.set(a22, i27);
};
var L6 = (a22, t19, i27, e11) => (ce6(a22, t19, "write to private field"), t19.set(a22, i27), i27);
var D10 = (a22, t19, i27) => (ce6(a22, t19, "access private method"), i27);
var Oi3 = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
var Rt6 = { exports: {} };
Rt6.exports;
(function(a22, t19) {
  (function(i27, e11) {
    var r24 = {};
    i27.PubSub ? (r24 = i27.PubSub, console.warn("PubSub already loaded, using existing version")) : (i27.PubSub = r24, e11(r24)), a22 !== void 0 && a22.exports && (t19 = a22.exports = r24), t19.PubSub = r24, a22.exports = t19 = r24;
  })(typeof window == "object" && window || Oi3, function(i27) {
    var e11 = {}, r24 = -1, _19 = "*";
    function h26(x34) {
      var o12;
      for (o12 in x34)
        if (Object.prototype.hasOwnProperty.call(x34, o12))
          return true;
      return false;
    }
    function u35(x34) {
      return function() {
        throw x34;
      };
    }
    function l25(x34, o12, n33) {
      try {
        x34(o12, n33);
      } catch (p26) {
        setTimeout(u35(p26), 0);
      }
    }
    function O20(x34, o12, n33) {
      x34(o12, n33);
    }
    function v30(x34, o12, n33, p26) {
      var T20 = e11[o12], E24 = p26 ? O20 : l25, k27;
      if (Object.prototype.hasOwnProperty.call(e11, o12))
        for (k27 in T20)
          Object.prototype.hasOwnProperty.call(T20, k27) && E24(T20[k27], x34, n33);
    }
    function y33(x34, o12, n33) {
      return function() {
        var p26 = String(x34), T20 = p26.lastIndexOf(".");
        for (v30(x34, x34, o12, n33); T20 !== -1; )
          p26 = p26.substr(0, T20), T20 = p26.lastIndexOf("."), v30(x34, p26, o12, n33);
        v30(x34, _19, o12, n33);
      };
    }
    function g31(x34) {
      var o12 = String(x34), n33 = !!(Object.prototype.hasOwnProperty.call(e11, o12) && h26(e11[o12]));
      return n33;
    }
    function C19(x34) {
      for (var o12 = String(x34), n33 = g31(o12) || g31(_19), p26 = o12.lastIndexOf("."); !n33 && p26 !== -1; )
        o12 = o12.substr(0, p26), p26 = o12.lastIndexOf("."), n33 = g31(o12);
      return n33;
    }
    function A17(x34, o12, n33, p26) {
      x34 = typeof x34 == "symbol" ? x34.toString() : x34;
      var T20 = y33(x34, o12, p26), E24 = C19(x34);
      return E24 ? (n33 === true ? T20() : setTimeout(T20, 0), true) : false;
    }
    i27.publish = function(x34, o12) {
      return A17(x34, o12, false, i27.immediateExceptions);
    }, i27.publishSync = function(x34, o12) {
      return A17(x34, o12, true, i27.immediateExceptions);
    }, i27.subscribe = function(x34, o12) {
      if (typeof o12 != "function")
        return false;
      x34 = typeof x34 == "symbol" ? x34.toString() : x34, Object.prototype.hasOwnProperty.call(e11, x34) || (e11[x34] = {});
      var n33 = "uid_" + String(++r24);
      return e11[x34][n33] = o12, n33;
    }, i27.subscribeAll = function(x34) {
      return i27.subscribe(_19, x34);
    }, i27.subscribeOnce = function(x34, o12) {
      var n33 = i27.subscribe(x34, function() {
        i27.unsubscribe(n33), o12.apply(this, arguments);
      });
      return i27;
    }, i27.clearAllSubscriptions = function() {
      e11 = {};
    }, i27.clearSubscriptions = function(x34) {
      var o12;
      for (o12 in e11)
        Object.prototype.hasOwnProperty.call(e11, o12) && o12.indexOf(x34) === 0 && delete e11[o12];
    }, i27.countSubscriptions = function(x34) {
      var o12, n33, p26 = 0;
      for (o12 in e11)
        if (Object.prototype.hasOwnProperty.call(e11, o12) && o12.indexOf(x34) === 0) {
          for (n33 in e11[o12])
            p26++;
          break;
        }
      return p26;
    }, i27.getSubscriptions = function(x34) {
      var o12, n33 = [];
      for (o12 in e11)
        Object.prototype.hasOwnProperty.call(e11, o12) && o12.indexOf(x34) === 0 && n33.push(o12);
      return n33;
    }, i27.unsubscribe = function(x34) {
      var o12 = function(f39) {
        var S21;
        for (S21 in e11)
          if (Object.prototype.hasOwnProperty.call(e11, S21) && S21.indexOf(f39) === 0)
            return true;
        return false;
      }, n33 = typeof x34 == "string" && (Object.prototype.hasOwnProperty.call(e11, x34) || o12(x34)), p26 = !n33 && typeof x34 == "string", T20 = typeof x34 == "function", E24 = false, k27, c27, b33;
      if (n33) {
        i27.clearSubscriptions(x34);
        return;
      }
      for (k27 in e11)
        if (Object.prototype.hasOwnProperty.call(e11, k27)) {
          if (c27 = e11[k27], p26 && c27[x34]) {
            delete c27[x34], E24 = x34;
            break;
          }
          if (T20)
            for (b33 in c27)
              Object.prototype.hasOwnProperty.call(c27, b33) && c27[b33] === x34 && (delete c27[b33], E24 = true);
        }
      return E24;
    };
  });
})(Rt6, Rt6.exports);
var q8 = Rt6.exports;
var At6 = function() {
  return At6 = Object.assign || function(a22) {
    for (var t19, i27 = 1, e11 = arguments.length; i27 < e11; i27++) {
      t19 = arguments[i27];
      for (var r24 in t19)
        Object.prototype.hasOwnProperty.call(t19, r24) && (a22[r24] = t19[r24]);
    }
    return a22;
  }, At6.apply(this, arguments);
};
function Si3(a22) {
  return a22.toLowerCase();
}
var Ti3 = [/([a-z0-9])([A-Z])/g, /([A-Z])([A-Z][a-z])/g];
var ki5 = /[^A-Z0-9]+/gi;
function Ci3(a22, t19) {
  t19 === void 0 && (t19 = {});
  for (var i27 = t19.splitRegexp, e11 = i27 === void 0 ? Ti3 : i27, r24 = t19.stripRegexp, _19 = r24 === void 0 ? ki5 : r24, h26 = t19.transform, u35 = h26 === void 0 ? Si3 : h26, l25 = t19.delimiter, O20 = l25 === void 0 ? " " : l25, v30 = Se5(Se5(a22, e11, "$1\0$2"), _19, "\0"), y33 = 0, g31 = v30.length; v30.charAt(y33) === "\0"; )
    y33++;
  for (; v30.charAt(g31 - 1) === "\0"; )
    g31--;
  return v30.slice(y33, g31).split("\0").map(u35).join(O20);
}
function Se5(a22, t19, i27) {
  return t19 instanceof RegExp ? a22.replace(t19, i27) : t19.reduce(function(e11, r24) {
    return e11.replace(r24, i27);
  }, a22);
}
function _i5(a22, t19) {
  var i27 = a22.charAt(0), e11 = a22.substr(1).toLowerCase();
  return t19 > 0 && i27 >= "0" && i27 <= "9" ? "_" + i27 + e11 : "" + i27.toUpperCase() + e11;
}
function Ri3(a22) {
  return a22.charAt(0).toUpperCase() + a22.slice(1).toLowerCase();
}
function Ai5(a22, t19) {
  return t19 === void 0 && (t19 = {}), Ci3(a22, At6({ delimiter: "", transform: _i5 }, t19));
}
function Ni5(a22, t19) {
  return t19 === 0 ? a22.toLowerCase() : _i5(a22, t19);
}
function Pi3(a22, t19) {
  return t19 === 0 ? a22.toLowerCase() : Ri3(a22);
}
function Li3(a22, t19) {
  return t19 === void 0 && (t19 = {}), Ai5(a22, At6({ transform: Ni5 }, t19));
}
function Di2(a22) {
  switch (a22) {
    case "String":
      return "";
    case "Boolean":
      return false;
    case "Number":
      return 0;
    case "Array":
      return [];
    case "SourceProvider":
      return;
    case "Store":
      return;
    case "Object":
    default:
      return {};
  }
}
var Wi2 = (a22, {
  property: t19 = a22,
  description: i27 = "",
  type: e11 = "String",
  defaultValue: r24,
  attribute: _19 = a22.toLowerCase(),
  reflect: h26 = false,
  primary: u35 = false,
  changeEvent: l25,
  ...O20
} = {}) => {
  const v30 = typeof e11 == "function" ? e11.name : e11, y33 = r24 ?? Di2(v30);
  return {
    property: t19,
    description: i27,
    type: v30,
    defaultValue: y33,
    attribute: _19,
    reflect: !!h26,
    primary: !!u35,
    changeEvent: l25,
    ...O20
  };
};
var oi5 = ({
  description: a22 = "",
  group: t19 = "default",
  defaultSourceKey: i27,
  defaultSourceProvider: e11,
  dashboard: r24,
  properties: _19 = {},
  events: h26 = [],
  slots: u35 = [],
  cssProperties: l25 = [],
  cssParts: O20 = [],
  ...v30
} = {}) => ({
  description: a22,
  group: t19,
  defaultSourceKey: i27,
  defaultSourceProvider: e11,
  dashboard: {
    topLevel: true,
    ...r24
  },
  properties: Object.fromEntries(
    Object.entries(_19).map(([y33, g31]) => [y33, Wi2(y33, g31)])
  ),
  events: h26,
  slots: u35,
  cssProperties: l25,
  cssParts: O20,
  ...v30
});
var xt5 = (a22) => typeof a22 == "string" ? "String" : typeof a22 == "number" ? "Number" : typeof a22 == "boolean" ? "Boolean" : a22 instanceof Array ? "Array" : a22 instanceof Object ? "Object" : null;
var J7 = (a22, t19) => {
  if (a22 === t19)
    return true;
  if (typeof a22 != typeof t19)
    return false;
  if (a22 instanceof Array && t19 instanceof Array) {
    if (a22.length !== t19.length)
      return false;
    for (let i27 = 0; i27 < a22.length; i27++)
      if (a22[i27] !== t19[i27])
        return false;
    return true;
  }
  return false;
};
function ee5() {
}
var de6 = class _de {
  static prop2PropValue(t19) {
    if (t19 === null)
      return null;
    if (t19 instanceof Array)
      return t19;
    if (typeof t19 == "string")
      try {
        const i27 = JSON.parse(t19);
        return i27 instanceof Array ? i27 : [];
      } catch {
        return [];
      }
    return [];
  }
  static prop2AttrValue(t19) {
    const i27 = _de.prop2PropValue(t19);
    return i27 === null ? null : JSON.stringify(i27);
  }
  static attr2PropValue(t19) {
    if (t19 === null)
      return null;
    try {
      const i27 = JSON.parse(t19);
      return i27 instanceof Array ? i27 : [];
    } catch {
      return [];
    }
  }
};
var Mi3 = class {
  static prop2PropValue(t19) {
    return t19 === null ? null : !!t19;
  }
  static prop2AttrValue(t19) {
    return t19 ? "" : null;
  }
  static attr2PropValue(t19) {
    return t19 !== null;
  }
};
var ji = class {
  static prop2PropValue(t19) {
    return t19 === null ? null : parseFloat(t19);
  }
  static prop2AttrValue(t19) {
    return t19 === null ? null : parseFloat(t19).toString();
  }
  static attr2PropValue(t19, i27) {
    return t19 === null ? null : parseFloat(t19);
  }
};
var ge4 = class _ge {
  static prop2PropValue(t19) {
    if (t19 === null)
      return null;
    if (t19 instanceof Object)
      return t19;
    if (typeof t19 == "string")
      try {
        const i27 = JSON.parse(t19);
        return i27 instanceof Object ? i27 : {};
      } catch {
        return {};
      }
    return {};
  }
  static prop2AttrValue(t19) {
    const i27 = _ge.prop2PropValue(t19);
    return i27 === null ? null : JSON.stringify(i27);
  }
  static attr2PropValue(t19) {
    if (t19 === null)
      return null;
    try {
      const i27 = JSON.parse(t19);
      return i27 instanceof Object ? i27 : {};
    } catch {
      return {};
    }
  }
};
var Ii3 = class {
  static prop2PropValue(t19) {
    return t19 === null ? null : (t19 == null ? void 0 : t19.toString()) || "";
  }
  static prop2AttrValue(t19) {
    return t19 === null ? null : (t19 == null ? void 0 : t19.toString()) || "";
  }
  static attr2PropValue(t19, i27) {
    return t19 === null ? null : t19;
  }
};
var be5 = {
  Array: de6,
  Boolean: Mi3,
  Number: ji,
  Object: ge4,
  String: Ii3
};
var Z6 = (a22, t19) => {
  var i27;
  return ((i27 = be5[t19]) == null ? void 0 : i27.prop2PropValue(a22)) ?? null;
};
var Te5 = (a22, t19) => {
  var i27;
  return ((i27 = be5[t19]) == null ? void 0 : i27.prop2AttrValue(a22)) ?? null;
};
var ke5 = (a22, t19) => {
  var i27;
  return ((i27 = be5[t19]) == null ? void 0 : i27.attr2PropValue(a22)) ?? null;
};
var I8;
var K7;
var U12;
var z11;
var ut7;
var ie5;
var ui5;
var Et6;
var Mt7;
var Ot7;
var se4;
var li5 = class ne5 {
  constructor(t19, i27) {
    P10(this, ie5), P10(this, Et6), P10(this, Ot7), P10(this, I8, void 0), P10(this, K7, void 0), P10(this, U12, false), P10(this, z11, void 0), P10(this, ut7, void 0), ne5.UNIQUE_ID += 1, L6(this, ut7, Symbol(`WEBBIT_PROPERTY_CHANGE_${ne5.UNIQUE_ID}`)), L6(this, I8, t19), L6(this, K7, i27), L6(this, U12, false), L6(this, z11, this.value), D10(this, ie5, ui5).call(this);
  }
  get value() {
    const {
      reflect: t19,
      attribute: i27,
      property: e11,
      type: r24
    } = w16(this, K7);
    return typeof e11 == "string" && e11 in w16(this, I8) ? w16(this, I8)[e11] : ke5(i27 && t19 ? w16(this, I8).getAttribute(i27) : i27 ? w16(this, I8).getAttribute(i27) : null, r24);
  }
  set value(t19) {
    const { attribute: i27, property: e11, type: r24 } = w16(this, K7), _19 = xt5(t19), h26 = this.value;
    if (t19 === null || typeof t19 > "u") {
      if (t19 === h26)
        return;
    } else if (J7(Z6(h26, _19), t19))
      return;
    if (e11) {
      const u35 = Z6(t19, r24), l25 = Z6(u35, _19);
      J7(t19, l25) && (w16(this, I8)[e11] = u35);
    } else if (i27) {
      const u35 = Te5(t19, r24), l25 = ke5(u35, _19);
      J7(t19, l25) && (u35 === null ? w16(this, I8).removeAttribute(i27) : w16(this, I8).setAttribute(i27, u35));
    }
  }
  isAttribute() {
    return typeof w16(this, K7).attribute == "string";
  }
  getStoredAttribute() {
    const { type: t19 } = w16(this, K7);
    return Te5(w16(this, z11), t19);
  }
  connect() {
    if (!w16(this, U12)) {
      const t19 = this.value;
      L6(this, z11, typeof t19 < "u" ? t19 : w16(this, K7).defaultValue), L6(this, U12, true);
    }
  }
  disconnect() {
    w16(this, U12) && (L6(this, U12, false), D10(this, Ot7, se4).call(this));
  }
  isConnected() {
    return w16(this, U12);
  }
  update(t19) {
    this.connect(), this.value = t19;
  }
  subscribe(t19, i27 = false) {
    q8.subscribe(w16(this, ut7), (e11, r24) => {
      (w16(this, U12) || i27) && t19(r24);
    });
  }
  getProperty() {
    return w16(this, K7);
  }
  setStoredValue(t19) {
    L6(this, z11, t19), this.isConnected() || D10(this, Ot7, se4).call(this);
  }
  getStoredValue() {
    return w16(this, z11);
  }
};
I8 = /* @__PURE__ */ new WeakMap(), K7 = /* @__PURE__ */ new WeakMap(), U12 = /* @__PURE__ */ new WeakMap(), z11 = /* @__PURE__ */ new WeakMap(), ut7 = /* @__PURE__ */ new WeakMap(), ie5 = /* @__PURE__ */ new WeakSet(), ui5 = function() {
  const { changeEvent: a22, attribute: t19 } = w16(this, K7);
  if (a22) {
    const i27 = () => {
      D10(this, Et6, Mt7).call(this);
    };
    w16(this, I8).addEventListener(a22, i27, false);
  } else
    t19 && new MutationObserver(() => {
      D10(this, Et6, Mt7).call(this);
    }).observe(w16(this, I8), {
      attributes: true,
      attributeFilter: [t19]
    });
}, Et6 = /* @__PURE__ */ new WeakSet(), Mt7 = function() {
  const { value: a22 } = this;
  this.isConnected() || L6(this, z11, a22), q8.publish(w16(this, ut7), a22);
}, Ot7 = /* @__PURE__ */ new WeakSet(), se4 = function() {
  this.value = w16(this, z11);
}, li5.UNIQUE_ID = 0;
var Bi2 = li5;
function St5(a22) {
  return Li3(a22, { transform: Pi3 });
}
function Ce5(a22, t19) {
  const i27 = Object.entries(a22).find(([_19]) => St5(_19) === t19);
  if (!i27)
    return;
  const [e11, r24] = i27;
  return { name: e11, source: r24 };
}
var j10;
var F9;
var Q6;
var B11;
var nt8;
var lt8;
var tt7;
var rt7;
var at6;
var G8;
var _t5;
var re5;
var hi5;
var ae5;
var Re5;
var ht8;
var Nt6;
var _e5;
var Ae5;
var oe5;
var Ne5;
var ue5;
var pi5;
var fi5 = class le4 {
  constructor(t19, i27, e11) {
    P10(this, re5), P10(this, ae5), P10(this, ht8), P10(this, _e5), P10(this, oe5), P10(this, ue5), P10(this, j10, void 0), P10(this, F9, void 0), P10(this, Q6, void 0), P10(this, B11, void 0), P10(this, nt8, void 0), P10(this, lt8, void 0), P10(this, tt7, false), P10(this, rt7, void 0), P10(this, at6, {}), P10(this, G8, ee5), P10(this, _t5, void 0), le4.UNIQUE_ID += 1, L6(this, _t5, Symbol(`WEBBIT_ANY_PROPERTY_CHANGE_${le4.UNIQUE_ID}`)), L6(this, j10, t19), L6(this, F9, i27), L6(this, Q6, oi5(e11 || {
      name: t19.tagName.toLowerCase()
    }));
    const r24 = Object.entries(w16(this, Q6).properties).filter(([, _19]) => !["SourceProvider", "Store", "Source"].includes(_19.type)).map(([_19, h26]) => ({ ...h26, name: _19 }));
    L6(this, B11, new Map(
      r24.map((_19) => {
        const h26 = new Bi2(w16(this, j10), _19);
        return h26.subscribe((u35) => {
          h26.isConnected() && D10(this, ue5, pi5).call(this, _19, u35), q8.publish(w16(this, _t5), {
            property: _19,
            value: u35,
            connected: w16(this, tt7)
          });
        }, true), [_19.name, h26];
      })
    )), L6(this, nt8, r24.find(({ primary: _19 }) => _19)), L6(this, lt8, w16(this, nt8) ? w16(this, B11).get(w16(this, nt8).name) : void 0), L6(this, rt7, D10(this, re5, hi5).call(this)), w16(this, F9).defaultSourceProviderSet((_19) => {
      this.sourceProvider === null && (this.sourceProvider = _19);
    }), this.connect();
  }
  get sourceProvider() {
    return w16(this, j10).getAttribute("source-provider") ?? void 0;
  }
  set sourceProvider(t19) {
    typeof t19 < "u" ? w16(this, j10).setAttribute("source-provider", t19) : w16(this, j10).removeAttribute("source-provider");
  }
  get sourceKey() {
    return w16(this, j10).getAttribute("source-key") ?? void 0;
  }
  set sourceKey(t19) {
    typeof t19 < "u" ? w16(this, j10).setAttribute("source-key", t19) : w16(this, j10).removeAttribute("source-key");
  }
  get source() {
    if (typeof this.sourceProvider < "u" && typeof this.sourceKey < "u")
      return w16(this, F9).getSource(this.sourceProvider, this.sourceKey);
  }
  get hasSource() {
    return typeof this.source < "u";
  }
  subscribe(t19) {
    const i27 = q8.subscribe(w16(this, _t5), (e11, r24) => {
      t19(r24);
    });
    return () => q8.unsubscribe(i27);
  }
  getPropertyHandler(t19) {
    return w16(this, B11).get(t19);
  }
  connect() {
    L6(this, tt7, true), w16(this, rt7).connect(), D10(this, ht8, Nt6).call(this);
  }
  disconnect() {
    L6(this, tt7, false), w16(this, rt7).disconnect(), D10(this, ht8, Nt6).call(this);
  }
  setDefaultPropertyValue(t19, i27) {
    w16(this, at6)[t19] = i27;
  }
  getDefaultPropertyValue(t19) {
    return w16(this, at6)[t19];
  }
  getDefaultPropertyValues() {
    return w16(this, at6);
  }
  getConfig() {
    return w16(this, Q6);
  }
};
j10 = /* @__PURE__ */ new WeakMap(), F9 = /* @__PURE__ */ new WeakMap(), Q6 = /* @__PURE__ */ new WeakMap(), B11 = /* @__PURE__ */ new WeakMap(), nt8 = /* @__PURE__ */ new WeakMap(), lt8 = /* @__PURE__ */ new WeakMap(), tt7 = /* @__PURE__ */ new WeakMap(), rt7 = /* @__PURE__ */ new WeakMap(), at6 = /* @__PURE__ */ new WeakMap(), G8 = /* @__PURE__ */ new WeakMap(), _t5 = /* @__PURE__ */ new WeakMap(), re5 = /* @__PURE__ */ new WeakSet(), hi5 = function() {
  const a22 = new MutationObserver(() => {
    D10(this, ht8, Nt6).call(this);
  });
  return {
    connect: () => {
      a22.observe(w16(this, j10), {
        attributes: true,
        attributeFilter: ["source-provider", "source-key"]
      });
    },
    disconnect: () => {
      a22.disconnect();
    }
  };
}, ae5 = /* @__PURE__ */ new WeakSet(), Re5 = function() {
  const a22 = w16(this, j10).closest("[default-source-provider]");
  return (a22 == null ? void 0 : a22.getAttribute("default-source-provider")) ?? void 0;
}, ht8 = /* @__PURE__ */ new WeakSet(), Nt6 = function() {
  if (D10(this, _e5, Ae5).call(this), !w16(this, tt7)) {
    w16(this, G8).call(this), L6(this, G8, ee5), w16(this, B11).forEach((a22) => a22.disconnect());
    return;
  }
  this.sourceKey || (this.sourceKey = w16(this, Q6).defaultSourceKey), this.sourceProvider || (this.sourceProvider = w16(this, Q6).defaultSourceProvider || D10(this, ae5, Re5).call(this) || w16(this, F9).getDefaultSourceProvider()), !this.sourceKey || !this.sourceProvider ? (w16(this, G8).call(this), L6(this, G8, ee5), w16(this, B11).forEach((a22) => a22.disconnect())) : (w16(this, G8).call(this), w16(this, B11).forEach((a22) => {
    a22.disconnect();
  }), L6(this, G8, w16(this, F9).subscribe(
    this.sourceProvider,
    this.sourceKey,
    (a22, t19, i27) => {
      D10(this, oe5, Ne5).call(this, t19, i27);
    },
    true
  )));
}, _e5 = /* @__PURE__ */ new WeakSet(), Ae5 = function() {
  const a22 = this.sourceProvider ? w16(this, F9).getSourceProvider(this.sourceProvider) : void 0;
  Object.entries(w16(this, Q6).properties).forEach(([, { property: t19, type: i27 }]) => {
    t19 && (i27 === "SourceProvider" ? w16(this, j10)[t19] = a22 : i27 === "Store" ? w16(this, j10)[t19] = w16(this, F9) : i27 === "Source" && (w16(this, j10)[t19] = this.source));
  });
}, oe5 = /* @__PURE__ */ new WeakSet(), Ne5 = function(a22, t19) {
  var i27, e11;
  if (typeof this.source > "u")
    w16(this, B11).forEach((r24) => {
      r24.disconnect();
    });
  else if (this.source.hasChildren()) {
    const r24 = this.source.getChildren();
    if (a22 === t19) {
      const _19 = Object.entries(r24);
      [...w16(this, B11).entries()].forEach(([h26, u35]) => {
        const l25 = _19.find(([O20]) => St5(O20) === h26);
        if (l25) {
          const [, O20] = l25;
          u35.update(O20.getSourceValue());
        }
      });
    } else {
      const _19 = St5(t19.replace(`${a22}/`, ""));
      if (w16(this, B11).has(_19)) {
        const h26 = w16(this, B11).get(_19), u35 = (e11 = (i27 = Ce5(r24, _19)) == null ? void 0 : i27.source) == null ? void 0 : e11.getSourceValue();
        typeof u35 > "u" ? h26 == null || h26.disconnect() : h26 == null || h26.update(u35);
      }
    }
  } else
    w16(this, lt8) && w16(this, lt8).update(this.source.getSourceValue());
}, ue5 = /* @__PURE__ */ new WeakSet(), pi5 = function({ name: a22, primary: t19 }, i27) {
  if (typeof this.source > "u")
    return;
  const e11 = xt5(i27), r24 = this.source.getChildren(), _19 = Object.entries(r24);
  if (this.source.hasChildren())
    if (i27 === null) {
      const h26 = _19.find(([u35]) => St5(u35) === a22);
      if (h26) {
        const [, u35] = h26;
        u35.getSourceValue() !== null && u35.setSourceValue(i27);
      }
    } else {
      const h26 = Ce5(r24, a22);
      if (!h26)
        return;
      const u35 = xt5(h26.source.getSourceValue()) || e11, l25 = Z6(i27, u35), O20 = Z6(l25, e11);
      J7(i27, O20) && !J7(h26.source.getSourceValue(), l25) && h26.source.setSourceValue(i27);
    }
  else {
    if (!t19)
      return;
    if (i27 === null)
      this.source.getSourceValue() !== null && this.source.setSourceValue(i27);
    else {
      const h26 = xt5(this.source.getSourceValue()) || e11, u35 = Z6(i27, h26), l25 = Z6(u35, e11);
      J7(i27, l25) && !J7(this.source.getSourceValue(), u35) && this.source.setSourceValue(u35);
    }
  }
}, fi5.UNIQUE_ID = 0;
var Ki3 = fi5;
var Pe5 = function(a22) {
  var t19 = a22, i27, e11 = {
    a: 0,
    b: 0,
    c: 0
  }, r24 = [], _19 = /(\[[^\]]+\])/g, h26 = /(#[^\#\s\+>~\.\[:\)]+)/g, u35 = /(\.[^\s\+>~\.\[:\)]+)/g, l25 = /(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi, O20 = /(:(?!not|global|local)[\w-]+\([^\)]*\))/gi, v30 = /(:(?!not|global|local)[^\s\+>~\.\[:]+)/g, y33 = /([^\s\+>~\.\[:]+)/g;
  return i27 = function(g31, C19) {
    var A17, x34, o12, n33, p26, T20;
    if (g31.test(t19))
      for (A17 = t19.match(g31), x34 = 0, o12 = A17.length; x34 < o12; x34 += 1)
        e11[C19] += 1, n33 = A17[x34], p26 = t19.indexOf(n33), T20 = n33.length, r24.push({
          selector: a22.substr(p26, T20),
          type: C19,
          index: p26,
          length: T20
        }), t19 = t19.replace(n33, Array(T20 + 1).join(" "));
  }, function() {
    var g31 = function(o12) {
      var n33, p26, T20, E24;
      if (o12.test(t19))
        for (n33 = t19.match(o12), p26 = 0, T20 = n33.length; p26 < T20; p26 += 1)
          E24 = n33[p26], t19 = t19.replace(E24, Array(E24.length + 1).join("A"));
    }, C19 = /\\[0-9A-Fa-f]{6}\s?/g, A17 = /\\[0-9A-Fa-f]{1,5}\s/g, x34 = /\\./g;
    g31(C19), g31(A17), g31(x34);
  }(), function() {
    var g31 = /{[^]*/gm, C19, A17, x34, o12;
    if (g31.test(t19))
      for (C19 = t19.match(g31), A17 = 0, x34 = C19.length; A17 < x34; A17 += 1)
        o12 = C19[A17], t19 = t19.replace(o12, Array(o12.length + 1).join(" "));
  }(), i27(_19, "b"), i27(h26, "a"), i27(u35, "b"), i27(l25, "c"), i27(O20, "b"), i27(v30, "b"), t19 = t19.replace(/[\*\s\+>~]/g, " "), t19 = t19.replace(/[#\.]/g, " "), t19 = t19.replace(/:not/g, "    "), t19 = t19.replace(/:local/g, "      "), t19 = t19.replace(/:global/g, "       "), t19 = t19.replace(/[\(\)]/g, " "), i27(y33, "c"), r24.sort(function(g31, C19) {
    return g31.index - C19.index;
  }), {
    selector: a22,
    specificity: "0," + e11.a.toString() + "," + e11.b.toString() + "," + e11.c.toString(),
    specificityArray: [0, e11.a, e11.b, e11.c],
    parts: r24
  };
};
var Le5 = function(a22, t19) {
  var i27, e11, r24;
  if (typeof a22 == "string") {
    if (a22.indexOf(",") !== -1)
      throw "Invalid CSS selector";
    i27 = Pe5(a22).specificityArray;
  } else if (Array.isArray(a22)) {
    if (a22.filter(function(_19) {
      return typeof _19 == "number";
    }).length !== 4)
      throw "Invalid specificity array";
    i27 = a22;
  } else
    throw "Invalid CSS selector or specificity array";
  if (typeof t19 == "string") {
    if (t19.indexOf(",") !== -1)
      throw "Invalid CSS selector";
    e11 = Pe5(t19).specificityArray;
  } else if (Array.isArray(t19)) {
    if (t19.filter(function(_19) {
      return typeof _19 == "number";
    }).length !== 4)
      throw "Invalid specificity array";
    e11 = t19;
  } else
    throw "Invalid CSS selector or specificity array";
  for (r24 = 0; r24 < 4; r24 += 1) {
    if (i27[r24] < e11[r24])
      return -1;
    if (i27[r24] > e11[r24])
      return 1;
  }
  return 0;
};
function Vi2(a22, t19) {
  const i27 = [...a22.entries()].find(([e11]) => t19.matches(e11));
  return i27 == null ? void 0 : i27[1];
}
function ci5(a22, t19, i27) {
  const e11 = a22, r24 = Vi2(i27, e11);
  return typeof r24 > "u" || !e11.hasAttribute("source-provider") && typeof r24.defaultSourceProvider > "u" && typeof t19 > "u" ? NodeFilter.FILTER_SKIP : NodeFilter.FILTER_ACCEPT;
}
function Ui3(a22, t19) {
  return (i27) => ci5(i27, a22, t19);
}
function zi3(a22, t19, i27) {
  return document.createNodeIterator(
    a22,
    NodeFilter.SHOW_ELEMENT,
    Ui3(t19, i27)
  );
}
var X7;
var V8;
var H10;
var et7;
var pt7;
var ft9;
var ot8;
var dt9;
var Tt6;
var jt6;
var Pt5;
var he5;
var pe5;
var di5;
var fe5;
var De5;
var kt6;
var It4;
var gi5 = class Ct6 {
  constructor(t19, i27, e11 = {}, r24 = "default") {
    P10(this, ot8), P10(this, Tt6), P10(this, Pt5), P10(this, pe5), P10(this, fe5), P10(this, kt6), P10(this, X7, void 0), P10(this, V8, /* @__PURE__ */ new Map()), P10(this, H10, /* @__PURE__ */ new Map()), P10(this, et7, void 0), P10(this, pt7, void 0), P10(this, ft9, void 0), Ct6.UNIQUE_ID += 1, L6(this, pt7, Symbol(`WEBBIT_CONNECTOR_ELEMENT_CONNECTED_${Ct6.UNIQUE_ID}`)), L6(this, ft9, Symbol(`WEBBIT_CONNECTOR_ELEMENT_DISCONNECTED_${Ct6.UNIQUE_ID}`)), L6(this, X7, i27), w16(this, X7).defaultSourceProviderSet((_19) => {
      w16(this, H10).forEach((h26, u35) => {
        h26.sourceProvider === null && this.setSourceProvider(u35, _19);
      });
    }), L6(this, et7, t19), D10(this, pe5, di5).call(this), this.addElementConfigs(e11, r24);
  }
  addElementConfigs(t19 = {}, i27 = "default") {
    Object.entries(t19).forEach(([e11, r24]) => {
      w16(this, V8).set(e11, oi5({
        group: i27,
        ...r24
      }));
    }), D10(this, Pt5, he5).call(this, w16(this, et7));
  }
  subscribeElementConnected(t19) {
    q8.subscribe(w16(this, pt7), (i27, e11) => {
      t19(e11);
    });
  }
  subscribeElementDisconnected(t19) {
    q8.subscribe(w16(this, ft9), (i27, e11) => {
      t19(e11);
    });
  }
  getRootElement() {
    return w16(this, et7);
  }
  /**
   * Gets the element config with the most specific selector that matches the element
   * @param element
   * @returns The element config or undefined if none is found
   */
  getMatchingElementConfig(t19) {
    if (!t19)
      return;
    const i27 = [
      ...w16(this, V8).keys()
    ].filter((e11) => t19.matches(e11)).sort(Le5).at(-1);
    return i27 ? this.getElementConfig(i27) : void 0;
  }
  /**
   * Gets the most specific selector that matches the element
   * @param element
   * @returns The selector or undefined if none is found
   */
  getMatchingElementSelector(t19) {
    return t19 ? [
      ...w16(this, V8).keys()
    ].filter((i27) => t19.matches(i27)).sort(Le5).at(-1) : void 0;
  }
  getElementConfigSelectors() {
    return [...w16(this, V8).keys()];
  }
  getElementConfig(t19) {
    return w16(this, V8).get(t19);
  }
  hasElementConfig(t19) {
    return w16(this, V8).has(t19);
  }
  setDefaultPropertyValue(t19, i27, e11) {
    const r24 = this.getElementWebbit(t19);
    r24 && r24.setDefaultPropertyValue(i27, e11);
  }
  setSourceProvider(t19, i27) {
    const e11 = this.getElementWebbit(t19);
    e11 && (e11.sourceProvider = i27);
  }
  setSourceKey(t19, i27) {
    const e11 = this.getElementWebbit(t19);
    e11 && (e11.sourceKey = i27);
  }
  getDefaultPropertyValue(t19, i27) {
    const e11 = this.getElementWebbit(t19);
    return e11 ? e11.getDefaultPropertyValue(i27) : void 0;
  }
  getDefaultPropertyValues(t19) {
    const i27 = this.getElementWebbit(t19);
    return i27 ? i27.getDefaultPropertyValues() : {};
  }
  getSourceProvider(t19) {
    const i27 = this.getElementWebbit(t19);
    return i27 ? i27.sourceProvider : w16(this, X7).getDefaultSourceProvider();
  }
  getSourceKey(t19) {
    const i27 = this.getElementWebbit(t19);
    return i27 ? i27.sourceKey : void 0;
  }
  getElementWebbit(t19) {
    return w16(this, H10).get(t19);
  }
  hasElement(t19) {
    return w16(this, H10).has(t19);
  }
  getStore() {
    return w16(this, X7);
  }
};
X7 = /* @__PURE__ */ new WeakMap(), V8 = /* @__PURE__ */ new WeakMap(), H10 = /* @__PURE__ */ new WeakMap(), et7 = /* @__PURE__ */ new WeakMap(), pt7 = /* @__PURE__ */ new WeakMap(), ft9 = /* @__PURE__ */ new WeakMap(), ot8 = /* @__PURE__ */ new WeakSet(), dt9 = function(a22) {
  const t19 = this.getMatchingElementConfig(a22);
  if (this.hasElement(a22) || !t19)
    return;
  const i27 = new Ki3(a22, w16(this, X7), t19);
  w16(this, H10).set(a22, i27), q8.publish(w16(this, pt7), { element: a22 });
}, Tt6 = /* @__PURE__ */ new WeakSet(), jt6 = function(a22) {
  const t19 = this.getElementWebbit(a22);
  t19 && (t19.disconnect(), w16(this, H10).delete(a22), q8.publish(w16(this, ft9), { element: a22 }));
}, Pt5 = /* @__PURE__ */ new WeakSet(), he5 = function(a22) {
  const t19 = D10(this, fe5, De5).call(this, a22);
  for (; t19.nextNode(); )
    D10(this, ot8, dt9).call(this, t19.referenceNode);
}, pe5 = /* @__PURE__ */ new WeakSet(), di5 = function() {
  new MutationObserver((a22) => {
    a22.forEach((t19) => {
      if (t19.type === "childList") {
        const i27 = t19.addedNodes || [], e11 = t19.removedNodes || [];
        i27.forEach((r24) => {
          r24 instanceof HTMLElement && (D10(this, kt6, It4).call(this, r24) && D10(this, ot8, dt9).call(this, r24), D10(this, Pt5, he5).call(this, r24));
        }), e11.forEach((r24) => {
          D10(this, Tt6, jt6).call(this, r24), [...w16(this, H10).keys()].forEach((_19) => {
            r24.contains(_19) && D10(this, Tt6, jt6).call(this, _19);
          });
        });
      } else
        t19.type === "attributes" && t19.target instanceof HTMLElement && D10(this, kt6, It4).call(this, t19.target) && D10(this, ot8, dt9).call(this, t19.target);
    });
  }).observe(w16(this, et7), {
    childList: true,
    subtree: true,
    attributes: true,
    attributeFilter: ["source-key", "source-provider"]
  });
}, fe5 = /* @__PURE__ */ new WeakSet(), De5 = function(a22) {
  return zi3(
    a22,
    this.getStore().getDefaultSourceProvider(),
    w16(this, V8)
  );
}, kt6 = /* @__PURE__ */ new WeakSet(), It4 = function(a22) {
  return ci5(
    a22,
    w16(this, X7).getDefaultSourceProvider(),
    w16(this, V8)
  ) === NodeFilter.FILTER_ACCEPT;
}, gi5.UNIQUE_ID = 0;
var Fi3 = gi5;
var Bt5 = { exports: {} };
var it9 = {};
var gt8 = { exports: {} };
var Kt5 = {};
var Vt5 = {};
var We6;
function me6() {
  if (We6)
    return Vt5;
  We6 = 1;
  function a22(e11) {
    this.__parent = e11, this.__character_count = 0, this.__indent_count = -1, this.__alignment_count = 0, this.__wrap_point_index = 0, this.__wrap_point_character_count = 0, this.__wrap_point_indent_count = -1, this.__wrap_point_alignment_count = 0, this.__items = [];
  }
  a22.prototype.clone_empty = function() {
    var e11 = new a22(this.__parent);
    return e11.set_indent(this.__indent_count, this.__alignment_count), e11;
  }, a22.prototype.item = function(e11) {
    return e11 < 0 ? this.__items[this.__items.length + e11] : this.__items[e11];
  }, a22.prototype.has_match = function(e11) {
    for (var r24 = this.__items.length - 1; r24 >= 0; r24--)
      if (this.__items[r24].match(e11))
        return true;
    return false;
  }, a22.prototype.set_indent = function(e11, r24) {
    this.is_empty() && (this.__indent_count = e11 || 0, this.__alignment_count = r24 || 0, this.__character_count = this.__parent.get_indent_size(this.__indent_count, this.__alignment_count));
  }, a22.prototype._set_wrap_point = function() {
    this.__parent.wrap_line_length && (this.__wrap_point_index = this.__items.length, this.__wrap_point_character_count = this.__character_count, this.__wrap_point_indent_count = this.__parent.next_line.__indent_count, this.__wrap_point_alignment_count = this.__parent.next_line.__alignment_count);
  }, a22.prototype._should_wrap = function() {
    return this.__wrap_point_index && this.__character_count > this.__parent.wrap_line_length && this.__wrap_point_character_count > this.__parent.next_line.__character_count;
  }, a22.prototype._allow_wrap = function() {
    if (this._should_wrap()) {
      this.__parent.add_new_line();
      var e11 = this.__parent.current_line;
      return e11.set_indent(this.__wrap_point_indent_count, this.__wrap_point_alignment_count), e11.__items = this.__items.slice(this.__wrap_point_index), this.__items = this.__items.slice(0, this.__wrap_point_index), e11.__character_count += this.__character_count - this.__wrap_point_character_count, this.__character_count = this.__wrap_point_character_count, e11.__items[0] === " " && (e11.__items.splice(0, 1), e11.__character_count -= 1), true;
    }
    return false;
  }, a22.prototype.is_empty = function() {
    return this.__items.length === 0;
  }, a22.prototype.last = function() {
    return this.is_empty() ? null : this.__items[this.__items.length - 1];
  }, a22.prototype.push = function(e11) {
    this.__items.push(e11);
    var r24 = e11.lastIndexOf(`
`);
    r24 !== -1 ? this.__character_count = e11.length - r24 : this.__character_count += e11.length;
  }, a22.prototype.pop = function() {
    var e11 = null;
    return this.is_empty() || (e11 = this.__items.pop(), this.__character_count -= e11.length), e11;
  }, a22.prototype._remove_indent = function() {
    this.__indent_count > 0 && (this.__indent_count -= 1, this.__character_count -= this.__parent.indent_size);
  }, a22.prototype._remove_wrap_indent = function() {
    this.__wrap_point_indent_count > 0 && (this.__wrap_point_indent_count -= 1);
  }, a22.prototype.trim = function() {
    for (; this.last() === " "; )
      this.__items.pop(), this.__character_count -= 1;
  }, a22.prototype.toString = function() {
    var e11 = "";
    return this.is_empty() ? this.__parent.indent_empty_lines && (e11 = this.__parent.get_indent_string(this.__indent_count)) : (e11 = this.__parent.get_indent_string(this.__indent_count, this.__alignment_count), e11 += this.__items.join("")), e11;
  };
  function t19(e11, r24) {
    this.__cache = [""], this.__indent_size = e11.indent_size, this.__indent_string = e11.indent_char, e11.indent_with_tabs || (this.__indent_string = new Array(e11.indent_size + 1).join(e11.indent_char)), r24 = r24 || "", e11.indent_level > 0 && (r24 = new Array(e11.indent_level + 1).join(this.__indent_string)), this.__base_string = r24, this.__base_string_length = r24.length;
  }
  t19.prototype.get_indent_size = function(e11, r24) {
    var _19 = this.__base_string_length;
    return r24 = r24 || 0, e11 < 0 && (_19 = 0), _19 += e11 * this.__indent_size, _19 += r24, _19;
  }, t19.prototype.get_indent_string = function(e11, r24) {
    var _19 = this.__base_string;
    return r24 = r24 || 0, e11 < 0 && (e11 = 0, _19 = ""), r24 += e11 * this.__indent_size, this.__ensure_cache(r24), _19 += this.__cache[r24], _19;
  }, t19.prototype.__ensure_cache = function(e11) {
    for (; e11 >= this.__cache.length; )
      this.__add_column();
  }, t19.prototype.__add_column = function() {
    var e11 = this.__cache.length, r24 = 0, _19 = "";
    this.__indent_size && e11 >= this.__indent_size && (r24 = Math.floor(e11 / this.__indent_size), e11 -= r24 * this.__indent_size, _19 = new Array(r24 + 1).join(this.__indent_string)), e11 && (_19 += new Array(e11 + 1).join(" ")), this.__cache.push(_19);
  };
  function i27(e11, r24) {
    this.__indent_cache = new t19(e11, r24), this.raw = false, this._end_with_newline = e11.end_with_newline, this.indent_size = e11.indent_size, this.wrap_line_length = e11.wrap_line_length, this.indent_empty_lines = e11.indent_empty_lines, this.__lines = [], this.previous_line = null, this.current_line = null, this.next_line = new a22(this), this.space_before_token = false, this.non_breaking_space = false, this.previous_token_wrapped = false, this.__add_outputline();
  }
  return i27.prototype.__add_outputline = function() {
    this.previous_line = this.current_line, this.current_line = this.next_line.clone_empty(), this.__lines.push(this.current_line);
  }, i27.prototype.get_line_number = function() {
    return this.__lines.length;
  }, i27.prototype.get_indent_string = function(e11, r24) {
    return this.__indent_cache.get_indent_string(e11, r24);
  }, i27.prototype.get_indent_size = function(e11, r24) {
    return this.__indent_cache.get_indent_size(e11, r24);
  }, i27.prototype.is_empty = function() {
    return !this.previous_line && this.current_line.is_empty();
  }, i27.prototype.add_new_line = function(e11) {
    return this.is_empty() || !e11 && this.just_added_newline() ? false : (this.raw || this.__add_outputline(), true);
  }, i27.prototype.get_code = function(e11) {
    this.trim(true);
    var r24 = this.current_line.pop();
    r24 && (r24[r24.length - 1] === `
` && (r24 = r24.replace(/\n+$/g, "")), this.current_line.push(r24)), this._end_with_newline && this.__add_outputline();
    var _19 = this.__lines.join(`
`);
    return e11 !== `
` && (_19 = _19.replace(/[\n]/g, e11)), _19;
  }, i27.prototype.set_wrap_point = function() {
    this.current_line._set_wrap_point();
  }, i27.prototype.set_indent = function(e11, r24) {
    return e11 = e11 || 0, r24 = r24 || 0, this.next_line.set_indent(e11, r24), this.__lines.length > 1 ? (this.current_line.set_indent(e11, r24), true) : (this.current_line.set_indent(), false);
  }, i27.prototype.add_raw_token = function(e11) {
    for (var r24 = 0; r24 < e11.newlines; r24++)
      this.__add_outputline();
    this.current_line.set_indent(-1), this.current_line.push(e11.whitespace_before), this.current_line.push(e11.text), this.space_before_token = false, this.non_breaking_space = false, this.previous_token_wrapped = false;
  }, i27.prototype.add_token = function(e11) {
    this.__add_space_before_token(), this.current_line.push(e11), this.space_before_token = false, this.non_breaking_space = false, this.previous_token_wrapped = this.current_line._allow_wrap();
  }, i27.prototype.__add_space_before_token = function() {
    this.space_before_token && !this.just_added_newline() && (this.non_breaking_space || this.set_wrap_point(), this.current_line.push(" "));
  }, i27.prototype.remove_indent = function(e11) {
    for (var r24 = this.__lines.length; e11 < r24; )
      this.__lines[e11]._remove_indent(), e11++;
    this.current_line._remove_wrap_indent();
  }, i27.prototype.trim = function(e11) {
    for (e11 = e11 === void 0 ? false : e11, this.current_line.trim(); e11 && this.__lines.length > 1 && this.current_line.is_empty(); )
      this.__lines.pop(), this.current_line = this.__lines[this.__lines.length - 1], this.current_line.trim();
    this.previous_line = this.__lines.length > 1 ? this.__lines[this.__lines.length - 2] : null;
  }, i27.prototype.just_added_newline = function() {
    return this.current_line.is_empty();
  }, i27.prototype.just_added_blankline = function() {
    return this.is_empty() || this.current_line.is_empty() && this.previous_line.is_empty();
  }, i27.prototype.ensure_empty_line_above = function(e11, r24) {
    for (var _19 = this.__lines.length - 2; _19 >= 0; ) {
      var h26 = this.__lines[_19];
      if (h26.is_empty())
        break;
      if (h26.item(0).indexOf(e11) !== 0 && h26.item(-1) !== r24) {
        this.__lines.splice(_19 + 1, 0, new a22(this)), this.previous_line = this.__lines[this.__lines.length - 2];
        break;
      }
      _19--;
    }
  }, Vt5.Output = i27, Vt5;
}
var Ut7 = {};
var Me5;
function bi5() {
  if (Me5)
    return Ut7;
  Me5 = 1;
  function a22(t19, i27, e11, r24) {
    this.type = t19, this.text = i27, this.comments_before = null, this.newlines = e11 || 0, this.whitespace_before = r24 || "", this.parent = null, this.next = null, this.previous = null, this.opened = null, this.closed = null, this.directives = null;
  }
  return Ut7.Token = a22, Ut7;
}
var zt4 = {};
var je5;
function mi5() {
  return je5 || (je5 = 1, function(a22) {
    var t19 = "\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a", i27 = "\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a", e11 = "\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc", r24 = "\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f", _19 = "\\\\u[0-9a-fA-F]{4}|\\\\u\\{[0-9a-fA-F]+\\}", h26 = "(?:" + _19 + "|[" + t19 + e11 + "])", u35 = "(?:" + _19 + "|[" + i27 + e11 + r24 + "])*";
    a22.identifier = new RegExp(h26 + u35, "g"), a22.identifierStart = new RegExp(h26), a22.identifierMatch = new RegExp("(?:" + _19 + "|[" + i27 + e11 + r24 + "])+"), a22.newline = /[\n\r\u2028\u2029]/, a22.lineBreak = new RegExp(`\r
|` + a22.newline.source), a22.allLineBreaks = new RegExp(a22.lineBreak.source, "g");
  }(zt4)), zt4;
}
var Ft5 = {};
var st8 = {};
var Ie5;
function ve6() {
  if (Ie5)
    return st8;
  Ie5 = 1;
  function a22(e11, r24) {
    this.raw_options = t19(e11, r24), this.disabled = this._get_boolean("disabled"), this.eol = this._get_characters("eol", "auto"), this.end_with_newline = this._get_boolean("end_with_newline"), this.indent_size = this._get_number("indent_size", 4), this.indent_char = this._get_characters("indent_char", " "), this.indent_level = this._get_number("indent_level"), this.preserve_newlines = this._get_boolean("preserve_newlines", true), this.max_preserve_newlines = this._get_number("max_preserve_newlines", 32786), this.preserve_newlines || (this.max_preserve_newlines = 0), this.indent_with_tabs = this._get_boolean("indent_with_tabs", this.indent_char === "	"), this.indent_with_tabs && (this.indent_char = "	", this.indent_size === 1 && (this.indent_size = 4)), this.wrap_line_length = this._get_number("wrap_line_length", this._get_number("max_char")), this.indent_empty_lines = this._get_boolean("indent_empty_lines"), this.templating = this._get_selection_list("templating", ["auto", "none", "angular", "django", "erb", "handlebars", "php", "smarty"], ["auto"]);
  }
  a22.prototype._get_array = function(e11, r24) {
    var _19 = this.raw_options[e11], h26 = r24 || [];
    return typeof _19 == "object" ? _19 !== null && typeof _19.concat == "function" && (h26 = _19.concat()) : typeof _19 == "string" && (h26 = _19.split(/[^a-zA-Z0-9_\/\-]+/)), h26;
  }, a22.prototype._get_boolean = function(e11, r24) {
    var _19 = this.raw_options[e11], h26 = _19 === void 0 ? !!r24 : !!_19;
    return h26;
  }, a22.prototype._get_characters = function(e11, r24) {
    var _19 = this.raw_options[e11], h26 = r24 || "";
    return typeof _19 == "string" && (h26 = _19.replace(/\\r/, "\r").replace(/\\n/, `
`).replace(/\\t/, "	")), h26;
  }, a22.prototype._get_number = function(e11, r24) {
    var _19 = this.raw_options[e11];
    r24 = parseInt(r24, 10), isNaN(r24) && (r24 = 0);
    var h26 = parseInt(_19, 10);
    return isNaN(h26) && (h26 = r24), h26;
  }, a22.prototype._get_selection = function(e11, r24, _19) {
    var h26 = this._get_selection_list(e11, r24, _19);
    if (h26.length !== 1)
      throw new Error(
        "Invalid Option Value: The option '" + e11 + `' can only be one of the following values:
` + r24 + `
You passed in: '` + this.raw_options[e11] + "'"
      );
    return h26[0];
  }, a22.prototype._get_selection_list = function(e11, r24, _19) {
    if (!r24 || r24.length === 0)
      throw new Error("Selection list cannot be empty.");
    if (_19 = _19 || [r24[0]], !this._is_valid_selection(_19, r24))
      throw new Error("Invalid Default Value!");
    var h26 = this._get_array(e11, _19);
    if (!this._is_valid_selection(h26, r24))
      throw new Error(
        "Invalid Option Value: The option '" + e11 + `' can contain only the following values:
` + r24 + `
You passed in: '` + this.raw_options[e11] + "'"
      );
    return h26;
  }, a22.prototype._is_valid_selection = function(e11, r24) {
    return e11.length && r24.length && !e11.some(function(_19) {
      return r24.indexOf(_19) === -1;
    });
  };
  function t19(e11, r24) {
    var _19 = {};
    e11 = i27(e11);
    var h26;
    for (h26 in e11)
      h26 !== r24 && (_19[h26] = e11[h26]);
    if (r24 && e11[r24])
      for (h26 in e11[r24])
        _19[h26] = e11[r24][h26];
    return _19;
  }
  function i27(e11) {
    var r24 = {}, _19;
    for (_19 in e11) {
      var h26 = _19.replace(/-/g, "_");
      r24[h26] = e11[_19];
    }
    return r24;
  }
  return st8.Options = a22, st8.normalizeOpts = i27, st8.mergeOpts = t19, st8;
}
var Be5;
function vi5() {
  if (Be5)
    return Ft5;
  Be5 = 1;
  var a22 = ve6().Options, t19 = ["before-newline", "after-newline", "preserve-newline"];
  function i27(e11) {
    a22.call(this, e11, "js");
    var r24 = this.raw_options.brace_style || null;
    r24 === "expand-strict" ? this.raw_options.brace_style = "expand" : r24 === "collapse-preserve-inline" ? this.raw_options.brace_style = "collapse,preserve-inline" : this.raw_options.braces_on_own_line !== void 0 && (this.raw_options.brace_style = this.raw_options.braces_on_own_line ? "expand" : "collapse");
    var _19 = this._get_selection_list("brace_style", ["collapse", "expand", "end-expand", "none", "preserve-inline"]);
    this.brace_preserve_inline = false, this.brace_style = "collapse";
    for (var h26 = 0; h26 < _19.length; h26++)
      _19[h26] === "preserve-inline" ? this.brace_preserve_inline = true : this.brace_style = _19[h26];
    this.unindent_chained_methods = this._get_boolean("unindent_chained_methods"), this.break_chained_methods = this._get_boolean("break_chained_methods"), this.space_in_paren = this._get_boolean("space_in_paren"), this.space_in_empty_paren = this._get_boolean("space_in_empty_paren"), this.jslint_happy = this._get_boolean("jslint_happy"), this.space_after_anon_function = this._get_boolean("space_after_anon_function"), this.space_after_named_function = this._get_boolean("space_after_named_function"), this.keep_array_indentation = this._get_boolean("keep_array_indentation"), this.space_before_conditional = this._get_boolean("space_before_conditional", true), this.unescape_strings = this._get_boolean("unescape_strings"), this.e4x = this._get_boolean("e4x"), this.comma_first = this._get_boolean("comma_first"), this.operator_position = this._get_selection("operator_position", t19), this.test_output_raw = this._get_boolean("test_output_raw"), this.jslint_happy && (this.space_after_anon_function = true);
  }
  return i27.prototype = new a22(), Ft5.Options = i27, Ft5;
}
var Y6 = {};
var qt4 = {};
var Ke4;
function ye5() {
  if (Ke4)
    return qt4;
  Ke4 = 1;
  var a22 = RegExp.prototype.hasOwnProperty("sticky");
  function t19(i27) {
    this.__input = i27 || "", this.__input_length = this.__input.length, this.__position = 0;
  }
  return t19.prototype.restart = function() {
    this.__position = 0;
  }, t19.prototype.back = function() {
    this.__position > 0 && (this.__position -= 1);
  }, t19.prototype.hasNext = function() {
    return this.__position < this.__input_length;
  }, t19.prototype.next = function() {
    var i27 = null;
    return this.hasNext() && (i27 = this.__input.charAt(this.__position), this.__position += 1), i27;
  }, t19.prototype.peek = function(i27) {
    var e11 = null;
    return i27 = i27 || 0, i27 += this.__position, i27 >= 0 && i27 < this.__input_length && (e11 = this.__input.charAt(i27)), e11;
  }, t19.prototype.__match = function(i27, e11) {
    i27.lastIndex = e11;
    var r24 = i27.exec(this.__input);
    return r24 && !(a22 && i27.sticky) && r24.index !== e11 && (r24 = null), r24;
  }, t19.prototype.test = function(i27, e11) {
    return e11 = e11 || 0, e11 += this.__position, e11 >= 0 && e11 < this.__input_length ? !!this.__match(i27, e11) : false;
  }, t19.prototype.testChar = function(i27, e11) {
    var r24 = this.peek(e11);
    return i27.lastIndex = 0, r24 !== null && i27.test(r24);
  }, t19.prototype.match = function(i27) {
    var e11 = this.__match(i27, this.__position);
    return e11 ? this.__position += e11[0].length : e11 = null, e11;
  }, t19.prototype.read = function(i27, e11, r24) {
    var _19 = "", h26;
    return i27 && (h26 = this.match(i27), h26 && (_19 += h26[0])), e11 && (h26 || !i27) && (_19 += this.readUntil(e11, r24)), _19;
  }, t19.prototype.readUntil = function(i27, e11) {
    var r24 = "", _19 = this.__position;
    i27.lastIndex = this.__position;
    var h26 = i27.exec(this.__input);
    return h26 ? (_19 = h26.index, e11 && (_19 += h26[0].length)) : _19 = this.__input_length, r24 = this.__input.substring(this.__position, _19), this.__position = _19, r24;
  }, t19.prototype.readUntilAfter = function(i27) {
    return this.readUntil(i27, true);
  }, t19.prototype.get_regexp = function(i27, e11) {
    var r24 = null, _19 = "g";
    return e11 && a22 && (_19 = "y"), typeof i27 == "string" && i27 !== "" ? r24 = new RegExp(i27, _19) : i27 && (r24 = new RegExp(i27.source, _19)), r24;
  }, t19.prototype.get_literal_regexp = function(i27) {
    return RegExp(i27.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&"));
  }, t19.prototype.peekUntilAfter = function(i27) {
    var e11 = this.__position, r24 = this.readUntilAfter(i27);
    return this.__position = e11, r24;
  }, t19.prototype.lookBack = function(i27) {
    var e11 = this.__position - 1;
    return e11 >= i27.length && this.__input.substring(e11 - i27.length, e11).toLowerCase() === i27;
  }, qt4.InputScanner = t19, qt4;
}
var bt6 = {};
var $t5 = {};
var Ve6;
function qi2() {
  if (Ve6)
    return $t5;
  Ve6 = 1;
  function a22(t19) {
    this.__tokens = [], this.__tokens_length = this.__tokens.length, this.__position = 0, this.__parent_token = t19;
  }
  return a22.prototype.restart = function() {
    this.__position = 0;
  }, a22.prototype.isEmpty = function() {
    return this.__tokens_length === 0;
  }, a22.prototype.hasNext = function() {
    return this.__position < this.__tokens_length;
  }, a22.prototype.next = function() {
    var t19 = null;
    return this.hasNext() && (t19 = this.__tokens[this.__position], this.__position += 1), t19;
  }, a22.prototype.peek = function(t19) {
    var i27 = null;
    return t19 = t19 || 0, t19 += this.__position, t19 >= 0 && t19 < this.__tokens_length && (i27 = this.__tokens[t19]), i27;
  }, a22.prototype.add = function(t19) {
    this.__parent_token && (t19.parent = this.__parent_token), this.__tokens.push(t19), this.__tokens_length += 1;
  }, $t5.TokenStream = a22, $t5;
}
var Gt5 = {};
var Xt5 = {};
var Ue5;
function Dt3() {
  if (Ue5)
    return Xt5;
  Ue5 = 1;
  function a22(t19, i27) {
    this._input = t19, this._starting_pattern = null, this._match_pattern = null, this._until_pattern = null, this._until_after = false, i27 && (this._starting_pattern = this._input.get_regexp(i27._starting_pattern, true), this._match_pattern = this._input.get_regexp(i27._match_pattern, true), this._until_pattern = this._input.get_regexp(i27._until_pattern), this._until_after = i27._until_after);
  }
  return a22.prototype.read = function() {
    var t19 = this._input.read(this._starting_pattern);
    return (!this._starting_pattern || t19) && (t19 += this._input.read(this._match_pattern, this._until_pattern, this._until_after)), t19;
  }, a22.prototype.read_match = function() {
    return this._input.match(this._match_pattern);
  }, a22.prototype.until_after = function(t19) {
    var i27 = this._create();
    return i27._until_after = true, i27._until_pattern = this._input.get_regexp(t19), i27._update(), i27;
  }, a22.prototype.until = function(t19) {
    var i27 = this._create();
    return i27._until_after = false, i27._until_pattern = this._input.get_regexp(t19), i27._update(), i27;
  }, a22.prototype.starting_with = function(t19) {
    var i27 = this._create();
    return i27._starting_pattern = this._input.get_regexp(t19, true), i27._update(), i27;
  }, a22.prototype.matching = function(t19) {
    var i27 = this._create();
    return i27._match_pattern = this._input.get_regexp(t19, true), i27._update(), i27;
  }, a22.prototype._create = function() {
    return new a22(this._input, this);
  }, a22.prototype._update = function() {
  }, Xt5.Pattern = a22, Xt5;
}
var ze6;
function $i5() {
  if (ze6)
    return Gt5;
  ze6 = 1;
  var a22 = Dt3().Pattern;
  function t19(i27, e11) {
    a22.call(this, i27, e11), e11 ? this._line_regexp = this._input.get_regexp(e11._line_regexp) : this.__set_whitespace_patterns("", ""), this.newline_count = 0, this.whitespace_before_token = "";
  }
  return t19.prototype = new a22(), t19.prototype.__set_whitespace_patterns = function(i27, e11) {
    i27 += "\\t ", e11 += "\\n\\r", this._match_pattern = this._input.get_regexp(
      "[" + i27 + e11 + "]+",
      true
    ), this._newline_regexp = this._input.get_regexp(
      "\\r\\n|[" + e11 + "]"
    );
  }, t19.prototype.read = function() {
    this.newline_count = 0, this.whitespace_before_token = "";
    var i27 = this._input.read(this._match_pattern);
    if (i27 === " ")
      this.whitespace_before_token = " ";
    else if (i27) {
      var e11 = this.__split(this._newline_regexp, i27);
      this.newline_count = e11.length - 1, this.whitespace_before_token = e11[this.newline_count];
    }
    return i27;
  }, t19.prototype.matching = function(i27, e11) {
    var r24 = this._create();
    return r24.__set_whitespace_patterns(i27, e11), r24._update(), r24;
  }, t19.prototype._create = function() {
    return new t19(this._input, this);
  }, t19.prototype.__split = function(i27, e11) {
    i27.lastIndex = 0;
    for (var r24 = 0, _19 = [], h26 = i27.exec(e11); h26; )
      _19.push(e11.substring(r24, h26.index)), r24 = h26.index + h26[0].length, h26 = i27.exec(e11);
    return r24 < e11.length ? _19.push(e11.substring(r24, e11.length)) : _19.push(""), _19;
  }, Gt5.WhitespacePattern = t19, Gt5;
}
var Fe5;
function Lt4() {
  if (Fe5)
    return bt6;
  Fe5 = 1;
  var a22 = ye5().InputScanner, t19 = bi5().Token, i27 = qi2().TokenStream, e11 = $i5().WhitespacePattern, r24 = {
    START: "TK_START",
    RAW: "TK_RAW",
    EOF: "TK_EOF"
  }, _19 = function(h26, u35) {
    this._input = new a22(h26), this._options = u35 || {}, this.__tokens = null, this._patterns = {}, this._patterns.whitespace = new e11(this._input);
  };
  return _19.prototype.tokenize = function() {
    this._input.restart(), this.__tokens = new i27(), this._reset();
    for (var h26, u35 = new t19(r24.START, ""), l25 = null, O20 = [], v30 = new i27(); u35.type !== r24.EOF; ) {
      for (h26 = this._get_next_token(u35, l25); this._is_comment(h26); )
        v30.add(h26), h26 = this._get_next_token(u35, l25);
      v30.isEmpty() || (h26.comments_before = v30, v30 = new i27()), h26.parent = l25, this._is_opening(h26) ? (O20.push(l25), l25 = h26) : l25 && this._is_closing(h26, l25) && (h26.opened = l25, l25.closed = h26, l25 = O20.pop(), h26.parent = l25), h26.previous = u35, u35.next = h26, this.__tokens.add(h26), u35 = h26;
    }
    return this.__tokens;
  }, _19.prototype._is_first_token = function() {
    return this.__tokens.isEmpty();
  }, _19.prototype._reset = function() {
  }, _19.prototype._get_next_token = function(h26, u35) {
    this._readWhitespace();
    var l25 = this._input.read(/.+/g);
    return l25 ? this._create_token(r24.RAW, l25) : this._create_token(r24.EOF, "");
  }, _19.prototype._is_comment = function(h26) {
    return false;
  }, _19.prototype._is_opening = function(h26) {
    return false;
  }, _19.prototype._is_closing = function(h26, u35) {
    return false;
  }, _19.prototype._create_token = function(h26, u35) {
    var l25 = new t19(
      h26,
      u35,
      this._patterns.whitespace.newline_count,
      this._patterns.whitespace.whitespace_before_token
    );
    return l25;
  }, _19.prototype._readWhitespace = function() {
    return this._patterns.whitespace.read();
  }, bt6.Tokenizer = _19, bt6.TOKEN = r24, bt6;
}
var Qt4 = {};
var qe5;
function we6() {
  if (qe5)
    return Qt4;
  qe5 = 1;
  function a22(t19, i27) {
    t19 = typeof t19 == "string" ? t19 : t19.source, i27 = typeof i27 == "string" ? i27 : i27.source, this.__directives_block_pattern = new RegExp(t19 + / beautify( \w+[:]\w+)+ /.source + i27, "g"), this.__directive_pattern = / (\w+)[:](\w+)/g, this.__directives_end_ignore_pattern = new RegExp(t19 + /\sbeautify\signore:end\s/.source + i27, "g");
  }
  return a22.prototype.get_directives = function(t19) {
    if (!t19.match(this.__directives_block_pattern))
      return null;
    var i27 = {};
    this.__directive_pattern.lastIndex = 0;
    for (var e11 = this.__directive_pattern.exec(t19); e11; )
      i27[e11[1]] = e11[2], e11 = this.__directive_pattern.exec(t19);
    return i27;
  }, a22.prototype.readIgnored = function(t19) {
    return t19.readUntilAfter(this.__directives_end_ignore_pattern);
  }, Qt4.Directives = a22, Qt4;
}
var Ht6 = {};
var $e5;
function yi5() {
  if ($e5)
    return Ht6;
  $e5 = 1;
  var a22 = Dt3().Pattern, t19 = {
    django: false,
    erb: false,
    handlebars: false,
    php: false,
    smarty: false,
    angular: false
  };
  function i27(e11, r24) {
    a22.call(this, e11, r24), this.__template_pattern = null, this._disabled = Object.assign({}, t19), this._excluded = Object.assign({}, t19), r24 && (this.__template_pattern = this._input.get_regexp(r24.__template_pattern), this._excluded = Object.assign(this._excluded, r24._excluded), this._disabled = Object.assign(this._disabled, r24._disabled));
    var _19 = new a22(e11);
    this.__patterns = {
      handlebars_comment: _19.starting_with(/{{!--/).until_after(/--}}/),
      handlebars_unescaped: _19.starting_with(/{{{/).until_after(/}}}/),
      handlebars: _19.starting_with(/{{/).until_after(/}}/),
      php: _19.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),
      erb: _19.starting_with(/<%[^%]/).until_after(/[^%]%>/),
      // django coflicts with handlebars a bit.
      django: _19.starting_with(/{%/).until_after(/%}/),
      django_value: _19.starting_with(/{{/).until_after(/}}/),
      django_comment: _19.starting_with(/{#/).until_after(/#}/),
      smarty: _19.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),
      smarty_comment: _19.starting_with(/{\*/).until_after(/\*}/),
      smarty_literal: _19.starting_with(/{literal}/).until_after(/{\/literal}/)
    };
  }
  return i27.prototype = new a22(), i27.prototype._create = function() {
    return new i27(this._input, this);
  }, i27.prototype._update = function() {
    this.__set_templated_pattern();
  }, i27.prototype.disable = function(e11) {
    var r24 = this._create();
    return r24._disabled[e11] = true, r24._update(), r24;
  }, i27.prototype.read_options = function(e11) {
    var r24 = this._create();
    for (var _19 in t19)
      r24._disabled[_19] = e11.templating.indexOf(_19) === -1;
    return r24._update(), r24;
  }, i27.prototype.exclude = function(e11) {
    var r24 = this._create();
    return r24._excluded[e11] = true, r24._update(), r24;
  }, i27.prototype.read = function() {
    var e11 = "";
    this._match_pattern ? e11 = this._input.read(this._starting_pattern) : e11 = this._input.read(this._starting_pattern, this.__template_pattern);
    for (var r24 = this._read_template(); r24; )
      this._match_pattern ? r24 += this._input.read(this._match_pattern) : r24 += this._input.readUntil(this.__template_pattern), e11 += r24, r24 = this._read_template();
    return this._until_after && (e11 += this._input.readUntilAfter(this._until_pattern)), e11;
  }, i27.prototype.__set_templated_pattern = function() {
    var e11 = [];
    this._disabled.php || e11.push(this.__patterns.php._starting_pattern.source), this._disabled.handlebars || e11.push(this.__patterns.handlebars._starting_pattern.source), this._disabled.erb || e11.push(this.__patterns.erb._starting_pattern.source), this._disabled.django || (e11.push(this.__patterns.django._starting_pattern.source), e11.push(this.__patterns.django_value._starting_pattern.source), e11.push(this.__patterns.django_comment._starting_pattern.source)), this._disabled.smarty || e11.push(this.__patterns.smarty._starting_pattern.source), this._until_pattern && e11.push(this._until_pattern.source), this.__template_pattern = this._input.get_regexp("(?:" + e11.join("|") + ")");
  }, i27.prototype._read_template = function() {
    var e11 = "", r24 = this._input.peek();
    if (r24 === "<") {
      var _19 = this._input.peek(1);
      !this._disabled.php && !this._excluded.php && _19 === "?" && (e11 = e11 || this.__patterns.php.read()), !this._disabled.erb && !this._excluded.erb && _19 === "%" && (e11 = e11 || this.__patterns.erb.read());
    } else
      r24 === "{" && (!this._disabled.handlebars && !this._excluded.handlebars && (e11 = e11 || this.__patterns.handlebars_comment.read(), e11 = e11 || this.__patterns.handlebars_unescaped.read(), e11 = e11 || this.__patterns.handlebars.read()), this._disabled.django || (!this._excluded.django && !this._excluded.handlebars && (e11 = e11 || this.__patterns.django_value.read()), this._excluded.django || (e11 = e11 || this.__patterns.django_comment.read(), e11 = e11 || this.__patterns.django.read())), this._disabled.smarty || this._disabled.django && this._disabled.handlebars && (e11 = e11 || this.__patterns.smarty_comment.read(), e11 = e11 || this.__patterns.smarty_literal.read(), e11 = e11 || this.__patterns.smarty.read()));
    return e11;
  }, Ht6.TemplatablePattern = i27, Ht6;
}
var Ge5;
function mt8() {
  if (Ge5)
    return Y6;
  Ge5 = 1;
  var a22 = ye5().InputScanner, t19 = Lt4().Tokenizer, i27 = Lt4().TOKEN, e11 = we6().Directives, r24 = mi5(), _19 = Dt3().Pattern, h26 = yi5().TemplatablePattern;
  function u35(c27, b33) {
    return b33.indexOf(c27) !== -1;
  }
  var l25 = {
    START_EXPR: "TK_START_EXPR",
    END_EXPR: "TK_END_EXPR",
    START_BLOCK: "TK_START_BLOCK",
    END_BLOCK: "TK_END_BLOCK",
    WORD: "TK_WORD",
    RESERVED: "TK_RESERVED",
    SEMICOLON: "TK_SEMICOLON",
    STRING: "TK_STRING",
    EQUALS: "TK_EQUALS",
    OPERATOR: "TK_OPERATOR",
    COMMA: "TK_COMMA",
    BLOCK_COMMENT: "TK_BLOCK_COMMENT",
    COMMENT: "TK_COMMENT",
    DOT: "TK_DOT",
    UNKNOWN: "TK_UNKNOWN",
    START: i27.START,
    RAW: i27.RAW,
    EOF: i27.EOF
  }, O20 = new e11(/\/\*/, /\*\//), v30 = /0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/, y33 = /[0-9]/, g31 = /[^\d\.]/, C19 = ">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "), A17 = ">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";
  A17 = A17.replace(/[-[\]{}()*+?.,\\^$|#]/g, "\\$&"), A17 = "\\?\\.(?!\\d) " + A17, A17 = A17.replace(/ /g, "|");
  var x34 = new RegExp(A17), o12 = "continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","), n33 = o12.concat(["do", "in", "of", "else", "get", "set", "new", "catch", "finally", "typeof", "yield", "async", "await", "from", "as", "class", "extends"]), p26 = new RegExp("^(?:" + n33.join("|") + ")$"), T20, E24 = function(c27, b33) {
    t19.call(this, c27, b33), this._patterns.whitespace = this._patterns.whitespace.matching(
      /\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,
      /\u2028\u2029/.source
    );
    var f39 = new _19(this._input), S21 = new h26(this._input).read_options(this._options);
    this.__patterns = {
      template: S21,
      identifier: S21.starting_with(r24.identifier).matching(r24.identifierMatch),
      number: f39.matching(v30),
      punct: f39.matching(x34),
      // comment ends just before nearest linefeed or end of file
      comment: f39.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),
      //  /* ... */ comment ends with nearest */ or end of file
      block_comment: f39.starting_with(/\/\*/).until_after(/\*\//),
      html_comment_start: f39.matching(/<!--/),
      html_comment_end: f39.matching(/-->/),
      include: f39.starting_with(/#include/).until_after(r24.lineBreak),
      shebang: f39.starting_with(/#!/).until_after(r24.lineBreak),
      xml: f39.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),
      single_quote: S21.until(/['\\\n\r\u2028\u2029]/),
      double_quote: S21.until(/["\\\n\r\u2028\u2029]/),
      template_text: S21.until(/[`\\$]/),
      template_expression: S21.until(/[`}\\]/)
    };
  };
  E24.prototype = new t19(), E24.prototype._is_comment = function(c27) {
    return c27.type === l25.COMMENT || c27.type === l25.BLOCK_COMMENT || c27.type === l25.UNKNOWN;
  }, E24.prototype._is_opening = function(c27) {
    return c27.type === l25.START_BLOCK || c27.type === l25.START_EXPR;
  }, E24.prototype._is_closing = function(c27, b33) {
    return (c27.type === l25.END_BLOCK || c27.type === l25.END_EXPR) && b33 && (c27.text === "]" && b33.text === "[" || c27.text === ")" && b33.text === "(" || c27.text === "}" && b33.text === "{");
  }, E24.prototype._reset = function() {
    T20 = false;
  }, E24.prototype._get_next_token = function(c27, b33) {
    var f39 = null;
    this._readWhitespace();
    var S21 = this._input.peek();
    return S21 === null ? this._create_token(l25.EOF, "") : (f39 = f39 || this._read_non_javascript(S21), f39 = f39 || this._read_string(S21), f39 = f39 || this._read_pair(S21, this._input.peek(1)), f39 = f39 || this._read_word(c27), f39 = f39 || this._read_singles(S21), f39 = f39 || this._read_comment(S21), f39 = f39 || this._read_regexp(S21, c27), f39 = f39 || this._read_xml(S21, c27), f39 = f39 || this._read_punctuation(), f39 = f39 || this._create_token(l25.UNKNOWN, this._input.next()), f39);
  }, E24.prototype._read_word = function(c27) {
    var b33;
    if (b33 = this.__patterns.identifier.read(), b33 !== "")
      return b33 = b33.replace(r24.allLineBreaks, `
`), !(c27.type === l25.DOT || c27.type === l25.RESERVED && (c27.text === "set" || c27.text === "get")) && p26.test(b33) ? (b33 === "in" || b33 === "of") && (c27.type === l25.WORD || c27.type === l25.STRING) ? this._create_token(l25.OPERATOR, b33) : this._create_token(l25.RESERVED, b33) : this._create_token(l25.WORD, b33);
    if (b33 = this.__patterns.number.read(), b33 !== "")
      return this._create_token(l25.WORD, b33);
  }, E24.prototype._read_singles = function(c27) {
    var b33 = null;
    return c27 === "(" || c27 === "[" ? b33 = this._create_token(l25.START_EXPR, c27) : c27 === ")" || c27 === "]" ? b33 = this._create_token(l25.END_EXPR, c27) : c27 === "{" ? b33 = this._create_token(l25.START_BLOCK, c27) : c27 === "}" ? b33 = this._create_token(l25.END_BLOCK, c27) : c27 === ";" ? b33 = this._create_token(l25.SEMICOLON, c27) : c27 === "." && g31.test(this._input.peek(1)) ? b33 = this._create_token(l25.DOT, c27) : c27 === "," && (b33 = this._create_token(l25.COMMA, c27)), b33 && this._input.next(), b33;
  }, E24.prototype._read_pair = function(c27, b33) {
    var f39 = null;
    return c27 === "#" && b33 === "{" && (f39 = this._create_token(l25.START_BLOCK, c27 + b33)), f39 && (this._input.next(), this._input.next()), f39;
  }, E24.prototype._read_punctuation = function() {
    var c27 = this.__patterns.punct.read();
    if (c27 !== "")
      return c27 === "=" ? this._create_token(l25.EQUALS, c27) : c27 === "?." ? this._create_token(l25.DOT, c27) : this._create_token(l25.OPERATOR, c27);
  }, E24.prototype._read_non_javascript = function(c27) {
    var b33 = "";
    if (c27 === "#") {
      if (this._is_first_token() && (b33 = this.__patterns.shebang.read(), b33))
        return this._create_token(l25.UNKNOWN, b33.trim() + `
`);
      if (b33 = this.__patterns.include.read(), b33)
        return this._create_token(l25.UNKNOWN, b33.trim() + `
`);
      c27 = this._input.next();
      var f39 = "#";
      if (this._input.hasNext() && this._input.testChar(y33)) {
        do
          c27 = this._input.next(), f39 += c27;
        while (this._input.hasNext() && c27 !== "#" && c27 !== "=");
        return c27 === "#" || (this._input.peek() === "[" && this._input.peek(1) === "]" ? (f39 += "[]", this._input.next(), this._input.next()) : this._input.peek() === "{" && this._input.peek(1) === "}" && (f39 += "{}", this._input.next(), this._input.next())), this._create_token(l25.WORD, f39);
      }
      this._input.back();
    } else if (c27 === "<" && this._is_first_token()) {
      if (b33 = this.__patterns.html_comment_start.read(), b33) {
        for (; this._input.hasNext() && !this._input.testChar(r24.newline); )
          b33 += this._input.next();
        return T20 = true, this._create_token(l25.COMMENT, b33);
      }
    } else if (T20 && c27 === "-" && (b33 = this.__patterns.html_comment_end.read(), b33))
      return T20 = false, this._create_token(l25.COMMENT, b33);
    return null;
  }, E24.prototype._read_comment = function(c27) {
    var b33 = null;
    if (c27 === "/") {
      var f39 = "";
      if (this._input.peek(1) === "*") {
        f39 = this.__patterns.block_comment.read();
        var S21 = O20.get_directives(f39);
        S21 && S21.ignore === "start" && (f39 += O20.readIgnored(this._input)), f39 = f39.replace(r24.allLineBreaks, `
`), b33 = this._create_token(l25.BLOCK_COMMENT, f39), b33.directives = S21;
      } else
        this._input.peek(1) === "/" && (f39 = this.__patterns.comment.read(), b33 = this._create_token(l25.COMMENT, f39));
    }
    return b33;
  }, E24.prototype._read_string = function(c27) {
    if (c27 === "`" || c27 === "'" || c27 === '"') {
      var b33 = this._input.next();
      return this.has_char_escapes = false, c27 === "`" ? b33 += this._read_string_recursive("`", true, "${") : b33 += this._read_string_recursive(c27), this.has_char_escapes && this._options.unescape_strings && (b33 = k27(b33)), this._input.peek() === c27 && (b33 += this._input.next()), b33 = b33.replace(r24.allLineBreaks, `
`), this._create_token(l25.STRING, b33);
    }
    return null;
  }, E24.prototype._allow_regexp_or_xml = function(c27) {
    return c27.type === l25.RESERVED && u35(c27.text, ["return", "case", "throw", "else", "do", "typeof", "yield"]) || c27.type === l25.END_EXPR && c27.text === ")" && c27.opened.previous.type === l25.RESERVED && u35(c27.opened.previous.text, ["if", "while", "for"]) || u35(c27.type, [
      l25.COMMENT,
      l25.START_EXPR,
      l25.START_BLOCK,
      l25.START,
      l25.END_BLOCK,
      l25.OPERATOR,
      l25.EQUALS,
      l25.EOF,
      l25.SEMICOLON,
      l25.COMMA
    ]);
  }, E24.prototype._read_regexp = function(c27, b33) {
    if (c27 === "/" && this._allow_regexp_or_xml(b33)) {
      for (var f39 = this._input.next(), S21 = false, s18 = false; this._input.hasNext() && (S21 || s18 || this._input.peek() !== c27) && !this._input.testChar(r24.newline); )
        f39 += this._input.peek(), S21 ? S21 = false : (S21 = this._input.peek() === "\\", this._input.peek() === "[" ? s18 = true : this._input.peek() === "]" && (s18 = false)), this._input.next();
      return this._input.peek() === c27 && (f39 += this._input.next(), f39 += this._input.read(r24.identifier)), this._create_token(l25.STRING, f39);
    }
    return null;
  }, E24.prototype._read_xml = function(c27, b33) {
    if (this._options.e4x && c27 === "<" && this._allow_regexp_or_xml(b33)) {
      var f39 = "", S21 = this.__patterns.xml.read_match();
      if (S21) {
        for (var s18 = S21[2].replace(/^{\s+/, "{").replace(/\s+}$/, "}"), d34 = s18.indexOf("{") === 0, m33 = 0; S21; ) {
          var R20 = !!S21[1], N19 = S21[2], W8 = !!S21[S21.length - 1] || N19.slice(0, 8) === "![CDATA[";
          if (!W8 && (N19 === s18 || d34 && N19.replace(/^{\s+/, "{").replace(/\s+}$/, "}")) && (R20 ? --m33 : ++m33), f39 += S21[0], m33 <= 0)
            break;
          S21 = this.__patterns.xml.read_match();
        }
        return S21 || (f39 += this._input.match(/[\s\S]*/g)[0]), f39 = f39.replace(r24.allLineBreaks, `
`), this._create_token(l25.STRING, f39);
      }
    }
    return null;
  };
  function k27(c27) {
    for (var b33 = "", f39 = 0, S21 = new a22(c27), s18 = null; S21.hasNext(); )
      if (s18 = S21.match(/([\s]|[^\\]|\\\\)+/g), s18 && (b33 += s18[0]), S21.peek() === "\\") {
        if (S21.next(), S21.peek() === "x")
          s18 = S21.match(/x([0-9A-Fa-f]{2})/g);
        else if (S21.peek() === "u")
          s18 = S21.match(/u([0-9A-Fa-f]{4})/g), s18 || (s18 = S21.match(/u\{([0-9A-Fa-f]+)\}/g));
        else {
          b33 += "\\", S21.hasNext() && (b33 += S21.next());
          continue;
        }
        if (!s18 || (f39 = parseInt(s18[1], 16), f39 > 126 && f39 <= 255 && s18[0].indexOf("x") === 0))
          return c27;
        f39 >= 0 && f39 < 32 || f39 > 1114111 ? b33 += "\\" + s18[0] : f39 === 34 || f39 === 39 || f39 === 92 ? b33 += "\\" + String.fromCharCode(f39) : b33 += String.fromCharCode(f39);
      }
    return b33;
  }
  return E24.prototype._read_string_recursive = function(c27, b33, f39) {
    var S21, s18;
    c27 === "'" ? s18 = this.__patterns.single_quote : c27 === '"' ? s18 = this.__patterns.double_quote : c27 === "`" ? s18 = this.__patterns.template_text : c27 === "}" && (s18 = this.__patterns.template_expression);
    for (var d34 = s18.read(), m33 = ""; this._input.hasNext(); ) {
      if (m33 = this._input.next(), m33 === c27 || !b33 && r24.newline.test(m33)) {
        this._input.back();
        break;
      } else
        m33 === "\\" && this._input.hasNext() ? (S21 = this._input.peek(), S21 === "x" || S21 === "u" ? this.has_char_escapes = true : S21 === "\r" && this._input.peek(1) === `
` && this._input.next(), m33 += this._input.next()) : f39 && (f39 === "${" && m33 === "$" && this._input.peek() === "{" && (m33 += this._input.next()), f39 === m33 && (c27 === "`" ? m33 += this._read_string_recursive("}", b33, "`") : m33 += this._read_string_recursive("`", b33, "${"), this._input.hasNext() && (m33 += this._input.next())));
      m33 += s18.read(), d34 += m33;
    }
    return d34;
  }, Y6.Tokenizer = E24, Y6.TOKEN = l25, Y6.positionable_operators = C19.slice(), Y6.line_starters = o12.slice(), Y6;
}
var Xe5;
function Gi() {
  if (Xe5)
    return Kt5;
  Xe5 = 1;
  var a22 = me6().Output, t19 = bi5().Token, i27 = mi5(), e11 = vi5().Options, r24 = mt8().Tokenizer, _19 = mt8().line_starters, h26 = mt8().positionable_operators, u35 = mt8().TOKEN;
  function l25(s18, d34) {
    return d34.indexOf(s18) !== -1;
  }
  function O20(s18) {
    return s18.replace(/^\s+/g, "");
  }
  function v30(s18) {
    for (var d34 = {}, m33 = 0; m33 < s18.length; m33++)
      d34[s18[m33].replace(/-/g, "_")] = s18[m33];
    return d34;
  }
  function y33(s18, d34) {
    return s18 && s18.type === u35.RESERVED && s18.text === d34;
  }
  function g31(s18, d34) {
    return s18 && s18.type === u35.RESERVED && l25(s18.text, d34);
  }
  var C19 = ["case", "return", "do", "if", "throw", "else", "await", "break", "continue", "async"], A17 = ["before-newline", "after-newline", "preserve-newline"], x34 = v30(A17), o12 = [x34.before_newline, x34.preserve_newline], n33 = {
    BlockStatement: "BlockStatement",
    // 'BLOCK'
    Statement: "Statement",
    // 'STATEMENT'
    ObjectLiteral: "ObjectLiteral",
    // 'OBJECT',
    ArrayLiteral: "ArrayLiteral",
    //'[EXPRESSION]',
    ForInitializer: "ForInitializer",
    //'(FOR-EXPRESSION)',
    Conditional: "Conditional",
    //'(COND-EXPRESSION)',
    Expression: "Expression"
    //'(EXPRESSION)'
  };
  function p26(s18, d34) {
    d34.multiline_frame || d34.mode === n33.ForInitializer || d34.mode === n33.Conditional || s18.remove_indent(d34.start_line_index);
  }
  function T20(s18) {
    s18 = s18.replace(i27.allLineBreaks, `
`);
    for (var d34 = [], m33 = s18.indexOf(`
`); m33 !== -1; )
      d34.push(s18.substring(0, m33)), s18 = s18.substring(m33 + 1), m33 = s18.indexOf(`
`);
    return s18.length && d34.push(s18), d34;
  }
  function E24(s18) {
    return s18 === n33.ArrayLiteral;
  }
  function k27(s18) {
    return l25(s18, [n33.Expression, n33.ForInitializer, n33.Conditional]);
  }
  function c27(s18, d34) {
    for (var m33 = 0; m33 < s18.length; m33++) {
      var R20 = s18[m33].trim();
      if (R20.charAt(0) !== d34)
        return false;
    }
    return true;
  }
  function b33(s18, d34) {
    for (var m33 = 0, R20 = s18.length, N19; m33 < R20; m33++)
      if (N19 = s18[m33], N19 && N19.indexOf(d34) !== 0)
        return false;
    return true;
  }
  function f39(s18, d34) {
    d34 = d34 || {}, this._source_text = s18 || "", this._output = null, this._tokens = null, this._last_last_text = null, this._flags = null, this._previous_flags = null, this._flag_store = null, this._options = new e11(d34);
  }
  f39.prototype.create_flags = function(s18, d34) {
    var m33 = 0;
    s18 && (m33 = s18.indentation_level, !this._output.just_added_newline() && s18.line_indent_level > m33 && (m33 = s18.line_indent_level));
    var R20 = {
      mode: d34,
      parent: s18,
      last_token: s18 ? s18.last_token : new t19(u35.START_BLOCK, ""),
      // last token text
      last_word: s18 ? s18.last_word : "",
      // last TOKEN.WORD passed
      declaration_statement: false,
      declaration_assignment: false,
      multiline_frame: false,
      inline_frame: false,
      if_block: false,
      else_block: false,
      class_start_block: false,
      // class A { INSIDE HERE } or class B extends C { INSIDE HERE }
      do_block: false,
      do_while: false,
      import_block: false,
      in_case_statement: false,
      // switch(..){ INSIDE HERE }
      in_case: false,
      // we're on the exact line with "case 0:"
      case_body: false,
      // the indented case-action block
      case_block: false,
      // the indented case-action block is wrapped with {}
      indentation_level: m33,
      alignment: 0,
      line_indent_level: s18 ? s18.line_indent_level : m33,
      start_line_index: this._output.get_line_number(),
      ternary_depth: 0
    };
    return R20;
  }, f39.prototype._reset = function(s18) {
    var d34 = s18.match(/^[\t ]*/)[0];
    this._last_last_text = "", this._output = new a22(this._options, d34), this._output.raw = this._options.test_output_raw, this._flag_store = [], this.set_mode(n33.BlockStatement);
    var m33 = new r24(s18, this._options);
    return this._tokens = m33.tokenize(), s18;
  }, f39.prototype.beautify = function() {
    if (this._options.disabled)
      return this._source_text;
    var s18, d34 = this._reset(this._source_text), m33 = this._options.eol;
    this._options.eol === "auto" && (m33 = `
`, d34 && i27.lineBreak.test(d34 || "") && (m33 = d34.match(i27.lineBreak)[0]));
    for (var R20 = this._tokens.next(); R20; )
      this.handle_token(R20), this._last_last_text = this._flags.last_token.text, this._flags.last_token = R20, R20 = this._tokens.next();
    return s18 = this._output.get_code(m33), s18;
  }, f39.prototype.handle_token = function(s18, d34) {
    s18.type === u35.START_EXPR ? this.handle_start_expr(s18) : s18.type === u35.END_EXPR ? this.handle_end_expr(s18) : s18.type === u35.START_BLOCK ? this.handle_start_block(s18) : s18.type === u35.END_BLOCK ? this.handle_end_block(s18) : s18.type === u35.WORD ? this.handle_word(s18) : s18.type === u35.RESERVED ? this.handle_word(s18) : s18.type === u35.SEMICOLON ? this.handle_semicolon(s18) : s18.type === u35.STRING ? this.handle_string(s18) : s18.type === u35.EQUALS ? this.handle_equals(s18) : s18.type === u35.OPERATOR ? this.handle_operator(s18) : s18.type === u35.COMMA ? this.handle_comma(s18) : s18.type === u35.BLOCK_COMMENT ? this.handle_block_comment(s18, d34) : s18.type === u35.COMMENT ? this.handle_comment(s18, d34) : s18.type === u35.DOT ? this.handle_dot(s18) : s18.type === u35.EOF ? this.handle_eof(s18) : s18.type === u35.UNKNOWN ? this.handle_unknown(s18, d34) : this.handle_unknown(s18, d34);
  }, f39.prototype.handle_whitespace_and_comments = function(s18, d34) {
    var m33 = s18.newlines, R20 = this._options.keep_array_indentation && E24(this._flags.mode);
    if (s18.comments_before)
      for (var N19 = s18.comments_before.next(); N19; )
        this.handle_whitespace_and_comments(N19, d34), this.handle_token(N19, d34), N19 = s18.comments_before.next();
    if (R20)
      for (var W8 = 0; W8 < m33; W8 += 1)
        this.print_newline(W8 > 0, d34);
    else if (this._options.max_preserve_newlines && m33 > this._options.max_preserve_newlines && (m33 = this._options.max_preserve_newlines), this._options.preserve_newlines && m33 > 1) {
      this.print_newline(false, d34);
      for (var M12 = 1; M12 < m33; M12 += 1)
        this.print_newline(true, d34);
    }
  };
  var S21 = ["async", "break", "continue", "return", "throw", "yield"];
  return f39.prototype.allow_wrap_or_preserved_newline = function(s18, d34) {
    if (d34 = d34 === void 0 ? false : d34, !this._output.just_added_newline()) {
      var m33 = this._options.preserve_newlines && s18.newlines || d34, R20 = l25(this._flags.last_token.text, h26) || l25(s18.text, h26);
      if (R20) {
        var N19 = l25(this._flags.last_token.text, h26) && l25(this._options.operator_position, o12) || l25(s18.text, h26);
        m33 = m33 && N19;
      }
      if (m33)
        this.print_newline(false, true);
      else if (this._options.wrap_line_length) {
        if (g31(this._flags.last_token, S21))
          return;
        this._output.set_wrap_point();
      }
    }
  }, f39.prototype.print_newline = function(s18, d34) {
    if (!d34 && this._flags.last_token.text !== ";" && this._flags.last_token.text !== "," && this._flags.last_token.text !== "=" && (this._flags.last_token.type !== u35.OPERATOR || this._flags.last_token.text === "--" || this._flags.last_token.text === "++"))
      for (var m33 = this._tokens.peek(); this._flags.mode === n33.Statement && !(this._flags.if_block && y33(m33, "else")) && !this._flags.do_block; )
        this.restore_mode();
    this._output.add_new_line(s18) && (this._flags.multiline_frame = true);
  }, f39.prototype.print_token_line_indentation = function(s18) {
    this._output.just_added_newline() && (this._options.keep_array_indentation && s18.newlines && (s18.text === "[" || E24(this._flags.mode)) ? (this._output.current_line.set_indent(-1), this._output.current_line.push(s18.whitespace_before), this._output.space_before_token = false) : this._output.set_indent(this._flags.indentation_level, this._flags.alignment) && (this._flags.line_indent_level = this._flags.indentation_level));
  }, f39.prototype.print_token = function(s18) {
    if (this._output.raw) {
      this._output.add_raw_token(s18);
      return;
    }
    if (this._options.comma_first && s18.previous && s18.previous.type === u35.COMMA && this._output.just_added_newline() && this._output.previous_line.last() === ",") {
      var d34 = this._output.previous_line.pop();
      this._output.previous_line.is_empty() && (this._output.previous_line.push(d34), this._output.trim(true), this._output.current_line.pop(), this._output.trim()), this.print_token_line_indentation(s18), this._output.add_token(","), this._output.space_before_token = true;
    }
    this.print_token_line_indentation(s18), this._output.non_breaking_space = true, this._output.add_token(s18.text), this._output.previous_token_wrapped && (this._flags.multiline_frame = true);
  }, f39.prototype.indent = function() {
    this._flags.indentation_level += 1, this._output.set_indent(this._flags.indentation_level, this._flags.alignment);
  }, f39.prototype.deindent = function() {
    this._flags.indentation_level > 0 && (!this._flags.parent || this._flags.indentation_level > this._flags.parent.indentation_level) && (this._flags.indentation_level -= 1, this._output.set_indent(this._flags.indentation_level, this._flags.alignment));
  }, f39.prototype.set_mode = function(s18) {
    this._flags ? (this._flag_store.push(this._flags), this._previous_flags = this._flags) : this._previous_flags = this.create_flags(null, s18), this._flags = this.create_flags(this._previous_flags, s18), this._output.set_indent(this._flags.indentation_level, this._flags.alignment);
  }, f39.prototype.restore_mode = function() {
    this._flag_store.length > 0 && (this._previous_flags = this._flags, this._flags = this._flag_store.pop(), this._previous_flags.mode === n33.Statement && p26(this._output, this._previous_flags), this._output.set_indent(this._flags.indentation_level, this._flags.alignment));
  }, f39.prototype.start_of_object_property = function() {
    return this._flags.parent.mode === n33.ObjectLiteral && this._flags.mode === n33.Statement && (this._flags.last_token.text === ":" && this._flags.ternary_depth === 0 || g31(this._flags.last_token, ["get", "set"]));
  }, f39.prototype.start_of_statement = function(s18) {
    var d34 = false;
    return d34 = d34 || g31(this._flags.last_token, ["var", "let", "const"]) && s18.type === u35.WORD, d34 = d34 || y33(this._flags.last_token, "do"), d34 = d34 || !(this._flags.parent.mode === n33.ObjectLiteral && this._flags.mode === n33.Statement) && g31(this._flags.last_token, S21) && !s18.newlines, d34 = d34 || y33(this._flags.last_token, "else") && !(y33(s18, "if") && !s18.comments_before), d34 = d34 || this._flags.last_token.type === u35.END_EXPR && (this._previous_flags.mode === n33.ForInitializer || this._previous_flags.mode === n33.Conditional), d34 = d34 || this._flags.last_token.type === u35.WORD && this._flags.mode === n33.BlockStatement && !this._flags.in_case && !(s18.text === "--" || s18.text === "++") && this._last_last_text !== "function" && s18.type !== u35.WORD && s18.type !== u35.RESERVED, d34 = d34 || this._flags.mode === n33.ObjectLiteral && (this._flags.last_token.text === ":" && this._flags.ternary_depth === 0 || g31(this._flags.last_token, ["get", "set"])), d34 ? (this.set_mode(n33.Statement), this.indent(), this.handle_whitespace_and_comments(s18, true), this.start_of_object_property() || this.allow_wrap_or_preserved_newline(
      s18,
      g31(s18, ["do", "for", "if", "while"])
    ), true) : false;
  }, f39.prototype.handle_start_expr = function(s18) {
    this.start_of_statement(s18) || this.handle_whitespace_and_comments(s18);
    var d34 = n33.Expression;
    if (s18.text === "[") {
      if (this._flags.last_token.type === u35.WORD || this._flags.last_token.text === ")") {
        g31(this._flags.last_token, _19) && (this._output.space_before_token = true), this.print_token(s18), this.set_mode(d34), this.indent(), this._options.space_in_paren && (this._output.space_before_token = true);
        return;
      }
      d34 = n33.ArrayLiteral, E24(this._flags.mode) && (this._flags.last_token.text === "[" || this._flags.last_token.text === "," && (this._last_last_text === "]" || this._last_last_text === "}")) && (this._options.keep_array_indentation || this.print_newline()), l25(this._flags.last_token.type, [u35.START_EXPR, u35.END_EXPR, u35.WORD, u35.OPERATOR, u35.DOT]) || (this._output.space_before_token = true);
    } else {
      if (this._flags.last_token.type === u35.RESERVED)
        this._flags.last_token.text === "for" ? (this._output.space_before_token = this._options.space_before_conditional, d34 = n33.ForInitializer) : l25(this._flags.last_token.text, ["if", "while", "switch"]) ? (this._output.space_before_token = this._options.space_before_conditional, d34 = n33.Conditional) : l25(this._flags.last_word, ["await", "async"]) ? this._output.space_before_token = true : this._flags.last_token.text === "import" && s18.whitespace_before === "" ? this._output.space_before_token = false : (l25(this._flags.last_token.text, _19) || this._flags.last_token.text === "catch") && (this._output.space_before_token = true);
      else if (this._flags.last_token.type === u35.EQUALS || this._flags.last_token.type === u35.OPERATOR)
        this.start_of_object_property() || this.allow_wrap_or_preserved_newline(s18);
      else if (this._flags.last_token.type === u35.WORD) {
        this._output.space_before_token = false;
        var m33 = this._tokens.peek(-3);
        if (this._options.space_after_named_function && m33) {
          var R20 = this._tokens.peek(-4);
          g31(m33, ["async", "function"]) || m33.text === "*" && g31(R20, ["async", "function"]) ? this._output.space_before_token = true : this._flags.mode === n33.ObjectLiteral ? (m33.text === "{" || m33.text === "," || m33.text === "*" && (R20.text === "{" || R20.text === ",")) && (this._output.space_before_token = true) : this._flags.parent && this._flags.parent.class_start_block && (this._output.space_before_token = true);
        }
      } else
        this.allow_wrap_or_preserved_newline(s18);
      (this._flags.last_token.type === u35.RESERVED && (this._flags.last_word === "function" || this._flags.last_word === "typeof") || this._flags.last_token.text === "*" && (l25(this._last_last_text, ["function", "yield"]) || this._flags.mode === n33.ObjectLiteral && l25(this._last_last_text, ["{", ","]))) && (this._output.space_before_token = this._options.space_after_anon_function);
    }
    this._flags.last_token.text === ";" || this._flags.last_token.type === u35.START_BLOCK ? this.print_newline() : (this._flags.last_token.type === u35.END_EXPR || this._flags.last_token.type === u35.START_EXPR || this._flags.last_token.type === u35.END_BLOCK || this._flags.last_token.text === "." || this._flags.last_token.type === u35.COMMA) && this.allow_wrap_or_preserved_newline(s18, s18.newlines), this.print_token(s18), this.set_mode(d34), this._options.space_in_paren && (this._output.space_before_token = true), this.indent();
  }, f39.prototype.handle_end_expr = function(s18) {
    for (; this._flags.mode === n33.Statement; )
      this.restore_mode();
    this.handle_whitespace_and_comments(s18), this._flags.multiline_frame && this.allow_wrap_or_preserved_newline(
      s18,
      s18.text === "]" && E24(this._flags.mode) && !this._options.keep_array_indentation
    ), this._options.space_in_paren && (this._flags.last_token.type === u35.START_EXPR && !this._options.space_in_empty_paren ? (this._output.trim(), this._output.space_before_token = false) : this._output.space_before_token = true), this.deindent(), this.print_token(s18), this.restore_mode(), p26(this._output, this._previous_flags), this._flags.do_while && this._previous_flags.mode === n33.Conditional && (this._previous_flags.mode = n33.Expression, this._flags.do_block = false, this._flags.do_while = false);
  }, f39.prototype.handle_start_block = function(s18) {
    this.handle_whitespace_and_comments(s18);
    var d34 = this._tokens.peek(), m33 = this._tokens.peek(1);
    this._flags.last_word === "switch" && this._flags.last_token.type === u35.END_EXPR ? (this.set_mode(n33.BlockStatement), this._flags.in_case_statement = true) : this._flags.case_body ? this.set_mode(n33.BlockStatement) : m33 && (l25(m33.text, [":", ","]) && l25(d34.type, [u35.STRING, u35.WORD, u35.RESERVED]) || l25(d34.text, ["get", "set", "..."]) && l25(m33.type, [u35.WORD, u35.RESERVED])) ? l25(this._last_last_text, ["class", "interface"]) && !l25(m33.text, [":", ","]) ? this.set_mode(n33.BlockStatement) : this.set_mode(n33.ObjectLiteral) : this._flags.last_token.type === u35.OPERATOR && this._flags.last_token.text === "=>" ? this.set_mode(n33.BlockStatement) : l25(this._flags.last_token.type, [u35.EQUALS, u35.START_EXPR, u35.COMMA, u35.OPERATOR]) || g31(this._flags.last_token, ["return", "throw", "import", "default"]) ? this.set_mode(n33.ObjectLiteral) : this.set_mode(n33.BlockStatement), this._flags.last_token && g31(this._flags.last_token.previous, ["class", "extends"]) && (this._flags.class_start_block = true);
    var R20 = !d34.comments_before && d34.text === "}", N19 = R20 && this._flags.last_word === "function" && this._flags.last_token.type === u35.END_EXPR;
    if (this._options.brace_preserve_inline) {
      var W8 = 0, M12 = null;
      this._flags.inline_frame = true;
      do
        if (W8 += 1, M12 = this._tokens.peek(W8 - 1), M12.newlines) {
          this._flags.inline_frame = false;
          break;
        }
      while (M12.type !== u35.EOF && !(M12.type === u35.END_BLOCK && M12.opened === s18));
    }
    (this._options.brace_style === "expand" || this._options.brace_style === "none" && s18.newlines) && !this._flags.inline_frame ? this._flags.last_token.type !== u35.OPERATOR && (N19 || this._flags.last_token.type === u35.EQUALS || g31(this._flags.last_token, C19) && this._flags.last_token.text !== "else") ? this._output.space_before_token = true : this.print_newline(false, true) : (E24(this._previous_flags.mode) && (this._flags.last_token.type === u35.START_EXPR || this._flags.last_token.type === u35.COMMA) && ((this._flags.last_token.type === u35.COMMA || this._options.space_in_paren) && (this._output.space_before_token = true), (this._flags.last_token.type === u35.COMMA || this._flags.last_token.type === u35.START_EXPR && this._flags.inline_frame) && (this.allow_wrap_or_preserved_newline(s18), this._previous_flags.multiline_frame = this._previous_flags.multiline_frame || this._flags.multiline_frame, this._flags.multiline_frame = false)), this._flags.last_token.type !== u35.OPERATOR && this._flags.last_token.type !== u35.START_EXPR && (l25(this._flags.last_token.type, [u35.START_BLOCK, u35.SEMICOLON]) && !this._flags.inline_frame ? this.print_newline() : this._output.space_before_token = true)), this.print_token(s18), this.indent(), !R20 && !(this._options.brace_preserve_inline && this._flags.inline_frame) && this.print_newline();
  }, f39.prototype.handle_end_block = function(s18) {
    for (this.handle_whitespace_and_comments(s18); this._flags.mode === n33.Statement; )
      this.restore_mode();
    var d34 = this._flags.last_token.type === u35.START_BLOCK;
    this._flags.inline_frame && !d34 ? this._output.space_before_token = true : this._options.brace_style === "expand" ? d34 || this.print_newline() : d34 || (E24(this._flags.mode) && this._options.keep_array_indentation ? (this._options.keep_array_indentation = false, this.print_newline(), this._options.keep_array_indentation = true) : this.print_newline()), this.restore_mode(), this.print_token(s18);
  }, f39.prototype.handle_word = function(s18) {
    if (s18.type === u35.RESERVED) {
      if (l25(s18.text, ["set", "get"]) && this._flags.mode !== n33.ObjectLiteral)
        s18.type = u35.WORD;
      else if (s18.text === "import" && l25(this._tokens.peek().text, ["(", "."]))
        s18.type = u35.WORD;
      else if (l25(s18.text, ["as", "from"]) && !this._flags.import_block)
        s18.type = u35.WORD;
      else if (this._flags.mode === n33.ObjectLiteral) {
        var d34 = this._tokens.peek();
        d34.text === ":" && (s18.type = u35.WORD);
      }
    }
    if (this.start_of_statement(s18) ? g31(this._flags.last_token, ["var", "let", "const"]) && s18.type === u35.WORD && (this._flags.declaration_statement = true) : s18.newlines && !k27(this._flags.mode) && (this._flags.last_token.type !== u35.OPERATOR || this._flags.last_token.text === "--" || this._flags.last_token.text === "++") && this._flags.last_token.type !== u35.EQUALS && (this._options.preserve_newlines || !g31(this._flags.last_token, ["var", "let", "const", "set", "get"])) ? (this.handle_whitespace_and_comments(s18), this.print_newline()) : this.handle_whitespace_and_comments(s18), this._flags.do_block && !this._flags.do_while)
      if (y33(s18, "while")) {
        this._output.space_before_token = true, this.print_token(s18), this._output.space_before_token = true, this._flags.do_while = true;
        return;
      } else
        this.print_newline(), this._flags.do_block = false;
    if (this._flags.if_block)
      if (!this._flags.else_block && y33(s18, "else"))
        this._flags.else_block = true;
      else {
        for (; this._flags.mode === n33.Statement; )
          this.restore_mode();
        this._flags.if_block = false, this._flags.else_block = false;
      }
    if (this._flags.in_case_statement && g31(s18, ["case", "default"])) {
      this.print_newline(), !this._flags.case_block && (this._flags.case_body || this._options.jslint_happy) && this.deindent(), this._flags.case_body = false, this.print_token(s18), this._flags.in_case = true;
      return;
    }
    if ((this._flags.last_token.type === u35.COMMA || this._flags.last_token.type === u35.START_EXPR || this._flags.last_token.type === u35.EQUALS || this._flags.last_token.type === u35.OPERATOR) && !this.start_of_object_property() && !// start of object property is different for numeric values with +/- prefix operators
    (l25(this._flags.last_token.text, ["+", "-"]) && this._last_last_text === ":" && this._flags.parent.mode === n33.ObjectLiteral) && this.allow_wrap_or_preserved_newline(s18), y33(s18, "function")) {
      (l25(this._flags.last_token.text, ["}", ";"]) || this._output.just_added_newline() && !(l25(this._flags.last_token.text, ["(", "[", "{", ":", "=", ","]) || this._flags.last_token.type === u35.OPERATOR)) && !this._output.just_added_blankline() && !s18.comments_before && (this.print_newline(), this.print_newline(true)), this._flags.last_token.type === u35.RESERVED || this._flags.last_token.type === u35.WORD ? g31(this._flags.last_token, ["get", "set", "new", "export"]) || g31(this._flags.last_token, S21) ? this._output.space_before_token = true : y33(this._flags.last_token, "default") && this._last_last_text === "export" ? this._output.space_before_token = true : this._flags.last_token.text === "declare" ? this._output.space_before_token = true : this.print_newline() : this._flags.last_token.type === u35.OPERATOR || this._flags.last_token.text === "=" ? this._output.space_before_token = true : !this._flags.multiline_frame && (k27(this._flags.mode) || E24(this._flags.mode)) || this.print_newline(), this.print_token(s18), this._flags.last_word = s18.text;
      return;
    }
    var m33 = "NONE";
    if (this._flags.last_token.type === u35.END_BLOCK ? this._previous_flags.inline_frame ? m33 = "SPACE" : g31(s18, ["else", "catch", "finally", "from"]) ? this._options.brace_style === "expand" || this._options.brace_style === "end-expand" || this._options.brace_style === "none" && s18.newlines ? m33 = "NEWLINE" : (m33 = "SPACE", this._output.space_before_token = true) : m33 = "NEWLINE" : this._flags.last_token.type === u35.SEMICOLON && this._flags.mode === n33.BlockStatement ? m33 = "NEWLINE" : this._flags.last_token.type === u35.SEMICOLON && k27(this._flags.mode) ? m33 = "SPACE" : this._flags.last_token.type === u35.STRING ? m33 = "NEWLINE" : this._flags.last_token.type === u35.RESERVED || this._flags.last_token.type === u35.WORD || this._flags.last_token.text === "*" && (l25(this._last_last_text, ["function", "yield"]) || this._flags.mode === n33.ObjectLiteral && l25(this._last_last_text, ["{", ","])) ? m33 = "SPACE" : this._flags.last_token.type === u35.START_BLOCK ? this._flags.inline_frame ? m33 = "SPACE" : m33 = "NEWLINE" : this._flags.last_token.type === u35.END_EXPR && (this._output.space_before_token = true, m33 = "NEWLINE"), g31(s18, _19) && this._flags.last_token.text !== ")" && (this._flags.inline_frame || this._flags.last_token.text === "else" || this._flags.last_token.text === "export" ? m33 = "SPACE" : m33 = "NEWLINE"), g31(s18, ["else", "catch", "finally"]))
      if ((!(this._flags.last_token.type === u35.END_BLOCK && this._previous_flags.mode === n33.BlockStatement) || this._options.brace_style === "expand" || this._options.brace_style === "end-expand" || this._options.brace_style === "none" && s18.newlines) && !this._flags.inline_frame)
        this.print_newline();
      else {
        this._output.trim(true);
        var R20 = this._output.current_line;
        R20.last() !== "}" && this.print_newline(), this._output.space_before_token = true;
      }
    else
      m33 === "NEWLINE" ? g31(this._flags.last_token, C19) ? this._output.space_before_token = true : this._flags.last_token.text === "declare" && g31(s18, ["var", "let", "const"]) ? this._output.space_before_token = true : this._flags.last_token.type !== u35.END_EXPR ? (this._flags.last_token.type !== u35.START_EXPR || !g31(s18, ["var", "let", "const"])) && this._flags.last_token.text !== ":" && (y33(s18, "if") && y33(s18.previous, "else") ? this._output.space_before_token = true : this.print_newline()) : g31(s18, _19) && this._flags.last_token.text !== ")" && this.print_newline() : this._flags.multiline_frame && E24(this._flags.mode) && this._flags.last_token.text === "," && this._last_last_text === "}" ? this.print_newline() : m33 === "SPACE" && (this._output.space_before_token = true);
    s18.previous && (s18.previous.type === u35.WORD || s18.previous.type === u35.RESERVED) && (this._output.space_before_token = true), this.print_token(s18), this._flags.last_word = s18.text, s18.type === u35.RESERVED && (s18.text === "do" ? this._flags.do_block = true : s18.text === "if" ? this._flags.if_block = true : s18.text === "import" ? this._flags.import_block = true : this._flags.import_block && y33(s18, "from") && (this._flags.import_block = false));
  }, f39.prototype.handle_semicolon = function(s18) {
    this.start_of_statement(s18) ? this._output.space_before_token = false : this.handle_whitespace_and_comments(s18);
    for (var d34 = this._tokens.peek(); this._flags.mode === n33.Statement && !(this._flags.if_block && y33(d34, "else")) && !this._flags.do_block; )
      this.restore_mode();
    this._flags.import_block && (this._flags.import_block = false), this.print_token(s18);
  }, f39.prototype.handle_string = function(s18) {
    s18.text.startsWith("`") && s18.newlines === 0 && s18.whitespace_before === "" && (s18.previous.text === ")" || this._flags.last_token.type === u35.WORD) || (this.start_of_statement(s18) ? this._output.space_before_token = true : (this.handle_whitespace_and_comments(s18), this._flags.last_token.type === u35.RESERVED || this._flags.last_token.type === u35.WORD || this._flags.inline_frame ? this._output.space_before_token = true : this._flags.last_token.type === u35.COMMA || this._flags.last_token.type === u35.START_EXPR || this._flags.last_token.type === u35.EQUALS || this._flags.last_token.type === u35.OPERATOR ? this.start_of_object_property() || this.allow_wrap_or_preserved_newline(s18) : s18.text.startsWith("`") && this._flags.last_token.type === u35.END_EXPR && (s18.previous.text === "]" || s18.previous.text === ")") && s18.newlines === 0 ? this._output.space_before_token = true : this.print_newline())), this.print_token(s18);
  }, f39.prototype.handle_equals = function(s18) {
    this.start_of_statement(s18) || this.handle_whitespace_and_comments(s18), this._flags.declaration_statement && (this._flags.declaration_assignment = true), this._output.space_before_token = true, this.print_token(s18), this._output.space_before_token = true;
  }, f39.prototype.handle_comma = function(s18) {
    this.handle_whitespace_and_comments(s18, true), this.print_token(s18), this._output.space_before_token = true, this._flags.declaration_statement ? (k27(this._flags.parent.mode) && (this._flags.declaration_assignment = false), this._flags.declaration_assignment ? (this._flags.declaration_assignment = false, this.print_newline(false, true)) : this._options.comma_first && this.allow_wrap_or_preserved_newline(s18)) : this._flags.mode === n33.ObjectLiteral || this._flags.mode === n33.Statement && this._flags.parent.mode === n33.ObjectLiteral ? (this._flags.mode === n33.Statement && this.restore_mode(), this._flags.inline_frame || this.print_newline()) : this._options.comma_first && this.allow_wrap_or_preserved_newline(s18);
  }, f39.prototype.handle_operator = function(s18) {
    var d34 = s18.text === "*" && (g31(this._flags.last_token, ["function", "yield"]) || l25(this._flags.last_token.type, [u35.START_BLOCK, u35.COMMA, u35.END_BLOCK, u35.SEMICOLON])), m33 = l25(s18.text, ["-", "+"]) && (l25(this._flags.last_token.type, [u35.START_BLOCK, u35.START_EXPR, u35.EQUALS, u35.OPERATOR]) || l25(this._flags.last_token.text, _19) || this._flags.last_token.text === ",");
    if (!this.start_of_statement(s18)) {
      var R20 = !d34;
      this.handle_whitespace_and_comments(s18, R20);
    }
    if (s18.text === "*" && this._flags.last_token.type === u35.DOT) {
      this.print_token(s18);
      return;
    }
    if (s18.text === "::") {
      this.print_token(s18);
      return;
    }
    if (l25(s18.text, ["-", "+"]) && this.start_of_object_property()) {
      this.print_token(s18);
      return;
    }
    if (this._flags.last_token.type === u35.OPERATOR && l25(this._options.operator_position, o12) && this.allow_wrap_or_preserved_newline(s18), s18.text === ":" && this._flags.in_case) {
      this.print_token(s18), this._flags.in_case = false, this._flags.case_body = true, this._tokens.peek().type !== u35.START_BLOCK ? (this.indent(), this.print_newline(), this._flags.case_block = false) : (this._flags.case_block = true, this._output.space_before_token = true);
      return;
    }
    var N19 = true, W8 = true, M12 = false;
    if (s18.text === ":" ? this._flags.ternary_depth === 0 ? N19 = false : (this._flags.ternary_depth -= 1, M12 = true) : s18.text === "?" && (this._flags.ternary_depth += 1), !m33 && !d34 && this._options.preserve_newlines && l25(s18.text, h26)) {
      var $24 = s18.text === ":", ct11 = $24 && M12, Wt9 = $24 && !M12;
      switch (this._options.operator_position) {
        case x34.before_newline:
          this._output.space_before_token = !Wt9, this.print_token(s18), (!$24 || ct11) && this.allow_wrap_or_preserved_newline(s18), this._output.space_before_token = true;
          return;
        case x34.after_newline:
          this._output.space_before_token = true, !$24 || ct11 ? this._tokens.peek().newlines ? this.print_newline(false, true) : this.allow_wrap_or_preserved_newline(s18) : this._output.space_before_token = false, this.print_token(s18), this._output.space_before_token = true;
          return;
        case x34.preserve_newline:
          Wt9 || this.allow_wrap_or_preserved_newline(s18), N19 = !(this._output.just_added_newline() || Wt9), this._output.space_before_token = N19, this.print_token(s18), this._output.space_before_token = true;
          return;
      }
    }
    if (d34) {
      this.allow_wrap_or_preserved_newline(s18), N19 = false;
      var xe6 = this._tokens.peek();
      W8 = xe6 && l25(xe6.type, [u35.WORD, u35.RESERVED]);
    } else if (s18.text === "...")
      this.allow_wrap_or_preserved_newline(s18), N19 = this._flags.last_token.type === u35.START_BLOCK, W8 = false;
    else if (l25(s18.text, ["--", "++", "!", "~"]) || m33) {
      if ((this._flags.last_token.type === u35.COMMA || this._flags.last_token.type === u35.START_EXPR) && this.allow_wrap_or_preserved_newline(s18), N19 = false, W8 = false, s18.newlines && (s18.text === "--" || s18.text === "++" || s18.text === "~")) {
        var Ee5 = g31(this._flags.last_token, C19) && s18.newlines;
        Ee5 && (this._previous_flags.if_block || this._previous_flags.else_block) && this.restore_mode(), this.print_newline(Ee5, true);
      }
      this._flags.last_token.text === ";" && k27(this._flags.mode) && (N19 = true), this._flags.last_token.type === u35.RESERVED ? N19 = true : this._flags.last_token.type === u35.END_EXPR ? N19 = !(this._flags.last_token.text === "]" && (s18.text === "--" || s18.text === "++")) : this._flags.last_token.type === u35.OPERATOR && (N19 = l25(s18.text, ["--", "-", "++", "+"]) && l25(this._flags.last_token.text, ["--", "-", "++", "+"]), l25(s18.text, ["+", "-"]) && l25(this._flags.last_token.text, ["--", "++"]) && (W8 = true)), (this._flags.mode === n33.BlockStatement && !this._flags.inline_frame || this._flags.mode === n33.Statement) && (this._flags.last_token.text === "{" || this._flags.last_token.text === ";") && this.print_newline();
    }
    this._output.space_before_token = this._output.space_before_token || N19, this.print_token(s18), this._output.space_before_token = W8;
  }, f39.prototype.handle_block_comment = function(s18, d34) {
    if (this._output.raw) {
      this._output.add_raw_token(s18), s18.directives && s18.directives.preserve === "end" && (this._output.raw = this._options.test_output_raw);
      return;
    }
    if (s18.directives) {
      this.print_newline(false, d34), this.print_token(s18), s18.directives.preserve === "start" && (this._output.raw = true), this.print_newline(false, true);
      return;
    }
    if (!i27.newline.test(s18.text) && !s18.newlines) {
      this._output.space_before_token = true, this.print_token(s18), this._output.space_before_token = true;
      return;
    } else
      this.print_block_commment(s18, d34);
  }, f39.prototype.print_block_commment = function(s18, d34) {
    var m33 = T20(s18.text), R20, N19 = false, W8 = false, M12 = s18.whitespace_before, $24 = M12.length;
    if (this.print_newline(false, d34), this.print_token_line_indentation(s18), this._output.add_token(m33[0]), this.print_newline(false, d34), m33.length > 1) {
      for (m33 = m33.slice(1), N19 = c27(m33, "*"), W8 = b33(m33, M12), N19 && (this._flags.alignment = 1), R20 = 0; R20 < m33.length; R20++)
        N19 ? (this.print_token_line_indentation(s18), this._output.add_token(O20(m33[R20]))) : W8 && m33[R20] ? (this.print_token_line_indentation(s18), this._output.add_token(m33[R20].substring($24))) : (this._output.current_line.set_indent(-1), this._output.add_token(m33[R20])), this.print_newline(false, d34);
      this._flags.alignment = 0;
    }
  }, f39.prototype.handle_comment = function(s18, d34) {
    s18.newlines ? this.print_newline(false, d34) : this._output.trim(true), this._output.space_before_token = true, this.print_token(s18), this.print_newline(false, d34);
  }, f39.prototype.handle_dot = function(s18) {
    this.start_of_statement(s18) || this.handle_whitespace_and_comments(s18, true), this._flags.last_token.text.match("^[0-9]+$") && (this._output.space_before_token = true), g31(this._flags.last_token, C19) ? this._output.space_before_token = false : this.allow_wrap_or_preserved_newline(
      s18,
      this._flags.last_token.text === ")" && this._options.break_chained_methods
    ), this._options.unindent_chained_methods && this._output.just_added_newline() && this.deindent(), this.print_token(s18);
  }, f39.prototype.handle_unknown = function(s18, d34) {
    this.print_token(s18), s18.text[s18.text.length - 1] === `
` && this.print_newline(false, d34);
  }, f39.prototype.handle_eof = function(s18) {
    for (; this._flags.mode === n33.Statement; )
      this.restore_mode();
    this.handle_whitespace_and_comments(s18);
  }, Kt5.Beautifier = f39, Kt5;
}
var Qe6;
function Xi2() {
  if (Qe6)
    return gt8.exports;
  Qe6 = 1;
  var a22 = Gi().Beautifier, t19 = vi5().Options;
  function i27(e11, r24) {
    var _19 = new a22(e11, r24);
    return _19.beautify();
  }
  return gt8.exports = i27, gt8.exports.defaultOptions = function() {
    return new t19();
  }, gt8.exports;
}
var vt5 = { exports: {} };
var Jt5 = {};
var Zt5 = {};
var He5;
function wi5() {
  if (He5)
    return Zt5;
  He5 = 1;
  var a22 = ve6().Options;
  function t19(i27) {
    a22.call(this, i27, "css"), this.selector_separator_newline = this._get_boolean("selector_separator_newline", true), this.newline_between_rules = this._get_boolean("newline_between_rules", true);
    var e11 = this._get_boolean("space_around_selector_separator");
    this.space_around_combinator = this._get_boolean("space_around_combinator") || e11;
    var r24 = this._get_selection_list("brace_style", ["collapse", "expand", "end-expand", "none", "preserve-inline"]);
    this.brace_style = "collapse";
    for (var _19 = 0; _19 < r24.length; _19++)
      r24[_19] !== "expand" ? this.brace_style = "collapse" : this.brace_style = r24[_19];
  }
  return t19.prototype = new a22(), Zt5.Options = t19, Zt5;
}
var Je5;
function Qi2() {
  if (Je5)
    return Jt5;
  Je5 = 1;
  var a22 = wi5().Options, t19 = me6().Output, i27 = ye5().InputScanner, e11 = we6().Directives, r24 = new e11(/\/\*/, /\*\//), _19 = /\r\n|[\r\n]/, h26 = /\r\n|[\r\n]/g, u35 = /\s/, l25 = /(?:\s|\n)+/g, O20 = /\/\*(?:[\s\S]*?)((?:\*\/)|$)/g, v30 = /\/\/(?:[^\n\r\u2028\u2029]*)/g;
  function y33(g31, C19) {
    this._source_text = g31 || "", this._options = new a22(C19), this._ch = null, this._input = null, this.NESTED_AT_RULE = {
      page: true,
      "font-face": true,
      keyframes: true,
      // also in CONDITIONAL_GROUP_RULE below
      media: true,
      supports: true,
      document: true
    }, this.CONDITIONAL_GROUP_RULE = {
      media: true,
      supports: true,
      document: true
    }, this.NON_SEMICOLON_NEWLINE_PROPERTY = [
      "grid-template-areas",
      "grid-template"
    ];
  }
  return y33.prototype.eatString = function(g31) {
    var C19 = "";
    for (this._ch = this._input.next(); this._ch; ) {
      if (C19 += this._ch, this._ch === "\\")
        C19 += this._input.next();
      else if (g31.indexOf(this._ch) !== -1 || this._ch === `
`)
        break;
      this._ch = this._input.next();
    }
    return C19;
  }, y33.prototype.eatWhitespace = function(g31) {
    for (var C19 = u35.test(this._input.peek()), A17 = 0; u35.test(this._input.peek()); )
      this._ch = this._input.next(), g31 && this._ch === `
` && (A17 === 0 || A17 < this._options.max_preserve_newlines) && (A17++, this._output.add_new_line(true));
    return C19;
  }, y33.prototype.foundNestedPseudoClass = function() {
    for (var g31 = 0, C19 = 1, A17 = this._input.peek(C19); A17; ) {
      if (A17 === "{")
        return true;
      if (A17 === "(")
        g31 += 1;
      else if (A17 === ")") {
        if (g31 === 0)
          return false;
        g31 -= 1;
      } else if (A17 === ";" || A17 === "}")
        return false;
      C19++, A17 = this._input.peek(C19);
    }
    return false;
  }, y33.prototype.print_string = function(g31) {
    this._output.set_indent(this._indentLevel), this._output.non_breaking_space = true, this._output.add_token(g31);
  }, y33.prototype.preserveSingleSpace = function(g31) {
    g31 && (this._output.space_before_token = true);
  }, y33.prototype.indent = function() {
    this._indentLevel++;
  }, y33.prototype.outdent = function() {
    this._indentLevel > 0 && this._indentLevel--;
  }, y33.prototype.beautify = function() {
    if (this._options.disabled)
      return this._source_text;
    var g31 = this._source_text, C19 = this._options.eol;
    C19 === "auto" && (C19 = `
`, g31 && _19.test(g31 || "") && (C19 = g31.match(_19)[0])), g31 = g31.replace(h26, `
`);
    var A17 = g31.match(/^[\t ]*/)[0];
    this._output = new t19(this._options, A17), this._input = new i27(g31), this._indentLevel = 0, this._nestedLevel = 0, this._ch = null;
    for (var x34 = 0, o12 = false, n33 = false, p26 = false, T20 = false, E24 = false, k27 = this._ch, c27 = false, b33, f39, S21; b33 = this._input.read(l25), f39 = b33 !== "", S21 = k27, this._ch = this._input.next(), this._ch === "\\" && this._input.hasNext() && (this._ch += this._input.next()), k27 = this._ch, this._ch; )
      if (this._ch === "/" && this._input.peek() === "*") {
        this._output.add_new_line(), this._input.back();
        var s18 = this._input.read(O20), d34 = r24.get_directives(s18);
        d34 && d34.ignore === "start" && (s18 += r24.readIgnored(this._input)), this.print_string(s18), this.eatWhitespace(true), this._output.add_new_line();
      } else if (this._ch === "/" && this._input.peek() === "/")
        this._output.space_before_token = true, this._input.back(), this.print_string(this._input.read(v30)), this.eatWhitespace(true);
      else if (this._ch === "$") {
        this.preserveSingleSpace(f39), this.print_string(this._ch);
        var m33 = this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);
        m33.match(/[ :]$/) && (m33 = this.eatString(": ").replace(/\s+$/, ""), this.print_string(m33), this._output.space_before_token = true), x34 === 0 && m33.indexOf(":") !== -1 && (n33 = true, this.indent());
      } else if (this._ch === "@")
        if (this.preserveSingleSpace(f39), this._input.peek() === "{")
          this.print_string(this._ch + this.eatString("}"));
        else {
          this.print_string(this._ch);
          var R20 = this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);
          R20.match(/[ :]$/) && (R20 = this.eatString(": ").replace(/\s+$/, ""), this.print_string(R20), this._output.space_before_token = true), x34 === 0 && R20.indexOf(":") !== -1 ? (n33 = true, this.indent()) : R20 in this.NESTED_AT_RULE ? (this._nestedLevel += 1, R20 in this.CONDITIONAL_GROUP_RULE && (p26 = true)) : x34 === 0 && !n33 && (T20 = true);
        }
      else if (this._ch === "#" && this._input.peek() === "{")
        this.preserveSingleSpace(f39), this.print_string(this._ch + this.eatString("}"));
      else if (this._ch === "{")
        n33 && (n33 = false, this.outdent()), T20 = false, p26 ? (p26 = false, o12 = this._indentLevel >= this._nestedLevel) : o12 = this._indentLevel >= this._nestedLevel - 1, this._options.newline_between_rules && o12 && this._output.previous_line && this._output.previous_line.item(-1) !== "{" && this._output.ensure_empty_line_above("/", ","), this._output.space_before_token = true, this._options.brace_style === "expand" ? (this._output.add_new_line(), this.print_string(this._ch), this.indent(), this._output.set_indent(this._indentLevel)) : (S21 === "(" ? this._output.space_before_token = false : S21 !== "," && this.indent(), this.print_string(this._ch)), this.eatWhitespace(true), this._output.add_new_line();
      else if (this._ch === "}")
        this.outdent(), this._output.add_new_line(), S21 === "{" && this._output.trim(true), n33 && (this.outdent(), n33 = false), this.print_string(this._ch), o12 = false, this._nestedLevel && this._nestedLevel--, this.eatWhitespace(true), this._output.add_new_line(), this._options.newline_between_rules && !this._output.just_added_blankline() && this._input.peek() !== "}" && this._output.add_new_line(true), this._input.peek() === ")" && (this._output.trim(true), this._options.brace_style === "expand" && this._output.add_new_line(true));
      else if (this._ch === ":") {
        for (var N19 = 0; N19 < this.NON_SEMICOLON_NEWLINE_PROPERTY.length; N19++)
          if (this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[N19])) {
            c27 = true;
            break;
          }
        (o12 || p26) && !(this._input.lookBack("&") || this.foundNestedPseudoClass()) && !this._input.lookBack("(") && !T20 && x34 === 0 ? (this.print_string(":"), n33 || (n33 = true, this._output.space_before_token = true, this.eatWhitespace(true), this.indent())) : (this._input.lookBack(" ") && (this._output.space_before_token = true), this._input.peek() === ":" ? (this._ch = this._input.next(), this.print_string("::")) : this.print_string(":"));
      } else if (this._ch === '"' || this._ch === "'") {
        var W8 = S21 === '"' || S21 === "'";
        this.preserveSingleSpace(W8 || f39), this.print_string(this._ch + this.eatString(this._ch)), this.eatWhitespace(true);
      } else if (this._ch === ";")
        c27 = false, x34 === 0 ? (n33 && (this.outdent(), n33 = false), T20 = false, this.print_string(this._ch), this.eatWhitespace(true), this._input.peek() !== "/" && this._output.add_new_line()) : (this.print_string(this._ch), this.eatWhitespace(true), this._output.space_before_token = true);
      else if (this._ch === "(")
        if (this._input.lookBack("url"))
          this.print_string(this._ch), this.eatWhitespace(), x34++, this.indent(), this._ch = this._input.next(), this._ch === ")" || this._ch === '"' || this._ch === "'" ? this._input.back() : this._ch && (this.print_string(this._ch + this.eatString(")")), x34 && (x34--, this.outdent()));
        else {
          var M12 = false;
          this._input.lookBack("with") && (M12 = true), this.preserveSingleSpace(f39 || M12), this.print_string(this._ch), n33 && S21 === "$" && this._options.selector_separator_newline ? (this._output.add_new_line(), E24 = true) : (this.eatWhitespace(), x34++, this.indent());
        }
      else if (this._ch === ")")
        x34 && (x34--, this.outdent()), E24 && this._input.peek() === ";" && this._options.selector_separator_newline && (E24 = false, this.outdent(), this._output.add_new_line()), this.print_string(this._ch);
      else if (this._ch === ",")
        this.print_string(this._ch), this.eatWhitespace(true), this._options.selector_separator_newline && (!n33 || E24) && x34 === 0 && !T20 ? this._output.add_new_line() : this._output.space_before_token = true;
      else if ((this._ch === ">" || this._ch === "+" || this._ch === "~") && !n33 && x34 === 0)
        this._options.space_around_combinator ? (this._output.space_before_token = true, this.print_string(this._ch), this._output.space_before_token = true) : (this.print_string(this._ch), this.eatWhitespace(), this._ch && u35.test(this._ch) && (this._ch = ""));
      else if (this._ch === "]")
        this.print_string(this._ch);
      else if (this._ch === "[")
        this.preserveSingleSpace(f39), this.print_string(this._ch);
      else if (this._ch === "=")
        this.eatWhitespace(), this.print_string("="), u35.test(this._ch) && (this._ch = "");
      else if (this._ch === "!" && !this._input.lookBack("\\"))
        this._output.space_before_token = true, this.print_string(this._ch);
      else {
        var $24 = S21 === '"' || S21 === "'";
        this.preserveSingleSpace($24 || f39), this.print_string(this._ch), !this._output.just_added_newline() && this._input.peek() === `
` && c27 && this._output.add_new_line();
      }
    var ct11 = this._output.get_code(C19);
    return ct11;
  }, Jt5.Beautifier = y33, Jt5;
}
var Ze5;
function Hi2() {
  if (Ze5)
    return vt5.exports;
  Ze5 = 1;
  var a22 = Qi2().Beautifier, t19 = wi5().Options;
  function i27(e11, r24) {
    var _19 = new a22(e11, r24);
    return _19.beautify();
  }
  return vt5.exports = i27, vt5.exports.defaultOptions = function() {
    return new t19();
  }, vt5.exports;
}
var yt9 = { exports: {} };
var Yt5 = {};
var te5 = {};
var Ye5;
function xi5() {
  if (Ye5)
    return te5;
  Ye5 = 1;
  var a22 = ve6().Options;
  function t19(i27) {
    a22.call(this, i27, "html"), this.templating.length === 1 && this.templating[0] === "auto" && (this.templating = ["django", "erb", "handlebars", "php"]), this.indent_inner_html = this._get_boolean("indent_inner_html"), this.indent_body_inner_html = this._get_boolean("indent_body_inner_html", true), this.indent_head_inner_html = this._get_boolean("indent_head_inner_html", true), this.indent_handlebars = this._get_boolean("indent_handlebars", true), this.wrap_attributes = this._get_selection(
      "wrap_attributes",
      ["auto", "force", "force-aligned", "force-expand-multiline", "aligned-multiple", "preserve", "preserve-aligned"]
    ), this.wrap_attributes_min_attrs = this._get_number("wrap_attributes_min_attrs", 2), this.wrap_attributes_indent_size = this._get_number("wrap_attributes_indent_size", this.indent_size), this.extra_liners = this._get_array("extra_liners", ["head", "body", "/html"]), this.inline = this._get_array("inline", [
      "a",
      "abbr",
      "area",
      "audio",
      "b",
      "bdi",
      "bdo",
      "br",
      "button",
      "canvas",
      "cite",
      "code",
      "data",
      "datalist",
      "del",
      "dfn",
      "em",
      "embed",
      "i",
      "iframe",
      "img",
      "input",
      "ins",
      "kbd",
      "keygen",
      "label",
      "map",
      "mark",
      "math",
      "meter",
      "noscript",
      "object",
      "output",
      "progress",
      "q",
      "ruby",
      "s",
      "samp",
      /* 'script', */
      "select",
      "small",
      "span",
      "strong",
      "sub",
      "sup",
      "svg",
      "template",
      "textarea",
      "time",
      "u",
      "var",
      "video",
      "wbr",
      "text",
      // obsolete inline tags
      "acronym",
      "big",
      "strike",
      "tt"
    ]), this.inline_custom_elements = this._get_boolean("inline_custom_elements", true), this.void_elements = this._get_array("void_elements", [
      // HTLM void elements - aka self-closing tags - aka singletons
      // https://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements
      "area",
      "base",
      "br",
      "col",
      "embed",
      "hr",
      "img",
      "input",
      "keygen",
      "link",
      "menuitem",
      "meta",
      "param",
      "source",
      "track",
      "wbr",
      // NOTE: Optional tags are too complex for a simple list
      // they are hard coded in _do_optional_end_element
      // Doctype and xml elements
      "!doctype",
      "?xml",
      // obsolete tags
      // basefont: https://www.computerhope.com/jargon/h/html-basefont-tag.htm
      // isndex: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/isindex
      "basefont",
      "isindex"
    ]), this.unformatted = this._get_array("unformatted", []), this.content_unformatted = this._get_array("content_unformatted", [
      "pre",
      "textarea"
    ]), this.unformatted_content_delimiter = this._get_characters("unformatted_content_delimiter"), this.indent_scripts = this._get_selection("indent_scripts", ["normal", "keep", "separate"]);
  }
  return t19.prototype = new a22(), te5.Options = t19, te5;
}
var wt6 = {};
var ti5;
function ei5() {
  if (ti5)
    return wt6;
  ti5 = 1;
  var a22 = Lt4().Tokenizer, t19 = Lt4().TOKEN, i27 = we6().Directives, e11 = yi5().TemplatablePattern, r24 = Dt3().Pattern, _19 = {
    TAG_OPEN: "TK_TAG_OPEN",
    TAG_CLOSE: "TK_TAG_CLOSE",
    CONTROL_FLOW_OPEN: "TK_CONTROL_FLOW_OPEN",
    CONTROL_FLOW_CLOSE: "TK_CONTROL_FLOW_CLOSE",
    ATTRIBUTE: "TK_ATTRIBUTE",
    EQUALS: "TK_EQUALS",
    VALUE: "TK_VALUE",
    COMMENT: "TK_COMMENT",
    TEXT: "TK_TEXT",
    UNKNOWN: "TK_UNKNOWN",
    START: t19.START,
    RAW: t19.RAW,
    EOF: t19.EOF
  }, h26 = new i27(/<\!--/, /-->/), u35 = function(l25, O20) {
    a22.call(this, l25, O20), this._current_tag_name = "";
    var v30 = new e11(this._input).read_options(this._options), y33 = new r24(this._input);
    if (this.__patterns = {
      word: v30.until(/[\n\r\t <]/),
      word_control_flow_close_excluded: v30.until(/[\n\r\t <}]/),
      single_quote: v30.until_after(/'/),
      double_quote: v30.until_after(/"/),
      attribute: v30.until(/[\n\r\t =>]|\/>/),
      element_name: v30.until(/[\n\r\t >\/]/),
      angular_control_flow_start: y33.matching(/\@[a-zA-Z]+[^({]*[({]/),
      handlebars_comment: y33.starting_with(/{{!--/).until_after(/--}}/),
      handlebars: y33.starting_with(/{{/).until_after(/}}/),
      handlebars_open: y33.until(/[\n\r\t }]/),
      handlebars_raw_close: y33.until(/}}/),
      comment: y33.starting_with(/<!--/).until_after(/-->/),
      cdata: y33.starting_with(/<!\[CDATA\[/).until_after(/]]>/),
      // https://en.wikipedia.org/wiki/Conditional_comment
      conditional_comment: y33.starting_with(/<!\[/).until_after(/]>/),
      processing: y33.starting_with(/<\?/).until_after(/\?>/)
    }, this._options.indent_handlebars && (this.__patterns.word = this.__patterns.word.exclude("handlebars"), this.__patterns.word_control_flow_close_excluded = this.__patterns.word_control_flow_close_excluded.exclude("handlebars")), this._unformatted_content_delimiter = null, this._options.unformatted_content_delimiter) {
      var g31 = this._input.get_literal_regexp(this._options.unformatted_content_delimiter);
      this.__patterns.unformatted_content_delimiter = y33.matching(g31).until_after(g31);
    }
  };
  return u35.prototype = new a22(), u35.prototype._is_comment = function(l25) {
    return false;
  }, u35.prototype._is_opening = function(l25) {
    return l25.type === _19.TAG_OPEN || l25.type === _19.CONTROL_FLOW_OPEN;
  }, u35.prototype._is_closing = function(l25, O20) {
    return l25.type === _19.TAG_CLOSE && O20 && ((l25.text === ">" || l25.text === "/>") && O20.text[0] === "<" || l25.text === "}}" && O20.text[0] === "{" && O20.text[1] === "{") || l25.type === _19.CONTROL_FLOW_CLOSE && l25.text === "}" && O20.text.endsWith("{");
  }, u35.prototype._reset = function() {
    this._current_tag_name = "";
  }, u35.prototype._get_next_token = function(l25, O20) {
    var v30 = null;
    this._readWhitespace();
    var y33 = this._input.peek();
    return y33 === null ? this._create_token(_19.EOF, "") : (v30 = v30 || this._read_open_handlebars(y33, O20), v30 = v30 || this._read_attribute(y33, l25, O20), v30 = v30 || this._read_close(y33, O20), v30 = v30 || this._read_control_flows(y33, O20), v30 = v30 || this._read_raw_content(y33, l25, O20), v30 = v30 || this._read_content_word(y33, O20), v30 = v30 || this._read_comment_or_cdata(y33), v30 = v30 || this._read_processing(y33), v30 = v30 || this._read_open(y33, O20), v30 = v30 || this._create_token(_19.UNKNOWN, this._input.next()), v30);
  }, u35.prototype._read_comment_or_cdata = function(l25) {
    var O20 = null, v30 = null, y33 = null;
    if (l25 === "<") {
      var g31 = this._input.peek(1);
      g31 === "!" && (v30 = this.__patterns.comment.read(), v30 ? (y33 = h26.get_directives(v30), y33 && y33.ignore === "start" && (v30 += h26.readIgnored(this._input))) : v30 = this.__patterns.cdata.read()), v30 && (O20 = this._create_token(_19.COMMENT, v30), O20.directives = y33);
    }
    return O20;
  }, u35.prototype._read_processing = function(l25) {
    var O20 = null, v30 = null, y33 = null;
    if (l25 === "<") {
      var g31 = this._input.peek(1);
      (g31 === "!" || g31 === "?") && (v30 = this.__patterns.conditional_comment.read(), v30 = v30 || this.__patterns.processing.read()), v30 && (O20 = this._create_token(_19.COMMENT, v30), O20.directives = y33);
    }
    return O20;
  }, u35.prototype._read_open = function(l25, O20) {
    var v30 = null, y33 = null;
    return (!O20 || O20.type === _19.CONTROL_FLOW_OPEN) && l25 === "<" && (v30 = this._input.next(), this._input.peek() === "/" && (v30 += this._input.next()), v30 += this.__patterns.element_name.read(), y33 = this._create_token(_19.TAG_OPEN, v30)), y33;
  }, u35.prototype._read_open_handlebars = function(l25, O20) {
    var v30 = null, y33 = null;
    return (!O20 || O20.type === _19.CONTROL_FLOW_OPEN) && this._options.indent_handlebars && l25 === "{" && this._input.peek(1) === "{" && (this._input.peek(2) === "!" ? (v30 = this.__patterns.handlebars_comment.read(), v30 = v30 || this.__patterns.handlebars.read(), y33 = this._create_token(_19.COMMENT, v30)) : (v30 = this.__patterns.handlebars_open.read(), y33 = this._create_token(_19.TAG_OPEN, v30))), y33;
  }, u35.prototype._read_control_flows = function(l25, O20) {
    var v30 = "", y33 = null;
    if (!this._options.templating.includes("angular") || !this._options.indent_handlebars)
      return y33;
    if (l25 === "@") {
      if (v30 = this.__patterns.angular_control_flow_start.read(), v30 === "")
        return y33;
      for (var g31 = v30.endsWith("(") ? 1 : 0, C19 = 0; !(v30.endsWith("{") && g31 === C19); ) {
        var A17 = this._input.next();
        if (A17 === null)
          break;
        A17 === "(" ? g31++ : A17 === ")" && C19++, v30 += A17;
      }
      y33 = this._create_token(_19.CONTROL_FLOW_OPEN, v30);
    } else
      l25 === "}" && O20 && O20.type === _19.CONTROL_FLOW_OPEN && (v30 = this._input.next(), y33 = this._create_token(_19.CONTROL_FLOW_CLOSE, v30));
    return y33;
  }, u35.prototype._read_close = function(l25, O20) {
    var v30 = null, y33 = null;
    return O20 && O20.type === _19.TAG_OPEN && (O20.text[0] === "<" && (l25 === ">" || l25 === "/" && this._input.peek(1) === ">") ? (v30 = this._input.next(), l25 === "/" && (v30 += this._input.next()), y33 = this._create_token(_19.TAG_CLOSE, v30)) : O20.text[0] === "{" && l25 === "}" && this._input.peek(1) === "}" && (this._input.next(), this._input.next(), y33 = this._create_token(_19.TAG_CLOSE, "}}"))), y33;
  }, u35.prototype._read_attribute = function(l25, O20, v30) {
    var y33 = null, g31 = "";
    if (v30 && v30.text[0] === "<")
      if (l25 === "=")
        y33 = this._create_token(_19.EQUALS, this._input.next());
      else if (l25 === '"' || l25 === "'") {
        var C19 = this._input.next();
        l25 === '"' ? C19 += this.__patterns.double_quote.read() : C19 += this.__patterns.single_quote.read(), y33 = this._create_token(_19.VALUE, C19);
      } else
        g31 = this.__patterns.attribute.read(), g31 && (O20.type === _19.EQUALS ? y33 = this._create_token(_19.VALUE, g31) : y33 = this._create_token(_19.ATTRIBUTE, g31));
    return y33;
  }, u35.prototype._is_content_unformatted = function(l25) {
    return this._options.void_elements.indexOf(l25) === -1 && (this._options.content_unformatted.indexOf(l25) !== -1 || this._options.unformatted.indexOf(l25) !== -1);
  }, u35.prototype._read_raw_content = function(l25, O20, v30) {
    var y33 = "";
    if (v30 && v30.text[0] === "{")
      y33 = this.__patterns.handlebars_raw_close.read();
    else if (O20.type === _19.TAG_CLOSE && O20.opened.text[0] === "<" && O20.text[0] !== "/") {
      var g31 = O20.opened.text.substr(1).toLowerCase();
      if (g31 === "script" || g31 === "style") {
        var C19 = this._read_comment_or_cdata(l25);
        if (C19)
          return C19.type = _19.TEXT, C19;
        y33 = this._input.readUntil(new RegExp("</" + g31 + "[\\n\\r\\t ]*?>", "ig"));
      } else
        this._is_content_unformatted(g31) && (y33 = this._input.readUntil(new RegExp("</" + g31 + "[\\n\\r\\t ]*?>", "ig")));
    }
    return y33 ? this._create_token(_19.TEXT, y33) : null;
  }, u35.prototype._read_content_word = function(l25, O20) {
    var v30 = "";
    if (this._options.unformatted_content_delimiter && l25 === this._options.unformatted_content_delimiter[0] && (v30 = this.__patterns.unformatted_content_delimiter.read()), v30 || (v30 = O20 && O20.type === _19.CONTROL_FLOW_OPEN ? this.__patterns.word_control_flow_close_excluded.read() : this.__patterns.word.read()), v30)
      return this._create_token(_19.TEXT, v30);
  }, wt6.Tokenizer = u35, wt6.TOKEN = _19, wt6;
}
var ii5;
function Ji2() {
  if (ii5)
    return Yt5;
  ii5 = 1;
  var a22 = xi5().Options, t19 = me6().Output, i27 = ei5().Tokenizer, e11 = ei5().TOKEN, r24 = /\r\n|[\r\n]/, _19 = /\r\n|[\r\n]/g, h26 = function(o12, n33) {
    this.indent_level = 0, this.alignment_size = 0, this.max_preserve_newlines = o12.max_preserve_newlines, this.preserve_newlines = o12.preserve_newlines, this._output = new t19(o12, n33);
  };
  h26.prototype.current_line_has_match = function(o12) {
    return this._output.current_line.has_match(o12);
  }, h26.prototype.set_space_before_token = function(o12, n33) {
    this._output.space_before_token = o12, this._output.non_breaking_space = n33;
  }, h26.prototype.set_wrap_point = function() {
    this._output.set_indent(this.indent_level, this.alignment_size), this._output.set_wrap_point();
  }, h26.prototype.add_raw_token = function(o12) {
    this._output.add_raw_token(o12);
  }, h26.prototype.print_preserved_newlines = function(o12) {
    var n33 = 0;
    o12.type !== e11.TEXT && o12.previous.type !== e11.TEXT && (n33 = o12.newlines ? 1 : 0), this.preserve_newlines && (n33 = o12.newlines < this.max_preserve_newlines + 1 ? o12.newlines : this.max_preserve_newlines + 1);
    for (var p26 = 0; p26 < n33; p26++)
      this.print_newline(p26 > 0);
    return n33 !== 0;
  }, h26.prototype.traverse_whitespace = function(o12) {
    return o12.whitespace_before || o12.newlines ? (this.print_preserved_newlines(o12) || (this._output.space_before_token = true), true) : false;
  }, h26.prototype.previous_token_wrapped = function() {
    return this._output.previous_token_wrapped;
  }, h26.prototype.print_newline = function(o12) {
    this._output.add_new_line(o12);
  }, h26.prototype.print_token = function(o12) {
    o12.text && (this._output.set_indent(this.indent_level, this.alignment_size), this._output.add_token(o12.text));
  }, h26.prototype.indent = function() {
    this.indent_level++;
  }, h26.prototype.deindent = function() {
    this.indent_level > 0 && (this.indent_level--, this._output.set_indent(this.indent_level, this.alignment_size));
  }, h26.prototype.get_full_indent = function(o12) {
    return o12 = this.indent_level + (o12 || 0), o12 < 1 ? "" : this._output.get_indent_string(o12);
  };
  var u35 = function(o12) {
    for (var n33 = null, p26 = o12.next; p26.type !== e11.EOF && o12.closed !== p26; ) {
      if (p26.type === e11.ATTRIBUTE && p26.text === "type") {
        p26.next && p26.next.type === e11.EQUALS && p26.next.next && p26.next.next.type === e11.VALUE && (n33 = p26.next.next.text);
        break;
      }
      p26 = p26.next;
    }
    return n33;
  }, l25 = function(o12, n33) {
    var p26 = null, T20 = null;
    return n33.closed ? (o12 === "script" ? p26 = "text/javascript" : o12 === "style" && (p26 = "text/css"), p26 = u35(n33) || p26, p26.search("text/css") > -1 ? T20 = "css" : p26.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/) > -1 ? T20 = "javascript" : p26.search(/(text|application|dojo)\/(x-)?(html)/) > -1 ? T20 = "html" : p26.search(/test\/null/) > -1 && (T20 = "null"), T20) : null;
  };
  function O20(o12, n33) {
    return n33.indexOf(o12) !== -1;
  }
  function v30(o12, n33, p26) {
    this.parent = o12 || null, this.tag = n33 ? n33.tag_name : "", this.indent_level = p26 || 0, this.parser_token = n33 || null;
  }
  function y33(o12) {
    this._printer = o12, this._current_frame = null;
  }
  y33.prototype.get_parser_token = function() {
    return this._current_frame ? this._current_frame.parser_token : null;
  }, y33.prototype.record_tag = function(o12) {
    var n33 = new v30(this._current_frame, o12, this._printer.indent_level);
    this._current_frame = n33;
  }, y33.prototype._try_pop_frame = function(o12) {
    var n33 = null;
    return o12 && (n33 = o12.parser_token, this._printer.indent_level = o12.indent_level, this._current_frame = o12.parent), n33;
  }, y33.prototype._get_frame = function(o12, n33) {
    for (var p26 = this._current_frame; p26 && o12.indexOf(p26.tag) === -1; ) {
      if (n33 && n33.indexOf(p26.tag) !== -1) {
        p26 = null;
        break;
      }
      p26 = p26.parent;
    }
    return p26;
  }, y33.prototype.try_pop = function(o12, n33) {
    var p26 = this._get_frame([o12], n33);
    return this._try_pop_frame(p26);
  }, y33.prototype.indent_to_tag = function(o12) {
    var n33 = this._get_frame(o12);
    n33 && (this._printer.indent_level = n33.indent_level);
  };
  function g31(o12, n33, p26, T20) {
    this._source_text = o12 || "", n33 = n33 || {}, this._js_beautify = p26, this._css_beautify = T20, this._tag_stack = null;
    var E24 = new a22(n33, "html");
    this._options = E24, this._is_wrap_attributes_force = this._options.wrap_attributes.substr(0, 5) === "force", this._is_wrap_attributes_force_expand_multiline = this._options.wrap_attributes === "force-expand-multiline", this._is_wrap_attributes_force_aligned = this._options.wrap_attributes === "force-aligned", this._is_wrap_attributes_aligned_multiple = this._options.wrap_attributes === "aligned-multiple", this._is_wrap_attributes_preserve = this._options.wrap_attributes.substr(0, 8) === "preserve", this._is_wrap_attributes_preserve_aligned = this._options.wrap_attributes === "preserve-aligned";
  }
  g31.prototype.beautify = function() {
    if (this._options.disabled)
      return this._source_text;
    var o12 = this._source_text, n33 = this._options.eol;
    this._options.eol === "auto" && (n33 = `
`, o12 && r24.test(o12) && (n33 = o12.match(r24)[0])), o12 = o12.replace(_19, `
`);
    var p26 = o12.match(/^[\t ]*/)[0], T20 = {
      text: "",
      type: ""
    }, E24 = new C19(), k27 = new h26(this._options, p26), c27 = new i27(o12, this._options).tokenize();
    this._tag_stack = new y33(k27);
    for (var b33 = null, f39 = c27.next(); f39.type !== e11.EOF; )
      f39.type === e11.TAG_OPEN || f39.type === e11.COMMENT ? (b33 = this._handle_tag_open(k27, f39, E24, T20, c27), E24 = b33) : f39.type === e11.ATTRIBUTE || f39.type === e11.EQUALS || f39.type === e11.VALUE || f39.type === e11.TEXT && !E24.tag_complete ? b33 = this._handle_inside_tag(k27, f39, E24, T20) : f39.type === e11.TAG_CLOSE ? b33 = this._handle_tag_close(k27, f39, E24) : f39.type === e11.TEXT ? b33 = this._handle_text(k27, f39, E24) : f39.type === e11.CONTROL_FLOW_OPEN ? b33 = this._handle_control_flow_open(k27, f39) : f39.type === e11.CONTROL_FLOW_CLOSE ? b33 = this._handle_control_flow_close(k27, f39) : k27.add_raw_token(f39), T20 = b33, f39 = c27.next();
    var S21 = k27._output.get_code(n33);
    return S21;
  }, g31.prototype._handle_control_flow_open = function(o12, n33) {
    var p26 = {
      text: n33.text,
      type: n33.type
    };
    return o12.set_space_before_token(n33.newlines || n33.whitespace_before !== "", true), n33.newlines ? o12.print_preserved_newlines(n33) : o12.set_space_before_token(n33.newlines || n33.whitespace_before !== "", true), o12.print_token(n33), o12.indent(), p26;
  }, g31.prototype._handle_control_flow_close = function(o12, n33) {
    var p26 = {
      text: n33.text,
      type: n33.type
    };
    return o12.deindent(), n33.newlines ? o12.print_preserved_newlines(n33) : o12.set_space_before_token(n33.newlines || n33.whitespace_before !== "", true), o12.print_token(n33), p26;
  }, g31.prototype._handle_tag_close = function(o12, n33, p26) {
    var T20 = {
      text: n33.text,
      type: n33.type
    };
    return o12.alignment_size = 0, p26.tag_complete = true, o12.set_space_before_token(n33.newlines || n33.whitespace_before !== "", true), p26.is_unformatted ? o12.add_raw_token(n33) : (p26.tag_start_char === "<" && (o12.set_space_before_token(n33.text[0] === "/", true), this._is_wrap_attributes_force_expand_multiline && p26.has_wrapped_attrs && o12.print_newline(false)), o12.print_token(n33)), p26.indent_content && !(p26.is_unformatted || p26.is_content_unformatted) && (o12.indent(), p26.indent_content = false), !p26.is_inline_element && !(p26.is_unformatted || p26.is_content_unformatted) && o12.set_wrap_point(), T20;
  }, g31.prototype._handle_inside_tag = function(o12, n33, p26, T20) {
    var E24 = p26.has_wrapped_attrs, k27 = {
      text: n33.text,
      type: n33.type
    };
    return o12.set_space_before_token(n33.newlines || n33.whitespace_before !== "", true), p26.is_unformatted ? o12.add_raw_token(n33) : p26.tag_start_char === "{" && n33.type === e11.TEXT ? o12.print_preserved_newlines(n33) ? (n33.newlines = 0, o12.add_raw_token(n33)) : o12.print_token(n33) : (n33.type === e11.ATTRIBUTE ? o12.set_space_before_token(true) : (n33.type === e11.EQUALS || n33.type === e11.VALUE && n33.previous.type === e11.EQUALS) && o12.set_space_before_token(false), n33.type === e11.ATTRIBUTE && p26.tag_start_char === "<" && ((this._is_wrap_attributes_preserve || this._is_wrap_attributes_preserve_aligned) && (o12.traverse_whitespace(n33), E24 = E24 || n33.newlines !== 0), this._is_wrap_attributes_force && p26.attr_count >= this._options.wrap_attributes_min_attrs && (T20.type !== e11.TAG_OPEN || // ie. second attribute and beyond
    this._is_wrap_attributes_force_expand_multiline) && (o12.print_newline(false), E24 = true)), o12.print_token(n33), E24 = E24 || o12.previous_token_wrapped(), p26.has_wrapped_attrs = E24), k27;
  }, g31.prototype._handle_text = function(o12, n33, p26) {
    var T20 = {
      text: n33.text,
      type: "TK_CONTENT"
    };
    return p26.custom_beautifier_name ? this._print_custom_beatifier_text(o12, n33, p26) : p26.is_unformatted || p26.is_content_unformatted ? o12.add_raw_token(n33) : (o12.traverse_whitespace(n33), o12.print_token(n33)), T20;
  }, g31.prototype._print_custom_beatifier_text = function(o12, n33, p26) {
    var T20 = this;
    if (n33.text !== "") {
      var E24 = n33.text, k27, c27 = 1, b33 = "", f39 = "";
      p26.custom_beautifier_name === "javascript" && typeof this._js_beautify == "function" ? k27 = this._js_beautify : p26.custom_beautifier_name === "css" && typeof this._css_beautify == "function" ? k27 = this._css_beautify : p26.custom_beautifier_name === "html" && (k27 = function(N19, W8) {
        var M12 = new g31(N19, W8, T20._js_beautify, T20._css_beautify);
        return M12.beautify();
      }), this._options.indent_scripts === "keep" ? c27 = 0 : this._options.indent_scripts === "separate" && (c27 = -o12.indent_level);
      var S21 = o12.get_full_indent(c27);
      if (E24 = E24.replace(/\n[ \t]*$/, ""), p26.custom_beautifier_name !== "html" && E24[0] === "<" && E24.match(/^(<!--|<!\[CDATA\[)/)) {
        var s18 = /^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(E24);
        if (!s18) {
          o12.add_raw_token(n33);
          return;
        }
        b33 = S21 + s18[1] + `
`, E24 = s18[4], s18[5] && (f39 = S21 + s18[5]), E24 = E24.replace(/\n[ \t]*$/, ""), (s18[2] || s18[3].indexOf(`
`) !== -1) && (s18 = s18[3].match(/[ \t]+$/), s18 && (n33.whitespace_before = s18[0]));
      }
      if (E24)
        if (k27) {
          var d34 = function() {
            this.eol = `
`;
          };
          d34.prototype = this._options.raw_options;
          var m33 = new d34();
          E24 = k27(S21 + E24, m33);
        } else {
          var R20 = n33.whitespace_before;
          R20 && (E24 = E24.replace(new RegExp(`
(` + R20 + ")?", "g"), `
`)), E24 = S21 + E24.replace(/\n/g, `
` + S21);
        }
      b33 && (E24 ? E24 = b33 + E24 + `
` + f39 : E24 = b33 + f39), o12.print_newline(false), E24 && (n33.text = E24, n33.whitespace_before = "", n33.newlines = 0, o12.add_raw_token(n33), o12.print_newline(true));
    }
  }, g31.prototype._handle_tag_open = function(o12, n33, p26, T20, E24) {
    var k27 = this._get_tag_open_token(n33);
    if ((p26.is_unformatted || p26.is_content_unformatted) && !p26.is_empty_element && n33.type === e11.TAG_OPEN && !k27.is_start_tag ? (o12.add_raw_token(n33), k27.start_tag_token = this._tag_stack.try_pop(k27.tag_name)) : (o12.traverse_whitespace(n33), this._set_tag_position(o12, n33, k27, p26, T20), k27.is_inline_element || o12.set_wrap_point(), o12.print_token(n33)), k27.is_start_tag && this._is_wrap_attributes_force) {
      var c27 = 0, b33;
      do
        b33 = E24.peek(c27), b33.type === e11.ATTRIBUTE && (k27.attr_count += 1), c27 += 1;
      while (b33.type !== e11.EOF && b33.type !== e11.TAG_CLOSE);
    }
    return (this._is_wrap_attributes_force_aligned || this._is_wrap_attributes_aligned_multiple || this._is_wrap_attributes_preserve_aligned) && (k27.alignment_size = n33.text.length + 1), !k27.tag_complete && !k27.is_unformatted && (o12.alignment_size = k27.alignment_size), k27;
  };
  var C19 = function(o12, n33) {
    if (this.parent = o12 || null, this.text = "", this.type = "TK_TAG_OPEN", this.tag_name = "", this.is_inline_element = false, this.is_unformatted = false, this.is_content_unformatted = false, this.is_empty_element = false, this.is_start_tag = false, this.is_end_tag = false, this.indent_content = false, this.multiline_content = false, this.custom_beautifier_name = null, this.start_tag_token = null, this.attr_count = 0, this.has_wrapped_attrs = false, this.alignment_size = 0, this.tag_complete = false, this.tag_start_char = "", this.tag_check = "", !n33)
      this.tag_complete = true;
    else {
      var p26;
      this.tag_start_char = n33.text[0], this.text = n33.text, this.tag_start_char === "<" ? (p26 = n33.text.match(/^<([^\s>]*)/), this.tag_check = p26 ? p26[1] : "") : (p26 = n33.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/), this.tag_check = p26 ? p26[1] : "", (n33.text.startsWith("{{#>") || n33.text.startsWith("{{~#>")) && this.tag_check[0] === ">" && (this.tag_check === ">" && n33.next !== null ? this.tag_check = n33.next.text.split(" ")[0] : this.tag_check = n33.text.split(">")[1])), this.tag_check = this.tag_check.toLowerCase(), n33.type === e11.COMMENT && (this.tag_complete = true), this.is_start_tag = this.tag_check.charAt(0) !== "/", this.tag_name = this.is_start_tag ? this.tag_check : this.tag_check.substr(1), this.is_end_tag = !this.is_start_tag || n33.closed && n33.closed.text === "/>";
      var T20 = 2;
      this.tag_start_char === "{" && this.text.length >= 3 && this.text.charAt(2) === "~" && (T20 = 3), this.is_end_tag = this.is_end_tag || this.tag_start_char === "{" && (this.text.length < 3 || /[^#\^]/.test(this.text.charAt(T20)));
    }
  };
  g31.prototype._get_tag_open_token = function(o12) {
    var n33 = new C19(this._tag_stack.get_parser_token(), o12);
    return n33.alignment_size = this._options.wrap_attributes_indent_size, n33.is_end_tag = n33.is_end_tag || O20(n33.tag_check, this._options.void_elements), n33.is_empty_element = n33.tag_complete || n33.is_start_tag && n33.is_end_tag, n33.is_unformatted = !n33.tag_complete && O20(n33.tag_check, this._options.unformatted), n33.is_content_unformatted = !n33.is_empty_element && O20(n33.tag_check, this._options.content_unformatted), n33.is_inline_element = O20(n33.tag_name, this._options.inline) || this._options.inline_custom_elements && n33.tag_name.includes("-") || n33.tag_start_char === "{", n33;
  }, g31.prototype._set_tag_position = function(o12, n33, p26, T20, E24) {
    if (p26.is_empty_element || (p26.is_end_tag ? p26.start_tag_token = this._tag_stack.try_pop(p26.tag_name) : (this._do_optional_end_element(p26) && (p26.is_inline_element || o12.print_newline(false)), this._tag_stack.record_tag(p26), (p26.tag_name === "script" || p26.tag_name === "style") && !(p26.is_unformatted || p26.is_content_unformatted) && (p26.custom_beautifier_name = l25(p26.tag_check, n33)))), O20(p26.tag_check, this._options.extra_liners) && (o12.print_newline(false), o12._output.just_added_blankline() || o12.print_newline(true)), p26.is_empty_element) {
      if (p26.tag_start_char === "{" && p26.tag_check === "else") {
        this._tag_stack.indent_to_tag(["if", "unless", "each"]), p26.indent_content = true;
        var k27 = o12.current_line_has_match(/{{#if/);
        k27 || o12.print_newline(false);
      }
      p26.tag_name === "!--" && E24.type === e11.TAG_CLOSE && T20.is_end_tag && p26.text.indexOf(`
`) === -1 || (p26.is_inline_element || p26.is_unformatted || o12.print_newline(false), this._calcluate_parent_multiline(o12, p26));
    } else if (p26.is_end_tag) {
      var c27 = false;
      c27 = p26.start_tag_token && p26.start_tag_token.multiline_content, c27 = c27 || !p26.is_inline_element && !(T20.is_inline_element || T20.is_unformatted) && !(E24.type === e11.TAG_CLOSE && p26.start_tag_token === T20) && E24.type !== "TK_CONTENT", (p26.is_content_unformatted || p26.is_unformatted) && (c27 = false), c27 && o12.print_newline(false);
    } else
      p26.indent_content = !p26.custom_beautifier_name, p26.tag_start_char === "<" && (p26.tag_name === "html" ? p26.indent_content = this._options.indent_inner_html : p26.tag_name === "head" ? p26.indent_content = this._options.indent_head_inner_html : p26.tag_name === "body" && (p26.indent_content = this._options.indent_body_inner_html)), !(p26.is_inline_element || p26.is_unformatted) && (E24.type !== "TK_CONTENT" || p26.is_content_unformatted) && o12.print_newline(false), this._calcluate_parent_multiline(o12, p26);
  }, g31.prototype._calcluate_parent_multiline = function(o12, n33) {
    n33.parent && o12._output.just_added_newline() && !((n33.is_inline_element || n33.is_unformatted) && n33.parent.is_inline_element) && (n33.parent.multiline_content = true);
  };
  var A17 = ["address", "article", "aside", "blockquote", "details", "div", "dl", "fieldset", "figcaption", "figure", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "header", "hr", "main", "menu", "nav", "ol", "p", "pre", "section", "table", "ul"], x34 = ["a", "audio", "del", "ins", "map", "noscript", "video"];
  return g31.prototype._do_optional_end_element = function(o12) {
    var n33 = null;
    if (!(o12.is_empty_element || !o12.is_start_tag || !o12.parent)) {
      if (o12.tag_name === "body")
        n33 = n33 || this._tag_stack.try_pop("head");
      else if (o12.tag_name === "li")
        n33 = n33 || this._tag_stack.try_pop("li", ["ol", "ul", "menu"]);
      else if (o12.tag_name === "dd" || o12.tag_name === "dt")
        n33 = n33 || this._tag_stack.try_pop("dt", ["dl"]), n33 = n33 || this._tag_stack.try_pop("dd", ["dl"]);
      else if (o12.parent.tag_name === "p" && A17.indexOf(o12.tag_name) !== -1) {
        var p26 = o12.parent.parent;
        (!p26 || x34.indexOf(p26.tag_name) === -1) && (n33 = n33 || this._tag_stack.try_pop("p"));
      } else
        o12.tag_name === "rp" || o12.tag_name === "rt" ? (n33 = n33 || this._tag_stack.try_pop("rt", ["ruby", "rtc"]), n33 = n33 || this._tag_stack.try_pop("rp", ["ruby", "rtc"])) : o12.tag_name === "optgroup" ? n33 = n33 || this._tag_stack.try_pop("optgroup", ["select"]) : o12.tag_name === "option" ? n33 = n33 || this._tag_stack.try_pop("option", ["select", "datalist", "optgroup"]) : o12.tag_name === "colgroup" ? n33 = n33 || this._tag_stack.try_pop("caption", ["table"]) : o12.tag_name === "thead" ? (n33 = n33 || this._tag_stack.try_pop("caption", ["table"]), n33 = n33 || this._tag_stack.try_pop("colgroup", ["table"])) : o12.tag_name === "tbody" || o12.tag_name === "tfoot" ? (n33 = n33 || this._tag_stack.try_pop("caption", ["table"]), n33 = n33 || this._tag_stack.try_pop("colgroup", ["table"]), n33 = n33 || this._tag_stack.try_pop("thead", ["table"]), n33 = n33 || this._tag_stack.try_pop("tbody", ["table"])) : o12.tag_name === "tr" ? (n33 = n33 || this._tag_stack.try_pop("caption", ["table"]), n33 = n33 || this._tag_stack.try_pop("colgroup", ["table"]), n33 = n33 || this._tag_stack.try_pop("tr", ["table", "thead", "tbody", "tfoot"])) : (o12.tag_name === "th" || o12.tag_name === "td") && (n33 = n33 || this._tag_stack.try_pop("td", ["table", "thead", "tbody", "tfoot", "tr"]), n33 = n33 || this._tag_stack.try_pop("th", ["table", "thead", "tbody", "tfoot", "tr"]));
      return o12.parent = this._tag_stack.get_parser_token(), n33;
    }
  }, Yt5.Beautifier = g31, Yt5;
}
var si5;
function Zi2() {
  if (si5)
    return yt9.exports;
  si5 = 1;
  var a22 = Ji2().Beautifier, t19 = xi5().Options;
  function i27(e11, r24, _19, h26) {
    var u35 = new a22(e11, r24, _19, h26);
    return u35.beautify();
  }
  return yt9.exports = i27, yt9.exports.defaultOptions = function() {
    return new t19();
  }, yt9.exports;
}
var ni5;
function Yi3() {
  if (ni5)
    return it9;
  ni5 = 1;
  var a22 = Xi2(), t19 = Hi2(), i27 = Zi2();
  function e11(r24, _19, h26, u35) {
    return h26 = h26 || a22, u35 = u35 || t19, i27(r24, _19, h26, u35);
  }
  return e11.defaultOptions = i27.defaultOptions, it9.js = a22, it9.css = t19, it9.html = e11, it9;
}
var ri5;
function ts2() {
  return ri5 || (ri5 = 1, function(a22) {
    function t19(i27, e11, r24) {
      var _19 = function(h26, u35) {
        return i27.js_beautify(h26, u35);
      };
      return _19.js = i27.js_beautify, _19.css = e11.css_beautify, _19.html = r24.html_beautify, _19.js_beautify = i27.js_beautify, _19.css_beautify = e11.css_beautify, _19.html_beautify = r24.html_beautify, _19;
    }
    (function(i27) {
      var e11 = Yi3();
      e11.js_beautify = e11.js, e11.css_beautify = e11.css, e11.html_beautify = e11.html, i27.exports = t19(e11, e11, e11);
    })(a22);
  }(Bt5)), Bt5.exports;
}
var es2 = ts2();
var is2 = class {
  constructor(t19) {
    this.partsLength = t19, this.keys = {};
  }
  getKey(...t19) {
    if (t19.length !== this.partsLength)
      return null;
    let i27 = this.keys;
    for (let e11 = 0; e11 < t19.length - 1; e11 += 1)
      i27[t19[e11]] || (i27[t19[e11]] = {}), i27 = i27[t19[e11]];
    return i27[t19[t19.length - 1]] || (i27[t19[t19.length - 1]] = Symbol("")), i27[t19[t19.length - 1]];
  }
};
function ss2(a22) {
  return es2.html(a22, {
    wrap_attributes: "force-expand-multiline"
  });
}
var ns2 = class {
  constructor(t19) {
    this.store = new Ot4(), this.components = /* @__PURE__ */ new Map(), this.mountedElements = /* @__PURE__ */ new Map(), this.subscribers = /* @__PURE__ */ new Map(), this.componentKeys = new is2(2), this.dashboardState = new Ot4(), this.provider = new At3(), this.connector = new Fi3(
      t19 ?? document.createElement("div"),
      this.store
    ), this.dashboardState.addSourceProvider("dashboardState", this.provider), this.dashboardState.subscribeAll(
      "dashboardState",
      (i27, e11) => {
        this.publish("storeValueChange", { value: i27, key: e11 });
      },
      false
    );
  }
  addSourceProvider(t19, i27) {
    this.store.addSourceProvider(t19, i27);
  }
  setDefaultSourceProvider(t19) {
    this.store.setDefaultSourceProvider(t19);
  }
  setStoreValue(t19, i27) {
    this.provider.updateSource(t19, i27);
  }
  getStoreValue(t19, i27 = void 0) {
    return this.dashboardState.getSourceValue("dashboardState", t19) ?? i27;
  }
  getConnector() {
    return this.connector;
  }
  getRootElement() {
    return this.connector.getRootElement();
  }
  getStore() {
    return this.connector.getStore();
  }
  addComponent(t19) {
    const i27 = this.componentKeys.getKey(t19.type, t19.id);
    i27 && this.components.set(i27, t19);
  }
  hasComponent(t19, i27) {
    const e11 = this.componentKeys.getKey(t19, i27);
    return e11 ? this.components.has(e11) : false;
  }
  getComponentIdsOfType(t19) {
    return [...this.components.values()].filter(({ type: i27 }) => i27 === t19).map(({ id: i27 }) => i27);
  }
  create(t19, i27, e11 = {}) {
    const r24 = document.createElement("div"), _19 = this.componentKeys.getKey(t19, i27);
    if (!_19)
      return;
    const h26 = this.components.get(_19);
    if (h26) {
      const u35 = h26.mount({
        dashboard: this,
        element: r24,
        config: e11
      });
      return this.mountedElements.set(r24, {
        componentId: i27,
        componentType: t19,
        config: e11,
        unmount: u35
      }), r24;
    }
  }
  /**
   * Unmounts the mounted component from a particular element
   * @param {HTMLElement} element
   */
  unmount(t19) {
    const i27 = this.mountedElements.get(t19);
    if (i27) {
      const { config: e11, unmount: r24 } = i27;
      r24 && r24({
        dashboard: this,
        element: t19,
        config: e11
      }), this.mountedElements.delete(t19);
    }
  }
  /**
   *
   * @returns {() => void} A function to unsubscribe
   */
  subscribe(t19, i27) {
    this.subscribers.has(t19) || this.subscribers.set(t19, /* @__PURE__ */ new Map());
    const e11 = Symbol(""), r24 = this.subscribers.get(t19);
    return r24 == null || r24.set(e11, i27), () => {
      r24 == null || r24.delete(e11);
    };
  }
  /**
   *
   * @param {string} subscriberId
   * @param {unknown} context
   */
  publish(t19, i27 = {}) {
    var e11;
    this.subscribers.has(t19) && ((e11 = this.subscribers.get(t19)) == null || e11.forEach((r24) => {
      r24(i27);
    }));
  }
  addElements(t19, i27 = "default") {
    this.connector.addElementConfigs(t19, i27);
  }
  getHtml() {
    return this.getElementHtml(this.connector.getRootElement(), true);
  }
  setHtml(t19) {
    this.connector.getRootElement().querySelectorAll("dashboard-tab").forEach((e11) => {
      e11.remove();
    });
    const i27 = document.createElement("div");
    i27.innerHTML = t19, i27.querySelectorAll("dashboard-tab").forEach((e11) => {
      e11.setAttribute("slot", "tab"), this.connector.getRootElement().append(e11);
    });
  }
  getElementDisplayName(t19) {
    const i27 = this.connector.getMatchingElementConfig(t19), e11 = t19.tagName.toLowerCase();
    return i27 != null && i27.dashboard ? typeof i27.dashboard.displayName == "string" ? i27.dashboard.displayName : typeof i27.dashboard.displayName == "function" ? i27.dashboard.displayName(t19) : e11 : e11;
  }
  getSelectorDisplayName(t19) {
    const i27 = this.connector.getElementConfig(t19);
    return i27 != null && i27.dashboard ? typeof i27.dashboard.displayName == "string" ? i27.dashboard.displayName : typeof i27.dashboard.displayName == "function" ? i27.dashboard.displayName() : t19 : t19;
  }
  getElementHtml(t19, i27 = false) {
    const e11 = t19.cloneNode(true);
    return this.setClonedElementPropAttributes(t19, e11), ss2(
      i27 ? e11.innerHTML : e11.outerHTML
    );
  }
  setClonedElementPropAttributes(t19, i27) {
    const e11 = this.connector.getElementWebbit(t19);
    if (e11) {
      const { properties: r24 } = e11.getConfig();
      Object.entries(r24).forEach(
        ([_19, { attribute: h26, defaultValue: u35 }]) => {
          const l25 = e11.getPropertyHandler(_19);
          if (l25 != null && l25.isAttribute() && h26) {
            const O20 = l25.getStoredAttribute();
            O20 === null || l25.getStoredValue() === u35 ? i27.removeAttribute(h26) : i27.setAttribute(h26, O20);
          }
        }
      );
    }
    for (let r24 = 0; r24 < t19.children.length; r24 += 1)
      this.setClonedElementPropAttributes(
        t19.children[r24],
        i27.children[r24]
      );
  }
};
function rs2(a22, t19) {
  return a22.slots.map(({ name: i27, allowedChildren: e11 }) => {
    const r24 = t19.getElementConfigSelectors().filter(
      (_19) => {
        var h26, u35;
        return e11 instanceof Array ? e11.includes(_19) : (u35 = (h26 = t19.getElementConfig(_19)) == null ? void 0 : h26.dashboard) == null ? void 0 : u35.topLevel;
      }
    );
    return {
      slot: i27,
      allowedChildren: r24
    };
  });
}
function ai5(a22, t19) {
  if (!a22)
    return [];
  const i27 = t19.getMatchingElementConfig(a22);
  return i27 ? rs2(i27, t19) : [];
}
function as2(a22) {
  const t19 = document.createElement("div");
  return t19.setAttribute("slot", "layer"), t19.setAttribute("layer-id", a22), t19.style.width = "100%", t19.style.height = "100%", t19.style.position = "absolute", t19.style.top = "0", t19.style.boxSizing = "border-box", t19.style.pointerEvents = "none", t19;
}
function _s2() {
  const a22 = document.createElement("style");
  return a22.appendChild(document.createTextNode("")), document.head.appendChild(a22), a22.sheet;
}
function os2(a22, t19) {
  a22.insertRule(t19);
}
var ls2 = class extends ns2 {
  constructor(t19) {
    super(t19), this.layers = {}, this.themeSheets = {}, this.subscribe("storeValueChange", (i27) => {
      const { key: e11, value: r24 } = i27;
      e11 === "drawerOpened" ? this.publish("drawerToggle", { opened: r24 }) : e11 === "selectedElement" ? this.publish("elementSelect", { element: this.getSelectedElement() }) : e11 === "previewedElement" && this.publish("elementPreview", { element: this.getPreviewedElement() });
    }), this.getRootElement().setAttribute("data-theme", this.getTheme());
  }
  openDrawer() {
    this.setStoreValue("drawerOpened", true);
  }
  closeDrawer() {
    this.setStoreValue("drawerOpened", false);
  }
  isDrawerOpened() {
    return this.getStoreValue("drawerOpened", false);
  }
  setSelectedElement(t19) {
    this.getSelectedElement() !== t19 && (this.setStoreValue("selectedElement", t19), this.setStoreValue(
      "allowedChildren",
      ai5(t19, this.getConnector())
    ));
  }
  setPreviewedElement(t19) {
    this.getPreviewedElement() !== t19 && this.setStoreValue("previewedElement", t19);
  }
  addElements(t19, i27 = "default") {
    super.addElements(t19, i27);
    const e11 = this.getSelectedElement();
    e11 && this.setStoreValue(
      "allowedChildren",
      ai5(e11, this.getConnector())
    ), this.publish("elementsAdd");
  }
  setHtml(t19) {
    super.setHtml(t19);
    const i27 = this.getConnector().getRootElement().querySelector("dashboard-tab");
    i27 && this.setSelectedElement(i27), this.publish("htmlSet");
  }
  resetHtml() {
    this.setHtml(`
      <dashboard-tab tab-name="TeleOperated" slot="tab" selected></dashboard-tab>
      <dashboard-tab slot="tab" tab-name="Autonomous"></dashboard-tab>
    `);
  }
  reloadHtml() {
    this.setHtml(this.getHtml());
  }
  getSelectedElement() {
    return this.getStoreValue("selectedElement", null);
  }
  getPreviewedElement() {
    return this.getStoreValue("previewedElement", null);
  }
  getAllowedChildren() {
    return this.getStoreValue("allowedChildren", []);
  }
  /**
   *
   * @param {string} id
   * @param {string} elementName
   */
  addPropertyInput(t19, i27) {
    this.addComponent({
      type: "propertyInput",
      id: t19,
      mount({ dashboard: e11, element: r24, config: _19 }) {
        const h26 = document.createElement(i27);
        h26.element = _19.element, h26.propertyHandler = _19.propertyHandler, h26.propertyName = _19.propertyName, h26.dashboard = e11, r24.append(h26);
        const u35 = (O20) => {
          e11.publish("propertyInputChange", O20.detail);
        };
        h26.addEventListener("change", u35);
        const l25 = e11.subscribe(
          "propertyInputChange",
          () => {
            h26 == null || h26.requestUpdate();
          }
        );
        return () => {
          h26.removeEventListener("change", u35), l25(), h26.remove();
        };
      }
    });
  }
  addElementEditor(t19, i27) {
    this.addComponent({
      type: "elementEditor",
      id: t19,
      mount({ dashboard: e11, element: r24 }) {
        const _19 = document.createElement(i27);
        return _19.dashboard = e11, r24.append(_19), () => {
          _19.remove();
        };
      }
    });
  }
  addTab(t19, i27) {
    const e11 = document.createElement("dashboard-tab");
    return i27 && (e11.innerHTML = i27), e11.setAttribute("tab-name", t19), e11.setAttribute("slot", "tab"), this.getRootElement().append(e11), e11;
  }
  isElementEditable(t19 = this.getSelectedElement()) {
    return t19 ? t19.tagName.toLowerCase() !== "dashboard-tab" || !t19.hasAttribute("tutorial") : true;
  }
  addLayer(t19) {
    return this.layers[t19] ? this.layers[t19] : (this.layers[t19] = as2(t19), this.publish("layerAdd", { layer: this.layers[t19] }), this.layers[t19]);
  }
  hasLayer(t19) {
    return !!this.layers[t19];
  }
  getLayer(t19) {
    return this.layers[t19];
  }
  getLayers() {
    return this.layers;
  }
  addThemeRules(t19, i27) {
    typeof this.themeSheets[t19] > "u" && (this.themeSheets[t19] = _s2());
    const e11 = Object.entries(i27).map(
      ([r24, _19]) => `${r24}: ${_19};`
    );
    os2(
      this.themeSheets[t19],
      `
      [data-theme="${t19}"] {
        ${e11.join(`
`)}
      }
    `
    ), this.publish("themeRulesAdd");
  }
  setTheme(t19) {
    this.getRootElement().setAttribute("data-theme", t19), localStorage.setItem("theme", t19), this.setStoreValue("theme", t19), this.publish("themeSet");
  }
  getTheme() {
    const t19 = localStorage.getItem("theme") ?? "dark";
    return this.getStoreValue("theme", t19);
  }
  getThemes() {
    const t19 = ["light", ...Object.keys(this.themeSheets)];
    return [...new Set(t19).values()];
  }
};

// node_modules/@frc-web-components/react/dist/NT4Provider-5cc60b98.js
var q9 = (r24, e11, t19) => {
  if (!e11.has(r24))
    throw TypeError("Cannot " + t19);
};
var b21 = (r24, e11, t19) => (q9(r24, e11, "read from private field"), t19 ? t19.call(r24) : e11.get(r24));
var y17 = (r24, e11, t19) => {
  if (e11.has(r24))
    throw TypeError("Cannot add the same private member more than once");
  e11 instanceof WeakSet ? e11.add(r24) : e11.set(r24, t19);
};
var $13 = (r24, e11, t19, i27) => (q9(r24, e11, "write to private field"), e11.set(r24, t19), t19);
var v19 = (r24, e11, t19) => (q9(r24, e11, "access private method"), t19);
var ie6 = typeof global == "object" && global && global.Object === Object && global;
var ne6 = typeof self == "object" && self && self.Object === Object && self;
var se5 = ie6 || ne6 || Function("return this")();
var V9 = se5.Symbol;
var B12 = V9 ? V9.prototype : void 0;
B12 && B12.toString;
var Y7 = () => {
};
var A11;
var m21;
var _12;
var U13;
var I9;
var x17;
var C13;
var E16;
var k17;
var M5;
var D11;
var R11;
var re6 = class {
  constructor(e11 = {}, t19 = 0) {
    y17(this, C13), y17(this, k17), y17(this, D11), y17(this, A11, void 0), y17(this, m21, {}), y17(this, _12, void 0), y17(this, U13, /* @__PURE__ */ new Map()), y17(this, I9, /* @__PURE__ */ new Map()), y17(this, x17, /* @__PURE__ */ new Map()), t19 && $13(this, A11, setInterval(v19(this, C13, E16).bind(this), t19)), Object.entries(e11).forEach(([i27, c27]) => {
      this.updateSource(i27, c27);
    });
  }
  /**
   * Updates the value of a source in the store. If the source doesn't
   * exist then it is added. Should only be called internally by the
   * source provider.
   *
   * @protected
   * @param {string} key - The source's key. This is a string separated
   * by '/'.
   * @param {*} value - The new value.
   */
  updateSource(e11, t19) {
    clearTimeout(b21(this, _12)), b21(this, m21)[e11] === void 0 ? b21(this, m21)[e11] = {
      first: {
        type: "change",
        value: t19
      }
    } : b21(this, m21)[e11].last = {
      type: "change",
      value: t19
    }, b21(this, A11) || v19(this, C13, E16).call(this);
  }
  /**
   * Removes an existing source from the store. If the source
   * doesn't exist this does nothing. Should only be called
   * internally by the source provider.
   *
   * @protected
   * @param {string} key - The source's key. This is a string separated
   * by '/'.
   */
  removeSource(e11) {
    b21(this, m21)[e11] === void 0 ? b21(this, m21)[e11] = {
      first: {
        type: "removal"
      }
    } : b21(this, m21)[e11].last = {
      type: "removal"
    }, b21(this, A11) || v19(this, C13, E16).call(this);
  }
  /**
   * Removes all sources in the store for this provider. Should only be
   * called internally by the source provider.
   *
   * @protected
   * @param {function} callback - An optional callback. Called when sources
   * have been cleared.
   */
  clearSources(e11 = Y7) {
    v19(this, C13, E16).call(this, () => {
      b21(this, U13).forEach((t19) => t19()), e11();
    });
  }
  /**
   * Removes all sources in the store for this provider after a period of time.
   * If a source is set or this function is called before that period of time
   * ends, sources will not be cleared. This is useful for preventing sources
   * from being cleared on an unreliable network. Should only be called internally
   * by the source provider.
   *
   * @protected
   * @param {number} timeout - The period of time before clearing the sources
   * in milliseconds.
   * @param {function} callback - An optional callback. Called when sources
   * have been cleared.
   */
  clearSourcesWithTimeout(e11, t19) {
    clearTimeout(b21(this, _12)), $13(this, _12, setTimeout(() => {
      this.clearSources(t19);
    }, e11));
  }
  /**
   * Called when a source's value is modified by the user. This method
   * should be overridden by the child class to handle these updates.
   * This method should not be called directly.
   *
   * @protected
   * @param {string} key - The source's key. This is a string separated
   * by '/'.
   * @param {*} value - The source's updated value.
   */
  userUpdate(e11, t19) {
    this.updateSource(e11, t19);
  }
  /**
   * This optional method is called when a key is subscribed to that the store does not
   * already have. A SourceProvider can override this method to update the store with
   * the requested source.
   * @Override
   * @param {string} key
   */
  // eslint-disable-next-line class-methods-use-this, @typescript-eslint/no-empty-function
  requestSource(e11) {
  }
  /**
   * Helper function to get the type of a variable represented
   * by a string.
   *
   * @param {*} value
   * @returns {string} - The value's type.
   */
  static getType(e11) {
    return typeof e11 == "string" ? "string" : typeof e11 == "number" ? "number" : typeof e11 == "boolean" ? "boolean" : e11 instanceof Array ? "Array" : e11 === null ? "null" : null;
  }
  addClearSourcesHandler(e11) {
    const t19 = Symbol("clearSources");
    return b21(this, U13).set(t19, e11), () => {
      b21(this, U13).delete(t19);
    };
  }
  addSourcesChangedHandler(e11) {
    const t19 = Symbol("sourcesChanged");
    return b21(this, I9).set(t19, e11), () => {
      b21(this, I9).delete(t19);
    };
  }
  addSourcesRemovedHandler(e11) {
    const t19 = Symbol("sourcesRemoved");
    return b21(this, x17).set(t19, e11), () => {
      b21(this, x17).delete(t19);
    };
  }
  disconnect() {
    clearTimeout(b21(this, A11));
  }
};
A11 = /* @__PURE__ */ new WeakMap(), m21 = /* @__PURE__ */ new WeakMap(), _12 = /* @__PURE__ */ new WeakMap(), U13 = /* @__PURE__ */ new WeakMap(), I9 = /* @__PURE__ */ new WeakMap(), x17 = /* @__PURE__ */ new WeakMap(), C13 = /* @__PURE__ */ new WeakSet(), E16 = function(r24 = Y7) {
  if (Object.keys(b21(this, m21)).length === 0) {
    r24();
    return;
  }
  const e11 = { ...b21(this, m21) };
  $13(this, m21, {});
  const t19 = {}, i27 = {};
  Object.entries(e11).forEach(([c27, o12]) => {
    t19[c27] = o12.first, typeof o12.last < "u" && (i27[c27] = o12.last);
  }), v19(this, k17, M5).call(this, t19), v19(this, D11, R11).call(this, t19), Object.keys(i27).length > 0 ? setTimeout(() => {
    v19(this, k17, M5).call(this, i27), v19(this, D11, R11).call(this, i27), r24();
  }) : r24();
}, k17 = /* @__PURE__ */ new WeakSet(), M5 = function(r24) {
  const e11 = {};
  Object.entries(r24).forEach(([t19, { type: i27 }]) => {
    i27 === "change" && (e11[t19] = r24[t19].value);
  }), Object.keys(e11).length > 0 && b21(this, I9).forEach((t19) => t19(e11));
}, D11 = /* @__PURE__ */ new WeakSet(), R11 = function(r24) {
  const e11 = [];
  Object.entries(r24).forEach(([t19, { type: i27 }]) => {
    i27 === "removal" && e11.push(t19);
  }), e11.length > 0 && b21(this, x17).forEach((t19) => t19(e11));
};
function H11(r24, e11) {
  let t19, i27, c27 = new Uint8Array(128), o12 = 0;
  var h26 = "";
  return d34(r24, false, h26), c27.subarray(0, o12);
  function d34(s18, a22, u35) {
    switch (typeof s18) {
      case "undefined":
        w29();
        break;
      case "boolean":
        N19(s18);
        break;
      case "number":
        O20(s18, u35);
        break;
      case "string":
        S21(s18);
        break;
      case "object":
        s18 === null ? w29() : s18 instanceof Date ? p26(s18) : Array.isArray(s18) ? g31(s18) : s18 instanceof Uint8Array || s18 instanceof Uint8ClampedArray ? F17(s18) : s18 instanceof Int8Array || s18 instanceof Int16Array || s18 instanceof Uint16Array || s18 instanceof Int32Array || s18 instanceof Uint32Array || s18 instanceof Float32Array || s18 instanceof Float64Array ? g31(s18) : n33(s18);
        break;
      default:
        if (!a22 && e11 && e11.invalidTypeReplacement)
          typeof e11.invalidTypeReplacement == "function" || d34(e11.invalidTypeReplacement, true, u35);
        else
          throw new Error(
            "Invalid argument type: The type '" + typeof s18 + "' cannot be serialized."
          );
    }
  }
  function w29(s18) {
    f39(192);
  }
  function N19(s18) {
    f39(s18 ? 195 : 194);
  }
  function O20(s18, a22) {
    var u35 = a22 === "int" || isFinite(s18) && Math.floor(s18) === s18 && a22 !== "double" && a22 !== "float";
    if (u35)
      if (s18 >= 0 && s18 <= 127)
        f39(s18);
      else if (s18 < 0 && s18 >= -32)
        f39(s18);
      else if (s18 > 0 && s18 <= 255)
        l25([204, s18]);
      else if (s18 >= -128 && s18 <= 127)
        l25([208, s18]);
      else if (s18 > 0 && s18 <= 65535)
        l25([205, s18 >>> 8, s18]);
      else if (s18 >= -32768 && s18 <= 32767)
        l25([209, s18 >>> 8, s18]);
      else if (s18 > 0 && s18 <= 4294967295)
        l25([206, s18 >>> 24, s18 >>> 16, s18 >>> 8, s18]);
      else if (s18 >= -2147483648 && s18 <= 2147483647)
        l25([210, s18 >>> 24, s18 >>> 16, s18 >>> 8, s18]);
      else if (s18 > 0 && s18 <= 18446744073709552e3) {
        let T20 = s18 / 4294967296, j18 = s18 % 4294967296;
        l25([
          211,
          T20 >>> 24,
          T20 >>> 16,
          T20 >>> 8,
          T20,
          j18 >>> 24,
          j18 >>> 16,
          j18 >>> 8,
          j18
        ]);
      } else
        s18 >= -9223372036854776e3 && s18 <= 9223372036854776e3 ? (f39(211), L11(s18)) : s18 < 0 ? l25([211, 128, 0, 0, 0, 0, 0, 0, 0]) : l25([207, 255, 255, 255, 255, 255, 255, 255, 255]);
    else
      i27 || (t19 = new ArrayBuffer(8), i27 = new DataView(t19)), i27.setFloat64(0, s18), f39(203), l25(new Uint8Array(t19));
  }
  function S21(s18) {
    let a22 = ce7(s18), u35 = a22.length;
    u35 <= 31 ? f39(160 + u35) : u35 <= 255 ? l25([217, u35]) : u35 <= 65535 ? l25([218, u35 >>> 8, u35]) : l25([219, u35 >>> 24, u35 >>> 16, u35 >>> 8, u35]), l25(a22);
  }
  function g31(s18) {
    let a22 = s18.length;
    a22 <= 15 ? f39(144 + a22) : a22 <= 65535 ? l25([220, a22 >>> 8, a22]) : l25([221, a22 >>> 24, a22 >>> 16, a22 >>> 8, a22]);
    for (let u35 = 0; u35 < a22; u35++)
      d34(s18[u35]);
  }
  function F17(s18) {
    let a22 = s18.length;
    a22 <= 15 ? l25([196, a22]) : a22 <= 65535 ? l25([197, a22 >>> 8, a22]) : l25([198, a22 >>> 24, a22 >>> 16, a22 >>> 8, a22]), l25(s18);
  }
  function n33(s18) {
    let a22 = 0;
    for (let u35 in s18)
      s18[u35] !== void 0 && a22++;
    a22 <= 15 ? f39(128 + a22) : a22 <= 65535 ? l25([222, a22 >>> 8, a22]) : l25([223, a22 >>> 24, a22 >>> 16, a22 >>> 8, a22]);
    for (let u35 in s18) {
      let T20 = s18[u35];
      T20 !== void 0 && (d34(u35), d34(T20));
    }
  }
  function p26(s18) {
    let a22 = s18.getTime() / 1e3;
    if (s18.getMilliseconds() === 0 && a22 >= 0 && a22 < 4294967296)
      l25([214, 255, a22 >>> 24, a22 >>> 16, a22 >>> 8, a22]);
    else if (a22 >= 0 && a22 < 17179869184) {
      let u35 = s18.getMilliseconds() * 1e6;
      l25([
        215,
        255,
        u35 >>> 22,
        u35 >>> 14,
        u35 >>> 6,
        u35 << 2 >>> 0 | a22 / 4294967296,
        a22 >>> 24,
        a22 >>> 16,
        a22 >>> 8,
        a22
      ]);
    } else {
      let u35 = s18.getMilliseconds() * 1e6;
      l25([199, 12, 255, u35 >>> 24, u35 >>> 16, u35 >>> 8, u35]), L11(a22);
    }
  }
  function f39(s18) {
    if (c27.length < o12 + 1) {
      let a22 = c27.length * 2;
      for (; a22 < o12 + 1; )
        a22 *= 2;
      let u35 = new Uint8Array(a22);
      u35.set(c27), c27 = u35;
    }
    c27[o12] = s18, o12++;
  }
  function l25(s18) {
    if (c27.length < o12 + s18.length) {
      let a22 = c27.length * 2;
      for (; a22 < o12 + s18.length; )
        a22 *= 2;
      let u35 = new Uint8Array(a22);
      u35.set(c27), c27 = u35;
    }
    c27.set(s18, o12), o12 += s18.length;
  }
  function L11(s18) {
    let a22, u35;
    s18 >= 0 ? (a22 = s18 / 4294967296, u35 = s18 % 4294967296) : (s18++, a22 = Math.abs(s18) / 4294967296, u35 = Math.abs(s18) % 4294967296, a22 = ~a22, u35 = ~u35), l25([
      a22 >>> 24,
      a22 >>> 16,
      a22 >>> 8,
      a22,
      u35 >>> 24,
      u35 >>> 16,
      u35 >>> 8,
      u35
    ]);
  }
}
function oe6(r24, e11) {
  let t19 = 0;
  if (r24 instanceof ArrayBuffer && (r24 = new Uint8Array(r24)), typeof r24 != "object" || typeof r24.length > "u")
    throw new Error(
      "Invalid argument type: Expected a byte array (Array or Uint8Array) to deserialize."
    );
  if (!r24.length)
    throw new Error(
      "Invalid argument: The byte array to deserialize is empty."
    );
  r24 instanceof Uint8Array || (r24 = new Uint8Array(r24));
  let i27;
  if (e11 && e11.multiple)
    for (i27 = []; t19 < r24.length; )
      i27.push(c27());
  else
    i27 = c27();
  return i27;
  function c27() {
    const n33 = r24[t19++];
    if (n33 >= 0 && n33 <= 127)
      return n33;
    if (n33 >= 128 && n33 <= 143)
      return N19(n33 - 128);
    if (n33 >= 144 && n33 <= 159)
      return O20(n33 - 144);
    if (n33 >= 160 && n33 <= 191)
      return S21(n33 - 160);
    if (n33 === 192)
      return null;
    if (n33 === 193)
      throw new Error("Invalid byte code 0xc1 found.");
    if (n33 === 194)
      return false;
    if (n33 === 195)
      return true;
    if (n33 === 196)
      return w29(-1, 1);
    if (n33 === 197)
      return w29(-1, 2);
    if (n33 === 198)
      return w29(-1, 4);
    if (n33 === 199)
      return g31(-1, 1);
    if (n33 === 200)
      return g31(-1, 2);
    if (n33 === 201)
      return g31(-1, 4);
    if (n33 === 202)
      return d34(4);
    if (n33 === 203)
      return d34(8);
    if (n33 === 204)
      return h26(1);
    if (n33 === 205)
      return h26(2);
    if (n33 === 206)
      return h26(4);
    if (n33 === 207)
      return h26(8);
    if (n33 === 208)
      return o12(1);
    if (n33 === 209)
      return o12(2);
    if (n33 === 210)
      return o12(4);
    if (n33 === 211)
      return o12(8);
    if (n33 === 212)
      return g31(1);
    if (n33 === 213)
      return g31(2);
    if (n33 === 214)
      return g31(4);
    if (n33 === 215)
      return g31(8);
    if (n33 === 216)
      return g31(16);
    if (n33 === 217)
      return S21(-1, 1);
    if (n33 === 218)
      return S21(-1, 2);
    if (n33 === 219)
      return S21(-1, 4);
    if (n33 === 220)
      return O20(-1, 2);
    if (n33 === 221)
      return O20(-1, 4);
    if (n33 === 222)
      return N19(-1, 2);
    if (n33 === 223)
      return N19(-1, 4);
    if (n33 >= 224 && n33 <= 255)
      return n33 - 256;
    throw console.debug("msgpack array:", r24), new Error(
      "Invalid byte value '" + n33 + "' at index " + (t19 - 1) + " in the MessagePack binary data (length " + r24.length + "): Expecting a range of 0 to 255. This is not a byte array."
    );
  }
  function o12(n33) {
    let p26 = 0, f39 = true;
    for (; n33-- > 0; )
      if (f39) {
        let l25 = r24[t19++];
        p26 += l25 & 127, l25 & 128 && (p26 -= 128), f39 = false;
      } else
        p26 *= 256, p26 += r24[t19++];
    return p26;
  }
  function h26(n33) {
    let p26 = 0;
    for (; n33-- > 0; )
      p26 *= 256, p26 += r24[t19++];
    return p26;
  }
  function d34(n33) {
    let p26 = new DataView(r24.buffer, t19 + r24.byteOffset, n33);
    if (t19 += n33, n33 === 4)
      return p26.getFloat32(0, false);
    if (n33 === 8)
      return p26.getFloat64(0, false);
  }
  function w29(n33, p26) {
    n33 < 0 && (n33 = h26(p26));
    let f39 = r24.subarray(t19, t19 + n33);
    return t19 += n33, f39;
  }
  function N19(n33, p26) {
    n33 < 0 && (n33 = h26(p26));
    let f39 = {};
    for (; n33-- > 0; ) {
      let l25 = c27();
      f39[l25] = c27();
    }
    return f39;
  }
  function O20(n33, p26) {
    n33 < 0 && (n33 = h26(p26));
    let f39 = [];
    for (; n33-- > 0; )
      f39.push(c27());
    return f39;
  }
  function S21(n33, p26) {
    n33 < 0 && (n33 = h26(p26));
    let f39 = t19;
    return t19 += n33, ae6(r24, f39, n33);
  }
  function g31(n33, p26) {
    n33 < 0 && (n33 = h26(p26));
    let f39 = h26(1), l25 = w29(n33);
    switch (f39) {
      case 255:
        return F17(l25);
    }
    return { type: f39, data: l25 };
  }
  function F17(n33) {
    if (n33.length === 4) {
      let p26 = (n33[0] << 24 >>> 0) + (n33[1] << 16 >>> 0) + (n33[2] << 8 >>> 0) + n33[3];
      return new Date(p26 * 1e3);
    }
    if (n33.length === 8) {
      let p26 = (n33[0] << 22 >>> 0) + (n33[1] << 14 >>> 0) + (n33[2] << 6 >>> 0) + (n33[3] >>> 2), f39 = (n33[3] & 3) * 4294967296 + (n33[4] << 24 >>> 0) + (n33[5] << 16 >>> 0) + (n33[6] << 8 >>> 0) + n33[7];
      return new Date(f39 * 1e3 + p26 / 1e6);
    }
    if (n33.length === 12) {
      let p26 = (n33[0] << 24 >>> 0) + (n33[1] << 16 >>> 0) + (n33[2] << 8 >>> 0) + n33[3];
      t19 -= 8;
      let f39 = o12(8);
      return new Date(f39 * 1e3 + p26 / 1e6);
    }
    throw new Error("Invalid data length for a date value.");
  }
}
function ce7(r24) {
  let e11 = true, t19 = r24.length;
  for (let o12 = 0; o12 < t19; o12++)
    if (r24.charCodeAt(o12) > 127) {
      e11 = false;
      break;
    }
  let i27 = 0, c27 = new Uint8Array(r24.length * (e11 ? 1 : 4));
  for (let o12 = 0; o12 !== t19; o12++) {
    let h26 = r24.charCodeAt(o12);
    if (h26 < 128) {
      c27[i27++] = h26;
      continue;
    }
    if (h26 < 2048)
      c27[i27++] = h26 >> 6 | 192;
    else {
      if (h26 > 55295 && h26 < 56320) {
        if (++o12 >= t19)
          throw new Error("UTF-8 encode: incomplete surrogate pair");
        let d34 = r24.charCodeAt(o12);
        if (d34 < 56320 || d34 > 57343)
          throw new Error(
            "UTF-8 encode: second surrogate character 0x" + d34.toString(16) + " at index " + o12 + " out of range"
          );
        h26 = 65536 + ((h26 & 1023) << 10) + (d34 & 1023), c27[i27++] = h26 >> 18 | 240, c27[i27++] = h26 >> 12 & 63 | 128;
      } else
        c27[i27++] = h26 >> 12 | 224;
      c27[i27++] = h26 >> 6 & 63 | 128;
    }
    c27[i27++] = h26 & 63 | 128;
  }
  return e11 ? c27 : c27.subarray(0, i27);
}
function ae6(r24, e11, t19) {
  let i27 = e11, c27 = "";
  for (t19 += e11; i27 < t19; ) {
    let o12 = r24[i27++];
    if (o12 > 127)
      if (o12 > 191 && o12 < 224) {
        if (i27 >= t19)
          throw new Error("UTF-8 decode: incomplete 2-byte sequence");
        o12 = (o12 & 31) << 6 | r24[i27++] & 63;
      } else if (o12 > 223 && o12 < 240) {
        if (i27 + 1 >= t19)
          throw new Error("UTF-8 decode: incomplete 3-byte sequence");
        o12 = (o12 & 15) << 12 | (r24[i27++] & 63) << 6 | r24[i27++] & 63;
      } else if (o12 > 239 && o12 < 248) {
        if (i27 + 2 >= t19)
          throw new Error("UTF-8 decode: incomplete 4-byte sequence");
        o12 = (o12 & 7) << 18 | (r24[i27++] & 63) << 12 | (r24[i27++] & 63) << 6 | r24[i27++] & 63;
      } else
        throw new Error(
          "UTF-8 decode: unknown multibyte start 0x" + o12.toString(16) + " at index " + (i27 - 1)
        );
    if (o12 <= 65535)
      c27 += String.fromCharCode(o12);
    else if (o12 <= 1114111)
      o12 -= 65536, c27 += String.fromCharCode(o12 >> 10 | 55296), c27 += String.fromCharCode(o12 & 1023 | 56320);
    else
      throw new Error(
        "UTF-8 decode: code point 0x" + o12.toString(16) + " exceeds UTF-16 reach"
      );
  }
  return c27;
}
var W5 = {
  boolean: 0,
  double: 1,
  int: 2,
  float: 3,
  string: 4,
  json: 4,
  raw: 5,
  rpc: 5,
  msgpack: 5,
  protobuf: 5,
  "boolean[]": 16,
  "double[]": 17,
  "int[]": 18,
  "float[]": 19,
  "string[]": 20
};
var P11 = class {
  constructor() {
    this.uid = -1, this.topics = /* @__PURE__ */ new Set(), this.options = new he6();
  }
  toSubscribeObj() {
    return {
      topics: Array.from(this.topics),
      subuid: this.uid,
      options: this.options.toObj()
    };
  }
  toUnsubscribeObj() {
    return {
      subuid: this.uid
    };
  }
};
var he6 = class {
  constructor() {
    this.periodic = 0.02, this.all = false, this.topicsOnly = false, this.prefix = false;
  }
  toObj() {
    return {
      periodic: this.periodic,
      all: this.all,
      topicsonly: this.topicsOnly,
      prefix: this.prefix
    };
  }
};
var z12 = class {
  constructor() {
    this.uid = -1, this.name = "", this.type = "", this.properties = {};
  }
  toPublishObj() {
    return {
      name: this.name,
      type: this.type,
      pubuid: this.uid,
      properties: this.properties
    };
  }
  toUnpublishObj() {
    return {
      pubuid: this.uid
    };
  }
  getTypeIdx() {
    return this.type in W5 ? W5[this.type] : 5;
  }
};
var ue6 = class {
  /**
   * Creates a new NT4 client without connecting.
   * @param serverAddr Network address of NT4 server
   * @param appName Identifier for this client (does not need to be unique).
   * @param onTopicAnnounce Gets called when server announces enough topics to form a new signal
   * @param onTopicUnannounce Gets called when server unannounces any part of a signal
   * @param onNewTopicData Gets called when any new data is available
   * @param onConnect Gets called once client completes initial handshake with server
   * @param onDisconnect Gets called once client detects server has disconnected
   */
  constructor(e11, t19, i27, c27, o12, h26, d34) {
    this.ws = null, this.clientIdx = 0, this.useSecure = false, this.serverAddr = "", this.serverConnectionActive = false, this.serverConnectionRequested = false, this.serverTimeOffset_us = null, this.uidCounter = 0, this.subscriptions = /* @__PURE__ */ new Map(), this.publishedTopics = /* @__PURE__ */ new Map(), this.serverTopics = /* @__PURE__ */ new Map(), this.serverBaseAddr = e11, this.appName = t19, this.onTopicAnnounce = i27, this.onTopicUnannounce = c27, this.onNewTopicData = o12, this.onConnect = h26, this.onDisconnect = d34, setInterval(() => this.ws_sendTimestamp(), 5e3);
  }
  //////////////////////////////////////////////////////////////
  // PUBLIC API
  /** Starts the connection. The client will reconnect automatically when disconnected. */
  connect() {
    this.serverConnectionRequested || (this.serverConnectionRequested = true, this.ws_connect());
  }
  /** Terminates the connection. */
  disconnect() {
    this.serverConnectionRequested && (this.serverConnectionRequested = false, this.serverConnectionActive && this.ws && this.ws.close());
  }
  /**
   * Add a new subscription, reading data at the specified frequency.
   * @param topicPatterns A list of topics or prefixes to include in the subscription.
   * @param prefixMode If true, use patterns as prefixes. If false, only subscribe to topics that are an exact match.
   * @param period The period to return data in seconds.
   * @returns A subscription ID that can be used to unsubscribe.
   */
  subscribePeriodic(e11, t19, i27) {
    let c27 = new P11();
    return c27.uid = this.getNewUID(), c27.topics = new Set(e11), c27.options.prefix = t19, c27.options.periodic = i27, this.subscriptions.set(c27.uid, c27), this.serverConnectionActive && this.ws_subscribe(c27), c27.uid;
  }
  /**
   * Add a new subscription, reading all value updates.
   * @param topicPatterns A list of topics or prefixes to include in the subscription.
   * @param prefixMode If true, use patterns as prefixes. If false, only subscribe to topics that are an exact match.
   * @returns A subscription ID that can be used to unsubscribe.
   */
  subscribeAll(e11, t19) {
    let i27 = new P11();
    return i27.uid = this.getNewUID(), i27.topics = new Set(e11), i27.options.prefix = t19, i27.options.all = true, this.subscriptions.set(i27.uid, i27), this.serverConnectionActive && this.ws_subscribe(i27), i27.uid;
  }
  /**
   * Add a new subscription, reading only topic announcements (not values).
   * @param topicPatterns A list of topics or prefixes to include in the subscription.
   * @param prefixMode If true, use patterns as prefixes. If false, only subscribe to topics that are an exact match.
   * @returns A subscription ID that can be used to unsubscribe.
   */
  subscribeTopicsOnly(e11, t19) {
    let i27 = new P11();
    return i27.uid = this.getNewUID(), i27.topics = new Set(e11), i27.options.prefix = t19, i27.options.topicsOnly = true, this.subscriptions.set(i27.uid, i27), this.serverConnectionActive && this.ws_subscribe(i27), i27.uid;
  }
  /** Given an existing subscription, unsubscribe from it. */
  unsubscribe(e11) {
    let t19 = this.subscriptions.get(e11);
    if (!t19)
      throw 'Unknown subscription ID "' + e11 + '"';
    this.subscriptions.delete(e11), this.serverConnectionActive && this.ws_unsubscribe(t19);
  }
  /** Unsubscribe from all current subscriptions. */
  clearAllSubscriptions() {
    for (const e11 of this.subscriptions.keys())
      this.unsubscribe(e11);
  }
  /**
   * Set the properties of a particular topic.
   * @param topic The topic to update
   * @param properties The set of new properties
   */
  setProperties(e11, t19) {
    let i27 = (h26) => {
      for (const d34 of Object.keys(t19)) {
        let w29 = t19[d34];
        w29 === null ? delete h26.properties[d34] : h26.properties[d34] = w29;
      }
    }, c27 = this.publishedTopics.get(e11);
    c27 && i27(c27);
    let o12 = this.serverTopics.get(e11);
    o12 && i27(o12), this.serverConnectionActive && this.ws_setproperties(e11, t19);
  }
  /** Set whether a topic is persistent.
   *
   * If true, the last set value will be periodically saved to
   * persistent storage on the server and be restored during server
   * startup. Topics with this property set to true will not be
   * deleted by the server when the last publisher stops publishing.
   */
  setPersistent(e11, t19) {
    this.setProperties(e11, { persistent: t19 });
  }
  /** Set whether a topic is retained.
   *
   * Topics with this property set to true will not be deleted by
   * the server when the last publisher stops publishing.
   */
  setRetained(e11, t19) {
    this.setProperties(e11, { retained: t19 });
  }
  /** Publish a new topic from this client with the provided name and type. */
  publishNewTopic(e11, t19) {
    if (this.publishedTopics.has(e11))
      return;
    let i27 = new z12();
    i27.name = e11, i27.uid = this.getNewUID(), i27.type = t19, this.publishedTopics.set(e11, i27), this.serverConnectionActive && this.ws_publish(i27);
  }
  /** Unpublish a previously-published topic from this client. */
  unpublishTopic(e11) {
    let t19 = this.publishedTopics.get(e11);
    if (!t19)
      throw 'Topic "' + e11 + '" not found';
    this.publishedTopics.delete(e11), this.serverConnectionActive && this.ws_unpublish(t19);
  }
  /** Send some new value to the server. The timestamp is whatever the current time is. */
  addSample(e11, t19) {
    let i27 = this.getServerTime_us();
    i27 === null && (i27 = 0), this.addTimestampedSample(e11, i27, t19);
  }
  /** Send some new timestamped value to the server. */
  addTimestampedSample(e11, t19, i27) {
    let c27 = this.publishedTopics.get(e11);
    if (!c27)
      throw 'Topic "' + e11 + '" not found';
    let o12 = H11([
      c27.uid,
      t19,
      c27.getTypeIdx(),
      i27
    ]);
    this.ws_sendBinary(o12);
  }
  //////////////////////////////////////////////////////////////
  // Server/Client Time Sync Handling
  /** Returns the current client time in microseconds. */
  getClientTime_us() {
    return (/* @__PURE__ */ new Date()).getTime() * 1e3;
  }
  /** Returns the current server time in microseconds (or null if unknown). */
  getServerTime_us() {
    return this.serverTimeOffset_us === null ? null : this.getClientTime_us() + this.serverTimeOffset_us;
  }
  ws_sendTimestamp() {
    let e11 = this.getClientTime_us(), t19 = H11([-1, 0, W5.int, e11]);
    this.ws_sendBinary(t19);
  }
  ws_handleReceiveTimestamp(e11, t19) {
    let i27 = this.getClientTime_us(), c27 = i27 - t19, o12 = e11 + c27 / 2;
    this.serverTimeOffset_us = o12 - i27, console.log(
      "[NT4] New server time estimate: " + (this.getServerTime_us() / 1e6).toString()
    );
  }
  //////////////////////////////////////////////////////////////
  // Websocket Message Send Handlers
  ws_subscribe(e11) {
    this.ws_sendJSON("subscribe", e11.toSubscribeObj());
  }
  ws_unsubscribe(e11) {
    this.ws_sendJSON("unsubscribe", e11.toUnsubscribeObj());
  }
  ws_publish(e11) {
    this.ws_sendJSON("publish", e11.toPublishObj());
  }
  ws_unpublish(e11) {
    this.ws_sendJSON("unpublish", e11.toUnpublishObj());
  }
  ws_setproperties(e11, t19) {
    this.ws_sendJSON("setproperties", {
      name: e11,
      update: t19
    });
  }
  ws_sendJSON(e11, t19) {
    this.ws && this.ws.readyState === WebSocket.OPEN && this.ws.send(
      JSON.stringify([
        {
          method: e11,
          params: t19
        }
      ])
    );
  }
  ws_sendBinary(e11) {
    this.ws && this.ws.readyState === WebSocket.OPEN && this.ws.send(e11);
  }
  //////////////////////////////////////////////////////////////
  // Websocket connection Maintenance
  ws_onOpen() {
    this.serverConnectionActive = true, console.log("[NT4] Connected with idx " + this.clientIdx.toString()), this.ws_sendTimestamp();
    for (const e11 of this.publishedTopics.values())
      this.ws_publish(e11);
    for (const e11 of this.subscriptions.values())
      this.ws_subscribe(e11);
    this.onConnect();
  }
  ws_onClose(e11) {
    this.ws = null, this.serverConnectionActive = false, this.onDisconnect(), this.serverTopics.clear(), e11.reason !== "" && console.log("[NT4] Socket is closed: ", e11.reason), this.serverConnectionRequested && setTimeout(() => this.ws_connect(), 500);
  }
  ws_onError() {
    this.ws && this.ws.close();
  }
  ws_onMessage(e11) {
    if (typeof e11.data == "string") {
      let t19 = JSON.parse(e11.data);
      if (!Array.isArray(t19)) {
        console.warn(
          "[NT4] Ignoring text message, JSON parsing did not produce an array at the top level."
        );
        return;
      }
      t19.forEach((i27) => {
        if (typeof i27 != "object") {
          console.warn(
            "[NT4] Ignoring text message, JSON parsing did not produce an object."
          );
          return;
        }
        if (!("method" in i27) || !("params" in i27)) {
          console.warn(
            "[NT4] Ignoring text message, JSON parsing did not find all required fields."
          );
          return;
        }
        let c27 = i27.method, o12 = i27.params;
        if (typeof c27 != "string") {
          console.warn(
            `[NT4] Ignoring text message, JSON parsing found "method", but it wasn't a string.`
          );
          return;
        }
        if (typeof o12 != "object") {
          console.warn(
            `[NT4] Ignoring text message, JSON parsing found "params", but it wasn't an object.`
          );
          return;
        }
        if (c27 === "announce") {
          let h26 = new z12();
          h26.uid = o12.id, h26.name = o12.name, h26.type = o12.type, h26.properties = o12.properties, this.serverTopics.set(h26.name, h26), this.onTopicAnnounce(h26);
        } else if (c27 === "unannounce") {
          let h26 = this.serverTopics.get(o12.name);
          if (!h26) {
            console.warn(
              "[NT4] Ignoring unannounce, topic was not previously announced."
            );
            return;
          }
          this.serverTopics.delete(h26.name), this.onTopicUnannounce(h26);
        } else if (c27 === "properties") {
          let h26 = this.serverTopics.get(o12.name);
          if (!h26) {
            console.warn(
              "[NT4] Ignoring set properties, topic was not previously announced."
            );
            return;
          }
          for (const d34 of Object.keys(o12.update)) {
            let w29 = o12.update[d34];
            w29 === null ? delete h26.properties[d34] : h26.properties[d34] = w29;
          }
        } else {
          console.warn(
            "[NT4] Ignoring text message - unknown method " + c27
          );
          return;
        }
      });
    } else
      oe6(e11.data, { multiple: true }).forEach(
        (t19) => {
          let i27 = t19[0], c27 = t19[1], o12 = t19[3];
          if (i27 >= 0) {
            let h26 = null;
            for (let d34 of this.serverTopics.values())
              d34.uid === i27 && (h26 = d34);
            if (!h26) {
              console.warn(
                "[NT4] Ignoring binary data - unknown topic ID " + i27.toString()
              );
              return;
            }
            this.onNewTopicData(h26, c27, o12);
          } else
            i27 === -1 ? this.ws_handleReceiveTimestamp(c27, o12) : console.warn(
              "[NT4] Ignoring binary data - invalid topic ID " + i27.toString()
            );
        }
      );
  }
  ws_connect() {
    this.clientIdx = Math.floor(Math.random() * 99999999);
    let e11 = 5810, t19 = "ws://";
    this.useSecure && (t19 = "wss://", e11 = 5811), this.serverAddr = t19 + this.serverBaseAddr + ":" + e11.toString() + "/nt/" + this.appName + "_" + this.clientIdx.toString(), this.ws = new WebSocket(this.serverAddr, "networktables.first.wpi.edu"), this.ws.binaryType = "arraybuffer", this.ws.addEventListener("open", () => this.ws_onOpen()), this.ws.addEventListener(
      "message",
      (i27) => this.ws_onMessage(i27)
    ), this.ws.addEventListener(
      "close",
      (i27) => this.ws_onClose(i27)
    ), this.ws.addEventListener("error", () => this.ws_onError());
  }
  //////////////////////////////////////////////////////////////
  // General utilties
  getNewUID() {
    return this.uidCounter++, this.uidCounter + this.clientIdx;
  }
};
function J8(r24) {
  if (typeof r24 == "boolean" || typeof r24 == "string")
    return typeof r24;
  if (typeof r24 == "number")
    return "double";
  if (r24 instanceof Array) {
    if (r24.length === 0)
      return;
    const e11 = J8(r24[0]);
    return r24.some((t19) => J8(t19) !== e11) ? void 0 : `${e11}[]`;
  }
}
function le5(r24) {
  const e11 = r24.toString().at(-4) ?? "", t19 = r24.toString().at(-3) ?? "", i27 = r24.toString().at(-2) ?? "", c27 = r24.toString().at(-1) ?? "";
  let o12 = parseInt(`${e11}${t19}`, 10), h26 = parseInt(`${i27}${c27}`, 10);
  Number.isNaN(o12) && (o12 = 0), Number.isNaN(h26) && (h26 = 0);
  const d34 = e11 + t19 + i27 + c27;
  return [
    `10.${o12.toString()}.${h26.toString()}.2`,
    "172.22.11.2",
    `roborio-${d34}-FRC.local`,
    `roborio-${d34}-FRC.lan`,
    `roborio-${d34}-FRC.frc-field.local`
  ];
}
var de7 = class extends re6 {
  constructor() {
    super({}, 1e3 / 60), this.serverAddress = "", this.clients = {}, this.connected = false, this.topics = {}, this.topicValues = {}, this.unprocessedUpdates = {}, this.connectionListeners = [], this.connect(localStorage.getItem("nt4Address") ?? "127.0.0.1");
  }
  setValue(e11, t19) {
    this.userUpdate(e11, t19);
  }
  getValue(e11, t19) {
    return e11 in this.topicValues ? this.topicValues[e11] : t19;
  }
  getServerAddress() {
    return this.serverAddress;
  }
  connect(e11) {
    this.serverAddress !== e11 && (this.clearSources(), this.createClient(e11));
  }
  disconnect() {
    var e11;
    (e11 = this.client) == null || e11.disconnect();
  }
  isConnected() {
    return this.connected;
  }
  addConnectionListener(e11, t19 = false) {
    this.connectionListeners.push(e11), t19 && e11(this.connected, this.serverAddress);
  }
  processUnprocessedUpdates() {
    const e11 = { ...this.unprocessedUpdates };
    this.unprocessedUpdates = {}, Object.entries(e11).forEach(([t19, i27]) => {
      this.userUpdate(t19, i27);
    });
  }
  // TODO: Be able to optionally pass in additional data
  userUpdate(e11, t19) {
    if (!this.client) {
      this.unprocessedUpdates[e11] = t19;
      return;
    }
    const i27 = this.topics[e11];
    if (i27)
      this.client.publishNewTopic(i27.name, i27.type), this.client.addSample(i27.name, t19), this.updateSource(i27.name, t19);
    else {
      const c27 = J8(t19);
      c27 !== void 0 && (this.client.publishNewTopic(e11, c27), this.client.addSample(e11, t19), this.updateSource(e11, t19));
    }
  }
  onTopicAnnounce(e11) {
    this.topics[e11.name] = e11;
  }
  onTopicUnannounce(e11) {
    delete this.topics[e11.name], delete this.topicValues[e11.name], this.removeSource(e11.name);
  }
  onNewTopicData(e11, t19, i27) {
    this.updateSource(e11.name, i27), this.topicValues[e11.name] = i27;
  }
  onConnect() {
    this.connected = true, this.connectionListeners.forEach(
      (e11) => e11(true, this.serverAddress)
    ), this.processUnprocessedUpdates();
  }
  onDisconnect() {
    this.connected = false, this.connectionListeners.forEach(
      (e11) => e11(false, this.serverAddress)
    );
  }
  createClient(e11) {
    this.client && (this.client.disconnect(), this.topics = {}, this.topicValues = {}, this.connected = false, this.client = void 0), Object.values(this.clients).forEach((i27) => i27.disconnect()), this.clients = {}, this.serverAddress = e11, this.connectionListeners.forEach(
      (i27) => i27(this.connected, this.serverAddress)
    ), localStorage.setItem("nt4Address", e11);
    const t19 = "FRC Web Components";
    (/^[0-9]+$/.test(e11) && !Number.isNaN(parseFloat(e11)) ? le5(parseFloat(e11)) : [e11]).forEach((i27) => {
      const c27 = new ue6(
        i27,
        t19,
        (...o12) => {
          this.client === c27 && this.onTopicAnnounce(...o12);
        },
        (...o12) => {
          this.client === c27 && this.onTopicUnannounce(...o12);
        },
        (...o12) => {
          this.client === c27 && this.onNewTopicData(...o12);
        },
        () => {
          this.client = c27, Object.entries(this.clients).forEach(
            ([o12, h26]) => {
              o12 !== i27 && h26.disconnect();
            }
          ), this.clients = {}, this.onConnect();
        },
        () => {
          this.client === c27 && this.onDisconnect();
        }
      );
      this.clients[i27] = c27, c27.connect(), c27.subscribeAll(["/"], true);
    });
  }
};
var G9 = (0, import_react5.createContext)(void 0);
function pe6(r24) {
  const e11 = new ls2(document.body), t19 = new de7();
  return e11.addSourceProvider("NetworkTables", t19), e11.setDefaultSourceProvider("NetworkTables"), e11.addElements(gr4, "FRC"), t19.connect(r24), { store: e11.getStore(), nt4Provider: t19 };
}
var ge5 = ({
  children: r24,
  address: e11
}) => {
  const [{ store: t19, nt4Provider: i27 }] = (0, import_react5.useState)(() => pe6(e11));
  return (0, import_jsx_runtime.jsx)(G9.Provider, { value: { store: t19, nt4Provider: i27 }, children: r24 });
};
var me7 = () => {
  const r24 = (0, import_react5.useContext)(G9);
  if (!r24)
    throw new Error("useStore must be used within a StoreProvider");
  return r24;
};

// node_modules/@frc-web-components/react/dist/components/BasicFmsInfo.es.js
var import_jsx_runtime2 = __toESM(require_jsx_runtime(), 1);
var T13 = Object.defineProperty;
var m22 = (s18, a22, i27, p26) => {
  for (var t19 = void 0, e11 = s18.length - 1, o12; e11 >= 0; e11--)
    (o12 = s18[e11]) && (t19 = o12(a22, i27, t19) || t19);
  return t19 && T13(a22, i27, t19), t19;
};
var v20 = 1;
var M6 = 2;
var x18 = 4;
var A12 = 8;
var F10 = 16;
var E17 = 32;
var I10 = ["Unknown", "Practice", "Qualification", "Elimination"];
var h16 = class extends x {
  constructor() {
    super(...arguments), this.matchType = 0, this.matchNumber = 0, this.eventName = "", this.fmsControlData = 0;
  }
  getRobotState() {
    return this.isEnabled() ? this.isTest() ? "Test" : this.isAuto() ? "Autonomous" : "Teleoperated" : "Disabled";
  }
  isEnabled() {
    return !!(this.fmsControlData & v20);
  }
  isAuto() {
    return !!(this.fmsControlData & M6);
  }
  isTest() {
    return !!(this.fmsControlData & x18);
  }
  isEmergencyStopped() {
    return !!(this.fmsControlData & A12);
  }
  isFmsAttached() {
    return !!(this.fmsControlData & F10);
  }
  isDsAttached() {
    return !!(this.fmsControlData & E17);
  }
  render() {
    return Ht`
      <p>
        <strong>
          <span>${this.eventName}</span>
          <span>${I10[this.matchType]}</span>
          <span>match ${this.matchNumber}</span>
        </strong>
      </p>

      <p style="margin-bottom: 7px; font-weight: normal">
        <span style="margin-right: 5px;">
          ${this.isFmsAttached() ? Ht`
                <span class="info">
                  <frc-icon icon="check" color="green"></frc-icon>
                  FMS connected
                </span>
              ` : Ht`
                <span class="info">
                  <frc-icon icon="close" color="red"></frc-icon>
                  FMS disconnected
                </span>
              `}
        </span>
        <span>
          ${this.isDsAttached() ? Ht`
                <span class="info">
                  <frc-icon icon="check" color="green"></frc-icon>
                  DriverStation connected
                </span>
              ` : Ht`
                <span class="info">
                  <frc-icon icon="close" color="red"></frc-icon>
                  DriverStation disconnected
                </span>
              `}
        </span>
      </p>
      <p style="font-weight: normal">Robot state: ${this.getRobotState()}</p>
    `;
  }
};
h16.styles = Mt2`
    p {
      margin: 5px 0;
    }
    p:first-child {
      margin-top: 0;
    }
    p:last-child {
      margin: 0;
    }
    :host {
      text-align: center;
      font-size: 15px;
      display: inline-flex;
      width: auto;
      flex-direction: column;
      justify-content: center;
      font-family: sans-serif;
      color: var(--frc-basic-fms-info-text-color, #000);
    }

    .info {
      display: inline-flex;
      align-items: center;
      gap: 3px;
    }
  `;
var n19 = h16;
m22([
  Rt({ type: Number, attribute: "match-type" })
], n19.prototype, "matchType");
m22([
  Rt({ type: Number, attribute: "match-number" })
], n19.prototype, "matchNumber");
m22([
  Rt({ type: String, attribute: "event-name" })
], n19.prototype, "eventName");
m22([
  Rt({ type: Number, attribute: "fms-control-data" })
], n19.prototype, "fmsControlData");
customElements.get("frc-basic-fms-info") || customElements.define("frc-basic-fms-info", n19);
var _13 = xt({
  tagName: "frc-basic-fms-info",
  elementClass: n19,
  react: import_react6.default
});
var R12 = {
  EventName: "eventName",
  FMSControlData: "fmsControlData",
  GameSpecificMessage: "gameSpecificMessage",
  IsRedAlliance: "isRedAlliance",
  MatchNumber: "matchNumber",
  MatchType: "matchType",
  ReplayNumber: "replayNumber",
  StationNumber: "stationNumber"
};
var u20 = {
  eventName: "",
  fmsControlData: 0,
  gameSpecificMessage: "",
  isRedAlliance: false,
  matchNumber: 0,
  matchType: 0,
  relayNumber: 0,
  stationNumber: 0
};
function z13(s18) {
  const { store: a22 } = me7(), [i27, p26] = (0, import_react6.useState)({ ...u20 });
  return (0, import_react6.useEffect)(() => a22.subscribe(
    "NetworkTables",
    s18,
    () => {
      var o12;
      const t19 = { ...u20 }, e11 = a22.getSource("NetworkTables", s18);
      if (e11) {
        const f39 = e11.getChildren();
        ((o12 = e11.getChildren()[".type"]) == null ? void 0 : o12.getSourceValue()) === "FMSInfo" && Object.entries(R12).forEach(
          ([l25, b33]) => {
            l25 in f39 && (t19[b33] = f39[l25].getSourceValue());
          }
        );
      }
      p26(t19);
    },
    true
  ), []), i27;
}

// node_modules/@frc-web-components/react/dist/components/BooleanBox.es.js
var import_react7 = __toESM(require_react(), 1);
var y19 = Object.defineProperty;
var n20 = (r24, l25, a22, p26) => {
  for (var e11 = void 0, i27 = r24.length - 1, c27; i27 >= 0; i27--)
    (c27 = r24[i27]) && (e11 = c27(l25, a22, e11) || e11);
  return e11 && y19(l25, a22, e11), e11;
};
var t14;
var o7 = (t14 = class extends x {
  constructor() {
    super(...arguments), this.value = false, this.falseColor = t14.DEFAULT_FALSE_COLOR, this.trueColor = t14.DEFAULT_TRUE_COLOR, this.label = "";
  }
  updated() {
    const r24 = this.falseColor || t14.DEFAULT_FALSE_COLOR, l25 = this.trueColor || t14.DEFAULT_TRUE_COLOR, a22 = this.renderRoot.querySelector(
      "[part=box]"
    ), p26 = this.value ? l25 : r24;
    a22.style.setProperty("--box-color", p26);
  }
  render() {
    return Ht` <div part="box">${this.label || Ht`&nbsp;`}</div> `;
  }
}, t14.DEFAULT_FALSE_COLOR = "#ff0000", t14.DEFAULT_TRUE_COLOR = "#00ff00", t14.styles = Mt2`
    :host {
      display: inline-block;
      width: 80px;
      height: 80px;
      padding: 5px;
      box-sizing: border-box;
    }

    [part='box'] {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-content: center;
      flex-wrap: wrap;
      background-color: var(--box-color);
      text-align: center;
    }
  `, t14);
n20([
  Rt({ type: Boolean })
], o7.prototype, "value");
n20([
  Rt({ type: String, attribute: "false-color" })
], o7.prototype, "falseColor");
n20([
  Rt({ type: String, attribute: "true-color" })
], o7.prototype, "trueColor");
n20([
  Rt({ type: String })
], o7.prototype, "label");
var d18 = o7;
customElements.get("frc-boolean-box") || customElements.define("frc-boolean-box", d18);
var g19 = xt({
  tagName: "frc-boolean-box",
  elementClass: d18,
  react: import_react7.default
});

// node_modules/@frc-web-components/react/dist/components/Canvas.es.js
var import_react8 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/_commonjsHelpers-DaMA6jEr-bedfce41.js
var l14 = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function t15(o12) {
  return o12 && o12.__esModule && Object.prototype.hasOwnProperty.call(o12, "default") ? o12.default : o12;
}

// node_modules/@frc-web-components/react/dist/index-BXxACewW-cecd5a05.js
function S12(i27, u35) {
  const a22 = [];
  for (let l25 = 0; l25 < i27.length / u35; l25 += 1)
    a22.push(i27.slice(u35 * l25, u35 * (l25 + 1)));
  return a22;
}
function Z8(i27) {
  const u35 = new ArrayBuffer(8), a22 = new DataView(u35);
  return i27.forEach((l25, w29) => {
    a22.setUint8(w29, l25);
  }), a22.getFloat64(0);
}
function tt8(i27) {
  return S12(i27, 8).map(Z8);
}
function it10(i27, u35 = 3) {
  const a22 = i27 instanceof Uint8Array ? tt8(i27) : i27;
  return S12(a22, u35);
}
var E18;
var N10;
function nt9() {
  if (N10)
    return E18;
  N10 = 1;
  var i27 = "Expected a function", u35 = NaN, a22 = "[object Symbol]", l25 = /^\s+|\s+$/g, w29 = /^[-+]0x[0-9a-f]+$/i, U18 = /^0b[01]+$/i, B21 = /^0o[0-7]+$/i, I16 = parseInt, V14 = typeof l14 == "object" && l14 && l14.Object === Object && l14, k27 = typeof self == "object" && self && self.Object === Object && self, q13 = V14 || k27 || Function("return this")(), z19 = Object.prototype, C19 = z19.toString, G15 = Math.max, H15 = Math.min, x34 = function() {
    return q13.Date.now();
  };
  function J11(t19, e11, r24) {
    var f39, c27, d34, p26, o12, v30, y33 = 0, A17 = false, m33 = false, O20 = true;
    if (typeof t19 != "function")
      throw new TypeError(i27);
    e11 = W8(e11) || 0, b33(r24) && (A17 = !!r24.leading, m33 = "maxWait" in r24, d34 = m33 ? G15(W8(r24.maxWait) || 0, e11) : d34, O20 = "trailing" in r24 ? !!r24.trailing : O20);
    function T20(n33) {
      var s18 = f39, g31 = c27;
      return f39 = c27 = void 0, y33 = n33, p26 = t19.apply(g31, s18), p26;
    }
    function Q11(n33) {
      return y33 = n33, o12 = setTimeout(h26, e11), A17 ? T20(n33) : p26;
    }
    function R20(n33) {
      var s18 = n33 - v30, g31 = n33 - y33, M12 = e11 - s18;
      return m33 ? H15(M12, d34 - g31) : M12;
    }
    function D17(n33) {
      var s18 = n33 - v30, g31 = n33 - y33;
      return v30 === void 0 || s18 >= e11 || s18 < 0 || m33 && g31 >= d34;
    }
    function h26() {
      var n33 = x34();
      if (D17(n33))
        return F17(n33);
      o12 = setTimeout(h26, R20(n33));
    }
    function F17(n33) {
      return o12 = void 0, O20 && f39 ? T20(n33) : (f39 = c27 = void 0, p26);
    }
    function X12() {
      o12 !== void 0 && clearTimeout(o12), y33 = 0, f39 = v30 = c27 = o12 = void 0;
    }
    function Y11() {
      return o12 === void 0 ? p26 : F17(x34());
    }
    function $24() {
      var n33 = x34(), s18 = D17(n33);
      if (f39 = arguments, c27 = this, v30 = n33, s18) {
        if (o12 === void 0)
          return Q11(v30);
        if (m33)
          return o12 = setTimeout(h26, e11), T20(v30);
      }
      return o12 === void 0 && (o12 = setTimeout(h26, e11)), p26;
    }
    return $24.cancel = X12, $24.flush = Y11, $24;
  }
  function K13(t19, e11, r24) {
    var f39 = true, c27 = true;
    if (typeof t19 != "function")
      throw new TypeError(i27);
    return b33(r24) && (f39 = "leading" in r24 ? !!r24.leading : f39, c27 = "trailing" in r24 ? !!r24.trailing : c27), J11(t19, e11, {
      leading: f39,
      maxWait: e11,
      trailing: c27
    });
  }
  function b33(t19) {
    var e11 = typeof t19;
    return !!t19 && (e11 == "object" || e11 == "function");
  }
  function L11(t19) {
    return !!t19 && typeof t19 == "object";
  }
  function P19(t19) {
    return typeof t19 == "symbol" || L11(t19) && C19.call(t19) == a22;
  }
  function W8(t19) {
    if (typeof t19 == "number")
      return t19;
    if (P19(t19))
      return u35;
    if (b33(t19)) {
      var e11 = typeof t19.valueOf == "function" ? t19.valueOf() : t19;
      t19 = b33(e11) ? e11 + "" : e11;
    }
    if (typeof t19 != "string")
      return t19 === 0 ? t19 : +t19;
    t19 = t19.replace(l25, "");
    var r24 = U18.test(t19);
    return r24 || B21.test(t19) ? I16(t19.slice(2), r24 ? 2 : 8) : w29.test(t19) ? u35 : +t19;
  }
  return E18 = K13, E18;
}
var et8 = nt9();
var ot9 = t15(et8);

// node_modules/@frc-web-components/react/dist/directive-B76A7YXI-abc0af54.js
var T14 = { ATTRIBUTE: 1, CHILD: 2, PROPERTY: 3, BOOLEAN_ATTRIBUTE: 4, EVENT: 5, ELEMENT: 6 };
var _14 = (r24) => (...t19) => ({ _$litDirective$: r24, values: t19 });
var i15 = class {
  constructor(t19) {
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  _$AT(t19, e11, s18) {
    this._$Ct = t19, this._$AM = e11, this._$Ci = s18;
  }
  _$AS(t19, e11) {
    return this.update(t19, e11);
  }
  update(t19, e11) {
    return this.render(...e11);
  }
};

// node_modules/@frc-web-components/react/dist/directive-helpers-CDfQTKPA-206aa42d.js
var s12 = (t19) => t19.strings === void 0;
var r18 = {};
var n21 = (t19, o12 = r18) => t19._$AH = o12;

// node_modules/@frc-web-components/react/dist/components/Canvas.es.js
var Y8;
function at7(s18) {
  return (t19, r24) => i2(t19, r24, { get() {
    return (this.renderRoot ?? Y8 ?? (Y8 = document.createDocumentFragment())).querySelectorAll(s18);
  } });
}
var nt10 = Object.defineProperty;
var A13 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o12 = s18.length - 1, n33; o12 >= 0; o12--)
    (n33 = s18[o12]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && nt10(t19, r24, e11), e11;
};
var C14 = class extends x {
  constructor() {
    super(...arguments), this.points = [], this.opacity = 1, this.color = null, this.lineWidth = 2, this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["left", "top"], this.zIndex = 0, this._points = [];
  }
  updated(t19) {
    t19.has("points") && (this._points = it10(this.points, 2));
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), t19.lineWidth = this.lineWidth ?? 2, t19.strokeStyle = this.color ?? "gray";
    const [r24, a22, e11] = this.transform ?? [
      0,
      0,
      0
    ];
    t19.translate(r24, a22);
    const [o12, n33] = this.transformOrigin ?? [0, 0], l25 = o12, h26 = n33;
    if (t19.translate(l25, h26), t19.rotate(-(e11 * Math.PI) / 180), t19.translate(-l25, -h26), this._points.length > 1) {
      for (let c27 = 0; c27 < this._points.length - 1; c27 += 1) {
        const [v30, d34] = this._points[c27], [p26, P19] = this._points[c27 + 1];
        t19.moveTo(v30, d34), t19.lineTo(p26, P19);
      }
      t19.stroke();
    }
  }
};
A13([
  Rt({ type: Array })
], C14.prototype, "points");
A13([
  Rt({ type: Number })
], C14.prototype, "opacity");
A13([
  Rt({ type: String })
], C14.prototype, "color");
A13([
  Rt({ type: Number, attribute: "line-width" })
], C14.prototype, "lineWidth");
A13([
  Rt({ type: Array })
], C14.prototype, "transform");
A13([
  Rt({ type: Array, attribute: "transform-origin" })
], C14.prototype, "transformOrigin");
A13([
  Rt({ type: Array, attribute: "draw-origin" })
], C14.prototype, "drawOrigin");
A13([
  Rt({ type: Array, attribute: "z-index" })
], C14.prototype, "zIndex");
A13([
  n2()
], C14.prototype, "_points");
customElements.get("frc-canvas-line") || customElements.define("frc-canvas-line", C14);
var ht9 = Object.defineProperty;
var w17 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o12 = s18.length - 1, n33; o12 >= 0; o12--)
    (n33 = s18[o12]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && ht9(t19, r24, e11), e11;
};
var m23 = class extends x {
  constructor() {
    super(...arguments), this.origin = [0, 0], this.width = 10, this.height = 10, this.radii = 0, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor, t19.lineWidth = this.strokeWidth);
    let [r24, a22] = this.origin;
    const [e11, o12] = this.drawOrigin ?? ["center", "center"];
    e11 === "center" ? r24 -= this.width / 2 : e11 === "right" && (r24 -= this.width), o12 === "center" ? a22 -= this.height / 2 : o12 === "bottom" && (a22 -= this.height);
    const [n33, l25, h26] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += n33, a22 += l25, t19.translate(r24, a22);
    const [c27, v30] = this.transformOrigin ?? [0, 0], d34 = c27 + this.width / 2, p26 = v30 + this.height / 2;
    t19.translate(d34, p26), t19.rotate(-(h26 * Math.PI) / 180), t19.translate(-d34, -p26), t19.roundRect(0, 0, this.width, this.height, this.radii), this.fillColor && t19.fill(), this.strokeColor && t19.stroke();
  }
};
w17([
  Rt({ type: Array })
], m23.prototype, "origin");
w17([
  Rt({ type: Number })
], m23.prototype, "width");
w17([
  Rt({ type: Number })
], m23.prototype, "height");
w17([
  Rt({ type: Number })
], m23.prototype, "radii");
w17([
  Rt({ type: Number })
], m23.prototype, "opacity");
w17([
  Rt({ type: String, attribute: "stroke-color" })
], m23.prototype, "strokeColor");
w17([
  Rt({ type: Number, attribute: "stroke-width" })
], m23.prototype, "strokeWidth");
w17([
  Rt({ type: String, attribute: "fill-color" })
], m23.prototype, "fillColor");
w17([
  Rt({ type: Array })
], m23.prototype, "transform");
w17([
  Rt({ type: Array, attribute: "transform-origin" })
], m23.prototype, "transformOrigin");
w17([
  Rt({ type: Array, attribute: "draw-origin" })
], m23.prototype, "drawOrigin");
w17([
  Rt({ type: Array, attribute: "z-index" })
], m23.prototype, "zIndex");
customElements.get("frc-canvas-rect") || customElements.define("frc-canvas-rect", m23);
var ct8 = Object.defineProperty;
var b22 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o12 = s18.length - 1, n33; o12 >= 0; o12--)
    (n33 = s18[o12]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && ct8(t19, r24, e11), e11;
};
var y20 = class extends x {
  constructor() {
    super(...arguments), this.origin = [0, 0], this.radius = 10, this.startAngle = 0, this.endAngle = 360, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor, t19.lineWidth = this.strokeWidth);
    let [r24, a22] = this.origin;
    const [e11, o12] = this.drawOrigin ?? ["center", "center"];
    e11 === "left" ? r24 += this.radius : e11 === "right" && (r24 -= this.radius), o12 === "top" ? a22 += this.radius : o12 === "bottom" && (a22 -= this.radius);
    const [n33, l25, h26] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += n33, a22 += l25, t19.translate(r24, a22);
    const [c27, v30] = this.transformOrigin ?? [0, 0], d34 = c27, p26 = v30;
    t19.translate(d34, p26), t19.rotate(-(h26 * Math.PI) / 180), t19.translate(-d34, -p26), t19.beginPath(), t19.arc(
      0,
      0,
      this.radius,
      -(this.startAngle ?? 0) * Math.PI / 180,
      -(this.endAngle ?? 360) * Math.PI / 180,
      true
    ), this.fillColor && t19.fill(), this.strokeColor && t19.stroke();
  }
};
b22([
  Rt({ type: Array })
], y20.prototype, "origin");
b22([
  Rt({ type: Number })
], y20.prototype, "radius");
b22([
  Rt({ type: Number, attribute: "start-angle" })
], y20.prototype, "startAngle");
b22([
  Rt({ type: Number, attribute: "end-angle" })
], y20.prototype, "endAngle");
b22([
  Rt({ type: Number })
], y20.prototype, "opacity");
b22([
  Rt({ type: String, attribute: "stroke-color" })
], y20.prototype, "strokeColor");
b22([
  Rt({ type: Number, attribute: "stroke-width" })
], y20.prototype, "strokeWidth");
b22([
  Rt({ type: String, attribute: "fill-color" })
], y20.prototype, "fillColor");
b22([
  Rt({ type: Array })
], y20.prototype, "transform");
b22([
  Rt({ type: Array, attribute: "transform-origin" })
], y20.prototype, "transformOrigin");
b22([
  Rt({ type: Array, attribute: "draw-origin" })
], y20.prototype, "drawOrigin");
b22([
  Rt({ type: Array, attribute: "z-index" })
], y20.prototype, "zIndex");
customElements.get("frc-canvas-circle") || customElements.define("frc-canvas-circle", y20);
var lt9 = Object.defineProperty;
var x19 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o12 = s18.length - 1, n33; o12 >= 0; o12--)
    (n33 = s18[o12]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && lt9(t19, r24, e11), e11;
};
var u21 = class extends x {
  constructor() {
    super(...arguments), this.origin = [0, 0], this.sides = 5, this.radius = 10, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor, t19.lineWidth = this.strokeWidth);
    let [r24, a22] = this.origin;
    const [e11, o12] = this.drawOrigin ?? ["center", "center"];
    e11 === "left" ? r24 += this.radius : e11 === "right" && (r24 -= this.radius), o12 === "top" ? a22 += this.radius : o12 === "bottom" && (a22 -= this.radius);
    const [n33, l25, h26] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += n33, a22 += l25, t19.translate(r24, a22);
    const [c27, v30] = this.transformOrigin ?? [0, 0], d34 = c27, p26 = v30;
    if (t19.translate(d34, p26), t19.rotate(-(h26 * Math.PI) / 180), t19.translate(-d34, -p26), this.sides < 3)
      return;
    const P19 = Math.PI * 2 / this.sides;
    t19.beginPath();
    for (let T20 = 0; T20 < this.sides; T20 += 1) {
      const _19 = T20 * P19, W8 = this.radius * Math.cos(_19), q13 = this.radius * Math.sin(_19);
      T20 === 0 ? t19.moveTo(W8, q13) : t19.lineTo(W8, q13);
    }
    t19.closePath(), this.fillColor && t19.fill(), this.strokeColor && t19.stroke();
  }
};
x19([
  Rt({ type: Array })
], u21.prototype, "origin");
x19([
  Rt({ type: Number })
], u21.prototype, "sides");
x19([
  Rt({ type: Number })
], u21.prototype, "radius");
x19([
  Rt({ type: Number })
], u21.prototype, "opacity");
x19([
  Rt({ type: String, attribute: "stroke-color" })
], u21.prototype, "strokeColor");
x19([
  Rt({ type: Number, attribute: "stroke-width" })
], u21.prototype, "strokeWidth");
x19([
  Rt({ type: String, attribute: "fill-color" })
], u21.prototype, "fillColor");
x19([
  Rt({ type: Array })
], u21.prototype, "transform");
x19([
  Rt({ type: Array, attribute: "transform-origin" })
], u21.prototype, "transformOrigin");
x19([
  Rt({ type: Array, attribute: "draw-origin" })
], u21.prototype, "drawOrigin");
x19([
  Rt({ type: Array, attribute: "z-index" })
], u21.prototype, "zIndex");
customElements.get("frc-canvas-ngon") || customElements.define("frc-canvas-ngon", u21);
var dt10 = Object.defineProperty;
var F11 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o12 = s18.length - 1, n33; o12 >= 0; o12--)
    (n33 = s18[o12]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && dt10(t19, r24, e11), e11;
};
var $14 = class extends x {
  constructor() {
    super(...arguments), this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.zIndex = 0;
  }
  draw(t19) {
    const { ctx: r24 } = t19, [a22, e11, o12] = this.transform ?? [
      0,
      0,
      0
    ];
    r24.translate(a22, e11);
    const [n33, l25] = this.transformOrigin ?? [0, 0], h26 = n33, c27 = l25;
    r24.translate(h26, c27), r24.rotate(-(o12 * Math.PI) / 180), r24.translate(-h26, -c27), [...this.children].forEach((v30) => {
      var d34;
      r24.save(), r24.beginPath();
      const p26 = v30;
      (d34 = p26.draw) == null || d34.call(p26, t19), r24.restore();
    });
  }
};
F11([
  Rt({ type: Array })
], $14.prototype, "transform");
F11([
  Rt({ type: Array, attribute: "transform-origin" })
], $14.prototype, "transformOrigin");
F11([
  Rt({ type: Array, attribute: "z-index" })
], $14.prototype, "zIndex");
customElements.get("frc-canvas-group") || customElements.define("frc-canvas-group", $14);
var pt8 = Object.defineProperty;
var f23 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o12 = s18.length - 1, n33; o12 >= 0; o12--)
    (n33 = s18[o12]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && pt8(t19, r24, e11), e11;
};
var g20 = class extends x {
  constructor() {
    super(...arguments), this.text = "", this.origin = [0, 0], this.maxWidth = null, this.fontName = "sans-serif", this.fontSize = 12, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity ?? 1)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor), t19.textAlign = "center", t19.textBaseline = "middle", t19.font = `${this.fontSize ?? 12}px ${this.fontName || "sans-serif"}`;
    let [r24, a22] = this.origin ?? [0, 0];
    const { width: e11, actualBoundingBoxAscent: o12, actualBoundingBoxDescent: n33 } = t19.measureText(this.text ?? ""), l25 = o12 + n33, [h26, c27] = this.drawOrigin ?? ["center", "center"];
    h26 === "left" ? r24 += e11 / 2 : h26 === "right" && (r24 -= e11 / 2), c27 === "top" ? a22 += l25 / 2 : c27 === "bottom" && (a22 -= l25 / 2);
    const [v30, d34, p26] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += v30, a22 += d34, t19.translate(r24, a22);
    const [P19, T20] = this.transformOrigin ?? [0, 0], _19 = P19, W8 = T20;
    t19.translate(_19, W8), t19.rotate(-(p26 * Math.PI) / 180), t19.translate(-_19, -W8), this.fillColor && t19.fillText(this.text ?? "", 0, 0), this.strokeColor && (t19.lineWidth = this.strokeWidth ?? 2, t19.strokeText(this.text ?? "", 0, 0));
  }
};
f23([
  Rt({ type: String })
], g20.prototype, "text");
f23([
  Rt({ type: Array })
], g20.prototype, "origin");
f23([
  Rt({ type: Number, attribute: "max-width" })
], g20.prototype, "maxWidth");
f23([
  Rt({ type: String, attribute: "font-name" })
], g20.prototype, "fontName");
f23([
  Rt({ type: Number, attribute: "font-size" })
], g20.prototype, "fontSize");
f23([
  Rt({ type: Number })
], g20.prototype, "opacity");
f23([
  Rt({ type: String, attribute: "stroke-color" })
], g20.prototype, "strokeColor");
f23([
  Rt({ type: Number, attribute: "stroke-width" })
], g20.prototype, "strokeWidth");
f23([
  Rt({ type: String, attribute: "fill-color" })
], g20.prototype, "fillColor");
f23([
  Rt({ type: Array })
], g20.prototype, "transform");
f23([
  Rt({ type: Array, attribute: "transform-origin" })
], g20.prototype, "transformOrigin");
f23([
  Rt({ type: Array, attribute: "draw-origin" })
], g20.prototype, "drawOrigin");
f23([
  Rt({ type: Array, attribute: "z-index" })
], g20.prototype, "zIndex");
customElements.get("frc-canvas-text") || customElements.define("frc-canvas-text", g20);
var gt9 = _14(class extends i15 {
  constructor() {
    super(...arguments), this.key = p;
  }
  render(s18, t19) {
    return this.key = s18, t19;
  }
  update(s18, [t19, r24]) {
    return t19 !== this.key && (n21(s18), this.key = t19), r24;
  }
});
var D12 = (s18) => s18 ?? p;
var mt9 = Object.defineProperty;
var z14 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o12 = s18.length - 1, n33; o12 >= 0; o12--)
    (n33 = s18[o12]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && mt9(t19, r24, e11), e11;
};
var K9 = class extends x {
  constructor() {
    super(...arguments), this.src = "", this.width = null, this.height = null, this.origin = [0, 0], this.disabled = false, this.hideCrosshair = false, this.crosshairColor = "white", this.image = new Image(), this.connected = false, this.throttleUpdateImage = ot9(() => this.updateImage(), 5e3), this.onImageLoadBound = this.onImageLoad.bind(this), this.onImageErrorBound = this.onImageError.bind(this);
  }
  getImageSize(t19) {
    const r24 = {
      width: this.width || t19.width,
      height: this.height || t19.height
    };
    return this.image.height / this.image.width * r24.width > r24.height ? {
      height: r24.height,
      width: this.image.width / this.image.height * r24.height
    } : {
      height: this.image.height / this.image.width * r24.width,
      width: r24.width
    };
  }
  draw({ ctx: t19, canvas: r24 }) {
    const { width: a22, height: e11 } = this.getImageSize(r24), o12 = {
      width: this.width || r24.width,
      height: this.height || r24.height
    }, [n33, l25] = this.origin ?? [0, 0];
    if (t19.translate(n33, l25), !!this.connected)
      try {
        const h26 = (o12.width - a22) / 2, c27 = (o12.height - e11) / 2;
        t19.drawImage(this.image, h26, c27, a22, e11), this.hideCrosshair || (t19.strokeStyle = this.crosshairColor || "white", t19.lineWidth = 1, t19.beginPath(), t19.setLineDash([7, 7]), t19.moveTo(h26, c27 + e11 / 2), t19.lineTo(h26 + a22, c27 + e11 / 2), t19.stroke(), t19.beginPath(), t19.setLineDash([5, 5]), t19.moveTo(h26 + a22 / 2, c27), t19.lineTo(h26 + a22 / 2, c27 + e11), t19.stroke());
      } catch {
        this.throttleUpdateImage();
      }
  }
  disconnectedCallback() {
    super.disconnectedCallback(), clearTimeout(this.loadedTimeout), this.image.src = "";
  }
  connectedCallback() {
    super.connectedCallback(), this.throttleUpdateImage();
  }
  isImageLoaded() {
    return this.image.complete && this.image.naturalHeight !== 0;
  }
  updateImage() {
    if (clearTimeout(this.loadedTimeout), !this.disabled) {
      if (!this.isConnected) {
        this.setConnected(false);
        return;
      }
      this.isImageLoaded() || (this.loadedTimeout = setTimeout(() => {
        this.throttleUpdateImage();
      }, 5e3), this.image.removeEventListener("load", this.onImageLoadBound), this.image.removeEventListener("error", this.onImageErrorBound), this.image.src = "", this.image = new Image(), this.setConnected(false), this.image.src = this.src ?? "", this.image.addEventListener("load", this.onImageLoadBound), this.image.addEventListener("error", this.onImageErrorBound));
    }
  }
  setConnected(t19) {
    this.connected && !t19 ? (this.connected = false, this.dispatchDisconnect()) : !this.connected && t19 && (this.connected = true, this.dispatchConnect());
  }
  onImageLoad() {
    this.setConnected(true), clearTimeout(this.loadedTimeout);
  }
  onImageError() {
    this.throttleUpdateImage();
  }
  dispatchConnect() {
    this.dispatchEvent(
      new CustomEvent("connect", {
        bubbles: true,
        composed: true
      })
    );
  }
  dispatchDisconnect() {
    this.dispatchEvent(
      new CustomEvent("disconnect", {
        bubbles: true,
        composed: true
      })
    );
  }
  updated(t19) {
    t19.has("src") && this.throttleUpdateImage(), t19.has("disabled") && (this.disabled ? (clearTimeout(this.loadedTimeout), this.image.src = "") : this.throttleUpdateImage());
  }
};
K9.styles = Mt2`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    canvas {
      width: 100%;
      height: 100%;
    }
  `;
var N11 = K9;
z14([
  Rt({ type: String })
], N11.prototype, "src");
z14([
  Rt({ type: Number })
], N11.prototype, "width");
z14([
  Rt({ type: Number })
], N11.prototype, "height");
z14([
  Rt({ type: Array })
], N11.prototype, "origin");
z14([
  Rt({ type: Boolean })
], N11.prototype, "disabled");
z14([
  Rt({ type: Boolean, attribute: "hide-crosshair" })
], N11.prototype, "hideCrosshair");
z14([
  Rt({ type: String, attribute: "crosshair-color" })
], N11.prototype, "crosshairColor");
customElements.get("frc-canvas-mjpg-stream-instance") || customElements.define(
  "frc-canvas-mjpg-stream-instance",
  N11
);
var yt10 = Object.defineProperty;
var S13 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o12 = s18.length - 1, n33; o12 >= 0; o12--)
    (n33 = s18[o12]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && yt10(t19, r24, e11), e11;
};
var U14;
var I11 = (U14 = class extends x {
  constructor() {
    super(...arguments), this.srcs = [], this.width = null, this.height = null, this.origin = [0, 0], this.waitImage = U14.DEFAULT_WAIT_IMAGE, this.hideCrosshair = false, this.crosshairColor = "white", this.waitImageElement = new Image();
  }
  getImageSize(s18) {
    const t19 = {
      width: this.width || s18.width,
      height: this.height || s18.height
    };
    return this.waitImageElement.height / this.waitImageElement.width * t19.width > t19.height ? {
      height: t19.height,
      width: this.waitImageElement.width / this.waitImageElement.height * t19.height
    } : {
      height: this.waitImageElement.height / this.waitImageElement.width * t19.width,
      width: t19.width
    };
  }
  draw(s18) {
    const { canvas: t19, ctx: r24 } = s18, a22 = [...this.streamInstances].find(
      (e11) => e11.src === this._connectedSrc
    );
    if (a22)
      a22.draw(s18);
    else {
      const { width: e11, height: o12 } = this.getImageSize(t19), n33 = {
        width: this.width || t19.width,
        height: this.height || t19.height
      }, [l25, h26] = this.origin ?? [0, 0];
      r24.translate(l25, h26);
      try {
        r24.drawImage(
          this.waitImageElement,
          (n33.width - e11) / 2,
          (n33.height - o12) / 2,
          e11,
          o12
        );
      } catch {
      }
    }
  }
  updated(s18) {
    s18.has("srcs") && this._connectedSrc && !this.srcs.includes(this._connectedSrc) && (this._connectedSrc = void 0), s18.has("waitImage") && (this.waitImageElement.src = this.waitImage);
  }
  onConnect(s18) {
    this._connectedSrc || (this._connectedSrc = s18);
  }
  onDisconnect(s18) {
    this._connectedSrc === s18 && (this._connectedSrc = void 0);
  }
  renderStreamInstance(s18) {
    return Ht`
      ${gt9(
      s18,
      Ht`
          <frc-canvas-mjpg-stream-instance
            @connect=${() => this.onConnect(s18)}
            @disconnect=${() => this.onDisconnect(s18)}
            src=${s18}
            width=${D12(this.width !== null ? this.width : void 0)}
            height=${D12(this.height !== null ? this.height : void 0)}
            .origin=${D12(this.origin !== null ? this.origin : void 0)}
            ?disabled=${this._connectedSrc && this._connectedSrc !== s18}
            ?hide-crosshair=${this.hideCrosshair}
            crosshair-color=${this.crosshairColor}
          ></frc-canvas-mjpg-stream-instance>
        `
    )}
    `;
  }
  render() {
    return Ht`
      ${this.srcs.map(
      (s18) => this.renderStreamInstance(s18.replace("mjpg:", ""))
    )}
    `;
  }
}, U14.DEFAULT_WAIT_IMAGE = "./no-camera-stream.jpg", U14);
S13([
  Rt({ type: Array })
], I11.prototype, "srcs");
S13([
  Rt({ type: Number })
], I11.prototype, "width");
S13([
  Rt({ type: Number })
], I11.prototype, "height");
S13([
  Rt({ type: Array })
], I11.prototype, "origin");
S13([
  Rt({ type: String, attribute: "wait-image" })
], I11.prototype, "waitImage");
S13([
  Rt({ type: Boolean, attribute: "hide-crosshair" })
], I11.prototype, "hideCrosshair");
S13([
  Rt({ type: String, attribute: "crosshair-color" })
], I11.prototype, "crosshairColor");
S13([
  n2()
], I11.prototype, "_connectedSrc");
S13([
  at7("frc-canvas-mjpg-stream-instance")
], I11.prototype, "streamInstances");
var G10 = I11;
customElements.get("frc-canvas-mjpg-stream") || customElements.define("frc-canvas-mjpg-stream", G10);
var ut8 = Object.defineProperty;
var H12 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o12 = s18.length - 1, n33; o12 >= 0; o12--)
    (n33 = s18[o12]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && ut8(t19, r24, e11), e11;
};
var Q8 = class extends x {
  constructor() {
    super(...arguments), this.width = null, this.backgroundColor = "black";
  }
  getCanvasCtx() {
    return this.canvas.getContext("2d");
  }
  drawChildren() {
    const t19 = {
      canvas: this.canvas,
      ctx: this.getCanvasCtx(),
      domRect: this.getBoundingClientRect()
    };
    [...this.children].forEach((r24) => {
      var a22;
      const e11 = this.getCanvasCtx();
      e11.save(), e11.beginPath();
      const o12 = r24;
      (a22 = o12.draw) == null || a22.call(o12, t19), e11.restore();
    });
  }
  drawBackground() {
    const t19 = this.getCanvasCtx();
    t19.save(), t19.fillStyle = this.backgroundColor, t19.fillRect(0, 0, this.canvas.width, this.canvas.height), t19.restore();
  }
  drawCanvas() {
    this.drawBackground(), this.drawChildren(), window.requestAnimationFrame(() => {
      this.drawCanvas();
    });
  }
  firstUpdated() {
    this.drawCanvas(), new ResizeObserver(() => this.resized()).observe(this), this.resized();
  }
  resized() {
    const t19 = this.getBoundingClientRect(), { width: r24, height: a22 } = t19;
    typeof this.width != "number" ? (this.canvas.width = r24, this.canvas.height = a22) : (this.canvas.width = this.width, this.canvas.height = this.width * a22 / r24);
  }
  render() {
    return Ht` <canvas></canvas> `;
  }
};
Q8.styles = Mt2`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    canvas {
      width: 100%;
      height: 100%;
    }

    [part='box'] {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-content: center;
      flex-wrap: wrap;
      background-color: var(--box-color);
      text-align: center;
    }
  `;
var B13 = Q8;
H12([
  a("canvas")
], B13.prototype, "canvas");
H12([
  Rt({ type: Number })
], B13.prototype, "width");
H12([
  Rt({ type: String, attribute: "background-color" })
], B13.prototype, "backgroundColor");
customElements.get("frc-canvas") || customElements.define("frc-canvas", B13);
var ft10 = Object.defineProperty;
var L7 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o12 = s18.length - 1, n33; o12 >= 0; o12--)
    (n33 = s18[o12]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && ft10(t19, r24, e11), e11;
};
var V10 = class extends x {
  constructor() {
    super(...arguments), this.streams = [], this.backgroundColor = "black", this.waitImage = G10.DEFAULT_WAIT_IMAGE, this.hideCrosshair = false, this.crosshairColor = "white";
  }
  render() {
    return Ht`
      <frc-canvas background-color=${this.backgroundColor}>
        <frc-canvas-mjpg-stream
          wait-image=${this.waitImage}
          crosshair-color=${this.crosshairColor}
          ?hide-crosshair=${this.hideCrosshair}
          .srcs=${this.streams}
        ></frc-canvas-mjpg-stream>
      </frc-canvas>
    `;
  }
};
V10.styles = Mt2`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    frc-canvas {
      width: 100%;
      height: 100%;
    }
  `;
var M7 = V10;
L7([
  Rt({ type: Array })
], M7.prototype, "streams");
L7([
  Rt({ type: String, attribute: "background-color" })
], M7.prototype, "backgroundColor");
L7([
  Rt({ type: String, attribute: "wait-image" })
], M7.prototype, "waitImage");
L7([
  Rt({ type: Boolean, attribute: "hide-crosshair" })
], M7.prototype, "hideCrosshair");
L7([
  Rt({ type: String, attribute: "crosshair-color" })
], M7.prototype, "crosshairColor");
customElements.get("frc-camera-wrapper") || customElements.define("frc-camera-wrapper", M7);
var Nt7 = xt({
  tagName: "frc-canvas",
  elementClass: B13,
  react: import_react8.default
});
var zt5 = xt({
  tagName: "frc-canvas-circle",
  elementClass: y20,
  react: import_react8.default
});
var Tt7 = xt({
  tagName: "frc-canvas-group",
  elementClass: $14,
  react: import_react8.default
});
var Mt8 = xt({
  tagName: "frc-canvas-line",
  elementClass: C14,
  react: import_react8.default
});
var Pt6 = xt({
  tagName: "frc-canvas-mjpg-stream",
  elementClass: G10,
  react: import_react8.default
});
var _t6 = xt({
  tagName: "frc-canvas-ngon",
  elementClass: u21,
  react: import_react8.default
});
var Wt6 = xt({
  tagName: "frc-canvas-rect",
  elementClass: m23,
  react: import_react8.default
});
var jt7 = xt({
  tagName: "frc-canvas-text",
  elementClass: g20,
  react: import_react8.default
});

// node_modules/@frc-web-components/react/dist/components/CommandBased.es.js
var import_react9 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/toggle-button.es-37c936c3.js
var h17 = Object.defineProperty;
var i16 = (o12, n33, s18, u35) => {
  for (var t19 = void 0, r24 = o12.length - 1, g31; r24 >= 0; r24--)
    (g31 = o12[r24]) && (t19 = g31(n33, s18, t19) || t19);
  return t19 && h17(n33, s18, t19), t19;
};
var d19 = class extends x {
  constructor() {
    super(...arguments), this.toggled = false, this.disabled = false, this.label = "Button";
  }
  onClick() {
    this.disabled || (this.toggled = !this.toggled, this.dispatchEvent(
      new CustomEvent("toggle", {
        detail: {
          toggled: this.toggled
        },
        bubbles: true,
        composed: true
      })
    ));
  }
  render() {
    return Ht`
      <button class="${this.toggled ? "toggled" : ""}" @click="${this.onClick}">
        ${this.label}
      </button>
    `;
  }
};
d19.styles = Mt2`
    :host {
      display: inline-block;
      width: 100px;
      height: 50px;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    button {
      width: 100%;
      height: 100%;
      margin: 0;
      border: none;
      border-radius: 4px;
      font-size: inherit;
      font-family: inherit;
      letter-spacing: inherit;
      background: var(--frc-button-background-color, rgb(230, 230, 230));
      color: var(--frc-button-text-color, black);
    }

    .toggled {
      background: var(--frc-button-toggled-background-color, black);
      color: var(--frc-button-toggled-text-color, white);
      font-weight: bold;
    }
  `;
var e7 = d19;
i16([
  Rt({ type: Boolean })
], e7.prototype, "toggled");
i16([
  Rt({ type: Boolean })
], e7.prototype, "disabled");
i16([
  Rt({ type: String })
], e7.prototype, "label");
customElements.get("frc-toggle-button") || customElements.define("frc-toggle-button", e7);

// node_modules/@frc-web-components/react/dist/components/CommandBased.es.js
var y21 = (t19) => {
  throw TypeError(t19);
};
var $15 = (t19, e11, a22) => e11.has(t19) || y21("Cannot " + a22);
var w18 = (t19, e11, a22) => e11.has(t19) ? y21("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(t19) : e11.set(t19, a22);
var E20 = (t19, e11, a22) => ($15(t19, e11, "access private method"), a22);
var B14 = Object.defineProperty;
var h18 = (t19, e11, a22, S21) => {
  for (var o12 = void 0, s18 = t19.length - 1, m33; s18 >= 0; s18--)
    (m33 = t19[s18]) && (o12 = m33(e11, a22, o12) || o12);
  return o12 && B14(e11, a22, o12), o12;
};
var d20;
var v21;
var x20 = class extends x {
  constructor() {
    super(...arguments), w18(this, d20), this.name = "Command", this.running = false, this.controllable = false, this.label = "";
  }
  render() {
    return Ht`
      <frc-toggle-button
        ?disabled="${!this.controllable}"
        ?toggled="${this.running}"
        label=${this.label || this.name}
        @toggle="${E20(this, d20, v21)}"
      >
      </frc-toggle-button>
    `;
  }
};
d20 = /* @__PURE__ */ new WeakSet(), v21 = function(t19) {
  t19.stopPropagation(), this.running = !this.running, this.dispatchEvent(
    new CustomEvent("toggle", {
      detail: {
        running: this.running
      },
      bubbles: true,
      composed: true
    })
  );
}, x20.styles = Mt2`
    :host {
      display: inline-block;
      width: 100px;
      height: 50px;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    frc-toggle-button {
      width: 100%;
      height: 100%;
    }
  `;
var l15 = x20;
h18([
  Rt({ type: String })
], l15.prototype, "name");
h18([
  Rt({ type: Boolean })
], l15.prototype, "running");
h18([
  Rt({ type: Boolean })
], l15.prototype, "controllable");
h18([
  Rt({ type: String })
], l15.prototype, "label");
customElements.get("frc-robot-command") || customElements.define("frc-robot-command", l15);
var N12 = Object.defineProperty;
var i17 = (t19, e11, a22, S21) => {
  for (var o12 = void 0, s18 = t19.length - 1, m33; s18 >= 0; s18--)
    (m33 = t19[s18]) && (o12 = m33(e11, a22, o12) || o12);
  return o12 && N12(e11, a22, o12), o12;
};
var p18;
var n22 = (p18 = class extends x {
  constructor() {
    super(...arguments), this.default = "", this.command = "", this.hasCommand = false, this.hasDefault = false, this.label = "", this.name = "", this.hideName = false;
  }
  static renderValue(t19, e11) {
    return e11 ? Ht`<span class="has-value">${t19}</span>` : Ht`<span class="no-value">None</span>`;
  }
  render() {
    return Ht`
      ${this.hideName ? "" : Ht` <header>${this.label || this.name}</header> `}
      <div class="subsystem">
        <p>
          Default command:
          ${p18.renderValue(this.default, this.hasDefault)}
        </p>
        <p>
          Current command:
          ${p18.renderValue(this.command, this.hasCommand)}
        </p>
      </div>
    `;
  }
}, p18.styles = Mt2`
    :host {
      display: inline-block;
      font-family: sans-serif;
      font-size: 16px;
      padding: 5px;
      color: var(--frc-label-text-color, black);
    }

    .subsystem {
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
    }

    p {
      margin: 0;
      margin-right: 10px;
      margin-top: 5px;
    }

    header {
      font-weight: bold;
      margin-bottom: 2px;
      color: var(--frc-robot-subsystem-header-color, purple);
    }

    .has-value {
      color: green;
    }

    .no-value {
      color: red;
    }
  `, p18);
i17([
  Rt({ type: String })
], n22.prototype, "default");
i17([
  Rt({ type: String })
], n22.prototype, "command");
i17([
  Rt({ type: Boolean, attribute: "has-command" })
], n22.prototype, "hasCommand");
i17([
  Rt({ type: Boolean, attribute: "has-default" })
], n22.prototype, "hasDefault");
i17([
  Rt({ type: String })
], n22.prototype, "label");
i17([
  Rt({ type: String })
], n22.prototype, "name");
i17([
  Rt({ type: Boolean, attribute: "hide-name" })
], n22.prototype, "hideName");
var C15 = n22;
customElements.get("frc-robot-subsystem") || customElements.define("frc-robot-subsystem", C15);
var R13 = xt({
  tagName: "frc-robot-command",
  elementClass: l15,
  react: import_react9.default,
  events: {
    ontoggle: "toggle"
  }
});
var V11 = xt({
  tagName: "frc-robot-subsystem",
  elementClass: C15,
  react: import_react9.default
});

// node_modules/@frc-web-components/react/dist/components/Drivebases.es.js
var import_react10 = __toESM(require_react(), 1);
function I12(o12) {
  return o12 * 180 / Math.PI;
}
function et9(o12, t19, e11, i27) {
  return `<line x1="${o12}" y1="${t19}" x2="${e11}" y2="${i27}" />`;
}
function _15(o12, t19, e11) {
  return `<polygon 
            points="${o12.x},${o12.y} ${t19.x},${t19.y} ${e11.x},${e11.y}" />`;
}
function j11(o12, t19, e11, i27) {
  const r24 = i27 * Math.PI / 180;
  return {
    x: o12 + e11 * Math.cos(r24),
    y: t19 - e11 * Math.sin(r24)
  };
}
function rt8(o12, t19, e11, i27, r24) {
  const s18 = j11(o12, t19, e11, r24), n33 = j11(o12, t19, e11, i27), d34 = r24 - i27 <= 180 ? "0" : "1", a22 = r24 > i27 ? 1 : 0;
  return [
    "M",
    s18.x,
    s18.y,
    "A",
    e11,
    e11,
    0,
    d34,
    a22,
    n33.x,
    n33.y
  ].join(" ");
}
function it11(o12, t19, e11, i27, r24) {
  return `<path d="${rt8(o12, t19, e11, i27, r24)}"/>`;
}
function ot10(o12, t19, e11, i27) {
  const r24 = t19 / 2, s18 = Math.cos(o12), n33 = Math.sin(o12), d34 = Math.cos(o12 + Math.PI / 2) * r24, a22 = Math.sin(o12 + Math.PI / 2) * r24, c27 = {
    x: s18 * i27 - d34 + e11,
    y: n33 * i27 - a22
  }, h26 = {
    x: s18 * i27 + d34 + e11,
    y: n33 * i27 + a22
  }, l25 = {
    x: s18 * (t19 + i27) + e11,
    y: n33 * (t19 + i27)
  };
  return _15(c27, h26, l25);
}
function D13(o12, t19, e11, i27) {
  const r24 = Math.cos(t19) * o12, s18 = Math.sin(t19) * o12, n33 = et9(e11, 0, r24 + e11, s18), d34 = ot10(t19, i27, e11, o12);
  return n33 + d34;
}
function st9(o12, t19, e11, i27) {
  const r24 = e11 / t19, s18 = I12(r24);
  return it11(
    i27,
    0,
    t19,
    I12(o12),
    I12(o12) - s18
  );
}
function nt11(o12, t19, e11, i27, r24) {
  const s18 = t19 / 2, n33 = r24 / e11 - o12, d34 = Math.sqrt(t19 * t19 + e11 * e11), a22 = (r24 + t19 * Math.sign(r24)) / e11 - o12, c27 = Math.cos(n33), h26 = Math.sin(n33), l25 = {
    x: (e11 + s18) * c27 + i27,
    y: (e11 + s18) * h26
  }, y33 = {
    x: (e11 - s18) * c27 + i27,
    y: (e11 - s18) * h26
  }, v30 = {
    x: d34 * Math.cos(a22) + i27,
    y: d34 * Math.sin(a22)
  };
  return _15(l25, v30, y33);
}
function G11(o12, t19, e11, i27, r24) {
  if (t19 < 0)
    throw new Error(`Radius cannot be negative. Given: ${t19}`);
  return t19 === 1 / 0 ? D13(e11, o12, i27, r24) : st9(o12, t19, e11, i27) + nt11(o12, r24, t19, i27, e11);
}
function F12(o12, t19, e11, i27, r24) {
  return G11(o12, t19, t19 * e11, i27, r24);
}
var at8 = Object.defineProperty;
var W6 = (o12, t19, e11, i27) => {
  for (var r24 = void 0, s18 = o12.length - 1, n33; s18 >= 0; s18--)
    (n33 = o12[s18]) && (r24 = n33(t19, e11, r24) || r24);
  return r24 && at8(t19, e11, r24), r24;
};
function P12(o12, t19, e11) {
  return Math.min(e11, Math.max(o12, t19));
}
function dt11(o12, t19, e11, i27, r24) {
  return (o12 - t19) * (r24 - i27) / (e11 - t19) + i27;
}
function ct9(o12) {
  const t19 = o12 / 2, e11 = `
    <line 
      x1="${-t19}"
      y1="${-t19}"
      x2="${t19}"
      y2="${t19}"
    />
  `, i27 = `
    <line 
      x1="${-t19}"
      y1="${t19}"
      x2="${t19}"
      y2="${-t19}"
    />
  `;
  return `<g class="x">${e11} ${i27}</g>`;
}
var J9 = class extends x {
  constructor() {
    super(), this.leftMotorSpeed = 0, this.rightMotorSpeed = 0, new ResizeObserver(() => {
      this.resized();
    }).observe(this);
  }
  get clampedLeftMotorSpeed() {
    return P12(this.leftMotorSpeed, -1, 1);
  }
  get clampedRightMotorSpeed() {
    return P12(this.rightMotorSpeed, -1, 1);
  }
  drawMotionVector(t19, e11) {
    const i27 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), r24 = i27.width * 0.13, s18 = 20, n33 = 20, d34 = i27.width - (r24 + s18) * 2, a22 = i27.height - n33 * 2;
    if (Math.abs(t19) <= 0.05 && Math.abs(e11) <= 0.05)
      return ct9(i27.width * 0.2);
    const c27 = Math.min(d34, a22) / 2 - 8, h26 = 8;
    if (Math.abs(t19 - e11) <= 1e-3)
      return `<g class="arrow">${D13(
        Math.abs(t19 * c27),
        -Math.sign(t19) * Math.PI / 2,
        0,
        h26
      )}</g>`;
    const l25 = Math.PI, y33 = (e11 - t19) / 2, v30 = (t19 + e11) / 2, g31 = v30 / y33;
    let S21;
    if (Math.abs(g31) >= 1) {
      const x34 = -Math.sign(g31), m33 = (x34 + 1) * l25 / 2, $24 = Math.abs(g31 * c27);
      S21 = G11(
        m33,
        $24,
        x34 * v30 * c27,
        x34 * $24,
        h26
      );
    } else {
      const x34 = Math.sign(t19 - e11);
      if (g31 === 0) {
        const m33 = Math.max(t19, e11) * c27, $24 = x34 * l25, k27 = y33 < 0 ? l25 : 0;
        S21 = F12(k27, m33, $24, 0, h26);
      } else {
        const m33 = g31 < 0 ? t19 : e11, $24 = g31 < 0 ? e11 : t19, k27 = Math.abs(m33) * c27, Y11 = -g31 * k27, Z11 = dt11($24 / m33, 0, -1, 0.5, l25), tt10 = g31 < 0 ? l25 : 0;
        S21 = F12(
          tt10,
          k27,
          x34 * Z11,
          Y11,
          h26
        );
      }
    }
    return `<g class="arrow">${S21}</g>`;
  }
  drawDrivetrain() {
    const t19 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), e11 = t19.width * 0.13, i27 = Math.min(t19.width * 0.13, t19.height * 0.15), r24 = 20, s18 = 20, n33 = `
      <rect 
        width="calc(100% - ${(e11 + r24) * 2}px)" 
        height="calc(100% - ${s18 * 2}px)"
        x="${e11 + r24}" 
        y="20px" 
      />
    `, d34 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="${r24}px" 
        y="${s18}px" 
      />
    `, a22 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="calc(100% - ${e11 + r24}px)" 
        y="${s18}px" 
      />
    `, c27 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="${r24}px"
        y="calc(100% - ${i27 * 2 + s18}px)"
      />
    `, h26 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="calc(100% - ${e11 + r24}px)" 
        y="calc(100% - ${i27 * 2 + s18}px)"
      />
    `;
    return n33 + d34 + a22 + c27 + h26;
  }
  getLeftForegroundStyle() {
    return this.getForegroundStyle(this.clampedLeftMotorSpeed);
  }
  getRightForegroundStyle() {
    return this.getForegroundStyle(this.clampedRightMotorSpeed);
  }
  getForegroundStyle(t19) {
    const e11 = P12(t19, -1, 1);
    return e11 > 0 ? `
        height: ${Math.abs(e11) / 2 * 100}%;
        top: auto;
        bottom: 50%;
      ` : `
        height: ${Math.abs(e11) / 2 * 100}%;
        top: 50%;
        bottom: auto;
      `;
  }
  firstUpdated() {
    const t19 = this.drawMotionVector(0, 0);
    this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain(), this.renderRoot.querySelector("#forceVector").innerHTML = t19;
  }
  resized() {
    const t19 = this.drawMotionVector(
      this.clampedLeftMotorSpeed,
      this.clampedRightMotorSpeed
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = t19;
    const e11 = this.renderRoot.querySelector("#svg").getBoundingClientRect();
    this.renderRoot.querySelector("#forceVector").style.transform = `translate(${e11.width * 0.5}px, ${e11.height * 0.5}px)`, this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain();
  }
  updated() {
    const t19 = this.drawMotionVector(
      this.clampedLeftMotorSpeed,
      this.clampedRightMotorSpeed
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = t19;
  }
  render() {
    return Ht`
      <div class="diff-drive-container">
        <div class="speed">
          <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
          <div class="bar">
            <div
              class="foreground"
              style="${this.getLeftForegroundStyle()}"
            ></div>
          </div>
        </div>
        <svg id="svg">
          <g id="forceVector"></g>
          <g id="drivetrain" class="drivetrain"></g>
        </svg>
        <div class="speed">
          <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
          <div class="bar">
            <div
              class="foreground"
              style="${this.getRightForegroundStyle()}"
            ></div>
          </div>
        </div>
      </div>
    `;
  }
};
J9.styles = Mt2`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
      padding: 0 10px;
      font-family: sans-serif;
    }

    .diff-drive-container {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
    }

    svg {
      overflow: overlay;
      flex: 1;
      height: 100%;
    }

    svg .x {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
    }

    svg .arrow line,
    svg .arrow path {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
      fill: none;
    }

    svg .arrow polygon {
      stroke: rgb(50, 50, 255);
      fill: rgb(50, 50, 255);
    }

    svg .drivetrain {
      fill: none;
      stroke: var(--frc-differential-drivebase-drivetrain-color, #000);
    }

    .bar {
      position: relative;
      height: calc(100% - 30px);
      width: 20px;
      border-radius: 3px;
      margin: 15px 0;
      background: var(--frc-bar-background, #ddd);
    }

    .speed {
      display: flex;
      height: 100%;
      flex-direction: row;
      align-items: center;
      margin-left: 30px;
    }

    frc-axis {
      width: 10px;
      height: calc(100% - 35px);
    }

    .foreground {
      position: absolute;
      top: 0;
      width: 20px;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
    }
  `;
var B15 = J9;
W6([
  Rt({ type: Number, attribute: "left-motor-speed" })
], B15.prototype, "leftMotorSpeed");
W6([
  Rt({ type: Number, attribute: "right-motor-speed" })
], B15.prototype, "rightMotorSpeed");
customElements.get("frc-differential-drivebase") || customElements.define("frc-differential-drivebase", B15);
var ht10 = Object.defineProperty;
var q10 = (o12, t19, e11, i27) => {
  for (var r24 = void 0, s18 = o12.length - 1, n33; s18 >= 0; s18--)
    (n33 = o12[s18]) && (r24 = n33(t19, e11, r24) || r24);
  return r24 && ht10(t19, e11, r24), r24;
};
function lt10(o12) {
  const t19 = o12 / 2, e11 = `
    <line 
      x1="${-t19}"
      y1="${-t19}"
      x2="${t19}"
      y2="${t19}"
    />
  `, i27 = `
    <line 
      x1="${-t19}"
      y1="${t19}"
      x2="${t19}"
      y2="${-t19}"
    />
  `;
  return `<g class="x">${e11} ${i27}</g>`;
}
function M8(o12) {
  return Math.min(1, Math.max(o12, -1));
}
function z15(o12) {
  const t19 = M8(o12);
  return t19 > 0 ? `
      height: ${Math.abs(t19) / 2 * 100}%;
      top: auto;
      bottom: 50%;
    ` : `
    height: ${Math.abs(t19) / 2 * 100}%;
    top: 50%;
    bottom: auto;
  `;
}
var K10 = class extends x {
  constructor() {
    super(), this.frontLeftMotorSpeed = 0, this.frontRightMotorSpeed = 0, this.rearLeftMotorSpeed = 0, this.rearRightMotorSpeed = 0, new ResizeObserver(() => {
      this.resized();
    }).observe(this);
  }
  drawMotionVector(t19, e11, i27, r24) {
    const s18 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), n33 = s18.width * 0.13, d34 = 20, a22 = 20, c27 = s18.width - (n33 + d34) * 2, h26 = s18.height - a22 * 2, l25 = Math.min(c27, h26) / 2 - 16, y33 = {
      x: (t19 - e11 - i27 + r24) / 4,
      y: (t19 + e11 + i27 + r24) / 4
    }, v30 = (-t19 + e11 - i27 + r24) / 4, g31 = Math.hypot(y33.x, y33.y), S21 = Math.atan2(y33.y, y33.x);
    if (Math.abs(v30) <= 0.01 && g31 <= 0.01)
      return lt10(s18.width * 0.2);
    let x34 = "", m33 = "", $24 = "";
    return Math.abs(v30) > 0.01 && (x34 = F12(
      0,
      l25,
      -v30 * Math.PI,
      0,
      8
    ), m33 = F12(
      Math.PI,
      l25,
      -v30 * Math.PI,
      0,
      8
    )), g31 > 0.01 && ($24 = D13(
      g31 * l25,
      -S21,
      0,
      8
    )), `<g class="arrow">${x34} ${m33} ${$24}</g>`;
  }
  drawDrivetrain() {
    const t19 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), e11 = t19.width * 0.13, i27 = Math.min(t19.width * 0.13, t19.height * 0.15), r24 = 20, s18 = 20, n33 = `
      <rect 
        width="calc(100% - ${(e11 + r24) * 2}px)" 
        height="calc(100% - ${s18 * 2}px)"
        x="${e11 + r24}" 
        y="20px" 
      />
    `, d34 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="${r24}px" 
        y="${s18}px" 
      />
    `, a22 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="calc(100% - ${e11 + r24}px)" 
        y="${s18}px" 
      />
    `, c27 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="${r24}px"
        y="calc(100% - ${i27 * 2 + s18}px)"
      />
    `, h26 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="calc(100% - ${e11 + r24}px)" 
        y="calc(100% - ${i27 * 2 + s18}px)"
      />
    `;
    return n33 + d34 + a22 + c27 + h26;
  }
  getFlForegroundStyle() {
    return z15(this.frontLeftMotorSpeed);
  }
  getFrForegroundStyle() {
    return z15(this.frontRightMotorSpeed);
  }
  getRlForegroundStyle() {
    return z15(this.rearLeftMotorSpeed);
  }
  getRrForegroundStyle() {
    return z15(this.rearRightMotorSpeed);
  }
  firstUpdated() {
    const t19 = this.drawMotionVector(0, 0, 0, 0);
    this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain(), this.renderRoot.querySelector("#forceVector").innerHTML = t19;
  }
  resized() {
    const t19 = this.drawMotionVector(
      M8(this.frontLeftMotorSpeed),
      M8(this.frontRightMotorSpeed),
      M8(this.rearLeftMotorSpeed),
      M8(this.rearRightMotorSpeed)
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = t19;
    const e11 = this.renderRoot.querySelector("#svg").getBoundingClientRect();
    this.renderRoot.querySelector("#forceVector").style.transform = `translate(${e11.width * 0.5}px, ${e11.height * 0.5}px)`, this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain();
  }
  updated(t19) {
    super.updated(t19);
    const e11 = this.drawMotionVector(
      M8(this.frontLeftMotorSpeed),
      M8(this.frontRightMotorSpeed),
      M8(this.rearLeftMotorSpeed),
      M8(this.rearRightMotorSpeed)
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = e11;
  }
  render() {
    return Ht`
      <div class="diff-drive-container">
        <div class="speed-pair">
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getFlForegroundStyle()}"
              ></div>
            </div>
          </div>
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getRlForegroundStyle()}"
              ></div>
            </div>
          </div>
        </div>
        <svg id="svg">
          <g id="forceVector"></g>
          <g id="drivetrain" class="drivetrain"></g>
        </svg>
        <div class="speed-pair">
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getFrForegroundStyle()}"
              ></div>
            </div>
          </div>
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getRrForegroundStyle()}"
              ></div>
            </div>
          </div>
        </div>
      </div>
    `;
  }
};
K10.styles = Mt2`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
      padding: 0 10px;
      font-family: sans-serif;
    }

    .diff-drive-container {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
    }

    svg {
      overflow: overlay;
      flex: 1;
      height: 100%;
    }

    svg .x {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
    }

    svg .arrow line,
    svg .arrow path {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
      fill: none;
    }

    svg .arrow polygon {
      stroke: rgb(50, 50, 255);
      fill: rgb(50, 50, 255);
    }

    svg .drivetrain {
      fill: none;
      stroke: var(--frc-mecanum-drivebase-drivetrain-color, #000);
    }

    .bar {
      position: relative;
      height: calc(100% - 30px);
      width: 20px;
      border-radius: 3px;
      margin: 15px 0;
      background: var(--frc-bar-background, #ddd);
    }

    .speed-pair {
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-around;
    }

    .speed {
      display: flex;
      height: 48%;
      flex-direction: row;
      align-items: center;
      margin-left: 30px;
    }

    frc-axis {
      width: 10px;
      height: calc(100% - 35px);
    }

    .foreground {
      position: absolute;
      top: 0;
      width: 20px;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
    }
  `;
var R14 = K10;
q10([
  Rt({ type: Number, attribute: "front-left-motor-speed" })
], R14.prototype, "frontLeftMotorSpeed");
q10([
  Rt({ type: Number, attribute: "front-right-motor-speed" })
], R14.prototype, "frontRightMotorSpeed");
q10([
  Rt({ type: Number, attribute: "rear-left-motor-speed" })
], R14.prototype, "rearLeftMotorSpeed");
q10([
  Rt({ type: Number, attribute: "rear-right-motor-speed" })
], R14.prototype, "rearRightMotorSpeed");
customElements.get("frc-mecanum-drivebase") || customElements.define("frc-mecanum-drivebase", R14);
var gt10 = Object.defineProperty;
var f24 = (o12, t19, e11, i27) => {
  for (var r24 = void 0, s18 = o12.length - 1, n33; s18 >= 0; s18--)
    (n33 = o12[s18]) && (r24 = n33(t19, e11, r24) || r24);
  return r24 && gt10(t19, e11, r24), r24;
};
function U15(o12, ...t19) {
  return t19.some((e11) => o12.has(e11));
}
function Q9(o12) {
  return o12 * Math.PI / 180;
}
function C16(o12) {
  return o12 * 180 / Math.PI;
}
function ut9(o12, t19, e11) {
  return Math.max(Math.min(o12, e11), t19);
}
function A14(o12, t19 = false) {
  const e11 = Q9(-(o12 - 90));
  return [t19 ? -Math.cos(e11) : Math.cos(e11), Math.sin(e11)];
}
var w19 = 35;
var X9 = class extends x {
  constructor() {
    super(...arguments), this.moduleCount = 4, this.wheelLocations = [
      2.5,
      2,
      2.5,
      -2,
      -2.5,
      2,
      -2.5,
      -2
    ], this.measuredStates = [
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0
    ], this.desiredStates = [
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0
    ], this.robotRotation = 0, this.maxSpeed = 1, this.rotationUnit = "radians", this.sizeLeftRight = 4, this.sizeFrontBack = 5, this.normalizedRotation = 0;
  }
  drawBase() {
    const [t19, e11] = this.getBaseSize();
    $i(this._base).attr("width", t19).attr("height", e11).attr("stroke-width", 5).attr("fill", "none");
  }
  setSwerveRotation() {
    $i(this._swerve).attr(
      "transform",
      `rotate(${-this.normalizedRotation})`
    );
  }
  setSwerveOrigin() {
    const [t19, e11] = this.getBaseSize();
    $i(this._swerve).attr(
      "transform-origin",
      `${t19 / 2} ${e11 / 2}`
    );
  }
  getRobotRotationRad() {
    const t19 = this.robotRotation;
    return this.rotationUnit === "radians" ? t19 : Q9(t19);
  }
  getSvgSize() {
    const { width: t19 } = this.getBoundingClientRect();
    return [t19, t19 * this.sizeFrontBack / this.sizeLeftRight];
  }
  getBaseSize() {
    const [t19] = this.getSvgSize();
    return [t19, t19 * this.sizeFrontBack / this.sizeLeftRight];
  }
  updated(t19) {
    if (t19.has("robotRotation")) {
      const e11 = this.robotRotation ?? 0, i27 = (t19.get("robotRotation") ?? e11) - e11, r24 = this.rotationUnit === "degrees" ? i27 : C16(i27), s18 = [
        r24 - 720,
        r24 - 360,
        r24,
        r24 + 360,
        r24 + 720
      ];
      let n33 = 0, d34 = Math.abs(s18[0]);
      for (let a22 = 1; a22 < s18.length; a22 += 1) {
        const c27 = Math.abs(s18[a22]);
        c27 < d34 && (n33 = a22, d34 = c27);
      }
      this.normalizedRotation -= s18[n33];
    }
    U15(
      t19,
      "sizeLeftRight",
      "sizeFrontBack",
      "robotRotation",
      "rotationUnit"
    ) && this.drawBase(), U15(t19, "robotRotation", "rotationUnit") && this.setSwerveRotation(), U15(t19, "sizeLeftRight", "sizeFrontBack") && this.setSwerveOrigin();
  }
  resized() {
    const [t19, e11] = this.getSvgSize();
    $i(this._svg).attr("width", t19).attr("height", e11), this.drawBase(), this.setSwerveOrigin(), this.requestUpdate();
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.resized();
    }).observe(this), this.resized();
  }
  getSwerveModules() {
    const t19 = [];
    for (let e11 = 0; e11 < this.moduleCount; e11 += 1) {
      const i27 = {
        location: [
          this.wheelLocations[e11 * 2],
          this.wheelLocations[e11 * 2 + 1]
        ],
        desiredRotation: this.desiredStates[e11 * 2],
        desiredVelocity: this.desiredStates[e11 * 2 + 1],
        measuredRotation: this.measuredStates[e11 * 2],
        measuredVelocity: this.measuredStates[e11 * 2 + 1]
      };
      t19.push(i27);
    }
    return t19;
  }
  renderModuleDirectionIndicator(t19, e11, i27) {
    const r24 = this.rotationUnit === "degrees" ? e11 : C16(e11), [s18, n33] = A14(r24 - 15, true), [d34, a22] = A14(r24 + 15, true), c27 = `M ${-s18 * 60},${n33 * 60} L 0,0 ${-d34 * 60},${a22 * 60}`;
    return Nt`
      <defs>
        <clipPath id=${t19}>
          <path d=${c27} fill="white" stroke="5" stroke="white" />
        </clipPath>
      </defs>
      <circle r=${w19 - 2.5} fill=${i27} stroke-width="0" clip-path=${`url(#${t19})`}></circle>
    `;
  }
  renderModuleVelocityIndicator(t19, e11, i27, r24) {
    const s18 = this.rotationUnit === "degrees" ? e11 : C16(e11);
    let n33 = ut9(100 * i27 / this.maxSpeed, -100, 100);
    n33 += w19 * Math.sign(n33), n33 *= -1;
    const d34 = Math.abs(n33) - 20, a22 = Math.abs(n33), c27 = `M -17.5,${d34} L 2.5,${a22} L 22.5,${d34}`, h26 = `rotate(${-s18 + (n33 < 0 ? 180 : 0)})`, l25 = `${t19}-velocity`;
    return Nt`
     <defs>
        <mask id=${l25}>
          <circle r="300" fill="white" ></circle>
          <circle r=${w19 + 2.5} fill="black" ></circle>
        </mask>
      </defs>
      <g class="velocity-indicator" transform=${h26} mask="url(#${l25})">
        <rect width="5" height=${Math.abs(n33)} fill=${r24}></rect>
        <path d=${c27} stroke=${r24} stroke-width="5" fill="none" />
      </g>
    `;
  }
  renderModules() {
    const t19 = this.getSwerveModules(), [e11, i27] = this.getBaseSize();
    return Nt`
      <g class="modules">
        ${t19.map((r24, s18) => {
      const {
        desiredRotation: n33,
        measuredRotation: d34,
        location: a22,
        measuredVelocity: c27,
        desiredVelocity: h26
      } = r24, l25 = i27 / 2 * (1 - a22[0]) + w19 * Math.sign(a22[0]), y33 = e11 / 2 * (a22[1] + 1) - w19 * Math.sign(a22[1]), v30 = `module-${s18}-measured-clip`, g31 = `module-${s18}-desired-clip`;
      return Nt`
            <g transform=${`translate(${y33}, ${l25})`}>
              <circle class="module-circle" r=${w19} stroke-width="5" fill="none"></circle>
              ${this.renderModuleDirectionIndicator(
        v30,
        d34,
        "blue"
      )}
              ${this.renderModuleDirectionIndicator(
        g31,
        n33,
        "red"
      )}
              ${this.renderModuleVelocityIndicator(
        v30,
        d34,
        c27,
        "blue"
      )}
              ${this.renderModuleVelocityIndicator(
        g31,
        n33,
        h26,
        "red"
      )}
            </g>
          `;
    })} 
      </g>
    `;
  }
  renderWheelMask() {
    const t19 = this.getSwerveModules(), [e11, i27] = this.getBaseSize();
    return Nt`
      <defs>
        <mask id="wheel-mask">
          <rect fill="white" width=${e11} height=${i27} stroke-width="5" stroke="white"></rect>
          ${t19.map((r24) => {
      const s18 = i27 / 2 - i27 * r24.location[0] / this.sizeFrontBack, n33 = e11 / 2 - e11 * r24.location[1] / this.sizeLeftRight;
      return Nt`
              <circle r="50" fill="black" transform=${`translate(${n33}, ${s18})`}></circle>
            `;
    })}
        </mask>
      </defs>
    `;
  }
  renderArrow() {
    const [t19, e11] = this.getBaseSize(), i27 = `M ${t19 / 2 - 30},100 L ${t19 / 2},70 L ${t19 / 2 + 30},100`;
    return Nt`
      <line class="arrow" x1=${t19 / 2} y1=${70} x2=${t19 / 2} y2=${e11 - 30} stroke-width="5" />
      <path class="arrow" d=${i27} stroke-width="5" fill="none" />
    `;
  }
  render() {
    return Ht`
      <div>
        ${Nt`
          <svg>
            ${this.renderWheelMask()}
            <g class="swerve">
              <rect class="base" rx=${w19}></rect>
              ${this.renderModules()}
              ${this.renderArrow()}
            </g>
          </svg>
      `}
      </div>
    `;
  }
};
X9.styles = Mt2`
    :host {
      display: inline-block;
      width: 300px;
      height: auto;
      overflow: visible;
    }

    svg {
      width: 100%;
      overflow: visible;
    }

    .base {
      stroke: var(--frc-swerve-drive-color, black);
    }

    .arrow {
      stroke: var(--frc-swerve-drive-color, black);
    }

    .module-circle {
      stroke: var(--frc-swerve-drive-color, black);
    }
  `;
var p19 = X9;
f24([
  Rt({ type: Number, attribute: "module-count" })
], p19.prototype, "moduleCount");
f24([
  Rt({ type: Array, attribute: "wheel-locations" })
], p19.prototype, "wheelLocations");
f24([
  Rt({ type: Array, attribute: "measured-states" })
], p19.prototype, "measuredStates");
f24([
  Rt({ type: Array, attribute: "desired-states" })
], p19.prototype, "desiredStates");
f24([
  Rt({ type: Number, attribute: "robot-rotation" })
], p19.prototype, "robotRotation");
f24([
  Rt({ type: Number, attribute: "max-speed" })
], p19.prototype, "maxSpeed");
f24([
  Rt({ type: String, attribute: "rotation-unit" })
], p19.prototype, "rotationUnit");
f24([
  Rt({ type: Number, attribute: "size-left-right" })
], p19.prototype, "sizeLeftRight");
f24([
  Rt({ type: Number, attribute: "size-front-back" })
], p19.prototype, "sizeFrontBack");
f24([
  a("svg")
], p19.prototype, "_svg");
f24([
  a(".swerve")
], p19.prototype, "_swerve");
f24([
  a(".base")
], p19.prototype, "_base");
f24([
  a(".modules")
], p19.prototype, "_modules");
customElements.get("frc-swerve-drivebase") || customElements.define("frc-swerve-drivebase", p19);
var St6 = xt({
  tagName: "frc-differential-drivebase",
  elementClass: B15,
  react: import_react10.default
});
var Rt7 = xt({
  tagName: "frc-mecanum-drivebase",
  elementClass: R14,
  react: import_react10.default
});
var kt7 = xt({
  tagName: "frc-swerve-drivebase",
  elementClass: p19,
  react: import_react10.default
});

// node_modules/@frc-web-components/react/dist/components/Encoder.es.js
var import_react11 = __toESM(require_react(), 1);
var u23 = Object.defineProperty;
var c17 = (t19, a22, s18, g31) => {
  for (var e11 = void 0, o12 = t19.length - 1, n33; o12 >= 0; o12--)
    (n33 = t19[o12]) && (e11 = n33(a22, s18, e11) || e11);
  return e11 && u23(a22, s18, e11), e11;
};
var d21 = class extends x {
  constructor() {
    super(...arguments), this.distance = 0, this.speed = 0;
  }
  render() {
    return Ht`
      <label class="distance-label">Distance</label>
      <span>${this.distance}</span>
      <label class="speed-label">Speed</label>
      <span>${this.speed}</span>
    `;
  }
};
d21.styles = Mt2`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: 50% 50%;
      column-gap: 15px;
      row-gap: 5px;
      align-items: center;
      width: 250px;
      font-family: sans-serif;
    }

    label {
      font-weight: bold;
      text-align: right;
      color: var(--frc-encoder-label-color, #000);
    }

    span {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      padding: 5px;
      border: 1px dashed;
      border-color: var(--frc-encoder-value-color, #666);
      color: var(--frc-encoder-value-color, #666);
      border-radius: 3px;
      box-sizing: border-box;
    }
  `;
var r19 = d21;
c17([
  Rt({ type: Number })
], r19.prototype, "distance");
c17([
  Rt({ type: Number })
], r19.prototype, "speed");
customElements.get("frc-encoder") || customElements.define("frc-encoder", r19);
var v22 = xt({
  tagName: "frc-encoder",
  elementClass: r19,
  react: import_react11.default
});

// node_modules/@frc-web-components/react/dist/components/Field.es.js
var import_react12 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/units-DyibxdHs-d7e14be8.js
var e8 = "m";
var i19 = {
  // metric
  km: 1e3,
  m: 1,
  cm: 0.01,
  mm: 1e-3,
  // imperial
  mi: 1609.34,
  yd: 0.9144,
  ft: 0.3048,
  in: 0.0254
};
var f25 = {
  km: "km",
  m: "m",
  meters: "m",
  cm: "cm",
  centimeters: "cm",
  mm: "mm",
  // imperial
  mi: "mi",
  miles: "mi",
  yd: "yd",
  yards: "yards",
  ft: "ft",
  feet: "ft",
  foot: "ft",
  in: "in",
  inches: "in"
};
var n23 = (c27, m33, t19) => (m33 = f25[m33], t19 = f25[t19], typeof i19[m33] > "u" && (m33 = e8), typeof i19[t19] > "u" && (t19 = e8), c27 * i19[m33] / i19[t19]);

// node_modules/@frc-web-components/react/dist/components/Field.es.js
var D14 = (n33) => {
  throw TypeError(n33);
};
var _16 = (n33, t19, e11) => t19.has(n33) || D14("Cannot " + e11);
var b23 = (n33, t19, e11) => (_16(n33, t19, "read from private field"), e11 ? e11.call(n33) : t19.get(n33));
var L8 = (n33, t19, e11) => t19.has(n33) ? D14("Cannot add the same private member more than once") : t19 instanceof WeakSet ? t19.add(n33) : t19.set(n33, e11);
var H13 = (n33, t19, e11, i27) => (_16(n33, t19, "write to private field"), i27 ? i27.call(n33, e11) : t19.set(n33, e11), e11);
var et10 = (n33, t19, e11) => (_16(n33, t19, "access private method"), e11);
var O14 = [
  // https://www.chiefdelphi.com/t/4k-field-image-2025-reefscape/478797
  {
    game: "Reefscape",
    image: "./field-images/2025-field.jpg",
    corners: {
      topLeft: [421, 91],
      bottomRight: [3352, 1437]
    },
    size: [57.57291667, 26.4167],
    unit: "foot"
  },
  // Thanks to MikLast for providing the 2024 field image here:
  // https://www.chiefdelphi.com/t/2024-crescendo-top-down-field-renders/447764
  {
    game: "Crescendo",
    image: "./field-images/2024-field.jpg",
    corners: {
      topLeft: [513, 78],
      bottomRight: [3327, 1475]
    },
    size: [54.265092, 26.31234],
    unit: "foot"
  },
  {
    game: "Charged Up",
    image: "./field-images/2023-field.jpg",
    corners: {
      topLeft: [46, 36],
      bottomRight: [1088, 544]
    },
    size: [54.27083, 26.2916],
    unit: "foot"
  },
  {
    game: "Rapid React",
    image: "./field-images/2022-field.jpg",
    corners: {
      topLeft: [74, 50],
      bottomRight: [1774, 900]
    },
    size: [54, 27],
    unit: "foot"
  },
  {
    game: "Infinite Recharge",
    image: "./field-images/2020-field.jpg",
    corners: {
      topLeft: [96, 25],
      bottomRight: [1040, 514]
    },
    size: [52.4375, 26.9375],
    unit: "foot"
  },
  {
    game: "Destination: Deep Space",
    image: "./field-images/2019-field.jpg",
    corners: {
      topLeft: [217, 40],
      bottomRight: [1372, 615]
    },
    size: [54, 27],
    unit: "foot"
  },
  {
    game: "FIRST Power Up",
    image: "./field-images/2018-field.jpg",
    corners: {
      topLeft: [125, 20],
      bottomRight: [827, 370]
    },
    size: [54, 27],
    unit: "feet"
  },
  {
    game: "Barrel Racing Path",
    image: "./field-images/2021-barrel.png",
    corners: {
      topLeft: [20, 20],
      bottomRight: [780, 400]
    },
    size: [30, 15],
    unit: "feet"
  },
  {
    game: "Bounce Path",
    image: "./field-images/2021-bounce.png",
    corners: {
      topLeft: [20, 20],
      bottomRight: [780, 400]
    },
    size: [30, 15],
    unit: "feet"
  },
  {
    game: "Galactic Search A",
    image: "./field-images/2021-galacticsearcha.png",
    corners: {
      topLeft: [20, 20],
      bottomRight: [780, 400]
    },
    size: [30, 15],
    unit: "feet"
  },
  {
    game: "Galactic Search B",
    image: "./field-images/2021-galacticsearchb.png",
    corners: {
      topLeft: [20, 20],
      bottomRight: [780, 400]
    },
    size: [30, 15],
    unit: "feet"
  },
  {
    game: "Slalom Path",
    image: "./field-images/2021-slalom.png",
    corners: {
      topLeft: [20, 20],
      bottomRight: [780, 400]
    },
    size: [30, 15],
    unit: "feet"
  }
];
var S14;
var F13;
var N14 = class {
  constructor() {
    L8(this, S14, {}), L8(this, F13, /* @__PURE__ */ new Map());
  }
  getImage(t19) {
    if (typeof b23(this, S14)[t19] > "u") {
      const e11 = new Image(), i27 = {
        src: t19,
        width: 0,
        height: 0,
        loaded: false,
        image: e11
      };
      e11.onload = () => {
        i27.loaded = true, i27.width = e11.width, i27.height = e11.height, [...b23(this, F13).values()].forEach((o12) => {
          o12(t19);
        });
      }, b23(this, S14)[t19] = i27, e11.src = t19;
    }
    return b23(this, S14)[t19];
  }
  static getBoundingBoxDims(t19, e11) {
    const i27 = Math.abs(t19.width * Math.cos(e11)) + Math.abs(t19.height * Math.sin(e11)), o12 = Math.abs(t19.width * Math.sin(e11)) + Math.abs(t19.height * Math.cos(e11));
    return {
      width: i27,
      height: o12
    };
  }
  static fitImageInsideBox(t19, e11) {
    return e11.width / t19.width * t19.height <= e11.height ? {
      width: e11.width,
      height: e11.width / t19.width * t19.height
    } : {
      width: e11.height / t19.height * t19.width,
      height: e11.height
    };
  }
  onImageLoad(t19) {
    const e11 = Symbol("image");
    return b23(this, F13).set(e11, t19), () => {
      b23(this, F13).delete(e11);
    };
  }
};
S14 = /* @__PURE__ */ new WeakMap(), F13 = /* @__PURE__ */ new WeakMap();
var it12 = Object.defineProperty;
var P13 = (n33, t19, e11, i27) => {
  for (var o12 = void 0, s18 = n33.length - 1, r24; s18 >= 0; s18--)
    (r24 = n33[s18]) && (o12 = r24(t19, e11, o12) || o12);
  return o12 && it12(t19, e11, o12), o12;
};
var w20 = class extends x {
  constructor() {
    super(...arguments), this.unit = "inherit", this.rotationUnit = "inherit", this.image = "", this.color = "#0000ff", this.opacity = 1, this.pose = [0, 0, 0], this.width = 0.6, this.length = 0.9;
  }
  draw({
    canvas: t19,
    unit: e11,
    rotationUnit: i27,
    xToPx: o12,
    yToPx: s18,
    lengthToPx: r24,
    origin: a22
  }) {
    const p26 = this.unit === "inherit" || this.unit === null ? e11 : this.unit, y33 = this.rotationUnit === "inherit" || this.rotationUnit === null ? i27 : this.rotationUnit, [c27, m33] = this.pose, C19 = y33 === "rad" ? this.pose[2] : this.pose[2] / (180 / Math.PI);
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), t19.fillStyle = "#222", t19.strokeStyle = this.color, t19.lineWidth = r24(3, "in"), t19.translate(o12(c27, p26), s18(m33, p26)), t19.rotate(-C19 + (a22 === "red" ? Math.PI : 0)), t19.roundRect(
      -r24(this.length / 2, p26),
      -r24(this.width / 2, p26),
      r24(this.length, p26),
      r24(this.width, p26),
      1
    ), t19.fill(), t19.stroke(), t19.beginPath(), t19.fillStyle = "white", t19.strokeStyle = "white", t19.lineWidth = r24(2, "in"), t19.moveTo(-r24(this.length * 0.3, p26), 0), t19.lineTo(r24(this.length * 0.3, p26), 0), t19.moveTo(
      r24(this.length * 0.1, p26),
      -r24(this.width * 0.25, p26)
    ), t19.lineTo(r24(this.length * 0.3, p26), 0), t19.lineTo(
      r24(this.length * 0.1, p26),
      r24(this.width * 0.25, p26)
    ), t19.stroke();
  }
};
P13([
  Rt({ type: String })
], w20.prototype, "unit");
P13([
  Rt({ type: String, attribute: "rotation-unit" })
], w20.prototype, "rotationUnit");
P13([
  Rt({ type: String })
], w20.prototype, "image");
P13([
  Rt({ type: String })
], w20.prototype, "color");
P13([
  Rt({ type: Number })
], w20.prototype, "opacity");
P13([
  Rt({ type: Array })
], w20.prototype, "pose");
P13([
  Rt({ type: Number })
], w20.prototype, "width");
P13([
  Rt({ type: Number })
], w20.prototype, "length");
customElements.get("frc-field-robot") || customElements.define("frc-field-robot", w20);
var ot11 = Object.defineProperty;
var T15 = (n33, t19, e11, i27) => {
  for (var o12 = void 0, s18 = n33.length - 1, r24; s18 >= 0; s18--)
    (r24 = n33[s18]) && (o12 = r24(t19, e11, o12) || o12);
  return o12 && ot11(t19, e11, o12), o12;
};
var x21 = class extends x {
  constructor() {
    super(...arguments), this.poses = [], this.translations = [], this.color = "#FFA500", this.unit = "inherit", this.lineWidth = 4, this.opacity = 0.7, this._poses = [], this._translations = [];
  }
  updated(t19) {
    var e11;
    t19.has("poses") && (typeof ((e11 = this.poses) == null ? void 0 : e11[0]) == "number" || this.poses instanceof Uint8Array ? this._poses = it10(this.poses) : this._poses = this.poses), t19.has("translations") && (this._translations = it10(this.translations, 2));
  }
  draw({ canvas: t19, unit: e11, xToPx: i27, yToPx: o12 }) {
    const s18 = this.unit === "inherit" || this.unit === null ? e11 : this.unit;
    if (t19.lineWidth = this.lineWidth, t19.strokeStyle = this.color, t19.globalAlpha = this.opacity, this._poses.length > 1) {
      for (let r24 = 0; r24 < this._poses.length - 1; r24 += 1) {
        const [a22, p26] = this._poses[r24], [y33, c27] = this._poses[r24 + 1];
        t19.moveTo(i27(a22, s18), o12(p26, s18)), t19.lineTo(i27(y33, s18), o12(c27, s18));
      }
      t19.stroke();
    }
    if (this._translations.length > 1) {
      for (let r24 = 0; r24 < this._translations.length - 1; r24 += 1) {
        const [a22, p26] = this._translations[r24], [y33, c27] = this._translations[r24 + 1];
        t19.moveTo(i27(a22, s18), o12(p26, s18)), t19.lineTo(i27(y33, s18), o12(c27, s18));
      }
      t19.stroke();
    }
  }
};
T15([
  Rt({ type: Array })
], x21.prototype, "poses");
T15([
  Rt({ type: Array })
], x21.prototype, "translations");
T15([
  Rt({ type: String })
], x21.prototype, "color");
T15([
  Rt({ type: String })
], x21.prototype, "unit");
T15([
  Rt({ type: Number, attribute: "line-width" })
], x21.prototype, "lineWidth");
T15([
  Rt({ type: Number })
], x21.prototype, "opacity");
T15([
  n2()
], x21.prototype, "_poses");
T15([
  n2()
], x21.prototype, "_translations");
customElements.get("frc-field-path") || customElements.define("frc-field-path", x21);
var st10 = Object.defineProperty;
var f26 = (n33, t19, e11, i27) => {
  for (var o12 = void 0, s18 = n33.length - 1, r24; s18 >= 0; s18--)
    (r24 = n33[s18]) && (o12 = r24(t19, e11, o12) || o12);
  return o12 && st10(t19, e11, o12), o12;
};
function rt9(n33) {
  return n33 * Math.PI / 180;
}
var v23;
var U16;
var X10;
var V12 = class extends x {
  constructor() {
    super(...arguments), L8(this, U16), L8(this, v23), this.game = O14[0].game, this.cropTop = null, this.cropBottom = null, this.cropLeft = null, this.cropRight = null, this.cropType = "percent", this.unit = e8, this.rotationUnit = "rad", this.rotation = 0, this.showGrid = false, this.gridSize = 1, this.origin = "blue", H13(this, v23, new N14());
  }
  getConfig() {
    return O14.find(({ game: t19 }) => t19 === this.game) ?? O14[0];
  }
  getCanvasCtx() {
    return this.canvas.getContext("2d");
  }
  getCropPercent() {
    if (this.cropType === "percent") {
      const q13 = this.cropLeft ?? 0, J11 = this.cropTop ?? 0, Q11 = this.cropRight ?? 1, Z11 = this.cropBottom ?? 1;
      return { x1: q13, y1: J11, x2: Q11, y2: Z11 };
    }
    const { corners: t19, image: e11, unit: i27, size: o12 } = this.getConfig(), { loaded: s18, width: r24, height: a22 } = b23(this, v23).getImage(e11);
    if (!s18)
      return { x1: 0, y1: 0, x2: 1, y2: 1 };
    const p26 = [this.cropLeft ?? 0, this.cropTop ?? 0], y33 = [
      this.cropRight ?? n23(o12[0], i27, this.unit),
      this.cropBottom ?? n23(o12[1], i27, this.unit)
    ], c27 = t19.topLeft[0] / r24, m33 = t19.topLeft[1] / a22, C19 = t19.bottomRight[0] / r24, j18 = t19.bottomRight[1] / a22, R20 = C19 - c27, K13 = j18 - m33;
    return {
      x1: c27 + R20 * n23(p26[0], this.unit, i27) / o12[0],
      y1: m33 + K13 * n23(p26[1], this.unit, i27) / o12[1],
      x2: c27 + R20 * n23(y33[0], this.unit, i27) / o12[0],
      y2: m33 + K13 * n23(y33[1], this.unit, i27) / o12[1]
    };
  }
  getFieldRectPx() {
    const { corners: t19, image: e11 } = this.getConfig(), { loaded: i27, width: o12, height: s18 } = b23(this, v23).getImage(e11);
    if (!i27)
      return { x: 0, y: 0, width: 0, height: 0 };
    const r24 = t19.topLeft[0] / o12, a22 = t19.topLeft[1] / s18, p26 = t19.bottomRight[0] / o12, y33 = t19.bottomRight[1] / s18, c27 = this.getCropPercent(), m33 = c27.x2 - c27.x1, C19 = c27.y2 - c27.y1, j18 = this.canvas.width / m33, R20 = this.canvas.height / C19;
    return {
      x: (r24 - c27.x1) * j18,
      y: (a22 - c27.y1) * R20,
      width: (p26 - r24) * j18,
      height: (y33 - a22) * R20
    };
  }
  pxToX(t19, e11 = this.unit) {
    const i27 = this.getFieldRectPx(), { size: o12, unit: s18 } = this.getConfig();
    if (i27.width === 0)
      return 0;
    const r24 = i27.width / o12[0], a22 = t19 * (this.canvas.width / this.canvas.clientWidth), p26 = this.origin !== "red" ? (a22 - i27.x) / r24 : (i27.x + i27.width - a22) / r24;
    return n23(p26, s18, e11);
  }
  xToPx(t19, e11 = this.unit) {
    const i27 = this.getFieldRectPx(), { size: o12, unit: s18 } = this.getConfig();
    if (i27.width === 0)
      return 0;
    const r24 = i27.width / o12[0], a22 = n23(t19, e11, s18);
    return this.origin !== "red" ? i27.x + a22 * r24 : i27.x + i27.width - a22 * r24;
  }
  yToPx(t19, e11 = this.unit) {
    const i27 = this.getFieldRectPx(), { size: o12, unit: s18 } = this.getConfig();
    if (i27.height === 0)
      return 0;
    const r24 = i27.height / o12[1], a22 = n23(t19, e11, s18);
    return this.origin !== "red" ? i27.y + i27.height - a22 * r24 : i27.y + a22 * r24;
  }
  pxToY(t19, e11 = this.unit) {
    const i27 = this.getFieldRectPx(), { size: o12, unit: s18 } = this.getConfig();
    if (i27.height === 0)
      return 0;
    const r24 = i27.height / o12[1], a22 = t19 * (this.canvas.height / this.canvas.clientHeight), p26 = this.origin !== "red" ? (i27.y + i27.height - a22) / r24 : (a22 - i27.y) / r24;
    return n23(p26, s18, e11);
  }
  lengthToPx(t19, e11 = this.unit) {
    const i27 = this.getFieldRectPx(), { size: o12, unit: s18 } = this.getConfig();
    if (i27.width === 0)
      return 0;
    const r24 = i27.width / o12[0];
    return n23(t19, e11, s18) * r24;
  }
  setContainerSize() {
    const t19 = { width: this.clientWidth, height: this.clientHeight }, e11 = this.getConfig().image, i27 = b23(this, v23).getImage(e11), { loaded: o12 } = i27;
    if (!o12)
      return;
    const s18 = this.getCropPercent(), r24 = {
      width: (s18.x2 - s18.x1) * i27.width,
      height: (s18.y2 - s18.y1) * i27.height
    }, a22 = N14.getBoundingBoxDims(
      r24,
      rt9(this.rotation)
    ), p26 = N14.fitImageInsideBox(a22, {
      width: t19.width,
      height: t19.height
    }).width / a22.width;
    this.container.style.width = `${r24.width * p26}px`, this.container.style.height = `${r24.height * p26}px`;
  }
  drawImage() {
    const t19 = this.getCanvasCtx(), e11 = this.getConfig().image, { loaded: i27, image: o12, width: s18, height: r24 } = b23(this, v23).getImage(e11);
    if (!i27)
      return;
    const { clientWidth: a22, clientHeight: p26 } = this.canvas, y33 = a22 * window.devicePixelRatio, c27 = p26 * window.devicePixelRatio;
    this.canvas.width = y33, this.canvas.height = c27;
    const m33 = this.getCropPercent();
    t19.drawImage(
      o12,
      m33.x1 * s18,
      m33.y1 * r24,
      (m33.x2 - m33.x1) * s18,
      (m33.y2 - m33.y1) * r24,
      0,
      0,
      y33,
      c27
    );
  }
  drawFieldRect() {
    const t19 = this.getCanvasCtx(), { x: e11, y: i27, width: o12, height: s18 } = this.getFieldRectPx();
    t19.rect(e11, i27, o12, s18), t19.lineWidth = 2, t19.strokeStyle = "yellow", t19.stroke();
  }
  drawGrid() {
    const t19 = this.getCanvasCtx(), { image: e11, size: i27 } = this.getConfig(), { loaded: o12 } = b23(this, v23).getImage(e11);
    if (!(!o12 || !this.showGrid || this.gridSize <= 0)) {
      t19.lineWidth = 1, t19.strokeStyle = "gray";
      for (let s18 = 0; s18 <= i27[0]; s18 += this.gridSize)
        t19.beginPath(), t19.moveTo(this.xToPx(s18), this.yToPx(0)), t19.lineTo(this.xToPx(s18), this.yToPx(i27[1])), t19.stroke();
      for (let s18 = 0; s18 <= i27[1]; s18 += this.gridSize)
        t19.beginPath(), t19.moveTo(this.xToPx(0), this.yToPx(s18)), t19.lineTo(this.xToPx(i27[0]), this.yToPx(s18)), t19.stroke();
    }
  }
  drawChildren() {
    const t19 = {
      canvas: this.getCanvasCtx(),
      getFieldRectPx: () => this.getFieldRectPx(),
      unit: this.unit,
      rotationUnit: this.rotationUnit,
      xToPx: (e11, i27) => this.xToPx(e11, i27),
      yToPx: (e11, i27) => this.yToPx(e11, i27),
      lengthToPx: (e11, i27) => this.lengthToPx(e11, i27),
      origin: this.origin
    };
    [...this.children].flatMap((e11) => e11.tagName === "SLOT" ? e11.assignedElements() : e11).forEach((e11) => {
      var i27;
      const o12 = this.getCanvasCtx();
      o12.save(), o12.beginPath();
      const s18 = e11;
      (i27 = s18.draw) == null || i27.call(s18, t19), o12.restore();
    });
  }
  drawField() {
    this.setContainerSize(), this.drawImage(), this.drawFieldRect(), this.drawGrid(), this.drawChildren(), window.requestAnimationFrame(() => {
      this.drawField();
    });
  }
  firstUpdated() {
    this.drawField();
  }
  render() {
    return Ht`
      <div class="outside-container">
        <div class="container" style="transform: rotate(${-this.rotation}deg)">
          <canvas @click=${et10(this, U16, X10)}></canvas>
        </div>
      </div>
    `;
  }
};
v23 = /* @__PURE__ */ new WeakMap(), U16 = /* @__PURE__ */ new WeakSet(), X10 = function(n33) {
  const t19 = this.pxToX(n33.offsetX), e11 = this.pxToY(n33.offsetY);
  this.dispatchEvent(
    new CustomEvent("fieldClick", {
      detail: {
        feet: {
          x: n23(t19, this.unit, "ft"),
          y: n23(e11, this.unit, "ft")
        },
        meters: {
          x: n23(t19, this.unit, "m"),
          y: n23(e11, this.unit, "m")
        }
      },
      bubbles: true,
      composed: true
    })
  );
}, V12.styles = Mt2`
    :host {
      display: inline-flex;
      position: relative;
      width: 500px;
      height: 300px;
      justify-content: center;
      align-items: center;
    }

    .container {
    }

    canvas {
      width: 100%;
      height: 100%;
    }
  `;
var l16 = V12;
f26([
  Rt({ type: String })
], l16.prototype, "game");
f26([
  Rt({ type: Number, attribute: "crop-top" })
], l16.prototype, "cropTop");
f26([
  Rt({ type: Number, attribute: "crop-bottom" })
], l16.prototype, "cropBottom");
f26([
  Rt({ type: Number, attribute: "crop-left" })
], l16.prototype, "cropLeft");
f26([
  Rt({ type: Number, attribute: "crop-right" })
], l16.prototype, "cropRight");
f26([
  Rt({ type: String, attribute: "crop-type" })
], l16.prototype, "cropType");
f26([
  Rt({ type: String })
], l16.prototype, "unit");
f26([
  Rt({ type: String, attribute: "rotation-unit" })
], l16.prototype, "rotationUnit");
f26([
  Rt({ type: Number })
], l16.prototype, "rotation");
f26([
  Rt({ type: Boolean, attribute: "show-grid" })
], l16.prototype, "showGrid");
f26([
  Rt({ type: Number, attribute: "grid-size" })
], l16.prototype, "gridSize");
f26([
  Rt({ type: String })
], l16.prototype, "origin");
f26([
  a("canvas", true)
], l16.prototype, "canvas");
f26([
  a(".container", true)
], l16.prototype, "container");
customElements.get("frc-field") || customElements.define("frc-field", l16);
var ht11 = class {
  constructor(t19, e11) {
    this.sourceKey = "", this.sourceProvider = "", this.store = t19, this.onUpdate = e11;
  }
  setSource(t19, e11) {
    var i27;
    this.sourceKey = t19, this.sourceProvider = e11, this.addFieldObjectsFromSources(), (i27 = this.unsubscriber) == null || i27.call(this);
    const o12 = ot9(() => {
      this.addFieldObjectsFromSources();
    }, 1e3 / 60);
    this.unsubscriber = this.store.subscribe(e11, t19, o12, true);
  }
  addFieldObjectsFromSources() {
    var t19;
    const e11 = this.store.getSource(this.sourceProvider, this.sourceKey);
    if (!e11 || ((t19 = e11.getChildren()[".type"]) == null ? void 0 : t19.getValue()) !== "Field2d")
      return;
    const i27 = [];
    Object.entries(e11.getChildren()).forEach(([o12, s18]) => {
      if (o12.startsWith(".") || o12 === "XModules")
        return;
      const r24 = s18.hasChildren() ? s18.getChildren().pose.getValue() : s18.getValue(), a22 = it10(r24);
      i27.push({
        type: a22.length === 1 ? "robot" : "trajectory",
        poses: a22,
        sourceKey: s18.getKey(),
        sourceProvider: this.sourceProvider
      }), this.onUpdate(i27);
    });
  }
};
var nt12 = Object.defineProperty;
var d22 = (n33, t19, e11, i27) => {
  for (var o12 = void 0, s18 = n33.length - 1, r24; s18 >= 0; s18--)
    (r24 = n33[s18]) && (o12 = r24(t19, e11, o12) || o12);
  return o12 && nt12(t19, e11, o12), o12;
};
var z16;
var Y9 = class extends x {
  constructor() {
    super(...arguments), L8(this, z16), this.sourceProvider = "", this.sourceKey = "", this.game = O14[0].game, this.cropTop = 0, this.cropBottom = 100, this.cropLeft = 0, this.cropRight = 100, this.cropType = "percent", this.unit = e8, this.rotationUnit = "deg", this.rotation = 0, this.showGrid = false, this.gridSize = 1, this.origin = "blue", this.fieldObjects = [];
  }
  firstUpdated() {
    this.store && (this.fieldObjectManager = new ht11(
      this.store,
      (t19) => {
        this.fieldObjects = t19;
      }
    )), H13(this, z16, new MutationObserver(() => {
      this.requestUpdate();
    })), b23(this, z16).observe(this, {
      attributes: true,
      childList: true,
      subtree: true,
      attributeFilter: ["source-key", "source-provider"]
    });
  }
  disconnectedCallback() {
    super.disconnectedCallback(), b23(this, z16).disconnect();
  }
  updated(t19) {
    (t19.has("sourceKey") || t19.has("sourceProvider")) && this.fieldObjectManager.setSource(this.sourceKey, this.sourceProvider);
  }
  render() {
    var t19;
    const e11 = (((t19 = this.slottedFieldObjects) == null ? void 0 : t19.assignedElements()) ?? []).filter((i27) => i27.tagName === "FRC-FIELD-ROBOT" || i27.tagName === "FRC-FIELD-PATH").map((i27) => ({
      type: i27.tagName === "FRC-FIELD-ROBOT" ? "robot" : "trajectory",
      sourceKey: i27.getAttribute("source-key"),
      sourceProvider: i27.getAttribute("source-provider")
    }));
    return Ht`
      <frc-field
        game=${this.game}
        unit=${this.unit}
        rotation-unit=${this.rotationUnit}
        rotation=${this.rotation}
        ?show-grid=${this.showGrid}
        grid-size=${this.gridSize}
        origin=${this.origin}
        crop-top=${this.cropTop / 100}
        crop-bottom=${this.cropBottom / 100}
        crop-left=${this.cropLeft / 100}
        crop-right=${this.cropRight / 100}
        crop-type=${this.cropType}
      >
        ${this.fieldObjects.filter((i27) => !e11.find(
      ({ sourceKey: o12, sourceProvider: s18, type: r24 }) => i27.type === r24 && i27.sourceKey === o12 && i27.sourceProvider === s18
    )).map((i27) => i27.type === "robot" ? Ht`<frc-field-robot
                .pose=${i27.poses[0]}
              ></frc-field-robot>` : Ht`<frc-field-path
              .poses=${i27.poses}
            ></frc-field-path>`)}
        <slot></slot>
      </frc-field>
    `;
  }
};
z16 = /* @__PURE__ */ new WeakMap(), Y9.styles = Mt2`
    :host {
      display: inline-block;
      position: relative;
      width: 500px;
      height: 300px;
    }

    frc-field {
      width: 100%;
      height: 100%;
    }
  `;
var g21 = Y9;
d22([
  Rt({ type: Object, attribute: false })
], g21.prototype, "provider");
d22([
  Rt({ type: Object, attribute: false })
], g21.prototype, "store");
d22([
  Rt({ type: String, attribute: "source-provider" })
], g21.prototype, "sourceProvider");
d22([
  Rt({ type: String, attribute: "source-key" })
], g21.prototype, "sourceKey");
d22([
  Rt({ type: String })
], g21.prototype, "game");
d22([
  Rt({ type: Number, attribute: "crop-top" })
], g21.prototype, "cropTop");
d22([
  Rt({ type: Number, attribute: "crop-bottom" })
], g21.prototype, "cropBottom");
d22([
  Rt({ type: Number, attribute: "crop-left" })
], g21.prototype, "cropLeft");
d22([
  Rt({ type: Number, attribute: "crop-right" })
], g21.prototype, "cropRight");
d22([
  Rt({ type: String, attribute: "crop-type" })
], g21.prototype, "cropType");
d22([
  Rt({ type: String })
], g21.prototype, "unit");
d22([
  Rt({ type: String, attribute: "rotation-unit" })
], g21.prototype, "rotationUnit");
d22([
  Rt({ type: Number })
], g21.prototype, "rotation");
d22([
  Rt({ type: Boolean, attribute: "show-grid" })
], g21.prototype, "showGrid");
d22([
  Rt({ type: Number, attribute: "grid-size" })
], g21.prototype, "gridSize");
d22([
  Rt({ type: String })
], g21.prototype, "origin");
d22([
  n2()
], g21.prototype, "fieldObjects");
d22([
  a("slot", true)
], g21.prototype, "slottedFieldObjects");
customElements.get("frc-field-wrapper") || customElements.define("frc-field-wrapper", g21);
var yt11 = xt({
  tagName: "frc-field",
  elementClass: l16,
  react: import_react12.default
});
var bt7 = xt({
  tagName: "frc-field-robot",
  elementClass: w20,
  react: import_react12.default
});
var wt7 = xt({
  tagName: "frc-field-path",
  elementClass: x21,
  react: import_react12.default
});

// node_modules/@frc-web-components/react/dist/components/Field3d.es.js
var import_react13 = __toESM(require_react(), 1);
var th2 = (s18) => {
  throw TypeError(s18);
};
var Lo2 = (s18, e11, t19) => e11.has(s18) || th2("Cannot " + t19);
var ft11 = (s18, e11, t19) => (Lo2(s18, e11, "read from private field"), t19 ? t19.call(s18) : e11.get(s18));
var Ht7 = (s18, e11, t19) => e11.has(s18) ? th2("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(s18) : e11.set(s18, t19);
var ei6 = (s18, e11, t19, i27) => (Lo2(s18, e11, "write to private field"), i27 ? i27.call(s18, t19) : e11.set(s18, t19), t19);
var Bi3 = (s18, e11, t19) => (Lo2(s18, e11, "access private method"), t19);
var Co2 = "151";
var Br5 = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };
var Fr5 = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };
var su2 = 0;
var el2 = 1;
var au2 = 2;
var ih2 = 1;
var ou2 = 2;
var Xn5 = 3;
var Ei5 = 0;
var ti6 = 1;
var ui6 = 2;
var tr5 = 0;
var un4 = 1;
var tl2 = 2;
var il2 = 3;
var rl2 = 4;
var lu2 = 5;
var on4 = 100;
var cu2 = 101;
var hu2 = 102;
var nl2 = 103;
var sl2 = 104;
var uu2 = 200;
var du2 = 201;
var pu2 = 202;
var mu2 = 203;
var rh2 = 204;
var nh2 = 205;
var fu2 = 206;
var gu2 = 207;
var _u2 = 208;
var vu2 = 209;
var yu2 = 210;
var xu2 = 0;
var bu2 = 1;
var Mu2 = 2;
var ho2 = 3;
var wu2 = 4;
var Su2 = 5;
var Tu2 = 6;
var Eu2 = 7;
var ra2 = 0;
var Au2 = 1;
var Lu2 = 2;
var Fi4 = 0;
var Cu2 = 1;
var Ru2 = 2;
var Nu2 = 3;
var Pu2 = 4;
var Iu2 = 5;
var sh2 = 300;
var yn5 = 301;
var xn5 = 302;
var uo2 = 303;
var po2 = 304;
var na2 = 306;
var Ti4 = 1e3;
var Zt6 = 1001;
var ta2 = 1002;
var zt6 = 1003;
var mo2 = 1004;
var Zs2 = 1005;
var Vt6 = 1006;
var ah2 = 1007;
var Hi3 = 1008;
var xr4 = 1009;
var Du2 = 1010;
var ku2 = 1011;
var oh2 = 1012;
var Uu2 = 1013;
var pr4 = 1014;
var er5 = 1015;
var $n5 = 1016;
var Ou2 = 1017;
var zu2 = 1018;
var dn4 = 1020;
var Bu2 = 1021;
var di6 = 1023;
var Fu2 = 1024;
var Hu2 = 1025;
var vr5 = 1026;
var bn5 = 1027;
var Vu2 = 1028;
var Gu2 = 1029;
var Wu2 = 1030;
var ju2 = 1031;
var Xu2 = 1033;
var Ma2 = 33776;
var wa2 = 33777;
var Sa2 = 33778;
var Ta2 = 33779;
var al2 = 35840;
var ol2 = 35841;
var ll2 = 35842;
var cl2 = 35843;
var qu2 = 36196;
var hl2 = 37492;
var ul2 = 37496;
var dl2 = 37808;
var pl2 = 37809;
var ml2 = 37810;
var fl2 = 37811;
var gl2 = 37812;
var _l2 = 37813;
var vl2 = 37814;
var yl2 = 37815;
var xl2 = 37816;
var bl2 = 37817;
var Ml2 = 37818;
var wl2 = 37819;
var Sl2 = 37820;
var Tl2 = 37821;
var Ea2 = 36492;
var Yu2 = 36283;
var El2 = 36284;
var Al2 = 36285;
var Ll2 = 36286;
var Qn5 = 2300;
var Mn5 = 2301;
var Aa = 2302;
var Cl2 = 2400;
var Rl2 = 2401;
var Nl2 = 2402;
var Zu = 2500;
var Ju = 0;
var lh2 = 1;
var fo2 = 2;
var br5 = 3e3;
var rt10 = 3001;
var Ku2 = 3200;
var $u = 3201;
var sa2 = 0;
var Qu = 1;
var yi6 = "srgb";
var aa2 = "srgb-linear";
var ch2 = "display-p3";
var La2 = 7680;
var ed2 = 519;
var go2 = 35044;
var Pl2 = "300 es";
var _o2 = 1035;
var Ar5 = class {
  addEventListener(e11, t19) {
    this._listeners === void 0 && (this._listeners = {});
    const i27 = this._listeners;
    i27[e11] === void 0 && (i27[e11] = []), i27[e11].indexOf(t19) === -1 && i27[e11].push(t19);
  }
  hasEventListener(e11, t19) {
    if (this._listeners === void 0)
      return false;
    const i27 = this._listeners;
    return i27[e11] !== void 0 && i27[e11].indexOf(t19) !== -1;
  }
  removeEventListener(e11, t19) {
    if (this._listeners === void 0)
      return;
    const i27 = this._listeners[e11];
    if (i27 !== void 0) {
      const r24 = i27.indexOf(t19);
      r24 !== -1 && i27.splice(r24, 1);
    }
  }
  dispatchEvent(e11) {
    if (this._listeners === void 0)
      return;
    const t19 = this._listeners[e11.type];
    if (t19 !== void 0) {
      e11.target = this;
      const i27 = t19.slice(0);
      for (let r24 = 0, n33 = i27.length; r24 < n33; r24++)
        i27[r24].call(this, e11);
      e11.target = null;
    }
  }
};
var qt5 = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "0a", "0b", "0c", "0d", "0e", "0f", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "1a", "1b", "1c", "1d", "1e", "1f", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "2a", "2b", "2c", "2d", "2e", "2f", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "3a", "3b", "3c", "3d", "3e", "3f", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "4a", "4b", "4c", "4d", "4e", "4f", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "5a", "5b", "5c", "5d", "5e", "5f", "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "6a", "6b", "6c", "6d", "6e", "6f", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "7a", "7b", "7c", "7d", "7e", "7f", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "8a", "8b", "8c", "8d", "8e", "8f", "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "9a", "9b", "9c", "9d", "9e", "9f", "a0", "a1", "a2", "a3", "a4", "a5", "a6", "a7", "a8", "a9", "aa", "ab", "ac", "ad", "ae", "af", "b0", "b1", "b2", "b3", "b4", "b5", "b6", "b7", "b8", "b9", "ba", "bb", "bc", "bd", "be", "bf", "c0", "c1", "c2", "c3", "c4", "c5", "c6", "c7", "c8", "c9", "ca", "cb", "cc", "cd", "ce", "cf", "d0", "d1", "d2", "d3", "d4", "d5", "d6", "d7", "d8", "d9", "da", "db", "dc", "dd", "de", "df", "e0", "e1", "e2", "e3", "e4", "e5", "e6", "e7", "e8", "e9", "ea", "eb", "ec", "ed", "ee", "ef", "f0", "f1", "f2", "f3", "f4", "f5", "f6", "f7", "f8", "f9", "fa", "fb", "fc", "fd", "fe", "ff"];
var Il2 = 1234567;
var pn5 = Math.PI / 180;
var wn5 = 180 / Math.PI;
function bi6() {
  const s18 = Math.random() * 4294967295 | 0, e11 = Math.random() * 4294967295 | 0, t19 = Math.random() * 4294967295 | 0, i27 = Math.random() * 4294967295 | 0;
  return (qt5[s18 & 255] + qt5[s18 >> 8 & 255] + qt5[s18 >> 16 & 255] + qt5[s18 >> 24 & 255] + "-" + qt5[e11 & 255] + qt5[e11 >> 8 & 255] + "-" + qt5[e11 >> 16 & 15 | 64] + qt5[e11 >> 24 & 255] + "-" + qt5[t19 & 63 | 128] + qt5[t19 >> 8 & 255] + "-" + qt5[t19 >> 16 & 255] + qt5[t19 >> 24 & 255] + qt5[i27 & 255] + qt5[i27 >> 8 & 255] + qt5[i27 >> 16 & 255] + qt5[i27 >> 24 & 255]).toLowerCase();
}
function Gt6(s18, e11, t19) {
  return Math.max(e11, Math.min(t19, s18));
}
function Ro2(s18, e11) {
  return (s18 % e11 + e11) % e11;
}
function td2(s18, e11, t19, i27, r24) {
  return i27 + (s18 - e11) * (r24 - i27) / (t19 - e11);
}
function id2(s18, e11, t19) {
  return s18 !== e11 ? (t19 - s18) / (e11 - s18) : 0;
}
function Zn5(s18, e11, t19) {
  return (1 - t19) * s18 + t19 * e11;
}
function rd2(s18, e11, t19, i27) {
  return Zn5(s18, e11, 1 - Math.exp(-t19 * i27));
}
function nd2(s18, e11 = 1) {
  return e11 - Math.abs(Ro2(s18, e11 * 2) - e11);
}
function sd2(s18, e11, t19) {
  return s18 <= e11 ? 0 : s18 >= t19 ? 1 : (s18 = (s18 - e11) / (t19 - e11), s18 * s18 * (3 - 2 * s18));
}
function ad2(s18, e11, t19) {
  return s18 <= e11 ? 0 : s18 >= t19 ? 1 : (s18 = (s18 - e11) / (t19 - e11), s18 * s18 * s18 * (s18 * (s18 * 6 - 15) + 10));
}
function od2(s18, e11) {
  return s18 + Math.floor(Math.random() * (e11 - s18 + 1));
}
function ld2(s18, e11) {
  return s18 + Math.random() * (e11 - s18);
}
function cd2(s18) {
  return s18 * (0.5 - Math.random());
}
function hd2(s18) {
  s18 !== void 0 && (Il2 = s18);
  let e11 = Il2 += 1831565813;
  return e11 = Math.imul(e11 ^ e11 >>> 15, e11 | 1), e11 ^= e11 + Math.imul(e11 ^ e11 >>> 7, e11 | 61), ((e11 ^ e11 >>> 14) >>> 0) / 4294967296;
}
function ud2(s18) {
  return s18 * pn5;
}
function dd2(s18) {
  return s18 * wn5;
}
function vo(s18) {
  return (s18 & s18 - 1) === 0 && s18 !== 0;
}
function hh2(s18) {
  return Math.pow(2, Math.ceil(Math.log(s18) / Math.LN2));
}
function uh2(s18) {
  return Math.pow(2, Math.floor(Math.log(s18) / Math.LN2));
}
function pd2(s18, e11, t19, i27, r24) {
  const n33 = Math.cos, a22 = Math.sin, o12 = n33(t19 / 2), l25 = a22(t19 / 2), c27 = n33((e11 + i27) / 2), h26 = a22((e11 + i27) / 2), u35 = n33((e11 - i27) / 2), d34 = a22((e11 - i27) / 2), m33 = n33((i27 - e11) / 2), _19 = a22((i27 - e11) / 2);
  switch (r24) {
    case "XYX":
      s18.set(o12 * h26, l25 * u35, l25 * d34, o12 * c27);
      break;
    case "YZY":
      s18.set(l25 * d34, o12 * h26, l25 * u35, o12 * c27);
      break;
    case "ZXZ":
      s18.set(l25 * u35, l25 * d34, o12 * h26, o12 * c27);
      break;
    case "XZX":
      s18.set(o12 * h26, l25 * _19, l25 * m33, o12 * c27);
      break;
    case "YXY":
      s18.set(l25 * m33, o12 * h26, l25 * _19, o12 * c27);
      break;
    case "ZYZ":
      s18.set(l25 * _19, l25 * m33, o12 * h26, o12 * c27);
      break;
    default:
      console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: " + r24);
  }
}
function zi4(s18, e11) {
  switch (e11.constructor) {
    case Float32Array:
      return s18;
    case Uint16Array:
      return s18 / 65535;
    case Uint8Array:
      return s18 / 255;
    case Int16Array:
      return Math.max(s18 / 32767, -1);
    case Int8Array:
      return Math.max(s18 / 127, -1);
    default:
      throw new Error("Invalid component type.");
  }
}
function mt10(s18, e11) {
  switch (e11.constructor) {
    case Float32Array:
      return s18;
    case Uint16Array:
      return Math.round(s18 * 65535);
    case Uint8Array:
      return Math.round(s18 * 255);
    case Int16Array:
      return Math.round(s18 * 32767);
    case Int8Array:
      return Math.round(s18 * 127);
    default:
      throw new Error("Invalid component type.");
  }
}
var ln4 = {
  DEG2RAD: pn5,
  RAD2DEG: wn5,
  generateUUID: bi6,
  clamp: Gt6,
  euclideanModulo: Ro2,
  mapLinear: td2,
  inverseLerp: id2,
  lerp: Zn5,
  damp: rd2,
  pingpong: nd2,
  smoothstep: sd2,
  smootherstep: ad2,
  randInt: od2,
  randFloat: ld2,
  randFloatSpread: cd2,
  seededRandom: hd2,
  degToRad: ud2,
  radToDeg: dd2,
  isPowerOfTwo: vo,
  ceilPowerOfTwo: hh2,
  floorPowerOfTwo: uh2,
  setQuaternionFromProperEuler: pd2,
  normalize: mt10,
  denormalize: zi4
};
var We7 = class _We {
  constructor(e11 = 0, t19 = 0) {
    _We.prototype.isVector2 = true, this.x = e11, this.y = t19;
  }
  get width() {
    return this.x;
  }
  set width(e11) {
    this.x = e11;
  }
  get height() {
    return this.y;
  }
  set height(e11) {
    this.y = e11;
  }
  set(e11, t19) {
    return this.x = e11, this.y = t19, this;
  }
  setScalar(e11) {
    return this.x = e11, this.y = e11, this;
  }
  setX(e11) {
    return this.x = e11, this;
  }
  setY(e11) {
    return this.y = e11, this;
  }
  setComponent(e11, t19) {
    switch (e11) {
      case 0:
        this.x = t19;
        break;
      case 1:
        this.y = t19;
        break;
      default:
        throw new Error("index is out of range: " + e11);
    }
    return this;
  }
  getComponent(e11) {
    switch (e11) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      default:
        throw new Error("index is out of range: " + e11);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y);
  }
  copy(e11) {
    return this.x = e11.x, this.y = e11.y, this;
  }
  add(e11) {
    return this.x += e11.x, this.y += e11.y, this;
  }
  addScalar(e11) {
    return this.x += e11, this.y += e11, this;
  }
  addVectors(e11, t19) {
    return this.x = e11.x + t19.x, this.y = e11.y + t19.y, this;
  }
  addScaledVector(e11, t19) {
    return this.x += e11.x * t19, this.y += e11.y * t19, this;
  }
  sub(e11) {
    return this.x -= e11.x, this.y -= e11.y, this;
  }
  subScalar(e11) {
    return this.x -= e11, this.y -= e11, this;
  }
  subVectors(e11, t19) {
    return this.x = e11.x - t19.x, this.y = e11.y - t19.y, this;
  }
  multiply(e11) {
    return this.x *= e11.x, this.y *= e11.y, this;
  }
  multiplyScalar(e11) {
    return this.x *= e11, this.y *= e11, this;
  }
  divide(e11) {
    return this.x /= e11.x, this.y /= e11.y, this;
  }
  divideScalar(e11) {
    return this.multiplyScalar(1 / e11);
  }
  applyMatrix3(e11) {
    const t19 = this.x, i27 = this.y, r24 = e11.elements;
    return this.x = r24[0] * t19 + r24[3] * i27 + r24[6], this.y = r24[1] * t19 + r24[4] * i27 + r24[7], this;
  }
  min(e11) {
    return this.x = Math.min(this.x, e11.x), this.y = Math.min(this.y, e11.y), this;
  }
  max(e11) {
    return this.x = Math.max(this.x, e11.x), this.y = Math.max(this.y, e11.y), this;
  }
  clamp(e11, t19) {
    return this.x = Math.max(e11.x, Math.min(t19.x, this.x)), this.y = Math.max(e11.y, Math.min(t19.y, this.y)), this;
  }
  clampScalar(e11, t19) {
    return this.x = Math.max(e11, Math.min(t19, this.x)), this.y = Math.max(e11, Math.min(t19, this.y)), this;
  }
  clampLength(e11, t19) {
    const i27 = this.length();
    return this.divideScalar(i27 || 1).multiplyScalar(Math.max(e11, Math.min(t19, i27)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this;
  }
  roundToZero() {
    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this;
  }
  dot(e11) {
    return this.x * e11.x + this.y * e11.y;
  }
  cross(e11) {
    return this.x * e11.y - this.y * e11.x;
  }
  lengthSq() {
    return this.x * this.x + this.y * this.y;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  angle() {
    return Math.atan2(-this.y, -this.x) + Math.PI;
  }
  angleTo(e11) {
    const t19 = Math.sqrt(this.lengthSq() * e11.lengthSq());
    if (t19 === 0)
      return Math.PI / 2;
    const i27 = this.dot(e11) / t19;
    return Math.acos(Gt6(i27, -1, 1));
  }
  distanceTo(e11) {
    return Math.sqrt(this.distanceToSquared(e11));
  }
  distanceToSquared(e11) {
    const t19 = this.x - e11.x, i27 = this.y - e11.y;
    return t19 * t19 + i27 * i27;
  }
  manhattanDistanceTo(e11) {
    return Math.abs(this.x - e11.x) + Math.abs(this.y - e11.y);
  }
  setLength(e11) {
    return this.normalize().multiplyScalar(e11);
  }
  lerp(e11, t19) {
    return this.x += (e11.x - this.x) * t19, this.y += (e11.y - this.y) * t19, this;
  }
  lerpVectors(e11, t19, i27) {
    return this.x = e11.x + (t19.x - e11.x) * i27, this.y = e11.y + (t19.y - e11.y) * i27, this;
  }
  equals(e11) {
    return e11.x === this.x && e11.y === this.y;
  }
  fromArray(e11, t19 = 0) {
    return this.x = e11[t19], this.y = e11[t19 + 1], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.x, e11[t19 + 1] = this.y, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.x = e11.getX(t19), this.y = e11.getY(t19), this;
  }
  rotateAround(e11, t19) {
    const i27 = Math.cos(t19), r24 = Math.sin(t19), n33 = this.x - e11.x, a22 = this.y - e11.y;
    return this.x = n33 * i27 - a22 * r24 + e11.x, this.y = n33 * r24 + a22 * i27 + e11.y, this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y;
  }
};
var Ke5 = class _Ke {
  constructor() {
    _Ke.prototype.isMatrix3 = true, this.elements = [
      1,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      1
    ];
  }
  set(e11, t19, i27, r24, n33, a22, o12, l25, c27) {
    const h26 = this.elements;
    return h26[0] = e11, h26[1] = r24, h26[2] = o12, h26[3] = t19, h26[4] = n33, h26[5] = l25, h26[6] = i27, h26[7] = a22, h26[8] = c27, this;
  }
  identity() {
    return this.set(
      1,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      1
    ), this;
  }
  copy(e11) {
    const t19 = this.elements, i27 = e11.elements;
    return t19[0] = i27[0], t19[1] = i27[1], t19[2] = i27[2], t19[3] = i27[3], t19[4] = i27[4], t19[5] = i27[5], t19[6] = i27[6], t19[7] = i27[7], t19[8] = i27[8], this;
  }
  extractBasis(e11, t19, i27) {
    return e11.setFromMatrix3Column(this, 0), t19.setFromMatrix3Column(this, 1), i27.setFromMatrix3Column(this, 2), this;
  }
  setFromMatrix4(e11) {
    const t19 = e11.elements;
    return this.set(
      t19[0],
      t19[4],
      t19[8],
      t19[1],
      t19[5],
      t19[9],
      t19[2],
      t19[6],
      t19[10]
    ), this;
  }
  multiply(e11) {
    return this.multiplyMatrices(this, e11);
  }
  premultiply(e11) {
    return this.multiplyMatrices(e11, this);
  }
  multiplyMatrices(e11, t19) {
    const i27 = e11.elements, r24 = t19.elements, n33 = this.elements, a22 = i27[0], o12 = i27[3], l25 = i27[6], c27 = i27[1], h26 = i27[4], u35 = i27[7], d34 = i27[2], m33 = i27[5], _19 = i27[8], y33 = r24[0], f39 = r24[3], p26 = r24[6], A17 = r24[1], M12 = r24[4], E24 = r24[7], w29 = r24[2], I16 = r24[5], D17 = r24[8];
    return n33[0] = a22 * y33 + o12 * A17 + l25 * w29, n33[3] = a22 * f39 + o12 * M12 + l25 * I16, n33[6] = a22 * p26 + o12 * E24 + l25 * D17, n33[1] = c27 * y33 + h26 * A17 + u35 * w29, n33[4] = c27 * f39 + h26 * M12 + u35 * I16, n33[7] = c27 * p26 + h26 * E24 + u35 * D17, n33[2] = d34 * y33 + m33 * A17 + _19 * w29, n33[5] = d34 * f39 + m33 * M12 + _19 * I16, n33[8] = d34 * p26 + m33 * E24 + _19 * D17, this;
  }
  multiplyScalar(e11) {
    const t19 = this.elements;
    return t19[0] *= e11, t19[3] *= e11, t19[6] *= e11, t19[1] *= e11, t19[4] *= e11, t19[7] *= e11, t19[2] *= e11, t19[5] *= e11, t19[8] *= e11, this;
  }
  determinant() {
    const e11 = this.elements, t19 = e11[0], i27 = e11[1], r24 = e11[2], n33 = e11[3], a22 = e11[4], o12 = e11[5], l25 = e11[6], c27 = e11[7], h26 = e11[8];
    return t19 * a22 * h26 - t19 * o12 * c27 - i27 * n33 * h26 + i27 * o12 * l25 + r24 * n33 * c27 - r24 * a22 * l25;
  }
  invert() {
    const e11 = this.elements, t19 = e11[0], i27 = e11[1], r24 = e11[2], n33 = e11[3], a22 = e11[4], o12 = e11[5], l25 = e11[6], c27 = e11[7], h26 = e11[8], u35 = h26 * a22 - o12 * c27, d34 = o12 * l25 - h26 * n33, m33 = c27 * n33 - a22 * l25, _19 = t19 * u35 + i27 * d34 + r24 * m33;
    if (_19 === 0)
      return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);
    const y33 = 1 / _19;
    return e11[0] = u35 * y33, e11[1] = (r24 * c27 - h26 * i27) * y33, e11[2] = (o12 * i27 - r24 * a22) * y33, e11[3] = d34 * y33, e11[4] = (h26 * t19 - r24 * l25) * y33, e11[5] = (r24 * n33 - o12 * t19) * y33, e11[6] = m33 * y33, e11[7] = (i27 * l25 - c27 * t19) * y33, e11[8] = (a22 * t19 - i27 * n33) * y33, this;
  }
  transpose() {
    let e11;
    const t19 = this.elements;
    return e11 = t19[1], t19[1] = t19[3], t19[3] = e11, e11 = t19[2], t19[2] = t19[6], t19[6] = e11, e11 = t19[5], t19[5] = t19[7], t19[7] = e11, this;
  }
  getNormalMatrix(e11) {
    return this.setFromMatrix4(e11).invert().transpose();
  }
  transposeIntoArray(e11) {
    const t19 = this.elements;
    return e11[0] = t19[0], e11[1] = t19[3], e11[2] = t19[6], e11[3] = t19[1], e11[4] = t19[4], e11[5] = t19[7], e11[6] = t19[2], e11[7] = t19[5], e11[8] = t19[8], this;
  }
  setUvTransform(e11, t19, i27, r24, n33, a22, o12) {
    const l25 = Math.cos(n33), c27 = Math.sin(n33);
    return this.set(
      i27 * l25,
      i27 * c27,
      -i27 * (l25 * a22 + c27 * o12) + a22 + e11,
      -r24 * c27,
      r24 * l25,
      -r24 * (-c27 * a22 + l25 * o12) + o12 + t19,
      0,
      0,
      1
    ), this;
  }
  //
  scale(e11, t19) {
    return this.premultiply(Ca2.makeScale(e11, t19)), this;
  }
  rotate(e11) {
    return this.premultiply(Ca2.makeRotation(-e11)), this;
  }
  translate(e11, t19) {
    return this.premultiply(Ca2.makeTranslation(e11, t19)), this;
  }
  // for 2D Transforms
  makeTranslation(e11, t19) {
    return this.set(
      1,
      0,
      e11,
      0,
      1,
      t19,
      0,
      0,
      1
    ), this;
  }
  makeRotation(e11) {
    const t19 = Math.cos(e11), i27 = Math.sin(e11);
    return this.set(
      t19,
      -i27,
      0,
      i27,
      t19,
      0,
      0,
      0,
      1
    ), this;
  }
  makeScale(e11, t19) {
    return this.set(
      e11,
      0,
      0,
      0,
      t19,
      0,
      0,
      0,
      1
    ), this;
  }
  //
  equals(e11) {
    const t19 = this.elements, i27 = e11.elements;
    for (let r24 = 0; r24 < 9; r24++)
      if (t19[r24] !== i27[r24])
        return false;
    return true;
  }
  fromArray(e11, t19 = 0) {
    for (let i27 = 0; i27 < 9; i27++)
      this.elements[i27] = e11[i27 + t19];
    return this;
  }
  toArray(e11 = [], t19 = 0) {
    const i27 = this.elements;
    return e11[t19] = i27[0], e11[t19 + 1] = i27[1], e11[t19 + 2] = i27[2], e11[t19 + 3] = i27[3], e11[t19 + 4] = i27[4], e11[t19 + 5] = i27[5], e11[t19 + 6] = i27[6], e11[t19 + 7] = i27[7], e11[t19 + 8] = i27[8], e11;
  }
  clone() {
    return new this.constructor().fromArray(this.elements);
  }
};
var Ca2 = new Ke5();
function dh2(s18) {
  for (let e11 = s18.length - 1; e11 >= 0; --e11)
    if (s18[e11] >= 65535)
      return true;
  return false;
}
function es3(s18) {
  return document.createElementNS("http://www.w3.org/1999/xhtml", s18);
}
function mn4(s18) {
  return s18 < 0.04045 ? s18 * 0.0773993808 : Math.pow(s18 * 0.9478672986 + 0.0521327014, 2.4);
}
function Ra2(s18) {
  return s18 < 31308e-7 ? s18 * 12.92 : 1.055 * Math.pow(s18, 0.41666) - 0.055;
}
var md2 = new Ke5().fromArray([
  0.8224621,
  0.0331941,
  0.0170827,
  0.177538,
  0.9668058,
  0.0723974,
  -1e-7,
  1e-7,
  0.9105199
]);
var fd2 = new Ke5().fromArray([
  1.2249401,
  -0.0420569,
  -0.0196376,
  -0.2249404,
  1.0420571,
  -0.0786361,
  1e-7,
  0,
  1.0982735
]);
function gd2(s18) {
  return s18.convertSRGBToLinear().applyMatrix3(fd2);
}
function _d2(s18) {
  return s18.applyMatrix3(md2).convertLinearToSRGB();
}
var vd2 = {
  [aa2]: (s18) => s18,
  [yi6]: (s18) => s18.convertSRGBToLinear(),
  [ch2]: gd2
};
var yd2 = {
  [aa2]: (s18) => s18,
  [yi6]: (s18) => s18.convertLinearToSRGB(),
  [ch2]: _d2
};
var ii6 = {
  enabled: false,
  get legacyMode() {
    return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."), !this.enabled;
  },
  set legacyMode(s18) {
    console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."), this.enabled = !s18;
  },
  get workingColorSpace() {
    return aa2;
  },
  set workingColorSpace(s18) {
    console.warn("THREE.ColorManagement: .workingColorSpace is readonly.");
  },
  convert: function(s18, e11, t19) {
    if (this.enabled === false || e11 === t19 || !e11 || !t19)
      return s18;
    const i27 = vd2[e11], r24 = yd2[t19];
    if (i27 === void 0 || r24 === void 0)
      throw new Error(`Unsupported color space conversion, "${e11}" to "${t19}".`);
    return r24(i27(s18));
  },
  fromWorkingColorSpace: function(s18, e11) {
    return this.convert(s18, this.workingColorSpace, e11);
  },
  toWorkingColorSpace: function(s18, e11) {
    return this.convert(s18, e11, this.workingColorSpace);
  }
};
var Hr5;
var ph2 = class {
  static getDataURL(e11) {
    if (/^data:/i.test(e11.src) || typeof HTMLCanvasElement > "u")
      return e11.src;
    let t19;
    if (e11 instanceof HTMLCanvasElement)
      t19 = e11;
    else {
      Hr5 === void 0 && (Hr5 = es3("canvas")), Hr5.width = e11.width, Hr5.height = e11.height;
      const i27 = Hr5.getContext("2d");
      e11 instanceof ImageData ? i27.putImageData(e11, 0, 0) : i27.drawImage(e11, 0, 0, e11.width, e11.height), t19 = Hr5;
    }
    return t19.width > 2048 || t19.height > 2048 ? (console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons", e11), t19.toDataURL("image/jpeg", 0.6)) : t19.toDataURL("image/png");
  }
  static sRGBToLinear(e11) {
    if (typeof HTMLImageElement < "u" && e11 instanceof HTMLImageElement || typeof HTMLCanvasElement < "u" && e11 instanceof HTMLCanvasElement || typeof ImageBitmap < "u" && e11 instanceof ImageBitmap) {
      const t19 = es3("canvas");
      t19.width = e11.width, t19.height = e11.height;
      const i27 = t19.getContext("2d");
      i27.drawImage(e11, 0, 0, e11.width, e11.height);
      const r24 = i27.getImageData(0, 0, e11.width, e11.height), n33 = r24.data;
      for (let a22 = 0; a22 < n33.length; a22++)
        n33[a22] = mn4(n33[a22] / 255) * 255;
      return i27.putImageData(r24, 0, 0), t19;
    } else if (e11.data) {
      const t19 = e11.data.slice(0);
      for (let i27 = 0; i27 < t19.length; i27++)
        t19 instanceof Uint8Array || t19 instanceof Uint8ClampedArray ? t19[i27] = Math.floor(mn4(t19[i27] / 255) * 255) : t19[i27] = mn4(t19[i27]);
      return {
        data: t19,
        width: e11.width,
        height: e11.height
      };
    } else
      return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."), e11;
  }
};
var mh2 = class {
  constructor(e11 = null) {
    this.isSource = true, this.uuid = bi6(), this.data = e11, this.version = 0;
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string";
    if (!t19 && e11.images[this.uuid] !== void 0)
      return e11.images[this.uuid];
    const i27 = {
      uuid: this.uuid,
      url: ""
    }, r24 = this.data;
    if (r24 !== null) {
      let n33;
      if (Array.isArray(r24)) {
        n33 = [];
        for (let a22 = 0, o12 = r24.length; a22 < o12; a22++)
          r24[a22].isDataTexture ? n33.push(Na2(r24[a22].image)) : n33.push(Na2(r24[a22]));
      } else
        n33 = Na2(r24);
      i27.url = n33;
    }
    return t19 || (e11.images[this.uuid] = i27), i27;
  }
};
function Na2(s18) {
  return typeof HTMLImageElement < "u" && s18 instanceof HTMLImageElement || typeof HTMLCanvasElement < "u" && s18 instanceof HTMLCanvasElement || typeof ImageBitmap < "u" && s18 instanceof ImageBitmap ? ph2.getDataURL(s18) : s18.data ? {
    data: Array.from(s18.data),
    width: s18.width,
    height: s18.height,
    type: s18.data.constructor.name
  } : (console.warn("THREE.Texture: Unable to serialize Texture."), {});
}
var xd2 = 0;
var Wt7 = class _Wt extends Ar5 {
  constructor(e11 = _Wt.DEFAULT_IMAGE, t19 = _Wt.DEFAULT_MAPPING, i27 = Zt6, r24 = Zt6, n33 = Vt6, a22 = Hi3, o12 = di6, l25 = xr4, c27 = _Wt.DEFAULT_ANISOTROPY, h26 = br5) {
    super(), this.isTexture = true, Object.defineProperty(this, "id", { value: xd2++ }), this.uuid = bi6(), this.name = "", this.source = new mh2(e11), this.mipmaps = [], this.mapping = t19, this.channel = 0, this.wrapS = i27, this.wrapT = r24, this.magFilter = n33, this.minFilter = a22, this.anisotropy = c27, this.format = o12, this.internalFormat = null, this.type = l25, this.offset = new We7(0, 0), this.repeat = new We7(1, 1), this.center = new We7(0, 0), this.rotation = 0, this.matrixAutoUpdate = true, this.matrix = new Ke5(), this.generateMipmaps = true, this.premultiplyAlpha = false, this.flipY = true, this.unpackAlignment = 4, this.encoding = h26, this.userData = {}, this.version = 0, this.onUpdate = null, this.isRenderTargetTexture = false, this.needsPMREMUpdate = false;
  }
  get image() {
    return this.source.data;
  }
  set image(e11 = null) {
    this.source.data = e11;
  }
  updateMatrix() {
    this.matrix.setUvTransform(this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    return this.name = e11.name, this.source = e11.source, this.mipmaps = e11.mipmaps.slice(0), this.mapping = e11.mapping, this.channel = e11.channel, this.wrapS = e11.wrapS, this.wrapT = e11.wrapT, this.magFilter = e11.magFilter, this.minFilter = e11.minFilter, this.anisotropy = e11.anisotropy, this.format = e11.format, this.internalFormat = e11.internalFormat, this.type = e11.type, this.offset.copy(e11.offset), this.repeat.copy(e11.repeat), this.center.copy(e11.center), this.rotation = e11.rotation, this.matrixAutoUpdate = e11.matrixAutoUpdate, this.matrix.copy(e11.matrix), this.generateMipmaps = e11.generateMipmaps, this.premultiplyAlpha = e11.premultiplyAlpha, this.flipY = e11.flipY, this.unpackAlignment = e11.unpackAlignment, this.encoding = e11.encoding, this.userData = JSON.parse(JSON.stringify(e11.userData)), this.needsUpdate = true, this;
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string";
    if (!t19 && e11.textures[this.uuid] !== void 0)
      return e11.textures[this.uuid];
    const i27 = {
      metadata: {
        version: 4.5,
        type: "Texture",
        generator: "Texture.toJSON"
      },
      uuid: this.uuid,
      name: this.name,
      image: this.source.toJSON(e11).uuid,
      mapping: this.mapping,
      channel: this.channel,
      repeat: [this.repeat.x, this.repeat.y],
      offset: [this.offset.x, this.offset.y],
      center: [this.center.x, this.center.y],
      rotation: this.rotation,
      wrap: [this.wrapS, this.wrapT],
      format: this.format,
      internalFormat: this.internalFormat,
      type: this.type,
      encoding: this.encoding,
      minFilter: this.minFilter,
      magFilter: this.magFilter,
      anisotropy: this.anisotropy,
      flipY: this.flipY,
      generateMipmaps: this.generateMipmaps,
      premultiplyAlpha: this.premultiplyAlpha,
      unpackAlignment: this.unpackAlignment
    };
    return Object.keys(this.userData).length > 0 && (i27.userData = this.userData), t19 || (e11.textures[this.uuid] = i27), i27;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
  transformUv(e11) {
    if (this.mapping !== sh2)
      return e11;
    if (e11.applyMatrix3(this.matrix), e11.x < 0 || e11.x > 1)
      switch (this.wrapS) {
        case Ti4:
          e11.x = e11.x - Math.floor(e11.x);
          break;
        case Zt6:
          e11.x = e11.x < 0 ? 0 : 1;
          break;
        case ta2:
          Math.abs(Math.floor(e11.x) % 2) === 1 ? e11.x = Math.ceil(e11.x) - e11.x : e11.x = e11.x - Math.floor(e11.x);
          break;
      }
    if (e11.y < 0 || e11.y > 1)
      switch (this.wrapT) {
        case Ti4:
          e11.y = e11.y - Math.floor(e11.y);
          break;
        case Zt6:
          e11.y = e11.y < 0 ? 0 : 1;
          break;
        case ta2:
          Math.abs(Math.floor(e11.y) % 2) === 1 ? e11.y = Math.ceil(e11.y) - e11.y : e11.y = e11.y - Math.floor(e11.y);
          break;
      }
    return this.flipY && (e11.y = 1 - e11.y), e11;
  }
  set needsUpdate(e11) {
    e11 === true && (this.version++, this.source.needsUpdate = true);
  }
};
Wt7.DEFAULT_IMAGE = null;
Wt7.DEFAULT_MAPPING = sh2;
Wt7.DEFAULT_ANISOTROPY = 1;
var gt11 = class _gt {
  constructor(e11 = 0, t19 = 0, i27 = 0, r24 = 1) {
    _gt.prototype.isVector4 = true, this.x = e11, this.y = t19, this.z = i27, this.w = r24;
  }
  get width() {
    return this.z;
  }
  set width(e11) {
    this.z = e11;
  }
  get height() {
    return this.w;
  }
  set height(e11) {
    this.w = e11;
  }
  set(e11, t19, i27, r24) {
    return this.x = e11, this.y = t19, this.z = i27, this.w = r24, this;
  }
  setScalar(e11) {
    return this.x = e11, this.y = e11, this.z = e11, this.w = e11, this;
  }
  setX(e11) {
    return this.x = e11, this;
  }
  setY(e11) {
    return this.y = e11, this;
  }
  setZ(e11) {
    return this.z = e11, this;
  }
  setW(e11) {
    return this.w = e11, this;
  }
  setComponent(e11, t19) {
    switch (e11) {
      case 0:
        this.x = t19;
        break;
      case 1:
        this.y = t19;
        break;
      case 2:
        this.z = t19;
        break;
      case 3:
        this.w = t19;
        break;
      default:
        throw new Error("index is out of range: " + e11);
    }
    return this;
  }
  getComponent(e11) {
    switch (e11) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      case 2:
        return this.z;
      case 3:
        return this.w;
      default:
        throw new Error("index is out of range: " + e11);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y, this.z, this.w);
  }
  copy(e11) {
    return this.x = e11.x, this.y = e11.y, this.z = e11.z, this.w = e11.w !== void 0 ? e11.w : 1, this;
  }
  add(e11) {
    return this.x += e11.x, this.y += e11.y, this.z += e11.z, this.w += e11.w, this;
  }
  addScalar(e11) {
    return this.x += e11, this.y += e11, this.z += e11, this.w += e11, this;
  }
  addVectors(e11, t19) {
    return this.x = e11.x + t19.x, this.y = e11.y + t19.y, this.z = e11.z + t19.z, this.w = e11.w + t19.w, this;
  }
  addScaledVector(e11, t19) {
    return this.x += e11.x * t19, this.y += e11.y * t19, this.z += e11.z * t19, this.w += e11.w * t19, this;
  }
  sub(e11) {
    return this.x -= e11.x, this.y -= e11.y, this.z -= e11.z, this.w -= e11.w, this;
  }
  subScalar(e11) {
    return this.x -= e11, this.y -= e11, this.z -= e11, this.w -= e11, this;
  }
  subVectors(e11, t19) {
    return this.x = e11.x - t19.x, this.y = e11.y - t19.y, this.z = e11.z - t19.z, this.w = e11.w - t19.w, this;
  }
  multiply(e11) {
    return this.x *= e11.x, this.y *= e11.y, this.z *= e11.z, this.w *= e11.w, this;
  }
  multiplyScalar(e11) {
    return this.x *= e11, this.y *= e11, this.z *= e11, this.w *= e11, this;
  }
  applyMatrix4(e11) {
    const t19 = this.x, i27 = this.y, r24 = this.z, n33 = this.w, a22 = e11.elements;
    return this.x = a22[0] * t19 + a22[4] * i27 + a22[8] * r24 + a22[12] * n33, this.y = a22[1] * t19 + a22[5] * i27 + a22[9] * r24 + a22[13] * n33, this.z = a22[2] * t19 + a22[6] * i27 + a22[10] * r24 + a22[14] * n33, this.w = a22[3] * t19 + a22[7] * i27 + a22[11] * r24 + a22[15] * n33, this;
  }
  divideScalar(e11) {
    return this.multiplyScalar(1 / e11);
  }
  setAxisAngleFromQuaternion(e11) {
    this.w = 2 * Math.acos(e11.w);
    const t19 = Math.sqrt(1 - e11.w * e11.w);
    return t19 < 1e-4 ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = e11.x / t19, this.y = e11.y / t19, this.z = e11.z / t19), this;
  }
  setAxisAngleFromRotationMatrix(e11) {
    let t19, i27, r24, n33;
    const a22 = e11.elements, o12 = a22[0], l25 = a22[4], c27 = a22[8], h26 = a22[1], u35 = a22[5], d34 = a22[9], m33 = a22[2], _19 = a22[6], y33 = a22[10];
    if (Math.abs(l25 - h26) < 0.01 && Math.abs(c27 - m33) < 0.01 && Math.abs(d34 - _19) < 0.01) {
      if (Math.abs(l25 + h26) < 0.1 && Math.abs(c27 + m33) < 0.1 && Math.abs(d34 + _19) < 0.1 && Math.abs(o12 + u35 + y33 - 3) < 0.1)
        return this.set(1, 0, 0, 0), this;
      t19 = Math.PI;
      const p26 = (o12 + 1) / 2, A17 = (u35 + 1) / 2, M12 = (y33 + 1) / 2, E24 = (l25 + h26) / 4, w29 = (c27 + m33) / 4, I16 = (d34 + _19) / 4;
      return p26 > A17 && p26 > M12 ? p26 < 0.01 ? (i27 = 0, r24 = 0.707106781, n33 = 0.707106781) : (i27 = Math.sqrt(p26), r24 = E24 / i27, n33 = w29 / i27) : A17 > M12 ? A17 < 0.01 ? (i27 = 0.707106781, r24 = 0, n33 = 0.707106781) : (r24 = Math.sqrt(A17), i27 = E24 / r24, n33 = I16 / r24) : M12 < 0.01 ? (i27 = 0.707106781, r24 = 0.707106781, n33 = 0) : (n33 = Math.sqrt(M12), i27 = w29 / n33, r24 = I16 / n33), this.set(i27, r24, n33, t19), this;
    }
    let f39 = Math.sqrt((_19 - d34) * (_19 - d34) + (c27 - m33) * (c27 - m33) + (h26 - l25) * (h26 - l25));
    return Math.abs(f39) < 1e-3 && (f39 = 1), this.x = (_19 - d34) / f39, this.y = (c27 - m33) / f39, this.z = (h26 - l25) / f39, this.w = Math.acos((o12 + u35 + y33 - 1) / 2), this;
  }
  min(e11) {
    return this.x = Math.min(this.x, e11.x), this.y = Math.min(this.y, e11.y), this.z = Math.min(this.z, e11.z), this.w = Math.min(this.w, e11.w), this;
  }
  max(e11) {
    return this.x = Math.max(this.x, e11.x), this.y = Math.max(this.y, e11.y), this.z = Math.max(this.z, e11.z), this.w = Math.max(this.w, e11.w), this;
  }
  clamp(e11, t19) {
    return this.x = Math.max(e11.x, Math.min(t19.x, this.x)), this.y = Math.max(e11.y, Math.min(t19.y, this.y)), this.z = Math.max(e11.z, Math.min(t19.z, this.z)), this.w = Math.max(e11.w, Math.min(t19.w, this.w)), this;
  }
  clampScalar(e11, t19) {
    return this.x = Math.max(e11, Math.min(t19, this.x)), this.y = Math.max(e11, Math.min(t19, this.y)), this.z = Math.max(e11, Math.min(t19, this.z)), this.w = Math.max(e11, Math.min(t19, this.w)), this;
  }
  clampLength(e11, t19) {
    const i27 = this.length();
    return this.divideScalar(i27 || 1).multiplyScalar(Math.max(e11, Math.min(t19, i27)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this;
  }
  roundToZero() {
    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this;
  }
  dot(e11) {
    return this.x * e11.x + this.y * e11.y + this.z * e11.z + this.w * e11.w;
  }
  lengthSq() {
    return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  setLength(e11) {
    return this.normalize().multiplyScalar(e11);
  }
  lerp(e11, t19) {
    return this.x += (e11.x - this.x) * t19, this.y += (e11.y - this.y) * t19, this.z += (e11.z - this.z) * t19, this.w += (e11.w - this.w) * t19, this;
  }
  lerpVectors(e11, t19, i27) {
    return this.x = e11.x + (t19.x - e11.x) * i27, this.y = e11.y + (t19.y - e11.y) * i27, this.z = e11.z + (t19.z - e11.z) * i27, this.w = e11.w + (t19.w - e11.w) * i27, this;
  }
  equals(e11) {
    return e11.x === this.x && e11.y === this.y && e11.z === this.z && e11.w === this.w;
  }
  fromArray(e11, t19 = 0) {
    return this.x = e11[t19], this.y = e11[t19 + 1], this.z = e11[t19 + 2], this.w = e11[t19 + 3], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.x, e11[t19 + 1] = this.y, e11[t19 + 2] = this.z, e11[t19 + 3] = this.w, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.x = e11.getX(t19), this.y = e11.getY(t19), this.z = e11.getZ(t19), this.w = e11.getW(t19), this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this.z = Math.random(), this.w = Math.random(), this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y, yield this.z, yield this.w;
  }
};
var Mr5 = class extends Ar5 {
  constructor(e11 = 1, t19 = 1, i27 = {}) {
    super(), this.isWebGLRenderTarget = true, this.width = e11, this.height = t19, this.depth = 1, this.scissor = new gt11(0, 0, e11, t19), this.scissorTest = false, this.viewport = new gt11(0, 0, e11, t19);
    const r24 = { width: e11, height: t19, depth: 1 };
    this.texture = new Wt7(r24, i27.mapping, i27.wrapS, i27.wrapT, i27.magFilter, i27.minFilter, i27.format, i27.type, i27.anisotropy, i27.encoding), this.texture.isRenderTargetTexture = true, this.texture.flipY = false, this.texture.generateMipmaps = i27.generateMipmaps !== void 0 ? i27.generateMipmaps : false, this.texture.internalFormat = i27.internalFormat !== void 0 ? i27.internalFormat : null, this.texture.minFilter = i27.minFilter !== void 0 ? i27.minFilter : Vt6, this.depthBuffer = i27.depthBuffer !== void 0 ? i27.depthBuffer : true, this.stencilBuffer = i27.stencilBuffer !== void 0 ? i27.stencilBuffer : false, this.depthTexture = i27.depthTexture !== void 0 ? i27.depthTexture : null, this.samples = i27.samples !== void 0 ? i27.samples : 0;
  }
  setSize(e11, t19, i27 = 1) {
    (this.width !== e11 || this.height !== t19 || this.depth !== i27) && (this.width = e11, this.height = t19, this.depth = i27, this.texture.image.width = e11, this.texture.image.height = t19, this.texture.image.depth = i27, this.dispose()), this.viewport.set(0, 0, e11, t19), this.scissor.set(0, 0, e11, t19);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    this.width = e11.width, this.height = e11.height, this.depth = e11.depth, this.viewport.copy(e11.viewport), this.texture = e11.texture.clone(), this.texture.isRenderTargetTexture = true;
    const t19 = Object.assign({}, e11.texture.image);
    return this.texture.source = new mh2(t19), this.depthBuffer = e11.depthBuffer, this.stencilBuffer = e11.stencilBuffer, e11.depthTexture !== null && (this.depthTexture = e11.depthTexture.clone()), this.samples = e11.samples, this;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
};
var fh2 = class extends Wt7 {
  constructor(e11 = null, t19 = 1, i27 = 1, r24 = 1) {
    super(null), this.isDataArrayTexture = true, this.image = { data: e11, width: t19, height: i27, depth: r24 }, this.magFilter = zt6, this.minFilter = zt6, this.wrapR = Zt6, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1;
  }
};
var bd2 = class extends Wt7 {
  constructor(e11 = null, t19 = 1, i27 = 1, r24 = 1) {
    super(null), this.isData3DTexture = true, this.image = { data: e11, width: t19, height: i27, depth: r24 }, this.magFilter = zt6, this.minFilter = zt6, this.wrapR = Zt6, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1;
  }
};
var jt8 = class {
  constructor(e11 = 0, t19 = 0, i27 = 0, r24 = 1) {
    this.isQuaternion = true, this._x = e11, this._y = t19, this._z = i27, this._w = r24;
  }
  static slerpFlat(e11, t19, i27, r24, n33, a22, o12) {
    let l25 = i27[r24 + 0], c27 = i27[r24 + 1], h26 = i27[r24 + 2], u35 = i27[r24 + 3];
    const d34 = n33[a22 + 0], m33 = n33[a22 + 1], _19 = n33[a22 + 2], y33 = n33[a22 + 3];
    if (o12 === 0) {
      e11[t19 + 0] = l25, e11[t19 + 1] = c27, e11[t19 + 2] = h26, e11[t19 + 3] = u35;
      return;
    }
    if (o12 === 1) {
      e11[t19 + 0] = d34, e11[t19 + 1] = m33, e11[t19 + 2] = _19, e11[t19 + 3] = y33;
      return;
    }
    if (u35 !== y33 || l25 !== d34 || c27 !== m33 || h26 !== _19) {
      let f39 = 1 - o12;
      const p26 = l25 * d34 + c27 * m33 + h26 * _19 + u35 * y33, A17 = p26 >= 0 ? 1 : -1, M12 = 1 - p26 * p26;
      if (M12 > Number.EPSILON) {
        const w29 = Math.sqrt(M12), I16 = Math.atan2(w29, p26 * A17);
        f39 = Math.sin(f39 * I16) / w29, o12 = Math.sin(o12 * I16) / w29;
      }
      const E24 = o12 * A17;
      if (l25 = l25 * f39 + d34 * E24, c27 = c27 * f39 + m33 * E24, h26 = h26 * f39 + _19 * E24, u35 = u35 * f39 + y33 * E24, f39 === 1 - o12) {
        const w29 = 1 / Math.sqrt(l25 * l25 + c27 * c27 + h26 * h26 + u35 * u35);
        l25 *= w29, c27 *= w29, h26 *= w29, u35 *= w29;
      }
    }
    e11[t19] = l25, e11[t19 + 1] = c27, e11[t19 + 2] = h26, e11[t19 + 3] = u35;
  }
  static multiplyQuaternionsFlat(e11, t19, i27, r24, n33, a22) {
    const o12 = i27[r24], l25 = i27[r24 + 1], c27 = i27[r24 + 2], h26 = i27[r24 + 3], u35 = n33[a22], d34 = n33[a22 + 1], m33 = n33[a22 + 2], _19 = n33[a22 + 3];
    return e11[t19] = o12 * _19 + h26 * u35 + l25 * m33 - c27 * d34, e11[t19 + 1] = l25 * _19 + h26 * d34 + c27 * u35 - o12 * m33, e11[t19 + 2] = c27 * _19 + h26 * m33 + o12 * d34 - l25 * u35, e11[t19 + 3] = h26 * _19 - o12 * u35 - l25 * d34 - c27 * m33, e11;
  }
  get x() {
    return this._x;
  }
  set x(e11) {
    this._x = e11, this._onChangeCallback();
  }
  get y() {
    return this._y;
  }
  set y(e11) {
    this._y = e11, this._onChangeCallback();
  }
  get z() {
    return this._z;
  }
  set z(e11) {
    this._z = e11, this._onChangeCallback();
  }
  get w() {
    return this._w;
  }
  set w(e11) {
    this._w = e11, this._onChangeCallback();
  }
  set(e11, t19, i27, r24) {
    return this._x = e11, this._y = t19, this._z = i27, this._w = r24, this._onChangeCallback(), this;
  }
  clone() {
    return new this.constructor(this._x, this._y, this._z, this._w);
  }
  copy(e11) {
    return this._x = e11.x, this._y = e11.y, this._z = e11.z, this._w = e11.w, this._onChangeCallback(), this;
  }
  setFromEuler(e11, t19) {
    const i27 = e11._x, r24 = e11._y, n33 = e11._z, a22 = e11._order, o12 = Math.cos, l25 = Math.sin, c27 = o12(i27 / 2), h26 = o12(r24 / 2), u35 = o12(n33 / 2), d34 = l25(i27 / 2), m33 = l25(r24 / 2), _19 = l25(n33 / 2);
    switch (a22) {
      case "XYZ":
        this._x = d34 * h26 * u35 + c27 * m33 * _19, this._y = c27 * m33 * u35 - d34 * h26 * _19, this._z = c27 * h26 * _19 + d34 * m33 * u35, this._w = c27 * h26 * u35 - d34 * m33 * _19;
        break;
      case "YXZ":
        this._x = d34 * h26 * u35 + c27 * m33 * _19, this._y = c27 * m33 * u35 - d34 * h26 * _19, this._z = c27 * h26 * _19 - d34 * m33 * u35, this._w = c27 * h26 * u35 + d34 * m33 * _19;
        break;
      case "ZXY":
        this._x = d34 * h26 * u35 - c27 * m33 * _19, this._y = c27 * m33 * u35 + d34 * h26 * _19, this._z = c27 * h26 * _19 + d34 * m33 * u35, this._w = c27 * h26 * u35 - d34 * m33 * _19;
        break;
      case "ZYX":
        this._x = d34 * h26 * u35 - c27 * m33 * _19, this._y = c27 * m33 * u35 + d34 * h26 * _19, this._z = c27 * h26 * _19 - d34 * m33 * u35, this._w = c27 * h26 * u35 + d34 * m33 * _19;
        break;
      case "YZX":
        this._x = d34 * h26 * u35 + c27 * m33 * _19, this._y = c27 * m33 * u35 + d34 * h26 * _19, this._z = c27 * h26 * _19 - d34 * m33 * u35, this._w = c27 * h26 * u35 - d34 * m33 * _19;
        break;
      case "XZY":
        this._x = d34 * h26 * u35 - c27 * m33 * _19, this._y = c27 * m33 * u35 - d34 * h26 * _19, this._z = c27 * h26 * _19 + d34 * m33 * u35, this._w = c27 * h26 * u35 + d34 * m33 * _19;
        break;
      default:
        console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: " + a22);
    }
    return t19 !== false && this._onChangeCallback(), this;
  }
  setFromAxisAngle(e11, t19) {
    const i27 = t19 / 2, r24 = Math.sin(i27);
    return this._x = e11.x * r24, this._y = e11.y * r24, this._z = e11.z * r24, this._w = Math.cos(i27), this._onChangeCallback(), this;
  }
  setFromRotationMatrix(e11) {
    const t19 = e11.elements, i27 = t19[0], r24 = t19[4], n33 = t19[8], a22 = t19[1], o12 = t19[5], l25 = t19[9], c27 = t19[2], h26 = t19[6], u35 = t19[10], d34 = i27 + o12 + u35;
    if (d34 > 0) {
      const m33 = 0.5 / Math.sqrt(d34 + 1);
      this._w = 0.25 / m33, this._x = (h26 - l25) * m33, this._y = (n33 - c27) * m33, this._z = (a22 - r24) * m33;
    } else if (i27 > o12 && i27 > u35) {
      const m33 = 2 * Math.sqrt(1 + i27 - o12 - u35);
      this._w = (h26 - l25) / m33, this._x = 0.25 * m33, this._y = (r24 + a22) / m33, this._z = (n33 + c27) / m33;
    } else if (o12 > u35) {
      const m33 = 2 * Math.sqrt(1 + o12 - i27 - u35);
      this._w = (n33 - c27) / m33, this._x = (r24 + a22) / m33, this._y = 0.25 * m33, this._z = (l25 + h26) / m33;
    } else {
      const m33 = 2 * Math.sqrt(1 + u35 - i27 - o12);
      this._w = (a22 - r24) / m33, this._x = (n33 + c27) / m33, this._y = (l25 + h26) / m33, this._z = 0.25 * m33;
    }
    return this._onChangeCallback(), this;
  }
  setFromUnitVectors(e11, t19) {
    let i27 = e11.dot(t19) + 1;
    return i27 < Number.EPSILON ? (i27 = 0, Math.abs(e11.x) > Math.abs(e11.z) ? (this._x = -e11.y, this._y = e11.x, this._z = 0, this._w = i27) : (this._x = 0, this._y = -e11.z, this._z = e11.y, this._w = i27)) : (this._x = e11.y * t19.z - e11.z * t19.y, this._y = e11.z * t19.x - e11.x * t19.z, this._z = e11.x * t19.y - e11.y * t19.x, this._w = i27), this.normalize();
  }
  angleTo(e11) {
    return 2 * Math.acos(Math.abs(Gt6(this.dot(e11), -1, 1)));
  }
  rotateTowards(e11, t19) {
    const i27 = this.angleTo(e11);
    if (i27 === 0)
      return this;
    const r24 = Math.min(1, t19 / i27);
    return this.slerp(e11, r24), this;
  }
  identity() {
    return this.set(0, 0, 0, 1);
  }
  invert() {
    return this.conjugate();
  }
  conjugate() {
    return this._x *= -1, this._y *= -1, this._z *= -1, this._onChangeCallback(), this;
  }
  dot(e11) {
    return this._x * e11._x + this._y * e11._y + this._z * e11._z + this._w * e11._w;
  }
  lengthSq() {
    return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;
  }
  length() {
    return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w);
  }
  normalize() {
    let e11 = this.length();
    return e11 === 0 ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (e11 = 1 / e11, this._x = this._x * e11, this._y = this._y * e11, this._z = this._z * e11, this._w = this._w * e11), this._onChangeCallback(), this;
  }
  multiply(e11) {
    return this.multiplyQuaternions(this, e11);
  }
  premultiply(e11) {
    return this.multiplyQuaternions(e11, this);
  }
  multiplyQuaternions(e11, t19) {
    const i27 = e11._x, r24 = e11._y, n33 = e11._z, a22 = e11._w, o12 = t19._x, l25 = t19._y, c27 = t19._z, h26 = t19._w;
    return this._x = i27 * h26 + a22 * o12 + r24 * c27 - n33 * l25, this._y = r24 * h26 + a22 * l25 + n33 * o12 - i27 * c27, this._z = n33 * h26 + a22 * c27 + i27 * l25 - r24 * o12, this._w = a22 * h26 - i27 * o12 - r24 * l25 - n33 * c27, this._onChangeCallback(), this;
  }
  slerp(e11, t19) {
    if (t19 === 0)
      return this;
    if (t19 === 1)
      return this.copy(e11);
    const i27 = this._x, r24 = this._y, n33 = this._z, a22 = this._w;
    let o12 = a22 * e11._w + i27 * e11._x + r24 * e11._y + n33 * e11._z;
    if (o12 < 0 ? (this._w = -e11._w, this._x = -e11._x, this._y = -e11._y, this._z = -e11._z, o12 = -o12) : this.copy(e11), o12 >= 1)
      return this._w = a22, this._x = i27, this._y = r24, this._z = n33, this;
    const l25 = 1 - o12 * o12;
    if (l25 <= Number.EPSILON) {
      const m33 = 1 - t19;
      return this._w = m33 * a22 + t19 * this._w, this._x = m33 * i27 + t19 * this._x, this._y = m33 * r24 + t19 * this._y, this._z = m33 * n33 + t19 * this._z, this.normalize(), this._onChangeCallback(), this;
    }
    const c27 = Math.sqrt(l25), h26 = Math.atan2(c27, o12), u35 = Math.sin((1 - t19) * h26) / c27, d34 = Math.sin(t19 * h26) / c27;
    return this._w = a22 * u35 + this._w * d34, this._x = i27 * u35 + this._x * d34, this._y = r24 * u35 + this._y * d34, this._z = n33 * u35 + this._z * d34, this._onChangeCallback(), this;
  }
  slerpQuaternions(e11, t19, i27) {
    return this.copy(e11).slerp(t19, i27);
  }
  random() {
    const e11 = Math.random(), t19 = Math.sqrt(1 - e11), i27 = Math.sqrt(e11), r24 = 2 * Math.PI * Math.random(), n33 = 2 * Math.PI * Math.random();
    return this.set(
      t19 * Math.cos(r24),
      i27 * Math.sin(n33),
      i27 * Math.cos(n33),
      t19 * Math.sin(r24)
    );
  }
  equals(e11) {
    return e11._x === this._x && e11._y === this._y && e11._z === this._z && e11._w === this._w;
  }
  fromArray(e11, t19 = 0) {
    return this._x = e11[t19], this._y = e11[t19 + 1], this._z = e11[t19 + 2], this._w = e11[t19 + 3], this._onChangeCallback(), this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this._x, e11[t19 + 1] = this._y, e11[t19 + 2] = this._z, e11[t19 + 3] = this._w, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this._x = e11.getX(t19), this._y = e11.getY(t19), this._z = e11.getZ(t19), this._w = e11.getW(t19), this;
  }
  toJSON() {
    return this.toArray();
  }
  _onChange(e11) {
    return this._onChangeCallback = e11, this;
  }
  _onChangeCallback() {
  }
  *[Symbol.iterator]() {
    yield this._x, yield this._y, yield this._z, yield this._w;
  }
};
var k18 = class _k {
  constructor(e11 = 0, t19 = 0, i27 = 0) {
    _k.prototype.isVector3 = true, this.x = e11, this.y = t19, this.z = i27;
  }
  set(e11, t19, i27) {
    return i27 === void 0 && (i27 = this.z), this.x = e11, this.y = t19, this.z = i27, this;
  }
  setScalar(e11) {
    return this.x = e11, this.y = e11, this.z = e11, this;
  }
  setX(e11) {
    return this.x = e11, this;
  }
  setY(e11) {
    return this.y = e11, this;
  }
  setZ(e11) {
    return this.z = e11, this;
  }
  setComponent(e11, t19) {
    switch (e11) {
      case 0:
        this.x = t19;
        break;
      case 1:
        this.y = t19;
        break;
      case 2:
        this.z = t19;
        break;
      default:
        throw new Error("index is out of range: " + e11);
    }
    return this;
  }
  getComponent(e11) {
    switch (e11) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      case 2:
        return this.z;
      default:
        throw new Error("index is out of range: " + e11);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y, this.z);
  }
  copy(e11) {
    return this.x = e11.x, this.y = e11.y, this.z = e11.z, this;
  }
  add(e11) {
    return this.x += e11.x, this.y += e11.y, this.z += e11.z, this;
  }
  addScalar(e11) {
    return this.x += e11, this.y += e11, this.z += e11, this;
  }
  addVectors(e11, t19) {
    return this.x = e11.x + t19.x, this.y = e11.y + t19.y, this.z = e11.z + t19.z, this;
  }
  addScaledVector(e11, t19) {
    return this.x += e11.x * t19, this.y += e11.y * t19, this.z += e11.z * t19, this;
  }
  sub(e11) {
    return this.x -= e11.x, this.y -= e11.y, this.z -= e11.z, this;
  }
  subScalar(e11) {
    return this.x -= e11, this.y -= e11, this.z -= e11, this;
  }
  subVectors(e11, t19) {
    return this.x = e11.x - t19.x, this.y = e11.y - t19.y, this.z = e11.z - t19.z, this;
  }
  multiply(e11) {
    return this.x *= e11.x, this.y *= e11.y, this.z *= e11.z, this;
  }
  multiplyScalar(e11) {
    return this.x *= e11, this.y *= e11, this.z *= e11, this;
  }
  multiplyVectors(e11, t19) {
    return this.x = e11.x * t19.x, this.y = e11.y * t19.y, this.z = e11.z * t19.z, this;
  }
  applyEuler(e11) {
    return this.applyQuaternion(Dl2.setFromEuler(e11));
  }
  applyAxisAngle(e11, t19) {
    return this.applyQuaternion(Dl2.setFromAxisAngle(e11, t19));
  }
  applyMatrix3(e11) {
    const t19 = this.x, i27 = this.y, r24 = this.z, n33 = e11.elements;
    return this.x = n33[0] * t19 + n33[3] * i27 + n33[6] * r24, this.y = n33[1] * t19 + n33[4] * i27 + n33[7] * r24, this.z = n33[2] * t19 + n33[5] * i27 + n33[8] * r24, this;
  }
  applyNormalMatrix(e11) {
    return this.applyMatrix3(e11).normalize();
  }
  applyMatrix4(e11) {
    const t19 = this.x, i27 = this.y, r24 = this.z, n33 = e11.elements, a22 = 1 / (n33[3] * t19 + n33[7] * i27 + n33[11] * r24 + n33[15]);
    return this.x = (n33[0] * t19 + n33[4] * i27 + n33[8] * r24 + n33[12]) * a22, this.y = (n33[1] * t19 + n33[5] * i27 + n33[9] * r24 + n33[13]) * a22, this.z = (n33[2] * t19 + n33[6] * i27 + n33[10] * r24 + n33[14]) * a22, this;
  }
  applyQuaternion(e11) {
    const t19 = this.x, i27 = this.y, r24 = this.z, n33 = e11.x, a22 = e11.y, o12 = e11.z, l25 = e11.w, c27 = l25 * t19 + a22 * r24 - o12 * i27, h26 = l25 * i27 + o12 * t19 - n33 * r24, u35 = l25 * r24 + n33 * i27 - a22 * t19, d34 = -n33 * t19 - a22 * i27 - o12 * r24;
    return this.x = c27 * l25 + d34 * -n33 + h26 * -o12 - u35 * -a22, this.y = h26 * l25 + d34 * -a22 + u35 * -n33 - c27 * -o12, this.z = u35 * l25 + d34 * -o12 + c27 * -a22 - h26 * -n33, this;
  }
  project(e11) {
    return this.applyMatrix4(e11.matrixWorldInverse).applyMatrix4(e11.projectionMatrix);
  }
  unproject(e11) {
    return this.applyMatrix4(e11.projectionMatrixInverse).applyMatrix4(e11.matrixWorld);
  }
  transformDirection(e11) {
    const t19 = this.x, i27 = this.y, r24 = this.z, n33 = e11.elements;
    return this.x = n33[0] * t19 + n33[4] * i27 + n33[8] * r24, this.y = n33[1] * t19 + n33[5] * i27 + n33[9] * r24, this.z = n33[2] * t19 + n33[6] * i27 + n33[10] * r24, this.normalize();
  }
  divide(e11) {
    return this.x /= e11.x, this.y /= e11.y, this.z /= e11.z, this;
  }
  divideScalar(e11) {
    return this.multiplyScalar(1 / e11);
  }
  min(e11) {
    return this.x = Math.min(this.x, e11.x), this.y = Math.min(this.y, e11.y), this.z = Math.min(this.z, e11.z), this;
  }
  max(e11) {
    return this.x = Math.max(this.x, e11.x), this.y = Math.max(this.y, e11.y), this.z = Math.max(this.z, e11.z), this;
  }
  clamp(e11, t19) {
    return this.x = Math.max(e11.x, Math.min(t19.x, this.x)), this.y = Math.max(e11.y, Math.min(t19.y, this.y)), this.z = Math.max(e11.z, Math.min(t19.z, this.z)), this;
  }
  clampScalar(e11, t19) {
    return this.x = Math.max(e11, Math.min(t19, this.x)), this.y = Math.max(e11, Math.min(t19, this.y)), this.z = Math.max(e11, Math.min(t19, this.z)), this;
  }
  clampLength(e11, t19) {
    const i27 = this.length();
    return this.divideScalar(i27 || 1).multiplyScalar(Math.max(e11, Math.min(t19, i27)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this;
  }
  roundToZero() {
    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this.z = -this.z, this;
  }
  dot(e11) {
    return this.x * e11.x + this.y * e11.y + this.z * e11.z;
  }
  // TODO lengthSquared?
  lengthSq() {
    return this.x * this.x + this.y * this.y + this.z * this.z;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  setLength(e11) {
    return this.normalize().multiplyScalar(e11);
  }
  lerp(e11, t19) {
    return this.x += (e11.x - this.x) * t19, this.y += (e11.y - this.y) * t19, this.z += (e11.z - this.z) * t19, this;
  }
  lerpVectors(e11, t19, i27) {
    return this.x = e11.x + (t19.x - e11.x) * i27, this.y = e11.y + (t19.y - e11.y) * i27, this.z = e11.z + (t19.z - e11.z) * i27, this;
  }
  cross(e11) {
    return this.crossVectors(this, e11);
  }
  crossVectors(e11, t19) {
    const i27 = e11.x, r24 = e11.y, n33 = e11.z, a22 = t19.x, o12 = t19.y, l25 = t19.z;
    return this.x = r24 * l25 - n33 * o12, this.y = n33 * a22 - i27 * l25, this.z = i27 * o12 - r24 * a22, this;
  }
  projectOnVector(e11) {
    const t19 = e11.lengthSq();
    if (t19 === 0)
      return this.set(0, 0, 0);
    const i27 = e11.dot(this) / t19;
    return this.copy(e11).multiplyScalar(i27);
  }
  projectOnPlane(e11) {
    return Pa2.copy(this).projectOnVector(e11), this.sub(Pa2);
  }
  reflect(e11) {
    return this.sub(Pa2.copy(e11).multiplyScalar(2 * this.dot(e11)));
  }
  angleTo(e11) {
    const t19 = Math.sqrt(this.lengthSq() * e11.lengthSq());
    if (t19 === 0)
      return Math.PI / 2;
    const i27 = this.dot(e11) / t19;
    return Math.acos(Gt6(i27, -1, 1));
  }
  distanceTo(e11) {
    return Math.sqrt(this.distanceToSquared(e11));
  }
  distanceToSquared(e11) {
    const t19 = this.x - e11.x, i27 = this.y - e11.y, r24 = this.z - e11.z;
    return t19 * t19 + i27 * i27 + r24 * r24;
  }
  manhattanDistanceTo(e11) {
    return Math.abs(this.x - e11.x) + Math.abs(this.y - e11.y) + Math.abs(this.z - e11.z);
  }
  setFromSpherical(e11) {
    return this.setFromSphericalCoords(e11.radius, e11.phi, e11.theta);
  }
  setFromSphericalCoords(e11, t19, i27) {
    const r24 = Math.sin(t19) * e11;
    return this.x = r24 * Math.sin(i27), this.y = Math.cos(t19) * e11, this.z = r24 * Math.cos(i27), this;
  }
  setFromCylindrical(e11) {
    return this.setFromCylindricalCoords(e11.radius, e11.theta, e11.y);
  }
  setFromCylindricalCoords(e11, t19, i27) {
    return this.x = e11 * Math.sin(t19), this.y = i27, this.z = e11 * Math.cos(t19), this;
  }
  setFromMatrixPosition(e11) {
    const t19 = e11.elements;
    return this.x = t19[12], this.y = t19[13], this.z = t19[14], this;
  }
  setFromMatrixScale(e11) {
    const t19 = this.setFromMatrixColumn(e11, 0).length(), i27 = this.setFromMatrixColumn(e11, 1).length(), r24 = this.setFromMatrixColumn(e11, 2).length();
    return this.x = t19, this.y = i27, this.z = r24, this;
  }
  setFromMatrixColumn(e11, t19) {
    return this.fromArray(e11.elements, t19 * 4);
  }
  setFromMatrix3Column(e11, t19) {
    return this.fromArray(e11.elements, t19 * 3);
  }
  setFromEuler(e11) {
    return this.x = e11._x, this.y = e11._y, this.z = e11._z, this;
  }
  setFromColor(e11) {
    return this.x = e11.r, this.y = e11.g, this.z = e11.b, this;
  }
  equals(e11) {
    return e11.x === this.x && e11.y === this.y && e11.z === this.z;
  }
  fromArray(e11, t19 = 0) {
    return this.x = e11[t19], this.y = e11[t19 + 1], this.z = e11[t19 + 2], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.x, e11[t19 + 1] = this.y, e11[t19 + 2] = this.z, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.x = e11.getX(t19), this.y = e11.getY(t19), this.z = e11.getZ(t19), this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this.z = Math.random(), this;
  }
  randomDirection() {
    const e11 = (Math.random() - 0.5) * 2, t19 = Math.random() * Math.PI * 2, i27 = Math.sqrt(1 - e11 ** 2);
    return this.x = i27 * Math.cos(t19), this.y = i27 * Math.sin(t19), this.z = e11, this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y, yield this.z;
  }
};
var Pa2 = new k18();
var Dl2 = new jt8();
var Vi3 = class {
  constructor(e11 = new k18(1 / 0, 1 / 0, 1 / 0), t19 = new k18(-1 / 0, -1 / 0, -1 / 0)) {
    this.isBox3 = true, this.min = e11, this.max = t19;
  }
  set(e11, t19) {
    return this.min.copy(e11), this.max.copy(t19), this;
  }
  setFromArray(e11) {
    this.makeEmpty();
    for (let t19 = 0, i27 = e11.length; t19 < i27; t19 += 3)
      this.expandByPoint(Pi4.fromArray(e11, t19));
    return this;
  }
  setFromBufferAttribute(e11) {
    this.makeEmpty();
    for (let t19 = 0, i27 = e11.count; t19 < i27; t19++)
      this.expandByPoint(Pi4.fromBufferAttribute(e11, t19));
    return this;
  }
  setFromPoints(e11) {
    this.makeEmpty();
    for (let t19 = 0, i27 = e11.length; t19 < i27; t19++)
      this.expandByPoint(e11[t19]);
    return this;
  }
  setFromCenterAndSize(e11, t19) {
    const i27 = Pi4.copy(t19).multiplyScalar(0.5);
    return this.min.copy(e11).sub(i27), this.max.copy(e11).add(i27), this;
  }
  setFromObject(e11, t19 = false) {
    return this.makeEmpty(), this.expandByObject(e11, t19);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    return this.min.copy(e11.min), this.max.copy(e11.max), this;
  }
  makeEmpty() {
    return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, this;
  }
  isEmpty() {
    return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z;
  }
  getCenter(e11) {
    return this.isEmpty() ? e11.set(0, 0, 0) : e11.addVectors(this.min, this.max).multiplyScalar(0.5);
  }
  getSize(e11) {
    return this.isEmpty() ? e11.set(0, 0, 0) : e11.subVectors(this.max, this.min);
  }
  expandByPoint(e11) {
    return this.min.min(e11), this.max.max(e11), this;
  }
  expandByVector(e11) {
    return this.min.sub(e11), this.max.add(e11), this;
  }
  expandByScalar(e11) {
    return this.min.addScalar(-e11), this.max.addScalar(e11), this;
  }
  expandByObject(e11, t19 = false) {
    if (e11.updateWorldMatrix(false, false), e11.boundingBox !== void 0)
      e11.boundingBox === null && e11.computeBoundingBox(), Vr5.copy(e11.boundingBox), Vr5.applyMatrix4(e11.matrixWorld), this.union(Vr5);
    else {
      const r24 = e11.geometry;
      if (r24 !== void 0)
        if (t19 && r24.attributes !== void 0 && r24.attributes.position !== void 0) {
          const n33 = r24.attributes.position;
          for (let a22 = 0, o12 = n33.count; a22 < o12; a22++)
            Pi4.fromBufferAttribute(n33, a22).applyMatrix4(e11.matrixWorld), this.expandByPoint(Pi4);
        } else
          r24.boundingBox === null && r24.computeBoundingBox(), Vr5.copy(r24.boundingBox), Vr5.applyMatrix4(e11.matrixWorld), this.union(Vr5);
    }
    const i27 = e11.children;
    for (let r24 = 0, n33 = i27.length; r24 < n33; r24++)
      this.expandByObject(i27[r24], t19);
    return this;
  }
  containsPoint(e11) {
    return !(e11.x < this.min.x || e11.x > this.max.x || e11.y < this.min.y || e11.y > this.max.y || e11.z < this.min.z || e11.z > this.max.z);
  }
  containsBox(e11) {
    return this.min.x <= e11.min.x && e11.max.x <= this.max.x && this.min.y <= e11.min.y && e11.max.y <= this.max.y && this.min.z <= e11.min.z && e11.max.z <= this.max.z;
  }
  getParameter(e11, t19) {
    return t19.set(
      (e11.x - this.min.x) / (this.max.x - this.min.x),
      (e11.y - this.min.y) / (this.max.y - this.min.y),
      (e11.z - this.min.z) / (this.max.z - this.min.z)
    );
  }
  intersectsBox(e11) {
    return !(e11.max.x < this.min.x || e11.min.x > this.max.x || e11.max.y < this.min.y || e11.min.y > this.max.y || e11.max.z < this.min.z || e11.min.z > this.max.z);
  }
  intersectsSphere(e11) {
    return this.clampPoint(e11.center, Pi4), Pi4.distanceToSquared(e11.center) <= e11.radius * e11.radius;
  }
  intersectsPlane(e11) {
    let t19, i27;
    return e11.normal.x > 0 ? (t19 = e11.normal.x * this.min.x, i27 = e11.normal.x * this.max.x) : (t19 = e11.normal.x * this.max.x, i27 = e11.normal.x * this.min.x), e11.normal.y > 0 ? (t19 += e11.normal.y * this.min.y, i27 += e11.normal.y * this.max.y) : (t19 += e11.normal.y * this.max.y, i27 += e11.normal.y * this.min.y), e11.normal.z > 0 ? (t19 += e11.normal.z * this.min.z, i27 += e11.normal.z * this.max.z) : (t19 += e11.normal.z * this.max.z, i27 += e11.normal.z * this.min.z), t19 <= -e11.constant && i27 >= -e11.constant;
  }
  intersectsTriangle(e11) {
    if (this.isEmpty())
      return false;
    this.getCenter(Un4), gs2.subVectors(this.max, Un4), Gr5.subVectors(e11.a, Un4), Wr5.subVectors(e11.b, Un4), jr5.subVectors(e11.c, Un4), Xi3.subVectors(Wr5, Gr5), qi3.subVectors(jr5, Wr5), ar5.subVectors(Gr5, jr5);
    let t19 = [
      0,
      -Xi3.z,
      Xi3.y,
      0,
      -qi3.z,
      qi3.y,
      0,
      -ar5.z,
      ar5.y,
      Xi3.z,
      0,
      -Xi3.x,
      qi3.z,
      0,
      -qi3.x,
      ar5.z,
      0,
      -ar5.x,
      -Xi3.y,
      Xi3.x,
      0,
      -qi3.y,
      qi3.x,
      0,
      -ar5.y,
      ar5.x,
      0
    ];
    return !Ia2(t19, Gr5, Wr5, jr5, gs2) || (t19 = [1, 0, 0, 0, 1, 0, 0, 0, 1], !Ia2(t19, Gr5, Wr5, jr5, gs2)) ? false : (_s3.crossVectors(Xi3, qi3), t19 = [_s3.x, _s3.y, _s3.z], Ia2(t19, Gr5, Wr5, jr5, gs2));
  }
  clampPoint(e11, t19) {
    return t19.copy(e11).clamp(this.min, this.max);
  }
  distanceToPoint(e11) {
    return this.clampPoint(e11, Pi4).distanceTo(e11);
  }
  getBoundingSphere(e11) {
    return this.isEmpty() ? e11.makeEmpty() : (this.getCenter(e11.center), e11.radius = this.getSize(Pi4).length() * 0.5), e11;
  }
  intersect(e11) {
    return this.min.max(e11.min), this.max.min(e11.max), this.isEmpty() && this.makeEmpty(), this;
  }
  union(e11) {
    return this.min.min(e11.min), this.max.max(e11.max), this;
  }
  applyMatrix4(e11) {
    return this.isEmpty() ? this : (Ni6[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(e11), Ni6[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(e11), Ni6[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(e11), Ni6[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(e11), Ni6[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(e11), Ni6[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(e11), Ni6[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(e11), Ni6[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(e11), this.setFromPoints(Ni6), this);
  }
  translate(e11) {
    return this.min.add(e11), this.max.add(e11), this;
  }
  equals(e11) {
    return e11.min.equals(this.min) && e11.max.equals(this.max);
  }
};
var Ni6 = [
  new k18(),
  new k18(),
  new k18(),
  new k18(),
  new k18(),
  new k18(),
  new k18(),
  new k18()
];
var Pi4 = new k18();
var Vr5 = new Vi3();
var Gr5 = new k18();
var Wr5 = new k18();
var jr5 = new k18();
var Xi3 = new k18();
var qi3 = new k18();
var ar5 = new k18();
var Un4 = new k18();
var gs2 = new k18();
var _s3 = new k18();
var or5 = new k18();
function Ia2(s18, e11, t19, i27, r24) {
  for (let n33 = 0, a22 = s18.length - 3; n33 <= a22; n33 += 3) {
    or5.fromArray(s18, n33);
    const o12 = r24.x * Math.abs(or5.x) + r24.y * Math.abs(or5.y) + r24.z * Math.abs(or5.z), l25 = e11.dot(or5), c27 = t19.dot(or5), h26 = i27.dot(or5);
    if (Math.max(-Math.max(l25, c27, h26), Math.min(l25, c27, h26)) > o12)
      return false;
  }
  return true;
}
var Md2 = new Vi3();
var On5 = new k18();
var Da2 = new k18();
var Gi2 = class {
  constructor(e11 = new k18(), t19 = -1) {
    this.center = e11, this.radius = t19;
  }
  set(e11, t19) {
    return this.center.copy(e11), this.radius = t19, this;
  }
  setFromPoints(e11, t19) {
    const i27 = this.center;
    t19 !== void 0 ? i27.copy(t19) : Md2.setFromPoints(e11).getCenter(i27);
    let r24 = 0;
    for (let n33 = 0, a22 = e11.length; n33 < a22; n33++)
      r24 = Math.max(r24, i27.distanceToSquared(e11[n33]));
    return this.radius = Math.sqrt(r24), this;
  }
  copy(e11) {
    return this.center.copy(e11.center), this.radius = e11.radius, this;
  }
  isEmpty() {
    return this.radius < 0;
  }
  makeEmpty() {
    return this.center.set(0, 0, 0), this.radius = -1, this;
  }
  containsPoint(e11) {
    return e11.distanceToSquared(this.center) <= this.radius * this.radius;
  }
  distanceToPoint(e11) {
    return e11.distanceTo(this.center) - this.radius;
  }
  intersectsSphere(e11) {
    const t19 = this.radius + e11.radius;
    return e11.center.distanceToSquared(this.center) <= t19 * t19;
  }
  intersectsBox(e11) {
    return e11.intersectsSphere(this);
  }
  intersectsPlane(e11) {
    return Math.abs(e11.distanceToPoint(this.center)) <= this.radius;
  }
  clampPoint(e11, t19) {
    const i27 = this.center.distanceToSquared(e11);
    return t19.copy(e11), i27 > this.radius * this.radius && (t19.sub(this.center).normalize(), t19.multiplyScalar(this.radius).add(this.center)), t19;
  }
  getBoundingBox(e11) {
    return this.isEmpty() ? (e11.makeEmpty(), e11) : (e11.set(this.center, this.center), e11.expandByScalar(this.radius), e11);
  }
  applyMatrix4(e11) {
    return this.center.applyMatrix4(e11), this.radius = this.radius * e11.getMaxScaleOnAxis(), this;
  }
  translate(e11) {
    return this.center.add(e11), this;
  }
  expandByPoint(e11) {
    if (this.isEmpty())
      return this.center.copy(e11), this.radius = 0, this;
    On5.subVectors(e11, this.center);
    const t19 = On5.lengthSq();
    if (t19 > this.radius * this.radius) {
      const i27 = Math.sqrt(t19), r24 = (i27 - this.radius) * 0.5;
      this.center.addScaledVector(On5, r24 / i27), this.radius += r24;
    }
    return this;
  }
  union(e11) {
    return e11.isEmpty() ? this : this.isEmpty() ? (this.copy(e11), this) : (this.center.equals(e11.center) === true ? this.radius = Math.max(this.radius, e11.radius) : (Da2.subVectors(e11.center, this.center).setLength(e11.radius), this.expandByPoint(On5.copy(e11.center).add(Da2)), this.expandByPoint(On5.copy(e11.center).sub(Da2))), this);
  }
  equals(e11) {
    return e11.center.equals(this.center) && e11.radius === this.radius;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var Ii4 = new k18();
var ka2 = new k18();
var vs2 = new k18();
var Yi4 = new k18();
var Ua2 = new k18();
var ys2 = new k18();
var Oa2 = new k18();
var No2 = class {
  constructor(e11 = new k18(), t19 = new k18(0, 0, -1)) {
    this.origin = e11, this.direction = t19;
  }
  set(e11, t19) {
    return this.origin.copy(e11), this.direction.copy(t19), this;
  }
  copy(e11) {
    return this.origin.copy(e11.origin), this.direction.copy(e11.direction), this;
  }
  at(e11, t19) {
    return t19.copy(this.origin).addScaledVector(this.direction, e11);
  }
  lookAt(e11) {
    return this.direction.copy(e11).sub(this.origin).normalize(), this;
  }
  recast(e11) {
    return this.origin.copy(this.at(e11, Ii4)), this;
  }
  closestPointToPoint(e11, t19) {
    t19.subVectors(e11, this.origin);
    const i27 = t19.dot(this.direction);
    return i27 < 0 ? t19.copy(this.origin) : t19.copy(this.origin).addScaledVector(this.direction, i27);
  }
  distanceToPoint(e11) {
    return Math.sqrt(this.distanceSqToPoint(e11));
  }
  distanceSqToPoint(e11) {
    const t19 = Ii4.subVectors(e11, this.origin).dot(this.direction);
    return t19 < 0 ? this.origin.distanceToSquared(e11) : (Ii4.copy(this.origin).addScaledVector(this.direction, t19), Ii4.distanceToSquared(e11));
  }
  distanceSqToSegment(e11, t19, i27, r24) {
    ka2.copy(e11).add(t19).multiplyScalar(0.5), vs2.copy(t19).sub(e11).normalize(), Yi4.copy(this.origin).sub(ka2);
    const n33 = e11.distanceTo(t19) * 0.5, a22 = -this.direction.dot(vs2), o12 = Yi4.dot(this.direction), l25 = -Yi4.dot(vs2), c27 = Yi4.lengthSq(), h26 = Math.abs(1 - a22 * a22);
    let u35, d34, m33, _19;
    if (h26 > 0)
      if (u35 = a22 * l25 - o12, d34 = a22 * o12 - l25, _19 = n33 * h26, u35 >= 0)
        if (d34 >= -_19)
          if (d34 <= _19) {
            const y33 = 1 / h26;
            u35 *= y33, d34 *= y33, m33 = u35 * (u35 + a22 * d34 + 2 * o12) + d34 * (a22 * u35 + d34 + 2 * l25) + c27;
          } else
            d34 = n33, u35 = Math.max(0, -(a22 * d34 + o12)), m33 = -u35 * u35 + d34 * (d34 + 2 * l25) + c27;
        else
          d34 = -n33, u35 = Math.max(0, -(a22 * d34 + o12)), m33 = -u35 * u35 + d34 * (d34 + 2 * l25) + c27;
      else
        d34 <= -_19 ? (u35 = Math.max(0, -(-a22 * n33 + o12)), d34 = u35 > 0 ? -n33 : Math.min(Math.max(-n33, -l25), n33), m33 = -u35 * u35 + d34 * (d34 + 2 * l25) + c27) : d34 <= _19 ? (u35 = 0, d34 = Math.min(Math.max(-n33, -l25), n33), m33 = d34 * (d34 + 2 * l25) + c27) : (u35 = Math.max(0, -(a22 * n33 + o12)), d34 = u35 > 0 ? n33 : Math.min(Math.max(-n33, -l25), n33), m33 = -u35 * u35 + d34 * (d34 + 2 * l25) + c27);
    else
      d34 = a22 > 0 ? -n33 : n33, u35 = Math.max(0, -(a22 * d34 + o12)), m33 = -u35 * u35 + d34 * (d34 + 2 * l25) + c27;
    return i27 && i27.copy(this.origin).addScaledVector(this.direction, u35), r24 && r24.copy(ka2).addScaledVector(vs2, d34), m33;
  }
  intersectSphere(e11, t19) {
    Ii4.subVectors(e11.center, this.origin);
    const i27 = Ii4.dot(this.direction), r24 = Ii4.dot(Ii4) - i27 * i27, n33 = e11.radius * e11.radius;
    if (r24 > n33)
      return null;
    const a22 = Math.sqrt(n33 - r24), o12 = i27 - a22, l25 = i27 + a22;
    return l25 < 0 ? null : o12 < 0 ? this.at(l25, t19) : this.at(o12, t19);
  }
  intersectsSphere(e11) {
    return this.distanceSqToPoint(e11.center) <= e11.radius * e11.radius;
  }
  distanceToPlane(e11) {
    const t19 = e11.normal.dot(this.direction);
    if (t19 === 0)
      return e11.distanceToPoint(this.origin) === 0 ? 0 : null;
    const i27 = -(this.origin.dot(e11.normal) + e11.constant) / t19;
    return i27 >= 0 ? i27 : null;
  }
  intersectPlane(e11, t19) {
    const i27 = this.distanceToPlane(e11);
    return i27 === null ? null : this.at(i27, t19);
  }
  intersectsPlane(e11) {
    const t19 = e11.distanceToPoint(this.origin);
    return t19 === 0 || e11.normal.dot(this.direction) * t19 < 0;
  }
  intersectBox(e11, t19) {
    let i27, r24, n33, a22, o12, l25;
    const c27 = 1 / this.direction.x, h26 = 1 / this.direction.y, u35 = 1 / this.direction.z, d34 = this.origin;
    return c27 >= 0 ? (i27 = (e11.min.x - d34.x) * c27, r24 = (e11.max.x - d34.x) * c27) : (i27 = (e11.max.x - d34.x) * c27, r24 = (e11.min.x - d34.x) * c27), h26 >= 0 ? (n33 = (e11.min.y - d34.y) * h26, a22 = (e11.max.y - d34.y) * h26) : (n33 = (e11.max.y - d34.y) * h26, a22 = (e11.min.y - d34.y) * h26), i27 > a22 || n33 > r24 || ((n33 > i27 || isNaN(i27)) && (i27 = n33), (a22 < r24 || isNaN(r24)) && (r24 = a22), u35 >= 0 ? (o12 = (e11.min.z - d34.z) * u35, l25 = (e11.max.z - d34.z) * u35) : (o12 = (e11.max.z - d34.z) * u35, l25 = (e11.min.z - d34.z) * u35), i27 > l25 || o12 > r24) || ((o12 > i27 || i27 !== i27) && (i27 = o12), (l25 < r24 || r24 !== r24) && (r24 = l25), r24 < 0) ? null : this.at(i27 >= 0 ? i27 : r24, t19);
  }
  intersectsBox(e11) {
    return this.intersectBox(e11, Ii4) !== null;
  }
  intersectTriangle(e11, t19, i27, r24, n33) {
    Ua2.subVectors(t19, e11), ys2.subVectors(i27, e11), Oa2.crossVectors(Ua2, ys2);
    let a22 = this.direction.dot(Oa2), o12;
    if (a22 > 0) {
      if (r24)
        return null;
      o12 = 1;
    } else if (a22 < 0)
      o12 = -1, a22 = -a22;
    else
      return null;
    Yi4.subVectors(this.origin, e11);
    const l25 = o12 * this.direction.dot(ys2.crossVectors(Yi4, ys2));
    if (l25 < 0)
      return null;
    const c27 = o12 * this.direction.dot(Ua2.cross(Yi4));
    if (c27 < 0 || l25 + c27 > a22)
      return null;
    const h26 = -o12 * Yi4.dot(Oa2);
    return h26 < 0 ? null : this.at(h26 / a22, n33);
  }
  applyMatrix4(e11) {
    return this.origin.applyMatrix4(e11), this.direction.transformDirection(e11), this;
  }
  equals(e11) {
    return e11.origin.equals(this.origin) && e11.direction.equals(this.direction);
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var He6 = class _He {
  constructor() {
    _He.prototype.isMatrix4 = true, this.elements = [
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ];
  }
  set(e11, t19, i27, r24, n33, a22, o12, l25, c27, h26, u35, d34, m33, _19, y33, f39) {
    const p26 = this.elements;
    return p26[0] = e11, p26[4] = t19, p26[8] = i27, p26[12] = r24, p26[1] = n33, p26[5] = a22, p26[9] = o12, p26[13] = l25, p26[2] = c27, p26[6] = h26, p26[10] = u35, p26[14] = d34, p26[3] = m33, p26[7] = _19, p26[11] = y33, p26[15] = f39, this;
  }
  identity() {
    return this.set(
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  clone() {
    return new _He().fromArray(this.elements);
  }
  copy(e11) {
    const t19 = this.elements, i27 = e11.elements;
    return t19[0] = i27[0], t19[1] = i27[1], t19[2] = i27[2], t19[3] = i27[3], t19[4] = i27[4], t19[5] = i27[5], t19[6] = i27[6], t19[7] = i27[7], t19[8] = i27[8], t19[9] = i27[9], t19[10] = i27[10], t19[11] = i27[11], t19[12] = i27[12], t19[13] = i27[13], t19[14] = i27[14], t19[15] = i27[15], this;
  }
  copyPosition(e11) {
    const t19 = this.elements, i27 = e11.elements;
    return t19[12] = i27[12], t19[13] = i27[13], t19[14] = i27[14], this;
  }
  setFromMatrix3(e11) {
    const t19 = e11.elements;
    return this.set(
      t19[0],
      t19[3],
      t19[6],
      0,
      t19[1],
      t19[4],
      t19[7],
      0,
      t19[2],
      t19[5],
      t19[8],
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  extractBasis(e11, t19, i27) {
    return e11.setFromMatrixColumn(this, 0), t19.setFromMatrixColumn(this, 1), i27.setFromMatrixColumn(this, 2), this;
  }
  makeBasis(e11, t19, i27) {
    return this.set(
      e11.x,
      t19.x,
      i27.x,
      0,
      e11.y,
      t19.y,
      i27.y,
      0,
      e11.z,
      t19.z,
      i27.z,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  extractRotation(e11) {
    const t19 = this.elements, i27 = e11.elements, r24 = 1 / Xr5.setFromMatrixColumn(e11, 0).length(), n33 = 1 / Xr5.setFromMatrixColumn(e11, 1).length(), a22 = 1 / Xr5.setFromMatrixColumn(e11, 2).length();
    return t19[0] = i27[0] * r24, t19[1] = i27[1] * r24, t19[2] = i27[2] * r24, t19[3] = 0, t19[4] = i27[4] * n33, t19[5] = i27[5] * n33, t19[6] = i27[6] * n33, t19[7] = 0, t19[8] = i27[8] * a22, t19[9] = i27[9] * a22, t19[10] = i27[10] * a22, t19[11] = 0, t19[12] = 0, t19[13] = 0, t19[14] = 0, t19[15] = 1, this;
  }
  makeRotationFromEuler(e11) {
    const t19 = this.elements, i27 = e11.x, r24 = e11.y, n33 = e11.z, a22 = Math.cos(i27), o12 = Math.sin(i27), l25 = Math.cos(r24), c27 = Math.sin(r24), h26 = Math.cos(n33), u35 = Math.sin(n33);
    if (e11.order === "XYZ") {
      const d34 = a22 * h26, m33 = a22 * u35, _19 = o12 * h26, y33 = o12 * u35;
      t19[0] = l25 * h26, t19[4] = -l25 * u35, t19[8] = c27, t19[1] = m33 + _19 * c27, t19[5] = d34 - y33 * c27, t19[9] = -o12 * l25, t19[2] = y33 - d34 * c27, t19[6] = _19 + m33 * c27, t19[10] = a22 * l25;
    } else if (e11.order === "YXZ") {
      const d34 = l25 * h26, m33 = l25 * u35, _19 = c27 * h26, y33 = c27 * u35;
      t19[0] = d34 + y33 * o12, t19[4] = _19 * o12 - m33, t19[8] = a22 * c27, t19[1] = a22 * u35, t19[5] = a22 * h26, t19[9] = -o12, t19[2] = m33 * o12 - _19, t19[6] = y33 + d34 * o12, t19[10] = a22 * l25;
    } else if (e11.order === "ZXY") {
      const d34 = l25 * h26, m33 = l25 * u35, _19 = c27 * h26, y33 = c27 * u35;
      t19[0] = d34 - y33 * o12, t19[4] = -a22 * u35, t19[8] = _19 + m33 * o12, t19[1] = m33 + _19 * o12, t19[5] = a22 * h26, t19[9] = y33 - d34 * o12, t19[2] = -a22 * c27, t19[6] = o12, t19[10] = a22 * l25;
    } else if (e11.order === "ZYX") {
      const d34 = a22 * h26, m33 = a22 * u35, _19 = o12 * h26, y33 = o12 * u35;
      t19[0] = l25 * h26, t19[4] = _19 * c27 - m33, t19[8] = d34 * c27 + y33, t19[1] = l25 * u35, t19[5] = y33 * c27 + d34, t19[9] = m33 * c27 - _19, t19[2] = -c27, t19[6] = o12 * l25, t19[10] = a22 * l25;
    } else if (e11.order === "YZX") {
      const d34 = a22 * l25, m33 = a22 * c27, _19 = o12 * l25, y33 = o12 * c27;
      t19[0] = l25 * h26, t19[4] = y33 - d34 * u35, t19[8] = _19 * u35 + m33, t19[1] = u35, t19[5] = a22 * h26, t19[9] = -o12 * h26, t19[2] = -c27 * h26, t19[6] = m33 * u35 + _19, t19[10] = d34 - y33 * u35;
    } else if (e11.order === "XZY") {
      const d34 = a22 * l25, m33 = a22 * c27, _19 = o12 * l25, y33 = o12 * c27;
      t19[0] = l25 * h26, t19[4] = -u35, t19[8] = c27 * h26, t19[1] = d34 * u35 + y33, t19[5] = a22 * h26, t19[9] = m33 * u35 - _19, t19[2] = _19 * u35 - m33, t19[6] = o12 * h26, t19[10] = y33 * u35 + d34;
    }
    return t19[3] = 0, t19[7] = 0, t19[11] = 0, t19[12] = 0, t19[13] = 0, t19[14] = 0, t19[15] = 1, this;
  }
  makeRotationFromQuaternion(e11) {
    return this.compose(wd2, e11, Sd2);
  }
  lookAt(e11, t19, i27) {
    const r24 = this.elements;
    return ri6.subVectors(e11, t19), ri6.lengthSq() === 0 && (ri6.z = 1), ri6.normalize(), Zi3.crossVectors(i27, ri6), Zi3.lengthSq() === 0 && (Math.abs(i27.z) === 1 ? ri6.x += 1e-4 : ri6.z += 1e-4, ri6.normalize(), Zi3.crossVectors(i27, ri6)), Zi3.normalize(), xs2.crossVectors(ri6, Zi3), r24[0] = Zi3.x, r24[4] = xs2.x, r24[8] = ri6.x, r24[1] = Zi3.y, r24[5] = xs2.y, r24[9] = ri6.y, r24[2] = Zi3.z, r24[6] = xs2.z, r24[10] = ri6.z, this;
  }
  multiply(e11) {
    return this.multiplyMatrices(this, e11);
  }
  premultiply(e11) {
    return this.multiplyMatrices(e11, this);
  }
  multiplyMatrices(e11, t19) {
    const i27 = e11.elements, r24 = t19.elements, n33 = this.elements, a22 = i27[0], o12 = i27[4], l25 = i27[8], c27 = i27[12], h26 = i27[1], u35 = i27[5], d34 = i27[9], m33 = i27[13], _19 = i27[2], y33 = i27[6], f39 = i27[10], p26 = i27[14], A17 = i27[3], M12 = i27[7], E24 = i27[11], w29 = i27[15], I16 = r24[0], D17 = r24[4], P19 = r24[8], x34 = r24[12], C19 = r24[1], G15 = r24[5], z19 = r24[9], U18 = r24[13], V14 = r24[2], j18 = r24[6], W8 = r24[10], re8 = r24[14], $24 = r24[3], ie8 = r24[7], le7 = r24[11], fe7 = r24[15];
    return n33[0] = a22 * I16 + o12 * C19 + l25 * V14 + c27 * $24, n33[4] = a22 * D17 + o12 * G15 + l25 * j18 + c27 * ie8, n33[8] = a22 * P19 + o12 * z19 + l25 * W8 + c27 * le7, n33[12] = a22 * x34 + o12 * U18 + l25 * re8 + c27 * fe7, n33[1] = h26 * I16 + u35 * C19 + d34 * V14 + m33 * $24, n33[5] = h26 * D17 + u35 * G15 + d34 * j18 + m33 * ie8, n33[9] = h26 * P19 + u35 * z19 + d34 * W8 + m33 * le7, n33[13] = h26 * x34 + u35 * U18 + d34 * re8 + m33 * fe7, n33[2] = _19 * I16 + y33 * C19 + f39 * V14 + p26 * $24, n33[6] = _19 * D17 + y33 * G15 + f39 * j18 + p26 * ie8, n33[10] = _19 * P19 + y33 * z19 + f39 * W8 + p26 * le7, n33[14] = _19 * x34 + y33 * U18 + f39 * re8 + p26 * fe7, n33[3] = A17 * I16 + M12 * C19 + E24 * V14 + w29 * $24, n33[7] = A17 * D17 + M12 * G15 + E24 * j18 + w29 * ie8, n33[11] = A17 * P19 + M12 * z19 + E24 * W8 + w29 * le7, n33[15] = A17 * x34 + M12 * U18 + E24 * re8 + w29 * fe7, this;
  }
  multiplyScalar(e11) {
    const t19 = this.elements;
    return t19[0] *= e11, t19[4] *= e11, t19[8] *= e11, t19[12] *= e11, t19[1] *= e11, t19[5] *= e11, t19[9] *= e11, t19[13] *= e11, t19[2] *= e11, t19[6] *= e11, t19[10] *= e11, t19[14] *= e11, t19[3] *= e11, t19[7] *= e11, t19[11] *= e11, t19[15] *= e11, this;
  }
  determinant() {
    const e11 = this.elements, t19 = e11[0], i27 = e11[4], r24 = e11[8], n33 = e11[12], a22 = e11[1], o12 = e11[5], l25 = e11[9], c27 = e11[13], h26 = e11[2], u35 = e11[6], d34 = e11[10], m33 = e11[14], _19 = e11[3], y33 = e11[7], f39 = e11[11], p26 = e11[15];
    return _19 * (+n33 * l25 * u35 - r24 * c27 * u35 - n33 * o12 * d34 + i27 * c27 * d34 + r24 * o12 * m33 - i27 * l25 * m33) + y33 * (+t19 * l25 * m33 - t19 * c27 * d34 + n33 * a22 * d34 - r24 * a22 * m33 + r24 * c27 * h26 - n33 * l25 * h26) + f39 * (+t19 * c27 * u35 - t19 * o12 * m33 - n33 * a22 * u35 + i27 * a22 * m33 + n33 * o12 * h26 - i27 * c27 * h26) + p26 * (-r24 * o12 * h26 - t19 * l25 * u35 + t19 * o12 * d34 + r24 * a22 * u35 - i27 * a22 * d34 + i27 * l25 * h26);
  }
  transpose() {
    const e11 = this.elements;
    let t19;
    return t19 = e11[1], e11[1] = e11[4], e11[4] = t19, t19 = e11[2], e11[2] = e11[8], e11[8] = t19, t19 = e11[6], e11[6] = e11[9], e11[9] = t19, t19 = e11[3], e11[3] = e11[12], e11[12] = t19, t19 = e11[7], e11[7] = e11[13], e11[13] = t19, t19 = e11[11], e11[11] = e11[14], e11[14] = t19, this;
  }
  setPosition(e11, t19, i27) {
    const r24 = this.elements;
    return e11.isVector3 ? (r24[12] = e11.x, r24[13] = e11.y, r24[14] = e11.z) : (r24[12] = e11, r24[13] = t19, r24[14] = i27), this;
  }
  invert() {
    const e11 = this.elements, t19 = e11[0], i27 = e11[1], r24 = e11[2], n33 = e11[3], a22 = e11[4], o12 = e11[5], l25 = e11[6], c27 = e11[7], h26 = e11[8], u35 = e11[9], d34 = e11[10], m33 = e11[11], _19 = e11[12], y33 = e11[13], f39 = e11[14], p26 = e11[15], A17 = u35 * f39 * c27 - y33 * d34 * c27 + y33 * l25 * m33 - o12 * f39 * m33 - u35 * l25 * p26 + o12 * d34 * p26, M12 = _19 * d34 * c27 - h26 * f39 * c27 - _19 * l25 * m33 + a22 * f39 * m33 + h26 * l25 * p26 - a22 * d34 * p26, E24 = h26 * y33 * c27 - _19 * u35 * c27 + _19 * o12 * m33 - a22 * y33 * m33 - h26 * o12 * p26 + a22 * u35 * p26, w29 = _19 * u35 * l25 - h26 * y33 * l25 - _19 * o12 * d34 + a22 * y33 * d34 + h26 * o12 * f39 - a22 * u35 * f39, I16 = t19 * A17 + i27 * M12 + r24 * E24 + n33 * w29;
    if (I16 === 0)
      return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
    const D17 = 1 / I16;
    return e11[0] = A17 * D17, e11[1] = (y33 * d34 * n33 - u35 * f39 * n33 - y33 * r24 * m33 + i27 * f39 * m33 + u35 * r24 * p26 - i27 * d34 * p26) * D17, e11[2] = (o12 * f39 * n33 - y33 * l25 * n33 + y33 * r24 * c27 - i27 * f39 * c27 - o12 * r24 * p26 + i27 * l25 * p26) * D17, e11[3] = (u35 * l25 * n33 - o12 * d34 * n33 - u35 * r24 * c27 + i27 * d34 * c27 + o12 * r24 * m33 - i27 * l25 * m33) * D17, e11[4] = M12 * D17, e11[5] = (h26 * f39 * n33 - _19 * d34 * n33 + _19 * r24 * m33 - t19 * f39 * m33 - h26 * r24 * p26 + t19 * d34 * p26) * D17, e11[6] = (_19 * l25 * n33 - a22 * f39 * n33 - _19 * r24 * c27 + t19 * f39 * c27 + a22 * r24 * p26 - t19 * l25 * p26) * D17, e11[7] = (a22 * d34 * n33 - h26 * l25 * n33 + h26 * r24 * c27 - t19 * d34 * c27 - a22 * r24 * m33 + t19 * l25 * m33) * D17, e11[8] = E24 * D17, e11[9] = (_19 * u35 * n33 - h26 * y33 * n33 - _19 * i27 * m33 + t19 * y33 * m33 + h26 * i27 * p26 - t19 * u35 * p26) * D17, e11[10] = (a22 * y33 * n33 - _19 * o12 * n33 + _19 * i27 * c27 - t19 * y33 * c27 - a22 * i27 * p26 + t19 * o12 * p26) * D17, e11[11] = (h26 * o12 * n33 - a22 * u35 * n33 - h26 * i27 * c27 + t19 * u35 * c27 + a22 * i27 * m33 - t19 * o12 * m33) * D17, e11[12] = w29 * D17, e11[13] = (h26 * y33 * r24 - _19 * u35 * r24 + _19 * i27 * d34 - t19 * y33 * d34 - h26 * i27 * f39 + t19 * u35 * f39) * D17, e11[14] = (_19 * o12 * r24 - a22 * y33 * r24 - _19 * i27 * l25 + t19 * y33 * l25 + a22 * i27 * f39 - t19 * o12 * f39) * D17, e11[15] = (a22 * u35 * r24 - h26 * o12 * r24 + h26 * i27 * l25 - t19 * u35 * l25 - a22 * i27 * d34 + t19 * o12 * d34) * D17, this;
  }
  scale(e11) {
    const t19 = this.elements, i27 = e11.x, r24 = e11.y, n33 = e11.z;
    return t19[0] *= i27, t19[4] *= r24, t19[8] *= n33, t19[1] *= i27, t19[5] *= r24, t19[9] *= n33, t19[2] *= i27, t19[6] *= r24, t19[10] *= n33, t19[3] *= i27, t19[7] *= r24, t19[11] *= n33, this;
  }
  getMaxScaleOnAxis() {
    const e11 = this.elements, t19 = e11[0] * e11[0] + e11[1] * e11[1] + e11[2] * e11[2], i27 = e11[4] * e11[4] + e11[5] * e11[5] + e11[6] * e11[6], r24 = e11[8] * e11[8] + e11[9] * e11[9] + e11[10] * e11[10];
    return Math.sqrt(Math.max(t19, i27, r24));
  }
  makeTranslation(e11, t19, i27) {
    return this.set(
      1,
      0,
      0,
      e11,
      0,
      1,
      0,
      t19,
      0,
      0,
      1,
      i27,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationX(e11) {
    const t19 = Math.cos(e11), i27 = Math.sin(e11);
    return this.set(
      1,
      0,
      0,
      0,
      0,
      t19,
      -i27,
      0,
      0,
      i27,
      t19,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationY(e11) {
    const t19 = Math.cos(e11), i27 = Math.sin(e11);
    return this.set(
      t19,
      0,
      i27,
      0,
      0,
      1,
      0,
      0,
      -i27,
      0,
      t19,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationZ(e11) {
    const t19 = Math.cos(e11), i27 = Math.sin(e11);
    return this.set(
      t19,
      -i27,
      0,
      0,
      i27,
      t19,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationAxis(e11, t19) {
    const i27 = Math.cos(t19), r24 = Math.sin(t19), n33 = 1 - i27, a22 = e11.x, o12 = e11.y, l25 = e11.z, c27 = n33 * a22, h26 = n33 * o12;
    return this.set(
      c27 * a22 + i27,
      c27 * o12 - r24 * l25,
      c27 * l25 + r24 * o12,
      0,
      c27 * o12 + r24 * l25,
      h26 * o12 + i27,
      h26 * l25 - r24 * a22,
      0,
      c27 * l25 - r24 * o12,
      h26 * l25 + r24 * a22,
      n33 * l25 * l25 + i27,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeScale(e11, t19, i27) {
    return this.set(
      e11,
      0,
      0,
      0,
      0,
      t19,
      0,
      0,
      0,
      0,
      i27,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeShear(e11, t19, i27, r24, n33, a22) {
    return this.set(
      1,
      i27,
      n33,
      0,
      e11,
      1,
      a22,
      0,
      t19,
      r24,
      1,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  compose(e11, t19, i27) {
    const r24 = this.elements, n33 = t19._x, a22 = t19._y, o12 = t19._z, l25 = t19._w, c27 = n33 + n33, h26 = a22 + a22, u35 = o12 + o12, d34 = n33 * c27, m33 = n33 * h26, _19 = n33 * u35, y33 = a22 * h26, f39 = a22 * u35, p26 = o12 * u35, A17 = l25 * c27, M12 = l25 * h26, E24 = l25 * u35, w29 = i27.x, I16 = i27.y, D17 = i27.z;
    return r24[0] = (1 - (y33 + p26)) * w29, r24[1] = (m33 + E24) * w29, r24[2] = (_19 - M12) * w29, r24[3] = 0, r24[4] = (m33 - E24) * I16, r24[5] = (1 - (d34 + p26)) * I16, r24[6] = (f39 + A17) * I16, r24[7] = 0, r24[8] = (_19 + M12) * D17, r24[9] = (f39 - A17) * D17, r24[10] = (1 - (d34 + y33)) * D17, r24[11] = 0, r24[12] = e11.x, r24[13] = e11.y, r24[14] = e11.z, r24[15] = 1, this;
  }
  decompose(e11, t19, i27) {
    const r24 = this.elements;
    let n33 = Xr5.set(r24[0], r24[1], r24[2]).length();
    const a22 = Xr5.set(r24[4], r24[5], r24[6]).length(), o12 = Xr5.set(r24[8], r24[9], r24[10]).length();
    this.determinant() < 0 && (n33 = -n33), e11.x = r24[12], e11.y = r24[13], e11.z = r24[14], gi6.copy(this);
    const l25 = 1 / n33, c27 = 1 / a22, h26 = 1 / o12;
    return gi6.elements[0] *= l25, gi6.elements[1] *= l25, gi6.elements[2] *= l25, gi6.elements[4] *= c27, gi6.elements[5] *= c27, gi6.elements[6] *= c27, gi6.elements[8] *= h26, gi6.elements[9] *= h26, gi6.elements[10] *= h26, t19.setFromRotationMatrix(gi6), i27.x = n33, i27.y = a22, i27.z = o12, this;
  }
  makePerspective(e11, t19, i27, r24, n33, a22) {
    const o12 = this.elements, l25 = 2 * n33 / (t19 - e11), c27 = 2 * n33 / (i27 - r24), h26 = (t19 + e11) / (t19 - e11), u35 = (i27 + r24) / (i27 - r24), d34 = -(a22 + n33) / (a22 - n33), m33 = -2 * a22 * n33 / (a22 - n33);
    return o12[0] = l25, o12[4] = 0, o12[8] = h26, o12[12] = 0, o12[1] = 0, o12[5] = c27, o12[9] = u35, o12[13] = 0, o12[2] = 0, o12[6] = 0, o12[10] = d34, o12[14] = m33, o12[3] = 0, o12[7] = 0, o12[11] = -1, o12[15] = 0, this;
  }
  makeOrthographic(e11, t19, i27, r24, n33, a22) {
    const o12 = this.elements, l25 = 1 / (t19 - e11), c27 = 1 / (i27 - r24), h26 = 1 / (a22 - n33), u35 = (t19 + e11) * l25, d34 = (i27 + r24) * c27, m33 = (a22 + n33) * h26;
    return o12[0] = 2 * l25, o12[4] = 0, o12[8] = 0, o12[12] = -u35, o12[1] = 0, o12[5] = 2 * c27, o12[9] = 0, o12[13] = -d34, o12[2] = 0, o12[6] = 0, o12[10] = -2 * h26, o12[14] = -m33, o12[3] = 0, o12[7] = 0, o12[11] = 0, o12[15] = 1, this;
  }
  equals(e11) {
    const t19 = this.elements, i27 = e11.elements;
    for (let r24 = 0; r24 < 16; r24++)
      if (t19[r24] !== i27[r24])
        return false;
    return true;
  }
  fromArray(e11, t19 = 0) {
    for (let i27 = 0; i27 < 16; i27++)
      this.elements[i27] = e11[i27 + t19];
    return this;
  }
  toArray(e11 = [], t19 = 0) {
    const i27 = this.elements;
    return e11[t19] = i27[0], e11[t19 + 1] = i27[1], e11[t19 + 2] = i27[2], e11[t19 + 3] = i27[3], e11[t19 + 4] = i27[4], e11[t19 + 5] = i27[5], e11[t19 + 6] = i27[6], e11[t19 + 7] = i27[7], e11[t19 + 8] = i27[8], e11[t19 + 9] = i27[9], e11[t19 + 10] = i27[10], e11[t19 + 11] = i27[11], e11[t19 + 12] = i27[12], e11[t19 + 13] = i27[13], e11[t19 + 14] = i27[14], e11[t19 + 15] = i27[15], e11;
  }
};
var Xr5 = new k18();
var gi6 = new He6();
var wd2 = new k18(0, 0, 0);
var Sd2 = new k18(1, 1, 1);
var Zi3 = new k18();
var xs2 = new k18();
var ri6 = new k18();
var kl2 = new He6();
var Ul2 = new jt8();
var Cn5 = class _Cn {
  constructor(e11 = 0, t19 = 0, i27 = 0, r24 = _Cn.DEFAULT_ORDER) {
    this.isEuler = true, this._x = e11, this._y = t19, this._z = i27, this._order = r24;
  }
  get x() {
    return this._x;
  }
  set x(e11) {
    this._x = e11, this._onChangeCallback();
  }
  get y() {
    return this._y;
  }
  set y(e11) {
    this._y = e11, this._onChangeCallback();
  }
  get z() {
    return this._z;
  }
  set z(e11) {
    this._z = e11, this._onChangeCallback();
  }
  get order() {
    return this._order;
  }
  set order(e11) {
    this._order = e11, this._onChangeCallback();
  }
  set(e11, t19, i27, r24 = this._order) {
    return this._x = e11, this._y = t19, this._z = i27, this._order = r24, this._onChangeCallback(), this;
  }
  clone() {
    return new this.constructor(this._x, this._y, this._z, this._order);
  }
  copy(e11) {
    return this._x = e11._x, this._y = e11._y, this._z = e11._z, this._order = e11._order, this._onChangeCallback(), this;
  }
  setFromRotationMatrix(e11, t19 = this._order, i27 = true) {
    const r24 = e11.elements, n33 = r24[0], a22 = r24[4], o12 = r24[8], l25 = r24[1], c27 = r24[5], h26 = r24[9], u35 = r24[2], d34 = r24[6], m33 = r24[10];
    switch (t19) {
      case "XYZ":
        this._y = Math.asin(Gt6(o12, -1, 1)), Math.abs(o12) < 0.9999999 ? (this._x = Math.atan2(-h26, m33), this._z = Math.atan2(-a22, n33)) : (this._x = Math.atan2(d34, c27), this._z = 0);
        break;
      case "YXZ":
        this._x = Math.asin(-Gt6(h26, -1, 1)), Math.abs(h26) < 0.9999999 ? (this._y = Math.atan2(o12, m33), this._z = Math.atan2(l25, c27)) : (this._y = Math.atan2(-u35, n33), this._z = 0);
        break;
      case "ZXY":
        this._x = Math.asin(Gt6(d34, -1, 1)), Math.abs(d34) < 0.9999999 ? (this._y = Math.atan2(-u35, m33), this._z = Math.atan2(-a22, c27)) : (this._y = 0, this._z = Math.atan2(l25, n33));
        break;
      case "ZYX":
        this._y = Math.asin(-Gt6(u35, -1, 1)), Math.abs(u35) < 0.9999999 ? (this._x = Math.atan2(d34, m33), this._z = Math.atan2(l25, n33)) : (this._x = 0, this._z = Math.atan2(-a22, c27));
        break;
      case "YZX":
        this._z = Math.asin(Gt6(l25, -1, 1)), Math.abs(l25) < 0.9999999 ? (this._x = Math.atan2(-h26, c27), this._y = Math.atan2(-u35, n33)) : (this._x = 0, this._y = Math.atan2(o12, m33));
        break;
      case "XZY":
        this._z = Math.asin(-Gt6(a22, -1, 1)), Math.abs(a22) < 0.9999999 ? (this._x = Math.atan2(d34, c27), this._y = Math.atan2(o12, n33)) : (this._x = Math.atan2(-h26, m33), this._y = 0);
        break;
      default:
        console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: " + t19);
    }
    return this._order = t19, i27 === true && this._onChangeCallback(), this;
  }
  setFromQuaternion(e11, t19, i27) {
    return kl2.makeRotationFromQuaternion(e11), this.setFromRotationMatrix(kl2, t19, i27);
  }
  setFromVector3(e11, t19 = this._order) {
    return this.set(e11.x, e11.y, e11.z, t19);
  }
  reorder(e11) {
    return Ul2.setFromEuler(this), this.setFromQuaternion(Ul2, e11);
  }
  equals(e11) {
    return e11._x === this._x && e11._y === this._y && e11._z === this._z && e11._order === this._order;
  }
  fromArray(e11) {
    return this._x = e11[0], this._y = e11[1], this._z = e11[2], e11[3] !== void 0 && (this._order = e11[3]), this._onChangeCallback(), this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this._x, e11[t19 + 1] = this._y, e11[t19 + 2] = this._z, e11[t19 + 3] = this._order, e11;
  }
  _onChange(e11) {
    return this._onChangeCallback = e11, this;
  }
  _onChangeCallback() {
  }
  *[Symbol.iterator]() {
    yield this._x, yield this._y, yield this._z, yield this._order;
  }
};
Cn5.DEFAULT_ORDER = "XYZ";
var gh2 = class {
  constructor() {
    this.mask = 1;
  }
  set(e11) {
    this.mask = (1 << e11 | 0) >>> 0;
  }
  enable(e11) {
    this.mask |= 1 << e11 | 0;
  }
  enableAll() {
    this.mask = -1;
  }
  toggle(e11) {
    this.mask ^= 1 << e11 | 0;
  }
  disable(e11) {
    this.mask &= ~(1 << e11 | 0);
  }
  disableAll() {
    this.mask = 0;
  }
  test(e11) {
    return (this.mask & e11.mask) !== 0;
  }
  isEnabled(e11) {
    return (this.mask & (1 << e11 | 0)) !== 0;
  }
};
var Td2 = 0;
var Ol2 = new k18();
var qr5 = new jt8();
var Di3 = new He6();
var bs2 = new k18();
var zn5 = new k18();
var Ed2 = new k18();
var Ad2 = new jt8();
var zl2 = new k18(1, 0, 0);
var Bl2 = new k18(0, 1, 0);
var Fl2 = new k18(0, 0, 1);
var Ld2 = { type: "added" };
var Hl2 = { type: "removed" };
var _t7 = class __t extends Ar5 {
  constructor() {
    super(), this.isObject3D = true, Object.defineProperty(this, "id", { value: Td2++ }), this.uuid = bi6(), this.name = "", this.type = "Object3D", this.parent = null, this.children = [], this.up = __t.DEFAULT_UP.clone();
    const e11 = new k18(), t19 = new Cn5(), i27 = new jt8(), r24 = new k18(1, 1, 1);
    function n33() {
      i27.setFromEuler(t19, false);
    }
    function a22() {
      t19.setFromQuaternion(i27, void 0, false);
    }
    t19._onChange(n33), i27._onChange(a22), Object.defineProperties(this, {
      position: {
        configurable: true,
        enumerable: true,
        value: e11
      },
      rotation: {
        configurable: true,
        enumerable: true,
        value: t19
      },
      quaternion: {
        configurable: true,
        enumerable: true,
        value: i27
      },
      scale: {
        configurable: true,
        enumerable: true,
        value: r24
      },
      modelViewMatrix: {
        value: new He6()
      },
      normalMatrix: {
        value: new Ke5()
      }
    }), this.matrix = new He6(), this.matrixWorld = new He6(), this.matrixAutoUpdate = __t.DEFAULT_MATRIX_AUTO_UPDATE, this.matrixWorldNeedsUpdate = false, this.matrixWorldAutoUpdate = __t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE, this.layers = new gh2(), this.visible = true, this.castShadow = false, this.receiveShadow = false, this.frustumCulled = true, this.renderOrder = 0, this.animations = [], this.userData = {};
  }
  onBeforeRender() {
  }
  onAfterRender() {
  }
  applyMatrix4(e11) {
    this.matrixAutoUpdate && this.updateMatrix(), this.matrix.premultiply(e11), this.matrix.decompose(this.position, this.quaternion, this.scale);
  }
  applyQuaternion(e11) {
    return this.quaternion.premultiply(e11), this;
  }
  setRotationFromAxisAngle(e11, t19) {
    this.quaternion.setFromAxisAngle(e11, t19);
  }
  setRotationFromEuler(e11) {
    this.quaternion.setFromEuler(e11, true);
  }
  setRotationFromMatrix(e11) {
    this.quaternion.setFromRotationMatrix(e11);
  }
  setRotationFromQuaternion(e11) {
    this.quaternion.copy(e11);
  }
  rotateOnAxis(e11, t19) {
    return qr5.setFromAxisAngle(e11, t19), this.quaternion.multiply(qr5), this;
  }
  rotateOnWorldAxis(e11, t19) {
    return qr5.setFromAxisAngle(e11, t19), this.quaternion.premultiply(qr5), this;
  }
  rotateX(e11) {
    return this.rotateOnAxis(zl2, e11);
  }
  rotateY(e11) {
    return this.rotateOnAxis(Bl2, e11);
  }
  rotateZ(e11) {
    return this.rotateOnAxis(Fl2, e11);
  }
  translateOnAxis(e11, t19) {
    return Ol2.copy(e11).applyQuaternion(this.quaternion), this.position.add(Ol2.multiplyScalar(t19)), this;
  }
  translateX(e11) {
    return this.translateOnAxis(zl2, e11);
  }
  translateY(e11) {
    return this.translateOnAxis(Bl2, e11);
  }
  translateZ(e11) {
    return this.translateOnAxis(Fl2, e11);
  }
  localToWorld(e11) {
    return this.updateWorldMatrix(true, false), e11.applyMatrix4(this.matrixWorld);
  }
  worldToLocal(e11) {
    return this.updateWorldMatrix(true, false), e11.applyMatrix4(Di3.copy(this.matrixWorld).invert());
  }
  lookAt(e11, t19, i27) {
    e11.isVector3 ? bs2.copy(e11) : bs2.set(e11, t19, i27);
    const r24 = this.parent;
    this.updateWorldMatrix(true, false), zn5.setFromMatrixPosition(this.matrixWorld), this.isCamera || this.isLight ? Di3.lookAt(zn5, bs2, this.up) : Di3.lookAt(bs2, zn5, this.up), this.quaternion.setFromRotationMatrix(Di3), r24 && (Di3.extractRotation(r24.matrixWorld), qr5.setFromRotationMatrix(Di3), this.quaternion.premultiply(qr5.invert()));
  }
  add(e11) {
    if (arguments.length > 1) {
      for (let t19 = 0; t19 < arguments.length; t19++)
        this.add(arguments[t19]);
      return this;
    }
    return e11 === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", e11), this) : (e11 && e11.isObject3D ? (e11.parent !== null && e11.parent.remove(e11), e11.parent = this, this.children.push(e11), e11.dispatchEvent(Ld2)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", e11), this);
  }
  remove(e11) {
    if (arguments.length > 1) {
      for (let i27 = 0; i27 < arguments.length; i27++)
        this.remove(arguments[i27]);
      return this;
    }
    const t19 = this.children.indexOf(e11);
    return t19 !== -1 && (e11.parent = null, this.children.splice(t19, 1), e11.dispatchEvent(Hl2)), this;
  }
  removeFromParent() {
    const e11 = this.parent;
    return e11 !== null && e11.remove(this), this;
  }
  clear() {
    for (let e11 = 0; e11 < this.children.length; e11++) {
      const t19 = this.children[e11];
      t19.parent = null, t19.dispatchEvent(Hl2);
    }
    return this.children.length = 0, this;
  }
  attach(e11) {
    return this.updateWorldMatrix(true, false), Di3.copy(this.matrixWorld).invert(), e11.parent !== null && (e11.parent.updateWorldMatrix(true, false), Di3.multiply(e11.parent.matrixWorld)), e11.applyMatrix4(Di3), this.add(e11), e11.updateWorldMatrix(false, true), this;
  }
  getObjectById(e11) {
    return this.getObjectByProperty("id", e11);
  }
  getObjectByName(e11) {
    return this.getObjectByProperty("name", e11);
  }
  getObjectByProperty(e11, t19) {
    if (this[e11] === t19)
      return this;
    for (let i27 = 0, r24 = this.children.length; i27 < r24; i27++) {
      const n33 = this.children[i27].getObjectByProperty(e11, t19);
      if (n33 !== void 0)
        return n33;
    }
  }
  getObjectsByProperty(e11, t19) {
    let i27 = [];
    this[e11] === t19 && i27.push(this);
    for (let r24 = 0, n33 = this.children.length; r24 < n33; r24++) {
      const a22 = this.children[r24].getObjectsByProperty(e11, t19);
      a22.length > 0 && (i27 = i27.concat(a22));
    }
    return i27;
  }
  getWorldPosition(e11) {
    return this.updateWorldMatrix(true, false), e11.setFromMatrixPosition(this.matrixWorld);
  }
  getWorldQuaternion(e11) {
    return this.updateWorldMatrix(true, false), this.matrixWorld.decompose(zn5, e11, Ed2), e11;
  }
  getWorldScale(e11) {
    return this.updateWorldMatrix(true, false), this.matrixWorld.decompose(zn5, Ad2, e11), e11;
  }
  getWorldDirection(e11) {
    this.updateWorldMatrix(true, false);
    const t19 = this.matrixWorld.elements;
    return e11.set(t19[8], t19[9], t19[10]).normalize();
  }
  raycast() {
  }
  traverse(e11) {
    e11(this);
    const t19 = this.children;
    for (let i27 = 0, r24 = t19.length; i27 < r24; i27++)
      t19[i27].traverse(e11);
  }
  traverseVisible(e11) {
    if (this.visible === false)
      return;
    e11(this);
    const t19 = this.children;
    for (let i27 = 0, r24 = t19.length; i27 < r24; i27++)
      t19[i27].traverseVisible(e11);
  }
  traverseAncestors(e11) {
    const t19 = this.parent;
    t19 !== null && (e11(t19), t19.traverseAncestors(e11));
  }
  updateMatrix() {
    this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = true;
  }
  updateMatrixWorld(e11) {
    this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || e11) && (this.parent === null ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = false, e11 = true);
    const t19 = this.children;
    for (let i27 = 0, r24 = t19.length; i27 < r24; i27++) {
      const n33 = t19[i27];
      (n33.matrixWorldAutoUpdate === true || e11 === true) && n33.updateMatrixWorld(e11);
    }
  }
  updateWorldMatrix(e11, t19) {
    const i27 = this.parent;
    if (e11 === true && i27 !== null && i27.matrixWorldAutoUpdate === true && i27.updateWorldMatrix(true, false), this.matrixAutoUpdate && this.updateMatrix(), this.parent === null ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), t19 === true) {
      const r24 = this.children;
      for (let n33 = 0, a22 = r24.length; n33 < a22; n33++) {
        const o12 = r24[n33];
        o12.matrixWorldAutoUpdate === true && o12.updateWorldMatrix(false, true);
      }
    }
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string", i27 = {};
    t19 && (e11 = {
      geometries: {},
      materials: {},
      textures: {},
      images: {},
      shapes: {},
      skeletons: {},
      animations: {},
      nodes: {}
    }, i27.metadata = {
      version: 4.5,
      type: "Object",
      generator: "Object3D.toJSON"
    });
    const r24 = {};
    r24.uuid = this.uuid, r24.type = this.type, this.name !== "" && (r24.name = this.name), this.castShadow === true && (r24.castShadow = true), this.receiveShadow === true && (r24.receiveShadow = true), this.visible === false && (r24.visible = false), this.frustumCulled === false && (r24.frustumCulled = false), this.renderOrder !== 0 && (r24.renderOrder = this.renderOrder), Object.keys(this.userData).length > 0 && (r24.userData = this.userData), r24.layers = this.layers.mask, r24.matrix = this.matrix.toArray(), r24.up = this.up.toArray(), this.matrixAutoUpdate === false && (r24.matrixAutoUpdate = false), this.isInstancedMesh && (r24.type = "InstancedMesh", r24.count = this.count, r24.instanceMatrix = this.instanceMatrix.toJSON(), this.instanceColor !== null && (r24.instanceColor = this.instanceColor.toJSON()));
    function n33(o12, l25) {
      return o12[l25.uuid] === void 0 && (o12[l25.uuid] = l25.toJSON(e11)), l25.uuid;
    }
    if (this.isScene)
      this.background && (this.background.isColor ? r24.background = this.background.toJSON() : this.background.isTexture && (r24.background = this.background.toJSON(e11).uuid)), this.environment && this.environment.isTexture && this.environment.isRenderTargetTexture !== true && (r24.environment = this.environment.toJSON(e11).uuid);
    else if (this.isMesh || this.isLine || this.isPoints) {
      r24.geometry = n33(e11.geometries, this.geometry);
      const o12 = this.geometry.parameters;
      if (o12 !== void 0 && o12.shapes !== void 0) {
        const l25 = o12.shapes;
        if (Array.isArray(l25))
          for (let c27 = 0, h26 = l25.length; c27 < h26; c27++) {
            const u35 = l25[c27];
            n33(e11.shapes, u35);
          }
        else
          n33(e11.shapes, l25);
      }
    }
    if (this.isSkinnedMesh && (r24.bindMode = this.bindMode, r24.bindMatrix = this.bindMatrix.toArray(), this.skeleton !== void 0 && (n33(e11.skeletons, this.skeleton), r24.skeleton = this.skeleton.uuid)), this.material !== void 0)
      if (Array.isArray(this.material)) {
        const o12 = [];
        for (let l25 = 0, c27 = this.material.length; l25 < c27; l25++)
          o12.push(n33(e11.materials, this.material[l25]));
        r24.material = o12;
      } else
        r24.material = n33(e11.materials, this.material);
    if (this.children.length > 0) {
      r24.children = [];
      for (let o12 = 0; o12 < this.children.length; o12++)
        r24.children.push(this.children[o12].toJSON(e11).object);
    }
    if (this.animations.length > 0) {
      r24.animations = [];
      for (let o12 = 0; o12 < this.animations.length; o12++) {
        const l25 = this.animations[o12];
        r24.animations.push(n33(e11.animations, l25));
      }
    }
    if (t19) {
      const o12 = a22(e11.geometries), l25 = a22(e11.materials), c27 = a22(e11.textures), h26 = a22(e11.images), u35 = a22(e11.shapes), d34 = a22(e11.skeletons), m33 = a22(e11.animations), _19 = a22(e11.nodes);
      o12.length > 0 && (i27.geometries = o12), l25.length > 0 && (i27.materials = l25), c27.length > 0 && (i27.textures = c27), h26.length > 0 && (i27.images = h26), u35.length > 0 && (i27.shapes = u35), d34.length > 0 && (i27.skeletons = d34), m33.length > 0 && (i27.animations = m33), _19.length > 0 && (i27.nodes = _19);
    }
    return i27.object = r24, i27;
    function a22(o12) {
      const l25 = [];
      for (const c27 in o12) {
        const h26 = o12[c27];
        delete h26.metadata, l25.push(h26);
      }
      return l25;
    }
  }
  clone(e11) {
    return new this.constructor().copy(this, e11);
  }
  copy(e11, t19 = true) {
    if (this.name = e11.name, this.up.copy(e11.up), this.position.copy(e11.position), this.rotation.order = e11.rotation.order, this.quaternion.copy(e11.quaternion), this.scale.copy(e11.scale), this.matrix.copy(e11.matrix), this.matrixWorld.copy(e11.matrixWorld), this.matrixAutoUpdate = e11.matrixAutoUpdate, this.matrixWorldNeedsUpdate = e11.matrixWorldNeedsUpdate, this.matrixWorldAutoUpdate = e11.matrixWorldAutoUpdate, this.layers.mask = e11.layers.mask, this.visible = e11.visible, this.castShadow = e11.castShadow, this.receiveShadow = e11.receiveShadow, this.frustumCulled = e11.frustumCulled, this.renderOrder = e11.renderOrder, this.userData = JSON.parse(JSON.stringify(e11.userData)), t19 === true)
      for (let i27 = 0; i27 < e11.children.length; i27++) {
        const r24 = e11.children[i27];
        this.add(r24.clone());
      }
    return this;
  }
};
_t7.DEFAULT_UP = new k18(0, 1, 0);
_t7.DEFAULT_MATRIX_AUTO_UPDATE = true;
_t7.DEFAULT_MATRIX_WORLD_AUTO_UPDATE = true;
var _i6 = new k18();
var ki6 = new k18();
var za2 = new k18();
var Ui4 = new k18();
var Yr5 = new k18();
var Zr5 = new k18();
var Vl2 = new k18();
var Ba2 = new k18();
var Fa2 = new k18();
var Ha2 = new k18();
var Ms2 = false;
var hi6 = class _hi {
  constructor(e11 = new k18(), t19 = new k18(), i27 = new k18()) {
    this.a = e11, this.b = t19, this.c = i27;
  }
  static getNormal(e11, t19, i27, r24) {
    r24.subVectors(i27, t19), _i6.subVectors(e11, t19), r24.cross(_i6);
    const n33 = r24.lengthSq();
    return n33 > 0 ? r24.multiplyScalar(1 / Math.sqrt(n33)) : r24.set(0, 0, 0);
  }
  // static/instance method to calculate barycentric coordinates
  // based on: http://www.blackpawn.com/texts/pointinpoly/default.html
  static getBarycoord(e11, t19, i27, r24, n33) {
    _i6.subVectors(r24, t19), ki6.subVectors(i27, t19), za2.subVectors(e11, t19);
    const a22 = _i6.dot(_i6), o12 = _i6.dot(ki6), l25 = _i6.dot(za2), c27 = ki6.dot(ki6), h26 = ki6.dot(za2), u35 = a22 * c27 - o12 * o12;
    if (u35 === 0)
      return n33.set(-2, -1, -1);
    const d34 = 1 / u35, m33 = (c27 * l25 - o12 * h26) * d34, _19 = (a22 * h26 - o12 * l25) * d34;
    return n33.set(1 - m33 - _19, _19, m33);
  }
  static containsPoint(e11, t19, i27, r24) {
    return this.getBarycoord(e11, t19, i27, r24, Ui4), Ui4.x >= 0 && Ui4.y >= 0 && Ui4.x + Ui4.y <= 1;
  }
  static getUV(e11, t19, i27, r24, n33, a22, o12, l25) {
    return Ms2 === false && (console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."), Ms2 = true), this.getInterpolation(e11, t19, i27, r24, n33, a22, o12, l25);
  }
  static getInterpolation(e11, t19, i27, r24, n33, a22, o12, l25) {
    return this.getBarycoord(e11, t19, i27, r24, Ui4), l25.setScalar(0), l25.addScaledVector(n33, Ui4.x), l25.addScaledVector(a22, Ui4.y), l25.addScaledVector(o12, Ui4.z), l25;
  }
  static isFrontFacing(e11, t19, i27, r24) {
    return _i6.subVectors(i27, t19), ki6.subVectors(e11, t19), _i6.cross(ki6).dot(r24) < 0;
  }
  set(e11, t19, i27) {
    return this.a.copy(e11), this.b.copy(t19), this.c.copy(i27), this;
  }
  setFromPointsAndIndices(e11, t19, i27, r24) {
    return this.a.copy(e11[t19]), this.b.copy(e11[i27]), this.c.copy(e11[r24]), this;
  }
  setFromAttributeAndIndices(e11, t19, i27, r24) {
    return this.a.fromBufferAttribute(e11, t19), this.b.fromBufferAttribute(e11, i27), this.c.fromBufferAttribute(e11, r24), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    return this.a.copy(e11.a), this.b.copy(e11.b), this.c.copy(e11.c), this;
  }
  getArea() {
    return _i6.subVectors(this.c, this.b), ki6.subVectors(this.a, this.b), _i6.cross(ki6).length() * 0.5;
  }
  getMidpoint(e11) {
    return e11.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3);
  }
  getNormal(e11) {
    return _hi.getNormal(this.a, this.b, this.c, e11);
  }
  getPlane(e11) {
    return e11.setFromCoplanarPoints(this.a, this.b, this.c);
  }
  getBarycoord(e11, t19) {
    return _hi.getBarycoord(e11, this.a, this.b, this.c, t19);
  }
  getUV(e11, t19, i27, r24, n33) {
    return Ms2 === false && (console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."), Ms2 = true), _hi.getInterpolation(e11, this.a, this.b, this.c, t19, i27, r24, n33);
  }
  getInterpolation(e11, t19, i27, r24, n33) {
    return _hi.getInterpolation(e11, this.a, this.b, this.c, t19, i27, r24, n33);
  }
  containsPoint(e11) {
    return _hi.containsPoint(e11, this.a, this.b, this.c);
  }
  isFrontFacing(e11) {
    return _hi.isFrontFacing(this.a, this.b, this.c, e11);
  }
  intersectsBox(e11) {
    return e11.intersectsTriangle(this);
  }
  closestPointToPoint(e11, t19) {
    const i27 = this.a, r24 = this.b, n33 = this.c;
    let a22, o12;
    Yr5.subVectors(r24, i27), Zr5.subVectors(n33, i27), Ba2.subVectors(e11, i27);
    const l25 = Yr5.dot(Ba2), c27 = Zr5.dot(Ba2);
    if (l25 <= 0 && c27 <= 0)
      return t19.copy(i27);
    Fa2.subVectors(e11, r24);
    const h26 = Yr5.dot(Fa2), u35 = Zr5.dot(Fa2);
    if (h26 >= 0 && u35 <= h26)
      return t19.copy(r24);
    const d34 = l25 * u35 - h26 * c27;
    if (d34 <= 0 && l25 >= 0 && h26 <= 0)
      return a22 = l25 / (l25 - h26), t19.copy(i27).addScaledVector(Yr5, a22);
    Ha2.subVectors(e11, n33);
    const m33 = Yr5.dot(Ha2), _19 = Zr5.dot(Ha2);
    if (_19 >= 0 && m33 <= _19)
      return t19.copy(n33);
    const y33 = m33 * c27 - l25 * _19;
    if (y33 <= 0 && c27 >= 0 && _19 <= 0)
      return o12 = c27 / (c27 - _19), t19.copy(i27).addScaledVector(Zr5, o12);
    const f39 = h26 * _19 - m33 * u35;
    if (f39 <= 0 && u35 - h26 >= 0 && m33 - _19 >= 0)
      return Vl2.subVectors(n33, r24), o12 = (u35 - h26) / (u35 - h26 + (m33 - _19)), t19.copy(r24).addScaledVector(Vl2, o12);
    const p26 = 1 / (f39 + y33 + d34);
    return a22 = y33 * p26, o12 = d34 * p26, t19.copy(i27).addScaledVector(Yr5, a22).addScaledVector(Zr5, o12);
  }
  equals(e11) {
    return e11.a.equals(this.a) && e11.b.equals(this.b) && e11.c.equals(this.c);
  }
};
var Cd2 = 0;
var pi6 = class extends Ar5 {
  constructor() {
    super(), this.isMaterial = true, Object.defineProperty(this, "id", { value: Cd2++ }), this.uuid = bi6(), this.name = "", this.type = "Material", this.blending = un4, this.side = Ei5, this.vertexColors = false, this.opacity = 1, this.transparent = false, this.blendSrc = rh2, this.blendDst = nh2, this.blendEquation = on4, this.blendSrcAlpha = null, this.blendDstAlpha = null, this.blendEquationAlpha = null, this.depthFunc = ho2, this.depthTest = true, this.depthWrite = true, this.stencilWriteMask = 255, this.stencilFunc = ed2, this.stencilRef = 0, this.stencilFuncMask = 255, this.stencilFail = La2, this.stencilZFail = La2, this.stencilZPass = La2, this.stencilWrite = false, this.clippingPlanes = null, this.clipIntersection = false, this.clipShadows = false, this.shadowSide = null, this.colorWrite = true, this.precision = null, this.polygonOffset = false, this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.dithering = false, this.alphaToCoverage = false, this.premultipliedAlpha = false, this.forceSinglePass = false, this.visible = true, this.toneMapped = true, this.userData = {}, this.version = 0, this._alphaTest = 0;
  }
  get alphaTest() {
    return this._alphaTest;
  }
  set alphaTest(e11) {
    this._alphaTest > 0 != e11 > 0 && this.version++, this._alphaTest = e11;
  }
  onBuild() {
  }
  onBeforeRender() {
  }
  onBeforeCompile() {
  }
  customProgramCacheKey() {
    return this.onBeforeCompile.toString();
  }
  setValues(e11) {
    if (e11 !== void 0)
      for (const t19 in e11) {
        const i27 = e11[t19];
        if (i27 === void 0) {
          console.warn(`THREE.Material: parameter '${t19}' has value of undefined.`);
          continue;
        }
        const r24 = this[t19];
        if (r24 === void 0) {
          console.warn(`THREE.Material: '${t19}' is not a property of THREE.${this.type}.`);
          continue;
        }
        r24 && r24.isColor ? r24.set(i27) : r24 && r24.isVector3 && i27 && i27.isVector3 ? r24.copy(i27) : this[t19] = i27;
      }
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string";
    t19 && (e11 = {
      textures: {},
      images: {}
    });
    const i27 = {
      metadata: {
        version: 4.5,
        type: "Material",
        generator: "Material.toJSON"
      }
    };
    i27.uuid = this.uuid, i27.type = this.type, this.name !== "" && (i27.name = this.name), this.color && this.color.isColor && (i27.color = this.color.getHex()), this.roughness !== void 0 && (i27.roughness = this.roughness), this.metalness !== void 0 && (i27.metalness = this.metalness), this.sheen !== void 0 && (i27.sheen = this.sheen), this.sheenColor && this.sheenColor.isColor && (i27.sheenColor = this.sheenColor.getHex()), this.sheenRoughness !== void 0 && (i27.sheenRoughness = this.sheenRoughness), this.emissive && this.emissive.isColor && (i27.emissive = this.emissive.getHex()), this.emissiveIntensity && this.emissiveIntensity !== 1 && (i27.emissiveIntensity = this.emissiveIntensity), this.specular && this.specular.isColor && (i27.specular = this.specular.getHex()), this.specularIntensity !== void 0 && (i27.specularIntensity = this.specularIntensity), this.specularColor && this.specularColor.isColor && (i27.specularColor = this.specularColor.getHex()), this.shininess !== void 0 && (i27.shininess = this.shininess), this.clearcoat !== void 0 && (i27.clearcoat = this.clearcoat), this.clearcoatRoughness !== void 0 && (i27.clearcoatRoughness = this.clearcoatRoughness), this.clearcoatMap && this.clearcoatMap.isTexture && (i27.clearcoatMap = this.clearcoatMap.toJSON(e11).uuid), this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture && (i27.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON(e11).uuid), this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture && (i27.clearcoatNormalMap = this.clearcoatNormalMap.toJSON(e11).uuid, i27.clearcoatNormalScale = this.clearcoatNormalScale.toArray()), this.iridescence !== void 0 && (i27.iridescence = this.iridescence), this.iridescenceIOR !== void 0 && (i27.iridescenceIOR = this.iridescenceIOR), this.iridescenceThicknessRange !== void 0 && (i27.iridescenceThicknessRange = this.iridescenceThicknessRange), this.iridescenceMap && this.iridescenceMap.isTexture && (i27.iridescenceMap = this.iridescenceMap.toJSON(e11).uuid), this.iridescenceThicknessMap && this.iridescenceThicknessMap.isTexture && (i27.iridescenceThicknessMap = this.iridescenceThicknessMap.toJSON(e11).uuid), this.map && this.map.isTexture && (i27.map = this.map.toJSON(e11).uuid), this.matcap && this.matcap.isTexture && (i27.matcap = this.matcap.toJSON(e11).uuid), this.alphaMap && this.alphaMap.isTexture && (i27.alphaMap = this.alphaMap.toJSON(e11).uuid), this.lightMap && this.lightMap.isTexture && (i27.lightMap = this.lightMap.toJSON(e11).uuid, i27.lightMapIntensity = this.lightMapIntensity), this.aoMap && this.aoMap.isTexture && (i27.aoMap = this.aoMap.toJSON(e11).uuid, i27.aoMapIntensity = this.aoMapIntensity), this.bumpMap && this.bumpMap.isTexture && (i27.bumpMap = this.bumpMap.toJSON(e11).uuid, i27.bumpScale = this.bumpScale), this.normalMap && this.normalMap.isTexture && (i27.normalMap = this.normalMap.toJSON(e11).uuid, i27.normalMapType = this.normalMapType, i27.normalScale = this.normalScale.toArray()), this.displacementMap && this.displacementMap.isTexture && (i27.displacementMap = this.displacementMap.toJSON(e11).uuid, i27.displacementScale = this.displacementScale, i27.displacementBias = this.displacementBias), this.roughnessMap && this.roughnessMap.isTexture && (i27.roughnessMap = this.roughnessMap.toJSON(e11).uuid), this.metalnessMap && this.metalnessMap.isTexture && (i27.metalnessMap = this.metalnessMap.toJSON(e11).uuid), this.emissiveMap && this.emissiveMap.isTexture && (i27.emissiveMap = this.emissiveMap.toJSON(e11).uuid), this.specularMap && this.specularMap.isTexture && (i27.specularMap = this.specularMap.toJSON(e11).uuid), this.specularIntensityMap && this.specularIntensityMap.isTexture && (i27.specularIntensityMap = this.specularIntensityMap.toJSON(e11).uuid), this.specularColorMap && this.specularColorMap.isTexture && (i27.specularColorMap = this.specularColorMap.toJSON(e11).uuid), this.envMap && this.envMap.isTexture && (i27.envMap = this.envMap.toJSON(e11).uuid, this.combine !== void 0 && (i27.combine = this.combine)), this.envMapIntensity !== void 0 && (i27.envMapIntensity = this.envMapIntensity), this.reflectivity !== void 0 && (i27.reflectivity = this.reflectivity), this.refractionRatio !== void 0 && (i27.refractionRatio = this.refractionRatio), this.gradientMap && this.gradientMap.isTexture && (i27.gradientMap = this.gradientMap.toJSON(e11).uuid), this.transmission !== void 0 && (i27.transmission = this.transmission), this.transmissionMap && this.transmissionMap.isTexture && (i27.transmissionMap = this.transmissionMap.toJSON(e11).uuid), this.thickness !== void 0 && (i27.thickness = this.thickness), this.thicknessMap && this.thicknessMap.isTexture && (i27.thicknessMap = this.thicknessMap.toJSON(e11).uuid), this.attenuationDistance !== void 0 && this.attenuationDistance !== 1 / 0 && (i27.attenuationDistance = this.attenuationDistance), this.attenuationColor !== void 0 && (i27.attenuationColor = this.attenuationColor.getHex()), this.size !== void 0 && (i27.size = this.size), this.shadowSide !== null && (i27.shadowSide = this.shadowSide), this.sizeAttenuation !== void 0 && (i27.sizeAttenuation = this.sizeAttenuation), this.blending !== un4 && (i27.blending = this.blending), this.side !== Ei5 && (i27.side = this.side), this.vertexColors && (i27.vertexColors = true), this.opacity < 1 && (i27.opacity = this.opacity), this.transparent === true && (i27.transparent = this.transparent), i27.depthFunc = this.depthFunc, i27.depthTest = this.depthTest, i27.depthWrite = this.depthWrite, i27.colorWrite = this.colorWrite, i27.stencilWrite = this.stencilWrite, i27.stencilWriteMask = this.stencilWriteMask, i27.stencilFunc = this.stencilFunc, i27.stencilRef = this.stencilRef, i27.stencilFuncMask = this.stencilFuncMask, i27.stencilFail = this.stencilFail, i27.stencilZFail = this.stencilZFail, i27.stencilZPass = this.stencilZPass, this.rotation !== void 0 && this.rotation !== 0 && (i27.rotation = this.rotation), this.polygonOffset === true && (i27.polygonOffset = true), this.polygonOffsetFactor !== 0 && (i27.polygonOffsetFactor = this.polygonOffsetFactor), this.polygonOffsetUnits !== 0 && (i27.polygonOffsetUnits = this.polygonOffsetUnits), this.linewidth !== void 0 && this.linewidth !== 1 && (i27.linewidth = this.linewidth), this.dashSize !== void 0 && (i27.dashSize = this.dashSize), this.gapSize !== void 0 && (i27.gapSize = this.gapSize), this.scale !== void 0 && (i27.scale = this.scale), this.dithering === true && (i27.dithering = true), this.alphaTest > 0 && (i27.alphaTest = this.alphaTest), this.alphaToCoverage === true && (i27.alphaToCoverage = this.alphaToCoverage), this.premultipliedAlpha === true && (i27.premultipliedAlpha = this.premultipliedAlpha), this.forceSinglePass === true && (i27.forceSinglePass = this.forceSinglePass), this.wireframe === true && (i27.wireframe = this.wireframe), this.wireframeLinewidth > 1 && (i27.wireframeLinewidth = this.wireframeLinewidth), this.wireframeLinecap !== "round" && (i27.wireframeLinecap = this.wireframeLinecap), this.wireframeLinejoin !== "round" && (i27.wireframeLinejoin = this.wireframeLinejoin), this.flatShading === true && (i27.flatShading = this.flatShading), this.visible === false && (i27.visible = false), this.toneMapped === false && (i27.toneMapped = false), this.fog === false && (i27.fog = false), Object.keys(this.userData).length > 0 && (i27.userData = this.userData);
    function r24(n33) {
      const a22 = [];
      for (const o12 in n33) {
        const l25 = n33[o12];
        delete l25.metadata, a22.push(l25);
      }
      return a22;
    }
    if (t19) {
      const n33 = r24(e11.textures), a22 = r24(e11.images);
      n33.length > 0 && (i27.textures = n33), a22.length > 0 && (i27.images = a22);
    }
    return i27;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    this.name = e11.name, this.blending = e11.blending, this.side = e11.side, this.vertexColors = e11.vertexColors, this.opacity = e11.opacity, this.transparent = e11.transparent, this.blendSrc = e11.blendSrc, this.blendDst = e11.blendDst, this.blendEquation = e11.blendEquation, this.blendSrcAlpha = e11.blendSrcAlpha, this.blendDstAlpha = e11.blendDstAlpha, this.blendEquationAlpha = e11.blendEquationAlpha, this.depthFunc = e11.depthFunc, this.depthTest = e11.depthTest, this.depthWrite = e11.depthWrite, this.stencilWriteMask = e11.stencilWriteMask, this.stencilFunc = e11.stencilFunc, this.stencilRef = e11.stencilRef, this.stencilFuncMask = e11.stencilFuncMask, this.stencilFail = e11.stencilFail, this.stencilZFail = e11.stencilZFail, this.stencilZPass = e11.stencilZPass, this.stencilWrite = e11.stencilWrite;
    const t19 = e11.clippingPlanes;
    let i27 = null;
    if (t19 !== null) {
      const r24 = t19.length;
      i27 = new Array(r24);
      for (let n33 = 0; n33 !== r24; ++n33)
        i27[n33] = t19[n33].clone();
    }
    return this.clippingPlanes = i27, this.clipIntersection = e11.clipIntersection, this.clipShadows = e11.clipShadows, this.shadowSide = e11.shadowSide, this.colorWrite = e11.colorWrite, this.precision = e11.precision, this.polygonOffset = e11.polygonOffset, this.polygonOffsetFactor = e11.polygonOffsetFactor, this.polygonOffsetUnits = e11.polygonOffsetUnits, this.dithering = e11.dithering, this.alphaTest = e11.alphaTest, this.alphaToCoverage = e11.alphaToCoverage, this.premultipliedAlpha = e11.premultipliedAlpha, this.forceSinglePass = e11.forceSinglePass, this.visible = e11.visible, this.toneMapped = e11.toneMapped, this.userData = JSON.parse(JSON.stringify(e11.userData)), this;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
};
var _h2 = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
var vi6 = { h: 0, s: 0, l: 0 };
var ws2 = { h: 0, s: 0, l: 0 };
function Va2(s18, e11, t19) {
  return t19 < 0 && (t19 += 1), t19 > 1 && (t19 -= 1), t19 < 1 / 6 ? s18 + (e11 - s18) * 6 * t19 : t19 < 1 / 2 ? e11 : t19 < 2 / 3 ? s18 + (e11 - s18) * 6 * (2 / 3 - t19) : s18;
}
var ze7 = class {
  constructor(e11, t19, i27) {
    return this.isColor = true, this.r = 1, this.g = 1, this.b = 1, t19 === void 0 && i27 === void 0 ? this.set(e11) : this.setRGB(e11, t19, i27);
  }
  set(e11) {
    return e11 && e11.isColor ? this.copy(e11) : typeof e11 == "number" ? this.setHex(e11) : typeof e11 == "string" && this.setStyle(e11), this;
  }
  setScalar(e11) {
    return this.r = e11, this.g = e11, this.b = e11, this;
  }
  setHex(e11, t19 = yi6) {
    return e11 = Math.floor(e11), this.r = (e11 >> 16 & 255) / 255, this.g = (e11 >> 8 & 255) / 255, this.b = (e11 & 255) / 255, ii6.toWorkingColorSpace(this, t19), this;
  }
  setRGB(e11, t19, i27, r24 = ii6.workingColorSpace) {
    return this.r = e11, this.g = t19, this.b = i27, ii6.toWorkingColorSpace(this, r24), this;
  }
  setHSL(e11, t19, i27, r24 = ii6.workingColorSpace) {
    if (e11 = Ro2(e11, 1), t19 = Gt6(t19, 0, 1), i27 = Gt6(i27, 0, 1), t19 === 0)
      this.r = this.g = this.b = i27;
    else {
      const n33 = i27 <= 0.5 ? i27 * (1 + t19) : i27 + t19 - i27 * t19, a22 = 2 * i27 - n33;
      this.r = Va2(a22, n33, e11 + 1 / 3), this.g = Va2(a22, n33, e11), this.b = Va2(a22, n33, e11 - 1 / 3);
    }
    return ii6.toWorkingColorSpace(this, r24), this;
  }
  setStyle(e11, t19 = yi6) {
    function i27(n33) {
      n33 !== void 0 && parseFloat(n33) < 1 && console.warn("THREE.Color: Alpha component of " + e11 + " will be ignored.");
    }
    let r24;
    if (r24 = /^(\w+)\(([^\)]*)\)/.exec(e11)) {
      let n33;
      const a22 = r24[1], o12 = r24[2];
      switch (a22) {
        case "rgb":
        case "rgba":
          if (n33 = /^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o12))
            return this.r = Math.min(255, parseInt(n33[1], 10)) / 255, this.g = Math.min(255, parseInt(n33[2], 10)) / 255, this.b = Math.min(255, parseInt(n33[3], 10)) / 255, ii6.toWorkingColorSpace(this, t19), i27(n33[4]), this;
          if (n33 = /^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o12))
            return this.r = Math.min(100, parseInt(n33[1], 10)) / 100, this.g = Math.min(100, parseInt(n33[2], 10)) / 100, this.b = Math.min(100, parseInt(n33[3], 10)) / 100, ii6.toWorkingColorSpace(this, t19), i27(n33[4]), this;
          break;
        case "hsl":
        case "hsla":
          if (n33 = /^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o12)) {
            const l25 = parseFloat(n33[1]) / 360, c27 = parseFloat(n33[2]) / 100, h26 = parseFloat(n33[3]) / 100;
            return i27(n33[4]), this.setHSL(l25, c27, h26, t19);
          }
          break;
        default:
          console.warn("THREE.Color: Unknown color model " + e11);
      }
    } else if (r24 = /^\#([A-Fa-f\d]+)$/.exec(e11)) {
      const n33 = r24[1], a22 = n33.length;
      if (a22 === 3)
        return this.setRGB(
          parseInt(n33.charAt(0), 16) / 15,
          parseInt(n33.charAt(1), 16) / 15,
          parseInt(n33.charAt(2), 16) / 15,
          t19
        );
      if (a22 === 6)
        return this.setHex(parseInt(n33, 16), t19);
      console.warn("THREE.Color: Invalid hex color " + e11);
    } else if (e11 && e11.length > 0)
      return this.setColorName(e11, t19);
    return this;
  }
  setColorName(e11, t19 = yi6) {
    const i27 = _h2[e11.toLowerCase()];
    return i27 !== void 0 ? this.setHex(i27, t19) : console.warn("THREE.Color: Unknown color " + e11), this;
  }
  clone() {
    return new this.constructor(this.r, this.g, this.b);
  }
  copy(e11) {
    return this.r = e11.r, this.g = e11.g, this.b = e11.b, this;
  }
  copySRGBToLinear(e11) {
    return this.r = mn4(e11.r), this.g = mn4(e11.g), this.b = mn4(e11.b), this;
  }
  copyLinearToSRGB(e11) {
    return this.r = Ra2(e11.r), this.g = Ra2(e11.g), this.b = Ra2(e11.b), this;
  }
  convertSRGBToLinear() {
    return this.copySRGBToLinear(this), this;
  }
  convertLinearToSRGB() {
    return this.copyLinearToSRGB(this), this;
  }
  getHex(e11 = yi6) {
    return ii6.fromWorkingColorSpace(Yt6.copy(this), e11), Gt6(Yt6.r * 255, 0, 255) << 16 ^ Gt6(Yt6.g * 255, 0, 255) << 8 ^ Gt6(Yt6.b * 255, 0, 255) << 0;
  }
  getHexString(e11 = yi6) {
    return ("000000" + this.getHex(e11).toString(16)).slice(-6);
  }
  getHSL(e11, t19 = ii6.workingColorSpace) {
    ii6.fromWorkingColorSpace(Yt6.copy(this), t19);
    const i27 = Yt6.r, r24 = Yt6.g, n33 = Yt6.b, a22 = Math.max(i27, r24, n33), o12 = Math.min(i27, r24, n33);
    let l25, c27;
    const h26 = (o12 + a22) / 2;
    if (o12 === a22)
      l25 = 0, c27 = 0;
    else {
      const u35 = a22 - o12;
      switch (c27 = h26 <= 0.5 ? u35 / (a22 + o12) : u35 / (2 - a22 - o12), a22) {
        case i27:
          l25 = (r24 - n33) / u35 + (r24 < n33 ? 6 : 0);
          break;
        case r24:
          l25 = (n33 - i27) / u35 + 2;
          break;
        case n33:
          l25 = (i27 - r24) / u35 + 4;
          break;
      }
      l25 /= 6;
    }
    return e11.h = l25, e11.s = c27, e11.l = h26, e11;
  }
  getRGB(e11, t19 = ii6.workingColorSpace) {
    return ii6.fromWorkingColorSpace(Yt6.copy(this), t19), e11.r = Yt6.r, e11.g = Yt6.g, e11.b = Yt6.b, e11;
  }
  getStyle(e11 = yi6) {
    ii6.fromWorkingColorSpace(Yt6.copy(this), e11);
    const t19 = Yt6.r, i27 = Yt6.g, r24 = Yt6.b;
    return e11 !== yi6 ? `color(${e11} ${t19.toFixed(3)} ${i27.toFixed(3)} ${r24.toFixed(3)})` : `rgb(${t19 * 255 | 0},${i27 * 255 | 0},${r24 * 255 | 0})`;
  }
  offsetHSL(e11, t19, i27) {
    return this.getHSL(vi6), vi6.h += e11, vi6.s += t19, vi6.l += i27, this.setHSL(vi6.h, vi6.s, vi6.l), this;
  }
  add(e11) {
    return this.r += e11.r, this.g += e11.g, this.b += e11.b, this;
  }
  addColors(e11, t19) {
    return this.r = e11.r + t19.r, this.g = e11.g + t19.g, this.b = e11.b + t19.b, this;
  }
  addScalar(e11) {
    return this.r += e11, this.g += e11, this.b += e11, this;
  }
  sub(e11) {
    return this.r = Math.max(0, this.r - e11.r), this.g = Math.max(0, this.g - e11.g), this.b = Math.max(0, this.b - e11.b), this;
  }
  multiply(e11) {
    return this.r *= e11.r, this.g *= e11.g, this.b *= e11.b, this;
  }
  multiplyScalar(e11) {
    return this.r *= e11, this.g *= e11, this.b *= e11, this;
  }
  lerp(e11, t19) {
    return this.r += (e11.r - this.r) * t19, this.g += (e11.g - this.g) * t19, this.b += (e11.b - this.b) * t19, this;
  }
  lerpColors(e11, t19, i27) {
    return this.r = e11.r + (t19.r - e11.r) * i27, this.g = e11.g + (t19.g - e11.g) * i27, this.b = e11.b + (t19.b - e11.b) * i27, this;
  }
  lerpHSL(e11, t19) {
    this.getHSL(vi6), e11.getHSL(ws2);
    const i27 = Zn5(vi6.h, ws2.h, t19), r24 = Zn5(vi6.s, ws2.s, t19), n33 = Zn5(vi6.l, ws2.l, t19);
    return this.setHSL(i27, r24, n33), this;
  }
  setFromVector3(e11) {
    return this.r = e11.x, this.g = e11.y, this.b = e11.z, this;
  }
  applyMatrix3(e11) {
    const t19 = this.r, i27 = this.g, r24 = this.b, n33 = e11.elements;
    return this.r = n33[0] * t19 + n33[3] * i27 + n33[6] * r24, this.g = n33[1] * t19 + n33[4] * i27 + n33[7] * r24, this.b = n33[2] * t19 + n33[5] * i27 + n33[8] * r24, this;
  }
  equals(e11) {
    return e11.r === this.r && e11.g === this.g && e11.b === this.b;
  }
  fromArray(e11, t19 = 0) {
    return this.r = e11[t19], this.g = e11[t19 + 1], this.b = e11[t19 + 2], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.r, e11[t19 + 1] = this.g, e11[t19 + 2] = this.b, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.r = e11.getX(t19), this.g = e11.getY(t19), this.b = e11.getZ(t19), this;
  }
  toJSON() {
    return this.getHex();
  }
  *[Symbol.iterator]() {
    yield this.r, yield this.g, yield this.b;
  }
};
var Yt6 = new ze7();
ze7.NAMES = _h2;
var xi6 = class extends pi6 {
  constructor(e11) {
    super(), this.isMeshBasicMaterial = true, this.type = "MeshBasicMaterial", this.color = new ze7(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = ra2, this.reflectivity = 1, this.refractionRatio = 0.98, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.specularMap = e11.specularMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.combine = e11.combine, this.reflectivity = e11.reflectivity, this.refractionRatio = e11.refractionRatio, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.fog = e11.fog, this;
  }
};
var Ct7 = new k18();
var Ss2 = new We7();
var Ft6 = class {
  constructor(e11, t19, i27 = false) {
    if (Array.isArray(e11))
      throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");
    this.isBufferAttribute = true, this.name = "", this.array = e11, this.itemSize = t19, this.count = e11 !== void 0 ? e11.length / t19 : 0, this.normalized = i27, this.usage = go2, this.updateRange = { offset: 0, count: -1 }, this.version = 0;
  }
  onUploadCallback() {
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
  setUsage(e11) {
    return this.usage = e11, this;
  }
  copy(e11) {
    return this.name = e11.name, this.array = new e11.array.constructor(e11.array), this.itemSize = e11.itemSize, this.count = e11.count, this.normalized = e11.normalized, this.usage = e11.usage, this;
  }
  copyAt(e11, t19, i27) {
    e11 *= this.itemSize, i27 *= t19.itemSize;
    for (let r24 = 0, n33 = this.itemSize; r24 < n33; r24++)
      this.array[e11 + r24] = t19.array[i27 + r24];
    return this;
  }
  copyArray(e11) {
    return this.array.set(e11), this;
  }
  applyMatrix3(e11) {
    if (this.itemSize === 2)
      for (let t19 = 0, i27 = this.count; t19 < i27; t19++)
        Ss2.fromBufferAttribute(this, t19), Ss2.applyMatrix3(e11), this.setXY(t19, Ss2.x, Ss2.y);
    else if (this.itemSize === 3)
      for (let t19 = 0, i27 = this.count; t19 < i27; t19++)
        Ct7.fromBufferAttribute(this, t19), Ct7.applyMatrix3(e11), this.setXYZ(t19, Ct7.x, Ct7.y, Ct7.z);
    return this;
  }
  applyMatrix4(e11) {
    for (let t19 = 0, i27 = this.count; t19 < i27; t19++)
      Ct7.fromBufferAttribute(this, t19), Ct7.applyMatrix4(e11), this.setXYZ(t19, Ct7.x, Ct7.y, Ct7.z);
    return this;
  }
  applyNormalMatrix(e11) {
    for (let t19 = 0, i27 = this.count; t19 < i27; t19++)
      Ct7.fromBufferAttribute(this, t19), Ct7.applyNormalMatrix(e11), this.setXYZ(t19, Ct7.x, Ct7.y, Ct7.z);
    return this;
  }
  transformDirection(e11) {
    for (let t19 = 0, i27 = this.count; t19 < i27; t19++)
      Ct7.fromBufferAttribute(this, t19), Ct7.transformDirection(e11), this.setXYZ(t19, Ct7.x, Ct7.y, Ct7.z);
    return this;
  }
  set(e11, t19 = 0) {
    return this.array.set(e11, t19), this;
  }
  getX(e11) {
    let t19 = this.array[e11 * this.itemSize];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  setX(e11, t19) {
    return this.normalized && (t19 = mt10(t19, this.array)), this.array[e11 * this.itemSize] = t19, this;
  }
  getY(e11) {
    let t19 = this.array[e11 * this.itemSize + 1];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  setY(e11, t19) {
    return this.normalized && (t19 = mt10(t19, this.array)), this.array[e11 * this.itemSize + 1] = t19, this;
  }
  getZ(e11) {
    let t19 = this.array[e11 * this.itemSize + 2];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  setZ(e11, t19) {
    return this.normalized && (t19 = mt10(t19, this.array)), this.array[e11 * this.itemSize + 2] = t19, this;
  }
  getW(e11) {
    let t19 = this.array[e11 * this.itemSize + 3];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  setW(e11, t19) {
    return this.normalized && (t19 = mt10(t19, this.array)), this.array[e11 * this.itemSize + 3] = t19, this;
  }
  setXY(e11, t19, i27) {
    return e11 *= this.itemSize, this.normalized && (t19 = mt10(t19, this.array), i27 = mt10(i27, this.array)), this.array[e11 + 0] = t19, this.array[e11 + 1] = i27, this;
  }
  setXYZ(e11, t19, i27, r24) {
    return e11 *= this.itemSize, this.normalized && (t19 = mt10(t19, this.array), i27 = mt10(i27, this.array), r24 = mt10(r24, this.array)), this.array[e11 + 0] = t19, this.array[e11 + 1] = i27, this.array[e11 + 2] = r24, this;
  }
  setXYZW(e11, t19, i27, r24, n33) {
    return e11 *= this.itemSize, this.normalized && (t19 = mt10(t19, this.array), i27 = mt10(i27, this.array), r24 = mt10(r24, this.array), n33 = mt10(n33, this.array)), this.array[e11 + 0] = t19, this.array[e11 + 1] = i27, this.array[e11 + 2] = r24, this.array[e11 + 3] = n33, this;
  }
  onUpload(e11) {
    return this.onUploadCallback = e11, this;
  }
  clone() {
    return new this.constructor(this.array, this.itemSize).copy(this);
  }
  toJSON() {
    const e11 = {
      itemSize: this.itemSize,
      type: this.array.constructor.name,
      array: Array.from(this.array),
      normalized: this.normalized
    };
    return this.name !== "" && (e11.name = this.name), this.usage !== go2 && (e11.usage = this.usage), (this.updateRange.offset !== 0 || this.updateRange.count !== -1) && (e11.updateRange = this.updateRange), e11;
  }
  copyColorsArray() {
    console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.");
  }
  copyVector2sArray() {
    console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.");
  }
  copyVector3sArray() {
    console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.");
  }
  copyVector4sArray() {
    console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.");
  }
};
var vh2 = class extends Ft6 {
  constructor(e11, t19, i27) {
    super(new Uint16Array(e11), t19, i27);
  }
};
var yh2 = class extends Ft6 {
  constructor(e11, t19, i27) {
    super(new Uint32Array(e11), t19, i27);
  }
};
var xt6 = class extends Ft6 {
  constructor(e11, t19, i27) {
    super(new Float32Array(e11), t19, i27);
  }
};
var Rd2 = 0;
var li6 = new He6();
var Ga2 = new _t7();
var Jr5 = new k18();
var ni6 = new Vi3();
var Bn5 = new Vi3();
var Ot8 = new k18();
var Xt6 = class _Xt extends Ar5 {
  constructor() {
    super(), this.isBufferGeometry = true, Object.defineProperty(this, "id", { value: Rd2++ }), this.uuid = bi6(), this.name = "", this.type = "BufferGeometry", this.index = null, this.attributes = {}, this.morphAttributes = {}, this.morphTargetsRelative = false, this.groups = [], this.boundingBox = null, this.boundingSphere = null, this.drawRange = { start: 0, count: 1 / 0 }, this.userData = {};
  }
  getIndex() {
    return this.index;
  }
  setIndex(e11) {
    return Array.isArray(e11) ? this.index = new (dh2(e11) ? yh2 : vh2)(e11, 1) : this.index = e11, this;
  }
  getAttribute(e11) {
    return this.attributes[e11];
  }
  setAttribute(e11, t19) {
    return this.attributes[e11] = t19, this;
  }
  deleteAttribute(e11) {
    return delete this.attributes[e11], this;
  }
  hasAttribute(e11) {
    return this.attributes[e11] !== void 0;
  }
  addGroup(e11, t19, i27 = 0) {
    this.groups.push({
      start: e11,
      count: t19,
      materialIndex: i27
    });
  }
  clearGroups() {
    this.groups = [];
  }
  setDrawRange(e11, t19) {
    this.drawRange.start = e11, this.drawRange.count = t19;
  }
  applyMatrix4(e11) {
    const t19 = this.attributes.position;
    t19 !== void 0 && (t19.applyMatrix4(e11), t19.needsUpdate = true);
    const i27 = this.attributes.normal;
    if (i27 !== void 0) {
      const n33 = new Ke5().getNormalMatrix(e11);
      i27.applyNormalMatrix(n33), i27.needsUpdate = true;
    }
    const r24 = this.attributes.tangent;
    return r24 !== void 0 && (r24.transformDirection(e11), r24.needsUpdate = true), this.boundingBox !== null && this.computeBoundingBox(), this.boundingSphere !== null && this.computeBoundingSphere(), this;
  }
  applyQuaternion(e11) {
    return li6.makeRotationFromQuaternion(e11), this.applyMatrix4(li6), this;
  }
  rotateX(e11) {
    return li6.makeRotationX(e11), this.applyMatrix4(li6), this;
  }
  rotateY(e11) {
    return li6.makeRotationY(e11), this.applyMatrix4(li6), this;
  }
  rotateZ(e11) {
    return li6.makeRotationZ(e11), this.applyMatrix4(li6), this;
  }
  translate(e11, t19, i27) {
    return li6.makeTranslation(e11, t19, i27), this.applyMatrix4(li6), this;
  }
  scale(e11, t19, i27) {
    return li6.makeScale(e11, t19, i27), this.applyMatrix4(li6), this;
  }
  lookAt(e11) {
    return Ga2.lookAt(e11), Ga2.updateMatrix(), this.applyMatrix4(Ga2.matrix), this;
  }
  center() {
    return this.computeBoundingBox(), this.boundingBox.getCenter(Jr5).negate(), this.translate(Jr5.x, Jr5.y, Jr5.z), this;
  }
  setFromPoints(e11) {
    const t19 = [];
    for (let i27 = 0, r24 = e11.length; i27 < r24; i27++) {
      const n33 = e11[i27];
      t19.push(n33.x, n33.y, n33.z || 0);
    }
    return this.setAttribute("position", new xt6(t19, 3)), this;
  }
  computeBoundingBox() {
    this.boundingBox === null && (this.boundingBox = new Vi3());
    const e11 = this.attributes.position, t19 = this.morphAttributes.position;
    if (e11 && e11.isGLBufferAttribute) {
      console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".', this), this.boundingBox.set(
        new k18(-1 / 0, -1 / 0, -1 / 0),
        new k18(1 / 0, 1 / 0, 1 / 0)
      );
      return;
    }
    if (e11 !== void 0) {
      if (this.boundingBox.setFromBufferAttribute(e11), t19)
        for (let i27 = 0, r24 = t19.length; i27 < r24; i27++) {
          const n33 = t19[i27];
          ni6.setFromBufferAttribute(n33), this.morphTargetsRelative ? (Ot8.addVectors(this.boundingBox.min, ni6.min), this.boundingBox.expandByPoint(Ot8), Ot8.addVectors(this.boundingBox.max, ni6.max), this.boundingBox.expandByPoint(Ot8)) : (this.boundingBox.expandByPoint(ni6.min), this.boundingBox.expandByPoint(ni6.max));
        }
    } else
      this.boundingBox.makeEmpty();
    (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this);
  }
  computeBoundingSphere() {
    this.boundingSphere === null && (this.boundingSphere = new Gi2());
    const e11 = this.attributes.position, t19 = this.morphAttributes.position;
    if (e11 && e11.isGLBufferAttribute) {
      console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".', this), this.boundingSphere.set(new k18(), 1 / 0);
      return;
    }
    if (e11) {
      const i27 = this.boundingSphere.center;
      if (ni6.setFromBufferAttribute(e11), t19)
        for (let n33 = 0, a22 = t19.length; n33 < a22; n33++) {
          const o12 = t19[n33];
          Bn5.setFromBufferAttribute(o12), this.morphTargetsRelative ? (Ot8.addVectors(ni6.min, Bn5.min), ni6.expandByPoint(Ot8), Ot8.addVectors(ni6.max, Bn5.max), ni6.expandByPoint(Ot8)) : (ni6.expandByPoint(Bn5.min), ni6.expandByPoint(Bn5.max));
        }
      ni6.getCenter(i27);
      let r24 = 0;
      for (let n33 = 0, a22 = e11.count; n33 < a22; n33++)
        Ot8.fromBufferAttribute(e11, n33), r24 = Math.max(r24, i27.distanceToSquared(Ot8));
      if (t19)
        for (let n33 = 0, a22 = t19.length; n33 < a22; n33++) {
          const o12 = t19[n33], l25 = this.morphTargetsRelative;
          for (let c27 = 0, h26 = o12.count; c27 < h26; c27++)
            Ot8.fromBufferAttribute(o12, c27), l25 && (Jr5.fromBufferAttribute(e11, c27), Ot8.add(Jr5)), r24 = Math.max(r24, i27.distanceToSquared(Ot8));
        }
      this.boundingSphere.radius = Math.sqrt(r24), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this);
    }
  }
  computeTangents() {
    const e11 = this.index, t19 = this.attributes;
    if (e11 === null || t19.position === void 0 || t19.normal === void 0 || t19.uv === void 0) {
      console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");
      return;
    }
    const i27 = e11.array, r24 = t19.position.array, n33 = t19.normal.array, a22 = t19.uv.array, o12 = r24.length / 3;
    this.hasAttribute("tangent") === false && this.setAttribute("tangent", new Ft6(new Float32Array(4 * o12), 4));
    const l25 = this.getAttribute("tangent").array, c27 = [], h26 = [];
    for (let C19 = 0; C19 < o12; C19++)
      c27[C19] = new k18(), h26[C19] = new k18();
    const u35 = new k18(), d34 = new k18(), m33 = new k18(), _19 = new We7(), y33 = new We7(), f39 = new We7(), p26 = new k18(), A17 = new k18();
    function M12(C19, G15, z19) {
      u35.fromArray(r24, C19 * 3), d34.fromArray(r24, G15 * 3), m33.fromArray(r24, z19 * 3), _19.fromArray(a22, C19 * 2), y33.fromArray(a22, G15 * 2), f39.fromArray(a22, z19 * 2), d34.sub(u35), m33.sub(u35), y33.sub(_19), f39.sub(_19);
      const U18 = 1 / (y33.x * f39.y - f39.x * y33.y);
      isFinite(U18) && (p26.copy(d34).multiplyScalar(f39.y).addScaledVector(m33, -y33.y).multiplyScalar(U18), A17.copy(m33).multiplyScalar(y33.x).addScaledVector(d34, -f39.x).multiplyScalar(U18), c27[C19].add(p26), c27[G15].add(p26), c27[z19].add(p26), h26[C19].add(A17), h26[G15].add(A17), h26[z19].add(A17));
    }
    let E24 = this.groups;
    E24.length === 0 && (E24 = [{
      start: 0,
      count: i27.length
    }]);
    for (let C19 = 0, G15 = E24.length; C19 < G15; ++C19) {
      const z19 = E24[C19], U18 = z19.start, V14 = z19.count;
      for (let j18 = U18, W8 = U18 + V14; j18 < W8; j18 += 3)
        M12(
          i27[j18 + 0],
          i27[j18 + 1],
          i27[j18 + 2]
        );
    }
    const w29 = new k18(), I16 = new k18(), D17 = new k18(), P19 = new k18();
    function x34(C19) {
      D17.fromArray(n33, C19 * 3), P19.copy(D17);
      const G15 = c27[C19];
      w29.copy(G15), w29.sub(D17.multiplyScalar(D17.dot(G15))).normalize(), I16.crossVectors(P19, G15);
      const z19 = I16.dot(h26[C19]) < 0 ? -1 : 1;
      l25[C19 * 4] = w29.x, l25[C19 * 4 + 1] = w29.y, l25[C19 * 4 + 2] = w29.z, l25[C19 * 4 + 3] = z19;
    }
    for (let C19 = 0, G15 = E24.length; C19 < G15; ++C19) {
      const z19 = E24[C19], U18 = z19.start, V14 = z19.count;
      for (let j18 = U18, W8 = U18 + V14; j18 < W8; j18 += 3)
        x34(i27[j18 + 0]), x34(i27[j18 + 1]), x34(i27[j18 + 2]);
    }
  }
  computeVertexNormals() {
    const e11 = this.index, t19 = this.getAttribute("position");
    if (t19 !== void 0) {
      let i27 = this.getAttribute("normal");
      if (i27 === void 0)
        i27 = new Ft6(new Float32Array(t19.count * 3), 3), this.setAttribute("normal", i27);
      else
        for (let d34 = 0, m33 = i27.count; d34 < m33; d34++)
          i27.setXYZ(d34, 0, 0, 0);
      const r24 = new k18(), n33 = new k18(), a22 = new k18(), o12 = new k18(), l25 = new k18(), c27 = new k18(), h26 = new k18(), u35 = new k18();
      if (e11)
        for (let d34 = 0, m33 = e11.count; d34 < m33; d34 += 3) {
          const _19 = e11.getX(d34 + 0), y33 = e11.getX(d34 + 1), f39 = e11.getX(d34 + 2);
          r24.fromBufferAttribute(t19, _19), n33.fromBufferAttribute(t19, y33), a22.fromBufferAttribute(t19, f39), h26.subVectors(a22, n33), u35.subVectors(r24, n33), h26.cross(u35), o12.fromBufferAttribute(i27, _19), l25.fromBufferAttribute(i27, y33), c27.fromBufferAttribute(i27, f39), o12.add(h26), l25.add(h26), c27.add(h26), i27.setXYZ(_19, o12.x, o12.y, o12.z), i27.setXYZ(y33, l25.x, l25.y, l25.z), i27.setXYZ(f39, c27.x, c27.y, c27.z);
        }
      else
        for (let d34 = 0, m33 = t19.count; d34 < m33; d34 += 3)
          r24.fromBufferAttribute(t19, d34 + 0), n33.fromBufferAttribute(t19, d34 + 1), a22.fromBufferAttribute(t19, d34 + 2), h26.subVectors(a22, n33), u35.subVectors(r24, n33), h26.cross(u35), i27.setXYZ(d34 + 0, h26.x, h26.y, h26.z), i27.setXYZ(d34 + 1, h26.x, h26.y, h26.z), i27.setXYZ(d34 + 2, h26.x, h26.y, h26.z);
      this.normalizeNormals(), i27.needsUpdate = true;
    }
  }
  merge() {
    return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."), this;
  }
  normalizeNormals() {
    const e11 = this.attributes.normal;
    for (let t19 = 0, i27 = e11.count; t19 < i27; t19++)
      Ot8.fromBufferAttribute(e11, t19), Ot8.normalize(), e11.setXYZ(t19, Ot8.x, Ot8.y, Ot8.z);
  }
  toNonIndexed() {
    function e11(o12, l25) {
      const c27 = o12.array, h26 = o12.itemSize, u35 = o12.normalized, d34 = new c27.constructor(l25.length * h26);
      let m33 = 0, _19 = 0;
      for (let y33 = 0, f39 = l25.length; y33 < f39; y33++) {
        o12.isInterleavedBufferAttribute ? m33 = l25[y33] * o12.data.stride + o12.offset : m33 = l25[y33] * h26;
        for (let p26 = 0; p26 < h26; p26++)
          d34[_19++] = c27[m33++];
      }
      return new Ft6(d34, h26, u35);
    }
    if (this.index === null)
      return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."), this;
    const t19 = new _Xt(), i27 = this.index.array, r24 = this.attributes;
    for (const o12 in r24) {
      const l25 = r24[o12], c27 = e11(l25, i27);
      t19.setAttribute(o12, c27);
    }
    const n33 = this.morphAttributes;
    for (const o12 in n33) {
      const l25 = [], c27 = n33[o12];
      for (let h26 = 0, u35 = c27.length; h26 < u35; h26++) {
        const d34 = c27[h26], m33 = e11(d34, i27);
        l25.push(m33);
      }
      t19.morphAttributes[o12] = l25;
    }
    t19.morphTargetsRelative = this.morphTargetsRelative;
    const a22 = this.groups;
    for (let o12 = 0, l25 = a22.length; o12 < l25; o12++) {
      const c27 = a22[o12];
      t19.addGroup(c27.start, c27.count, c27.materialIndex);
    }
    return t19;
  }
  toJSON() {
    const e11 = {
      metadata: {
        version: 4.5,
        type: "BufferGeometry",
        generator: "BufferGeometry.toJSON"
      }
    };
    if (e11.uuid = this.uuid, e11.type = this.type, this.name !== "" && (e11.name = this.name), Object.keys(this.userData).length > 0 && (e11.userData = this.userData), this.parameters !== void 0) {
      const l25 = this.parameters;
      for (const c27 in l25)
        l25[c27] !== void 0 && (e11[c27] = l25[c27]);
      return e11;
    }
    e11.data = { attributes: {} };
    const t19 = this.index;
    t19 !== null && (e11.data.index = {
      type: t19.array.constructor.name,
      array: Array.prototype.slice.call(t19.array)
    });
    const i27 = this.attributes;
    for (const l25 in i27) {
      const c27 = i27[l25];
      e11.data.attributes[l25] = c27.toJSON(e11.data);
    }
    const r24 = {};
    let n33 = false;
    for (const l25 in this.morphAttributes) {
      const c27 = this.morphAttributes[l25], h26 = [];
      for (let u35 = 0, d34 = c27.length; u35 < d34; u35++) {
        const m33 = c27[u35];
        h26.push(m33.toJSON(e11.data));
      }
      h26.length > 0 && (r24[l25] = h26, n33 = true);
    }
    n33 && (e11.data.morphAttributes = r24, e11.data.morphTargetsRelative = this.morphTargetsRelative);
    const a22 = this.groups;
    a22.length > 0 && (e11.data.groups = JSON.parse(JSON.stringify(a22)));
    const o12 = this.boundingSphere;
    return o12 !== null && (e11.data.boundingSphere = {
      center: o12.center.toArray(),
      radius: o12.radius
    }), e11;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    this.index = null, this.attributes = {}, this.morphAttributes = {}, this.groups = [], this.boundingBox = null, this.boundingSphere = null;
    const t19 = {};
    this.name = e11.name;
    const i27 = e11.index;
    i27 !== null && this.setIndex(i27.clone(t19));
    const r24 = e11.attributes;
    for (const c27 in r24) {
      const h26 = r24[c27];
      this.setAttribute(c27, h26.clone(t19));
    }
    const n33 = e11.morphAttributes;
    for (const c27 in n33) {
      const h26 = [], u35 = n33[c27];
      for (let d34 = 0, m33 = u35.length; d34 < m33; d34++)
        h26.push(u35[d34].clone(t19));
      this.morphAttributes[c27] = h26;
    }
    this.morphTargetsRelative = e11.morphTargetsRelative;
    const a22 = e11.groups;
    for (let c27 = 0, h26 = a22.length; c27 < h26; c27++) {
      const u35 = a22[c27];
      this.addGroup(u35.start, u35.count, u35.materialIndex);
    }
    const o12 = e11.boundingBox;
    o12 !== null && (this.boundingBox = o12.clone());
    const l25 = e11.boundingSphere;
    return l25 !== null && (this.boundingSphere = l25.clone()), this.drawRange.start = e11.drawRange.start, this.drawRange.count = e11.drawRange.count, this.userData = e11.userData, this;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
};
var Gl2 = new He6();
var wi6 = new No2();
var Ts2 = new Gi2();
var Wl2 = new k18();
var Kr5 = new k18();
var $r5 = new k18();
var Qr5 = new k18();
var Wa2 = new k18();
var Es2 = new k18();
var As2 = new We7();
var Ls2 = new We7();
var Cs2 = new We7();
var jl2 = new k18();
var Xl2 = new k18();
var ql2 = new k18();
var Rs2 = new k18();
var Ns2 = new k18();
var Rt8 = class extends _t7 {
  constructor(e11 = new Xt6(), t19 = new xi6()) {
    super(), this.isMesh = true, this.type = "Mesh", this.geometry = e11, this.material = t19, this.updateMorphTargets();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), e11.morphTargetInfluences !== void 0 && (this.morphTargetInfluences = e11.morphTargetInfluences.slice()), e11.morphTargetDictionary !== void 0 && (this.morphTargetDictionary = Object.assign({}, e11.morphTargetDictionary)), this.material = e11.material, this.geometry = e11.geometry, this;
  }
  updateMorphTargets() {
    const e11 = this.geometry.morphAttributes, t19 = Object.keys(e11);
    if (t19.length > 0) {
      const i27 = e11[t19[0]];
      if (i27 !== void 0) {
        this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (let r24 = 0, n33 = i27.length; r24 < n33; r24++) {
          const a22 = i27[r24].name || String(r24);
          this.morphTargetInfluences.push(0), this.morphTargetDictionary[a22] = r24;
        }
      }
    }
  }
  getVertexPosition(e11, t19) {
    const i27 = this.geometry, r24 = i27.attributes.position, n33 = i27.morphAttributes.position, a22 = i27.morphTargetsRelative;
    t19.fromBufferAttribute(r24, e11);
    const o12 = this.morphTargetInfluences;
    if (n33 && o12) {
      Es2.set(0, 0, 0);
      for (let l25 = 0, c27 = n33.length; l25 < c27; l25++) {
        const h26 = o12[l25], u35 = n33[l25];
        h26 !== 0 && (Wa2.fromBufferAttribute(u35, e11), a22 ? Es2.addScaledVector(Wa2, h26) : Es2.addScaledVector(Wa2.sub(t19), h26));
      }
      t19.add(Es2);
    }
    return this.isSkinnedMesh && this.applyBoneTransform(e11, t19), t19;
  }
  raycast(e11, t19) {
    const i27 = this.geometry, r24 = this.material, n33 = this.matrixWorld;
    if (r24 === void 0 || (i27.boundingSphere === null && i27.computeBoundingSphere(), Ts2.copy(i27.boundingSphere), Ts2.applyMatrix4(n33), wi6.copy(e11.ray).recast(e11.near), Ts2.containsPoint(wi6.origin) === false && (wi6.intersectSphere(Ts2, Wl2) === null || wi6.origin.distanceToSquared(Wl2) > (e11.far - e11.near) ** 2)) || (Gl2.copy(n33).invert(), wi6.copy(e11.ray).applyMatrix4(Gl2), i27.boundingBox !== null && wi6.intersectsBox(i27.boundingBox) === false))
      return;
    let a22;
    const o12 = i27.index, l25 = i27.attributes.position, c27 = i27.attributes.uv, h26 = i27.attributes.uv2, u35 = i27.attributes.normal, d34 = i27.groups, m33 = i27.drawRange;
    if (o12 !== null)
      if (Array.isArray(r24))
        for (let _19 = 0, y33 = d34.length; _19 < y33; _19++) {
          const f39 = d34[_19], p26 = r24[f39.materialIndex], A17 = Math.max(f39.start, m33.start), M12 = Math.min(o12.count, Math.min(f39.start + f39.count, m33.start + m33.count));
          for (let E24 = A17, w29 = M12; E24 < w29; E24 += 3) {
            const I16 = o12.getX(E24), D17 = o12.getX(E24 + 1), P19 = o12.getX(E24 + 2);
            a22 = Ps2(this, p26, e11, wi6, c27, h26, u35, I16, D17, P19), a22 && (a22.faceIndex = Math.floor(E24 / 3), a22.face.materialIndex = f39.materialIndex, t19.push(a22));
          }
        }
      else {
        const _19 = Math.max(0, m33.start), y33 = Math.min(o12.count, m33.start + m33.count);
        for (let f39 = _19, p26 = y33; f39 < p26; f39 += 3) {
          const A17 = o12.getX(f39), M12 = o12.getX(f39 + 1), E24 = o12.getX(f39 + 2);
          a22 = Ps2(this, r24, e11, wi6, c27, h26, u35, A17, M12, E24), a22 && (a22.faceIndex = Math.floor(f39 / 3), t19.push(a22));
        }
      }
    else if (l25 !== void 0)
      if (Array.isArray(r24))
        for (let _19 = 0, y33 = d34.length; _19 < y33; _19++) {
          const f39 = d34[_19], p26 = r24[f39.materialIndex], A17 = Math.max(f39.start, m33.start), M12 = Math.min(l25.count, Math.min(f39.start + f39.count, m33.start + m33.count));
          for (let E24 = A17, w29 = M12; E24 < w29; E24 += 3) {
            const I16 = E24, D17 = E24 + 1, P19 = E24 + 2;
            a22 = Ps2(this, p26, e11, wi6, c27, h26, u35, I16, D17, P19), a22 && (a22.faceIndex = Math.floor(E24 / 3), a22.face.materialIndex = f39.materialIndex, t19.push(a22));
          }
        }
      else {
        const _19 = Math.max(0, m33.start), y33 = Math.min(l25.count, m33.start + m33.count);
        for (let f39 = _19, p26 = y33; f39 < p26; f39 += 3) {
          const A17 = f39, M12 = f39 + 1, E24 = f39 + 2;
          a22 = Ps2(this, r24, e11, wi6, c27, h26, u35, A17, M12, E24), a22 && (a22.faceIndex = Math.floor(f39 / 3), t19.push(a22));
        }
      }
  }
};
function Nd2(s18, e11, t19, i27, r24, n33, a22, o12) {
  let l25;
  if (e11.side === ti6 ? l25 = i27.intersectTriangle(a22, n33, r24, true, o12) : l25 = i27.intersectTriangle(r24, n33, a22, e11.side === Ei5, o12), l25 === null)
    return null;
  Ns2.copy(o12), Ns2.applyMatrix4(s18.matrixWorld);
  const c27 = t19.ray.origin.distanceTo(Ns2);
  return c27 < t19.near || c27 > t19.far ? null : {
    distance: c27,
    point: Ns2.clone(),
    object: s18
  };
}
function Ps2(s18, e11, t19, i27, r24, n33, a22, o12, l25, c27) {
  s18.getVertexPosition(o12, Kr5), s18.getVertexPosition(l25, $r5), s18.getVertexPosition(c27, Qr5);
  const h26 = Nd2(s18, e11, t19, i27, Kr5, $r5, Qr5, Rs2);
  if (h26) {
    r24 && (As2.fromBufferAttribute(r24, o12), Ls2.fromBufferAttribute(r24, l25), Cs2.fromBufferAttribute(r24, c27), h26.uv = hi6.getInterpolation(Rs2, Kr5, $r5, Qr5, As2, Ls2, Cs2, new We7())), n33 && (As2.fromBufferAttribute(n33, o12), Ls2.fromBufferAttribute(n33, l25), Cs2.fromBufferAttribute(n33, c27), h26.uv2 = hi6.getInterpolation(Rs2, Kr5, $r5, Qr5, As2, Ls2, Cs2, new We7())), a22 && (jl2.fromBufferAttribute(a22, o12), Xl2.fromBufferAttribute(a22, l25), ql2.fromBufferAttribute(a22, c27), h26.normal = hi6.getInterpolation(Rs2, Kr5, $r5, Qr5, jl2, Xl2, ql2, new k18()), h26.normal.dot(i27.direction) > 0 && h26.normal.multiplyScalar(-1));
    const u35 = {
      a: o12,
      b: l25,
      c: c27,
      normal: new k18(),
      materialIndex: 0
    };
    hi6.getNormal(Kr5, $r5, Qr5, u35.normal), h26.face = u35;
  }
  return h26;
}
var Lr5 = class _Lr extends Xt6 {
  constructor(e11 = 1, t19 = 1, i27 = 1, r24 = 1, n33 = 1, a22 = 1) {
    super(), this.type = "BoxGeometry", this.parameters = {
      width: e11,
      height: t19,
      depth: i27,
      widthSegments: r24,
      heightSegments: n33,
      depthSegments: a22
    };
    const o12 = this;
    r24 = Math.floor(r24), n33 = Math.floor(n33), a22 = Math.floor(a22);
    const l25 = [], c27 = [], h26 = [], u35 = [];
    let d34 = 0, m33 = 0;
    _19("z", "y", "x", -1, -1, i27, t19, e11, a22, n33, 0), _19("z", "y", "x", 1, -1, i27, t19, -e11, a22, n33, 1), _19("x", "z", "y", 1, 1, e11, i27, t19, r24, a22, 2), _19("x", "z", "y", 1, -1, e11, i27, -t19, r24, a22, 3), _19("x", "y", "z", 1, -1, e11, t19, i27, r24, n33, 4), _19("x", "y", "z", -1, -1, e11, t19, -i27, r24, n33, 5), this.setIndex(l25), this.setAttribute("position", new xt6(c27, 3)), this.setAttribute("normal", new xt6(h26, 3)), this.setAttribute("uv", new xt6(u35, 2));
    function _19(y33, f39, p26, A17, M12, E24, w29, I16, D17, P19, x34) {
      const C19 = E24 / D17, G15 = w29 / P19, z19 = E24 / 2, U18 = w29 / 2, V14 = I16 / 2, j18 = D17 + 1, W8 = P19 + 1;
      let re8 = 0, $24 = 0;
      const ie8 = new k18();
      for (let le7 = 0; le7 < W8; le7++) {
        const fe7 = le7 * G15 - U18;
        for (let ue8 = 0; ue8 < j18; ue8++) {
          const H15 = ue8 * C19 - z19;
          ie8[y33] = H15 * A17, ie8[f39] = fe7 * M12, ie8[p26] = V14, c27.push(ie8.x, ie8.y, ie8.z), ie8[y33] = 0, ie8[f39] = 0, ie8[p26] = I16 > 0 ? 1 : -1, h26.push(ie8.x, ie8.y, ie8.z), u35.push(ue8 / D17), u35.push(1 - le7 / P19), re8 += 1;
        }
      }
      for (let le7 = 0; le7 < P19; le7++)
        for (let fe7 = 0; fe7 < D17; fe7++) {
          const ue8 = d34 + fe7 + j18 * le7, H15 = d34 + fe7 + j18 * (le7 + 1), q13 = d34 + (fe7 + 1) + j18 * (le7 + 1), oe7 = d34 + (fe7 + 1) + j18 * le7;
          l25.push(ue8, H15, oe7), l25.push(H15, q13, oe7), $24 += 6;
        }
      o12.addGroup(m33, $24, x34), m33 += $24, d34 += re8;
    }
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _Lr(e11.width, e11.height, e11.depth, e11.widthSegments, e11.heightSegments, e11.depthSegments);
  }
};
function Sn5(s18) {
  const e11 = {};
  for (const t19 in s18) {
    e11[t19] = {};
    for (const i27 in s18[t19]) {
      const r24 = s18[t19][i27];
      r24 && (r24.isColor || r24.isMatrix3 || r24.isMatrix4 || r24.isVector2 || r24.isVector3 || r24.isVector4 || r24.isTexture || r24.isQuaternion) ? r24.isRenderTargetTexture ? (console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."), e11[t19][i27] = null) : e11[t19][i27] = r24.clone() : Array.isArray(r24) ? e11[t19][i27] = r24.slice() : e11[t19][i27] = r24;
    }
  }
  return e11;
}
function Qt5(s18) {
  const e11 = {};
  for (let t19 = 0; t19 < s18.length; t19++) {
    const i27 = Sn5(s18[t19]);
    for (const r24 in i27)
      e11[r24] = i27[r24];
  }
  return e11;
}
function Pd2(s18) {
  const e11 = [];
  for (let t19 = 0; t19 < s18.length; t19++)
    e11.push(s18[t19].clone());
  return e11;
}
function xh2(s18) {
  return s18.getRenderTarget() === null && s18.outputEncoding === rt10 ? yi6 : aa2;
}
var Id2 = { clone: Sn5, merge: Qt5 };
var Dd2 = `void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`;
var kd2 = `void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;
var wr5 = class extends pi6 {
  constructor(e11) {
    super(), this.isShaderMaterial = true, this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, this.uniformsGroups = [], this.vertexShader = Dd2, this.fragmentShader = kd2, this.linewidth = 1, this.wireframe = false, this.wireframeLinewidth = 1, this.fog = false, this.lights = false, this.clipping = false, this.forceSinglePass = true, this.extensions = {
      derivatives: false,
      // set to use derivatives
      fragDepth: false,
      // set to use fragment depth values
      drawBuffers: false,
      // set to use draw buffers
      shaderTextureLOD: false
      // set to use shader texture LOD
    }, this.defaultAttributeValues = {
      color: [1, 1, 1],
      uv: [0, 0],
      uv2: [0, 0]
    }, this.index0AttributeName = void 0, this.uniformsNeedUpdate = false, this.glslVersion = null, e11 !== void 0 && this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.fragmentShader = e11.fragmentShader, this.vertexShader = e11.vertexShader, this.uniforms = Sn5(e11.uniforms), this.uniformsGroups = Pd2(e11.uniformsGroups), this.defines = Object.assign({}, e11.defines), this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.fog = e11.fog, this.lights = e11.lights, this.clipping = e11.clipping, this.extensions = Object.assign({}, e11.extensions), this.glslVersion = e11.glslVersion, this;
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    t19.glslVersion = this.glslVersion, t19.uniforms = {};
    for (const r24 in this.uniforms) {
      const n33 = this.uniforms[r24].value;
      n33 && n33.isTexture ? t19.uniforms[r24] = {
        type: "t",
        value: n33.toJSON(e11).uuid
      } : n33 && n33.isColor ? t19.uniforms[r24] = {
        type: "c",
        value: n33.getHex()
      } : n33 && n33.isVector2 ? t19.uniforms[r24] = {
        type: "v2",
        value: n33.toArray()
      } : n33 && n33.isVector3 ? t19.uniforms[r24] = {
        type: "v3",
        value: n33.toArray()
      } : n33 && n33.isVector4 ? t19.uniforms[r24] = {
        type: "v4",
        value: n33.toArray()
      } : n33 && n33.isMatrix3 ? t19.uniforms[r24] = {
        type: "m3",
        value: n33.toArray()
      } : n33 && n33.isMatrix4 ? t19.uniforms[r24] = {
        type: "m4",
        value: n33.toArray()
      } : t19.uniforms[r24] = {
        value: n33
      };
    }
    Object.keys(this.defines).length > 0 && (t19.defines = this.defines), t19.vertexShader = this.vertexShader, t19.fragmentShader = this.fragmentShader;
    const i27 = {};
    for (const r24 in this.extensions)
      this.extensions[r24] === true && (i27[r24] = true);
    return Object.keys(i27).length > 0 && (t19.extensions = i27), t19;
  }
};
var bh2 = class extends _t7 {
  constructor() {
    super(), this.isCamera = true, this.type = "Camera", this.matrixWorldInverse = new He6(), this.projectionMatrix = new He6(), this.projectionMatrixInverse = new He6();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.matrixWorldInverse.copy(e11.matrixWorldInverse), this.projectionMatrix.copy(e11.projectionMatrix), this.projectionMatrixInverse.copy(e11.projectionMatrixInverse), this;
  }
  getWorldDirection(e11) {
    this.updateWorldMatrix(true, false);
    const t19 = this.matrixWorld.elements;
    return e11.set(-t19[8], -t19[9], -t19[10]).normalize();
  }
  updateMatrixWorld(e11) {
    super.updateMatrixWorld(e11), this.matrixWorldInverse.copy(this.matrixWorld).invert();
  }
  updateWorldMatrix(e11, t19) {
    super.updateWorldMatrix(e11, t19), this.matrixWorldInverse.copy(this.matrixWorld).invert();
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var Bt6 = class extends bh2 {
  constructor(e11 = 50, t19 = 1, i27 = 0.1, r24 = 2e3) {
    super(), this.isPerspectiveCamera = true, this.type = "PerspectiveCamera", this.fov = e11, this.zoom = 1, this.near = i27, this.far = r24, this.focus = 10, this.aspect = t19, this.view = null, this.filmGauge = 35, this.filmOffset = 0, this.updateProjectionMatrix();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.fov = e11.fov, this.zoom = e11.zoom, this.near = e11.near, this.far = e11.far, this.focus = e11.focus, this.aspect = e11.aspect, this.view = e11.view === null ? null : Object.assign({}, e11.view), this.filmGauge = e11.filmGauge, this.filmOffset = e11.filmOffset, this;
  }
  /**
   * Sets the FOV by focal length in respect to the current .filmGauge.
   *
   * The default film gauge is 35, so that the focal length can be specified for
   * a 35mm (full frame) camera.
   *
   * Values for focal length and film gauge must have the same unit.
   */
  setFocalLength(e11) {
    const t19 = 0.5 * this.getFilmHeight() / e11;
    this.fov = wn5 * 2 * Math.atan(t19), this.updateProjectionMatrix();
  }
  /**
   * Calculates the focal length from the current .fov and .filmGauge.
   */
  getFocalLength() {
    const e11 = Math.tan(pn5 * 0.5 * this.fov);
    return 0.5 * this.getFilmHeight() / e11;
  }
  getEffectiveFOV() {
    return wn5 * 2 * Math.atan(
      Math.tan(pn5 * 0.5 * this.fov) / this.zoom
    );
  }
  getFilmWidth() {
    return this.filmGauge * Math.min(this.aspect, 1);
  }
  getFilmHeight() {
    return this.filmGauge / Math.max(this.aspect, 1);
  }
  /**
   * Sets an offset in a larger frustum. This is useful for multi-window or
   * multi-monitor/multi-machine setups.
   *
   * For example, if you have 3x2 monitors and each monitor is 1920x1080 and
   * the monitors are in grid like this
   *
   *   +---+---+---+
   *   | A | B | C |
   *   +---+---+---+
   *   | D | E | F |
   *   +---+---+---+
   *
   * then for each monitor you would call it like this
   *
   *   const w = 1920;
   *   const h = 1080;
   *   const fullWidth = w * 3;
   *   const fullHeight = h * 2;
   *
   *   --A--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );
   *   --B--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );
   *   --C--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );
   *   --D--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );
   *   --E--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );
   *   --F--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );
   *
   *   Note there is no reason monitors have to be the same size or in a grid.
   */
  setViewOffset(e11, t19, i27, r24, n33, a22) {
    this.aspect = e11 / t19, this.view === null && (this.view = {
      enabled: true,
      fullWidth: 1,
      fullHeight: 1,
      offsetX: 0,
      offsetY: 0,
      width: 1,
      height: 1
    }), this.view.enabled = true, this.view.fullWidth = e11, this.view.fullHeight = t19, this.view.offsetX = i27, this.view.offsetY = r24, this.view.width = n33, this.view.height = a22, this.updateProjectionMatrix();
  }
  clearViewOffset() {
    this.view !== null && (this.view.enabled = false), this.updateProjectionMatrix();
  }
  updateProjectionMatrix() {
    const e11 = this.near;
    let t19 = e11 * Math.tan(pn5 * 0.5 * this.fov) / this.zoom, i27 = 2 * t19, r24 = this.aspect * i27, n33 = -0.5 * r24;
    const a22 = this.view;
    if (this.view !== null && this.view.enabled) {
      const l25 = a22.fullWidth, c27 = a22.fullHeight;
      n33 += a22.offsetX * r24 / l25, t19 -= a22.offsetY * i27 / c27, r24 *= a22.width / l25, i27 *= a22.height / c27;
    }
    const o12 = this.filmOffset;
    o12 !== 0 && (n33 += e11 * o12 / this.getFilmWidth()), this.projectionMatrix.makePerspective(n33, n33 + r24, t19, t19 - i27, e11, this.far), this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return t19.object.fov = this.fov, t19.object.zoom = this.zoom, t19.object.near = this.near, t19.object.far = this.far, t19.object.focus = this.focus, t19.object.aspect = this.aspect, this.view !== null && (t19.object.view = Object.assign({}, this.view)), t19.object.filmGauge = this.filmGauge, t19.object.filmOffset = this.filmOffset, t19;
  }
};
var en4 = -90;
var tn4 = 1;
var Ud2 = class extends _t7 {
  constructor(e11, t19, i27) {
    super(), this.type = "CubeCamera", this.renderTarget = i27;
    const r24 = new Bt6(en4, tn4, e11, t19);
    r24.layers = this.layers, r24.up.set(0, 1, 0), r24.lookAt(1, 0, 0), this.add(r24);
    const n33 = new Bt6(en4, tn4, e11, t19);
    n33.layers = this.layers, n33.up.set(0, 1, 0), n33.lookAt(-1, 0, 0), this.add(n33);
    const a22 = new Bt6(en4, tn4, e11, t19);
    a22.layers = this.layers, a22.up.set(0, 0, -1), a22.lookAt(0, 1, 0), this.add(a22);
    const o12 = new Bt6(en4, tn4, e11, t19);
    o12.layers = this.layers, o12.up.set(0, 0, 1), o12.lookAt(0, -1, 0), this.add(o12);
    const l25 = new Bt6(en4, tn4, e11, t19);
    l25.layers = this.layers, l25.up.set(0, 1, 0), l25.lookAt(0, 0, 1), this.add(l25);
    const c27 = new Bt6(en4, tn4, e11, t19);
    c27.layers = this.layers, c27.up.set(0, 1, 0), c27.lookAt(0, 0, -1), this.add(c27);
  }
  update(e11, t19) {
    this.parent === null && this.updateMatrixWorld();
    const i27 = this.renderTarget, [r24, n33, a22, o12, l25, c27] = this.children, h26 = e11.getRenderTarget(), u35 = e11.toneMapping, d34 = e11.xr.enabled;
    e11.toneMapping = Fi4, e11.xr.enabled = false;
    const m33 = i27.texture.generateMipmaps;
    i27.texture.generateMipmaps = false, e11.setRenderTarget(i27, 0), e11.render(t19, r24), e11.setRenderTarget(i27, 1), e11.render(t19, n33), e11.setRenderTarget(i27, 2), e11.render(t19, a22), e11.setRenderTarget(i27, 3), e11.render(t19, o12), e11.setRenderTarget(i27, 4), e11.render(t19, l25), i27.texture.generateMipmaps = m33, e11.setRenderTarget(i27, 5), e11.render(t19, c27), e11.setRenderTarget(h26), e11.toneMapping = u35, e11.xr.enabled = d34, i27.texture.needsPMREMUpdate = true;
  }
};
var Mh2 = class extends Wt7 {
  constructor(e11, t19, i27, r24, n33, a22, o12, l25, c27, h26) {
    e11 = e11 !== void 0 ? e11 : [], t19 = t19 !== void 0 ? t19 : yn5, super(e11, t19, i27, r24, n33, a22, o12, l25, c27, h26), this.isCubeTexture = true, this.flipY = false;
  }
  get images() {
    return this.image;
  }
  set images(e11) {
    this.image = e11;
  }
};
var Od2 = class extends Mr5 {
  constructor(e11 = 1, t19 = {}) {
    super(e11, e11, t19), this.isWebGLCubeRenderTarget = true;
    const i27 = { width: e11, height: e11, depth: 1 }, r24 = [i27, i27, i27, i27, i27, i27];
    this.texture = new Mh2(r24, t19.mapping, t19.wrapS, t19.wrapT, t19.magFilter, t19.minFilter, t19.format, t19.type, t19.anisotropy, t19.encoding), this.texture.isRenderTargetTexture = true, this.texture.generateMipmaps = t19.generateMipmaps !== void 0 ? t19.generateMipmaps : false, this.texture.minFilter = t19.minFilter !== void 0 ? t19.minFilter : Vt6;
  }
  fromEquirectangularTexture(e11, t19) {
    this.texture.type = t19.type, this.texture.encoding = t19.encoding, this.texture.generateMipmaps = t19.generateMipmaps, this.texture.minFilter = t19.minFilter, this.texture.magFilter = t19.magFilter;
    const i27 = {
      uniforms: {
        tEquirect: { value: null }
      },
      vertexShader: (
        /* glsl */
        `

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`
      ),
      fragmentShader: (
        /* glsl */
        `

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`
      )
    }, r24 = new Lr5(5, 5, 5), n33 = new wr5({
      name: "CubemapFromEquirect",
      uniforms: Sn5(i27.uniforms),
      vertexShader: i27.vertexShader,
      fragmentShader: i27.fragmentShader,
      side: ti6,
      blending: tr5
    });
    n33.uniforms.tEquirect.value = t19;
    const a22 = new Rt8(r24, n33), o12 = t19.minFilter;
    return t19.minFilter === Hi3 && (t19.minFilter = Vt6), new Ud2(1, 10, this).update(e11, a22), t19.minFilter = o12, a22.geometry.dispose(), a22.material.dispose(), this;
  }
  clear(e11, t19, i27, r24) {
    const n33 = e11.getRenderTarget();
    for (let a22 = 0; a22 < 6; a22++)
      e11.setRenderTarget(this, a22), e11.clear(t19, i27, r24);
    e11.setRenderTarget(n33);
  }
};
var ja2 = new k18();
var zd2 = new k18();
var Bd2 = new Ke5();
var hr5 = class {
  constructor(e11 = new k18(1, 0, 0), t19 = 0) {
    this.isPlane = true, this.normal = e11, this.constant = t19;
  }
  set(e11, t19) {
    return this.normal.copy(e11), this.constant = t19, this;
  }
  setComponents(e11, t19, i27, r24) {
    return this.normal.set(e11, t19, i27), this.constant = r24, this;
  }
  setFromNormalAndCoplanarPoint(e11, t19) {
    return this.normal.copy(e11), this.constant = -t19.dot(this.normal), this;
  }
  setFromCoplanarPoints(e11, t19, i27) {
    const r24 = ja2.subVectors(i27, t19).cross(zd2.subVectors(e11, t19)).normalize();
    return this.setFromNormalAndCoplanarPoint(r24, e11), this;
  }
  copy(e11) {
    return this.normal.copy(e11.normal), this.constant = e11.constant, this;
  }
  normalize() {
    const e11 = 1 / this.normal.length();
    return this.normal.multiplyScalar(e11), this.constant *= e11, this;
  }
  negate() {
    return this.constant *= -1, this.normal.negate(), this;
  }
  distanceToPoint(e11) {
    return this.normal.dot(e11) + this.constant;
  }
  distanceToSphere(e11) {
    return this.distanceToPoint(e11.center) - e11.radius;
  }
  projectPoint(e11, t19) {
    return t19.copy(e11).addScaledVector(this.normal, -this.distanceToPoint(e11));
  }
  intersectLine(e11, t19) {
    const i27 = e11.delta(ja2), r24 = this.normal.dot(i27);
    if (r24 === 0)
      return this.distanceToPoint(e11.start) === 0 ? t19.copy(e11.start) : null;
    const n33 = -(e11.start.dot(this.normal) + this.constant) / r24;
    return n33 < 0 || n33 > 1 ? null : t19.copy(e11.start).addScaledVector(i27, n33);
  }
  intersectsLine(e11) {
    const t19 = this.distanceToPoint(e11.start), i27 = this.distanceToPoint(e11.end);
    return t19 < 0 && i27 > 0 || i27 < 0 && t19 > 0;
  }
  intersectsBox(e11) {
    return e11.intersectsPlane(this);
  }
  intersectsSphere(e11) {
    return e11.intersectsPlane(this);
  }
  coplanarPoint(e11) {
    return e11.copy(this.normal).multiplyScalar(-this.constant);
  }
  applyMatrix4(e11, t19) {
    const i27 = t19 || Bd2.getNormalMatrix(e11), r24 = this.coplanarPoint(ja2).applyMatrix4(e11), n33 = this.normal.applyMatrix3(i27).normalize();
    return this.constant = -r24.dot(n33), this;
  }
  translate(e11) {
    return this.constant -= e11.dot(this.normal), this;
  }
  equals(e11) {
    return e11.normal.equals(this.normal) && e11.constant === this.constant;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var lr5 = new Gi2();
var Is = new k18();
var Po2 = class {
  constructor(e11 = new hr5(), t19 = new hr5(), i27 = new hr5(), r24 = new hr5(), n33 = new hr5(), a22 = new hr5()) {
    this.planes = [e11, t19, i27, r24, n33, a22];
  }
  set(e11, t19, i27, r24, n33, a22) {
    const o12 = this.planes;
    return o12[0].copy(e11), o12[1].copy(t19), o12[2].copy(i27), o12[3].copy(r24), o12[4].copy(n33), o12[5].copy(a22), this;
  }
  copy(e11) {
    const t19 = this.planes;
    for (let i27 = 0; i27 < 6; i27++)
      t19[i27].copy(e11.planes[i27]);
    return this;
  }
  setFromProjectionMatrix(e11) {
    const t19 = this.planes, i27 = e11.elements, r24 = i27[0], n33 = i27[1], a22 = i27[2], o12 = i27[3], l25 = i27[4], c27 = i27[5], h26 = i27[6], u35 = i27[7], d34 = i27[8], m33 = i27[9], _19 = i27[10], y33 = i27[11], f39 = i27[12], p26 = i27[13], A17 = i27[14], M12 = i27[15];
    return t19[0].setComponents(o12 - r24, u35 - l25, y33 - d34, M12 - f39).normalize(), t19[1].setComponents(o12 + r24, u35 + l25, y33 + d34, M12 + f39).normalize(), t19[2].setComponents(o12 + n33, u35 + c27, y33 + m33, M12 + p26).normalize(), t19[3].setComponents(o12 - n33, u35 - c27, y33 - m33, M12 - p26).normalize(), t19[4].setComponents(o12 - a22, u35 - h26, y33 - _19, M12 - A17).normalize(), t19[5].setComponents(o12 + a22, u35 + h26, y33 + _19, M12 + A17).normalize(), this;
  }
  intersectsObject(e11) {
    if (e11.boundingSphere !== void 0)
      e11.boundingSphere === null && e11.computeBoundingSphere(), lr5.copy(e11.boundingSphere).applyMatrix4(e11.matrixWorld);
    else {
      const t19 = e11.geometry;
      t19.boundingSphere === null && t19.computeBoundingSphere(), lr5.copy(t19.boundingSphere).applyMatrix4(e11.matrixWorld);
    }
    return this.intersectsSphere(lr5);
  }
  intersectsSprite(e11) {
    return lr5.center.set(0, 0, 0), lr5.radius = 0.7071067811865476, lr5.applyMatrix4(e11.matrixWorld), this.intersectsSphere(lr5);
  }
  intersectsSphere(e11) {
    const t19 = this.planes, i27 = e11.center, r24 = -e11.radius;
    for (let n33 = 0; n33 < 6; n33++)
      if (t19[n33].distanceToPoint(i27) < r24)
        return false;
    return true;
  }
  intersectsBox(e11) {
    const t19 = this.planes;
    for (let i27 = 0; i27 < 6; i27++) {
      const r24 = t19[i27];
      if (Is.x = r24.normal.x > 0 ? e11.max.x : e11.min.x, Is.y = r24.normal.y > 0 ? e11.max.y : e11.min.y, Is.z = r24.normal.z > 0 ? e11.max.z : e11.min.z, r24.distanceToPoint(Is) < 0)
        return false;
    }
    return true;
  }
  containsPoint(e11) {
    const t19 = this.planes;
    for (let i27 = 0; i27 < 6; i27++)
      if (t19[i27].distanceToPoint(e11) < 0)
        return false;
    return true;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
function wh2() {
  let s18 = null, e11 = false, t19 = null, i27 = null;
  function r24(n33, a22) {
    t19(n33, a22), i27 = s18.requestAnimationFrame(r24);
  }
  return {
    start: function() {
      e11 !== true && t19 !== null && (i27 = s18.requestAnimationFrame(r24), e11 = true);
    },
    stop: function() {
      s18.cancelAnimationFrame(i27), e11 = false;
    },
    setAnimationLoop: function(n33) {
      t19 = n33;
    },
    setContext: function(n33) {
      s18 = n33;
    }
  };
}
function Fd2(s18, e11) {
  const t19 = e11.isWebGL2, i27 = /* @__PURE__ */ new WeakMap();
  function r24(c27, h26) {
    const u35 = c27.array, d34 = c27.usage, m33 = s18.createBuffer();
    s18.bindBuffer(h26, m33), s18.bufferData(h26, u35, d34), c27.onUploadCallback();
    let _19;
    if (u35 instanceof Float32Array)
      _19 = 5126;
    else if (u35 instanceof Uint16Array)
      if (c27.isFloat16BufferAttribute)
        if (t19)
          _19 = 5131;
        else
          throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");
      else
        _19 = 5123;
    else if (u35 instanceof Int16Array)
      _19 = 5122;
    else if (u35 instanceof Uint32Array)
      _19 = 5125;
    else if (u35 instanceof Int32Array)
      _19 = 5124;
    else if (u35 instanceof Int8Array)
      _19 = 5120;
    else if (u35 instanceof Uint8Array)
      _19 = 5121;
    else if (u35 instanceof Uint8ClampedArray)
      _19 = 5121;
    else
      throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: " + u35);
    return {
      buffer: m33,
      type: _19,
      bytesPerElement: u35.BYTES_PER_ELEMENT,
      version: c27.version
    };
  }
  function n33(c27, h26, u35) {
    const d34 = h26.array, m33 = h26.updateRange;
    s18.bindBuffer(u35, c27), m33.count === -1 ? s18.bufferSubData(u35, 0, d34) : (t19 ? s18.bufferSubData(
      u35,
      m33.offset * d34.BYTES_PER_ELEMENT,
      d34,
      m33.offset,
      m33.count
    ) : s18.bufferSubData(
      u35,
      m33.offset * d34.BYTES_PER_ELEMENT,
      d34.subarray(m33.offset, m33.offset + m33.count)
    ), m33.count = -1), h26.onUploadCallback();
  }
  function a22(c27) {
    return c27.isInterleavedBufferAttribute && (c27 = c27.data), i27.get(c27);
  }
  function o12(c27) {
    c27.isInterleavedBufferAttribute && (c27 = c27.data);
    const h26 = i27.get(c27);
    h26 && (s18.deleteBuffer(h26.buffer), i27.delete(c27));
  }
  function l25(c27, h26) {
    if (c27.isGLBufferAttribute) {
      const d34 = i27.get(c27);
      (!d34 || d34.version < c27.version) && i27.set(c27, {
        buffer: c27.buffer,
        type: c27.type,
        bytesPerElement: c27.elementSize,
        version: c27.version
      });
      return;
    }
    c27.isInterleavedBufferAttribute && (c27 = c27.data);
    const u35 = i27.get(c27);
    u35 === void 0 ? i27.set(c27, r24(c27, h26)) : u35.version < c27.version && (n33(u35.buffer, c27, h26), u35.version = c27.version);
  }
  return {
    get: a22,
    remove: o12,
    update: l25
  };
}
var oa2 = class _oa extends Xt6 {
  constructor(e11 = 1, t19 = 1, i27 = 1, r24 = 1) {
    super(), this.type = "PlaneGeometry", this.parameters = {
      width: e11,
      height: t19,
      widthSegments: i27,
      heightSegments: r24
    };
    const n33 = e11 / 2, a22 = t19 / 2, o12 = Math.floor(i27), l25 = Math.floor(r24), c27 = o12 + 1, h26 = l25 + 1, u35 = e11 / o12, d34 = t19 / l25, m33 = [], _19 = [], y33 = [], f39 = [];
    for (let p26 = 0; p26 < h26; p26++) {
      const A17 = p26 * d34 - a22;
      for (let M12 = 0; M12 < c27; M12++) {
        const E24 = M12 * u35 - n33;
        _19.push(E24, -A17, 0), y33.push(0, 0, 1), f39.push(M12 / o12), f39.push(1 - p26 / l25);
      }
    }
    for (let p26 = 0; p26 < l25; p26++)
      for (let A17 = 0; A17 < o12; A17++) {
        const M12 = A17 + c27 * p26, E24 = A17 + c27 * (p26 + 1), w29 = A17 + 1 + c27 * (p26 + 1), I16 = A17 + 1 + c27 * p26;
        m33.push(M12, E24, I16), m33.push(E24, w29, I16);
      }
    this.setIndex(m33), this.setAttribute("position", new xt6(_19, 3)), this.setAttribute("normal", new xt6(y33, 3)), this.setAttribute("uv", new xt6(f39, 2));
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _oa(e11.width, e11.height, e11.widthSegments, e11.heightSegments);
  }
};
var Hd2 = `#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`;
var Vd2 = `#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`;
var Gd2 = `#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`;
var Wd2 = `#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`;
var jd2 = `#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`;
var Xd2 = `#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`;
var qd2 = "vec3 transformed = vec3( position );";
var Yd2 = `vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`;
var Zd2 = `float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`;
var Jd2 = `#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`;
var Kd2 = `#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`;
var $d2 = `#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`;
var Qd2 = `#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`;
var ep2 = `#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`;
var tp2 = `#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`;
var ip2 = `#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`;
var rp2 = `#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`;
var np2 = `#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`;
var sp2 = `#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`;
var ap2 = `#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`;
var op2 = `#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`;
var lp2 = `vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`;
var cp2 = `#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`;
var hp2 = `#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`;
var up2 = `#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`;
var dp2 = `#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`;
var pp2 = "gl_FragColor = linearToOutputTexel( gl_FragColor );";
var mp2 = `vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`;
var fp2 = `#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`;
var gp2 = `#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`;
var _p2 = `#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`;
var vp2 = `#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`;
var yp2 = `#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`;
var xp2 = `#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`;
var bp2 = `#ifdef USE_FOG
	varying float vFogDepth;
#endif`;
var Mp2 = `#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`;
var wp2 = `#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`;
var Sp2 = `#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`;
var Tp2 = `#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`;
var Ep2 = `#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`;
var Ap2 = `LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`;
var Lp2 = `varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`;
var Cp2 = `uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`;
var Rp2 = `#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`;
var Np2 = `ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`;
var Pp2 = `varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`;
var Ip2 = `BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`;
var Dp2 = `varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`;
var kp2 = `PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`;
var Up2 = `struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`;
var Op2 = `
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`;
var zp2 = `#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`;
var Bp2 = `#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`;
var Fp2 = `#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`;
var Hp2 = `#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`;
var Vp2 = `#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`;
var Gp2 = `#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`;
var Wp2 = `#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`;
var jp2 = `#ifdef USE_MAP
	uniform sampler2D map;
#endif`;
var Xp2 = `#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`;
var qp2 = `#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`;
var Yp2 = `float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`;
var Zp2 = `#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`;
var Jp2 = `#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`;
var Kp2 = `#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`;
var $p2 = `#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`;
var Qp2 = `#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`;
var em2 = `float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`;
var tm2 = `#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`;
var im2 = `#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`;
var rm2 = `#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`;
var nm2 = `#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`;
var sm2 = `#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`;
var am2 = `#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`;
var om2 = `#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`;
var lm2 = `#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`;
var cm2 = `#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`;
var hm2 = `#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`;
var um2 = `vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`;
var dm2 = `#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`;
var pm2 = `vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`;
var mm2 = `#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`;
var fm2 = `#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`;
var gm2 = `float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`;
var _m2 = `#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`;
var vm2 = `#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`;
var ym2 = `#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`;
var xm2 = `#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`;
var bm2 = `float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`;
var Mm2 = `#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`;
var wm2 = `#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`;
var Sm2 = `#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`;
var Tm2 = `#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`;
var Em2 = `float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`;
var Am2 = `#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`;
var Lm2 = `#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`;
var Cm2 = `#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`;
var Rm2 = `#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`;
var Nm2 = `#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`;
var Pm2 = `#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`;
var Im2 = `#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_UV2
	attribute vec2 uv2;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`;
var Dm2 = `#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`;
var km2 = `#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;
var Um2 = `varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`;
var Om2 = `uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var zm2 = `varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`;
var Bm2 = `#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var Fm2 = `varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`;
var Hm2 = `uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var Vm2 = `#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`;
var Gm2 = `#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`;
var Wm2 = `#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`;
var jm2 = `#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`;
var Xm2 = `varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`;
var qm2 = `uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var Ym2 = `uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;
var Zm2 = `uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`;
var Jm2 = `#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`;
var Km2 = `uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var $m2 = `#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var Qm2 = `#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var ef2 = `#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`;
var tf2 = `#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var rf2 = `#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`;
var nf2 = `#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`;
var sf2 = `#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var af2 = `#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var of2 = `#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`;
var lf2 = `#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var cf2 = `#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var hf2 = `#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var uf2 = `uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`;
var df2 = `uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`;
var pf2 = `#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var mf2 = `uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`;
var ff2 = `uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;
var gf2 = `uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`;
var qe6 = {
  alphamap_fragment: Hd2,
  alphamap_pars_fragment: Vd2,
  alphatest_fragment: Gd2,
  alphatest_pars_fragment: Wd2,
  aomap_fragment: jd2,
  aomap_pars_fragment: Xd2,
  begin_vertex: qd2,
  beginnormal_vertex: Yd2,
  bsdfs: Zd2,
  iridescence_fragment: Jd2,
  bumpmap_pars_fragment: Kd2,
  clipping_planes_fragment: $d2,
  clipping_planes_pars_fragment: Qd2,
  clipping_planes_pars_vertex: ep2,
  clipping_planes_vertex: tp2,
  color_fragment: ip2,
  color_pars_fragment: rp2,
  color_pars_vertex: np2,
  color_vertex: sp2,
  common: ap2,
  cube_uv_reflection_fragment: op2,
  defaultnormal_vertex: lp2,
  displacementmap_pars_vertex: cp2,
  displacementmap_vertex: hp2,
  emissivemap_fragment: up2,
  emissivemap_pars_fragment: dp2,
  encodings_fragment: pp2,
  encodings_pars_fragment: mp2,
  envmap_fragment: fp2,
  envmap_common_pars_fragment: gp2,
  envmap_pars_fragment: _p2,
  envmap_pars_vertex: vp2,
  envmap_physical_pars_fragment: Rp2,
  envmap_vertex: yp2,
  fog_vertex: xp2,
  fog_pars_vertex: bp2,
  fog_fragment: Mp2,
  fog_pars_fragment: wp2,
  gradientmap_pars_fragment: Sp2,
  lightmap_fragment: Tp2,
  lightmap_pars_fragment: Ep2,
  lights_lambert_fragment: Ap2,
  lights_lambert_pars_fragment: Lp2,
  lights_pars_begin: Cp2,
  lights_toon_fragment: Np2,
  lights_toon_pars_fragment: Pp2,
  lights_phong_fragment: Ip2,
  lights_phong_pars_fragment: Dp2,
  lights_physical_fragment: kp2,
  lights_physical_pars_fragment: Up2,
  lights_fragment_begin: Op2,
  lights_fragment_maps: zp2,
  lights_fragment_end: Bp2,
  logdepthbuf_fragment: Fp2,
  logdepthbuf_pars_fragment: Hp2,
  logdepthbuf_pars_vertex: Vp2,
  logdepthbuf_vertex: Gp2,
  map_fragment: Wp2,
  map_pars_fragment: jp2,
  map_particle_fragment: Xp2,
  map_particle_pars_fragment: qp2,
  metalnessmap_fragment: Yp2,
  metalnessmap_pars_fragment: Zp2,
  morphcolor_vertex: Jp2,
  morphnormal_vertex: Kp2,
  morphtarget_pars_vertex: $p2,
  morphtarget_vertex: Qp2,
  normal_fragment_begin: em2,
  normal_fragment_maps: tm2,
  normal_pars_fragment: im2,
  normal_pars_vertex: rm2,
  normal_vertex: nm2,
  normalmap_pars_fragment: sm2,
  clearcoat_normal_fragment_begin: am2,
  clearcoat_normal_fragment_maps: om2,
  clearcoat_pars_fragment: lm2,
  iridescence_pars_fragment: cm2,
  output_fragment: hm2,
  packing: um2,
  premultiplied_alpha_fragment: dm2,
  project_vertex: pm2,
  dithering_fragment: mm2,
  dithering_pars_fragment: fm2,
  roughnessmap_fragment: gm2,
  roughnessmap_pars_fragment: _m2,
  shadowmap_pars_fragment: vm2,
  shadowmap_pars_vertex: ym2,
  shadowmap_vertex: xm2,
  shadowmask_pars_fragment: bm2,
  skinbase_vertex: Mm2,
  skinning_pars_vertex: wm2,
  skinning_vertex: Sm2,
  skinnormal_vertex: Tm2,
  specularmap_fragment: Em2,
  specularmap_pars_fragment: Am2,
  tonemapping_fragment: Lm2,
  tonemapping_pars_fragment: Cm2,
  transmission_fragment: Rm2,
  transmission_pars_fragment: Nm2,
  uv_pars_fragment: Pm2,
  uv_pars_vertex: Im2,
  uv_vertex: Dm2,
  worldpos_vertex: km2,
  background_vert: Um2,
  background_frag: Om2,
  backgroundCube_vert: zm2,
  backgroundCube_frag: Bm2,
  cube_vert: Fm2,
  cube_frag: Hm2,
  depth_vert: Vm2,
  depth_frag: Gm2,
  distanceRGBA_vert: Wm2,
  distanceRGBA_frag: jm2,
  equirect_vert: Xm2,
  equirect_frag: qm2,
  linedashed_vert: Ym2,
  linedashed_frag: Zm2,
  meshbasic_vert: Jm2,
  meshbasic_frag: Km2,
  meshlambert_vert: $m2,
  meshlambert_frag: Qm2,
  meshmatcap_vert: ef2,
  meshmatcap_frag: tf2,
  meshnormal_vert: rf2,
  meshnormal_frag: nf2,
  meshphong_vert: sf2,
  meshphong_frag: af2,
  meshphysical_vert: of2,
  meshphysical_frag: lf2,
  meshtoon_vert: cf2,
  meshtoon_frag: hf2,
  points_vert: uf2,
  points_frag: df2,
  shadow_vert: pf2,
  shadow_frag: mf2,
  sprite_vert: ff2,
  sprite_frag: gf2
};
var ve7 = {
  common: {
    diffuse: { value: new ze7(16777215) },
    opacity: { value: 1 },
    map: { value: null },
    mapTransform: { value: new Ke5() },
    alphaMap: { value: null },
    alphaMapTransform: { value: new Ke5() },
    alphaTest: { value: 0 }
  },
  specularmap: {
    specularMap: { value: null },
    specularMapTransform: { value: new Ke5() }
  },
  envmap: {
    envMap: { value: null },
    flipEnvMap: { value: -1 },
    reflectivity: { value: 1 },
    // basic, lambert, phong
    ior: { value: 1.5 },
    // physical
    refractionRatio: { value: 0.98 }
    // basic, lambert, phong
  },
  aomap: {
    aoMap: { value: null },
    aoMapIntensity: { value: 1 },
    aoMapTransform: { value: new Ke5() }
  },
  lightmap: {
    lightMap: { value: null },
    lightMapIntensity: { value: 1 },
    lightMapTransform: { value: new Ke5() }
  },
  bumpmap: {
    bumpMap: { value: null },
    bumpMapTransform: { value: new Ke5() },
    bumpScale: { value: 1 }
  },
  normalmap: {
    normalMap: { value: null },
    normalMapTransform: { value: new Ke5() },
    normalScale: { value: new We7(1, 1) }
  },
  displacementmap: {
    displacementMap: { value: null },
    displacementMapTransform: { value: new Ke5() },
    displacementScale: { value: 1 },
    displacementBias: { value: 0 }
  },
  emissivemap: {
    emissiveMap: { value: null },
    emissiveMapTransform: { value: new Ke5() }
  },
  metalnessmap: {
    metalnessMap: { value: null },
    metalnessMapTransform: { value: new Ke5() }
  },
  roughnessmap: {
    roughnessMap: { value: null },
    roughnessMapTransform: { value: new Ke5() }
  },
  gradientmap: {
    gradientMap: { value: null }
  },
  fog: {
    fogDensity: { value: 25e-5 },
    fogNear: { value: 1 },
    fogFar: { value: 2e3 },
    fogColor: { value: new ze7(16777215) }
  },
  lights: {
    ambientLightColor: { value: [] },
    lightProbe: { value: [] },
    directionalLights: { value: [], properties: {
      direction: {},
      color: {}
    } },
    directionalLightShadows: { value: [], properties: {
      shadowBias: {},
      shadowNormalBias: {},
      shadowRadius: {},
      shadowMapSize: {}
    } },
    directionalShadowMap: { value: [] },
    directionalShadowMatrix: { value: [] },
    spotLights: { value: [], properties: {
      color: {},
      position: {},
      direction: {},
      distance: {},
      coneCos: {},
      penumbraCos: {},
      decay: {}
    } },
    spotLightShadows: { value: [], properties: {
      shadowBias: {},
      shadowNormalBias: {},
      shadowRadius: {},
      shadowMapSize: {}
    } },
    spotLightMap: { value: [] },
    spotShadowMap: { value: [] },
    spotLightMatrix: { value: [] },
    pointLights: { value: [], properties: {
      color: {},
      position: {},
      decay: {},
      distance: {}
    } },
    pointLightShadows: { value: [], properties: {
      shadowBias: {},
      shadowNormalBias: {},
      shadowRadius: {},
      shadowMapSize: {},
      shadowCameraNear: {},
      shadowCameraFar: {}
    } },
    pointShadowMap: { value: [] },
    pointShadowMatrix: { value: [] },
    hemisphereLights: { value: [], properties: {
      direction: {},
      skyColor: {},
      groundColor: {}
    } },
    // TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src
    rectAreaLights: { value: [], properties: {
      color: {},
      position: {},
      width: {},
      height: {}
    } },
    ltc_1: { value: null },
    ltc_2: { value: null }
  },
  points: {
    diffuse: { value: new ze7(16777215) },
    opacity: { value: 1 },
    size: { value: 1 },
    scale: { value: 1 },
    map: { value: null },
    alphaMap: { value: null },
    alphaTest: { value: 0 },
    uvTransform: { value: new Ke5() }
  },
  sprite: {
    diffuse: { value: new ze7(16777215) },
    opacity: { value: 1 },
    center: { value: new We7(0.5, 0.5) },
    rotation: { value: 0 },
    map: { value: null },
    mapTransform: { value: new Ke5() },
    alphaMap: { value: null },
    alphaTest: { value: 0 }
  }
};
var Si4 = {
  basic: {
    uniforms: Qt5([
      ve7.common,
      ve7.specularmap,
      ve7.envmap,
      ve7.aomap,
      ve7.lightmap,
      ve7.fog
    ]),
    vertexShader: qe6.meshbasic_vert,
    fragmentShader: qe6.meshbasic_frag
  },
  lambert: {
    uniforms: Qt5([
      ve7.common,
      ve7.specularmap,
      ve7.envmap,
      ve7.aomap,
      ve7.lightmap,
      ve7.emissivemap,
      ve7.bumpmap,
      ve7.normalmap,
      ve7.displacementmap,
      ve7.fog,
      ve7.lights,
      {
        emissive: { value: new ze7(0) }
      }
    ]),
    vertexShader: qe6.meshlambert_vert,
    fragmentShader: qe6.meshlambert_frag
  },
  phong: {
    uniforms: Qt5([
      ve7.common,
      ve7.specularmap,
      ve7.envmap,
      ve7.aomap,
      ve7.lightmap,
      ve7.emissivemap,
      ve7.bumpmap,
      ve7.normalmap,
      ve7.displacementmap,
      ve7.fog,
      ve7.lights,
      {
        emissive: { value: new ze7(0) },
        specular: { value: new ze7(1118481) },
        shininess: { value: 30 }
      }
    ]),
    vertexShader: qe6.meshphong_vert,
    fragmentShader: qe6.meshphong_frag
  },
  standard: {
    uniforms: Qt5([
      ve7.common,
      ve7.envmap,
      ve7.aomap,
      ve7.lightmap,
      ve7.emissivemap,
      ve7.bumpmap,
      ve7.normalmap,
      ve7.displacementmap,
      ve7.roughnessmap,
      ve7.metalnessmap,
      ve7.fog,
      ve7.lights,
      {
        emissive: { value: new ze7(0) },
        roughness: { value: 1 },
        metalness: { value: 0 },
        envMapIntensity: { value: 1 }
        // temporary
      }
    ]),
    vertexShader: qe6.meshphysical_vert,
    fragmentShader: qe6.meshphysical_frag
  },
  toon: {
    uniforms: Qt5([
      ve7.common,
      ve7.aomap,
      ve7.lightmap,
      ve7.emissivemap,
      ve7.bumpmap,
      ve7.normalmap,
      ve7.displacementmap,
      ve7.gradientmap,
      ve7.fog,
      ve7.lights,
      {
        emissive: { value: new ze7(0) }
      }
    ]),
    vertexShader: qe6.meshtoon_vert,
    fragmentShader: qe6.meshtoon_frag
  },
  matcap: {
    uniforms: Qt5([
      ve7.common,
      ve7.bumpmap,
      ve7.normalmap,
      ve7.displacementmap,
      ve7.fog,
      {
        matcap: { value: null }
      }
    ]),
    vertexShader: qe6.meshmatcap_vert,
    fragmentShader: qe6.meshmatcap_frag
  },
  points: {
    uniforms: Qt5([
      ve7.points,
      ve7.fog
    ]),
    vertexShader: qe6.points_vert,
    fragmentShader: qe6.points_frag
  },
  dashed: {
    uniforms: Qt5([
      ve7.common,
      ve7.fog,
      {
        scale: { value: 1 },
        dashSize: { value: 1 },
        totalSize: { value: 2 }
      }
    ]),
    vertexShader: qe6.linedashed_vert,
    fragmentShader: qe6.linedashed_frag
  },
  depth: {
    uniforms: Qt5([
      ve7.common,
      ve7.displacementmap
    ]),
    vertexShader: qe6.depth_vert,
    fragmentShader: qe6.depth_frag
  },
  normal: {
    uniforms: Qt5([
      ve7.common,
      ve7.bumpmap,
      ve7.normalmap,
      ve7.displacementmap,
      {
        opacity: { value: 1 }
      }
    ]),
    vertexShader: qe6.meshnormal_vert,
    fragmentShader: qe6.meshnormal_frag
  },
  sprite: {
    uniforms: Qt5([
      ve7.sprite,
      ve7.fog
    ]),
    vertexShader: qe6.sprite_vert,
    fragmentShader: qe6.sprite_frag
  },
  background: {
    uniforms: {
      uvTransform: { value: new Ke5() },
      t2D: { value: null },
      backgroundIntensity: { value: 1 }
    },
    vertexShader: qe6.background_vert,
    fragmentShader: qe6.background_frag
  },
  backgroundCube: {
    uniforms: {
      envMap: { value: null },
      flipEnvMap: { value: -1 },
      backgroundBlurriness: { value: 0 },
      backgroundIntensity: { value: 1 }
    },
    vertexShader: qe6.backgroundCube_vert,
    fragmentShader: qe6.backgroundCube_frag
  },
  cube: {
    uniforms: {
      tCube: { value: null },
      tFlip: { value: -1 },
      opacity: { value: 1 }
    },
    vertexShader: qe6.cube_vert,
    fragmentShader: qe6.cube_frag
  },
  equirect: {
    uniforms: {
      tEquirect: { value: null }
    },
    vertexShader: qe6.equirect_vert,
    fragmentShader: qe6.equirect_frag
  },
  distanceRGBA: {
    uniforms: Qt5([
      ve7.common,
      ve7.displacementmap,
      {
        referencePosition: { value: new k18() },
        nearDistance: { value: 1 },
        farDistance: { value: 1e3 }
      }
    ]),
    vertexShader: qe6.distanceRGBA_vert,
    fragmentShader: qe6.distanceRGBA_frag
  },
  shadow: {
    uniforms: Qt5([
      ve7.lights,
      ve7.fog,
      {
        color: { value: new ze7(0) },
        opacity: { value: 1 }
      }
    ]),
    vertexShader: qe6.shadow_vert,
    fragmentShader: qe6.shadow_frag
  }
};
Si4.physical = {
  uniforms: Qt5([
    Si4.standard.uniforms,
    {
      clearcoat: { value: 0 },
      clearcoatMap: { value: null },
      clearcoatMapTransform: { value: new Ke5() },
      clearcoatNormalMap: { value: null },
      clearcoatNormalMapTransform: { value: new Ke5() },
      clearcoatNormalScale: { value: new We7(1, 1) },
      clearcoatRoughness: { value: 0 },
      clearcoatRoughnessMap: { value: null },
      clearcoatRoughnessMapTransform: { value: new Ke5() },
      iridescence: { value: 0 },
      iridescenceMap: { value: null },
      iridescenceMapTransform: { value: new Ke5() },
      iridescenceIOR: { value: 1.3 },
      iridescenceThicknessMinimum: { value: 100 },
      iridescenceThicknessMaximum: { value: 400 },
      iridescenceThicknessMap: { value: null },
      iridescenceThicknessMapTransform: { value: new Ke5() },
      sheen: { value: 0 },
      sheenColor: { value: new ze7(0) },
      sheenColorMap: { value: null },
      sheenColorMapTransform: { value: new Ke5() },
      sheenRoughness: { value: 1 },
      sheenRoughnessMap: { value: null },
      sheenRoughnessMapTransform: { value: new Ke5() },
      transmission: { value: 0 },
      transmissionMap: { value: null },
      transmissionMapTransform: { value: new Ke5() },
      transmissionSamplerSize: { value: new We7() },
      transmissionSamplerMap: { value: null },
      thickness: { value: 0 },
      thicknessMap: { value: null },
      thicknessMapTransform: { value: new Ke5() },
      attenuationDistance: { value: 0 },
      attenuationColor: { value: new ze7(0) },
      specularColor: { value: new ze7(1, 1, 1) },
      specularColorMap: { value: null },
      specularColorMapTransform: { value: new Ke5() },
      specularIntensity: { value: 1 },
      specularIntensityMap: { value: null },
      specularIntensityMapTransform: { value: new Ke5() }
    }
  ]),
  vertexShader: qe6.meshphysical_vert,
  fragmentShader: qe6.meshphysical_frag
};
var Ds2 = { r: 0, b: 0, g: 0 };
function _f2(s18, e11, t19, i27, r24, n33, a22) {
  const o12 = new ze7(0);
  let l25 = n33 === true ? 0 : 1, c27, h26, u35 = null, d34 = 0, m33 = null;
  function _19(f39, p26) {
    let A17 = false, M12 = p26.isScene === true ? p26.background : null;
    M12 && M12.isTexture && (M12 = (p26.backgroundBlurriness > 0 ? t19 : e11).get(M12));
    const E24 = s18.xr, w29 = E24.getSession && E24.getSession();
    w29 && w29.environmentBlendMode === "additive" && (M12 = null), M12 === null ? y33(o12, l25) : M12 && M12.isColor && (y33(M12, 1), A17 = true), (s18.autoClear || A17) && s18.clear(s18.autoClearColor, s18.autoClearDepth, s18.autoClearStencil), M12 && (M12.isCubeTexture || M12.mapping === na2) ? (h26 === void 0 && (h26 = new Rt8(
      new Lr5(1, 1, 1),
      new wr5({
        name: "BackgroundCubeMaterial",
        uniforms: Sn5(Si4.backgroundCube.uniforms),
        vertexShader: Si4.backgroundCube.vertexShader,
        fragmentShader: Si4.backgroundCube.fragmentShader,
        side: ti6,
        depthTest: false,
        depthWrite: false,
        fog: false
      })
    ), h26.geometry.deleteAttribute("normal"), h26.geometry.deleteAttribute("uv"), h26.onBeforeRender = function(I16, D17, P19) {
      this.matrixWorld.copyPosition(P19.matrixWorld);
    }, Object.defineProperty(h26.material, "envMap", {
      get: function() {
        return this.uniforms.envMap.value;
      }
    }), r24.update(h26)), h26.material.uniforms.envMap.value = M12, h26.material.uniforms.flipEnvMap.value = M12.isCubeTexture && M12.isRenderTargetTexture === false ? -1 : 1, h26.material.uniforms.backgroundBlurriness.value = p26.backgroundBlurriness, h26.material.uniforms.backgroundIntensity.value = p26.backgroundIntensity, h26.material.toneMapped = M12.encoding !== rt10, (u35 !== M12 || d34 !== M12.version || m33 !== s18.toneMapping) && (h26.material.needsUpdate = true, u35 = M12, d34 = M12.version, m33 = s18.toneMapping), h26.layers.enableAll(), f39.unshift(h26, h26.geometry, h26.material, 0, 0, null)) : M12 && M12.isTexture && (c27 === void 0 && (c27 = new Rt8(
      new oa2(2, 2),
      new wr5({
        name: "BackgroundMaterial",
        uniforms: Sn5(Si4.background.uniforms),
        vertexShader: Si4.background.vertexShader,
        fragmentShader: Si4.background.fragmentShader,
        side: Ei5,
        depthTest: false,
        depthWrite: false,
        fog: false
      })
    ), c27.geometry.deleteAttribute("normal"), Object.defineProperty(c27.material, "map", {
      get: function() {
        return this.uniforms.t2D.value;
      }
    }), r24.update(c27)), c27.material.uniforms.t2D.value = M12, c27.material.uniforms.backgroundIntensity.value = p26.backgroundIntensity, c27.material.toneMapped = M12.encoding !== rt10, M12.matrixAutoUpdate === true && M12.updateMatrix(), c27.material.uniforms.uvTransform.value.copy(M12.matrix), (u35 !== M12 || d34 !== M12.version || m33 !== s18.toneMapping) && (c27.material.needsUpdate = true, u35 = M12, d34 = M12.version, m33 = s18.toneMapping), c27.layers.enableAll(), f39.unshift(c27, c27.geometry, c27.material, 0, 0, null));
  }
  function y33(f39, p26) {
    f39.getRGB(Ds2, xh2(s18)), i27.buffers.color.setClear(Ds2.r, Ds2.g, Ds2.b, p26, a22);
  }
  return {
    getClearColor: function() {
      return o12;
    },
    setClearColor: function(f39, p26 = 1) {
      o12.set(f39), l25 = p26, y33(o12, l25);
    },
    getClearAlpha: function() {
      return l25;
    },
    setClearAlpha: function(f39) {
      l25 = f39, y33(o12, l25);
    },
    render: _19
  };
}
function vf2(s18, e11, t19, i27) {
  const r24 = s18.getParameter(34921), n33 = i27.isWebGL2 ? null : e11.get("OES_vertex_array_object"), a22 = i27.isWebGL2 || n33 !== null, o12 = {}, l25 = f39(null);
  let c27 = l25, h26 = false;
  function u35(V14, j18, W8, re8, $24) {
    let ie8 = false;
    if (a22) {
      const le7 = y33(re8, W8, j18);
      c27 !== le7 && (c27 = le7, m33(c27.object)), ie8 = p26(V14, re8, W8, $24), ie8 && A17(V14, re8, W8, $24);
    } else {
      const le7 = j18.wireframe === true;
      (c27.geometry !== re8.id || c27.program !== W8.id || c27.wireframe !== le7) && (c27.geometry = re8.id, c27.program = W8.id, c27.wireframe = le7, ie8 = true);
    }
    $24 !== null && t19.update($24, 34963), (ie8 || h26) && (h26 = false, P19(V14, j18, W8, re8), $24 !== null && s18.bindBuffer(34963, t19.get($24).buffer));
  }
  function d34() {
    return i27.isWebGL2 ? s18.createVertexArray() : n33.createVertexArrayOES();
  }
  function m33(V14) {
    return i27.isWebGL2 ? s18.bindVertexArray(V14) : n33.bindVertexArrayOES(V14);
  }
  function _19(V14) {
    return i27.isWebGL2 ? s18.deleteVertexArray(V14) : n33.deleteVertexArrayOES(V14);
  }
  function y33(V14, j18, W8) {
    const re8 = W8.wireframe === true;
    let $24 = o12[V14.id];
    $24 === void 0 && ($24 = {}, o12[V14.id] = $24);
    let ie8 = $24[j18.id];
    ie8 === void 0 && (ie8 = {}, $24[j18.id] = ie8);
    let le7 = ie8[re8];
    return le7 === void 0 && (le7 = f39(d34()), ie8[re8] = le7), le7;
  }
  function f39(V14) {
    const j18 = [], W8 = [], re8 = [];
    for (let $24 = 0; $24 < r24; $24++)
      j18[$24] = 0, W8[$24] = 0, re8[$24] = 0;
    return {
      // for backward compatibility on non-VAO support browser
      geometry: null,
      program: null,
      wireframe: false,
      newAttributes: j18,
      enabledAttributes: W8,
      attributeDivisors: re8,
      object: V14,
      attributes: {},
      index: null
    };
  }
  function p26(V14, j18, W8, re8) {
    const $24 = c27.attributes, ie8 = j18.attributes;
    let le7 = 0;
    const fe7 = W8.getAttributes();
    for (const ue8 in fe7)
      if (fe7[ue8].location >= 0) {
        const H15 = $24[ue8];
        let q13 = ie8[ue8];
        if (q13 === void 0 && (ue8 === "instanceMatrix" && V14.instanceMatrix && (q13 = V14.instanceMatrix), ue8 === "instanceColor" && V14.instanceColor && (q13 = V14.instanceColor)), H15 === void 0 || H15.attribute !== q13 || q13 && H15.data !== q13.data)
          return true;
        le7++;
      }
    return c27.attributesNum !== le7 || c27.index !== re8;
  }
  function A17(V14, j18, W8, re8) {
    const $24 = {}, ie8 = j18.attributes;
    let le7 = 0;
    const fe7 = W8.getAttributes();
    for (const ue8 in fe7)
      if (fe7[ue8].location >= 0) {
        let H15 = ie8[ue8];
        H15 === void 0 && (ue8 === "instanceMatrix" && V14.instanceMatrix && (H15 = V14.instanceMatrix), ue8 === "instanceColor" && V14.instanceColor && (H15 = V14.instanceColor));
        const q13 = {};
        q13.attribute = H15, H15 && H15.data && (q13.data = H15.data), $24[ue8] = q13, le7++;
      }
    c27.attributes = $24, c27.attributesNum = le7, c27.index = re8;
  }
  function M12() {
    const V14 = c27.newAttributes;
    for (let j18 = 0, W8 = V14.length; j18 < W8; j18++)
      V14[j18] = 0;
  }
  function E24(V14) {
    w29(V14, 0);
  }
  function w29(V14, j18) {
    const W8 = c27.newAttributes, re8 = c27.enabledAttributes, $24 = c27.attributeDivisors;
    W8[V14] = 1, re8[V14] === 0 && (s18.enableVertexAttribArray(V14), re8[V14] = 1), $24[V14] !== j18 && ((i27.isWebGL2 ? s18 : e11.get("ANGLE_instanced_arrays"))[i27.isWebGL2 ? "vertexAttribDivisor" : "vertexAttribDivisorANGLE"](V14, j18), $24[V14] = j18);
  }
  function I16() {
    const V14 = c27.newAttributes, j18 = c27.enabledAttributes;
    for (let W8 = 0, re8 = j18.length; W8 < re8; W8++)
      j18[W8] !== V14[W8] && (s18.disableVertexAttribArray(W8), j18[W8] = 0);
  }
  function D17(V14, j18, W8, re8, $24, ie8) {
    i27.isWebGL2 === true && (W8 === 5124 || W8 === 5125) ? s18.vertexAttribIPointer(V14, j18, W8, $24, ie8) : s18.vertexAttribPointer(V14, j18, W8, re8, $24, ie8);
  }
  function P19(V14, j18, W8, re8) {
    if (i27.isWebGL2 === false && (V14.isInstancedMesh || re8.isInstancedBufferGeometry) && e11.get("ANGLE_instanced_arrays") === null)
      return;
    M12();
    const $24 = re8.attributes, ie8 = W8.getAttributes(), le7 = j18.defaultAttributeValues;
    for (const fe7 in ie8) {
      const ue8 = ie8[fe7];
      if (ue8.location >= 0) {
        let H15 = $24[fe7];
        if (H15 === void 0 && (fe7 === "instanceMatrix" && V14.instanceMatrix && (H15 = V14.instanceMatrix), fe7 === "instanceColor" && V14.instanceColor && (H15 = V14.instanceColor)), H15 !== void 0) {
          const q13 = H15.normalized, oe7 = H15.itemSize, K13 = t19.get(H15);
          if (K13 === void 0)
            continue;
          const F17 = K13.buffer, ye7 = K13.type, Le7 = K13.bytesPerElement;
          if (H15.isInterleavedBufferAttribute) {
            const me9 = H15.data, De6 = me9.stride, tt10 = H15.offset;
            if (me9.isInstancedInterleavedBuffer) {
              for (let Pe6 = 0; Pe6 < ue8.locationSize; Pe6++)
                w29(ue8.location + Pe6, me9.meshPerAttribute);
              V14.isInstancedMesh !== true && re8._maxInstanceCount === void 0 && (re8._maxInstanceCount = me9.meshPerAttribute * me9.count);
            } else
              for (let Pe6 = 0; Pe6 < ue8.locationSize; Pe6++)
                E24(ue8.location + Pe6);
            s18.bindBuffer(34962, F17);
            for (let Pe6 = 0; Pe6 < ue8.locationSize; Pe6++)
              D17(
                ue8.location + Pe6,
                oe7 / ue8.locationSize,
                ye7,
                q13,
                De6 * Le7,
                (tt10 + oe7 / ue8.locationSize * Pe6) * Le7
              );
          } else {
            if (H15.isInstancedBufferAttribute) {
              for (let me9 = 0; me9 < ue8.locationSize; me9++)
                w29(ue8.location + me9, H15.meshPerAttribute);
              V14.isInstancedMesh !== true && re8._maxInstanceCount === void 0 && (re8._maxInstanceCount = H15.meshPerAttribute * H15.count);
            } else
              for (let me9 = 0; me9 < ue8.locationSize; me9++)
                E24(ue8.location + me9);
            s18.bindBuffer(34962, F17);
            for (let me9 = 0; me9 < ue8.locationSize; me9++)
              D17(
                ue8.location + me9,
                oe7 / ue8.locationSize,
                ye7,
                q13,
                oe7 * Le7,
                oe7 / ue8.locationSize * me9 * Le7
              );
          }
        } else if (le7 !== void 0) {
          const q13 = le7[fe7];
          if (q13 !== void 0)
            switch (q13.length) {
              case 2:
                s18.vertexAttrib2fv(ue8.location, q13);
                break;
              case 3:
                s18.vertexAttrib3fv(ue8.location, q13);
                break;
              case 4:
                s18.vertexAttrib4fv(ue8.location, q13);
                break;
              default:
                s18.vertexAttrib1fv(ue8.location, q13);
            }
        }
      }
    }
    I16();
  }
  function x34() {
    z19();
    for (const V14 in o12) {
      const j18 = o12[V14];
      for (const W8 in j18) {
        const re8 = j18[W8];
        for (const $24 in re8)
          _19(re8[$24].object), delete re8[$24];
        delete j18[W8];
      }
      delete o12[V14];
    }
  }
  function C19(V14) {
    if (o12[V14.id] === void 0)
      return;
    const j18 = o12[V14.id];
    for (const W8 in j18) {
      const re8 = j18[W8];
      for (const $24 in re8)
        _19(re8[$24].object), delete re8[$24];
      delete j18[W8];
    }
    delete o12[V14.id];
  }
  function G15(V14) {
    for (const j18 in o12) {
      const W8 = o12[j18];
      if (W8[V14.id] === void 0)
        continue;
      const re8 = W8[V14.id];
      for (const $24 in re8)
        _19(re8[$24].object), delete re8[$24];
      delete W8[V14.id];
    }
  }
  function z19() {
    U18(), h26 = true, c27 !== l25 && (c27 = l25, m33(c27.object));
  }
  function U18() {
    l25.geometry = null, l25.program = null, l25.wireframe = false;
  }
  return {
    setup: u35,
    reset: z19,
    resetDefaultState: U18,
    dispose: x34,
    releaseStatesOfGeometry: C19,
    releaseStatesOfProgram: G15,
    initAttributes: M12,
    enableAttribute: E24,
    disableUnusedAttributes: I16
  };
}
function yf2(s18, e11, t19, i27) {
  const r24 = i27.isWebGL2;
  let n33;
  function a22(c27) {
    n33 = c27;
  }
  function o12(c27, h26) {
    s18.drawArrays(n33, c27, h26), t19.update(h26, n33, 1);
  }
  function l25(c27, h26, u35) {
    if (u35 === 0)
      return;
    let d34, m33;
    if (r24)
      d34 = s18, m33 = "drawArraysInstanced";
    else if (d34 = e11.get("ANGLE_instanced_arrays"), m33 = "drawArraysInstancedANGLE", d34 === null) {
      console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
      return;
    }
    d34[m33](n33, c27, h26, u35), t19.update(h26, n33, u35);
  }
  this.setMode = a22, this.render = o12, this.renderInstances = l25;
}
function xf2(s18, e11, t19) {
  let i27;
  function r24() {
    if (i27 !== void 0)
      return i27;
    if (e11.has("EXT_texture_filter_anisotropic") === true) {
      const D17 = e11.get("EXT_texture_filter_anisotropic");
      i27 = s18.getParameter(D17.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
    } else
      i27 = 0;
    return i27;
  }
  function n33(D17) {
    if (D17 === "highp") {
      if (s18.getShaderPrecisionFormat(35633, 36338).precision > 0 && s18.getShaderPrecisionFormat(35632, 36338).precision > 0)
        return "highp";
      D17 = "mediump";
    }
    return D17 === "mediump" && s18.getShaderPrecisionFormat(35633, 36337).precision > 0 && s18.getShaderPrecisionFormat(35632, 36337).precision > 0 ? "mediump" : "lowp";
  }
  const a22 = typeof WebGL2RenderingContext < "u" && s18.constructor.name === "WebGL2RenderingContext";
  let o12 = t19.precision !== void 0 ? t19.precision : "highp";
  const l25 = n33(o12);
  l25 !== o12 && (console.warn("THREE.WebGLRenderer:", o12, "not supported, using", l25, "instead."), o12 = l25);
  const c27 = a22 || e11.has("WEBGL_draw_buffers"), h26 = t19.logarithmicDepthBuffer === true, u35 = s18.getParameter(34930), d34 = s18.getParameter(35660), m33 = s18.getParameter(3379), _19 = s18.getParameter(34076), y33 = s18.getParameter(34921), f39 = s18.getParameter(36347), p26 = s18.getParameter(36348), A17 = s18.getParameter(36349), M12 = d34 > 0, E24 = a22 || e11.has("OES_texture_float"), w29 = M12 && E24, I16 = a22 ? s18.getParameter(36183) : 0;
  return {
    isWebGL2: a22,
    drawBuffers: c27,
    getMaxAnisotropy: r24,
    getMaxPrecision: n33,
    precision: o12,
    logarithmicDepthBuffer: h26,
    maxTextures: u35,
    maxVertexTextures: d34,
    maxTextureSize: m33,
    maxCubemapSize: _19,
    maxAttributes: y33,
    maxVertexUniforms: f39,
    maxVaryings: p26,
    maxFragmentUniforms: A17,
    vertexTextures: M12,
    floatFragmentTextures: E24,
    floatVertexTextures: w29,
    maxSamples: I16
  };
}
function bf2(s18) {
  const e11 = this;
  let t19 = null, i27 = 0, r24 = false, n33 = false;
  const a22 = new hr5(), o12 = new Ke5(), l25 = { value: null, needsUpdate: false };
  this.uniform = l25, this.numPlanes = 0, this.numIntersection = 0, this.init = function(u35, d34) {
    const m33 = u35.length !== 0 || d34 || // enable state of previous frame - the clipping code has to
    // run another frame in order to reset the state:
    i27 !== 0 || r24;
    return r24 = d34, i27 = u35.length, m33;
  }, this.beginShadows = function() {
    n33 = true, h26(null);
  }, this.endShadows = function() {
    n33 = false;
  }, this.setGlobalState = function(u35, d34) {
    t19 = h26(u35, d34, 0);
  }, this.setState = function(u35, d34, m33) {
    const _19 = u35.clippingPlanes, y33 = u35.clipIntersection, f39 = u35.clipShadows, p26 = s18.get(u35);
    if (!r24 || _19 === null || _19.length === 0 || n33 && !f39)
      n33 ? h26(null) : c27();
    else {
      const A17 = n33 ? 0 : i27, M12 = A17 * 4;
      let E24 = p26.clippingState || null;
      l25.value = E24, E24 = h26(_19, d34, M12, m33);
      for (let w29 = 0; w29 !== M12; ++w29)
        E24[w29] = t19[w29];
      p26.clippingState = E24, this.numIntersection = y33 ? this.numPlanes : 0, this.numPlanes += A17;
    }
  };
  function c27() {
    l25.value !== t19 && (l25.value = t19, l25.needsUpdate = i27 > 0), e11.numPlanes = i27, e11.numIntersection = 0;
  }
  function h26(u35, d34, m33, _19) {
    const y33 = u35 !== null ? u35.length : 0;
    let f39 = null;
    if (y33 !== 0) {
      if (f39 = l25.value, _19 !== true || f39 === null) {
        const p26 = m33 + y33 * 4, A17 = d34.matrixWorldInverse;
        o12.getNormalMatrix(A17), (f39 === null || f39.length < p26) && (f39 = new Float32Array(p26));
        for (let M12 = 0, E24 = m33; M12 !== y33; ++M12, E24 += 4)
          a22.copy(u35[M12]).applyMatrix4(A17, o12), a22.normal.toArray(f39, E24), f39[E24 + 3] = a22.constant;
      }
      l25.value = f39, l25.needsUpdate = true;
    }
    return e11.numPlanes = y33, e11.numIntersection = 0, f39;
  }
}
function Mf2(s18) {
  let e11 = /* @__PURE__ */ new WeakMap();
  function t19(a22, o12) {
    return o12 === uo2 ? a22.mapping = yn5 : o12 === po2 && (a22.mapping = xn5), a22;
  }
  function i27(a22) {
    if (a22 && a22.isTexture && a22.isRenderTargetTexture === false) {
      const o12 = a22.mapping;
      if (o12 === uo2 || o12 === po2)
        if (e11.has(a22)) {
          const l25 = e11.get(a22).texture;
          return t19(l25, a22.mapping);
        } else {
          const l25 = a22.image;
          if (l25 && l25.height > 0) {
            const c27 = new Od2(l25.height / 2);
            return c27.fromEquirectangularTexture(s18, a22), e11.set(a22, c27), a22.addEventListener("dispose", r24), t19(c27.texture, a22.mapping);
          } else
            return null;
        }
    }
    return a22;
  }
  function r24(a22) {
    const o12 = a22.target;
    o12.removeEventListener("dispose", r24);
    const l25 = e11.get(o12);
    l25 !== void 0 && (e11.delete(o12), l25.dispose());
  }
  function n33() {
    e11 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: i27,
    dispose: n33
  };
}
var la2 = class extends bh2 {
  constructor(e11 = -1, t19 = 1, i27 = 1, r24 = -1, n33 = 0.1, a22 = 2e3) {
    super(), this.isOrthographicCamera = true, this.type = "OrthographicCamera", this.zoom = 1, this.view = null, this.left = e11, this.right = t19, this.top = i27, this.bottom = r24, this.near = n33, this.far = a22, this.updateProjectionMatrix();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.left = e11.left, this.right = e11.right, this.top = e11.top, this.bottom = e11.bottom, this.near = e11.near, this.far = e11.far, this.zoom = e11.zoom, this.view = e11.view === null ? null : Object.assign({}, e11.view), this;
  }
  setViewOffset(e11, t19, i27, r24, n33, a22) {
    this.view === null && (this.view = {
      enabled: true,
      fullWidth: 1,
      fullHeight: 1,
      offsetX: 0,
      offsetY: 0,
      width: 1,
      height: 1
    }), this.view.enabled = true, this.view.fullWidth = e11, this.view.fullHeight = t19, this.view.offsetX = i27, this.view.offsetY = r24, this.view.width = n33, this.view.height = a22, this.updateProjectionMatrix();
  }
  clearViewOffset() {
    this.view !== null && (this.view.enabled = false), this.updateProjectionMatrix();
  }
  updateProjectionMatrix() {
    const e11 = (this.right - this.left) / (2 * this.zoom), t19 = (this.top - this.bottom) / (2 * this.zoom), i27 = (this.right + this.left) / 2, r24 = (this.top + this.bottom) / 2;
    let n33 = i27 - e11, a22 = i27 + e11, o12 = r24 + t19, l25 = r24 - t19;
    if (this.view !== null && this.view.enabled) {
      const c27 = (this.right - this.left) / this.view.fullWidth / this.zoom, h26 = (this.top - this.bottom) / this.view.fullHeight / this.zoom;
      n33 += c27 * this.view.offsetX, a22 = n33 + c27 * this.view.width, o12 -= h26 * this.view.offsetY, l25 = o12 - h26 * this.view.height;
    }
    this.projectionMatrix.makeOrthographic(n33, a22, o12, l25, this.near, this.far), this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return t19.object.zoom = this.zoom, t19.object.left = this.left, t19.object.right = this.right, t19.object.top = this.top, t19.object.bottom = this.bottom, t19.object.near = this.near, t19.object.far = this.far, this.view !== null && (t19.object.view = Object.assign({}, this.view)), t19;
  }
};
var hn3 = 4;
var Yl2 = [0.125, 0.215, 0.35, 0.446, 0.526, 0.582];
var dr5 = 20;
var Xa = new la2();
var Zl2 = new ze7();
var qa2 = null;
var ur5 = (1 + Math.sqrt(5)) / 2;
var rn4 = 1 / ur5;
var Jl2 = [
  new k18(1, 1, 1),
  new k18(-1, 1, 1),
  new k18(1, 1, -1),
  new k18(-1, 1, -1),
  new k18(0, ur5, rn4),
  new k18(0, ur5, -rn4),
  new k18(rn4, 0, ur5),
  new k18(-rn4, 0, ur5),
  new k18(ur5, rn4, 0),
  new k18(-ur5, rn4, 0)
];
var Kl2 = class {
  constructor(e11) {
    this._renderer = e11, this._pingPongRenderTarget = null, this._lodMax = 0, this._cubeSize = 0, this._lodPlanes = [], this._sizeLods = [], this._sigmas = [], this._blurMaterial = null, this._cubemapMaterial = null, this._equirectMaterial = null, this._compileMaterial(this._blurMaterial);
  }
  /**
   * Generates a PMREM from a supplied Scene, which can be faster than using an
   * image if networking bandwidth is low. Optional sigma specifies a blur radius
   * in radians to be applied to the scene before PMREM generation. Optional near
   * and far planes ensure the scene is rendered in its entirety (the cubeCamera
   * is placed at the origin).
   */
  fromScene(e11, t19 = 0, i27 = 0.1, r24 = 100) {
    qa2 = this._renderer.getRenderTarget(), this._setSize(256);
    const n33 = this._allocateTargets();
    return n33.depthBuffer = true, this._sceneToCubeUV(e11, i27, r24, n33), t19 > 0 && this._blur(n33, 0, 0, t19), this._applyPMREM(n33), this._cleanup(n33), n33;
  }
  /**
   * Generates a PMREM from an equirectangular texture, which can be either LDR
   * or HDR. The ideal input image size is 1k (1024 x 512),
   * as this matches best with the 256 x 256 cubemap output.
   */
  fromEquirectangular(e11, t19 = null) {
    return this._fromTexture(e11, t19);
  }
  /**
   * Generates a PMREM from an cubemap texture, which can be either LDR
   * or HDR. The ideal input cube size is 256 x 256,
   * as this matches best with the 256 x 256 cubemap output.
   */
  fromCubemap(e11, t19 = null) {
    return this._fromTexture(e11, t19);
  }
  /**
   * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during
   * your texture's network fetch for increased concurrency.
   */
  compileCubemapShader() {
    this._cubemapMaterial === null && (this._cubemapMaterial = ec2(), this._compileMaterial(this._cubemapMaterial));
  }
  /**
   * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during
   * your texture's network fetch for increased concurrency.
   */
  compileEquirectangularShader() {
    this._equirectMaterial === null && (this._equirectMaterial = Ql2(), this._compileMaterial(this._equirectMaterial));
  }
  /**
   * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,
   * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on
   * one of them will cause any others to also become unusable.
   */
  dispose() {
    this._dispose(), this._cubemapMaterial !== null && this._cubemapMaterial.dispose(), this._equirectMaterial !== null && this._equirectMaterial.dispose();
  }
  // private interface
  _setSize(e11) {
    this._lodMax = Math.floor(Math.log2(e11)), this._cubeSize = Math.pow(2, this._lodMax);
  }
  _dispose() {
    this._blurMaterial !== null && this._blurMaterial.dispose(), this._pingPongRenderTarget !== null && this._pingPongRenderTarget.dispose();
    for (let e11 = 0; e11 < this._lodPlanes.length; e11++)
      this._lodPlanes[e11].dispose();
  }
  _cleanup(e11) {
    this._renderer.setRenderTarget(qa2), e11.scissorTest = false, ks2(e11, 0, 0, e11.width, e11.height);
  }
  _fromTexture(e11, t19) {
    e11.mapping === yn5 || e11.mapping === xn5 ? this._setSize(e11.image.length === 0 ? 16 : e11.image[0].width || e11.image[0].image.width) : this._setSize(e11.image.width / 4), qa2 = this._renderer.getRenderTarget();
    const i27 = t19 || this._allocateTargets();
    return this._textureToCubeUV(e11, i27), this._applyPMREM(i27), this._cleanup(i27), i27;
  }
  _allocateTargets() {
    const e11 = 3 * Math.max(this._cubeSize, 112), t19 = 4 * this._cubeSize, i27 = {
      magFilter: Vt6,
      minFilter: Vt6,
      generateMipmaps: false,
      type: $n5,
      format: di6,
      encoding: br5,
      depthBuffer: false
    }, r24 = $l2(e11, t19, i27);
    if (this._pingPongRenderTarget === null || this._pingPongRenderTarget.width !== e11 || this._pingPongRenderTarget.height !== t19) {
      this._pingPongRenderTarget !== null && this._dispose(), this._pingPongRenderTarget = $l2(e11, t19, i27);
      const { _lodMax: n33 } = this;
      ({ sizeLods: this._sizeLods, lodPlanes: this._lodPlanes, sigmas: this._sigmas } = wf2(n33)), this._blurMaterial = Sf2(n33, e11, t19);
    }
    return r24;
  }
  _compileMaterial(e11) {
    const t19 = new Rt8(this._lodPlanes[0], e11);
    this._renderer.compile(t19, Xa);
  }
  _sceneToCubeUV(e11, t19, i27, r24) {
    const n33 = new Bt6(90, 1, t19, i27), a22 = [1, -1, 1, 1, 1, 1], o12 = [1, 1, 1, -1, -1, -1], l25 = this._renderer, c27 = l25.autoClear, h26 = l25.toneMapping;
    l25.getClearColor(Zl2), l25.toneMapping = Fi4, l25.autoClear = false;
    const u35 = new xi6({
      name: "PMREM.Background",
      side: ti6,
      depthWrite: false,
      depthTest: false
    }), d34 = new Rt8(new Lr5(), u35);
    let m33 = false;
    const _19 = e11.background;
    _19 ? _19.isColor && (u35.color.copy(_19), e11.background = null, m33 = true) : (u35.color.copy(Zl2), m33 = true);
    for (let y33 = 0; y33 < 6; y33++) {
      const f39 = y33 % 3;
      f39 === 0 ? (n33.up.set(0, a22[y33], 0), n33.lookAt(o12[y33], 0, 0)) : f39 === 1 ? (n33.up.set(0, 0, a22[y33]), n33.lookAt(0, o12[y33], 0)) : (n33.up.set(0, a22[y33], 0), n33.lookAt(0, 0, o12[y33]));
      const p26 = this._cubeSize;
      ks2(r24, f39 * p26, y33 > 2 ? p26 : 0, p26, p26), l25.setRenderTarget(r24), m33 && l25.render(d34, n33), l25.render(e11, n33);
    }
    d34.geometry.dispose(), d34.material.dispose(), l25.toneMapping = h26, l25.autoClear = c27, e11.background = _19;
  }
  _textureToCubeUV(e11, t19) {
    const i27 = this._renderer, r24 = e11.mapping === yn5 || e11.mapping === xn5;
    r24 ? (this._cubemapMaterial === null && (this._cubemapMaterial = ec2()), this._cubemapMaterial.uniforms.flipEnvMap.value = e11.isRenderTargetTexture === false ? -1 : 1) : this._equirectMaterial === null && (this._equirectMaterial = Ql2());
    const n33 = r24 ? this._cubemapMaterial : this._equirectMaterial, a22 = new Rt8(this._lodPlanes[0], n33), o12 = n33.uniforms;
    o12.envMap.value = e11;
    const l25 = this._cubeSize;
    ks2(t19, 0, 0, 3 * l25, 2 * l25), i27.setRenderTarget(t19), i27.render(a22, Xa);
  }
  _applyPMREM(e11) {
    const t19 = this._renderer, i27 = t19.autoClear;
    t19.autoClear = false;
    for (let r24 = 1; r24 < this._lodPlanes.length; r24++) {
      const n33 = Math.sqrt(this._sigmas[r24] * this._sigmas[r24] - this._sigmas[r24 - 1] * this._sigmas[r24 - 1]), a22 = Jl2[(r24 - 1) % Jl2.length];
      this._blur(e11, r24 - 1, r24, n33, a22);
    }
    t19.autoClear = i27;
  }
  /**
   * This is a two-pass Gaussian blur for a cubemap. Normally this is done
   * vertically and horizontally, but this breaks down on a cube. Here we apply
   * the blur latitudinally (around the poles), and then longitudinally (towards
   * the poles) to approximate the orthogonally-separable blur. It is least
   * accurate at the poles, but still does a decent job.
   */
  _blur(e11, t19, i27, r24, n33) {
    const a22 = this._pingPongRenderTarget;
    this._halfBlur(
      e11,
      a22,
      t19,
      i27,
      r24,
      "latitudinal",
      n33
    ), this._halfBlur(
      a22,
      e11,
      i27,
      i27,
      r24,
      "longitudinal",
      n33
    );
  }
  _halfBlur(e11, t19, i27, r24, n33, a22, o12) {
    const l25 = this._renderer, c27 = this._blurMaterial;
    a22 !== "latitudinal" && a22 !== "longitudinal" && console.error(
      "blur direction must be either latitudinal or longitudinal!"
    );
    const h26 = 3, u35 = new Rt8(this._lodPlanes[r24], c27), d34 = c27.uniforms, m33 = this._sizeLods[i27] - 1, _19 = isFinite(n33) ? Math.PI / (2 * m33) : 2 * Math.PI / (2 * dr5 - 1), y33 = n33 / _19, f39 = isFinite(n33) ? 1 + Math.floor(h26 * y33) : dr5;
    f39 > dr5 && console.warn(`sigmaRadians, ${n33}, is too large and will clip, as it requested ${f39} samples when the maximum is set to ${dr5}`);
    const p26 = [];
    let A17 = 0;
    for (let D17 = 0; D17 < dr5; ++D17) {
      const P19 = D17 / y33, x34 = Math.exp(-P19 * P19 / 2);
      p26.push(x34), D17 === 0 ? A17 += x34 : D17 < f39 && (A17 += 2 * x34);
    }
    for (let D17 = 0; D17 < p26.length; D17++)
      p26[D17] = p26[D17] / A17;
    d34.envMap.value = e11.texture, d34.samples.value = f39, d34.weights.value = p26, d34.latitudinal.value = a22 === "latitudinal", o12 && (d34.poleAxis.value = o12);
    const { _lodMax: M12 } = this;
    d34.dTheta.value = _19, d34.mipInt.value = M12 - i27;
    const E24 = this._sizeLods[r24], w29 = 3 * E24 * (r24 > M12 - hn3 ? r24 - M12 + hn3 : 0), I16 = 4 * (this._cubeSize - E24);
    ks2(t19, w29, I16, 3 * E24, 2 * E24), l25.setRenderTarget(t19), l25.render(u35, Xa);
  }
};
function wf2(s18) {
  const e11 = [], t19 = [], i27 = [];
  let r24 = s18;
  const n33 = s18 - hn3 + 1 + Yl2.length;
  for (let a22 = 0; a22 < n33; a22++) {
    const o12 = Math.pow(2, r24);
    t19.push(o12);
    let l25 = 1 / o12;
    a22 > s18 - hn3 ? l25 = Yl2[a22 - s18 + hn3 - 1] : a22 === 0 && (l25 = 0), i27.push(l25);
    const c27 = 1 / (o12 - 2), h26 = -c27, u35 = 1 + c27, d34 = [h26, h26, u35, h26, u35, u35, h26, h26, u35, u35, h26, u35], m33 = 6, _19 = 6, y33 = 3, f39 = 2, p26 = 1, A17 = new Float32Array(y33 * _19 * m33), M12 = new Float32Array(f39 * _19 * m33), E24 = new Float32Array(p26 * _19 * m33);
    for (let I16 = 0; I16 < m33; I16++) {
      const D17 = I16 % 3 * 2 / 3 - 1, P19 = I16 > 2 ? 0 : -1, x34 = [
        D17,
        P19,
        0,
        D17 + 2 / 3,
        P19,
        0,
        D17 + 2 / 3,
        P19 + 1,
        0,
        D17,
        P19,
        0,
        D17 + 2 / 3,
        P19 + 1,
        0,
        D17,
        P19 + 1,
        0
      ];
      A17.set(x34, y33 * _19 * I16), M12.set(d34, f39 * _19 * I16);
      const C19 = [I16, I16, I16, I16, I16, I16];
      E24.set(C19, p26 * _19 * I16);
    }
    const w29 = new Xt6();
    w29.setAttribute("position", new Ft6(A17, y33)), w29.setAttribute("uv", new Ft6(M12, f39)), w29.setAttribute("faceIndex", new Ft6(E24, p26)), e11.push(w29), r24 > hn3 && r24--;
  }
  return { lodPlanes: e11, sizeLods: t19, sigmas: i27 };
}
function $l2(s18, e11, t19) {
  const i27 = new Mr5(s18, e11, t19);
  return i27.texture.mapping = na2, i27.texture.name = "PMREM.cubeUv", i27.scissorTest = true, i27;
}
function ks2(s18, e11, t19, i27, r24) {
  s18.viewport.set(e11, t19, i27, r24), s18.scissor.set(e11, t19, i27, r24);
}
function Sf2(s18, e11, t19) {
  const i27 = new Float32Array(dr5), r24 = new k18(0, 1, 0);
  return new wr5({
    name: "SphericalGaussianBlur",
    defines: {
      n: dr5,
      CUBEUV_TEXEL_WIDTH: 1 / e11,
      CUBEUV_TEXEL_HEIGHT: 1 / t19,
      CUBEUV_MAX_MIP: `${s18}.0`
    },
    uniforms: {
      envMap: { value: null },
      samples: { value: 1 },
      weights: { value: i27 },
      latitudinal: { value: false },
      dTheta: { value: 0 },
      mipInt: { value: 0 },
      poleAxis: { value: r24 }
    },
    vertexShader: Io2(),
    fragmentShader: (
      /* glsl */
      `

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`
    ),
    blending: tr5,
    depthTest: false,
    depthWrite: false
  });
}
function Ql2() {
  return new wr5({
    name: "EquirectangularToCubeUV",
    uniforms: {
      envMap: { value: null }
    },
    vertexShader: Io2(),
    fragmentShader: (
      /* glsl */
      `

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`
    ),
    blending: tr5,
    depthTest: false,
    depthWrite: false
  });
}
function ec2() {
  return new wr5({
    name: "CubemapToCubeUV",
    uniforms: {
      envMap: { value: null },
      flipEnvMap: { value: -1 }
    },
    vertexShader: Io2(),
    fragmentShader: (
      /* glsl */
      `

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`
    ),
    blending: tr5,
    depthTest: false,
    depthWrite: false
  });
}
function Io2() {
  return (
    /* glsl */
    `

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`
  );
}
function Tf2(s18) {
  let e11 = /* @__PURE__ */ new WeakMap(), t19 = null;
  function i27(o12) {
    if (o12 && o12.isTexture) {
      const l25 = o12.mapping, c27 = l25 === uo2 || l25 === po2, h26 = l25 === yn5 || l25 === xn5;
      if (c27 || h26)
        if (o12.isRenderTargetTexture && o12.needsPMREMUpdate === true) {
          o12.needsPMREMUpdate = false;
          let u35 = e11.get(o12);
          return t19 === null && (t19 = new Kl2(s18)), u35 = c27 ? t19.fromEquirectangular(o12, u35) : t19.fromCubemap(o12, u35), e11.set(o12, u35), u35.texture;
        } else {
          if (e11.has(o12))
            return e11.get(o12).texture;
          {
            const u35 = o12.image;
            if (c27 && u35 && u35.height > 0 || h26 && u35 && r24(u35)) {
              t19 === null && (t19 = new Kl2(s18));
              const d34 = c27 ? t19.fromEquirectangular(o12) : t19.fromCubemap(o12);
              return e11.set(o12, d34), o12.addEventListener("dispose", n33), d34.texture;
            } else
              return null;
          }
        }
    }
    return o12;
  }
  function r24(o12) {
    let l25 = 0;
    const c27 = 6;
    for (let h26 = 0; h26 < c27; h26++)
      o12[h26] !== void 0 && l25++;
    return l25 === c27;
  }
  function n33(o12) {
    const l25 = o12.target;
    l25.removeEventListener("dispose", n33);
    const c27 = e11.get(l25);
    c27 !== void 0 && (e11.delete(l25), c27.dispose());
  }
  function a22() {
    e11 = /* @__PURE__ */ new WeakMap(), t19 !== null && (t19.dispose(), t19 = null);
  }
  return {
    get: i27,
    dispose: a22
  };
}
function Ef2(s18) {
  const e11 = {};
  function t19(i27) {
    if (e11[i27] !== void 0)
      return e11[i27];
    let r24;
    switch (i27) {
      case "WEBGL_depth_texture":
        r24 = s18.getExtension("WEBGL_depth_texture") || s18.getExtension("MOZ_WEBGL_depth_texture") || s18.getExtension("WEBKIT_WEBGL_depth_texture");
        break;
      case "EXT_texture_filter_anisotropic":
        r24 = s18.getExtension("EXT_texture_filter_anisotropic") || s18.getExtension("MOZ_EXT_texture_filter_anisotropic") || s18.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
        break;
      case "WEBGL_compressed_texture_s3tc":
        r24 = s18.getExtension("WEBGL_compressed_texture_s3tc") || s18.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || s18.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
        break;
      case "WEBGL_compressed_texture_pvrtc":
        r24 = s18.getExtension("WEBGL_compressed_texture_pvrtc") || s18.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
        break;
      default:
        r24 = s18.getExtension(i27);
    }
    return e11[i27] = r24, r24;
  }
  return {
    has: function(i27) {
      return t19(i27) !== null;
    },
    init: function(i27) {
      i27.isWebGL2 ? t19("EXT_color_buffer_float") : (t19("WEBGL_depth_texture"), t19("OES_texture_float"), t19("OES_texture_half_float"), t19("OES_texture_half_float_linear"), t19("OES_standard_derivatives"), t19("OES_element_index_uint"), t19("OES_vertex_array_object"), t19("ANGLE_instanced_arrays")), t19("OES_texture_float_linear"), t19("EXT_color_buffer_half_float"), t19("WEBGL_multisampled_render_to_texture");
    },
    get: function(i27) {
      const r24 = t19(i27);
      return r24 === null && console.warn("THREE.WebGLRenderer: " + i27 + " extension not supported."), r24;
    }
  };
}
function Af2(s18, e11, t19, i27) {
  const r24 = {}, n33 = /* @__PURE__ */ new WeakMap();
  function a22(u35) {
    const d34 = u35.target;
    d34.index !== null && e11.remove(d34.index);
    for (const _19 in d34.attributes)
      e11.remove(d34.attributes[_19]);
    d34.removeEventListener("dispose", a22), delete r24[d34.id];
    const m33 = n33.get(d34);
    m33 && (e11.remove(m33), n33.delete(d34)), i27.releaseStatesOfGeometry(d34), d34.isInstancedBufferGeometry === true && delete d34._maxInstanceCount, t19.memory.geometries--;
  }
  function o12(u35, d34) {
    return r24[d34.id] === true || (d34.addEventListener("dispose", a22), r24[d34.id] = true, t19.memory.geometries++), d34;
  }
  function l25(u35) {
    const d34 = u35.attributes;
    for (const _19 in d34)
      e11.update(d34[_19], 34962);
    const m33 = u35.morphAttributes;
    for (const _19 in m33) {
      const y33 = m33[_19];
      for (let f39 = 0, p26 = y33.length; f39 < p26; f39++)
        e11.update(y33[f39], 34962);
    }
  }
  function c27(u35) {
    const d34 = [], m33 = u35.index, _19 = u35.attributes.position;
    let y33 = 0;
    if (m33 !== null) {
      const A17 = m33.array;
      y33 = m33.version;
      for (let M12 = 0, E24 = A17.length; M12 < E24; M12 += 3) {
        const w29 = A17[M12 + 0], I16 = A17[M12 + 1], D17 = A17[M12 + 2];
        d34.push(w29, I16, I16, D17, D17, w29);
      }
    } else {
      const A17 = _19.array;
      y33 = _19.version;
      for (let M12 = 0, E24 = A17.length / 3 - 1; M12 < E24; M12 += 3) {
        const w29 = M12 + 0, I16 = M12 + 1, D17 = M12 + 2;
        d34.push(w29, I16, I16, D17, D17, w29);
      }
    }
    const f39 = new (dh2(d34) ? yh2 : vh2)(d34, 1);
    f39.version = y33;
    const p26 = n33.get(u35);
    p26 && e11.remove(p26), n33.set(u35, f39);
  }
  function h26(u35) {
    const d34 = n33.get(u35);
    if (d34) {
      const m33 = u35.index;
      m33 !== null && d34.version < m33.version && c27(u35);
    } else
      c27(u35);
    return n33.get(u35);
  }
  return {
    get: o12,
    update: l25,
    getWireframeAttribute: h26
  };
}
function Lf2(s18, e11, t19, i27) {
  const r24 = i27.isWebGL2;
  let n33;
  function a22(d34) {
    n33 = d34;
  }
  let o12, l25;
  function c27(d34) {
    o12 = d34.type, l25 = d34.bytesPerElement;
  }
  function h26(d34, m33) {
    s18.drawElements(n33, m33, o12, d34 * l25), t19.update(m33, n33, 1);
  }
  function u35(d34, m33, _19) {
    if (_19 === 0)
      return;
    let y33, f39;
    if (r24)
      y33 = s18, f39 = "drawElementsInstanced";
    else if (y33 = e11.get("ANGLE_instanced_arrays"), f39 = "drawElementsInstancedANGLE", y33 === null) {
      console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
      return;
    }
    y33[f39](n33, m33, o12, d34 * l25, _19), t19.update(m33, n33, _19);
  }
  this.setMode = a22, this.setIndex = c27, this.render = h26, this.renderInstances = u35;
}
function Cf2(s18) {
  const e11 = {
    geometries: 0,
    textures: 0
  }, t19 = {
    frame: 0,
    calls: 0,
    triangles: 0,
    points: 0,
    lines: 0
  };
  function i27(n33, a22, o12) {
    switch (t19.calls++, a22) {
      case 4:
        t19.triangles += o12 * (n33 / 3);
        break;
      case 1:
        t19.lines += o12 * (n33 / 2);
        break;
      case 3:
        t19.lines += o12 * (n33 - 1);
        break;
      case 2:
        t19.lines += o12 * n33;
        break;
      case 0:
        t19.points += o12 * n33;
        break;
      default:
        console.error("THREE.WebGLInfo: Unknown draw mode:", a22);
        break;
    }
  }
  function r24() {
    t19.frame++, t19.calls = 0, t19.triangles = 0, t19.points = 0, t19.lines = 0;
  }
  return {
    memory: e11,
    render: t19,
    programs: null,
    autoReset: true,
    reset: r24,
    update: i27
  };
}
function Rf2(s18, e11) {
  return s18[0] - e11[0];
}
function Nf2(s18, e11) {
  return Math.abs(e11[1]) - Math.abs(s18[1]);
}
function Pf2(s18, e11, t19) {
  const i27 = {}, r24 = new Float32Array(8), n33 = /* @__PURE__ */ new WeakMap(), a22 = new gt11(), o12 = [];
  for (let c27 = 0; c27 < 8; c27++)
    o12[c27] = [c27, 0];
  function l25(c27, h26, u35) {
    const d34 = c27.morphTargetInfluences;
    if (e11.isWebGL2 === true) {
      const m33 = h26.morphAttributes.position || h26.morphAttributes.normal || h26.morphAttributes.color, _19 = m33 !== void 0 ? m33.length : 0;
      let y33 = n33.get(h26);
      if (y33 === void 0 || y33.count !== _19) {
        let A17 = function() {
          U18.dispose(), n33.delete(h26), h26.removeEventListener("dispose", A17);
        };
        y33 !== void 0 && y33.texture.dispose();
        const M12 = h26.morphAttributes.position !== void 0, E24 = h26.morphAttributes.normal !== void 0, w29 = h26.morphAttributes.color !== void 0, I16 = h26.morphAttributes.position || [], D17 = h26.morphAttributes.normal || [], P19 = h26.morphAttributes.color || [];
        let x34 = 0;
        M12 === true && (x34 = 1), E24 === true && (x34 = 2), w29 === true && (x34 = 3);
        let C19 = h26.attributes.position.count * x34, G15 = 1;
        C19 > e11.maxTextureSize && (G15 = Math.ceil(C19 / e11.maxTextureSize), C19 = e11.maxTextureSize);
        const z19 = new Float32Array(C19 * G15 * 4 * _19), U18 = new fh2(z19, C19, G15, _19);
        U18.type = er5, U18.needsUpdate = true;
        const V14 = x34 * 4;
        for (let j18 = 0; j18 < _19; j18++) {
          const W8 = I16[j18], re8 = D17[j18], $24 = P19[j18], ie8 = C19 * G15 * 4 * j18;
          for (let le7 = 0; le7 < W8.count; le7++) {
            const fe7 = le7 * V14;
            M12 === true && (a22.fromBufferAttribute(W8, le7), z19[ie8 + fe7 + 0] = a22.x, z19[ie8 + fe7 + 1] = a22.y, z19[ie8 + fe7 + 2] = a22.z, z19[ie8 + fe7 + 3] = 0), E24 === true && (a22.fromBufferAttribute(re8, le7), z19[ie8 + fe7 + 4] = a22.x, z19[ie8 + fe7 + 5] = a22.y, z19[ie8 + fe7 + 6] = a22.z, z19[ie8 + fe7 + 7] = 0), w29 === true && (a22.fromBufferAttribute($24, le7), z19[ie8 + fe7 + 8] = a22.x, z19[ie8 + fe7 + 9] = a22.y, z19[ie8 + fe7 + 10] = a22.z, z19[ie8 + fe7 + 11] = $24.itemSize === 4 ? a22.w : 1);
          }
        }
        y33 = {
          count: _19,
          texture: U18,
          size: new We7(C19, G15)
        }, n33.set(h26, y33), h26.addEventListener("dispose", A17);
      }
      let f39 = 0;
      for (let A17 = 0; A17 < d34.length; A17++)
        f39 += d34[A17];
      const p26 = h26.morphTargetsRelative ? 1 : 1 - f39;
      u35.getUniforms().setValue(s18, "morphTargetBaseInfluence", p26), u35.getUniforms().setValue(s18, "morphTargetInfluences", d34), u35.getUniforms().setValue(s18, "morphTargetsTexture", y33.texture, t19), u35.getUniforms().setValue(s18, "morphTargetsTextureSize", y33.size);
    } else {
      const m33 = d34 === void 0 ? 0 : d34.length;
      let _19 = i27[h26.id];
      if (_19 === void 0 || _19.length !== m33) {
        _19 = [];
        for (let M12 = 0; M12 < m33; M12++)
          _19[M12] = [M12, 0];
        i27[h26.id] = _19;
      }
      for (let M12 = 0; M12 < m33; M12++) {
        const E24 = _19[M12];
        E24[0] = M12, E24[1] = d34[M12];
      }
      _19.sort(Nf2);
      for (let M12 = 0; M12 < 8; M12++)
        M12 < m33 && _19[M12][1] ? (o12[M12][0] = _19[M12][0], o12[M12][1] = _19[M12][1]) : (o12[M12][0] = Number.MAX_SAFE_INTEGER, o12[M12][1] = 0);
      o12.sort(Rf2);
      const y33 = h26.morphAttributes.position, f39 = h26.morphAttributes.normal;
      let p26 = 0;
      for (let M12 = 0; M12 < 8; M12++) {
        const E24 = o12[M12], w29 = E24[0], I16 = E24[1];
        w29 !== Number.MAX_SAFE_INTEGER && I16 ? (y33 && h26.getAttribute("morphTarget" + M12) !== y33[w29] && h26.setAttribute("morphTarget" + M12, y33[w29]), f39 && h26.getAttribute("morphNormal" + M12) !== f39[w29] && h26.setAttribute("morphNormal" + M12, f39[w29]), r24[M12] = I16, p26 += I16) : (y33 && h26.hasAttribute("morphTarget" + M12) === true && h26.deleteAttribute("morphTarget" + M12), f39 && h26.hasAttribute("morphNormal" + M12) === true && h26.deleteAttribute("morphNormal" + M12), r24[M12] = 0);
      }
      const A17 = h26.morphTargetsRelative ? 1 : 1 - p26;
      u35.getUniforms().setValue(s18, "morphTargetBaseInfluence", A17), u35.getUniforms().setValue(s18, "morphTargetInfluences", r24);
    }
  }
  return {
    update: l25
  };
}
function If2(s18, e11, t19, i27) {
  let r24 = /* @__PURE__ */ new WeakMap();
  function n33(l25) {
    const c27 = i27.render.frame, h26 = l25.geometry, u35 = e11.get(l25, h26);
    return r24.get(u35) !== c27 && (e11.update(u35), r24.set(u35, c27)), l25.isInstancedMesh && (l25.hasEventListener("dispose", o12) === false && l25.addEventListener("dispose", o12), t19.update(l25.instanceMatrix, 34962), l25.instanceColor !== null && t19.update(l25.instanceColor, 34962)), u35;
  }
  function a22() {
    r24 = /* @__PURE__ */ new WeakMap();
  }
  function o12(l25) {
    const c27 = l25.target;
    c27.removeEventListener("dispose", o12), t19.remove(c27.instanceMatrix), c27.instanceColor !== null && t19.remove(c27.instanceColor);
  }
  return {
    update: n33,
    dispose: a22
  };
}
var Sh2 = new Wt7();
var Th2 = new fh2();
var Eh2 = new bd2();
var Ah2 = new Mh2();
var tc2 = [];
var ic2 = [];
var rc2 = new Float32Array(16);
var nc2 = new Float32Array(9);
var sc2 = new Float32Array(4);
function Rn5(s18, e11, t19) {
  const i27 = s18[0];
  if (i27 <= 0 || i27 > 0)
    return s18;
  const r24 = e11 * t19;
  let n33 = tc2[r24];
  if (n33 === void 0 && (n33 = new Float32Array(r24), tc2[r24] = n33), e11 !== 0) {
    i27.toArray(n33, 0);
    for (let a22 = 1, o12 = 0; a22 !== e11; ++a22)
      o12 += t19, s18[a22].toArray(n33, o12);
  }
  return n33;
}
function It5(s18, e11) {
  if (s18.length !== e11.length)
    return false;
  for (let t19 = 0, i27 = s18.length; t19 < i27; t19++)
    if (s18[t19] !== e11[t19])
      return false;
  return true;
}
function Dt4(s18, e11) {
  for (let t19 = 0, i27 = e11.length; t19 < i27; t19++)
    s18[t19] = e11[t19];
}
function ca2(s18, e11) {
  let t19 = ic2[e11];
  t19 === void 0 && (t19 = new Int32Array(e11), ic2[e11] = t19);
  for (let i27 = 0; i27 !== e11; ++i27)
    t19[i27] = s18.allocateTextureUnit();
  return t19;
}
function Df2(s18, e11) {
  const t19 = this.cache;
  t19[0] !== e11 && (s18.uniform1f(this.addr, e11), t19[0] = e11);
}
function kf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y) && (s18.uniform2f(this.addr, e11.x, e11.y), t19[0] = e11.x, t19[1] = e11.y);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform2fv(this.addr, e11), Dt4(t19, e11);
  }
}
function Uf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z) && (s18.uniform3f(this.addr, e11.x, e11.y, e11.z), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z);
  else if (e11.r !== void 0)
    (t19[0] !== e11.r || t19[1] !== e11.g || t19[2] !== e11.b) && (s18.uniform3f(this.addr, e11.r, e11.g, e11.b), t19[0] = e11.r, t19[1] = e11.g, t19[2] = e11.b);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform3fv(this.addr, e11), Dt4(t19, e11);
  }
}
function Of2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z || t19[3] !== e11.w) && (s18.uniform4f(this.addr, e11.x, e11.y, e11.z, e11.w), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z, t19[3] = e11.w);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform4fv(this.addr, e11), Dt4(t19, e11);
  }
}
function zf2(s18, e11) {
  const t19 = this.cache, i27 = e11.elements;
  if (i27 === void 0) {
    if (It5(t19, e11))
      return;
    s18.uniformMatrix2fv(this.addr, false, e11), Dt4(t19, e11);
  } else {
    if (It5(t19, i27))
      return;
    sc2.set(i27), s18.uniformMatrix2fv(this.addr, false, sc2), Dt4(t19, i27);
  }
}
function Bf2(s18, e11) {
  const t19 = this.cache, i27 = e11.elements;
  if (i27 === void 0) {
    if (It5(t19, e11))
      return;
    s18.uniformMatrix3fv(this.addr, false, e11), Dt4(t19, e11);
  } else {
    if (It5(t19, i27))
      return;
    nc2.set(i27), s18.uniformMatrix3fv(this.addr, false, nc2), Dt4(t19, i27);
  }
}
function Ff2(s18, e11) {
  const t19 = this.cache, i27 = e11.elements;
  if (i27 === void 0) {
    if (It5(t19, e11))
      return;
    s18.uniformMatrix4fv(this.addr, false, e11), Dt4(t19, e11);
  } else {
    if (It5(t19, i27))
      return;
    rc2.set(i27), s18.uniformMatrix4fv(this.addr, false, rc2), Dt4(t19, i27);
  }
}
function Hf2(s18, e11) {
  const t19 = this.cache;
  t19[0] !== e11 && (s18.uniform1i(this.addr, e11), t19[0] = e11);
}
function Vf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y) && (s18.uniform2i(this.addr, e11.x, e11.y), t19[0] = e11.x, t19[1] = e11.y);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform2iv(this.addr, e11), Dt4(t19, e11);
  }
}
function Gf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z) && (s18.uniform3i(this.addr, e11.x, e11.y, e11.z), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform3iv(this.addr, e11), Dt4(t19, e11);
  }
}
function Wf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z || t19[3] !== e11.w) && (s18.uniform4i(this.addr, e11.x, e11.y, e11.z, e11.w), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z, t19[3] = e11.w);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform4iv(this.addr, e11), Dt4(t19, e11);
  }
}
function jf2(s18, e11) {
  const t19 = this.cache;
  t19[0] !== e11 && (s18.uniform1ui(this.addr, e11), t19[0] = e11);
}
function Xf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y) && (s18.uniform2ui(this.addr, e11.x, e11.y), t19[0] = e11.x, t19[1] = e11.y);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform2uiv(this.addr, e11), Dt4(t19, e11);
  }
}
function qf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z) && (s18.uniform3ui(this.addr, e11.x, e11.y, e11.z), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform3uiv(this.addr, e11), Dt4(t19, e11);
  }
}
function Yf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z || t19[3] !== e11.w) && (s18.uniform4ui(this.addr, e11.x, e11.y, e11.z, e11.w), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z, t19[3] = e11.w);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform4uiv(this.addr, e11), Dt4(t19, e11);
  }
}
function Zf2(s18, e11, t19) {
  const i27 = this.cache, r24 = t19.allocateTextureUnit();
  i27[0] !== r24 && (s18.uniform1i(this.addr, r24), i27[0] = r24), t19.setTexture2D(e11 || Sh2, r24);
}
function Jf2(s18, e11, t19) {
  const i27 = this.cache, r24 = t19.allocateTextureUnit();
  i27[0] !== r24 && (s18.uniform1i(this.addr, r24), i27[0] = r24), t19.setTexture3D(e11 || Eh2, r24);
}
function Kf2(s18, e11, t19) {
  const i27 = this.cache, r24 = t19.allocateTextureUnit();
  i27[0] !== r24 && (s18.uniform1i(this.addr, r24), i27[0] = r24), t19.setTextureCube(e11 || Ah2, r24);
}
function $f2(s18, e11, t19) {
  const i27 = this.cache, r24 = t19.allocateTextureUnit();
  i27[0] !== r24 && (s18.uniform1i(this.addr, r24), i27[0] = r24), t19.setTexture2DArray(e11 || Th2, r24);
}
function Qf2(s18) {
  switch (s18) {
    case 5126:
      return Df2;
    case 35664:
      return kf2;
    case 35665:
      return Uf2;
    case 35666:
      return Of2;
    case 35674:
      return zf2;
    case 35675:
      return Bf2;
    case 35676:
      return Ff2;
    case 5124:
    case 35670:
      return Hf2;
    case 35667:
    case 35671:
      return Vf2;
    case 35668:
    case 35672:
      return Gf2;
    case 35669:
    case 35673:
      return Wf2;
    case 5125:
      return jf2;
    case 36294:
      return Xf2;
    case 36295:
      return qf2;
    case 36296:
      return Yf2;
    case 35678:
    case 36198:
    case 36298:
    case 36306:
    case 35682:
      return Zf2;
    case 35679:
    case 36299:
    case 36307:
      return Jf2;
    case 35680:
    case 36300:
    case 36308:
    case 36293:
      return Kf2;
    case 36289:
    case 36303:
    case 36311:
    case 36292:
      return $f2;
  }
}
function eg2(s18, e11) {
  s18.uniform1fv(this.addr, e11);
}
function tg2(s18, e11) {
  const t19 = Rn5(e11, this.size, 2);
  s18.uniform2fv(this.addr, t19);
}
function ig2(s18, e11) {
  const t19 = Rn5(e11, this.size, 3);
  s18.uniform3fv(this.addr, t19);
}
function rg2(s18, e11) {
  const t19 = Rn5(e11, this.size, 4);
  s18.uniform4fv(this.addr, t19);
}
function ng2(s18, e11) {
  const t19 = Rn5(e11, this.size, 4);
  s18.uniformMatrix2fv(this.addr, false, t19);
}
function sg2(s18, e11) {
  const t19 = Rn5(e11, this.size, 9);
  s18.uniformMatrix3fv(this.addr, false, t19);
}
function ag2(s18, e11) {
  const t19 = Rn5(e11, this.size, 16);
  s18.uniformMatrix4fv(this.addr, false, t19);
}
function og2(s18, e11) {
  s18.uniform1iv(this.addr, e11);
}
function lg2(s18, e11) {
  s18.uniform2iv(this.addr, e11);
}
function cg2(s18, e11) {
  s18.uniform3iv(this.addr, e11);
}
function hg2(s18, e11) {
  s18.uniform4iv(this.addr, e11);
}
function ug2(s18, e11) {
  s18.uniform1uiv(this.addr, e11);
}
function dg2(s18, e11) {
  s18.uniform2uiv(this.addr, e11);
}
function pg2(s18, e11) {
  s18.uniform3uiv(this.addr, e11);
}
function mg2(s18, e11) {
  s18.uniform4uiv(this.addr, e11);
}
function fg2(s18, e11, t19) {
  const i27 = this.cache, r24 = e11.length, n33 = ca2(t19, r24);
  It5(i27, n33) || (s18.uniform1iv(this.addr, n33), Dt4(i27, n33));
  for (let a22 = 0; a22 !== r24; ++a22)
    t19.setTexture2D(e11[a22] || Sh2, n33[a22]);
}
function gg2(s18, e11, t19) {
  const i27 = this.cache, r24 = e11.length, n33 = ca2(t19, r24);
  It5(i27, n33) || (s18.uniform1iv(this.addr, n33), Dt4(i27, n33));
  for (let a22 = 0; a22 !== r24; ++a22)
    t19.setTexture3D(e11[a22] || Eh2, n33[a22]);
}
function _g2(s18, e11, t19) {
  const i27 = this.cache, r24 = e11.length, n33 = ca2(t19, r24);
  It5(i27, n33) || (s18.uniform1iv(this.addr, n33), Dt4(i27, n33));
  for (let a22 = 0; a22 !== r24; ++a22)
    t19.setTextureCube(e11[a22] || Ah2, n33[a22]);
}
function vg2(s18, e11, t19) {
  const i27 = this.cache, r24 = e11.length, n33 = ca2(t19, r24);
  It5(i27, n33) || (s18.uniform1iv(this.addr, n33), Dt4(i27, n33));
  for (let a22 = 0; a22 !== r24; ++a22)
    t19.setTexture2DArray(e11[a22] || Th2, n33[a22]);
}
function yg2(s18) {
  switch (s18) {
    case 5126:
      return eg2;
    case 35664:
      return tg2;
    case 35665:
      return ig2;
    case 35666:
      return rg2;
    case 35674:
      return ng2;
    case 35675:
      return sg2;
    case 35676:
      return ag2;
    case 5124:
    case 35670:
      return og2;
    case 35667:
    case 35671:
      return lg2;
    case 35668:
    case 35672:
      return cg2;
    case 35669:
    case 35673:
      return hg2;
    case 5125:
      return ug2;
    case 36294:
      return dg2;
    case 36295:
      return pg2;
    case 36296:
      return mg2;
    case 35678:
    case 36198:
    case 36298:
    case 36306:
    case 35682:
      return fg2;
    case 35679:
    case 36299:
    case 36307:
      return gg2;
    case 35680:
    case 36300:
    case 36308:
    case 36293:
      return _g2;
    case 36289:
    case 36303:
    case 36311:
    case 36292:
      return vg2;
  }
}
var xg2 = class {
  constructor(e11, t19, i27) {
    this.id = e11, this.addr = i27, this.cache = [], this.setValue = Qf2(t19.type);
  }
};
var bg2 = class {
  constructor(e11, t19, i27) {
    this.id = e11, this.addr = i27, this.cache = [], this.size = t19.size, this.setValue = yg2(t19.type);
  }
};
var Mg2 = class {
  constructor(e11) {
    this.id = e11, this.seq = [], this.map = {};
  }
  setValue(e11, t19, i27) {
    const r24 = this.seq;
    for (let n33 = 0, a22 = r24.length; n33 !== a22; ++n33) {
      const o12 = r24[n33];
      o12.setValue(e11, t19[o12.id], i27);
    }
  }
};
var Ya = /(\w+)(\])?(\[|\.)?/g;
function ac2(s18, e11) {
  s18.seq.push(e11), s18.map[e11.id] = e11;
}
function wg2(s18, e11, t19) {
  const i27 = s18.name, r24 = i27.length;
  for (Ya.lastIndex = 0; ; ) {
    const n33 = Ya.exec(i27), a22 = Ya.lastIndex;
    let o12 = n33[1];
    const l25 = n33[2] === "]", c27 = n33[3];
    if (l25 && (o12 = o12 | 0), c27 === void 0 || c27 === "[" && a22 + 2 === r24) {
      ac2(t19, c27 === void 0 ? new xg2(o12, s18, e11) : new bg2(o12, s18, e11));
      break;
    } else {
      let h26 = t19.map[o12];
      h26 === void 0 && (h26 = new Mg2(o12), ac2(t19, h26)), t19 = h26;
    }
  }
}
var Js2 = class {
  constructor(e11, t19) {
    this.seq = [], this.map = {};
    const i27 = e11.getProgramParameter(t19, 35718);
    for (let r24 = 0; r24 < i27; ++r24) {
      const n33 = e11.getActiveUniform(t19, r24), a22 = e11.getUniformLocation(t19, n33.name);
      wg2(n33, a22, this);
    }
  }
  setValue(e11, t19, i27, r24) {
    const n33 = this.map[t19];
    n33 !== void 0 && n33.setValue(e11, i27, r24);
  }
  setOptional(e11, t19, i27) {
    const r24 = t19[i27];
    r24 !== void 0 && this.setValue(e11, i27, r24);
  }
  static upload(e11, t19, i27, r24) {
    for (let n33 = 0, a22 = t19.length; n33 !== a22; ++n33) {
      const o12 = t19[n33], l25 = i27[o12.id];
      l25.needsUpdate !== false && o12.setValue(e11, l25.value, r24);
    }
  }
  static seqWithValue(e11, t19) {
    const i27 = [];
    for (let r24 = 0, n33 = e11.length; r24 !== n33; ++r24) {
      const a22 = e11[r24];
      a22.id in t19 && i27.push(a22);
    }
    return i27;
  }
};
function oc2(s18, e11, t19) {
  const i27 = s18.createShader(e11);
  return s18.shaderSource(i27, t19), s18.compileShader(i27), i27;
}
var Sg2 = 0;
function Tg2(s18, e11) {
  const t19 = s18.split(`
`), i27 = [], r24 = Math.max(e11 - 6, 0), n33 = Math.min(e11 + 6, t19.length);
  for (let a22 = r24; a22 < n33; a22++) {
    const o12 = a22 + 1;
    i27.push(`${o12 === e11 ? ">" : " "} ${o12}: ${t19[a22]}`);
  }
  return i27.join(`
`);
}
function Eg2(s18) {
  switch (s18) {
    case br5:
      return ["Linear", "( value )"];
    case rt10:
      return ["sRGB", "( value )"];
    default:
      return console.warn("THREE.WebGLProgram: Unsupported encoding:", s18), ["Linear", "( value )"];
  }
}
function lc2(s18, e11, t19) {
  const i27 = s18.getShaderParameter(e11, 35713), r24 = s18.getShaderInfoLog(e11).trim();
  if (i27 && r24 === "")
    return "";
  const n33 = /ERROR: 0:(\d+)/.exec(r24);
  if (n33) {
    const a22 = parseInt(n33[1]);
    return t19.toUpperCase() + `

` + r24 + `

` + Tg2(s18.getShaderSource(e11), a22);
  } else
    return r24;
}
function Ag2(s18, e11) {
  const t19 = Eg2(e11);
  return "vec4 " + s18 + "( vec4 value ) { return LinearTo" + t19[0] + t19[1] + "; }";
}
function Lg2(s18, e11) {
  let t19;
  switch (e11) {
    case Cu2:
      t19 = "Linear";
      break;
    case Ru2:
      t19 = "Reinhard";
      break;
    case Nu2:
      t19 = "OptimizedCineon";
      break;
    case Pu2:
      t19 = "ACESFilmic";
      break;
    case Iu2:
      t19 = "Custom";
      break;
    default:
      console.warn("THREE.WebGLProgram: Unsupported toneMapping:", e11), t19 = "Linear";
  }
  return "vec3 " + s18 + "( vec3 color ) { return " + t19 + "ToneMapping( color ); }";
}
function Cg2(s18) {
  return [
    s18.extensionDerivatives || s18.envMapCubeUVHeight || s18.bumpMap || s18.normalMapTangentSpace || s18.clearcoatNormalMap || s18.flatShading || s18.shaderID === "physical" ? "#extension GL_OES_standard_derivatives : enable" : "",
    (s18.extensionFragDepth || s18.logarithmicDepthBuffer) && s18.rendererExtensionFragDepth ? "#extension GL_EXT_frag_depth : enable" : "",
    s18.extensionDrawBuffers && s18.rendererExtensionDrawBuffers ? "#extension GL_EXT_draw_buffers : require" : "",
    (s18.extensionShaderTextureLOD || s18.envMap || s18.transmission) && s18.rendererExtensionShaderTextureLod ? "#extension GL_EXT_shader_texture_lod : enable" : ""
  ].filter(qn5).join(`
`);
}
function Rg2(s18) {
  const e11 = [];
  for (const t19 in s18) {
    const i27 = s18[t19];
    i27 !== false && e11.push("#define " + t19 + " " + i27);
  }
  return e11.join(`
`);
}
function Ng2(s18, e11) {
  const t19 = {}, i27 = s18.getProgramParameter(e11, 35721);
  for (let r24 = 0; r24 < i27; r24++) {
    const n33 = s18.getActiveAttrib(e11, r24), a22 = n33.name;
    let o12 = 1;
    n33.type === 35674 && (o12 = 2), n33.type === 35675 && (o12 = 3), n33.type === 35676 && (o12 = 4), t19[a22] = {
      type: n33.type,
      location: s18.getAttribLocation(e11, a22),
      locationSize: o12
    };
  }
  return t19;
}
function qn5(s18) {
  return s18 !== "";
}
function cc2(s18, e11) {
  const t19 = e11.numSpotLightShadows + e11.numSpotLightMaps - e11.numSpotLightShadowsWithMaps;
  return s18.replace(/NUM_DIR_LIGHTS/g, e11.numDirLights).replace(/NUM_SPOT_LIGHTS/g, e11.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g, e11.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g, t19).replace(/NUM_RECT_AREA_LIGHTS/g, e11.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g, e11.numPointLights).replace(/NUM_HEMI_LIGHTS/g, e11.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g, e11.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g, e11.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g, e11.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g, e11.numPointLightShadows);
}
function hc2(s18, e11) {
  return s18.replace(/NUM_CLIPPING_PLANES/g, e11.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g, e11.numClippingPlanes - e11.numClipIntersection);
}
var Pg2 = /^[ \t]*#include +<([\w\d./]+)>/gm;
function yo2(s18) {
  return s18.replace(Pg2, Ig2);
}
function Ig2(s18, e11) {
  const t19 = qe6[e11];
  if (t19 === void 0)
    throw new Error("Can not resolve #include <" + e11 + ">");
  return yo2(t19);
}
var Dg2 = /#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;
function uc2(s18) {
  return s18.replace(Dg2, kg2);
}
function kg2(s18, e11, t19, i27) {
  let r24 = "";
  for (let n33 = parseInt(e11); n33 < parseInt(t19); n33++)
    r24 += i27.replace(/\[\s*i\s*\]/g, "[ " + n33 + " ]").replace(/UNROLLED_LOOP_INDEX/g, n33);
  return r24;
}
function dc2(s18) {
  let e11 = "precision " + s18.precision + ` float;
precision ` + s18.precision + " int;";
  return s18.precision === "highp" ? e11 += `
#define HIGH_PRECISION` : s18.precision === "mediump" ? e11 += `
#define MEDIUM_PRECISION` : s18.precision === "lowp" && (e11 += `
#define LOW_PRECISION`), e11;
}
function Ug2(s18) {
  let e11 = "SHADOWMAP_TYPE_BASIC";
  return s18.shadowMapType === ih2 ? e11 = "SHADOWMAP_TYPE_PCF" : s18.shadowMapType === ou2 ? e11 = "SHADOWMAP_TYPE_PCF_SOFT" : s18.shadowMapType === Xn5 && (e11 = "SHADOWMAP_TYPE_VSM"), e11;
}
function Og2(s18) {
  let e11 = "ENVMAP_TYPE_CUBE";
  if (s18.envMap)
    switch (s18.envMapMode) {
      case yn5:
      case xn5:
        e11 = "ENVMAP_TYPE_CUBE";
        break;
      case na2:
        e11 = "ENVMAP_TYPE_CUBE_UV";
        break;
    }
  return e11;
}
function zg2(s18) {
  let e11 = "ENVMAP_MODE_REFLECTION";
  if (s18.envMap)
    switch (s18.envMapMode) {
      case xn5:
        e11 = "ENVMAP_MODE_REFRACTION";
        break;
    }
  return e11;
}
function Bg2(s18) {
  let e11 = "ENVMAP_BLENDING_NONE";
  if (s18.envMap)
    switch (s18.combine) {
      case ra2:
        e11 = "ENVMAP_BLENDING_MULTIPLY";
        break;
      case Au2:
        e11 = "ENVMAP_BLENDING_MIX";
        break;
      case Lu2:
        e11 = "ENVMAP_BLENDING_ADD";
        break;
    }
  return e11;
}
function Fg2(s18) {
  const e11 = s18.envMapCubeUVHeight;
  if (e11 === null)
    return null;
  const t19 = Math.log2(e11) - 2, i27 = 1 / e11;
  return { texelWidth: 1 / (3 * Math.max(Math.pow(2, t19), 7 * 16)), texelHeight: i27, maxMip: t19 };
}
function Hg2(s18, e11, t19, i27) {
  const r24 = s18.getContext(), n33 = t19.defines;
  let a22 = t19.vertexShader, o12 = t19.fragmentShader;
  const l25 = Ug2(t19), c27 = Og2(t19), h26 = zg2(t19), u35 = Bg2(t19), d34 = Fg2(t19), m33 = t19.isWebGL2 ? "" : Cg2(t19), _19 = Rg2(n33), y33 = r24.createProgram();
  let f39, p26, A17 = t19.glslVersion ? "#version " + t19.glslVersion + `
` : "";
  t19.isRawShaderMaterial ? (f39 = [
    _19
  ].filter(qn5).join(`
`), f39.length > 0 && (f39 += `
`), p26 = [
    m33,
    _19
  ].filter(qn5).join(`
`), p26.length > 0 && (p26 += `
`)) : (f39 = [
    dc2(t19),
    "#define SHADER_NAME " + t19.shaderName,
    _19,
    t19.instancing ? "#define USE_INSTANCING" : "",
    t19.instancingColor ? "#define USE_INSTANCING_COLOR" : "",
    t19.useFog && t19.fog ? "#define USE_FOG" : "",
    t19.useFog && t19.fogExp2 ? "#define FOG_EXP2" : "",
    t19.map ? "#define USE_MAP" : "",
    t19.envMap ? "#define USE_ENVMAP" : "",
    t19.envMap ? "#define " + h26 : "",
    t19.lightMap ? "#define USE_LIGHTMAP" : "",
    t19.aoMap ? "#define USE_AOMAP" : "",
    t19.bumpMap ? "#define USE_BUMPMAP" : "",
    t19.normalMap ? "#define USE_NORMALMAP" : "",
    t19.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "",
    t19.normalMapTangentSpace ? "#define USE_NORMALMAP_TANGENTSPACE" : "",
    t19.displacementMap ? "#define USE_DISPLACEMENTMAP" : "",
    t19.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
    t19.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
    t19.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "",
    t19.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
    t19.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
    t19.iridescenceThicknessMap ? "#define USE_IRIDESCENCE_THICKNESSMAP" : "",
    t19.specularMap ? "#define USE_SPECULARMAP" : "",
    t19.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "",
    t19.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "",
    t19.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
    t19.metalnessMap ? "#define USE_METALNESSMAP" : "",
    t19.alphaMap ? "#define USE_ALPHAMAP" : "",
    t19.transmission ? "#define USE_TRANSMISSION" : "",
    t19.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
    t19.thicknessMap ? "#define USE_THICKNESSMAP" : "",
    t19.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "",
    t19.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "",
    //
    t19.mapUv ? "#define MAP_UV " + t19.mapUv : "",
    t19.alphaMapUv ? "#define ALPHAMAP_UV " + t19.alphaMapUv : "",
    t19.lightMapUv ? "#define LIGHTMAP_UV " + t19.lightMapUv : "",
    t19.aoMapUv ? "#define AOMAP_UV " + t19.aoMapUv : "",
    t19.emissiveMapUv ? "#define EMISSIVEMAP_UV " + t19.emissiveMapUv : "",
    t19.bumpMapUv ? "#define BUMPMAP_UV " + t19.bumpMapUv : "",
    t19.normalMapUv ? "#define NORMALMAP_UV " + t19.normalMapUv : "",
    t19.displacementMapUv ? "#define DISPLACEMENTMAP_UV " + t19.displacementMapUv : "",
    t19.metalnessMapUv ? "#define METALNESSMAP_UV " + t19.metalnessMapUv : "",
    t19.roughnessMapUv ? "#define ROUGHNESSMAP_UV " + t19.roughnessMapUv : "",
    t19.clearcoatMapUv ? "#define CLEARCOATMAP_UV " + t19.clearcoatMapUv : "",
    t19.clearcoatNormalMapUv ? "#define CLEARCOAT_NORMALMAP_UV " + t19.clearcoatNormalMapUv : "",
    t19.clearcoatRoughnessMapUv ? "#define CLEARCOAT_ROUGHNESSMAP_UV " + t19.clearcoatRoughnessMapUv : "",
    t19.iridescenceMapUv ? "#define IRIDESCENCEMAP_UV " + t19.iridescenceMapUv : "",
    t19.iridescenceThicknessMapUv ? "#define IRIDESCENCE_THICKNESSMAP_UV " + t19.iridescenceThicknessMapUv : "",
    t19.sheenColorMapUv ? "#define SHEEN_COLORMAP_UV " + t19.sheenColorMapUv : "",
    t19.sheenRoughnessMapUv ? "#define SHEEN_ROUGHNESSMAP_UV " + t19.sheenRoughnessMapUv : "",
    t19.specularMapUv ? "#define SPECULARMAP_UV " + t19.specularMapUv : "",
    t19.specularColorMapUv ? "#define SPECULAR_COLORMAP_UV " + t19.specularColorMapUv : "",
    t19.specularIntensityMapUv ? "#define SPECULAR_INTENSITYMAP_UV " + t19.specularIntensityMapUv : "",
    t19.transmissionMapUv ? "#define TRANSMISSIONMAP_UV " + t19.transmissionMapUv : "",
    t19.thicknessMapUv ? "#define THICKNESSMAP_UV " + t19.thicknessMapUv : "",
    //
    t19.vertexTangents ? "#define USE_TANGENT" : "",
    t19.vertexColors ? "#define USE_COLOR" : "",
    t19.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
    t19.vertexUvs2 ? "#define USE_UV2" : "",
    t19.pointsUvs ? "#define USE_POINTS_UV" : "",
    t19.flatShading ? "#define FLAT_SHADED" : "",
    t19.skinning ? "#define USE_SKINNING" : "",
    t19.morphTargets ? "#define USE_MORPHTARGETS" : "",
    t19.morphNormals && t19.flatShading === false ? "#define USE_MORPHNORMALS" : "",
    t19.morphColors && t19.isWebGL2 ? "#define USE_MORPHCOLORS" : "",
    t19.morphTargetsCount > 0 && t19.isWebGL2 ? "#define MORPHTARGETS_TEXTURE" : "",
    t19.morphTargetsCount > 0 && t19.isWebGL2 ? "#define MORPHTARGETS_TEXTURE_STRIDE " + t19.morphTextureStride : "",
    t19.morphTargetsCount > 0 && t19.isWebGL2 ? "#define MORPHTARGETS_COUNT " + t19.morphTargetsCount : "",
    t19.doubleSided ? "#define DOUBLE_SIDED" : "",
    t19.flipSided ? "#define FLIP_SIDED" : "",
    t19.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
    t19.shadowMapEnabled ? "#define " + l25 : "",
    t19.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "",
    t19.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
    t19.logarithmicDepthBuffer && t19.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "",
    "uniform mat4 modelMatrix;",
    "uniform mat4 modelViewMatrix;",
    "uniform mat4 projectionMatrix;",
    "uniform mat4 viewMatrix;",
    "uniform mat3 normalMatrix;",
    "uniform vec3 cameraPosition;",
    "uniform bool isOrthographic;",
    "#ifdef USE_INSTANCING",
    "	attribute mat4 instanceMatrix;",
    "#endif",
    "#ifdef USE_INSTANCING_COLOR",
    "	attribute vec3 instanceColor;",
    "#endif",
    "attribute vec3 position;",
    "attribute vec3 normal;",
    "attribute vec2 uv;",
    "#ifdef USE_TANGENT",
    "	attribute vec4 tangent;",
    "#endif",
    "#if defined( USE_COLOR_ALPHA )",
    "	attribute vec4 color;",
    "#elif defined( USE_COLOR )",
    "	attribute vec3 color;",
    "#endif",
    "#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )",
    "	attribute vec3 morphTarget0;",
    "	attribute vec3 morphTarget1;",
    "	attribute vec3 morphTarget2;",
    "	attribute vec3 morphTarget3;",
    "	#ifdef USE_MORPHNORMALS",
    "		attribute vec3 morphNormal0;",
    "		attribute vec3 morphNormal1;",
    "		attribute vec3 morphNormal2;",
    "		attribute vec3 morphNormal3;",
    "	#else",
    "		attribute vec3 morphTarget4;",
    "		attribute vec3 morphTarget5;",
    "		attribute vec3 morphTarget6;",
    "		attribute vec3 morphTarget7;",
    "	#endif",
    "#endif",
    "#ifdef USE_SKINNING",
    "	attribute vec4 skinIndex;",
    "	attribute vec4 skinWeight;",
    "#endif",
    `
`
  ].filter(qn5).join(`
`), p26 = [
    m33,
    dc2(t19),
    "#define SHADER_NAME " + t19.shaderName,
    _19,
    t19.useFog && t19.fog ? "#define USE_FOG" : "",
    t19.useFog && t19.fogExp2 ? "#define FOG_EXP2" : "",
    t19.map ? "#define USE_MAP" : "",
    t19.matcap ? "#define USE_MATCAP" : "",
    t19.envMap ? "#define USE_ENVMAP" : "",
    t19.envMap ? "#define " + c27 : "",
    t19.envMap ? "#define " + h26 : "",
    t19.envMap ? "#define " + u35 : "",
    d34 ? "#define CUBEUV_TEXEL_WIDTH " + d34.texelWidth : "",
    d34 ? "#define CUBEUV_TEXEL_HEIGHT " + d34.texelHeight : "",
    d34 ? "#define CUBEUV_MAX_MIP " + d34.maxMip + ".0" : "",
    t19.lightMap ? "#define USE_LIGHTMAP" : "",
    t19.aoMap ? "#define USE_AOMAP" : "",
    t19.bumpMap ? "#define USE_BUMPMAP" : "",
    t19.normalMap ? "#define USE_NORMALMAP" : "",
    t19.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "",
    t19.normalMapTangentSpace ? "#define USE_NORMALMAP_TANGENTSPACE" : "",
    t19.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
    t19.clearcoat ? "#define USE_CLEARCOAT" : "",
    t19.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
    t19.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "",
    t19.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
    t19.iridescence ? "#define USE_IRIDESCENCE" : "",
    t19.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
    t19.iridescenceThicknessMap ? "#define USE_IRIDESCENCE_THICKNESSMAP" : "",
    t19.specularMap ? "#define USE_SPECULARMAP" : "",
    t19.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "",
    t19.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "",
    t19.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
    t19.metalnessMap ? "#define USE_METALNESSMAP" : "",
    t19.alphaMap ? "#define USE_ALPHAMAP" : "",
    t19.alphaTest ? "#define USE_ALPHATEST" : "",
    t19.sheen ? "#define USE_SHEEN" : "",
    t19.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "",
    t19.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "",
    t19.transmission ? "#define USE_TRANSMISSION" : "",
    t19.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
    t19.thicknessMap ? "#define USE_THICKNESSMAP" : "",
    t19.decodeVideoTexture ? "#define DECODE_VIDEO_TEXTURE" : "",
    t19.vertexTangents ? "#define USE_TANGENT" : "",
    t19.vertexColors || t19.instancingColor ? "#define USE_COLOR" : "",
    t19.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
    t19.vertexUvs2 ? "#define USE_UV2" : "",
    t19.pointsUvs ? "#define USE_POINTS_UV" : "",
    t19.gradientMap ? "#define USE_GRADIENTMAP" : "",
    t19.flatShading ? "#define FLAT_SHADED" : "",
    t19.doubleSided ? "#define DOUBLE_SIDED" : "",
    t19.flipSided ? "#define FLIP_SIDED" : "",
    t19.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
    t19.shadowMapEnabled ? "#define " + l25 : "",
    t19.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "",
    t19.useLegacyLights ? "#define LEGACY_LIGHTS" : "",
    t19.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
    t19.logarithmicDepthBuffer && t19.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "",
    "uniform mat4 viewMatrix;",
    "uniform vec3 cameraPosition;",
    "uniform bool isOrthographic;",
    t19.toneMapping !== Fi4 ? "#define TONE_MAPPING" : "",
    t19.toneMapping !== Fi4 ? qe6.tonemapping_pars_fragment : "",
    // this code is required here because it is used by the toneMapping() function defined below
    t19.toneMapping !== Fi4 ? Lg2("toneMapping", t19.toneMapping) : "",
    t19.dithering ? "#define DITHERING" : "",
    t19.opaque ? "#define OPAQUE" : "",
    qe6.encodings_pars_fragment,
    // this code is required here because it is used by the various encoding/decoding function defined below
    Ag2("linearToOutputTexel", t19.outputEncoding),
    t19.useDepthPacking ? "#define DEPTH_PACKING " + t19.depthPacking : "",
    `
`
  ].filter(qn5).join(`
`)), a22 = yo2(a22), a22 = cc2(a22, t19), a22 = hc2(a22, t19), o12 = yo2(o12), o12 = cc2(o12, t19), o12 = hc2(o12, t19), a22 = uc2(a22), o12 = uc2(o12), t19.isWebGL2 && t19.isRawShaderMaterial !== true && (A17 = `#version 300 es
`, f39 = [
    "precision mediump sampler2DArray;",
    "#define attribute in",
    "#define varying out",
    "#define texture2D texture"
  ].join(`
`) + `
` + f39, p26 = [
    "#define varying in",
    t19.glslVersion === Pl2 ? "" : "layout(location = 0) out highp vec4 pc_fragColor;",
    t19.glslVersion === Pl2 ? "" : "#define gl_FragColor pc_fragColor",
    "#define gl_FragDepthEXT gl_FragDepth",
    "#define texture2D texture",
    "#define textureCube texture",
    "#define texture2DProj textureProj",
    "#define texture2DLodEXT textureLod",
    "#define texture2DProjLodEXT textureProjLod",
    "#define textureCubeLodEXT textureLod",
    "#define texture2DGradEXT textureGrad",
    "#define texture2DProjGradEXT textureProjGrad",
    "#define textureCubeGradEXT textureGrad"
  ].join(`
`) + `
` + p26);
  const M12 = A17 + f39 + a22, E24 = A17 + p26 + o12, w29 = oc2(r24, 35633, M12), I16 = oc2(r24, 35632, E24);
  if (r24.attachShader(y33, w29), r24.attachShader(y33, I16), t19.index0AttributeName !== void 0 ? r24.bindAttribLocation(y33, 0, t19.index0AttributeName) : t19.morphTargets === true && r24.bindAttribLocation(y33, 0, "position"), r24.linkProgram(y33), s18.debug.checkShaderErrors) {
    const x34 = r24.getProgramInfoLog(y33).trim(), C19 = r24.getShaderInfoLog(w29).trim(), G15 = r24.getShaderInfoLog(I16).trim();
    let z19 = true, U18 = true;
    if (r24.getProgramParameter(y33, 35714) === false)
      if (z19 = false, typeof s18.debug.onShaderError == "function")
        s18.debug.onShaderError(r24, y33, w29, I16);
      else {
        const V14 = lc2(r24, w29, "vertex"), j18 = lc2(r24, I16, "fragment");
        console.error(
          "THREE.WebGLProgram: Shader Error " + r24.getError() + " - VALIDATE_STATUS " + r24.getProgramParameter(y33, 35715) + `

Program Info Log: ` + x34 + `
` + V14 + `
` + j18
        );
      }
    else
      x34 !== "" ? console.warn("THREE.WebGLProgram: Program Info Log:", x34) : (C19 === "" || G15 === "") && (U18 = false);
    U18 && (this.diagnostics = {
      runnable: z19,
      programLog: x34,
      vertexShader: {
        log: C19,
        prefix: f39
      },
      fragmentShader: {
        log: G15,
        prefix: p26
      }
    });
  }
  r24.deleteShader(w29), r24.deleteShader(I16);
  let D17;
  this.getUniforms = function() {
    return D17 === void 0 && (D17 = new Js2(r24, y33)), D17;
  };
  let P19;
  return this.getAttributes = function() {
    return P19 === void 0 && (P19 = Ng2(r24, y33)), P19;
  }, this.destroy = function() {
    i27.releaseStatesOfProgram(this), r24.deleteProgram(y33), this.program = void 0;
  }, this.name = t19.shaderName, this.id = Sg2++, this.cacheKey = e11, this.usedTimes = 1, this.program = y33, this.vertexShader = w29, this.fragmentShader = I16, this;
}
var Vg2 = 0;
var Gg2 = class {
  constructor() {
    this.shaderCache = /* @__PURE__ */ new Map(), this.materialCache = /* @__PURE__ */ new Map();
  }
  update(e11) {
    const t19 = e11.vertexShader, i27 = e11.fragmentShader, r24 = this._getShaderStage(t19), n33 = this._getShaderStage(i27), a22 = this._getShaderCacheForMaterial(e11);
    return a22.has(r24) === false && (a22.add(r24), r24.usedTimes++), a22.has(n33) === false && (a22.add(n33), n33.usedTimes++), this;
  }
  remove(e11) {
    const t19 = this.materialCache.get(e11);
    for (const i27 of t19)
      i27.usedTimes--, i27.usedTimes === 0 && this.shaderCache.delete(i27.code);
    return this.materialCache.delete(e11), this;
  }
  getVertexShaderID(e11) {
    return this._getShaderStage(e11.vertexShader).id;
  }
  getFragmentShaderID(e11) {
    return this._getShaderStage(e11.fragmentShader).id;
  }
  dispose() {
    this.shaderCache.clear(), this.materialCache.clear();
  }
  _getShaderCacheForMaterial(e11) {
    const t19 = this.materialCache;
    let i27 = t19.get(e11);
    return i27 === void 0 && (i27 = /* @__PURE__ */ new Set(), t19.set(e11, i27)), i27;
  }
  _getShaderStage(e11) {
    const t19 = this.shaderCache;
    let i27 = t19.get(e11);
    return i27 === void 0 && (i27 = new Wg2(e11), t19.set(e11, i27)), i27;
  }
};
var Wg2 = class {
  constructor(e11) {
    this.id = Vg2++, this.code = e11, this.usedTimes = 0;
  }
};
function jg2(s18, e11, t19, i27, r24, n33, a22) {
  const o12 = new gh2(), l25 = new Gg2(), c27 = [], h26 = r24.isWebGL2, u35 = r24.logarithmicDepthBuffer, d34 = r24.vertexTextures;
  let m33 = r24.precision;
  const _19 = {
    MeshDepthMaterial: "depth",
    MeshDistanceMaterial: "distanceRGBA",
    MeshNormalMaterial: "normal",
    MeshBasicMaterial: "basic",
    MeshLambertMaterial: "lambert",
    MeshPhongMaterial: "phong",
    MeshToonMaterial: "toon",
    MeshStandardMaterial: "physical",
    MeshPhysicalMaterial: "physical",
    MeshMatcapMaterial: "matcap",
    LineBasicMaterial: "basic",
    LineDashedMaterial: "dashed",
    PointsMaterial: "points",
    ShadowMaterial: "shadow",
    SpriteMaterial: "sprite"
  };
  function y33(x34) {
    return x34 === 1 ? "uv2" : "uv";
  }
  function f39(x34, C19, G15, z19, U18) {
    const V14 = z19.fog, j18 = U18.geometry, W8 = x34.isMeshStandardMaterial ? z19.environment : null, re8 = (x34.isMeshStandardMaterial ? t19 : e11).get(x34.envMap || W8), $24 = re8 && re8.mapping === na2 ? re8.image.height : null, ie8 = _19[x34.type];
    x34.precision !== null && (m33 = r24.getMaxPrecision(x34.precision), m33 !== x34.precision && console.warn("THREE.WebGLProgram.getParameters:", x34.precision, "not supported, using", m33, "instead."));
    const le7 = j18.morphAttributes.position || j18.morphAttributes.normal || j18.morphAttributes.color, fe7 = le7 !== void 0 ? le7.length : 0;
    let ue8 = 0;
    j18.morphAttributes.position !== void 0 && (ue8 = 1), j18.morphAttributes.normal !== void 0 && (ue8 = 2), j18.morphAttributes.color !== void 0 && (ue8 = 3);
    let H15, q13, oe7, K13;
    if (ie8) {
      const ce9 = Si4[ie8];
      H15 = ce9.vertexShader, q13 = ce9.fragmentShader;
    } else
      H15 = x34.vertexShader, q13 = x34.fragmentShader, l25.update(x34), oe7 = l25.getVertexShaderID(x34), K13 = l25.getFragmentShaderID(x34);
    const F17 = s18.getRenderTarget(), ye7 = U18.isInstancedMesh === true, Le7 = !!x34.map, me9 = !!x34.matcap, De6 = !!re8, tt10 = !!x34.aoMap, Pe6 = !!x34.lightMap, je7 = !!x34.bumpMap, Mt10 = !!x34.normalMap, vt8 = !!x34.displacementMap, St8 = !!x34.emissiveMap, Tt9 = !!x34.metalnessMap, $e6 = !!x34.roughnessMap, ot13 = x34.clearcoat > 0, kt10 = x34.iridescence > 0, N19 = x34.sheen > 0, L11 = x34.transmission > 0, Q11 = ot13 && !!x34.clearcoatMap, de9 = ot13 && !!x34.clearcoatNormalMap, pe8 = ot13 && !!x34.clearcoatRoughnessMap, _e7 = kt10 && !!x34.iridescenceMap, O20 = kt10 && !!x34.iridescenceThicknessMap, ae7 = N19 && !!x34.sheenColorMap, Z11 = N19 && !!x34.sheenRoughnessMap, xe6 = !!x34.specularMap, Ae6 = !!x34.specularColorMap, Ce7 = !!x34.specularIntensityMap, we8 = L11 && !!x34.transmissionMap, Se7 = L11 && !!x34.thicknessMap, Ve8 = !!x34.gradientMap, nt14 = !!x34.alphaMap, wt9 = x34.alphaTest > 0, B21 = !!x34.extensions, te7 = !!j18.attributes.uv2;
    return {
      isWebGL2: h26,
      shaderID: ie8,
      shaderName: x34.type,
      vertexShader: H15,
      fragmentShader: q13,
      defines: x34.defines,
      customVertexShaderID: oe7,
      customFragmentShaderID: K13,
      isRawShaderMaterial: x34.isRawShaderMaterial === true,
      glslVersion: x34.glslVersion,
      precision: m33,
      instancing: ye7,
      instancingColor: ye7 && U18.instanceColor !== null,
      supportsVertexTextures: d34,
      outputEncoding: F17 === null ? s18.outputEncoding : F17.isXRRenderTarget === true ? F17.texture.encoding : br5,
      map: Le7,
      matcap: me9,
      envMap: De6,
      envMapMode: De6 && re8.mapping,
      envMapCubeUVHeight: $24,
      aoMap: tt10,
      lightMap: Pe6,
      bumpMap: je7,
      normalMap: Mt10,
      displacementMap: d34 && vt8,
      emissiveMap: St8,
      normalMapObjectSpace: Mt10 && x34.normalMapType === Qu,
      normalMapTangentSpace: Mt10 && x34.normalMapType === sa2,
      decodeVideoTexture: Le7 && x34.map.isVideoTexture === true && x34.map.encoding === rt10,
      metalnessMap: Tt9,
      roughnessMap: $e6,
      clearcoat: ot13,
      clearcoatMap: Q11,
      clearcoatNormalMap: de9,
      clearcoatRoughnessMap: pe8,
      iridescence: kt10,
      iridescenceMap: _e7,
      iridescenceThicknessMap: O20,
      sheen: N19,
      sheenColorMap: ae7,
      sheenRoughnessMap: Z11,
      specularMap: xe6,
      specularColorMap: Ae6,
      specularIntensityMap: Ce7,
      transmission: L11,
      transmissionMap: we8,
      thicknessMap: Se7,
      gradientMap: Ve8,
      opaque: x34.transparent === false && x34.blending === un4,
      alphaMap: nt14,
      alphaTest: wt9,
      combine: x34.combine,
      //
      mapUv: Le7 && y33(x34.map.channel),
      aoMapUv: tt10 && y33(x34.aoMap.channel),
      lightMapUv: Pe6 && y33(x34.lightMap.channel),
      bumpMapUv: je7 && y33(x34.bumpMap.channel),
      normalMapUv: Mt10 && y33(x34.normalMap.channel),
      displacementMapUv: vt8 && y33(x34.displacementMap.channel),
      emissiveMapUv: St8 && y33(x34.emissiveMap.channel),
      metalnessMapUv: Tt9 && y33(x34.metalnessMap.channel),
      roughnessMapUv: $e6 && y33(x34.roughnessMap.channel),
      clearcoatMapUv: Q11 && y33(x34.clearcoatMap.channel),
      clearcoatNormalMapUv: de9 && y33(x34.clearcoatNormalMap.channel),
      clearcoatRoughnessMapUv: pe8 && y33(x34.clearcoatRoughnessMap.channel),
      iridescenceMapUv: _e7 && y33(x34.iridescenceMap.channel),
      iridescenceThicknessMapUv: O20 && y33(x34.iridescenceThicknessMap.channel),
      sheenColorMapUv: ae7 && y33(x34.sheenColorMap.channel),
      sheenRoughnessMapUv: Z11 && y33(x34.sheenRoughnessMap.channel),
      specularMapUv: xe6 && y33(x34.specularMap.channel),
      specularColorMapUv: Ae6 && y33(x34.specularColorMap.channel),
      specularIntensityMapUv: Ce7 && y33(x34.specularIntensityMap.channel),
      transmissionMapUv: we8 && y33(x34.transmissionMap.channel),
      thicknessMapUv: Se7 && y33(x34.thicknessMap.channel),
      alphaMapUv: nt14 && y33(x34.alphaMap.channel),
      //
      vertexTangents: Mt10 && !!j18.attributes.tangent,
      vertexColors: x34.vertexColors,
      vertexAlphas: x34.vertexColors === true && !!j18.attributes.color && j18.attributes.color.itemSize === 4,
      vertexUvs2: te7,
      pointsUvs: U18.isPoints === true && !!j18.attributes.uv && (Le7 || nt14),
      fog: !!V14,
      useFog: x34.fog === true,
      fogExp2: V14 && V14.isFogExp2,
      flatShading: x34.flatShading === true,
      sizeAttenuation: x34.sizeAttenuation === true,
      logarithmicDepthBuffer: u35,
      skinning: U18.isSkinnedMesh === true,
      morphTargets: j18.morphAttributes.position !== void 0,
      morphNormals: j18.morphAttributes.normal !== void 0,
      morphColors: j18.morphAttributes.color !== void 0,
      morphTargetsCount: fe7,
      morphTextureStride: ue8,
      numDirLights: C19.directional.length,
      numPointLights: C19.point.length,
      numSpotLights: C19.spot.length,
      numSpotLightMaps: C19.spotLightMap.length,
      numRectAreaLights: C19.rectArea.length,
      numHemiLights: C19.hemi.length,
      numDirLightShadows: C19.directionalShadowMap.length,
      numPointLightShadows: C19.pointShadowMap.length,
      numSpotLightShadows: C19.spotShadowMap.length,
      numSpotLightShadowsWithMaps: C19.numSpotLightShadowsWithMaps,
      numClippingPlanes: a22.numPlanes,
      numClipIntersection: a22.numIntersection,
      dithering: x34.dithering,
      shadowMapEnabled: s18.shadowMap.enabled && G15.length > 0,
      shadowMapType: s18.shadowMap.type,
      toneMapping: x34.toneMapped ? s18.toneMapping : Fi4,
      useLegacyLights: s18.useLegacyLights,
      premultipliedAlpha: x34.premultipliedAlpha,
      doubleSided: x34.side === ui6,
      flipSided: x34.side === ti6,
      useDepthPacking: x34.depthPacking >= 0,
      depthPacking: x34.depthPacking || 0,
      index0AttributeName: x34.index0AttributeName,
      extensionDerivatives: B21 && x34.extensions.derivatives === true,
      extensionFragDepth: B21 && x34.extensions.fragDepth === true,
      extensionDrawBuffers: B21 && x34.extensions.drawBuffers === true,
      extensionShaderTextureLOD: B21 && x34.extensions.shaderTextureLOD === true,
      rendererExtensionFragDepth: h26 || i27.has("EXT_frag_depth"),
      rendererExtensionDrawBuffers: h26 || i27.has("WEBGL_draw_buffers"),
      rendererExtensionShaderTextureLod: h26 || i27.has("EXT_shader_texture_lod"),
      customProgramCacheKey: x34.customProgramCacheKey()
    };
  }
  function p26(x34) {
    const C19 = [];
    if (x34.shaderID ? C19.push(x34.shaderID) : (C19.push(x34.customVertexShaderID), C19.push(x34.customFragmentShaderID)), x34.defines !== void 0)
      for (const G15 in x34.defines)
        C19.push(G15), C19.push(x34.defines[G15]);
    return x34.isRawShaderMaterial === false && (A17(C19, x34), M12(C19, x34), C19.push(s18.outputEncoding)), C19.push(x34.customProgramCacheKey), C19.join();
  }
  function A17(x34, C19) {
    x34.push(C19.precision), x34.push(C19.outputEncoding), x34.push(C19.envMapMode), x34.push(C19.envMapCubeUVHeight), x34.push(C19.mapUv), x34.push(C19.alphaMapUv), x34.push(C19.lightMapUv), x34.push(C19.aoMapUv), x34.push(C19.bumpMapUv), x34.push(C19.normalMapUv), x34.push(C19.displacementMapUv), x34.push(C19.emissiveMapUv), x34.push(C19.metalnessMapUv), x34.push(C19.roughnessMapUv), x34.push(C19.clearcoatMapUv), x34.push(C19.clearcoatNormalMapUv), x34.push(C19.clearcoatRoughnessMapUv), x34.push(C19.iridescenceMapUv), x34.push(C19.iridescenceThicknessMapUv), x34.push(C19.sheenColorMapUv), x34.push(C19.sheenRoughnessMapUv), x34.push(C19.specularMapUv), x34.push(C19.specularColorMapUv), x34.push(C19.specularIntensityMapUv), x34.push(C19.transmissionMapUv), x34.push(C19.thicknessMapUv), x34.push(C19.combine), x34.push(C19.fogExp2), x34.push(C19.sizeAttenuation), x34.push(C19.morphTargetsCount), x34.push(C19.morphAttributeCount), x34.push(C19.numDirLights), x34.push(C19.numPointLights), x34.push(C19.numSpotLights), x34.push(C19.numSpotLightMaps), x34.push(C19.numHemiLights), x34.push(C19.numRectAreaLights), x34.push(C19.numDirLightShadows), x34.push(C19.numPointLightShadows), x34.push(C19.numSpotLightShadows), x34.push(C19.numSpotLightShadowsWithMaps), x34.push(C19.shadowMapType), x34.push(C19.toneMapping), x34.push(C19.numClippingPlanes), x34.push(C19.numClipIntersection), x34.push(C19.depthPacking);
  }
  function M12(x34, C19) {
    o12.disableAll(), C19.isWebGL2 && o12.enable(0), C19.supportsVertexTextures && o12.enable(1), C19.instancing && o12.enable(2), C19.instancingColor && o12.enable(3), C19.matcap && o12.enable(4), C19.envMap && o12.enable(5), C19.normalMapObjectSpace && o12.enable(6), C19.normalMapTangentSpace && o12.enable(7), C19.clearcoat && o12.enable(8), C19.iridescence && o12.enable(9), C19.alphaTest && o12.enable(10), C19.vertexColors && o12.enable(11), C19.vertexAlphas && o12.enable(12), C19.vertexUvs2 && o12.enable(13), C19.vertexTangents && o12.enable(14), x34.push(o12.mask), o12.disableAll(), C19.fog && o12.enable(0), C19.useFog && o12.enable(1), C19.flatShading && o12.enable(2), C19.logarithmicDepthBuffer && o12.enable(3), C19.skinning && o12.enable(4), C19.morphTargets && o12.enable(5), C19.morphNormals && o12.enable(6), C19.morphColors && o12.enable(7), C19.premultipliedAlpha && o12.enable(8), C19.shadowMapEnabled && o12.enable(9), C19.useLegacyLights && o12.enable(10), C19.doubleSided && o12.enable(11), C19.flipSided && o12.enable(12), C19.useDepthPacking && o12.enable(13), C19.dithering && o12.enable(14), C19.transmission && o12.enable(15), C19.sheen && o12.enable(16), C19.decodeVideoTexture && o12.enable(17), C19.opaque && o12.enable(18), C19.pointsUvs && o12.enable(19), x34.push(o12.mask);
  }
  function E24(x34) {
    const C19 = _19[x34.type];
    let G15;
    if (C19) {
      const z19 = Si4[C19];
      G15 = Id2.clone(z19.uniforms);
    } else
      G15 = x34.uniforms;
    return G15;
  }
  function w29(x34, C19) {
    let G15;
    for (let z19 = 0, U18 = c27.length; z19 < U18; z19++) {
      const V14 = c27[z19];
      if (V14.cacheKey === C19) {
        G15 = V14, ++G15.usedTimes;
        break;
      }
    }
    return G15 === void 0 && (G15 = new Hg2(s18, C19, x34, n33), c27.push(G15)), G15;
  }
  function I16(x34) {
    if (--x34.usedTimes === 0) {
      const C19 = c27.indexOf(x34);
      c27[C19] = c27[c27.length - 1], c27.pop(), x34.destroy();
    }
  }
  function D17(x34) {
    l25.remove(x34);
  }
  function P19() {
    l25.dispose();
  }
  return {
    getParameters: f39,
    getProgramCacheKey: p26,
    getUniforms: E24,
    acquireProgram: w29,
    releaseProgram: I16,
    releaseShaderCache: D17,
    // Exposed for resource monitoring & error feedback via renderer.info:
    programs: c27,
    dispose: P19
  };
}
function Xg2() {
  let s18 = /* @__PURE__ */ new WeakMap();
  function e11(n33) {
    let a22 = s18.get(n33);
    return a22 === void 0 && (a22 = {}, s18.set(n33, a22)), a22;
  }
  function t19(n33) {
    s18.delete(n33);
  }
  function i27(n33, a22, o12) {
    s18.get(n33)[a22] = o12;
  }
  function r24() {
    s18 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: e11,
    remove: t19,
    update: i27,
    dispose: r24
  };
}
function qg2(s18, e11) {
  return s18.groupOrder !== e11.groupOrder ? s18.groupOrder - e11.groupOrder : s18.renderOrder !== e11.renderOrder ? s18.renderOrder - e11.renderOrder : s18.material.id !== e11.material.id ? s18.material.id - e11.material.id : s18.z !== e11.z ? s18.z - e11.z : s18.id - e11.id;
}
function pc2(s18, e11) {
  return s18.groupOrder !== e11.groupOrder ? s18.groupOrder - e11.groupOrder : s18.renderOrder !== e11.renderOrder ? s18.renderOrder - e11.renderOrder : s18.z !== e11.z ? e11.z - s18.z : s18.id - e11.id;
}
function mc2() {
  const s18 = [];
  let e11 = 0;
  const t19 = [], i27 = [], r24 = [];
  function n33() {
    e11 = 0, t19.length = 0, i27.length = 0, r24.length = 0;
  }
  function a22(u35, d34, m33, _19, y33, f39) {
    let p26 = s18[e11];
    return p26 === void 0 ? (p26 = {
      id: u35.id,
      object: u35,
      geometry: d34,
      material: m33,
      groupOrder: _19,
      renderOrder: u35.renderOrder,
      z: y33,
      group: f39
    }, s18[e11] = p26) : (p26.id = u35.id, p26.object = u35, p26.geometry = d34, p26.material = m33, p26.groupOrder = _19, p26.renderOrder = u35.renderOrder, p26.z = y33, p26.group = f39), e11++, p26;
  }
  function o12(u35, d34, m33, _19, y33, f39) {
    const p26 = a22(u35, d34, m33, _19, y33, f39);
    m33.transmission > 0 ? i27.push(p26) : m33.transparent === true ? r24.push(p26) : t19.push(p26);
  }
  function l25(u35, d34, m33, _19, y33, f39) {
    const p26 = a22(u35, d34, m33, _19, y33, f39);
    m33.transmission > 0 ? i27.unshift(p26) : m33.transparent === true ? r24.unshift(p26) : t19.unshift(p26);
  }
  function c27(u35, d34) {
    t19.length > 1 && t19.sort(u35 || qg2), i27.length > 1 && i27.sort(d34 || pc2), r24.length > 1 && r24.sort(d34 || pc2);
  }
  function h26() {
    for (let u35 = e11, d34 = s18.length; u35 < d34; u35++) {
      const m33 = s18[u35];
      if (m33.id === null)
        break;
      m33.id = null, m33.object = null, m33.geometry = null, m33.material = null, m33.group = null;
    }
  }
  return {
    opaque: t19,
    transmissive: i27,
    transparent: r24,
    init: n33,
    push: o12,
    unshift: l25,
    finish: h26,
    sort: c27
  };
}
function Yg2() {
  let s18 = /* @__PURE__ */ new WeakMap();
  function e11(i27, r24) {
    const n33 = s18.get(i27);
    let a22;
    return n33 === void 0 ? (a22 = new mc2(), s18.set(i27, [a22])) : r24 >= n33.length ? (a22 = new mc2(), n33.push(a22)) : a22 = n33[r24], a22;
  }
  function t19() {
    s18 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: e11,
    dispose: t19
  };
}
function Zg2() {
  const s18 = {};
  return {
    get: function(e11) {
      if (s18[e11.id] !== void 0)
        return s18[e11.id];
      let t19;
      switch (e11.type) {
        case "DirectionalLight":
          t19 = {
            direction: new k18(),
            color: new ze7()
          };
          break;
        case "SpotLight":
          t19 = {
            position: new k18(),
            direction: new k18(),
            color: new ze7(),
            distance: 0,
            coneCos: 0,
            penumbraCos: 0,
            decay: 0
          };
          break;
        case "PointLight":
          t19 = {
            position: new k18(),
            color: new ze7(),
            distance: 0,
            decay: 0
          };
          break;
        case "HemisphereLight":
          t19 = {
            direction: new k18(),
            skyColor: new ze7(),
            groundColor: new ze7()
          };
          break;
        case "RectAreaLight":
          t19 = {
            color: new ze7(),
            position: new k18(),
            halfWidth: new k18(),
            halfHeight: new k18()
          };
          break;
      }
      return s18[e11.id] = t19, t19;
    }
  };
}
function Jg2() {
  const s18 = {};
  return {
    get: function(e11) {
      if (s18[e11.id] !== void 0)
        return s18[e11.id];
      let t19;
      switch (e11.type) {
        case "DirectionalLight":
          t19 = {
            shadowBias: 0,
            shadowNormalBias: 0,
            shadowRadius: 1,
            shadowMapSize: new We7()
          };
          break;
        case "SpotLight":
          t19 = {
            shadowBias: 0,
            shadowNormalBias: 0,
            shadowRadius: 1,
            shadowMapSize: new We7()
          };
          break;
        case "PointLight":
          t19 = {
            shadowBias: 0,
            shadowNormalBias: 0,
            shadowRadius: 1,
            shadowMapSize: new We7(),
            shadowCameraNear: 1,
            shadowCameraFar: 1e3
          };
          break;
      }
      return s18[e11.id] = t19, t19;
    }
  };
}
var Kg2 = 0;
function $g2(s18, e11) {
  return (e11.castShadow ? 2 : 0) - (s18.castShadow ? 2 : 0) + (e11.map ? 1 : 0) - (s18.map ? 1 : 0);
}
function Qg2(s18, e11) {
  const t19 = new Zg2(), i27 = Jg2(), r24 = {
    version: 0,
    hash: {
      directionalLength: -1,
      pointLength: -1,
      spotLength: -1,
      rectAreaLength: -1,
      hemiLength: -1,
      numDirectionalShadows: -1,
      numPointShadows: -1,
      numSpotShadows: -1,
      numSpotMaps: -1
    },
    ambient: [0, 0, 0],
    probe: [],
    directional: [],
    directionalShadow: [],
    directionalShadowMap: [],
    directionalShadowMatrix: [],
    spot: [],
    spotLightMap: [],
    spotShadow: [],
    spotShadowMap: [],
    spotLightMatrix: [],
    rectArea: [],
    rectAreaLTC1: null,
    rectAreaLTC2: null,
    point: [],
    pointShadow: [],
    pointShadowMap: [],
    pointShadowMatrix: [],
    hemi: [],
    numSpotLightShadowsWithMaps: 0
  };
  for (let h26 = 0; h26 < 9; h26++)
    r24.probe.push(new k18());
  const n33 = new k18(), a22 = new He6(), o12 = new He6();
  function l25(h26, u35) {
    let d34 = 0, m33 = 0, _19 = 0;
    for (let G15 = 0; G15 < 9; G15++)
      r24.probe[G15].set(0, 0, 0);
    let y33 = 0, f39 = 0, p26 = 0, A17 = 0, M12 = 0, E24 = 0, w29 = 0, I16 = 0, D17 = 0, P19 = 0;
    h26.sort($g2);
    const x34 = u35 === true ? Math.PI : 1;
    for (let G15 = 0, z19 = h26.length; G15 < z19; G15++) {
      const U18 = h26[G15], V14 = U18.color, j18 = U18.intensity, W8 = U18.distance, re8 = U18.shadow && U18.shadow.map ? U18.shadow.map.texture : null;
      if (U18.isAmbientLight)
        d34 += V14.r * j18 * x34, m33 += V14.g * j18 * x34, _19 += V14.b * j18 * x34;
      else if (U18.isLightProbe)
        for (let $24 = 0; $24 < 9; $24++)
          r24.probe[$24].addScaledVector(U18.sh.coefficients[$24], j18);
      else if (U18.isDirectionalLight) {
        const $24 = t19.get(U18);
        if ($24.color.copy(U18.color).multiplyScalar(U18.intensity * x34), U18.castShadow) {
          const ie8 = U18.shadow, le7 = i27.get(U18);
          le7.shadowBias = ie8.bias, le7.shadowNormalBias = ie8.normalBias, le7.shadowRadius = ie8.radius, le7.shadowMapSize = ie8.mapSize, r24.directionalShadow[y33] = le7, r24.directionalShadowMap[y33] = re8, r24.directionalShadowMatrix[y33] = U18.shadow.matrix, E24++;
        }
        r24.directional[y33] = $24, y33++;
      } else if (U18.isSpotLight) {
        const $24 = t19.get(U18);
        $24.position.setFromMatrixPosition(U18.matrixWorld), $24.color.copy(V14).multiplyScalar(j18 * x34), $24.distance = W8, $24.coneCos = Math.cos(U18.angle), $24.penumbraCos = Math.cos(U18.angle * (1 - U18.penumbra)), $24.decay = U18.decay, r24.spot[p26] = $24;
        const ie8 = U18.shadow;
        if (U18.map && (r24.spotLightMap[D17] = U18.map, D17++, ie8.updateMatrices(U18), U18.castShadow && P19++), r24.spotLightMatrix[p26] = ie8.matrix, U18.castShadow) {
          const le7 = i27.get(U18);
          le7.shadowBias = ie8.bias, le7.shadowNormalBias = ie8.normalBias, le7.shadowRadius = ie8.radius, le7.shadowMapSize = ie8.mapSize, r24.spotShadow[p26] = le7, r24.spotShadowMap[p26] = re8, I16++;
        }
        p26++;
      } else if (U18.isRectAreaLight) {
        const $24 = t19.get(U18);
        $24.color.copy(V14).multiplyScalar(j18), $24.halfWidth.set(U18.width * 0.5, 0, 0), $24.halfHeight.set(0, U18.height * 0.5, 0), r24.rectArea[A17] = $24, A17++;
      } else if (U18.isPointLight) {
        const $24 = t19.get(U18);
        if ($24.color.copy(U18.color).multiplyScalar(U18.intensity * x34), $24.distance = U18.distance, $24.decay = U18.decay, U18.castShadow) {
          const ie8 = U18.shadow, le7 = i27.get(U18);
          le7.shadowBias = ie8.bias, le7.shadowNormalBias = ie8.normalBias, le7.shadowRadius = ie8.radius, le7.shadowMapSize = ie8.mapSize, le7.shadowCameraNear = ie8.camera.near, le7.shadowCameraFar = ie8.camera.far, r24.pointShadow[f39] = le7, r24.pointShadowMap[f39] = re8, r24.pointShadowMatrix[f39] = U18.shadow.matrix, w29++;
        }
        r24.point[f39] = $24, f39++;
      } else if (U18.isHemisphereLight) {
        const $24 = t19.get(U18);
        $24.skyColor.copy(U18.color).multiplyScalar(j18 * x34), $24.groundColor.copy(U18.groundColor).multiplyScalar(j18 * x34), r24.hemi[M12] = $24, M12++;
      }
    }
    A17 > 0 && (e11.isWebGL2 || s18.has("OES_texture_float_linear") === true ? (r24.rectAreaLTC1 = ve7.LTC_FLOAT_1, r24.rectAreaLTC2 = ve7.LTC_FLOAT_2) : s18.has("OES_texture_half_float_linear") === true ? (r24.rectAreaLTC1 = ve7.LTC_HALF_1, r24.rectAreaLTC2 = ve7.LTC_HALF_2) : console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")), r24.ambient[0] = d34, r24.ambient[1] = m33, r24.ambient[2] = _19;
    const C19 = r24.hash;
    (C19.directionalLength !== y33 || C19.pointLength !== f39 || C19.spotLength !== p26 || C19.rectAreaLength !== A17 || C19.hemiLength !== M12 || C19.numDirectionalShadows !== E24 || C19.numPointShadows !== w29 || C19.numSpotShadows !== I16 || C19.numSpotMaps !== D17) && (r24.directional.length = y33, r24.spot.length = p26, r24.rectArea.length = A17, r24.point.length = f39, r24.hemi.length = M12, r24.directionalShadow.length = E24, r24.directionalShadowMap.length = E24, r24.pointShadow.length = w29, r24.pointShadowMap.length = w29, r24.spotShadow.length = I16, r24.spotShadowMap.length = I16, r24.directionalShadowMatrix.length = E24, r24.pointShadowMatrix.length = w29, r24.spotLightMatrix.length = I16 + D17 - P19, r24.spotLightMap.length = D17, r24.numSpotLightShadowsWithMaps = P19, C19.directionalLength = y33, C19.pointLength = f39, C19.spotLength = p26, C19.rectAreaLength = A17, C19.hemiLength = M12, C19.numDirectionalShadows = E24, C19.numPointShadows = w29, C19.numSpotShadows = I16, C19.numSpotMaps = D17, r24.version = Kg2++);
  }
  function c27(h26, u35) {
    let d34 = 0, m33 = 0, _19 = 0, y33 = 0, f39 = 0;
    const p26 = u35.matrixWorldInverse;
    for (let A17 = 0, M12 = h26.length; A17 < M12; A17++) {
      const E24 = h26[A17];
      if (E24.isDirectionalLight) {
        const w29 = r24.directional[d34];
        w29.direction.setFromMatrixPosition(E24.matrixWorld), n33.setFromMatrixPosition(E24.target.matrixWorld), w29.direction.sub(n33), w29.direction.transformDirection(p26), d34++;
      } else if (E24.isSpotLight) {
        const w29 = r24.spot[_19];
        w29.position.setFromMatrixPosition(E24.matrixWorld), w29.position.applyMatrix4(p26), w29.direction.setFromMatrixPosition(E24.matrixWorld), n33.setFromMatrixPosition(E24.target.matrixWorld), w29.direction.sub(n33), w29.direction.transformDirection(p26), _19++;
      } else if (E24.isRectAreaLight) {
        const w29 = r24.rectArea[y33];
        w29.position.setFromMatrixPosition(E24.matrixWorld), w29.position.applyMatrix4(p26), o12.identity(), a22.copy(E24.matrixWorld), a22.premultiply(p26), o12.extractRotation(a22), w29.halfWidth.set(E24.width * 0.5, 0, 0), w29.halfHeight.set(0, E24.height * 0.5, 0), w29.halfWidth.applyMatrix4(o12), w29.halfHeight.applyMatrix4(o12), y33++;
      } else if (E24.isPointLight) {
        const w29 = r24.point[m33];
        w29.position.setFromMatrixPosition(E24.matrixWorld), w29.position.applyMatrix4(p26), m33++;
      } else if (E24.isHemisphereLight) {
        const w29 = r24.hemi[f39];
        w29.direction.setFromMatrixPosition(E24.matrixWorld), w29.direction.transformDirection(p26), f39++;
      }
    }
  }
  return {
    setup: l25,
    setupView: c27,
    state: r24
  };
}
function fc2(s18, e11) {
  const t19 = new Qg2(s18, e11), i27 = [], r24 = [];
  function n33() {
    i27.length = 0, r24.length = 0;
  }
  function a22(h26) {
    i27.push(h26);
  }
  function o12(h26) {
    r24.push(h26);
  }
  function l25(h26) {
    t19.setup(i27, h26);
  }
  function c27(h26) {
    t19.setupView(i27, h26);
  }
  return {
    init: n33,
    state: {
      lightsArray: i27,
      shadowsArray: r24,
      lights: t19
    },
    setupLights: l25,
    setupLightsView: c27,
    pushLight: a22,
    pushShadow: o12
  };
}
function e02(s18, e11) {
  let t19 = /* @__PURE__ */ new WeakMap();
  function i27(n33, a22 = 0) {
    const o12 = t19.get(n33);
    let l25;
    return o12 === void 0 ? (l25 = new fc2(s18, e11), t19.set(n33, [l25])) : a22 >= o12.length ? (l25 = new fc2(s18, e11), o12.push(l25)) : l25 = o12[a22], l25;
  }
  function r24() {
    t19 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: i27,
    dispose: r24
  };
}
var t02 = class extends pi6 {
  constructor(e11) {
    super(), this.isMeshDepthMaterial = true, this.type = "MeshDepthMaterial", this.depthPacking = Ku2, this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.wireframe = false, this.wireframeLinewidth = 1, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.depthPacking = e11.depthPacking, this.map = e11.map, this.alphaMap = e11.alphaMap, this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this;
  }
};
var i02 = class extends pi6 {
  constructor(e11) {
    super(), this.isMeshDistanceMaterial = true, this.type = "MeshDistanceMaterial", this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.map = e11.map, this.alphaMap = e11.alphaMap, this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this;
  }
};
var r02 = `void main() {
	gl_Position = vec4( position, 1.0 );
}`;
var n02 = `uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;
function s02(s18, e11, t19) {
  let i27 = new Po2();
  const r24 = new We7(), n33 = new We7(), a22 = new gt11(), o12 = new t02({ depthPacking: $u }), l25 = new i02(), c27 = {}, h26 = t19.maxTextureSize, u35 = { [Ei5]: ti6, [ti6]: Ei5, [ui6]: ui6 }, d34 = new wr5({
    defines: {
      VSM_SAMPLES: 8
    },
    uniforms: {
      shadow_pass: { value: null },
      resolution: { value: new We7() },
      radius: { value: 4 }
    },
    vertexShader: r02,
    fragmentShader: n02
  }), m33 = d34.clone();
  m33.defines.HORIZONTAL_PASS = 1;
  const _19 = new Xt6();
  _19.setAttribute(
    "position",
    new Ft6(
      new Float32Array([-1, -1, 0.5, 3, -1, 0.5, -1, 3, 0.5]),
      3
    )
  );
  const y33 = new Rt8(_19, d34), f39 = this;
  this.enabled = false, this.autoUpdate = true, this.needsUpdate = false, this.type = ih2, this.render = function(E24, w29, I16) {
    if (f39.enabled === false || f39.autoUpdate === false && f39.needsUpdate === false || E24.length === 0)
      return;
    const D17 = s18.getRenderTarget(), P19 = s18.getActiveCubeFace(), x34 = s18.getActiveMipmapLevel(), C19 = s18.state;
    C19.setBlending(tr5), C19.buffers.color.setClear(1, 1, 1, 1), C19.buffers.depth.setTest(true), C19.setScissorTest(false);
    for (let G15 = 0, z19 = E24.length; G15 < z19; G15++) {
      const U18 = E24[G15], V14 = U18.shadow;
      if (V14 === void 0) {
        console.warn("THREE.WebGLShadowMap:", U18, "has no shadow.");
        continue;
      }
      if (V14.autoUpdate === false && V14.needsUpdate === false)
        continue;
      r24.copy(V14.mapSize);
      const j18 = V14.getFrameExtents();
      if (r24.multiply(j18), n33.copy(V14.mapSize), (r24.x > h26 || r24.y > h26) && (r24.x > h26 && (n33.x = Math.floor(h26 / j18.x), r24.x = n33.x * j18.x, V14.mapSize.x = n33.x), r24.y > h26 && (n33.y = Math.floor(h26 / j18.y), r24.y = n33.y * j18.y, V14.mapSize.y = n33.y)), V14.map === null) {
        const re8 = this.type !== Xn5 ? { minFilter: zt6, magFilter: zt6 } : {};
        V14.map = new Mr5(r24.x, r24.y, re8), V14.map.texture.name = U18.name + ".shadowMap", V14.camera.updateProjectionMatrix();
      }
      s18.setRenderTarget(V14.map), s18.clear();
      const W8 = V14.getViewportCount();
      for (let re8 = 0; re8 < W8; re8++) {
        const $24 = V14.getViewport(re8);
        a22.set(
          n33.x * $24.x,
          n33.y * $24.y,
          n33.x * $24.z,
          n33.y * $24.w
        ), C19.viewport(a22), V14.updateMatrices(U18, re8), i27 = V14.getFrustum(), M12(w29, I16, V14.camera, U18, this.type);
      }
      V14.isPointLightShadow !== true && this.type === Xn5 && p26(V14, I16), V14.needsUpdate = false;
    }
    f39.needsUpdate = false, s18.setRenderTarget(D17, P19, x34);
  };
  function p26(E24, w29) {
    const I16 = e11.update(y33);
    d34.defines.VSM_SAMPLES !== E24.blurSamples && (d34.defines.VSM_SAMPLES = E24.blurSamples, m33.defines.VSM_SAMPLES = E24.blurSamples, d34.needsUpdate = true, m33.needsUpdate = true), E24.mapPass === null && (E24.mapPass = new Mr5(r24.x, r24.y)), d34.uniforms.shadow_pass.value = E24.map.texture, d34.uniforms.resolution.value = E24.mapSize, d34.uniforms.radius.value = E24.radius, s18.setRenderTarget(E24.mapPass), s18.clear(), s18.renderBufferDirect(w29, null, I16, d34, y33, null), m33.uniforms.shadow_pass.value = E24.mapPass.texture, m33.uniforms.resolution.value = E24.mapSize, m33.uniforms.radius.value = E24.radius, s18.setRenderTarget(E24.map), s18.clear(), s18.renderBufferDirect(w29, null, I16, m33, y33, null);
  }
  function A17(E24, w29, I16, D17) {
    let P19 = null;
    const x34 = I16.isPointLight === true ? E24.customDistanceMaterial : E24.customDepthMaterial;
    if (x34 !== void 0)
      P19 = x34;
    else if (P19 = I16.isPointLight === true ? l25 : o12, s18.localClippingEnabled && w29.clipShadows === true && Array.isArray(w29.clippingPlanes) && w29.clippingPlanes.length !== 0 || w29.displacementMap && w29.displacementScale !== 0 || w29.alphaMap && w29.alphaTest > 0 || w29.map && w29.alphaTest > 0) {
      const C19 = P19.uuid, G15 = w29.uuid;
      let z19 = c27[C19];
      z19 === void 0 && (z19 = {}, c27[C19] = z19);
      let U18 = z19[G15];
      U18 === void 0 && (U18 = P19.clone(), z19[G15] = U18), P19 = U18;
    }
    if (P19.visible = w29.visible, P19.wireframe = w29.wireframe, D17 === Xn5 ? P19.side = w29.shadowSide !== null ? w29.shadowSide : w29.side : P19.side = w29.shadowSide !== null ? w29.shadowSide : u35[w29.side], P19.alphaMap = w29.alphaMap, P19.alphaTest = w29.alphaTest, P19.map = w29.map, P19.clipShadows = w29.clipShadows, P19.clippingPlanes = w29.clippingPlanes, P19.clipIntersection = w29.clipIntersection, P19.displacementMap = w29.displacementMap, P19.displacementScale = w29.displacementScale, P19.displacementBias = w29.displacementBias, P19.wireframeLinewidth = w29.wireframeLinewidth, P19.linewidth = w29.linewidth, I16.isPointLight === true && P19.isMeshDistanceMaterial === true) {
      const C19 = s18.properties.get(P19);
      C19.light = I16;
    }
    return P19;
  }
  function M12(E24, w29, I16, D17, P19) {
    if (E24.visible === false)
      return;
    if (E24.layers.test(w29.layers) && (E24.isMesh || E24.isLine || E24.isPoints) && (E24.castShadow || E24.receiveShadow && P19 === Xn5) && (!E24.frustumCulled || i27.intersectsObject(E24))) {
      E24.modelViewMatrix.multiplyMatrices(I16.matrixWorldInverse, E24.matrixWorld);
      const C19 = e11.update(E24), G15 = E24.material;
      if (Array.isArray(G15)) {
        const z19 = C19.groups;
        for (let U18 = 0, V14 = z19.length; U18 < V14; U18++) {
          const j18 = z19[U18], W8 = G15[j18.materialIndex];
          if (W8 && W8.visible) {
            const re8 = A17(E24, W8, D17, P19);
            s18.renderBufferDirect(I16, null, C19, re8, E24, j18);
          }
        }
      } else if (G15.visible) {
        const z19 = A17(E24, G15, D17, P19);
        s18.renderBufferDirect(I16, null, C19, z19, E24, null);
      }
    }
    const x34 = E24.children;
    for (let C19 = 0, G15 = x34.length; C19 < G15; C19++)
      M12(x34[C19], w29, I16, D17, P19);
  }
}
function a02(s18, e11, t19) {
  const i27 = t19.isWebGL2;
  function r24() {
    let B21 = false;
    const te7 = new gt11();
    let ce9 = null;
    const Me7 = new gt11(0, 0, 0, 0);
    return {
      setMask: function(Ue7) {
        ce9 !== Ue7 && !B21 && (s18.colorMask(Ue7, Ue7, Ue7, Ue7), ce9 = Ue7);
      },
      setLocked: function(Ue7) {
        B21 = Ue7;
      },
      setClear: function(Ue7, dt13, bt9, Nt9, Mi5) {
        Mi5 === true && (Ue7 *= Nt9, dt13 *= Nt9, bt9 *= Nt9), te7.set(Ue7, dt13, bt9, Nt9), Me7.equals(te7) === false && (s18.clearColor(Ue7, dt13, bt9, Nt9), Me7.copy(te7));
      },
      reset: function() {
        B21 = false, ce9 = null, Me7.set(-1, 0, 0, 0);
      }
    };
  }
  function n33() {
    let B21 = false, te7 = null, ce9 = null, Me7 = null;
    return {
      setTest: function(Ue7) {
        Ue7 ? F17(2929) : ye7(2929);
      },
      setMask: function(Ue7) {
        te7 !== Ue7 && !B21 && (s18.depthMask(Ue7), te7 = Ue7);
      },
      setFunc: function(Ue7) {
        if (ce9 !== Ue7) {
          switch (Ue7) {
            case xu2:
              s18.depthFunc(512);
              break;
            case bu2:
              s18.depthFunc(519);
              break;
            case Mu2:
              s18.depthFunc(513);
              break;
            case ho2:
              s18.depthFunc(515);
              break;
            case wu2:
              s18.depthFunc(514);
              break;
            case Su2:
              s18.depthFunc(518);
              break;
            case Tu2:
              s18.depthFunc(516);
              break;
            case Eu2:
              s18.depthFunc(517);
              break;
            default:
              s18.depthFunc(515);
          }
          ce9 = Ue7;
        }
      },
      setLocked: function(Ue7) {
        B21 = Ue7;
      },
      setClear: function(Ue7) {
        Me7 !== Ue7 && (s18.clearDepth(Ue7), Me7 = Ue7);
      },
      reset: function() {
        B21 = false, te7 = null, ce9 = null, Me7 = null;
      }
    };
  }
  function a22() {
    let B21 = false, te7 = null, ce9 = null, Me7 = null, Ue7 = null, dt13 = null, bt9 = null, Nt9 = null, Mi5 = null;
    return {
      setTest: function(it14) {
        B21 || (it14 ? F17(2960) : ye7(2960));
      },
      setMask: function(it14) {
        te7 !== it14 && !B21 && (s18.stencilMask(it14), te7 = it14);
      },
      setFunc: function(it14, Jt7, ai7) {
        (ce9 !== it14 || Me7 !== Jt7 || Ue7 !== ai7) && (s18.stencilFunc(it14, Jt7, ai7), ce9 = it14, Me7 = Jt7, Ue7 = ai7);
      },
      setOp: function(it14, Jt7, ai7) {
        (dt13 !== it14 || bt9 !== Jt7 || Nt9 !== ai7) && (s18.stencilOp(it14, Jt7, ai7), dt13 = it14, bt9 = Jt7, Nt9 = ai7);
      },
      setLocked: function(it14) {
        B21 = it14;
      },
      setClear: function(it14) {
        Mi5 !== it14 && (s18.clearStencil(it14), Mi5 = it14);
      },
      reset: function() {
        B21 = false, te7 = null, ce9 = null, Me7 = null, Ue7 = null, dt13 = null, bt9 = null, Nt9 = null, Mi5 = null;
      }
    };
  }
  const o12 = new r24(), l25 = new n33(), c27 = new a22(), h26 = /* @__PURE__ */ new WeakMap(), u35 = /* @__PURE__ */ new WeakMap();
  let d34 = {}, m33 = {}, _19 = /* @__PURE__ */ new WeakMap(), y33 = [], f39 = null, p26 = false, A17 = null, M12 = null, E24 = null, w29 = null, I16 = null, D17 = null, P19 = null, x34 = false, C19 = null, G15 = null, z19 = null, U18 = null, V14 = null;
  const j18 = s18.getParameter(35661);
  let W8 = false, re8 = 0;
  const $24 = s18.getParameter(7938);
  $24.indexOf("WebGL") !== -1 ? (re8 = parseFloat(/^WebGL (\d)/.exec($24)[1]), W8 = re8 >= 1) : $24.indexOf("OpenGL ES") !== -1 && (re8 = parseFloat(/^OpenGL ES (\d)/.exec($24)[1]), W8 = re8 >= 2);
  let ie8 = null, le7 = {};
  const fe7 = s18.getParameter(3088), ue8 = s18.getParameter(2978), H15 = new gt11().fromArray(fe7), q13 = new gt11().fromArray(ue8);
  function oe7(B21, te7, ce9) {
    const Me7 = new Uint8Array(4), Ue7 = s18.createTexture();
    s18.bindTexture(B21, Ue7), s18.texParameteri(B21, 10241, 9728), s18.texParameteri(B21, 10240, 9728);
    for (let dt13 = 0; dt13 < ce9; dt13++)
      s18.texImage2D(te7 + dt13, 0, 6408, 1, 1, 0, 6408, 5121, Me7);
    return Ue7;
  }
  const K13 = {};
  K13[3553] = oe7(3553, 3553, 1), K13[34067] = oe7(34067, 34069, 6), o12.setClear(0, 0, 0, 1), l25.setClear(1), c27.setClear(0), F17(2929), l25.setFunc(ho2), vt8(false), St8(el2), F17(2884), je7(tr5);
  function F17(B21) {
    d34[B21] !== true && (s18.enable(B21), d34[B21] = true);
  }
  function ye7(B21) {
    d34[B21] !== false && (s18.disable(B21), d34[B21] = false);
  }
  function Le7(B21, te7) {
    return m33[B21] !== te7 ? (s18.bindFramebuffer(B21, te7), m33[B21] = te7, i27 && (B21 === 36009 && (m33[36160] = te7), B21 === 36160 && (m33[36009] = te7)), true) : false;
  }
  function me9(B21, te7) {
    let ce9 = y33, Me7 = false;
    if (B21)
      if (ce9 = _19.get(te7), ce9 === void 0 && (ce9 = [], _19.set(te7, ce9)), B21.isWebGLMultipleRenderTargets) {
        const Ue7 = B21.texture;
        if (ce9.length !== Ue7.length || ce9[0] !== 36064) {
          for (let dt13 = 0, bt9 = Ue7.length; dt13 < bt9; dt13++)
            ce9[dt13] = 36064 + dt13;
          ce9.length = Ue7.length, Me7 = true;
        }
      } else
        ce9[0] !== 36064 && (ce9[0] = 36064, Me7 = true);
    else
      ce9[0] !== 1029 && (ce9[0] = 1029, Me7 = true);
    Me7 && (t19.isWebGL2 ? s18.drawBuffers(ce9) : e11.get("WEBGL_draw_buffers").drawBuffersWEBGL(ce9));
  }
  function De6(B21) {
    return f39 !== B21 ? (s18.useProgram(B21), f39 = B21, true) : false;
  }
  const tt10 = {
    [on4]: 32774,
    [cu2]: 32778,
    [hu2]: 32779
  };
  if (i27)
    tt10[nl2] = 32775, tt10[sl2] = 32776;
  else {
    const B21 = e11.get("EXT_blend_minmax");
    B21 !== null && (tt10[nl2] = B21.MIN_EXT, tt10[sl2] = B21.MAX_EXT);
  }
  const Pe6 = {
    [uu2]: 0,
    [du2]: 1,
    [pu2]: 768,
    [rh2]: 770,
    [yu2]: 776,
    [_u2]: 774,
    [fu2]: 772,
    [mu2]: 769,
    [nh2]: 771,
    [vu2]: 775,
    [gu2]: 773
  };
  function je7(B21, te7, ce9, Me7, Ue7, dt13, bt9, Nt9) {
    if (B21 === tr5) {
      p26 === true && (ye7(3042), p26 = false);
      return;
    }
    if (p26 === false && (F17(3042), p26 = true), B21 !== lu2) {
      if (B21 !== A17 || Nt9 !== x34) {
        if ((M12 !== on4 || I16 !== on4) && (s18.blendEquation(32774), M12 = on4, I16 = on4), Nt9)
          switch (B21) {
            case un4:
              s18.blendFuncSeparate(1, 771, 1, 771);
              break;
            case tl2:
              s18.blendFunc(1, 1);
              break;
            case il2:
              s18.blendFuncSeparate(0, 769, 0, 1);
              break;
            case rl2:
              s18.blendFuncSeparate(0, 768, 0, 770);
              break;
            default:
              console.error("THREE.WebGLState: Invalid blending: ", B21);
              break;
          }
        else
          switch (B21) {
            case un4:
              s18.blendFuncSeparate(770, 771, 1, 771);
              break;
            case tl2:
              s18.blendFunc(770, 1);
              break;
            case il2:
              s18.blendFuncSeparate(0, 769, 0, 1);
              break;
            case rl2:
              s18.blendFunc(0, 768);
              break;
            default:
              console.error("THREE.WebGLState: Invalid blending: ", B21);
              break;
          }
        E24 = null, w29 = null, D17 = null, P19 = null, A17 = B21, x34 = Nt9;
      }
      return;
    }
    Ue7 = Ue7 || te7, dt13 = dt13 || ce9, bt9 = bt9 || Me7, (te7 !== M12 || Ue7 !== I16) && (s18.blendEquationSeparate(tt10[te7], tt10[Ue7]), M12 = te7, I16 = Ue7), (ce9 !== E24 || Me7 !== w29 || dt13 !== D17 || bt9 !== P19) && (s18.blendFuncSeparate(Pe6[ce9], Pe6[Me7], Pe6[dt13], Pe6[bt9]), E24 = ce9, w29 = Me7, D17 = dt13, P19 = bt9), A17 = B21, x34 = false;
  }
  function Mt10(B21, te7) {
    B21.side === ui6 ? ye7(2884) : F17(2884);
    let ce9 = B21.side === ti6;
    te7 && (ce9 = !ce9), vt8(ce9), B21.blending === un4 && B21.transparent === false ? je7(tr5) : je7(B21.blending, B21.blendEquation, B21.blendSrc, B21.blendDst, B21.blendEquationAlpha, B21.blendSrcAlpha, B21.blendDstAlpha, B21.premultipliedAlpha), l25.setFunc(B21.depthFunc), l25.setTest(B21.depthTest), l25.setMask(B21.depthWrite), o12.setMask(B21.colorWrite);
    const Me7 = B21.stencilWrite;
    c27.setTest(Me7), Me7 && (c27.setMask(B21.stencilWriteMask), c27.setFunc(B21.stencilFunc, B21.stencilRef, B21.stencilFuncMask), c27.setOp(B21.stencilFail, B21.stencilZFail, B21.stencilZPass)), $e6(B21.polygonOffset, B21.polygonOffsetFactor, B21.polygonOffsetUnits), B21.alphaToCoverage === true ? F17(32926) : ye7(32926);
  }
  function vt8(B21) {
    C19 !== B21 && (B21 ? s18.frontFace(2304) : s18.frontFace(2305), C19 = B21);
  }
  function St8(B21) {
    B21 !== su2 ? (F17(2884), B21 !== G15 && (B21 === el2 ? s18.cullFace(1029) : B21 === au2 ? s18.cullFace(1028) : s18.cullFace(1032))) : ye7(2884), G15 = B21;
  }
  function Tt9(B21) {
    B21 !== z19 && (W8 && s18.lineWidth(B21), z19 = B21);
  }
  function $e6(B21, te7, ce9) {
    B21 ? (F17(32823), (U18 !== te7 || V14 !== ce9) && (s18.polygonOffset(te7, ce9), U18 = te7, V14 = ce9)) : ye7(32823);
  }
  function ot13(B21) {
    B21 ? F17(3089) : ye7(3089);
  }
  function kt10(B21) {
    B21 === void 0 && (B21 = 33984 + j18 - 1), ie8 !== B21 && (s18.activeTexture(B21), ie8 = B21);
  }
  function N19(B21, te7, ce9) {
    ce9 === void 0 && (ie8 === null ? ce9 = 33984 + j18 - 1 : ce9 = ie8);
    let Me7 = le7[ce9];
    Me7 === void 0 && (Me7 = { type: void 0, texture: void 0 }, le7[ce9] = Me7), (Me7.type !== B21 || Me7.texture !== te7) && (ie8 !== ce9 && (s18.activeTexture(ce9), ie8 = ce9), s18.bindTexture(B21, te7 || K13[B21]), Me7.type = B21, Me7.texture = te7);
  }
  function L11() {
    const B21 = le7[ie8];
    B21 !== void 0 && B21.type !== void 0 && (s18.bindTexture(B21.type, null), B21.type = void 0, B21.texture = void 0);
  }
  function Q11() {
    try {
      s18.compressedTexImage2D.apply(s18, arguments);
    } catch (B21) {
      console.error("THREE.WebGLState:", B21);
    }
  }
  function de9() {
    try {
      s18.compressedTexImage3D.apply(s18, arguments);
    } catch (B21) {
      console.error("THREE.WebGLState:", B21);
    }
  }
  function pe8() {
    try {
      s18.texSubImage2D.apply(s18, arguments);
    } catch (B21) {
      console.error("THREE.WebGLState:", B21);
    }
  }
  function _e7() {
    try {
      s18.texSubImage3D.apply(s18, arguments);
    } catch (B21) {
      console.error("THREE.WebGLState:", B21);
    }
  }
  function O20() {
    try {
      s18.compressedTexSubImage2D.apply(s18, arguments);
    } catch (B21) {
      console.error("THREE.WebGLState:", B21);
    }
  }
  function ae7() {
    try {
      s18.compressedTexSubImage3D.apply(s18, arguments);
    } catch (B21) {
      console.error("THREE.WebGLState:", B21);
    }
  }
  function Z11() {
    try {
      s18.texStorage2D.apply(s18, arguments);
    } catch (B21) {
      console.error("THREE.WebGLState:", B21);
    }
  }
  function xe6() {
    try {
      s18.texStorage3D.apply(s18, arguments);
    } catch (B21) {
      console.error("THREE.WebGLState:", B21);
    }
  }
  function Ae6() {
    try {
      s18.texImage2D.apply(s18, arguments);
    } catch (B21) {
      console.error("THREE.WebGLState:", B21);
    }
  }
  function Ce7() {
    try {
      s18.texImage3D.apply(s18, arguments);
    } catch (B21) {
      console.error("THREE.WebGLState:", B21);
    }
  }
  function we8(B21) {
    H15.equals(B21) === false && (s18.scissor(B21.x, B21.y, B21.z, B21.w), H15.copy(B21));
  }
  function Se7(B21) {
    q13.equals(B21) === false && (s18.viewport(B21.x, B21.y, B21.z, B21.w), q13.copy(B21));
  }
  function Ve8(B21, te7) {
    let ce9 = u35.get(te7);
    ce9 === void 0 && (ce9 = /* @__PURE__ */ new WeakMap(), u35.set(te7, ce9));
    let Me7 = ce9.get(B21);
    Me7 === void 0 && (Me7 = s18.getUniformBlockIndex(te7, B21.name), ce9.set(B21, Me7));
  }
  function nt14(B21, te7) {
    const ce9 = u35.get(te7).get(B21);
    h26.get(te7) !== ce9 && (s18.uniformBlockBinding(te7, ce9, B21.__bindingPointIndex), h26.set(te7, ce9));
  }
  function wt9() {
    s18.disable(3042), s18.disable(2884), s18.disable(2929), s18.disable(32823), s18.disable(3089), s18.disable(2960), s18.disable(32926), s18.blendEquation(32774), s18.blendFunc(1, 0), s18.blendFuncSeparate(1, 0, 1, 0), s18.colorMask(true, true, true, true), s18.clearColor(0, 0, 0, 0), s18.depthMask(true), s18.depthFunc(513), s18.clearDepth(1), s18.stencilMask(4294967295), s18.stencilFunc(519, 0, 4294967295), s18.stencilOp(7680, 7680, 7680), s18.clearStencil(0), s18.cullFace(1029), s18.frontFace(2305), s18.polygonOffset(0, 0), s18.activeTexture(33984), s18.bindFramebuffer(36160, null), i27 === true && (s18.bindFramebuffer(36009, null), s18.bindFramebuffer(36008, null)), s18.useProgram(null), s18.lineWidth(1), s18.scissor(0, 0, s18.canvas.width, s18.canvas.height), s18.viewport(0, 0, s18.canvas.width, s18.canvas.height), d34 = {}, ie8 = null, le7 = {}, m33 = {}, _19 = /* @__PURE__ */ new WeakMap(), y33 = [], f39 = null, p26 = false, A17 = null, M12 = null, E24 = null, w29 = null, I16 = null, D17 = null, P19 = null, x34 = false, C19 = null, G15 = null, z19 = null, U18 = null, V14 = null, H15.set(0, 0, s18.canvas.width, s18.canvas.height), q13.set(0, 0, s18.canvas.width, s18.canvas.height), o12.reset(), l25.reset(), c27.reset();
  }
  return {
    buffers: {
      color: o12,
      depth: l25,
      stencil: c27
    },
    enable: F17,
    disable: ye7,
    bindFramebuffer: Le7,
    drawBuffers: me9,
    useProgram: De6,
    setBlending: je7,
    setMaterial: Mt10,
    setFlipSided: vt8,
    setCullFace: St8,
    setLineWidth: Tt9,
    setPolygonOffset: $e6,
    setScissorTest: ot13,
    activeTexture: kt10,
    bindTexture: N19,
    unbindTexture: L11,
    compressedTexImage2D: Q11,
    compressedTexImage3D: de9,
    texImage2D: Ae6,
    texImage3D: Ce7,
    updateUBOMapping: Ve8,
    uniformBlockBinding: nt14,
    texStorage2D: Z11,
    texStorage3D: xe6,
    texSubImage2D: pe8,
    texSubImage3D: _e7,
    compressedTexSubImage2D: O20,
    compressedTexSubImage3D: ae7,
    scissor: we8,
    viewport: Se7,
    reset: wt9
  };
}
function o02(s18, e11, t19, i27, r24, n33, a22) {
  const o12 = r24.isWebGL2, l25 = r24.maxTextures, c27 = r24.maxCubemapSize, h26 = r24.maxTextureSize, u35 = r24.maxSamples, d34 = e11.has("WEBGL_multisampled_render_to_texture") ? e11.get("WEBGL_multisampled_render_to_texture") : null, m33 = typeof navigator > "u" ? false : /OculusBrowser/g.test(navigator.userAgent), _19 = /* @__PURE__ */ new WeakMap();
  let y33;
  const f39 = /* @__PURE__ */ new WeakMap();
  let p26 = false;
  try {
    p26 = typeof OffscreenCanvas < "u" && new OffscreenCanvas(1, 1).getContext("2d") !== null;
  } catch {
  }
  function A17(N19, L11) {
    return p26 ? (
      // eslint-disable-next-line compat/compat
      new OffscreenCanvas(N19, L11)
    ) : es3("canvas");
  }
  function M12(N19, L11, Q11, de9) {
    let pe8 = 1;
    if ((N19.width > de9 || N19.height > de9) && (pe8 = de9 / Math.max(N19.width, N19.height)), pe8 < 1 || L11 === true)
      if (typeof HTMLImageElement < "u" && N19 instanceof HTMLImageElement || typeof HTMLCanvasElement < "u" && N19 instanceof HTMLCanvasElement || typeof ImageBitmap < "u" && N19 instanceof ImageBitmap) {
        const _e7 = L11 ? uh2 : Math.floor, O20 = _e7(pe8 * N19.width), ae7 = _e7(pe8 * N19.height);
        y33 === void 0 && (y33 = A17(O20, ae7));
        const Z11 = Q11 ? A17(O20, ae7) : y33;
        return Z11.width = O20, Z11.height = ae7, Z11.getContext("2d").drawImage(N19, 0, 0, O20, ae7), console.warn("THREE.WebGLRenderer: Texture has been resized from (" + N19.width + "x" + N19.height + ") to (" + O20 + "x" + ae7 + ")."), Z11;
      } else
        return "data" in N19 && console.warn("THREE.WebGLRenderer: Image in DataTexture is too big (" + N19.width + "x" + N19.height + ")."), N19;
    return N19;
  }
  function E24(N19) {
    return vo(N19.width) && vo(N19.height);
  }
  function w29(N19) {
    return o12 ? false : N19.wrapS !== Zt6 || N19.wrapT !== Zt6 || N19.minFilter !== zt6 && N19.minFilter !== Vt6;
  }
  function I16(N19, L11) {
    return N19.generateMipmaps && L11 && N19.minFilter !== zt6 && N19.minFilter !== Vt6;
  }
  function D17(N19) {
    s18.generateMipmap(N19);
  }
  function P19(N19, L11, Q11, de9, pe8 = false) {
    if (o12 === false)
      return L11;
    if (N19 !== null) {
      if (s18[N19] !== void 0)
        return s18[N19];
      console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '" + N19 + "'");
    }
    let _e7 = L11;
    return L11 === 6403 && (Q11 === 5126 && (_e7 = 33326), Q11 === 5131 && (_e7 = 33325), Q11 === 5121 && (_e7 = 33321)), L11 === 33319 && (Q11 === 5126 && (_e7 = 33328), Q11 === 5131 && (_e7 = 33327), Q11 === 5121 && (_e7 = 33323)), L11 === 6408 && (Q11 === 5126 && (_e7 = 34836), Q11 === 5131 && (_e7 = 34842), Q11 === 5121 && (_e7 = de9 === rt10 && pe8 === false ? 35907 : 32856), Q11 === 32819 && (_e7 = 32854), Q11 === 32820 && (_e7 = 32855)), (_e7 === 33325 || _e7 === 33326 || _e7 === 33327 || _e7 === 33328 || _e7 === 34842 || _e7 === 34836) && e11.get("EXT_color_buffer_float"), _e7;
  }
  function x34(N19, L11, Q11) {
    return I16(N19, Q11) === true || N19.isFramebufferTexture && N19.minFilter !== zt6 && N19.minFilter !== Vt6 ? Math.log2(Math.max(L11.width, L11.height)) + 1 : N19.mipmaps !== void 0 && N19.mipmaps.length > 0 ? N19.mipmaps.length : N19.isCompressedTexture && Array.isArray(N19.image) ? L11.mipmaps.length : 1;
  }
  function C19(N19) {
    return N19 === zt6 || N19 === mo2 || N19 === Zs2 ? 9728 : 9729;
  }
  function G15(N19) {
    const L11 = N19.target;
    L11.removeEventListener("dispose", G15), U18(L11), L11.isVideoTexture && _19.delete(L11);
  }
  function z19(N19) {
    const L11 = N19.target;
    L11.removeEventListener("dispose", z19), j18(L11);
  }
  function U18(N19) {
    const L11 = i27.get(N19);
    if (L11.__webglInit === void 0)
      return;
    const Q11 = N19.source, de9 = f39.get(Q11);
    if (de9) {
      const pe8 = de9[L11.__cacheKey];
      pe8.usedTimes--, pe8.usedTimes === 0 && V14(N19), Object.keys(de9).length === 0 && f39.delete(Q11);
    }
    i27.remove(N19);
  }
  function V14(N19) {
    const L11 = i27.get(N19);
    s18.deleteTexture(L11.__webglTexture);
    const Q11 = N19.source, de9 = f39.get(Q11);
    delete de9[L11.__cacheKey], a22.memory.textures--;
  }
  function j18(N19) {
    const L11 = N19.texture, Q11 = i27.get(N19), de9 = i27.get(L11);
    if (de9.__webglTexture !== void 0 && (s18.deleteTexture(de9.__webglTexture), a22.memory.textures--), N19.depthTexture && N19.depthTexture.dispose(), N19.isWebGLCubeRenderTarget)
      for (let pe8 = 0; pe8 < 6; pe8++)
        s18.deleteFramebuffer(Q11.__webglFramebuffer[pe8]), Q11.__webglDepthbuffer && s18.deleteRenderbuffer(Q11.__webglDepthbuffer[pe8]);
    else {
      if (s18.deleteFramebuffer(Q11.__webglFramebuffer), Q11.__webglDepthbuffer && s18.deleteRenderbuffer(Q11.__webglDepthbuffer), Q11.__webglMultisampledFramebuffer && s18.deleteFramebuffer(Q11.__webglMultisampledFramebuffer), Q11.__webglColorRenderbuffer)
        for (let pe8 = 0; pe8 < Q11.__webglColorRenderbuffer.length; pe8++)
          Q11.__webglColorRenderbuffer[pe8] && s18.deleteRenderbuffer(Q11.__webglColorRenderbuffer[pe8]);
      Q11.__webglDepthRenderbuffer && s18.deleteRenderbuffer(Q11.__webglDepthRenderbuffer);
    }
    if (N19.isWebGLMultipleRenderTargets)
      for (let pe8 = 0, _e7 = L11.length; pe8 < _e7; pe8++) {
        const O20 = i27.get(L11[pe8]);
        O20.__webglTexture && (s18.deleteTexture(O20.__webglTexture), a22.memory.textures--), i27.remove(L11[pe8]);
      }
    i27.remove(L11), i27.remove(N19);
  }
  let W8 = 0;
  function re8() {
    W8 = 0;
  }
  function $24() {
    const N19 = W8;
    return N19 >= l25 && console.warn("THREE.WebGLTextures: Trying to use " + N19 + " texture units while this GPU supports only " + l25), W8 += 1, N19;
  }
  function ie8(N19) {
    const L11 = [];
    return L11.push(N19.wrapS), L11.push(N19.wrapT), L11.push(N19.wrapR || 0), L11.push(N19.magFilter), L11.push(N19.minFilter), L11.push(N19.anisotropy), L11.push(N19.internalFormat), L11.push(N19.format), L11.push(N19.type), L11.push(N19.generateMipmaps), L11.push(N19.premultiplyAlpha), L11.push(N19.flipY), L11.push(N19.unpackAlignment), L11.push(N19.encoding), L11.join();
  }
  function le7(N19, L11) {
    const Q11 = i27.get(N19);
    if (N19.isVideoTexture && ot13(N19), N19.isRenderTargetTexture === false && N19.version > 0 && Q11.__version !== N19.version) {
      const de9 = N19.image;
      if (de9 === null)
        console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");
      else if (de9.complete === false)
        console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");
      else {
        ye7(Q11, N19, L11);
        return;
      }
    }
    t19.bindTexture(3553, Q11.__webglTexture, 33984 + L11);
  }
  function fe7(N19, L11) {
    const Q11 = i27.get(N19);
    if (N19.version > 0 && Q11.__version !== N19.version) {
      ye7(Q11, N19, L11);
      return;
    }
    t19.bindTexture(35866, Q11.__webglTexture, 33984 + L11);
  }
  function ue8(N19, L11) {
    const Q11 = i27.get(N19);
    if (N19.version > 0 && Q11.__version !== N19.version) {
      ye7(Q11, N19, L11);
      return;
    }
    t19.bindTexture(32879, Q11.__webglTexture, 33984 + L11);
  }
  function H15(N19, L11) {
    const Q11 = i27.get(N19);
    if (N19.version > 0 && Q11.__version !== N19.version) {
      Le7(Q11, N19, L11);
      return;
    }
    t19.bindTexture(34067, Q11.__webglTexture, 33984 + L11);
  }
  const q13 = {
    [Ti4]: 10497,
    [Zt6]: 33071,
    [ta2]: 33648
  }, oe7 = {
    [zt6]: 9728,
    [mo2]: 9984,
    [Zs2]: 9986,
    [Vt6]: 9729,
    [ah2]: 9985,
    [Hi3]: 9987
  };
  function K13(N19, L11, Q11) {
    if (Q11 ? (s18.texParameteri(N19, 10242, q13[L11.wrapS]), s18.texParameteri(N19, 10243, q13[L11.wrapT]), (N19 === 32879 || N19 === 35866) && s18.texParameteri(N19, 32882, q13[L11.wrapR]), s18.texParameteri(N19, 10240, oe7[L11.magFilter]), s18.texParameteri(N19, 10241, oe7[L11.minFilter])) : (s18.texParameteri(N19, 10242, 33071), s18.texParameteri(N19, 10243, 33071), (N19 === 32879 || N19 === 35866) && s18.texParameteri(N19, 32882, 33071), (L11.wrapS !== Zt6 || L11.wrapT !== Zt6) && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."), s18.texParameteri(N19, 10240, C19(L11.magFilter)), s18.texParameteri(N19, 10241, C19(L11.minFilter)), L11.minFilter !== zt6 && L11.minFilter !== Vt6 && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")), e11.has("EXT_texture_filter_anisotropic") === true) {
      const de9 = e11.get("EXT_texture_filter_anisotropic");
      if (L11.magFilter === zt6 || L11.minFilter !== Zs2 && L11.minFilter !== Hi3 || L11.type === er5 && e11.has("OES_texture_float_linear") === false || o12 === false && L11.type === $n5 && e11.has("OES_texture_half_float_linear") === false)
        return;
      (L11.anisotropy > 1 || i27.get(L11).__currentAnisotropy) && (s18.texParameterf(N19, de9.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(L11.anisotropy, r24.getMaxAnisotropy())), i27.get(L11).__currentAnisotropy = L11.anisotropy);
    }
  }
  function F17(N19, L11) {
    let Q11 = false;
    N19.__webglInit === void 0 && (N19.__webglInit = true, L11.addEventListener("dispose", G15));
    const de9 = L11.source;
    let pe8 = f39.get(de9);
    pe8 === void 0 && (pe8 = {}, f39.set(de9, pe8));
    const _e7 = ie8(L11);
    if (_e7 !== N19.__cacheKey) {
      pe8[_e7] === void 0 && (pe8[_e7] = {
        texture: s18.createTexture(),
        usedTimes: 0
      }, a22.memory.textures++, Q11 = true), pe8[_e7].usedTimes++;
      const O20 = pe8[N19.__cacheKey];
      O20 !== void 0 && (pe8[N19.__cacheKey].usedTimes--, O20.usedTimes === 0 && V14(L11)), N19.__cacheKey = _e7, N19.__webglTexture = pe8[_e7].texture;
    }
    return Q11;
  }
  function ye7(N19, L11, Q11) {
    let de9 = 3553;
    (L11.isDataArrayTexture || L11.isCompressedArrayTexture) && (de9 = 35866), L11.isData3DTexture && (de9 = 32879);
    const pe8 = F17(N19, L11), _e7 = L11.source;
    t19.bindTexture(de9, N19.__webglTexture, 33984 + Q11);
    const O20 = i27.get(_e7);
    if (_e7.version !== O20.__version || pe8 === true) {
      t19.activeTexture(33984 + Q11), s18.pixelStorei(37440, L11.flipY), s18.pixelStorei(37441, L11.premultiplyAlpha), s18.pixelStorei(3317, L11.unpackAlignment), s18.pixelStorei(37443, 0);
      const ae7 = w29(L11) && E24(L11.image) === false;
      let Z11 = M12(L11.image, ae7, false, h26);
      Z11 = kt10(L11, Z11);
      const xe6 = E24(Z11) || o12, Ae6 = n33.convert(L11.format, L11.encoding);
      let Ce7 = n33.convert(L11.type), we8 = P19(L11.internalFormat, Ae6, Ce7, L11.encoding, L11.isVideoTexture);
      K13(de9, L11, xe6);
      let Se7;
      const Ve8 = L11.mipmaps, nt14 = o12 && L11.isVideoTexture !== true, wt9 = O20.__version === void 0 || pe8 === true, B21 = x34(L11, Z11, xe6);
      if (L11.isDepthTexture)
        we8 = 6402, o12 ? L11.type === er5 ? we8 = 36012 : L11.type === pr4 ? we8 = 33190 : L11.type === dn4 ? we8 = 35056 : we8 = 33189 : L11.type === er5 && console.error("WebGLRenderer: Floating point depth texture requires WebGL2."), L11.format === vr5 && we8 === 6402 && L11.type !== oh2 && L11.type !== pr4 && (console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."), L11.type = pr4, Ce7 = n33.convert(L11.type)), L11.format === bn5 && we8 === 6402 && (we8 = 34041, L11.type !== dn4 && (console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."), L11.type = dn4, Ce7 = n33.convert(L11.type))), wt9 && (nt14 ? t19.texStorage2D(3553, 1, we8, Z11.width, Z11.height) : t19.texImage2D(3553, 0, we8, Z11.width, Z11.height, 0, Ae6, Ce7, null));
      else if (L11.isDataTexture)
        if (Ve8.length > 0 && xe6) {
          nt14 && wt9 && t19.texStorage2D(3553, B21, we8, Ve8[0].width, Ve8[0].height);
          for (let te7 = 0, ce9 = Ve8.length; te7 < ce9; te7++)
            Se7 = Ve8[te7], nt14 ? t19.texSubImage2D(3553, te7, 0, 0, Se7.width, Se7.height, Ae6, Ce7, Se7.data) : t19.texImage2D(3553, te7, we8, Se7.width, Se7.height, 0, Ae6, Ce7, Se7.data);
          L11.generateMipmaps = false;
        } else
          nt14 ? (wt9 && t19.texStorage2D(3553, B21, we8, Z11.width, Z11.height), t19.texSubImage2D(3553, 0, 0, 0, Z11.width, Z11.height, Ae6, Ce7, Z11.data)) : t19.texImage2D(3553, 0, we8, Z11.width, Z11.height, 0, Ae6, Ce7, Z11.data);
      else if (L11.isCompressedTexture)
        if (L11.isCompressedArrayTexture) {
          nt14 && wt9 && t19.texStorage3D(35866, B21, we8, Ve8[0].width, Ve8[0].height, Z11.depth);
          for (let te7 = 0, ce9 = Ve8.length; te7 < ce9; te7++)
            Se7 = Ve8[te7], L11.format !== di6 ? Ae6 !== null ? nt14 ? t19.compressedTexSubImage3D(35866, te7, 0, 0, 0, Se7.width, Se7.height, Z11.depth, Ae6, Se7.data, 0, 0) : t19.compressedTexImage3D(35866, te7, we8, Se7.width, Se7.height, Z11.depth, 0, Se7.data, 0, 0) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : nt14 ? t19.texSubImage3D(35866, te7, 0, 0, 0, Se7.width, Se7.height, Z11.depth, Ae6, Ce7, Se7.data) : t19.texImage3D(35866, te7, we8, Se7.width, Se7.height, Z11.depth, 0, Ae6, Ce7, Se7.data);
        } else {
          nt14 && wt9 && t19.texStorage2D(3553, B21, we8, Ve8[0].width, Ve8[0].height);
          for (let te7 = 0, ce9 = Ve8.length; te7 < ce9; te7++)
            Se7 = Ve8[te7], L11.format !== di6 ? Ae6 !== null ? nt14 ? t19.compressedTexSubImage2D(3553, te7, 0, 0, Se7.width, Se7.height, Ae6, Se7.data) : t19.compressedTexImage2D(3553, te7, we8, Se7.width, Se7.height, 0, Se7.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : nt14 ? t19.texSubImage2D(3553, te7, 0, 0, Se7.width, Se7.height, Ae6, Ce7, Se7.data) : t19.texImage2D(3553, te7, we8, Se7.width, Se7.height, 0, Ae6, Ce7, Se7.data);
        }
      else if (L11.isDataArrayTexture)
        nt14 ? (wt9 && t19.texStorage3D(35866, B21, we8, Z11.width, Z11.height, Z11.depth), t19.texSubImage3D(35866, 0, 0, 0, 0, Z11.width, Z11.height, Z11.depth, Ae6, Ce7, Z11.data)) : t19.texImage3D(35866, 0, we8, Z11.width, Z11.height, Z11.depth, 0, Ae6, Ce7, Z11.data);
      else if (L11.isData3DTexture)
        nt14 ? (wt9 && t19.texStorage3D(32879, B21, we8, Z11.width, Z11.height, Z11.depth), t19.texSubImage3D(32879, 0, 0, 0, 0, Z11.width, Z11.height, Z11.depth, Ae6, Ce7, Z11.data)) : t19.texImage3D(32879, 0, we8, Z11.width, Z11.height, Z11.depth, 0, Ae6, Ce7, Z11.data);
      else if (L11.isFramebufferTexture) {
        if (wt9)
          if (nt14)
            t19.texStorage2D(3553, B21, we8, Z11.width, Z11.height);
          else {
            let te7 = Z11.width, ce9 = Z11.height;
            for (let Me7 = 0; Me7 < B21; Me7++)
              t19.texImage2D(3553, Me7, we8, te7, ce9, 0, Ae6, Ce7, null), te7 >>= 1, ce9 >>= 1;
          }
      } else if (Ve8.length > 0 && xe6) {
        nt14 && wt9 && t19.texStorage2D(3553, B21, we8, Ve8[0].width, Ve8[0].height);
        for (let te7 = 0, ce9 = Ve8.length; te7 < ce9; te7++)
          Se7 = Ve8[te7], nt14 ? t19.texSubImage2D(3553, te7, 0, 0, Ae6, Ce7, Se7) : t19.texImage2D(3553, te7, we8, Ae6, Ce7, Se7);
        L11.generateMipmaps = false;
      } else
        nt14 ? (wt9 && t19.texStorage2D(3553, B21, we8, Z11.width, Z11.height), t19.texSubImage2D(3553, 0, 0, 0, Ae6, Ce7, Z11)) : t19.texImage2D(3553, 0, we8, Ae6, Ce7, Z11);
      I16(L11, xe6) && D17(de9), O20.__version = _e7.version, L11.onUpdate && L11.onUpdate(L11);
    }
    N19.__version = L11.version;
  }
  function Le7(N19, L11, Q11) {
    if (L11.image.length !== 6)
      return;
    const de9 = F17(N19, L11), pe8 = L11.source;
    t19.bindTexture(34067, N19.__webglTexture, 33984 + Q11);
    const _e7 = i27.get(pe8);
    if (pe8.version !== _e7.__version || de9 === true) {
      t19.activeTexture(33984 + Q11), s18.pixelStorei(37440, L11.flipY), s18.pixelStorei(37441, L11.premultiplyAlpha), s18.pixelStorei(3317, L11.unpackAlignment), s18.pixelStorei(37443, 0);
      const O20 = L11.isCompressedTexture || L11.image[0].isCompressedTexture, ae7 = L11.image[0] && L11.image[0].isDataTexture, Z11 = [];
      for (let te7 = 0; te7 < 6; te7++)
        !O20 && !ae7 ? Z11[te7] = M12(L11.image[te7], false, true, c27) : Z11[te7] = ae7 ? L11.image[te7].image : L11.image[te7], Z11[te7] = kt10(L11, Z11[te7]);
      const xe6 = Z11[0], Ae6 = E24(xe6) || o12, Ce7 = n33.convert(L11.format, L11.encoding), we8 = n33.convert(L11.type), Se7 = P19(L11.internalFormat, Ce7, we8, L11.encoding), Ve8 = o12 && L11.isVideoTexture !== true, nt14 = _e7.__version === void 0 || de9 === true;
      let wt9 = x34(L11, xe6, Ae6);
      K13(34067, L11, Ae6);
      let B21;
      if (O20) {
        Ve8 && nt14 && t19.texStorage2D(34067, wt9, Se7, xe6.width, xe6.height);
        for (let te7 = 0; te7 < 6; te7++) {
          B21 = Z11[te7].mipmaps;
          for (let ce9 = 0; ce9 < B21.length; ce9++) {
            const Me7 = B21[ce9];
            L11.format !== di6 ? Ce7 !== null ? Ve8 ? t19.compressedTexSubImage2D(34069 + te7, ce9, 0, 0, Me7.width, Me7.height, Ce7, Me7.data) : t19.compressedTexImage2D(34069 + te7, ce9, Se7, Me7.width, Me7.height, 0, Me7.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()") : Ve8 ? t19.texSubImage2D(34069 + te7, ce9, 0, 0, Me7.width, Me7.height, Ce7, we8, Me7.data) : t19.texImage2D(34069 + te7, ce9, Se7, Me7.width, Me7.height, 0, Ce7, we8, Me7.data);
          }
        }
      } else {
        B21 = L11.mipmaps, Ve8 && nt14 && (B21.length > 0 && wt9++, t19.texStorage2D(34067, wt9, Se7, Z11[0].width, Z11[0].height));
        for (let te7 = 0; te7 < 6; te7++)
          if (ae7) {
            Ve8 ? t19.texSubImage2D(34069 + te7, 0, 0, 0, Z11[te7].width, Z11[te7].height, Ce7, we8, Z11[te7].data) : t19.texImage2D(34069 + te7, 0, Se7, Z11[te7].width, Z11[te7].height, 0, Ce7, we8, Z11[te7].data);
            for (let ce9 = 0; ce9 < B21.length; ce9++) {
              const Me7 = B21[ce9].image[te7].image;
              Ve8 ? t19.texSubImage2D(34069 + te7, ce9 + 1, 0, 0, Me7.width, Me7.height, Ce7, we8, Me7.data) : t19.texImage2D(34069 + te7, ce9 + 1, Se7, Me7.width, Me7.height, 0, Ce7, we8, Me7.data);
            }
          } else {
            Ve8 ? t19.texSubImage2D(34069 + te7, 0, 0, 0, Ce7, we8, Z11[te7]) : t19.texImage2D(34069 + te7, 0, Se7, Ce7, we8, Z11[te7]);
            for (let ce9 = 0; ce9 < B21.length; ce9++) {
              const Me7 = B21[ce9];
              Ve8 ? t19.texSubImage2D(34069 + te7, ce9 + 1, 0, 0, Ce7, we8, Me7.image[te7]) : t19.texImage2D(34069 + te7, ce9 + 1, Se7, Ce7, we8, Me7.image[te7]);
            }
          }
      }
      I16(L11, Ae6) && D17(34067), _e7.__version = pe8.version, L11.onUpdate && L11.onUpdate(L11);
    }
    N19.__version = L11.version;
  }
  function me9(N19, L11, Q11, de9, pe8) {
    const _e7 = n33.convert(Q11.format, Q11.encoding), O20 = n33.convert(Q11.type), ae7 = P19(Q11.internalFormat, _e7, O20, Q11.encoding);
    i27.get(L11).__hasExternalTextures || (pe8 === 32879 || pe8 === 35866 ? t19.texImage3D(pe8, 0, ae7, L11.width, L11.height, L11.depth, 0, _e7, O20, null) : t19.texImage2D(pe8, 0, ae7, L11.width, L11.height, 0, _e7, O20, null)), t19.bindFramebuffer(36160, N19), $e6(L11) ? d34.framebufferTexture2DMultisampleEXT(36160, de9, pe8, i27.get(Q11).__webglTexture, 0, Tt9(L11)) : (pe8 === 3553 || pe8 >= 34069 && pe8 <= 34074) && s18.framebufferTexture2D(36160, de9, pe8, i27.get(Q11).__webglTexture, 0), t19.bindFramebuffer(36160, null);
  }
  function De6(N19, L11, Q11) {
    if (s18.bindRenderbuffer(36161, N19), L11.depthBuffer && !L11.stencilBuffer) {
      let de9 = 33189;
      if (Q11 || $e6(L11)) {
        const pe8 = L11.depthTexture;
        pe8 && pe8.isDepthTexture && (pe8.type === er5 ? de9 = 36012 : pe8.type === pr4 && (de9 = 33190));
        const _e7 = Tt9(L11);
        $e6(L11) ? d34.renderbufferStorageMultisampleEXT(36161, _e7, de9, L11.width, L11.height) : s18.renderbufferStorageMultisample(36161, _e7, de9, L11.width, L11.height);
      } else
        s18.renderbufferStorage(36161, de9, L11.width, L11.height);
      s18.framebufferRenderbuffer(36160, 36096, 36161, N19);
    } else if (L11.depthBuffer && L11.stencilBuffer) {
      const de9 = Tt9(L11);
      Q11 && $e6(L11) === false ? s18.renderbufferStorageMultisample(36161, de9, 35056, L11.width, L11.height) : $e6(L11) ? d34.renderbufferStorageMultisampleEXT(36161, de9, 35056, L11.width, L11.height) : s18.renderbufferStorage(36161, 34041, L11.width, L11.height), s18.framebufferRenderbuffer(36160, 33306, 36161, N19);
    } else {
      const de9 = L11.isWebGLMultipleRenderTargets === true ? L11.texture : [L11.texture];
      for (let pe8 = 0; pe8 < de9.length; pe8++) {
        const _e7 = de9[pe8], O20 = n33.convert(_e7.format, _e7.encoding), ae7 = n33.convert(_e7.type), Z11 = P19(_e7.internalFormat, O20, ae7, _e7.encoding), xe6 = Tt9(L11);
        Q11 && $e6(L11) === false ? s18.renderbufferStorageMultisample(36161, xe6, Z11, L11.width, L11.height) : $e6(L11) ? d34.renderbufferStorageMultisampleEXT(36161, xe6, Z11, L11.width, L11.height) : s18.renderbufferStorage(36161, Z11, L11.width, L11.height);
      }
    }
    s18.bindRenderbuffer(36161, null);
  }
  function tt10(N19, L11) {
    if (L11 && L11.isWebGLCubeRenderTarget)
      throw new Error("Depth Texture with cube render targets is not supported");
    if (t19.bindFramebuffer(36160, N19), !(L11.depthTexture && L11.depthTexture.isDepthTexture))
      throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");
    (!i27.get(L11.depthTexture).__webglTexture || L11.depthTexture.image.width !== L11.width || L11.depthTexture.image.height !== L11.height) && (L11.depthTexture.image.width = L11.width, L11.depthTexture.image.height = L11.height, L11.depthTexture.needsUpdate = true), le7(L11.depthTexture, 0);
    const Q11 = i27.get(L11.depthTexture).__webglTexture, de9 = Tt9(L11);
    if (L11.depthTexture.format === vr5)
      $e6(L11) ? d34.framebufferTexture2DMultisampleEXT(36160, 36096, 3553, Q11, 0, de9) : s18.framebufferTexture2D(36160, 36096, 3553, Q11, 0);
    else if (L11.depthTexture.format === bn5)
      $e6(L11) ? d34.framebufferTexture2DMultisampleEXT(36160, 33306, 3553, Q11, 0, de9) : s18.framebufferTexture2D(36160, 33306, 3553, Q11, 0);
    else
      throw new Error("Unknown depthTexture format");
  }
  function Pe6(N19) {
    const L11 = i27.get(N19), Q11 = N19.isWebGLCubeRenderTarget === true;
    if (N19.depthTexture && !L11.__autoAllocateDepthBuffer) {
      if (Q11)
        throw new Error("target.depthTexture not supported in Cube render targets");
      tt10(L11.__webglFramebuffer, N19);
    } else if (Q11) {
      L11.__webglDepthbuffer = [];
      for (let de9 = 0; de9 < 6; de9++)
        t19.bindFramebuffer(36160, L11.__webglFramebuffer[de9]), L11.__webglDepthbuffer[de9] = s18.createRenderbuffer(), De6(L11.__webglDepthbuffer[de9], N19, false);
    } else
      t19.bindFramebuffer(36160, L11.__webglFramebuffer), L11.__webglDepthbuffer = s18.createRenderbuffer(), De6(L11.__webglDepthbuffer, N19, false);
    t19.bindFramebuffer(36160, null);
  }
  function je7(N19, L11, Q11) {
    const de9 = i27.get(N19);
    L11 !== void 0 && me9(de9.__webglFramebuffer, N19, N19.texture, 36064, 3553), Q11 !== void 0 && Pe6(N19);
  }
  function Mt10(N19) {
    const L11 = N19.texture, Q11 = i27.get(N19), de9 = i27.get(L11);
    N19.addEventListener("dispose", z19), N19.isWebGLMultipleRenderTargets !== true && (de9.__webglTexture === void 0 && (de9.__webglTexture = s18.createTexture()), de9.__version = L11.version, a22.memory.textures++);
    const pe8 = N19.isWebGLCubeRenderTarget === true, _e7 = N19.isWebGLMultipleRenderTargets === true, O20 = E24(N19) || o12;
    if (pe8) {
      Q11.__webglFramebuffer = [];
      for (let ae7 = 0; ae7 < 6; ae7++)
        Q11.__webglFramebuffer[ae7] = s18.createFramebuffer();
    } else {
      if (Q11.__webglFramebuffer = s18.createFramebuffer(), _e7)
        if (r24.drawBuffers) {
          const ae7 = N19.texture;
          for (let Z11 = 0, xe6 = ae7.length; Z11 < xe6; Z11++) {
            const Ae6 = i27.get(ae7[Z11]);
            Ae6.__webglTexture === void 0 && (Ae6.__webglTexture = s18.createTexture(), a22.memory.textures++);
          }
        } else
          console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");
      if (o12 && N19.samples > 0 && $e6(N19) === false) {
        const ae7 = _e7 ? L11 : [L11];
        Q11.__webglMultisampledFramebuffer = s18.createFramebuffer(), Q11.__webglColorRenderbuffer = [], t19.bindFramebuffer(36160, Q11.__webglMultisampledFramebuffer);
        for (let Z11 = 0; Z11 < ae7.length; Z11++) {
          const xe6 = ae7[Z11];
          Q11.__webglColorRenderbuffer[Z11] = s18.createRenderbuffer(), s18.bindRenderbuffer(36161, Q11.__webglColorRenderbuffer[Z11]);
          const Ae6 = n33.convert(xe6.format, xe6.encoding), Ce7 = n33.convert(xe6.type), we8 = P19(xe6.internalFormat, Ae6, Ce7, xe6.encoding, N19.isXRRenderTarget === true), Se7 = Tt9(N19);
          s18.renderbufferStorageMultisample(36161, Se7, we8, N19.width, N19.height), s18.framebufferRenderbuffer(36160, 36064 + Z11, 36161, Q11.__webglColorRenderbuffer[Z11]);
        }
        s18.bindRenderbuffer(36161, null), N19.depthBuffer && (Q11.__webglDepthRenderbuffer = s18.createRenderbuffer(), De6(Q11.__webglDepthRenderbuffer, N19, true)), t19.bindFramebuffer(36160, null);
      }
    }
    if (pe8) {
      t19.bindTexture(34067, de9.__webglTexture), K13(34067, L11, O20);
      for (let ae7 = 0; ae7 < 6; ae7++)
        me9(Q11.__webglFramebuffer[ae7], N19, L11, 36064, 34069 + ae7);
      I16(L11, O20) && D17(34067), t19.unbindTexture();
    } else if (_e7) {
      const ae7 = N19.texture;
      for (let Z11 = 0, xe6 = ae7.length; Z11 < xe6; Z11++) {
        const Ae6 = ae7[Z11], Ce7 = i27.get(Ae6);
        t19.bindTexture(3553, Ce7.__webglTexture), K13(3553, Ae6, O20), me9(Q11.__webglFramebuffer, N19, Ae6, 36064 + Z11, 3553), I16(Ae6, O20) && D17(3553);
      }
      t19.unbindTexture();
    } else {
      let ae7 = 3553;
      (N19.isWebGL3DRenderTarget || N19.isWebGLArrayRenderTarget) && (o12 ? ae7 = N19.isWebGL3DRenderTarget ? 32879 : 35866 : console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")), t19.bindTexture(ae7, de9.__webglTexture), K13(ae7, L11, O20), me9(Q11.__webglFramebuffer, N19, L11, 36064, ae7), I16(L11, O20) && D17(ae7), t19.unbindTexture();
    }
    N19.depthBuffer && Pe6(N19);
  }
  function vt8(N19) {
    const L11 = E24(N19) || o12, Q11 = N19.isWebGLMultipleRenderTargets === true ? N19.texture : [N19.texture];
    for (let de9 = 0, pe8 = Q11.length; de9 < pe8; de9++) {
      const _e7 = Q11[de9];
      if (I16(_e7, L11)) {
        const O20 = N19.isWebGLCubeRenderTarget ? 34067 : 3553, ae7 = i27.get(_e7).__webglTexture;
        t19.bindTexture(O20, ae7), D17(O20), t19.unbindTexture();
      }
    }
  }
  function St8(N19) {
    if (o12 && N19.samples > 0 && $e6(N19) === false) {
      const L11 = N19.isWebGLMultipleRenderTargets ? N19.texture : [N19.texture], Q11 = N19.width, de9 = N19.height;
      let pe8 = 16384;
      const _e7 = [], O20 = N19.stencilBuffer ? 33306 : 36096, ae7 = i27.get(N19), Z11 = N19.isWebGLMultipleRenderTargets === true;
      if (Z11)
        for (let xe6 = 0; xe6 < L11.length; xe6++)
          t19.bindFramebuffer(36160, ae7.__webglMultisampledFramebuffer), s18.framebufferRenderbuffer(36160, 36064 + xe6, 36161, null), t19.bindFramebuffer(36160, ae7.__webglFramebuffer), s18.framebufferTexture2D(36009, 36064 + xe6, 3553, null, 0);
      t19.bindFramebuffer(36008, ae7.__webglMultisampledFramebuffer), t19.bindFramebuffer(36009, ae7.__webglFramebuffer);
      for (let xe6 = 0; xe6 < L11.length; xe6++) {
        _e7.push(36064 + xe6), N19.depthBuffer && _e7.push(O20);
        const Ae6 = ae7.__ignoreDepthValues !== void 0 ? ae7.__ignoreDepthValues : false;
        if (Ae6 === false && (N19.depthBuffer && (pe8 |= 256), N19.stencilBuffer && (pe8 |= 1024)), Z11 && s18.framebufferRenderbuffer(36008, 36064, 36161, ae7.__webglColorRenderbuffer[xe6]), Ae6 === true && (s18.invalidateFramebuffer(36008, [O20]), s18.invalidateFramebuffer(36009, [O20])), Z11) {
          const Ce7 = i27.get(L11[xe6]).__webglTexture;
          s18.framebufferTexture2D(36009, 36064, 3553, Ce7, 0);
        }
        s18.blitFramebuffer(0, 0, Q11, de9, 0, 0, Q11, de9, pe8, 9728), m33 && s18.invalidateFramebuffer(36008, _e7);
      }
      if (t19.bindFramebuffer(36008, null), t19.bindFramebuffer(36009, null), Z11)
        for (let xe6 = 0; xe6 < L11.length; xe6++) {
          t19.bindFramebuffer(36160, ae7.__webglMultisampledFramebuffer), s18.framebufferRenderbuffer(36160, 36064 + xe6, 36161, ae7.__webglColorRenderbuffer[xe6]);
          const Ae6 = i27.get(L11[xe6]).__webglTexture;
          t19.bindFramebuffer(36160, ae7.__webglFramebuffer), s18.framebufferTexture2D(36009, 36064 + xe6, 3553, Ae6, 0);
        }
      t19.bindFramebuffer(36009, ae7.__webglMultisampledFramebuffer);
    }
  }
  function Tt9(N19) {
    return Math.min(u35, N19.samples);
  }
  function $e6(N19) {
    const L11 = i27.get(N19);
    return o12 && N19.samples > 0 && e11.has("WEBGL_multisampled_render_to_texture") === true && L11.__useRenderToTexture !== false;
  }
  function ot13(N19) {
    const L11 = a22.render.frame;
    _19.get(N19) !== L11 && (_19.set(N19, L11), N19.update());
  }
  function kt10(N19, L11) {
    const Q11 = N19.encoding, de9 = N19.format, pe8 = N19.type;
    return N19.isCompressedTexture === true || N19.isVideoTexture === true || N19.format === _o2 || Q11 !== br5 && (Q11 === rt10 ? o12 === false ? e11.has("EXT_sRGB") === true && de9 === di6 ? (N19.format = _o2, N19.minFilter = Vt6, N19.generateMipmaps = false) : L11 = ph2.sRGBToLinear(L11) : (de9 !== di6 || pe8 !== xr4) && console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.") : console.error("THREE.WebGLTextures: Unsupported texture encoding:", Q11)), L11;
  }
  this.allocateTextureUnit = $24, this.resetTextureUnits = re8, this.setTexture2D = le7, this.setTexture2DArray = fe7, this.setTexture3D = ue8, this.setTextureCube = H15, this.rebindTextures = je7, this.setupRenderTarget = Mt10, this.updateRenderTargetMipmap = vt8, this.updateMultisampleRenderTarget = St8, this.setupDepthRenderbuffer = Pe6, this.setupFrameBufferTexture = me9, this.useMultisampledRTT = $e6;
}
function l02(s18, e11, t19) {
  const i27 = t19.isWebGL2;
  function r24(n33, a22 = null) {
    let o12;
    if (n33 === xr4)
      return 5121;
    if (n33 === Ou2)
      return 32819;
    if (n33 === zu2)
      return 32820;
    if (n33 === Du2)
      return 5120;
    if (n33 === ku2)
      return 5122;
    if (n33 === oh2)
      return 5123;
    if (n33 === Uu2)
      return 5124;
    if (n33 === pr4)
      return 5125;
    if (n33 === er5)
      return 5126;
    if (n33 === $n5)
      return i27 ? 5131 : (o12 = e11.get("OES_texture_half_float"), o12 !== null ? o12.HALF_FLOAT_OES : null);
    if (n33 === Bu2)
      return 6406;
    if (n33 === di6)
      return 6408;
    if (n33 === Fu2)
      return 6409;
    if (n33 === Hu2)
      return 6410;
    if (n33 === vr5)
      return 6402;
    if (n33 === bn5)
      return 34041;
    if (n33 === _o2)
      return o12 = e11.get("EXT_sRGB"), o12 !== null ? o12.SRGB_ALPHA_EXT : null;
    if (n33 === Vu2)
      return 6403;
    if (n33 === Gu2)
      return 36244;
    if (n33 === Wu2)
      return 33319;
    if (n33 === ju2)
      return 33320;
    if (n33 === Xu2)
      return 36249;
    if (n33 === Ma2 || n33 === wa2 || n33 === Sa2 || n33 === Ta2)
      if (a22 === rt10)
        if (o12 = e11.get("WEBGL_compressed_texture_s3tc_srgb"), o12 !== null) {
          if (n33 === Ma2)
            return o12.COMPRESSED_SRGB_S3TC_DXT1_EXT;
          if (n33 === wa2)
            return o12.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;
          if (n33 === Sa2)
            return o12.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;
          if (n33 === Ta2)
            return o12.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;
        } else
          return null;
      else if (o12 = e11.get("WEBGL_compressed_texture_s3tc"), o12 !== null) {
        if (n33 === Ma2)
          return o12.COMPRESSED_RGB_S3TC_DXT1_EXT;
        if (n33 === wa2)
          return o12.COMPRESSED_RGBA_S3TC_DXT1_EXT;
        if (n33 === Sa2)
          return o12.COMPRESSED_RGBA_S3TC_DXT3_EXT;
        if (n33 === Ta2)
          return o12.COMPRESSED_RGBA_S3TC_DXT5_EXT;
      } else
        return null;
    if (n33 === al2 || n33 === ol2 || n33 === ll2 || n33 === cl2)
      if (o12 = e11.get("WEBGL_compressed_texture_pvrtc"), o12 !== null) {
        if (n33 === al2)
          return o12.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
        if (n33 === ol2)
          return o12.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
        if (n33 === ll2)
          return o12.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
        if (n33 === cl2)
          return o12.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
      } else
        return null;
    if (n33 === qu2)
      return o12 = e11.get("WEBGL_compressed_texture_etc1"), o12 !== null ? o12.COMPRESSED_RGB_ETC1_WEBGL : null;
    if (n33 === hl2 || n33 === ul2)
      if (o12 = e11.get("WEBGL_compressed_texture_etc"), o12 !== null) {
        if (n33 === hl2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ETC2 : o12.COMPRESSED_RGB8_ETC2;
        if (n33 === ul2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC : o12.COMPRESSED_RGBA8_ETC2_EAC;
      } else
        return null;
    if (n33 === dl2 || n33 === pl2 || n33 === ml2 || n33 === fl2 || n33 === gl2 || n33 === _l2 || n33 === vl2 || n33 === yl2 || n33 === xl2 || n33 === bl2 || n33 === Ml2 || n33 === wl2 || n33 === Sl2 || n33 === Tl2)
      if (o12 = e11.get("WEBGL_compressed_texture_astc"), o12 !== null) {
        if (n33 === dl2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR : o12.COMPRESSED_RGBA_ASTC_4x4_KHR;
        if (n33 === pl2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR : o12.COMPRESSED_RGBA_ASTC_5x4_KHR;
        if (n33 === ml2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR : o12.COMPRESSED_RGBA_ASTC_5x5_KHR;
        if (n33 === fl2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR : o12.COMPRESSED_RGBA_ASTC_6x5_KHR;
        if (n33 === gl2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR : o12.COMPRESSED_RGBA_ASTC_6x6_KHR;
        if (n33 === _l2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR : o12.COMPRESSED_RGBA_ASTC_8x5_KHR;
        if (n33 === vl2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR : o12.COMPRESSED_RGBA_ASTC_8x6_KHR;
        if (n33 === yl2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR : o12.COMPRESSED_RGBA_ASTC_8x8_KHR;
        if (n33 === xl2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR : o12.COMPRESSED_RGBA_ASTC_10x5_KHR;
        if (n33 === bl2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR : o12.COMPRESSED_RGBA_ASTC_10x6_KHR;
        if (n33 === Ml2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR : o12.COMPRESSED_RGBA_ASTC_10x8_KHR;
        if (n33 === wl2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR : o12.COMPRESSED_RGBA_ASTC_10x10_KHR;
        if (n33 === Sl2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR : o12.COMPRESSED_RGBA_ASTC_12x10_KHR;
        if (n33 === Tl2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR : o12.COMPRESSED_RGBA_ASTC_12x12_KHR;
      } else
        return null;
    if (n33 === Ea2)
      if (o12 = e11.get("EXT_texture_compression_bptc"), o12 !== null) {
        if (n33 === Ea2)
          return a22 === rt10 ? o12.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT : o12.COMPRESSED_RGBA_BPTC_UNORM_EXT;
      } else
        return null;
    if (n33 === Yu2 || n33 === El2 || n33 === Al2 || n33 === Ll2)
      if (o12 = e11.get("EXT_texture_compression_rgtc"), o12 !== null) {
        if (n33 === Ea2)
          return o12.COMPRESSED_RED_RGTC1_EXT;
        if (n33 === El2)
          return o12.COMPRESSED_SIGNED_RED_RGTC1_EXT;
        if (n33 === Al2)
          return o12.COMPRESSED_RED_GREEN_RGTC2_EXT;
        if (n33 === Ll2)
          return o12.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;
      } else
        return null;
    return n33 === dn4 ? i27 ? 34042 : (o12 = e11.get("WEBGL_depth_texture"), o12 !== null ? o12.UNSIGNED_INT_24_8_WEBGL : null) : s18[n33] !== void 0 ? s18[n33] : null;
  }
  return { convert: r24 };
}
var c02 = class extends Bt6 {
  constructor(e11 = []) {
    super(), this.isArrayCamera = true, this.cameras = e11;
  }
};
var Lt5 = class extends _t7 {
  constructor() {
    super(), this.isGroup = true, this.type = "Group";
  }
};
var h02 = { type: "move" };
var Za = class {
  constructor() {
    this._targetRay = null, this._grip = null, this._hand = null;
  }
  getHandSpace() {
    return this._hand === null && (this._hand = new Lt5(), this._hand.matrixAutoUpdate = false, this._hand.visible = false, this._hand.joints = {}, this._hand.inputState = { pinching: false }), this._hand;
  }
  getTargetRaySpace() {
    return this._targetRay === null && (this._targetRay = new Lt5(), this._targetRay.matrixAutoUpdate = false, this._targetRay.visible = false, this._targetRay.hasLinearVelocity = false, this._targetRay.linearVelocity = new k18(), this._targetRay.hasAngularVelocity = false, this._targetRay.angularVelocity = new k18()), this._targetRay;
  }
  getGripSpace() {
    return this._grip === null && (this._grip = new Lt5(), this._grip.matrixAutoUpdate = false, this._grip.visible = false, this._grip.hasLinearVelocity = false, this._grip.linearVelocity = new k18(), this._grip.hasAngularVelocity = false, this._grip.angularVelocity = new k18()), this._grip;
  }
  dispatchEvent(e11) {
    return this._targetRay !== null && this._targetRay.dispatchEvent(e11), this._grip !== null && this._grip.dispatchEvent(e11), this._hand !== null && this._hand.dispatchEvent(e11), this;
  }
  connect(e11) {
    if (e11 && e11.hand) {
      const t19 = this._hand;
      if (t19)
        for (const i27 of e11.hand.values())
          this._getHandJoint(t19, i27);
    }
    return this.dispatchEvent({ type: "connected", data: e11 }), this;
  }
  disconnect(e11) {
    return this.dispatchEvent({ type: "disconnected", data: e11 }), this._targetRay !== null && (this._targetRay.visible = false), this._grip !== null && (this._grip.visible = false), this._hand !== null && (this._hand.visible = false), this;
  }
  update(e11, t19, i27) {
    let r24 = null, n33 = null, a22 = null;
    const o12 = this._targetRay, l25 = this._grip, c27 = this._hand;
    if (e11 && t19.session.visibilityState !== "visible-blurred") {
      if (c27 && e11.hand) {
        a22 = true;
        for (const y33 of e11.hand.values()) {
          const f39 = t19.getJointPose(y33, i27), p26 = this._getHandJoint(c27, y33);
          f39 !== null && (p26.matrix.fromArray(f39.transform.matrix), p26.matrix.decompose(p26.position, p26.rotation, p26.scale), p26.jointRadius = f39.radius), p26.visible = f39 !== null;
        }
        const h26 = c27.joints["index-finger-tip"], u35 = c27.joints["thumb-tip"], d34 = h26.position.distanceTo(u35.position), m33 = 0.02, _19 = 5e-3;
        c27.inputState.pinching && d34 > m33 + _19 ? (c27.inputState.pinching = false, this.dispatchEvent({
          type: "pinchend",
          handedness: e11.handedness,
          target: this
        })) : !c27.inputState.pinching && d34 <= m33 - _19 && (c27.inputState.pinching = true, this.dispatchEvent({
          type: "pinchstart",
          handedness: e11.handedness,
          target: this
        }));
      } else
        l25 !== null && e11.gripSpace && (n33 = t19.getPose(e11.gripSpace, i27), n33 !== null && (l25.matrix.fromArray(n33.transform.matrix), l25.matrix.decompose(l25.position, l25.rotation, l25.scale), n33.linearVelocity ? (l25.hasLinearVelocity = true, l25.linearVelocity.copy(n33.linearVelocity)) : l25.hasLinearVelocity = false, n33.angularVelocity ? (l25.hasAngularVelocity = true, l25.angularVelocity.copy(n33.angularVelocity)) : l25.hasAngularVelocity = false));
      o12 !== null && (r24 = t19.getPose(e11.targetRaySpace, i27), r24 === null && n33 !== null && (r24 = n33), r24 !== null && (o12.matrix.fromArray(r24.transform.matrix), o12.matrix.decompose(o12.position, o12.rotation, o12.scale), r24.linearVelocity ? (o12.hasLinearVelocity = true, o12.linearVelocity.copy(r24.linearVelocity)) : o12.hasLinearVelocity = false, r24.angularVelocity ? (o12.hasAngularVelocity = true, o12.angularVelocity.copy(r24.angularVelocity)) : o12.hasAngularVelocity = false, this.dispatchEvent(h02)));
    }
    return o12 !== null && (o12.visible = r24 !== null), l25 !== null && (l25.visible = n33 !== null), c27 !== null && (c27.visible = a22 !== null), this;
  }
  // private method
  _getHandJoint(e11, t19) {
    if (e11.joints[t19.jointName] === void 0) {
      const i27 = new Lt5();
      i27.matrixAutoUpdate = false, i27.visible = false, e11.joints[t19.jointName] = i27, e11.add(i27);
    }
    return e11.joints[t19.jointName];
  }
};
var u02 = class extends Wt7 {
  constructor(e11, t19, i27, r24, n33, a22, o12, l25, c27, h26) {
    if (h26 = h26 !== void 0 ? h26 : vr5, h26 !== vr5 && h26 !== bn5)
      throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");
    i27 === void 0 && h26 === vr5 && (i27 = pr4), i27 === void 0 && h26 === bn5 && (i27 = dn4), super(null, r24, n33, a22, o12, l25, h26, i27, c27), this.isDepthTexture = true, this.image = { width: e11, height: t19 }, this.magFilter = o12 !== void 0 ? o12 : zt6, this.minFilter = l25 !== void 0 ? l25 : zt6, this.flipY = false, this.generateMipmaps = false;
  }
};
var d02 = class extends Ar5 {
  constructor(e11, t19) {
    super();
    const i27 = this;
    let r24 = null, n33 = 1, a22 = null, o12 = "local-floor", l25 = 1, c27 = null, h26 = null, u35 = null, d34 = null, m33 = null, _19 = null;
    const y33 = t19.getContextAttributes();
    let f39 = null, p26 = null;
    const A17 = [], M12 = [], E24 = /* @__PURE__ */ new Set(), w29 = /* @__PURE__ */ new Map(), I16 = new Bt6();
    I16.layers.enable(1), I16.viewport = new gt11();
    const D17 = new Bt6();
    D17.layers.enable(2), D17.viewport = new gt11();
    const P19 = [I16, D17], x34 = new c02();
    x34.layers.enable(1), x34.layers.enable(2);
    let C19 = null, G15 = null;
    this.cameraAutoUpdate = true, this.enabled = false, this.isPresenting = false, this.getController = function(H15) {
      let q13 = A17[H15];
      return q13 === void 0 && (q13 = new Za(), A17[H15] = q13), q13.getTargetRaySpace();
    }, this.getControllerGrip = function(H15) {
      let q13 = A17[H15];
      return q13 === void 0 && (q13 = new Za(), A17[H15] = q13), q13.getGripSpace();
    }, this.getHand = function(H15) {
      let q13 = A17[H15];
      return q13 === void 0 && (q13 = new Za(), A17[H15] = q13), q13.getHandSpace();
    };
    function z19(H15) {
      const q13 = M12.indexOf(H15.inputSource);
      if (q13 === -1)
        return;
      const oe7 = A17[q13];
      oe7 !== void 0 && oe7.dispatchEvent({ type: H15.type, data: H15.inputSource });
    }
    function U18() {
      r24.removeEventListener("select", z19), r24.removeEventListener("selectstart", z19), r24.removeEventListener("selectend", z19), r24.removeEventListener("squeeze", z19), r24.removeEventListener("squeezestart", z19), r24.removeEventListener("squeezeend", z19), r24.removeEventListener("end", U18), r24.removeEventListener("inputsourceschange", V14);
      for (let H15 = 0; H15 < A17.length; H15++) {
        const q13 = M12[H15];
        q13 !== null && (M12[H15] = null, A17[H15].disconnect(q13));
      }
      C19 = null, G15 = null, e11.setRenderTarget(f39), m33 = null, d34 = null, u35 = null, r24 = null, p26 = null, ue8.stop(), i27.isPresenting = false, i27.dispatchEvent({ type: "sessionend" });
    }
    this.setFramebufferScaleFactor = function(H15) {
      n33 = H15, i27.isPresenting === true && console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.");
    }, this.setReferenceSpaceType = function(H15) {
      o12 = H15, i27.isPresenting === true && console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.");
    }, this.getReferenceSpace = function() {
      return c27 || a22;
    }, this.setReferenceSpace = function(H15) {
      c27 = H15;
    }, this.getBaseLayer = function() {
      return d34 !== null ? d34 : m33;
    }, this.getBinding = function() {
      return u35;
    }, this.getFrame = function() {
      return _19;
    }, this.getSession = function() {
      return r24;
    }, this.setSession = async function(H15) {
      if (r24 = H15, r24 !== null) {
        if (f39 = e11.getRenderTarget(), r24.addEventListener("select", z19), r24.addEventListener("selectstart", z19), r24.addEventListener("selectend", z19), r24.addEventListener("squeeze", z19), r24.addEventListener("squeezestart", z19), r24.addEventListener("squeezeend", z19), r24.addEventListener("end", U18), r24.addEventListener("inputsourceschange", V14), y33.xrCompatible !== true && await t19.makeXRCompatible(), r24.renderState.layers === void 0 || e11.capabilities.isWebGL2 === false) {
          const q13 = {
            antialias: r24.renderState.layers === void 0 ? y33.antialias : true,
            alpha: y33.alpha,
            depth: y33.depth,
            stencil: y33.stencil,
            framebufferScaleFactor: n33
          };
          m33 = new XRWebGLLayer(r24, t19, q13), r24.updateRenderState({ baseLayer: m33 }), p26 = new Mr5(
            m33.framebufferWidth,
            m33.framebufferHeight,
            {
              format: di6,
              type: xr4,
              encoding: e11.outputEncoding,
              stencilBuffer: y33.stencil
            }
          );
        } else {
          let q13 = null, oe7 = null, K13 = null;
          y33.depth && (K13 = y33.stencil ? 35056 : 33190, q13 = y33.stencil ? bn5 : vr5, oe7 = y33.stencil ? dn4 : pr4);
          const F17 = {
            colorFormat: 32856,
            depthFormat: K13,
            scaleFactor: n33
          };
          u35 = new XRWebGLBinding(r24, t19), d34 = u35.createProjectionLayer(F17), r24.updateRenderState({ layers: [d34] }), p26 = new Mr5(
            d34.textureWidth,
            d34.textureHeight,
            {
              format: di6,
              type: xr4,
              depthTexture: new u02(d34.textureWidth, d34.textureHeight, oe7, void 0, void 0, void 0, void 0, void 0, void 0, q13),
              stencilBuffer: y33.stencil,
              encoding: e11.outputEncoding,
              samples: y33.antialias ? 4 : 0
            }
          );
          const ye7 = e11.properties.get(p26);
          ye7.__ignoreDepthValues = d34.ignoreDepthValues;
        }
        p26.isXRRenderTarget = true, this.setFoveation(l25), c27 = null, a22 = await r24.requestReferenceSpace(o12), ue8.setContext(r24), ue8.start(), i27.isPresenting = true, i27.dispatchEvent({ type: "sessionstart" });
      }
    };
    function V14(H15) {
      for (let q13 = 0; q13 < H15.removed.length; q13++) {
        const oe7 = H15.removed[q13], K13 = M12.indexOf(oe7);
        K13 >= 0 && (M12[K13] = null, A17[K13].disconnect(oe7));
      }
      for (let q13 = 0; q13 < H15.added.length; q13++) {
        const oe7 = H15.added[q13];
        let K13 = M12.indexOf(oe7);
        if (K13 === -1) {
          for (let ye7 = 0; ye7 < A17.length; ye7++)
            if (ye7 >= M12.length) {
              M12.push(oe7), K13 = ye7;
              break;
            } else if (M12[ye7] === null) {
              M12[ye7] = oe7, K13 = ye7;
              break;
            }
          if (K13 === -1)
            break;
        }
        const F17 = A17[K13];
        F17 && F17.connect(oe7);
      }
    }
    const j18 = new k18(), W8 = new k18();
    function re8(H15, q13, oe7) {
      j18.setFromMatrixPosition(q13.matrixWorld), W8.setFromMatrixPosition(oe7.matrixWorld);
      const K13 = j18.distanceTo(W8), F17 = q13.projectionMatrix.elements, ye7 = oe7.projectionMatrix.elements, Le7 = F17[14] / (F17[10] - 1), me9 = F17[14] / (F17[10] + 1), De6 = (F17[9] + 1) / F17[5], tt10 = (F17[9] - 1) / F17[5], Pe6 = (F17[8] - 1) / F17[0], je7 = (ye7[8] + 1) / ye7[0], Mt10 = Le7 * Pe6, vt8 = Le7 * je7, St8 = K13 / (-Pe6 + je7), Tt9 = St8 * -Pe6;
      q13.matrixWorld.decompose(H15.position, H15.quaternion, H15.scale), H15.translateX(Tt9), H15.translateZ(St8), H15.matrixWorld.compose(H15.position, H15.quaternion, H15.scale), H15.matrixWorldInverse.copy(H15.matrixWorld).invert();
      const $e6 = Le7 + St8, ot13 = me9 + St8, kt10 = Mt10 - Tt9, N19 = vt8 + (K13 - Tt9), L11 = De6 * me9 / ot13 * $e6, Q11 = tt10 * me9 / ot13 * $e6;
      H15.projectionMatrix.makePerspective(kt10, N19, L11, Q11, $e6, ot13), H15.projectionMatrixInverse.copy(H15.projectionMatrix).invert();
    }
    function $24(H15, q13) {
      q13 === null ? H15.matrixWorld.copy(H15.matrix) : H15.matrixWorld.multiplyMatrices(q13.matrixWorld, H15.matrix), H15.matrixWorldInverse.copy(H15.matrixWorld).invert();
    }
    this.updateCamera = function(H15) {
      if (r24 === null)
        return;
      x34.near = D17.near = I16.near = H15.near, x34.far = D17.far = I16.far = H15.far, (C19 !== x34.near || G15 !== x34.far) && (r24.updateRenderState({
        depthNear: x34.near,
        depthFar: x34.far
      }), C19 = x34.near, G15 = x34.far);
      const q13 = H15.parent, oe7 = x34.cameras;
      $24(x34, q13);
      for (let K13 = 0; K13 < oe7.length; K13++)
        $24(oe7[K13], q13);
      oe7.length === 2 ? re8(x34, I16, D17) : x34.projectionMatrix.copy(I16.projectionMatrix), ie8(H15, x34, q13);
    };
    function ie8(H15, q13, oe7) {
      oe7 === null ? H15.matrix.copy(q13.matrixWorld) : (H15.matrix.copy(oe7.matrixWorld), H15.matrix.invert(), H15.matrix.multiply(q13.matrixWorld)), H15.matrix.decompose(H15.position, H15.quaternion, H15.scale), H15.updateMatrixWorld(true);
      const K13 = H15.children;
      for (let F17 = 0, ye7 = K13.length; F17 < ye7; F17++)
        K13[F17].updateMatrixWorld(true);
      H15.projectionMatrix.copy(q13.projectionMatrix), H15.projectionMatrixInverse.copy(q13.projectionMatrixInverse), H15.isPerspectiveCamera && (H15.fov = wn5 * 2 * Math.atan(1 / H15.projectionMatrix.elements[5]), H15.zoom = 1);
    }
    this.getCamera = function() {
      return x34;
    }, this.getFoveation = function() {
      if (!(d34 === null && m33 === null))
        return l25;
    }, this.setFoveation = function(H15) {
      l25 = H15, d34 !== null && (d34.fixedFoveation = H15), m33 !== null && m33.fixedFoveation !== void 0 && (m33.fixedFoveation = H15);
    }, this.getPlanes = function() {
      return E24;
    };
    let le7 = null;
    function fe7(H15, q13) {
      if (h26 = q13.getViewerPose(c27 || a22), _19 = q13, h26 !== null) {
        const oe7 = h26.views;
        m33 !== null && (e11.setRenderTargetFramebuffer(p26, m33.framebuffer), e11.setRenderTarget(p26));
        let K13 = false;
        oe7.length !== x34.cameras.length && (x34.cameras.length = 0, K13 = true);
        for (let F17 = 0; F17 < oe7.length; F17++) {
          const ye7 = oe7[F17];
          let Le7 = null;
          if (m33 !== null)
            Le7 = m33.getViewport(ye7);
          else {
            const De6 = u35.getViewSubImage(d34, ye7);
            Le7 = De6.viewport, F17 === 0 && (e11.setRenderTargetTextures(
              p26,
              De6.colorTexture,
              d34.ignoreDepthValues ? void 0 : De6.depthStencilTexture
            ), e11.setRenderTarget(p26));
          }
          let me9 = P19[F17];
          me9 === void 0 && (me9 = new Bt6(), me9.layers.enable(F17), me9.viewport = new gt11(), P19[F17] = me9), me9.matrix.fromArray(ye7.transform.matrix), me9.matrix.decompose(me9.position, me9.quaternion, me9.scale), me9.projectionMatrix.fromArray(ye7.projectionMatrix), me9.projectionMatrixInverse.copy(me9.projectionMatrix).invert(), me9.viewport.set(Le7.x, Le7.y, Le7.width, Le7.height), F17 === 0 && (x34.matrix.copy(me9.matrix), x34.matrix.decompose(x34.position, x34.quaternion, x34.scale)), K13 === true && x34.cameras.push(me9);
        }
      }
      for (let oe7 = 0; oe7 < A17.length; oe7++) {
        const K13 = M12[oe7], F17 = A17[oe7];
        K13 !== null && F17 !== void 0 && F17.update(K13, q13, c27 || a22);
      }
      if (le7 && le7(H15, q13), q13.detectedPlanes) {
        i27.dispatchEvent({ type: "planesdetected", data: q13.detectedPlanes });
        let oe7 = null;
        for (const K13 of E24)
          q13.detectedPlanes.has(K13) || (oe7 === null && (oe7 = []), oe7.push(K13));
        if (oe7 !== null)
          for (const K13 of oe7)
            E24.delete(K13), w29.delete(K13), i27.dispatchEvent({ type: "planeremoved", data: K13 });
        for (const K13 of q13.detectedPlanes)
          if (!E24.has(K13))
            E24.add(K13), w29.set(K13, q13.lastChangedTime), i27.dispatchEvent({ type: "planeadded", data: K13 });
          else {
            const F17 = w29.get(K13);
            K13.lastChangedTime > F17 && (w29.set(K13, K13.lastChangedTime), i27.dispatchEvent({ type: "planechanged", data: K13 }));
          }
      }
      _19 = null;
    }
    const ue8 = new wh2();
    ue8.setAnimationLoop(fe7), this.setAnimationLoop = function(H15) {
      le7 = H15;
    }, this.dispose = function() {
    };
  }
};
function p02(s18, e11) {
  function t19(f39, p26) {
    f39.matrixAutoUpdate === true && f39.updateMatrix(), p26.value.copy(f39.matrix);
  }
  function i27(f39, p26) {
    p26.color.getRGB(f39.fogColor.value, xh2(s18)), p26.isFog ? (f39.fogNear.value = p26.near, f39.fogFar.value = p26.far) : p26.isFogExp2 && (f39.fogDensity.value = p26.density);
  }
  function r24(f39, p26, A17, M12, E24) {
    p26.isMeshBasicMaterial || p26.isMeshLambertMaterial ? n33(f39, p26) : p26.isMeshToonMaterial ? (n33(f39, p26), u35(f39, p26)) : p26.isMeshPhongMaterial ? (n33(f39, p26), h26(f39, p26)) : p26.isMeshStandardMaterial ? (n33(f39, p26), d34(f39, p26), p26.isMeshPhysicalMaterial && m33(f39, p26, E24)) : p26.isMeshMatcapMaterial ? (n33(f39, p26), _19(f39, p26)) : p26.isMeshDepthMaterial ? n33(f39, p26) : p26.isMeshDistanceMaterial ? (n33(f39, p26), y33(f39, p26)) : p26.isMeshNormalMaterial ? n33(f39, p26) : p26.isLineBasicMaterial ? (a22(f39, p26), p26.isLineDashedMaterial && o12(f39, p26)) : p26.isPointsMaterial ? l25(f39, p26, A17, M12) : p26.isSpriteMaterial ? c27(f39, p26) : p26.isShadowMaterial ? (f39.color.value.copy(p26.color), f39.opacity.value = p26.opacity) : p26.isShaderMaterial && (p26.uniformsNeedUpdate = false);
  }
  function n33(f39, p26) {
    f39.opacity.value = p26.opacity, p26.color && f39.diffuse.value.copy(p26.color), p26.emissive && f39.emissive.value.copy(p26.emissive).multiplyScalar(p26.emissiveIntensity), p26.map && (f39.map.value = p26.map, t19(p26.map, f39.mapTransform)), p26.alphaMap && (f39.alphaMap.value = p26.alphaMap, t19(p26.alphaMap, f39.alphaMapTransform)), p26.bumpMap && (f39.bumpMap.value = p26.bumpMap, t19(p26.bumpMap, f39.bumpMapTransform), f39.bumpScale.value = p26.bumpScale, p26.side === ti6 && (f39.bumpScale.value *= -1)), p26.normalMap && (f39.normalMap.value = p26.normalMap, t19(p26.normalMap, f39.normalMapTransform), f39.normalScale.value.copy(p26.normalScale), p26.side === ti6 && f39.normalScale.value.negate()), p26.displacementMap && (f39.displacementMap.value = p26.displacementMap, t19(p26.displacementMap, f39.displacementMapTransform), f39.displacementScale.value = p26.displacementScale, f39.displacementBias.value = p26.displacementBias), p26.emissiveMap && (f39.emissiveMap.value = p26.emissiveMap, t19(p26.emissiveMap, f39.emissiveMapTransform)), p26.specularMap && (f39.specularMap.value = p26.specularMap, t19(p26.specularMap, f39.specularMapTransform)), p26.alphaTest > 0 && (f39.alphaTest.value = p26.alphaTest);
    const A17 = e11.get(p26).envMap;
    if (A17 && (f39.envMap.value = A17, f39.flipEnvMap.value = A17.isCubeTexture && A17.isRenderTargetTexture === false ? -1 : 1, f39.reflectivity.value = p26.reflectivity, f39.ior.value = p26.ior, f39.refractionRatio.value = p26.refractionRatio), p26.lightMap) {
      f39.lightMap.value = p26.lightMap;
      const M12 = s18.useLegacyLights === true ? Math.PI : 1;
      f39.lightMapIntensity.value = p26.lightMapIntensity * M12, t19(p26.lightMap, f39.lightMapTransform);
    }
    p26.aoMap && (f39.aoMap.value = p26.aoMap, f39.aoMapIntensity.value = p26.aoMapIntensity, t19(p26.aoMap, f39.aoMapTransform));
  }
  function a22(f39, p26) {
    f39.diffuse.value.copy(p26.color), f39.opacity.value = p26.opacity, p26.map && (f39.map.value = p26.map, t19(p26.map, f39.mapTransform));
  }
  function o12(f39, p26) {
    f39.dashSize.value = p26.dashSize, f39.totalSize.value = p26.dashSize + p26.gapSize, f39.scale.value = p26.scale;
  }
  function l25(f39, p26, A17, M12) {
    f39.diffuse.value.copy(p26.color), f39.opacity.value = p26.opacity, f39.size.value = p26.size * A17, f39.scale.value = M12 * 0.5, p26.map && (f39.map.value = p26.map, t19(p26.map, f39.uvTransform)), p26.alphaMap && (f39.alphaMap.value = p26.alphaMap), p26.alphaTest > 0 && (f39.alphaTest.value = p26.alphaTest);
  }
  function c27(f39, p26) {
    f39.diffuse.value.copy(p26.color), f39.opacity.value = p26.opacity, f39.rotation.value = p26.rotation, p26.map && (f39.map.value = p26.map, t19(p26.map, f39.mapTransform)), p26.alphaMap && (f39.alphaMap.value = p26.alphaMap), p26.alphaTest > 0 && (f39.alphaTest.value = p26.alphaTest);
  }
  function h26(f39, p26) {
    f39.specular.value.copy(p26.specular), f39.shininess.value = Math.max(p26.shininess, 1e-4);
  }
  function u35(f39, p26) {
    p26.gradientMap && (f39.gradientMap.value = p26.gradientMap);
  }
  function d34(f39, p26) {
    f39.metalness.value = p26.metalness, p26.metalnessMap && (f39.metalnessMap.value = p26.metalnessMap, t19(p26.metalnessMap, f39.metalnessMapTransform)), f39.roughness.value = p26.roughness, p26.roughnessMap && (f39.roughnessMap.value = p26.roughnessMap, t19(p26.roughnessMap, f39.roughnessMapTransform)), e11.get(p26).envMap && (f39.envMapIntensity.value = p26.envMapIntensity);
  }
  function m33(f39, p26, A17) {
    f39.ior.value = p26.ior, p26.sheen > 0 && (f39.sheenColor.value.copy(p26.sheenColor).multiplyScalar(p26.sheen), f39.sheenRoughness.value = p26.sheenRoughness, p26.sheenColorMap && (f39.sheenColorMap.value = p26.sheenColorMap, t19(p26.sheenColorMap, f39.sheenColorMapTransform)), p26.sheenRoughnessMap && (f39.sheenRoughnessMap.value = p26.sheenRoughnessMap, t19(p26.sheenRoughnessMap, f39.sheenRoughnessMapTransform))), p26.clearcoat > 0 && (f39.clearcoat.value = p26.clearcoat, f39.clearcoatRoughness.value = p26.clearcoatRoughness, p26.clearcoatMap && (f39.clearcoatMap.value = p26.clearcoatMap, t19(p26.clearcoatMap, f39.clearcoatMapTransform)), p26.clearcoatRoughnessMap && (f39.clearcoatRoughnessMap.value = p26.clearcoatRoughnessMap, t19(p26.clearcoatRoughnessMap, f39.clearcoatRoughnessMapTransform)), p26.clearcoatNormalMap && (f39.clearcoatNormalMap.value = p26.clearcoatNormalMap, t19(p26.clearcoatNormalMap, f39.clearcoatNormalMapTransform), f39.clearcoatNormalScale.value.copy(p26.clearcoatNormalScale), p26.side === ti6 && f39.clearcoatNormalScale.value.negate())), p26.iridescence > 0 && (f39.iridescence.value = p26.iridescence, f39.iridescenceIOR.value = p26.iridescenceIOR, f39.iridescenceThicknessMinimum.value = p26.iridescenceThicknessRange[0], f39.iridescenceThicknessMaximum.value = p26.iridescenceThicknessRange[1], p26.iridescenceMap && (f39.iridescenceMap.value = p26.iridescenceMap, t19(p26.iridescenceMap, f39.iridescenceMapTransform)), p26.iridescenceThicknessMap && (f39.iridescenceThicknessMap.value = p26.iridescenceThicknessMap, t19(p26.iridescenceThicknessMap, f39.iridescenceThicknessMapTransform))), p26.transmission > 0 && (f39.transmission.value = p26.transmission, f39.transmissionSamplerMap.value = A17.texture, f39.transmissionSamplerSize.value.set(A17.width, A17.height), p26.transmissionMap && (f39.transmissionMap.value = p26.transmissionMap, t19(p26.transmissionMap, f39.transmissionMapTransform)), f39.thickness.value = p26.thickness, p26.thicknessMap && (f39.thicknessMap.value = p26.thicknessMap, t19(p26.thicknessMap, f39.thicknessMapTransform)), f39.attenuationDistance.value = p26.attenuationDistance, f39.attenuationColor.value.copy(p26.attenuationColor)), f39.specularIntensity.value = p26.specularIntensity, f39.specularColor.value.copy(p26.specularColor), p26.specularColorMap && (f39.specularColorMap.value = p26.specularColorMap, t19(p26.specularColorMap, f39.specularColorMapTransform)), p26.specularIntensityMap && (f39.specularIntensityMap.value = p26.specularIntensityMap, t19(p26.specularIntensityMap, f39.specularIntensityMapTransform));
  }
  function _19(f39, p26) {
    p26.matcap && (f39.matcap.value = p26.matcap);
  }
  function y33(f39, p26) {
    const A17 = e11.get(p26).light;
    f39.referencePosition.value.setFromMatrixPosition(A17.matrixWorld), f39.nearDistance.value = A17.shadow.camera.near, f39.farDistance.value = A17.shadow.camera.far;
  }
  return {
    refreshFogUniforms: i27,
    refreshMaterialUniforms: r24
  };
}
function m02(s18, e11, t19, i27) {
  let r24 = {}, n33 = {}, a22 = [];
  const o12 = t19.isWebGL2 ? s18.getParameter(35375) : 0;
  function l25(A17, M12) {
    const E24 = M12.program;
    i27.uniformBlockBinding(A17, E24);
  }
  function c27(A17, M12) {
    let E24 = r24[A17.id];
    E24 === void 0 && (_19(A17), E24 = h26(A17), r24[A17.id] = E24, A17.addEventListener("dispose", f39));
    const w29 = M12.program;
    i27.updateUBOMapping(A17, w29);
    const I16 = e11.render.frame;
    n33[A17.id] !== I16 && (d34(A17), n33[A17.id] = I16);
  }
  function h26(A17) {
    const M12 = u35();
    A17.__bindingPointIndex = M12;
    const E24 = s18.createBuffer(), w29 = A17.__size, I16 = A17.usage;
    return s18.bindBuffer(35345, E24), s18.bufferData(35345, w29, I16), s18.bindBuffer(35345, null), s18.bindBufferBase(35345, M12, E24), E24;
  }
  function u35() {
    for (let A17 = 0; A17 < o12; A17++)
      if (a22.indexOf(A17) === -1)
        return a22.push(A17), A17;
    return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."), 0;
  }
  function d34(A17) {
    const M12 = r24[A17.id], E24 = A17.uniforms, w29 = A17.__cache;
    s18.bindBuffer(35345, M12);
    for (let I16 = 0, D17 = E24.length; I16 < D17; I16++) {
      const P19 = E24[I16];
      if (m33(P19, I16, w29) === true) {
        const x34 = P19.__offset, C19 = Array.isArray(P19.value) ? P19.value : [P19.value];
        let G15 = 0;
        for (let z19 = 0; z19 < C19.length; z19++) {
          const U18 = C19[z19], V14 = y33(U18);
          typeof U18 == "number" ? (P19.__data[0] = U18, s18.bufferSubData(35345, x34 + G15, P19.__data)) : U18.isMatrix3 ? (P19.__data[0] = U18.elements[0], P19.__data[1] = U18.elements[1], P19.__data[2] = U18.elements[2], P19.__data[3] = U18.elements[0], P19.__data[4] = U18.elements[3], P19.__data[5] = U18.elements[4], P19.__data[6] = U18.elements[5], P19.__data[7] = U18.elements[0], P19.__data[8] = U18.elements[6], P19.__data[9] = U18.elements[7], P19.__data[10] = U18.elements[8], P19.__data[11] = U18.elements[0]) : (U18.toArray(P19.__data, G15), G15 += V14.storage / Float32Array.BYTES_PER_ELEMENT);
        }
        s18.bufferSubData(35345, x34, P19.__data);
      }
    }
    s18.bindBuffer(35345, null);
  }
  function m33(A17, M12, E24) {
    const w29 = A17.value;
    if (E24[M12] === void 0) {
      if (typeof w29 == "number")
        E24[M12] = w29;
      else {
        const I16 = Array.isArray(w29) ? w29 : [w29], D17 = [];
        for (let P19 = 0; P19 < I16.length; P19++)
          D17.push(I16[P19].clone());
        E24[M12] = D17;
      }
      return true;
    } else if (typeof w29 == "number") {
      if (E24[M12] !== w29)
        return E24[M12] = w29, true;
    } else {
      const I16 = Array.isArray(E24[M12]) ? E24[M12] : [E24[M12]], D17 = Array.isArray(w29) ? w29 : [w29];
      for (let P19 = 0; P19 < I16.length; P19++) {
        const x34 = I16[P19];
        if (x34.equals(D17[P19]) === false)
          return x34.copy(D17[P19]), true;
      }
    }
    return false;
  }
  function _19(A17) {
    const M12 = A17.uniforms;
    let E24 = 0;
    const w29 = 16;
    let I16 = 0;
    for (let D17 = 0, P19 = M12.length; D17 < P19; D17++) {
      const x34 = M12[D17], C19 = {
        boundary: 0,
        // bytes
        storage: 0
        // bytes
      }, G15 = Array.isArray(x34.value) ? x34.value : [x34.value];
      for (let z19 = 0, U18 = G15.length; z19 < U18; z19++) {
        const V14 = G15[z19], j18 = y33(V14);
        C19.boundary += j18.boundary, C19.storage += j18.storage;
      }
      if (x34.__data = new Float32Array(C19.storage / Float32Array.BYTES_PER_ELEMENT), x34.__offset = E24, D17 > 0) {
        I16 = E24 % w29;
        const z19 = w29 - I16;
        I16 !== 0 && z19 - C19.boundary < 0 && (E24 += w29 - I16, x34.__offset = E24);
      }
      E24 += C19.storage;
    }
    return I16 = E24 % w29, I16 > 0 && (E24 += w29 - I16), A17.__size = E24, A17.__cache = {}, this;
  }
  function y33(A17) {
    const M12 = {
      boundary: 0,
      // bytes
      storage: 0
      // bytes
    };
    return typeof A17 == "number" ? (M12.boundary = 4, M12.storage = 4) : A17.isVector2 ? (M12.boundary = 8, M12.storage = 8) : A17.isVector3 || A17.isColor ? (M12.boundary = 16, M12.storage = 12) : A17.isVector4 ? (M12.boundary = 16, M12.storage = 16) : A17.isMatrix3 ? (M12.boundary = 48, M12.storage = 48) : A17.isMatrix4 ? (M12.boundary = 64, M12.storage = 64) : A17.isTexture ? console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.") : console.warn("THREE.WebGLRenderer: Unsupported uniform value type.", A17), M12;
  }
  function f39(A17) {
    const M12 = A17.target;
    M12.removeEventListener("dispose", f39);
    const E24 = a22.indexOf(M12.__bindingPointIndex);
    a22.splice(E24, 1), s18.deleteBuffer(r24[M12.id]), delete r24[M12.id], delete n33[M12.id];
  }
  function p26() {
    for (const A17 in r24)
      s18.deleteBuffer(r24[A17]);
    a22 = [], r24 = {}, n33 = {};
  }
  return {
    bind: l25,
    update: c27,
    dispose: p26
  };
}
function f02() {
  const s18 = es3("canvas");
  return s18.style.display = "block", s18;
}
var Do2 = class {
  constructor(e11 = {}) {
    const {
      canvas: t19 = f02(),
      context: i27 = null,
      depth: r24 = true,
      stencil: n33 = true,
      alpha: a22 = false,
      antialias: o12 = false,
      premultipliedAlpha: l25 = true,
      preserveDrawingBuffer: c27 = false,
      powerPreference: h26 = "default",
      failIfMajorPerformanceCaveat: u35 = false
    } = e11;
    this.isWebGLRenderer = true;
    let d34;
    i27 !== null ? d34 = i27.getContextAttributes().alpha : d34 = a22;
    let m33 = null, _19 = null;
    const y33 = [], f39 = [];
    this.domElement = t19, this.debug = {
      /**
       * Enables error checking and reporting when shader programs are being compiled
       * @type {boolean}
       */
      checkShaderErrors: true,
      /**
       * Callback for custom error reporting.
       * @type {?Function}
       */
      onShaderError: null
    }, this.autoClear = true, this.autoClearColor = true, this.autoClearDepth = true, this.autoClearStencil = true, this.sortObjects = true, this.clippingPlanes = [], this.localClippingEnabled = false, this.outputEncoding = br5, this.useLegacyLights = true, this.toneMapping = Fi4, this.toneMappingExposure = 1;
    const p26 = this;
    let A17 = false, M12 = 0, E24 = 0, w29 = null, I16 = -1, D17 = null;
    const P19 = new gt11(), x34 = new gt11();
    let C19 = null, G15 = t19.width, z19 = t19.height, U18 = 1, V14 = null, j18 = null;
    const W8 = new gt11(0, 0, G15, z19), re8 = new gt11(0, 0, G15, z19);
    let $24 = false;
    const ie8 = new Po2();
    let le7 = false, fe7 = false, ue8 = null;
    const H15 = new He6(), q13 = new k18(), oe7 = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };
    function K13() {
      return w29 === null ? U18 : 1;
    }
    let F17 = i27;
    function ye7(R20, Y11) {
      for (let ee7 = 0; ee7 < R20.length; ee7++) {
        const X12 = R20[ee7], ne8 = t19.getContext(X12, Y11);
        if (ne8 !== null)
          return ne8;
      }
      return null;
    }
    try {
      const R20 = {
        alpha: true,
        depth: r24,
        stencil: n33,
        antialias: o12,
        premultipliedAlpha: l25,
        preserveDrawingBuffer: c27,
        powerPreference: h26,
        failIfMajorPerformanceCaveat: u35
      };
      if ("setAttribute" in t19 && t19.setAttribute("data-engine", `three.js r${Co2}`), t19.addEventListener("webglcontextlost", Se7, false), t19.addEventListener("webglcontextrestored", Ve8, false), t19.addEventListener("webglcontextcreationerror", nt14, false), F17 === null) {
        const Y11 = ["webgl2", "webgl", "experimental-webgl"];
        if (p26.isWebGL1Renderer === true && Y11.shift(), F17 = ye7(Y11, R20), F17 === null)
          throw ye7(Y11) ? new Error("Error creating WebGL context with your selected attributes.") : new Error("Error creating WebGL context.");
      }
      F17.getShaderPrecisionFormat === void 0 && (F17.getShaderPrecisionFormat = function() {
        return { rangeMin: 1, rangeMax: 1, precision: 1 };
      });
    } catch (R20) {
      throw console.error("THREE.WebGLRenderer: " + R20.message), R20;
    }
    let Le7, me9, De6, tt10, Pe6, je7, Mt10, vt8, St8, Tt9, $e6, ot13, kt10, N19, L11, Q11, de9, pe8, _e7, O20, ae7, Z11, xe6, Ae6;
    function Ce7() {
      Le7 = new Ef2(F17), me9 = new xf2(F17, Le7, e11), Le7.init(me9), Z11 = new l02(F17, Le7, me9), De6 = new a02(F17, Le7, me9), tt10 = new Cf2(), Pe6 = new Xg2(), je7 = new o02(F17, Le7, De6, Pe6, me9, Z11, tt10), Mt10 = new Mf2(p26), vt8 = new Tf2(p26), St8 = new Fd2(F17, me9), xe6 = new vf2(F17, Le7, St8, me9), Tt9 = new Af2(F17, St8, tt10, xe6), $e6 = new If2(F17, Tt9, St8, tt10), _e7 = new Pf2(F17, me9, je7), Q11 = new bf2(Pe6), ot13 = new jg2(p26, Mt10, vt8, Le7, me9, xe6, Q11), kt10 = new p02(p26, Pe6), N19 = new Yg2(), L11 = new e02(Le7, me9), pe8 = new _f2(p26, Mt10, vt8, De6, $e6, d34, l25), de9 = new s02(p26, $e6, me9), Ae6 = new m02(F17, tt10, me9, De6), O20 = new yf2(F17, Le7, tt10, me9), ae7 = new Lf2(F17, Le7, tt10, me9), tt10.programs = ot13.programs, p26.capabilities = me9, p26.extensions = Le7, p26.properties = Pe6, p26.renderLists = N19, p26.shadowMap = de9, p26.state = De6, p26.info = tt10;
    }
    Ce7();
    const we8 = new d02(p26, F17);
    this.xr = we8, this.getContext = function() {
      return F17;
    }, this.getContextAttributes = function() {
      return F17.getContextAttributes();
    }, this.forceContextLoss = function() {
      const R20 = Le7.get("WEBGL_lose_context");
      R20 && R20.loseContext();
    }, this.forceContextRestore = function() {
      const R20 = Le7.get("WEBGL_lose_context");
      R20 && R20.restoreContext();
    }, this.getPixelRatio = function() {
      return U18;
    }, this.setPixelRatio = function(R20) {
      R20 !== void 0 && (U18 = R20, this.setSize(G15, z19, false));
    }, this.getSize = function(R20) {
      return R20.set(G15, z19);
    }, this.setSize = function(R20, Y11, ee7 = true) {
      if (we8.isPresenting) {
        console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");
        return;
      }
      G15 = R20, z19 = Y11, t19.width = Math.floor(R20 * U18), t19.height = Math.floor(Y11 * U18), ee7 === true && (t19.style.width = R20 + "px", t19.style.height = Y11 + "px"), this.setViewport(0, 0, R20, Y11);
    }, this.getDrawingBufferSize = function(R20) {
      return R20.set(G15 * U18, z19 * U18).floor();
    }, this.setDrawingBufferSize = function(R20, Y11, ee7) {
      G15 = R20, z19 = Y11, U18 = ee7, t19.width = Math.floor(R20 * ee7), t19.height = Math.floor(Y11 * ee7), this.setViewport(0, 0, R20, Y11);
    }, this.getCurrentViewport = function(R20) {
      return R20.copy(P19);
    }, this.getViewport = function(R20) {
      return R20.copy(W8);
    }, this.setViewport = function(R20, Y11, ee7, X12) {
      R20.isVector4 ? W8.set(R20.x, R20.y, R20.z, R20.w) : W8.set(R20, Y11, ee7, X12), De6.viewport(P19.copy(W8).multiplyScalar(U18).floor());
    }, this.getScissor = function(R20) {
      return R20.copy(re8);
    }, this.setScissor = function(R20, Y11, ee7, X12) {
      R20.isVector4 ? re8.set(R20.x, R20.y, R20.z, R20.w) : re8.set(R20, Y11, ee7, X12), De6.scissor(x34.copy(re8).multiplyScalar(U18).floor());
    }, this.getScissorTest = function() {
      return $24;
    }, this.setScissorTest = function(R20) {
      De6.setScissorTest($24 = R20);
    }, this.setOpaqueSort = function(R20) {
      V14 = R20;
    }, this.setTransparentSort = function(R20) {
      j18 = R20;
    }, this.getClearColor = function(R20) {
      return R20.copy(pe8.getClearColor());
    }, this.setClearColor = function() {
      pe8.setClearColor.apply(pe8, arguments);
    }, this.getClearAlpha = function() {
      return pe8.getClearAlpha();
    }, this.setClearAlpha = function() {
      pe8.setClearAlpha.apply(pe8, arguments);
    }, this.clear = function(R20 = true, Y11 = true, ee7 = true) {
      let X12 = 0;
      R20 && (X12 |= 16384), Y11 && (X12 |= 256), ee7 && (X12 |= 1024), F17.clear(X12);
    }, this.clearColor = function() {
      this.clear(true, false, false);
    }, this.clearDepth = function() {
      this.clear(false, true, false);
    }, this.clearStencil = function() {
      this.clear(false, false, true);
    }, this.dispose = function() {
      t19.removeEventListener("webglcontextlost", Se7, false), t19.removeEventListener("webglcontextrestored", Ve8, false), t19.removeEventListener("webglcontextcreationerror", nt14, false), N19.dispose(), L11.dispose(), Pe6.dispose(), Mt10.dispose(), vt8.dispose(), $e6.dispose(), xe6.dispose(), Ae6.dispose(), ot13.dispose(), we8.dispose(), we8.removeEventListener("sessionstart", Ue7), we8.removeEventListener("sessionend", dt13), ue8 && (ue8.dispose(), ue8 = null), bt9.stop();
    };
    function Se7(R20) {
      R20.preventDefault(), console.log("THREE.WebGLRenderer: Context Lost."), A17 = true;
    }
    function Ve8() {
      console.log("THREE.WebGLRenderer: Context Restored."), A17 = false;
      const R20 = tt10.autoReset, Y11 = de9.enabled, ee7 = de9.autoUpdate, X12 = de9.needsUpdate, ne8 = de9.type;
      Ce7(), tt10.autoReset = R20, de9.enabled = Y11, de9.autoUpdate = ee7, de9.needsUpdate = X12, de9.type = ne8;
    }
    function nt14(R20) {
      console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ", R20.statusMessage);
    }
    function wt9(R20) {
      const Y11 = R20.target;
      Y11.removeEventListener("dispose", wt9), B21(Y11);
    }
    function B21(R20) {
      te7(R20), Pe6.remove(R20);
    }
    function te7(R20) {
      const Y11 = Pe6.get(R20).programs;
      Y11 !== void 0 && (Y11.forEach(function(ee7) {
        ot13.releaseProgram(ee7);
      }), R20.isShaderMaterial && ot13.releaseShaderCache(R20));
    }
    this.renderBufferDirect = function(R20, Y11, ee7, X12, ne8, Re7) {
      Y11 === null && (Y11 = oe7);
      const Be7 = ne8.isMesh && ne8.matrixWorld.determinant() < 0, Ge7 = ga2(R20, Y11, ee7, X12, ne8);
      De6.setMaterial(X12, Be7);
      let Xe7 = ee7.index, Qe8 = 1;
      X12.wireframe === true && (Xe7 = Tt9.getWireframeAttribute(ee7), Qe8 = 2);
      const Ze7 = ee7.drawRange, Ye7 = ee7.attributes.position;
      let yt13 = Ze7.start * Qe8, lt12 = (Ze7.start + Ze7.count) * Qe8;
      Re7 !== null && (yt13 = Math.max(yt13, Re7.start * Qe8), lt12 = Math.min(lt12, (Re7.start + Re7.count) * Qe8)), Xe7 !== null ? (yt13 = Math.max(yt13, 0), lt12 = Math.min(lt12, Xe7.count)) : Ye7 != null && (yt13 = Math.max(yt13, 0), lt12 = Math.min(lt12, Ye7.count));
      const Ut9 = lt12 - yt13;
      if (Ut9 < 0 || Ut9 === 1 / 0)
        return;
      xe6.setup(ne8, X12, Ge7, ee7, Xe7);
      let fi7, Et8 = O20;
      if (Xe7 !== null && (fi7 = St8.get(Xe7), Et8 = ae7, Et8.setIndex(fi7)), ne8.isMesh)
        X12.wireframe === true ? (De6.setLineWidth(X12.wireframeLinewidth * K13()), Et8.setMode(1)) : Et8.setMode(4);
      else if (ne8.isLine) {
        let Je6 = X12.linewidth;
        Je6 === void 0 && (Je6 = 1), De6.setLineWidth(Je6 * K13()), ne8.isLineSegments ? Et8.setMode(1) : ne8.isLineLoop ? Et8.setMode(2) : Et8.setMode(3);
      } else
        ne8.isPoints ? Et8.setMode(0) : ne8.isSprite && Et8.setMode(4);
      if (ne8.isInstancedMesh)
        Et8.renderInstances(yt13, Ut9, ne8.count);
      else if (ee7.isInstancedBufferGeometry) {
        const Je6 = ee7._maxInstanceCount !== void 0 ? ee7._maxInstanceCount : 1 / 0, Dr6 = Math.min(ee7.instanceCount, Je6);
        Et8.renderInstances(yt13, Ut9, Dr6);
      } else
        Et8.render(yt13, Ut9);
    }, this.compile = function(R20, Y11) {
      function ee7(X12, ne8, Re7) {
        X12.transparent === true && X12.side === ui6 && X12.forceSinglePass === false ? (X12.side = ti6, X12.needsUpdate = true, Ir6(X12, ne8, Re7), X12.side = Ei5, X12.needsUpdate = true, Ir6(X12, ne8, Re7), X12.side = ui6) : Ir6(X12, ne8, Re7);
      }
      _19 = L11.get(R20), _19.init(), f39.push(_19), R20.traverseVisible(function(X12) {
        X12.isLight && X12.layers.test(Y11.layers) && (_19.pushLight(X12), X12.castShadow && _19.pushShadow(X12));
      }), _19.setupLights(p26.useLegacyLights), R20.traverse(function(X12) {
        const ne8 = X12.material;
        if (ne8)
          if (Array.isArray(ne8))
            for (let Re7 = 0; Re7 < ne8.length; Re7++) {
              const Be7 = ne8[Re7];
              ee7(Be7, R20, X12);
            }
          else
            ee7(ne8, R20, X12);
      }), f39.pop(), _19 = null;
    };
    let ce9 = null;
    function Me7(R20) {
      ce9 && ce9(R20);
    }
    function Ue7() {
      bt9.stop();
    }
    function dt13() {
      bt9.start();
    }
    const bt9 = new wh2();
    bt9.setAnimationLoop(Me7), typeof self < "u" && bt9.setContext(self), this.setAnimationLoop = function(R20) {
      ce9 = R20, we8.setAnimationLoop(R20), R20 === null ? bt9.stop() : bt9.start();
    }, we8.addEventListener("sessionstart", Ue7), we8.addEventListener("sessionend", dt13), this.render = function(R20, Y11) {
      if (Y11 !== void 0 && Y11.isCamera !== true) {
        console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
        return;
      }
      if (A17 === true)
        return;
      R20.matrixWorldAutoUpdate === true && R20.updateMatrixWorld(), Y11.parent === null && Y11.matrixWorldAutoUpdate === true && Y11.updateMatrixWorld(), we8.enabled === true && we8.isPresenting === true && (we8.cameraAutoUpdate === true && we8.updateCamera(Y11), Y11 = we8.getCamera()), R20.isScene === true && R20.onBeforeRender(p26, R20, Y11, w29), _19 = L11.get(R20, f39.length), _19.init(), f39.push(_19), H15.multiplyMatrices(Y11.projectionMatrix, Y11.matrixWorldInverse), ie8.setFromProjectionMatrix(H15), fe7 = this.localClippingEnabled, le7 = Q11.init(this.clippingPlanes, fe7), m33 = N19.get(R20, y33.length), m33.init(), y33.push(m33), Nt9(R20, Y11, 0, p26.sortObjects), m33.finish(), p26.sortObjects === true && m33.sort(V14, j18), le7 === true && Q11.beginShadows();
      const ee7 = _19.state.shadowsArray;
      if (de9.render(ee7, R20, Y11), le7 === true && Q11.endShadows(), this.info.autoReset === true && this.info.reset(), pe8.render(m33, R20), _19.setupLights(p26.useLegacyLights), Y11.isArrayCamera) {
        const X12 = Y11.cameras;
        for (let ne8 = 0, Re7 = X12.length; ne8 < Re7; ne8++) {
          const Be7 = X12[ne8];
          Mi5(m33, R20, Be7, Be7.viewport);
        }
      } else
        Mi5(m33, R20, Y11);
      w29 !== null && (je7.updateMultisampleRenderTarget(w29), je7.updateRenderTargetMipmap(w29)), R20.isScene === true && R20.onAfterRender(p26, R20, Y11), xe6.resetDefaultState(), I16 = -1, D17 = null, f39.pop(), f39.length > 0 ? _19 = f39[f39.length - 1] : _19 = null, y33.pop(), y33.length > 0 ? m33 = y33[y33.length - 1] : m33 = null;
    };
    function Nt9(R20, Y11, ee7, X12) {
      if (R20.visible === false)
        return;
      if (R20.layers.test(Y11.layers)) {
        if (R20.isGroup)
          ee7 = R20.renderOrder;
        else if (R20.isLOD)
          R20.autoUpdate === true && R20.update(Y11);
        else if (R20.isLight)
          _19.pushLight(R20), R20.castShadow && _19.pushShadow(R20);
        else if (R20.isSprite) {
          if (!R20.frustumCulled || ie8.intersectsSprite(R20)) {
            X12 && q13.setFromMatrixPosition(R20.matrixWorld).applyMatrix4(H15);
            const Re7 = $e6.update(R20), Be7 = R20.material;
            Be7.visible && m33.push(R20, Re7, Be7, ee7, q13.z, null);
          }
        } else if ((R20.isMesh || R20.isLine || R20.isPoints) && (R20.isSkinnedMesh && R20.skeleton.frame !== tt10.render.frame && (R20.skeleton.update(), R20.skeleton.frame = tt10.render.frame), !R20.frustumCulled || ie8.intersectsObject(R20))) {
          X12 && q13.setFromMatrixPosition(R20.matrixWorld).applyMatrix4(H15);
          const Re7 = $e6.update(R20), Be7 = R20.material;
          if (Array.isArray(Be7)) {
            const Ge7 = Re7.groups;
            for (let Xe7 = 0, Qe8 = Ge7.length; Xe7 < Qe8; Xe7++) {
              const Ze7 = Ge7[Xe7], Ye7 = Be7[Ze7.materialIndex];
              Ye7 && Ye7.visible && m33.push(R20, Re7, Ye7, ee7, q13.z, Ze7);
            }
          } else
            Be7.visible && m33.push(R20, Re7, Be7, ee7, q13.z, null);
        }
      }
      const ne8 = R20.children;
      for (let Re7 = 0, Be7 = ne8.length; Re7 < Be7; Re7++)
        Nt9(ne8[Re7], Y11, ee7, X12);
    }
    function Mi5(R20, Y11, ee7, X12) {
      const ne8 = R20.opaque, Re7 = R20.transmissive, Be7 = R20.transparent;
      _19.setupLightsView(ee7), le7 === true && Q11.setGlobalState(p26.clippingPlanes, ee7), Re7.length > 0 && it14(ne8, Re7, Y11, ee7), X12 && De6.viewport(P19.copy(X12)), ne8.length > 0 && Jt7(ne8, Y11, ee7), Re7.length > 0 && Jt7(Re7, Y11, ee7), Be7.length > 0 && Jt7(Be7, Y11, ee7), De6.buffers.depth.setTest(true), De6.buffers.depth.setMask(true), De6.buffers.color.setMask(true), De6.setPolygonOffset(false);
    }
    function it14(R20, Y11, ee7, X12) {
      if (ue8 === null) {
        const Ge7 = me9.isWebGL2;
        ue8 = new Mr5(1024, 1024, {
          generateMipmaps: true,
          type: Le7.has("EXT_color_buffer_half_float") ? $n5 : xr4,
          minFilter: Hi3,
          samples: Ge7 && o12 === true ? 4 : 0
        });
      }
      const ne8 = p26.getRenderTarget();
      p26.setRenderTarget(ue8), p26.clear();
      const Re7 = p26.toneMapping;
      p26.toneMapping = Fi4, Jt7(R20, ee7, X12), je7.updateMultisampleRenderTarget(ue8), je7.updateRenderTargetMipmap(ue8);
      let Be7 = false;
      for (let Ge7 = 0, Xe7 = Y11.length; Ge7 < Xe7; Ge7++) {
        const Qe8 = Y11[Ge7], Ze7 = Qe8.object, Ye7 = Qe8.geometry, yt13 = Qe8.material, lt12 = Qe8.group;
        if (yt13.side === ui6 && Ze7.layers.test(X12.layers)) {
          const Ut9 = yt13.side;
          yt13.side = ti6, yt13.needsUpdate = true, ai7(Ze7, ee7, X12, Ye7, yt13, lt12), yt13.side = Ut9, yt13.needsUpdate = true, Be7 = true;
        }
      }
      Be7 === true && (je7.updateMultisampleRenderTarget(ue8), je7.updateRenderTargetMipmap(ue8)), p26.setRenderTarget(ne8), p26.toneMapping = Re7;
    }
    function Jt7(R20, Y11, ee7) {
      const X12 = Y11.isScene === true ? Y11.overrideMaterial : null;
      for (let ne8 = 0, Re7 = R20.length; ne8 < Re7; ne8++) {
        const Be7 = R20[ne8], Ge7 = Be7.object, Xe7 = Be7.geometry, Qe8 = X12 === null ? Be7.material : X12, Ze7 = Be7.group;
        Ge7.layers.test(ee7.layers) && ai7(Ge7, Y11, ee7, Xe7, Qe8, Ze7);
      }
    }
    function ai7(R20, Y11, ee7, X12, ne8, Re7) {
      R20.onBeforeRender(p26, Y11, ee7, X12, ne8, Re7), R20.modelViewMatrix.multiplyMatrices(ee7.matrixWorldInverse, R20.matrixWorld), R20.normalMatrix.getNormalMatrix(R20.modelViewMatrix), ne8.onBeforeRender(p26, Y11, ee7, X12, R20, Re7), ne8.transparent === true && ne8.side === ui6 && ne8.forceSinglePass === false ? (ne8.side = ti6, ne8.needsUpdate = true, p26.renderBufferDirect(ee7, Y11, X12, ne8, R20, Re7), ne8.side = Ei5, ne8.needsUpdate = true, p26.renderBufferDirect(ee7, Y11, X12, ne8, R20, Re7), ne8.side = ui6) : p26.renderBufferDirect(ee7, Y11, X12, ne8, R20, Re7), R20.onAfterRender(p26, Y11, ee7, X12, ne8, Re7);
    }
    function Ir6(R20, Y11, ee7) {
      Y11.isScene !== true && (Y11 = oe7);
      const X12 = Pe6.get(R20), ne8 = _19.state.lights, Re7 = _19.state.shadowsArray, Be7 = ne8.state.version, Ge7 = ot13.getParameters(R20, ne8.state, Re7, Y11, ee7), Xe7 = ot13.getProgramCacheKey(Ge7);
      let Qe8 = X12.programs;
      X12.environment = R20.isMeshStandardMaterial ? Y11.environment : null, X12.fog = Y11.fog, X12.envMap = (R20.isMeshStandardMaterial ? vt8 : Mt10).get(R20.envMap || X12.environment), Qe8 === void 0 && (R20.addEventListener("dispose", wt9), Qe8 = /* @__PURE__ */ new Map(), X12.programs = Qe8);
      let Ze7 = Qe8.get(Xe7);
      if (Ze7 !== void 0) {
        if (X12.currentProgram === Ze7 && X12.lightsStateVersion === Be7)
          return hs2(R20, Ge7), Ze7;
      } else
        Ge7.uniforms = ot13.getUniforms(R20), R20.onBuild(ee7, Ge7, p26), R20.onBeforeCompile(Ge7, p26), Ze7 = ot13.acquireProgram(Ge7, Xe7), Qe8.set(Xe7, Ze7), X12.uniforms = Ge7.uniforms;
      const Ye7 = X12.uniforms;
      (!R20.isShaderMaterial && !R20.isRawShaderMaterial || R20.clipping === true) && (Ye7.clippingPlanes = Q11.uniform), hs2(R20, Ge7), X12.needsLights = va2(R20), X12.lightsStateVersion = Be7, X12.needsLights && (Ye7.ambientLightColor.value = ne8.state.ambient, Ye7.lightProbe.value = ne8.state.probe, Ye7.directionalLights.value = ne8.state.directional, Ye7.directionalLightShadows.value = ne8.state.directionalShadow, Ye7.spotLights.value = ne8.state.spot, Ye7.spotLightShadows.value = ne8.state.spotShadow, Ye7.rectAreaLights.value = ne8.state.rectArea, Ye7.ltc_1.value = ne8.state.rectAreaLTC1, Ye7.ltc_2.value = ne8.state.rectAreaLTC2, Ye7.pointLights.value = ne8.state.point, Ye7.pointLightShadows.value = ne8.state.pointShadow, Ye7.hemisphereLights.value = ne8.state.hemi, Ye7.directionalShadowMap.value = ne8.state.directionalShadowMap, Ye7.directionalShadowMatrix.value = ne8.state.directionalShadowMatrix, Ye7.spotShadowMap.value = ne8.state.spotShadowMap, Ye7.spotLightMatrix.value = ne8.state.spotLightMatrix, Ye7.spotLightMap.value = ne8.state.spotLightMap, Ye7.pointShadowMap.value = ne8.state.pointShadowMap, Ye7.pointShadowMatrix.value = ne8.state.pointShadowMatrix);
      const yt13 = Ze7.getUniforms(), lt12 = Js2.seqWithValue(yt13.seq, Ye7);
      return X12.currentProgram = Ze7, X12.uniformsList = lt12, Ze7;
    }
    function hs2(R20, Y11) {
      const ee7 = Pe6.get(R20);
      ee7.outputEncoding = Y11.outputEncoding, ee7.instancing = Y11.instancing, ee7.skinning = Y11.skinning, ee7.morphTargets = Y11.morphTargets, ee7.morphNormals = Y11.morphNormals, ee7.morphColors = Y11.morphColors, ee7.morphTargetsCount = Y11.morphTargetsCount, ee7.numClippingPlanes = Y11.numClippingPlanes, ee7.numIntersection = Y11.numClipIntersection, ee7.vertexAlphas = Y11.vertexAlphas, ee7.vertexTangents = Y11.vertexTangents, ee7.toneMapping = Y11.toneMapping;
    }
    function ga2(R20, Y11, ee7, X12, ne8) {
      Y11.isScene !== true && (Y11 = oe7), je7.resetTextureUnits();
      const Re7 = Y11.fog, Be7 = X12.isMeshStandardMaterial ? Y11.environment : null, Ge7 = w29 === null ? p26.outputEncoding : w29.isXRRenderTarget === true ? w29.texture.encoding : br5, Xe7 = (X12.isMeshStandardMaterial ? vt8 : Mt10).get(X12.envMap || Be7), Qe8 = X12.vertexColors === true && !!ee7.attributes.color && ee7.attributes.color.itemSize === 4, Ze7 = !!X12.normalMap && !!ee7.attributes.tangent, Ye7 = !!ee7.morphAttributes.position, yt13 = !!ee7.morphAttributes.normal, lt12 = !!ee7.morphAttributes.color, Ut9 = X12.toneMapped ? p26.toneMapping : Fi4, fi7 = ee7.morphAttributes.position || ee7.morphAttributes.normal || ee7.morphAttributes.color, Et8 = fi7 !== void 0 ? fi7.length : 0, Je6 = Pe6.get(X12), Dr6 = _19.state.lights;
      if (le7 === true && (fe7 === true || R20 !== D17)) {
        const Kt7 = R20 === D17 && X12.id === I16;
        Q11.setState(X12, R20, Kt7);
      }
      let kn6 = false;
      X12.version === Je6.__version ? (Je6.needsLights && Je6.lightsStateVersion !== Dr6.state.version || Je6.outputEncoding !== Ge7 || ne8.isInstancedMesh && Je6.instancing === false || !ne8.isInstancedMesh && Je6.instancing === true || ne8.isSkinnedMesh && Je6.skinning === false || !ne8.isSkinnedMesh && Je6.skinning === true || Je6.envMap !== Xe7 || X12.fog === true && Je6.fog !== Re7 || Je6.numClippingPlanes !== void 0 && (Je6.numClippingPlanes !== Q11.numPlanes || Je6.numIntersection !== Q11.numIntersection) || Je6.vertexAlphas !== Qe8 || Je6.vertexTangents !== Ze7 || Je6.morphTargets !== Ye7 || Je6.morphNormals !== yt13 || Je6.morphColors !== lt12 || Je6.toneMapping !== Ut9 || me9.isWebGL2 === true && Je6.morphTargetsCount !== Et8) && (kn6 = true) : (kn6 = true, Je6.__version = X12.version);
      let Li5 = Je6.currentProgram;
      kn6 === true && (Li5 = Ir6(X12, Y11, ne8));
      let us2 = false, ji3 = false, kr6 = false;
      const At8 = Li5.getUniforms(), Ci5 = Je6.uniforms;
      if (De6.useProgram(Li5.program) && (us2 = true, ji3 = true, kr6 = true), X12.id !== I16 && (I16 = X12.id, ji3 = true), us2 || D17 !== R20) {
        if (At8.setValue(F17, "projectionMatrix", R20.projectionMatrix), me9.logarithmicDepthBuffer && At8.setValue(
          F17,
          "logDepthBufFC",
          2 / (Math.log(R20.far + 1) / Math.LN2)
        ), D17 !== R20 && (D17 = R20, ji3 = true, kr6 = true), X12.isShaderMaterial || X12.isMeshPhongMaterial || X12.isMeshToonMaterial || X12.isMeshStandardMaterial || X12.envMap) {
          const Kt7 = At8.map.cameraPosition;
          Kt7 !== void 0 && Kt7.setValue(
            F17,
            q13.setFromMatrixPosition(R20.matrixWorld)
          );
        }
        (X12.isMeshPhongMaterial || X12.isMeshToonMaterial || X12.isMeshLambertMaterial || X12.isMeshBasicMaterial || X12.isMeshStandardMaterial || X12.isShaderMaterial) && At8.setValue(F17, "isOrthographic", R20.isOrthographicCamera === true), (X12.isMeshPhongMaterial || X12.isMeshToonMaterial || X12.isMeshLambertMaterial || X12.isMeshBasicMaterial || X12.isMeshStandardMaterial || X12.isShaderMaterial || X12.isShadowMaterial || ne8.isSkinnedMesh) && At8.setValue(F17, "viewMatrix", R20.matrixWorldInverse);
      }
      if (ne8.isSkinnedMesh) {
        At8.setOptional(F17, ne8, "bindMatrix"), At8.setOptional(F17, ne8, "bindMatrixInverse");
        const Kt7 = ne8.skeleton;
        Kt7 && (me9.floatVertexTextures ? (Kt7.boneTexture === null && Kt7.computeBoneTexture(), At8.setValue(F17, "boneTexture", Kt7.boneTexture, je7), At8.setValue(F17, "boneTextureSize", Kt7.boneTextureSize)) : console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."));
      }
      const Ur6 = ee7.morphAttributes;
      if ((Ur6.position !== void 0 || Ur6.normal !== void 0 || Ur6.color !== void 0 && me9.isWebGL2 === true) && _e7.update(ne8, ee7, Li5), (ji3 || Je6.receiveShadow !== ne8.receiveShadow) && (Je6.receiveShadow = ne8.receiveShadow, At8.setValue(F17, "receiveShadow", ne8.receiveShadow)), X12.isMeshGouraudMaterial && X12.envMap !== null && (Ci5.envMap.value = Xe7, Ci5.flipEnvMap.value = Xe7.isCubeTexture && Xe7.isRenderTargetTexture === false ? -1 : 1), ji3 && (At8.setValue(F17, "toneMappingExposure", p26.toneMappingExposure), Je6.needsLights && _a2(Ci5, kr6), Re7 && X12.fog === true && kt10.refreshFogUniforms(Ci5, Re7), kt10.refreshMaterialUniforms(Ci5, X12, U18, z19, ue8), Js2.upload(F17, Je6.uniformsList, Ci5, je7)), X12.isShaderMaterial && X12.uniformsNeedUpdate === true && (Js2.upload(F17, Je6.uniformsList, Ci5, je7), X12.uniformsNeedUpdate = false), X12.isSpriteMaterial && At8.setValue(F17, "center", ne8.center), At8.setValue(F17, "modelViewMatrix", ne8.modelViewMatrix), At8.setValue(F17, "normalMatrix", ne8.normalMatrix), At8.setValue(F17, "modelMatrix", ne8.matrixWorld), X12.isShaderMaterial || X12.isRawShaderMaterial) {
        const Kt7 = X12.uniformsGroups;
        for (let Or6 = 0, ya2 = Kt7.length; Or6 < ya2; Or6++)
          if (me9.isWebGL2) {
            const ds2 = Kt7[Or6];
            Ae6.update(ds2, Li5), Ae6.bind(ds2, Li5);
          } else
            console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");
      }
      return Li5;
    }
    function _a2(R20, Y11) {
      R20.ambientLightColor.needsUpdate = Y11, R20.lightProbe.needsUpdate = Y11, R20.directionalLights.needsUpdate = Y11, R20.directionalLightShadows.needsUpdate = Y11, R20.pointLights.needsUpdate = Y11, R20.pointLightShadows.needsUpdate = Y11, R20.spotLights.needsUpdate = Y11, R20.spotLightShadows.needsUpdate = Y11, R20.rectAreaLights.needsUpdate = Y11, R20.hemisphereLights.needsUpdate = Y11;
    }
    function va2(R20) {
      return R20.isMeshLambertMaterial || R20.isMeshToonMaterial || R20.isMeshPhongMaterial || R20.isMeshStandardMaterial || R20.isShadowMaterial || R20.isShaderMaterial && R20.lights === true;
    }
    this.getActiveCubeFace = function() {
      return M12;
    }, this.getActiveMipmapLevel = function() {
      return E24;
    }, this.getRenderTarget = function() {
      return w29;
    }, this.setRenderTargetTextures = function(R20, Y11, ee7) {
      Pe6.get(R20.texture).__webglTexture = Y11, Pe6.get(R20.depthTexture).__webglTexture = ee7;
      const X12 = Pe6.get(R20);
      X12.__hasExternalTextures = true, X12.__hasExternalTextures && (X12.__autoAllocateDepthBuffer = ee7 === void 0, X12.__autoAllocateDepthBuffer || Le7.has("WEBGL_multisampled_render_to_texture") === true && (console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"), X12.__useRenderToTexture = false));
    }, this.setRenderTargetFramebuffer = function(R20, Y11) {
      const ee7 = Pe6.get(R20);
      ee7.__webglFramebuffer = Y11, ee7.__useDefaultFramebuffer = Y11 === void 0;
    }, this.setRenderTarget = function(R20, Y11 = 0, ee7 = 0) {
      w29 = R20, M12 = Y11, E24 = ee7;
      let X12 = true, ne8 = null, Re7 = false, Be7 = false;
      if (R20) {
        const Ge7 = Pe6.get(R20);
        Ge7.__useDefaultFramebuffer !== void 0 ? (De6.bindFramebuffer(36160, null), X12 = false) : Ge7.__webglFramebuffer === void 0 ? je7.setupRenderTarget(R20) : Ge7.__hasExternalTextures && je7.rebindTextures(R20, Pe6.get(R20.texture).__webglTexture, Pe6.get(R20.depthTexture).__webglTexture);
        const Xe7 = R20.texture;
        (Xe7.isData3DTexture || Xe7.isDataArrayTexture || Xe7.isCompressedArrayTexture) && (Be7 = true);
        const Qe8 = Pe6.get(R20).__webglFramebuffer;
        R20.isWebGLCubeRenderTarget ? (ne8 = Qe8[Y11], Re7 = true) : me9.isWebGL2 && R20.samples > 0 && je7.useMultisampledRTT(R20) === false ? ne8 = Pe6.get(R20).__webglMultisampledFramebuffer : ne8 = Qe8, P19.copy(R20.viewport), x34.copy(R20.scissor), C19 = R20.scissorTest;
      } else
        P19.copy(W8).multiplyScalar(U18).floor(), x34.copy(re8).multiplyScalar(U18).floor(), C19 = $24;
      if (De6.bindFramebuffer(36160, ne8) && me9.drawBuffers && X12 && De6.drawBuffers(R20, ne8), De6.viewport(P19), De6.scissor(x34), De6.setScissorTest(C19), Re7) {
        const Ge7 = Pe6.get(R20.texture);
        F17.framebufferTexture2D(36160, 36064, 34069 + Y11, Ge7.__webglTexture, ee7);
      } else if (Be7) {
        const Ge7 = Pe6.get(R20.texture), Xe7 = Y11 || 0;
        F17.framebufferTextureLayer(36160, 36064, Ge7.__webglTexture, ee7 || 0, Xe7);
      }
      I16 = -1;
    }, this.readRenderTargetPixels = function(R20, Y11, ee7, X12, ne8, Re7, Be7) {
      if (!(R20 && R20.isWebGLRenderTarget)) {
        console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");
        return;
      }
      let Ge7 = Pe6.get(R20).__webglFramebuffer;
      if (R20.isWebGLCubeRenderTarget && Be7 !== void 0 && (Ge7 = Ge7[Be7]), Ge7) {
        De6.bindFramebuffer(36160, Ge7);
        try {
          const Xe7 = R20.texture, Qe8 = Xe7.format, Ze7 = Xe7.type;
          if (Qe8 !== di6 && Z11.convert(Qe8) !== F17.getParameter(35739)) {
            console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
            return;
          }
          const Ye7 = Ze7 === $n5 && (Le7.has("EXT_color_buffer_half_float") || me9.isWebGL2 && Le7.has("EXT_color_buffer_float"));
          if (Ze7 !== xr4 && Z11.convert(Ze7) !== F17.getParameter(35738) && // Edge and Chrome Mac < 52 (#9513)
          !(Ze7 === er5 && (me9.isWebGL2 || Le7.has("OES_texture_float") || Le7.has("WEBGL_color_buffer_float"))) && // Chrome Mac >= 52 and Firefox
          !Ye7) {
            console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");
            return;
          }
          Y11 >= 0 && Y11 <= R20.width - X12 && ee7 >= 0 && ee7 <= R20.height - ne8 && F17.readPixels(Y11, ee7, X12, ne8, Z11.convert(Qe8), Z11.convert(Ze7), Re7);
        } finally {
          const Xe7 = w29 !== null ? Pe6.get(w29).__webglFramebuffer : null;
          De6.bindFramebuffer(36160, Xe7);
        }
      }
    }, this.copyFramebufferToTexture = function(R20, Y11, ee7 = 0) {
      const X12 = Math.pow(2, -ee7), ne8 = Math.floor(Y11.image.width * X12), Re7 = Math.floor(Y11.image.height * X12);
      je7.setTexture2D(Y11, 0), F17.copyTexSubImage2D(3553, ee7, 0, 0, R20.x, R20.y, ne8, Re7), De6.unbindTexture();
    }, this.copyTextureToTexture = function(R20, Y11, ee7, X12 = 0) {
      const ne8 = Y11.image.width, Re7 = Y11.image.height, Be7 = Z11.convert(ee7.format), Ge7 = Z11.convert(ee7.type);
      je7.setTexture2D(ee7, 0), F17.pixelStorei(37440, ee7.flipY), F17.pixelStorei(37441, ee7.premultiplyAlpha), F17.pixelStorei(3317, ee7.unpackAlignment), Y11.isDataTexture ? F17.texSubImage2D(3553, X12, R20.x, R20.y, ne8, Re7, Be7, Ge7, Y11.image.data) : Y11.isCompressedTexture ? F17.compressedTexSubImage2D(3553, X12, R20.x, R20.y, Y11.mipmaps[0].width, Y11.mipmaps[0].height, Be7, Y11.mipmaps[0].data) : F17.texSubImage2D(3553, X12, R20.x, R20.y, Be7, Ge7, Y11.image), X12 === 0 && ee7.generateMipmaps && F17.generateMipmap(3553), De6.unbindTexture();
    }, this.copyTextureToTexture3D = function(R20, Y11, ee7, X12, ne8 = 0) {
      if (p26.isWebGL1Renderer) {
        console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");
        return;
      }
      const Re7 = R20.max.x - R20.min.x + 1, Be7 = R20.max.y - R20.min.y + 1, Ge7 = R20.max.z - R20.min.z + 1, Xe7 = Z11.convert(X12.format), Qe8 = Z11.convert(X12.type);
      let Ze7;
      if (X12.isData3DTexture)
        je7.setTexture3D(X12, 0), Ze7 = 32879;
      else if (X12.isDataArrayTexture)
        je7.setTexture2DArray(X12, 0), Ze7 = 35866;
      else {
        console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");
        return;
      }
      F17.pixelStorei(37440, X12.flipY), F17.pixelStorei(37441, X12.premultiplyAlpha), F17.pixelStorei(3317, X12.unpackAlignment);
      const Ye7 = F17.getParameter(3314), yt13 = F17.getParameter(32878), lt12 = F17.getParameter(3316), Ut9 = F17.getParameter(3315), fi7 = F17.getParameter(32877), Et8 = ee7.isCompressedTexture ? ee7.mipmaps[0] : ee7.image;
      F17.pixelStorei(3314, Et8.width), F17.pixelStorei(32878, Et8.height), F17.pixelStorei(3316, R20.min.x), F17.pixelStorei(3315, R20.min.y), F17.pixelStorei(32877, R20.min.z), ee7.isDataTexture || ee7.isData3DTexture ? F17.texSubImage3D(Ze7, ne8, Y11.x, Y11.y, Y11.z, Re7, Be7, Ge7, Xe7, Qe8, Et8.data) : ee7.isCompressedArrayTexture ? (console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."), F17.compressedTexSubImage3D(Ze7, ne8, Y11.x, Y11.y, Y11.z, Re7, Be7, Ge7, Xe7, Et8.data)) : F17.texSubImage3D(Ze7, ne8, Y11.x, Y11.y, Y11.z, Re7, Be7, Ge7, Xe7, Qe8, Et8), F17.pixelStorei(3314, Ye7), F17.pixelStorei(32878, yt13), F17.pixelStorei(3316, lt12), F17.pixelStorei(3315, Ut9), F17.pixelStorei(32877, fi7), ne8 === 0 && X12.generateMipmaps && F17.generateMipmap(Ze7), De6.unbindTexture();
    }, this.initTexture = function(R20) {
      R20.isCubeTexture ? je7.setTextureCube(R20, 0) : R20.isData3DTexture ? je7.setTexture3D(R20, 0) : R20.isDataArrayTexture || R20.isCompressedArrayTexture ? je7.setTexture2DArray(R20, 0) : je7.setTexture2D(R20, 0), De6.unbindTexture();
    }, this.resetState = function() {
      M12 = 0, E24 = 0, w29 = null, De6.reset(), xe6.reset();
    }, typeof __THREE_DEVTOOLS__ < "u" && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", { detail: this }));
  }
  get physicallyCorrectLights() {
    return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."), !this.useLegacyLights;
  }
  set physicallyCorrectLights(e11) {
    console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."), this.useLegacyLights = !e11;
  }
};
var g02 = class extends Do2 {
};
g02.prototype.isWebGL1Renderer = true;
var ko2 = class extends _t7 {
  constructor() {
    super(), this.isScene = true, this.type = "Scene", this.background = null, this.environment = null, this.fog = null, this.backgroundBlurriness = 0, this.backgroundIntensity = 1, this.overrideMaterial = null, typeof __THREE_DEVTOOLS__ < "u" && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", { detail: this }));
  }
  copy(e11, t19) {
    return super.copy(e11, t19), e11.background !== null && (this.background = e11.background.clone()), e11.environment !== null && (this.environment = e11.environment.clone()), e11.fog !== null && (this.fog = e11.fog.clone()), this.backgroundBlurriness = e11.backgroundBlurriness, this.backgroundIntensity = e11.backgroundIntensity, e11.overrideMaterial !== null && (this.overrideMaterial = e11.overrideMaterial.clone()), this.matrixAutoUpdate = e11.matrixAutoUpdate, this;
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return this.fog !== null && (t19.object.fog = this.fog.toJSON()), this.backgroundBlurriness > 0 && (t19.object.backgroundBlurriness = this.backgroundBlurriness), this.backgroundIntensity !== 1 && (t19.object.backgroundIntensity = this.backgroundIntensity), t19;
  }
  get autoUpdate() {
    return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."), this.matrixWorldAutoUpdate;
  }
  set autoUpdate(e11) {
    console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."), this.matrixWorldAutoUpdate = e11;
  }
};
var _02 = class {
  constructor(e11, t19) {
    this.isInterleavedBuffer = true, this.array = e11, this.stride = t19, this.count = e11 !== void 0 ? e11.length / t19 : 0, this.usage = go2, this.updateRange = { offset: 0, count: -1 }, this.version = 0, this.uuid = bi6();
  }
  onUploadCallback() {
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
  setUsage(e11) {
    return this.usage = e11, this;
  }
  copy(e11) {
    return this.array = new e11.array.constructor(e11.array), this.count = e11.count, this.stride = e11.stride, this.usage = e11.usage, this;
  }
  copyAt(e11, t19, i27) {
    e11 *= this.stride, i27 *= t19.stride;
    for (let r24 = 0, n33 = this.stride; r24 < n33; r24++)
      this.array[e11 + r24] = t19.array[i27 + r24];
    return this;
  }
  set(e11, t19 = 0) {
    return this.array.set(e11, t19), this;
  }
  clone(e11) {
    e11.arrayBuffers === void 0 && (e11.arrayBuffers = {}), this.array.buffer._uuid === void 0 && (this.array.buffer._uuid = bi6()), e11.arrayBuffers[this.array.buffer._uuid] === void 0 && (e11.arrayBuffers[this.array.buffer._uuid] = this.array.slice(0).buffer);
    const t19 = new this.array.constructor(e11.arrayBuffers[this.array.buffer._uuid]), i27 = new this.constructor(t19, this.stride);
    return i27.setUsage(this.usage), i27;
  }
  onUpload(e11) {
    return this.onUploadCallback = e11, this;
  }
  toJSON(e11) {
    return e11.arrayBuffers === void 0 && (e11.arrayBuffers = {}), this.array.buffer._uuid === void 0 && (this.array.buffer._uuid = bi6()), e11.arrayBuffers[this.array.buffer._uuid] === void 0 && (e11.arrayBuffers[this.array.buffer._uuid] = Array.from(new Uint32Array(this.array.buffer))), {
      uuid: this.uuid,
      buffer: this.array.buffer._uuid,
      type: this.array.constructor.name,
      stride: this.stride
    };
  }
};
var $t6 = new k18();
var Uo2 = class _Uo {
  constructor(e11, t19, i27, r24 = false) {
    this.isInterleavedBufferAttribute = true, this.name = "", this.data = e11, this.itemSize = t19, this.offset = i27, this.normalized = r24;
  }
  get count() {
    return this.data.count;
  }
  get array() {
    return this.data.array;
  }
  set needsUpdate(e11) {
    this.data.needsUpdate = e11;
  }
  applyMatrix4(e11) {
    for (let t19 = 0, i27 = this.data.count; t19 < i27; t19++)
      $t6.fromBufferAttribute(this, t19), $t6.applyMatrix4(e11), this.setXYZ(t19, $t6.x, $t6.y, $t6.z);
    return this;
  }
  applyNormalMatrix(e11) {
    for (let t19 = 0, i27 = this.count; t19 < i27; t19++)
      $t6.fromBufferAttribute(this, t19), $t6.applyNormalMatrix(e11), this.setXYZ(t19, $t6.x, $t6.y, $t6.z);
    return this;
  }
  transformDirection(e11) {
    for (let t19 = 0, i27 = this.count; t19 < i27; t19++)
      $t6.fromBufferAttribute(this, t19), $t6.transformDirection(e11), this.setXYZ(t19, $t6.x, $t6.y, $t6.z);
    return this;
  }
  setX(e11, t19) {
    return this.normalized && (t19 = mt10(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset] = t19, this;
  }
  setY(e11, t19) {
    return this.normalized && (t19 = mt10(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset + 1] = t19, this;
  }
  setZ(e11, t19) {
    return this.normalized && (t19 = mt10(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset + 2] = t19, this;
  }
  setW(e11, t19) {
    return this.normalized && (t19 = mt10(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset + 3] = t19, this;
  }
  getX(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  getY(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset + 1];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  getZ(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset + 2];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  getW(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset + 3];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  setXY(e11, t19, i27) {
    return e11 = e11 * this.data.stride + this.offset, this.normalized && (t19 = mt10(t19, this.array), i27 = mt10(i27, this.array)), this.data.array[e11 + 0] = t19, this.data.array[e11 + 1] = i27, this;
  }
  setXYZ(e11, t19, i27, r24) {
    return e11 = e11 * this.data.stride + this.offset, this.normalized && (t19 = mt10(t19, this.array), i27 = mt10(i27, this.array), r24 = mt10(r24, this.array)), this.data.array[e11 + 0] = t19, this.data.array[e11 + 1] = i27, this.data.array[e11 + 2] = r24, this;
  }
  setXYZW(e11, t19, i27, r24, n33) {
    return e11 = e11 * this.data.stride + this.offset, this.normalized && (t19 = mt10(t19, this.array), i27 = mt10(i27, this.array), r24 = mt10(r24, this.array), n33 = mt10(n33, this.array)), this.data.array[e11 + 0] = t19, this.data.array[e11 + 1] = i27, this.data.array[e11 + 2] = r24, this.data.array[e11 + 3] = n33, this;
  }
  clone(e11) {
    if (e11 === void 0) {
      console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");
      const t19 = [];
      for (let i27 = 0; i27 < this.count; i27++) {
        const r24 = i27 * this.data.stride + this.offset;
        for (let n33 = 0; n33 < this.itemSize; n33++)
          t19.push(this.data.array[r24 + n33]);
      }
      return new Ft6(new this.array.constructor(t19), this.itemSize, this.normalized);
    } else
      return e11.interleavedBuffers === void 0 && (e11.interleavedBuffers = {}), e11.interleavedBuffers[this.data.uuid] === void 0 && (e11.interleavedBuffers[this.data.uuid] = this.data.clone(e11)), new _Uo(e11.interleavedBuffers[this.data.uuid], this.itemSize, this.offset, this.normalized);
  }
  toJSON(e11) {
    if (e11 === void 0) {
      console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");
      const t19 = [];
      for (let i27 = 0; i27 < this.count; i27++) {
        const r24 = i27 * this.data.stride + this.offset;
        for (let n33 = 0; n33 < this.itemSize; n33++)
          t19.push(this.data.array[r24 + n33]);
      }
      return {
        itemSize: this.itemSize,
        type: this.array.constructor.name,
        array: t19,
        normalized: this.normalized
      };
    } else
      return e11.interleavedBuffers === void 0 && (e11.interleavedBuffers = {}), e11.interleavedBuffers[this.data.uuid] === void 0 && (e11.interleavedBuffers[this.data.uuid] = this.data.toJSON(e11)), {
        isInterleavedBufferAttribute: true,
        itemSize: this.itemSize,
        data: this.data.uuid,
        offset: this.offset,
        normalized: this.normalized
      };
  }
};
var gc2 = new k18();
var _c2 = new gt11();
var vc2 = new gt11();
var v02 = new k18();
var yc2 = new He6();
var nn3 = new k18();
var Lh2 = class extends Rt8 {
  constructor(e11, t19) {
    super(e11, t19), this.isSkinnedMesh = true, this.type = "SkinnedMesh", this.bindMode = "attached", this.bindMatrix = new He6(), this.bindMatrixInverse = new He6(), this.boundingBox = null, this.boundingSphere = null;
  }
  computeBoundingBox() {
    const e11 = this.geometry;
    this.boundingBox === null && (this.boundingBox = new Vi3()), this.boundingBox.makeEmpty();
    const t19 = e11.getAttribute("position");
    for (let i27 = 0; i27 < t19.count; i27++)
      nn3.fromBufferAttribute(t19, i27), this.applyBoneTransform(i27, nn3), this.boundingBox.expandByPoint(nn3);
  }
  computeBoundingSphere() {
    const e11 = this.geometry;
    this.boundingSphere === null && (this.boundingSphere = new Gi2()), this.boundingSphere.makeEmpty();
    const t19 = e11.getAttribute("position");
    for (let i27 = 0; i27 < t19.count; i27++)
      nn3.fromBufferAttribute(t19, i27), this.applyBoneTransform(i27, nn3), this.boundingSphere.expandByPoint(nn3);
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.bindMode = e11.bindMode, this.bindMatrix.copy(e11.bindMatrix), this.bindMatrixInverse.copy(e11.bindMatrixInverse), this.skeleton = e11.skeleton, this;
  }
  bind(e11, t19) {
    this.skeleton = e11, t19 === void 0 && (this.updateMatrixWorld(true), this.skeleton.calculateInverses(), t19 = this.matrixWorld), this.bindMatrix.copy(t19), this.bindMatrixInverse.copy(t19).invert();
  }
  pose() {
    this.skeleton.pose();
  }
  normalizeSkinWeights() {
    const e11 = new gt11(), t19 = this.geometry.attributes.skinWeight;
    for (let i27 = 0, r24 = t19.count; i27 < r24; i27++) {
      e11.fromBufferAttribute(t19, i27);
      const n33 = 1 / e11.manhattanLength();
      n33 !== 1 / 0 ? e11.multiplyScalar(n33) : e11.set(1, 0, 0, 0), t19.setXYZW(i27, e11.x, e11.y, e11.z, e11.w);
    }
  }
  updateMatrixWorld(e11) {
    super.updateMatrixWorld(e11), this.bindMode === "attached" ? this.bindMatrixInverse.copy(this.matrixWorld).invert() : this.bindMode === "detached" ? this.bindMatrixInverse.copy(this.bindMatrix).invert() : console.warn("THREE.SkinnedMesh: Unrecognized bindMode: " + this.bindMode);
  }
  applyBoneTransform(e11, t19) {
    const i27 = this.skeleton, r24 = this.geometry;
    _c2.fromBufferAttribute(r24.attributes.skinIndex, e11), vc2.fromBufferAttribute(r24.attributes.skinWeight, e11), gc2.copy(t19).applyMatrix4(this.bindMatrix), t19.set(0, 0, 0);
    for (let n33 = 0; n33 < 4; n33++) {
      const a22 = vc2.getComponent(n33);
      if (a22 !== 0) {
        const o12 = _c2.getComponent(n33);
        yc2.multiplyMatrices(i27.bones[o12].matrixWorld, i27.boneInverses[o12]), t19.addScaledVector(v02.copy(gc2).applyMatrix4(yc2), a22);
      }
    }
    return t19.applyMatrix4(this.bindMatrixInverse);
  }
  boneTransform(e11, t19) {
    return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."), this.applyBoneTransform(e11, t19);
  }
};
var Oo2 = class extends _t7 {
  constructor() {
    super(), this.isBone = true, this.type = "Bone";
  }
};
var Ch2 = class extends Wt7 {
  constructor(e11 = null, t19 = 1, i27 = 1, r24, n33, a22, o12, l25, c27 = zt6, h26 = zt6, u35, d34) {
    super(null, a22, o12, l25, c27, h26, r24, n33, u35, d34), this.isDataTexture = true, this.image = { data: e11, width: t19, height: i27 }, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1;
  }
};
var xc2 = new He6();
var y02 = new He6();
var ha2 = class _ha {
  constructor(e11 = [], t19 = []) {
    this.uuid = bi6(), this.bones = e11.slice(0), this.boneInverses = t19, this.boneMatrices = null, this.boneTexture = null, this.boneTextureSize = 0, this.frame = -1, this.init();
  }
  init() {
    const e11 = this.bones, t19 = this.boneInverses;
    if (this.boneMatrices = new Float32Array(e11.length * 16), t19.length === 0)
      this.calculateInverses();
    else if (e11.length !== t19.length) {
      console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."), this.boneInverses = [];
      for (let i27 = 0, r24 = this.bones.length; i27 < r24; i27++)
        this.boneInverses.push(new He6());
    }
  }
  calculateInverses() {
    this.boneInverses.length = 0;
    for (let e11 = 0, t19 = this.bones.length; e11 < t19; e11++) {
      const i27 = new He6();
      this.bones[e11] && i27.copy(this.bones[e11].matrixWorld).invert(), this.boneInverses.push(i27);
    }
  }
  pose() {
    for (let e11 = 0, t19 = this.bones.length; e11 < t19; e11++) {
      const i27 = this.bones[e11];
      i27 && i27.matrixWorld.copy(this.boneInverses[e11]).invert();
    }
    for (let e11 = 0, t19 = this.bones.length; e11 < t19; e11++) {
      const i27 = this.bones[e11];
      i27 && (i27.parent && i27.parent.isBone ? (i27.matrix.copy(i27.parent.matrixWorld).invert(), i27.matrix.multiply(i27.matrixWorld)) : i27.matrix.copy(i27.matrixWorld), i27.matrix.decompose(i27.position, i27.quaternion, i27.scale));
    }
  }
  update() {
    const e11 = this.bones, t19 = this.boneInverses, i27 = this.boneMatrices, r24 = this.boneTexture;
    for (let n33 = 0, a22 = e11.length; n33 < a22; n33++) {
      const o12 = e11[n33] ? e11[n33].matrixWorld : y02;
      xc2.multiplyMatrices(o12, t19[n33]), xc2.toArray(i27, n33 * 16);
    }
    r24 !== null && (r24.needsUpdate = true);
  }
  clone() {
    return new _ha(this.bones, this.boneInverses);
  }
  computeBoneTexture() {
    let e11 = Math.sqrt(this.bones.length * 4);
    e11 = hh2(e11), e11 = Math.max(e11, 4);
    const t19 = new Float32Array(e11 * e11 * 4);
    t19.set(this.boneMatrices);
    const i27 = new Ch2(t19, e11, e11, di6, er5);
    return i27.needsUpdate = true, this.boneMatrices = t19, this.boneTexture = i27, this.boneTextureSize = e11, this;
  }
  getBoneByName(e11) {
    for (let t19 = 0, i27 = this.bones.length; t19 < i27; t19++) {
      const r24 = this.bones[t19];
      if (r24.name === e11)
        return r24;
    }
  }
  dispose() {
    this.boneTexture !== null && (this.boneTexture.dispose(), this.boneTexture = null);
  }
  fromJSON(e11, t19) {
    this.uuid = e11.uuid;
    for (let i27 = 0, r24 = e11.bones.length; i27 < r24; i27++) {
      const n33 = e11.bones[i27];
      let a22 = t19[n33];
      a22 === void 0 && (console.warn("THREE.Skeleton: No bone found with UUID:", n33), a22 = new Oo2()), this.bones.push(a22), this.boneInverses.push(new He6().fromArray(e11.boneInverses[i27]));
    }
    return this.init(), this;
  }
  toJSON() {
    const e11 = {
      metadata: {
        version: 4.5,
        type: "Skeleton",
        generator: "Skeleton.toJSON"
      },
      bones: [],
      boneInverses: []
    };
    e11.uuid = this.uuid;
    const t19 = this.bones, i27 = this.boneInverses;
    for (let r24 = 0, n33 = t19.length; r24 < n33; r24++) {
      const a22 = t19[r24];
      e11.bones.push(a22.uuid);
      const o12 = i27[r24];
      e11.boneInverses.push(o12.toArray());
    }
    return e11;
  }
};
var bc2 = class extends Ft6 {
  constructor(e11, t19, i27, r24 = 1) {
    super(e11, t19, i27), this.isInstancedBufferAttribute = true, this.meshPerAttribute = r24;
  }
  copy(e11) {
    return super.copy(e11), this.meshPerAttribute = e11.meshPerAttribute, this;
  }
  toJSON() {
    const e11 = super.toJSON();
    return e11.meshPerAttribute = this.meshPerAttribute, e11.isInstancedBufferAttribute = true, e11;
  }
};
var sn4 = new He6();
var Mc2 = new He6();
var Us2 = [];
var wc2 = new Vi3();
var x02 = new He6();
var Fn5 = new Rt8();
var Hn5 = new Gi2();
var b02 = class extends Rt8 {
  constructor(e11, t19, i27) {
    super(e11, t19), this.isInstancedMesh = true, this.instanceMatrix = new bc2(new Float32Array(i27 * 16), 16), this.instanceColor = null, this.count = i27, this.boundingBox = null, this.boundingSphere = null;
    for (let r24 = 0; r24 < i27; r24++)
      this.setMatrixAt(r24, x02);
  }
  computeBoundingBox() {
    const e11 = this.geometry, t19 = this.count;
    this.boundingBox === null && (this.boundingBox = new Vi3()), e11.boundingBox === null && e11.computeBoundingBox(), this.boundingBox.makeEmpty();
    for (let i27 = 0; i27 < t19; i27++)
      this.getMatrixAt(i27, sn4), wc2.copy(e11.boundingBox).applyMatrix4(sn4), this.boundingBox.union(wc2);
  }
  computeBoundingSphere() {
    const e11 = this.geometry, t19 = this.count;
    this.boundingSphere === null && (this.boundingSphere = new Gi2()), e11.boundingSphere === null && e11.computeBoundingSphere(), this.boundingSphere.makeEmpty();
    for (let i27 = 0; i27 < t19; i27++)
      this.getMatrixAt(i27, sn4), Hn5.copy(e11.boundingSphere).applyMatrix4(sn4), this.boundingSphere.union(Hn5);
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.instanceMatrix.copy(e11.instanceMatrix), e11.instanceColor !== null && (this.instanceColor = e11.instanceColor.clone()), this.count = e11.count, this;
  }
  getColorAt(e11, t19) {
    t19.fromArray(this.instanceColor.array, e11 * 3);
  }
  getMatrixAt(e11, t19) {
    t19.fromArray(this.instanceMatrix.array, e11 * 16);
  }
  raycast(e11, t19) {
    const i27 = this.matrixWorld, r24 = this.count;
    if (Fn5.geometry = this.geometry, Fn5.material = this.material, Fn5.material !== void 0 && (this.boundingSphere === null && this.computeBoundingSphere(), Hn5.copy(this.boundingSphere), Hn5.applyMatrix4(i27), e11.ray.intersectsSphere(Hn5) !== false))
      for (let n33 = 0; n33 < r24; n33++) {
        this.getMatrixAt(n33, sn4), Mc2.multiplyMatrices(i27, sn4), Fn5.matrixWorld = Mc2, Fn5.raycast(e11, Us2);
        for (let a22 = 0, o12 = Us2.length; a22 < o12; a22++) {
          const l25 = Us2[a22];
          l25.instanceId = n33, l25.object = this, t19.push(l25);
        }
        Us2.length = 0;
      }
  }
  setColorAt(e11, t19) {
    this.instanceColor === null && (this.instanceColor = new bc2(new Float32Array(this.instanceMatrix.count * 3), 3)), t19.toArray(this.instanceColor.array, e11 * 3);
  }
  setMatrixAt(e11, t19) {
    t19.toArray(this.instanceMatrix.array, e11 * 16);
  }
  updateMorphTargets() {
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
};
var Tn4 = class extends pi6 {
  constructor(e11) {
    super(), this.isLineBasicMaterial = true, this.type = "LineBasicMaterial", this.color = new ze7(16777215), this.map = null, this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.linewidth = e11.linewidth, this.linecap = e11.linecap, this.linejoin = e11.linejoin, this.fog = e11.fog, this;
  }
};
var Sc2 = new k18();
var Tc2 = new k18();
var Ec2 = new He6();
var Ja = new No2();
var Os2 = new Gi2();
var ss3 = class extends _t7 {
  constructor(e11 = new Xt6(), t19 = new Tn4()) {
    super(), this.isLine = true, this.type = "Line", this.geometry = e11, this.material = t19, this.updateMorphTargets();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.material = e11.material, this.geometry = e11.geometry, this;
  }
  computeLineDistances() {
    const e11 = this.geometry;
    if (e11.index === null) {
      const t19 = e11.attributes.position, i27 = [0];
      for (let r24 = 1, n33 = t19.count; r24 < n33; r24++)
        Sc2.fromBufferAttribute(t19, r24 - 1), Tc2.fromBufferAttribute(t19, r24), i27[r24] = i27[r24 - 1], i27[r24] += Sc2.distanceTo(Tc2);
      e11.setAttribute("lineDistance", new xt6(i27, 1));
    } else
      console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
    return this;
  }
  raycast(e11, t19) {
    const i27 = this.geometry, r24 = this.matrixWorld, n33 = e11.params.Line.threshold, a22 = i27.drawRange;
    if (i27.boundingSphere === null && i27.computeBoundingSphere(), Os2.copy(i27.boundingSphere), Os2.applyMatrix4(r24), Os2.radius += n33, e11.ray.intersectsSphere(Os2) === false)
      return;
    Ec2.copy(r24).invert(), Ja.copy(e11.ray).applyMatrix4(Ec2);
    const o12 = n33 / ((this.scale.x + this.scale.y + this.scale.z) / 3), l25 = o12 * o12, c27 = new k18(), h26 = new k18(), u35 = new k18(), d34 = new k18(), m33 = this.isLineSegments ? 2 : 1, _19 = i27.index, y33 = i27.attributes.position;
    if (_19 !== null) {
      const f39 = Math.max(0, a22.start), p26 = Math.min(_19.count, a22.start + a22.count);
      for (let A17 = f39, M12 = p26 - 1; A17 < M12; A17 += m33) {
        const E24 = _19.getX(A17), w29 = _19.getX(A17 + 1);
        if (c27.fromBufferAttribute(y33, E24), h26.fromBufferAttribute(y33, w29), Ja.distanceSqToSegment(c27, h26, d34, u35) > l25)
          continue;
        d34.applyMatrix4(this.matrixWorld);
        const I16 = e11.ray.origin.distanceTo(d34);
        I16 < e11.near || I16 > e11.far || t19.push({
          distance: I16,
          // What do we want? intersection point on the ray or on the segment??
          // point: raycaster.ray.at( distance ),
          point: u35.clone().applyMatrix4(this.matrixWorld),
          index: A17,
          face: null,
          faceIndex: null,
          object: this
        });
      }
    } else {
      const f39 = Math.max(0, a22.start), p26 = Math.min(y33.count, a22.start + a22.count);
      for (let A17 = f39, M12 = p26 - 1; A17 < M12; A17 += m33) {
        if (c27.fromBufferAttribute(y33, A17), h26.fromBufferAttribute(y33, A17 + 1), Ja.distanceSqToSegment(c27, h26, d34, u35) > l25)
          continue;
        d34.applyMatrix4(this.matrixWorld);
        const E24 = e11.ray.origin.distanceTo(d34);
        E24 < e11.near || E24 > e11.far || t19.push({
          distance: E24,
          // What do we want? intersection point on the ray or on the segment??
          // point: raycaster.ray.at( distance ),
          point: u35.clone().applyMatrix4(this.matrixWorld),
          index: A17,
          face: null,
          faceIndex: null,
          object: this
        });
      }
    }
  }
  updateMorphTargets() {
    const e11 = this.geometry.morphAttributes, t19 = Object.keys(e11);
    if (t19.length > 0) {
      const i27 = e11[t19[0]];
      if (i27 !== void 0) {
        this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (let r24 = 0, n33 = i27.length; r24 < n33; r24++) {
          const a22 = i27[r24].name || String(r24);
          this.morphTargetInfluences.push(0), this.morphTargetDictionary[a22] = r24;
        }
      }
    }
  }
};
var Ac2 = new k18();
var Lc2 = new k18();
var zo2 = class extends ss3 {
  constructor(e11, t19) {
    super(e11, t19), this.isLineSegments = true, this.type = "LineSegments";
  }
  computeLineDistances() {
    const e11 = this.geometry;
    if (e11.index === null) {
      const t19 = e11.attributes.position, i27 = [];
      for (let r24 = 0, n33 = t19.count; r24 < n33; r24 += 2)
        Ac2.fromBufferAttribute(t19, r24), Lc2.fromBufferAttribute(t19, r24 + 1), i27[r24] = r24 === 0 ? 0 : i27[r24 - 1], i27[r24 + 1] = i27[r24] + Ac2.distanceTo(Lc2);
      e11.setAttribute("lineDistance", new xt6(i27, 1));
    } else
      console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
    return this;
  }
};
var M02 = class extends ss3 {
  constructor(e11, t19) {
    super(e11, t19), this.isLineLoop = true, this.type = "LineLoop";
  }
};
var Rh2 = class extends pi6 {
  constructor(e11) {
    super(), this.isPointsMaterial = true, this.type = "PointsMaterial", this.color = new ze7(16777215), this.map = null, this.alphaMap = null, this.size = 1, this.sizeAttenuation = true, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.alphaMap = e11.alphaMap, this.size = e11.size, this.sizeAttenuation = e11.sizeAttenuation, this.fog = e11.fog, this;
  }
};
var Cc2 = new He6();
var xo2 = new No2();
var zs2 = new Gi2();
var Bs2 = new k18();
var w02 = class extends _t7 {
  constructor(e11 = new Xt6(), t19 = new Rh2()) {
    super(), this.isPoints = true, this.type = "Points", this.geometry = e11, this.material = t19, this.updateMorphTargets();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.material = e11.material, this.geometry = e11.geometry, this;
  }
  raycast(e11, t19) {
    const i27 = this.geometry, r24 = this.matrixWorld, n33 = e11.params.Points.threshold, a22 = i27.drawRange;
    if (i27.boundingSphere === null && i27.computeBoundingSphere(), zs2.copy(i27.boundingSphere), zs2.applyMatrix4(r24), zs2.radius += n33, e11.ray.intersectsSphere(zs2) === false)
      return;
    Cc2.copy(r24).invert(), xo2.copy(e11.ray).applyMatrix4(Cc2);
    const o12 = n33 / ((this.scale.x + this.scale.y + this.scale.z) / 3), l25 = o12 * o12, c27 = i27.index, h26 = i27.attributes.position;
    if (c27 !== null) {
      const u35 = Math.max(0, a22.start), d34 = Math.min(c27.count, a22.start + a22.count);
      for (let m33 = u35, _19 = d34; m33 < _19; m33++) {
        const y33 = c27.getX(m33);
        Bs2.fromBufferAttribute(h26, y33), Rc2(Bs2, y33, l25, r24, e11, t19, this);
      }
    } else {
      const u35 = Math.max(0, a22.start), d34 = Math.min(h26.count, a22.start + a22.count);
      for (let m33 = u35, _19 = d34; m33 < _19; m33++)
        Bs2.fromBufferAttribute(h26, m33), Rc2(Bs2, m33, l25, r24, e11, t19, this);
    }
  }
  updateMorphTargets() {
    const e11 = this.geometry.morphAttributes, t19 = Object.keys(e11);
    if (t19.length > 0) {
      const i27 = e11[t19[0]];
      if (i27 !== void 0) {
        this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (let r24 = 0, n33 = i27.length; r24 < n33; r24++) {
          const a22 = i27[r24].name || String(r24);
          this.morphTargetInfluences.push(0), this.morphTargetDictionary[a22] = r24;
        }
      }
    }
  }
};
function Rc2(s18, e11, t19, i27, r24, n33, a22) {
  const o12 = xo2.distanceSqToPoint(s18);
  if (o12 < t19) {
    const l25 = new k18();
    xo2.closestPointToPoint(s18, l25), l25.applyMatrix4(i27);
    const c27 = r24.ray.origin.distanceTo(l25);
    if (c27 < r24.near || c27 > r24.far)
      return;
    n33.push({
      distance: c27,
      distanceToRay: Math.sqrt(o12),
      point: l25,
      index: e11,
      face: null,
      object: a22
    });
  }
}
var ua2 = class _ua extends Xt6 {
  constructor(e11 = 1, t19 = 1, i27 = 1, r24 = 32, n33 = 1, a22 = false, o12 = 0, l25 = Math.PI * 2) {
    super(), this.type = "CylinderGeometry", this.parameters = {
      radiusTop: e11,
      radiusBottom: t19,
      height: i27,
      radialSegments: r24,
      heightSegments: n33,
      openEnded: a22,
      thetaStart: o12,
      thetaLength: l25
    };
    const c27 = this;
    r24 = Math.floor(r24), n33 = Math.floor(n33);
    const h26 = [], u35 = [], d34 = [], m33 = [];
    let _19 = 0;
    const y33 = [], f39 = i27 / 2;
    let p26 = 0;
    A17(), a22 === false && (e11 > 0 && M12(true), t19 > 0 && M12(false)), this.setIndex(h26), this.setAttribute("position", new xt6(u35, 3)), this.setAttribute("normal", new xt6(d34, 3)), this.setAttribute("uv", new xt6(m33, 2));
    function A17() {
      const E24 = new k18(), w29 = new k18();
      let I16 = 0;
      const D17 = (t19 - e11) / i27;
      for (let P19 = 0; P19 <= n33; P19++) {
        const x34 = [], C19 = P19 / n33, G15 = C19 * (t19 - e11) + e11;
        for (let z19 = 0; z19 <= r24; z19++) {
          const U18 = z19 / r24, V14 = U18 * l25 + o12, j18 = Math.sin(V14), W8 = Math.cos(V14);
          w29.x = G15 * j18, w29.y = -C19 * i27 + f39, w29.z = G15 * W8, u35.push(w29.x, w29.y, w29.z), E24.set(j18, D17, W8).normalize(), d34.push(E24.x, E24.y, E24.z), m33.push(U18, 1 - C19), x34.push(_19++);
        }
        y33.push(x34);
      }
      for (let P19 = 0; P19 < r24; P19++)
        for (let x34 = 0; x34 < n33; x34++) {
          const C19 = y33[x34][P19], G15 = y33[x34 + 1][P19], z19 = y33[x34 + 1][P19 + 1], U18 = y33[x34][P19 + 1];
          h26.push(C19, G15, U18), h26.push(G15, z19, U18), I16 += 6;
        }
      c27.addGroup(p26, I16, 0), p26 += I16;
    }
    function M12(E24) {
      const w29 = _19, I16 = new We7(), D17 = new k18();
      let P19 = 0;
      const x34 = E24 === true ? e11 : t19, C19 = E24 === true ? 1 : -1;
      for (let z19 = 1; z19 <= r24; z19++)
        u35.push(0, f39 * C19, 0), d34.push(0, C19, 0), m33.push(0.5, 0.5), _19++;
      const G15 = _19;
      for (let z19 = 0; z19 <= r24; z19++) {
        const U18 = z19 / r24 * l25 + o12, V14 = Math.cos(U18), j18 = Math.sin(U18);
        D17.x = x34 * j18, D17.y = f39 * C19, D17.z = x34 * V14, u35.push(D17.x, D17.y, D17.z), d34.push(0, C19, 0), I16.x = V14 * 0.5 + 0.5, I16.y = j18 * 0.5 * C19 + 0.5, m33.push(I16.x, I16.y), _19++;
      }
      for (let z19 = 0; z19 < r24; z19++) {
        const U18 = w29 + z19, V14 = G15 + z19;
        E24 === true ? h26.push(V14, V14 + 1, U18) : h26.push(V14 + 1, V14, U18), P19 += 3;
      }
      c27.addGroup(p26, P19, E24 === true ? 1 : 2), p26 += P19;
    }
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _ua(e11.radiusTop, e11.radiusBottom, e11.height, e11.radialSegments, e11.heightSegments, e11.openEnded, e11.thetaStart, e11.thetaLength);
  }
};
var Fs2 = new k18();
var Hs2 = new k18();
var Ka = new k18();
var Vs2 = new hi6();
var S02 = class extends Xt6 {
  constructor(e11 = null, t19 = 1) {
    if (super(), this.type = "EdgesGeometry", this.parameters = {
      geometry: e11,
      thresholdAngle: t19
    }, e11 !== null) {
      const i27 = Math.pow(10, 4), r24 = Math.cos(pn5 * t19), n33 = e11.getIndex(), a22 = e11.getAttribute("position"), o12 = n33 ? n33.count : a22.count, l25 = [0, 0, 0], c27 = ["a", "b", "c"], h26 = new Array(3), u35 = {}, d34 = [];
      for (let m33 = 0; m33 < o12; m33 += 3) {
        n33 ? (l25[0] = n33.getX(m33), l25[1] = n33.getX(m33 + 1), l25[2] = n33.getX(m33 + 2)) : (l25[0] = m33, l25[1] = m33 + 1, l25[2] = m33 + 2);
        const { a: _19, b: y33, c: f39 } = Vs2;
        if (_19.fromBufferAttribute(a22, l25[0]), y33.fromBufferAttribute(a22, l25[1]), f39.fromBufferAttribute(a22, l25[2]), Vs2.getNormal(Ka), h26[0] = `${Math.round(_19.x * i27)},${Math.round(_19.y * i27)},${Math.round(_19.z * i27)}`, h26[1] = `${Math.round(y33.x * i27)},${Math.round(y33.y * i27)},${Math.round(y33.z * i27)}`, h26[2] = `${Math.round(f39.x * i27)},${Math.round(f39.y * i27)},${Math.round(f39.z * i27)}`, !(h26[0] === h26[1] || h26[1] === h26[2] || h26[2] === h26[0]))
          for (let p26 = 0; p26 < 3; p26++) {
            const A17 = (p26 + 1) % 3, M12 = h26[p26], E24 = h26[A17], w29 = Vs2[c27[p26]], I16 = Vs2[c27[A17]], D17 = `${M12}_${E24}`, P19 = `${E24}_${M12}`;
            P19 in u35 && u35[P19] ? (Ka.dot(u35[P19].normal) <= r24 && (d34.push(w29.x, w29.y, w29.z), d34.push(I16.x, I16.y, I16.z)), u35[P19] = null) : D17 in u35 || (u35[D17] = {
              index0: l25[p26],
              index1: l25[A17],
              normal: Ka.clone()
            });
          }
      }
      for (const m33 in u35)
        if (u35[m33]) {
          const { index0: _19, index1: y33 } = u35[m33];
          Fs2.fromBufferAttribute(a22, _19), Hs2.fromBufferAttribute(a22, y33), d34.push(Fs2.x, Fs2.y, Fs2.z), d34.push(Hs2.x, Hs2.y, Hs2.z);
        }
      this.setAttribute("position", new xt6(d34, 3));
    }
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
};
var Bo2 = class _Bo extends Xt6 {
  constructor(e11 = 1, t19 = 32, i27 = 16, r24 = 0, n33 = Math.PI * 2, a22 = 0, o12 = Math.PI) {
    super(), this.type = "SphereGeometry", this.parameters = {
      radius: e11,
      widthSegments: t19,
      heightSegments: i27,
      phiStart: r24,
      phiLength: n33,
      thetaStart: a22,
      thetaLength: o12
    }, t19 = Math.max(3, Math.floor(t19)), i27 = Math.max(2, Math.floor(i27));
    const l25 = Math.min(a22 + o12, Math.PI);
    let c27 = 0;
    const h26 = [], u35 = new k18(), d34 = new k18(), m33 = [], _19 = [], y33 = [], f39 = [];
    for (let p26 = 0; p26 <= i27; p26++) {
      const A17 = [], M12 = p26 / i27;
      let E24 = 0;
      p26 === 0 && a22 === 0 ? E24 = 0.5 / t19 : p26 === i27 && l25 === Math.PI && (E24 = -0.5 / t19);
      for (let w29 = 0; w29 <= t19; w29++) {
        const I16 = w29 / t19;
        u35.x = -e11 * Math.cos(r24 + I16 * n33) * Math.sin(a22 + M12 * o12), u35.y = e11 * Math.cos(a22 + M12 * o12), u35.z = e11 * Math.sin(r24 + I16 * n33) * Math.sin(a22 + M12 * o12), _19.push(u35.x, u35.y, u35.z), d34.copy(u35).normalize(), y33.push(d34.x, d34.y, d34.z), f39.push(I16 + E24, 1 - M12), A17.push(c27++);
      }
      h26.push(A17);
    }
    for (let p26 = 0; p26 < i27; p26++)
      for (let A17 = 0; A17 < t19; A17++) {
        const M12 = h26[p26][A17 + 1], E24 = h26[p26][A17], w29 = h26[p26 + 1][A17], I16 = h26[p26 + 1][A17 + 1];
        (p26 !== 0 || a22 > 0) && m33.push(M12, E24, I16), (p26 !== i27 - 1 || l25 < Math.PI) && m33.push(E24, w29, I16);
      }
    this.setIndex(m33), this.setAttribute("position", new xt6(_19, 3)), this.setAttribute("normal", new xt6(y33, 3)), this.setAttribute("uv", new xt6(f39, 2));
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _Bo(e11.radius, e11.widthSegments, e11.heightSegments, e11.phiStart, e11.phiLength, e11.thetaStart, e11.thetaLength);
  }
};
var as3 = class extends pi6 {
  constructor(e11) {
    super(), this.isMeshStandardMaterial = true, this.defines = { STANDARD: "" }, this.type = "MeshStandardMaterial", this.color = new ze7(16777215), this.roughness = 1, this.metalness = 0, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new ze7(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = sa2, this.normalScale = new We7(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.roughnessMap = null, this.metalnessMap = null, this.alphaMap = null, this.envMap = null, this.envMapIntensity = 1, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.flatShading = false, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.defines = { STANDARD: "" }, this.color.copy(e11.color), this.roughness = e11.roughness, this.metalness = e11.metalness, this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.emissive.copy(e11.emissive), this.emissiveMap = e11.emissiveMap, this.emissiveIntensity = e11.emissiveIntensity, this.bumpMap = e11.bumpMap, this.bumpScale = e11.bumpScale, this.normalMap = e11.normalMap, this.normalMapType = e11.normalMapType, this.normalScale.copy(e11.normalScale), this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.roughnessMap = e11.roughnessMap, this.metalnessMap = e11.metalnessMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.envMapIntensity = e11.envMapIntensity, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.flatShading = e11.flatShading, this.fog = e11.fog, this;
  }
};
var Cr5 = class extends as3 {
  constructor(e11) {
    super(), this.isMeshPhysicalMaterial = true, this.defines = {
      STANDARD: "",
      PHYSICAL: ""
    }, this.type = "MeshPhysicalMaterial", this.clearcoatMap = null, this.clearcoatRoughness = 0, this.clearcoatRoughnessMap = null, this.clearcoatNormalScale = new We7(1, 1), this.clearcoatNormalMap = null, this.ior = 1.5, Object.defineProperty(this, "reflectivity", {
      get: function() {
        return Gt6(2.5 * (this.ior - 1) / (this.ior + 1), 0, 1);
      },
      set: function(t19) {
        this.ior = (1 + 0.4 * t19) / (1 - 0.4 * t19);
      }
    }), this.iridescenceMap = null, this.iridescenceIOR = 1.3, this.iridescenceThicknessRange = [100, 400], this.iridescenceThicknessMap = null, this.sheenColor = new ze7(0), this.sheenColorMap = null, this.sheenRoughness = 1, this.sheenRoughnessMap = null, this.transmissionMap = null, this.thickness = 0, this.thicknessMap = null, this.attenuationDistance = 1 / 0, this.attenuationColor = new ze7(1, 1, 1), this.specularIntensity = 1, this.specularIntensityMap = null, this.specularColor = new ze7(1, 1, 1), this.specularColorMap = null, this._sheen = 0, this._clearcoat = 0, this._iridescence = 0, this._transmission = 0, this.setValues(e11);
  }
  get sheen() {
    return this._sheen;
  }
  set sheen(e11) {
    this._sheen > 0 != e11 > 0 && this.version++, this._sheen = e11;
  }
  get clearcoat() {
    return this._clearcoat;
  }
  set clearcoat(e11) {
    this._clearcoat > 0 != e11 > 0 && this.version++, this._clearcoat = e11;
  }
  get iridescence() {
    return this._iridescence;
  }
  set iridescence(e11) {
    this._iridescence > 0 != e11 > 0 && this.version++, this._iridescence = e11;
  }
  get transmission() {
    return this._transmission;
  }
  set transmission(e11) {
    this._transmission > 0 != e11 > 0 && this.version++, this._transmission = e11;
  }
  copy(e11) {
    return super.copy(e11), this.defines = {
      STANDARD: "",
      PHYSICAL: ""
    }, this.clearcoat = e11.clearcoat, this.clearcoatMap = e11.clearcoatMap, this.clearcoatRoughness = e11.clearcoatRoughness, this.clearcoatRoughnessMap = e11.clearcoatRoughnessMap, this.clearcoatNormalMap = e11.clearcoatNormalMap, this.clearcoatNormalScale.copy(e11.clearcoatNormalScale), this.ior = e11.ior, this.iridescence = e11.iridescence, this.iridescenceMap = e11.iridescenceMap, this.iridescenceIOR = e11.iridescenceIOR, this.iridescenceThicknessRange = [...e11.iridescenceThicknessRange], this.iridescenceThicknessMap = e11.iridescenceThicknessMap, this.sheen = e11.sheen, this.sheenColor.copy(e11.sheenColor), this.sheenColorMap = e11.sheenColorMap, this.sheenRoughness = e11.sheenRoughness, this.sheenRoughnessMap = e11.sheenRoughnessMap, this.transmission = e11.transmission, this.transmissionMap = e11.transmissionMap, this.thickness = e11.thickness, this.thicknessMap = e11.thicknessMap, this.attenuationDistance = e11.attenuationDistance, this.attenuationColor.copy(e11.attenuationColor), this.specularIntensity = e11.specularIntensity, this.specularIntensityMap = e11.specularIntensityMap, this.specularColor.copy(e11.specularColor), this.specularColorMap = e11.specularColorMap, this;
  }
};
var Jn5 = class extends pi6 {
  constructor(e11) {
    super(), this.isMeshPhongMaterial = true, this.type = "MeshPhongMaterial", this.color = new ze7(16777215), this.specular = new ze7(1118481), this.shininess = 30, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new ze7(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = sa2, this.normalScale = new We7(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = ra2, this.reflectivity = 1, this.refractionRatio = 0.98, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.flatShading = false, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.specular.copy(e11.specular), this.shininess = e11.shininess, this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.emissive.copy(e11.emissive), this.emissiveMap = e11.emissiveMap, this.emissiveIntensity = e11.emissiveIntensity, this.bumpMap = e11.bumpMap, this.bumpScale = e11.bumpScale, this.normalMap = e11.normalMap, this.normalMapType = e11.normalMapType, this.normalScale.copy(e11.normalScale), this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.specularMap = e11.specularMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.combine = e11.combine, this.reflectivity = e11.reflectivity, this.refractionRatio = e11.refractionRatio, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.flatShading = e11.flatShading, this.fog = e11.fog, this;
  }
};
var T02 = class extends pi6 {
  constructor(e11) {
    super(), this.isMeshLambertMaterial = true, this.type = "MeshLambertMaterial", this.color = new ze7(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new ze7(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = sa2, this.normalScale = new We7(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = ra2, this.reflectivity = 1, this.refractionRatio = 0.98, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.flatShading = false, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.emissive.copy(e11.emissive), this.emissiveMap = e11.emissiveMap, this.emissiveIntensity = e11.emissiveIntensity, this.bumpMap = e11.bumpMap, this.bumpScale = e11.bumpScale, this.normalMap = e11.normalMap, this.normalMapType = e11.normalMapType, this.normalScale.copy(e11.normalScale), this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.specularMap = e11.specularMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.combine = e11.combine, this.reflectivity = e11.reflectivity, this.refractionRatio = e11.refractionRatio, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.flatShading = e11.flatShading, this.fog = e11.fog, this;
  }
};
function Ji3(s18, e11, t19) {
  return Nh2(s18) ? new s18.constructor(s18.subarray(e11, t19 !== void 0 ? t19 : s18.length)) : s18.slice(e11, t19);
}
function Gs2(s18, e11, t19) {
  return !s18 || // let 'undefined' and 'null' pass
  !t19 && s18.constructor === e11 ? s18 : typeof e11.BYTES_PER_ELEMENT == "number" ? new e11(s18) : Array.prototype.slice.call(s18);
}
function Nh2(s18) {
  return ArrayBuffer.isView(s18) && !(s18 instanceof DataView);
}
function E02(s18) {
  function e11(r24, n33) {
    return s18[r24] - s18[n33];
  }
  const t19 = s18.length, i27 = new Array(t19);
  for (let r24 = 0; r24 !== t19; ++r24)
    i27[r24] = r24;
  return i27.sort(e11), i27;
}
function Nc2(s18, e11, t19) {
  const i27 = s18.length, r24 = new s18.constructor(i27);
  for (let n33 = 0, a22 = 0; a22 !== i27; ++n33) {
    const o12 = t19[n33] * e11;
    for (let l25 = 0; l25 !== e11; ++l25)
      r24[a22++] = s18[o12 + l25];
  }
  return r24;
}
function Ph2(s18, e11, t19, i27) {
  let r24 = 1, n33 = s18[0];
  for (; n33 !== void 0 && n33[i27] === void 0; )
    n33 = s18[r24++];
  if (n33 === void 0)
    return;
  let a22 = n33[i27];
  if (a22 !== void 0)
    if (Array.isArray(a22))
      do
        a22 = n33[i27], a22 !== void 0 && (e11.push(n33.time), t19.push.apply(t19, a22)), n33 = s18[r24++];
      while (n33 !== void 0);
    else if (a22.toArray !== void 0)
      do
        a22 = n33[i27], a22 !== void 0 && (e11.push(n33.time), a22.toArray(t19, t19.length)), n33 = s18[r24++];
      while (n33 !== void 0);
    else
      do
        a22 = n33[i27], a22 !== void 0 && (e11.push(n33.time), t19.push(a22)), n33 = s18[r24++];
      while (n33 !== void 0);
}
var os3 = class {
  constructor(e11, t19, i27, r24) {
    this.parameterPositions = e11, this._cachedIndex = 0, this.resultBuffer = r24 !== void 0 ? r24 : new t19.constructor(i27), this.sampleValues = t19, this.valueSize = i27, this.settings = null, this.DefaultSettings_ = {};
  }
  evaluate(e11) {
    const t19 = this.parameterPositions;
    let i27 = this._cachedIndex, r24 = t19[i27], n33 = t19[i27 - 1];
    i: {
      e: {
        let a22;
        t: {
          r:
            if (!(e11 < r24)) {
              for (let o12 = i27 + 2; ; ) {
                if (r24 === void 0) {
                  if (e11 < n33)
                    break r;
                  return i27 = t19.length, this._cachedIndex = i27, this.copySampleValue_(i27 - 1);
                }
                if (i27 === o12)
                  break;
                if (n33 = r24, r24 = t19[++i27], e11 < r24)
                  break e;
              }
              a22 = t19.length;
              break t;
            }
          if (!(e11 >= n33)) {
            const o12 = t19[1];
            e11 < o12 && (i27 = 2, n33 = o12);
            for (let l25 = i27 - 2; ; ) {
              if (n33 === void 0)
                return this._cachedIndex = 0, this.copySampleValue_(0);
              if (i27 === l25)
                break;
              if (r24 = n33, n33 = t19[--i27 - 1], e11 >= n33)
                break e;
            }
            a22 = i27, i27 = 0;
            break t;
          }
          break i;
        }
        for (; i27 < a22; ) {
          const o12 = i27 + a22 >>> 1;
          e11 < t19[o12] ? a22 = o12 : i27 = o12 + 1;
        }
        if (r24 = t19[i27], n33 = t19[i27 - 1], n33 === void 0)
          return this._cachedIndex = 0, this.copySampleValue_(0);
        if (r24 === void 0)
          return i27 = t19.length, this._cachedIndex = i27, this.copySampleValue_(i27 - 1);
      }
      this._cachedIndex = i27, this.intervalChanged_(i27, n33, r24);
    }
    return this.interpolate_(i27, n33, e11, r24);
  }
  getSettings_() {
    return this.settings || this.DefaultSettings_;
  }
  copySampleValue_(e11) {
    const t19 = this.resultBuffer, i27 = this.sampleValues, r24 = this.valueSize, n33 = e11 * r24;
    for (let a22 = 0; a22 !== r24; ++a22)
      t19[a22] = i27[n33 + a22];
    return t19;
  }
  // Template methods for derived classes:
  interpolate_() {
    throw new Error("call to abstract method");
  }
  intervalChanged_() {
  }
};
var A02 = class extends os3 {
  constructor(e11, t19, i27, r24) {
    super(e11, t19, i27, r24), this._weightPrev = -0, this._offsetPrev = -0, this._weightNext = -0, this._offsetNext = -0, this.DefaultSettings_ = {
      endingStart: Cl2,
      endingEnd: Cl2
    };
  }
  intervalChanged_(e11, t19, i27) {
    const r24 = this.parameterPositions;
    let n33 = e11 - 2, a22 = e11 + 1, o12 = r24[n33], l25 = r24[a22];
    if (o12 === void 0)
      switch (this.getSettings_().endingStart) {
        case Rl2:
          n33 = e11, o12 = 2 * t19 - i27;
          break;
        case Nl2:
          n33 = r24.length - 2, o12 = t19 + r24[n33] - r24[n33 + 1];
          break;
        default:
          n33 = e11, o12 = i27;
      }
    if (l25 === void 0)
      switch (this.getSettings_().endingEnd) {
        case Rl2:
          a22 = e11, l25 = 2 * i27 - t19;
          break;
        case Nl2:
          a22 = 1, l25 = i27 + r24[1] - r24[0];
          break;
        default:
          a22 = e11 - 1, l25 = t19;
      }
    const c27 = (i27 - t19) * 0.5, h26 = this.valueSize;
    this._weightPrev = c27 / (t19 - o12), this._weightNext = c27 / (l25 - i27), this._offsetPrev = n33 * h26, this._offsetNext = a22 * h26;
  }
  interpolate_(e11, t19, i27, r24) {
    const n33 = this.resultBuffer, a22 = this.sampleValues, o12 = this.valueSize, l25 = e11 * o12, c27 = l25 - o12, h26 = this._offsetPrev, u35 = this._offsetNext, d34 = this._weightPrev, m33 = this._weightNext, _19 = (i27 - t19) / (r24 - t19), y33 = _19 * _19, f39 = y33 * _19, p26 = -d34 * f39 + 2 * d34 * y33 - d34 * _19, A17 = (1 + d34) * f39 + (-1.5 - 2 * d34) * y33 + (-0.5 + d34) * _19 + 1, M12 = (-1 - m33) * f39 + (1.5 + m33) * y33 + 0.5 * _19, E24 = m33 * f39 - m33 * y33;
    for (let w29 = 0; w29 !== o12; ++w29)
      n33[w29] = p26 * a22[h26 + w29] + A17 * a22[c27 + w29] + M12 * a22[l25 + w29] + E24 * a22[u35 + w29];
    return n33;
  }
};
var L02 = class extends os3 {
  constructor(e11, t19, i27, r24) {
    super(e11, t19, i27, r24);
  }
  interpolate_(e11, t19, i27, r24) {
    const n33 = this.resultBuffer, a22 = this.sampleValues, o12 = this.valueSize, l25 = e11 * o12, c27 = l25 - o12, h26 = (i27 - t19) / (r24 - t19), u35 = 1 - h26;
    for (let d34 = 0; d34 !== o12; ++d34)
      n33[d34] = a22[c27 + d34] * u35 + a22[l25 + d34] * h26;
    return n33;
  }
};
var C02 = class extends os3 {
  constructor(e11, t19, i27, r24) {
    super(e11, t19, i27, r24);
  }
  interpolate_(e11) {
    return this.copySampleValue_(e11 - 1);
  }
};
var Ai6 = class {
  constructor(e11, t19, i27, r24) {
    if (e11 === void 0)
      throw new Error("THREE.KeyframeTrack: track name is undefined");
    if (t19 === void 0 || t19.length === 0)
      throw new Error("THREE.KeyframeTrack: no keyframes in track named " + e11);
    this.name = e11, this.times = Gs2(t19, this.TimeBufferType), this.values = Gs2(i27, this.ValueBufferType), this.setInterpolation(r24 || this.DefaultInterpolation);
  }
  // Serialization (in static context, because of constructor invocation
  // and automatic invocation of .toJSON):
  static toJSON(e11) {
    const t19 = e11.constructor;
    let i27;
    if (t19.toJSON !== this.toJSON)
      i27 = t19.toJSON(e11);
    else {
      i27 = {
        name: e11.name,
        times: Gs2(e11.times, Array),
        values: Gs2(e11.values, Array)
      };
      const r24 = e11.getInterpolation();
      r24 !== e11.DefaultInterpolation && (i27.interpolation = r24);
    }
    return i27.type = e11.ValueTypeName, i27;
  }
  InterpolantFactoryMethodDiscrete(e11) {
    return new C02(this.times, this.values, this.getValueSize(), e11);
  }
  InterpolantFactoryMethodLinear(e11) {
    return new L02(this.times, this.values, this.getValueSize(), e11);
  }
  InterpolantFactoryMethodSmooth(e11) {
    return new A02(this.times, this.values, this.getValueSize(), e11);
  }
  setInterpolation(e11) {
    let t19;
    switch (e11) {
      case Qn5:
        t19 = this.InterpolantFactoryMethodDiscrete;
        break;
      case Mn5:
        t19 = this.InterpolantFactoryMethodLinear;
        break;
      case Aa:
        t19 = this.InterpolantFactoryMethodSmooth;
        break;
    }
    if (t19 === void 0) {
      const i27 = "unsupported interpolation for " + this.ValueTypeName + " keyframe track named " + this.name;
      if (this.createInterpolant === void 0)
        if (e11 !== this.DefaultInterpolation)
          this.setInterpolation(this.DefaultInterpolation);
        else
          throw new Error(i27);
      return console.warn("THREE.KeyframeTrack:", i27), this;
    }
    return this.createInterpolant = t19, this;
  }
  getInterpolation() {
    switch (this.createInterpolant) {
      case this.InterpolantFactoryMethodDiscrete:
        return Qn5;
      case this.InterpolantFactoryMethodLinear:
        return Mn5;
      case this.InterpolantFactoryMethodSmooth:
        return Aa;
    }
  }
  getValueSize() {
    return this.values.length / this.times.length;
  }
  // move all keyframes either forwards or backwards in time
  shift(e11) {
    if (e11 !== 0) {
      const t19 = this.times;
      for (let i27 = 0, r24 = t19.length; i27 !== r24; ++i27)
        t19[i27] += e11;
    }
    return this;
  }
  // scale all keyframe times by a factor (useful for frame <-> seconds conversions)
  scale(e11) {
    if (e11 !== 1) {
      const t19 = this.times;
      for (let i27 = 0, r24 = t19.length; i27 !== r24; ++i27)
        t19[i27] *= e11;
    }
    return this;
  }
  // removes keyframes before and after animation without changing any values within the range [startTime, endTime].
  // IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values
  trim(e11, t19) {
    const i27 = this.times, r24 = i27.length;
    let n33 = 0, a22 = r24 - 1;
    for (; n33 !== r24 && i27[n33] < e11; )
      ++n33;
    for (; a22 !== -1 && i27[a22] > t19; )
      --a22;
    if (++a22, n33 !== 0 || a22 !== r24) {
      n33 >= a22 && (a22 = Math.max(a22, 1), n33 = a22 - 1);
      const o12 = this.getValueSize();
      this.times = Ji3(i27, n33, a22), this.values = Ji3(this.values, n33 * o12, a22 * o12);
    }
    return this;
  }
  // ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable
  validate() {
    let e11 = true;
    const t19 = this.getValueSize();
    t19 - Math.floor(t19) !== 0 && (console.error("THREE.KeyframeTrack: Invalid value size in track.", this), e11 = false);
    const i27 = this.times, r24 = this.values, n33 = i27.length;
    n33 === 0 && (console.error("THREE.KeyframeTrack: Track is empty.", this), e11 = false);
    let a22 = null;
    for (let o12 = 0; o12 !== n33; o12++) {
      const l25 = i27[o12];
      if (typeof l25 == "number" && isNaN(l25)) {
        console.error("THREE.KeyframeTrack: Time is not a valid number.", this, o12, l25), e11 = false;
        break;
      }
      if (a22 !== null && a22 > l25) {
        console.error("THREE.KeyframeTrack: Out of order keys.", this, o12, l25, a22), e11 = false;
        break;
      }
      a22 = l25;
    }
    if (r24 !== void 0 && Nh2(r24))
      for (let o12 = 0, l25 = r24.length; o12 !== l25; ++o12) {
        const c27 = r24[o12];
        if (isNaN(c27)) {
          console.error("THREE.KeyframeTrack: Value is not a valid number.", this, o12, c27), e11 = false;
          break;
        }
      }
    return e11;
  }
  // removes equivalent sequential keys as common in morph target sequences
  // (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)
  optimize() {
    const e11 = Ji3(this.times), t19 = Ji3(this.values), i27 = this.getValueSize(), r24 = this.getInterpolation() === Aa, n33 = e11.length - 1;
    let a22 = 1;
    for (let o12 = 1; o12 < n33; ++o12) {
      let l25 = false;
      const c27 = e11[o12], h26 = e11[o12 + 1];
      if (c27 !== h26 && (o12 !== 1 || c27 !== e11[0]))
        if (r24)
          l25 = true;
        else {
          const u35 = o12 * i27, d34 = u35 - i27, m33 = u35 + i27;
          for (let _19 = 0; _19 !== i27; ++_19) {
            const y33 = t19[u35 + _19];
            if (y33 !== t19[d34 + _19] || y33 !== t19[m33 + _19]) {
              l25 = true;
              break;
            }
          }
        }
      if (l25) {
        if (o12 !== a22) {
          e11[a22] = e11[o12];
          const u35 = o12 * i27, d34 = a22 * i27;
          for (let m33 = 0; m33 !== i27; ++m33)
            t19[d34 + m33] = t19[u35 + m33];
        }
        ++a22;
      }
    }
    if (n33 > 0) {
      e11[a22] = e11[n33];
      for (let o12 = n33 * i27, l25 = a22 * i27, c27 = 0; c27 !== i27; ++c27)
        t19[l25 + c27] = t19[o12 + c27];
      ++a22;
    }
    return a22 !== e11.length ? (this.times = Ji3(e11, 0, a22), this.values = Ji3(t19, 0, a22 * i27)) : (this.times = e11, this.values = t19), this;
  }
  clone() {
    const e11 = Ji3(this.times, 0), t19 = Ji3(this.values, 0), i27 = this.constructor, r24 = new i27(this.name, e11, t19);
    return r24.createInterpolant = this.createInterpolant, r24;
  }
};
Ai6.prototype.TimeBufferType = Float32Array;
Ai6.prototype.ValueBufferType = Float32Array;
Ai6.prototype.DefaultInterpolation = Mn5;
var Nn4 = class extends Ai6 {
};
Nn4.prototype.ValueTypeName = "bool";
Nn4.prototype.ValueBufferType = Array;
Nn4.prototype.DefaultInterpolation = Qn5;
Nn4.prototype.InterpolantFactoryMethodLinear = void 0;
Nn4.prototype.InterpolantFactoryMethodSmooth = void 0;
var Ih2 = class extends Ai6 {
};
Ih2.prototype.ValueTypeName = "color";
var ts3 = class extends Ai6 {
};
ts3.prototype.ValueTypeName = "number";
var R02 = class extends os3 {
  constructor(e11, t19, i27, r24) {
    super(e11, t19, i27, r24);
  }
  interpolate_(e11, t19, i27, r24) {
    const n33 = this.resultBuffer, a22 = this.sampleValues, o12 = this.valueSize, l25 = (i27 - t19) / (r24 - t19);
    let c27 = e11 * o12;
    for (let h26 = c27 + o12; c27 !== h26; c27 += 4)
      jt8.slerpFlat(n33, 0, a22, c27 - o12, a22, c27, l25);
    return n33;
  }
};
var ir5 = class extends Ai6 {
  InterpolantFactoryMethodLinear(e11) {
    return new R02(this.times, this.values, this.getValueSize(), e11);
  }
};
ir5.prototype.ValueTypeName = "quaternion";
ir5.prototype.DefaultInterpolation = Mn5;
ir5.prototype.InterpolantFactoryMethodSmooth = void 0;
var Pn5 = class extends Ai6 {
};
Pn5.prototype.ValueTypeName = "string";
Pn5.prototype.ValueBufferType = Array;
Pn5.prototype.DefaultInterpolation = Qn5;
Pn5.prototype.InterpolantFactoryMethodLinear = void 0;
Pn5.prototype.InterpolantFactoryMethodSmooth = void 0;
var Sr5 = class extends Ai6 {
};
Sr5.prototype.ValueTypeName = "vector";
var bo = class {
  constructor(e11, t19 = -1, i27, r24 = Zu) {
    this.name = e11, this.tracks = i27, this.duration = t19, this.blendMode = r24, this.uuid = bi6(), this.duration < 0 && this.resetDuration();
  }
  static parse(e11) {
    const t19 = [], i27 = e11.tracks, r24 = 1 / (e11.fps || 1);
    for (let a22 = 0, o12 = i27.length; a22 !== o12; ++a22)
      t19.push(P02(i27[a22]).scale(r24));
    const n33 = new this(e11.name, e11.duration, t19, e11.blendMode);
    return n33.uuid = e11.uuid, n33;
  }
  static toJSON(e11) {
    const t19 = [], i27 = e11.tracks, r24 = {
      name: e11.name,
      duration: e11.duration,
      tracks: t19,
      uuid: e11.uuid,
      blendMode: e11.blendMode
    };
    for (let n33 = 0, a22 = i27.length; n33 !== a22; ++n33)
      t19.push(Ai6.toJSON(i27[n33]));
    return r24;
  }
  static CreateFromMorphTargetSequence(e11, t19, i27, r24) {
    const n33 = t19.length, a22 = [];
    for (let o12 = 0; o12 < n33; o12++) {
      let l25 = [], c27 = [];
      l25.push(
        (o12 + n33 - 1) % n33,
        o12,
        (o12 + 1) % n33
      ), c27.push(0, 1, 0);
      const h26 = E02(l25);
      l25 = Nc2(l25, 1, h26), c27 = Nc2(c27, 1, h26), !r24 && l25[0] === 0 && (l25.push(n33), c27.push(c27[0])), a22.push(
        new ts3(
          ".morphTargetInfluences[" + t19[o12].name + "]",
          l25,
          c27
        ).scale(1 / i27)
      );
    }
    return new this(e11, -1, a22);
  }
  static findByName(e11, t19) {
    let i27 = e11;
    if (!Array.isArray(e11)) {
      const r24 = e11;
      i27 = r24.geometry && r24.geometry.animations || r24.animations;
    }
    for (let r24 = 0; r24 < i27.length; r24++)
      if (i27[r24].name === t19)
        return i27[r24];
    return null;
  }
  static CreateClipsFromMorphTargetSequences(e11, t19, i27) {
    const r24 = {}, n33 = /^([\w-]*?)([\d]+)$/;
    for (let o12 = 0, l25 = e11.length; o12 < l25; o12++) {
      const c27 = e11[o12], h26 = c27.name.match(n33);
      if (h26 && h26.length > 1) {
        const u35 = h26[1];
        let d34 = r24[u35];
        d34 || (r24[u35] = d34 = []), d34.push(c27);
      }
    }
    const a22 = [];
    for (const o12 in r24)
      a22.push(this.CreateFromMorphTargetSequence(o12, r24[o12], t19, i27));
    return a22;
  }
  // parse the animation.hierarchy format
  static parseAnimation(e11, t19) {
    if (!e11)
      return console.error("THREE.AnimationClip: No animation in JSONLoader data."), null;
    const i27 = function(h26, u35, d34, m33, _19) {
      if (d34.length !== 0) {
        const y33 = [], f39 = [];
        Ph2(d34, y33, f39, m33), y33.length !== 0 && _19.push(new h26(u35, y33, f39));
      }
    }, r24 = [], n33 = e11.name || "default", a22 = e11.fps || 30, o12 = e11.blendMode;
    let l25 = e11.length || -1;
    const c27 = e11.hierarchy || [];
    for (let h26 = 0; h26 < c27.length; h26++) {
      const u35 = c27[h26].keys;
      if (!(!u35 || u35.length === 0))
        if (u35[0].morphTargets) {
          const d34 = {};
          let m33;
          for (m33 = 0; m33 < u35.length; m33++)
            if (u35[m33].morphTargets)
              for (let _19 = 0; _19 < u35[m33].morphTargets.length; _19++)
                d34[u35[m33].morphTargets[_19]] = -1;
          for (const _19 in d34) {
            const y33 = [], f39 = [];
            for (let p26 = 0; p26 !== u35[m33].morphTargets.length; ++p26) {
              const A17 = u35[m33];
              y33.push(A17.time), f39.push(A17.morphTarget === _19 ? 1 : 0);
            }
            r24.push(new ts3(".morphTargetInfluence[" + _19 + "]", y33, f39));
          }
          l25 = d34.length * a22;
        } else {
          const d34 = ".bones[" + t19[h26].name + "]";
          i27(
            Sr5,
            d34 + ".position",
            u35,
            "pos",
            r24
          ), i27(
            ir5,
            d34 + ".quaternion",
            u35,
            "rot",
            r24
          ), i27(
            Sr5,
            d34 + ".scale",
            u35,
            "scl",
            r24
          );
        }
    }
    return r24.length === 0 ? null : new this(n33, l25, r24, o12);
  }
  resetDuration() {
    const e11 = this.tracks;
    let t19 = 0;
    for (let i27 = 0, r24 = e11.length; i27 !== r24; ++i27) {
      const n33 = this.tracks[i27];
      t19 = Math.max(t19, n33.times[n33.times.length - 1]);
    }
    return this.duration = t19, this;
  }
  trim() {
    for (let e11 = 0; e11 < this.tracks.length; e11++)
      this.tracks[e11].trim(0, this.duration);
    return this;
  }
  validate() {
    let e11 = true;
    for (let t19 = 0; t19 < this.tracks.length; t19++)
      e11 = e11 && this.tracks[t19].validate();
    return e11;
  }
  optimize() {
    for (let e11 = 0; e11 < this.tracks.length; e11++)
      this.tracks[e11].optimize();
    return this;
  }
  clone() {
    const e11 = [];
    for (let t19 = 0; t19 < this.tracks.length; t19++)
      e11.push(this.tracks[t19].clone());
    return new this.constructor(this.name, this.duration, e11, this.blendMode);
  }
  toJSON() {
    return this.constructor.toJSON(this);
  }
};
function N02(s18) {
  switch (s18.toLowerCase()) {
    case "scalar":
    case "double":
    case "float":
    case "number":
    case "integer":
      return ts3;
    case "vector":
    case "vector2":
    case "vector3":
    case "vector4":
      return Sr5;
    case "color":
      return Ih2;
    case "quaternion":
      return ir5;
    case "bool":
    case "boolean":
      return Nn4;
    case "string":
      return Pn5;
  }
  throw new Error("THREE.KeyframeTrack: Unsupported typeName: " + s18);
}
function P02(s18) {
  if (s18.type === void 0)
    throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");
  const e11 = N02(s18.type);
  if (s18.times === void 0) {
    const t19 = [], i27 = [];
    Ph2(s18.keys, t19, i27, "value"), s18.times = t19, s18.values = i27;
  }
  return e11.parse !== void 0 ? e11.parse(s18) : new e11(s18.name, s18.times, s18.values, s18.interpolation);
}
var En5 = {
  enabled: false,
  files: {},
  add: function(s18, e11) {
    this.enabled !== false && (this.files[s18] = e11);
  },
  get: function(s18) {
    if (this.enabled !== false)
      return this.files[s18];
  },
  remove: function(s18) {
    delete this.files[s18];
  },
  clear: function() {
    this.files = {};
  }
};
var Fo2 = class {
  constructor(e11, t19, i27) {
    const r24 = this;
    let n33 = false, a22 = 0, o12 = 0, l25;
    const c27 = [];
    this.onStart = void 0, this.onLoad = e11, this.onProgress = t19, this.onError = i27, this.itemStart = function(h26) {
      o12++, n33 === false && r24.onStart !== void 0 && r24.onStart(h26, a22, o12), n33 = true;
    }, this.itemEnd = function(h26) {
      a22++, r24.onProgress !== void 0 && r24.onProgress(h26, a22, o12), a22 === o12 && (n33 = false, r24.onLoad !== void 0 && r24.onLoad());
    }, this.itemError = function(h26) {
      r24.onError !== void 0 && r24.onError(h26);
    }, this.resolveURL = function(h26) {
      return l25 ? l25(h26) : h26;
    }, this.setURLModifier = function(h26) {
      return l25 = h26, this;
    }, this.addHandler = function(h26, u35) {
      return c27.push(h26, u35), this;
    }, this.removeHandler = function(h26) {
      const u35 = c27.indexOf(h26);
      return u35 !== -1 && c27.splice(u35, 2), this;
    }, this.getHandler = function(h26) {
      for (let u35 = 0, d34 = c27.length; u35 < d34; u35 += 2) {
        const m33 = c27[u35], _19 = c27[u35 + 1];
        if (m33.global && (m33.lastIndex = 0), m33.test(h26))
          return _19;
      }
      return null;
    };
  }
};
var Dh2 = new Fo2();
var rr5 = class {
  constructor(e11) {
    this.manager = e11 !== void 0 ? e11 : Dh2, this.crossOrigin = "anonymous", this.withCredentials = false, this.path = "", this.resourcePath = "", this.requestHeader = {};
  }
  load() {
  }
  loadAsync(e11, t19) {
    const i27 = this;
    return new Promise(function(r24, n33) {
      i27.load(e11, r24, t19, n33);
    });
  }
  parse() {
  }
  setCrossOrigin(e11) {
    return this.crossOrigin = e11, this;
  }
  setWithCredentials(e11) {
    return this.withCredentials = e11, this;
  }
  setPath(e11) {
    return this.path = e11, this;
  }
  setResourcePath(e11) {
    return this.resourcePath = e11, this;
  }
  setRequestHeader(e11) {
    return this.requestHeader = e11, this;
  }
};
var Oi4 = {};
var I02 = class extends Error {
  constructor(e11, t19) {
    super(e11), this.response = t19;
  }
};
var ls3 = class extends rr5 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, i27, r24) {
    e11 === void 0 && (e11 = ""), this.path !== void 0 && (e11 = this.path + e11), e11 = this.manager.resolveURL(e11);
    const n33 = En5.get(e11);
    if (n33 !== void 0)
      return this.manager.itemStart(e11), setTimeout(() => {
        t19 && t19(n33), this.manager.itemEnd(e11);
      }, 0), n33;
    if (Oi4[e11] !== void 0) {
      Oi4[e11].push({
        onLoad: t19,
        onProgress: i27,
        onError: r24
      });
      return;
    }
    Oi4[e11] = [], Oi4[e11].push({
      onLoad: t19,
      onProgress: i27,
      onError: r24
    });
    const a22 = new Request(e11, {
      headers: new Headers(this.requestHeader),
      credentials: this.withCredentials ? "include" : "same-origin"
      // An abort controller could be added within a future PR
    }), o12 = this.mimeType, l25 = this.responseType;
    fetch(a22).then((c27) => {
      if (c27.status === 200 || c27.status === 0) {
        if (c27.status === 0 && console.warn("THREE.FileLoader: HTTP Status 0 received."), typeof ReadableStream > "u" || c27.body === void 0 || c27.body.getReader === void 0)
          return c27;
        const h26 = Oi4[e11], u35 = c27.body.getReader(), d34 = c27.headers.get("Content-Length") || c27.headers.get("X-File-Size"), m33 = d34 ? parseInt(d34) : 0, _19 = m33 !== 0;
        let y33 = 0;
        const f39 = new ReadableStream({
          start(p26) {
            A17();
            function A17() {
              u35.read().then(({ done: M12, value: E24 }) => {
                if (M12)
                  p26.close();
                else {
                  y33 += E24.byteLength;
                  const w29 = new ProgressEvent("progress", { lengthComputable: _19, loaded: y33, total: m33 });
                  for (let I16 = 0, D17 = h26.length; I16 < D17; I16++) {
                    const P19 = h26[I16];
                    P19.onProgress && P19.onProgress(w29);
                  }
                  p26.enqueue(E24), A17();
                }
              });
            }
          }
        });
        return new Response(f39);
      } else
        throw new I02(`fetch for "${c27.url}" responded with ${c27.status}: ${c27.statusText}`, c27);
    }).then((c27) => {
      switch (l25) {
        case "arraybuffer":
          return c27.arrayBuffer();
        case "blob":
          return c27.blob();
        case "document":
          return c27.text().then((h26) => new DOMParser().parseFromString(h26, o12));
        case "json":
          return c27.json();
        default:
          if (o12 === void 0)
            return c27.text();
          {
            const h26 = /charset="?([^;"\s]*)"?/i.exec(o12), u35 = h26 && h26[1] ? h26[1].toLowerCase() : void 0, d34 = new TextDecoder(u35);
            return c27.arrayBuffer().then((m33) => d34.decode(m33));
          }
      }
    }).then((c27) => {
      En5.add(e11, c27);
      const h26 = Oi4[e11];
      delete Oi4[e11];
      for (let u35 = 0, d34 = h26.length; u35 < d34; u35++) {
        const m33 = h26[u35];
        m33.onLoad && m33.onLoad(c27);
      }
    }).catch((c27) => {
      const h26 = Oi4[e11];
      if (h26 === void 0)
        throw this.manager.itemError(e11), c27;
      delete Oi4[e11];
      for (let u35 = 0, d34 = h26.length; u35 < d34; u35++) {
        const m33 = h26[u35];
        m33.onError && m33.onError(c27);
      }
      this.manager.itemError(e11);
    }).finally(() => {
      this.manager.itemEnd(e11);
    }), this.manager.itemStart(e11);
  }
  setResponseType(e11) {
    return this.responseType = e11, this;
  }
  setMimeType(e11) {
    return this.mimeType = e11, this;
  }
};
var D02 = class extends rr5 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, i27, r24) {
    this.path !== void 0 && (e11 = this.path + e11), e11 = this.manager.resolveURL(e11);
    const n33 = this, a22 = En5.get(e11);
    if (a22 !== void 0)
      return n33.manager.itemStart(e11), setTimeout(function() {
        t19 && t19(a22), n33.manager.itemEnd(e11);
      }, 0), a22;
    const o12 = es3("img");
    function l25() {
      h26(), En5.add(e11, this), t19 && t19(this), n33.manager.itemEnd(e11);
    }
    function c27(u35) {
      h26(), r24 && r24(u35), n33.manager.itemError(e11), n33.manager.itemEnd(e11);
    }
    function h26() {
      o12.removeEventListener("load", l25, false), o12.removeEventListener("error", c27, false);
    }
    return o12.addEventListener("load", l25, false), o12.addEventListener("error", c27, false), e11.slice(0, 5) !== "data:" && this.crossOrigin !== void 0 && (o12.crossOrigin = this.crossOrigin), n33.manager.itemStart(e11), o12.src = e11, o12;
  }
};
var k02 = class extends rr5 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, i27, r24) {
    const n33 = this, a22 = new Ch2(), o12 = new ls3(this.manager);
    return o12.setResponseType("arraybuffer"), o12.setRequestHeader(this.requestHeader), o12.setPath(this.path), o12.setWithCredentials(n33.withCredentials), o12.load(e11, function(l25) {
      const c27 = n33.parse(l25);
      c27 && (c27.image !== void 0 ? a22.image = c27.image : c27.data !== void 0 && (a22.image.width = c27.width, a22.image.height = c27.height, a22.image.data = c27.data), a22.wrapS = c27.wrapS !== void 0 ? c27.wrapS : Zt6, a22.wrapT = c27.wrapT !== void 0 ? c27.wrapT : Zt6, a22.magFilter = c27.magFilter !== void 0 ? c27.magFilter : Vt6, a22.minFilter = c27.minFilter !== void 0 ? c27.minFilter : Vt6, a22.anisotropy = c27.anisotropy !== void 0 ? c27.anisotropy : 1, c27.encoding !== void 0 && (a22.encoding = c27.encoding), c27.flipY !== void 0 && (a22.flipY = c27.flipY), c27.format !== void 0 && (a22.format = c27.format), c27.type !== void 0 && (a22.type = c27.type), c27.mipmaps !== void 0 && (a22.mipmaps = c27.mipmaps, a22.minFilter = Hi3), c27.mipmapCount === 1 && (a22.minFilter = Vt6), c27.generateMipmaps !== void 0 && (a22.generateMipmaps = c27.generateMipmaps), a22.needsUpdate = true, t19 && t19(a22, c27));
    }, i27, r24), a22;
  }
};
var Ho2 = class extends rr5 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, i27, r24) {
    const n33 = new Wt7(), a22 = new D02(this.manager);
    return a22.setCrossOrigin(this.crossOrigin), a22.setPath(this.path), a22.load(e11, function(o12) {
      n33.image = o12, n33.needsUpdate = true, t19 !== void 0 && t19(n33);
    }, i27, r24), n33;
  }
};
var cs2 = class extends _t7 {
  constructor(e11, t19 = 1) {
    super(), this.isLight = true, this.type = "Light", this.color = new ze7(e11), this.intensity = t19;
  }
  dispose() {
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.color.copy(e11.color), this.intensity = e11.intensity, this;
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return t19.object.color = this.color.getHex(), t19.object.intensity = this.intensity, this.groundColor !== void 0 && (t19.object.groundColor = this.groundColor.getHex()), this.distance !== void 0 && (t19.object.distance = this.distance), this.angle !== void 0 && (t19.object.angle = this.angle), this.decay !== void 0 && (t19.object.decay = this.decay), this.penumbra !== void 0 && (t19.object.penumbra = this.penumbra), this.shadow !== void 0 && (t19.object.shadow = this.shadow.toJSON()), t19;
  }
};
var kh2 = class extends cs2 {
  constructor(e11, t19, i27) {
    super(e11, i27), this.isHemisphereLight = true, this.type = "HemisphereLight", this.position.copy(_t7.DEFAULT_UP), this.updateMatrix(), this.groundColor = new ze7(t19);
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.groundColor.copy(e11.groundColor), this;
  }
};
var $a2 = new He6();
var Pc2 = new k18();
var Ic2 = new k18();
var Vo2 = class {
  constructor(e11) {
    this.camera = e11, this.bias = 0, this.normalBias = 0, this.radius = 1, this.blurSamples = 8, this.mapSize = new We7(512, 512), this.map = null, this.mapPass = null, this.matrix = new He6(), this.autoUpdate = true, this.needsUpdate = false, this._frustum = new Po2(), this._frameExtents = new We7(1, 1), this._viewportCount = 1, this._viewports = [
      new gt11(0, 0, 1, 1)
    ];
  }
  getViewportCount() {
    return this._viewportCount;
  }
  getFrustum() {
    return this._frustum;
  }
  updateMatrices(e11) {
    const t19 = this.camera, i27 = this.matrix;
    Pc2.setFromMatrixPosition(e11.matrixWorld), t19.position.copy(Pc2), Ic2.setFromMatrixPosition(e11.target.matrixWorld), t19.lookAt(Ic2), t19.updateMatrixWorld(), $a2.multiplyMatrices(t19.projectionMatrix, t19.matrixWorldInverse), this._frustum.setFromProjectionMatrix($a2), i27.set(
      0.5,
      0,
      0,
      0.5,
      0,
      0.5,
      0,
      0.5,
      0,
      0,
      0.5,
      0.5,
      0,
      0,
      0,
      1
    ), i27.multiply($a2);
  }
  getViewport(e11) {
    return this._viewports[e11];
  }
  getFrameExtents() {
    return this._frameExtents;
  }
  dispose() {
    this.map && this.map.dispose(), this.mapPass && this.mapPass.dispose();
  }
  copy(e11) {
    return this.camera = e11.camera.clone(), this.bias = e11.bias, this.radius = e11.radius, this.mapSize.copy(e11.mapSize), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  toJSON() {
    const e11 = {};
    return this.bias !== 0 && (e11.bias = this.bias), this.normalBias !== 0 && (e11.normalBias = this.normalBias), this.radius !== 1 && (e11.radius = this.radius), (this.mapSize.x !== 512 || this.mapSize.y !== 512) && (e11.mapSize = this.mapSize.toArray()), e11.camera = this.camera.toJSON(false).object, delete e11.camera.matrix, e11;
  }
};
var U02 = class extends Vo2 {
  constructor() {
    super(new Bt6(50, 1, 0.5, 500)), this.isSpotLightShadow = true, this.focus = 1;
  }
  updateMatrices(e11) {
    const t19 = this.camera, i27 = wn5 * 2 * e11.angle * this.focus, r24 = this.mapSize.width / this.mapSize.height, n33 = e11.distance || t19.far;
    (i27 !== t19.fov || r24 !== t19.aspect || n33 !== t19.far) && (t19.fov = i27, t19.aspect = r24, t19.far = n33, t19.updateProjectionMatrix()), super.updateMatrices(e11);
  }
  copy(e11) {
    return super.copy(e11), this.focus = e11.focus, this;
  }
};
var Uh2 = class extends cs2 {
  constructor(e11, t19, i27 = 0, r24 = Math.PI / 3, n33 = 0, a22 = 2) {
    super(e11, t19), this.isSpotLight = true, this.type = "SpotLight", this.position.copy(_t7.DEFAULT_UP), this.updateMatrix(), this.target = new _t7(), this.distance = i27, this.angle = r24, this.penumbra = n33, this.decay = a22, this.map = null, this.shadow = new U02();
  }
  get power() {
    return this.intensity * Math.PI;
  }
  set power(e11) {
    this.intensity = e11 / Math.PI;
  }
  dispose() {
    this.shadow.dispose();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.distance = e11.distance, this.angle = e11.angle, this.penumbra = e11.penumbra, this.decay = e11.decay, this.target = e11.target.clone(), this.shadow = e11.shadow.clone(), this;
  }
};
var Dc2 = new He6();
var Vn5 = new k18();
var Qa = new k18();
var O02 = class extends Vo2 {
  constructor() {
    super(new Bt6(90, 1, 0.5, 500)), this.isPointLightShadow = true, this._frameExtents = new We7(4, 2), this._viewportCount = 6, this._viewports = [
      // These viewports map a cube-map onto a 2D texture with the
      // following orientation:
      //
      //  xzXZ
      //   y Y
      //
      // X - Positive x direction
      // x - Negative x direction
      // Y - Positive y direction
      // y - Negative y direction
      // Z - Positive z direction
      // z - Negative z direction
      // positive X
      new gt11(2, 1, 1, 1),
      // negative X
      new gt11(0, 1, 1, 1),
      // positive Z
      new gt11(3, 1, 1, 1),
      // negative Z
      new gt11(1, 1, 1, 1),
      // positive Y
      new gt11(3, 0, 1, 1),
      // negative Y
      new gt11(1, 0, 1, 1)
    ], this._cubeDirections = [
      new k18(1, 0, 0),
      new k18(-1, 0, 0),
      new k18(0, 0, 1),
      new k18(0, 0, -1),
      new k18(0, 1, 0),
      new k18(0, -1, 0)
    ], this._cubeUps = [
      new k18(0, 1, 0),
      new k18(0, 1, 0),
      new k18(0, 1, 0),
      new k18(0, 1, 0),
      new k18(0, 0, 1),
      new k18(0, 0, -1)
    ];
  }
  updateMatrices(e11, t19 = 0) {
    const i27 = this.camera, r24 = this.matrix, n33 = e11.distance || i27.far;
    n33 !== i27.far && (i27.far = n33, i27.updateProjectionMatrix()), Vn5.setFromMatrixPosition(e11.matrixWorld), i27.position.copy(Vn5), Qa.copy(i27.position), Qa.add(this._cubeDirections[t19]), i27.up.copy(this._cubeUps[t19]), i27.lookAt(Qa), i27.updateMatrixWorld(), r24.makeTranslation(-Vn5.x, -Vn5.y, -Vn5.z), Dc2.multiplyMatrices(i27.projectionMatrix, i27.matrixWorldInverse), this._frustum.setFromProjectionMatrix(Dc2);
  }
};
var da2 = class extends cs2 {
  constructor(e11, t19, i27 = 0, r24 = 2) {
    super(e11, t19), this.isPointLight = true, this.type = "PointLight", this.distance = i27, this.decay = r24, this.shadow = new O02();
  }
  get power() {
    return this.intensity * 4 * Math.PI;
  }
  set power(e11) {
    this.intensity = e11 / (4 * Math.PI);
  }
  dispose() {
    this.shadow.dispose();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.distance = e11.distance, this.decay = e11.decay, this.shadow = e11.shadow.clone(), this;
  }
};
var z02 = class extends Vo2 {
  constructor() {
    super(new la2(-5, 5, 5, -5, 0.5, 500)), this.isDirectionalLightShadow = true;
  }
};
var Oh2 = class extends cs2 {
  constructor(e11, t19) {
    super(e11, t19), this.isDirectionalLight = true, this.type = "DirectionalLight", this.position.copy(_t7.DEFAULT_UP), this.updateMatrix(), this.target = new _t7(), this.shadow = new z02();
  }
  dispose() {
    this.shadow.dispose();
  }
  copy(e11) {
    return super.copy(e11), this.target = e11.target.clone(), this.shadow = e11.shadow.clone(), this;
  }
};
var B02 = class extends cs2 {
  constructor(e11, t19) {
    super(e11, t19), this.isAmbientLight = true, this.type = "AmbientLight";
  }
};
var is3 = class {
  static decodeText(e11) {
    if (typeof TextDecoder < "u")
      return new TextDecoder().decode(e11);
    let t19 = "";
    for (let i27 = 0, r24 = e11.length; i27 < r24; i27++)
      t19 += String.fromCharCode(e11[i27]);
    try {
      return decodeURIComponent(escape(t19));
    } catch {
      return t19;
    }
  }
  static extractUrlBase(e11) {
    const t19 = e11.lastIndexOf("/");
    return t19 === -1 ? "./" : e11.slice(0, t19 + 1);
  }
  static resolveURL(e11, t19) {
    return typeof e11 != "string" || e11 === "" ? "" : (/^https?:\/\//i.test(t19) && /^\//.test(e11) && (t19 = t19.replace(/(^https?:\/\/[^\/]+).*/i, "$1")), /^(https?:)?\/\//i.test(e11) || /^data:.*,.*$/i.test(e11) || /^blob:.*$/i.test(e11) ? e11 : t19 + e11);
  }
};
var F02 = class extends rr5 {
  constructor(e11) {
    super(e11), this.isImageBitmapLoader = true, typeof createImageBitmap > "u" && console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."), typeof fetch > "u" && console.warn("THREE.ImageBitmapLoader: fetch() not supported."), this.options = { premultiplyAlpha: "none" };
  }
  setOptions(e11) {
    return this.options = e11, this;
  }
  load(e11, t19, i27, r24) {
    e11 === void 0 && (e11 = ""), this.path !== void 0 && (e11 = this.path + e11), e11 = this.manager.resolveURL(e11);
    const n33 = this, a22 = En5.get(e11);
    if (a22 !== void 0)
      return n33.manager.itemStart(e11), setTimeout(function() {
        t19 && t19(a22), n33.manager.itemEnd(e11);
      }, 0), a22;
    const o12 = {};
    o12.credentials = this.crossOrigin === "anonymous" ? "same-origin" : "include", o12.headers = this.requestHeader, fetch(e11, o12).then(function(l25) {
      return l25.blob();
    }).then(function(l25) {
      return createImageBitmap(l25, Object.assign(n33.options, { colorSpaceConversion: "none" }));
    }).then(function(l25) {
      En5.add(e11, l25), t19 && t19(l25), n33.manager.itemEnd(e11);
    }).catch(function(l25) {
      r24 && r24(l25), n33.manager.itemError(e11), n33.manager.itemEnd(e11);
    }), n33.manager.itemStart(e11);
  }
};
var Go2 = "\\[\\]\\.:\\/";
var H02 = new RegExp("[" + Go2 + "]", "g");
var Wo2 = "[^" + Go2 + "]";
var V02 = "[^" + Go2.replace("\\.", "") + "]";
var G02 = /((?:WC+[\/:])*)/.source.replace("WC", Wo2);
var W02 = /(WCOD+)?/.source.replace("WCOD", V02);
var j02 = /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC", Wo2);
var X02 = /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", Wo2);
var q02 = new RegExp(
  "^" + G02 + W02 + j02 + X02 + "$"
);
var Y02 = ["material", "materials", "bones", "map"];
var Z02 = class {
  constructor(e11, t19, i27) {
    const r24 = i27 || ht12.parseTrackName(t19);
    this._targetGroup = e11, this._bindings = e11.subscribe_(t19, r24);
  }
  getValue(e11, t19) {
    this.bind();
    const i27 = this._targetGroup.nCachedObjects_, r24 = this._bindings[i27];
    r24 !== void 0 && r24.getValue(e11, t19);
  }
  setValue(e11, t19) {
    const i27 = this._bindings;
    for (let r24 = this._targetGroup.nCachedObjects_, n33 = i27.length; r24 !== n33; ++r24)
      i27[r24].setValue(e11, t19);
  }
  bind() {
    const e11 = this._bindings;
    for (let t19 = this._targetGroup.nCachedObjects_, i27 = e11.length; t19 !== i27; ++t19)
      e11[t19].bind();
  }
  unbind() {
    const e11 = this._bindings;
    for (let t19 = this._targetGroup.nCachedObjects_, i27 = e11.length; t19 !== i27; ++t19)
      e11[t19].unbind();
  }
};
var ht12 = class _ht {
  constructor(e11, t19, i27) {
    this.path = t19, this.parsedPath = i27 || _ht.parseTrackName(t19), this.node = _ht.findNode(e11, this.parsedPath.nodeName), this.rootNode = e11, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound;
  }
  static create(e11, t19, i27) {
    return e11 && e11.isAnimationObjectGroup ? new _ht.Composite(e11, t19, i27) : new _ht(e11, t19, i27);
  }
  /**
   * Replaces spaces with underscores and removes unsupported characters from
   * node names, to ensure compatibility with parseTrackName().
   *
   * @param {string} name Node name to be sanitized.
   * @return {string}
   */
  static sanitizeNodeName(e11) {
    return e11.replace(/\s/g, "_").replace(H02, "");
  }
  static parseTrackName(e11) {
    const t19 = q02.exec(e11);
    if (t19 === null)
      throw new Error("PropertyBinding: Cannot parse trackName: " + e11);
    const i27 = {
      // directoryName: matches[ 1 ], // (tschw) currently unused
      nodeName: t19[2],
      objectName: t19[3],
      objectIndex: t19[4],
      propertyName: t19[5],
      // required
      propertyIndex: t19[6]
    }, r24 = i27.nodeName && i27.nodeName.lastIndexOf(".");
    if (r24 !== void 0 && r24 !== -1) {
      const n33 = i27.nodeName.substring(r24 + 1);
      Y02.indexOf(n33) !== -1 && (i27.nodeName = i27.nodeName.substring(0, r24), i27.objectName = n33);
    }
    if (i27.propertyName === null || i27.propertyName.length === 0)
      throw new Error("PropertyBinding: can not parse propertyName from trackName: " + e11);
    return i27;
  }
  static findNode(e11, t19) {
    if (t19 === void 0 || t19 === "" || t19 === "." || t19 === -1 || t19 === e11.name || t19 === e11.uuid)
      return e11;
    if (e11.skeleton) {
      const i27 = e11.skeleton.getBoneByName(t19);
      if (i27 !== void 0)
        return i27;
    }
    if (e11.children) {
      const i27 = function(n33) {
        for (let a22 = 0; a22 < n33.length; a22++) {
          const o12 = n33[a22];
          if (o12.name === t19 || o12.uuid === t19)
            return o12;
          const l25 = i27(o12.children);
          if (l25)
            return l25;
        }
        return null;
      }, r24 = i27(e11.children);
      if (r24)
        return r24;
    }
    return null;
  }
  // these are used to "bind" a nonexistent property
  _getValue_unavailable() {
  }
  _setValue_unavailable() {
  }
  // Getters
  _getValue_direct(e11, t19) {
    e11[t19] = this.targetObject[this.propertyName];
  }
  _getValue_array(e11, t19) {
    const i27 = this.resolvedProperty;
    for (let r24 = 0, n33 = i27.length; r24 !== n33; ++r24)
      e11[t19++] = i27[r24];
  }
  _getValue_arrayElement(e11, t19) {
    e11[t19] = this.resolvedProperty[this.propertyIndex];
  }
  _getValue_toArray(e11, t19) {
    this.resolvedProperty.toArray(e11, t19);
  }
  // Direct
  _setValue_direct(e11, t19) {
    this.targetObject[this.propertyName] = e11[t19];
  }
  _setValue_direct_setNeedsUpdate(e11, t19) {
    this.targetObject[this.propertyName] = e11[t19], this.targetObject.needsUpdate = true;
  }
  _setValue_direct_setMatrixWorldNeedsUpdate(e11, t19) {
    this.targetObject[this.propertyName] = e11[t19], this.targetObject.matrixWorldNeedsUpdate = true;
  }
  // EntireArray
  _setValue_array(e11, t19) {
    const i27 = this.resolvedProperty;
    for (let r24 = 0, n33 = i27.length; r24 !== n33; ++r24)
      i27[r24] = e11[t19++];
  }
  _setValue_array_setNeedsUpdate(e11, t19) {
    const i27 = this.resolvedProperty;
    for (let r24 = 0, n33 = i27.length; r24 !== n33; ++r24)
      i27[r24] = e11[t19++];
    this.targetObject.needsUpdate = true;
  }
  _setValue_array_setMatrixWorldNeedsUpdate(e11, t19) {
    const i27 = this.resolvedProperty;
    for (let r24 = 0, n33 = i27.length; r24 !== n33; ++r24)
      i27[r24] = e11[t19++];
    this.targetObject.matrixWorldNeedsUpdate = true;
  }
  // ArrayElement
  _setValue_arrayElement(e11, t19) {
    this.resolvedProperty[this.propertyIndex] = e11[t19];
  }
  _setValue_arrayElement_setNeedsUpdate(e11, t19) {
    this.resolvedProperty[this.propertyIndex] = e11[t19], this.targetObject.needsUpdate = true;
  }
  _setValue_arrayElement_setMatrixWorldNeedsUpdate(e11, t19) {
    this.resolvedProperty[this.propertyIndex] = e11[t19], this.targetObject.matrixWorldNeedsUpdate = true;
  }
  // HasToFromArray
  _setValue_fromArray(e11, t19) {
    this.resolvedProperty.fromArray(e11, t19);
  }
  _setValue_fromArray_setNeedsUpdate(e11, t19) {
    this.resolvedProperty.fromArray(e11, t19), this.targetObject.needsUpdate = true;
  }
  _setValue_fromArray_setMatrixWorldNeedsUpdate(e11, t19) {
    this.resolvedProperty.fromArray(e11, t19), this.targetObject.matrixWorldNeedsUpdate = true;
  }
  _getValue_unbound(e11, t19) {
    this.bind(), this.getValue(e11, t19);
  }
  _setValue_unbound(e11, t19) {
    this.bind(), this.setValue(e11, t19);
  }
  // create getter / setter pair for a property in the scene graph
  bind() {
    let e11 = this.node;
    const t19 = this.parsedPath, i27 = t19.objectName, r24 = t19.propertyName;
    let n33 = t19.propertyIndex;
    if (e11 || (e11 = _ht.findNode(this.rootNode, t19.nodeName), this.node = e11), this.getValue = this._getValue_unavailable, this.setValue = this._setValue_unavailable, !e11) {
      console.error("THREE.PropertyBinding: Trying to update node for track: " + this.path + " but it wasn't found.");
      return;
    }
    if (i27) {
      let c27 = t19.objectIndex;
      switch (i27) {
        case "materials":
          if (!e11.material) {
            console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this);
            return;
          }
          if (!e11.material.materials) {
            console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.", this);
            return;
          }
          e11 = e11.material.materials;
          break;
        case "bones":
          if (!e11.skeleton) {
            console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.", this);
            return;
          }
          e11 = e11.skeleton.bones;
          for (let h26 = 0; h26 < e11.length; h26++)
            if (e11[h26].name === c27) {
              c27 = h26;
              break;
            }
          break;
        case "map":
          if ("map" in e11) {
            e11 = e11.map;
            break;
          }
          if (!e11.material) {
            console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this);
            return;
          }
          if (!e11.material.map) {
            console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.", this);
            return;
          }
          e11 = e11.material.map;
          break;
        default:
          if (e11[i27] === void 0) {
            console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.", this);
            return;
          }
          e11 = e11[i27];
      }
      if (c27 !== void 0) {
        if (e11[c27] === void 0) {
          console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.", this, e11);
          return;
        }
        e11 = e11[c27];
      }
    }
    const a22 = e11[r24];
    if (a22 === void 0) {
      const c27 = t19.nodeName;
      console.error("THREE.PropertyBinding: Trying to update property for track: " + c27 + "." + r24 + " but it wasn't found.", e11);
      return;
    }
    let o12 = this.Versioning.None;
    this.targetObject = e11, e11.needsUpdate !== void 0 ? o12 = this.Versioning.NeedsUpdate : e11.matrixWorldNeedsUpdate !== void 0 && (o12 = this.Versioning.MatrixWorldNeedsUpdate);
    let l25 = this.BindingType.Direct;
    if (n33 !== void 0) {
      if (r24 === "morphTargetInfluences") {
        if (!e11.geometry) {
          console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.", this);
          return;
        }
        if (!e11.geometry.morphAttributes) {
          console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.", this);
          return;
        }
        e11.morphTargetDictionary[n33] !== void 0 && (n33 = e11.morphTargetDictionary[n33]);
      }
      l25 = this.BindingType.ArrayElement, this.resolvedProperty = a22, this.propertyIndex = n33;
    } else
      a22.fromArray !== void 0 && a22.toArray !== void 0 ? (l25 = this.BindingType.HasFromToArray, this.resolvedProperty = a22) : Array.isArray(a22) ? (l25 = this.BindingType.EntireArray, this.resolvedProperty = a22) : this.propertyName = r24;
    this.getValue = this.GetterByBindingType[l25], this.setValue = this.SetterByBindingTypeAndVersioning[l25][o12];
  }
  unbind() {
    this.node = null, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound;
  }
};
ht12.Composite = Z02;
ht12.prototype.BindingType = {
  Direct: 0,
  EntireArray: 1,
  ArrayElement: 2,
  HasFromToArray: 3
};
ht12.prototype.Versioning = {
  None: 0,
  NeedsUpdate: 1,
  MatrixWorldNeedsUpdate: 2
};
ht12.prototype.GetterByBindingType = [
  ht12.prototype._getValue_direct,
  ht12.prototype._getValue_array,
  ht12.prototype._getValue_arrayElement,
  ht12.prototype._getValue_toArray
];
ht12.prototype.SetterByBindingTypeAndVersioning = [
  [
    // Direct
    ht12.prototype._setValue_direct,
    ht12.prototype._setValue_direct_setNeedsUpdate,
    ht12.prototype._setValue_direct_setMatrixWorldNeedsUpdate
  ],
  [
    // EntireArray
    ht12.prototype._setValue_array,
    ht12.prototype._setValue_array_setNeedsUpdate,
    ht12.prototype._setValue_array_setMatrixWorldNeedsUpdate
  ],
  [
    // ArrayElement
    ht12.prototype._setValue_arrayElement,
    ht12.prototype._setValue_arrayElement_setNeedsUpdate,
    ht12.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate
  ],
  [
    // HasToFromArray
    ht12.prototype._setValue_fromArray,
    ht12.prototype._setValue_fromArray_setNeedsUpdate,
    ht12.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate
  ]
];
var kc2 = class {
  constructor(e11 = 1, t19 = 0, i27 = 0) {
    return this.radius = e11, this.phi = t19, this.theta = i27, this;
  }
  set(e11, t19, i27) {
    return this.radius = e11, this.phi = t19, this.theta = i27, this;
  }
  copy(e11) {
    return this.radius = e11.radius, this.phi = e11.phi, this.theta = e11.theta, this;
  }
  // restrict phi to be between EPS and PI-EPS
  makeSafe() {
    return this.phi = Math.max(1e-6, Math.min(Math.PI - 1e-6, this.phi)), this;
  }
  setFromVector3(e11) {
    return this.setFromCartesianCoords(e11.x, e11.y, e11.z);
  }
  setFromCartesianCoords(e11, t19, i27) {
    return this.radius = Math.sqrt(e11 * e11 + t19 * t19 + i27 * i27), this.radius === 0 ? (this.theta = 0, this.phi = 0) : (this.theta = Math.atan2(e11, i27), this.phi = Math.acos(Gt6(t19 / this.radius, -1, 1))), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var Uc2 = new k18();
var Ws2;
var eo2;
var to2 = class extends _t7 {
  // dir is assumed to be normalized
  constructor(e11 = new k18(0, 0, 1), t19 = new k18(0, 0, 0), i27 = 1, r24 = 16776960, n33 = i27 * 0.2, a22 = n33 * 0.2) {
    super(), this.type = "ArrowHelper", Ws2 === void 0 && (Ws2 = new Xt6(), Ws2.setAttribute("position", new xt6([0, 0, 0, 0, 1, 0], 3)), eo2 = new ua2(0, 0.5, 1, 5, 1), eo2.translate(0, -0.5, 0)), this.position.copy(t19), this.line = new ss3(Ws2, new Tn4({ color: r24, toneMapped: false })), this.line.matrixAutoUpdate = false, this.add(this.line), this.cone = new Rt8(eo2, new xi6({ color: r24, toneMapped: false })), this.cone.matrixAutoUpdate = false, this.add(this.cone), this.setDirection(e11), this.setLength(i27, n33, a22);
  }
  setDirection(e11) {
    if (e11.y > 0.99999)
      this.quaternion.set(0, 0, 0, 1);
    else if (e11.y < -0.99999)
      this.quaternion.set(1, 0, 0, 0);
    else {
      Uc2.set(e11.z, 0, -e11.x).normalize();
      const t19 = Math.acos(e11.y);
      this.quaternion.setFromAxisAngle(Uc2, t19);
    }
  }
  setLength(e11, t19 = e11 * 0.2, i27 = t19 * 0.2) {
    this.line.scale.set(1, Math.max(1e-4, e11 - t19), 1), this.line.updateMatrix(), this.cone.scale.set(i27, t19, i27), this.cone.position.y = e11, this.cone.updateMatrix();
  }
  setColor(e11) {
    this.line.material.color.set(e11), this.cone.material.color.set(e11);
  }
  copy(e11) {
    return super.copy(e11, false), this.line.copy(e11.line), this.cone.copy(e11.cone), this;
  }
  dispose() {
    this.line.geometry.dispose(), this.line.material.dispose(), this.cone.geometry.dispose(), this.cone.material.dispose();
  }
};
typeof __THREE_DEVTOOLS__ < "u" && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register", { detail: {
  revision: Co2
} }));
typeof window < "u" && (window.__THREE__ ? console.warn("WARNING: Multiple instances of Three.js being imported.") : window.__THREE__ = Co2);
function Oc2(s18, e11) {
  if (e11 === Ju)
    return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."), s18;
  if (e11 === fo2 || e11 === lh2) {
    let t19 = s18.getIndex();
    if (t19 === null) {
      const a22 = [], o12 = s18.getAttribute("position");
      if (o12 !== void 0) {
        for (let l25 = 0; l25 < o12.count; l25++)
          a22.push(l25);
        s18.setIndex(a22), t19 = s18.getIndex();
      } else
        return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."), s18;
    }
    const i27 = t19.count - 2, r24 = [];
    if (e11 === fo2)
      for (let a22 = 1; a22 <= i27; a22++)
        r24.push(t19.getX(0)), r24.push(t19.getX(a22)), r24.push(t19.getX(a22 + 1));
    else
      for (let a22 = 0; a22 < i27; a22++)
        a22 % 2 === 0 ? (r24.push(t19.getX(a22)), r24.push(t19.getX(a22 + 1)), r24.push(t19.getX(a22 + 2))) : (r24.push(t19.getX(a22 + 2)), r24.push(t19.getX(a22 + 1)), r24.push(t19.getX(a22)));
    r24.length / 3 !== i27 && console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");
    const n33 = s18.clone();
    return n33.setIndex(r24), n33.clearGroups(), n33;
  } else
    return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:", e11), s18;
}
var jo2 = class extends rr5 {
  constructor(e11) {
    super(e11), this.dracoLoader = null, this.ktx2Loader = null, this.meshoptDecoder = null, this.pluginCallbacks = [], this.register(function(t19) {
      return new e_2(t19);
    }), this.register(function(t19) {
      return new o_2(t19);
    }), this.register(function(t19) {
      return new l_2(t19);
    }), this.register(function(t19) {
      return new c_2(t19);
    }), this.register(function(t19) {
      return new i_2(t19);
    }), this.register(function(t19) {
      return new r_2(t19);
    }), this.register(function(t19) {
      return new n_2(t19);
    }), this.register(function(t19) {
      return new s_2(t19);
    }), this.register(function(t19) {
      return new Q02(t19);
    }), this.register(function(t19) {
      return new a_2(t19);
    }), this.register(function(t19) {
      return new t_2(t19);
    }), this.register(function(t19) {
      return new K02(t19);
    }), this.register(function(t19) {
      return new h_2(t19);
    }), this.register(function(t19) {
      return new u_2(t19);
    });
  }
  load(e11, t19, i27, r24) {
    const n33 = this;
    let a22;
    this.resourcePath !== "" ? a22 = this.resourcePath : this.path !== "" ? a22 = this.path : a22 = is3.extractUrlBase(e11), this.manager.itemStart(e11);
    const o12 = function(c27) {
      r24 ? r24(c27) : console.error(c27), n33.manager.itemError(e11), n33.manager.itemEnd(e11);
    }, l25 = new ls3(this.manager);
    l25.setPath(this.path), l25.setResponseType("arraybuffer"), l25.setRequestHeader(this.requestHeader), l25.setWithCredentials(this.withCredentials), l25.load(e11, function(c27) {
      try {
        n33.parse(c27, a22, function(h26) {
          t19(h26), n33.manager.itemEnd(e11);
        }, o12);
      } catch (h26) {
        o12(h26);
      }
    }, i27, o12);
  }
  setDRACOLoader(e11) {
    return this.dracoLoader = e11, this;
  }
  setDDSLoader() {
    throw new Error(
      'THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".'
    );
  }
  setKTX2Loader(e11) {
    return this.ktx2Loader = e11, this;
  }
  setMeshoptDecoder(e11) {
    return this.meshoptDecoder = e11, this;
  }
  register(e11) {
    return this.pluginCallbacks.indexOf(e11) === -1 && this.pluginCallbacks.push(e11), this;
  }
  unregister(e11) {
    return this.pluginCallbacks.indexOf(e11) !== -1 && this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e11), 1), this;
  }
  parse(e11, t19, i27, r24) {
    let n33;
    const a22 = {}, o12 = {}, l25 = new TextDecoder();
    if (typeof e11 == "string")
      n33 = JSON.parse(e11);
    else if (e11 instanceof ArrayBuffer)
      if (l25.decode(new Uint8Array(e11, 0, 4)) === zh2) {
        try {
          a22[et11.KHR_BINARY_GLTF] = new d_2(e11);
        } catch (h26) {
          r24 && r24(h26);
          return;
        }
        n33 = JSON.parse(a22[et11.KHR_BINARY_GLTF].content);
      } else
        n33 = JSON.parse(l25.decode(e11));
    else
      n33 = e11;
    if (n33.asset === void 0 || n33.asset.version[0] < 2) {
      r24 && r24(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));
      return;
    }
    const c27 = new T_2(n33, {
      path: t19 || this.resourcePath || "",
      crossOrigin: this.crossOrigin,
      requestHeader: this.requestHeader,
      manager: this.manager,
      ktx2Loader: this.ktx2Loader,
      meshoptDecoder: this.meshoptDecoder
    });
    c27.fileLoader.setRequestHeader(this.requestHeader);
    for (let h26 = 0; h26 < this.pluginCallbacks.length; h26++) {
      const u35 = this.pluginCallbacks[h26](c27);
      o12[u35.name] = u35, a22[u35.name] = true;
    }
    if (n33.extensionsUsed)
      for (let h26 = 0; h26 < n33.extensionsUsed.length; ++h26) {
        const u35 = n33.extensionsUsed[h26], d34 = n33.extensionsRequired || [];
        switch (u35) {
          case et11.KHR_MATERIALS_UNLIT:
            a22[u35] = new $02();
            break;
          case et11.KHR_DRACO_MESH_COMPRESSION:
            a22[u35] = new p_2(n33, this.dracoLoader);
            break;
          case et11.KHR_TEXTURE_TRANSFORM:
            a22[u35] = new m_2();
            break;
          case et11.KHR_MESH_QUANTIZATION:
            a22[u35] = new f_2();
            break;
          default:
            d34.indexOf(u35) >= 0 && o12[u35] === void 0 && console.warn('THREE.GLTFLoader: Unknown extension "' + u35 + '".');
        }
      }
    c27.setExtensions(a22), c27.setPlugins(o12), c27.parse(i27, r24);
  }
  parseAsync(e11, t19) {
    const i27 = this;
    return new Promise(function(r24, n33) {
      i27.parse(e11, t19, r24, n33);
    });
  }
};
function J02() {
  let s18 = {};
  return {
    get: function(e11) {
      return s18[e11];
    },
    add: function(e11, t19) {
      s18[e11] = t19;
    },
    remove: function(e11) {
      delete s18[e11];
    },
    removeAll: function() {
      s18 = {};
    }
  };
}
var et11 = {
  KHR_BINARY_GLTF: "KHR_binary_glTF",
  KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression",
  KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual",
  KHR_MATERIALS_CLEARCOAT: "KHR_materials_clearcoat",
  KHR_MATERIALS_IOR: "KHR_materials_ior",
  KHR_MATERIALS_SHEEN: "KHR_materials_sheen",
  KHR_MATERIALS_SPECULAR: "KHR_materials_specular",
  KHR_MATERIALS_TRANSMISSION: "KHR_materials_transmission",
  KHR_MATERIALS_IRIDESCENCE: "KHR_materials_iridescence",
  KHR_MATERIALS_UNLIT: "KHR_materials_unlit",
  KHR_MATERIALS_VOLUME: "KHR_materials_volume",
  KHR_TEXTURE_BASISU: "KHR_texture_basisu",
  KHR_TEXTURE_TRANSFORM: "KHR_texture_transform",
  KHR_MESH_QUANTIZATION: "KHR_mesh_quantization",
  KHR_MATERIALS_EMISSIVE_STRENGTH: "KHR_materials_emissive_strength",
  EXT_TEXTURE_WEBP: "EXT_texture_webp",
  EXT_TEXTURE_AVIF: "EXT_texture_avif",
  EXT_MESHOPT_COMPRESSION: "EXT_meshopt_compression",
  EXT_MESH_GPU_INSTANCING: "EXT_mesh_gpu_instancing"
};
var K02 = class {
  constructor(e11) {
    this.parser = e11, this.name = et11.KHR_LIGHTS_PUNCTUAL, this.cache = { refs: {}, uses: {} };
  }
  _markDefs() {
    const e11 = this.parser, t19 = this.parser.json.nodes || [];
    for (let i27 = 0, r24 = t19.length; i27 < r24; i27++) {
      const n33 = t19[i27];
      n33.extensions && n33.extensions[this.name] && n33.extensions[this.name].light !== void 0 && e11._addNodeRef(this.cache, n33.extensions[this.name].light);
    }
  }
  _loadLight(e11) {
    const t19 = this.parser, i27 = "light:" + e11;
    let r24 = t19.cache.get(i27);
    if (r24)
      return r24;
    const n33 = t19.json, a22 = ((n33.extensions && n33.extensions[this.name] || {}).lights || [])[e11];
    let o12;
    const l25 = new ze7(16777215);
    a22.color !== void 0 && l25.fromArray(a22.color);
    const c27 = a22.range !== void 0 ? a22.range : 0;
    switch (a22.type) {
      case "directional":
        o12 = new Oh2(l25), o12.target.position.set(0, 0, -1), o12.add(o12.target);
        break;
      case "point":
        o12 = new da2(l25), o12.distance = c27;
        break;
      case "spot":
        o12 = new Uh2(l25), o12.distance = c27, a22.spot = a22.spot || {}, a22.spot.innerConeAngle = a22.spot.innerConeAngle !== void 0 ? a22.spot.innerConeAngle : 0, a22.spot.outerConeAngle = a22.spot.outerConeAngle !== void 0 ? a22.spot.outerConeAngle : Math.PI / 4, o12.angle = a22.spot.outerConeAngle, o12.penumbra = 1 - a22.spot.innerConeAngle / a22.spot.outerConeAngle, o12.target.position.set(0, 0, -1), o12.add(o12.target);
        break;
      default:
        throw new Error("THREE.GLTFLoader: Unexpected light type: " + a22.type);
    }
    return o12.position.set(0, 0, 0), o12.decay = 2, Qi3(o12, a22), a22.intensity !== void 0 && (o12.intensity = a22.intensity), o12.name = t19.createUniqueName(a22.name || "light_" + e11), r24 = Promise.resolve(o12), t19.cache.add(i27, r24), r24;
  }
  getDependency(e11, t19) {
    if (e11 === "light")
      return this._loadLight(t19);
  }
  createNodeAttachment(e11) {
    const t19 = this, i27 = this.parser, r24 = i27.json.nodes[e11], n33 = (r24.extensions && r24.extensions[this.name] || {}).light;
    return n33 === void 0 ? null : this._loadLight(n33).then(function(a22) {
      return i27._getNodeRef(t19.cache, n33, a22);
    });
  }
};
var $02 = class {
  constructor() {
    this.name = et11.KHR_MATERIALS_UNLIT;
  }
  getMaterialType() {
    return xi6;
  }
  extendParams(e11, t19, i27) {
    const r24 = [];
    e11.color = new ze7(1, 1, 1), e11.opacity = 1;
    const n33 = t19.pbrMetallicRoughness;
    if (n33) {
      if (Array.isArray(n33.baseColorFactor)) {
        const a22 = n33.baseColorFactor;
        e11.color.fromArray(a22), e11.opacity = a22[3];
      }
      n33.baseColorTexture !== void 0 && r24.push(i27.assignTexture(e11, "map", n33.baseColorTexture, rt10));
    }
    return Promise.all(r24);
  }
};
var Q02 = class {
  constructor(e11) {
    this.parser = e11, this.name = et11.KHR_MATERIALS_EMISSIVE_STRENGTH;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const r24 = i27.extensions[this.name].emissiveStrength;
    return r24 !== void 0 && (t19.emissiveIntensity = r24), Promise.resolve();
  }
};
var e_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et11.KHR_MATERIALS_CLEARCOAT;
  }
  getMaterialType(e11) {
    const t19 = this.parser.json.materials[e11];
    return !t19.extensions || !t19.extensions[this.name] ? null : Cr5;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser, r24 = i27.json.materials[e11];
    if (!r24.extensions || !r24.extensions[this.name])
      return Promise.resolve();
    const n33 = [], a22 = r24.extensions[this.name];
    if (a22.clearcoatFactor !== void 0 && (t19.clearcoat = a22.clearcoatFactor), a22.clearcoatTexture !== void 0 && n33.push(i27.assignTexture(t19, "clearcoatMap", a22.clearcoatTexture)), a22.clearcoatRoughnessFactor !== void 0 && (t19.clearcoatRoughness = a22.clearcoatRoughnessFactor), a22.clearcoatRoughnessTexture !== void 0 && n33.push(i27.assignTexture(t19, "clearcoatRoughnessMap", a22.clearcoatRoughnessTexture)), a22.clearcoatNormalTexture !== void 0 && (n33.push(i27.assignTexture(t19, "clearcoatNormalMap", a22.clearcoatNormalTexture)), a22.clearcoatNormalTexture.scale !== void 0)) {
      const o12 = a22.clearcoatNormalTexture.scale;
      t19.clearcoatNormalScale = new We7(o12, o12);
    }
    return Promise.all(n33);
  }
};
var t_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et11.KHR_MATERIALS_IRIDESCENCE;
  }
  getMaterialType(e11) {
    const t19 = this.parser.json.materials[e11];
    return !t19.extensions || !t19.extensions[this.name] ? null : Cr5;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser, r24 = i27.json.materials[e11];
    if (!r24.extensions || !r24.extensions[this.name])
      return Promise.resolve();
    const n33 = [], a22 = r24.extensions[this.name];
    return a22.iridescenceFactor !== void 0 && (t19.iridescence = a22.iridescenceFactor), a22.iridescenceTexture !== void 0 && n33.push(i27.assignTexture(t19, "iridescenceMap", a22.iridescenceTexture)), a22.iridescenceIor !== void 0 && (t19.iridescenceIOR = a22.iridescenceIor), t19.iridescenceThicknessRange === void 0 && (t19.iridescenceThicknessRange = [100, 400]), a22.iridescenceThicknessMinimum !== void 0 && (t19.iridescenceThicknessRange[0] = a22.iridescenceThicknessMinimum), a22.iridescenceThicknessMaximum !== void 0 && (t19.iridescenceThicknessRange[1] = a22.iridescenceThicknessMaximum), a22.iridescenceThicknessTexture !== void 0 && n33.push(i27.assignTexture(t19, "iridescenceThicknessMap", a22.iridescenceThicknessTexture)), Promise.all(n33);
  }
};
var i_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et11.KHR_MATERIALS_SHEEN;
  }
  getMaterialType(e11) {
    const t19 = this.parser.json.materials[e11];
    return !t19.extensions || !t19.extensions[this.name] ? null : Cr5;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser, r24 = i27.json.materials[e11];
    if (!r24.extensions || !r24.extensions[this.name])
      return Promise.resolve();
    const n33 = [];
    t19.sheenColor = new ze7(0, 0, 0), t19.sheenRoughness = 0, t19.sheen = 1;
    const a22 = r24.extensions[this.name];
    return a22.sheenColorFactor !== void 0 && t19.sheenColor.fromArray(a22.sheenColorFactor), a22.sheenRoughnessFactor !== void 0 && (t19.sheenRoughness = a22.sheenRoughnessFactor), a22.sheenColorTexture !== void 0 && n33.push(i27.assignTexture(t19, "sheenColorMap", a22.sheenColorTexture, rt10)), a22.sheenRoughnessTexture !== void 0 && n33.push(i27.assignTexture(t19, "sheenRoughnessMap", a22.sheenRoughnessTexture)), Promise.all(n33);
  }
};
var r_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et11.KHR_MATERIALS_TRANSMISSION;
  }
  getMaterialType(e11) {
    const t19 = this.parser.json.materials[e11];
    return !t19.extensions || !t19.extensions[this.name] ? null : Cr5;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser, r24 = i27.json.materials[e11];
    if (!r24.extensions || !r24.extensions[this.name])
      return Promise.resolve();
    const n33 = [], a22 = r24.extensions[this.name];
    return a22.transmissionFactor !== void 0 && (t19.transmission = a22.transmissionFactor), a22.transmissionTexture !== void 0 && n33.push(i27.assignTexture(t19, "transmissionMap", a22.transmissionTexture)), Promise.all(n33);
  }
};
var n_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et11.KHR_MATERIALS_VOLUME;
  }
  getMaterialType(e11) {
    const t19 = this.parser.json.materials[e11];
    return !t19.extensions || !t19.extensions[this.name] ? null : Cr5;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser, r24 = i27.json.materials[e11];
    if (!r24.extensions || !r24.extensions[this.name])
      return Promise.resolve();
    const n33 = [], a22 = r24.extensions[this.name];
    t19.thickness = a22.thicknessFactor !== void 0 ? a22.thicknessFactor : 0, a22.thicknessTexture !== void 0 && n33.push(i27.assignTexture(t19, "thicknessMap", a22.thicknessTexture)), t19.attenuationDistance = a22.attenuationDistance || 1 / 0;
    const o12 = a22.attenuationColor || [1, 1, 1];
    return t19.attenuationColor = new ze7(o12[0], o12[1], o12[2]), Promise.all(n33);
  }
};
var s_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et11.KHR_MATERIALS_IOR;
  }
  getMaterialType(e11) {
    const t19 = this.parser.json.materials[e11];
    return !t19.extensions || !t19.extensions[this.name] ? null : Cr5;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const r24 = i27.extensions[this.name];
    return t19.ior = r24.ior !== void 0 ? r24.ior : 1.5, Promise.resolve();
  }
};
var a_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et11.KHR_MATERIALS_SPECULAR;
  }
  getMaterialType(e11) {
    const t19 = this.parser.json.materials[e11];
    return !t19.extensions || !t19.extensions[this.name] ? null : Cr5;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser, r24 = i27.json.materials[e11];
    if (!r24.extensions || !r24.extensions[this.name])
      return Promise.resolve();
    const n33 = [], a22 = r24.extensions[this.name];
    t19.specularIntensity = a22.specularFactor !== void 0 ? a22.specularFactor : 1, a22.specularTexture !== void 0 && n33.push(i27.assignTexture(t19, "specularIntensityMap", a22.specularTexture));
    const o12 = a22.specularColorFactor || [1, 1, 1];
    return t19.specularColor = new ze7(o12[0], o12[1], o12[2]), a22.specularColorTexture !== void 0 && n33.push(i27.assignTexture(t19, "specularColorMap", a22.specularColorTexture, rt10)), Promise.all(n33);
  }
};
var o_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et11.KHR_TEXTURE_BASISU;
  }
  loadTexture(e11) {
    const t19 = this.parser, i27 = t19.json, r24 = i27.textures[e11];
    if (!r24.extensions || !r24.extensions[this.name])
      return null;
    const n33 = r24.extensions[this.name], a22 = t19.options.ktx2Loader;
    if (!a22) {
      if (i27.extensionsRequired && i27.extensionsRequired.indexOf(this.name) >= 0)
        throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");
      return null;
    }
    return t19.loadTextureImage(e11, n33.source, a22);
  }
};
var l_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et11.EXT_TEXTURE_WEBP, this.isSupported = null;
  }
  loadTexture(e11) {
    const t19 = this.name, i27 = this.parser, r24 = i27.json, n33 = r24.textures[e11];
    if (!n33.extensions || !n33.extensions[t19])
      return null;
    const a22 = n33.extensions[t19], o12 = r24.images[a22.source];
    let l25 = i27.textureLoader;
    if (o12.uri) {
      const c27 = i27.options.manager.getHandler(o12.uri);
      c27 !== null && (l25 = c27);
    }
    return this.detectSupport().then(function(c27) {
      if (c27)
        return i27.loadTextureImage(e11, a22.source, l25);
      if (r24.extensionsRequired && r24.extensionsRequired.indexOf(t19) >= 0)
        throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");
      return i27.loadTexture(e11);
    });
  }
  detectSupport() {
    return this.isSupported || (this.isSupported = new Promise(function(e11) {
      const t19 = new Image();
      t19.src = "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA", t19.onload = t19.onerror = function() {
        e11(t19.height === 1);
      };
    })), this.isSupported;
  }
};
var c_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et11.EXT_TEXTURE_AVIF, this.isSupported = null;
  }
  loadTexture(e11) {
    const t19 = this.name, i27 = this.parser, r24 = i27.json, n33 = r24.textures[e11];
    if (!n33.extensions || !n33.extensions[t19])
      return null;
    const a22 = n33.extensions[t19], o12 = r24.images[a22.source];
    let l25 = i27.textureLoader;
    if (o12.uri) {
      const c27 = i27.options.manager.getHandler(o12.uri);
      c27 !== null && (l25 = c27);
    }
    return this.detectSupport().then(function(c27) {
      if (c27)
        return i27.loadTextureImage(e11, a22.source, l25);
      if (r24.extensionsRequired && r24.extensionsRequired.indexOf(t19) >= 0)
        throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");
      return i27.loadTexture(e11);
    });
  }
  detectSupport() {
    return this.isSupported || (this.isSupported = new Promise(function(e11) {
      const t19 = new Image();
      t19.src = "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=", t19.onload = t19.onerror = function() {
        e11(t19.height === 1);
      };
    })), this.isSupported;
  }
};
var h_2 = class {
  constructor(e11) {
    this.name = et11.EXT_MESHOPT_COMPRESSION, this.parser = e11;
  }
  loadBufferView(e11) {
    const t19 = this.parser.json, i27 = t19.bufferViews[e11];
    if (i27.extensions && i27.extensions[this.name]) {
      const r24 = i27.extensions[this.name], n33 = this.parser.getDependency("buffer", r24.buffer), a22 = this.parser.options.meshoptDecoder;
      if (!a22 || !a22.supported) {
        if (t19.extensionsRequired && t19.extensionsRequired.indexOf(this.name) >= 0)
          throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");
        return null;
      }
      return n33.then(function(o12) {
        const l25 = r24.byteOffset || 0, c27 = r24.byteLength || 0, h26 = r24.count, u35 = r24.byteStride, d34 = new Uint8Array(o12, l25, c27);
        return a22.decodeGltfBufferAsync ? a22.decodeGltfBufferAsync(h26, u35, d34, r24.mode, r24.filter).then(function(m33) {
          return m33.buffer;
        }) : a22.ready.then(function() {
          const m33 = new ArrayBuffer(h26 * u35);
          return a22.decodeGltfBuffer(new Uint8Array(m33), h26, u35, d34, r24.mode, r24.filter), m33;
        });
      });
    } else
      return null;
  }
};
var u_2 = class {
  constructor(e11) {
    this.name = et11.EXT_MESH_GPU_INSTANCING, this.parser = e11;
  }
  createNodeMesh(e11) {
    const t19 = this.parser.json, i27 = t19.nodes[e11];
    if (!i27.extensions || !i27.extensions[this.name] || i27.mesh === void 0)
      return null;
    const r24 = t19.meshes[i27.mesh];
    for (const l25 of r24.primitives)
      if (l25.mode !== ci6.TRIANGLES && l25.mode !== ci6.TRIANGLE_STRIP && l25.mode !== ci6.TRIANGLE_FAN && l25.mode !== void 0)
        return null;
    const n33 = i27.extensions[this.name].attributes, a22 = [], o12 = {};
    for (const l25 in n33)
      a22.push(this.parser.getDependency("accessor", n33[l25]).then((c27) => (o12[l25] = c27, o12[l25])));
    return a22.length < 1 ? null : (a22.push(this.parser.createNodeMesh(e11)), Promise.all(a22).then((l25) => {
      const c27 = l25.pop(), h26 = c27.isGroup ? c27.children : [c27], u35 = l25[0].count, d34 = [];
      for (const m33 of h26) {
        const _19 = new He6(), y33 = new k18(), f39 = new jt8(), p26 = new k18(1, 1, 1), A17 = new b02(m33.geometry, m33.material, u35);
        for (let M12 = 0; M12 < u35; M12++)
          o12.TRANSLATION && y33.fromBufferAttribute(o12.TRANSLATION, M12), o12.ROTATION && f39.fromBufferAttribute(o12.ROTATION, M12), o12.SCALE && p26.fromBufferAttribute(o12.SCALE, M12), A17.setMatrixAt(M12, _19.compose(y33, f39, p26));
        for (const M12 in o12)
          M12 !== "TRANSLATION" && M12 !== "ROTATION" && M12 !== "SCALE" && m33.geometry.setAttribute(M12, o12[M12]);
        _t7.prototype.copy.call(A17, m33), this.parser.assignFinalMaterial(A17), d34.push(A17);
      }
      return c27.isGroup ? (c27.clear(), c27.add(...d34), c27) : d34[0];
    }));
  }
};
var zh2 = "glTF";
var Gn5 = 12;
var zc2 = { JSON: 1313821514, BIN: 5130562 };
var d_2 = class {
  constructor(e11) {
    this.name = et11.KHR_BINARY_GLTF, this.content = null, this.body = null;
    const t19 = new DataView(e11, 0, Gn5), i27 = new TextDecoder();
    if (this.header = {
      magic: i27.decode(new Uint8Array(e11.slice(0, 4))),
      version: t19.getUint32(4, true),
      length: t19.getUint32(8, true)
    }, this.header.magic !== zh2)
      throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");
    if (this.header.version < 2)
      throw new Error("THREE.GLTFLoader: Legacy binary file detected.");
    const r24 = this.header.length - Gn5, n33 = new DataView(e11, Gn5);
    let a22 = 0;
    for (; a22 < r24; ) {
      const o12 = n33.getUint32(a22, true);
      a22 += 4;
      const l25 = n33.getUint32(a22, true);
      if (a22 += 4, l25 === zc2.JSON) {
        const c27 = new Uint8Array(e11, Gn5 + a22, o12);
        this.content = i27.decode(c27);
      } else if (l25 === zc2.BIN) {
        const c27 = Gn5 + a22;
        this.body = e11.slice(c27, c27 + o12);
      }
      a22 += o12;
    }
    if (this.content === null)
      throw new Error("THREE.GLTFLoader: JSON content not found.");
  }
};
var p_2 = class {
  constructor(e11, t19) {
    if (!t19)
      throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");
    this.name = et11.KHR_DRACO_MESH_COMPRESSION, this.json = e11, this.dracoLoader = t19, this.dracoLoader.preload();
  }
  decodePrimitive(e11, t19) {
    const i27 = this.json, r24 = this.dracoLoader, n33 = e11.extensions[this.name].bufferView, a22 = e11.extensions[this.name].attributes, o12 = {}, l25 = {}, c27 = {};
    for (const h26 in a22) {
      const u35 = Mo[h26] || h26.toLowerCase();
      o12[u35] = a22[h26];
    }
    for (const h26 in e11.attributes) {
      const u35 = Mo[h26] || h26.toLowerCase();
      if (a22[h26] !== void 0) {
        const d34 = i27.accessors[e11.attributes[h26]], m33 = fn4[d34.componentType];
        c27[u35] = m33.name, l25[u35] = d34.normalized === true;
      }
    }
    return t19.getDependency("bufferView", n33).then(function(h26) {
      return new Promise(function(u35) {
        r24.decodeDracoFile(h26, function(d34) {
          for (const m33 in d34.attributes) {
            const _19 = d34.attributes[m33], y33 = l25[m33];
            y33 !== void 0 && (_19.normalized = y33);
          }
          u35(d34);
        }, o12, c27);
      });
    });
  }
};
var m_2 = class {
  constructor() {
    this.name = et11.KHR_TEXTURE_TRANSFORM;
  }
  extendTexture(e11, t19) {
    return (t19.texCoord === void 0 || t19.texCoord === e11.channel) && t19.offset === void 0 && t19.rotation === void 0 && t19.scale === void 0 || (e11 = e11.clone(), t19.texCoord !== void 0 && (e11.channel = t19.texCoord), t19.offset !== void 0 && e11.offset.fromArray(t19.offset), t19.rotation !== void 0 && (e11.rotation = t19.rotation), t19.scale !== void 0 && e11.repeat.fromArray(t19.scale), e11.needsUpdate = true), e11;
  }
};
var f_2 = class {
  constructor() {
    this.name = et11.KHR_MESH_QUANTIZATION;
  }
};
var Bh2 = class extends os3 {
  constructor(e11, t19, i27, r24) {
    super(e11, t19, i27, r24);
  }
  copySampleValue_(e11) {
    const t19 = this.resultBuffer, i27 = this.sampleValues, r24 = this.valueSize, n33 = e11 * r24 * 3 + r24;
    for (let a22 = 0; a22 !== r24; a22++)
      t19[a22] = i27[n33 + a22];
    return t19;
  }
  interpolate_(e11, t19, i27, r24) {
    const n33 = this.resultBuffer, a22 = this.sampleValues, o12 = this.valueSize, l25 = o12 * 2, c27 = o12 * 3, h26 = r24 - t19, u35 = (i27 - t19) / h26, d34 = u35 * u35, m33 = d34 * u35, _19 = e11 * c27, y33 = _19 - c27, f39 = -2 * m33 + 3 * d34, p26 = m33 - d34, A17 = 1 - f39, M12 = p26 - d34 + u35;
    for (let E24 = 0; E24 !== o12; E24++) {
      const w29 = a22[y33 + E24 + o12], I16 = a22[y33 + E24 + l25] * h26, D17 = a22[_19 + E24 + o12], P19 = a22[_19 + E24] * h26;
      n33[E24] = A17 * w29 + M12 * I16 + f39 * D17 + p26 * P19;
    }
    return n33;
  }
};
var g_2 = new jt8();
var __2 = class extends Bh2 {
  interpolate_(e11, t19, i27, r24) {
    const n33 = super.interpolate_(e11, t19, i27, r24);
    return g_2.fromArray(n33).normalize().toArray(n33), n33;
  }
};
var ci6 = {
  FLOAT: 5126,
  //FLOAT_MAT2: 35674,
  FLOAT_MAT3: 35675,
  FLOAT_MAT4: 35676,
  FLOAT_VEC2: 35664,
  FLOAT_VEC3: 35665,
  FLOAT_VEC4: 35666,
  LINEAR: 9729,
  REPEAT: 10497,
  SAMPLER_2D: 35678,
  POINTS: 0,
  LINES: 1,
  LINE_LOOP: 2,
  LINE_STRIP: 3,
  TRIANGLES: 4,
  TRIANGLE_STRIP: 5,
  TRIANGLE_FAN: 6,
  UNSIGNED_BYTE: 5121,
  UNSIGNED_SHORT: 5123
};
var fn4 = {
  5120: Int8Array,
  5121: Uint8Array,
  5122: Int16Array,
  5123: Uint16Array,
  5125: Uint32Array,
  5126: Float32Array
};
var Bc2 = {
  9728: zt6,
  9729: Vt6,
  9984: mo2,
  9985: ah2,
  9986: Zs2,
  9987: Hi3
};
var Fc2 = {
  33071: Zt6,
  33648: ta2,
  10497: Ti4
};
var io2 = {
  SCALAR: 1,
  VEC2: 2,
  VEC3: 3,
  VEC4: 4,
  MAT2: 4,
  MAT3: 9,
  MAT4: 16
};
var Mo = {
  POSITION: "position",
  NORMAL: "normal",
  TANGENT: "tangent",
  TEXCOORD_0: "uv",
  TEXCOORD_1: "uv2",
  COLOR_0: "color",
  WEIGHTS_0: "skinWeight",
  JOINTS_0: "skinIndex"
};
var Ki4 = {
  scale: "scale",
  translation: "position",
  rotation: "quaternion",
  weights: "morphTargetInfluences"
};
var v_2 = {
  CUBICSPLINE: void 0,
  // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each
  // keyframe track will be initialized with a default interpolation type, then modified.
  LINEAR: Mn5,
  STEP: Qn5
};
var ro2 = {
  OPAQUE: "OPAQUE",
  MASK: "MASK",
  BLEND: "BLEND"
};
function y_2(s18) {
  return s18.DefaultMaterial === void 0 && (s18.DefaultMaterial = new as3({
    color: 16777215,
    emissive: 0,
    metalness: 1,
    roughness: 1,
    transparent: false,
    depthTest: true,
    side: Ei5
  })), s18.DefaultMaterial;
}
function Wn5(s18, e11, t19) {
  for (const i27 in t19.extensions)
    s18[i27] === void 0 && (e11.userData.gltfExtensions = e11.userData.gltfExtensions || {}, e11.userData.gltfExtensions[i27] = t19.extensions[i27]);
}
function Qi3(s18, e11) {
  e11.extras !== void 0 && (typeof e11.extras == "object" ? Object.assign(s18.userData, e11.extras) : console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, " + e11.extras));
}
function x_2(s18, e11, t19) {
  let i27 = false, r24 = false, n33 = false;
  for (let c27 = 0, h26 = e11.length; c27 < h26; c27++) {
    const u35 = e11[c27];
    if (u35.POSITION !== void 0 && (i27 = true), u35.NORMAL !== void 0 && (r24 = true), u35.COLOR_0 !== void 0 && (n33 = true), i27 && r24 && n33)
      break;
  }
  if (!i27 && !r24 && !n33)
    return Promise.resolve(s18);
  const a22 = [], o12 = [], l25 = [];
  for (let c27 = 0, h26 = e11.length; c27 < h26; c27++) {
    const u35 = e11[c27];
    if (i27) {
      const d34 = u35.POSITION !== void 0 ? t19.getDependency("accessor", u35.POSITION) : s18.attributes.position;
      a22.push(d34);
    }
    if (r24) {
      const d34 = u35.NORMAL !== void 0 ? t19.getDependency("accessor", u35.NORMAL) : s18.attributes.normal;
      o12.push(d34);
    }
    if (n33) {
      const d34 = u35.COLOR_0 !== void 0 ? t19.getDependency("accessor", u35.COLOR_0) : s18.attributes.color;
      l25.push(d34);
    }
  }
  return Promise.all([
    Promise.all(a22),
    Promise.all(o12),
    Promise.all(l25)
  ]).then(function(c27) {
    const h26 = c27[0], u35 = c27[1], d34 = c27[2];
    return i27 && (s18.morphAttributes.position = h26), r24 && (s18.morphAttributes.normal = u35), n33 && (s18.morphAttributes.color = d34), s18.morphTargetsRelative = true, s18;
  });
}
function b_2(s18, e11) {
  if (s18.updateMorphTargets(), e11.weights !== void 0)
    for (let t19 = 0, i27 = e11.weights.length; t19 < i27; t19++)
      s18.morphTargetInfluences[t19] = e11.weights[t19];
  if (e11.extras && Array.isArray(e11.extras.targetNames)) {
    const t19 = e11.extras.targetNames;
    if (s18.morphTargetInfluences.length === t19.length) {
      s18.morphTargetDictionary = {};
      for (let i27 = 0, r24 = t19.length; i27 < r24; i27++)
        s18.morphTargetDictionary[t19[i27]] = i27;
    } else
      console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.");
  }
}
function M_2(s18) {
  const e11 = s18.extensions && s18.extensions[et11.KHR_DRACO_MESH_COMPRESSION];
  let t19;
  return e11 ? t19 = "draco:" + e11.bufferView + ":" + e11.indices + ":" + Hc2(e11.attributes) : t19 = s18.indices + ":" + Hc2(s18.attributes) + ":" + s18.mode, t19;
}
function Hc2(s18) {
  let e11 = "";
  const t19 = Object.keys(s18).sort();
  for (let i27 = 0, r24 = t19.length; i27 < r24; i27++)
    e11 += t19[i27] + ":" + s18[t19[i27]] + ";";
  return e11;
}
function wo(s18) {
  switch (s18) {
    case Int8Array:
      return 1 / 127;
    case Uint8Array:
      return 1 / 255;
    case Int16Array:
      return 1 / 32767;
    case Uint16Array:
      return 1 / 65535;
    default:
      throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.");
  }
}
function w_2(s18) {
  return s18.search(/\.jpe?g($|\?)/i) > 0 || s18.search(/^data\:image\/jpeg/) === 0 ? "image/jpeg" : s18.search(/\.webp($|\?)/i) > 0 || s18.search(/^data\:image\/webp/) === 0 ? "image/webp" : "image/png";
}
var S_2 = new He6();
var T_2 = class {
  constructor(e11 = {}, t19 = {}) {
    this.json = e11, this.extensions = {}, this.plugins = {}, this.options = t19, this.cache = new J02(), this.associations = /* @__PURE__ */ new Map(), this.primitiveCache = {}, this.nodeCache = {}, this.meshCache = { refs: {}, uses: {} }, this.cameraCache = { refs: {}, uses: {} }, this.lightCache = { refs: {}, uses: {} }, this.sourceCache = {}, this.textureCache = {}, this.nodeNamesUsed = {};
    let i27 = false, r24 = false, n33 = -1;
    typeof navigator < "u" && (i27 = /^((?!chrome|android).)*safari/i.test(navigator.userAgent) === true, r24 = navigator.userAgent.indexOf("Firefox") > -1, n33 = r24 ? navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1] : -1), typeof createImageBitmap > "u" || i27 || r24 && n33 < 98 ? this.textureLoader = new Ho2(this.options.manager) : this.textureLoader = new F02(this.options.manager), this.textureLoader.setCrossOrigin(this.options.crossOrigin), this.textureLoader.setRequestHeader(this.options.requestHeader), this.fileLoader = new ls3(this.options.manager), this.fileLoader.setResponseType("arraybuffer"), this.options.crossOrigin === "use-credentials" && this.fileLoader.setWithCredentials(true);
  }
  setExtensions(e11) {
    this.extensions = e11;
  }
  setPlugins(e11) {
    this.plugins = e11;
  }
  parse(e11, t19) {
    const i27 = this, r24 = this.json, n33 = this.extensions;
    this.cache.removeAll(), this.nodeCache = {}, this._invokeAll(function(a22) {
      return a22._markDefs && a22._markDefs();
    }), Promise.all(this._invokeAll(function(a22) {
      return a22.beforeRoot && a22.beforeRoot();
    })).then(function() {
      return Promise.all([
        i27.getDependencies("scene"),
        i27.getDependencies("animation"),
        i27.getDependencies("camera")
      ]);
    }).then(function(a22) {
      const o12 = {
        scene: a22[0][r24.scene || 0],
        scenes: a22[0],
        animations: a22[1],
        cameras: a22[2],
        asset: r24.asset,
        parser: i27,
        userData: {}
      };
      Wn5(n33, o12, r24), Qi3(o12, r24), Promise.all(i27._invokeAll(function(l25) {
        return l25.afterRoot && l25.afterRoot(o12);
      })).then(function() {
        e11(o12);
      });
    }).catch(t19);
  }
  /**
   * Marks the special nodes/meshes in json for efficient parse.
   */
  _markDefs() {
    const e11 = this.json.nodes || [], t19 = this.json.skins || [], i27 = this.json.meshes || [];
    for (let r24 = 0, n33 = t19.length; r24 < n33; r24++) {
      const a22 = t19[r24].joints;
      for (let o12 = 0, l25 = a22.length; o12 < l25; o12++)
        e11[a22[o12]].isBone = true;
    }
    for (let r24 = 0, n33 = e11.length; r24 < n33; r24++) {
      const a22 = e11[r24];
      a22.mesh !== void 0 && (this._addNodeRef(this.meshCache, a22.mesh), a22.skin !== void 0 && (i27[a22.mesh].isSkinnedMesh = true)), a22.camera !== void 0 && this._addNodeRef(this.cameraCache, a22.camera);
    }
  }
  /**
   * Counts references to shared node / Object3D resources. These resources
   * can be reused, or "instantiated", at multiple nodes in the scene
   * hierarchy. Mesh, Camera, and Light instances are instantiated and must
   * be marked. Non-scenegraph resources (like Materials, Geometries, and
   * Textures) can be reused directly and are not marked here.
   *
   * Example: CesiumMilkTruck sample model reuses "Wheel" meshes.
   */
  _addNodeRef(e11, t19) {
    t19 !== void 0 && (e11.refs[t19] === void 0 && (e11.refs[t19] = e11.uses[t19] = 0), e11.refs[t19]++);
  }
  /** Returns a reference to a shared resource, cloning it if necessary. */
  _getNodeRef(e11, t19, i27) {
    if (e11.refs[t19] <= 1)
      return i27;
    const r24 = i27.clone(), n33 = (a22, o12) => {
      const l25 = this.associations.get(a22);
      l25 != null && this.associations.set(o12, l25);
      for (const [c27, h26] of a22.children.entries())
        n33(h26, o12.children[c27]);
    };
    return n33(i27, r24), r24.name += "_instance_" + e11.uses[t19]++, r24;
  }
  _invokeOne(e11) {
    const t19 = Object.values(this.plugins);
    t19.push(this);
    for (let i27 = 0; i27 < t19.length; i27++) {
      const r24 = e11(t19[i27]);
      if (r24)
        return r24;
    }
    return null;
  }
  _invokeAll(e11) {
    const t19 = Object.values(this.plugins);
    t19.unshift(this);
    const i27 = [];
    for (let r24 = 0; r24 < t19.length; r24++) {
      const n33 = e11(t19[r24]);
      n33 && i27.push(n33);
    }
    return i27;
  }
  /**
   * Requests the specified dependency asynchronously, with caching.
   * @param {string} type
   * @param {number} index
   * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}
   */
  getDependency(e11, t19) {
    const i27 = e11 + ":" + t19;
    let r24 = this.cache.get(i27);
    if (!r24) {
      switch (e11) {
        case "scene":
          r24 = this.loadScene(t19);
          break;
        case "node":
          r24 = this._invokeOne(function(n33) {
            return n33.loadNode && n33.loadNode(t19);
          });
          break;
        case "mesh":
          r24 = this._invokeOne(function(n33) {
            return n33.loadMesh && n33.loadMesh(t19);
          });
          break;
        case "accessor":
          r24 = this.loadAccessor(t19);
          break;
        case "bufferView":
          r24 = this._invokeOne(function(n33) {
            return n33.loadBufferView && n33.loadBufferView(t19);
          });
          break;
        case "buffer":
          r24 = this.loadBuffer(t19);
          break;
        case "material":
          r24 = this._invokeOne(function(n33) {
            return n33.loadMaterial && n33.loadMaterial(t19);
          });
          break;
        case "texture":
          r24 = this._invokeOne(function(n33) {
            return n33.loadTexture && n33.loadTexture(t19);
          });
          break;
        case "skin":
          r24 = this.loadSkin(t19);
          break;
        case "animation":
          r24 = this._invokeOne(function(n33) {
            return n33.loadAnimation && n33.loadAnimation(t19);
          });
          break;
        case "camera":
          r24 = this.loadCamera(t19);
          break;
        default:
          if (r24 = this._invokeOne(function(n33) {
            return n33 != this && n33.getDependency && n33.getDependency(e11, t19);
          }), !r24)
            throw new Error("Unknown type: " + e11);
          break;
      }
      this.cache.add(i27, r24);
    }
    return r24;
  }
  /**
   * Requests all dependencies of the specified type asynchronously, with caching.
   * @param {string} type
   * @return {Promise<Array<Object>>}
   */
  getDependencies(e11) {
    let t19 = this.cache.get(e11);
    if (!t19) {
      const i27 = this, r24 = this.json[e11 + (e11 === "mesh" ? "es" : "s")] || [];
      t19 = Promise.all(r24.map(function(n33, a22) {
        return i27.getDependency(e11, a22);
      })), this.cache.add(e11, t19);
    }
    return t19;
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views
   * @param {number} bufferIndex
   * @return {Promise<ArrayBuffer>}
   */
  loadBuffer(e11) {
    const t19 = this.json.buffers[e11], i27 = this.fileLoader;
    if (t19.type && t19.type !== "arraybuffer")
      throw new Error("THREE.GLTFLoader: " + t19.type + " buffer type is not supported.");
    if (t19.uri === void 0 && e11 === 0)
      return Promise.resolve(this.extensions[et11.KHR_BINARY_GLTF].body);
    const r24 = this.options;
    return new Promise(function(n33, a22) {
      i27.load(is3.resolveURL(t19.uri, r24.path), n33, void 0, function() {
        a22(new Error('THREE.GLTFLoader: Failed to load buffer "' + t19.uri + '".'));
      });
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views
   * @param {number} bufferViewIndex
   * @return {Promise<ArrayBuffer>}
   */
  loadBufferView(e11) {
    const t19 = this.json.bufferViews[e11];
    return this.getDependency("buffer", t19.buffer).then(function(i27) {
      const r24 = t19.byteLength || 0, n33 = t19.byteOffset || 0;
      return i27.slice(n33, n33 + r24);
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors
   * @param {number} accessorIndex
   * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}
   */
  loadAccessor(e11) {
    const t19 = this, i27 = this.json, r24 = this.json.accessors[e11];
    if (r24.bufferView === void 0 && r24.sparse === void 0) {
      const a22 = io2[r24.type], o12 = fn4[r24.componentType], l25 = r24.normalized === true, c27 = new o12(r24.count * a22);
      return Promise.resolve(new Ft6(c27, a22, l25));
    }
    const n33 = [];
    return r24.bufferView !== void 0 ? n33.push(this.getDependency("bufferView", r24.bufferView)) : n33.push(null), r24.sparse !== void 0 && (n33.push(this.getDependency("bufferView", r24.sparse.indices.bufferView)), n33.push(this.getDependency("bufferView", r24.sparse.values.bufferView))), Promise.all(n33).then(function(a22) {
      const o12 = a22[0], l25 = io2[r24.type], c27 = fn4[r24.componentType], h26 = c27.BYTES_PER_ELEMENT, u35 = h26 * l25, d34 = r24.byteOffset || 0, m33 = r24.bufferView !== void 0 ? i27.bufferViews[r24.bufferView].byteStride : void 0, _19 = r24.normalized === true;
      let y33, f39;
      if (m33 && m33 !== u35) {
        const p26 = Math.floor(d34 / m33), A17 = "InterleavedBuffer:" + r24.bufferView + ":" + r24.componentType + ":" + p26 + ":" + r24.count;
        let M12 = t19.cache.get(A17);
        M12 || (y33 = new c27(o12, p26 * m33, r24.count * m33 / h26), M12 = new _02(y33, m33 / h26), t19.cache.add(A17, M12)), f39 = new Uo2(M12, l25, d34 % m33 / h26, _19);
      } else
        o12 === null ? y33 = new c27(r24.count * l25) : y33 = new c27(o12, d34, r24.count * l25), f39 = new Ft6(y33, l25, _19);
      if (r24.sparse !== void 0) {
        const p26 = io2.SCALAR, A17 = fn4[r24.sparse.indices.componentType], M12 = r24.sparse.indices.byteOffset || 0, E24 = r24.sparse.values.byteOffset || 0, w29 = new A17(a22[1], M12, r24.sparse.count * p26), I16 = new c27(a22[2], E24, r24.sparse.count * l25);
        o12 !== null && (f39 = new Ft6(f39.array.slice(), f39.itemSize, f39.normalized));
        for (let D17 = 0, P19 = w29.length; D17 < P19; D17++) {
          const x34 = w29[D17];
          if (f39.setX(x34, I16[D17 * l25]), l25 >= 2 && f39.setY(x34, I16[D17 * l25 + 1]), l25 >= 3 && f39.setZ(x34, I16[D17 * l25 + 2]), l25 >= 4 && f39.setW(x34, I16[D17 * l25 + 3]), l25 >= 5)
            throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.");
        }
      }
      return f39;
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures
   * @param {number} textureIndex
   * @return {Promise<THREE.Texture|null>}
   */
  loadTexture(e11) {
    const t19 = this.json, i27 = this.options, r24 = t19.textures[e11].source, n33 = t19.images[r24];
    let a22 = this.textureLoader;
    if (n33.uri) {
      const o12 = i27.manager.getHandler(n33.uri);
      o12 !== null && (a22 = o12);
    }
    return this.loadTextureImage(e11, r24, a22);
  }
  loadTextureImage(e11, t19, i27) {
    const r24 = this, n33 = this.json, a22 = n33.textures[e11], o12 = n33.images[t19], l25 = (o12.uri || o12.bufferView) + ":" + a22.sampler;
    if (this.textureCache[l25])
      return this.textureCache[l25];
    const c27 = this.loadImageSource(t19, i27).then(function(h26) {
      h26.flipY = false, h26.name = a22.name || o12.name || "", h26.name === "" && typeof o12.uri == "string" && o12.uri.startsWith("data:image/") === false && (h26.name = o12.uri);
      const u35 = (n33.samplers || {})[a22.sampler] || {};
      return h26.magFilter = Bc2[u35.magFilter] || Vt6, h26.minFilter = Bc2[u35.minFilter] || Hi3, h26.wrapS = Fc2[u35.wrapS] || Ti4, h26.wrapT = Fc2[u35.wrapT] || Ti4, r24.associations.set(h26, { textures: e11 }), h26;
    }).catch(function() {
      return null;
    });
    return this.textureCache[l25] = c27, c27;
  }
  loadImageSource(e11, t19) {
    const i27 = this, r24 = this.json, n33 = this.options;
    if (this.sourceCache[e11] !== void 0)
      return this.sourceCache[e11].then((u35) => u35.clone());
    const a22 = r24.images[e11], o12 = self.URL || self.webkitURL;
    let l25 = a22.uri || "", c27 = false;
    if (a22.bufferView !== void 0)
      l25 = i27.getDependency("bufferView", a22.bufferView).then(function(u35) {
        c27 = true;
        const d34 = new Blob([u35], { type: a22.mimeType });
        return l25 = o12.createObjectURL(d34), l25;
      });
    else if (a22.uri === void 0)
      throw new Error("THREE.GLTFLoader: Image " + e11 + " is missing URI and bufferView");
    const h26 = Promise.resolve(l25).then(function(u35) {
      return new Promise(function(d34, m33) {
        let _19 = d34;
        t19.isImageBitmapLoader === true && (_19 = function(y33) {
          const f39 = new Wt7(y33);
          f39.needsUpdate = true, d34(f39);
        }), t19.load(is3.resolveURL(u35, n33.path), _19, void 0, m33);
      });
    }).then(function(u35) {
      return c27 === true && o12.revokeObjectURL(l25), u35.userData.mimeType = a22.mimeType || w_2(a22.uri), u35;
    }).catch(function(u35) {
      throw console.error("THREE.GLTFLoader: Couldn't load texture", l25), u35;
    });
    return this.sourceCache[e11] = h26, h26;
  }
  /**
   * Asynchronously assigns a texture to the given material parameters.
   * @param {Object} materialParams
   * @param {string} mapName
   * @param {Object} mapDef
   * @return {Promise<Texture>}
   */
  assignTexture(e11, t19, i27, r24) {
    const n33 = this;
    return this.getDependency("texture", i27.index).then(function(a22) {
      if (!a22)
        return null;
      if (i27.texCoord !== void 0 && i27.texCoord > 0 && (a22 = a22.clone(), a22.channel = i27.texCoord), n33.extensions[et11.KHR_TEXTURE_TRANSFORM]) {
        const o12 = i27.extensions !== void 0 ? i27.extensions[et11.KHR_TEXTURE_TRANSFORM] : void 0;
        if (o12) {
          const l25 = n33.associations.get(a22);
          a22 = n33.extensions[et11.KHR_TEXTURE_TRANSFORM].extendTexture(a22, o12), n33.associations.set(a22, l25);
        }
      }
      return r24 !== void 0 && (a22.encoding = r24), e11[t19] = a22, a22;
    });
  }
  /**
   * Assigns final material to a Mesh, Line, or Points instance. The instance
   * already has a material (generated from the glTF material options alone)
   * but reuse of the same glTF material may require multiple threejs materials
   * to accommodate different primitive types, defines, etc. New materials will
   * be created if necessary, and reused from a cache.
   * @param  {Object3D} mesh Mesh, Line, or Points instance.
   */
  assignFinalMaterial(e11) {
    const t19 = e11.geometry;
    let i27 = e11.material;
    const r24 = t19.attributes.tangent === void 0, n33 = t19.attributes.color !== void 0, a22 = t19.attributes.normal === void 0;
    if (e11.isPoints) {
      const o12 = "PointsMaterial:" + i27.uuid;
      let l25 = this.cache.get(o12);
      l25 || (l25 = new Rh2(), pi6.prototype.copy.call(l25, i27), l25.color.copy(i27.color), l25.map = i27.map, l25.sizeAttenuation = false, this.cache.add(o12, l25)), i27 = l25;
    } else if (e11.isLine) {
      const o12 = "LineBasicMaterial:" + i27.uuid;
      let l25 = this.cache.get(o12);
      l25 || (l25 = new Tn4(), pi6.prototype.copy.call(l25, i27), l25.color.copy(i27.color), l25.map = i27.map, this.cache.add(o12, l25)), i27 = l25;
    }
    if (r24 || n33 || a22) {
      let o12 = "ClonedMaterial:" + i27.uuid + ":";
      r24 && (o12 += "derivative-tangents:"), n33 && (o12 += "vertex-colors:"), a22 && (o12 += "flat-shading:");
      let l25 = this.cache.get(o12);
      l25 || (l25 = i27.clone(), n33 && (l25.vertexColors = true), a22 && (l25.flatShading = true), r24 && (l25.normalScale && (l25.normalScale.y *= -1), l25.clearcoatNormalScale && (l25.clearcoatNormalScale.y *= -1)), this.cache.add(o12, l25), this.associations.set(l25, this.associations.get(i27))), i27 = l25;
    }
    e11.material = i27;
  }
  getMaterialType() {
    return as3;
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials
   * @param {number} materialIndex
   * @return {Promise<Material>}
   */
  loadMaterial(e11) {
    const t19 = this, i27 = this.json, r24 = this.extensions, n33 = i27.materials[e11];
    let a22;
    const o12 = {}, l25 = n33.extensions || {}, c27 = [];
    if (l25[et11.KHR_MATERIALS_UNLIT]) {
      const u35 = r24[et11.KHR_MATERIALS_UNLIT];
      a22 = u35.getMaterialType(), c27.push(u35.extendParams(o12, n33, t19));
    } else {
      const u35 = n33.pbrMetallicRoughness || {};
      if (o12.color = new ze7(1, 1, 1), o12.opacity = 1, Array.isArray(u35.baseColorFactor)) {
        const d34 = u35.baseColorFactor;
        o12.color.fromArray(d34), o12.opacity = d34[3];
      }
      u35.baseColorTexture !== void 0 && c27.push(t19.assignTexture(o12, "map", u35.baseColorTexture, rt10)), o12.metalness = u35.metallicFactor !== void 0 ? u35.metallicFactor : 1, o12.roughness = u35.roughnessFactor !== void 0 ? u35.roughnessFactor : 1, u35.metallicRoughnessTexture !== void 0 && (c27.push(t19.assignTexture(o12, "metalnessMap", u35.metallicRoughnessTexture)), c27.push(t19.assignTexture(o12, "roughnessMap", u35.metallicRoughnessTexture))), a22 = this._invokeOne(function(d34) {
        return d34.getMaterialType && d34.getMaterialType(e11);
      }), c27.push(Promise.all(this._invokeAll(function(d34) {
        return d34.extendMaterialParams && d34.extendMaterialParams(e11, o12);
      })));
    }
    n33.doubleSided === true && (o12.side = ui6);
    const h26 = n33.alphaMode || ro2.OPAQUE;
    if (h26 === ro2.BLEND ? (o12.transparent = true, o12.depthWrite = false) : (o12.transparent = false, h26 === ro2.MASK && (o12.alphaTest = n33.alphaCutoff !== void 0 ? n33.alphaCutoff : 0.5)), n33.normalTexture !== void 0 && a22 !== xi6 && (c27.push(t19.assignTexture(o12, "normalMap", n33.normalTexture)), o12.normalScale = new We7(1, 1), n33.normalTexture.scale !== void 0)) {
      const u35 = n33.normalTexture.scale;
      o12.normalScale.set(u35, u35);
    }
    return n33.occlusionTexture !== void 0 && a22 !== xi6 && (c27.push(t19.assignTexture(o12, "aoMap", n33.occlusionTexture)), n33.occlusionTexture.strength !== void 0 && (o12.aoMapIntensity = n33.occlusionTexture.strength)), n33.emissiveFactor !== void 0 && a22 !== xi6 && (o12.emissive = new ze7().fromArray(n33.emissiveFactor)), n33.emissiveTexture !== void 0 && a22 !== xi6 && c27.push(t19.assignTexture(o12, "emissiveMap", n33.emissiveTexture, rt10)), Promise.all(c27).then(function() {
      const u35 = new a22(o12);
      return n33.name && (u35.name = n33.name), Qi3(u35, n33), t19.associations.set(u35, { materials: e11 }), n33.extensions && Wn5(r24, u35, n33), u35;
    });
  }
  /** When Object3D instances are targeted by animation, they need unique names. */
  createUniqueName(e11) {
    const t19 = ht12.sanitizeNodeName(e11 || "");
    let i27 = t19;
    for (let r24 = 1; this.nodeNamesUsed[i27]; ++r24)
      i27 = t19 + "_" + r24;
    return this.nodeNamesUsed[i27] = true, i27;
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry
   *
   * Creates BufferGeometries from primitives.
   *
   * @param {Array<GLTF.Primitive>} primitives
   * @return {Promise<Array<BufferGeometry>>}
   */
  loadGeometries(e11) {
    const t19 = this, i27 = this.extensions, r24 = this.primitiveCache;
    function n33(o12) {
      return i27[et11.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o12, t19).then(function(l25) {
        return Vc2(l25, o12, t19);
      });
    }
    const a22 = [];
    for (let o12 = 0, l25 = e11.length; o12 < l25; o12++) {
      const c27 = e11[o12], h26 = M_2(c27), u35 = r24[h26];
      if (u35)
        a22.push(u35.promise);
      else {
        let d34;
        c27.extensions && c27.extensions[et11.KHR_DRACO_MESH_COMPRESSION] ? d34 = n33(c27) : d34 = Vc2(new Xt6(), c27, t19), r24[h26] = { primitive: c27, promise: d34 }, a22.push(d34);
      }
    }
    return Promise.all(a22);
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes
   * @param {number} meshIndex
   * @return {Promise<Group|Mesh|SkinnedMesh>}
   */
  loadMesh(e11) {
    const t19 = this, i27 = this.json, r24 = this.extensions, n33 = i27.meshes[e11], a22 = n33.primitives, o12 = [];
    for (let l25 = 0, c27 = a22.length; l25 < c27; l25++) {
      const h26 = a22[l25].material === void 0 ? y_2(this.cache) : this.getDependency("material", a22[l25].material);
      o12.push(h26);
    }
    return o12.push(t19.loadGeometries(a22)), Promise.all(o12).then(function(l25) {
      const c27 = l25.slice(0, l25.length - 1), h26 = l25[l25.length - 1], u35 = [];
      for (let m33 = 0, _19 = h26.length; m33 < _19; m33++) {
        const y33 = h26[m33], f39 = a22[m33];
        let p26;
        const A17 = c27[m33];
        if (f39.mode === ci6.TRIANGLES || f39.mode === ci6.TRIANGLE_STRIP || f39.mode === ci6.TRIANGLE_FAN || f39.mode === void 0)
          p26 = n33.isSkinnedMesh === true ? new Lh2(y33, A17) : new Rt8(y33, A17), p26.isSkinnedMesh === true && p26.normalizeSkinWeights(), f39.mode === ci6.TRIANGLE_STRIP ? p26.geometry = Oc2(p26.geometry, lh2) : f39.mode === ci6.TRIANGLE_FAN && (p26.geometry = Oc2(p26.geometry, fo2));
        else if (f39.mode === ci6.LINES)
          p26 = new zo2(y33, A17);
        else if (f39.mode === ci6.LINE_STRIP)
          p26 = new ss3(y33, A17);
        else if (f39.mode === ci6.LINE_LOOP)
          p26 = new M02(y33, A17);
        else if (f39.mode === ci6.POINTS)
          p26 = new w02(y33, A17);
        else
          throw new Error("THREE.GLTFLoader: Primitive mode unsupported: " + f39.mode);
        Object.keys(p26.geometry.morphAttributes).length > 0 && b_2(p26, n33), p26.name = t19.createUniqueName(n33.name || "mesh_" + e11), Qi3(p26, n33), f39.extensions && Wn5(r24, p26, f39), t19.assignFinalMaterial(p26), u35.push(p26);
      }
      for (let m33 = 0, _19 = u35.length; m33 < _19; m33++)
        t19.associations.set(u35[m33], {
          meshes: e11,
          primitives: m33
        });
      if (u35.length === 1)
        return u35[0];
      const d34 = new Lt5();
      t19.associations.set(d34, { meshes: e11 });
      for (let m33 = 0, _19 = u35.length; m33 < _19; m33++)
        d34.add(u35[m33]);
      return d34;
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras
   * @param {number} cameraIndex
   * @return {Promise<THREE.Camera>}
   */
  loadCamera(e11) {
    let t19;
    const i27 = this.json.cameras[e11], r24 = i27[i27.type];
    if (!r24) {
      console.warn("THREE.GLTFLoader: Missing camera parameters.");
      return;
    }
    return i27.type === "perspective" ? t19 = new Bt6(ln4.radToDeg(r24.yfov), r24.aspectRatio || 1, r24.znear || 1, r24.zfar || 2e6) : i27.type === "orthographic" && (t19 = new la2(-r24.xmag, r24.xmag, r24.ymag, -r24.ymag, r24.znear, r24.zfar)), i27.name && (t19.name = this.createUniqueName(i27.name)), Qi3(t19, i27), Promise.resolve(t19);
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins
   * @param {number} skinIndex
   * @return {Promise<Skeleton>}
   */
  loadSkin(e11) {
    const t19 = this.json.skins[e11], i27 = [];
    for (let r24 = 0, n33 = t19.joints.length; r24 < n33; r24++)
      i27.push(this._loadNodeShallow(t19.joints[r24]));
    return t19.inverseBindMatrices !== void 0 ? i27.push(this.getDependency("accessor", t19.inverseBindMatrices)) : i27.push(null), Promise.all(i27).then(function(r24) {
      const n33 = r24.pop(), a22 = r24, o12 = [], l25 = [];
      for (let c27 = 0, h26 = a22.length; c27 < h26; c27++) {
        const u35 = a22[c27];
        if (u35) {
          o12.push(u35);
          const d34 = new He6();
          n33 !== null && d34.fromArray(n33.array, c27 * 16), l25.push(d34);
        } else
          console.warn('THREE.GLTFLoader: Joint "%s" could not be found.', t19.joints[c27]);
      }
      return new ha2(o12, l25);
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations
   * @param {number} animationIndex
   * @return {Promise<AnimationClip>}
   */
  loadAnimation(e11) {
    const t19 = this.json.animations[e11], i27 = t19.name ? t19.name : "animation_" + e11, r24 = [], n33 = [], a22 = [], o12 = [], l25 = [];
    for (let c27 = 0, h26 = t19.channels.length; c27 < h26; c27++) {
      const u35 = t19.channels[c27], d34 = t19.samplers[u35.sampler], m33 = u35.target, _19 = m33.node, y33 = t19.parameters !== void 0 ? t19.parameters[d34.input] : d34.input, f39 = t19.parameters !== void 0 ? t19.parameters[d34.output] : d34.output;
      m33.node !== void 0 && (r24.push(this.getDependency("node", _19)), n33.push(this.getDependency("accessor", y33)), a22.push(this.getDependency("accessor", f39)), o12.push(d34), l25.push(m33));
    }
    return Promise.all([
      Promise.all(r24),
      Promise.all(n33),
      Promise.all(a22),
      Promise.all(o12),
      Promise.all(l25)
    ]).then(function(c27) {
      const h26 = c27[0], u35 = c27[1], d34 = c27[2], m33 = c27[3], _19 = c27[4], y33 = [];
      for (let f39 = 0, p26 = h26.length; f39 < p26; f39++) {
        const A17 = h26[f39], M12 = u35[f39], E24 = d34[f39], w29 = m33[f39], I16 = _19[f39];
        if (A17 === void 0)
          continue;
        A17.updateMatrix();
        let D17;
        switch (Ki4[I16.path]) {
          case Ki4.weights:
            D17 = ts3;
            break;
          case Ki4.rotation:
            D17 = ir5;
            break;
          case Ki4.position:
          case Ki4.scale:
          default:
            D17 = Sr5;
            break;
        }
        const P19 = A17.name ? A17.name : A17.uuid, x34 = w29.interpolation !== void 0 ? v_2[w29.interpolation] : Mn5, C19 = [];
        Ki4[I16.path] === Ki4.weights ? A17.traverse(function(z19) {
          z19.morphTargetInfluences && C19.push(z19.name ? z19.name : z19.uuid);
        }) : C19.push(P19);
        let G15 = E24.array;
        if (E24.normalized) {
          const z19 = wo(G15.constructor), U18 = new Float32Array(G15.length);
          for (let V14 = 0, j18 = G15.length; V14 < j18; V14++)
            U18[V14] = G15[V14] * z19;
          G15 = U18;
        }
        for (let z19 = 0, U18 = C19.length; z19 < U18; z19++) {
          const V14 = new D17(
            C19[z19] + "." + Ki4[I16.path],
            M12.array,
            G15,
            x34
          );
          w29.interpolation === "CUBICSPLINE" && (V14.createInterpolant = function(j18) {
            const W8 = this instanceof ir5 ? __2 : Bh2;
            return new W8(this.times, this.values, this.getValueSize() / 3, j18);
          }, V14.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true), y33.push(V14);
        }
      }
      return new bo(i27, void 0, y33);
    });
  }
  createNodeMesh(e11) {
    const t19 = this.json, i27 = this, r24 = t19.nodes[e11];
    return r24.mesh === void 0 ? null : i27.getDependency("mesh", r24.mesh).then(function(n33) {
      const a22 = i27._getNodeRef(i27.meshCache, r24.mesh, n33);
      return r24.weights !== void 0 && a22.traverse(function(o12) {
        if (o12.isMesh)
          for (let l25 = 0, c27 = r24.weights.length; l25 < c27; l25++)
            o12.morphTargetInfluences[l25] = r24.weights[l25];
      }), a22;
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy
   * @param {number} nodeIndex
   * @return {Promise<Object3D>}
   */
  loadNode(e11) {
    const t19 = this.json, i27 = this, r24 = t19.nodes[e11], n33 = i27._loadNodeShallow(e11), a22 = [], o12 = r24.children || [];
    for (let c27 = 0, h26 = o12.length; c27 < h26; c27++)
      a22.push(i27.getDependency("node", o12[c27]));
    const l25 = r24.skin === void 0 ? Promise.resolve(null) : i27.getDependency("skin", r24.skin);
    return Promise.all([
      n33,
      Promise.all(a22),
      l25
    ]).then(function(c27) {
      const h26 = c27[0], u35 = c27[1], d34 = c27[2];
      d34 !== null && h26.traverse(function(m33) {
        m33.isSkinnedMesh && m33.bind(d34, S_2);
      });
      for (let m33 = 0, _19 = u35.length; m33 < _19; m33++)
        h26.add(u35[m33]);
      return h26;
    });
  }
  // ._loadNodeShallow() parses a single node.
  // skin and child nodes are created and added in .loadNode() (no '_' prefix).
  _loadNodeShallow(e11) {
    const t19 = this.json, i27 = this.extensions, r24 = this;
    if (this.nodeCache[e11] !== void 0)
      return this.nodeCache[e11];
    const n33 = t19.nodes[e11], a22 = n33.name ? r24.createUniqueName(n33.name) : "", o12 = [], l25 = r24._invokeOne(function(c27) {
      return c27.createNodeMesh && c27.createNodeMesh(e11);
    });
    return l25 && o12.push(l25), n33.camera !== void 0 && o12.push(r24.getDependency("camera", n33.camera).then(function(c27) {
      return r24._getNodeRef(r24.cameraCache, n33.camera, c27);
    })), r24._invokeAll(function(c27) {
      return c27.createNodeAttachment && c27.createNodeAttachment(e11);
    }).forEach(function(c27) {
      o12.push(c27);
    }), this.nodeCache[e11] = Promise.all(o12).then(function(c27) {
      let h26;
      if (n33.isBone === true ? h26 = new Oo2() : c27.length > 1 ? h26 = new Lt5() : c27.length === 1 ? h26 = c27[0] : h26 = new _t7(), h26 !== c27[0])
        for (let u35 = 0, d34 = c27.length; u35 < d34; u35++)
          h26.add(c27[u35]);
      if (n33.name && (h26.userData.name = n33.name, h26.name = a22), Qi3(h26, n33), n33.extensions && Wn5(i27, h26, n33), n33.matrix !== void 0) {
        const u35 = new He6();
        u35.fromArray(n33.matrix), h26.applyMatrix4(u35);
      } else
        n33.translation !== void 0 && h26.position.fromArray(n33.translation), n33.rotation !== void 0 && h26.quaternion.fromArray(n33.rotation), n33.scale !== void 0 && h26.scale.fromArray(n33.scale);
      return r24.associations.has(h26) || r24.associations.set(h26, {}), r24.associations.get(h26).nodes = e11, h26;
    }), this.nodeCache[e11];
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes
   * @param {number} sceneIndex
   * @return {Promise<Group>}
   */
  loadScene(e11) {
    const t19 = this.extensions, i27 = this.json.scenes[e11], r24 = this, n33 = new Lt5();
    i27.name && (n33.name = r24.createUniqueName(i27.name)), Qi3(n33, i27), i27.extensions && Wn5(t19, n33, i27);
    const a22 = i27.nodes || [], o12 = [];
    for (let l25 = 0, c27 = a22.length; l25 < c27; l25++)
      o12.push(r24.getDependency("node", a22[l25]));
    return Promise.all(o12).then(function(l25) {
      for (let h26 = 0, u35 = l25.length; h26 < u35; h26++)
        n33.add(l25[h26]);
      const c27 = (h26) => {
        const u35 = /* @__PURE__ */ new Map();
        for (const [d34, m33] of r24.associations)
          (d34 instanceof pi6 || d34 instanceof Wt7) && u35.set(d34, m33);
        return h26.traverse((d34) => {
          const m33 = r24.associations.get(d34);
          m33 != null && u35.set(d34, m33);
        }), u35;
      };
      return r24.associations = c27(n33), n33;
    });
  }
};
function E_2(s18, e11, t19) {
  const i27 = e11.attributes, r24 = new Vi3();
  if (i27.POSITION !== void 0) {
    const o12 = t19.json.accessors[i27.POSITION], l25 = o12.min, c27 = o12.max;
    if (l25 !== void 0 && c27 !== void 0) {
      if (r24.set(
        new k18(l25[0], l25[1], l25[2]),
        new k18(c27[0], c27[1], c27[2])
      ), o12.normalized) {
        const h26 = wo(fn4[o12.componentType]);
        r24.min.multiplyScalar(h26), r24.max.multiplyScalar(h26);
      }
    } else {
      console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");
      return;
    }
  } else
    return;
  const n33 = e11.targets;
  if (n33 !== void 0) {
    const o12 = new k18(), l25 = new k18();
    for (let c27 = 0, h26 = n33.length; c27 < h26; c27++) {
      const u35 = n33[c27];
      if (u35.POSITION !== void 0) {
        const d34 = t19.json.accessors[u35.POSITION], m33 = d34.min, _19 = d34.max;
        if (m33 !== void 0 && _19 !== void 0) {
          if (l25.setX(Math.max(Math.abs(m33[0]), Math.abs(_19[0]))), l25.setY(Math.max(Math.abs(m33[1]), Math.abs(_19[1]))), l25.setZ(Math.max(Math.abs(m33[2]), Math.abs(_19[2]))), d34.normalized) {
            const y33 = wo(fn4[d34.componentType]);
            l25.multiplyScalar(y33);
          }
          o12.max(l25);
        } else
          console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");
      }
    }
    r24.expandByVector(o12);
  }
  s18.boundingBox = r24;
  const a22 = new Gi2();
  r24.getCenter(a22.center), a22.radius = r24.min.distanceTo(r24.max) / 2, s18.boundingSphere = a22;
}
function Vc2(s18, e11, t19) {
  const i27 = e11.attributes, r24 = [];
  function n33(a22, o12) {
    return t19.getDependency("accessor", a22).then(function(l25) {
      s18.setAttribute(o12, l25);
    });
  }
  for (const a22 in i27) {
    const o12 = Mo[a22] || a22.toLowerCase();
    o12 in s18.attributes || r24.push(n33(i27[a22], o12));
  }
  if (e11.indices !== void 0 && !s18.index) {
    const a22 = t19.getDependency("accessor", e11.indices).then(function(o12) {
      s18.setIndex(o12);
    });
    r24.push(a22);
  }
  return Qi3(s18, e11), E_2(s18, e11, t19), Promise.all(r24).then(function() {
    return e11.targets !== void 0 ? x_2(s18, e11.targets, t19) : s18;
  });
}
var Gc2 = { type: "change" };
var no2 = { type: "start" };
var Wc2 = { type: "end" };
var Fh2 = class extends Ar5 {
  constructor(e11, t19) {
    super(), this.object = e11, this.domElement = t19, this.domElement.style.touchAction = "none", this.enabled = true, this.target = new k18(), this.minDistance = 0, this.maxDistance = 1 / 0, this.minZoom = 0, this.maxZoom = 1 / 0, this.minPolarAngle = 0, this.maxPolarAngle = Math.PI, this.minAzimuthAngle = -1 / 0, this.maxAzimuthAngle = 1 / 0, this.enableDamping = false, this.dampingFactor = 0.05, this.enableZoom = true, this.zoomSpeed = 1, this.enableRotate = true, this.rotateSpeed = 1, this.enablePan = true, this.panSpeed = 1, this.screenSpacePanning = true, this.keyPanSpeed = 7, this.autoRotate = false, this.autoRotateSpeed = 2, this.keys = { LEFT: "ArrowLeft", UP: "ArrowUp", RIGHT: "ArrowRight", BOTTOM: "ArrowDown" }, this.mouseButtons = { LEFT: Br5.ROTATE, MIDDLE: Br5.DOLLY, RIGHT: Br5.PAN }, this.touches = { ONE: Fr5.ROTATE, TWO: Fr5.DOLLY_PAN }, this.target0 = this.target.clone(), this.position0 = this.object.position.clone(), this.zoom0 = this.object.zoom, this._domElementKeyEvents = null, this.getPolarAngle = function() {
      return o12.phi;
    }, this.getAzimuthalAngle = function() {
      return o12.theta;
    }, this.getDistance = function() {
      return this.object.position.distanceTo(this.target);
    }, this.listenToKeyEvents = function(O20) {
      O20.addEventListener("keydown", ot13), this._domElementKeyEvents = O20;
    }, this.stopListenToKeyEvents = function() {
      this._domElementKeyEvents.removeEventListener("keydown", ot13), this._domElementKeyEvents = null;
    }, this.saveState = function() {
      i27.target0.copy(i27.target), i27.position0.copy(i27.object.position), i27.zoom0 = i27.object.zoom;
    }, this.reset = function() {
      i27.target.copy(i27.target0), i27.object.position.copy(i27.position0), i27.object.zoom = i27.zoom0, i27.object.updateProjectionMatrix(), i27.dispatchEvent(Gc2), i27.update(), n33 = r24.NONE;
    }, this.update = function() {
      const O20 = new k18(), ae7 = new jt8().setFromUnitVectors(e11.up, new k18(0, 1, 0)), Z11 = ae7.clone().invert(), xe6 = new k18(), Ae6 = new jt8(), Ce7 = 2 * Math.PI;
      return function() {
        const we8 = i27.object.position;
        O20.copy(we8).sub(i27.target), O20.applyQuaternion(ae7), o12.setFromVector3(O20), i27.autoRotate && n33 === r24.NONE && x34(D17()), i27.enableDamping ? (o12.theta += l25.theta * i27.dampingFactor, o12.phi += l25.phi * i27.dampingFactor) : (o12.theta += l25.theta, o12.phi += l25.phi);
        let Se7 = i27.minAzimuthAngle, Ve8 = i27.maxAzimuthAngle;
        return isFinite(Se7) && isFinite(Ve8) && (Se7 < -Math.PI ? Se7 += Ce7 : Se7 > Math.PI && (Se7 -= Ce7), Ve8 < -Math.PI ? Ve8 += Ce7 : Ve8 > Math.PI && (Ve8 -= Ce7), Se7 <= Ve8 ? o12.theta = Math.max(Se7, Math.min(Ve8, o12.theta)) : o12.theta = o12.theta > (Se7 + Ve8) / 2 ? Math.max(Se7, o12.theta) : Math.min(Ve8, o12.theta)), o12.phi = Math.max(i27.minPolarAngle, Math.min(i27.maxPolarAngle, o12.phi)), o12.makeSafe(), o12.radius *= c27, o12.radius = Math.max(i27.minDistance, Math.min(i27.maxDistance, o12.radius)), i27.enableDamping === true ? i27.target.addScaledVector(h26, i27.dampingFactor) : i27.target.add(h26), O20.setFromSpherical(o12), O20.applyQuaternion(Z11), we8.copy(i27.target).add(O20), i27.object.lookAt(i27.target), i27.enableDamping === true ? (l25.theta *= 1 - i27.dampingFactor, l25.phi *= 1 - i27.dampingFactor, h26.multiplyScalar(1 - i27.dampingFactor)) : (l25.set(0, 0, 0), h26.set(0, 0, 0)), c27 = 1, u35 || xe6.distanceToSquared(i27.object.position) > a22 || 8 * (1 - Ae6.dot(i27.object.quaternion)) > a22 ? (i27.dispatchEvent(Gc2), xe6.copy(i27.object.position), Ae6.copy(i27.object.quaternion), u35 = false, true) : false;
      };
    }(), this.dispose = function() {
      i27.domElement.removeEventListener("contextmenu", L11), i27.domElement.removeEventListener("pointerdown", je7), i27.domElement.removeEventListener("pointercancel", vt8), i27.domElement.removeEventListener("wheel", $e6), i27.domElement.removeEventListener("pointermove", Mt10), i27.domElement.removeEventListener("pointerup", vt8), i27._domElementKeyEvents !== null && (i27._domElementKeyEvents.removeEventListener("keydown", ot13), i27._domElementKeyEvents = null);
    };
    const i27 = this, r24 = {
      NONE: -1,
      ROTATE: 0,
      DOLLY: 1,
      PAN: 2,
      TOUCH_ROTATE: 3,
      TOUCH_PAN: 4,
      TOUCH_DOLLY_PAN: 5,
      TOUCH_DOLLY_ROTATE: 6
    };
    let n33 = r24.NONE;
    const a22 = 1e-6, o12 = new kc2(), l25 = new kc2();
    let c27 = 1;
    const h26 = new k18();
    let u35 = false;
    const d34 = new We7(), m33 = new We7(), _19 = new We7(), y33 = new We7(), f39 = new We7(), p26 = new We7(), A17 = new We7(), M12 = new We7(), E24 = new We7(), w29 = [], I16 = {};
    function D17() {
      return 2 * Math.PI / 60 / 60 * i27.autoRotateSpeed;
    }
    function P19() {
      return Math.pow(0.95, i27.zoomSpeed);
    }
    function x34(O20) {
      l25.theta -= O20;
    }
    function C19(O20) {
      l25.phi -= O20;
    }
    const G15 = function() {
      const O20 = new k18();
      return function(ae7, Z11) {
        O20.setFromMatrixColumn(Z11, 0), O20.multiplyScalar(-ae7), h26.add(O20);
      };
    }(), z19 = function() {
      const O20 = new k18();
      return function(ae7, Z11) {
        i27.screenSpacePanning === true ? O20.setFromMatrixColumn(Z11, 1) : (O20.setFromMatrixColumn(Z11, 0), O20.crossVectors(i27.object.up, O20)), O20.multiplyScalar(ae7), h26.add(O20);
      };
    }(), U18 = function() {
      const O20 = new k18();
      return function(ae7, Z11) {
        const xe6 = i27.domElement;
        if (i27.object.isPerspectiveCamera) {
          const Ae6 = i27.object.position;
          O20.copy(Ae6).sub(i27.target);
          let Ce7 = O20.length();
          Ce7 *= Math.tan(i27.object.fov / 2 * Math.PI / 180), G15(2 * ae7 * Ce7 / xe6.clientHeight, i27.object.matrix), z19(2 * Z11 * Ce7 / xe6.clientHeight, i27.object.matrix);
        } else
          i27.object.isOrthographicCamera ? (G15(ae7 * (i27.object.right - i27.object.left) / i27.object.zoom / xe6.clientWidth, i27.object.matrix), z19(Z11 * (i27.object.top - i27.object.bottom) / i27.object.zoom / xe6.clientHeight, i27.object.matrix)) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."), i27.enablePan = false);
      };
    }();
    function V14(O20) {
      i27.object.isPerspectiveCamera ? c27 /= O20 : i27.object.isOrthographicCamera ? (i27.object.zoom = Math.max(i27.minZoom, Math.min(i27.maxZoom, i27.object.zoom * O20)), i27.object.updateProjectionMatrix(), u35 = true) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), i27.enableZoom = false);
    }
    function j18(O20) {
      i27.object.isPerspectiveCamera ? c27 *= O20 : i27.object.isOrthographicCamera ? (i27.object.zoom = Math.max(i27.minZoom, Math.min(i27.maxZoom, i27.object.zoom / O20)), i27.object.updateProjectionMatrix(), u35 = true) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), i27.enableZoom = false);
    }
    function W8(O20) {
      d34.set(O20.clientX, O20.clientY);
    }
    function re8(O20) {
      A17.set(O20.clientX, O20.clientY);
    }
    function $24(O20) {
      y33.set(O20.clientX, O20.clientY);
    }
    function ie8(O20) {
      m33.set(O20.clientX, O20.clientY), _19.subVectors(m33, d34).multiplyScalar(i27.rotateSpeed);
      const ae7 = i27.domElement;
      x34(2 * Math.PI * _19.x / ae7.clientHeight), C19(2 * Math.PI * _19.y / ae7.clientHeight), d34.copy(m33), i27.update();
    }
    function le7(O20) {
      M12.set(O20.clientX, O20.clientY), E24.subVectors(M12, A17), E24.y > 0 ? V14(P19()) : E24.y < 0 && j18(P19()), A17.copy(M12), i27.update();
    }
    function fe7(O20) {
      f39.set(O20.clientX, O20.clientY), p26.subVectors(f39, y33).multiplyScalar(i27.panSpeed), U18(p26.x, p26.y), y33.copy(f39), i27.update();
    }
    function ue8(O20) {
      O20.deltaY < 0 ? j18(P19()) : O20.deltaY > 0 && V14(P19()), i27.update();
    }
    function H15(O20) {
      let ae7 = false;
      switch (O20.code) {
        case i27.keys.UP:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? C19(2 * Math.PI * i27.rotateSpeed / i27.domElement.clientHeight) : U18(0, i27.keyPanSpeed), ae7 = true;
          break;
        case i27.keys.BOTTOM:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? C19(-2 * Math.PI * i27.rotateSpeed / i27.domElement.clientHeight) : U18(0, -i27.keyPanSpeed), ae7 = true;
          break;
        case i27.keys.LEFT:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? x34(2 * Math.PI * i27.rotateSpeed / i27.domElement.clientHeight) : U18(i27.keyPanSpeed, 0), ae7 = true;
          break;
        case i27.keys.RIGHT:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? x34(-2 * Math.PI * i27.rotateSpeed / i27.domElement.clientHeight) : U18(-i27.keyPanSpeed, 0), ae7 = true;
          break;
      }
      ae7 && (O20.preventDefault(), i27.update());
    }
    function q13() {
      if (w29.length === 1)
        d34.set(w29[0].pageX, w29[0].pageY);
      else {
        const O20 = 0.5 * (w29[0].pageX + w29[1].pageX), ae7 = 0.5 * (w29[0].pageY + w29[1].pageY);
        d34.set(O20, ae7);
      }
    }
    function oe7() {
      if (w29.length === 1)
        y33.set(w29[0].pageX, w29[0].pageY);
      else {
        const O20 = 0.5 * (w29[0].pageX + w29[1].pageX), ae7 = 0.5 * (w29[0].pageY + w29[1].pageY);
        y33.set(O20, ae7);
      }
    }
    function K13() {
      const O20 = w29[0].pageX - w29[1].pageX, ae7 = w29[0].pageY - w29[1].pageY, Z11 = Math.sqrt(O20 * O20 + ae7 * ae7);
      A17.set(0, Z11);
    }
    function F17() {
      i27.enableZoom && K13(), i27.enablePan && oe7();
    }
    function ye7() {
      i27.enableZoom && K13(), i27.enableRotate && q13();
    }
    function Le7(O20) {
      if (w29.length == 1)
        m33.set(O20.pageX, O20.pageY);
      else {
        const Z11 = _e7(O20), xe6 = 0.5 * (O20.pageX + Z11.x), Ae6 = 0.5 * (O20.pageY + Z11.y);
        m33.set(xe6, Ae6);
      }
      _19.subVectors(m33, d34).multiplyScalar(i27.rotateSpeed);
      const ae7 = i27.domElement;
      x34(2 * Math.PI * _19.x / ae7.clientHeight), C19(2 * Math.PI * _19.y / ae7.clientHeight), d34.copy(m33);
    }
    function me9(O20) {
      if (w29.length === 1)
        f39.set(O20.pageX, O20.pageY);
      else {
        const ae7 = _e7(O20), Z11 = 0.5 * (O20.pageX + ae7.x), xe6 = 0.5 * (O20.pageY + ae7.y);
        f39.set(Z11, xe6);
      }
      p26.subVectors(f39, y33).multiplyScalar(i27.panSpeed), U18(p26.x, p26.y), y33.copy(f39);
    }
    function De6(O20) {
      const ae7 = _e7(O20), Z11 = O20.pageX - ae7.x, xe6 = O20.pageY - ae7.y, Ae6 = Math.sqrt(Z11 * Z11 + xe6 * xe6);
      M12.set(0, Ae6), E24.set(0, Math.pow(M12.y / A17.y, i27.zoomSpeed)), V14(E24.y), A17.copy(M12);
    }
    function tt10(O20) {
      i27.enableZoom && De6(O20), i27.enablePan && me9(O20);
    }
    function Pe6(O20) {
      i27.enableZoom && De6(O20), i27.enableRotate && Le7(O20);
    }
    function je7(O20) {
      i27.enabled !== false && (w29.length === 0 && (i27.domElement.setPointerCapture(O20.pointerId), i27.domElement.addEventListener("pointermove", Mt10), i27.domElement.addEventListener("pointerup", vt8)), Q11(O20), O20.pointerType === "touch" ? kt10(O20) : St8(O20));
    }
    function Mt10(O20) {
      i27.enabled !== false && (O20.pointerType === "touch" ? N19(O20) : Tt9(O20));
    }
    function vt8(O20) {
      de9(O20), w29.length === 0 && (i27.domElement.releasePointerCapture(O20.pointerId), i27.domElement.removeEventListener("pointermove", Mt10), i27.domElement.removeEventListener("pointerup", vt8)), i27.dispatchEvent(Wc2), n33 = r24.NONE;
    }
    function St8(O20) {
      let ae7;
      switch (O20.button) {
        case 0:
          ae7 = i27.mouseButtons.LEFT;
          break;
        case 1:
          ae7 = i27.mouseButtons.MIDDLE;
          break;
        case 2:
          ae7 = i27.mouseButtons.RIGHT;
          break;
        default:
          ae7 = -1;
      }
      switch (ae7) {
        case Br5.DOLLY:
          if (i27.enableZoom === false)
            return;
          re8(O20), n33 = r24.DOLLY;
          break;
        case Br5.ROTATE:
          if (O20.ctrlKey || O20.metaKey || O20.shiftKey) {
            if (i27.enablePan === false)
              return;
            $24(O20), n33 = r24.PAN;
          } else {
            if (i27.enableRotate === false)
              return;
            W8(O20), n33 = r24.ROTATE;
          }
          break;
        case Br5.PAN:
          if (O20.ctrlKey || O20.metaKey || O20.shiftKey) {
            if (i27.enableRotate === false)
              return;
            W8(O20), n33 = r24.ROTATE;
          } else {
            if (i27.enablePan === false)
              return;
            $24(O20), n33 = r24.PAN;
          }
          break;
        default:
          n33 = r24.NONE;
      }
      n33 !== r24.NONE && i27.dispatchEvent(no2);
    }
    function Tt9(O20) {
      switch (n33) {
        case r24.ROTATE:
          if (i27.enableRotate === false)
            return;
          ie8(O20);
          break;
        case r24.DOLLY:
          if (i27.enableZoom === false)
            return;
          le7(O20);
          break;
        case r24.PAN:
          if (i27.enablePan === false)
            return;
          fe7(O20);
          break;
      }
    }
    function $e6(O20) {
      i27.enabled === false || i27.enableZoom === false || n33 !== r24.NONE || (O20.preventDefault(), i27.dispatchEvent(no2), ue8(O20), i27.dispatchEvent(Wc2));
    }
    function ot13(O20) {
      i27.enabled === false || i27.enablePan === false || H15(O20);
    }
    function kt10(O20) {
      switch (pe8(O20), w29.length) {
        case 1:
          switch (i27.touches.ONE) {
            case Fr5.ROTATE:
              if (i27.enableRotate === false)
                return;
              q13(), n33 = r24.TOUCH_ROTATE;
              break;
            case Fr5.PAN:
              if (i27.enablePan === false)
                return;
              oe7(), n33 = r24.TOUCH_PAN;
              break;
            default:
              n33 = r24.NONE;
          }
          break;
        case 2:
          switch (i27.touches.TWO) {
            case Fr5.DOLLY_PAN:
              if (i27.enableZoom === false && i27.enablePan === false)
                return;
              F17(), n33 = r24.TOUCH_DOLLY_PAN;
              break;
            case Fr5.DOLLY_ROTATE:
              if (i27.enableZoom === false && i27.enableRotate === false)
                return;
              ye7(), n33 = r24.TOUCH_DOLLY_ROTATE;
              break;
            default:
              n33 = r24.NONE;
          }
          break;
        default:
          n33 = r24.NONE;
      }
      n33 !== r24.NONE && i27.dispatchEvent(no2);
    }
    function N19(O20) {
      switch (pe8(O20), n33) {
        case r24.TOUCH_ROTATE:
          if (i27.enableRotate === false)
            return;
          Le7(O20), i27.update();
          break;
        case r24.TOUCH_PAN:
          if (i27.enablePan === false)
            return;
          me9(O20), i27.update();
          break;
        case r24.TOUCH_DOLLY_PAN:
          if (i27.enableZoom === false && i27.enablePan === false)
            return;
          tt10(O20), i27.update();
          break;
        case r24.TOUCH_DOLLY_ROTATE:
          if (i27.enableZoom === false && i27.enableRotate === false)
            return;
          Pe6(O20), i27.update();
          break;
        default:
          n33 = r24.NONE;
      }
    }
    function L11(O20) {
      i27.enabled !== false && O20.preventDefault();
    }
    function Q11(O20) {
      w29.push(O20);
    }
    function de9(O20) {
      delete I16[O20.pointerId];
      for (let ae7 = 0; ae7 < w29.length; ae7++)
        if (w29[ae7].pointerId == O20.pointerId) {
          w29.splice(ae7, 1);
          return;
        }
    }
    function pe8(O20) {
      let ae7 = I16[O20.pointerId];
      ae7 === void 0 && (ae7 = new We7(), I16[O20.pointerId] = ae7), ae7.set(O20.pageX, O20.pageY);
    }
    function _e7(O20) {
      const ae7 = O20.pointerId === w29[0].pointerId ? w29[1] : w29[0];
      return I16[ae7.pointerId];
    }
    i27.domElement.addEventListener("contextmenu", L11), i27.domElement.addEventListener("pointerdown", je7), i27.domElement.addEventListener("pointercancel", vt8), i27.domElement.addEventListener("wheel", $e6, { passive: false }), this.update();
  }
};
var Tr5 = class _Tr {
  static createButton(e11) {
    const t19 = document.createElement("button");
    function i27() {
      let l25 = null;
      async function c27(u35) {
        u35.addEventListener("end", h26), await e11.xr.setSession(u35), t19.textContent = "EXIT VR", l25 = u35;
      }
      function h26() {
        l25.removeEventListener("end", h26), t19.textContent = "ENTER VR", l25 = null;
      }
      t19.style.display = "", t19.style.cursor = "pointer", t19.style.left = "calc(50% - 50px)", t19.style.width = "100px", t19.textContent = "ENTER VR", t19.onmouseenter = function() {
        t19.style.opacity = "1.0";
      }, t19.onmouseleave = function() {
        t19.style.opacity = "0.5";
      }, t19.onclick = function() {
        if (l25 === null) {
          const u35 = { optionalFeatures: ["local-floor", "bounded-floor", "hand-tracking", "layers"] };
          navigator.xr.requestSession("immersive-vr", u35).then(c27);
        } else
          l25.end();
      };
    }
    function r24() {
      t19.style.display = "", t19.style.cursor = "auto", t19.style.left = "calc(50% - 75px)", t19.style.width = "150px", t19.onmouseenter = null, t19.onmouseleave = null, t19.onclick = null;
    }
    function n33() {
      r24(), t19.textContent = "VR NOT SUPPORTED";
    }
    function a22(l25) {
      r24(), console.warn("Exception when trying to call xr.isSessionSupported", l25), t19.textContent = "VR NOT ALLOWED";
    }
    function o12(l25) {
      l25.style.position = "absolute", l25.style.bottom = "20px", l25.style.padding = "12px 6px", l25.style.border = "1px solid #fff", l25.style.borderRadius = "4px", l25.style.background = "rgba(0,0,0,0.1)", l25.style.color = "#fff", l25.style.font = "normal 13px sans-serif", l25.style.textAlign = "center", l25.style.opacity = "0.5", l25.style.outline = "none", l25.style.zIndex = "999";
    }
    if ("xr" in navigator)
      return t19.id = "VRButton", t19.style.display = "none", o12(t19), navigator.xr.isSessionSupported("immersive-vr").then(function(l25) {
        l25 ? i27() : n33(), l25 && _Tr.xrSessionIsGranted && t19.click();
      }).catch(a22), t19;
    {
      const l25 = document.createElement("a");
      return window.isSecureContext === false ? (l25.href = document.location.href.replace(/^http:/, "https:"), l25.innerHTML = "WEBXR NEEDS HTTPS") : (l25.href = "https://immersiveweb.dev/", l25.innerHTML = "WEBXR NOT AVAILABLE"), l25.style.left = "calc(50% - 90px)", l25.style.width = "180px", l25.style.textDecoration = "none", o12(l25), l25;
    }
  }
  static registerSessionGrantedListener() {
    if ("xr" in navigator) {
      if (/WebXRViewer\//i.test(navigator.userAgent))
        return;
      navigator.xr.addEventListener("sessiongranted", () => {
        _Tr.xrSessionIsGranted = true;
      });
    }
  }
};
Tr5.xrSessionIsGranted = false;
Tr5.registerSessionGrantedListener();
function yr4(s18) {
  const e11 = new jt8();
  return s18.forEach((t19) => {
    const i27 = new k18(0, 0, 0);
    t19.axis === "x" && i27.setX(1), t19.axis === "y" && i27.setY(1), t19.axis === "z" && i27.setZ(1);
    const r24 = t19.degrees * Math.PI / 180;
    e11.premultiply(new jt8().setFromAxisAngle(i27, r24));
  }), e11;
}
function Kn5(s18) {
  const [e11, t19, i27, r24] = yr4(s18);
  return [r24, e11, t19, i27];
}
function pa2(s18) {
  return new jt8(s18[1], s18[2], s18[3], s18[0]);
}
function Hh2(s18) {
  if (s18.length === 3) {
    const [e11, t19, i27] = s18;
    return {
      translation: [e11, t19, 0],
      rotation: Kn5([{ axis: "z", degrees: i27 }])
    };
  } else if (s18.length === 4) {
    const [e11, t19, i27, r24] = s18;
    return {
      translation: [e11, t19, i27],
      rotation: Kn5([{ axis: "z", degrees: r24 }])
    };
  } else if (s18.length === 6) {
    const [e11, t19, i27, r24, n33, a22] = s18;
    return {
      translation: [e11, t19, i27],
      rotation: Kn5([
        { axis: "x", degrees: r24 },
        { axis: "y", degrees: n33 },
        { axis: "z", degrees: a22 }
      ])
    };
  } else if (s18.length === 7) {
    const e11 = s18.slice(0, 3), t19 = s18.slice(3, 7);
    return { translation: e11, rotation: t19 };
  }
  return Xo2();
}
function Xo2() {
  return {
    translation: [0, 0, 0],
    rotation: [0, 0, 0, 0]
  };
}
var A_2 = [
  {
    game: "Reefscape",
    src: "/3d-models/Field3d_2025.glb",
    rotations: [{ axis: "x", degrees: 90 }],
    size: [57.57291667, 26.4167],
    unit: "foot"
  },
  {
    game: "Crescendo",
    src: "/3d-models/Field3d_2024.glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 180 }
    ],
    size: [54.2708333, 26.9375],
    unit: "foot"
  },
  {
    game: "Charged Up",
    src: "/3d-models/Field3d_2023.glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 180 }
    ],
    size: [54.27083, 26.2916],
    unit: "foot"
  },
  {
    game: "Rapid React",
    src: "/3d-models/Field3d_2022.glb",
    rotations: [{ axis: "x", degrees: 90 }],
    size: [54, 27],
    unit: "foot"
  },
  {
    game: "Infinite Recharge",
    src: "/3d-models/Field3d_2021.glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 90 }
    ],
    size: [52.4375, 26.9375],
    unit: "foot"
  },
  {
    game: "Evergreen",
    src: "/3d-models/Field3d_Evergreen.glb",
    rotations: [{ axis: "x", degrees: 90 }],
    size: [54, 27],
    unit: "foot"
  }
];
var Vh2 = [
  {
    name: "KitBot",
    src: "/3d-models/Robot_KitBot.glb",
    rotations: [{ axis: "z", degrees: 90 }],
    position: [0.12, 3.15, 0]
  },
  {
    name: "Duck Bot",
    src: "/3d-models/Robot_Duck Bot.glb",
    rotations: [{ axis: "z", degrees: 90 }],
    position: [0, 0, 0]
  },
  {
    name: "Crab Bot",
    src: "/3d-models/Robot_Crab Bot.glb",
    rotations: [
      {
        axis: "z",
        degrees: 180
      }
    ],
    position: [0, 0, 0.045]
  },
  {
    name: "Bot-Bot Awakens (6328)",
    src: "/3d-models/Robot_Bot-Bot Awakens (6328).glb",
    rotations: [
      { axis: "z", degrees: 90 },
      { axis: "y", degrees: 90 }
    ],
    position: [0, 0, 0]
  },
  {
    name: "Bot-Bot Strikes Back (6328)",
    src: "/3d-models/Robot_Bot-Bot Strikes Back (6328).glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 90 }
    ],
    position: [0.05, 0, 0.06]
  },
  {
    name: "REV 2023 Starter Bot",
    src: "/3d-models/Robot_REV 2023 Starter Bot.glb",
    rotations: [
      {
        axis: "x",
        degrees: 90
      },
      {
        axis: "z",
        degrees: 90
      }
    ],
    position: [0, 0, 0],
    components: [
      {
        name: "0",
        src: "/3d-models/Robot_REV 2023 Starter Bot_0.glb",
        rotations: [
          {
            axis: "x",
            degrees: 90
          },
          {
            axis: "z",
            degrees: 90
          },
          {
            axis: "y",
            degrees: 211
          }
        ],
        position: [0.645, 0, 0.48]
      },
      {
        name: "1",
        src: "/3d-models/Robot_REV 2023 Starter Bot_1.glb",
        rotations: [
          {
            axis: "x",
            degrees: 90
          },
          {
            axis: "z",
            degrees: 90
          }
        ],
        position: [0.305, 0, -0.37]
      }
    ]
  }
];
var qo2 = [
  {
    name: "R2D2",
    content: `
    <robot name="flexible">
      <link name="base_link">
        <visual>
          <geometry>
            <cylinder length="0.6" radius="0.2"/>
          </geometry>
          <material name="blue">
            <color rgba="0 0 .8 1"/>
          </material>
        </visual>
      </link>
    
      <link name="right_leg">
        <visual>
          <geometry>
            <box size="0.6 .2 .1"/>
          </geometry>
          <origin rpy="0 1.57075 0" xyz="0 0 -0.3"/>
          <material name="white">
            <color rgba="1 1 1 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="base_to_right_leg" type="fixed">
        <parent link="base_link"/>
        <child link="right_leg"/>
        <origin xyz="0.22 0 .25"/>
      </joint>
    
      <link name="right_base">
        <visual>
          <geometry>
            <box size=".1 0.4 .1"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="right_base_joint" type="fixed">
        <parent link="right_leg"/>
        <child link="right_base"/>
        <origin xyz="0 0 -0.6"/>
      </joint>
    
      <link name="right_front_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black">
            <color rgba="0 0 0 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="right_front_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="right_base"/>
        <child link="right_front_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="right_back_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="right_back_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="right_base"/>
        <child link="right_back_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 -0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="left_leg">
        <visual>
          <geometry>
            <box size="0.6 .2 .1"/>
          </geometry>
          <origin rpy="0 1.57075 0" xyz="0 0 -0.3"/>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="base_to_left_leg" type="fixed">
        <parent link="base_link"/>
        <child link="left_leg"/>
        <origin xyz="-0.22 0 .25"/>
      </joint>
    
      <link name="left_base">
        <visual>
          <geometry>
            <box size=".1 0.4 .1"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="left_base_joint" type="fixed">
        <parent link="left_leg"/>
        <child link="left_base"/>
        <origin xyz="0 0 -0.6"/>
      </joint>
    
      <link name="left_front_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="left_front_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="left_base"/>
        <child link="left_front_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="left_back_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="left_back_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="left_base"/>
        <child link="left_back_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 -0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
      <joint name="gripper_extension" type="prismatic">
        <parent link="base_link"/>
        <child link="gripper_pole"/>
        <limit effort="1000.0" lower="-0.38" upper="0" velocity="0.5"/>
        <origin rpy="0 0 1.57075" xyz="0 0.19 .2"/>
      </joint>
    
      <link name="gripper_pole">
        <visual>
          <geometry>
            <cylinder length="0.2" radius=".01"/>
          </geometry>
          <origin rpy="0 1.57075 0 " xyz="0.1 0 0"/>
          <material name="Gray">
            <color rgba=".7 .7 .7 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="left_gripper_joint" type="revolute">
        <axis xyz="0 0 1"/>
        <limit effort="1000.0" lower="0.0" upper="0.548" velocity="0.5"/>
        <origin rpy="0 0 0" xyz="0.2 0.01 0"/>
        <parent link="gripper_pole"/>
        <child link="left_gripper"/>
      </joint>
    
      <link name="left_gripper">
        <visual>
          <origin rpy="0.0 0 0" xyz="0 0 0"/>
          <geometry>
            <box size="0.1 0.02 0.02"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="left_tip_joint" type="fixed">
        <parent link="left_gripper"/>
        <child link="left_tip"/>
      </joint>
    
      <link name="left_tip">
        <visual>
          <origin rpy="0.0 0 0" xyz="0.09137 0.00495 0"/>
          <geometry>
            <mesh filename="package://pr2_description/meshes/gripper_v0/l_finger_tip.dae"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="right_gripper_joint" type="revolute">
        <axis xyz="0 0 -1"/>
        <limit effort="1000.0" lower="0.0" upper="0.548" velocity="0.5"/>
        <origin rpy="0 0 0" xyz="0.2 -0.01 0"/>
        <parent link="gripper_pole"/>
        <child link="right_gripper"/>
      </joint>
    
      <link name="right_gripper">
        <visual>
          <origin rpy="-3.1415 0 0" xyz="0 0 0"/>
          <geometry>
             <box size="0.1 0.02 0.02"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="right_tip_joint" type="fixed">
        <parent link="right_gripper"/>
        <child link="right_tip"/>
      </joint>
    
      <link name="right_tip">
        <visual>
          <origin rpy="-3.1415 0 0" xyz="0.09137 0.00495 0"/>
          <geometry>
            <mesh filename="package://pr2_description/meshes/gripper_v0/l_finger_tip.dae"/>
          </geometry>
        </visual>
      </link>
    
      <link name="head">
        <visual>
          <geometry>
            <sphere radius="0.2"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="head_swivel" type="continuous">
        <parent link="base_link"/>
        <child link="head"/>
        <axis xyz="0 0 1"/>
        <origin xyz="0 0 0.3"/>
      </joint>
    
      <link name="box">
        <visual>
          <geometry>
            <box size=".08 .08 .08"/>
          </geometry>
          <material name="blue"/>
        </visual>
      </link>
    
      <joint name="tobox" type="fixed">
        <parent link="head"/>
        <child link="box"/>
        <origin xyz="0 0.1414 0.1414"/>
      </joint>
    
    </robot>
    
    `,
    rotations: [{ axis: "z", degrees: -90 }],
    position: [0, 0, 0.5]
  },
  {
    name: "PI Robot",
    content: `
    <robot name="pi_robot">

      <!-- * * * Link Definitions * * * -->

      <link name="base_link">
        <visual>
            <origin xyz="0 0 0.0425" rpy="0 0 0"/>
          <geometry>
            <box size="0.32 0.26 0.085"/>
          </geometry>
          <material name="Cyan1">
                <color rgba="0 0.9 0.9 1.0"/>
            </material>
        </visual>	
      </link>

      <link name="base_laser">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.025" length="0.07"/>
          </geometry>
          <material name="Black1">
                <color rgba="0.2 0.2 0.2 1.0"/>
            </material>
        </visual>	
      </link>

      <link name="cpu_link">
        <visual>
            <origin xyz="0 0 0.035" rpy="0 0 0"/>
          <geometry>
            <box size="0.19 0.19 0.07"/>
          </geometry>
          <material name="Cyan2">
                <color rgba="0 0.7 0.7 1.0"/>
            </material>
        </visual>	
      </link>

        <link name="upper_base_link">
        <visual>
          <origin xyz="0 0 0.05" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.085" length="0.10"/>
          </geometry>
            <material name="Cyan3">
            <color rgba="0 0.5 0.5 0"/>
          </material>
        </visual>
      </link>

        <link name="torso_link">
        <visual>
          <origin xyz="0 0 0.12" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.05" length="0.24"/>
          </geometry>
            <material name="Yellow2">
            <color rgba="0.8 0.8 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_pan_link">
        <visual>
          <origin xyz="0 0 0.0225" rpy="0 0 0"/>
          <geometry>
            <box size="0.05 0.045 0.045"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_tilt_link">
        <visual>
          <origin xyz="0 0 0.02" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.038 0.04"/>
          </geometry>
            <material name="Green2">
            <color rgba="0.1 0.8 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="neck_link">
        <visual>
          <origin xyz="0 0 0.021" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.042"/>
          </geometry>
            <material name="Green3">
            <color rgba="0.1 0.5 0.1 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_link">
        <visual>
          <origin xyz="0 0 0.025" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.07 0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <!--	
      <link name="eyes_link">
        <visual>
          <origin xyz="0 0 0.035" rpy="0 0 0" />
          <geometry>
            <box size="0.01 0.04 0.01" />
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>
      -->

      <link name="antenna_link">
        <visual>
          <origin xyz="0 0 0.035" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.002" length="0.05"/>
          </geometry>
            <material name="Grey3">
            <color rgba="0.8 0.8 0.8 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.025 0.015 0.05"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_shoulder_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.025 0.015 0.05"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_forward_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue1">
            <color rgba="0 0 0.9 1.0"/>
          </material>
        </visual>
      </link>
        
      <link name="right_shoulder_forward_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue1">
            <color rgba="0 0 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_up_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_shoulder_up_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_upper_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.05"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_upper_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.05"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_elbow_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 1.57"/>
          <geometry>
            <box size="0.035 0.035 0.05"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_elbow_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 1.57"/>
          <geometry>
            <box size="0.035 0.035 0.05"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_lower_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_lower_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_wrist_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_wrist_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_hand_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.01 0.06"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.7 0.7 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_hand_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.01 0.06"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <!-- * * * Joint Definitions * * * -->

      <joint name="cpu_joint" type="fixed">
          <parent link="base_link"/>
          <child link="cpu_link"/>
          <origin xyz="0.025 0 0.085" rpy="0 0 0"/>
      </joint>

      <joint name="base_laser_joint" type="fixed">
          <parent link="base_link"/>
          <child link="base_laser"/>
          <origin xyz="0.18 0 0.07" rpy="0 0 0"/>
      </joint>

      <joint name="upper_base_joint" type="fixed">
          <parent link="cpu_link"/>
          <child link="upper_base_link"/>
          <origin xyz="0 0 0.07" rpy="0 0 0"/>
      </joint>

      <joint name="torso_joint" type="revolute">
          <parent link="upper_base_link"/>
          <child link="torso_link"/>
          <origin xyz="0 0 0.10" rpy="0 0 0"/>
          <axis xyz="0 0 1"/>
          <limit lower="-3.1416" upper="3.1416" effort="10" velocity="3"/>
        </joint>

      <joint name="head_pan_servo" type="fixed">
          <parent link="torso_link"/>
          <child link="head_pan_link"/>
          <origin xyz="0 0 0.225" rpy="0 0 0"/>
      </joint>

      <joint name="head_pan_joint" type="revolute">
          <parent link="head_pan_link"/>
          <child link="head_tilt_link"/>
          <origin xyz="0 0 0.045" rpy="0 0 0"/>
          <axis xyz="0 0 1"/>
          <limit lower="-3.1416" upper="3.1416" effort="10" velocity="3"/>
        </joint>
        
      <joint name="head_tilt_joint" type="revolute">
          <parent link="head_tilt_link"/>
          <child link="neck_link"/>
          <origin xyz="0 0 0.04" rpy="0 0 0"/>
          <axis xyz="0 1 0"/>
          <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
        </joint>
        
      <joint name="neck_joint" type="fixed">
          <parent link="neck_link"/>
          <child link="head_link"/>
          <origin xyz="0.05 0 0.015" rpy="0 0 0"/>
      </joint>
      <!--	
      <joint name="eyes_joint" type="fixed">
          <parent link="head_link" />
          <child link="eyes_link" />
          <origin xyz="0.02 0 0.03" rpy="0 0 0" />
      </joint>
      -->

      <joint name="antenna_joint" type="fixed">
          <parent link="head_link"/>
          <child link="antenna_link"/>
          <origin xyz="0.0 -0.025 0.065" rpy="0 0 0"/>
      </joint>

      <joint name="left_shoulder_joint" type="fixed">
          <parent link="torso_link"/>
          <child link="left_shoulder_link"/>
          <origin xyz="0 0.055 0.165" rpy="0 0 0"/>
      </joint>

      <joint name="right_shoulder_joint" type="fixed">
          <parent link="torso_link"/>
          <child link="right_shoulder_link"/>
          <origin xyz="0 -0.055 0.165" rpy="0 0 0"/>
      </joint>

      <joint name="left_shoulder_forward_joint" type="revolute">
          <parent link="left_shoulder_link"/>
          <child link="left_shoulder_forward_link"/>
          <origin xyz="0 0.025 0" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="right_shoulder_forward_joint" type="revolute">
          <parent link="right_shoulder_link"/>
          <child link="right_shoulder_forward_link"/>
          <origin xyz="0 -0.025 0" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="left_shoulder_up_joint" type="revolute">
          <parent link="left_shoulder_forward_link"/>
          <child link="left_shoulder_up_link"/>
          <origin xyz="0 0.04 -0.01" rpy="0 -0.707 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 1 0"/>
      </joint>

      <joint name="right_shoulder_up_joint" type="revolute">
          <parent link="right_shoulder_forward_link"/>
          <child link="right_shoulder_up_link"/>
          <origin xyz="0 -0.04 -0.01" rpy="0 -0.707 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 1 0"/>
      </joint>

      <joint name="left_upper_arm_joint" type="fixed">
          <parent link="left_shoulder_up_link"/>
          <child link="left_upper_arm_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
      </joint>

      <joint name="right_upper_arm_joint" type="fixed">
          <parent link="right_shoulder_up_link"/>
          <child link="right_upper_arm_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
      </joint>

      <joint name="left_elbow_joint" type="revolute">
          <parent link="left_upper_arm_link"/>
          <child link="left_elbow_link"/>
          <origin xyz="-0.005 0 -0.05" rpy="0 0 0"/>
            <limit lower="-3.146" upper="3.146" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="right_elbow_joint" type="revolute">
          <parent link="right_upper_arm_link"/>
          <child link="right_elbow_link"/>
          <origin xyz="-0.005 0 -0.05" rpy="0 0 0"/>
            <limit lower="-3.146" upper="3.146" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="left_lower_arm_joint" type="fixed">
          <parent link="left_elbow_link"/>
          <child link="left_lower_arm_link"/>
          <origin xyz="0 0 -0.08" rpy="0 0 0"/>
      </joint>

      <joint name="right_lower_arm_joint" type="fixed">
          <parent link="right_elbow_link"/>
          <child link="right_lower_arm_link"/>
          <origin xyz="0 0 -0.08" rpy="0 0 0"/>
      </joint>

      <joint name="left_wrist_joint" type="revolute">
          <parent link="left_lower_arm_link"/>
          <child link="left_wrist_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="1 0 0"/>
      </joint>

      <joint name="right_wrist_joint" type="revolute">
          <parent link="right_lower_arm_link"/>
          <child link="right_wrist_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="1 0 0"/>
      </joint>

      <joint name="left_hand_joint" type="fixed">
          <parent link="left_wrist_link"/>
          <child link="left_hand_link"/>
          <origin xyz="0 0 -0.055" rpy="0 0 0"/>
      </joint>

      <joint name="right_hand_joint" type="fixed">
          <parent link="right_wrist_link"/>
          <child link="right_hand_link"/>
          <origin xyz="0 0 -0.055" rpy="0 0 0"/>
      </joint>

      </robot>

    `,
    rotations: [],
    position: [0, 0, 0]
  }
];
var Yn4;
var Ks2;
var $s2;
var cn2;
var L_2 = class {
  constructor(e11, t19, i27) {
    Ht7(this, Yn4), Ht7(this, Ks2), Ht7(this, $s2), Ht7(this, cn2, new Lt5()), ei6(this, Yn4, e11), ei6(this, Ks2, t19), ei6(this, $s2, i27), this.create();
  }
  create() {
    var e11, t19;
    const i27 = ft11(this, Yn4).getFieldGroup();
    i27.remove(ft11(this, cn2)), (e11 = ft11(this, $s2)) == null || e11.call(this, this);
    const r24 = new Lt5();
    ei6(this, cn2, r24), i27.add(ft11(this, cn2)), (t19 = ft11(this, Ks2)) == null || t19.call(this, this);
  }
  getGroup() {
    return ft11(this, cn2);
  }
  getField3d() {
    return ft11(this, Yn4);
  }
};
Yn4 = /* @__PURE__ */ new WeakMap(), Ks2 = /* @__PURE__ */ new WeakMap(), $s2 = /* @__PURE__ */ new WeakMap(), cn2 = /* @__PURE__ */ new WeakMap();
var An5 = (s18, e11) => `${s18.replace(/\/$/, "")}/${e11.replace(/^\//, "")}`;
function Gh2(s18) {
  const e11 = s18.lastIndexOf("/");
  return e11 < 0 ? "" : s18.substring(0, e11);
}
var C_2 = Object.defineProperty;
var Rr5 = (s18, e11, t19, i27) => {
  for (var r24 = void 0, n33 = s18.length - 1, a22; n33 >= 0; n33--)
    (a22 = s18[n33]) && (r24 = a22(e11, t19, r24) || r24);
  return r24 && C_2(e11, t19, r24), r24;
};
var nr5 = class So extends x {
  constructor() {
    super(...arguments), this.objectConfigs = Vh2, this.name = this.objectConfigs[0].name, this.pose = [0, 0, 0], this._translation = [0, 0, 0], this._rotation = [0, 0, 0, 0], this.loader = new jo2(), this.group = new Lt5();
  }
  getObjectConfig() {
    return this.objectConfigs.find(({ name: e11 }) => e11 === this.name) ?? this.objectConfigs[0];
  }
  getField() {
    const e11 = this.closest("frc-field3d");
    if (e11)
      return e11;
  }
  static adjustMaterials(e11) {
    e11.traverse((t19) => {
      const i27 = t19;
      if (i27.isMesh && i27.material instanceof as3) {
        const r24 = i27.material;
        r24.metalness = 0, r24.roughness = 1;
      }
    });
  }
  static updatePose(e11, t19) {
    const [i27, r24, n33] = t19.translation;
    e11.position.set(i27, r24, n33), e11.rotation.setFromQuaternion(pa2(t19.rotation));
  }
  loadRobotModel() {
    const e11 = this.getField(), t19 = this.getObjectConfig();
    if (!e11)
      return;
    const i27 = e11.getFieldGroup();
    i27.remove(this.group), this.object && this.group.remove(this.object);
    const r24 = t19.components ?? [], n33 = [t19.src].concat(
      r24.map(({ src: l25 }) => l25)
    ).map(
      (l25) => new Promise((c27) => {
        this.loader.load(
          An5(e11.assetPathPrefix ?? "", l25),
          (h26) => c27(h26)
        );
      })
    ), a22 = new Lt5();
    this.group = a22, i27.add(this.group);
    const o12 = new Lt5();
    this.object = o12, a22.add(o12), o12.rotation.setFromQuaternion(
      yr4(t19.rotations)
    ), o12.position.set(...t19.position), Promise.all(n33).then((l25) => {
      l25.forEach((c27) => {
        So.adjustMaterials(c27.scene), o12.add(c27.scene);
      });
    });
  }
  firstUpdated() {
    this.updateObjectConfigs(), this.renderObject();
  }
  updated(e11) {
    if (e11.has("name") && this.loadRobotModel(), e11.has("translation") || e11.has("rotation") || e11.has("pose"))
      if (this.translation || this.rotation)
        this._translation = this.translation ?? [0, 0, 0], this._rotation = this.rotation ?? [0, 0, 0, 0];
      else if (this.pose.length >= 7)
        this._translation = this.pose.slice(0, 3), this._rotation = this.pose.slice(3, 7);
      else {
        const [t19 = 0, i27 = 0, r24 = 0] = this.pose;
        this._translation = [t19, i27], this._rotation = r24;
      }
  }
  updateObjectConfigs() {
    const e11 = this.getField(), t19 = e11 == null ? void 0 : e11.objectConfigs;
    t19 != null && t19.length && t19 !== this.objectConfigs && (this.objectConfigs = t19, this.objectConfigs.some(
      (i27) => i27.name === this.name
    ) || (this.name = this.objectConfigs[0].name));
  }
  renderObject() {
    this.group && So.updatePose(this.group, {
      translation: this._translation.length === 2 ? [...this._translation, 0] : this._translation,
      rotation: typeof this._rotation == "number" ? Kn5([{ axis: "z", degrees: this._rotation }]) : this._rotation
    }), requestAnimationFrame(() => {
      this.renderObject();
    });
  }
};
Rr5([
  n2()
], nr5.prototype, "objectConfigs");
Rr5([
  Rt({ type: String })
], nr5.prototype, "name");
Rr5([
  Rt({ type: Array })
], nr5.prototype, "pose");
Rr5([
  Rt({ type: Array })
], nr5.prototype, "translation");
Rr5([
  Rt({ type: Array })
], nr5.prototype, "rotation");
Rr5([
  n2()
], nr5.prototype, "_translation");
Rr5([
  n2()
], nr5.prototype, "_rotation");
var Wh2 = nr5;
customElements.get("frc-field3d-object") || customElements.define("frc-field3d-object", Wh2);
var R_2 = class extends rr5 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, i27, r24) {
    const n33 = this, a22 = new ls3(this.manager);
    a22.setPath(this.path), a22.setResponseType("arraybuffer"), a22.setRequestHeader(this.requestHeader), a22.setWithCredentials(this.withCredentials), a22.load(e11, function(o12) {
      try {
        t19(n33.parse(o12));
      } catch (l25) {
        r24 ? r24(l25) : console.error(l25), n33.manager.itemError(e11);
      }
    }, i27, r24);
  }
  parse(e11) {
    function t19(c27) {
      const h26 = new DataView(c27), u35 = 32 / 8 * 3 + 32 / 8 * 3 * 3 + 16 / 8, d34 = h26.getUint32(80, true);
      if (80 + 32 / 8 + d34 * u35 === h26.byteLength)
        return true;
      const m33 = [115, 111, 108, 105, 100];
      for (let _19 = 0; _19 < 5; _19++)
        if (i27(m33, h26, _19))
          return false;
      return true;
    }
    function i27(c27, h26, u35) {
      for (let d34 = 0, m33 = c27.length; d34 < m33; d34++)
        if (c27[d34] !== h26.getUint8(u35 + d34))
          return false;
      return true;
    }
    function r24(c27) {
      const h26 = new DataView(c27), u35 = h26.getUint32(80, true);
      let d34, m33, _19, y33 = false, f39, p26, A17, M12, E24;
      for (let C19 = 0; C19 < 70; C19++)
        h26.getUint32(C19, false) == 1129270351 && h26.getUint8(C19 + 4) == 82 && h26.getUint8(C19 + 5) == 61 && (y33 = true, f39 = new Float32Array(u35 * 3 * 3), p26 = h26.getUint8(C19 + 6) / 255, A17 = h26.getUint8(C19 + 7) / 255, M12 = h26.getUint8(C19 + 8) / 255, E24 = h26.getUint8(C19 + 9) / 255);
      const w29 = 84, I16 = 12 * 4 + 2, D17 = new Xt6(), P19 = new Float32Array(u35 * 3 * 3), x34 = new Float32Array(u35 * 3 * 3);
      for (let C19 = 0; C19 < u35; C19++) {
        const G15 = w29 + C19 * I16, z19 = h26.getFloat32(G15, true), U18 = h26.getFloat32(G15 + 4, true), V14 = h26.getFloat32(G15 + 8, true);
        if (y33) {
          const j18 = h26.getUint16(G15 + 48, true);
          j18 & 32768 ? (d34 = p26, m33 = A17, _19 = M12) : (d34 = (j18 & 31) / 31, m33 = (j18 >> 5 & 31) / 31, _19 = (j18 >> 10 & 31) / 31);
        }
        for (let j18 = 1; j18 <= 3; j18++) {
          const W8 = G15 + j18 * 12, re8 = C19 * 3 * 3 + (j18 - 1) * 3;
          P19[re8] = h26.getFloat32(W8, true), P19[re8 + 1] = h26.getFloat32(W8 + 4, true), P19[re8 + 2] = h26.getFloat32(W8 + 8, true), x34[re8] = z19, x34[re8 + 1] = U18, x34[re8 + 2] = V14, y33 && (f39[re8] = d34, f39[re8 + 1] = m33, f39[re8 + 2] = _19);
        }
      }
      return D17.setAttribute("position", new Ft6(P19, 3)), D17.setAttribute("normal", new Ft6(x34, 3)), y33 && (D17.setAttribute("color", new Ft6(f39, 3)), D17.hasColors = true, D17.alpha = E24), D17;
    }
    function n33(c27) {
      const h26 = new Xt6(), u35 = /solid([\s\S]*?)endsolid/g, d34 = /facet([\s\S]*?)endfacet/g;
      let m33 = 0;
      const _19 = /[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source, y33 = new RegExp("vertex" + _19 + _19 + _19, "g"), f39 = new RegExp("normal" + _19 + _19 + _19, "g"), p26 = [], A17 = [], M12 = new k18();
      let E24, w29 = 0, I16 = 0, D17 = 0;
      for (; (E24 = u35.exec(c27)) !== null; ) {
        I16 = D17;
        const P19 = E24[0];
        for (; (E24 = d34.exec(P19)) !== null; ) {
          let G15 = 0, z19 = 0;
          const U18 = E24[0];
          for (; (E24 = f39.exec(U18)) !== null; )
            M12.x = parseFloat(E24[1]), M12.y = parseFloat(E24[2]), M12.z = parseFloat(E24[3]), z19++;
          for (; (E24 = y33.exec(U18)) !== null; )
            p26.push(parseFloat(E24[1]), parseFloat(E24[2]), parseFloat(E24[3])), A17.push(M12.x, M12.y, M12.z), G15++, D17++;
          z19 !== 1 && console.error("THREE.STLLoader: Something isn't right with the normal of face number " + m33), G15 !== 3 && console.error("THREE.STLLoader: Something isn't right with the vertices of face number " + m33), m33++;
        }
        const x34 = I16, C19 = D17 - I16;
        h26.addGroup(x34, C19, w29), w29++;
      }
      return h26.setAttribute("position", new xt6(p26, 3)), h26.setAttribute("normal", new xt6(A17, 3)), h26;
    }
    function a22(c27) {
      return typeof c27 != "string" ? new TextDecoder().decode(c27) : c27;
    }
    function o12(c27) {
      if (typeof c27 == "string") {
        const h26 = new Uint8Array(c27.length);
        for (let u35 = 0; u35 < c27.length; u35++)
          h26[u35] = c27.charCodeAt(u35) & 255;
        return h26.buffer || h26;
      } else
        return c27;
    }
    const l25 = o12(e11);
    return t19(l25) ? r24(l25) : n33(a22(e11));
  }
};
var jc2 = class extends k02 {
  constructor(e11) {
    super(e11);
  }
  parse(e11) {
    function t19(W8) {
      switch (W8.image_type) {
        case d34:
        case y33:
          (W8.colormap_length > 256 || W8.colormap_size !== 24 || W8.colormap_type !== 1) && console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");
          break;
        case m33:
        case _19:
        case f39:
        case p26:
          W8.colormap_type && console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");
          break;
        case u35:
          console.error("THREE.TGALoader: No data.");
        default:
          console.error('THREE.TGALoader: Invalid type "%s".', W8.image_type);
      }
      (W8.width <= 0 || W8.height <= 0) && console.error("THREE.TGALoader: Invalid image size."), W8.pixel_size !== 8 && W8.pixel_size !== 16 && W8.pixel_size !== 24 && W8.pixel_size !== 32 && console.error('THREE.TGALoader: Invalid pixel size "%s".', W8.pixel_size);
    }
    function i27(W8, re8, $24, ie8, le7) {
      let fe7, ue8;
      const H15 = $24.pixel_size >> 3, q13 = $24.width * $24.height * H15;
      if (re8 && (ue8 = le7.subarray(ie8, ie8 += $24.colormap_length * ($24.colormap_size >> 3))), W8) {
        fe7 = new Uint8Array(q13);
        let oe7, K13, F17, ye7 = 0;
        const Le7 = new Uint8Array(H15);
        for (; ye7 < q13; )
          if (oe7 = le7[ie8++], K13 = (oe7 & 127) + 1, oe7 & 128) {
            for (F17 = 0; F17 < H15; ++F17)
              Le7[F17] = le7[ie8++];
            for (F17 = 0; F17 < K13; ++F17)
              fe7.set(Le7, ye7 + F17 * H15);
            ye7 += H15 * K13;
          } else {
            for (K13 *= H15, F17 = 0; F17 < K13; ++F17)
              fe7[ye7 + F17] = le7[ie8++];
            ye7 += K13;
          }
      } else
        fe7 = le7.subarray(
          ie8,
          ie8 += re8 ? $24.width * $24.height : q13
        );
      return {
        pixel_data: fe7,
        palettes: ue8
      };
    }
    function r24(W8, re8, $24, ie8, le7, fe7, ue8, H15, q13) {
      const oe7 = q13;
      let K13, F17 = 0, ye7, Le7;
      const me9 = C19.width;
      for (Le7 = re8; Le7 !== ie8; Le7 += $24)
        for (ye7 = le7; ye7 !== ue8; ye7 += fe7, F17++)
          K13 = H15[F17], W8[(ye7 + me9 * Le7) * 4 + 3] = 255, W8[(ye7 + me9 * Le7) * 4 + 2] = oe7[K13 * 3 + 0], W8[(ye7 + me9 * Le7) * 4 + 1] = oe7[K13 * 3 + 1], W8[(ye7 + me9 * Le7) * 4 + 0] = oe7[K13 * 3 + 2];
      return W8;
    }
    function n33(W8, re8, $24, ie8, le7, fe7, ue8, H15) {
      let q13, oe7 = 0, K13, F17;
      const ye7 = C19.width;
      for (F17 = re8; F17 !== ie8; F17 += $24)
        for (K13 = le7; K13 !== ue8; K13 += fe7, oe7 += 2)
          q13 = H15[oe7 + 0] + (H15[oe7 + 1] << 8), W8[(K13 + ye7 * F17) * 4 + 0] = (q13 & 31744) >> 7, W8[(K13 + ye7 * F17) * 4 + 1] = (q13 & 992) >> 2, W8[(K13 + ye7 * F17) * 4 + 2] = (q13 & 31) << 3, W8[(K13 + ye7 * F17) * 4 + 3] = q13 & 32768 ? 0 : 255;
      return W8;
    }
    function a22(W8, re8, $24, ie8, le7, fe7, ue8, H15) {
      let q13 = 0, oe7, K13;
      const F17 = C19.width;
      for (K13 = re8; K13 !== ie8; K13 += $24)
        for (oe7 = le7; oe7 !== ue8; oe7 += fe7, q13 += 3)
          W8[(oe7 + F17 * K13) * 4 + 3] = 255, W8[(oe7 + F17 * K13) * 4 + 2] = H15[q13 + 0], W8[(oe7 + F17 * K13) * 4 + 1] = H15[q13 + 1], W8[(oe7 + F17 * K13) * 4 + 0] = H15[q13 + 2];
      return W8;
    }
    function o12(W8, re8, $24, ie8, le7, fe7, ue8, H15) {
      let q13 = 0, oe7, K13;
      const F17 = C19.width;
      for (K13 = re8; K13 !== ie8; K13 += $24)
        for (oe7 = le7; oe7 !== ue8; oe7 += fe7, q13 += 4)
          W8[(oe7 + F17 * K13) * 4 + 2] = H15[q13 + 0], W8[(oe7 + F17 * K13) * 4 + 1] = H15[q13 + 1], W8[(oe7 + F17 * K13) * 4 + 0] = H15[q13 + 2], W8[(oe7 + F17 * K13) * 4 + 3] = H15[q13 + 3];
      return W8;
    }
    function l25(W8, re8, $24, ie8, le7, fe7, ue8, H15) {
      let q13, oe7 = 0, K13, F17;
      const ye7 = C19.width;
      for (F17 = re8; F17 !== ie8; F17 += $24)
        for (K13 = le7; K13 !== ue8; K13 += fe7, oe7++)
          q13 = H15[oe7], W8[(K13 + ye7 * F17) * 4 + 0] = q13, W8[(K13 + ye7 * F17) * 4 + 1] = q13, W8[(K13 + ye7 * F17) * 4 + 2] = q13, W8[(K13 + ye7 * F17) * 4 + 3] = 255;
      return W8;
    }
    function c27(W8, re8, $24, ie8, le7, fe7, ue8, H15) {
      let q13 = 0, oe7, K13;
      const F17 = C19.width;
      for (K13 = re8; K13 !== ie8; K13 += $24)
        for (oe7 = le7; oe7 !== ue8; oe7 += fe7, q13 += 2)
          W8[(oe7 + F17 * K13) * 4 + 0] = H15[q13 + 0], W8[(oe7 + F17 * K13) * 4 + 1] = H15[q13 + 0], W8[(oe7 + F17 * K13) * 4 + 2] = H15[q13 + 0], W8[(oe7 + F17 * K13) * 4 + 3] = H15[q13 + 1];
      return W8;
    }
    function h26(W8, re8, $24, ie8, le7) {
      let fe7, ue8, H15, q13, oe7, K13;
      switch ((C19.flags & A17) >> M12) {
        default:
        case I16:
          fe7 = 0, H15 = 1, oe7 = re8, ue8 = 0, q13 = 1, K13 = $24;
          break;
        case E24:
          fe7 = 0, H15 = 1, oe7 = re8, ue8 = $24 - 1, q13 = -1, K13 = -1;
          break;
        case D17:
          fe7 = re8 - 1, H15 = -1, oe7 = -1, ue8 = 0, q13 = 1, K13 = $24;
          break;
        case w29:
          fe7 = re8 - 1, H15 = -1, oe7 = -1, ue8 = $24 - 1, q13 = -1, K13 = -1;
          break;
      }
      if (U18)
        switch (C19.pixel_size) {
          case 8:
            l25(W8, ue8, q13, K13, fe7, H15, oe7, ie8);
            break;
          case 16:
            c27(W8, ue8, q13, K13, fe7, H15, oe7, ie8);
            break;
          default:
            console.error("THREE.TGALoader: Format not supported.");
            break;
        }
      else
        switch (C19.pixel_size) {
          case 8:
            r24(W8, ue8, q13, K13, fe7, H15, oe7, ie8, le7);
            break;
          case 16:
            n33(W8, ue8, q13, K13, fe7, H15, oe7, ie8);
            break;
          case 24:
            a22(W8, ue8, q13, K13, fe7, H15, oe7, ie8);
            break;
          case 32:
            o12(W8, ue8, q13, K13, fe7, H15, oe7, ie8);
            break;
          default:
            console.error("THREE.TGALoader: Format not supported.");
            break;
        }
      return W8;
    }
    const u35 = 0, d34 = 1, m33 = 2, _19 = 3, y33 = 9, f39 = 10, p26 = 11, A17 = 48, M12 = 4, E24 = 0, w29 = 1, I16 = 2, D17 = 3;
    e11.length < 19 && console.error("THREE.TGALoader: Not enough data to contain header.");
    let P19 = 0;
    const x34 = new Uint8Array(e11), C19 = {
      id_length: x34[P19++],
      colormap_type: x34[P19++],
      image_type: x34[P19++],
      colormap_index: x34[P19++] | x34[P19++] << 8,
      colormap_length: x34[P19++] | x34[P19++] << 8,
      colormap_size: x34[P19++],
      origin: [
        x34[P19++] | x34[P19++] << 8,
        x34[P19++] | x34[P19++] << 8
      ],
      width: x34[P19++] | x34[P19++] << 8,
      height: x34[P19++] | x34[P19++] << 8,
      pixel_size: x34[P19++],
      flags: x34[P19++]
    };
    t19(C19), C19.id_length + P19 > e11.length && console.error("THREE.TGALoader: No data."), P19 += C19.id_length;
    let G15 = false, z19 = false, U18 = false;
    switch (C19.image_type) {
      case y33:
        G15 = true, z19 = true;
        break;
      case d34:
        z19 = true;
        break;
      case f39:
        G15 = true;
        break;
      case m33:
        break;
      case p26:
        G15 = true, U18 = true;
        break;
      case _19:
        U18 = true;
        break;
    }
    const V14 = new Uint8Array(C19.width * C19.height * 4), j18 = i27(G15, z19, C19, P19, x34);
    return h26(V14, C19.width, C19.height, j18.pixel_data, j18.palettes), {
      data: V14,
      width: C19.width,
      height: C19.height,
      flipY: true,
      generateMipmaps: true,
      minFilter: Hi3
    };
  }
};
var N_2 = class extends rr5 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, i27, r24) {
    const n33 = this, a22 = n33.path === "" ? is3.extractUrlBase(e11) : n33.path, o12 = new ls3(n33.manager);
    o12.setPath(n33.path), o12.setRequestHeader(n33.requestHeader), o12.setWithCredentials(n33.withCredentials), o12.load(e11, function(l25) {
      try {
        t19(n33.parse(l25, a22));
      } catch (c27) {
        r24 ? r24(c27) : console.error(c27), n33.manager.itemError(e11);
      }
    }, i27, r24);
  }
  parse(e11, t19) {
    function i27(v30, g31) {
      const S21 = [], b33 = v30.childNodes;
      for (let T20 = 0, J11 = b33.length; T20 < J11; T20++) {
        const se6 = b33[T20];
        se6.nodeName === g31 && S21.push(se6);
      }
      return S21;
    }
    function r24(v30) {
      if (v30.length === 0)
        return [];
      const g31 = v30.trim().split(/\s+/), S21 = new Array(g31.length);
      for (let b33 = 0, T20 = g31.length; b33 < T20; b33++)
        S21[b33] = g31[b33];
      return S21;
    }
    function n33(v30) {
      if (v30.length === 0)
        return [];
      const g31 = v30.trim().split(/\s+/), S21 = new Array(g31.length);
      for (let b33 = 0, T20 = g31.length; b33 < T20; b33++)
        S21[b33] = parseFloat(g31[b33]);
      return S21;
    }
    function a22(v30) {
      if (v30.length === 0)
        return [];
      const g31 = v30.trim().split(/\s+/), S21 = new Array(g31.length);
      for (let b33 = 0, T20 = g31.length; b33 < T20; b33++)
        S21[b33] = parseInt(g31[b33]);
      return S21;
    }
    function o12(v30) {
      return v30.substring(1);
    }
    function l25() {
      return "three_default_" + ru2++;
    }
    function c27(v30) {
      return Object.keys(v30).length === 0;
    }
    function h26(v30) {
      return {
        unit: u35(i27(v30, "unit")[0]),
        upAxis: d34(i27(v30, "up_axis")[0])
      };
    }
    function u35(v30) {
      return v30 !== void 0 && v30.hasAttribute("meter") === true ? parseFloat(v30.getAttribute("meter")) : 1;
    }
    function d34(v30) {
      return v30 !== void 0 ? v30.textContent : "Y_UP";
    }
    function m33(v30, g31, S21, b33) {
      const T20 = i27(v30, g31)[0];
      if (T20 !== void 0) {
        const J11 = i27(T20, S21);
        for (let se6 = 0; se6 < J11.length; se6++)
          b33(J11[se6]);
      }
    }
    function _19(v30, g31) {
      for (const S21 in v30) {
        const b33 = v30[S21];
        b33.build = g31(v30[S21]);
      }
    }
    function y33(v30, g31) {
      return v30.build !== void 0 || (v30.build = g31(v30)), v30.build;
    }
    function f39(v30) {
      const g31 = {
        sources: {},
        samplers: {},
        channels: {}
      };
      let S21 = false;
      for (let b33 = 0, T20 = v30.childNodes.length; b33 < T20; b33++) {
        const J11 = v30.childNodes[b33];
        if (J11.nodeType !== 1)
          continue;
        let se6;
        switch (J11.nodeName) {
          case "source":
            se6 = J11.getAttribute("id"), g31.sources[se6] = ce9(J11);
            break;
          case "sampler":
            se6 = J11.getAttribute("id"), g31.samplers[se6] = p26(J11);
            break;
          case "channel":
            se6 = J11.getAttribute("target"), g31.channels[se6] = A17(J11);
            break;
          case "animation":
            f39(J11), S21 = true;
            break;
          default:
            console.log(J11);
        }
      }
      S21 === false && (Oe5.animations[v30.getAttribute("id") || ln4.generateUUID()] = g31);
    }
    function p26(v30) {
      const g31 = {
        inputs: {}
      };
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "input":
              const J11 = o12(T20.getAttribute("source")), se6 = T20.getAttribute("semantic");
              g31.inputs[se6] = J11;
              break;
          }
      }
      return g31;
    }
    function A17(v30) {
      const g31 = {};
      let S21 = v30.getAttribute("target").split("/");
      const b33 = S21.shift();
      let T20 = S21.shift();
      const J11 = T20.indexOf("(") !== -1, se6 = T20.indexOf(".") !== -1;
      if (se6)
        S21 = T20.split("."), T20 = S21.shift(), g31.member = S21.shift();
      else if (J11) {
        const be7 = T20.split("(");
        T20 = be7.shift();
        for (let ge7 = 0; ge7 < be7.length; ge7++)
          be7[ge7] = parseInt(be7[ge7].replace(/\)/, ""));
        g31.indices = be7;
      }
      return g31.id = b33, g31.sid = T20, g31.arraySyntax = J11, g31.memberSyntax = se6, g31.sampler = o12(v30.getAttribute("source")), g31;
    }
    function M12(v30) {
      const g31 = [], S21 = v30.channels, b33 = v30.samplers, T20 = v30.sources;
      for (const J11 in S21)
        if (S21.hasOwnProperty(J11)) {
          const se6 = S21[J11], be7 = b33[se6.sampler], ge7 = be7.inputs.INPUT, Te7 = be7.inputs.OUTPUT, Ie7 = T20[ge7], he8 = T20[Te7], Ee5 = w29(se6, Ie7, he8);
          C19(Ee5, g31);
        }
      return g31;
    }
    function E24(v30) {
      return y33(Oe5.animations[v30], M12);
    }
    function w29(v30, g31, S21) {
      const b33 = Oe5.nodes[v30.id], T20 = At8(b33.id), J11 = b33.transforms[v30.sid], se6 = b33.matrix.clone().transpose();
      let be7, ge7, Te7, Ie7, he8, Ee5;
      const Ne7 = {};
      switch (J11) {
        case "matrix":
          for (Te7 = 0, Ie7 = g31.array.length; Te7 < Ie7; Te7++)
            if (be7 = g31.array[Te7], ge7 = Te7 * S21.stride, Ne7[be7] === void 0 && (Ne7[be7] = {}), v30.arraySyntax === true) {
              const ke7 = S21.array[ge7], pt11 = v30.indices[0] + 4 * v30.indices[1];
              Ne7[be7][pt11] = ke7;
            } else
              for (he8 = 0, Ee5 = S21.stride; he8 < Ee5; he8++)
                Ne7[be7][he8] = S21.array[ge7 + he8];
          break;
        case "translate":
          console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', J11);
          break;
        case "rotate":
          console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', J11);
          break;
        case "scale":
          console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', J11);
          break;
      }
      const Fe7 = I16(Ne7, se6);
      return {
        name: T20.uuid,
        keyframes: Fe7
      };
    }
    function I16(v30, g31) {
      const S21 = [];
      for (const T20 in v30)
        S21.push({ time: parseFloat(T20), value: v30[T20] });
      S21.sort(b33);
      for (let T20 = 0; T20 < 16; T20++)
        G15(S21, T20, g31.elements[T20]);
      return S21;
      function b33(T20, J11) {
        return T20.time - J11.time;
      }
    }
    const D17 = new k18(), P19 = new k18(), x34 = new jt8();
    function C19(v30, g31) {
      const S21 = v30.keyframes, b33 = v30.name, T20 = [], J11 = [], se6 = [], be7 = [];
      for (let ge7 = 0, Te7 = S21.length; ge7 < Te7; ge7++) {
        const Ie7 = S21[ge7], he8 = Ie7.time, Ee5 = Ie7.value;
        lt12.fromArray(Ee5).transpose(), lt12.decompose(D17, x34, P19), T20.push(he8), J11.push(D17.x, D17.y, D17.z), se6.push(x34.x, x34.y, x34.z, x34.w), be7.push(P19.x, P19.y, P19.z);
      }
      return J11.length > 0 && g31.push(new Sr5(b33 + ".position", T20, J11)), se6.length > 0 && g31.push(new ir5(b33 + ".quaternion", T20, se6)), be7.length > 0 && g31.push(new Sr5(b33 + ".scale", T20, be7)), g31;
    }
    function G15(v30, g31, S21) {
      let b33, T20 = true, J11, se6;
      for (J11 = 0, se6 = v30.length; J11 < se6; J11++)
        b33 = v30[J11], b33.value[g31] === void 0 ? b33.value[g31] = null : T20 = false;
      if (T20 === true)
        for (J11 = 0, se6 = v30.length; J11 < se6; J11++)
          b33 = v30[J11], b33.value[g31] = S21;
      else
        z19(v30, g31);
    }
    function z19(v30, g31) {
      let S21, b33;
      for (let T20 = 0, J11 = v30.length; T20 < J11; T20++) {
        const se6 = v30[T20];
        if (se6.value[g31] === null) {
          if (S21 = U18(v30, T20, g31), b33 = V14(v30, T20, g31), S21 === null) {
            se6.value[g31] = b33.value[g31];
            continue;
          }
          if (b33 === null) {
            se6.value[g31] = S21.value[g31];
            continue;
          }
          j18(se6, S21, b33, g31);
        }
      }
    }
    function U18(v30, g31, S21) {
      for (; g31 >= 0; ) {
        const b33 = v30[g31];
        if (b33.value[S21] !== null)
          return b33;
        g31--;
      }
      return null;
    }
    function V14(v30, g31, S21) {
      for (; g31 < v30.length; ) {
        const b33 = v30[g31];
        if (b33.value[S21] !== null)
          return b33;
        g31++;
      }
      return null;
    }
    function j18(v30, g31, S21, b33) {
      if (S21.time - g31.time === 0) {
        v30.value[b33] = g31.value[b33];
        return;
      }
      v30.value[b33] = (v30.time - g31.time) * (S21.value[b33] - g31.value[b33]) / (S21.time - g31.time) + g31.value[b33];
    }
    function W8(v30) {
      const g31 = {
        name: v30.getAttribute("id") || "default",
        start: parseFloat(v30.getAttribute("start") || 0),
        end: parseFloat(v30.getAttribute("end") || 0),
        animations: []
      };
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "instance_animation":
              g31.animations.push(o12(T20.getAttribute("url")));
              break;
          }
      }
      Oe5.clips[v30.getAttribute("id")] = g31;
    }
    function re8(v30) {
      const g31 = [], S21 = v30.name, b33 = v30.end - v30.start || -1, T20 = v30.animations;
      for (let J11 = 0, se6 = T20.length; J11 < se6; J11++) {
        const be7 = E24(T20[J11]);
        for (let ge7 = 0, Te7 = be7.length; ge7 < Te7; ge7++)
          g31.push(be7[ge7]);
      }
      return new bo(S21, b33, g31);
    }
    function $24(v30) {
      return y33(Oe5.clips[v30], re8);
    }
    function ie8(v30) {
      const g31 = {};
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "skin":
              g31.id = o12(T20.getAttribute("source")), g31.skin = le7(T20);
              break;
            case "morph":
              g31.id = o12(T20.getAttribute("source")), console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");
              break;
          }
      }
      Oe5.controllers[v30.getAttribute("id")] = g31;
    }
    function le7(v30) {
      const g31 = {
        sources: {}
      };
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "bind_shape_matrix":
              g31.bindShapeMatrix = n33(T20.textContent);
              break;
            case "source":
              const J11 = T20.getAttribute("id");
              g31.sources[J11] = ce9(T20);
              break;
            case "joints":
              g31.joints = fe7(T20);
              break;
            case "vertex_weights":
              g31.vertexWeights = ue8(T20);
              break;
          }
      }
      return g31;
    }
    function fe7(v30) {
      const g31 = {
        inputs: {}
      };
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "input":
              const J11 = T20.getAttribute("semantic"), se6 = o12(T20.getAttribute("source"));
              g31.inputs[J11] = se6;
              break;
          }
      }
      return g31;
    }
    function ue8(v30) {
      const g31 = {
        inputs: {}
      };
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "input":
              const J11 = T20.getAttribute("semantic"), se6 = o12(T20.getAttribute("source")), be7 = parseInt(T20.getAttribute("offset"));
              g31.inputs[J11] = { id: se6, offset: be7 };
              break;
            case "vcount":
              g31.vcount = a22(T20.textContent);
              break;
            case "v":
              g31.v = a22(T20.textContent);
              break;
          }
      }
      return g31;
    }
    function H15(v30) {
      const g31 = {
        id: v30.id
      }, S21 = Oe5.geometries[g31.id];
      return v30.skin !== void 0 && (g31.skin = q13(v30.skin), S21.sources.skinIndices = g31.skin.indices, S21.sources.skinWeights = g31.skin.weights), g31;
    }
    function q13(v30) {
      const g31 = {
        joints: [],
        // this must be an array to preserve the joint order
        indices: {
          array: [],
          stride: 4
        },
        weights: {
          array: [],
          stride: 4
        }
      }, S21 = v30.sources, b33 = v30.vertexWeights, T20 = b33.vcount, J11 = b33.v, se6 = b33.inputs.JOINT.offset, be7 = b33.inputs.WEIGHT.offset, ge7 = v30.sources[v30.joints.inputs.JOINT], Te7 = v30.sources[v30.joints.inputs.INV_BIND_MATRIX], Ie7 = S21[b33.inputs.WEIGHT.id].array;
      let he8 = 0, Ee5, Ne7, Fe7;
      for (Ee5 = 0, Fe7 = T20.length; Ee5 < Fe7; Ee5++) {
        const pt11 = T20[Ee5], ct11 = [];
        for (Ne7 = 0; Ne7 < pt11; Ne7++) {
          const st12 = J11[he8 + se6], ut11 = J11[he8 + be7], Ri5 = Ie7[ut11];
          ct11.push({ index: st12, weight: Ri5 }), he8 += 2;
        }
        for (ct11.sort(ke7), Ne7 = 0; Ne7 < 4; Ne7++) {
          const st12 = ct11[Ne7];
          st12 !== void 0 ? (g31.indices.array.push(st12.index), g31.weights.array.push(st12.weight)) : (g31.indices.array.push(0), g31.weights.array.push(0));
        }
      }
      for (v30.bindShapeMatrix ? g31.bindMatrix = new He6().fromArray(v30.bindShapeMatrix).transpose() : g31.bindMatrix = new He6().identity(), Ee5 = 0, Fe7 = ge7.array.length; Ee5 < Fe7; Ee5++) {
        const pt11 = ge7.array[Ee5], ct11 = new He6().fromArray(Te7.array, Ee5 * Te7.stride).transpose();
        g31.joints.push({ name: pt11, boneInverse: ct11 });
      }
      return g31;
      function ke7(pt11, ct11) {
        return ct11.weight - pt11.weight;
      }
    }
    function oe7(v30) {
      return y33(Oe5.controllers[v30], H15);
    }
    function K13(v30) {
      const g31 = {
        init_from: i27(v30, "init_from")[0].textContent
      };
      Oe5.images[v30.getAttribute("id")] = g31;
    }
    function F17(v30) {
      return v30.build !== void 0 ? v30.build : v30.init_from;
    }
    function ye7(v30) {
      const g31 = Oe5.images[v30];
      return g31 !== void 0 ? y33(g31, F17) : (console.warn("THREE.ColladaLoader: Couldn't find image with ID:", v30), null);
    }
    function Le7(v30) {
      const g31 = {};
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "profile_COMMON":
              g31.profile = me9(T20);
              break;
          }
      }
      Oe5.effects[v30.getAttribute("id")] = g31;
    }
    function me9(v30) {
      const g31 = {
        surfaces: {},
        samplers: {}
      };
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "newparam":
              De6(T20, g31);
              break;
            case "technique":
              g31.technique = je7(T20);
              break;
            case "extra":
              g31.extra = ot13(T20);
              break;
          }
      }
      return g31;
    }
    function De6(v30, g31) {
      const S21 = v30.getAttribute("sid");
      for (let b33 = 0, T20 = v30.childNodes.length; b33 < T20; b33++) {
        const J11 = v30.childNodes[b33];
        if (J11.nodeType === 1)
          switch (J11.nodeName) {
            case "surface":
              g31.surfaces[S21] = tt10(J11);
              break;
            case "sampler2D":
              g31.samplers[S21] = Pe6(J11);
              break;
          }
      }
    }
    function tt10(v30) {
      const g31 = {};
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "init_from":
              g31.init_from = T20.textContent;
              break;
          }
      }
      return g31;
    }
    function Pe6(v30) {
      const g31 = {};
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "source":
              g31.source = T20.textContent;
              break;
          }
      }
      return g31;
    }
    function je7(v30) {
      const g31 = {};
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "constant":
            case "lambert":
            case "blinn":
            case "phong":
              g31.type = T20.nodeName, g31.parameters = Mt10(T20);
              break;
            case "extra":
              g31.extra = ot13(T20);
              break;
          }
      }
      return g31;
    }
    function Mt10(v30) {
      const g31 = {};
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "emission":
            case "diffuse":
            case "specular":
            case "bump":
            case "ambient":
            case "shininess":
            case "transparency":
              g31[T20.nodeName] = vt8(T20);
              break;
            case "transparent":
              g31[T20.nodeName] = {
                opaque: T20.hasAttribute("opaque") ? T20.getAttribute("opaque") : "A_ONE",
                data: vt8(T20)
              };
              break;
          }
      }
      return g31;
    }
    function vt8(v30) {
      const g31 = {};
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "color":
              g31[T20.nodeName] = n33(T20.textContent);
              break;
            case "float":
              g31[T20.nodeName] = parseFloat(T20.textContent);
              break;
            case "texture":
              g31[T20.nodeName] = { id: T20.getAttribute("texture"), extra: St8(T20) };
              break;
          }
      }
      return g31;
    }
    function St8(v30) {
      const g31 = {
        technique: {}
      };
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "extra":
              Tt9(T20, g31);
              break;
          }
      }
      return g31;
    }
    function Tt9(v30, g31) {
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "technique":
              $e6(T20, g31);
              break;
          }
      }
    }
    function $e6(v30, g31) {
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "repeatU":
            case "repeatV":
            case "offsetU":
            case "offsetV":
              g31.technique[T20.nodeName] = parseFloat(T20.textContent);
              break;
            case "wrapU":
            case "wrapV":
              T20.textContent.toUpperCase() === "TRUE" ? g31.technique[T20.nodeName] = 1 : T20.textContent.toUpperCase() === "FALSE" ? g31.technique[T20.nodeName] = 0 : g31.technique[T20.nodeName] = parseInt(T20.textContent);
              break;
            case "bump":
              g31[T20.nodeName] = N19(T20);
              break;
          }
      }
    }
    function ot13(v30) {
      const g31 = {};
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "technique":
              g31.technique = kt10(T20);
              break;
          }
      }
      return g31;
    }
    function kt10(v30) {
      const g31 = {};
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "double_sided":
              g31[T20.nodeName] = parseInt(T20.textContent);
              break;
            case "bump":
              g31[T20.nodeName] = N19(T20);
              break;
          }
      }
      return g31;
    }
    function N19(v30) {
      const g31 = {};
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "texture":
              g31[T20.nodeName] = { id: T20.getAttribute("texture"), texcoord: T20.getAttribute("texcoord"), extra: St8(T20) };
              break;
          }
      }
      return g31;
    }
    function L11(v30) {
      return v30;
    }
    function Q11(v30) {
      return y33(Oe5.effects[v30], L11);
    }
    function de9(v30) {
      const g31 = {
        name: v30.getAttribute("name")
      };
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "instance_effect":
              g31.url = o12(T20.getAttribute("url"));
              break;
          }
      }
      Oe5.materials[v30.getAttribute("id")] = g31;
    }
    function pe8(v30) {
      let g31, S21 = v30.slice((v30.lastIndexOf(".") - 1 >>> 0) + 2);
      switch (S21 = S21.toLowerCase(), S21) {
        case "tga":
          g31 = ba2;
          break;
        default:
          g31 = Jo2;
      }
      return g31;
    }
    function _e7(v30) {
      const g31 = Q11(v30.url), S21 = g31.profile.technique;
      let b33;
      switch (S21.type) {
        case "phong":
        case "blinn":
          b33 = new Jn5();
          break;
        case "lambert":
          b33 = new T02();
          break;
        default:
          b33 = new xi6();
          break;
      }
      b33.name = v30.name || "";
      function T20(ge7, Te7 = null) {
        const Ie7 = g31.profile.samplers[ge7.id];
        let he8 = null;
        if (Ie7 !== void 0) {
          const Ee5 = g31.profile.surfaces[Ie7.source];
          he8 = ye7(Ee5.init_from);
        } else
          console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."), he8 = ye7(ge7.id);
        if (he8 !== null) {
          const Ee5 = pe8(he8);
          if (Ee5 !== void 0) {
            const Ne7 = Ee5.load(he8), Fe7 = ge7.extra;
            if (Fe7 !== void 0 && Fe7.technique !== void 0 && c27(Fe7.technique) === false) {
              const ke7 = Fe7.technique;
              Ne7.wrapS = ke7.wrapU ? Ti4 : Zt6, Ne7.wrapT = ke7.wrapV ? Ti4 : Zt6, Ne7.offset.set(ke7.offsetU || 0, ke7.offsetV || 0), Ne7.repeat.set(ke7.repeatU || 1, ke7.repeatV || 1);
            } else
              Ne7.wrapS = Ti4, Ne7.wrapT = Ti4;
            return Te7 !== null && (Ne7.encoding = Te7), Ne7;
          } else
            return console.warn("THREE.ColladaLoader: Loader for texture %s not found.", he8), null;
        } else
          return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:", ge7.id), null;
      }
      const J11 = S21.parameters;
      for (const ge7 in J11) {
        const Te7 = J11[ge7];
        switch (ge7) {
          case "diffuse":
            Te7.color && b33.color.fromArray(Te7.color), Te7.texture && (b33.map = T20(Te7.texture, rt10));
            break;
          case "specular":
            Te7.color && b33.specular && b33.specular.fromArray(Te7.color), Te7.texture && (b33.specularMap = T20(Te7.texture));
            break;
          case "bump":
            Te7.texture && (b33.normalMap = T20(Te7.texture));
            break;
          case "ambient":
            Te7.texture && (b33.lightMap = T20(Te7.texture, rt10));
            break;
          case "shininess":
            Te7.float && b33.shininess && (b33.shininess = Te7.float);
            break;
          case "emission":
            Te7.color && b33.emissive && b33.emissive.fromArray(Te7.color), Te7.texture && (b33.emissiveMap = T20(Te7.texture, rt10));
            break;
        }
      }
      b33.color.convertSRGBToLinear(), b33.specular && b33.specular.convertSRGBToLinear(), b33.emissive && b33.emissive.convertSRGBToLinear();
      let se6 = J11.transparent, be7 = J11.transparency;
      if (be7 === void 0 && se6 && (be7 = {
        float: 1
      }), se6 === void 0 && be7 && (se6 = {
        opaque: "A_ONE",
        data: {
          color: [1, 1, 1, 1]
        }
      }), se6 && be7)
        if (se6.data.texture)
          b33.transparent = true;
        else {
          const ge7 = se6.data.color;
          switch (se6.opaque) {
            case "A_ONE":
              b33.opacity = ge7[3] * be7.float;
              break;
            case "RGB_ZERO":
              b33.opacity = 1 - ge7[0] * be7.float;
              break;
            case "A_ZERO":
              b33.opacity = 1 - ge7[3] * be7.float;
              break;
            case "RGB_ONE":
              b33.opacity = ge7[0] * be7.float;
              break;
            default:
              console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.', se6.opaque);
          }
          b33.opacity < 1 && (b33.transparent = true);
        }
      if (S21.extra !== void 0 && S21.extra.technique !== void 0) {
        const ge7 = S21.extra.technique;
        for (const Te7 in ge7) {
          const Ie7 = ge7[Te7];
          switch (Te7) {
            case "double_sided":
              b33.side = Ie7 === 1 ? ui6 : Ei5;
              break;
            case "bump":
              b33.normalMap = T20(Ie7.texture), b33.normalScale = new We7(1, 1);
              break;
          }
        }
      }
      return b33;
    }
    function O20(v30) {
      return y33(Oe5.materials[v30], _e7);
    }
    function ae7(v30) {
      const g31 = {
        name: v30.getAttribute("name")
      };
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "optics":
              g31.optics = Z11(T20);
              break;
          }
      }
      Oe5.cameras[v30.getAttribute("id")] = g31;
    }
    function Z11(v30) {
      for (let g31 = 0; g31 < v30.childNodes.length; g31++) {
        const S21 = v30.childNodes[g31];
        switch (S21.nodeName) {
          case "technique_common":
            return xe6(S21);
        }
      }
      return {};
    }
    function xe6(v30) {
      const g31 = {};
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        switch (b33.nodeName) {
          case "perspective":
          case "orthographic":
            g31.technique = b33.nodeName, g31.parameters = Ae6(b33);
            break;
        }
      }
      return g31;
    }
    function Ae6(v30) {
      const g31 = {};
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        switch (b33.nodeName) {
          case "xfov":
          case "yfov":
          case "xmag":
          case "ymag":
          case "znear":
          case "zfar":
          case "aspect_ratio":
            g31[b33.nodeName] = parseFloat(b33.textContent);
            break;
        }
      }
      return g31;
    }
    function Ce7(v30) {
      let g31;
      switch (v30.optics.technique) {
        case "perspective":
          g31 = new Bt6(
            v30.optics.parameters.yfov,
            v30.optics.parameters.aspect_ratio,
            v30.optics.parameters.znear,
            v30.optics.parameters.zfar
          );
          break;
        case "orthographic":
          let S21 = v30.optics.parameters.ymag, b33 = v30.optics.parameters.xmag;
          const T20 = v30.optics.parameters.aspect_ratio;
          b33 = b33 === void 0 ? S21 * T20 : b33, S21 = S21 === void 0 ? b33 / T20 : S21, b33 *= 0.5, S21 *= 0.5, g31 = new la2(
            -b33,
            b33,
            S21,
            -S21,
            // left, right, top, bottom
            v30.optics.parameters.znear,
            v30.optics.parameters.zfar
          );
          break;
        default:
          g31 = new Bt6();
          break;
      }
      return g31.name = v30.name || "", g31;
    }
    function we8(v30) {
      const g31 = Oe5.cameras[v30];
      return g31 !== void 0 ? y33(g31, Ce7) : (console.warn("THREE.ColladaLoader: Couldn't find camera with ID:", v30), null);
    }
    function Se7(v30) {
      let g31 = {};
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "technique_common":
              g31 = Ve8(T20);
              break;
          }
      }
      Oe5.lights[v30.getAttribute("id")] = g31;
    }
    function Ve8(v30) {
      const g31 = {};
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "directional":
            case "point":
            case "spot":
            case "ambient":
              g31.technique = T20.nodeName, g31.parameters = nt14(T20);
          }
      }
      return g31;
    }
    function nt14(v30) {
      const g31 = {};
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "color":
              const J11 = n33(T20.textContent);
              g31.color = new ze7().fromArray(J11).convertSRGBToLinear();
              break;
            case "falloff_angle":
              g31.falloffAngle = parseFloat(T20.textContent);
              break;
            case "quadratic_attenuation":
              const se6 = parseFloat(T20.textContent);
              g31.distance = se6 ? Math.sqrt(1 / se6) : 0;
              break;
          }
      }
      return g31;
    }
    function wt9(v30) {
      let g31;
      switch (v30.technique) {
        case "directional":
          g31 = new Oh2();
          break;
        case "point":
          g31 = new da2();
          break;
        case "spot":
          g31 = new Uh2();
          break;
        case "ambient":
          g31 = new B02();
          break;
      }
      return v30.parameters.color && g31.color.copy(v30.parameters.color), v30.parameters.distance && (g31.distance = v30.parameters.distance), g31;
    }
    function B21(v30) {
      const g31 = Oe5.lights[v30];
      return g31 !== void 0 ? y33(g31, wt9) : (console.warn("THREE.ColladaLoader: Couldn't find light with ID:", v30), null);
    }
    function te7(v30) {
      const g31 = {
        name: v30.getAttribute("name"),
        sources: {},
        vertices: {},
        primitives: []
      }, S21 = i27(v30, "mesh")[0];
      if (S21 !== void 0) {
        for (let b33 = 0; b33 < S21.childNodes.length; b33++) {
          const T20 = S21.childNodes[b33];
          if (T20.nodeType !== 1)
            continue;
          const J11 = T20.getAttribute("id");
          switch (T20.nodeName) {
            case "source":
              g31.sources[J11] = ce9(T20);
              break;
            case "vertices":
              g31.vertices = Me7(T20);
              break;
            case "polygons":
              console.warn("THREE.ColladaLoader: Unsupported primitive type: ", T20.nodeName);
              break;
            case "lines":
            case "linestrips":
            case "polylist":
            case "triangles":
              g31.primitives.push(Ue7(T20));
              break;
            default:
              console.log(T20);
          }
        }
        Oe5.geometries[v30.getAttribute("id")] = g31;
      }
    }
    function ce9(v30) {
      const g31 = {
        array: [],
        stride: 3
      };
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        if (b33.nodeType === 1)
          switch (b33.nodeName) {
            case "float_array":
              g31.array = n33(b33.textContent);
              break;
            case "Name_array":
              g31.array = r24(b33.textContent);
              break;
            case "technique_common":
              const T20 = i27(b33, "accessor")[0];
              T20 !== void 0 && (g31.stride = parseInt(T20.getAttribute("stride")));
              break;
          }
      }
      return g31;
    }
    function Me7(v30) {
      const g31 = {};
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        b33.nodeType === 1 && (g31[b33.getAttribute("semantic")] = o12(b33.getAttribute("source")));
      }
      return g31;
    }
    function Ue7(v30) {
      const g31 = {
        type: v30.nodeName,
        material: v30.getAttribute("material"),
        count: parseInt(v30.getAttribute("count")),
        inputs: {},
        stride: 0,
        hasUV: false
      };
      for (let S21 = 0, b33 = v30.childNodes.length; S21 < b33; S21++) {
        const T20 = v30.childNodes[S21];
        if (T20.nodeType === 1)
          switch (T20.nodeName) {
            case "input":
              const J11 = o12(T20.getAttribute("source")), se6 = T20.getAttribute("semantic"), be7 = parseInt(T20.getAttribute("offset")), ge7 = parseInt(T20.getAttribute("set")), Te7 = ge7 > 0 ? se6 + ge7 : se6;
              g31.inputs[Te7] = { id: J11, offset: be7 }, g31.stride = Math.max(g31.stride, be7 + 1), se6 === "TEXCOORD" && (g31.hasUV = true);
              break;
            case "vcount":
              g31.vcount = a22(T20.textContent);
              break;
            case "p":
              g31.p = a22(T20.textContent);
              break;
          }
      }
      return g31;
    }
    function dt13(v30) {
      const g31 = {};
      for (let S21 = 0; S21 < v30.length; S21++) {
        const b33 = v30[S21];
        g31[b33.type] === void 0 && (g31[b33.type] = []), g31[b33.type].push(b33);
      }
      return g31;
    }
    function bt9(v30) {
      let g31 = 0;
      for (let S21 = 0, b33 = v30.length; S21 < b33; S21++)
        v30[S21].hasUV === true && g31++;
      g31 > 0 && g31 < v30.length && (v30.uvsNeedsFix = true);
    }
    function Nt9(v30) {
      const g31 = {}, S21 = v30.sources, b33 = v30.vertices, T20 = v30.primitives;
      if (T20.length === 0)
        return {};
      const J11 = dt13(T20);
      for (const se6 in J11) {
        const be7 = J11[se6];
        bt9(be7), g31[se6] = Mi5(be7, S21, b33);
      }
      return g31;
    }
    function Mi5(v30, g31, S21) {
      const b33 = {}, T20 = { array: [], stride: 0 }, J11 = { array: [], stride: 0 }, se6 = { array: [], stride: 0 }, be7 = { array: [], stride: 0 }, ge7 = { array: [], stride: 0 }, Te7 = { array: [], stride: 4 }, Ie7 = { array: [], stride: 4 }, he8 = new Xt6(), Ee5 = [];
      let Ne7 = 0;
      for (let Fe7 = 0; Fe7 < v30.length; Fe7++) {
        const ke7 = v30[Fe7], pt11 = ke7.inputs;
        let ct11 = 0;
        switch (ke7.type) {
          case "lines":
          case "linestrips":
            ct11 = ke7.count * 2;
            break;
          case "triangles":
            ct11 = ke7.count * 3;
            break;
          case "polylist":
            for (let st12 = 0; st12 < ke7.count; st12++) {
              const ut11 = ke7.vcount[st12];
              switch (ut11) {
                case 3:
                  ct11 += 3;
                  break;
                case 4:
                  ct11 += 6;
                  break;
                default:
                  ct11 += (ut11 - 2) * 3;
                  break;
              }
            }
            break;
          default:
            console.warn("THREE.ColladaLoader: Unknow primitive type:", ke7.type);
        }
        he8.addGroup(Ne7, ct11, Fe7), Ne7 += ct11, ke7.material && Ee5.push(ke7.material);
        for (const st12 in pt11) {
          const ut11 = pt11[st12];
          switch (st12) {
            case "VERTEX":
              for (const Ri5 in S21) {
                const oi7 = S21[Ri5];
                switch (Ri5) {
                  case "POSITION":
                    const zr6 = T20.array.length;
                    if (it14(ke7, g31[oi7], ut11.offset, T20.array), T20.stride = g31[oi7].stride, g31.skinWeights && g31.skinIndices && (it14(ke7, g31.skinIndices, ut11.offset, Te7.array), it14(ke7, g31.skinWeights, ut11.offset, Ie7.array)), ke7.hasUV === false && v30.uvsNeedsFix === true) {
                      const nu2 = (T20.array.length - zr6) / T20.stride;
                      for (let $o2 = 0; $o2 < nu2; $o2++)
                        se6.array.push(0, 0);
                    }
                    break;
                  case "NORMAL":
                    it14(ke7, g31[oi7], ut11.offset, J11.array), J11.stride = g31[oi7].stride;
                    break;
                  case "COLOR":
                    it14(ke7, g31[oi7], ut11.offset, ge7.array), ge7.stride = g31[oi7].stride;
                    break;
                  case "TEXCOORD":
                    it14(ke7, g31[oi7], ut11.offset, se6.array), se6.stride = g31[oi7].stride;
                    break;
                  case "TEXCOORD1":
                    it14(ke7, g31[oi7], ut11.offset, be7.array), se6.stride = g31[oi7].stride;
                    break;
                  default:
                    console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.', Ri5);
                }
              }
              break;
            case "NORMAL":
              it14(ke7, g31[ut11.id], ut11.offset, J11.array), J11.stride = g31[ut11.id].stride;
              break;
            case "COLOR":
              it14(ke7, g31[ut11.id], ut11.offset, ge7.array, true), ge7.stride = g31[ut11.id].stride;
              break;
            case "TEXCOORD":
              it14(ke7, g31[ut11.id], ut11.offset, se6.array), se6.stride = g31[ut11.id].stride;
              break;
            case "TEXCOORD1":
              it14(ke7, g31[ut11.id], ut11.offset, be7.array), be7.stride = g31[ut11.id].stride;
              break;
          }
        }
      }
      return T20.array.length > 0 && he8.setAttribute("position", new xt6(T20.array, T20.stride)), J11.array.length > 0 && he8.setAttribute("normal", new xt6(J11.array, J11.stride)), ge7.array.length > 0 && he8.setAttribute("color", new xt6(ge7.array, ge7.stride)), se6.array.length > 0 && he8.setAttribute("uv", new xt6(se6.array, se6.stride)), be7.array.length > 0 && he8.setAttribute("uv2", new xt6(be7.array, be7.stride)), Te7.array.length > 0 && he8.setAttribute("skinIndex", new xt6(Te7.array, Te7.stride)), Ie7.array.length > 0 && he8.setAttribute("skinWeight", new xt6(Ie7.array, Ie7.stride)), b33.data = he8, b33.type = v30[0].type, b33.materialKeys = Ee5, b33;
    }
    function it14(v30, g31, S21, b33, T20 = false) {
      const J11 = v30.p, se6 = v30.stride, be7 = v30.vcount;
      function ge7(he8) {
        let Ee5 = J11[he8 + S21] * Ie7;
        const Ne7 = Ee5 + Ie7;
        for (; Ee5 < Ne7; Ee5++)
          b33.push(Te7[Ee5]);
        if (T20) {
          const Fe7 = b33.length - Ie7 - 1;
          ps2.setRGB(
            b33[Fe7 + 0],
            b33[Fe7 + 1],
            b33[Fe7 + 2]
          ).convertSRGBToLinear(), b33[Fe7 + 0] = ps2.r, b33[Fe7 + 1] = ps2.g, b33[Fe7 + 2] = ps2.b;
        }
      }
      const Te7 = g31.array, Ie7 = g31.stride;
      if (v30.vcount !== void 0) {
        let he8 = 0;
        for (let Ee5 = 0, Ne7 = be7.length; Ee5 < Ne7; Ee5++) {
          const Fe7 = be7[Ee5];
          if (Fe7 === 4) {
            const ke7 = he8 + se6 * 0, pt11 = he8 + se6 * 1, ct11 = he8 + se6 * 2, st12 = he8 + se6 * 3;
            ge7(ke7), ge7(pt11), ge7(st12), ge7(pt11), ge7(ct11), ge7(st12);
          } else if (Fe7 === 3) {
            const ke7 = he8 + se6 * 0, pt11 = he8 + se6 * 1, ct11 = he8 + se6 * 2;
            ge7(ke7), ge7(pt11), ge7(ct11);
          } else if (Fe7 > 4)
            for (let ke7 = 1, pt11 = Fe7 - 2; ke7 <= pt11; ke7++) {
              const ct11 = he8 + se6 * 0, st12 = he8 + se6 * ke7, ut11 = he8 + se6 * (ke7 + 1);
              ge7(ct11), ge7(st12), ge7(ut11);
            }
          he8 += se6 * Fe7;
        }
      } else
        for (let he8 = 0, Ee5 = J11.length; he8 < Ee5; he8 += se6)
          ge7(he8);
    }
    function Jt7(v30) {
      return y33(Oe5.geometries[v30], Nt9);
    }
    function ai7(v30) {
      const g31 = {
        name: v30.getAttribute("name") || "",
        joints: {},
        links: []
      };
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        if (b33.nodeType === 1)
          switch (b33.nodeName) {
            case "technique_common":
              ga2(b33, g31);
              break;
          }
      }
      Oe5.kinematicsModels[v30.getAttribute("id")] = g31;
    }
    function Ir6(v30) {
      return v30.build !== void 0 ? v30.build : v30;
    }
    function hs2(v30) {
      return y33(Oe5.kinematicsModels[v30], Ir6);
    }
    function ga2(v30, g31) {
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        if (b33.nodeType === 1)
          switch (b33.nodeName) {
            case "joint":
              g31.joints[b33.getAttribute("sid")] = _a2(b33);
              break;
            case "link":
              g31.links.push(R20(b33));
              break;
          }
      }
    }
    function _a2(v30) {
      let g31;
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        if (b33.nodeType === 1)
          switch (b33.nodeName) {
            case "prismatic":
            case "revolute":
              g31 = va2(b33);
              break;
          }
      }
      return g31;
    }
    function va2(v30) {
      const g31 = {
        sid: v30.getAttribute("sid"),
        name: v30.getAttribute("name") || "",
        axis: new k18(),
        limits: {
          min: 0,
          max: 0
        },
        type: v30.nodeName,
        static: false,
        zeroPosition: 0,
        middlePosition: 0
      };
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        if (b33.nodeType === 1)
          switch (b33.nodeName) {
            case "axis":
              const T20 = n33(b33.textContent);
              g31.axis.fromArray(T20);
              break;
            case "limits":
              const J11 = b33.getElementsByTagName("max")[0], se6 = b33.getElementsByTagName("min")[0];
              g31.limits.max = parseFloat(J11.textContent), g31.limits.min = parseFloat(se6.textContent);
              break;
          }
      }
      return g31.limits.min >= g31.limits.max && (g31.static = true), g31.middlePosition = (g31.limits.min + g31.limits.max) / 2, g31;
    }
    function R20(v30) {
      const g31 = {
        sid: v30.getAttribute("sid"),
        name: v30.getAttribute("name") || "",
        attachments: [],
        transforms: []
      };
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        if (b33.nodeType === 1)
          switch (b33.nodeName) {
            case "attachment_full":
              g31.attachments.push(Y11(b33));
              break;
            case "matrix":
            case "translate":
            case "rotate":
              g31.transforms.push(ee7(b33));
              break;
          }
      }
      return g31;
    }
    function Y11(v30) {
      const g31 = {
        joint: v30.getAttribute("joint").split("/").pop(),
        transforms: [],
        links: []
      };
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        if (b33.nodeType === 1)
          switch (b33.nodeName) {
            case "link":
              g31.links.push(R20(b33));
              break;
            case "matrix":
            case "translate":
            case "rotate":
              g31.transforms.push(ee7(b33));
              break;
          }
      }
      return g31;
    }
    function ee7(v30) {
      const g31 = {
        type: v30.nodeName
      }, S21 = n33(v30.textContent);
      switch (g31.type) {
        case "matrix":
          g31.obj = new He6(), g31.obj.fromArray(S21).transpose();
          break;
        case "translate":
          g31.obj = new k18(), g31.obj.fromArray(S21);
          break;
        case "rotate":
          g31.obj = new k18(), g31.obj.fromArray(S21), g31.angle = ln4.degToRad(S21[3]);
          break;
      }
      return g31;
    }
    function X12(v30) {
      const g31 = {
        name: v30.getAttribute("name") || "",
        rigidBodies: {}
      };
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        if (b33.nodeType === 1)
          switch (b33.nodeName) {
            case "rigid_body":
              g31.rigidBodies[b33.getAttribute("name")] = {}, ne8(b33, g31.rigidBodies[b33.getAttribute("name")]);
              break;
          }
      }
      Oe5.physicsModels[v30.getAttribute("id")] = g31;
    }
    function ne8(v30, g31) {
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        if (b33.nodeType === 1)
          switch (b33.nodeName) {
            case "technique_common":
              Re7(b33, g31);
              break;
          }
      }
    }
    function Re7(v30, g31) {
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        if (b33.nodeType === 1)
          switch (b33.nodeName) {
            case "inertia":
              g31.inertia = n33(b33.textContent);
              break;
            case "mass":
              g31.mass = n33(b33.textContent)[0];
              break;
          }
      }
    }
    function Be7(v30) {
      const g31 = {
        bindJointAxis: []
      };
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        if (b33.nodeType === 1)
          switch (b33.nodeName) {
            case "bind_joint_axis":
              g31.bindJointAxis.push(Ge7(b33));
              break;
          }
      }
      Oe5.kinematicsScenes[o12(v30.getAttribute("url"))] = g31;
    }
    function Ge7(v30) {
      const g31 = {
        target: v30.getAttribute("target").split("/").pop()
      };
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        if (b33.nodeType === 1)
          switch (b33.nodeName) {
            case "axis":
              const T20 = b33.getElementsByTagName("param")[0];
              g31.axis = T20.textContent;
              const J11 = g31.axis.split("inst_").pop().split("axis")[0];
              g31.jointIndex = J11.substring(0, J11.length - 1);
              break;
          }
      }
      return g31;
    }
    function Xe7(v30) {
      return v30.build !== void 0 ? v30.build : v30;
    }
    function Qe8(v30) {
      return y33(Oe5.kinematicsScenes[v30], Xe7);
    }
    function Ze7() {
      const v30 = Object.keys(Oe5.kinematicsModels)[0], g31 = Object.keys(Oe5.kinematicsScenes)[0], S21 = Object.keys(Oe5.visualScenes)[0];
      if (v30 === void 0 || g31 === void 0)
        return;
      const b33 = hs2(v30), T20 = Qe8(g31), J11 = Or6(S21), se6 = T20.bindJointAxis, be7 = {};
      for (let Ie7 = 0, he8 = se6.length; Ie7 < he8; Ie7++) {
        const Ee5 = se6[Ie7], Ne7 = Pt8.querySelector('[sid="' + Ee5.target + '"]');
        if (Ne7) {
          const Fe7 = Ne7.parentElement;
          ge7(Ee5.jointIndex, Fe7);
        }
      }
      function ge7(Ie7, he8) {
        const Ee5 = he8.getAttribute("name"), Ne7 = b33.joints[Ie7];
        J11.traverse(function(Fe7) {
          Fe7.name === Ee5 && (be7[Ie7] = {
            object: Fe7,
            transforms: Ye7(he8),
            joint: Ne7,
            position: Ne7.zeroPosition
          });
        });
      }
      const Te7 = new He6();
      Ko2 = {
        joints: b33 && b33.joints,
        getJointValue: function(Ie7) {
          const he8 = be7[Ie7];
          if (he8)
            return he8.position;
          console.warn("THREE.ColladaLoader: Joint " + Ie7 + " doesn't exist.");
        },
        setJointValue: function(Ie7, he8) {
          const Ee5 = be7[Ie7];
          if (Ee5) {
            const Ne7 = Ee5.joint;
            if (he8 > Ne7.limits.max || he8 < Ne7.limits.min)
              console.warn("THREE.ColladaLoader: Joint " + Ie7 + " value " + he8 + " outside of limits (min: " + Ne7.limits.min + ", max: " + Ne7.limits.max + ").");
            else if (Ne7.static)
              console.warn("THREE.ColladaLoader: Joint " + Ie7 + " is static.");
            else {
              const Fe7 = Ee5.object, ke7 = Ne7.axis, pt11 = Ee5.transforms;
              lt12.identity();
              for (let ct11 = 0; ct11 < pt11.length; ct11++) {
                const st12 = pt11[ct11];
                if (st12.sid && st12.sid.indexOf(Ie7) !== -1)
                  switch (Ne7.type) {
                    case "revolute":
                      lt12.multiply(Te7.makeRotationAxis(ke7, ln4.degToRad(he8)));
                      break;
                    case "prismatic":
                      lt12.multiply(Te7.makeTranslation(ke7.x * he8, ke7.y * he8, ke7.z * he8));
                      break;
                    default:
                      console.warn("THREE.ColladaLoader: Unknown joint type: " + Ne7.type);
                      break;
                  }
                else
                  switch (st12.type) {
                    case "matrix":
                      lt12.multiply(st12.obj);
                      break;
                    case "translate":
                      lt12.multiply(Te7.makeTranslation(st12.obj.x, st12.obj.y, st12.obj.z));
                      break;
                    case "scale":
                      lt12.scale(st12.obj);
                      break;
                    case "rotate":
                      lt12.multiply(Te7.makeRotationAxis(st12.obj, st12.angle));
                      break;
                  }
              }
              Fe7.matrix.copy(lt12), Fe7.matrix.decompose(Fe7.position, Fe7.quaternion, Fe7.scale), be7[Ie7].position = he8;
            }
          } else
            console.log("THREE.ColladaLoader: " + Ie7 + " does not exist.");
        }
      };
    }
    function Ye7(v30) {
      const g31 = [], S21 = Pt8.querySelector('[id="' + v30.id + '"]');
      for (let b33 = 0; b33 < S21.childNodes.length; b33++) {
        const T20 = S21.childNodes[b33];
        if (T20.nodeType !== 1)
          continue;
        let J11, se6;
        switch (T20.nodeName) {
          case "matrix":
            J11 = n33(T20.textContent);
            const be7 = new He6().fromArray(J11).transpose();
            g31.push({
              sid: T20.getAttribute("sid"),
              type: T20.nodeName,
              obj: be7
            });
            break;
          case "translate":
          case "scale":
            J11 = n33(T20.textContent), se6 = new k18().fromArray(J11), g31.push({
              sid: T20.getAttribute("sid"),
              type: T20.nodeName,
              obj: se6
            });
            break;
          case "rotate":
            J11 = n33(T20.textContent), se6 = new k18().fromArray(J11);
            const ge7 = ln4.degToRad(J11[3]);
            g31.push({
              sid: T20.getAttribute("sid"),
              type: T20.nodeName,
              obj: se6,
              angle: ge7
            });
            break;
        }
      }
      return g31;
    }
    function yt13(v30) {
      const g31 = v30.getElementsByTagName("node");
      for (let S21 = 0; S21 < g31.length; S21++) {
        const b33 = g31[S21];
        b33.hasAttribute("id") === false && b33.setAttribute("id", l25());
      }
    }
    const lt12 = new He6(), Ut9 = new k18();
    function fi7(v30) {
      const g31 = {
        name: v30.getAttribute("name") || "",
        type: v30.getAttribute("type"),
        id: v30.getAttribute("id"),
        sid: v30.getAttribute("sid"),
        matrix: new He6(),
        nodes: [],
        instanceCameras: [],
        instanceControllers: [],
        instanceLights: [],
        instanceGeometries: [],
        instanceNodes: [],
        transforms: {}
      };
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        if (b33.nodeType !== 1)
          continue;
        let T20;
        switch (b33.nodeName) {
          case "node":
            g31.nodes.push(b33.getAttribute("id")), fi7(b33);
            break;
          case "instance_camera":
            g31.instanceCameras.push(o12(b33.getAttribute("url")));
            break;
          case "instance_controller":
            g31.instanceControllers.push(Et8(b33));
            break;
          case "instance_light":
            g31.instanceLights.push(o12(b33.getAttribute("url")));
            break;
          case "instance_geometry":
            g31.instanceGeometries.push(Et8(b33));
            break;
          case "instance_node":
            g31.instanceNodes.push(o12(b33.getAttribute("url")));
            break;
          case "matrix":
            T20 = n33(b33.textContent), g31.matrix.multiply(lt12.fromArray(T20).transpose()), g31.transforms[b33.getAttribute("sid")] = b33.nodeName;
            break;
          case "translate":
            T20 = n33(b33.textContent), Ut9.fromArray(T20), g31.matrix.multiply(lt12.makeTranslation(Ut9.x, Ut9.y, Ut9.z)), g31.transforms[b33.getAttribute("sid")] = b33.nodeName;
            break;
          case "rotate":
            T20 = n33(b33.textContent);
            const J11 = ln4.degToRad(T20[3]);
            g31.matrix.multiply(lt12.makeRotationAxis(Ut9.fromArray(T20), J11)), g31.transforms[b33.getAttribute("sid")] = b33.nodeName;
            break;
          case "scale":
            T20 = n33(b33.textContent), g31.matrix.scale(Ut9.fromArray(T20)), g31.transforms[b33.getAttribute("sid")] = b33.nodeName;
            break;
          case "extra":
            break;
          default:
            console.log(b33);
        }
      }
      return kr6(g31.id) ? console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.", g31.id) : Oe5.nodes[g31.id] = g31, g31;
    }
    function Et8(v30) {
      const g31 = {
        id: o12(v30.getAttribute("url")),
        materials: {},
        skeletons: []
      };
      for (let S21 = 0; S21 < v30.childNodes.length; S21++) {
        const b33 = v30.childNodes[S21];
        switch (b33.nodeName) {
          case "bind_material":
            const T20 = b33.getElementsByTagName("instance_material");
            for (let J11 = 0; J11 < T20.length; J11++) {
              const se6 = T20[J11], be7 = se6.getAttribute("symbol"), ge7 = se6.getAttribute("target");
              g31.materials[be7] = o12(ge7);
            }
            break;
          case "skeleton":
            g31.skeletons.push(o12(b33.textContent));
            break;
        }
      }
      return g31;
    }
    function Je6(v30, g31) {
      const S21 = [], b33 = [];
      let T20, J11, se6;
      for (T20 = 0; T20 < v30.length; T20++) {
        const Te7 = v30[T20];
        let Ie7;
        if (kr6(Te7))
          Ie7 = At8(Te7), Dr6(Ie7, g31, S21);
        else if (Kt7(Te7)) {
          const he8 = Oe5.visualScenes[Te7].children;
          for (let Ee5 = 0; Ee5 < he8.length; Ee5++) {
            const Ne7 = he8[Ee5];
            if (Ne7.type === "JOINT") {
              const Fe7 = At8(Ne7.id);
              Dr6(Fe7, g31, S21);
            }
          }
        } else
          console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:", Te7);
      }
      for (T20 = 0; T20 < g31.length; T20++)
        for (J11 = 0; J11 < S21.length; J11++)
          if (se6 = S21[J11], se6.bone.name === g31[T20].name) {
            b33[T20] = se6, se6.processed = true;
            break;
          }
      for (T20 = 0; T20 < S21.length; T20++)
        se6 = S21[T20], se6.processed === false && (b33.push(se6), se6.processed = true);
      const be7 = [], ge7 = [];
      for (T20 = 0; T20 < b33.length; T20++)
        se6 = b33[T20], be7.push(se6.bone), ge7.push(se6.boneInverse);
      return new ha2(be7, ge7);
    }
    function Dr6(v30, g31, S21) {
      v30.traverse(function(b33) {
        if (b33.isBone === true) {
          let T20;
          for (let J11 = 0; J11 < g31.length; J11++) {
            const se6 = g31[J11];
            if (se6.name === b33.name) {
              T20 = se6.boneInverse;
              break;
            }
          }
          T20 === void 0 && (T20 = new He6()), S21.push({ bone: b33, boneInverse: T20, processed: false });
        }
      });
    }
    function kn6(v30) {
      const g31 = [], S21 = v30.matrix, b33 = v30.nodes, T20 = v30.type, J11 = v30.instanceCameras, se6 = v30.instanceControllers, be7 = v30.instanceLights, ge7 = v30.instanceGeometries, Te7 = v30.instanceNodes;
      for (let he8 = 0, Ee5 = b33.length; he8 < Ee5; he8++)
        g31.push(At8(b33[he8]));
      for (let he8 = 0, Ee5 = J11.length; he8 < Ee5; he8++) {
        const Ne7 = we8(J11[he8]);
        Ne7 !== null && g31.push(Ne7.clone());
      }
      for (let he8 = 0, Ee5 = se6.length; he8 < Ee5; he8++) {
        const Ne7 = se6[he8], Fe7 = oe7(Ne7.id), ke7 = Jt7(Fe7.id), pt11 = ji3(ke7, Ne7.materials), ct11 = Ne7.skeletons, st12 = Fe7.skin.joints, ut11 = Je6(ct11, st12);
        for (let Ri5 = 0, oi7 = pt11.length; Ri5 < oi7; Ri5++) {
          const zr6 = pt11[Ri5];
          zr6.isSkinnedMesh && (zr6.bind(ut11, Fe7.skin.bindMatrix), zr6.normalizeSkinWeights()), g31.push(zr6);
        }
      }
      for (let he8 = 0, Ee5 = be7.length; he8 < Ee5; he8++) {
        const Ne7 = B21(be7[he8]);
        Ne7 !== null && g31.push(Ne7.clone());
      }
      for (let he8 = 0, Ee5 = ge7.length; he8 < Ee5; he8++) {
        const Ne7 = ge7[he8], Fe7 = Jt7(Ne7.id), ke7 = ji3(Fe7, Ne7.materials);
        for (let pt11 = 0, ct11 = ke7.length; pt11 < ct11; pt11++)
          g31.push(ke7[pt11]);
      }
      for (let he8 = 0, Ee5 = Te7.length; he8 < Ee5; he8++)
        g31.push(At8(Te7[he8]).clone());
      let Ie7;
      if (b33.length === 0 && g31.length === 1)
        Ie7 = g31[0];
      else {
        Ie7 = T20 === "JOINT" ? new Oo2() : new Lt5();
        for (let he8 = 0; he8 < g31.length; he8++)
          Ie7.add(g31[he8]);
      }
      return Ie7.name = T20 === "JOINT" ? v30.sid : v30.name, Ie7.matrix.copy(S21), Ie7.matrix.decompose(Ie7.position, Ie7.quaternion, Ie7.scale), Ie7;
    }
    const Li5 = new xi6({ color: 16711935 });
    function us2(v30, g31) {
      const S21 = [];
      for (let b33 = 0, T20 = v30.length; b33 < T20; b33++) {
        const J11 = g31[v30[b33]];
        J11 === void 0 ? (console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.", v30[b33]), S21.push(Li5)) : S21.push(O20(J11));
      }
      return S21;
    }
    function ji3(v30, g31) {
      const S21 = [];
      for (const b33 in v30) {
        const T20 = v30[b33], J11 = us2(T20.materialKeys, g31);
        if (J11.length === 0 && (b33 === "lines" || b33 === "linestrips" ? J11.push(new Tn4()) : J11.push(new Jn5())), b33 === "lines" || b33 === "linestrips")
          for (let Te7 = 0, Ie7 = J11.length; Te7 < Ie7; Te7++) {
            const he8 = J11[Te7];
            if (he8.isMeshPhongMaterial === true || he8.isMeshLambertMaterial === true) {
              const Ee5 = new Tn4();
              Ee5.color.copy(he8.color), Ee5.opacity = he8.opacity, Ee5.transparent = he8.transparent, J11[Te7] = Ee5;
            }
          }
        const se6 = T20.data.attributes.skinIndex !== void 0, be7 = J11.length === 1 ? J11[0] : J11;
        let ge7;
        switch (b33) {
          case "lines":
            ge7 = new zo2(T20.data, be7);
            break;
          case "linestrips":
            ge7 = new ss3(T20.data, be7);
            break;
          case "triangles":
          case "polylist":
            se6 ? ge7 = new Lh2(T20.data, be7) : ge7 = new Rt8(T20.data, be7);
            break;
        }
        S21.push(ge7);
      }
      return S21;
    }
    function kr6(v30) {
      return Oe5.nodes[v30] !== void 0;
    }
    function At8(v30) {
      return y33(Oe5.nodes[v30], kn6);
    }
    function Ci5(v30) {
      const g31 = {
        name: v30.getAttribute("name"),
        children: []
      };
      yt13(v30);
      const S21 = i27(v30, "node");
      for (let b33 = 0; b33 < S21.length; b33++)
        g31.children.push(fi7(S21[b33]));
      Oe5.visualScenes[v30.getAttribute("id")] = g31;
    }
    function Ur6(v30) {
      const g31 = new Lt5();
      g31.name = v30.name;
      const S21 = v30.children;
      for (let b33 = 0; b33 < S21.length; b33++) {
        const T20 = S21[b33];
        g31.add(At8(T20.id));
      }
      return g31;
    }
    function Kt7(v30) {
      return Oe5.visualScenes[v30] !== void 0;
    }
    function Or6(v30) {
      return y33(Oe5.visualScenes[v30], Ur6);
    }
    function ya2(v30) {
      const g31 = i27(v30, "instance_visual_scene")[0];
      return Or6(o12(g31.getAttribute("url")));
    }
    function ds2() {
      const v30 = Oe5.clips;
      if (c27(v30) === true) {
        if (c27(Oe5.animations) === false) {
          const g31 = [];
          for (const S21 in Oe5.animations) {
            const b33 = E24(S21);
            for (let T20 = 0, J11 = b33.length; T20 < J11; T20++)
              g31.push(b33[T20]);
          }
          ms2.push(new bo("default", -1, g31));
        }
      } else
        for (const g31 in v30)
          ms2.push($24(g31));
    }
    function tu2(v30) {
      let g31 = "";
      const S21 = [v30];
      for (; S21.length; ) {
        const b33 = S21.shift();
        b33.nodeType === Node.TEXT_NODE ? g31 += b33.textContent : (g31 += `
`, S21.push.apply(S21, b33.childNodes));
      }
      return g31.trim();
    }
    if (e11.length === 0)
      return { scene: new ko2() };
    const Yo2 = new DOMParser().parseFromString(e11, "application/xml"), Pt8 = i27(Yo2, "COLLADA")[0], xa2 = Yo2.getElementsByTagName("parsererror")[0];
    if (xa2 !== void 0) {
      const v30 = i27(xa2, "div")[0];
      let g31;
      return v30 ? g31 = v30.textContent : g31 = tu2(xa2), console.error(`THREE.ColladaLoader: Failed to parse collada file.
`, g31), null;
    }
    const iu2 = Pt8.getAttribute("version");
    console.debug("THREE.ColladaLoader: File version", iu2);
    const Zo2 = h26(i27(Pt8, "asset")[0]), Jo2 = new Ho2(this.manager);
    Jo2.setPath(this.resourcePath || t19).setCrossOrigin(this.crossOrigin);
    let ba2;
    jc2 && (ba2 = new jc2(this.manager), ba2.setPath(this.resourcePath || t19));
    const ps2 = new ze7(), ms2 = [];
    let Ko2 = {}, ru2 = 0;
    const Oe5 = {
      animations: {},
      clips: {},
      controllers: {},
      images: {},
      effects: {},
      materials: {},
      cameras: {},
      lights: {},
      geometries: {},
      nodes: {},
      visualScenes: {},
      kinematicsModels: {},
      physicsModels: {},
      kinematicsScenes: {}
    };
    m33(Pt8, "library_animations", "animation", f39), m33(Pt8, "library_animation_clips", "animation_clip", W8), m33(Pt8, "library_controllers", "controller", ie8), m33(Pt8, "library_images", "image", K13), m33(Pt8, "library_effects", "effect", Le7), m33(Pt8, "library_materials", "material", de9), m33(Pt8, "library_cameras", "camera", ae7), m33(Pt8, "library_lights", "light", Se7), m33(Pt8, "library_geometries", "geometry", te7), m33(Pt8, "library_nodes", "node", fi7), m33(Pt8, "library_visual_scenes", "visual_scene", Ci5), m33(Pt8, "library_kinematics_models", "kinematics_model", ai7), m33(Pt8, "library_physics_models", "physics_model", X12), m33(Pt8, "scene", "instance_kinematics_scene", Be7), _19(Oe5.animations, M12), _19(Oe5.clips, re8), _19(Oe5.controllers, H15), _19(Oe5.images, F17), _19(Oe5.effects, L11), _19(Oe5.materials, _e7), _19(Oe5.cameras, Ce7), _19(Oe5.lights, wt9), _19(Oe5.geometries, Nt9), _19(Oe5.visualScenes, Ur6), ds2(), Ze7();
    const fs2 = ya2(i27(Pt8, "scene")[0]);
    return fs2.animations = ms2, Zo2.upAxis === "Z_UP" && (console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."), fs2.rotation.set(-Math.PI / 2, 0, 0)), fs2.scale.multiplyScalar(Zo2.unit), {
      get animations() {
        return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."), ms2;
      },
      kinematics: Ko2,
      library: Oe5,
      scene: fs2
    };
  }
};
var Xc2 = new k18();
var P_2 = new Cn5();
var js2 = new He6();
var $i6 = new He6();
var Xs2 = new jt8();
var qs2 = new k18(1, 1, 1);
var Ys2 = new k18();
var ma2 = class extends _t7 {
  constructor(...e11) {
    super(...e11), this.urdfNode = null, this.urdfName = "";
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.urdfNode = e11.urdfNode, this.urdfName = e11.urdfName, this;
  }
};
var I_2 = class extends ma2 {
  constructor(...e11) {
    super(...e11), this.isURDFCollider = true, this.type = "URDFCollider";
  }
};
var D_2 = class extends ma2 {
  constructor(...e11) {
    super(...e11), this.isURDFVisual = true, this.type = "URDFVisual";
  }
};
var jh2 = class extends ma2 {
  constructor(...e11) {
    super(...e11), this.isURDFLink = true, this.type = "URDFLink";
  }
};
var Xh2 = class extends ma2 {
  get jointType() {
    return this._jointType;
  }
  set jointType(e11) {
    if (this.jointType !== e11)
      switch (this._jointType = e11, this.matrixWorldNeedsUpdate = true, e11) {
        case "fixed":
          this.jointValue = [];
          break;
        case "continuous":
        case "revolute":
        case "prismatic":
          this.jointValue = new Array(1).fill(0);
          break;
        case "planar":
          this.jointValue = new Array(3).fill(0), this.axis = new k18(0, 0, 1);
          break;
        case "floating":
          this.jointValue = new Array(6).fill(0);
          break;
      }
  }
  get angle() {
    return this.jointValue[0];
  }
  constructor(...e11) {
    super(...e11), this.isURDFJoint = true, this.type = "URDFJoint", this.jointValue = null, this.jointType = "fixed", this.axis = new k18(1, 0, 0), this.limit = { lower: 0, upper: 0 }, this.ignoreLimits = false, this.origPosition = null, this.origQuaternion = null, this.mimicJoints = [];
  }
  /* Overrides */
  copy(e11, t19) {
    return super.copy(e11, t19), this.jointType = e11.jointType, this.axis = e11.axis.clone(), this.limit.lower = e11.limit.lower, this.limit.upper = e11.limit.upper, this.ignoreLimits = false, this.jointValue = [...e11.jointValue], this.origPosition = e11.origPosition ? e11.origPosition.clone() : null, this.origQuaternion = e11.origQuaternion ? e11.origQuaternion.clone() : null, this.mimicJoints = [...e11.mimicJoints], this;
  }
  /* Public Functions */
  /**
   * @param {...number|null} values The joint value components to set, optionally null for no-op
   * @returns {boolean} Whether the invocation of this function resulted in an actual change to the joint value
   */
  setJointValue(...e11) {
    e11 = e11.map((i27) => i27 === null ? null : parseFloat(i27)), (!this.origPosition || !this.origQuaternion) && (this.origPosition = this.position.clone(), this.origQuaternion = this.quaternion.clone());
    let t19 = false;
    switch (this.mimicJoints.forEach((i27) => {
      t19 = i27.updateFromMimickedJoint(...e11) || t19;
    }), this.jointType) {
      case "fixed":
        return t19;
      case "continuous":
      case "revolute": {
        let i27 = e11[0];
        return i27 == null || i27 === this.jointValue[0] ? t19 : (!this.ignoreLimits && this.jointType === "revolute" && (i27 = Math.min(this.limit.upper, i27), i27 = Math.max(this.limit.lower, i27)), this.quaternion.setFromAxisAngle(this.axis, i27).premultiply(this.origQuaternion), this.jointValue[0] !== i27 ? (this.jointValue[0] = i27, this.matrixWorldNeedsUpdate = true, true) : t19);
      }
      case "prismatic": {
        let i27 = e11[0];
        return i27 == null || i27 === this.jointValue[0] ? t19 : (this.ignoreLimits || (i27 = Math.min(this.limit.upper, i27), i27 = Math.max(this.limit.lower, i27)), this.position.copy(this.origPosition), Xc2.copy(this.axis).applyEuler(this.rotation), this.position.addScaledVector(Xc2, i27), this.jointValue[0] !== i27 ? (this.jointValue[0] = i27, this.matrixWorldNeedsUpdate = true, true) : t19);
      }
      case "floating":
        return this.jointValue.every((i27, r24) => e11[r24] === i27 || e11[r24] === null) ? t19 : (this.jointValue[0] = e11[0] !== null ? e11[0] : this.jointValue[0], this.jointValue[1] = e11[1] !== null ? e11[1] : this.jointValue[1], this.jointValue[2] = e11[2] !== null ? e11[2] : this.jointValue[2], this.jointValue[3] = e11[3] !== null ? e11[3] : this.jointValue[3], this.jointValue[4] = e11[4] !== null ? e11[4] : this.jointValue[4], this.jointValue[5] = e11[5] !== null ? e11[5] : this.jointValue[5], $i6.compose(this.origPosition, this.origQuaternion, qs2), Xs2.setFromEuler(
          P_2.set(
            this.jointValue[3],
            this.jointValue[4],
            this.jointValue[5],
            "XYZ"
          )
        ), Ys2.set(this.jointValue[0], this.jointValue[1], this.jointValue[2]), js2.compose(Ys2, Xs2, qs2), $i6.premultiply(js2), this.position.setFromMatrixPosition($i6), this.rotation.setFromRotationMatrix($i6), this.matrixWorldNeedsUpdate = true, true);
      case "planar":
        return this.jointValue.every((i27, r24) => e11[r24] === i27 || e11[r24] === null) ? t19 : (this.jointValue[0] = e11[0] !== null ? e11[0] : this.jointValue[0], this.jointValue[1] = e11[1] !== null ? e11[1] : this.jointValue[1], this.jointValue[2] = e11[2] !== null ? e11[2] : this.jointValue[2], $i6.compose(this.origPosition, this.origQuaternion, qs2), Xs2.setFromAxisAngle(this.axis, this.jointValue[2]), Ys2.set(this.jointValue[0], this.jointValue[1], 0), js2.compose(Ys2, Xs2, qs2), $i6.premultiply(js2), this.position.setFromMatrixPosition($i6), this.rotation.setFromRotationMatrix($i6), this.matrixWorldNeedsUpdate = true, true);
    }
    return t19;
  }
};
var qc2 = class extends Xh2 {
  constructor(...e11) {
    super(...e11), this.type = "URDFMimicJoint", this.mimicJoint = null, this.offset = 0, this.multiplier = 1;
  }
  updateFromMimickedJoint(...e11) {
    const t19 = e11.map((i27) => i27 * this.multiplier + this.offset);
    return super.setJointValue(...t19);
  }
  /* Overrides */
  copy(e11, t19) {
    return super.copy(e11, t19), this.mimicJoint = e11.mimicJoint, this.offset = e11.offset, this.multiplier = e11.multiplier, this;
  }
};
var k_2 = class extends jh2 {
  constructor(...e11) {
    super(...e11), this.isURDFRobot = true, this.urdfNode = null, this.urdfRobotNode = null, this.robotName = null, this.links = null, this.joints = null, this.colliders = null, this.visual = null, this.frames = null;
  }
  copy(e11, t19) {
    super.copy(e11, t19), this.urdfRobotNode = e11.urdfRobotNode, this.robotName = e11.robotName, this.links = {}, this.joints = {}, this.colliders = {}, this.visual = {}, this.traverse((i27) => {
      i27.isURDFJoint && i27.urdfName in e11.joints && (this.joints[i27.urdfName] = i27), i27.isURDFLink && i27.urdfName in e11.links && (this.links[i27.urdfName] = i27), i27.isURDFCollider && i27.urdfName in e11.colliders && (this.colliders[i27.urdfName] = i27), i27.isURDFVisual && i27.urdfName in e11.visual && (this.visual[i27.urdfName] = i27);
    });
    for (const i27 in this.joints)
      this.joints[i27].mimicJoints = this.joints[i27].mimicJoints.map((r24) => this.joints[r24.name]);
    return this.frames = {
      ...this.colliders,
      ...this.visual,
      ...this.links,
      ...this.joints
    }, this;
  }
  getFrame(e11) {
    return this.frames[e11];
  }
  setJointValue(e11, ...t19) {
    const i27 = this.joints[e11];
    return i27 ? i27.setJointValue(...t19) : false;
  }
  setJointValues(e11) {
    let t19 = false;
    for (const i27 in e11) {
      const r24 = e11[i27];
      Array.isArray(r24) ? t19 = this.setJointValue(i27, ...r24) || t19 : t19 = this.setJointValue(i27, r24) || t19;
    }
    return t19;
  }
};
var so2 = new jt8();
var Yc2 = new Cn5();
function an4(s18) {
  return s18 ? s18.trim().split(/\s+/g).map((e11) => parseFloat(e11)) : [0, 0, 0];
}
function Zc2(s18, e11, t19 = false) {
  t19 || s18.rotation.set(0, 0, 0), Yc2.set(e11[0], e11[1], e11[2], "ZYX"), so2.setFromEuler(Yc2), so2.multiply(s18.quaternion), s18.quaternion.copy(so2);
}
var qh2 = class {
  constructor(e11) {
    this.manager = e11 || Dh2, this.loadMeshCb = this.defaultMeshLoader.bind(this), this.parseVisual = true, this.parseCollision = false, this.packages = "", this.workingPath = "", this.fetchOptions = {};
  }
  /* Public API */
  loadAsync(e11) {
    return new Promise((t19, i27) => {
      this.load(e11, t19, null, i27);
    });
  }
  // urdf:    The path to the URDF within the package OR absolute
  // onComplete:      Callback that is passed the model once loaded
  load(e11, t19, i27, r24) {
    const n33 = this.manager, a22 = is3.extractUrlBase(e11), o12 = this.manager.resolveURL(e11);
    n33.itemStart(o12), fetch(o12, this.fetchOptions).then((l25) => {
      if (l25.ok)
        return i27 && i27(null), l25.text();
      throw new Error(`URDFLoader: Failed to load url '${o12}' with error code ${l25.status} : ${l25.statusText}.`);
    }).then((l25) => {
      this.workingPath === "" && (this.workingPath = a22);
      const c27 = this.parse(l25);
      t19(c27), n33.itemEnd(o12);
    }).catch((l25) => {
      r24 ? r24(l25) : console.error("URDFLoader: Error loading file.", l25), n33.itemError(o12), n33.itemEnd(o12);
    });
  }
  parse(e11) {
    const t19 = this.packages, i27 = this.loadMeshCb, r24 = this.parseVisual, n33 = this.parseCollision, a22 = this.workingPath, o12 = this.manager, l25 = {}, c27 = {}, h26 = {};
    function u35(A17) {
      if (!/^package:\/\//.test(A17))
        return a22 ? a22 + A17 : A17;
      const [M12, E24] = A17.replace(/^package:\/\//, "").split(/\/(.+)/);
      if (typeof t19 == "string")
        return t19.endsWith(M12) ? t19 + "/" + E24 : t19 + "/" + M12 + "/" + E24;
      if (t19 instanceof Function)
        return t19(M12) + "/" + E24;
      if (typeof t19 == "object")
        return M12 in t19 ? t19[M12] + "/" + E24 : (console.error(`URDFLoader : ${M12} not found in provided package list.`), null);
    }
    function d34(A17) {
      let M12;
      A17 instanceof Document ? M12 = [...A17.children] : A17 instanceof Element ? M12 = [A17] : M12 = [...new DOMParser().parseFromString(A17, "text/xml").children];
      const E24 = M12.filter((w29) => w29.nodeName === "robot").pop();
      return m33(E24);
    }
    function m33(A17) {
      const M12 = [...A17.children], E24 = M12.filter((G15) => G15.nodeName.toLowerCase() === "link"), w29 = M12.filter((G15) => G15.nodeName.toLowerCase() === "joint"), I16 = M12.filter((G15) => G15.nodeName.toLowerCase() === "material"), D17 = new k_2();
      D17.robotName = A17.getAttribute("name"), D17.urdfRobotNode = A17, I16.forEach((G15) => {
        const z19 = G15.getAttribute("name");
        h26[z19] = f39(G15);
      });
      const P19 = {}, x34 = {};
      E24.forEach((G15) => {
        const z19 = G15.getAttribute("name"), U18 = A17.querySelector(`child[link="${z19}"]`) === null;
        l25[z19] = y33(G15, P19, x34, U18 ? D17 : null);
      }), w29.forEach((G15) => {
        const z19 = G15.getAttribute("name");
        c27[z19] = _19(G15);
      }), D17.joints = c27, D17.links = l25, D17.colliders = x34, D17.visual = P19;
      const C19 = Object.values(c27);
      return C19.forEach((G15) => {
        G15 instanceof qc2 && c27[G15.mimicJoint].mimicJoints.push(G15);
      }), C19.forEach((G15) => {
        const z19 = /* @__PURE__ */ new Set(), U18 = (V14) => {
          if (z19.has(V14))
            throw new Error("URDFLoader: Detected an infinite loop of mimic joints.");
          z19.add(V14), V14.mimicJoints.forEach((j18) => {
            U18(j18);
          });
        };
        U18(G15);
      }), D17.frames = {
        ...x34,
        ...P19,
        ...l25,
        ...c27
      }, D17;
    }
    function _19(A17) {
      const M12 = [...A17.children], E24 = A17.getAttribute("type");
      let w29;
      const I16 = M12.find((z19) => z19.nodeName.toLowerCase() === "mimic");
      I16 ? (w29 = new qc2(), w29.mimicJoint = I16.getAttribute("joint"), w29.multiplier = parseFloat(I16.getAttribute("multiplier") || 1), w29.offset = parseFloat(I16.getAttribute("offset") || 0)) : w29 = new Xh2(), w29.urdfNode = A17, w29.name = A17.getAttribute("name"), w29.urdfName = w29.name, w29.jointType = E24;
      let D17 = null, P19 = null, x34 = [0, 0, 0], C19 = [0, 0, 0];
      M12.forEach((z19) => {
        const U18 = z19.nodeName.toLowerCase();
        U18 === "origin" ? (x34 = an4(z19.getAttribute("xyz")), C19 = an4(z19.getAttribute("rpy"))) : U18 === "child" ? P19 = l25[z19.getAttribute("link")] : U18 === "parent" ? D17 = l25[z19.getAttribute("link")] : U18 === "limit" && (w29.limit.lower = parseFloat(z19.getAttribute("lower") || w29.limit.lower), w29.limit.upper = parseFloat(z19.getAttribute("upper") || w29.limit.upper));
      }), D17.add(w29), w29.add(P19), Zc2(w29, C19), w29.position.set(x34[0], x34[1], x34[2]);
      const G15 = M12.filter((z19) => z19.nodeName.toLowerCase() === "axis")[0];
      if (G15) {
        const z19 = G15.getAttribute("xyz").split(/\s+/g).map((U18) => parseFloat(U18));
        w29.axis = new k18(z19[0], z19[1], z19[2]), w29.axis.normalize();
      }
      return w29;
    }
    function y33(A17, M12, E24, w29 = null) {
      w29 === null && (w29 = new jh2());
      const I16 = [...A17.children];
      return w29.name = A17.getAttribute("name"), w29.urdfName = w29.name, w29.urdfNode = A17, r24 && I16.filter((D17) => D17.nodeName.toLowerCase() === "visual").forEach((D17) => {
        const P19 = p26(D17, h26);
        if (w29.add(P19), D17.hasAttribute("name")) {
          const x34 = D17.getAttribute("name");
          P19.name = x34, P19.urdfName = x34, M12[x34] = P19;
        }
      }), n33 && I16.filter((D17) => D17.nodeName.toLowerCase() === "collision").forEach((D17) => {
        const P19 = p26(D17);
        if (w29.add(P19), D17.hasAttribute("name")) {
          const x34 = D17.getAttribute("name");
          P19.name = x34, P19.urdfName = x34, E24[x34] = P19;
        }
      }), w29;
    }
    function f39(A17) {
      const M12 = [...A17.children], E24 = new Jn5();
      return E24.name = A17.getAttribute("name") || "", M12.forEach((w29) => {
        const I16 = w29.nodeName.toLowerCase();
        if (I16 === "color") {
          const D17 = w29.getAttribute("rgba").split(/\s/g).map((P19) => parseFloat(P19));
          E24.color.setRGB(D17[0], D17[1], D17[2]), E24.opacity = D17[3], E24.transparent = D17[3] < 1, E24.depthWrite = !E24.transparent;
        } else if (I16 === "texture") {
          const D17 = w29.getAttribute("filename");
          if (D17) {
            const P19 = new Ho2(o12), x34 = u35(D17);
            E24.map = P19.load(x34), E24.map.colorSpace = yi6;
          }
        }
      }), E24;
    }
    function p26(A17, M12 = {}) {
      const E24 = A17.nodeName.toLowerCase() === "collision", w29 = [...A17.children];
      let I16 = null;
      const D17 = w29.filter((x34) => x34.nodeName.toLowerCase() === "material")[0];
      if (D17) {
        const x34 = D17.getAttribute("name");
        x34 && x34 in M12 ? I16 = M12[x34] : I16 = f39(D17);
      } else
        I16 = new Jn5();
      const P19 = E24 ? new I_2() : new D_2();
      return P19.urdfNode = A17, w29.forEach((x34) => {
        const C19 = x34.nodeName.toLowerCase();
        if (C19 === "geometry") {
          const G15 = x34.children[0].nodeName.toLowerCase();
          if (G15 === "mesh") {
            const z19 = x34.children[0].getAttribute("filename"), U18 = u35(z19);
            if (U18 !== null) {
              const V14 = x34.children[0].getAttribute("scale");
              if (V14) {
                const j18 = an4(V14);
                P19.scale.set(j18[0], j18[1], j18[2]);
              }
              i27(U18, o12, (j18, W8) => {
                W8 ? console.error("URDFLoader: Error loading mesh.", W8) : j18 && (j18 instanceof Rt8 && (j18.material = I16), j18.position.set(0, 0, 0), j18.quaternion.identity(), P19.add(j18));
              });
            }
          } else if (G15 === "box") {
            const z19 = new Rt8();
            z19.geometry = new Lr5(1, 1, 1), z19.material = I16;
            const U18 = an4(x34.children[0].getAttribute("size"));
            z19.scale.set(U18[0], U18[1], U18[2]), P19.add(z19);
          } else if (G15 === "sphere") {
            const z19 = new Rt8();
            z19.geometry = new Bo2(1, 30, 30), z19.material = I16;
            const U18 = parseFloat(x34.children[0].getAttribute("radius")) || 0;
            z19.scale.set(U18, U18, U18), P19.add(z19);
          } else if (G15 === "cylinder") {
            const z19 = new Rt8();
            z19.geometry = new ua2(1, 1, 1, 30), z19.material = I16;
            const U18 = parseFloat(x34.children[0].getAttribute("radius")) || 0, V14 = parseFloat(x34.children[0].getAttribute("length")) || 0;
            z19.scale.set(U18, V14, U18), z19.rotation.set(Math.PI / 2, 0, 0), P19.add(z19);
          }
        } else if (C19 === "origin") {
          const G15 = an4(x34.getAttribute("xyz")), z19 = an4(x34.getAttribute("rpy"));
          P19.position.set(G15[0], G15[1], G15[2]), P19.rotation.set(0, 0, 0), Zc2(P19, z19);
        }
      }), P19;
    }
    return d34(e11);
  }
  // Default mesh loading function
  defaultMeshLoader(e11, t19, i27) {
    /\.stl$/i.test(e11) ? new R_2(t19).load(e11, (r24) => {
      const n33 = new Rt8(r24, new Jn5());
      i27(n33);
    }) : /\.dae$/i.test(e11) ? new N_2(t19).load(e11, (r24) => i27(r24.scene)) : console.warn(`URDFLoader: Could not load model at ${e11}.
No loader available`);
  }
};
var U_2 = Object.defineProperty;
var In5 = (s18, e11, t19, i27) => {
  for (var r24 = void 0, n33 = s18.length - 1, a22; n33 >= 0; n33--)
    (a22 = s18[n33]) && (r24 = a22(e11, t19, r24) || r24);
  return r24 && U_2(e11, t19, r24), r24;
};
var ao2;
var Jc;
var oo;
var Nr5 = (oo = class extends x {
  constructor() {
    super(...arguments), Ht7(this, ao2), this.urdfConfigs = qo2, this.name = this.urdfConfigs[0].name, this.jointValues = {}, this.pose = [0, 0, 0], this._translation = [0, 0, 0], this._rotation = [0, 0, 0, 0], this.loader = new jo2(), this.group = new Lt5();
  }
  getUrdfConfig() {
    return this.urdfConfigs.find(({ name: s18 }) => s18 === this.name) ?? this.urdfConfigs[0];
  }
  getField() {
    const s18 = this.closest("frc-field3d");
    if (s18)
      return s18;
  }
  static updatePose(s18, e11) {
    const [t19, i27, r24] = e11.translation;
    s18.position.set(t19, i27, r24), s18.rotation.setFromQuaternion(pa2(e11.rotation));
  }
  loadRobotModel() {
    const s18 = this.getField(), e11 = this.getUrdfConfig();
    if (!s18)
      return;
    const t19 = s18.getFieldGroup();
    t19.remove(this.group), this.object && this.group.remove(this.object);
    const i27 = new Fo2(), r24 = new qh2(i27), n33 = Gh2(e11.src ?? "");
    r24.packages = {
      "": An5(s18.assetPathPrefix ?? "", n33)
      // The equivalent of a (list of) ROS package(s):// directory
    };
    const a22 = new Promise((c27) => {
      if (e11.src)
        r24.load(
          An5(s18.assetPathPrefix ?? "", e11.src),
          (h26) => {
            c27(h26);
          }
        );
      else {
        const h26 = r24.parse(e11.content ?? "");
        c27(h26);
      }
    }), o12 = new Lt5();
    this.group = o12, t19.add(this.group);
    const l25 = new Lt5();
    this.object = l25, o12.add(l25), l25.rotation.setFromQuaternion(
      yr4(e11.rotations)
    ), l25.position.set(...e11.position), a22.then((c27) => {
      this.robot = c27, this.updateJoints(), l25.add(c27), Bi3(this, ao2, Jc).call(this);
    });
  }
  updateJoints() {
    var s18;
    (s18 = this.robot) == null || s18.setJointValues(this.jointValues);
  }
  firstUpdated() {
    this.updateUrdfConfigs(), this.renderObject();
    const s18 = this.closest("frc-field3d");
    s18 == null || s18.addEventListener("urdfConfigsChange", () => {
      this.updateUrdfConfigs();
    });
  }
  updated(s18) {
    if (s18.has("name") && this.loadRobotModel(), s18.has("jointValues") && this.updateJoints(), s18.has("pose")) {
      const [e11 = 0, t19 = 0, i27 = 0] = this.pose;
      this._translation = [e11, t19], this._rotation = i27;
    }
  }
  updateUrdfConfigs() {
    const s18 = this.getField(), e11 = s18 == null ? void 0 : s18.urdfConfigs;
    e11 != null && e11.length && e11 !== this.urdfConfigs && (this.urdfConfigs = e11, this.urdfConfigs.some(
      (t19) => t19.name === this.name
    ) || (this.name = this.urdfConfigs[0].name));
  }
  renderObject() {
    this.group && oo.updatePose(this.group, {
      translation: this._translation.length === 2 ? [...this._translation, 0] : this._translation,
      rotation: typeof this._rotation == "number" ? Kn5([{ axis: "z", degrees: this._rotation }]) : this._rotation
    }), requestAnimationFrame(() => {
      this.renderObject();
    });
  }
}, ao2 = /* @__PURE__ */ new WeakSet(), Jc = function() {
  this.dispatchEvent(
    new CustomEvent("urdfLoad", {
      detail: {
        urdf: this.robot
      },
      bubbles: true,
      composed: true
    })
  );
}, oo);
In5([
  n2()
], Nr5.prototype, "urdfConfigs");
In5([
  Rt({ type: String })
], Nr5.prototype, "name");
In5([
  Rt({ type: Object, attribute: "joint-values" })
], Nr5.prototype, "jointValues");
In5([
  Rt({ type: Array })
], Nr5.prototype, "pose");
In5([
  n2()
], Nr5.prototype, "_translation");
In5([
  n2()
], Nr5.prototype, "_rotation");
var Yh2 = Nr5;
customElements.get("frc-field3d-urdf") || customElements.define("frc-field3d-urdf", Yh2);
var O_2 = Object.defineProperty;
var mi6 = (s18, e11, t19, i27) => {
  for (var r24 = void 0, n33 = s18.length - 1, a22; n33 >= 0; n33--)
    (a22 = s18[n33]) && (r24 = a22(e11, t19, r24) || r24);
  return r24 && O_2(e11, t19, r24), r24;
};
var lo2;
var Kc2;
var cr5;
var si6 = (cr5 = class extends x {
  constructor() {
    super(...arguments), Ht7(this, lo2), this.fieldConfigs = A_2, this.objectConfigs = Vh2, this.urdfConfigs = qo2, this.game = this.fieldConfigs[0].game, this.origin = "red", this.backgroundColor = "black", this.enableVR = false, this.fixedCamera = false, this.ORBIT_FIELD_DEFAULT_TARGET = new k18(0, 0.5, 0), this.ORBIT_FIELD_DEFAULT_POSITION = new k18(0, 6, -12), this.WPILIB_ROTATION = yr4([
      {
        axis: "x",
        degrees: -90
      },
      {
        axis: "y",
        degrees: 180
      }
    ]), this.cameraPoseObject = new _t7(), this.scene = new ko2(), this.loader = new jo2();
  }
  getFieldConfig() {
    return this.fieldConfigs.find(({ game: s18 }) => s18 === this.game) ?? this.fieldConfigs[0];
  }
  getCamera() {
    const s18 = this.getBoundingClientRect();
    return new Bt6(
      50,
      s18.width / s18.height,
      0.1,
      100
    );
  }
  static getOrbitControls(s18, e11) {
    const t19 = new Fh2(s18, e11);
    return t19.maxDistance = 30, t19.enabled = true, t19.update(), t19;
  }
  static addLights(s18) {
    const e11 = new da2(16777215, 0.2);
    e11.position.set(0, 10, 0), s18.add(e11);
    const t19 = 16777215, i27 = 4473924, r24 = 1, n33 = new kh2(
      t19,
      i27,
      r24
    );
    s18.add(n33);
  }
  initRenderer() {
    if (!this.canvas)
      return;
    this.renderer = new Do2({
      antialias: true,
      canvas: this.canvas
    });
    const s18 = this.getBoundingClientRect();
    this.renderer.setSize(s18.width, s18.height), this.vrButton = Tr5.createButton(this.renderer), this.renderer.xr.enabled = this.enableVR, this.renderer.setAnimationLoop(() => this.renderField());
  }
  initScene() {
    this.wpilibCoordinateGroup = new Lt5(), this.scene.add(this.wpilibCoordinateGroup), this.wpilibCoordinateGroup.rotation.setFromQuaternion(this.WPILIB_ROTATION), this.wpilibFieldCoordinateGroup = new Lt5(), this.wpilibCoordinateGroup.add(this.wpilibFieldCoordinateGroup), this.wpilibFieldCoordinateGroup.add(this.cameraPoseObject);
  }
  updateCanvasSize() {
    var s18;
    const e11 = this.getBoundingClientRect();
    (s18 = this.renderer) == null || s18.setSize(e11.width, e11.height), this.camera.aspect = e11.width / e11.height, this.camera.updateProjectionMatrix();
  }
  static adjustMaterials(s18) {
    s18.traverse((e11) => {
      const t19 = e11;
      if (t19.isMesh && t19.material instanceof as3) {
        const i27 = t19.material;
        i27.metalness = 0, i27.roughness = 1;
      }
    });
  }
  static updatePose(s18, e11) {
    const [t19, i27, r24] = e11.translation;
    s18.position.set(t19, i27, r24), s18.rotation.setFromQuaternion(pa2(e11.rotation));
  }
  loadFieldModel(s18) {
    this.fieldObject && this.wpilibCoordinateGroup.remove(this.fieldObject);
    const e11 = An5(this.assetPathPrefix ?? "", s18.src);
    this.loader.load(e11, (t19) => {
      this.fieldObject = t19.scene, this.wpilibCoordinateGroup.add(t19.scene), cr5.adjustMaterials(t19.scene), t19.scene.rotation.setFromQuaternion(
        yr4(s18.rotations)
      );
    });
  }
  getFieldGroup() {
    return this.wpilibFieldCoordinateGroup;
  }
  createFieldObject(s18) {
    return new L_2(this, s18 == null ? void 0 : s18.onCreate, s18 == null ? void 0 : s18.onRemove);
  }
  firstUpdated() {
    this.initScene(), this.initRenderer(), this.camera = this.getCamera(), this.controls = cr5.getOrbitControls(this.camera, this.canvas), this.camera.position.copy(this.ORBIT_FIELD_DEFAULT_POSITION), this.controls.target.copy(this.ORBIT_FIELD_DEFAULT_TARGET), cr5.addLights(this.scene), new ResizeObserver(() => {
      this.updateCanvasSize();
    }).observe(this);
  }
  updated(s18) {
    if (s18.has("fieldConfigs") && (this.fieldConfigs.some(
      (e11) => e11.game === this.game
    ) || (this.game = this.fieldConfigs[0].game), this.loadFieldModel(this.getFieldConfig())), s18.has("game") && this.loadFieldModel(this.getFieldConfig()), s18.has("backgroundColor") && (this.scene.background = new ze7(this.backgroundColor)), s18.has("origin")) {
      const e11 = this.getFieldConfig();
      if (e11) {
        const t19 = this.origin !== "red";
        this.wpilibFieldCoordinateGroup.setRotationFromAxisAngle(
          new k18(0, 0, 1),
          t19 ? 0 : Math.PI
        ), this.wpilibFieldCoordinateGroup.position.set(
          n23(e11.size[0] / 2, e11.unit, "m") * (t19 ? -1 : 1),
          n23(e11.size[1] / 2, e11.unit, "m") * (t19 ? -1 : 1),
          0
        );
      }
    }
    if (s18.has("enableVR") && (this.enableVR ? this.container.appendChild(this.vrButton) : this.vrButton.remove(), this.renderer && (this.renderer.xr.enabled = this.enableVR)), s18.has("fixedCamera") && (this.controls.enabled = !this.fixedCamera), (s18.has("cameraPose") || s18.has("fixedCamera")) && this.fixedCamera) {
      const e11 = this.cameraPose ? Hh2(this.cameraPose) : Xo2();
      Bi3(this, lo2, Kc2).call(this, e11);
    }
    s18.has("urdfConfigs") && this.dispatchEvent(
      new CustomEvent("urdfConfigsChange", {
        detail: {
          urdfConfigs: this.urdfConfigs
        },
        bubbles: true,
        composed: true
      })
    );
  }
  renderField() {
    var s18;
    (s18 = this.renderer) == null || s18.render(this.scene, this.camera), this.fixedCamera || this.controls.update();
  }
  connectedCallback() {
    super.connectedCallback(), this.initRenderer();
  }
  disconnectedCallback() {
    var s18;
    super.disconnectedCallback(), (s18 = this.renderer) == null || s18.dispose(), this.renderer = void 0;
  }
  render() {
    return Ht` <div class="container">
      <canvas></canvas>
    </div>`;
  }
}, lo2 = /* @__PURE__ */ new WeakSet(), Kc2 = function(s18) {
  cr5.updatePose(this.cameraPoseObject, s18);
  const e11 = new k18();
  this.cameraPoseObject.getWorldPosition(e11);
  const t19 = new jt8();
  this.cameraPoseObject.getWorldQuaternion(t19), this.camera.position.copy(e11), this.camera.quaternion.copy(
    t19.multiply(
      yr4([
        { axis: "z", degrees: -90 },
        { axis: "y", degrees: -90 }
      ])
    )
  ), this.camera.updateMatrixWorld();
}, cr5.styles = Mt2`
    :host {
      position: relative;
      display: block;
      width: 700px;
      height: 400px;
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
  `, cr5);
mi6([
  Rt({ type: Array })
], si6.prototype, "fieldConfigs");
mi6([
  Rt({ type: Array })
], si6.prototype, "objectConfigs");
mi6([
  Rt({ type: Array })
], si6.prototype, "urdfConfigs");
mi6([
  Rt({ type: String })
], si6.prototype, "game");
mi6([
  Rt({ type: String })
], si6.prototype, "origin");
mi6([
  Rt({ type: String, attribute: "background-color" })
], si6.prototype, "backgroundColor");
mi6([
  Rt({ type: Boolean, attribute: "enable-vr" })
], si6.prototype, "enableVR");
mi6([
  Rt({ type: String })
], si6.prototype, "assetPathPrefix");
mi6([
  Rt({ type: Array, attribute: "camera-pose" })
], si6.prototype, "cameraPose");
mi6([
  Rt({ type: Boolean, attribute: "fixed-camera" })
], si6.prototype, "fixedCamera");
mi6([
  a("canvas")
], si6.prototype, "canvas");
mi6([
  a(".container")
], si6.prototype, "container");
var Zh2 = si6;
customElements.get("frc-field3d") || customElements.define("frc-field3d", Zh2);
var z_2 = Object.defineProperty;
var sr5 = (s18, e11, t19, i27) => {
  for (var r24 = void 0, n33 = s18.length - 1, a22; n33 >= 0; n33--)
    (a22 = s18[n33]) && (r24 = a22(e11, t19, r24) || r24);
  return r24 && z_2(e11, t19, r24), r24;
};
var co2;
var $c2;
var jn5;
var Wi3 = (jn5 = class extends x {
  constructor() {
    super(...arguments), Ht7(this, co2), this.urdfConfigs = qo2, this.name = this.urdfConfigs[0].name, this.backgroundColor = "black", this.enableVR = false, this.angles = {}, this.scene = new ko2(), this.group = new Lt5();
  }
  getCamera() {
    const s18 = this.getBoundingClientRect(), e11 = new Bt6(
      50,
      s18.width / s18.height,
      0.1,
      100
    );
    return e11.position.set(1, 1, 1), e11.lookAt(0, 0, 0.5), e11.up.set(0, 0, 1), e11;
  }
  static getOrbitControls(s18, e11) {
    const t19 = new Fh2(s18, e11);
    return t19.maxDistance = 30, t19.enabled = true, t19.update(), t19;
  }
  static addLights(s18) {
    const e11 = new da2(16777215, 0.2);
    e11.position.set(0, 10, 0), s18.add(e11);
    const t19 = 16777215, i27 = 4473924, r24 = 1, n33 = new kh2(
      t19,
      i27,
      r24
    );
    s18.add(n33);
  }
  initRenderer() {
    if (!this.canvas)
      return;
    this.renderer = new Do2({
      antialias: true,
      canvas: this.canvas
    });
    const s18 = this.getBoundingClientRect();
    this.renderer.setSize(s18.width, s18.height), this.vrButton = Tr5.createButton(this.renderer), this.renderer.xr.enabled = this.enableVR, this.renderer.setAnimationLoop(() => this.renderField());
  }
  updateCanvasSize() {
    var s18;
    const e11 = this.getBoundingClientRect();
    (s18 = this.renderer) == null || s18.setSize(e11.width, e11.height), this.camera.aspect = e11.width / e11.height, this.camera.updateProjectionMatrix();
  }
  firstUpdated() {
    this.initRenderer(), this.camera = this.getCamera(), this.controls = jn5.getOrbitControls(this.camera, this.canvas), jn5.addLights(this.scene);
    const s18 = new oa2(5, 5, 20, 20), e11 = new xi6({
      color: 65280,
      side: ui6,
      wireframe: true
    }), t19 = new Rt8(s18, e11);
    this.scene.add(t19), new ResizeObserver(() => {
      this.updateCanvasSize();
    }).observe(this);
  }
  getUrdfConfig() {
    return this.urdfConfigs.find(({ name: s18 }) => s18 === this.name) ?? this.urdfConfigs[0];
  }
  updateAngles() {
    var s18;
    (s18 = this.robot) == null || s18.setAngles(this.angles);
  }
  loadRobotModel() {
    const s18 = this.getUrdfConfig(), e11 = new Fo2(), t19 = new qh2(e11), i27 = Gh2(s18.src ?? "");
    t19.packages = {
      "": An5(this.assetPathPrefix ?? "", i27)
      // The equivalent of a (list of) ROS package(s):// directory
    };
    const r24 = new Promise((o12) => {
      if (s18.src)
        t19.load(
          An5(this.assetPathPrefix ?? "", s18.src),
          (l25) => {
            o12(l25);
          }
        );
      else {
        const l25 = t19.parse(s18.content ?? "");
        o12(l25);
      }
    }), n33 = new Lt5();
    this.group = n33, this.scene.add(this.group);
    const a22 = new Lt5();
    this.object = a22, n33.add(a22), a22.rotation.setFromQuaternion(
      yr4(s18.rotations)
    ), a22.position.set(...s18.position), r24.then((o12) => {
      this.robot = o12, this.updateAngles(), a22.add(o12), Bi3(this, co2, $c2).call(this);
    });
  }
  updated(s18) {
    (s18.has("urdfConfigs") || s18.has("name")) && (this.urdfConfigs.some(
      (e11) => e11.name === this.name
    ) || (this.name = this.urdfConfigs[0].name), this.loadRobotModel()), s18.has("backgroundColor") && (this.scene.background = new ze7(this.backgroundColor)), s18.has("enableVR") && (this.enableVR ? this.container.appendChild(this.vrButton) : this.vrButton.remove(), this.renderer && (this.renderer.xr.enabled = this.enableVR));
  }
  renderField() {
    var s18;
    (s18 = this.renderer) == null || s18.render(this.scene, this.camera), this.controls.update();
  }
  connectedCallback() {
    super.connectedCallback(), this.initRenderer();
  }
  disconnectedCallback() {
    var s18;
    super.disconnectedCallback(), (s18 = this.renderer) == null || s18.dispose(), this.renderer = void 0;
  }
  render() {
    return Ht` <div class="container">
      <canvas></canvas>
    </div>`;
  }
}, co2 = /* @__PURE__ */ new WeakSet(), $c2 = function() {
  this.dispatchEvent(
    new CustomEvent("urdfLoad", {
      detail: {
        urdf: this.robot
      }
    })
  );
}, jn5.styles = Mt2`
    :host {
      position: relative;
      display: block;
      width: 700px;
      height: 400px;
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
  `, jn5);
sr5([
  Rt({ type: Array })
], Wi3.prototype, "urdfConfigs");
sr5([
  Rt({ type: String })
], Wi3.prototype, "name");
sr5([
  Rt({ type: String, attribute: "background-color" })
], Wi3.prototype, "backgroundColor");
sr5([
  Rt({ type: Boolean, attribute: "enable-vr" })
], Wi3.prototype, "enableVR");
sr5([
  Rt({ type: String })
], Wi3.prototype, "assetPathPrefix");
sr5([
  Rt({ type: Object })
], Wi3.prototype, "angles");
sr5([
  a("canvas")
], Wi3.prototype, "canvas");
sr5([
  a(".container")
], Wi3.prototype, "container");
var Jh2 = Wi3;
customElements.get("frc-urdf") || customElements.define("frc-urdf", Jh2);
var B_ = Object.defineProperty;
var Kh2 = (s18, e11, t19, i27) => {
  for (var r24 = void 0, n33 = s18.length - 1, a22; n33 >= 0; n33--)
    (a22 = s18[n33]) && (r24 = a22(e11, t19, r24) || r24);
  return r24 && B_(e11, t19, r24), r24;
};
var Qs2;
var gn4;
var mr4;
var _n4;
var fr5;
var To;
var $h2;
var fa2 = class extends x {
  constructor() {
    super(...arguments), Ht7(this, To), Ht7(this, Qs2), Ht7(this, gn4), Ht7(this, mr4), Ht7(this, _n4), Ht7(this, fr5), this.pose = [0, 0, 0], this._pose3d = Xo2();
  }
  getField() {
    return this.closest("frc-field3d");
  }
  loadRobotModel() {
    ft11(this, Qs2).create();
  }
  firstUpdated() {
    const e11 = new Lr5(0.2, 0.2, 0.2), t19 = new S02(e11), i27 = new Tn4({ color: 16044581, linewidth: 4 }), r24 = new zo2(t19, i27);
    ei6(this, gn4, r24), ei6(this, mr4, new to2(
      new k18(1, 0, 0).normalize(),
      new k18(0, 0, 0),
      0.3,
      16711680,
      0.1,
      0.05
    )), ei6(this, _n4, new to2(
      new k18(1, 0, 0).normalize(),
      new k18(0, 0, 0),
      0.3,
      16711680,
      0.1,
      0.05
    )), ei6(this, fr5, new to2(
      new k18(1, 0, 0).normalize(),
      new k18(0, 0, 0),
      0.3,
      16711680,
      0.1,
      0.05
    )), ei6(this, Qs2, this.getField().createFieldObject({
      onCreate: (n33) => {
        const a22 = n33.getGroup();
        a22.add(ft11(this, gn4)), a22.add(ft11(this, mr4)), a22.add(ft11(this, _n4)), a22.add(ft11(this, fr5));
      }
    }));
  }
  updated(e11) {
    e11.has("pose") && (this._pose3d = Hh2(this.pose), Bi3(this, To, $h2).call(this));
  }
};
Qs2 = /* @__PURE__ */ new WeakMap(), gn4 = /* @__PURE__ */ new WeakMap(), mr4 = /* @__PURE__ */ new WeakMap(), _n4 = /* @__PURE__ */ new WeakMap(), fr5 = /* @__PURE__ */ new WeakMap(), To = /* @__PURE__ */ new WeakSet(), $h2 = function() {
  const s18 = pa2(this._pose3d.rotation), [e11, t19, i27] = this._pose3d.translation;
  ft11(this, gn4).position.set(e11, t19, i27), ft11(this, gn4).rotation.setFromQuaternion(s18), ft11(this, mr4).rotation.setFromQuaternion(s18), ft11(this, mr4).rotateZ(-Math.PI / 2), ft11(this, mr4).position.set(e11, t19, i27), ft11(this, _n4).rotation.setFromQuaternion(s18), ft11(this, _n4).position.set(e11, t19, i27), ft11(this, fr5).setRotationFromQuaternion(s18), ft11(this, fr5).rotateX(Math.PI / 2), ft11(this, fr5).position.set(e11, t19, i27);
};
Kh2([
  Rt({ type: Array })
], fa2.prototype, "pose");
Kh2([
  n2()
], fa2.prototype, "_pose3d");
customElements.get("frc-field3d-pose-visualizer") || customElements.define("frc-field3d-pose-visualizer", fa2);
var F_ = Object.defineProperty;
var Dn4 = (s18, e11, t19, i27) => {
  for (var r24 = void 0, n33 = s18.length - 1, a22; n33 >= 0; n33--)
    (a22 = s18[n33]) && (r24 = a22(e11, t19, r24) || r24);
  return r24 && F_(e11, t19, r24), r24;
};
var gr5;
var vn5;
var ea2;
var _r4;
var Eo2;
var Qh2;
var Qc2;
var eu2;
var Pr5 = class extends x {
  constructor() {
    super(...arguments), Ht7(this, _r4), Ht7(this, gr5), Ht7(this, vn5), Ht7(this, ea2), this.name = "", this.pose = [0, 0, 0], this.sourceProvider = "", this.sourceKey = "", ei6(this, gr5, []), ei6(this, vn5, false);
  }
  getJointValues() {
    const e11 = Bi3(this, _r4, Eo2).call(this);
    if (!(e11 != null && e11.hasChildren())) {
      const a22 = {};
      return ft11(this, gr5).forEach((o12) => {
        a22[o12] = 0;
      }), a22;
    }
    const t19 = [this.sourceKey, "joints"].join("/"), i27 = this.store.getSource(
      this.sourceProvider,
      t19
    ), r24 = (i27 == null ? void 0 : i27.getJson(false)) ?? {}, n33 = {};
    return ft11(this, gr5).forEach((a22) => {
      n33[a22] = r24[a22] ?? 0;
    }), n33;
  }
  createRenderRoot() {
    return this;
  }
  updated(e11) {
    (e11.has("sourceProvider") || e11.has("sourceKey") || e11.has("store")) && (ei6(this, vn5, false), Bi3(this, _r4, Qh2).call(this));
  }
  render() {
    return Ht`
      <frc-field3d-urdf
        @urdfLoad=${Bi3(this, _r4, eu2)}
        .jointValues=${this.getJointValues()}
        .pose=${this.pose}
        .name=${this.name}
      ></frc-field3d-urdf>
    `;
  }
};
gr5 = /* @__PURE__ */ new WeakMap(), vn5 = /* @__PURE__ */ new WeakMap(), ea2 = /* @__PURE__ */ new WeakMap(), _r4 = /* @__PURE__ */ new WeakSet(), Eo2 = function() {
  const { provider: s18, store: e11, sourceProvider: t19, sourceKey: i27 } = this;
  if (!(!s18 || !e11 || !t19 || !i27))
    return e11.getSource(t19, i27);
}, Qh2 = function() {
  var s18, e11;
  (s18 = ft11(this, ea2)) == null || s18.call(this), !(!this.sourceProvider || !this.sourceKey) && ei6(this, ea2, (e11 = this.store) == null ? void 0 : e11.subscribe(
    this.sourceProvider,
    this.sourceKey,
    () => {
      Bi3(this, _r4, Qc2).call(this), this.requestUpdate();
    },
    true
  ));
}, Qc2 = function() {
  ft11(this, vn5) || !Bi3(this, _r4, Eo2).call(this) || (ft11(this, gr5).forEach((s18) => {
    var e11;
    const t19 = [this.sourceKey, "joints", s18].join(
      "/"
    ), i27 = this.store.getSource(
      this.sourceProvider,
      t19
    );
    i27 != null && i27.hasValue() || (e11 = this.provider) == null || e11.userUpdate(t19, 0);
  }), ei6(this, vn5, true));
}, eu2 = function(s18) {
  const e11 = s18.detail.urdf;
  ei6(this, gr5, Object.keys(e11.joints).sort()), Object.values(e11.joints).forEach((t19) => {
    t19.ignoreLimits = true;
  }), this.requestUpdate();
};
Dn4([
  Rt({ type: String })
], Pr5.prototype, "name");
Dn4([
  Rt({ type: Array })
], Pr5.prototype, "pose");
Dn4([
  Rt({ type: Object, attribute: false })
], Pr5.prototype, "provider");
Dn4([
  Rt({ type: Object, attribute: false })
], Pr5.prototype, "store");
Dn4([
  Rt({ type: String, attribute: "source-provider" })
], Pr5.prototype, "sourceProvider");
Dn4([
  Rt({ type: String, attribute: "source-key" })
], Pr5.prototype, "sourceKey");
customElements.get("frc-field3d-urdf-wrapper") || customElements.define("frc-field3d-urdf-wrapper", Pr5);
var X_ = xt({
  tagName: "frc-field3d",
  elementClass: Zh2,
  react: import_react13.default
});
var q_2 = xt({
  tagName: "frc-field3d-object",
  elementClass: Wh2,
  react: import_react13.default
});
var Y_ = xt({
  tagName: "frc-field3d-urdf",
  elementClass: Yh2,
  react: import_react13.default,
  events: {
    onurdfload: "urdfLoad"
  }
});
var Z_ = xt({
  tagName: "frc-urdf",
  elementClass: Jh2,
  react: import_react13.default,
  events: {
    onurdfload: "urdfLoad"
  }
});
var J_ = xt({
  tagName: "frc-field3d-pose-visualizer",
  elementClass: fa2,
  react: import_react13.default
});

// node_modules/@frc-web-components/react/dist/components/Form.es.js
var import_react14 = __toESM(require_react(), 1);
var m24 = (t19) => {
  throw TypeError(t19);
};
var O15 = (t19, e11, s18) => e11.has(t19) || m24("Cannot " + s18);
var y22 = (t19, e11, s18) => e11.has(t19) ? m24("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(t19) : e11.set(t19, s18);
var g22 = (t19, e11, s18) => (O15(t19, e11, "access private method"), s18);
var A15 = Object.defineProperty;
var n24 = (t19, e11, s18, E24) => {
  for (var o12 = void 0, r24 = t19.length - 1, l25; r24 >= 0; r24--)
    (l25 = t19[r24]) && (o12 = l25(e11, s18, o12) || o12);
  return o12 && A15(e11, s18, o12), o12;
};
var h19;
var f27;
var $17 = class extends x {
  constructor() {
    super(...arguments), y22(this, h19), this.disabled = false, this.label = "", this.options = [], this.selected = [], this.direction = "vertical";
  }
  render() {
    return Ht`
      <vaadin-checkbox-group
        .disabled=${this.disabled}
        .label=${this.label}
        theme=${this.direction}
        .value=${this.selected}
      >
        ${this.options.map(
      (e11) => Ht`
            <vaadin-checkbox value=${e11} @change=${() => g22(this, h19, f27).call(this)}
              >${e11}</vaadin-checkbox
            >
          `
    )}
      </vaadin-checkbox-group>
    `;
  }
};
h19 = /* @__PURE__ */ new WeakSet(), f27 = function() {
  this.selected = this.element.value;
  const t19 = new CustomEvent("change", {
    bubbles: true,
    composed: true,
    detail: { selected: this.selected }
  });
  this.dispatchEvent(t19);
}, $17.styles = Mt2`
    :host {
      display: inline-block;
    }
  `;
var i20 = $17;
n24([
  Rt({ type: Boolean })
], i20.prototype, "disabled");
n24([
  Rt({ type: String })
], i20.prototype, "label");
n24([
  Rt({ type: Array })
], i20.prototype, "options");
n24([
  Rt({ type: Array })
], i20.prototype, "selected");
n24([
  Rt({ type: String })
], i20.prototype, "direction");
n24([
  a("vaadin-checkbox-group")
], i20.prototype, "element");
customElements.get("frc-checkbox-group") || customElements.define("frc-checkbox-group", i20);
var B16 = Object.defineProperty;
var d23 = (t19, e11, s18, E24) => {
  for (var o12 = void 0, r24 = t19.length - 1, l25; r24 >= 0; r24--)
    (l25 = t19[r24]) && (o12 = l25(e11, s18, o12) || o12);
  return o12 && B16(e11, s18, o12), o12;
};
var u24;
var k19;
var x22 = class extends x {
  constructor() {
    super(...arguments), y22(this, u24), this.disabled = false, this.label = "", this.options = [], this.selected = "", this.direction = "vertical";
  }
  render() {
    return Ht`
      <vaadin-radio-group
        @value-changed=${(e11) => g22(this, u24, k19).call(this, e11)}
        .disabled=${this.disabled}
        .label=${this.label}
        theme=${this.direction}
        .value=${this.selected}
      >
        ${this.options.map(
      (e11) => Ht`
            <vaadin-radio-button value=${e11}>${e11}</vaadin-radio-button>
          `
    )}
      </vaadin-radio-group>
    `;
  }
};
u24 = /* @__PURE__ */ new WeakSet(), k19 = function(t19) {
  this.selected = t19.detail.value;
  const e11 = new CustomEvent("change", {
    bubbles: true,
    composed: true,
    detail: { selected: this.selected }
  });
  this.dispatchEvent(e11);
}, x22.styles = Mt2`
    :host {
      display: inline-block;
    }
  `;
var c18 = x22;
d23([
  Rt({ type: Boolean })
], c18.prototype, "disabled");
d23([
  Rt({ type: String })
], c18.prototype, "label");
d23([
  Rt({ type: Array })
], c18.prototype, "options");
d23([
  Rt({ type: String })
], c18.prototype, "selected");
d23([
  Rt({ type: String })
], c18.prototype, "direction");
customElements.get("frc-radio-group") || customElements.define("frc-radio-group", c18);
var G12 = xt({
  tagName: "frc-checkbox-group",
  elementClass: i20,
  react: import_react14.default,
  events: {
    onchange: "change"
  }
});

// node_modules/@frc-web-components/react/dist/components/Gauge.es.js
var import_react15 = __toESM(require_react(), 1);
var P14 = { exports: {} };
var ft12 = P14.exports;
var X11;
function mt11() {
  return X11 || (X11 = 1, function(y33) {
    (function(i27, u35) {
      var p26 = u35(i27);
      y33.exports ? y33.exports = p26 : i27.Gauge = p26;
    })(typeof window > "u" ? ft12 : window, function(i27, u35) {
      var p26 = i27.document, g31 = Array.prototype.slice, b33 = i27.requestAnimationFrame || i27.mozRequestAnimationFrame || i27.webkitRequestAnimationFrame || i27.msRequestAnimationFrame || function(m33) {
        return setTimeout(m33, 1e3 / 60);
      };
      function A17(m33) {
        var E24 = m33.duration, k27 = 1, N19 = 60 * E24, v30 = m33.start || 0, z19 = m33.end, C19 = z19 - v30, q13 = m33.step, R20 = m33.easing || function(e11) {
          return (e11 /= 0.5) < 1 ? 0.5 * Math.pow(e11, 3) : 0.5 * (Math.pow(e11 - 2, 3) + 2);
        };
        function V14() {
          var e11 = k27 / N19, t19 = C19 * R20(e11) + v30;
          q13(t19, k27), k27 += 1, e11 < 1 && b33(V14);
        }
        b33(V14);
      }
      var W8 = function() {
        var m33 = "http://www.w3.org/2000/svg", E24 = {
          centerX: 50,
          centerY: 50
        }, k27 = {
          dialRadius: 40,
          dialStartAngle: 135,
          dialEndAngle: 45,
          value: 0,
          max: 100,
          min: 0,
          valueDialClass: "value",
          valueClass: "value-text",
          dialClass: "dial",
          gaugeClass: "gauge",
          showValue: true,
          gaugeColor: null,
          label: function(e11) {
            return Math.round(e11);
          }
        };
        function N19() {
          var e11 = arguments[0], t19 = g31.call(arguments, 1);
          return t19.forEach(function(n33) {
            for (var a22 in n33)
              n33.hasOwnProperty(a22) && (e11[a22] = n33[a22]);
          }), e11;
        }
        function v30(e11, t19, n33) {
          var a22 = p26.createElementNS(m33, e11);
          for (var s18 in t19)
            a22.setAttribute(s18, t19[s18]);
          return n33 && n33.forEach(function(o12) {
            a22.appendChild(o12);
          }), a22;
        }
        function z19(e11, t19) {
          return e11 * t19 / 100;
        }
        function C19(e11, t19, n33) {
          var a22 = Number(e11);
          return a22 > n33 ? n33 : a22 < t19 ? t19 : a22;
        }
        function q13(e11, t19, n33) {
          var a22 = n33 - t19, s18 = e11 - t19;
          return 100 * s18 / a22;
        }
        function R20(e11, t19, n33, a22) {
          var s18 = a22 * Math.PI / 180;
          return {
            x: Math.round((e11 + n33 * Math.cos(s18)) * 1e3) / 1e3,
            y: Math.round((t19 + n33 * Math.sin(s18)) * 1e3) / 1e3
          };
        }
        function V14(e11, t19, n33) {
          var a22 = E24.centerX, s18 = E24.centerY;
          return {
            end: R20(a22, s18, e11, n33),
            start: R20(a22, s18, e11, t19)
          };
        }
        return function(e11, t19) {
          t19 = N19({}, k27, t19);
          var n33 = e11, a22 = t19.max, s18 = t19.min, o12 = C19(t19.value, s18, a22), O20 = t19.dialRadius, J11 = t19.showValue, c27 = t19.dialStartAngle, w29 = t19.dialEndAngle, K13 = t19.valueDialClass, Q11 = t19.valueClass;
          t19.valueLabelClass;
          var Z11 = t19.dialClass, _19 = t19.gaugeClass, F17 = t19.color, I16, x34, tt10 = t19.label, et13 = t19.viewBox, j18;
          if (c27 < w29) {
            console.log("WARN! startAngle < endAngle, Swapping");
            var at10 = c27;
            c27 = w29, w29 = at10;
          }
          function B21(r24, d34, f39, l25) {
            var h26 = V14(r24, d34, f39), L11 = h26.start, T20 = h26.end, it14 = typeof l25 > "u" ? 1 : l25;
            return [
              "M",
              L11.x,
              L11.y,
              "A",
              r24,
              r24,
              0,
              it14,
              1,
              T20.x,
              T20.y
            ].join(" ");
          }
          function nt14(r24) {
            I16 = v30("text", {
              x: 50,
              y: 50,
              fill: "#999",
              class: Q11,
              "font-size": "100%",
              "font-family": "sans-serif",
              "font-weight": "normal",
              "text-anchor": "middle",
              "alignment-baseline": "middle",
              "dominant-baseline": "central"
            }), x34 = v30("path", {
              class: K13,
              fill: "none",
              stroke: "#666",
              "stroke-width": 2.5,
              d: B21(O20, c27, c27)
              // value of 0
            });
            var d34 = z19(100, 360 - Math.abs(c27 - w29)), f39 = d34 <= 180 ? 0 : 1, l25 = v30("svg", { viewBox: et13 || "0 0 100 100", class: _19 }, [
              v30("path", {
                class: Z11,
                fill: "none",
                stroke: "#eee",
                "stroke-width": 2,
                d: B21(O20, c27, w29, f39)
              }),
              v30("g", { class: "text-container" }, [I16]),
              x34
            ]);
            r24.appendChild(l25);
          }
          function D17(r24, d34) {
            var f39 = q13(r24, s18, a22), l25 = z19(f39, 360 - Math.abs(c27 - w29)), h26 = l25 <= 180 ? 0 : 1;
            J11 && (I16.textContent = tt10.call(t19, r24)), x34.setAttribute("d", B21(O20, c27, l25 + c27, h26));
          }
          function H15(r24, d34) {
            var f39 = F17.call(t19, r24), l25 = d34 * 1e3, h26 = "stroke " + l25 + "ms ease";
            x34.style.stroke = f39, x34.style["-webkit-transition"] = h26, x34.style["-moz-transition"] = h26, x34.style.transition = h26;
          }
          return j18 = {
            setMaxValue: function(r24) {
              a22 = r24, D17(o12);
            },
            setValue: function(r24) {
              o12 = C19(r24, s18, a22), F17 && H15(o12, 0), D17(o12);
            },
            setValueAnimated: function(r24, d34) {
              var f39 = o12;
              o12 = C19(r24, s18, a22), f39 !== o12 && (F17 && H15(o12, d34), A17({
                start: f39 || 0,
                end: o12,
                duration: d34 || 1,
                step: function(l25, h26) {
                  D17(l25);
                }
              }));
            },
            getValue: function() {
              return o12;
            }
          }, nt14(n33), j18.setValue(o12), j18;
        };
      }();
      return W8;
    });
  }(P14)), P14.exports;
}
var Y10;
var $18;
function dt12() {
  return $18 || ($18 = 1, Y10 = mt11()), Y10;
}
var ht13 = dt12();
var vt6 = t15(ht13);
var pt9 = Object.defineProperty;
var S16 = (y33, i27, u35, p26) => {
  for (var g31 = void 0, b33 = y33.length - 1, A17; b33 >= 0; b33--)
    (A17 = y33[b33]) && (g31 = A17(i27, u35, g31) || g31);
  return g31 && pt9(i27, u35, g31), g31;
};
var G13 = class extends x {
  constructor() {
    super(...arguments), this.min = 0, this.max = 100, this.value = 0;
  }
  setSize() {
    const i27 = this.getBoundingClientRect(), u35 = i27.width, p26 = i27.height, g31 = Math.min(u35, p26);
    this.gaugeElement.style.width = `${g31}px`;
  }
  gaugeInit() {
    this.gaugeElement.innerHTML = "", this.gauge = vt6(this.gaugeElement, {
      min: Math.min(this.min, this.max),
      max: Math.max(this.min, this.max)
    }), this.setSize();
  }
  firstUpdated() {
    this.gaugeInit(), new ResizeObserver(() => this.setSize()).observe(this);
  }
  updated(i27) {
    var u35;
    (i27.has("min") || i27.has("max")) && this.gaugeInit(), (u35 = this.gauge) == null || u35.setValue(this.value);
  }
  render() {
    return Ht`
      <div class="gauge-container-container">
        <div id="gauge" class="gauge-container"></div>
      </div>
    `;
  }
};
G13.styles = Mt2`
    :host {
      display: inline-block;
      width: 200px;
      height: 200px;
    }

    .gauge-container-container {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .gauge-container {
      display: block;
    }

    .gauge-container > .gauge > .dial {
      stroke: #ddd;
      stroke-width: 3;
      fill: rgba(0, 0, 0, 0);
      stroke: var(--frc-gauge-color, rgb(221, 221, 221));
    }
    .gauge-container > .gauge > .value {
      stroke: var(--frc-gauge-fill-color, rgb(47, 180, 200));
      stroke-width: 3;
      fill: rgba(0, 0, 0, 0);
    }
    .gauge-container > .gauge .value-text {
      fill: var(--frc-gauge-text-color, rgb(100, 100, 100));
      font-family: sans-serif;
      font-size: 1em;
    }
  `;
var M9 = G13;
S16([
  Rt({ type: Number })
], M9.prototype, "min");
S16([
  Rt({ type: Number })
], M9.prototype, "max");
S16([
  Rt({ type: Number })
], M9.prototype, "value");
S16([
  a("#gauge")
], M9.prototype, "gaugeElement");
customElements.get("frc-gauge") || customElements.define("frc-gauge", M9);
var kt8 = xt({
  tagName: "frc-gauge",
  elementClass: M9,
  react: import_react15.default
});

// node_modules/@frc-web-components/react/dist/components/Gyro.es.js
var import_react16 = __toESM(require_react(), 1);
function x23(r24, t19, e11) {
  r24 = +r24, t19 = +t19, e11 = (s18 = arguments.length) < 2 ? (t19 = r24, r24 = 0, 1) : s18 < 3 ? 1 : +e11;
  for (var n33 = -1, s18 = Math.max(0, Math.ceil((t19 - r24) / e11)) | 0, l25 = new Array(s18); ++n33 < s18; )
    l25[n33] = r24 + n33 * e11;
  return l25;
}
var w21 = Object.defineProperty;
var a14 = (r24, t19, e11, n33) => {
  for (var s18 = void 0, l25 = r24.length - 1, o12; l25 >= 0; l25--)
    (o12 = r24[l25]) && (s18 = o12(t19, e11, s18) || s18);
  return s18 && w21(t19, e11, s18), s18;
};
function _17(r24) {
  return r24 * Math.PI / 180;
}
function y23(r24) {
  return r24 * 180 / Math.PI;
}
function R15(r24, t19, e11) {
  return Math.min(e11, Math.max(r24, t19));
}
function c19(r24, t19 = false) {
  const e11 = _17(-(r24 - 90));
  return [t19 ? -Math.cos(e11) : Math.cos(e11), Math.sin(e11)];
}
var p20 = class extends x {
  constructor() {
    super(...arguments), this.value = 0, this.hideLabel = false, this.precision = 2, this.counterClockwise = false, this.fromRadians = false;
  }
  setLabels() {
    const t19 = this.getGyroRadius();
    $i(this._labels).selectAll("text").data([0, 45, 90, 135, 180, -135, -90, -45]).join(
      (e11) => e11.append("text").attr("text-anchor", "middle").attr("alignment-baseline", "middle").attr("font-size", 15).attr("fill", "var(--frc-gyro-color, #000)").text((n33) => `${n33}°`)
    ).attr(
      "x",
      (e11) => c19(e11, this.counterClockwise)[0] * (t19 + 30)
    ).attr(
      "y",
      (e11) => -c19(e11, this.counterClockwise)[1] * (t19 + 30)
    );
  }
  setDialAngle() {
    const t19 = this.getGyroRadius(), e11 = this.fromRadians ? y23(this.value) : this.value;
    $i(this._dial).attr(
      "x2",
      c19(e11, this.counterClockwise)[0] * (t19 - 7)
    ).attr(
      "y2",
      -c19(e11, this.counterClockwise)[1] * (t19 - 7)
    );
  }
  addTicks(t19, e11, n33, s18) {
    const l25 = this.getGyroRadius();
    $i(t19).selectAll("line").data(x23(0, 360, n33)).join(
      (o12) => o12.append("line").attr("stroke", "var(--frc-gyro-color, #000)").attr("stroke-width", s18)
    ).attr("x1", (o12) => c19(o12)[0] * l25).attr("y1", (o12) => -c19(o12)[1] * l25).attr(
      "x2",
      (o12) => c19(o12)[0] * (l25 + e11)
    ).attr(
      "y2",
      (o12) => -c19(o12)[1] * (l25 + e11)
    );
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.resized();
    }).observe(this), this.resized();
  }
  resized() {
    const t19 = this.getSize();
    $i(this._svg).attr("width", t19).attr("height", t19), $i(this._gyro).attr(
      "transform",
      `translate(${t19 / 2},${t19 / 2})`
    );
    const e11 = this.getGyroRadius();
    $i(this._gyroEdge).attr("r", e11), this.addTicks(this._minorTicks, 5, 5, 1), this.addTicks(this._majorTicks, 10, 45, 2), this.setLabels(), this.setDialAngle();
  }
  getSize() {
    const { width: t19 } = this.getBoundingClientRect();
    return t19;
  }
  getGyroRadius() {
    return this.getSize() / 2 - 53;
  }
  updated(t19) {
    (t19.has("value") || t19.has("fromRadians") || t19.has("counterClockwise")) && this.setDialAngle(), t19.has("counterClockwise") && this.setLabels();
  }
  render() {
    const t19 = `${(this.fromRadians ? y23(this.value) : this.value).toFixed(R15(this.precision, 0, 100))}`;
    return Ht`
      <div>
        ${Nt`
          <svg>
            <g class="gyro">
              <circle class="gyro-edge" stroke-width="2" stroke="var(--frc-gyro-color, #000)" style="fill: none"></circle>
              <g class="minor-ticks"></g>
              <g class="major-ticks"></g>
              <g class="labels"></g>
              <circle class="dial-circle" r="9"></circle>
              <line class="dial" x1="0" x2="0"></line>
            </g>
          </svg>
        `} ${this.hideLabel ? null : Ht`<label>${t19}&deg</label> `}
      </div>
    `;
  }
};
p20.styles = Mt2`
    :host {
      font-family: sans-serif;
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      width: 300px;
      height: auto;
    }

    svg {
      width: 100%;
    }

    label {
      color: var(--frc-gyro-color, #000);
      text-align: center;
      display: block;
      font-size: 16px;
    }

    .dial-circle {
      fill: var(--frc-gyro-dial-color, blue);
    }

    .dial {
      stroke: var(--frc-gyro-dial-color, blue);
      stroke-width: 3;
    }
  `;
var i21 = p20;
a14([
  Rt({ type: Number })
], i21.prototype, "value");
a14([
  Rt({ type: Boolean, attribute: "hide-label" })
], i21.prototype, "hideLabel");
a14([
  Rt({ type: Number })
], i21.prototype, "precision");
a14([
  Rt({ type: Boolean, attribute: "counter-clockwise" })
], i21.prototype, "counterClockwise");
a14([
  Rt({ type: Boolean, attribute: "from-radians" })
], i21.prototype, "fromRadians");
a14([
  a("svg")
], i21.prototype, "_svg");
a14([
  a(".dial")
], i21.prototype, "_dial");
a14([
  a(".gyro")
], i21.prototype, "_gyro");
a14([
  a(".gyro-edge")
], i21.prototype, "_gyroEdge");
a14([
  a(".minor-ticks")
], i21.prototype, "_minorTicks");
a14([
  a(".major-ticks")
], i21.prototype, "_majorTicks");
a14([
  a(".labels")
], i21.prototype, "_labels");
customElements.get("frc-gyro") || customElements.define("frc-gyro", i21);
var j12 = xt({
  tagName: "frc-gyro",
  elementClass: i21,
  react: import_react16.default
});

// node_modules/@frc-web-components/react/dist/components/Icon.es.js
var import_react17 = __toESM(require_react(), 1);
var c20 = xt({
  tagName: "frc-icon",
  elementClass: i5,
  react: import_react17.default
});

// node_modules/@frc-web-components/react/dist/components/KeyValueTable.es.js
var import_jsx_runtime3 = __toESM(require_jsx_runtime(), 1);
function i22({
  keyValuePairs: t19
}) {
  return (0, import_jsx_runtime3.jsxs)("table", { className: "key-value-table", children: [
    (0, import_jsx_runtime3.jsx)("thead", { children: (0, import_jsx_runtime3.jsxs)("tr", { children: [
      (0, import_jsx_runtime3.jsx)("th", { children: "Key" }),
      (0, import_jsx_runtime3.jsx)("th", { children: "Value" })
    ] }) }),
    (0, import_jsx_runtime3.jsx)("tbody", { children: Object.entries(t19).map(([r24, n33]) => (0, import_jsx_runtime3.jsxs)("tr", { children: [
      (0, import_jsx_runtime3.jsx)("td", { children: r24 }),
      (0, import_jsx_runtime3.jsx)("td", { children: (0, import_jsx_runtime3.jsx)("div", { children: JSON.stringify(n33, null, 2) }) })
    ] }, r24)) })
  ] });
}

// node_modules/@frc-web-components/react/dist/components/LineChart.es.js
var import_react18 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/style-map-CXHve4fi-4b8d68f4.js
var i23 = "important";
var f29 = " !" + i23;
var h20 = _14(class extends i15 {
  constructor(s18) {
    var e11;
    if (super(s18), s18.type !== T14.ATTRIBUTE || s18.name !== "style" || ((e11 = s18.strings) == null ? void 0 : e11.length) > 2)
      throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.");
  }
  render(s18) {
    return Object.keys(s18).reduce((e11, r24) => {
      const t19 = s18[r24];
      return t19 == null ? e11 : e11 + `${r24 = r24.includes("-") ? r24 : r24.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g, "-$&").toLowerCase()}:${t19};`;
    }, "");
  }
  update(s18, [e11]) {
    const { style: r24 } = s18.element;
    if (this.ft === void 0)
      return this.ft = new Set(Object.keys(e11)), this.render(e11);
    for (const t19 of this.ft)
      e11[t19] == null && (this.ft.delete(t19), t19.includes("-") ? r24.removeProperty(t19) : r24[t19] = null);
    for (const t19 in e11) {
      const n33 = e11[t19];
      if (n33 != null) {
        this.ft.add(t19);
        const o12 = typeof n33 == "string" && n33.endsWith(f29);
        t19.includes("-") || o12 ? r24.setProperty(t19, o12 ? n33.slice(0, -11) : n33, o12 ? i23 : "") : r24[t19] = n33;
      }
    }
    return E;
  }
});

// node_modules/@frc-web-components/react/dist/components/LineChart.es.js
function Ue6(e11, t19) {
  return e11 == null || t19 == null ? NaN : e11 < t19 ? -1 : e11 > t19 ? 1 : e11 >= t19 ? 0 : NaN;
}
function Mn6(e11, t19) {
  return e11 == null || t19 == null ? NaN : t19 < e11 ? -1 : t19 > e11 ? 1 : t19 >= e11 ? 0 : NaN;
}
function nt13(e11) {
  let t19, n33, r24;
  e11.length !== 2 ? (t19 = Ue6, n33 = (u35, l25) => Ue6(e11(u35), l25), r24 = (u35, l25) => e11(u35) - l25) : (t19 = e11 === Ue6 || e11 === Mn6 ? e11 : xn6, n33 = e11, r24 = e11);
  function i27(u35, l25, s18 = 0, h26 = u35.length) {
    if (s18 < h26) {
      if (t19(l25, l25) !== 0)
        return h26;
      do {
        const d34 = s18 + h26 >>> 1;
        n33(u35[d34], l25) < 0 ? s18 = d34 + 1 : h26 = d34;
      } while (s18 < h26);
    }
    return s18;
  }
  function o12(u35, l25, s18 = 0, h26 = u35.length) {
    if (s18 < h26) {
      if (t19(l25, l25) !== 0)
        return h26;
      do {
        const d34 = s18 + h26 >>> 1;
        n33(u35[d34], l25) <= 0 ? s18 = d34 + 1 : h26 = d34;
      } while (s18 < h26);
    }
    return s18;
  }
  function a22(u35, l25, s18 = 0, h26 = u35.length) {
    const d34 = i27(u35, l25, s18, h26 - 1);
    return d34 > s18 && r24(u35[d34 - 1], l25) > -r24(u35[d34], l25) ? d34 - 1 : d34;
  }
  return { left: i27, center: a22, right: o12 };
}
function xn6() {
  return 0;
}
function wn6(e11) {
  return e11 === null ? NaN : +e11;
}
var Tn5 = nt13(Ue6);
var Cn6 = Tn5.right;
nt13(wn6).center;
var pt10 = class extends Map {
  constructor(t19, n33 = Dn5) {
    if (super(), Object.defineProperties(this, { _intern: { value: /* @__PURE__ */ new Map() }, _key: { value: n33 } }), t19 != null)
      for (const [r24, i27] of t19)
        this.set(r24, i27);
  }
  get(t19) {
    return super.get(vt7(this, t19));
  }
  has(t19) {
    return super.has(vt7(this, t19));
  }
  set(t19, n33) {
    return super.set(bn6(this, t19), n33);
  }
  delete(t19) {
    return super.delete(An6(this, t19));
  }
};
function vt7({ _intern: e11, _key: t19 }, n33) {
  const r24 = t19(n33);
  return e11.has(r24) ? e11.get(r24) : n33;
}
function bn6({ _intern: e11, _key: t19 }, n33) {
  const r24 = t19(n33);
  return e11.has(r24) ? e11.get(r24) : (e11.set(r24, n33), n33);
}
function An6({ _intern: e11, _key: t19 }, n33) {
  const r24 = t19(n33);
  return e11.has(r24) && (n33 = e11.get(r24), e11.delete(r24)), n33;
}
function Dn5(e11) {
  return e11 !== null && typeof e11 == "object" ? e11.valueOf() : e11;
}
var $n6 = Math.sqrt(50);
var kn5 = Math.sqrt(10);
var Un5 = Math.sqrt(2);
function Ne6(e11, t19, n33) {
  const r24 = (t19 - e11) / Math.max(0, n33), i27 = Math.floor(Math.log10(r24)), o12 = r24 / Math.pow(10, i27), a22 = o12 >= $n6 ? 10 : o12 >= kn5 ? 5 : o12 >= Un5 ? 2 : 1;
  let u35, l25, s18;
  return i27 < 0 ? (s18 = Math.pow(10, -i27) / a22, u35 = Math.round(e11 * s18), l25 = Math.round(t19 * s18), u35 / s18 < e11 && ++u35, l25 / s18 > t19 && --l25, s18 = -s18) : (s18 = Math.pow(10, i27) * a22, u35 = Math.round(e11 / s18), l25 = Math.round(t19 / s18), u35 * s18 < e11 && ++u35, l25 * s18 > t19 && --l25), l25 < u35 && 0.5 <= n33 && n33 < 2 ? Ne6(e11, t19, n33 * 2) : [u35, l25, s18];
}
function Fn6(e11, t19, n33) {
  if (t19 = +t19, e11 = +e11, n33 = +n33, !(n33 > 0))
    return [];
  if (e11 === t19)
    return [e11];
  const r24 = t19 < e11, [i27, o12, a22] = r24 ? Ne6(t19, e11, n33) : Ne6(e11, t19, n33);
  if (!(o12 >= i27))
    return [];
  const u35 = o12 - i27 + 1, l25 = new Array(u35);
  if (r24)
    if (a22 < 0)
      for (let s18 = 0; s18 < u35; ++s18)
        l25[s18] = (o12 - s18) / -a22;
    else
      for (let s18 = 0; s18 < u35; ++s18)
        l25[s18] = (o12 - s18) * a22;
  else if (a22 < 0)
    for (let s18 = 0; s18 < u35; ++s18)
      l25[s18] = (i27 + s18) / -a22;
  else
    for (let s18 = 0; s18 < u35; ++s18)
      l25[s18] = (i27 + s18) * a22;
  return l25;
}
function Re6(e11, t19, n33) {
  return t19 = +t19, e11 = +e11, n33 = +n33, Ne6(e11, t19, n33)[2];
}
function Ke6(e11, t19, n33) {
  t19 = +t19, e11 = +e11, n33 = +n33;
  const r24 = t19 < e11, i27 = r24 ? Re6(t19, e11, n33) : Re6(e11, t19, n33);
  return (r24 ? -1 : 1) * (i27 < 0 ? 1 / -i27 : i27);
}
function Nn5(e11) {
  return e11;
}
var Ie6 = 1;
var Fe6 = 2;
var et12 = 3;
var Me6 = 4;
var yt12 = 1e-6;
function Sn6(e11) {
  return "translate(" + e11 + ",0)";
}
function Yn5(e11) {
  return "translate(0," + e11 + ")";
}
function _n5(e11) {
  return (t19) => +e11(t19);
}
function Ln5(e11, t19) {
  return t19 = Math.max(0, e11.bandwidth() - t19 * 2) / 2, e11.round() && (t19 = Math.round(t19)), (n33) => +e11(n33) + t19;
}
function Hn6() {
  return !this.__axis;
}
function rt12(e11, t19) {
  var n33 = [], r24 = null, i27 = null, o12 = 6, a22 = 6, u35 = 3, l25 = typeof window < "u" && window.devicePixelRatio > 1 ? 0 : 0.5, s18 = e11 === Ie6 || e11 === Me6 ? -1 : 1, h26 = e11 === Me6 || e11 === Fe6 ? "x" : "y", d34 = e11 === Ie6 || e11 === et12 ? Sn6 : Yn5;
  function f39(m33) {
    var A17 = r24 ?? (t19.ticks ? t19.ticks.apply(t19, n33) : t19.domain()), _19 = i27 ?? (t19.tickFormat ? t19.tickFormat.apply(t19, n33) : Nn5), S21 = Math.max(o12, 0) + u35, L11 = t19.range(), j18 = +L11[0] + l25, C19 = +L11[L11.length - 1] + l25, N19 = (t19.bandwidth ? Ln5 : _n5)(t19.copy(), l25), b33 = m33.selection ? m33.selection() : m33, p26 = b33.selectAll(".domain").data([null]), w29 = b33.selectAll(".tick").data(A17, t19).order(), O20 = w29.exit(), W8 = w29.enter().append("g").attr("class", "tick"), V14 = w29.select("line"), v30 = w29.select("text");
    p26 = p26.merge(p26.enter().insert("path", ".tick").attr("class", "domain").attr("stroke", "currentColor")), w29 = w29.merge(W8), V14 = V14.merge(W8.append("line").attr("stroke", "currentColor").attr(h26 + "2", s18 * o12)), v30 = v30.merge(W8.append("text").attr("fill", "currentColor").attr(h26, s18 * S21).attr("dy", e11 === Ie6 ? "0em" : e11 === et12 ? "0.71em" : "0.32em")), m33 !== b33 && (p26 = p26.transition(m33), w29 = w29.transition(m33), V14 = V14.transition(m33), v30 = v30.transition(m33), O20 = O20.transition(m33).attr("opacity", yt12).attr("transform", function(U18) {
      return isFinite(U18 = N19(U18)) ? d34(U18 + l25) : this.getAttribute("transform");
    }), W8.attr("opacity", yt12).attr("transform", function(U18) {
      var D17 = this.parentNode.__axis;
      return d34((D17 && isFinite(D17 = D17(U18)) ? D17 : N19(U18)) + l25);
    })), O20.remove(), p26.attr("d", e11 === Me6 || e11 === Fe6 ? a22 ? "M" + s18 * a22 + "," + j18 + "H" + l25 + "V" + C19 + "H" + s18 * a22 : "M" + l25 + "," + j18 + "V" + C19 : a22 ? "M" + j18 + "," + s18 * a22 + "V" + l25 + "H" + C19 + "V" + s18 * a22 : "M" + j18 + "," + l25 + "H" + C19), w29.attr("opacity", 1).attr("transform", function(U18) {
      return d34(N19(U18) + l25);
    }), V14.attr(h26 + "2", s18 * o12), v30.attr(h26, s18 * S21).text(_19), b33.filter(Hn6).attr("fill", "none").attr("font-size", 10).attr("font-family", "sans-serif").attr("text-anchor", e11 === Fe6 ? "start" : e11 === Me6 ? "end" : "middle"), b33.each(function() {
      this.__axis = N19;
    });
  }
  return f39.scale = function(m33) {
    return arguments.length ? (t19 = m33, f39) : t19;
  }, f39.ticks = function() {
    return n33 = Array.from(arguments), f39;
  }, f39.tickArguments = function(m33) {
    return arguments.length ? (n33 = m33 == null ? [] : Array.from(m33), f39) : n33.slice();
  }, f39.tickValues = function(m33) {
    return arguments.length ? (r24 = m33 == null ? null : Array.from(m33), f39) : r24 && r24.slice();
  }, f39.tickFormat = function(m33) {
    return arguments.length ? (i27 = m33, f39) : i27;
  }, f39.tickSize = function(m33) {
    return arguments.length ? (o12 = a22 = +m33, f39) : o12;
  }, f39.tickSizeInner = function(m33) {
    return arguments.length ? (o12 = +m33, f39) : o12;
  }, f39.tickSizeOuter = function(m33) {
    return arguments.length ? (a22 = +m33, f39) : a22;
  }, f39.tickPadding = function(m33) {
    return arguments.length ? (u35 = +m33, f39) : u35;
  }, f39.offset = function(m33) {
    return arguments.length ? (l25 = +m33, f39) : l25;
  }, f39;
}
function zn6(e11) {
  return rt12(Fe6, e11);
}
function jt9(e11) {
  return rt12(et12, e11);
}
function Mt9(e11) {
  return rt12(Me6, e11);
}
function jn6(e11, t19) {
  t19 || (t19 = []);
  var n33 = e11 ? Math.min(t19.length, e11.length) : 0, r24 = t19.slice(), i27;
  return function(o12) {
    for (i27 = 0; i27 < n33; ++i27)
      r24[i27] = e11[i27] * (1 - o12) + t19[i27] * o12;
    return r24;
  };
}
function Pn6(e11) {
  return ArrayBuffer.isView(e11) && !(e11 instanceof DataView);
}
function On6(e11, t19) {
  var n33 = t19 ? t19.length : 0, r24 = e11 ? Math.min(n33, e11.length) : 0, i27 = new Array(r24), o12 = new Array(n33), a22;
  for (a22 = 0; a22 < r24; ++a22)
    i27[a22] = it13(e11[a22], t19[a22]);
  for (; a22 < n33; ++a22)
    o12[a22] = t19[a22];
  return function(u35) {
    for (a22 = 0; a22 < r24; ++a22)
      o12[a22] = i27[a22](u35);
    return o12;
  };
}
function En6(e11, t19) {
  var n33 = /* @__PURE__ */ new Date();
  return e11 = +e11, t19 = +t19, function(r24) {
    return n33.setTime(e11 * (1 - r24) + t19 * r24), n33;
  };
}
function Vn6(e11, t19) {
  var n33 = {}, r24 = {}, i27;
  (e11 === null || typeof e11 != "object") && (e11 = {}), (t19 === null || typeof t19 != "object") && (t19 = {});
  for (i27 in t19)
    i27 in e11 ? n33[i27] = it13(e11[i27], t19[i27]) : r24[i27] = t19[i27];
  return function(o12) {
    for (i27 in n33)
      r24[i27] = n33[i27](o12);
    return r24;
  };
}
function it13(e11, t19) {
  var n33 = typeof t19, r24;
  return t19 == null || n33 === "boolean" ? Qt(t19) : (n33 === "number" ? A2 : n33 === "string" ? (r24 = I2(t19)) ? (t19 = r24, qt) : cr : t19 instanceof I2 ? qt : t19 instanceof Date ? En6 : Pn6(t19) ? jn6 : Array.isArray(t19) ? On6 : typeof t19.valueOf != "function" && typeof t19.toString != "function" || isNaN(t19) ? Vn6 : A2)(e11, t19);
}
function Bn6(e11, t19) {
  return e11 = +e11, t19 = +t19, function(n33) {
    return Math.round(e11 * (1 - n33) + t19 * n33);
  };
}
function In6(e11) {
  return Math.abs(e11 = Math.round(e11)) >= 1e21 ? e11.toLocaleString("en").replace(/,/g, "") : e11.toString(10);
}
function Se6(e11, t19) {
  if ((n33 = (e11 = t19 ? e11.toExponential(t19 - 1) : e11.toExponential()).indexOf("e")) < 0)
    return null;
  var n33, r24 = e11.slice(0, n33);
  return [
    r24.length > 1 ? r24[0] + r24.slice(2) : r24,
    +e11.slice(n33 + 1)
  ];
}
function he7(e11) {
  return e11 = Se6(Math.abs(e11)), e11 ? e11[1] : NaN;
}
function Zn6(e11, t19) {
  return function(n33, r24) {
    for (var i27 = n33.length, o12 = [], a22 = 0, u35 = e11[0], l25 = 0; i27 > 0 && u35 > 0 && (l25 + u35 + 1 > r24 && (u35 = Math.max(1, r24 - l25)), o12.push(n33.substring(i27 -= u35, i27 + u35)), !((l25 += u35 + 1) > r24)); )
      u35 = e11[a22 = (a22 + 1) % e11.length];
    return o12.reverse().join(t19);
  };
}
function qn6(e11) {
  return function(t19) {
    return t19.replace(/[0-9]/g, function(n33) {
      return e11[+n33];
    });
  };
}
var Gn6 = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
function Ye6(e11) {
  if (!(t19 = Gn6.exec(e11)))
    throw new Error("invalid format: " + e11);
  var t19;
  return new ot12({
    fill: t19[1],
    align: t19[2],
    sign: t19[3],
    symbol: t19[4],
    zero: t19[5],
    width: t19[6],
    comma: t19[7],
    precision: t19[8] && t19[8].slice(1),
    trim: t19[9],
    type: t19[10]
  });
}
Ye6.prototype = ot12.prototype;
function ot12(e11) {
  this.fill = e11.fill === void 0 ? " " : e11.fill + "", this.align = e11.align === void 0 ? ">" : e11.align + "", this.sign = e11.sign === void 0 ? "-" : e11.sign + "", this.symbol = e11.symbol === void 0 ? "" : e11.symbol + "", this.zero = !!e11.zero, this.width = e11.width === void 0 ? void 0 : +e11.width, this.comma = !!e11.comma, this.precision = e11.precision === void 0 ? void 0 : +e11.precision, this.trim = !!e11.trim, this.type = e11.type === void 0 ? "" : e11.type + "";
}
ot12.prototype.toString = function() {
  return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (this.width === void 0 ? "" : Math.max(1, this.width | 0)) + (this.comma ? "," : "") + (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) + (this.trim ? "~" : "") + this.type;
};
function Wn6(e11) {
  e:
    for (var t19 = e11.length, n33 = 1, r24 = -1, i27; n33 < t19; ++n33)
      switch (e11[n33]) {
        case ".":
          r24 = i27 = n33;
          break;
        case "0":
          r24 === 0 && (r24 = n33), i27 = n33;
          break;
        default:
          if (!+e11[n33])
            break e;
          r24 > 0 && (r24 = 0);
          break;
      }
  return r24 > 0 ? e11.slice(0, r24) + e11.slice(i27 + 1) : e11;
}
var Pt7;
function Xn6(e11, t19) {
  var n33 = Se6(e11, t19);
  if (!n33)
    return e11 + "";
  var r24 = n33[0], i27 = n33[1], o12 = i27 - (Pt7 = Math.max(-8, Math.min(8, Math.floor(i27 / 3))) * 3) + 1, a22 = r24.length;
  return o12 === a22 ? r24 : o12 > a22 ? r24 + new Array(o12 - a22 + 1).join("0") : o12 > 0 ? r24.slice(0, o12) + "." + r24.slice(o12) : "0." + new Array(1 - o12).join("0") + Se6(e11, Math.max(0, t19 + o12 - 1))[0];
}
function xt7(e11, t19) {
  var n33 = Se6(e11, t19);
  if (!n33)
    return e11 + "";
  var r24 = n33[0], i27 = n33[1];
  return i27 < 0 ? "0." + new Array(-i27).join("0") + r24 : r24.length > i27 + 1 ? r24.slice(0, i27 + 1) + "." + r24.slice(i27 + 1) : r24 + new Array(i27 - r24.length + 2).join("0");
}
var wt8 = {
  "%": (e11, t19) => (e11 * 100).toFixed(t19),
  b: (e11) => Math.round(e11).toString(2),
  c: (e11) => e11 + "",
  d: In6,
  e: (e11, t19) => e11.toExponential(t19),
  f: (e11, t19) => e11.toFixed(t19),
  g: (e11, t19) => e11.toPrecision(t19),
  o: (e11) => Math.round(e11).toString(8),
  p: (e11, t19) => xt7(e11 * 100, t19),
  r: xt7,
  s: Xn6,
  X: (e11) => Math.round(e11).toString(16).toUpperCase(),
  x: (e11) => Math.round(e11).toString(16)
};
function Tt8(e11) {
  return e11;
}
var Ct8 = Array.prototype.map;
var bt8 = ["y", "z", "a", "f", "p", "n", "µ", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"];
function Qn6(e11) {
  var t19 = e11.grouping === void 0 || e11.thousands === void 0 ? Tt8 : Zn6(Ct8.call(e11.grouping, Number), e11.thousands + ""), n33 = e11.currency === void 0 ? "" : e11.currency[0] + "", r24 = e11.currency === void 0 ? "" : e11.currency[1] + "", i27 = e11.decimal === void 0 ? "." : e11.decimal + "", o12 = e11.numerals === void 0 ? Tt8 : qn6(Ct8.call(e11.numerals, String)), a22 = e11.percent === void 0 ? "%" : e11.percent + "", u35 = e11.minus === void 0 ? "−" : e11.minus + "", l25 = e11.nan === void 0 ? "NaN" : e11.nan + "";
  function s18(d34) {
    d34 = Ye6(d34);
    var f39 = d34.fill, m33 = d34.align, A17 = d34.sign, _19 = d34.symbol, S21 = d34.zero, L11 = d34.width, j18 = d34.comma, C19 = d34.precision, N19 = d34.trim, b33 = d34.type;
    b33 === "n" ? (j18 = true, b33 = "g") : wt8[b33] || (C19 === void 0 && (C19 = 12), N19 = true, b33 = "g"), (S21 || f39 === "0" && m33 === "=") && (S21 = true, f39 = "0", m33 = "=");
    var p26 = _19 === "$" ? n33 : _19 === "#" && /[boxX]/.test(b33) ? "0" + b33.toLowerCase() : "", w29 = _19 === "$" ? r24 : /[%p]/.test(b33) ? a22 : "", O20 = wt8[b33], W8 = /[defgprs%]/.test(b33);
    C19 = C19 === void 0 ? 6 : /[gprs]/.test(b33) ? Math.max(1, Math.min(21, C19)) : Math.max(0, Math.min(20, C19));
    function V14(v30) {
      var U18 = p26, D17 = w29, X12, Ae6, oe7;
      if (b33 === "c")
        D17 = O20(v30) + D17, v30 = "";
      else {
        v30 = +v30;
        var ae7 = v30 < 0 || 1 / v30 < 0;
        if (v30 = isNaN(v30) ? l25 : O20(Math.abs(v30), C19), N19 && (v30 = Wn6(v30)), ae7 && +v30 == 0 && A17 !== "+" && (ae7 = false), U18 = (ae7 ? A17 === "(" ? A17 : u35 : A17 === "-" || A17 === "(" ? "" : A17) + U18, D17 = (b33 === "s" ? bt8[8 + Pt7 / 3] : "") + D17 + (ae7 && A17 === "(" ? ")" : ""), W8) {
          for (X12 = -1, Ae6 = v30.length; ++X12 < Ae6; )
            if (oe7 = v30.charCodeAt(X12), 48 > oe7 || oe7 > 57) {
              D17 = (oe7 === 46 ? i27 + v30.slice(X12 + 1) : v30.slice(X12)) + D17, v30 = v30.slice(0, X12);
              break;
            }
        }
      }
      j18 && !S21 && (v30 = t19(v30, 1 / 0));
      var se6 = U18.length + v30.length + D17.length, E24 = se6 < L11 ? new Array(L11 - se6 + 1).join(f39) : "";
      switch (j18 && S21 && (v30 = t19(E24 + v30, E24.length ? L11 - D17.length : 1 / 0), E24 = ""), m33) {
        case "<":
          v30 = U18 + v30 + D17 + E24;
          break;
        case "=":
          v30 = U18 + E24 + v30 + D17;
          break;
        case "^":
          v30 = E24.slice(0, se6 = E24.length >> 1) + U18 + v30 + D17 + E24.slice(se6);
          break;
        default:
          v30 = E24 + U18 + v30 + D17;
          break;
      }
      return o12(v30);
    }
    return V14.toString = function() {
      return d34 + "";
    }, V14;
  }
  function h26(d34, f39) {
    var m33 = s18((d34 = Ye6(d34), d34.type = "f", d34)), A17 = Math.max(-8, Math.min(8, Math.floor(he7(f39) / 3))) * 3, _19 = Math.pow(10, -A17), S21 = bt8[8 + A17 / 3];
    return function(L11) {
      return m33(_19 * L11) + S21;
    };
  }
  return {
    format: s18,
    formatPrefix: h26
  };
}
var ke6;
var Ot9;
var Et7;
Jn6({
  thousands: ",",
  grouping: [3],
  currency: ["$", ""]
});
function Jn6(e11) {
  return ke6 = Qn6(e11), Ot9 = ke6.format, Et7 = ke6.formatPrefix, ke6;
}
function Rn6(e11) {
  return Math.max(0, -he7(Math.abs(e11)));
}
function Kn6(e11, t19) {
  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(he7(t19) / 3))) * 3 - he7(Math.abs(e11)));
}
function er6(e11, t19) {
  return e11 = Math.abs(e11), t19 = Math.abs(t19) - e11, Math.max(0, he7(t19) - he7(e11)) + 1;
}
function at9(e11, t19) {
  switch (arguments.length) {
    case 0:
      break;
    case 1:
      this.range(e11);
      break;
    default:
      this.range(t19).domain(e11);
      break;
  }
  return this;
}
var At7 = Symbol("implicit");
function Vt7() {
  var e11 = new pt10(), t19 = [], n33 = [], r24 = At7;
  function i27(o12) {
    let a22 = e11.get(o12);
    if (a22 === void 0) {
      if (r24 !== At7)
        return r24;
      e11.set(o12, a22 = t19.push(o12) - 1);
    }
    return n33[a22 % n33.length];
  }
  return i27.domain = function(o12) {
    if (!arguments.length)
      return t19.slice();
    t19 = [], e11 = new pt10();
    for (const a22 of o12)
      e11.has(a22) || e11.set(a22, t19.push(a22) - 1);
    return i27;
  }, i27.range = function(o12) {
    return arguments.length ? (n33 = Array.from(o12), i27) : n33.slice();
  }, i27.unknown = function(o12) {
    return arguments.length ? (r24 = o12, i27) : r24;
  }, i27.copy = function() {
    return Vt7(t19, n33).unknown(r24);
  }, at9.apply(i27, arguments), i27;
}
function tr6(e11) {
  return function() {
    return e11;
  };
}
function nr6(e11) {
  return +e11;
}
var Dt5 = [0, 1];
function le6(e11) {
  return e11;
}
function tt9(e11, t19) {
  return (t19 -= e11 = +e11) ? function(n33) {
    return (n33 - e11) / t19;
  } : tr6(isNaN(t19) ? NaN : 0.5);
}
function rr6(e11, t19) {
  var n33;
  return e11 > t19 && (n33 = e11, e11 = t19, t19 = n33), function(r24) {
    return Math.max(e11, Math.min(t19, r24));
  };
}
function ir6(e11, t19, n33) {
  var r24 = e11[0], i27 = e11[1], o12 = t19[0], a22 = t19[1];
  return i27 < r24 ? (r24 = tt9(i27, r24), o12 = n33(a22, o12)) : (r24 = tt9(r24, i27), o12 = n33(o12, a22)), function(u35) {
    return o12(r24(u35));
  };
}
function or6(e11, t19, n33) {
  var r24 = Math.min(e11.length, t19.length) - 1, i27 = new Array(r24), o12 = new Array(r24), a22 = -1;
  for (e11[r24] < e11[0] && (e11 = e11.slice().reverse(), t19 = t19.slice().reverse()); ++a22 < r24; )
    i27[a22] = tt9(e11[a22], e11[a22 + 1]), o12[a22] = n33(t19[a22], t19[a22 + 1]);
  return function(u35) {
    var l25 = Cn6(e11, u35, 1, r24) - 1;
    return o12[l25](i27[l25](u35));
  };
}
function Bt7(e11, t19) {
  return t19.domain(e11.domain()).range(e11.range()).interpolate(e11.interpolate()).clamp(e11.clamp()).unknown(e11.unknown());
}
function ar6() {
  var e11 = Dt5, t19 = Dt5, n33 = it13, r24, i27, o12, a22 = le6, u35, l25, s18;
  function h26() {
    var f39 = Math.min(e11.length, t19.length);
    return a22 !== le6 && (a22 = rr6(e11[0], e11[f39 - 1])), u35 = f39 > 2 ? or6 : ir6, l25 = s18 = null, d34;
  }
  function d34(f39) {
    return f39 == null || isNaN(f39 = +f39) ? o12 : (l25 || (l25 = u35(e11.map(r24), t19, n33)))(r24(a22(f39)));
  }
  return d34.invert = function(f39) {
    return a22(i27((s18 || (s18 = u35(t19, e11.map(r24), A2)))(f39)));
  }, d34.domain = function(f39) {
    return arguments.length ? (e11 = Array.from(f39, nr6), h26()) : e11.slice();
  }, d34.range = function(f39) {
    return arguments.length ? (t19 = Array.from(f39), h26()) : t19.slice();
  }, d34.rangeRound = function(f39) {
    return t19 = Array.from(f39), n33 = Bn6, h26();
  }, d34.clamp = function(f39) {
    return arguments.length ? (a22 = f39 ? true : le6, h26()) : a22 !== le6;
  }, d34.interpolate = function(f39) {
    return arguments.length ? (n33 = f39, h26()) : n33;
  }, d34.unknown = function(f39) {
    return arguments.length ? (o12 = f39, d34) : o12;
  }, function(f39, m33) {
    return r24 = f39, i27 = m33, h26();
  };
}
function It6() {
  return ar6()(le6, le6);
}
function sr6(e11, t19, n33, r24) {
  var i27 = Ke6(e11, t19, n33), o12;
  switch (r24 = Ye6(r24 ?? ",f"), r24.type) {
    case "s": {
      var a22 = Math.max(Math.abs(e11), Math.abs(t19));
      return r24.precision == null && !isNaN(o12 = Kn6(i27, a22)) && (r24.precision = o12), Et7(r24, a22);
    }
    case "":
    case "e":
    case "g":
    case "p":
    case "r": {
      r24.precision == null && !isNaN(o12 = er6(i27, Math.max(Math.abs(e11), Math.abs(t19)))) && (r24.precision = o12 - (r24.type === "e"));
      break;
    }
    case "f":
    case "%": {
      r24.precision == null && !isNaN(o12 = Rn6(i27)) && (r24.precision = o12 - (r24.type === "%") * 2);
      break;
    }
  }
  return Ot9(r24);
}
function ur6(e11) {
  var t19 = e11.domain;
  return e11.ticks = function(n33) {
    var r24 = t19();
    return Fn6(r24[0], r24[r24.length - 1], n33 ?? 10);
  }, e11.tickFormat = function(n33, r24) {
    var i27 = t19();
    return sr6(i27[0], i27[i27.length - 1], n33 ?? 10, r24);
  }, e11.nice = function(n33) {
    n33 == null && (n33 = 10);
    var r24 = t19(), i27 = 0, o12 = r24.length - 1, a22 = r24[i27], u35 = r24[o12], l25, s18, h26 = 10;
    for (u35 < a22 && (s18 = a22, a22 = u35, u35 = s18, s18 = i27, i27 = o12, o12 = s18); h26-- > 0; ) {
      if (s18 = Re6(a22, u35, n33), s18 === l25)
        return r24[i27] = a22, r24[o12] = u35, t19(r24);
      if (s18 > 0)
        a22 = Math.floor(a22 / s18) * s18, u35 = Math.ceil(u35 / s18) * s18;
      else if (s18 < 0)
        a22 = Math.ceil(a22 * s18) / s18, u35 = Math.floor(u35 * s18) / s18;
      else
        break;
      l25 = s18;
    }
    return e11;
  }, e11;
}
function Zt7() {
  var e11 = It6();
  return e11.copy = function() {
    return Bt7(e11, Zt7());
  }, at9.apply(e11, arguments), ur6(e11);
}
function cr6(e11, t19) {
  e11 = e11.slice();
  var n33 = 0, r24 = e11.length - 1, i27 = e11[n33], o12 = e11[r24], a22;
  return o12 < i27 && (a22 = n33, n33 = r24, r24 = a22, a22 = i27, i27 = o12, o12 = a22), e11[n33] = t19.floor(i27), e11[r24] = t19.ceil(o12), e11;
}
var Ze6 = /* @__PURE__ */ new Date();
var qe7 = /* @__PURE__ */ new Date();
function k20(e11, t19, n33, r24) {
  function i27(o12) {
    return e11(o12 = arguments.length === 0 ? /* @__PURE__ */ new Date() : /* @__PURE__ */ new Date(+o12)), o12;
  }
  return i27.floor = (o12) => (e11(o12 = /* @__PURE__ */ new Date(+o12)), o12), i27.ceil = (o12) => (e11(o12 = new Date(o12 - 1)), t19(o12, 1), e11(o12), o12), i27.round = (o12) => {
    const a22 = i27(o12), u35 = i27.ceil(o12);
    return o12 - a22 < u35 - o12 ? a22 : u35;
  }, i27.offset = (o12, a22) => (t19(o12 = /* @__PURE__ */ new Date(+o12), a22 == null ? 1 : Math.floor(a22)), o12), i27.range = (o12, a22, u35) => {
    const l25 = [];
    if (o12 = i27.ceil(o12), u35 = u35 == null ? 1 : Math.floor(u35), !(o12 < a22) || !(u35 > 0))
      return l25;
    let s18;
    do
      l25.push(s18 = /* @__PURE__ */ new Date(+o12)), t19(o12, u35), e11(o12);
    while (s18 < o12 && o12 < a22);
    return l25;
  }, i27.filter = (o12) => k20((a22) => {
    if (a22 >= a22)
      for (; e11(a22), !o12(a22); )
        a22.setTime(a22 - 1);
  }, (a22, u35) => {
    if (a22 >= a22)
      if (u35 < 0)
        for (; ++u35 <= 0; )
          for (; t19(a22, -1), !o12(a22); )
            ;
      else
        for (; --u35 >= 0; )
          for (; t19(a22, 1), !o12(a22); )
            ;
  }), n33 && (i27.count = (o12, a22) => (Ze6.setTime(+o12), qe7.setTime(+a22), e11(Ze6), e11(qe7), Math.floor(n33(Ze6, qe7))), i27.every = (o12) => (o12 = Math.floor(o12), !isFinite(o12) || !(o12 > 0) ? null : o12 > 1 ? i27.filter(r24 ? (a22) => r24(a22) % o12 === 0 : (a22) => i27.count(0, a22) % o12 === 0) : i27)), i27;
}
var _e6 = k20(() => {
}, (e11, t19) => {
  e11.setTime(+e11 + t19);
}, (e11, t19) => t19 - e11);
_e6.every = (e11) => (e11 = Math.floor(e11), !isFinite(e11) || !(e11 > 0) ? null : e11 > 1 ? k20((t19) => {
  t19.setTime(Math.floor(t19 / e11) * e11);
}, (t19, n33) => {
  t19.setTime(+t19 + n33 * e11);
}, (t19, n33) => (n33 - t19) / e11) : _e6);
_e6.range;
var I13 = 1e3;
var P15 = I13 * 60;
var Z9 = P15 * 60;
var q11 = Z9 * 24;
var st11 = q11 * 7;
var $t7 = q11 * 30;
var Ge6 = q11 * 365;
var fe6 = k20((e11) => {
  e11.setTime(e11 - e11.getMilliseconds());
}, (e11, t19) => {
  e11.setTime(+e11 + t19 * I13);
}, (e11, t19) => (t19 - e11) / I13, (e11) => e11.getUTCSeconds());
fe6.range;
var ut10 = k20((e11) => {
  e11.setTime(e11 - e11.getMilliseconds() - e11.getSeconds() * I13);
}, (e11, t19) => {
  e11.setTime(+e11 + t19 * P15);
}, (e11, t19) => (t19 - e11) / P15, (e11) => e11.getMinutes());
ut10.range;
var lr6 = k20((e11) => {
  e11.setUTCSeconds(0, 0);
}, (e11, t19) => {
  e11.setTime(+e11 + t19 * P15);
}, (e11, t19) => (t19 - e11) / P15, (e11) => e11.getUTCMinutes());
lr6.range;
var ct10 = k20((e11) => {
  e11.setTime(e11 - e11.getMilliseconds() - e11.getSeconds() * I13 - e11.getMinutes() * P15);
}, (e11, t19) => {
  e11.setTime(+e11 + t19 * Z9);
}, (e11, t19) => (t19 - e11) / Z9, (e11) => e11.getHours());
ct10.range;
var fr6 = k20((e11) => {
  e11.setUTCMinutes(0, 0, 0);
}, (e11, t19) => {
  e11.setTime(+e11 + t19 * Z9);
}, (e11, t19) => (t19 - e11) / Z9, (e11) => e11.getUTCHours());
fr6.range;
var Ce6 = k20(
  (e11) => e11.setHours(0, 0, 0, 0),
  (e11, t19) => e11.setDate(e11.getDate() + t19),
  (e11, t19) => (t19 - e11 - (t19.getTimezoneOffset() - e11.getTimezoneOffset()) * P15) / q11,
  (e11) => e11.getDate() - 1
);
Ce6.range;
var lt11 = k20((e11) => {
  e11.setUTCHours(0, 0, 0, 0);
}, (e11, t19) => {
  e11.setUTCDate(e11.getUTCDate() + t19);
}, (e11, t19) => (t19 - e11) / q11, (e11) => e11.getUTCDate() - 1);
lt11.range;
var hr6 = k20((e11) => {
  e11.setUTCHours(0, 0, 0, 0);
}, (e11, t19) => {
  e11.setUTCDate(e11.getUTCDate() + t19);
}, (e11, t19) => (t19 - e11) / q11, (e11) => Math.floor(e11 / q11));
hr6.range;
function te6(e11) {
  return k20((t19) => {
    t19.setDate(t19.getDate() - (t19.getDay() + 7 - e11) % 7), t19.setHours(0, 0, 0, 0);
  }, (t19, n33) => {
    t19.setDate(t19.getDate() + n33 * 7);
  }, (t19, n33) => (n33 - t19 - (n33.getTimezoneOffset() - t19.getTimezoneOffset()) * P15) / st11);
}
var Ve7 = te6(0);
var Le6 = te6(1);
var gr6 = te6(2);
var dr6 = te6(3);
var ge6 = te6(4);
var mr5 = te6(5);
var pr5 = te6(6);
Ve7.range;
Le6.range;
gr6.range;
dr6.range;
ge6.range;
mr5.range;
pr5.range;
function ne7(e11) {
  return k20((t19) => {
    t19.setUTCDate(t19.getUTCDate() - (t19.getUTCDay() + 7 - e11) % 7), t19.setUTCHours(0, 0, 0, 0);
  }, (t19, n33) => {
    t19.setUTCDate(t19.getUTCDate() + n33 * 7);
  }, (t19, n33) => (n33 - t19) / st11);
}
var qt6 = ne7(0);
var He7 = ne7(1);
var vr6 = ne7(2);
var yr5 = ne7(3);
var de8 = ne7(4);
var Mr6 = ne7(5);
var xr5 = ne7(6);
qt6.range;
He7.range;
vr6.range;
yr5.range;
de8.range;
Mr6.range;
xr5.range;
var ft13 = k20((e11) => {
  e11.setDate(1), e11.setHours(0, 0, 0, 0);
}, (e11, t19) => {
  e11.setMonth(e11.getMonth() + t19);
}, (e11, t19) => t19.getMonth() - e11.getMonth() + (t19.getFullYear() - e11.getFullYear()) * 12, (e11) => e11.getMonth());
ft13.range;
var wr6 = k20((e11) => {
  e11.setUTCDate(1), e11.setUTCHours(0, 0, 0, 0);
}, (e11, t19) => {
  e11.setUTCMonth(e11.getUTCMonth() + t19);
}, (e11, t19) => t19.getUTCMonth() - e11.getUTCMonth() + (t19.getUTCFullYear() - e11.getUTCFullYear()) * 12, (e11) => e11.getUTCMonth());
wr6.range;
var G14 = k20((e11) => {
  e11.setMonth(0, 1), e11.setHours(0, 0, 0, 0);
}, (e11, t19) => {
  e11.setFullYear(e11.getFullYear() + t19);
}, (e11, t19) => t19.getFullYear() - e11.getFullYear(), (e11) => e11.getFullYear());
G14.every = (e11) => !isFinite(e11 = Math.floor(e11)) || !(e11 > 0) ? null : k20((t19) => {
  t19.setFullYear(Math.floor(t19.getFullYear() / e11) * e11), t19.setMonth(0, 1), t19.setHours(0, 0, 0, 0);
}, (t19, n33) => {
  t19.setFullYear(t19.getFullYear() + n33 * e11);
});
G14.range;
var ee6 = k20((e11) => {
  e11.setUTCMonth(0, 1), e11.setUTCHours(0, 0, 0, 0);
}, (e11, t19) => {
  e11.setUTCFullYear(e11.getUTCFullYear() + t19);
}, (e11, t19) => t19.getUTCFullYear() - e11.getUTCFullYear(), (e11) => e11.getUTCFullYear());
ee6.every = (e11) => !isFinite(e11 = Math.floor(e11)) || !(e11 > 0) ? null : k20((t19) => {
  t19.setUTCFullYear(Math.floor(t19.getUTCFullYear() / e11) * e11), t19.setUTCMonth(0, 1), t19.setUTCHours(0, 0, 0, 0);
}, (t19, n33) => {
  t19.setUTCFullYear(t19.getUTCFullYear() + n33 * e11);
});
ee6.range;
function Tr6(e11, t19, n33, r24, i27, o12) {
  const a22 = [
    [fe6, 1, I13],
    [fe6, 5, 5 * I13],
    [fe6, 15, 15 * I13],
    [fe6, 30, 30 * I13],
    [o12, 1, P15],
    [o12, 5, 5 * P15],
    [o12, 15, 15 * P15],
    [o12, 30, 30 * P15],
    [i27, 1, Z9],
    [i27, 3, 3 * Z9],
    [i27, 6, 6 * Z9],
    [i27, 12, 12 * Z9],
    [r24, 1, q11],
    [r24, 2, 2 * q11],
    [n33, 1, st11],
    [t19, 1, $t7],
    [t19, 3, 3 * $t7],
    [e11, 1, Ge6]
  ];
  function u35(s18, h26, d34) {
    const f39 = h26 < s18;
    f39 && ([s18, h26] = [h26, s18]);
    const m33 = d34 && typeof d34.range == "function" ? d34 : l25(s18, h26, d34), A17 = m33 ? m33.range(s18, +h26 + 1) : [];
    return f39 ? A17.reverse() : A17;
  }
  function l25(s18, h26, d34) {
    const f39 = Math.abs(h26 - s18) / d34, m33 = nt13(([, , S21]) => S21).right(a22, f39);
    if (m33 === a22.length)
      return e11.every(Ke6(s18 / Ge6, h26 / Ge6, d34));
    if (m33 === 0)
      return _e6.every(Math.max(Ke6(s18, h26, d34), 1));
    const [A17, _19] = a22[f39 / a22[m33 - 1][2] < a22[m33][2] / f39 ? m33 - 1 : m33];
    return A17.every(_19);
  }
  return [u35, l25];
}
var [Cr6, br6] = Tr6(G14, ft13, Ve7, Ce6, ct10, ut10);
function We8(e11) {
  if (0 <= e11.y && e11.y < 100) {
    var t19 = new Date(-1, e11.m, e11.d, e11.H, e11.M, e11.S, e11.L);
    return t19.setFullYear(e11.y), t19;
  }
  return new Date(e11.y, e11.m, e11.d, e11.H, e11.M, e11.S, e11.L);
}
function Xe6(e11) {
  if (0 <= e11.y && e11.y < 100) {
    var t19 = new Date(Date.UTC(-1, e11.m, e11.d, e11.H, e11.M, e11.S, e11.L));
    return t19.setUTCFullYear(e11.y), t19;
  }
  return new Date(Date.UTC(e11.y, e11.m, e11.d, e11.H, e11.M, e11.S, e11.L));
}
function pe7(e11, t19, n33) {
  return { y: e11, m: t19, d: n33, H: 0, M: 0, S: 0, L: 0 };
}
function Ar6(e11) {
  var t19 = e11.dateTime, n33 = e11.date, r24 = e11.time, i27 = e11.periods, o12 = e11.days, a22 = e11.shortDays, u35 = e11.months, l25 = e11.shortMonths, s18 = ve8(i27), h26 = ye6(i27), d34 = ve8(o12), f39 = ye6(o12), m33 = ve8(a22), A17 = ye6(a22), _19 = ve8(u35), S21 = ye6(u35), L11 = ve8(l25), j18 = ye6(l25), C19 = {
    a: ae7,
    A: se6,
    b: E24,
    B: tn5,
    c: null,
    d: Yt7,
    e: Yt7,
    f: Wr6,
    g: ii7,
    G: ai6,
    H: Zr6,
    I: qr6,
    j: Gr6,
    L: Gt7,
    m: Xr6,
    M: Qr6,
    p: nn4,
    q: rn5,
    Q: Ht8,
    s: zt7,
    S: Jr6,
    u: Rr6,
    U: Kr6,
    V: ei7,
    w: ti7,
    W: ni7,
    x: null,
    X: null,
    y: ri7,
    Y: oi6,
    Z: si7,
    "%": Lt6
  }, N19 = {
    a: on5,
    A: an5,
    b: sn5,
    B: un5,
    c: null,
    d: _t8,
    e: _t8,
    f: fi6,
    g: wi7,
    G: Ci4,
    H: ui7,
    I: ci7,
    j: li7,
    L: Xt7,
    m: hi7,
    M: gi7,
    p: cn3,
    q: ln5,
    Q: Ht8,
    s: zt7,
    S: di7,
    u: mi7,
    U: pi7,
    V: vi7,
    w: yi7,
    W: Mi4,
    x: null,
    X: null,
    y: xi7,
    Y: Ti5,
    Z: bi7,
    "%": Lt6
  }, b33 = {
    a: V14,
    A: v30,
    b: U18,
    B: D17,
    c: X12,
    d: Nt8,
    e: Nt8,
    f: Er5,
    g: Ft7,
    G: Ut8,
    H: St7,
    I: St7,
    j: zr5,
    L: Or5,
    m: Hr6,
    M: jr6,
    p: W8,
    q: Lr6,
    Q: Br6,
    s: Ir5,
    S: Pr6,
    u: Fr6,
    U: Nr6,
    V: Sr6,
    w: Ur5,
    W: Yr6,
    x: Ae6,
    X: oe7,
    y: Ft7,
    Y: Ut8,
    Z: _r5,
    "%": Vr6
  };
  C19.x = p26(n33, C19), C19.X = p26(r24, C19), C19.c = p26(t19, C19), N19.x = p26(n33, N19), N19.X = p26(r24, N19), N19.c = p26(t19, N19);
  function p26(g31, y33) {
    return function(M12) {
      var c27 = [], Y11 = -1, T20 = 0, H15 = g31.length, z19, R20, ht14;
      for (M12 instanceof Date || (M12 = /* @__PURE__ */ new Date(+M12)); ++Y11 < H15; )
        g31.charCodeAt(Y11) === 37 && (c27.push(g31.slice(T20, Y11)), (R20 = kt9[z19 = g31.charAt(++Y11)]) != null ? z19 = g31.charAt(++Y11) : R20 = z19 === "e" ? " " : "0", (ht14 = y33[z19]) && (z19 = ht14(M12, R20)), c27.push(z19), T20 = Y11 + 1);
      return c27.push(g31.slice(T20, Y11)), c27.join("");
    };
  }
  function w29(g31, y33) {
    return function(M12) {
      var c27 = pe7(1900, void 0, 1), Y11 = O20(c27, g31, M12 += "", 0), T20, H15;
      if (Y11 != M12.length)
        return null;
      if ("Q" in c27)
        return new Date(c27.Q);
      if ("s" in c27)
        return new Date(c27.s * 1e3 + ("L" in c27 ? c27.L : 0));
      if (y33 && !("Z" in c27) && (c27.Z = 0), "p" in c27 && (c27.H = c27.H % 12 + c27.p * 12), c27.m === void 0 && (c27.m = "q" in c27 ? c27.q : 0), "V" in c27) {
        if (c27.V < 1 || c27.V > 53)
          return null;
        "w" in c27 || (c27.w = 1), "Z" in c27 ? (T20 = Xe6(pe7(c27.y, 0, 1)), H15 = T20.getUTCDay(), T20 = H15 > 4 || H15 === 0 ? He7.ceil(T20) : He7(T20), T20 = lt11.offset(T20, (c27.V - 1) * 7), c27.y = T20.getUTCFullYear(), c27.m = T20.getUTCMonth(), c27.d = T20.getUTCDate() + (c27.w + 6) % 7) : (T20 = We8(pe7(c27.y, 0, 1)), H15 = T20.getDay(), T20 = H15 > 4 || H15 === 0 ? Le6.ceil(T20) : Le6(T20), T20 = Ce6.offset(T20, (c27.V - 1) * 7), c27.y = T20.getFullYear(), c27.m = T20.getMonth(), c27.d = T20.getDate() + (c27.w + 6) % 7);
      } else
        ("W" in c27 || "U" in c27) && ("w" in c27 || (c27.w = "u" in c27 ? c27.u % 7 : "W" in c27 ? 1 : 0), H15 = "Z" in c27 ? Xe6(pe7(c27.y, 0, 1)).getUTCDay() : We8(pe7(c27.y, 0, 1)).getDay(), c27.m = 0, c27.d = "W" in c27 ? (c27.w + 6) % 7 + c27.W * 7 - (H15 + 5) % 7 : c27.w + c27.U * 7 - (H15 + 6) % 7);
      return "Z" in c27 ? (c27.H += c27.Z / 100 | 0, c27.M += c27.Z % 100, Xe6(c27)) : We8(c27);
    };
  }
  function O20(g31, y33, M12, c27) {
    for (var Y11 = 0, T20 = y33.length, H15 = M12.length, z19, R20; Y11 < T20; ) {
      if (c27 >= H15)
        return -1;
      if (z19 = y33.charCodeAt(Y11++), z19 === 37) {
        if (z19 = y33.charAt(Y11++), R20 = b33[z19 in kt9 ? y33.charAt(Y11++) : z19], !R20 || (c27 = R20(g31, M12, c27)) < 0)
          return -1;
      } else if (z19 != M12.charCodeAt(c27++))
        return -1;
    }
    return c27;
  }
  function W8(g31, y33, M12) {
    var c27 = s18.exec(y33.slice(M12));
    return c27 ? (g31.p = h26.get(c27[0].toLowerCase()), M12 + c27[0].length) : -1;
  }
  function V14(g31, y33, M12) {
    var c27 = m33.exec(y33.slice(M12));
    return c27 ? (g31.w = A17.get(c27[0].toLowerCase()), M12 + c27[0].length) : -1;
  }
  function v30(g31, y33, M12) {
    var c27 = d34.exec(y33.slice(M12));
    return c27 ? (g31.w = f39.get(c27[0].toLowerCase()), M12 + c27[0].length) : -1;
  }
  function U18(g31, y33, M12) {
    var c27 = L11.exec(y33.slice(M12));
    return c27 ? (g31.m = j18.get(c27[0].toLowerCase()), M12 + c27[0].length) : -1;
  }
  function D17(g31, y33, M12) {
    var c27 = _19.exec(y33.slice(M12));
    return c27 ? (g31.m = S21.get(c27[0].toLowerCase()), M12 + c27[0].length) : -1;
  }
  function X12(g31, y33, M12) {
    return O20(g31, t19, y33, M12);
  }
  function Ae6(g31, y33, M12) {
    return O20(g31, n33, y33, M12);
  }
  function oe7(g31, y33, M12) {
    return O20(g31, r24, y33, M12);
  }
  function ae7(g31) {
    return a22[g31.getDay()];
  }
  function se6(g31) {
    return o12[g31.getDay()];
  }
  function E24(g31) {
    return l25[g31.getMonth()];
  }
  function tn5(g31) {
    return u35[g31.getMonth()];
  }
  function nn4(g31) {
    return i27[+(g31.getHours() >= 12)];
  }
  function rn5(g31) {
    return 1 + ~~(g31.getMonth() / 3);
  }
  function on5(g31) {
    return a22[g31.getUTCDay()];
  }
  function an5(g31) {
    return o12[g31.getUTCDay()];
  }
  function sn5(g31) {
    return l25[g31.getUTCMonth()];
  }
  function un5(g31) {
    return u35[g31.getUTCMonth()];
  }
  function cn3(g31) {
    return i27[+(g31.getUTCHours() >= 12)];
  }
  function ln5(g31) {
    return 1 + ~~(g31.getUTCMonth() / 3);
  }
  return {
    format: function(g31) {
      var y33 = p26(g31 += "", C19);
      return y33.toString = function() {
        return g31;
      }, y33;
    },
    parse: function(g31) {
      var y33 = w29(g31 += "", false);
      return y33.toString = function() {
        return g31;
      }, y33;
    },
    utcFormat: function(g31) {
      var y33 = p26(g31 += "", N19);
      return y33.toString = function() {
        return g31;
      }, y33;
    },
    utcParse: function(g31) {
      var y33 = w29(g31 += "", true);
      return y33.toString = function() {
        return g31;
      }, y33;
    }
  };
}
var kt9 = { "-": "", _: " ", 0: "0" };
var F14 = /^\s*\d+/;
var Dr5 = /^%/;
var $r6 = /[\\^$*+?|[\]().{}]/g;
function x24(e11, t19, n33) {
  var r24 = e11 < 0 ? "-" : "", i27 = (r24 ? -e11 : e11) + "", o12 = i27.length;
  return r24 + (o12 < n33 ? new Array(n33 - o12 + 1).join(t19) + i27 : i27);
}
function kr5(e11) {
  return e11.replace($r6, "\\$&");
}
function ve8(e11) {
  return new RegExp("^(?:" + e11.map(kr5).join("|") + ")", "i");
}
function ye6(e11) {
  return new Map(e11.map((t19, n33) => [t19.toLowerCase(), n33]));
}
function Ur5(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 1));
  return r24 ? (e11.w = +r24[0], n33 + r24[0].length) : -1;
}
function Fr6(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 1));
  return r24 ? (e11.u = +r24[0], n33 + r24[0].length) : -1;
}
function Nr6(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.U = +r24[0], n33 + r24[0].length) : -1;
}
function Sr6(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.V = +r24[0], n33 + r24[0].length) : -1;
}
function Yr6(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.W = +r24[0], n33 + r24[0].length) : -1;
}
function Ut8(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 4));
  return r24 ? (e11.y = +r24[0], n33 + r24[0].length) : -1;
}
function Ft7(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.y = +r24[0] + (+r24[0] > 68 ? 1900 : 2e3), n33 + r24[0].length) : -1;
}
function _r5(e11, t19, n33) {
  var r24 = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t19.slice(n33, n33 + 6));
  return r24 ? (e11.Z = r24[1] ? 0 : -(r24[2] + (r24[3] || "00")), n33 + r24[0].length) : -1;
}
function Lr6(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 1));
  return r24 ? (e11.q = r24[0] * 3 - 3, n33 + r24[0].length) : -1;
}
function Hr6(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.m = r24[0] - 1, n33 + r24[0].length) : -1;
}
function Nt8(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.d = +r24[0], n33 + r24[0].length) : -1;
}
function zr5(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 3));
  return r24 ? (e11.m = 0, e11.d = +r24[0], n33 + r24[0].length) : -1;
}
function St7(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.H = +r24[0], n33 + r24[0].length) : -1;
}
function jr6(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.M = +r24[0], n33 + r24[0].length) : -1;
}
function Pr6(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.S = +r24[0], n33 + r24[0].length) : -1;
}
function Or5(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 3));
  return r24 ? (e11.L = +r24[0], n33 + r24[0].length) : -1;
}
function Er5(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33, n33 + 6));
  return r24 ? (e11.L = Math.floor(r24[0] / 1e3), n33 + r24[0].length) : -1;
}
function Vr6(e11, t19, n33) {
  var r24 = Dr5.exec(t19.slice(n33, n33 + 1));
  return r24 ? n33 + r24[0].length : -1;
}
function Br6(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33));
  return r24 ? (e11.Q = +r24[0], n33 + r24[0].length) : -1;
}
function Ir5(e11, t19, n33) {
  var r24 = F14.exec(t19.slice(n33));
  return r24 ? (e11.s = +r24[0], n33 + r24[0].length) : -1;
}
function Yt7(e11, t19) {
  return x24(e11.getDate(), t19, 2);
}
function Zr6(e11, t19) {
  return x24(e11.getHours(), t19, 2);
}
function qr6(e11, t19) {
  return x24(e11.getHours() % 12 || 12, t19, 2);
}
function Gr6(e11, t19) {
  return x24(1 + Ce6.count(G14(e11), e11), t19, 3);
}
function Gt7(e11, t19) {
  return x24(e11.getMilliseconds(), t19, 3);
}
function Wr6(e11, t19) {
  return Gt7(e11, t19) + "000";
}
function Xr6(e11, t19) {
  return x24(e11.getMonth() + 1, t19, 2);
}
function Qr6(e11, t19) {
  return x24(e11.getMinutes(), t19, 2);
}
function Jr6(e11, t19) {
  return x24(e11.getSeconds(), t19, 2);
}
function Rr6(e11) {
  var t19 = e11.getDay();
  return t19 === 0 ? 7 : t19;
}
function Kr6(e11, t19) {
  return x24(Ve7.count(G14(e11) - 1, e11), t19, 2);
}
function Wt8(e11) {
  var t19 = e11.getDay();
  return t19 >= 4 || t19 === 0 ? ge6(e11) : ge6.ceil(e11);
}
function ei7(e11, t19) {
  return e11 = Wt8(e11), x24(ge6.count(G14(e11), e11) + (G14(e11).getDay() === 4), t19, 2);
}
function ti7(e11) {
  return e11.getDay();
}
function ni7(e11, t19) {
  return x24(Le6.count(G14(e11) - 1, e11), t19, 2);
}
function ri7(e11, t19) {
  return x24(e11.getFullYear() % 100, t19, 2);
}
function ii7(e11, t19) {
  return e11 = Wt8(e11), x24(e11.getFullYear() % 100, t19, 2);
}
function oi6(e11, t19) {
  return x24(e11.getFullYear() % 1e4, t19, 4);
}
function ai6(e11, t19) {
  var n33 = e11.getDay();
  return e11 = n33 >= 4 || n33 === 0 ? ge6(e11) : ge6.ceil(e11), x24(e11.getFullYear() % 1e4, t19, 4);
}
function si7(e11) {
  var t19 = e11.getTimezoneOffset();
  return (t19 > 0 ? "-" : (t19 *= -1, "+")) + x24(t19 / 60 | 0, "0", 2) + x24(t19 % 60, "0", 2);
}
function _t8(e11, t19) {
  return x24(e11.getUTCDate(), t19, 2);
}
function ui7(e11, t19) {
  return x24(e11.getUTCHours(), t19, 2);
}
function ci7(e11, t19) {
  return x24(e11.getUTCHours() % 12 || 12, t19, 2);
}
function li7(e11, t19) {
  return x24(1 + lt11.count(ee6(e11), e11), t19, 3);
}
function Xt7(e11, t19) {
  return x24(e11.getUTCMilliseconds(), t19, 3);
}
function fi6(e11, t19) {
  return Xt7(e11, t19) + "000";
}
function hi7(e11, t19) {
  return x24(e11.getUTCMonth() + 1, t19, 2);
}
function gi7(e11, t19) {
  return x24(e11.getUTCMinutes(), t19, 2);
}
function di7(e11, t19) {
  return x24(e11.getUTCSeconds(), t19, 2);
}
function mi7(e11) {
  var t19 = e11.getUTCDay();
  return t19 === 0 ? 7 : t19;
}
function pi7(e11, t19) {
  return x24(qt6.count(ee6(e11) - 1, e11), t19, 2);
}
function Qt6(e11) {
  var t19 = e11.getUTCDay();
  return t19 >= 4 || t19 === 0 ? de8(e11) : de8.ceil(e11);
}
function vi7(e11, t19) {
  return e11 = Qt6(e11), x24(de8.count(ee6(e11), e11) + (ee6(e11).getUTCDay() === 4), t19, 2);
}
function yi7(e11) {
  return e11.getUTCDay();
}
function Mi4(e11, t19) {
  return x24(He7.count(ee6(e11) - 1, e11), t19, 2);
}
function xi7(e11, t19) {
  return x24(e11.getUTCFullYear() % 100, t19, 2);
}
function wi7(e11, t19) {
  return e11 = Qt6(e11), x24(e11.getUTCFullYear() % 100, t19, 2);
}
function Ti5(e11, t19) {
  return x24(e11.getUTCFullYear() % 1e4, t19, 4);
}
function Ci4(e11, t19) {
  var n33 = e11.getUTCDay();
  return e11 = n33 >= 4 || n33 === 0 ? de8(e11) : de8.ceil(e11), x24(e11.getUTCFullYear() % 1e4, t19, 4);
}
function bi7() {
  return "+0000";
}
function Lt6() {
  return "%";
}
function Ht8(e11) {
  return +e11;
}
function zt7(e11) {
  return Math.floor(+e11 / 1e3);
}
var ue7;
var Jt6;
Ai7({
  dateTime: "%x, %X",
  date: "%-m/%-d/%Y",
  time: "%-I:%M:%S %p",
  periods: ["AM", "PM"],
  days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
  shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
  shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
});
function Ai7(e11) {
  return ue7 = Ar6(e11), Jt6 = ue7.format, ue7.parse, ue7.utcFormat, ue7.utcParse, ue7;
}
function Di4(e11) {
  return new Date(e11);
}
function $i7(e11) {
  return e11 instanceof Date ? +e11 : +/* @__PURE__ */ new Date(+e11);
}
function Rt9(e11, t19, n33, r24, i27, o12, a22, u35, l25, s18) {
  var h26 = It6(), d34 = h26.invert, f39 = h26.domain, m33 = s18(".%L"), A17 = s18(":%S"), _19 = s18("%I:%M"), S21 = s18("%I %p"), L11 = s18("%a %d"), j18 = s18("%b %d"), C19 = s18("%B"), N19 = s18("%Y");
  function b33(p26) {
    return (l25(p26) < p26 ? m33 : u35(p26) < p26 ? A17 : a22(p26) < p26 ? _19 : o12(p26) < p26 ? S21 : r24(p26) < p26 ? i27(p26) < p26 ? L11 : j18 : n33(p26) < p26 ? C19 : N19)(p26);
  }
  return h26.invert = function(p26) {
    return new Date(d34(p26));
  }, h26.domain = function(p26) {
    return arguments.length ? f39(Array.from(p26, $i7)) : f39().map(Di4);
  }, h26.ticks = function(p26) {
    var w29 = f39();
    return e11(w29[0], w29[w29.length - 1], p26 ?? 10);
  }, h26.tickFormat = function(p26, w29) {
    return w29 == null ? b33 : s18(w29);
  }, h26.nice = function(p26) {
    var w29 = f39();
    return (!p26 || typeof p26.range != "function") && (p26 = t19(w29[0], w29[w29.length - 1], p26 ?? 10)), p26 ? f39(cr6(w29, p26)) : h26;
  }, h26.copy = function() {
    return Bt7(h26, Rt9(e11, t19, n33, r24, i27, o12, a22, u35, l25, s18));
  }, h26;
}
function ki7() {
  return at9.apply(Rt9(Cr6, br6, G14, ft13, Ve7, Ce6, ct10, ut10, fe6, Jt6).domain([new Date(2e3, 0, 1), new Date(2e3, 0, 2)]), arguments);
}
function Ui5(e11) {
  for (var t19 = e11.length / 6 | 0, n33 = new Array(t19), r24 = 0; r24 < t19; )
    n33[r24] = "#" + e11.slice(r24 * 6, ++r24 * 6);
  return n33;
}
var Fi5 = Ui5("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");
var we7 = (e11, t19) => {
  var n33;
  const r24 = e11._$AN;
  if (r24 === void 0)
    return false;
  for (const i27 of r24)
    (n33 = i27._$AO) == null || n33.call(i27, t19, false), we7(i27, t19);
  return true;
};
var ze8 = (e11) => {
  let t19, n33;
  do {
    if ((t19 = e11._$AM) === void 0)
      break;
    n33 = t19._$AN, n33.delete(e11), e11 = t19;
  } while ((n33 == null ? void 0 : n33.size) === 0);
};
var Kt6 = (e11) => {
  for (let t19; t19 = e11._$AM; e11 = t19) {
    let n33 = t19._$AN;
    if (n33 === void 0)
      t19._$AN = n33 = /* @__PURE__ */ new Set();
    else if (n33.has(e11))
      break;
    n33.add(e11), Yi5(t19);
  }
};
function Ni7(e11) {
  this._$AN !== void 0 ? (ze8(this), this._$AM = e11, Kt6(this)) : this._$AM = e11;
}
function Si5(e11, t19 = false, n33 = 0) {
  const r24 = this._$AH, i27 = this._$AN;
  if (i27 !== void 0 && i27.size !== 0)
    if (t19)
      if (Array.isArray(r24))
        for (let o12 = n33; o12 < r24.length; o12++)
          we7(r24[o12], false), ze8(r24[o12]);
      else
        r24 != null && (we7(r24, false), ze8(r24));
    else
      we7(this, e11);
}
var Yi5 = (e11) => {
  e11.type == T14.CHILD && (e11._$AP ?? (e11._$AP = Si5), e11._$AQ ?? (e11._$AQ = Ni7));
};
var _i7 = class extends i15 {
  constructor() {
    super(...arguments), this._$AN = void 0;
  }
  _$AT(t19, n33, r24) {
    super._$AT(t19, n33, r24), Kt6(this), this.isConnected = t19._$AU;
  }
  _$AO(t19, n33 = true) {
    var r24, i27;
    t19 !== this.isConnected && (this.isConnected = t19, t19 ? (r24 = this.reconnected) == null || r24.call(this) : (i27 = this.disconnected) == null || i27.call(this)), n33 && (we7(this, t19), ze8(this));
  }
  setValue(t19) {
    if (s12(this._$Ct))
      this._$Ct._$AI(t19, this);
    else {
      const n33 = [...this._$Ct._$AH];
      n33[this._$Ci] = t19, this._$Ct._$AI(n33, this, 0);
    }
  }
  disconnected() {
  }
  reconnected() {
  }
};
var Qe7 = /* @__PURE__ */ new WeakMap();
var Te6 = _14(class extends _i7 {
  render(e11) {
    return p;
  }
  update(e11, [t19]) {
    var n33;
    const r24 = t19 !== this.Y;
    return r24 && this.Y !== void 0 && this.rt(void 0), (r24 || this.lt !== this.ct) && (this.Y = t19, this.ht = (n33 = e11.options) == null ? void 0 : n33.host, this.rt(this.ct = e11.element)), p;
  }
  rt(e11) {
    if (this.isConnected || (e11 = void 0), typeof this.Y == "function") {
      const t19 = this.ht ?? globalThis;
      let n33 = Qe7.get(t19);
      n33 === void 0 && (n33 = /* @__PURE__ */ new WeakMap(), Qe7.set(t19, n33)), n33.get(this.Y) !== void 0 && this.Y.call(this.ht, void 0), n33.set(this.Y, e11), e11 !== void 0 && this.Y.call(this.ht, e11);
    } else
      this.Y.value = e11;
  }
  get lt() {
    var e11, t19;
    return typeof this.Y == "function" ? (e11 = Qe7.get(this.ht ?? globalThis)) == null ? void 0 : e11.get(this.Y) : (t19 = this.Y) == null ? void 0 : t19.value;
  }
  disconnected() {
    this.lt === this.ct && this.rt(void 0);
  }
  reconnected() {
    this.rt(this.ct);
  }
});
function Li4(e11, t19, n33) {
  return ki7().domain([n33 - t19, n33]).range([0, e11]);
}
function Hi4(e11) {
  const t19 = jt9(e11).tickFormat((n33) => `${n33.getTime() / 1e3}`);
  return Nt`
    <g 
      class="axis axis--x" 
      ${Te6((n33) => {
    t19($i(n33));
  })}>
    </g> 
  `;
}
function zi5(e11, t19) {
  const n33 = jt9(e11).tickSize(-t19).tickFormat("");
  return Nt`
    <g 
      class="axis-x-grid" 
      ${Te6((r24) => {
    n33($i(r24));
  })}>
    </g> 
  `;
}
var ji2 = Object.defineProperty;
var be6 = (e11, t19, n33, r24) => {
  for (var i27 = void 0, o12 = e11.length - 1, a22; o12 >= 0; o12--)
    (a22 = e11[o12]) && (i27 = a22(t19, n33, i27) || i27);
  return i27 && ji2(t19, n33, i27), i27;
};
var re7 = class extends x {
  constructor() {
    super(...arguments), this.value = 0, this.color = "", this.hide = false, this.yAxis = 0, this.displayName = "";
  }
};
be6([
  Rt({ type: Number })
], re7.prototype, "value");
be6([
  Rt({ type: String })
], re7.prototype, "color");
be6([
  Rt({ type: Boolean })
], re7.prototype, "hide");
be6([
  Rt({ type: Number, attribute: "y-axis" })
], re7.prototype, "yAxis");
be6([
  Rt({ type: String, attribute: "display-name", reflect: true })
], re7.prototype, "displayName");
customElements.get("frc-line-chart-data") || customElements.define("frc-line-chart-data", re7);
var Pi5 = Object.defineProperty;
var ie7 = (e11, t19, n33, r24) => {
  for (var i27 = void 0, o12 = e11.length - 1, a22; o12 >= 0; o12--)
    (a22 = e11[o12]) && (i27 = a22(t19, n33, i27) || i27);
  return i27 && Pi5(t19, n33, i27), i27;
};
var Oi5 = Vt7().domain(
  Array(8).fill(0).map((e11, t19) => t19)
).range(Fi5);
var ce8;
var Q10 = (ce8 = class extends x {
  constructor() {
    super(...arguments), this.viewTime = 10, this.chartTitle = "", this.data = [], this.startTime = 0, this.elapsedTimeMs = 0;
  }
  firstUpdated() {
    this.startTime = Date.now(), requestAnimationFrame(() => {
      this.updateChart();
    });
  }
  getFilteredData(e11) {
    const t19 = e11.findIndex(
      ({ timeMs: n33 }) => this.elapsedTimeMs - n33 < Math.round(this.viewTime * 1e3)
    ) - 1;
    return t19 < 0 ? e11 : e11.slice(t19);
  }
  updateChart() {
    this.elapsedTimeMs = Date.now() - this.startTime;
    const e11 = [...this.children].filter(
      (t19) => t19.tagName.toLowerCase() === "frc-line-chart-data"
    );
    this.data = e11.map((t19, n33) => {
      var r24;
      const i27 = ((r24 = this.data[n33]) == null ? void 0 : r24.data) ?? [];
      return i27.push({
        value: t19.value ?? 0,
        timeMs: this.elapsedTimeMs
      }), {
        data: this.getFilteredData(i27),
        color: t19.color || Oi5(n33 % 8),
        hide: t19.hide ?? false,
        yAxis: t19.yAxis ?? 0,
        displayName: t19.displayName || `Data ${n33}`
      };
    }), requestAnimationFrame(() => {
      this.updateChart();
    });
  }
  static getYScale(e11, t19, n33) {
    const { invert: r24, lockMin: i27, lockMax: o12 } = n33;
    let { min: a22, max: u35 } = n33;
    (!i27 || !o12) && t19.forEach((s18) => {
      s18.data.forEach(({ value: h26 }) => {
        i27 || (a22 = Math.min(a22, h26)), o12 || (u35 = Math.max(u35, h26));
      });
    });
    const l25 = r24 ? [0, e11] : [e11, 0];
    return Zt7().domain([a22, u35]).range(l25);
  }
  getDimensions() {
    var e11;
    const t19 = { top: 0, right: 40, bottom: 20, left: 40 }, n33 = ((e11 = this.chartContainer) == null ? void 0 : e11.getBoundingClientRect()) ?? {
      width: 960,
      height: 500
    }, r24 = n33.width, i27 = n33.height, o12 = r24 - t19.left - t19.right, a22 = i27 - t19.top - t19.bottom;
    return {
      margin: t19,
      svgWidth: r24,
      svgHeight: i27,
      width: o12,
      height: a22
    };
  }
  getYScales() {
    const { height: e11 } = this.getDimensions(), t19 = [...this.children].filter(
      (n33) => n33.tagName.toLowerCase() === "frc-line-chart-axis"
    );
    if (t19.length === 0) {
      const n33 = {
        min: -1,
        max: 1,
        lockMin: false,
        lockMax: false,
        invert: false,
        side: "left",
        hideGridLines: false,
        hide: false
      };
      return [
        {
          chartAxis: n33,
          scale: ce8.getYScale(
            e11,
            this.data.filter(({ yAxis: r24 }) => r24 === 0),
            n33
          )
        }
      ];
    }
    return t19.map((n33, r24) => {
      const i27 = n33, o12 = {
        min: i27.min ?? -1,
        max: i27.max ?? 1,
        lockMin: i27.lockMin ?? false,
        lockMax: i27.lockMax ?? false,
        invert: i27.invert ?? false,
        side: i27.side ?? "left",
        hideGridLines: i27.hideGridLines ?? false,
        hide: i27.hide ?? false
      };
      return {
        chartAxis: o12,
        scale: ce8.getYScale(
          e11,
          this.data.filter(({ yAxis: a22 }) => a22 === r24),
          o12
        )
      };
    });
  }
  static getPath(e11, t19, n33) {
    return `M${e11.map(
      (r24) => [t19(r24).toFixed(3), n33(r24).toFixed(3)].join(",")
    ).join("L")}`;
  }
  getLegend() {
    const e11 = [...this.children].find(
      (n33) => n33.tagName.toLowerCase() === "frc-line-chart-legend"
    );
    if (!e11)
      return {
        direction: "horizontal",
        position: "n",
        inside: false,
        hide: false
      };
    const t19 = e11;
    return {
      direction: t19.direction ?? "horizontal",
      position: t19.position ?? "n",
      inside: t19.inside ?? false,
      hide: t19.hide ?? false
    };
  }
  render() {
    const { inside: e11, position: t19, direction: n33, hide: r24 } = this.getLegend(), i27 = t19 === "w" || t19 === "e" || ["ne", "nw", "se", "sw"].includes(t19) && n33 === "vertical", o12 = i27 && ["ne", "e", "se"].includes(t19) || !i27 && ["sw", "s", "se"].includes(t19), a22 = h20({
      display: e11 ? "block" : "flex",
      flexDirection: `${i27 ? "row" : "column"}${o12 ? "-reverse" : ""}`
    }), u35 = e11 ? {
      width: "100%",
      height: "100%"
    } : { flex: "1" };
    return Ht`
      <div class="chart-and-header">
        ${this.chartTitle ? Ht`<header>${this.chartTitle}</header>` : ""}
        <div class="chart-and-legend" style=${a22}>
          ${r24 ? "" : this.renderLegend()}
          <div class="chart-container" style=${h20(u35)}>
            ${this.renderChart()}
          </div>
        </div>
      </div>
    `;
  }
  renderLegend() {
    const { margin: e11 } = this.getDimensions(), { inside: t19, direction: n33, position: r24 } = this.getLegend(), i27 = ["n", "s", "e", "w"].includes(r24) ? "center" : r24 === "nw" ? "flex-start" : r24 === "se" ? "flex-end" : r24 === "ne" ? n33 === "horizontal" ? "flex-end" : "flex-start" : n33 === "vertical" ? "flex-end" : "flex-start", o12 = (() => {
      if (!t19)
        return {};
      const u35 = {
        alignItems: "center"
      };
      return r24.includes("n") ? u35.top = `${e11.top}px` : r24.includes("s") && (u35.bottom = `${e11.bottom}px`), r24.includes("w") ? u35.left = `${e11.left}px` : r24.includes("e") && (u35.right = `${e11.right}px`), ["n", "s", "e", "w"].includes(r24) && (u35.justifyContent = "center"), ["n", "s"].includes(r24) && (u35.left = "0", u35.right = "0"), ["e", "w"].includes(r24) && (u35.top = "0", u35.bottom = "0"), u35;
    })(), a22 = h20({
      alignSelf: i27,
      ...o12
    });
    return Ht`
      <div
        class="legend ${t19 ? "inside" : "outside"} ${n33 === "horizontal" ? "horizontal" : "vertical"}"
        style=${a22}
      >
        ${this.data.map(
      ({ color: u35, displayName: l25 }) => Ht`
            <div class="legend-item">
              <div
                class="legend-item-box"
                style=${h20({
        background: u35
      })}
              ></div>
              <span class="legend-item-label">${l25}</span>
            </div>
          `
    )}
      </div>
    `;
  }
  renderChart() {
    const { margin: e11, svgWidth: t19, svgHeight: n33, width: r24, height: i27 } = this.getDimensions(), o12 = Li4(
      r24,
      Math.round(this.viewTime * 1e3),
      this.elapsedTimeMs
    ), a22 = this.getYScales().filter(
      ({ chartAxis: l25 }) => !l25.hide
    ), u35 = a22.map((l25) => (s18) => ce8.getPath(
      s18,
      (h26) => o12(new Date(h26.timeMs)),
      (h26) => l25.scale(h26.value)
    ));
    return Nt`
      <svg width=${t19} height=${n33} style="position: absolute">
        <g transform="translate(${e11.left},${e11.top})">
          <defs>
            <clipPath id="clip">
              <rect width=${r24} height=${i27}></rect>
            </clipPath>
          </defs>
          <g transform="translate(0,${i27})">
            ${Hi4(o12)}
            ${zi5(o12, i27)}
          </g>
          ${this.renderScales(a22, "left")}
          ${this.renderScales(a22, "right")}
          <rect class="chart-border" width=${r24} height=${i27}></rect>
          ${this.data.filter(
      ({ hide: l25, yAxis: s18 }) => !l25 && s18 < a22.length && s18 >= 0
    ).map(
      (l25) => Nt`
            <g clip-path="url(#clip)">
              <path 
                class="data-path"
                ${Te6((s18) => {
        const h26 = $i(s18), d34 = u35[l25.yAxis](l25.data);
        h26.attr("class", "line").attr("stroke", l25.color).attr("d", d34);
      })}>
              ></path>
            </g>
          `
    )}
        </g>
      </svg>
    `;
  }
  renderScales(e11, t19) {
    const { width: n33 } = this.getDimensions();
    return Nt`
     ${e11.filter((r24) => r24.chartAxis.side === t19).map((r24, i27) => {
      const o12 = r24.chartAxis.side === "left" ? -i27 * 25 : n33;
      return Nt`
              <g 
                class="axis axis--y" 
                transform="translate(${o12}, 0)"
                ${Te6((a22) => {
        (r24.chartAxis.side === "left" ? Mt9 : zn6)(r24.scale)($i(a22));
      })}>
              </g>
              ${r24.chartAxis.hideGridLines ? "" : Nt`
                    <g 
                      class="axis-y-grid" 
                      ${Te6((a22) => {
        Mt9(r24.scale).tickSize(-n33).tickFormat("")($i(a22));
      })}>
                    </g> 
                  `}
            `;
    })}
    `;
  }
}, ce8.styles = Mt2`
    :host {
      display: inline-block;
      width: 700px;
      height: 400px;
      color: var(--frc-line-chart-text-color, black);
    }

    .chart-and-header {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .chart-and-header header {
      font-size: 18px;
      font-family: sans-serif;
      margin: 3px 0;
    }

    .chart-and-legend {
      flex: 1;
      width: 100%;
      position: relative;
    }

    .legend-container {
      position: relative;
    }

    .legend {
      display: flex;
      z-index: 100;
    }

    .legend.outside {
      position: relative;
    }

    .legend.inside {
      position: absolute;
    }

    .legend-item {
      display: flex;
      flex-wrap: no-wrap;
      gap: 5px;
      align-items: center;
      padding: 5px;
    }

    .legend.horizontal {
      flex-direction: row;
    }

    .legend.vertical {
      flex-direction: column;
    }

    .legend-item-box {
      width: 15px;
      height: 15px;
    }

    .legend-item-label {
      font-family: sans-serif;
      font-size: 15px;
    }

    .line {
      fill: none;
      stroke-width: 1.5px;
    }

    .chart-border {
      fill: none;
      stroke-width: 1;
      stroke: var(--frc-line-chart-border-color, black);
    }

    .axis-x-grid line,
    .axis-y-grid line {
      stroke: var(--frc-line-chart-grid-color, #eee);
    }

    .axis--y {
      font-family: monospace;
    }

    svg {
      overflow: visible;
    }
  `, ce8);
ie7([
  Rt({ type: Number, attribute: "view-time" })
], Q10.prototype, "viewTime");
ie7([
  Rt({ type: String, attribute: "chart-title", reflect: true })
], Q10.prototype, "chartTitle");
ie7([
  n2()
], Q10.prototype, "data");
ie7([
  a(".data-path")
], Q10.prototype, "path");
ie7([
  a("svg")
], Q10.prototype, "svg");
ie7([
  a(".axis--x")
], Q10.prototype, "xAxis");
ie7([
  a(".chart-container")
], Q10.prototype, "chartContainer");
var en5 = Q10;
customElements.get("frc-line-chart") || customElements.define("frc-line-chart", en5);
var Ei6 = Object.defineProperty;
var J10 = (e11, t19, n33, r24) => {
  for (var i27 = void 0, o12 = e11.length - 1, a22; o12 >= 0; o12--)
    (a22 = e11[o12]) && (i27 = a22(t19, n33, i27) || i27);
  return i27 && Ei6(t19, n33, i27), i27;
};
var B17 = class extends x {
  constructor() {
    super(...arguments), this.min = -1, this.max = 1, this.lockMin = false, this.lockMax = false, this.invert = false, this.side = "left", this.hideGridLines = false, this.hide = false;
  }
};
J10([
  Rt({ type: Number })
], B17.prototype, "min");
J10([
  Rt({ type: Number })
], B17.prototype, "max");
J10([
  Rt({ type: Boolean, attribute: "lock-min" })
], B17.prototype, "lockMin");
J10([
  Rt({ type: Boolean, attribute: "lock-max" })
], B17.prototype, "lockMax");
J10([
  Rt({ type: Boolean })
], B17.prototype, "invert");
J10([
  Rt({ type: String, reflect: true })
], B17.prototype, "side");
J10([
  Rt({ type: Boolean, attribute: "hide-grid-lines" })
], B17.prototype, "hideGridLines");
J10([
  Rt({ type: Boolean })
], B17.prototype, "hide");
customElements.get("frc-line-chart-axis") || customElements.define("frc-line-chart-axis", B17);
var Vi4 = Object.defineProperty;
var Be6 = (e11, t19, n33, r24) => {
  for (var i27 = void 0, o12 = e11.length - 1, a22; o12 >= 0; o12--)
    (a22 = e11[o12]) && (i27 = a22(t19, n33, i27) || i27);
  return i27 && Vi4(t19, n33, i27), i27;
};
var me8 = class extends x {
  constructor() {
    super(...arguments), this.position = "n", this.direction = "horizontal", this.hide = false, this.inside = false;
  }
};
Be6([
  Rt({ type: String })
], me8.prototype, "position");
Be6([
  Rt({ type: String })
], me8.prototype, "direction");
Be6([
  Rt({ type: Boolean })
], me8.prototype, "hide");
Be6([
  Rt({ type: Boolean })
], me8.prototype, "inside");
customElements.get("frc-line-chart-legend") || customElements.define("frc-line-chart-legend", me8);
var Ji4 = xt({
  tagName: "frc-line-chart",
  elementClass: en5,
  react: import_react18.default
});
var Ri4 = xt({
  tagName: "frc-line-chart-axis",
  elementClass: B17,
  react: import_react18.default
});
var Ki5 = xt({
  tagName: "frc-line-chart-data",
  elementClass: re7,
  react: import_react18.default
});
var eo3 = xt({
  tagName: "frc-line-chart-legend",
  elementClass: me8,
  react: import_react18.default
});

// node_modules/@frc-web-components/react/dist/components/Logger.es.js
var import_react19 = __toESM(require_react(), 1);
var i24 = {
  info: {
    color: "#fff",
    name: "INFO",
    level: 1
  },
  debug: {
    color: "#fff",
    name: "DEBUG",
    level: 0
  },
  fatal: {
    color: "#FF3E3E",
    name: "ERROR",
    level: 4
  },
  warning: {
    color: "#FFC53E",
    name: "WARNING",
    level: 3
  },
  success: {
    color: "#3EFF45",
    name: "SUCCESS",
    level: 2
  }
};
var x25 = {
  name: "Html Logger",
  enabled: true,
  maxLogCount: 1e3,
  loggingFormat: "[MESSAGE]",
  //"[LEVEL] [MESSAGE]",
  argumentsSeparator: " ",
  utcTime: false,
  level: 0
};
var $19 = function(a22) {
  var t19 = [].slice.call(arguments, 1);
  return t19.forEach(function(e11) {
    for (var o12 in e11)
      a22[o12] = e11[o12];
  }), a22;
};
var w22 = class {
  constructor(t19, e11 = document.body) {
    this.options = $19({}, x25, t19 || {}), this.parent = e11, this.linesCount = 0, this.$ = {}, this.initialized = false;
  }
  init() {
    if (this.initialized)
      return;
    if (!document || !document.createElement || !document.body || !document.body.appendChild)
      throw new Error("HtmlLogger not initialized");
    this.$.container = document.createElement("div"), this.$.container.setAttribute("style", `width:100%; height: 100%;
					margin:0;
					left:0;
					background: rgba(0, 0, 0, 0.8);
					overflow:auto;
					padding: 5px 7px;
    			box-sizing: border-box;`), this.$.log = document.createElement("div");
    const t19 = document.createElement("span");
    t19.style.color = "#afa", t19.style.fontWeight = "bold";
    const e11 = `===== ${this.options.name} - Logger started at ${this.options.utcTime ? (/* @__PURE__ */ new Date()).toUTCString() : /* @__PURE__ */ new Date()} =====`;
    t19.appendChild(document.createTextNode(e11));
    const o12 = document.createElement("div");
    o12.appendChild(t19), o12.appendChild(document.createElement("br")), o12.appendChild(document.createElement("br")), this.$.container.appendChild(o12), this.$.container.appendChild(this.$.log), this.parent.appendChild(this.$.container), this.initialized = true;
  }
  setLevel(t19) {
    this.options.level = t19;
  }
  setEnable(t19 = true) {
    this.initialized && (this.options.enabled = t19, this.$.log.style.color = t19 ? "#fff" : "#444");
  }
  /**
   * Removes all lines from the view
   * @memberOf HtmlLogger
   */
  clean() {
    if (this.initialized) {
      for (; this.$.log.firstChild; )
        this.$.log.removeChild(this.$.log.firstChild);
      this.linesCount = 0;
    }
  }
  /**
   * prints message. default level is [info].
   * @param {String} msg - message to print
   * @param {String} [hexColor=levels.info.color] - hexcolor text
   * @param {String} [level=levels.info.name] - level suffix
   *
   * @memberOf HtmlLogger
   */
  print(t19, e11 = i24.info.color, o12 = i24.info.name) {
    if (!this.initialized || !this.options.enabled)
      return;
    const l25 = this.$.container.scrollTop > this.$.container.scrollHeight - this.$.container.clientHeight - 5, h26 = (t19.length ? t19 : "[empty]").split(/\r\n|\r|\n/);
    for (let d34 = 0; d34 < h26.length; d34++) {
      let g31 = document.createElement("div");
      g31.setAttribute("style", "color:#999;float:left;");
      let f39 = this._getTime();
      g31.appendChild(document.createTextNode(`${f39} `));
      let v30 = this.options.loggingFormat.replace("[LEVEL]", o12).replace("[MESSAGE]", h26[d34]), p26 = document.createElement("div");
      p26.setAttribute(
        "style",
        `word-wrap:break-word;margin-left:6.0em;color: ${e11}`
      ), p26.appendChild(document.createTextNode(v30));
      let m33 = document.createElement("div");
      m33.setAttribute("style", "clear:both;");
      var c27 = document.createElement("div");
      for (c27.appendChild(g31), c27.appendChild(p26), c27.appendChild(m33), this.$.log.appendChild(c27), this.linesCount++; this.linesCount > this.options.maxLogCount; )
        this.$.log.childNodes[0].remove(), this.linesCount--;
      l25 && (this.$.container.scrollTop = this.$.container.scrollHeight);
    }
  }
  info() {
    this.options.level <= i24.info.level && this.print(
      [].map.call(arguments, this._determineString).join(this.options.argumentsSeparator)
    );
  }
  debug() {
    this.options.level <= i24.debug.level && this.print(
      [].map.call(arguments, this._determineString).join(this.options.argumentsSeparator),
      i24.debug.color,
      i24.debug.name
    );
  }
  warning() {
    this.options.level <= i24.warning.level && this.print(
      [].map.call(arguments, this._determineString).join(this.options.argumentsSeparator),
      i24.warning.color,
      i24.warning.name
    );
  }
  success() {
    this.options.level <= i24.success.level && this.print(
      [].map.call(arguments, this._determineString).join(this.options.argumentsSeparator),
      i24.success.color,
      i24.success.name
    );
  }
  error() {
    this.options.level <= i24.fatal.level && this.print(
      [].map.call(arguments, this._determineString).join(this.options.argumentsSeparator),
      i24.fatal.color,
      i24.fatal.name
    );
  }
  _getTime() {
    return (this.options.utcTime ? (/* @__PURE__ */ new Date()).toUTCString() : (/* @__PURE__ */ new Date()).toString()).match(/([01]?[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]/)[0];
  }
  _determineString(t19) {
    if (t19 === void 0)
      return "undefined";
    if (t19 === null)
      return "null";
    if (t19 instanceof Array)
      return JSON.stringify(t19);
    switch (typeof t19) {
      default:
      case "object":
        return `${t19.constructor ? t19.constructor.name : t19.toString()} -> ${JSON.stringify(t19)}`;
      case "function":
        return t19.name || "[function]";
      case "number":
      case "string":
      case "boolean":
        return t19;
    }
  }
};
var L9 = Object.defineProperty;
var s13 = (a22, t19, e11, o12) => {
  for (var l25 = void 0, h26 = a22.length - 1, c27; h26 >= 0; h26--)
    (c27 = a22[h26]) && (l25 = c27(t19, e11, l25) || l25);
  return l25 && L9(t19, e11, l25), l25;
};
var u25 = class extends x {
  constructor() {
    super(...arguments), this.title = "Robot Logger", this.maxLogCount = 1e3, this.debug = "", this.info = "", this.success = "", this.warning = "", this.error = "", this.level = "info", this.disabled = false, this.levels = ["debug", "info", "success", "warning", "error"];
  }
  firstUpdated() {
    const t19 = this.renderRoot.querySelector(
      "[part=logger]"
    );
    this.logger = new w22(
      {
        name: this.title,
        maxLogCount: Math.max(0, this.maxLogCount),
        level: this.levels.indexOf(this.level),
        enabled: !this.disabled
      },
      t19
    ), this.logger.init();
  }
  updated(t19) {
    this.levels.forEach((e11) => {
      t19.has(e11) && this[e11] && this.logger[e11](this[e11]);
    }), t19.has("maxLogCount") && (this.logger.options.maxLogCount = Math.max(0, this.maxLogCount)), t19.has("level") && this.logger.setLevel(this.levels.indexOf(this.level)), t19.has("disabled") && this.logger.setEnable(!this.disabled);
  }
  render() {
    return Ht` <div part="logger"></div> `;
  }
};
u25.styles = Mt2`
    :host {
      display: inline-block;
      width: 500px;
      height: 400px;
      font-family: monospace;
      font-size: 14px;
    }

    [part='logger'] {
      width: 100%;
      height: 100%;
    }
  `;
var n25 = u25;
s13([
  Rt({ type: String })
], n25.prototype, "title");
s13([
  Rt({ type: Number, attribute: "max-log-count" })
], n25.prototype, "maxLogCount");
s13([
  Rt({ type: String })
], n25.prototype, "debug");
s13([
  Rt({ type: String })
], n25.prototype, "info");
s13([
  Rt({ type: String })
], n25.prototype, "success");
s13([
  Rt({ type: String })
], n25.prototype, "warning");
s13([
  Rt({ type: String })
], n25.prototype, "error");
s13([
  Rt({ type: String })
], n25.prototype, "level");
s13([
  Rt({ type: Boolean })
], n25.prototype, "disabled");
customElements.get("frc-logger") || customElements.define("frc-logger", n25);
var F15 = xt({
  tagName: "frc-logger",
  elementClass: n25,
  react: import_react19.default
});

// node_modules/@frc-web-components/react/dist/components/Mechanism2d.es.js
var import_react20 = __toESM(require_react(), 1);
var import_jsx_runtime4 = __toESM(require_jsx_runtime(), 1);
var j13 = Object.defineProperty;
var c21 = (o12, e11, t19, s18) => {
  for (var r24 = void 0, i27 = o12.length - 1, n33; i27 >= 0; i27--)
    (n33 = o12[i27]) && (r24 = n33(e11, t19, r24) || r24);
  return r24 && j13(e11, t19, r24), r24;
};
function b25(o12) {
  const e11 = (o12 == null ? void 0 : o12.getChildren()) ?? {};
  return Object.values(e11).filter(
    (t19) => {
      var s18;
      return t19.hasChildren() && ((s18 = t19.getChildren()[".type"]) == null ? void 0 : s18.getSourceValue()) === "line";
    }
  ).map((t19) => {
    const s18 = t19.getChildren();
    return {
      angle: s18.angle.getSourceValue() ?? 0,
      color: s18.color.getSourceValue() ?? "#ffffff",
      length: s18.length.getSourceValue() ?? 1,
      weight: s18.weight.getSourceValue() ?? 1,
      children: b25(t19)
    };
  });
}
function M10(o12) {
  const e11 = (o12 == null ? void 0 : o12.getChildren()) ?? {};
  return Object.values(e11).filter(
    (t19) => t19.hasChildren()
  ).map((t19) => ({
    x: t19.getChildren().x.getSourceValue() ?? 0,
    y: t19.getChildren().y.getSourceValue() ?? 0,
    children: b25(t19)
  }));
}
var x26 = class extends x {
  constructor() {
    super(...arguments), this.backgroundColor = "#000020", this.dims = [3, 3], this.roots = [], this.mechanism2d = this.getMechanism2d();
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.resized();
    }).observe(this), requestAnimationFrame(() => {
      this.updateMechanism2d();
    });
  }
  getMech2dSize() {
    const { width: e11, height: t19 } = this.getBoundingClientRect(), [s18, r24] = this.dims;
    return r24 / s18 * e11 < t19 ? [e11, r24 / s18 * e11] : [s18 / r24 * t19, t19];
  }
  resized() {
    this.requestUpdate();
  }
  getSize() {
    const { width: e11 } = this.getBoundingClientRect();
    return e11;
  }
  updated(e11) {
    e11.has("backgroundColor") && this._svg.style.setProperty("background-color", this.backgroundColor), e11.has("dims") && this.requestUpdate();
  }
  updateMechanism2d() {
    this.mechanism2d = this.getMechanism2d(), requestAnimationFrame(() => {
      this.updateMechanism2d();
    });
  }
  getMechanism2d() {
    return {
      backgroundColor: this.backgroundColor,
      dims: this.dims,
      roots: this.roots
    };
  }
  render() {
    const [e11, t19] = this.getMech2dSize();
    return Nt`
      <svg
        style="width: ${e11}px; height: ${t19}px; background: ${this.mechanism2d.backgroundColor}"
      >
        ${this.mechanism2d.roots.map(
      (s18) => this.renderMechanism2dRoot(s18)
    )}
      </svg>
    `;
  }
  renderMechanism2dRoot(e11) {
    const [t19, s18] = this.dims, [r24, i27] = this.getMech2dSize(), n33 = e11.x / t19 * r24, m33 = e11.y / s18 * i27;
    return Nt`
      <g style="transform: translate(${n33}px, ${i27 - m33}px)">
        ${e11.children.map((l25) => this.renderMechanism2dLine(l25))}
      </g>
    `;
  }
  renderMechanism2dLine(e11) {
    const [t19] = this.dims, [s18] = this.getMech2dSize(), r24 = s18 / t19 * e11.length, i27 = e11.angle * Math.PI / 180, n33 = Math.cos(i27) * r24, m33 = -Math.sin(i27) * r24, l25 = Math.max(1, e11.weight * 2 / 3);
    return Nt`
      <line stroke=${e11.color} stroke-width=${l25} x1="0" y1="0" x2="${n33}px" y2="${m33}px"  />
      <g style="transform: translate(${n33}px, ${m33}px) rotate(${-e11.angle}deg)">
        ${e11.children.map((v30) => this.renderMechanism2dLine(v30))}
      </g>
    `;
  }
};
x26.styles = Mt2`
    :host {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 300px;
      height: 300px;
    }

    svg {
      width: 100%;
      height: 100%;
    }
  `;
var a15 = x26;
c21([
  Rt({ type: String, attribute: "background-color" })
], a15.prototype, "backgroundColor");
c21([
  Rt({ type: Array })
], a15.prototype, "dims");
c21([
  Rt({ type: Array })
], a15.prototype, "roots");
c21([
  a("svg")
], a15.prototype, "_svg");
c21([
  n2()
], a15.prototype, "mechanism2d");
customElements.get("frc-mechanism2d") || customElements.define("frc-mechanism2d", a15);
var V13 = Object.defineProperty;
var u26 = (o12, e11, t19, s18) => {
  for (var r24 = void 0, i27 = o12.length - 1, n33; i27 >= 0; i27--)
    (n33 = o12[i27]) && (r24 = n33(e11, t19, r24) || r24);
  return r24 && V13(e11, t19, r24), r24;
};
var C17 = class extends x {
  constructor() {
    super(...arguments), this.backgroundColor = "#000020", this.dims = [3, 3], this.roots = [];
  }
  updateMechanism2d() {
    this.roots = this.source ? M10(this.source) : [], requestAnimationFrame(() => {
      this.updateMechanism2d();
    });
  }
  firstUpdated() {
    this.updateMechanism2d();
  }
  render() {
    return Ht`
      <frc-mechanism2d
        .roots=${this.roots}
        .backgroundColor=${this.backgroundColor}
        .dims=${this.dims}
      ></frc-mechanism2d>
    `;
  }
};
C17.styles = Mt2`
    :host {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 300px;
      height: 300px;
    }

    frc-mechanism2d {
      width: 100%;
      height: 100%;
    }
  `;
var d24 = C17;
u26([
  Rt({ type: String, attribute: "background-color" })
], d24.prototype, "backgroundColor");
u26([
  Rt({ type: Array })
], d24.prototype, "dims");
u26([
  Rt({ type: Object })
], d24.prototype, "source");
u26([
  n2()
], d24.prototype, "roots");
customElements.get("frc-mechanism2d-wrapper") || customElements.define("frc-mechanism2d-wrapper", d24);
var B18 = xt({
  tagName: "frc-mechanism2d",
  elementClass: a15,
  react: import_react20.default
});
function _18(o12) {
  const { store: e11 } = me7(), [t19, s18] = (0, import_react20.useState)([]);
  return (0, import_react20.useEffect)(() => e11.subscribe(
    "NetworkTables",
    o12,
    () => {
      const r24 = e11.getSource("NetworkTables", o12);
      r24 && s18(M10(r24));
    },
    true
  ), []), t19;
}

// node_modules/@frc-web-components/react/dist/components/NetworkAlerts.es.js
var import_react21 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/when-CDK1Tt5Y-835602a5.js
function u27(n33, t19, o12) {
  return n33 ? t19(n33) : o12 == null ? void 0 : o12(n33);
}

// node_modules/@frc-web-components/react/dist/components/NetworkAlerts.es.js
var m25 = Object.defineProperty;
var l18 = (a22, e11, c27, b33) => {
  for (var i27 = void 0, s18 = a22.length - 1, d34; s18 >= 0; s18--)
    (d34 = a22[s18]) && (i27 = d34(e11, c27, i27) || i27);
  return i27 && m25(e11, c27, i27), i27;
};
var T16 = "m40-120 440-760 440 760H40Zm138-80h604L480-720 178-200Zm302-40q17 0 28.5-11.5T520-280q0-17-11.5-28.5T480-320q-17 0-28.5 11.5T440-280q0 17 11.5 28.5T480-240Zm-40-120h80v-200h-80v200Zm40-100Z";
var g23 = "M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z";
var x27 = "M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z";
var h21 = class extends x {
  constructor() {
    super(...arguments), this.errors = [], this.warnings = [], this.infos = [], this.level = "info", this.hideTitle = false;
  }
  render() {
    return Ht`
      <div class="alerts-container">
        ${u27(!this.hideTitle, () => Ht` <header>Alerts</header> `)}
        <div class="alerts-list">
          ${this.errors.map(
      (e11) => Ht`
              <div class="alert">
                <div class="icon">
                  <frc-icon
                    color="red"
                    svg-path=${g23}
                    view-box="0 -960 960 960"
                  ></frc-icon>
                </div>
                <label>${e11}</label>
              </div>
            `
    )}
          ${u27(
      this.level !== "error",
      () => Ht`
              ${this.warnings.map(
        (e11) => Ht`
                  <div class="alert">
                    <div class="icon">
                      <frc-icon
                        color="yellow"
                        svg-path=${T16}
                        view-box="0 -960 960 960"
                      ></frc-icon>
                    </div>
                    <label>${e11}</label>
                  </div>
                `
      )}
            `
    )}
          ${u27(
      this.level === "info",
      () => Ht`
              ${this.infos.map(
        (e11) => Ht`
                  <div class="alert">
                    <div class="icon">
                      <frc-icon
                        color="green"
                        svg-path=${x27}
                        view-box="0 -960 960 960"
                      ></frc-icon>
                    </div>
                    <label>${e11}</label>
                  </div>
                `
      )}
            `
    )}
        </div>
      </div>
    `;
  }
};
h21.styles = Mt2`
    :host {
      font-family: sans-serif;
      display: inline-block;
      width: 300px;
      height: auto;
      box-sizing: border-box;
      color: var(--frc-network-alerts-text-color, black);
    }

    .alerts-container {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    header {
      background: var(--frc-network-alerts-header-color, lightblue);
      padding: 10px 0;
      text-align: center;
      font-weight: bold;
    }

    .alerts-list {
      padding: 8px 5px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 9px;
      flex: 1;
      overflow-y: auto;
    }

    .alert {
      display: flex;
      align-items: center;
      gap: 9px;
    }

    .icon {
      width: 24px;
      height: 24px;
    }

    .alert label {
      flex: 1;
    }

    .icon frc-icon {
      width: 100%;
      height: 100%;
    }
  `;
var r20 = h21;
l18([
  Rt({ type: Array })
], r20.prototype, "errors");
l18([
  Rt({ type: Array })
], r20.prototype, "warnings");
l18([
  Rt({ type: Array })
], r20.prototype, "infos");
l18([
  Rt({ type: String })
], r20.prototype, "level");
l18([
  Rt({ type: Boolean, attribute: "hide-title" })
], r20.prototype, "hideTitle");
customElements.get("frc-network-alerts") || customElements.define("frc-network-alerts", r20);
var k22 = xt({
  tagName: "frc-network-alerts",
  elementClass: r20,
  react: import_react21.default
});

// node_modules/@frc-web-components/react/dist/components/NumberBar.es.js
var import_react22 = __toESM(require_react(), 1);
var b26 = xt({
  tagName: "frc-number-bar",
  elementClass: t2,
  react: import_react22.default
});

// node_modules/@frc-web-components/react/dist/components/NumberSlider.es.js
var import_react23 = __toESM(require_react(), 1);
var h22 = (t19) => {
  throw TypeError(t19);
};
var f30 = (t19, e11, a22) => e11.has(t19) || h22("Cannot " + a22);
var y24 = (t19, e11, a22) => e11.has(t19) ? h22("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(t19) : e11.set(t19, a22);
var k23 = (t19, e11, a22) => (f30(t19, e11, "access private method"), a22);
var w24 = Object.defineProperty;
var i25 = (t19, e11, a22, m33) => {
  for (var r24 = void 0, o12 = t19.length - 1, c27; o12 >= 0; o12--)
    (c27 = t19[o12]) && (r24 = c27(e11, a22, r24) || r24);
  return r24 && w24(e11, a22, r24), r24;
};
var l19;
var d25;
var p22 = class extends x {
  constructor() {
    super(...arguments), y24(this, l19), this.value = 0, this.min = -1, this.max = 1, this.blockIncrement = 0.05;
  }
  onChange(e11) {
    this.value = parseFloat(e11.target.value), k23(this, l19, d25).call(this);
  }
  firstUpdated() {
    setTimeout(() => {
      const e11 = this.renderRoot.querySelector("#slider");
      e11 && (e11.value = this.value);
    });
  }
  render() {
    const e11 = Math.min(this.min, this.max), a22 = Math.max(this.min, this.max), m33 = Math.max(e11, Math.min(this.value, a22));
    return Ht`
      <div class="slider-container">
        <input
          id="slider"
          type="range"
          .value="${m33.toString()}"
          min="${e11}"
          max="${a22}"
          step="${this.blockIncrement}"
          @change="${this.onChange}"
        />

        <frc-axis ticks="5" min=${e11} max=${a22}></frc-axis>
      </div>
    `;
  }
};
l19 = /* @__PURE__ */ new WeakSet(), d25 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: { value: this.value },
      bubbles: true,
      composed: true
    })
  );
}, p22.styles = Mt2`
    :host {
      display: inline-block;
      height: 50px;
      width: 300px;
    }

    .slider-container {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 15px;
    }

    input {
      width: 100%;
    }

    table-axis {
      width: calc(85% - 14px);
      max-width: calc(100% - 74px);
      display: block;
    }
  `;
var n26 = p22;
i25([
  Rt({ type: Number })
], n26.prototype, "value");
i25([
  Rt({ type: Number })
], n26.prototype, "min");
i25([
  Rt({ type: Number })
], n26.prototype, "max");
i25([
  Rt({ type: Number, attribute: "block-increment" })
], n26.prototype, "blockIncrement");
customElements.get("frc-number-slider") || customElements.define("frc-number-slider", n26);
var N15 = xt({
  tagName: "frc-number-slider",
  elementClass: n26,
  react: import_react23.default,
  events: {
    onchange: "change"
  }
});

// node_modules/@frc-web-components/react/dist/components/Pdp.es.js
var import_react24 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/voltage-view.es-704afd49.js
var y25 = Object.getPrototypeOf;
var l20 = Reflect.get;
var f31 = (p26, i27, s18) => l20(y25(p26), s18, i27);
var v24 = Object.defineProperty;
var r22 = (p26, i27, s18, b33) => {
  for (var o12 = void 0, u35 = p26.length - 1, n33; u35 >= 0; u35--)
    (n33 = p26[u35]) && (o12 = n33(i27, s18, o12) || o12);
  return o12 && v24(i27, s18, o12), o12;
};
var a16 = class extends t2 {
  constructor() {
    super(...arguments), this.value = 0, this.min = 0, this.max = 5, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "V";
  }
};
a16.styles = [
  ...f31(a16, a16, "styles"),
  Mt2`
      [part='bar']::part(foreground) {
        background: var(--frc-voltage-view-foreground-color, #ffbd2f);
      }
    `
];
var t16 = a16;
r22([
  Rt({ type: Number })
], t16.prototype, "value");
r22([
  Rt({ type: Number })
], t16.prototype, "min");
r22([
  Rt({ type: Number })
], t16.prototype, "max");
r22([
  Rt({ type: Number })
], t16.prototype, "center");
r22([
  Rt({ type: Number })
], t16.prototype, "precision");
r22([
  Rt({ type: Boolean, attribute: "hide-text" })
], t16.prototype, "hideText");
r22([
  Rt({ type: Number, attribute: "num-tick-marks" })
], t16.prototype, "numTickMarks");
r22([
  Rt({ type: String })
], t16.prototype, "unit");
customElements.get("frc-voltage-view") || customElements.define("frc-voltage-view", t16);

// node_modules/@frc-web-components/react/dist/components/Pdp.es.js
var f32 = Object.defineProperty;
var s14 = (r24, t19, l25, o12) => {
  for (var e11 = void 0, p26 = r24.length - 1, u35; p26 >= 0; p26--)
    (u35 = r24[p26]) && (e11 = u35(t19, l25, e11) || e11);
  return e11 && f32(t19, l25, e11), e11;
};
function i26(r24, t19) {
  const l25 = [];
  for (let o12 = r24; o12 < t19; o12 += 1)
    l25.push(o12);
  return l25;
}
var m26 = class extends x {
  constructor() {
    super(...arguments), this.voltage = 0, this.totalCurrent = 0, this.channels = Array(16).fill(0);
  }
  renderChannel(t19) {
    return Ht`
      <frc-number-bar
        class="channel"
        part="channel"
        value=${this.channels[t19] ?? 0}
        min="0"
        max="40"
        center="0"
        precision="2"
        ?hide-text="${false}"
        num-tick-marks="0"
        unit="A"
      ></frc-number-bar>
    `;
  }
  render() {
    return Ht`
      <div part="channels">
        ${i26(0, 8).map(
      (t19) => Ht`
            <label part="channel-label">
              <slot name="${`channel-label${t19}`}">Ch. ${t19}</slot>
            </label>
          `
    )}
        ${i26(0, 8).map((t19) => Ht` ${this.renderChannel(t19)} `)}
        ${i26(8, 16).map(
      (t19) => Ht`
            <label part="channel-label">
              <slot name="${`channel-label${t19}`}">Ch. ${t19}</slot>
            </label>
          `
    )}
        ${i26(8, 16).map(
      (t19) => Ht` ${this.renderChannel(t19)} `
    )}
      </div>
      <div part="voltage-and-total-current">
        <label part="voltage-label">
          <slot name="voltage-label">Voltage</slot>
        </label>
        <label part="total-current-label">
          <slot name="total-current">Total Current</slot>
        </label>
        <frc-voltage-view
          class="voltage"
          part="voltage"
          value="${this.voltage}"
          min="0"
          max="15"
          center="0"
          precision="2"
          ?hide-text="${false}"
          num-tick-marks="0"
        ></frc-voltage-view>
        <frc-number-bar
          class="total-current"
          part="total-current"
          value="${this.totalCurrent}"
          min="0"
          max="500"
          center="0"
          precision="2"
          ?hide-text="${false}"
          num-tick-marks="0"
          unit="A"
        ></frc-number-bar>
      </div>
    `;
  }
};
m26.styles = Mt2`
    :host {
      display: inline-block;
      width: 350px;
      margin: 5px;
      color: var(--frc-label-text-color, black);
      font-family: sans-serif;
      font-size: 16px;
    }

    [part='channels'] {
      display: grid;
      grid-auto-flow: column;
      grid-template-columns: min-content 1fr min-content 1fr;
      grid-template-rows: auto auto auto auto auto auto auto auto;
      width: 100%;
      height: auto;
      align-items: center;
      gap: 3px;
    }

    .channel,
    .voltage,
    .total-current {
      width: auto;
    }

    [part='channel-label'] {
      padding-left: 5px;
      text-align: right;
      white-space: nowrap;
    }

    [part='voltage-and-total-current'] {
      margin-top: 5px;
      display: grid;
      grid-auto-flow: column;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto;
      column-gap: 10px;
      width: 100%;
      height: auto;
      align-items: center;
      gap: 3px;
    }

    [part='voltage-and-total-current'] {
      white-space: nowrap;
    }
  `;
var n27 = m26;
s14([
  Rt({ type: Number })
], n27.prototype, "voltage");
s14([
  Rt({ type: Number, attribute: "total-current" })
], n27.prototype, "totalCurrent");
s14([
  Rt({ type: Array })
], n27.prototype, "channels");
customElements.get("frc-pdp") || customElements.define("frc-pdp", n27);
var E21 = xt({
  tagName: "frc-pdp",
  elementClass: n27,
  react: import_react24.default
});

// node_modules/@frc-web-components/react/dist/components/Pid.es.js
var import_react25 = __toESM(require_react(), 1);
var N16 = (e11) => {
  throw TypeError(e11);
};
var I14 = (e11, t19, i27) => t19.has(e11) || N16("Cannot " + i27);
var P16 = (e11, t19, i27) => t19.has(e11) ? N16("Cannot add the same private member more than once") : t19 instanceof WeakSet ? t19.add(e11) : t19.set(e11, i27);
var o9 = (e11, t19, i27) => (I14(e11, t19, "access private method"), i27);
var j14 = Object.defineProperty;
var f33 = (e11, t19, i27, E24) => {
  for (var n33 = void 0, a22 = e11.length - 1, l25; a22 >= 0; a22--)
    (l25 = e11[a22]) && (n33 = l25(t19, i27, n33) || n33);
  return n33 && j14(t19, i27, n33), n33;
};
var s15;
var h24;
var F16 = class extends x {
  constructor() {
    super(...arguments), P16(this, s15), this.p = 0, this.i = 0, this.d = 0, this.setpoint = 0, this.running = false;
  }
  onPChange(t19) {
    this.p = parseFloat(t19.target.value), o9(this, s15, h24).call(this);
  }
  onIChange(t19) {
    this.i = parseFloat(t19.target.value), o9(this, s15, h24).call(this);
  }
  onDChange(t19) {
    this.d = parseFloat(t19.target.value), o9(this, s15, h24).call(this);
  }
  onSetpointChange(t19) {
    this.setpoint = parseFloat(t19.target.value), o9(this, s15, h24).call(this);
  }
  onRunningClick() {
    this.running = !this.running, o9(this, s15, h24).call(this);
  }
  render() {
    return Ht`
      <input
        type="checkbox"
        id="running"
        .checked=${this.running}
        @click=${this.onRunningClick}
      />
      <label for="running">Running</label>
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Setpoint</label>
      <input
        type="number"
        .value=${this.setpoint}
        @change=${this.onSetpointChange}
      />
    `;
  }
};
s15 = /* @__PURE__ */ new WeakSet(), h24 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        p: this.p,
        i: this.i,
        d: this.d,
        setpoint: this.setpoint,
        running: this.running
      }
    })
  );
}, F16.styles = Mt2`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      width: 150px;
      height: auto;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input[type='number'] {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }

    input[type='checkbox'] {
      justify-self: right;
      margin: 0;
      width: 16px;
      height: 16px;
    }

    label[for='running'] {
      justify-self: left;
    }
  `;
var p23 = F16;
f33([
  Rt({ type: Number })
], p23.prototype, "p");
f33([
  Rt({ type: Number })
], p23.prototype, "i");
f33([
  Rt({ type: Number })
], p23.prototype, "d");
f33([
  Rt({ type: Number })
], p23.prototype, "setpoint");
f33([
  Rt({ type: Boolean, reflect: true })
], p23.prototype, "running");
customElements.get("frc-pid-command") || customElements.define("frc-pid-command", p23);
var O16 = Object.defineProperty;
var v25 = (e11, t19, i27, E24) => {
  for (var n33 = void 0, a22 = e11.length - 1, l25; a22 >= 0; a22--)
    (l25 = e11[a22]) && (n33 = l25(t19, i27, n33) || n33);
  return n33 && O16(t19, i27, n33), n33;
};
var c22;
var b27;
var D15 = class extends x {
  constructor() {
    super(...arguments), P16(this, c22), this.p = 0, this.i = 0, this.d = 0, this.setpoint = 0;
  }
  onPChange(t19) {
    this.p = parseFloat(t19.target.value), o9(this, c22, b27).call(this);
  }
  onIChange(t19) {
    this.i = parseFloat(t19.target.value), o9(this, c22, b27).call(this);
  }
  onDChange(t19) {
    this.d = parseFloat(t19.target.value), o9(this, c22, b27).call(this);
  }
  onSetpointChange(t19) {
    this.setpoint = parseFloat(t19.target.value), o9(this, c22, b27).call(this);
  }
  render() {
    return Ht`
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Setpoint</label>
      <input
        type="number"
        .value=${this.setpoint}
        @change=${this.onSetpointChange}
      />
    `;
  }
};
c22 = /* @__PURE__ */ new WeakSet(), b27 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        p: this.p,
        i: this.i,
        d: this.d,
        setpoint: this.setpoint
      }
    })
  );
}, D15.styles = Mt2`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      height: auto;
      width: 150px;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }
  `;
var g24 = D15;
v25([
  Rt({ type: Number })
], g24.prototype, "p");
v25([
  Rt({ type: Number })
], g24.prototype, "i");
v25([
  Rt({ type: Number })
], g24.prototype, "d");
v25([
  Rt({ type: Number })
], g24.prototype, "setpoint");
customElements.get("frc-pid-controller") || customElements.define("frc-pid-controller", g24);
var R16 = Object.defineProperty;
var y26 = (e11, t19, i27, E24) => {
  for (var n33 = void 0, a22 = e11.length - 1, l25; a22 >= 0; a22--)
    (l25 = e11[a22]) && (n33 = l25(t19, i27, n33) || n33);
  return n33 && R16(t19, i27, n33), n33;
};
var u29;
var m27;
var S17 = class extends x {
  constructor() {
    super(...arguments), P16(this, u29), this.p = 0, this.i = 0, this.d = 0, this.goal = 0;
  }
  onPChange(t19) {
    this.p = parseFloat(t19.target.value), o9(this, u29, m27).call(this);
  }
  onIChange(t19) {
    this.i = parseFloat(t19.target.value), o9(this, u29, m27).call(this);
  }
  onDChange(t19) {
    this.d = parseFloat(t19.target.value), o9(this, u29, m27).call(this);
  }
  onGoalChange(t19) {
    this.goal = parseFloat(t19.target.value), o9(this, u29, m27).call(this);
  }
  render() {
    return Ht`
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Goal</label>
      <input type="number" .value=${this.goal} @change=${this.onGoalChange} />
    `;
  }
};
u29 = /* @__PURE__ */ new WeakSet(), m27 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        p: this.p,
        i: this.i,
        d: this.d,
        goal: this.goal
      }
    })
  );
}, S17.styles = Mt2`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      height: auto;
      width: 150px;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }
  `;
var d26 = S17;
y26([
  Rt({ type: Number })
], d26.prototype, "p");
y26([
  Rt({ type: Number })
], d26.prototype, "i");
y26([
  Rt({ type: Number })
], d26.prototype, "d");
y26([
  Rt({ type: Number })
], d26.prototype, "goal");
customElements.get("frc-profiled-pid-controller") || customElements.define("frc-profiled-pid-controller", d26);
var B19 = xt({
  tagName: "frc-pid-command",
  elementClass: p23,
  react: import_react25.default,
  events: {
    onchange: "change"
  }
});
var H14 = xt({
  tagName: "frc-pid-controller",
  elementClass: g24,
  react: import_react25.default,
  events: {
    onchange: "change"
  }
});
var T17 = xt({
  tagName: "frc-profiled-pid-controller",
  elementClass: d26,
  react: import_react25.default,
  events: {
    onchange: "change"
  }
});

// node_modules/@frc-web-components/react/dist/components/Relay.es.js
var import_react26 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/toggle-group.es-ea37bfc7.js
var u30 = (e11) => {
  throw TypeError(e11);
};
var m28 = (e11, t19, o12) => t19.has(e11) || u30("Cannot " + o12);
var y27 = (e11, t19, o12) => t19.has(e11) ? u30("Cannot add the same private member more than once") : t19 instanceof WeakSet ? t19.add(e11) : t19.set(e11, o12);
var p24 = (e11, t19, o12) => (m28(e11, t19, "access private method"), o12);
var x29 = Object.defineProperty;
var l21 = (e11, t19, o12, w29) => {
  for (var i27 = void 0, s18 = e11.length - 1, c27; s18 >= 0; s18--)
    (c27 = e11[s18]) && (i27 = c27(t19, o12, i27) || i27);
  return i27 && x29(t19, o12, i27), i27;
};
var n28;
var d27;
var g25;
var f34 = class extends x {
  constructor() {
    super(...arguments), y27(this, n28), this.options = ["On", "Off"], this.value = "", this.direction = "vertical";
  }
  async setValue(t19) {
    this.value = t19;
  }
  updated(t19) {
    t19.has("options") && !this.options.includes(this.value) && (this.value = this.options[0] ?? ""), t19.has("value") && p24(this, n28, d27).call(this), t19.has("options") && p24(this, n28, g25).call(this), t19.has("direction") && this.style.setProperty(
      "flex-direction",
      this.direction === "vertical" ? "column" : "row"
    );
  }
  render() {
    return Ht`
      ${this.options.map(
      (t19) => Ht`
          <button
            class="${this.value === t19 ? "toggled" : ""}"
            @click="${() => this.setValue(t19)}"
          >
            ${t19}
          </button>
        `
    )}
    `;
  }
};
n28 = /* @__PURE__ */ new WeakSet(), d27 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: { value: this.value },
      bubbles: true,
      composed: true
    })
  );
}, g25 = function() {
  this.dispatchEvent(
    new CustomEvent("optionsUpdate", {
      detail: { options: this.options },
      bubbles: true,
      composed: true
    })
  );
}, f34.styles = Mt2`
    :host {
      display: inline-flex;
      flex-direction: column;
      width: 150px;
      height: 300px;
      gap: 0;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    button {
      width: 100%;
      height: 100%;
      margin: 0;
      border: none;
      font-size: inherit;
      font-family: inherit;
      letter-spacing: inherit;
      background: var(--frc-button-background-color, rgb(230, 230, 230));
      color: var(--frc-button-text-color, black);
      flex: 1;
    }

    .toggled {
      background: var(--frc-button-toggled-background-color, black);
      color: var(--frc-button-toggled-text-color, white);
      font-weight: bold;
    }

    [part='button'] {
      border-radius: 0;
      margin: 0;
      flex: 1;
      font-size: inherit;
      height: 100%;
      padding: 0;
    }
  `;
var r23 = f34;
l21([
  Rt({ type: Array })
], r23.prototype, "options");
l21([
  Rt({ type: String })
], r23.prototype, "value");
l21([
  Rt({ type: String })
], r23.prototype, "direction");
customElements.get("frc-toggle-group") || customElements.define("frc-toggle-group", r23);

// node_modules/@frc-web-components/react/dist/components/Relay.es.js
var l22 = (e11) => {
  throw TypeError(e11);
};
var y28 = (e11, t19, r24) => t19.has(e11) || l22("Cannot " + r24);
var O17 = (e11, t19, r24) => t19.has(e11) ? l22("Cannot add the same private member more than once") : t19 instanceof WeakSet ? t19.add(e11) : t19.set(e11, r24);
var w25 = (e11, t19, r24) => (y28(e11, t19, "access private method"), r24);
var x30 = Object.defineProperty;
var h25 = (e11, t19, r24, S21) => {
  for (var a22 = void 0, n33 = e11.length - 1, c27; n33 >= 0; n33--)
    (c27 = e11[n33]) && (a22 = c27(t19, r24, a22) || a22);
  return a22 && x30(t19, r24, a22), a22;
};
var $21 = ["Off", "On", "Forward", "Reverse"];
var s16;
var p25;
var g26 = class extends x {
  constructor() {
    super(...arguments), O17(this, s16), this.value = "Off", this.direction = "vertical";
  }
  render() {
    return Ht`
      <frc-toggle-group
        @change=${w25(this, s16, p25)}
        .options=${$21}
        value=${this.value}
        direction=${this.direction}
      ></frc-toggle-group>
    `;
  }
};
s16 = /* @__PURE__ */ new WeakSet(), p25 = function(e11) {
  this.value = e11.detail.value;
}, g26.styles = Mt2`
    :host {
      display: inline-block;
      width: 150px;
      height: 300px;
    }

    frc-toggle-group {
      width: 100%;
      height: 100%;
    }
  `;
var o10 = g26;
h25([
  Rt({ type: String })
], o10.prototype, "value");
h25([
  Rt({ type: String })
], o10.prototype, "direction");
customElements.get("frc-relay") || customElements.define("frc-relay", o10);
var R17 = xt({
  tagName: "frc-relay",
  elementClass: o10,
  react: import_react26.default,
  events: {
    onchange: "change"
  }
});

// node_modules/@frc-web-components/react/dist/components/ScoringGrid.es.js
var import_react27 = __toESM(require_react(), 1);
var S18 = (t19) => {
  throw TypeError(t19);
};
var B20 = (t19, e11, o12) => e11.has(t19) || S18("Cannot " + o12);
var C18 = (t19, e11, o12) => e11.has(t19) ? S18("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(t19) : e11.set(t19, o12);
var f35 = (t19, e11, o12) => (B20(t19, e11, "access private method"), o12);
var M11 = Object.defineProperty;
var g27 = (t19, e11, o12, i27) => {
  for (var r24 = void 0, c27 = t19.length - 1, h26; c27 >= 0; c27--)
    (h26 = t19[c27]) && (r24 = h26(e11, o12, r24) || r24);
  return r24 && M11(e11, o12, r24), r24;
};
var m29;
var I15;
var L10 = class extends x {
  constructor() {
    super(...arguments), C18(this, m29), this.nodeId = 1, this.selected = false, this.cones = 0, this.cubes = 0, this.background = "";
  }
  updated(e11) {
    (e11.has("selected") || e11.has("nodeId")) && f35(this, m29, I15).call(this);
  }
  render() {
    return Ht`
      <div style="text-align: center; margin-block:auto;">${this.nodeId}</div>

      <!-- empty on:click binding above passes click events to be bound on the Node component -->
      ${Nt`
        <svg
          viewBox="-2 -2 28 28"
          style="margin-right: 8px; width:100%; height:100%; pointer-events:none"
        >
          ${u27(
      this.cubes > 1,
      () => Nt`
              <polygon
                points="8,8 8,20 20,20, 20,8"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
              <polygon
                points="4,4 4,16 16,16, 16,4"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}
          ${u27(
      this.cubes === 1,
      () => Nt`
              <polygon
                points="6,6 6,18 18,18, 18,6"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}
          ${u27(
      this.cones > 1,
      () => Nt`
              <polygon
                points="13,8 11,8 8,22 5,22 19,22 16,22"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
              <polygon
                points="13,4 11,4 8,18 5,18 19,18 16,18"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}
          
          ${u27(
      this.cones === 1,
      () => Nt`
              <polygon
                points="13,6 11,6 8,20 5,20 19,20 16,20"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}  
        </svg>
      `}
    `;
  }
};
m29 = /* @__PURE__ */ new WeakSet(), I15 = function() {
  this.selected ? this.background = "green" : this.nodeId >= 1 && this.nodeId <= 9 ? this.background = "lightgray" : (this.nodeId - 1) % 3 === 1 ? this.background = "purple" : this.background = "yellow", this.style.setProperty("background-color", this.background);
}, L10.styles = Mt2`
    :host {
      display: block;
      color: black;
      font-size: 2em;
      height: 100%;
      flex-grow: 1;
      border: 1px solid black;
      box-sizing: border-box;
    }
  `;
var a17 = L10;
g27([
  Rt({ type: Number, attribute: "node-id" })
], a17.prototype, "nodeId");
g27([
  Rt({ type: Boolean })
], a17.prototype, "selected");
g27([
  Rt({ type: Number })
], a17.prototype, "cones");
g27([
  Rt({ type: Number })
], a17.prototype, "cubes");
g27([
  n2()
], a17.prototype, "background");
customElements.get("frc-scoring-grid-node") || customElements.define("frc-scoring-grid-node", a17);
var z17 = Object.defineProperty;
var d29 = (t19, e11, o12, i27) => {
  for (var r24 = void 0, c27 = t19.length - 1, h26; c27 >= 0; c27--)
    (h26 = t19[c27]) && (r24 = h26(e11, o12, r24) || r24);
  return r24 && z17(e11, o12, r24), r24;
};
function y29(t19, e11 = false) {
  return e11 ? 9 - (t19 - 1) % 9 : 1 + (t19 - 1) % 9;
}
function v26(t19, e11 = false) {
  return e11 ? 3 - Math.floor((t19 - 1) / 9) : Math.floor((t19 - 1) / 9) + 1;
}
function P17(t19, e11) {
  return Array.from(Array(e11 + 1).keys()).slice(t19);
}
var b28;
var O18;
var E22;
var R18 = class extends x {
  constructor() {
    super(...arguments), C18(this, b28), this.selection = 0, this.cubesScored = [], this.conesScored = [], this.hideLinks = false, this.reverseRow = false, this.reverseCol = false, this.leftOfLinks = [];
  }
  updated(e11) {
    (e11.has("cubesScored") || e11.has("conesScored")) && f35(this, b28, E22).call(this);
  }
  renderLinks() {
    return this.hideLinks ? Ht`` : Ht`
      ${this.leftOfLinks.map(
      (e11) => Ht`
          <div
            class="link"
            style=${h20({
        gridColumn: `${Math.min(
          y29(e11, this.reverseCol),
          y29(e11 + 2, this.reverseCol)
        )} / span 3`,
        gridRow: v26(e11, this.reverseRow)
      })}
          ></div>
        `
    )}
    `;
  }
  render() {
    return Ht`
      <div class="grid">
        ${P17(1, 27).map(
      (e11) => Ht`
            <div
              style=${h20({
        gridColumn: y29(e11, this.reverseCol),
        gridRow: v26(e11, this.reverseRow)
      })}
            >
              <frc-scoring-grid-node
                node-id=${e11}
                ?selected=${this.selection === e11}
                @click=${() => {
        f35(this, b28, O18).call(this, e11);
      }}
                cubes=${this.cubesScored.filter((o12) => o12 === e11).length}
                cones=${this.conesScored.filter((o12) => o12 === e11).length}
              >
              </frc-scoring-grid-node>
            </div>
          `
    )}
        ${this.renderLinks()}
      </div>
    `;
  }
};
b28 = /* @__PURE__ */ new WeakSet(), O18 = function(t19) {
  this.selection === t19 ? this.selection = 0 : this.selection = t19;
  const e11 = new CustomEvent("select", {
    bubbles: true,
    composed: true,
    detail: { nodeId: this.selection }
  });
  this.dispatchEvent(e11);
}, E22 = function() {
  const t19 = [], e11 = this.cubesScored.concat(this.conesScored);
  for (let o12 = 0; o12 < 3; o12 += 1)
    for (let i27 = 1; i27 <= 7; i27 += 1)
      e11.includes(o12 * 9 + i27) && e11.includes(o12 * 9 + i27 + 1) && e11.includes(o12 * 9 + i27 + 2) && (t19.push(o12 * 9 + i27), i27 += 2);
  this.leftOfLinks = t19;
}, R18.styles = Mt2`
    :host {
      display: inline-block;
      width: 550px;
      height: 380px;
    }

    .grid {
      display:grid;
      grid-template-columns: repeat(9, calc(100% / 9));
      grid-template-rows: repeat(3, calc(100% / 3));
      height:100%;
      width:100%;
      flex-direction:row-reverse;
      grid-auto-flow: dense;"
    }

    .link {
      border: 5px solid black;
      border-radius: 10px;
      margin: 5px;
      box-sizing: border-box;
      pointer-events: none;
    }
  `;
var n29 = R18;
d29([
  Rt({ type: Number })
], n29.prototype, "selection");
d29([
  Rt({ type: Array, attribute: "cubes-scored" })
], n29.prototype, "cubesScored");
d29([
  Rt({ type: Array, attribute: "cones-scored" })
], n29.prototype, "conesScored");
d29([
  Rt({ type: Boolean, attribute: "hide-links" })
], n29.prototype, "hideLinks");
d29([
  Rt({ type: Boolean, attribute: "reverse-row" })
], n29.prototype, "reverseRow");
d29([
  Rt({ type: Boolean, attribute: "reverse-col" })
], n29.prototype, "reverseCol");
d29([
  n2()
], n29.prototype, "leftOfLinks");
customElements.get("frc-scoring-grid") || customElements.define("frc-scoring-grid", n29);
var D16 = xt({
  tagName: "frc-scoring-grid",
  elementClass: n29,
  react: import_react27.default,
  events: {
    onselect: "select"
  }
});

// node_modules/@frc-web-components/react/dist/components/SendableChooser.es.js
var import_react28 = __toESM(require_react(), 1);
var v27 = (t19) => {
  throw TypeError(t19);
};
var A16 = (t19, e11, o12) => e11.has(t19) || v27("Cannot " + o12);
var x31 = (t19, e11, o12) => e11.has(t19) ? v27("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(t19) : e11.set(t19, o12);
var f36 = (t19, e11, o12) => (A16(t19, e11, "access private method"), o12);
var j15 = Object.defineProperty;
var d30 = (t19, e11, o12, h26) => {
  for (var s18 = void 0, i27 = t19.length - 1, l25; i27 >= 0; i27--)
    (l25 = t19[i27]) && (s18 = l25(e11, o12, s18) || s18);
  return s18 && j15(e11, o12, s18), s18;
};
var b29;
var $22;
var S19 = class extends x {
  constructor() {
    super(...arguments), x31(this, b29), this.options = [], this.selected = "", this.default = "", this.active = "", this.label = "Auto Choices";
  }
  onChange() {
    this.selected = this.selectElement.value, f36(this, b29, $22).call(this);
  }
  render() {
    return Ht`
      <div class="container">
        ${this.label ? Ht` <p>${this.label}</p> ` : ""}
        <div class="input-container">
          <label>
            <select @change=${this.onChange} .value=${this.selected}>
              ${this.options.map(
      (e11) => Ht`
                  <option value=${e11} ?selected=${this.selected === e11}>
                    ${e11}
                  </option>
                `
    )}
            </select>
          </label>
          ${this.options.length > 0 ? Ht`
                ${this.selected === this.active ? Ht`<frc-icon icon="check" color="green"></frc-icon>` : Ht`<frc-icon icon="close" color="red"></frc-icon>`}
              ` : ""}
        </div>
      </div>
    `;
  }
};
b29 = /* @__PURE__ */ new WeakSet(), $22 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: { selected: this.selected },
      bubbles: true,
      composed: true
    })
  );
}, S19.styles = Mt2`
    :host {
      display: inline-block;
      min-width: 220px;
      font-family: sans-serif;
    }

    .input-container {
      display: flex;
      align-items: flex-end;
      gap: 7px;
      width: 100%;
    }

    frc-icon {
      width: 20px;
      height: 20px;
      margin-bottom: 12px;
    }

    label {
      position: relative;
      display: inline-block;
      width: 100%;
    }

    label:after {
      content: ' ';
      position: absolute;
      right: 15px;
      top: 46%;
      margin-top: -3px;
      z-index: 2;
      pointer-events: none;
      width: 0;
      height: 0;
      border-style: solid;
      border-width: 6.9px 4px 0 4px;
      border-color: #aaa transparent transparent transparent;
      pointer-events: none;
    }

    select {
      width: 100%;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      outline: 0 none;

      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      padding: 0 30px 0 10px;

      border: 1px solid #e0e0e0;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      background: #fff;
      margin: 0 5px 5px 0;
    }

    p {
      color: var(--frc-sendable-chooser-label-color, black);
      margin: 0;
      font-size: 13px;
      padding-left: 3px;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
  `;
var c23 = S19;
d30([
  Rt({ type: Array })
], c23.prototype, "options");
d30([
  Rt({ type: String, reflect: true })
], c23.prototype, "selected");
d30([
  Rt({ type: String })
], c23.prototype, "default");
d30([
  Rt({ type: String })
], c23.prototype, "active");
d30([
  Rt({ type: String, reflect: true })
], c23.prototype, "label");
d30([
  a("select", true)
], c23.prototype, "selectElement");
customElements.get("frc-sendable-chooser") || customElements.define("frc-sendable-chooser", c23);
var K11 = Object.defineProperty;
var a18 = (t19, e11, o12, h26) => {
  for (var s18 = void 0, i27 = t19.length - 1, l25; i27 >= 0; i27--)
    (l25 = t19[i27]) && (s18 = l25(e11, o12, s18) || s18);
  return s18 && K11(e11, o12, s18), s18;
};
var u31;
var y30;
var w26;
var k24 = class extends x {
  constructor() {
    super(...arguments), x31(this, u31), this.options = [], this.selected = "", this.default = "", this.active = "", this.label = "Auto Choices", this.sourceProvider = "", this.sourceKey = "";
  }
  updated(e11) {
    e11.has("default") && (this.options.includes(this.selected) || f36(this, u31, y30).call(this));
  }
  render() {
    return Ht`
      <frc-sendable-chooser
        @change=${f36(this, u31, w26)}
        .options=${this.options}
        .selected=${this.selected}
        .default=${this.default}
        .active=${this.active}
        .label=${this.label}
      ></frc-sendable-chooser>
    `;
  }
};
u31 = /* @__PURE__ */ new WeakSet(), y30 = function() {
  const {
    provider: t19,
    store: e11,
    sourceProvider: o12,
    sourceKey: h26,
    default: s18
  } = this;
  if (!t19 || !e11 || !o12 || !h26)
    return;
  const i27 = e11.getSource(o12, h26), l25 = e11.getSource(
    o12,
    `${h26}/selected`
  );
  if (i27 != null && i27.hasChildren() && !(l25 != null && l25.hasValue())) {
    const C19 = this.options.includes(this.selected) ? this.selected : s18;
    t19.userUpdate(`${h26}/selected`, C19);
  }
}, w26 = function(t19) {
  this.selected = t19.detail.selected, f36(this, u31, y30).call(this);
}, k24.styles = Mt2`
    :host {
      display: inline-block;
      min-width: 220px;
      font-family: sans-serif;
    }

    frc-sendable-chooser {
      width: 100%;
      height: 100%;
    }
  `;
var n30 = k24;
a18([
  Rt({ type: Array })
], n30.prototype, "options");
a18([
  Rt({ type: String, reflect: true })
], n30.prototype, "selected");
a18([
  Rt({ type: String })
], n30.prototype, "default");
a18([
  Rt({ type: String })
], n30.prototype, "active");
a18([
  Rt({ type: String, reflect: true })
], n30.prototype, "label");
a18([
  Rt({ type: Object, attribute: false })
], n30.prototype, "provider");
a18([
  Rt({ type: Object, attribute: false })
], n30.prototype, "store");
a18([
  Rt({ type: String, attribute: "source-provider" })
], n30.prototype, "sourceProvider");
a18([
  Rt({ type: String, attribute: "source-key" })
], n30.prototype, "sourceKey");
customElements.get("frc-sendable-chooser-wrapper") || customElements.define("frc-sendable-chooser-wrapper", n30);
var N18 = xt({
  tagName: "frc-sendable-chooser",
  elementClass: c23,
  react: import_react28.default,
  events: {
    onchange: "change"
  }
});

// node_modules/@frc-web-components/react/dist/components/ToggleButton.es.js
var import_react29 = __toESM(require_react(), 1);
var a19 = xt({
  tagName: "frc-toggle-button",
  elementClass: e7,
  react: import_react29.default,
  events: {
    ontoggle: "toggle"
  }
});

// node_modules/@frc-web-components/react/dist/components/ToggleGroup.es.js
var import_react30 = __toESM(require_react(), 1);
var m30 = xt({
  tagName: "frc-toggle-group",
  elementClass: r23,
  react: import_react30.default,
  events: {
    onchange: "change"
  }
});

// node_modules/@frc-web-components/react/dist/components/ToggleSwitch.es.js
var import_react31 = __toESM(require_react(), 1);
var w27 = Object.defineProperty;
var u32 = (o12, e11, i27, s18) => {
  for (var t19 = void 0, r24 = o12.length - 1, l25; r24 >= 0; r24--)
    (l25 = o12[r24]) && (t19 = l25(e11, i27, t19) || t19);
  return t19 && w27(e11, i27, t19), t19;
};
var n31 = class extends x {
  constructor() {
    super(...arguments), this.toggled = false;
  }
  firstUpdated() {
    new ResizeObserver(() => this.resized()).observe(this);
  }
  resized() {
    const e11 = this.getBoundingClientRect(), { width: i27, height: s18 } = e11, t19 = this.renderRoot.querySelector("[part=switch]");
    t19 && (t19.style.borderRadius = `${i27}px`, t19.style.setProperty("--circle-width", `${s18 * 0.8}px`), t19.style.setProperty("--circle-height", `${s18 * 0.8}px`), t19.style.setProperty(
      "--circle-left",
      `${i27 / 2 - s18 * 0.8}px`
    ), t19.style.setProperty("--circle-top", `${s18 * 0.1}px`), t19.style.setProperty("--circle-translate-x", `${i27 - s18}px`));
  }
  onClick() {
    this.toggled = !this.toggled;
    const e11 = new CustomEvent("toggle", {
      detail: {
        toggled: this.toggled
      },
      bubbles: true,
      composed: true
    });
    this.dispatchEvent(e11);
  }
  render() {
    return Ht`
      <label class="switch" @click="${this.onClick}">
        <input type="checkbox" .checked="${this.toggled}" disabled />
        <span part="switch">
          <span part="knob"></span>
        </span>
      </label>
    `;
  }
};
n31.styles = Mt2`
    :host {
      display: inline-block;
      width: 60px;
      height: 34px;
    }
    .switch {
      position: relative;
      display: inline-block;
      width: 100%;
      height: 100%;
      margin-bottom: 0;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    [part='switch'] {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--frc-toggle-switch-color, #ccc);
      -webkit-transition: 0.4s;
      transition: 0.4s;
    }
    [part='knob'] {
      position: absolute;
      display: inline-block;
      content: '';
      height: var(--circle-height);
      width: var(--circle-width);
      left: var(--circle-top);
      top: var(--circle-top);
      background-color: white;
      -webkit-transition: 0.4s;
      transition: 0.4s;
      border-radius: 50%;
    }
    input:checked + [part='switch'] {
      background-color: #2196f3;
    }
    input:focus + [part='switch'] {
      box-shadow: 0 0 1px #2196f3;
    }
    input:checked + [part='switch'] [part='knob'] {
      transform: translateX(var(--circle-translate-x));
    }
  `;
var c24 = n31;
u32([
  Rt({ type: Boolean })
], c24.prototype, "toggled");
customElements.get("frc-toggle-switch") || customElements.define("frc-toggle-switch", c24);
var m31 = xt({
  tagName: "frc-toggle-switch",
  elementClass: c24,
  react: import_react31.default,
  events: {
    ontoggle: "toggle"
  }
});

// node_modules/@frc-web-components/react/dist/components/VoltageView.es.js
var import_react32 = __toESM(require_react(), 1);
var g28 = xt({
  tagName: "frc-voltage-view",
  elementClass: t16,
  react: import_react32.default
});

// node_modules/@frc-web-components/react/dist/components/Preferences.es.js
var import_react33 = __toESM(require_react(), 1);
var z18 = (t19) => {
  throw TypeError(t19);
};
var $23 = (t19, e11, r24) => e11.has(t19) || z18("Cannot " + r24);
var m32 = (t19, e11, r24) => ($23(t19, e11, "read from private field"), r24 ? r24.call(t19) : e11.get(t19));
var y31 = (t19, e11, r24) => e11.has(t19) ? z18("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(t19) : e11.set(t19, r24);
var k25 = (t19, e11, r24, o12) => ($23(t19, e11, "write to private field"), o12 ? o12.call(t19, r24) : e11.set(t19, r24), r24);
var n32 = (t19, e11, r24) => ($23(t19, e11, "access private method"), r24);
var q12 = Object.defineProperty;
var x32 = (t19, e11, r24, o12) => {
  for (var i27 = void 0, s18 = t19.length - 1, a22; s18 >= 0; s18--)
    (a22 = t19[s18]) && (i27 = a22(e11, r24, i27) || i27);
  return i27 && q12(e11, r24, i27), i27;
};
var c25;
var j16;
var S20;
var d31;
var w28;
var O19 = class extends x {
  constructor() {
    super(...arguments), y31(this, c25), this.sourceRoot = "", this.preferences = {}, this.search = "", this.hideTitle = false;
  }
  render() {
    return Ht`
      <div class="container">
        ${u27(!this.hideTitle, () => Ht` <header>Preferences</header> `)}

        <div class="search-input">
          <input
            placeholder="Search..."
            .value=${this.search}
            @input=${(e11) => {
      this.search = e11.target.value, n32(this, c25, S20).call(this);
    }}
          />
        </div>
        <div class="preferences-container">
          <div class="preferences">${n32(this, c25, w28).call(this, this.preferences)}</div>
        </div>
      </div>
    `;
  }
};
c25 = /* @__PURE__ */ new WeakSet(), j16 = function(t19, e11) {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        property: t19,
        value: e11
      },
      bubbles: true,
      composed: true
    })
  );
}, S20 = function() {
  this.dispatchEvent(
    new CustomEvent("search", {
      detail: {
        search: this.search
      },
      bubbles: true,
      composed: true
    })
  );
}, d31 = function(t19, e11, r24, o12) {
  r24[o12] = e11, n32(this, c25, j16).call(this, t19, e11), this.requestUpdate();
}, w28 = function(t19, e11) {
  const r24 = Object.entries(t19).filter(
    ([o12, i27]) => {
      const s18 = typeof e11 < "u" ? [e11, o12].join("/") : o12;
      return o12.startsWith(".") ? false : !this.search || typeof i27 == "object" ? true : s18.toLowerCase().includes(this.search.toLowerCase());
    }
  );
  return Ht`
      ${r24.map(([o12, i27]) => {
    const s18 = typeof e11 < "u" ? [e11, o12].join("/") : o12;
    return typeof i27 == "boolean" ? Ht`
            <label title=${s18}>${s18}</label>
            <input
              type="checkbox"
              .checked=${i27}
              @change=${(a22) => {
      n32(this, c25, d31).call(this, s18, a22.target.checked, t19, o12);
    }}
            />
          ` : typeof i27 == "number" ? Ht`
            <label title=${s18}>${s18}</label>
            <div class="number-input">
              <button
                @click=${() => {
      n32(this, c25, d31).call(this, s18, i27 - 1, t19, o12);
    }}
              >
                -
              </button>
              <input
                type="number"
                .value=${i27}
                @change=${(a22) => {
      n32(this, c25, d31).call(this, s18, parseFloat(a22.target.value), t19, o12);
    }}
              />
              <button
                @click=${() => {
      n32(this, c25, d31).call(this, s18, i27 + 1, t19, o12);
    }}
              >
                +
              </button>
            </div>
          ` : typeof i27 == "string" ? Ht`
            <label title=${s18}>${s18}</label>
            <input
              type="text"
              .value=${i27}
              @change=${(a22) => {
      n32(this, c25, d31).call(this, s18, a22.target.value, t19, o12);
    }}
            />
          ` : n32(this, c25, w28).call(this, i27, s18);
  })}
    `;
}, O19.styles = Mt2`
    :host {
      display: inline-block;
      width: 250px;
      height: 250px;
      font-family: sans-serif;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 3px;
      height: 100%;
      width: 100%;
    }

    header {
      background: var(--frc-preferences-header-background-color, lightblue);
      color: var(--frc-preferences-label-color, black);
      text-align: center;
      padding: 5px 3px;
      border-radius: 3px;
      margin: 0 3px;
      font-size: 15px;
    }

    .search-input {
      padding: 0 3px;
    }

    .preferences-container {
      flex: 1;
      overflow: auto;
      width: 100%;
      box-sizing: border-box;

      .preferences {
        padding: 3px;
        display: inline-grid;
        grid-template-columns: repeat(2, 1fr);
        column-gap: 8px;
        row-gap: 5px;
        align-items: center;
        justify-items: start;
        font-family: sans-serif;
        box-sizing: border-box;
      }
    }

    input::placeholder {
      color: var(--frc-preferences-placeholder-text-color, #888);
    }

    input:not([type='checkbox']) {
      width: 100%;
      border: none;
      outline: none;
      padding: 2px 4px;
      box-sizing: border-box;
      border-radius: 2px;
    }

    input[type='checkbox'] {
      width: 20px;
      height: 20px;
      appearance: none;
      -webkit-appearance: none;
      display: flex;
      align-content: center;
      justify-content: center;
      font-size: 2rem;
      padding: 0.1rem;
      border-radius: 3px;
    }

    input[type='checkbox']::before {
      content: ' ';
      /* https://yoksel.github.io/url-encoder/ */
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 -960 960 960' width='24' style='&%2310; fill: white;&%2310;'%3E%3Cpath d='M382-218 130-470l75-75 177 177 375-375 75 75-450 450Z'/%3E%3C/svg%3E");
      width: 100%;
      background-size: 100% 100%;
      width: 100%;
      height: 100%;
      transform-origin: bottom left;
      transform: scale(0);
    }

    input[type='checkbox']:checked::before {
      transform: scale(1);
    }

    input[type='checkbox']:checked {
      background: #0c6ce9;
    }

    input {
      margin: 0;
      box-sizing: border-box;
      color: var(--frc-preferences-input-text-color, black);
      background: var(
        --frc-preferences-input-background-color,
        rgba(0, 0, 0, 0.1)
      );
    }

    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    /* Firefox */
    input[type='number'] {
      -moz-appearance: textfield;
    }

    .number-input {
      display: flex;
      background: var(
        --frc-preferences-input-background-color,
        rgba(0, 0, 0, 0.1)
      );
      box-sizing: border-box;
      height: 20px;
      border-radius: 2px;

      button {
        padding: 0;
        height: 100%;
        width: 20px;
        border: none;
        cursor: pointer;
        background: none;
        line-height: 20px;
        font-size: 15px;
        color: var(--frc-preferences-input-button-text-color, #444);
      }

      input {
        flex: 1;
        background: none;
        text-align: center;
      }
    }

    label {
      color: var(--frc-preferences-label-color, black);
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      width: 100%;
    }
  `;
var b30 = O19;
x32([
  Rt({ type: String, attribute: "source-root" })
], b30.prototype, "sourceRoot");
x32([
  Rt({ type: Object })
], b30.prototype, "preferences");
x32([
  Rt({ type: String })
], b30.prototype, "search");
x32([
  Rt({ type: Boolean, attribute: "hide-title" })
], b30.prototype, "hideTitle");
customElements.get("frc-preferences") || customElements.define("frc-preferences", b30);
var R19 = Object.defineProperty;
var u33 = (t19, e11, r24, o12) => {
  for (var i27 = void 0, s18 = t19.length - 1, a22; s18 >= 0; s18--)
    (a22 = t19[s18]) && (i27 = a22(e11, r24, i27) || i27);
  return i27 && R19(e11, r24, i27), i27;
};
var g29;
var v28;
var f37;
var P18;
var T18;
var K12;
var U17 = class extends x {
  constructor() {
    super(...arguments), y31(this, f37), y31(this, g29), y31(this, v28), this.search = "", this.hideTitle = false, this.sourceKey = "", this.sourceProvider = "", k25(this, g29, {});
  }
  updated(e11) {
    (e11.has("sourceProvider") || e11.has("sourceKey") || e11.has("store")) && n32(this, f37, K12).call(this);
  }
  disconnectedCallback() {
    var e11;
    super.disconnectedCallback(), (e11 = m32(this, v28)) == null || e11.call(this);
  }
  render() {
    return Ht`
      <frc-preferences
        @change=${(e11) => n32(this, f37, P18).call(this, e11)}
        @search=${(e11) => n32(this, f37, T18).call(this, e11)}
        source-root=${this.sourceKey}
        search=${this.search}
        ?hide-title=${this.hideTitle}
        .preferences=${m32(this, g29)}
      ></frc-preferences>
    `;
  }
};
g29 = /* @__PURE__ */ new WeakMap(), v28 = /* @__PURE__ */ new WeakMap(), f37 = /* @__PURE__ */ new WeakSet(), P18 = function(t19) {
  var e11;
  const { property: r24, value: o12 } = t19.detail;
  (e11 = this.provider) == null || e11.userUpdate([this.sourceKey, r24].join("/"), o12);
}, T18 = function(t19) {
  const { search: e11 } = t19.detail;
  this.search = e11;
}, K12 = function() {
  var t19, e11;
  (t19 = m32(this, v28)) == null || t19.call(this), k25(this, v28, (e11 = this.store) == null ? void 0 : e11.subscribe(
    this.sourceProvider,
    this.sourceKey,
    () => {
      var r24;
      const o12 = (r24 = this.store) == null ? void 0 : r24.getSource(
        this.sourceProvider,
        this.sourceKey
      );
      k25(this, g29, (o12 == null ? void 0 : o12.getJson(false)) ?? {}), this.requestUpdate();
    },
    true
  ));
}, U17.styles = Mt2`
    :host {
      display: inline-block;
      width: 250px;
      height: 250px;
    }

    frc-preferences {
      width: 100%;
      height: 100%;
    }
  `;
var l23 = U17;
u33([
  Rt({ type: String })
], l23.prototype, "search");
u33([
  Rt({ type: Boolean, attribute: "hide-title" })
], l23.prototype, "hideTitle");
u33([
  Rt({ type: String, attribute: "source-key" })
], l23.prototype, "sourceKey");
u33([
  Rt({ type: String, attribute: "source-provider" })
], l23.prototype, "sourceProvider");
u33([
  Rt({ type: Object })
], l23.prototype, "source");
u33([
  Rt({ type: Object, attribute: false })
], l23.prototype, "provider");
u33([
  Rt({ type: Object, attribute: false })
], l23.prototype, "store");
customElements.get("frc-preferences-wrapper") || customElements.define("frc-preferences-wrapper", l23);
var Z10 = xt({
  tagName: "frc-preferences",
  elementClass: b30,
  react: import_react33.default,
  events: {
    onchange: "change",
    onsearch: "search"
  }
});

// node_modules/@frc-web-components/react/dist/components/Labels.es.js
var import_react34 = __toESM(require_react(), 1);
var y32 = Object.defineProperty;
var v29 = (e11, r24, n33, g31) => {
  for (var t19 = void 0, i27 = e11.length - 1, l25; i27 >= 0; i27--)
    (l25 = e11[i27]) && (t19 = l25(r24, n33, t19) || t19);
  return t19 && y32(r24, n33, t19), t19;
};
var u34 = class extends x {
  constructor() {
    super(...arguments), this.text = "";
  }
  render() {
    return Ht`${this.text}`;
  }
};
u34.styles = Mt2`
    :host {
      display: inline;
      font-size: inherit;
      font-family: inherit;
      font-weight: inherit;
      text-align: inherit;
      margin: 0;
      padding: 0;
      color: var(--frc-label-text-color, black);
    }
  `;
var s17 = u34;
v29([
  Rt({ type: String })
], s17.prototype, "text");
customElements.get("frc-label") || customElements.define("frc-label", s17);
var x33 = Object.defineProperty;
var b31 = (e11, r24, n33, g31) => {
  for (var t19 = void 0, i27 = e11.length - 1, l25; i27 >= 0; i27--)
    (l25 = e11[i27]) && (t19 = l25(r24, n33, t19) || t19);
  return t19 && x33(r24, n33, t19), t19;
};
var d32 = class extends x {
  constructor() {
    super(...arguments), this.value = 0, this.precision = 2;
  }
  render() {
    const r24 = Math.max(0, this.precision), n33 = this.value.toFixed(r24);
    return Ht`${n33}`;
  }
};
d32.styles = Mt2`
    :host {
      display: inline;
      font-size: inherit;
      font-family: inherit;
      font-weight: inherit;
      text-align: inherit;
      margin: 0;
      padding: 0;
      color: var(--frc-label-text-color, black);
    }
  `;
var o11 = d32;
b31([
  Rt({ type: Number })
], o11.prototype, "value");
b31([
  Rt({ type: Number })
], o11.prototype, "precision");
customElements.get("frc-number-label") || customElements.define("frc-number-label", o11);
var j17 = xt({
  tagName: "frc-label",
  elementClass: s17,
  react: import_react34.default
});
var k26 = xt({
  tagName: "frc-number-label",
  elementClass: o11,
  react: import_react34.default
});

// node_modules/@frc-web-components/react/dist/networktables/index.es.js
var import_react35 = __toESM(require_react(), 1);
var import_jsx_runtime5 = __toESM(require_jsx_runtime(), 1);
function b32(e11, t19, s18) {
  const { store: o12 } = me7();
  (0, import_react35.useEffect)(() => o12.subscribe(
    "NetworkTables",
    e11,
    (r24) => {
      t19(e11, r24);
    },
    s18
  ), []);
}
function d33(e11, t19) {
  const { nt4Provider: s18 } = me7(), [o12, r24] = (0, import_react35.useState)(t19), i27 = (0, import_react35.useCallback)((n33) => {
    s18.userUpdate(e11, n33);
  }, []);
  return b32(
    e11,
    (n33, u35) => {
      r24(u35 === void 0 ? t19 : u35);
    },
    true
  ), [o12, i27];
}
function T19(e11, t19) {
  const { store: s18 } = me7();
  (0, import_react35.useEffect)(() => s18.subscribeAll(
    "NetworkTables",
    (o12, r24) => {
      e11(r24, o12);
    },
    t19
  ), []);
}
function g30(e11, t19, s18 = true) {
  const { store: o12 } = me7(), [r24, i27] = (0, import_react35.useState)(t19);
  return b32(
    e11,
    () => {
      var u35;
      const n33 = (u35 = o12.getSource("NetworkTables", e11)) == null ? void 0 : u35.getJson(s18);
      i27(n33);
    },
    true
  ), r24;
}

// node_modules/@frc-web-components/react/dist/fwc-react.es.js
var import_react36 = __toESM(require_react());
var import_jsx_runtime6 = __toESM(require_jsx_runtime());
export {
  n5 as Accelerometer,
  f3 as Axis,
  i4 as Bar,
  _13 as BasicFmsInfo,
  g19 as BooleanBox,
  Nt7 as Canvas,
  zt5 as CanvasCircle,
  Tt7 as CanvasGroup,
  Mt8 as CanvasLine,
  Pt6 as CanvasMjpgStream,
  _t6 as CanvasNGon,
  Wt6 as CanvasRect,
  jt7 as CanvasText,
  G12 as CheckboxGroup,
  St6 as Differential,
  v22 as Encoder,
  yt11 as Field,
  X_ as Field3d,
  q_2 as Field3dObject,
  J_ as Field3dPoseVisualizer,
  Y_ as Field3dUrdf,
  wt7 as FieldPath,
  bt7 as FieldRobot,
  kt8 as Gauge,
  j12 as Gyro,
  c20 as Icon,
  i22 as KeyValueTable,
  j17 as Label,
  Ji4 as LineChart,
  Ri4 as LineChartAxis,
  Ki5 as LineChartData,
  eo3 as LineChartLegend,
  F15 as Logger,
  Rt7 as Mecanum,
  B18 as Mechanism2d,
  ge5 as NT4Provider,
  k22 as NetworkAlerts,
  b26 as NumberBar,
  k26 as NumberLabel,
  N15 as NumberSlider,
  E21 as Pdp,
  B19 as PidCommand,
  H14 as PidController,
  Z10 as Preferences,
  T17 as ProfiledPidController,
  R17 as Relay,
  R13 as RobotCommand,
  V11 as RobotSubsystem,
  D16 as ScoringGrid,
  N18 as SendableChooser,
  kt7 as Swerve,
  M3 as ThreeAxisAccelerometer,
  a19 as ToggleButton,
  m30 as ToggleGroup,
  m31 as ToggleSwitch,
  Z_ as Urdf,
  g28 as VoltageView,
  d33 as useEntry,
  z13 as useFmsInfo,
  T19 as useGlobalListener,
  g30 as useJson,
  b32 as useKeyListener,
  _18 as useMechanism2dRoots,
  me7 as useNt4
};
/*! Bundled license information:

@frc-web-components/react/dist/property-C4BPH-wS-7fb0a59c.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/state-Cn3aen3G-6b8e5a08.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/query-BrpQj_Qi-db00b239.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/fwc/dist/components/field3d.es.js:
  (**
   * @license
   * Copyright 2010-2023 Three.js Authors
   * SPDX-License-Identifier: MIT
   *)

@frc-web-components/fwc/dist/directive-helpers-CDfQTKPA.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/fwc/dist/directive-B76A7YXI.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/fwc/dist/style-map-CXHve4fi.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/fwc/dist/components/line-chart.es.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/fwc/dist/when-CDK1Tt5Y.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/fwc/dist/components/canvas.es.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/directive-B76A7YXI-abc0af54.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/directive-helpers-CDfQTKPA-206aa42d.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/components/Canvas.es.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/components/Field3d.es.js:
  (**
   * @license
   * Copyright 2010-2023 Three.js Authors
   * SPDX-License-Identifier: MIT
   *)

@frc-web-components/react/dist/style-map-CXHve4fi-4b8d68f4.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/components/LineChart.es.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/when-CDK1Tt5Y-835602a5.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
//# sourceMappingURL=@frc-web-components_react.js.map
