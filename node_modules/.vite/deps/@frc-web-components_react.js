import {
  require_jsx_runtime
} from "./chunk-KVTEQNHM.js";
import {
  require_react
} from "./chunk-VGQVIESM.js";
import {
  __toESM
} from "./chunk-TCQZMY3T.js";

// node_modules/@frc-web-components/react/dist/components/3AxisAccelerometer.es.js
var import_react = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/property-C4BPH-wS-7fb0a59c.js
var ct = /* @__PURE__ */ new Set(["children", "localName", "ref", "style", "className"]);
var B = /* @__PURE__ */ new WeakMap();
var I = (e11, t19, s18, i27, n33) => {
  const r24 = n33 == null ? void 0 : n33[t19];
  r24 === void 0 ? (e11[t19] = s18, s18 == null && t19 in HTMLElement.prototype && e11.removeAttribute(t19)) : s18 !== i27 && ((o13, h26, l26) => {
    let a22 = B.get(o13);
    a22 === void 0 && B.set(o13, a22 = /* @__PURE__ */ new Map());
    let c27 = a22.get(h26);
    l26 !== void 0 ? c27 === void 0 ? (a22.set(h26, c27 = { handleEvent: l26 }), o13.addEventListener(h26, c27)) : c27.handleEvent = l26 : c27 !== void 0 && (a22.delete(h26), o13.removeEventListener(h26, c27));
  })(e11, r24, s18);
};
var xt = ({ react: e11, tagName: t19, elementClass: s18, events: i27, displayName: n33 }) => {
  const r24 = new Set(Object.keys(i27 ?? {})), o13 = e11.forwardRef((h26, l26) => {
    const a22 = e11.useRef(/* @__PURE__ */ new Map()), c27 = e11.useRef(null), d34 = {}, _21 = {};
    for (const [u35, $25] of Object.entries(h26))
      ct.has(u35) ? d34[u35 === "className" ? "class" : u35] = $25 : r24.has(u35) || u35 in s18.prototype ? _21[u35] = $25 : d34[u35] = $25;
    return e11.useLayoutEffect(() => {
      if (c27.current === null)
        return;
      const u35 = /* @__PURE__ */ new Map();
      for (const $25 in _21)
        I(c27.current, $25, h26[$25], a22.current.get($25), i27), a22.current.delete($25), u35.set($25, h26[$25]);
      for (const [$25, at11] of a22.current)
        I(c27.current, $25, void 0, at11, i27);
      a22.current = u35;
    }), e11.useLayoutEffect(() => {
      var u35;
      (u35 = c27.current) == null || u35.removeAttribute("defer-hydration");
    }, []), d34.suppressHydrationWarning = true, e11.createElement(t19, { ...d34, ref: e11.useCallback((u35) => {
      c27.current = u35, typeof l26 == "function" ? l26(u35) : l26 !== null && (l26.current = u35);
    }, [l26]) });
  });
  return o13.displayName = n33 ?? s18.name, o13;
};
var T = globalThis;
var L = T.ShadowRoot && (T.ShadyCSS === void 0 || T.ShadyCSS.nativeShadow) && "adoptedStyleSheets" in Document.prototype && "replace" in CSSStyleSheet.prototype;
var j = Symbol();
var V = /* @__PURE__ */ new WeakMap();
var it = class {
  constructor(e11, t19, s18) {
    if (this._$cssResult$ = true, s18 !== j)
      throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");
    this.cssText = e11, this.t = t19;
  }
  get styleSheet() {
    let e11 = this.o;
    const t19 = this.t;
    if (L && e11 === void 0) {
      const s18 = t19 !== void 0 && t19.length === 1;
      s18 && (e11 = V.get(t19)), e11 === void 0 && ((this.o = e11 = new CSSStyleSheet()).replaceSync(this.cssText), s18 && V.set(t19, e11));
    }
    return e11;
  }
  toString() {
    return this.cssText;
  }
};
var dt = (e11) => new it(typeof e11 == "string" ? e11 : e11 + "", void 0, j);
var Mt = (e11, ...t19) => {
  const s18 = e11.length === 1 ? e11[0] : t19.reduce((i27, n33, r24) => i27 + ((o13) => {
    if (o13._$cssResult$ === true)
      return o13.cssText;
    if (typeof o13 == "number")
      return o13;
    throw Error("Value passed to 'css' function must be a 'css' function result: " + o13 + ". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.");
  })(n33) + e11[r24 + 1], e11[0]);
  return new it(s18, e11, j);
};
var ut = (e11, t19) => {
  if (L)
    e11.adoptedStyleSheets = t19.map((s18) => s18 instanceof CSSStyleSheet ? s18 : s18.styleSheet);
  else
    for (const s18 of t19) {
      const i27 = document.createElement("style"), n33 = T.litNonce;
      n33 !== void 0 && i27.setAttribute("nonce", n33), i27.textContent = s18.cssText, e11.appendChild(i27);
    }
};
var W = L ? (e11) => e11 : (e11) => e11 instanceof CSSStyleSheet ? ((t19) => {
  let s18 = "";
  for (const i27 of t19.cssRules)
    s18 += i27.cssText;
  return dt(s18);
})(e11) : e11;
var { is: pt, defineProperty: $t, getOwnPropertyDescriptor: _t, getOwnPropertyNames: ft, getOwnPropertySymbols: vt, getPrototypeOf: mt } = Object;
var g = globalThis;
var q = g.trustedTypes;
var At = q ? q.emptyScript : "";
var J = g.reactiveElementPolyfillSupport;
var w = (e11, t19) => e11;
var M = { toAttribute(e11, t19) {
  switch (t19) {
    case Boolean:
      e11 = e11 ? At : null;
      break;
    case Object:
    case Array:
      e11 = e11 == null ? e11 : JSON.stringify(e11);
  }
  return e11;
}, fromAttribute(e11, t19) {
  let s18 = e11;
  switch (t19) {
    case Boolean:
      s18 = e11 !== null;
      break;
    case Number:
      s18 = e11 === null ? null : Number(e11);
      break;
    case Object:
    case Array:
      try {
        s18 = JSON.parse(e11);
      } catch {
        s18 = null;
      }
  }
  return s18;
} };
var z = (e11, t19) => !pt(e11, t19);
var K = { attribute: true, type: String, converter: M, reflect: false, hasChanged: z };
Symbol.metadata ?? (Symbol.metadata = Symbol("metadata")), g.litPropertyMetadata ?? (g.litPropertyMetadata = /* @__PURE__ */ new WeakMap());
var y = class extends HTMLElement {
  static addInitializer(e11) {
    this._$Ei(), (this.l ?? (this.l = [])).push(e11);
  }
  static get observedAttributes() {
    return this.finalize(), this._$Eh && [...this._$Eh.keys()];
  }
  static createProperty(e11, t19 = K) {
    if (t19.state && (t19.attribute = false), this._$Ei(), this.elementProperties.set(e11, t19), !t19.noAccessor) {
      const s18 = Symbol(), i27 = this.getPropertyDescriptor(e11, s18, t19);
      i27 !== void 0 && $t(this.prototype, e11, i27);
    }
  }
  static getPropertyDescriptor(e11, t19, s18) {
    const { get: i27, set: n33 } = _t(this.prototype, e11) ?? { get() {
      return this[t19];
    }, set(r24) {
      this[t19] = r24;
    } };
    return { get() {
      return i27 == null ? void 0 : i27.call(this);
    }, set(r24) {
      const o13 = i27 == null ? void 0 : i27.call(this);
      n33.call(this, r24), this.requestUpdate(e11, o13, s18);
    }, configurable: true, enumerable: true };
  }
  static getPropertyOptions(e11) {
    return this.elementProperties.get(e11) ?? K;
  }
  static _$Ei() {
    if (this.hasOwnProperty(w("elementProperties")))
      return;
    const e11 = mt(this);
    e11.finalize(), e11.l !== void 0 && (this.l = [...e11.l]), this.elementProperties = new Map(e11.elementProperties);
  }
  static finalize() {
    if (this.hasOwnProperty(w("finalized")))
      return;
    if (this.finalized = true, this._$Ei(), this.hasOwnProperty(w("properties"))) {
      const t19 = this.properties, s18 = [...ft(t19), ...vt(t19)];
      for (const i27 of s18)
        this.createProperty(i27, t19[i27]);
    }
    const e11 = this[Symbol.metadata];
    if (e11 !== null) {
      const t19 = litPropertyMetadata.get(e11);
      if (t19 !== void 0)
        for (const [s18, i27] of t19)
          this.elementProperties.set(s18, i27);
    }
    this._$Eh = /* @__PURE__ */ new Map();
    for (const [t19, s18] of this.elementProperties) {
      const i27 = this._$Eu(t19, s18);
      i27 !== void 0 && this._$Eh.set(i27, t19);
    }
    this.elementStyles = this.finalizeStyles(this.styles);
  }
  static finalizeStyles(e11) {
    const t19 = [];
    if (Array.isArray(e11)) {
      const s18 = new Set(e11.flat(1 / 0).reverse());
      for (const i27 of s18)
        t19.unshift(W(i27));
    } else
      e11 !== void 0 && t19.push(W(e11));
    return t19;
  }
  static _$Eu(e11, t19) {
    const s18 = t19.attribute;
    return s18 === false ? void 0 : typeof s18 == "string" ? s18 : typeof e11 == "string" ? e11.toLowerCase() : void 0;
  }
  constructor() {
    super(), this._$Ep = void 0, this.isUpdatePending = false, this.hasUpdated = false, this._$Em = null, this._$Ev();
  }
  _$Ev() {
    var e11;
    this._$ES = new Promise((t19) => this.enableUpdating = t19), this._$AL = /* @__PURE__ */ new Map(), this._$E_(), this.requestUpdate(), (e11 = this.constructor.l) == null || e11.forEach((t19) => t19(this));
  }
  addController(e11) {
    var t19;
    (this._$EO ?? (this._$EO = /* @__PURE__ */ new Set())).add(e11), this.renderRoot !== void 0 && this.isConnected && ((t19 = e11.hostConnected) == null || t19.call(e11));
  }
  removeController(e11) {
    var t19;
    (t19 = this._$EO) == null || t19.delete(e11);
  }
  _$E_() {
    const e11 = /* @__PURE__ */ new Map(), t19 = this.constructor.elementProperties;
    for (const s18 of t19.keys())
      this.hasOwnProperty(s18) && (e11.set(s18, this[s18]), delete this[s18]);
    e11.size > 0 && (this._$Ep = e11);
  }
  createRenderRoot() {
    const e11 = this.shadowRoot ?? this.attachShadow(this.constructor.shadowRootOptions);
    return ut(e11, this.constructor.elementStyles), e11;
  }
  connectedCallback() {
    var e11;
    this.renderRoot ?? (this.renderRoot = this.createRenderRoot()), this.enableUpdating(true), (e11 = this._$EO) == null || e11.forEach((t19) => {
      var s18;
      return (s18 = t19.hostConnected) == null ? void 0 : s18.call(t19);
    });
  }
  enableUpdating(e11) {
  }
  disconnectedCallback() {
    var e11;
    (e11 = this._$EO) == null || e11.forEach((t19) => {
      var s18;
      return (s18 = t19.hostDisconnected) == null ? void 0 : s18.call(t19);
    });
  }
  attributeChangedCallback(e11, t19, s18) {
    this._$AK(e11, s18);
  }
  _$EC(e11, t19) {
    var s18;
    const i27 = this.constructor.elementProperties.get(e11), n33 = this.constructor._$Eu(e11, i27);
    if (n33 !== void 0 && i27.reflect === true) {
      const r24 = (((s18 = i27.converter) == null ? void 0 : s18.toAttribute) !== void 0 ? i27.converter : M).toAttribute(t19, i27.type);
      this._$Em = e11, r24 == null ? this.removeAttribute(n33) : this.setAttribute(n33, r24), this._$Em = null;
    }
  }
  _$AK(e11, t19) {
    var s18;
    const i27 = this.constructor, n33 = i27._$Eh.get(e11);
    if (n33 !== void 0 && this._$Em !== n33) {
      const r24 = i27.getPropertyOptions(n33), o13 = typeof r24.converter == "function" ? { fromAttribute: r24.converter } : ((s18 = r24.converter) == null ? void 0 : s18.fromAttribute) !== void 0 ? r24.converter : M;
      this._$Em = n33, this[n33] = o13.fromAttribute(t19, r24.type), this._$Em = null;
    }
  }
  requestUpdate(e11, t19, s18) {
    if (e11 !== void 0) {
      if (s18 ?? (s18 = this.constructor.getPropertyOptions(e11)), !(s18.hasChanged ?? z)(this[e11], t19))
        return;
      this.P(e11, t19, s18);
    }
    this.isUpdatePending === false && (this._$ES = this._$ET());
  }
  P(e11, t19, s18) {
    this._$AL.has(e11) || this._$AL.set(e11, t19), s18.reflect === true && this._$Em !== e11 && (this._$Ej ?? (this._$Ej = /* @__PURE__ */ new Set())).add(e11);
  }
  async _$ET() {
    this.isUpdatePending = true;
    try {
      await this._$ES;
    } catch (t19) {
      Promise.reject(t19);
    }
    const e11 = this.scheduleUpdate();
    return e11 != null && await e11, !this.isUpdatePending;
  }
  scheduleUpdate() {
    return this.performUpdate();
  }
  performUpdate() {
    var e11;
    if (!this.isUpdatePending)
      return;
    if (!this.hasUpdated) {
      if (this.renderRoot ?? (this.renderRoot = this.createRenderRoot()), this._$Ep) {
        for (const [n33, r24] of this._$Ep)
          this[n33] = r24;
        this._$Ep = void 0;
      }
      const i27 = this.constructor.elementProperties;
      if (i27.size > 0)
        for (const [n33, r24] of i27)
          r24.wrapped !== true || this._$AL.has(n33) || this[n33] === void 0 || this.P(n33, this[n33], r24);
    }
    let t19 = false;
    const s18 = this._$AL;
    try {
      t19 = this.shouldUpdate(s18), t19 ? (this.willUpdate(s18), (e11 = this._$EO) == null || e11.forEach((i27) => {
        var n33;
        return (n33 = i27.hostUpdate) == null ? void 0 : n33.call(i27);
      }), this.update(s18)) : this._$EU();
    } catch (i27) {
      throw t19 = false, this._$EU(), i27;
    }
    t19 && this._$AE(s18);
  }
  willUpdate(e11) {
  }
  _$AE(e11) {
    var t19;
    (t19 = this._$EO) == null || t19.forEach((s18) => {
      var i27;
      return (i27 = s18.hostUpdated) == null ? void 0 : i27.call(s18);
    }), this.hasUpdated || (this.hasUpdated = true, this.firstUpdated(e11)), this.updated(e11);
  }
  _$EU() {
    this._$AL = /* @__PURE__ */ new Map(), this.isUpdatePending = false;
  }
  get updateComplete() {
    return this.getUpdateComplete();
  }
  getUpdateComplete() {
    return this._$ES;
  }
  shouldUpdate(e11) {
    return true;
  }
  update(e11) {
    this._$Ej && (this._$Ej = this._$Ej.forEach((t19) => this._$EC(t19, this[t19]))), this._$EU();
  }
  updated(e11) {
  }
  firstUpdated(e11) {
  }
};
y.elementStyles = [], y.shadowRootOptions = { mode: "open" }, y[w("elementProperties")] = /* @__PURE__ */ new Map(), y[w("finalized")] = /* @__PURE__ */ new Map(), J == null || J({ ReactiveElement: y }), (g.reactiveElementVersions ?? (g.reactiveElementVersions = [])).push("2.0.4");
var H = globalThis;
var N = H.trustedTypes;
var Z = N ? N.createPolicy("lit-html", { createHTML: (e11) => e11 }) : void 0;
var nt = "$lit$";
var f = `lit$${Math.random().toFixed(9).slice(2)}$`;
var ot = "?" + f;
var yt = `<${ot}>`;
var A = document;
var C = () => A.createComment("");
var P = (e11) => e11 === null || typeof e11 != "object" && typeof e11 != "function";
var D = Array.isArray;
var gt = (e11) => D(e11) || typeof (e11 == null ? void 0 : e11[Symbol.iterator]) == "function";
var k = `[ 	
\f\r]`;
var S = /<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g;
var F = /-->/g;
var G = />/g;
var v = RegExp(`>|${k}(?:([^\\s"'>=/]+)(${k}*=${k}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`, "g");
var Q = /'/g;
var X = /"/g;
var rt = /^(?:script|style|textarea|title)$/i;
var lt = (e11) => (t19, ...s18) => ({ _$litType$: e11, strings: t19, values: s18 });
var Ht = lt(1);
var Nt = lt(2);
var E = Symbol.for("lit-noChange");
var p = Symbol.for("lit-nothing");
var Y = /* @__PURE__ */ new WeakMap();
var m = A.createTreeWalker(A, 129);
function ht(e11, t19) {
  if (!D(e11) || !e11.hasOwnProperty("raw"))
    throw Error("invalid template strings array");
  return Z !== void 0 ? Z.createHTML(t19) : t19;
}
var Et = (e11, t19) => {
  const s18 = e11.length - 1, i27 = [];
  let n33, r24 = t19 === 2 ? "<svg>" : t19 === 3 ? "<math>" : "", o13 = S;
  for (let h26 = 0; h26 < s18; h26++) {
    const l26 = e11[h26];
    let a22, c27, d34 = -1, _21 = 0;
    for (; _21 < l26.length && (o13.lastIndex = _21, c27 = o13.exec(l26), c27 !== null); )
      _21 = o13.lastIndex, o13 === S ? c27[1] === "!--" ? o13 = F : c27[1] !== void 0 ? o13 = G : c27[2] !== void 0 ? (rt.test(c27[2]) && (n33 = RegExp("</" + c27[2], "g")), o13 = v) : c27[3] !== void 0 && (o13 = v) : o13 === v ? c27[0] === ">" ? (o13 = n33 ?? S, d34 = -1) : c27[1] === void 0 ? d34 = -2 : (d34 = o13.lastIndex - c27[2].length, a22 = c27[1], o13 = c27[3] === void 0 ? v : c27[3] === '"' ? X : Q) : o13 === X || o13 === Q ? o13 = v : o13 === F || o13 === G ? o13 = S : (o13 = v, n33 = void 0);
    const u35 = o13 === v && e11[h26 + 1].startsWith("/>") ? " " : "";
    r24 += o13 === S ? l26 + yt : d34 >= 0 ? (i27.push(a22), l26.slice(0, d34) + nt + l26.slice(d34) + f + u35) : l26 + f + (d34 === -2 ? h26 : u35);
  }
  return [ht(e11, r24 + (e11[s18] || "<?>") + (t19 === 2 ? "</svg>" : t19 === 3 ? "</math>" : "")), i27];
};
var U = class _U {
  constructor({ strings: t19, _$litType$: s18 }, i27) {
    let n33;
    this.parts = [];
    let r24 = 0, o13 = 0;
    const h26 = t19.length - 1, l26 = this.parts, [a22, c27] = Et(t19, s18);
    if (this.el = _U.createElement(a22, i27), m.currentNode = this.el.content, s18 === 2 || s18 === 3) {
      const d34 = this.el.content.firstChild;
      d34.replaceWith(...d34.childNodes);
    }
    for (; (n33 = m.nextNode()) !== null && l26.length < h26; ) {
      if (n33.nodeType === 1) {
        if (n33.hasAttributes())
          for (const d34 of n33.getAttributeNames())
            if (d34.endsWith(nt)) {
              const _21 = c27[o13++], u35 = n33.getAttribute(d34).split(f), $25 = /([.?@])?(.*)/.exec(_21);
              l26.push({ type: 1, index: r24, name: $25[2], strings: u35, ctor: $25[1] === "." ? St : $25[1] === "?" ? wt : $25[1] === "@" ? Ct : R }), n33.removeAttribute(d34);
            } else
              d34.startsWith(f) && (l26.push({ type: 6, index: r24 }), n33.removeAttribute(d34));
        if (rt.test(n33.tagName)) {
          const d34 = n33.textContent.split(f), _21 = d34.length - 1;
          if (_21 > 0) {
            n33.textContent = N ? N.emptyScript : "";
            for (let u35 = 0; u35 < _21; u35++)
              n33.append(d34[u35], C()), m.nextNode(), l26.push({ type: 2, index: ++r24 });
            n33.append(d34[_21], C());
          }
        }
      } else if (n33.nodeType === 8)
        if (n33.data === ot)
          l26.push({ type: 2, index: r24 });
        else {
          let d34 = -1;
          for (; (d34 = n33.data.indexOf(f, d34 + 1)) !== -1; )
            l26.push({ type: 7, index: r24 }), d34 += f.length - 1;
        }
      r24++;
    }
  }
  static createElement(t19, s18) {
    const i27 = A.createElement("template");
    return i27.innerHTML = t19, i27;
  }
};
function b(e11, t19, s18 = e11, i27) {
  var n33, r24;
  if (t19 === E)
    return t19;
  let o13 = i27 !== void 0 ? (n33 = s18._$Co) == null ? void 0 : n33[i27] : s18._$Cl;
  const h26 = P(t19) ? void 0 : t19._$litDirective$;
  return (o13 == null ? void 0 : o13.constructor) !== h26 && ((r24 = o13 == null ? void 0 : o13._$AO) == null || r24.call(o13, false), h26 === void 0 ? o13 = void 0 : (o13 = new h26(e11), o13._$AT(e11, s18, i27)), i27 !== void 0 ? (s18._$Co ?? (s18._$Co = []))[i27] = o13 : s18._$Cl = o13), o13 !== void 0 && (t19 = b(e11, o13._$AS(e11, t19.values), o13, i27)), t19;
}
var bt = class {
  constructor(t19, s18) {
    this._$AV = [], this._$AN = void 0, this._$AD = t19, this._$AM = s18;
  }
  get parentNode() {
    return this._$AM.parentNode;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  u(t19) {
    const { el: { content: s18 }, parts: i27 } = this._$AD, n33 = ((t19 == null ? void 0 : t19.creationScope) ?? A).importNode(s18, true);
    m.currentNode = n33;
    let r24 = m.nextNode(), o13 = 0, h26 = 0, l26 = i27[0];
    for (; l26 !== void 0; ) {
      if (o13 === l26.index) {
        let a22;
        l26.type === 2 ? a22 = new O(r24, r24.nextSibling, this, t19) : l26.type === 1 ? a22 = new l26.ctor(r24, l26.name, l26.strings, this, t19) : l26.type === 6 && (a22 = new Pt(r24, this, t19)), this._$AV.push(a22), l26 = i27[++h26];
      }
      o13 !== (l26 == null ? void 0 : l26.index) && (r24 = m.nextNode(), o13++);
    }
    return m.currentNode = A, n33;
  }
  p(t19) {
    let s18 = 0;
    for (const i27 of this._$AV)
      i27 !== void 0 && (i27.strings !== void 0 ? (i27._$AI(t19, i27, s18), s18 += i27.strings.length - 2) : i27._$AI(t19[s18])), s18++;
  }
};
var O = class _O {
  get _$AU() {
    var t19;
    return ((t19 = this._$AM) == null ? void 0 : t19._$AU) ?? this._$Cv;
  }
  constructor(t19, s18, i27, n33) {
    this.type = 2, this._$AH = p, this._$AN = void 0, this._$AA = t19, this._$AB = s18, this._$AM = i27, this.options = n33, this._$Cv = (n33 == null ? void 0 : n33.isConnected) ?? true;
  }
  get parentNode() {
    let t19 = this._$AA.parentNode;
    const s18 = this._$AM;
    return s18 !== void 0 && (t19 == null ? void 0 : t19.nodeType) === 11 && (t19 = s18.parentNode), t19;
  }
  get startNode() {
    return this._$AA;
  }
  get endNode() {
    return this._$AB;
  }
  _$AI(t19, s18 = this) {
    t19 = b(this, t19, s18), P(t19) ? t19 === p || t19 == null || t19 === "" ? (this._$AH !== p && this._$AR(), this._$AH = p) : t19 !== this._$AH && t19 !== E && this._(t19) : t19._$litType$ !== void 0 ? this.$(t19) : t19.nodeType !== void 0 ? this.T(t19) : gt(t19) ? this.k(t19) : this._(t19);
  }
  O(t19) {
    return this._$AA.parentNode.insertBefore(t19, this._$AB);
  }
  T(t19) {
    this._$AH !== t19 && (this._$AR(), this._$AH = this.O(t19));
  }
  _(t19) {
    this._$AH !== p && P(this._$AH) ? this._$AA.nextSibling.data = t19 : this.T(A.createTextNode(t19)), this._$AH = t19;
  }
  $(t19) {
    var s18;
    const { values: i27, _$litType$: n33 } = t19, r24 = typeof n33 == "number" ? this._$AC(t19) : (n33.el === void 0 && (n33.el = U.createElement(ht(n33.h, n33.h[0]), this.options)), n33);
    if (((s18 = this._$AH) == null ? void 0 : s18._$AD) === r24)
      this._$AH.p(i27);
    else {
      const o13 = new bt(r24, this), h26 = o13.u(this.options);
      o13.p(i27), this.T(h26), this._$AH = o13;
    }
  }
  _$AC(t19) {
    let s18 = Y.get(t19.strings);
    return s18 === void 0 && Y.set(t19.strings, s18 = new U(t19)), s18;
  }
  k(t19) {
    D(this._$AH) || (this._$AH = [], this._$AR());
    const s18 = this._$AH;
    let i27, n33 = 0;
    for (const r24 of t19)
      n33 === s18.length ? s18.push(i27 = new _O(this.O(C()), this.O(C()), this, this.options)) : i27 = s18[n33], i27._$AI(r24), n33++;
    n33 < s18.length && (this._$AR(i27 && i27._$AB.nextSibling, n33), s18.length = n33);
  }
  _$AR(t19 = this._$AA.nextSibling, s18) {
    var i27;
    for ((i27 = this._$AP) == null ? void 0 : i27.call(this, false, true, s18); t19 && t19 !== this._$AB; ) {
      const n33 = t19.nextSibling;
      t19.remove(), t19 = n33;
    }
  }
  setConnected(t19) {
    var s18;
    this._$AM === void 0 && (this._$Cv = t19, (s18 = this._$AP) == null || s18.call(this, t19));
  }
};
var R = class {
  get tagName() {
    return this.element.tagName;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  constructor(t19, s18, i27, n33, r24) {
    this.type = 1, this._$AH = p, this._$AN = void 0, this.element = t19, this.name = s18, this._$AM = n33, this.options = r24, i27.length > 2 || i27[0] !== "" || i27[1] !== "" ? (this._$AH = Array(i27.length - 1).fill(new String()), this.strings = i27) : this._$AH = p;
  }
  _$AI(t19, s18 = this, i27, n33) {
    const r24 = this.strings;
    let o13 = false;
    if (r24 === void 0)
      t19 = b(this, t19, s18, 0), o13 = !P(t19) || t19 !== this._$AH && t19 !== E, o13 && (this._$AH = t19);
    else {
      const h26 = t19;
      let l26, a22;
      for (t19 = r24[0], l26 = 0; l26 < r24.length - 1; l26++)
        a22 = b(this, h26[i27 + l26], s18, l26), a22 === E && (a22 = this._$AH[l26]), o13 || (o13 = !P(a22) || a22 !== this._$AH[l26]), a22 === p ? t19 = p : t19 !== p && (t19 += (a22 ?? "") + r24[l26 + 1]), this._$AH[l26] = a22;
    }
    o13 && !n33 && this.j(t19);
  }
  j(t19) {
    t19 === p ? this.element.removeAttribute(this.name) : this.element.setAttribute(this.name, t19 ?? "");
  }
};
var St = class extends R {
  constructor() {
    super(...arguments), this.type = 3;
  }
  j(t19) {
    this.element[this.name] = t19 === p ? void 0 : t19;
  }
};
var wt = class extends R {
  constructor() {
    super(...arguments), this.type = 4;
  }
  j(t19) {
    this.element.toggleAttribute(this.name, !!t19 && t19 !== p);
  }
};
var Ct = class extends R {
  constructor(t19, s18, i27, n33, r24) {
    super(t19, s18, i27, n33, r24), this.type = 5;
  }
  _$AI(t19, s18 = this) {
    if ((t19 = b(this, t19, s18, 0) ?? p) === E)
      return;
    const i27 = this._$AH, n33 = t19 === p && i27 !== p || t19.capture !== i27.capture || t19.once !== i27.once || t19.passive !== i27.passive, r24 = t19 !== p && (i27 === p || n33);
    n33 && this.element.removeEventListener(this.name, this, i27), r24 && this.element.addEventListener(this.name, this, t19), this._$AH = t19;
  }
  handleEvent(t19) {
    var s18;
    typeof this._$AH == "function" ? this._$AH.call(((s18 = this.options) == null ? void 0 : s18.host) ?? this.element, t19) : this._$AH.handleEvent(t19);
  }
};
var Pt = class {
  constructor(t19, s18, i27) {
    this.element = t19, this.type = 6, this._$AN = void 0, this._$AM = s18, this.options = i27;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  _$AI(t19) {
    b(this, t19);
  }
};
var tt = H.litHtmlPolyfillSupport;
tt == null || tt(U, O), (H.litHtmlVersions ?? (H.litHtmlVersions = [])).push("3.2.1");
var Ut = (e11, t19, s18) => {
  const i27 = (s18 == null ? void 0 : s18.renderBefore) ?? t19;
  let n33 = i27._$litPart$;
  if (n33 === void 0) {
    const r24 = (s18 == null ? void 0 : s18.renderBefore) ?? null;
    i27._$litPart$ = n33 = new O(t19.insertBefore(C(), r24), r24, void 0, s18 ?? {});
  }
  return n33._$AI(e11), n33;
};
var x = class extends y {
  constructor() {
    super(...arguments), this.renderOptions = { host: this }, this._$Do = void 0;
  }
  createRenderRoot() {
    var e11;
    const t19 = super.createRenderRoot();
    return (e11 = this.renderOptions).renderBefore ?? (e11.renderBefore = t19.firstChild), t19;
  }
  update(e11) {
    const t19 = this.render();
    this.hasUpdated || (this.renderOptions.isConnected = this.isConnected), super.update(e11), this._$Do = Ut(t19, this.renderRoot, this.renderOptions);
  }
  connectedCallback() {
    var e11;
    super.connectedCallback(), (e11 = this._$Do) == null || e11.setConnected(true);
  }
  disconnectedCallback() {
    var e11;
    super.disconnectedCallback(), (e11 = this._$Do) == null || e11.setConnected(false);
  }
  render() {
    return E;
  }
};
var et;
x._$litElement$ = true, x.finalized = true, (et = globalThis.litElementHydrateSupport) == null || et.call(globalThis, { LitElement: x });
var st = globalThis.litElementPolyfillSupport;
st == null || st({ LitElement: x });
(globalThis.litElementVersions ?? (globalThis.litElementVersions = [])).push("4.1.1");
var Ot = { attribute: true, type: String, converter: M, reflect: false, hasChanged: z };
var Tt = (e11 = Ot, t19, s18) => {
  const { kind: i27, metadata: n33 } = s18;
  let r24 = globalThis.litPropertyMetadata.get(n33);
  if (r24 === void 0 && globalThis.litPropertyMetadata.set(n33, r24 = /* @__PURE__ */ new Map()), r24.set(s18.name, e11), i27 === "accessor") {
    const { name: o13 } = s18;
    return { set(h26) {
      const l26 = t19.get.call(this);
      t19.set.call(this, h26), this.requestUpdate(o13, l26, e11);
    }, init(h26) {
      return h26 !== void 0 && this.P(o13, void 0, e11), h26;
    } };
  }
  if (i27 === "setter") {
    const { name: o13 } = s18;
    return function(h26) {
      const l26 = this[o13];
      t19.call(this, h26), this.requestUpdate(o13, l26, e11);
    };
  }
  throw Error("Unsupported decorator location: " + i27);
};
function Rt(e11) {
  return (t19, s18) => typeof s18 == "object" ? Tt(e11, t19, s18) : ((i27, n33, r24) => {
    const o13 = n33.hasOwnProperty(r24);
    return n33.constructor.createProperty(r24, o13 ? { ...i27, wrapped: true } : i27), o13 ? Object.getOwnPropertyDescriptor(n33, r24) : void 0;
  })(e11, t19, s18);
}

// node_modules/@frc-web-components/react/dist/state-Cn3aen3G-6b8e5a08.js
function n(t19) {
  return Rt({ ...t19, state: true, attribute: false });
}

// node_modules/@frc-web-components/react/dist/query-BrpQj_Qi-db00b239.js
var i = (o13, r24, t19) => (t19.configurable = true, t19.enumerable = true, Reflect.decorate && typeof r24 != "object" && Object.defineProperty(o13, r24, t19), t19);
function a(o13, r24) {
  return (t19, u35, l26) => {
    const c27 = (s18) => {
      var n33;
      return ((n33 = s18.renderRoot) == null ? void 0 : n33.querySelector(o13)) ?? null;
    };
    if (r24) {
      const { get: s18, set: n33 } = typeof u35 == "object" ? t19 : l26 ?? (() => {
        const e11 = Symbol();
        return { get() {
          return this[e11];
        }, set(h26) {
          this[e11] = h26;
        } };
      })();
      return i(t19, u35, { get() {
        let e11 = s18.call(this);
        return e11 === void 0 && (e11 = c27(this), (e11 !== null || this.hasUpdated) && n33.call(this, e11)), e11;
      } });
    }
    return i(t19, u35, { get() {
      return c27(this);
    } });
  };
}

// node_modules/@frc-web-components/react/dist/bar.es-bc02d3c5.js
var b2 = Object.defineProperty;
var v2 = Object.getOwnPropertyDescriptor;
var a2 = (d34, t19, e11, o13) => {
  for (var s18 = o13 > 1 ? void 0 : o13 ? v2(t19, e11) : t19, r24 = d34.length - 1, i27; r24 >= 0; r24--)
    (i27 = d34[r24]) && (s18 = (o13 ? i27(t19, e11, s18) : i27(s18)) || s18);
  return o13 && s18 && b2(t19, e11, s18), s18;
};
function u(d34, t19, e11) {
  return Math.min(e11, Math.max(d34, t19));
}
var h = class extends x {
  constructor() {
    super(...arguments), this._min = -1, this._max = 1, this.value = 0, this.center = 0, this.dragging = false;
  }
  get min() {
    return Math.min(this._min, this._max);
  }
  set min(t19) {
    const e11 = this._min;
    this._min = t19, this.requestUpdate("min", e11);
  }
  get max() {
    return Math.max(this._min, this._max);
  }
  set max(t19) {
    const e11 = this._max;
    this._max = t19, this.requestUpdate("max", e11);
  }
  updateForeground() {
    const { min: t19, max: e11, center: o13, value: s18, foreground: r24 } = this, i27 = u(s18, t19, e11);
    e11 < o13 ? (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - e11) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-left", "auto"), r24.style.setProperty("--foreground-right", "0")) : t19 > o13 ? (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - t19) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-left", "0"), r24.style.setProperty("--foreground-right", "auto")) : i27 > o13 ? (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - o13) / (e11 - t19) * 100}%`
    ), r24.style.setProperty(
      "--foreground-left",
      `${Math.abs(t19 - o13) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-right", "auto")) : (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - o13) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-left", "auto"), r24.style.setProperty(
      "--foreground-right",
      `${Math.abs(e11 - o13) / (e11 - t19) * 100}%`
    ));
  }
  resized() {
    this.updateForeground();
  }
  updated() {
    this.updateForeground();
  }
  setDragPosition(t19) {
    const { left: e11, width: o13 } = this.getBoundingClientRect(), s18 = t19.clientX - e11, r24 = u(s18 / o13, 0, 1), i27 = this.min + (this.max - this.min) * r24, p26 = new CustomEvent("barDrag", {
      bubbles: true,
      composed: true,
      detail: { value: i27 }
    });
    this.dispatchEvent(p26);
  }
  firstUpdated() {
    this.setAttribute("draggable", "false"), window.addEventListener("mousemove", (t19) => {
      this.dragging && this.setDragPosition(t19);
    }), window.addEventListener("mouseup", () => {
      this.dragging = false;
    });
  }
  onMouseDown(t19) {
    this.dragging = true, this.setDragPosition(t19);
  }
  render() {
    return Ht`
      <div part="foreground" draggble="false"></div>
      <div class="content" draggable="false">
        <slot></slot>
      </div>
      <div part="dragger" @mousedown="${this.onMouseDown}"></div>
    `;
  }
};
h.styles = Mt`
    :host {
      display: inline-block;
      position: relative;
      width: 300px;
      height: 20px;
      background: var(--frc-bar-background, #ddd);
      color: var(--frc-bar-color, black);
      font-size: 15px;
      line-height: 18px;
      text-align: center;
    }

    [part='dragger'] {
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    }

    [part='foreground'] {
      position: absolute;
      top: 0;
      height: 100%;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
      width: var(--foreground-width);
      left: var(--foreground-left);
      right: var(--foreground-right);
      pointer-events: none;
    }

    .content {
      position: relative;
    }
  `;
var n2 = h;
a2([
  Rt({ type: Number })
], n2.prototype, "value", 2);
a2([
  Rt({ type: Number })
], n2.prototype, "center", 2);
a2([
  n()
], n2.prototype, "dragging", 2);
a2([
  Rt({ type: Number })
], n2.prototype, "min", 1);
a2([
  Rt({ type: Number })
], n2.prototype, "max", 1);
a2([
  a("[part=foreground]")
], n2.prototype, "foreground", 2);
customElements.get("frc-bar") || customElements.define("frc-bar", n2);

// node_modules/@frc-web-components/react/dist/transform-DR-Bw75L-3629b551.js
var fn = { value: () => {
} };
function Ht2() {
  for (var t19 = 0, n33 = arguments.length, e11 = {}, r24; t19 < n33; ++t19) {
    if (!(r24 = arguments[t19] + "") || r24 in e11 || /[\s.]/.test(r24))
      throw new Error("illegal type: " + r24);
    e11[r24] = [];
  }
  return new F2(e11);
}
function F2(t19) {
  this._ = t19;
}
function pn(t19, n33) {
  return t19.trim().split(/^|\s+/).map(function(e11) {
    var r24 = "", i27 = e11.indexOf(".");
    if (i27 >= 0 && (r24 = e11.slice(i27 + 1), e11 = e11.slice(0, i27)), e11 && !n33.hasOwnProperty(e11))
      throw new Error("unknown type: " + e11);
    return { type: e11, name: r24 };
  });
}
F2.prototype = Ht2.prototype = {
  constructor: F2,
  on: function(t19, n33) {
    var e11 = this._, r24 = pn(t19 + "", e11), i27, o13 = -1, u35 = r24.length;
    if (arguments.length < 2) {
      for (; ++o13 < u35; )
        if ((i27 = (t19 = r24[o13]).type) && (i27 = gn(e11[i27], t19.name)))
          return i27;
      return;
    }
    if (n33 != null && typeof n33 != "function")
      throw new Error("invalid callback: " + n33);
    for (; ++o13 < u35; )
      if (i27 = (t19 = r24[o13]).type)
        e11[i27] = bt2(e11[i27], t19.name, n33);
      else if (n33 == null)
        for (i27 in e11)
          e11[i27] = bt2(e11[i27], t19.name, null);
    return this;
  },
  copy: function() {
    var t19 = {}, n33 = this._;
    for (var e11 in n33)
      t19[e11] = n33[e11].slice();
    return new F2(t19);
  },
  call: function(t19, n33) {
    if ((i27 = arguments.length - 2) > 0)
      for (var e11 = new Array(i27), r24 = 0, i27, o13; r24 < i27; ++r24)
        e11[r24] = arguments[r24 + 2];
    if (!this._.hasOwnProperty(t19))
      throw new Error("unknown type: " + t19);
    for (o13 = this._[t19], r24 = 0, i27 = o13.length; r24 < i27; ++r24)
      o13[r24].value.apply(n33, e11);
  },
  apply: function(t19, n33, e11) {
    if (!this._.hasOwnProperty(t19))
      throw new Error("unknown type: " + t19);
    for (var r24 = this._[t19], i27 = 0, o13 = r24.length; i27 < o13; ++i27)
      r24[i27].value.apply(n33, e11);
  }
};
function gn(t19, n33) {
  for (var e11 = 0, r24 = t19.length, i27; e11 < r24; ++e11)
    if ((i27 = t19[e11]).name === n33)
      return i27.value;
}
function bt2(t19, n33, e11) {
  for (var r24 = 0, i27 = t19.length; r24 < i27; ++r24)
    if (t19[r24].name === n33) {
      t19[r24] = fn, t19 = t19.slice(0, r24).concat(t19.slice(r24 + 1));
      break;
    }
  return e11 != null && t19.push({ name: n33, value: e11 }), t19;
}
var at = "http://www.w3.org/1999/xhtml";
var xt2 = {
  svg: "http://www.w3.org/2000/svg",
  xhtml: at,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};
function et2(t19) {
  var n33 = t19 += "", e11 = n33.indexOf(":");
  return e11 >= 0 && (n33 = t19.slice(0, e11)) !== "xmlns" && (t19 = t19.slice(e11 + 1)), xt2.hasOwnProperty(n33) ? { space: xt2[n33], local: t19 } : t19;
}
function dn(t19) {
  return function() {
    var n33 = this.ownerDocument, e11 = this.namespaceURI;
    return e11 === at && n33.documentElement.namespaceURI === at ? n33.createElement(t19) : n33.createElementNS(e11, t19);
  };
}
function yn(t19) {
  return function() {
    return this.ownerDocument.createElementNS(t19.space, t19.local);
  };
}
function jt(t19) {
  var n33 = et2(t19);
  return (n33.local ? yn : dn)(n33);
}
function mn() {
}
function pt2(t19) {
  return t19 == null ? mn : function() {
    return this.querySelector(t19);
  };
}
function vn(t19) {
  typeof t19 != "function" && (t19 = pt2(t19));
  for (var n33 = this._groups, e11 = n33.length, r24 = new Array(e11), i27 = 0; i27 < e11; ++i27)
    for (var o13 = n33[i27], u35 = o13.length, a22 = r24[i27] = new Array(u35), s18, l26, c27 = 0; c27 < u35; ++c27)
      (s18 = o13[c27]) && (l26 = t19.call(s18, s18.__data__, c27, o13)) && ("__data__" in s18 && (l26.__data__ = s18.__data__), a22[c27] = l26);
  return new m2(r24, this._parents);
}
function _n(t19) {
  return t19 == null ? [] : Array.isArray(t19) ? t19 : Array.from(t19);
}
function wn() {
  return [];
}
function It(t19) {
  return t19 == null ? wn : function() {
    return this.querySelectorAll(t19);
  };
}
function bn(t19) {
  return function() {
    return _n(t19.apply(this, arguments));
  };
}
function xn(t19) {
  typeof t19 == "function" ? t19 = bn(t19) : t19 = It(t19);
  for (var n33 = this._groups, e11 = n33.length, r24 = [], i27 = [], o13 = 0; o13 < e11; ++o13)
    for (var u35 = n33[o13], a22 = u35.length, s18, l26 = 0; l26 < a22; ++l26)
      (s18 = u35[l26]) && (r24.push(t19.call(s18, s18.__data__, l26, u35)), i27.push(s18));
  return new m2(r24, i27);
}
function Lt(t19) {
  return function() {
    return this.matches(t19);
  };
}
function Dt(t19) {
  return function(n33) {
    return n33.matches(t19);
  };
}
var kn = Array.prototype.find;
function An(t19) {
  return function() {
    return kn.call(this.children, t19);
  };
}
function Nn() {
  return this.firstElementChild;
}
function En(t19) {
  return this.select(t19 == null ? Nn : An(typeof t19 == "function" ? t19 : Dt(t19)));
}
var $n = Array.prototype.filter;
function Sn() {
  return Array.from(this.children);
}
function Mn(t19) {
  return function() {
    return $n.call(this.children, t19);
  };
}
function Cn(t19) {
  return this.selectAll(t19 == null ? Sn : Mn(typeof t19 == "function" ? t19 : Dt(t19)));
}
function qn(t19) {
  typeof t19 != "function" && (t19 = Lt(t19));
  for (var n33 = this._groups, e11 = n33.length, r24 = new Array(e11), i27 = 0; i27 < e11; ++i27)
    for (var o13 = n33[i27], u35 = o13.length, a22 = r24[i27] = [], s18, l26 = 0; l26 < u35; ++l26)
      (s18 = o13[l26]) && t19.call(s18, s18.__data__, l26, o13) && a22.push(s18);
  return new m2(r24, this._parents);
}
function Bt(t19) {
  return new Array(t19.length);
}
function Xn() {
  return new m2(this._enter || this._groups.map(Bt), this._parents);
}
function G2(t19, n33) {
  this.ownerDocument = t19.ownerDocument, this.namespaceURI = t19.namespaceURI, this._next = null, this._parent = t19, this.__data__ = n33;
}
G2.prototype = {
  constructor: G2,
  appendChild: function(t19) {
    return this._parent.insertBefore(t19, this._next);
  },
  insertBefore: function(t19, n33) {
    return this._parent.insertBefore(t19, n33);
  },
  querySelector: function(t19) {
    return this._parent.querySelector(t19);
  },
  querySelectorAll: function(t19) {
    return this._parent.querySelectorAll(t19);
  }
};
function Pn(t19) {
  return function() {
    return t19;
  };
}
function On(t19, n33, e11, r24, i27, o13) {
  for (var u35 = 0, a22, s18 = n33.length, l26 = o13.length; u35 < l26; ++u35)
    (a22 = n33[u35]) ? (a22.__data__ = o13[u35], r24[u35] = a22) : e11[u35] = new G2(t19, o13[u35]);
  for (; u35 < s18; ++u35)
    (a22 = n33[u35]) && (i27[u35] = a22);
}
function Tn(t19, n33, e11, r24, i27, o13, u35) {
  var a22, s18, l26 = /* @__PURE__ */ new Map(), c27 = n33.length, h26 = o13.length, f40 = new Array(c27), p26;
  for (a22 = 0; a22 < c27; ++a22)
    (s18 = n33[a22]) && (f40[a22] = p26 = u35.call(s18, s18.__data__, a22, n33) + "", l26.has(p26) ? i27[a22] = s18 : l26.set(p26, s18));
  for (a22 = 0; a22 < h26; ++a22)
    p26 = u35.call(t19, o13[a22], a22, o13) + "", (s18 = l26.get(p26)) ? (r24[a22] = s18, s18.__data__ = o13[a22], l26.delete(p26)) : e11[a22] = new G2(t19, o13[a22]);
  for (a22 = 0; a22 < c27; ++a22)
    (s18 = n33[a22]) && l26.get(f40[a22]) === s18 && (i27[a22] = s18);
}
function Rn(t19) {
  return t19.__data__;
}
function Hn(t19, n33) {
  if (!arguments.length)
    return Array.from(this, Rn);
  var e11 = n33 ? Tn : On, r24 = this._parents, i27 = this._groups;
  typeof t19 != "function" && (t19 = Pn(t19));
  for (var o13 = i27.length, u35 = new Array(o13), a22 = new Array(o13), s18 = new Array(o13), l26 = 0; l26 < o13; ++l26) {
    var c27 = r24[l26], h26 = i27[l26], f40 = h26.length, p26 = jn(t19.call(c27, c27 && c27.__data__, l26, r24)), g32 = p26.length, d34 = a22[l26] = new Array(g32), N22 = u35[l26] = new Array(g32), hn4 = s18[l26] = new Array(f40);
    e11(c27, h26, d34, N22, hn4, p26, n33);
    for (var X14 = 0, Y13 = 0, _t10, wt10; X14 < g32; ++X14)
      if (_t10 = d34[X14]) {
        for (X14 >= Y13 && (Y13 = X14 + 1); !(wt10 = N22[Y13]) && ++Y13 < g32; )
          ;
        _t10._next = wt10 || null;
      }
  }
  return u35 = new m2(u35, r24), u35._enter = a22, u35._exit = s18, u35;
}
function jn(t19) {
  return typeof t19 == "object" && "length" in t19 ? t19 : Array.from(t19);
}
function In() {
  return new m2(this._exit || this._groups.map(Bt), this._parents);
}
function Ln(t19, n33, e11) {
  var r24 = this.enter(), i27 = this, o13 = this.exit();
  return typeof t19 == "function" ? (r24 = t19(r24), r24 && (r24 = r24.selection())) : r24 = r24.append(t19 + ""), n33 != null && (i27 = n33(i27), i27 && (i27 = i27.selection())), e11 == null ? o13.remove() : e11(o13), r24 && i27 ? r24.merge(i27).order() : i27;
}
function Dn(t19) {
  for (var n33 = t19.selection ? t19.selection() : t19, e11 = this._groups, r24 = n33._groups, i27 = e11.length, o13 = r24.length, u35 = Math.min(i27, o13), a22 = new Array(i27), s18 = 0; s18 < u35; ++s18)
    for (var l26 = e11[s18], c27 = r24[s18], h26 = l26.length, f40 = a22[s18] = new Array(h26), p26, g32 = 0; g32 < h26; ++g32)
      (p26 = l26[g32] || c27[g32]) && (f40[g32] = p26);
  for (; s18 < i27; ++s18)
    a22[s18] = e11[s18];
  return new m2(a22, this._parents);
}
function Bn() {
  for (var t19 = this._groups, n33 = -1, e11 = t19.length; ++n33 < e11; )
    for (var r24 = t19[n33], i27 = r24.length - 1, o13 = r24[i27], u35; --i27 >= 0; )
      (u35 = r24[i27]) && (o13 && u35.compareDocumentPosition(o13) ^ 4 && o13.parentNode.insertBefore(u35, o13), o13 = u35);
  return this;
}
function Yn(t19) {
  t19 || (t19 = Vn);
  function n33(h26, f40) {
    return h26 && f40 ? t19(h26.__data__, f40.__data__) : !h26 - !f40;
  }
  for (var e11 = this._groups, r24 = e11.length, i27 = new Array(r24), o13 = 0; o13 < r24; ++o13) {
    for (var u35 = e11[o13], a22 = u35.length, s18 = i27[o13] = new Array(a22), l26, c27 = 0; c27 < a22; ++c27)
      (l26 = u35[c27]) && (s18[c27] = l26);
    s18.sort(n33);
  }
  return new m2(i27, this._parents).order();
}
function Vn(t19, n33) {
  return t19 < n33 ? -1 : t19 > n33 ? 1 : t19 >= n33 ? 0 : NaN;
}
function zn() {
  var t19 = arguments[0];
  return arguments[0] = this, t19.apply(null, arguments), this;
}
function Un() {
  return Array.from(this);
}
function Fn() {
  for (var t19 = this._groups, n33 = 0, e11 = t19.length; n33 < e11; ++n33)
    for (var r24 = t19[n33], i27 = 0, o13 = r24.length; i27 < o13; ++i27) {
      var u35 = r24[i27];
      if (u35)
        return u35;
    }
  return null;
}
function Kn() {
  let t19 = 0;
  for (const n33 of this)
    ++t19;
  return t19;
}
function Wn() {
  return !this.node();
}
function Gn(t19) {
  for (var n33 = this._groups, e11 = 0, r24 = n33.length; e11 < r24; ++e11)
    for (var i27 = n33[e11], o13 = 0, u35 = i27.length, a22; o13 < u35; ++o13)
      (a22 = i27[o13]) && t19.call(a22, a22.__data__, o13, i27);
  return this;
}
function Jn(t19) {
  return function() {
    this.removeAttribute(t19);
  };
}
function Qn(t19) {
  return function() {
    this.removeAttributeNS(t19.space, t19.local);
  };
}
function Zn(t19, n33) {
  return function() {
    this.setAttribute(t19, n33);
  };
}
function te(t19, n33) {
  return function() {
    this.setAttributeNS(t19.space, t19.local, n33);
  };
}
function ne(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    e11 == null ? this.removeAttribute(t19) : this.setAttribute(t19, e11);
  };
}
function ee(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    e11 == null ? this.removeAttributeNS(t19.space, t19.local) : this.setAttributeNS(t19.space, t19.local, e11);
  };
}
function re(t19, n33) {
  var e11 = et2(t19);
  if (arguments.length < 2) {
    var r24 = this.node();
    return e11.local ? r24.getAttributeNS(e11.space, e11.local) : r24.getAttribute(e11);
  }
  return this.each((n33 == null ? e11.local ? Qn : Jn : typeof n33 == "function" ? e11.local ? ee : ne : e11.local ? te : Zn)(e11, n33));
}
function Yt(t19) {
  return t19.ownerDocument && t19.ownerDocument.defaultView || t19.document && t19 || t19.defaultView;
}
function ie(t19) {
  return function() {
    this.style.removeProperty(t19);
  };
}
function oe(t19, n33, e11) {
  return function() {
    this.style.setProperty(t19, n33, e11);
  };
}
function ue(t19, n33, e11) {
  return function() {
    var r24 = n33.apply(this, arguments);
    r24 == null ? this.style.removeProperty(t19) : this.style.setProperty(t19, r24, e11);
  };
}
function ae(t19, n33, e11) {
  return arguments.length > 1 ? this.each((n33 == null ? ie : typeof n33 == "function" ? ue : oe)(t19, n33, e11 ?? "")) : C2(this.node(), t19);
}
function C2(t19, n33) {
  return t19.style.getPropertyValue(n33) || Yt(t19).getComputedStyle(t19, null).getPropertyValue(n33);
}
function se(t19) {
  return function() {
    delete this[t19];
  };
}
function le(t19, n33) {
  return function() {
    this[t19] = n33;
  };
}
function ce(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    e11 == null ? delete this[t19] : this[t19] = e11;
  };
}
function he(t19, n33) {
  return arguments.length > 1 ? this.each((n33 == null ? se : typeof n33 == "function" ? ce : le)(t19, n33)) : this.node()[t19];
}
function Vt(t19) {
  return t19.trim().split(/^|\s+/);
}
function gt2(t19) {
  return t19.classList || new zt(t19);
}
function zt(t19) {
  this._node = t19, this._names = Vt(t19.getAttribute("class") || "");
}
zt.prototype = {
  add: function(t19) {
    var n33 = this._names.indexOf(t19);
    n33 < 0 && (this._names.push(t19), this._node.setAttribute("class", this._names.join(" ")));
  },
  remove: function(t19) {
    var n33 = this._names.indexOf(t19);
    n33 >= 0 && (this._names.splice(n33, 1), this._node.setAttribute("class", this._names.join(" ")));
  },
  contains: function(t19) {
    return this._names.indexOf(t19) >= 0;
  }
};
function Ut2(t19, n33) {
  for (var e11 = gt2(t19), r24 = -1, i27 = n33.length; ++r24 < i27; )
    e11.add(n33[r24]);
}
function Ft(t19, n33) {
  for (var e11 = gt2(t19), r24 = -1, i27 = n33.length; ++r24 < i27; )
    e11.remove(n33[r24]);
}
function fe(t19) {
  return function() {
    Ut2(this, t19);
  };
}
function pe(t19) {
  return function() {
    Ft(this, t19);
  };
}
function ge(t19, n33) {
  return function() {
    (n33.apply(this, arguments) ? Ut2 : Ft)(this, t19);
  };
}
function de(t19, n33) {
  var e11 = Vt(t19 + "");
  if (arguments.length < 2) {
    for (var r24 = gt2(this.node()), i27 = -1, o13 = e11.length; ++i27 < o13; )
      if (!r24.contains(e11[i27]))
        return false;
    return true;
  }
  return this.each((typeof n33 == "function" ? ge : n33 ? fe : pe)(e11, n33));
}
function ye() {
  this.textContent = "";
}
function me(t19) {
  return function() {
    this.textContent = t19;
  };
}
function ve(t19) {
  return function() {
    var n33 = t19.apply(this, arguments);
    this.textContent = n33 ?? "";
  };
}
function _e(t19) {
  return arguments.length ? this.each(t19 == null ? ye : (typeof t19 == "function" ? ve : me)(t19)) : this.node().textContent;
}
function we() {
  this.innerHTML = "";
}
function be(t19) {
  return function() {
    this.innerHTML = t19;
  };
}
function xe(t19) {
  return function() {
    var n33 = t19.apply(this, arguments);
    this.innerHTML = n33 ?? "";
  };
}
function ke(t19) {
  return arguments.length ? this.each(t19 == null ? we : (typeof t19 == "function" ? xe : be)(t19)) : this.node().innerHTML;
}
function Ae() {
  this.nextSibling && this.parentNode.appendChild(this);
}
function Ne() {
  return this.each(Ae);
}
function Ee() {
  this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function $e() {
  return this.each(Ee);
}
function Se(t19) {
  var n33 = typeof t19 == "function" ? t19 : jt(t19);
  return this.select(function() {
    return this.appendChild(n33.apply(this, arguments));
  });
}
function Me() {
  return null;
}
function Ce(t19, n33) {
  var e11 = typeof t19 == "function" ? t19 : jt(t19), r24 = n33 == null ? Me : typeof n33 == "function" ? n33 : pt2(n33);
  return this.select(function() {
    return this.insertBefore(e11.apply(this, arguments), r24.apply(this, arguments) || null);
  });
}
function qe() {
  var t19 = this.parentNode;
  t19 && t19.removeChild(this);
}
function Xe() {
  return this.each(qe);
}
function Pe() {
  var t19 = this.cloneNode(false), n33 = this.parentNode;
  return n33 ? n33.insertBefore(t19, this.nextSibling) : t19;
}
function Oe() {
  var t19 = this.cloneNode(true), n33 = this.parentNode;
  return n33 ? n33.insertBefore(t19, this.nextSibling) : t19;
}
function Te(t19) {
  return this.select(t19 ? Oe : Pe);
}
function Re(t19) {
  return arguments.length ? this.property("__data__", t19) : this.node().__data__;
}
function He(t19) {
  return function(n33) {
    t19.call(this, n33, this.__data__);
  };
}
function je(t19) {
  return t19.trim().split(/^|\s+/).map(function(n33) {
    var e11 = "", r24 = n33.indexOf(".");
    return r24 >= 0 && (e11 = n33.slice(r24 + 1), n33 = n33.slice(0, r24)), { type: n33, name: e11 };
  });
}
function Ie(t19) {
  return function() {
    var n33 = this.__on;
    if (n33) {
      for (var e11 = 0, r24 = -1, i27 = n33.length, o13; e11 < i27; ++e11)
        o13 = n33[e11], (!t19.type || o13.type === t19.type) && o13.name === t19.name ? this.removeEventListener(o13.type, o13.listener, o13.options) : n33[++r24] = o13;
      ++r24 ? n33.length = r24 : delete this.__on;
    }
  };
}
function Le(t19, n33, e11) {
  return function() {
    var r24 = this.__on, i27, o13 = He(n33);
    if (r24) {
      for (var u35 = 0, a22 = r24.length; u35 < a22; ++u35)
        if ((i27 = r24[u35]).type === t19.type && i27.name === t19.name) {
          this.removeEventListener(i27.type, i27.listener, i27.options), this.addEventListener(i27.type, i27.listener = o13, i27.options = e11), i27.value = n33;
          return;
        }
    }
    this.addEventListener(t19.type, o13, e11), i27 = { type: t19.type, name: t19.name, value: n33, listener: o13, options: e11 }, r24 ? r24.push(i27) : this.__on = [i27];
  };
}
function De(t19, n33, e11) {
  var r24 = je(t19 + ""), i27, o13 = r24.length, u35;
  if (arguments.length < 2) {
    var a22 = this.node().__on;
    if (a22) {
      for (var s18 = 0, l26 = a22.length, c27; s18 < l26; ++s18)
        for (i27 = 0, c27 = a22[s18]; i27 < o13; ++i27)
          if ((u35 = r24[i27]).type === c27.type && u35.name === c27.name)
            return c27.value;
    }
    return;
  }
  for (a22 = n33 ? Le : Ie, i27 = 0; i27 < o13; ++i27)
    this.each(a22(r24[i27], n33, e11));
  return this;
}
function Kt(t19, n33, e11) {
  var r24 = Yt(t19), i27 = r24.CustomEvent;
  typeof i27 == "function" ? i27 = new i27(n33, e11) : (i27 = r24.document.createEvent("Event"), e11 ? (i27.initEvent(n33, e11.bubbles, e11.cancelable), i27.detail = e11.detail) : i27.initEvent(n33, false, false)), t19.dispatchEvent(i27);
}
function Be(t19, n33) {
  return function() {
    return Kt(this, t19, n33);
  };
}
function Ye(t19, n33) {
  return function() {
    return Kt(this, t19, n33.apply(this, arguments));
  };
}
function Ve(t19, n33) {
  return this.each((typeof n33 == "function" ? Ye : Be)(t19, n33));
}
function* ze() {
  for (var t19 = this._groups, n33 = 0, e11 = t19.length; n33 < e11; ++n33)
    for (var r24 = t19[n33], i27 = 0, o13 = r24.length, u35; i27 < o13; ++i27)
      (u35 = r24[i27]) && (yield u35);
}
var Wt = [null];
function m2(t19, n33) {
  this._groups = t19, this._parents = n33;
}
function D2() {
  return new m2([[document.documentElement]], Wt);
}
function Ue() {
  return this;
}
m2.prototype = D2.prototype = {
  constructor: m2,
  select: vn,
  selectAll: xn,
  selectChild: En,
  selectChildren: Cn,
  filter: qn,
  data: Hn,
  enter: Xn,
  exit: In,
  join: Ln,
  merge: Dn,
  selection: Ue,
  order: Bn,
  sort: Yn,
  call: zn,
  nodes: Un,
  node: Fn,
  size: Kn,
  empty: Wn,
  each: Gn,
  attr: re,
  style: ae,
  property: he,
  classed: de,
  text: _e,
  html: ke,
  raise: Ne,
  lower: $e,
  append: Se,
  insert: Ce,
  remove: Xe,
  clone: Te,
  datum: Re,
  on: De,
  dispatch: Ve,
  [Symbol.iterator]: ze
};
function $i(t19) {
  return typeof t19 == "string" ? new m2([[document.querySelector(t19)]], [document.documentElement]) : new m2([[t19]], Wt);
}
function dt2(t19, n33, e11) {
  t19.prototype = n33.prototype = e11, e11.constructor = t19;
}
function Gt(t19, n33) {
  var e11 = Object.create(t19.prototype);
  for (var r24 in n33)
    e11[r24] = n33[r24];
  return e11;
}
function B2() {
}
var H2 = 0.7;
var J2 = 1 / H2;
var M2 = "\\s*([+-]?\\d+)\\s*";
var j2 = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*";
var w2 = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*";
var Fe = /^#([0-9a-f]{3,8})$/;
var Ke = new RegExp(`^rgb\\(${M2},${M2},${M2}\\)$`);
var We = new RegExp(`^rgb\\(${w2},${w2},${w2}\\)$`);
var Ge = new RegExp(`^rgba\\(${M2},${M2},${M2},${j2}\\)$`);
var Je = new RegExp(`^rgba\\(${w2},${w2},${w2},${j2}\\)$`);
var Qe = new RegExp(`^hsl\\(${j2},${w2},${w2}\\)$`);
var Ze = new RegExp(`^hsla\\(${j2},${w2},${w2},${j2}\\)$`);
var kt = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
dt2(B2, I2, {
  copy(t19) {
    return Object.assign(new this.constructor(), this, t19);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: At2,
  // Deprecated! Use color.formatHex.
  formatHex: At2,
  formatHex8: tr,
  formatHsl: nr,
  formatRgb: Nt2,
  toString: Nt2
});
function At2() {
  return this.rgb().formatHex();
}
function tr() {
  return this.rgb().formatHex8();
}
function nr() {
  return Jt(this).formatHsl();
}
function Nt2() {
  return this.rgb().formatRgb();
}
function I2(t19) {
  var n33, e11;
  return t19 = (t19 + "").trim().toLowerCase(), (n33 = Fe.exec(t19)) ? (e11 = n33[1].length, n33 = parseInt(n33[1], 16), e11 === 6 ? Et2(n33) : e11 === 3 ? new y2(n33 >> 8 & 15 | n33 >> 4 & 240, n33 >> 4 & 15 | n33 & 240, (n33 & 15) << 4 | n33 & 15, 1) : e11 === 8 ? V2(n33 >> 24 & 255, n33 >> 16 & 255, n33 >> 8 & 255, (n33 & 255) / 255) : e11 === 4 ? V2(n33 >> 12 & 15 | n33 >> 8 & 240, n33 >> 8 & 15 | n33 >> 4 & 240, n33 >> 4 & 15 | n33 & 240, ((n33 & 15) << 4 | n33 & 15) / 255) : null) : (n33 = Ke.exec(t19)) ? new y2(n33[1], n33[2], n33[3], 1) : (n33 = We.exec(t19)) ? new y2(n33[1] * 255 / 100, n33[2] * 255 / 100, n33[3] * 255 / 100, 1) : (n33 = Ge.exec(t19)) ? V2(n33[1], n33[2], n33[3], n33[4]) : (n33 = Je.exec(t19)) ? V2(n33[1] * 255 / 100, n33[2] * 255 / 100, n33[3] * 255 / 100, n33[4]) : (n33 = Qe.exec(t19)) ? Mt2(n33[1], n33[2] / 100, n33[3] / 100, 1) : (n33 = Ze.exec(t19)) ? Mt2(n33[1], n33[2] / 100, n33[3] / 100, n33[4]) : kt.hasOwnProperty(t19) ? Et2(kt[t19]) : t19 === "transparent" ? new y2(NaN, NaN, NaN, 0) : null;
}
function Et2(t19) {
  return new y2(t19 >> 16 & 255, t19 >> 8 & 255, t19 & 255, 1);
}
function V2(t19, n33, e11, r24) {
  return r24 <= 0 && (t19 = n33 = e11 = NaN), new y2(t19, n33, e11, r24);
}
function er(t19) {
  return t19 instanceof B2 || (t19 = I2(t19)), t19 ? (t19 = t19.rgb(), new y2(t19.r, t19.g, t19.b, t19.opacity)) : new y2();
}
function st2(t19, n33, e11, r24) {
  return arguments.length === 1 ? er(t19) : new y2(t19, n33, e11, r24 ?? 1);
}
function y2(t19, n33, e11, r24) {
  this.r = +t19, this.g = +n33, this.b = +e11, this.opacity = +r24;
}
dt2(y2, st2, Gt(B2, {
  brighter(t19) {
    return t19 = t19 == null ? J2 : Math.pow(J2, t19), new y2(this.r * t19, this.g * t19, this.b * t19, this.opacity);
  },
  darker(t19) {
    return t19 = t19 == null ? H2 : Math.pow(H2, t19), new y2(this.r * t19, this.g * t19, this.b * t19, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new y2($(this.r), $(this.g), $(this.b), Q2(this.opacity));
  },
  displayable() {
    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: $t2,
  // Deprecated! Use color.formatHex.
  formatHex: $t2,
  formatHex8: rr,
  formatRgb: St2,
  toString: St2
}));
function $t2() {
  return `#${E2(this.r)}${E2(this.g)}${E2(this.b)}`;
}
function rr() {
  return `#${E2(this.r)}${E2(this.g)}${E2(this.b)}${E2((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}
function St2() {
  const t19 = Q2(this.opacity);
  return `${t19 === 1 ? "rgb(" : "rgba("}${$(this.r)}, ${$(this.g)}, ${$(this.b)}${t19 === 1 ? ")" : `, ${t19})`}`;
}
function Q2(t19) {
  return isNaN(t19) ? 1 : Math.max(0, Math.min(1, t19));
}
function $(t19) {
  return Math.max(0, Math.min(255, Math.round(t19) || 0));
}
function E2(t19) {
  return t19 = $(t19), (t19 < 16 ? "0" : "") + t19.toString(16);
}
function Mt2(t19, n33, e11, r24) {
  return r24 <= 0 ? t19 = n33 = e11 = NaN : e11 <= 0 || e11 >= 1 ? t19 = n33 = NaN : n33 <= 0 && (t19 = NaN), new v3(t19, n33, e11, r24);
}
function Jt(t19) {
  if (t19 instanceof v3)
    return new v3(t19.h, t19.s, t19.l, t19.opacity);
  if (t19 instanceof B2 || (t19 = I2(t19)), !t19)
    return new v3();
  if (t19 instanceof v3)
    return t19;
  t19 = t19.rgb();
  var n33 = t19.r / 255, e11 = t19.g / 255, r24 = t19.b / 255, i27 = Math.min(n33, e11, r24), o13 = Math.max(n33, e11, r24), u35 = NaN, a22 = o13 - i27, s18 = (o13 + i27) / 2;
  return a22 ? (n33 === o13 ? u35 = (e11 - r24) / a22 + (e11 < r24) * 6 : e11 === o13 ? u35 = (r24 - n33) / a22 + 2 : u35 = (n33 - e11) / a22 + 4, a22 /= s18 < 0.5 ? o13 + i27 : 2 - o13 - i27, u35 *= 60) : a22 = s18 > 0 && s18 < 1 ? 0 : u35, new v3(u35, a22, s18, t19.opacity);
}
function ir(t19, n33, e11, r24) {
  return arguments.length === 1 ? Jt(t19) : new v3(t19, n33, e11, r24 ?? 1);
}
function v3(t19, n33, e11, r24) {
  this.h = +t19, this.s = +n33, this.l = +e11, this.opacity = +r24;
}
dt2(v3, ir, Gt(B2, {
  brighter(t19) {
    return t19 = t19 == null ? J2 : Math.pow(J2, t19), new v3(this.h, this.s, this.l * t19, this.opacity);
  },
  darker(t19) {
    return t19 = t19 == null ? H2 : Math.pow(H2, t19), new v3(this.h, this.s, this.l * t19, this.opacity);
  },
  rgb() {
    var t19 = this.h % 360 + (this.h < 0) * 360, n33 = isNaN(t19) || isNaN(this.s) ? 0 : this.s, e11 = this.l, r24 = e11 + (e11 < 0.5 ? e11 : 1 - e11) * n33, i27 = 2 * e11 - r24;
    return new y2(
      ot2(t19 >= 240 ? t19 - 240 : t19 + 120, i27, r24),
      ot2(t19, i27, r24),
      ot2(t19 < 120 ? t19 + 240 : t19 - 120, i27, r24),
      this.opacity
    );
  },
  clamp() {
    return new v3(Ct2(this.h), z2(this.s), z2(this.l), Q2(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  },
  formatHsl() {
    const t19 = Q2(this.opacity);
    return `${t19 === 1 ? "hsl(" : "hsla("}${Ct2(this.h)}, ${z2(this.s) * 100}%, ${z2(this.l) * 100}%${t19 === 1 ? ")" : `, ${t19})`}`;
  }
}));
function Ct2(t19) {
  return t19 = (t19 || 0) % 360, t19 < 0 ? t19 + 360 : t19;
}
function z2(t19) {
  return Math.max(0, Math.min(1, t19 || 0));
}
function ot2(t19, n33, e11) {
  return (t19 < 60 ? n33 + (e11 - n33) * t19 / 60 : t19 < 180 ? e11 : t19 < 240 ? n33 + (e11 - n33) * (240 - t19) / 60 : n33) * 255;
}
var Qt = (t19) => () => t19;
function or(t19, n33) {
  return function(e11) {
    return t19 + e11 * n33;
  };
}
function ur(t19, n33, e11) {
  return t19 = Math.pow(t19, e11), n33 = Math.pow(n33, e11) - t19, e11 = 1 / e11, function(r24) {
    return Math.pow(t19 + r24 * n33, e11);
  };
}
function ar(t19) {
  return (t19 = +t19) == 1 ? Zt : function(n33, e11) {
    return e11 - n33 ? ur(n33, e11, t19) : Qt(isNaN(n33) ? e11 : n33);
  };
}
function Zt(t19, n33) {
  var e11 = n33 - t19;
  return e11 ? or(t19, e11) : Qt(isNaN(t19) ? n33 : t19);
}
var qt = function t(n33) {
  var e11 = ar(n33);
  function r24(i27, o13) {
    var u35 = e11((i27 = st2(i27)).r, (o13 = st2(o13)).r), a22 = e11(i27.g, o13.g), s18 = e11(i27.b, o13.b), l26 = Zt(i27.opacity, o13.opacity);
    return function(c27) {
      return i27.r = u35(c27), i27.g = a22(c27), i27.b = s18(c27), i27.opacity = l26(c27), i27 + "";
    };
  }
  return r24.gamma = t, r24;
}(1);
function A2(t19, n33) {
  return t19 = +t19, n33 = +n33, function(e11) {
    return t19 * (1 - e11) + n33 * e11;
  };
}
var lt2 = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
var ut2 = new RegExp(lt2.source, "g");
function sr(t19) {
  return function() {
    return t19;
  };
}
function lr(t19) {
  return function(n33) {
    return t19(n33) + "";
  };
}
function cr(t19, n33) {
  var e11 = lt2.lastIndex = ut2.lastIndex = 0, r24, i27, o13, u35 = -1, a22 = [], s18 = [];
  for (t19 = t19 + "", n33 = n33 + ""; (r24 = lt2.exec(t19)) && (i27 = ut2.exec(n33)); )
    (o13 = i27.index) > e11 && (o13 = n33.slice(e11, o13), a22[u35] ? a22[u35] += o13 : a22[++u35] = o13), (r24 = r24[0]) === (i27 = i27[0]) ? a22[u35] ? a22[u35] += i27 : a22[++u35] = i27 : (a22[++u35] = null, s18.push({ i: u35, x: A2(r24, i27) })), e11 = ut2.lastIndex;
  return e11 < n33.length && (o13 = n33.slice(e11), a22[u35] ? a22[u35] += o13 : a22[++u35] = o13), a22.length < 2 ? s18[0] ? lr(s18[0].x) : sr(n33) : (n33 = s18.length, function(l26) {
    for (var c27 = 0, h26; c27 < n33; ++c27)
      a22[(h26 = s18[c27]).i] = h26.x(l26);
    return a22.join("");
  });
}
var Xt = 180 / Math.PI;
var tn = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
function nn(t19, n33, e11, r24, i27, o13) {
  var u35, a22, s18;
  return (u35 = Math.sqrt(t19 * t19 + n33 * n33)) && (t19 /= u35, n33 /= u35), (s18 = t19 * e11 + n33 * r24) && (e11 -= t19 * s18, r24 -= n33 * s18), (a22 = Math.sqrt(e11 * e11 + r24 * r24)) && (e11 /= a22, r24 /= a22, s18 /= a22), t19 * r24 < n33 * e11 && (t19 = -t19, n33 = -n33, s18 = -s18, u35 = -u35), {
    translateX: i27,
    translateY: o13,
    rotate: Math.atan2(n33, t19) * Xt,
    skewX: Math.atan(s18) * Xt,
    scaleX: u35,
    scaleY: a22
  };
}
var U2;
function hr(t19) {
  const n33 = new (typeof DOMMatrix == "function" ? DOMMatrix : WebKitCSSMatrix)(t19 + "");
  return n33.isIdentity ? tn : nn(n33.a, n33.b, n33.c, n33.d, n33.e, n33.f);
}
function fr(t19) {
  return t19 == null || (U2 || (U2 = document.createElementNS("http://www.w3.org/2000/svg", "g")), U2.setAttribute("transform", t19), !(t19 = U2.transform.baseVal.consolidate())) ? tn : (t19 = t19.matrix, nn(t19.a, t19.b, t19.c, t19.d, t19.e, t19.f));
}
function en(t19, n33, e11, r24) {
  function i27(l26) {
    return l26.length ? l26.pop() + " " : "";
  }
  function o13(l26, c27, h26, f40, p26, g32) {
    if (l26 !== h26 || c27 !== f40) {
      var d34 = p26.push("translate(", null, n33, null, e11);
      g32.push({ i: d34 - 4, x: A2(l26, h26) }, { i: d34 - 2, x: A2(c27, f40) });
    } else
      (h26 || f40) && p26.push("translate(" + h26 + n33 + f40 + e11);
  }
  function u35(l26, c27, h26, f40) {
    l26 !== c27 ? (l26 - c27 > 180 ? c27 += 360 : c27 - l26 > 180 && (l26 += 360), f40.push({ i: h26.push(i27(h26) + "rotate(", null, r24) - 2, x: A2(l26, c27) })) : c27 && h26.push(i27(h26) + "rotate(" + c27 + r24);
  }
  function a22(l26, c27, h26, f40) {
    l26 !== c27 ? f40.push({ i: h26.push(i27(h26) + "skewX(", null, r24) - 2, x: A2(l26, c27) }) : c27 && h26.push(i27(h26) + "skewX(" + c27 + r24);
  }
  function s18(l26, c27, h26, f40, p26, g32) {
    if (l26 !== h26 || c27 !== f40) {
      var d34 = p26.push(i27(p26) + "scale(", null, ",", null, ")");
      g32.push({ i: d34 - 4, x: A2(l26, h26) }, { i: d34 - 2, x: A2(c27, f40) });
    } else
      (h26 !== 1 || f40 !== 1) && p26.push(i27(p26) + "scale(" + h26 + "," + f40 + ")");
  }
  return function(l26, c27) {
    var h26 = [], f40 = [];
    return l26 = t19(l26), c27 = t19(c27), o13(l26.translateX, l26.translateY, c27.translateX, c27.translateY, h26, f40), u35(l26.rotate, c27.rotate, h26, f40), a22(l26.skewX, c27.skewX, h26, f40), s18(l26.scaleX, l26.scaleY, c27.scaleX, c27.scaleY, h26, f40), l26 = c27 = null, function(p26) {
      for (var g32 = -1, d34 = f40.length, N22; ++g32 < d34; )
        h26[(N22 = f40[g32]).i] = N22.x(p26);
      return h26.join("");
    };
  };
}
var pr = en(hr, "px, ", "px)", "deg)");
var gr = en(fr, ", ", ")", ")");
var q2 = 0;
var O2 = 0;
var P2 = 0;
var rn = 1e3;
var Z2;
var T2;
var tt2 = 0;
var S2 = 0;
var rt2 = 0;
var L2 = typeof performance == "object" && performance.now ? performance : Date;
var on = typeof window == "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(t19) {
  setTimeout(t19, 17);
};
function yt2() {
  return S2 || (on(dr), S2 = L2.now() + rt2);
}
function dr() {
  S2 = 0;
}
function nt2() {
  this._call = this._time = this._next = null;
}
nt2.prototype = un.prototype = {
  constructor: nt2,
  restart: function(t19, n33, e11) {
    if (typeof t19 != "function")
      throw new TypeError("callback is not a function");
    e11 = (e11 == null ? yt2() : +e11) + (n33 == null ? 0 : +n33), !this._next && T2 !== this && (T2 ? T2._next = this : Z2 = this, T2 = this), this._call = t19, this._time = e11, ct2();
  },
  stop: function() {
    this._call && (this._call = null, this._time = 1 / 0, ct2());
  }
};
function un(t19, n33, e11) {
  var r24 = new nt2();
  return r24.restart(t19, n33, e11), r24;
}
function yr() {
  yt2(), ++q2;
  for (var t19 = Z2, n33; t19; )
    (n33 = S2 - t19._time) >= 0 && t19._call.call(void 0, n33), t19 = t19._next;
  --q2;
}
function Pt2() {
  S2 = (tt2 = L2.now()) + rt2, q2 = O2 = 0;
  try {
    yr();
  } finally {
    q2 = 0, vr(), S2 = 0;
  }
}
function mr() {
  var t19 = L2.now(), n33 = t19 - tt2;
  n33 > rn && (rt2 -= n33, tt2 = t19);
}
function vr() {
  for (var t19, n33 = Z2, e11, r24 = 1 / 0; n33; )
    n33._call ? (r24 > n33._time && (r24 = n33._time), t19 = n33, n33 = n33._next) : (e11 = n33._next, n33._next = null, n33 = t19 ? t19._next = e11 : Z2 = e11);
  T2 = t19, ct2(r24);
}
function ct2(t19) {
  if (!q2) {
    O2 && (O2 = clearTimeout(O2));
    var n33 = t19 - S2;
    n33 > 24 ? (t19 < 1 / 0 && (O2 = setTimeout(Pt2, t19 - L2.now() - rt2)), P2 && (P2 = clearInterval(P2))) : (P2 || (tt2 = L2.now(), P2 = setInterval(mr, rn)), q2 = 1, on(Pt2));
  }
}
function Ot2(t19, n33, e11) {
  var r24 = new nt2();
  return n33 = n33 == null ? 0 : +n33, r24.restart((i27) => {
    r24.stop(), t19(i27 + n33);
  }, n33, e11), r24;
}
var _r = Ht2("start", "end", "cancel", "interrupt");
var wr = [];
var an = 0;
var Tt2 = 1;
var ht2 = 2;
var K2 = 3;
var Rt2 = 4;
var ft2 = 5;
var W2 = 6;
function it2(t19, n33, e11, r24, i27, o13) {
  var u35 = t19.__transition;
  if (!u35)
    t19.__transition = {};
  else if (e11 in u35)
    return;
  br(t19, e11, {
    name: n33,
    index: r24,
    // For context during callback.
    group: i27,
    // For context during callback.
    on: _r,
    tween: wr,
    time: o13.time,
    delay: o13.delay,
    duration: o13.duration,
    ease: o13.ease,
    timer: null,
    state: an
  });
}
function mt2(t19, n33) {
  var e11 = _(t19, n33);
  if (e11.state > an)
    throw new Error("too late; already scheduled");
  return e11;
}
function b3(t19, n33) {
  var e11 = _(t19, n33);
  if (e11.state > K2)
    throw new Error("too late; already running");
  return e11;
}
function _(t19, n33) {
  var e11 = t19.__transition;
  if (!e11 || !(e11 = e11[n33]))
    throw new Error("transition not found");
  return e11;
}
function br(t19, n33, e11) {
  var r24 = t19.__transition, i27;
  r24[n33] = e11, e11.timer = un(o13, 0, e11.time);
  function o13(l26) {
    e11.state = Tt2, e11.timer.restart(u35, e11.delay, e11.time), e11.delay <= l26 && u35(l26 - e11.delay);
  }
  function u35(l26) {
    var c27, h26, f40, p26;
    if (e11.state !== Tt2)
      return s18();
    for (c27 in r24)
      if (p26 = r24[c27], p26.name === e11.name) {
        if (p26.state === K2)
          return Ot2(u35);
        p26.state === Rt2 ? (p26.state = W2, p26.timer.stop(), p26.on.call("interrupt", t19, t19.__data__, p26.index, p26.group), delete r24[c27]) : +c27 < n33 && (p26.state = W2, p26.timer.stop(), p26.on.call("cancel", t19, t19.__data__, p26.index, p26.group), delete r24[c27]);
      }
    if (Ot2(function() {
      e11.state === K2 && (e11.state = Rt2, e11.timer.restart(a22, e11.delay, e11.time), a22(l26));
    }), e11.state = ht2, e11.on.call("start", t19, t19.__data__, e11.index, e11.group), e11.state === ht2) {
      for (e11.state = K2, i27 = new Array(f40 = e11.tween.length), c27 = 0, h26 = -1; c27 < f40; ++c27)
        (p26 = e11.tween[c27].value.call(t19, t19.__data__, e11.index, e11.group)) && (i27[++h26] = p26);
      i27.length = h26 + 1;
    }
  }
  function a22(l26) {
    for (var c27 = l26 < e11.duration ? e11.ease.call(null, l26 / e11.duration) : (e11.timer.restart(s18), e11.state = ft2, 1), h26 = -1, f40 = i27.length; ++h26 < f40; )
      i27[h26].call(t19, c27);
    e11.state === ft2 && (e11.on.call("end", t19, t19.__data__, e11.index, e11.group), s18());
  }
  function s18() {
    e11.state = W2, e11.timer.stop(), delete r24[n33];
    for (var l26 in r24)
      return;
    delete t19.__transition;
  }
}
function xr(t19, n33) {
  var e11 = t19.__transition, r24, i27, o13 = true, u35;
  if (e11) {
    n33 = n33 == null ? null : n33 + "";
    for (u35 in e11) {
      if ((r24 = e11[u35]).name !== n33) {
        o13 = false;
        continue;
      }
      i27 = r24.state > ht2 && r24.state < ft2, r24.state = W2, r24.timer.stop(), r24.on.call(i27 ? "interrupt" : "cancel", t19, t19.__data__, r24.index, r24.group), delete e11[u35];
    }
    o13 && delete t19.__transition;
  }
}
function kr(t19) {
  return this.each(function() {
    xr(this, t19);
  });
}
function Ar(t19, n33) {
  var e11, r24;
  return function() {
    var i27 = b3(this, t19), o13 = i27.tween;
    if (o13 !== e11) {
      r24 = e11 = o13;
      for (var u35 = 0, a22 = r24.length; u35 < a22; ++u35)
        if (r24[u35].name === n33) {
          r24 = r24.slice(), r24.splice(u35, 1);
          break;
        }
    }
    i27.tween = r24;
  };
}
function Nr(t19, n33, e11) {
  var r24, i27;
  if (typeof e11 != "function")
    throw new Error();
  return function() {
    var o13 = b3(this, t19), u35 = o13.tween;
    if (u35 !== r24) {
      i27 = (r24 = u35).slice();
      for (var a22 = { name: n33, value: e11 }, s18 = 0, l26 = i27.length; s18 < l26; ++s18)
        if (i27[s18].name === n33) {
          i27[s18] = a22;
          break;
        }
      s18 === l26 && i27.push(a22);
    }
    o13.tween = i27;
  };
}
function Er(t19, n33) {
  var e11 = this._id;
  if (t19 += "", arguments.length < 2) {
    for (var r24 = _(this.node(), e11).tween, i27 = 0, o13 = r24.length, u35; i27 < o13; ++i27)
      if ((u35 = r24[i27]).name === t19)
        return u35.value;
    return null;
  }
  return this.each((n33 == null ? Ar : Nr)(e11, t19, n33));
}
function vt2(t19, n33, e11) {
  var r24 = t19._id;
  return t19.each(function() {
    var i27 = b3(this, r24);
    (i27.value || (i27.value = {}))[n33] = e11.apply(this, arguments);
  }), function(i27) {
    return _(i27, r24).value[n33];
  };
}
function sn(t19, n33) {
  var e11;
  return (typeof n33 == "number" ? A2 : n33 instanceof I2 ? qt : (e11 = I2(n33)) ? (n33 = e11, qt) : cr)(t19, n33);
}
function $r(t19) {
  return function() {
    this.removeAttribute(t19);
  };
}
function Sr(t19) {
  return function() {
    this.removeAttributeNS(t19.space, t19.local);
  };
}
function Mr(t19, n33, e11) {
  var r24, i27 = e11 + "", o13;
  return function() {
    var u35 = this.getAttribute(t19);
    return u35 === i27 ? null : u35 === r24 ? o13 : o13 = n33(r24 = u35, e11);
  };
}
function Cr(t19, n33, e11) {
  var r24, i27 = e11 + "", o13;
  return function() {
    var u35 = this.getAttributeNS(t19.space, t19.local);
    return u35 === i27 ? null : u35 === r24 ? o13 : o13 = n33(r24 = u35, e11);
  };
}
function qr(t19, n33, e11) {
  var r24, i27, o13;
  return function() {
    var u35, a22 = e11(this), s18;
    return a22 == null ? void this.removeAttribute(t19) : (u35 = this.getAttribute(t19), s18 = a22 + "", u35 === s18 ? null : u35 === r24 && s18 === i27 ? o13 : (i27 = s18, o13 = n33(r24 = u35, a22)));
  };
}
function Xr(t19, n33, e11) {
  var r24, i27, o13;
  return function() {
    var u35, a22 = e11(this), s18;
    return a22 == null ? void this.removeAttributeNS(t19.space, t19.local) : (u35 = this.getAttributeNS(t19.space, t19.local), s18 = a22 + "", u35 === s18 ? null : u35 === r24 && s18 === i27 ? o13 : (i27 = s18, o13 = n33(r24 = u35, a22)));
  };
}
function Pr(t19, n33) {
  var e11 = et2(t19), r24 = e11 === "transform" ? gr : sn;
  return this.attrTween(t19, typeof n33 == "function" ? (e11.local ? Xr : qr)(e11, r24, vt2(this, "attr." + t19, n33)) : n33 == null ? (e11.local ? Sr : $r)(e11) : (e11.local ? Cr : Mr)(e11, r24, n33));
}
function Or(t19, n33) {
  return function(e11) {
    this.setAttribute(t19, n33.call(this, e11));
  };
}
function Tr(t19, n33) {
  return function(e11) {
    this.setAttributeNS(t19.space, t19.local, n33.call(this, e11));
  };
}
function Rr(t19, n33) {
  var e11, r24;
  function i27() {
    var o13 = n33.apply(this, arguments);
    return o13 !== r24 && (e11 = (r24 = o13) && Tr(t19, o13)), e11;
  }
  return i27._value = n33, i27;
}
function Hr(t19, n33) {
  var e11, r24;
  function i27() {
    var o13 = n33.apply(this, arguments);
    return o13 !== r24 && (e11 = (r24 = o13) && Or(t19, o13)), e11;
  }
  return i27._value = n33, i27;
}
function jr(t19, n33) {
  var e11 = "attr." + t19;
  if (arguments.length < 2)
    return (e11 = this.tween(e11)) && e11._value;
  if (n33 == null)
    return this.tween(e11, null);
  if (typeof n33 != "function")
    throw new Error();
  var r24 = et2(t19);
  return this.tween(e11, (r24.local ? Rr : Hr)(r24, n33));
}
function Ir(t19, n33) {
  return function() {
    mt2(this, t19).delay = +n33.apply(this, arguments);
  };
}
function Lr(t19, n33) {
  return n33 = +n33, function() {
    mt2(this, t19).delay = n33;
  };
}
function Dr(t19) {
  var n33 = this._id;
  return arguments.length ? this.each((typeof t19 == "function" ? Ir : Lr)(n33, t19)) : _(this.node(), n33).delay;
}
function Br(t19, n33) {
  return function() {
    b3(this, t19).duration = +n33.apply(this, arguments);
  };
}
function Yr(t19, n33) {
  return n33 = +n33, function() {
    b3(this, t19).duration = n33;
  };
}
function Vr(t19) {
  var n33 = this._id;
  return arguments.length ? this.each((typeof t19 == "function" ? Br : Yr)(n33, t19)) : _(this.node(), n33).duration;
}
function zr(t19, n33) {
  if (typeof n33 != "function")
    throw new Error();
  return function() {
    b3(this, t19).ease = n33;
  };
}
function Ur(t19) {
  var n33 = this._id;
  return arguments.length ? this.each(zr(n33, t19)) : _(this.node(), n33).ease;
}
function Fr(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    if (typeof e11 != "function")
      throw new Error();
    b3(this, t19).ease = e11;
  };
}
function Kr(t19) {
  if (typeof t19 != "function")
    throw new Error();
  return this.each(Fr(this._id, t19));
}
function Wr(t19) {
  typeof t19 != "function" && (t19 = Lt(t19));
  for (var n33 = this._groups, e11 = n33.length, r24 = new Array(e11), i27 = 0; i27 < e11; ++i27)
    for (var o13 = n33[i27], u35 = o13.length, a22 = r24[i27] = [], s18, l26 = 0; l26 < u35; ++l26)
      (s18 = o13[l26]) && t19.call(s18, s18.__data__, l26, o13) && a22.push(s18);
  return new k2(r24, this._parents, this._name, this._id);
}
function Gr(t19) {
  if (t19._id !== this._id)
    throw new Error();
  for (var n33 = this._groups, e11 = t19._groups, r24 = n33.length, i27 = e11.length, o13 = Math.min(r24, i27), u35 = new Array(r24), a22 = 0; a22 < o13; ++a22)
    for (var s18 = n33[a22], l26 = e11[a22], c27 = s18.length, h26 = u35[a22] = new Array(c27), f40, p26 = 0; p26 < c27; ++p26)
      (f40 = s18[p26] || l26[p26]) && (h26[p26] = f40);
  for (; a22 < r24; ++a22)
    u35[a22] = n33[a22];
  return new k2(u35, this._parents, this._name, this._id);
}
function Jr(t19) {
  return (t19 + "").trim().split(/^|\s+/).every(function(n33) {
    var e11 = n33.indexOf(".");
    return e11 >= 0 && (n33 = n33.slice(0, e11)), !n33 || n33 === "start";
  });
}
function Qr(t19, n33, e11) {
  var r24, i27, o13 = Jr(n33) ? mt2 : b3;
  return function() {
    var u35 = o13(this, t19), a22 = u35.on;
    a22 !== r24 && (i27 = (r24 = a22).copy()).on(n33, e11), u35.on = i27;
  };
}
function Zr(t19, n33) {
  var e11 = this._id;
  return arguments.length < 2 ? _(this.node(), e11).on.on(t19) : this.each(Qr(e11, t19, n33));
}
function ti(t19) {
  return function() {
    var n33 = this.parentNode;
    for (var e11 in this.__transition)
      if (+e11 !== t19)
        return;
    n33 && n33.removeChild(this);
  };
}
function ni() {
  return this.on("end.remove", ti(this._id));
}
function ei(t19) {
  var n33 = this._name, e11 = this._id;
  typeof t19 != "function" && (t19 = pt2(t19));
  for (var r24 = this._groups, i27 = r24.length, o13 = new Array(i27), u35 = 0; u35 < i27; ++u35)
    for (var a22 = r24[u35], s18 = a22.length, l26 = o13[u35] = new Array(s18), c27, h26, f40 = 0; f40 < s18; ++f40)
      (c27 = a22[f40]) && (h26 = t19.call(c27, c27.__data__, f40, a22)) && ("__data__" in c27 && (h26.__data__ = c27.__data__), l26[f40] = h26, it2(l26[f40], n33, e11, f40, l26, _(c27, e11)));
  return new k2(o13, this._parents, n33, e11);
}
function ri(t19) {
  var n33 = this._name, e11 = this._id;
  typeof t19 != "function" && (t19 = It(t19));
  for (var r24 = this._groups, i27 = r24.length, o13 = [], u35 = [], a22 = 0; a22 < i27; ++a22)
    for (var s18 = r24[a22], l26 = s18.length, c27, h26 = 0; h26 < l26; ++h26)
      if (c27 = s18[h26]) {
        for (var f40 = t19.call(c27, c27.__data__, h26, s18), p26, g32 = _(c27, e11), d34 = 0, N22 = f40.length; d34 < N22; ++d34)
          (p26 = f40[d34]) && it2(p26, n33, e11, d34, f40, g32);
        o13.push(f40), u35.push(c27);
      }
  return new k2(o13, u35, n33, e11);
}
var ii = D2.prototype.constructor;
function oi() {
  return new ii(this._groups, this._parents);
}
function ui(t19, n33) {
  var e11, r24, i27;
  return function() {
    var o13 = C2(this, t19), u35 = (this.style.removeProperty(t19), C2(this, t19));
    return o13 === u35 ? null : o13 === e11 && u35 === r24 ? i27 : i27 = n33(e11 = o13, r24 = u35);
  };
}
function ln(t19) {
  return function() {
    this.style.removeProperty(t19);
  };
}
function ai(t19, n33, e11) {
  var r24, i27 = e11 + "", o13;
  return function() {
    var u35 = C2(this, t19);
    return u35 === i27 ? null : u35 === r24 ? o13 : o13 = n33(r24 = u35, e11);
  };
}
function si(t19, n33, e11) {
  var r24, i27, o13;
  return function() {
    var u35 = C2(this, t19), a22 = e11(this), s18 = a22 + "";
    return a22 == null && (s18 = a22 = (this.style.removeProperty(t19), C2(this, t19))), u35 === s18 ? null : u35 === r24 && s18 === i27 ? o13 : (i27 = s18, o13 = n33(r24 = u35, a22));
  };
}
function li(t19, n33) {
  var e11, r24, i27, o13 = "style." + n33, u35 = "end." + o13, a22;
  return function() {
    var s18 = b3(this, t19), l26 = s18.on, c27 = s18.value[o13] == null ? a22 || (a22 = ln(n33)) : void 0;
    (l26 !== e11 || i27 !== c27) && (r24 = (e11 = l26).copy()).on(u35, i27 = c27), s18.on = r24;
  };
}
function ci(t19, n33, e11) {
  var r24 = (t19 += "") == "transform" ? pr : sn;
  return n33 == null ? this.styleTween(t19, ui(t19, r24)).on("end.style." + t19, ln(t19)) : typeof n33 == "function" ? this.styleTween(t19, si(t19, r24, vt2(this, "style." + t19, n33))).each(li(this._id, t19)) : this.styleTween(t19, ai(t19, r24, n33), e11).on("end.style." + t19, null);
}
function hi(t19, n33, e11) {
  return function(r24) {
    this.style.setProperty(t19, n33.call(this, r24), e11);
  };
}
function fi(t19, n33, e11) {
  var r24, i27;
  function o13() {
    var u35 = n33.apply(this, arguments);
    return u35 !== i27 && (r24 = (i27 = u35) && hi(t19, u35, e11)), r24;
  }
  return o13._value = n33, o13;
}
function pi(t19, n33, e11) {
  var r24 = "style." + (t19 += "");
  if (arguments.length < 2)
    return (r24 = this.tween(r24)) && r24._value;
  if (n33 == null)
    return this.tween(r24, null);
  if (typeof n33 != "function")
    throw new Error();
  return this.tween(r24, fi(t19, n33, e11 ?? ""));
}
function gi(t19) {
  return function() {
    this.textContent = t19;
  };
}
function di(t19) {
  return function() {
    var n33 = t19(this);
    this.textContent = n33 ?? "";
  };
}
function yi(t19) {
  return this.tween("text", typeof t19 == "function" ? di(vt2(this, "text", t19)) : gi(t19 == null ? "" : t19 + ""));
}
function mi(t19) {
  return function(n33) {
    this.textContent = t19.call(this, n33);
  };
}
function vi(t19) {
  var n33, e11;
  function r24() {
    var i27 = t19.apply(this, arguments);
    return i27 !== e11 && (n33 = (e11 = i27) && mi(i27)), n33;
  }
  return r24._value = t19, r24;
}
function _i(t19) {
  var n33 = "text";
  if (arguments.length < 1)
    return (n33 = this.tween(n33)) && n33._value;
  if (t19 == null)
    return this.tween(n33, null);
  if (typeof t19 != "function")
    throw new Error();
  return this.tween(n33, vi(t19));
}
function wi() {
  for (var t19 = this._name, n33 = this._id, e11 = cn(), r24 = this._groups, i27 = r24.length, o13 = 0; o13 < i27; ++o13)
    for (var u35 = r24[o13], a22 = u35.length, s18, l26 = 0; l26 < a22; ++l26)
      if (s18 = u35[l26]) {
        var c27 = _(s18, n33);
        it2(s18, t19, e11, l26, u35, {
          time: c27.time + c27.delay + c27.duration,
          delay: 0,
          duration: c27.duration,
          ease: c27.ease
        });
      }
  return new k2(r24, this._parents, t19, e11);
}
function bi() {
  var t19, n33, e11 = this, r24 = e11._id, i27 = e11.size();
  return new Promise(function(o13, u35) {
    var a22 = { value: u35 }, s18 = { value: function() {
      --i27 === 0 && o13();
    } };
    e11.each(function() {
      var l26 = b3(this, r24), c27 = l26.on;
      c27 !== t19 && (n33 = (t19 = c27).copy(), n33._.cancel.push(a22), n33._.interrupt.push(a22), n33._.end.push(s18)), l26.on = n33;
    }), i27 === 0 && o13();
  });
}
var xi = 0;
function k2(t19, n33, e11, r24) {
  this._groups = t19, this._parents = n33, this._name = e11, this._id = r24;
}
function cn() {
  return ++xi;
}
var x2 = D2.prototype;
k2.prototype = {
  constructor: k2,
  select: ei,
  selectAll: ri,
  selectChild: x2.selectChild,
  selectChildren: x2.selectChildren,
  filter: Wr,
  merge: Gr,
  selection: oi,
  transition: wi,
  call: x2.call,
  nodes: x2.nodes,
  node: x2.node,
  size: x2.size,
  empty: x2.empty,
  each: x2.each,
  on: Zr,
  attr: Pr,
  attrTween: jr,
  style: ci,
  styleTween: pi,
  text: yi,
  textTween: _i,
  remove: ni,
  tween: Er,
  delay: Dr,
  duration: Vr,
  ease: Ur,
  easeVarying: Kr,
  end: bi,
  [Symbol.iterator]: x2[Symbol.iterator]
};
function ki(t19) {
  return ((t19 *= 2) <= 1 ? t19 * t19 * t19 : (t19 -= 2) * t19 * t19 + 2) / 2;
}
var Ai = {
  time: null,
  // Set on use.
  delay: 0,
  duration: 250,
  ease: ki
};
function Ni(t19, n33) {
  for (var e11; !(e11 = t19.__transition) || !(e11 = e11[n33]); )
    if (!(t19 = t19.parentNode))
      throw new Error(`transition ${n33} not found`);
  return e11;
}
function Ei(t19) {
  var n33, e11;
  t19 instanceof k2 ? (n33 = t19._id, t19 = t19._name) : (n33 = cn(), (e11 = Ai).time = yt2(), t19 = t19 == null ? null : t19 + "");
  for (var r24 = this._groups, i27 = r24.length, o13 = 0; o13 < i27; ++o13)
    for (var u35 = r24[o13], a22 = u35.length, s18, l26 = 0; l26 < a22; ++l26)
      (s18 = u35[l26]) && it2(s18, t19, n33, l26, u35, e11 || Ni(s18, n33));
  return new k2(r24, this._parents, t19, n33);
}
D2.prototype.interrupt = kr;
D2.prototype.transition = Ei;
function R2(t19, n33, e11) {
  this.k = t19, this.x = n33, this.y = e11;
}
R2.prototype = {
  constructor: R2,
  scale: function(t19) {
    return t19 === 1 ? this : new R2(this.k * t19, this.x, this.y);
  },
  translate: function(t19, n33) {
    return t19 === 0 & n33 === 0 ? this : new R2(this.k, this.x + this.k * t19, this.y + this.k * n33);
  },
  apply: function(t19) {
    return [t19[0] * this.k + this.x, t19[1] * this.k + this.y];
  },
  applyX: function(t19) {
    return t19 * this.k + this.x;
  },
  applyY: function(t19) {
    return t19 * this.k + this.y;
  },
  invert: function(t19) {
    return [(t19[0] - this.x) / this.k, (t19[1] - this.y) / this.k];
  },
  invertX: function(t19) {
    return (t19 - this.x) / this.k;
  },
  invertY: function(t19) {
    return (t19 - this.y) / this.k;
  },
  rescaleX: function(t19) {
    return t19.copy().domain(t19.range().map(this.invertX, this).map(t19.invert, t19));
  },
  rescaleY: function(t19) {
    return t19.copy().domain(t19.range().map(this.invertY, this).map(t19.invert, t19));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};
R2.prototype;

// node_modules/@frc-web-components/react/dist/axis.es-29b40501.js
var T3 = Object.defineProperty;
var s = (d34, o13, l26, p26) => {
  for (var t19 = void 0, h26 = d34.length - 1, a22; h26 >= 0; h26--)
    (a22 = d34[h26]) && (t19 = a22(o13, l26, t19) || t19);
  return t19 && T3(o13, l26, t19), t19;
};
var f2 = class extends x {
  constructor() {
    super(...arguments), this.vertical = false, this.ticks = 5, this.min = -1, this.max = 1, this.unit = "", this.prevSize = 0, this.prevTicks = 0, this.prevMin = null, this.prevMax = null;
  }
  setAxis(o13) {
    var l26;
    const p26 = this.vertical ? this.clientHeight : this.clientWidth, t19 = p26 / Math.max(1, this.ticks - 1), h26 = 30, { min: a22, max: c27 } = this;
    let y34 = -1 / 0, m34 = -1 / 0;
    if (this.prevSize === p26 && this.prevTicks === this.ticks && this.prevMin === a22 && this.prevMax === c27 && !o13.has("unit") && !o13.has("vertical"))
      return;
    this.prevSize = p26, this.prevTicks = this.ticks, this.prevMin = a22, this.prevMax = c27, this.svg.innerHTML = "";
    const n33 = $i(this.svg).attr("width", this.vertical ? h26 : p26).attr("height", this.vertical ? p26 : h26);
    for (let i27 = 0; i27 < this.ticks; i27 += 1) {
      if (this.vertical ? n33.append("line").attr("x1", 0).attr("y1", i27 * t19).attr("x2", 8).attr("y2", i27 * t19) : n33.append("line").attr("x1", i27 * t19).attr("y1", 0).attr("x2", i27 * t19).attr("y2", 8), this.vertical) {
        const r24 = a22 + i27 * (c27 - a22) / Math.max(this.ticks - 1, 1);
        n33.append("text").attr("x", -3).attr("y", i27 * t19 + 4).attr("text-anchor", "end").text(r24.toFixed(2) + (this.unit ? ` ${this.unit}` : ""));
      } else {
        const r24 = (i27 - y34) * t19, u35 = y34 * t19 + r24 * 0.4;
        if (m34 < 0 || u35 > m34) {
          const g32 = a22 + i27 * (c27 - a22) / Math.max(this.ticks - 1, 1), k29 = n33.append("text").attr("x", i27 * t19).attr("y", 25).attr("text-anchor", "middle").text(g32.toFixed(2) + (this.unit ? ` ${this.unit}` : ""));
          m34 = i27 * t19 + (((l26 = k29.node()) == null ? void 0 : l26.getBBox().width) ?? 0) / 2, y34 = i27;
        }
      }
      if (i27 < this.ticks - 1)
        for (let r24 = 1; r24 < 4; r24 += 1)
          this.vertical ? n33.append("line").attr("x1", 4).attr("y1", i27 * t19 + r24 * t19 / 4).attr("x2", 8).attr("y2", i27 * t19 + r24 * t19 / 4) : n33.append("line").attr("x1", i27 * t19 + r24 * t19 / 4).attr("y1", 0).attr("x2", i27 * t19 + r24 * t19 / 4).attr("y2", 4);
    }
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.requestUpdate();
    }).observe(this);
  }
  updated(o13) {
    this.setAxis(o13);
  }
  render() {
    return Ht` <svg id="svg"></svg> `;
  }
};
f2.styles = Mt`
    :host {
      display: inline-block;
      position: relative;
    }

    :host([vertical]) {
      height: 100%;
    }

    :host(:not([vertical])) {
      width: 100%;
    }

    svg {
      overflow: visible;
      position: absolute;
      top: 0;
      left: 0;
    }

    line {
      stroke: rgb(150, 150, 150);
      stroke-width: 2;
    }

    text {
      font-weight: normal;
      font-size: 13px;
      fill: var(--frc-axis-text-color, #000);
    }
  `;
var e = f2;
s([
  Rt({ type: Boolean })
], e.prototype, "vertical");
s([
  Rt({ type: Number })
], e.prototype, "ticks");
s([
  Rt({ type: Number })
], e.prototype, "min");
s([
  Rt({ type: Number })
], e.prototype, "max");
s([
  Rt({ type: String })
], e.prototype, "unit");
s([
  n()
], e.prototype, "prevSize");
s([
  n()
], e.prototype, "prevTicks");
s([
  n()
], e.prototype, "prevMin");
s([
  n()
], e.prototype, "prevMax");
s([
  a("#svg")
], e.prototype, "svg");
customElements.get("frc-axis") || customElements.define("frc-axis", e);

// node_modules/@frc-web-components/react/dist/number-bar.es-14bfc169.js
var x3 = Object.defineProperty;
var i2 = (n33, r24, a22, y34) => {
  for (var s18 = void 0, o13 = n33.length - 1, p26; o13 >= 0; o13--)
    (p26 = n33[o13]) && (s18 = p26(r24, a22, s18) || s18);
  return s18 && x3(r24, a22, s18), s18;
};
function b4(n33, r24, a22) {
  return Math.min(a22, Math.max(n33, r24));
}
var h2 = class extends x {
  constructor() {
    super(...arguments), this.value = 0, this.min = -1, this.max = 1, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "";
  }
  render() {
    const r24 = Math.min(this.min, this.max), a22 = Math.max(this.min, this.max);
    return Ht`
      <frc-bar
        value="${this.value}"
        min="${r24}"
        max="${a22}"
        center="${this.center}"
        part="bar"
      >
        ${this.hideText ? "" : Ht`
              ${this.value.toFixed(b4(this.precision, 0, 100))} ${this.unit}
            `}
      </frc-bar>
      ${this.numTickMarks > 0 ? Ht`
            <frc-axis
              part="axis"
              ticks="${this.numTickMarks}"
              min=${r24}
              max=${a22}
              unit="${this.unit}"
            ></frc-axis>
          ` : ""}
    `;
  }
};
h2.styles = [
  Mt`
      :host {
        display: inline-block;
        width: 300px;
        height: auto;
        font-family: sans-serif;
      }

      [part='bar'] {
        width: 100%;
        margin: 0;
      }

      [part='bar'] {
        position: relative;
        height: 20px;
        border-radius: 3px;
      }

      [part='axis'] {
        width: calc(100% - 45px);
        margin: 2px auto 0;
        display: block;
      }
    `
];
var t2 = h2;
i2([
  Rt({ type: Number })
], t2.prototype, "value");
i2([
  Rt({ type: Number })
], t2.prototype, "min");
i2([
  Rt({ type: Number })
], t2.prototype, "max");
i2([
  Rt({ type: Number })
], t2.prototype, "center");
i2([
  Rt({ type: Number })
], t2.prototype, "precision");
i2([
  Rt({ type: Boolean, attribute: "hide-text" })
], t2.prototype, "hideText");
i2([
  Rt({ type: Number, attribute: "num-tick-marks" })
], t2.prototype, "numTickMarks");
i2([
  Rt({ type: String })
], t2.prototype, "unit");
customElements.get("frc-number-bar") || customElements.define("frc-number-bar", t2);

// node_modules/@frc-web-components/react/dist/accelerometer.es-1e0be328.js
var u2 = Object.defineProperty;
var r = (p26, m34, s18, y34) => {
  for (var o13 = void 0, i27 = p26.length - 1, n33; i27 >= 0; i27--)
    (n33 = p26[i27]) && (o13 = n33(m34, s18, o13) || o13);
  return o13 && u2(m34, s18, o13), o13;
};
var t3 = class extends t2 {
  constructor() {
    super(...arguments), this.value = 0, this.min = -1, this.max = 1, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "g";
  }
};
r([
  Rt({ type: Number })
], t3.prototype, "value");
r([
  Rt({ type: Number })
], t3.prototype, "min");
r([
  Rt({ type: Number })
], t3.prototype, "max");
r([
  Rt({ type: Number })
], t3.prototype, "center");
r([
  Rt({ type: Number })
], t3.prototype, "precision");
r([
  Rt({ type: Boolean, attribute: "hide-text" })
], t3.prototype, "hideText");
r([
  Rt({ type: Number, attribute: "num-tick-marks" })
], t3.prototype, "numTickMarks");
r([
  Rt({ type: String })
], t3.prototype, "unit");
customElements.get("frc-accelerometer") || customElements.define("frc-accelerometer", t3);

// node_modules/@frc-web-components/react/dist/components/3AxisAccelerometer.es.js
var x4 = Object.defineProperty;
var r2 = (m34, i27, c27, y34) => {
  for (var o13 = void 0, a22 = m34.length - 1, s18; a22 >= 0; a22--)
    (s18 = m34[a22]) && (o13 = s18(i27, c27, o13) || o13);
  return o13 && x4(i27, c27, o13), o13;
};
var n3 = class extends x {
  constructor() {
    super(...arguments), this.x = 0, this.y = 0, this.z = 0, this.min = -1, this.max = 1, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "g";
  }
  renderAccelerometer(i27, c27) {
    return Ht`
      <div part="accelerometer">
        <label part="label">${i27}</label>
        <frc-accelerometer
          part="${i27}"
          value="${this[i27] || 0}"
          min="${this.min}"
          max="${this.max}"
          center="${this.center}"
          precision="${this.precision}"
          ?hide-text="${this.hideText}"
          num-tick-marks="${c27}"
          unit="${this.unit}"
        ></frc-accelerometer>
      </div>
    `;
  }
  render() {
    return Ht`
      ${this.renderAccelerometer("x", 0)} ${this.renderAccelerometer("y", 0)}
      ${this.renderAccelerometer("z", this.numTickMarks)}
    `;
  }
};
n3.styles = Mt`
    :host {
      display: inline-flex;
      flex-direction: column;
      height: auto;
      font-family: sans-serif;
      width: 300px;
    }

    [part='accelerometer'] {
      width: 100%;
      display: flex;
      gap: 8px;
      align-items: center;
      margin-bottom: 10px;
    }

    [part='accelerometer']:last-child {
      margin-bottom: 0;
    }

    [part='accelerometer'] label {
      width: 10px;
      padding-top: 2px;
      font-weight: bold;
      text-transform: uppercase;
      color: var(--frc-3-axis-accelerometer-label-color, #000);
    }

    frc-accelerometer {
      width: 100%;
      flex: 1;
    }

    frc-accelerometer::part(bar) {
      width: 100%;
      margin: 0;
    }
  `;
var e2 = n3;
r2([
  Rt({ type: Number })
], e2.prototype, "x");
r2([
  Rt({ type: Number })
], e2.prototype, "y");
r2([
  Rt({ type: Number })
], e2.prototype, "z");
r2([
  Rt({ type: Number })
], e2.prototype, "min");
r2([
  Rt({ type: Number })
], e2.prototype, "max");
r2([
  Rt({ type: Number })
], e2.prototype, "center");
r2([
  Rt({ type: Number })
], e2.prototype, "precision");
r2([
  Rt({ type: Boolean, attribute: "hide-text" })
], e2.prototype, "hideText");
r2([
  Rt({ type: Number, attribute: "num-tick-marks" })
], e2.prototype, "numTickMarks");
r2([
  Rt({ type: String })
], e2.prototype, "unit");
customElements.get("frc-3-axis-accelerometer") || customElements.define("frc-3-axis-accelerometer", e2);
var M3 = xt({
  tagName: "frc-3-axis-accelerometer",
  elementClass: e2,
  react: import_react.default
});

// node_modules/@frc-web-components/react/dist/components/Accelerometer.es.js
var import_react2 = __toESM(require_react(), 1);
var n4 = xt({
  tagName: "frc-accelerometer",
  elementClass: t3,
  react: import_react2.default
});

// node_modules/@frc-web-components/react/dist/components/Axis.es.js
var import_react3 = __toESM(require_react(), 1);
var f3 = xt({
  tagName: "frc-axis",
  elementClass: e,
  react: import_react3.default
});

// node_modules/@frc-web-components/react/dist/components/Bar.es.js
var import_react4 = __toESM(require_react(), 1);
var i3 = xt({
  tagName: "frc-bar",
  elementClass: n2,
  react: import_react4.default
});

// node_modules/@frc-web-components/react/dist/components/BasicFmsInfo.es.js
var import_react6 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/icon-Dc8f99z4-878f257b.js
var s2 = {
  check: "M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",
  "check-circle": "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z",
  close: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z",
  edit: "M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"
};
var d = Object.defineProperty;
var n5 = (t19, o13, l26, v31) => {
  for (var e11 = void 0, c27 = t19.length - 1, p26; c27 >= 0; c27--)
    (p26 = t19[c27]) && (e11 = p26(o13, l26, e11) || e11);
  return e11 && d(o13, l26, e11), e11;
};
`${Object.keys(s2)[0]}`, Object.keys(s2)[0];
var a3 = class extends x {
  constructor() {
    super(...arguments), this.color = "#000000", this.icon = "", this.svgPath = "", this.viewBox = "0 0 24 24";
  }
  render() {
    const o13 = this.icon === "Custom" || !this.icon;
    return Ht`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="24px"
        viewBox=${o13 ? this.viewBox : "0 0 24 24"}
        width="24px"
        fill=${this.color}
      >
        <path d=${o13 ? this.svgPath : s2[this.icon]} />
      </svg>
    `;
  }
};
a3.styles = Mt`
    :host {
      display: inline-block;
      width: 24px;
      height: 24px;
    }

    svg {
      width: 100%;
      height: 100%;
    }
  `;
var i4 = a3;
n5([
  Rt({ type: String })
], i4.prototype, "color");
n5([
  Rt({ type: String })
], i4.prototype, "icon");
n5([
  Rt({ type: String, attribute: "svg-path" })
], i4.prototype, "svgPath");
n5([
  Rt({ type: String, attribute: "view-box" })
], i4.prototype, "viewBox");
customElements.get("frc-icon") || customElements.define("frc-icon", i4);

// node_modules/@frc-web-components/react/dist/NT4Provider-5cc60b98.js
var import_jsx_runtime = __toESM(require_jsx_runtime(), 1);
var import_react5 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/fwc/dist/index.es-3BKgpzRw.js
var _2 = (r24, e11, t19) => {
  if (!e11.has(r24))
    throw TypeError("Cannot " + t19);
};
var s3 = (r24, e11, t19) => (_2(r24, e11, "read from private field"), t19 ? t19.call(r24) : e11.get(r24));
var n6 = (r24, e11, t19) => {
  if (e11.has(r24))
    throw TypeError("Cannot add the same private member more than once");
  e11 instanceof WeakSet ? e11.add(r24) : e11.set(r24, t19);
};
var h3 = (r24, e11, t19, i27) => (_2(r24, e11, "write to private field"), e11.set(r24, t19), t19);
var a4 = (r24, e11, t19) => (_2(r24, e11, "access private method"), t19);
var Ve2 = 1 / 0;
var Pe2 = "[object Symbol]";
var Te2 = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;
var Re2 = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;
var J3 = "\\ud800-\\udfff";
var de2 = "\\u0300-\\u036f\\ufe20-\\ufe23";
var fe2 = "\\u20d0-\\u20f0";
var pe2 = "\\u2700-\\u27bf";
var ve2 = "a-z\\xdf-\\xf6\\xf8-\\xff";
var Ue2 = "\\xac\\xb1\\xd7\\xf7";
var Ie2 = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf";
var ze2 = "\\u2000-\\u206f";
var Le2 = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000";
var Se2 = "A-Z\\xc0-\\xd6\\xd8-\\xde";
var ge2 = "\\ufe0e\\ufe0f";
var be2 = Ue2 + Ie2 + ze2 + Le2;
var ee2 = "['’]";
var Ze2 = "[" + J3 + "]";
var ie2 = "[" + be2 + "]";
var D3 = "[" + de2 + fe2 + "]";
var we2 = "\\d+";
var He2 = "[" + pe2 + "]";
var me2 = "[" + ve2 + "]";
var ye2 = "[^" + J3 + be2 + we2 + pe2 + ve2 + Se2 + "]";
var q3 = "\\ud83c[\\udffb-\\udfff]";
var Ne2 = "(?:" + D3 + "|" + q3 + ")";
var xe2 = "[^" + J3 + "]";
var te2 = "(?:\\ud83c[\\udde6-\\uddff]){2}";
var re2 = "[\\ud800-\\udbff][\\udc00-\\udfff]";
var g2 = "[" + Se2 + "]";
var Ee2 = "\\u200d";
var oe2 = "(?:" + me2 + "|" + ye2 + ")";
var De2 = "(?:" + g2 + "|" + ye2 + ")";
var ne2 = "(?:" + ee2 + "(?:d|ll|m|re|s|t|ve))?";
var ue2 = "(?:" + ee2 + "(?:D|LL|M|RE|S|T|VE))?";
var ke2 = Ne2 + "?";
var je2 = "[" + ge2 + "]?";
var Ge2 = "(?:" + Ee2 + "(?:" + [xe2, te2, re2].join("|") + ")" + je2 + ke2 + ")*";
var We2 = je2 + ke2 + Ge2;
var Je2 = "(?:" + [He2, te2, re2].join("|") + ")" + We2;
var Ke2 = "(?:" + [xe2 + D3 + "?", D3, te2, re2, Ze2].join("|") + ")";
var Fe2 = RegExp(ee2, "g");
var Ye2 = RegExp(D3, "g");
var qe2 = RegExp(q3 + "(?=" + q3 + ")|" + Ke2 + We2, "g");
var $e2 = RegExp([
  g2 + "?" + me2 + "+" + ne2 + "(?=" + [ie2, g2, "$"].join("|") + ")",
  De2 + "+" + ue2 + "(?=" + [ie2, g2 + oe2, "$"].join("|") + ")",
  g2 + "?" + oe2 + "+" + ne2,
  g2 + "+" + ue2,
  we2,
  Je2
].join("|"), "g");
var Be2 = RegExp("[" + Ee2 + J3 + de2 + fe2 + ge2 + "]");
var Qe2 = /[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;
var Xe2 = {
  // Latin-1 Supplement block.
  À: "A",
  Á: "A",
  Â: "A",
  Ã: "A",
  Ä: "A",
  Å: "A",
  à: "a",
  á: "a",
  â: "a",
  ã: "a",
  ä: "a",
  å: "a",
  Ç: "C",
  ç: "c",
  Ð: "D",
  ð: "d",
  È: "E",
  É: "E",
  Ê: "E",
  Ë: "E",
  è: "e",
  é: "e",
  ê: "e",
  ë: "e",
  Ì: "I",
  Í: "I",
  Î: "I",
  Ï: "I",
  ì: "i",
  í: "i",
  î: "i",
  ï: "i",
  Ñ: "N",
  ñ: "n",
  Ò: "O",
  Ó: "O",
  Ô: "O",
  Õ: "O",
  Ö: "O",
  Ø: "O",
  ò: "o",
  ó: "o",
  ô: "o",
  õ: "o",
  ö: "o",
  ø: "o",
  Ù: "U",
  Ú: "U",
  Û: "U",
  Ü: "U",
  ù: "u",
  ú: "u",
  û: "u",
  ü: "u",
  Ý: "Y",
  ý: "y",
  ÿ: "y",
  Æ: "Ae",
  æ: "ae",
  Þ: "Th",
  þ: "th",
  ß: "ss",
  // Latin Extended-A block.
  Ā: "A",
  Ă: "A",
  Ą: "A",
  ā: "a",
  ă: "a",
  ą: "a",
  Ć: "C",
  Ĉ: "C",
  Ċ: "C",
  Č: "C",
  ć: "c",
  ĉ: "c",
  ċ: "c",
  č: "c",
  Ď: "D",
  Đ: "D",
  ď: "d",
  đ: "d",
  Ē: "E",
  Ĕ: "E",
  Ė: "E",
  Ę: "E",
  Ě: "E",
  ē: "e",
  ĕ: "e",
  ė: "e",
  ę: "e",
  ě: "e",
  Ĝ: "G",
  Ğ: "G",
  Ġ: "G",
  Ģ: "G",
  ĝ: "g",
  ğ: "g",
  ġ: "g",
  ģ: "g",
  Ĥ: "H",
  Ħ: "H",
  ĥ: "h",
  ħ: "h",
  Ĩ: "I",
  Ī: "I",
  Ĭ: "I",
  Į: "I",
  İ: "I",
  ĩ: "i",
  ī: "i",
  ĭ: "i",
  į: "i",
  ı: "i",
  Ĵ: "J",
  ĵ: "j",
  Ķ: "K",
  ķ: "k",
  ĸ: "k",
  Ĺ: "L",
  Ļ: "L",
  Ľ: "L",
  Ŀ: "L",
  Ł: "L",
  ĺ: "l",
  ļ: "l",
  ľ: "l",
  ŀ: "l",
  ł: "l",
  Ń: "N",
  Ņ: "N",
  Ň: "N",
  Ŋ: "N",
  ń: "n",
  ņ: "n",
  ň: "n",
  ŋ: "n",
  Ō: "O",
  Ŏ: "O",
  Ő: "O",
  ō: "o",
  ŏ: "o",
  ő: "o",
  Ŕ: "R",
  Ŗ: "R",
  Ř: "R",
  ŕ: "r",
  ŗ: "r",
  ř: "r",
  Ś: "S",
  Ŝ: "S",
  Ş: "S",
  Š: "S",
  ś: "s",
  ŝ: "s",
  ş: "s",
  š: "s",
  Ţ: "T",
  Ť: "T",
  Ŧ: "T",
  ţ: "t",
  ť: "t",
  ŧ: "t",
  Ũ: "U",
  Ū: "U",
  Ŭ: "U",
  Ů: "U",
  Ű: "U",
  Ų: "U",
  ũ: "u",
  ū: "u",
  ŭ: "u",
  ů: "u",
  ű: "u",
  ų: "u",
  Ŵ: "W",
  ŵ: "w",
  Ŷ: "Y",
  ŷ: "y",
  Ÿ: "Y",
  Ź: "Z",
  Ż: "Z",
  Ž: "Z",
  ź: "z",
  ż: "z",
  ž: "z",
  Ĳ: "IJ",
  ĳ: "ij",
  Œ: "Oe",
  œ: "oe",
  ŉ: "'n",
  ſ: "ss"
};
var _e2 = typeof global == "object" && global && global.Object === Object && global;
var et3 = typeof self == "object" && self && self.Object === Object && self;
var tt3 = _e2 || et3 || Function("return this")();
function rt3(r24, e11, t19, i27) {
  var o13 = -1, u35 = r24 ? r24.length : 0;
  for (i27; ++o13 < u35; )
    t19 = e11(t19, r24[o13], o13, r24);
  return t19;
}
function st3(r24) {
  return r24.split("");
}
function it3(r24) {
  return r24.match(Te2) || [];
}
function ot3(r24) {
  return function(e11) {
    return r24 == null ? void 0 : r24[e11];
  };
}
var nt3 = ot3(Xe2);
function Me2(r24) {
  return Be2.test(r24);
}
function ut3(r24) {
  return Qe2.test(r24);
}
function at2(r24) {
  return Me2(r24) ? ht3(r24) : st3(r24);
}
function ht3(r24) {
  return r24.match(qe2) || [];
}
function ct3(r24) {
  return r24.match($e2) || [];
}
var lt3 = Object.prototype;
var dt3 = lt3.toString;
var ae2 = tt3.Symbol;
var he2 = ae2 ? ae2.prototype : void 0;
var ce2 = he2 ? he2.toString : void 0;
function ft3(r24, e11, t19) {
  var i27 = -1, o13 = r24.length;
  e11 < 0 && (e11 = -e11 > o13 ? 0 : o13 + e11), t19 = t19 > o13 ? o13 : t19, t19 < 0 && (t19 += o13), o13 = e11 > t19 ? 0 : t19 - e11 >>> 0, e11 >>>= 0;
  for (var u35 = Array(o13); ++i27 < o13; )
    u35[i27] = r24[i27 + e11];
  return u35;
}
function pt3(r24) {
  if (typeof r24 == "string")
    return r24;
  if (wt2(r24))
    return ce2 ? ce2.call(r24) : "";
  var e11 = r24 + "";
  return e11 == "0" && 1 / r24 == -Ve2 ? "-0" : e11;
}
function vt3(r24, e11, t19) {
  var i27 = r24.length;
  return t19 = t19 === void 0 ? i27 : t19, !e11 && t19 >= i27 ? r24 : ft3(r24, e11, t19);
}
function St3(r24) {
  return function(e11) {
    e11 = K3(e11);
    var t19 = Me2(e11) ? at2(e11) : void 0, i27 = t19 ? t19[0] : e11.charAt(0), o13 = t19 ? vt3(t19, 1).join("") : e11.slice(1);
    return i27[r24]() + o13;
  };
}
function gt3(r24) {
  return function(e11) {
    return rt3(kt2(xt3(e11).replace(Fe2, "")), r24, "");
  };
}
function bt3(r24) {
  return !!r24 && typeof r24 == "object";
}
function wt2(r24) {
  return typeof r24 == "symbol" || bt3(r24) && dt3.call(r24) == Pe2;
}
function K3(r24) {
  return r24 == null ? "" : pt3(r24);
}
var mt3 = gt3(function(r24, e11, t19) {
  return e11 = e11.toLowerCase(), r24 + (t19 ? yt3(e11) : e11);
});
function yt3(r24) {
  return Et3(K3(r24).toLowerCase());
}
function xt3(r24) {
  return r24 = K3(r24), r24 && r24.replace(Re2, nt3).replace(Ye2, "");
}
var Et3 = St3("toUpperCase");
function kt2(r24, e11, t19) {
  return r24 = K3(r24), e11 = e11, e11 === void 0 ? ut3(r24) ? ct3(r24) : it3(r24) : r24.match(e11) || [];
}
var j3;
var p2;
var R3;
var v4;
var W3;
var b5;
var U3;
var jt2 = class {
  constructor(e11, t19, i27, o13) {
    n6(this, j3, void 0), n6(this, p2, {}), n6(this, R3, void 0), n6(this, v4, void 0), n6(this, W3, false), n6(this, b5, void 0), n6(this, U3, void 0), h3(this, U3, e11), h3(this, b5, t19), h3(this, j3, i27), h3(this, R3, o13);
  }
  getKey() {
    return s3(this, j3);
  }
  hasValue() {
    return s3(this, W3);
  }
  getValue() {
    return s3(this, v4);
  }
  setValue(e11) {
    h3(this, v4, e11), h3(this, W3, true);
  }
  removeValue() {
    h3(this, v4, void 0), h3(this, W3, false);
  }
  getSourceValue() {
    return this.hasChildren() ? s3(this, b5) : s3(this, v4);
  }
  setSourceValue(e11) {
    s3(this, U3).userUpdate(s3(this, j3), e11);
  }
  getChildren() {
    return s3(this, p2);
  }
  hasChildren() {
    return Object.getOwnPropertyNames(s3(this, p2)).length > 0;
  }
  addChild(e11, t19) {
    const i27 = e11.split("/").at(-1);
    typeof i27 > "u" || (s3(this, p2)[i27] = t19, !(typeof i27 > "u") && Object.defineProperty(s3(this, b5), i27, {
      configurable: true,
      enumerable: true,
      set(o13) {
        t19.setSourceValue(o13);
      },
      get() {
        return t19.getSourceValue();
      }
    }));
  }
  removeChild(e11) {
    const t19 = e11.split("/").at(-1);
    typeof t19 < "u" && (delete s3(this, p2)[t19], delete s3(this, b5)[t19]);
  }
  getParent() {
    return s3(this, R3);
  }
  getJson(e11 = true) {
    if (this.hasChildren()) {
      const t19 = {};
      return Object.entries(s3(this, p2)).forEach(([i27, o13]) => {
        const u35 = e11 ? mt3(i27) : i27;
        t19[u35] = o13.getJson(e11);
      }), t19;
    }
    return s3(this, v4);
  }
};
j3 = /* @__PURE__ */ new WeakMap(), p2 = /* @__PURE__ */ new WeakMap(), R3 = /* @__PURE__ */ new WeakMap(), v4 = /* @__PURE__ */ new WeakMap(), W3 = /* @__PURE__ */ new WeakMap(), b5 = /* @__PURE__ */ new WeakMap(), U3 = /* @__PURE__ */ new WeakMap();
function Wt2(r24) {
  return r24.hasValue() ? false : Object.keys(r24.getChildren()).length === 0;
}
var M4;
var E3;
var d2;
var x5;
var f4;
var V3;
var I3;
var $2;
var Oe2;
var B3;
var Ae2;
var G3;
var Q3;
var X2;
var le2;
var S3;
var w3;
var Mt3 = class {
  constructor(e11) {
    n6(this, $2), n6(this, B3), n6(this, G3), n6(this, X2), n6(this, S3), n6(this, M4, /* @__PURE__ */ new Map()), n6(this, E3, /* @__PURE__ */ new Set()), n6(this, d2, /* @__PURE__ */ new Map()), n6(this, x5, void 0), n6(this, f4, {}), n6(this, V3, /* @__PURE__ */ new Map()), n6(this, I3, void 0), h3(this, x5, e11), h3(this, I3, {
      clearSources: e11.addClearSourcesHandler(() => {
        this.clearSources();
      }),
      sourcesChanged: e11.addSourcesChangedHandler((t19) => {
        Object.entries(t19).forEach(([i27, o13]) => {
          this.updateSource(i27, o13, false);
        }), Object.entries(t19).forEach(([i27]) => {
          a4(this, S3, w3).call(this, i27);
        });
      }),
      sourcesRemoved: e11.addSourcesRemovedHandler((t19) => {
        const i27 = t19.filter((o13) => s3(this, d2).has(o13));
        i27.forEach((o13) => this.removeSource(o13), false), i27.forEach((o13) => {
          a4(this, S3, w3).call(this, o13);
        });
      })
    });
  }
  getSourceProvider() {
    return s3(this, x5);
  }
  getSource(e11) {
    return s3(this, d2).get(e11);
  }
  getSourceValue(e11) {
    var t19;
    return (t19 = this.getSource(e11)) == null ? void 0 : t19.getSourceValue();
  }
  updateSource(e11, t19, i27 = true) {
    a4(this, $2, Oe2).call(this, e11), a4(this, B3, Ae2).call(this, e11);
    const o13 = s3(this, d2).get(e11);
    o13 == null || o13.setValue(t19), i27 && a4(this, S3, w3).call(this, e11);
  }
  clearSources() {
    const e11 = [];
    s3(this, d2).forEach((t19, i27) => {
      e11.push(i27), this.removeSource(i27, false);
    }), e11.forEach((t19) => a4(this, S3, w3).call(this, t19));
  }
  removeSource(e11, t19 = true) {
    const i27 = s3(this, d2).get(e11);
    i27 && (i27.removeValue(), a4(this, G3, Q3).call(this, i27), t19 && a4(this, S3, w3).call(this, e11), s3(this, E3).delete(e11));
  }
  subscribe(e11, t19, i27) {
    var o13;
    typeof s3(this, f4)[e11] > "u" && (s3(this, f4)[e11] = /* @__PURE__ */ new Map());
    const u35 = Symbol("SourceSubscriber");
    return s3(this, f4)[e11].set(u35, t19), i27 && ((o13 = this.getSource(e11)) != null && o13.hasValue() || s3(this, x5).requestSource(e11), t19(this.getSourceValue(e11), e11, e11)), () => {
      s3(this, f4)[e11].delete(u35);
    };
  }
  subscribeAll(e11, t19) {
    const i27 = Symbol("SourceSubscriberAll");
    return s3(this, V3).set(i27, e11), t19 && s3(this, E3).forEach((o13) => {
      e11(this.getSourceValue(o13), o13);
    }), () => {
      s3(this, V3).delete(i27);
    };
  }
  unsubscribeFromProvider() {
    const { clearSources: e11, sourcesChanged: t19, sourcesRemoved: i27 } = s3(this, I3);
    e11(), t19(), i27();
  }
};
M4 = /* @__PURE__ */ new WeakMap(), E3 = /* @__PURE__ */ new WeakMap(), d2 = /* @__PURE__ */ new WeakMap(), x5 = /* @__PURE__ */ new WeakMap(), f4 = /* @__PURE__ */ new WeakMap(), V3 = /* @__PURE__ */ new WeakMap(), I3 = /* @__PURE__ */ new WeakMap(), $2 = /* @__PURE__ */ new WeakSet(), Oe2 = function(r24) {
  s3(this, E3).has(r24) || s3(this, E3).add(r24);
}, B3 = /* @__PURE__ */ new WeakSet(), Ae2 = function(r24) {
  const e11 = r24.split("/");
  let t19;
  e11.forEach((i27, o13) => {
    const u35 = e11.slice(0, o13 + 1).join("/");
    if (!s3(this, d2).has(u35)) {
      const k29 = s3(this, d2).get(t19), se6 = new jt2(
        s3(this, x5),
        a4(this, X2, le2).call(this, u35),
        u35,
        k29
      );
      s3(this, d2).set(u35, se6), k29 == null || k29.addChild(u35, se6);
    }
    t19 = u35;
  });
}, G3 = /* @__PURE__ */ new WeakSet(), Q3 = function(r24) {
  const e11 = Wt2(r24), t19 = r24.getParent();
  e11 && t19 && (t19.removeChild(r24.getKey()), s3(this, d2).delete(r24.getKey()), a4(this, G3, Q3).call(this, t19));
}, X2 = /* @__PURE__ */ new WeakSet(), le2 = function(r24) {
  return s3(this, M4).has(r24) || s3(this, M4).set(r24, {}), s3(this, M4).get(r24);
}, S3 = /* @__PURE__ */ new WeakSet(), w3 = function(r24) {
  const e11 = r24.split("/"), t19 = this.getSourceValue(r24);
  e11.forEach((i27, o13) => {
    const u35 = e11.slice(0, o13 + 1).join("/");
    u35 in s3(this, f4) && s3(this, f4)[u35].forEach((k29) => {
      k29(this.getSourceValue(u35), u35, r24);
    });
  }), s3(this, V3).forEach((i27) => {
    i27(t19, r24);
  });
};
var c;
var z3;
var L3;
var Z3;
var Ot3 = class {
  constructor() {
    n6(this, c, {}), n6(this, z3, []), n6(this, L3, void 0), n6(this, Z3, []);
  }
  hasSourceProvider(e11) {
    return e11 in s3(this, c);
  }
  addSourceProvider(e11, t19) {
    if (this.hasSourceProvider(e11))
      throw new Error("A source provider with that name has already been added.");
    const i27 = new Mt3(t19);
    s3(this, c)[e11] = i27, s3(this, z3).forEach((o13) => {
      o13(e11);
    });
  }
  sourceProviderAdded(e11) {
    s3(this, z3).push(e11);
  }
  removeSourceProvider(e11) {
    this.hasSourceProvider(e11) && (this.getSourceProvider(e11).disconnect(), s3(this, c)[e11].unsubscribeFromProvider(), delete s3(this, c)[e11]);
  }
  getSourceProvider(e11) {
    return s3(this, c)[e11].getSourceProvider();
  }
  getSourceProviderNames() {
    return Object.keys(s3(this, c));
  }
  setDefaultSourceProvider(e11) {
    h3(this, L3, e11), s3(this, Z3).forEach((t19) => {
      t19(e11);
    });
  }
  defaultSourceProviderSet(e11) {
    if (typeof e11 != "function")
      throw new Error("listener is not a function");
    s3(this, Z3).push(e11);
  }
  getDefaultSourceProvider() {
    return s3(this, L3);
  }
  getSource(e11, t19) {
    var i27;
    return (i27 = s3(this, c)[e11]) == null ? void 0 : i27.getSource(t19);
  }
  getSourceValue(e11, t19) {
    var i27;
    return (i27 = s3(this, c)[e11]) == null ? void 0 : i27.getSourceValue(t19);
  }
  subscribe(e11, t19, i27, o13) {
    var u35;
    return (u35 = s3(this, c)[e11]) == null ? void 0 : u35.subscribe(t19, i27, o13);
  }
  subscribeAll(e11, t19, i27) {
    var o13;
    return (o13 = s3(this, c)[e11]) == null ? void 0 : o13.subscribeAll(t19, i27);
  }
};
c = /* @__PURE__ */ new WeakMap(), z3 = /* @__PURE__ */ new WeakMap(), L3 = /* @__PURE__ */ new WeakMap(), Z3 = /* @__PURE__ */ new WeakMap();
var Ce2 = () => {
};
var m3;
var l2;
var O3;
var A3;
var P3;
var T4;
var y3;
var C3;
var H3;
var F3;
var N2;
var Y2;
var At3 = class {
  constructor(e11 = {}, t19 = 0) {
    n6(this, y3), n6(this, H3), n6(this, N2), n6(this, m3, void 0), n6(this, l2, {}), n6(this, O3, void 0), n6(this, A3, /* @__PURE__ */ new Map()), n6(this, P3, /* @__PURE__ */ new Map()), n6(this, T4, /* @__PURE__ */ new Map()), t19 && h3(this, m3, setInterval(a4(this, y3, C3).bind(this), t19)), Object.entries(e11).forEach(([i27, o13]) => {
      this.updateSource(i27, o13);
    });
  }
  /**
   * Updates the value of a source in the store. If the source doesn't
   * exist then it is added. Should only be called internally by the
   * source provider.
   *
   * @protected
   * @param {string} key - The source's key. This is a string separated
   * by '/'.
   * @param {*} value - The new value.
   */
  updateSource(e11, t19) {
    clearTimeout(s3(this, O3)), s3(this, l2)[e11] === void 0 ? s3(this, l2)[e11] = {
      first: {
        type: "change",
        value: t19
      }
    } : s3(this, l2)[e11].last = {
      type: "change",
      value: t19
    }, s3(this, m3) || a4(this, y3, C3).call(this);
  }
  /**
   * Removes an existing source from the store. If the source
   * doesn't exist this does nothing. Should only be called
   * internally by the source provider.
   *
   * @protected
   * @param {string} key - The source's key. This is a string separated
   * by '/'.
   */
  removeSource(e11) {
    s3(this, l2)[e11] === void 0 ? s3(this, l2)[e11] = {
      first: {
        type: "removal"
      }
    } : s3(this, l2)[e11].last = {
      type: "removal"
    }, s3(this, m3) || a4(this, y3, C3).call(this);
  }
  /**
   * Removes all sources in the store for this provider. Should only be
   * called internally by the source provider.
   *
   * @protected
   * @param {function} callback - An optional callback. Called when sources
   * have been cleared.
   */
  clearSources(e11 = Ce2) {
    a4(this, y3, C3).call(this, () => {
      s3(this, A3).forEach((t19) => t19()), e11();
    });
  }
  /**
   * Removes all sources in the store for this provider after a period of time.
   * If a source is set or this function is called before that period of time
   * ends, sources will not be cleared. This is useful for preventing sources
   * from being cleared on an unreliable network. Should only be called internally
   * by the source provider.
   *
   * @protected
   * @param {number} timeout - The period of time before clearing the sources
   * in milliseconds.
   * @param {function} callback - An optional callback. Called when sources
   * have been cleared.
   */
  clearSourcesWithTimeout(e11, t19) {
    clearTimeout(s3(this, O3)), h3(this, O3, setTimeout(() => {
      this.clearSources(t19);
    }, e11));
  }
  /**
   * Called when a source's value is modified by the user. This method
   * should be overridden by the child class to handle these updates.
   * This method should not be called directly.
   *
   * @protected
   * @param {string} key - The source's key. This is a string separated
   * by '/'.
   * @param {*} value - The source's updated value.
   */
  userUpdate(e11, t19) {
    this.updateSource(e11, t19);
  }
  /**
   * This optional method is called when a key is subscribed to that the store does not
   * already have. A SourceProvider can override this method to update the store with
   * the requested source.
   * @Override
   * @param {string} key
   */
  // eslint-disable-next-line class-methods-use-this, @typescript-eslint/no-empty-function
  requestSource(e11) {
  }
  /**
   * Helper function to get the type of a variable represented
   * by a string.
   *
   * @param {*} value
   * @returns {string} - The value's type.
   */
  static getType(e11) {
    return typeof e11 == "string" ? "string" : typeof e11 == "number" ? "number" : typeof e11 == "boolean" ? "boolean" : e11 instanceof Array ? "Array" : e11 === null ? "null" : null;
  }
  addClearSourcesHandler(e11) {
    const t19 = Symbol("clearSources");
    return s3(this, A3).set(t19, e11), () => {
      s3(this, A3).delete(t19);
    };
  }
  addSourcesChangedHandler(e11) {
    const t19 = Symbol("sourcesChanged");
    return s3(this, P3).set(t19, e11), () => {
      s3(this, P3).delete(t19);
    };
  }
  addSourcesRemovedHandler(e11) {
    const t19 = Symbol("sourcesRemoved");
    return s3(this, T4).set(t19, e11), () => {
      s3(this, T4).delete(t19);
    };
  }
  disconnect() {
    clearTimeout(s3(this, m3));
  }
};
m3 = /* @__PURE__ */ new WeakMap(), l2 = /* @__PURE__ */ new WeakMap(), O3 = /* @__PURE__ */ new WeakMap(), A3 = /* @__PURE__ */ new WeakMap(), P3 = /* @__PURE__ */ new WeakMap(), T4 = /* @__PURE__ */ new WeakMap(), y3 = /* @__PURE__ */ new WeakSet(), C3 = function(r24 = Ce2) {
  if (Object.keys(s3(this, l2)).length === 0) {
    r24();
    return;
  }
  const e11 = { ...s3(this, l2) };
  h3(this, l2, {});
  const t19 = {}, i27 = {};
  Object.entries(e11).forEach(([o13, u35]) => {
    t19[o13] = u35.first, typeof u35.last < "u" && (i27[o13] = u35.last);
  }), a4(this, H3, F3).call(this, t19), a4(this, N2, Y2).call(this, t19), Object.keys(i27).length > 0 ? setTimeout(() => {
    a4(this, H3, F3).call(this, i27), a4(this, N2, Y2).call(this, i27), r24();
  }) : r24();
}, H3 = /* @__PURE__ */ new WeakSet(), F3 = function(r24) {
  const e11 = {};
  Object.entries(r24).forEach(([t19, { type: i27 }]) => {
    i27 === "change" && (e11[t19] = r24[t19].value);
  }), Object.keys(e11).length > 0 && s3(this, P3).forEach((t19) => t19(e11));
}, N2 = /* @__PURE__ */ new WeakSet(), Y2 = function(r24) {
  const e11 = [];
  Object.entries(r24).forEach(([t19, { type: i27 }]) => {
    i27 === "removal" && e11.push(t19);
  }), e11.length > 0 && s3(this, T4).forEach((t19) => t19(e11));
};

// node_modules/@frc-web-components/fwc/dist/property-C4BPH-wS.js
var T5 = globalThis;
var j4 = T5.ShadowRoot && (T5.ShadyCSS === void 0 || T5.ShadyCSS.nativeShadow) && "adoptedStyleSheets" in Document.prototype && "replace" in CSSStyleSheet.prototype;
var B4 = Symbol();
var W4 = /* @__PURE__ */ new WeakMap();
var et4 = class {
  constructor(t19, e11, s18) {
    if (this._$cssResult$ = true, s18 !== B4)
      throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");
    this.cssText = t19, this.t = e11;
  }
  get styleSheet() {
    let t19 = this.o;
    const e11 = this.t;
    if (j4 && t19 === void 0) {
      const s18 = e11 !== void 0 && e11.length === 1;
      s18 && (t19 = W4.get(e11)), t19 === void 0 && ((this.o = t19 = new CSSStyleSheet()).replaceSync(this.cssText), s18 && W4.set(e11, t19));
    }
    return t19;
  }
  toString() {
    return this.cssText;
  }
};
var ht4 = (r24) => new et4(typeof r24 == "string" ? r24 : r24 + "", void 0, B4);
var Ut3 = (r24, ...t19) => {
  const e11 = r24.length === 1 ? r24[0] : t19.reduce((s18, i27, o13) => s18 + ((n33) => {
    if (n33._$cssResult$ === true)
      return n33.cssText;
    if (typeof n33 == "number")
      return n33;
    throw Error("Value passed to 'css' function must be a 'css' function result: " + n33 + ". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.");
  })(i27) + r24[o13 + 1], r24[0]);
  return new et4(e11, r24, B4);
};
var at3 = (r24, t19) => {
  if (j4)
    r24.adoptedStyleSheets = t19.map((e11) => e11 instanceof CSSStyleSheet ? e11 : e11.styleSheet);
  else
    for (const e11 of t19) {
      const s18 = document.createElement("style"), i27 = T5.litNonce;
      i27 !== void 0 && s18.setAttribute("nonce", i27), s18.textContent = e11.cssText, r24.appendChild(s18);
    }
};
var q4 = j4 ? (r24) => r24 : (r24) => r24 instanceof CSSStyleSheet ? ((t19) => {
  let e11 = "";
  for (const s18 of t19.cssRules)
    e11 += s18.cssText;
  return ht4(e11);
})(r24) : r24;
var { is: lt4, defineProperty: ct4, getOwnPropertyDescriptor: dt4, getOwnPropertyNames: pt4, getOwnPropertySymbols: $t3, getPrototypeOf: ut4 } = Object;
var f5 = globalThis;
var J4 = f5.trustedTypes;
var _t2 = J4 ? J4.emptyScript : "";
var k3 = f5.reactiveElementPolyfillSupport;
var b6 = (r24, t19) => r24;
var M5 = { toAttribute(r24, t19) {
  switch (t19) {
    case Boolean:
      r24 = r24 ? _t2 : null;
      break;
    case Object:
    case Array:
      r24 = r24 == null ? r24 : JSON.stringify(r24);
  }
  return r24;
}, fromAttribute(r24, t19) {
  let e11 = r24;
  switch (t19) {
    case Boolean:
      e11 = r24 !== null;
      break;
    case Number:
      e11 = r24 === null ? null : Number(r24);
      break;
    case Object:
    case Array:
      try {
        e11 = JSON.parse(r24);
      } catch {
        e11 = null;
      }
  }
  return e11;
} };
var I4 = (r24, t19) => !lt4(r24, t19);
var K4 = { attribute: true, type: String, converter: M5, reflect: false, hasChanged: I4 };
Symbol.metadata ?? (Symbol.metadata = Symbol("metadata")), f5.litPropertyMetadata ?? (f5.litPropertyMetadata = /* @__PURE__ */ new WeakMap());
var y4 = class extends HTMLElement {
  static addInitializer(t19) {
    this._$Ei(), (this.l ?? (this.l = [])).push(t19);
  }
  static get observedAttributes() {
    return this.finalize(), this._$Eh && [...this._$Eh.keys()];
  }
  static createProperty(t19, e11 = K4) {
    if (e11.state && (e11.attribute = false), this._$Ei(), this.elementProperties.set(t19, e11), !e11.noAccessor) {
      const s18 = Symbol(), i27 = this.getPropertyDescriptor(t19, s18, e11);
      i27 !== void 0 && ct4(this.prototype, t19, i27);
    }
  }
  static getPropertyDescriptor(t19, e11, s18) {
    const { get: i27, set: o13 } = dt4(this.prototype, t19) ?? { get() {
      return this[e11];
    }, set(n33) {
      this[e11] = n33;
    } };
    return { get() {
      return i27 == null ? void 0 : i27.call(this);
    }, set(n33) {
      const a22 = i27 == null ? void 0 : i27.call(this);
      o13.call(this, n33), this.requestUpdate(t19, a22, s18);
    }, configurable: true, enumerable: true };
  }
  static getPropertyOptions(t19) {
    return this.elementProperties.get(t19) ?? K4;
  }
  static _$Ei() {
    if (this.hasOwnProperty(b6("elementProperties")))
      return;
    const t19 = ut4(this);
    t19.finalize(), t19.l !== void 0 && (this.l = [...t19.l]), this.elementProperties = new Map(t19.elementProperties);
  }
  static finalize() {
    if (this.hasOwnProperty(b6("finalized")))
      return;
    if (this.finalized = true, this._$Ei(), this.hasOwnProperty(b6("properties"))) {
      const e11 = this.properties, s18 = [...pt4(e11), ...$t3(e11)];
      for (const i27 of s18)
        this.createProperty(i27, e11[i27]);
    }
    const t19 = this[Symbol.metadata];
    if (t19 !== null) {
      const e11 = litPropertyMetadata.get(t19);
      if (e11 !== void 0)
        for (const [s18, i27] of e11)
          this.elementProperties.set(s18, i27);
    }
    this._$Eh = /* @__PURE__ */ new Map();
    for (const [e11, s18] of this.elementProperties) {
      const i27 = this._$Eu(e11, s18);
      i27 !== void 0 && this._$Eh.set(i27, e11);
    }
    this.elementStyles = this.finalizeStyles(this.styles);
  }
  static finalizeStyles(t19) {
    const e11 = [];
    if (Array.isArray(t19)) {
      const s18 = new Set(t19.flat(1 / 0).reverse());
      for (const i27 of s18)
        e11.unshift(q4(i27));
    } else
      t19 !== void 0 && e11.push(q4(t19));
    return e11;
  }
  static _$Eu(t19, e11) {
    const s18 = e11.attribute;
    return s18 === false ? void 0 : typeof s18 == "string" ? s18 : typeof t19 == "string" ? t19.toLowerCase() : void 0;
  }
  constructor() {
    super(), this._$Ep = void 0, this.isUpdatePending = false, this.hasUpdated = false, this._$Em = null, this._$Ev();
  }
  _$Ev() {
    var t19;
    this._$ES = new Promise((e11) => this.enableUpdating = e11), this._$AL = /* @__PURE__ */ new Map(), this._$E_(), this.requestUpdate(), (t19 = this.constructor.l) == null || t19.forEach((e11) => e11(this));
  }
  addController(t19) {
    var e11;
    (this._$EO ?? (this._$EO = /* @__PURE__ */ new Set())).add(t19), this.renderRoot !== void 0 && this.isConnected && ((e11 = t19.hostConnected) == null || e11.call(t19));
  }
  removeController(t19) {
    var e11;
    (e11 = this._$EO) == null || e11.delete(t19);
  }
  _$E_() {
    const t19 = /* @__PURE__ */ new Map(), e11 = this.constructor.elementProperties;
    for (const s18 of e11.keys())
      this.hasOwnProperty(s18) && (t19.set(s18, this[s18]), delete this[s18]);
    t19.size > 0 && (this._$Ep = t19);
  }
  createRenderRoot() {
    const t19 = this.shadowRoot ?? this.attachShadow(this.constructor.shadowRootOptions);
    return at3(t19, this.constructor.elementStyles), t19;
  }
  connectedCallback() {
    var t19;
    this.renderRoot ?? (this.renderRoot = this.createRenderRoot()), this.enableUpdating(true), (t19 = this._$EO) == null || t19.forEach((e11) => {
      var s18;
      return (s18 = e11.hostConnected) == null ? void 0 : s18.call(e11);
    });
  }
  enableUpdating(t19) {
  }
  disconnectedCallback() {
    var t19;
    (t19 = this._$EO) == null || t19.forEach((e11) => {
      var s18;
      return (s18 = e11.hostDisconnected) == null ? void 0 : s18.call(e11);
    });
  }
  attributeChangedCallback(t19, e11, s18) {
    this._$AK(t19, s18);
  }
  _$EC(t19, e11) {
    var o13;
    const s18 = this.constructor.elementProperties.get(t19), i27 = this.constructor._$Eu(t19, s18);
    if (i27 !== void 0 && s18.reflect === true) {
      const n33 = (((o13 = s18.converter) == null ? void 0 : o13.toAttribute) !== void 0 ? s18.converter : M5).toAttribute(e11, s18.type);
      this._$Em = t19, n33 == null ? this.removeAttribute(i27) : this.setAttribute(i27, n33), this._$Em = null;
    }
  }
  _$AK(t19, e11) {
    var o13;
    const s18 = this.constructor, i27 = s18._$Eh.get(t19);
    if (i27 !== void 0 && this._$Em !== i27) {
      const n33 = s18.getPropertyOptions(i27), a22 = typeof n33.converter == "function" ? { fromAttribute: n33.converter } : ((o13 = n33.converter) == null ? void 0 : o13.fromAttribute) !== void 0 ? n33.converter : M5;
      this._$Em = i27, this[i27] = a22.fromAttribute(e11, n33.type), this._$Em = null;
    }
  }
  requestUpdate(t19, e11, s18) {
    if (t19 !== void 0) {
      if (s18 ?? (s18 = this.constructor.getPropertyOptions(t19)), !(s18.hasChanged ?? I4)(this[t19], e11))
        return;
      this.P(t19, e11, s18);
    }
    this.isUpdatePending === false && (this._$ES = this._$ET());
  }
  P(t19, e11, s18) {
    this._$AL.has(t19) || this._$AL.set(t19, e11), s18.reflect === true && this._$Em !== t19 && (this._$Ej ?? (this._$Ej = /* @__PURE__ */ new Set())).add(t19);
  }
  async _$ET() {
    this.isUpdatePending = true;
    try {
      await this._$ES;
    } catch (e11) {
      Promise.reject(e11);
    }
    const t19 = this.scheduleUpdate();
    return t19 != null && await t19, !this.isUpdatePending;
  }
  scheduleUpdate() {
    return this.performUpdate();
  }
  performUpdate() {
    var s18;
    if (!this.isUpdatePending)
      return;
    if (!this.hasUpdated) {
      if (this.renderRoot ?? (this.renderRoot = this.createRenderRoot()), this._$Ep) {
        for (const [o13, n33] of this._$Ep)
          this[o13] = n33;
        this._$Ep = void 0;
      }
      const i27 = this.constructor.elementProperties;
      if (i27.size > 0)
        for (const [o13, n33] of i27)
          n33.wrapped !== true || this._$AL.has(o13) || this[o13] === void 0 || this.P(o13, this[o13], n33);
    }
    let t19 = false;
    const e11 = this._$AL;
    try {
      t19 = this.shouldUpdate(e11), t19 ? (this.willUpdate(e11), (s18 = this._$EO) == null || s18.forEach((i27) => {
        var o13;
        return (o13 = i27.hostUpdate) == null ? void 0 : o13.call(i27);
      }), this.update(e11)) : this._$EU();
    } catch (i27) {
      throw t19 = false, this._$EU(), i27;
    }
    t19 && this._$AE(e11);
  }
  willUpdate(t19) {
  }
  _$AE(t19) {
    var e11;
    (e11 = this._$EO) == null || e11.forEach((s18) => {
      var i27;
      return (i27 = s18.hostUpdated) == null ? void 0 : i27.call(s18);
    }), this.hasUpdated || (this.hasUpdated = true, this.firstUpdated(t19)), this.updated(t19);
  }
  _$EU() {
    this._$AL = /* @__PURE__ */ new Map(), this.isUpdatePending = false;
  }
  get updateComplete() {
    return this.getUpdateComplete();
  }
  getUpdateComplete() {
    return this._$ES;
  }
  shouldUpdate(t19) {
    return true;
  }
  update(t19) {
    this._$Ej && (this._$Ej = this._$Ej.forEach((e11) => this._$EC(e11, this[e11]))), this._$EU();
  }
  updated(t19) {
  }
  firstUpdated(t19) {
  }
};
y4.elementStyles = [], y4.shadowRootOptions = { mode: "open" }, y4[b6("elementProperties")] = /* @__PURE__ */ new Map(), y4[b6("finalized")] = /* @__PURE__ */ new Map(), k3 == null || k3({ ReactiveElement: y4 }), (f5.reactiveElementVersions ?? (f5.reactiveElementVersions = [])).push("2.0.4");
var w4 = globalThis;
var N3 = w4.trustedTypes;
var Z4 = N3 ? N3.createPolicy("lit-html", { createHTML: (r24) => r24 }) : void 0;
var st4 = "$lit$";
var _3 = `lit$${Math.random().toFixed(9).slice(2)}$`;
var it4 = "?" + _3;
var ft4 = `<${it4}>`;
var m4 = document;
var P4 = () => m4.createComment("");
var C4 = (r24) => r24 === null || typeof r24 != "object" && typeof r24 != "function";
var V4 = Array.isArray;
var At4 = (r24) => V4(r24) || typeof (r24 == null ? void 0 : r24[Symbol.iterator]) == "function";
var L4 = `[ 	
\f\r]`;
var S4 = /<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g;
var F4 = /-->/g;
var G4 = />/g;
var A4 = RegExp(`>|${L4}(?:([^\\s"'>=/]+)(${L4}*=${L4}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`, "g");
var Q4 = /'/g;
var X3 = /"/g;
var rt4 = /^(?:script|style|textarea|title)$/i;
var nt4 = (r24) => (t19, ...e11) => ({ _$litType$: r24, strings: t19, values: e11 });
var Ot4 = nt4(1);
var Tt3 = nt4(2);
var v5 = Symbol.for("lit-noChange");
var d3 = Symbol.for("lit-nothing");
var Y3 = /* @__PURE__ */ new WeakMap();
var g3 = m4.createTreeWalker(m4, 129);
function ot4(r24, t19) {
  if (!V4(r24) || !r24.hasOwnProperty("raw"))
    throw Error("invalid template strings array");
  return Z4 !== void 0 ? Z4.createHTML(t19) : t19;
}
var gt4 = (r24, t19) => {
  const e11 = r24.length - 1, s18 = [];
  let i27, o13 = t19 === 2 ? "<svg>" : t19 === 3 ? "<math>" : "", n33 = S4;
  for (let a22 = 0; a22 < e11; a22++) {
    const h26 = r24[a22];
    let c27, p26, l26 = -1, $25 = 0;
    for (; $25 < h26.length && (n33.lastIndex = $25, p26 = n33.exec(h26), p26 !== null); )
      $25 = n33.lastIndex, n33 === S4 ? p26[1] === "!--" ? n33 = F4 : p26[1] !== void 0 ? n33 = G4 : p26[2] !== void 0 ? (rt4.test(p26[2]) && (i27 = RegExp("</" + p26[2], "g")), n33 = A4) : p26[3] !== void 0 && (n33 = A4) : n33 === A4 ? p26[0] === ">" ? (n33 = i27 ?? S4, l26 = -1) : p26[1] === void 0 ? l26 = -2 : (l26 = n33.lastIndex - p26[2].length, c27 = p26[1], n33 = p26[3] === void 0 ? A4 : p26[3] === '"' ? X3 : Q4) : n33 === X3 || n33 === Q4 ? n33 = A4 : n33 === F4 || n33 === G4 ? n33 = S4 : (n33 = A4, i27 = void 0);
    const u35 = n33 === A4 && r24[a22 + 1].startsWith("/>") ? " " : "";
    o13 += n33 === S4 ? h26 + ft4 : l26 >= 0 ? (s18.push(c27), h26.slice(0, l26) + st4 + h26.slice(l26) + _3 + u35) : h26 + _3 + (l26 === -2 ? a22 : u35);
  }
  return [ot4(r24, o13 + (r24[e11] || "<?>") + (t19 === 2 ? "</svg>" : t19 === 3 ? "</math>" : "")), s18];
};
var U4 = class _U {
  constructor({ strings: t19, _$litType$: e11 }, s18) {
    let i27;
    this.parts = [];
    let o13 = 0, n33 = 0;
    const a22 = t19.length - 1, h26 = this.parts, [c27, p26] = gt4(t19, e11);
    if (this.el = _U.createElement(c27, s18), g3.currentNode = this.el.content, e11 === 2 || e11 === 3) {
      const l26 = this.el.content.firstChild;
      l26.replaceWith(...l26.childNodes);
    }
    for (; (i27 = g3.nextNode()) !== null && h26.length < a22; ) {
      if (i27.nodeType === 1) {
        if (i27.hasAttributes())
          for (const l26 of i27.getAttributeNames())
            if (l26.endsWith(st4)) {
              const $25 = p26[n33++], u35 = i27.getAttribute(l26).split(_3), O20 = /([.?@])?(.*)/.exec($25);
              h26.push({ type: 1, index: o13, name: O20[2], strings: u35, ctor: O20[1] === "." ? yt4 : O20[1] === "?" ? vt4 : O20[1] === "@" ? Et4 : R4 }), i27.removeAttribute(l26);
            } else
              l26.startsWith(_3) && (h26.push({ type: 6, index: o13 }), i27.removeAttribute(l26));
        if (rt4.test(i27.tagName)) {
          const l26 = i27.textContent.split(_3), $25 = l26.length - 1;
          if ($25 > 0) {
            i27.textContent = N3 ? N3.emptyScript : "";
            for (let u35 = 0; u35 < $25; u35++)
              i27.append(l26[u35], P4()), g3.nextNode(), h26.push({ type: 2, index: ++o13 });
            i27.append(l26[$25], P4());
          }
        }
      } else if (i27.nodeType === 8)
        if (i27.data === it4)
          h26.push({ type: 2, index: o13 });
        else {
          let l26 = -1;
          for (; (l26 = i27.data.indexOf(_3, l26 + 1)) !== -1; )
            h26.push({ type: 7, index: o13 }), l26 += _3.length - 1;
        }
      o13++;
    }
  }
  static createElement(t19, e11) {
    const s18 = m4.createElement("template");
    return s18.innerHTML = t19, s18;
  }
};
function E4(r24, t19, e11 = r24, s18) {
  var n33, a22;
  if (t19 === v5)
    return t19;
  let i27 = s18 !== void 0 ? (n33 = e11._$Co) == null ? void 0 : n33[s18] : e11._$Cl;
  const o13 = C4(t19) ? void 0 : t19._$litDirective$;
  return (i27 == null ? void 0 : i27.constructor) !== o13 && ((a22 = i27 == null ? void 0 : i27._$AO) == null || a22.call(i27, false), o13 === void 0 ? i27 = void 0 : (i27 = new o13(r24), i27._$AT(r24, e11, s18)), s18 !== void 0 ? (e11._$Co ?? (e11._$Co = []))[s18] = i27 : e11._$Cl = i27), i27 !== void 0 && (t19 = E4(r24, i27._$AS(r24, t19.values), i27, s18)), t19;
}
var mt4 = class {
  constructor(t19, e11) {
    this._$AV = [], this._$AN = void 0, this._$AD = t19, this._$AM = e11;
  }
  get parentNode() {
    return this._$AM.parentNode;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  u(t19) {
    const { el: { content: e11 }, parts: s18 } = this._$AD, i27 = ((t19 == null ? void 0 : t19.creationScope) ?? m4).importNode(e11, true);
    g3.currentNode = i27;
    let o13 = g3.nextNode(), n33 = 0, a22 = 0, h26 = s18[0];
    for (; h26 !== void 0; ) {
      if (n33 === h26.index) {
        let c27;
        h26.type === 2 ? c27 = new x6(o13, o13.nextSibling, this, t19) : h26.type === 1 ? c27 = new h26.ctor(o13, h26.name, h26.strings, this, t19) : h26.type === 6 && (c27 = new St4(o13, this, t19)), this._$AV.push(c27), h26 = s18[++a22];
      }
      n33 !== (h26 == null ? void 0 : h26.index) && (o13 = g3.nextNode(), n33++);
    }
    return g3.currentNode = m4, i27;
  }
  p(t19) {
    let e11 = 0;
    for (const s18 of this._$AV)
      s18 !== void 0 && (s18.strings !== void 0 ? (s18._$AI(t19, s18, e11), e11 += s18.strings.length - 2) : s18._$AI(t19[e11])), e11++;
  }
};
var x6 = class _x {
  get _$AU() {
    var t19;
    return ((t19 = this._$AM) == null ? void 0 : t19._$AU) ?? this._$Cv;
  }
  constructor(t19, e11, s18, i27) {
    this.type = 2, this._$AH = d3, this._$AN = void 0, this._$AA = t19, this._$AB = e11, this._$AM = s18, this.options = i27, this._$Cv = (i27 == null ? void 0 : i27.isConnected) ?? true;
  }
  get parentNode() {
    let t19 = this._$AA.parentNode;
    const e11 = this._$AM;
    return e11 !== void 0 && (t19 == null ? void 0 : t19.nodeType) === 11 && (t19 = e11.parentNode), t19;
  }
  get startNode() {
    return this._$AA;
  }
  get endNode() {
    return this._$AB;
  }
  _$AI(t19, e11 = this) {
    t19 = E4(this, t19, e11), C4(t19) ? t19 === d3 || t19 == null || t19 === "" ? (this._$AH !== d3 && this._$AR(), this._$AH = d3) : t19 !== this._$AH && t19 !== v5 && this._(t19) : t19._$litType$ !== void 0 ? this.$(t19) : t19.nodeType !== void 0 ? this.T(t19) : At4(t19) ? this.k(t19) : this._(t19);
  }
  O(t19) {
    return this._$AA.parentNode.insertBefore(t19, this._$AB);
  }
  T(t19) {
    this._$AH !== t19 && (this._$AR(), this._$AH = this.O(t19));
  }
  _(t19) {
    this._$AH !== d3 && C4(this._$AH) ? this._$AA.nextSibling.data = t19 : this.T(m4.createTextNode(t19)), this._$AH = t19;
  }
  $(t19) {
    var o13;
    const { values: e11, _$litType$: s18 } = t19, i27 = typeof s18 == "number" ? this._$AC(t19) : (s18.el === void 0 && (s18.el = U4.createElement(ot4(s18.h, s18.h[0]), this.options)), s18);
    if (((o13 = this._$AH) == null ? void 0 : o13._$AD) === i27)
      this._$AH.p(e11);
    else {
      const n33 = new mt4(i27, this), a22 = n33.u(this.options);
      n33.p(e11), this.T(a22), this._$AH = n33;
    }
  }
  _$AC(t19) {
    let e11 = Y3.get(t19.strings);
    return e11 === void 0 && Y3.set(t19.strings, e11 = new U4(t19)), e11;
  }
  k(t19) {
    V4(this._$AH) || (this._$AH = [], this._$AR());
    const e11 = this._$AH;
    let s18, i27 = 0;
    for (const o13 of t19)
      i27 === e11.length ? e11.push(s18 = new _x(this.O(P4()), this.O(P4()), this, this.options)) : s18 = e11[i27], s18._$AI(o13), i27++;
    i27 < e11.length && (this._$AR(s18 && s18._$AB.nextSibling, i27), e11.length = i27);
  }
  _$AR(t19 = this._$AA.nextSibling, e11) {
    var s18;
    for ((s18 = this._$AP) == null ? void 0 : s18.call(this, false, true, e11); t19 && t19 !== this._$AB; ) {
      const i27 = t19.nextSibling;
      t19.remove(), t19 = i27;
    }
  }
  setConnected(t19) {
    var e11;
    this._$AM === void 0 && (this._$Cv = t19, (e11 = this._$AP) == null || e11.call(this, t19));
  }
};
var R4 = class {
  get tagName() {
    return this.element.tagName;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  constructor(t19, e11, s18, i27, o13) {
    this.type = 1, this._$AH = d3, this._$AN = void 0, this.element = t19, this.name = e11, this._$AM = i27, this.options = o13, s18.length > 2 || s18[0] !== "" || s18[1] !== "" ? (this._$AH = Array(s18.length - 1).fill(new String()), this.strings = s18) : this._$AH = d3;
  }
  _$AI(t19, e11 = this, s18, i27) {
    const o13 = this.strings;
    let n33 = false;
    if (o13 === void 0)
      t19 = E4(this, t19, e11, 0), n33 = !C4(t19) || t19 !== this._$AH && t19 !== v5, n33 && (this._$AH = t19);
    else {
      const a22 = t19;
      let h26, c27;
      for (t19 = o13[0], h26 = 0; h26 < o13.length - 1; h26++)
        c27 = E4(this, a22[s18 + h26], e11, h26), c27 === v5 && (c27 = this._$AH[h26]), n33 || (n33 = !C4(c27) || c27 !== this._$AH[h26]), c27 === d3 ? t19 = d3 : t19 !== d3 && (t19 += (c27 ?? "") + o13[h26 + 1]), this._$AH[h26] = c27;
    }
    n33 && !i27 && this.j(t19);
  }
  j(t19) {
    t19 === d3 ? this.element.removeAttribute(this.name) : this.element.setAttribute(this.name, t19 ?? "");
  }
};
var yt4 = class extends R4 {
  constructor() {
    super(...arguments), this.type = 3;
  }
  j(t19) {
    this.element[this.name] = t19 === d3 ? void 0 : t19;
  }
};
var vt4 = class extends R4 {
  constructor() {
    super(...arguments), this.type = 4;
  }
  j(t19) {
    this.element.toggleAttribute(this.name, !!t19 && t19 !== d3);
  }
};
var Et4 = class extends R4 {
  constructor(t19, e11, s18, i27, o13) {
    super(t19, e11, s18, i27, o13), this.type = 5;
  }
  _$AI(t19, e11 = this) {
    if ((t19 = E4(this, t19, e11, 0) ?? d3) === v5)
      return;
    const s18 = this._$AH, i27 = t19 === d3 && s18 !== d3 || t19.capture !== s18.capture || t19.once !== s18.once || t19.passive !== s18.passive, o13 = t19 !== d3 && (s18 === d3 || i27);
    i27 && this.element.removeEventListener(this.name, this, s18), o13 && this.element.addEventListener(this.name, this, t19), this._$AH = t19;
  }
  handleEvent(t19) {
    var e11;
    typeof this._$AH == "function" ? this._$AH.call(((e11 = this.options) == null ? void 0 : e11.host) ?? this.element, t19) : this._$AH.handleEvent(t19);
  }
};
var St4 = class {
  constructor(t19, e11, s18) {
    this.element = t19, this.type = 6, this._$AN = void 0, this._$AM = e11, this.options = s18;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  _$AI(t19) {
    E4(this, t19);
  }
};
var z4 = w4.litHtmlPolyfillSupport;
z4 == null || z4(U4, x6), (w4.litHtmlVersions ?? (w4.litHtmlVersions = [])).push("3.2.1");
var bt4 = (r24, t19, e11) => {
  const s18 = (e11 == null ? void 0 : e11.renderBefore) ?? t19;
  let i27 = s18._$litPart$;
  if (i27 === void 0) {
    const o13 = (e11 == null ? void 0 : e11.renderBefore) ?? null;
    s18._$litPart$ = i27 = new x6(t19.insertBefore(P4(), o13), o13, void 0, e11 ?? {});
  }
  return i27._$AI(r24), i27;
};
var H4 = class extends y4 {
  constructor() {
    super(...arguments), this.renderOptions = { host: this }, this._$Do = void 0;
  }
  createRenderRoot() {
    var e11;
    const t19 = super.createRenderRoot();
    return (e11 = this.renderOptions).renderBefore ?? (e11.renderBefore = t19.firstChild), t19;
  }
  update(t19) {
    const e11 = this.render();
    this.hasUpdated || (this.renderOptions.isConnected = this.isConnected), super.update(t19), this._$Do = bt4(e11, this.renderRoot, this.renderOptions);
  }
  connectedCallback() {
    var t19;
    super.connectedCallback(), (t19 = this._$Do) == null || t19.setConnected(true);
  }
  disconnectedCallback() {
    var t19;
    super.disconnectedCallback(), (t19 = this._$Do) == null || t19.setConnected(false);
  }
  render() {
    return v5;
  }
};
var tt4;
H4._$litElement$ = true, H4.finalized = true, (tt4 = globalThis.litElementHydrateSupport) == null || tt4.call(globalThis, { LitElement: H4 });
var D4 = globalThis.litElementPolyfillSupport;
D4 == null || D4({ LitElement: H4 });
(globalThis.litElementVersions ?? (globalThis.litElementVersions = [])).push("4.1.1");
var wt3 = { attribute: true, type: String, converter: M5, reflect: false, hasChanged: I4 };
var Pt3 = (r24 = wt3, t19, e11) => {
  const { kind: s18, metadata: i27 } = e11;
  let o13 = globalThis.litPropertyMetadata.get(i27);
  if (o13 === void 0 && globalThis.litPropertyMetadata.set(i27, o13 = /* @__PURE__ */ new Map()), o13.set(e11.name, r24), s18 === "accessor") {
    const { name: n33 } = e11;
    return { set(a22) {
      const h26 = t19.get.call(this);
      t19.set.call(this, a22), this.requestUpdate(n33, h26, r24);
    }, init(a22) {
      return a22 !== void 0 && this.P(n33, void 0, r24), a22;
    } };
  }
  if (s18 === "setter") {
    const { name: n33 } = e11;
    return function(a22) {
      const h26 = this[n33];
      t19.call(this, a22), this.requestUpdate(n33, h26, r24);
    };
  }
  throw Error("Unsupported decorator location: " + s18);
};
function Mt4(r24) {
  return (t19, e11) => typeof e11 == "object" ? Pt3(r24, t19, e11) : ((s18, i27, o13) => {
    const n33 = i27.hasOwnProperty(o13);
    return i27.constructor.createProperty(o13, n33 ? { ...s18, wrapped: true } : s18), n33 ? Object.getOwnPropertyDescriptor(i27, o13) : void 0;
  })(r24, t19, e11);
}

// node_modules/@frc-web-components/fwc/dist/state-Cn3aen3G.js
function n7(t19) {
  return Mt4({ ...t19, state: true, attribute: false });
}

// node_modules/@frc-web-components/fwc/dist/query-BrpQj_Qi.js
var i5 = (n33, r24, e11) => (e11.configurable = true, e11.enumerable = true, Reflect.decorate && typeof r24 != "object" && Object.defineProperty(n33, r24, e11), e11);
function h4(n33, r24) {
  return (e11, l26, c27) => {
    const u35 = (s18) => {
      var o13;
      return ((o13 = s18.renderRoot) == null ? void 0 : o13.querySelector(n33)) ?? null;
    };
    if (r24) {
      const { get: s18, set: o13 } = typeof l26 == "object" ? e11 : c27 ?? (() => {
        const t19 = Symbol();
        return { get() {
          return this[t19];
        }, set(a22) {
          this[t19] = a22;
        } };
      })();
      return i5(e11, l26, { get() {
        let t19 = s18.call(this);
        return t19 === void 0 && (t19 = u35(this), (t19 !== null || this.hasUpdated) && o13.call(this, t19)), t19;
      } });
    }
    return i5(e11, l26, { get() {
      return u35(this);
    } });
  };
}

// node_modules/@frc-web-components/fwc/dist/transform-DR-Bw75L.js
var hn = { value: () => {
} };
function Dt2() {
  for (var t19 = 0, n33 = arguments.length, e11 = {}, r24; t19 < n33; ++t19) {
    if (!(r24 = arguments[t19] + "") || r24 in e11 || /[\s.]/.test(r24))
      throw new Error("illegal type: " + r24);
    e11[r24] = [];
  }
  return new K5(e11);
}
function K5(t19) {
  this._ = t19;
}
function pn2(t19, n33) {
  return t19.trim().split(/^|\s+/).map(function(e11) {
    var r24 = "", i27 = e11.indexOf(".");
    if (i27 >= 0 && (r24 = e11.slice(i27 + 1), e11 = e11.slice(0, i27)), e11 && !n33.hasOwnProperty(e11))
      throw new Error("unknown type: " + e11);
    return { type: e11, name: r24 };
  });
}
K5.prototype = Dt2.prototype = {
  constructor: K5,
  on: function(t19, n33) {
    var e11 = this._, r24 = pn2(t19 + "", e11), i27, o13 = -1, s18 = r24.length;
    if (arguments.length < 2) {
      for (; ++o13 < s18; )
        if ((i27 = (t19 = r24[o13]).type) && (i27 = dn2(e11[i27], t19.name)))
          return i27;
      return;
    }
    if (n33 != null && typeof n33 != "function")
      throw new Error("invalid callback: " + n33);
    for (; ++o13 < s18; )
      if (i27 = (t19 = r24[o13]).type)
        e11[i27] = bt5(e11[i27], t19.name, n33);
      else if (n33 == null)
        for (i27 in e11)
          e11[i27] = bt5(e11[i27], t19.name, null);
    return this;
  },
  copy: function() {
    var t19 = {}, n33 = this._;
    for (var e11 in n33)
      t19[e11] = n33[e11].slice();
    return new K5(t19);
  },
  call: function(t19, n33) {
    if ((i27 = arguments.length - 2) > 0)
      for (var e11 = new Array(i27), r24 = 0, i27, o13; r24 < i27; ++r24)
        e11[r24] = arguments[r24 + 2];
    if (!this._.hasOwnProperty(t19))
      throw new Error("unknown type: " + t19);
    for (o13 = this._[t19], r24 = 0, i27 = o13.length; r24 < i27; ++r24)
      o13[r24].value.apply(n33, e11);
  },
  apply: function(t19, n33, e11) {
    if (!this._.hasOwnProperty(t19))
      throw new Error("unknown type: " + t19);
    for (var r24 = this._[t19], i27 = 0, o13 = r24.length; i27 < o13; ++i27)
      r24[i27].value.apply(n33, e11);
  }
};
function dn2(t19, n33) {
  for (var e11 = 0, r24 = t19.length, i27; e11 < r24; ++e11)
    if ((i27 = t19[e11]).name === n33)
      return i27.value;
}
function bt5(t19, n33, e11) {
  for (var r24 = 0, i27 = t19.length; r24 < i27; ++r24)
    if (t19[r24].name === n33) {
      t19[r24] = hn, t19 = t19.slice(0, r24).concat(t19.slice(r24 + 1));
      break;
    }
  return e11 != null && t19.push({ name: n33, value: e11 }), t19;
}
var at4 = "http://www.w3.org/1999/xhtml";
var Nt3 = {
  svg: "http://www.w3.org/2000/svg",
  xhtml: at4,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};
function et5(t19) {
  var n33 = t19 += "", e11 = n33.indexOf(":");
  return e11 >= 0 && (n33 = t19.slice(0, e11)) !== "xmlns" && (t19 = t19.slice(e11 + 1)), Nt3.hasOwnProperty(n33) ? { space: Nt3[n33], local: t19 } : t19;
}
function _n2(t19) {
  return function() {
    var n33 = this.ownerDocument, e11 = this.namespaceURI;
    return e11 === at4 && n33.documentElement.namespaceURI === at4 ? n33.createElement(t19) : n33.createElementNS(e11, t19);
  };
}
function gn2(t19) {
  return function() {
    return this.ownerDocument.createElementNS(t19.space, t19.local);
  };
}
function Pt4(t19) {
  var n33 = et5(t19);
  return (n33.local ? gn2 : _n2)(n33);
}
function yn2() {
}
function dt5(t19) {
  return t19 == null ? yn2 : function() {
    return this.querySelector(t19);
  };
}
function wn2(t19) {
  typeof t19 != "function" && (t19 = dt5(t19));
  for (var n33 = this._groups, e11 = n33.length, r24 = new Array(e11), i27 = 0; i27 < e11; ++i27)
    for (var o13 = n33[i27], s18 = o13.length, a22 = r24[i27] = new Array(s18), u35, f40, l26 = 0; l26 < s18; ++l26)
      (u35 = o13[l26]) && (f40 = t19.call(u35, u35.__data__, l26, o13)) && ("__data__" in u35 && (f40.__data__ = u35.__data__), a22[l26] = f40);
  return new y5(r24, this._parents);
}
function xn2(t19) {
  return t19 == null ? [] : Array.isArray(t19) ? t19 : Array.from(t19);
}
function vn2() {
  return [];
}
function Ot5(t19) {
  return t19 == null ? vn2 : function() {
    return this.querySelectorAll(t19);
  };
}
function mn2(t19) {
  return function() {
    return xn2(t19.apply(this, arguments));
  };
}
function bn2(t19) {
  typeof t19 == "function" ? t19 = mn2(t19) : t19 = Ot5(t19);
  for (var n33 = this._groups, e11 = n33.length, r24 = [], i27 = [], o13 = 0; o13 < e11; ++o13)
    for (var s18 = n33[o13], a22 = s18.length, u35, f40 = 0; f40 < a22; ++f40)
      (u35 = s18[f40]) && (r24.push(t19.call(u35, u35.__data__, f40, s18)), i27.push(u35));
  return new y5(r24, i27);
}
function Lt2(t19) {
  return function() {
    return this.matches(t19);
  };
}
function Vt2(t19) {
  return function(n33) {
    return n33.matches(t19);
  };
}
var Nn2 = Array.prototype.find;
function An2(t19) {
  return function() {
    return Nn2.call(this.children, t19);
  };
}
function $n2() {
  return this.firstElementChild;
}
function kn2(t19) {
  return this.select(t19 == null ? $n2 : An2(typeof t19 == "function" ? t19 : Vt2(t19)));
}
var En2 = Array.prototype.filter;
function Sn2() {
  return Array.from(this.children);
}
function Cn2(t19) {
  return function() {
    return En2.call(this.children, t19);
  };
}
function Tn2(t19) {
  return this.selectAll(t19 == null ? Sn2 : Cn2(typeof t19 == "function" ? t19 : Vt2(t19)));
}
function Rn2(t19) {
  typeof t19 != "function" && (t19 = Lt2(t19));
  for (var n33 = this._groups, e11 = n33.length, r24 = new Array(e11), i27 = 0; i27 < e11; ++i27)
    for (var o13 = n33[i27], s18 = o13.length, a22 = r24[i27] = [], u35, f40 = 0; f40 < s18; ++f40)
      (u35 = o13[f40]) && t19.call(u35, u35.__data__, f40, o13) && a22.push(u35);
  return new y5(r24, this._parents);
}
function Yt2(t19) {
  return new Array(t19.length);
}
function Mn2() {
  return new y5(this._enter || this._groups.map(Yt2), this._parents);
}
function J5(t19, n33) {
  this.ownerDocument = t19.ownerDocument, this.namespaceURI = t19.namespaceURI, this._next = null, this._parent = t19, this.__data__ = n33;
}
J5.prototype = {
  constructor: J5,
  appendChild: function(t19) {
    return this._parent.insertBefore(t19, this._next);
  },
  insertBefore: function(t19, n33) {
    return this._parent.insertBefore(t19, n33);
  },
  querySelector: function(t19) {
    return this._parent.querySelector(t19);
  },
  querySelectorAll: function(t19) {
    return this._parent.querySelectorAll(t19);
  }
};
function In2(t19) {
  return function() {
    return t19;
  };
}
function Fn2(t19, n33, e11, r24, i27, o13) {
  for (var s18 = 0, a22, u35 = n33.length, f40 = o13.length; s18 < f40; ++s18)
    (a22 = n33[s18]) ? (a22.__data__ = o13[s18], r24[s18] = a22) : e11[s18] = new J5(t19, o13[s18]);
  for (; s18 < u35; ++s18)
    (a22 = n33[s18]) && (i27[s18] = a22);
}
function Hn2(t19, n33, e11, r24, i27, o13, s18) {
  var a22, u35, f40 = /* @__PURE__ */ new Map(), l26 = n33.length, c27 = o13.length, h26 = new Array(l26), p26;
  for (a22 = 0; a22 < l26; ++a22)
    (u35 = n33[a22]) && (h26[a22] = p26 = s18.call(u35, u35.__data__, a22, n33) + "", f40.has(p26) ? i27[a22] = u35 : f40.set(p26, u35));
  for (a22 = 0; a22 < c27; ++a22)
    p26 = s18.call(t19, o13[a22], a22, o13) + "", (u35 = f40.get(p26)) ? (r24[a22] = u35, u35.__data__ = o13[a22], f40.delete(p26)) : e11[a22] = new J5(t19, o13[a22]);
  for (a22 = 0; a22 < l26; ++a22)
    (u35 = n33[a22]) && f40.get(h26[a22]) === u35 && (i27[a22] = u35);
}
function qn2(t19) {
  return t19.__data__;
}
function Xn2(t19, n33) {
  if (!arguments.length)
    return Array.from(this, qn2);
  var e11 = n33 ? Hn2 : Fn2, r24 = this._parents, i27 = this._groups;
  typeof t19 != "function" && (t19 = In2(t19));
  for (var o13 = i27.length, s18 = new Array(o13), a22 = new Array(o13), u35 = new Array(o13), f40 = 0; f40 < o13; ++f40) {
    var l26 = r24[f40], c27 = i27[f40], h26 = c27.length, p26 = Dn2(t19.call(l26, l26 && l26.__data__, f40, r24)), d34 = p26.length, _21 = a22[f40] = new Array(d34), $25 = s18[f40] = new Array(d34), cn3 = u35[f40] = new Array(h26);
    e11(l26, c27, _21, $25, cn3, p26, n33);
    for (var M13 = 0, Y13 = 0, vt9, mt13; M13 < d34; ++M13)
      if (vt9 = _21[M13]) {
        for (M13 >= Y13 && (Y13 = M13 + 1); !(mt13 = $25[Y13]) && ++Y13 < d34; )
          ;
        vt9._next = mt13 || null;
      }
  }
  return s18 = new y5(s18, r24), s18._enter = a22, s18._exit = u35, s18;
}
function Dn2(t19) {
  return typeof t19 == "object" && "length" in t19 ? t19 : Array.from(t19);
}
function Pn2() {
  return new y5(this._exit || this._groups.map(Yt2), this._parents);
}
function On2(t19, n33, e11) {
  var r24 = this.enter(), i27 = this, o13 = this.exit();
  return typeof t19 == "function" ? (r24 = t19(r24), r24 && (r24 = r24.selection())) : r24 = r24.append(t19 + ""), n33 != null && (i27 = n33(i27), i27 && (i27 = i27.selection())), e11 == null ? o13.remove() : e11(o13), r24 && i27 ? r24.merge(i27).order() : i27;
}
function Ln2(t19) {
  for (var n33 = t19.selection ? t19.selection() : t19, e11 = this._groups, r24 = n33._groups, i27 = e11.length, o13 = r24.length, s18 = Math.min(i27, o13), a22 = new Array(i27), u35 = 0; u35 < s18; ++u35)
    for (var f40 = e11[u35], l26 = r24[u35], c27 = f40.length, h26 = a22[u35] = new Array(c27), p26, d34 = 0; d34 < c27; ++d34)
      (p26 = f40[d34] || l26[d34]) && (h26[d34] = p26);
  for (; u35 < i27; ++u35)
    a22[u35] = e11[u35];
  return new y5(a22, this._parents);
}
function Vn2() {
  for (var t19 = this._groups, n33 = -1, e11 = t19.length; ++n33 < e11; )
    for (var r24 = t19[n33], i27 = r24.length - 1, o13 = r24[i27], s18; --i27 >= 0; )
      (s18 = r24[i27]) && (o13 && s18.compareDocumentPosition(o13) ^ 4 && o13.parentNode.insertBefore(s18, o13), o13 = s18);
  return this;
}
function Yn2(t19) {
  t19 || (t19 = Bn2);
  function n33(c27, h26) {
    return c27 && h26 ? t19(c27.__data__, h26.__data__) : !c27 - !h26;
  }
  for (var e11 = this._groups, r24 = e11.length, i27 = new Array(r24), o13 = 0; o13 < r24; ++o13) {
    for (var s18 = e11[o13], a22 = s18.length, u35 = i27[o13] = new Array(a22), f40, l26 = 0; l26 < a22; ++l26)
      (f40 = s18[l26]) && (u35[l26] = f40);
    u35.sort(n33);
  }
  return new y5(i27, this._parents).order();
}
function Bn2(t19, n33) {
  return t19 < n33 ? -1 : t19 > n33 ? 1 : t19 >= n33 ? 0 : NaN;
}
function zn2() {
  var t19 = arguments[0];
  return arguments[0] = this, t19.apply(null, arguments), this;
}
function Un2() {
  return Array.from(this);
}
function Kn2() {
  for (var t19 = this._groups, n33 = 0, e11 = t19.length; n33 < e11; ++n33)
    for (var r24 = t19[n33], i27 = 0, o13 = r24.length; i27 < o13; ++i27) {
      var s18 = r24[i27];
      if (s18)
        return s18;
    }
  return null;
}
function Gn2() {
  let t19 = 0;
  for (const n33 of this)
    ++t19;
  return t19;
}
function Wn2() {
  return !this.node();
}
function Jn2(t19) {
  for (var n33 = this._groups, e11 = 0, r24 = n33.length; e11 < r24; ++e11)
    for (var i27 = n33[e11], o13 = 0, s18 = i27.length, a22; o13 < s18; ++o13)
      (a22 = i27[o13]) && t19.call(a22, a22.__data__, o13, i27);
  return this;
}
function Qn2(t19) {
  return function() {
    this.removeAttribute(t19);
  };
}
function Zn2(t19) {
  return function() {
    this.removeAttributeNS(t19.space, t19.local);
  };
}
function jn2(t19, n33) {
  return function() {
    this.setAttribute(t19, n33);
  };
}
function te3(t19, n33) {
  return function() {
    this.setAttributeNS(t19.space, t19.local, n33);
  };
}
function ne3(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    e11 == null ? this.removeAttribute(t19) : this.setAttribute(t19, e11);
  };
}
function ee3(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    e11 == null ? this.removeAttributeNS(t19.space, t19.local) : this.setAttributeNS(t19.space, t19.local, e11);
  };
}
function re3(t19, n33) {
  var e11 = et5(t19);
  if (arguments.length < 2) {
    var r24 = this.node();
    return e11.local ? r24.getAttributeNS(e11.space, e11.local) : r24.getAttribute(e11);
  }
  return this.each((n33 == null ? e11.local ? Zn2 : Qn2 : typeof n33 == "function" ? e11.local ? ee3 : ne3 : e11.local ? te3 : jn2)(e11, n33));
}
function Bt2(t19) {
  return t19.ownerDocument && t19.ownerDocument.defaultView || t19.document && t19 || t19.defaultView;
}
function ie3(t19) {
  return function() {
    this.style.removeProperty(t19);
  };
}
function oe3(t19, n33, e11) {
  return function() {
    this.style.setProperty(t19, n33, e11);
  };
}
function se2(t19, n33, e11) {
  return function() {
    var r24 = n33.apply(this, arguments);
    r24 == null ? this.style.removeProperty(t19) : this.style.setProperty(t19, r24, e11);
  };
}
function ae3(t19, n33, e11) {
  return arguments.length > 1 ? this.each((n33 == null ? ie3 : typeof n33 == "function" ? se2 : oe3)(t19, n33, e11 ?? "")) : T6(this.node(), t19);
}
function T6(t19, n33) {
  return t19.style.getPropertyValue(n33) || Bt2(t19).getComputedStyle(t19, null).getPropertyValue(n33);
}
function ue3(t19) {
  return function() {
    delete this[t19];
  };
}
function fe3(t19, n33) {
  return function() {
    this[t19] = n33;
  };
}
function le3(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    e11 == null ? delete this[t19] : this[t19] = e11;
  };
}
function ce3(t19, n33) {
  return arguments.length > 1 ? this.each((n33 == null ? ue3 : typeof n33 == "function" ? le3 : fe3)(t19, n33)) : this.node()[t19];
}
function zt2(t19) {
  return t19.trim().split(/^|\s+/);
}
function _t3(t19) {
  return t19.classList || new Ut4(t19);
}
function Ut4(t19) {
  this._node = t19, this._names = zt2(t19.getAttribute("class") || "");
}
Ut4.prototype = {
  add: function(t19) {
    var n33 = this._names.indexOf(t19);
    n33 < 0 && (this._names.push(t19), this._node.setAttribute("class", this._names.join(" ")));
  },
  remove: function(t19) {
    var n33 = this._names.indexOf(t19);
    n33 >= 0 && (this._names.splice(n33, 1), this._node.setAttribute("class", this._names.join(" ")));
  },
  contains: function(t19) {
    return this._names.indexOf(t19) >= 0;
  }
};
function Kt2(t19, n33) {
  for (var e11 = _t3(t19), r24 = -1, i27 = n33.length; ++r24 < i27; )
    e11.add(n33[r24]);
}
function Gt2(t19, n33) {
  for (var e11 = _t3(t19), r24 = -1, i27 = n33.length; ++r24 < i27; )
    e11.remove(n33[r24]);
}
function he3(t19) {
  return function() {
    Kt2(this, t19);
  };
}
function pe3(t19) {
  return function() {
    Gt2(this, t19);
  };
}
function de3(t19, n33) {
  return function() {
    (n33.apply(this, arguments) ? Kt2 : Gt2)(this, t19);
  };
}
function _e3(t19, n33) {
  var e11 = zt2(t19 + "");
  if (arguments.length < 2) {
    for (var r24 = _t3(this.node()), i27 = -1, o13 = e11.length; ++i27 < o13; )
      if (!r24.contains(e11[i27]))
        return false;
    return true;
  }
  return this.each((typeof n33 == "function" ? de3 : n33 ? he3 : pe3)(e11, n33));
}
function ge3() {
  this.textContent = "";
}
function ye3(t19) {
  return function() {
    this.textContent = t19;
  };
}
function we3(t19) {
  return function() {
    var n33 = t19.apply(this, arguments);
    this.textContent = n33 ?? "";
  };
}
function xe3(t19) {
  return arguments.length ? this.each(t19 == null ? ge3 : (typeof t19 == "function" ? we3 : ye3)(t19)) : this.node().textContent;
}
function ve3() {
  this.innerHTML = "";
}
function me3(t19) {
  return function() {
    this.innerHTML = t19;
  };
}
function be3(t19) {
  return function() {
    var n33 = t19.apply(this, arguments);
    this.innerHTML = n33 ?? "";
  };
}
function Ne3(t19) {
  return arguments.length ? this.each(t19 == null ? ve3 : (typeof t19 == "function" ? be3 : me3)(t19)) : this.node().innerHTML;
}
function Ae3() {
  this.nextSibling && this.parentNode.appendChild(this);
}
function $e3() {
  return this.each(Ae3);
}
function ke3() {
  this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function Ee3() {
  return this.each(ke3);
}
function Se3(t19) {
  var n33 = typeof t19 == "function" ? t19 : Pt4(t19);
  return this.select(function() {
    return this.appendChild(n33.apply(this, arguments));
  });
}
function Ce3() {
  return null;
}
function Te3(t19, n33) {
  var e11 = typeof t19 == "function" ? t19 : Pt4(t19), r24 = n33 == null ? Ce3 : typeof n33 == "function" ? n33 : dt5(n33);
  return this.select(function() {
    return this.insertBefore(e11.apply(this, arguments), r24.apply(this, arguments) || null);
  });
}
function Re3() {
  var t19 = this.parentNode;
  t19 && t19.removeChild(this);
}
function Me3() {
  return this.each(Re3);
}
function Ie3() {
  var t19 = this.cloneNode(false), n33 = this.parentNode;
  return n33 ? n33.insertBefore(t19, this.nextSibling) : t19;
}
function Fe3() {
  var t19 = this.cloneNode(true), n33 = this.parentNode;
  return n33 ? n33.insertBefore(t19, this.nextSibling) : t19;
}
function He3(t19) {
  return this.select(t19 ? Fe3 : Ie3);
}
function qe3(t19) {
  return arguments.length ? this.property("__data__", t19) : this.node().__data__;
}
function Xe3(t19) {
  return function(n33) {
    t19.call(this, n33, this.__data__);
  };
}
function De3(t19) {
  return t19.trim().split(/^|\s+/).map(function(n33) {
    var e11 = "", r24 = n33.indexOf(".");
    return r24 >= 0 && (e11 = n33.slice(r24 + 1), n33 = n33.slice(0, r24)), { type: n33, name: e11 };
  });
}
function Pe3(t19) {
  return function() {
    var n33 = this.__on;
    if (n33) {
      for (var e11 = 0, r24 = -1, i27 = n33.length, o13; e11 < i27; ++e11)
        o13 = n33[e11], (!t19.type || o13.type === t19.type) && o13.name === t19.name ? this.removeEventListener(o13.type, o13.listener, o13.options) : n33[++r24] = o13;
      ++r24 ? n33.length = r24 : delete this.__on;
    }
  };
}
function Oe3(t19, n33, e11) {
  return function() {
    var r24 = this.__on, i27, o13 = Xe3(n33);
    if (r24) {
      for (var s18 = 0, a22 = r24.length; s18 < a22; ++s18)
        if ((i27 = r24[s18]).type === t19.type && i27.name === t19.name) {
          this.removeEventListener(i27.type, i27.listener, i27.options), this.addEventListener(i27.type, i27.listener = o13, i27.options = e11), i27.value = n33;
          return;
        }
    }
    this.addEventListener(t19.type, o13, e11), i27 = { type: t19.type, name: t19.name, value: n33, listener: o13, options: e11 }, r24 ? r24.push(i27) : this.__on = [i27];
  };
}
function Le3(t19, n33, e11) {
  var r24 = De3(t19 + ""), i27, o13 = r24.length, s18;
  if (arguments.length < 2) {
    var a22 = this.node().__on;
    if (a22) {
      for (var u35 = 0, f40 = a22.length, l26; u35 < f40; ++u35)
        for (i27 = 0, l26 = a22[u35]; i27 < o13; ++i27)
          if ((s18 = r24[i27]).type === l26.type && s18.name === l26.name)
            return l26.value;
    }
    return;
  }
  for (a22 = n33 ? Oe3 : Pe3, i27 = 0; i27 < o13; ++i27)
    this.each(a22(r24[i27], n33, e11));
  return this;
}
function Wt3(t19, n33, e11) {
  var r24 = Bt2(t19), i27 = r24.CustomEvent;
  typeof i27 == "function" ? i27 = new i27(n33, e11) : (i27 = r24.document.createEvent("Event"), e11 ? (i27.initEvent(n33, e11.bubbles, e11.cancelable), i27.detail = e11.detail) : i27.initEvent(n33, false, false)), t19.dispatchEvent(i27);
}
function Ve3(t19, n33) {
  return function() {
    return Wt3(this, t19, n33);
  };
}
function Ye3(t19, n33) {
  return function() {
    return Wt3(this, t19, n33.apply(this, arguments));
  };
}
function Be3(t19, n33) {
  return this.each((typeof n33 == "function" ? Ye3 : Ve3)(t19, n33));
}
function* ze3() {
  for (var t19 = this._groups, n33 = 0, e11 = t19.length; n33 < e11; ++n33)
    for (var r24 = t19[n33], i27 = 0, o13 = r24.length, s18; i27 < o13; ++i27)
      (s18 = r24[i27]) && (yield s18);
}
var Jt2 = [null];
function y5(t19, n33) {
  this._groups = t19, this._parents = n33;
}
function L5() {
  return new y5([[document.documentElement]], Jt2);
}
function Ue3() {
  return this;
}
y5.prototype = L5.prototype = {
  constructor: y5,
  select: wn2,
  selectAll: bn2,
  selectChild: kn2,
  selectChildren: Tn2,
  filter: Rn2,
  data: Xn2,
  enter: Mn2,
  exit: Pn2,
  join: On2,
  merge: Ln2,
  selection: Ue3,
  order: Vn2,
  sort: Yn2,
  call: zn2,
  nodes: Un2,
  node: Kn2,
  size: Gn2,
  empty: Wn2,
  each: Jn2,
  attr: re3,
  style: ae3,
  property: ce3,
  classed: _e3,
  text: xe3,
  html: Ne3,
  raise: $e3,
  lower: Ee3,
  append: Se3,
  insert: Te3,
  remove: Me3,
  clone: He3,
  datum: qe3,
  on: Le3,
  dispatch: Be3,
  [Symbol.iterator]: ze3
};
function Ei2(t19) {
  return typeof t19 == "string" ? new y5([[document.querySelector(t19)]], [document.documentElement]) : new y5([[t19]], Jt2);
}
function gt5(t19, n33, e11) {
  t19.prototype = n33.prototype = e11, e11.constructor = t19;
}
function Qt2(t19, n33) {
  var e11 = Object.create(t19.prototype);
  for (var r24 in n33)
    e11[r24] = n33[r24];
  return e11;
}
function V5() {
}
var X4 = 0.7;
var Q5 = 1 / X4;
var C5 = "\\s*([+-]?\\d+)\\s*";
var D5 = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*";
var v6 = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*";
var Ke3 = /^#([0-9a-f]{3,8})$/;
var Ge3 = new RegExp(`^rgb\\(${C5},${C5},${C5}\\)$`);
var We3 = new RegExp(`^rgb\\(${v6},${v6},${v6}\\)$`);
var Je3 = new RegExp(`^rgba\\(${C5},${C5},${C5},${D5}\\)$`);
var Qe3 = new RegExp(`^rgba\\(${v6},${v6},${v6},${D5}\\)$`);
var Ze3 = new RegExp(`^hsl\\(${D5},${v6},${v6}\\)$`);
var je3 = new RegExp(`^hsla\\(${D5},${v6},${v6},${D5}\\)$`);
var At5 = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
gt5(V5, P5, {
  copy(t19) {
    return Object.assign(new this.constructor(), this, t19);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: $t4,
  // Deprecated! Use color.formatHex.
  formatHex: $t4,
  formatHex8: tr2,
  formatHsl: nr2,
  formatRgb: kt3,
  toString: kt3
});
function $t4() {
  return this.rgb().formatHex();
}
function tr2() {
  return this.rgb().formatHex8();
}
function nr2() {
  return Zt2(this).formatHsl();
}
function kt3() {
  return this.rgb().formatRgb();
}
function P5(t19) {
  var n33, e11;
  return t19 = (t19 + "").trim().toLowerCase(), (n33 = Ke3.exec(t19)) ? (e11 = n33[1].length, n33 = parseInt(n33[1], 16), e11 === 6 ? Et5(n33) : e11 === 3 ? new g4(n33 >> 8 & 15 | n33 >> 4 & 240, n33 >> 4 & 15 | n33 & 240, (n33 & 15) << 4 | n33 & 15, 1) : e11 === 8 ? B5(n33 >> 24 & 255, n33 >> 16 & 255, n33 >> 8 & 255, (n33 & 255) / 255) : e11 === 4 ? B5(n33 >> 12 & 15 | n33 >> 8 & 240, n33 >> 8 & 15 | n33 >> 4 & 240, n33 >> 4 & 15 | n33 & 240, ((n33 & 15) << 4 | n33 & 15) / 255) : null) : (n33 = Ge3.exec(t19)) ? new g4(n33[1], n33[2], n33[3], 1) : (n33 = We3.exec(t19)) ? new g4(n33[1] * 255 / 100, n33[2] * 255 / 100, n33[3] * 255 / 100, 1) : (n33 = Je3.exec(t19)) ? B5(n33[1], n33[2], n33[3], n33[4]) : (n33 = Qe3.exec(t19)) ? B5(n33[1] * 255 / 100, n33[2] * 255 / 100, n33[3] * 255 / 100, n33[4]) : (n33 = Ze3.exec(t19)) ? Tt4(n33[1], n33[2] / 100, n33[3] / 100, 1) : (n33 = je3.exec(t19)) ? Tt4(n33[1], n33[2] / 100, n33[3] / 100, n33[4]) : At5.hasOwnProperty(t19) ? Et5(At5[t19]) : t19 === "transparent" ? new g4(NaN, NaN, NaN, 0) : null;
}
function Et5(t19) {
  return new g4(t19 >> 16 & 255, t19 >> 8 & 255, t19 & 255, 1);
}
function B5(t19, n33, e11, r24) {
  return r24 <= 0 && (t19 = n33 = e11 = NaN), new g4(t19, n33, e11, r24);
}
function er2(t19) {
  return t19 instanceof V5 || (t19 = P5(t19)), t19 ? (t19 = t19.rgb(), new g4(t19.r, t19.g, t19.b, t19.opacity)) : new g4();
}
function ut5(t19, n33, e11, r24) {
  return arguments.length === 1 ? er2(t19) : new g4(t19, n33, e11, r24 ?? 1);
}
function g4(t19, n33, e11, r24) {
  this.r = +t19, this.g = +n33, this.b = +e11, this.opacity = +r24;
}
gt5(g4, ut5, Qt2(V5, {
  brighter(t19) {
    return t19 = t19 == null ? Q5 : Math.pow(Q5, t19), new g4(this.r * t19, this.g * t19, this.b * t19, this.opacity);
  },
  darker(t19) {
    return t19 = t19 == null ? X4 : Math.pow(X4, t19), new g4(this.r * t19, this.g * t19, this.b * t19, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new g4(E5(this.r), E5(this.g), E5(this.b), Z5(this.opacity));
  },
  displayable() {
    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: St5,
  // Deprecated! Use color.formatHex.
  formatHex: St5,
  formatHex8: rr2,
  formatRgb: Ct3,
  toString: Ct3
}));
function St5() {
  return `#${k4(this.r)}${k4(this.g)}${k4(this.b)}`;
}
function rr2() {
  return `#${k4(this.r)}${k4(this.g)}${k4(this.b)}${k4((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}
function Ct3() {
  const t19 = Z5(this.opacity);
  return `${t19 === 1 ? "rgb(" : "rgba("}${E5(this.r)}, ${E5(this.g)}, ${E5(this.b)}${t19 === 1 ? ")" : `, ${t19})`}`;
}
function Z5(t19) {
  return isNaN(t19) ? 1 : Math.max(0, Math.min(1, t19));
}
function E5(t19) {
  return Math.max(0, Math.min(255, Math.round(t19) || 0));
}
function k4(t19) {
  return t19 = E5(t19), (t19 < 16 ? "0" : "") + t19.toString(16);
}
function Tt4(t19, n33, e11, r24) {
  return r24 <= 0 ? t19 = n33 = e11 = NaN : e11 <= 0 || e11 >= 1 ? t19 = n33 = NaN : n33 <= 0 && (t19 = NaN), new w5(t19, n33, e11, r24);
}
function Zt2(t19) {
  if (t19 instanceof w5)
    return new w5(t19.h, t19.s, t19.l, t19.opacity);
  if (t19 instanceof V5 || (t19 = P5(t19)), !t19)
    return new w5();
  if (t19 instanceof w5)
    return t19;
  t19 = t19.rgb();
  var n33 = t19.r / 255, e11 = t19.g / 255, r24 = t19.b / 255, i27 = Math.min(n33, e11, r24), o13 = Math.max(n33, e11, r24), s18 = NaN, a22 = o13 - i27, u35 = (o13 + i27) / 2;
  return a22 ? (n33 === o13 ? s18 = (e11 - r24) / a22 + (e11 < r24) * 6 : e11 === o13 ? s18 = (r24 - n33) / a22 + 2 : s18 = (n33 - e11) / a22 + 4, a22 /= u35 < 0.5 ? o13 + i27 : 2 - o13 - i27, s18 *= 60) : a22 = u35 > 0 && u35 < 1 ? 0 : s18, new w5(s18, a22, u35, t19.opacity);
}
function ir2(t19, n33, e11, r24) {
  return arguments.length === 1 ? Zt2(t19) : new w5(t19, n33, e11, r24 ?? 1);
}
function w5(t19, n33, e11, r24) {
  this.h = +t19, this.s = +n33, this.l = +e11, this.opacity = +r24;
}
gt5(w5, ir2, Qt2(V5, {
  brighter(t19) {
    return t19 = t19 == null ? Q5 : Math.pow(Q5, t19), new w5(this.h, this.s, this.l * t19, this.opacity);
  },
  darker(t19) {
    return t19 = t19 == null ? X4 : Math.pow(X4, t19), new w5(this.h, this.s, this.l * t19, this.opacity);
  },
  rgb() {
    var t19 = this.h % 360 + (this.h < 0) * 360, n33 = isNaN(t19) || isNaN(this.s) ? 0 : this.s, e11 = this.l, r24 = e11 + (e11 < 0.5 ? e11 : 1 - e11) * n33, i27 = 2 * e11 - r24;
    return new g4(
      ot5(t19 >= 240 ? t19 - 240 : t19 + 120, i27, r24),
      ot5(t19, i27, r24),
      ot5(t19 < 120 ? t19 + 240 : t19 - 120, i27, r24),
      this.opacity
    );
  },
  clamp() {
    return new w5(Rt3(this.h), z5(this.s), z5(this.l), Z5(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  },
  formatHsl() {
    const t19 = Z5(this.opacity);
    return `${t19 === 1 ? "hsl(" : "hsla("}${Rt3(this.h)}, ${z5(this.s) * 100}%, ${z5(this.l) * 100}%${t19 === 1 ? ")" : `, ${t19})`}`;
  }
}));
function Rt3(t19) {
  return t19 = (t19 || 0) % 360, t19 < 0 ? t19 + 360 : t19;
}
function z5(t19) {
  return Math.max(0, Math.min(1, t19 || 0));
}
function ot5(t19, n33, e11) {
  return (t19 < 60 ? n33 + (e11 - n33) * t19 / 60 : t19 < 180 ? e11 : t19 < 240 ? n33 + (e11 - n33) * (240 - t19) / 60 : n33) * 255;
}
var jt3 = (t19) => () => t19;
function or2(t19, n33) {
  return function(e11) {
    return t19 + e11 * n33;
  };
}
function sr2(t19, n33, e11) {
  return t19 = Math.pow(t19, e11), n33 = Math.pow(n33, e11) - t19, e11 = 1 / e11, function(r24) {
    return Math.pow(t19 + r24 * n33, e11);
  };
}
function ar2(t19) {
  return (t19 = +t19) == 1 ? tn2 : function(n33, e11) {
    return e11 - n33 ? sr2(n33, e11, t19) : jt3(isNaN(n33) ? e11 : n33);
  };
}
function tn2(t19, n33) {
  var e11 = n33 - t19;
  return e11 ? or2(t19, e11) : jt3(isNaN(t19) ? n33 : t19);
}
var Mt5 = function t5(n33) {
  var e11 = ar2(n33);
  function r24(i27, o13) {
    var s18 = e11((i27 = ut5(i27)).r, (o13 = ut5(o13)).r), a22 = e11(i27.g, o13.g), u35 = e11(i27.b, o13.b), f40 = tn2(i27.opacity, o13.opacity);
    return function(l26) {
      return i27.r = s18(l26), i27.g = a22(l26), i27.b = u35(l26), i27.opacity = f40(l26), i27 + "";
    };
  }
  return r24.gamma = t5, r24;
}(1);
function A5(t19, n33) {
  return t19 = +t19, n33 = +n33, function(e11) {
    return t19 * (1 - e11) + n33 * e11;
  };
}
var ft5 = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
var st5 = new RegExp(ft5.source, "g");
function ur2(t19) {
  return function() {
    return t19;
  };
}
function fr2(t19) {
  return function(n33) {
    return t19(n33) + "";
  };
}
function lr2(t19, n33) {
  var e11 = ft5.lastIndex = st5.lastIndex = 0, r24, i27, o13, s18 = -1, a22 = [], u35 = [];
  for (t19 = t19 + "", n33 = n33 + ""; (r24 = ft5.exec(t19)) && (i27 = st5.exec(n33)); )
    (o13 = i27.index) > e11 && (o13 = n33.slice(e11, o13), a22[s18] ? a22[s18] += o13 : a22[++s18] = o13), (r24 = r24[0]) === (i27 = i27[0]) ? a22[s18] ? a22[s18] += i27 : a22[++s18] = i27 : (a22[++s18] = null, u35.push({ i: s18, x: A5(r24, i27) })), e11 = st5.lastIndex;
  return e11 < n33.length && (o13 = n33.slice(e11), a22[s18] ? a22[s18] += o13 : a22[++s18] = o13), a22.length < 2 ? u35[0] ? fr2(u35[0].x) : ur2(n33) : (n33 = u35.length, function(f40) {
    for (var l26 = 0, c27; l26 < n33; ++l26)
      a22[(c27 = u35[l26]).i] = c27.x(f40);
    return a22.join("");
  });
}
var It2 = 180 / Math.PI;
var lt5 = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
function nn2(t19, n33, e11, r24, i27, o13) {
  var s18, a22, u35;
  return (s18 = Math.sqrt(t19 * t19 + n33 * n33)) && (t19 /= s18, n33 /= s18), (u35 = t19 * e11 + n33 * r24) && (e11 -= t19 * u35, r24 -= n33 * u35), (a22 = Math.sqrt(e11 * e11 + r24 * r24)) && (e11 /= a22, r24 /= a22, u35 /= a22), t19 * r24 < n33 * e11 && (t19 = -t19, n33 = -n33, u35 = -u35, s18 = -s18), {
    translateX: i27,
    translateY: o13,
    rotate: Math.atan2(n33, t19) * It2,
    skewX: Math.atan(u35) * It2,
    scaleX: s18,
    scaleY: a22
  };
}
var U5;
function cr2(t19) {
  const n33 = new (typeof DOMMatrix == "function" ? DOMMatrix : WebKitCSSMatrix)(t19 + "");
  return n33.isIdentity ? lt5 : nn2(n33.a, n33.b, n33.c, n33.d, n33.e, n33.f);
}
function hr2(t19) {
  return t19 == null || (U5 || (U5 = document.createElementNS("http://www.w3.org/2000/svg", "g")), U5.setAttribute("transform", t19), !(t19 = U5.transform.baseVal.consolidate())) ? lt5 : (t19 = t19.matrix, nn2(t19.a, t19.b, t19.c, t19.d, t19.e, t19.f));
}
function en2(t19, n33, e11, r24) {
  function i27(f40) {
    return f40.length ? f40.pop() + " " : "";
  }
  function o13(f40, l26, c27, h26, p26, d34) {
    if (f40 !== c27 || l26 !== h26) {
      var _21 = p26.push("translate(", null, n33, null, e11);
      d34.push({ i: _21 - 4, x: A5(f40, c27) }, { i: _21 - 2, x: A5(l26, h26) });
    } else
      (c27 || h26) && p26.push("translate(" + c27 + n33 + h26 + e11);
  }
  function s18(f40, l26, c27, h26) {
    f40 !== l26 ? (f40 - l26 > 180 ? l26 += 360 : l26 - f40 > 180 && (f40 += 360), h26.push({ i: c27.push(i27(c27) + "rotate(", null, r24) - 2, x: A5(f40, l26) })) : l26 && c27.push(i27(c27) + "rotate(" + l26 + r24);
  }
  function a22(f40, l26, c27, h26) {
    f40 !== l26 ? h26.push({ i: c27.push(i27(c27) + "skewX(", null, r24) - 2, x: A5(f40, l26) }) : l26 && c27.push(i27(c27) + "skewX(" + l26 + r24);
  }
  function u35(f40, l26, c27, h26, p26, d34) {
    if (f40 !== c27 || l26 !== h26) {
      var _21 = p26.push(i27(p26) + "scale(", null, ",", null, ")");
      d34.push({ i: _21 - 4, x: A5(f40, c27) }, { i: _21 - 2, x: A5(l26, h26) });
    } else
      (c27 !== 1 || h26 !== 1) && p26.push(i27(p26) + "scale(" + c27 + "," + h26 + ")");
  }
  return function(f40, l26) {
    var c27 = [], h26 = [];
    return f40 = t19(f40), l26 = t19(l26), o13(f40.translateX, f40.translateY, l26.translateX, l26.translateY, c27, h26), s18(f40.rotate, l26.rotate, c27, h26), a22(f40.skewX, l26.skewX, c27, h26), u35(f40.scaleX, f40.scaleY, l26.scaleX, l26.scaleY, c27, h26), f40 = l26 = null, function(p26) {
      for (var d34 = -1, _21 = h26.length, $25; ++d34 < _21; )
        c27[($25 = h26[d34]).i] = $25.x(p26);
      return c27.join("");
    };
  };
}
var pr2 = en2(cr2, "px, ", "px)", "deg)");
var dr2 = en2(hr2, ", ", ")", ")");
var R5 = 0;
var F5 = 0;
var I5 = 0;
var rn2 = 1e3;
var j5;
var H5;
var tt5 = 0;
var S5 = 0;
var rt5 = 0;
var O4 = typeof performance == "object" && performance.now ? performance : Date;
var on2 = typeof window == "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(t19) {
  setTimeout(t19, 17);
};
function yt5() {
  return S5 || (on2(_r2), S5 = O4.now() + rt5);
}
function _r2() {
  S5 = 0;
}
function nt5() {
  this._call = this._time = this._next = null;
}
nt5.prototype = sn2.prototype = {
  constructor: nt5,
  restart: function(t19, n33, e11) {
    if (typeof t19 != "function")
      throw new TypeError("callback is not a function");
    e11 = (e11 == null ? yt5() : +e11) + (n33 == null ? 0 : +n33), !this._next && H5 !== this && (H5 ? H5._next = this : j5 = this, H5 = this), this._call = t19, this._time = e11, ct5();
  },
  stop: function() {
    this._call && (this._call = null, this._time = 1 / 0, ct5());
  }
};
function sn2(t19, n33, e11) {
  var r24 = new nt5();
  return r24.restart(t19, n33, e11), r24;
}
function gr2() {
  yt5(), ++R5;
  for (var t19 = j5, n33; t19; )
    (n33 = S5 - t19._time) >= 0 && t19._call.call(void 0, n33), t19 = t19._next;
  --R5;
}
function Ft2() {
  S5 = (tt5 = O4.now()) + rt5, R5 = F5 = 0;
  try {
    gr2();
  } finally {
    R5 = 0, wr2(), S5 = 0;
  }
}
function yr2() {
  var t19 = O4.now(), n33 = t19 - tt5;
  n33 > rn2 && (rt5 -= n33, tt5 = t19);
}
function wr2() {
  for (var t19, n33 = j5, e11, r24 = 1 / 0; n33; )
    n33._call ? (r24 > n33._time && (r24 = n33._time), t19 = n33, n33 = n33._next) : (e11 = n33._next, n33._next = null, n33 = t19 ? t19._next = e11 : j5 = e11);
  H5 = t19, ct5(r24);
}
function ct5(t19) {
  if (!R5) {
    F5 && (F5 = clearTimeout(F5));
    var n33 = t19 - S5;
    n33 > 24 ? (t19 < 1 / 0 && (F5 = setTimeout(Ft2, t19 - O4.now() - rt5)), I5 && (I5 = clearInterval(I5))) : (I5 || (tt5 = O4.now(), I5 = setInterval(yr2, rn2)), R5 = 1, on2(Ft2));
  }
}
function Ht3(t19, n33, e11) {
  var r24 = new nt5();
  return n33 = n33 == null ? 0 : +n33, r24.restart((i27) => {
    r24.stop(), t19(i27 + n33);
  }, n33, e11), r24;
}
var xr2 = Dt2("start", "end", "cancel", "interrupt");
var vr2 = [];
var an2 = 0;
var qt2 = 1;
var ht5 = 2;
var G5 = 3;
var Xt2 = 4;
var pt5 = 5;
var W5 = 6;
function it5(t19, n33, e11, r24, i27, o13) {
  var s18 = t19.__transition;
  if (!s18)
    t19.__transition = {};
  else if (e11 in s18)
    return;
  mr2(t19, e11, {
    name: n33,
    index: r24,
    // For context during callback.
    group: i27,
    // For context during callback.
    on: xr2,
    tween: vr2,
    time: o13.time,
    delay: o13.delay,
    duration: o13.duration,
    ease: o13.ease,
    timer: null,
    state: an2
  });
}
function wt4(t19, n33) {
  var e11 = x7(t19, n33);
  if (e11.state > an2)
    throw new Error("too late; already scheduled");
  return e11;
}
function m5(t19, n33) {
  var e11 = x7(t19, n33);
  if (e11.state > G5)
    throw new Error("too late; already running");
  return e11;
}
function x7(t19, n33) {
  var e11 = t19.__transition;
  if (!e11 || !(e11 = e11[n33]))
    throw new Error("transition not found");
  return e11;
}
function mr2(t19, n33, e11) {
  var r24 = t19.__transition, i27;
  r24[n33] = e11, e11.timer = sn2(o13, 0, e11.time);
  function o13(f40) {
    e11.state = qt2, e11.timer.restart(s18, e11.delay, e11.time), e11.delay <= f40 && s18(f40 - e11.delay);
  }
  function s18(f40) {
    var l26, c27, h26, p26;
    if (e11.state !== qt2)
      return u35();
    for (l26 in r24)
      if (p26 = r24[l26], p26.name === e11.name) {
        if (p26.state === G5)
          return Ht3(s18);
        p26.state === Xt2 ? (p26.state = W5, p26.timer.stop(), p26.on.call("interrupt", t19, t19.__data__, p26.index, p26.group), delete r24[l26]) : +l26 < n33 && (p26.state = W5, p26.timer.stop(), p26.on.call("cancel", t19, t19.__data__, p26.index, p26.group), delete r24[l26]);
      }
    if (Ht3(function() {
      e11.state === G5 && (e11.state = Xt2, e11.timer.restart(a22, e11.delay, e11.time), a22(f40));
    }), e11.state = ht5, e11.on.call("start", t19, t19.__data__, e11.index, e11.group), e11.state === ht5) {
      for (e11.state = G5, i27 = new Array(h26 = e11.tween.length), l26 = 0, c27 = -1; l26 < h26; ++l26)
        (p26 = e11.tween[l26].value.call(t19, t19.__data__, e11.index, e11.group)) && (i27[++c27] = p26);
      i27.length = c27 + 1;
    }
  }
  function a22(f40) {
    for (var l26 = f40 < e11.duration ? e11.ease.call(null, f40 / e11.duration) : (e11.timer.restart(u35), e11.state = pt5, 1), c27 = -1, h26 = i27.length; ++c27 < h26; )
      i27[c27].call(t19, l26);
    e11.state === pt5 && (e11.on.call("end", t19, t19.__data__, e11.index, e11.group), u35());
  }
  function u35() {
    e11.state = W5, e11.timer.stop(), delete r24[n33];
    for (var f40 in r24)
      return;
    delete t19.__transition;
  }
}
function br2(t19, n33) {
  var e11 = t19.__transition, r24, i27, o13 = true, s18;
  if (e11) {
    n33 = n33 == null ? null : n33 + "";
    for (s18 in e11) {
      if ((r24 = e11[s18]).name !== n33) {
        o13 = false;
        continue;
      }
      i27 = r24.state > ht5 && r24.state < pt5, r24.state = W5, r24.timer.stop(), r24.on.call(i27 ? "interrupt" : "cancel", t19, t19.__data__, r24.index, r24.group), delete e11[s18];
    }
    o13 && delete t19.__transition;
  }
}
function Nr2(t19) {
  return this.each(function() {
    br2(this, t19);
  });
}
function Ar2(t19, n33) {
  var e11, r24;
  return function() {
    var i27 = m5(this, t19), o13 = i27.tween;
    if (o13 !== e11) {
      r24 = e11 = o13;
      for (var s18 = 0, a22 = r24.length; s18 < a22; ++s18)
        if (r24[s18].name === n33) {
          r24 = r24.slice(), r24.splice(s18, 1);
          break;
        }
    }
    i27.tween = r24;
  };
}
function $r2(t19, n33, e11) {
  var r24, i27;
  if (typeof e11 != "function")
    throw new Error();
  return function() {
    var o13 = m5(this, t19), s18 = o13.tween;
    if (s18 !== r24) {
      i27 = (r24 = s18).slice();
      for (var a22 = { name: n33, value: e11 }, u35 = 0, f40 = i27.length; u35 < f40; ++u35)
        if (i27[u35].name === n33) {
          i27[u35] = a22;
          break;
        }
      u35 === f40 && i27.push(a22);
    }
    o13.tween = i27;
  };
}
function kr2(t19, n33) {
  var e11 = this._id;
  if (t19 += "", arguments.length < 2) {
    for (var r24 = x7(this.node(), e11).tween, i27 = 0, o13 = r24.length, s18; i27 < o13; ++i27)
      if ((s18 = r24[i27]).name === t19)
        return s18.value;
    return null;
  }
  return this.each((n33 == null ? Ar2 : $r2)(e11, t19, n33));
}
function xt4(t19, n33, e11) {
  var r24 = t19._id;
  return t19.each(function() {
    var i27 = m5(this, r24);
    (i27.value || (i27.value = {}))[n33] = e11.apply(this, arguments);
  }), function(i27) {
    return x7(i27, r24).value[n33];
  };
}
function un2(t19, n33) {
  var e11;
  return (typeof n33 == "number" ? A5 : n33 instanceof P5 ? Mt5 : (e11 = P5(n33)) ? (n33 = e11, Mt5) : lr2)(t19, n33);
}
function Er2(t19) {
  return function() {
    this.removeAttribute(t19);
  };
}
function Sr2(t19) {
  return function() {
    this.removeAttributeNS(t19.space, t19.local);
  };
}
function Cr2(t19, n33, e11) {
  var r24, i27 = e11 + "", o13;
  return function() {
    var s18 = this.getAttribute(t19);
    return s18 === i27 ? null : s18 === r24 ? o13 : o13 = n33(r24 = s18, e11);
  };
}
function Tr2(t19, n33, e11) {
  var r24, i27 = e11 + "", o13;
  return function() {
    var s18 = this.getAttributeNS(t19.space, t19.local);
    return s18 === i27 ? null : s18 === r24 ? o13 : o13 = n33(r24 = s18, e11);
  };
}
function Rr2(t19, n33, e11) {
  var r24, i27, o13;
  return function() {
    var s18, a22 = e11(this), u35;
    return a22 == null ? void this.removeAttribute(t19) : (s18 = this.getAttribute(t19), u35 = a22 + "", s18 === u35 ? null : s18 === r24 && u35 === i27 ? o13 : (i27 = u35, o13 = n33(r24 = s18, a22)));
  };
}
function Mr2(t19, n33, e11) {
  var r24, i27, o13;
  return function() {
    var s18, a22 = e11(this), u35;
    return a22 == null ? void this.removeAttributeNS(t19.space, t19.local) : (s18 = this.getAttributeNS(t19.space, t19.local), u35 = a22 + "", s18 === u35 ? null : s18 === r24 && u35 === i27 ? o13 : (i27 = u35, o13 = n33(r24 = s18, a22)));
  };
}
function Ir2(t19, n33) {
  var e11 = et5(t19), r24 = e11 === "transform" ? dr2 : un2;
  return this.attrTween(t19, typeof n33 == "function" ? (e11.local ? Mr2 : Rr2)(e11, r24, xt4(this, "attr." + t19, n33)) : n33 == null ? (e11.local ? Sr2 : Er2)(e11) : (e11.local ? Tr2 : Cr2)(e11, r24, n33));
}
function Fr2(t19, n33) {
  return function(e11) {
    this.setAttribute(t19, n33.call(this, e11));
  };
}
function Hr2(t19, n33) {
  return function(e11) {
    this.setAttributeNS(t19.space, t19.local, n33.call(this, e11));
  };
}
function qr2(t19, n33) {
  var e11, r24;
  function i27() {
    var o13 = n33.apply(this, arguments);
    return o13 !== r24 && (e11 = (r24 = o13) && Hr2(t19, o13)), e11;
  }
  return i27._value = n33, i27;
}
function Xr2(t19, n33) {
  var e11, r24;
  function i27() {
    var o13 = n33.apply(this, arguments);
    return o13 !== r24 && (e11 = (r24 = o13) && Fr2(t19, o13)), e11;
  }
  return i27._value = n33, i27;
}
function Dr2(t19, n33) {
  var e11 = "attr." + t19;
  if (arguments.length < 2)
    return (e11 = this.tween(e11)) && e11._value;
  if (n33 == null)
    return this.tween(e11, null);
  if (typeof n33 != "function")
    throw new Error();
  var r24 = et5(t19);
  return this.tween(e11, (r24.local ? qr2 : Xr2)(r24, n33));
}
function Pr2(t19, n33) {
  return function() {
    wt4(this, t19).delay = +n33.apply(this, arguments);
  };
}
function Or2(t19, n33) {
  return n33 = +n33, function() {
    wt4(this, t19).delay = n33;
  };
}
function Lr2(t19) {
  var n33 = this._id;
  return arguments.length ? this.each((typeof t19 == "function" ? Pr2 : Or2)(n33, t19)) : x7(this.node(), n33).delay;
}
function Vr2(t19, n33) {
  return function() {
    m5(this, t19).duration = +n33.apply(this, arguments);
  };
}
function Yr2(t19, n33) {
  return n33 = +n33, function() {
    m5(this, t19).duration = n33;
  };
}
function Br2(t19) {
  var n33 = this._id;
  return arguments.length ? this.each((typeof t19 == "function" ? Vr2 : Yr2)(n33, t19)) : x7(this.node(), n33).duration;
}
function zr2(t19, n33) {
  if (typeof n33 != "function")
    throw new Error();
  return function() {
    m5(this, t19).ease = n33;
  };
}
function Ur2(t19) {
  var n33 = this._id;
  return arguments.length ? this.each(zr2(n33, t19)) : x7(this.node(), n33).ease;
}
function Kr2(t19, n33) {
  return function() {
    var e11 = n33.apply(this, arguments);
    if (typeof e11 != "function")
      throw new Error();
    m5(this, t19).ease = e11;
  };
}
function Gr2(t19) {
  if (typeof t19 != "function")
    throw new Error();
  return this.each(Kr2(this._id, t19));
}
function Wr2(t19) {
  typeof t19 != "function" && (t19 = Lt2(t19));
  for (var n33 = this._groups, e11 = n33.length, r24 = new Array(e11), i27 = 0; i27 < e11; ++i27)
    for (var o13 = n33[i27], s18 = o13.length, a22 = r24[i27] = [], u35, f40 = 0; f40 < s18; ++f40)
      (u35 = o13[f40]) && t19.call(u35, u35.__data__, f40, o13) && a22.push(u35);
  return new N4(r24, this._parents, this._name, this._id);
}
function Jr2(t19) {
  if (t19._id !== this._id)
    throw new Error();
  for (var n33 = this._groups, e11 = t19._groups, r24 = n33.length, i27 = e11.length, o13 = Math.min(r24, i27), s18 = new Array(r24), a22 = 0; a22 < o13; ++a22)
    for (var u35 = n33[a22], f40 = e11[a22], l26 = u35.length, c27 = s18[a22] = new Array(l26), h26, p26 = 0; p26 < l26; ++p26)
      (h26 = u35[p26] || f40[p26]) && (c27[p26] = h26);
  for (; a22 < r24; ++a22)
    s18[a22] = n33[a22];
  return new N4(s18, this._parents, this._name, this._id);
}
function Qr2(t19) {
  return (t19 + "").trim().split(/^|\s+/).every(function(n33) {
    var e11 = n33.indexOf(".");
    return e11 >= 0 && (n33 = n33.slice(0, e11)), !n33 || n33 === "start";
  });
}
function Zr2(t19, n33, e11) {
  var r24, i27, o13 = Qr2(n33) ? wt4 : m5;
  return function() {
    var s18 = o13(this, t19), a22 = s18.on;
    a22 !== r24 && (i27 = (r24 = a22).copy()).on(n33, e11), s18.on = i27;
  };
}
function jr2(t19, n33) {
  var e11 = this._id;
  return arguments.length < 2 ? x7(this.node(), e11).on.on(t19) : this.each(Zr2(e11, t19, n33));
}
function ti2(t19) {
  return function() {
    var n33 = this.parentNode;
    for (var e11 in this.__transition)
      if (+e11 !== t19)
        return;
    n33 && n33.removeChild(this);
  };
}
function ni2() {
  return this.on("end.remove", ti2(this._id));
}
function ei2(t19) {
  var n33 = this._name, e11 = this._id;
  typeof t19 != "function" && (t19 = dt5(t19));
  for (var r24 = this._groups, i27 = r24.length, o13 = new Array(i27), s18 = 0; s18 < i27; ++s18)
    for (var a22 = r24[s18], u35 = a22.length, f40 = o13[s18] = new Array(u35), l26, c27, h26 = 0; h26 < u35; ++h26)
      (l26 = a22[h26]) && (c27 = t19.call(l26, l26.__data__, h26, a22)) && ("__data__" in l26 && (c27.__data__ = l26.__data__), f40[h26] = c27, it5(f40[h26], n33, e11, h26, f40, x7(l26, e11)));
  return new N4(o13, this._parents, n33, e11);
}
function ri2(t19) {
  var n33 = this._name, e11 = this._id;
  typeof t19 != "function" && (t19 = Ot5(t19));
  for (var r24 = this._groups, i27 = r24.length, o13 = [], s18 = [], a22 = 0; a22 < i27; ++a22)
    for (var u35 = r24[a22], f40 = u35.length, l26, c27 = 0; c27 < f40; ++c27)
      if (l26 = u35[c27]) {
        for (var h26 = t19.call(l26, l26.__data__, c27, u35), p26, d34 = x7(l26, e11), _21 = 0, $25 = h26.length; _21 < $25; ++_21)
          (p26 = h26[_21]) && it5(p26, n33, e11, _21, h26, d34);
        o13.push(h26), s18.push(l26);
      }
  return new N4(o13, s18, n33, e11);
}
var ii2 = L5.prototype.constructor;
function oi2() {
  return new ii2(this._groups, this._parents);
}
function si2(t19, n33) {
  var e11, r24, i27;
  return function() {
    var o13 = T6(this, t19), s18 = (this.style.removeProperty(t19), T6(this, t19));
    return o13 === s18 ? null : o13 === e11 && s18 === r24 ? i27 : i27 = n33(e11 = o13, r24 = s18);
  };
}
function fn2(t19) {
  return function() {
    this.style.removeProperty(t19);
  };
}
function ai2(t19, n33, e11) {
  var r24, i27 = e11 + "", o13;
  return function() {
    var s18 = T6(this, t19);
    return s18 === i27 ? null : s18 === r24 ? o13 : o13 = n33(r24 = s18, e11);
  };
}
function ui2(t19, n33, e11) {
  var r24, i27, o13;
  return function() {
    var s18 = T6(this, t19), a22 = e11(this), u35 = a22 + "";
    return a22 == null && (u35 = a22 = (this.style.removeProperty(t19), T6(this, t19))), s18 === u35 ? null : s18 === r24 && u35 === i27 ? o13 : (i27 = u35, o13 = n33(r24 = s18, a22));
  };
}
function fi2(t19, n33) {
  var e11, r24, i27, o13 = "style." + n33, s18 = "end." + o13, a22;
  return function() {
    var u35 = m5(this, t19), f40 = u35.on, l26 = u35.value[o13] == null ? a22 || (a22 = fn2(n33)) : void 0;
    (f40 !== e11 || i27 !== l26) && (r24 = (e11 = f40).copy()).on(s18, i27 = l26), u35.on = r24;
  };
}
function li2(t19, n33, e11) {
  var r24 = (t19 += "") == "transform" ? pr2 : un2;
  return n33 == null ? this.styleTween(t19, si2(t19, r24)).on("end.style." + t19, fn2(t19)) : typeof n33 == "function" ? this.styleTween(t19, ui2(t19, r24, xt4(this, "style." + t19, n33))).each(fi2(this._id, t19)) : this.styleTween(t19, ai2(t19, r24, n33), e11).on("end.style." + t19, null);
}
function ci2(t19, n33, e11) {
  return function(r24) {
    this.style.setProperty(t19, n33.call(this, r24), e11);
  };
}
function hi2(t19, n33, e11) {
  var r24, i27;
  function o13() {
    var s18 = n33.apply(this, arguments);
    return s18 !== i27 && (r24 = (i27 = s18) && ci2(t19, s18, e11)), r24;
  }
  return o13._value = n33, o13;
}
function pi2(t19, n33, e11) {
  var r24 = "style." + (t19 += "");
  if (arguments.length < 2)
    return (r24 = this.tween(r24)) && r24._value;
  if (n33 == null)
    return this.tween(r24, null);
  if (typeof n33 != "function")
    throw new Error();
  return this.tween(r24, hi2(t19, n33, e11 ?? ""));
}
function di2(t19) {
  return function() {
    this.textContent = t19;
  };
}
function _i2(t19) {
  return function() {
    var n33 = t19(this);
    this.textContent = n33 ?? "";
  };
}
function gi2(t19) {
  return this.tween("text", typeof t19 == "function" ? _i2(xt4(this, "text", t19)) : di2(t19 == null ? "" : t19 + ""));
}
function yi2(t19) {
  return function(n33) {
    this.textContent = t19.call(this, n33);
  };
}
function wi2(t19) {
  var n33, e11;
  function r24() {
    var i27 = t19.apply(this, arguments);
    return i27 !== e11 && (n33 = (e11 = i27) && yi2(i27)), n33;
  }
  return r24._value = t19, r24;
}
function xi2(t19) {
  var n33 = "text";
  if (arguments.length < 1)
    return (n33 = this.tween(n33)) && n33._value;
  if (t19 == null)
    return this.tween(n33, null);
  if (typeof t19 != "function")
    throw new Error();
  return this.tween(n33, wi2(t19));
}
function vi2() {
  for (var t19 = this._name, n33 = this._id, e11 = ln2(), r24 = this._groups, i27 = r24.length, o13 = 0; o13 < i27; ++o13)
    for (var s18 = r24[o13], a22 = s18.length, u35, f40 = 0; f40 < a22; ++f40)
      if (u35 = s18[f40]) {
        var l26 = x7(u35, n33);
        it5(u35, t19, e11, f40, s18, {
          time: l26.time + l26.delay + l26.duration,
          delay: 0,
          duration: l26.duration,
          ease: l26.ease
        });
      }
  return new N4(r24, this._parents, t19, e11);
}
function mi2() {
  var t19, n33, e11 = this, r24 = e11._id, i27 = e11.size();
  return new Promise(function(o13, s18) {
    var a22 = { value: s18 }, u35 = { value: function() {
      --i27 === 0 && o13();
    } };
    e11.each(function() {
      var f40 = m5(this, r24), l26 = f40.on;
      l26 !== t19 && (n33 = (t19 = l26).copy(), n33._.cancel.push(a22), n33._.interrupt.push(a22), n33._.end.push(u35)), f40.on = n33;
    }), i27 === 0 && o13();
  });
}
var bi2 = 0;
function N4(t19, n33, e11, r24) {
  this._groups = t19, this._parents = n33, this._name = e11, this._id = r24;
}
function ln2() {
  return ++bi2;
}
var b7 = L5.prototype;
N4.prototype = {
  constructor: N4,
  select: ei2,
  selectAll: ri2,
  selectChild: b7.selectChild,
  selectChildren: b7.selectChildren,
  filter: Wr2,
  merge: Jr2,
  selection: oi2,
  transition: vi2,
  call: b7.call,
  nodes: b7.nodes,
  node: b7.node,
  size: b7.size,
  empty: b7.empty,
  each: b7.each,
  on: jr2,
  attr: Ir2,
  attrTween: Dr2,
  style: li2,
  styleTween: pi2,
  text: gi2,
  textTween: xi2,
  remove: ni2,
  tween: kr2,
  delay: Lr2,
  duration: Br2,
  ease: Ur2,
  easeVarying: Gr2,
  end: mi2,
  [Symbol.iterator]: b7[Symbol.iterator]
};
function Ni2(t19) {
  return ((t19 *= 2) <= 1 ? t19 * t19 * t19 : (t19 -= 2) * t19 * t19 + 2) / 2;
}
var Ai2 = {
  time: null,
  // Set on use.
  delay: 0,
  duration: 250,
  ease: Ni2
};
function $i2(t19, n33) {
  for (var e11; !(e11 = t19.__transition) || !(e11 = e11[n33]); )
    if (!(t19 = t19.parentNode))
      throw new Error(`transition ${n33} not found`);
  return e11;
}
function ki2(t19) {
  var n33, e11;
  t19 instanceof N4 ? (n33 = t19._id, t19 = t19._name) : (n33 = ln2(), (e11 = Ai2).time = yt5(), t19 = t19 == null ? null : t19 + "");
  for (var r24 = this._groups, i27 = r24.length, o13 = 0; o13 < i27; ++o13)
    for (var s18 = r24[o13], a22 = s18.length, u35, f40 = 0; f40 < a22; ++f40)
      (u35 = s18[f40]) && it5(u35, t19, n33, f40, s18, e11 || $i2(u35, n33));
  return new N4(r24, this._parents, t19, n33);
}
L5.prototype.interrupt = Nr2;
L5.prototype.transition = ki2;
function q5(t19, n33, e11) {
  this.k = t19, this.x = n33, this.y = e11;
}
q5.prototype = {
  constructor: q5,
  scale: function(t19) {
    return t19 === 1 ? this : new q5(this.k * t19, this.x, this.y);
  },
  translate: function(t19, n33) {
    return t19 === 0 & n33 === 0 ? this : new q5(this.k, this.x + this.k * t19, this.y + this.k * n33);
  },
  apply: function(t19) {
    return [t19[0] * this.k + this.x, t19[1] * this.k + this.y];
  },
  applyX: function(t19) {
    return t19 * this.k + this.x;
  },
  applyY: function(t19) {
    return t19 * this.k + this.y;
  },
  invert: function(t19) {
    return [(t19[0] - this.x) / this.k, (t19[1] - this.y) / this.k];
  },
  invertX: function(t19) {
    return (t19 - this.x) / this.k;
  },
  invertY: function(t19) {
    return (t19 - this.y) / this.k;
  },
  rescaleX: function(t19) {
    return t19.copy().domain(t19.range().map(this.invertX, this).map(t19.invert, t19));
  },
  rescaleY: function(t19) {
    return t19.copy().domain(t19.range().map(this.invertY, this).map(t19.invert, t19));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};
q5.prototype;

// node_modules/@frc-web-components/fwc/dist/components/axis.es.js
var N5 = Object.defineProperty;
var a5 = (u35, o13, p26, t19) => {
  for (var n33 = void 0, s18 = u35.length - 1, l26; s18 >= 0; s18--)
    (l26 = u35[s18]) && (n33 = l26(o13, p26, n33) || n33);
  return n33 && N5(o13, p26, n33), n33;
};
var O5 = {
  dashboard: {
    topLevel: false,
    displayName: "Axis"
  },
  properties: {
    vertical: { type: "Boolean" },
    ticks: { type: "Number", defaultValue: 5 },
    min: { type: "Number", defaultValue: -1 },
    max: { type: "Number", defaultValue: 1 },
    unit: { type: "String" }
  }
};
var f6 = class f7 extends H4 {
  constructor() {
    super(...arguments), this.vertical = false, this.ticks = 5, this.min = -1, this.max = 1, this.unit = "", this.prevSize = 0, this.prevTicks = 0, this.prevMin = null, this.prevMax = null;
  }
  setAxis(o13) {
    var y34;
    const p26 = this.vertical ? this.clientHeight : this.clientWidth, t19 = p26 / Math.max(1, this.ticks - 1), n33 = 30, { min: s18, max: l26 } = this;
    let x36 = -1 / 0, d34 = -1 / 0;
    if (this.prevSize === p26 && this.prevTicks === this.ticks && this.prevMin === s18 && this.prevMax === l26 && !o13.has("unit") && !o13.has("vertical"))
      return;
    this.prevSize = p26, this.prevTicks = this.ticks, this.prevMin = s18, this.prevMax = l26, this.svg.innerHTML = "";
    const h26 = Ei2(this.svg).attr("width", this.vertical ? n33 : p26).attr("height", this.vertical ? p26 : n33);
    for (let e11 = 0; e11 < this.ticks; e11 += 1) {
      if (this.vertical ? h26.append("line").attr("x1", 0).attr("y1", e11 * t19).attr("x2", 8).attr("y2", e11 * t19) : h26.append("line").attr("x1", e11 * t19).attr("y1", 0).attr("x2", e11 * t19).attr("y2", 8), this.vertical) {
        const r24 = s18 + e11 * (l26 - s18) / Math.max(this.ticks - 1, 1);
        h26.append("text").attr("x", -3).attr("y", e11 * t19 + 4).attr("text-anchor", "end").text(r24.toFixed(2) + (this.unit ? ` ${this.unit}` : ""));
      } else {
        const r24 = (e11 - x36) * t19, m34 = x36 * t19 + r24 * 0.4;
        if (d34 < 0 || m34 > d34) {
          const g32 = s18 + e11 * (l26 - s18) / Math.max(this.ticks - 1, 1), k29 = h26.append("text").attr("x", e11 * t19).attr("y", 25).attr("text-anchor", "middle").text(g32.toFixed(2) + (this.unit ? ` ${this.unit}` : ""));
          d34 = e11 * t19 + (((y34 = k29.node()) == null ? void 0 : y34.getBBox().width) ?? 0) / 2, x36 = e11;
        }
      }
      if (e11 < this.ticks - 1)
        for (let r24 = 1; r24 < 4; r24 += 1)
          this.vertical ? h26.append("line").attr("x1", 4).attr("y1", e11 * t19 + r24 * t19 / 4).attr("x2", 8).attr("y2", e11 * t19 + r24 * t19 / 4) : h26.append("line").attr("x1", e11 * t19 + r24 * t19 / 4).attr("y1", 0).attr("x2", e11 * t19 + r24 * t19 / 4).attr("y2", 4);
    }
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.requestUpdate();
    }).observe(this);
  }
  updated(o13) {
    this.setAxis(o13);
  }
  render() {
    return Ot4` <svg id="svg"></svg> `;
  }
};
f6.styles = Ut3`
    :host {
      display: inline-block;
      position: relative;
    }

    :host([vertical]) {
      height: 100%;
    }

    :host(:not([vertical])) {
      width: 100%;
    }

    svg {
      overflow: visible;
      position: absolute;
      top: 0;
      left: 0;
    }

    line {
      stroke: rgb(150, 150, 150);
      stroke-width: 2;
    }

    text {
      font-weight: normal;
      font-size: 13px;
      fill: var(--frc-axis-text-color, #000);
    }
  `;
var i6 = f6;
a5([
  Mt4({ type: Boolean })
], i6.prototype, "vertical");
a5([
  Mt4({ type: Number })
], i6.prototype, "ticks");
a5([
  Mt4({ type: Number })
], i6.prototype, "min");
a5([
  Mt4({ type: Number })
], i6.prototype, "max");
a5([
  Mt4({ type: String })
], i6.prototype, "unit");
a5([
  n7()
], i6.prototype, "prevSize");
a5([
  n7()
], i6.prototype, "prevTicks");
a5([
  n7()
], i6.prototype, "prevMin");
a5([
  n7()
], i6.prototype, "prevMax");
a5([
  h4("#svg")
], i6.prototype, "svg");
customElements.get("frc-axis") || customElements.define("frc-axis", i6);

// node_modules/@frc-web-components/fwc/dist/components/bar.es.js
var y6 = Object.defineProperty;
var v7 = Object.getOwnPropertyDescriptor;
var n8 = (d34, t19, e11, o13) => {
  for (var s18 = o13 > 1 ? void 0 : o13 ? v7(t19, e11) : t19, r24 = d34.length - 1, i27; r24 >= 0; r24--)
    (i27 = d34[r24]) && (s18 = (o13 ? i27(t19, e11, s18) : i27(s18)) || s18);
  return o13 && s18 && y6(t19, e11, s18), s18;
};
var _4 = {
  dashboard: {
    topLevel: false,
    displayName: "Bar"
  },
  properties: {
    value: { type: "Number" },
    min: { type: "Number", defaultValue: -1 },
    max: { type: "Number", defaultValue: 1 },
    center: { type: "Number" }
  }
};
function g5(d34, t19, e11) {
  return Math.min(e11, Math.max(d34, t19));
}
var l3 = class l4 extends H4 {
  constructor() {
    super(...arguments), this._min = -1, this._max = 1, this.value = 0, this.center = 0, this.dragging = false;
  }
  get min() {
    return Math.min(this._min, this._max);
  }
  set min(t19) {
    const e11 = this._min;
    this._min = t19, this.requestUpdate("min", e11);
  }
  get max() {
    return Math.max(this._min, this._max);
  }
  set max(t19) {
    const e11 = this._max;
    this._max = t19, this.requestUpdate("max", e11);
  }
  updateForeground() {
    const { min: t19, max: e11, center: o13, value: s18, foreground: r24 } = this, i27 = g5(s18, t19, e11);
    e11 < o13 ? (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - e11) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-left", "auto"), r24.style.setProperty("--foreground-right", "0")) : t19 > o13 ? (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - t19) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-left", "0"), r24.style.setProperty("--foreground-right", "auto")) : i27 > o13 ? (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - o13) / (e11 - t19) * 100}%`
    ), r24.style.setProperty(
      "--foreground-left",
      `${Math.abs(t19 - o13) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-right", "auto")) : (r24.style.setProperty(
      "--foreground-width",
      `${Math.abs(i27 - o13) / (e11 - t19) * 100}%`
    ), r24.style.setProperty("--foreground-left", "auto"), r24.style.setProperty(
      "--foreground-right",
      `${Math.abs(e11 - o13) / (e11 - t19) * 100}%`
    ));
  }
  resized() {
    this.updateForeground();
  }
  updated() {
    this.updateForeground();
  }
  setDragPosition(t19) {
    const { left: e11, width: o13 } = this.getBoundingClientRect(), s18 = t19.clientX - e11, r24 = g5(s18 / o13, 0, 1), i27 = this.min + (this.max - this.min) * r24, p26 = new CustomEvent("barDrag", {
      bubbles: true,
      composed: true,
      detail: { value: i27 }
    });
    this.dispatchEvent(p26);
  }
  firstUpdated() {
    this.setAttribute("draggable", "false"), window.addEventListener("mousemove", (t19) => {
      this.dragging && this.setDragPosition(t19);
    }), window.addEventListener("mouseup", () => {
      this.dragging = false;
    });
  }
  onMouseDown(t19) {
    this.dragging = true, this.setDragPosition(t19);
  }
  render() {
    return Ot4`
      <div part="foreground" draggble="false"></div>
      <div class="content" draggable="false">
        <slot></slot>
      </div>
      <div part="dragger" @mousedown="${this.onMouseDown}"></div>
    `;
  }
};
l3.styles = Ut3`
    :host {
      display: inline-block;
      position: relative;
      width: 300px;
      height: 20px;
      background: var(--frc-bar-background, #ddd);
      color: var(--frc-bar-color, black);
      font-size: 15px;
      line-height: 18px;
      text-align: center;
    }

    [part='dragger'] {
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    }

    [part='foreground'] {
      position: absolute;
      top: 0;
      height: 100%;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
      width: var(--foreground-width);
      left: var(--foreground-left);
      right: var(--foreground-right);
      pointer-events: none;
    }

    .content {
      position: relative;
    }
  `;
var a6 = l3;
n8([
  Mt4({ type: Number })
], a6.prototype, "value", 2);
n8([
  Mt4({ type: Number })
], a6.prototype, "center", 2);
n8([
  n7()
], a6.prototype, "dragging", 2);
n8([
  Mt4({ type: Number })
], a6.prototype, "min", 1);
n8([
  Mt4({ type: Number })
], a6.prototype, "max", 1);
n8([
  h4("[part=foreground]")
], a6.prototype, "foreground", 2);
customElements.get("frc-bar") || customElements.define("frc-bar", a6);

// node_modules/@frc-web-components/fwc/dist/components/drivebases.es.js
function C6(i27) {
  return i27 * 180 / Math.PI;
}
function tt6(i27, t19, e11, o13) {
  return `<line x1="${i27}" y1="${t19}" x2="${e11}" y2="${o13}" />`;
}
function G6(i27, t19, e11) {
  return `<polygon 
            points="${i27.x},${i27.y} ${t19.x},${t19.y} ${e11.x},${e11.y}" />`;
}
function j6(i27, t19, e11, o13) {
  const r24 = o13 * Math.PI / 180;
  return {
    x: i27 + e11 * Math.cos(r24),
    y: t19 - e11 * Math.sin(r24)
  };
}
function et6(i27, t19, e11, o13, r24) {
  const s18 = j6(i27, t19, e11, r24), n33 = j6(i27, t19, e11, o13), a22 = r24 - o13 <= 180 ? "0" : "1", d34 = r24 > o13 ? 1 : 0;
  return [
    "M",
    s18.x,
    s18.y,
    "A",
    e11,
    e11,
    0,
    a22,
    d34,
    n33.x,
    n33.y
  ].join(" ");
}
function rt6(i27, t19, e11, o13, r24) {
  return `<path d="${et6(i27, t19, e11, o13, r24)}"/>`;
}
function ot6(i27, t19, e11, o13) {
  const r24 = t19 / 2, s18 = Math.cos(i27), n33 = Math.sin(i27), a22 = Math.cos(i27 + Math.PI / 2) * r24, d34 = Math.sin(i27 + Math.PI / 2) * r24, c27 = {
    x: s18 * o13 - a22 + e11,
    y: n33 * o13 - d34
  }, h26 = {
    x: s18 * o13 + a22 + e11,
    y: n33 * o13 + d34
  }, l26 = {
    x: s18 * (t19 + o13) + e11,
    y: n33 * (t19 + o13)
  };
  return G6(c27, h26, l26);
}
function q6(i27, t19, e11, o13) {
  const r24 = Math.cos(t19) * i27, s18 = Math.sin(t19) * i27, n33 = tt6(e11, 0, r24 + e11, s18), a22 = ot6(t19, o13, e11, i27);
  return n33 + a22;
}
function it6(i27, t19, e11, o13) {
  const r24 = e11 / t19, s18 = C6(r24);
  return rt6(
    o13,
    0,
    t19,
    C6(i27),
    C6(i27) - s18
  );
}
function st6(i27, t19, e11, o13, r24) {
  const s18 = t19 / 2, n33 = r24 / e11 - i27, a22 = Math.sqrt(t19 * t19 + e11 * e11), d34 = (r24 + t19 * Math.sign(r24)) / e11 - i27, c27 = Math.cos(n33), h26 = Math.sin(n33), l26 = {
    x: (e11 + s18) * c27 + o13,
    y: (e11 + s18) * h26
  }, g32 = {
    x: (e11 - s18) * c27 + o13,
    y: (e11 - s18) * h26
  }, v31 = {
    x: a22 * Math.cos(d34) + o13,
    y: a22 * Math.sin(d34)
  };
  return G6(l26, v31, g32);
}
function X5(i27, t19, e11, o13, r24) {
  if (t19 < 0)
    throw new Error(`Radius cannot be negative. Given: ${t19}`);
  return t19 === 1 / 0 ? q6(e11, i27, o13, r24) : it6(i27, t19, e11, o13) + st6(i27, r24, t19, o13, e11);
}
function V6(i27, t19, e11, o13, r24) {
  return X5(i27, t19, t19 * e11, o13, r24);
}
var nt6 = Object.defineProperty;
var J6 = (i27, t19, e11, o13) => {
  for (var r24 = void 0, s18 = i27.length - 1, n33; s18 >= 0; s18--)
    (n33 = i27[s18]) && (r24 = n33(t19, e11, r24) || r24);
  return r24 && nt6(t19, e11, r24), r24;
};
var bt6 = {
  dashboard: {
    displayName: "Differential Drivebase"
  },
  properties: {
    leftMotorSpeed: { type: "Number", attribute: "left-motor-speed" },
    rightMotorSpeed: { type: "Number", attribute: "right-motor-speed" }
  }
};
function I6(i27, t19, e11) {
  return Math.min(e11, Math.max(i27, t19));
}
function at5(i27, t19, e11, o13, r24) {
  return (i27 - t19) * (r24 - o13) / (e11 - t19) + o13;
}
function dt6(i27) {
  const t19 = i27 / 2, e11 = `
    <line 
      x1="${-t19}"
      y1="${-t19}"
      x2="${t19}"
      y2="${t19}"
    />
  `, o13 = `
    <line 
      x1="${-t19}"
      y1="${t19}"
      x2="${t19}"
      y2="${-t19}"
    />
  `;
  return `<g class="x">${e11} ${o13}</g>`;
}
var A6 = class A7 extends H4 {
  constructor() {
    super(), this.leftMotorSpeed = 0, this.rightMotorSpeed = 0, new ResizeObserver(() => {
      this.resized();
    }).observe(this);
  }
  get clampedLeftMotorSpeed() {
    return I6(this.leftMotorSpeed, -1, 1);
  }
  get clampedRightMotorSpeed() {
    return I6(this.rightMotorSpeed, -1, 1);
  }
  drawMotionVector(t19, e11) {
    const r24 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), s18 = r24.width * 0.13, n33 = 20, a22 = 20, d34 = r24.width - (s18 + n33) * 2, c27 = r24.height - a22 * 2;
    if (Math.abs(t19) <= 0.05 && Math.abs(e11) <= 0.05)
      return dt6(r24.width * 0.2);
    const h26 = Math.min(d34, c27) / 2 - 8, l26 = 8;
    if (Math.abs(t19 - e11) <= 1e-3)
      return `<g class="arrow">${q6(
        Math.abs(t19 * h26),
        -Math.sign(t19) * Math.PI / 2,
        0,
        l26
      )}</g>`;
    const g32 = Math.PI, v31 = (e11 - t19) / 2, b35 = (t19 + e11) / 2, m34 = b35 / v31;
    let k29;
    if (Math.abs(m34) >= 1) {
      const y34 = -Math.sign(m34), w31 = (y34 + 1) * g32 / 2, x36 = Math.abs(m34 * h26);
      k29 = X5(
        w31,
        x36,
        y34 * b35 * h26,
        y34 * x36,
        l26
      );
    } else {
      const y34 = Math.sign(t19 - e11);
      if (m34 === 0) {
        const w31 = Math.max(t19, e11) * h26, x36 = y34 * g32, L12 = v31 < 0 ? g32 : 0;
        k29 = V6(L12, w31, x36, 0, l26);
      } else {
        const w31 = m34 < 0 ? t19 : e11, x36 = m34 < 0 ? e11 : t19, L12 = Math.abs(w31) * h26, Q12 = -m34 * L12, Y13 = at5(x36 / w31, 0, -1, 0.5, g32), Z12 = m34 < 0 ? g32 : 0;
        k29 = V6(
          Z12,
          L12,
          y34 * Y13,
          Q12,
          l26
        );
      }
    }
    return `<g class="arrow">${k29}</g>`;
  }
  drawDrivetrain() {
    const e11 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), o13 = e11.width * 0.13, r24 = Math.min(e11.width * 0.13, e11.height * 0.15), s18 = 20, n33 = 20, a22 = `
      <rect 
        width="calc(100% - ${(o13 + s18) * 2}px)" 
        height="calc(100% - ${n33 * 2}px)"
        x="${o13 + s18}" 
        y="20px" 
      />
    `, d34 = `
      <rect 
        width="${o13}px" 
        height="${r24 * 2}" 
        x="${s18}px" 
        y="${n33}px" 
      />
    `, c27 = `
      <rect 
        width="${o13}px" 
        height="${r24 * 2}" 
        x="calc(100% - ${o13 + s18}px)" 
        y="${n33}px" 
      />
    `, h26 = `
      <rect 
        width="${o13}px" 
        height="${r24 * 2}" 
        x="${s18}px"
        y="calc(100% - ${r24 * 2 + n33}px)"
      />
    `, l26 = `
      <rect 
        width="${o13}px" 
        height="${r24 * 2}" 
        x="calc(100% - ${o13 + s18}px)" 
        y="calc(100% - ${r24 * 2 + n33}px)"
      />
    `;
    return a22 + d34 + c27 + h26 + l26;
  }
  getLeftForegroundStyle() {
    return this.getForegroundStyle(this.clampedLeftMotorSpeed);
  }
  getRightForegroundStyle() {
    return this.getForegroundStyle(this.clampedRightMotorSpeed);
  }
  getForegroundStyle(t19) {
    const r24 = I6(t19, -1, 1);
    return r24 > 0 ? `
        height: ${Math.abs(r24) / 2 * 100}%;
        top: auto;
        bottom: 50%;
      ` : `
        height: ${Math.abs(r24) / 2 * 100}%;
        top: 50%;
        bottom: auto;
      `;
  }
  firstUpdated() {
    const t19 = this.drawMotionVector(0, 0);
    this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain(), this.renderRoot.querySelector("#forceVector").innerHTML = t19;
  }
  resized() {
    const t19 = this.drawMotionVector(
      this.clampedLeftMotorSpeed,
      this.clampedRightMotorSpeed
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = t19;
    const o13 = this.renderRoot.querySelector("#svg").getBoundingClientRect();
    this.renderRoot.querySelector("#forceVector").style.transform = `translate(${o13.width * 0.5}px, ${o13.height * 0.5}px)`, this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain();
  }
  updated() {
    const t19 = this.drawMotionVector(
      this.clampedLeftMotorSpeed,
      this.clampedRightMotorSpeed
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = t19;
  }
  render() {
    return Ot4`
      <div class="diff-drive-container">
        <div class="speed">
          <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
          <div class="bar">
            <div
              class="foreground"
              style="${this.getLeftForegroundStyle()}"
            ></div>
          </div>
        </div>
        <svg id="svg">
          <g id="forceVector"></g>
          <g id="drivetrain" class="drivetrain"></g>
        </svg>
        <div class="speed">
          <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
          <div class="bar">
            <div
              class="foreground"
              style="${this.getRightForegroundStyle()}"
            ></div>
          </div>
        </div>
      </div>
    `;
  }
};
A6.styles = Ut3`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
      padding: 0 10px;
      font-family: sans-serif;
    }

    .diff-drive-container {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
    }

    svg {
      overflow: overlay;
      flex: 1;
      height: 100%;
    }

    svg .x {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
    }

    svg .arrow line,
    svg .arrow path {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
      fill: none;
    }

    svg .arrow polygon {
      stroke: rgb(50, 50, 255);
      fill: rgb(50, 50, 255);
    }

    svg .drivetrain {
      fill: none;
      stroke: var(--frc-differential-drivebase-drivetrain-color, #000);
    }

    .bar {
      position: relative;
      height: calc(100% - 30px);
      width: 20px;
      border-radius: 3px;
      margin: 15px 0;
      background: var(--frc-bar-background, #ddd);
    }

    .speed {
      display: flex;
      height: 100%;
      flex-direction: row;
      align-items: center;
      margin-left: 30px;
    }

    frc-axis {
      width: 10px;
      height: calc(100% - 35px);
    }

    .foreground {
      position: absolute;
      top: 0;
      width: 20px;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
    }
  `;
var z6 = A6;
J6([
  Mt4({ type: Number, attribute: "left-motor-speed" })
], z6.prototype, "leftMotorSpeed");
J6([
  Mt4({ type: Number, attribute: "right-motor-speed" })
], z6.prototype, "rightMotorSpeed");
customElements.get("frc-differential-drivebase") || customElements.define("frc-differential-drivebase", z6);
var ct6 = Object.defineProperty;
var P6 = (i27, t19, e11, o13) => {
  for (var r24 = void 0, s18 = i27.length - 1, n33; s18 >= 0; s18--)
    (n33 = i27[s18]) && (r24 = n33(t19, e11, r24) || r24);
  return r24 && ct6(t19, e11, r24), r24;
};
var yt6 = {
  dashboard: {
    displayName: "Mecanum Drivebase"
  },
  properties: {
    frontLeftMotorSpeed: {
      type: "Number",
      attribute: "front-left-motor-speed"
    },
    frontRightMotorSpeed: {
      type: "Number",
      attribute: "front-right-motor-speed"
    },
    rearLeftMotorSpeed: { type: "Number", attribute: "rear-left-motor-speed" },
    rearRightMotorSpeed: {
      type: "Number",
      attribute: "rear-right-motor-speed"
    }
  }
};
function ht6(i27) {
  const t19 = i27 / 2, e11 = `
    <line 
      x1="${-t19}"
      y1="${-t19}"
      x2="${t19}"
      y2="${t19}"
    />
  `, o13 = `
    <line 
      x1="${-t19}"
      y1="${t19}"
      x2="${t19}"
      y2="${-t19}"
    />
  `;
  return `<g class="x">${e11} ${o13}</g>`;
}
function $3(i27) {
  return Math.min(1, Math.max(i27, -1));
}
function F6(i27) {
  const o13 = $3(i27);
  return o13 > 0 ? `
      height: ${Math.abs(o13) / 2 * 100}%;
      top: auto;
      bottom: 50%;
    ` : `
    height: ${Math.abs(o13) / 2 * 100}%;
    top: 50%;
    bottom: auto;
  `;
}
var U6 = class U7 extends H4 {
  constructor() {
    super(), this.frontLeftMotorSpeed = 0, this.frontRightMotorSpeed = 0, this.rearLeftMotorSpeed = 0, this.rearRightMotorSpeed = 0, new ResizeObserver(() => {
      this.resized();
    }).observe(this);
  }
  drawMotionVector(t19, e11, o13, r24) {
    const n33 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), a22 = n33.width * 0.13, d34 = 20, c27 = 20, h26 = n33.width - (a22 + d34) * 2, l26 = n33.height - c27 * 2, g32 = Math.min(h26, l26) / 2 - 16, v31 = {
      x: (t19 - e11 - o13 + r24) / 4,
      y: (t19 + e11 + o13 + r24) / 4
    }, b35 = (-t19 + e11 - o13 + r24) / 4, m34 = Math.hypot(v31.x, v31.y), k29 = Math.atan2(v31.y, v31.x);
    if (Math.abs(b35) <= 0.01 && m34 <= 0.01)
      return ht6(n33.width * 0.2);
    let y34 = "", w31 = "", x36 = "";
    return Math.abs(b35) > 0.01 && (y34 = V6(
      0,
      g32,
      -b35 * Math.PI,
      0,
      8
    ), w31 = V6(
      Math.PI,
      g32,
      -b35 * Math.PI,
      0,
      8
    )), m34 > 0.01 && (x36 = q6(
      m34 * g32,
      -k29,
      0,
      8
    )), `<g class="arrow">${y34} ${w31} ${x36}</g>`;
  }
  drawDrivetrain() {
    const e11 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), o13 = e11.width * 0.13, r24 = Math.min(e11.width * 0.13, e11.height * 0.15), s18 = 20, n33 = 20, a22 = `
      <rect 
        width="calc(100% - ${(o13 + s18) * 2}px)" 
        height="calc(100% - ${n33 * 2}px)"
        x="${o13 + s18}" 
        y="20px" 
      />
    `, d34 = `
      <rect 
        width="${o13}px" 
        height="${r24 * 2}" 
        x="${s18}px" 
        y="${n33}px" 
      />
    `, c27 = `
      <rect 
        width="${o13}px" 
        height="${r24 * 2}" 
        x="calc(100% - ${o13 + s18}px)" 
        y="${n33}px" 
      />
    `, h26 = `
      <rect 
        width="${o13}px" 
        height="${r24 * 2}" 
        x="${s18}px"
        y="calc(100% - ${r24 * 2 + n33}px)"
      />
    `, l26 = `
      <rect 
        width="${o13}px" 
        height="${r24 * 2}" 
        x="calc(100% - ${o13 + s18}px)" 
        y="calc(100% - ${r24 * 2 + n33}px)"
      />
    `;
    return a22 + d34 + c27 + h26 + l26;
  }
  getFlForegroundStyle() {
    return F6(this.frontLeftMotorSpeed);
  }
  getFrForegroundStyle() {
    return F6(this.frontRightMotorSpeed);
  }
  getRlForegroundStyle() {
    return F6(this.rearLeftMotorSpeed);
  }
  getRrForegroundStyle() {
    return F6(this.rearRightMotorSpeed);
  }
  firstUpdated() {
    const t19 = this.drawMotionVector(0, 0, 0, 0);
    this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain(), this.renderRoot.querySelector("#forceVector").innerHTML = t19;
  }
  resized() {
    const t19 = this.drawMotionVector(
      $3(this.frontLeftMotorSpeed),
      $3(this.frontRightMotorSpeed),
      $3(this.rearLeftMotorSpeed),
      $3(this.rearRightMotorSpeed)
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = t19;
    const o13 = this.renderRoot.querySelector("#svg").getBoundingClientRect();
    this.renderRoot.querySelector("#forceVector").style.transform = `translate(${o13.width * 0.5}px, ${o13.height * 0.5}px)`, this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain();
  }
  updated(t19) {
    super.updated(t19);
    const e11 = this.drawMotionVector(
      $3(this.frontLeftMotorSpeed),
      $3(this.frontRightMotorSpeed),
      $3(this.rearLeftMotorSpeed),
      $3(this.rearRightMotorSpeed)
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = e11;
  }
  render() {
    return Ot4`
      <div class="diff-drive-container">
        <div class="speed-pair">
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getFlForegroundStyle()}"
              ></div>
            </div>
          </div>
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getRlForegroundStyle()}"
              ></div>
            </div>
          </div>
        </div>
        <svg id="svg">
          <g id="forceVector"></g>
          <g id="drivetrain" class="drivetrain"></g>
        </svg>
        <div class="speed-pair">
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getFrForegroundStyle()}"
              ></div>
            </div>
          </div>
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getRrForegroundStyle()}"
              ></div>
            </div>
          </div>
        </div>
      </div>
    `;
  }
};
U6.styles = Ut3`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
      padding: 0 10px;
      font-family: sans-serif;
    }

    .diff-drive-container {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
    }

    svg {
      overflow: overlay;
      flex: 1;
      height: 100%;
    }

    svg .x {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
    }

    svg .arrow line,
    svg .arrow path {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
      fill: none;
    }

    svg .arrow polygon {
      stroke: rgb(50, 50, 255);
      fill: rgb(50, 50, 255);
    }

    svg .drivetrain {
      fill: none;
      stroke: var(--frc-mecanum-drivebase-drivetrain-color, #000);
    }

    .bar {
      position: relative;
      height: calc(100% - 30px);
      width: 20px;
      border-radius: 3px;
      margin: 15px 0;
      background: var(--frc-bar-background, #ddd);
    }

    .speed-pair {
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-around;
    }

    .speed {
      display: flex;
      height: 48%;
      flex-direction: row;
      align-items: center;
      margin-left: 30px;
    }

    frc-axis {
      width: 10px;
      height: calc(100% - 35px);
    }

    .foreground {
      position: absolute;
      top: 0;
      width: 20px;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
    }
  `;
var R6 = U6;
P6([
  Mt4({ type: Number, attribute: "front-left-motor-speed" })
], R6.prototype, "frontLeftMotorSpeed");
P6([
  Mt4({ type: Number, attribute: "front-right-motor-speed" })
], R6.prototype, "frontRightMotorSpeed");
P6([
  Mt4({ type: Number, attribute: "rear-left-motor-speed" })
], R6.prototype, "rearLeftMotorSpeed");
P6([
  Mt4({ type: Number, attribute: "rear-right-motor-speed" })
], R6.prototype, "rearRightMotorSpeed");
customElements.get("frc-mecanum-drivebase") || customElements.define("frc-mecanum-drivebase", R6);
var lt6 = Object.defineProperty;
var f8 = (i27, t19, e11, o13) => {
  for (var r24 = void 0, s18 = i27.length - 1, n33; s18 >= 0; s18--)
    (n33 = i27[s18]) && (r24 = n33(t19, e11, r24) || r24);
  return r24 && lt6(t19, e11, r24), r24;
};
var wt5 = {
  dashboard: {
    displayName: "Swerve Drivebase"
  },
  properties: {
    moduleCount: {
      type: "Number",
      defaultValue: 4,
      description: "The number of swerve modules"
    },
    wheelLocations: {
      type: "Array",
      defaultValue: [1, -1, 1, 1, -1, -1, -1, 1],
      description: "An array of numbers describing the location of the swerve module wheels relative to the physical center of the robot"
    },
    measuredStates: {
      type: "Array",
      defaultValue: [0, 0, 0, 0, 0, 0, 0, 0],
      description: "An array of rotation and velocity values describing the measured state of each swerve module"
    },
    desiredStates: {
      type: "Array",
      defaultValue: [0, 0, 0, 0, 0, 0, 0, 0],
      description: "An array of rotation and velocity values describing the desired state of each swerve module"
    },
    robotRotation: {
      type: "Number",
      description: "The robot's current rotation based on odometry or gyro readings"
    },
    maxSpeed: {
      type: "Number",
      defaultValue: 1,
      description: "The maximum achievable speed of the modules, used to adjust the size of the vectors."
    },
    rotationUnit: {
      type: "String",
      defaultValue: "radians",
      description: "The units of the module rotations and robot rotation",
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["radians", "degrees"];
        }
      }
    },
    sizeLeftRight: {
      type: "Number",
      defaultValue: 2,
      description: "The distance between the left and right modules."
    },
    sizeFrontBack: {
      type: "Number",
      defaultValue: 2,
      description: "The distance between the front and back modules."
    }
    // forwardDirection: {
    //   type: 'String',
    //   defaultValue: 'up',
    //   description:
    //     'The direction the robot should be facing when the "Robot Rotation" is zero or blank. This option is often useful to align with odometry data or match videos.',
    //   input: {
    //     type: 'StringDropdown',
    //     allowCustomValues: false,
    //     getOptions(): string[] {
    //       return ['up', 'right', 'down', 'left'];
    //     },
    //   },
    // },
    // maxAngularVelocity: {
    //   type: 'Number',
    //   defaultValue: Math.PI * 2,
    //   description:
    //     'The maximum achievable angular velocity of the robot. This is used to visualize the angular velocity from the chassis speeds properties.',
    // },
    // measuredChassisSpeeds: {
    //   type: 'Array',
    //   description:
    //     'Describes the measured forward, sideways and angular velocity of the robot',
    // },
    // desiredChassisSpeeds: {
    //   type: 'Array',
    //   description:
    //     'Describes the desired forward, sideways and angular velocity of the robot',
    // },
  }
};
function T7(i27, ...t19) {
  return t19.some((e11) => i27.has(e11));
}
function K6(i27) {
  return i27 * Math.PI / 180;
}
function H6(i27) {
  return i27 * 180 / Math.PI;
}
function ut6(i27, t19, e11) {
  return Math.max(Math.min(i27, e11), t19);
}
function O6(i27, t19 = false) {
  const e11 = K6(-(i27 - 90));
  return [t19 ? -Math.cos(e11) : Math.cos(e11), Math.sin(e11)];
}
var S6 = 35;
var E6 = class E7 extends H4 {
  constructor() {
    super(...arguments), this.moduleCount = 4, this.wheelLocations = [
      2.5,
      2,
      2.5,
      -2,
      -2.5,
      2,
      -2.5,
      -2
    ], this.measuredStates = [
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0
    ], this.desiredStates = [
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0
    ], this.robotRotation = 0, this.maxSpeed = 1, this.rotationUnit = "radians", this.sizeLeftRight = 4, this.sizeFrontBack = 5, this.normalizedRotation = 0;
  }
  drawBase() {
    const [t19, e11] = this.getBaseSize();
    Ei2(this._base).attr("width", t19).attr("height", e11).attr("stroke-width", 5).attr("fill", "none");
  }
  setSwerveRotation() {
    Ei2(this._swerve).attr(
      "transform",
      `rotate(${-this.normalizedRotation})`
    );
  }
  setSwerveOrigin() {
    const [t19, e11] = this.getBaseSize();
    Ei2(this._swerve).attr(
      "transform-origin",
      `${t19 / 2} ${e11 / 2}`
    );
  }
  getRobotRotationRad() {
    const t19 = this.robotRotation;
    return this.rotationUnit === "radians" ? t19 : K6(t19);
  }
  getSvgSize() {
    const { width: t19 } = this.getBoundingClientRect();
    return [t19, t19 * this.sizeFrontBack / this.sizeLeftRight];
  }
  getBaseSize() {
    const [t19] = this.getSvgSize();
    return [t19, t19 * this.sizeFrontBack / this.sizeLeftRight];
  }
  updated(t19) {
    if (t19.has("robotRotation")) {
      const e11 = this.robotRotation ?? 0, r24 = (t19.get("robotRotation") ?? e11) - e11, s18 = this.rotationUnit === "degrees" ? r24 : H6(r24), n33 = [
        s18 - 720,
        s18 - 360,
        s18,
        s18 + 360,
        s18 + 720
      ];
      let a22 = 0, d34 = Math.abs(n33[0]);
      for (let c27 = 1; c27 < n33.length; c27 += 1) {
        const h26 = Math.abs(n33[c27]);
        h26 < d34 && (a22 = c27, d34 = h26);
      }
      this.normalizedRotation -= n33[a22];
    }
    T7(
      t19,
      "sizeLeftRight",
      "sizeFrontBack",
      "robotRotation",
      "rotationUnit"
    ) && this.drawBase(), T7(t19, "robotRotation", "rotationUnit") && this.setSwerveRotation(), T7(t19, "sizeLeftRight", "sizeFrontBack") && this.setSwerveOrigin();
  }
  resized() {
    const [t19, e11] = this.getSvgSize();
    Ei2(this._svg).attr("width", t19).attr("height", e11), this.drawBase(), this.setSwerveOrigin(), this.requestUpdate();
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.resized();
    }).observe(this), this.resized();
  }
  getSwerveModules() {
    const t19 = [];
    for (let e11 = 0; e11 < this.moduleCount; e11 += 1) {
      const r24 = {
        location: [
          this.wheelLocations[e11 * 2],
          this.wheelLocations[e11 * 2 + 1]
        ],
        desiredRotation: this.desiredStates[e11 * 2],
        desiredVelocity: this.desiredStates[e11 * 2 + 1],
        measuredRotation: this.measuredStates[e11 * 2],
        measuredVelocity: this.measuredStates[e11 * 2 + 1]
      };
      t19.push(r24);
    }
    return t19;
  }
  renderModuleDirectionIndicator(t19, e11, o13) {
    const r24 = this.rotationUnit === "degrees" ? e11 : H6(e11), [s18, n33] = O6(r24 - 15, true), [a22, d34] = O6(r24 + 15, true), c27 = `M ${-s18 * 60},${n33 * 60} L 0,0 ${-a22 * 60},${d34 * 60}`;
    return Tt3`
      <defs>
        <clipPath id=${t19}>
          <path d=${c27} fill="white" stroke="5" stroke="white" />
        </clipPath>
      </defs>
      <circle r=${S6 - 2.5} fill=${o13} stroke-width="0" clip-path=${`url(#${t19})`}></circle>
    `;
  }
  renderModuleVelocityIndicator(t19, e11, o13, r24) {
    const s18 = this.rotationUnit === "degrees" ? e11 : H6(e11);
    let n33 = ut6(100 * o13 / this.maxSpeed, -100, 100);
    n33 += S6 * Math.sign(n33), n33 *= -1;
    const a22 = Math.abs(n33) - 20, d34 = Math.abs(n33), c27 = `M -17.5,${a22} L 2.5,${d34} L 22.5,${a22}`, h26 = `rotate(${-s18 + (n33 < 0 ? 180 : 0)})`, l26 = `${t19}-velocity`;
    return Tt3`
     <defs>
        <mask id=${l26}>
          <circle r="300" fill="white" ></circle>
          <circle r=${S6 + 2.5} fill="black" ></circle>
        </mask>
      </defs>
      <g class="velocity-indicator" transform=${h26} mask="url(#${l26})">
        <rect width="5" height=${Math.abs(n33)} fill=${r24}></rect>
        <path d=${c27} stroke=${r24} stroke-width="5" fill="none" />
      </g>
    `;
  }
  renderModules() {
    const t19 = this.getSwerveModules(), [e11, o13] = this.getBaseSize();
    return Tt3`
      <g class="modules">
        ${t19.map((r24, s18) => {
      const {
        desiredRotation: n33,
        measuredRotation: a22,
        location: d34,
        measuredVelocity: c27,
        desiredVelocity: h26
      } = r24, l26 = o13 / 2 * (1 - d34[0]) + S6 * Math.sign(d34[0]), g32 = e11 / 2 * (d34[1] + 1) - S6 * Math.sign(d34[1]), v31 = `module-${s18}-measured-clip`, b35 = `module-${s18}-desired-clip`;
      return Tt3`
            <g transform=${`translate(${g32}, ${l26})`}>
              <circle class="module-circle" r=${S6} stroke-width="5" fill="none"></circle>
              ${this.renderModuleDirectionIndicator(
        v31,
        a22,
        "blue"
      )}
              ${this.renderModuleDirectionIndicator(
        b35,
        n33,
        "red"
      )}
              ${this.renderModuleVelocityIndicator(
        v31,
        a22,
        c27,
        "blue"
      )}
              ${this.renderModuleVelocityIndicator(
        b35,
        n33,
        h26,
        "red"
      )}
            </g>
          `;
    })} 
      </g>
    `;
  }
  renderWheelMask() {
    const t19 = this.getSwerveModules(), [e11, o13] = this.getBaseSize();
    return Tt3`
      <defs>
        <mask id="wheel-mask">
          <rect fill="white" width=${e11} height=${o13} stroke-width="5" stroke="white"></rect>
          ${t19.map((r24) => {
      const s18 = o13 / 2 - o13 * r24.location[0] / this.sizeFrontBack, n33 = e11 / 2 - e11 * r24.location[1] / this.sizeLeftRight;
      return Tt3`
              <circle r="50" fill="black" transform=${`translate(${n33}, ${s18})`}></circle>
            `;
    })}
        </mask>
      </defs>
    `;
  }
  renderArrow() {
    const [t19, e11] = this.getBaseSize(), o13 = `M ${t19 / 2 - 30},100 L ${t19 / 2},70 L ${t19 / 2 + 30},100`;
    return Tt3`
      <line class="arrow" x1=${t19 / 2} y1=${70} x2=${t19 / 2} y2=${e11 - 30} stroke-width="5" />
      <path class="arrow" d=${o13} stroke-width="5" fill="none" />
    `;
  }
  render() {
    return Ot4`
      <div>
        ${Tt3`
          <svg>
            ${this.renderWheelMask()}
            <g class="swerve">
              <rect class="base" rx=${S6}></rect>
              ${this.renderModules()}
              ${this.renderArrow()}
            </g>
          </svg>
      `}
      </div>
    `;
  }
};
E6.styles = Ut3`
    :host {
      display: inline-block;
      width: 300px;
      height: auto;
      overflow: visible;
    }

    svg {
      width: 100%;
      overflow: visible;
    }

    .base {
      stroke: var(--frc-swerve-drive-color, black);
    }

    .arrow {
      stroke: var(--frc-swerve-drive-color, black);
    }

    .module-circle {
      stroke: var(--frc-swerve-drive-color, black);
    }
  `;
var u3 = E6;
f8([
  Mt4({ type: Number, attribute: "module-count" })
], u3.prototype, "moduleCount");
f8([
  Mt4({ type: Array, attribute: "wheel-locations" })
], u3.prototype, "wheelLocations");
f8([
  Mt4({ type: Array, attribute: "measured-states" })
], u3.prototype, "measuredStates");
f8([
  Mt4({ type: Array, attribute: "desired-states" })
], u3.prototype, "desiredStates");
f8([
  Mt4({ type: Number, attribute: "robot-rotation" })
], u3.prototype, "robotRotation");
f8([
  Mt4({ type: Number, attribute: "max-speed" })
], u3.prototype, "maxSpeed");
f8([
  Mt4({ type: String, attribute: "rotation-unit" })
], u3.prototype, "rotationUnit");
f8([
  Mt4({ type: Number, attribute: "size-left-right" })
], u3.prototype, "sizeLeftRight");
f8([
  Mt4({ type: Number, attribute: "size-front-back" })
], u3.prototype, "sizeFrontBack");
f8([
  h4("svg")
], u3.prototype, "_svg");
f8([
  h4(".swerve")
], u3.prototype, "_swerve");
f8([
  h4(".base")
], u3.prototype, "_base");
f8([
  h4(".modules")
], u3.prototype, "_modules");
customElements.get("frc-swerve-drivebase") || customElements.define("frc-swerve-drivebase", u3);

// node_modules/@frc-web-components/fwc/dist/units-DyibxdHs.js
var s4 = "m";
var n9 = {
  // metric
  km: 1e3,
  m: 1,
  cm: 0.01,
  mm: 1e-3,
  // imperial
  mi: 1609.34,
  yd: 0.9144,
  ft: 0.3048,
  in: 0.0254
};
var i7 = {
  km: "km",
  m: "m",
  meters: "m",
  cm: "cm",
  centimeters: "cm",
  mm: "mm",
  // imperial
  mi: "mi",
  miles: "mi",
  yd: "yd",
  yards: "yards",
  ft: "ft",
  feet: "ft",
  foot: "ft",
  in: "in",
  inches: "in"
};
var c2 = (t19, e11, m34) => (e11 = i7[e11], m34 = i7[m34], typeof n9[e11] > "u" && (e11 = s4), typeof n9[m34] > "u" && (m34 = s4), t19 * n9[e11] / n9[m34]);

// node_modules/@frc-web-components/fwc/dist/_commonjsHelpers-DaMA6jEr.js
var o = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function l5(e11) {
  return e11 && e11.__esModule && Object.prototype.hasOwnProperty.call(e11, "default") ? e11.default : e11;
}

// node_modules/@frc-web-components/fwc/dist/index-BXxACewW.js
function N6(i27, o13) {
  const u35 = [];
  for (let s18 = 0; s18 < i27.length / o13; s18 += 1)
    u35.push(i27.slice(o13 * s18, o13 * (s18 + 1)));
  return u35;
}
function z7(i27) {
  const o13 = new ArrayBuffer(8), u35 = new DataView(o13);
  return i27.forEach((s18, T21) => {
    u35.setUint8(T21, s18);
  }), u35.getFloat64(0);
}
function tt7(i27) {
  return N6(i27, 8).map(z7);
}
function it7(i27, o13 = 3) {
  const u35 = i27 instanceof Uint8Array ? tt7(i27) : i27;
  return N6(u35, o13);
}
var k5;
var C7;
function et7() {
  if (C7)
    return k5;
  C7 = 1;
  var i27 = "Expected a function", o13 = NaN, u35 = "[object Symbol]", s18 = /^\s+|\s+$/g, T21 = /^[-+]0x[0-9a-f]+$/i, W11 = /^0b[01]+$/i, B22 = /^0o[0-7]+$/i, M13 = parseInt, P20 = typeof o == "object" && o && o.Object === Object && o, R22 = typeof self == "object" && self && self.Object === Object && self, $25 = P20 || R22 || Function("return this")(), D18 = Object.prototype, U20 = D18.toString, q14 = Math.max, w31 = Math.min, x36 = function() {
    return $25.Date.now();
  };
  function G16(t19, n33, r24) {
    var f40, c27, p26, g32, a22, d34, m34 = 0, F19 = false, b35 = false, E25 = true;
    if (typeof t19 != "function")
      throw new TypeError(i27);
    n33 = A18(n33) || 0, y34(r24) && (F19 = !!r24.leading, b35 = "maxWait" in r24, p26 = b35 ? q14(A18(r24.maxWait) || 0, n33) : p26, E25 = "trailing" in r24 ? !!r24.trailing : E25);
    function I18(e11) {
      var l26 = f40, h26 = c27;
      return f40 = c27 = void 0, m34 = e11, g32 = t19.apply(h26, l26), g32;
    }
    function J12(e11) {
      return m34 = e11, a22 = setTimeout(v31, n33), F19 ? I18(e11) : g32;
    }
    function K16(e11) {
      var l26 = e11 - d34, h26 = e11 - m34, _21 = n33 - l26;
      return b35 ? w31(_21, p26 - h26) : _21;
    }
    function L12(e11) {
      var l26 = e11 - d34, h26 = e11 - m34;
      return d34 === void 0 || l26 >= n33 || l26 < 0 || b35 && h26 >= p26;
    }
    function v31() {
      var e11 = x36();
      if (L12(e11))
        return S23(e11);
      a22 = setTimeout(v31, K16(e11));
    }
    function S23(e11) {
      return a22 = void 0, E25 && f40 ? I18(e11) : (f40 = c27 = void 0, g32);
    }
    function Q12() {
      a22 !== void 0 && clearTimeout(a22), m34 = 0, f40 = d34 = c27 = a22 = void 0;
    }
    function Y13() {
      return a22 === void 0 ? g32 : S23(x36());
    }
    function O20() {
      var e11 = x36(), l26 = L12(e11);
      if (f40 = arguments, c27 = this, d34 = e11, l26) {
        if (a22 === void 0)
          return J12(d34);
        if (b35)
          return a22 = setTimeout(v31, n33), I18(d34);
      }
      return a22 === void 0 && (a22 = setTimeout(v31, n33)), g32;
    }
    return O20.cancel = Q12, O20.flush = Y13, O20;
  }
  function H16(t19, n33, r24) {
    var f40 = true, c27 = true;
    if (typeof t19 != "function")
      throw new TypeError(i27);
    return y34(r24) && (f40 = "leading" in r24 ? !!r24.leading : f40, c27 = "trailing" in r24 ? !!r24.trailing : c27), G16(t19, n33, {
      leading: f40,
      maxWait: n33,
      trailing: c27
    });
  }
  function y34(t19) {
    var n33 = typeof t19;
    return !!t19 && (n33 == "object" || n33 == "function");
  }
  function V16(t19) {
    return !!t19 && typeof t19 == "object";
  }
  function X14(t19) {
    return typeof t19 == "symbol" || V16(t19) && U20.call(t19) == u35;
  }
  function A18(t19) {
    if (typeof t19 == "number")
      return t19;
    if (X14(t19))
      return o13;
    if (y34(t19)) {
      var n33 = typeof t19.valueOf == "function" ? t19.valueOf() : t19;
      t19 = y34(n33) ? n33 + "" : n33;
    }
    if (typeof t19 != "string")
      return t19 === 0 ? t19 : +t19;
    t19 = t19.replace(s18, "");
    var r24 = W11.test(t19);
    return r24 || B22.test(t19) ? M13(t19.slice(2), r24 ? 2 : 8) : T21.test(t19) ? o13 : +t19;
  }
  return k5 = H16, k5;
}
var nt7 = et7();
var ot7 = l5(nt7);

// node_modules/@frc-web-components/fwc/dist/components/field.es.js
var H7 = (p26) => {
  throw TypeError(p26);
};
var _5 = (p26, i27, t19) => i27.has(p26) || H7("Cannot " + t19);
var b8 = (p26, i27, t19) => (_5(p26, i27, "read from private field"), t19 ? t19.call(p26) : i27.get(p26));
var R7 = (p26, i27, t19) => i27.has(p26) ? H7("Cannot add the same private member more than once") : i27 instanceof WeakSet ? i27.add(p26) : i27.set(p26, t19);
var I7 = (p26, i27, t19, s18) => (_5(p26, i27, "write to private field"), s18 ? s18.call(p26, t19) : i27.set(p26, t19), t19);
var X6 = (p26, i27, t19) => (_5(p26, i27, "access private method"), t19);
var T8 = [
  // https://www.chiefdelphi.com/t/4k-field-image-2025-reefscape/478797
  {
    game: "Reefscape",
    image: "./field-images/2025-field.jpg",
    corners: {
      topLeft: [421, 91],
      bottomRight: [3352, 1437]
    },
    size: [57.57291667, 26.4167],
    unit: "foot"
  },
  // Thanks to MikLast for providing the 2024 field image here:
  // https://www.chiefdelphi.com/t/2024-crescendo-top-down-field-renders/447764
  {
    game: "Crescendo",
    image: "./field-images/2024-field.jpg",
    corners: {
      topLeft: [513, 78],
      bottomRight: [3327, 1475]
    },
    size: [54.265092, 26.31234],
    unit: "foot"
  },
  {
    game: "Charged Up",
    image: "./field-images/2023-field.jpg",
    corners: {
      topLeft: [46, 36],
      bottomRight: [1088, 544]
    },
    size: [54.27083, 26.2916],
    unit: "foot"
  },
  {
    game: "Rapid React",
    image: "./field-images/2022-field.jpg",
    corners: {
      topLeft: [74, 50],
      bottomRight: [1774, 900]
    },
    size: [54, 27],
    unit: "foot"
  },
  {
    game: "Infinite Recharge",
    image: "./field-images/2020-field.jpg",
    corners: {
      topLeft: [96, 25],
      bottomRight: [1040, 514]
    },
    size: [52.4375, 26.9375],
    unit: "foot"
  },
  {
    game: "Destination: Deep Space",
    image: "./field-images/2019-field.jpg",
    corners: {
      topLeft: [217, 40],
      bottomRight: [1372, 615]
    },
    size: [54, 27],
    unit: "foot"
  },
  {
    game: "FIRST Power Up",
    image: "./field-images/2018-field.jpg",
    corners: {
      topLeft: [125, 20],
      bottomRight: [827, 370]
    },
    size: [54, 27],
    unit: "feet"
  },
  {
    game: "Barrel Racing Path",
    image: "./field-images/2021-barrel.png",
    corners: {
      topLeft: [20, 20],
      bottomRight: [780, 400]
    },
    size: [30, 15],
    unit: "feet"
  },
  {
    game: "Bounce Path",
    image: "./field-images/2021-bounce.png",
    corners: {
      topLeft: [20, 20],
      bottomRight: [780, 400]
    },
    size: [30, 15],
    unit: "feet"
  },
  {
    game: "Galactic Search A",
    image: "./field-images/2021-galacticsearcha.png",
    corners: {
      topLeft: [20, 20],
      bottomRight: [780, 400]
    },
    size: [30, 15],
    unit: "feet"
  },
  {
    game: "Galactic Search B",
    image: "./field-images/2021-galacticsearchb.png",
    corners: {
      topLeft: [20, 20],
      bottomRight: [780, 400]
    },
    size: [30, 15],
    unit: "feet"
  },
  {
    game: "Slalom Path",
    image: "./field-images/2021-slalom.png",
    corners: {
      topLeft: [20, 20],
      bottomRight: [780, 400]
    },
    size: [30, 15],
    unit: "feet"
  }
];
var N7;
var F7;
var $4 = class {
  constructor() {
    R7(this, N7, {});
    R7(this, F7, /* @__PURE__ */ new Map());
  }
  getImage(i27) {
    if (typeof b8(this, N7)[i27] > "u") {
      const t19 = new Image(), s18 = {
        src: i27,
        width: 0,
        height: 0,
        loaded: false,
        image: t19
      };
      t19.onload = () => {
        s18.loaded = true, s18.width = t19.width, s18.height = t19.height, [...b8(this, F7).values()].forEach((e11) => {
          e11(i27);
        });
      }, b8(this, N7)[i27] = s18, t19.src = i27;
    }
    return b8(this, N7)[i27];
  }
  static getBoundingBoxDims(i27, t19) {
    const s18 = Math.abs(i27.width * Math.cos(t19)) + Math.abs(i27.height * Math.sin(t19)), e11 = Math.abs(i27.width * Math.sin(t19)) + Math.abs(i27.height * Math.cos(t19));
    return {
      width: s18,
      height: e11
    };
  }
  static fitImageInsideBox(i27, t19) {
    return t19.width / i27.width * i27.height <= t19.height ? {
      width: t19.width,
      height: t19.width / i27.width * i27.height
    } : {
      width: t19.height / i27.height * i27.width,
      height: t19.height
    };
  }
  onImageLoad(i27) {
    const t19 = Symbol("image");
    return b8(this, F7).set(t19, i27), () => {
      b8(this, F7).delete(t19);
    };
  }
};
N7 = /* @__PURE__ */ new WeakMap(), F7 = /* @__PURE__ */ new WeakMap();
var it8 = Object.defineProperty;
var S7 = (p26, i27, t19, s18) => {
  for (var e11 = void 0, o13 = p26.length - 1, r24; o13 >= 0; o13--)
    (r24 = p26[o13]) && (e11 = r24(i27, t19, e11) || e11);
  return e11 && it8(i27, t19, e11), e11;
};
var C8 = class extends H4 {
  constructor() {
    super(...arguments), this.unit = "inherit", this.rotationUnit = "inherit", this.image = "", this.color = "#0000ff", this.opacity = 1, this.pose = [0, 0, 0], this.width = 0.6, this.length = 0.9;
  }
  draw({
    canvas: i27,
    unit: t19,
    rotationUnit: s18,
    xToPx: e11,
    yToPx: o13,
    lengthToPx: r24,
    origin: a22
  }) {
    const n33 = this.unit === "inherit" || this.unit === null ? t19 : this.unit, u35 = this.rotationUnit === "inherit" || this.rotationUnit === null ? s18 : this.rotationUnit, [g32, f40] = this.pose, m34 = u35 === "rad" ? this.pose[2] : this.pose[2] / (180 / Math.PI);
    i27.globalAlpha = Math.max(0, Math.min(1, this.opacity)), i27.fillStyle = "#222", i27.strokeStyle = this.color, i27.lineWidth = r24(3, "in"), i27.translate(e11(g32, n33), o13(f40, n33)), i27.rotate(-m34 + (a22 === "red" ? Math.PI : 0)), i27.roundRect(
      -r24(this.length / 2, n33),
      -r24(this.width / 2, n33),
      r24(this.length, n33),
      r24(this.width, n33),
      1
    ), i27.fill(), i27.stroke(), i27.beginPath(), i27.fillStyle = "white", i27.strokeStyle = "white", i27.lineWidth = r24(2, "in"), i27.moveTo(-r24(this.length * 0.3, n33), 0), i27.lineTo(r24(this.length * 0.3, n33), 0), i27.moveTo(
      r24(this.length * 0.1, n33),
      -r24(this.width * 0.25, n33)
    ), i27.lineTo(r24(this.length * 0.3, n33), 0), i27.lineTo(
      r24(this.length * 0.1, n33),
      r24(this.width * 0.25, n33)
    ), i27.stroke();
  }
};
S7([
  Mt4({ type: String })
], C8.prototype, "unit");
S7([
  Mt4({ type: String, attribute: "rotation-unit" })
], C8.prototype, "rotationUnit");
S7([
  Mt4({ type: String })
], C8.prototype, "image");
S7([
  Mt4({ type: String })
], C8.prototype, "color");
S7([
  Mt4({ type: Number })
], C8.prototype, "opacity");
S7([
  Mt4({ type: Array })
], C8.prototype, "pose");
S7([
  Mt4({ type: Number })
], C8.prototype, "width");
S7([
  Mt4({ type: Number })
], C8.prototype, "length");
customElements.get("frc-field-robot") || customElements.define("frc-field-robot", C8);
var ot8 = Object.defineProperty;
var v8 = (p26, i27, t19, s18) => {
  for (var e11 = void 0, o13 = p26.length - 1, r24; o13 >= 0; o13--)
    (r24 = p26[o13]) && (e11 = r24(i27, t19, e11) || e11);
  return e11 && ot8(i27, t19, e11), e11;
};
var P7 = class extends H4 {
  constructor() {
    super(...arguments), this.poses = [], this.translations = [], this.color = "#FFA500", this.unit = "inherit", this.lineWidth = 4, this.opacity = 0.7, this._poses = [], this._translations = [];
  }
  updated(i27) {
    var t19;
    i27.has("poses") && (typeof ((t19 = this.poses) == null ? void 0 : t19[0]) == "number" || this.poses instanceof Uint8Array ? this._poses = it7(this.poses) : this._poses = this.poses), i27.has("translations") && (this._translations = it7(this.translations, 2));
  }
  draw({ canvas: i27, unit: t19, xToPx: s18, yToPx: e11 }) {
    const o13 = this.unit === "inherit" || this.unit === null ? t19 : this.unit;
    if (i27.lineWidth = this.lineWidth, i27.strokeStyle = this.color, i27.globalAlpha = this.opacity, this._poses.length > 1) {
      for (let r24 = 0; r24 < this._poses.length - 1; r24 += 1) {
        const [a22, n33] = this._poses[r24], [u35, g32] = this._poses[r24 + 1];
        i27.moveTo(s18(a22, o13), e11(n33, o13)), i27.lineTo(s18(u35, o13), e11(g32, o13));
      }
      i27.stroke();
    }
    if (this._translations.length > 1) {
      for (let r24 = 0; r24 < this._translations.length - 1; r24 += 1) {
        const [a22, n33] = this._translations[r24], [u35, g32] = this._translations[r24 + 1];
        i27.moveTo(s18(a22, o13), e11(n33, o13)), i27.lineTo(s18(u35, o13), e11(g32, o13));
      }
      i27.stroke();
    }
  }
};
v8([
  Mt4({ type: Array })
], P7.prototype, "poses");
v8([
  Mt4({ type: Array })
], P7.prototype, "translations");
v8([
  Mt4({ type: String })
], P7.prototype, "color");
v8([
  Mt4({ type: String })
], P7.prototype, "unit");
v8([
  Mt4({ type: Number, attribute: "line-width" })
], P7.prototype, "lineWidth");
v8([
  Mt4({ type: Number })
], P7.prototype, "opacity");
v8([
  n7()
], P7.prototype, "_poses");
v8([
  n7()
], P7.prototype, "_translations");
customElements.get("frc-field-path") || customElements.define("frc-field-path", P7);
var rt7 = Object.defineProperty;
var w6 = (p26, i27, t19, s18) => {
  for (var e11 = void 0, o13 = p26.length - 1, r24; o13 >= 0; o13--)
    (r24 = p26[o13]) && (e11 = r24(i27, t19, e11) || e11);
  return e11 && rt7(i27, t19, e11), e11;
};
function st7(p26) {
  return p26 * Math.PI / 180;
}
var x8;
var V7;
var Y4;
var W6 = class W7 extends H4 {
  constructor() {
    super(...arguments);
    R7(this, V7);
    R7(this, x8);
    this.game = T8[0].game, this.cropTop = null, this.cropBottom = null, this.cropLeft = null, this.cropRight = null, this.cropType = "percent", this.unit = s4, this.rotationUnit = "rad", this.rotation = 0, this.showGrid = false, this.gridSize = 1, this.origin = "blue", I7(this, x8, new $4());
  }
  getConfig() {
    return T8.find(({ game: s18 }) => s18 === this.game) ?? T8[0];
  }
  getCanvasCtx() {
    return this.canvas.getContext("2d");
  }
  getCropPercent() {
    if (this.cropType === "percent") {
      const J12 = this.cropLeft ?? 0, Q12 = this.cropTop ?? 0, Z12 = this.cropRight ?? 1, tt12 = this.cropBottom ?? 1;
      return { x1: J12, y1: Q12, x2: Z12, y2: tt12 };
    }
    const { corners: t19, image: s18, unit: e11, size: o13 } = this.getConfig(), { loaded: r24, width: a22, height: n33 } = b8(this, x8).getImage(s18);
    if (!r24)
      return { x1: 0, y1: 0, x2: 1, y2: 1 };
    const u35 = [this.cropLeft ?? 0, this.cropTop ?? 0], g32 = [
      this.cropRight ?? c2(o13[0], e11, this.unit),
      this.cropBottom ?? c2(o13[1], e11, this.unit)
    ], f40 = t19.topLeft[0] / a22, m34 = t19.topLeft[1] / n33, k29 = t19.bottomRight[0] / a22, z21 = t19.bottomRight[1] / n33, O20 = k29 - f40, G16 = z21 - m34;
    return {
      x1: f40 + O20 * c2(u35[0], this.unit, e11) / o13[0],
      y1: m34 + G16 * c2(u35[1], this.unit, e11) / o13[1],
      x2: f40 + O20 * c2(g32[0], this.unit, e11) / o13[0],
      y2: m34 + G16 * c2(g32[1], this.unit, e11) / o13[1]
    };
  }
  getFieldRectPx() {
    const { corners: t19, image: s18 } = this.getConfig(), { loaded: e11, width: o13, height: r24 } = b8(this, x8).getImage(s18);
    if (!e11)
      return { x: 0, y: 0, width: 0, height: 0 };
    const a22 = t19.topLeft[0] / o13, n33 = t19.topLeft[1] / r24, u35 = t19.bottomRight[0] / o13, g32 = t19.bottomRight[1] / r24, f40 = this.getCropPercent(), m34 = f40.x2 - f40.x1, k29 = f40.y2 - f40.y1, z21 = this.canvas.width / m34, O20 = this.canvas.height / k29;
    return {
      x: (a22 - f40.x1) * z21,
      y: (n33 - f40.y1) * O20,
      width: (u35 - a22) * z21,
      height: (g32 - n33) * O20
    };
  }
  pxToX(t19, s18 = this.unit) {
    const e11 = this.getFieldRectPx(), { size: o13, unit: r24 } = this.getConfig();
    if (e11.width === 0)
      return 0;
    const a22 = e11.width / o13[0], n33 = t19 * (this.canvas.width / this.canvas.clientWidth), u35 = this.origin !== "red" ? (n33 - e11.x) / a22 : (e11.x + e11.width - n33) / a22;
    return c2(u35, r24, s18);
  }
  xToPx(t19, s18 = this.unit) {
    const e11 = this.getFieldRectPx(), { size: o13, unit: r24 } = this.getConfig();
    if (e11.width === 0)
      return 0;
    const a22 = e11.width / o13[0], n33 = c2(t19, s18, r24);
    return this.origin !== "red" ? e11.x + n33 * a22 : e11.x + e11.width - n33 * a22;
  }
  yToPx(t19, s18 = this.unit) {
    const e11 = this.getFieldRectPx(), { size: o13, unit: r24 } = this.getConfig();
    if (e11.height === 0)
      return 0;
    const a22 = e11.height / o13[1], n33 = c2(t19, s18, r24);
    return this.origin !== "red" ? e11.y + e11.height - n33 * a22 : e11.y + n33 * a22;
  }
  pxToY(t19, s18 = this.unit) {
    const e11 = this.getFieldRectPx(), { size: o13, unit: r24 } = this.getConfig();
    if (e11.height === 0)
      return 0;
    const a22 = e11.height / o13[1], n33 = t19 * (this.canvas.height / this.canvas.clientHeight), u35 = this.origin !== "red" ? (e11.y + e11.height - n33) / a22 : (n33 - e11.y) / a22;
    return c2(u35, r24, s18);
  }
  lengthToPx(t19, s18 = this.unit) {
    const e11 = this.getFieldRectPx(), { size: o13, unit: r24 } = this.getConfig();
    if (e11.width === 0)
      return 0;
    const a22 = e11.width / o13[0];
    return c2(t19, s18, r24) * a22;
  }
  setContainerSize() {
    const t19 = { width: this.clientWidth, height: this.clientHeight }, s18 = this.getConfig().image, e11 = b8(this, x8).getImage(s18), { loaded: o13 } = e11;
    if (!o13)
      return;
    const r24 = this.getCropPercent(), a22 = {
      width: (r24.x2 - r24.x1) * e11.width,
      height: (r24.y2 - r24.y1) * e11.height
    }, n33 = $4.getBoundingBoxDims(
      a22,
      st7(this.rotation)
    ), g32 = $4.fitImageInsideBox(n33, {
      width: t19.width,
      height: t19.height
    }).width / n33.width;
    this.container.style.width = `${a22.width * g32}px`, this.container.style.height = `${a22.height * g32}px`;
  }
  drawImage() {
    const t19 = this.getCanvasCtx(), s18 = this.getConfig().image, { loaded: e11, image: o13, width: r24, height: a22 } = b8(this, x8).getImage(s18);
    if (!e11)
      return;
    const { clientWidth: n33, clientHeight: u35 } = this.canvas, g32 = n33 * window.devicePixelRatio, f40 = u35 * window.devicePixelRatio;
    this.canvas.width = g32, this.canvas.height = f40;
    const m34 = this.getCropPercent();
    t19.drawImage(
      o13,
      m34.x1 * r24,
      m34.y1 * a22,
      (m34.x2 - m34.x1) * r24,
      (m34.y2 - m34.y1) * a22,
      0,
      0,
      g32,
      f40
    );
  }
  drawFieldRect() {
    const t19 = this.getCanvasCtx(), { x: s18, y: e11, width: o13, height: r24 } = this.getFieldRectPx();
    t19.rect(s18, e11, o13, r24), t19.lineWidth = 2, t19.strokeStyle = "yellow", t19.stroke();
  }
  drawGrid() {
    const t19 = this.getCanvasCtx(), { image: s18, size: e11 } = this.getConfig(), { loaded: o13 } = b8(this, x8).getImage(s18);
    if (!(!o13 || !this.showGrid || this.gridSize <= 0)) {
      t19.lineWidth = 1, t19.strokeStyle = "gray";
      for (let r24 = 0; r24 <= e11[0]; r24 += this.gridSize)
        t19.beginPath(), t19.moveTo(this.xToPx(r24), this.yToPx(0)), t19.lineTo(this.xToPx(r24), this.yToPx(e11[1])), t19.stroke();
      for (let r24 = 0; r24 <= e11[1]; r24 += this.gridSize)
        t19.beginPath(), t19.moveTo(this.xToPx(0), this.yToPx(r24)), t19.lineTo(this.xToPx(e11[0]), this.yToPx(r24)), t19.stroke();
    }
  }
  drawChildren() {
    const t19 = {
      canvas: this.getCanvasCtx(),
      getFieldRectPx: () => this.getFieldRectPx(),
      unit: this.unit,
      rotationUnit: this.rotationUnit,
      xToPx: (e11, o13) => this.xToPx(e11, o13),
      yToPx: (e11, o13) => this.yToPx(e11, o13),
      lengthToPx: (e11, o13) => this.lengthToPx(e11, o13),
      origin: this.origin
    };
    [...this.children].flatMap((e11) => e11.tagName === "SLOT" ? e11.assignedElements() : e11).forEach((e11) => {
      var a22;
      const o13 = this.getCanvasCtx();
      o13.save(), o13.beginPath();
      const r24 = e11;
      (a22 = r24.draw) == null || a22.call(r24, t19), o13.restore();
    });
  }
  drawField() {
    this.setContainerSize(), this.drawImage(), this.drawFieldRect(), this.drawGrid(), this.drawChildren(), window.requestAnimationFrame(() => {
      this.drawField();
    });
  }
  firstUpdated() {
    this.drawField();
  }
  render() {
    return Ot4`
      <div class="outside-container">
        <div class="container" style="transform: rotate(${-this.rotation}deg)">
          <canvas @click=${X6(this, V7, Y4)}></canvas>
        </div>
      </div>
    `;
  }
};
x8 = /* @__PURE__ */ new WeakMap(), V7 = /* @__PURE__ */ new WeakSet(), Y4 = function(t19) {
  const s18 = this.pxToX(t19.offsetX), e11 = this.pxToY(t19.offsetY);
  this.dispatchEvent(
    new CustomEvent("fieldClick", {
      detail: {
        feet: {
          x: c2(s18, this.unit, "ft"),
          y: c2(e11, this.unit, "ft")
        },
        meters: {
          x: c2(s18, this.unit, "m"),
          y: c2(e11, this.unit, "m")
        }
      },
      bubbles: true,
      composed: true
    })
  );
}, W6.styles = Ut3`
    :host {
      display: inline-flex;
      position: relative;
      width: 500px;
      height: 300px;
      justify-content: center;
      align-items: center;
    }

    .container {
    }

    canvas {
      width: 100%;
      height: 100%;
    }
  `;
var d4 = W6;
w6([
  Mt4({ type: String })
], d4.prototype, "game");
w6([
  Mt4({ type: Number, attribute: "crop-top" })
], d4.prototype, "cropTop");
w6([
  Mt4({ type: Number, attribute: "crop-bottom" })
], d4.prototype, "cropBottom");
w6([
  Mt4({ type: Number, attribute: "crop-left" })
], d4.prototype, "cropLeft");
w6([
  Mt4({ type: Number, attribute: "crop-right" })
], d4.prototype, "cropRight");
w6([
  Mt4({ type: String, attribute: "crop-type" })
], d4.prototype, "cropType");
w6([
  Mt4({ type: String })
], d4.prototype, "unit");
w6([
  Mt4({ type: String, attribute: "rotation-unit" })
], d4.prototype, "rotationUnit");
w6([
  Mt4({ type: Number })
], d4.prototype, "rotation");
w6([
  Mt4({ type: Boolean, attribute: "show-grid" })
], d4.prototype, "showGrid");
w6([
  Mt4({ type: Number, attribute: "grid-size" })
], d4.prototype, "gridSize");
w6([
  Mt4({ type: String })
], d4.prototype, "origin");
w6([
  h4("canvas", true)
], d4.prototype, "canvas");
w6([
  h4(".container", true)
], d4.prototype, "container");
customElements.get("frc-field") || customElements.define("frc-field", d4);
var nt8 = class {
  constructor(i27, t19) {
    this.sourceKey = "", this.sourceProvider = "", this.store = i27, this.onUpdate = t19;
  }
  setSource(i27, t19) {
    var e11;
    this.sourceKey = i27, this.sourceProvider = t19, this.addFieldObjectsFromSources(), (e11 = this.unsubscriber) == null || e11.call(this);
    const s18 = ot7(() => {
      this.addFieldObjectsFromSources();
    }, 1e3 / 60);
    this.unsubscriber = this.store.subscribe(t19, i27, s18, true);
  }
  addFieldObjectsFromSources() {
    var s18;
    const i27 = this.store.getSource(this.sourceProvider, this.sourceKey);
    if (!i27 || ((s18 = i27.getChildren()[".type"]) == null ? void 0 : s18.getValue()) !== "Field2d")
      return;
    const t19 = [];
    Object.entries(i27.getChildren()).forEach(([e11, o13]) => {
      if (e11.startsWith(".") || e11 === "XModules")
        return;
      const r24 = o13.hasChildren() ? o13.getChildren().pose.getValue() : o13.getValue(), a22 = it7(r24);
      t19.push({
        type: a22.length === 1 ? "robot" : "trajectory",
        poses: a22,
        sourceKey: o13.getKey(),
        sourceProvider: this.sourceProvider
      }), this.onUpdate(t19);
    });
  }
};
var ht7 = Object.defineProperty;
var l6 = (p26, i27, t19, s18) => {
  for (var e11 = void 0, o13 = p26.length - 1, r24; o13 >= 0; o13--)
    (r24 = p26[o13]) && (e11 = r24(i27, t19, e11) || e11);
  return e11 && ht7(i27, t19, e11), e11;
};
var ft6 = {
  dashboard: {
    displayName: "Field Path",
    topLevel: false
  },
  properties: {
    poses: { type: "Array", primary: true, input: { type: "NumberArray" } },
    color: {
      type: "String",
      input: { type: "ColorPicker" },
      defaultValue: "#FFA500"
    },
    unit: {
      type: "String",
      defaultValue: "inherit",
      input: {
        type: "StringDropdown",
        getOptions() {
          return ["inherit", ...Object.keys(n9)];
        },
        allowCustomValues: false
      }
    },
    lineWidth: {
      type: "Number",
      attribute: "line-width",
      defaultValue: 4,
      input: { type: "Number", min: 0 }
    },
    opacity: {
      type: "Number",
      defaultValue: 0.7,
      input: { type: "Number", min: 0, max: 1, step: 0.1 }
    }
  }
};
var yt7 = {
  dashboard: {
    displayName: "Field Robot",
    topLevel: false
  },
  properties: {
    pose: {
      type: "Array",
      defaultValue: [0, 0, 0],
      primary: true,
      input: { type: "NumberArray" }
    },
    rotationUnit: {
      type: "String",
      attribute: "rotation-unit",
      defaultValue: "inherit",
      input: {
        type: "StringDropdown",
        getOptions: () => ["inherit", "deg", "rad"],
        allowCustomValues: false
      }
    },
    unit: {
      type: "String",
      defaultValue: "inherit",
      input: {
        type: "StringDropdown",
        getOptions() {
          return ["inherit", ...Object.keys(n9)];
        },
        allowCustomValues: false
      }
    },
    color: {
      type: "String",
      input: { type: "ColorPicker" },
      defaultValue: "#0000ff"
    },
    opacity: {
      type: "Number",
      defaultValue: 1,
      input: { type: "Number", min: 0, max: 1, step: 0.1 }
    },
    rotation: {
      type: "Number",
      input: {
        type: "Number",
        min: -360,
        max: 360
      }
    },
    width: {
      type: "Number",
      defaultValue: 0.6
    },
    length: {
      type: "Number",
      defaultValue: 0.9
    }
  }
};
var mt5 = {
  dashboard: {
    displayName: "Field",
    defaultHtml: `
    <frc-field-wrapper source-key="/SmartDashboard/Field" source-provider="NetworkTables">
    </frc-field-wrapper>
    `
  },
  properties: {
    provider: { type: "SourceProvider", property: "provider" },
    store: { type: "Store", property: "store" },
    sourceProvider: {
      type: "String",
      attribute: "source-provider",
      input: { type: "None" }
    },
    sourceKey: {
      type: "String",
      attribute: "source-key",
      input: { type: "None" }
    },
    game: {
      type: "String",
      defaultValue: "Charged Up",
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return T8.map((p26) => p26.game);
        }
      }
    },
    rotationUnit: {
      type: "String",
      attribute: "rotation-unit",
      defaultValue: "deg",
      input: {
        type: "StringDropdown",
        getOptions: () => ["deg", "rad"],
        allowCustomValues: false
      }
    },
    unit: {
      type: "String",
      defaultValue: s4,
      input: {
        type: "StringDropdown",
        getOptions() {
          return Object.keys(n9);
        },
        allowCustomValues: false
      }
    },
    rotation: {
      type: "Number",
      input: {
        type: "Number",
        min: -360,
        max: 360
      }
    },
    showGrid: {
      type: "Boolean",
      attribute: "show-grid"
    },
    gridSize: {
      type: "Number",
      attribute: "grid-size",
      input: {
        type: "Number",
        min: 0
      }
    },
    origin: {
      type: "String",
      defaultValue: "blue",
      input: {
        type: "StringDropdown",
        getOptions: () => ["blue", "red"],
        allowCustomValues: false
      }
    },
    cropLeft: {
      type: "Number",
      attribute: "crop-left",
      input: {
        type: "Number",
        min: 0,
        max: 100
      }
    },
    cropRight: {
      type: "Number",
      defaultValue: 100,
      attribute: "crop-right",
      input: {
        type: "Number",
        min: 0,
        max: 100
      }
    },
    cropTop: {
      type: "Number",
      attribute: "crop-top",
      input: {
        type: "Number",
        min: 0,
        max: 100
      }
    },
    cropBottom: {
      type: "Number",
      defaultValue: 100,
      attribute: "crop-bottom",
      input: {
        type: "Number",
        min: 0,
        max: 100
      }
    }
  },
  slots: [
    {
      name: "",
      allowedChildren: ["frc-field-robot", "frc-field-path"]
    }
  ]
};
var U8;
var K7 = class K8 extends H4 {
  constructor() {
    super(...arguments);
    R7(this, U8);
    this.sourceProvider = "", this.sourceKey = "", this.game = T8[0].game, this.cropTop = 0, this.cropBottom = 100, this.cropLeft = 0, this.cropRight = 100, this.cropType = "percent", this.unit = s4, this.rotationUnit = "deg", this.rotation = 0, this.showGrid = false, this.gridSize = 1, this.origin = "blue", this.fieldObjects = [];
  }
  firstUpdated() {
    this.store && (this.fieldObjectManager = new nt8(
      this.store,
      (t19) => {
        this.fieldObjects = t19;
      }
    )), I7(this, U8, new MutationObserver(() => {
      this.requestUpdate();
    })), b8(this, U8).observe(this, {
      attributes: true,
      childList: true,
      subtree: true,
      attributeFilter: ["source-key", "source-provider"]
    });
  }
  disconnectedCallback() {
    super.disconnectedCallback(), b8(this, U8).disconnect();
  }
  updated(t19) {
    (t19.has("sourceKey") || t19.has("sourceProvider")) && this.fieldObjectManager.setSource(this.sourceKey, this.sourceProvider);
  }
  render() {
    var e11;
    const s18 = (((e11 = this.slottedFieldObjects) == null ? void 0 : e11.assignedElements()) ?? []).filter((o13) => o13.tagName === "FRC-FIELD-ROBOT" || o13.tagName === "FRC-FIELD-PATH").map((o13) => ({
      type: o13.tagName === "FRC-FIELD-ROBOT" ? "robot" : "trajectory",
      sourceKey: o13.getAttribute("source-key"),
      sourceProvider: o13.getAttribute("source-provider")
    }));
    return Ot4`
      <frc-field
        game=${this.game}
        unit=${this.unit}
        rotation-unit=${this.rotationUnit}
        rotation=${this.rotation}
        ?show-grid=${this.showGrid}
        grid-size=${this.gridSize}
        origin=${this.origin}
        crop-top=${this.cropTop / 100}
        crop-bottom=${this.cropBottom / 100}
        crop-left=${this.cropLeft / 100}
        crop-right=${this.cropRight / 100}
        crop-type=${this.cropType}
      >
        ${this.fieldObjects.filter((o13) => !s18.find(
      ({ sourceKey: a22, sourceProvider: n33, type: u35 }) => o13.type === u35 && o13.sourceKey === a22 && o13.sourceProvider === n33
    )).map((o13) => o13.type === "robot" ? Ot4`<frc-field-robot
                .pose=${o13.poses[0]}
              ></frc-field-robot>` : Ot4`<frc-field-path
              .poses=${o13.poses}
            ></frc-field-path>`)}
        <slot></slot>
      </frc-field>
    `;
  }
};
U8 = /* @__PURE__ */ new WeakMap(), K7.styles = Ut3`
    :host {
      display: inline-block;
      position: relative;
      width: 500px;
      height: 300px;
    }

    frc-field {
      width: 100%;
      height: 100%;
    }
  `;
var c3 = K7;
l6([
  Mt4({ type: Object, attribute: false })
], c3.prototype, "provider");
l6([
  Mt4({ type: Object, attribute: false })
], c3.prototype, "store");
l6([
  Mt4({ type: String, attribute: "source-provider" })
], c3.prototype, "sourceProvider");
l6([
  Mt4({ type: String, attribute: "source-key" })
], c3.prototype, "sourceKey");
l6([
  Mt4({ type: String })
], c3.prototype, "game");
l6([
  Mt4({ type: Number, attribute: "crop-top" })
], c3.prototype, "cropTop");
l6([
  Mt4({ type: Number, attribute: "crop-bottom" })
], c3.prototype, "cropBottom");
l6([
  Mt4({ type: Number, attribute: "crop-left" })
], c3.prototype, "cropLeft");
l6([
  Mt4({ type: Number, attribute: "crop-right" })
], c3.prototype, "cropRight");
l6([
  Mt4({ type: String, attribute: "crop-type" })
], c3.prototype, "cropType");
l6([
  Mt4({ type: String })
], c3.prototype, "unit");
l6([
  Mt4({ type: String, attribute: "rotation-unit" })
], c3.prototype, "rotationUnit");
l6([
  Mt4({ type: Number })
], c3.prototype, "rotation");
l6([
  Mt4({ type: Boolean, attribute: "show-grid" })
], c3.prototype, "showGrid");
l6([
  Mt4({ type: Number, attribute: "grid-size" })
], c3.prototype, "gridSize");
l6([
  Mt4({ type: String })
], c3.prototype, "origin");
l6([
  n7()
], c3.prototype, "fieldObjects");
l6([
  h4("slot", true)
], c3.prototype, "slottedFieldObjects");
customElements.get("frc-field-wrapper") || customElements.define("frc-field-wrapper", c3);

// node_modules/@frc-web-components/fwc/dist/components/field3d.es.js
var $a = (a22) => {
  throw TypeError(a22);
};
var Ao = (a22, e11, t19) => e11.has(a22) || $a("Cannot " + t19);
var ft7 = (a22, e11, t19) => (Ao(a22, e11, "read from private field"), t19 ? t19.call(a22) : e11.get(a22));
var Ft3 = (a22, e11, t19) => e11.has(a22) ? $a("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(a22) : e11.set(a22, t19);
var Kt3 = (a22, e11, t19, n33) => (Ao(a22, e11, "write to private field"), n33 ? n33.call(a22, t19) : e11.set(a22, t19), t19);
var An3 = (a22, e11, t19) => (Ao(a22, e11, "access private method"), t19);
var Ea = "151";
var qi = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };
var Xi = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };
var eh = 0;
var el = 1;
var th = 2;
var Zc = 1;
var nh = 2;
var Ks = 3;
var Pn3 = 0;
var sn3 = 1;
var fn3 = 2;
var li3 = 0;
var gs = 1;
var tl = 2;
var nl = 3;
var il = 4;
var ih = 5;
var fs = 100;
var sh = 101;
var rh = 102;
var sl = 103;
var rl = 104;
var oh = 200;
var ah = 201;
var lh = 202;
var ch = 203;
var $c = 204;
var Qc = 205;
var uh = 206;
var hh = 207;
var dh = 208;
var fh = 209;
var ph = 210;
var mh = 0;
var gh = 1;
var _h = 2;
var ha = 3;
var xh = 4;
var yh = 5;
var vh = 6;
var bh = 7;
var ao = 0;
var Mh = 1;
var Sh = 2;
var Wn3 = 0;
var wh = 1;
var Th = 2;
var Ah = 3;
var Eh = 4;
var Ch = 5;
var eu = 300;
var Ss = 301;
var ws = 302;
var da = 303;
var fa = 304;
var lo = 306;
var Rn3 = 1e3;
var Zt3 = 1001;
var to = 1002;
var Bt3 = 1003;
var pa = 1004;
var Qr3 = 1005;
var Ht4 = 1006;
var tu = 1007;
var jn3 = 1008;
var Ei3 = 1009;
var Lh = 1010;
var Rh = 1011;
var nu = 1012;
var Ph = 1013;
var vi3 = 1014;
var ai3 = 1015;
var Qs = 1016;
var Ih = 1017;
var Dh = 1018;
var _s = 1020;
var Nh = 1021;
var pn3 = 1023;
var Uh = 1024;
var kh = 1025;
var Ti = 1026;
var Ts = 1027;
var Oh = 1028;
var Fh = 1029;
var zh = 1030;
var Bh = 1031;
var Vh = 1033;
var Eo = 33776;
var Co = 33777;
var Lo = 33778;
var Ro = 33779;
var ol = 35840;
var al = 35841;
var ll = 35842;
var cl = 35843;
var Gh = 36196;
var ul = 37492;
var hl = 37496;
var dl = 37808;
var fl = 37809;
var pl = 37810;
var ml = 37811;
var gl = 37812;
var _l = 37813;
var xl = 37814;
var yl = 37815;
var vl = 37816;
var bl = 37817;
var Ml = 37818;
var Sl = 37819;
var wl = 37820;
var Tl = 37821;
var Po = 36492;
var Hh = 36283;
var Al = 36284;
var El = 36285;
var Cl = 36286;
var er3 = 2300;
var As = 2301;
var Io = 2302;
var Ll = 2400;
var Rl = 2401;
var Pl = 2402;
var Wh = 2500;
var jh = 0;
var iu = 1;
var ma = 2;
var Ci = 3e3;
var st8 = 3001;
var qh = 3200;
var Xh = 3201;
var co = 0;
var Kh = 1;
var bn3 = "srgb";
var tr3 = "srgb-linear";
var su = "display-p3";
var Do = 7680;
var Yh = 519;
var ga = 35044;
var Il = "300 es";
var _a = 1035;
var Ni3 = class {
  addEventListener(e11, t19) {
    this._listeners === void 0 && (this._listeners = {});
    const n33 = this._listeners;
    n33[e11] === void 0 && (n33[e11] = []), n33[e11].indexOf(t19) === -1 && n33[e11].push(t19);
  }
  hasEventListener(e11, t19) {
    if (this._listeners === void 0)
      return false;
    const n33 = this._listeners;
    return n33[e11] !== void 0 && n33[e11].indexOf(t19) !== -1;
  }
  removeEventListener(e11, t19) {
    if (this._listeners === void 0)
      return;
    const i27 = this._listeners[e11];
    if (i27 !== void 0) {
      const s18 = i27.indexOf(t19);
      s18 !== -1 && i27.splice(s18, 1);
    }
  }
  dispatchEvent(e11) {
    if (this._listeners === void 0)
      return;
    const n33 = this._listeners[e11.type];
    if (n33 !== void 0) {
      e11.target = this;
      const i27 = n33.slice(0);
      for (let s18 = 0, r24 = i27.length; s18 < r24; s18++)
        i27[s18].call(this, e11);
      e11.target = null;
    }
  }
};
var Yt3 = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "0a", "0b", "0c", "0d", "0e", "0f", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "1a", "1b", "1c", "1d", "1e", "1f", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "2a", "2b", "2c", "2d", "2e", "2f", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "3a", "3b", "3c", "3d", "3e", "3f", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "4a", "4b", "4c", "4d", "4e", "4f", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "5a", "5b", "5c", "5d", "5e", "5f", "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "6a", "6b", "6c", "6d", "6e", "6f", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "7a", "7b", "7c", "7d", "7e", "7f", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "8a", "8b", "8c", "8d", "8e", "8f", "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "9a", "9b", "9c", "9d", "9e", "9f", "a0", "a1", "a2", "a3", "a4", "a5", "a6", "a7", "a8", "a9", "aa", "ab", "ac", "ad", "ae", "af", "b0", "b1", "b2", "b3", "b4", "b5", "b6", "b7", "b8", "b9", "ba", "bb", "bc", "bd", "be", "bf", "c0", "c1", "c2", "c3", "c4", "c5", "c6", "c7", "c8", "c9", "ca", "cb", "cc", "cd", "ce", "cf", "d0", "d1", "d2", "d3", "d4", "d5", "d6", "d7", "d8", "d9", "da", "db", "dc", "dd", "de", "df", "e0", "e1", "e2", "e3", "e4", "e5", "e6", "e7", "e8", "e9", "ea", "eb", "ec", "ed", "ee", "ef", "f0", "f1", "f2", "f3", "f4", "f5", "f6", "f7", "f8", "f9", "fa", "fb", "fc", "fd", "fe", "ff"];
var Dl = 1234567;
var xs = Math.PI / 180;
var Es = 180 / Math.PI;
function Sn3() {
  const a22 = Math.random() * 4294967295 | 0, e11 = Math.random() * 4294967295 | 0, t19 = Math.random() * 4294967295 | 0, n33 = Math.random() * 4294967295 | 0;
  return (Yt3[a22 & 255] + Yt3[a22 >> 8 & 255] + Yt3[a22 >> 16 & 255] + Yt3[a22 >> 24 & 255] + "-" + Yt3[e11 & 255] + Yt3[e11 >> 8 & 255] + "-" + Yt3[e11 >> 16 & 15 | 64] + Yt3[e11 >> 24 & 255] + "-" + Yt3[t19 & 63 | 128] + Yt3[t19 >> 8 & 255] + "-" + Yt3[t19 >> 16 & 255] + Yt3[t19 >> 24 & 255] + Yt3[n33 & 255] + Yt3[n33 >> 8 & 255] + Yt3[n33 >> 16 & 255] + Yt3[n33 >> 24 & 255]).toLowerCase();
}
function Wt4(a22, e11, t19) {
  return Math.max(e11, Math.min(t19, a22));
}
function Ca(a22, e11) {
  return (a22 % e11 + e11) % e11;
}
function Jh(a22, e11, t19, n33, i27) {
  return n33 + (a22 - e11) * (i27 - n33) / (t19 - e11);
}
function Zh(a22, e11, t19) {
  return a22 !== e11 ? (t19 - a22) / (e11 - a22) : 0;
}
function Js(a22, e11, t19) {
  return (1 - t19) * a22 + t19 * e11;
}
function $h(a22, e11, t19, n33) {
  return Js(a22, e11, 1 - Math.exp(-t19 * n33));
}
function Qh(a22, e11 = 1) {
  return e11 - Math.abs(Ca(a22, e11 * 2) - e11);
}
function ed(a22, e11, t19) {
  return a22 <= e11 ? 0 : a22 >= t19 ? 1 : (a22 = (a22 - e11) / (t19 - e11), a22 * a22 * (3 - 2 * a22));
}
function td(a22, e11, t19) {
  return a22 <= e11 ? 0 : a22 >= t19 ? 1 : (a22 = (a22 - e11) / (t19 - e11), a22 * a22 * a22 * (a22 * (a22 * 6 - 15) + 10));
}
function nd(a22, e11) {
  return a22 + Math.floor(Math.random() * (e11 - a22 + 1));
}
function id(a22, e11) {
  return a22 + Math.random() * (e11 - a22);
}
function sd(a22) {
  return a22 * (0.5 - Math.random());
}
function rd(a22) {
  a22 !== void 0 && (Dl = a22);
  let e11 = Dl += 1831565813;
  return e11 = Math.imul(e11 ^ e11 >>> 15, e11 | 1), e11 ^= e11 + Math.imul(e11 ^ e11 >>> 7, e11 | 61), ((e11 ^ e11 >>> 14) >>> 0) / 4294967296;
}
function od(a22) {
  return a22 * xs;
}
function ad(a22) {
  return a22 * Es;
}
function xa(a22) {
  return (a22 & a22 - 1) === 0 && a22 !== 0;
}
function ru(a22) {
  return Math.pow(2, Math.ceil(Math.log(a22) / Math.LN2));
}
function ou(a22) {
  return Math.pow(2, Math.floor(Math.log(a22) / Math.LN2));
}
function ld(a22, e11, t19, n33, i27) {
  const s18 = Math.cos, r24 = Math.sin, o13 = s18(t19 / 2), c27 = r24(t19 / 2), l26 = s18((e11 + n33) / 2), u35 = r24((e11 + n33) / 2), h26 = s18((e11 - n33) / 2), d34 = r24((e11 - n33) / 2), p26 = s18((n33 - e11) / 2), g32 = r24((n33 - e11) / 2);
  switch (i27) {
    case "XYX":
      a22.set(o13 * u35, c27 * h26, c27 * d34, o13 * l26);
      break;
    case "YZY":
      a22.set(c27 * d34, o13 * u35, c27 * h26, o13 * l26);
      break;
    case "ZXZ":
      a22.set(c27 * h26, c27 * d34, o13 * u35, o13 * l26);
      break;
    case "XZX":
      a22.set(o13 * u35, c27 * g32, c27 * p26, o13 * l26);
      break;
    case "YXY":
      a22.set(c27 * p26, o13 * u35, c27 * g32, o13 * l26);
      break;
    case "ZYZ":
      a22.set(c27 * g32, c27 * p26, o13 * u35, o13 * l26);
      break;
    default:
      console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: " + i27);
  }
}
function Hn3(a22, e11) {
  switch (e11.constructor) {
    case Float32Array:
      return a22;
    case Uint16Array:
      return a22 / 65535;
    case Uint8Array:
      return a22 / 255;
    case Int16Array:
      return Math.max(a22 / 32767, -1);
    case Int8Array:
      return Math.max(a22 / 127, -1);
    default:
      throw new Error("Invalid component type.");
  }
}
function mt6(a22, e11) {
  switch (e11.constructor) {
    case Float32Array:
      return a22;
    case Uint16Array:
      return Math.round(a22 * 65535);
    case Uint8Array:
      return Math.round(a22 * 255);
    case Int16Array:
      return Math.round(a22 * 32767);
    case Int8Array:
      return Math.round(a22 * 127);
    default:
      throw new Error("Invalid component type.");
  }
}
var ps = {
  DEG2RAD: xs,
  RAD2DEG: Es,
  generateUUID: Sn3,
  clamp: Wt4,
  euclideanModulo: Ca,
  mapLinear: Jh,
  inverseLerp: Zh,
  lerp: Js,
  damp: $h,
  pingpong: Qh,
  smoothstep: ed,
  smootherstep: td,
  randInt: nd,
  randFloat: id,
  randFloatSpread: sd,
  seededRandom: rd,
  degToRad: od,
  radToDeg: ad,
  isPowerOfTwo: xa,
  ceilPowerOfTwo: ru,
  floorPowerOfTwo: ou,
  setQuaternionFromProperEuler: ld,
  normalize: mt6,
  denormalize: Hn3
};
var We4 = class _We {
  constructor(e11 = 0, t19 = 0) {
    _We.prototype.isVector2 = true, this.x = e11, this.y = t19;
  }
  get width() {
    return this.x;
  }
  set width(e11) {
    this.x = e11;
  }
  get height() {
    return this.y;
  }
  set height(e11) {
    this.y = e11;
  }
  set(e11, t19) {
    return this.x = e11, this.y = t19, this;
  }
  setScalar(e11) {
    return this.x = e11, this.y = e11, this;
  }
  setX(e11) {
    return this.x = e11, this;
  }
  setY(e11) {
    return this.y = e11, this;
  }
  setComponent(e11, t19) {
    switch (e11) {
      case 0:
        this.x = t19;
        break;
      case 1:
        this.y = t19;
        break;
      default:
        throw new Error("index is out of range: " + e11);
    }
    return this;
  }
  getComponent(e11) {
    switch (e11) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      default:
        throw new Error("index is out of range: " + e11);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y);
  }
  copy(e11) {
    return this.x = e11.x, this.y = e11.y, this;
  }
  add(e11) {
    return this.x += e11.x, this.y += e11.y, this;
  }
  addScalar(e11) {
    return this.x += e11, this.y += e11, this;
  }
  addVectors(e11, t19) {
    return this.x = e11.x + t19.x, this.y = e11.y + t19.y, this;
  }
  addScaledVector(e11, t19) {
    return this.x += e11.x * t19, this.y += e11.y * t19, this;
  }
  sub(e11) {
    return this.x -= e11.x, this.y -= e11.y, this;
  }
  subScalar(e11) {
    return this.x -= e11, this.y -= e11, this;
  }
  subVectors(e11, t19) {
    return this.x = e11.x - t19.x, this.y = e11.y - t19.y, this;
  }
  multiply(e11) {
    return this.x *= e11.x, this.y *= e11.y, this;
  }
  multiplyScalar(e11) {
    return this.x *= e11, this.y *= e11, this;
  }
  divide(e11) {
    return this.x /= e11.x, this.y /= e11.y, this;
  }
  divideScalar(e11) {
    return this.multiplyScalar(1 / e11);
  }
  applyMatrix3(e11) {
    const t19 = this.x, n33 = this.y, i27 = e11.elements;
    return this.x = i27[0] * t19 + i27[3] * n33 + i27[6], this.y = i27[1] * t19 + i27[4] * n33 + i27[7], this;
  }
  min(e11) {
    return this.x = Math.min(this.x, e11.x), this.y = Math.min(this.y, e11.y), this;
  }
  max(e11) {
    return this.x = Math.max(this.x, e11.x), this.y = Math.max(this.y, e11.y), this;
  }
  clamp(e11, t19) {
    return this.x = Math.max(e11.x, Math.min(t19.x, this.x)), this.y = Math.max(e11.y, Math.min(t19.y, this.y)), this;
  }
  clampScalar(e11, t19) {
    return this.x = Math.max(e11, Math.min(t19, this.x)), this.y = Math.max(e11, Math.min(t19, this.y)), this;
  }
  clampLength(e11, t19) {
    const n33 = this.length();
    return this.divideScalar(n33 || 1).multiplyScalar(Math.max(e11, Math.min(t19, n33)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this;
  }
  roundToZero() {
    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this;
  }
  dot(e11) {
    return this.x * e11.x + this.y * e11.y;
  }
  cross(e11) {
    return this.x * e11.y - this.y * e11.x;
  }
  lengthSq() {
    return this.x * this.x + this.y * this.y;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  angle() {
    return Math.atan2(-this.y, -this.x) + Math.PI;
  }
  angleTo(e11) {
    const t19 = Math.sqrt(this.lengthSq() * e11.lengthSq());
    if (t19 === 0)
      return Math.PI / 2;
    const n33 = this.dot(e11) / t19;
    return Math.acos(Wt4(n33, -1, 1));
  }
  distanceTo(e11) {
    return Math.sqrt(this.distanceToSquared(e11));
  }
  distanceToSquared(e11) {
    const t19 = this.x - e11.x, n33 = this.y - e11.y;
    return t19 * t19 + n33 * n33;
  }
  manhattanDistanceTo(e11) {
    return Math.abs(this.x - e11.x) + Math.abs(this.y - e11.y);
  }
  setLength(e11) {
    return this.normalize().multiplyScalar(e11);
  }
  lerp(e11, t19) {
    return this.x += (e11.x - this.x) * t19, this.y += (e11.y - this.y) * t19, this;
  }
  lerpVectors(e11, t19, n33) {
    return this.x = e11.x + (t19.x - e11.x) * n33, this.y = e11.y + (t19.y - e11.y) * n33, this;
  }
  equals(e11) {
    return e11.x === this.x && e11.y === this.y;
  }
  fromArray(e11, t19 = 0) {
    return this.x = e11[t19], this.y = e11[t19 + 1], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.x, e11[t19 + 1] = this.y, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.x = e11.getX(t19), this.y = e11.getY(t19), this;
  }
  rotateAround(e11, t19) {
    const n33 = Math.cos(t19), i27 = Math.sin(t19), s18 = this.x - e11.x, r24 = this.y - e11.y;
    return this.x = s18 * n33 - r24 * i27 + e11.x, this.y = s18 * i27 + r24 * n33 + e11.y, this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y;
  }
};
var Qe4 = class _Qe {
  constructor() {
    _Qe.prototype.isMatrix3 = true, this.elements = [
      1,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      1
    ];
  }
  set(e11, t19, n33, i27, s18, r24, o13, c27, l26) {
    const u35 = this.elements;
    return u35[0] = e11, u35[1] = i27, u35[2] = o13, u35[3] = t19, u35[4] = s18, u35[5] = c27, u35[6] = n33, u35[7] = r24, u35[8] = l26, this;
  }
  identity() {
    return this.set(
      1,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      1
    ), this;
  }
  copy(e11) {
    const t19 = this.elements, n33 = e11.elements;
    return t19[0] = n33[0], t19[1] = n33[1], t19[2] = n33[2], t19[3] = n33[3], t19[4] = n33[4], t19[5] = n33[5], t19[6] = n33[6], t19[7] = n33[7], t19[8] = n33[8], this;
  }
  extractBasis(e11, t19, n33) {
    return e11.setFromMatrix3Column(this, 0), t19.setFromMatrix3Column(this, 1), n33.setFromMatrix3Column(this, 2), this;
  }
  setFromMatrix4(e11) {
    const t19 = e11.elements;
    return this.set(
      t19[0],
      t19[4],
      t19[8],
      t19[1],
      t19[5],
      t19[9],
      t19[2],
      t19[6],
      t19[10]
    ), this;
  }
  multiply(e11) {
    return this.multiplyMatrices(this, e11);
  }
  premultiply(e11) {
    return this.multiplyMatrices(e11, this);
  }
  multiplyMatrices(e11, t19) {
    const n33 = e11.elements, i27 = t19.elements, s18 = this.elements, r24 = n33[0], o13 = n33[3], c27 = n33[6], l26 = n33[1], u35 = n33[4], h26 = n33[7], d34 = n33[2], p26 = n33[5], g32 = n33[8], y34 = i27[0], m34 = i27[3], f40 = i27[6], E25 = i27[1], b35 = i27[4], w31 = i27[7], S23 = i27[2], D18 = i27[5], N22 = i27[8];
    return s18[0] = r24 * y34 + o13 * E25 + c27 * S23, s18[3] = r24 * m34 + o13 * b35 + c27 * D18, s18[6] = r24 * f40 + o13 * w31 + c27 * N22, s18[1] = l26 * y34 + u35 * E25 + h26 * S23, s18[4] = l26 * m34 + u35 * b35 + h26 * D18, s18[7] = l26 * f40 + u35 * w31 + h26 * N22, s18[2] = d34 * y34 + p26 * E25 + g32 * S23, s18[5] = d34 * m34 + p26 * b35 + g32 * D18, s18[8] = d34 * f40 + p26 * w31 + g32 * N22, this;
  }
  multiplyScalar(e11) {
    const t19 = this.elements;
    return t19[0] *= e11, t19[3] *= e11, t19[6] *= e11, t19[1] *= e11, t19[4] *= e11, t19[7] *= e11, t19[2] *= e11, t19[5] *= e11, t19[8] *= e11, this;
  }
  determinant() {
    const e11 = this.elements, t19 = e11[0], n33 = e11[1], i27 = e11[2], s18 = e11[3], r24 = e11[4], o13 = e11[5], c27 = e11[6], l26 = e11[7], u35 = e11[8];
    return t19 * r24 * u35 - t19 * o13 * l26 - n33 * s18 * u35 + n33 * o13 * c27 + i27 * s18 * l26 - i27 * r24 * c27;
  }
  invert() {
    const e11 = this.elements, t19 = e11[0], n33 = e11[1], i27 = e11[2], s18 = e11[3], r24 = e11[4], o13 = e11[5], c27 = e11[6], l26 = e11[7], u35 = e11[8], h26 = u35 * r24 - o13 * l26, d34 = o13 * c27 - u35 * s18, p26 = l26 * s18 - r24 * c27, g32 = t19 * h26 + n33 * d34 + i27 * p26;
    if (g32 === 0)
      return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);
    const y34 = 1 / g32;
    return e11[0] = h26 * y34, e11[1] = (i27 * l26 - u35 * n33) * y34, e11[2] = (o13 * n33 - i27 * r24) * y34, e11[3] = d34 * y34, e11[4] = (u35 * t19 - i27 * c27) * y34, e11[5] = (i27 * s18 - o13 * t19) * y34, e11[6] = p26 * y34, e11[7] = (n33 * c27 - l26 * t19) * y34, e11[8] = (r24 * t19 - n33 * s18) * y34, this;
  }
  transpose() {
    let e11;
    const t19 = this.elements;
    return e11 = t19[1], t19[1] = t19[3], t19[3] = e11, e11 = t19[2], t19[2] = t19[6], t19[6] = e11, e11 = t19[5], t19[5] = t19[7], t19[7] = e11, this;
  }
  getNormalMatrix(e11) {
    return this.setFromMatrix4(e11).invert().transpose();
  }
  transposeIntoArray(e11) {
    const t19 = this.elements;
    return e11[0] = t19[0], e11[1] = t19[3], e11[2] = t19[6], e11[3] = t19[1], e11[4] = t19[4], e11[5] = t19[7], e11[6] = t19[2], e11[7] = t19[5], e11[8] = t19[8], this;
  }
  setUvTransform(e11, t19, n33, i27, s18, r24, o13) {
    const c27 = Math.cos(s18), l26 = Math.sin(s18);
    return this.set(
      n33 * c27,
      n33 * l26,
      -n33 * (c27 * r24 + l26 * o13) + r24 + e11,
      -i27 * l26,
      i27 * c27,
      -i27 * (-l26 * r24 + c27 * o13) + o13 + t19,
      0,
      0,
      1
    ), this;
  }
  //
  scale(e11, t19) {
    return this.premultiply(No.makeScale(e11, t19)), this;
  }
  rotate(e11) {
    return this.premultiply(No.makeRotation(-e11)), this;
  }
  translate(e11, t19) {
    return this.premultiply(No.makeTranslation(e11, t19)), this;
  }
  // for 2D Transforms
  makeTranslation(e11, t19) {
    return this.set(
      1,
      0,
      e11,
      0,
      1,
      t19,
      0,
      0,
      1
    ), this;
  }
  makeRotation(e11) {
    const t19 = Math.cos(e11), n33 = Math.sin(e11);
    return this.set(
      t19,
      -n33,
      0,
      n33,
      t19,
      0,
      0,
      0,
      1
    ), this;
  }
  makeScale(e11, t19) {
    return this.set(
      e11,
      0,
      0,
      0,
      t19,
      0,
      0,
      0,
      1
    ), this;
  }
  //
  equals(e11) {
    const t19 = this.elements, n33 = e11.elements;
    for (let i27 = 0; i27 < 9; i27++)
      if (t19[i27] !== n33[i27])
        return false;
    return true;
  }
  fromArray(e11, t19 = 0) {
    for (let n33 = 0; n33 < 9; n33++)
      this.elements[n33] = e11[n33 + t19];
    return this;
  }
  toArray(e11 = [], t19 = 0) {
    const n33 = this.elements;
    return e11[t19] = n33[0], e11[t19 + 1] = n33[1], e11[t19 + 2] = n33[2], e11[t19 + 3] = n33[3], e11[t19 + 4] = n33[4], e11[t19 + 5] = n33[5], e11[t19 + 6] = n33[6], e11[t19 + 7] = n33[7], e11[t19 + 8] = n33[8], e11;
  }
  clone() {
    return new this.constructor().fromArray(this.elements);
  }
};
var No = new Qe4();
function au(a22) {
  for (let e11 = a22.length - 1; e11 >= 0; --e11)
    if (a22[e11] >= 65535)
      return true;
  return false;
}
function nr3(a22) {
  return document.createElementNS("http://www.w3.org/1999/xhtml", a22);
}
function ys(a22) {
  return a22 < 0.04045 ? a22 * 0.0773993808 : Math.pow(a22 * 0.9478672986 + 0.0521327014, 2.4);
}
function Uo(a22) {
  return a22 < 31308e-7 ? a22 * 12.92 : 1.055 * Math.pow(a22, 0.41666) - 0.055;
}
var cd = new Qe4().fromArray([
  0.8224621,
  0.0331941,
  0.0170827,
  0.177538,
  0.9668058,
  0.0723974,
  -1e-7,
  1e-7,
  0.9105199
]);
var ud = new Qe4().fromArray([
  1.2249401,
  -0.0420569,
  -0.0196376,
  -0.2249404,
  1.0420571,
  -0.0786361,
  1e-7,
  0,
  1.0982735
]);
function hd(a22) {
  return a22.convertSRGBToLinear().applyMatrix3(ud);
}
function dd(a22) {
  return a22.applyMatrix3(cd).convertLinearToSRGB();
}
var fd = {
  [tr3]: (a22) => a22,
  [bn3]: (a22) => a22.convertSRGBToLinear(),
  [su]: hd
};
var pd = {
  [tr3]: (a22) => a22,
  [bn3]: (a22) => a22.convertLinearToSRGB(),
  [su]: dd
};
var rn3 = {
  enabled: false,
  get legacyMode() {
    return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."), !this.enabled;
  },
  set legacyMode(a22) {
    console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."), this.enabled = !a22;
  },
  get workingColorSpace() {
    return tr3;
  },
  set workingColorSpace(a22) {
    console.warn("THREE.ColorManagement: .workingColorSpace is readonly.");
  },
  convert: function(a22, e11, t19) {
    if (this.enabled === false || e11 === t19 || !e11 || !t19)
      return a22;
    const n33 = fd[e11], i27 = pd[t19];
    if (n33 === void 0 || i27 === void 0)
      throw new Error(`Unsupported color space conversion, "${e11}" to "${t19}".`);
    return i27(n33(a22));
  },
  fromWorkingColorSpace: function(a22, e11) {
    return this.convert(a22, this.workingColorSpace, e11);
  },
  toWorkingColorSpace: function(a22, e11) {
    return this.convert(a22, e11, this.workingColorSpace);
  }
};
var Ki;
var lu = class {
  static getDataURL(e11) {
    if (/^data:/i.test(e11.src) || typeof HTMLCanvasElement > "u")
      return e11.src;
    let t19;
    if (e11 instanceof HTMLCanvasElement)
      t19 = e11;
    else {
      Ki === void 0 && (Ki = nr3("canvas")), Ki.width = e11.width, Ki.height = e11.height;
      const n33 = Ki.getContext("2d");
      e11 instanceof ImageData ? n33.putImageData(e11, 0, 0) : n33.drawImage(e11, 0, 0, e11.width, e11.height), t19 = Ki;
    }
    return t19.width > 2048 || t19.height > 2048 ? (console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons", e11), t19.toDataURL("image/jpeg", 0.6)) : t19.toDataURL("image/png");
  }
  static sRGBToLinear(e11) {
    if (typeof HTMLImageElement < "u" && e11 instanceof HTMLImageElement || typeof HTMLCanvasElement < "u" && e11 instanceof HTMLCanvasElement || typeof ImageBitmap < "u" && e11 instanceof ImageBitmap) {
      const t19 = nr3("canvas");
      t19.width = e11.width, t19.height = e11.height;
      const n33 = t19.getContext("2d");
      n33.drawImage(e11, 0, 0, e11.width, e11.height);
      const i27 = n33.getImageData(0, 0, e11.width, e11.height), s18 = i27.data;
      for (let r24 = 0; r24 < s18.length; r24++)
        s18[r24] = ys(s18[r24] / 255) * 255;
      return n33.putImageData(i27, 0, 0), t19;
    } else if (e11.data) {
      const t19 = e11.data.slice(0);
      for (let n33 = 0; n33 < t19.length; n33++)
        t19 instanceof Uint8Array || t19 instanceof Uint8ClampedArray ? t19[n33] = Math.floor(ys(t19[n33] / 255) * 255) : t19[n33] = ys(t19[n33]);
      return {
        data: t19,
        width: e11.width,
        height: e11.height
      };
    } else
      return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."), e11;
  }
};
var cu = class {
  constructor(e11 = null) {
    this.isSource = true, this.uuid = Sn3(), this.data = e11, this.version = 0;
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string";
    if (!t19 && e11.images[this.uuid] !== void 0)
      return e11.images[this.uuid];
    const n33 = {
      uuid: this.uuid,
      url: ""
    }, i27 = this.data;
    if (i27 !== null) {
      let s18;
      if (Array.isArray(i27)) {
        s18 = [];
        for (let r24 = 0, o13 = i27.length; r24 < o13; r24++)
          i27[r24].isDataTexture ? s18.push(ko(i27[r24].image)) : s18.push(ko(i27[r24]));
      } else
        s18 = ko(i27);
      n33.url = s18;
    }
    return t19 || (e11.images[this.uuid] = n33), n33;
  }
};
function ko(a22) {
  return typeof HTMLImageElement < "u" && a22 instanceof HTMLImageElement || typeof HTMLCanvasElement < "u" && a22 instanceof HTMLCanvasElement || typeof ImageBitmap < "u" && a22 instanceof ImageBitmap ? lu.getDataURL(a22) : a22.data ? {
    data: Array.from(a22.data),
    width: a22.width,
    height: a22.height,
    type: a22.data.constructor.name
  } : (console.warn("THREE.Texture: Unable to serialize Texture."), {});
}
var md = 0;
var jt4 = class _jt extends Ni3 {
  constructor(e11 = _jt.DEFAULT_IMAGE, t19 = _jt.DEFAULT_MAPPING, n33 = Zt3, i27 = Zt3, s18 = Ht4, r24 = jn3, o13 = pn3, c27 = Ei3, l26 = _jt.DEFAULT_ANISOTROPY, u35 = Ci) {
    super(), this.isTexture = true, Object.defineProperty(this, "id", { value: md++ }), this.uuid = Sn3(), this.name = "", this.source = new cu(e11), this.mipmaps = [], this.mapping = t19, this.channel = 0, this.wrapS = n33, this.wrapT = i27, this.magFilter = s18, this.minFilter = r24, this.anisotropy = l26, this.format = o13, this.internalFormat = null, this.type = c27, this.offset = new We4(0, 0), this.repeat = new We4(1, 1), this.center = new We4(0, 0), this.rotation = 0, this.matrixAutoUpdate = true, this.matrix = new Qe4(), this.generateMipmaps = true, this.premultiplyAlpha = false, this.flipY = true, this.unpackAlignment = 4, this.encoding = u35, this.userData = {}, this.version = 0, this.onUpdate = null, this.isRenderTargetTexture = false, this.needsPMREMUpdate = false;
  }
  get image() {
    return this.source.data;
  }
  set image(e11 = null) {
    this.source.data = e11;
  }
  updateMatrix() {
    this.matrix.setUvTransform(this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    return this.name = e11.name, this.source = e11.source, this.mipmaps = e11.mipmaps.slice(0), this.mapping = e11.mapping, this.channel = e11.channel, this.wrapS = e11.wrapS, this.wrapT = e11.wrapT, this.magFilter = e11.magFilter, this.minFilter = e11.minFilter, this.anisotropy = e11.anisotropy, this.format = e11.format, this.internalFormat = e11.internalFormat, this.type = e11.type, this.offset.copy(e11.offset), this.repeat.copy(e11.repeat), this.center.copy(e11.center), this.rotation = e11.rotation, this.matrixAutoUpdate = e11.matrixAutoUpdate, this.matrix.copy(e11.matrix), this.generateMipmaps = e11.generateMipmaps, this.premultiplyAlpha = e11.premultiplyAlpha, this.flipY = e11.flipY, this.unpackAlignment = e11.unpackAlignment, this.encoding = e11.encoding, this.userData = JSON.parse(JSON.stringify(e11.userData)), this.needsUpdate = true, this;
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string";
    if (!t19 && e11.textures[this.uuid] !== void 0)
      return e11.textures[this.uuid];
    const n33 = {
      metadata: {
        version: 4.5,
        type: "Texture",
        generator: "Texture.toJSON"
      },
      uuid: this.uuid,
      name: this.name,
      image: this.source.toJSON(e11).uuid,
      mapping: this.mapping,
      channel: this.channel,
      repeat: [this.repeat.x, this.repeat.y],
      offset: [this.offset.x, this.offset.y],
      center: [this.center.x, this.center.y],
      rotation: this.rotation,
      wrap: [this.wrapS, this.wrapT],
      format: this.format,
      internalFormat: this.internalFormat,
      type: this.type,
      encoding: this.encoding,
      minFilter: this.minFilter,
      magFilter: this.magFilter,
      anisotropy: this.anisotropy,
      flipY: this.flipY,
      generateMipmaps: this.generateMipmaps,
      premultiplyAlpha: this.premultiplyAlpha,
      unpackAlignment: this.unpackAlignment
    };
    return Object.keys(this.userData).length > 0 && (n33.userData = this.userData), t19 || (e11.textures[this.uuid] = n33), n33;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
  transformUv(e11) {
    if (this.mapping !== eu)
      return e11;
    if (e11.applyMatrix3(this.matrix), e11.x < 0 || e11.x > 1)
      switch (this.wrapS) {
        case Rn3:
          e11.x = e11.x - Math.floor(e11.x);
          break;
        case Zt3:
          e11.x = e11.x < 0 ? 0 : 1;
          break;
        case to:
          Math.abs(Math.floor(e11.x) % 2) === 1 ? e11.x = Math.ceil(e11.x) - e11.x : e11.x = e11.x - Math.floor(e11.x);
          break;
      }
    if (e11.y < 0 || e11.y > 1)
      switch (this.wrapT) {
        case Rn3:
          e11.y = e11.y - Math.floor(e11.y);
          break;
        case Zt3:
          e11.y = e11.y < 0 ? 0 : 1;
          break;
        case to:
          Math.abs(Math.floor(e11.y) % 2) === 1 ? e11.y = Math.ceil(e11.y) - e11.y : e11.y = e11.y - Math.floor(e11.y);
          break;
      }
    return this.flipY && (e11.y = 1 - e11.y), e11;
  }
  set needsUpdate(e11) {
    e11 === true && (this.version++, this.source.needsUpdate = true);
  }
};
jt4.DEFAULT_IMAGE = null;
jt4.DEFAULT_MAPPING = eu;
jt4.DEFAULT_ANISOTROPY = 1;
var gt6 = class _gt {
  constructor(e11 = 0, t19 = 0, n33 = 0, i27 = 1) {
    _gt.prototype.isVector4 = true, this.x = e11, this.y = t19, this.z = n33, this.w = i27;
  }
  get width() {
    return this.z;
  }
  set width(e11) {
    this.z = e11;
  }
  get height() {
    return this.w;
  }
  set height(e11) {
    this.w = e11;
  }
  set(e11, t19, n33, i27) {
    return this.x = e11, this.y = t19, this.z = n33, this.w = i27, this;
  }
  setScalar(e11) {
    return this.x = e11, this.y = e11, this.z = e11, this.w = e11, this;
  }
  setX(e11) {
    return this.x = e11, this;
  }
  setY(e11) {
    return this.y = e11, this;
  }
  setZ(e11) {
    return this.z = e11, this;
  }
  setW(e11) {
    return this.w = e11, this;
  }
  setComponent(e11, t19) {
    switch (e11) {
      case 0:
        this.x = t19;
        break;
      case 1:
        this.y = t19;
        break;
      case 2:
        this.z = t19;
        break;
      case 3:
        this.w = t19;
        break;
      default:
        throw new Error("index is out of range: " + e11);
    }
    return this;
  }
  getComponent(e11) {
    switch (e11) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      case 2:
        return this.z;
      case 3:
        return this.w;
      default:
        throw new Error("index is out of range: " + e11);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y, this.z, this.w);
  }
  copy(e11) {
    return this.x = e11.x, this.y = e11.y, this.z = e11.z, this.w = e11.w !== void 0 ? e11.w : 1, this;
  }
  add(e11) {
    return this.x += e11.x, this.y += e11.y, this.z += e11.z, this.w += e11.w, this;
  }
  addScalar(e11) {
    return this.x += e11, this.y += e11, this.z += e11, this.w += e11, this;
  }
  addVectors(e11, t19) {
    return this.x = e11.x + t19.x, this.y = e11.y + t19.y, this.z = e11.z + t19.z, this.w = e11.w + t19.w, this;
  }
  addScaledVector(e11, t19) {
    return this.x += e11.x * t19, this.y += e11.y * t19, this.z += e11.z * t19, this.w += e11.w * t19, this;
  }
  sub(e11) {
    return this.x -= e11.x, this.y -= e11.y, this.z -= e11.z, this.w -= e11.w, this;
  }
  subScalar(e11) {
    return this.x -= e11, this.y -= e11, this.z -= e11, this.w -= e11, this;
  }
  subVectors(e11, t19) {
    return this.x = e11.x - t19.x, this.y = e11.y - t19.y, this.z = e11.z - t19.z, this.w = e11.w - t19.w, this;
  }
  multiply(e11) {
    return this.x *= e11.x, this.y *= e11.y, this.z *= e11.z, this.w *= e11.w, this;
  }
  multiplyScalar(e11) {
    return this.x *= e11, this.y *= e11, this.z *= e11, this.w *= e11, this;
  }
  applyMatrix4(e11) {
    const t19 = this.x, n33 = this.y, i27 = this.z, s18 = this.w, r24 = e11.elements;
    return this.x = r24[0] * t19 + r24[4] * n33 + r24[8] * i27 + r24[12] * s18, this.y = r24[1] * t19 + r24[5] * n33 + r24[9] * i27 + r24[13] * s18, this.z = r24[2] * t19 + r24[6] * n33 + r24[10] * i27 + r24[14] * s18, this.w = r24[3] * t19 + r24[7] * n33 + r24[11] * i27 + r24[15] * s18, this;
  }
  divideScalar(e11) {
    return this.multiplyScalar(1 / e11);
  }
  setAxisAngleFromQuaternion(e11) {
    this.w = 2 * Math.acos(e11.w);
    const t19 = Math.sqrt(1 - e11.w * e11.w);
    return t19 < 1e-4 ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = e11.x / t19, this.y = e11.y / t19, this.z = e11.z / t19), this;
  }
  setAxisAngleFromRotationMatrix(e11) {
    let t19, n33, i27, s18;
    const c27 = e11.elements, l26 = c27[0], u35 = c27[4], h26 = c27[8], d34 = c27[1], p26 = c27[5], g32 = c27[9], y34 = c27[2], m34 = c27[6], f40 = c27[10];
    if (Math.abs(u35 - d34) < 0.01 && Math.abs(h26 - y34) < 0.01 && Math.abs(g32 - m34) < 0.01) {
      if (Math.abs(u35 + d34) < 0.1 && Math.abs(h26 + y34) < 0.1 && Math.abs(g32 + m34) < 0.1 && Math.abs(l26 + p26 + f40 - 3) < 0.1)
        return this.set(1, 0, 0, 0), this;
      t19 = Math.PI;
      const b35 = (l26 + 1) / 2, w31 = (p26 + 1) / 2, S23 = (f40 + 1) / 2, D18 = (u35 + d34) / 4, N22 = (h26 + y34) / 4, I18 = (g32 + m34) / 4;
      return b35 > w31 && b35 > S23 ? b35 < 0.01 ? (n33 = 0, i27 = 0.707106781, s18 = 0.707106781) : (n33 = Math.sqrt(b35), i27 = D18 / n33, s18 = N22 / n33) : w31 > S23 ? w31 < 0.01 ? (n33 = 0.707106781, i27 = 0, s18 = 0.707106781) : (i27 = Math.sqrt(w31), n33 = D18 / i27, s18 = I18 / i27) : S23 < 0.01 ? (n33 = 0.707106781, i27 = 0.707106781, s18 = 0) : (s18 = Math.sqrt(S23), n33 = N22 / s18, i27 = I18 / s18), this.set(n33, i27, s18, t19), this;
    }
    let E25 = Math.sqrt((m34 - g32) * (m34 - g32) + (h26 - y34) * (h26 - y34) + (d34 - u35) * (d34 - u35));
    return Math.abs(E25) < 1e-3 && (E25 = 1), this.x = (m34 - g32) / E25, this.y = (h26 - y34) / E25, this.z = (d34 - u35) / E25, this.w = Math.acos((l26 + p26 + f40 - 1) / 2), this;
  }
  min(e11) {
    return this.x = Math.min(this.x, e11.x), this.y = Math.min(this.y, e11.y), this.z = Math.min(this.z, e11.z), this.w = Math.min(this.w, e11.w), this;
  }
  max(e11) {
    return this.x = Math.max(this.x, e11.x), this.y = Math.max(this.y, e11.y), this.z = Math.max(this.z, e11.z), this.w = Math.max(this.w, e11.w), this;
  }
  clamp(e11, t19) {
    return this.x = Math.max(e11.x, Math.min(t19.x, this.x)), this.y = Math.max(e11.y, Math.min(t19.y, this.y)), this.z = Math.max(e11.z, Math.min(t19.z, this.z)), this.w = Math.max(e11.w, Math.min(t19.w, this.w)), this;
  }
  clampScalar(e11, t19) {
    return this.x = Math.max(e11, Math.min(t19, this.x)), this.y = Math.max(e11, Math.min(t19, this.y)), this.z = Math.max(e11, Math.min(t19, this.z)), this.w = Math.max(e11, Math.min(t19, this.w)), this;
  }
  clampLength(e11, t19) {
    const n33 = this.length();
    return this.divideScalar(n33 || 1).multiplyScalar(Math.max(e11, Math.min(t19, n33)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this;
  }
  roundToZero() {
    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this;
  }
  dot(e11) {
    return this.x * e11.x + this.y * e11.y + this.z * e11.z + this.w * e11.w;
  }
  lengthSq() {
    return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  setLength(e11) {
    return this.normalize().multiplyScalar(e11);
  }
  lerp(e11, t19) {
    return this.x += (e11.x - this.x) * t19, this.y += (e11.y - this.y) * t19, this.z += (e11.z - this.z) * t19, this.w += (e11.w - this.w) * t19, this;
  }
  lerpVectors(e11, t19, n33) {
    return this.x = e11.x + (t19.x - e11.x) * n33, this.y = e11.y + (t19.y - e11.y) * n33, this.z = e11.z + (t19.z - e11.z) * n33, this.w = e11.w + (t19.w - e11.w) * n33, this;
  }
  equals(e11) {
    return e11.x === this.x && e11.y === this.y && e11.z === this.z && e11.w === this.w;
  }
  fromArray(e11, t19 = 0) {
    return this.x = e11[t19], this.y = e11[t19 + 1], this.z = e11[t19 + 2], this.w = e11[t19 + 3], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.x, e11[t19 + 1] = this.y, e11[t19 + 2] = this.z, e11[t19 + 3] = this.w, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.x = e11.getX(t19), this.y = e11.getY(t19), this.z = e11.getZ(t19), this.w = e11.getW(t19), this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this.z = Math.random(), this.w = Math.random(), this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y, yield this.z, yield this.w;
  }
};
var Li = class extends Ni3 {
  constructor(e11 = 1, t19 = 1, n33 = {}) {
    super(), this.isWebGLRenderTarget = true, this.width = e11, this.height = t19, this.depth = 1, this.scissor = new gt6(0, 0, e11, t19), this.scissorTest = false, this.viewport = new gt6(0, 0, e11, t19);
    const i27 = { width: e11, height: t19, depth: 1 };
    this.texture = new jt4(i27, n33.mapping, n33.wrapS, n33.wrapT, n33.magFilter, n33.minFilter, n33.format, n33.type, n33.anisotropy, n33.encoding), this.texture.isRenderTargetTexture = true, this.texture.flipY = false, this.texture.generateMipmaps = n33.generateMipmaps !== void 0 ? n33.generateMipmaps : false, this.texture.internalFormat = n33.internalFormat !== void 0 ? n33.internalFormat : null, this.texture.minFilter = n33.minFilter !== void 0 ? n33.minFilter : Ht4, this.depthBuffer = n33.depthBuffer !== void 0 ? n33.depthBuffer : true, this.stencilBuffer = n33.stencilBuffer !== void 0 ? n33.stencilBuffer : false, this.depthTexture = n33.depthTexture !== void 0 ? n33.depthTexture : null, this.samples = n33.samples !== void 0 ? n33.samples : 0;
  }
  setSize(e11, t19, n33 = 1) {
    (this.width !== e11 || this.height !== t19 || this.depth !== n33) && (this.width = e11, this.height = t19, this.depth = n33, this.texture.image.width = e11, this.texture.image.height = t19, this.texture.image.depth = n33, this.dispose()), this.viewport.set(0, 0, e11, t19), this.scissor.set(0, 0, e11, t19);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    this.width = e11.width, this.height = e11.height, this.depth = e11.depth, this.viewport.copy(e11.viewport), this.texture = e11.texture.clone(), this.texture.isRenderTargetTexture = true;
    const t19 = Object.assign({}, e11.texture.image);
    return this.texture.source = new cu(t19), this.depthBuffer = e11.depthBuffer, this.stencilBuffer = e11.stencilBuffer, e11.depthTexture !== null && (this.depthTexture = e11.depthTexture.clone()), this.samples = e11.samples, this;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
};
var uu = class extends jt4 {
  constructor(e11 = null, t19 = 1, n33 = 1, i27 = 1) {
    super(null), this.isDataArrayTexture = true, this.image = { data: e11, width: t19, height: n33, depth: i27 }, this.magFilter = Bt3, this.minFilter = Bt3, this.wrapR = Zt3, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1;
  }
};
var gd = class extends jt4 {
  constructor(e11 = null, t19 = 1, n33 = 1, i27 = 1) {
    super(null), this.isData3DTexture = true, this.image = { data: e11, width: t19, height: n33, depth: i27 }, this.magFilter = Bt3, this.minFilter = Bt3, this.wrapR = Zt3, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1;
  }
};
var qt3 = class {
  constructor(e11 = 0, t19 = 0, n33 = 0, i27 = 1) {
    this.isQuaternion = true, this._x = e11, this._y = t19, this._z = n33, this._w = i27;
  }
  static slerpFlat(e11, t19, n33, i27, s18, r24, o13) {
    let c27 = n33[i27 + 0], l26 = n33[i27 + 1], u35 = n33[i27 + 2], h26 = n33[i27 + 3];
    const d34 = s18[r24 + 0], p26 = s18[r24 + 1], g32 = s18[r24 + 2], y34 = s18[r24 + 3];
    if (o13 === 0) {
      e11[t19 + 0] = c27, e11[t19 + 1] = l26, e11[t19 + 2] = u35, e11[t19 + 3] = h26;
      return;
    }
    if (o13 === 1) {
      e11[t19 + 0] = d34, e11[t19 + 1] = p26, e11[t19 + 2] = g32, e11[t19 + 3] = y34;
      return;
    }
    if (h26 !== y34 || c27 !== d34 || l26 !== p26 || u35 !== g32) {
      let m34 = 1 - o13;
      const f40 = c27 * d34 + l26 * p26 + u35 * g32 + h26 * y34, E25 = f40 >= 0 ? 1 : -1, b35 = 1 - f40 * f40;
      if (b35 > Number.EPSILON) {
        const S23 = Math.sqrt(b35), D18 = Math.atan2(S23, f40 * E25);
        m34 = Math.sin(m34 * D18) / S23, o13 = Math.sin(o13 * D18) / S23;
      }
      const w31 = o13 * E25;
      if (c27 = c27 * m34 + d34 * w31, l26 = l26 * m34 + p26 * w31, u35 = u35 * m34 + g32 * w31, h26 = h26 * m34 + y34 * w31, m34 === 1 - o13) {
        const S23 = 1 / Math.sqrt(c27 * c27 + l26 * l26 + u35 * u35 + h26 * h26);
        c27 *= S23, l26 *= S23, u35 *= S23, h26 *= S23;
      }
    }
    e11[t19] = c27, e11[t19 + 1] = l26, e11[t19 + 2] = u35, e11[t19 + 3] = h26;
  }
  static multiplyQuaternionsFlat(e11, t19, n33, i27, s18, r24) {
    const o13 = n33[i27], c27 = n33[i27 + 1], l26 = n33[i27 + 2], u35 = n33[i27 + 3], h26 = s18[r24], d34 = s18[r24 + 1], p26 = s18[r24 + 2], g32 = s18[r24 + 3];
    return e11[t19] = o13 * g32 + u35 * h26 + c27 * p26 - l26 * d34, e11[t19 + 1] = c27 * g32 + u35 * d34 + l26 * h26 - o13 * p26, e11[t19 + 2] = l26 * g32 + u35 * p26 + o13 * d34 - c27 * h26, e11[t19 + 3] = u35 * g32 - o13 * h26 - c27 * d34 - l26 * p26, e11;
  }
  get x() {
    return this._x;
  }
  set x(e11) {
    this._x = e11, this._onChangeCallback();
  }
  get y() {
    return this._y;
  }
  set y(e11) {
    this._y = e11, this._onChangeCallback();
  }
  get z() {
    return this._z;
  }
  set z(e11) {
    this._z = e11, this._onChangeCallback();
  }
  get w() {
    return this._w;
  }
  set w(e11) {
    this._w = e11, this._onChangeCallback();
  }
  set(e11, t19, n33, i27) {
    return this._x = e11, this._y = t19, this._z = n33, this._w = i27, this._onChangeCallback(), this;
  }
  clone() {
    return new this.constructor(this._x, this._y, this._z, this._w);
  }
  copy(e11) {
    return this._x = e11.x, this._y = e11.y, this._z = e11.z, this._w = e11.w, this._onChangeCallback(), this;
  }
  setFromEuler(e11, t19) {
    const n33 = e11._x, i27 = e11._y, s18 = e11._z, r24 = e11._order, o13 = Math.cos, c27 = Math.sin, l26 = o13(n33 / 2), u35 = o13(i27 / 2), h26 = o13(s18 / 2), d34 = c27(n33 / 2), p26 = c27(i27 / 2), g32 = c27(s18 / 2);
    switch (r24) {
      case "XYZ":
        this._x = d34 * u35 * h26 + l26 * p26 * g32, this._y = l26 * p26 * h26 - d34 * u35 * g32, this._z = l26 * u35 * g32 + d34 * p26 * h26, this._w = l26 * u35 * h26 - d34 * p26 * g32;
        break;
      case "YXZ":
        this._x = d34 * u35 * h26 + l26 * p26 * g32, this._y = l26 * p26 * h26 - d34 * u35 * g32, this._z = l26 * u35 * g32 - d34 * p26 * h26, this._w = l26 * u35 * h26 + d34 * p26 * g32;
        break;
      case "ZXY":
        this._x = d34 * u35 * h26 - l26 * p26 * g32, this._y = l26 * p26 * h26 + d34 * u35 * g32, this._z = l26 * u35 * g32 + d34 * p26 * h26, this._w = l26 * u35 * h26 - d34 * p26 * g32;
        break;
      case "ZYX":
        this._x = d34 * u35 * h26 - l26 * p26 * g32, this._y = l26 * p26 * h26 + d34 * u35 * g32, this._z = l26 * u35 * g32 - d34 * p26 * h26, this._w = l26 * u35 * h26 + d34 * p26 * g32;
        break;
      case "YZX":
        this._x = d34 * u35 * h26 + l26 * p26 * g32, this._y = l26 * p26 * h26 + d34 * u35 * g32, this._z = l26 * u35 * g32 - d34 * p26 * h26, this._w = l26 * u35 * h26 - d34 * p26 * g32;
        break;
      case "XZY":
        this._x = d34 * u35 * h26 - l26 * p26 * g32, this._y = l26 * p26 * h26 - d34 * u35 * g32, this._z = l26 * u35 * g32 + d34 * p26 * h26, this._w = l26 * u35 * h26 + d34 * p26 * g32;
        break;
      default:
        console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: " + r24);
    }
    return t19 !== false && this._onChangeCallback(), this;
  }
  setFromAxisAngle(e11, t19) {
    const n33 = t19 / 2, i27 = Math.sin(n33);
    return this._x = e11.x * i27, this._y = e11.y * i27, this._z = e11.z * i27, this._w = Math.cos(n33), this._onChangeCallback(), this;
  }
  setFromRotationMatrix(e11) {
    const t19 = e11.elements, n33 = t19[0], i27 = t19[4], s18 = t19[8], r24 = t19[1], o13 = t19[5], c27 = t19[9], l26 = t19[2], u35 = t19[6], h26 = t19[10], d34 = n33 + o13 + h26;
    if (d34 > 0) {
      const p26 = 0.5 / Math.sqrt(d34 + 1);
      this._w = 0.25 / p26, this._x = (u35 - c27) * p26, this._y = (s18 - l26) * p26, this._z = (r24 - i27) * p26;
    } else if (n33 > o13 && n33 > h26) {
      const p26 = 2 * Math.sqrt(1 + n33 - o13 - h26);
      this._w = (u35 - c27) / p26, this._x = 0.25 * p26, this._y = (i27 + r24) / p26, this._z = (s18 + l26) / p26;
    } else if (o13 > h26) {
      const p26 = 2 * Math.sqrt(1 + o13 - n33 - h26);
      this._w = (s18 - l26) / p26, this._x = (i27 + r24) / p26, this._y = 0.25 * p26, this._z = (c27 + u35) / p26;
    } else {
      const p26 = 2 * Math.sqrt(1 + h26 - n33 - o13);
      this._w = (r24 - i27) / p26, this._x = (s18 + l26) / p26, this._y = (c27 + u35) / p26, this._z = 0.25 * p26;
    }
    return this._onChangeCallback(), this;
  }
  setFromUnitVectors(e11, t19) {
    let n33 = e11.dot(t19) + 1;
    return n33 < Number.EPSILON ? (n33 = 0, Math.abs(e11.x) > Math.abs(e11.z) ? (this._x = -e11.y, this._y = e11.x, this._z = 0, this._w = n33) : (this._x = 0, this._y = -e11.z, this._z = e11.y, this._w = n33)) : (this._x = e11.y * t19.z - e11.z * t19.y, this._y = e11.z * t19.x - e11.x * t19.z, this._z = e11.x * t19.y - e11.y * t19.x, this._w = n33), this.normalize();
  }
  angleTo(e11) {
    return 2 * Math.acos(Math.abs(Wt4(this.dot(e11), -1, 1)));
  }
  rotateTowards(e11, t19) {
    const n33 = this.angleTo(e11);
    if (n33 === 0)
      return this;
    const i27 = Math.min(1, t19 / n33);
    return this.slerp(e11, i27), this;
  }
  identity() {
    return this.set(0, 0, 0, 1);
  }
  invert() {
    return this.conjugate();
  }
  conjugate() {
    return this._x *= -1, this._y *= -1, this._z *= -1, this._onChangeCallback(), this;
  }
  dot(e11) {
    return this._x * e11._x + this._y * e11._y + this._z * e11._z + this._w * e11._w;
  }
  lengthSq() {
    return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;
  }
  length() {
    return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w);
  }
  normalize() {
    let e11 = this.length();
    return e11 === 0 ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (e11 = 1 / e11, this._x = this._x * e11, this._y = this._y * e11, this._z = this._z * e11, this._w = this._w * e11), this._onChangeCallback(), this;
  }
  multiply(e11) {
    return this.multiplyQuaternions(this, e11);
  }
  premultiply(e11) {
    return this.multiplyQuaternions(e11, this);
  }
  multiplyQuaternions(e11, t19) {
    const n33 = e11._x, i27 = e11._y, s18 = e11._z, r24 = e11._w, o13 = t19._x, c27 = t19._y, l26 = t19._z, u35 = t19._w;
    return this._x = n33 * u35 + r24 * o13 + i27 * l26 - s18 * c27, this._y = i27 * u35 + r24 * c27 + s18 * o13 - n33 * l26, this._z = s18 * u35 + r24 * l26 + n33 * c27 - i27 * o13, this._w = r24 * u35 - n33 * o13 - i27 * c27 - s18 * l26, this._onChangeCallback(), this;
  }
  slerp(e11, t19) {
    if (t19 === 0)
      return this;
    if (t19 === 1)
      return this.copy(e11);
    const n33 = this._x, i27 = this._y, s18 = this._z, r24 = this._w;
    let o13 = r24 * e11._w + n33 * e11._x + i27 * e11._y + s18 * e11._z;
    if (o13 < 0 ? (this._w = -e11._w, this._x = -e11._x, this._y = -e11._y, this._z = -e11._z, o13 = -o13) : this.copy(e11), o13 >= 1)
      return this._w = r24, this._x = n33, this._y = i27, this._z = s18, this;
    const c27 = 1 - o13 * o13;
    if (c27 <= Number.EPSILON) {
      const p26 = 1 - t19;
      return this._w = p26 * r24 + t19 * this._w, this._x = p26 * n33 + t19 * this._x, this._y = p26 * i27 + t19 * this._y, this._z = p26 * s18 + t19 * this._z, this.normalize(), this._onChangeCallback(), this;
    }
    const l26 = Math.sqrt(c27), u35 = Math.atan2(l26, o13), h26 = Math.sin((1 - t19) * u35) / l26, d34 = Math.sin(t19 * u35) / l26;
    return this._w = r24 * h26 + this._w * d34, this._x = n33 * h26 + this._x * d34, this._y = i27 * h26 + this._y * d34, this._z = s18 * h26 + this._z * d34, this._onChangeCallback(), this;
  }
  slerpQuaternions(e11, t19, n33) {
    return this.copy(e11).slerp(t19, n33);
  }
  random() {
    const e11 = Math.random(), t19 = Math.sqrt(1 - e11), n33 = Math.sqrt(e11), i27 = 2 * Math.PI * Math.random(), s18 = 2 * Math.PI * Math.random();
    return this.set(
      t19 * Math.cos(i27),
      n33 * Math.sin(s18),
      n33 * Math.cos(s18),
      t19 * Math.sin(i27)
    );
  }
  equals(e11) {
    return e11._x === this._x && e11._y === this._y && e11._z === this._z && e11._w === this._w;
  }
  fromArray(e11, t19 = 0) {
    return this._x = e11[t19], this._y = e11[t19 + 1], this._z = e11[t19 + 2], this._w = e11[t19 + 3], this._onChangeCallback(), this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this._x, e11[t19 + 1] = this._y, e11[t19 + 2] = this._z, e11[t19 + 3] = this._w, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this._x = e11.getX(t19), this._y = e11.getY(t19), this._z = e11.getZ(t19), this._w = e11.getW(t19), this;
  }
  toJSON() {
    return this.toArray();
  }
  _onChange(e11) {
    return this._onChangeCallback = e11, this;
  }
  _onChangeCallback() {
  }
  *[Symbol.iterator]() {
    yield this._x, yield this._y, yield this._z, yield this._w;
  }
};
var U9 = class _U {
  constructor(e11 = 0, t19 = 0, n33 = 0) {
    _U.prototype.isVector3 = true, this.x = e11, this.y = t19, this.z = n33;
  }
  set(e11, t19, n33) {
    return n33 === void 0 && (n33 = this.z), this.x = e11, this.y = t19, this.z = n33, this;
  }
  setScalar(e11) {
    return this.x = e11, this.y = e11, this.z = e11, this;
  }
  setX(e11) {
    return this.x = e11, this;
  }
  setY(e11) {
    return this.y = e11, this;
  }
  setZ(e11) {
    return this.z = e11, this;
  }
  setComponent(e11, t19) {
    switch (e11) {
      case 0:
        this.x = t19;
        break;
      case 1:
        this.y = t19;
        break;
      case 2:
        this.z = t19;
        break;
      default:
        throw new Error("index is out of range: " + e11);
    }
    return this;
  }
  getComponent(e11) {
    switch (e11) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      case 2:
        return this.z;
      default:
        throw new Error("index is out of range: " + e11);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y, this.z);
  }
  copy(e11) {
    return this.x = e11.x, this.y = e11.y, this.z = e11.z, this;
  }
  add(e11) {
    return this.x += e11.x, this.y += e11.y, this.z += e11.z, this;
  }
  addScalar(e11) {
    return this.x += e11, this.y += e11, this.z += e11, this;
  }
  addVectors(e11, t19) {
    return this.x = e11.x + t19.x, this.y = e11.y + t19.y, this.z = e11.z + t19.z, this;
  }
  addScaledVector(e11, t19) {
    return this.x += e11.x * t19, this.y += e11.y * t19, this.z += e11.z * t19, this;
  }
  sub(e11) {
    return this.x -= e11.x, this.y -= e11.y, this.z -= e11.z, this;
  }
  subScalar(e11) {
    return this.x -= e11, this.y -= e11, this.z -= e11, this;
  }
  subVectors(e11, t19) {
    return this.x = e11.x - t19.x, this.y = e11.y - t19.y, this.z = e11.z - t19.z, this;
  }
  multiply(e11) {
    return this.x *= e11.x, this.y *= e11.y, this.z *= e11.z, this;
  }
  multiplyScalar(e11) {
    return this.x *= e11, this.y *= e11, this.z *= e11, this;
  }
  multiplyVectors(e11, t19) {
    return this.x = e11.x * t19.x, this.y = e11.y * t19.y, this.z = e11.z * t19.z, this;
  }
  applyEuler(e11) {
    return this.applyQuaternion(Nl.setFromEuler(e11));
  }
  applyAxisAngle(e11, t19) {
    return this.applyQuaternion(Nl.setFromAxisAngle(e11, t19));
  }
  applyMatrix3(e11) {
    const t19 = this.x, n33 = this.y, i27 = this.z, s18 = e11.elements;
    return this.x = s18[0] * t19 + s18[3] * n33 + s18[6] * i27, this.y = s18[1] * t19 + s18[4] * n33 + s18[7] * i27, this.z = s18[2] * t19 + s18[5] * n33 + s18[8] * i27, this;
  }
  applyNormalMatrix(e11) {
    return this.applyMatrix3(e11).normalize();
  }
  applyMatrix4(e11) {
    const t19 = this.x, n33 = this.y, i27 = this.z, s18 = e11.elements, r24 = 1 / (s18[3] * t19 + s18[7] * n33 + s18[11] * i27 + s18[15]);
    return this.x = (s18[0] * t19 + s18[4] * n33 + s18[8] * i27 + s18[12]) * r24, this.y = (s18[1] * t19 + s18[5] * n33 + s18[9] * i27 + s18[13]) * r24, this.z = (s18[2] * t19 + s18[6] * n33 + s18[10] * i27 + s18[14]) * r24, this;
  }
  applyQuaternion(e11) {
    const t19 = this.x, n33 = this.y, i27 = this.z, s18 = e11.x, r24 = e11.y, o13 = e11.z, c27 = e11.w, l26 = c27 * t19 + r24 * i27 - o13 * n33, u35 = c27 * n33 + o13 * t19 - s18 * i27, h26 = c27 * i27 + s18 * n33 - r24 * t19, d34 = -s18 * t19 - r24 * n33 - o13 * i27;
    return this.x = l26 * c27 + d34 * -s18 + u35 * -o13 - h26 * -r24, this.y = u35 * c27 + d34 * -r24 + h26 * -s18 - l26 * -o13, this.z = h26 * c27 + d34 * -o13 + l26 * -r24 - u35 * -s18, this;
  }
  project(e11) {
    return this.applyMatrix4(e11.matrixWorldInverse).applyMatrix4(e11.projectionMatrix);
  }
  unproject(e11) {
    return this.applyMatrix4(e11.projectionMatrixInverse).applyMatrix4(e11.matrixWorld);
  }
  transformDirection(e11) {
    const t19 = this.x, n33 = this.y, i27 = this.z, s18 = e11.elements;
    return this.x = s18[0] * t19 + s18[4] * n33 + s18[8] * i27, this.y = s18[1] * t19 + s18[5] * n33 + s18[9] * i27, this.z = s18[2] * t19 + s18[6] * n33 + s18[10] * i27, this.normalize();
  }
  divide(e11) {
    return this.x /= e11.x, this.y /= e11.y, this.z /= e11.z, this;
  }
  divideScalar(e11) {
    return this.multiplyScalar(1 / e11);
  }
  min(e11) {
    return this.x = Math.min(this.x, e11.x), this.y = Math.min(this.y, e11.y), this.z = Math.min(this.z, e11.z), this;
  }
  max(e11) {
    return this.x = Math.max(this.x, e11.x), this.y = Math.max(this.y, e11.y), this.z = Math.max(this.z, e11.z), this;
  }
  clamp(e11, t19) {
    return this.x = Math.max(e11.x, Math.min(t19.x, this.x)), this.y = Math.max(e11.y, Math.min(t19.y, this.y)), this.z = Math.max(e11.z, Math.min(t19.z, this.z)), this;
  }
  clampScalar(e11, t19) {
    return this.x = Math.max(e11, Math.min(t19, this.x)), this.y = Math.max(e11, Math.min(t19, this.y)), this.z = Math.max(e11, Math.min(t19, this.z)), this;
  }
  clampLength(e11, t19) {
    const n33 = this.length();
    return this.divideScalar(n33 || 1).multiplyScalar(Math.max(e11, Math.min(t19, n33)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this;
  }
  roundToZero() {
    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this.z = -this.z, this;
  }
  dot(e11) {
    return this.x * e11.x + this.y * e11.y + this.z * e11.z;
  }
  // TODO lengthSquared?
  lengthSq() {
    return this.x * this.x + this.y * this.y + this.z * this.z;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  setLength(e11) {
    return this.normalize().multiplyScalar(e11);
  }
  lerp(e11, t19) {
    return this.x += (e11.x - this.x) * t19, this.y += (e11.y - this.y) * t19, this.z += (e11.z - this.z) * t19, this;
  }
  lerpVectors(e11, t19, n33) {
    return this.x = e11.x + (t19.x - e11.x) * n33, this.y = e11.y + (t19.y - e11.y) * n33, this.z = e11.z + (t19.z - e11.z) * n33, this;
  }
  cross(e11) {
    return this.crossVectors(this, e11);
  }
  crossVectors(e11, t19) {
    const n33 = e11.x, i27 = e11.y, s18 = e11.z, r24 = t19.x, o13 = t19.y, c27 = t19.z;
    return this.x = i27 * c27 - s18 * o13, this.y = s18 * r24 - n33 * c27, this.z = n33 * o13 - i27 * r24, this;
  }
  projectOnVector(e11) {
    const t19 = e11.lengthSq();
    if (t19 === 0)
      return this.set(0, 0, 0);
    const n33 = e11.dot(this) / t19;
    return this.copy(e11).multiplyScalar(n33);
  }
  projectOnPlane(e11) {
    return Oo.copy(this).projectOnVector(e11), this.sub(Oo);
  }
  reflect(e11) {
    return this.sub(Oo.copy(e11).multiplyScalar(2 * this.dot(e11)));
  }
  angleTo(e11) {
    const t19 = Math.sqrt(this.lengthSq() * e11.lengthSq());
    if (t19 === 0)
      return Math.PI / 2;
    const n33 = this.dot(e11) / t19;
    return Math.acos(Wt4(n33, -1, 1));
  }
  distanceTo(e11) {
    return Math.sqrt(this.distanceToSquared(e11));
  }
  distanceToSquared(e11) {
    const t19 = this.x - e11.x, n33 = this.y - e11.y, i27 = this.z - e11.z;
    return t19 * t19 + n33 * n33 + i27 * i27;
  }
  manhattanDistanceTo(e11) {
    return Math.abs(this.x - e11.x) + Math.abs(this.y - e11.y) + Math.abs(this.z - e11.z);
  }
  setFromSpherical(e11) {
    return this.setFromSphericalCoords(e11.radius, e11.phi, e11.theta);
  }
  setFromSphericalCoords(e11, t19, n33) {
    const i27 = Math.sin(t19) * e11;
    return this.x = i27 * Math.sin(n33), this.y = Math.cos(t19) * e11, this.z = i27 * Math.cos(n33), this;
  }
  setFromCylindrical(e11) {
    return this.setFromCylindricalCoords(e11.radius, e11.theta, e11.y);
  }
  setFromCylindricalCoords(e11, t19, n33) {
    return this.x = e11 * Math.sin(t19), this.y = n33, this.z = e11 * Math.cos(t19), this;
  }
  setFromMatrixPosition(e11) {
    const t19 = e11.elements;
    return this.x = t19[12], this.y = t19[13], this.z = t19[14], this;
  }
  setFromMatrixScale(e11) {
    const t19 = this.setFromMatrixColumn(e11, 0).length(), n33 = this.setFromMatrixColumn(e11, 1).length(), i27 = this.setFromMatrixColumn(e11, 2).length();
    return this.x = t19, this.y = n33, this.z = i27, this;
  }
  setFromMatrixColumn(e11, t19) {
    return this.fromArray(e11.elements, t19 * 4);
  }
  setFromMatrix3Column(e11, t19) {
    return this.fromArray(e11.elements, t19 * 3);
  }
  setFromEuler(e11) {
    return this.x = e11._x, this.y = e11._y, this.z = e11._z, this;
  }
  setFromColor(e11) {
    return this.x = e11.r, this.y = e11.g, this.z = e11.b, this;
  }
  equals(e11) {
    return e11.x === this.x && e11.y === this.y && e11.z === this.z;
  }
  fromArray(e11, t19 = 0) {
    return this.x = e11[t19], this.y = e11[t19 + 1], this.z = e11[t19 + 2], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.x, e11[t19 + 1] = this.y, e11[t19 + 2] = this.z, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.x = e11.getX(t19), this.y = e11.getY(t19), this.z = e11.getZ(t19), this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this.z = Math.random(), this;
  }
  randomDirection() {
    const e11 = (Math.random() - 0.5) * 2, t19 = Math.random() * Math.PI * 2, n33 = Math.sqrt(1 - e11 ** 2);
    return this.x = n33 * Math.cos(t19), this.y = n33 * Math.sin(t19), this.z = e11, this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y, yield this.z;
  }
};
var Oo = new U9();
var Nl = new qt3();
var qn3 = class {
  constructor(e11 = new U9(1 / 0, 1 / 0, 1 / 0), t19 = new U9(-1 / 0, -1 / 0, -1 / 0)) {
    this.isBox3 = true, this.min = e11, this.max = t19;
  }
  set(e11, t19) {
    return this.min.copy(e11), this.max.copy(t19), this;
  }
  setFromArray(e11) {
    this.makeEmpty();
    for (let t19 = 0, n33 = e11.length; t19 < n33; t19 += 3)
      this.expandByPoint(On3.fromArray(e11, t19));
    return this;
  }
  setFromBufferAttribute(e11) {
    this.makeEmpty();
    for (let t19 = 0, n33 = e11.count; t19 < n33; t19++)
      this.expandByPoint(On3.fromBufferAttribute(e11, t19));
    return this;
  }
  setFromPoints(e11) {
    this.makeEmpty();
    for (let t19 = 0, n33 = e11.length; t19 < n33; t19++)
      this.expandByPoint(e11[t19]);
    return this;
  }
  setFromCenterAndSize(e11, t19) {
    const n33 = On3.copy(t19).multiplyScalar(0.5);
    return this.min.copy(e11).sub(n33), this.max.copy(e11).add(n33), this;
  }
  setFromObject(e11, t19 = false) {
    return this.makeEmpty(), this.expandByObject(e11, t19);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    return this.min.copy(e11.min), this.max.copy(e11.max), this;
  }
  makeEmpty() {
    return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, this;
  }
  isEmpty() {
    return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z;
  }
  getCenter(e11) {
    return this.isEmpty() ? e11.set(0, 0, 0) : e11.addVectors(this.min, this.max).multiplyScalar(0.5);
  }
  getSize(e11) {
    return this.isEmpty() ? e11.set(0, 0, 0) : e11.subVectors(this.max, this.min);
  }
  expandByPoint(e11) {
    return this.min.min(e11), this.max.max(e11), this;
  }
  expandByVector(e11) {
    return this.min.sub(e11), this.max.add(e11), this;
  }
  expandByScalar(e11) {
    return this.min.addScalar(-e11), this.max.addScalar(e11), this;
  }
  expandByObject(e11, t19 = false) {
    if (e11.updateWorldMatrix(false, false), e11.boundingBox !== void 0)
      e11.boundingBox === null && e11.computeBoundingBox(), Yi.copy(e11.boundingBox), Yi.applyMatrix4(e11.matrixWorld), this.union(Yi);
    else {
      const i27 = e11.geometry;
      if (i27 !== void 0)
        if (t19 && i27.attributes !== void 0 && i27.attributes.position !== void 0) {
          const s18 = i27.attributes.position;
          for (let r24 = 0, o13 = s18.count; r24 < o13; r24++)
            On3.fromBufferAttribute(s18, r24).applyMatrix4(e11.matrixWorld), this.expandByPoint(On3);
        } else
          i27.boundingBox === null && i27.computeBoundingBox(), Yi.copy(i27.boundingBox), Yi.applyMatrix4(e11.matrixWorld), this.union(Yi);
    }
    const n33 = e11.children;
    for (let i27 = 0, s18 = n33.length; i27 < s18; i27++)
      this.expandByObject(n33[i27], t19);
    return this;
  }
  containsPoint(e11) {
    return !(e11.x < this.min.x || e11.x > this.max.x || e11.y < this.min.y || e11.y > this.max.y || e11.z < this.min.z || e11.z > this.max.z);
  }
  containsBox(e11) {
    return this.min.x <= e11.min.x && e11.max.x <= this.max.x && this.min.y <= e11.min.y && e11.max.y <= this.max.y && this.min.z <= e11.min.z && e11.max.z <= this.max.z;
  }
  getParameter(e11, t19) {
    return t19.set(
      (e11.x - this.min.x) / (this.max.x - this.min.x),
      (e11.y - this.min.y) / (this.max.y - this.min.y),
      (e11.z - this.min.z) / (this.max.z - this.min.z)
    );
  }
  intersectsBox(e11) {
    return !(e11.max.x < this.min.x || e11.min.x > this.max.x || e11.max.y < this.min.y || e11.min.y > this.max.y || e11.max.z < this.min.z || e11.min.z > this.max.z);
  }
  intersectsSphere(e11) {
    return this.clampPoint(e11.center, On3), On3.distanceToSquared(e11.center) <= e11.radius * e11.radius;
  }
  intersectsPlane(e11) {
    let t19, n33;
    return e11.normal.x > 0 ? (t19 = e11.normal.x * this.min.x, n33 = e11.normal.x * this.max.x) : (t19 = e11.normal.x * this.max.x, n33 = e11.normal.x * this.min.x), e11.normal.y > 0 ? (t19 += e11.normal.y * this.min.y, n33 += e11.normal.y * this.max.y) : (t19 += e11.normal.y * this.max.y, n33 += e11.normal.y * this.min.y), e11.normal.z > 0 ? (t19 += e11.normal.z * this.min.z, n33 += e11.normal.z * this.max.z) : (t19 += e11.normal.z * this.max.z, n33 += e11.normal.z * this.min.z), t19 <= -e11.constant && n33 >= -e11.constant;
  }
  intersectsTriangle(e11) {
    if (this.isEmpty())
      return false;
    this.getCenter(zs), vr3.subVectors(this.max, zs), Ji.subVectors(e11.a, zs), Zi.subVectors(e11.b, zs), $i3.subVectors(e11.c, zs), Jn3.subVectors(Zi, Ji), Zn3.subVectors($i3, Zi), pi3.subVectors(Ji, $i3);
    let t19 = [
      0,
      -Jn3.z,
      Jn3.y,
      0,
      -Zn3.z,
      Zn3.y,
      0,
      -pi3.z,
      pi3.y,
      Jn3.z,
      0,
      -Jn3.x,
      Zn3.z,
      0,
      -Zn3.x,
      pi3.z,
      0,
      -pi3.x,
      -Jn3.y,
      Jn3.x,
      0,
      -Zn3.y,
      Zn3.x,
      0,
      -pi3.y,
      pi3.x,
      0
    ];
    return !Fo(t19, Ji, Zi, $i3, vr3) || (t19 = [1, 0, 0, 0, 1, 0, 0, 0, 1], !Fo(t19, Ji, Zi, $i3, vr3)) ? false : (br3.crossVectors(Jn3, Zn3), t19 = [br3.x, br3.y, br3.z], Fo(t19, Ji, Zi, $i3, vr3));
  }
  clampPoint(e11, t19) {
    return t19.copy(e11).clamp(this.min, this.max);
  }
  distanceToPoint(e11) {
    return this.clampPoint(e11, On3).distanceTo(e11);
  }
  getBoundingSphere(e11) {
    return this.isEmpty() ? e11.makeEmpty() : (this.getCenter(e11.center), e11.radius = this.getSize(On3).length() * 0.5), e11;
  }
  intersect(e11) {
    return this.min.max(e11.min), this.max.min(e11.max), this.isEmpty() && this.makeEmpty(), this;
  }
  union(e11) {
    return this.min.min(e11.min), this.max.max(e11.max), this;
  }
  applyMatrix4(e11) {
    return this.isEmpty() ? this : (kn3[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(e11), kn3[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(e11), kn3[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(e11), kn3[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(e11), kn3[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(e11), kn3[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(e11), kn3[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(e11), kn3[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(e11), this.setFromPoints(kn3), this);
  }
  translate(e11) {
    return this.min.add(e11), this.max.add(e11), this;
  }
  equals(e11) {
    return e11.min.equals(this.min) && e11.max.equals(this.max);
  }
};
var kn3 = [
  new U9(),
  new U9(),
  new U9(),
  new U9(),
  new U9(),
  new U9(),
  new U9(),
  new U9()
];
var On3 = new U9();
var Yi = new qn3();
var Ji = new U9();
var Zi = new U9();
var $i3 = new U9();
var Jn3 = new U9();
var Zn3 = new U9();
var pi3 = new U9();
var zs = new U9();
var vr3 = new U9();
var br3 = new U9();
var mi3 = new U9();
function Fo(a22, e11, t19, n33, i27) {
  for (let s18 = 0, r24 = a22.length - 3; s18 <= r24; s18 += 3) {
    mi3.fromArray(a22, s18);
    const o13 = i27.x * Math.abs(mi3.x) + i27.y * Math.abs(mi3.y) + i27.z * Math.abs(mi3.z), c27 = e11.dot(mi3), l26 = t19.dot(mi3), u35 = n33.dot(mi3);
    if (Math.max(-Math.max(c27, l26, u35), Math.min(c27, l26, u35)) > o13)
      return false;
  }
  return true;
}
var _d = new qn3();
var Bs = new U9();
var zo = new U9();
var Xn3 = class {
  constructor(e11 = new U9(), t19 = -1) {
    this.center = e11, this.radius = t19;
  }
  set(e11, t19) {
    return this.center.copy(e11), this.radius = t19, this;
  }
  setFromPoints(e11, t19) {
    const n33 = this.center;
    t19 !== void 0 ? n33.copy(t19) : _d.setFromPoints(e11).getCenter(n33);
    let i27 = 0;
    for (let s18 = 0, r24 = e11.length; s18 < r24; s18++)
      i27 = Math.max(i27, n33.distanceToSquared(e11[s18]));
    return this.radius = Math.sqrt(i27), this;
  }
  copy(e11) {
    return this.center.copy(e11.center), this.radius = e11.radius, this;
  }
  isEmpty() {
    return this.radius < 0;
  }
  makeEmpty() {
    return this.center.set(0, 0, 0), this.radius = -1, this;
  }
  containsPoint(e11) {
    return e11.distanceToSquared(this.center) <= this.radius * this.radius;
  }
  distanceToPoint(e11) {
    return e11.distanceTo(this.center) - this.radius;
  }
  intersectsSphere(e11) {
    const t19 = this.radius + e11.radius;
    return e11.center.distanceToSquared(this.center) <= t19 * t19;
  }
  intersectsBox(e11) {
    return e11.intersectsSphere(this);
  }
  intersectsPlane(e11) {
    return Math.abs(e11.distanceToPoint(this.center)) <= this.radius;
  }
  clampPoint(e11, t19) {
    const n33 = this.center.distanceToSquared(e11);
    return t19.copy(e11), n33 > this.radius * this.radius && (t19.sub(this.center).normalize(), t19.multiplyScalar(this.radius).add(this.center)), t19;
  }
  getBoundingBox(e11) {
    return this.isEmpty() ? (e11.makeEmpty(), e11) : (e11.set(this.center, this.center), e11.expandByScalar(this.radius), e11);
  }
  applyMatrix4(e11) {
    return this.center.applyMatrix4(e11), this.radius = this.radius * e11.getMaxScaleOnAxis(), this;
  }
  translate(e11) {
    return this.center.add(e11), this;
  }
  expandByPoint(e11) {
    if (this.isEmpty())
      return this.center.copy(e11), this.radius = 0, this;
    Bs.subVectors(e11, this.center);
    const t19 = Bs.lengthSq();
    if (t19 > this.radius * this.radius) {
      const n33 = Math.sqrt(t19), i27 = (n33 - this.radius) * 0.5;
      this.center.addScaledVector(Bs, i27 / n33), this.radius += i27;
    }
    return this;
  }
  union(e11) {
    return e11.isEmpty() ? this : this.isEmpty() ? (this.copy(e11), this) : (this.center.equals(e11.center) === true ? this.radius = Math.max(this.radius, e11.radius) : (zo.subVectors(e11.center, this.center).setLength(e11.radius), this.expandByPoint(Bs.copy(e11.center).add(zo)), this.expandByPoint(Bs.copy(e11.center).sub(zo))), this);
  }
  equals(e11) {
    return e11.center.equals(this.center) && e11.radius === this.radius;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var Fn3 = new U9();
var Bo = new U9();
var Mr3 = new U9();
var $n3 = new U9();
var Vo = new U9();
var Sr3 = new U9();
var Go = new U9();
var La = class {
  constructor(e11 = new U9(), t19 = new U9(0, 0, -1)) {
    this.origin = e11, this.direction = t19;
  }
  set(e11, t19) {
    return this.origin.copy(e11), this.direction.copy(t19), this;
  }
  copy(e11) {
    return this.origin.copy(e11.origin), this.direction.copy(e11.direction), this;
  }
  at(e11, t19) {
    return t19.copy(this.origin).addScaledVector(this.direction, e11);
  }
  lookAt(e11) {
    return this.direction.copy(e11).sub(this.origin).normalize(), this;
  }
  recast(e11) {
    return this.origin.copy(this.at(e11, Fn3)), this;
  }
  closestPointToPoint(e11, t19) {
    t19.subVectors(e11, this.origin);
    const n33 = t19.dot(this.direction);
    return n33 < 0 ? t19.copy(this.origin) : t19.copy(this.origin).addScaledVector(this.direction, n33);
  }
  distanceToPoint(e11) {
    return Math.sqrt(this.distanceSqToPoint(e11));
  }
  distanceSqToPoint(e11) {
    const t19 = Fn3.subVectors(e11, this.origin).dot(this.direction);
    return t19 < 0 ? this.origin.distanceToSquared(e11) : (Fn3.copy(this.origin).addScaledVector(this.direction, t19), Fn3.distanceToSquared(e11));
  }
  distanceSqToSegment(e11, t19, n33, i27) {
    Bo.copy(e11).add(t19).multiplyScalar(0.5), Mr3.copy(t19).sub(e11).normalize(), $n3.copy(this.origin).sub(Bo);
    const s18 = e11.distanceTo(t19) * 0.5, r24 = -this.direction.dot(Mr3), o13 = $n3.dot(this.direction), c27 = -$n3.dot(Mr3), l26 = $n3.lengthSq(), u35 = Math.abs(1 - r24 * r24);
    let h26, d34, p26, g32;
    if (u35 > 0)
      if (h26 = r24 * c27 - o13, d34 = r24 * o13 - c27, g32 = s18 * u35, h26 >= 0)
        if (d34 >= -g32)
          if (d34 <= g32) {
            const y34 = 1 / u35;
            h26 *= y34, d34 *= y34, p26 = h26 * (h26 + r24 * d34 + 2 * o13) + d34 * (r24 * h26 + d34 + 2 * c27) + l26;
          } else
            d34 = s18, h26 = Math.max(0, -(r24 * d34 + o13)), p26 = -h26 * h26 + d34 * (d34 + 2 * c27) + l26;
        else
          d34 = -s18, h26 = Math.max(0, -(r24 * d34 + o13)), p26 = -h26 * h26 + d34 * (d34 + 2 * c27) + l26;
      else
        d34 <= -g32 ? (h26 = Math.max(0, -(-r24 * s18 + o13)), d34 = h26 > 0 ? -s18 : Math.min(Math.max(-s18, -c27), s18), p26 = -h26 * h26 + d34 * (d34 + 2 * c27) + l26) : d34 <= g32 ? (h26 = 0, d34 = Math.min(Math.max(-s18, -c27), s18), p26 = d34 * (d34 + 2 * c27) + l26) : (h26 = Math.max(0, -(r24 * s18 + o13)), d34 = h26 > 0 ? s18 : Math.min(Math.max(-s18, -c27), s18), p26 = -h26 * h26 + d34 * (d34 + 2 * c27) + l26);
    else
      d34 = r24 > 0 ? -s18 : s18, h26 = Math.max(0, -(r24 * d34 + o13)), p26 = -h26 * h26 + d34 * (d34 + 2 * c27) + l26;
    return n33 && n33.copy(this.origin).addScaledVector(this.direction, h26), i27 && i27.copy(Bo).addScaledVector(Mr3, d34), p26;
  }
  intersectSphere(e11, t19) {
    Fn3.subVectors(e11.center, this.origin);
    const n33 = Fn3.dot(this.direction), i27 = Fn3.dot(Fn3) - n33 * n33, s18 = e11.radius * e11.radius;
    if (i27 > s18)
      return null;
    const r24 = Math.sqrt(s18 - i27), o13 = n33 - r24, c27 = n33 + r24;
    return c27 < 0 ? null : o13 < 0 ? this.at(c27, t19) : this.at(o13, t19);
  }
  intersectsSphere(e11) {
    return this.distanceSqToPoint(e11.center) <= e11.radius * e11.radius;
  }
  distanceToPlane(e11) {
    const t19 = e11.normal.dot(this.direction);
    if (t19 === 0)
      return e11.distanceToPoint(this.origin) === 0 ? 0 : null;
    const n33 = -(this.origin.dot(e11.normal) + e11.constant) / t19;
    return n33 >= 0 ? n33 : null;
  }
  intersectPlane(e11, t19) {
    const n33 = this.distanceToPlane(e11);
    return n33 === null ? null : this.at(n33, t19);
  }
  intersectsPlane(e11) {
    const t19 = e11.distanceToPoint(this.origin);
    return t19 === 0 || e11.normal.dot(this.direction) * t19 < 0;
  }
  intersectBox(e11, t19) {
    let n33, i27, s18, r24, o13, c27;
    const l26 = 1 / this.direction.x, u35 = 1 / this.direction.y, h26 = 1 / this.direction.z, d34 = this.origin;
    return l26 >= 0 ? (n33 = (e11.min.x - d34.x) * l26, i27 = (e11.max.x - d34.x) * l26) : (n33 = (e11.max.x - d34.x) * l26, i27 = (e11.min.x - d34.x) * l26), u35 >= 0 ? (s18 = (e11.min.y - d34.y) * u35, r24 = (e11.max.y - d34.y) * u35) : (s18 = (e11.max.y - d34.y) * u35, r24 = (e11.min.y - d34.y) * u35), n33 > r24 || s18 > i27 || ((s18 > n33 || isNaN(n33)) && (n33 = s18), (r24 < i27 || isNaN(i27)) && (i27 = r24), h26 >= 0 ? (o13 = (e11.min.z - d34.z) * h26, c27 = (e11.max.z - d34.z) * h26) : (o13 = (e11.max.z - d34.z) * h26, c27 = (e11.min.z - d34.z) * h26), n33 > c27 || o13 > i27) || ((o13 > n33 || n33 !== n33) && (n33 = o13), (c27 < i27 || i27 !== i27) && (i27 = c27), i27 < 0) ? null : this.at(n33 >= 0 ? n33 : i27, t19);
  }
  intersectsBox(e11) {
    return this.intersectBox(e11, Fn3) !== null;
  }
  intersectTriangle(e11, t19, n33, i27, s18) {
    Vo.subVectors(t19, e11), Sr3.subVectors(n33, e11), Go.crossVectors(Vo, Sr3);
    let r24 = this.direction.dot(Go), o13;
    if (r24 > 0) {
      if (i27)
        return null;
      o13 = 1;
    } else if (r24 < 0)
      o13 = -1, r24 = -r24;
    else
      return null;
    $n3.subVectors(this.origin, e11);
    const c27 = o13 * this.direction.dot(Sr3.crossVectors($n3, Sr3));
    if (c27 < 0)
      return null;
    const l26 = o13 * this.direction.dot(Vo.cross($n3));
    if (l26 < 0 || c27 + l26 > r24)
      return null;
    const u35 = -o13 * $n3.dot(Go);
    return u35 < 0 ? null : this.at(u35 / r24, s18);
  }
  applyMatrix4(e11) {
    return this.origin.applyMatrix4(e11), this.direction.transformDirection(e11), this;
  }
  equals(e11) {
    return e11.origin.equals(this.origin) && e11.direction.equals(this.direction);
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var Ve4 = class _Ve {
  constructor() {
    _Ve.prototype.isMatrix4 = true, this.elements = [
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ];
  }
  set(e11, t19, n33, i27, s18, r24, o13, c27, l26, u35, h26, d34, p26, g32, y34, m34) {
    const f40 = this.elements;
    return f40[0] = e11, f40[4] = t19, f40[8] = n33, f40[12] = i27, f40[1] = s18, f40[5] = r24, f40[9] = o13, f40[13] = c27, f40[2] = l26, f40[6] = u35, f40[10] = h26, f40[14] = d34, f40[3] = p26, f40[7] = g32, f40[11] = y34, f40[15] = m34, this;
  }
  identity() {
    return this.set(
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  clone() {
    return new _Ve().fromArray(this.elements);
  }
  copy(e11) {
    const t19 = this.elements, n33 = e11.elements;
    return t19[0] = n33[0], t19[1] = n33[1], t19[2] = n33[2], t19[3] = n33[3], t19[4] = n33[4], t19[5] = n33[5], t19[6] = n33[6], t19[7] = n33[7], t19[8] = n33[8], t19[9] = n33[9], t19[10] = n33[10], t19[11] = n33[11], t19[12] = n33[12], t19[13] = n33[13], t19[14] = n33[14], t19[15] = n33[15], this;
  }
  copyPosition(e11) {
    const t19 = this.elements, n33 = e11.elements;
    return t19[12] = n33[12], t19[13] = n33[13], t19[14] = n33[14], this;
  }
  setFromMatrix3(e11) {
    const t19 = e11.elements;
    return this.set(
      t19[0],
      t19[3],
      t19[6],
      0,
      t19[1],
      t19[4],
      t19[7],
      0,
      t19[2],
      t19[5],
      t19[8],
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  extractBasis(e11, t19, n33) {
    return e11.setFromMatrixColumn(this, 0), t19.setFromMatrixColumn(this, 1), n33.setFromMatrixColumn(this, 2), this;
  }
  makeBasis(e11, t19, n33) {
    return this.set(
      e11.x,
      t19.x,
      n33.x,
      0,
      e11.y,
      t19.y,
      n33.y,
      0,
      e11.z,
      t19.z,
      n33.z,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  extractRotation(e11) {
    const t19 = this.elements, n33 = e11.elements, i27 = 1 / Qi.setFromMatrixColumn(e11, 0).length(), s18 = 1 / Qi.setFromMatrixColumn(e11, 1).length(), r24 = 1 / Qi.setFromMatrixColumn(e11, 2).length();
    return t19[0] = n33[0] * i27, t19[1] = n33[1] * i27, t19[2] = n33[2] * i27, t19[3] = 0, t19[4] = n33[4] * s18, t19[5] = n33[5] * s18, t19[6] = n33[6] * s18, t19[7] = 0, t19[8] = n33[8] * r24, t19[9] = n33[9] * r24, t19[10] = n33[10] * r24, t19[11] = 0, t19[12] = 0, t19[13] = 0, t19[14] = 0, t19[15] = 1, this;
  }
  makeRotationFromEuler(e11) {
    const t19 = this.elements, n33 = e11.x, i27 = e11.y, s18 = e11.z, r24 = Math.cos(n33), o13 = Math.sin(n33), c27 = Math.cos(i27), l26 = Math.sin(i27), u35 = Math.cos(s18), h26 = Math.sin(s18);
    if (e11.order === "XYZ") {
      const d34 = r24 * u35, p26 = r24 * h26, g32 = o13 * u35, y34 = o13 * h26;
      t19[0] = c27 * u35, t19[4] = -c27 * h26, t19[8] = l26, t19[1] = p26 + g32 * l26, t19[5] = d34 - y34 * l26, t19[9] = -o13 * c27, t19[2] = y34 - d34 * l26, t19[6] = g32 + p26 * l26, t19[10] = r24 * c27;
    } else if (e11.order === "YXZ") {
      const d34 = c27 * u35, p26 = c27 * h26, g32 = l26 * u35, y34 = l26 * h26;
      t19[0] = d34 + y34 * o13, t19[4] = g32 * o13 - p26, t19[8] = r24 * l26, t19[1] = r24 * h26, t19[5] = r24 * u35, t19[9] = -o13, t19[2] = p26 * o13 - g32, t19[6] = y34 + d34 * o13, t19[10] = r24 * c27;
    } else if (e11.order === "ZXY") {
      const d34 = c27 * u35, p26 = c27 * h26, g32 = l26 * u35, y34 = l26 * h26;
      t19[0] = d34 - y34 * o13, t19[4] = -r24 * h26, t19[8] = g32 + p26 * o13, t19[1] = p26 + g32 * o13, t19[5] = r24 * u35, t19[9] = y34 - d34 * o13, t19[2] = -r24 * l26, t19[6] = o13, t19[10] = r24 * c27;
    } else if (e11.order === "ZYX") {
      const d34 = r24 * u35, p26 = r24 * h26, g32 = o13 * u35, y34 = o13 * h26;
      t19[0] = c27 * u35, t19[4] = g32 * l26 - p26, t19[8] = d34 * l26 + y34, t19[1] = c27 * h26, t19[5] = y34 * l26 + d34, t19[9] = p26 * l26 - g32, t19[2] = -l26, t19[6] = o13 * c27, t19[10] = r24 * c27;
    } else if (e11.order === "YZX") {
      const d34 = r24 * c27, p26 = r24 * l26, g32 = o13 * c27, y34 = o13 * l26;
      t19[0] = c27 * u35, t19[4] = y34 - d34 * h26, t19[8] = g32 * h26 + p26, t19[1] = h26, t19[5] = r24 * u35, t19[9] = -o13 * u35, t19[2] = -l26 * u35, t19[6] = p26 * h26 + g32, t19[10] = d34 - y34 * h26;
    } else if (e11.order === "XZY") {
      const d34 = r24 * c27, p26 = r24 * l26, g32 = o13 * c27, y34 = o13 * l26;
      t19[0] = c27 * u35, t19[4] = -h26, t19[8] = l26 * u35, t19[1] = d34 * h26 + y34, t19[5] = r24 * u35, t19[9] = p26 * h26 - g32, t19[2] = g32 * h26 - p26, t19[6] = o13 * u35, t19[10] = y34 * h26 + d34;
    }
    return t19[3] = 0, t19[7] = 0, t19[11] = 0, t19[12] = 0, t19[13] = 0, t19[14] = 0, t19[15] = 1, this;
  }
  makeRotationFromQuaternion(e11) {
    return this.compose(xd, e11, yd);
  }
  lookAt(e11, t19, n33) {
    const i27 = this.elements;
    return on3.subVectors(e11, t19), on3.lengthSq() === 0 && (on3.z = 1), on3.normalize(), Qn3.crossVectors(n33, on3), Qn3.lengthSq() === 0 && (Math.abs(n33.z) === 1 ? on3.x += 1e-4 : on3.z += 1e-4, on3.normalize(), Qn3.crossVectors(n33, on3)), Qn3.normalize(), wr3.crossVectors(on3, Qn3), i27[0] = Qn3.x, i27[4] = wr3.x, i27[8] = on3.x, i27[1] = Qn3.y, i27[5] = wr3.y, i27[9] = on3.y, i27[2] = Qn3.z, i27[6] = wr3.z, i27[10] = on3.z, this;
  }
  multiply(e11) {
    return this.multiplyMatrices(this, e11);
  }
  premultiply(e11) {
    return this.multiplyMatrices(e11, this);
  }
  multiplyMatrices(e11, t19) {
    const n33 = e11.elements, i27 = t19.elements, s18 = this.elements, r24 = n33[0], o13 = n33[4], c27 = n33[8], l26 = n33[12], u35 = n33[1], h26 = n33[5], d34 = n33[9], p26 = n33[13], g32 = n33[2], y34 = n33[6], m34 = n33[10], f40 = n33[14], E25 = n33[3], b35 = n33[7], w31 = n33[11], S23 = n33[15], D18 = i27[0], N22 = i27[4], I18 = i27[8], v31 = i27[12], L12 = i27[1], G16 = i27[5], B22 = i27[9], k29 = i27[13], V16 = i27[2], H16 = i27[6], W11 = i27[10], te7 = i27[14], J12 = i27[3], ie8 = i27[7], le7 = i27[11], me9 = i27[15];
    return s18[0] = r24 * D18 + o13 * L12 + c27 * V16 + l26 * J12, s18[4] = r24 * N22 + o13 * G16 + c27 * H16 + l26 * ie8, s18[8] = r24 * I18 + o13 * B22 + c27 * W11 + l26 * le7, s18[12] = r24 * v31 + o13 * k29 + c27 * te7 + l26 * me9, s18[1] = u35 * D18 + h26 * L12 + d34 * V16 + p26 * J12, s18[5] = u35 * N22 + h26 * G16 + d34 * H16 + p26 * ie8, s18[9] = u35 * I18 + h26 * B22 + d34 * W11 + p26 * le7, s18[13] = u35 * v31 + h26 * k29 + d34 * te7 + p26 * me9, s18[2] = g32 * D18 + y34 * L12 + m34 * V16 + f40 * J12, s18[6] = g32 * N22 + y34 * G16 + m34 * H16 + f40 * ie8, s18[10] = g32 * I18 + y34 * B22 + m34 * W11 + f40 * le7, s18[14] = g32 * v31 + y34 * k29 + m34 * te7 + f40 * me9, s18[3] = E25 * D18 + b35 * L12 + w31 * V16 + S23 * J12, s18[7] = E25 * N22 + b35 * G16 + w31 * H16 + S23 * ie8, s18[11] = E25 * I18 + b35 * B22 + w31 * W11 + S23 * le7, s18[15] = E25 * v31 + b35 * k29 + w31 * te7 + S23 * me9, this;
  }
  multiplyScalar(e11) {
    const t19 = this.elements;
    return t19[0] *= e11, t19[4] *= e11, t19[8] *= e11, t19[12] *= e11, t19[1] *= e11, t19[5] *= e11, t19[9] *= e11, t19[13] *= e11, t19[2] *= e11, t19[6] *= e11, t19[10] *= e11, t19[14] *= e11, t19[3] *= e11, t19[7] *= e11, t19[11] *= e11, t19[15] *= e11, this;
  }
  determinant() {
    const e11 = this.elements, t19 = e11[0], n33 = e11[4], i27 = e11[8], s18 = e11[12], r24 = e11[1], o13 = e11[5], c27 = e11[9], l26 = e11[13], u35 = e11[2], h26 = e11[6], d34 = e11[10], p26 = e11[14], g32 = e11[3], y34 = e11[7], m34 = e11[11], f40 = e11[15];
    return g32 * (+s18 * c27 * h26 - i27 * l26 * h26 - s18 * o13 * d34 + n33 * l26 * d34 + i27 * o13 * p26 - n33 * c27 * p26) + y34 * (+t19 * c27 * p26 - t19 * l26 * d34 + s18 * r24 * d34 - i27 * r24 * p26 + i27 * l26 * u35 - s18 * c27 * u35) + m34 * (+t19 * l26 * h26 - t19 * o13 * p26 - s18 * r24 * h26 + n33 * r24 * p26 + s18 * o13 * u35 - n33 * l26 * u35) + f40 * (-i27 * o13 * u35 - t19 * c27 * h26 + t19 * o13 * d34 + i27 * r24 * h26 - n33 * r24 * d34 + n33 * c27 * u35);
  }
  transpose() {
    const e11 = this.elements;
    let t19;
    return t19 = e11[1], e11[1] = e11[4], e11[4] = t19, t19 = e11[2], e11[2] = e11[8], e11[8] = t19, t19 = e11[6], e11[6] = e11[9], e11[9] = t19, t19 = e11[3], e11[3] = e11[12], e11[12] = t19, t19 = e11[7], e11[7] = e11[13], e11[13] = t19, t19 = e11[11], e11[11] = e11[14], e11[14] = t19, this;
  }
  setPosition(e11, t19, n33) {
    const i27 = this.elements;
    return e11.isVector3 ? (i27[12] = e11.x, i27[13] = e11.y, i27[14] = e11.z) : (i27[12] = e11, i27[13] = t19, i27[14] = n33), this;
  }
  invert() {
    const e11 = this.elements, t19 = e11[0], n33 = e11[1], i27 = e11[2], s18 = e11[3], r24 = e11[4], o13 = e11[5], c27 = e11[6], l26 = e11[7], u35 = e11[8], h26 = e11[9], d34 = e11[10], p26 = e11[11], g32 = e11[12], y34 = e11[13], m34 = e11[14], f40 = e11[15], E25 = h26 * m34 * l26 - y34 * d34 * l26 + y34 * c27 * p26 - o13 * m34 * p26 - h26 * c27 * f40 + o13 * d34 * f40, b35 = g32 * d34 * l26 - u35 * m34 * l26 - g32 * c27 * p26 + r24 * m34 * p26 + u35 * c27 * f40 - r24 * d34 * f40, w31 = u35 * y34 * l26 - g32 * h26 * l26 + g32 * o13 * p26 - r24 * y34 * p26 - u35 * o13 * f40 + r24 * h26 * f40, S23 = g32 * h26 * c27 - u35 * y34 * c27 - g32 * o13 * d34 + r24 * y34 * d34 + u35 * o13 * m34 - r24 * h26 * m34, D18 = t19 * E25 + n33 * b35 + i27 * w31 + s18 * S23;
    if (D18 === 0)
      return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
    const N22 = 1 / D18;
    return e11[0] = E25 * N22, e11[1] = (y34 * d34 * s18 - h26 * m34 * s18 - y34 * i27 * p26 + n33 * m34 * p26 + h26 * i27 * f40 - n33 * d34 * f40) * N22, e11[2] = (o13 * m34 * s18 - y34 * c27 * s18 + y34 * i27 * l26 - n33 * m34 * l26 - o13 * i27 * f40 + n33 * c27 * f40) * N22, e11[3] = (h26 * c27 * s18 - o13 * d34 * s18 - h26 * i27 * l26 + n33 * d34 * l26 + o13 * i27 * p26 - n33 * c27 * p26) * N22, e11[4] = b35 * N22, e11[5] = (u35 * m34 * s18 - g32 * d34 * s18 + g32 * i27 * p26 - t19 * m34 * p26 - u35 * i27 * f40 + t19 * d34 * f40) * N22, e11[6] = (g32 * c27 * s18 - r24 * m34 * s18 - g32 * i27 * l26 + t19 * m34 * l26 + r24 * i27 * f40 - t19 * c27 * f40) * N22, e11[7] = (r24 * d34 * s18 - u35 * c27 * s18 + u35 * i27 * l26 - t19 * d34 * l26 - r24 * i27 * p26 + t19 * c27 * p26) * N22, e11[8] = w31 * N22, e11[9] = (g32 * h26 * s18 - u35 * y34 * s18 - g32 * n33 * p26 + t19 * y34 * p26 + u35 * n33 * f40 - t19 * h26 * f40) * N22, e11[10] = (r24 * y34 * s18 - g32 * o13 * s18 + g32 * n33 * l26 - t19 * y34 * l26 - r24 * n33 * f40 + t19 * o13 * f40) * N22, e11[11] = (u35 * o13 * s18 - r24 * h26 * s18 - u35 * n33 * l26 + t19 * h26 * l26 + r24 * n33 * p26 - t19 * o13 * p26) * N22, e11[12] = S23 * N22, e11[13] = (u35 * y34 * i27 - g32 * h26 * i27 + g32 * n33 * d34 - t19 * y34 * d34 - u35 * n33 * m34 + t19 * h26 * m34) * N22, e11[14] = (g32 * o13 * i27 - r24 * y34 * i27 - g32 * n33 * c27 + t19 * y34 * c27 + r24 * n33 * m34 - t19 * o13 * m34) * N22, e11[15] = (r24 * h26 * i27 - u35 * o13 * i27 + u35 * n33 * c27 - t19 * h26 * c27 - r24 * n33 * d34 + t19 * o13 * d34) * N22, this;
  }
  scale(e11) {
    const t19 = this.elements, n33 = e11.x, i27 = e11.y, s18 = e11.z;
    return t19[0] *= n33, t19[4] *= i27, t19[8] *= s18, t19[1] *= n33, t19[5] *= i27, t19[9] *= s18, t19[2] *= n33, t19[6] *= i27, t19[10] *= s18, t19[3] *= n33, t19[7] *= i27, t19[11] *= s18, this;
  }
  getMaxScaleOnAxis() {
    const e11 = this.elements, t19 = e11[0] * e11[0] + e11[1] * e11[1] + e11[2] * e11[2], n33 = e11[4] * e11[4] + e11[5] * e11[5] + e11[6] * e11[6], i27 = e11[8] * e11[8] + e11[9] * e11[9] + e11[10] * e11[10];
    return Math.sqrt(Math.max(t19, n33, i27));
  }
  makeTranslation(e11, t19, n33) {
    return this.set(
      1,
      0,
      0,
      e11,
      0,
      1,
      0,
      t19,
      0,
      0,
      1,
      n33,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationX(e11) {
    const t19 = Math.cos(e11), n33 = Math.sin(e11);
    return this.set(
      1,
      0,
      0,
      0,
      0,
      t19,
      -n33,
      0,
      0,
      n33,
      t19,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationY(e11) {
    const t19 = Math.cos(e11), n33 = Math.sin(e11);
    return this.set(
      t19,
      0,
      n33,
      0,
      0,
      1,
      0,
      0,
      -n33,
      0,
      t19,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationZ(e11) {
    const t19 = Math.cos(e11), n33 = Math.sin(e11);
    return this.set(
      t19,
      -n33,
      0,
      0,
      n33,
      t19,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationAxis(e11, t19) {
    const n33 = Math.cos(t19), i27 = Math.sin(t19), s18 = 1 - n33, r24 = e11.x, o13 = e11.y, c27 = e11.z, l26 = s18 * r24, u35 = s18 * o13;
    return this.set(
      l26 * r24 + n33,
      l26 * o13 - i27 * c27,
      l26 * c27 + i27 * o13,
      0,
      l26 * o13 + i27 * c27,
      u35 * o13 + n33,
      u35 * c27 - i27 * r24,
      0,
      l26 * c27 - i27 * o13,
      u35 * c27 + i27 * r24,
      s18 * c27 * c27 + n33,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeScale(e11, t19, n33) {
    return this.set(
      e11,
      0,
      0,
      0,
      0,
      t19,
      0,
      0,
      0,
      0,
      n33,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeShear(e11, t19, n33, i27, s18, r24) {
    return this.set(
      1,
      n33,
      s18,
      0,
      e11,
      1,
      r24,
      0,
      t19,
      i27,
      1,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  compose(e11, t19, n33) {
    const i27 = this.elements, s18 = t19._x, r24 = t19._y, o13 = t19._z, c27 = t19._w, l26 = s18 + s18, u35 = r24 + r24, h26 = o13 + o13, d34 = s18 * l26, p26 = s18 * u35, g32 = s18 * h26, y34 = r24 * u35, m34 = r24 * h26, f40 = o13 * h26, E25 = c27 * l26, b35 = c27 * u35, w31 = c27 * h26, S23 = n33.x, D18 = n33.y, N22 = n33.z;
    return i27[0] = (1 - (y34 + f40)) * S23, i27[1] = (p26 + w31) * S23, i27[2] = (g32 - b35) * S23, i27[3] = 0, i27[4] = (p26 - w31) * D18, i27[5] = (1 - (d34 + f40)) * D18, i27[6] = (m34 + E25) * D18, i27[7] = 0, i27[8] = (g32 + b35) * N22, i27[9] = (m34 - E25) * N22, i27[10] = (1 - (d34 + y34)) * N22, i27[11] = 0, i27[12] = e11.x, i27[13] = e11.y, i27[14] = e11.z, i27[15] = 1, this;
  }
  decompose(e11, t19, n33) {
    const i27 = this.elements;
    let s18 = Qi.set(i27[0], i27[1], i27[2]).length();
    const r24 = Qi.set(i27[4], i27[5], i27[6]).length(), o13 = Qi.set(i27[8], i27[9], i27[10]).length();
    this.determinant() < 0 && (s18 = -s18), e11.x = i27[12], e11.y = i27[13], e11.z = i27[14], xn3.copy(this);
    const l26 = 1 / s18, u35 = 1 / r24, h26 = 1 / o13;
    return xn3.elements[0] *= l26, xn3.elements[1] *= l26, xn3.elements[2] *= l26, xn3.elements[4] *= u35, xn3.elements[5] *= u35, xn3.elements[6] *= u35, xn3.elements[8] *= h26, xn3.elements[9] *= h26, xn3.elements[10] *= h26, t19.setFromRotationMatrix(xn3), n33.x = s18, n33.y = r24, n33.z = o13, this;
  }
  makePerspective(e11, t19, n33, i27, s18, r24) {
    const o13 = this.elements, c27 = 2 * s18 / (t19 - e11), l26 = 2 * s18 / (n33 - i27), u35 = (t19 + e11) / (t19 - e11), h26 = (n33 + i27) / (n33 - i27), d34 = -(r24 + s18) / (r24 - s18), p26 = -2 * r24 * s18 / (r24 - s18);
    return o13[0] = c27, o13[4] = 0, o13[8] = u35, o13[12] = 0, o13[1] = 0, o13[5] = l26, o13[9] = h26, o13[13] = 0, o13[2] = 0, o13[6] = 0, o13[10] = d34, o13[14] = p26, o13[3] = 0, o13[7] = 0, o13[11] = -1, o13[15] = 0, this;
  }
  makeOrthographic(e11, t19, n33, i27, s18, r24) {
    const o13 = this.elements, c27 = 1 / (t19 - e11), l26 = 1 / (n33 - i27), u35 = 1 / (r24 - s18), h26 = (t19 + e11) * c27, d34 = (n33 + i27) * l26, p26 = (r24 + s18) * u35;
    return o13[0] = 2 * c27, o13[4] = 0, o13[8] = 0, o13[12] = -h26, o13[1] = 0, o13[5] = 2 * l26, o13[9] = 0, o13[13] = -d34, o13[2] = 0, o13[6] = 0, o13[10] = -2 * u35, o13[14] = -p26, o13[3] = 0, o13[7] = 0, o13[11] = 0, o13[15] = 1, this;
  }
  equals(e11) {
    const t19 = this.elements, n33 = e11.elements;
    for (let i27 = 0; i27 < 16; i27++)
      if (t19[i27] !== n33[i27])
        return false;
    return true;
  }
  fromArray(e11, t19 = 0) {
    for (let n33 = 0; n33 < 16; n33++)
      this.elements[n33] = e11[n33 + t19];
    return this;
  }
  toArray(e11 = [], t19 = 0) {
    const n33 = this.elements;
    return e11[t19] = n33[0], e11[t19 + 1] = n33[1], e11[t19 + 2] = n33[2], e11[t19 + 3] = n33[3], e11[t19 + 4] = n33[4], e11[t19 + 5] = n33[5], e11[t19 + 6] = n33[6], e11[t19 + 7] = n33[7], e11[t19 + 8] = n33[8], e11[t19 + 9] = n33[9], e11[t19 + 10] = n33[10], e11[t19 + 11] = n33[11], e11[t19 + 12] = n33[12], e11[t19 + 13] = n33[13], e11[t19 + 14] = n33[14], e11[t19 + 15] = n33[15], e11;
  }
};
var Qi = new U9();
var xn3 = new Ve4();
var xd = new U9(0, 0, 0);
var yd = new U9(1, 1, 1);
var Qn3 = new U9();
var wr3 = new U9();
var on3 = new U9();
var Ul = new Ve4();
var kl = new qt3();
var Ds = class _Ds {
  constructor(e11 = 0, t19 = 0, n33 = 0, i27 = _Ds.DEFAULT_ORDER) {
    this.isEuler = true, this._x = e11, this._y = t19, this._z = n33, this._order = i27;
  }
  get x() {
    return this._x;
  }
  set x(e11) {
    this._x = e11, this._onChangeCallback();
  }
  get y() {
    return this._y;
  }
  set y(e11) {
    this._y = e11, this._onChangeCallback();
  }
  get z() {
    return this._z;
  }
  set z(e11) {
    this._z = e11, this._onChangeCallback();
  }
  get order() {
    return this._order;
  }
  set order(e11) {
    this._order = e11, this._onChangeCallback();
  }
  set(e11, t19, n33, i27 = this._order) {
    return this._x = e11, this._y = t19, this._z = n33, this._order = i27, this._onChangeCallback(), this;
  }
  clone() {
    return new this.constructor(this._x, this._y, this._z, this._order);
  }
  copy(e11) {
    return this._x = e11._x, this._y = e11._y, this._z = e11._z, this._order = e11._order, this._onChangeCallback(), this;
  }
  setFromRotationMatrix(e11, t19 = this._order, n33 = true) {
    const i27 = e11.elements, s18 = i27[0], r24 = i27[4], o13 = i27[8], c27 = i27[1], l26 = i27[5], u35 = i27[9], h26 = i27[2], d34 = i27[6], p26 = i27[10];
    switch (t19) {
      case "XYZ":
        this._y = Math.asin(Wt4(o13, -1, 1)), Math.abs(o13) < 0.9999999 ? (this._x = Math.atan2(-u35, p26), this._z = Math.atan2(-r24, s18)) : (this._x = Math.atan2(d34, l26), this._z = 0);
        break;
      case "YXZ":
        this._x = Math.asin(-Wt4(u35, -1, 1)), Math.abs(u35) < 0.9999999 ? (this._y = Math.atan2(o13, p26), this._z = Math.atan2(c27, l26)) : (this._y = Math.atan2(-h26, s18), this._z = 0);
        break;
      case "ZXY":
        this._x = Math.asin(Wt4(d34, -1, 1)), Math.abs(d34) < 0.9999999 ? (this._y = Math.atan2(-h26, p26), this._z = Math.atan2(-r24, l26)) : (this._y = 0, this._z = Math.atan2(c27, s18));
        break;
      case "ZYX":
        this._y = Math.asin(-Wt4(h26, -1, 1)), Math.abs(h26) < 0.9999999 ? (this._x = Math.atan2(d34, p26), this._z = Math.atan2(c27, s18)) : (this._x = 0, this._z = Math.atan2(-r24, l26));
        break;
      case "YZX":
        this._z = Math.asin(Wt4(c27, -1, 1)), Math.abs(c27) < 0.9999999 ? (this._x = Math.atan2(-u35, l26), this._y = Math.atan2(-h26, s18)) : (this._x = 0, this._y = Math.atan2(o13, p26));
        break;
      case "XZY":
        this._z = Math.asin(-Wt4(r24, -1, 1)), Math.abs(r24) < 0.9999999 ? (this._x = Math.atan2(d34, l26), this._y = Math.atan2(o13, s18)) : (this._x = Math.atan2(-u35, p26), this._y = 0);
        break;
      default:
        console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: " + t19);
    }
    return this._order = t19, n33 === true && this._onChangeCallback(), this;
  }
  setFromQuaternion(e11, t19, n33) {
    return Ul.makeRotationFromQuaternion(e11), this.setFromRotationMatrix(Ul, t19, n33);
  }
  setFromVector3(e11, t19 = this._order) {
    return this.set(e11.x, e11.y, e11.z, t19);
  }
  reorder(e11) {
    return kl.setFromEuler(this), this.setFromQuaternion(kl, e11);
  }
  equals(e11) {
    return e11._x === this._x && e11._y === this._y && e11._z === this._z && e11._order === this._order;
  }
  fromArray(e11) {
    return this._x = e11[0], this._y = e11[1], this._z = e11[2], e11[3] !== void 0 && (this._order = e11[3]), this._onChangeCallback(), this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this._x, e11[t19 + 1] = this._y, e11[t19 + 2] = this._z, e11[t19 + 3] = this._order, e11;
  }
  _onChange(e11) {
    return this._onChangeCallback = e11, this;
  }
  _onChangeCallback() {
  }
  *[Symbol.iterator]() {
    yield this._x, yield this._y, yield this._z, yield this._order;
  }
};
Ds.DEFAULT_ORDER = "XYZ";
var hu = class {
  constructor() {
    this.mask = 1;
  }
  set(e11) {
    this.mask = (1 << e11 | 0) >>> 0;
  }
  enable(e11) {
    this.mask |= 1 << e11 | 0;
  }
  enableAll() {
    this.mask = -1;
  }
  toggle(e11) {
    this.mask ^= 1 << e11 | 0;
  }
  disable(e11) {
    this.mask &= ~(1 << e11 | 0);
  }
  disableAll() {
    this.mask = 0;
  }
  test(e11) {
    return (this.mask & e11.mask) !== 0;
  }
  isEnabled(e11) {
    return (this.mask & (1 << e11 | 0)) !== 0;
  }
};
var vd = 0;
var Ol = new U9();
var es = new qt3();
var zn3 = new Ve4();
var Tr3 = new U9();
var Vs = new U9();
var bd = new U9();
var Md = new qt3();
var Fl = new U9(1, 0, 0);
var zl = new U9(0, 1, 0);
var Bl = new U9(0, 0, 1);
var Sd = { type: "added" };
var Vl = { type: "removed" };
var _t4 = class __t extends Ni3 {
  constructor() {
    super(), this.isObject3D = true, Object.defineProperty(this, "id", { value: vd++ }), this.uuid = Sn3(), this.name = "", this.type = "Object3D", this.parent = null, this.children = [], this.up = __t.DEFAULT_UP.clone();
    const e11 = new U9(), t19 = new Ds(), n33 = new qt3(), i27 = new U9(1, 1, 1);
    function s18() {
      n33.setFromEuler(t19, false);
    }
    function r24() {
      t19.setFromQuaternion(n33, void 0, false);
    }
    t19._onChange(s18), n33._onChange(r24), Object.defineProperties(this, {
      position: {
        configurable: true,
        enumerable: true,
        value: e11
      },
      rotation: {
        configurable: true,
        enumerable: true,
        value: t19
      },
      quaternion: {
        configurable: true,
        enumerable: true,
        value: n33
      },
      scale: {
        configurable: true,
        enumerable: true,
        value: i27
      },
      modelViewMatrix: {
        value: new Ve4()
      },
      normalMatrix: {
        value: new Qe4()
      }
    }), this.matrix = new Ve4(), this.matrixWorld = new Ve4(), this.matrixAutoUpdate = __t.DEFAULT_MATRIX_AUTO_UPDATE, this.matrixWorldNeedsUpdate = false, this.matrixWorldAutoUpdate = __t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE, this.layers = new hu(), this.visible = true, this.castShadow = false, this.receiveShadow = false, this.frustumCulled = true, this.renderOrder = 0, this.animations = [], this.userData = {};
  }
  onBeforeRender() {
  }
  onAfterRender() {
  }
  applyMatrix4(e11) {
    this.matrixAutoUpdate && this.updateMatrix(), this.matrix.premultiply(e11), this.matrix.decompose(this.position, this.quaternion, this.scale);
  }
  applyQuaternion(e11) {
    return this.quaternion.premultiply(e11), this;
  }
  setRotationFromAxisAngle(e11, t19) {
    this.quaternion.setFromAxisAngle(e11, t19);
  }
  setRotationFromEuler(e11) {
    this.quaternion.setFromEuler(e11, true);
  }
  setRotationFromMatrix(e11) {
    this.quaternion.setFromRotationMatrix(e11);
  }
  setRotationFromQuaternion(e11) {
    this.quaternion.copy(e11);
  }
  rotateOnAxis(e11, t19) {
    return es.setFromAxisAngle(e11, t19), this.quaternion.multiply(es), this;
  }
  rotateOnWorldAxis(e11, t19) {
    return es.setFromAxisAngle(e11, t19), this.quaternion.premultiply(es), this;
  }
  rotateX(e11) {
    return this.rotateOnAxis(Fl, e11);
  }
  rotateY(e11) {
    return this.rotateOnAxis(zl, e11);
  }
  rotateZ(e11) {
    return this.rotateOnAxis(Bl, e11);
  }
  translateOnAxis(e11, t19) {
    return Ol.copy(e11).applyQuaternion(this.quaternion), this.position.add(Ol.multiplyScalar(t19)), this;
  }
  translateX(e11) {
    return this.translateOnAxis(Fl, e11);
  }
  translateY(e11) {
    return this.translateOnAxis(zl, e11);
  }
  translateZ(e11) {
    return this.translateOnAxis(Bl, e11);
  }
  localToWorld(e11) {
    return this.updateWorldMatrix(true, false), e11.applyMatrix4(this.matrixWorld);
  }
  worldToLocal(e11) {
    return this.updateWorldMatrix(true, false), e11.applyMatrix4(zn3.copy(this.matrixWorld).invert());
  }
  lookAt(e11, t19, n33) {
    e11.isVector3 ? Tr3.copy(e11) : Tr3.set(e11, t19, n33);
    const i27 = this.parent;
    this.updateWorldMatrix(true, false), Vs.setFromMatrixPosition(this.matrixWorld), this.isCamera || this.isLight ? zn3.lookAt(Vs, Tr3, this.up) : zn3.lookAt(Tr3, Vs, this.up), this.quaternion.setFromRotationMatrix(zn3), i27 && (zn3.extractRotation(i27.matrixWorld), es.setFromRotationMatrix(zn3), this.quaternion.premultiply(es.invert()));
  }
  add(e11) {
    if (arguments.length > 1) {
      for (let t19 = 0; t19 < arguments.length; t19++)
        this.add(arguments[t19]);
      return this;
    }
    return e11 === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", e11), this) : (e11 && e11.isObject3D ? (e11.parent !== null && e11.parent.remove(e11), e11.parent = this, this.children.push(e11), e11.dispatchEvent(Sd)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", e11), this);
  }
  remove(e11) {
    if (arguments.length > 1) {
      for (let n33 = 0; n33 < arguments.length; n33++)
        this.remove(arguments[n33]);
      return this;
    }
    const t19 = this.children.indexOf(e11);
    return t19 !== -1 && (e11.parent = null, this.children.splice(t19, 1), e11.dispatchEvent(Vl)), this;
  }
  removeFromParent() {
    const e11 = this.parent;
    return e11 !== null && e11.remove(this), this;
  }
  clear() {
    for (let e11 = 0; e11 < this.children.length; e11++) {
      const t19 = this.children[e11];
      t19.parent = null, t19.dispatchEvent(Vl);
    }
    return this.children.length = 0, this;
  }
  attach(e11) {
    return this.updateWorldMatrix(true, false), zn3.copy(this.matrixWorld).invert(), e11.parent !== null && (e11.parent.updateWorldMatrix(true, false), zn3.multiply(e11.parent.matrixWorld)), e11.applyMatrix4(zn3), this.add(e11), e11.updateWorldMatrix(false, true), this;
  }
  getObjectById(e11) {
    return this.getObjectByProperty("id", e11);
  }
  getObjectByName(e11) {
    return this.getObjectByProperty("name", e11);
  }
  getObjectByProperty(e11, t19) {
    if (this[e11] === t19)
      return this;
    for (let n33 = 0, i27 = this.children.length; n33 < i27; n33++) {
      const r24 = this.children[n33].getObjectByProperty(e11, t19);
      if (r24 !== void 0)
        return r24;
    }
  }
  getObjectsByProperty(e11, t19) {
    let n33 = [];
    this[e11] === t19 && n33.push(this);
    for (let i27 = 0, s18 = this.children.length; i27 < s18; i27++) {
      const r24 = this.children[i27].getObjectsByProperty(e11, t19);
      r24.length > 0 && (n33 = n33.concat(r24));
    }
    return n33;
  }
  getWorldPosition(e11) {
    return this.updateWorldMatrix(true, false), e11.setFromMatrixPosition(this.matrixWorld);
  }
  getWorldQuaternion(e11) {
    return this.updateWorldMatrix(true, false), this.matrixWorld.decompose(Vs, e11, bd), e11;
  }
  getWorldScale(e11) {
    return this.updateWorldMatrix(true, false), this.matrixWorld.decompose(Vs, Md, e11), e11;
  }
  getWorldDirection(e11) {
    this.updateWorldMatrix(true, false);
    const t19 = this.matrixWorld.elements;
    return e11.set(t19[8], t19[9], t19[10]).normalize();
  }
  raycast() {
  }
  traverse(e11) {
    e11(this);
    const t19 = this.children;
    for (let n33 = 0, i27 = t19.length; n33 < i27; n33++)
      t19[n33].traverse(e11);
  }
  traverseVisible(e11) {
    if (this.visible === false)
      return;
    e11(this);
    const t19 = this.children;
    for (let n33 = 0, i27 = t19.length; n33 < i27; n33++)
      t19[n33].traverseVisible(e11);
  }
  traverseAncestors(e11) {
    const t19 = this.parent;
    t19 !== null && (e11(t19), t19.traverseAncestors(e11));
  }
  updateMatrix() {
    this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = true;
  }
  updateMatrixWorld(e11) {
    this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || e11) && (this.parent === null ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = false, e11 = true);
    const t19 = this.children;
    for (let n33 = 0, i27 = t19.length; n33 < i27; n33++) {
      const s18 = t19[n33];
      (s18.matrixWorldAutoUpdate === true || e11 === true) && s18.updateMatrixWorld(e11);
    }
  }
  updateWorldMatrix(e11, t19) {
    const n33 = this.parent;
    if (e11 === true && n33 !== null && n33.matrixWorldAutoUpdate === true && n33.updateWorldMatrix(true, false), this.matrixAutoUpdate && this.updateMatrix(), this.parent === null ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), t19 === true) {
      const i27 = this.children;
      for (let s18 = 0, r24 = i27.length; s18 < r24; s18++) {
        const o13 = i27[s18];
        o13.matrixWorldAutoUpdate === true && o13.updateWorldMatrix(false, true);
      }
    }
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string", n33 = {};
    t19 && (e11 = {
      geometries: {},
      materials: {},
      textures: {},
      images: {},
      shapes: {},
      skeletons: {},
      animations: {},
      nodes: {}
    }, n33.metadata = {
      version: 4.5,
      type: "Object",
      generator: "Object3D.toJSON"
    });
    const i27 = {};
    i27.uuid = this.uuid, i27.type = this.type, this.name !== "" && (i27.name = this.name), this.castShadow === true && (i27.castShadow = true), this.receiveShadow === true && (i27.receiveShadow = true), this.visible === false && (i27.visible = false), this.frustumCulled === false && (i27.frustumCulled = false), this.renderOrder !== 0 && (i27.renderOrder = this.renderOrder), Object.keys(this.userData).length > 0 && (i27.userData = this.userData), i27.layers = this.layers.mask, i27.matrix = this.matrix.toArray(), i27.up = this.up.toArray(), this.matrixAutoUpdate === false && (i27.matrixAutoUpdate = false), this.isInstancedMesh && (i27.type = "InstancedMesh", i27.count = this.count, i27.instanceMatrix = this.instanceMatrix.toJSON(), this.instanceColor !== null && (i27.instanceColor = this.instanceColor.toJSON()));
    function s18(o13, c27) {
      return o13[c27.uuid] === void 0 && (o13[c27.uuid] = c27.toJSON(e11)), c27.uuid;
    }
    if (this.isScene)
      this.background && (this.background.isColor ? i27.background = this.background.toJSON() : this.background.isTexture && (i27.background = this.background.toJSON(e11).uuid)), this.environment && this.environment.isTexture && this.environment.isRenderTargetTexture !== true && (i27.environment = this.environment.toJSON(e11).uuid);
    else if (this.isMesh || this.isLine || this.isPoints) {
      i27.geometry = s18(e11.geometries, this.geometry);
      const o13 = this.geometry.parameters;
      if (o13 !== void 0 && o13.shapes !== void 0) {
        const c27 = o13.shapes;
        if (Array.isArray(c27))
          for (let l26 = 0, u35 = c27.length; l26 < u35; l26++) {
            const h26 = c27[l26];
            s18(e11.shapes, h26);
          }
        else
          s18(e11.shapes, c27);
      }
    }
    if (this.isSkinnedMesh && (i27.bindMode = this.bindMode, i27.bindMatrix = this.bindMatrix.toArray(), this.skeleton !== void 0 && (s18(e11.skeletons, this.skeleton), i27.skeleton = this.skeleton.uuid)), this.material !== void 0)
      if (Array.isArray(this.material)) {
        const o13 = [];
        for (let c27 = 0, l26 = this.material.length; c27 < l26; c27++)
          o13.push(s18(e11.materials, this.material[c27]));
        i27.material = o13;
      } else
        i27.material = s18(e11.materials, this.material);
    if (this.children.length > 0) {
      i27.children = [];
      for (let o13 = 0; o13 < this.children.length; o13++)
        i27.children.push(this.children[o13].toJSON(e11).object);
    }
    if (this.animations.length > 0) {
      i27.animations = [];
      for (let o13 = 0; o13 < this.animations.length; o13++) {
        const c27 = this.animations[o13];
        i27.animations.push(s18(e11.animations, c27));
      }
    }
    if (t19) {
      const o13 = r24(e11.geometries), c27 = r24(e11.materials), l26 = r24(e11.textures), u35 = r24(e11.images), h26 = r24(e11.shapes), d34 = r24(e11.skeletons), p26 = r24(e11.animations), g32 = r24(e11.nodes);
      o13.length > 0 && (n33.geometries = o13), c27.length > 0 && (n33.materials = c27), l26.length > 0 && (n33.textures = l26), u35.length > 0 && (n33.images = u35), h26.length > 0 && (n33.shapes = h26), d34.length > 0 && (n33.skeletons = d34), p26.length > 0 && (n33.animations = p26), g32.length > 0 && (n33.nodes = g32);
    }
    return n33.object = i27, n33;
    function r24(o13) {
      const c27 = [];
      for (const l26 in o13) {
        const u35 = o13[l26];
        delete u35.metadata, c27.push(u35);
      }
      return c27;
    }
  }
  clone(e11) {
    return new this.constructor().copy(this, e11);
  }
  copy(e11, t19 = true) {
    if (this.name = e11.name, this.up.copy(e11.up), this.position.copy(e11.position), this.rotation.order = e11.rotation.order, this.quaternion.copy(e11.quaternion), this.scale.copy(e11.scale), this.matrix.copy(e11.matrix), this.matrixWorld.copy(e11.matrixWorld), this.matrixAutoUpdate = e11.matrixAutoUpdate, this.matrixWorldNeedsUpdate = e11.matrixWorldNeedsUpdate, this.matrixWorldAutoUpdate = e11.matrixWorldAutoUpdate, this.layers.mask = e11.layers.mask, this.visible = e11.visible, this.castShadow = e11.castShadow, this.receiveShadow = e11.receiveShadow, this.frustumCulled = e11.frustumCulled, this.renderOrder = e11.renderOrder, this.userData = JSON.parse(JSON.stringify(e11.userData)), t19 === true)
      for (let n33 = 0; n33 < e11.children.length; n33++) {
        const i27 = e11.children[n33];
        this.add(i27.clone());
      }
    return this;
  }
};
_t4.DEFAULT_UP = new U9(0, 1, 0);
_t4.DEFAULT_MATRIX_AUTO_UPDATE = true;
_t4.DEFAULT_MATRIX_WORLD_AUTO_UPDATE = true;
var yn3 = new U9();
var Bn3 = new U9();
var Ho = new U9();
var Vn3 = new U9();
var ts = new U9();
var ns = new U9();
var Gl = new U9();
var Wo = new U9();
var jo = new U9();
var qo = new U9();
var Ar3 = false;
var dn3 = class _dn {
  constructor(e11 = new U9(), t19 = new U9(), n33 = new U9()) {
    this.a = e11, this.b = t19, this.c = n33;
  }
  static getNormal(e11, t19, n33, i27) {
    i27.subVectors(n33, t19), yn3.subVectors(e11, t19), i27.cross(yn3);
    const s18 = i27.lengthSq();
    return s18 > 0 ? i27.multiplyScalar(1 / Math.sqrt(s18)) : i27.set(0, 0, 0);
  }
  // static/instance method to calculate barycentric coordinates
  // based on: http://www.blackpawn.com/texts/pointinpoly/default.html
  static getBarycoord(e11, t19, n33, i27, s18) {
    yn3.subVectors(i27, t19), Bn3.subVectors(n33, t19), Ho.subVectors(e11, t19);
    const r24 = yn3.dot(yn3), o13 = yn3.dot(Bn3), c27 = yn3.dot(Ho), l26 = Bn3.dot(Bn3), u35 = Bn3.dot(Ho), h26 = r24 * l26 - o13 * o13;
    if (h26 === 0)
      return s18.set(-2, -1, -1);
    const d34 = 1 / h26, p26 = (l26 * c27 - o13 * u35) * d34, g32 = (r24 * u35 - o13 * c27) * d34;
    return s18.set(1 - p26 - g32, g32, p26);
  }
  static containsPoint(e11, t19, n33, i27) {
    return this.getBarycoord(e11, t19, n33, i27, Vn3), Vn3.x >= 0 && Vn3.y >= 0 && Vn3.x + Vn3.y <= 1;
  }
  static getUV(e11, t19, n33, i27, s18, r24, o13, c27) {
    return Ar3 === false && (console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."), Ar3 = true), this.getInterpolation(e11, t19, n33, i27, s18, r24, o13, c27);
  }
  static getInterpolation(e11, t19, n33, i27, s18, r24, o13, c27) {
    return this.getBarycoord(e11, t19, n33, i27, Vn3), c27.setScalar(0), c27.addScaledVector(s18, Vn3.x), c27.addScaledVector(r24, Vn3.y), c27.addScaledVector(o13, Vn3.z), c27;
  }
  static isFrontFacing(e11, t19, n33, i27) {
    return yn3.subVectors(n33, t19), Bn3.subVectors(e11, t19), yn3.cross(Bn3).dot(i27) < 0;
  }
  set(e11, t19, n33) {
    return this.a.copy(e11), this.b.copy(t19), this.c.copy(n33), this;
  }
  setFromPointsAndIndices(e11, t19, n33, i27) {
    return this.a.copy(e11[t19]), this.b.copy(e11[n33]), this.c.copy(e11[i27]), this;
  }
  setFromAttributeAndIndices(e11, t19, n33, i27) {
    return this.a.fromBufferAttribute(e11, t19), this.b.fromBufferAttribute(e11, n33), this.c.fromBufferAttribute(e11, i27), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    return this.a.copy(e11.a), this.b.copy(e11.b), this.c.copy(e11.c), this;
  }
  getArea() {
    return yn3.subVectors(this.c, this.b), Bn3.subVectors(this.a, this.b), yn3.cross(Bn3).length() * 0.5;
  }
  getMidpoint(e11) {
    return e11.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3);
  }
  getNormal(e11) {
    return _dn.getNormal(this.a, this.b, this.c, e11);
  }
  getPlane(e11) {
    return e11.setFromCoplanarPoints(this.a, this.b, this.c);
  }
  getBarycoord(e11, t19) {
    return _dn.getBarycoord(e11, this.a, this.b, this.c, t19);
  }
  getUV(e11, t19, n33, i27, s18) {
    return Ar3 === false && (console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."), Ar3 = true), _dn.getInterpolation(e11, this.a, this.b, this.c, t19, n33, i27, s18);
  }
  getInterpolation(e11, t19, n33, i27, s18) {
    return _dn.getInterpolation(e11, this.a, this.b, this.c, t19, n33, i27, s18);
  }
  containsPoint(e11) {
    return _dn.containsPoint(e11, this.a, this.b, this.c);
  }
  isFrontFacing(e11) {
    return _dn.isFrontFacing(this.a, this.b, this.c, e11);
  }
  intersectsBox(e11) {
    return e11.intersectsTriangle(this);
  }
  closestPointToPoint(e11, t19) {
    const n33 = this.a, i27 = this.b, s18 = this.c;
    let r24, o13;
    ts.subVectors(i27, n33), ns.subVectors(s18, n33), Wo.subVectors(e11, n33);
    const c27 = ts.dot(Wo), l26 = ns.dot(Wo);
    if (c27 <= 0 && l26 <= 0)
      return t19.copy(n33);
    jo.subVectors(e11, i27);
    const u35 = ts.dot(jo), h26 = ns.dot(jo);
    if (u35 >= 0 && h26 <= u35)
      return t19.copy(i27);
    const d34 = c27 * h26 - u35 * l26;
    if (d34 <= 0 && c27 >= 0 && u35 <= 0)
      return r24 = c27 / (c27 - u35), t19.copy(n33).addScaledVector(ts, r24);
    qo.subVectors(e11, s18);
    const p26 = ts.dot(qo), g32 = ns.dot(qo);
    if (g32 >= 0 && p26 <= g32)
      return t19.copy(s18);
    const y34 = p26 * l26 - c27 * g32;
    if (y34 <= 0 && l26 >= 0 && g32 <= 0)
      return o13 = l26 / (l26 - g32), t19.copy(n33).addScaledVector(ns, o13);
    const m34 = u35 * g32 - p26 * h26;
    if (m34 <= 0 && h26 - u35 >= 0 && p26 - g32 >= 0)
      return Gl.subVectors(s18, i27), o13 = (h26 - u35) / (h26 - u35 + (p26 - g32)), t19.copy(i27).addScaledVector(Gl, o13);
    const f40 = 1 / (m34 + y34 + d34);
    return r24 = y34 * f40, o13 = d34 * f40, t19.copy(n33).addScaledVector(ts, r24).addScaledVector(ns, o13);
  }
  equals(e11) {
    return e11.a.equals(this.a) && e11.b.equals(this.b) && e11.c.equals(this.c);
  }
};
var wd = 0;
var mn3 = class extends Ni3 {
  constructor() {
    super(), this.isMaterial = true, Object.defineProperty(this, "id", { value: wd++ }), this.uuid = Sn3(), this.name = "", this.type = "Material", this.blending = gs, this.side = Pn3, this.vertexColors = false, this.opacity = 1, this.transparent = false, this.blendSrc = $c, this.blendDst = Qc, this.blendEquation = fs, this.blendSrcAlpha = null, this.blendDstAlpha = null, this.blendEquationAlpha = null, this.depthFunc = ha, this.depthTest = true, this.depthWrite = true, this.stencilWriteMask = 255, this.stencilFunc = Yh, this.stencilRef = 0, this.stencilFuncMask = 255, this.stencilFail = Do, this.stencilZFail = Do, this.stencilZPass = Do, this.stencilWrite = false, this.clippingPlanes = null, this.clipIntersection = false, this.clipShadows = false, this.shadowSide = null, this.colorWrite = true, this.precision = null, this.polygonOffset = false, this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.dithering = false, this.alphaToCoverage = false, this.premultipliedAlpha = false, this.forceSinglePass = false, this.visible = true, this.toneMapped = true, this.userData = {}, this.version = 0, this._alphaTest = 0;
  }
  get alphaTest() {
    return this._alphaTest;
  }
  set alphaTest(e11) {
    this._alphaTest > 0 != e11 > 0 && this.version++, this._alphaTest = e11;
  }
  onBuild() {
  }
  onBeforeRender() {
  }
  onBeforeCompile() {
  }
  customProgramCacheKey() {
    return this.onBeforeCompile.toString();
  }
  setValues(e11) {
    if (e11 !== void 0)
      for (const t19 in e11) {
        const n33 = e11[t19];
        if (n33 === void 0) {
          console.warn(`THREE.Material: parameter '${t19}' has value of undefined.`);
          continue;
        }
        const i27 = this[t19];
        if (i27 === void 0) {
          console.warn(`THREE.Material: '${t19}' is not a property of THREE.${this.type}.`);
          continue;
        }
        i27 && i27.isColor ? i27.set(n33) : i27 && i27.isVector3 && n33 && n33.isVector3 ? i27.copy(n33) : this[t19] = n33;
      }
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string";
    t19 && (e11 = {
      textures: {},
      images: {}
    });
    const n33 = {
      metadata: {
        version: 4.5,
        type: "Material",
        generator: "Material.toJSON"
      }
    };
    n33.uuid = this.uuid, n33.type = this.type, this.name !== "" && (n33.name = this.name), this.color && this.color.isColor && (n33.color = this.color.getHex()), this.roughness !== void 0 && (n33.roughness = this.roughness), this.metalness !== void 0 && (n33.metalness = this.metalness), this.sheen !== void 0 && (n33.sheen = this.sheen), this.sheenColor && this.sheenColor.isColor && (n33.sheenColor = this.sheenColor.getHex()), this.sheenRoughness !== void 0 && (n33.sheenRoughness = this.sheenRoughness), this.emissive && this.emissive.isColor && (n33.emissive = this.emissive.getHex()), this.emissiveIntensity && this.emissiveIntensity !== 1 && (n33.emissiveIntensity = this.emissiveIntensity), this.specular && this.specular.isColor && (n33.specular = this.specular.getHex()), this.specularIntensity !== void 0 && (n33.specularIntensity = this.specularIntensity), this.specularColor && this.specularColor.isColor && (n33.specularColor = this.specularColor.getHex()), this.shininess !== void 0 && (n33.shininess = this.shininess), this.clearcoat !== void 0 && (n33.clearcoat = this.clearcoat), this.clearcoatRoughness !== void 0 && (n33.clearcoatRoughness = this.clearcoatRoughness), this.clearcoatMap && this.clearcoatMap.isTexture && (n33.clearcoatMap = this.clearcoatMap.toJSON(e11).uuid), this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture && (n33.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON(e11).uuid), this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture && (n33.clearcoatNormalMap = this.clearcoatNormalMap.toJSON(e11).uuid, n33.clearcoatNormalScale = this.clearcoatNormalScale.toArray()), this.iridescence !== void 0 && (n33.iridescence = this.iridescence), this.iridescenceIOR !== void 0 && (n33.iridescenceIOR = this.iridescenceIOR), this.iridescenceThicknessRange !== void 0 && (n33.iridescenceThicknessRange = this.iridescenceThicknessRange), this.iridescenceMap && this.iridescenceMap.isTexture && (n33.iridescenceMap = this.iridescenceMap.toJSON(e11).uuid), this.iridescenceThicknessMap && this.iridescenceThicknessMap.isTexture && (n33.iridescenceThicknessMap = this.iridescenceThicknessMap.toJSON(e11).uuid), this.map && this.map.isTexture && (n33.map = this.map.toJSON(e11).uuid), this.matcap && this.matcap.isTexture && (n33.matcap = this.matcap.toJSON(e11).uuid), this.alphaMap && this.alphaMap.isTexture && (n33.alphaMap = this.alphaMap.toJSON(e11).uuid), this.lightMap && this.lightMap.isTexture && (n33.lightMap = this.lightMap.toJSON(e11).uuid, n33.lightMapIntensity = this.lightMapIntensity), this.aoMap && this.aoMap.isTexture && (n33.aoMap = this.aoMap.toJSON(e11).uuid, n33.aoMapIntensity = this.aoMapIntensity), this.bumpMap && this.bumpMap.isTexture && (n33.bumpMap = this.bumpMap.toJSON(e11).uuid, n33.bumpScale = this.bumpScale), this.normalMap && this.normalMap.isTexture && (n33.normalMap = this.normalMap.toJSON(e11).uuid, n33.normalMapType = this.normalMapType, n33.normalScale = this.normalScale.toArray()), this.displacementMap && this.displacementMap.isTexture && (n33.displacementMap = this.displacementMap.toJSON(e11).uuid, n33.displacementScale = this.displacementScale, n33.displacementBias = this.displacementBias), this.roughnessMap && this.roughnessMap.isTexture && (n33.roughnessMap = this.roughnessMap.toJSON(e11).uuid), this.metalnessMap && this.metalnessMap.isTexture && (n33.metalnessMap = this.metalnessMap.toJSON(e11).uuid), this.emissiveMap && this.emissiveMap.isTexture && (n33.emissiveMap = this.emissiveMap.toJSON(e11).uuid), this.specularMap && this.specularMap.isTexture && (n33.specularMap = this.specularMap.toJSON(e11).uuid), this.specularIntensityMap && this.specularIntensityMap.isTexture && (n33.specularIntensityMap = this.specularIntensityMap.toJSON(e11).uuid), this.specularColorMap && this.specularColorMap.isTexture && (n33.specularColorMap = this.specularColorMap.toJSON(e11).uuid), this.envMap && this.envMap.isTexture && (n33.envMap = this.envMap.toJSON(e11).uuid, this.combine !== void 0 && (n33.combine = this.combine)), this.envMapIntensity !== void 0 && (n33.envMapIntensity = this.envMapIntensity), this.reflectivity !== void 0 && (n33.reflectivity = this.reflectivity), this.refractionRatio !== void 0 && (n33.refractionRatio = this.refractionRatio), this.gradientMap && this.gradientMap.isTexture && (n33.gradientMap = this.gradientMap.toJSON(e11).uuid), this.transmission !== void 0 && (n33.transmission = this.transmission), this.transmissionMap && this.transmissionMap.isTexture && (n33.transmissionMap = this.transmissionMap.toJSON(e11).uuid), this.thickness !== void 0 && (n33.thickness = this.thickness), this.thicknessMap && this.thicknessMap.isTexture && (n33.thicknessMap = this.thicknessMap.toJSON(e11).uuid), this.attenuationDistance !== void 0 && this.attenuationDistance !== 1 / 0 && (n33.attenuationDistance = this.attenuationDistance), this.attenuationColor !== void 0 && (n33.attenuationColor = this.attenuationColor.getHex()), this.size !== void 0 && (n33.size = this.size), this.shadowSide !== null && (n33.shadowSide = this.shadowSide), this.sizeAttenuation !== void 0 && (n33.sizeAttenuation = this.sizeAttenuation), this.blending !== gs && (n33.blending = this.blending), this.side !== Pn3 && (n33.side = this.side), this.vertexColors && (n33.vertexColors = true), this.opacity < 1 && (n33.opacity = this.opacity), this.transparent === true && (n33.transparent = this.transparent), n33.depthFunc = this.depthFunc, n33.depthTest = this.depthTest, n33.depthWrite = this.depthWrite, n33.colorWrite = this.colorWrite, n33.stencilWrite = this.stencilWrite, n33.stencilWriteMask = this.stencilWriteMask, n33.stencilFunc = this.stencilFunc, n33.stencilRef = this.stencilRef, n33.stencilFuncMask = this.stencilFuncMask, n33.stencilFail = this.stencilFail, n33.stencilZFail = this.stencilZFail, n33.stencilZPass = this.stencilZPass, this.rotation !== void 0 && this.rotation !== 0 && (n33.rotation = this.rotation), this.polygonOffset === true && (n33.polygonOffset = true), this.polygonOffsetFactor !== 0 && (n33.polygonOffsetFactor = this.polygonOffsetFactor), this.polygonOffsetUnits !== 0 && (n33.polygonOffsetUnits = this.polygonOffsetUnits), this.linewidth !== void 0 && this.linewidth !== 1 && (n33.linewidth = this.linewidth), this.dashSize !== void 0 && (n33.dashSize = this.dashSize), this.gapSize !== void 0 && (n33.gapSize = this.gapSize), this.scale !== void 0 && (n33.scale = this.scale), this.dithering === true && (n33.dithering = true), this.alphaTest > 0 && (n33.alphaTest = this.alphaTest), this.alphaToCoverage === true && (n33.alphaToCoverage = this.alphaToCoverage), this.premultipliedAlpha === true && (n33.premultipliedAlpha = this.premultipliedAlpha), this.forceSinglePass === true && (n33.forceSinglePass = this.forceSinglePass), this.wireframe === true && (n33.wireframe = this.wireframe), this.wireframeLinewidth > 1 && (n33.wireframeLinewidth = this.wireframeLinewidth), this.wireframeLinecap !== "round" && (n33.wireframeLinecap = this.wireframeLinecap), this.wireframeLinejoin !== "round" && (n33.wireframeLinejoin = this.wireframeLinejoin), this.flatShading === true && (n33.flatShading = this.flatShading), this.visible === false && (n33.visible = false), this.toneMapped === false && (n33.toneMapped = false), this.fog === false && (n33.fog = false), Object.keys(this.userData).length > 0 && (n33.userData = this.userData);
    function i27(s18) {
      const r24 = [];
      for (const o13 in s18) {
        const c27 = s18[o13];
        delete c27.metadata, r24.push(c27);
      }
      return r24;
    }
    if (t19) {
      const s18 = i27(e11.textures), r24 = i27(e11.images);
      s18.length > 0 && (n33.textures = s18), r24.length > 0 && (n33.images = r24);
    }
    return n33;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    this.name = e11.name, this.blending = e11.blending, this.side = e11.side, this.vertexColors = e11.vertexColors, this.opacity = e11.opacity, this.transparent = e11.transparent, this.blendSrc = e11.blendSrc, this.blendDst = e11.blendDst, this.blendEquation = e11.blendEquation, this.blendSrcAlpha = e11.blendSrcAlpha, this.blendDstAlpha = e11.blendDstAlpha, this.blendEquationAlpha = e11.blendEquationAlpha, this.depthFunc = e11.depthFunc, this.depthTest = e11.depthTest, this.depthWrite = e11.depthWrite, this.stencilWriteMask = e11.stencilWriteMask, this.stencilFunc = e11.stencilFunc, this.stencilRef = e11.stencilRef, this.stencilFuncMask = e11.stencilFuncMask, this.stencilFail = e11.stencilFail, this.stencilZFail = e11.stencilZFail, this.stencilZPass = e11.stencilZPass, this.stencilWrite = e11.stencilWrite;
    const t19 = e11.clippingPlanes;
    let n33 = null;
    if (t19 !== null) {
      const i27 = t19.length;
      n33 = new Array(i27);
      for (let s18 = 0; s18 !== i27; ++s18)
        n33[s18] = t19[s18].clone();
    }
    return this.clippingPlanes = n33, this.clipIntersection = e11.clipIntersection, this.clipShadows = e11.clipShadows, this.shadowSide = e11.shadowSide, this.colorWrite = e11.colorWrite, this.precision = e11.precision, this.polygonOffset = e11.polygonOffset, this.polygonOffsetFactor = e11.polygonOffsetFactor, this.polygonOffsetUnits = e11.polygonOffsetUnits, this.dithering = e11.dithering, this.alphaTest = e11.alphaTest, this.alphaToCoverage = e11.alphaToCoverage, this.premultipliedAlpha = e11.premultipliedAlpha, this.forceSinglePass = e11.forceSinglePass, this.visible = e11.visible, this.toneMapped = e11.toneMapped, this.userData = JSON.parse(JSON.stringify(e11.userData)), this;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
};
var du = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
var vn3 = { h: 0, s: 0, l: 0 };
var Er3 = { h: 0, s: 0, l: 0 };
function Xo(a22, e11, t19) {
  return t19 < 0 && (t19 += 1), t19 > 1 && (t19 -= 1), t19 < 1 / 6 ? a22 + (e11 - a22) * 6 * t19 : t19 < 1 / 2 ? e11 : t19 < 2 / 3 ? a22 + (e11 - a22) * 6 * (2 / 3 - t19) : a22;
}
var ze4 = class {
  constructor(e11, t19, n33) {
    return this.isColor = true, this.r = 1, this.g = 1, this.b = 1, t19 === void 0 && n33 === void 0 ? this.set(e11) : this.setRGB(e11, t19, n33);
  }
  set(e11) {
    return e11 && e11.isColor ? this.copy(e11) : typeof e11 == "number" ? this.setHex(e11) : typeof e11 == "string" && this.setStyle(e11), this;
  }
  setScalar(e11) {
    return this.r = e11, this.g = e11, this.b = e11, this;
  }
  setHex(e11, t19 = bn3) {
    return e11 = Math.floor(e11), this.r = (e11 >> 16 & 255) / 255, this.g = (e11 >> 8 & 255) / 255, this.b = (e11 & 255) / 255, rn3.toWorkingColorSpace(this, t19), this;
  }
  setRGB(e11, t19, n33, i27 = rn3.workingColorSpace) {
    return this.r = e11, this.g = t19, this.b = n33, rn3.toWorkingColorSpace(this, i27), this;
  }
  setHSL(e11, t19, n33, i27 = rn3.workingColorSpace) {
    if (e11 = Ca(e11, 1), t19 = Wt4(t19, 0, 1), n33 = Wt4(n33, 0, 1), t19 === 0)
      this.r = this.g = this.b = n33;
    else {
      const s18 = n33 <= 0.5 ? n33 * (1 + t19) : n33 + t19 - n33 * t19, r24 = 2 * n33 - s18;
      this.r = Xo(r24, s18, e11 + 1 / 3), this.g = Xo(r24, s18, e11), this.b = Xo(r24, s18, e11 - 1 / 3);
    }
    return rn3.toWorkingColorSpace(this, i27), this;
  }
  setStyle(e11, t19 = bn3) {
    function n33(s18) {
      s18 !== void 0 && parseFloat(s18) < 1 && console.warn("THREE.Color: Alpha component of " + e11 + " will be ignored.");
    }
    let i27;
    if (i27 = /^(\w+)\(([^\)]*)\)/.exec(e11)) {
      let s18;
      const r24 = i27[1], o13 = i27[2];
      switch (r24) {
        case "rgb":
        case "rgba":
          if (s18 = /^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o13))
            return this.r = Math.min(255, parseInt(s18[1], 10)) / 255, this.g = Math.min(255, parseInt(s18[2], 10)) / 255, this.b = Math.min(255, parseInt(s18[3], 10)) / 255, rn3.toWorkingColorSpace(this, t19), n33(s18[4]), this;
          if (s18 = /^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o13))
            return this.r = Math.min(100, parseInt(s18[1], 10)) / 100, this.g = Math.min(100, parseInt(s18[2], 10)) / 100, this.b = Math.min(100, parseInt(s18[3], 10)) / 100, rn3.toWorkingColorSpace(this, t19), n33(s18[4]), this;
          break;
        case "hsl":
        case "hsla":
          if (s18 = /^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o13)) {
            const c27 = parseFloat(s18[1]) / 360, l26 = parseFloat(s18[2]) / 100, u35 = parseFloat(s18[3]) / 100;
            return n33(s18[4]), this.setHSL(c27, l26, u35, t19);
          }
          break;
        default:
          console.warn("THREE.Color: Unknown color model " + e11);
      }
    } else if (i27 = /^\#([A-Fa-f\d]+)$/.exec(e11)) {
      const s18 = i27[1], r24 = s18.length;
      if (r24 === 3)
        return this.setRGB(
          parseInt(s18.charAt(0), 16) / 15,
          parseInt(s18.charAt(1), 16) / 15,
          parseInt(s18.charAt(2), 16) / 15,
          t19
        );
      if (r24 === 6)
        return this.setHex(parseInt(s18, 16), t19);
      console.warn("THREE.Color: Invalid hex color " + e11);
    } else if (e11 && e11.length > 0)
      return this.setColorName(e11, t19);
    return this;
  }
  setColorName(e11, t19 = bn3) {
    const n33 = du[e11.toLowerCase()];
    return n33 !== void 0 ? this.setHex(n33, t19) : console.warn("THREE.Color: Unknown color " + e11), this;
  }
  clone() {
    return new this.constructor(this.r, this.g, this.b);
  }
  copy(e11) {
    return this.r = e11.r, this.g = e11.g, this.b = e11.b, this;
  }
  copySRGBToLinear(e11) {
    return this.r = ys(e11.r), this.g = ys(e11.g), this.b = ys(e11.b), this;
  }
  copyLinearToSRGB(e11) {
    return this.r = Uo(e11.r), this.g = Uo(e11.g), this.b = Uo(e11.b), this;
  }
  convertSRGBToLinear() {
    return this.copySRGBToLinear(this), this;
  }
  convertLinearToSRGB() {
    return this.copyLinearToSRGB(this), this;
  }
  getHex(e11 = bn3) {
    return rn3.fromWorkingColorSpace(Jt3.copy(this), e11), Wt4(Jt3.r * 255, 0, 255) << 16 ^ Wt4(Jt3.g * 255, 0, 255) << 8 ^ Wt4(Jt3.b * 255, 0, 255) << 0;
  }
  getHexString(e11 = bn3) {
    return ("000000" + this.getHex(e11).toString(16)).slice(-6);
  }
  getHSL(e11, t19 = rn3.workingColorSpace) {
    rn3.fromWorkingColorSpace(Jt3.copy(this), t19);
    const n33 = Jt3.r, i27 = Jt3.g, s18 = Jt3.b, r24 = Math.max(n33, i27, s18), o13 = Math.min(n33, i27, s18);
    let c27, l26;
    const u35 = (o13 + r24) / 2;
    if (o13 === r24)
      c27 = 0, l26 = 0;
    else {
      const h26 = r24 - o13;
      switch (l26 = u35 <= 0.5 ? h26 / (r24 + o13) : h26 / (2 - r24 - o13), r24) {
        case n33:
          c27 = (i27 - s18) / h26 + (i27 < s18 ? 6 : 0);
          break;
        case i27:
          c27 = (s18 - n33) / h26 + 2;
          break;
        case s18:
          c27 = (n33 - i27) / h26 + 4;
          break;
      }
      c27 /= 6;
    }
    return e11.h = c27, e11.s = l26, e11.l = u35, e11;
  }
  getRGB(e11, t19 = rn3.workingColorSpace) {
    return rn3.fromWorkingColorSpace(Jt3.copy(this), t19), e11.r = Jt3.r, e11.g = Jt3.g, e11.b = Jt3.b, e11;
  }
  getStyle(e11 = bn3) {
    rn3.fromWorkingColorSpace(Jt3.copy(this), e11);
    const t19 = Jt3.r, n33 = Jt3.g, i27 = Jt3.b;
    return e11 !== bn3 ? `color(${e11} ${t19.toFixed(3)} ${n33.toFixed(3)} ${i27.toFixed(3)})` : `rgb(${t19 * 255 | 0},${n33 * 255 | 0},${i27 * 255 | 0})`;
  }
  offsetHSL(e11, t19, n33) {
    return this.getHSL(vn3), vn3.h += e11, vn3.s += t19, vn3.l += n33, this.setHSL(vn3.h, vn3.s, vn3.l), this;
  }
  add(e11) {
    return this.r += e11.r, this.g += e11.g, this.b += e11.b, this;
  }
  addColors(e11, t19) {
    return this.r = e11.r + t19.r, this.g = e11.g + t19.g, this.b = e11.b + t19.b, this;
  }
  addScalar(e11) {
    return this.r += e11, this.g += e11, this.b += e11, this;
  }
  sub(e11) {
    return this.r = Math.max(0, this.r - e11.r), this.g = Math.max(0, this.g - e11.g), this.b = Math.max(0, this.b - e11.b), this;
  }
  multiply(e11) {
    return this.r *= e11.r, this.g *= e11.g, this.b *= e11.b, this;
  }
  multiplyScalar(e11) {
    return this.r *= e11, this.g *= e11, this.b *= e11, this;
  }
  lerp(e11, t19) {
    return this.r += (e11.r - this.r) * t19, this.g += (e11.g - this.g) * t19, this.b += (e11.b - this.b) * t19, this;
  }
  lerpColors(e11, t19, n33) {
    return this.r = e11.r + (t19.r - e11.r) * n33, this.g = e11.g + (t19.g - e11.g) * n33, this.b = e11.b + (t19.b - e11.b) * n33, this;
  }
  lerpHSL(e11, t19) {
    this.getHSL(vn3), e11.getHSL(Er3);
    const n33 = Js(vn3.h, Er3.h, t19), i27 = Js(vn3.s, Er3.s, t19), s18 = Js(vn3.l, Er3.l, t19);
    return this.setHSL(n33, i27, s18), this;
  }
  setFromVector3(e11) {
    return this.r = e11.x, this.g = e11.y, this.b = e11.z, this;
  }
  applyMatrix3(e11) {
    const t19 = this.r, n33 = this.g, i27 = this.b, s18 = e11.elements;
    return this.r = s18[0] * t19 + s18[3] * n33 + s18[6] * i27, this.g = s18[1] * t19 + s18[4] * n33 + s18[7] * i27, this.b = s18[2] * t19 + s18[5] * n33 + s18[8] * i27, this;
  }
  equals(e11) {
    return e11.r === this.r && e11.g === this.g && e11.b === this.b;
  }
  fromArray(e11, t19 = 0) {
    return this.r = e11[t19], this.g = e11[t19 + 1], this.b = e11[t19 + 2], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.r, e11[t19 + 1] = this.g, e11[t19 + 2] = this.b, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.r = e11.getX(t19), this.g = e11.getY(t19), this.b = e11.getZ(t19), this;
  }
  toJSON() {
    return this.getHex();
  }
  *[Symbol.iterator]() {
    yield this.r, yield this.g, yield this.b;
  }
};
var Jt3 = new ze4();
ze4.NAMES = du;
var Mn3 = class extends mn3 {
  constructor(e11) {
    super(), this.isMeshBasicMaterial = true, this.type = "MeshBasicMaterial", this.color = new ze4(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = ao, this.reflectivity = 1, this.refractionRatio = 0.98, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.specularMap = e11.specularMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.combine = e11.combine, this.reflectivity = e11.reflectivity, this.refractionRatio = e11.refractionRatio, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.fog = e11.fog, this;
  }
};
var Rt4 = new U9();
var Cr3 = new We4();
var Gt3 = class {
  constructor(e11, t19, n33 = false) {
    if (Array.isArray(e11))
      throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");
    this.isBufferAttribute = true, this.name = "", this.array = e11, this.itemSize = t19, this.count = e11 !== void 0 ? e11.length / t19 : 0, this.normalized = n33, this.usage = ga, this.updateRange = { offset: 0, count: -1 }, this.version = 0;
  }
  onUploadCallback() {
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
  setUsage(e11) {
    return this.usage = e11, this;
  }
  copy(e11) {
    return this.name = e11.name, this.array = new e11.array.constructor(e11.array), this.itemSize = e11.itemSize, this.count = e11.count, this.normalized = e11.normalized, this.usage = e11.usage, this;
  }
  copyAt(e11, t19, n33) {
    e11 *= this.itemSize, n33 *= t19.itemSize;
    for (let i27 = 0, s18 = this.itemSize; i27 < s18; i27++)
      this.array[e11 + i27] = t19.array[n33 + i27];
    return this;
  }
  copyArray(e11) {
    return this.array.set(e11), this;
  }
  applyMatrix3(e11) {
    if (this.itemSize === 2)
      for (let t19 = 0, n33 = this.count; t19 < n33; t19++)
        Cr3.fromBufferAttribute(this, t19), Cr3.applyMatrix3(e11), this.setXY(t19, Cr3.x, Cr3.y);
    else if (this.itemSize === 3)
      for (let t19 = 0, n33 = this.count; t19 < n33; t19++)
        Rt4.fromBufferAttribute(this, t19), Rt4.applyMatrix3(e11), this.setXYZ(t19, Rt4.x, Rt4.y, Rt4.z);
    return this;
  }
  applyMatrix4(e11) {
    for (let t19 = 0, n33 = this.count; t19 < n33; t19++)
      Rt4.fromBufferAttribute(this, t19), Rt4.applyMatrix4(e11), this.setXYZ(t19, Rt4.x, Rt4.y, Rt4.z);
    return this;
  }
  applyNormalMatrix(e11) {
    for (let t19 = 0, n33 = this.count; t19 < n33; t19++)
      Rt4.fromBufferAttribute(this, t19), Rt4.applyNormalMatrix(e11), this.setXYZ(t19, Rt4.x, Rt4.y, Rt4.z);
    return this;
  }
  transformDirection(e11) {
    for (let t19 = 0, n33 = this.count; t19 < n33; t19++)
      Rt4.fromBufferAttribute(this, t19), Rt4.transformDirection(e11), this.setXYZ(t19, Rt4.x, Rt4.y, Rt4.z);
    return this;
  }
  set(e11, t19 = 0) {
    return this.array.set(e11, t19), this;
  }
  getX(e11) {
    let t19 = this.array[e11 * this.itemSize];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  setX(e11, t19) {
    return this.normalized && (t19 = mt6(t19, this.array)), this.array[e11 * this.itemSize] = t19, this;
  }
  getY(e11) {
    let t19 = this.array[e11 * this.itemSize + 1];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  setY(e11, t19) {
    return this.normalized && (t19 = mt6(t19, this.array)), this.array[e11 * this.itemSize + 1] = t19, this;
  }
  getZ(e11) {
    let t19 = this.array[e11 * this.itemSize + 2];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  setZ(e11, t19) {
    return this.normalized && (t19 = mt6(t19, this.array)), this.array[e11 * this.itemSize + 2] = t19, this;
  }
  getW(e11) {
    let t19 = this.array[e11 * this.itemSize + 3];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  setW(e11, t19) {
    return this.normalized && (t19 = mt6(t19, this.array)), this.array[e11 * this.itemSize + 3] = t19, this;
  }
  setXY(e11, t19, n33) {
    return e11 *= this.itemSize, this.normalized && (t19 = mt6(t19, this.array), n33 = mt6(n33, this.array)), this.array[e11 + 0] = t19, this.array[e11 + 1] = n33, this;
  }
  setXYZ(e11, t19, n33, i27) {
    return e11 *= this.itemSize, this.normalized && (t19 = mt6(t19, this.array), n33 = mt6(n33, this.array), i27 = mt6(i27, this.array)), this.array[e11 + 0] = t19, this.array[e11 + 1] = n33, this.array[e11 + 2] = i27, this;
  }
  setXYZW(e11, t19, n33, i27, s18) {
    return e11 *= this.itemSize, this.normalized && (t19 = mt6(t19, this.array), n33 = mt6(n33, this.array), i27 = mt6(i27, this.array), s18 = mt6(s18, this.array)), this.array[e11 + 0] = t19, this.array[e11 + 1] = n33, this.array[e11 + 2] = i27, this.array[e11 + 3] = s18, this;
  }
  onUpload(e11) {
    return this.onUploadCallback = e11, this;
  }
  clone() {
    return new this.constructor(this.array, this.itemSize).copy(this);
  }
  toJSON() {
    const e11 = {
      itemSize: this.itemSize,
      type: this.array.constructor.name,
      array: Array.from(this.array),
      normalized: this.normalized
    };
    return this.name !== "" && (e11.name = this.name), this.usage !== ga && (e11.usage = this.usage), (this.updateRange.offset !== 0 || this.updateRange.count !== -1) && (e11.updateRange = this.updateRange), e11;
  }
  copyColorsArray() {
    console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.");
  }
  copyVector2sArray() {
    console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.");
  }
  copyVector3sArray() {
    console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.");
  }
  copyVector4sArray() {
    console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.");
  }
};
var fu = class extends Gt3 {
  constructor(e11, t19, n33) {
    super(new Uint16Array(e11), t19, n33);
  }
};
var pu = class extends Gt3 {
  constructor(e11, t19, n33) {
    super(new Uint32Array(e11), t19, n33);
  }
};
var yt8 = class extends Gt3 {
  constructor(e11, t19, n33) {
    super(new Float32Array(e11), t19, n33);
  }
};
var Td = 0;
var un3 = new Ve4();
var Ko = new _t4();
var is = new U9();
var an3 = new qn3();
var Gs = new qn3();
var zt3 = new U9();
var Xt3 = class _Xt extends Ni3 {
  constructor() {
    super(), this.isBufferGeometry = true, Object.defineProperty(this, "id", { value: Td++ }), this.uuid = Sn3(), this.name = "", this.type = "BufferGeometry", this.index = null, this.attributes = {}, this.morphAttributes = {}, this.morphTargetsRelative = false, this.groups = [], this.boundingBox = null, this.boundingSphere = null, this.drawRange = { start: 0, count: 1 / 0 }, this.userData = {};
  }
  getIndex() {
    return this.index;
  }
  setIndex(e11) {
    return Array.isArray(e11) ? this.index = new (au(e11) ? pu : fu)(e11, 1) : this.index = e11, this;
  }
  getAttribute(e11) {
    return this.attributes[e11];
  }
  setAttribute(e11, t19) {
    return this.attributes[e11] = t19, this;
  }
  deleteAttribute(e11) {
    return delete this.attributes[e11], this;
  }
  hasAttribute(e11) {
    return this.attributes[e11] !== void 0;
  }
  addGroup(e11, t19, n33 = 0) {
    this.groups.push({
      start: e11,
      count: t19,
      materialIndex: n33
    });
  }
  clearGroups() {
    this.groups = [];
  }
  setDrawRange(e11, t19) {
    this.drawRange.start = e11, this.drawRange.count = t19;
  }
  applyMatrix4(e11) {
    const t19 = this.attributes.position;
    t19 !== void 0 && (t19.applyMatrix4(e11), t19.needsUpdate = true);
    const n33 = this.attributes.normal;
    if (n33 !== void 0) {
      const s18 = new Qe4().getNormalMatrix(e11);
      n33.applyNormalMatrix(s18), n33.needsUpdate = true;
    }
    const i27 = this.attributes.tangent;
    return i27 !== void 0 && (i27.transformDirection(e11), i27.needsUpdate = true), this.boundingBox !== null && this.computeBoundingBox(), this.boundingSphere !== null && this.computeBoundingSphere(), this;
  }
  applyQuaternion(e11) {
    return un3.makeRotationFromQuaternion(e11), this.applyMatrix4(un3), this;
  }
  rotateX(e11) {
    return un3.makeRotationX(e11), this.applyMatrix4(un3), this;
  }
  rotateY(e11) {
    return un3.makeRotationY(e11), this.applyMatrix4(un3), this;
  }
  rotateZ(e11) {
    return un3.makeRotationZ(e11), this.applyMatrix4(un3), this;
  }
  translate(e11, t19, n33) {
    return un3.makeTranslation(e11, t19, n33), this.applyMatrix4(un3), this;
  }
  scale(e11, t19, n33) {
    return un3.makeScale(e11, t19, n33), this.applyMatrix4(un3), this;
  }
  lookAt(e11) {
    return Ko.lookAt(e11), Ko.updateMatrix(), this.applyMatrix4(Ko.matrix), this;
  }
  center() {
    return this.computeBoundingBox(), this.boundingBox.getCenter(is).negate(), this.translate(is.x, is.y, is.z), this;
  }
  setFromPoints(e11) {
    const t19 = [];
    for (let n33 = 0, i27 = e11.length; n33 < i27; n33++) {
      const s18 = e11[n33];
      t19.push(s18.x, s18.y, s18.z || 0);
    }
    return this.setAttribute("position", new yt8(t19, 3)), this;
  }
  computeBoundingBox() {
    this.boundingBox === null && (this.boundingBox = new qn3());
    const e11 = this.attributes.position, t19 = this.morphAttributes.position;
    if (e11 && e11.isGLBufferAttribute) {
      console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".', this), this.boundingBox.set(
        new U9(-1 / 0, -1 / 0, -1 / 0),
        new U9(1 / 0, 1 / 0, 1 / 0)
      );
      return;
    }
    if (e11 !== void 0) {
      if (this.boundingBox.setFromBufferAttribute(e11), t19)
        for (let n33 = 0, i27 = t19.length; n33 < i27; n33++) {
          const s18 = t19[n33];
          an3.setFromBufferAttribute(s18), this.morphTargetsRelative ? (zt3.addVectors(this.boundingBox.min, an3.min), this.boundingBox.expandByPoint(zt3), zt3.addVectors(this.boundingBox.max, an3.max), this.boundingBox.expandByPoint(zt3)) : (this.boundingBox.expandByPoint(an3.min), this.boundingBox.expandByPoint(an3.max));
        }
    } else
      this.boundingBox.makeEmpty();
    (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this);
  }
  computeBoundingSphere() {
    this.boundingSphere === null && (this.boundingSphere = new Xn3());
    const e11 = this.attributes.position, t19 = this.morphAttributes.position;
    if (e11 && e11.isGLBufferAttribute) {
      console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".', this), this.boundingSphere.set(new U9(), 1 / 0);
      return;
    }
    if (e11) {
      const n33 = this.boundingSphere.center;
      if (an3.setFromBufferAttribute(e11), t19)
        for (let s18 = 0, r24 = t19.length; s18 < r24; s18++) {
          const o13 = t19[s18];
          Gs.setFromBufferAttribute(o13), this.morphTargetsRelative ? (zt3.addVectors(an3.min, Gs.min), an3.expandByPoint(zt3), zt3.addVectors(an3.max, Gs.max), an3.expandByPoint(zt3)) : (an3.expandByPoint(Gs.min), an3.expandByPoint(Gs.max));
        }
      an3.getCenter(n33);
      let i27 = 0;
      for (let s18 = 0, r24 = e11.count; s18 < r24; s18++)
        zt3.fromBufferAttribute(e11, s18), i27 = Math.max(i27, n33.distanceToSquared(zt3));
      if (t19)
        for (let s18 = 0, r24 = t19.length; s18 < r24; s18++) {
          const o13 = t19[s18], c27 = this.morphTargetsRelative;
          for (let l26 = 0, u35 = o13.count; l26 < u35; l26++)
            zt3.fromBufferAttribute(o13, l26), c27 && (is.fromBufferAttribute(e11, l26), zt3.add(is)), i27 = Math.max(i27, n33.distanceToSquared(zt3));
        }
      this.boundingSphere.radius = Math.sqrt(i27), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this);
    }
  }
  computeTangents() {
    const e11 = this.index, t19 = this.attributes;
    if (e11 === null || t19.position === void 0 || t19.normal === void 0 || t19.uv === void 0) {
      console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");
      return;
    }
    const n33 = e11.array, i27 = t19.position.array, s18 = t19.normal.array, r24 = t19.uv.array, o13 = i27.length / 3;
    this.hasAttribute("tangent") === false && this.setAttribute("tangent", new Gt3(new Float32Array(4 * o13), 4));
    const c27 = this.getAttribute("tangent").array, l26 = [], u35 = [];
    for (let L12 = 0; L12 < o13; L12++)
      l26[L12] = new U9(), u35[L12] = new U9();
    const h26 = new U9(), d34 = new U9(), p26 = new U9(), g32 = new We4(), y34 = new We4(), m34 = new We4(), f40 = new U9(), E25 = new U9();
    function b35(L12, G16, B22) {
      h26.fromArray(i27, L12 * 3), d34.fromArray(i27, G16 * 3), p26.fromArray(i27, B22 * 3), g32.fromArray(r24, L12 * 2), y34.fromArray(r24, G16 * 2), m34.fromArray(r24, B22 * 2), d34.sub(h26), p26.sub(h26), y34.sub(g32), m34.sub(g32);
      const k29 = 1 / (y34.x * m34.y - m34.x * y34.y);
      isFinite(k29) && (f40.copy(d34).multiplyScalar(m34.y).addScaledVector(p26, -y34.y).multiplyScalar(k29), E25.copy(p26).multiplyScalar(y34.x).addScaledVector(d34, -m34.x).multiplyScalar(k29), l26[L12].add(f40), l26[G16].add(f40), l26[B22].add(f40), u35[L12].add(E25), u35[G16].add(E25), u35[B22].add(E25));
    }
    let w31 = this.groups;
    w31.length === 0 && (w31 = [{
      start: 0,
      count: n33.length
    }]);
    for (let L12 = 0, G16 = w31.length; L12 < G16; ++L12) {
      const B22 = w31[L12], k29 = B22.start, V16 = B22.count;
      for (let H16 = k29, W11 = k29 + V16; H16 < W11; H16 += 3)
        b35(
          n33[H16 + 0],
          n33[H16 + 1],
          n33[H16 + 2]
        );
    }
    const S23 = new U9(), D18 = new U9(), N22 = new U9(), I18 = new U9();
    function v31(L12) {
      N22.fromArray(s18, L12 * 3), I18.copy(N22);
      const G16 = l26[L12];
      S23.copy(G16), S23.sub(N22.multiplyScalar(N22.dot(G16))).normalize(), D18.crossVectors(I18, G16);
      const k29 = D18.dot(u35[L12]) < 0 ? -1 : 1;
      c27[L12 * 4] = S23.x, c27[L12 * 4 + 1] = S23.y, c27[L12 * 4 + 2] = S23.z, c27[L12 * 4 + 3] = k29;
    }
    for (let L12 = 0, G16 = w31.length; L12 < G16; ++L12) {
      const B22 = w31[L12], k29 = B22.start, V16 = B22.count;
      for (let H16 = k29, W11 = k29 + V16; H16 < W11; H16 += 3)
        v31(n33[H16 + 0]), v31(n33[H16 + 1]), v31(n33[H16 + 2]);
    }
  }
  computeVertexNormals() {
    const e11 = this.index, t19 = this.getAttribute("position");
    if (t19 !== void 0) {
      let n33 = this.getAttribute("normal");
      if (n33 === void 0)
        n33 = new Gt3(new Float32Array(t19.count * 3), 3), this.setAttribute("normal", n33);
      else
        for (let d34 = 0, p26 = n33.count; d34 < p26; d34++)
          n33.setXYZ(d34, 0, 0, 0);
      const i27 = new U9(), s18 = new U9(), r24 = new U9(), o13 = new U9(), c27 = new U9(), l26 = new U9(), u35 = new U9(), h26 = new U9();
      if (e11)
        for (let d34 = 0, p26 = e11.count; d34 < p26; d34 += 3) {
          const g32 = e11.getX(d34 + 0), y34 = e11.getX(d34 + 1), m34 = e11.getX(d34 + 2);
          i27.fromBufferAttribute(t19, g32), s18.fromBufferAttribute(t19, y34), r24.fromBufferAttribute(t19, m34), u35.subVectors(r24, s18), h26.subVectors(i27, s18), u35.cross(h26), o13.fromBufferAttribute(n33, g32), c27.fromBufferAttribute(n33, y34), l26.fromBufferAttribute(n33, m34), o13.add(u35), c27.add(u35), l26.add(u35), n33.setXYZ(g32, o13.x, o13.y, o13.z), n33.setXYZ(y34, c27.x, c27.y, c27.z), n33.setXYZ(m34, l26.x, l26.y, l26.z);
        }
      else
        for (let d34 = 0, p26 = t19.count; d34 < p26; d34 += 3)
          i27.fromBufferAttribute(t19, d34 + 0), s18.fromBufferAttribute(t19, d34 + 1), r24.fromBufferAttribute(t19, d34 + 2), u35.subVectors(r24, s18), h26.subVectors(i27, s18), u35.cross(h26), n33.setXYZ(d34 + 0, u35.x, u35.y, u35.z), n33.setXYZ(d34 + 1, u35.x, u35.y, u35.z), n33.setXYZ(d34 + 2, u35.x, u35.y, u35.z);
      this.normalizeNormals(), n33.needsUpdate = true;
    }
  }
  merge() {
    return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."), this;
  }
  normalizeNormals() {
    const e11 = this.attributes.normal;
    for (let t19 = 0, n33 = e11.count; t19 < n33; t19++)
      zt3.fromBufferAttribute(e11, t19), zt3.normalize(), e11.setXYZ(t19, zt3.x, zt3.y, zt3.z);
  }
  toNonIndexed() {
    function e11(o13, c27) {
      const l26 = o13.array, u35 = o13.itemSize, h26 = o13.normalized, d34 = new l26.constructor(c27.length * u35);
      let p26 = 0, g32 = 0;
      for (let y34 = 0, m34 = c27.length; y34 < m34; y34++) {
        o13.isInterleavedBufferAttribute ? p26 = c27[y34] * o13.data.stride + o13.offset : p26 = c27[y34] * u35;
        for (let f40 = 0; f40 < u35; f40++)
          d34[g32++] = l26[p26++];
      }
      return new Gt3(d34, u35, h26);
    }
    if (this.index === null)
      return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."), this;
    const t19 = new _Xt(), n33 = this.index.array, i27 = this.attributes;
    for (const o13 in i27) {
      const c27 = i27[o13], l26 = e11(c27, n33);
      t19.setAttribute(o13, l26);
    }
    const s18 = this.morphAttributes;
    for (const o13 in s18) {
      const c27 = [], l26 = s18[o13];
      for (let u35 = 0, h26 = l26.length; u35 < h26; u35++) {
        const d34 = l26[u35], p26 = e11(d34, n33);
        c27.push(p26);
      }
      t19.morphAttributes[o13] = c27;
    }
    t19.morphTargetsRelative = this.morphTargetsRelative;
    const r24 = this.groups;
    for (let o13 = 0, c27 = r24.length; o13 < c27; o13++) {
      const l26 = r24[o13];
      t19.addGroup(l26.start, l26.count, l26.materialIndex);
    }
    return t19;
  }
  toJSON() {
    const e11 = {
      metadata: {
        version: 4.5,
        type: "BufferGeometry",
        generator: "BufferGeometry.toJSON"
      }
    };
    if (e11.uuid = this.uuid, e11.type = this.type, this.name !== "" && (e11.name = this.name), Object.keys(this.userData).length > 0 && (e11.userData = this.userData), this.parameters !== void 0) {
      const c27 = this.parameters;
      for (const l26 in c27)
        c27[l26] !== void 0 && (e11[l26] = c27[l26]);
      return e11;
    }
    e11.data = { attributes: {} };
    const t19 = this.index;
    t19 !== null && (e11.data.index = {
      type: t19.array.constructor.name,
      array: Array.prototype.slice.call(t19.array)
    });
    const n33 = this.attributes;
    for (const c27 in n33) {
      const l26 = n33[c27];
      e11.data.attributes[c27] = l26.toJSON(e11.data);
    }
    const i27 = {};
    let s18 = false;
    for (const c27 in this.morphAttributes) {
      const l26 = this.morphAttributes[c27], u35 = [];
      for (let h26 = 0, d34 = l26.length; h26 < d34; h26++) {
        const p26 = l26[h26];
        u35.push(p26.toJSON(e11.data));
      }
      u35.length > 0 && (i27[c27] = u35, s18 = true);
    }
    s18 && (e11.data.morphAttributes = i27, e11.data.morphTargetsRelative = this.morphTargetsRelative);
    const r24 = this.groups;
    r24.length > 0 && (e11.data.groups = JSON.parse(JSON.stringify(r24)));
    const o13 = this.boundingSphere;
    return o13 !== null && (e11.data.boundingSphere = {
      center: o13.center.toArray(),
      radius: o13.radius
    }), e11;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    this.index = null, this.attributes = {}, this.morphAttributes = {}, this.groups = [], this.boundingBox = null, this.boundingSphere = null;
    const t19 = {};
    this.name = e11.name;
    const n33 = e11.index;
    n33 !== null && this.setIndex(n33.clone(t19));
    const i27 = e11.attributes;
    for (const l26 in i27) {
      const u35 = i27[l26];
      this.setAttribute(l26, u35.clone(t19));
    }
    const s18 = e11.morphAttributes;
    for (const l26 in s18) {
      const u35 = [], h26 = s18[l26];
      for (let d34 = 0, p26 = h26.length; d34 < p26; d34++)
        u35.push(h26[d34].clone(t19));
      this.morphAttributes[l26] = u35;
    }
    this.morphTargetsRelative = e11.morphTargetsRelative;
    const r24 = e11.groups;
    for (let l26 = 0, u35 = r24.length; l26 < u35; l26++) {
      const h26 = r24[l26];
      this.addGroup(h26.start, h26.count, h26.materialIndex);
    }
    const o13 = e11.boundingBox;
    o13 !== null && (this.boundingBox = o13.clone());
    const c27 = e11.boundingSphere;
    return c27 !== null && (this.boundingSphere = c27.clone()), this.drawRange.start = e11.drawRange.start, this.drawRange.count = e11.drawRange.count, this.userData = e11.userData, this;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
};
var Hl = new Ve4();
var En3 = new La();
var Lr3 = new Xn3();
var Wl = new U9();
var ss = new U9();
var rs = new U9();
var os = new U9();
var Yo = new U9();
var Rr3 = new U9();
var Pr3 = new We4();
var Ir3 = new We4();
var Dr3 = new We4();
var jl = new U9();
var ql = new U9();
var Xl = new U9();
var Nr3 = new U9();
var Ur3 = new U9();
var Pt5 = class extends _t4 {
  constructor(e11 = new Xt3(), t19 = new Mn3()) {
    super(), this.isMesh = true, this.type = "Mesh", this.geometry = e11, this.material = t19, this.updateMorphTargets();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), e11.morphTargetInfluences !== void 0 && (this.morphTargetInfluences = e11.morphTargetInfluences.slice()), e11.morphTargetDictionary !== void 0 && (this.morphTargetDictionary = Object.assign({}, e11.morphTargetDictionary)), this.material = e11.material, this.geometry = e11.geometry, this;
  }
  updateMorphTargets() {
    const t19 = this.geometry.morphAttributes, n33 = Object.keys(t19);
    if (n33.length > 0) {
      const i27 = t19[n33[0]];
      if (i27 !== void 0) {
        this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (let s18 = 0, r24 = i27.length; s18 < r24; s18++) {
          const o13 = i27[s18].name || String(s18);
          this.morphTargetInfluences.push(0), this.morphTargetDictionary[o13] = s18;
        }
      }
    }
  }
  getVertexPosition(e11, t19) {
    const n33 = this.geometry, i27 = n33.attributes.position, s18 = n33.morphAttributes.position, r24 = n33.morphTargetsRelative;
    t19.fromBufferAttribute(i27, e11);
    const o13 = this.morphTargetInfluences;
    if (s18 && o13) {
      Rr3.set(0, 0, 0);
      for (let c27 = 0, l26 = s18.length; c27 < l26; c27++) {
        const u35 = o13[c27], h26 = s18[c27];
        u35 !== 0 && (Yo.fromBufferAttribute(h26, e11), r24 ? Rr3.addScaledVector(Yo, u35) : Rr3.addScaledVector(Yo.sub(t19), u35));
      }
      t19.add(Rr3);
    }
    return this.isSkinnedMesh && this.applyBoneTransform(e11, t19), t19;
  }
  raycast(e11, t19) {
    const n33 = this.geometry, i27 = this.material, s18 = this.matrixWorld;
    if (i27 === void 0 || (n33.boundingSphere === null && n33.computeBoundingSphere(), Lr3.copy(n33.boundingSphere), Lr3.applyMatrix4(s18), En3.copy(e11.ray).recast(e11.near), Lr3.containsPoint(En3.origin) === false && (En3.intersectSphere(Lr3, Wl) === null || En3.origin.distanceToSquared(Wl) > (e11.far - e11.near) ** 2)) || (Hl.copy(s18).invert(), En3.copy(e11.ray).applyMatrix4(Hl), n33.boundingBox !== null && En3.intersectsBox(n33.boundingBox) === false))
      return;
    let r24;
    const o13 = n33.index, c27 = n33.attributes.position, l26 = n33.attributes.uv, u35 = n33.attributes.uv2, h26 = n33.attributes.normal, d34 = n33.groups, p26 = n33.drawRange;
    if (o13 !== null)
      if (Array.isArray(i27))
        for (let g32 = 0, y34 = d34.length; g32 < y34; g32++) {
          const m34 = d34[g32], f40 = i27[m34.materialIndex], E25 = Math.max(m34.start, p26.start), b35 = Math.min(o13.count, Math.min(m34.start + m34.count, p26.start + p26.count));
          for (let w31 = E25, S23 = b35; w31 < S23; w31 += 3) {
            const D18 = o13.getX(w31), N22 = o13.getX(w31 + 1), I18 = o13.getX(w31 + 2);
            r24 = kr3(this, f40, e11, En3, l26, u35, h26, D18, N22, I18), r24 && (r24.faceIndex = Math.floor(w31 / 3), r24.face.materialIndex = m34.materialIndex, t19.push(r24));
          }
        }
      else {
        const g32 = Math.max(0, p26.start), y34 = Math.min(o13.count, p26.start + p26.count);
        for (let m34 = g32, f40 = y34; m34 < f40; m34 += 3) {
          const E25 = o13.getX(m34), b35 = o13.getX(m34 + 1), w31 = o13.getX(m34 + 2);
          r24 = kr3(this, i27, e11, En3, l26, u35, h26, E25, b35, w31), r24 && (r24.faceIndex = Math.floor(m34 / 3), t19.push(r24));
        }
      }
    else if (c27 !== void 0)
      if (Array.isArray(i27))
        for (let g32 = 0, y34 = d34.length; g32 < y34; g32++) {
          const m34 = d34[g32], f40 = i27[m34.materialIndex], E25 = Math.max(m34.start, p26.start), b35 = Math.min(c27.count, Math.min(m34.start + m34.count, p26.start + p26.count));
          for (let w31 = E25, S23 = b35; w31 < S23; w31 += 3) {
            const D18 = w31, N22 = w31 + 1, I18 = w31 + 2;
            r24 = kr3(this, f40, e11, En3, l26, u35, h26, D18, N22, I18), r24 && (r24.faceIndex = Math.floor(w31 / 3), r24.face.materialIndex = m34.materialIndex, t19.push(r24));
          }
        }
      else {
        const g32 = Math.max(0, p26.start), y34 = Math.min(c27.count, p26.start + p26.count);
        for (let m34 = g32, f40 = y34; m34 < f40; m34 += 3) {
          const E25 = m34, b35 = m34 + 1, w31 = m34 + 2;
          r24 = kr3(this, i27, e11, En3, l26, u35, h26, E25, b35, w31), r24 && (r24.faceIndex = Math.floor(m34 / 3), t19.push(r24));
        }
      }
  }
};
function Ad(a22, e11, t19, n33, i27, s18, r24, o13) {
  let c27;
  if (e11.side === sn3 ? c27 = n33.intersectTriangle(r24, s18, i27, true, o13) : c27 = n33.intersectTriangle(i27, s18, r24, e11.side === Pn3, o13), c27 === null)
    return null;
  Ur3.copy(o13), Ur3.applyMatrix4(a22.matrixWorld);
  const l26 = t19.ray.origin.distanceTo(Ur3);
  return l26 < t19.near || l26 > t19.far ? null : {
    distance: l26,
    point: Ur3.clone(),
    object: a22
  };
}
function kr3(a22, e11, t19, n33, i27, s18, r24, o13, c27, l26) {
  a22.getVertexPosition(o13, ss), a22.getVertexPosition(c27, rs), a22.getVertexPosition(l26, os);
  const u35 = Ad(a22, e11, t19, n33, ss, rs, os, Nr3);
  if (u35) {
    i27 && (Pr3.fromBufferAttribute(i27, o13), Ir3.fromBufferAttribute(i27, c27), Dr3.fromBufferAttribute(i27, l26), u35.uv = dn3.getInterpolation(Nr3, ss, rs, os, Pr3, Ir3, Dr3, new We4())), s18 && (Pr3.fromBufferAttribute(s18, o13), Ir3.fromBufferAttribute(s18, c27), Dr3.fromBufferAttribute(s18, l26), u35.uv2 = dn3.getInterpolation(Nr3, ss, rs, os, Pr3, Ir3, Dr3, new We4())), r24 && (jl.fromBufferAttribute(r24, o13), ql.fromBufferAttribute(r24, c27), Xl.fromBufferAttribute(r24, l26), u35.normal = dn3.getInterpolation(Nr3, ss, rs, os, jl, ql, Xl, new U9()), u35.normal.dot(n33.direction) > 0 && u35.normal.multiplyScalar(-1));
    const h26 = {
      a: o13,
      b: c27,
      c: l26,
      normal: new U9(),
      materialIndex: 0
    };
    dn3.getNormal(ss, rs, os, h26.normal), u35.face = h26;
  }
  return u35;
}
var Ui = class _Ui extends Xt3 {
  constructor(e11 = 1, t19 = 1, n33 = 1, i27 = 1, s18 = 1, r24 = 1) {
    super(), this.type = "BoxGeometry", this.parameters = {
      width: e11,
      height: t19,
      depth: n33,
      widthSegments: i27,
      heightSegments: s18,
      depthSegments: r24
    };
    const o13 = this;
    i27 = Math.floor(i27), s18 = Math.floor(s18), r24 = Math.floor(r24);
    const c27 = [], l26 = [], u35 = [], h26 = [];
    let d34 = 0, p26 = 0;
    g32("z", "y", "x", -1, -1, n33, t19, e11, r24, s18, 0), g32("z", "y", "x", 1, -1, n33, t19, -e11, r24, s18, 1), g32("x", "z", "y", 1, 1, e11, n33, t19, i27, r24, 2), g32("x", "z", "y", 1, -1, e11, n33, -t19, i27, r24, 3), g32("x", "y", "z", 1, -1, e11, t19, n33, i27, s18, 4), g32("x", "y", "z", -1, -1, e11, t19, -n33, i27, s18, 5), this.setIndex(c27), this.setAttribute("position", new yt8(l26, 3)), this.setAttribute("normal", new yt8(u35, 3)), this.setAttribute("uv", new yt8(h26, 2));
    function g32(y34, m34, f40, E25, b35, w31, S23, D18, N22, I18, v31) {
      const L12 = w31 / N22, G16 = S23 / I18, B22 = w31 / 2, k29 = S23 / 2, V16 = D18 / 2, H16 = N22 + 1, W11 = I18 + 1;
      let te7 = 0, J12 = 0;
      const ie8 = new U9();
      for (let le7 = 0; le7 < W11; le7++) {
        const me9 = le7 * G16 - k29;
        for (let he8 = 0; he8 < H16; he8++) {
          const j19 = he8 * L12 - B22;
          ie8[y34] = j19 * E25, ie8[m34] = me9 * b35, ie8[f40] = V16, l26.push(ie8.x, ie8.y, ie8.z), ie8[y34] = 0, ie8[m34] = 0, ie8[f40] = D18 > 0 ? 1 : -1, u35.push(ie8.x, ie8.y, ie8.z), h26.push(he8 / N22), h26.push(1 - le7 / I18), te7 += 1;
        }
      }
      for (let le7 = 0; le7 < I18; le7++)
        for (let me9 = 0; me9 < N22; me9++) {
          const he8 = d34 + me9 + H16 * le7, j19 = d34 + me9 + H16 * (le7 + 1), X14 = d34 + (me9 + 1) + H16 * (le7 + 1), ee7 = d34 + (me9 + 1) + H16 * le7;
          c27.push(he8, j19, ee7), c27.push(j19, X14, ee7), J12 += 6;
        }
      o13.addGroup(p26, J12, v31), p26 += J12, d34 += te7;
    }
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _Ui(e11.width, e11.height, e11.depth, e11.widthSegments, e11.heightSegments, e11.depthSegments);
  }
};
function Cs(a22) {
  const e11 = {};
  for (const t19 in a22) {
    e11[t19] = {};
    for (const n33 in a22[t19]) {
      const i27 = a22[t19][n33];
      i27 && (i27.isColor || i27.isMatrix3 || i27.isMatrix4 || i27.isVector2 || i27.isVector3 || i27.isVector4 || i27.isTexture || i27.isQuaternion) ? i27.isRenderTargetTexture ? (console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."), e11[t19][n33] = null) : e11[t19][n33] = i27.clone() : Array.isArray(i27) ? e11[t19][n33] = i27.slice() : e11[t19][n33] = i27;
    }
  }
  return e11;
}
function tn3(a22) {
  const e11 = {};
  for (let t19 = 0; t19 < a22.length; t19++) {
    const n33 = Cs(a22[t19]);
    for (const i27 in n33)
      e11[i27] = n33[i27];
  }
  return e11;
}
function Ed(a22) {
  const e11 = [];
  for (let t19 = 0; t19 < a22.length; t19++)
    e11.push(a22[t19].clone());
  return e11;
}
function mu(a22) {
  return a22.getRenderTarget() === null && a22.outputEncoding === st8 ? bn3 : tr3;
}
var Cd = { clone: Cs, merge: tn3 };
var Ld = `void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`;
var Rd = `void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;
var Ri = class extends mn3 {
  constructor(e11) {
    super(), this.isShaderMaterial = true, this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, this.uniformsGroups = [], this.vertexShader = Ld, this.fragmentShader = Rd, this.linewidth = 1, this.wireframe = false, this.wireframeLinewidth = 1, this.fog = false, this.lights = false, this.clipping = false, this.forceSinglePass = true, this.extensions = {
      derivatives: false,
      // set to use derivatives
      fragDepth: false,
      // set to use fragment depth values
      drawBuffers: false,
      // set to use draw buffers
      shaderTextureLOD: false
      // set to use shader texture LOD
    }, this.defaultAttributeValues = {
      color: [1, 1, 1],
      uv: [0, 0],
      uv2: [0, 0]
    }, this.index0AttributeName = void 0, this.uniformsNeedUpdate = false, this.glslVersion = null, e11 !== void 0 && this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.fragmentShader = e11.fragmentShader, this.vertexShader = e11.vertexShader, this.uniforms = Cs(e11.uniforms), this.uniformsGroups = Ed(e11.uniformsGroups), this.defines = Object.assign({}, e11.defines), this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.fog = e11.fog, this.lights = e11.lights, this.clipping = e11.clipping, this.extensions = Object.assign({}, e11.extensions), this.glslVersion = e11.glslVersion, this;
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    t19.glslVersion = this.glslVersion, t19.uniforms = {};
    for (const i27 in this.uniforms) {
      const r24 = this.uniforms[i27].value;
      r24 && r24.isTexture ? t19.uniforms[i27] = {
        type: "t",
        value: r24.toJSON(e11).uuid
      } : r24 && r24.isColor ? t19.uniforms[i27] = {
        type: "c",
        value: r24.getHex()
      } : r24 && r24.isVector2 ? t19.uniforms[i27] = {
        type: "v2",
        value: r24.toArray()
      } : r24 && r24.isVector3 ? t19.uniforms[i27] = {
        type: "v3",
        value: r24.toArray()
      } : r24 && r24.isVector4 ? t19.uniforms[i27] = {
        type: "v4",
        value: r24.toArray()
      } : r24 && r24.isMatrix3 ? t19.uniforms[i27] = {
        type: "m3",
        value: r24.toArray()
      } : r24 && r24.isMatrix4 ? t19.uniforms[i27] = {
        type: "m4",
        value: r24.toArray()
      } : t19.uniforms[i27] = {
        value: r24
      };
    }
    Object.keys(this.defines).length > 0 && (t19.defines = this.defines), t19.vertexShader = this.vertexShader, t19.fragmentShader = this.fragmentShader;
    const n33 = {};
    for (const i27 in this.extensions)
      this.extensions[i27] === true && (n33[i27] = true);
    return Object.keys(n33).length > 0 && (t19.extensions = n33), t19;
  }
};
var gu = class extends _t4 {
  constructor() {
    super(), this.isCamera = true, this.type = "Camera", this.matrixWorldInverse = new Ve4(), this.projectionMatrix = new Ve4(), this.projectionMatrixInverse = new Ve4();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.matrixWorldInverse.copy(e11.matrixWorldInverse), this.projectionMatrix.copy(e11.projectionMatrix), this.projectionMatrixInverse.copy(e11.projectionMatrixInverse), this;
  }
  getWorldDirection(e11) {
    this.updateWorldMatrix(true, false);
    const t19 = this.matrixWorld.elements;
    return e11.set(-t19[8], -t19[9], -t19[10]).normalize();
  }
  updateMatrixWorld(e11) {
    super.updateMatrixWorld(e11), this.matrixWorldInverse.copy(this.matrixWorld).invert();
  }
  updateWorldMatrix(e11, t19) {
    super.updateWorldMatrix(e11, t19), this.matrixWorldInverse.copy(this.matrixWorld).invert();
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var Vt3 = class extends gu {
  constructor(e11 = 50, t19 = 1, n33 = 0.1, i27 = 2e3) {
    super(), this.isPerspectiveCamera = true, this.type = "PerspectiveCamera", this.fov = e11, this.zoom = 1, this.near = n33, this.far = i27, this.focus = 10, this.aspect = t19, this.view = null, this.filmGauge = 35, this.filmOffset = 0, this.updateProjectionMatrix();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.fov = e11.fov, this.zoom = e11.zoom, this.near = e11.near, this.far = e11.far, this.focus = e11.focus, this.aspect = e11.aspect, this.view = e11.view === null ? null : Object.assign({}, e11.view), this.filmGauge = e11.filmGauge, this.filmOffset = e11.filmOffset, this;
  }
  /**
   * Sets the FOV by focal length in respect to the current .filmGauge.
   *
   * The default film gauge is 35, so that the focal length can be specified for
   * a 35mm (full frame) camera.
   *
   * Values for focal length and film gauge must have the same unit.
   */
  setFocalLength(e11) {
    const t19 = 0.5 * this.getFilmHeight() / e11;
    this.fov = Es * 2 * Math.atan(t19), this.updateProjectionMatrix();
  }
  /**
   * Calculates the focal length from the current .fov and .filmGauge.
   */
  getFocalLength() {
    const e11 = Math.tan(xs * 0.5 * this.fov);
    return 0.5 * this.getFilmHeight() / e11;
  }
  getEffectiveFOV() {
    return Es * 2 * Math.atan(
      Math.tan(xs * 0.5 * this.fov) / this.zoom
    );
  }
  getFilmWidth() {
    return this.filmGauge * Math.min(this.aspect, 1);
  }
  getFilmHeight() {
    return this.filmGauge / Math.max(this.aspect, 1);
  }
  /**
   * Sets an offset in a larger frustum. This is useful for multi-window or
   * multi-monitor/multi-machine setups.
   *
   * For example, if you have 3x2 monitors and each monitor is 1920x1080 and
   * the monitors are in grid like this
   *
   *   +---+---+---+
   *   | A | B | C |
   *   +---+---+---+
   *   | D | E | F |
   *   +---+---+---+
   *
   * then for each monitor you would call it like this
   *
   *   const w = 1920;
   *   const h = 1080;
   *   const fullWidth = w * 3;
   *   const fullHeight = h * 2;
   *
   *   --A--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );
   *   --B--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );
   *   --C--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );
   *   --D--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );
   *   --E--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );
   *   --F--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );
   *
   *   Note there is no reason monitors have to be the same size or in a grid.
   */
  setViewOffset(e11, t19, n33, i27, s18, r24) {
    this.aspect = e11 / t19, this.view === null && (this.view = {
      enabled: true,
      fullWidth: 1,
      fullHeight: 1,
      offsetX: 0,
      offsetY: 0,
      width: 1,
      height: 1
    }), this.view.enabled = true, this.view.fullWidth = e11, this.view.fullHeight = t19, this.view.offsetX = n33, this.view.offsetY = i27, this.view.width = s18, this.view.height = r24, this.updateProjectionMatrix();
  }
  clearViewOffset() {
    this.view !== null && (this.view.enabled = false), this.updateProjectionMatrix();
  }
  updateProjectionMatrix() {
    const e11 = this.near;
    let t19 = e11 * Math.tan(xs * 0.5 * this.fov) / this.zoom, n33 = 2 * t19, i27 = this.aspect * n33, s18 = -0.5 * i27;
    const r24 = this.view;
    if (this.view !== null && this.view.enabled) {
      const c27 = r24.fullWidth, l26 = r24.fullHeight;
      s18 += r24.offsetX * i27 / c27, t19 -= r24.offsetY * n33 / l26, i27 *= r24.width / c27, n33 *= r24.height / l26;
    }
    const o13 = this.filmOffset;
    o13 !== 0 && (s18 += e11 * o13 / this.getFilmWidth()), this.projectionMatrix.makePerspective(s18, s18 + i27, t19, t19 - n33, e11, this.far), this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return t19.object.fov = this.fov, t19.object.zoom = this.zoom, t19.object.near = this.near, t19.object.far = this.far, t19.object.focus = this.focus, t19.object.aspect = this.aspect, this.view !== null && (t19.object.view = Object.assign({}, this.view)), t19.object.filmGauge = this.filmGauge, t19.object.filmOffset = this.filmOffset, t19;
  }
};
var as = -90;
var ls = 1;
var Pd = class extends _t4 {
  constructor(e11, t19, n33) {
    super(), this.type = "CubeCamera", this.renderTarget = n33;
    const i27 = new Vt3(as, ls, e11, t19);
    i27.layers = this.layers, i27.up.set(0, 1, 0), i27.lookAt(1, 0, 0), this.add(i27);
    const s18 = new Vt3(as, ls, e11, t19);
    s18.layers = this.layers, s18.up.set(0, 1, 0), s18.lookAt(-1, 0, 0), this.add(s18);
    const r24 = new Vt3(as, ls, e11, t19);
    r24.layers = this.layers, r24.up.set(0, 0, -1), r24.lookAt(0, 1, 0), this.add(r24);
    const o13 = new Vt3(as, ls, e11, t19);
    o13.layers = this.layers, o13.up.set(0, 0, 1), o13.lookAt(0, -1, 0), this.add(o13);
    const c27 = new Vt3(as, ls, e11, t19);
    c27.layers = this.layers, c27.up.set(0, 1, 0), c27.lookAt(0, 0, 1), this.add(c27);
    const l26 = new Vt3(as, ls, e11, t19);
    l26.layers = this.layers, l26.up.set(0, 1, 0), l26.lookAt(0, 0, -1), this.add(l26);
  }
  update(e11, t19) {
    this.parent === null && this.updateMatrixWorld();
    const n33 = this.renderTarget, [i27, s18, r24, o13, c27, l26] = this.children, u35 = e11.getRenderTarget(), h26 = e11.toneMapping, d34 = e11.xr.enabled;
    e11.toneMapping = Wn3, e11.xr.enabled = false;
    const p26 = n33.texture.generateMipmaps;
    n33.texture.generateMipmaps = false, e11.setRenderTarget(n33, 0), e11.render(t19, i27), e11.setRenderTarget(n33, 1), e11.render(t19, s18), e11.setRenderTarget(n33, 2), e11.render(t19, r24), e11.setRenderTarget(n33, 3), e11.render(t19, o13), e11.setRenderTarget(n33, 4), e11.render(t19, c27), n33.texture.generateMipmaps = p26, e11.setRenderTarget(n33, 5), e11.render(t19, l26), e11.setRenderTarget(u35), e11.toneMapping = h26, e11.xr.enabled = d34, n33.texture.needsPMREMUpdate = true;
  }
};
var _u = class extends jt4 {
  constructor(e11, t19, n33, i27, s18, r24, o13, c27, l26, u35) {
    e11 = e11 !== void 0 ? e11 : [], t19 = t19 !== void 0 ? t19 : Ss, super(e11, t19, n33, i27, s18, r24, o13, c27, l26, u35), this.isCubeTexture = true, this.flipY = false;
  }
  get images() {
    return this.image;
  }
  set images(e11) {
    this.image = e11;
  }
};
var Id = class extends Li {
  constructor(e11 = 1, t19 = {}) {
    super(e11, e11, t19), this.isWebGLCubeRenderTarget = true;
    const n33 = { width: e11, height: e11, depth: 1 }, i27 = [n33, n33, n33, n33, n33, n33];
    this.texture = new _u(i27, t19.mapping, t19.wrapS, t19.wrapT, t19.magFilter, t19.minFilter, t19.format, t19.type, t19.anisotropy, t19.encoding), this.texture.isRenderTargetTexture = true, this.texture.generateMipmaps = t19.generateMipmaps !== void 0 ? t19.generateMipmaps : false, this.texture.minFilter = t19.minFilter !== void 0 ? t19.minFilter : Ht4;
  }
  fromEquirectangularTexture(e11, t19) {
    this.texture.type = t19.type, this.texture.encoding = t19.encoding, this.texture.generateMipmaps = t19.generateMipmaps, this.texture.minFilter = t19.minFilter, this.texture.magFilter = t19.magFilter;
    const n33 = {
      uniforms: {
        tEquirect: { value: null }
      },
      vertexShader: (
        /* glsl */
        `

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`
      ),
      fragmentShader: (
        /* glsl */
        `

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`
      )
    }, i27 = new Ui(5, 5, 5), s18 = new Ri({
      name: "CubemapFromEquirect",
      uniforms: Cs(n33.uniforms),
      vertexShader: n33.vertexShader,
      fragmentShader: n33.fragmentShader,
      side: sn3,
      blending: li3
    });
    s18.uniforms.tEquirect.value = t19;
    const r24 = new Pt5(i27, s18), o13 = t19.minFilter;
    return t19.minFilter === jn3 && (t19.minFilter = Ht4), new Pd(1, 10, this).update(e11, r24), t19.minFilter = o13, r24.geometry.dispose(), r24.material.dispose(), this;
  }
  clear(e11, t19, n33, i27) {
    const s18 = e11.getRenderTarget();
    for (let r24 = 0; r24 < 6; r24++)
      e11.setRenderTarget(this, r24), e11.clear(t19, n33, i27);
    e11.setRenderTarget(s18);
  }
};
var Jo = new U9();
var Dd = new U9();
var Nd = new Qe4();
var _i3 = class {
  constructor(e11 = new U9(1, 0, 0), t19 = 0) {
    this.isPlane = true, this.normal = e11, this.constant = t19;
  }
  set(e11, t19) {
    return this.normal.copy(e11), this.constant = t19, this;
  }
  setComponents(e11, t19, n33, i27) {
    return this.normal.set(e11, t19, n33), this.constant = i27, this;
  }
  setFromNormalAndCoplanarPoint(e11, t19) {
    return this.normal.copy(e11), this.constant = -t19.dot(this.normal), this;
  }
  setFromCoplanarPoints(e11, t19, n33) {
    const i27 = Jo.subVectors(n33, t19).cross(Dd.subVectors(e11, t19)).normalize();
    return this.setFromNormalAndCoplanarPoint(i27, e11), this;
  }
  copy(e11) {
    return this.normal.copy(e11.normal), this.constant = e11.constant, this;
  }
  normalize() {
    const e11 = 1 / this.normal.length();
    return this.normal.multiplyScalar(e11), this.constant *= e11, this;
  }
  negate() {
    return this.constant *= -1, this.normal.negate(), this;
  }
  distanceToPoint(e11) {
    return this.normal.dot(e11) + this.constant;
  }
  distanceToSphere(e11) {
    return this.distanceToPoint(e11.center) - e11.radius;
  }
  projectPoint(e11, t19) {
    return t19.copy(e11).addScaledVector(this.normal, -this.distanceToPoint(e11));
  }
  intersectLine(e11, t19) {
    const n33 = e11.delta(Jo), i27 = this.normal.dot(n33);
    if (i27 === 0)
      return this.distanceToPoint(e11.start) === 0 ? t19.copy(e11.start) : null;
    const s18 = -(e11.start.dot(this.normal) + this.constant) / i27;
    return s18 < 0 || s18 > 1 ? null : t19.copy(e11.start).addScaledVector(n33, s18);
  }
  intersectsLine(e11) {
    const t19 = this.distanceToPoint(e11.start), n33 = this.distanceToPoint(e11.end);
    return t19 < 0 && n33 > 0 || n33 < 0 && t19 > 0;
  }
  intersectsBox(e11) {
    return e11.intersectsPlane(this);
  }
  intersectsSphere(e11) {
    return e11.intersectsPlane(this);
  }
  coplanarPoint(e11) {
    return e11.copy(this.normal).multiplyScalar(-this.constant);
  }
  applyMatrix4(e11, t19) {
    const n33 = t19 || Nd.getNormalMatrix(e11), i27 = this.coplanarPoint(Jo).applyMatrix4(e11), s18 = this.normal.applyMatrix3(n33).normalize();
    return this.constant = -i27.dot(s18), this;
  }
  translate(e11) {
    return this.constant -= e11.dot(this.normal), this;
  }
  equals(e11) {
    return e11.normal.equals(this.normal) && e11.constant === this.constant;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var gi3 = new Xn3();
var Or3 = new U9();
var Ra = class {
  constructor(e11 = new _i3(), t19 = new _i3(), n33 = new _i3(), i27 = new _i3(), s18 = new _i3(), r24 = new _i3()) {
    this.planes = [e11, t19, n33, i27, s18, r24];
  }
  set(e11, t19, n33, i27, s18, r24) {
    const o13 = this.planes;
    return o13[0].copy(e11), o13[1].copy(t19), o13[2].copy(n33), o13[3].copy(i27), o13[4].copy(s18), o13[5].copy(r24), this;
  }
  copy(e11) {
    const t19 = this.planes;
    for (let n33 = 0; n33 < 6; n33++)
      t19[n33].copy(e11.planes[n33]);
    return this;
  }
  setFromProjectionMatrix(e11) {
    const t19 = this.planes, n33 = e11.elements, i27 = n33[0], s18 = n33[1], r24 = n33[2], o13 = n33[3], c27 = n33[4], l26 = n33[5], u35 = n33[6], h26 = n33[7], d34 = n33[8], p26 = n33[9], g32 = n33[10], y34 = n33[11], m34 = n33[12], f40 = n33[13], E25 = n33[14], b35 = n33[15];
    return t19[0].setComponents(o13 - i27, h26 - c27, y34 - d34, b35 - m34).normalize(), t19[1].setComponents(o13 + i27, h26 + c27, y34 + d34, b35 + m34).normalize(), t19[2].setComponents(o13 + s18, h26 + l26, y34 + p26, b35 + f40).normalize(), t19[3].setComponents(o13 - s18, h26 - l26, y34 - p26, b35 - f40).normalize(), t19[4].setComponents(o13 - r24, h26 - u35, y34 - g32, b35 - E25).normalize(), t19[5].setComponents(o13 + r24, h26 + u35, y34 + g32, b35 + E25).normalize(), this;
  }
  intersectsObject(e11) {
    if (e11.boundingSphere !== void 0)
      e11.boundingSphere === null && e11.computeBoundingSphere(), gi3.copy(e11.boundingSphere).applyMatrix4(e11.matrixWorld);
    else {
      const t19 = e11.geometry;
      t19.boundingSphere === null && t19.computeBoundingSphere(), gi3.copy(t19.boundingSphere).applyMatrix4(e11.matrixWorld);
    }
    return this.intersectsSphere(gi3);
  }
  intersectsSprite(e11) {
    return gi3.center.set(0, 0, 0), gi3.radius = 0.7071067811865476, gi3.applyMatrix4(e11.matrixWorld), this.intersectsSphere(gi3);
  }
  intersectsSphere(e11) {
    const t19 = this.planes, n33 = e11.center, i27 = -e11.radius;
    for (let s18 = 0; s18 < 6; s18++)
      if (t19[s18].distanceToPoint(n33) < i27)
        return false;
    return true;
  }
  intersectsBox(e11) {
    const t19 = this.planes;
    for (let n33 = 0; n33 < 6; n33++) {
      const i27 = t19[n33];
      if (Or3.x = i27.normal.x > 0 ? e11.max.x : e11.min.x, Or3.y = i27.normal.y > 0 ? e11.max.y : e11.min.y, Or3.z = i27.normal.z > 0 ? e11.max.z : e11.min.z, i27.distanceToPoint(Or3) < 0)
        return false;
    }
    return true;
  }
  containsPoint(e11) {
    const t19 = this.planes;
    for (let n33 = 0; n33 < 6; n33++)
      if (t19[n33].distanceToPoint(e11) < 0)
        return false;
    return true;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
function xu() {
  let a22 = null, e11 = false, t19 = null, n33 = null;
  function i27(s18, r24) {
    t19(s18, r24), n33 = a22.requestAnimationFrame(i27);
  }
  return {
    start: function() {
      e11 !== true && t19 !== null && (n33 = a22.requestAnimationFrame(i27), e11 = true);
    },
    stop: function() {
      a22.cancelAnimationFrame(n33), e11 = false;
    },
    setAnimationLoop: function(s18) {
      t19 = s18;
    },
    setContext: function(s18) {
      a22 = s18;
    }
  };
}
function Ud(a22, e11) {
  const t19 = e11.isWebGL2, n33 = /* @__PURE__ */ new WeakMap();
  function i27(l26, u35) {
    const h26 = l26.array, d34 = l26.usage, p26 = a22.createBuffer();
    a22.bindBuffer(u35, p26), a22.bufferData(u35, h26, d34), l26.onUploadCallback();
    let g32;
    if (h26 instanceof Float32Array)
      g32 = 5126;
    else if (h26 instanceof Uint16Array)
      if (l26.isFloat16BufferAttribute)
        if (t19)
          g32 = 5131;
        else
          throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");
      else
        g32 = 5123;
    else if (h26 instanceof Int16Array)
      g32 = 5122;
    else if (h26 instanceof Uint32Array)
      g32 = 5125;
    else if (h26 instanceof Int32Array)
      g32 = 5124;
    else if (h26 instanceof Int8Array)
      g32 = 5120;
    else if (h26 instanceof Uint8Array)
      g32 = 5121;
    else if (h26 instanceof Uint8ClampedArray)
      g32 = 5121;
    else
      throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: " + h26);
    return {
      buffer: p26,
      type: g32,
      bytesPerElement: h26.BYTES_PER_ELEMENT,
      version: l26.version
    };
  }
  function s18(l26, u35, h26) {
    const d34 = u35.array, p26 = u35.updateRange;
    a22.bindBuffer(h26, l26), p26.count === -1 ? a22.bufferSubData(h26, 0, d34) : (t19 ? a22.bufferSubData(
      h26,
      p26.offset * d34.BYTES_PER_ELEMENT,
      d34,
      p26.offset,
      p26.count
    ) : a22.bufferSubData(
      h26,
      p26.offset * d34.BYTES_PER_ELEMENT,
      d34.subarray(p26.offset, p26.offset + p26.count)
    ), p26.count = -1), u35.onUploadCallback();
  }
  function r24(l26) {
    return l26.isInterleavedBufferAttribute && (l26 = l26.data), n33.get(l26);
  }
  function o13(l26) {
    l26.isInterleavedBufferAttribute && (l26 = l26.data);
    const u35 = n33.get(l26);
    u35 && (a22.deleteBuffer(u35.buffer), n33.delete(l26));
  }
  function c27(l26, u35) {
    if (l26.isGLBufferAttribute) {
      const d34 = n33.get(l26);
      (!d34 || d34.version < l26.version) && n33.set(l26, {
        buffer: l26.buffer,
        type: l26.type,
        bytesPerElement: l26.elementSize,
        version: l26.version
      });
      return;
    }
    l26.isInterleavedBufferAttribute && (l26 = l26.data);
    const h26 = n33.get(l26);
    h26 === void 0 ? n33.set(l26, i27(l26, u35)) : h26.version < l26.version && (s18(h26.buffer, l26, u35), h26.version = l26.version);
  }
  return {
    get: r24,
    remove: o13,
    update: c27
  };
}
var uo = class _uo extends Xt3 {
  constructor(e11 = 1, t19 = 1, n33 = 1, i27 = 1) {
    super(), this.type = "PlaneGeometry", this.parameters = {
      width: e11,
      height: t19,
      widthSegments: n33,
      heightSegments: i27
    };
    const s18 = e11 / 2, r24 = t19 / 2, o13 = Math.floor(n33), c27 = Math.floor(i27), l26 = o13 + 1, u35 = c27 + 1, h26 = e11 / o13, d34 = t19 / c27, p26 = [], g32 = [], y34 = [], m34 = [];
    for (let f40 = 0; f40 < u35; f40++) {
      const E25 = f40 * d34 - r24;
      for (let b35 = 0; b35 < l26; b35++) {
        const w31 = b35 * h26 - s18;
        g32.push(w31, -E25, 0), y34.push(0, 0, 1), m34.push(b35 / o13), m34.push(1 - f40 / c27);
      }
    }
    for (let f40 = 0; f40 < c27; f40++)
      for (let E25 = 0; E25 < o13; E25++) {
        const b35 = E25 + l26 * f40, w31 = E25 + l26 * (f40 + 1), S23 = E25 + 1 + l26 * (f40 + 1), D18 = E25 + 1 + l26 * f40;
        p26.push(b35, w31, D18), p26.push(w31, S23, D18);
      }
    this.setIndex(p26), this.setAttribute("position", new yt8(g32, 3)), this.setAttribute("normal", new yt8(y34, 3)), this.setAttribute("uv", new yt8(m34, 2));
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _uo(e11.width, e11.height, e11.widthSegments, e11.heightSegments);
  }
};
var kd = `#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`;
var Od = `#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`;
var Fd = `#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`;
var zd = `#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`;
var Bd = `#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`;
var Vd = `#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`;
var Gd = "vec3 transformed = vec3( position );";
var Hd = `vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`;
var Wd = `float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`;
var jd = `#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`;
var qd = `#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`;
var Xd = `#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`;
var Kd = `#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`;
var Yd = `#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`;
var Jd = `#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`;
var Zd = `#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`;
var $d = `#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`;
var Qd = `#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`;
var ef = `#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`;
var tf = `#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`;
var nf = `#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`;
var sf = `vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`;
var rf = `#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`;
var of = `#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`;
var af = `#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`;
var lf = `#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`;
var cf = "gl_FragColor = linearToOutputTexel( gl_FragColor );";
var uf = `vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`;
var hf = `#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`;
var df = `#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`;
var ff = `#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`;
var pf = `#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`;
var mf = `#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`;
var gf = `#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`;
var _f = `#ifdef USE_FOG
	varying float vFogDepth;
#endif`;
var xf = `#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`;
var yf = `#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`;
var vf = `#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`;
var bf = `#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`;
var Mf = `#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`;
var Sf = `LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`;
var wf = `varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`;
var Tf = `uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`;
var Af = `#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`;
var Ef = `ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`;
var Cf = `varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`;
var Lf = `BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`;
var Rf = `varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`;
var Pf = `PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`;
var If = `struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`;
var Df = `
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`;
var Nf = `#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`;
var Uf = `#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`;
var kf = `#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`;
var Of = `#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`;
var Ff = `#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`;
var zf = `#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`;
var Bf = `#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`;
var Vf = `#ifdef USE_MAP
	uniform sampler2D map;
#endif`;
var Gf = `#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`;
var Hf = `#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`;
var Wf = `float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`;
var jf = `#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`;
var qf = `#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`;
var Xf = `#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`;
var Kf = `#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`;
var Yf = `#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`;
var Jf = `float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`;
var Zf = `#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`;
var $f = `#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`;
var Qf = `#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`;
var ep = `#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`;
var tp = `#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`;
var np = `#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`;
var ip = `#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`;
var sp = `#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`;
var rp = `#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`;
var op = `#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`;
var ap = `vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`;
var lp = `#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`;
var cp = `vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`;
var up = `#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`;
var hp = `#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`;
var dp = `float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`;
var fp = `#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`;
var pp = `#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`;
var mp = `#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`;
var gp = `#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`;
var _p = `float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`;
var xp = `#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`;
var yp = `#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`;
var vp = `#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`;
var bp = `#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`;
var Mp = `float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`;
var Sp = `#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`;
var wp = `#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`;
var Tp = `#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`;
var Ap = `#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`;
var Ep = `#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`;
var Cp = `#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`;
var Lp = `#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_UV2
	attribute vec2 uv2;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`;
var Rp = `#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`;
var Pp = `#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;
var Ip = `varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`;
var Dp = `uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var Np = `varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`;
var Up = `#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var kp = `varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`;
var Op = `uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var Fp = `#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`;
var zp = `#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`;
var Bp = `#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`;
var Vp = `#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`;
var Gp = `varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`;
var Hp = `uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var Wp = `uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;
var jp = `uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`;
var qp = `#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`;
var Xp = `uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var Kp = `#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var Yp = `#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var Jp = `#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`;
var Zp = `#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var $p = `#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`;
var Qp = `#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`;
var em = `#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var tm = `#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var nm = `#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`;
var im = `#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var sm = `#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var rm = `#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var om = `uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`;
var am = `uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`;
var lm = `#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var cm = `uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`;
var um = `uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;
var hm = `uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`;
var Je4 = {
  alphamap_fragment: kd,
  alphamap_pars_fragment: Od,
  alphatest_fragment: Fd,
  alphatest_pars_fragment: zd,
  aomap_fragment: Bd,
  aomap_pars_fragment: Vd,
  begin_vertex: Gd,
  beginnormal_vertex: Hd,
  bsdfs: Wd,
  iridescence_fragment: jd,
  bumpmap_pars_fragment: qd,
  clipping_planes_fragment: Xd,
  clipping_planes_pars_fragment: Kd,
  clipping_planes_pars_vertex: Yd,
  clipping_planes_vertex: Jd,
  color_fragment: Zd,
  color_pars_fragment: $d,
  color_pars_vertex: Qd,
  color_vertex: ef,
  common: tf,
  cube_uv_reflection_fragment: nf,
  defaultnormal_vertex: sf,
  displacementmap_pars_vertex: rf,
  displacementmap_vertex: of,
  emissivemap_fragment: af,
  emissivemap_pars_fragment: lf,
  encodings_fragment: cf,
  encodings_pars_fragment: uf,
  envmap_fragment: hf,
  envmap_common_pars_fragment: df,
  envmap_pars_fragment: ff,
  envmap_pars_vertex: pf,
  envmap_physical_pars_fragment: Af,
  envmap_vertex: mf,
  fog_vertex: gf,
  fog_pars_vertex: _f,
  fog_fragment: xf,
  fog_pars_fragment: yf,
  gradientmap_pars_fragment: vf,
  lightmap_fragment: bf,
  lightmap_pars_fragment: Mf,
  lights_lambert_fragment: Sf,
  lights_lambert_pars_fragment: wf,
  lights_pars_begin: Tf,
  lights_toon_fragment: Ef,
  lights_toon_pars_fragment: Cf,
  lights_phong_fragment: Lf,
  lights_phong_pars_fragment: Rf,
  lights_physical_fragment: Pf,
  lights_physical_pars_fragment: If,
  lights_fragment_begin: Df,
  lights_fragment_maps: Nf,
  lights_fragment_end: Uf,
  logdepthbuf_fragment: kf,
  logdepthbuf_pars_fragment: Of,
  logdepthbuf_pars_vertex: Ff,
  logdepthbuf_vertex: zf,
  map_fragment: Bf,
  map_pars_fragment: Vf,
  map_particle_fragment: Gf,
  map_particle_pars_fragment: Hf,
  metalnessmap_fragment: Wf,
  metalnessmap_pars_fragment: jf,
  morphcolor_vertex: qf,
  morphnormal_vertex: Xf,
  morphtarget_pars_vertex: Kf,
  morphtarget_vertex: Yf,
  normal_fragment_begin: Jf,
  normal_fragment_maps: Zf,
  normal_pars_fragment: $f,
  normal_pars_vertex: Qf,
  normal_vertex: ep,
  normalmap_pars_fragment: tp,
  clearcoat_normal_fragment_begin: np,
  clearcoat_normal_fragment_maps: ip,
  clearcoat_pars_fragment: sp,
  iridescence_pars_fragment: rp,
  output_fragment: op,
  packing: ap,
  premultiplied_alpha_fragment: lp,
  project_vertex: cp,
  dithering_fragment: up,
  dithering_pars_fragment: hp,
  roughnessmap_fragment: dp,
  roughnessmap_pars_fragment: fp,
  shadowmap_pars_fragment: pp,
  shadowmap_pars_vertex: mp,
  shadowmap_vertex: gp,
  shadowmask_pars_fragment: _p,
  skinbase_vertex: xp,
  skinning_pars_vertex: yp,
  skinning_vertex: vp,
  skinnormal_vertex: bp,
  specularmap_fragment: Mp,
  specularmap_pars_fragment: Sp,
  tonemapping_fragment: wp,
  tonemapping_pars_fragment: Tp,
  transmission_fragment: Ap,
  transmission_pars_fragment: Ep,
  uv_pars_fragment: Cp,
  uv_pars_vertex: Lp,
  uv_vertex: Rp,
  worldpos_vertex: Pp,
  background_vert: Ip,
  background_frag: Dp,
  backgroundCube_vert: Np,
  backgroundCube_frag: Up,
  cube_vert: kp,
  cube_frag: Op,
  depth_vert: Fp,
  depth_frag: zp,
  distanceRGBA_vert: Bp,
  distanceRGBA_frag: Vp,
  equirect_vert: Gp,
  equirect_frag: Hp,
  linedashed_vert: Wp,
  linedashed_frag: jp,
  meshbasic_vert: qp,
  meshbasic_frag: Xp,
  meshlambert_vert: Kp,
  meshlambert_frag: Yp,
  meshmatcap_vert: Jp,
  meshmatcap_frag: Zp,
  meshnormal_vert: $p,
  meshnormal_frag: Qp,
  meshphong_vert: em,
  meshphong_frag: tm,
  meshphysical_vert: nm,
  meshphysical_frag: im,
  meshtoon_vert: sm,
  meshtoon_frag: rm,
  points_vert: om,
  points_frag: am,
  shadow_vert: lm,
  shadow_frag: cm,
  sprite_vert: um,
  sprite_frag: hm
};
var xe4 = {
  common: {
    diffuse: { value: new ze4(16777215) },
    opacity: { value: 1 },
    map: { value: null },
    mapTransform: { value: new Qe4() },
    alphaMap: { value: null },
    alphaMapTransform: { value: new Qe4() },
    alphaTest: { value: 0 }
  },
  specularmap: {
    specularMap: { value: null },
    specularMapTransform: { value: new Qe4() }
  },
  envmap: {
    envMap: { value: null },
    flipEnvMap: { value: -1 },
    reflectivity: { value: 1 },
    // basic, lambert, phong
    ior: { value: 1.5 },
    // physical
    refractionRatio: { value: 0.98 }
    // basic, lambert, phong
  },
  aomap: {
    aoMap: { value: null },
    aoMapIntensity: { value: 1 },
    aoMapTransform: { value: new Qe4() }
  },
  lightmap: {
    lightMap: { value: null },
    lightMapIntensity: { value: 1 },
    lightMapTransform: { value: new Qe4() }
  },
  bumpmap: {
    bumpMap: { value: null },
    bumpMapTransform: { value: new Qe4() },
    bumpScale: { value: 1 }
  },
  normalmap: {
    normalMap: { value: null },
    normalMapTransform: { value: new Qe4() },
    normalScale: { value: new We4(1, 1) }
  },
  displacementmap: {
    displacementMap: { value: null },
    displacementMapTransform: { value: new Qe4() },
    displacementScale: { value: 1 },
    displacementBias: { value: 0 }
  },
  emissivemap: {
    emissiveMap: { value: null },
    emissiveMapTransform: { value: new Qe4() }
  },
  metalnessmap: {
    metalnessMap: { value: null },
    metalnessMapTransform: { value: new Qe4() }
  },
  roughnessmap: {
    roughnessMap: { value: null },
    roughnessMapTransform: { value: new Qe4() }
  },
  gradientmap: {
    gradientMap: { value: null }
  },
  fog: {
    fogDensity: { value: 25e-5 },
    fogNear: { value: 1 },
    fogFar: { value: 2e3 },
    fogColor: { value: new ze4(16777215) }
  },
  lights: {
    ambientLightColor: { value: [] },
    lightProbe: { value: [] },
    directionalLights: { value: [], properties: {
      direction: {},
      color: {}
    } },
    directionalLightShadows: { value: [], properties: {
      shadowBias: {},
      shadowNormalBias: {},
      shadowRadius: {},
      shadowMapSize: {}
    } },
    directionalShadowMap: { value: [] },
    directionalShadowMatrix: { value: [] },
    spotLights: { value: [], properties: {
      color: {},
      position: {},
      direction: {},
      distance: {},
      coneCos: {},
      penumbraCos: {},
      decay: {}
    } },
    spotLightShadows: { value: [], properties: {
      shadowBias: {},
      shadowNormalBias: {},
      shadowRadius: {},
      shadowMapSize: {}
    } },
    spotLightMap: { value: [] },
    spotShadowMap: { value: [] },
    spotLightMatrix: { value: [] },
    pointLights: { value: [], properties: {
      color: {},
      position: {},
      decay: {},
      distance: {}
    } },
    pointLightShadows: { value: [], properties: {
      shadowBias: {},
      shadowNormalBias: {},
      shadowRadius: {},
      shadowMapSize: {},
      shadowCameraNear: {},
      shadowCameraFar: {}
    } },
    pointShadowMap: { value: [] },
    pointShadowMatrix: { value: [] },
    hemisphereLights: { value: [], properties: {
      direction: {},
      skyColor: {},
      groundColor: {}
    } },
    // TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src
    rectAreaLights: { value: [], properties: {
      color: {},
      position: {},
      width: {},
      height: {}
    } },
    ltc_1: { value: null },
    ltc_2: { value: null }
  },
  points: {
    diffuse: { value: new ze4(16777215) },
    opacity: { value: 1 },
    size: { value: 1 },
    scale: { value: 1 },
    map: { value: null },
    alphaMap: { value: null },
    alphaTest: { value: 0 },
    uvTransform: { value: new Qe4() }
  },
  sprite: {
    diffuse: { value: new ze4(16777215) },
    opacity: { value: 1 },
    center: { value: new We4(0.5, 0.5) },
    rotation: { value: 0 },
    map: { value: null },
    mapTransform: { value: new Qe4() },
    alphaMap: { value: null },
    alphaTest: { value: 0 }
  }
};
var Cn3 = {
  basic: {
    uniforms: tn3([
      xe4.common,
      xe4.specularmap,
      xe4.envmap,
      xe4.aomap,
      xe4.lightmap,
      xe4.fog
    ]),
    vertexShader: Je4.meshbasic_vert,
    fragmentShader: Je4.meshbasic_frag
  },
  lambert: {
    uniforms: tn3([
      xe4.common,
      xe4.specularmap,
      xe4.envmap,
      xe4.aomap,
      xe4.lightmap,
      xe4.emissivemap,
      xe4.bumpmap,
      xe4.normalmap,
      xe4.displacementmap,
      xe4.fog,
      xe4.lights,
      {
        emissive: { value: new ze4(0) }
      }
    ]),
    vertexShader: Je4.meshlambert_vert,
    fragmentShader: Je4.meshlambert_frag
  },
  phong: {
    uniforms: tn3([
      xe4.common,
      xe4.specularmap,
      xe4.envmap,
      xe4.aomap,
      xe4.lightmap,
      xe4.emissivemap,
      xe4.bumpmap,
      xe4.normalmap,
      xe4.displacementmap,
      xe4.fog,
      xe4.lights,
      {
        emissive: { value: new ze4(0) },
        specular: { value: new ze4(1118481) },
        shininess: { value: 30 }
      }
    ]),
    vertexShader: Je4.meshphong_vert,
    fragmentShader: Je4.meshphong_frag
  },
  standard: {
    uniforms: tn3([
      xe4.common,
      xe4.envmap,
      xe4.aomap,
      xe4.lightmap,
      xe4.emissivemap,
      xe4.bumpmap,
      xe4.normalmap,
      xe4.displacementmap,
      xe4.roughnessmap,
      xe4.metalnessmap,
      xe4.fog,
      xe4.lights,
      {
        emissive: { value: new ze4(0) },
        roughness: { value: 1 },
        metalness: { value: 0 },
        envMapIntensity: { value: 1 }
        // temporary
      }
    ]),
    vertexShader: Je4.meshphysical_vert,
    fragmentShader: Je4.meshphysical_frag
  },
  toon: {
    uniforms: tn3([
      xe4.common,
      xe4.aomap,
      xe4.lightmap,
      xe4.emissivemap,
      xe4.bumpmap,
      xe4.normalmap,
      xe4.displacementmap,
      xe4.gradientmap,
      xe4.fog,
      xe4.lights,
      {
        emissive: { value: new ze4(0) }
      }
    ]),
    vertexShader: Je4.meshtoon_vert,
    fragmentShader: Je4.meshtoon_frag
  },
  matcap: {
    uniforms: tn3([
      xe4.common,
      xe4.bumpmap,
      xe4.normalmap,
      xe4.displacementmap,
      xe4.fog,
      {
        matcap: { value: null }
      }
    ]),
    vertexShader: Je4.meshmatcap_vert,
    fragmentShader: Je4.meshmatcap_frag
  },
  points: {
    uniforms: tn3([
      xe4.points,
      xe4.fog
    ]),
    vertexShader: Je4.points_vert,
    fragmentShader: Je4.points_frag
  },
  dashed: {
    uniforms: tn3([
      xe4.common,
      xe4.fog,
      {
        scale: { value: 1 },
        dashSize: { value: 1 },
        totalSize: { value: 2 }
      }
    ]),
    vertexShader: Je4.linedashed_vert,
    fragmentShader: Je4.linedashed_frag
  },
  depth: {
    uniforms: tn3([
      xe4.common,
      xe4.displacementmap
    ]),
    vertexShader: Je4.depth_vert,
    fragmentShader: Je4.depth_frag
  },
  normal: {
    uniforms: tn3([
      xe4.common,
      xe4.bumpmap,
      xe4.normalmap,
      xe4.displacementmap,
      {
        opacity: { value: 1 }
      }
    ]),
    vertexShader: Je4.meshnormal_vert,
    fragmentShader: Je4.meshnormal_frag
  },
  sprite: {
    uniforms: tn3([
      xe4.sprite,
      xe4.fog
    ]),
    vertexShader: Je4.sprite_vert,
    fragmentShader: Je4.sprite_frag
  },
  background: {
    uniforms: {
      uvTransform: { value: new Qe4() },
      t2D: { value: null },
      backgroundIntensity: { value: 1 }
    },
    vertexShader: Je4.background_vert,
    fragmentShader: Je4.background_frag
  },
  backgroundCube: {
    uniforms: {
      envMap: { value: null },
      flipEnvMap: { value: -1 },
      backgroundBlurriness: { value: 0 },
      backgroundIntensity: { value: 1 }
    },
    vertexShader: Je4.backgroundCube_vert,
    fragmentShader: Je4.backgroundCube_frag
  },
  cube: {
    uniforms: {
      tCube: { value: null },
      tFlip: { value: -1 },
      opacity: { value: 1 }
    },
    vertexShader: Je4.cube_vert,
    fragmentShader: Je4.cube_frag
  },
  equirect: {
    uniforms: {
      tEquirect: { value: null }
    },
    vertexShader: Je4.equirect_vert,
    fragmentShader: Je4.equirect_frag
  },
  distanceRGBA: {
    uniforms: tn3([
      xe4.common,
      xe4.displacementmap,
      {
        referencePosition: { value: new U9() },
        nearDistance: { value: 1 },
        farDistance: { value: 1e3 }
      }
    ]),
    vertexShader: Je4.distanceRGBA_vert,
    fragmentShader: Je4.distanceRGBA_frag
  },
  shadow: {
    uniforms: tn3([
      xe4.lights,
      xe4.fog,
      {
        color: { value: new ze4(0) },
        opacity: { value: 1 }
      }
    ]),
    vertexShader: Je4.shadow_vert,
    fragmentShader: Je4.shadow_frag
  }
};
Cn3.physical = {
  uniforms: tn3([
    Cn3.standard.uniforms,
    {
      clearcoat: { value: 0 },
      clearcoatMap: { value: null },
      clearcoatMapTransform: { value: new Qe4() },
      clearcoatNormalMap: { value: null },
      clearcoatNormalMapTransform: { value: new Qe4() },
      clearcoatNormalScale: { value: new We4(1, 1) },
      clearcoatRoughness: { value: 0 },
      clearcoatRoughnessMap: { value: null },
      clearcoatRoughnessMapTransform: { value: new Qe4() },
      iridescence: { value: 0 },
      iridescenceMap: { value: null },
      iridescenceMapTransform: { value: new Qe4() },
      iridescenceIOR: { value: 1.3 },
      iridescenceThicknessMinimum: { value: 100 },
      iridescenceThicknessMaximum: { value: 400 },
      iridescenceThicknessMap: { value: null },
      iridescenceThicknessMapTransform: { value: new Qe4() },
      sheen: { value: 0 },
      sheenColor: { value: new ze4(0) },
      sheenColorMap: { value: null },
      sheenColorMapTransform: { value: new Qe4() },
      sheenRoughness: { value: 1 },
      sheenRoughnessMap: { value: null },
      sheenRoughnessMapTransform: { value: new Qe4() },
      transmission: { value: 0 },
      transmissionMap: { value: null },
      transmissionMapTransform: { value: new Qe4() },
      transmissionSamplerSize: { value: new We4() },
      transmissionSamplerMap: { value: null },
      thickness: { value: 0 },
      thicknessMap: { value: null },
      thicknessMapTransform: { value: new Qe4() },
      attenuationDistance: { value: 0 },
      attenuationColor: { value: new ze4(0) },
      specularColor: { value: new ze4(1, 1, 1) },
      specularColorMap: { value: null },
      specularColorMapTransform: { value: new Qe4() },
      specularIntensity: { value: 1 },
      specularIntensityMap: { value: null },
      specularIntensityMapTransform: { value: new Qe4() }
    }
  ]),
  vertexShader: Je4.meshphysical_vert,
  fragmentShader: Je4.meshphysical_frag
};
var Fr3 = { r: 0, b: 0, g: 0 };
function dm(a22, e11, t19, n33, i27, s18, r24) {
  const o13 = new ze4(0);
  let c27 = s18 === true ? 0 : 1, l26, u35, h26 = null, d34 = 0, p26 = null;
  function g32(m34, f40) {
    let E25 = false, b35 = f40.isScene === true ? f40.background : null;
    b35 && b35.isTexture && (b35 = (f40.backgroundBlurriness > 0 ? t19 : e11).get(b35));
    const w31 = a22.xr, S23 = w31.getSession && w31.getSession();
    S23 && S23.environmentBlendMode === "additive" && (b35 = null), b35 === null ? y34(o13, c27) : b35 && b35.isColor && (y34(b35, 1), E25 = true), (a22.autoClear || E25) && a22.clear(a22.autoClearColor, a22.autoClearDepth, a22.autoClearStencil), b35 && (b35.isCubeTexture || b35.mapping === lo) ? (u35 === void 0 && (u35 = new Pt5(
      new Ui(1, 1, 1),
      new Ri({
        name: "BackgroundCubeMaterial",
        uniforms: Cs(Cn3.backgroundCube.uniforms),
        vertexShader: Cn3.backgroundCube.vertexShader,
        fragmentShader: Cn3.backgroundCube.fragmentShader,
        side: sn3,
        depthTest: false,
        depthWrite: false,
        fog: false
      })
    ), u35.geometry.deleteAttribute("normal"), u35.geometry.deleteAttribute("uv"), u35.onBeforeRender = function(D18, N22, I18) {
      this.matrixWorld.copyPosition(I18.matrixWorld);
    }, Object.defineProperty(u35.material, "envMap", {
      get: function() {
        return this.uniforms.envMap.value;
      }
    }), i27.update(u35)), u35.material.uniforms.envMap.value = b35, u35.material.uniforms.flipEnvMap.value = b35.isCubeTexture && b35.isRenderTargetTexture === false ? -1 : 1, u35.material.uniforms.backgroundBlurriness.value = f40.backgroundBlurriness, u35.material.uniforms.backgroundIntensity.value = f40.backgroundIntensity, u35.material.toneMapped = b35.encoding !== st8, (h26 !== b35 || d34 !== b35.version || p26 !== a22.toneMapping) && (u35.material.needsUpdate = true, h26 = b35, d34 = b35.version, p26 = a22.toneMapping), u35.layers.enableAll(), m34.unshift(u35, u35.geometry, u35.material, 0, 0, null)) : b35 && b35.isTexture && (l26 === void 0 && (l26 = new Pt5(
      new uo(2, 2),
      new Ri({
        name: "BackgroundMaterial",
        uniforms: Cs(Cn3.background.uniforms),
        vertexShader: Cn3.background.vertexShader,
        fragmentShader: Cn3.background.fragmentShader,
        side: Pn3,
        depthTest: false,
        depthWrite: false,
        fog: false
      })
    ), l26.geometry.deleteAttribute("normal"), Object.defineProperty(l26.material, "map", {
      get: function() {
        return this.uniforms.t2D.value;
      }
    }), i27.update(l26)), l26.material.uniforms.t2D.value = b35, l26.material.uniforms.backgroundIntensity.value = f40.backgroundIntensity, l26.material.toneMapped = b35.encoding !== st8, b35.matrixAutoUpdate === true && b35.updateMatrix(), l26.material.uniforms.uvTransform.value.copy(b35.matrix), (h26 !== b35 || d34 !== b35.version || p26 !== a22.toneMapping) && (l26.material.needsUpdate = true, h26 = b35, d34 = b35.version, p26 = a22.toneMapping), l26.layers.enableAll(), m34.unshift(l26, l26.geometry, l26.material, 0, 0, null));
  }
  function y34(m34, f40) {
    m34.getRGB(Fr3, mu(a22)), n33.buffers.color.setClear(Fr3.r, Fr3.g, Fr3.b, f40, r24);
  }
  return {
    getClearColor: function() {
      return o13;
    },
    setClearColor: function(m34, f40 = 1) {
      o13.set(m34), c27 = f40, y34(o13, c27);
    },
    getClearAlpha: function() {
      return c27;
    },
    setClearAlpha: function(m34) {
      c27 = m34, y34(o13, c27);
    },
    render: g32
  };
}
function fm(a22, e11, t19, n33) {
  const i27 = a22.getParameter(34921), s18 = n33.isWebGL2 ? null : e11.get("OES_vertex_array_object"), r24 = n33.isWebGL2 || s18 !== null, o13 = {}, c27 = m34(null);
  let l26 = c27, u35 = false;
  function h26(V16, H16, W11, te7, J12) {
    let ie8 = false;
    if (r24) {
      const le7 = y34(te7, W11, H16);
      l26 !== le7 && (l26 = le7, p26(l26.object)), ie8 = f40(V16, te7, W11, J12), ie8 && E25(V16, te7, W11, J12);
    } else {
      const le7 = H16.wireframe === true;
      (l26.geometry !== te7.id || l26.program !== W11.id || l26.wireframe !== le7) && (l26.geometry = te7.id, l26.program = W11.id, l26.wireframe = le7, ie8 = true);
    }
    J12 !== null && t19.update(J12, 34963), (ie8 || u35) && (u35 = false, I18(V16, H16, W11, te7), J12 !== null && a22.bindBuffer(34963, t19.get(J12).buffer));
  }
  function d34() {
    return n33.isWebGL2 ? a22.createVertexArray() : s18.createVertexArrayOES();
  }
  function p26(V16) {
    return n33.isWebGL2 ? a22.bindVertexArray(V16) : s18.bindVertexArrayOES(V16);
  }
  function g32(V16) {
    return n33.isWebGL2 ? a22.deleteVertexArray(V16) : s18.deleteVertexArrayOES(V16);
  }
  function y34(V16, H16, W11) {
    const te7 = W11.wireframe === true;
    let J12 = o13[V16.id];
    J12 === void 0 && (J12 = {}, o13[V16.id] = J12);
    let ie8 = J12[H16.id];
    ie8 === void 0 && (ie8 = {}, J12[H16.id] = ie8);
    let le7 = ie8[te7];
    return le7 === void 0 && (le7 = m34(d34()), ie8[te7] = le7), le7;
  }
  function m34(V16) {
    const H16 = [], W11 = [], te7 = [];
    for (let J12 = 0; J12 < i27; J12++)
      H16[J12] = 0, W11[J12] = 0, te7[J12] = 0;
    return {
      // for backward compatibility on non-VAO support browser
      geometry: null,
      program: null,
      wireframe: false,
      newAttributes: H16,
      enabledAttributes: W11,
      attributeDivisors: te7,
      object: V16,
      attributes: {},
      index: null
    };
  }
  function f40(V16, H16, W11, te7) {
    const J12 = l26.attributes, ie8 = H16.attributes;
    let le7 = 0;
    const me9 = W11.getAttributes();
    for (const he8 in me9)
      if (me9[he8].location >= 0) {
        const X14 = J12[he8];
        let ee7 = ie8[he8];
        if (ee7 === void 0 && (he8 === "instanceMatrix" && V16.instanceMatrix && (ee7 = V16.instanceMatrix), he8 === "instanceColor" && V16.instanceColor && (ee7 = V16.instanceColor)), X14 === void 0 || X14.attribute !== ee7 || ee7 && X14.data !== ee7.data)
          return true;
        le7++;
      }
    return l26.attributesNum !== le7 || l26.index !== te7;
  }
  function E25(V16, H16, W11, te7) {
    const J12 = {}, ie8 = H16.attributes;
    let le7 = 0;
    const me9 = W11.getAttributes();
    for (const he8 in me9)
      if (me9[he8].location >= 0) {
        let X14 = ie8[he8];
        X14 === void 0 && (he8 === "instanceMatrix" && V16.instanceMatrix && (X14 = V16.instanceMatrix), he8 === "instanceColor" && V16.instanceColor && (X14 = V16.instanceColor));
        const ee7 = {};
        ee7.attribute = X14, X14 && X14.data && (ee7.data = X14.data), J12[he8] = ee7, le7++;
      }
    l26.attributes = J12, l26.attributesNum = le7, l26.index = te7;
  }
  function b35() {
    const V16 = l26.newAttributes;
    for (let H16 = 0, W11 = V16.length; H16 < W11; H16++)
      V16[H16] = 0;
  }
  function w31(V16) {
    S23(V16, 0);
  }
  function S23(V16, H16) {
    const W11 = l26.newAttributes, te7 = l26.enabledAttributes, J12 = l26.attributeDivisors;
    W11[V16] = 1, te7[V16] === 0 && (a22.enableVertexAttribArray(V16), te7[V16] = 1), J12[V16] !== H16 && ((n33.isWebGL2 ? a22 : e11.get("ANGLE_instanced_arrays"))[n33.isWebGL2 ? "vertexAttribDivisor" : "vertexAttribDivisorANGLE"](V16, H16), J12[V16] = H16);
  }
  function D18() {
    const V16 = l26.newAttributes, H16 = l26.enabledAttributes;
    for (let W11 = 0, te7 = H16.length; W11 < te7; W11++)
      H16[W11] !== V16[W11] && (a22.disableVertexAttribArray(W11), H16[W11] = 0);
  }
  function N22(V16, H16, W11, te7, J12, ie8) {
    n33.isWebGL2 === true && (W11 === 5124 || W11 === 5125) ? a22.vertexAttribIPointer(V16, H16, W11, J12, ie8) : a22.vertexAttribPointer(V16, H16, W11, te7, J12, ie8);
  }
  function I18(V16, H16, W11, te7) {
    if (n33.isWebGL2 === false && (V16.isInstancedMesh || te7.isInstancedBufferGeometry) && e11.get("ANGLE_instanced_arrays") === null)
      return;
    b35();
    const J12 = te7.attributes, ie8 = W11.getAttributes(), le7 = H16.defaultAttributeValues;
    for (const me9 in ie8) {
      const he8 = ie8[me9];
      if (he8.location >= 0) {
        let j19 = J12[me9];
        if (j19 === void 0 && (me9 === "instanceMatrix" && V16.instanceMatrix && (j19 = V16.instanceMatrix), me9 === "instanceColor" && V16.instanceColor && (j19 = V16.instanceColor)), j19 !== void 0) {
          const X14 = j19.normalized, ee7 = j19.itemSize, $25 = t19.get(j19);
          if ($25 === void 0)
            continue;
          const z21 = $25.buffer, be7 = $25.type, Ee5 = $25.bytesPerElement;
          if (j19.isInterleavedBufferAttribute) {
            const pe8 = j19.data, ke7 = pe8.stride, nt17 = j19.offset;
            if (pe8.isInstancedInterleavedBuffer) {
              for (let Ie7 = 0; Ie7 < he8.locationSize; Ie7++)
                S23(he8.location + Ie7, pe8.meshPerAttribute);
              V16.isInstancedMesh !== true && te7._maxInstanceCount === void 0 && (te7._maxInstanceCount = pe8.meshPerAttribute * pe8.count);
            } else
              for (let Ie7 = 0; Ie7 < he8.locationSize; Ie7++)
                w31(he8.location + Ie7);
            a22.bindBuffer(34962, z21);
            for (let Ie7 = 0; Ie7 < he8.locationSize; Ie7++)
              N22(
                he8.location + Ie7,
                ee7 / he8.locationSize,
                be7,
                X14,
                ke7 * Ee5,
                (nt17 + ee7 / he8.locationSize * Ie7) * Ee5
              );
          } else {
            if (j19.isInstancedBufferAttribute) {
              for (let pe8 = 0; pe8 < he8.locationSize; pe8++)
                S23(he8.location + pe8, j19.meshPerAttribute);
              V16.isInstancedMesh !== true && te7._maxInstanceCount === void 0 && (te7._maxInstanceCount = j19.meshPerAttribute * j19.count);
            } else
              for (let pe8 = 0; pe8 < he8.locationSize; pe8++)
                w31(he8.location + pe8);
            a22.bindBuffer(34962, z21);
            for (let pe8 = 0; pe8 < he8.locationSize; pe8++)
              N22(
                he8.location + pe8,
                ee7 / he8.locationSize,
                be7,
                X14,
                ee7 * Ee5,
                ee7 / he8.locationSize * pe8 * Ee5
              );
          }
        } else if (le7 !== void 0) {
          const X14 = le7[me9];
          if (X14 !== void 0)
            switch (X14.length) {
              case 2:
                a22.vertexAttrib2fv(he8.location, X14);
                break;
              case 3:
                a22.vertexAttrib3fv(he8.location, X14);
                break;
              case 4:
                a22.vertexAttrib4fv(he8.location, X14);
                break;
              default:
                a22.vertexAttrib1fv(he8.location, X14);
            }
        }
      }
    }
    D18();
  }
  function v31() {
    B22();
    for (const V16 in o13) {
      const H16 = o13[V16];
      for (const W11 in H16) {
        const te7 = H16[W11];
        for (const J12 in te7)
          g32(te7[J12].object), delete te7[J12];
        delete H16[W11];
      }
      delete o13[V16];
    }
  }
  function L12(V16) {
    if (o13[V16.id] === void 0)
      return;
    const H16 = o13[V16.id];
    for (const W11 in H16) {
      const te7 = H16[W11];
      for (const J12 in te7)
        g32(te7[J12].object), delete te7[J12];
      delete H16[W11];
    }
    delete o13[V16.id];
  }
  function G16(V16) {
    for (const H16 in o13) {
      const W11 = o13[H16];
      if (W11[V16.id] === void 0)
        continue;
      const te7 = W11[V16.id];
      for (const J12 in te7)
        g32(te7[J12].object), delete te7[J12];
      delete W11[V16.id];
    }
  }
  function B22() {
    k29(), u35 = true, l26 !== c27 && (l26 = c27, p26(l26.object));
  }
  function k29() {
    c27.geometry = null, c27.program = null, c27.wireframe = false;
  }
  return {
    setup: h26,
    reset: B22,
    resetDefaultState: k29,
    dispose: v31,
    releaseStatesOfGeometry: L12,
    releaseStatesOfProgram: G16,
    initAttributes: b35,
    enableAttribute: w31,
    disableUnusedAttributes: D18
  };
}
function pm(a22, e11, t19, n33) {
  const i27 = n33.isWebGL2;
  let s18;
  function r24(l26) {
    s18 = l26;
  }
  function o13(l26, u35) {
    a22.drawArrays(s18, l26, u35), t19.update(u35, s18, 1);
  }
  function c27(l26, u35, h26) {
    if (h26 === 0)
      return;
    let d34, p26;
    if (i27)
      d34 = a22, p26 = "drawArraysInstanced";
    else if (d34 = e11.get("ANGLE_instanced_arrays"), p26 = "drawArraysInstancedANGLE", d34 === null) {
      console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
      return;
    }
    d34[p26](s18, l26, u35, h26), t19.update(u35, s18, h26);
  }
  this.setMode = r24, this.render = o13, this.renderInstances = c27;
}
function mm(a22, e11, t19) {
  let n33;
  function i27() {
    if (n33 !== void 0)
      return n33;
    if (e11.has("EXT_texture_filter_anisotropic") === true) {
      const N22 = e11.get("EXT_texture_filter_anisotropic");
      n33 = a22.getParameter(N22.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
    } else
      n33 = 0;
    return n33;
  }
  function s18(N22) {
    if (N22 === "highp") {
      if (a22.getShaderPrecisionFormat(35633, 36338).precision > 0 && a22.getShaderPrecisionFormat(35632, 36338).precision > 0)
        return "highp";
      N22 = "mediump";
    }
    return N22 === "mediump" && a22.getShaderPrecisionFormat(35633, 36337).precision > 0 && a22.getShaderPrecisionFormat(35632, 36337).precision > 0 ? "mediump" : "lowp";
  }
  const r24 = typeof WebGL2RenderingContext < "u" && a22.constructor.name === "WebGL2RenderingContext";
  let o13 = t19.precision !== void 0 ? t19.precision : "highp";
  const c27 = s18(o13);
  c27 !== o13 && (console.warn("THREE.WebGLRenderer:", o13, "not supported, using", c27, "instead."), o13 = c27);
  const l26 = r24 || e11.has("WEBGL_draw_buffers"), u35 = t19.logarithmicDepthBuffer === true, h26 = a22.getParameter(34930), d34 = a22.getParameter(35660), p26 = a22.getParameter(3379), g32 = a22.getParameter(34076), y34 = a22.getParameter(34921), m34 = a22.getParameter(36347), f40 = a22.getParameter(36348), E25 = a22.getParameter(36349), b35 = d34 > 0, w31 = r24 || e11.has("OES_texture_float"), S23 = b35 && w31, D18 = r24 ? a22.getParameter(36183) : 0;
  return {
    isWebGL2: r24,
    drawBuffers: l26,
    getMaxAnisotropy: i27,
    getMaxPrecision: s18,
    precision: o13,
    logarithmicDepthBuffer: u35,
    maxTextures: h26,
    maxVertexTextures: d34,
    maxTextureSize: p26,
    maxCubemapSize: g32,
    maxAttributes: y34,
    maxVertexUniforms: m34,
    maxVaryings: f40,
    maxFragmentUniforms: E25,
    vertexTextures: b35,
    floatFragmentTextures: w31,
    floatVertexTextures: S23,
    maxSamples: D18
  };
}
function gm(a22) {
  const e11 = this;
  let t19 = null, n33 = 0, i27 = false, s18 = false;
  const r24 = new _i3(), o13 = new Qe4(), c27 = { value: null, needsUpdate: false };
  this.uniform = c27, this.numPlanes = 0, this.numIntersection = 0, this.init = function(h26, d34) {
    const p26 = h26.length !== 0 || d34 || // enable state of previous frame - the clipping code has to
    // run another frame in order to reset the state:
    n33 !== 0 || i27;
    return i27 = d34, n33 = h26.length, p26;
  }, this.beginShadows = function() {
    s18 = true, u35(null);
  }, this.endShadows = function() {
    s18 = false;
  }, this.setGlobalState = function(h26, d34) {
    t19 = u35(h26, d34, 0);
  }, this.setState = function(h26, d34, p26) {
    const g32 = h26.clippingPlanes, y34 = h26.clipIntersection, m34 = h26.clipShadows, f40 = a22.get(h26);
    if (!i27 || g32 === null || g32.length === 0 || s18 && !m34)
      s18 ? u35(null) : l26();
    else {
      const E25 = s18 ? 0 : n33, b35 = E25 * 4;
      let w31 = f40.clippingState || null;
      c27.value = w31, w31 = u35(g32, d34, b35, p26);
      for (let S23 = 0; S23 !== b35; ++S23)
        w31[S23] = t19[S23];
      f40.clippingState = w31, this.numIntersection = y34 ? this.numPlanes : 0, this.numPlanes += E25;
    }
  };
  function l26() {
    c27.value !== t19 && (c27.value = t19, c27.needsUpdate = n33 > 0), e11.numPlanes = n33, e11.numIntersection = 0;
  }
  function u35(h26, d34, p26, g32) {
    const y34 = h26 !== null ? h26.length : 0;
    let m34 = null;
    if (y34 !== 0) {
      if (m34 = c27.value, g32 !== true || m34 === null) {
        const f40 = p26 + y34 * 4, E25 = d34.matrixWorldInverse;
        o13.getNormalMatrix(E25), (m34 === null || m34.length < f40) && (m34 = new Float32Array(f40));
        for (let b35 = 0, w31 = p26; b35 !== y34; ++b35, w31 += 4)
          r24.copy(h26[b35]).applyMatrix4(E25, o13), r24.normal.toArray(m34, w31), m34[w31 + 3] = r24.constant;
      }
      c27.value = m34, c27.needsUpdate = true;
    }
    return e11.numPlanes = y34, e11.numIntersection = 0, m34;
  }
}
function _m(a22) {
  let e11 = /* @__PURE__ */ new WeakMap();
  function t19(r24, o13) {
    return o13 === da ? r24.mapping = Ss : o13 === fa && (r24.mapping = ws), r24;
  }
  function n33(r24) {
    if (r24 && r24.isTexture && r24.isRenderTargetTexture === false) {
      const o13 = r24.mapping;
      if (o13 === da || o13 === fa)
        if (e11.has(r24)) {
          const c27 = e11.get(r24).texture;
          return t19(c27, r24.mapping);
        } else {
          const c27 = r24.image;
          if (c27 && c27.height > 0) {
            const l26 = new Id(c27.height / 2);
            return l26.fromEquirectangularTexture(a22, r24), e11.set(r24, l26), r24.addEventListener("dispose", i27), t19(l26.texture, r24.mapping);
          } else
            return null;
        }
    }
    return r24;
  }
  function i27(r24) {
    const o13 = r24.target;
    o13.removeEventListener("dispose", i27);
    const c27 = e11.get(o13);
    c27 !== void 0 && (e11.delete(o13), c27.dispose());
  }
  function s18() {
    e11 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: n33,
    dispose: s18
  };
}
var ho = class extends gu {
  constructor(e11 = -1, t19 = 1, n33 = 1, i27 = -1, s18 = 0.1, r24 = 2e3) {
    super(), this.isOrthographicCamera = true, this.type = "OrthographicCamera", this.zoom = 1, this.view = null, this.left = e11, this.right = t19, this.top = n33, this.bottom = i27, this.near = s18, this.far = r24, this.updateProjectionMatrix();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.left = e11.left, this.right = e11.right, this.top = e11.top, this.bottom = e11.bottom, this.near = e11.near, this.far = e11.far, this.zoom = e11.zoom, this.view = e11.view === null ? null : Object.assign({}, e11.view), this;
  }
  setViewOffset(e11, t19, n33, i27, s18, r24) {
    this.view === null && (this.view = {
      enabled: true,
      fullWidth: 1,
      fullHeight: 1,
      offsetX: 0,
      offsetY: 0,
      width: 1,
      height: 1
    }), this.view.enabled = true, this.view.fullWidth = e11, this.view.fullHeight = t19, this.view.offsetX = n33, this.view.offsetY = i27, this.view.width = s18, this.view.height = r24, this.updateProjectionMatrix();
  }
  clearViewOffset() {
    this.view !== null && (this.view.enabled = false), this.updateProjectionMatrix();
  }
  updateProjectionMatrix() {
    const e11 = (this.right - this.left) / (2 * this.zoom), t19 = (this.top - this.bottom) / (2 * this.zoom), n33 = (this.right + this.left) / 2, i27 = (this.top + this.bottom) / 2;
    let s18 = n33 - e11, r24 = n33 + e11, o13 = i27 + t19, c27 = i27 - t19;
    if (this.view !== null && this.view.enabled) {
      const l26 = (this.right - this.left) / this.view.fullWidth / this.zoom, u35 = (this.top - this.bottom) / this.view.fullHeight / this.zoom;
      s18 += l26 * this.view.offsetX, r24 = s18 + l26 * this.view.width, o13 -= u35 * this.view.offsetY, c27 = o13 - u35 * this.view.height;
    }
    this.projectionMatrix.makeOrthographic(s18, r24, o13, c27, this.near, this.far), this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return t19.object.zoom = this.zoom, t19.object.left = this.left, t19.object.right = this.right, t19.object.top = this.top, t19.object.bottom = this.bottom, t19.object.near = this.near, t19.object.far = this.far, this.view !== null && (t19.object.view = Object.assign({}, this.view)), t19;
  }
};
var ms = 4;
var Kl = [0.125, 0.215, 0.35, 0.446, 0.526, 0.582];
var yi3 = 20;
var Zo = new ho();
var Yl = new ze4();
var $o = null;
var xi3 = (1 + Math.sqrt(5)) / 2;
var cs = 1 / xi3;
var Jl = [
  new U9(1, 1, 1),
  new U9(-1, 1, 1),
  new U9(1, 1, -1),
  new U9(-1, 1, -1),
  new U9(0, xi3, cs),
  new U9(0, xi3, -cs),
  new U9(cs, 0, xi3),
  new U9(-cs, 0, xi3),
  new U9(xi3, cs, 0),
  new U9(-xi3, cs, 0)
];
var Zl = class {
  constructor(e11) {
    this._renderer = e11, this._pingPongRenderTarget = null, this._lodMax = 0, this._cubeSize = 0, this._lodPlanes = [], this._sizeLods = [], this._sigmas = [], this._blurMaterial = null, this._cubemapMaterial = null, this._equirectMaterial = null, this._compileMaterial(this._blurMaterial);
  }
  /**
   * Generates a PMREM from a supplied Scene, which can be faster than using an
   * image if networking bandwidth is low. Optional sigma specifies a blur radius
   * in radians to be applied to the scene before PMREM generation. Optional near
   * and far planes ensure the scene is rendered in its entirety (the cubeCamera
   * is placed at the origin).
   */
  fromScene(e11, t19 = 0, n33 = 0.1, i27 = 100) {
    $o = this._renderer.getRenderTarget(), this._setSize(256);
    const s18 = this._allocateTargets();
    return s18.depthBuffer = true, this._sceneToCubeUV(e11, n33, i27, s18), t19 > 0 && this._blur(s18, 0, 0, t19), this._applyPMREM(s18), this._cleanup(s18), s18;
  }
  /**
   * Generates a PMREM from an equirectangular texture, which can be either LDR
   * or HDR. The ideal input image size is 1k (1024 x 512),
   * as this matches best with the 256 x 256 cubemap output.
   */
  fromEquirectangular(e11, t19 = null) {
    return this._fromTexture(e11, t19);
  }
  /**
   * Generates a PMREM from an cubemap texture, which can be either LDR
   * or HDR. The ideal input cube size is 256 x 256,
   * as this matches best with the 256 x 256 cubemap output.
   */
  fromCubemap(e11, t19 = null) {
    return this._fromTexture(e11, t19);
  }
  /**
   * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during
   * your texture's network fetch for increased concurrency.
   */
  compileCubemapShader() {
    this._cubemapMaterial === null && (this._cubemapMaterial = ec(), this._compileMaterial(this._cubemapMaterial));
  }
  /**
   * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during
   * your texture's network fetch for increased concurrency.
   */
  compileEquirectangularShader() {
    this._equirectMaterial === null && (this._equirectMaterial = Ql(), this._compileMaterial(this._equirectMaterial));
  }
  /**
   * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,
   * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on
   * one of them will cause any others to also become unusable.
   */
  dispose() {
    this._dispose(), this._cubemapMaterial !== null && this._cubemapMaterial.dispose(), this._equirectMaterial !== null && this._equirectMaterial.dispose();
  }
  // private interface
  _setSize(e11) {
    this._lodMax = Math.floor(Math.log2(e11)), this._cubeSize = Math.pow(2, this._lodMax);
  }
  _dispose() {
    this._blurMaterial !== null && this._blurMaterial.dispose(), this._pingPongRenderTarget !== null && this._pingPongRenderTarget.dispose();
    for (let e11 = 0; e11 < this._lodPlanes.length; e11++)
      this._lodPlanes[e11].dispose();
  }
  _cleanup(e11) {
    this._renderer.setRenderTarget($o), e11.scissorTest = false, zr3(e11, 0, 0, e11.width, e11.height);
  }
  _fromTexture(e11, t19) {
    e11.mapping === Ss || e11.mapping === ws ? this._setSize(e11.image.length === 0 ? 16 : e11.image[0].width || e11.image[0].image.width) : this._setSize(e11.image.width / 4), $o = this._renderer.getRenderTarget();
    const n33 = t19 || this._allocateTargets();
    return this._textureToCubeUV(e11, n33), this._applyPMREM(n33), this._cleanup(n33), n33;
  }
  _allocateTargets() {
    const e11 = 3 * Math.max(this._cubeSize, 112), t19 = 4 * this._cubeSize, n33 = {
      magFilter: Ht4,
      minFilter: Ht4,
      generateMipmaps: false,
      type: Qs,
      format: pn3,
      encoding: Ci,
      depthBuffer: false
    }, i27 = $l(e11, t19, n33);
    if (this._pingPongRenderTarget === null || this._pingPongRenderTarget.width !== e11 || this._pingPongRenderTarget.height !== t19) {
      this._pingPongRenderTarget !== null && this._dispose(), this._pingPongRenderTarget = $l(e11, t19, n33);
      const { _lodMax: s18 } = this;
      ({ sizeLods: this._sizeLods, lodPlanes: this._lodPlanes, sigmas: this._sigmas } = xm(s18)), this._blurMaterial = ym(s18, e11, t19);
    }
    return i27;
  }
  _compileMaterial(e11) {
    const t19 = new Pt5(this._lodPlanes[0], e11);
    this._renderer.compile(t19, Zo);
  }
  _sceneToCubeUV(e11, t19, n33, i27) {
    const o13 = new Vt3(90, 1, t19, n33), c27 = [1, -1, 1, 1, 1, 1], l26 = [1, 1, 1, -1, -1, -1], u35 = this._renderer, h26 = u35.autoClear, d34 = u35.toneMapping;
    u35.getClearColor(Yl), u35.toneMapping = Wn3, u35.autoClear = false;
    const p26 = new Mn3({
      name: "PMREM.Background",
      side: sn3,
      depthWrite: false,
      depthTest: false
    }), g32 = new Pt5(new Ui(), p26);
    let y34 = false;
    const m34 = e11.background;
    m34 ? m34.isColor && (p26.color.copy(m34), e11.background = null, y34 = true) : (p26.color.copy(Yl), y34 = true);
    for (let f40 = 0; f40 < 6; f40++) {
      const E25 = f40 % 3;
      E25 === 0 ? (o13.up.set(0, c27[f40], 0), o13.lookAt(l26[f40], 0, 0)) : E25 === 1 ? (o13.up.set(0, 0, c27[f40]), o13.lookAt(0, l26[f40], 0)) : (o13.up.set(0, c27[f40], 0), o13.lookAt(0, 0, l26[f40]));
      const b35 = this._cubeSize;
      zr3(i27, E25 * b35, f40 > 2 ? b35 : 0, b35, b35), u35.setRenderTarget(i27), y34 && u35.render(g32, o13), u35.render(e11, o13);
    }
    g32.geometry.dispose(), g32.material.dispose(), u35.toneMapping = d34, u35.autoClear = h26, e11.background = m34;
  }
  _textureToCubeUV(e11, t19) {
    const n33 = this._renderer, i27 = e11.mapping === Ss || e11.mapping === ws;
    i27 ? (this._cubemapMaterial === null && (this._cubemapMaterial = ec()), this._cubemapMaterial.uniforms.flipEnvMap.value = e11.isRenderTargetTexture === false ? -1 : 1) : this._equirectMaterial === null && (this._equirectMaterial = Ql());
    const s18 = i27 ? this._cubemapMaterial : this._equirectMaterial, r24 = new Pt5(this._lodPlanes[0], s18), o13 = s18.uniforms;
    o13.envMap.value = e11;
    const c27 = this._cubeSize;
    zr3(t19, 0, 0, 3 * c27, 2 * c27), n33.setRenderTarget(t19), n33.render(r24, Zo);
  }
  _applyPMREM(e11) {
    const t19 = this._renderer, n33 = t19.autoClear;
    t19.autoClear = false;
    for (let i27 = 1; i27 < this._lodPlanes.length; i27++) {
      const s18 = Math.sqrt(this._sigmas[i27] * this._sigmas[i27] - this._sigmas[i27 - 1] * this._sigmas[i27 - 1]), r24 = Jl[(i27 - 1) % Jl.length];
      this._blur(e11, i27 - 1, i27, s18, r24);
    }
    t19.autoClear = n33;
  }
  /**
   * This is a two-pass Gaussian blur for a cubemap. Normally this is done
   * vertically and horizontally, but this breaks down on a cube. Here we apply
   * the blur latitudinally (around the poles), and then longitudinally (towards
   * the poles) to approximate the orthogonally-separable blur. It is least
   * accurate at the poles, but still does a decent job.
   */
  _blur(e11, t19, n33, i27, s18) {
    const r24 = this._pingPongRenderTarget;
    this._halfBlur(
      e11,
      r24,
      t19,
      n33,
      i27,
      "latitudinal",
      s18
    ), this._halfBlur(
      r24,
      e11,
      n33,
      n33,
      i27,
      "longitudinal",
      s18
    );
  }
  _halfBlur(e11, t19, n33, i27, s18, r24, o13) {
    const c27 = this._renderer, l26 = this._blurMaterial;
    r24 !== "latitudinal" && r24 !== "longitudinal" && console.error(
      "blur direction must be either latitudinal or longitudinal!"
    );
    const u35 = 3, h26 = new Pt5(this._lodPlanes[i27], l26), d34 = l26.uniforms, p26 = this._sizeLods[n33] - 1, g32 = isFinite(s18) ? Math.PI / (2 * p26) : 2 * Math.PI / (2 * yi3 - 1), y34 = s18 / g32, m34 = isFinite(s18) ? 1 + Math.floor(u35 * y34) : yi3;
    m34 > yi3 && console.warn(`sigmaRadians, ${s18}, is too large and will clip, as it requested ${m34} samples when the maximum is set to ${yi3}`);
    const f40 = [];
    let E25 = 0;
    for (let N22 = 0; N22 < yi3; ++N22) {
      const I18 = N22 / y34, v31 = Math.exp(-I18 * I18 / 2);
      f40.push(v31), N22 === 0 ? E25 += v31 : N22 < m34 && (E25 += 2 * v31);
    }
    for (let N22 = 0; N22 < f40.length; N22++)
      f40[N22] = f40[N22] / E25;
    d34.envMap.value = e11.texture, d34.samples.value = m34, d34.weights.value = f40, d34.latitudinal.value = r24 === "latitudinal", o13 && (d34.poleAxis.value = o13);
    const { _lodMax: b35 } = this;
    d34.dTheta.value = g32, d34.mipInt.value = b35 - n33;
    const w31 = this._sizeLods[i27], S23 = 3 * w31 * (i27 > b35 - ms ? i27 - b35 + ms : 0), D18 = 4 * (this._cubeSize - w31);
    zr3(t19, S23, D18, 3 * w31, 2 * w31), c27.setRenderTarget(t19), c27.render(h26, Zo);
  }
};
function xm(a22) {
  const e11 = [], t19 = [], n33 = [];
  let i27 = a22;
  const s18 = a22 - ms + 1 + Kl.length;
  for (let r24 = 0; r24 < s18; r24++) {
    const o13 = Math.pow(2, i27);
    t19.push(o13);
    let c27 = 1 / o13;
    r24 > a22 - ms ? c27 = Kl[r24 - a22 + ms - 1] : r24 === 0 && (c27 = 0), n33.push(c27);
    const l26 = 1 / (o13 - 2), u35 = -l26, h26 = 1 + l26, d34 = [u35, u35, h26, u35, h26, h26, u35, u35, h26, h26, u35, h26], p26 = 6, g32 = 6, y34 = 3, m34 = 2, f40 = 1, E25 = new Float32Array(y34 * g32 * p26), b35 = new Float32Array(m34 * g32 * p26), w31 = new Float32Array(f40 * g32 * p26);
    for (let D18 = 0; D18 < p26; D18++) {
      const N22 = D18 % 3 * 2 / 3 - 1, I18 = D18 > 2 ? 0 : -1, v31 = [
        N22,
        I18,
        0,
        N22 + 2 / 3,
        I18,
        0,
        N22 + 2 / 3,
        I18 + 1,
        0,
        N22,
        I18,
        0,
        N22 + 2 / 3,
        I18 + 1,
        0,
        N22,
        I18 + 1,
        0
      ];
      E25.set(v31, y34 * g32 * D18), b35.set(d34, m34 * g32 * D18);
      const L12 = [D18, D18, D18, D18, D18, D18];
      w31.set(L12, f40 * g32 * D18);
    }
    const S23 = new Xt3();
    S23.setAttribute("position", new Gt3(E25, y34)), S23.setAttribute("uv", new Gt3(b35, m34)), S23.setAttribute("faceIndex", new Gt3(w31, f40)), e11.push(S23), i27 > ms && i27--;
  }
  return { lodPlanes: e11, sizeLods: t19, sigmas: n33 };
}
function $l(a22, e11, t19) {
  const n33 = new Li(a22, e11, t19);
  return n33.texture.mapping = lo, n33.texture.name = "PMREM.cubeUv", n33.scissorTest = true, n33;
}
function zr3(a22, e11, t19, n33, i27) {
  a22.viewport.set(e11, t19, n33, i27), a22.scissor.set(e11, t19, n33, i27);
}
function ym(a22, e11, t19) {
  const n33 = new Float32Array(yi3), i27 = new U9(0, 1, 0);
  return new Ri({
    name: "SphericalGaussianBlur",
    defines: {
      n: yi3,
      CUBEUV_TEXEL_WIDTH: 1 / e11,
      CUBEUV_TEXEL_HEIGHT: 1 / t19,
      CUBEUV_MAX_MIP: `${a22}.0`
    },
    uniforms: {
      envMap: { value: null },
      samples: { value: 1 },
      weights: { value: n33 },
      latitudinal: { value: false },
      dTheta: { value: 0 },
      mipInt: { value: 0 },
      poleAxis: { value: i27 }
    },
    vertexShader: Pa(),
    fragmentShader: (
      /* glsl */
      `

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`
    ),
    blending: li3,
    depthTest: false,
    depthWrite: false
  });
}
function Ql() {
  return new Ri({
    name: "EquirectangularToCubeUV",
    uniforms: {
      envMap: { value: null }
    },
    vertexShader: Pa(),
    fragmentShader: (
      /* glsl */
      `

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`
    ),
    blending: li3,
    depthTest: false,
    depthWrite: false
  });
}
function ec() {
  return new Ri({
    name: "CubemapToCubeUV",
    uniforms: {
      envMap: { value: null },
      flipEnvMap: { value: -1 }
    },
    vertexShader: Pa(),
    fragmentShader: (
      /* glsl */
      `

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`
    ),
    blending: li3,
    depthTest: false,
    depthWrite: false
  });
}
function Pa() {
  return (
    /* glsl */
    `

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`
  );
}
function vm(a22) {
  let e11 = /* @__PURE__ */ new WeakMap(), t19 = null;
  function n33(o13) {
    if (o13 && o13.isTexture) {
      const c27 = o13.mapping, l26 = c27 === da || c27 === fa, u35 = c27 === Ss || c27 === ws;
      if (l26 || u35)
        if (o13.isRenderTargetTexture && o13.needsPMREMUpdate === true) {
          o13.needsPMREMUpdate = false;
          let h26 = e11.get(o13);
          return t19 === null && (t19 = new Zl(a22)), h26 = l26 ? t19.fromEquirectangular(o13, h26) : t19.fromCubemap(o13, h26), e11.set(o13, h26), h26.texture;
        } else {
          if (e11.has(o13))
            return e11.get(o13).texture;
          {
            const h26 = o13.image;
            if (l26 && h26 && h26.height > 0 || u35 && h26 && i27(h26)) {
              t19 === null && (t19 = new Zl(a22));
              const d34 = l26 ? t19.fromEquirectangular(o13) : t19.fromCubemap(o13);
              return e11.set(o13, d34), o13.addEventListener("dispose", s18), d34.texture;
            } else
              return null;
          }
        }
    }
    return o13;
  }
  function i27(o13) {
    let c27 = 0;
    const l26 = 6;
    for (let u35 = 0; u35 < l26; u35++)
      o13[u35] !== void 0 && c27++;
    return c27 === l26;
  }
  function s18(o13) {
    const c27 = o13.target;
    c27.removeEventListener("dispose", s18);
    const l26 = e11.get(c27);
    l26 !== void 0 && (e11.delete(c27), l26.dispose());
  }
  function r24() {
    e11 = /* @__PURE__ */ new WeakMap(), t19 !== null && (t19.dispose(), t19 = null);
  }
  return {
    get: n33,
    dispose: r24
  };
}
function bm(a22) {
  const e11 = {};
  function t19(n33) {
    if (e11[n33] !== void 0)
      return e11[n33];
    let i27;
    switch (n33) {
      case "WEBGL_depth_texture":
        i27 = a22.getExtension("WEBGL_depth_texture") || a22.getExtension("MOZ_WEBGL_depth_texture") || a22.getExtension("WEBKIT_WEBGL_depth_texture");
        break;
      case "EXT_texture_filter_anisotropic":
        i27 = a22.getExtension("EXT_texture_filter_anisotropic") || a22.getExtension("MOZ_EXT_texture_filter_anisotropic") || a22.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
        break;
      case "WEBGL_compressed_texture_s3tc":
        i27 = a22.getExtension("WEBGL_compressed_texture_s3tc") || a22.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || a22.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
        break;
      case "WEBGL_compressed_texture_pvrtc":
        i27 = a22.getExtension("WEBGL_compressed_texture_pvrtc") || a22.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
        break;
      default:
        i27 = a22.getExtension(n33);
    }
    return e11[n33] = i27, i27;
  }
  return {
    has: function(n33) {
      return t19(n33) !== null;
    },
    init: function(n33) {
      n33.isWebGL2 ? t19("EXT_color_buffer_float") : (t19("WEBGL_depth_texture"), t19("OES_texture_float"), t19("OES_texture_half_float"), t19("OES_texture_half_float_linear"), t19("OES_standard_derivatives"), t19("OES_element_index_uint"), t19("OES_vertex_array_object"), t19("ANGLE_instanced_arrays")), t19("OES_texture_float_linear"), t19("EXT_color_buffer_half_float"), t19("WEBGL_multisampled_render_to_texture");
    },
    get: function(n33) {
      const i27 = t19(n33);
      return i27 === null && console.warn("THREE.WebGLRenderer: " + n33 + " extension not supported."), i27;
    }
  };
}
function Mm(a22, e11, t19, n33) {
  const i27 = {}, s18 = /* @__PURE__ */ new WeakMap();
  function r24(h26) {
    const d34 = h26.target;
    d34.index !== null && e11.remove(d34.index);
    for (const g32 in d34.attributes)
      e11.remove(d34.attributes[g32]);
    d34.removeEventListener("dispose", r24), delete i27[d34.id];
    const p26 = s18.get(d34);
    p26 && (e11.remove(p26), s18.delete(d34)), n33.releaseStatesOfGeometry(d34), d34.isInstancedBufferGeometry === true && delete d34._maxInstanceCount, t19.memory.geometries--;
  }
  function o13(h26, d34) {
    return i27[d34.id] === true || (d34.addEventListener("dispose", r24), i27[d34.id] = true, t19.memory.geometries++), d34;
  }
  function c27(h26) {
    const d34 = h26.attributes;
    for (const g32 in d34)
      e11.update(d34[g32], 34962);
    const p26 = h26.morphAttributes;
    for (const g32 in p26) {
      const y34 = p26[g32];
      for (let m34 = 0, f40 = y34.length; m34 < f40; m34++)
        e11.update(y34[m34], 34962);
    }
  }
  function l26(h26) {
    const d34 = [], p26 = h26.index, g32 = h26.attributes.position;
    let y34 = 0;
    if (p26 !== null) {
      const E25 = p26.array;
      y34 = p26.version;
      for (let b35 = 0, w31 = E25.length; b35 < w31; b35 += 3) {
        const S23 = E25[b35 + 0], D18 = E25[b35 + 1], N22 = E25[b35 + 2];
        d34.push(S23, D18, D18, N22, N22, S23);
      }
    } else {
      const E25 = g32.array;
      y34 = g32.version;
      for (let b35 = 0, w31 = E25.length / 3 - 1; b35 < w31; b35 += 3) {
        const S23 = b35 + 0, D18 = b35 + 1, N22 = b35 + 2;
        d34.push(S23, D18, D18, N22, N22, S23);
      }
    }
    const m34 = new (au(d34) ? pu : fu)(d34, 1);
    m34.version = y34;
    const f40 = s18.get(h26);
    f40 && e11.remove(f40), s18.set(h26, m34);
  }
  function u35(h26) {
    const d34 = s18.get(h26);
    if (d34) {
      const p26 = h26.index;
      p26 !== null && d34.version < p26.version && l26(h26);
    } else
      l26(h26);
    return s18.get(h26);
  }
  return {
    get: o13,
    update: c27,
    getWireframeAttribute: u35
  };
}
function Sm(a22, e11, t19, n33) {
  const i27 = n33.isWebGL2;
  let s18;
  function r24(d34) {
    s18 = d34;
  }
  let o13, c27;
  function l26(d34) {
    o13 = d34.type, c27 = d34.bytesPerElement;
  }
  function u35(d34, p26) {
    a22.drawElements(s18, p26, o13, d34 * c27), t19.update(p26, s18, 1);
  }
  function h26(d34, p26, g32) {
    if (g32 === 0)
      return;
    let y34, m34;
    if (i27)
      y34 = a22, m34 = "drawElementsInstanced";
    else if (y34 = e11.get("ANGLE_instanced_arrays"), m34 = "drawElementsInstancedANGLE", y34 === null) {
      console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
      return;
    }
    y34[m34](s18, p26, o13, d34 * c27, g32), t19.update(p26, s18, g32);
  }
  this.setMode = r24, this.setIndex = l26, this.render = u35, this.renderInstances = h26;
}
function wm(a22) {
  const e11 = {
    geometries: 0,
    textures: 0
  }, t19 = {
    frame: 0,
    calls: 0,
    triangles: 0,
    points: 0,
    lines: 0
  };
  function n33(s18, r24, o13) {
    switch (t19.calls++, r24) {
      case 4:
        t19.triangles += o13 * (s18 / 3);
        break;
      case 1:
        t19.lines += o13 * (s18 / 2);
        break;
      case 3:
        t19.lines += o13 * (s18 - 1);
        break;
      case 2:
        t19.lines += o13 * s18;
        break;
      case 0:
        t19.points += o13 * s18;
        break;
      default:
        console.error("THREE.WebGLInfo: Unknown draw mode:", r24);
        break;
    }
  }
  function i27() {
    t19.frame++, t19.calls = 0, t19.triangles = 0, t19.points = 0, t19.lines = 0;
  }
  return {
    memory: e11,
    render: t19,
    programs: null,
    autoReset: true,
    reset: i27,
    update: n33
  };
}
function Tm(a22, e11) {
  return a22[0] - e11[0];
}
function Am(a22, e11) {
  return Math.abs(e11[1]) - Math.abs(a22[1]);
}
function Em(a22, e11, t19) {
  const n33 = {}, i27 = new Float32Array(8), s18 = /* @__PURE__ */ new WeakMap(), r24 = new gt6(), o13 = [];
  for (let l26 = 0; l26 < 8; l26++)
    o13[l26] = [l26, 0];
  function c27(l26, u35, h26) {
    const d34 = l26.morphTargetInfluences;
    if (e11.isWebGL2 === true) {
      const p26 = u35.morphAttributes.position || u35.morphAttributes.normal || u35.morphAttributes.color, g32 = p26 !== void 0 ? p26.length : 0;
      let y34 = s18.get(u35);
      if (y34 === void 0 || y34.count !== g32) {
        let V16 = function() {
          B22.dispose(), s18.delete(u35), u35.removeEventListener("dispose", V16);
        };
        y34 !== void 0 && y34.texture.dispose();
        const E25 = u35.morphAttributes.position !== void 0, b35 = u35.morphAttributes.normal !== void 0, w31 = u35.morphAttributes.color !== void 0, S23 = u35.morphAttributes.position || [], D18 = u35.morphAttributes.normal || [], N22 = u35.morphAttributes.color || [];
        let I18 = 0;
        E25 === true && (I18 = 1), b35 === true && (I18 = 2), w31 === true && (I18 = 3);
        let v31 = u35.attributes.position.count * I18, L12 = 1;
        v31 > e11.maxTextureSize && (L12 = Math.ceil(v31 / e11.maxTextureSize), v31 = e11.maxTextureSize);
        const G16 = new Float32Array(v31 * L12 * 4 * g32), B22 = new uu(G16, v31, L12, g32);
        B22.type = ai3, B22.needsUpdate = true;
        const k29 = I18 * 4;
        for (let H16 = 0; H16 < g32; H16++) {
          const W11 = S23[H16], te7 = D18[H16], J12 = N22[H16], ie8 = v31 * L12 * 4 * H16;
          for (let le7 = 0; le7 < W11.count; le7++) {
            const me9 = le7 * k29;
            E25 === true && (r24.fromBufferAttribute(W11, le7), G16[ie8 + me9 + 0] = r24.x, G16[ie8 + me9 + 1] = r24.y, G16[ie8 + me9 + 2] = r24.z, G16[ie8 + me9 + 3] = 0), b35 === true && (r24.fromBufferAttribute(te7, le7), G16[ie8 + me9 + 4] = r24.x, G16[ie8 + me9 + 5] = r24.y, G16[ie8 + me9 + 6] = r24.z, G16[ie8 + me9 + 7] = 0), w31 === true && (r24.fromBufferAttribute(J12, le7), G16[ie8 + me9 + 8] = r24.x, G16[ie8 + me9 + 9] = r24.y, G16[ie8 + me9 + 10] = r24.z, G16[ie8 + me9 + 11] = J12.itemSize === 4 ? r24.w : 1);
          }
        }
        y34 = {
          count: g32,
          texture: B22,
          size: new We4(v31, L12)
        }, s18.set(u35, y34), u35.addEventListener("dispose", V16);
      }
      let m34 = 0;
      for (let E25 = 0; E25 < d34.length; E25++)
        m34 += d34[E25];
      const f40 = u35.morphTargetsRelative ? 1 : 1 - m34;
      h26.getUniforms().setValue(a22, "morphTargetBaseInfluence", f40), h26.getUniforms().setValue(a22, "morphTargetInfluences", d34), h26.getUniforms().setValue(a22, "morphTargetsTexture", y34.texture, t19), h26.getUniforms().setValue(a22, "morphTargetsTextureSize", y34.size);
    } else {
      const p26 = d34 === void 0 ? 0 : d34.length;
      let g32 = n33[u35.id];
      if (g32 === void 0 || g32.length !== p26) {
        g32 = [];
        for (let b35 = 0; b35 < p26; b35++)
          g32[b35] = [b35, 0];
        n33[u35.id] = g32;
      }
      for (let b35 = 0; b35 < p26; b35++) {
        const w31 = g32[b35];
        w31[0] = b35, w31[1] = d34[b35];
      }
      g32.sort(Am);
      for (let b35 = 0; b35 < 8; b35++)
        b35 < p26 && g32[b35][1] ? (o13[b35][0] = g32[b35][0], o13[b35][1] = g32[b35][1]) : (o13[b35][0] = Number.MAX_SAFE_INTEGER, o13[b35][1] = 0);
      o13.sort(Tm);
      const y34 = u35.morphAttributes.position, m34 = u35.morphAttributes.normal;
      let f40 = 0;
      for (let b35 = 0; b35 < 8; b35++) {
        const w31 = o13[b35], S23 = w31[0], D18 = w31[1];
        S23 !== Number.MAX_SAFE_INTEGER && D18 ? (y34 && u35.getAttribute("morphTarget" + b35) !== y34[S23] && u35.setAttribute("morphTarget" + b35, y34[S23]), m34 && u35.getAttribute("morphNormal" + b35) !== m34[S23] && u35.setAttribute("morphNormal" + b35, m34[S23]), i27[b35] = D18, f40 += D18) : (y34 && u35.hasAttribute("morphTarget" + b35) === true && u35.deleteAttribute("morphTarget" + b35), m34 && u35.hasAttribute("morphNormal" + b35) === true && u35.deleteAttribute("morphNormal" + b35), i27[b35] = 0);
      }
      const E25 = u35.morphTargetsRelative ? 1 : 1 - f40;
      h26.getUniforms().setValue(a22, "morphTargetBaseInfluence", E25), h26.getUniforms().setValue(a22, "morphTargetInfluences", i27);
    }
  }
  return {
    update: c27
  };
}
function Cm(a22, e11, t19, n33) {
  let i27 = /* @__PURE__ */ new WeakMap();
  function s18(c27) {
    const l26 = n33.render.frame, u35 = c27.geometry, h26 = e11.get(c27, u35);
    return i27.get(h26) !== l26 && (e11.update(h26), i27.set(h26, l26)), c27.isInstancedMesh && (c27.hasEventListener("dispose", o13) === false && c27.addEventListener("dispose", o13), t19.update(c27.instanceMatrix, 34962), c27.instanceColor !== null && t19.update(c27.instanceColor, 34962)), h26;
  }
  function r24() {
    i27 = /* @__PURE__ */ new WeakMap();
  }
  function o13(c27) {
    const l26 = c27.target;
    l26.removeEventListener("dispose", o13), t19.remove(l26.instanceMatrix), l26.instanceColor !== null && t19.remove(l26.instanceColor);
  }
  return {
    update: s18,
    dispose: r24
  };
}
var yu = new jt4();
var vu = new uu();
var bu = new gd();
var Mu = new _u();
var tc = [];
var nc = [];
var ic = new Float32Array(16);
var sc = new Float32Array(9);
var rc = new Float32Array(4);
function Ns(a22, e11, t19) {
  const n33 = a22[0];
  if (n33 <= 0 || n33 > 0)
    return a22;
  const i27 = e11 * t19;
  let s18 = tc[i27];
  if (s18 === void 0 && (s18 = new Float32Array(i27), tc[i27] = s18), e11 !== 0) {
    n33.toArray(s18, 0);
    for (let r24 = 1, o13 = 0; r24 !== e11; ++r24)
      o13 += t19, a22[r24].toArray(s18, o13);
  }
  return s18;
}
function Nt4(a22, e11) {
  if (a22.length !== e11.length)
    return false;
  for (let t19 = 0, n33 = a22.length; t19 < n33; t19++)
    if (a22[t19] !== e11[t19])
      return false;
  return true;
}
function Ut5(a22, e11) {
  for (let t19 = 0, n33 = e11.length; t19 < n33; t19++)
    a22[t19] = e11[t19];
}
function fo(a22, e11) {
  let t19 = nc[e11];
  t19 === void 0 && (t19 = new Int32Array(e11), nc[e11] = t19);
  for (let n33 = 0; n33 !== e11; ++n33)
    t19[n33] = a22.allocateTextureUnit();
  return t19;
}
function Lm(a22, e11) {
  const t19 = this.cache;
  t19[0] !== e11 && (a22.uniform1f(this.addr, e11), t19[0] = e11);
}
function Rm(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y) && (a22.uniform2f(this.addr, e11.x, e11.y), t19[0] = e11.x, t19[1] = e11.y);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform2fv(this.addr, e11), Ut5(t19, e11);
  }
}
function Pm(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z) && (a22.uniform3f(this.addr, e11.x, e11.y, e11.z), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z);
  else if (e11.r !== void 0)
    (t19[0] !== e11.r || t19[1] !== e11.g || t19[2] !== e11.b) && (a22.uniform3f(this.addr, e11.r, e11.g, e11.b), t19[0] = e11.r, t19[1] = e11.g, t19[2] = e11.b);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform3fv(this.addr, e11), Ut5(t19, e11);
  }
}
function Im(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z || t19[3] !== e11.w) && (a22.uniform4f(this.addr, e11.x, e11.y, e11.z, e11.w), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z, t19[3] = e11.w);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform4fv(this.addr, e11), Ut5(t19, e11);
  }
}
function Dm(a22, e11) {
  const t19 = this.cache, n33 = e11.elements;
  if (n33 === void 0) {
    if (Nt4(t19, e11))
      return;
    a22.uniformMatrix2fv(this.addr, false, e11), Ut5(t19, e11);
  } else {
    if (Nt4(t19, n33))
      return;
    rc.set(n33), a22.uniformMatrix2fv(this.addr, false, rc), Ut5(t19, n33);
  }
}
function Nm(a22, e11) {
  const t19 = this.cache, n33 = e11.elements;
  if (n33 === void 0) {
    if (Nt4(t19, e11))
      return;
    a22.uniformMatrix3fv(this.addr, false, e11), Ut5(t19, e11);
  } else {
    if (Nt4(t19, n33))
      return;
    sc.set(n33), a22.uniformMatrix3fv(this.addr, false, sc), Ut5(t19, n33);
  }
}
function Um(a22, e11) {
  const t19 = this.cache, n33 = e11.elements;
  if (n33 === void 0) {
    if (Nt4(t19, e11))
      return;
    a22.uniformMatrix4fv(this.addr, false, e11), Ut5(t19, e11);
  } else {
    if (Nt4(t19, n33))
      return;
    ic.set(n33), a22.uniformMatrix4fv(this.addr, false, ic), Ut5(t19, n33);
  }
}
function km(a22, e11) {
  const t19 = this.cache;
  t19[0] !== e11 && (a22.uniform1i(this.addr, e11), t19[0] = e11);
}
function Om(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y) && (a22.uniform2i(this.addr, e11.x, e11.y), t19[0] = e11.x, t19[1] = e11.y);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform2iv(this.addr, e11), Ut5(t19, e11);
  }
}
function Fm(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z) && (a22.uniform3i(this.addr, e11.x, e11.y, e11.z), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform3iv(this.addr, e11), Ut5(t19, e11);
  }
}
function zm(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z || t19[3] !== e11.w) && (a22.uniform4i(this.addr, e11.x, e11.y, e11.z, e11.w), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z, t19[3] = e11.w);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform4iv(this.addr, e11), Ut5(t19, e11);
  }
}
function Bm(a22, e11) {
  const t19 = this.cache;
  t19[0] !== e11 && (a22.uniform1ui(this.addr, e11), t19[0] = e11);
}
function Vm(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y) && (a22.uniform2ui(this.addr, e11.x, e11.y), t19[0] = e11.x, t19[1] = e11.y);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform2uiv(this.addr, e11), Ut5(t19, e11);
  }
}
function Gm(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z) && (a22.uniform3ui(this.addr, e11.x, e11.y, e11.z), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform3uiv(this.addr, e11), Ut5(t19, e11);
  }
}
function Hm(a22, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z || t19[3] !== e11.w) && (a22.uniform4ui(this.addr, e11.x, e11.y, e11.z, e11.w), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z, t19[3] = e11.w);
  else {
    if (Nt4(t19, e11))
      return;
    a22.uniform4uiv(this.addr, e11), Ut5(t19, e11);
  }
}
function Wm(a22, e11, t19) {
  const n33 = this.cache, i27 = t19.allocateTextureUnit();
  n33[0] !== i27 && (a22.uniform1i(this.addr, i27), n33[0] = i27), t19.setTexture2D(e11 || yu, i27);
}
function jm(a22, e11, t19) {
  const n33 = this.cache, i27 = t19.allocateTextureUnit();
  n33[0] !== i27 && (a22.uniform1i(this.addr, i27), n33[0] = i27), t19.setTexture3D(e11 || bu, i27);
}
function qm(a22, e11, t19) {
  const n33 = this.cache, i27 = t19.allocateTextureUnit();
  n33[0] !== i27 && (a22.uniform1i(this.addr, i27), n33[0] = i27), t19.setTextureCube(e11 || Mu, i27);
}
function Xm(a22, e11, t19) {
  const n33 = this.cache, i27 = t19.allocateTextureUnit();
  n33[0] !== i27 && (a22.uniform1i(this.addr, i27), n33[0] = i27), t19.setTexture2DArray(e11 || vu, i27);
}
function Km(a22) {
  switch (a22) {
    case 5126:
      return Lm;
    case 35664:
      return Rm;
    case 35665:
      return Pm;
    case 35666:
      return Im;
    case 35674:
      return Dm;
    case 35675:
      return Nm;
    case 35676:
      return Um;
    case 5124:
    case 35670:
      return km;
    case 35667:
    case 35671:
      return Om;
    case 35668:
    case 35672:
      return Fm;
    case 35669:
    case 35673:
      return zm;
    case 5125:
      return Bm;
    case 36294:
      return Vm;
    case 36295:
      return Gm;
    case 36296:
      return Hm;
    case 35678:
    case 36198:
    case 36298:
    case 36306:
    case 35682:
      return Wm;
    case 35679:
    case 36299:
    case 36307:
      return jm;
    case 35680:
    case 36300:
    case 36308:
    case 36293:
      return qm;
    case 36289:
    case 36303:
    case 36311:
    case 36292:
      return Xm;
  }
}
function Ym(a22, e11) {
  a22.uniform1fv(this.addr, e11);
}
function Jm(a22, e11) {
  const t19 = Ns(e11, this.size, 2);
  a22.uniform2fv(this.addr, t19);
}
function Zm(a22, e11) {
  const t19 = Ns(e11, this.size, 3);
  a22.uniform3fv(this.addr, t19);
}
function $m(a22, e11) {
  const t19 = Ns(e11, this.size, 4);
  a22.uniform4fv(this.addr, t19);
}
function Qm(a22, e11) {
  const t19 = Ns(e11, this.size, 4);
  a22.uniformMatrix2fv(this.addr, false, t19);
}
function eg(a22, e11) {
  const t19 = Ns(e11, this.size, 9);
  a22.uniformMatrix3fv(this.addr, false, t19);
}
function tg(a22, e11) {
  const t19 = Ns(e11, this.size, 16);
  a22.uniformMatrix4fv(this.addr, false, t19);
}
function ng(a22, e11) {
  a22.uniform1iv(this.addr, e11);
}
function ig(a22, e11) {
  a22.uniform2iv(this.addr, e11);
}
function sg(a22, e11) {
  a22.uniform3iv(this.addr, e11);
}
function rg(a22, e11) {
  a22.uniform4iv(this.addr, e11);
}
function og(a22, e11) {
  a22.uniform1uiv(this.addr, e11);
}
function ag(a22, e11) {
  a22.uniform2uiv(this.addr, e11);
}
function lg(a22, e11) {
  a22.uniform3uiv(this.addr, e11);
}
function cg(a22, e11) {
  a22.uniform4uiv(this.addr, e11);
}
function ug(a22, e11, t19) {
  const n33 = this.cache, i27 = e11.length, s18 = fo(t19, i27);
  Nt4(n33, s18) || (a22.uniform1iv(this.addr, s18), Ut5(n33, s18));
  for (let r24 = 0; r24 !== i27; ++r24)
    t19.setTexture2D(e11[r24] || yu, s18[r24]);
}
function hg(a22, e11, t19) {
  const n33 = this.cache, i27 = e11.length, s18 = fo(t19, i27);
  Nt4(n33, s18) || (a22.uniform1iv(this.addr, s18), Ut5(n33, s18));
  for (let r24 = 0; r24 !== i27; ++r24)
    t19.setTexture3D(e11[r24] || bu, s18[r24]);
}
function dg(a22, e11, t19) {
  const n33 = this.cache, i27 = e11.length, s18 = fo(t19, i27);
  Nt4(n33, s18) || (a22.uniform1iv(this.addr, s18), Ut5(n33, s18));
  for (let r24 = 0; r24 !== i27; ++r24)
    t19.setTextureCube(e11[r24] || Mu, s18[r24]);
}
function fg(a22, e11, t19) {
  const n33 = this.cache, i27 = e11.length, s18 = fo(t19, i27);
  Nt4(n33, s18) || (a22.uniform1iv(this.addr, s18), Ut5(n33, s18));
  for (let r24 = 0; r24 !== i27; ++r24)
    t19.setTexture2DArray(e11[r24] || vu, s18[r24]);
}
function pg(a22) {
  switch (a22) {
    case 5126:
      return Ym;
    case 35664:
      return Jm;
    case 35665:
      return Zm;
    case 35666:
      return $m;
    case 35674:
      return Qm;
    case 35675:
      return eg;
    case 35676:
      return tg;
    case 5124:
    case 35670:
      return ng;
    case 35667:
    case 35671:
      return ig;
    case 35668:
    case 35672:
      return sg;
    case 35669:
    case 35673:
      return rg;
    case 5125:
      return og;
    case 36294:
      return ag;
    case 36295:
      return lg;
    case 36296:
      return cg;
    case 35678:
    case 36198:
    case 36298:
    case 36306:
    case 35682:
      return ug;
    case 35679:
    case 36299:
    case 36307:
      return hg;
    case 35680:
    case 36300:
    case 36308:
    case 36293:
      return dg;
    case 36289:
    case 36303:
    case 36311:
    case 36292:
      return fg;
  }
}
var mg = class {
  constructor(e11, t19, n33) {
    this.id = e11, this.addr = n33, this.cache = [], this.setValue = Km(t19.type);
  }
};
var gg = class {
  constructor(e11, t19, n33) {
    this.id = e11, this.addr = n33, this.cache = [], this.size = t19.size, this.setValue = pg(t19.type);
  }
};
var _g = class {
  constructor(e11) {
    this.id = e11, this.seq = [], this.map = {};
  }
  setValue(e11, t19, n33) {
    const i27 = this.seq;
    for (let s18 = 0, r24 = i27.length; s18 !== r24; ++s18) {
      const o13 = i27[s18];
      o13.setValue(e11, t19[o13.id], n33);
    }
  }
};
var Qo = /(\w+)(\])?(\[|\.)?/g;
function oc(a22, e11) {
  a22.seq.push(e11), a22.map[e11.id] = e11;
}
function xg(a22, e11, t19) {
  const n33 = a22.name, i27 = n33.length;
  for (Qo.lastIndex = 0; ; ) {
    const s18 = Qo.exec(n33), r24 = Qo.lastIndex;
    let o13 = s18[1];
    const c27 = s18[2] === "]", l26 = s18[3];
    if (c27 && (o13 = o13 | 0), l26 === void 0 || l26 === "[" && r24 + 2 === i27) {
      oc(t19, l26 === void 0 ? new mg(o13, a22, e11) : new gg(o13, a22, e11));
      break;
    } else {
      let h26 = t19.map[o13];
      h26 === void 0 && (h26 = new _g(o13), oc(t19, h26)), t19 = h26;
    }
  }
}
var eo = class {
  constructor(e11, t19) {
    this.seq = [], this.map = {};
    const n33 = e11.getProgramParameter(t19, 35718);
    for (let i27 = 0; i27 < n33; ++i27) {
      const s18 = e11.getActiveUniform(t19, i27), r24 = e11.getUniformLocation(t19, s18.name);
      xg(s18, r24, this);
    }
  }
  setValue(e11, t19, n33, i27) {
    const s18 = this.map[t19];
    s18 !== void 0 && s18.setValue(e11, n33, i27);
  }
  setOptional(e11, t19, n33) {
    const i27 = t19[n33];
    i27 !== void 0 && this.setValue(e11, n33, i27);
  }
  static upload(e11, t19, n33, i27) {
    for (let s18 = 0, r24 = t19.length; s18 !== r24; ++s18) {
      const o13 = t19[s18], c27 = n33[o13.id];
      c27.needsUpdate !== false && o13.setValue(e11, c27.value, i27);
    }
  }
  static seqWithValue(e11, t19) {
    const n33 = [];
    for (let i27 = 0, s18 = e11.length; i27 !== s18; ++i27) {
      const r24 = e11[i27];
      r24.id in t19 && n33.push(r24);
    }
    return n33;
  }
};
function ac(a22, e11, t19) {
  const n33 = a22.createShader(e11);
  return a22.shaderSource(n33, t19), a22.compileShader(n33), n33;
}
var yg = 0;
function vg(a22, e11) {
  const t19 = a22.split(`
`), n33 = [], i27 = Math.max(e11 - 6, 0), s18 = Math.min(e11 + 6, t19.length);
  for (let r24 = i27; r24 < s18; r24++) {
    const o13 = r24 + 1;
    n33.push(`${o13 === e11 ? ">" : " "} ${o13}: ${t19[r24]}`);
  }
  return n33.join(`
`);
}
function bg(a22) {
  switch (a22) {
    case Ci:
      return ["Linear", "( value )"];
    case st8:
      return ["sRGB", "( value )"];
    default:
      return console.warn("THREE.WebGLProgram: Unsupported encoding:", a22), ["Linear", "( value )"];
  }
}
function lc(a22, e11, t19) {
  const n33 = a22.getShaderParameter(e11, 35713), i27 = a22.getShaderInfoLog(e11).trim();
  if (n33 && i27 === "")
    return "";
  const s18 = /ERROR: 0:(\d+)/.exec(i27);
  if (s18) {
    const r24 = parseInt(s18[1]);
    return t19.toUpperCase() + `

` + i27 + `

` + vg(a22.getShaderSource(e11), r24);
  } else
    return i27;
}
function Mg(a22, e11) {
  const t19 = bg(e11);
  return "vec4 " + a22 + "( vec4 value ) { return LinearTo" + t19[0] + t19[1] + "; }";
}
function Sg(a22, e11) {
  let t19;
  switch (e11) {
    case wh:
      t19 = "Linear";
      break;
    case Th:
      t19 = "Reinhard";
      break;
    case Ah:
      t19 = "OptimizedCineon";
      break;
    case Eh:
      t19 = "ACESFilmic";
      break;
    case Ch:
      t19 = "Custom";
      break;
    default:
      console.warn("THREE.WebGLProgram: Unsupported toneMapping:", e11), t19 = "Linear";
  }
  return "vec3 " + a22 + "( vec3 color ) { return " + t19 + "ToneMapping( color ); }";
}
function wg(a22) {
  return [
    a22.extensionDerivatives || a22.envMapCubeUVHeight || a22.bumpMap || a22.normalMapTangentSpace || a22.clearcoatNormalMap || a22.flatShading || a22.shaderID === "physical" ? "#extension GL_OES_standard_derivatives : enable" : "",
    (a22.extensionFragDepth || a22.logarithmicDepthBuffer) && a22.rendererExtensionFragDepth ? "#extension GL_EXT_frag_depth : enable" : "",
    a22.extensionDrawBuffers && a22.rendererExtensionDrawBuffers ? "#extension GL_EXT_draw_buffers : require" : "",
    (a22.extensionShaderTextureLOD || a22.envMap || a22.transmission) && a22.rendererExtensionShaderTextureLod ? "#extension GL_EXT_shader_texture_lod : enable" : ""
  ].filter(Ys).join(`
`);
}
function Tg(a22) {
  const e11 = [];
  for (const t19 in a22) {
    const n33 = a22[t19];
    n33 !== false && e11.push("#define " + t19 + " " + n33);
  }
  return e11.join(`
`);
}
function Ag(a22, e11) {
  const t19 = {}, n33 = a22.getProgramParameter(e11, 35721);
  for (let i27 = 0; i27 < n33; i27++) {
    const s18 = a22.getActiveAttrib(e11, i27), r24 = s18.name;
    let o13 = 1;
    s18.type === 35674 && (o13 = 2), s18.type === 35675 && (o13 = 3), s18.type === 35676 && (o13 = 4), t19[r24] = {
      type: s18.type,
      location: a22.getAttribLocation(e11, r24),
      locationSize: o13
    };
  }
  return t19;
}
function Ys(a22) {
  return a22 !== "";
}
function cc(a22, e11) {
  const t19 = e11.numSpotLightShadows + e11.numSpotLightMaps - e11.numSpotLightShadowsWithMaps;
  return a22.replace(/NUM_DIR_LIGHTS/g, e11.numDirLights).replace(/NUM_SPOT_LIGHTS/g, e11.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g, e11.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g, t19).replace(/NUM_RECT_AREA_LIGHTS/g, e11.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g, e11.numPointLights).replace(/NUM_HEMI_LIGHTS/g, e11.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g, e11.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g, e11.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g, e11.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g, e11.numPointLightShadows);
}
function uc(a22, e11) {
  return a22.replace(/NUM_CLIPPING_PLANES/g, e11.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g, e11.numClippingPlanes - e11.numClipIntersection);
}
var Eg = /^[ \t]*#include +<([\w\d./]+)>/gm;
function ya(a22) {
  return a22.replace(Eg, Cg);
}
function Cg(a22, e11) {
  const t19 = Je4[e11];
  if (t19 === void 0)
    throw new Error("Can not resolve #include <" + e11 + ">");
  return ya(t19);
}
var Lg = /#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;
function hc(a22) {
  return a22.replace(Lg, Rg);
}
function Rg(a22, e11, t19, n33) {
  let i27 = "";
  for (let s18 = parseInt(e11); s18 < parseInt(t19); s18++)
    i27 += n33.replace(/\[\s*i\s*\]/g, "[ " + s18 + " ]").replace(/UNROLLED_LOOP_INDEX/g, s18);
  return i27;
}
function dc(a22) {
  let e11 = "precision " + a22.precision + ` float;
precision ` + a22.precision + " int;";
  return a22.precision === "highp" ? e11 += `
#define HIGH_PRECISION` : a22.precision === "mediump" ? e11 += `
#define MEDIUM_PRECISION` : a22.precision === "lowp" && (e11 += `
#define LOW_PRECISION`), e11;
}
function Pg(a22) {
  let e11 = "SHADOWMAP_TYPE_BASIC";
  return a22.shadowMapType === Zc ? e11 = "SHADOWMAP_TYPE_PCF" : a22.shadowMapType === nh ? e11 = "SHADOWMAP_TYPE_PCF_SOFT" : a22.shadowMapType === Ks && (e11 = "SHADOWMAP_TYPE_VSM"), e11;
}
function Ig(a22) {
  let e11 = "ENVMAP_TYPE_CUBE";
  if (a22.envMap)
    switch (a22.envMapMode) {
      case Ss:
      case ws:
        e11 = "ENVMAP_TYPE_CUBE";
        break;
      case lo:
        e11 = "ENVMAP_TYPE_CUBE_UV";
        break;
    }
  return e11;
}
function Dg(a22) {
  let e11 = "ENVMAP_MODE_REFLECTION";
  if (a22.envMap)
    switch (a22.envMapMode) {
      case ws:
        e11 = "ENVMAP_MODE_REFRACTION";
        break;
    }
  return e11;
}
function Ng(a22) {
  let e11 = "ENVMAP_BLENDING_NONE";
  if (a22.envMap)
    switch (a22.combine) {
      case ao:
        e11 = "ENVMAP_BLENDING_MULTIPLY";
        break;
      case Mh:
        e11 = "ENVMAP_BLENDING_MIX";
        break;
      case Sh:
        e11 = "ENVMAP_BLENDING_ADD";
        break;
    }
  return e11;
}
function Ug(a22) {
  const e11 = a22.envMapCubeUVHeight;
  if (e11 === null)
    return null;
  const t19 = Math.log2(e11) - 2, n33 = 1 / e11;
  return { texelWidth: 1 / (3 * Math.max(Math.pow(2, t19), 7 * 16)), texelHeight: n33, maxMip: t19 };
}
function kg(a22, e11, t19, n33) {
  const i27 = a22.getContext(), s18 = t19.defines;
  let r24 = t19.vertexShader, o13 = t19.fragmentShader;
  const c27 = Pg(t19), l26 = Ig(t19), u35 = Dg(t19), h26 = Ng(t19), d34 = Ug(t19), p26 = t19.isWebGL2 ? "" : wg(t19), g32 = Tg(s18), y34 = i27.createProgram();
  let m34, f40, E25 = t19.glslVersion ? "#version " + t19.glslVersion + `
` : "";
  t19.isRawShaderMaterial ? (m34 = [
    g32
  ].filter(Ys).join(`
`), m34.length > 0 && (m34 += `
`), f40 = [
    p26,
    g32
  ].filter(Ys).join(`
`), f40.length > 0 && (f40 += `
`)) : (m34 = [
    dc(t19),
    "#define SHADER_NAME " + t19.shaderName,
    g32,
    t19.instancing ? "#define USE_INSTANCING" : "",
    t19.instancingColor ? "#define USE_INSTANCING_COLOR" : "",
    t19.useFog && t19.fog ? "#define USE_FOG" : "",
    t19.useFog && t19.fogExp2 ? "#define FOG_EXP2" : "",
    t19.map ? "#define USE_MAP" : "",
    t19.envMap ? "#define USE_ENVMAP" : "",
    t19.envMap ? "#define " + u35 : "",
    t19.lightMap ? "#define USE_LIGHTMAP" : "",
    t19.aoMap ? "#define USE_AOMAP" : "",
    t19.bumpMap ? "#define USE_BUMPMAP" : "",
    t19.normalMap ? "#define USE_NORMALMAP" : "",
    t19.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "",
    t19.normalMapTangentSpace ? "#define USE_NORMALMAP_TANGENTSPACE" : "",
    t19.displacementMap ? "#define USE_DISPLACEMENTMAP" : "",
    t19.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
    t19.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
    t19.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "",
    t19.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
    t19.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
    t19.iridescenceThicknessMap ? "#define USE_IRIDESCENCE_THICKNESSMAP" : "",
    t19.specularMap ? "#define USE_SPECULARMAP" : "",
    t19.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "",
    t19.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "",
    t19.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
    t19.metalnessMap ? "#define USE_METALNESSMAP" : "",
    t19.alphaMap ? "#define USE_ALPHAMAP" : "",
    t19.transmission ? "#define USE_TRANSMISSION" : "",
    t19.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
    t19.thicknessMap ? "#define USE_THICKNESSMAP" : "",
    t19.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "",
    t19.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "",
    //
    t19.mapUv ? "#define MAP_UV " + t19.mapUv : "",
    t19.alphaMapUv ? "#define ALPHAMAP_UV " + t19.alphaMapUv : "",
    t19.lightMapUv ? "#define LIGHTMAP_UV " + t19.lightMapUv : "",
    t19.aoMapUv ? "#define AOMAP_UV " + t19.aoMapUv : "",
    t19.emissiveMapUv ? "#define EMISSIVEMAP_UV " + t19.emissiveMapUv : "",
    t19.bumpMapUv ? "#define BUMPMAP_UV " + t19.bumpMapUv : "",
    t19.normalMapUv ? "#define NORMALMAP_UV " + t19.normalMapUv : "",
    t19.displacementMapUv ? "#define DISPLACEMENTMAP_UV " + t19.displacementMapUv : "",
    t19.metalnessMapUv ? "#define METALNESSMAP_UV " + t19.metalnessMapUv : "",
    t19.roughnessMapUv ? "#define ROUGHNESSMAP_UV " + t19.roughnessMapUv : "",
    t19.clearcoatMapUv ? "#define CLEARCOATMAP_UV " + t19.clearcoatMapUv : "",
    t19.clearcoatNormalMapUv ? "#define CLEARCOAT_NORMALMAP_UV " + t19.clearcoatNormalMapUv : "",
    t19.clearcoatRoughnessMapUv ? "#define CLEARCOAT_ROUGHNESSMAP_UV " + t19.clearcoatRoughnessMapUv : "",
    t19.iridescenceMapUv ? "#define IRIDESCENCEMAP_UV " + t19.iridescenceMapUv : "",
    t19.iridescenceThicknessMapUv ? "#define IRIDESCENCE_THICKNESSMAP_UV " + t19.iridescenceThicknessMapUv : "",
    t19.sheenColorMapUv ? "#define SHEEN_COLORMAP_UV " + t19.sheenColorMapUv : "",
    t19.sheenRoughnessMapUv ? "#define SHEEN_ROUGHNESSMAP_UV " + t19.sheenRoughnessMapUv : "",
    t19.specularMapUv ? "#define SPECULARMAP_UV " + t19.specularMapUv : "",
    t19.specularColorMapUv ? "#define SPECULAR_COLORMAP_UV " + t19.specularColorMapUv : "",
    t19.specularIntensityMapUv ? "#define SPECULAR_INTENSITYMAP_UV " + t19.specularIntensityMapUv : "",
    t19.transmissionMapUv ? "#define TRANSMISSIONMAP_UV " + t19.transmissionMapUv : "",
    t19.thicknessMapUv ? "#define THICKNESSMAP_UV " + t19.thicknessMapUv : "",
    //
    t19.vertexTangents ? "#define USE_TANGENT" : "",
    t19.vertexColors ? "#define USE_COLOR" : "",
    t19.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
    t19.vertexUvs2 ? "#define USE_UV2" : "",
    t19.pointsUvs ? "#define USE_POINTS_UV" : "",
    t19.flatShading ? "#define FLAT_SHADED" : "",
    t19.skinning ? "#define USE_SKINNING" : "",
    t19.morphTargets ? "#define USE_MORPHTARGETS" : "",
    t19.morphNormals && t19.flatShading === false ? "#define USE_MORPHNORMALS" : "",
    t19.morphColors && t19.isWebGL2 ? "#define USE_MORPHCOLORS" : "",
    t19.morphTargetsCount > 0 && t19.isWebGL2 ? "#define MORPHTARGETS_TEXTURE" : "",
    t19.morphTargetsCount > 0 && t19.isWebGL2 ? "#define MORPHTARGETS_TEXTURE_STRIDE " + t19.morphTextureStride : "",
    t19.morphTargetsCount > 0 && t19.isWebGL2 ? "#define MORPHTARGETS_COUNT " + t19.morphTargetsCount : "",
    t19.doubleSided ? "#define DOUBLE_SIDED" : "",
    t19.flipSided ? "#define FLIP_SIDED" : "",
    t19.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
    t19.shadowMapEnabled ? "#define " + c27 : "",
    t19.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "",
    t19.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
    t19.logarithmicDepthBuffer && t19.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "",
    "uniform mat4 modelMatrix;",
    "uniform mat4 modelViewMatrix;",
    "uniform mat4 projectionMatrix;",
    "uniform mat4 viewMatrix;",
    "uniform mat3 normalMatrix;",
    "uniform vec3 cameraPosition;",
    "uniform bool isOrthographic;",
    "#ifdef USE_INSTANCING",
    "	attribute mat4 instanceMatrix;",
    "#endif",
    "#ifdef USE_INSTANCING_COLOR",
    "	attribute vec3 instanceColor;",
    "#endif",
    "attribute vec3 position;",
    "attribute vec3 normal;",
    "attribute vec2 uv;",
    "#ifdef USE_TANGENT",
    "	attribute vec4 tangent;",
    "#endif",
    "#if defined( USE_COLOR_ALPHA )",
    "	attribute vec4 color;",
    "#elif defined( USE_COLOR )",
    "	attribute vec3 color;",
    "#endif",
    "#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )",
    "	attribute vec3 morphTarget0;",
    "	attribute vec3 morphTarget1;",
    "	attribute vec3 morphTarget2;",
    "	attribute vec3 morphTarget3;",
    "	#ifdef USE_MORPHNORMALS",
    "		attribute vec3 morphNormal0;",
    "		attribute vec3 morphNormal1;",
    "		attribute vec3 morphNormal2;",
    "		attribute vec3 morphNormal3;",
    "	#else",
    "		attribute vec3 morphTarget4;",
    "		attribute vec3 morphTarget5;",
    "		attribute vec3 morphTarget6;",
    "		attribute vec3 morphTarget7;",
    "	#endif",
    "#endif",
    "#ifdef USE_SKINNING",
    "	attribute vec4 skinIndex;",
    "	attribute vec4 skinWeight;",
    "#endif",
    `
`
  ].filter(Ys).join(`
`), f40 = [
    p26,
    dc(t19),
    "#define SHADER_NAME " + t19.shaderName,
    g32,
    t19.useFog && t19.fog ? "#define USE_FOG" : "",
    t19.useFog && t19.fogExp2 ? "#define FOG_EXP2" : "",
    t19.map ? "#define USE_MAP" : "",
    t19.matcap ? "#define USE_MATCAP" : "",
    t19.envMap ? "#define USE_ENVMAP" : "",
    t19.envMap ? "#define " + l26 : "",
    t19.envMap ? "#define " + u35 : "",
    t19.envMap ? "#define " + h26 : "",
    d34 ? "#define CUBEUV_TEXEL_WIDTH " + d34.texelWidth : "",
    d34 ? "#define CUBEUV_TEXEL_HEIGHT " + d34.texelHeight : "",
    d34 ? "#define CUBEUV_MAX_MIP " + d34.maxMip + ".0" : "",
    t19.lightMap ? "#define USE_LIGHTMAP" : "",
    t19.aoMap ? "#define USE_AOMAP" : "",
    t19.bumpMap ? "#define USE_BUMPMAP" : "",
    t19.normalMap ? "#define USE_NORMALMAP" : "",
    t19.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "",
    t19.normalMapTangentSpace ? "#define USE_NORMALMAP_TANGENTSPACE" : "",
    t19.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
    t19.clearcoat ? "#define USE_CLEARCOAT" : "",
    t19.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
    t19.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "",
    t19.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
    t19.iridescence ? "#define USE_IRIDESCENCE" : "",
    t19.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
    t19.iridescenceThicknessMap ? "#define USE_IRIDESCENCE_THICKNESSMAP" : "",
    t19.specularMap ? "#define USE_SPECULARMAP" : "",
    t19.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "",
    t19.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "",
    t19.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
    t19.metalnessMap ? "#define USE_METALNESSMAP" : "",
    t19.alphaMap ? "#define USE_ALPHAMAP" : "",
    t19.alphaTest ? "#define USE_ALPHATEST" : "",
    t19.sheen ? "#define USE_SHEEN" : "",
    t19.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "",
    t19.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "",
    t19.transmission ? "#define USE_TRANSMISSION" : "",
    t19.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
    t19.thicknessMap ? "#define USE_THICKNESSMAP" : "",
    t19.decodeVideoTexture ? "#define DECODE_VIDEO_TEXTURE" : "",
    t19.vertexTangents ? "#define USE_TANGENT" : "",
    t19.vertexColors || t19.instancingColor ? "#define USE_COLOR" : "",
    t19.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
    t19.vertexUvs2 ? "#define USE_UV2" : "",
    t19.pointsUvs ? "#define USE_POINTS_UV" : "",
    t19.gradientMap ? "#define USE_GRADIENTMAP" : "",
    t19.flatShading ? "#define FLAT_SHADED" : "",
    t19.doubleSided ? "#define DOUBLE_SIDED" : "",
    t19.flipSided ? "#define FLIP_SIDED" : "",
    t19.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
    t19.shadowMapEnabled ? "#define " + c27 : "",
    t19.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "",
    t19.useLegacyLights ? "#define LEGACY_LIGHTS" : "",
    t19.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
    t19.logarithmicDepthBuffer && t19.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "",
    "uniform mat4 viewMatrix;",
    "uniform vec3 cameraPosition;",
    "uniform bool isOrthographic;",
    t19.toneMapping !== Wn3 ? "#define TONE_MAPPING" : "",
    t19.toneMapping !== Wn3 ? Je4.tonemapping_pars_fragment : "",
    // this code is required here because it is used by the toneMapping() function defined below
    t19.toneMapping !== Wn3 ? Sg("toneMapping", t19.toneMapping) : "",
    t19.dithering ? "#define DITHERING" : "",
    t19.opaque ? "#define OPAQUE" : "",
    Je4.encodings_pars_fragment,
    // this code is required here because it is used by the various encoding/decoding function defined below
    Mg("linearToOutputTexel", t19.outputEncoding),
    t19.useDepthPacking ? "#define DEPTH_PACKING " + t19.depthPacking : "",
    `
`
  ].filter(Ys).join(`
`)), r24 = ya(r24), r24 = cc(r24, t19), r24 = uc(r24, t19), o13 = ya(o13), o13 = cc(o13, t19), o13 = uc(o13, t19), r24 = hc(r24), o13 = hc(o13), t19.isWebGL2 && t19.isRawShaderMaterial !== true && (E25 = `#version 300 es
`, m34 = [
    "precision mediump sampler2DArray;",
    "#define attribute in",
    "#define varying out",
    "#define texture2D texture"
  ].join(`
`) + `
` + m34, f40 = [
    "#define varying in",
    t19.glslVersion === Il ? "" : "layout(location = 0) out highp vec4 pc_fragColor;",
    t19.glslVersion === Il ? "" : "#define gl_FragColor pc_fragColor",
    "#define gl_FragDepthEXT gl_FragDepth",
    "#define texture2D texture",
    "#define textureCube texture",
    "#define texture2DProj textureProj",
    "#define texture2DLodEXT textureLod",
    "#define texture2DProjLodEXT textureProjLod",
    "#define textureCubeLodEXT textureLod",
    "#define texture2DGradEXT textureGrad",
    "#define texture2DProjGradEXT textureProjGrad",
    "#define textureCubeGradEXT textureGrad"
  ].join(`
`) + `
` + f40);
  const b35 = E25 + m34 + r24, w31 = E25 + f40 + o13, S23 = ac(i27, 35633, b35), D18 = ac(i27, 35632, w31);
  if (i27.attachShader(y34, S23), i27.attachShader(y34, D18), t19.index0AttributeName !== void 0 ? i27.bindAttribLocation(y34, 0, t19.index0AttributeName) : t19.morphTargets === true && i27.bindAttribLocation(y34, 0, "position"), i27.linkProgram(y34), a22.debug.checkShaderErrors) {
    const v31 = i27.getProgramInfoLog(y34).trim(), L12 = i27.getShaderInfoLog(S23).trim(), G16 = i27.getShaderInfoLog(D18).trim();
    let B22 = true, k29 = true;
    if (i27.getProgramParameter(y34, 35714) === false)
      if (B22 = false, typeof a22.debug.onShaderError == "function")
        a22.debug.onShaderError(i27, y34, S23, D18);
      else {
        const V16 = lc(i27, S23, "vertex"), H16 = lc(i27, D18, "fragment");
        console.error(
          "THREE.WebGLProgram: Shader Error " + i27.getError() + " - VALIDATE_STATUS " + i27.getProgramParameter(y34, 35715) + `

Program Info Log: ` + v31 + `
` + V16 + `
` + H16
        );
      }
    else
      v31 !== "" ? console.warn("THREE.WebGLProgram: Program Info Log:", v31) : (L12 === "" || G16 === "") && (k29 = false);
    k29 && (this.diagnostics = {
      runnable: B22,
      programLog: v31,
      vertexShader: {
        log: L12,
        prefix: m34
      },
      fragmentShader: {
        log: G16,
        prefix: f40
      }
    });
  }
  i27.deleteShader(S23), i27.deleteShader(D18);
  let N22;
  this.getUniforms = function() {
    return N22 === void 0 && (N22 = new eo(i27, y34)), N22;
  };
  let I18;
  return this.getAttributes = function() {
    return I18 === void 0 && (I18 = Ag(i27, y34)), I18;
  }, this.destroy = function() {
    n33.releaseStatesOfProgram(this), i27.deleteProgram(y34), this.program = void 0;
  }, this.name = t19.shaderName, this.id = yg++, this.cacheKey = e11, this.usedTimes = 1, this.program = y34, this.vertexShader = S23, this.fragmentShader = D18, this;
}
var Og = 0;
var Fg = class {
  constructor() {
    this.shaderCache = /* @__PURE__ */ new Map(), this.materialCache = /* @__PURE__ */ new Map();
  }
  update(e11) {
    const t19 = e11.vertexShader, n33 = e11.fragmentShader, i27 = this._getShaderStage(t19), s18 = this._getShaderStage(n33), r24 = this._getShaderCacheForMaterial(e11);
    return r24.has(i27) === false && (r24.add(i27), i27.usedTimes++), r24.has(s18) === false && (r24.add(s18), s18.usedTimes++), this;
  }
  remove(e11) {
    const t19 = this.materialCache.get(e11);
    for (const n33 of t19)
      n33.usedTimes--, n33.usedTimes === 0 && this.shaderCache.delete(n33.code);
    return this.materialCache.delete(e11), this;
  }
  getVertexShaderID(e11) {
    return this._getShaderStage(e11.vertexShader).id;
  }
  getFragmentShaderID(e11) {
    return this._getShaderStage(e11.fragmentShader).id;
  }
  dispose() {
    this.shaderCache.clear(), this.materialCache.clear();
  }
  _getShaderCacheForMaterial(e11) {
    const t19 = this.materialCache;
    let n33 = t19.get(e11);
    return n33 === void 0 && (n33 = /* @__PURE__ */ new Set(), t19.set(e11, n33)), n33;
  }
  _getShaderStage(e11) {
    const t19 = this.shaderCache;
    let n33 = t19.get(e11);
    return n33 === void 0 && (n33 = new zg(e11), t19.set(e11, n33)), n33;
  }
};
var zg = class {
  constructor(e11) {
    this.id = Og++, this.code = e11, this.usedTimes = 0;
  }
};
function Bg(a22, e11, t19, n33, i27, s18, r24) {
  const o13 = new hu(), c27 = new Fg(), l26 = [], u35 = i27.isWebGL2, h26 = i27.logarithmicDepthBuffer, d34 = i27.vertexTextures;
  let p26 = i27.precision;
  const g32 = {
    MeshDepthMaterial: "depth",
    MeshDistanceMaterial: "distanceRGBA",
    MeshNormalMaterial: "normal",
    MeshBasicMaterial: "basic",
    MeshLambertMaterial: "lambert",
    MeshPhongMaterial: "phong",
    MeshToonMaterial: "toon",
    MeshStandardMaterial: "physical",
    MeshPhysicalMaterial: "physical",
    MeshMatcapMaterial: "matcap",
    LineBasicMaterial: "basic",
    LineDashedMaterial: "dashed",
    PointsMaterial: "points",
    ShadowMaterial: "shadow",
    SpriteMaterial: "sprite"
  };
  function y34(v31) {
    return v31 === 1 ? "uv2" : "uv";
  }
  function m34(v31, L12, G16, B22, k29) {
    const V16 = B22.fog, H16 = k29.geometry, W11 = v31.isMeshStandardMaterial ? B22.environment : null, te7 = (v31.isMeshStandardMaterial ? t19 : e11).get(v31.envMap || W11), J12 = te7 && te7.mapping === lo ? te7.image.height : null, ie8 = g32[v31.type];
    v31.precision !== null && (p26 = i27.getMaxPrecision(v31.precision), p26 !== v31.precision && console.warn("THREE.WebGLProgram.getParameters:", v31.precision, "not supported, using", p26, "instead."));
    const le7 = H16.morphAttributes.position || H16.morphAttributes.normal || H16.morphAttributes.color, me9 = le7 !== void 0 ? le7.length : 0;
    let he8 = 0;
    H16.morphAttributes.position !== void 0 && (he8 = 1), H16.morphAttributes.normal !== void 0 && (he8 = 2), H16.morphAttributes.color !== void 0 && (he8 = 3);
    let j19, X14, ee7, $25;
    if (ie8) {
      const Se7 = Cn3[ie8];
      j19 = Se7.vertexShader, X14 = Se7.fragmentShader;
    } else
      j19 = v31.vertexShader, X14 = v31.fragmentShader, c27.update(v31), ee7 = c27.getVertexShaderID(v31), $25 = c27.getFragmentShaderID(v31);
    const z21 = a22.getRenderTarget(), be7 = k29.isInstancedMesh === true, Ee5 = !!v31.map, pe8 = !!v31.matcap, ke7 = !!te7, nt17 = !!v31.aoMap, Ie7 = !!v31.lightMap, je7 = !!v31.bumpMap, bt10 = !!v31.normalMap, xt8 = !!v31.displacementMap, St9 = !!v31.emissiveMap, wt10 = !!v31.metalnessMap, et15 = !!v31.roughnessMap, ct12 = v31.clearcoat > 0, kt10 = v31.iridescence > 0, P20 = v31.sheen > 0, C21 = v31.transmission > 0, Q12 = ct12 && !!v31.clearcoatMap, de9 = ct12 && !!v31.clearcoatNormalMap, fe7 = ct12 && !!v31.clearcoatRoughnessMap, _e7 = kt10 && !!v31.iridescenceMap, O20 = kt10 && !!v31.iridescenceThicknessMap, ae7 = P20 && !!v31.sheenColorMap, Z12 = P20 && !!v31.sheenRoughnessMap, ye7 = !!v31.specularMap, Te7 = !!v31.specularColorMap, Le7 = !!v31.specularIntensityMap, Me7 = C21 && !!v31.transmissionMap, Ce7 = C21 && !!v31.thicknessMap, Ge7 = !!v31.gradientMap, Xe7 = !!v31.alphaMap, Mt10 = v31.alphaTest > 0, F19 = !!v31.extensions, se6 = !!H16.attributes.uv2;
    return {
      isWebGL2: u35,
      shaderID: ie8,
      shaderName: v31.type,
      vertexShader: j19,
      fragmentShader: X14,
      defines: v31.defines,
      customVertexShaderID: ee7,
      customFragmentShaderID: $25,
      isRawShaderMaterial: v31.isRawShaderMaterial === true,
      glslVersion: v31.glslVersion,
      precision: p26,
      instancing: be7,
      instancingColor: be7 && k29.instanceColor !== null,
      supportsVertexTextures: d34,
      outputEncoding: z21 === null ? a22.outputEncoding : z21.isXRRenderTarget === true ? z21.texture.encoding : Ci,
      map: Ee5,
      matcap: pe8,
      envMap: ke7,
      envMapMode: ke7 && te7.mapping,
      envMapCubeUVHeight: J12,
      aoMap: nt17,
      lightMap: Ie7,
      bumpMap: je7,
      normalMap: bt10,
      displacementMap: d34 && xt8,
      emissiveMap: St9,
      normalMapObjectSpace: bt10 && v31.normalMapType === Kh,
      normalMapTangentSpace: bt10 && v31.normalMapType === co,
      decodeVideoTexture: Ee5 && v31.map.isVideoTexture === true && v31.map.encoding === st8,
      metalnessMap: wt10,
      roughnessMap: et15,
      clearcoat: ct12,
      clearcoatMap: Q12,
      clearcoatNormalMap: de9,
      clearcoatRoughnessMap: fe7,
      iridescence: kt10,
      iridescenceMap: _e7,
      iridescenceThicknessMap: O20,
      sheen: P20,
      sheenColorMap: ae7,
      sheenRoughnessMap: Z12,
      specularMap: ye7,
      specularColorMap: Te7,
      specularIntensityMap: Le7,
      transmission: C21,
      transmissionMap: Me7,
      thicknessMap: Ce7,
      gradientMap: Ge7,
      opaque: v31.transparent === false && v31.blending === gs,
      alphaMap: Xe7,
      alphaTest: Mt10,
      combine: v31.combine,
      //
      mapUv: Ee5 && y34(v31.map.channel),
      aoMapUv: nt17 && y34(v31.aoMap.channel),
      lightMapUv: Ie7 && y34(v31.lightMap.channel),
      bumpMapUv: je7 && y34(v31.bumpMap.channel),
      normalMapUv: bt10 && y34(v31.normalMap.channel),
      displacementMapUv: xt8 && y34(v31.displacementMap.channel),
      emissiveMapUv: St9 && y34(v31.emissiveMap.channel),
      metalnessMapUv: wt10 && y34(v31.metalnessMap.channel),
      roughnessMapUv: et15 && y34(v31.roughnessMap.channel),
      clearcoatMapUv: Q12 && y34(v31.clearcoatMap.channel),
      clearcoatNormalMapUv: de9 && y34(v31.clearcoatNormalMap.channel),
      clearcoatRoughnessMapUv: fe7 && y34(v31.clearcoatRoughnessMap.channel),
      iridescenceMapUv: _e7 && y34(v31.iridescenceMap.channel),
      iridescenceThicknessMapUv: O20 && y34(v31.iridescenceThicknessMap.channel),
      sheenColorMapUv: ae7 && y34(v31.sheenColorMap.channel),
      sheenRoughnessMapUv: Z12 && y34(v31.sheenRoughnessMap.channel),
      specularMapUv: ye7 && y34(v31.specularMap.channel),
      specularColorMapUv: Te7 && y34(v31.specularColorMap.channel),
      specularIntensityMapUv: Le7 && y34(v31.specularIntensityMap.channel),
      transmissionMapUv: Me7 && y34(v31.transmissionMap.channel),
      thicknessMapUv: Ce7 && y34(v31.thicknessMap.channel),
      alphaMapUv: Xe7 && y34(v31.alphaMap.channel),
      //
      vertexTangents: bt10 && !!H16.attributes.tangent,
      vertexColors: v31.vertexColors,
      vertexAlphas: v31.vertexColors === true && !!H16.attributes.color && H16.attributes.color.itemSize === 4,
      vertexUvs2: se6,
      pointsUvs: k29.isPoints === true && !!H16.attributes.uv && (Ee5 || Xe7),
      fog: !!V16,
      useFog: v31.fog === true,
      fogExp2: V16 && V16.isFogExp2,
      flatShading: v31.flatShading === true,
      sizeAttenuation: v31.sizeAttenuation === true,
      logarithmicDepthBuffer: h26,
      skinning: k29.isSkinnedMesh === true,
      morphTargets: H16.morphAttributes.position !== void 0,
      morphNormals: H16.morphAttributes.normal !== void 0,
      morphColors: H16.morphAttributes.color !== void 0,
      morphTargetsCount: me9,
      morphTextureStride: he8,
      numDirLights: L12.directional.length,
      numPointLights: L12.point.length,
      numSpotLights: L12.spot.length,
      numSpotLightMaps: L12.spotLightMap.length,
      numRectAreaLights: L12.rectArea.length,
      numHemiLights: L12.hemi.length,
      numDirLightShadows: L12.directionalShadowMap.length,
      numPointLightShadows: L12.pointShadowMap.length,
      numSpotLightShadows: L12.spotShadowMap.length,
      numSpotLightShadowsWithMaps: L12.numSpotLightShadowsWithMaps,
      numClippingPlanes: r24.numPlanes,
      numClipIntersection: r24.numIntersection,
      dithering: v31.dithering,
      shadowMapEnabled: a22.shadowMap.enabled && G16.length > 0,
      shadowMapType: a22.shadowMap.type,
      toneMapping: v31.toneMapped ? a22.toneMapping : Wn3,
      useLegacyLights: a22.useLegacyLights,
      premultipliedAlpha: v31.premultipliedAlpha,
      doubleSided: v31.side === fn3,
      flipSided: v31.side === sn3,
      useDepthPacking: v31.depthPacking >= 0,
      depthPacking: v31.depthPacking || 0,
      index0AttributeName: v31.index0AttributeName,
      extensionDerivatives: F19 && v31.extensions.derivatives === true,
      extensionFragDepth: F19 && v31.extensions.fragDepth === true,
      extensionDrawBuffers: F19 && v31.extensions.drawBuffers === true,
      extensionShaderTextureLOD: F19 && v31.extensions.shaderTextureLOD === true,
      rendererExtensionFragDepth: u35 || n33.has("EXT_frag_depth"),
      rendererExtensionDrawBuffers: u35 || n33.has("WEBGL_draw_buffers"),
      rendererExtensionShaderTextureLod: u35 || n33.has("EXT_shader_texture_lod"),
      customProgramCacheKey: v31.customProgramCacheKey()
    };
  }
  function f40(v31) {
    const L12 = [];
    if (v31.shaderID ? L12.push(v31.shaderID) : (L12.push(v31.customVertexShaderID), L12.push(v31.customFragmentShaderID)), v31.defines !== void 0)
      for (const G16 in v31.defines)
        L12.push(G16), L12.push(v31.defines[G16]);
    return v31.isRawShaderMaterial === false && (E25(L12, v31), b35(L12, v31), L12.push(a22.outputEncoding)), L12.push(v31.customProgramCacheKey), L12.join();
  }
  function E25(v31, L12) {
    v31.push(L12.precision), v31.push(L12.outputEncoding), v31.push(L12.envMapMode), v31.push(L12.envMapCubeUVHeight), v31.push(L12.mapUv), v31.push(L12.alphaMapUv), v31.push(L12.lightMapUv), v31.push(L12.aoMapUv), v31.push(L12.bumpMapUv), v31.push(L12.normalMapUv), v31.push(L12.displacementMapUv), v31.push(L12.emissiveMapUv), v31.push(L12.metalnessMapUv), v31.push(L12.roughnessMapUv), v31.push(L12.clearcoatMapUv), v31.push(L12.clearcoatNormalMapUv), v31.push(L12.clearcoatRoughnessMapUv), v31.push(L12.iridescenceMapUv), v31.push(L12.iridescenceThicknessMapUv), v31.push(L12.sheenColorMapUv), v31.push(L12.sheenRoughnessMapUv), v31.push(L12.specularMapUv), v31.push(L12.specularColorMapUv), v31.push(L12.specularIntensityMapUv), v31.push(L12.transmissionMapUv), v31.push(L12.thicknessMapUv), v31.push(L12.combine), v31.push(L12.fogExp2), v31.push(L12.sizeAttenuation), v31.push(L12.morphTargetsCount), v31.push(L12.morphAttributeCount), v31.push(L12.numDirLights), v31.push(L12.numPointLights), v31.push(L12.numSpotLights), v31.push(L12.numSpotLightMaps), v31.push(L12.numHemiLights), v31.push(L12.numRectAreaLights), v31.push(L12.numDirLightShadows), v31.push(L12.numPointLightShadows), v31.push(L12.numSpotLightShadows), v31.push(L12.numSpotLightShadowsWithMaps), v31.push(L12.shadowMapType), v31.push(L12.toneMapping), v31.push(L12.numClippingPlanes), v31.push(L12.numClipIntersection), v31.push(L12.depthPacking);
  }
  function b35(v31, L12) {
    o13.disableAll(), L12.isWebGL2 && o13.enable(0), L12.supportsVertexTextures && o13.enable(1), L12.instancing && o13.enable(2), L12.instancingColor && o13.enable(3), L12.matcap && o13.enable(4), L12.envMap && o13.enable(5), L12.normalMapObjectSpace && o13.enable(6), L12.normalMapTangentSpace && o13.enable(7), L12.clearcoat && o13.enable(8), L12.iridescence && o13.enable(9), L12.alphaTest && o13.enable(10), L12.vertexColors && o13.enable(11), L12.vertexAlphas && o13.enable(12), L12.vertexUvs2 && o13.enable(13), L12.vertexTangents && o13.enable(14), v31.push(o13.mask), o13.disableAll(), L12.fog && o13.enable(0), L12.useFog && o13.enable(1), L12.flatShading && o13.enable(2), L12.logarithmicDepthBuffer && o13.enable(3), L12.skinning && o13.enable(4), L12.morphTargets && o13.enable(5), L12.morphNormals && o13.enable(6), L12.morphColors && o13.enable(7), L12.premultipliedAlpha && o13.enable(8), L12.shadowMapEnabled && o13.enable(9), L12.useLegacyLights && o13.enable(10), L12.doubleSided && o13.enable(11), L12.flipSided && o13.enable(12), L12.useDepthPacking && o13.enable(13), L12.dithering && o13.enable(14), L12.transmission && o13.enable(15), L12.sheen && o13.enable(16), L12.decodeVideoTexture && o13.enable(17), L12.opaque && o13.enable(18), L12.pointsUvs && o13.enable(19), v31.push(o13.mask);
  }
  function w31(v31) {
    const L12 = g32[v31.type];
    let G16;
    if (L12) {
      const B22 = Cn3[L12];
      G16 = Cd.clone(B22.uniforms);
    } else
      G16 = v31.uniforms;
    return G16;
  }
  function S23(v31, L12) {
    let G16;
    for (let B22 = 0, k29 = l26.length; B22 < k29; B22++) {
      const V16 = l26[B22];
      if (V16.cacheKey === L12) {
        G16 = V16, ++G16.usedTimes;
        break;
      }
    }
    return G16 === void 0 && (G16 = new kg(a22, L12, v31, s18), l26.push(G16)), G16;
  }
  function D18(v31) {
    if (--v31.usedTimes === 0) {
      const L12 = l26.indexOf(v31);
      l26[L12] = l26[l26.length - 1], l26.pop(), v31.destroy();
    }
  }
  function N22(v31) {
    c27.remove(v31);
  }
  function I18() {
    c27.dispose();
  }
  return {
    getParameters: m34,
    getProgramCacheKey: f40,
    getUniforms: w31,
    acquireProgram: S23,
    releaseProgram: D18,
    releaseShaderCache: N22,
    // Exposed for resource monitoring & error feedback via renderer.info:
    programs: l26,
    dispose: I18
  };
}
function Vg() {
  let a22 = /* @__PURE__ */ new WeakMap();
  function e11(s18) {
    let r24 = a22.get(s18);
    return r24 === void 0 && (r24 = {}, a22.set(s18, r24)), r24;
  }
  function t19(s18) {
    a22.delete(s18);
  }
  function n33(s18, r24, o13) {
    a22.get(s18)[r24] = o13;
  }
  function i27() {
    a22 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: e11,
    remove: t19,
    update: n33,
    dispose: i27
  };
}
function Gg(a22, e11) {
  return a22.groupOrder !== e11.groupOrder ? a22.groupOrder - e11.groupOrder : a22.renderOrder !== e11.renderOrder ? a22.renderOrder - e11.renderOrder : a22.material.id !== e11.material.id ? a22.material.id - e11.material.id : a22.z !== e11.z ? a22.z - e11.z : a22.id - e11.id;
}
function fc(a22, e11) {
  return a22.groupOrder !== e11.groupOrder ? a22.groupOrder - e11.groupOrder : a22.renderOrder !== e11.renderOrder ? a22.renderOrder - e11.renderOrder : a22.z !== e11.z ? e11.z - a22.z : a22.id - e11.id;
}
function pc() {
  const a22 = [];
  let e11 = 0;
  const t19 = [], n33 = [], i27 = [];
  function s18() {
    e11 = 0, t19.length = 0, n33.length = 0, i27.length = 0;
  }
  function r24(h26, d34, p26, g32, y34, m34) {
    let f40 = a22[e11];
    return f40 === void 0 ? (f40 = {
      id: h26.id,
      object: h26,
      geometry: d34,
      material: p26,
      groupOrder: g32,
      renderOrder: h26.renderOrder,
      z: y34,
      group: m34
    }, a22[e11] = f40) : (f40.id = h26.id, f40.object = h26, f40.geometry = d34, f40.material = p26, f40.groupOrder = g32, f40.renderOrder = h26.renderOrder, f40.z = y34, f40.group = m34), e11++, f40;
  }
  function o13(h26, d34, p26, g32, y34, m34) {
    const f40 = r24(h26, d34, p26, g32, y34, m34);
    p26.transmission > 0 ? n33.push(f40) : p26.transparent === true ? i27.push(f40) : t19.push(f40);
  }
  function c27(h26, d34, p26, g32, y34, m34) {
    const f40 = r24(h26, d34, p26, g32, y34, m34);
    p26.transmission > 0 ? n33.unshift(f40) : p26.transparent === true ? i27.unshift(f40) : t19.unshift(f40);
  }
  function l26(h26, d34) {
    t19.length > 1 && t19.sort(h26 || Gg), n33.length > 1 && n33.sort(d34 || fc), i27.length > 1 && i27.sort(d34 || fc);
  }
  function u35() {
    for (let h26 = e11, d34 = a22.length; h26 < d34; h26++) {
      const p26 = a22[h26];
      if (p26.id === null)
        break;
      p26.id = null, p26.object = null, p26.geometry = null, p26.material = null, p26.group = null;
    }
  }
  return {
    opaque: t19,
    transmissive: n33,
    transparent: i27,
    init: s18,
    push: o13,
    unshift: c27,
    finish: u35,
    sort: l26
  };
}
function Hg() {
  let a22 = /* @__PURE__ */ new WeakMap();
  function e11(n33, i27) {
    const s18 = a22.get(n33);
    let r24;
    return s18 === void 0 ? (r24 = new pc(), a22.set(n33, [r24])) : i27 >= s18.length ? (r24 = new pc(), s18.push(r24)) : r24 = s18[i27], r24;
  }
  function t19() {
    a22 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: e11,
    dispose: t19
  };
}
function Wg() {
  const a22 = {};
  return {
    get: function(e11) {
      if (a22[e11.id] !== void 0)
        return a22[e11.id];
      let t19;
      switch (e11.type) {
        case "DirectionalLight":
          t19 = {
            direction: new U9(),
            color: new ze4()
          };
          break;
        case "SpotLight":
          t19 = {
            position: new U9(),
            direction: new U9(),
            color: new ze4(),
            distance: 0,
            coneCos: 0,
            penumbraCos: 0,
            decay: 0
          };
          break;
        case "PointLight":
          t19 = {
            position: new U9(),
            color: new ze4(),
            distance: 0,
            decay: 0
          };
          break;
        case "HemisphereLight":
          t19 = {
            direction: new U9(),
            skyColor: new ze4(),
            groundColor: new ze4()
          };
          break;
        case "RectAreaLight":
          t19 = {
            color: new ze4(),
            position: new U9(),
            halfWidth: new U9(),
            halfHeight: new U9()
          };
          break;
      }
      return a22[e11.id] = t19, t19;
    }
  };
}
function jg() {
  const a22 = {};
  return {
    get: function(e11) {
      if (a22[e11.id] !== void 0)
        return a22[e11.id];
      let t19;
      switch (e11.type) {
        case "DirectionalLight":
          t19 = {
            shadowBias: 0,
            shadowNormalBias: 0,
            shadowRadius: 1,
            shadowMapSize: new We4()
          };
          break;
        case "SpotLight":
          t19 = {
            shadowBias: 0,
            shadowNormalBias: 0,
            shadowRadius: 1,
            shadowMapSize: new We4()
          };
          break;
        case "PointLight":
          t19 = {
            shadowBias: 0,
            shadowNormalBias: 0,
            shadowRadius: 1,
            shadowMapSize: new We4(),
            shadowCameraNear: 1,
            shadowCameraFar: 1e3
          };
          break;
      }
      return a22[e11.id] = t19, t19;
    }
  };
}
var qg = 0;
function Xg(a22, e11) {
  return (e11.castShadow ? 2 : 0) - (a22.castShadow ? 2 : 0) + (e11.map ? 1 : 0) - (a22.map ? 1 : 0);
}
function Kg(a22, e11) {
  const t19 = new Wg(), n33 = jg(), i27 = {
    version: 0,
    hash: {
      directionalLength: -1,
      pointLength: -1,
      spotLength: -1,
      rectAreaLength: -1,
      hemiLength: -1,
      numDirectionalShadows: -1,
      numPointShadows: -1,
      numSpotShadows: -1,
      numSpotMaps: -1
    },
    ambient: [0, 0, 0],
    probe: [],
    directional: [],
    directionalShadow: [],
    directionalShadowMap: [],
    directionalShadowMatrix: [],
    spot: [],
    spotLightMap: [],
    spotShadow: [],
    spotShadowMap: [],
    spotLightMatrix: [],
    rectArea: [],
    rectAreaLTC1: null,
    rectAreaLTC2: null,
    point: [],
    pointShadow: [],
    pointShadowMap: [],
    pointShadowMatrix: [],
    hemi: [],
    numSpotLightShadowsWithMaps: 0
  };
  for (let u35 = 0; u35 < 9; u35++)
    i27.probe.push(new U9());
  const s18 = new U9(), r24 = new Ve4(), o13 = new Ve4();
  function c27(u35, h26) {
    let d34 = 0, p26 = 0, g32 = 0;
    for (let G16 = 0; G16 < 9; G16++)
      i27.probe[G16].set(0, 0, 0);
    let y34 = 0, m34 = 0, f40 = 0, E25 = 0, b35 = 0, w31 = 0, S23 = 0, D18 = 0, N22 = 0, I18 = 0;
    u35.sort(Xg);
    const v31 = h26 === true ? Math.PI : 1;
    for (let G16 = 0, B22 = u35.length; G16 < B22; G16++) {
      const k29 = u35[G16], V16 = k29.color, H16 = k29.intensity, W11 = k29.distance, te7 = k29.shadow && k29.shadow.map ? k29.shadow.map.texture : null;
      if (k29.isAmbientLight)
        d34 += V16.r * H16 * v31, p26 += V16.g * H16 * v31, g32 += V16.b * H16 * v31;
      else if (k29.isLightProbe)
        for (let J12 = 0; J12 < 9; J12++)
          i27.probe[J12].addScaledVector(k29.sh.coefficients[J12], H16);
      else if (k29.isDirectionalLight) {
        const J12 = t19.get(k29);
        if (J12.color.copy(k29.color).multiplyScalar(k29.intensity * v31), k29.castShadow) {
          const ie8 = k29.shadow, le7 = n33.get(k29);
          le7.shadowBias = ie8.bias, le7.shadowNormalBias = ie8.normalBias, le7.shadowRadius = ie8.radius, le7.shadowMapSize = ie8.mapSize, i27.directionalShadow[y34] = le7, i27.directionalShadowMap[y34] = te7, i27.directionalShadowMatrix[y34] = k29.shadow.matrix, w31++;
        }
        i27.directional[y34] = J12, y34++;
      } else if (k29.isSpotLight) {
        const J12 = t19.get(k29);
        J12.position.setFromMatrixPosition(k29.matrixWorld), J12.color.copy(V16).multiplyScalar(H16 * v31), J12.distance = W11, J12.coneCos = Math.cos(k29.angle), J12.penumbraCos = Math.cos(k29.angle * (1 - k29.penumbra)), J12.decay = k29.decay, i27.spot[f40] = J12;
        const ie8 = k29.shadow;
        if (k29.map && (i27.spotLightMap[N22] = k29.map, N22++, ie8.updateMatrices(k29), k29.castShadow && I18++), i27.spotLightMatrix[f40] = ie8.matrix, k29.castShadow) {
          const le7 = n33.get(k29);
          le7.shadowBias = ie8.bias, le7.shadowNormalBias = ie8.normalBias, le7.shadowRadius = ie8.radius, le7.shadowMapSize = ie8.mapSize, i27.spotShadow[f40] = le7, i27.spotShadowMap[f40] = te7, D18++;
        }
        f40++;
      } else if (k29.isRectAreaLight) {
        const J12 = t19.get(k29);
        J12.color.copy(V16).multiplyScalar(H16), J12.halfWidth.set(k29.width * 0.5, 0, 0), J12.halfHeight.set(0, k29.height * 0.5, 0), i27.rectArea[E25] = J12, E25++;
      } else if (k29.isPointLight) {
        const J12 = t19.get(k29);
        if (J12.color.copy(k29.color).multiplyScalar(k29.intensity * v31), J12.distance = k29.distance, J12.decay = k29.decay, k29.castShadow) {
          const ie8 = k29.shadow, le7 = n33.get(k29);
          le7.shadowBias = ie8.bias, le7.shadowNormalBias = ie8.normalBias, le7.shadowRadius = ie8.radius, le7.shadowMapSize = ie8.mapSize, le7.shadowCameraNear = ie8.camera.near, le7.shadowCameraFar = ie8.camera.far, i27.pointShadow[m34] = le7, i27.pointShadowMap[m34] = te7, i27.pointShadowMatrix[m34] = k29.shadow.matrix, S23++;
        }
        i27.point[m34] = J12, m34++;
      } else if (k29.isHemisphereLight) {
        const J12 = t19.get(k29);
        J12.skyColor.copy(k29.color).multiplyScalar(H16 * v31), J12.groundColor.copy(k29.groundColor).multiplyScalar(H16 * v31), i27.hemi[b35] = J12, b35++;
      }
    }
    E25 > 0 && (e11.isWebGL2 || a22.has("OES_texture_float_linear") === true ? (i27.rectAreaLTC1 = xe4.LTC_FLOAT_1, i27.rectAreaLTC2 = xe4.LTC_FLOAT_2) : a22.has("OES_texture_half_float_linear") === true ? (i27.rectAreaLTC1 = xe4.LTC_HALF_1, i27.rectAreaLTC2 = xe4.LTC_HALF_2) : console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")), i27.ambient[0] = d34, i27.ambient[1] = p26, i27.ambient[2] = g32;
    const L12 = i27.hash;
    (L12.directionalLength !== y34 || L12.pointLength !== m34 || L12.spotLength !== f40 || L12.rectAreaLength !== E25 || L12.hemiLength !== b35 || L12.numDirectionalShadows !== w31 || L12.numPointShadows !== S23 || L12.numSpotShadows !== D18 || L12.numSpotMaps !== N22) && (i27.directional.length = y34, i27.spot.length = f40, i27.rectArea.length = E25, i27.point.length = m34, i27.hemi.length = b35, i27.directionalShadow.length = w31, i27.directionalShadowMap.length = w31, i27.pointShadow.length = S23, i27.pointShadowMap.length = S23, i27.spotShadow.length = D18, i27.spotShadowMap.length = D18, i27.directionalShadowMatrix.length = w31, i27.pointShadowMatrix.length = S23, i27.spotLightMatrix.length = D18 + N22 - I18, i27.spotLightMap.length = N22, i27.numSpotLightShadowsWithMaps = I18, L12.directionalLength = y34, L12.pointLength = m34, L12.spotLength = f40, L12.rectAreaLength = E25, L12.hemiLength = b35, L12.numDirectionalShadows = w31, L12.numPointShadows = S23, L12.numSpotShadows = D18, L12.numSpotMaps = N22, i27.version = qg++);
  }
  function l26(u35, h26) {
    let d34 = 0, p26 = 0, g32 = 0, y34 = 0, m34 = 0;
    const f40 = h26.matrixWorldInverse;
    for (let E25 = 0, b35 = u35.length; E25 < b35; E25++) {
      const w31 = u35[E25];
      if (w31.isDirectionalLight) {
        const S23 = i27.directional[d34];
        S23.direction.setFromMatrixPosition(w31.matrixWorld), s18.setFromMatrixPosition(w31.target.matrixWorld), S23.direction.sub(s18), S23.direction.transformDirection(f40), d34++;
      } else if (w31.isSpotLight) {
        const S23 = i27.spot[g32];
        S23.position.setFromMatrixPosition(w31.matrixWorld), S23.position.applyMatrix4(f40), S23.direction.setFromMatrixPosition(w31.matrixWorld), s18.setFromMatrixPosition(w31.target.matrixWorld), S23.direction.sub(s18), S23.direction.transformDirection(f40), g32++;
      } else if (w31.isRectAreaLight) {
        const S23 = i27.rectArea[y34];
        S23.position.setFromMatrixPosition(w31.matrixWorld), S23.position.applyMatrix4(f40), o13.identity(), r24.copy(w31.matrixWorld), r24.premultiply(f40), o13.extractRotation(r24), S23.halfWidth.set(w31.width * 0.5, 0, 0), S23.halfHeight.set(0, w31.height * 0.5, 0), S23.halfWidth.applyMatrix4(o13), S23.halfHeight.applyMatrix4(o13), y34++;
      } else if (w31.isPointLight) {
        const S23 = i27.point[p26];
        S23.position.setFromMatrixPosition(w31.matrixWorld), S23.position.applyMatrix4(f40), p26++;
      } else if (w31.isHemisphereLight) {
        const S23 = i27.hemi[m34];
        S23.direction.setFromMatrixPosition(w31.matrixWorld), S23.direction.transformDirection(f40), m34++;
      }
    }
  }
  return {
    setup: c27,
    setupView: l26,
    state: i27
  };
}
function mc(a22, e11) {
  const t19 = new Kg(a22, e11), n33 = [], i27 = [];
  function s18() {
    n33.length = 0, i27.length = 0;
  }
  function r24(h26) {
    n33.push(h26);
  }
  function o13(h26) {
    i27.push(h26);
  }
  function c27(h26) {
    t19.setup(n33, h26);
  }
  function l26(h26) {
    t19.setupView(n33, h26);
  }
  return {
    init: s18,
    state: {
      lightsArray: n33,
      shadowsArray: i27,
      lights: t19
    },
    setupLights: c27,
    setupLightsView: l26,
    pushLight: r24,
    pushShadow: o13
  };
}
function Yg(a22, e11) {
  let t19 = /* @__PURE__ */ new WeakMap();
  function n33(s18, r24 = 0) {
    const o13 = t19.get(s18);
    let c27;
    return o13 === void 0 ? (c27 = new mc(a22, e11), t19.set(s18, [c27])) : r24 >= o13.length ? (c27 = new mc(a22, e11), o13.push(c27)) : c27 = o13[r24], c27;
  }
  function i27() {
    t19 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: n33,
    dispose: i27
  };
}
var Jg = class extends mn3 {
  constructor(e11) {
    super(), this.isMeshDepthMaterial = true, this.type = "MeshDepthMaterial", this.depthPacking = qh, this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.wireframe = false, this.wireframeLinewidth = 1, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.depthPacking = e11.depthPacking, this.map = e11.map, this.alphaMap = e11.alphaMap, this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this;
  }
};
var Zg = class extends mn3 {
  constructor(e11) {
    super(), this.isMeshDistanceMaterial = true, this.type = "MeshDistanceMaterial", this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.map = e11.map, this.alphaMap = e11.alphaMap, this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this;
  }
};
var $g = `void main() {
	gl_Position = vec4( position, 1.0 );
}`;
var Qg = `uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;
function e0(a22, e11, t19) {
  let n33 = new Ra();
  const i27 = new We4(), s18 = new We4(), r24 = new gt6(), o13 = new Jg({ depthPacking: Xh }), c27 = new Zg(), l26 = {}, u35 = t19.maxTextureSize, h26 = { [Pn3]: sn3, [sn3]: Pn3, [fn3]: fn3 }, d34 = new Ri({
    defines: {
      VSM_SAMPLES: 8
    },
    uniforms: {
      shadow_pass: { value: null },
      resolution: { value: new We4() },
      radius: { value: 4 }
    },
    vertexShader: $g,
    fragmentShader: Qg
  }), p26 = d34.clone();
  p26.defines.HORIZONTAL_PASS = 1;
  const g32 = new Xt3();
  g32.setAttribute(
    "position",
    new Gt3(
      new Float32Array([-1, -1, 0.5, 3, -1, 0.5, -1, 3, 0.5]),
      3
    )
  );
  const y34 = new Pt5(g32, d34), m34 = this;
  this.enabled = false, this.autoUpdate = true, this.needsUpdate = false, this.type = Zc, this.render = function(w31, S23, D18) {
    if (m34.enabled === false || m34.autoUpdate === false && m34.needsUpdate === false || w31.length === 0)
      return;
    const N22 = a22.getRenderTarget(), I18 = a22.getActiveCubeFace(), v31 = a22.getActiveMipmapLevel(), L12 = a22.state;
    L12.setBlending(li3), L12.buffers.color.setClear(1, 1, 1, 1), L12.buffers.depth.setTest(true), L12.setScissorTest(false);
    for (let G16 = 0, B22 = w31.length; G16 < B22; G16++) {
      const k29 = w31[G16], V16 = k29.shadow;
      if (V16 === void 0) {
        console.warn("THREE.WebGLShadowMap:", k29, "has no shadow.");
        continue;
      }
      if (V16.autoUpdate === false && V16.needsUpdate === false)
        continue;
      i27.copy(V16.mapSize);
      const H16 = V16.getFrameExtents();
      if (i27.multiply(H16), s18.copy(V16.mapSize), (i27.x > u35 || i27.y > u35) && (i27.x > u35 && (s18.x = Math.floor(u35 / H16.x), i27.x = s18.x * H16.x, V16.mapSize.x = s18.x), i27.y > u35 && (s18.y = Math.floor(u35 / H16.y), i27.y = s18.y * H16.y, V16.mapSize.y = s18.y)), V16.map === null) {
        const te7 = this.type !== Ks ? { minFilter: Bt3, magFilter: Bt3 } : {};
        V16.map = new Li(i27.x, i27.y, te7), V16.map.texture.name = k29.name + ".shadowMap", V16.camera.updateProjectionMatrix();
      }
      a22.setRenderTarget(V16.map), a22.clear();
      const W11 = V16.getViewportCount();
      for (let te7 = 0; te7 < W11; te7++) {
        const J12 = V16.getViewport(te7);
        r24.set(
          s18.x * J12.x,
          s18.y * J12.y,
          s18.x * J12.z,
          s18.y * J12.w
        ), L12.viewport(r24), V16.updateMatrices(k29, te7), n33 = V16.getFrustum(), b35(S23, D18, V16.camera, k29, this.type);
      }
      V16.isPointLightShadow !== true && this.type === Ks && f40(V16, D18), V16.needsUpdate = false;
    }
    m34.needsUpdate = false, a22.setRenderTarget(N22, I18, v31);
  };
  function f40(w31, S23) {
    const D18 = e11.update(y34);
    d34.defines.VSM_SAMPLES !== w31.blurSamples && (d34.defines.VSM_SAMPLES = w31.blurSamples, p26.defines.VSM_SAMPLES = w31.blurSamples, d34.needsUpdate = true, p26.needsUpdate = true), w31.mapPass === null && (w31.mapPass = new Li(i27.x, i27.y)), d34.uniforms.shadow_pass.value = w31.map.texture, d34.uniforms.resolution.value = w31.mapSize, d34.uniforms.radius.value = w31.radius, a22.setRenderTarget(w31.mapPass), a22.clear(), a22.renderBufferDirect(S23, null, D18, d34, y34, null), p26.uniforms.shadow_pass.value = w31.mapPass.texture, p26.uniforms.resolution.value = w31.mapSize, p26.uniforms.radius.value = w31.radius, a22.setRenderTarget(w31.map), a22.clear(), a22.renderBufferDirect(S23, null, D18, p26, y34, null);
  }
  function E25(w31, S23, D18, N22) {
    let I18 = null;
    const v31 = D18.isPointLight === true ? w31.customDistanceMaterial : w31.customDepthMaterial;
    if (v31 !== void 0)
      I18 = v31;
    else if (I18 = D18.isPointLight === true ? c27 : o13, a22.localClippingEnabled && S23.clipShadows === true && Array.isArray(S23.clippingPlanes) && S23.clippingPlanes.length !== 0 || S23.displacementMap && S23.displacementScale !== 0 || S23.alphaMap && S23.alphaTest > 0 || S23.map && S23.alphaTest > 0) {
      const L12 = I18.uuid, G16 = S23.uuid;
      let B22 = l26[L12];
      B22 === void 0 && (B22 = {}, l26[L12] = B22);
      let k29 = B22[G16];
      k29 === void 0 && (k29 = I18.clone(), B22[G16] = k29), I18 = k29;
    }
    if (I18.visible = S23.visible, I18.wireframe = S23.wireframe, N22 === Ks ? I18.side = S23.shadowSide !== null ? S23.shadowSide : S23.side : I18.side = S23.shadowSide !== null ? S23.shadowSide : h26[S23.side], I18.alphaMap = S23.alphaMap, I18.alphaTest = S23.alphaTest, I18.map = S23.map, I18.clipShadows = S23.clipShadows, I18.clippingPlanes = S23.clippingPlanes, I18.clipIntersection = S23.clipIntersection, I18.displacementMap = S23.displacementMap, I18.displacementScale = S23.displacementScale, I18.displacementBias = S23.displacementBias, I18.wireframeLinewidth = S23.wireframeLinewidth, I18.linewidth = S23.linewidth, D18.isPointLight === true && I18.isMeshDistanceMaterial === true) {
      const L12 = a22.properties.get(I18);
      L12.light = D18;
    }
    return I18;
  }
  function b35(w31, S23, D18, N22, I18) {
    if (w31.visible === false)
      return;
    if (w31.layers.test(S23.layers) && (w31.isMesh || w31.isLine || w31.isPoints) && (w31.castShadow || w31.receiveShadow && I18 === Ks) && (!w31.frustumCulled || n33.intersectsObject(w31))) {
      w31.modelViewMatrix.multiplyMatrices(D18.matrixWorldInverse, w31.matrixWorld);
      const G16 = e11.update(w31), B22 = w31.material;
      if (Array.isArray(B22)) {
        const k29 = G16.groups;
        for (let V16 = 0, H16 = k29.length; V16 < H16; V16++) {
          const W11 = k29[V16], te7 = B22[W11.materialIndex];
          if (te7 && te7.visible) {
            const J12 = E25(w31, te7, N22, I18);
            a22.renderBufferDirect(D18, null, G16, J12, w31, W11);
          }
        }
      } else if (B22.visible) {
        const k29 = E25(w31, B22, N22, I18);
        a22.renderBufferDirect(D18, null, G16, k29, w31, null);
      }
    }
    const L12 = w31.children;
    for (let G16 = 0, B22 = L12.length; G16 < B22; G16++)
      b35(L12[G16], S23, D18, N22, I18);
  }
}
function t0(a22, e11, t19) {
  const n33 = t19.isWebGL2;
  function i27() {
    let F19 = false;
    const se6 = new gt6();
    let ue8 = null;
    const Se7 = new gt6(0, 0, 0, 0);
    return {
      setMask: function(De6) {
        ue8 !== De6 && !F19 && (a22.colorMask(De6, De6, De6, De6), ue8 = De6);
      },
      setLocked: function(De6) {
        F19 = De6;
      },
      setClear: function(De6, pt12, vt9, It7, Tn6) {
        Tn6 === true && (De6 *= It7, pt12 *= It7, vt9 *= It7), se6.set(De6, pt12, vt9, It7), Se7.equals(se6) === false && (a22.clearColor(De6, pt12, vt9, It7), Se7.copy(se6));
      },
      reset: function() {
        F19 = false, ue8 = null, Se7.set(-1, 0, 0, 0);
      }
    };
  }
  function s18() {
    let F19 = false, se6 = null, ue8 = null, Se7 = null;
    return {
      setTest: function(De6) {
        De6 ? z21(2929) : be7(2929);
      },
      setMask: function(De6) {
        se6 !== De6 && !F19 && (a22.depthMask(De6), se6 = De6);
      },
      setFunc: function(De6) {
        if (ue8 !== De6) {
          switch (De6) {
            case mh:
              a22.depthFunc(512);
              break;
            case gh:
              a22.depthFunc(519);
              break;
            case _h:
              a22.depthFunc(513);
              break;
            case ha:
              a22.depthFunc(515);
              break;
            case xh:
              a22.depthFunc(514);
              break;
            case yh:
              a22.depthFunc(518);
              break;
            case vh:
              a22.depthFunc(516);
              break;
            case bh:
              a22.depthFunc(517);
              break;
            default:
              a22.depthFunc(515);
          }
          ue8 = De6;
        }
      },
      setLocked: function(De6) {
        F19 = De6;
      },
      setClear: function(De6) {
        Se7 !== De6 && (a22.clearDepth(De6), Se7 = De6);
      },
      reset: function() {
        F19 = false, se6 = null, ue8 = null, Se7 = null;
      }
    };
  }
  function r24() {
    let F19 = false, se6 = null, ue8 = null, Se7 = null, De6 = null, pt12 = null, vt9 = null, It7 = null, Tn6 = null;
    return {
      setTest: function(it16) {
        F19 || (it16 ? z21(2960) : be7(2960));
      },
      setMask: function(it16) {
        se6 !== it16 && !F19 && (a22.stencilMask(it16), se6 = it16);
      },
      setFunc: function(it16, $t9, cn3) {
        (ue8 !== it16 || Se7 !== $t9 || De6 !== cn3) && (a22.stencilFunc(it16, $t9, cn3), ue8 = it16, Se7 = $t9, De6 = cn3);
      },
      setOp: function(it16, $t9, cn3) {
        (pt12 !== it16 || vt9 !== $t9 || It7 !== cn3) && (a22.stencilOp(it16, $t9, cn3), pt12 = it16, vt9 = $t9, It7 = cn3);
      },
      setLocked: function(it16) {
        F19 = it16;
      },
      setClear: function(it16) {
        Tn6 !== it16 && (a22.clearStencil(it16), Tn6 = it16);
      },
      reset: function() {
        F19 = false, se6 = null, ue8 = null, Se7 = null, De6 = null, pt12 = null, vt9 = null, It7 = null, Tn6 = null;
      }
    };
  }
  const o13 = new i27(), c27 = new s18(), l26 = new r24(), u35 = /* @__PURE__ */ new WeakMap(), h26 = /* @__PURE__ */ new WeakMap();
  let d34 = {}, p26 = {}, g32 = /* @__PURE__ */ new WeakMap(), y34 = [], m34 = null, f40 = false, E25 = null, b35 = null, w31 = null, S23 = null, D18 = null, N22 = null, I18 = null, v31 = false, L12 = null, G16 = null, B22 = null, k29 = null, V16 = null;
  const H16 = a22.getParameter(35661);
  let W11 = false, te7 = 0;
  const J12 = a22.getParameter(7938);
  J12.indexOf("WebGL") !== -1 ? (te7 = parseFloat(/^WebGL (\d)/.exec(J12)[1]), W11 = te7 >= 1) : J12.indexOf("OpenGL ES") !== -1 && (te7 = parseFloat(/^OpenGL ES (\d)/.exec(J12)[1]), W11 = te7 >= 2);
  let ie8 = null, le7 = {};
  const me9 = a22.getParameter(3088), he8 = a22.getParameter(2978), j19 = new gt6().fromArray(me9), X14 = new gt6().fromArray(he8);
  function ee7(F19, se6, ue8) {
    const Se7 = new Uint8Array(4), De6 = a22.createTexture();
    a22.bindTexture(F19, De6), a22.texParameteri(F19, 10241, 9728), a22.texParameteri(F19, 10240, 9728);
    for (let pt12 = 0; pt12 < ue8; pt12++)
      a22.texImage2D(se6 + pt12, 0, 6408, 1, 1, 0, 6408, 5121, Se7);
    return De6;
  }
  const $25 = {};
  $25[3553] = ee7(3553, 3553, 1), $25[34067] = ee7(34067, 34069, 6), o13.setClear(0, 0, 0, 1), c27.setClear(1), l26.setClear(0), z21(2929), c27.setFunc(ha), xt8(false), St9(el), z21(2884), je7(li3);
  function z21(F19) {
    d34[F19] !== true && (a22.enable(F19), d34[F19] = true);
  }
  function be7(F19) {
    d34[F19] !== false && (a22.disable(F19), d34[F19] = false);
  }
  function Ee5(F19, se6) {
    return p26[F19] !== se6 ? (a22.bindFramebuffer(F19, se6), p26[F19] = se6, n33 && (F19 === 36009 && (p26[36160] = se6), F19 === 36160 && (p26[36009] = se6)), true) : false;
  }
  function pe8(F19, se6) {
    let ue8 = y34, Se7 = false;
    if (F19)
      if (ue8 = g32.get(se6), ue8 === void 0 && (ue8 = [], g32.set(se6, ue8)), F19.isWebGLMultipleRenderTargets) {
        const De6 = F19.texture;
        if (ue8.length !== De6.length || ue8[0] !== 36064) {
          for (let pt12 = 0, vt9 = De6.length; pt12 < vt9; pt12++)
            ue8[pt12] = 36064 + pt12;
          ue8.length = De6.length, Se7 = true;
        }
      } else
        ue8[0] !== 36064 && (ue8[0] = 36064, Se7 = true);
    else
      ue8[0] !== 1029 && (ue8[0] = 1029, Se7 = true);
    Se7 && (t19.isWebGL2 ? a22.drawBuffers(ue8) : e11.get("WEBGL_draw_buffers").drawBuffersWEBGL(ue8));
  }
  function ke7(F19) {
    return m34 !== F19 ? (a22.useProgram(F19), m34 = F19, true) : false;
  }
  const nt17 = {
    [fs]: 32774,
    [sh]: 32778,
    [rh]: 32779
  };
  if (n33)
    nt17[sl] = 32775, nt17[rl] = 32776;
  else {
    const F19 = e11.get("EXT_blend_minmax");
    F19 !== null && (nt17[sl] = F19.MIN_EXT, nt17[rl] = F19.MAX_EXT);
  }
  const Ie7 = {
    [oh]: 0,
    [ah]: 1,
    [lh]: 768,
    [$c]: 770,
    [ph]: 776,
    [dh]: 774,
    [uh]: 772,
    [ch]: 769,
    [Qc]: 771,
    [fh]: 775,
    [hh]: 773
  };
  function je7(F19, se6, ue8, Se7, De6, pt12, vt9, It7) {
    if (F19 === li3) {
      f40 === true && (be7(3042), f40 = false);
      return;
    }
    if (f40 === false && (z21(3042), f40 = true), F19 !== ih) {
      if (F19 !== E25 || It7 !== v31) {
        if ((b35 !== fs || D18 !== fs) && (a22.blendEquation(32774), b35 = fs, D18 = fs), It7)
          switch (F19) {
            case gs:
              a22.blendFuncSeparate(1, 771, 1, 771);
              break;
            case tl:
              a22.blendFunc(1, 1);
              break;
            case nl:
              a22.blendFuncSeparate(0, 769, 0, 1);
              break;
            case il:
              a22.blendFuncSeparate(0, 768, 0, 770);
              break;
            default:
              console.error("THREE.WebGLState: Invalid blending: ", F19);
              break;
          }
        else
          switch (F19) {
            case gs:
              a22.blendFuncSeparate(770, 771, 1, 771);
              break;
            case tl:
              a22.blendFunc(770, 1);
              break;
            case nl:
              a22.blendFuncSeparate(0, 769, 0, 1);
              break;
            case il:
              a22.blendFunc(0, 768);
              break;
            default:
              console.error("THREE.WebGLState: Invalid blending: ", F19);
              break;
          }
        w31 = null, S23 = null, N22 = null, I18 = null, E25 = F19, v31 = It7;
      }
      return;
    }
    De6 = De6 || se6, pt12 = pt12 || ue8, vt9 = vt9 || Se7, (se6 !== b35 || De6 !== D18) && (a22.blendEquationSeparate(nt17[se6], nt17[De6]), b35 = se6, D18 = De6), (ue8 !== w31 || Se7 !== S23 || pt12 !== N22 || vt9 !== I18) && (a22.blendFuncSeparate(Ie7[ue8], Ie7[Se7], Ie7[pt12], Ie7[vt9]), w31 = ue8, S23 = Se7, N22 = pt12, I18 = vt9), E25 = F19, v31 = false;
  }
  function bt10(F19, se6) {
    F19.side === fn3 ? be7(2884) : z21(2884);
    let ue8 = F19.side === sn3;
    se6 && (ue8 = !ue8), xt8(ue8), F19.blending === gs && F19.transparent === false ? je7(li3) : je7(F19.blending, F19.blendEquation, F19.blendSrc, F19.blendDst, F19.blendEquationAlpha, F19.blendSrcAlpha, F19.blendDstAlpha, F19.premultipliedAlpha), c27.setFunc(F19.depthFunc), c27.setTest(F19.depthTest), c27.setMask(F19.depthWrite), o13.setMask(F19.colorWrite);
    const Se7 = F19.stencilWrite;
    l26.setTest(Se7), Se7 && (l26.setMask(F19.stencilWriteMask), l26.setFunc(F19.stencilFunc, F19.stencilRef, F19.stencilFuncMask), l26.setOp(F19.stencilFail, F19.stencilZFail, F19.stencilZPass)), et15(F19.polygonOffset, F19.polygonOffsetFactor, F19.polygonOffsetUnits), F19.alphaToCoverage === true ? z21(32926) : be7(32926);
  }
  function xt8(F19) {
    L12 !== F19 && (F19 ? a22.frontFace(2304) : a22.frontFace(2305), L12 = F19);
  }
  function St9(F19) {
    F19 !== eh ? (z21(2884), F19 !== G16 && (F19 === el ? a22.cullFace(1029) : F19 === th ? a22.cullFace(1028) : a22.cullFace(1032))) : be7(2884), G16 = F19;
  }
  function wt10(F19) {
    F19 !== B22 && (W11 && a22.lineWidth(F19), B22 = F19);
  }
  function et15(F19, se6, ue8) {
    F19 ? (z21(32823), (k29 !== se6 || V16 !== ue8) && (a22.polygonOffset(se6, ue8), k29 = se6, V16 = ue8)) : be7(32823);
  }
  function ct12(F19) {
    F19 ? z21(3089) : be7(3089);
  }
  function kt10(F19) {
    F19 === void 0 && (F19 = 33984 + H16 - 1), ie8 !== F19 && (a22.activeTexture(F19), ie8 = F19);
  }
  function P20(F19, se6, ue8) {
    ue8 === void 0 && (ie8 === null ? ue8 = 33984 + H16 - 1 : ue8 = ie8);
    let Se7 = le7[ue8];
    Se7 === void 0 && (Se7 = { type: void 0, texture: void 0 }, le7[ue8] = Se7), (Se7.type !== F19 || Se7.texture !== se6) && (ie8 !== ue8 && (a22.activeTexture(ue8), ie8 = ue8), a22.bindTexture(F19, se6 || $25[F19]), Se7.type = F19, Se7.texture = se6);
  }
  function C21() {
    const F19 = le7[ie8];
    F19 !== void 0 && F19.type !== void 0 && (a22.bindTexture(F19.type, null), F19.type = void 0, F19.texture = void 0);
  }
  function Q12() {
    try {
      a22.compressedTexImage2D.apply(a22, arguments);
    } catch (F19) {
      console.error("THREE.WebGLState:", F19);
    }
  }
  function de9() {
    try {
      a22.compressedTexImage3D.apply(a22, arguments);
    } catch (F19) {
      console.error("THREE.WebGLState:", F19);
    }
  }
  function fe7() {
    try {
      a22.texSubImage2D.apply(a22, arguments);
    } catch (F19) {
      console.error("THREE.WebGLState:", F19);
    }
  }
  function _e7() {
    try {
      a22.texSubImage3D.apply(a22, arguments);
    } catch (F19) {
      console.error("THREE.WebGLState:", F19);
    }
  }
  function O20() {
    try {
      a22.compressedTexSubImage2D.apply(a22, arguments);
    } catch (F19) {
      console.error("THREE.WebGLState:", F19);
    }
  }
  function ae7() {
    try {
      a22.compressedTexSubImage3D.apply(a22, arguments);
    } catch (F19) {
      console.error("THREE.WebGLState:", F19);
    }
  }
  function Z12() {
    try {
      a22.texStorage2D.apply(a22, arguments);
    } catch (F19) {
      console.error("THREE.WebGLState:", F19);
    }
  }
  function ye7() {
    try {
      a22.texStorage3D.apply(a22, arguments);
    } catch (F19) {
      console.error("THREE.WebGLState:", F19);
    }
  }
  function Te7() {
    try {
      a22.texImage2D.apply(a22, arguments);
    } catch (F19) {
      console.error("THREE.WebGLState:", F19);
    }
  }
  function Le7() {
    try {
      a22.texImage3D.apply(a22, arguments);
    } catch (F19) {
      console.error("THREE.WebGLState:", F19);
    }
  }
  function Me7(F19) {
    j19.equals(F19) === false && (a22.scissor(F19.x, F19.y, F19.z, F19.w), j19.copy(F19));
  }
  function Ce7(F19) {
    X14.equals(F19) === false && (a22.viewport(F19.x, F19.y, F19.z, F19.w), X14.copy(F19));
  }
  function Ge7(F19, se6) {
    let ue8 = h26.get(se6);
    ue8 === void 0 && (ue8 = /* @__PURE__ */ new WeakMap(), h26.set(se6, ue8));
    let Se7 = ue8.get(F19);
    Se7 === void 0 && (Se7 = a22.getUniformBlockIndex(se6, F19.name), ue8.set(F19, Se7));
  }
  function Xe7(F19, se6) {
    const Se7 = h26.get(se6).get(F19);
    u35.get(se6) !== Se7 && (a22.uniformBlockBinding(se6, Se7, F19.__bindingPointIndex), u35.set(se6, Se7));
  }
  function Mt10() {
    a22.disable(3042), a22.disable(2884), a22.disable(2929), a22.disable(32823), a22.disable(3089), a22.disable(2960), a22.disable(32926), a22.blendEquation(32774), a22.blendFunc(1, 0), a22.blendFuncSeparate(1, 0, 1, 0), a22.colorMask(true, true, true, true), a22.clearColor(0, 0, 0, 0), a22.depthMask(true), a22.depthFunc(513), a22.clearDepth(1), a22.stencilMask(4294967295), a22.stencilFunc(519, 0, 4294967295), a22.stencilOp(7680, 7680, 7680), a22.clearStencil(0), a22.cullFace(1029), a22.frontFace(2305), a22.polygonOffset(0, 0), a22.activeTexture(33984), a22.bindFramebuffer(36160, null), n33 === true && (a22.bindFramebuffer(36009, null), a22.bindFramebuffer(36008, null)), a22.useProgram(null), a22.lineWidth(1), a22.scissor(0, 0, a22.canvas.width, a22.canvas.height), a22.viewport(0, 0, a22.canvas.width, a22.canvas.height), d34 = {}, ie8 = null, le7 = {}, p26 = {}, g32 = /* @__PURE__ */ new WeakMap(), y34 = [], m34 = null, f40 = false, E25 = null, b35 = null, w31 = null, S23 = null, D18 = null, N22 = null, I18 = null, v31 = false, L12 = null, G16 = null, B22 = null, k29 = null, V16 = null, j19.set(0, 0, a22.canvas.width, a22.canvas.height), X14.set(0, 0, a22.canvas.width, a22.canvas.height), o13.reset(), c27.reset(), l26.reset();
  }
  return {
    buffers: {
      color: o13,
      depth: c27,
      stencil: l26
    },
    enable: z21,
    disable: be7,
    bindFramebuffer: Ee5,
    drawBuffers: pe8,
    useProgram: ke7,
    setBlending: je7,
    setMaterial: bt10,
    setFlipSided: xt8,
    setCullFace: St9,
    setLineWidth: wt10,
    setPolygonOffset: et15,
    setScissorTest: ct12,
    activeTexture: kt10,
    bindTexture: P20,
    unbindTexture: C21,
    compressedTexImage2D: Q12,
    compressedTexImage3D: de9,
    texImage2D: Te7,
    texImage3D: Le7,
    updateUBOMapping: Ge7,
    uniformBlockBinding: Xe7,
    texStorage2D: Z12,
    texStorage3D: ye7,
    texSubImage2D: fe7,
    texSubImage3D: _e7,
    compressedTexSubImage2D: O20,
    compressedTexSubImage3D: ae7,
    scissor: Me7,
    viewport: Ce7,
    reset: Mt10
  };
}
function n0(a22, e11, t19, n33, i27, s18, r24) {
  const o13 = i27.isWebGL2, c27 = i27.maxTextures, l26 = i27.maxCubemapSize, u35 = i27.maxTextureSize, h26 = i27.maxSamples, d34 = e11.has("WEBGL_multisampled_render_to_texture") ? e11.get("WEBGL_multisampled_render_to_texture") : null, p26 = typeof navigator > "u" ? false : /OculusBrowser/g.test(navigator.userAgent), g32 = /* @__PURE__ */ new WeakMap();
  let y34;
  const m34 = /* @__PURE__ */ new WeakMap();
  let f40 = false;
  try {
    f40 = typeof OffscreenCanvas < "u" && new OffscreenCanvas(1, 1).getContext("2d") !== null;
  } catch {
  }
  function E25(P20, C21) {
    return f40 ? (
      // eslint-disable-next-line compat/compat
      new OffscreenCanvas(P20, C21)
    ) : nr3("canvas");
  }
  function b35(P20, C21, Q12, de9) {
    let fe7 = 1;
    if ((P20.width > de9 || P20.height > de9) && (fe7 = de9 / Math.max(P20.width, P20.height)), fe7 < 1 || C21 === true)
      if (typeof HTMLImageElement < "u" && P20 instanceof HTMLImageElement || typeof HTMLCanvasElement < "u" && P20 instanceof HTMLCanvasElement || typeof ImageBitmap < "u" && P20 instanceof ImageBitmap) {
        const _e7 = C21 ? ou : Math.floor, O20 = _e7(fe7 * P20.width), ae7 = _e7(fe7 * P20.height);
        y34 === void 0 && (y34 = E25(O20, ae7));
        const Z12 = Q12 ? E25(O20, ae7) : y34;
        return Z12.width = O20, Z12.height = ae7, Z12.getContext("2d").drawImage(P20, 0, 0, O20, ae7), console.warn("THREE.WebGLRenderer: Texture has been resized from (" + P20.width + "x" + P20.height + ") to (" + O20 + "x" + ae7 + ")."), Z12;
      } else
        return "data" in P20 && console.warn("THREE.WebGLRenderer: Image in DataTexture is too big (" + P20.width + "x" + P20.height + ")."), P20;
    return P20;
  }
  function w31(P20) {
    return xa(P20.width) && xa(P20.height);
  }
  function S23(P20) {
    return o13 ? false : P20.wrapS !== Zt3 || P20.wrapT !== Zt3 || P20.minFilter !== Bt3 && P20.minFilter !== Ht4;
  }
  function D18(P20, C21) {
    return P20.generateMipmaps && C21 && P20.minFilter !== Bt3 && P20.minFilter !== Ht4;
  }
  function N22(P20) {
    a22.generateMipmap(P20);
  }
  function I18(P20, C21, Q12, de9, fe7 = false) {
    if (o13 === false)
      return C21;
    if (P20 !== null) {
      if (a22[P20] !== void 0)
        return a22[P20];
      console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '" + P20 + "'");
    }
    let _e7 = C21;
    return C21 === 6403 && (Q12 === 5126 && (_e7 = 33326), Q12 === 5131 && (_e7 = 33325), Q12 === 5121 && (_e7 = 33321)), C21 === 33319 && (Q12 === 5126 && (_e7 = 33328), Q12 === 5131 && (_e7 = 33327), Q12 === 5121 && (_e7 = 33323)), C21 === 6408 && (Q12 === 5126 && (_e7 = 34836), Q12 === 5131 && (_e7 = 34842), Q12 === 5121 && (_e7 = de9 === st8 && fe7 === false ? 35907 : 32856), Q12 === 32819 && (_e7 = 32854), Q12 === 32820 && (_e7 = 32855)), (_e7 === 33325 || _e7 === 33326 || _e7 === 33327 || _e7 === 33328 || _e7 === 34842 || _e7 === 34836) && e11.get("EXT_color_buffer_float"), _e7;
  }
  function v31(P20, C21, Q12) {
    return D18(P20, Q12) === true || P20.isFramebufferTexture && P20.minFilter !== Bt3 && P20.minFilter !== Ht4 ? Math.log2(Math.max(C21.width, C21.height)) + 1 : P20.mipmaps !== void 0 && P20.mipmaps.length > 0 ? P20.mipmaps.length : P20.isCompressedTexture && Array.isArray(P20.image) ? C21.mipmaps.length : 1;
  }
  function L12(P20) {
    return P20 === Bt3 || P20 === pa || P20 === Qr3 ? 9728 : 9729;
  }
  function G16(P20) {
    const C21 = P20.target;
    C21.removeEventListener("dispose", G16), k29(C21), C21.isVideoTexture && g32.delete(C21);
  }
  function B22(P20) {
    const C21 = P20.target;
    C21.removeEventListener("dispose", B22), H16(C21);
  }
  function k29(P20) {
    const C21 = n33.get(P20);
    if (C21.__webglInit === void 0)
      return;
    const Q12 = P20.source, de9 = m34.get(Q12);
    if (de9) {
      const fe7 = de9[C21.__cacheKey];
      fe7.usedTimes--, fe7.usedTimes === 0 && V16(P20), Object.keys(de9).length === 0 && m34.delete(Q12);
    }
    n33.remove(P20);
  }
  function V16(P20) {
    const C21 = n33.get(P20);
    a22.deleteTexture(C21.__webglTexture);
    const Q12 = P20.source, de9 = m34.get(Q12);
    delete de9[C21.__cacheKey], r24.memory.textures--;
  }
  function H16(P20) {
    const C21 = P20.texture, Q12 = n33.get(P20), de9 = n33.get(C21);
    if (de9.__webglTexture !== void 0 && (a22.deleteTexture(de9.__webglTexture), r24.memory.textures--), P20.depthTexture && P20.depthTexture.dispose(), P20.isWebGLCubeRenderTarget)
      for (let fe7 = 0; fe7 < 6; fe7++)
        a22.deleteFramebuffer(Q12.__webglFramebuffer[fe7]), Q12.__webglDepthbuffer && a22.deleteRenderbuffer(Q12.__webglDepthbuffer[fe7]);
    else {
      if (a22.deleteFramebuffer(Q12.__webglFramebuffer), Q12.__webglDepthbuffer && a22.deleteRenderbuffer(Q12.__webglDepthbuffer), Q12.__webglMultisampledFramebuffer && a22.deleteFramebuffer(Q12.__webglMultisampledFramebuffer), Q12.__webglColorRenderbuffer)
        for (let fe7 = 0; fe7 < Q12.__webglColorRenderbuffer.length; fe7++)
          Q12.__webglColorRenderbuffer[fe7] && a22.deleteRenderbuffer(Q12.__webglColorRenderbuffer[fe7]);
      Q12.__webglDepthRenderbuffer && a22.deleteRenderbuffer(Q12.__webglDepthRenderbuffer);
    }
    if (P20.isWebGLMultipleRenderTargets)
      for (let fe7 = 0, _e7 = C21.length; fe7 < _e7; fe7++) {
        const O20 = n33.get(C21[fe7]);
        O20.__webglTexture && (a22.deleteTexture(O20.__webglTexture), r24.memory.textures--), n33.remove(C21[fe7]);
      }
    n33.remove(C21), n33.remove(P20);
  }
  let W11 = 0;
  function te7() {
    W11 = 0;
  }
  function J12() {
    const P20 = W11;
    return P20 >= c27 && console.warn("THREE.WebGLTextures: Trying to use " + P20 + " texture units while this GPU supports only " + c27), W11 += 1, P20;
  }
  function ie8(P20) {
    const C21 = [];
    return C21.push(P20.wrapS), C21.push(P20.wrapT), C21.push(P20.wrapR || 0), C21.push(P20.magFilter), C21.push(P20.minFilter), C21.push(P20.anisotropy), C21.push(P20.internalFormat), C21.push(P20.format), C21.push(P20.type), C21.push(P20.generateMipmaps), C21.push(P20.premultiplyAlpha), C21.push(P20.flipY), C21.push(P20.unpackAlignment), C21.push(P20.encoding), C21.join();
  }
  function le7(P20, C21) {
    const Q12 = n33.get(P20);
    if (P20.isVideoTexture && ct12(P20), P20.isRenderTargetTexture === false && P20.version > 0 && Q12.__version !== P20.version) {
      const de9 = P20.image;
      if (de9 === null)
        console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");
      else if (de9.complete === false)
        console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");
      else {
        be7(Q12, P20, C21);
        return;
      }
    }
    t19.bindTexture(3553, Q12.__webglTexture, 33984 + C21);
  }
  function me9(P20, C21) {
    const Q12 = n33.get(P20);
    if (P20.version > 0 && Q12.__version !== P20.version) {
      be7(Q12, P20, C21);
      return;
    }
    t19.bindTexture(35866, Q12.__webglTexture, 33984 + C21);
  }
  function he8(P20, C21) {
    const Q12 = n33.get(P20);
    if (P20.version > 0 && Q12.__version !== P20.version) {
      be7(Q12, P20, C21);
      return;
    }
    t19.bindTexture(32879, Q12.__webglTexture, 33984 + C21);
  }
  function j19(P20, C21) {
    const Q12 = n33.get(P20);
    if (P20.version > 0 && Q12.__version !== P20.version) {
      Ee5(Q12, P20, C21);
      return;
    }
    t19.bindTexture(34067, Q12.__webglTexture, 33984 + C21);
  }
  const X14 = {
    [Rn3]: 10497,
    [Zt3]: 33071,
    [to]: 33648
  }, ee7 = {
    [Bt3]: 9728,
    [pa]: 9984,
    [Qr3]: 9986,
    [Ht4]: 9729,
    [tu]: 9985,
    [jn3]: 9987
  };
  function $25(P20, C21, Q12) {
    if (Q12 ? (a22.texParameteri(P20, 10242, X14[C21.wrapS]), a22.texParameteri(P20, 10243, X14[C21.wrapT]), (P20 === 32879 || P20 === 35866) && a22.texParameteri(P20, 32882, X14[C21.wrapR]), a22.texParameteri(P20, 10240, ee7[C21.magFilter]), a22.texParameteri(P20, 10241, ee7[C21.minFilter])) : (a22.texParameteri(P20, 10242, 33071), a22.texParameteri(P20, 10243, 33071), (P20 === 32879 || P20 === 35866) && a22.texParameteri(P20, 32882, 33071), (C21.wrapS !== Zt3 || C21.wrapT !== Zt3) && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."), a22.texParameteri(P20, 10240, L12(C21.magFilter)), a22.texParameteri(P20, 10241, L12(C21.minFilter)), C21.minFilter !== Bt3 && C21.minFilter !== Ht4 && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")), e11.has("EXT_texture_filter_anisotropic") === true) {
      const de9 = e11.get("EXT_texture_filter_anisotropic");
      if (C21.magFilter === Bt3 || C21.minFilter !== Qr3 && C21.minFilter !== jn3 || C21.type === ai3 && e11.has("OES_texture_float_linear") === false || o13 === false && C21.type === Qs && e11.has("OES_texture_half_float_linear") === false)
        return;
      (C21.anisotropy > 1 || n33.get(C21).__currentAnisotropy) && (a22.texParameterf(P20, de9.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(C21.anisotropy, i27.getMaxAnisotropy())), n33.get(C21).__currentAnisotropy = C21.anisotropy);
    }
  }
  function z21(P20, C21) {
    let Q12 = false;
    P20.__webglInit === void 0 && (P20.__webglInit = true, C21.addEventListener("dispose", G16));
    const de9 = C21.source;
    let fe7 = m34.get(de9);
    fe7 === void 0 && (fe7 = {}, m34.set(de9, fe7));
    const _e7 = ie8(C21);
    if (_e7 !== P20.__cacheKey) {
      fe7[_e7] === void 0 && (fe7[_e7] = {
        texture: a22.createTexture(),
        usedTimes: 0
      }, r24.memory.textures++, Q12 = true), fe7[_e7].usedTimes++;
      const O20 = fe7[P20.__cacheKey];
      O20 !== void 0 && (fe7[P20.__cacheKey].usedTimes--, O20.usedTimes === 0 && V16(C21)), P20.__cacheKey = _e7, P20.__webglTexture = fe7[_e7].texture;
    }
    return Q12;
  }
  function be7(P20, C21, Q12) {
    let de9 = 3553;
    (C21.isDataArrayTexture || C21.isCompressedArrayTexture) && (de9 = 35866), C21.isData3DTexture && (de9 = 32879);
    const fe7 = z21(P20, C21), _e7 = C21.source;
    t19.bindTexture(de9, P20.__webglTexture, 33984 + Q12);
    const O20 = n33.get(_e7);
    if (_e7.version !== O20.__version || fe7 === true) {
      t19.activeTexture(33984 + Q12), a22.pixelStorei(37440, C21.flipY), a22.pixelStorei(37441, C21.premultiplyAlpha), a22.pixelStorei(3317, C21.unpackAlignment), a22.pixelStorei(37443, 0);
      const ae7 = S23(C21) && w31(C21.image) === false;
      let Z12 = b35(C21.image, ae7, false, u35);
      Z12 = kt10(C21, Z12);
      const ye7 = w31(Z12) || o13, Te7 = s18.convert(C21.format, C21.encoding);
      let Le7 = s18.convert(C21.type), Me7 = I18(C21.internalFormat, Te7, Le7, C21.encoding, C21.isVideoTexture);
      $25(de9, C21, ye7);
      let Ce7;
      const Ge7 = C21.mipmaps, Xe7 = o13 && C21.isVideoTexture !== true, Mt10 = O20.__version === void 0 || fe7 === true, F19 = v31(C21, Z12, ye7);
      if (C21.isDepthTexture)
        Me7 = 6402, o13 ? C21.type === ai3 ? Me7 = 36012 : C21.type === vi3 ? Me7 = 33190 : C21.type === _s ? Me7 = 35056 : Me7 = 33189 : C21.type === ai3 && console.error("WebGLRenderer: Floating point depth texture requires WebGL2."), C21.format === Ti && Me7 === 6402 && C21.type !== nu && C21.type !== vi3 && (console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."), C21.type = vi3, Le7 = s18.convert(C21.type)), C21.format === Ts && Me7 === 6402 && (Me7 = 34041, C21.type !== _s && (console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."), C21.type = _s, Le7 = s18.convert(C21.type))), Mt10 && (Xe7 ? t19.texStorage2D(3553, 1, Me7, Z12.width, Z12.height) : t19.texImage2D(3553, 0, Me7, Z12.width, Z12.height, 0, Te7, Le7, null));
      else if (C21.isDataTexture)
        if (Ge7.length > 0 && ye7) {
          Xe7 && Mt10 && t19.texStorage2D(3553, F19, Me7, Ge7[0].width, Ge7[0].height);
          for (let se6 = 0, ue8 = Ge7.length; se6 < ue8; se6++)
            Ce7 = Ge7[se6], Xe7 ? t19.texSubImage2D(3553, se6, 0, 0, Ce7.width, Ce7.height, Te7, Le7, Ce7.data) : t19.texImage2D(3553, se6, Me7, Ce7.width, Ce7.height, 0, Te7, Le7, Ce7.data);
          C21.generateMipmaps = false;
        } else
          Xe7 ? (Mt10 && t19.texStorage2D(3553, F19, Me7, Z12.width, Z12.height), t19.texSubImage2D(3553, 0, 0, 0, Z12.width, Z12.height, Te7, Le7, Z12.data)) : t19.texImage2D(3553, 0, Me7, Z12.width, Z12.height, 0, Te7, Le7, Z12.data);
      else if (C21.isCompressedTexture)
        if (C21.isCompressedArrayTexture) {
          Xe7 && Mt10 && t19.texStorage3D(35866, F19, Me7, Ge7[0].width, Ge7[0].height, Z12.depth);
          for (let se6 = 0, ue8 = Ge7.length; se6 < ue8; se6++)
            Ce7 = Ge7[se6], C21.format !== pn3 ? Te7 !== null ? Xe7 ? t19.compressedTexSubImage3D(35866, se6, 0, 0, 0, Ce7.width, Ce7.height, Z12.depth, Te7, Ce7.data, 0, 0) : t19.compressedTexImage3D(35866, se6, Me7, Ce7.width, Ce7.height, Z12.depth, 0, Ce7.data, 0, 0) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : Xe7 ? t19.texSubImage3D(35866, se6, 0, 0, 0, Ce7.width, Ce7.height, Z12.depth, Te7, Le7, Ce7.data) : t19.texImage3D(35866, se6, Me7, Ce7.width, Ce7.height, Z12.depth, 0, Te7, Le7, Ce7.data);
        } else {
          Xe7 && Mt10 && t19.texStorage2D(3553, F19, Me7, Ge7[0].width, Ge7[0].height);
          for (let se6 = 0, ue8 = Ge7.length; se6 < ue8; se6++)
            Ce7 = Ge7[se6], C21.format !== pn3 ? Te7 !== null ? Xe7 ? t19.compressedTexSubImage2D(3553, se6, 0, 0, Ce7.width, Ce7.height, Te7, Ce7.data) : t19.compressedTexImage2D(3553, se6, Me7, Ce7.width, Ce7.height, 0, Ce7.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : Xe7 ? t19.texSubImage2D(3553, se6, 0, 0, Ce7.width, Ce7.height, Te7, Le7, Ce7.data) : t19.texImage2D(3553, se6, Me7, Ce7.width, Ce7.height, 0, Te7, Le7, Ce7.data);
        }
      else if (C21.isDataArrayTexture)
        Xe7 ? (Mt10 && t19.texStorage3D(35866, F19, Me7, Z12.width, Z12.height, Z12.depth), t19.texSubImage3D(35866, 0, 0, 0, 0, Z12.width, Z12.height, Z12.depth, Te7, Le7, Z12.data)) : t19.texImage3D(35866, 0, Me7, Z12.width, Z12.height, Z12.depth, 0, Te7, Le7, Z12.data);
      else if (C21.isData3DTexture)
        Xe7 ? (Mt10 && t19.texStorage3D(32879, F19, Me7, Z12.width, Z12.height, Z12.depth), t19.texSubImage3D(32879, 0, 0, 0, 0, Z12.width, Z12.height, Z12.depth, Te7, Le7, Z12.data)) : t19.texImage3D(32879, 0, Me7, Z12.width, Z12.height, Z12.depth, 0, Te7, Le7, Z12.data);
      else if (C21.isFramebufferTexture) {
        if (Mt10)
          if (Xe7)
            t19.texStorage2D(3553, F19, Me7, Z12.width, Z12.height);
          else {
            let se6 = Z12.width, ue8 = Z12.height;
            for (let Se7 = 0; Se7 < F19; Se7++)
              t19.texImage2D(3553, Se7, Me7, se6, ue8, 0, Te7, Le7, null), se6 >>= 1, ue8 >>= 1;
          }
      } else if (Ge7.length > 0 && ye7) {
        Xe7 && Mt10 && t19.texStorage2D(3553, F19, Me7, Ge7[0].width, Ge7[0].height);
        for (let se6 = 0, ue8 = Ge7.length; se6 < ue8; se6++)
          Ce7 = Ge7[se6], Xe7 ? t19.texSubImage2D(3553, se6, 0, 0, Te7, Le7, Ce7) : t19.texImage2D(3553, se6, Me7, Te7, Le7, Ce7);
        C21.generateMipmaps = false;
      } else
        Xe7 ? (Mt10 && t19.texStorage2D(3553, F19, Me7, Z12.width, Z12.height), t19.texSubImage2D(3553, 0, 0, 0, Te7, Le7, Z12)) : t19.texImage2D(3553, 0, Me7, Te7, Le7, Z12);
      D18(C21, ye7) && N22(de9), O20.__version = _e7.version, C21.onUpdate && C21.onUpdate(C21);
    }
    P20.__version = C21.version;
  }
  function Ee5(P20, C21, Q12) {
    if (C21.image.length !== 6)
      return;
    const de9 = z21(P20, C21), fe7 = C21.source;
    t19.bindTexture(34067, P20.__webglTexture, 33984 + Q12);
    const _e7 = n33.get(fe7);
    if (fe7.version !== _e7.__version || de9 === true) {
      t19.activeTexture(33984 + Q12), a22.pixelStorei(37440, C21.flipY), a22.pixelStorei(37441, C21.premultiplyAlpha), a22.pixelStorei(3317, C21.unpackAlignment), a22.pixelStorei(37443, 0);
      const O20 = C21.isCompressedTexture || C21.image[0].isCompressedTexture, ae7 = C21.image[0] && C21.image[0].isDataTexture, Z12 = [];
      for (let se6 = 0; se6 < 6; se6++)
        !O20 && !ae7 ? Z12[se6] = b35(C21.image[se6], false, true, l26) : Z12[se6] = ae7 ? C21.image[se6].image : C21.image[se6], Z12[se6] = kt10(C21, Z12[se6]);
      const ye7 = Z12[0], Te7 = w31(ye7) || o13, Le7 = s18.convert(C21.format, C21.encoding), Me7 = s18.convert(C21.type), Ce7 = I18(C21.internalFormat, Le7, Me7, C21.encoding), Ge7 = o13 && C21.isVideoTexture !== true, Xe7 = _e7.__version === void 0 || de9 === true;
      let Mt10 = v31(C21, ye7, Te7);
      $25(34067, C21, Te7);
      let F19;
      if (O20) {
        Ge7 && Xe7 && t19.texStorage2D(34067, Mt10, Ce7, ye7.width, ye7.height);
        for (let se6 = 0; se6 < 6; se6++) {
          F19 = Z12[se6].mipmaps;
          for (let ue8 = 0; ue8 < F19.length; ue8++) {
            const Se7 = F19[ue8];
            C21.format !== pn3 ? Le7 !== null ? Ge7 ? t19.compressedTexSubImage2D(34069 + se6, ue8, 0, 0, Se7.width, Se7.height, Le7, Se7.data) : t19.compressedTexImage2D(34069 + se6, ue8, Ce7, Se7.width, Se7.height, 0, Se7.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()") : Ge7 ? t19.texSubImage2D(34069 + se6, ue8, 0, 0, Se7.width, Se7.height, Le7, Me7, Se7.data) : t19.texImage2D(34069 + se6, ue8, Ce7, Se7.width, Se7.height, 0, Le7, Me7, Se7.data);
          }
        }
      } else {
        F19 = C21.mipmaps, Ge7 && Xe7 && (F19.length > 0 && Mt10++, t19.texStorage2D(34067, Mt10, Ce7, Z12[0].width, Z12[0].height));
        for (let se6 = 0; se6 < 6; se6++)
          if (ae7) {
            Ge7 ? t19.texSubImage2D(34069 + se6, 0, 0, 0, Z12[se6].width, Z12[se6].height, Le7, Me7, Z12[se6].data) : t19.texImage2D(34069 + se6, 0, Ce7, Z12[se6].width, Z12[se6].height, 0, Le7, Me7, Z12[se6].data);
            for (let ue8 = 0; ue8 < F19.length; ue8++) {
              const De6 = F19[ue8].image[se6].image;
              Ge7 ? t19.texSubImage2D(34069 + se6, ue8 + 1, 0, 0, De6.width, De6.height, Le7, Me7, De6.data) : t19.texImage2D(34069 + se6, ue8 + 1, Ce7, De6.width, De6.height, 0, Le7, Me7, De6.data);
            }
          } else {
            Ge7 ? t19.texSubImage2D(34069 + se6, 0, 0, 0, Le7, Me7, Z12[se6]) : t19.texImage2D(34069 + se6, 0, Ce7, Le7, Me7, Z12[se6]);
            for (let ue8 = 0; ue8 < F19.length; ue8++) {
              const Se7 = F19[ue8];
              Ge7 ? t19.texSubImage2D(34069 + se6, ue8 + 1, 0, 0, Le7, Me7, Se7.image[se6]) : t19.texImage2D(34069 + se6, ue8 + 1, Ce7, Le7, Me7, Se7.image[se6]);
            }
          }
      }
      D18(C21, Te7) && N22(34067), _e7.__version = fe7.version, C21.onUpdate && C21.onUpdate(C21);
    }
    P20.__version = C21.version;
  }
  function pe8(P20, C21, Q12, de9, fe7) {
    const _e7 = s18.convert(Q12.format, Q12.encoding), O20 = s18.convert(Q12.type), ae7 = I18(Q12.internalFormat, _e7, O20, Q12.encoding);
    n33.get(C21).__hasExternalTextures || (fe7 === 32879 || fe7 === 35866 ? t19.texImage3D(fe7, 0, ae7, C21.width, C21.height, C21.depth, 0, _e7, O20, null) : t19.texImage2D(fe7, 0, ae7, C21.width, C21.height, 0, _e7, O20, null)), t19.bindFramebuffer(36160, P20), et15(C21) ? d34.framebufferTexture2DMultisampleEXT(36160, de9, fe7, n33.get(Q12).__webglTexture, 0, wt10(C21)) : (fe7 === 3553 || fe7 >= 34069 && fe7 <= 34074) && a22.framebufferTexture2D(36160, de9, fe7, n33.get(Q12).__webglTexture, 0), t19.bindFramebuffer(36160, null);
  }
  function ke7(P20, C21, Q12) {
    if (a22.bindRenderbuffer(36161, P20), C21.depthBuffer && !C21.stencilBuffer) {
      let de9 = 33189;
      if (Q12 || et15(C21)) {
        const fe7 = C21.depthTexture;
        fe7 && fe7.isDepthTexture && (fe7.type === ai3 ? de9 = 36012 : fe7.type === vi3 && (de9 = 33190));
        const _e7 = wt10(C21);
        et15(C21) ? d34.renderbufferStorageMultisampleEXT(36161, _e7, de9, C21.width, C21.height) : a22.renderbufferStorageMultisample(36161, _e7, de9, C21.width, C21.height);
      } else
        a22.renderbufferStorage(36161, de9, C21.width, C21.height);
      a22.framebufferRenderbuffer(36160, 36096, 36161, P20);
    } else if (C21.depthBuffer && C21.stencilBuffer) {
      const de9 = wt10(C21);
      Q12 && et15(C21) === false ? a22.renderbufferStorageMultisample(36161, de9, 35056, C21.width, C21.height) : et15(C21) ? d34.renderbufferStorageMultisampleEXT(36161, de9, 35056, C21.width, C21.height) : a22.renderbufferStorage(36161, 34041, C21.width, C21.height), a22.framebufferRenderbuffer(36160, 33306, 36161, P20);
    } else {
      const de9 = C21.isWebGLMultipleRenderTargets === true ? C21.texture : [C21.texture];
      for (let fe7 = 0; fe7 < de9.length; fe7++) {
        const _e7 = de9[fe7], O20 = s18.convert(_e7.format, _e7.encoding), ae7 = s18.convert(_e7.type), Z12 = I18(_e7.internalFormat, O20, ae7, _e7.encoding), ye7 = wt10(C21);
        Q12 && et15(C21) === false ? a22.renderbufferStorageMultisample(36161, ye7, Z12, C21.width, C21.height) : et15(C21) ? d34.renderbufferStorageMultisampleEXT(36161, ye7, Z12, C21.width, C21.height) : a22.renderbufferStorage(36161, Z12, C21.width, C21.height);
      }
    }
    a22.bindRenderbuffer(36161, null);
  }
  function nt17(P20, C21) {
    if (C21 && C21.isWebGLCubeRenderTarget)
      throw new Error("Depth Texture with cube render targets is not supported");
    if (t19.bindFramebuffer(36160, P20), !(C21.depthTexture && C21.depthTexture.isDepthTexture))
      throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");
    (!n33.get(C21.depthTexture).__webglTexture || C21.depthTexture.image.width !== C21.width || C21.depthTexture.image.height !== C21.height) && (C21.depthTexture.image.width = C21.width, C21.depthTexture.image.height = C21.height, C21.depthTexture.needsUpdate = true), le7(C21.depthTexture, 0);
    const de9 = n33.get(C21.depthTexture).__webglTexture, fe7 = wt10(C21);
    if (C21.depthTexture.format === Ti)
      et15(C21) ? d34.framebufferTexture2DMultisampleEXT(36160, 36096, 3553, de9, 0, fe7) : a22.framebufferTexture2D(36160, 36096, 3553, de9, 0);
    else if (C21.depthTexture.format === Ts)
      et15(C21) ? d34.framebufferTexture2DMultisampleEXT(36160, 33306, 3553, de9, 0, fe7) : a22.framebufferTexture2D(36160, 33306, 3553, de9, 0);
    else
      throw new Error("Unknown depthTexture format");
  }
  function Ie7(P20) {
    const C21 = n33.get(P20), Q12 = P20.isWebGLCubeRenderTarget === true;
    if (P20.depthTexture && !C21.__autoAllocateDepthBuffer) {
      if (Q12)
        throw new Error("target.depthTexture not supported in Cube render targets");
      nt17(C21.__webglFramebuffer, P20);
    } else if (Q12) {
      C21.__webglDepthbuffer = [];
      for (let de9 = 0; de9 < 6; de9++)
        t19.bindFramebuffer(36160, C21.__webglFramebuffer[de9]), C21.__webglDepthbuffer[de9] = a22.createRenderbuffer(), ke7(C21.__webglDepthbuffer[de9], P20, false);
    } else
      t19.bindFramebuffer(36160, C21.__webglFramebuffer), C21.__webglDepthbuffer = a22.createRenderbuffer(), ke7(C21.__webglDepthbuffer, P20, false);
    t19.bindFramebuffer(36160, null);
  }
  function je7(P20, C21, Q12) {
    const de9 = n33.get(P20);
    C21 !== void 0 && pe8(de9.__webglFramebuffer, P20, P20.texture, 36064, 3553), Q12 !== void 0 && Ie7(P20);
  }
  function bt10(P20) {
    const C21 = P20.texture, Q12 = n33.get(P20), de9 = n33.get(C21);
    P20.addEventListener("dispose", B22), P20.isWebGLMultipleRenderTargets !== true && (de9.__webglTexture === void 0 && (de9.__webglTexture = a22.createTexture()), de9.__version = C21.version, r24.memory.textures++);
    const fe7 = P20.isWebGLCubeRenderTarget === true, _e7 = P20.isWebGLMultipleRenderTargets === true, O20 = w31(P20) || o13;
    if (fe7) {
      Q12.__webglFramebuffer = [];
      for (let ae7 = 0; ae7 < 6; ae7++)
        Q12.__webglFramebuffer[ae7] = a22.createFramebuffer();
    } else {
      if (Q12.__webglFramebuffer = a22.createFramebuffer(), _e7)
        if (i27.drawBuffers) {
          const ae7 = P20.texture;
          for (let Z12 = 0, ye7 = ae7.length; Z12 < ye7; Z12++) {
            const Te7 = n33.get(ae7[Z12]);
            Te7.__webglTexture === void 0 && (Te7.__webglTexture = a22.createTexture(), r24.memory.textures++);
          }
        } else
          console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");
      if (o13 && P20.samples > 0 && et15(P20) === false) {
        const ae7 = _e7 ? C21 : [C21];
        Q12.__webglMultisampledFramebuffer = a22.createFramebuffer(), Q12.__webglColorRenderbuffer = [], t19.bindFramebuffer(36160, Q12.__webglMultisampledFramebuffer);
        for (let Z12 = 0; Z12 < ae7.length; Z12++) {
          const ye7 = ae7[Z12];
          Q12.__webglColorRenderbuffer[Z12] = a22.createRenderbuffer(), a22.bindRenderbuffer(36161, Q12.__webglColorRenderbuffer[Z12]);
          const Te7 = s18.convert(ye7.format, ye7.encoding), Le7 = s18.convert(ye7.type), Me7 = I18(ye7.internalFormat, Te7, Le7, ye7.encoding, P20.isXRRenderTarget === true), Ce7 = wt10(P20);
          a22.renderbufferStorageMultisample(36161, Ce7, Me7, P20.width, P20.height), a22.framebufferRenderbuffer(36160, 36064 + Z12, 36161, Q12.__webglColorRenderbuffer[Z12]);
        }
        a22.bindRenderbuffer(36161, null), P20.depthBuffer && (Q12.__webglDepthRenderbuffer = a22.createRenderbuffer(), ke7(Q12.__webglDepthRenderbuffer, P20, true)), t19.bindFramebuffer(36160, null);
      }
    }
    if (fe7) {
      t19.bindTexture(34067, de9.__webglTexture), $25(34067, C21, O20);
      for (let ae7 = 0; ae7 < 6; ae7++)
        pe8(Q12.__webglFramebuffer[ae7], P20, C21, 36064, 34069 + ae7);
      D18(C21, O20) && N22(34067), t19.unbindTexture();
    } else if (_e7) {
      const ae7 = P20.texture;
      for (let Z12 = 0, ye7 = ae7.length; Z12 < ye7; Z12++) {
        const Te7 = ae7[Z12], Le7 = n33.get(Te7);
        t19.bindTexture(3553, Le7.__webglTexture), $25(3553, Te7, O20), pe8(Q12.__webglFramebuffer, P20, Te7, 36064 + Z12, 3553), D18(Te7, O20) && N22(3553);
      }
      t19.unbindTexture();
    } else {
      let ae7 = 3553;
      (P20.isWebGL3DRenderTarget || P20.isWebGLArrayRenderTarget) && (o13 ? ae7 = P20.isWebGL3DRenderTarget ? 32879 : 35866 : console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")), t19.bindTexture(ae7, de9.__webglTexture), $25(ae7, C21, O20), pe8(Q12.__webglFramebuffer, P20, C21, 36064, ae7), D18(C21, O20) && N22(ae7), t19.unbindTexture();
    }
    P20.depthBuffer && Ie7(P20);
  }
  function xt8(P20) {
    const C21 = w31(P20) || o13, Q12 = P20.isWebGLMultipleRenderTargets === true ? P20.texture : [P20.texture];
    for (let de9 = 0, fe7 = Q12.length; de9 < fe7; de9++) {
      const _e7 = Q12[de9];
      if (D18(_e7, C21)) {
        const O20 = P20.isWebGLCubeRenderTarget ? 34067 : 3553, ae7 = n33.get(_e7).__webglTexture;
        t19.bindTexture(O20, ae7), N22(O20), t19.unbindTexture();
      }
    }
  }
  function St9(P20) {
    if (o13 && P20.samples > 0 && et15(P20) === false) {
      const C21 = P20.isWebGLMultipleRenderTargets ? P20.texture : [P20.texture], Q12 = P20.width, de9 = P20.height;
      let fe7 = 16384;
      const _e7 = [], O20 = P20.stencilBuffer ? 33306 : 36096, ae7 = n33.get(P20), Z12 = P20.isWebGLMultipleRenderTargets === true;
      if (Z12)
        for (let ye7 = 0; ye7 < C21.length; ye7++)
          t19.bindFramebuffer(36160, ae7.__webglMultisampledFramebuffer), a22.framebufferRenderbuffer(36160, 36064 + ye7, 36161, null), t19.bindFramebuffer(36160, ae7.__webglFramebuffer), a22.framebufferTexture2D(36009, 36064 + ye7, 3553, null, 0);
      t19.bindFramebuffer(36008, ae7.__webglMultisampledFramebuffer), t19.bindFramebuffer(36009, ae7.__webglFramebuffer);
      for (let ye7 = 0; ye7 < C21.length; ye7++) {
        _e7.push(36064 + ye7), P20.depthBuffer && _e7.push(O20);
        const Te7 = ae7.__ignoreDepthValues !== void 0 ? ae7.__ignoreDepthValues : false;
        if (Te7 === false && (P20.depthBuffer && (fe7 |= 256), P20.stencilBuffer && (fe7 |= 1024)), Z12 && a22.framebufferRenderbuffer(36008, 36064, 36161, ae7.__webglColorRenderbuffer[ye7]), Te7 === true && (a22.invalidateFramebuffer(36008, [O20]), a22.invalidateFramebuffer(36009, [O20])), Z12) {
          const Le7 = n33.get(C21[ye7]).__webglTexture;
          a22.framebufferTexture2D(36009, 36064, 3553, Le7, 0);
        }
        a22.blitFramebuffer(0, 0, Q12, de9, 0, 0, Q12, de9, fe7, 9728), p26 && a22.invalidateFramebuffer(36008, _e7);
      }
      if (t19.bindFramebuffer(36008, null), t19.bindFramebuffer(36009, null), Z12)
        for (let ye7 = 0; ye7 < C21.length; ye7++) {
          t19.bindFramebuffer(36160, ae7.__webglMultisampledFramebuffer), a22.framebufferRenderbuffer(36160, 36064 + ye7, 36161, ae7.__webglColorRenderbuffer[ye7]);
          const Te7 = n33.get(C21[ye7]).__webglTexture;
          t19.bindFramebuffer(36160, ae7.__webglFramebuffer), a22.framebufferTexture2D(36009, 36064 + ye7, 3553, Te7, 0);
        }
      t19.bindFramebuffer(36009, ae7.__webglMultisampledFramebuffer);
    }
  }
  function wt10(P20) {
    return Math.min(h26, P20.samples);
  }
  function et15(P20) {
    const C21 = n33.get(P20);
    return o13 && P20.samples > 0 && e11.has("WEBGL_multisampled_render_to_texture") === true && C21.__useRenderToTexture !== false;
  }
  function ct12(P20) {
    const C21 = r24.render.frame;
    g32.get(P20) !== C21 && (g32.set(P20, C21), P20.update());
  }
  function kt10(P20, C21) {
    const Q12 = P20.encoding, de9 = P20.format, fe7 = P20.type;
    return P20.isCompressedTexture === true || P20.isVideoTexture === true || P20.format === _a || Q12 !== Ci && (Q12 === st8 ? o13 === false ? e11.has("EXT_sRGB") === true && de9 === pn3 ? (P20.format = _a, P20.minFilter = Ht4, P20.generateMipmaps = false) : C21 = lu.sRGBToLinear(C21) : (de9 !== pn3 || fe7 !== Ei3) && console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.") : console.error("THREE.WebGLTextures: Unsupported texture encoding:", Q12)), C21;
  }
  this.allocateTextureUnit = J12, this.resetTextureUnits = te7, this.setTexture2D = le7, this.setTexture2DArray = me9, this.setTexture3D = he8, this.setTextureCube = j19, this.rebindTextures = je7, this.setupRenderTarget = bt10, this.updateRenderTargetMipmap = xt8, this.updateMultisampleRenderTarget = St9, this.setupDepthRenderbuffer = Ie7, this.setupFrameBufferTexture = pe8, this.useMultisampledRTT = et15;
}
function i0(a22, e11, t19) {
  const n33 = t19.isWebGL2;
  function i27(s18, r24 = null) {
    let o13;
    if (s18 === Ei3)
      return 5121;
    if (s18 === Ih)
      return 32819;
    if (s18 === Dh)
      return 32820;
    if (s18 === Lh)
      return 5120;
    if (s18 === Rh)
      return 5122;
    if (s18 === nu)
      return 5123;
    if (s18 === Ph)
      return 5124;
    if (s18 === vi3)
      return 5125;
    if (s18 === ai3)
      return 5126;
    if (s18 === Qs)
      return n33 ? 5131 : (o13 = e11.get("OES_texture_half_float"), o13 !== null ? o13.HALF_FLOAT_OES : null);
    if (s18 === Nh)
      return 6406;
    if (s18 === pn3)
      return 6408;
    if (s18 === Uh)
      return 6409;
    if (s18 === kh)
      return 6410;
    if (s18 === Ti)
      return 6402;
    if (s18 === Ts)
      return 34041;
    if (s18 === _a)
      return o13 = e11.get("EXT_sRGB"), o13 !== null ? o13.SRGB_ALPHA_EXT : null;
    if (s18 === Oh)
      return 6403;
    if (s18 === Fh)
      return 36244;
    if (s18 === zh)
      return 33319;
    if (s18 === Bh)
      return 33320;
    if (s18 === Vh)
      return 36249;
    if (s18 === Eo || s18 === Co || s18 === Lo || s18 === Ro)
      if (r24 === st8)
        if (o13 = e11.get("WEBGL_compressed_texture_s3tc_srgb"), o13 !== null) {
          if (s18 === Eo)
            return o13.COMPRESSED_SRGB_S3TC_DXT1_EXT;
          if (s18 === Co)
            return o13.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;
          if (s18 === Lo)
            return o13.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;
          if (s18 === Ro)
            return o13.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;
        } else
          return null;
      else if (o13 = e11.get("WEBGL_compressed_texture_s3tc"), o13 !== null) {
        if (s18 === Eo)
          return o13.COMPRESSED_RGB_S3TC_DXT1_EXT;
        if (s18 === Co)
          return o13.COMPRESSED_RGBA_S3TC_DXT1_EXT;
        if (s18 === Lo)
          return o13.COMPRESSED_RGBA_S3TC_DXT3_EXT;
        if (s18 === Ro)
          return o13.COMPRESSED_RGBA_S3TC_DXT5_EXT;
      } else
        return null;
    if (s18 === ol || s18 === al || s18 === ll || s18 === cl)
      if (o13 = e11.get("WEBGL_compressed_texture_pvrtc"), o13 !== null) {
        if (s18 === ol)
          return o13.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
        if (s18 === al)
          return o13.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
        if (s18 === ll)
          return o13.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
        if (s18 === cl)
          return o13.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
      } else
        return null;
    if (s18 === Gh)
      return o13 = e11.get("WEBGL_compressed_texture_etc1"), o13 !== null ? o13.COMPRESSED_RGB_ETC1_WEBGL : null;
    if (s18 === ul || s18 === hl)
      if (o13 = e11.get("WEBGL_compressed_texture_etc"), o13 !== null) {
        if (s18 === ul)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ETC2 : o13.COMPRESSED_RGB8_ETC2;
        if (s18 === hl)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC : o13.COMPRESSED_RGBA8_ETC2_EAC;
      } else
        return null;
    if (s18 === dl || s18 === fl || s18 === pl || s18 === ml || s18 === gl || s18 === _l || s18 === xl || s18 === yl || s18 === vl || s18 === bl || s18 === Ml || s18 === Sl || s18 === wl || s18 === Tl)
      if (o13 = e11.get("WEBGL_compressed_texture_astc"), o13 !== null) {
        if (s18 === dl)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR : o13.COMPRESSED_RGBA_ASTC_4x4_KHR;
        if (s18 === fl)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR : o13.COMPRESSED_RGBA_ASTC_5x4_KHR;
        if (s18 === pl)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR : o13.COMPRESSED_RGBA_ASTC_5x5_KHR;
        if (s18 === ml)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR : o13.COMPRESSED_RGBA_ASTC_6x5_KHR;
        if (s18 === gl)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR : o13.COMPRESSED_RGBA_ASTC_6x6_KHR;
        if (s18 === _l)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR : o13.COMPRESSED_RGBA_ASTC_8x5_KHR;
        if (s18 === xl)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR : o13.COMPRESSED_RGBA_ASTC_8x6_KHR;
        if (s18 === yl)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR : o13.COMPRESSED_RGBA_ASTC_8x8_KHR;
        if (s18 === vl)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR : o13.COMPRESSED_RGBA_ASTC_10x5_KHR;
        if (s18 === bl)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR : o13.COMPRESSED_RGBA_ASTC_10x6_KHR;
        if (s18 === Ml)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR : o13.COMPRESSED_RGBA_ASTC_10x8_KHR;
        if (s18 === Sl)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR : o13.COMPRESSED_RGBA_ASTC_10x10_KHR;
        if (s18 === wl)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR : o13.COMPRESSED_RGBA_ASTC_12x10_KHR;
        if (s18 === Tl)
          return r24 === st8 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR : o13.COMPRESSED_RGBA_ASTC_12x12_KHR;
      } else
        return null;
    if (s18 === Po)
      if (o13 = e11.get("EXT_texture_compression_bptc"), o13 !== null) {
        if (s18 === Po)
          return r24 === st8 ? o13.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT : o13.COMPRESSED_RGBA_BPTC_UNORM_EXT;
      } else
        return null;
    if (s18 === Hh || s18 === Al || s18 === El || s18 === Cl)
      if (o13 = e11.get("EXT_texture_compression_rgtc"), o13 !== null) {
        if (s18 === Po)
          return o13.COMPRESSED_RED_RGTC1_EXT;
        if (s18 === Al)
          return o13.COMPRESSED_SIGNED_RED_RGTC1_EXT;
        if (s18 === El)
          return o13.COMPRESSED_RED_GREEN_RGTC2_EXT;
        if (s18 === Cl)
          return o13.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;
      } else
        return null;
    return s18 === _s ? n33 ? 34042 : (o13 = e11.get("WEBGL_depth_texture"), o13 !== null ? o13.UNSIGNED_INT_24_8_WEBGL : null) : a22[s18] !== void 0 ? a22[s18] : null;
  }
  return { convert: i27 };
}
var s0 = class extends Vt3 {
  constructor(e11 = []) {
    super(), this.isArrayCamera = true, this.cameras = e11;
  }
};
var Ct4 = class extends _t4 {
  constructor() {
    super(), this.isGroup = true, this.type = "Group";
  }
};
var r0 = { type: "move" };
var ea = class {
  constructor() {
    this._targetRay = null, this._grip = null, this._hand = null;
  }
  getHandSpace() {
    return this._hand === null && (this._hand = new Ct4(), this._hand.matrixAutoUpdate = false, this._hand.visible = false, this._hand.joints = {}, this._hand.inputState = { pinching: false }), this._hand;
  }
  getTargetRaySpace() {
    return this._targetRay === null && (this._targetRay = new Ct4(), this._targetRay.matrixAutoUpdate = false, this._targetRay.visible = false, this._targetRay.hasLinearVelocity = false, this._targetRay.linearVelocity = new U9(), this._targetRay.hasAngularVelocity = false, this._targetRay.angularVelocity = new U9()), this._targetRay;
  }
  getGripSpace() {
    return this._grip === null && (this._grip = new Ct4(), this._grip.matrixAutoUpdate = false, this._grip.visible = false, this._grip.hasLinearVelocity = false, this._grip.linearVelocity = new U9(), this._grip.hasAngularVelocity = false, this._grip.angularVelocity = new U9()), this._grip;
  }
  dispatchEvent(e11) {
    return this._targetRay !== null && this._targetRay.dispatchEvent(e11), this._grip !== null && this._grip.dispatchEvent(e11), this._hand !== null && this._hand.dispatchEvent(e11), this;
  }
  connect(e11) {
    if (e11 && e11.hand) {
      const t19 = this._hand;
      if (t19)
        for (const n33 of e11.hand.values())
          this._getHandJoint(t19, n33);
    }
    return this.dispatchEvent({ type: "connected", data: e11 }), this;
  }
  disconnect(e11) {
    return this.dispatchEvent({ type: "disconnected", data: e11 }), this._targetRay !== null && (this._targetRay.visible = false), this._grip !== null && (this._grip.visible = false), this._hand !== null && (this._hand.visible = false), this;
  }
  update(e11, t19, n33) {
    let i27 = null, s18 = null, r24 = null;
    const o13 = this._targetRay, c27 = this._grip, l26 = this._hand;
    if (e11 && t19.session.visibilityState !== "visible-blurred") {
      if (l26 && e11.hand) {
        r24 = true;
        for (const y34 of e11.hand.values()) {
          const m34 = t19.getJointPose(y34, n33), f40 = this._getHandJoint(l26, y34);
          m34 !== null && (f40.matrix.fromArray(m34.transform.matrix), f40.matrix.decompose(f40.position, f40.rotation, f40.scale), f40.jointRadius = m34.radius), f40.visible = m34 !== null;
        }
        const u35 = l26.joints["index-finger-tip"], h26 = l26.joints["thumb-tip"], d34 = u35.position.distanceTo(h26.position), p26 = 0.02, g32 = 5e-3;
        l26.inputState.pinching && d34 > p26 + g32 ? (l26.inputState.pinching = false, this.dispatchEvent({
          type: "pinchend",
          handedness: e11.handedness,
          target: this
        })) : !l26.inputState.pinching && d34 <= p26 - g32 && (l26.inputState.pinching = true, this.dispatchEvent({
          type: "pinchstart",
          handedness: e11.handedness,
          target: this
        }));
      } else
        c27 !== null && e11.gripSpace && (s18 = t19.getPose(e11.gripSpace, n33), s18 !== null && (c27.matrix.fromArray(s18.transform.matrix), c27.matrix.decompose(c27.position, c27.rotation, c27.scale), s18.linearVelocity ? (c27.hasLinearVelocity = true, c27.linearVelocity.copy(s18.linearVelocity)) : c27.hasLinearVelocity = false, s18.angularVelocity ? (c27.hasAngularVelocity = true, c27.angularVelocity.copy(s18.angularVelocity)) : c27.hasAngularVelocity = false));
      o13 !== null && (i27 = t19.getPose(e11.targetRaySpace, n33), i27 === null && s18 !== null && (i27 = s18), i27 !== null && (o13.matrix.fromArray(i27.transform.matrix), o13.matrix.decompose(o13.position, o13.rotation, o13.scale), i27.linearVelocity ? (o13.hasLinearVelocity = true, o13.linearVelocity.copy(i27.linearVelocity)) : o13.hasLinearVelocity = false, i27.angularVelocity ? (o13.hasAngularVelocity = true, o13.angularVelocity.copy(i27.angularVelocity)) : o13.hasAngularVelocity = false, this.dispatchEvent(r0)));
    }
    return o13 !== null && (o13.visible = i27 !== null), c27 !== null && (c27.visible = s18 !== null), l26 !== null && (l26.visible = r24 !== null), this;
  }
  // private method
  _getHandJoint(e11, t19) {
    if (e11.joints[t19.jointName] === void 0) {
      const n33 = new Ct4();
      n33.matrixAutoUpdate = false, n33.visible = false, e11.joints[t19.jointName] = n33, e11.add(n33);
    }
    return e11.joints[t19.jointName];
  }
};
var o0 = class extends jt4 {
  constructor(e11, t19, n33, i27, s18, r24, o13, c27, l26, u35) {
    if (u35 = u35 !== void 0 ? u35 : Ti, u35 !== Ti && u35 !== Ts)
      throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");
    n33 === void 0 && u35 === Ti && (n33 = vi3), n33 === void 0 && u35 === Ts && (n33 = _s), super(null, i27, s18, r24, o13, c27, u35, n33, l26), this.isDepthTexture = true, this.image = { width: e11, height: t19 }, this.magFilter = o13 !== void 0 ? o13 : Bt3, this.minFilter = c27 !== void 0 ? c27 : Bt3, this.flipY = false, this.generateMipmaps = false;
  }
};
var a0 = class extends Ni3 {
  constructor(e11, t19) {
    super();
    const n33 = this;
    let i27 = null, s18 = 1, r24 = null, o13 = "local-floor", c27 = 1, l26 = null, u35 = null, h26 = null, d34 = null, p26 = null, g32 = null;
    const y34 = t19.getContextAttributes();
    let m34 = null, f40 = null;
    const E25 = [], b35 = [], w31 = /* @__PURE__ */ new Set(), S23 = /* @__PURE__ */ new Map(), D18 = new Vt3();
    D18.layers.enable(1), D18.viewport = new gt6();
    const N22 = new Vt3();
    N22.layers.enable(2), N22.viewport = new gt6();
    const I18 = [D18, N22], v31 = new s0();
    v31.layers.enable(1), v31.layers.enable(2);
    let L12 = null, G16 = null;
    this.cameraAutoUpdate = true, this.enabled = false, this.isPresenting = false, this.getController = function(j19) {
      let X14 = E25[j19];
      return X14 === void 0 && (X14 = new ea(), E25[j19] = X14), X14.getTargetRaySpace();
    }, this.getControllerGrip = function(j19) {
      let X14 = E25[j19];
      return X14 === void 0 && (X14 = new ea(), E25[j19] = X14), X14.getGripSpace();
    }, this.getHand = function(j19) {
      let X14 = E25[j19];
      return X14 === void 0 && (X14 = new ea(), E25[j19] = X14), X14.getHandSpace();
    };
    function B22(j19) {
      const X14 = b35.indexOf(j19.inputSource);
      if (X14 === -1)
        return;
      const ee7 = E25[X14];
      ee7 !== void 0 && ee7.dispatchEvent({ type: j19.type, data: j19.inputSource });
    }
    function k29() {
      i27.removeEventListener("select", B22), i27.removeEventListener("selectstart", B22), i27.removeEventListener("selectend", B22), i27.removeEventListener("squeeze", B22), i27.removeEventListener("squeezestart", B22), i27.removeEventListener("squeezeend", B22), i27.removeEventListener("end", k29), i27.removeEventListener("inputsourceschange", V16);
      for (let j19 = 0; j19 < E25.length; j19++) {
        const X14 = b35[j19];
        X14 !== null && (b35[j19] = null, E25[j19].disconnect(X14));
      }
      L12 = null, G16 = null, e11.setRenderTarget(m34), p26 = null, d34 = null, h26 = null, i27 = null, f40 = null, he8.stop(), n33.isPresenting = false, n33.dispatchEvent({ type: "sessionend" });
    }
    this.setFramebufferScaleFactor = function(j19) {
      s18 = j19, n33.isPresenting === true && console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.");
    }, this.setReferenceSpaceType = function(j19) {
      o13 = j19, n33.isPresenting === true && console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.");
    }, this.getReferenceSpace = function() {
      return l26 || r24;
    }, this.setReferenceSpace = function(j19) {
      l26 = j19;
    }, this.getBaseLayer = function() {
      return d34 !== null ? d34 : p26;
    }, this.getBinding = function() {
      return h26;
    }, this.getFrame = function() {
      return g32;
    }, this.getSession = function() {
      return i27;
    }, this.setSession = async function(j19) {
      if (i27 = j19, i27 !== null) {
        if (m34 = e11.getRenderTarget(), i27.addEventListener("select", B22), i27.addEventListener("selectstart", B22), i27.addEventListener("selectend", B22), i27.addEventListener("squeeze", B22), i27.addEventListener("squeezestart", B22), i27.addEventListener("squeezeend", B22), i27.addEventListener("end", k29), i27.addEventListener("inputsourceschange", V16), y34.xrCompatible !== true && await t19.makeXRCompatible(), i27.renderState.layers === void 0 || e11.capabilities.isWebGL2 === false) {
          const X14 = {
            antialias: i27.renderState.layers === void 0 ? y34.antialias : true,
            alpha: y34.alpha,
            depth: y34.depth,
            stencil: y34.stencil,
            framebufferScaleFactor: s18
          };
          p26 = new XRWebGLLayer(i27, t19, X14), i27.updateRenderState({ baseLayer: p26 }), f40 = new Li(
            p26.framebufferWidth,
            p26.framebufferHeight,
            {
              format: pn3,
              type: Ei3,
              encoding: e11.outputEncoding,
              stencilBuffer: y34.stencil
            }
          );
        } else {
          let X14 = null, ee7 = null, $25 = null;
          y34.depth && ($25 = y34.stencil ? 35056 : 33190, X14 = y34.stencil ? Ts : Ti, ee7 = y34.stencil ? _s : vi3);
          const z21 = {
            colorFormat: 32856,
            depthFormat: $25,
            scaleFactor: s18
          };
          h26 = new XRWebGLBinding(i27, t19), d34 = h26.createProjectionLayer(z21), i27.updateRenderState({ layers: [d34] }), f40 = new Li(
            d34.textureWidth,
            d34.textureHeight,
            {
              format: pn3,
              type: Ei3,
              depthTexture: new o0(d34.textureWidth, d34.textureHeight, ee7, void 0, void 0, void 0, void 0, void 0, void 0, X14),
              stencilBuffer: y34.stencil,
              encoding: e11.outputEncoding,
              samples: y34.antialias ? 4 : 0
            }
          );
          const be7 = e11.properties.get(f40);
          be7.__ignoreDepthValues = d34.ignoreDepthValues;
        }
        f40.isXRRenderTarget = true, this.setFoveation(c27), l26 = null, r24 = await i27.requestReferenceSpace(o13), he8.setContext(i27), he8.start(), n33.isPresenting = true, n33.dispatchEvent({ type: "sessionstart" });
      }
    };
    function V16(j19) {
      for (let X14 = 0; X14 < j19.removed.length; X14++) {
        const ee7 = j19.removed[X14], $25 = b35.indexOf(ee7);
        $25 >= 0 && (b35[$25] = null, E25[$25].disconnect(ee7));
      }
      for (let X14 = 0; X14 < j19.added.length; X14++) {
        const ee7 = j19.added[X14];
        let $25 = b35.indexOf(ee7);
        if ($25 === -1) {
          for (let be7 = 0; be7 < E25.length; be7++)
            if (be7 >= b35.length) {
              b35.push(ee7), $25 = be7;
              break;
            } else if (b35[be7] === null) {
              b35[be7] = ee7, $25 = be7;
              break;
            }
          if ($25 === -1)
            break;
        }
        const z21 = E25[$25];
        z21 && z21.connect(ee7);
      }
    }
    const H16 = new U9(), W11 = new U9();
    function te7(j19, X14, ee7) {
      H16.setFromMatrixPosition(X14.matrixWorld), W11.setFromMatrixPosition(ee7.matrixWorld);
      const $25 = H16.distanceTo(W11), z21 = X14.projectionMatrix.elements, be7 = ee7.projectionMatrix.elements, Ee5 = z21[14] / (z21[10] - 1), pe8 = z21[14] / (z21[10] + 1), ke7 = (z21[9] + 1) / z21[5], nt17 = (z21[9] - 1) / z21[5], Ie7 = (z21[8] - 1) / z21[0], je7 = (be7[8] + 1) / be7[0], bt10 = Ee5 * Ie7, xt8 = Ee5 * je7, St9 = $25 / (-Ie7 + je7), wt10 = St9 * -Ie7;
      X14.matrixWorld.decompose(j19.position, j19.quaternion, j19.scale), j19.translateX(wt10), j19.translateZ(St9), j19.matrixWorld.compose(j19.position, j19.quaternion, j19.scale), j19.matrixWorldInverse.copy(j19.matrixWorld).invert();
      const et15 = Ee5 + St9, ct12 = pe8 + St9, kt10 = bt10 - wt10, P20 = xt8 + ($25 - wt10), C21 = ke7 * pe8 / ct12 * et15, Q12 = nt17 * pe8 / ct12 * et15;
      j19.projectionMatrix.makePerspective(kt10, P20, C21, Q12, et15, ct12), j19.projectionMatrixInverse.copy(j19.projectionMatrix).invert();
    }
    function J12(j19, X14) {
      X14 === null ? j19.matrixWorld.copy(j19.matrix) : j19.matrixWorld.multiplyMatrices(X14.matrixWorld, j19.matrix), j19.matrixWorldInverse.copy(j19.matrixWorld).invert();
    }
    this.updateCamera = function(j19) {
      if (i27 === null)
        return;
      v31.near = N22.near = D18.near = j19.near, v31.far = N22.far = D18.far = j19.far, (L12 !== v31.near || G16 !== v31.far) && (i27.updateRenderState({
        depthNear: v31.near,
        depthFar: v31.far
      }), L12 = v31.near, G16 = v31.far);
      const X14 = j19.parent, ee7 = v31.cameras;
      J12(v31, X14);
      for (let $25 = 0; $25 < ee7.length; $25++)
        J12(ee7[$25], X14);
      ee7.length === 2 ? te7(v31, D18, N22) : v31.projectionMatrix.copy(D18.projectionMatrix), ie8(j19, v31, X14);
    };
    function ie8(j19, X14, ee7) {
      ee7 === null ? j19.matrix.copy(X14.matrixWorld) : (j19.matrix.copy(ee7.matrixWorld), j19.matrix.invert(), j19.matrix.multiply(X14.matrixWorld)), j19.matrix.decompose(j19.position, j19.quaternion, j19.scale), j19.updateMatrixWorld(true);
      const $25 = j19.children;
      for (let z21 = 0, be7 = $25.length; z21 < be7; z21++)
        $25[z21].updateMatrixWorld(true);
      j19.projectionMatrix.copy(X14.projectionMatrix), j19.projectionMatrixInverse.copy(X14.projectionMatrixInverse), j19.isPerspectiveCamera && (j19.fov = Es * 2 * Math.atan(1 / j19.projectionMatrix.elements[5]), j19.zoom = 1);
    }
    this.getCamera = function() {
      return v31;
    }, this.getFoveation = function() {
      if (!(d34 === null && p26 === null))
        return c27;
    }, this.setFoveation = function(j19) {
      c27 = j19, d34 !== null && (d34.fixedFoveation = j19), p26 !== null && p26.fixedFoveation !== void 0 && (p26.fixedFoveation = j19);
    }, this.getPlanes = function() {
      return w31;
    };
    let le7 = null;
    function me9(j19, X14) {
      if (u35 = X14.getViewerPose(l26 || r24), g32 = X14, u35 !== null) {
        const ee7 = u35.views;
        p26 !== null && (e11.setRenderTargetFramebuffer(f40, p26.framebuffer), e11.setRenderTarget(f40));
        let $25 = false;
        ee7.length !== v31.cameras.length && (v31.cameras.length = 0, $25 = true);
        for (let z21 = 0; z21 < ee7.length; z21++) {
          const be7 = ee7[z21];
          let Ee5 = null;
          if (p26 !== null)
            Ee5 = p26.getViewport(be7);
          else {
            const ke7 = h26.getViewSubImage(d34, be7);
            Ee5 = ke7.viewport, z21 === 0 && (e11.setRenderTargetTextures(
              f40,
              ke7.colorTexture,
              d34.ignoreDepthValues ? void 0 : ke7.depthStencilTexture
            ), e11.setRenderTarget(f40));
          }
          let pe8 = I18[z21];
          pe8 === void 0 && (pe8 = new Vt3(), pe8.layers.enable(z21), pe8.viewport = new gt6(), I18[z21] = pe8), pe8.matrix.fromArray(be7.transform.matrix), pe8.matrix.decompose(pe8.position, pe8.quaternion, pe8.scale), pe8.projectionMatrix.fromArray(be7.projectionMatrix), pe8.projectionMatrixInverse.copy(pe8.projectionMatrix).invert(), pe8.viewport.set(Ee5.x, Ee5.y, Ee5.width, Ee5.height), z21 === 0 && (v31.matrix.copy(pe8.matrix), v31.matrix.decompose(v31.position, v31.quaternion, v31.scale)), $25 === true && v31.cameras.push(pe8);
        }
      }
      for (let ee7 = 0; ee7 < E25.length; ee7++) {
        const $25 = b35[ee7], z21 = E25[ee7];
        $25 !== null && z21 !== void 0 && z21.update($25, X14, l26 || r24);
      }
      if (le7 && le7(j19, X14), X14.detectedPlanes) {
        n33.dispatchEvent({ type: "planesdetected", data: X14.detectedPlanes });
        let ee7 = null;
        for (const $25 of w31)
          X14.detectedPlanes.has($25) || (ee7 === null && (ee7 = []), ee7.push($25));
        if (ee7 !== null)
          for (const $25 of ee7)
            w31.delete($25), S23.delete($25), n33.dispatchEvent({ type: "planeremoved", data: $25 });
        for (const $25 of X14.detectedPlanes)
          if (!w31.has($25))
            w31.add($25), S23.set($25, X14.lastChangedTime), n33.dispatchEvent({ type: "planeadded", data: $25 });
          else {
            const z21 = S23.get($25);
            $25.lastChangedTime > z21 && (S23.set($25, $25.lastChangedTime), n33.dispatchEvent({ type: "planechanged", data: $25 }));
          }
      }
      g32 = null;
    }
    const he8 = new xu();
    he8.setAnimationLoop(me9), this.setAnimationLoop = function(j19) {
      le7 = j19;
    }, this.dispose = function() {
    };
  }
};
function l0(a22, e11) {
  function t19(m34, f40) {
    m34.matrixAutoUpdate === true && m34.updateMatrix(), f40.value.copy(m34.matrix);
  }
  function n33(m34, f40) {
    f40.color.getRGB(m34.fogColor.value, mu(a22)), f40.isFog ? (m34.fogNear.value = f40.near, m34.fogFar.value = f40.far) : f40.isFogExp2 && (m34.fogDensity.value = f40.density);
  }
  function i27(m34, f40, E25, b35, w31) {
    f40.isMeshBasicMaterial || f40.isMeshLambertMaterial ? s18(m34, f40) : f40.isMeshToonMaterial ? (s18(m34, f40), h26(m34, f40)) : f40.isMeshPhongMaterial ? (s18(m34, f40), u35(m34, f40)) : f40.isMeshStandardMaterial ? (s18(m34, f40), d34(m34, f40), f40.isMeshPhysicalMaterial && p26(m34, f40, w31)) : f40.isMeshMatcapMaterial ? (s18(m34, f40), g32(m34, f40)) : f40.isMeshDepthMaterial ? s18(m34, f40) : f40.isMeshDistanceMaterial ? (s18(m34, f40), y34(m34, f40)) : f40.isMeshNormalMaterial ? s18(m34, f40) : f40.isLineBasicMaterial ? (r24(m34, f40), f40.isLineDashedMaterial && o13(m34, f40)) : f40.isPointsMaterial ? c27(m34, f40, E25, b35) : f40.isSpriteMaterial ? l26(m34, f40) : f40.isShadowMaterial ? (m34.color.value.copy(f40.color), m34.opacity.value = f40.opacity) : f40.isShaderMaterial && (f40.uniformsNeedUpdate = false);
  }
  function s18(m34, f40) {
    m34.opacity.value = f40.opacity, f40.color && m34.diffuse.value.copy(f40.color), f40.emissive && m34.emissive.value.copy(f40.emissive).multiplyScalar(f40.emissiveIntensity), f40.map && (m34.map.value = f40.map, t19(f40.map, m34.mapTransform)), f40.alphaMap && (m34.alphaMap.value = f40.alphaMap, t19(f40.alphaMap, m34.alphaMapTransform)), f40.bumpMap && (m34.bumpMap.value = f40.bumpMap, t19(f40.bumpMap, m34.bumpMapTransform), m34.bumpScale.value = f40.bumpScale, f40.side === sn3 && (m34.bumpScale.value *= -1)), f40.normalMap && (m34.normalMap.value = f40.normalMap, t19(f40.normalMap, m34.normalMapTransform), m34.normalScale.value.copy(f40.normalScale), f40.side === sn3 && m34.normalScale.value.negate()), f40.displacementMap && (m34.displacementMap.value = f40.displacementMap, t19(f40.displacementMap, m34.displacementMapTransform), m34.displacementScale.value = f40.displacementScale, m34.displacementBias.value = f40.displacementBias), f40.emissiveMap && (m34.emissiveMap.value = f40.emissiveMap, t19(f40.emissiveMap, m34.emissiveMapTransform)), f40.specularMap && (m34.specularMap.value = f40.specularMap, t19(f40.specularMap, m34.specularMapTransform)), f40.alphaTest > 0 && (m34.alphaTest.value = f40.alphaTest);
    const E25 = e11.get(f40).envMap;
    if (E25 && (m34.envMap.value = E25, m34.flipEnvMap.value = E25.isCubeTexture && E25.isRenderTargetTexture === false ? -1 : 1, m34.reflectivity.value = f40.reflectivity, m34.ior.value = f40.ior, m34.refractionRatio.value = f40.refractionRatio), f40.lightMap) {
      m34.lightMap.value = f40.lightMap;
      const b35 = a22.useLegacyLights === true ? Math.PI : 1;
      m34.lightMapIntensity.value = f40.lightMapIntensity * b35, t19(f40.lightMap, m34.lightMapTransform);
    }
    f40.aoMap && (m34.aoMap.value = f40.aoMap, m34.aoMapIntensity.value = f40.aoMapIntensity, t19(f40.aoMap, m34.aoMapTransform));
  }
  function r24(m34, f40) {
    m34.diffuse.value.copy(f40.color), m34.opacity.value = f40.opacity, f40.map && (m34.map.value = f40.map, t19(f40.map, m34.mapTransform));
  }
  function o13(m34, f40) {
    m34.dashSize.value = f40.dashSize, m34.totalSize.value = f40.dashSize + f40.gapSize, m34.scale.value = f40.scale;
  }
  function c27(m34, f40, E25, b35) {
    m34.diffuse.value.copy(f40.color), m34.opacity.value = f40.opacity, m34.size.value = f40.size * E25, m34.scale.value = b35 * 0.5, f40.map && (m34.map.value = f40.map, t19(f40.map, m34.uvTransform)), f40.alphaMap && (m34.alphaMap.value = f40.alphaMap), f40.alphaTest > 0 && (m34.alphaTest.value = f40.alphaTest);
  }
  function l26(m34, f40) {
    m34.diffuse.value.copy(f40.color), m34.opacity.value = f40.opacity, m34.rotation.value = f40.rotation, f40.map && (m34.map.value = f40.map, t19(f40.map, m34.mapTransform)), f40.alphaMap && (m34.alphaMap.value = f40.alphaMap), f40.alphaTest > 0 && (m34.alphaTest.value = f40.alphaTest);
  }
  function u35(m34, f40) {
    m34.specular.value.copy(f40.specular), m34.shininess.value = Math.max(f40.shininess, 1e-4);
  }
  function h26(m34, f40) {
    f40.gradientMap && (m34.gradientMap.value = f40.gradientMap);
  }
  function d34(m34, f40) {
    m34.metalness.value = f40.metalness, f40.metalnessMap && (m34.metalnessMap.value = f40.metalnessMap, t19(f40.metalnessMap, m34.metalnessMapTransform)), m34.roughness.value = f40.roughness, f40.roughnessMap && (m34.roughnessMap.value = f40.roughnessMap, t19(f40.roughnessMap, m34.roughnessMapTransform)), e11.get(f40).envMap && (m34.envMapIntensity.value = f40.envMapIntensity);
  }
  function p26(m34, f40, E25) {
    m34.ior.value = f40.ior, f40.sheen > 0 && (m34.sheenColor.value.copy(f40.sheenColor).multiplyScalar(f40.sheen), m34.sheenRoughness.value = f40.sheenRoughness, f40.sheenColorMap && (m34.sheenColorMap.value = f40.sheenColorMap, t19(f40.sheenColorMap, m34.sheenColorMapTransform)), f40.sheenRoughnessMap && (m34.sheenRoughnessMap.value = f40.sheenRoughnessMap, t19(f40.sheenRoughnessMap, m34.sheenRoughnessMapTransform))), f40.clearcoat > 0 && (m34.clearcoat.value = f40.clearcoat, m34.clearcoatRoughness.value = f40.clearcoatRoughness, f40.clearcoatMap && (m34.clearcoatMap.value = f40.clearcoatMap, t19(f40.clearcoatMap, m34.clearcoatMapTransform)), f40.clearcoatRoughnessMap && (m34.clearcoatRoughnessMap.value = f40.clearcoatRoughnessMap, t19(f40.clearcoatRoughnessMap, m34.clearcoatRoughnessMapTransform)), f40.clearcoatNormalMap && (m34.clearcoatNormalMap.value = f40.clearcoatNormalMap, t19(f40.clearcoatNormalMap, m34.clearcoatNormalMapTransform), m34.clearcoatNormalScale.value.copy(f40.clearcoatNormalScale), f40.side === sn3 && m34.clearcoatNormalScale.value.negate())), f40.iridescence > 0 && (m34.iridescence.value = f40.iridescence, m34.iridescenceIOR.value = f40.iridescenceIOR, m34.iridescenceThicknessMinimum.value = f40.iridescenceThicknessRange[0], m34.iridescenceThicknessMaximum.value = f40.iridescenceThicknessRange[1], f40.iridescenceMap && (m34.iridescenceMap.value = f40.iridescenceMap, t19(f40.iridescenceMap, m34.iridescenceMapTransform)), f40.iridescenceThicknessMap && (m34.iridescenceThicknessMap.value = f40.iridescenceThicknessMap, t19(f40.iridescenceThicknessMap, m34.iridescenceThicknessMapTransform))), f40.transmission > 0 && (m34.transmission.value = f40.transmission, m34.transmissionSamplerMap.value = E25.texture, m34.transmissionSamplerSize.value.set(E25.width, E25.height), f40.transmissionMap && (m34.transmissionMap.value = f40.transmissionMap, t19(f40.transmissionMap, m34.transmissionMapTransform)), m34.thickness.value = f40.thickness, f40.thicknessMap && (m34.thicknessMap.value = f40.thicknessMap, t19(f40.thicknessMap, m34.thicknessMapTransform)), m34.attenuationDistance.value = f40.attenuationDistance, m34.attenuationColor.value.copy(f40.attenuationColor)), m34.specularIntensity.value = f40.specularIntensity, m34.specularColor.value.copy(f40.specularColor), f40.specularColorMap && (m34.specularColorMap.value = f40.specularColorMap, t19(f40.specularColorMap, m34.specularColorMapTransform)), f40.specularIntensityMap && (m34.specularIntensityMap.value = f40.specularIntensityMap, t19(f40.specularIntensityMap, m34.specularIntensityMapTransform));
  }
  function g32(m34, f40) {
    f40.matcap && (m34.matcap.value = f40.matcap);
  }
  function y34(m34, f40) {
    const E25 = e11.get(f40).light;
    m34.referencePosition.value.setFromMatrixPosition(E25.matrixWorld), m34.nearDistance.value = E25.shadow.camera.near, m34.farDistance.value = E25.shadow.camera.far;
  }
  return {
    refreshFogUniforms: n33,
    refreshMaterialUniforms: i27
  };
}
function c0(a22, e11, t19, n33) {
  let i27 = {}, s18 = {}, r24 = [];
  const o13 = t19.isWebGL2 ? a22.getParameter(35375) : 0;
  function c27(E25, b35) {
    const w31 = b35.program;
    n33.uniformBlockBinding(E25, w31);
  }
  function l26(E25, b35) {
    let w31 = i27[E25.id];
    w31 === void 0 && (g32(E25), w31 = u35(E25), i27[E25.id] = w31, E25.addEventListener("dispose", m34));
    const S23 = b35.program;
    n33.updateUBOMapping(E25, S23);
    const D18 = e11.render.frame;
    s18[E25.id] !== D18 && (d34(E25), s18[E25.id] = D18);
  }
  function u35(E25) {
    const b35 = h26();
    E25.__bindingPointIndex = b35;
    const w31 = a22.createBuffer(), S23 = E25.__size, D18 = E25.usage;
    return a22.bindBuffer(35345, w31), a22.bufferData(35345, S23, D18), a22.bindBuffer(35345, null), a22.bindBufferBase(35345, b35, w31), w31;
  }
  function h26() {
    for (let E25 = 0; E25 < o13; E25++)
      if (r24.indexOf(E25) === -1)
        return r24.push(E25), E25;
    return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."), 0;
  }
  function d34(E25) {
    const b35 = i27[E25.id], w31 = E25.uniforms, S23 = E25.__cache;
    a22.bindBuffer(35345, b35);
    for (let D18 = 0, N22 = w31.length; D18 < N22; D18++) {
      const I18 = w31[D18];
      if (p26(I18, D18, S23) === true) {
        const v31 = I18.__offset, L12 = Array.isArray(I18.value) ? I18.value : [I18.value];
        let G16 = 0;
        for (let B22 = 0; B22 < L12.length; B22++) {
          const k29 = L12[B22], V16 = y34(k29);
          typeof k29 == "number" ? (I18.__data[0] = k29, a22.bufferSubData(35345, v31 + G16, I18.__data)) : k29.isMatrix3 ? (I18.__data[0] = k29.elements[0], I18.__data[1] = k29.elements[1], I18.__data[2] = k29.elements[2], I18.__data[3] = k29.elements[0], I18.__data[4] = k29.elements[3], I18.__data[5] = k29.elements[4], I18.__data[6] = k29.elements[5], I18.__data[7] = k29.elements[0], I18.__data[8] = k29.elements[6], I18.__data[9] = k29.elements[7], I18.__data[10] = k29.elements[8], I18.__data[11] = k29.elements[0]) : (k29.toArray(I18.__data, G16), G16 += V16.storage / Float32Array.BYTES_PER_ELEMENT);
        }
        a22.bufferSubData(35345, v31, I18.__data);
      }
    }
    a22.bindBuffer(35345, null);
  }
  function p26(E25, b35, w31) {
    const S23 = E25.value;
    if (w31[b35] === void 0) {
      if (typeof S23 == "number")
        w31[b35] = S23;
      else {
        const D18 = Array.isArray(S23) ? S23 : [S23], N22 = [];
        for (let I18 = 0; I18 < D18.length; I18++)
          N22.push(D18[I18].clone());
        w31[b35] = N22;
      }
      return true;
    } else if (typeof S23 == "number") {
      if (w31[b35] !== S23)
        return w31[b35] = S23, true;
    } else {
      const D18 = Array.isArray(w31[b35]) ? w31[b35] : [w31[b35]], N22 = Array.isArray(S23) ? S23 : [S23];
      for (let I18 = 0; I18 < D18.length; I18++) {
        const v31 = D18[I18];
        if (v31.equals(N22[I18]) === false)
          return v31.copy(N22[I18]), true;
      }
    }
    return false;
  }
  function g32(E25) {
    const b35 = E25.uniforms;
    let w31 = 0;
    const S23 = 16;
    let D18 = 0;
    for (let N22 = 0, I18 = b35.length; N22 < I18; N22++) {
      const v31 = b35[N22], L12 = {
        boundary: 0,
        // bytes
        storage: 0
        // bytes
      }, G16 = Array.isArray(v31.value) ? v31.value : [v31.value];
      for (let B22 = 0, k29 = G16.length; B22 < k29; B22++) {
        const V16 = G16[B22], H16 = y34(V16);
        L12.boundary += H16.boundary, L12.storage += H16.storage;
      }
      if (v31.__data = new Float32Array(L12.storage / Float32Array.BYTES_PER_ELEMENT), v31.__offset = w31, N22 > 0) {
        D18 = w31 % S23;
        const B22 = S23 - D18;
        D18 !== 0 && B22 - L12.boundary < 0 && (w31 += S23 - D18, v31.__offset = w31);
      }
      w31 += L12.storage;
    }
    return D18 = w31 % S23, D18 > 0 && (w31 += S23 - D18), E25.__size = w31, E25.__cache = {}, this;
  }
  function y34(E25) {
    const b35 = {
      boundary: 0,
      // bytes
      storage: 0
      // bytes
    };
    return typeof E25 == "number" ? (b35.boundary = 4, b35.storage = 4) : E25.isVector2 ? (b35.boundary = 8, b35.storage = 8) : E25.isVector3 || E25.isColor ? (b35.boundary = 16, b35.storage = 12) : E25.isVector4 ? (b35.boundary = 16, b35.storage = 16) : E25.isMatrix3 ? (b35.boundary = 48, b35.storage = 48) : E25.isMatrix4 ? (b35.boundary = 64, b35.storage = 64) : E25.isTexture ? console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.") : console.warn("THREE.WebGLRenderer: Unsupported uniform value type.", E25), b35;
  }
  function m34(E25) {
    const b35 = E25.target;
    b35.removeEventListener("dispose", m34);
    const w31 = r24.indexOf(b35.__bindingPointIndex);
    r24.splice(w31, 1), a22.deleteBuffer(i27[b35.id]), delete i27[b35.id], delete s18[b35.id];
  }
  function f40() {
    for (const E25 in i27)
      a22.deleteBuffer(i27[E25]);
    r24 = [], i27 = {}, s18 = {};
  }
  return {
    bind: c27,
    update: l26,
    dispose: f40
  };
}
function u0() {
  const a22 = nr3("canvas");
  return a22.style.display = "block", a22;
}
var Ia = class {
  constructor(e11 = {}) {
    const {
      canvas: t19 = u0(),
      context: n33 = null,
      depth: i27 = true,
      stencil: s18 = true,
      alpha: r24 = false,
      antialias: o13 = false,
      premultipliedAlpha: c27 = true,
      preserveDrawingBuffer: l26 = false,
      powerPreference: u35 = "default",
      failIfMajorPerformanceCaveat: h26 = false
    } = e11;
    this.isWebGLRenderer = true;
    let d34;
    n33 !== null ? d34 = n33.getContextAttributes().alpha : d34 = r24;
    let p26 = null, g32 = null;
    const y34 = [], m34 = [];
    this.domElement = t19, this.debug = {
      /**
       * Enables error checking and reporting when shader programs are being compiled
       * @type {boolean}
       */
      checkShaderErrors: true,
      /**
       * Callback for custom error reporting.
       * @type {?Function}
       */
      onShaderError: null
    }, this.autoClear = true, this.autoClearColor = true, this.autoClearDepth = true, this.autoClearStencil = true, this.sortObjects = true, this.clippingPlanes = [], this.localClippingEnabled = false, this.outputEncoding = Ci, this.useLegacyLights = true, this.toneMapping = Wn3, this.toneMappingExposure = 1;
    const f40 = this;
    let E25 = false, b35 = 0, w31 = 0, S23 = null, D18 = -1, N22 = null;
    const I18 = new gt6(), v31 = new gt6();
    let L12 = null, G16 = t19.width, B22 = t19.height, k29 = 1, V16 = null, H16 = null;
    const W11 = new gt6(0, 0, G16, B22), te7 = new gt6(0, 0, G16, B22);
    let J12 = false;
    const ie8 = new Ra();
    let le7 = false, me9 = false, he8 = null;
    const j19 = new Ve4(), X14 = new U9(), ee7 = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };
    function $25() {
      return S23 === null ? k29 : 1;
    }
    let z21 = n33;
    function be7(R22, K16) {
      for (let ne8 = 0; ne8 < R22.length; ne8++) {
        const q14 = R22[ne8], oe7 = t19.getContext(q14, K16);
        if (oe7 !== null)
          return oe7;
      }
      return null;
    }
    try {
      const R22 = {
        alpha: true,
        depth: i27,
        stencil: s18,
        antialias: o13,
        premultipliedAlpha: c27,
        preserveDrawingBuffer: l26,
        powerPreference: u35,
        failIfMajorPerformanceCaveat: h26
      };
      if ("setAttribute" in t19 && t19.setAttribute("data-engine", `three.js r${Ea}`), t19.addEventListener("webglcontextlost", Ce7, false), t19.addEventListener("webglcontextrestored", Ge7, false), t19.addEventListener("webglcontextcreationerror", Xe7, false), z21 === null) {
        const K16 = ["webgl2", "webgl", "experimental-webgl"];
        if (f40.isWebGL1Renderer === true && K16.shift(), z21 = be7(K16, R22), z21 === null)
          throw be7(K16) ? new Error("Error creating WebGL context with your selected attributes.") : new Error("Error creating WebGL context.");
      }
      z21.getShaderPrecisionFormat === void 0 && (z21.getShaderPrecisionFormat = function() {
        return { rangeMin: 1, rangeMax: 1, precision: 1 };
      });
    } catch (R22) {
      throw console.error("THREE.WebGLRenderer: " + R22.message), R22;
    }
    let Ee5, pe8, ke7, nt17, Ie7, je7, bt10, xt8, St9, wt10, et15, ct12, kt10, P20, C21, Q12, de9, fe7, _e7, O20, ae7, Z12, ye7, Te7;
    function Le7() {
      Ee5 = new bm(z21), pe8 = new mm(z21, Ee5, e11), Ee5.init(pe8), Z12 = new i0(z21, Ee5, pe8), ke7 = new t0(z21, Ee5, pe8), nt17 = new wm(), Ie7 = new Vg(), je7 = new n0(z21, Ee5, ke7, Ie7, pe8, Z12, nt17), bt10 = new _m(f40), xt8 = new vm(f40), St9 = new Ud(z21, pe8), ye7 = new fm(z21, Ee5, St9, pe8), wt10 = new Mm(z21, St9, nt17, ye7), et15 = new Cm(z21, wt10, St9, nt17), _e7 = new Em(z21, pe8, je7), Q12 = new gm(Ie7), ct12 = new Bg(f40, bt10, xt8, Ee5, pe8, ye7, Q12), kt10 = new l0(f40, Ie7), P20 = new Hg(), C21 = new Yg(Ee5, pe8), fe7 = new dm(f40, bt10, xt8, ke7, et15, d34, c27), de9 = new e0(f40, et15, pe8), Te7 = new c0(z21, nt17, pe8, ke7), O20 = new pm(z21, Ee5, nt17, pe8), ae7 = new Sm(z21, Ee5, nt17, pe8), nt17.programs = ct12.programs, f40.capabilities = pe8, f40.extensions = Ee5, f40.properties = Ie7, f40.renderLists = P20, f40.shadowMap = de9, f40.state = ke7, f40.info = nt17;
    }
    Le7();
    const Me7 = new a0(f40, z21);
    this.xr = Me7, this.getContext = function() {
      return z21;
    }, this.getContextAttributes = function() {
      return z21.getContextAttributes();
    }, this.forceContextLoss = function() {
      const R22 = Ee5.get("WEBGL_lose_context");
      R22 && R22.loseContext();
    }, this.forceContextRestore = function() {
      const R22 = Ee5.get("WEBGL_lose_context");
      R22 && R22.restoreContext();
    }, this.getPixelRatio = function() {
      return k29;
    }, this.setPixelRatio = function(R22) {
      R22 !== void 0 && (k29 = R22, this.setSize(G16, B22, false));
    }, this.getSize = function(R22) {
      return R22.set(G16, B22);
    }, this.setSize = function(R22, K16, ne8 = true) {
      if (Me7.isPresenting) {
        console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");
        return;
      }
      G16 = R22, B22 = K16, t19.width = Math.floor(R22 * k29), t19.height = Math.floor(K16 * k29), ne8 === true && (t19.style.width = R22 + "px", t19.style.height = K16 + "px"), this.setViewport(0, 0, R22, K16);
    }, this.getDrawingBufferSize = function(R22) {
      return R22.set(G16 * k29, B22 * k29).floor();
    }, this.setDrawingBufferSize = function(R22, K16, ne8) {
      G16 = R22, B22 = K16, k29 = ne8, t19.width = Math.floor(R22 * ne8), t19.height = Math.floor(K16 * ne8), this.setViewport(0, 0, R22, K16);
    }, this.getCurrentViewport = function(R22) {
      return R22.copy(I18);
    }, this.getViewport = function(R22) {
      return R22.copy(W11);
    }, this.setViewport = function(R22, K16, ne8, q14) {
      R22.isVector4 ? W11.set(R22.x, R22.y, R22.z, R22.w) : W11.set(R22, K16, ne8, q14), ke7.viewport(I18.copy(W11).multiplyScalar(k29).floor());
    }, this.getScissor = function(R22) {
      return R22.copy(te7);
    }, this.setScissor = function(R22, K16, ne8, q14) {
      R22.isVector4 ? te7.set(R22.x, R22.y, R22.z, R22.w) : te7.set(R22, K16, ne8, q14), ke7.scissor(v31.copy(te7).multiplyScalar(k29).floor());
    }, this.getScissorTest = function() {
      return J12;
    }, this.setScissorTest = function(R22) {
      ke7.setScissorTest(J12 = R22);
    }, this.setOpaqueSort = function(R22) {
      V16 = R22;
    }, this.setTransparentSort = function(R22) {
      H16 = R22;
    }, this.getClearColor = function(R22) {
      return R22.copy(fe7.getClearColor());
    }, this.setClearColor = function() {
      fe7.setClearColor.apply(fe7, arguments);
    }, this.getClearAlpha = function() {
      return fe7.getClearAlpha();
    }, this.setClearAlpha = function() {
      fe7.setClearAlpha.apply(fe7, arguments);
    }, this.clear = function(R22 = true, K16 = true, ne8 = true) {
      let q14 = 0;
      R22 && (q14 |= 16384), K16 && (q14 |= 256), ne8 && (q14 |= 1024), z21.clear(q14);
    }, this.clearColor = function() {
      this.clear(true, false, false);
    }, this.clearDepth = function() {
      this.clear(false, true, false);
    }, this.clearStencil = function() {
      this.clear(false, false, true);
    }, this.dispose = function() {
      t19.removeEventListener("webglcontextlost", Ce7, false), t19.removeEventListener("webglcontextrestored", Ge7, false), t19.removeEventListener("webglcontextcreationerror", Xe7, false), P20.dispose(), C21.dispose(), Ie7.dispose(), bt10.dispose(), xt8.dispose(), et15.dispose(), ye7.dispose(), Te7.dispose(), ct12.dispose(), Me7.dispose(), Me7.removeEventListener("sessionstart", De6), Me7.removeEventListener("sessionend", pt12), he8 && (he8.dispose(), he8 = null), vt9.stop();
    };
    function Ce7(R22) {
      R22.preventDefault(), console.log("THREE.WebGLRenderer: Context Lost."), E25 = true;
    }
    function Ge7() {
      console.log("THREE.WebGLRenderer: Context Restored."), E25 = false;
      const R22 = nt17.autoReset, K16 = de9.enabled, ne8 = de9.autoUpdate, q14 = de9.needsUpdate, oe7 = de9.type;
      Le7(), nt17.autoReset = R22, de9.enabled = K16, de9.autoUpdate = ne8, de9.needsUpdate = q14, de9.type = oe7;
    }
    function Xe7(R22) {
      console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ", R22.statusMessage);
    }
    function Mt10(R22) {
      const K16 = R22.target;
      K16.removeEventListener("dispose", Mt10), F19(K16);
    }
    function F19(R22) {
      se6(R22), Ie7.remove(R22);
    }
    function se6(R22) {
      const K16 = Ie7.get(R22).programs;
      K16 !== void 0 && (K16.forEach(function(ne8) {
        ct12.releaseProgram(ne8);
      }), R22.isShaderMaterial && ct12.releaseShaderCache(R22));
    }
    this.renderBufferDirect = function(R22, K16, ne8, q14, oe7, Ue7) {
      K16 === null && (K16 = ee7);
      const Be7 = oe7.isMesh && oe7.matrixWorld.determinant() < 0, He8 = vo2(R22, K16, ne8, q14, oe7);
      ke7.setMaterial(q14, Be7);
      let qe8 = ne8.index, Ke7 = 1;
      q14.wireframe === true && (qe8 = wt10.getWireframeAttribute(ne8), Ke7 = 2);
      const Ye7 = ne8.drawRange, Ze7 = ne8.attributes.position;
      let at11 = Ye7.start * Ke7, ut12 = (Ye7.start + Ye7.count) * Ke7;
      Ue7 !== null && (at11 = Math.max(at11, Ue7.start * Ke7), ut12 = Math.min(ut12, (Ue7.start + Ue7.count) * Ke7)), qe8 !== null ? (at11 = Math.max(at11, 0), ut12 = Math.min(ut12, qe8.count)) : Ze7 != null && (at11 = Math.max(at11, 0), ut12 = Math.min(ut12, Ze7.count));
      const Ot10 = ut12 - at11;
      if (Ot10 < 0 || Ot10 === 1 / 0)
        return;
      ye7.setup(oe7, q14, He8, ne8, qe8);
      let _n6, Tt9 = O20;
      if (qe8 !== null && (_n6 = St9.get(qe8), Tt9 = ae7, Tt9.setIndex(_n6)), oe7.isMesh)
        q14.wireframe === true ? (ke7.setLineWidth(q14.wireframeLinewidth * $25()), Tt9.setMode(1)) : Tt9.setMode(4);
      else if (oe7.isLine) {
        let $e6 = q14.linewidth;
        $e6 === void 0 && ($e6 = 1), ke7.setLineWidth($e6 * $25()), oe7.isLineSegments ? Tt9.setMode(1) : oe7.isLineLoop ? Tt9.setMode(2) : Tt9.setMode(3);
      } else
        oe7.isPoints ? Tt9.setMode(0) : oe7.isSprite && Tt9.setMode(4);
      if (oe7.isInstancedMesh)
        Tt9.renderInstances(at11, Ot10, oe7.count);
      else if (ne8.isInstancedBufferGeometry) {
        const $e6 = ne8._maxInstanceCount !== void 0 ? ne8._maxInstanceCount : 1 / 0, Vi5 = Math.min(ne8.instanceCount, $e6);
        Tt9.renderInstances(at11, Ot10, Vi5);
      } else
        Tt9.render(at11, Ot10);
    }, this.compile = function(R22, K16) {
      function ne8(q14, oe7, Ue7) {
        q14.transparent === true && q14.side === fn3 && q14.forceSinglePass === false ? (q14.side = sn3, q14.needsUpdate = true, Bi4(q14, oe7, Ue7), q14.side = Pn3, q14.needsUpdate = true, Bi4(q14, oe7, Ue7), q14.side = fn3) : Bi4(q14, oe7, Ue7);
      }
      g32 = C21.get(R22), g32.init(), m34.push(g32), R22.traverseVisible(function(q14) {
        q14.isLight && q14.layers.test(K16.layers) && (g32.pushLight(q14), q14.castShadow && g32.pushShadow(q14));
      }), g32.setupLights(f40.useLegacyLights), R22.traverse(function(q14) {
        const oe7 = q14.material;
        if (oe7)
          if (Array.isArray(oe7))
            for (let Ue7 = 0; Ue7 < oe7.length; Ue7++) {
              const Be7 = oe7[Ue7];
              ne8(Be7, R22, q14);
            }
          else
            ne8(oe7, R22, q14);
      }), m34.pop(), g32 = null;
    };
    let ue8 = null;
    function Se7(R22) {
      ue8 && ue8(R22);
    }
    function De6() {
      vt9.stop();
    }
    function pt12() {
      vt9.start();
    }
    const vt9 = new xu();
    vt9.setAnimationLoop(Se7), typeof self < "u" && vt9.setContext(self), this.setAnimationLoop = function(R22) {
      ue8 = R22, Me7.setAnimationLoop(R22), R22 === null ? vt9.stop() : vt9.start();
    }, Me7.addEventListener("sessionstart", De6), Me7.addEventListener("sessionend", pt12), this.render = function(R22, K16) {
      if (K16 !== void 0 && K16.isCamera !== true) {
        console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
        return;
      }
      if (E25 === true)
        return;
      R22.matrixWorldAutoUpdate === true && R22.updateMatrixWorld(), K16.parent === null && K16.matrixWorldAutoUpdate === true && K16.updateMatrixWorld(), Me7.enabled === true && Me7.isPresenting === true && (Me7.cameraAutoUpdate === true && Me7.updateCamera(K16), K16 = Me7.getCamera()), R22.isScene === true && R22.onBeforeRender(f40, R22, K16, S23), g32 = C21.get(R22, m34.length), g32.init(), m34.push(g32), j19.multiplyMatrices(K16.projectionMatrix, K16.matrixWorldInverse), ie8.setFromProjectionMatrix(j19), me9 = this.localClippingEnabled, le7 = Q12.init(this.clippingPlanes, me9), p26 = P20.get(R22, y34.length), p26.init(), y34.push(p26), It7(R22, K16, 0, f40.sortObjects), p26.finish(), f40.sortObjects === true && p26.sort(V16, H16), le7 === true && Q12.beginShadows();
      const ne8 = g32.state.shadowsArray;
      if (de9.render(ne8, R22, K16), le7 === true && Q12.endShadows(), this.info.autoReset === true && this.info.reset(), fe7.render(p26, R22), g32.setupLights(f40.useLegacyLights), K16.isArrayCamera) {
        const q14 = K16.cameras;
        for (let oe7 = 0, Ue7 = q14.length; oe7 < Ue7; oe7++) {
          const Be7 = q14[oe7];
          Tn6(p26, R22, Be7, Be7.viewport);
        }
      } else
        Tn6(p26, R22, K16);
      S23 !== null && (je7.updateMultisampleRenderTarget(S23), je7.updateRenderTargetMipmap(S23)), R22.isScene === true && R22.onAfterRender(f40, R22, K16), ye7.resetDefaultState(), D18 = -1, N22 = null, m34.pop(), m34.length > 0 ? g32 = m34[m34.length - 1] : g32 = null, y34.pop(), y34.length > 0 ? p26 = y34[y34.length - 1] : p26 = null;
    };
    function It7(R22, K16, ne8, q14) {
      if (R22.visible === false)
        return;
      if (R22.layers.test(K16.layers)) {
        if (R22.isGroup)
          ne8 = R22.renderOrder;
        else if (R22.isLOD)
          R22.autoUpdate === true && R22.update(K16);
        else if (R22.isLight)
          g32.pushLight(R22), R22.castShadow && g32.pushShadow(R22);
        else if (R22.isSprite) {
          if (!R22.frustumCulled || ie8.intersectsSprite(R22)) {
            q14 && X14.setFromMatrixPosition(R22.matrixWorld).applyMatrix4(j19);
            const Be7 = et15.update(R22), He8 = R22.material;
            He8.visible && p26.push(R22, Be7, He8, ne8, X14.z, null);
          }
        } else if ((R22.isMesh || R22.isLine || R22.isPoints) && (R22.isSkinnedMesh && R22.skeleton.frame !== nt17.render.frame && (R22.skeleton.update(), R22.skeleton.frame = nt17.render.frame), !R22.frustumCulled || ie8.intersectsObject(R22))) {
          q14 && X14.setFromMatrixPosition(R22.matrixWorld).applyMatrix4(j19);
          const Be7 = et15.update(R22), He8 = R22.material;
          if (Array.isArray(He8)) {
            const qe8 = Be7.groups;
            for (let Ke7 = 0, Ye7 = qe8.length; Ke7 < Ye7; Ke7++) {
              const Ze7 = qe8[Ke7], at11 = He8[Ze7.materialIndex];
              at11 && at11.visible && p26.push(R22, Be7, at11, ne8, X14.z, Ze7);
            }
          } else
            He8.visible && p26.push(R22, Be7, He8, ne8, X14.z, null);
        }
      }
      const Ue7 = R22.children;
      for (let Be7 = 0, He8 = Ue7.length; Be7 < He8; Be7++)
        It7(Ue7[Be7], K16, ne8, q14);
    }
    function Tn6(R22, K16, ne8, q14) {
      const oe7 = R22.opaque, Ue7 = R22.transmissive, Be7 = R22.transparent;
      g32.setupLightsView(ne8), le7 === true && Q12.setGlobalState(f40.clippingPlanes, ne8), Ue7.length > 0 && it16(oe7, Ue7, K16, ne8), q14 && ke7.viewport(I18.copy(q14)), oe7.length > 0 && $t9(oe7, K16, ne8), Ue7.length > 0 && $t9(Ue7, K16, ne8), Be7.length > 0 && $t9(Be7, K16, ne8), ke7.buffers.depth.setTest(true), ke7.buffers.depth.setMask(true), ke7.buffers.color.setMask(true), ke7.setPolygonOffset(false);
    }
    function it16(R22, K16, ne8, q14) {
      if (he8 === null) {
        const He8 = pe8.isWebGL2;
        he8 = new Li(1024, 1024, {
          generateMipmaps: true,
          type: Ee5.has("EXT_color_buffer_half_float") ? Qs : Ei3,
          minFilter: jn3,
          samples: He8 && o13 === true ? 4 : 0
        });
      }
      const oe7 = f40.getRenderTarget();
      f40.setRenderTarget(he8), f40.clear();
      const Ue7 = f40.toneMapping;
      f40.toneMapping = Wn3, $t9(R22, ne8, q14), je7.updateMultisampleRenderTarget(he8), je7.updateRenderTargetMipmap(he8);
      let Be7 = false;
      for (let He8 = 0, qe8 = K16.length; He8 < qe8; He8++) {
        const Ke7 = K16[He8], Ye7 = Ke7.object, Ze7 = Ke7.geometry, at11 = Ke7.material, ut12 = Ke7.group;
        if (at11.side === fn3 && Ye7.layers.test(q14.layers)) {
          const Ot10 = at11.side;
          at11.side = sn3, at11.needsUpdate = true, cn3(Ye7, ne8, q14, Ze7, at11, ut12), at11.side = Ot10, at11.needsUpdate = true, Be7 = true;
        }
      }
      Be7 === true && (je7.updateMultisampleRenderTarget(he8), je7.updateRenderTargetMipmap(he8)), f40.setRenderTarget(oe7), f40.toneMapping = Ue7;
    }
    function $t9(R22, K16, ne8) {
      const q14 = K16.isScene === true ? K16.overrideMaterial : null;
      for (let oe7 = 0, Ue7 = R22.length; oe7 < Ue7; oe7++) {
        const Be7 = R22[oe7], He8 = Be7.object, qe8 = Be7.geometry, Ke7 = q14 === null ? Be7.material : q14, Ye7 = Be7.group;
        He8.layers.test(ne8.layers) && cn3(He8, K16, ne8, qe8, Ke7, Ye7);
      }
    }
    function cn3(R22, K16, ne8, q14, oe7, Ue7) {
      R22.onBeforeRender(f40, K16, ne8, q14, oe7, Ue7), R22.modelViewMatrix.multiplyMatrices(ne8.matrixWorldInverse, R22.matrixWorld), R22.normalMatrix.getNormalMatrix(R22.modelViewMatrix), oe7.onBeforeRender(f40, K16, ne8, q14, R22, Ue7), oe7.transparent === true && oe7.side === fn3 && oe7.forceSinglePass === false ? (oe7.side = sn3, oe7.needsUpdate = true, f40.renderBufferDirect(ne8, K16, q14, oe7, R22, Ue7), oe7.side = Pn3, oe7.needsUpdate = true, f40.renderBufferDirect(ne8, K16, q14, oe7, R22, Ue7), oe7.side = fn3) : f40.renderBufferDirect(ne8, K16, q14, oe7, R22, Ue7), R22.onAfterRender(f40, K16, ne8, q14, oe7, Ue7);
    }
    function Bi4(R22, K16, ne8) {
      K16.isScene !== true && (K16 = ee7);
      const q14 = Ie7.get(R22), oe7 = g32.state.lights, Ue7 = g32.state.shadowsArray, Be7 = oe7.state.version, He8 = ct12.getParameters(R22, oe7.state, Ue7, K16, ne8), qe8 = ct12.getProgramCacheKey(He8);
      let Ke7 = q14.programs;
      q14.environment = R22.isMeshStandardMaterial ? K16.environment : null, q14.fog = K16.fog, q14.envMap = (R22.isMeshStandardMaterial ? xt8 : bt10).get(R22.envMap || q14.environment), Ke7 === void 0 && (R22.addEventListener("dispose", Mt10), Ke7 = /* @__PURE__ */ new Map(), q14.programs = Ke7);
      let Ye7 = Ke7.get(qe8);
      if (Ye7 !== void 0) {
        if (q14.currentProgram === Ye7 && q14.lightsStateVersion === Be7)
          return pr6(R22, He8), Ye7;
      } else
        He8.uniforms = ct12.getUniforms(R22), R22.onBuild(ne8, He8, f40), R22.onBeforeCompile(He8, f40), Ye7 = ct12.acquireProgram(He8, qe8), Ke7.set(qe8, Ye7), q14.uniforms = He8.uniforms;
      const Ze7 = q14.uniforms;
      (!R22.isShaderMaterial && !R22.isRawShaderMaterial || R22.clipping === true) && (Ze7.clippingPlanes = Q12.uniform), pr6(R22, He8), q14.needsLights = Mo2(R22), q14.lightsStateVersion = Be7, q14.needsLights && (Ze7.ambientLightColor.value = oe7.state.ambient, Ze7.lightProbe.value = oe7.state.probe, Ze7.directionalLights.value = oe7.state.directional, Ze7.directionalLightShadows.value = oe7.state.directionalShadow, Ze7.spotLights.value = oe7.state.spot, Ze7.spotLightShadows.value = oe7.state.spotShadow, Ze7.rectAreaLights.value = oe7.state.rectArea, Ze7.ltc_1.value = oe7.state.rectAreaLTC1, Ze7.ltc_2.value = oe7.state.rectAreaLTC2, Ze7.pointLights.value = oe7.state.point, Ze7.pointLightShadows.value = oe7.state.pointShadow, Ze7.hemisphereLights.value = oe7.state.hemi, Ze7.directionalShadowMap.value = oe7.state.directionalShadowMap, Ze7.directionalShadowMatrix.value = oe7.state.directionalShadowMatrix, Ze7.spotShadowMap.value = oe7.state.spotShadowMap, Ze7.spotLightMatrix.value = oe7.state.spotLightMatrix, Ze7.spotLightMap.value = oe7.state.spotLightMap, Ze7.pointShadowMap.value = oe7.state.pointShadowMap, Ze7.pointShadowMatrix.value = oe7.state.pointShadowMatrix);
      const at11 = Ye7.getUniforms(), ut12 = eo.seqWithValue(at11.seq, Ze7);
      return q14.currentProgram = Ye7, q14.uniformsList = ut12, Ye7;
    }
    function pr6(R22, K16) {
      const ne8 = Ie7.get(R22);
      ne8.outputEncoding = K16.outputEncoding, ne8.instancing = K16.instancing, ne8.skinning = K16.skinning, ne8.morphTargets = K16.morphTargets, ne8.morphNormals = K16.morphNormals, ne8.morphColors = K16.morphColors, ne8.morphTargetsCount = K16.morphTargetsCount, ne8.numClippingPlanes = K16.numClippingPlanes, ne8.numIntersection = K16.numClipIntersection, ne8.vertexAlphas = K16.vertexAlphas, ne8.vertexTangents = K16.vertexTangents, ne8.toneMapping = K16.toneMapping;
    }
    function vo2(R22, K16, ne8, q14, oe7) {
      K16.isScene !== true && (K16 = ee7), je7.resetTextureUnits();
      const Ue7 = K16.fog, Be7 = q14.isMeshStandardMaterial ? K16.environment : null, He8 = S23 === null ? f40.outputEncoding : S23.isXRRenderTarget === true ? S23.texture.encoding : Ci, qe8 = (q14.isMeshStandardMaterial ? xt8 : bt10).get(q14.envMap || Be7), Ke7 = q14.vertexColors === true && !!ne8.attributes.color && ne8.attributes.color.itemSize === 4, Ye7 = !!q14.normalMap && !!ne8.attributes.tangent, Ze7 = !!ne8.morphAttributes.position, at11 = !!ne8.morphAttributes.normal, ut12 = !!ne8.morphAttributes.color, Ot10 = q14.toneMapped ? f40.toneMapping : Wn3, _n6 = ne8.morphAttributes.position || ne8.morphAttributes.normal || ne8.morphAttributes.color, Tt9 = _n6 !== void 0 ? _n6.length : 0, $e6 = Ie7.get(q14), Vi5 = g32.state.lights;
      if (le7 === true && (me9 === true || R22 !== N22)) {
        const Qt7 = R22 === N22 && q14.id === D18;
        Q12.setState(q14, R22, Qt7);
      }
      let Lt7 = false;
      q14.version === $e6.__version ? ($e6.needsLights && $e6.lightsStateVersion !== Vi5.state.version || $e6.outputEncoding !== He8 || oe7.isInstancedMesh && $e6.instancing === false || !oe7.isInstancedMesh && $e6.instancing === true || oe7.isSkinnedMesh && $e6.skinning === false || !oe7.isSkinnedMesh && $e6.skinning === true || $e6.envMap !== qe8 || q14.fog === true && $e6.fog !== Ue7 || $e6.numClippingPlanes !== void 0 && ($e6.numClippingPlanes !== Q12.numPlanes || $e6.numIntersection !== Q12.numIntersection) || $e6.vertexAlphas !== Ke7 || $e6.vertexTangents !== Ye7 || $e6.morphTargets !== Ze7 || $e6.morphNormals !== at11 || $e6.morphColors !== ut12 || $e6.toneMapping !== Ot10 || pe8.isWebGL2 === true && $e6.morphTargetsCount !== Tt9) && (Lt7 = true) : (Lt7 = true, $e6.__version = q14.version);
      let Dn6 = $e6.currentProgram;
      Lt7 === true && (Dn6 = Bi4(q14, K16, oe7));
      let mr6 = false, Yn6 = false, Gi3 = false;
      const Et9 = Dn6.getUniforms(), Nn6 = $e6.uniforms;
      if (ke7.useProgram(Dn6.program) && (mr6 = true, Yn6 = true, Gi3 = true), q14.id !== D18 && (D18 = q14.id, Yn6 = true), mr6 || N22 !== R22) {
        if (Et9.setValue(z21, "projectionMatrix", R22.projectionMatrix), pe8.logarithmicDepthBuffer && Et9.setValue(
          z21,
          "logDepthBufFC",
          2 / (Math.log(R22.far + 1) / Math.LN2)
        ), N22 !== R22 && (N22 = R22, Yn6 = true, Gi3 = true), q14.isShaderMaterial || q14.isMeshPhongMaterial || q14.isMeshToonMaterial || q14.isMeshStandardMaterial || q14.envMap) {
          const Qt7 = Et9.map.cameraPosition;
          Qt7 !== void 0 && Qt7.setValue(
            z21,
            X14.setFromMatrixPosition(R22.matrixWorld)
          );
        }
        (q14.isMeshPhongMaterial || q14.isMeshToonMaterial || q14.isMeshLambertMaterial || q14.isMeshBasicMaterial || q14.isMeshStandardMaterial || q14.isShaderMaterial) && Et9.setValue(z21, "isOrthographic", R22.isOrthographicCamera === true), (q14.isMeshPhongMaterial || q14.isMeshToonMaterial || q14.isMeshLambertMaterial || q14.isMeshBasicMaterial || q14.isMeshStandardMaterial || q14.isShaderMaterial || q14.isShadowMaterial || oe7.isSkinnedMesh) && Et9.setValue(z21, "viewMatrix", R22.matrixWorldInverse);
      }
      if (oe7.isSkinnedMesh) {
        Et9.setOptional(z21, oe7, "bindMatrix"), Et9.setOptional(z21, oe7, "bindMatrixInverse");
        const Qt7 = oe7.skeleton;
        Qt7 && (pe8.floatVertexTextures ? (Qt7.boneTexture === null && Qt7.computeBoneTexture(), Et9.setValue(z21, "boneTexture", Qt7.boneTexture, je7), Et9.setValue(z21, "boneTextureSize", Qt7.boneTextureSize)) : console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."));
      }
      const Hi5 = ne8.morphAttributes;
      if ((Hi5.position !== void 0 || Hi5.normal !== void 0 || Hi5.color !== void 0 && pe8.isWebGL2 === true) && _e7.update(oe7, ne8, Dn6), (Yn6 || $e6.receiveShadow !== oe7.receiveShadow) && ($e6.receiveShadow = oe7.receiveShadow, Et9.setValue(z21, "receiveShadow", oe7.receiveShadow)), q14.isMeshGouraudMaterial && q14.envMap !== null && (Nn6.envMap.value = qe8, Nn6.flipEnvMap.value = qe8.isCubeTexture && qe8.isRenderTargetTexture === false ? -1 : 1), Yn6 && (Et9.setValue(z21, "toneMappingExposure", f40.toneMappingExposure), $e6.needsLights && bo2(Nn6, Gi3), Ue7 && q14.fog === true && kt10.refreshFogUniforms(Nn6, Ue7), kt10.refreshMaterialUniforms(Nn6, q14, k29, B22, he8), eo.upload(z21, $e6.uniformsList, Nn6, je7)), q14.isShaderMaterial && q14.uniformsNeedUpdate === true && (eo.upload(z21, $e6.uniformsList, Nn6, je7), q14.uniformsNeedUpdate = false), q14.isSpriteMaterial && Et9.setValue(z21, "center", oe7.center), Et9.setValue(z21, "modelViewMatrix", oe7.modelViewMatrix), Et9.setValue(z21, "normalMatrix", oe7.normalMatrix), Et9.setValue(z21, "modelMatrix", oe7.matrixWorld), q14.isShaderMaterial || q14.isRawShaderMaterial) {
        const Qt7 = q14.uniformsGroups;
        for (let Wi4 = 0, So2 = Qt7.length; Wi4 < So2; Wi4++)
          if (pe8.isWebGL2) {
            const gr7 = Qt7[Wi4];
            Te7.update(gr7, Dn6), Te7.bind(gr7, Dn6);
          } else
            console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");
      }
      return Dn6;
    }
    function bo2(R22, K16) {
      R22.ambientLightColor.needsUpdate = K16, R22.lightProbe.needsUpdate = K16, R22.directionalLights.needsUpdate = K16, R22.directionalLightShadows.needsUpdate = K16, R22.pointLights.needsUpdate = K16, R22.pointLightShadows.needsUpdate = K16, R22.spotLights.needsUpdate = K16, R22.spotLightShadows.needsUpdate = K16, R22.rectAreaLights.needsUpdate = K16, R22.hemisphereLights.needsUpdate = K16;
    }
    function Mo2(R22) {
      return R22.isMeshLambertMaterial || R22.isMeshToonMaterial || R22.isMeshPhongMaterial || R22.isMeshStandardMaterial || R22.isShadowMaterial || R22.isShaderMaterial && R22.lights === true;
    }
    this.getActiveCubeFace = function() {
      return b35;
    }, this.getActiveMipmapLevel = function() {
      return w31;
    }, this.getRenderTarget = function() {
      return S23;
    }, this.setRenderTargetTextures = function(R22, K16, ne8) {
      Ie7.get(R22.texture).__webglTexture = K16, Ie7.get(R22.depthTexture).__webglTexture = ne8;
      const q14 = Ie7.get(R22);
      q14.__hasExternalTextures = true, q14.__hasExternalTextures && (q14.__autoAllocateDepthBuffer = ne8 === void 0, q14.__autoAllocateDepthBuffer || Ee5.has("WEBGL_multisampled_render_to_texture") === true && (console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"), q14.__useRenderToTexture = false));
    }, this.setRenderTargetFramebuffer = function(R22, K16) {
      const ne8 = Ie7.get(R22);
      ne8.__webglFramebuffer = K16, ne8.__useDefaultFramebuffer = K16 === void 0;
    }, this.setRenderTarget = function(R22, K16 = 0, ne8 = 0) {
      S23 = R22, b35 = K16, w31 = ne8;
      let q14 = true, oe7 = null, Ue7 = false, Be7 = false;
      if (R22) {
        const qe8 = Ie7.get(R22);
        qe8.__useDefaultFramebuffer !== void 0 ? (ke7.bindFramebuffer(36160, null), q14 = false) : qe8.__webglFramebuffer === void 0 ? je7.setupRenderTarget(R22) : qe8.__hasExternalTextures && je7.rebindTextures(R22, Ie7.get(R22.texture).__webglTexture, Ie7.get(R22.depthTexture).__webglTexture);
        const Ke7 = R22.texture;
        (Ke7.isData3DTexture || Ke7.isDataArrayTexture || Ke7.isCompressedArrayTexture) && (Be7 = true);
        const Ye7 = Ie7.get(R22).__webglFramebuffer;
        R22.isWebGLCubeRenderTarget ? (oe7 = Ye7[K16], Ue7 = true) : pe8.isWebGL2 && R22.samples > 0 && je7.useMultisampledRTT(R22) === false ? oe7 = Ie7.get(R22).__webglMultisampledFramebuffer : oe7 = Ye7, I18.copy(R22.viewport), v31.copy(R22.scissor), L12 = R22.scissorTest;
      } else
        I18.copy(W11).multiplyScalar(k29).floor(), v31.copy(te7).multiplyScalar(k29).floor(), L12 = J12;
      if (ke7.bindFramebuffer(36160, oe7) && pe8.drawBuffers && q14 && ke7.drawBuffers(R22, oe7), ke7.viewport(I18), ke7.scissor(v31), ke7.setScissorTest(L12), Ue7) {
        const qe8 = Ie7.get(R22.texture);
        z21.framebufferTexture2D(36160, 36064, 34069 + K16, qe8.__webglTexture, ne8);
      } else if (Be7) {
        const qe8 = Ie7.get(R22.texture), Ke7 = K16 || 0;
        z21.framebufferTextureLayer(36160, 36064, qe8.__webglTexture, ne8 || 0, Ke7);
      }
      D18 = -1;
    }, this.readRenderTargetPixels = function(R22, K16, ne8, q14, oe7, Ue7, Be7) {
      if (!(R22 && R22.isWebGLRenderTarget)) {
        console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");
        return;
      }
      let He8 = Ie7.get(R22).__webglFramebuffer;
      if (R22.isWebGLCubeRenderTarget && Be7 !== void 0 && (He8 = He8[Be7]), He8) {
        ke7.bindFramebuffer(36160, He8);
        try {
          const qe8 = R22.texture, Ke7 = qe8.format, Ye7 = qe8.type;
          if (Ke7 !== pn3 && Z12.convert(Ke7) !== z21.getParameter(35739)) {
            console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
            return;
          }
          const Ze7 = Ye7 === Qs && (Ee5.has("EXT_color_buffer_half_float") || pe8.isWebGL2 && Ee5.has("EXT_color_buffer_float"));
          if (Ye7 !== Ei3 && Z12.convert(Ye7) !== z21.getParameter(35738) && // Edge and Chrome Mac < 52 (#9513)
          !(Ye7 === ai3 && (pe8.isWebGL2 || Ee5.has("OES_texture_float") || Ee5.has("WEBGL_color_buffer_float"))) && // Chrome Mac >= 52 and Firefox
          !Ze7) {
            console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");
            return;
          }
          K16 >= 0 && K16 <= R22.width - q14 && ne8 >= 0 && ne8 <= R22.height - oe7 && z21.readPixels(K16, ne8, q14, oe7, Z12.convert(Ke7), Z12.convert(Ye7), Ue7);
        } finally {
          const qe8 = S23 !== null ? Ie7.get(S23).__webglFramebuffer : null;
          ke7.bindFramebuffer(36160, qe8);
        }
      }
    }, this.copyFramebufferToTexture = function(R22, K16, ne8 = 0) {
      const q14 = Math.pow(2, -ne8), oe7 = Math.floor(K16.image.width * q14), Ue7 = Math.floor(K16.image.height * q14);
      je7.setTexture2D(K16, 0), z21.copyTexSubImage2D(3553, ne8, 0, 0, R22.x, R22.y, oe7, Ue7), ke7.unbindTexture();
    }, this.copyTextureToTexture = function(R22, K16, ne8, q14 = 0) {
      const oe7 = K16.image.width, Ue7 = K16.image.height, Be7 = Z12.convert(ne8.format), He8 = Z12.convert(ne8.type);
      je7.setTexture2D(ne8, 0), z21.pixelStorei(37440, ne8.flipY), z21.pixelStorei(37441, ne8.premultiplyAlpha), z21.pixelStorei(3317, ne8.unpackAlignment), K16.isDataTexture ? z21.texSubImage2D(3553, q14, R22.x, R22.y, oe7, Ue7, Be7, He8, K16.image.data) : K16.isCompressedTexture ? z21.compressedTexSubImage2D(3553, q14, R22.x, R22.y, K16.mipmaps[0].width, K16.mipmaps[0].height, Be7, K16.mipmaps[0].data) : z21.texSubImage2D(3553, q14, R22.x, R22.y, Be7, He8, K16.image), q14 === 0 && ne8.generateMipmaps && z21.generateMipmap(3553), ke7.unbindTexture();
    }, this.copyTextureToTexture3D = function(R22, K16, ne8, q14, oe7 = 0) {
      if (f40.isWebGL1Renderer) {
        console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");
        return;
      }
      const Ue7 = R22.max.x - R22.min.x + 1, Be7 = R22.max.y - R22.min.y + 1, He8 = R22.max.z - R22.min.z + 1, qe8 = Z12.convert(q14.format), Ke7 = Z12.convert(q14.type);
      let Ye7;
      if (q14.isData3DTexture)
        je7.setTexture3D(q14, 0), Ye7 = 32879;
      else if (q14.isDataArrayTexture)
        je7.setTexture2DArray(q14, 0), Ye7 = 35866;
      else {
        console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");
        return;
      }
      z21.pixelStorei(37440, q14.flipY), z21.pixelStorei(37441, q14.premultiplyAlpha), z21.pixelStorei(3317, q14.unpackAlignment);
      const Ze7 = z21.getParameter(3314), at11 = z21.getParameter(32878), ut12 = z21.getParameter(3316), Ot10 = z21.getParameter(3315), _n6 = z21.getParameter(32877), Tt9 = ne8.isCompressedTexture ? ne8.mipmaps[0] : ne8.image;
      z21.pixelStorei(3314, Tt9.width), z21.pixelStorei(32878, Tt9.height), z21.pixelStorei(3316, R22.min.x), z21.pixelStorei(3315, R22.min.y), z21.pixelStorei(32877, R22.min.z), ne8.isDataTexture || ne8.isData3DTexture ? z21.texSubImage3D(Ye7, oe7, K16.x, K16.y, K16.z, Ue7, Be7, He8, qe8, Ke7, Tt9.data) : ne8.isCompressedArrayTexture ? (console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."), z21.compressedTexSubImage3D(Ye7, oe7, K16.x, K16.y, K16.z, Ue7, Be7, He8, qe8, Tt9.data)) : z21.texSubImage3D(Ye7, oe7, K16.x, K16.y, K16.z, Ue7, Be7, He8, qe8, Ke7, Tt9), z21.pixelStorei(3314, Ze7), z21.pixelStorei(32878, at11), z21.pixelStorei(3316, ut12), z21.pixelStorei(3315, Ot10), z21.pixelStorei(32877, _n6), oe7 === 0 && q14.generateMipmaps && z21.generateMipmap(Ye7), ke7.unbindTexture();
    }, this.initTexture = function(R22) {
      R22.isCubeTexture ? je7.setTextureCube(R22, 0) : R22.isData3DTexture ? je7.setTexture3D(R22, 0) : R22.isDataArrayTexture || R22.isCompressedArrayTexture ? je7.setTexture2DArray(R22, 0) : je7.setTexture2D(R22, 0), ke7.unbindTexture();
    }, this.resetState = function() {
      b35 = 0, w31 = 0, S23 = null, ke7.reset(), ye7.reset();
    }, typeof __THREE_DEVTOOLS__ < "u" && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", { detail: this }));
  }
  get physicallyCorrectLights() {
    return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."), !this.useLegacyLights;
  }
  set physicallyCorrectLights(e11) {
    console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."), this.useLegacyLights = !e11;
  }
};
var h0 = class extends Ia {
};
h0.prototype.isWebGL1Renderer = true;
var Da = class extends _t4 {
  constructor() {
    super(), this.isScene = true, this.type = "Scene", this.background = null, this.environment = null, this.fog = null, this.backgroundBlurriness = 0, this.backgroundIntensity = 1, this.overrideMaterial = null, typeof __THREE_DEVTOOLS__ < "u" && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", { detail: this }));
  }
  copy(e11, t19) {
    return super.copy(e11, t19), e11.background !== null && (this.background = e11.background.clone()), e11.environment !== null && (this.environment = e11.environment.clone()), e11.fog !== null && (this.fog = e11.fog.clone()), this.backgroundBlurriness = e11.backgroundBlurriness, this.backgroundIntensity = e11.backgroundIntensity, e11.overrideMaterial !== null && (this.overrideMaterial = e11.overrideMaterial.clone()), this.matrixAutoUpdate = e11.matrixAutoUpdate, this;
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return this.fog !== null && (t19.object.fog = this.fog.toJSON()), this.backgroundBlurriness > 0 && (t19.object.backgroundBlurriness = this.backgroundBlurriness), this.backgroundIntensity !== 1 && (t19.object.backgroundIntensity = this.backgroundIntensity), t19;
  }
  get autoUpdate() {
    return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."), this.matrixWorldAutoUpdate;
  }
  set autoUpdate(e11) {
    console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."), this.matrixWorldAutoUpdate = e11;
  }
};
var d0 = class {
  constructor(e11, t19) {
    this.isInterleavedBuffer = true, this.array = e11, this.stride = t19, this.count = e11 !== void 0 ? e11.length / t19 : 0, this.usage = ga, this.updateRange = { offset: 0, count: -1 }, this.version = 0, this.uuid = Sn3();
  }
  onUploadCallback() {
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
  setUsage(e11) {
    return this.usage = e11, this;
  }
  copy(e11) {
    return this.array = new e11.array.constructor(e11.array), this.count = e11.count, this.stride = e11.stride, this.usage = e11.usage, this;
  }
  copyAt(e11, t19, n33) {
    e11 *= this.stride, n33 *= t19.stride;
    for (let i27 = 0, s18 = this.stride; i27 < s18; i27++)
      this.array[e11 + i27] = t19.array[n33 + i27];
    return this;
  }
  set(e11, t19 = 0) {
    return this.array.set(e11, t19), this;
  }
  clone(e11) {
    e11.arrayBuffers === void 0 && (e11.arrayBuffers = {}), this.array.buffer._uuid === void 0 && (this.array.buffer._uuid = Sn3()), e11.arrayBuffers[this.array.buffer._uuid] === void 0 && (e11.arrayBuffers[this.array.buffer._uuid] = this.array.slice(0).buffer);
    const t19 = new this.array.constructor(e11.arrayBuffers[this.array.buffer._uuid]), n33 = new this.constructor(t19, this.stride);
    return n33.setUsage(this.usage), n33;
  }
  onUpload(e11) {
    return this.onUploadCallback = e11, this;
  }
  toJSON(e11) {
    return e11.arrayBuffers === void 0 && (e11.arrayBuffers = {}), this.array.buffer._uuid === void 0 && (this.array.buffer._uuid = Sn3()), e11.arrayBuffers[this.array.buffer._uuid] === void 0 && (e11.arrayBuffers[this.array.buffer._uuid] = Array.from(new Uint32Array(this.array.buffer))), {
      uuid: this.uuid,
      buffer: this.array.buffer._uuid,
      type: this.array.constructor.name,
      stride: this.stride
    };
  }
};
var en3 = new U9();
var Na = class _Na {
  constructor(e11, t19, n33, i27 = false) {
    this.isInterleavedBufferAttribute = true, this.name = "", this.data = e11, this.itemSize = t19, this.offset = n33, this.normalized = i27;
  }
  get count() {
    return this.data.count;
  }
  get array() {
    return this.data.array;
  }
  set needsUpdate(e11) {
    this.data.needsUpdate = e11;
  }
  applyMatrix4(e11) {
    for (let t19 = 0, n33 = this.data.count; t19 < n33; t19++)
      en3.fromBufferAttribute(this, t19), en3.applyMatrix4(e11), this.setXYZ(t19, en3.x, en3.y, en3.z);
    return this;
  }
  applyNormalMatrix(e11) {
    for (let t19 = 0, n33 = this.count; t19 < n33; t19++)
      en3.fromBufferAttribute(this, t19), en3.applyNormalMatrix(e11), this.setXYZ(t19, en3.x, en3.y, en3.z);
    return this;
  }
  transformDirection(e11) {
    for (let t19 = 0, n33 = this.count; t19 < n33; t19++)
      en3.fromBufferAttribute(this, t19), en3.transformDirection(e11), this.setXYZ(t19, en3.x, en3.y, en3.z);
    return this;
  }
  setX(e11, t19) {
    return this.normalized && (t19 = mt6(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset] = t19, this;
  }
  setY(e11, t19) {
    return this.normalized && (t19 = mt6(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset + 1] = t19, this;
  }
  setZ(e11, t19) {
    return this.normalized && (t19 = mt6(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset + 2] = t19, this;
  }
  setW(e11, t19) {
    return this.normalized && (t19 = mt6(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset + 3] = t19, this;
  }
  getX(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  getY(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset + 1];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  getZ(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset + 2];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  getW(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset + 3];
    return this.normalized && (t19 = Hn3(t19, this.array)), t19;
  }
  setXY(e11, t19, n33) {
    return e11 = e11 * this.data.stride + this.offset, this.normalized && (t19 = mt6(t19, this.array), n33 = mt6(n33, this.array)), this.data.array[e11 + 0] = t19, this.data.array[e11 + 1] = n33, this;
  }
  setXYZ(e11, t19, n33, i27) {
    return e11 = e11 * this.data.stride + this.offset, this.normalized && (t19 = mt6(t19, this.array), n33 = mt6(n33, this.array), i27 = mt6(i27, this.array)), this.data.array[e11 + 0] = t19, this.data.array[e11 + 1] = n33, this.data.array[e11 + 2] = i27, this;
  }
  setXYZW(e11, t19, n33, i27, s18) {
    return e11 = e11 * this.data.stride + this.offset, this.normalized && (t19 = mt6(t19, this.array), n33 = mt6(n33, this.array), i27 = mt6(i27, this.array), s18 = mt6(s18, this.array)), this.data.array[e11 + 0] = t19, this.data.array[e11 + 1] = n33, this.data.array[e11 + 2] = i27, this.data.array[e11 + 3] = s18, this;
  }
  clone(e11) {
    if (e11 === void 0) {
      console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");
      const t19 = [];
      for (let n33 = 0; n33 < this.count; n33++) {
        const i27 = n33 * this.data.stride + this.offset;
        for (let s18 = 0; s18 < this.itemSize; s18++)
          t19.push(this.data.array[i27 + s18]);
      }
      return new Gt3(new this.array.constructor(t19), this.itemSize, this.normalized);
    } else
      return e11.interleavedBuffers === void 0 && (e11.interleavedBuffers = {}), e11.interleavedBuffers[this.data.uuid] === void 0 && (e11.interleavedBuffers[this.data.uuid] = this.data.clone(e11)), new _Na(e11.interleavedBuffers[this.data.uuid], this.itemSize, this.offset, this.normalized);
  }
  toJSON(e11) {
    if (e11 === void 0) {
      console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");
      const t19 = [];
      for (let n33 = 0; n33 < this.count; n33++) {
        const i27 = n33 * this.data.stride + this.offset;
        for (let s18 = 0; s18 < this.itemSize; s18++)
          t19.push(this.data.array[i27 + s18]);
      }
      return {
        itemSize: this.itemSize,
        type: this.array.constructor.name,
        array: t19,
        normalized: this.normalized
      };
    } else
      return e11.interleavedBuffers === void 0 && (e11.interleavedBuffers = {}), e11.interleavedBuffers[this.data.uuid] === void 0 && (e11.interleavedBuffers[this.data.uuid] = this.data.toJSON(e11)), {
        isInterleavedBufferAttribute: true,
        itemSize: this.itemSize,
        data: this.data.uuid,
        offset: this.offset,
        normalized: this.normalized
      };
  }
};
var gc = new U9();
var _c = new gt6();
var xc = new gt6();
var f0 = new U9();
var yc = new Ve4();
var us = new U9();
var Su = class extends Pt5 {
  constructor(e11, t19) {
    super(e11, t19), this.isSkinnedMesh = true, this.type = "SkinnedMesh", this.bindMode = "attached", this.bindMatrix = new Ve4(), this.bindMatrixInverse = new Ve4(), this.boundingBox = null, this.boundingSphere = null;
  }
  computeBoundingBox() {
    const e11 = this.geometry;
    this.boundingBox === null && (this.boundingBox = new qn3()), this.boundingBox.makeEmpty();
    const t19 = e11.getAttribute("position");
    for (let n33 = 0; n33 < t19.count; n33++)
      us.fromBufferAttribute(t19, n33), this.applyBoneTransform(n33, us), this.boundingBox.expandByPoint(us);
  }
  computeBoundingSphere() {
    const e11 = this.geometry;
    this.boundingSphere === null && (this.boundingSphere = new Xn3()), this.boundingSphere.makeEmpty();
    const t19 = e11.getAttribute("position");
    for (let n33 = 0; n33 < t19.count; n33++)
      us.fromBufferAttribute(t19, n33), this.applyBoneTransform(n33, us), this.boundingSphere.expandByPoint(us);
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.bindMode = e11.bindMode, this.bindMatrix.copy(e11.bindMatrix), this.bindMatrixInverse.copy(e11.bindMatrixInverse), this.skeleton = e11.skeleton, this;
  }
  bind(e11, t19) {
    this.skeleton = e11, t19 === void 0 && (this.updateMatrixWorld(true), this.skeleton.calculateInverses(), t19 = this.matrixWorld), this.bindMatrix.copy(t19), this.bindMatrixInverse.copy(t19).invert();
  }
  pose() {
    this.skeleton.pose();
  }
  normalizeSkinWeights() {
    const e11 = new gt6(), t19 = this.geometry.attributes.skinWeight;
    for (let n33 = 0, i27 = t19.count; n33 < i27; n33++) {
      e11.fromBufferAttribute(t19, n33);
      const s18 = 1 / e11.manhattanLength();
      s18 !== 1 / 0 ? e11.multiplyScalar(s18) : e11.set(1, 0, 0, 0), t19.setXYZW(n33, e11.x, e11.y, e11.z, e11.w);
    }
  }
  updateMatrixWorld(e11) {
    super.updateMatrixWorld(e11), this.bindMode === "attached" ? this.bindMatrixInverse.copy(this.matrixWorld).invert() : this.bindMode === "detached" ? this.bindMatrixInverse.copy(this.bindMatrix).invert() : console.warn("THREE.SkinnedMesh: Unrecognized bindMode: " + this.bindMode);
  }
  applyBoneTransform(e11, t19) {
    const n33 = this.skeleton, i27 = this.geometry;
    _c.fromBufferAttribute(i27.attributes.skinIndex, e11), xc.fromBufferAttribute(i27.attributes.skinWeight, e11), gc.copy(t19).applyMatrix4(this.bindMatrix), t19.set(0, 0, 0);
    for (let s18 = 0; s18 < 4; s18++) {
      const r24 = xc.getComponent(s18);
      if (r24 !== 0) {
        const o13 = _c.getComponent(s18);
        yc.multiplyMatrices(n33.bones[o13].matrixWorld, n33.boneInverses[o13]), t19.addScaledVector(f0.copy(gc).applyMatrix4(yc), r24);
      }
    }
    return t19.applyMatrix4(this.bindMatrixInverse);
  }
  boneTransform(e11, t19) {
    return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."), this.applyBoneTransform(e11, t19);
  }
};
var Ua = class extends _t4 {
  constructor() {
    super(), this.isBone = true, this.type = "Bone";
  }
};
var wu = class extends jt4 {
  constructor(e11 = null, t19 = 1, n33 = 1, i27, s18, r24, o13, c27, l26 = Bt3, u35 = Bt3, h26, d34) {
    super(null, r24, o13, c27, l26, u35, i27, s18, h26, d34), this.isDataTexture = true, this.image = { data: e11, width: t19, height: n33 }, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1;
  }
};
var vc = new Ve4();
var p0 = new Ve4();
var po = class _po {
  constructor(e11 = [], t19 = []) {
    this.uuid = Sn3(), this.bones = e11.slice(0), this.boneInverses = t19, this.boneMatrices = null, this.boneTexture = null, this.boneTextureSize = 0, this.frame = -1, this.init();
  }
  init() {
    const e11 = this.bones, t19 = this.boneInverses;
    if (this.boneMatrices = new Float32Array(e11.length * 16), t19.length === 0)
      this.calculateInverses();
    else if (e11.length !== t19.length) {
      console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."), this.boneInverses = [];
      for (let n33 = 0, i27 = this.bones.length; n33 < i27; n33++)
        this.boneInverses.push(new Ve4());
    }
  }
  calculateInverses() {
    this.boneInverses.length = 0;
    for (let e11 = 0, t19 = this.bones.length; e11 < t19; e11++) {
      const n33 = new Ve4();
      this.bones[e11] && n33.copy(this.bones[e11].matrixWorld).invert(), this.boneInverses.push(n33);
    }
  }
  pose() {
    for (let e11 = 0, t19 = this.bones.length; e11 < t19; e11++) {
      const n33 = this.bones[e11];
      n33 && n33.matrixWorld.copy(this.boneInverses[e11]).invert();
    }
    for (let e11 = 0, t19 = this.bones.length; e11 < t19; e11++) {
      const n33 = this.bones[e11];
      n33 && (n33.parent && n33.parent.isBone ? (n33.matrix.copy(n33.parent.matrixWorld).invert(), n33.matrix.multiply(n33.matrixWorld)) : n33.matrix.copy(n33.matrixWorld), n33.matrix.decompose(n33.position, n33.quaternion, n33.scale));
    }
  }
  update() {
    const e11 = this.bones, t19 = this.boneInverses, n33 = this.boneMatrices, i27 = this.boneTexture;
    for (let s18 = 0, r24 = e11.length; s18 < r24; s18++) {
      const o13 = e11[s18] ? e11[s18].matrixWorld : p0;
      vc.multiplyMatrices(o13, t19[s18]), vc.toArray(n33, s18 * 16);
    }
    i27 !== null && (i27.needsUpdate = true);
  }
  clone() {
    return new _po(this.bones, this.boneInverses);
  }
  computeBoneTexture() {
    let e11 = Math.sqrt(this.bones.length * 4);
    e11 = ru(e11), e11 = Math.max(e11, 4);
    const t19 = new Float32Array(e11 * e11 * 4);
    t19.set(this.boneMatrices);
    const n33 = new wu(t19, e11, e11, pn3, ai3);
    return n33.needsUpdate = true, this.boneMatrices = t19, this.boneTexture = n33, this.boneTextureSize = e11, this;
  }
  getBoneByName(e11) {
    for (let t19 = 0, n33 = this.bones.length; t19 < n33; t19++) {
      const i27 = this.bones[t19];
      if (i27.name === e11)
        return i27;
    }
  }
  dispose() {
    this.boneTexture !== null && (this.boneTexture.dispose(), this.boneTexture = null);
  }
  fromJSON(e11, t19) {
    this.uuid = e11.uuid;
    for (let n33 = 0, i27 = e11.bones.length; n33 < i27; n33++) {
      const s18 = e11.bones[n33];
      let r24 = t19[s18];
      r24 === void 0 && (console.warn("THREE.Skeleton: No bone found with UUID:", s18), r24 = new Ua()), this.bones.push(r24), this.boneInverses.push(new Ve4().fromArray(e11.boneInverses[n33]));
    }
    return this.init(), this;
  }
  toJSON() {
    const e11 = {
      metadata: {
        version: 4.5,
        type: "Skeleton",
        generator: "Skeleton.toJSON"
      },
      bones: [],
      boneInverses: []
    };
    e11.uuid = this.uuid;
    const t19 = this.bones, n33 = this.boneInverses;
    for (let i27 = 0, s18 = t19.length; i27 < s18; i27++) {
      const r24 = t19[i27];
      e11.bones.push(r24.uuid);
      const o13 = n33[i27];
      e11.boneInverses.push(o13.toArray());
    }
    return e11;
  }
};
var bc = class extends Gt3 {
  constructor(e11, t19, n33, i27 = 1) {
    super(e11, t19, n33), this.isInstancedBufferAttribute = true, this.meshPerAttribute = i27;
  }
  copy(e11) {
    return super.copy(e11), this.meshPerAttribute = e11.meshPerAttribute, this;
  }
  toJSON() {
    const e11 = super.toJSON();
    return e11.meshPerAttribute = this.meshPerAttribute, e11.isInstancedBufferAttribute = true, e11;
  }
};
var hs = new Ve4();
var Mc = new Ve4();
var Br3 = [];
var Sc = new qn3();
var m0 = new Ve4();
var Hs = new Pt5();
var Ws = new Xn3();
var g0 = class extends Pt5 {
  constructor(e11, t19, n33) {
    super(e11, t19), this.isInstancedMesh = true, this.instanceMatrix = new bc(new Float32Array(n33 * 16), 16), this.instanceColor = null, this.count = n33, this.boundingBox = null, this.boundingSphere = null;
    for (let i27 = 0; i27 < n33; i27++)
      this.setMatrixAt(i27, m0);
  }
  computeBoundingBox() {
    const e11 = this.geometry, t19 = this.count;
    this.boundingBox === null && (this.boundingBox = new qn3()), e11.boundingBox === null && e11.computeBoundingBox(), this.boundingBox.makeEmpty();
    for (let n33 = 0; n33 < t19; n33++)
      this.getMatrixAt(n33, hs), Sc.copy(e11.boundingBox).applyMatrix4(hs), this.boundingBox.union(Sc);
  }
  computeBoundingSphere() {
    const e11 = this.geometry, t19 = this.count;
    this.boundingSphere === null && (this.boundingSphere = new Xn3()), e11.boundingSphere === null && e11.computeBoundingSphere(), this.boundingSphere.makeEmpty();
    for (let n33 = 0; n33 < t19; n33++)
      this.getMatrixAt(n33, hs), Ws.copy(e11.boundingSphere).applyMatrix4(hs), this.boundingSphere.union(Ws);
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.instanceMatrix.copy(e11.instanceMatrix), e11.instanceColor !== null && (this.instanceColor = e11.instanceColor.clone()), this.count = e11.count, this;
  }
  getColorAt(e11, t19) {
    t19.fromArray(this.instanceColor.array, e11 * 3);
  }
  getMatrixAt(e11, t19) {
    t19.fromArray(this.instanceMatrix.array, e11 * 16);
  }
  raycast(e11, t19) {
    const n33 = this.matrixWorld, i27 = this.count;
    if (Hs.geometry = this.geometry, Hs.material = this.material, Hs.material !== void 0 && (this.boundingSphere === null && this.computeBoundingSphere(), Ws.copy(this.boundingSphere), Ws.applyMatrix4(n33), e11.ray.intersectsSphere(Ws) !== false))
      for (let s18 = 0; s18 < i27; s18++) {
        this.getMatrixAt(s18, hs), Mc.multiplyMatrices(n33, hs), Hs.matrixWorld = Mc, Hs.raycast(e11, Br3);
        for (let r24 = 0, o13 = Br3.length; r24 < o13; r24++) {
          const c27 = Br3[r24];
          c27.instanceId = s18, c27.object = this, t19.push(c27);
        }
        Br3.length = 0;
      }
  }
  setColorAt(e11, t19) {
    this.instanceColor === null && (this.instanceColor = new bc(new Float32Array(this.instanceMatrix.count * 3), 3)), t19.toArray(this.instanceColor.array, e11 * 3);
  }
  setMatrixAt(e11, t19) {
    t19.toArray(this.instanceMatrix.array, e11 * 16);
  }
  updateMorphTargets() {
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
};
var Ls = class extends mn3 {
  constructor(e11) {
    super(), this.isLineBasicMaterial = true, this.type = "LineBasicMaterial", this.color = new ze4(16777215), this.map = null, this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.linewidth = e11.linewidth, this.linecap = e11.linecap, this.linejoin = e11.linejoin, this.fog = e11.fog, this;
  }
};
var wc = new U9();
var Tc = new U9();
var Ac = new Ve4();
var ta = new La();
var Vr3 = new Xn3();
var cr3 = class extends _t4 {
  constructor(e11 = new Xt3(), t19 = new Ls()) {
    super(), this.isLine = true, this.type = "Line", this.geometry = e11, this.material = t19, this.updateMorphTargets();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.material = e11.material, this.geometry = e11.geometry, this;
  }
  computeLineDistances() {
    const e11 = this.geometry;
    if (e11.index === null) {
      const t19 = e11.attributes.position, n33 = [0];
      for (let i27 = 1, s18 = t19.count; i27 < s18; i27++)
        wc.fromBufferAttribute(t19, i27 - 1), Tc.fromBufferAttribute(t19, i27), n33[i27] = n33[i27 - 1], n33[i27] += wc.distanceTo(Tc);
      e11.setAttribute("lineDistance", new yt8(n33, 1));
    } else
      console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
    return this;
  }
  raycast(e11, t19) {
    const n33 = this.geometry, i27 = this.matrixWorld, s18 = e11.params.Line.threshold, r24 = n33.drawRange;
    if (n33.boundingSphere === null && n33.computeBoundingSphere(), Vr3.copy(n33.boundingSphere), Vr3.applyMatrix4(i27), Vr3.radius += s18, e11.ray.intersectsSphere(Vr3) === false)
      return;
    Ac.copy(i27).invert(), ta.copy(e11.ray).applyMatrix4(Ac);
    const o13 = s18 / ((this.scale.x + this.scale.y + this.scale.z) / 3), c27 = o13 * o13, l26 = new U9(), u35 = new U9(), h26 = new U9(), d34 = new U9(), p26 = this.isLineSegments ? 2 : 1, g32 = n33.index, m34 = n33.attributes.position;
    if (g32 !== null) {
      const f40 = Math.max(0, r24.start), E25 = Math.min(g32.count, r24.start + r24.count);
      for (let b35 = f40, w31 = E25 - 1; b35 < w31; b35 += p26) {
        const S23 = g32.getX(b35), D18 = g32.getX(b35 + 1);
        if (l26.fromBufferAttribute(m34, S23), u35.fromBufferAttribute(m34, D18), ta.distanceSqToSegment(l26, u35, d34, h26) > c27)
          continue;
        d34.applyMatrix4(this.matrixWorld);
        const I18 = e11.ray.origin.distanceTo(d34);
        I18 < e11.near || I18 > e11.far || t19.push({
          distance: I18,
          // What do we want? intersection point on the ray or on the segment??
          // point: raycaster.ray.at( distance ),
          point: h26.clone().applyMatrix4(this.matrixWorld),
          index: b35,
          face: null,
          faceIndex: null,
          object: this
        });
      }
    } else {
      const f40 = Math.max(0, r24.start), E25 = Math.min(m34.count, r24.start + r24.count);
      for (let b35 = f40, w31 = E25 - 1; b35 < w31; b35 += p26) {
        if (l26.fromBufferAttribute(m34, b35), u35.fromBufferAttribute(m34, b35 + 1), ta.distanceSqToSegment(l26, u35, d34, h26) > c27)
          continue;
        d34.applyMatrix4(this.matrixWorld);
        const D18 = e11.ray.origin.distanceTo(d34);
        D18 < e11.near || D18 > e11.far || t19.push({
          distance: D18,
          // What do we want? intersection point on the ray or on the segment??
          // point: raycaster.ray.at( distance ),
          point: h26.clone().applyMatrix4(this.matrixWorld),
          index: b35,
          face: null,
          faceIndex: null,
          object: this
        });
      }
    }
  }
  updateMorphTargets() {
    const t19 = this.geometry.morphAttributes, n33 = Object.keys(t19);
    if (n33.length > 0) {
      const i27 = t19[n33[0]];
      if (i27 !== void 0) {
        this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (let s18 = 0, r24 = i27.length; s18 < r24; s18++) {
          const o13 = i27[s18].name || String(s18);
          this.morphTargetInfluences.push(0), this.morphTargetDictionary[o13] = s18;
        }
      }
    }
  }
};
var Ec = new U9();
var Cc = new U9();
var ka = class extends cr3 {
  constructor(e11, t19) {
    super(e11, t19), this.isLineSegments = true, this.type = "LineSegments";
  }
  computeLineDistances() {
    const e11 = this.geometry;
    if (e11.index === null) {
      const t19 = e11.attributes.position, n33 = [];
      for (let i27 = 0, s18 = t19.count; i27 < s18; i27 += 2)
        Ec.fromBufferAttribute(t19, i27), Cc.fromBufferAttribute(t19, i27 + 1), n33[i27] = i27 === 0 ? 0 : n33[i27 - 1], n33[i27 + 1] = n33[i27] + Ec.distanceTo(Cc);
      e11.setAttribute("lineDistance", new yt8(n33, 1));
    } else
      console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
    return this;
  }
};
var _0 = class extends cr3 {
  constructor(e11, t19) {
    super(e11, t19), this.isLineLoop = true, this.type = "LineLoop";
  }
};
var Tu = class extends mn3 {
  constructor(e11) {
    super(), this.isPointsMaterial = true, this.type = "PointsMaterial", this.color = new ze4(16777215), this.map = null, this.alphaMap = null, this.size = 1, this.sizeAttenuation = true, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.alphaMap = e11.alphaMap, this.size = e11.size, this.sizeAttenuation = e11.sizeAttenuation, this.fog = e11.fog, this;
  }
};
var Lc = new Ve4();
var va = new La();
var Gr3 = new Xn3();
var Hr3 = new U9();
var x0 = class extends _t4 {
  constructor(e11 = new Xt3(), t19 = new Tu()) {
    super(), this.isPoints = true, this.type = "Points", this.geometry = e11, this.material = t19, this.updateMorphTargets();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.material = e11.material, this.geometry = e11.geometry, this;
  }
  raycast(e11, t19) {
    const n33 = this.geometry, i27 = this.matrixWorld, s18 = e11.params.Points.threshold, r24 = n33.drawRange;
    if (n33.boundingSphere === null && n33.computeBoundingSphere(), Gr3.copy(n33.boundingSphere), Gr3.applyMatrix4(i27), Gr3.radius += s18, e11.ray.intersectsSphere(Gr3) === false)
      return;
    Lc.copy(i27).invert(), va.copy(e11.ray).applyMatrix4(Lc);
    const o13 = s18 / ((this.scale.x + this.scale.y + this.scale.z) / 3), c27 = o13 * o13, l26 = n33.index, h26 = n33.attributes.position;
    if (l26 !== null) {
      const d34 = Math.max(0, r24.start), p26 = Math.min(l26.count, r24.start + r24.count);
      for (let g32 = d34, y34 = p26; g32 < y34; g32++) {
        const m34 = l26.getX(g32);
        Hr3.fromBufferAttribute(h26, m34), Rc(Hr3, m34, c27, i27, e11, t19, this);
      }
    } else {
      const d34 = Math.max(0, r24.start), p26 = Math.min(h26.count, r24.start + r24.count);
      for (let g32 = d34, y34 = p26; g32 < y34; g32++)
        Hr3.fromBufferAttribute(h26, g32), Rc(Hr3, g32, c27, i27, e11, t19, this);
    }
  }
  updateMorphTargets() {
    const t19 = this.geometry.morphAttributes, n33 = Object.keys(t19);
    if (n33.length > 0) {
      const i27 = t19[n33[0]];
      if (i27 !== void 0) {
        this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (let s18 = 0, r24 = i27.length; s18 < r24; s18++) {
          const o13 = i27[s18].name || String(s18);
          this.morphTargetInfluences.push(0), this.morphTargetDictionary[o13] = s18;
        }
      }
    }
  }
};
function Rc(a22, e11, t19, n33, i27, s18, r24) {
  const o13 = va.distanceSqToPoint(a22);
  if (o13 < t19) {
    const c27 = new U9();
    va.closestPointToPoint(a22, c27), c27.applyMatrix4(n33);
    const l26 = i27.ray.origin.distanceTo(c27);
    if (l26 < i27.near || l26 > i27.far)
      return;
    s18.push({
      distance: l26,
      distanceToRay: Math.sqrt(o13),
      point: c27,
      index: e11,
      face: null,
      object: r24
    });
  }
}
var mo = class _mo extends Xt3 {
  constructor(e11 = 1, t19 = 1, n33 = 1, i27 = 32, s18 = 1, r24 = false, o13 = 0, c27 = Math.PI * 2) {
    super(), this.type = "CylinderGeometry", this.parameters = {
      radiusTop: e11,
      radiusBottom: t19,
      height: n33,
      radialSegments: i27,
      heightSegments: s18,
      openEnded: r24,
      thetaStart: o13,
      thetaLength: c27
    };
    const l26 = this;
    i27 = Math.floor(i27), s18 = Math.floor(s18);
    const u35 = [], h26 = [], d34 = [], p26 = [];
    let g32 = 0;
    const y34 = [], m34 = n33 / 2;
    let f40 = 0;
    E25(), r24 === false && (e11 > 0 && b35(true), t19 > 0 && b35(false)), this.setIndex(u35), this.setAttribute("position", new yt8(h26, 3)), this.setAttribute("normal", new yt8(d34, 3)), this.setAttribute("uv", new yt8(p26, 2));
    function E25() {
      const w31 = new U9(), S23 = new U9();
      let D18 = 0;
      const N22 = (t19 - e11) / n33;
      for (let I18 = 0; I18 <= s18; I18++) {
        const v31 = [], L12 = I18 / s18, G16 = L12 * (t19 - e11) + e11;
        for (let B22 = 0; B22 <= i27; B22++) {
          const k29 = B22 / i27, V16 = k29 * c27 + o13, H16 = Math.sin(V16), W11 = Math.cos(V16);
          S23.x = G16 * H16, S23.y = -L12 * n33 + m34, S23.z = G16 * W11, h26.push(S23.x, S23.y, S23.z), w31.set(H16, N22, W11).normalize(), d34.push(w31.x, w31.y, w31.z), p26.push(k29, 1 - L12), v31.push(g32++);
        }
        y34.push(v31);
      }
      for (let I18 = 0; I18 < i27; I18++)
        for (let v31 = 0; v31 < s18; v31++) {
          const L12 = y34[v31][I18], G16 = y34[v31 + 1][I18], B22 = y34[v31 + 1][I18 + 1], k29 = y34[v31][I18 + 1];
          u35.push(L12, G16, k29), u35.push(G16, B22, k29), D18 += 6;
        }
      l26.addGroup(f40, D18, 0), f40 += D18;
    }
    function b35(w31) {
      const S23 = g32, D18 = new We4(), N22 = new U9();
      let I18 = 0;
      const v31 = w31 === true ? e11 : t19, L12 = w31 === true ? 1 : -1;
      for (let B22 = 1; B22 <= i27; B22++)
        h26.push(0, m34 * L12, 0), d34.push(0, L12, 0), p26.push(0.5, 0.5), g32++;
      const G16 = g32;
      for (let B22 = 0; B22 <= i27; B22++) {
        const V16 = B22 / i27 * c27 + o13, H16 = Math.cos(V16), W11 = Math.sin(V16);
        N22.x = v31 * W11, N22.y = m34 * L12, N22.z = v31 * H16, h26.push(N22.x, N22.y, N22.z), d34.push(0, L12, 0), D18.x = H16 * 0.5 + 0.5, D18.y = W11 * 0.5 * L12 + 0.5, p26.push(D18.x, D18.y), g32++;
      }
      for (let B22 = 0; B22 < i27; B22++) {
        const k29 = S23 + B22, V16 = G16 + B22;
        w31 === true ? u35.push(V16, V16 + 1, k29) : u35.push(V16 + 1, V16, k29), I18 += 3;
      }
      l26.addGroup(f40, I18, w31 === true ? 1 : 2), f40 += I18;
    }
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _mo(e11.radiusTop, e11.radiusBottom, e11.height, e11.radialSegments, e11.heightSegments, e11.openEnded, e11.thetaStart, e11.thetaLength);
  }
};
var Wr3 = new U9();
var jr3 = new U9();
var na = new U9();
var qr3 = new dn3();
var y0 = class extends Xt3 {
  constructor(e11 = null, t19 = 1) {
    if (super(), this.type = "EdgesGeometry", this.parameters = {
      geometry: e11,
      thresholdAngle: t19
    }, e11 !== null) {
      const i27 = Math.pow(10, 4), s18 = Math.cos(xs * t19), r24 = e11.getIndex(), o13 = e11.getAttribute("position"), c27 = r24 ? r24.count : o13.count, l26 = [0, 0, 0], u35 = ["a", "b", "c"], h26 = new Array(3), d34 = {}, p26 = [];
      for (let g32 = 0; g32 < c27; g32 += 3) {
        r24 ? (l26[0] = r24.getX(g32), l26[1] = r24.getX(g32 + 1), l26[2] = r24.getX(g32 + 2)) : (l26[0] = g32, l26[1] = g32 + 1, l26[2] = g32 + 2);
        const { a: y34, b: m34, c: f40 } = qr3;
        if (y34.fromBufferAttribute(o13, l26[0]), m34.fromBufferAttribute(o13, l26[1]), f40.fromBufferAttribute(o13, l26[2]), qr3.getNormal(na), h26[0] = `${Math.round(y34.x * i27)},${Math.round(y34.y * i27)},${Math.round(y34.z * i27)}`, h26[1] = `${Math.round(m34.x * i27)},${Math.round(m34.y * i27)},${Math.round(m34.z * i27)}`, h26[2] = `${Math.round(f40.x * i27)},${Math.round(f40.y * i27)},${Math.round(f40.z * i27)}`, !(h26[0] === h26[1] || h26[1] === h26[2] || h26[2] === h26[0]))
          for (let E25 = 0; E25 < 3; E25++) {
            const b35 = (E25 + 1) % 3, w31 = h26[E25], S23 = h26[b35], D18 = qr3[u35[E25]], N22 = qr3[u35[b35]], I18 = `${w31}_${S23}`, v31 = `${S23}_${w31}`;
            v31 in d34 && d34[v31] ? (na.dot(d34[v31].normal) <= s18 && (p26.push(D18.x, D18.y, D18.z), p26.push(N22.x, N22.y, N22.z)), d34[v31] = null) : I18 in d34 || (d34[I18] = {
              index0: l26[E25],
              index1: l26[b35],
              normal: na.clone()
            });
          }
      }
      for (const g32 in d34)
        if (d34[g32]) {
          const { index0: y34, index1: m34 } = d34[g32];
          Wr3.fromBufferAttribute(o13, y34), jr3.fromBufferAttribute(o13, m34), p26.push(Wr3.x, Wr3.y, Wr3.z), p26.push(jr3.x, jr3.y, jr3.z);
        }
      this.setAttribute("position", new yt8(p26, 3));
    }
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
};
var Oa = class _Oa extends Xt3 {
  constructor(e11 = 1, t19 = 32, n33 = 16, i27 = 0, s18 = Math.PI * 2, r24 = 0, o13 = Math.PI) {
    super(), this.type = "SphereGeometry", this.parameters = {
      radius: e11,
      widthSegments: t19,
      heightSegments: n33,
      phiStart: i27,
      phiLength: s18,
      thetaStart: r24,
      thetaLength: o13
    }, t19 = Math.max(3, Math.floor(t19)), n33 = Math.max(2, Math.floor(n33));
    const c27 = Math.min(r24 + o13, Math.PI);
    let l26 = 0;
    const u35 = [], h26 = new U9(), d34 = new U9(), p26 = [], g32 = [], y34 = [], m34 = [];
    for (let f40 = 0; f40 <= n33; f40++) {
      const E25 = [], b35 = f40 / n33;
      let w31 = 0;
      f40 === 0 && r24 === 0 ? w31 = 0.5 / t19 : f40 === n33 && c27 === Math.PI && (w31 = -0.5 / t19);
      for (let S23 = 0; S23 <= t19; S23++) {
        const D18 = S23 / t19;
        h26.x = -e11 * Math.cos(i27 + D18 * s18) * Math.sin(r24 + b35 * o13), h26.y = e11 * Math.cos(r24 + b35 * o13), h26.z = e11 * Math.sin(i27 + D18 * s18) * Math.sin(r24 + b35 * o13), g32.push(h26.x, h26.y, h26.z), d34.copy(h26).normalize(), y34.push(d34.x, d34.y, d34.z), m34.push(D18 + w31, 1 - b35), E25.push(l26++);
      }
      u35.push(E25);
    }
    for (let f40 = 0; f40 < n33; f40++)
      for (let E25 = 0; E25 < t19; E25++) {
        const b35 = u35[f40][E25 + 1], w31 = u35[f40][E25], S23 = u35[f40 + 1][E25], D18 = u35[f40 + 1][E25 + 1];
        (f40 !== 0 || r24 > 0) && p26.push(b35, w31, D18), (f40 !== n33 - 1 || c27 < Math.PI) && p26.push(w31, S23, D18);
      }
    this.setIndex(p26), this.setAttribute("position", new yt8(g32, 3)), this.setAttribute("normal", new yt8(y34, 3)), this.setAttribute("uv", new yt8(m34, 2));
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _Oa(e11.radius, e11.widthSegments, e11.heightSegments, e11.phiStart, e11.phiLength, e11.thetaStart, e11.thetaLength);
  }
};
var ur3 = class extends mn3 {
  constructor(e11) {
    super(), this.isMeshStandardMaterial = true, this.defines = { STANDARD: "" }, this.type = "MeshStandardMaterial", this.color = new ze4(16777215), this.roughness = 1, this.metalness = 0, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new ze4(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = co, this.normalScale = new We4(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.roughnessMap = null, this.metalnessMap = null, this.alphaMap = null, this.envMap = null, this.envMapIntensity = 1, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.flatShading = false, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.defines = { STANDARD: "" }, this.color.copy(e11.color), this.roughness = e11.roughness, this.metalness = e11.metalness, this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.emissive.copy(e11.emissive), this.emissiveMap = e11.emissiveMap, this.emissiveIntensity = e11.emissiveIntensity, this.bumpMap = e11.bumpMap, this.bumpScale = e11.bumpScale, this.normalMap = e11.normalMap, this.normalMapType = e11.normalMapType, this.normalScale.copy(e11.normalScale), this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.roughnessMap = e11.roughnessMap, this.metalnessMap = e11.metalnessMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.envMapIntensity = e11.envMapIntensity, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.flatShading = e11.flatShading, this.fog = e11.fog, this;
  }
};
var ki3 = class extends ur3 {
  constructor(e11) {
    super(), this.isMeshPhysicalMaterial = true, this.defines = {
      STANDARD: "",
      PHYSICAL: ""
    }, this.type = "MeshPhysicalMaterial", this.clearcoatMap = null, this.clearcoatRoughness = 0, this.clearcoatRoughnessMap = null, this.clearcoatNormalScale = new We4(1, 1), this.clearcoatNormalMap = null, this.ior = 1.5, Object.defineProperty(this, "reflectivity", {
      get: function() {
        return Wt4(2.5 * (this.ior - 1) / (this.ior + 1), 0, 1);
      },
      set: function(t19) {
        this.ior = (1 + 0.4 * t19) / (1 - 0.4 * t19);
      }
    }), this.iridescenceMap = null, this.iridescenceIOR = 1.3, this.iridescenceThicknessRange = [100, 400], this.iridescenceThicknessMap = null, this.sheenColor = new ze4(0), this.sheenColorMap = null, this.sheenRoughness = 1, this.sheenRoughnessMap = null, this.transmissionMap = null, this.thickness = 0, this.thicknessMap = null, this.attenuationDistance = 1 / 0, this.attenuationColor = new ze4(1, 1, 1), this.specularIntensity = 1, this.specularIntensityMap = null, this.specularColor = new ze4(1, 1, 1), this.specularColorMap = null, this._sheen = 0, this._clearcoat = 0, this._iridescence = 0, this._transmission = 0, this.setValues(e11);
  }
  get sheen() {
    return this._sheen;
  }
  set sheen(e11) {
    this._sheen > 0 != e11 > 0 && this.version++, this._sheen = e11;
  }
  get clearcoat() {
    return this._clearcoat;
  }
  set clearcoat(e11) {
    this._clearcoat > 0 != e11 > 0 && this.version++, this._clearcoat = e11;
  }
  get iridescence() {
    return this._iridescence;
  }
  set iridescence(e11) {
    this._iridescence > 0 != e11 > 0 && this.version++, this._iridescence = e11;
  }
  get transmission() {
    return this._transmission;
  }
  set transmission(e11) {
    this._transmission > 0 != e11 > 0 && this.version++, this._transmission = e11;
  }
  copy(e11) {
    return super.copy(e11), this.defines = {
      STANDARD: "",
      PHYSICAL: ""
    }, this.clearcoat = e11.clearcoat, this.clearcoatMap = e11.clearcoatMap, this.clearcoatRoughness = e11.clearcoatRoughness, this.clearcoatRoughnessMap = e11.clearcoatRoughnessMap, this.clearcoatNormalMap = e11.clearcoatNormalMap, this.clearcoatNormalScale.copy(e11.clearcoatNormalScale), this.ior = e11.ior, this.iridescence = e11.iridescence, this.iridescenceMap = e11.iridescenceMap, this.iridescenceIOR = e11.iridescenceIOR, this.iridescenceThicknessRange = [...e11.iridescenceThicknessRange], this.iridescenceThicknessMap = e11.iridescenceThicknessMap, this.sheen = e11.sheen, this.sheenColor.copy(e11.sheenColor), this.sheenColorMap = e11.sheenColorMap, this.sheenRoughness = e11.sheenRoughness, this.sheenRoughnessMap = e11.sheenRoughnessMap, this.transmission = e11.transmission, this.transmissionMap = e11.transmissionMap, this.thickness = e11.thickness, this.thicknessMap = e11.thicknessMap, this.attenuationDistance = e11.attenuationDistance, this.attenuationColor.copy(e11.attenuationColor), this.specularIntensity = e11.specularIntensity, this.specularIntensityMap = e11.specularIntensityMap, this.specularColor.copy(e11.specularColor), this.specularColorMap = e11.specularColorMap, this;
  }
};
var Zs = class extends mn3 {
  constructor(e11) {
    super(), this.isMeshPhongMaterial = true, this.type = "MeshPhongMaterial", this.color = new ze4(16777215), this.specular = new ze4(1118481), this.shininess = 30, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new ze4(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = co, this.normalScale = new We4(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = ao, this.reflectivity = 1, this.refractionRatio = 0.98, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.flatShading = false, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.specular.copy(e11.specular), this.shininess = e11.shininess, this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.emissive.copy(e11.emissive), this.emissiveMap = e11.emissiveMap, this.emissiveIntensity = e11.emissiveIntensity, this.bumpMap = e11.bumpMap, this.bumpScale = e11.bumpScale, this.normalMap = e11.normalMap, this.normalMapType = e11.normalMapType, this.normalScale.copy(e11.normalScale), this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.specularMap = e11.specularMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.combine = e11.combine, this.reflectivity = e11.reflectivity, this.refractionRatio = e11.refractionRatio, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.flatShading = e11.flatShading, this.fog = e11.fog, this;
  }
};
var v0 = class extends mn3 {
  constructor(e11) {
    super(), this.isMeshLambertMaterial = true, this.type = "MeshLambertMaterial", this.color = new ze4(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new ze4(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = co, this.normalScale = new We4(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = ao, this.reflectivity = 1, this.refractionRatio = 0.98, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.flatShading = false, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.emissive.copy(e11.emissive), this.emissiveMap = e11.emissiveMap, this.emissiveIntensity = e11.emissiveIntensity, this.bumpMap = e11.bumpMap, this.bumpScale = e11.bumpScale, this.normalMap = e11.normalMap, this.normalMapType = e11.normalMapType, this.normalScale.copy(e11.normalScale), this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.specularMap = e11.specularMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.combine = e11.combine, this.reflectivity = e11.reflectivity, this.refractionRatio = e11.refractionRatio, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.flatShading = e11.flatShading, this.fog = e11.fog, this;
  }
};
function ei3(a22, e11, t19) {
  return Au(a22) ? new a22.constructor(a22.subarray(e11, t19 !== void 0 ? t19 : a22.length)) : a22.slice(e11, t19);
}
function Xr3(a22, e11, t19) {
  return !a22 || // let 'undefined' and 'null' pass
  !t19 && a22.constructor === e11 ? a22 : typeof e11.BYTES_PER_ELEMENT == "number" ? new e11(a22) : Array.prototype.slice.call(a22);
}
function Au(a22) {
  return ArrayBuffer.isView(a22) && !(a22 instanceof DataView);
}
function b0(a22) {
  function e11(i27, s18) {
    return a22[i27] - a22[s18];
  }
  const t19 = a22.length, n33 = new Array(t19);
  for (let i27 = 0; i27 !== t19; ++i27)
    n33[i27] = i27;
  return n33.sort(e11), n33;
}
function Pc(a22, e11, t19) {
  const n33 = a22.length, i27 = new a22.constructor(n33);
  for (let s18 = 0, r24 = 0; r24 !== n33; ++s18) {
    const o13 = t19[s18] * e11;
    for (let c27 = 0; c27 !== e11; ++c27)
      i27[r24++] = a22[o13 + c27];
  }
  return i27;
}
function Eu(a22, e11, t19, n33) {
  let i27 = 1, s18 = a22[0];
  for (; s18 !== void 0 && s18[n33] === void 0; )
    s18 = a22[i27++];
  if (s18 === void 0)
    return;
  let r24 = s18[n33];
  if (r24 !== void 0)
    if (Array.isArray(r24))
      do
        r24 = s18[n33], r24 !== void 0 && (e11.push(s18.time), t19.push.apply(t19, r24)), s18 = a22[i27++];
      while (s18 !== void 0);
    else if (r24.toArray !== void 0)
      do
        r24 = s18[n33], r24 !== void 0 && (e11.push(s18.time), r24.toArray(t19, t19.length)), s18 = a22[i27++];
      while (s18 !== void 0);
    else
      do
        r24 = s18[n33], r24 !== void 0 && (e11.push(s18.time), t19.push(r24)), s18 = a22[i27++];
      while (s18 !== void 0);
}
var hr3 = class {
  constructor(e11, t19, n33, i27) {
    this.parameterPositions = e11, this._cachedIndex = 0, this.resultBuffer = i27 !== void 0 ? i27 : new t19.constructor(n33), this.sampleValues = t19, this.valueSize = n33, this.settings = null, this.DefaultSettings_ = {};
  }
  evaluate(e11) {
    const t19 = this.parameterPositions;
    let n33 = this._cachedIndex, i27 = t19[n33], s18 = t19[n33 - 1];
    n: {
      e: {
        let r24;
        t: {
          i:
            if (!(e11 < i27)) {
              for (let o13 = n33 + 2; ; ) {
                if (i27 === void 0) {
                  if (e11 < s18)
                    break i;
                  return n33 = t19.length, this._cachedIndex = n33, this.copySampleValue_(n33 - 1);
                }
                if (n33 === o13)
                  break;
                if (s18 = i27, i27 = t19[++n33], e11 < i27)
                  break e;
              }
              r24 = t19.length;
              break t;
            }
          if (!(e11 >= s18)) {
            const o13 = t19[1];
            e11 < o13 && (n33 = 2, s18 = o13);
            for (let c27 = n33 - 2; ; ) {
              if (s18 === void 0)
                return this._cachedIndex = 0, this.copySampleValue_(0);
              if (n33 === c27)
                break;
              if (i27 = s18, s18 = t19[--n33 - 1], e11 >= s18)
                break e;
            }
            r24 = n33, n33 = 0;
            break t;
          }
          break n;
        }
        for (; n33 < r24; ) {
          const o13 = n33 + r24 >>> 1;
          e11 < t19[o13] ? r24 = o13 : n33 = o13 + 1;
        }
        if (i27 = t19[n33], s18 = t19[n33 - 1], s18 === void 0)
          return this._cachedIndex = 0, this.copySampleValue_(0);
        if (i27 === void 0)
          return n33 = t19.length, this._cachedIndex = n33, this.copySampleValue_(n33 - 1);
      }
      this._cachedIndex = n33, this.intervalChanged_(n33, s18, i27);
    }
    return this.interpolate_(n33, s18, e11, i27);
  }
  getSettings_() {
    return this.settings || this.DefaultSettings_;
  }
  copySampleValue_(e11) {
    const t19 = this.resultBuffer, n33 = this.sampleValues, i27 = this.valueSize, s18 = e11 * i27;
    for (let r24 = 0; r24 !== i27; ++r24)
      t19[r24] = n33[s18 + r24];
    return t19;
  }
  // Template methods for derived classes:
  interpolate_() {
    throw new Error("call to abstract method");
  }
  intervalChanged_() {
  }
};
var M0 = class extends hr3 {
  constructor(e11, t19, n33, i27) {
    super(e11, t19, n33, i27), this._weightPrev = -0, this._offsetPrev = -0, this._weightNext = -0, this._offsetNext = -0, this.DefaultSettings_ = {
      endingStart: Ll,
      endingEnd: Ll
    };
  }
  intervalChanged_(e11, t19, n33) {
    const i27 = this.parameterPositions;
    let s18 = e11 - 2, r24 = e11 + 1, o13 = i27[s18], c27 = i27[r24];
    if (o13 === void 0)
      switch (this.getSettings_().endingStart) {
        case Rl:
          s18 = e11, o13 = 2 * t19 - n33;
          break;
        case Pl:
          s18 = i27.length - 2, o13 = t19 + i27[s18] - i27[s18 + 1];
          break;
        default:
          s18 = e11, o13 = n33;
      }
    if (c27 === void 0)
      switch (this.getSettings_().endingEnd) {
        case Rl:
          r24 = e11, c27 = 2 * n33 - t19;
          break;
        case Pl:
          r24 = 1, c27 = n33 + i27[1] - i27[0];
          break;
        default:
          r24 = e11 - 1, c27 = t19;
      }
    const l26 = (n33 - t19) * 0.5, u35 = this.valueSize;
    this._weightPrev = l26 / (t19 - o13), this._weightNext = l26 / (c27 - n33), this._offsetPrev = s18 * u35, this._offsetNext = r24 * u35;
  }
  interpolate_(e11, t19, n33, i27) {
    const s18 = this.resultBuffer, r24 = this.sampleValues, o13 = this.valueSize, c27 = e11 * o13, l26 = c27 - o13, u35 = this._offsetPrev, h26 = this._offsetNext, d34 = this._weightPrev, p26 = this._weightNext, g32 = (n33 - t19) / (i27 - t19), y34 = g32 * g32, m34 = y34 * g32, f40 = -d34 * m34 + 2 * d34 * y34 - d34 * g32, E25 = (1 + d34) * m34 + (-1.5 - 2 * d34) * y34 + (-0.5 + d34) * g32 + 1, b35 = (-1 - p26) * m34 + (1.5 + p26) * y34 + 0.5 * g32, w31 = p26 * m34 - p26 * y34;
    for (let S23 = 0; S23 !== o13; ++S23)
      s18[S23] = f40 * r24[u35 + S23] + E25 * r24[l26 + S23] + b35 * r24[c27 + S23] + w31 * r24[h26 + S23];
    return s18;
  }
};
var S0 = class extends hr3 {
  constructor(e11, t19, n33, i27) {
    super(e11, t19, n33, i27);
  }
  interpolate_(e11, t19, n33, i27) {
    const s18 = this.resultBuffer, r24 = this.sampleValues, o13 = this.valueSize, c27 = e11 * o13, l26 = c27 - o13, u35 = (n33 - t19) / (i27 - t19), h26 = 1 - u35;
    for (let d34 = 0; d34 !== o13; ++d34)
      s18[d34] = r24[l26 + d34] * h26 + r24[c27 + d34] * u35;
    return s18;
  }
};
var w0 = class extends hr3 {
  constructor(e11, t19, n33, i27) {
    super(e11, t19, n33, i27);
  }
  interpolate_(e11) {
    return this.copySampleValue_(e11 - 1);
  }
};
var In3 = class {
  constructor(e11, t19, n33, i27) {
    if (e11 === void 0)
      throw new Error("THREE.KeyframeTrack: track name is undefined");
    if (t19 === void 0 || t19.length === 0)
      throw new Error("THREE.KeyframeTrack: no keyframes in track named " + e11);
    this.name = e11, this.times = Xr3(t19, this.TimeBufferType), this.values = Xr3(n33, this.ValueBufferType), this.setInterpolation(i27 || this.DefaultInterpolation);
  }
  // Serialization (in static context, because of constructor invocation
  // and automatic invocation of .toJSON):
  static toJSON(e11) {
    const t19 = e11.constructor;
    let n33;
    if (t19.toJSON !== this.toJSON)
      n33 = t19.toJSON(e11);
    else {
      n33 = {
        name: e11.name,
        times: Xr3(e11.times, Array),
        values: Xr3(e11.values, Array)
      };
      const i27 = e11.getInterpolation();
      i27 !== e11.DefaultInterpolation && (n33.interpolation = i27);
    }
    return n33.type = e11.ValueTypeName, n33;
  }
  InterpolantFactoryMethodDiscrete(e11) {
    return new w0(this.times, this.values, this.getValueSize(), e11);
  }
  InterpolantFactoryMethodLinear(e11) {
    return new S0(this.times, this.values, this.getValueSize(), e11);
  }
  InterpolantFactoryMethodSmooth(e11) {
    return new M0(this.times, this.values, this.getValueSize(), e11);
  }
  setInterpolation(e11) {
    let t19;
    switch (e11) {
      case er3:
        t19 = this.InterpolantFactoryMethodDiscrete;
        break;
      case As:
        t19 = this.InterpolantFactoryMethodLinear;
        break;
      case Io:
        t19 = this.InterpolantFactoryMethodSmooth;
        break;
    }
    if (t19 === void 0) {
      const n33 = "unsupported interpolation for " + this.ValueTypeName + " keyframe track named " + this.name;
      if (this.createInterpolant === void 0)
        if (e11 !== this.DefaultInterpolation)
          this.setInterpolation(this.DefaultInterpolation);
        else
          throw new Error(n33);
      return console.warn("THREE.KeyframeTrack:", n33), this;
    }
    return this.createInterpolant = t19, this;
  }
  getInterpolation() {
    switch (this.createInterpolant) {
      case this.InterpolantFactoryMethodDiscrete:
        return er3;
      case this.InterpolantFactoryMethodLinear:
        return As;
      case this.InterpolantFactoryMethodSmooth:
        return Io;
    }
  }
  getValueSize() {
    return this.values.length / this.times.length;
  }
  // move all keyframes either forwards or backwards in time
  shift(e11) {
    if (e11 !== 0) {
      const t19 = this.times;
      for (let n33 = 0, i27 = t19.length; n33 !== i27; ++n33)
        t19[n33] += e11;
    }
    return this;
  }
  // scale all keyframe times by a factor (useful for frame <-> seconds conversions)
  scale(e11) {
    if (e11 !== 1) {
      const t19 = this.times;
      for (let n33 = 0, i27 = t19.length; n33 !== i27; ++n33)
        t19[n33] *= e11;
    }
    return this;
  }
  // removes keyframes before and after animation without changing any values within the range [startTime, endTime].
  // IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values
  trim(e11, t19) {
    const n33 = this.times, i27 = n33.length;
    let s18 = 0, r24 = i27 - 1;
    for (; s18 !== i27 && n33[s18] < e11; )
      ++s18;
    for (; r24 !== -1 && n33[r24] > t19; )
      --r24;
    if (++r24, s18 !== 0 || r24 !== i27) {
      s18 >= r24 && (r24 = Math.max(r24, 1), s18 = r24 - 1);
      const o13 = this.getValueSize();
      this.times = ei3(n33, s18, r24), this.values = ei3(this.values, s18 * o13, r24 * o13);
    }
    return this;
  }
  // ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable
  validate() {
    let e11 = true;
    const t19 = this.getValueSize();
    t19 - Math.floor(t19) !== 0 && (console.error("THREE.KeyframeTrack: Invalid value size in track.", this), e11 = false);
    const n33 = this.times, i27 = this.values, s18 = n33.length;
    s18 === 0 && (console.error("THREE.KeyframeTrack: Track is empty.", this), e11 = false);
    let r24 = null;
    for (let o13 = 0; o13 !== s18; o13++) {
      const c27 = n33[o13];
      if (typeof c27 == "number" && isNaN(c27)) {
        console.error("THREE.KeyframeTrack: Time is not a valid number.", this, o13, c27), e11 = false;
        break;
      }
      if (r24 !== null && r24 > c27) {
        console.error("THREE.KeyframeTrack: Out of order keys.", this, o13, c27, r24), e11 = false;
        break;
      }
      r24 = c27;
    }
    if (i27 !== void 0 && Au(i27))
      for (let o13 = 0, c27 = i27.length; o13 !== c27; ++o13) {
        const l26 = i27[o13];
        if (isNaN(l26)) {
          console.error("THREE.KeyframeTrack: Value is not a valid number.", this, o13, l26), e11 = false;
          break;
        }
      }
    return e11;
  }
  // removes equivalent sequential keys as common in morph target sequences
  // (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)
  optimize() {
    const e11 = ei3(this.times), t19 = ei3(this.values), n33 = this.getValueSize(), i27 = this.getInterpolation() === Io, s18 = e11.length - 1;
    let r24 = 1;
    for (let o13 = 1; o13 < s18; ++o13) {
      let c27 = false;
      const l26 = e11[o13], u35 = e11[o13 + 1];
      if (l26 !== u35 && (o13 !== 1 || l26 !== e11[0]))
        if (i27)
          c27 = true;
        else {
          const h26 = o13 * n33, d34 = h26 - n33, p26 = h26 + n33;
          for (let g32 = 0; g32 !== n33; ++g32) {
            const y34 = t19[h26 + g32];
            if (y34 !== t19[d34 + g32] || y34 !== t19[p26 + g32]) {
              c27 = true;
              break;
            }
          }
        }
      if (c27) {
        if (o13 !== r24) {
          e11[r24] = e11[o13];
          const h26 = o13 * n33, d34 = r24 * n33;
          for (let p26 = 0; p26 !== n33; ++p26)
            t19[d34 + p26] = t19[h26 + p26];
        }
        ++r24;
      }
    }
    if (s18 > 0) {
      e11[r24] = e11[s18];
      for (let o13 = s18 * n33, c27 = r24 * n33, l26 = 0; l26 !== n33; ++l26)
        t19[c27 + l26] = t19[o13 + l26];
      ++r24;
    }
    return r24 !== e11.length ? (this.times = ei3(e11, 0, r24), this.values = ei3(t19, 0, r24 * n33)) : (this.times = e11, this.values = t19), this;
  }
  clone() {
    const e11 = ei3(this.times, 0), t19 = ei3(this.values, 0), n33 = this.constructor, i27 = new n33(this.name, e11, t19);
    return i27.createInterpolant = this.createInterpolant, i27;
  }
};
In3.prototype.TimeBufferType = Float32Array;
In3.prototype.ValueBufferType = Float32Array;
In3.prototype.DefaultInterpolation = As;
var Us = class extends In3 {
};
Us.prototype.ValueTypeName = "bool";
Us.prototype.ValueBufferType = Array;
Us.prototype.DefaultInterpolation = er3;
Us.prototype.InterpolantFactoryMethodLinear = void 0;
Us.prototype.InterpolantFactoryMethodSmooth = void 0;
var Cu = class extends In3 {
};
Cu.prototype.ValueTypeName = "color";
var ir3 = class extends In3 {
};
ir3.prototype.ValueTypeName = "number";
var T0 = class extends hr3 {
  constructor(e11, t19, n33, i27) {
    super(e11, t19, n33, i27);
  }
  interpolate_(e11, t19, n33, i27) {
    const s18 = this.resultBuffer, r24 = this.sampleValues, o13 = this.valueSize, c27 = (n33 - t19) / (i27 - t19);
    let l26 = e11 * o13;
    for (let u35 = l26 + o13; l26 !== u35; l26 += 4)
      qt3.slerpFlat(s18, 0, r24, l26 - o13, r24, l26, c27);
    return s18;
  }
};
var ui3 = class extends In3 {
  InterpolantFactoryMethodLinear(e11) {
    return new T0(this.times, this.values, this.getValueSize(), e11);
  }
};
ui3.prototype.ValueTypeName = "quaternion";
ui3.prototype.DefaultInterpolation = As;
ui3.prototype.InterpolantFactoryMethodSmooth = void 0;
var ks = class extends In3 {
};
ks.prototype.ValueTypeName = "string";
ks.prototype.ValueBufferType = Array;
ks.prototype.DefaultInterpolation = er3;
ks.prototype.InterpolantFactoryMethodLinear = void 0;
ks.prototype.InterpolantFactoryMethodSmooth = void 0;
var Pi = class extends In3 {
};
Pi.prototype.ValueTypeName = "vector";
var ba = class {
  constructor(e11, t19 = -1, n33, i27 = Wh) {
    this.name = e11, this.tracks = n33, this.duration = t19, this.blendMode = i27, this.uuid = Sn3(), this.duration < 0 && this.resetDuration();
  }
  static parse(e11) {
    const t19 = [], n33 = e11.tracks, i27 = 1 / (e11.fps || 1);
    for (let r24 = 0, o13 = n33.length; r24 !== o13; ++r24)
      t19.push(E0(n33[r24]).scale(i27));
    const s18 = new this(e11.name, e11.duration, t19, e11.blendMode);
    return s18.uuid = e11.uuid, s18;
  }
  static toJSON(e11) {
    const t19 = [], n33 = e11.tracks, i27 = {
      name: e11.name,
      duration: e11.duration,
      tracks: t19,
      uuid: e11.uuid,
      blendMode: e11.blendMode
    };
    for (let s18 = 0, r24 = n33.length; s18 !== r24; ++s18)
      t19.push(In3.toJSON(n33[s18]));
    return i27;
  }
  static CreateFromMorphTargetSequence(e11, t19, n33, i27) {
    const s18 = t19.length, r24 = [];
    for (let o13 = 0; o13 < s18; o13++) {
      let c27 = [], l26 = [];
      c27.push(
        (o13 + s18 - 1) % s18,
        o13,
        (o13 + 1) % s18
      ), l26.push(0, 1, 0);
      const u35 = b0(c27);
      c27 = Pc(c27, 1, u35), l26 = Pc(l26, 1, u35), !i27 && c27[0] === 0 && (c27.push(s18), l26.push(l26[0])), r24.push(
        new ir3(
          ".morphTargetInfluences[" + t19[o13].name + "]",
          c27,
          l26
        ).scale(1 / n33)
      );
    }
    return new this(e11, -1, r24);
  }
  static findByName(e11, t19) {
    let n33 = e11;
    if (!Array.isArray(e11)) {
      const i27 = e11;
      n33 = i27.geometry && i27.geometry.animations || i27.animations;
    }
    for (let i27 = 0; i27 < n33.length; i27++)
      if (n33[i27].name === t19)
        return n33[i27];
    return null;
  }
  static CreateClipsFromMorphTargetSequences(e11, t19, n33) {
    const i27 = {}, s18 = /^([\w-]*?)([\d]+)$/;
    for (let o13 = 0, c27 = e11.length; o13 < c27; o13++) {
      const l26 = e11[o13], u35 = l26.name.match(s18);
      if (u35 && u35.length > 1) {
        const h26 = u35[1];
        let d34 = i27[h26];
        d34 || (i27[h26] = d34 = []), d34.push(l26);
      }
    }
    const r24 = [];
    for (const o13 in i27)
      r24.push(this.CreateFromMorphTargetSequence(o13, i27[o13], t19, n33));
    return r24;
  }
  // parse the animation.hierarchy format
  static parseAnimation(e11, t19) {
    if (!e11)
      return console.error("THREE.AnimationClip: No animation in JSONLoader data."), null;
    const n33 = function(h26, d34, p26, g32, y34) {
      if (p26.length !== 0) {
        const m34 = [], f40 = [];
        Eu(p26, m34, f40, g32), m34.length !== 0 && y34.push(new h26(d34, m34, f40));
      }
    }, i27 = [], s18 = e11.name || "default", r24 = e11.fps || 30, o13 = e11.blendMode;
    let c27 = e11.length || -1;
    const l26 = e11.hierarchy || [];
    for (let h26 = 0; h26 < l26.length; h26++) {
      const d34 = l26[h26].keys;
      if (!(!d34 || d34.length === 0))
        if (d34[0].morphTargets) {
          const p26 = {};
          let g32;
          for (g32 = 0; g32 < d34.length; g32++)
            if (d34[g32].morphTargets)
              for (let y34 = 0; y34 < d34[g32].morphTargets.length; y34++)
                p26[d34[g32].morphTargets[y34]] = -1;
          for (const y34 in p26) {
            const m34 = [], f40 = [];
            for (let E25 = 0; E25 !== d34[g32].morphTargets.length; ++E25) {
              const b35 = d34[g32];
              m34.push(b35.time), f40.push(b35.morphTarget === y34 ? 1 : 0);
            }
            i27.push(new ir3(".morphTargetInfluence[" + y34 + "]", m34, f40));
          }
          c27 = p26.length * r24;
        } else {
          const p26 = ".bones[" + t19[h26].name + "]";
          n33(
            Pi,
            p26 + ".position",
            d34,
            "pos",
            i27
          ), n33(
            ui3,
            p26 + ".quaternion",
            d34,
            "rot",
            i27
          ), n33(
            Pi,
            p26 + ".scale",
            d34,
            "scl",
            i27
          );
        }
    }
    return i27.length === 0 ? null : new this(s18, c27, i27, o13);
  }
  resetDuration() {
    const e11 = this.tracks;
    let t19 = 0;
    for (let n33 = 0, i27 = e11.length; n33 !== i27; ++n33) {
      const s18 = this.tracks[n33];
      t19 = Math.max(t19, s18.times[s18.times.length - 1]);
    }
    return this.duration = t19, this;
  }
  trim() {
    for (let e11 = 0; e11 < this.tracks.length; e11++)
      this.tracks[e11].trim(0, this.duration);
    return this;
  }
  validate() {
    let e11 = true;
    for (let t19 = 0; t19 < this.tracks.length; t19++)
      e11 = e11 && this.tracks[t19].validate();
    return e11;
  }
  optimize() {
    for (let e11 = 0; e11 < this.tracks.length; e11++)
      this.tracks[e11].optimize();
    return this;
  }
  clone() {
    const e11 = [];
    for (let t19 = 0; t19 < this.tracks.length; t19++)
      e11.push(this.tracks[t19].clone());
    return new this.constructor(this.name, this.duration, e11, this.blendMode);
  }
  toJSON() {
    return this.constructor.toJSON(this);
  }
};
function A0(a22) {
  switch (a22.toLowerCase()) {
    case "scalar":
    case "double":
    case "float":
    case "number":
    case "integer":
      return ir3;
    case "vector":
    case "vector2":
    case "vector3":
    case "vector4":
      return Pi;
    case "color":
      return Cu;
    case "quaternion":
      return ui3;
    case "bool":
    case "boolean":
      return Us;
    case "string":
      return ks;
  }
  throw new Error("THREE.KeyframeTrack: Unsupported typeName: " + a22);
}
function E0(a22) {
  if (a22.type === void 0)
    throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");
  const e11 = A0(a22.type);
  if (a22.times === void 0) {
    const t19 = [], n33 = [];
    Eu(a22.keys, t19, n33, "value"), a22.times = t19, a22.values = n33;
  }
  return e11.parse !== void 0 ? e11.parse(a22) : new e11(a22.name, a22.times, a22.values, a22.interpolation);
}
var Rs = {
  enabled: false,
  files: {},
  add: function(a22, e11) {
    this.enabled !== false && (this.files[a22] = e11);
  },
  get: function(a22) {
    if (this.enabled !== false)
      return this.files[a22];
  },
  remove: function(a22) {
    delete this.files[a22];
  },
  clear: function() {
    this.files = {};
  }
};
var Fa = class {
  constructor(e11, t19, n33) {
    const i27 = this;
    let s18 = false, r24 = 0, o13 = 0, c27;
    const l26 = [];
    this.onStart = void 0, this.onLoad = e11, this.onProgress = t19, this.onError = n33, this.itemStart = function(u35) {
      o13++, s18 === false && i27.onStart !== void 0 && i27.onStart(u35, r24, o13), s18 = true;
    }, this.itemEnd = function(u35) {
      r24++, i27.onProgress !== void 0 && i27.onProgress(u35, r24, o13), r24 === o13 && (s18 = false, i27.onLoad !== void 0 && i27.onLoad());
    }, this.itemError = function(u35) {
      i27.onError !== void 0 && i27.onError(u35);
    }, this.resolveURL = function(u35) {
      return c27 ? c27(u35) : u35;
    }, this.setURLModifier = function(u35) {
      return c27 = u35, this;
    }, this.addHandler = function(u35, h26) {
      return l26.push(u35, h26), this;
    }, this.removeHandler = function(u35) {
      const h26 = l26.indexOf(u35);
      return h26 !== -1 && l26.splice(h26, 2), this;
    }, this.getHandler = function(u35) {
      for (let h26 = 0, d34 = l26.length; h26 < d34; h26 += 2) {
        const p26 = l26[h26], g32 = l26[h26 + 1];
        if (p26.global && (p26.lastIndex = 0), p26.test(u35))
          return g32;
      }
      return null;
    };
  }
};
var Lu = new Fa();
var hi3 = class {
  constructor(e11) {
    this.manager = e11 !== void 0 ? e11 : Lu, this.crossOrigin = "anonymous", this.withCredentials = false, this.path = "", this.resourcePath = "", this.requestHeader = {};
  }
  load() {
  }
  loadAsync(e11, t19) {
    const n33 = this;
    return new Promise(function(i27, s18) {
      n33.load(e11, i27, t19, s18);
    });
  }
  parse() {
  }
  setCrossOrigin(e11) {
    return this.crossOrigin = e11, this;
  }
  setWithCredentials(e11) {
    return this.withCredentials = e11, this;
  }
  setPath(e11) {
    return this.path = e11, this;
  }
  setResourcePath(e11) {
    return this.resourcePath = e11, this;
  }
  setRequestHeader(e11) {
    return this.requestHeader = e11, this;
  }
};
var Gn3 = {};
var C0 = class extends Error {
  constructor(e11, t19) {
    super(e11), this.response = t19;
  }
};
var dr3 = class extends hi3 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, n33, i27) {
    e11 === void 0 && (e11 = ""), this.path !== void 0 && (e11 = this.path + e11), e11 = this.manager.resolveURL(e11);
    const s18 = Rs.get(e11);
    if (s18 !== void 0)
      return this.manager.itemStart(e11), setTimeout(() => {
        t19 && t19(s18), this.manager.itemEnd(e11);
      }, 0), s18;
    if (Gn3[e11] !== void 0) {
      Gn3[e11].push({
        onLoad: t19,
        onProgress: n33,
        onError: i27
      });
      return;
    }
    Gn3[e11] = [], Gn3[e11].push({
      onLoad: t19,
      onProgress: n33,
      onError: i27
    });
    const r24 = new Request(e11, {
      headers: new Headers(this.requestHeader),
      credentials: this.withCredentials ? "include" : "same-origin"
      // An abort controller could be added within a future PR
    }), o13 = this.mimeType, c27 = this.responseType;
    fetch(r24).then((l26) => {
      if (l26.status === 200 || l26.status === 0) {
        if (l26.status === 0 && console.warn("THREE.FileLoader: HTTP Status 0 received."), typeof ReadableStream > "u" || l26.body === void 0 || l26.body.getReader === void 0)
          return l26;
        const u35 = Gn3[e11], h26 = l26.body.getReader(), d34 = l26.headers.get("Content-Length") || l26.headers.get("X-File-Size"), p26 = d34 ? parseInt(d34) : 0, g32 = p26 !== 0;
        let y34 = 0;
        const m34 = new ReadableStream({
          start(f40) {
            E25();
            function E25() {
              h26.read().then(({ done: b35, value: w31 }) => {
                if (b35)
                  f40.close();
                else {
                  y34 += w31.byteLength;
                  const S23 = new ProgressEvent("progress", { lengthComputable: g32, loaded: y34, total: p26 });
                  for (let D18 = 0, N22 = u35.length; D18 < N22; D18++) {
                    const I18 = u35[D18];
                    I18.onProgress && I18.onProgress(S23);
                  }
                  f40.enqueue(w31), E25();
                }
              });
            }
          }
        });
        return new Response(m34);
      } else
        throw new C0(`fetch for "${l26.url}" responded with ${l26.status}: ${l26.statusText}`, l26);
    }).then((l26) => {
      switch (c27) {
        case "arraybuffer":
          return l26.arrayBuffer();
        case "blob":
          return l26.blob();
        case "document":
          return l26.text().then((u35) => new DOMParser().parseFromString(u35, o13));
        case "json":
          return l26.json();
        default:
          if (o13 === void 0)
            return l26.text();
          {
            const h26 = /charset="?([^;"\s]*)"?/i.exec(o13), d34 = h26 && h26[1] ? h26[1].toLowerCase() : void 0, p26 = new TextDecoder(d34);
            return l26.arrayBuffer().then((g32) => p26.decode(g32));
          }
      }
    }).then((l26) => {
      Rs.add(e11, l26);
      const u35 = Gn3[e11];
      delete Gn3[e11];
      for (let h26 = 0, d34 = u35.length; h26 < d34; h26++) {
        const p26 = u35[h26];
        p26.onLoad && p26.onLoad(l26);
      }
    }).catch((l26) => {
      const u35 = Gn3[e11];
      if (u35 === void 0)
        throw this.manager.itemError(e11), l26;
      delete Gn3[e11];
      for (let h26 = 0, d34 = u35.length; h26 < d34; h26++) {
        const p26 = u35[h26];
        p26.onError && p26.onError(l26);
      }
      this.manager.itemError(e11);
    }).finally(() => {
      this.manager.itemEnd(e11);
    }), this.manager.itemStart(e11);
  }
  setResponseType(e11) {
    return this.responseType = e11, this;
  }
  setMimeType(e11) {
    return this.mimeType = e11, this;
  }
};
var L0 = class extends hi3 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, n33, i27) {
    this.path !== void 0 && (e11 = this.path + e11), e11 = this.manager.resolveURL(e11);
    const s18 = this, r24 = Rs.get(e11);
    if (r24 !== void 0)
      return s18.manager.itemStart(e11), setTimeout(function() {
        t19 && t19(r24), s18.manager.itemEnd(e11);
      }, 0), r24;
    const o13 = nr3("img");
    function c27() {
      u35(), Rs.add(e11, this), t19 && t19(this), s18.manager.itemEnd(e11);
    }
    function l26(h26) {
      u35(), i27 && i27(h26), s18.manager.itemError(e11), s18.manager.itemEnd(e11);
    }
    function u35() {
      o13.removeEventListener("load", c27, false), o13.removeEventListener("error", l26, false);
    }
    return o13.addEventListener("load", c27, false), o13.addEventListener("error", l26, false), e11.slice(0, 5) !== "data:" && this.crossOrigin !== void 0 && (o13.crossOrigin = this.crossOrigin), s18.manager.itemStart(e11), o13.src = e11, o13;
  }
};
var R0 = class extends hi3 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, n33, i27) {
    const s18 = this, r24 = new wu(), o13 = new dr3(this.manager);
    return o13.setResponseType("arraybuffer"), o13.setRequestHeader(this.requestHeader), o13.setPath(this.path), o13.setWithCredentials(s18.withCredentials), o13.load(e11, function(c27) {
      const l26 = s18.parse(c27);
      l26 && (l26.image !== void 0 ? r24.image = l26.image : l26.data !== void 0 && (r24.image.width = l26.width, r24.image.height = l26.height, r24.image.data = l26.data), r24.wrapS = l26.wrapS !== void 0 ? l26.wrapS : Zt3, r24.wrapT = l26.wrapT !== void 0 ? l26.wrapT : Zt3, r24.magFilter = l26.magFilter !== void 0 ? l26.magFilter : Ht4, r24.minFilter = l26.minFilter !== void 0 ? l26.minFilter : Ht4, r24.anisotropy = l26.anisotropy !== void 0 ? l26.anisotropy : 1, l26.encoding !== void 0 && (r24.encoding = l26.encoding), l26.flipY !== void 0 && (r24.flipY = l26.flipY), l26.format !== void 0 && (r24.format = l26.format), l26.type !== void 0 && (r24.type = l26.type), l26.mipmaps !== void 0 && (r24.mipmaps = l26.mipmaps, r24.minFilter = jn3), l26.mipmapCount === 1 && (r24.minFilter = Ht4), l26.generateMipmaps !== void 0 && (r24.generateMipmaps = l26.generateMipmaps), r24.needsUpdate = true, t19 && t19(r24, l26));
    }, n33, i27), r24;
  }
};
var za = class extends hi3 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, n33, i27) {
    const s18 = new jt4(), r24 = new L0(this.manager);
    return r24.setCrossOrigin(this.crossOrigin), r24.setPath(this.path), r24.load(e11, function(o13) {
      s18.image = o13, s18.needsUpdate = true, t19 !== void 0 && t19(s18);
    }, n33, i27), s18;
  }
};
var fr3 = class extends _t4 {
  constructor(e11, t19 = 1) {
    super(), this.isLight = true, this.type = "Light", this.color = new ze4(e11), this.intensity = t19;
  }
  dispose() {
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.color.copy(e11.color), this.intensity = e11.intensity, this;
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return t19.object.color = this.color.getHex(), t19.object.intensity = this.intensity, this.groundColor !== void 0 && (t19.object.groundColor = this.groundColor.getHex()), this.distance !== void 0 && (t19.object.distance = this.distance), this.angle !== void 0 && (t19.object.angle = this.angle), this.decay !== void 0 && (t19.object.decay = this.decay), this.penumbra !== void 0 && (t19.object.penumbra = this.penumbra), this.shadow !== void 0 && (t19.object.shadow = this.shadow.toJSON()), t19;
  }
};
var Ru = class extends fr3 {
  constructor(e11, t19, n33) {
    super(e11, n33), this.isHemisphereLight = true, this.type = "HemisphereLight", this.position.copy(_t4.DEFAULT_UP), this.updateMatrix(), this.groundColor = new ze4(t19);
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.groundColor.copy(e11.groundColor), this;
  }
};
var ia = new Ve4();
var Ic = new U9();
var Dc = new U9();
var Ba = class {
  constructor(e11) {
    this.camera = e11, this.bias = 0, this.normalBias = 0, this.radius = 1, this.blurSamples = 8, this.mapSize = new We4(512, 512), this.map = null, this.mapPass = null, this.matrix = new Ve4(), this.autoUpdate = true, this.needsUpdate = false, this._frustum = new Ra(), this._frameExtents = new We4(1, 1), this._viewportCount = 1, this._viewports = [
      new gt6(0, 0, 1, 1)
    ];
  }
  getViewportCount() {
    return this._viewportCount;
  }
  getFrustum() {
    return this._frustum;
  }
  updateMatrices(e11) {
    const t19 = this.camera, n33 = this.matrix;
    Ic.setFromMatrixPosition(e11.matrixWorld), t19.position.copy(Ic), Dc.setFromMatrixPosition(e11.target.matrixWorld), t19.lookAt(Dc), t19.updateMatrixWorld(), ia.multiplyMatrices(t19.projectionMatrix, t19.matrixWorldInverse), this._frustum.setFromProjectionMatrix(ia), n33.set(
      0.5,
      0,
      0,
      0.5,
      0,
      0.5,
      0,
      0.5,
      0,
      0,
      0.5,
      0.5,
      0,
      0,
      0,
      1
    ), n33.multiply(ia);
  }
  getViewport(e11) {
    return this._viewports[e11];
  }
  getFrameExtents() {
    return this._frameExtents;
  }
  dispose() {
    this.map && this.map.dispose(), this.mapPass && this.mapPass.dispose();
  }
  copy(e11) {
    return this.camera = e11.camera.clone(), this.bias = e11.bias, this.radius = e11.radius, this.mapSize.copy(e11.mapSize), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  toJSON() {
    const e11 = {};
    return this.bias !== 0 && (e11.bias = this.bias), this.normalBias !== 0 && (e11.normalBias = this.normalBias), this.radius !== 1 && (e11.radius = this.radius), (this.mapSize.x !== 512 || this.mapSize.y !== 512) && (e11.mapSize = this.mapSize.toArray()), e11.camera = this.camera.toJSON(false).object, delete e11.camera.matrix, e11;
  }
};
var P0 = class extends Ba {
  constructor() {
    super(new Vt3(50, 1, 0.5, 500)), this.isSpotLightShadow = true, this.focus = 1;
  }
  updateMatrices(e11) {
    const t19 = this.camera, n33 = Es * 2 * e11.angle * this.focus, i27 = this.mapSize.width / this.mapSize.height, s18 = e11.distance || t19.far;
    (n33 !== t19.fov || i27 !== t19.aspect || s18 !== t19.far) && (t19.fov = n33, t19.aspect = i27, t19.far = s18, t19.updateProjectionMatrix()), super.updateMatrices(e11);
  }
  copy(e11) {
    return super.copy(e11), this.focus = e11.focus, this;
  }
};
var Pu = class extends fr3 {
  constructor(e11, t19, n33 = 0, i27 = Math.PI / 3, s18 = 0, r24 = 2) {
    super(e11, t19), this.isSpotLight = true, this.type = "SpotLight", this.position.copy(_t4.DEFAULT_UP), this.updateMatrix(), this.target = new _t4(), this.distance = n33, this.angle = i27, this.penumbra = s18, this.decay = r24, this.map = null, this.shadow = new P0();
  }
  get power() {
    return this.intensity * Math.PI;
  }
  set power(e11) {
    this.intensity = e11 / Math.PI;
  }
  dispose() {
    this.shadow.dispose();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.distance = e11.distance, this.angle = e11.angle, this.penumbra = e11.penumbra, this.decay = e11.decay, this.target = e11.target.clone(), this.shadow = e11.shadow.clone(), this;
  }
};
var Nc = new Ve4();
var js = new U9();
var sa = new U9();
var I0 = class extends Ba {
  constructor() {
    super(new Vt3(90, 1, 0.5, 500)), this.isPointLightShadow = true, this._frameExtents = new We4(4, 2), this._viewportCount = 6, this._viewports = [
      // These viewports map a cube-map onto a 2D texture with the
      // following orientation:
      //
      //  xzXZ
      //   y Y
      //
      // X - Positive x direction
      // x - Negative x direction
      // Y - Positive y direction
      // y - Negative y direction
      // Z - Positive z direction
      // z - Negative z direction
      // positive X
      new gt6(2, 1, 1, 1),
      // negative X
      new gt6(0, 1, 1, 1),
      // positive Z
      new gt6(3, 1, 1, 1),
      // negative Z
      new gt6(1, 1, 1, 1),
      // positive Y
      new gt6(3, 0, 1, 1),
      // negative Y
      new gt6(1, 0, 1, 1)
    ], this._cubeDirections = [
      new U9(1, 0, 0),
      new U9(-1, 0, 0),
      new U9(0, 0, 1),
      new U9(0, 0, -1),
      new U9(0, 1, 0),
      new U9(0, -1, 0)
    ], this._cubeUps = [
      new U9(0, 1, 0),
      new U9(0, 1, 0),
      new U9(0, 1, 0),
      new U9(0, 1, 0),
      new U9(0, 0, 1),
      new U9(0, 0, -1)
    ];
  }
  updateMatrices(e11, t19 = 0) {
    const n33 = this.camera, i27 = this.matrix, s18 = e11.distance || n33.far;
    s18 !== n33.far && (n33.far = s18, n33.updateProjectionMatrix()), js.setFromMatrixPosition(e11.matrixWorld), n33.position.copy(js), sa.copy(n33.position), sa.add(this._cubeDirections[t19]), n33.up.copy(this._cubeUps[t19]), n33.lookAt(sa), n33.updateMatrixWorld(), i27.makeTranslation(-js.x, -js.y, -js.z), Nc.multiplyMatrices(n33.projectionMatrix, n33.matrixWorldInverse), this._frustum.setFromProjectionMatrix(Nc);
  }
};
var go = class extends fr3 {
  constructor(e11, t19, n33 = 0, i27 = 2) {
    super(e11, t19), this.isPointLight = true, this.type = "PointLight", this.distance = n33, this.decay = i27, this.shadow = new I0();
  }
  get power() {
    return this.intensity * 4 * Math.PI;
  }
  set power(e11) {
    this.intensity = e11 / (4 * Math.PI);
  }
  dispose() {
    this.shadow.dispose();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.distance = e11.distance, this.decay = e11.decay, this.shadow = e11.shadow.clone(), this;
  }
};
var D0 = class extends Ba {
  constructor() {
    super(new ho(-5, 5, 5, -5, 0.5, 500)), this.isDirectionalLightShadow = true;
  }
};
var Iu = class extends fr3 {
  constructor(e11, t19) {
    super(e11, t19), this.isDirectionalLight = true, this.type = "DirectionalLight", this.position.copy(_t4.DEFAULT_UP), this.updateMatrix(), this.target = new _t4(), this.shadow = new D0();
  }
  dispose() {
    this.shadow.dispose();
  }
  copy(e11) {
    return super.copy(e11), this.target = e11.target.clone(), this.shadow = e11.shadow.clone(), this;
  }
};
var N0 = class extends fr3 {
  constructor(e11, t19) {
    super(e11, t19), this.isAmbientLight = true, this.type = "AmbientLight";
  }
};
var sr3 = class {
  static decodeText(e11) {
    if (typeof TextDecoder < "u")
      return new TextDecoder().decode(e11);
    let t19 = "";
    for (let n33 = 0, i27 = e11.length; n33 < i27; n33++)
      t19 += String.fromCharCode(e11[n33]);
    try {
      return decodeURIComponent(escape(t19));
    } catch {
      return t19;
    }
  }
  static extractUrlBase(e11) {
    const t19 = e11.lastIndexOf("/");
    return t19 === -1 ? "./" : e11.slice(0, t19 + 1);
  }
  static resolveURL(e11, t19) {
    return typeof e11 != "string" || e11 === "" ? "" : (/^https?:\/\//i.test(t19) && /^\//.test(e11) && (t19 = t19.replace(/(^https?:\/\/[^\/]+).*/i, "$1")), /^(https?:)?\/\//i.test(e11) || /^data:.*,.*$/i.test(e11) || /^blob:.*$/i.test(e11) ? e11 : t19 + e11);
  }
};
var U0 = class extends hi3 {
  constructor(e11) {
    super(e11), this.isImageBitmapLoader = true, typeof createImageBitmap > "u" && console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."), typeof fetch > "u" && console.warn("THREE.ImageBitmapLoader: fetch() not supported."), this.options = { premultiplyAlpha: "none" };
  }
  setOptions(e11) {
    return this.options = e11, this;
  }
  load(e11, t19, n33, i27) {
    e11 === void 0 && (e11 = ""), this.path !== void 0 && (e11 = this.path + e11), e11 = this.manager.resolveURL(e11);
    const s18 = this, r24 = Rs.get(e11);
    if (r24 !== void 0)
      return s18.manager.itemStart(e11), setTimeout(function() {
        t19 && t19(r24), s18.manager.itemEnd(e11);
      }, 0), r24;
    const o13 = {};
    o13.credentials = this.crossOrigin === "anonymous" ? "same-origin" : "include", o13.headers = this.requestHeader, fetch(e11, o13).then(function(c27) {
      return c27.blob();
    }).then(function(c27) {
      return createImageBitmap(c27, Object.assign(s18.options, { colorSpaceConversion: "none" }));
    }).then(function(c27) {
      Rs.add(e11, c27), t19 && t19(c27), s18.manager.itemEnd(e11);
    }).catch(function(c27) {
      i27 && i27(c27), s18.manager.itemError(e11), s18.manager.itemEnd(e11);
    }), s18.manager.itemStart(e11);
  }
};
var Va = "\\[\\]\\.:\\/";
var k0 = new RegExp("[" + Va + "]", "g");
var Ga = "[^" + Va + "]";
var O0 = "[^" + Va.replace("\\.", "") + "]";
var F0 = /((?:WC+[\/:])*)/.source.replace("WC", Ga);
var z0 = /(WCOD+)?/.source.replace("WCOD", O0);
var B0 = /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC", Ga);
var V0 = /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", Ga);
var G0 = new RegExp(
  "^" + F0 + z0 + B0 + V0 + "$"
);
var H0 = ["material", "materials", "bones", "map"];
var W0 = class {
  constructor(e11, t19, n33) {
    const i27 = n33 || dt7.parseTrackName(t19);
    this._targetGroup = e11, this._bindings = e11.subscribe_(t19, i27);
  }
  getValue(e11, t19) {
    this.bind();
    const n33 = this._targetGroup.nCachedObjects_, i27 = this._bindings[n33];
    i27 !== void 0 && i27.getValue(e11, t19);
  }
  setValue(e11, t19) {
    const n33 = this._bindings;
    for (let i27 = this._targetGroup.nCachedObjects_, s18 = n33.length; i27 !== s18; ++i27)
      n33[i27].setValue(e11, t19);
  }
  bind() {
    const e11 = this._bindings;
    for (let t19 = this._targetGroup.nCachedObjects_, n33 = e11.length; t19 !== n33; ++t19)
      e11[t19].bind();
  }
  unbind() {
    const e11 = this._bindings;
    for (let t19 = this._targetGroup.nCachedObjects_, n33 = e11.length; t19 !== n33; ++t19)
      e11[t19].unbind();
  }
};
var dt7 = class _dt {
  constructor(e11, t19, n33) {
    this.path = t19, this.parsedPath = n33 || _dt.parseTrackName(t19), this.node = _dt.findNode(e11, this.parsedPath.nodeName), this.rootNode = e11, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound;
  }
  static create(e11, t19, n33) {
    return e11 && e11.isAnimationObjectGroup ? new _dt.Composite(e11, t19, n33) : new _dt(e11, t19, n33);
  }
  /**
   * Replaces spaces with underscores and removes unsupported characters from
   * node names, to ensure compatibility with parseTrackName().
   *
   * @param {string} name Node name to be sanitized.
   * @return {string}
   */
  static sanitizeNodeName(e11) {
    return e11.replace(/\s/g, "_").replace(k0, "");
  }
  static parseTrackName(e11) {
    const t19 = G0.exec(e11);
    if (t19 === null)
      throw new Error("PropertyBinding: Cannot parse trackName: " + e11);
    const n33 = {
      // directoryName: matches[ 1 ], // (tschw) currently unused
      nodeName: t19[2],
      objectName: t19[3],
      objectIndex: t19[4],
      propertyName: t19[5],
      // required
      propertyIndex: t19[6]
    }, i27 = n33.nodeName && n33.nodeName.lastIndexOf(".");
    if (i27 !== void 0 && i27 !== -1) {
      const s18 = n33.nodeName.substring(i27 + 1);
      H0.indexOf(s18) !== -1 && (n33.nodeName = n33.nodeName.substring(0, i27), n33.objectName = s18);
    }
    if (n33.propertyName === null || n33.propertyName.length === 0)
      throw new Error("PropertyBinding: can not parse propertyName from trackName: " + e11);
    return n33;
  }
  static findNode(e11, t19) {
    if (t19 === void 0 || t19 === "" || t19 === "." || t19 === -1 || t19 === e11.name || t19 === e11.uuid)
      return e11;
    if (e11.skeleton) {
      const n33 = e11.skeleton.getBoneByName(t19);
      if (n33 !== void 0)
        return n33;
    }
    if (e11.children) {
      const n33 = function(s18) {
        for (let r24 = 0; r24 < s18.length; r24++) {
          const o13 = s18[r24];
          if (o13.name === t19 || o13.uuid === t19)
            return o13;
          const c27 = n33(o13.children);
          if (c27)
            return c27;
        }
        return null;
      }, i27 = n33(e11.children);
      if (i27)
        return i27;
    }
    return null;
  }
  // these are used to "bind" a nonexistent property
  _getValue_unavailable() {
  }
  _setValue_unavailable() {
  }
  // Getters
  _getValue_direct(e11, t19) {
    e11[t19] = this.targetObject[this.propertyName];
  }
  _getValue_array(e11, t19) {
    const n33 = this.resolvedProperty;
    for (let i27 = 0, s18 = n33.length; i27 !== s18; ++i27)
      e11[t19++] = n33[i27];
  }
  _getValue_arrayElement(e11, t19) {
    e11[t19] = this.resolvedProperty[this.propertyIndex];
  }
  _getValue_toArray(e11, t19) {
    this.resolvedProperty.toArray(e11, t19);
  }
  // Direct
  _setValue_direct(e11, t19) {
    this.targetObject[this.propertyName] = e11[t19];
  }
  _setValue_direct_setNeedsUpdate(e11, t19) {
    this.targetObject[this.propertyName] = e11[t19], this.targetObject.needsUpdate = true;
  }
  _setValue_direct_setMatrixWorldNeedsUpdate(e11, t19) {
    this.targetObject[this.propertyName] = e11[t19], this.targetObject.matrixWorldNeedsUpdate = true;
  }
  // EntireArray
  _setValue_array(e11, t19) {
    const n33 = this.resolvedProperty;
    for (let i27 = 0, s18 = n33.length; i27 !== s18; ++i27)
      n33[i27] = e11[t19++];
  }
  _setValue_array_setNeedsUpdate(e11, t19) {
    const n33 = this.resolvedProperty;
    for (let i27 = 0, s18 = n33.length; i27 !== s18; ++i27)
      n33[i27] = e11[t19++];
    this.targetObject.needsUpdate = true;
  }
  _setValue_array_setMatrixWorldNeedsUpdate(e11, t19) {
    const n33 = this.resolvedProperty;
    for (let i27 = 0, s18 = n33.length; i27 !== s18; ++i27)
      n33[i27] = e11[t19++];
    this.targetObject.matrixWorldNeedsUpdate = true;
  }
  // ArrayElement
  _setValue_arrayElement(e11, t19) {
    this.resolvedProperty[this.propertyIndex] = e11[t19];
  }
  _setValue_arrayElement_setNeedsUpdate(e11, t19) {
    this.resolvedProperty[this.propertyIndex] = e11[t19], this.targetObject.needsUpdate = true;
  }
  _setValue_arrayElement_setMatrixWorldNeedsUpdate(e11, t19) {
    this.resolvedProperty[this.propertyIndex] = e11[t19], this.targetObject.matrixWorldNeedsUpdate = true;
  }
  // HasToFromArray
  _setValue_fromArray(e11, t19) {
    this.resolvedProperty.fromArray(e11, t19);
  }
  _setValue_fromArray_setNeedsUpdate(e11, t19) {
    this.resolvedProperty.fromArray(e11, t19), this.targetObject.needsUpdate = true;
  }
  _setValue_fromArray_setMatrixWorldNeedsUpdate(e11, t19) {
    this.resolvedProperty.fromArray(e11, t19), this.targetObject.matrixWorldNeedsUpdate = true;
  }
  _getValue_unbound(e11, t19) {
    this.bind(), this.getValue(e11, t19);
  }
  _setValue_unbound(e11, t19) {
    this.bind(), this.setValue(e11, t19);
  }
  // create getter / setter pair for a property in the scene graph
  bind() {
    let e11 = this.node;
    const t19 = this.parsedPath, n33 = t19.objectName, i27 = t19.propertyName;
    let s18 = t19.propertyIndex;
    if (e11 || (e11 = _dt.findNode(this.rootNode, t19.nodeName), this.node = e11), this.getValue = this._getValue_unavailable, this.setValue = this._setValue_unavailable, !e11) {
      console.error("THREE.PropertyBinding: Trying to update node for track: " + this.path + " but it wasn't found.");
      return;
    }
    if (n33) {
      let l26 = t19.objectIndex;
      switch (n33) {
        case "materials":
          if (!e11.material) {
            console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this);
            return;
          }
          if (!e11.material.materials) {
            console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.", this);
            return;
          }
          e11 = e11.material.materials;
          break;
        case "bones":
          if (!e11.skeleton) {
            console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.", this);
            return;
          }
          e11 = e11.skeleton.bones;
          for (let u35 = 0; u35 < e11.length; u35++)
            if (e11[u35].name === l26) {
              l26 = u35;
              break;
            }
          break;
        case "map":
          if ("map" in e11) {
            e11 = e11.map;
            break;
          }
          if (!e11.material) {
            console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this);
            return;
          }
          if (!e11.material.map) {
            console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.", this);
            return;
          }
          e11 = e11.material.map;
          break;
        default:
          if (e11[n33] === void 0) {
            console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.", this);
            return;
          }
          e11 = e11[n33];
      }
      if (l26 !== void 0) {
        if (e11[l26] === void 0) {
          console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.", this, e11);
          return;
        }
        e11 = e11[l26];
      }
    }
    const r24 = e11[i27];
    if (r24 === void 0) {
      const l26 = t19.nodeName;
      console.error("THREE.PropertyBinding: Trying to update property for track: " + l26 + "." + i27 + " but it wasn't found.", e11);
      return;
    }
    let o13 = this.Versioning.None;
    this.targetObject = e11, e11.needsUpdate !== void 0 ? o13 = this.Versioning.NeedsUpdate : e11.matrixWorldNeedsUpdate !== void 0 && (o13 = this.Versioning.MatrixWorldNeedsUpdate);
    let c27 = this.BindingType.Direct;
    if (s18 !== void 0) {
      if (i27 === "morphTargetInfluences") {
        if (!e11.geometry) {
          console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.", this);
          return;
        }
        if (!e11.geometry.morphAttributes) {
          console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.", this);
          return;
        }
        e11.morphTargetDictionary[s18] !== void 0 && (s18 = e11.morphTargetDictionary[s18]);
      }
      c27 = this.BindingType.ArrayElement, this.resolvedProperty = r24, this.propertyIndex = s18;
    } else
      r24.fromArray !== void 0 && r24.toArray !== void 0 ? (c27 = this.BindingType.HasFromToArray, this.resolvedProperty = r24) : Array.isArray(r24) ? (c27 = this.BindingType.EntireArray, this.resolvedProperty = r24) : this.propertyName = i27;
    this.getValue = this.GetterByBindingType[c27], this.setValue = this.SetterByBindingTypeAndVersioning[c27][o13];
  }
  unbind() {
    this.node = null, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound;
  }
};
dt7.Composite = W0;
dt7.prototype.BindingType = {
  Direct: 0,
  EntireArray: 1,
  ArrayElement: 2,
  HasFromToArray: 3
};
dt7.prototype.Versioning = {
  None: 0,
  NeedsUpdate: 1,
  MatrixWorldNeedsUpdate: 2
};
dt7.prototype.GetterByBindingType = [
  dt7.prototype._getValue_direct,
  dt7.prototype._getValue_array,
  dt7.prototype._getValue_arrayElement,
  dt7.prototype._getValue_toArray
];
dt7.prototype.SetterByBindingTypeAndVersioning = [
  [
    // Direct
    dt7.prototype._setValue_direct,
    dt7.prototype._setValue_direct_setNeedsUpdate,
    dt7.prototype._setValue_direct_setMatrixWorldNeedsUpdate
  ],
  [
    // EntireArray
    dt7.prototype._setValue_array,
    dt7.prototype._setValue_array_setNeedsUpdate,
    dt7.prototype._setValue_array_setMatrixWorldNeedsUpdate
  ],
  [
    // ArrayElement
    dt7.prototype._setValue_arrayElement,
    dt7.prototype._setValue_arrayElement_setNeedsUpdate,
    dt7.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate
  ],
  [
    // HasToFromArray
    dt7.prototype._setValue_fromArray,
    dt7.prototype._setValue_fromArray_setNeedsUpdate,
    dt7.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate
  ]
];
var Uc = class {
  constructor(e11 = 1, t19 = 0, n33 = 0) {
    return this.radius = e11, this.phi = t19, this.theta = n33, this;
  }
  set(e11, t19, n33) {
    return this.radius = e11, this.phi = t19, this.theta = n33, this;
  }
  copy(e11) {
    return this.radius = e11.radius, this.phi = e11.phi, this.theta = e11.theta, this;
  }
  // restrict phi to be between EPS and PI-EPS
  makeSafe() {
    return this.phi = Math.max(1e-6, Math.min(Math.PI - 1e-6, this.phi)), this;
  }
  setFromVector3(e11) {
    return this.setFromCartesianCoords(e11.x, e11.y, e11.z);
  }
  setFromCartesianCoords(e11, t19, n33) {
    return this.radius = Math.sqrt(e11 * e11 + t19 * t19 + n33 * n33), this.radius === 0 ? (this.theta = 0, this.phi = 0) : (this.theta = Math.atan2(e11, n33), this.phi = Math.acos(Wt4(t19 / this.radius, -1, 1))), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var kc = new U9();
var Kr3;
var ra;
var oa = class extends _t4 {
  // dir is assumed to be normalized
  constructor(e11 = new U9(0, 0, 1), t19 = new U9(0, 0, 0), n33 = 1, i27 = 16776960, s18 = n33 * 0.2, r24 = s18 * 0.2) {
    super(), this.type = "ArrowHelper", Kr3 === void 0 && (Kr3 = new Xt3(), Kr3.setAttribute("position", new yt8([0, 0, 0, 0, 1, 0], 3)), ra = new mo(0, 0.5, 1, 5, 1), ra.translate(0, -0.5, 0)), this.position.copy(t19), this.line = new cr3(Kr3, new Ls({ color: i27, toneMapped: false })), this.line.matrixAutoUpdate = false, this.add(this.line), this.cone = new Pt5(ra, new Mn3({ color: i27, toneMapped: false })), this.cone.matrixAutoUpdate = false, this.add(this.cone), this.setDirection(e11), this.setLength(n33, s18, r24);
  }
  setDirection(e11) {
    if (e11.y > 0.99999)
      this.quaternion.set(0, 0, 0, 1);
    else if (e11.y < -0.99999)
      this.quaternion.set(1, 0, 0, 0);
    else {
      kc.set(e11.z, 0, -e11.x).normalize();
      const t19 = Math.acos(e11.y);
      this.quaternion.setFromAxisAngle(kc, t19);
    }
  }
  setLength(e11, t19 = e11 * 0.2, n33 = t19 * 0.2) {
    this.line.scale.set(1, Math.max(1e-4, e11 - t19), 1), this.line.updateMatrix(), this.cone.scale.set(n33, t19, n33), this.cone.position.y = e11, this.cone.updateMatrix();
  }
  setColor(e11) {
    this.line.material.color.set(e11), this.cone.material.color.set(e11);
  }
  copy(e11) {
    return super.copy(e11, false), this.line.copy(e11.line), this.cone.copy(e11.cone), this;
  }
  dispose() {
    this.line.geometry.dispose(), this.line.material.dispose(), this.cone.geometry.dispose(), this.cone.material.dispose();
  }
};
typeof __THREE_DEVTOOLS__ < "u" && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register", { detail: {
  revision: Ea
} }));
typeof window < "u" && (window.__THREE__ ? console.warn("WARNING: Multiple instances of Three.js being imported.") : window.__THREE__ = Ea);
function Oc(a22, e11) {
  if (e11 === jh)
    return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."), a22;
  if (e11 === ma || e11 === iu) {
    let t19 = a22.getIndex();
    if (t19 === null) {
      const r24 = [], o13 = a22.getAttribute("position");
      if (o13 !== void 0) {
        for (let c27 = 0; c27 < o13.count; c27++)
          r24.push(c27);
        a22.setIndex(r24), t19 = a22.getIndex();
      } else
        return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."), a22;
    }
    const n33 = t19.count - 2, i27 = [];
    if (e11 === ma)
      for (let r24 = 1; r24 <= n33; r24++)
        i27.push(t19.getX(0)), i27.push(t19.getX(r24)), i27.push(t19.getX(r24 + 1));
    else
      for (let r24 = 0; r24 < n33; r24++)
        r24 % 2 === 0 ? (i27.push(t19.getX(r24)), i27.push(t19.getX(r24 + 1)), i27.push(t19.getX(r24 + 2))) : (i27.push(t19.getX(r24 + 2)), i27.push(t19.getX(r24 + 1)), i27.push(t19.getX(r24)));
    i27.length / 3 !== n33 && console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");
    const s18 = a22.clone();
    return s18.setIndex(i27), s18.clearGroups(), s18;
  } else
    return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:", e11), a22;
}
var Ha = class extends hi3 {
  constructor(e11) {
    super(e11), this.dracoLoader = null, this.ktx2Loader = null, this.meshoptDecoder = null, this.pluginCallbacks = [], this.register(function(t19) {
      return new Y0(t19);
    }), this.register(function(t19) {
      return new n_(t19);
    }), this.register(function(t19) {
      return new i_(t19);
    }), this.register(function(t19) {
      return new s_(t19);
    }), this.register(function(t19) {
      return new Z0(t19);
    }), this.register(function(t19) {
      return new $0(t19);
    }), this.register(function(t19) {
      return new Q0(t19);
    }), this.register(function(t19) {
      return new e_(t19);
    }), this.register(function(t19) {
      return new K0(t19);
    }), this.register(function(t19) {
      return new t_(t19);
    }), this.register(function(t19) {
      return new J0(t19);
    }), this.register(function(t19) {
      return new q0(t19);
    }), this.register(function(t19) {
      return new r_(t19);
    }), this.register(function(t19) {
      return new o_(t19);
    });
  }
  load(e11, t19, n33, i27) {
    const s18 = this;
    let r24;
    this.resourcePath !== "" ? r24 = this.resourcePath : this.path !== "" ? r24 = this.path : r24 = sr3.extractUrlBase(e11), this.manager.itemStart(e11);
    const o13 = function(l26) {
      i27 ? i27(l26) : console.error(l26), s18.manager.itemError(e11), s18.manager.itemEnd(e11);
    }, c27 = new dr3(this.manager);
    c27.setPath(this.path), c27.setResponseType("arraybuffer"), c27.setRequestHeader(this.requestHeader), c27.setWithCredentials(this.withCredentials), c27.load(e11, function(l26) {
      try {
        s18.parse(l26, r24, function(u35) {
          t19(u35), s18.manager.itemEnd(e11);
        }, o13);
      } catch (u35) {
        o13(u35);
      }
    }, n33, o13);
  }
  setDRACOLoader(e11) {
    return this.dracoLoader = e11, this;
  }
  setDDSLoader() {
    throw new Error(
      'THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".'
    );
  }
  setKTX2Loader(e11) {
    return this.ktx2Loader = e11, this;
  }
  setMeshoptDecoder(e11) {
    return this.meshoptDecoder = e11, this;
  }
  register(e11) {
    return this.pluginCallbacks.indexOf(e11) === -1 && this.pluginCallbacks.push(e11), this;
  }
  unregister(e11) {
    return this.pluginCallbacks.indexOf(e11) !== -1 && this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e11), 1), this;
  }
  parse(e11, t19, n33, i27) {
    let s18;
    const r24 = {}, o13 = {}, c27 = new TextDecoder();
    if (typeof e11 == "string")
      s18 = JSON.parse(e11);
    else if (e11 instanceof ArrayBuffer)
      if (c27.decode(new Uint8Array(e11, 0, 4)) === Du) {
        try {
          r24[tt8.KHR_BINARY_GLTF] = new a_(e11);
        } catch (h26) {
          i27 && i27(h26);
          return;
        }
        s18 = JSON.parse(r24[tt8.KHR_BINARY_GLTF].content);
      } else
        s18 = JSON.parse(c27.decode(e11));
    else
      s18 = e11;
    if (s18.asset === void 0 || s18.asset.version[0] < 2) {
      i27 && i27(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));
      return;
    }
    const l26 = new v_(s18, {
      path: t19 || this.resourcePath || "",
      crossOrigin: this.crossOrigin,
      requestHeader: this.requestHeader,
      manager: this.manager,
      ktx2Loader: this.ktx2Loader,
      meshoptDecoder: this.meshoptDecoder
    });
    l26.fileLoader.setRequestHeader(this.requestHeader);
    for (let u35 = 0; u35 < this.pluginCallbacks.length; u35++) {
      const h26 = this.pluginCallbacks[u35](l26);
      o13[h26.name] = h26, r24[h26.name] = true;
    }
    if (s18.extensionsUsed)
      for (let u35 = 0; u35 < s18.extensionsUsed.length; ++u35) {
        const h26 = s18.extensionsUsed[u35], d34 = s18.extensionsRequired || [];
        switch (h26) {
          case tt8.KHR_MATERIALS_UNLIT:
            r24[h26] = new X0();
            break;
          case tt8.KHR_DRACO_MESH_COMPRESSION:
            r24[h26] = new l_(s18, this.dracoLoader);
            break;
          case tt8.KHR_TEXTURE_TRANSFORM:
            r24[h26] = new c_();
            break;
          case tt8.KHR_MESH_QUANTIZATION:
            r24[h26] = new u_();
            break;
          default:
            d34.indexOf(h26) >= 0 && o13[h26] === void 0 && console.warn('THREE.GLTFLoader: Unknown extension "' + h26 + '".');
        }
      }
    l26.setExtensions(r24), l26.setPlugins(o13), l26.parse(n33, i27);
  }
  parseAsync(e11, t19) {
    const n33 = this;
    return new Promise(function(i27, s18) {
      n33.parse(e11, t19, i27, s18);
    });
  }
};
function j0() {
  let a22 = {};
  return {
    get: function(e11) {
      return a22[e11];
    },
    add: function(e11, t19) {
      a22[e11] = t19;
    },
    remove: function(e11) {
      delete a22[e11];
    },
    removeAll: function() {
      a22 = {};
    }
  };
}
var tt8 = {
  KHR_BINARY_GLTF: "KHR_binary_glTF",
  KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression",
  KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual",
  KHR_MATERIALS_CLEARCOAT: "KHR_materials_clearcoat",
  KHR_MATERIALS_IOR: "KHR_materials_ior",
  KHR_MATERIALS_SHEEN: "KHR_materials_sheen",
  KHR_MATERIALS_SPECULAR: "KHR_materials_specular",
  KHR_MATERIALS_TRANSMISSION: "KHR_materials_transmission",
  KHR_MATERIALS_IRIDESCENCE: "KHR_materials_iridescence",
  KHR_MATERIALS_UNLIT: "KHR_materials_unlit",
  KHR_MATERIALS_VOLUME: "KHR_materials_volume",
  KHR_TEXTURE_BASISU: "KHR_texture_basisu",
  KHR_TEXTURE_TRANSFORM: "KHR_texture_transform",
  KHR_MESH_QUANTIZATION: "KHR_mesh_quantization",
  KHR_MATERIALS_EMISSIVE_STRENGTH: "KHR_materials_emissive_strength",
  EXT_TEXTURE_WEBP: "EXT_texture_webp",
  EXT_TEXTURE_AVIF: "EXT_texture_avif",
  EXT_MESHOPT_COMPRESSION: "EXT_meshopt_compression",
  EXT_MESH_GPU_INSTANCING: "EXT_mesh_gpu_instancing"
};
var q0 = class {
  constructor(e11) {
    this.parser = e11, this.name = tt8.KHR_LIGHTS_PUNCTUAL, this.cache = { refs: {}, uses: {} };
  }
  _markDefs() {
    const e11 = this.parser, t19 = this.parser.json.nodes || [];
    for (let n33 = 0, i27 = t19.length; n33 < i27; n33++) {
      const s18 = t19[n33];
      s18.extensions && s18.extensions[this.name] && s18.extensions[this.name].light !== void 0 && e11._addNodeRef(this.cache, s18.extensions[this.name].light);
    }
  }
  _loadLight(e11) {
    const t19 = this.parser, n33 = "light:" + e11;
    let i27 = t19.cache.get(n33);
    if (i27)
      return i27;
    const s18 = t19.json, c27 = ((s18.extensions && s18.extensions[this.name] || {}).lights || [])[e11];
    let l26;
    const u35 = new ze4(16777215);
    c27.color !== void 0 && u35.fromArray(c27.color);
    const h26 = c27.range !== void 0 ? c27.range : 0;
    switch (c27.type) {
      case "directional":
        l26 = new Iu(u35), l26.target.position.set(0, 0, -1), l26.add(l26.target);
        break;
      case "point":
        l26 = new go(u35), l26.distance = h26;
        break;
      case "spot":
        l26 = new Pu(u35), l26.distance = h26, c27.spot = c27.spot || {}, c27.spot.innerConeAngle = c27.spot.innerConeAngle !== void 0 ? c27.spot.innerConeAngle : 0, c27.spot.outerConeAngle = c27.spot.outerConeAngle !== void 0 ? c27.spot.outerConeAngle : Math.PI / 4, l26.angle = c27.spot.outerConeAngle, l26.penumbra = 1 - c27.spot.innerConeAngle / c27.spot.outerConeAngle, l26.target.position.set(0, 0, -1), l26.add(l26.target);
        break;
      default:
        throw new Error("THREE.GLTFLoader: Unexpected light type: " + c27.type);
    }
    return l26.position.set(0, 0, 0), l26.decay = 2, ii3(l26, c27), c27.intensity !== void 0 && (l26.intensity = c27.intensity), l26.name = t19.createUniqueName(c27.name || "light_" + e11), i27 = Promise.resolve(l26), t19.cache.add(n33, i27), i27;
  }
  getDependency(e11, t19) {
    if (e11 === "light")
      return this._loadLight(t19);
  }
  createNodeAttachment(e11) {
    const t19 = this, n33 = this.parser, s18 = n33.json.nodes[e11], o13 = (s18.extensions && s18.extensions[this.name] || {}).light;
    return o13 === void 0 ? null : this._loadLight(o13).then(function(c27) {
      return n33._getNodeRef(t19.cache, o13, c27);
    });
  }
};
var X0 = class {
  constructor() {
    this.name = tt8.KHR_MATERIALS_UNLIT;
  }
  getMaterialType() {
    return Mn3;
  }
  extendParams(e11, t19, n33) {
    const i27 = [];
    e11.color = new ze4(1, 1, 1), e11.opacity = 1;
    const s18 = t19.pbrMetallicRoughness;
    if (s18) {
      if (Array.isArray(s18.baseColorFactor)) {
        const r24 = s18.baseColorFactor;
        e11.color.fromArray(r24), e11.opacity = r24[3];
      }
      s18.baseColorTexture !== void 0 && i27.push(n33.assignTexture(e11, "map", s18.baseColorTexture, st8));
    }
    return Promise.all(i27);
  }
};
var K0 = class {
  constructor(e11) {
    this.parser = e11, this.name = tt8.KHR_MATERIALS_EMISSIVE_STRENGTH;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = i27.extensions[this.name].emissiveStrength;
    return s18 !== void 0 && (t19.emissiveIntensity = s18), Promise.resolve();
  }
};
var Y0 = class {
  constructor(e11) {
    this.parser = e11, this.name = tt8.KHR_MATERIALS_CLEARCOAT;
  }
  getMaterialType(e11) {
    const n33 = this.parser.json.materials[e11];
    return !n33.extensions || !n33.extensions[this.name] ? null : ki3;
  }
  extendMaterialParams(e11, t19) {
    const n33 = this.parser, i27 = n33.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = [], r24 = i27.extensions[this.name];
    if (r24.clearcoatFactor !== void 0 && (t19.clearcoat = r24.clearcoatFactor), r24.clearcoatTexture !== void 0 && s18.push(n33.assignTexture(t19, "clearcoatMap", r24.clearcoatTexture)), r24.clearcoatRoughnessFactor !== void 0 && (t19.clearcoatRoughness = r24.clearcoatRoughnessFactor), r24.clearcoatRoughnessTexture !== void 0 && s18.push(n33.assignTexture(t19, "clearcoatRoughnessMap", r24.clearcoatRoughnessTexture)), r24.clearcoatNormalTexture !== void 0 && (s18.push(n33.assignTexture(t19, "clearcoatNormalMap", r24.clearcoatNormalTexture)), r24.clearcoatNormalTexture.scale !== void 0)) {
      const o13 = r24.clearcoatNormalTexture.scale;
      t19.clearcoatNormalScale = new We4(o13, o13);
    }
    return Promise.all(s18);
  }
};
var J0 = class {
  constructor(e11) {
    this.parser = e11, this.name = tt8.KHR_MATERIALS_IRIDESCENCE;
  }
  getMaterialType(e11) {
    const n33 = this.parser.json.materials[e11];
    return !n33.extensions || !n33.extensions[this.name] ? null : ki3;
  }
  extendMaterialParams(e11, t19) {
    const n33 = this.parser, i27 = n33.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = [], r24 = i27.extensions[this.name];
    return r24.iridescenceFactor !== void 0 && (t19.iridescence = r24.iridescenceFactor), r24.iridescenceTexture !== void 0 && s18.push(n33.assignTexture(t19, "iridescenceMap", r24.iridescenceTexture)), r24.iridescenceIor !== void 0 && (t19.iridescenceIOR = r24.iridescenceIor), t19.iridescenceThicknessRange === void 0 && (t19.iridescenceThicknessRange = [100, 400]), r24.iridescenceThicknessMinimum !== void 0 && (t19.iridescenceThicknessRange[0] = r24.iridescenceThicknessMinimum), r24.iridescenceThicknessMaximum !== void 0 && (t19.iridescenceThicknessRange[1] = r24.iridescenceThicknessMaximum), r24.iridescenceThicknessTexture !== void 0 && s18.push(n33.assignTexture(t19, "iridescenceThicknessMap", r24.iridescenceThicknessTexture)), Promise.all(s18);
  }
};
var Z0 = class {
  constructor(e11) {
    this.parser = e11, this.name = tt8.KHR_MATERIALS_SHEEN;
  }
  getMaterialType(e11) {
    const n33 = this.parser.json.materials[e11];
    return !n33.extensions || !n33.extensions[this.name] ? null : ki3;
  }
  extendMaterialParams(e11, t19) {
    const n33 = this.parser, i27 = n33.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = [];
    t19.sheenColor = new ze4(0, 0, 0), t19.sheenRoughness = 0, t19.sheen = 1;
    const r24 = i27.extensions[this.name];
    return r24.sheenColorFactor !== void 0 && t19.sheenColor.fromArray(r24.sheenColorFactor), r24.sheenRoughnessFactor !== void 0 && (t19.sheenRoughness = r24.sheenRoughnessFactor), r24.sheenColorTexture !== void 0 && s18.push(n33.assignTexture(t19, "sheenColorMap", r24.sheenColorTexture, st8)), r24.sheenRoughnessTexture !== void 0 && s18.push(n33.assignTexture(t19, "sheenRoughnessMap", r24.sheenRoughnessTexture)), Promise.all(s18);
  }
};
var $0 = class {
  constructor(e11) {
    this.parser = e11, this.name = tt8.KHR_MATERIALS_TRANSMISSION;
  }
  getMaterialType(e11) {
    const n33 = this.parser.json.materials[e11];
    return !n33.extensions || !n33.extensions[this.name] ? null : ki3;
  }
  extendMaterialParams(e11, t19) {
    const n33 = this.parser, i27 = n33.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = [], r24 = i27.extensions[this.name];
    return r24.transmissionFactor !== void 0 && (t19.transmission = r24.transmissionFactor), r24.transmissionTexture !== void 0 && s18.push(n33.assignTexture(t19, "transmissionMap", r24.transmissionTexture)), Promise.all(s18);
  }
};
var Q0 = class {
  constructor(e11) {
    this.parser = e11, this.name = tt8.KHR_MATERIALS_VOLUME;
  }
  getMaterialType(e11) {
    const n33 = this.parser.json.materials[e11];
    return !n33.extensions || !n33.extensions[this.name] ? null : ki3;
  }
  extendMaterialParams(e11, t19) {
    const n33 = this.parser, i27 = n33.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = [], r24 = i27.extensions[this.name];
    t19.thickness = r24.thicknessFactor !== void 0 ? r24.thicknessFactor : 0, r24.thicknessTexture !== void 0 && s18.push(n33.assignTexture(t19, "thicknessMap", r24.thicknessTexture)), t19.attenuationDistance = r24.attenuationDistance || 1 / 0;
    const o13 = r24.attenuationColor || [1, 1, 1];
    return t19.attenuationColor = new ze4(o13[0], o13[1], o13[2]), Promise.all(s18);
  }
};
var e_ = class {
  constructor(e11) {
    this.parser = e11, this.name = tt8.KHR_MATERIALS_IOR;
  }
  getMaterialType(e11) {
    const n33 = this.parser.json.materials[e11];
    return !n33.extensions || !n33.extensions[this.name] ? null : ki3;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = i27.extensions[this.name];
    return t19.ior = s18.ior !== void 0 ? s18.ior : 1.5, Promise.resolve();
  }
};
var t_ = class {
  constructor(e11) {
    this.parser = e11, this.name = tt8.KHR_MATERIALS_SPECULAR;
  }
  getMaterialType(e11) {
    const n33 = this.parser.json.materials[e11];
    return !n33.extensions || !n33.extensions[this.name] ? null : ki3;
  }
  extendMaterialParams(e11, t19) {
    const n33 = this.parser, i27 = n33.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const s18 = [], r24 = i27.extensions[this.name];
    t19.specularIntensity = r24.specularFactor !== void 0 ? r24.specularFactor : 1, r24.specularTexture !== void 0 && s18.push(n33.assignTexture(t19, "specularIntensityMap", r24.specularTexture));
    const o13 = r24.specularColorFactor || [1, 1, 1];
    return t19.specularColor = new ze4(o13[0], o13[1], o13[2]), r24.specularColorTexture !== void 0 && s18.push(n33.assignTexture(t19, "specularColorMap", r24.specularColorTexture, st8)), Promise.all(s18);
  }
};
var n_ = class {
  constructor(e11) {
    this.parser = e11, this.name = tt8.KHR_TEXTURE_BASISU;
  }
  loadTexture(e11) {
    const t19 = this.parser, n33 = t19.json, i27 = n33.textures[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return null;
    const s18 = i27.extensions[this.name], r24 = t19.options.ktx2Loader;
    if (!r24) {
      if (n33.extensionsRequired && n33.extensionsRequired.indexOf(this.name) >= 0)
        throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");
      return null;
    }
    return t19.loadTextureImage(e11, s18.source, r24);
  }
};
var i_ = class {
  constructor(e11) {
    this.parser = e11, this.name = tt8.EXT_TEXTURE_WEBP, this.isSupported = null;
  }
  loadTexture(e11) {
    const t19 = this.name, n33 = this.parser, i27 = n33.json, s18 = i27.textures[e11];
    if (!s18.extensions || !s18.extensions[t19])
      return null;
    const r24 = s18.extensions[t19], o13 = i27.images[r24.source];
    let c27 = n33.textureLoader;
    if (o13.uri) {
      const l26 = n33.options.manager.getHandler(o13.uri);
      l26 !== null && (c27 = l26);
    }
    return this.detectSupport().then(function(l26) {
      if (l26)
        return n33.loadTextureImage(e11, r24.source, c27);
      if (i27.extensionsRequired && i27.extensionsRequired.indexOf(t19) >= 0)
        throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");
      return n33.loadTexture(e11);
    });
  }
  detectSupport() {
    return this.isSupported || (this.isSupported = new Promise(function(e11) {
      const t19 = new Image();
      t19.src = "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA", t19.onload = t19.onerror = function() {
        e11(t19.height === 1);
      };
    })), this.isSupported;
  }
};
var s_ = class {
  constructor(e11) {
    this.parser = e11, this.name = tt8.EXT_TEXTURE_AVIF, this.isSupported = null;
  }
  loadTexture(e11) {
    const t19 = this.name, n33 = this.parser, i27 = n33.json, s18 = i27.textures[e11];
    if (!s18.extensions || !s18.extensions[t19])
      return null;
    const r24 = s18.extensions[t19], o13 = i27.images[r24.source];
    let c27 = n33.textureLoader;
    if (o13.uri) {
      const l26 = n33.options.manager.getHandler(o13.uri);
      l26 !== null && (c27 = l26);
    }
    return this.detectSupport().then(function(l26) {
      if (l26)
        return n33.loadTextureImage(e11, r24.source, c27);
      if (i27.extensionsRequired && i27.extensionsRequired.indexOf(t19) >= 0)
        throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");
      return n33.loadTexture(e11);
    });
  }
  detectSupport() {
    return this.isSupported || (this.isSupported = new Promise(function(e11) {
      const t19 = new Image();
      t19.src = "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=", t19.onload = t19.onerror = function() {
        e11(t19.height === 1);
      };
    })), this.isSupported;
  }
};
var r_ = class {
  constructor(e11) {
    this.name = tt8.EXT_MESHOPT_COMPRESSION, this.parser = e11;
  }
  loadBufferView(e11) {
    const t19 = this.parser.json, n33 = t19.bufferViews[e11];
    if (n33.extensions && n33.extensions[this.name]) {
      const i27 = n33.extensions[this.name], s18 = this.parser.getDependency("buffer", i27.buffer), r24 = this.parser.options.meshoptDecoder;
      if (!r24 || !r24.supported) {
        if (t19.extensionsRequired && t19.extensionsRequired.indexOf(this.name) >= 0)
          throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");
        return null;
      }
      return s18.then(function(o13) {
        const c27 = i27.byteOffset || 0, l26 = i27.byteLength || 0, u35 = i27.count, h26 = i27.byteStride, d34 = new Uint8Array(o13, c27, l26);
        return r24.decodeGltfBufferAsync ? r24.decodeGltfBufferAsync(u35, h26, d34, i27.mode, i27.filter).then(function(p26) {
          return p26.buffer;
        }) : r24.ready.then(function() {
          const p26 = new ArrayBuffer(u35 * h26);
          return r24.decodeGltfBuffer(new Uint8Array(p26), u35, h26, d34, i27.mode, i27.filter), p26;
        });
      });
    } else
      return null;
  }
};
var o_ = class {
  constructor(e11) {
    this.name = tt8.EXT_MESH_GPU_INSTANCING, this.parser = e11;
  }
  createNodeMesh(e11) {
    const t19 = this.parser.json, n33 = t19.nodes[e11];
    if (!n33.extensions || !n33.extensions[this.name] || n33.mesh === void 0)
      return null;
    const i27 = t19.meshes[n33.mesh];
    for (const l26 of i27.primitives)
      if (l26.mode !== hn2.TRIANGLES && l26.mode !== hn2.TRIANGLE_STRIP && l26.mode !== hn2.TRIANGLE_FAN && l26.mode !== void 0)
        return null;
    const r24 = n33.extensions[this.name].attributes, o13 = [], c27 = {};
    for (const l26 in r24)
      o13.push(this.parser.getDependency("accessor", r24[l26]).then((u35) => (c27[l26] = u35, c27[l26])));
    return o13.length < 1 ? null : (o13.push(this.parser.createNodeMesh(e11)), Promise.all(o13).then((l26) => {
      const u35 = l26.pop(), h26 = u35.isGroup ? u35.children : [u35], d34 = l26[0].count, p26 = [];
      for (const g32 of h26) {
        const y34 = new Ve4(), m34 = new U9(), f40 = new qt3(), E25 = new U9(1, 1, 1), b35 = new g0(g32.geometry, g32.material, d34);
        for (let w31 = 0; w31 < d34; w31++)
          c27.TRANSLATION && m34.fromBufferAttribute(c27.TRANSLATION, w31), c27.ROTATION && f40.fromBufferAttribute(c27.ROTATION, w31), c27.SCALE && E25.fromBufferAttribute(c27.SCALE, w31), b35.setMatrixAt(w31, y34.compose(m34, f40, E25));
        for (const w31 in c27)
          w31 !== "TRANSLATION" && w31 !== "ROTATION" && w31 !== "SCALE" && g32.geometry.setAttribute(w31, c27[w31]);
        _t4.prototype.copy.call(b35, g32), this.parser.assignFinalMaterial(b35), p26.push(b35);
      }
      return u35.isGroup ? (u35.clear(), u35.add(...p26), u35) : p26[0];
    }));
  }
};
var Du = "glTF";
var qs = 12;
var Fc = { JSON: 1313821514, BIN: 5130562 };
var a_ = class {
  constructor(e11) {
    this.name = tt8.KHR_BINARY_GLTF, this.content = null, this.body = null;
    const t19 = new DataView(e11, 0, qs), n33 = new TextDecoder();
    if (this.header = {
      magic: n33.decode(new Uint8Array(e11.slice(0, 4))),
      version: t19.getUint32(4, true),
      length: t19.getUint32(8, true)
    }, this.header.magic !== Du)
      throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");
    if (this.header.version < 2)
      throw new Error("THREE.GLTFLoader: Legacy binary file detected.");
    const i27 = this.header.length - qs, s18 = new DataView(e11, qs);
    let r24 = 0;
    for (; r24 < i27; ) {
      const o13 = s18.getUint32(r24, true);
      r24 += 4;
      const c27 = s18.getUint32(r24, true);
      if (r24 += 4, c27 === Fc.JSON) {
        const l26 = new Uint8Array(e11, qs + r24, o13);
        this.content = n33.decode(l26);
      } else if (c27 === Fc.BIN) {
        const l26 = qs + r24;
        this.body = e11.slice(l26, l26 + o13);
      }
      r24 += o13;
    }
    if (this.content === null)
      throw new Error("THREE.GLTFLoader: JSON content not found.");
  }
};
var l_ = class {
  constructor(e11, t19) {
    if (!t19)
      throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");
    this.name = tt8.KHR_DRACO_MESH_COMPRESSION, this.json = e11, this.dracoLoader = t19, this.dracoLoader.preload();
  }
  decodePrimitive(e11, t19) {
    const n33 = this.json, i27 = this.dracoLoader, s18 = e11.extensions[this.name].bufferView, r24 = e11.extensions[this.name].attributes, o13 = {}, c27 = {}, l26 = {};
    for (const u35 in r24) {
      const h26 = Ma[u35] || u35.toLowerCase();
      o13[h26] = r24[u35];
    }
    for (const u35 in e11.attributes) {
      const h26 = Ma[u35] || u35.toLowerCase();
      if (r24[u35] !== void 0) {
        const d34 = n33.accessors[e11.attributes[u35]], p26 = vs[d34.componentType];
        l26[h26] = p26.name, c27[h26] = d34.normalized === true;
      }
    }
    return t19.getDependency("bufferView", s18).then(function(u35) {
      return new Promise(function(h26) {
        i27.decodeDracoFile(u35, function(d34) {
          for (const p26 in d34.attributes) {
            const g32 = d34.attributes[p26], y34 = c27[p26];
            y34 !== void 0 && (g32.normalized = y34);
          }
          h26(d34);
        }, o13, l26);
      });
    });
  }
};
var c_ = class {
  constructor() {
    this.name = tt8.KHR_TEXTURE_TRANSFORM;
  }
  extendTexture(e11, t19) {
    return (t19.texCoord === void 0 || t19.texCoord === e11.channel) && t19.offset === void 0 && t19.rotation === void 0 && t19.scale === void 0 || (e11 = e11.clone(), t19.texCoord !== void 0 && (e11.channel = t19.texCoord), t19.offset !== void 0 && e11.offset.fromArray(t19.offset), t19.rotation !== void 0 && (e11.rotation = t19.rotation), t19.scale !== void 0 && e11.repeat.fromArray(t19.scale), e11.needsUpdate = true), e11;
  }
};
var u_ = class {
  constructor() {
    this.name = tt8.KHR_MESH_QUANTIZATION;
  }
};
var Nu = class extends hr3 {
  constructor(e11, t19, n33, i27) {
    super(e11, t19, n33, i27);
  }
  copySampleValue_(e11) {
    const t19 = this.resultBuffer, n33 = this.sampleValues, i27 = this.valueSize, s18 = e11 * i27 * 3 + i27;
    for (let r24 = 0; r24 !== i27; r24++)
      t19[r24] = n33[s18 + r24];
    return t19;
  }
  interpolate_(e11, t19, n33, i27) {
    const s18 = this.resultBuffer, r24 = this.sampleValues, o13 = this.valueSize, c27 = o13 * 2, l26 = o13 * 3, u35 = i27 - t19, h26 = (n33 - t19) / u35, d34 = h26 * h26, p26 = d34 * h26, g32 = e11 * l26, y34 = g32 - l26, m34 = -2 * p26 + 3 * d34, f40 = p26 - d34, E25 = 1 - m34, b35 = f40 - d34 + h26;
    for (let w31 = 0; w31 !== o13; w31++) {
      const S23 = r24[y34 + w31 + o13], D18 = r24[y34 + w31 + c27] * u35, N22 = r24[g32 + w31 + o13], I18 = r24[g32 + w31] * u35;
      s18[w31] = E25 * S23 + b35 * D18 + m34 * N22 + f40 * I18;
    }
    return s18;
  }
};
var h_ = new qt3();
var d_ = class extends Nu {
  interpolate_(e11, t19, n33, i27) {
    const s18 = super.interpolate_(e11, t19, n33, i27);
    return h_.fromArray(s18).normalize().toArray(s18), s18;
  }
};
var hn2 = {
  FLOAT: 5126,
  //FLOAT_MAT2: 35674,
  FLOAT_MAT3: 35675,
  FLOAT_MAT4: 35676,
  FLOAT_VEC2: 35664,
  FLOAT_VEC3: 35665,
  FLOAT_VEC4: 35666,
  LINEAR: 9729,
  REPEAT: 10497,
  SAMPLER_2D: 35678,
  POINTS: 0,
  LINES: 1,
  LINE_LOOP: 2,
  LINE_STRIP: 3,
  TRIANGLES: 4,
  TRIANGLE_STRIP: 5,
  TRIANGLE_FAN: 6,
  UNSIGNED_BYTE: 5121,
  UNSIGNED_SHORT: 5123
};
var vs = {
  5120: Int8Array,
  5121: Uint8Array,
  5122: Int16Array,
  5123: Uint16Array,
  5125: Uint32Array,
  5126: Float32Array
};
var zc = {
  9728: Bt3,
  9729: Ht4,
  9984: pa,
  9985: tu,
  9986: Qr3,
  9987: jn3
};
var Bc = {
  33071: Zt3,
  33648: to,
  10497: Rn3
};
var aa = {
  SCALAR: 1,
  VEC2: 2,
  VEC3: 3,
  VEC4: 4,
  MAT2: 4,
  MAT3: 9,
  MAT4: 16
};
var Ma = {
  POSITION: "position",
  NORMAL: "normal",
  TANGENT: "tangent",
  TEXCOORD_0: "uv",
  TEXCOORD_1: "uv2",
  COLOR_0: "color",
  WEIGHTS_0: "skinWeight",
  JOINTS_0: "skinIndex"
};
var ti3 = {
  scale: "scale",
  translation: "position",
  rotation: "quaternion",
  weights: "morphTargetInfluences"
};
var f_ = {
  CUBICSPLINE: void 0,
  // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each
  // keyframe track will be initialized with a default interpolation type, then modified.
  LINEAR: As,
  STEP: er3
};
var la = {
  OPAQUE: "OPAQUE",
  MASK: "MASK",
  BLEND: "BLEND"
};
function p_(a22) {
  return a22.DefaultMaterial === void 0 && (a22.DefaultMaterial = new ur3({
    color: 16777215,
    emissive: 0,
    metalness: 1,
    roughness: 1,
    transparent: false,
    depthTest: true,
    side: Pn3
  })), a22.DefaultMaterial;
}
function Xs(a22, e11, t19) {
  for (const n33 in t19.extensions)
    a22[n33] === void 0 && (e11.userData.gltfExtensions = e11.userData.gltfExtensions || {}, e11.userData.gltfExtensions[n33] = t19.extensions[n33]);
}
function ii3(a22, e11) {
  e11.extras !== void 0 && (typeof e11.extras == "object" ? Object.assign(a22.userData, e11.extras) : console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, " + e11.extras));
}
function m_(a22, e11, t19) {
  let n33 = false, i27 = false, s18 = false;
  for (let l26 = 0, u35 = e11.length; l26 < u35; l26++) {
    const h26 = e11[l26];
    if (h26.POSITION !== void 0 && (n33 = true), h26.NORMAL !== void 0 && (i27 = true), h26.COLOR_0 !== void 0 && (s18 = true), n33 && i27 && s18)
      break;
  }
  if (!n33 && !i27 && !s18)
    return Promise.resolve(a22);
  const r24 = [], o13 = [], c27 = [];
  for (let l26 = 0, u35 = e11.length; l26 < u35; l26++) {
    const h26 = e11[l26];
    if (n33) {
      const d34 = h26.POSITION !== void 0 ? t19.getDependency("accessor", h26.POSITION) : a22.attributes.position;
      r24.push(d34);
    }
    if (i27) {
      const d34 = h26.NORMAL !== void 0 ? t19.getDependency("accessor", h26.NORMAL) : a22.attributes.normal;
      o13.push(d34);
    }
    if (s18) {
      const d34 = h26.COLOR_0 !== void 0 ? t19.getDependency("accessor", h26.COLOR_0) : a22.attributes.color;
      c27.push(d34);
    }
  }
  return Promise.all([
    Promise.all(r24),
    Promise.all(o13),
    Promise.all(c27)
  ]).then(function(l26) {
    const u35 = l26[0], h26 = l26[1], d34 = l26[2];
    return n33 && (a22.morphAttributes.position = u35), i27 && (a22.morphAttributes.normal = h26), s18 && (a22.morphAttributes.color = d34), a22.morphTargetsRelative = true, a22;
  });
}
function g_(a22, e11) {
  if (a22.updateMorphTargets(), e11.weights !== void 0)
    for (let t19 = 0, n33 = e11.weights.length; t19 < n33; t19++)
      a22.morphTargetInfluences[t19] = e11.weights[t19];
  if (e11.extras && Array.isArray(e11.extras.targetNames)) {
    const t19 = e11.extras.targetNames;
    if (a22.morphTargetInfluences.length === t19.length) {
      a22.morphTargetDictionary = {};
      for (let n33 = 0, i27 = t19.length; n33 < i27; n33++)
        a22.morphTargetDictionary[t19[n33]] = n33;
    } else
      console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.");
  }
}
function __(a22) {
  const e11 = a22.extensions && a22.extensions[tt8.KHR_DRACO_MESH_COMPRESSION];
  let t19;
  return e11 ? t19 = "draco:" + e11.bufferView + ":" + e11.indices + ":" + Vc(e11.attributes) : t19 = a22.indices + ":" + Vc(a22.attributes) + ":" + a22.mode, t19;
}
function Vc(a22) {
  let e11 = "";
  const t19 = Object.keys(a22).sort();
  for (let n33 = 0, i27 = t19.length; n33 < i27; n33++)
    e11 += t19[n33] + ":" + a22[t19[n33]] + ";";
  return e11;
}
function Sa(a22) {
  switch (a22) {
    case Int8Array:
      return 1 / 127;
    case Uint8Array:
      return 1 / 255;
    case Int16Array:
      return 1 / 32767;
    case Uint16Array:
      return 1 / 65535;
    default:
      throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.");
  }
}
function x_(a22) {
  return a22.search(/\.jpe?g($|\?)/i) > 0 || a22.search(/^data\:image\/jpeg/) === 0 ? "image/jpeg" : a22.search(/\.webp($|\?)/i) > 0 || a22.search(/^data\:image\/webp/) === 0 ? "image/webp" : "image/png";
}
var y_ = new Ve4();
var v_ = class {
  constructor(e11 = {}, t19 = {}) {
    this.json = e11, this.extensions = {}, this.plugins = {}, this.options = t19, this.cache = new j0(), this.associations = /* @__PURE__ */ new Map(), this.primitiveCache = {}, this.nodeCache = {}, this.meshCache = { refs: {}, uses: {} }, this.cameraCache = { refs: {}, uses: {} }, this.lightCache = { refs: {}, uses: {} }, this.sourceCache = {}, this.textureCache = {}, this.nodeNamesUsed = {};
    let n33 = false, i27 = false, s18 = -1;
    typeof navigator < "u" && (n33 = /^((?!chrome|android).)*safari/i.test(navigator.userAgent) === true, i27 = navigator.userAgent.indexOf("Firefox") > -1, s18 = i27 ? navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1] : -1), typeof createImageBitmap > "u" || n33 || i27 && s18 < 98 ? this.textureLoader = new za(this.options.manager) : this.textureLoader = new U0(this.options.manager), this.textureLoader.setCrossOrigin(this.options.crossOrigin), this.textureLoader.setRequestHeader(this.options.requestHeader), this.fileLoader = new dr3(this.options.manager), this.fileLoader.setResponseType("arraybuffer"), this.options.crossOrigin === "use-credentials" && this.fileLoader.setWithCredentials(true);
  }
  setExtensions(e11) {
    this.extensions = e11;
  }
  setPlugins(e11) {
    this.plugins = e11;
  }
  parse(e11, t19) {
    const n33 = this, i27 = this.json, s18 = this.extensions;
    this.cache.removeAll(), this.nodeCache = {}, this._invokeAll(function(r24) {
      return r24._markDefs && r24._markDefs();
    }), Promise.all(this._invokeAll(function(r24) {
      return r24.beforeRoot && r24.beforeRoot();
    })).then(function() {
      return Promise.all([
        n33.getDependencies("scene"),
        n33.getDependencies("animation"),
        n33.getDependencies("camera")
      ]);
    }).then(function(r24) {
      const o13 = {
        scene: r24[0][i27.scene || 0],
        scenes: r24[0],
        animations: r24[1],
        cameras: r24[2],
        asset: i27.asset,
        parser: n33,
        userData: {}
      };
      Xs(s18, o13, i27), ii3(o13, i27), Promise.all(n33._invokeAll(function(c27) {
        return c27.afterRoot && c27.afterRoot(o13);
      })).then(function() {
        e11(o13);
      });
    }).catch(t19);
  }
  /**
   * Marks the special nodes/meshes in json for efficient parse.
   */
  _markDefs() {
    const e11 = this.json.nodes || [], t19 = this.json.skins || [], n33 = this.json.meshes || [];
    for (let i27 = 0, s18 = t19.length; i27 < s18; i27++) {
      const r24 = t19[i27].joints;
      for (let o13 = 0, c27 = r24.length; o13 < c27; o13++)
        e11[r24[o13]].isBone = true;
    }
    for (let i27 = 0, s18 = e11.length; i27 < s18; i27++) {
      const r24 = e11[i27];
      r24.mesh !== void 0 && (this._addNodeRef(this.meshCache, r24.mesh), r24.skin !== void 0 && (n33[r24.mesh].isSkinnedMesh = true)), r24.camera !== void 0 && this._addNodeRef(this.cameraCache, r24.camera);
    }
  }
  /**
   * Counts references to shared node / Object3D resources. These resources
   * can be reused, or "instantiated", at multiple nodes in the scene
   * hierarchy. Mesh, Camera, and Light instances are instantiated and must
   * be marked. Non-scenegraph resources (like Materials, Geometries, and
   * Textures) can be reused directly and are not marked here.
   *
   * Example: CesiumMilkTruck sample model reuses "Wheel" meshes.
   */
  _addNodeRef(e11, t19) {
    t19 !== void 0 && (e11.refs[t19] === void 0 && (e11.refs[t19] = e11.uses[t19] = 0), e11.refs[t19]++);
  }
  /** Returns a reference to a shared resource, cloning it if necessary. */
  _getNodeRef(e11, t19, n33) {
    if (e11.refs[t19] <= 1)
      return n33;
    const i27 = n33.clone(), s18 = (r24, o13) => {
      const c27 = this.associations.get(r24);
      c27 != null && this.associations.set(o13, c27);
      for (const [l26, u35] of r24.children.entries())
        s18(u35, o13.children[l26]);
    };
    return s18(n33, i27), i27.name += "_instance_" + e11.uses[t19]++, i27;
  }
  _invokeOne(e11) {
    const t19 = Object.values(this.plugins);
    t19.push(this);
    for (let n33 = 0; n33 < t19.length; n33++) {
      const i27 = e11(t19[n33]);
      if (i27)
        return i27;
    }
    return null;
  }
  _invokeAll(e11) {
    const t19 = Object.values(this.plugins);
    t19.unshift(this);
    const n33 = [];
    for (let i27 = 0; i27 < t19.length; i27++) {
      const s18 = e11(t19[i27]);
      s18 && n33.push(s18);
    }
    return n33;
  }
  /**
   * Requests the specified dependency asynchronously, with caching.
   * @param {string} type
   * @param {number} index
   * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}
   */
  getDependency(e11, t19) {
    const n33 = e11 + ":" + t19;
    let i27 = this.cache.get(n33);
    if (!i27) {
      switch (e11) {
        case "scene":
          i27 = this.loadScene(t19);
          break;
        case "node":
          i27 = this._invokeOne(function(s18) {
            return s18.loadNode && s18.loadNode(t19);
          });
          break;
        case "mesh":
          i27 = this._invokeOne(function(s18) {
            return s18.loadMesh && s18.loadMesh(t19);
          });
          break;
        case "accessor":
          i27 = this.loadAccessor(t19);
          break;
        case "bufferView":
          i27 = this._invokeOne(function(s18) {
            return s18.loadBufferView && s18.loadBufferView(t19);
          });
          break;
        case "buffer":
          i27 = this.loadBuffer(t19);
          break;
        case "material":
          i27 = this._invokeOne(function(s18) {
            return s18.loadMaterial && s18.loadMaterial(t19);
          });
          break;
        case "texture":
          i27 = this._invokeOne(function(s18) {
            return s18.loadTexture && s18.loadTexture(t19);
          });
          break;
        case "skin":
          i27 = this.loadSkin(t19);
          break;
        case "animation":
          i27 = this._invokeOne(function(s18) {
            return s18.loadAnimation && s18.loadAnimation(t19);
          });
          break;
        case "camera":
          i27 = this.loadCamera(t19);
          break;
        default:
          if (i27 = this._invokeOne(function(s18) {
            return s18 != this && s18.getDependency && s18.getDependency(e11, t19);
          }), !i27)
            throw new Error("Unknown type: " + e11);
          break;
      }
      this.cache.add(n33, i27);
    }
    return i27;
  }
  /**
   * Requests all dependencies of the specified type asynchronously, with caching.
   * @param {string} type
   * @return {Promise<Array<Object>>}
   */
  getDependencies(e11) {
    let t19 = this.cache.get(e11);
    if (!t19) {
      const n33 = this, i27 = this.json[e11 + (e11 === "mesh" ? "es" : "s")] || [];
      t19 = Promise.all(i27.map(function(s18, r24) {
        return n33.getDependency(e11, r24);
      })), this.cache.add(e11, t19);
    }
    return t19;
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views
   * @param {number} bufferIndex
   * @return {Promise<ArrayBuffer>}
   */
  loadBuffer(e11) {
    const t19 = this.json.buffers[e11], n33 = this.fileLoader;
    if (t19.type && t19.type !== "arraybuffer")
      throw new Error("THREE.GLTFLoader: " + t19.type + " buffer type is not supported.");
    if (t19.uri === void 0 && e11 === 0)
      return Promise.resolve(this.extensions[tt8.KHR_BINARY_GLTF].body);
    const i27 = this.options;
    return new Promise(function(s18, r24) {
      n33.load(sr3.resolveURL(t19.uri, i27.path), s18, void 0, function() {
        r24(new Error('THREE.GLTFLoader: Failed to load buffer "' + t19.uri + '".'));
      });
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views
   * @param {number} bufferViewIndex
   * @return {Promise<ArrayBuffer>}
   */
  loadBufferView(e11) {
    const t19 = this.json.bufferViews[e11];
    return this.getDependency("buffer", t19.buffer).then(function(n33) {
      const i27 = t19.byteLength || 0, s18 = t19.byteOffset || 0;
      return n33.slice(s18, s18 + i27);
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors
   * @param {number} accessorIndex
   * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}
   */
  loadAccessor(e11) {
    const t19 = this, n33 = this.json, i27 = this.json.accessors[e11];
    if (i27.bufferView === void 0 && i27.sparse === void 0) {
      const r24 = aa[i27.type], o13 = vs[i27.componentType], c27 = i27.normalized === true, l26 = new o13(i27.count * r24);
      return Promise.resolve(new Gt3(l26, r24, c27));
    }
    const s18 = [];
    return i27.bufferView !== void 0 ? s18.push(this.getDependency("bufferView", i27.bufferView)) : s18.push(null), i27.sparse !== void 0 && (s18.push(this.getDependency("bufferView", i27.sparse.indices.bufferView)), s18.push(this.getDependency("bufferView", i27.sparse.values.bufferView))), Promise.all(s18).then(function(r24) {
      const o13 = r24[0], c27 = aa[i27.type], l26 = vs[i27.componentType], u35 = l26.BYTES_PER_ELEMENT, h26 = u35 * c27, d34 = i27.byteOffset || 0, p26 = i27.bufferView !== void 0 ? n33.bufferViews[i27.bufferView].byteStride : void 0, g32 = i27.normalized === true;
      let y34, m34;
      if (p26 && p26 !== h26) {
        const f40 = Math.floor(d34 / p26), E25 = "InterleavedBuffer:" + i27.bufferView + ":" + i27.componentType + ":" + f40 + ":" + i27.count;
        let b35 = t19.cache.get(E25);
        b35 || (y34 = new l26(o13, f40 * p26, i27.count * p26 / u35), b35 = new d0(y34, p26 / u35), t19.cache.add(E25, b35)), m34 = new Na(b35, c27, d34 % p26 / u35, g32);
      } else
        o13 === null ? y34 = new l26(i27.count * c27) : y34 = new l26(o13, d34, i27.count * c27), m34 = new Gt3(y34, c27, g32);
      if (i27.sparse !== void 0) {
        const f40 = aa.SCALAR, E25 = vs[i27.sparse.indices.componentType], b35 = i27.sparse.indices.byteOffset || 0, w31 = i27.sparse.values.byteOffset || 0, S23 = new E25(r24[1], b35, i27.sparse.count * f40), D18 = new l26(r24[2], w31, i27.sparse.count * c27);
        o13 !== null && (m34 = new Gt3(m34.array.slice(), m34.itemSize, m34.normalized));
        for (let N22 = 0, I18 = S23.length; N22 < I18; N22++) {
          const v31 = S23[N22];
          if (m34.setX(v31, D18[N22 * c27]), c27 >= 2 && m34.setY(v31, D18[N22 * c27 + 1]), c27 >= 3 && m34.setZ(v31, D18[N22 * c27 + 2]), c27 >= 4 && m34.setW(v31, D18[N22 * c27 + 3]), c27 >= 5)
            throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.");
        }
      }
      return m34;
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures
   * @param {number} textureIndex
   * @return {Promise<THREE.Texture|null>}
   */
  loadTexture(e11) {
    const t19 = this.json, n33 = this.options, s18 = t19.textures[e11].source, r24 = t19.images[s18];
    let o13 = this.textureLoader;
    if (r24.uri) {
      const c27 = n33.manager.getHandler(r24.uri);
      c27 !== null && (o13 = c27);
    }
    return this.loadTextureImage(e11, s18, o13);
  }
  loadTextureImage(e11, t19, n33) {
    const i27 = this, s18 = this.json, r24 = s18.textures[e11], o13 = s18.images[t19], c27 = (o13.uri || o13.bufferView) + ":" + r24.sampler;
    if (this.textureCache[c27])
      return this.textureCache[c27];
    const l26 = this.loadImageSource(t19, n33).then(function(u35) {
      u35.flipY = false, u35.name = r24.name || o13.name || "", u35.name === "" && typeof o13.uri == "string" && o13.uri.startsWith("data:image/") === false && (u35.name = o13.uri);
      const d34 = (s18.samplers || {})[r24.sampler] || {};
      return u35.magFilter = zc[d34.magFilter] || Ht4, u35.minFilter = zc[d34.minFilter] || jn3, u35.wrapS = Bc[d34.wrapS] || Rn3, u35.wrapT = Bc[d34.wrapT] || Rn3, i27.associations.set(u35, { textures: e11 }), u35;
    }).catch(function() {
      return null;
    });
    return this.textureCache[c27] = l26, l26;
  }
  loadImageSource(e11, t19) {
    const n33 = this, i27 = this.json, s18 = this.options;
    if (this.sourceCache[e11] !== void 0)
      return this.sourceCache[e11].then((h26) => h26.clone());
    const r24 = i27.images[e11], o13 = self.URL || self.webkitURL;
    let c27 = r24.uri || "", l26 = false;
    if (r24.bufferView !== void 0)
      c27 = n33.getDependency("bufferView", r24.bufferView).then(function(h26) {
        l26 = true;
        const d34 = new Blob([h26], { type: r24.mimeType });
        return c27 = o13.createObjectURL(d34), c27;
      });
    else if (r24.uri === void 0)
      throw new Error("THREE.GLTFLoader: Image " + e11 + " is missing URI and bufferView");
    const u35 = Promise.resolve(c27).then(function(h26) {
      return new Promise(function(d34, p26) {
        let g32 = d34;
        t19.isImageBitmapLoader === true && (g32 = function(y34) {
          const m34 = new jt4(y34);
          m34.needsUpdate = true, d34(m34);
        }), t19.load(sr3.resolveURL(h26, s18.path), g32, void 0, p26);
      });
    }).then(function(h26) {
      return l26 === true && o13.revokeObjectURL(c27), h26.userData.mimeType = r24.mimeType || x_(r24.uri), h26;
    }).catch(function(h26) {
      throw console.error("THREE.GLTFLoader: Couldn't load texture", c27), h26;
    });
    return this.sourceCache[e11] = u35, u35;
  }
  /**
   * Asynchronously assigns a texture to the given material parameters.
   * @param {Object} materialParams
   * @param {string} mapName
   * @param {Object} mapDef
   * @return {Promise<Texture>}
   */
  assignTexture(e11, t19, n33, i27) {
    const s18 = this;
    return this.getDependency("texture", n33.index).then(function(r24) {
      if (!r24)
        return null;
      if (n33.texCoord !== void 0 && n33.texCoord > 0 && (r24 = r24.clone(), r24.channel = n33.texCoord), s18.extensions[tt8.KHR_TEXTURE_TRANSFORM]) {
        const o13 = n33.extensions !== void 0 ? n33.extensions[tt8.KHR_TEXTURE_TRANSFORM] : void 0;
        if (o13) {
          const c27 = s18.associations.get(r24);
          r24 = s18.extensions[tt8.KHR_TEXTURE_TRANSFORM].extendTexture(r24, o13), s18.associations.set(r24, c27);
        }
      }
      return i27 !== void 0 && (r24.encoding = i27), e11[t19] = r24, r24;
    });
  }
  /**
   * Assigns final material to a Mesh, Line, or Points instance. The instance
   * already has a material (generated from the glTF material options alone)
   * but reuse of the same glTF material may require multiple threejs materials
   * to accommodate different primitive types, defines, etc. New materials will
   * be created if necessary, and reused from a cache.
   * @param  {Object3D} mesh Mesh, Line, or Points instance.
   */
  assignFinalMaterial(e11) {
    const t19 = e11.geometry;
    let n33 = e11.material;
    const i27 = t19.attributes.tangent === void 0, s18 = t19.attributes.color !== void 0, r24 = t19.attributes.normal === void 0;
    if (e11.isPoints) {
      const o13 = "PointsMaterial:" + n33.uuid;
      let c27 = this.cache.get(o13);
      c27 || (c27 = new Tu(), mn3.prototype.copy.call(c27, n33), c27.color.copy(n33.color), c27.map = n33.map, c27.sizeAttenuation = false, this.cache.add(o13, c27)), n33 = c27;
    } else if (e11.isLine) {
      const o13 = "LineBasicMaterial:" + n33.uuid;
      let c27 = this.cache.get(o13);
      c27 || (c27 = new Ls(), mn3.prototype.copy.call(c27, n33), c27.color.copy(n33.color), c27.map = n33.map, this.cache.add(o13, c27)), n33 = c27;
    }
    if (i27 || s18 || r24) {
      let o13 = "ClonedMaterial:" + n33.uuid + ":";
      i27 && (o13 += "derivative-tangents:"), s18 && (o13 += "vertex-colors:"), r24 && (o13 += "flat-shading:");
      let c27 = this.cache.get(o13);
      c27 || (c27 = n33.clone(), s18 && (c27.vertexColors = true), r24 && (c27.flatShading = true), i27 && (c27.normalScale && (c27.normalScale.y *= -1), c27.clearcoatNormalScale && (c27.clearcoatNormalScale.y *= -1)), this.cache.add(o13, c27), this.associations.set(c27, this.associations.get(n33))), n33 = c27;
    }
    e11.material = n33;
  }
  getMaterialType() {
    return ur3;
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials
   * @param {number} materialIndex
   * @return {Promise<Material>}
   */
  loadMaterial(e11) {
    const t19 = this, n33 = this.json, i27 = this.extensions, s18 = n33.materials[e11];
    let r24;
    const o13 = {}, c27 = s18.extensions || {}, l26 = [];
    if (c27[tt8.KHR_MATERIALS_UNLIT]) {
      const h26 = i27[tt8.KHR_MATERIALS_UNLIT];
      r24 = h26.getMaterialType(), l26.push(h26.extendParams(o13, s18, t19));
    } else {
      const h26 = s18.pbrMetallicRoughness || {};
      if (o13.color = new ze4(1, 1, 1), o13.opacity = 1, Array.isArray(h26.baseColorFactor)) {
        const d34 = h26.baseColorFactor;
        o13.color.fromArray(d34), o13.opacity = d34[3];
      }
      h26.baseColorTexture !== void 0 && l26.push(t19.assignTexture(o13, "map", h26.baseColorTexture, st8)), o13.metalness = h26.metallicFactor !== void 0 ? h26.metallicFactor : 1, o13.roughness = h26.roughnessFactor !== void 0 ? h26.roughnessFactor : 1, h26.metallicRoughnessTexture !== void 0 && (l26.push(t19.assignTexture(o13, "metalnessMap", h26.metallicRoughnessTexture)), l26.push(t19.assignTexture(o13, "roughnessMap", h26.metallicRoughnessTexture))), r24 = this._invokeOne(function(d34) {
        return d34.getMaterialType && d34.getMaterialType(e11);
      }), l26.push(Promise.all(this._invokeAll(function(d34) {
        return d34.extendMaterialParams && d34.extendMaterialParams(e11, o13);
      })));
    }
    s18.doubleSided === true && (o13.side = fn3);
    const u35 = s18.alphaMode || la.OPAQUE;
    if (u35 === la.BLEND ? (o13.transparent = true, o13.depthWrite = false) : (o13.transparent = false, u35 === la.MASK && (o13.alphaTest = s18.alphaCutoff !== void 0 ? s18.alphaCutoff : 0.5)), s18.normalTexture !== void 0 && r24 !== Mn3 && (l26.push(t19.assignTexture(o13, "normalMap", s18.normalTexture)), o13.normalScale = new We4(1, 1), s18.normalTexture.scale !== void 0)) {
      const h26 = s18.normalTexture.scale;
      o13.normalScale.set(h26, h26);
    }
    return s18.occlusionTexture !== void 0 && r24 !== Mn3 && (l26.push(t19.assignTexture(o13, "aoMap", s18.occlusionTexture)), s18.occlusionTexture.strength !== void 0 && (o13.aoMapIntensity = s18.occlusionTexture.strength)), s18.emissiveFactor !== void 0 && r24 !== Mn3 && (o13.emissive = new ze4().fromArray(s18.emissiveFactor)), s18.emissiveTexture !== void 0 && r24 !== Mn3 && l26.push(t19.assignTexture(o13, "emissiveMap", s18.emissiveTexture, st8)), Promise.all(l26).then(function() {
      const h26 = new r24(o13);
      return s18.name && (h26.name = s18.name), ii3(h26, s18), t19.associations.set(h26, { materials: e11 }), s18.extensions && Xs(i27, h26, s18), h26;
    });
  }
  /** When Object3D instances are targeted by animation, they need unique names. */
  createUniqueName(e11) {
    const t19 = dt7.sanitizeNodeName(e11 || "");
    let n33 = t19;
    for (let i27 = 1; this.nodeNamesUsed[n33]; ++i27)
      n33 = t19 + "_" + i27;
    return this.nodeNamesUsed[n33] = true, n33;
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry
   *
   * Creates BufferGeometries from primitives.
   *
   * @param {Array<GLTF.Primitive>} primitives
   * @return {Promise<Array<BufferGeometry>>}
   */
  loadGeometries(e11) {
    const t19 = this, n33 = this.extensions, i27 = this.primitiveCache;
    function s18(o13) {
      return n33[tt8.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o13, t19).then(function(c27) {
        return Gc(c27, o13, t19);
      });
    }
    const r24 = [];
    for (let o13 = 0, c27 = e11.length; o13 < c27; o13++) {
      const l26 = e11[o13], u35 = __(l26), h26 = i27[u35];
      if (h26)
        r24.push(h26.promise);
      else {
        let d34;
        l26.extensions && l26.extensions[tt8.KHR_DRACO_MESH_COMPRESSION] ? d34 = s18(l26) : d34 = Gc(new Xt3(), l26, t19), i27[u35] = { primitive: l26, promise: d34 }, r24.push(d34);
      }
    }
    return Promise.all(r24);
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes
   * @param {number} meshIndex
   * @return {Promise<Group|Mesh|SkinnedMesh>}
   */
  loadMesh(e11) {
    const t19 = this, n33 = this.json, i27 = this.extensions, s18 = n33.meshes[e11], r24 = s18.primitives, o13 = [];
    for (let c27 = 0, l26 = r24.length; c27 < l26; c27++) {
      const u35 = r24[c27].material === void 0 ? p_(this.cache) : this.getDependency("material", r24[c27].material);
      o13.push(u35);
    }
    return o13.push(t19.loadGeometries(r24)), Promise.all(o13).then(function(c27) {
      const l26 = c27.slice(0, c27.length - 1), u35 = c27[c27.length - 1], h26 = [];
      for (let p26 = 0, g32 = u35.length; p26 < g32; p26++) {
        const y34 = u35[p26], m34 = r24[p26];
        let f40;
        const E25 = l26[p26];
        if (m34.mode === hn2.TRIANGLES || m34.mode === hn2.TRIANGLE_STRIP || m34.mode === hn2.TRIANGLE_FAN || m34.mode === void 0)
          f40 = s18.isSkinnedMesh === true ? new Su(y34, E25) : new Pt5(y34, E25), f40.isSkinnedMesh === true && f40.normalizeSkinWeights(), m34.mode === hn2.TRIANGLE_STRIP ? f40.geometry = Oc(f40.geometry, iu) : m34.mode === hn2.TRIANGLE_FAN && (f40.geometry = Oc(f40.geometry, ma));
        else if (m34.mode === hn2.LINES)
          f40 = new ka(y34, E25);
        else if (m34.mode === hn2.LINE_STRIP)
          f40 = new cr3(y34, E25);
        else if (m34.mode === hn2.LINE_LOOP)
          f40 = new _0(y34, E25);
        else if (m34.mode === hn2.POINTS)
          f40 = new x0(y34, E25);
        else
          throw new Error("THREE.GLTFLoader: Primitive mode unsupported: " + m34.mode);
        Object.keys(f40.geometry.morphAttributes).length > 0 && g_(f40, s18), f40.name = t19.createUniqueName(s18.name || "mesh_" + e11), ii3(f40, s18), m34.extensions && Xs(i27, f40, m34), t19.assignFinalMaterial(f40), h26.push(f40);
      }
      for (let p26 = 0, g32 = h26.length; p26 < g32; p26++)
        t19.associations.set(h26[p26], {
          meshes: e11,
          primitives: p26
        });
      if (h26.length === 1)
        return h26[0];
      const d34 = new Ct4();
      t19.associations.set(d34, { meshes: e11 });
      for (let p26 = 0, g32 = h26.length; p26 < g32; p26++)
        d34.add(h26[p26]);
      return d34;
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras
   * @param {number} cameraIndex
   * @return {Promise<THREE.Camera>}
   */
  loadCamera(e11) {
    let t19;
    const n33 = this.json.cameras[e11], i27 = n33[n33.type];
    if (!i27) {
      console.warn("THREE.GLTFLoader: Missing camera parameters.");
      return;
    }
    return n33.type === "perspective" ? t19 = new Vt3(ps.radToDeg(i27.yfov), i27.aspectRatio || 1, i27.znear || 1, i27.zfar || 2e6) : n33.type === "orthographic" && (t19 = new ho(-i27.xmag, i27.xmag, i27.ymag, -i27.ymag, i27.znear, i27.zfar)), n33.name && (t19.name = this.createUniqueName(n33.name)), ii3(t19, n33), Promise.resolve(t19);
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins
   * @param {number} skinIndex
   * @return {Promise<Skeleton>}
   */
  loadSkin(e11) {
    const t19 = this.json.skins[e11], n33 = [];
    for (let i27 = 0, s18 = t19.joints.length; i27 < s18; i27++)
      n33.push(this._loadNodeShallow(t19.joints[i27]));
    return t19.inverseBindMatrices !== void 0 ? n33.push(this.getDependency("accessor", t19.inverseBindMatrices)) : n33.push(null), Promise.all(n33).then(function(i27) {
      const s18 = i27.pop(), r24 = i27, o13 = [], c27 = [];
      for (let l26 = 0, u35 = r24.length; l26 < u35; l26++) {
        const h26 = r24[l26];
        if (h26) {
          o13.push(h26);
          const d34 = new Ve4();
          s18 !== null && d34.fromArray(s18.array, l26 * 16), c27.push(d34);
        } else
          console.warn('THREE.GLTFLoader: Joint "%s" could not be found.', t19.joints[l26]);
      }
      return new po(o13, c27);
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations
   * @param {number} animationIndex
   * @return {Promise<AnimationClip>}
   */
  loadAnimation(e11) {
    const n33 = this.json.animations[e11], i27 = n33.name ? n33.name : "animation_" + e11, s18 = [], r24 = [], o13 = [], c27 = [], l26 = [];
    for (let u35 = 0, h26 = n33.channels.length; u35 < h26; u35++) {
      const d34 = n33.channels[u35], p26 = n33.samplers[d34.sampler], g32 = d34.target, y34 = g32.node, m34 = n33.parameters !== void 0 ? n33.parameters[p26.input] : p26.input, f40 = n33.parameters !== void 0 ? n33.parameters[p26.output] : p26.output;
      g32.node !== void 0 && (s18.push(this.getDependency("node", y34)), r24.push(this.getDependency("accessor", m34)), o13.push(this.getDependency("accessor", f40)), c27.push(p26), l26.push(g32));
    }
    return Promise.all([
      Promise.all(s18),
      Promise.all(r24),
      Promise.all(o13),
      Promise.all(c27),
      Promise.all(l26)
    ]).then(function(u35) {
      const h26 = u35[0], d34 = u35[1], p26 = u35[2], g32 = u35[3], y34 = u35[4], m34 = [];
      for (let f40 = 0, E25 = h26.length; f40 < E25; f40++) {
        const b35 = h26[f40], w31 = d34[f40], S23 = p26[f40], D18 = g32[f40], N22 = y34[f40];
        if (b35 === void 0)
          continue;
        b35.updateMatrix();
        let I18;
        switch (ti3[N22.path]) {
          case ti3.weights:
            I18 = ir3;
            break;
          case ti3.rotation:
            I18 = ui3;
            break;
          case ti3.position:
          case ti3.scale:
          default:
            I18 = Pi;
            break;
        }
        const v31 = b35.name ? b35.name : b35.uuid, L12 = D18.interpolation !== void 0 ? f_[D18.interpolation] : As, G16 = [];
        ti3[N22.path] === ti3.weights ? b35.traverse(function(k29) {
          k29.morphTargetInfluences && G16.push(k29.name ? k29.name : k29.uuid);
        }) : G16.push(v31);
        let B22 = S23.array;
        if (S23.normalized) {
          const k29 = Sa(B22.constructor), V16 = new Float32Array(B22.length);
          for (let H16 = 0, W11 = B22.length; H16 < W11; H16++)
            V16[H16] = B22[H16] * k29;
          B22 = V16;
        }
        for (let k29 = 0, V16 = G16.length; k29 < V16; k29++) {
          const H16 = new I18(
            G16[k29] + "." + ti3[N22.path],
            w31.array,
            B22,
            L12
          );
          D18.interpolation === "CUBICSPLINE" && (H16.createInterpolant = function(te7) {
            const J12 = this instanceof ui3 ? d_ : Nu;
            return new J12(this.times, this.values, this.getValueSize() / 3, te7);
          }, H16.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true), m34.push(H16);
        }
      }
      return new ba(i27, void 0, m34);
    });
  }
  createNodeMesh(e11) {
    const t19 = this.json, n33 = this, i27 = t19.nodes[e11];
    return i27.mesh === void 0 ? null : n33.getDependency("mesh", i27.mesh).then(function(s18) {
      const r24 = n33._getNodeRef(n33.meshCache, i27.mesh, s18);
      return i27.weights !== void 0 && r24.traverse(function(o13) {
        if (o13.isMesh)
          for (let c27 = 0, l26 = i27.weights.length; c27 < l26; c27++)
            o13.morphTargetInfluences[c27] = i27.weights[c27];
      }), r24;
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy
   * @param {number} nodeIndex
   * @return {Promise<Object3D>}
   */
  loadNode(e11) {
    const t19 = this.json, n33 = this, i27 = t19.nodes[e11], s18 = n33._loadNodeShallow(e11), r24 = [], o13 = i27.children || [];
    for (let l26 = 0, u35 = o13.length; l26 < u35; l26++)
      r24.push(n33.getDependency("node", o13[l26]));
    const c27 = i27.skin === void 0 ? Promise.resolve(null) : n33.getDependency("skin", i27.skin);
    return Promise.all([
      s18,
      Promise.all(r24),
      c27
    ]).then(function(l26) {
      const u35 = l26[0], h26 = l26[1], d34 = l26[2];
      d34 !== null && u35.traverse(function(p26) {
        p26.isSkinnedMesh && p26.bind(d34, y_);
      });
      for (let p26 = 0, g32 = h26.length; p26 < g32; p26++)
        u35.add(h26[p26]);
      return u35;
    });
  }
  // ._loadNodeShallow() parses a single node.
  // skin and child nodes are created and added in .loadNode() (no '_' prefix).
  _loadNodeShallow(e11) {
    const t19 = this.json, n33 = this.extensions, i27 = this;
    if (this.nodeCache[e11] !== void 0)
      return this.nodeCache[e11];
    const s18 = t19.nodes[e11], r24 = s18.name ? i27.createUniqueName(s18.name) : "", o13 = [], c27 = i27._invokeOne(function(l26) {
      return l26.createNodeMesh && l26.createNodeMesh(e11);
    });
    return c27 && o13.push(c27), s18.camera !== void 0 && o13.push(i27.getDependency("camera", s18.camera).then(function(l26) {
      return i27._getNodeRef(i27.cameraCache, s18.camera, l26);
    })), i27._invokeAll(function(l26) {
      return l26.createNodeAttachment && l26.createNodeAttachment(e11);
    }).forEach(function(l26) {
      o13.push(l26);
    }), this.nodeCache[e11] = Promise.all(o13).then(function(l26) {
      let u35;
      if (s18.isBone === true ? u35 = new Ua() : l26.length > 1 ? u35 = new Ct4() : l26.length === 1 ? u35 = l26[0] : u35 = new _t4(), u35 !== l26[0])
        for (let h26 = 0, d34 = l26.length; h26 < d34; h26++)
          u35.add(l26[h26]);
      if (s18.name && (u35.userData.name = s18.name, u35.name = r24), ii3(u35, s18), s18.extensions && Xs(n33, u35, s18), s18.matrix !== void 0) {
        const h26 = new Ve4();
        h26.fromArray(s18.matrix), u35.applyMatrix4(h26);
      } else
        s18.translation !== void 0 && u35.position.fromArray(s18.translation), s18.rotation !== void 0 && u35.quaternion.fromArray(s18.rotation), s18.scale !== void 0 && u35.scale.fromArray(s18.scale);
      return i27.associations.has(u35) || i27.associations.set(u35, {}), i27.associations.get(u35).nodes = e11, u35;
    }), this.nodeCache[e11];
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes
   * @param {number} sceneIndex
   * @return {Promise<Group>}
   */
  loadScene(e11) {
    const t19 = this.extensions, n33 = this.json.scenes[e11], i27 = this, s18 = new Ct4();
    n33.name && (s18.name = i27.createUniqueName(n33.name)), ii3(s18, n33), n33.extensions && Xs(t19, s18, n33);
    const r24 = n33.nodes || [], o13 = [];
    for (let c27 = 0, l26 = r24.length; c27 < l26; c27++)
      o13.push(i27.getDependency("node", r24[c27]));
    return Promise.all(o13).then(function(c27) {
      for (let u35 = 0, h26 = c27.length; u35 < h26; u35++)
        s18.add(c27[u35]);
      const l26 = (u35) => {
        const h26 = /* @__PURE__ */ new Map();
        for (const [d34, p26] of i27.associations)
          (d34 instanceof mn3 || d34 instanceof jt4) && h26.set(d34, p26);
        return u35.traverse((d34) => {
          const p26 = i27.associations.get(d34);
          p26 != null && h26.set(d34, p26);
        }), h26;
      };
      return i27.associations = l26(s18), s18;
    });
  }
};
function b_(a22, e11, t19) {
  const n33 = e11.attributes, i27 = new qn3();
  if (n33.POSITION !== void 0) {
    const o13 = t19.json.accessors[n33.POSITION], c27 = o13.min, l26 = o13.max;
    if (c27 !== void 0 && l26 !== void 0) {
      if (i27.set(
        new U9(c27[0], c27[1], c27[2]),
        new U9(l26[0], l26[1], l26[2])
      ), o13.normalized) {
        const u35 = Sa(vs[o13.componentType]);
        i27.min.multiplyScalar(u35), i27.max.multiplyScalar(u35);
      }
    } else {
      console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");
      return;
    }
  } else
    return;
  const s18 = e11.targets;
  if (s18 !== void 0) {
    const o13 = new U9(), c27 = new U9();
    for (let l26 = 0, u35 = s18.length; l26 < u35; l26++) {
      const h26 = s18[l26];
      if (h26.POSITION !== void 0) {
        const d34 = t19.json.accessors[h26.POSITION], p26 = d34.min, g32 = d34.max;
        if (p26 !== void 0 && g32 !== void 0) {
          if (c27.setX(Math.max(Math.abs(p26[0]), Math.abs(g32[0]))), c27.setY(Math.max(Math.abs(p26[1]), Math.abs(g32[1]))), c27.setZ(Math.max(Math.abs(p26[2]), Math.abs(g32[2]))), d34.normalized) {
            const y34 = Sa(vs[d34.componentType]);
            c27.multiplyScalar(y34);
          }
          o13.max(c27);
        } else
          console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");
      }
    }
    i27.expandByVector(o13);
  }
  a22.boundingBox = i27;
  const r24 = new Xn3();
  i27.getCenter(r24.center), r24.radius = i27.min.distanceTo(i27.max) / 2, a22.boundingSphere = r24;
}
function Gc(a22, e11, t19) {
  const n33 = e11.attributes, i27 = [];
  function s18(r24, o13) {
    return t19.getDependency("accessor", r24).then(function(c27) {
      a22.setAttribute(o13, c27);
    });
  }
  for (const r24 in n33) {
    const o13 = Ma[r24] || r24.toLowerCase();
    o13 in a22.attributes || i27.push(s18(n33[r24], o13));
  }
  if (e11.indices !== void 0 && !a22.index) {
    const r24 = t19.getDependency("accessor", e11.indices).then(function(o13) {
      a22.setIndex(o13);
    });
    i27.push(r24);
  }
  return ii3(a22, e11), b_(a22, e11, t19), Promise.all(i27).then(function() {
    return e11.targets !== void 0 ? m_(a22, e11.targets, t19) : a22;
  });
}
var Hc = { type: "change" };
var ca = { type: "start" };
var Wc = { type: "end" };
var Uu = class extends Ni3 {
  constructor(e11, t19) {
    super(), this.object = e11, this.domElement = t19, this.domElement.style.touchAction = "none", this.enabled = true, this.target = new U9(), this.minDistance = 0, this.maxDistance = 1 / 0, this.minZoom = 0, this.maxZoom = 1 / 0, this.minPolarAngle = 0, this.maxPolarAngle = Math.PI, this.minAzimuthAngle = -1 / 0, this.maxAzimuthAngle = 1 / 0, this.enableDamping = false, this.dampingFactor = 0.05, this.enableZoom = true, this.zoomSpeed = 1, this.enableRotate = true, this.rotateSpeed = 1, this.enablePan = true, this.panSpeed = 1, this.screenSpacePanning = true, this.keyPanSpeed = 7, this.autoRotate = false, this.autoRotateSpeed = 2, this.keys = { LEFT: "ArrowLeft", UP: "ArrowUp", RIGHT: "ArrowRight", BOTTOM: "ArrowDown" }, this.mouseButtons = { LEFT: qi.ROTATE, MIDDLE: qi.DOLLY, RIGHT: qi.PAN }, this.touches = { ONE: Xi.ROTATE, TWO: Xi.DOLLY_PAN }, this.target0 = this.target.clone(), this.position0 = this.object.position.clone(), this.zoom0 = this.object.zoom, this._domElementKeyEvents = null, this.getPolarAngle = function() {
      return o13.phi;
    }, this.getAzimuthalAngle = function() {
      return o13.theta;
    }, this.getDistance = function() {
      return this.object.position.distanceTo(this.target);
    }, this.listenToKeyEvents = function(O20) {
      O20.addEventListener("keydown", ct12), this._domElementKeyEvents = O20;
    }, this.stopListenToKeyEvents = function() {
      this._domElementKeyEvents.removeEventListener("keydown", ct12), this._domElementKeyEvents = null;
    }, this.saveState = function() {
      n33.target0.copy(n33.target), n33.position0.copy(n33.object.position), n33.zoom0 = n33.object.zoom;
    }, this.reset = function() {
      n33.target.copy(n33.target0), n33.object.position.copy(n33.position0), n33.object.zoom = n33.zoom0, n33.object.updateProjectionMatrix(), n33.dispatchEvent(Hc), n33.update(), s18 = i27.NONE;
    }, this.update = function() {
      const O20 = new U9(), ae7 = new qt3().setFromUnitVectors(e11.up, new U9(0, 1, 0)), Z12 = ae7.clone().invert(), ye7 = new U9(), Te7 = new qt3(), Le7 = 2 * Math.PI;
      return function() {
        const Ce7 = n33.object.position;
        O20.copy(Ce7).sub(n33.target), O20.applyQuaternion(ae7), o13.setFromVector3(O20), n33.autoRotate && s18 === i27.NONE && v31(N22()), n33.enableDamping ? (o13.theta += c27.theta * n33.dampingFactor, o13.phi += c27.phi * n33.dampingFactor) : (o13.theta += c27.theta, o13.phi += c27.phi);
        let Ge7 = n33.minAzimuthAngle, Xe7 = n33.maxAzimuthAngle;
        return isFinite(Ge7) && isFinite(Xe7) && (Ge7 < -Math.PI ? Ge7 += Le7 : Ge7 > Math.PI && (Ge7 -= Le7), Xe7 < -Math.PI ? Xe7 += Le7 : Xe7 > Math.PI && (Xe7 -= Le7), Ge7 <= Xe7 ? o13.theta = Math.max(Ge7, Math.min(Xe7, o13.theta)) : o13.theta = o13.theta > (Ge7 + Xe7) / 2 ? Math.max(Ge7, o13.theta) : Math.min(Xe7, o13.theta)), o13.phi = Math.max(n33.minPolarAngle, Math.min(n33.maxPolarAngle, o13.phi)), o13.makeSafe(), o13.radius *= l26, o13.radius = Math.max(n33.minDistance, Math.min(n33.maxDistance, o13.radius)), n33.enableDamping === true ? n33.target.addScaledVector(u35, n33.dampingFactor) : n33.target.add(u35), O20.setFromSpherical(o13), O20.applyQuaternion(Z12), Ce7.copy(n33.target).add(O20), n33.object.lookAt(n33.target), n33.enableDamping === true ? (c27.theta *= 1 - n33.dampingFactor, c27.phi *= 1 - n33.dampingFactor, u35.multiplyScalar(1 - n33.dampingFactor)) : (c27.set(0, 0, 0), u35.set(0, 0, 0)), l26 = 1, h26 || ye7.distanceToSquared(n33.object.position) > r24 || 8 * (1 - Te7.dot(n33.object.quaternion)) > r24 ? (n33.dispatchEvent(Hc), ye7.copy(n33.object.position), Te7.copy(n33.object.quaternion), h26 = false, true) : false;
      };
    }(), this.dispose = function() {
      n33.domElement.removeEventListener("contextmenu", C21), n33.domElement.removeEventListener("pointerdown", je7), n33.domElement.removeEventListener("pointercancel", xt8), n33.domElement.removeEventListener("wheel", et15), n33.domElement.removeEventListener("pointermove", bt10), n33.domElement.removeEventListener("pointerup", xt8), n33._domElementKeyEvents !== null && (n33._domElementKeyEvents.removeEventListener("keydown", ct12), n33._domElementKeyEvents = null);
    };
    const n33 = this, i27 = {
      NONE: -1,
      ROTATE: 0,
      DOLLY: 1,
      PAN: 2,
      TOUCH_ROTATE: 3,
      TOUCH_PAN: 4,
      TOUCH_DOLLY_PAN: 5,
      TOUCH_DOLLY_ROTATE: 6
    };
    let s18 = i27.NONE;
    const r24 = 1e-6, o13 = new Uc(), c27 = new Uc();
    let l26 = 1;
    const u35 = new U9();
    let h26 = false;
    const d34 = new We4(), p26 = new We4(), g32 = new We4(), y34 = new We4(), m34 = new We4(), f40 = new We4(), E25 = new We4(), b35 = new We4(), w31 = new We4(), S23 = [], D18 = {};
    function N22() {
      return 2 * Math.PI / 60 / 60 * n33.autoRotateSpeed;
    }
    function I18() {
      return Math.pow(0.95, n33.zoomSpeed);
    }
    function v31(O20) {
      c27.theta -= O20;
    }
    function L12(O20) {
      c27.phi -= O20;
    }
    const G16 = function() {
      const O20 = new U9();
      return function(Z12, ye7) {
        O20.setFromMatrixColumn(ye7, 0), O20.multiplyScalar(-Z12), u35.add(O20);
      };
    }(), B22 = function() {
      const O20 = new U9();
      return function(Z12, ye7) {
        n33.screenSpacePanning === true ? O20.setFromMatrixColumn(ye7, 1) : (O20.setFromMatrixColumn(ye7, 0), O20.crossVectors(n33.object.up, O20)), O20.multiplyScalar(Z12), u35.add(O20);
      };
    }(), k29 = function() {
      const O20 = new U9();
      return function(Z12, ye7) {
        const Te7 = n33.domElement;
        if (n33.object.isPerspectiveCamera) {
          const Le7 = n33.object.position;
          O20.copy(Le7).sub(n33.target);
          let Me7 = O20.length();
          Me7 *= Math.tan(n33.object.fov / 2 * Math.PI / 180), G16(2 * Z12 * Me7 / Te7.clientHeight, n33.object.matrix), B22(2 * ye7 * Me7 / Te7.clientHeight, n33.object.matrix);
        } else
          n33.object.isOrthographicCamera ? (G16(Z12 * (n33.object.right - n33.object.left) / n33.object.zoom / Te7.clientWidth, n33.object.matrix), B22(ye7 * (n33.object.top - n33.object.bottom) / n33.object.zoom / Te7.clientHeight, n33.object.matrix)) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."), n33.enablePan = false);
      };
    }();
    function V16(O20) {
      n33.object.isPerspectiveCamera ? l26 /= O20 : n33.object.isOrthographicCamera ? (n33.object.zoom = Math.max(n33.minZoom, Math.min(n33.maxZoom, n33.object.zoom * O20)), n33.object.updateProjectionMatrix(), h26 = true) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), n33.enableZoom = false);
    }
    function H16(O20) {
      n33.object.isPerspectiveCamera ? l26 *= O20 : n33.object.isOrthographicCamera ? (n33.object.zoom = Math.max(n33.minZoom, Math.min(n33.maxZoom, n33.object.zoom / O20)), n33.object.updateProjectionMatrix(), h26 = true) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), n33.enableZoom = false);
    }
    function W11(O20) {
      d34.set(O20.clientX, O20.clientY);
    }
    function te7(O20) {
      E25.set(O20.clientX, O20.clientY);
    }
    function J12(O20) {
      y34.set(O20.clientX, O20.clientY);
    }
    function ie8(O20) {
      p26.set(O20.clientX, O20.clientY), g32.subVectors(p26, d34).multiplyScalar(n33.rotateSpeed);
      const ae7 = n33.domElement;
      v31(2 * Math.PI * g32.x / ae7.clientHeight), L12(2 * Math.PI * g32.y / ae7.clientHeight), d34.copy(p26), n33.update();
    }
    function le7(O20) {
      b35.set(O20.clientX, O20.clientY), w31.subVectors(b35, E25), w31.y > 0 ? V16(I18()) : w31.y < 0 && H16(I18()), E25.copy(b35), n33.update();
    }
    function me9(O20) {
      m34.set(O20.clientX, O20.clientY), f40.subVectors(m34, y34).multiplyScalar(n33.panSpeed), k29(f40.x, f40.y), y34.copy(m34), n33.update();
    }
    function he8(O20) {
      O20.deltaY < 0 ? H16(I18()) : O20.deltaY > 0 && V16(I18()), n33.update();
    }
    function j19(O20) {
      let ae7 = false;
      switch (O20.code) {
        case n33.keys.UP:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? L12(2 * Math.PI * n33.rotateSpeed / n33.domElement.clientHeight) : k29(0, n33.keyPanSpeed), ae7 = true;
          break;
        case n33.keys.BOTTOM:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? L12(-2 * Math.PI * n33.rotateSpeed / n33.domElement.clientHeight) : k29(0, -n33.keyPanSpeed), ae7 = true;
          break;
        case n33.keys.LEFT:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? v31(2 * Math.PI * n33.rotateSpeed / n33.domElement.clientHeight) : k29(n33.keyPanSpeed, 0), ae7 = true;
          break;
        case n33.keys.RIGHT:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? v31(-2 * Math.PI * n33.rotateSpeed / n33.domElement.clientHeight) : k29(-n33.keyPanSpeed, 0), ae7 = true;
          break;
      }
      ae7 && (O20.preventDefault(), n33.update());
    }
    function X14() {
      if (S23.length === 1)
        d34.set(S23[0].pageX, S23[0].pageY);
      else {
        const O20 = 0.5 * (S23[0].pageX + S23[1].pageX), ae7 = 0.5 * (S23[0].pageY + S23[1].pageY);
        d34.set(O20, ae7);
      }
    }
    function ee7() {
      if (S23.length === 1)
        y34.set(S23[0].pageX, S23[0].pageY);
      else {
        const O20 = 0.5 * (S23[0].pageX + S23[1].pageX), ae7 = 0.5 * (S23[0].pageY + S23[1].pageY);
        y34.set(O20, ae7);
      }
    }
    function $25() {
      const O20 = S23[0].pageX - S23[1].pageX, ae7 = S23[0].pageY - S23[1].pageY, Z12 = Math.sqrt(O20 * O20 + ae7 * ae7);
      E25.set(0, Z12);
    }
    function z21() {
      n33.enableZoom && $25(), n33.enablePan && ee7();
    }
    function be7() {
      n33.enableZoom && $25(), n33.enableRotate && X14();
    }
    function Ee5(O20) {
      if (S23.length == 1)
        p26.set(O20.pageX, O20.pageY);
      else {
        const Z12 = _e7(O20), ye7 = 0.5 * (O20.pageX + Z12.x), Te7 = 0.5 * (O20.pageY + Z12.y);
        p26.set(ye7, Te7);
      }
      g32.subVectors(p26, d34).multiplyScalar(n33.rotateSpeed);
      const ae7 = n33.domElement;
      v31(2 * Math.PI * g32.x / ae7.clientHeight), L12(2 * Math.PI * g32.y / ae7.clientHeight), d34.copy(p26);
    }
    function pe8(O20) {
      if (S23.length === 1)
        m34.set(O20.pageX, O20.pageY);
      else {
        const ae7 = _e7(O20), Z12 = 0.5 * (O20.pageX + ae7.x), ye7 = 0.5 * (O20.pageY + ae7.y);
        m34.set(Z12, ye7);
      }
      f40.subVectors(m34, y34).multiplyScalar(n33.panSpeed), k29(f40.x, f40.y), y34.copy(m34);
    }
    function ke7(O20) {
      const ae7 = _e7(O20), Z12 = O20.pageX - ae7.x, ye7 = O20.pageY - ae7.y, Te7 = Math.sqrt(Z12 * Z12 + ye7 * ye7);
      b35.set(0, Te7), w31.set(0, Math.pow(b35.y / E25.y, n33.zoomSpeed)), V16(w31.y), E25.copy(b35);
    }
    function nt17(O20) {
      n33.enableZoom && ke7(O20), n33.enablePan && pe8(O20);
    }
    function Ie7(O20) {
      n33.enableZoom && ke7(O20), n33.enableRotate && Ee5(O20);
    }
    function je7(O20) {
      n33.enabled !== false && (S23.length === 0 && (n33.domElement.setPointerCapture(O20.pointerId), n33.domElement.addEventListener("pointermove", bt10), n33.domElement.addEventListener("pointerup", xt8)), Q12(O20), O20.pointerType === "touch" ? kt10(O20) : St9(O20));
    }
    function bt10(O20) {
      n33.enabled !== false && (O20.pointerType === "touch" ? P20(O20) : wt10(O20));
    }
    function xt8(O20) {
      de9(O20), S23.length === 0 && (n33.domElement.releasePointerCapture(O20.pointerId), n33.domElement.removeEventListener("pointermove", bt10), n33.domElement.removeEventListener("pointerup", xt8)), n33.dispatchEvent(Wc), s18 = i27.NONE;
    }
    function St9(O20) {
      let ae7;
      switch (O20.button) {
        case 0:
          ae7 = n33.mouseButtons.LEFT;
          break;
        case 1:
          ae7 = n33.mouseButtons.MIDDLE;
          break;
        case 2:
          ae7 = n33.mouseButtons.RIGHT;
          break;
        default:
          ae7 = -1;
      }
      switch (ae7) {
        case qi.DOLLY:
          if (n33.enableZoom === false)
            return;
          te7(O20), s18 = i27.DOLLY;
          break;
        case qi.ROTATE:
          if (O20.ctrlKey || O20.metaKey || O20.shiftKey) {
            if (n33.enablePan === false)
              return;
            J12(O20), s18 = i27.PAN;
          } else {
            if (n33.enableRotate === false)
              return;
            W11(O20), s18 = i27.ROTATE;
          }
          break;
        case qi.PAN:
          if (O20.ctrlKey || O20.metaKey || O20.shiftKey) {
            if (n33.enableRotate === false)
              return;
            W11(O20), s18 = i27.ROTATE;
          } else {
            if (n33.enablePan === false)
              return;
            J12(O20), s18 = i27.PAN;
          }
          break;
        default:
          s18 = i27.NONE;
      }
      s18 !== i27.NONE && n33.dispatchEvent(ca);
    }
    function wt10(O20) {
      switch (s18) {
        case i27.ROTATE:
          if (n33.enableRotate === false)
            return;
          ie8(O20);
          break;
        case i27.DOLLY:
          if (n33.enableZoom === false)
            return;
          le7(O20);
          break;
        case i27.PAN:
          if (n33.enablePan === false)
            return;
          me9(O20);
          break;
      }
    }
    function et15(O20) {
      n33.enabled === false || n33.enableZoom === false || s18 !== i27.NONE || (O20.preventDefault(), n33.dispatchEvent(ca), he8(O20), n33.dispatchEvent(Wc));
    }
    function ct12(O20) {
      n33.enabled === false || n33.enablePan === false || j19(O20);
    }
    function kt10(O20) {
      switch (fe7(O20), S23.length) {
        case 1:
          switch (n33.touches.ONE) {
            case Xi.ROTATE:
              if (n33.enableRotate === false)
                return;
              X14(), s18 = i27.TOUCH_ROTATE;
              break;
            case Xi.PAN:
              if (n33.enablePan === false)
                return;
              ee7(), s18 = i27.TOUCH_PAN;
              break;
            default:
              s18 = i27.NONE;
          }
          break;
        case 2:
          switch (n33.touches.TWO) {
            case Xi.DOLLY_PAN:
              if (n33.enableZoom === false && n33.enablePan === false)
                return;
              z21(), s18 = i27.TOUCH_DOLLY_PAN;
              break;
            case Xi.DOLLY_ROTATE:
              if (n33.enableZoom === false && n33.enableRotate === false)
                return;
              be7(), s18 = i27.TOUCH_DOLLY_ROTATE;
              break;
            default:
              s18 = i27.NONE;
          }
          break;
        default:
          s18 = i27.NONE;
      }
      s18 !== i27.NONE && n33.dispatchEvent(ca);
    }
    function P20(O20) {
      switch (fe7(O20), s18) {
        case i27.TOUCH_ROTATE:
          if (n33.enableRotate === false)
            return;
          Ee5(O20), n33.update();
          break;
        case i27.TOUCH_PAN:
          if (n33.enablePan === false)
            return;
          pe8(O20), n33.update();
          break;
        case i27.TOUCH_DOLLY_PAN:
          if (n33.enableZoom === false && n33.enablePan === false)
            return;
          nt17(O20), n33.update();
          break;
        case i27.TOUCH_DOLLY_ROTATE:
          if (n33.enableZoom === false && n33.enableRotate === false)
            return;
          Ie7(O20), n33.update();
          break;
        default:
          s18 = i27.NONE;
      }
    }
    function C21(O20) {
      n33.enabled !== false && O20.preventDefault();
    }
    function Q12(O20) {
      S23.push(O20);
    }
    function de9(O20) {
      delete D18[O20.pointerId];
      for (let ae7 = 0; ae7 < S23.length; ae7++)
        if (S23[ae7].pointerId == O20.pointerId) {
          S23.splice(ae7, 1);
          return;
        }
    }
    function fe7(O20) {
      let ae7 = D18[O20.pointerId];
      ae7 === void 0 && (ae7 = new We4(), D18[O20.pointerId] = ae7), ae7.set(O20.pageX, O20.pageY);
    }
    function _e7(O20) {
      const ae7 = O20.pointerId === S23[0].pointerId ? S23[1] : S23[0];
      return D18[ae7.pointerId];
    }
    n33.domElement.addEventListener("contextmenu", C21), n33.domElement.addEventListener("pointerdown", je7), n33.domElement.addEventListener("pointercancel", xt8), n33.domElement.addEventListener("wheel", et15, { passive: false }), this.update();
  }
};
var Ii = class _Ii {
  static createButton(e11) {
    const t19 = document.createElement("button");
    function n33() {
      let c27 = null;
      async function l26(h26) {
        h26.addEventListener("end", u35), await e11.xr.setSession(h26), t19.textContent = "EXIT VR", c27 = h26;
      }
      function u35() {
        c27.removeEventListener("end", u35), t19.textContent = "ENTER VR", c27 = null;
      }
      t19.style.display = "", t19.style.cursor = "pointer", t19.style.left = "calc(50% - 50px)", t19.style.width = "100px", t19.textContent = "ENTER VR", t19.onmouseenter = function() {
        t19.style.opacity = "1.0";
      }, t19.onmouseleave = function() {
        t19.style.opacity = "0.5";
      }, t19.onclick = function() {
        if (c27 === null) {
          const h26 = { optionalFeatures: ["local-floor", "bounded-floor", "hand-tracking", "layers"] };
          navigator.xr.requestSession("immersive-vr", h26).then(l26);
        } else
          c27.end();
      };
    }
    function i27() {
      t19.style.display = "", t19.style.cursor = "auto", t19.style.left = "calc(50% - 75px)", t19.style.width = "150px", t19.onmouseenter = null, t19.onmouseleave = null, t19.onclick = null;
    }
    function s18() {
      i27(), t19.textContent = "VR NOT SUPPORTED";
    }
    function r24(c27) {
      i27(), console.warn("Exception when trying to call xr.isSessionSupported", c27), t19.textContent = "VR NOT ALLOWED";
    }
    function o13(c27) {
      c27.style.position = "absolute", c27.style.bottom = "20px", c27.style.padding = "12px 6px", c27.style.border = "1px solid #fff", c27.style.borderRadius = "4px", c27.style.background = "rgba(0,0,0,0.1)", c27.style.color = "#fff", c27.style.font = "normal 13px sans-serif", c27.style.textAlign = "center", c27.style.opacity = "0.5", c27.style.outline = "none", c27.style.zIndex = "999";
    }
    if ("xr" in navigator)
      return t19.id = "VRButton", t19.style.display = "none", o13(t19), navigator.xr.isSessionSupported("immersive-vr").then(function(c27) {
        c27 ? n33() : s18(), c27 && _Ii.xrSessionIsGranted && t19.click();
      }).catch(r24), t19;
    {
      const c27 = document.createElement("a");
      return window.isSecureContext === false ? (c27.href = document.location.href.replace(/^http:/, "https:"), c27.innerHTML = "WEBXR NEEDS HTTPS") : (c27.href = "https://immersiveweb.dev/", c27.innerHTML = "WEBXR NOT AVAILABLE"), c27.style.left = "calc(50% - 90px)", c27.style.width = "180px", c27.style.textDecoration = "none", o13(c27), c27;
    }
  }
  static registerSessionGrantedListener() {
    if ("xr" in navigator) {
      if (/WebXRViewer\//i.test(navigator.userAgent))
        return;
      navigator.xr.addEventListener("sessiongranted", () => {
        _Ii.xrSessionIsGranted = true;
      });
    }
  }
};
Ii.xrSessionIsGranted = false;
Ii.registerSessionGrantedListener();
function Ai3(a22) {
  const e11 = new qt3();
  return a22.forEach((t19) => {
    const n33 = new U9(0, 0, 0);
    t19.axis === "x" && n33.setX(1), t19.axis === "y" && n33.setY(1), t19.axis === "z" && n33.setZ(1);
    const i27 = t19.degrees * Math.PI / 180;
    e11.premultiply(new qt3().setFromAxisAngle(n33, i27));
  }), e11;
}
function $s(a22) {
  const [e11, t19, n33, i27] = Ai3(a22);
  return [i27, e11, t19, n33];
}
function _o(a22) {
  return new qt3(a22[1], a22[2], a22[3], a22[0]);
}
function ku(a22) {
  if (a22.length === 3) {
    const [e11, t19, n33] = a22;
    return {
      translation: [e11, t19, 0],
      rotation: $s([{ axis: "z", degrees: n33 }])
    };
  } else if (a22.length === 4) {
    const [e11, t19, n33, i27] = a22;
    return {
      translation: [e11, t19, n33],
      rotation: $s([{ axis: "z", degrees: i27 }])
    };
  } else if (a22.length === 6) {
    const [e11, t19, n33, i27, s18, r24] = a22;
    return {
      translation: [e11, t19, n33],
      rotation: $s([
        { axis: "x", degrees: i27 },
        { axis: "y", degrees: s18 },
        { axis: "z", degrees: r24 }
      ])
    };
  } else if (a22.length === 7) {
    const e11 = a22.slice(0, 3), t19 = a22.slice(3, 7);
    return { translation: e11, rotation: t19 };
  }
  return Wa();
}
function Wa() {
  return {
    translation: [0, 0, 0],
    rotation: [0, 0, 0, 0]
  };
}
var Ou = [
  {
    game: "Reefscape",
    src: "/3d-models/Field3d_2025.glb",
    rotations: [{ axis: "x", degrees: 90 }],
    size: [57.57291667, 26.4167],
    unit: "foot"
  },
  {
    game: "Crescendo",
    src: "/3d-models/Field3d_2024.glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 180 }
    ],
    size: [54.2708333, 26.9375],
    unit: "foot"
  },
  {
    game: "Charged Up",
    src: "/3d-models/Field3d_2023.glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 180 }
    ],
    size: [54.27083, 26.2916],
    unit: "foot"
  },
  {
    game: "Rapid React",
    src: "/3d-models/Field3d_2022.glb",
    rotations: [{ axis: "x", degrees: 90 }],
    size: [54, 27],
    unit: "foot"
  },
  {
    game: "Infinite Recharge",
    src: "/3d-models/Field3d_2021.glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 90 }
    ],
    size: [52.4375, 26.9375],
    unit: "foot"
  },
  {
    game: "Evergreen",
    src: "/3d-models/Field3d_Evergreen.glb",
    rotations: [{ axis: "x", degrees: 90 }],
    size: [54, 27],
    unit: "foot"
  }
];
var ja = [
  {
    name: "KitBot",
    src: "/3d-models/Robot_KitBot.glb",
    rotations: [{ axis: "z", degrees: 90 }],
    position: [0.12, 3.15, 0]
  },
  {
    name: "Duck Bot",
    src: "/3d-models/Robot_Duck Bot.glb",
    rotations: [{ axis: "z", degrees: 90 }],
    position: [0, 0, 0]
  },
  {
    name: "Crab Bot",
    src: "/3d-models/Robot_Crab Bot.glb",
    rotations: [
      {
        axis: "z",
        degrees: 180
      }
    ],
    position: [0, 0, 0.045]
  },
  {
    name: "Bot-Bot Awakens (6328)",
    src: "/3d-models/Robot_Bot-Bot Awakens (6328).glb",
    rotations: [
      { axis: "z", degrees: 90 },
      { axis: "y", degrees: 90 }
    ],
    position: [0, 0, 0]
  },
  {
    name: "Bot-Bot Strikes Back (6328)",
    src: "/3d-models/Robot_Bot-Bot Strikes Back (6328).glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 90 }
    ],
    position: [0.05, 0, 0.06]
  },
  {
    name: "REV 2023 Starter Bot",
    src: "/3d-models/Robot_REV 2023 Starter Bot.glb",
    rotations: [
      {
        axis: "x",
        degrees: 90
      },
      {
        axis: "z",
        degrees: 90
      }
    ],
    position: [0, 0, 0],
    components: [
      {
        name: "0",
        src: "/3d-models/Robot_REV 2023 Starter Bot_0.glb",
        rotations: [
          {
            axis: "x",
            degrees: 90
          },
          {
            axis: "z",
            degrees: 90
          },
          {
            axis: "y",
            degrees: 211
          }
        ],
        position: [0.645, 0, 0.48]
      },
      {
        name: "1",
        src: "/3d-models/Robot_REV 2023 Starter Bot_1.glb",
        rotations: [
          {
            axis: "x",
            degrees: 90
          },
          {
            axis: "z",
            degrees: 90
          }
        ],
        position: [0.305, 0, -0.37]
      }
    ]
  }
];
var xo = [
  {
    name: "R2D2",
    content: `
    <robot name="flexible">
      <link name="base_link">
        <visual>
          <geometry>
            <cylinder length="0.6" radius="0.2"/>
          </geometry>
          <material name="blue">
            <color rgba="0 0 .8 1"/>
          </material>
        </visual>
      </link>
    
      <link name="right_leg">
        <visual>
          <geometry>
            <box size="0.6 .2 .1"/>
          </geometry>
          <origin rpy="0 1.57075 0" xyz="0 0 -0.3"/>
          <material name="white">
            <color rgba="1 1 1 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="base_to_right_leg" type="fixed">
        <parent link="base_link"/>
        <child link="right_leg"/>
        <origin xyz="0.22 0 .25"/>
      </joint>
    
      <link name="right_base">
        <visual>
          <geometry>
            <box size=".1 0.4 .1"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="right_base_joint" type="fixed">
        <parent link="right_leg"/>
        <child link="right_base"/>
        <origin xyz="0 0 -0.6"/>
      </joint>
    
      <link name="right_front_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black">
            <color rgba="0 0 0 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="right_front_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="right_base"/>
        <child link="right_front_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="right_back_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="right_back_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="right_base"/>
        <child link="right_back_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 -0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="left_leg">
        <visual>
          <geometry>
            <box size="0.6 .2 .1"/>
          </geometry>
          <origin rpy="0 1.57075 0" xyz="0 0 -0.3"/>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="base_to_left_leg" type="fixed">
        <parent link="base_link"/>
        <child link="left_leg"/>
        <origin xyz="-0.22 0 .25"/>
      </joint>
    
      <link name="left_base">
        <visual>
          <geometry>
            <box size=".1 0.4 .1"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="left_base_joint" type="fixed">
        <parent link="left_leg"/>
        <child link="left_base"/>
        <origin xyz="0 0 -0.6"/>
      </joint>
    
      <link name="left_front_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="left_front_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="left_base"/>
        <child link="left_front_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="left_back_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="left_back_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="left_base"/>
        <child link="left_back_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 -0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
      <joint name="gripper_extension" type="prismatic">
        <parent link="base_link"/>
        <child link="gripper_pole"/>
        <limit effort="1000.0" lower="-0.38" upper="0" velocity="0.5"/>
        <origin rpy="0 0 1.57075" xyz="0 0.19 .2"/>
      </joint>
    
      <link name="gripper_pole">
        <visual>
          <geometry>
            <cylinder length="0.2" radius=".01"/>
          </geometry>
          <origin rpy="0 1.57075 0 " xyz="0.1 0 0"/>
          <material name="Gray">
            <color rgba=".7 .7 .7 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="left_gripper_joint" type="revolute">
        <axis xyz="0 0 1"/>
        <limit effort="1000.0" lower="0.0" upper="0.548" velocity="0.5"/>
        <origin rpy="0 0 0" xyz="0.2 0.01 0"/>
        <parent link="gripper_pole"/>
        <child link="left_gripper"/>
      </joint>
    
      <link name="left_gripper">
        <visual>
          <origin rpy="0.0 0 0" xyz="0 0 0"/>
          <geometry>
            <box size="0.1 0.02 0.02"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="left_tip_joint" type="fixed">
        <parent link="left_gripper"/>
        <child link="left_tip"/>
      </joint>
    
      <link name="left_tip">
        <visual>
          <origin rpy="0.0 0 0" xyz="0.09137 0.00495 0"/>
          <geometry>
            <mesh filename="package://pr2_description/meshes/gripper_v0/l_finger_tip.dae"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="right_gripper_joint" type="revolute">
        <axis xyz="0 0 -1"/>
        <limit effort="1000.0" lower="0.0" upper="0.548" velocity="0.5"/>
        <origin rpy="0 0 0" xyz="0.2 -0.01 0"/>
        <parent link="gripper_pole"/>
        <child link="right_gripper"/>
      </joint>
    
      <link name="right_gripper">
        <visual>
          <origin rpy="-3.1415 0 0" xyz="0 0 0"/>
          <geometry>
             <box size="0.1 0.02 0.02"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="right_tip_joint" type="fixed">
        <parent link="right_gripper"/>
        <child link="right_tip"/>
      </joint>
    
      <link name="right_tip">
        <visual>
          <origin rpy="-3.1415 0 0" xyz="0.09137 0.00495 0"/>
          <geometry>
            <mesh filename="package://pr2_description/meshes/gripper_v0/l_finger_tip.dae"/>
          </geometry>
        </visual>
      </link>
    
      <link name="head">
        <visual>
          <geometry>
            <sphere radius="0.2"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="head_swivel" type="continuous">
        <parent link="base_link"/>
        <child link="head"/>
        <axis xyz="0 0 1"/>
        <origin xyz="0 0 0.3"/>
      </joint>
    
      <link name="box">
        <visual>
          <geometry>
            <box size=".08 .08 .08"/>
          </geometry>
          <material name="blue"/>
        </visual>
      </link>
    
      <joint name="tobox" type="fixed">
        <parent link="head"/>
        <child link="box"/>
        <origin xyz="0 0.1414 0.1414"/>
      </joint>
    
    </robot>
    
    `,
    rotations: [{ axis: "z", degrees: -90 }],
    position: [0, 0, 0.5]
  },
  {
    name: "PI Robot",
    content: `
    <robot name="pi_robot">

      <!-- * * * Link Definitions * * * -->

      <link name="base_link">
        <visual>
            <origin xyz="0 0 0.0425" rpy="0 0 0"/>
          <geometry>
            <box size="0.32 0.26 0.085"/>
          </geometry>
          <material name="Cyan1">
                <color rgba="0 0.9 0.9 1.0"/>
            </material>
        </visual>	
      </link>

      <link name="base_laser">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.025" length="0.07"/>
          </geometry>
          <material name="Black1">
                <color rgba="0.2 0.2 0.2 1.0"/>
            </material>
        </visual>	
      </link>

      <link name="cpu_link">
        <visual>
            <origin xyz="0 0 0.035" rpy="0 0 0"/>
          <geometry>
            <box size="0.19 0.19 0.07"/>
          </geometry>
          <material name="Cyan2">
                <color rgba="0 0.7 0.7 1.0"/>
            </material>
        </visual>	
      </link>

        <link name="upper_base_link">
        <visual>
          <origin xyz="0 0 0.05" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.085" length="0.10"/>
          </geometry>
            <material name="Cyan3">
            <color rgba="0 0.5 0.5 0"/>
          </material>
        </visual>
      </link>

        <link name="torso_link">
        <visual>
          <origin xyz="0 0 0.12" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.05" length="0.24"/>
          </geometry>
            <material name="Yellow2">
            <color rgba="0.8 0.8 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_pan_link">
        <visual>
          <origin xyz="0 0 0.0225" rpy="0 0 0"/>
          <geometry>
            <box size="0.05 0.045 0.045"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_tilt_link">
        <visual>
          <origin xyz="0 0 0.02" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.038 0.04"/>
          </geometry>
            <material name="Green2">
            <color rgba="0.1 0.8 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="neck_link">
        <visual>
          <origin xyz="0 0 0.021" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.042"/>
          </geometry>
            <material name="Green3">
            <color rgba="0.1 0.5 0.1 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_link">
        <visual>
          <origin xyz="0 0 0.025" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.07 0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <!--	
      <link name="eyes_link">
        <visual>
          <origin xyz="0 0 0.035" rpy="0 0 0" />
          <geometry>
            <box size="0.01 0.04 0.01" />
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>
      -->

      <link name="antenna_link">
        <visual>
          <origin xyz="0 0 0.035" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.002" length="0.05"/>
          </geometry>
            <material name="Grey3">
            <color rgba="0.8 0.8 0.8 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.025 0.015 0.05"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_shoulder_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.025 0.015 0.05"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_forward_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue1">
            <color rgba="0 0 0.9 1.0"/>
          </material>
        </visual>
      </link>
        
      <link name="right_shoulder_forward_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue1">
            <color rgba="0 0 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_up_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_shoulder_up_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_upper_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.05"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_upper_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.05"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_elbow_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 1.57"/>
          <geometry>
            <box size="0.035 0.035 0.05"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_elbow_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 1.57"/>
          <geometry>
            <box size="0.035 0.035 0.05"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_lower_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_lower_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_wrist_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_wrist_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_hand_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.01 0.06"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.7 0.7 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_hand_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.01 0.06"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <!-- * * * Joint Definitions * * * -->

      <joint name="cpu_joint" type="fixed">
          <parent link="base_link"/>
          <child link="cpu_link"/>
          <origin xyz="0.025 0 0.085" rpy="0 0 0"/>
      </joint>

      <joint name="base_laser_joint" type="fixed">
          <parent link="base_link"/>
          <child link="base_laser"/>
          <origin xyz="0.18 0 0.07" rpy="0 0 0"/>
      </joint>

      <joint name="upper_base_joint" type="fixed">
          <parent link="cpu_link"/>
          <child link="upper_base_link"/>
          <origin xyz="0 0 0.07" rpy="0 0 0"/>
      </joint>

      <joint name="torso_joint" type="revolute">
          <parent link="upper_base_link"/>
          <child link="torso_link"/>
          <origin xyz="0 0 0.10" rpy="0 0 0"/>
          <axis xyz="0 0 1"/>
          <limit lower="-3.1416" upper="3.1416" effort="10" velocity="3"/>
        </joint>

      <joint name="head_pan_servo" type="fixed">
          <parent link="torso_link"/>
          <child link="head_pan_link"/>
          <origin xyz="0 0 0.225" rpy="0 0 0"/>
      </joint>

      <joint name="head_pan_joint" type="revolute">
          <parent link="head_pan_link"/>
          <child link="head_tilt_link"/>
          <origin xyz="0 0 0.045" rpy="0 0 0"/>
          <axis xyz="0 0 1"/>
          <limit lower="-3.1416" upper="3.1416" effort="10" velocity="3"/>
        </joint>
        
      <joint name="head_tilt_joint" type="revolute">
          <parent link="head_tilt_link"/>
          <child link="neck_link"/>
          <origin xyz="0 0 0.04" rpy="0 0 0"/>
          <axis xyz="0 1 0"/>
          <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
        </joint>
        
      <joint name="neck_joint" type="fixed">
          <parent link="neck_link"/>
          <child link="head_link"/>
          <origin xyz="0.05 0 0.015" rpy="0 0 0"/>
      </joint>
      <!--	
      <joint name="eyes_joint" type="fixed">
          <parent link="head_link" />
          <child link="eyes_link" />
          <origin xyz="0.02 0 0.03" rpy="0 0 0" />
      </joint>
      -->

      <joint name="antenna_joint" type="fixed">
          <parent link="head_link"/>
          <child link="antenna_link"/>
          <origin xyz="0.0 -0.025 0.065" rpy="0 0 0"/>
      </joint>

      <joint name="left_shoulder_joint" type="fixed">
          <parent link="torso_link"/>
          <child link="left_shoulder_link"/>
          <origin xyz="0 0.055 0.165" rpy="0 0 0"/>
      </joint>

      <joint name="right_shoulder_joint" type="fixed">
          <parent link="torso_link"/>
          <child link="right_shoulder_link"/>
          <origin xyz="0 -0.055 0.165" rpy="0 0 0"/>
      </joint>

      <joint name="left_shoulder_forward_joint" type="revolute">
          <parent link="left_shoulder_link"/>
          <child link="left_shoulder_forward_link"/>
          <origin xyz="0 0.025 0" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="right_shoulder_forward_joint" type="revolute">
          <parent link="right_shoulder_link"/>
          <child link="right_shoulder_forward_link"/>
          <origin xyz="0 -0.025 0" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="left_shoulder_up_joint" type="revolute">
          <parent link="left_shoulder_forward_link"/>
          <child link="left_shoulder_up_link"/>
          <origin xyz="0 0.04 -0.01" rpy="0 -0.707 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 1 0"/>
      </joint>

      <joint name="right_shoulder_up_joint" type="revolute">
          <parent link="right_shoulder_forward_link"/>
          <child link="right_shoulder_up_link"/>
          <origin xyz="0 -0.04 -0.01" rpy="0 -0.707 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 1 0"/>
      </joint>

      <joint name="left_upper_arm_joint" type="fixed">
          <parent link="left_shoulder_up_link"/>
          <child link="left_upper_arm_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
      </joint>

      <joint name="right_upper_arm_joint" type="fixed">
          <parent link="right_shoulder_up_link"/>
          <child link="right_upper_arm_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
      </joint>

      <joint name="left_elbow_joint" type="revolute">
          <parent link="left_upper_arm_link"/>
          <child link="left_elbow_link"/>
          <origin xyz="-0.005 0 -0.05" rpy="0 0 0"/>
            <limit lower="-3.146" upper="3.146" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="right_elbow_joint" type="revolute">
          <parent link="right_upper_arm_link"/>
          <child link="right_elbow_link"/>
          <origin xyz="-0.005 0 -0.05" rpy="0 0 0"/>
            <limit lower="-3.146" upper="3.146" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="left_lower_arm_joint" type="fixed">
          <parent link="left_elbow_link"/>
          <child link="left_lower_arm_link"/>
          <origin xyz="0 0 -0.08" rpy="0 0 0"/>
      </joint>

      <joint name="right_lower_arm_joint" type="fixed">
          <parent link="right_elbow_link"/>
          <child link="right_lower_arm_link"/>
          <origin xyz="0 0 -0.08" rpy="0 0 0"/>
      </joint>

      <joint name="left_wrist_joint" type="revolute">
          <parent link="left_lower_arm_link"/>
          <child link="left_wrist_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="1 0 0"/>
      </joint>

      <joint name="right_wrist_joint" type="revolute">
          <parent link="right_lower_arm_link"/>
          <child link="right_wrist_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="1 0 0"/>
      </joint>

      <joint name="left_hand_joint" type="fixed">
          <parent link="left_wrist_link"/>
          <child link="left_hand_link"/>
          <origin xyz="0 0 -0.055" rpy="0 0 0"/>
      </joint>

      <joint name="right_hand_joint" type="fixed">
          <parent link="right_wrist_link"/>
          <child link="right_hand_link"/>
          <origin xyz="0 0 -0.055" rpy="0 0 0"/>
      </joint>

      </robot>

    `,
    rotations: [],
    position: [0, 0, 0]
  }
];
var bs;
var rr3;
var or3;
var bi3;
var M_ = class {
  constructor(e11, t19, n33) {
    Ft3(this, bs);
    Ft3(this, rr3);
    Ft3(this, or3);
    Ft3(this, bi3, new Ct4());
    Kt3(this, bs, e11), Kt3(this, rr3, t19), Kt3(this, or3, n33), this.create();
  }
  create() {
    var n33, i27;
    const e11 = ft7(this, bs).getFieldGroup();
    e11.remove(ft7(this, bi3)), (n33 = ft7(this, or3)) == null || n33.call(this, this);
    const t19 = new Ct4();
    Kt3(this, bi3, t19), e11.add(ft7(this, bi3)), (i27 = ft7(this, rr3)) == null || i27.call(this, this);
  }
  getGroup() {
    return ft7(this, bi3);
  }
  getField3d() {
    return ft7(this, bs);
  }
};
bs = /* @__PURE__ */ new WeakMap(), rr3 = /* @__PURE__ */ new WeakMap(), or3 = /* @__PURE__ */ new WeakMap(), bi3 = /* @__PURE__ */ new WeakMap();
var Ps = (a22, e11) => `${a22.replace(/\/$/, "")}/${e11.replace(/^\//, "")}`;
function Fu(a22) {
  const e11 = a22.lastIndexOf("/");
  return e11 < 0 ? "" : a22.substring(0, e11);
}
var S_ = Object.defineProperty;
var Oi = (a22, e11, t19, n33) => {
  for (var i27 = void 0, s18 = a22.length - 1, r24; s18 >= 0; s18--)
    (r24 = a22[s18]) && (i27 = r24(e11, t19, i27) || i27);
  return i27 && S_(e11, t19, i27), i27;
};
var di3 = class wa extends H4 {
  constructor() {
    super(...arguments), this.objectConfigs = ja, this.name = this.objectConfigs[0].name, this.pose = [0, 0, 0], this._translation = [0, 0, 0], this._rotation = [0, 0, 0, 0], this.loader = new Ha(), this.group = new Ct4();
  }
  getObjectConfig() {
    return this.objectConfigs.find(({ name: e11 }) => e11 === this.name) ?? this.objectConfigs[0];
  }
  getField() {
    const e11 = this.closest("frc-field3d");
    if (e11)
      return e11;
  }
  static adjustMaterials(e11) {
    e11.traverse((t19) => {
      const n33 = t19;
      if (n33.isMesh && n33.material instanceof ur3) {
        const i27 = n33.material;
        i27.metalness = 0, i27.roughness = 1;
      }
    });
  }
  static updatePose(e11, t19) {
    const [n33, i27, s18] = t19.translation;
    e11.position.set(n33, i27, s18), e11.rotation.setFromQuaternion(_o(t19.rotation));
  }
  loadRobotModel() {
    const e11 = this.getField(), t19 = this.getObjectConfig();
    if (!e11)
      return;
    const n33 = e11.getFieldGroup();
    n33.remove(this.group), this.object && this.group.remove(this.object);
    const i27 = t19.components ?? [], r24 = [t19.src].concat(
      i27.map(({ src: l26 }) => l26)
    ).map(
      (l26) => new Promise((u35) => {
        this.loader.load(
          Ps(e11.assetPathPrefix ?? "", l26),
          (h26) => u35(h26)
        );
      })
    ), o13 = new Ct4();
    this.group = o13, n33.add(this.group);
    const c27 = new Ct4();
    this.object = c27, o13.add(c27), c27.rotation.setFromQuaternion(
      Ai3(t19.rotations)
    ), c27.position.set(...t19.position), Promise.all(r24).then((l26) => {
      l26.forEach((u35) => {
        wa.adjustMaterials(u35.scene), c27.add(u35.scene);
      });
    });
  }
  firstUpdated() {
    this.updateObjectConfigs(), this.renderObject();
  }
  updated(e11) {
    if (e11.has("name") && this.loadRobotModel(), e11.has("translation") || e11.has("rotation") || e11.has("pose"))
      if (this.translation || this.rotation)
        this._translation = this.translation ?? [0, 0, 0], this._rotation = this.rotation ?? [0, 0, 0, 0];
      else if (this.pose.length >= 7)
        this._translation = this.pose.slice(0, 3), this._rotation = this.pose.slice(3, 7);
      else {
        const [t19 = 0, n33 = 0, i27 = 0] = this.pose;
        this._translation = [t19, n33], this._rotation = i27;
      }
  }
  updateObjectConfigs() {
    const e11 = this.getField(), t19 = e11 == null ? void 0 : e11.objectConfigs;
    t19 != null && t19.length && t19 !== this.objectConfigs && (this.objectConfigs = t19, this.objectConfigs.some(
      (i27) => i27.name === this.name
    ) || (this.name = this.objectConfigs[0].name));
  }
  renderObject() {
    this.group && wa.updatePose(this.group, {
      translation: this._translation.length === 2 ? [...this._translation, 0] : this._translation,
      rotation: typeof this._rotation == "number" ? $s([{ axis: "z", degrees: this._rotation }]) : this._rotation
    }), requestAnimationFrame(() => {
      this.renderObject();
    });
  }
};
Oi([
  n7()
], di3.prototype, "objectConfigs");
Oi([
  Mt4({ type: String })
], di3.prototype, "name");
Oi([
  Mt4({ type: Array })
], di3.prototype, "pose");
Oi([
  Mt4({ type: Array })
], di3.prototype, "translation");
Oi([
  Mt4({ type: Array })
], di3.prototype, "rotation");
Oi([
  n7()
], di3.prototype, "_translation");
Oi([
  n7()
], di3.prototype, "_rotation");
var w_ = di3;
customElements.get("frc-field3d-object") || customElements.define("frc-field3d-object", w_);
var T_ = class extends hi3 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, n33, i27) {
    const s18 = this, r24 = new dr3(this.manager);
    r24.setPath(this.path), r24.setResponseType("arraybuffer"), r24.setRequestHeader(this.requestHeader), r24.setWithCredentials(this.withCredentials), r24.load(e11, function(o13) {
      try {
        t19(s18.parse(o13));
      } catch (c27) {
        i27 ? i27(c27) : console.error(c27), s18.manager.itemError(e11);
      }
    }, n33, i27);
  }
  parse(e11) {
    function t19(l26) {
      const u35 = new DataView(l26), h26 = 32 / 8 * 3 + 32 / 8 * 3 * 3 + 16 / 8, d34 = u35.getUint32(80, true);
      if (80 + 32 / 8 + d34 * h26 === u35.byteLength)
        return true;
      const g32 = [115, 111, 108, 105, 100];
      for (let y34 = 0; y34 < 5; y34++)
        if (n33(g32, u35, y34))
          return false;
      return true;
    }
    function n33(l26, u35, h26) {
      for (let d34 = 0, p26 = l26.length; d34 < p26; d34++)
        if (l26[d34] !== u35.getUint8(h26 + d34))
          return false;
      return true;
    }
    function i27(l26) {
      const u35 = new DataView(l26), h26 = u35.getUint32(80, true);
      let d34, p26, g32, y34 = false, m34, f40, E25, b35, w31;
      for (let L12 = 0; L12 < 70; L12++)
        u35.getUint32(L12, false) == 1129270351 && u35.getUint8(L12 + 4) == 82 && u35.getUint8(L12 + 5) == 61 && (y34 = true, m34 = new Float32Array(h26 * 3 * 3), f40 = u35.getUint8(L12 + 6) / 255, E25 = u35.getUint8(L12 + 7) / 255, b35 = u35.getUint8(L12 + 8) / 255, w31 = u35.getUint8(L12 + 9) / 255);
      const S23 = 84, D18 = 12 * 4 + 2, N22 = new Xt3(), I18 = new Float32Array(h26 * 3 * 3), v31 = new Float32Array(h26 * 3 * 3);
      for (let L12 = 0; L12 < h26; L12++) {
        const G16 = S23 + L12 * D18, B22 = u35.getFloat32(G16, true), k29 = u35.getFloat32(G16 + 4, true), V16 = u35.getFloat32(G16 + 8, true);
        if (y34) {
          const H16 = u35.getUint16(G16 + 48, true);
          H16 & 32768 ? (d34 = f40, p26 = E25, g32 = b35) : (d34 = (H16 & 31) / 31, p26 = (H16 >> 5 & 31) / 31, g32 = (H16 >> 10 & 31) / 31);
        }
        for (let H16 = 1; H16 <= 3; H16++) {
          const W11 = G16 + H16 * 12, te7 = L12 * 3 * 3 + (H16 - 1) * 3;
          I18[te7] = u35.getFloat32(W11, true), I18[te7 + 1] = u35.getFloat32(W11 + 4, true), I18[te7 + 2] = u35.getFloat32(W11 + 8, true), v31[te7] = B22, v31[te7 + 1] = k29, v31[te7 + 2] = V16, y34 && (m34[te7] = d34, m34[te7 + 1] = p26, m34[te7 + 2] = g32);
        }
      }
      return N22.setAttribute("position", new Gt3(I18, 3)), N22.setAttribute("normal", new Gt3(v31, 3)), y34 && (N22.setAttribute("color", new Gt3(m34, 3)), N22.hasColors = true, N22.alpha = w31), N22;
    }
    function s18(l26) {
      const u35 = new Xt3(), h26 = /solid([\s\S]*?)endsolid/g, d34 = /facet([\s\S]*?)endfacet/g;
      let p26 = 0;
      const g32 = /[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source, y34 = new RegExp("vertex" + g32 + g32 + g32, "g"), m34 = new RegExp("normal" + g32 + g32 + g32, "g"), f40 = [], E25 = [], b35 = new U9();
      let w31, S23 = 0, D18 = 0, N22 = 0;
      for (; (w31 = h26.exec(l26)) !== null; ) {
        D18 = N22;
        const I18 = w31[0];
        for (; (w31 = d34.exec(I18)) !== null; ) {
          let G16 = 0, B22 = 0;
          const k29 = w31[0];
          for (; (w31 = m34.exec(k29)) !== null; )
            b35.x = parseFloat(w31[1]), b35.y = parseFloat(w31[2]), b35.z = parseFloat(w31[3]), B22++;
          for (; (w31 = y34.exec(k29)) !== null; )
            f40.push(parseFloat(w31[1]), parseFloat(w31[2]), parseFloat(w31[3])), E25.push(b35.x, b35.y, b35.z), G16++, N22++;
          B22 !== 1 && console.error("THREE.STLLoader: Something isn't right with the normal of face number " + p26), G16 !== 3 && console.error("THREE.STLLoader: Something isn't right with the vertices of face number " + p26), p26++;
        }
        const v31 = D18, L12 = N22 - D18;
        u35.addGroup(v31, L12, S23), S23++;
      }
      return u35.setAttribute("position", new yt8(f40, 3)), u35.setAttribute("normal", new yt8(E25, 3)), u35;
    }
    function r24(l26) {
      return typeof l26 != "string" ? new TextDecoder().decode(l26) : l26;
    }
    function o13(l26) {
      if (typeof l26 == "string") {
        const u35 = new Uint8Array(l26.length);
        for (let h26 = 0; h26 < l26.length; h26++)
          u35[h26] = l26.charCodeAt(h26) & 255;
        return u35.buffer || u35;
      } else
        return l26;
    }
    const c27 = o13(e11);
    return t19(c27) ? i27(c27) : s18(r24(e11));
  }
};
var jc = class extends R0 {
  constructor(e11) {
    super(e11);
  }
  parse(e11) {
    function t19(W11) {
      switch (W11.image_type) {
        case d34:
        case y34:
          (W11.colormap_length > 256 || W11.colormap_size !== 24 || W11.colormap_type !== 1) && console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");
          break;
        case p26:
        case g32:
        case m34:
        case f40:
          W11.colormap_type && console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");
          break;
        case h26:
          console.error("THREE.TGALoader: No data.");
        default:
          console.error('THREE.TGALoader: Invalid type "%s".', W11.image_type);
      }
      (W11.width <= 0 || W11.height <= 0) && console.error("THREE.TGALoader: Invalid image size."), W11.pixel_size !== 8 && W11.pixel_size !== 16 && W11.pixel_size !== 24 && W11.pixel_size !== 32 && console.error('THREE.TGALoader: Invalid pixel size "%s".', W11.pixel_size);
    }
    function n33(W11, te7, J12, ie8, le7) {
      let me9, he8;
      const j19 = J12.pixel_size >> 3, X14 = J12.width * J12.height * j19;
      if (te7 && (he8 = le7.subarray(ie8, ie8 += J12.colormap_length * (J12.colormap_size >> 3))), W11) {
        me9 = new Uint8Array(X14);
        let ee7, $25, z21, be7 = 0;
        const Ee5 = new Uint8Array(j19);
        for (; be7 < X14; )
          if (ee7 = le7[ie8++], $25 = (ee7 & 127) + 1, ee7 & 128) {
            for (z21 = 0; z21 < j19; ++z21)
              Ee5[z21] = le7[ie8++];
            for (z21 = 0; z21 < $25; ++z21)
              me9.set(Ee5, be7 + z21 * j19);
            be7 += j19 * $25;
          } else {
            for ($25 *= j19, z21 = 0; z21 < $25; ++z21)
              me9[be7 + z21] = le7[ie8++];
            be7 += $25;
          }
      } else
        me9 = le7.subarray(
          ie8,
          ie8 += te7 ? J12.width * J12.height : X14
        );
      return {
        pixel_data: me9,
        palettes: he8
      };
    }
    function i27(W11, te7, J12, ie8, le7, me9, he8, j19, X14) {
      const ee7 = X14;
      let $25, z21 = 0, be7, Ee5;
      const pe8 = L12.width;
      for (Ee5 = te7; Ee5 !== ie8; Ee5 += J12)
        for (be7 = le7; be7 !== he8; be7 += me9, z21++)
          $25 = j19[z21], W11[(be7 + pe8 * Ee5) * 4 + 3] = 255, W11[(be7 + pe8 * Ee5) * 4 + 2] = ee7[$25 * 3 + 0], W11[(be7 + pe8 * Ee5) * 4 + 1] = ee7[$25 * 3 + 1], W11[(be7 + pe8 * Ee5) * 4 + 0] = ee7[$25 * 3 + 2];
      return W11;
    }
    function s18(W11, te7, J12, ie8, le7, me9, he8, j19) {
      let X14, ee7 = 0, $25, z21;
      const be7 = L12.width;
      for (z21 = te7; z21 !== ie8; z21 += J12)
        for ($25 = le7; $25 !== he8; $25 += me9, ee7 += 2)
          X14 = j19[ee7 + 0] + (j19[ee7 + 1] << 8), W11[($25 + be7 * z21) * 4 + 0] = (X14 & 31744) >> 7, W11[($25 + be7 * z21) * 4 + 1] = (X14 & 992) >> 2, W11[($25 + be7 * z21) * 4 + 2] = (X14 & 31) << 3, W11[($25 + be7 * z21) * 4 + 3] = X14 & 32768 ? 0 : 255;
      return W11;
    }
    function r24(W11, te7, J12, ie8, le7, me9, he8, j19) {
      let X14 = 0, ee7, $25;
      const z21 = L12.width;
      for ($25 = te7; $25 !== ie8; $25 += J12)
        for (ee7 = le7; ee7 !== he8; ee7 += me9, X14 += 3)
          W11[(ee7 + z21 * $25) * 4 + 3] = 255, W11[(ee7 + z21 * $25) * 4 + 2] = j19[X14 + 0], W11[(ee7 + z21 * $25) * 4 + 1] = j19[X14 + 1], W11[(ee7 + z21 * $25) * 4 + 0] = j19[X14 + 2];
      return W11;
    }
    function o13(W11, te7, J12, ie8, le7, me9, he8, j19) {
      let X14 = 0, ee7, $25;
      const z21 = L12.width;
      for ($25 = te7; $25 !== ie8; $25 += J12)
        for (ee7 = le7; ee7 !== he8; ee7 += me9, X14 += 4)
          W11[(ee7 + z21 * $25) * 4 + 2] = j19[X14 + 0], W11[(ee7 + z21 * $25) * 4 + 1] = j19[X14 + 1], W11[(ee7 + z21 * $25) * 4 + 0] = j19[X14 + 2], W11[(ee7 + z21 * $25) * 4 + 3] = j19[X14 + 3];
      return W11;
    }
    function c27(W11, te7, J12, ie8, le7, me9, he8, j19) {
      let X14, ee7 = 0, $25, z21;
      const be7 = L12.width;
      for (z21 = te7; z21 !== ie8; z21 += J12)
        for ($25 = le7; $25 !== he8; $25 += me9, ee7++)
          X14 = j19[ee7], W11[($25 + be7 * z21) * 4 + 0] = X14, W11[($25 + be7 * z21) * 4 + 1] = X14, W11[($25 + be7 * z21) * 4 + 2] = X14, W11[($25 + be7 * z21) * 4 + 3] = 255;
      return W11;
    }
    function l26(W11, te7, J12, ie8, le7, me9, he8, j19) {
      let X14 = 0, ee7, $25;
      const z21 = L12.width;
      for ($25 = te7; $25 !== ie8; $25 += J12)
        for (ee7 = le7; ee7 !== he8; ee7 += me9, X14 += 2)
          W11[(ee7 + z21 * $25) * 4 + 0] = j19[X14 + 0], W11[(ee7 + z21 * $25) * 4 + 1] = j19[X14 + 0], W11[(ee7 + z21 * $25) * 4 + 2] = j19[X14 + 0], W11[(ee7 + z21 * $25) * 4 + 3] = j19[X14 + 1];
      return W11;
    }
    function u35(W11, te7, J12, ie8, le7) {
      let me9, he8, j19, X14, ee7, $25;
      switch ((L12.flags & E25) >> b35) {
        default:
        case D18:
          me9 = 0, j19 = 1, ee7 = te7, he8 = 0, X14 = 1, $25 = J12;
          break;
        case w31:
          me9 = 0, j19 = 1, ee7 = te7, he8 = J12 - 1, X14 = -1, $25 = -1;
          break;
        case N22:
          me9 = te7 - 1, j19 = -1, ee7 = -1, he8 = 0, X14 = 1, $25 = J12;
          break;
        case S23:
          me9 = te7 - 1, j19 = -1, ee7 = -1, he8 = J12 - 1, X14 = -1, $25 = -1;
          break;
      }
      if (k29)
        switch (L12.pixel_size) {
          case 8:
            c27(W11, he8, X14, $25, me9, j19, ee7, ie8);
            break;
          case 16:
            l26(W11, he8, X14, $25, me9, j19, ee7, ie8);
            break;
          default:
            console.error("THREE.TGALoader: Format not supported.");
            break;
        }
      else
        switch (L12.pixel_size) {
          case 8:
            i27(W11, he8, X14, $25, me9, j19, ee7, ie8, le7);
            break;
          case 16:
            s18(W11, he8, X14, $25, me9, j19, ee7, ie8);
            break;
          case 24:
            r24(W11, he8, X14, $25, me9, j19, ee7, ie8);
            break;
          case 32:
            o13(W11, he8, X14, $25, me9, j19, ee7, ie8);
            break;
          default:
            console.error("THREE.TGALoader: Format not supported.");
            break;
        }
      return W11;
    }
    const h26 = 0, d34 = 1, p26 = 2, g32 = 3, y34 = 9, m34 = 10, f40 = 11, E25 = 48, b35 = 4, w31 = 0, S23 = 1, D18 = 2, N22 = 3;
    e11.length < 19 && console.error("THREE.TGALoader: Not enough data to contain header.");
    let I18 = 0;
    const v31 = new Uint8Array(e11), L12 = {
      id_length: v31[I18++],
      colormap_type: v31[I18++],
      image_type: v31[I18++],
      colormap_index: v31[I18++] | v31[I18++] << 8,
      colormap_length: v31[I18++] | v31[I18++] << 8,
      colormap_size: v31[I18++],
      origin: [
        v31[I18++] | v31[I18++] << 8,
        v31[I18++] | v31[I18++] << 8
      ],
      width: v31[I18++] | v31[I18++] << 8,
      height: v31[I18++] | v31[I18++] << 8,
      pixel_size: v31[I18++],
      flags: v31[I18++]
    };
    t19(L12), L12.id_length + I18 > e11.length && console.error("THREE.TGALoader: No data."), I18 += L12.id_length;
    let G16 = false, B22 = false, k29 = false;
    switch (L12.image_type) {
      case y34:
        G16 = true, B22 = true;
        break;
      case d34:
        B22 = true;
        break;
      case m34:
        G16 = true;
        break;
      case p26:
        break;
      case f40:
        G16 = true, k29 = true;
        break;
      case g32:
        k29 = true;
        break;
    }
    const V16 = new Uint8Array(L12.width * L12.height * 4), H16 = n33(G16, B22, L12, I18, v31);
    return u35(V16, L12.width, L12.height, H16.pixel_data, H16.palettes), {
      data: V16,
      width: L12.width,
      height: L12.height,
      flipY: true,
      generateMipmaps: true,
      minFilter: jn3
    };
  }
};
var A_ = class extends hi3 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, n33, i27) {
    const s18 = this, r24 = s18.path === "" ? sr3.extractUrlBase(e11) : s18.path, o13 = new dr3(s18.manager);
    o13.setPath(s18.path), o13.setRequestHeader(s18.requestHeader), o13.setWithCredentials(s18.withCredentials), o13.load(e11, function(c27) {
      try {
        t19(s18.parse(c27, r24));
      } catch (l26) {
        i27 ? i27(l26) : console.error(l26), s18.manager.itemError(e11);
      }
    }, n33, i27);
  }
  parse(e11, t19) {
    function n33(x36, _21) {
      const T21 = [], M13 = x36.childNodes;
      for (let A18 = 0, Y13 = M13.length; A18 < Y13; A18++) {
        const re8 = M13[A18];
        re8.nodeName === _21 && T21.push(re8);
      }
      return T21;
    }
    function i27(x36) {
      if (x36.length === 0)
        return [];
      const _21 = x36.trim().split(/\s+/), T21 = new Array(_21.length);
      for (let M13 = 0, A18 = _21.length; M13 < A18; M13++)
        T21[M13] = _21[M13];
      return T21;
    }
    function s18(x36) {
      if (x36.length === 0)
        return [];
      const _21 = x36.trim().split(/\s+/), T21 = new Array(_21.length);
      for (let M13 = 0, A18 = _21.length; M13 < A18; M13++)
        T21[M13] = parseFloat(_21[M13]);
      return T21;
    }
    function r24(x36) {
      if (x36.length === 0)
        return [];
      const _21 = x36.trim().split(/\s+/), T21 = new Array(_21.length);
      for (let M13 = 0, A18 = _21.length; M13 < A18; M13++)
        T21[M13] = parseInt(_21[M13]);
      return T21;
    }
    function o13(x36) {
      return x36.substring(1);
    }
    function c27() {
      return "three_default_" + $u2++;
    }
    function l26(x36) {
      return Object.keys(x36).length === 0;
    }
    function u35(x36) {
      return {
        unit: h26(n33(x36, "unit")[0]),
        upAxis: d34(n33(x36, "up_axis")[0])
      };
    }
    function h26(x36) {
      return x36 !== void 0 && x36.hasAttribute("meter") === true ? parseFloat(x36.getAttribute("meter")) : 1;
    }
    function d34(x36) {
      return x36 !== void 0 ? x36.textContent : "Y_UP";
    }
    function p26(x36, _21, T21, M13) {
      const A18 = n33(x36, _21)[0];
      if (A18 !== void 0) {
        const Y13 = n33(A18, T21);
        for (let re8 = 0; re8 < Y13.length; re8++)
          M13(Y13[re8]);
      }
    }
    function g32(x36, _21) {
      for (const T21 in x36) {
        const M13 = x36[T21];
        M13.build = _21(x36[T21]);
      }
    }
    function y34(x36, _21) {
      return x36.build !== void 0 || (x36.build = _21(x36)), x36.build;
    }
    function m34(x36) {
      const _21 = {
        sources: {},
        samplers: {},
        channels: {}
      };
      let T21 = false;
      for (let M13 = 0, A18 = x36.childNodes.length; M13 < A18; M13++) {
        const Y13 = x36.childNodes[M13];
        if (Y13.nodeType !== 1)
          continue;
        let re8;
        switch (Y13.nodeName) {
          case "source":
            re8 = Y13.getAttribute("id"), _21.sources[re8] = ue8(Y13);
            break;
          case "sampler":
            re8 = Y13.getAttribute("id"), _21.samplers[re8] = f40(Y13);
            break;
          case "channel":
            re8 = Y13.getAttribute("target"), _21.channels[re8] = E25(Y13);
            break;
          case "animation":
            m34(Y13), T21 = true;
            break;
          default:
            console.log(Y13);
        }
      }
      T21 === false && (Fe7.animations[x36.getAttribute("id") || ps.generateUUID()] = _21);
    }
    function f40(x36) {
      const _21 = {
        inputs: {}
      };
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "input":
              const Y13 = o13(A18.getAttribute("source")), re8 = A18.getAttribute("semantic");
              _21.inputs[re8] = Y13;
              break;
          }
      }
      return _21;
    }
    function E25(x36) {
      const _21 = {};
      let M13 = x36.getAttribute("target").split("/");
      const A18 = M13.shift();
      let Y13 = M13.shift();
      const re8 = Y13.indexOf("(") !== -1, we8 = Y13.indexOf(".") !== -1;
      if (we8)
        M13 = Y13.split("."), Y13 = M13.shift(), _21.member = M13.shift();
      else if (re8) {
        const ge7 = Y13.split("(");
        Y13 = ge7.shift();
        for (let ve9 = 0; ve9 < ge7.length; ve9++)
          ge7[ve9] = parseInt(ge7[ve9].replace(/\)/, ""));
        _21.indices = ge7;
      }
      return _21.id = A18, _21.sid = Y13, _21.arraySyntax = re8, _21.memberSyntax = we8, _21.sampler = o13(x36.getAttribute("source")), _21;
    }
    function b35(x36) {
      const _21 = [], T21 = x36.channels, M13 = x36.samplers, A18 = x36.sources;
      for (const Y13 in T21)
        if (T21.hasOwnProperty(Y13)) {
          const re8 = T21[Y13], we8 = M13[re8.sampler], ge7 = we8.inputs.INPUT, ve9 = we8.inputs.OUTPUT, Pe6 = A18[ge7], ce9 = A18[ve9], Re7 = S23(re8, Pe6, ce9);
          L12(Re7, _21);
        }
      return _21;
    }
    function w31(x36) {
      return y34(Fe7.animations[x36], b35);
    }
    function S23(x36, _21, T21) {
      const M13 = Fe7.nodes[x36.id], A18 = Et9(M13.id), Y13 = M13.transforms[x36.sid], re8 = M13.matrix.clone().transpose();
      let we8, ge7, ve9, Pe6, ce9, Re7;
      const Ae6 = {};
      switch (Y13) {
        case "matrix":
          for (ve9 = 0, Pe6 = _21.array.length; ve9 < Pe6; ve9++)
            if (we8 = _21.array[ve9], ge7 = ve9 * T21.stride, Ae6[we8] === void 0 && (Ae6[we8] = {}), x36.arraySyntax === true) {
              const At9 = T21.array[ge7], ht16 = x36.indices[0] + 4 * x36.indices[1];
              Ae6[we8][ht16] = At9;
            } else
              for (ce9 = 0, Re7 = T21.stride; ce9 < Re7; ce9++)
                Ae6[we8][ce9] = T21.array[ge7 + ce9];
          break;
        case "translate":
          console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', Y13);
          break;
        case "rotate":
          console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', Y13);
          break;
        case "scale":
          console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', Y13);
          break;
      }
      const Oe5 = D18(Ae6, re8);
      return {
        name: A18.uuid,
        keyframes: Oe5
      };
    }
    function D18(x36, _21) {
      const T21 = [];
      for (const A18 in x36)
        T21.push({ time: parseFloat(A18), value: x36[A18] });
      T21.sort(M13);
      for (let A18 = 0; A18 < 16; A18++)
        G16(T21, A18, _21.elements[A18]);
      return T21;
      function M13(A18, Y13) {
        return A18.time - Y13.time;
      }
    }
    const N22 = new U9(), I18 = new U9(), v31 = new qt3();
    function L12(x36, _21) {
      const T21 = x36.keyframes, M13 = x36.name, A18 = [], Y13 = [], re8 = [], we8 = [];
      for (let ge7 = 0, ve9 = T21.length; ge7 < ve9; ge7++) {
        const Pe6 = T21[ge7], ce9 = Pe6.time, Re7 = Pe6.value;
        ut12.fromArray(Re7).transpose(), ut12.decompose(N22, v31, I18), A18.push(ce9), Y13.push(N22.x, N22.y, N22.z), re8.push(v31.x, v31.y, v31.z, v31.w), we8.push(I18.x, I18.y, I18.z);
      }
      return Y13.length > 0 && _21.push(new Pi(M13 + ".position", A18, Y13)), re8.length > 0 && _21.push(new ui3(M13 + ".quaternion", A18, re8)), we8.length > 0 && _21.push(new Pi(M13 + ".scale", A18, we8)), _21;
    }
    function G16(x36, _21, T21) {
      let M13, A18 = true, Y13, re8;
      for (Y13 = 0, re8 = x36.length; Y13 < re8; Y13++)
        M13 = x36[Y13], M13.value[_21] === void 0 ? M13.value[_21] = null : A18 = false;
      if (A18 === true)
        for (Y13 = 0, re8 = x36.length; Y13 < re8; Y13++)
          M13 = x36[Y13], M13.value[_21] = T21;
      else
        B22(x36, _21);
    }
    function B22(x36, _21) {
      let T21, M13;
      for (let A18 = 0, Y13 = x36.length; A18 < Y13; A18++) {
        const re8 = x36[A18];
        if (re8.value[_21] === null) {
          if (T21 = k29(x36, A18, _21), M13 = V16(x36, A18, _21), T21 === null) {
            re8.value[_21] = M13.value[_21];
            continue;
          }
          if (M13 === null) {
            re8.value[_21] = T21.value[_21];
            continue;
          }
          H16(re8, T21, M13, _21);
        }
      }
    }
    function k29(x36, _21, T21) {
      for (; _21 >= 0; ) {
        const M13 = x36[_21];
        if (M13.value[T21] !== null)
          return M13;
        _21--;
      }
      return null;
    }
    function V16(x36, _21, T21) {
      for (; _21 < x36.length; ) {
        const M13 = x36[_21];
        if (M13.value[T21] !== null)
          return M13;
        _21++;
      }
      return null;
    }
    function H16(x36, _21, T21, M13) {
      if (T21.time - _21.time === 0) {
        x36.value[M13] = _21.value[M13];
        return;
      }
      x36.value[M13] = (x36.time - _21.time) * (T21.value[M13] - _21.value[M13]) / (T21.time - _21.time) + _21.value[M13];
    }
    function W11(x36) {
      const _21 = {
        name: x36.getAttribute("id") || "default",
        start: parseFloat(x36.getAttribute("start") || 0),
        end: parseFloat(x36.getAttribute("end") || 0),
        animations: []
      };
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "instance_animation":
              _21.animations.push(o13(A18.getAttribute("url")));
              break;
          }
      }
      Fe7.clips[x36.getAttribute("id")] = _21;
    }
    function te7(x36) {
      const _21 = [], T21 = x36.name, M13 = x36.end - x36.start || -1, A18 = x36.animations;
      for (let Y13 = 0, re8 = A18.length; Y13 < re8; Y13++) {
        const we8 = w31(A18[Y13]);
        for (let ge7 = 0, ve9 = we8.length; ge7 < ve9; ge7++)
          _21.push(we8[ge7]);
      }
      return new ba(T21, M13, _21);
    }
    function J12(x36) {
      return y34(Fe7.clips[x36], te7);
    }
    function ie8(x36) {
      const _21 = {};
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "skin":
              _21.id = o13(A18.getAttribute("source")), _21.skin = le7(A18);
              break;
            case "morph":
              _21.id = o13(A18.getAttribute("source")), console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");
              break;
          }
      }
      Fe7.controllers[x36.getAttribute("id")] = _21;
    }
    function le7(x36) {
      const _21 = {
        sources: {}
      };
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "bind_shape_matrix":
              _21.bindShapeMatrix = s18(A18.textContent);
              break;
            case "source":
              const Y13 = A18.getAttribute("id");
              _21.sources[Y13] = ue8(A18);
              break;
            case "joints":
              _21.joints = me9(A18);
              break;
            case "vertex_weights":
              _21.vertexWeights = he8(A18);
              break;
          }
      }
      return _21;
    }
    function me9(x36) {
      const _21 = {
        inputs: {}
      };
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "input":
              const Y13 = A18.getAttribute("semantic"), re8 = o13(A18.getAttribute("source"));
              _21.inputs[Y13] = re8;
              break;
          }
      }
      return _21;
    }
    function he8(x36) {
      const _21 = {
        inputs: {}
      };
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "input":
              const Y13 = A18.getAttribute("semantic"), re8 = o13(A18.getAttribute("source")), we8 = parseInt(A18.getAttribute("offset"));
              _21.inputs[Y13] = { id: re8, offset: we8 };
              break;
            case "vcount":
              _21.vcount = r24(A18.textContent);
              break;
            case "v":
              _21.v = r24(A18.textContent);
              break;
          }
      }
      return _21;
    }
    function j19(x36) {
      const _21 = {
        id: x36.id
      }, T21 = Fe7.geometries[_21.id];
      return x36.skin !== void 0 && (_21.skin = X14(x36.skin), T21.sources.skinIndices = _21.skin.indices, T21.sources.skinWeights = _21.skin.weights), _21;
    }
    function X14(x36) {
      const T21 = {
        joints: [],
        // this must be an array to preserve the joint order
        indices: {
          array: [],
          stride: 4
        },
        weights: {
          array: [],
          stride: 4
        }
      }, M13 = x36.sources, A18 = x36.vertexWeights, Y13 = A18.vcount, re8 = A18.v, we8 = A18.inputs.JOINT.offset, ge7 = A18.inputs.WEIGHT.offset, ve9 = x36.sources[x36.joints.inputs.JOINT], Pe6 = x36.sources[x36.joints.inputs.INV_BIND_MATRIX], ce9 = M13[A18.inputs.WEIGHT.id].array;
      let Re7 = 0, Ae6, Oe5, Ne7;
      for (Ae6 = 0, Ne7 = Y13.length; Ae6 < Ne7; Ae6++) {
        const ht16 = Y13[Ae6], rt15 = [];
        for (Oe5 = 0; Oe5 < ht16; Oe5++) {
          const ot15 = re8[Re7 + we8], Un6 = re8[Re7 + ge7], nn4 = ce9[Un6];
          rt15.push({ index: ot15, weight: nn4 }), Re7 += 2;
        }
        for (rt15.sort(At9), Oe5 = 0; Oe5 < 4; Oe5++) {
          const ot15 = rt15[Oe5];
          ot15 !== void 0 ? (T21.indices.array.push(ot15.index), T21.weights.array.push(ot15.weight)) : (T21.indices.array.push(0), T21.weights.array.push(0));
        }
      }
      for (x36.bindShapeMatrix ? T21.bindMatrix = new Ve4().fromArray(x36.bindShapeMatrix).transpose() : T21.bindMatrix = new Ve4().identity(), Ae6 = 0, Ne7 = ve9.array.length; Ae6 < Ne7; Ae6++) {
        const ht16 = ve9.array[Ae6], rt15 = new Ve4().fromArray(Pe6.array, Ae6 * Pe6.stride).transpose();
        T21.joints.push({ name: ht16, boneInverse: rt15 });
      }
      return T21;
      function At9(ht16, rt15) {
        return rt15.weight - ht16.weight;
      }
    }
    function ee7(x36) {
      return y34(Fe7.controllers[x36], j19);
    }
    function $25(x36) {
      const _21 = {
        init_from: n33(x36, "init_from")[0].textContent
      };
      Fe7.images[x36.getAttribute("id")] = _21;
    }
    function z21(x36) {
      return x36.build !== void 0 ? x36.build : x36.init_from;
    }
    function be7(x36) {
      const _21 = Fe7.images[x36];
      return _21 !== void 0 ? y34(_21, z21) : (console.warn("THREE.ColladaLoader: Couldn't find image with ID:", x36), null);
    }
    function Ee5(x36) {
      const _21 = {};
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "profile_COMMON":
              _21.profile = pe8(A18);
              break;
          }
      }
      Fe7.effects[x36.getAttribute("id")] = _21;
    }
    function pe8(x36) {
      const _21 = {
        surfaces: {},
        samplers: {}
      };
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "newparam":
              ke7(A18, _21);
              break;
            case "technique":
              _21.technique = je7(A18);
              break;
            case "extra":
              _21.extra = ct12(A18);
              break;
          }
      }
      return _21;
    }
    function ke7(x36, _21) {
      const T21 = x36.getAttribute("sid");
      for (let M13 = 0, A18 = x36.childNodes.length; M13 < A18; M13++) {
        const Y13 = x36.childNodes[M13];
        if (Y13.nodeType === 1)
          switch (Y13.nodeName) {
            case "surface":
              _21.surfaces[T21] = nt17(Y13);
              break;
            case "sampler2D":
              _21.samplers[T21] = Ie7(Y13);
              break;
          }
      }
    }
    function nt17(x36) {
      const _21 = {};
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "init_from":
              _21.init_from = A18.textContent;
              break;
          }
      }
      return _21;
    }
    function Ie7(x36) {
      const _21 = {};
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "source":
              _21.source = A18.textContent;
              break;
          }
      }
      return _21;
    }
    function je7(x36) {
      const _21 = {};
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "constant":
            case "lambert":
            case "blinn":
            case "phong":
              _21.type = A18.nodeName, _21.parameters = bt10(A18);
              break;
            case "extra":
              _21.extra = ct12(A18);
              break;
          }
      }
      return _21;
    }
    function bt10(x36) {
      const _21 = {};
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "emission":
            case "diffuse":
            case "specular":
            case "bump":
            case "ambient":
            case "shininess":
            case "transparency":
              _21[A18.nodeName] = xt8(A18);
              break;
            case "transparent":
              _21[A18.nodeName] = {
                opaque: A18.hasAttribute("opaque") ? A18.getAttribute("opaque") : "A_ONE",
                data: xt8(A18)
              };
              break;
          }
      }
      return _21;
    }
    function xt8(x36) {
      const _21 = {};
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "color":
              _21[A18.nodeName] = s18(A18.textContent);
              break;
            case "float":
              _21[A18.nodeName] = parseFloat(A18.textContent);
              break;
            case "texture":
              _21[A18.nodeName] = { id: A18.getAttribute("texture"), extra: St9(A18) };
              break;
          }
      }
      return _21;
    }
    function St9(x36) {
      const _21 = {
        technique: {}
      };
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "extra":
              wt10(A18, _21);
              break;
          }
      }
      return _21;
    }
    function wt10(x36, _21) {
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "technique":
              et15(A18, _21);
              break;
          }
      }
    }
    function et15(x36, _21) {
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "repeatU":
            case "repeatV":
            case "offsetU":
            case "offsetV":
              _21.technique[A18.nodeName] = parseFloat(A18.textContent);
              break;
            case "wrapU":
            case "wrapV":
              A18.textContent.toUpperCase() === "TRUE" ? _21.technique[A18.nodeName] = 1 : A18.textContent.toUpperCase() === "FALSE" ? _21.technique[A18.nodeName] = 0 : _21.technique[A18.nodeName] = parseInt(A18.textContent);
              break;
            case "bump":
              _21[A18.nodeName] = P20(A18);
              break;
          }
      }
    }
    function ct12(x36) {
      const _21 = {};
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "technique":
              _21.technique = kt10(A18);
              break;
          }
      }
      return _21;
    }
    function kt10(x36) {
      const _21 = {};
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "double_sided":
              _21[A18.nodeName] = parseInt(A18.textContent);
              break;
            case "bump":
              _21[A18.nodeName] = P20(A18);
              break;
          }
      }
      return _21;
    }
    function P20(x36) {
      const _21 = {};
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "texture":
              _21[A18.nodeName] = { id: A18.getAttribute("texture"), texcoord: A18.getAttribute("texcoord"), extra: St9(A18) };
              break;
          }
      }
      return _21;
    }
    function C21(x36) {
      return x36;
    }
    function Q12(x36) {
      return y34(Fe7.effects[x36], C21);
    }
    function de9(x36) {
      const _21 = {
        name: x36.getAttribute("name")
      };
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "instance_effect":
              _21.url = o13(A18.getAttribute("url"));
              break;
          }
      }
      Fe7.materials[x36.getAttribute("id")] = _21;
    }
    function fe7(x36) {
      let _21, T21 = x36.slice((x36.lastIndexOf(".") - 1 >>> 0) + 2);
      switch (T21 = T21.toLowerCase(), T21) {
        case "tga":
          _21 = To2;
          break;
        default:
          _21 = Ya2;
      }
      return _21;
    }
    function _e7(x36) {
      const _21 = Q12(x36.url), T21 = _21.profile.technique;
      let M13;
      switch (T21.type) {
        case "phong":
        case "blinn":
          M13 = new Zs();
          break;
        case "lambert":
          M13 = new v0();
          break;
        default:
          M13 = new Mn3();
          break;
      }
      M13.name = x36.name || "";
      function A18(ge7, ve9 = null) {
        const Pe6 = _21.profile.samplers[ge7.id];
        let ce9 = null;
        if (Pe6 !== void 0) {
          const Re7 = _21.profile.surfaces[Pe6.source];
          ce9 = be7(Re7.init_from);
        } else
          console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."), ce9 = be7(ge7.id);
        if (ce9 !== null) {
          const Re7 = fe7(ce9);
          if (Re7 !== void 0) {
            const Ae6 = Re7.load(ce9), Oe5 = ge7.extra;
            if (Oe5 !== void 0 && Oe5.technique !== void 0 && l26(Oe5.technique) === false) {
              const Ne7 = Oe5.technique;
              Ae6.wrapS = Ne7.wrapU ? Rn3 : Zt3, Ae6.wrapT = Ne7.wrapV ? Rn3 : Zt3, Ae6.offset.set(Ne7.offsetU || 0, Ne7.offsetV || 0), Ae6.repeat.set(Ne7.repeatU || 1, Ne7.repeatV || 1);
            } else
              Ae6.wrapS = Rn3, Ae6.wrapT = Rn3;
            return ve9 !== null && (Ae6.encoding = ve9), Ae6;
          } else
            return console.warn("THREE.ColladaLoader: Loader for texture %s not found.", ce9), null;
        } else
          return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:", ge7.id), null;
      }
      const Y13 = T21.parameters;
      for (const ge7 in Y13) {
        const ve9 = Y13[ge7];
        switch (ge7) {
          case "diffuse":
            ve9.color && M13.color.fromArray(ve9.color), ve9.texture && (M13.map = A18(ve9.texture, st8));
            break;
          case "specular":
            ve9.color && M13.specular && M13.specular.fromArray(ve9.color), ve9.texture && (M13.specularMap = A18(ve9.texture));
            break;
          case "bump":
            ve9.texture && (M13.normalMap = A18(ve9.texture));
            break;
          case "ambient":
            ve9.texture && (M13.lightMap = A18(ve9.texture, st8));
            break;
          case "shininess":
            ve9.float && M13.shininess && (M13.shininess = ve9.float);
            break;
          case "emission":
            ve9.color && M13.emissive && M13.emissive.fromArray(ve9.color), ve9.texture && (M13.emissiveMap = A18(ve9.texture, st8));
            break;
        }
      }
      M13.color.convertSRGBToLinear(), M13.specular && M13.specular.convertSRGBToLinear(), M13.emissive && M13.emissive.convertSRGBToLinear();
      let re8 = Y13.transparent, we8 = Y13.transparency;
      if (we8 === void 0 && re8 && (we8 = {
        float: 1
      }), re8 === void 0 && we8 && (re8 = {
        opaque: "A_ONE",
        data: {
          color: [1, 1, 1, 1]
        }
      }), re8 && we8)
        if (re8.data.texture)
          M13.transparent = true;
        else {
          const ge7 = re8.data.color;
          switch (re8.opaque) {
            case "A_ONE":
              M13.opacity = ge7[3] * we8.float;
              break;
            case "RGB_ZERO":
              M13.opacity = 1 - ge7[0] * we8.float;
              break;
            case "A_ZERO":
              M13.opacity = 1 - ge7[3] * we8.float;
              break;
            case "RGB_ONE":
              M13.opacity = ge7[0] * we8.float;
              break;
            default:
              console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.', re8.opaque);
          }
          M13.opacity < 1 && (M13.transparent = true);
        }
      if (T21.extra !== void 0 && T21.extra.technique !== void 0) {
        const ge7 = T21.extra.technique;
        for (const ve9 in ge7) {
          const Pe6 = ge7[ve9];
          switch (ve9) {
            case "double_sided":
              M13.side = Pe6 === 1 ? fn3 : Pn3;
              break;
            case "bump":
              M13.normalMap = A18(Pe6.texture), M13.normalScale = new We4(1, 1);
              break;
          }
        }
      }
      return M13;
    }
    function O20(x36) {
      return y34(Fe7.materials[x36], _e7);
    }
    function ae7(x36) {
      const _21 = {
        name: x36.getAttribute("name")
      };
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "optics":
              _21.optics = Z12(A18);
              break;
          }
      }
      Fe7.cameras[x36.getAttribute("id")] = _21;
    }
    function Z12(x36) {
      for (let _21 = 0; _21 < x36.childNodes.length; _21++) {
        const T21 = x36.childNodes[_21];
        switch (T21.nodeName) {
          case "technique_common":
            return ye7(T21);
        }
      }
      return {};
    }
    function ye7(x36) {
      const _21 = {};
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        switch (M13.nodeName) {
          case "perspective":
          case "orthographic":
            _21.technique = M13.nodeName, _21.parameters = Te7(M13);
            break;
        }
      }
      return _21;
    }
    function Te7(x36) {
      const _21 = {};
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        switch (M13.nodeName) {
          case "xfov":
          case "yfov":
          case "xmag":
          case "ymag":
          case "znear":
          case "zfar":
          case "aspect_ratio":
            _21[M13.nodeName] = parseFloat(M13.textContent);
            break;
        }
      }
      return _21;
    }
    function Le7(x36) {
      let _21;
      switch (x36.optics.technique) {
        case "perspective":
          _21 = new Vt3(
            x36.optics.parameters.yfov,
            x36.optics.parameters.aspect_ratio,
            x36.optics.parameters.znear,
            x36.optics.parameters.zfar
          );
          break;
        case "orthographic":
          let T21 = x36.optics.parameters.ymag, M13 = x36.optics.parameters.xmag;
          const A18 = x36.optics.parameters.aspect_ratio;
          M13 = M13 === void 0 ? T21 * A18 : M13, T21 = T21 === void 0 ? M13 / A18 : T21, M13 *= 0.5, T21 *= 0.5, _21 = new ho(
            -M13,
            M13,
            T21,
            -T21,
            // left, right, top, bottom
            x36.optics.parameters.znear,
            x36.optics.parameters.zfar
          );
          break;
        default:
          _21 = new Vt3();
          break;
      }
      return _21.name = x36.name || "", _21;
    }
    function Me7(x36) {
      const _21 = Fe7.cameras[x36];
      return _21 !== void 0 ? y34(_21, Le7) : (console.warn("THREE.ColladaLoader: Couldn't find camera with ID:", x36), null);
    }
    function Ce7(x36) {
      let _21 = {};
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "technique_common":
              _21 = Ge7(A18);
              break;
          }
      }
      Fe7.lights[x36.getAttribute("id")] = _21;
    }
    function Ge7(x36) {
      const _21 = {};
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "directional":
            case "point":
            case "spot":
            case "ambient":
              _21.technique = A18.nodeName, _21.parameters = Xe7(A18);
          }
      }
      return _21;
    }
    function Xe7(x36) {
      const _21 = {};
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "color":
              const Y13 = s18(A18.textContent);
              _21.color = new ze4().fromArray(Y13).convertSRGBToLinear();
              break;
            case "falloff_angle":
              _21.falloffAngle = parseFloat(A18.textContent);
              break;
            case "quadratic_attenuation":
              const re8 = parseFloat(A18.textContent);
              _21.distance = re8 ? Math.sqrt(1 / re8) : 0;
              break;
          }
      }
      return _21;
    }
    function Mt10(x36) {
      let _21;
      switch (x36.technique) {
        case "directional":
          _21 = new Iu();
          break;
        case "point":
          _21 = new go();
          break;
        case "spot":
          _21 = new Pu();
          break;
        case "ambient":
          _21 = new N0();
          break;
      }
      return x36.parameters.color && _21.color.copy(x36.parameters.color), x36.parameters.distance && (_21.distance = x36.parameters.distance), _21;
    }
    function F19(x36) {
      const _21 = Fe7.lights[x36];
      return _21 !== void 0 ? y34(_21, Mt10) : (console.warn("THREE.ColladaLoader: Couldn't find light with ID:", x36), null);
    }
    function se6(x36) {
      const _21 = {
        name: x36.getAttribute("name"),
        sources: {},
        vertices: {},
        primitives: []
      }, T21 = n33(x36, "mesh")[0];
      if (T21 !== void 0) {
        for (let M13 = 0; M13 < T21.childNodes.length; M13++) {
          const A18 = T21.childNodes[M13];
          if (A18.nodeType !== 1)
            continue;
          const Y13 = A18.getAttribute("id");
          switch (A18.nodeName) {
            case "source":
              _21.sources[Y13] = ue8(A18);
              break;
            case "vertices":
              _21.vertices = Se7(A18);
              break;
            case "polygons":
              console.warn("THREE.ColladaLoader: Unsupported primitive type: ", A18.nodeName);
              break;
            case "lines":
            case "linestrips":
            case "polylist":
            case "triangles":
              _21.primitives.push(De6(A18));
              break;
            default:
              console.log(A18);
          }
        }
        Fe7.geometries[x36.getAttribute("id")] = _21;
      }
    }
    function ue8(x36) {
      const _21 = {
        array: [],
        stride: 3
      };
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        if (M13.nodeType === 1)
          switch (M13.nodeName) {
            case "float_array":
              _21.array = s18(M13.textContent);
              break;
            case "Name_array":
              _21.array = i27(M13.textContent);
              break;
            case "technique_common":
              const A18 = n33(M13, "accessor")[0];
              A18 !== void 0 && (_21.stride = parseInt(A18.getAttribute("stride")));
              break;
          }
      }
      return _21;
    }
    function Se7(x36) {
      const _21 = {};
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        M13.nodeType === 1 && (_21[M13.getAttribute("semantic")] = o13(M13.getAttribute("source")));
      }
      return _21;
    }
    function De6(x36) {
      const _21 = {
        type: x36.nodeName,
        material: x36.getAttribute("material"),
        count: parseInt(x36.getAttribute("count")),
        inputs: {},
        stride: 0,
        hasUV: false
      };
      for (let T21 = 0, M13 = x36.childNodes.length; T21 < M13; T21++) {
        const A18 = x36.childNodes[T21];
        if (A18.nodeType === 1)
          switch (A18.nodeName) {
            case "input":
              const Y13 = o13(A18.getAttribute("source")), re8 = A18.getAttribute("semantic"), we8 = parseInt(A18.getAttribute("offset")), ge7 = parseInt(A18.getAttribute("set")), ve9 = ge7 > 0 ? re8 + ge7 : re8;
              _21.inputs[ve9] = { id: Y13, offset: we8 }, _21.stride = Math.max(_21.stride, we8 + 1), re8 === "TEXCOORD" && (_21.hasUV = true);
              break;
            case "vcount":
              _21.vcount = r24(A18.textContent);
              break;
            case "p":
              _21.p = r24(A18.textContent);
              break;
          }
      }
      return _21;
    }
    function pt12(x36) {
      const _21 = {};
      for (let T21 = 0; T21 < x36.length; T21++) {
        const M13 = x36[T21];
        _21[M13.type] === void 0 && (_21[M13.type] = []), _21[M13.type].push(M13);
      }
      return _21;
    }
    function vt9(x36) {
      let _21 = 0;
      for (let T21 = 0, M13 = x36.length; T21 < M13; T21++)
        x36[T21].hasUV === true && _21++;
      _21 > 0 && _21 < x36.length && (x36.uvsNeedsFix = true);
    }
    function It7(x36) {
      const _21 = {}, T21 = x36.sources, M13 = x36.vertices, A18 = x36.primitives;
      if (A18.length === 0)
        return {};
      const Y13 = pt12(A18);
      for (const re8 in Y13) {
        const we8 = Y13[re8];
        vt9(we8), _21[re8] = Tn6(we8, T21, M13);
      }
      return _21;
    }
    function Tn6(x36, _21, T21) {
      const M13 = {}, A18 = { array: [], stride: 0 }, Y13 = { array: [], stride: 0 }, re8 = { array: [], stride: 0 }, we8 = { array: [], stride: 0 }, ge7 = { array: [], stride: 0 }, ve9 = { array: [], stride: 4 }, Pe6 = { array: [], stride: 4 }, ce9 = new Xt3(), Re7 = [];
      let Ae6 = 0;
      for (let Oe5 = 0; Oe5 < x36.length; Oe5++) {
        const Ne7 = x36[Oe5], At9 = Ne7.inputs;
        let ht16 = 0;
        switch (Ne7.type) {
          case "lines":
          case "linestrips":
            ht16 = Ne7.count * 2;
            break;
          case "triangles":
            ht16 = Ne7.count * 3;
            break;
          case "polylist":
            for (let rt15 = 0; rt15 < Ne7.count; rt15++) {
              const ot15 = Ne7.vcount[rt15];
              switch (ot15) {
                case 3:
                  ht16 += 3;
                  break;
                case 4:
                  ht16 += 6;
                  break;
                default:
                  ht16 += (ot15 - 2) * 3;
                  break;
              }
            }
            break;
          default:
            console.warn("THREE.ColladaLoader: Unknow primitive type:", Ne7.type);
        }
        ce9.addGroup(Ae6, ht16, Oe5), Ae6 += ht16, Ne7.material && Re7.push(Ne7.material);
        for (const rt15 in At9) {
          const ot15 = At9[rt15];
          switch (rt15) {
            case "VERTEX":
              for (const Un6 in T21) {
                const nn4 = T21[Un6];
                switch (Un6) {
                  case "POSITION":
                    const ji3 = A18.array.length;
                    if (it16(Ne7, _21[nn4], ot15.offset, A18.array), A18.stride = _21[nn4].stride, _21.skinWeights && _21.skinIndices && (it16(Ne7, _21.skinIndices, ot15.offset, ve9.array), it16(Ne7, _21.skinWeights, ot15.offset, Pe6.array)), Ne7.hasUV === false && x36.uvsNeedsFix === true) {
                      const Qu2 = (A18.array.length - ji3) / A18.stride;
                      for (let Za2 = 0; Za2 < Qu2; Za2++)
                        re8.array.push(0, 0);
                    }
                    break;
                  case "NORMAL":
                    it16(Ne7, _21[nn4], ot15.offset, Y13.array), Y13.stride = _21[nn4].stride;
                    break;
                  case "COLOR":
                    it16(Ne7, _21[nn4], ot15.offset, ge7.array), ge7.stride = _21[nn4].stride;
                    break;
                  case "TEXCOORD":
                    it16(Ne7, _21[nn4], ot15.offset, re8.array), re8.stride = _21[nn4].stride;
                    break;
                  case "TEXCOORD1":
                    it16(Ne7, _21[nn4], ot15.offset, we8.array), re8.stride = _21[nn4].stride;
                    break;
                  default:
                    console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.', Un6);
                }
              }
              break;
            case "NORMAL":
              it16(Ne7, _21[ot15.id], ot15.offset, Y13.array), Y13.stride = _21[ot15.id].stride;
              break;
            case "COLOR":
              it16(Ne7, _21[ot15.id], ot15.offset, ge7.array, true), ge7.stride = _21[ot15.id].stride;
              break;
            case "TEXCOORD":
              it16(Ne7, _21[ot15.id], ot15.offset, re8.array), re8.stride = _21[ot15.id].stride;
              break;
            case "TEXCOORD1":
              it16(Ne7, _21[ot15.id], ot15.offset, we8.array), we8.stride = _21[ot15.id].stride;
              break;
          }
        }
      }
      return A18.array.length > 0 && ce9.setAttribute("position", new yt8(A18.array, A18.stride)), Y13.array.length > 0 && ce9.setAttribute("normal", new yt8(Y13.array, Y13.stride)), ge7.array.length > 0 && ce9.setAttribute("color", new yt8(ge7.array, ge7.stride)), re8.array.length > 0 && ce9.setAttribute("uv", new yt8(re8.array, re8.stride)), we8.array.length > 0 && ce9.setAttribute("uv2", new yt8(we8.array, we8.stride)), ve9.array.length > 0 && ce9.setAttribute("skinIndex", new yt8(ve9.array, ve9.stride)), Pe6.array.length > 0 && ce9.setAttribute("skinWeight", new yt8(Pe6.array, Pe6.stride)), M13.data = ce9, M13.type = x36[0].type, M13.materialKeys = Re7, M13;
    }
    function it16(x36, _21, T21, M13, A18 = false) {
      const Y13 = x36.p, re8 = x36.stride, we8 = x36.vcount;
      function ge7(ce9) {
        let Re7 = Y13[ce9 + T21] * Pe6;
        const Ae6 = Re7 + Pe6;
        for (; Re7 < Ae6; Re7++)
          M13.push(ve9[Re7]);
        if (A18) {
          const Oe5 = M13.length - Pe6 - 1;
          _r6.setRGB(
            M13[Oe5 + 0],
            M13[Oe5 + 1],
            M13[Oe5 + 2]
          ).convertSRGBToLinear(), M13[Oe5 + 0] = _r6.r, M13[Oe5 + 1] = _r6.g, M13[Oe5 + 2] = _r6.b;
        }
      }
      const ve9 = _21.array, Pe6 = _21.stride;
      if (x36.vcount !== void 0) {
        let ce9 = 0;
        for (let Re7 = 0, Ae6 = we8.length; Re7 < Ae6; Re7++) {
          const Oe5 = we8[Re7];
          if (Oe5 === 4) {
            const Ne7 = ce9 + re8 * 0, At9 = ce9 + re8 * 1, ht16 = ce9 + re8 * 2, rt15 = ce9 + re8 * 3;
            ge7(Ne7), ge7(At9), ge7(rt15), ge7(At9), ge7(ht16), ge7(rt15);
          } else if (Oe5 === 3) {
            const Ne7 = ce9 + re8 * 0, At9 = ce9 + re8 * 1, ht16 = ce9 + re8 * 2;
            ge7(Ne7), ge7(At9), ge7(ht16);
          } else if (Oe5 > 4)
            for (let Ne7 = 1, At9 = Oe5 - 2; Ne7 <= At9; Ne7++) {
              const ht16 = ce9 + re8 * 0, rt15 = ce9 + re8 * Ne7, ot15 = ce9 + re8 * (Ne7 + 1);
              ge7(ht16), ge7(rt15), ge7(ot15);
            }
          ce9 += re8 * Oe5;
        }
      } else
        for (let ce9 = 0, Re7 = Y13.length; ce9 < Re7; ce9 += re8)
          ge7(ce9);
    }
    function $t9(x36) {
      return y34(Fe7.geometries[x36], It7);
    }
    function cn3(x36) {
      const _21 = {
        name: x36.getAttribute("name") || "",
        joints: {},
        links: []
      };
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        if (M13.nodeType === 1)
          switch (M13.nodeName) {
            case "technique_common":
              vo2(M13, _21);
              break;
          }
      }
      Fe7.kinematicsModels[x36.getAttribute("id")] = _21;
    }
    function Bi4(x36) {
      return x36.build !== void 0 ? x36.build : x36;
    }
    function pr6(x36) {
      return y34(Fe7.kinematicsModels[x36], Bi4);
    }
    function vo2(x36, _21) {
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        if (M13.nodeType === 1)
          switch (M13.nodeName) {
            case "joint":
              _21.joints[M13.getAttribute("sid")] = bo2(M13);
              break;
            case "link":
              _21.links.push(R22(M13));
              break;
          }
      }
    }
    function bo2(x36) {
      let _21;
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        if (M13.nodeType === 1)
          switch (M13.nodeName) {
            case "prismatic":
            case "revolute":
              _21 = Mo2(M13);
              break;
          }
      }
      return _21;
    }
    function Mo2(x36) {
      const _21 = {
        sid: x36.getAttribute("sid"),
        name: x36.getAttribute("name") || "",
        axis: new U9(),
        limits: {
          min: 0,
          max: 0
        },
        type: x36.nodeName,
        static: false,
        zeroPosition: 0,
        middlePosition: 0
      };
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        if (M13.nodeType === 1)
          switch (M13.nodeName) {
            case "axis":
              const A18 = s18(M13.textContent);
              _21.axis.fromArray(A18);
              break;
            case "limits":
              const Y13 = M13.getElementsByTagName("max")[0], re8 = M13.getElementsByTagName("min")[0];
              _21.limits.max = parseFloat(Y13.textContent), _21.limits.min = parseFloat(re8.textContent);
              break;
          }
      }
      return _21.limits.min >= _21.limits.max && (_21.static = true), _21.middlePosition = (_21.limits.min + _21.limits.max) / 2, _21;
    }
    function R22(x36) {
      const _21 = {
        sid: x36.getAttribute("sid"),
        name: x36.getAttribute("name") || "",
        attachments: [],
        transforms: []
      };
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        if (M13.nodeType === 1)
          switch (M13.nodeName) {
            case "attachment_full":
              _21.attachments.push(K16(M13));
              break;
            case "matrix":
            case "translate":
            case "rotate":
              _21.transforms.push(ne8(M13));
              break;
          }
      }
      return _21;
    }
    function K16(x36) {
      const _21 = {
        joint: x36.getAttribute("joint").split("/").pop(),
        transforms: [],
        links: []
      };
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        if (M13.nodeType === 1)
          switch (M13.nodeName) {
            case "link":
              _21.links.push(R22(M13));
              break;
            case "matrix":
            case "translate":
            case "rotate":
              _21.transforms.push(ne8(M13));
              break;
          }
      }
      return _21;
    }
    function ne8(x36) {
      const _21 = {
        type: x36.nodeName
      }, T21 = s18(x36.textContent);
      switch (_21.type) {
        case "matrix":
          _21.obj = new Ve4(), _21.obj.fromArray(T21).transpose();
          break;
        case "translate":
          _21.obj = new U9(), _21.obj.fromArray(T21);
          break;
        case "rotate":
          _21.obj = new U9(), _21.obj.fromArray(T21), _21.angle = ps.degToRad(T21[3]);
          break;
      }
      return _21;
    }
    function q14(x36) {
      const _21 = {
        name: x36.getAttribute("name") || "",
        rigidBodies: {}
      };
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        if (M13.nodeType === 1)
          switch (M13.nodeName) {
            case "rigid_body":
              _21.rigidBodies[M13.getAttribute("name")] = {}, oe7(M13, _21.rigidBodies[M13.getAttribute("name")]);
              break;
          }
      }
      Fe7.physicsModels[x36.getAttribute("id")] = _21;
    }
    function oe7(x36, _21) {
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        if (M13.nodeType === 1)
          switch (M13.nodeName) {
            case "technique_common":
              Ue7(M13, _21);
              break;
          }
      }
    }
    function Ue7(x36, _21) {
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        if (M13.nodeType === 1)
          switch (M13.nodeName) {
            case "inertia":
              _21.inertia = s18(M13.textContent);
              break;
            case "mass":
              _21.mass = s18(M13.textContent)[0];
              break;
          }
      }
    }
    function Be7(x36) {
      const _21 = {
        bindJointAxis: []
      };
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        if (M13.nodeType === 1)
          switch (M13.nodeName) {
            case "bind_joint_axis":
              _21.bindJointAxis.push(He8(M13));
              break;
          }
      }
      Fe7.kinematicsScenes[o13(x36.getAttribute("url"))] = _21;
    }
    function He8(x36) {
      const _21 = {
        target: x36.getAttribute("target").split("/").pop()
      };
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        if (M13.nodeType === 1)
          switch (M13.nodeName) {
            case "axis":
              const A18 = M13.getElementsByTagName("param")[0];
              _21.axis = A18.textContent;
              const Y13 = _21.axis.split("inst_").pop().split("axis")[0];
              _21.jointIndex = Y13.substring(0, Y13.length - 1);
              break;
          }
      }
      return _21;
    }
    function qe8(x36) {
      return x36.build !== void 0 ? x36.build : x36;
    }
    function Ke7(x36) {
      return y34(Fe7.kinematicsScenes[x36], qe8);
    }
    function Ye7() {
      const x36 = Object.keys(Fe7.kinematicsModels)[0], _21 = Object.keys(Fe7.kinematicsScenes)[0], T21 = Object.keys(Fe7.visualScenes)[0];
      if (x36 === void 0 || _21 === void 0)
        return;
      const M13 = pr6(x36), A18 = Ke7(_21), Y13 = Wi4(T21), re8 = A18.bindJointAxis, we8 = {};
      for (let Pe6 = 0, ce9 = re8.length; Pe6 < ce9; Pe6++) {
        const Re7 = re8[Pe6], Ae6 = Dt6.querySelector('[sid="' + Re7.target + '"]');
        if (Ae6) {
          const Oe5 = Ae6.parentElement;
          ge7(Re7.jointIndex, Oe5);
        }
      }
      function ge7(Pe6, ce9) {
        const Re7 = ce9.getAttribute("name"), Ae6 = M13.joints[Pe6];
        Y13.traverse(function(Oe5) {
          Oe5.name === Re7 && (we8[Pe6] = {
            object: Oe5,
            transforms: Ze7(ce9),
            joint: Ae6,
            position: Ae6.zeroPosition
          });
        });
      }
      const ve9 = new Ve4();
      Ja2 = {
        joints: M13 && M13.joints,
        getJointValue: function(Pe6) {
          const ce9 = we8[Pe6];
          if (ce9)
            return ce9.position;
          console.warn("THREE.ColladaLoader: Joint " + Pe6 + " doesn't exist.");
        },
        setJointValue: function(Pe6, ce9) {
          const Re7 = we8[Pe6];
          if (Re7) {
            const Ae6 = Re7.joint;
            if (ce9 > Ae6.limits.max || ce9 < Ae6.limits.min)
              console.warn("THREE.ColladaLoader: Joint " + Pe6 + " value " + ce9 + " outside of limits (min: " + Ae6.limits.min + ", max: " + Ae6.limits.max + ").");
            else if (Ae6.static)
              console.warn("THREE.ColladaLoader: Joint " + Pe6 + " is static.");
            else {
              const Oe5 = Re7.object, Ne7 = Ae6.axis, At9 = Re7.transforms;
              ut12.identity();
              for (let ht16 = 0; ht16 < At9.length; ht16++) {
                const rt15 = At9[ht16];
                if (rt15.sid && rt15.sid.indexOf(Pe6) !== -1)
                  switch (Ae6.type) {
                    case "revolute":
                      ut12.multiply(ve9.makeRotationAxis(Ne7, ps.degToRad(ce9)));
                      break;
                    case "prismatic":
                      ut12.multiply(ve9.makeTranslation(Ne7.x * ce9, Ne7.y * ce9, Ne7.z * ce9));
                      break;
                    default:
                      console.warn("THREE.ColladaLoader: Unknown joint type: " + Ae6.type);
                      break;
                  }
                else
                  switch (rt15.type) {
                    case "matrix":
                      ut12.multiply(rt15.obj);
                      break;
                    case "translate":
                      ut12.multiply(ve9.makeTranslation(rt15.obj.x, rt15.obj.y, rt15.obj.z));
                      break;
                    case "scale":
                      ut12.scale(rt15.obj);
                      break;
                    case "rotate":
                      ut12.multiply(ve9.makeRotationAxis(rt15.obj, rt15.angle));
                      break;
                  }
              }
              Oe5.matrix.copy(ut12), Oe5.matrix.decompose(Oe5.position, Oe5.quaternion, Oe5.scale), we8[Pe6].position = ce9;
            }
          } else
            console.log("THREE.ColladaLoader: " + Pe6 + " does not exist.");
        }
      };
    }
    function Ze7(x36) {
      const _21 = [], T21 = Dt6.querySelector('[id="' + x36.id + '"]');
      for (let M13 = 0; M13 < T21.childNodes.length; M13++) {
        const A18 = T21.childNodes[M13];
        if (A18.nodeType !== 1)
          continue;
        let Y13, re8;
        switch (A18.nodeName) {
          case "matrix":
            Y13 = s18(A18.textContent);
            const we8 = new Ve4().fromArray(Y13).transpose();
            _21.push({
              sid: A18.getAttribute("sid"),
              type: A18.nodeName,
              obj: we8
            });
            break;
          case "translate":
          case "scale":
            Y13 = s18(A18.textContent), re8 = new U9().fromArray(Y13), _21.push({
              sid: A18.getAttribute("sid"),
              type: A18.nodeName,
              obj: re8
            });
            break;
          case "rotate":
            Y13 = s18(A18.textContent), re8 = new U9().fromArray(Y13);
            const ge7 = ps.degToRad(Y13[3]);
            _21.push({
              sid: A18.getAttribute("sid"),
              type: A18.nodeName,
              obj: re8,
              angle: ge7
            });
            break;
        }
      }
      return _21;
    }
    function at11(x36) {
      const _21 = x36.getElementsByTagName("node");
      for (let T21 = 0; T21 < _21.length; T21++) {
        const M13 = _21[T21];
        M13.hasAttribute("id") === false && M13.setAttribute("id", c27());
      }
    }
    const ut12 = new Ve4(), Ot10 = new U9();
    function _n6(x36) {
      const _21 = {
        name: x36.getAttribute("name") || "",
        type: x36.getAttribute("type"),
        id: x36.getAttribute("id"),
        sid: x36.getAttribute("sid"),
        matrix: new Ve4(),
        nodes: [],
        instanceCameras: [],
        instanceControllers: [],
        instanceLights: [],
        instanceGeometries: [],
        instanceNodes: [],
        transforms: {}
      };
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        if (M13.nodeType !== 1)
          continue;
        let A18;
        switch (M13.nodeName) {
          case "node":
            _21.nodes.push(M13.getAttribute("id")), _n6(M13);
            break;
          case "instance_camera":
            _21.instanceCameras.push(o13(M13.getAttribute("url")));
            break;
          case "instance_controller":
            _21.instanceControllers.push(Tt9(M13));
            break;
          case "instance_light":
            _21.instanceLights.push(o13(M13.getAttribute("url")));
            break;
          case "instance_geometry":
            _21.instanceGeometries.push(Tt9(M13));
            break;
          case "instance_node":
            _21.instanceNodes.push(o13(M13.getAttribute("url")));
            break;
          case "matrix":
            A18 = s18(M13.textContent), _21.matrix.multiply(ut12.fromArray(A18).transpose()), _21.transforms[M13.getAttribute("sid")] = M13.nodeName;
            break;
          case "translate":
            A18 = s18(M13.textContent), Ot10.fromArray(A18), _21.matrix.multiply(ut12.makeTranslation(Ot10.x, Ot10.y, Ot10.z)), _21.transforms[M13.getAttribute("sid")] = M13.nodeName;
            break;
          case "rotate":
            A18 = s18(M13.textContent);
            const Y13 = ps.degToRad(A18[3]);
            _21.matrix.multiply(ut12.makeRotationAxis(Ot10.fromArray(A18), Y13)), _21.transforms[M13.getAttribute("sid")] = M13.nodeName;
            break;
          case "scale":
            A18 = s18(M13.textContent), _21.matrix.scale(Ot10.fromArray(A18)), _21.transforms[M13.getAttribute("sid")] = M13.nodeName;
            break;
          case "extra":
            break;
          default:
            console.log(M13);
        }
      }
      return Gi3(_21.id) ? console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.", _21.id) : Fe7.nodes[_21.id] = _21, _21;
    }
    function Tt9(x36) {
      const _21 = {
        id: o13(x36.getAttribute("url")),
        materials: {},
        skeletons: []
      };
      for (let T21 = 0; T21 < x36.childNodes.length; T21++) {
        const M13 = x36.childNodes[T21];
        switch (M13.nodeName) {
          case "bind_material":
            const A18 = M13.getElementsByTagName("instance_material");
            for (let Y13 = 0; Y13 < A18.length; Y13++) {
              const re8 = A18[Y13], we8 = re8.getAttribute("symbol"), ge7 = re8.getAttribute("target");
              _21.materials[we8] = o13(ge7);
            }
            break;
          case "skeleton":
            _21.skeletons.push(o13(M13.textContent));
            break;
        }
      }
      return _21;
    }
    function $e6(x36, _21) {
      const T21 = [], M13 = [];
      let A18, Y13, re8;
      for (A18 = 0; A18 < x36.length; A18++) {
        const ve9 = x36[A18];
        let Pe6;
        if (Gi3(ve9))
          Pe6 = Et9(ve9), Vi5(Pe6, _21, T21);
        else if (Qt7(ve9)) {
          const Re7 = Fe7.visualScenes[ve9].children;
          for (let Ae6 = 0; Ae6 < Re7.length; Ae6++) {
            const Oe5 = Re7[Ae6];
            if (Oe5.type === "JOINT") {
              const Ne7 = Et9(Oe5.id);
              Vi5(Ne7, _21, T21);
            }
          }
        } else
          console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:", ve9);
      }
      for (A18 = 0; A18 < _21.length; A18++)
        for (Y13 = 0; Y13 < T21.length; Y13++)
          if (re8 = T21[Y13], re8.bone.name === _21[A18].name) {
            M13[A18] = re8, re8.processed = true;
            break;
          }
      for (A18 = 0; A18 < T21.length; A18++)
        re8 = T21[A18], re8.processed === false && (M13.push(re8), re8.processed = true);
      const we8 = [], ge7 = [];
      for (A18 = 0; A18 < M13.length; A18++)
        re8 = M13[A18], we8.push(re8.bone), ge7.push(re8.boneInverse);
      return new po(we8, ge7);
    }
    function Vi5(x36, _21, T21) {
      x36.traverse(function(M13) {
        if (M13.isBone === true) {
          let A18;
          for (let Y13 = 0; Y13 < _21.length; Y13++) {
            const re8 = _21[Y13];
            if (re8.name === M13.name) {
              A18 = re8.boneInverse;
              break;
            }
          }
          A18 === void 0 && (A18 = new Ve4()), T21.push({ bone: M13, boneInverse: A18, processed: false });
        }
      });
    }
    function Lt7(x36) {
      const _21 = [], T21 = x36.matrix, M13 = x36.nodes, A18 = x36.type, Y13 = x36.instanceCameras, re8 = x36.instanceControllers, we8 = x36.instanceLights, ge7 = x36.instanceGeometries, ve9 = x36.instanceNodes;
      for (let ce9 = 0, Re7 = M13.length; ce9 < Re7; ce9++)
        _21.push(Et9(M13[ce9]));
      for (let ce9 = 0, Re7 = Y13.length; ce9 < Re7; ce9++) {
        const Ae6 = Me7(Y13[ce9]);
        Ae6 !== null && _21.push(Ae6.clone());
      }
      for (let ce9 = 0, Re7 = re8.length; ce9 < Re7; ce9++) {
        const Ae6 = re8[ce9], Oe5 = ee7(Ae6.id), Ne7 = $t9(Oe5.id), At9 = Yn6(Ne7, Ae6.materials), ht16 = Ae6.skeletons, rt15 = Oe5.skin.joints, ot15 = $e6(ht16, rt15);
        for (let Un6 = 0, nn4 = At9.length; Un6 < nn4; Un6++) {
          const ji3 = At9[Un6];
          ji3.isSkinnedMesh && (ji3.bind(ot15, Oe5.skin.bindMatrix), ji3.normalizeSkinWeights()), _21.push(ji3);
        }
      }
      for (let ce9 = 0, Re7 = we8.length; ce9 < Re7; ce9++) {
        const Ae6 = F19(we8[ce9]);
        Ae6 !== null && _21.push(Ae6.clone());
      }
      for (let ce9 = 0, Re7 = ge7.length; ce9 < Re7; ce9++) {
        const Ae6 = ge7[ce9], Oe5 = $t9(Ae6.id), Ne7 = Yn6(Oe5, Ae6.materials);
        for (let At9 = 0, ht16 = Ne7.length; At9 < ht16; At9++)
          _21.push(Ne7[At9]);
      }
      for (let ce9 = 0, Re7 = ve9.length; ce9 < Re7; ce9++)
        _21.push(Et9(ve9[ce9]).clone());
      let Pe6;
      if (M13.length === 0 && _21.length === 1)
        Pe6 = _21[0];
      else {
        Pe6 = A18 === "JOINT" ? new Ua() : new Ct4();
        for (let ce9 = 0; ce9 < _21.length; ce9++)
          Pe6.add(_21[ce9]);
      }
      return Pe6.name = A18 === "JOINT" ? x36.sid : x36.name, Pe6.matrix.copy(T21), Pe6.matrix.decompose(Pe6.position, Pe6.quaternion, Pe6.scale), Pe6;
    }
    const Dn6 = new Mn3({ color: 16711935 });
    function mr6(x36, _21) {
      const T21 = [];
      for (let M13 = 0, A18 = x36.length; M13 < A18; M13++) {
        const Y13 = _21[x36[M13]];
        Y13 === void 0 ? (console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.", x36[M13]), T21.push(Dn6)) : T21.push(O20(Y13));
      }
      return T21;
    }
    function Yn6(x36, _21) {
      const T21 = [];
      for (const M13 in x36) {
        const A18 = x36[M13], Y13 = mr6(A18.materialKeys, _21);
        if (Y13.length === 0 && (M13 === "lines" || M13 === "linestrips" ? Y13.push(new Ls()) : Y13.push(new Zs())), M13 === "lines" || M13 === "linestrips")
          for (let ve9 = 0, Pe6 = Y13.length; ve9 < Pe6; ve9++) {
            const ce9 = Y13[ve9];
            if (ce9.isMeshPhongMaterial === true || ce9.isMeshLambertMaterial === true) {
              const Re7 = new Ls();
              Re7.color.copy(ce9.color), Re7.opacity = ce9.opacity, Re7.transparent = ce9.transparent, Y13[ve9] = Re7;
            }
          }
        const re8 = A18.data.attributes.skinIndex !== void 0, we8 = Y13.length === 1 ? Y13[0] : Y13;
        let ge7;
        switch (M13) {
          case "lines":
            ge7 = new ka(A18.data, we8);
            break;
          case "linestrips":
            ge7 = new cr3(A18.data, we8);
            break;
          case "triangles":
          case "polylist":
            re8 ? ge7 = new Su(A18.data, we8) : ge7 = new Pt5(A18.data, we8);
            break;
        }
        T21.push(ge7);
      }
      return T21;
    }
    function Gi3(x36) {
      return Fe7.nodes[x36] !== void 0;
    }
    function Et9(x36) {
      return y34(Fe7.nodes[x36], Lt7);
    }
    function Nn6(x36) {
      const _21 = {
        name: x36.getAttribute("name"),
        children: []
      };
      at11(x36);
      const T21 = n33(x36, "node");
      for (let M13 = 0; M13 < T21.length; M13++)
        _21.children.push(_n6(T21[M13]));
      Fe7.visualScenes[x36.getAttribute("id")] = _21;
    }
    function Hi5(x36) {
      const _21 = new Ct4();
      _21.name = x36.name;
      const T21 = x36.children;
      for (let M13 = 0; M13 < T21.length; M13++) {
        const A18 = T21[M13];
        _21.add(Et9(A18.id));
      }
      return _21;
    }
    function Qt7(x36) {
      return Fe7.visualScenes[x36] !== void 0;
    }
    function Wi4(x36) {
      return y34(Fe7.visualScenes[x36], Hi5);
    }
    function So2(x36) {
      const _21 = n33(x36, "instance_visual_scene")[0];
      return Wi4(o13(_21.getAttribute("url")));
    }
    function gr7() {
      const x36 = Fe7.clips;
      if (l26(x36) === true) {
        if (l26(Fe7.animations) === false) {
          const _21 = [];
          for (const T21 in Fe7.animations) {
            const M13 = w31(T21);
            for (let A18 = 0, Y13 = M13.length; A18 < Y13; A18++)
              _21.push(M13[A18]);
          }
          xr6.push(new ba("default", -1, _21));
        }
      } else
        for (const _21 in x36)
          xr6.push(J12(_21));
    }
    function Ju2(x36) {
      let _21 = "";
      const T21 = [x36];
      for (; T21.length; ) {
        const M13 = T21.shift();
        M13.nodeType === Node.TEXT_NODE ? _21 += M13.textContent : (_21 += `
`, T21.push.apply(T21, M13.childNodes));
      }
      return _21.trim();
    }
    if (e11.length === 0)
      return { scene: new Da() };
    const Xa2 = new DOMParser().parseFromString(e11, "application/xml"), Dt6 = n33(Xa2, "COLLADA")[0], wo2 = Xa2.getElementsByTagName("parsererror")[0];
    if (wo2 !== void 0) {
      const x36 = n33(wo2, "div")[0];
      let _21;
      return x36 ? _21 = x36.textContent : _21 = Ju2(wo2), console.error(`THREE.ColladaLoader: Failed to parse collada file.
`, _21), null;
    }
    const Zu2 = Dt6.getAttribute("version");
    console.debug("THREE.ColladaLoader: File version", Zu2);
    const Ka2 = u35(n33(Dt6, "asset")[0]), Ya2 = new za(this.manager);
    Ya2.setPath(this.resourcePath || t19).setCrossOrigin(this.crossOrigin);
    let To2;
    jc && (To2 = new jc(this.manager), To2.setPath(this.resourcePath || t19));
    const _r6 = new ze4(), xr6 = [];
    let Ja2 = {}, $u2 = 0;
    const Fe7 = {
      animations: {},
      clips: {},
      controllers: {},
      images: {},
      effects: {},
      materials: {},
      cameras: {},
      lights: {},
      geometries: {},
      nodes: {},
      visualScenes: {},
      kinematicsModels: {},
      physicsModels: {},
      kinematicsScenes: {}
    };
    p26(Dt6, "library_animations", "animation", m34), p26(Dt6, "library_animation_clips", "animation_clip", W11), p26(Dt6, "library_controllers", "controller", ie8), p26(Dt6, "library_images", "image", $25), p26(Dt6, "library_effects", "effect", Ee5), p26(Dt6, "library_materials", "material", de9), p26(Dt6, "library_cameras", "camera", ae7), p26(Dt6, "library_lights", "light", Ce7), p26(Dt6, "library_geometries", "geometry", se6), p26(Dt6, "library_nodes", "node", _n6), p26(Dt6, "library_visual_scenes", "visual_scene", Nn6), p26(Dt6, "library_kinematics_models", "kinematics_model", cn3), p26(Dt6, "library_physics_models", "physics_model", q14), p26(Dt6, "scene", "instance_kinematics_scene", Be7), g32(Fe7.animations, b35), g32(Fe7.clips, te7), g32(Fe7.controllers, j19), g32(Fe7.images, z21), g32(Fe7.effects, C21), g32(Fe7.materials, _e7), g32(Fe7.cameras, Le7), g32(Fe7.lights, Mt10), g32(Fe7.geometries, It7), g32(Fe7.visualScenes, Hi5), gr7(), Ye7();
    const yr6 = So2(n33(Dt6, "scene")[0]);
    return yr6.animations = xr6, Ka2.upAxis === "Z_UP" && (console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."), yr6.rotation.set(-Math.PI / 2, 0, 0)), yr6.scale.multiplyScalar(Ka2.unit), {
      get animations() {
        return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."), xr6;
      },
      kinematics: Ja2,
      library: Fe7,
      scene: yr6
    };
  }
};
var qc = new U9();
var E_ = new Ds();
var Yr3 = new Ve4();
var ni3 = new Ve4();
var Jr3 = new qt3();
var Zr3 = new U9(1, 1, 1);
var $r3 = new U9();
var yo = class extends _t4 {
  constructor(...e11) {
    super(...e11), this.urdfNode = null, this.urdfName = "";
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.urdfNode = e11.urdfNode, this.urdfName = e11.urdfName, this;
  }
};
var C_ = class extends yo {
  constructor(...e11) {
    super(...e11), this.isURDFCollider = true, this.type = "URDFCollider";
  }
};
var L_ = class extends yo {
  constructor(...e11) {
    super(...e11), this.isURDFVisual = true, this.type = "URDFVisual";
  }
};
var zu = class extends yo {
  constructor(...e11) {
    super(...e11), this.isURDFLink = true, this.type = "URDFLink";
  }
};
var Bu = class extends yo {
  get jointType() {
    return this._jointType;
  }
  set jointType(e11) {
    if (this.jointType !== e11)
      switch (this._jointType = e11, this.matrixWorldNeedsUpdate = true, e11) {
        case "fixed":
          this.jointValue = [];
          break;
        case "continuous":
        case "revolute":
        case "prismatic":
          this.jointValue = new Array(1).fill(0);
          break;
        case "planar":
          this.jointValue = new Array(3).fill(0), this.axis = new U9(0, 0, 1);
          break;
        case "floating":
          this.jointValue = new Array(6).fill(0);
          break;
      }
  }
  get angle() {
    return this.jointValue[0];
  }
  constructor(...e11) {
    super(...e11), this.isURDFJoint = true, this.type = "URDFJoint", this.jointValue = null, this.jointType = "fixed", this.axis = new U9(1, 0, 0), this.limit = { lower: 0, upper: 0 }, this.ignoreLimits = false, this.origPosition = null, this.origQuaternion = null, this.mimicJoints = [];
  }
  /* Overrides */
  copy(e11, t19) {
    return super.copy(e11, t19), this.jointType = e11.jointType, this.axis = e11.axis.clone(), this.limit.lower = e11.limit.lower, this.limit.upper = e11.limit.upper, this.ignoreLimits = false, this.jointValue = [...e11.jointValue], this.origPosition = e11.origPosition ? e11.origPosition.clone() : null, this.origQuaternion = e11.origQuaternion ? e11.origQuaternion.clone() : null, this.mimicJoints = [...e11.mimicJoints], this;
  }
  /* Public Functions */
  /**
   * @param {...number|null} values The joint value components to set, optionally null for no-op
   * @returns {boolean} Whether the invocation of this function resulted in an actual change to the joint value
   */
  setJointValue(...e11) {
    e11 = e11.map((n33) => n33 === null ? null : parseFloat(n33)), (!this.origPosition || !this.origQuaternion) && (this.origPosition = this.position.clone(), this.origQuaternion = this.quaternion.clone());
    let t19 = false;
    switch (this.mimicJoints.forEach((n33) => {
      t19 = n33.updateFromMimickedJoint(...e11) || t19;
    }), this.jointType) {
      case "fixed":
        return t19;
      case "continuous":
      case "revolute": {
        let n33 = e11[0];
        return n33 == null || n33 === this.jointValue[0] ? t19 : (!this.ignoreLimits && this.jointType === "revolute" && (n33 = Math.min(this.limit.upper, n33), n33 = Math.max(this.limit.lower, n33)), this.quaternion.setFromAxisAngle(this.axis, n33).premultiply(this.origQuaternion), this.jointValue[0] !== n33 ? (this.jointValue[0] = n33, this.matrixWorldNeedsUpdate = true, true) : t19);
      }
      case "prismatic": {
        let n33 = e11[0];
        return n33 == null || n33 === this.jointValue[0] ? t19 : (this.ignoreLimits || (n33 = Math.min(this.limit.upper, n33), n33 = Math.max(this.limit.lower, n33)), this.position.copy(this.origPosition), qc.copy(this.axis).applyEuler(this.rotation), this.position.addScaledVector(qc, n33), this.jointValue[0] !== n33 ? (this.jointValue[0] = n33, this.matrixWorldNeedsUpdate = true, true) : t19);
      }
      case "floating":
        return this.jointValue.every((n33, i27) => e11[i27] === n33 || e11[i27] === null) ? t19 : (this.jointValue[0] = e11[0] !== null ? e11[0] : this.jointValue[0], this.jointValue[1] = e11[1] !== null ? e11[1] : this.jointValue[1], this.jointValue[2] = e11[2] !== null ? e11[2] : this.jointValue[2], this.jointValue[3] = e11[3] !== null ? e11[3] : this.jointValue[3], this.jointValue[4] = e11[4] !== null ? e11[4] : this.jointValue[4], this.jointValue[5] = e11[5] !== null ? e11[5] : this.jointValue[5], ni3.compose(this.origPosition, this.origQuaternion, Zr3), Jr3.setFromEuler(
          E_.set(
            this.jointValue[3],
            this.jointValue[4],
            this.jointValue[5],
            "XYZ"
          )
        ), $r3.set(this.jointValue[0], this.jointValue[1], this.jointValue[2]), Yr3.compose($r3, Jr3, Zr3), ni3.premultiply(Yr3), this.position.setFromMatrixPosition(ni3), this.rotation.setFromRotationMatrix(ni3), this.matrixWorldNeedsUpdate = true, true);
      case "planar":
        return this.jointValue.every((n33, i27) => e11[i27] === n33 || e11[i27] === null) ? t19 : (this.jointValue[0] = e11[0] !== null ? e11[0] : this.jointValue[0], this.jointValue[1] = e11[1] !== null ? e11[1] : this.jointValue[1], this.jointValue[2] = e11[2] !== null ? e11[2] : this.jointValue[2], ni3.compose(this.origPosition, this.origQuaternion, Zr3), Jr3.setFromAxisAngle(this.axis, this.jointValue[2]), $r3.set(this.jointValue[0], this.jointValue[1], 0), Yr3.compose($r3, Jr3, Zr3), ni3.premultiply(Yr3), this.position.setFromMatrixPosition(ni3), this.rotation.setFromRotationMatrix(ni3), this.matrixWorldNeedsUpdate = true, true);
    }
    return t19;
  }
};
var Xc = class extends Bu {
  constructor(...e11) {
    super(...e11), this.type = "URDFMimicJoint", this.mimicJoint = null, this.offset = 0, this.multiplier = 1;
  }
  updateFromMimickedJoint(...e11) {
    const t19 = e11.map((n33) => n33 * this.multiplier + this.offset);
    return super.setJointValue(...t19);
  }
  /* Overrides */
  copy(e11, t19) {
    return super.copy(e11, t19), this.mimicJoint = e11.mimicJoint, this.offset = e11.offset, this.multiplier = e11.multiplier, this;
  }
};
var R_ = class extends zu {
  constructor(...e11) {
    super(...e11), this.isURDFRobot = true, this.urdfNode = null, this.urdfRobotNode = null, this.robotName = null, this.links = null, this.joints = null, this.colliders = null, this.visual = null, this.frames = null;
  }
  copy(e11, t19) {
    super.copy(e11, t19), this.urdfRobotNode = e11.urdfRobotNode, this.robotName = e11.robotName, this.links = {}, this.joints = {}, this.colliders = {}, this.visual = {}, this.traverse((n33) => {
      n33.isURDFJoint && n33.urdfName in e11.joints && (this.joints[n33.urdfName] = n33), n33.isURDFLink && n33.urdfName in e11.links && (this.links[n33.urdfName] = n33), n33.isURDFCollider && n33.urdfName in e11.colliders && (this.colliders[n33.urdfName] = n33), n33.isURDFVisual && n33.urdfName in e11.visual && (this.visual[n33.urdfName] = n33);
    });
    for (const n33 in this.joints)
      this.joints[n33].mimicJoints = this.joints[n33].mimicJoints.map((i27) => this.joints[i27.name]);
    return this.frames = {
      ...this.colliders,
      ...this.visual,
      ...this.links,
      ...this.joints
    }, this;
  }
  getFrame(e11) {
    return this.frames[e11];
  }
  setJointValue(e11, ...t19) {
    const n33 = this.joints[e11];
    return n33 ? n33.setJointValue(...t19) : false;
  }
  setJointValues(e11) {
    let t19 = false;
    for (const n33 in e11) {
      const i27 = e11[n33];
      Array.isArray(i27) ? t19 = this.setJointValue(n33, ...i27) || t19 : t19 = this.setJointValue(n33, i27) || t19;
    }
    return t19;
  }
};
var ua = new qt3();
var Kc = new Ds();
function ds(a22) {
  return a22 ? a22.trim().split(/\s+/g).map((e11) => parseFloat(e11)) : [0, 0, 0];
}
function Yc(a22, e11, t19 = false) {
  t19 || a22.rotation.set(0, 0, 0), Kc.set(e11[0], e11[1], e11[2], "ZYX"), ua.setFromEuler(Kc), ua.multiply(a22.quaternion), a22.quaternion.copy(ua);
}
var Vu = class {
  constructor(e11) {
    this.manager = e11 || Lu, this.loadMeshCb = this.defaultMeshLoader.bind(this), this.parseVisual = true, this.parseCollision = false, this.packages = "", this.workingPath = "", this.fetchOptions = {};
  }
  /* Public API */
  loadAsync(e11) {
    return new Promise((t19, n33) => {
      this.load(e11, t19, null, n33);
    });
  }
  // urdf:    The path to the URDF within the package OR absolute
  // onComplete:      Callback that is passed the model once loaded
  load(e11, t19, n33, i27) {
    const s18 = this.manager, r24 = sr3.extractUrlBase(e11), o13 = this.manager.resolveURL(e11);
    s18.itemStart(o13), fetch(o13, this.fetchOptions).then((c27) => {
      if (c27.ok)
        return n33 && n33(null), c27.text();
      throw new Error(`URDFLoader: Failed to load url '${o13}' with error code ${c27.status} : ${c27.statusText}.`);
    }).then((c27) => {
      this.workingPath === "" && (this.workingPath = r24);
      const l26 = this.parse(c27);
      t19(l26), s18.itemEnd(o13);
    }).catch((c27) => {
      i27 ? i27(c27) : console.error("URDFLoader: Error loading file.", c27), s18.itemError(o13), s18.itemEnd(o13);
    });
  }
  parse(e11) {
    const t19 = this.packages, n33 = this.loadMeshCb, i27 = this.parseVisual, s18 = this.parseCollision, r24 = this.workingPath, o13 = this.manager, c27 = {}, l26 = {}, u35 = {};
    function h26(E25) {
      if (!/^package:\/\//.test(E25))
        return r24 ? r24 + E25 : E25;
      const [b35, w31] = E25.replace(/^package:\/\//, "").split(/\/(.+)/);
      if (typeof t19 == "string")
        return t19.endsWith(b35) ? t19 + "/" + w31 : t19 + "/" + b35 + "/" + w31;
      if (t19 instanceof Function)
        return t19(b35) + "/" + w31;
      if (typeof t19 == "object")
        return b35 in t19 ? t19[b35] + "/" + w31 : (console.error(`URDFLoader : ${b35} not found in provided package list.`), null);
    }
    function d34(E25) {
      let b35;
      E25 instanceof Document ? b35 = [...E25.children] : E25 instanceof Element ? b35 = [E25] : b35 = [...new DOMParser().parseFromString(E25, "text/xml").children];
      const w31 = b35.filter((S23) => S23.nodeName === "robot").pop();
      return p26(w31);
    }
    function p26(E25) {
      const b35 = [...E25.children], w31 = b35.filter((G16) => G16.nodeName.toLowerCase() === "link"), S23 = b35.filter((G16) => G16.nodeName.toLowerCase() === "joint"), D18 = b35.filter((G16) => G16.nodeName.toLowerCase() === "material"), N22 = new R_();
      N22.robotName = E25.getAttribute("name"), N22.urdfRobotNode = E25, D18.forEach((G16) => {
        const B22 = G16.getAttribute("name");
        u35[B22] = m34(G16);
      });
      const I18 = {}, v31 = {};
      w31.forEach((G16) => {
        const B22 = G16.getAttribute("name"), k29 = E25.querySelector(`child[link="${B22}"]`) === null;
        c27[B22] = y34(G16, I18, v31, k29 ? N22 : null);
      }), S23.forEach((G16) => {
        const B22 = G16.getAttribute("name");
        l26[B22] = g32(G16);
      }), N22.joints = l26, N22.links = c27, N22.colliders = v31, N22.visual = I18;
      const L12 = Object.values(l26);
      return L12.forEach((G16) => {
        G16 instanceof Xc && l26[G16.mimicJoint].mimicJoints.push(G16);
      }), L12.forEach((G16) => {
        const B22 = /* @__PURE__ */ new Set(), k29 = (V16) => {
          if (B22.has(V16))
            throw new Error("URDFLoader: Detected an infinite loop of mimic joints.");
          B22.add(V16), V16.mimicJoints.forEach((H16) => {
            k29(H16);
          });
        };
        k29(G16);
      }), N22.frames = {
        ...v31,
        ...I18,
        ...c27,
        ...l26
      }, N22;
    }
    function g32(E25) {
      const b35 = [...E25.children], w31 = E25.getAttribute("type");
      let S23;
      const D18 = b35.find((B22) => B22.nodeName.toLowerCase() === "mimic");
      D18 ? (S23 = new Xc(), S23.mimicJoint = D18.getAttribute("joint"), S23.multiplier = parseFloat(D18.getAttribute("multiplier") || 1), S23.offset = parseFloat(D18.getAttribute("offset") || 0)) : S23 = new Bu(), S23.urdfNode = E25, S23.name = E25.getAttribute("name"), S23.urdfName = S23.name, S23.jointType = w31;
      let N22 = null, I18 = null, v31 = [0, 0, 0], L12 = [0, 0, 0];
      b35.forEach((B22) => {
        const k29 = B22.nodeName.toLowerCase();
        k29 === "origin" ? (v31 = ds(B22.getAttribute("xyz")), L12 = ds(B22.getAttribute("rpy"))) : k29 === "child" ? I18 = c27[B22.getAttribute("link")] : k29 === "parent" ? N22 = c27[B22.getAttribute("link")] : k29 === "limit" && (S23.limit.lower = parseFloat(B22.getAttribute("lower") || S23.limit.lower), S23.limit.upper = parseFloat(B22.getAttribute("upper") || S23.limit.upper));
      }), N22.add(S23), S23.add(I18), Yc(S23, L12), S23.position.set(v31[0], v31[1], v31[2]);
      const G16 = b35.filter((B22) => B22.nodeName.toLowerCase() === "axis")[0];
      if (G16) {
        const B22 = G16.getAttribute("xyz").split(/\s+/g).map((k29) => parseFloat(k29));
        S23.axis = new U9(B22[0], B22[1], B22[2]), S23.axis.normalize();
      }
      return S23;
    }
    function y34(E25, b35, w31, S23 = null) {
      S23 === null && (S23 = new zu());
      const D18 = [...E25.children];
      return S23.name = E25.getAttribute("name"), S23.urdfName = S23.name, S23.urdfNode = E25, i27 && D18.filter((I18) => I18.nodeName.toLowerCase() === "visual").forEach((I18) => {
        const v31 = f40(I18, u35);
        if (S23.add(v31), I18.hasAttribute("name")) {
          const L12 = I18.getAttribute("name");
          v31.name = L12, v31.urdfName = L12, b35[L12] = v31;
        }
      }), s18 && D18.filter((I18) => I18.nodeName.toLowerCase() === "collision").forEach((I18) => {
        const v31 = f40(I18);
        if (S23.add(v31), I18.hasAttribute("name")) {
          const L12 = I18.getAttribute("name");
          v31.name = L12, v31.urdfName = L12, w31[L12] = v31;
        }
      }), S23;
    }
    function m34(E25) {
      const b35 = [...E25.children], w31 = new Zs();
      return w31.name = E25.getAttribute("name") || "", b35.forEach((S23) => {
        const D18 = S23.nodeName.toLowerCase();
        if (D18 === "color") {
          const N22 = S23.getAttribute("rgba").split(/\s/g).map((I18) => parseFloat(I18));
          w31.color.setRGB(N22[0], N22[1], N22[2]), w31.opacity = N22[3], w31.transparent = N22[3] < 1, w31.depthWrite = !w31.transparent;
        } else if (D18 === "texture") {
          const N22 = S23.getAttribute("filename");
          if (N22) {
            const I18 = new za(o13), v31 = h26(N22);
            w31.map = I18.load(v31), w31.map.colorSpace = bn3;
          }
        }
      }), w31;
    }
    function f40(E25, b35 = {}) {
      const w31 = E25.nodeName.toLowerCase() === "collision", S23 = [...E25.children];
      let D18 = null;
      const N22 = S23.filter((v31) => v31.nodeName.toLowerCase() === "material")[0];
      if (N22) {
        const v31 = N22.getAttribute("name");
        v31 && v31 in b35 ? D18 = b35[v31] : D18 = m34(N22);
      } else
        D18 = new Zs();
      const I18 = w31 ? new C_() : new L_();
      return I18.urdfNode = E25, S23.forEach((v31) => {
        const L12 = v31.nodeName.toLowerCase();
        if (L12 === "geometry") {
          const G16 = v31.children[0].nodeName.toLowerCase();
          if (G16 === "mesh") {
            const B22 = v31.children[0].getAttribute("filename"), k29 = h26(B22);
            if (k29 !== null) {
              const V16 = v31.children[0].getAttribute("scale");
              if (V16) {
                const H16 = ds(V16);
                I18.scale.set(H16[0], H16[1], H16[2]);
              }
              n33(k29, o13, (H16, W11) => {
                W11 ? console.error("URDFLoader: Error loading mesh.", W11) : H16 && (H16 instanceof Pt5 && (H16.material = D18), H16.position.set(0, 0, 0), H16.quaternion.identity(), I18.add(H16));
              });
            }
          } else if (G16 === "box") {
            const B22 = new Pt5();
            B22.geometry = new Ui(1, 1, 1), B22.material = D18;
            const k29 = ds(v31.children[0].getAttribute("size"));
            B22.scale.set(k29[0], k29[1], k29[2]), I18.add(B22);
          } else if (G16 === "sphere") {
            const B22 = new Pt5();
            B22.geometry = new Oa(1, 30, 30), B22.material = D18;
            const k29 = parseFloat(v31.children[0].getAttribute("radius")) || 0;
            B22.scale.set(k29, k29, k29), I18.add(B22);
          } else if (G16 === "cylinder") {
            const B22 = new Pt5();
            B22.geometry = new mo(1, 1, 1, 30), B22.material = D18;
            const k29 = parseFloat(v31.children[0].getAttribute("radius")) || 0, V16 = parseFloat(v31.children[0].getAttribute("length")) || 0;
            B22.scale.set(k29, V16, k29), B22.rotation.set(Math.PI / 2, 0, 0), I18.add(B22);
          }
        } else if (L12 === "origin") {
          const G16 = ds(v31.getAttribute("xyz")), B22 = ds(v31.getAttribute("rpy"));
          I18.position.set(G16[0], G16[1], G16[2]), I18.rotation.set(0, 0, 0), Yc(I18, B22);
        }
      }), I18;
    }
    return d34(e11);
  }
  // Default mesh loading function
  defaultMeshLoader(e11, t19, n33) {
    /\.stl$/i.test(e11) ? new T_(t19).load(e11, (s18) => {
      const r24 = new Pt5(s18, new Zs());
      n33(r24);
    }) : /\.dae$/i.test(e11) ? new A_(t19).load(e11, (s18) => n33(s18.scene)) : console.warn(`URDFLoader: Could not load model at ${e11}.
No loader available`);
  }
};
var P_ = Object.defineProperty;
var Os = (a22, e11, t19, n33) => {
  for (var i27 = void 0, s18 = a22.length - 1, r24; s18 >= 0; s18--)
    (r24 = a22[s18]) && (i27 = r24(e11, t19, i27) || i27);
  return i27 && P_(e11, t19, i27), i27;
};
var no;
var Gu;
var Ms;
var Fi = (Ms = class extends H4 {
  constructor() {
    super(...arguments);
    Ft3(this, no);
    this.urdfConfigs = xo, this.name = this.urdfConfigs[0].name, this.jointValues = {}, this.pose = [0, 0, 0], this._translation = [0, 0, 0], this._rotation = [0, 0, 0, 0], this.loader = new Ha(), this.group = new Ct4();
  }
  getUrdfConfig() {
    return this.urdfConfigs.find(({ name: t19 }) => t19 === this.name) ?? this.urdfConfigs[0];
  }
  getField() {
    const t19 = this.closest("frc-field3d");
    if (t19)
      return t19;
  }
  static updatePose(t19, n33) {
    const [i27, s18, r24] = n33.translation;
    t19.position.set(i27, s18, r24), t19.rotation.setFromQuaternion(_o(n33.rotation));
  }
  loadRobotModel() {
    const t19 = this.getField(), n33 = this.getUrdfConfig();
    if (!t19)
      return;
    const i27 = t19.getFieldGroup();
    i27.remove(this.group), this.object && this.group.remove(this.object);
    const s18 = new Fa(), r24 = new Vu(s18), o13 = Fu(n33.src ?? "");
    r24.packages = {
      "": Ps(t19.assetPathPrefix ?? "", o13)
      // The equivalent of a (list of) ROS package(s):// directory
    };
    const c27 = new Promise((h26) => {
      if (n33.src)
        r24.load(
          Ps(t19.assetPathPrefix ?? "", n33.src),
          (d34) => {
            h26(d34);
          }
        );
      else {
        const d34 = r24.parse(n33.content ?? "");
        h26(d34);
      }
    }), l26 = new Ct4();
    this.group = l26, i27.add(this.group);
    const u35 = new Ct4();
    this.object = u35, l26.add(u35), u35.rotation.setFromQuaternion(
      Ai3(n33.rotations)
    ), u35.position.set(...n33.position), c27.then((h26) => {
      this.robot = h26, this.updateJoints(), u35.add(h26), An3(this, no, Gu).call(this);
    });
  }
  updateJoints() {
    var t19;
    (t19 = this.robot) == null || t19.setJointValues(this.jointValues);
  }
  firstUpdated() {
    this.updateUrdfConfigs(), this.renderObject();
    const t19 = this.closest("frc-field3d");
    t19 == null || t19.addEventListener("urdfConfigsChange", () => {
      this.updateUrdfConfigs();
    });
  }
  updated(t19) {
    if (t19.has("name") && this.loadRobotModel(), t19.has("jointValues") && this.updateJoints(), t19.has("pose")) {
      const [n33 = 0, i27 = 0, s18 = 0] = this.pose;
      this._translation = [n33, i27], this._rotation = s18;
    }
  }
  updateUrdfConfigs() {
    const t19 = this.getField(), n33 = t19 == null ? void 0 : t19.urdfConfigs;
    n33 != null && n33.length && n33 !== this.urdfConfigs && (this.urdfConfigs = n33, this.urdfConfigs.some(
      (s18) => s18.name === this.name
    ) || (this.name = this.urdfConfigs[0].name));
  }
  renderObject() {
    this.group && Ms.updatePose(this.group, {
      translation: this._translation.length === 2 ? [...this._translation, 0] : this._translation,
      rotation: typeof this._rotation == "number" ? $s([{ axis: "z", degrees: this._rotation }]) : this._rotation
    }), requestAnimationFrame(() => {
      this.renderObject();
    });
  }
}, no = /* @__PURE__ */ new WeakSet(), Gu = function() {
  this.dispatchEvent(
    new CustomEvent("urdfLoad", {
      detail: {
        urdf: this.robot
      },
      bubbles: true,
      composed: true
    })
  );
}, Ms);
Os([
  n7()
], Fi.prototype, "urdfConfigs");
Os([
  Mt4({ type: String })
], Fi.prototype, "name");
Os([
  Mt4({ type: Object, attribute: "joint-values" })
], Fi.prototype, "jointValues");
Os([
  Mt4({ type: Array })
], Fi.prototype, "pose");
Os([
  n7()
], Fi.prototype, "_translation");
Os([
  n7()
], Fi.prototype, "_rotation");
var I_ = Fi;
customElements.get("frc-field3d-urdf") || customElements.define("frc-field3d-urdf", I_);
var D_ = Object.defineProperty;
var gn3 = (a22, e11, t19, n33) => {
  for (var i27 = void 0, s18 = a22.length - 1, r24; s18 >= 0; s18--)
    (r24 = a22[s18]) && (i27 = r24(e11, t19, i27) || i27);
  return i27 && D_(e11, t19, i27), i27;
};
var io;
var Hu;
var Ln3;
var ln3 = (Ln3 = class extends H4 {
  constructor() {
    super(...arguments);
    Ft3(this, io);
    this.fieldConfigs = Ou, this.objectConfigs = ja, this.urdfConfigs = xo, this.game = this.fieldConfigs[0].game, this.origin = "red", this.backgroundColor = "black", this.enableVR = false, this.fixedCamera = false, this.ORBIT_FIELD_DEFAULT_TARGET = new U9(0, 0.5, 0), this.ORBIT_FIELD_DEFAULT_POSITION = new U9(0, 6, -12), this.WPILIB_ROTATION = Ai3([
      {
        axis: "x",
        degrees: -90
      },
      {
        axis: "y",
        degrees: 180
      }
    ]), this.cameraPoseObject = new _t4(), this.scene = new Da(), this.loader = new Ha();
  }
  getFieldConfig() {
    return this.fieldConfigs.find(({ game: t19 }) => t19 === this.game) ?? this.fieldConfigs[0];
  }
  getCamera() {
    const t19 = this.getBoundingClientRect();
    return new Vt3(
      50,
      t19.width / t19.height,
      0.1,
      100
    );
  }
  static getOrbitControls(t19, n33) {
    const i27 = new Uu(t19, n33);
    return i27.maxDistance = 30, i27.enabled = true, i27.update(), i27;
  }
  static addLights(t19) {
    const s18 = new go(16777215, 0.2);
    s18.position.set(0, 10, 0), t19.add(s18);
    const r24 = 16777215, o13 = 4473924, c27 = 1, l26 = new Ru(
      r24,
      o13,
      c27
    );
    t19.add(l26);
  }
  initRenderer() {
    if (!this.canvas)
      return;
    this.renderer = new Ia({
      antialias: true,
      canvas: this.canvas
    });
    const t19 = this.getBoundingClientRect();
    this.renderer.setSize(t19.width, t19.height), this.vrButton = Ii.createButton(this.renderer), this.renderer.xr.enabled = this.enableVR, this.renderer.setAnimationLoop(() => this.renderField());
  }
  initScene() {
    this.wpilibCoordinateGroup = new Ct4(), this.scene.add(this.wpilibCoordinateGroup), this.wpilibCoordinateGroup.rotation.setFromQuaternion(this.WPILIB_ROTATION), this.wpilibFieldCoordinateGroup = new Ct4(), this.wpilibCoordinateGroup.add(this.wpilibFieldCoordinateGroup), this.wpilibFieldCoordinateGroup.add(this.cameraPoseObject);
  }
  updateCanvasSize() {
    var n33;
    const t19 = this.getBoundingClientRect();
    (n33 = this.renderer) == null || n33.setSize(t19.width, t19.height), this.camera.aspect = t19.width / t19.height, this.camera.updateProjectionMatrix();
  }
  static adjustMaterials(t19) {
    t19.traverse((n33) => {
      const i27 = n33;
      if (i27.isMesh && i27.material instanceof ur3) {
        const s18 = i27.material;
        s18.metalness = 0, s18.roughness = 1;
      }
    });
  }
  static updatePose(t19, n33) {
    const [i27, s18, r24] = n33.translation;
    t19.position.set(i27, s18, r24), t19.rotation.setFromQuaternion(_o(n33.rotation));
  }
  loadFieldModel(t19) {
    this.fieldObject && this.wpilibCoordinateGroup.remove(this.fieldObject);
    const n33 = Ps(this.assetPathPrefix ?? "", t19.src);
    this.loader.load(n33, (i27) => {
      this.fieldObject = i27.scene, this.wpilibCoordinateGroup.add(i27.scene), Ln3.adjustMaterials(i27.scene), i27.scene.rotation.setFromQuaternion(
        Ai3(t19.rotations)
      );
    });
  }
  getFieldGroup() {
    return this.wpilibFieldCoordinateGroup;
  }
  createFieldObject(t19) {
    return new M_(this, t19 == null ? void 0 : t19.onCreate, t19 == null ? void 0 : t19.onRemove);
  }
  firstUpdated() {
    this.initScene(), this.initRenderer(), this.camera = this.getCamera(), this.controls = Ln3.getOrbitControls(this.camera, this.canvas), this.camera.position.copy(this.ORBIT_FIELD_DEFAULT_POSITION), this.controls.target.copy(this.ORBIT_FIELD_DEFAULT_TARGET), Ln3.addLights(this.scene), new ResizeObserver(() => {
      this.updateCanvasSize();
    }).observe(this);
  }
  updated(t19) {
    if (t19.has("fieldConfigs") && (this.fieldConfigs.some(
      (i27) => i27.game === this.game
    ) || (this.game = this.fieldConfigs[0].game), this.loadFieldModel(this.getFieldConfig())), t19.has("game") && this.loadFieldModel(this.getFieldConfig()), t19.has("backgroundColor") && (this.scene.background = new ze4(this.backgroundColor)), t19.has("origin")) {
      const n33 = this.getFieldConfig();
      if (n33) {
        const i27 = this.origin !== "red";
        this.wpilibFieldCoordinateGroup.setRotationFromAxisAngle(
          new U9(0, 0, 1),
          i27 ? 0 : Math.PI
        ), this.wpilibFieldCoordinateGroup.position.set(
          c2(n33.size[0] / 2, n33.unit, "m") * (i27 ? -1 : 1),
          c2(n33.size[1] / 2, n33.unit, "m") * (i27 ? -1 : 1),
          0
        );
      }
    }
    if (t19.has("enableVR") && (this.enableVR ? this.container.appendChild(this.vrButton) : this.vrButton.remove(), this.renderer && (this.renderer.xr.enabled = this.enableVR)), t19.has("fixedCamera") && (this.controls.enabled = !this.fixedCamera), (t19.has("cameraPose") || t19.has("fixedCamera")) && this.fixedCamera) {
      const n33 = this.cameraPose ? ku(this.cameraPose) : Wa();
      An3(this, io, Hu).call(this, n33);
    }
    t19.has("urdfConfigs") && this.dispatchEvent(
      new CustomEvent("urdfConfigsChange", {
        detail: {
          urdfConfigs: this.urdfConfigs
        },
        bubbles: true,
        composed: true
      })
    );
  }
  renderField() {
    var t19;
    (t19 = this.renderer) == null || t19.render(this.scene, this.camera), this.fixedCamera || this.controls.update();
  }
  connectedCallback() {
    super.connectedCallback(), this.initRenderer();
  }
  disconnectedCallback() {
    var t19;
    super.disconnectedCallback(), (t19 = this.renderer) == null || t19.dispose(), this.renderer = void 0;
  }
  render() {
    return Ot4` <div class="container">
      <canvas></canvas>
    </div>`;
  }
}, io = /* @__PURE__ */ new WeakSet(), Hu = function(t19) {
  Ln3.updatePose(this.cameraPoseObject, t19);
  const n33 = new U9();
  this.cameraPoseObject.getWorldPosition(n33);
  const i27 = new qt3();
  this.cameraPoseObject.getWorldQuaternion(i27), this.camera.position.copy(n33), this.camera.quaternion.copy(
    i27.multiply(
      Ai3([
        { axis: "z", degrees: -90 },
        { axis: "y", degrees: -90 }
      ])
    )
  ), this.camera.updateMatrixWorld();
}, Ln3.styles = Ut3`
    :host {
      position: relative;
      display: block;
      width: 700px;
      height: 400px;
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
  `, Ln3);
gn3([
  Mt4({ type: Array })
], ln3.prototype, "fieldConfigs");
gn3([
  Mt4({ type: Array })
], ln3.prototype, "objectConfigs");
gn3([
  Mt4({ type: Array })
], ln3.prototype, "urdfConfigs");
gn3([
  Mt4({ type: String })
], ln3.prototype, "game");
gn3([
  Mt4({ type: String })
], ln3.prototype, "origin");
gn3([
  Mt4({ type: String, attribute: "background-color" })
], ln3.prototype, "backgroundColor");
gn3([
  Mt4({ type: Boolean, attribute: "enable-vr" })
], ln3.prototype, "enableVR");
gn3([
  Mt4({ type: String })
], ln3.prototype, "assetPathPrefix");
gn3([
  Mt4({ type: Array, attribute: "camera-pose" })
], ln3.prototype, "cameraPose");
gn3([
  Mt4({ type: Boolean, attribute: "fixed-camera" })
], ln3.prototype, "fixedCamera");
gn3([
  h4("canvas")
], ln3.prototype, "canvas");
gn3([
  h4(".container")
], ln3.prototype, "container");
var N_ = ln3;
customElements.get("frc-field3d") || customElements.define("frc-field3d", N_);
var U_ = Object.defineProperty;
var fi3 = (a22, e11, t19, n33) => {
  for (var i27 = void 0, s18 = a22.length - 1, r24; s18 >= 0; s18--)
    (r24 = a22[s18]) && (i27 = r24(e11, t19, i27) || i27);
  return i27 && U_(e11, t19, i27), i27;
};
var so;
var Wu;
var ci3;
var Kn3 = (ci3 = class extends H4 {
  constructor() {
    super(...arguments);
    Ft3(this, so);
    this.urdfConfigs = xo, this.name = this.urdfConfigs[0].name, this.backgroundColor = "black", this.enableVR = false, this.angles = {}, this.scene = new Da(), this.group = new Ct4();
  }
  getCamera() {
    const t19 = this.getBoundingClientRect(), n33 = new Vt3(
      50,
      t19.width / t19.height,
      0.1,
      100
    );
    return n33.position.set(1, 1, 1), n33.lookAt(0, 0, 0.5), n33.up.set(0, 0, 1), n33;
  }
  static getOrbitControls(t19, n33) {
    const i27 = new Uu(t19, n33);
    return i27.maxDistance = 30, i27.enabled = true, i27.update(), i27;
  }
  static addLights(t19) {
    const s18 = new go(16777215, 0.2);
    s18.position.set(0, 10, 0), t19.add(s18);
    const r24 = 16777215, o13 = 4473924, c27 = 1, l26 = new Ru(
      r24,
      o13,
      c27
    );
    t19.add(l26);
  }
  initRenderer() {
    if (!this.canvas)
      return;
    this.renderer = new Ia({
      antialias: true,
      canvas: this.canvas
    });
    const t19 = this.getBoundingClientRect();
    this.renderer.setSize(t19.width, t19.height), this.vrButton = Ii.createButton(this.renderer), this.renderer.xr.enabled = this.enableVR, this.renderer.setAnimationLoop(() => this.renderField());
  }
  updateCanvasSize() {
    var n33;
    const t19 = this.getBoundingClientRect();
    (n33 = this.renderer) == null || n33.setSize(t19.width, t19.height), this.camera.aspect = t19.width / t19.height, this.camera.updateProjectionMatrix();
  }
  firstUpdated() {
    this.initRenderer(), this.camera = this.getCamera(), this.controls = ci3.getOrbitControls(this.camera, this.canvas), ci3.addLights(this.scene);
    const t19 = new uo(5, 5, 20, 20), n33 = new Mn3({
      color: 65280,
      side: fn3,
      wireframe: true
    }), i27 = new Pt5(t19, n33);
    this.scene.add(i27), new ResizeObserver(() => {
      this.updateCanvasSize();
    }).observe(this);
  }
  getUrdfConfig() {
    return this.urdfConfigs.find(({ name: t19 }) => t19 === this.name) ?? this.urdfConfigs[0];
  }
  updateAngles() {
    var t19;
    (t19 = this.robot) == null || t19.setAngles(this.angles);
  }
  loadRobotModel() {
    const t19 = this.getUrdfConfig(), n33 = new Fa(), i27 = new Vu(n33), s18 = Fu(t19.src ?? "");
    i27.packages = {
      "": Ps(this.assetPathPrefix ?? "", s18)
      // The equivalent of a (list of) ROS package(s):// directory
    };
    const r24 = new Promise((l26) => {
      if (t19.src)
        i27.load(
          Ps(this.assetPathPrefix ?? "", t19.src),
          (u35) => {
            l26(u35);
          }
        );
      else {
        const u35 = i27.parse(t19.content ?? "");
        l26(u35);
      }
    }), o13 = new Ct4();
    this.group = o13, this.scene.add(this.group);
    const c27 = new Ct4();
    this.object = c27, o13.add(c27), c27.rotation.setFromQuaternion(
      Ai3(t19.rotations)
    ), c27.position.set(...t19.position), r24.then((l26) => {
      this.robot = l26, this.updateAngles(), c27.add(l26), An3(this, so, Wu).call(this);
    });
  }
  updated(t19) {
    (t19.has("urdfConfigs") || t19.has("name")) && (this.urdfConfigs.some(
      (i27) => i27.name === this.name
    ) || (this.name = this.urdfConfigs[0].name), this.loadRobotModel()), t19.has("backgroundColor") && (this.scene.background = new ze4(this.backgroundColor)), t19.has("enableVR") && (this.enableVR ? this.container.appendChild(this.vrButton) : this.vrButton.remove(), this.renderer && (this.renderer.xr.enabled = this.enableVR));
  }
  renderField() {
    var t19;
    (t19 = this.renderer) == null || t19.render(this.scene, this.camera), this.controls.update();
  }
  connectedCallback() {
    super.connectedCallback(), this.initRenderer();
  }
  disconnectedCallback() {
    var t19;
    super.disconnectedCallback(), (t19 = this.renderer) == null || t19.dispose(), this.renderer = void 0;
  }
  render() {
    return Ot4` <div class="container">
      <canvas></canvas>
    </div>`;
  }
}, so = /* @__PURE__ */ new WeakSet(), Wu = function() {
  this.dispatchEvent(
    new CustomEvent("urdfLoad", {
      detail: {
        urdf: this.robot
      }
    })
  );
}, ci3.styles = Ut3`
    :host {
      position: relative;
      display: block;
      width: 700px;
      height: 400px;
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
  `, ci3);
fi3([
  Mt4({ type: Array })
], Kn3.prototype, "urdfConfigs");
fi3([
  Mt4({ type: String })
], Kn3.prototype, "name");
fi3([
  Mt4({ type: String, attribute: "background-color" })
], Kn3.prototype, "backgroundColor");
fi3([
  Mt4({ type: Boolean, attribute: "enable-vr" })
], Kn3.prototype, "enableVR");
fi3([
  Mt4({ type: String })
], Kn3.prototype, "assetPathPrefix");
fi3([
  Mt4({ type: Object })
], Kn3.prototype, "angles");
fi3([
  h4("canvas")
], Kn3.prototype, "canvas");
fi3([
  h4(".container")
], Kn3.prototype, "container");
var k_ = Kn3;
customElements.get("frc-urdf") || customElements.define("frc-urdf", k_);
var O_ = Object.defineProperty;
var ju = (a22, e11, t19, n33) => {
  for (var i27 = void 0, s18 = a22.length - 1, r24; s18 >= 0; s18--)
    (r24 = a22[s18]) && (i27 = r24(e11, t19, i27) || i27);
  return i27 && O_(e11, t19, i27), i27;
};
var ar3;
var Mi;
var si3;
var Si;
var ri3;
var ro;
var qu;
var qa = class extends H4 {
  constructor() {
    super(...arguments);
    Ft3(this, ro);
    Ft3(this, ar3);
    Ft3(this, Mi);
    Ft3(this, si3);
    Ft3(this, Si);
    Ft3(this, ri3);
    this.pose = [0, 0, 0], this._pose3d = Wa();
  }
  getField() {
    return this.closest("frc-field3d");
  }
  loadRobotModel() {
    ft7(this, ar3).create();
  }
  firstUpdated() {
    const t19 = new Ui(0.2, 0.2, 0.2), n33 = new y0(t19), i27 = new Ls({ color: 16044581, linewidth: 4 }), s18 = new ka(n33, i27);
    Kt3(this, Mi, s18), Kt3(this, si3, new oa(
      new U9(1, 0, 0).normalize(),
      new U9(0, 0, 0),
      0.3,
      16711680,
      0.1,
      0.05
    )), Kt3(this, Si, new oa(
      new U9(1, 0, 0).normalize(),
      new U9(0, 0, 0),
      0.3,
      16711680,
      0.1,
      0.05
    )), Kt3(this, ri3, new oa(
      new U9(1, 0, 0).normalize(),
      new U9(0, 0, 0),
      0.3,
      16711680,
      0.1,
      0.05
    )), Kt3(this, ar3, this.getField().createFieldObject({
      onCreate: (r24) => {
        const o13 = r24.getGroup();
        o13.add(ft7(this, Mi)), o13.add(ft7(this, si3)), o13.add(ft7(this, Si)), o13.add(ft7(this, ri3));
      }
    }));
  }
  updated(t19) {
    t19.has("pose") && (this._pose3d = ku(this.pose), An3(this, ro, qu).call(this));
  }
};
ar3 = /* @__PURE__ */ new WeakMap(), Mi = /* @__PURE__ */ new WeakMap(), si3 = /* @__PURE__ */ new WeakMap(), Si = /* @__PURE__ */ new WeakMap(), ri3 = /* @__PURE__ */ new WeakMap(), ro = /* @__PURE__ */ new WeakSet(), qu = function() {
  const t19 = _o(this._pose3d.rotation), [n33, i27, s18] = this._pose3d.translation;
  ft7(this, Mi).position.set(n33, i27, s18), ft7(this, Mi).rotation.setFromQuaternion(t19), ft7(this, si3).rotation.setFromQuaternion(t19), ft7(this, si3).rotateZ(-Math.PI / 2), ft7(this, si3).position.set(n33, i27, s18), ft7(this, Si).rotation.setFromQuaternion(t19), ft7(this, Si).position.set(n33, i27, s18), ft7(this, ri3).setRotationFromQuaternion(t19), ft7(this, ri3).rotateX(Math.PI / 2), ft7(this, ri3).position.set(n33, i27, s18);
};
ju([
  Mt4({ type: Array })
], qa.prototype, "pose");
ju([
  n7()
], qa.prototype, "_pose3d");
customElements.get("frc-field3d-pose-visualizer") || customElements.define("frc-field3d-pose-visualizer", qa);
var z_ = Object.defineProperty;
var Fs = (a22, e11, t19, n33) => {
  for (var i27 = void 0, s18 = a22.length - 1, r24; s18 >= 0; s18--)
    (r24 = a22[s18]) && (i27 = r24(e11, t19, i27) || i27);
  return i27 && z_(e11, t19, i27), i27;
};
var oi3;
var wi3;
var lr3;
var wn3;
var Ta;
var Xu;
var Ku;
var Yu;
var zi = class extends H4 {
  constructor() {
    super(...arguments);
    Ft3(this, wn3);
    Ft3(this, oi3);
    Ft3(this, wi3);
    Ft3(this, lr3);
    this.name = "", this.pose = [0, 0, 0], this.sourceProvider = "", this.sourceKey = "", Kt3(this, oi3, []), Kt3(this, wi3, false);
  }
  getJointValues() {
    const t19 = An3(this, wn3, Ta).call(this);
    if (!(t19 != null && t19.hasChildren())) {
      const o13 = {};
      return ft7(this, oi3).forEach((c27) => {
        o13[c27] = 0;
      }), o13;
    }
    const n33 = [this.sourceKey, "joints"].join("/"), i27 = this.store.getSource(
      this.sourceProvider,
      n33
    ), s18 = (i27 == null ? void 0 : i27.getJson(false)) ?? {}, r24 = {};
    return ft7(this, oi3).forEach((o13) => {
      r24[o13] = s18[o13] ?? 0;
    }), r24;
  }
  createRenderRoot() {
    return this;
  }
  updated(t19) {
    (t19.has("sourceProvider") || t19.has("sourceKey") || t19.has("store")) && (Kt3(this, wi3, false), An3(this, wn3, Xu).call(this));
  }
  render() {
    return Ot4`
      <frc-field3d-urdf
        @urdfLoad=${An3(this, wn3, Yu)}
        .jointValues=${this.getJointValues()}
        .pose=${this.pose}
        .name=${this.name}
      ></frc-field3d-urdf>
    `;
  }
};
oi3 = /* @__PURE__ */ new WeakMap(), wi3 = /* @__PURE__ */ new WeakMap(), lr3 = /* @__PURE__ */ new WeakMap(), wn3 = /* @__PURE__ */ new WeakSet(), Ta = function() {
  const { provider: t19, store: n33, sourceProvider: i27, sourceKey: s18 } = this;
  if (!(!t19 || !n33 || !i27 || !s18))
    return n33.getSource(i27, s18);
}, Xu = function() {
  var t19, n33;
  (t19 = ft7(this, lr3)) == null || t19.call(this), !(!this.sourceProvider || !this.sourceKey) && Kt3(this, lr3, (n33 = this.store) == null ? void 0 : n33.subscribe(
    this.sourceProvider,
    this.sourceKey,
    () => {
      An3(this, wn3, Ku).call(this), this.requestUpdate();
    },
    true
  ));
}, Ku = function() {
  ft7(this, wi3) || !An3(this, wn3, Ta).call(this) || (ft7(this, oi3).forEach((n33) => {
    var r24;
    const i27 = [this.sourceKey, "joints", n33].join(
      "/"
    ), s18 = this.store.getSource(
      this.sourceProvider,
      i27
    );
    s18 != null && s18.hasValue() || (r24 = this.provider) == null || r24.userUpdate(i27, 0);
  }), Kt3(this, wi3, true));
}, Yu = function(t19) {
  const n33 = t19.detail.urdf;
  Kt3(this, oi3, Object.keys(n33.joints).sort()), Object.values(n33.joints).forEach((i27) => {
    i27.ignoreLimits = true;
  }), this.requestUpdate();
};
Fs([
  Mt4({ type: String })
], zi.prototype, "name");
Fs([
  Mt4({ type: Array })
], zi.prototype, "pose");
Fs([
  Mt4({ type: Object, attribute: false })
], zi.prototype, "provider");
Fs([
  Mt4({ type: Object, attribute: false })
], zi.prototype, "store");
Fs([
  Mt4({ type: String, attribute: "source-provider" })
], zi.prototype, "sourceProvider");
Fs([
  Mt4({ type: String, attribute: "source-key" })
], zi.prototype, "sourceKey");
customElements.get("frc-field3d-urdf-wrapper") || customElements.define("frc-field3d-urdf-wrapper", zi);

// node_modules/@frc-web-components/fwc/dist/icon-Dc8f99z4.js
var o2 = {
  check: "M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",
  "check-circle": "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z",
  close: "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z",
  edit: "M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"
};
var d5 = Object.defineProperty;
var n10 = (e11, s18, a22, v31) => {
  for (var i27 = void 0, c27 = e11.length - 1, p26; c27 >= 0; c27--)
    (p26 = e11[c27]) && (i27 = p26(s18, a22, i27) || i27);
  return i27 && d5(s18, a22, i27), i27;
};
var y7 = {
  dashboard: {
    displayName: "Icon",
    defaultHtml: `<frc-icon icon="${Object.keys(o2)[0]}"></frc-icon>`
  },
  properties: {
    color: {
      type: "String",
      defaultValue: "#000000",
      input: { type: "ColorPicker" }
    },
    icon: {
      type: "String",
      defaultValue: Object.keys(o2)[0],
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["Custom"].concat(Object.keys(o2));
        }
      }
    },
    svgPath: {
      type: "String",
      attribute: "svg-path",
      defaultValue: "",
      input: {
        isDisabled({ icon: e11 }) {
          return e11 !== "Custom";
        }
      }
    },
    viewBox: {
      type: "String",
      attribute: "view-box",
      defaultValue: "0 0 24 24",
      input: {
        isDisabled({ icon: e11 }) {
          return e11 !== "Custom";
        }
      }
    }
  }
};
var l7 = class l8 extends H4 {
  constructor() {
    super(...arguments), this.color = "#000000", this.icon = "", this.svgPath = "", this.viewBox = "0 0 24 24";
  }
  render() {
    const s18 = this.icon === "Custom" || !this.icon;
    return Ot4`
      <svg
        xmlns="http://www.w3.org/2000/svg"
        height="24px"
        viewBox=${s18 ? this.viewBox : "0 0 24 24"}
        width="24px"
        fill=${this.color}
      >
        <path d=${s18 ? this.svgPath : o2[this.icon]} />
      </svg>
    `;
  }
};
l7.styles = Ut3`
    :host {
      display: inline-block;
      width: 24px;
      height: 24px;
    }

    svg {
      width: 100%;
      height: 100%;
    }
  `;
var t6 = l7;
n10([
  Mt4({ type: String })
], t6.prototype, "color");
n10([
  Mt4({ type: String })
], t6.prototype, "icon");
n10([
  Mt4({ type: String, attribute: "svg-path" })
], t6.prototype, "svgPath");
n10([
  Mt4({ type: String, attribute: "view-box" })
], t6.prototype, "viewBox");
customElements.get("frc-icon") || customElements.define("frc-icon", t6);

// node_modules/@frc-web-components/fwc/dist/components/number-bar.es.js
var l9 = Object.defineProperty;
var i8 = (n33, r24, a22, y34) => {
  for (var s18 = void 0, p26 = n33.length - 1, o13; p26 >= 0; p26--)
    (o13 = n33[p26]) && (s18 = o13(r24, a22, s18) || s18);
  return s18 && l9(r24, a22, s18), s18;
};
var k6 = {
  dashboard: {
    displayName: "Number Bar"
  },
  properties: {
    value: { type: "Number", primary: true },
    max: { type: "Number", defaultValue: 1 },
    min: { type: "Number", defaultValue: -1 },
    center: { type: "Number" },
    precision: { type: "Number", defaultValue: 2 },
    hideText: { type: "Boolean", attribute: "hide-text" },
    numTickMarks: {
      type: "Number",
      defaultValue: 3,
      attribute: "num-tick-marks"
    },
    unit: { type: "String" }
  }
};
function b9(n33, r24, a22) {
  return Math.min(a22, Math.max(n33, r24));
}
var m6 = class m7 extends H4 {
  constructor() {
    super(...arguments), this.value = 0, this.min = -1, this.max = 1, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "";
  }
  render() {
    const r24 = Math.min(this.min, this.max), a22 = Math.max(this.min, this.max);
    return Ot4`
      <frc-bar
        value="${this.value}"
        min="${r24}"
        max="${a22}"
        center="${this.center}"
        part="bar"
      >
        ${this.hideText ? "" : Ot4`
              ${this.value.toFixed(b9(this.precision, 0, 100))} ${this.unit}
            `}
      </frc-bar>
      ${this.numTickMarks > 0 ? Ot4`
            <frc-axis
              part="axis"
              ticks="${this.numTickMarks}"
              min=${r24}
              max=${a22}
              unit="${this.unit}"
            ></frc-axis>
          ` : ""}
    `;
  }
};
m6.styles = [
  Ut3`
      :host {
        display: inline-block;
        width: 300px;
        height: auto;
        font-family: sans-serif;
      }

      [part='bar'] {
        width: 100%;
        margin: 0;
      }

      [part='bar'] {
        position: relative;
        height: 20px;
        border-radius: 3px;
      }

      [part='axis'] {
        width: calc(100% - 45px);
        margin: 2px auto 0;
        display: block;
      }
    `
];
var t7 = m6;
i8([
  Mt4({ type: Number })
], t7.prototype, "value");
i8([
  Mt4({ type: Number })
], t7.prototype, "min");
i8([
  Mt4({ type: Number })
], t7.prototype, "max");
i8([
  Mt4({ type: Number })
], t7.prototype, "center");
i8([
  Mt4({ type: Number })
], t7.prototype, "precision");
i8([
  Mt4({ type: Boolean, attribute: "hide-text" })
], t7.prototype, "hideText");
i8([
  Mt4({ type: Number, attribute: "num-tick-marks" })
], t7.prototype, "numTickMarks");
i8([
  Mt4({ type: String })
], t7.prototype, "unit");
customElements.get("frc-number-bar") || customElements.define("frc-number-bar", t7);

// node_modules/@frc-web-components/fwc/dist/components/accelerometer.es.js
var n11 = Object.defineProperty;
var r5 = (u35, p26, o13, c27) => {
  for (var i27 = void 0, a22 = u35.length - 1, m34; a22 >= 0; a22--)
    (m34 = u35[a22]) && (i27 = m34(p26, o13, i27) || i27);
  return i27 && n11(p26, o13, i27), i27;
};
var b10 = {
  dashboard: {
    displayName: "Accelerometer"
  },
  properties: {
    value: { type: "Number", primary: true },
    max: { type: "Number", defaultValue: 1 },
    min: { type: "Number", defaultValue: -1 },
    center: { type: "Number" },
    precision: { type: "Number", defaultValue: 2 },
    hideText: { type: "Boolean", attribute: "hide-text" },
    numTickMarks: {
      type: "Number",
      defaultValue: 3,
      attribute: "num-tick-marks"
    },
    unit: { type: "String", defaultValue: "g" }
  }
};
var e3 = class extends t7 {
  constructor() {
    super(...arguments), this.value = 0, this.min = -1, this.max = 1, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "g";
  }
};
r5([
  Mt4({ type: Number })
], e3.prototype, "value");
r5([
  Mt4({ type: Number })
], e3.prototype, "min");
r5([
  Mt4({ type: Number })
], e3.prototype, "max");
r5([
  Mt4({ type: Number })
], e3.prototype, "center");
r5([
  Mt4({ type: Number })
], e3.prototype, "precision");
r5([
  Mt4({ type: Boolean, attribute: "hide-text" })
], e3.prototype, "hideText");
r5([
  Mt4({ type: Number, attribute: "num-tick-marks" })
], e3.prototype, "numTickMarks");
r5([
  Mt4({ type: String })
], e3.prototype, "unit");
customElements.get("frc-accelerometer") || customElements.define("frc-accelerometer", e3);

// node_modules/@frc-web-components/fwc/dist/components/3-axis-accelerometer.es.js
var d6 = Object.defineProperty;
var r6 = (s18, i27, o13, h26) => {
  for (var a22 = void 0, p26 = s18.length - 1, c27; p26 >= 0; p26--)
    (c27 = s18[p26]) && (a22 = c27(i27, o13, a22) || a22);
  return a22 && d6(i27, o13, a22), a22;
};
var N8 = {
  dashboard: {
    displayName: "3-Axis Accelerometer"
  },
  properties: {
    x: { type: "Number" },
    y: { type: "Number" },
    z: { type: "Number" },
    max: { type: "Number", defaultValue: 1 },
    min: { type: "Number", defaultValue: -1 },
    center: { type: "Number" },
    precision: { type: "Number", defaultValue: 2 },
    hideText: { type: "Boolean", attribute: "hide-text" },
    numTickMarks: {
      type: "Number",
      defaultValue: 3,
      attribute: "num-tick-marks"
    },
    unit: { type: "String", defaultValue: "g" }
  }
};
var m8 = class m9 extends H4 {
  constructor() {
    super(...arguments), this.x = 0, this.y = 0, this.z = 0, this.min = -1, this.max = 1, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "g";
  }
  renderAccelerometer(i27, o13) {
    return Ot4`
      <div part="accelerometer">
        <label part="label">${i27}</label>
        <frc-accelerometer
          part="${i27}"
          value="${this[i27] || 0}"
          min="${this.min}"
          max="${this.max}"
          center="${this.center}"
          precision="${this.precision}"
          ?hide-text="${this.hideText}"
          num-tick-marks="${o13}"
          unit="${this.unit}"
        ></frc-accelerometer>
      </div>
    `;
  }
  render() {
    return Ot4`
      ${this.renderAccelerometer("x", 0)} ${this.renderAccelerometer("y", 0)}
      ${this.renderAccelerometer("z", this.numTickMarks)}
    `;
  }
};
m8.styles = Ut3`
    :host {
      display: inline-flex;
      flex-direction: column;
      height: auto;
      font-family: sans-serif;
      width: 300px;
    }

    [part='accelerometer'] {
      width: 100%;
      display: flex;
      gap: 8px;
      align-items: center;
      margin-bottom: 10px;
    }

    [part='accelerometer']:last-child {
      margin-bottom: 0;
    }

    [part='accelerometer'] label {
      width: 10px;
      padding-top: 2px;
      font-weight: bold;
      text-transform: uppercase;
      color: var(--frc-3-axis-accelerometer-label-color, #000);
    }

    frc-accelerometer {
      width: 100%;
      flex: 1;
    }

    frc-accelerometer::part(bar) {
      width: 100%;
      margin: 0;
    }
  `;
var e4 = m8;
r6([
  Mt4({ type: Number })
], e4.prototype, "x");
r6([
  Mt4({ type: Number })
], e4.prototype, "y");
r6([
  Mt4({ type: Number })
], e4.prototype, "z");
r6([
  Mt4({ type: Number })
], e4.prototype, "min");
r6([
  Mt4({ type: Number })
], e4.prototype, "max");
r6([
  Mt4({ type: Number })
], e4.prototype, "center");
r6([
  Mt4({ type: Number })
], e4.prototype, "precision");
r6([
  Mt4({ type: Boolean, attribute: "hide-text" })
], e4.prototype, "hideText");
r6([
  Mt4({ type: Number, attribute: "num-tick-marks" })
], e4.prototype, "numTickMarks");
r6([
  Mt4({ type: String })
], e4.prototype, "unit");
customElements.get("frc-3-axis-accelerometer") || customElements.define("frc-3-axis-accelerometer", e4);

// node_modules/@frc-web-components/fwc/dist/components/basic-fms-info.es.js
var h5 = Object.defineProperty;
var r7 = (i27, c27, p26, T21) => {
  for (var e11 = void 0, o13 = i27.length - 1, m34; o13 >= 0; o13--)
    (m34 = i27[o13]) && (e11 = m34(c27, p26, e11) || e11);
  return e11 && h5(c27, p26, e11), e11;
};
var E8 = {
  dashboard: {
    displayName: "Basic FMS Info"
  },
  properties: {
    matchType: { type: "Number", attribute: "match-type" },
    matchNumber: { type: "Number", attribute: "match-number" },
    eventName: { type: "String", attribute: "event-name" },
    fmsControlData: { type: "Number", attribute: "fms-control-data" }
  }
};
var u4 = 1;
var d7 = 2;
var b11 = 4;
var y8 = 8;
var g6 = 16;
var A8 = 32;
var D6 = ["Unknown", "Practice", "Qualification", "Elimination"];
var a7 = class a8 extends H4 {
  constructor() {
    super(...arguments), this.matchType = 0, this.matchNumber = 0, this.eventName = "", this.fmsControlData = 0;
  }
  getRobotState() {
    return this.isEnabled() ? this.isTest() ? "Test" : this.isAuto() ? "Autonomous" : "Teleoperated" : "Disabled";
  }
  isEnabled() {
    return !!(this.fmsControlData & u4);
  }
  isAuto() {
    return !!(this.fmsControlData & d7);
  }
  isTest() {
    return !!(this.fmsControlData & b11);
  }
  isEmergencyStopped() {
    return !!(this.fmsControlData & y8);
  }
  isFmsAttached() {
    return !!(this.fmsControlData & g6);
  }
  isDsAttached() {
    return !!(this.fmsControlData & A8);
  }
  render() {
    return Ot4`
      <p>
        <strong>
          <span>${this.eventName}</span>
          <span>${D6[this.matchType]}</span>
          <span>match ${this.matchNumber}</span>
        </strong>
      </p>

      <p style="margin-bottom: 7px; font-weight: normal">
        <span style="margin-right: 5px;">
          ${this.isFmsAttached() ? Ot4`
                <span class="info">
                  <frc-icon icon="check" color="green"></frc-icon>
                  FMS connected
                </span>
              ` : Ot4`
                <span class="info">
                  <frc-icon icon="close" color="red"></frc-icon>
                  FMS disconnected
                </span>
              `}
        </span>
        <span>
          ${this.isDsAttached() ? Ot4`
                <span class="info">
                  <frc-icon icon="check" color="green"></frc-icon>
                  DriverStation connected
                </span>
              ` : Ot4`
                <span class="info">
                  <frc-icon icon="close" color="red"></frc-icon>
                  DriverStation disconnected
                </span>
              `}
        </span>
      </p>
      <p style="font-weight: normal">Robot state: ${this.getRobotState()}</p>
    `;
  }
};
a7.styles = Ut3`
    p {
      margin: 5px 0;
    }
    p:first-child {
      margin-top: 0;
    }
    p:last-child {
      margin: 0;
    }
    :host {
      text-align: center;
      font-size: 15px;
      display: inline-flex;
      width: auto;
      flex-direction: column;
      justify-content: center;
      font-family: sans-serif;
      color: var(--frc-basic-fms-info-text-color, #000);
    }

    .info {
      display: inline-flex;
      align-items: center;
      gap: 3px;
    }
  `;
var t8 = a7;
r7([
  Mt4({ type: Number, attribute: "match-type" })
], t8.prototype, "matchType");
r7([
  Mt4({ type: Number, attribute: "match-number" })
], t8.prototype, "matchNumber");
r7([
  Mt4({ type: String, attribute: "event-name" })
], t8.prototype, "eventName");
r7([
  Mt4({ type: Number, attribute: "fms-control-data" })
], t8.prototype, "fmsControlData");
customElements.get("frc-basic-fms-info") || customElements.define("frc-basic-fms-info", t8);

// node_modules/@frc-web-components/fwc/dist/components/boolean-box.es.js
var d8 = Object.defineProperty;
var i9 = (n33, r24, l26, p26) => {
  for (var e11 = void 0, s18 = n33.length - 1, u35; s18 >= 0; s18--)
    (u35 = n33[s18]) && (e11 = u35(r24, l26, e11) || e11);
  return e11 && d8(r24, l26, e11), e11;
};
var C9 = {
  dashboard: {
    displayName: "Boolean Box"
  },
  properties: {
    value: { type: "Boolean", primary: true },
    trueColor: {
      type: "String",
      input: { type: "ColorPicker" },
      defaultValue: "#00ff00",
      attribute: "true-color"
    },
    falseColor: {
      type: "String",
      input: { type: "ColorPicker" },
      defaultValue: "#ff0000",
      attribute: "false-color"
    },
    label: { type: "String" }
  }
};
var t9;
var o3 = (t9 = class extends H4 {
  constructor() {
    super(...arguments), this.value = false, this.falseColor = t9.DEFAULT_FALSE_COLOR, this.trueColor = t9.DEFAULT_TRUE_COLOR, this.label = "";
  }
  updated() {
    const r24 = this.falseColor || t9.DEFAULT_FALSE_COLOR, l26 = this.trueColor || t9.DEFAULT_TRUE_COLOR, p26 = this.renderRoot.querySelector(
      "[part=box]"
    ), e11 = this.value ? l26 : r24;
    p26.style.setProperty("--box-color", e11);
  }
  render() {
    return Ot4` <div part="box">${this.label || Ot4`&nbsp;`}</div> `;
  }
}, t9.DEFAULT_FALSE_COLOR = "#ff0000", t9.DEFAULT_TRUE_COLOR = "#00ff00", t9.styles = Ut3`
    :host {
      display: inline-block;
      width: 80px;
      height: 80px;
      padding: 5px;
      box-sizing: border-box;
    }

    [part='box'] {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-content: center;
      flex-wrap: wrap;
      background-color: var(--box-color);
      text-align: center;
    }
  `, t9);
i9([
  Mt4({ type: Boolean })
], o3.prototype, "value");
i9([
  Mt4({ type: String, attribute: "false-color" })
], o3.prototype, "falseColor");
i9([
  Mt4({ type: String, attribute: "true-color" })
], o3.prototype, "trueColor");
i9([
  Mt4({ type: String })
], o3.prototype, "label");
var y9 = o3;
customElements.get("frc-boolean-box") || customElements.define("frc-boolean-box", y9);

// node_modules/@frc-web-components/fwc/dist/components/gauge.es.js
var N9 = { exports: {} };
var ce4 = N9.exports;
var X7;
function fe4() {
  return X7 || (X7 = 1, function(A18) {
    (function(r24, g32) {
      var x36 = g32(r24);
      A18.exports ? A18.exports = x36 : r24.Gauge = x36;
    })(typeof window > "u" ? ce4 : window, function(r24, g32) {
      var x36 = r24.document, o13 = Array.prototype.slice, w31 = r24.requestAnimationFrame || r24.mozRequestAnimationFrame || r24.webkitRequestAnimationFrame || r24.msRequestAnimationFrame || function(d34) {
        return setTimeout(d34, 1e3 / 60);
      };
      function G16(d34) {
        var V16 = d34.duration, M13 = 1, q14 = 60 * V16, h26 = d34.start || 0, k29 = d34.end, E25 = k29 - h26, D18 = d34.step, z21 = d34.easing || function(t19) {
          return (t19 /= 0.5) < 1 ? 0.5 * Math.pow(t19, 3) : 0.5 * (Math.pow(t19 - 2, 3) + 2);
        };
        function S23() {
          var a22 = M13 / q14, t19 = E25 * z21(a22) + h26;
          D18(t19, M13), M13 += 1, a22 < 1 && w31(S23);
        }
        w31(S23);
      }
      var U20 = function() {
        var d34 = "http://www.w3.org/2000/svg", V16 = {
          centerX: 50,
          centerY: 50
        }, M13 = {
          dialRadius: 40,
          dialStartAngle: 135,
          dialEndAngle: 45,
          value: 0,
          max: 100,
          min: 0,
          valueDialClass: "value",
          valueClass: "value-text",
          dialClass: "dial",
          gaugeClass: "gauge",
          showValue: true,
          gaugeColor: null,
          label: function(a22) {
            return Math.round(a22);
          }
        };
        function q14() {
          var a22 = arguments[0], t19 = o13.call(arguments, 1);
          return t19.forEach(function(e11) {
            for (var n33 in e11)
              e11.hasOwnProperty(n33) && (a22[n33] = e11[n33]);
          }), a22;
        }
        function h26(a22, t19, e11) {
          var n33 = x36.createElementNS(d34, a22);
          for (var i27 in t19)
            n33.setAttribute(i27, t19[i27]);
          return e11 && e11.forEach(function(b35) {
            n33.appendChild(b35);
          }), n33;
        }
        function k29(a22, t19) {
          return a22 * t19 / 100;
        }
        function E25(a22, t19, e11) {
          var n33 = Number(a22);
          return n33 > e11 ? e11 : n33 < t19 ? t19 : n33;
        }
        function D18(a22, t19, e11) {
          var n33 = e11 - t19, i27 = a22 - t19;
          return 100 * i27 / n33;
        }
        function z21(a22, t19, e11, n33) {
          var i27 = n33 * Math.PI / 180;
          return {
            x: Math.round((a22 + e11 * Math.cos(i27)) * 1e3) / 1e3,
            y: Math.round((t19 + e11 * Math.sin(i27)) * 1e3) / 1e3
          };
        }
        function S23(a22, t19, e11) {
          var n33 = V16.centerX, i27 = V16.centerY;
          return {
            end: z21(n33, i27, a22, e11),
            start: z21(n33, i27, a22, t19)
          };
        }
        return function(t19, e11) {
          e11 = q14({}, M13, e11);
          var n33 = t19, i27 = e11.max, b35 = e11.min, s18 = E25(e11.value, b35, i27), F19 = e11.dialRadius, J12 = e11.showValue, c27 = e11.dialStartAngle, C21 = e11.dialEndAngle, K16 = e11.valueDialClass, Q12 = e11.valueClass;
          e11.valueLabelClass;
          var Z12 = e11.dialClass, ee7 = e11.gaugeClass, I18 = e11.color, O20, p26, te7 = e11.label, ae7 = e11.viewBox, P20;
          if (c27 < C21) {
            console.log("WARN! startAngle < endAngle, Swapping");
            var ne8 = c27;
            c27 = C21, C21 = ne8;
          }
          function j19(u35, m34, f40, l26) {
            var v31 = S23(u35, m34, f40), L12 = v31.start, W11 = v31.end, ie8 = typeof l26 > "u" ? 1 : l26;
            return [
              "M",
              L12.x,
              L12.y,
              "A",
              u35,
              u35,
              0,
              ie8,
              1,
              W11.x,
              W11.y
            ].join(" ");
          }
          function re8(u35) {
            O20 = h26("text", {
              x: 50,
              y: 50,
              fill: "#999",
              class: Q12,
              "font-size": "100%",
              "font-family": "sans-serif",
              "font-weight": "normal",
              "text-anchor": "middle",
              "alignment-baseline": "middle",
              "dominant-baseline": "central"
            }), p26 = h26("path", {
              class: K16,
              fill: "none",
              stroke: "#666",
              "stroke-width": 2.5,
              d: j19(F19, c27, c27)
              // value of 0
            });
            var m34 = k29(100, 360 - Math.abs(c27 - C21)), f40 = m34 <= 180 ? 0 : 1, l26 = h26("svg", { viewBox: ae7 || "0 0 100 100", class: ee7 }, [
              h26("path", {
                class: Z12,
                fill: "none",
                stroke: "#eee",
                "stroke-width": 2,
                d: j19(F19, c27, C21, f40)
              }),
              h26("g", { class: "text-container" }, [O20]),
              p26
            ]);
            u35.appendChild(l26);
          }
          function B22(u35, m34) {
            var f40 = D18(u35, b35, i27), l26 = k29(f40, 360 - Math.abs(c27 - C21)), v31 = l26 <= 180 ? 0 : 1;
            J12 && (O20.textContent = te7.call(e11, u35)), p26.setAttribute("d", j19(F19, c27, l26 + c27, v31));
          }
          function H16(u35, m34) {
            var f40 = I18.call(e11, u35), l26 = m34 * 1e3, v31 = "stroke " + l26 + "ms ease";
            p26.style.stroke = f40, p26.style["-webkit-transition"] = v31, p26.style["-moz-transition"] = v31, p26.style.transition = v31;
          }
          return P20 = {
            setMaxValue: function(u35) {
              i27 = u35, B22(s18);
            },
            setValue: function(u35) {
              s18 = E25(u35, b35, i27), I18 && H16(s18, 0), B22(s18);
            },
            setValueAnimated: function(u35, m34) {
              var f40 = s18;
              s18 = E25(u35, b35, i27), f40 !== s18 && (I18 && H16(s18, m34), G16({
                start: f40 || 0,
                end: s18,
                duration: m34 || 1,
                step: function(l26, v31) {
                  B22(l26);
                }
              }));
            },
            getValue: function() {
              return s18;
            }
          }, re8(n33), P20.setValue(s18), P20;
        };
      }();
      return U20;
    });
  }(N9)), N9.exports;
}
var T9;
var Y5;
function de4() {
  return Y5 || (Y5 = 1, T9 = fe4()), T9;
}
var me4 = de4();
var ve4 = l5(me4);
var he4 = Object.defineProperty;
var R8 = (A18, r24, g32, x36) => {
  for (var o13 = void 0, w31 = A18.length - 1, G16; w31 >= 0; w31--)
    (G16 = A18[w31]) && (o13 = G16(r24, g32, o13) || o13);
  return o13 && he4(r24, g32, o13), o13;
};
var we4 = {
  dashboard: {
    displayName: "Gauge"
  },
  properties: {
    min: { type: "Number" },
    max: { type: "Number", defaultValue: 100 },
    value: { type: "Number", primary: true }
  }
};
var $5 = class $6 extends H4 {
  constructor() {
    super(...arguments), this.min = 0, this.max = 100, this.value = 0;
  }
  setSize() {
    const r24 = this.getBoundingClientRect(), g32 = r24.width, x36 = r24.height, o13 = Math.min(g32, x36);
    this.gaugeElement.style.width = `${o13}px`;
  }
  gaugeInit() {
    this.gaugeElement.innerHTML = "", this.gauge = ve4(this.gaugeElement, {
      min: Math.min(this.min, this.max),
      max: Math.max(this.min, this.max)
    }), this.setSize();
  }
  firstUpdated() {
    this.gaugeInit(), new ResizeObserver(() => this.setSize()).observe(this);
  }
  updated(r24) {
    var g32;
    (r24.has("min") || r24.has("max")) && this.gaugeInit(), (g32 = this.gauge) == null || g32.setValue(this.value);
  }
  render() {
    return Ot4`
      <div class="gauge-container-container">
        <div id="gauge" class="gauge-container"></div>
      </div>
    `;
  }
};
$5.styles = Ut3`
    :host {
      display: inline-block;
      width: 200px;
      height: 200px;
    }

    .gauge-container-container {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .gauge-container {
      display: block;
    }

    .gauge-container > .gauge > .dial {
      stroke: #ddd;
      stroke-width: 3;
      fill: rgba(0, 0, 0, 0);
      stroke: var(--frc-gauge-color, rgb(221, 221, 221));
    }
    .gauge-container > .gauge > .value {
      stroke: var(--frc-gauge-fill-color, rgb(47, 180, 200));
      stroke-width: 3;
      fill: rgba(0, 0, 0, 0);
    }
    .gauge-container > .gauge .value-text {
      fill: var(--frc-gauge-text-color, rgb(100, 100, 100));
      font-family: sans-serif;
      font-size: 1em;
    }
  `;
var y10 = $5;
R8([
  Mt4({ type: Number })
], y10.prototype, "min");
R8([
  Mt4({ type: Number })
], y10.prototype, "max");
R8([
  Mt4({ type: Number })
], y10.prototype, "value");
R8([
  h4("#gauge")
], y10.prototype, "gaugeElement");
customElements.get("frc-gauge") || customElements.define("frc-gauge", y10);

// node_modules/@frc-web-components/fwc/dist/components/gyro.es.js
function v9(i27, t19, e11) {
  i27 = +i27, t19 = +t19, e11 = (s18 = arguments.length) < 2 ? (t19 = i27, i27 = 0, 1) : s18 < 3 ? 1 : +e11;
  for (var n33 = -1, s18 = Math.max(0, Math.ceil((t19 - i27) / e11)) | 0, l26 = new Array(s18); ++n33 < s18; )
    l26[n33] = i27 + n33 * e11;
  return l26;
}
var k7 = Object.defineProperty;
var o4 = (i27, t19, e11, n33) => {
  for (var s18 = void 0, l26 = i27.length - 1, a22; l26 >= 0; l26--)
    (a22 = i27[l26]) && (s18 = a22(t19, e11, s18) || s18);
  return s18 && k7(t19, e11, s18), s18;
};
var z8 = {
  dashboard: {
    displayName: "Gyro"
  },
  properties: {
    value: { type: "Number", primary: true },
    hideLabel: { type: "Boolean", attribute: "hide-label" },
    precision: { type: "Number", defaultValue: 2 },
    counterClockwise: { type: "Boolean", attribute: "counter-clockwise" },
    fromRadians: { type: "Boolean", attribute: "from-radians" }
  }
};
function x9(i27) {
  return i27 * Math.PI / 180;
}
function f9(i27) {
  return i27 * 180 / Math.PI;
}
function w7(i27, t19, e11) {
  return Math.min(e11, Math.max(i27, t19));
}
function c4(i27, t19 = false) {
  const e11 = x9(-(i27 - 90));
  return [t19 ? -Math.cos(e11) : Math.cos(e11), Math.sin(e11)];
}
var g7 = class g8 extends H4 {
  constructor() {
    super(...arguments), this.value = 0, this.hideLabel = false, this.precision = 2, this.counterClockwise = false, this.fromRadians = false;
  }
  setLabels() {
    const t19 = this.getGyroRadius();
    Ei2(this._labels).selectAll("text").data([0, 45, 90, 135, 180, -135, -90, -45]).join(
      (e11) => e11.append("text").attr("text-anchor", "middle").attr("alignment-baseline", "middle").attr("font-size", 15).attr("fill", "var(--frc-gyro-color, #000)").text((n33) => `${n33}°`)
    ).attr(
      "x",
      (e11) => c4(e11, this.counterClockwise)[0] * (t19 + 30)
    ).attr(
      "y",
      (e11) => -c4(e11, this.counterClockwise)[1] * (t19 + 30)
    );
  }
  setDialAngle() {
    const t19 = this.getGyroRadius(), e11 = this.fromRadians ? f9(this.value) : this.value;
    Ei2(this._dial).attr(
      "x2",
      c4(e11, this.counterClockwise)[0] * (t19 - 7)
    ).attr(
      "y2",
      -c4(e11, this.counterClockwise)[1] * (t19 - 7)
    );
  }
  addTicks(t19, e11, n33, s18) {
    const l26 = this.getGyroRadius();
    Ei2(t19).selectAll("line").data(v9(0, 360, n33)).join(
      (a22) => a22.append("line").attr("stroke", "var(--frc-gyro-color, #000)").attr("stroke-width", s18)
    ).attr("x1", (a22) => c4(a22)[0] * l26).attr("y1", (a22) => -c4(a22)[1] * l26).attr(
      "x2",
      (a22) => c4(a22)[0] * (l26 + e11)
    ).attr(
      "y2",
      (a22) => -c4(a22)[1] * (l26 + e11)
    );
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.resized();
    }).observe(this), this.resized();
  }
  resized() {
    const t19 = this.getSize();
    Ei2(this._svg).attr("width", t19).attr("height", t19), Ei2(this._gyro).attr(
      "transform",
      `translate(${t19 / 2},${t19 / 2})`
    );
    const e11 = this.getGyroRadius();
    Ei2(this._gyroEdge).attr("r", e11), this.addTicks(this._minorTicks, 5, 5, 1), this.addTicks(this._majorTicks, 10, 45, 2), this.setLabels(), this.setDialAngle();
  }
  getSize() {
    const { width: t19 } = this.getBoundingClientRect();
    return t19;
  }
  getGyroRadius() {
    return this.getSize() / 2 - 53;
  }
  updated(t19) {
    (t19.has("value") || t19.has("fromRadians") || t19.has("counterClockwise")) && this.setDialAngle(), t19.has("counterClockwise") && this.setLabels();
  }
  render() {
    const e11 = `${(this.fromRadians ? f9(this.value) : this.value).toFixed(w7(this.precision, 0, 100))}`;
    return Ot4`
      <div>
        ${Tt3`
          <svg>
            <g class="gyro">
              <circle class="gyro-edge" stroke-width="2" stroke="var(--frc-gyro-color, #000)" style="fill: none"></circle>
              <g class="minor-ticks"></g>
              <g class="major-ticks"></g>
              <g class="labels"></g>
              <circle class="dial-circle" r="9"></circle>
              <line class="dial" x1="0" x2="0"></line>
            </g>
          </svg>
        `} ${this.hideLabel ? null : Ot4`<label>${e11}&deg</label> `}
      </div>
    `;
  }
};
g7.styles = Ut3`
    :host {
      font-family: sans-serif;
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      width: 300px;
      height: auto;
    }

    svg {
      width: 100%;
    }

    label {
      color: var(--frc-gyro-color, #000);
      text-align: center;
      display: block;
      font-size: 16px;
    }

    .dial-circle {
      fill: var(--frc-gyro-dial-color, blue);
    }

    .dial {
      stroke: var(--frc-gyro-dial-color, blue);
      stroke-width: 3;
    }
  `;
var r8 = g7;
o4([
  Mt4({ type: Number })
], r8.prototype, "value");
o4([
  Mt4({ type: Boolean, attribute: "hide-label" })
], r8.prototype, "hideLabel");
o4([
  Mt4({ type: Number })
], r8.prototype, "precision");
o4([
  Mt4({ type: Boolean, attribute: "counter-clockwise" })
], r8.prototype, "counterClockwise");
o4([
  Mt4({ type: Boolean, attribute: "from-radians" })
], r8.prototype, "fromRadians");
o4([
  h4("svg")
], r8.prototype, "_svg");
o4([
  h4(".dial")
], r8.prototype, "_dial");
o4([
  h4(".gyro")
], r8.prototype, "_gyro");
o4([
  h4(".gyro-edge")
], r8.prototype, "_gyroEdge");
o4([
  h4(".minor-ticks")
], r8.prototype, "_minorTicks");
o4([
  h4(".major-ticks")
], r8.prototype, "_majorTicks");
o4([
  h4(".labels")
], r8.prototype, "_labels");
customElements.get("frc-gyro") || customElements.define("frc-gyro", r8);

// node_modules/@frc-web-components/fwc/dist/components/sendable-chooser.es.js
var $7 = (i27) => {
  throw TypeError(i27);
};
var E9 = (i27, r24, e11) => r24.has(i27) || $7("Cannot " + e11);
var v10 = (i27, r24, e11) => r24.has(i27) ? $7("Cannot add the same private member more than once") : r24 instanceof WeakSet ? r24.add(i27) : r24.set(i27, e11);
var f10 = (i27, r24, e11) => (E9(i27, r24, "access private method"), e11);
var D7 = Object.defineProperty;
var h6 = (i27, r24, e11, u35) => {
  for (var t19 = void 0, s18 = i27.length - 1, l26; s18 >= 0; s18--)
    (l26 = i27[s18]) && (t19 = l26(r24, e11, t19) || t19);
  return t19 && D7(r24, e11, t19), t19;
};
var z9 = {
  dashboard: {
    displayName: "Sendable Chooser",
    topLevel: false
  },
  properties: {
    options: { type: "Array" },
    selected: { type: "String", input: { type: "StringDropdown" } },
    default: { type: "String" },
    active: { type: "String" },
    label: { type: "String", defaultValue: "Auto Choices" }
  }
};
var y11;
var k8;
var x10 = class x11 extends H4 {
  constructor() {
    super(...arguments);
    v10(this, y11);
    this.options = [], this.selected = "", this.default = "", this.active = "", this.label = "Auto Choices";
  }
  onChange() {
    this.selected = this.selectElement.value, f10(this, y11, k8).call(this);
  }
  render() {
    return Ot4`
      <div class="container">
        ${this.label ? Ot4` <p>${this.label}</p> ` : ""}
        <div class="input-container">
          <label>
            <select @change=${this.onChange} .value=${this.selected}>
              ${this.options.map(
      (e11) => Ot4`
                  <option value=${e11} ?selected=${this.selected === e11}>
                    ${e11}
                  </option>
                `
    )}
            </select>
          </label>
          ${this.options.length > 0 ? Ot4`
                ${this.selected === this.active ? Ot4`<frc-icon icon="check" color="green"></frc-icon>` : Ot4`<frc-icon icon="close" color="red"></frc-icon>`}
              ` : ""}
        </div>
      </div>
    `;
  }
};
y11 = /* @__PURE__ */ new WeakSet(), k8 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: { selected: this.selected },
      bubbles: true,
      composed: true
    })
  );
}, x10.styles = Ut3`
    :host {
      display: inline-block;
      min-width: 220px;
      font-family: sans-serif;
    }

    .input-container {
      display: flex;
      align-items: flex-end;
      gap: 7px;
      width: 100%;
    }

    frc-icon {
      width: 20px;
      height: 20px;
      margin-bottom: 12px;
    }

    label {
      position: relative;
      display: inline-block;
      width: 100%;
    }

    label:after {
      content: ' ';
      position: absolute;
      right: 15px;
      top: 46%;
      margin-top: -3px;
      z-index: 2;
      pointer-events: none;
      width: 0;
      height: 0;
      border-style: solid;
      border-width: 6.9px 4px 0 4px;
      border-color: #aaa transparent transparent transparent;
      pointer-events: none;
    }

    select {
      width: 100%;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      outline: 0 none;

      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      padding: 0 30px 0 10px;

      border: 1px solid #e0e0e0;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      background: #fff;
      margin: 0 5px 5px 0;
    }

    p {
      color: var(--frc-sendable-chooser-label-color, black);
      margin: 0;
      font-size: 13px;
      padding-left: 3px;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
  `;
var p3 = x10;
h6([
  Mt4({ type: Array })
], p3.prototype, "options");
h6([
  Mt4({ type: String, reflect: true })
], p3.prototype, "selected");
h6([
  Mt4({ type: String })
], p3.prototype, "default");
h6([
  Mt4({ type: String })
], p3.prototype, "active");
h6([
  Mt4({ type: String, reflect: true })
], p3.prototype, "label");
h6([
  h4("select", true)
], p3.prototype, "selectElement");
customElements.get("frc-sendable-chooser") || customElements.define("frc-sendable-chooser", p3);
var K9 = Object.defineProperty;
var a9 = (i27, r24, e11, u35) => {
  for (var t19 = void 0, s18 = i27.length - 1, l26; s18 >= 0; s18--)
    (l26 = i27[s18]) && (t19 = l26(r24, e11, t19) || t19);
  return t19 && K9(r24, e11, t19), t19;
};
var L6 = {
  defaultSourceKey: "/SmartDashboard/Auto choices",
  defaultSourceProvider: "NetworkTables",
  dashboard: {
    displayName: "Sendable Chooser"
  },
  properties: {
    options: { type: "Array" },
    selected: { type: "String", input: { type: "StringDropdown" } },
    default: { type: "String" },
    active: { type: "String" },
    label: { type: "String", defaultValue: "Auto Choices" },
    provider: { type: "SourceProvider", property: "provider" },
    store: { type: "Store", property: "store" },
    sourceProvider: {
      type: "String",
      attribute: "source-provider",
      input: { type: "None" }
    },
    sourceKey: {
      type: "String",
      attribute: "source-key",
      input: { type: "None" }
    }
  }
};
var d9;
var m10;
var P8;
var S8 = class S9 extends H4 {
  constructor() {
    super(...arguments);
    v10(this, d9);
    this.options = [], this.selected = "", this.default = "", this.active = "", this.label = "Auto Choices", this.sourceProvider = "", this.sourceKey = "";
  }
  updated(e11) {
    e11.has("default") && (this.options.includes(this.selected) || f10(this, d9, m10).call(this));
  }
  render() {
    return Ot4`
      <frc-sendable-chooser
        @change=${f10(this, d9, P8)}
        .options=${this.options}
        .selected=${this.selected}
        .default=${this.default}
        .active=${this.active}
        .label=${this.label}
      ></frc-sendable-chooser>
    `;
  }
};
d9 = /* @__PURE__ */ new WeakSet(), m10 = function() {
  const {
    provider: e11,
    store: u35,
    sourceProvider: t19,
    sourceKey: s18,
    default: l26
  } = this;
  if (!e11 || !u35 || !t19 || !s18)
    return;
  const g32 = u35.getSource(t19, s18), b35 = u35.getSource(
    t19,
    `${s18}/selected`
  );
  if (g32 != null && g32.hasChildren() && !(b35 != null && b35.hasValue())) {
    const A18 = this.options.includes(this.selected) ? this.selected : l26;
    e11.userUpdate(`${s18}/selected`, A18);
  }
}, P8 = function(e11) {
  this.selected = e11.detail.selected, f10(this, d9, m10).call(this);
}, S8.styles = Ut3`
    :host {
      display: inline-block;
      min-width: 220px;
      font-family: sans-serif;
    }

    frc-sendable-chooser {
      width: 100%;
      height: 100%;
    }
  `;
var n12 = S8;
a9([
  Mt4({ type: Array })
], n12.prototype, "options");
a9([
  Mt4({ type: String, reflect: true })
], n12.prototype, "selected");
a9([
  Mt4({ type: String })
], n12.prototype, "default");
a9([
  Mt4({ type: String })
], n12.prototype, "active");
a9([
  Mt4({ type: String, reflect: true })
], n12.prototype, "label");
a9([
  Mt4({ type: Object, attribute: false })
], n12.prototype, "provider");
a9([
  Mt4({ type: Object, attribute: false })
], n12.prototype, "store");
a9([
  Mt4({ type: String, attribute: "source-provider" })
], n12.prototype, "sourceProvider");
a9([
  Mt4({ type: String, attribute: "source-key" })
], n12.prototype, "sourceKey");
customElements.get("frc-sendable-chooser-wrapper") || customElements.define("frc-sendable-chooser-wrapper", n12);

// node_modules/@frc-web-components/fwc/dist/directive-helpers-CDfQTKPA.js
var r9 = (o13) => o13.strings === void 0;
var t10 = {};
var f11 = (o13, s18 = t10) => o13._$AH = s18;

// node_modules/@frc-web-components/fwc/dist/directive-B76A7YXI.js
var s5 = { ATTRIBUTE: 1, CHILD: 2, PROPERTY: 3, BOOLEAN_ATTRIBUTE: 4, EVENT: 5, ELEMENT: 6 };
var T10 = (r24) => (...t19) => ({ _$litDirective$: r24, values: t19 });
var _6 = class {
  constructor(t19) {
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  _$AT(t19, e11, i27) {
    this._$Ct = t19, this._$AM = e11, this._$Ci = i27;
  }
  _$AS(t19, e11) {
    return this.update(t19, e11);
  }
  update(t19, e11) {
    return this.render(...e11);
  }
};

// node_modules/@frc-web-components/fwc/dist/style-map-CXHve4fi.js
var o5 = "important";
var f12 = " !" + o5;
var p4 = T10(class extends _6 {
  constructor(n33) {
    var e11;
    if (super(n33), n33.type !== s5.ATTRIBUTE || n33.name !== "style" || ((e11 = n33.strings) == null ? void 0 : e11.length) > 2)
      throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.");
  }
  render(n33) {
    return Object.keys(n33).reduce((e11, s18) => {
      const t19 = n33[s18];
      return t19 == null ? e11 : e11 + `${s18 = s18.includes("-") ? s18 : s18.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g, "-$&").toLowerCase()}:${t19};`;
    }, "");
  }
  update(n33, [e11]) {
    const { style: s18 } = n33.element;
    if (this.ft === void 0)
      return this.ft = new Set(Object.keys(e11)), this.render(e11);
    for (const t19 of this.ft)
      e11[t19] == null && (this.ft.delete(t19), t19.includes("-") ? s18.removeProperty(t19) : s18[t19] = null);
    for (const t19 in e11) {
      const r24 = e11[t19];
      if (r24 != null) {
        this.ft.add(t19);
        const i27 = typeof r24 == "string" && r24.endsWith(f12);
        t19.includes("-") || i27 ? s18.setProperty(t19, i27 ? r24.slice(0, -11) : r24, i27 ? o5 : "") : s18[t19] = r24;
      }
    }
    return v5;
  }
});

// node_modules/@frc-web-components/fwc/dist/components/line-chart.es.js
function $t5(t19, e11) {
  return t19 == null || e11 == null ? NaN : t19 < e11 ? -1 : t19 > e11 ? 1 : t19 >= e11 ? 0 : NaN;
}
function pn4(t19, e11) {
  return t19 == null || e11 == null ? NaN : e11 < t19 ? -1 : e11 > t19 ? 1 : e11 >= t19 ? 0 : NaN;
}
function te4(t19) {
  let e11, n33, r24;
  t19.length !== 2 ? (e11 = $t5, n33 = (u35, l26) => $t5(t19(u35), l26), r24 = (u35, l26) => t19(u35) - l26) : (e11 = t19 === $t5 || t19 === pn4 ? t19 : yn4, n33 = t19, r24 = t19);
  function i27(u35, l26, s18 = 0, g32 = u35.length) {
    if (s18 < g32) {
      if (e11(l26, l26) !== 0)
        return g32;
      do {
        const h26 = s18 + g32 >>> 1;
        n33(u35[h26], l26) < 0 ? s18 = h26 + 1 : g32 = h26;
      } while (s18 < g32);
    }
    return s18;
  }
  function a22(u35, l26, s18 = 0, g32 = u35.length) {
    if (s18 < g32) {
      if (e11(l26, l26) !== 0)
        return g32;
      do {
        const h26 = s18 + g32 >>> 1;
        n33(u35[h26], l26) <= 0 ? s18 = h26 + 1 : g32 = h26;
      } while (s18 < g32);
    }
    return s18;
  }
  function o13(u35, l26, s18 = 0, g32 = u35.length) {
    const h26 = i27(u35, l26, s18, g32 - 1);
    return h26 > s18 && r24(u35[h26 - 1], l26) > -r24(u35[h26], l26) ? h26 - 1 : h26;
  }
  return { left: i27, center: o13, right: a22 };
}
function yn4() {
  return 0;
}
function Mn4(t19) {
  return t19 === null ? NaN : +t19;
}
var xn4 = te4($t5);
var vn4 = xn4.right;
te4(Mn4).center;
var me5 = class extends Map {
  constructor(e11, n33 = Tn3) {
    if (super(), Object.defineProperties(this, { _intern: { value: /* @__PURE__ */ new Map() }, _key: { value: n33 } }), e11 != null)
      for (const [r24, i27] of e11)
        this.set(r24, i27);
  }
  get(e11) {
    return super.get(de5(this, e11));
  }
  has(e11) {
    return super.has(de5(this, e11));
  }
  set(e11, n33) {
    return super.set(wn4(this, e11), n33);
  }
  delete(e11) {
    return super.delete(Cn4(this, e11));
  }
};
function de5({ _intern: t19, _key: e11 }, n33) {
  const r24 = e11(n33);
  return t19.has(r24) ? t19.get(r24) : n33;
}
function wn4({ _intern: t19, _key: e11 }, n33) {
  const r24 = e11(n33);
  return t19.has(r24) ? t19.get(r24) : (t19.set(r24, n33), n33);
}
function Cn4({ _intern: t19, _key: e11 }, n33) {
  const r24 = e11(n33);
  return t19.has(r24) && (n33 = t19.get(r24), t19.delete(r24)), n33;
}
function Tn3(t19) {
  return t19 !== null && typeof t19 == "object" ? t19.valueOf() : t19;
}
var kn4 = Math.sqrt(50);
var bn4 = Math.sqrt(10);
var Sn4 = Math.sqrt(2);
function Nt5(t19, e11, n33) {
  const r24 = (e11 - t19) / Math.max(0, n33), i27 = Math.floor(Math.log10(r24)), a22 = r24 / Math.pow(10, i27), o13 = a22 >= kn4 ? 10 : a22 >= bn4 ? 5 : a22 >= Sn4 ? 2 : 1;
  let u35, l26, s18;
  return i27 < 0 ? (s18 = Math.pow(10, -i27) / o13, u35 = Math.round(t19 * s18), l26 = Math.round(e11 * s18), u35 / s18 < t19 && ++u35, l26 / s18 > e11 && --l26, s18 = -s18) : (s18 = Math.pow(10, i27) * o13, u35 = Math.round(t19 / s18), l26 = Math.round(e11 / s18), u35 * s18 < t19 && ++u35, l26 * s18 > e11 && --l26), l26 < u35 && 0.5 <= n33 && n33 < 2 ? Nt5(t19, e11, n33 * 2) : [u35, l26, s18];
}
function Dn3(t19, e11, n33) {
  if (e11 = +e11, t19 = +t19, n33 = +n33, !(n33 > 0))
    return [];
  if (t19 === e11)
    return [t19];
  const r24 = e11 < t19, [i27, a22, o13] = r24 ? Nt5(e11, t19, n33) : Nt5(t19, e11, n33);
  if (!(a22 >= i27))
    return [];
  const u35 = a22 - i27 + 1, l26 = new Array(u35);
  if (r24)
    if (o13 < 0)
      for (let s18 = 0; s18 < u35; ++s18)
        l26[s18] = (a22 - s18) / -o13;
    else
      for (let s18 = 0; s18 < u35; ++s18)
        l26[s18] = (a22 - s18) * o13;
  else if (o13 < 0)
    for (let s18 = 0; s18 < u35; ++s18)
      l26[s18] = (i27 + s18) / -o13;
  else
    for (let s18 = 0; s18 < u35; ++s18)
      l26[s18] = (i27 + s18) * o13;
  return l26;
}
function Xt4(t19, e11, n33) {
  return e11 = +e11, t19 = +t19, n33 = +n33, Nt5(t19, e11, n33)[2];
}
function Qt3(t19, e11, n33) {
  e11 = +e11, t19 = +t19, n33 = +n33;
  const r24 = e11 < t19, i27 = r24 ? Xt4(e11, t19, n33) : Xt4(t19, e11, n33);
  return (r24 ? -1 : 1) * (i27 < 0 ? 1 / -i27 : i27);
}
function Un3(t19) {
  return t19;
}
var Et6 = 1;
var At6 = 2;
var Jt4 = 3;
var Mt6 = 4;
var pe4 = 1e-6;
function $n4(t19) {
  return "translate(" + t19 + ",0)";
}
function An4(t19) {
  return "translate(0," + t19 + ")";
}
function Nn3(t19) {
  return (e11) => +t19(e11);
}
function Fn4(t19, e11) {
  return e11 = Math.max(0, t19.bandwidth() - e11 * 2) / 2, t19.round() && (e11 = Math.round(e11)), (n33) => +t19(n33) + e11;
}
function Yn3() {
  return !this.__axis;
}
function ee4(t19, e11) {
  var n33 = [], r24 = null, i27 = null, a22 = 6, o13 = 6, u35 = 3, l26 = typeof window < "u" && window.devicePixelRatio > 1 ? 0 : 0.5, s18 = t19 === Et6 || t19 === Mt6 ? -1 : 1, g32 = t19 === Mt6 || t19 === At6 ? "x" : "y", h26 = t19 === Et6 || t19 === Jt4 ? $n4 : An4;
  function f40(d34) {
    var b35 = r24 ?? (e11.ticks ? e11.ticks.apply(e11, n33) : e11.domain()), L12 = i27 ?? (e11.tickFormat ? e11.tickFormat.apply(e11, n33) : Un3), F19 = Math.max(a22, 0) + u35, _21 = e11.range(), P20 = +_21[0] + l26, T21 = +_21[_21.length - 1] + l26, N22 = (e11.bandwidth ? Fn4 : Nn3)(e11.copy(), l26), k29 = d34.selection ? d34.selection() : d34, p26 = k29.selectAll(".domain").data([null]), w31 = k29.selectAll(".tick").data(b35, e11).order(), O20 = w31.exit(), q14 = w31.enter().append("g").attr("class", "tick"), E25 = w31.select("line"), y34 = w31.select("text");
    p26 = p26.merge(p26.enter().insert("path", ".tick").attr("class", "domain").attr("stroke", "currentColor")), w31 = w31.merge(q14), E25 = E25.merge(q14.append("line").attr("stroke", "currentColor").attr(g32 + "2", s18 * a22)), y34 = y34.merge(q14.append("text").attr("fill", "currentColor").attr(g32, s18 * F19).attr("dy", t19 === Et6 ? "0em" : t19 === Jt4 ? "0.71em" : "0.32em")), d34 !== k29 && (p26 = p26.transition(d34), w31 = w31.transition(d34), E25 = E25.transition(d34), y34 = y34.transition(d34), O20 = O20.transition(d34).attr("opacity", pe4).attr("transform", function($25) {
      return isFinite($25 = N22($25)) ? h26($25 + l26) : this.getAttribute("transform");
    }), q14.attr("opacity", pe4).attr("transform", function($25) {
      var S23 = this.parentNode.__axis;
      return h26((S23 && isFinite(S23 = S23($25)) ? S23 : N22($25)) + l26);
    })), O20.remove(), p26.attr("d", t19 === Mt6 || t19 === At6 ? o13 ? "M" + s18 * o13 + "," + P20 + "H" + l26 + "V" + T21 + "H" + s18 * o13 : "M" + l26 + "," + P20 + "V" + T21 : o13 ? "M" + P20 + "," + s18 * o13 + "V" + l26 + "H" + T21 + "V" + s18 * o13 : "M" + P20 + "," + l26 + "H" + T21), w31.attr("opacity", 1).attr("transform", function($25) {
      return h26(N22($25) + l26);
    }), E25.attr(g32 + "2", s18 * a22), y34.attr(g32, s18 * F19).text(L12), k29.filter(Yn3).attr("fill", "none").attr("font-size", 10).attr("font-family", "sans-serif").attr("text-anchor", t19 === At6 ? "start" : t19 === Mt6 ? "end" : "middle"), k29.each(function() {
      this.__axis = N22;
    });
  }
  return f40.scale = function(d34) {
    return arguments.length ? (e11 = d34, f40) : e11;
  }, f40.ticks = function() {
    return n33 = Array.from(arguments), f40;
  }, f40.tickArguments = function(d34) {
    return arguments.length ? (n33 = d34 == null ? [] : Array.from(d34), f40) : n33.slice();
  }, f40.tickValues = function(d34) {
    return arguments.length ? (r24 = d34 == null ? null : Array.from(d34), f40) : r24 && r24.slice();
  }, f40.tickFormat = function(d34) {
    return arguments.length ? (i27 = d34, f40) : i27;
  }, f40.tickSize = function(d34) {
    return arguments.length ? (a22 = o13 = +d34, f40) : a22;
  }, f40.tickSizeInner = function(d34) {
    return arguments.length ? (a22 = +d34, f40) : a22;
  }, f40.tickSizeOuter = function(d34) {
    return arguments.length ? (o13 = +d34, f40) : o13;
  }, f40.tickPadding = function(d34) {
    return arguments.length ? (u35 = +d34, f40) : u35;
  }, f40.offset = function(d34) {
    return arguments.length ? (l26 = +d34, f40) : l26;
  }, f40;
}
function Ln4(t19) {
  return ee4(At6, t19);
}
function He4(t19) {
  return ee4(Jt4, t19);
}
function ye4(t19) {
  return ee4(Mt6, t19);
}
function _n3(t19, e11) {
  e11 || (e11 = []);
  var n33 = t19 ? Math.min(e11.length, t19.length) : 0, r24 = e11.slice(), i27;
  return function(a22) {
    for (i27 = 0; i27 < n33; ++i27)
      r24[i27] = t19[i27] * (1 - a22) + e11[i27] * a22;
    return r24;
  };
}
function Hn4(t19) {
  return ArrayBuffer.isView(t19) && !(t19 instanceof DataView);
}
function Wn4(t19, e11) {
  var n33 = e11 ? e11.length : 0, r24 = t19 ? Math.min(n33, t19.length) : 0, i27 = new Array(r24), a22 = new Array(n33), o13;
  for (o13 = 0; o13 < r24; ++o13)
    i27[o13] = ne4(t19[o13], e11[o13]);
  for (; o13 < n33; ++o13)
    a22[o13] = e11[o13];
  return function(u35) {
    for (o13 = 0; o13 < r24; ++o13)
      a22[o13] = i27[o13](u35);
    return a22;
  };
}
function Pn4(t19, e11) {
  var n33 = /* @__PURE__ */ new Date();
  return t19 = +t19, e11 = +e11, function(r24) {
    return n33.setTime(t19 * (1 - r24) + e11 * r24), n33;
  };
}
function zn4(t19, e11) {
  var n33 = {}, r24 = {}, i27;
  (t19 === null || typeof t19 != "object") && (t19 = {}), (e11 === null || typeof e11 != "object") && (e11 = {});
  for (i27 in e11)
    i27 in t19 ? n33[i27] = ne4(t19[i27], e11[i27]) : r24[i27] = e11[i27];
  return function(a22) {
    for (i27 in n33)
      r24[i27] = n33[i27](a22);
    return r24;
  };
}
function ne4(t19, e11) {
  var n33 = typeof e11, r24;
  return e11 == null || n33 === "boolean" ? jt3(e11) : (n33 === "number" ? A5 : n33 === "string" ? (r24 = P5(e11)) ? (e11 = r24, Mt5) : lr2 : e11 instanceof P5 ? Mt5 : e11 instanceof Date ? Pn4 : Hn4(e11) ? _n3 : Array.isArray(e11) ? Wn4 : typeof e11.valueOf != "function" && typeof e11.toString != "function" || isNaN(e11) ? zn4 : A5)(t19, e11);
}
function On4(t19, e11) {
  return t19 = +t19, e11 = +e11, function(n33) {
    return Math.round(t19 * (1 - n33) + e11 * n33);
  };
}
function In4(t19) {
  return Math.abs(t19 = Math.round(t19)) >= 1e21 ? t19.toLocaleString("en").replace(/,/g, "") : t19.toString(10);
}
function Ft4(t19, e11) {
  if ((n33 = (t19 = e11 ? t19.toExponential(e11 - 1) : t19.toExponential()).indexOf("e")) < 0)
    return null;
  var n33, r24 = t19.slice(0, n33);
  return [
    r24.length > 1 ? r24[0] + r24.slice(2) : r24,
    +t19.slice(n33 + 1)
  ];
}
function ft8(t19) {
  return t19 = Ft4(Math.abs(t19)), t19 ? t19[1] : NaN;
}
function En4(t19, e11) {
  return function(n33, r24) {
    for (var i27 = n33.length, a22 = [], o13 = 0, u35 = t19[0], l26 = 0; i27 > 0 && u35 > 0 && (l26 + u35 + 1 > r24 && (u35 = Math.max(1, r24 - l26)), a22.push(n33.substring(i27 -= u35, i27 + u35)), !((l26 += u35 + 1) > r24)); )
      u35 = t19[o13 = (o13 + 1) % t19.length];
    return a22.reverse().join(e11);
  };
}
function Vn4(t19) {
  return function(e11) {
    return e11.replace(/[0-9]/g, function(n33) {
      return t19[+n33];
    });
  };
}
var Bn4 = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
function Yt4(t19) {
  if (!(e11 = Bn4.exec(t19)))
    throw new Error("invalid format: " + t19);
  var e11;
  return new re4({
    fill: e11[1],
    align: e11[2],
    sign: e11[3],
    symbol: e11[4],
    zero: e11[5],
    width: e11[6],
    comma: e11[7],
    precision: e11[8] && e11[8].slice(1),
    trim: e11[9],
    type: e11[10]
  });
}
Yt4.prototype = re4.prototype;
function re4(t19) {
  this.fill = t19.fill === void 0 ? " " : t19.fill + "", this.align = t19.align === void 0 ? ">" : t19.align + "", this.sign = t19.sign === void 0 ? "-" : t19.sign + "", this.symbol = t19.symbol === void 0 ? "" : t19.symbol + "", this.zero = !!t19.zero, this.width = t19.width === void 0 ? void 0 : +t19.width, this.comma = !!t19.comma, this.precision = t19.precision === void 0 ? void 0 : +t19.precision, this.trim = !!t19.trim, this.type = t19.type === void 0 ? "" : t19.type + "";
}
re4.prototype.toString = function() {
  return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (this.width === void 0 ? "" : Math.max(1, this.width | 0)) + (this.comma ? "," : "") + (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) + (this.trim ? "~" : "") + this.type;
};
function Rn4(t19) {
  t:
    for (var e11 = t19.length, n33 = 1, r24 = -1, i27; n33 < e11; ++n33)
      switch (t19[n33]) {
        case ".":
          r24 = i27 = n33;
          break;
        case "0":
          r24 === 0 && (r24 = n33), i27 = n33;
          break;
        default:
          if (!+t19[n33])
            break t;
          r24 > 0 && (r24 = 0);
          break;
      }
  return r24 > 0 ? t19.slice(0, r24) + t19.slice(i27 + 1) : t19;
}
var We5;
function jn4(t19, e11) {
  var n33 = Ft4(t19, e11);
  if (!n33)
    return t19 + "";
  var r24 = n33[0], i27 = n33[1], a22 = i27 - (We5 = Math.max(-8, Math.min(8, Math.floor(i27 / 3))) * 3) + 1, o13 = r24.length;
  return a22 === o13 ? r24 : a22 > o13 ? r24 + new Array(a22 - o13 + 1).join("0") : a22 > 0 ? r24.slice(0, a22) + "." + r24.slice(a22) : "0." + new Array(1 - a22).join("0") + Ft4(t19, Math.max(0, e11 + a22 - 1))[0];
}
function Me4(t19, e11) {
  var n33 = Ft4(t19, e11);
  if (!n33)
    return t19 + "";
  var r24 = n33[0], i27 = n33[1];
  return i27 < 0 ? "0." + new Array(-i27).join("0") + r24 : r24.length > i27 + 1 ? r24.slice(0, i27 + 1) + "." + r24.slice(i27 + 1) : r24 + new Array(i27 - r24.length + 2).join("0");
}
var xe5 = {
  "%": (t19, e11) => (t19 * 100).toFixed(e11),
  b: (t19) => Math.round(t19).toString(2),
  c: (t19) => t19 + "",
  d: In4,
  e: (t19, e11) => t19.toExponential(e11),
  f: (t19, e11) => t19.toFixed(e11),
  g: (t19, e11) => t19.toPrecision(e11),
  o: (t19) => Math.round(t19).toString(8),
  p: (t19, e11) => Me4(t19 * 100, e11),
  r: Me4,
  s: jn4,
  X: (t19) => Math.round(t19).toString(16).toUpperCase(),
  x: (t19) => Math.round(t19).toString(16)
};
function ve5(t19) {
  return t19;
}
var we5 = Array.prototype.map;
var Ce4 = ["y", "z", "a", "f", "p", "n", "µ", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"];
function Gn4(t19) {
  var e11 = t19.grouping === void 0 || t19.thousands === void 0 ? ve5 : En4(we5.call(t19.grouping, Number), t19.thousands + ""), n33 = t19.currency === void 0 ? "" : t19.currency[0] + "", r24 = t19.currency === void 0 ? "" : t19.currency[1] + "", i27 = t19.decimal === void 0 ? "." : t19.decimal + "", a22 = t19.numerals === void 0 ? ve5 : Vn4(we5.call(t19.numerals, String)), o13 = t19.percent === void 0 ? "%" : t19.percent + "", u35 = t19.minus === void 0 ? "−" : t19.minus + "", l26 = t19.nan === void 0 ? "NaN" : t19.nan + "";
  function s18(h26) {
    h26 = Yt4(h26);
    var f40 = h26.fill, d34 = h26.align, b35 = h26.sign, L12 = h26.symbol, F19 = h26.zero, _21 = h26.width, P20 = h26.comma, T21 = h26.precision, N22 = h26.trim, k29 = h26.type;
    k29 === "n" ? (P20 = true, k29 = "g") : xe5[k29] || (T21 === void 0 && (T21 = 12), N22 = true, k29 = "g"), (F19 || f40 === "0" && d34 === "=") && (F19 = true, f40 = "0", d34 = "=");
    var p26 = L12 === "$" ? n33 : L12 === "#" && /[boxX]/.test(k29) ? "0" + k29.toLowerCase() : "", w31 = L12 === "$" ? r24 : /[%p]/.test(k29) ? o13 : "", O20 = xe5[k29], q14 = /[defgprs%]/.test(k29);
    T21 = T21 === void 0 ? 6 : /[gprs]/.test(k29) ? Math.max(1, Math.min(21, T21)) : Math.max(0, Math.min(20, T21));
    function E25(y34) {
      var $25 = p26, S23 = w31, X14, bt10, at11;
      if (k29 === "c")
        S23 = O20(y34) + S23, y34 = "";
      else {
        y34 = +y34;
        var ot15 = y34 < 0 || 1 / y34 < 0;
        if (y34 = isNaN(y34) ? l26 : O20(Math.abs(y34), T21), N22 && (y34 = Rn4(y34)), ot15 && +y34 == 0 && b35 !== "+" && (ot15 = false), $25 = (ot15 ? b35 === "(" ? b35 : u35 : b35 === "-" || b35 === "(" ? "" : b35) + $25, S23 = (k29 === "s" ? Ce4[8 + We5 / 3] : "") + S23 + (ot15 && b35 === "(" ? ")" : ""), q14) {
          for (X14 = -1, bt10 = y34.length; ++X14 < bt10; )
            if (at11 = y34.charCodeAt(X14), 48 > at11 || at11 > 57) {
              S23 = (at11 === 46 ? i27 + y34.slice(X14 + 1) : y34.slice(X14)) + S23, y34 = y34.slice(0, X14);
              break;
            }
        }
      }
      P20 && !F19 && (y34 = e11(y34, 1 / 0));
      var st14 = $25.length + y34.length + S23.length, I18 = st14 < _21 ? new Array(_21 - st14 + 1).join(f40) : "";
      switch (P20 && F19 && (y34 = e11(I18 + y34, I18.length ? _21 - S23.length : 1 / 0), I18 = ""), d34) {
        case "<":
          y34 = $25 + y34 + S23 + I18;
          break;
        case "=":
          y34 = $25 + I18 + y34 + S23;
          break;
        case "^":
          y34 = I18.slice(0, st14 = I18.length >> 1) + $25 + y34 + S23 + I18.slice(st14);
          break;
        default:
          y34 = I18 + $25 + y34 + S23;
          break;
      }
      return a22(y34);
    }
    return E25.toString = function() {
      return h26 + "";
    }, E25;
  }
  function g32(h26, f40) {
    var d34 = s18((h26 = Yt4(h26), h26.type = "f", h26)), b35 = Math.max(-8, Math.min(8, Math.floor(ft8(f40) / 3))) * 3, L12 = Math.pow(10, -b35), F19 = Ce4[8 + b35 / 3];
    return function(_21) {
      return d34(L12 * _21) + F19;
    };
  }
  return {
    format: s18,
    formatPrefix: g32
  };
}
var Ut6;
var Pe4;
var ze5;
Zn4({
  thousands: ",",
  grouping: [3],
  currency: ["$", ""]
});
function Zn4(t19) {
  return Ut6 = Gn4(t19), Pe4 = Ut6.format, ze5 = Ut6.formatPrefix, Ut6;
}
function qn4(t19) {
  return Math.max(0, -ft8(Math.abs(t19)));
}
function Xn4(t19, e11) {
  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(ft8(e11) / 3))) * 3 - ft8(Math.abs(t19)));
}
function Qn4(t19, e11) {
  return t19 = Math.abs(t19), e11 = Math.abs(e11) - t19, Math.max(0, ft8(e11) - ft8(t19)) + 1;
}
function ie4(t19, e11) {
  switch (arguments.length) {
    case 0:
      break;
    case 1:
      this.range(t19);
      break;
    default:
      this.range(e11).domain(t19);
      break;
  }
  return this;
}
var Te4 = Symbol("implicit");
function Oe4() {
  var t19 = new me5(), e11 = [], n33 = [], r24 = Te4;
  function i27(a22) {
    let o13 = t19.get(a22);
    if (o13 === void 0) {
      if (r24 !== Te4)
        return r24;
      t19.set(a22, o13 = e11.push(a22) - 1);
    }
    return n33[o13 % n33.length];
  }
  return i27.domain = function(a22) {
    if (!arguments.length)
      return e11.slice();
    e11 = [], t19 = new me5();
    for (const o13 of a22)
      t19.has(o13) || t19.set(o13, e11.push(o13) - 1);
    return i27;
  }, i27.range = function(a22) {
    return arguments.length ? (n33 = Array.from(a22), i27) : n33.slice();
  }, i27.unknown = function(a22) {
    return arguments.length ? (r24 = a22, i27) : r24;
  }, i27.copy = function() {
    return Oe4(e11, n33).unknown(r24);
  }, ie4.apply(i27, arguments), i27;
}
function Jn4(t19) {
  return function() {
    return t19;
  };
}
function Kn4(t19) {
  return +t19;
}
var ke4 = [0, 1];
function ct7(t19) {
  return t19;
}
function Kt4(t19, e11) {
  return (e11 -= t19 = +t19) ? function(n33) {
    return (n33 - t19) / e11;
  } : Jn4(isNaN(e11) ? NaN : 0.5);
}
function tr4(t19, e11) {
  var n33;
  return t19 > e11 && (n33 = t19, t19 = e11, e11 = n33), function(r24) {
    return Math.max(t19, Math.min(e11, r24));
  };
}
function er4(t19, e11, n33) {
  var r24 = t19[0], i27 = t19[1], a22 = e11[0], o13 = e11[1];
  return i27 < r24 ? (r24 = Kt4(i27, r24), a22 = n33(o13, a22)) : (r24 = Kt4(r24, i27), a22 = n33(a22, o13)), function(u35) {
    return a22(r24(u35));
  };
}
function nr4(t19, e11, n33) {
  var r24 = Math.min(t19.length, e11.length) - 1, i27 = new Array(r24), a22 = new Array(r24), o13 = -1;
  for (t19[r24] < t19[0] && (t19 = t19.slice().reverse(), e11 = e11.slice().reverse()); ++o13 < r24; )
    i27[o13] = Kt4(t19[o13], t19[o13 + 1]), a22[o13] = n33(e11[o13], e11[o13 + 1]);
  return function(u35) {
    var l26 = vn4(t19, u35, 1, r24) - 1;
    return a22[l26](i27[l26](u35));
  };
}
function Ie4(t19, e11) {
  return e11.domain(t19.domain()).range(t19.range()).interpolate(t19.interpolate()).clamp(t19.clamp()).unknown(t19.unknown());
}
function rr4() {
  var t19 = ke4, e11 = ke4, n33 = ne4, r24, i27, a22, o13 = ct7, u35, l26, s18;
  function g32() {
    var f40 = Math.min(t19.length, e11.length);
    return o13 !== ct7 && (o13 = tr4(t19[0], t19[f40 - 1])), u35 = f40 > 2 ? nr4 : er4, l26 = s18 = null, h26;
  }
  function h26(f40) {
    return f40 == null || isNaN(f40 = +f40) ? a22 : (l26 || (l26 = u35(t19.map(r24), e11, n33)))(r24(o13(f40)));
  }
  return h26.invert = function(f40) {
    return o13(i27((s18 || (s18 = u35(e11, t19.map(r24), A5)))(f40)));
  }, h26.domain = function(f40) {
    return arguments.length ? (t19 = Array.from(f40, Kn4), g32()) : t19.slice();
  }, h26.range = function(f40) {
    return arguments.length ? (e11 = Array.from(f40), g32()) : e11.slice();
  }, h26.rangeRound = function(f40) {
    return e11 = Array.from(f40), n33 = On4, g32();
  }, h26.clamp = function(f40) {
    return arguments.length ? (o13 = f40 ? true : ct7, g32()) : o13 !== ct7;
  }, h26.interpolate = function(f40) {
    return arguments.length ? (n33 = f40, g32()) : n33;
  }, h26.unknown = function(f40) {
    return arguments.length ? (a22 = f40, h26) : a22;
  }, function(f40, d34) {
    return r24 = f40, i27 = d34, g32();
  };
}
function Ee4() {
  return rr4()(ct7, ct7);
}
function ir4(t19, e11, n33, r24) {
  var i27 = Qt3(t19, e11, n33), a22;
  switch (r24 = Yt4(r24 ?? ",f"), r24.type) {
    case "s": {
      var o13 = Math.max(Math.abs(t19), Math.abs(e11));
      return r24.precision == null && !isNaN(a22 = Xn4(i27, o13)) && (r24.precision = a22), ze5(r24, o13);
    }
    case "":
    case "e":
    case "g":
    case "p":
    case "r": {
      r24.precision == null && !isNaN(a22 = Qn4(i27, Math.max(Math.abs(t19), Math.abs(e11)))) && (r24.precision = a22 - (r24.type === "e"));
      break;
    }
    case "f":
    case "%": {
      r24.precision == null && !isNaN(a22 = qn4(i27)) && (r24.precision = a22 - (r24.type === "%") * 2);
      break;
    }
  }
  return Pe4(r24);
}
function ar4(t19) {
  var e11 = t19.domain;
  return t19.ticks = function(n33) {
    var r24 = e11();
    return Dn3(r24[0], r24[r24.length - 1], n33 ?? 10);
  }, t19.tickFormat = function(n33, r24) {
    var i27 = e11();
    return ir4(i27[0], i27[i27.length - 1], n33 ?? 10, r24);
  }, t19.nice = function(n33) {
    n33 == null && (n33 = 10);
    var r24 = e11(), i27 = 0, a22 = r24.length - 1, o13 = r24[i27], u35 = r24[a22], l26, s18, g32 = 10;
    for (u35 < o13 && (s18 = o13, o13 = u35, u35 = s18, s18 = i27, i27 = a22, a22 = s18); g32-- > 0; ) {
      if (s18 = Xt4(o13, u35, n33), s18 === l26)
        return r24[i27] = o13, r24[a22] = u35, e11(r24);
      if (s18 > 0)
        o13 = Math.floor(o13 / s18) * s18, u35 = Math.ceil(u35 / s18) * s18;
      else if (s18 < 0)
        o13 = Math.ceil(o13 * s18) / s18, u35 = Math.floor(u35 * s18) / s18;
      else
        break;
      l26 = s18;
    }
    return t19;
  }, t19;
}
function Ve5() {
  var t19 = Ee4();
  return t19.copy = function() {
    return Ie4(t19, Ve5());
  }, ie4.apply(t19, arguments), ar4(t19);
}
function or4(t19, e11) {
  t19 = t19.slice();
  var n33 = 0, r24 = t19.length - 1, i27 = t19[n33], a22 = t19[r24], o13;
  return a22 < i27 && (o13 = n33, n33 = r24, r24 = o13, o13 = i27, i27 = a22, a22 = o13), t19[n33] = e11.floor(i27), t19[r24] = e11.ceil(a22), t19;
}
var Vt4 = /* @__PURE__ */ new Date();
var Bt4 = /* @__PURE__ */ new Date();
function U10(t19, e11, n33, r24) {
  function i27(a22) {
    return t19(a22 = arguments.length === 0 ? /* @__PURE__ */ new Date() : /* @__PURE__ */ new Date(+a22)), a22;
  }
  return i27.floor = (a22) => (t19(a22 = /* @__PURE__ */ new Date(+a22)), a22), i27.ceil = (a22) => (t19(a22 = new Date(a22 - 1)), e11(a22, 1), t19(a22), a22), i27.round = (a22) => {
    const o13 = i27(a22), u35 = i27.ceil(a22);
    return a22 - o13 < u35 - a22 ? o13 : u35;
  }, i27.offset = (a22, o13) => (e11(a22 = /* @__PURE__ */ new Date(+a22), o13 == null ? 1 : Math.floor(o13)), a22), i27.range = (a22, o13, u35) => {
    const l26 = [];
    if (a22 = i27.ceil(a22), u35 = u35 == null ? 1 : Math.floor(u35), !(a22 < o13) || !(u35 > 0))
      return l26;
    let s18;
    do
      l26.push(s18 = /* @__PURE__ */ new Date(+a22)), e11(a22, u35), t19(a22);
    while (s18 < a22 && a22 < o13);
    return l26;
  }, i27.filter = (a22) => U10((o13) => {
    if (o13 >= o13)
      for (; t19(o13), !a22(o13); )
        o13.setTime(o13 - 1);
  }, (o13, u35) => {
    if (o13 >= o13)
      if (u35 < 0)
        for (; ++u35 <= 0; )
          for (; e11(o13, -1), !a22(o13); )
            ;
      else
        for (; --u35 >= 0; )
          for (; e11(o13, 1), !a22(o13); )
            ;
  }), n33 && (i27.count = (a22, o13) => (Vt4.setTime(+a22), Bt4.setTime(+o13), t19(Vt4), t19(Bt4), Math.floor(n33(Vt4, Bt4))), i27.every = (a22) => (a22 = Math.floor(a22), !isFinite(a22) || !(a22 > 0) ? null : a22 > 1 ? i27.filter(r24 ? (o13) => r24(o13) % a22 === 0 : (o13) => i27.count(0, o13) % a22 === 0) : i27)), i27;
}
var Lt3 = U10(() => {
}, (t19, e11) => {
  t19.setTime(+t19 + e11);
}, (t19, e11) => e11 - t19);
Lt3.every = (t19) => (t19 = Math.floor(t19), !isFinite(t19) || !(t19 > 0) ? null : t19 > 1 ? U10((e11) => {
  e11.setTime(Math.floor(e11 / t19) * t19);
}, (e11, n33) => {
  e11.setTime(+e11 + n33 * t19);
}, (e11, n33) => (n33 - e11) / t19) : Lt3);
Lt3.range;
var V8 = 1e3;
var z10 = V8 * 60;
var B6 = z10 * 60;
var j7 = B6 * 24;
var ae4 = j7 * 7;
var be4 = j7 * 30;
var Rt5 = j7 * 365;
var lt7 = U10((t19) => {
  t19.setTime(t19 - t19.getMilliseconds());
}, (t19, e11) => {
  t19.setTime(+t19 + e11 * V8);
}, (t19, e11) => (e11 - t19) / V8, (t19) => t19.getUTCSeconds());
lt7.range;
var oe4 = U10((t19) => {
  t19.setTime(t19 - t19.getMilliseconds() - t19.getSeconds() * V8);
}, (t19, e11) => {
  t19.setTime(+t19 + e11 * z10);
}, (t19, e11) => (e11 - t19) / z10, (t19) => t19.getMinutes());
oe4.range;
var sr4 = U10((t19) => {
  t19.setUTCSeconds(0, 0);
}, (t19, e11) => {
  t19.setTime(+t19 + e11 * z10);
}, (t19, e11) => (e11 - t19) / z10, (t19) => t19.getUTCMinutes());
sr4.range;
var se3 = U10((t19) => {
  t19.setTime(t19 - t19.getMilliseconds() - t19.getSeconds() * V8 - t19.getMinutes() * z10);
}, (t19, e11) => {
  t19.setTime(+t19 + e11 * B6);
}, (t19, e11) => (e11 - t19) / B6, (t19) => t19.getHours());
se3.range;
var ur4 = U10((t19) => {
  t19.setUTCMinutes(0, 0, 0);
}, (t19, e11) => {
  t19.setTime(+t19 + e11 * B6);
}, (t19, e11) => (e11 - t19) / B6, (t19) => t19.getUTCHours());
ur4.range;
var Ct5 = U10(
  (t19) => t19.setHours(0, 0, 0, 0),
  (t19, e11) => t19.setDate(t19.getDate() + e11),
  (t19, e11) => (e11 - t19 - (e11.getTimezoneOffset() - t19.getTimezoneOffset()) * z10) / j7,
  (t19) => t19.getDate() - 1
);
Ct5.range;
var ue4 = U10((t19) => {
  t19.setUTCHours(0, 0, 0, 0);
}, (t19, e11) => {
  t19.setUTCDate(t19.getUTCDate() + e11);
}, (t19, e11) => (e11 - t19) / j7, (t19) => t19.getUTCDate() - 1);
ue4.range;
var cr4 = U10((t19) => {
  t19.setUTCHours(0, 0, 0, 0);
}, (t19, e11) => {
  t19.setUTCDate(t19.getUTCDate() + e11);
}, (t19, e11) => (e11 - t19) / j7, (t19) => Math.floor(t19 / j7));
cr4.range;
function nt9(t19) {
  return U10((e11) => {
    e11.setDate(e11.getDate() - (e11.getDay() + 7 - t19) % 7), e11.setHours(0, 0, 0, 0);
  }, (e11, n33) => {
    e11.setDate(e11.getDate() + n33 * 7);
  }, (e11, n33) => (n33 - e11 - (n33.getTimezoneOffset() - e11.getTimezoneOffset()) * z10) / ae4);
}
var Ot6 = nt9(0);
var _t5 = nt9(1);
var lr4 = nt9(2);
var fr4 = nt9(3);
var ht8 = nt9(4);
var hr4 = nt9(5);
var gr3 = nt9(6);
Ot6.range;
_t5.range;
lr4.range;
fr4.range;
ht8.range;
hr4.range;
gr3.range;
function rt8(t19) {
  return U10((e11) => {
    e11.setUTCDate(e11.getUTCDate() - (e11.getUTCDay() + 7 - t19) % 7), e11.setUTCHours(0, 0, 0, 0);
  }, (e11, n33) => {
    e11.setUTCDate(e11.getUTCDate() + n33 * 7);
  }, (e11, n33) => (n33 - e11) / ae4);
}
var Be4 = rt8(0);
var Ht5 = rt8(1);
var mr3 = rt8(2);
var dr4 = rt8(3);
var gt7 = rt8(4);
var pr3 = rt8(5);
var yr3 = rt8(6);
Be4.range;
Ht5.range;
mr3.range;
dr4.range;
gt7.range;
pr3.range;
yr3.range;
var ce5 = U10((t19) => {
  t19.setDate(1), t19.setHours(0, 0, 0, 0);
}, (t19, e11) => {
  t19.setMonth(t19.getMonth() + e11);
}, (t19, e11) => e11.getMonth() - t19.getMonth() + (e11.getFullYear() - t19.getFullYear()) * 12, (t19) => t19.getMonth());
ce5.range;
var Mr4 = U10((t19) => {
  t19.setUTCDate(1), t19.setUTCHours(0, 0, 0, 0);
}, (t19, e11) => {
  t19.setUTCMonth(t19.getUTCMonth() + e11);
}, (t19, e11) => e11.getUTCMonth() - t19.getUTCMonth() + (e11.getUTCFullYear() - t19.getUTCFullYear()) * 12, (t19) => t19.getUTCMonth());
Mr4.range;
var G7 = U10((t19) => {
  t19.setMonth(0, 1), t19.setHours(0, 0, 0, 0);
}, (t19, e11) => {
  t19.setFullYear(t19.getFullYear() + e11);
}, (t19, e11) => e11.getFullYear() - t19.getFullYear(), (t19) => t19.getFullYear());
G7.every = (t19) => !isFinite(t19 = Math.floor(t19)) || !(t19 > 0) ? null : U10((e11) => {
  e11.setFullYear(Math.floor(e11.getFullYear() / t19) * t19), e11.setMonth(0, 1), e11.setHours(0, 0, 0, 0);
}, (e11, n33) => {
  e11.setFullYear(e11.getFullYear() + n33 * t19);
});
G7.range;
var et8 = U10((t19) => {
  t19.setUTCMonth(0, 1), t19.setUTCHours(0, 0, 0, 0);
}, (t19, e11) => {
  t19.setUTCFullYear(t19.getUTCFullYear() + e11);
}, (t19, e11) => e11.getUTCFullYear() - t19.getUTCFullYear(), (t19) => t19.getUTCFullYear());
et8.every = (t19) => !isFinite(t19 = Math.floor(t19)) || !(t19 > 0) ? null : U10((e11) => {
  e11.setUTCFullYear(Math.floor(e11.getUTCFullYear() / t19) * t19), e11.setUTCMonth(0, 1), e11.setUTCHours(0, 0, 0, 0);
}, (e11, n33) => {
  e11.setUTCFullYear(e11.getUTCFullYear() + n33 * t19);
});
et8.range;
function xr3(t19, e11, n33, r24, i27, a22) {
  const o13 = [
    [lt7, 1, V8],
    [lt7, 5, 5 * V8],
    [lt7, 15, 15 * V8],
    [lt7, 30, 30 * V8],
    [a22, 1, z10],
    [a22, 5, 5 * z10],
    [a22, 15, 15 * z10],
    [a22, 30, 30 * z10],
    [i27, 1, B6],
    [i27, 3, 3 * B6],
    [i27, 6, 6 * B6],
    [i27, 12, 12 * B6],
    [r24, 1, j7],
    [r24, 2, 2 * j7],
    [n33, 1, ae4],
    [e11, 1, be4],
    [e11, 3, 3 * be4],
    [t19, 1, Rt5]
  ];
  function u35(s18, g32, h26) {
    const f40 = g32 < s18;
    f40 && ([s18, g32] = [g32, s18]);
    const d34 = h26 && typeof h26.range == "function" ? h26 : l26(s18, g32, h26), b35 = d34 ? d34.range(s18, +g32 + 1) : [];
    return f40 ? b35.reverse() : b35;
  }
  function l26(s18, g32, h26) {
    const f40 = Math.abs(g32 - s18) / h26, d34 = te4(([, , F19]) => F19).right(o13, f40);
    if (d34 === o13.length)
      return t19.every(Qt3(s18 / Rt5, g32 / Rt5, h26));
    if (d34 === 0)
      return Lt3.every(Math.max(Qt3(s18, g32, h26), 1));
    const [b35, L12] = o13[f40 / o13[d34 - 1][2] < o13[d34][2] / f40 ? d34 - 1 : d34];
    return b35.every(L12);
  }
  return [u35, l26];
}
var [vr4, wr4] = xr3(G7, ce5, Ot6, Ct5, se3, oe4);
function jt5(t19) {
  if (0 <= t19.y && t19.y < 100) {
    var e11 = new Date(-1, t19.m, t19.d, t19.H, t19.M, t19.S, t19.L);
    return e11.setFullYear(t19.y), e11;
  }
  return new Date(t19.y, t19.m, t19.d, t19.H, t19.M, t19.S, t19.L);
}
function Gt4(t19) {
  if (0 <= t19.y && t19.y < 100) {
    var e11 = new Date(Date.UTC(-1, t19.m, t19.d, t19.H, t19.M, t19.S, t19.L));
    return e11.setUTCFullYear(t19.y), e11;
  }
  return new Date(Date.UTC(t19.y, t19.m, t19.d, t19.H, t19.M, t19.S, t19.L));
}
function dt8(t19, e11, n33) {
  return { y: t19, m: e11, d: n33, H: 0, M: 0, S: 0, L: 0 };
}
function Cr4(t19) {
  var e11 = t19.dateTime, n33 = t19.date, r24 = t19.time, i27 = t19.periods, a22 = t19.days, o13 = t19.shortDays, u35 = t19.months, l26 = t19.shortMonths, s18 = pt6(i27), g32 = yt9(i27), h26 = pt6(a22), f40 = yt9(a22), d34 = pt6(o13), b35 = yt9(o13), L12 = pt6(u35), F19 = yt9(u35), _21 = pt6(l26), P20 = yt9(l26), T21 = {
    a: ot15,
    A: st14,
    b: I18,
    B: Je6,
    c: null,
    d: Ne4,
    e: Ne4,
    f: Rr4,
    g: ei4,
    G: ri4,
    H: Er4,
    I: Vr4,
    j: Br4,
    L: Re4,
    m: jr4,
    M: Gr4,
    p: Ke7,
    q: tn5,
    Q: Le4,
    s: _e4,
    S: Zr4,
    u: qr4,
    U: Xr4,
    V: Qr4,
    w: Jr4,
    W: Kr4,
    x: null,
    X: null,
    y: ti4,
    Y: ni4,
    Z: ii4,
    "%": Ye4
  }, N22 = {
    a: en6,
    A: nn4,
    b: rn5,
    B: an5,
    c: null,
    d: Fe4,
    e: Fe4,
    f: ui4,
    g: Mi2,
    G: vi4,
    H: ai4,
    I: oi4,
    j: si4,
    L: Ge4,
    m: ci4,
    M: li4,
    p: on5,
    q: sn5,
    Q: Le4,
    s: _e4,
    S: fi4,
    u: hi4,
    U: gi4,
    V: mi4,
    w: di4,
    W: pi4,
    x: null,
    X: null,
    y: yi4,
    Y: xi4,
    Z: wi4,
    "%": Ye4
  }, k29 = {
    a: E25,
    A: y34,
    b: $25,
    B: S23,
    c: X14,
    d: $e4,
    e: $e4,
    f: Pr4,
    g: Ue4,
    G: De4,
    H: Ae4,
    I: Ae4,
    j: Lr4,
    L: Wr4,
    m: Yr4,
    M: _r3,
    p: q14,
    q: Fr4,
    Q: Or4,
    s: Ir4,
    S: Hr4,
    u: Dr4,
    U: Ur4,
    V: $r4,
    w: Sr4,
    W: Ar4,
    x: bt10,
    X: at11,
    y: Ue4,
    Y: De4,
    Z: Nr4,
    "%": zr4
  };
  T21.x = p26(n33, T21), T21.X = p26(r24, T21), T21.c = p26(e11, T21), N22.x = p26(n33, N22), N22.X = p26(r24, N22), N22.c = p26(e11, N22);
  function p26(m34, M13) {
    return function(x36) {
      var c27 = [], Y13 = -1, C21 = 0, H16 = m34.length, W11, K16, le7;
      for (x36 instanceof Date || (x36 = /* @__PURE__ */ new Date(+x36)); ++Y13 < H16; )
        m34.charCodeAt(Y13) === 37 && (c27.push(m34.slice(C21, Y13)), (K16 = Se4[W11 = m34.charAt(++Y13)]) != null ? W11 = m34.charAt(++Y13) : K16 = W11 === "e" ? " " : "0", (le7 = M13[W11]) && (W11 = le7(x36, K16)), c27.push(W11), C21 = Y13 + 1);
      return c27.push(m34.slice(C21, Y13)), c27.join("");
    };
  }
  function w31(m34, M13) {
    return function(x36) {
      var c27 = dt8(1900, void 0, 1), Y13 = O20(c27, m34, x36 += "", 0), C21, H16;
      if (Y13 != x36.length)
        return null;
      if ("Q" in c27)
        return new Date(c27.Q);
      if ("s" in c27)
        return new Date(c27.s * 1e3 + ("L" in c27 ? c27.L : 0));
      if (M13 && !("Z" in c27) && (c27.Z = 0), "p" in c27 && (c27.H = c27.H % 12 + c27.p * 12), c27.m === void 0 && (c27.m = "q" in c27 ? c27.q : 0), "V" in c27) {
        if (c27.V < 1 || c27.V > 53)
          return null;
        "w" in c27 || (c27.w = 1), "Z" in c27 ? (C21 = Gt4(dt8(c27.y, 0, 1)), H16 = C21.getUTCDay(), C21 = H16 > 4 || H16 === 0 ? Ht5.ceil(C21) : Ht5(C21), C21 = ue4.offset(C21, (c27.V - 1) * 7), c27.y = C21.getUTCFullYear(), c27.m = C21.getUTCMonth(), c27.d = C21.getUTCDate() + (c27.w + 6) % 7) : (C21 = jt5(dt8(c27.y, 0, 1)), H16 = C21.getDay(), C21 = H16 > 4 || H16 === 0 ? _t5.ceil(C21) : _t5(C21), C21 = Ct5.offset(C21, (c27.V - 1) * 7), c27.y = C21.getFullYear(), c27.m = C21.getMonth(), c27.d = C21.getDate() + (c27.w + 6) % 7);
      } else
        ("W" in c27 || "U" in c27) && ("w" in c27 || (c27.w = "u" in c27 ? c27.u % 7 : "W" in c27 ? 1 : 0), H16 = "Z" in c27 ? Gt4(dt8(c27.y, 0, 1)).getUTCDay() : jt5(dt8(c27.y, 0, 1)).getDay(), c27.m = 0, c27.d = "W" in c27 ? (c27.w + 6) % 7 + c27.W * 7 - (H16 + 5) % 7 : c27.w + c27.U * 7 - (H16 + 6) % 7);
      return "Z" in c27 ? (c27.H += c27.Z / 100 | 0, c27.M += c27.Z % 100, Gt4(c27)) : jt5(c27);
    };
  }
  function O20(m34, M13, x36, c27) {
    for (var Y13 = 0, C21 = M13.length, H16 = x36.length, W11, K16; Y13 < C21; ) {
      if (c27 >= H16)
        return -1;
      if (W11 = M13.charCodeAt(Y13++), W11 === 37) {
        if (W11 = M13.charAt(Y13++), K16 = k29[W11 in Se4 ? M13.charAt(Y13++) : W11], !K16 || (c27 = K16(m34, x36, c27)) < 0)
          return -1;
      } else if (W11 != x36.charCodeAt(c27++))
        return -1;
    }
    return c27;
  }
  function q14(m34, M13, x36) {
    var c27 = s18.exec(M13.slice(x36));
    return c27 ? (m34.p = g32.get(c27[0].toLowerCase()), x36 + c27[0].length) : -1;
  }
  function E25(m34, M13, x36) {
    var c27 = d34.exec(M13.slice(x36));
    return c27 ? (m34.w = b35.get(c27[0].toLowerCase()), x36 + c27[0].length) : -1;
  }
  function y34(m34, M13, x36) {
    var c27 = h26.exec(M13.slice(x36));
    return c27 ? (m34.w = f40.get(c27[0].toLowerCase()), x36 + c27[0].length) : -1;
  }
  function $25(m34, M13, x36) {
    var c27 = _21.exec(M13.slice(x36));
    return c27 ? (m34.m = P20.get(c27[0].toLowerCase()), x36 + c27[0].length) : -1;
  }
  function S23(m34, M13, x36) {
    var c27 = L12.exec(M13.slice(x36));
    return c27 ? (m34.m = F19.get(c27[0].toLowerCase()), x36 + c27[0].length) : -1;
  }
  function X14(m34, M13, x36) {
    return O20(m34, e11, M13, x36);
  }
  function bt10(m34, M13, x36) {
    return O20(m34, n33, M13, x36);
  }
  function at11(m34, M13, x36) {
    return O20(m34, r24, M13, x36);
  }
  function ot15(m34) {
    return o13[m34.getDay()];
  }
  function st14(m34) {
    return a22[m34.getDay()];
  }
  function I18(m34) {
    return l26[m34.getMonth()];
  }
  function Je6(m34) {
    return u35[m34.getMonth()];
  }
  function Ke7(m34) {
    return i27[+(m34.getHours() >= 12)];
  }
  function tn5(m34) {
    return 1 + ~~(m34.getMonth() / 3);
  }
  function en6(m34) {
    return o13[m34.getUTCDay()];
  }
  function nn4(m34) {
    return a22[m34.getUTCDay()];
  }
  function rn5(m34) {
    return l26[m34.getUTCMonth()];
  }
  function an5(m34) {
    return u35[m34.getUTCMonth()];
  }
  function on5(m34) {
    return i27[+(m34.getUTCHours() >= 12)];
  }
  function sn5(m34) {
    return 1 + ~~(m34.getUTCMonth() / 3);
  }
  return {
    format: function(m34) {
      var M13 = p26(m34 += "", T21);
      return M13.toString = function() {
        return m34;
      }, M13;
    },
    parse: function(m34) {
      var M13 = w31(m34 += "", false);
      return M13.toString = function() {
        return m34;
      }, M13;
    },
    utcFormat: function(m34) {
      var M13 = p26(m34 += "", N22);
      return M13.toString = function() {
        return m34;
      }, M13;
    },
    utcParse: function(m34) {
      var M13 = w31(m34 += "", true);
      return M13.toString = function() {
        return m34;
      }, M13;
    }
  };
}
var Se4 = { "-": "", _: " ", 0: "0" };
var A9 = /^\s*\d+/;
var Tr4 = /^%/;
var kr4 = /[\\^$*+?|[\]().{}]/g;
function v11(t19, e11, n33) {
  var r24 = t19 < 0 ? "-" : "", i27 = (r24 ? -t19 : t19) + "", a22 = i27.length;
  return r24 + (a22 < n33 ? new Array(n33 - a22 + 1).join(e11) + i27 : i27);
}
function br4(t19) {
  return t19.replace(kr4, "\\$&");
}
function pt6(t19) {
  return new RegExp("^(?:" + t19.map(br4).join("|") + ")", "i");
}
function yt9(t19) {
  return new Map(t19.map((e11, n33) => [e11.toLowerCase(), n33]));
}
function Sr4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 1));
  return r24 ? (t19.w = +r24[0], n33 + r24[0].length) : -1;
}
function Dr4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 1));
  return r24 ? (t19.u = +r24[0], n33 + r24[0].length) : -1;
}
function Ur4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.U = +r24[0], n33 + r24[0].length) : -1;
}
function $r4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.V = +r24[0], n33 + r24[0].length) : -1;
}
function Ar4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.W = +r24[0], n33 + r24[0].length) : -1;
}
function De4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 4));
  return r24 ? (t19.y = +r24[0], n33 + r24[0].length) : -1;
}
function Ue4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.y = +r24[0] + (+r24[0] > 68 ? 1900 : 2e3), n33 + r24[0].length) : -1;
}
function Nr4(t19, e11, n33) {
  var r24 = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e11.slice(n33, n33 + 6));
  return r24 ? (t19.Z = r24[1] ? 0 : -(r24[2] + (r24[3] || "00")), n33 + r24[0].length) : -1;
}
function Fr4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 1));
  return r24 ? (t19.q = r24[0] * 3 - 3, n33 + r24[0].length) : -1;
}
function Yr4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.m = r24[0] - 1, n33 + r24[0].length) : -1;
}
function $e4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.d = +r24[0], n33 + r24[0].length) : -1;
}
function Lr4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 3));
  return r24 ? (t19.m = 0, t19.d = +r24[0], n33 + r24[0].length) : -1;
}
function Ae4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.H = +r24[0], n33 + r24[0].length) : -1;
}
function _r3(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.M = +r24[0], n33 + r24[0].length) : -1;
}
function Hr4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 2));
  return r24 ? (t19.S = +r24[0], n33 + r24[0].length) : -1;
}
function Wr4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 3));
  return r24 ? (t19.L = +r24[0], n33 + r24[0].length) : -1;
}
function Pr4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33, n33 + 6));
  return r24 ? (t19.L = Math.floor(r24[0] / 1e3), n33 + r24[0].length) : -1;
}
function zr4(t19, e11, n33) {
  var r24 = Tr4.exec(e11.slice(n33, n33 + 1));
  return r24 ? n33 + r24[0].length : -1;
}
function Or4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33));
  return r24 ? (t19.Q = +r24[0], n33 + r24[0].length) : -1;
}
function Ir4(t19, e11, n33) {
  var r24 = A9.exec(e11.slice(n33));
  return r24 ? (t19.s = +r24[0], n33 + r24[0].length) : -1;
}
function Ne4(t19, e11) {
  return v11(t19.getDate(), e11, 2);
}
function Er4(t19, e11) {
  return v11(t19.getHours(), e11, 2);
}
function Vr4(t19, e11) {
  return v11(t19.getHours() % 12 || 12, e11, 2);
}
function Br4(t19, e11) {
  return v11(1 + Ct5.count(G7(t19), t19), e11, 3);
}
function Re4(t19, e11) {
  return v11(t19.getMilliseconds(), e11, 3);
}
function Rr4(t19, e11) {
  return Re4(t19, e11) + "000";
}
function jr4(t19, e11) {
  return v11(t19.getMonth() + 1, e11, 2);
}
function Gr4(t19, e11) {
  return v11(t19.getMinutes(), e11, 2);
}
function Zr4(t19, e11) {
  return v11(t19.getSeconds(), e11, 2);
}
function qr4(t19) {
  var e11 = t19.getDay();
  return e11 === 0 ? 7 : e11;
}
function Xr4(t19, e11) {
  return v11(Ot6.count(G7(t19) - 1, t19), e11, 2);
}
function je4(t19) {
  var e11 = t19.getDay();
  return e11 >= 4 || e11 === 0 ? ht8(t19) : ht8.ceil(t19);
}
function Qr4(t19, e11) {
  return t19 = je4(t19), v11(ht8.count(G7(t19), t19) + (G7(t19).getDay() === 4), e11, 2);
}
function Jr4(t19) {
  return t19.getDay();
}
function Kr4(t19, e11) {
  return v11(_t5.count(G7(t19) - 1, t19), e11, 2);
}
function ti4(t19, e11) {
  return v11(t19.getFullYear() % 100, e11, 2);
}
function ei4(t19, e11) {
  return t19 = je4(t19), v11(t19.getFullYear() % 100, e11, 2);
}
function ni4(t19, e11) {
  return v11(t19.getFullYear() % 1e4, e11, 4);
}
function ri4(t19, e11) {
  var n33 = t19.getDay();
  return t19 = n33 >= 4 || n33 === 0 ? ht8(t19) : ht8.ceil(t19), v11(t19.getFullYear() % 1e4, e11, 4);
}
function ii4(t19) {
  var e11 = t19.getTimezoneOffset();
  return (e11 > 0 ? "-" : (e11 *= -1, "+")) + v11(e11 / 60 | 0, "0", 2) + v11(e11 % 60, "0", 2);
}
function Fe4(t19, e11) {
  return v11(t19.getUTCDate(), e11, 2);
}
function ai4(t19, e11) {
  return v11(t19.getUTCHours(), e11, 2);
}
function oi4(t19, e11) {
  return v11(t19.getUTCHours() % 12 || 12, e11, 2);
}
function si4(t19, e11) {
  return v11(1 + ue4.count(et8(t19), t19), e11, 3);
}
function Ge4(t19, e11) {
  return v11(t19.getUTCMilliseconds(), e11, 3);
}
function ui4(t19, e11) {
  return Ge4(t19, e11) + "000";
}
function ci4(t19, e11) {
  return v11(t19.getUTCMonth() + 1, e11, 2);
}
function li4(t19, e11) {
  return v11(t19.getUTCMinutes(), e11, 2);
}
function fi4(t19, e11) {
  return v11(t19.getUTCSeconds(), e11, 2);
}
function hi4(t19) {
  var e11 = t19.getUTCDay();
  return e11 === 0 ? 7 : e11;
}
function gi4(t19, e11) {
  return v11(Be4.count(et8(t19) - 1, t19), e11, 2);
}
function Ze4(t19) {
  var e11 = t19.getUTCDay();
  return e11 >= 4 || e11 === 0 ? gt7(t19) : gt7.ceil(t19);
}
function mi4(t19, e11) {
  return t19 = Ze4(t19), v11(gt7.count(et8(t19), t19) + (et8(t19).getUTCDay() === 4), e11, 2);
}
function di4(t19) {
  return t19.getUTCDay();
}
function pi4(t19, e11) {
  return v11(Ht5.count(et8(t19) - 1, t19), e11, 2);
}
function yi4(t19, e11) {
  return v11(t19.getUTCFullYear() % 100, e11, 2);
}
function Mi2(t19, e11) {
  return t19 = Ze4(t19), v11(t19.getUTCFullYear() % 100, e11, 2);
}
function xi4(t19, e11) {
  return v11(t19.getUTCFullYear() % 1e4, e11, 4);
}
function vi4(t19, e11) {
  var n33 = t19.getUTCDay();
  return t19 = n33 >= 4 || n33 === 0 ? gt7(t19) : gt7.ceil(t19), v11(t19.getUTCFullYear() % 1e4, e11, 4);
}
function wi4() {
  return "+0000";
}
function Ye4() {
  return "%";
}
function Le4(t19) {
  return +t19;
}
function _e4(t19) {
  return Math.floor(+t19 / 1e3);
}
var ut7;
var qe4;
Ci2({
  dateTime: "%x, %X",
  date: "%-m/%-d/%Y",
  time: "%-I:%M:%S %p",
  periods: ["AM", "PM"],
  days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
  shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
  shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
});
function Ci2(t19) {
  return ut7 = Cr4(t19), qe4 = ut7.format, ut7.parse, ut7.utcFormat, ut7.utcParse, ut7;
}
function Ti2(t19) {
  return new Date(t19);
}
function ki4(t19) {
  return t19 instanceof Date ? +t19 : +/* @__PURE__ */ new Date(+t19);
}
function Xe4(t19, e11, n33, r24, i27, a22, o13, u35, l26, s18) {
  var g32 = Ee4(), h26 = g32.invert, f40 = g32.domain, d34 = s18(".%L"), b35 = s18(":%S"), L12 = s18("%I:%M"), F19 = s18("%I %p"), _21 = s18("%a %d"), P20 = s18("%b %d"), T21 = s18("%B"), N22 = s18("%Y");
  function k29(p26) {
    return (l26(p26) < p26 ? d34 : u35(p26) < p26 ? b35 : o13(p26) < p26 ? L12 : a22(p26) < p26 ? F19 : r24(p26) < p26 ? i27(p26) < p26 ? _21 : P20 : n33(p26) < p26 ? T21 : N22)(p26);
  }
  return g32.invert = function(p26) {
    return new Date(h26(p26));
  }, g32.domain = function(p26) {
    return arguments.length ? f40(Array.from(p26, ki4)) : f40().map(Ti2);
  }, g32.ticks = function(p26) {
    var w31 = f40();
    return t19(w31[0], w31[w31.length - 1], p26 ?? 10);
  }, g32.tickFormat = function(p26, w31) {
    return w31 == null ? k29 : s18(w31);
  }, g32.nice = function(p26) {
    var w31 = f40();
    return (!p26 || typeof p26.range != "function") && (p26 = e11(w31[0], w31[w31.length - 1], p26 ?? 10)), p26 ? f40(or4(w31, p26)) : g32;
  }, g32.copy = function() {
    return Ie4(g32, Xe4(t19, e11, n33, r24, i27, a22, o13, u35, l26, s18));
  }, g32;
}
function bi4() {
  return ie4.apply(Xe4(vr4, wr4, G7, ce5, Ot6, Ct5, se3, oe4, lt7, qe4).domain([new Date(2e3, 0, 1), new Date(2e3, 0, 2)]), arguments);
}
function Si2(t19) {
  for (var e11 = t19.length / 6 | 0, n33 = new Array(e11), r24 = 0; r24 < e11; )
    n33[r24] = "#" + t19.slice(r24 * 6, ++r24 * 6);
  return n33;
}
var Di = Si2("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");
var vt5 = (t19, e11) => {
  var r24;
  const n33 = t19._$AN;
  if (n33 === void 0)
    return false;
  for (const i27 of n33)
    (r24 = i27._$AO) == null || r24.call(i27, e11, false), vt5(i27, e11);
  return true;
};
var Wt5 = (t19) => {
  let e11, n33;
  do {
    if ((e11 = t19._$AM) === void 0)
      break;
    n33 = e11._$AN, n33.delete(t19), t19 = e11;
  } while ((n33 == null ? void 0 : n33.size) === 0);
};
var Qe5 = (t19) => {
  for (let e11; e11 = t19._$AM; t19 = e11) {
    let n33 = e11._$AN;
    if (n33 === void 0)
      e11._$AN = n33 = /* @__PURE__ */ new Set();
    else if (n33.has(t19))
      break;
    n33.add(t19), Ai4(e11);
  }
};
function Ui2(t19) {
  this._$AN !== void 0 ? (Wt5(this), this._$AM = t19, Qe5(this)) : this._$AM = t19;
}
function $i4(t19, e11 = false, n33 = 0) {
  const r24 = this._$AH, i27 = this._$AN;
  if (i27 !== void 0 && i27.size !== 0)
    if (e11)
      if (Array.isArray(r24))
        for (let a22 = n33; a22 < r24.length; a22++)
          vt5(r24[a22], false), Wt5(r24[a22]);
      else
        r24 != null && (vt5(r24, false), Wt5(r24));
    else
      vt5(this, t19);
}
var Ai4 = (t19) => {
  t19.type == s5.CHILD && (t19._$AP ?? (t19._$AP = $i4), t19._$AQ ?? (t19._$AQ = Ui2));
};
var Ni4 = class extends _6 {
  constructor() {
    super(...arguments), this._$AN = void 0;
  }
  _$AT(e11, n33, r24) {
    super._$AT(e11, n33, r24), Qe5(this), this.isConnected = e11._$AU;
  }
  _$AO(e11, n33 = true) {
    var r24, i27;
    e11 !== this.isConnected && (this.isConnected = e11, e11 ? (r24 = this.reconnected) == null || r24.call(this) : (i27 = this.disconnected) == null || i27.call(this)), n33 && (vt5(this, e11), Wt5(this));
  }
  setValue(e11) {
    if (r9(this._$Ct))
      this._$Ct._$AI(e11, this);
    else {
      const n33 = [...this._$Ct._$AH];
      n33[this._$Ci] = e11, this._$Ct._$AI(n33, this, 0);
    }
  }
  disconnected() {
  }
  reconnected() {
  }
};
var Zt4 = /* @__PURE__ */ new WeakMap();
var wt6 = T10(class extends Ni4 {
  render(t19) {
    return d3;
  }
  update(t19, [e11]) {
    var r24;
    const n33 = e11 !== this.Y;
    return n33 && this.Y !== void 0 && this.rt(void 0), (n33 || this.lt !== this.ct) && (this.Y = e11, this.ht = (r24 = t19.options) == null ? void 0 : r24.host, this.rt(this.ct = t19.element)), d3;
  }
  rt(t19) {
    if (this.isConnected || (t19 = void 0), typeof this.Y == "function") {
      const e11 = this.ht ?? globalThis;
      let n33 = Zt4.get(e11);
      n33 === void 0 && (n33 = /* @__PURE__ */ new WeakMap(), Zt4.set(e11, n33)), n33.get(this.Y) !== void 0 && this.Y.call(this.ht, void 0), n33.set(this.Y, t19), t19 !== void 0 && this.Y.call(this.ht, t19);
    } else
      this.Y.value = t19;
  }
  get lt() {
    var t19, e11;
    return typeof this.Y == "function" ? (t19 = Zt4.get(this.ht ?? globalThis)) == null ? void 0 : t19.get(this.Y) : (e11 = this.Y) == null ? void 0 : e11.value;
  }
  disconnected() {
    this.lt === this.ct && this.rt(void 0);
  }
  reconnected() {
    this.rt(this.ct);
  }
});
function Fi2(t19, e11, n33) {
  return bi4().domain([n33 - e11, n33]).range([0, t19]);
}
function Yi2(t19) {
  const e11 = He4(t19).tickFormat((n33) => `${n33.getTime() / 1e3}`);
  return Tt3`
    <g 
      class="axis axis--x" 
      ${wt6((n33) => {
    e11(Ei2(n33));
  })}>
    </g> 
  `;
}
function Li2(t19, e11) {
  const n33 = He4(t19).tickSize(-e11).tickFormat("");
  return Tt3`
    <g 
      class="axis-x-grid" 
      ${wt6((r24) => {
    n33(Ei2(r24));
  })}>
    </g> 
  `;
}
var _i4 = Object.defineProperty;
var Tt5 = (t19, e11, n33, r24) => {
  for (var i27 = void 0, a22 = t19.length - 1, o13; a22 >= 0; a22--)
    (o13 = t19[a22]) && (i27 = o13(e11, n33, i27) || i27);
  return i27 && _i4(e11, n33, i27), i27;
};
var mt7 = class extends H4 {
  constructor() {
    super(...arguments), this.value = 0, this.color = "", this.hide = false, this.yAxis = 0, this.displayName = "";
  }
};
Tt5([
  Mt4({ type: Number })
], mt7.prototype, "value");
Tt5([
  Mt4({ type: String })
], mt7.prototype, "color");
Tt5([
  Mt4({ type: Boolean })
], mt7.prototype, "hide");
Tt5([
  Mt4({ type: Number, attribute: "y-axis" })
], mt7.prototype, "yAxis");
Tt5([
  Mt4({ type: String, attribute: "display-name", reflect: true })
], mt7.prototype, "displayName");
customElements.get("frc-line-chart-data") || customElements.define("frc-line-chart-data", mt7);
var Hi = Object.defineProperty;
var it9 = (t19, e11, n33, r24) => {
  for (var i27 = void 0, a22 = t19.length - 1, o13; a22 >= 0; a22--)
    (o13 = t19[a22]) && (i27 = o13(e11, n33, i27) || i27);
  return i27 && Hi(e11, n33, i27), i27;
};
var Wi = Oe4().domain(
  Array(8).fill(0).map((t19, e11) => e11)
).range(Di);
var R9;
var Q6 = (R9 = class extends H4 {
  constructor() {
    super(...arguments), this.viewTime = 10, this.chartTitle = "", this.data = [], this.startTime = 0, this.elapsedTimeMs = 0;
  }
  firstUpdated() {
    this.startTime = Date.now(), requestAnimationFrame(() => {
      this.updateChart();
    });
  }
  getFilteredData(e11) {
    const n33 = e11.findIndex(
      ({ timeMs: r24 }) => this.elapsedTimeMs - r24 < Math.round(this.viewTime * 1e3)
    ) - 1;
    return n33 < 0 ? e11 : e11.slice(n33);
  }
  updateChart() {
    this.elapsedTimeMs = Date.now() - this.startTime;
    const e11 = [...this.children].filter(
      (n33) => n33.tagName.toLowerCase() === "frc-line-chart-data"
    );
    this.data = e11.map((n33, r24) => {
      var a22;
      const i27 = ((a22 = this.data[r24]) == null ? void 0 : a22.data) ?? [];
      return i27.push({
        value: n33.value ?? 0,
        timeMs: this.elapsedTimeMs
      }), {
        data: this.getFilteredData(i27),
        color: n33.color || Wi(r24 % 8),
        hide: n33.hide ?? false,
        yAxis: n33.yAxis ?? 0,
        displayName: n33.displayName || `Data ${r24}`
      };
    }), requestAnimationFrame(() => {
      this.updateChart();
    });
  }
  static getYScale(e11, n33, r24) {
    const { invert: i27, lockMin: a22, lockMax: o13 } = r24;
    let { min: u35, max: l26 } = r24;
    (!a22 || !o13) && n33.forEach((g32) => {
      g32.data.forEach(({ value: h26 }) => {
        a22 || (u35 = Math.min(u35, h26)), o13 || (l26 = Math.max(l26, h26));
      });
    });
    const s18 = i27 ? [0, e11] : [e11, 0];
    return Ve5().domain([u35, l26]).range(s18);
  }
  getDimensions() {
    var u35;
    const e11 = { top: 0, right: 40, bottom: 20, left: 40 }, n33 = ((u35 = this.chartContainer) == null ? void 0 : u35.getBoundingClientRect()) ?? {
      width: 960,
      height: 500
    }, r24 = n33.width, i27 = n33.height, a22 = r24 - e11.left - e11.right, o13 = i27 - e11.top - e11.bottom;
    return {
      margin: e11,
      svgWidth: r24,
      svgHeight: i27,
      width: a22,
      height: o13
    };
  }
  getYScales() {
    const { height: e11 } = this.getDimensions(), n33 = [...this.children].filter(
      (r24) => r24.tagName.toLowerCase() === "frc-line-chart-axis"
    );
    if (n33.length === 0) {
      const r24 = {
        min: -1,
        max: 1,
        lockMin: false,
        lockMax: false,
        invert: false,
        side: "left",
        hideGridLines: false,
        hide: false
      };
      return [
        {
          chartAxis: r24,
          scale: R9.getYScale(
            e11,
            this.data.filter(({ yAxis: i27 }) => i27 === 0),
            r24
          )
        }
      ];
    }
    return n33.map((r24, i27) => {
      const a22 = r24, o13 = {
        min: a22.min ?? -1,
        max: a22.max ?? 1,
        lockMin: a22.lockMin ?? false,
        lockMax: a22.lockMax ?? false,
        invert: a22.invert ?? false,
        side: a22.side ?? "left",
        hideGridLines: a22.hideGridLines ?? false,
        hide: a22.hide ?? false
      };
      return {
        chartAxis: o13,
        scale: R9.getYScale(
          e11,
          this.data.filter(({ yAxis: u35 }) => u35 === i27),
          o13
        )
      };
    });
  }
  static getPath(e11, n33, r24) {
    return `M${e11.map(
      (a22) => [n33(a22).toFixed(3), r24(a22).toFixed(3)].join(",")
    ).join("L")}`;
  }
  getLegend() {
    const e11 = [...this.children].find(
      (i27) => i27.tagName.toLowerCase() === "frc-line-chart-legend"
    );
    if (!e11)
      return {
        direction: "horizontal",
        position: "n",
        inside: false,
        hide: false
      };
    const n33 = e11;
    return {
      direction: n33.direction ?? "horizontal",
      position: n33.position ?? "n",
      inside: n33.inside ?? false,
      hide: n33.hide ?? false
    };
  }
  render() {
    const { inside: e11, position: n33, direction: r24, hide: i27 } = this.getLegend(), a22 = n33 === "w" || n33 === "e" || ["ne", "nw", "se", "sw"].includes(n33) && r24 === "vertical", o13 = a22 && ["ne", "e", "se"].includes(n33) || !a22 && ["sw", "s", "se"].includes(n33), u35 = p4({
      display: e11 ? "block" : "flex",
      flexDirection: `${a22 ? "row" : "column"}${o13 ? "-reverse" : ""}`
    }), l26 = e11 ? {
      width: "100%",
      height: "100%"
    } : { flex: "1" };
    return Ot4`
      <div class="chart-and-header">
        ${this.chartTitle ? Ot4`<header>${this.chartTitle}</header>` : ""}
        <div class="chart-and-legend" style=${u35}>
          ${i27 ? "" : this.renderLegend()}
          <div class="chart-container" style=${p4(l26)}>
            ${this.renderChart()}
          </div>
        </div>
      </div>
    `;
  }
  renderLegend() {
    const { margin: e11 } = this.getDimensions(), { inside: n33, direction: r24, position: i27 } = this.getLegend(), a22 = ["n", "s", "e", "w"].includes(i27) ? "center" : i27 === "nw" ? "flex-start" : i27 === "se" ? "flex-end" : i27 === "ne" ? r24 === "horizontal" ? "flex-end" : "flex-start" : r24 === "vertical" ? "flex-end" : "flex-start", o13 = (() => {
      if (!n33)
        return {};
      const s18 = {
        alignItems: "center"
      };
      return i27.includes("n") ? s18.top = `${e11.top}px` : i27.includes("s") && (s18.bottom = `${e11.bottom}px`), i27.includes("w") ? s18.left = `${e11.left}px` : i27.includes("e") && (s18.right = `${e11.right}px`), ["n", "s", "e", "w"].includes(i27) && (s18.justifyContent = "center"), ["n", "s"].includes(i27) && (s18.left = "0", s18.right = "0"), ["e", "w"].includes(i27) && (s18.top = "0", s18.bottom = "0"), s18;
    })(), u35 = p4({
      alignSelf: a22,
      ...o13
    });
    return Ot4`
      <div
        class="legend ${n33 ? "inside" : "outside"} ${r24 === "horizontal" ? "horizontal" : "vertical"}"
        style=${u35}
      >
        ${this.data.map(
      ({ color: s18, displayName: g32 }) => Ot4`
            <div class="legend-item">
              <div
                class="legend-item-box"
                style=${p4({
        background: s18
      })}
              ></div>
              <span class="legend-item-label">${g32}</span>
            </div>
          `
    )}
      </div>
    `;
  }
  renderChart() {
    const { margin: e11, svgWidth: n33, svgHeight: r24, width: i27, height: a22 } = this.getDimensions(), o13 = Fi2(
      i27,
      Math.round(this.viewTime * 1e3),
      this.elapsedTimeMs
    ), u35 = this.getYScales().filter(
      ({ chartAxis: s18 }) => !s18.hide
    ), l26 = u35.map((s18) => (h26) => R9.getPath(
      h26,
      (f40) => o13(new Date(f40.timeMs)),
      (f40) => s18.scale(f40.value)
    ));
    return Tt3`
      <svg width=${n33} height=${r24} style="position: absolute">
        <g transform="translate(${e11.left},${e11.top})">
          <defs>
            <clipPath id="clip">
              <rect width=${i27} height=${a22}></rect>
            </clipPath>
          </defs>
          <g transform="translate(0,${a22})">
            ${Yi2(o13)}
            ${Li2(o13, a22)}
          </g>
          ${this.renderScales(u35, "left")}
          ${this.renderScales(u35, "right")}
          <rect class="chart-border" width=${i27} height=${a22}></rect>
          ${this.data.filter(
      ({ hide: s18, yAxis: g32 }) => !s18 && g32 < u35.length && g32 >= 0
    ).map(
      (s18) => Tt3`
            <g clip-path="url(#clip)">
              <path 
                class="data-path"
                ${wt6((g32) => {
        const h26 = Ei2(g32), f40 = l26[s18.yAxis](s18.data);
        h26.attr("class", "line").attr("stroke", s18.color).attr("d", f40);
      })}>
              ></path>
            </g>
          `
    )}
        </g>
      </svg>
    `;
  }
  renderScales(e11, n33) {
    const { width: r24 } = this.getDimensions();
    return Tt3`
     ${e11.filter((i27) => i27.chartAxis.side === n33).map((i27, a22) => {
      const o13 = i27.chartAxis.side === "left" ? -a22 * 25 : r24;
      return Tt3`
              <g 
                class="axis axis--y" 
                transform="translate(${o13}, 0)"
                ${wt6((u35) => {
        (i27.chartAxis.side === "left" ? ye4 : Ln4)(i27.scale)(Ei2(u35));
      })}>
              </g>
              ${i27.chartAxis.hideGridLines ? "" : Tt3`
                    <g 
                      class="axis-y-grid" 
                      ${wt6((u35) => {
        ye4(i27.scale).tickSize(-r24).tickFormat("")(Ei2(u35));
      })}>
                    </g> 
                  `}
            `;
    })}
    `;
  }
}, R9.styles = Ut3`
    :host {
      display: inline-block;
      width: 700px;
      height: 400px;
      color: var(--frc-line-chart-text-color, black);
    }

    .chart-and-header {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .chart-and-header header {
      font-size: 18px;
      font-family: sans-serif;
      margin: 3px 0;
    }

    .chart-and-legend {
      flex: 1;
      width: 100%;
      position: relative;
    }

    .legend-container {
      position: relative;
    }

    .legend {
      display: flex;
      z-index: 100;
    }

    .legend.outside {
      position: relative;
    }

    .legend.inside {
      position: absolute;
    }

    .legend-item {
      display: flex;
      flex-wrap: no-wrap;
      gap: 5px;
      align-items: center;
      padding: 5px;
    }

    .legend.horizontal {
      flex-direction: row;
    }

    .legend.vertical {
      flex-direction: column;
    }

    .legend-item-box {
      width: 15px;
      height: 15px;
    }

    .legend-item-label {
      font-family: sans-serif;
      font-size: 15px;
    }

    .line {
      fill: none;
      stroke-width: 1.5px;
    }

    .chart-border {
      fill: none;
      stroke-width: 1;
      stroke: var(--frc-line-chart-border-color, black);
    }

    .axis-x-grid line,
    .axis-y-grid line {
      stroke: var(--frc-line-chart-grid-color, #eee);
    }

    .axis--y {
      font-family: monospace;
    }

    svg {
      overflow: visible;
    }
  `, R9);
it9([
  Mt4({ type: Number, attribute: "view-time" })
], Q6.prototype, "viewTime");
it9([
  Mt4({ type: String, attribute: "chart-title", reflect: true })
], Q6.prototype, "chartTitle");
it9([
  n7()
], Q6.prototype, "data");
it9([
  h4(".data-path")
], Q6.prototype, "path");
it9([
  h4("svg")
], Q6.prototype, "svg");
it9([
  h4(".axis--x")
], Q6.prototype, "xAxis");
it9([
  h4(".chart-container")
], Q6.prototype, "chartContainer");
var Pi2 = Q6;
customElements.get("frc-line-chart") || customElements.define("frc-line-chart", Pi2);
var zi2 = Object.defineProperty;
var J7 = (t19, e11, n33, r24) => {
  for (var i27 = void 0, a22 = t19.length - 1, o13; a22 >= 0; a22--)
    (o13 = t19[a22]) && (i27 = o13(e11, n33, i27) || i27);
  return i27 && zi2(e11, n33, i27), i27;
};
var Z6 = class extends H4 {
  constructor() {
    super(...arguments), this.min = -1, this.max = 1, this.lockMin = false, this.lockMax = false, this.invert = false, this.side = "left", this.hideGridLines = false, this.hide = false;
  }
};
J7([
  Mt4({ type: Number })
], Z6.prototype, "min");
J7([
  Mt4({ type: Number })
], Z6.prototype, "max");
J7([
  Mt4({ type: Boolean, attribute: "lock-min" })
], Z6.prototype, "lockMin");
J7([
  Mt4({ type: Boolean, attribute: "lock-max" })
], Z6.prototype, "lockMax");
J7([
  Mt4({ type: Boolean })
], Z6.prototype, "invert");
J7([
  Mt4({ type: String, reflect: true })
], Z6.prototype, "side");
J7([
  Mt4({ type: Boolean, attribute: "hide-grid-lines" })
], Z6.prototype, "hideGridLines");
J7([
  Mt4({ type: Boolean })
], Z6.prototype, "hide");
customElements.get("frc-line-chart-axis") || customElements.define("frc-line-chart-axis", Z6);
var Oi2 = Object.defineProperty;
var It3 = (t19, e11, n33, r24) => {
  for (var i27 = void 0, a22 = t19.length - 1, o13; a22 >= 0; a22--)
    (o13 = t19[a22]) && (i27 = o13(e11, n33, i27) || i27);
  return i27 && Oi2(e11, n33, i27), i27;
};
var Ii2 = [
  "nw",
  "n",
  "ne",
  "w",
  "e",
  "sw",
  "s",
  "se"
];
var kt4 = class extends H4 {
  constructor() {
    super(...arguments), this.position = "n", this.direction = "horizontal", this.hide = false, this.inside = false;
  }
};
It3([
  Mt4({ type: String })
], kt4.prototype, "position");
It3([
  Mt4({ type: String })
], kt4.prototype, "direction");
It3([
  Mt4({ type: Boolean })
], kt4.prototype, "hide");
It3([
  Mt4({ type: Boolean })
], kt4.prototype, "inside");
customElements.get("frc-line-chart-legend") || customElements.define("frc-line-chart-legend", kt4);
var Ei4 = {
  dashboard: {
    displayName: (t19) => (t19 == null ? void 0 : t19.getAttribute("chart-title")) || "Line Chart",
    defaultHtml: `
      <frc-line-chart chart-title="Line Chart">
        <frc-line-chart-legend></frc-line-chart-legend>
        <frc-line-chart-axis side="left"></frc-line-chart-axis>
        <frc-line-chart-axis side="right"></frc-line-chart-axis>
        <frc-line-chart-data></frc-line-chart-data>
      </frc-line-chart>
    `
  },
  description: "A component used to graph data over time.",
  properties: {
    chartTitle: { type: "String", attribute: "chart-title", reflect: true },
    viewTime: { type: "Number", attribute: "view-time", defaultValue: 10 }
  },
  slots: [
    {
      name: "",
      allowedChildren: [
        "frc-line-chart-data",
        "frc-line-chart-axis",
        "frc-line-chart-legend"
      ]
    }
  ]
};
var Vi = {
  dashboard: {
    topLevel: false,
    displayName: (t19) => t19 ? `Chart Axis (${t19.getAttribute("side") || "left"})` : "Line Chart Axis"
  },
  properties: {
    min: { type: "Number", defaultValue: -1 },
    max: { type: "Number", defaultValue: 1 },
    lockMin: { type: "Boolean", attribute: "lock-min" },
    lockMax: { type: "Boolean", attribute: "lock-max" },
    invert: { type: "Boolean" },
    side: {
      type: "String",
      defaultValue: "left",
      reflect: true,
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["left", "right"];
        }
      }
    },
    hideGridLines: { type: "Boolean", attribute: "hide-grid-lines" },
    hide: { type: "Boolean" }
  }
};
var Bi = {
  dashboard: {
    topLevel: false,
    displayName: (t19) => {
      if (!t19)
        return "Line Chart Data";
      const r24 = [...t19.parentElement.children].filter(
        (a22) => a22.tagName.toLowerCase() === "frc-line-chart-data"
      ).indexOf(t19);
      return t19.getAttribute("display-name") || `Data ${r24}`;
    }
  },
  properties: {
    value: { type: "Number", primary: true },
    color: { type: "String", input: { type: "ColorPicker" } },
    hide: { type: "Boolean" },
    yAxis: { type: "Number", attribute: "y-axis" },
    displayName: { type: "String", attribute: "display-name", reflect: true }
  }
};
var Ri2 = {
  dashboard: {
    topLevel: false,
    displayName: "Chart Legend"
  },
  properties: {
    position: {
      type: "String",
      defaultValue: "n",
      input: {
        type: "StringDropdown",
        getOptions: () => Ii2
      }
    },
    direction: {
      type: "String",
      defaultValue: "horizontal",
      input: {
        type: "StringDropdown",
        getOptions: () => ["horizontal", "vertical"]
      }
    },
    hide: { type: "Boolean" },
    inside: { type: "Boolean" }
  }
};
var Ki2 = {
  "frc-line-chart": Ei4,
  "frc-line-chart-axis": Vi,
  "frc-line-chart-data": Bi,
  "frc-line-chart-legend": Ri2
};

// node_modules/@frc-web-components/fwc/dist/components/voltage-view.es.js
var y12 = Object.getPrototypeOf;
var l10 = Reflect.get;
var m11 = (a22, p26, o13) => l10(y12(a22), o13, p26);
var c5 = Object.defineProperty;
var r10 = (a22, p26, o13, d34) => {
  for (var i27 = void 0, s18 = a22.length - 1, n33; s18 >= 0; s18--)
    (n33 = a22[s18]) && (i27 = n33(p26, o13, i27) || i27);
  return i27 && c5(p26, o13, i27), i27;
};
var k9 = {
  dashboard: {
    displayName: "Voltage View"
  },
  properties: {
    value: { type: "Number" },
    max: { type: "Number", defaultValue: 5 },
    min: { type: "Number" },
    center: { type: "Number" },
    precision: { type: "Number", defaultValue: 2 },
    hideText: { type: "Boolean", attribute: "hide-text" },
    numTickMarks: {
      type: "Number",
      defaultValue: 3,
      attribute: "num-tick-marks"
    },
    unit: { type: "String", defaultValue: "V" }
  }
};
var u5 = class u6 extends t7 {
  constructor() {
    super(...arguments), this.value = 0, this.min = 0, this.max = 5, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "V";
  }
};
u5.styles = [
  ...m11(u5, u5, "styles"),
  Ut3`
      [part='bar']::part(foreground) {
        background: var(--frc-voltage-view-foreground-color, #ffbd2f);
      }
    `
];
var e5 = u5;
r10([
  Mt4({ type: Number })
], e5.prototype, "value");
r10([
  Mt4({ type: Number })
], e5.prototype, "min");
r10([
  Mt4({ type: Number })
], e5.prototype, "max");
r10([
  Mt4({ type: Number })
], e5.prototype, "center");
r10([
  Mt4({ type: Number })
], e5.prototype, "precision");
r10([
  Mt4({ type: Boolean, attribute: "hide-text" })
], e5.prototype, "hideText");
r10([
  Mt4({ type: Number, attribute: "num-tick-marks" })
], e5.prototype, "numTickMarks");
r10([
  Mt4({ type: String })
], e5.prototype, "unit");
customElements.get("frc-voltage-view") || customElements.define("frc-voltage-view", e5);

// node_modules/@frc-web-components/fwc/dist/components/pdp.es.js
var d10 = Object.defineProperty;
var p5 = (n33, t19, r24, o13) => {
  for (var e11 = void 0, s18 = n33.length - 1, m34; s18 >= 0; s18--)
    (m34 = n33[s18]) && (e11 = m34(t19, r24, e11) || e11);
  return e11 && d10(t19, r24, e11), e11;
};
function i10(n33, t19) {
  const r24 = [];
  for (let o13 = n33; o13 < t19; o13 += 1)
    r24.push(o13);
  return r24;
}
var u7 = class u8 extends H4 {
  constructor() {
    super(...arguments), this.voltage = 0, this.totalCurrent = 0, this.channels = Array(16).fill(0);
  }
  renderChannel(t19) {
    return Ot4`
      <frc-number-bar
        class="channel"
        part="channel"
        value=${this.channels[t19] ?? 0}
        min="0"
        max="40"
        center="0"
        precision="2"
        ?hide-text="${false}"
        num-tick-marks="0"
        unit="A"
      ></frc-number-bar>
    `;
  }
  render() {
    return Ot4`
      <div part="channels">
        ${i10(0, 8).map(
      (t19) => Ot4`
            <label part="channel-label">
              <slot name="${`channel-label${t19}`}">Ch. ${t19}</slot>
            </label>
          `
    )}
        ${i10(0, 8).map((t19) => Ot4` ${this.renderChannel(t19)} `)}
        ${i10(8, 16).map(
      (t19) => Ot4`
            <label part="channel-label">
              <slot name="${`channel-label${t19}`}">Ch. ${t19}</slot>
            </label>
          `
    )}
        ${i10(8, 16).map(
      (t19) => Ot4` ${this.renderChannel(t19)} `
    )}
      </div>
      <div part="voltage-and-total-current">
        <label part="voltage-label">
          <slot name="voltage-label">Voltage</slot>
        </label>
        <label part="total-current-label">
          <slot name="total-current">Total Current</slot>
        </label>
        <frc-voltage-view
          class="voltage"
          part="voltage"
          value="${this.voltage}"
          min="0"
          max="15"
          center="0"
          precision="2"
          ?hide-text="${false}"
          num-tick-marks="0"
        ></frc-voltage-view>
        <frc-number-bar
          class="total-current"
          part="total-current"
          value="${this.totalCurrent}"
          min="0"
          max="500"
          center="0"
          precision="2"
          ?hide-text="${false}"
          num-tick-marks="0"
          unit="A"
        ></frc-number-bar>
      </div>
    `;
  }
};
u7.styles = Ut3`
    :host {
      display: inline-block;
      width: 350px;
      margin: 5px;
      color: var(--frc-label-text-color, black);
      font-family: sans-serif;
      font-size: 16px;
    }

    [part='channels'] {
      display: grid;
      grid-auto-flow: column;
      grid-template-columns: min-content 1fr min-content 1fr;
      grid-template-rows: auto auto auto auto auto auto auto auto;
      width: 100%;
      height: auto;
      align-items: center;
      gap: 3px;
    }

    .channel,
    .voltage,
    .total-current {
      width: auto;
    }

    [part='channel-label'] {
      padding-left: 5px;
      text-align: right;
      white-space: nowrap;
    }

    [part='voltage-and-total-current'] {
      margin-top: 5px;
      display: grid;
      grid-auto-flow: column;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto;
      column-gap: 10px;
      width: 100%;
      height: auto;
      align-items: center;
      gap: 3px;
    }

    [part='voltage-and-total-current'] {
      white-space: nowrap;
    }
  `;
var l11 = u7;
p5([
  Mt4({ type: Number })
], l11.prototype, "voltage");
p5([
  Mt4({ type: Number, attribute: "total-current" })
], l11.prototype, "totalCurrent");
p5([
  Mt4({ type: Array })
], l11.prototype, "channels");
customElements.get("frc-pdp") || customElements.define("frc-pdp", l11);

// node_modules/@frc-web-components/fwc/dist/components/number-slider.es.js
var h7 = (t19) => {
  throw TypeError(t19);
};
var x12 = (t19, i27, e11) => i27.has(t19) || h7("Cannot " + e11);
var p6 = (t19, i27, e11) => i27.has(t19) ? h7("Cannot add the same private member more than once") : i27 instanceof WeakSet ? i27.add(t19) : i27.set(t19, e11);
var d11 = (t19, i27, e11) => (x12(t19, i27, "access private method"), e11);
var g9 = Object.defineProperty;
var m12 = (t19, i27, e11, n33) => {
  for (var a22 = void 0, o13 = t19.length - 1, c27; o13 >= 0; o13--)
    (c27 = t19[o13]) && (a22 = c27(i27, e11, a22) || a22);
  return a22 && g9(i27, e11, a22), a22;
};
var $8 = {
  dashboard: {
    displayName: "Number Slider"
  },
  properties: {
    value: { type: "Number", primary: true, changeEvent: "change" },
    min: { type: "Number", defaultValue: -1 },
    max: { type: "Number", defaultValue: 1 },
    blockIncrement: {
      type: "Number",
      attribute: "block-increment",
      defaultValue: 0.05
    }
  }
};
var s6;
var b12;
var u9 = class u10 extends H4 {
  constructor() {
    super(...arguments);
    p6(this, s6);
    this.value = 0, this.min = -1, this.max = 1, this.blockIncrement = 0.05;
  }
  onChange(e11) {
    this.value = parseFloat(e11.target.value), d11(this, s6, b12).call(this);
  }
  firstUpdated() {
    setTimeout(() => {
      const e11 = this.renderRoot.querySelector("#slider");
      e11 && (e11.value = this.value);
    });
  }
  render() {
    const e11 = Math.min(this.min, this.max), n33 = Math.max(this.min, this.max), a22 = Math.max(e11, Math.min(this.value, n33));
    return Ot4`
      <div class="slider-container">
        <input
          id="slider"
          type="range"
          .value="${a22.toString()}"
          min="${e11}"
          max="${n33}"
          step="${this.blockIncrement}"
          @change="${this.onChange}"
        />

        <frc-axis ticks="5" min=${e11} max=${n33}></frc-axis>
      </div>
    `;
  }
};
s6 = /* @__PURE__ */ new WeakSet(), b12 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: { value: this.value },
      bubbles: true,
      composed: true
    })
  );
}, u9.styles = Ut3`
    :host {
      display: inline-block;
      height: 50px;
      width: 300px;
    }

    .slider-container {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 15px;
    }

    input {
      width: 100%;
    }

    table-axis {
      width: calc(85% - 14px);
      max-width: calc(100% - 74px);
      display: block;
    }
  `;
var r11 = u9;
m12([
  Mt4({ type: Number })
], r11.prototype, "value");
m12([
  Mt4({ type: Number })
], r11.prototype, "min");
m12([
  Mt4({ type: Number })
], r11.prototype, "max");
m12([
  Mt4({ type: Number, attribute: "block-increment" })
], r11.prototype, "blockIncrement");
customElements.get("frc-number-slider") || customElements.define("frc-number-slider", r11);

// node_modules/@frc-web-components/fwc/dist/components/toggle-switch.es.js
var g10 = Object.defineProperty;
var b13 = (l26, e11, i27, r24) => {
  for (var t19 = void 0, o13 = l26.length - 1, n33; o13 >= 0; o13--)
    (n33 = l26[o13]) && (t19 = n33(e11, i27, t19) || t19);
  return t19 && g10(e11, i27, t19), t19;
};
var w8 = {
  dashboard: {
    displayName: "Toggle Switch"
  },
  properties: {
    toggled: { type: "Boolean", primary: true, changeEvent: "toggle" }
  }
};
var c6 = class c7 extends H4 {
  constructor() {
    super(...arguments), this.toggled = false;
  }
  firstUpdated() {
    new ResizeObserver(() => this.resized()).observe(this);
  }
  resized() {
    const e11 = this.getBoundingClientRect(), { width: i27, height: r24 } = e11, t19 = this.renderRoot.querySelector("[part=switch]");
    t19 && (t19.style.borderRadius = `${i27}px`, t19.style.setProperty("--circle-width", `${r24 * 0.8}px`), t19.style.setProperty("--circle-height", `${r24 * 0.8}px`), t19.style.setProperty(
      "--circle-left",
      `${i27 / 2 - r24 * 0.8}px`
    ), t19.style.setProperty("--circle-top", `${r24 * 0.1}px`), t19.style.setProperty("--circle-translate-x", `${i27 - r24}px`));
  }
  onClick() {
    this.toggled = !this.toggled;
    const e11 = new CustomEvent("toggle", {
      detail: {
        toggled: this.toggled
      },
      bubbles: true,
      composed: true
    });
    this.dispatchEvent(e11);
  }
  render() {
    return Ot4`
      <label class="switch" @click="${this.onClick}">
        <input type="checkbox" .checked="${this.toggled}" disabled />
        <span part="switch">
          <span part="knob"></span>
        </span>
      </label>
    `;
  }
};
c6.styles = Ut3`
    :host {
      display: inline-block;
      width: 60px;
      height: 34px;
    }
    .switch {
      position: relative;
      display: inline-block;
      width: 100%;
      height: 100%;
      margin-bottom: 0;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    [part='switch'] {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--frc-toggle-switch-color, #ccc);
      -webkit-transition: 0.4s;
      transition: 0.4s;
    }
    [part='knob'] {
      position: absolute;
      display: inline-block;
      content: '';
      height: var(--circle-height);
      width: var(--circle-width);
      left: var(--circle-top);
      top: var(--circle-top);
      background-color: white;
      -webkit-transition: 0.4s;
      transition: 0.4s;
      border-radius: 50%;
    }
    input:checked + [part='switch'] {
      background-color: #2196f3;
    }
    input:focus + [part='switch'] {
      box-shadow: 0 0 1px #2196f3;
    }
    input:checked + [part='switch'] [part='knob'] {
      transform: translateX(var(--circle-translate-x));
    }
  `;
var s7 = c6;
b13([
  Mt4({ type: Boolean })
], s7.prototype, "toggled");
customElements.get("frc-toggle-switch") || customElements.define("frc-toggle-switch", s7);

// node_modules/@frc-web-components/fwc/dist/components/toggle-button.es.js
var b14 = Object.defineProperty;
var r12 = (n33, s18, a22, f40) => {
  for (var t19 = void 0, o13 = n33.length - 1, g32; o13 >= 0; o13--)
    (g32 = n33[o13]) && (t19 = g32(s18, a22, t19) || t19);
  return t19 && b14(s18, a22, t19), t19;
};
var h8 = {
  dashboard: {
    displayName: "Toggle Button"
  },
  properties: {
    toggled: {
      type: "Boolean",
      defaultValue: false,
      primary: true,
      changeEvent: "toggle"
    },
    label: { type: "String", defaultValue: "Button" }
  }
};
var i11 = class i12 extends H4 {
  constructor() {
    super(...arguments), this.toggled = false, this.disabled = false, this.label = "Button";
  }
  onClick() {
    this.disabled || (this.toggled = !this.toggled, this.dispatchEvent(
      new CustomEvent("toggle", {
        detail: {
          toggled: this.toggled
        },
        bubbles: true,
        composed: true
      })
    ));
  }
  render() {
    return Ot4`
      <button class="${this.toggled ? "toggled" : ""}" @click="${this.onClick}">
        ${this.label}
      </button>
    `;
  }
};
i11.styles = Ut3`
    :host {
      display: inline-block;
      width: 100px;
      height: 50px;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    button {
      width: 100%;
      height: 100%;
      margin: 0;
      border: none;
      border-radius: 4px;
      font-size: inherit;
      font-family: inherit;
      letter-spacing: inherit;
      background: var(--frc-button-background-color, rgb(230, 230, 230));
      color: var(--frc-button-text-color, black);
    }

    .toggled {
      background: var(--frc-button-toggled-background-color, black);
      color: var(--frc-button-toggled-text-color, white);
      font-weight: bold;
    }
  `;
var e6 = i11;
r12([
  Mt4({ type: Boolean })
], e6.prototype, "toggled");
r12([
  Mt4({ type: Boolean })
], e6.prototype, "disabled");
r12([
  Mt4({ type: String })
], e6.prototype, "label");
customElements.get("frc-toggle-button") || customElements.define("frc-toggle-button", e6);

// node_modules/@frc-web-components/fwc/dist/components/toggle-group.es.js
var d12 = (e11) => {
  throw TypeError(e11);
};
var b15 = (e11, i27, t19) => i27.has(e11) || d12("Cannot " + t19);
var h9 = (e11, i27, t19) => i27.has(e11) ? d12("Cannot add the same private member more than once") : i27 instanceof WeakSet ? i27.add(e11) : i27.set(e11, t19);
var a10 = (e11, i27, t19) => (b15(e11, i27, "access private method"), t19);
var x13 = Object.defineProperty;
var p7 = (e11, i27, t19, w31) => {
  for (var o13 = void 0, s18 = e11.length - 1, c27; s18 >= 0; s18--)
    (c27 = e11[s18]) && (o13 = c27(i27, t19, o13) || o13);
  return o13 && x13(i27, t19, o13), o13;
};
var k10 = {
  dashboard: {
    displayName: "Toggle Group"
  },
  properties: {
    options: {
      type: "Array",
      changeEvent: "optionsUpdate",
      defaultValue: ["On", "Off"],
      input: { type: "StringArray" }
    },
    value: {
      primary: true,
      type: "String",
      changeEvent: "change",
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions({ options: e11 }) {
          return e11;
        }
      }
    },
    direction: {
      type: "String",
      defaultValue: "vertical",
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["vertical", "horizontal"];
        }
      }
    }
  }
};
var n13;
var f13;
var v12;
var u11 = class u12 extends H4 {
  constructor() {
    super(...arguments);
    h9(this, n13);
    this.options = ["On", "Off"], this.value = "", this.direction = "vertical";
  }
  async setValue(t19) {
    this.value = t19;
  }
  updated(t19) {
    t19.has("options") && !this.options.includes(this.value) && (this.value = this.options[0] ?? ""), t19.has("value") && a10(this, n13, f13).call(this), t19.has("options") && a10(this, n13, v12).call(this), t19.has("direction") && this.style.setProperty(
      "flex-direction",
      this.direction === "vertical" ? "column" : "row"
    );
  }
  render() {
    return Ot4`
      ${this.options.map(
      (t19) => Ot4`
          <button
            class="${this.value === t19 ? "toggled" : ""}"
            @click="${() => this.setValue(t19)}"
          >
            ${t19}
          </button>
        `
    )}
    `;
  }
};
n13 = /* @__PURE__ */ new WeakSet(), f13 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: { value: this.value },
      bubbles: true,
      composed: true
    })
  );
}, v12 = function() {
  this.dispatchEvent(
    new CustomEvent("optionsUpdate", {
      detail: { options: this.options },
      bubbles: true,
      composed: true
    })
  );
}, u11.styles = Ut3`
    :host {
      display: inline-flex;
      flex-direction: column;
      width: 150px;
      height: 300px;
      gap: 0;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    button {
      width: 100%;
      height: 100%;
      margin: 0;
      border: none;
      font-size: inherit;
      font-family: inherit;
      letter-spacing: inherit;
      background: var(--frc-button-background-color, rgb(230, 230, 230));
      color: var(--frc-button-text-color, black);
      flex: 1;
    }

    .toggled {
      background: var(--frc-button-toggled-background-color, black);
      color: var(--frc-button-toggled-text-color, white);
      font-weight: bold;
    }

    [part='button'] {
      border-radius: 0;
      margin: 0;
      flex: 1;
      font-size: inherit;
      height: 100%;
      padding: 0;
    }
  `;
var r13 = u11;
p7([
  Mt4({ type: Array })
], r13.prototype, "options");
p7([
  Mt4({ type: String })
], r13.prototype, "value");
p7([
  Mt4({ type: String })
], r13.prototype, "direction");
customElements.get("frc-toggle-group") || customElements.define("frc-toggle-group", r13);

// node_modules/@frc-web-components/fwc/dist/components/relay.es.js
var p8 = (e11) => {
  throw TypeError(e11);
};
var h10 = (e11, t19, r24) => t19.has(e11) || p8("Cannot " + r24);
var u13 = (e11, t19, r24) => t19.has(e11) ? p8("Cannot add the same private member more than once") : t19 instanceof WeakSet ? t19.add(e11) : t19.set(e11, r24);
var f14 = (e11, t19, r24) => (h10(e11, t19, "access private method"), r24);
var O7 = Object.defineProperty;
var c8 = (e11, t19, r24, x36) => {
  for (var i27 = void 0, a22 = e11.length - 1, l26; a22 >= 0; a22--)
    (l26 = e11[a22]) && (i27 = l26(t19, r24, i27) || i27);
  return i27 && O7(t19, r24, i27), i27;
};
var _7 = {
  dashboard: {
    displayName: "Relay"
  },
  properties: {
    value: {
      type: "String",
      defaultValue: "Off",
      reflect: true,
      primary: true,
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["Off", "On", "Forward", "Reverse"];
        }
      }
    }
  }
};
var w9 = ["Off", "On", "Forward", "Reverse"];
var s8;
var g11;
var n14 = class n15 extends H4 {
  constructor() {
    super(...arguments);
    u13(this, s8);
    this.value = "Off", this.direction = "vertical";
  }
  render() {
    return Ot4`
      <frc-toggle-group
        @change=${f14(this, s8, g11)}
        .options=${w9}
        value=${this.value}
        direction=${this.direction}
      ></frc-toggle-group>
    `;
  }
};
s8 = /* @__PURE__ */ new WeakSet(), g11 = function(r24) {
  this.value = r24.detail.value;
}, n14.styles = Ut3`
    :host {
      display: inline-block;
      width: 150px;
      height: 300px;
    }

    frc-toggle-group {
      width: 100%;
      height: 100%;
    }
  `;
var o6 = n14;
c8([
  Mt4({ type: String })
], o6.prototype, "value");
c8([
  Mt4({ type: String })
], o6.prototype, "direction");
customElements.get("frc-relay") || customElements.define("frc-relay", o6);

// node_modules/@frc-web-components/fwc/dist/wrapper-BBKTpE7c.js
var k11 = Object.defineProperty;
var c9 = (i27, e11, r24, n33) => {
  for (var t19 = void 0, s18 = i27.length - 1, o13; s18 >= 0; s18--)
    (o13 = i27[s18]) && (t19 = o13(e11, r24, t19) || t19);
  return t19 && k11(e11, r24, t19), t19;
};
function C10(i27) {
  const e11 = (i27 == null ? void 0 : i27.getChildren()) ?? {};
  return Object.values(e11).filter(
    (t19) => {
      var s18;
      return t19.hasChildren() && ((s18 = t19.getChildren()[".type"]) == null ? void 0 : s18.getSourceValue()) === "line";
    }
  ).map((t19) => {
    const s18 = t19.getChildren();
    return {
      angle: s18.angle.getSourceValue() ?? 0,
      color: s18.color.getSourceValue() ?? "#ffffff",
      length: s18.length.getSourceValue() ?? 1,
      weight: s18.weight.getSourceValue() ?? 1,
      children: C10(t19)
    };
  });
}
function w10(i27) {
  const e11 = (i27 == null ? void 0 : i27.getChildren()) ?? {};
  return Object.values(e11).filter(
    (t19) => t19.hasChildren()
  ).map((t19) => ({
    x: t19.getChildren().x.getSourceValue() ?? 0,
    y: t19.getChildren().y.getSourceValue() ?? 0,
    children: C10(t19)
  }));
}
var p9 = class p10 extends H4 {
  constructor() {
    super(...arguments), this.backgroundColor = "#000020", this.dims = [3, 3], this.roots = [], this.mechanism2d = this.getMechanism2d();
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.resized();
    }).observe(this), requestAnimationFrame(() => {
      this.updateMechanism2d();
    });
  }
  getMech2dSize() {
    const { width: e11, height: r24 } = this.getBoundingClientRect(), [n33, t19] = this.dims;
    return t19 / n33 * e11 < r24 ? [e11, t19 / n33 * e11] : [n33 / t19 * r24, r24];
  }
  resized() {
    this.requestUpdate();
  }
  getSize() {
    const { width: e11 } = this.getBoundingClientRect();
    return e11;
  }
  updated(e11) {
    e11.has("backgroundColor") && this._svg.style.setProperty("background-color", this.backgroundColor), e11.has("dims") && this.requestUpdate();
  }
  updateMechanism2d() {
    this.mechanism2d = this.getMechanism2d(), requestAnimationFrame(() => {
      this.updateMechanism2d();
    });
  }
  getMechanism2d() {
    return {
      backgroundColor: this.backgroundColor,
      dims: this.dims,
      roots: this.roots
    };
  }
  render() {
    const [e11, r24] = this.getMech2dSize();
    return Tt3`
      <svg
        style="width: ${e11}px; height: ${r24}px; background: ${this.mechanism2d.backgroundColor}"
      >
        ${this.mechanism2d.roots.map(
      (n33) => this.renderMechanism2dRoot(n33)
    )}
      </svg>
    `;
  }
  renderMechanism2dRoot(e11) {
    const [r24, n33] = this.dims, [t19, s18] = this.getMech2dSize(), o13 = e11.x / r24 * t19, l26 = e11.y / n33 * s18;
    return Tt3`
      <g style="transform: translate(${o13}px, ${s18 - l26}px)">
        ${e11.children.map((g32) => this.renderMechanism2dLine(g32))}
      </g>
    `;
  }
  renderMechanism2dLine(e11) {
    const [r24] = this.dims, [n33] = this.getMech2dSize(), t19 = n33 / r24 * e11.length, s18 = e11.angle * Math.PI / 180, o13 = Math.cos(s18) * t19, l26 = -Math.sin(s18) * t19, g32 = Math.max(1, e11.weight * 2 / 3);
    return Tt3`
      <line stroke=${e11.color} stroke-width=${g32} x1="0" y1="0" x2="${o13}px" y2="${l26}px"  />
      <g style="transform: translate(${o13}px, ${l26}px) rotate(${-e11.angle}deg)">
        ${e11.children.map((x36) => this.renderMechanism2dLine(x36))}
      </g>
    `;
  }
};
p9.styles = Ut3`
    :host {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 300px;
      height: 300px;
    }

    svg {
      width: 100%;
      height: 100%;
    }
  `;
var h11 = p9;
c9([
  Mt4({ type: String, attribute: "background-color" })
], h11.prototype, "backgroundColor");
c9([
  Mt4({ type: Array })
], h11.prototype, "dims");
c9([
  Mt4({ type: Array })
], h11.prototype, "roots");
c9([
  h4("svg")
], h11.prototype, "_svg");
c9([
  n7()
], h11.prototype, "mechanism2d");
customElements.get("frc-mechanism2d") || customElements.define("frc-mechanism2d", h11);
var S10 = Object.defineProperty;
var m13 = (i27, e11, r24, n33) => {
  for (var t19 = void 0, s18 = i27.length - 1, o13; s18 >= 0; s18--)
    (o13 = i27[s18]) && (t19 = o13(e11, r24, t19) || t19);
  return t19 && S10(e11, r24, t19), t19;
};
var O8 = {
  dashboard: {
    displayName: "Mechanism2d"
  },
  properties: {
    backgroundColor: {
      type: "String",
      attribute: "background-color",
      defaultValue: "#000020",
      input: { type: "ColorPicker" }
    },
    dims: {
      type: "Array",
      defaultValue: [3, 3],
      input: { type: "NumberArray" }
    },
    source: { type: "Source", primary: true, input: { type: "None" } }
  }
};
var f15 = class f16 extends H4 {
  constructor() {
    super(...arguments), this.backgroundColor = "#000020", this.dims = [3, 3], this.roots = [];
  }
  updateMechanism2d() {
    this.roots = this.source ? w10(this.source) : [], requestAnimationFrame(() => {
      this.updateMechanism2d();
    });
  }
  firstUpdated() {
    this.updateMechanism2d();
  }
  render() {
    return Ot4`
      <frc-mechanism2d
        .roots=${this.roots}
        .backgroundColor=${this.backgroundColor}
        .dims=${this.dims}
      ></frc-mechanism2d>
    `;
  }
};
f15.styles = Ut3`
    :host {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 300px;
      height: 300px;
    }

    frc-mechanism2d {
      width: 100%;
      height: 100%;
    }
  `;
var a11 = f15;
m13([
  Mt4({ type: String, attribute: "background-color" })
], a11.prototype, "backgroundColor");
m13([
  Mt4({ type: Array })
], a11.prototype, "dims");
m13([
  Mt4({ type: Object })
], a11.prototype, "source");
m13([
  n7()
], a11.prototype, "roots");
customElements.get("frc-mechanism2d-wrapper") || customElements.define("frc-mechanism2d-wrapper", a11);

// node_modules/@frc-web-components/fwc/dist/components/encoder.es.js
var m14 = Object.defineProperty;
var d13 = (a22, o13, n33, f40) => {
  for (var e11 = void 0, s18 = a22.length - 1, l26; s18 >= 0; s18--)
    (l26 = a22[s18]) && (e11 = l26(o13, n33, e11) || e11);
  return e11 && m14(o13, n33, e11), e11;
};
var h12 = {
  dashboard: {
    displayName: "Encoder"
  },
  properties: {
    distance: { type: "Number" },
    speed: { type: "Number" }
  }
};
var t11 = class t12 extends H4 {
  constructor() {
    super(...arguments), this.distance = 0, this.speed = 0;
  }
  render() {
    return Ot4`
      <label class="distance-label">Distance</label>
      <span>${this.distance}</span>
      <label class="speed-label">Speed</label>
      <span>${this.speed}</span>
    `;
  }
};
t11.styles = Ut3`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: 50% 50%;
      column-gap: 15px;
      row-gap: 5px;
      align-items: center;
      width: 250px;
      font-family: sans-serif;
    }

    label {
      font-weight: bold;
      text-align: right;
      color: var(--frc-encoder-label-color, #000);
    }

    span {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      padding: 5px;
      border: 1px dashed;
      border-color: var(--frc-encoder-value-color, #666);
      color: var(--frc-encoder-value-color, #666);
      border-radius: 3px;
      box-sizing: border-box;
    }
  `;
var r14 = t11;
d13([
  Mt4({ type: Number })
], r14.prototype, "distance");
d13([
  Mt4({ type: Number })
], r14.prototype, "speed");
customElements.get("frc-encoder") || customElements.define("frc-encoder", r14);

// node_modules/@frc-web-components/fwc/dist/when-CDK1Tt5Y.js
function o7(r24, n33, e11) {
  return r24 ? n33(r24) : e11 == null ? void 0 : e11(r24);
}

// node_modules/@frc-web-components/fwc/dist/components/network-alerts.es.js
var v13 = Object.defineProperty;
var l12 = (c27, e11, d34, g32) => {
  for (var i27 = void 0, s18 = c27.length - 1, p26; s18 >= 0; s18--)
    (p26 = c27[s18]) && (i27 = p26(e11, d34, i27) || i27);
  return i27 && v13(e11, d34, i27), i27;
};
var u14 = {
  dashboard: {
    displayName: "Network Alerts"
  },
  properties: {
    errors: { type: "Array" },
    warnings: { type: "Array" },
    infos: { type: "Array" },
    level: {
      type: "String",
      defaultValue: "info",
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["error", "warning", "info"];
        }
      }
    },
    hideTitle: { type: "Boolean", attribute: "hide-title" }
  }
};
var q7 = "m40-120 440-760 440 760H40Zm138-80h604L480-720 178-200Zm302-40q17 0 28.5-11.5T520-280q0-17-11.5-28.5T480-320q-17 0-28.5 11.5T440-280q0 17 11.5 28.5T480-240Zm-40-120h80v-200h-80v200Zm40-100Z";
var m15 = "M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z";
var T11 = "M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z";
var n16 = class n17 extends H4 {
  constructor() {
    super(...arguments), this.errors = [], this.warnings = [], this.infos = [], this.level = "info", this.hideTitle = false;
  }
  render() {
    return Ot4`
      <div class="alerts-container">
        ${o7(!this.hideTitle, () => Ot4` <header>Alerts</header> `)}
        <div class="alerts-list">
          ${this.errors.map(
      (e11) => Ot4`
              <div class="alert">
                <div class="icon">
                  <frc-icon
                    color="red"
                    svg-path=${m15}
                    view-box="0 -960 960 960"
                  ></frc-icon>
                </div>
                <label>${e11}</label>
              </div>
            `
    )}
          ${o7(
      this.level !== "error",
      () => Ot4`
              ${this.warnings.map(
        (e11) => Ot4`
                  <div class="alert">
                    <div class="icon">
                      <frc-icon
                        color="yellow"
                        svg-path=${q7}
                        view-box="0 -960 960 960"
                      ></frc-icon>
                    </div>
                    <label>${e11}</label>
                  </div>
                `
      )}
            `
    )}
          ${o7(
      this.level === "info",
      () => Ot4`
              ${this.infos.map(
        (e11) => Ot4`
                  <div class="alert">
                    <div class="icon">
                      <frc-icon
                        color="green"
                        svg-path=${T11}
                        view-box="0 -960 960 960"
                      ></frc-icon>
                    </div>
                    <label>${e11}</label>
                  </div>
                `
      )}
            `
    )}
        </div>
      </div>
    `;
  }
};
n16.styles = Ut3`
    :host {
      font-family: sans-serif;
      display: inline-block;
      width: 300px;
      height: auto;
      box-sizing: border-box;
      color: var(--frc-network-alerts-text-color, black);
    }

    .alerts-container {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    header {
      background: var(--frc-network-alerts-header-color, lightblue);
      padding: 10px 0;
      text-align: center;
      font-weight: bold;
    }

    .alerts-list {
      padding: 8px 5px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 9px;
      flex: 1;
      overflow-y: auto;
    }

    .alert {
      display: flex;
      align-items: center;
      gap: 9px;
    }

    .icon {
      width: 24px;
      height: 24px;
    }

    .alert label {
      flex: 1;
    }

    .icon frc-icon {
      width: 100%;
      height: 100%;
    }
  `;
var t13 = n16;
l12([
  Mt4({ type: Array })
], t13.prototype, "errors");
l12([
  Mt4({ type: Array })
], t13.prototype, "warnings");
l12([
  Mt4({ type: Array })
], t13.prototype, "infos");
l12([
  Mt4({ type: String })
], t13.prototype, "level");
l12([
  Mt4({ type: Boolean, attribute: "hide-title" })
], t13.prototype, "hideTitle");
customElements.get("frc-network-alerts") || customElements.define("frc-network-alerts", t13);

// node_modules/@frc-web-components/fwc/dist/components/pid.es.js
var F8 = (n33) => {
  throw TypeError(n33);
};
var I8 = (n33, t19, e11) => t19.has(n33) || F8("Cannot " + e11);
var f17 = (n33, t19, e11) => t19.has(n33) ? F8("Cannot add the same private member more than once") : t19 instanceof WeakSet ? t19.add(n33) : t19.set(n33, e11);
var r15 = (n33, t19, e11) => (I8(n33, t19, "access private method"), e11);
var P9 = Object.defineProperty;
var y13 = (n33, t19, e11, D18) => {
  for (var i27 = void 0, a22 = n33.length - 1, l26; a22 >= 0; a22--)
    (l26 = n33[a22]) && (i27 = l26(t19, e11, i27) || i27);
  return i27 && P9(t19, e11, i27), i27;
};
var G8 = {
  dashboard: {
    displayName: "PID Command"
  },
  properties: {
    p: { type: "Number", changeEvent: "change" },
    i: { type: "Number", changeEvent: "change" },
    d: { type: "Number", changeEvent: "change" },
    setpoint: { type: "Number", changeEvent: "change" },
    running: { type: "Boolean", reflect: true, changeEvent: "change" }
  }
};
var p11;
var d14;
var w11 = class w12 extends H4 {
  constructor() {
    super(...arguments);
    f17(this, p11);
    this.p = 0, this.i = 0, this.d = 0, this.setpoint = 0, this.running = false;
  }
  onPChange(e11) {
    this.p = parseFloat(e11.target.value), r15(this, p11, d14).call(this);
  }
  onIChange(e11) {
    this.i = parseFloat(e11.target.value), r15(this, p11, d14).call(this);
  }
  onDChange(e11) {
    this.d = parseFloat(e11.target.value), r15(this, p11, d14).call(this);
  }
  onSetpointChange(e11) {
    this.setpoint = parseFloat(e11.target.value), r15(this, p11, d14).call(this);
  }
  onRunningClick() {
    this.running = !this.running, r15(this, p11, d14).call(this);
  }
  render() {
    return Ot4`
      <input
        type="checkbox"
        id="running"
        .checked=${this.running}
        @click=${this.onRunningClick}
      />
      <label for="running">Running</label>
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Setpoint</label>
      <input
        type="number"
        .value=${this.setpoint}
        @change=${this.onSetpointChange}
      />
    `;
  }
};
p11 = /* @__PURE__ */ new WeakSet(), d14 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        p: this.p,
        i: this.i,
        d: this.d,
        setpoint: this.setpoint,
        running: this.running
      }
    })
  );
}, w11.styles = Ut3`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      width: 150px;
      height: auto;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input[type='number'] {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }

    input[type='checkbox'] {
      justify-self: right;
      margin: 0;
      width: 16px;
      height: 16px;
    }

    label[for='running'] {
      justify-self: left;
    }
  `;
var s9 = w11;
y13([
  Mt4({ type: Number })
], s9.prototype, "p");
y13([
  Mt4({ type: Number })
], s9.prototype, "i");
y13([
  Mt4({ type: Number })
], s9.prototype, "d");
y13([
  Mt4({ type: Number })
], s9.prototype, "setpoint");
y13([
  Mt4({ type: Boolean, reflect: true })
], s9.prototype, "running");
customElements.get("frc-pid-command") || customElements.define("frc-pid-command", s9);
var _8 = Object.defineProperty;
var v14 = (n33, t19, e11, D18) => {
  for (var i27 = void 0, a22 = n33.length - 1, l26; a22 >= 0; a22--)
    (l26 = n33[a22]) && (i27 = l26(t19, e11, i27) || i27);
  return i27 && _8(t19, e11, i27), i27;
};
var O9 = {
  dashboard: {
    displayName: "PID Controller"
  },
  properties: {
    p: { type: "Number" },
    i: { type: "Number" },
    d: { type: "Number" },
    setpoint: { type: "Number" }
  }
};
var h13;
var b16;
var k12 = class k13 extends H4 {
  constructor() {
    super(...arguments);
    f17(this, h13);
    this.p = 0, this.i = 0, this.d = 0, this.setpoint = 0;
  }
  onPChange(e11) {
    this.p = parseFloat(e11.target.value), r15(this, h13, b16).call(this);
  }
  onIChange(e11) {
    this.i = parseFloat(e11.target.value), r15(this, h13, b16).call(this);
  }
  onDChange(e11) {
    this.d = parseFloat(e11.target.value), r15(this, h13, b16).call(this);
  }
  onSetpointChange(e11) {
    this.setpoint = parseFloat(e11.target.value), r15(this, h13, b16).call(this);
  }
  render() {
    return Ot4`
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Setpoint</label>
      <input
        type="number"
        .value=${this.setpoint}
        @change=${this.onSetpointChange}
      />
    `;
  }
};
h13 = /* @__PURE__ */ new WeakSet(), b16 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        p: this.p,
        i: this.i,
        d: this.d,
        setpoint: this.setpoint
      }
    })
  );
}, k12.styles = Ut3`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      height: auto;
      width: 150px;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }
  `;
var g12 = k12;
v14([
  Mt4({ type: Number })
], g12.prototype, "p");
v14([
  Mt4({ type: Number })
], g12.prototype, "i");
v14([
  Mt4({ type: Number })
], g12.prototype, "d");
v14([
  Mt4({ type: Number })
], g12.prototype, "setpoint");
customElements.get("frc-pid-controller") || customElements.define("frc-pid-controller", g12);
var S11 = Object.defineProperty;
var x14 = (n33, t19, e11, D18) => {
  for (var i27 = void 0, a22 = n33.length - 1, l26; a22 >= 0; a22--)
    (l26 = n33[a22]) && (i27 = l26(t19, e11, i27) || i27);
  return i27 && S11(t19, e11, i27), i27;
};
var R10 = {
  dashboard: {
    displayName: "Profiled PID Controller"
  },
  properties: {
    p: { type: "Number" },
    i: { type: "Number" },
    d: { type: "Number" },
    goal: { type: "Number" }
  }
};
var u15;
var m16;
var E10 = class E11 extends H4 {
  constructor() {
    super(...arguments);
    f17(this, u15);
    this.p = 0, this.i = 0, this.d = 0, this.goal = 0;
  }
  onPChange(e11) {
    this.p = parseFloat(e11.target.value), r15(this, u15, m16).call(this);
  }
  onIChange(e11) {
    this.i = parseFloat(e11.target.value), r15(this, u15, m16).call(this);
  }
  onDChange(e11) {
    this.d = parseFloat(e11.target.value), r15(this, u15, m16).call(this);
  }
  onGoalChange(e11) {
    this.goal = parseFloat(e11.target.value), r15(this, u15, m16).call(this);
  }
  render() {
    return Ot4`
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Goal</label>
      <input type="number" .value=${this.goal} @change=${this.onGoalChange} />
    `;
  }
};
u15 = /* @__PURE__ */ new WeakSet(), m16 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        p: this.p,
        i: this.i,
        d: this.d,
        goal: this.goal
      }
    })
  );
}, E10.styles = Ut3`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      height: auto;
      width: 150px;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }
  `;
var c10 = E10;
x14([
  Mt4({ type: Number })
], c10.prototype, "p");
x14([
  Mt4({ type: Number })
], c10.prototype, "i");
x14([
  Mt4({ type: Number })
], c10.prototype, "d");
x14([
  Mt4({ type: Number })
], c10.prototype, "goal");
customElements.get("frc-profiled-pid-controller") || customElements.define("frc-profiled-pid-controller", c10);

// node_modules/@frc-web-components/fwc/dist/components/scoring-grid.es.js
var $9 = (t19) => {
  throw TypeError(t19);
};
var O10 = (t19, r24, e11) => r24.has(t19) || $9("Cannot " + e11);
var k14 = (t19, r24, e11) => r24.has(t19) ? $9("Cannot add the same private member more than once") : r24 instanceof WeakSet ? r24.add(t19) : r24.set(t19, e11);
var g13 = (t19, r24, e11) => (O10(t19, r24, "access private method"), e11);
var E12 = Object.defineProperty;
var b17 = (t19, r24, e11, i27) => {
  for (var s18 = void 0, o13 = t19.length - 1, h26; o13 >= 0; o13--)
    (h26 = t19[o13]) && (s18 = h26(r24, e11, s18) || s18);
  return s18 && E12(r24, e11, s18), s18;
};
var y14;
var I9;
var v15 = class v16 extends H4 {
  constructor() {
    super(...arguments);
    k14(this, y14);
    this.nodeId = 1, this.selected = false, this.cones = 0, this.cubes = 0, this.background = "";
  }
  updated(e11) {
    (e11.has("selected") || e11.has("nodeId")) && g13(this, y14, I9).call(this);
  }
  render() {
    return Ot4`
      <div style="text-align: center; margin-block:auto;">${this.nodeId}</div>

      <!-- empty on:click binding above passes click events to be bound on the Node component -->
      ${Tt3`
        <svg
          viewBox="-2 -2 28 28"
          style="margin-right: 8px; width:100%; height:100%; pointer-events:none"
        >
          ${o7(
      this.cubes > 1,
      () => Tt3`
              <polygon
                points="8,8 8,20 20,20, 20,8"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
              <polygon
                points="4,4 4,16 16,16, 16,4"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}
          ${o7(
      this.cubes === 1,
      () => Tt3`
              <polygon
                points="6,6 6,18 18,18, 18,6"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}
          ${o7(
      this.cones > 1,
      () => Tt3`
              <polygon
                points="13,8 11,8 8,22 5,22 19,22 16,22"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
              <polygon
                points="13,4 11,4 8,18 5,18 19,18 16,18"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}
          
          ${o7(
      this.cones === 1,
      () => Tt3`
              <polygon
                points="13,6 11,6 8,20 5,20 19,20 16,20"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}  
        </svg>
      `}
    `;
  }
};
y14 = /* @__PURE__ */ new WeakSet(), I9 = function() {
  this.selected ? this.background = "green" : this.nodeId >= 1 && this.nodeId <= 9 ? this.background = "lightgray" : (this.nodeId - 1) % 3 === 1 ? this.background = "purple" : this.background = "yellow", this.style.setProperty("background-color", this.background);
}, v15.styles = Ut3`
    :host {
      display: block;
      color: black;
      font-size: 2em;
      height: 100%;
      flex-grow: 1;
      border: 1px solid black;
      box-sizing: border-box;
    }
  `;
var c11 = v15;
b17([
  Mt4({ type: Number, attribute: "node-id" })
], c11.prototype, "nodeId");
b17([
  Mt4({ type: Boolean })
], c11.prototype, "selected");
b17([
  Mt4({ type: Number })
], c11.prototype, "cones");
b17([
  Mt4({ type: Number })
], c11.prototype, "cubes");
b17([
  n7()
], c11.prototype, "background");
customElements.get("frc-scoring-grid-node") || customElements.define("frc-scoring-grid-node", c11);
var N10 = Object.defineProperty;
var d15 = (t19, r24, e11, i27) => {
  for (var s18 = void 0, o13 = t19.length - 1, h26; o13 >= 0; o13--)
    (h26 = t19[o13]) && (s18 = h26(r24, e11, s18) || s18);
  return s18 && N10(r24, e11, s18), s18;
};
var D8 = {
  dashboard: {
    displayName: "Scoring Grid"
  },
  properties: {
    cubesScored: {
      type: "Array",
      attribute: "cubes-scored",
      input: { type: "NumberArray" }
    },
    conesScored: {
      type: "Array",
      attribute: "cones-scored",
      input: { type: "NumberArray" }
    },
    hideLinks: { type: "Boolean", attribute: "hide-links" },
    reverseRow: { type: "Boolean", attribute: "reverse-row" },
    reverseCol: { type: "Boolean", attribute: "reverse-col" }
  }
};
function m17(t19, r24 = false) {
  return r24 ? 9 - (t19 - 1) % 9 : 1 + (t19 - 1) % 9;
}
function C11(t19, r24 = false) {
  return r24 ? 3 - Math.floor((t19 - 1) / 9) : Math.floor((t19 - 1) / 9) + 1;
}
function _9(t19, r24) {
  return Array.from(Array(r24 + 1).keys()).slice(t19);
}
var p12;
var R11;
var A10;
var w13 = class w14 extends H4 {
  constructor() {
    super(...arguments);
    k14(this, p12);
    this.selection = 0, this.cubesScored = [], this.conesScored = [], this.hideLinks = false, this.reverseRow = false, this.reverseCol = false, this.leftOfLinks = [];
  }
  updated(e11) {
    (e11.has("cubesScored") || e11.has("conesScored")) && g13(this, p12, A10).call(this);
  }
  renderLinks() {
    return this.hideLinks ? Ot4`` : Ot4`
      ${this.leftOfLinks.map(
      (e11) => Ot4`
          <div
            class="link"
            style=${p4({
        gridColumn: `${Math.min(
          m17(e11, this.reverseCol),
          m17(e11 + 2, this.reverseCol)
        )} / span 3`,
        gridRow: C11(e11, this.reverseRow)
      })}
          ></div>
        `
    )}
    `;
  }
  render() {
    return Ot4`
      <div class="grid">
        ${_9(1, 27).map(
      (e11) => Ot4`
            <div
              style=${p4({
        gridColumn: m17(e11, this.reverseCol),
        gridRow: C11(e11, this.reverseRow)
      })}
            >
              <frc-scoring-grid-node
                node-id=${e11}
                ?selected=${this.selection === e11}
                @click=${() => {
        g13(this, p12, R11).call(this, e11);
      }}
                cubes=${this.cubesScored.filter((i27) => i27 === e11).length}
                cones=${this.conesScored.filter((i27) => i27 === e11).length}
              >
              </frc-scoring-grid-node>
            </div>
          `
    )}
        ${this.renderLinks()}
      </div>
    `;
  }
};
p12 = /* @__PURE__ */ new WeakSet(), R11 = function(e11) {
  this.selection === e11 ? this.selection = 0 : this.selection = e11;
  const i27 = new CustomEvent("select", {
    bubbles: true,
    composed: true,
    detail: { nodeId: this.selection }
  });
  this.dispatchEvent(i27);
}, A10 = function() {
  const e11 = [], i27 = this.cubesScored.concat(this.conesScored);
  for (let s18 = 0; s18 < 3; s18 += 1)
    for (let o13 = 1; o13 <= 7; o13 += 1)
      i27.includes(s18 * 9 + o13) && i27.includes(s18 * 9 + o13 + 1) && i27.includes(s18 * 9 + o13 + 2) && (e11.push(s18 * 9 + o13), o13 += 2);
  this.leftOfLinks = e11;
}, w13.styles = Ut3`
    :host {
      display: inline-block;
      width: 550px;
      height: 380px;
    }

    .grid {
      display:grid;
      grid-template-columns: repeat(9, calc(100% / 9));
      grid-template-rows: repeat(3, calc(100% / 3));
      height:100%;
      width:100%;
      flex-direction:row-reverse;
      grid-auto-flow: dense;"
    }

    .link {
      border: 5px solid black;
      border-radius: 10px;
      margin: 5px;
      box-sizing: border-box;
      pointer-events: none;
    }
  `;
var n18 = w13;
d15([
  Mt4({ type: Number })
], n18.prototype, "selection");
d15([
  Mt4({ type: Array, attribute: "cubes-scored" })
], n18.prototype, "cubesScored");
d15([
  Mt4({ type: Array, attribute: "cones-scored" })
], n18.prototype, "conesScored");
d15([
  Mt4({ type: Boolean, attribute: "hide-links" })
], n18.prototype, "hideLinks");
d15([
  Mt4({ type: Boolean, attribute: "reverse-row" })
], n18.prototype, "reverseRow");
d15([
  Mt4({ type: Boolean, attribute: "reverse-col" })
], n18.prototype, "reverseCol");
d15([
  n7()
], n18.prototype, "leftOfLinks");
customElements.get("frc-scoring-grid") || customElements.define("frc-scoring-grid", n18);

// node_modules/@frc-web-components/fwc/dist/components/command-based.es.js
var f18 = (t19) => {
  throw TypeError(t19);
};
var C12 = (t19, e11, a22) => e11.has(t19) || f18("Cannot " + a22);
var b18 = (t19, e11, a22) => e11.has(t19) ? f18("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(t19) : e11.set(t19, a22);
var g14 = (t19, e11, a22) => (C12(t19, e11, "access private method"), a22);
var $10 = Object.defineProperty;
var u16 = (t19, e11, a22, S23) => {
  for (var o13 = void 0, l26 = t19.length - 1, m34; l26 >= 0; l26--)
    (m34 = t19[l26]) && (o13 = m34(e11, a22, o13) || o13);
  return o13 && $10(e11, a22, o13), o13;
};
var P10 = {
  dashboard: {
    displayName: "Command"
  },
  properties: {
    name: { type: "String", defaultValue: "Command" },
    running: { type: "Boolean", changeEvent: "toggle" },
    controllable: { type: "Boolean" },
    label: { type: "String" }
  }
};
var h14;
var x15;
var c12 = class c13 extends H4 {
  constructor() {
    super(...arguments);
    b18(this, h14);
    this.name = "Command", this.running = false, this.controllable = false, this.label = "";
  }
  render() {
    return Ot4`
      <frc-toggle-button
        ?disabled="${!this.controllable}"
        ?toggled="${this.running}"
        label=${this.label || this.name}
        @toggle="${g14(this, h14, x15)}"
      >
      </frc-toggle-button>
    `;
  }
};
h14 = /* @__PURE__ */ new WeakSet(), x15 = function(a22) {
  a22.stopPropagation(), this.running = !this.running, this.dispatchEvent(
    new CustomEvent("toggle", {
      detail: {
        running: this.running
      },
      bubbles: true,
      composed: true
    })
  );
}, c12.styles = Ut3`
    :host {
      display: inline-block;
      width: 100px;
      height: 50px;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    frc-toggle-button {
      width: 100%;
      height: 100%;
    }
  `;
var i13 = c12;
u16([
  Mt4({ type: String })
], i13.prototype, "name");
u16([
  Mt4({ type: Boolean })
], i13.prototype, "running");
u16([
  Mt4({ type: Boolean })
], i13.prototype, "controllable");
u16([
  Mt4({ type: String })
], i13.prototype, "label");
customElements.get("frc-robot-command") || customElements.define("frc-robot-command", i13);
var B7 = Object.defineProperty;
var p13 = (t19, e11, a22, S23) => {
  for (var o13 = void 0, l26 = t19.length - 1, m34; l26 >= 0; l26--)
    (m34 = t19[l26]) && (o13 = m34(e11, a22, o13) || o13);
  return o13 && B7(e11, a22, o13), o13;
};
var _10 = {
  dashboard: {
    displayName: "Subsystem"
  },
  properties: {
    default: { type: "String" },
    command: { type: "String" },
    hasCommand: { type: "Boolean", attribute: "has-command" },
    hasDefault: { type: "Boolean", attribute: "has-default" },
    label: { type: "String" },
    name: { type: "String" },
    hideName: { type: "Boolean", attribute: "hide-name" }
  }
};
var s10;
var r16 = (s10 = class extends H4 {
  constructor() {
    super(...arguments), this.default = "", this.command = "", this.hasCommand = false, this.hasDefault = false, this.label = "", this.name = "", this.hideName = false;
  }
  static renderValue(e11, a22) {
    return a22 ? Ot4`<span class="has-value">${e11}</span>` : Ot4`<span class="no-value">None</span>`;
  }
  render() {
    return Ot4`
      ${this.hideName ? "" : Ot4` <header>${this.label || this.name}</header> `}
      <div class="subsystem">
        <p>
          Default command:
          ${s10.renderValue(this.default, this.hasDefault)}
        </p>
        <p>
          Current command:
          ${s10.renderValue(this.command, this.hasCommand)}
        </p>
      </div>
    `;
  }
}, s10.styles = Ut3`
    :host {
      display: inline-block;
      font-family: sans-serif;
      font-size: 16px;
      padding: 5px;
      color: var(--frc-label-text-color, black);
    }

    .subsystem {
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
    }

    p {
      margin: 0;
      margin-right: 10px;
      margin-top: 5px;
    }

    header {
      font-weight: bold;
      margin-bottom: 2px;
      color: var(--frc-robot-subsystem-header-color, purple);
    }

    .has-value {
      color: green;
    }

    .no-value {
      color: red;
    }
  `, s10);
p13([
  Mt4({ type: String })
], r16.prototype, "default");
p13([
  Mt4({ type: String })
], r16.prototype, "command");
p13([
  Mt4({ type: Boolean, attribute: "has-command" })
], r16.prototype, "hasCommand");
p13([
  Mt4({ type: Boolean, attribute: "has-default" })
], r16.prototype, "hasDefault");
p13([
  Mt4({ type: String })
], r16.prototype, "label");
p13([
  Mt4({ type: String })
], r16.prototype, "name");
p13([
  Mt4({ type: Boolean, attribute: "hide-name" })
], r16.prototype, "hideName");
var D9 = r16;
customElements.get("frc-robot-subsystem") || customElements.define("frc-robot-subsystem", D9);

// node_modules/@frc-web-components/fwc/dist/components/canvas.es.js
var it10;
function st9(n33) {
  return (t19, r24) => i5(t19, r24, { get() {
    return (this.renderRoot ?? it10 ?? (it10 = document.createDocumentFragment())).querySelectorAll(n33);
  } });
}
var ot9 = Object.defineProperty;
var A11 = (n33, t19, r24, o13) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && ot9(t19, r24, e11), e11;
};
var O11 = class extends H4 {
  constructor() {
    super(...arguments), this.points = [], this.opacity = 1, this.color = null, this.lineWidth = 2, this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["left", "top"], this.zIndex = 0, this._points = [];
  }
  updated(t19) {
    t19.has("points") && (this._points = it7(this.points, 2));
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), t19.lineWidth = this.lineWidth ?? 2, t19.strokeStyle = this.color ?? "gray";
    const [r24, o13, e11] = this.transform ?? [
      0,
      0,
      0
    ];
    t19.translate(r24, o13);
    const [s18, a22] = this.transformOrigin ?? [0, 0], d34 = s18, l26 = a22;
    if (t19.translate(d34, l26), t19.rotate(-(e11 * Math.PI) / 180), t19.translate(-d34, -l26), this._points.length > 1) {
      for (let h26 = 0; h26 < this._points.length - 1; h26 += 1) {
        const [v31, p26] = this._points[h26], [c27, N22] = this._points[h26 + 1];
        t19.moveTo(v31, p26), t19.lineTo(c27, N22);
      }
      t19.stroke();
    }
  }
};
A11([
  Mt4({ type: Array })
], O11.prototype, "points");
A11([
  Mt4({ type: Number })
], O11.prototype, "opacity");
A11([
  Mt4({ type: String })
], O11.prototype, "color");
A11([
  Mt4({ type: Number, attribute: "line-width" })
], O11.prototype, "lineWidth");
A11([
  Mt4({ type: Array })
], O11.prototype, "transform");
A11([
  Mt4({ type: Array, attribute: "transform-origin" })
], O11.prototype, "transformOrigin");
A11([
  Mt4({ type: Array, attribute: "draw-origin" })
], O11.prototype, "drawOrigin");
A11([
  Mt4({ type: Array, attribute: "z-index" })
], O11.prototype, "zIndex");
A11([
  n7()
], O11.prototype, "_points");
customElements.get("frc-canvas-line") || customElements.define("frc-canvas-line", O11);
var at6 = Object.defineProperty;
var u17 = (n33, t19, r24, o13) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && at6(t19, r24, e11), e11;
};
var m18 = class extends H4 {
  constructor() {
    super(...arguments), this.origin = [0, 0], this.width = 10, this.height = 10, this.radii = 0, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor, t19.lineWidth = this.strokeWidth);
    let [r24, o13] = this.origin;
    const [e11, s18] = this.drawOrigin ?? ["center", "center"];
    e11 === "center" ? r24 -= this.width / 2 : e11 === "right" && (r24 -= this.width), s18 === "center" ? o13 -= this.height / 2 : s18 === "bottom" && (o13 -= this.height);
    const [a22, d34, l26] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += a22, o13 += d34, t19.translate(r24, o13);
    const [h26, v31] = this.transformOrigin ?? [0, 0], p26 = h26 + this.width / 2, c27 = v31 + this.height / 2;
    t19.translate(p26, c27), t19.rotate(-(l26 * Math.PI) / 180), t19.translate(-p26, -c27), t19.roundRect(0, 0, this.width, this.height, this.radii), this.fillColor && t19.fill(), this.strokeColor && t19.stroke();
  }
};
u17([
  Mt4({ type: Array })
], m18.prototype, "origin");
u17([
  Mt4({ type: Number })
], m18.prototype, "width");
u17([
  Mt4({ type: Number })
], m18.prototype, "height");
u17([
  Mt4({ type: Number })
], m18.prototype, "radii");
u17([
  Mt4({ type: Number })
], m18.prototype, "opacity");
u17([
  Mt4({ type: String, attribute: "stroke-color" })
], m18.prototype, "strokeColor");
u17([
  Mt4({ type: Number, attribute: "stroke-width" })
], m18.prototype, "strokeWidth");
u17([
  Mt4({ type: String, attribute: "fill-color" })
], m18.prototype, "fillColor");
u17([
  Mt4({ type: Array })
], m18.prototype, "transform");
u17([
  Mt4({ type: Array, attribute: "transform-origin" })
], m18.prototype, "transformOrigin");
u17([
  Mt4({ type: Array, attribute: "draw-origin" })
], m18.prototype, "drawOrigin");
u17([
  Mt4({ type: Array, attribute: "z-index" })
], m18.prototype, "zIndex");
customElements.get("frc-canvas-rect") || customElements.define("frc-canvas-rect", m18);
var nt10 = Object.defineProperty;
var w15 = (n33, t19, r24, o13) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && nt10(t19, r24, e11), e11;
};
var f19 = class extends H4 {
  constructor() {
    super(...arguments), this.origin = [0, 0], this.radius = 10, this.startAngle = 0, this.endAngle = 360, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor, t19.lineWidth = this.strokeWidth);
    let [r24, o13] = this.origin;
    const [e11, s18] = this.drawOrigin ?? ["center", "center"];
    e11 === "left" ? r24 += this.radius : e11 === "right" && (r24 -= this.radius), s18 === "top" ? o13 += this.radius : s18 === "bottom" && (o13 -= this.radius);
    const [a22, d34, l26] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += a22, o13 += d34, t19.translate(r24, o13);
    const [h26, v31] = this.transformOrigin ?? [0, 0], p26 = h26, c27 = v31;
    t19.translate(p26, c27), t19.rotate(-(l26 * Math.PI) / 180), t19.translate(-p26, -c27), t19.beginPath(), t19.arc(
      0,
      0,
      this.radius,
      -(this.startAngle ?? 0) * Math.PI / 180,
      -(this.endAngle ?? 360) * Math.PI / 180,
      true
    ), this.fillColor && t19.fill(), this.strokeColor && t19.stroke();
  }
};
w15([
  Mt4({ type: Array })
], f19.prototype, "origin");
w15([
  Mt4({ type: Number })
], f19.prototype, "radius");
w15([
  Mt4({ type: Number, attribute: "start-angle" })
], f19.prototype, "startAngle");
w15([
  Mt4({ type: Number, attribute: "end-angle" })
], f19.prototype, "endAngle");
w15([
  Mt4({ type: Number })
], f19.prototype, "opacity");
w15([
  Mt4({ type: String, attribute: "stroke-color" })
], f19.prototype, "strokeColor");
w15([
  Mt4({ type: Number, attribute: "stroke-width" })
], f19.prototype, "strokeWidth");
w15([
  Mt4({ type: String, attribute: "fill-color" })
], f19.prototype, "fillColor");
w15([
  Mt4({ type: Array })
], f19.prototype, "transform");
w15([
  Mt4({ type: Array, attribute: "transform-origin" })
], f19.prototype, "transformOrigin");
w15([
  Mt4({ type: Array, attribute: "draw-origin" })
], f19.prototype, "drawOrigin");
w15([
  Mt4({ type: Array, attribute: "z-index" })
], f19.prototype, "zIndex");
customElements.get("frc-canvas-circle") || customElements.define("frc-canvas-circle", f19);
var ht9 = Object.defineProperty;
var C13 = (n33, t19, r24, o13) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && ht9(t19, r24, e11), e11;
};
var b19 = class extends H4 {
  constructor() {
    super(...arguments), this.origin = [0, 0], this.sides = 5, this.radius = 10, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor, t19.lineWidth = this.strokeWidth);
    let [r24, o13] = this.origin;
    const [e11, s18] = this.drawOrigin ?? ["center", "center"];
    e11 === "left" ? r24 += this.radius : e11 === "right" && (r24 -= this.radius), s18 === "top" ? o13 += this.radius : s18 === "bottom" && (o13 -= this.radius);
    const [a22, d34, l26] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += a22, o13 += d34, t19.translate(r24, o13);
    const [h26, v31] = this.transformOrigin ?? [0, 0], p26 = h26, c27 = v31;
    if (t19.translate(p26, c27), t19.rotate(-(l26 * Math.PI) / 180), t19.translate(-p26, -c27), this.sides < 3)
      return;
    const N22 = Math.PI * 2 / this.sides;
    t19.beginPath();
    for (let P20 = 0; P20 < this.sides; P20 += 1) {
      const x36 = P20 * N22, M13 = this.radius * Math.cos(x36), G16 = this.radius * Math.sin(x36);
      P20 === 0 ? t19.moveTo(M13, G16) : t19.lineTo(M13, G16);
    }
    t19.closePath(), this.fillColor && t19.fill(), this.strokeColor && t19.stroke();
  }
};
C13([
  Mt4({ type: Array })
], b19.prototype, "origin");
C13([
  Mt4({ type: Number })
], b19.prototype, "sides");
C13([
  Mt4({ type: Number })
], b19.prototype, "radius");
C13([
  Mt4({ type: Number })
], b19.prototype, "opacity");
C13([
  Mt4({ type: String, attribute: "stroke-color" })
], b19.prototype, "strokeColor");
C13([
  Mt4({ type: Number, attribute: "stroke-width" })
], b19.prototype, "strokeWidth");
C13([
  Mt4({ type: String, attribute: "fill-color" })
], b19.prototype, "fillColor");
C13([
  Mt4({ type: Array })
], b19.prototype, "transform");
C13([
  Mt4({ type: Array, attribute: "transform-origin" })
], b19.prototype, "transformOrigin");
C13([
  Mt4({ type: Array, attribute: "draw-origin" })
], b19.prototype, "drawOrigin");
C13([
  Mt4({ type: Array, attribute: "z-index" })
], b19.prototype, "zIndex");
customElements.get("frc-canvas-ngon") || customElements.define("frc-canvas-ngon", b19);
var lt8 = Object.defineProperty;
var R12 = (n33, t19, r24, o13) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && lt8(t19, r24, e11), e11;
};
var B8 = class extends H4 {
  constructor() {
    super(...arguments), this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.zIndex = 0;
  }
  draw(t19) {
    const { ctx: r24 } = t19, [o13, e11, s18] = this.transform ?? [
      0,
      0,
      0
    ];
    r24.translate(o13, e11);
    const [a22, d34] = this.transformOrigin ?? [0, 0], l26 = a22, h26 = d34;
    r24.translate(l26, h26), r24.rotate(-(s18 * Math.PI) / 180), r24.translate(-l26, -h26), [...this.children].forEach((v31) => {
      var c27;
      r24.save(), r24.beginPath();
      const p26 = v31;
      (c27 = p26.draw) == null || c27.call(p26, t19), r24.restore();
    });
  }
};
R12([
  Mt4({ type: Array })
], B8.prototype, "transform");
R12([
  Mt4({ type: Array, attribute: "transform-origin" })
], B8.prototype, "transformOrigin");
R12([
  Mt4({ type: Array, attribute: "z-index" })
], B8.prototype, "zIndex");
customElements.get("frc-canvas-group") || customElements.define("frc-canvas-group", B8);
var dt9 = Object.defineProperty;
var y15 = (n33, t19, r24, o13) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && dt9(t19, r24, e11), e11;
};
var g15 = class extends H4 {
  constructor() {
    super(...arguments), this.text = "", this.origin = [0, 0], this.maxWidth = null, this.fontName = "sans-serif", this.fontSize = 12, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity ?? 1)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor), t19.textAlign = "center", t19.textBaseline = "middle", t19.font = `${this.fontSize ?? 12}px ${this.fontName || "sans-serif"}`;
    let [r24, o13] = this.origin ?? [0, 0];
    const { width: e11, actualBoundingBoxAscent: s18, actualBoundingBoxDescent: a22 } = t19.measureText(this.text ?? ""), d34 = s18 + a22, [l26, h26] = this.drawOrigin ?? ["center", "center"];
    l26 === "left" ? r24 += e11 / 2 : l26 === "right" && (r24 -= e11 / 2), h26 === "top" ? o13 += d34 / 2 : h26 === "bottom" && (o13 -= d34 / 2);
    const [v31, p26, c27] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += v31, o13 += p26, t19.translate(r24, o13);
    const [N22, P20] = this.transformOrigin ?? [0, 0], x36 = N22, M13 = P20;
    t19.translate(x36, M13), t19.rotate(-(c27 * Math.PI) / 180), t19.translate(-x36, -M13), this.fillColor && t19.fillText(this.text ?? "", 0, 0), this.strokeColor && (t19.lineWidth = this.strokeWidth ?? 2, t19.strokeText(this.text ?? "", 0, 0));
  }
};
y15([
  Mt4({ type: String })
], g15.prototype, "text");
y15([
  Mt4({ type: Array })
], g15.prototype, "origin");
y15([
  Mt4({ type: Number, attribute: "max-width" })
], g15.prototype, "maxWidth");
y15([
  Mt4({ type: String, attribute: "font-name" })
], g15.prototype, "fontName");
y15([
  Mt4({ type: Number, attribute: "font-size" })
], g15.prototype, "fontSize");
y15([
  Mt4({ type: Number })
], g15.prototype, "opacity");
y15([
  Mt4({ type: String, attribute: "stroke-color" })
], g15.prototype, "strokeColor");
y15([
  Mt4({ type: Number, attribute: "stroke-width" })
], g15.prototype, "strokeWidth");
y15([
  Mt4({ type: String, attribute: "fill-color" })
], g15.prototype, "fillColor");
y15([
  Mt4({ type: Array })
], g15.prototype, "transform");
y15([
  Mt4({ type: Array, attribute: "transform-origin" })
], g15.prototype, "transformOrigin");
y15([
  Mt4({ type: Array, attribute: "draw-origin" })
], g15.prototype, "drawOrigin");
y15([
  Mt4({ type: Array, attribute: "z-index" })
], g15.prototype, "zIndex");
customElements.get("frc-canvas-text") || customElements.define("frc-canvas-text", g15);
var pt7 = T10(class extends _6 {
  constructor() {
    super(...arguments), this.key = d3;
  }
  render(n33, t19) {
    return this.key = n33, t19;
  }
  update(n33, [t19, r24]) {
    return t19 !== this.key && (f11(n33), this.key = t19), r24;
  }
});
var D10 = (n33) => n33 ?? d3;
var ct8 = Object.defineProperty;
var $11 = (n33, t19, r24, o13) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && ct8(t19, r24, e11), e11;
};
var U11 = class U12 extends H4 {
  constructor() {
    super(...arguments), this.src = "", this.width = null, this.height = null, this.origin = [0, 0], this.disabled = false, this.hideCrosshair = false, this.crosshairColor = "white", this.image = new Image(), this.connected = false, this.throttleUpdateImage = ot7(() => this.updateImage(), 5e3), this.onImageLoadBound = this.onImageLoad.bind(this), this.onImageErrorBound = this.onImageError.bind(this);
  }
  getImageSize(t19) {
    const r24 = {
      width: this.width || t19.width,
      height: this.height || t19.height
    };
    return this.image.height / this.image.width * r24.width > r24.height ? {
      height: r24.height,
      width: this.image.width / this.image.height * r24.height
    } : {
      height: this.image.height / this.image.width * r24.width,
      width: r24.width
    };
  }
  draw({ ctx: t19, canvas: r24 }) {
    const { width: o13, height: e11 } = this.getImageSize(r24), s18 = {
      width: this.width || r24.width,
      height: this.height || r24.height
    }, [a22, d34] = this.origin ?? [0, 0];
    if (t19.translate(a22, d34), !!this.connected)
      try {
        const l26 = (s18.width - o13) / 2, h26 = (s18.height - e11) / 2;
        t19.drawImage(this.image, l26, h26, o13, e11), this.hideCrosshair || (t19.strokeStyle = this.crosshairColor || "white", t19.lineWidth = 1, t19.beginPath(), t19.setLineDash([7, 7]), t19.moveTo(l26, h26 + e11 / 2), t19.lineTo(l26 + o13, h26 + e11 / 2), t19.stroke(), t19.beginPath(), t19.setLineDash([5, 5]), t19.moveTo(l26 + o13 / 2, h26), t19.lineTo(l26 + o13 / 2, h26 + e11), t19.stroke());
      } catch {
        this.throttleUpdateImage();
      }
  }
  disconnectedCallback() {
    super.disconnectedCallback(), clearTimeout(this.loadedTimeout), this.image.src = "";
  }
  connectedCallback() {
    super.connectedCallback(), this.throttleUpdateImage();
  }
  isImageLoaded() {
    return this.image.complete && this.image.naturalHeight !== 0;
  }
  updateImage() {
    if (clearTimeout(this.loadedTimeout), !this.disabled) {
      if (!this.isConnected) {
        this.setConnected(false);
        return;
      }
      this.isImageLoaded() || (this.loadedTimeout = setTimeout(() => {
        this.throttleUpdateImage();
      }, 5e3), this.image.removeEventListener("load", this.onImageLoadBound), this.image.removeEventListener("error", this.onImageErrorBound), this.image.src = "", this.image = new Image(), this.setConnected(false), this.image.src = this.src ?? "", this.image.addEventListener("load", this.onImageLoadBound), this.image.addEventListener("error", this.onImageErrorBound));
    }
  }
  setConnected(t19) {
    this.connected && !t19 ? (this.connected = false, this.dispatchDisconnect()) : !this.connected && t19 && (this.connected = true, this.dispatchConnect());
  }
  onImageLoad() {
    this.setConnected(true), clearTimeout(this.loadedTimeout);
  }
  onImageError() {
    this.throttleUpdateImage();
  }
  dispatchConnect() {
    this.dispatchEvent(
      new CustomEvent("connect", {
        bubbles: true,
        composed: true
      })
    );
  }
  dispatchDisconnect() {
    this.dispatchEvent(
      new CustomEvent("disconnect", {
        bubbles: true,
        composed: true
      })
    );
  }
  updated(t19) {
    t19.has("src") && this.throttleUpdateImage(), t19.has("disabled") && (this.disabled ? (clearTimeout(this.loadedTimeout), this.image.src = "") : this.throttleUpdateImage());
  }
};
U11.styles = Ut3`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    canvas {
      width: 100%;
      height: 100%;
    }
  `;
var k15 = U11;
$11([
  Mt4({ type: String })
], k15.prototype, "src");
$11([
  Mt4({ type: Number })
], k15.prototype, "width");
$11([
  Mt4({ type: Number })
], k15.prototype, "height");
$11([
  Mt4({ type: Array })
], k15.prototype, "origin");
$11([
  Mt4({ type: Boolean })
], k15.prototype, "disabled");
$11([
  Mt4({ type: Boolean, attribute: "hide-crosshair" })
], k15.prototype, "hideCrosshair");
$11([
  Mt4({ type: String, attribute: "crosshair-color" })
], k15.prototype, "crosshairColor");
customElements.get("frc-canvas-mjpg-stream-instance") || customElements.define(
  "frc-canvas-mjpg-stream-instance",
  k15
);
var gt8 = Object.defineProperty;
var S12 = (n33, t19, r24, o13) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && gt8(t19, r24, e11), e11;
};
var E13;
var _11 = (E13 = class extends H4 {
  constructor() {
    super(...arguments), this.srcs = [], this.width = null, this.height = null, this.origin = [0, 0], this.waitImage = E13.DEFAULT_WAIT_IMAGE, this.hideCrosshair = false, this.crosshairColor = "white", this.waitImageElement = new Image();
  }
  getImageSize(t19) {
    const r24 = {
      width: this.width || t19.width,
      height: this.height || t19.height
    };
    return this.waitImageElement.height / this.waitImageElement.width * r24.width > r24.height ? {
      height: r24.height,
      width: this.waitImageElement.width / this.waitImageElement.height * r24.height
    } : {
      height: this.waitImageElement.height / this.waitImageElement.width * r24.width,
      width: r24.width
    };
  }
  draw(t19) {
    const { canvas: r24, ctx: o13 } = t19, e11 = [...this.streamInstances].find(
      (s18) => s18.src === this._connectedSrc
    );
    if (e11)
      e11.draw(t19);
    else {
      const { width: s18, height: a22 } = this.getImageSize(r24), d34 = {
        width: this.width || r24.width,
        height: this.height || r24.height
      }, [l26, h26] = this.origin ?? [0, 0];
      o13.translate(l26, h26);
      try {
        o13.drawImage(
          this.waitImageElement,
          (d34.width - s18) / 2,
          (d34.height - a22) / 2,
          s18,
          a22
        );
      } catch {
      }
    }
  }
  updated(t19) {
    t19.has("srcs") && this._connectedSrc && !this.srcs.includes(this._connectedSrc) && (this._connectedSrc = void 0), t19.has("waitImage") && (this.waitImageElement.src = this.waitImage);
  }
  onConnect(t19) {
    this._connectedSrc || (this._connectedSrc = t19);
  }
  onDisconnect(t19) {
    this._connectedSrc === t19 && (this._connectedSrc = void 0);
  }
  renderStreamInstance(t19) {
    return Ot4`
      ${pt7(
      t19,
      Ot4`
          <frc-canvas-mjpg-stream-instance
            @connect=${() => this.onConnect(t19)}
            @disconnect=${() => this.onDisconnect(t19)}
            src=${t19}
            width=${D10(this.width !== null ? this.width : void 0)}
            height=${D10(this.height !== null ? this.height : void 0)}
            .origin=${D10(this.origin !== null ? this.origin : void 0)}
            ?disabled=${this._connectedSrc && this._connectedSrc !== t19}
            ?hide-crosshair=${this.hideCrosshair}
            crosshair-color=${this.crosshairColor}
          ></frc-canvas-mjpg-stream-instance>
        `
    )}
    `;
  }
  render() {
    return Ot4`
      ${this.srcs.map(
      (t19) => this.renderStreamInstance(t19.replace("mjpg:", ""))
    )}
    `;
  }
}, E13.DEFAULT_WAIT_IMAGE = "./no-camera-stream.jpg", E13);
S12([
  Mt4({ type: Array })
], _11.prototype, "srcs");
S12([
  Mt4({ type: Number })
], _11.prototype, "width");
S12([
  Mt4({ type: Number })
], _11.prototype, "height");
S12([
  Mt4({ type: Array })
], _11.prototype, "origin");
S12([
  Mt4({ type: String, attribute: "wait-image" })
], _11.prototype, "waitImage");
S12([
  Mt4({ type: Boolean, attribute: "hide-crosshair" })
], _11.prototype, "hideCrosshair");
S12([
  Mt4({ type: String, attribute: "crosshair-color" })
], _11.prototype, "crosshairColor");
S12([
  n7()
], _11.prototype, "_connectedSrc");
S12([
  st9("frc-canvas-mjpg-stream-instance")
], _11.prototype, "streamInstances");
var H8 = _11;
customElements.get("frc-canvas-mjpg-stream") || customElements.define("frc-canvas-mjpg-stream", H8);
var mt8 = Object.defineProperty;
var X8 = (n33, t19, r24, o13) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && mt8(t19, r24, e11), e11;
};
var Y6 = class Y7 extends H4 {
  constructor() {
    super(...arguments), this.width = null, this.backgroundColor = "black";
  }
  getCanvasCtx() {
    return this.canvas.getContext("2d");
  }
  drawChildren() {
    const t19 = {
      canvas: this.canvas,
      ctx: this.getCanvasCtx(),
      domRect: this.getBoundingClientRect()
    };
    [...this.children].forEach((r24) => {
      var s18;
      const o13 = this.getCanvasCtx();
      o13.save(), o13.beginPath();
      const e11 = r24;
      (s18 = e11.draw) == null || s18.call(e11, t19), o13.restore();
    });
  }
  drawBackground() {
    const t19 = this.getCanvasCtx();
    t19.save(), t19.fillStyle = this.backgroundColor, t19.fillRect(0, 0, this.canvas.width, this.canvas.height), t19.restore();
  }
  drawCanvas() {
    this.drawBackground(), this.drawChildren(), window.requestAnimationFrame(() => {
      this.drawCanvas();
    });
  }
  firstUpdated() {
    this.drawCanvas(), new ResizeObserver(() => this.resized()).observe(this), this.resized();
  }
  resized() {
    const t19 = this.getBoundingClientRect(), { width: r24, height: o13 } = t19;
    typeof this.width != "number" ? (this.canvas.width = r24, this.canvas.height = o13) : (this.canvas.width = this.width, this.canvas.height = this.width * o13 / r24);
  }
  render() {
    return Ot4` <canvas></canvas> `;
  }
};
Y6.styles = Ut3`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    canvas {
      width: 100%;
      height: 100%;
    }

    [part='box'] {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-content: center;
      flex-wrap: wrap;
      background-color: var(--box-color);
      text-align: center;
    }
  `;
var z11 = Y6;
X8([
  h4("canvas")
], z11.prototype, "canvas");
X8([
  Mt4({ type: Number })
], z11.prototype, "width");
X8([
  Mt4({ type: String, attribute: "background-color" })
], z11.prototype, "backgroundColor");
customElements.get("frc-canvas") || customElements.define("frc-canvas", z11);
var ft9 = Object.defineProperty;
var j8 = (n33, t19, r24, o13) => {
  for (var e11 = void 0, s18 = n33.length - 1, a22; s18 >= 0; s18--)
    (a22 = n33[s18]) && (e11 = a22(t19, r24, e11) || e11);
  return e11 && ft9(t19, r24, e11), e11;
};
var kt5 = {
  dashboard: {
    displayName: "Camera"
  },
  properties: {
    streams: { type: "Array" },
    backgroundColor: {
      type: "String",
      attribute: "background-color",
      defaultValue: "#000000",
      input: { type: "ColorPicker" }
    },
    waitImage: {
      type: "String",
      attribute: "wait-image"
      // input: { type: 'Upload' },
    },
    hideCrosshair: {
      type: "Boolean",
      attribute: "hide-crosshair"
    },
    crosshairColor: {
      type: "String",
      attribute: "crosshair-color",
      defaultValue: "#ffffff",
      input: { type: "ColorPicker" }
    }
  }
};
var F9 = class F10 extends H4 {
  constructor() {
    super(...arguments), this.streams = [], this.backgroundColor = "black", this.waitImage = H8.DEFAULT_WAIT_IMAGE, this.hideCrosshair = false, this.crosshairColor = "white";
  }
  render() {
    return Ot4`
      <frc-canvas background-color=${this.backgroundColor}>
        <frc-canvas-mjpg-stream
          wait-image=${this.waitImage}
          crosshair-color=${this.crosshairColor}
          ?hide-crosshair=${this.hideCrosshair}
          .srcs=${this.streams}
        ></frc-canvas-mjpg-stream>
      </frc-canvas>
    `;
  }
};
F9.styles = Ut3`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    frc-canvas {
      width: 100%;
      height: 100%;
    }
  `;
var T12 = F9;
j8([
  Mt4({ type: Array })
], T12.prototype, "streams");
j8([
  Mt4({ type: String, attribute: "background-color" })
], T12.prototype, "backgroundColor");
j8([
  Mt4({ type: String, attribute: "wait-image" })
], T12.prototype, "waitImage");
j8([
  Mt4({ type: Boolean, attribute: "hide-crosshair" })
], T12.prototype, "hideCrosshair");
j8([
  Mt4({ type: String, attribute: "crosshair-color" })
], T12.prototype, "crosshairColor");
customElements.get("frc-camera-wrapper") || customElements.define("frc-camera-wrapper", T12);

// node_modules/@frc-web-components/fwc/dist/components/label.es.js
var b20 = Object.defineProperty;
var y16 = (n33, t19, r24, h26) => {
  for (var e11 = void 0, i27 = n33.length - 1, s18; i27 >= 0; i27--)
    (s18 = n33[i27]) && (e11 = s18(t19, r24, e11) || e11);
  return e11 && b20(t19, r24, e11), e11;
};
var x16 = {
  dashboard: {
    displayName: "Label",
    defaultHtml: '<frc-label text="label"></frc-label>'
  },
  properties: {
    text: { type: "String", primary: true }
  }
};
var p14 = class p15 extends H4 {
  constructor() {
    super(...arguments), this.text = "";
  }
  render() {
    return Ot4`${this.text}`;
  }
};
p14.styles = Ut3`
    :host {
      display: inline;
      font-size: inherit;
      font-family: inherit;
      font-weight: inherit;
      text-align: inherit;
      margin: 0;
      padding: 0;
      color: var(--frc-label-text-color, black);
    }
  `;
var l13 = p14;
y16([
  Mt4({ type: String })
], l13.prototype, "text");
customElements.get("frc-label") || customElements.define("frc-label", l13);
var v17 = Object.defineProperty;
var m19 = (n33, t19, r24, h26) => {
  for (var e11 = void 0, i27 = n33.length - 1, s18; i27 >= 0; i27--)
    (s18 = n33[i27]) && (e11 = s18(t19, r24, e11) || e11);
  return e11 && v17(t19, r24, e11), e11;
};
var _12 = {
  dashboard: {
    displayName: "Number Label"
  },
  properties: {
    value: { type: "Number", primary: true },
    precision: { type: "Number", defaultValue: 2 }
  }
};
var c14 = class c15 extends H4 {
  constructor() {
    super(...arguments), this.value = 0, this.precision = 2;
  }
  render() {
    const t19 = Math.max(0, this.precision), r24 = this.value.toFixed(t19);
    return Ot4`${r24}`;
  }
};
c14.styles = Ut3`
    :host {
      display: inline;
      font-size: inherit;
      font-family: inherit;
      font-weight: inherit;
      text-align: inherit;
      margin: 0;
      padding: 0;
      color: var(--frc-label-text-color, black);
    }
  `;
var a12 = c14;
m19([
  Mt4({ type: Number })
], a12.prototype, "value");
m19([
  Mt4({ type: Number })
], a12.prototype, "precision");
customElements.get("frc-number-label") || customElements.define("frc-number-label", a12);

// node_modules/@frc-web-components/fwc/dist/components/preferences.es.js
var z12 = (r24) => {
  throw TypeError(r24);
};
var S13 = (r24, s18, e11) => s18.has(r24) || z12("Cannot " + e11);
var k16 = (r24, s18, e11) => (S13(r24, s18, "read from private field"), e11 ? e11.call(r24) : s18.get(r24));
var m20 = (r24, s18, e11) => s18.has(r24) ? z12("Cannot add the same private member more than once") : s18 instanceof WeakSet ? s18.add(r24) : s18.set(r24, e11);
var w16 = (r24, s18, e11, o13) => (S13(r24, s18, "write to private field"), o13 ? o13.call(r24, e11) : s18.set(r24, e11), e11);
var p16 = (r24, s18, e11) => (S13(r24, s18, "access private method"), e11);
var U13 = Object.defineProperty;
var $12 = (r24, s18, e11, o13) => {
  for (var i27 = void 0, t19 = r24.length - 1, n33; t19 >= 0; t19--)
    (n33 = r24[t19]) && (i27 = n33(s18, e11, i27) || i27);
  return i27 && U13(s18, e11, i27), i27;
};
var c16;
var O12;
var T13;
var g16;
var C14;
var j9 = class j10 extends H4 {
  constructor() {
    super(...arguments);
    m20(this, c16);
    this.sourceRoot = "", this.preferences = {}, this.search = "", this.hideTitle = false;
  }
  render() {
    return Ot4`
      <div class="container">
        ${o7(!this.hideTitle, () => Ot4` <header>Preferences</header> `)}

        <div class="search-input">
          <input
            placeholder="Search..."
            .value=${this.search}
            @input=${(e11) => {
      this.search = e11.target.value, p16(this, c16, T13).call(this);
    }}
          />
        </div>
        <div class="preferences-container">
          <div class="preferences">${p16(this, c16, C14).call(this, this.preferences)}</div>
        </div>
      </div>
    `;
  }
};
c16 = /* @__PURE__ */ new WeakSet(), O12 = function(e11, o13) {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        property: e11,
        value: o13
      },
      bubbles: true,
      composed: true
    })
  );
}, T13 = function() {
  this.dispatchEvent(
    new CustomEvent("search", {
      detail: {
        search: this.search
      },
      bubbles: true,
      composed: true
    })
  );
}, g16 = function(e11, o13, i27, t19) {
  i27[t19] = o13, p16(this, c16, O12).call(this, e11, o13), this.requestUpdate();
}, C14 = function(e11, o13) {
  const i27 = Object.entries(e11).filter(
    ([t19, n33]) => {
      const a22 = typeof o13 < "u" ? [o13, t19].join("/") : t19;
      return t19.startsWith(".") ? false : !this.search || typeof n33 == "object" ? true : a22.toLowerCase().includes(this.search.toLowerCase());
    }
  );
  return Ot4`
      ${i27.map(([t19, n33]) => {
    const a22 = typeof o13 < "u" ? [o13, t19].join("/") : t19;
    return typeof n33 == "boolean" ? Ot4`
            <label title=${a22}>${a22}</label>
            <input
              type="checkbox"
              .checked=${n33}
              @change=${(v31) => {
      p16(this, c16, g16).call(this, a22, v31.target.checked, e11, t19);
    }}
            />
          ` : typeof n33 == "number" ? Ot4`
            <label title=${a22}>${a22}</label>
            <div class="number-input">
              <button
                @click=${() => {
      p16(this, c16, g16).call(this, a22, n33 - 1, e11, t19);
    }}
              >
                -
              </button>
              <input
                type="number"
                .value=${n33}
                @change=${(v31) => {
      p16(this, c16, g16).call(this, a22, parseFloat(v31.target.value), e11, t19);
    }}
              />
              <button
                @click=${() => {
      p16(this, c16, g16).call(this, a22, n33 + 1, e11, t19);
    }}
              >
                +
              </button>
            </div>
          ` : typeof n33 == "string" ? Ot4`
            <label title=${a22}>${a22}</label>
            <input
              type="text"
              .value=${n33}
              @change=${(v31) => {
      p16(this, c16, g16).call(this, a22, v31.target.value, e11, t19);
    }}
            />
          ` : p16(this, c16, C14).call(this, n33, a22);
  })}
    `;
}, j9.styles = Ut3`
    :host {
      display: inline-block;
      width: 250px;
      height: 250px;
      font-family: sans-serif;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 3px;
      height: 100%;
      width: 100%;
    }

    header {
      background: var(--frc-preferences-header-background-color, lightblue);
      color: var(--frc-preferences-label-color, black);
      text-align: center;
      padding: 5px 3px;
      border-radius: 3px;
      margin: 0 3px;
      font-size: 15px;
    }

    .search-input {
      padding: 0 3px;
    }

    .preferences-container {
      flex: 1;
      overflow: auto;
      width: 100%;
      box-sizing: border-box;

      .preferences {
        padding: 3px;
        display: inline-grid;
        grid-template-columns: repeat(2, 1fr);
        column-gap: 8px;
        row-gap: 5px;
        align-items: center;
        justify-items: start;
        font-family: sans-serif;
        box-sizing: border-box;
      }
    }

    input::placeholder {
      color: var(--frc-preferences-placeholder-text-color, #888);
    }

    input:not([type='checkbox']) {
      width: 100%;
      border: none;
      outline: none;
      padding: 2px 4px;
      box-sizing: border-box;
      border-radius: 2px;
    }

    input[type='checkbox'] {
      width: 20px;
      height: 20px;
      appearance: none;
      -webkit-appearance: none;
      display: flex;
      align-content: center;
      justify-content: center;
      font-size: 2rem;
      padding: 0.1rem;
      border-radius: 3px;
    }

    input[type='checkbox']::before {
      content: ' ';
      /* https://yoksel.github.io/url-encoder/ */
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 -960 960 960' width='24' style='&%2310; fill: white;&%2310;'%3E%3Cpath d='M382-218 130-470l75-75 177 177 375-375 75 75-450 450Z'/%3E%3C/svg%3E");
      width: 100%;
      background-size: 100% 100%;
      width: 100%;
      height: 100%;
      transform-origin: bottom left;
      transform: scale(0);
    }

    input[type='checkbox']:checked::before {
      transform: scale(1);
    }

    input[type='checkbox']:checked {
      background: #0c6ce9;
    }

    input {
      margin: 0;
      box-sizing: border-box;
      color: var(--frc-preferences-input-text-color, black);
      background: var(
        --frc-preferences-input-background-color,
        rgba(0, 0, 0, 0.1)
      );
    }

    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    /* Firefox */
    input[type='number'] {
      -moz-appearance: textfield;
    }

    .number-input {
      display: flex;
      background: var(
        --frc-preferences-input-background-color,
        rgba(0, 0, 0, 0.1)
      );
      box-sizing: border-box;
      height: 20px;
      border-radius: 2px;

      button {
        padding: 0;
        height: 100%;
        width: 20px;
        border: none;
        cursor: pointer;
        background: none;
        line-height: 20px;
        font-size: 15px;
        color: var(--frc-preferences-input-button-text-color, #444);
      }

      input {
        flex: 1;
        background: none;
        text-align: center;
      }
    }

    label {
      color: var(--frc-preferences-label-color, black);
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      width: 100%;
    }
  `;
var b21 = j9;
$12([
  Mt4({ type: String, attribute: "source-root" })
], b21.prototype, "sourceRoot");
$12([
  Mt4({ type: Object })
], b21.prototype, "preferences");
$12([
  Mt4({ type: String })
], b21.prototype, "search");
$12([
  Mt4({ type: Boolean, attribute: "hide-title" })
], b21.prototype, "hideTitle");
customElements.get("frc-preferences") || customElements.define("frc-preferences", b21);
var q8 = Object.defineProperty;
var f20 = (r24, s18, e11, o13) => {
  for (var i27 = void 0, t19 = r24.length - 1, n33; t19 >= 0; t19--)
    (n33 = r24[t19]) && (i27 = n33(s18, e11, i27) || i27);
  return i27 && q8(s18, e11, i27), i27;
};
var H9 = {
  dashboard: {
    displayName: "Preferences",
    defaultHtml: '<frc-preferences-wrapper source-key="/Preferences"></frc-preferences-wrapper>'
  },
  properties: {
    search: {
      type: "String"
    },
    hideTitle: {
      type: "Boolean",
      attribute: "hide-title"
    },
    source: { type: "Source", primary: true, input: { type: "None" } },
    sourceKey: {
      type: "String",
      attribute: "source-key",
      input: { type: "None" }
    },
    store: { type: "Store", property: "store" },
    sourceProvider: {
      type: "String",
      attribute: "source-provider",
      input: { type: "None" }
    },
    provider: { type: "SourceProvider", property: "provider" }
  }
};
var y17;
var x17;
var d16;
var _13;
var B9;
var N11;
var E14 = class E15 extends H4 {
  constructor() {
    super(...arguments);
    m20(this, d16);
    m20(this, y17);
    m20(this, x17);
    this.search = "", this.hideTitle = false, this.sourceKey = "", this.sourceProvider = "", w16(this, y17, {});
  }
  updated(e11) {
    (e11.has("sourceProvider") || e11.has("sourceKey") || e11.has("store")) && p16(this, d16, N11).call(this);
  }
  disconnectedCallback() {
    var e11;
    super.disconnectedCallback(), (e11 = k16(this, x17)) == null || e11.call(this);
  }
  render() {
    return Ot4`
      <frc-preferences
        @change=${(e11) => p16(this, d16, _13).call(this, e11)}
        @search=${(e11) => p16(this, d16, B9).call(this, e11)}
        source-root=${this.sourceKey}
        search=${this.search}
        ?hide-title=${this.hideTitle}
        .preferences=${k16(this, y17)}
      ></frc-preferences>
    `;
  }
};
y17 = /* @__PURE__ */ new WeakMap(), x17 = /* @__PURE__ */ new WeakMap(), d16 = /* @__PURE__ */ new WeakSet(), _13 = function(e11) {
  var t19;
  const { property: o13, value: i27 } = e11.detail;
  (t19 = this.provider) == null || t19.userUpdate([this.sourceKey, o13].join("/"), i27);
}, B9 = function(e11) {
  const { search: o13 } = e11.detail;
  this.search = o13;
}, N11 = function() {
  var e11, o13;
  (e11 = k16(this, x17)) == null || e11.call(this), w16(this, x17, (o13 = this.store) == null ? void 0 : o13.subscribe(
    this.sourceProvider,
    this.sourceKey,
    () => {
      var t19;
      const i27 = (t19 = this.store) == null ? void 0 : t19.getSource(
        this.sourceProvider,
        this.sourceKey
      );
      w16(this, y17, (i27 == null ? void 0 : i27.getJson(false)) ?? {}), this.requestUpdate();
    },
    true
  ));
}, E14.styles = Ut3`
    :host {
      display: inline-block;
      width: 250px;
      height: 250px;
    }

    frc-preferences {
      width: 100%;
      height: 100%;
    }
  `;
var u18 = E14;
f20([
  Mt4({ type: String })
], u18.prototype, "search");
f20([
  Mt4({ type: Boolean, attribute: "hide-title" })
], u18.prototype, "hideTitle");
f20([
  Mt4({ type: String, attribute: "source-key" })
], u18.prototype, "sourceKey");
f20([
  Mt4({ type: String, attribute: "source-provider" })
], u18.prototype, "sourceProvider");
f20([
  Mt4({ type: Object })
], u18.prototype, "source");
f20([
  Mt4({ type: Object, attribute: false })
], u18.prototype, "provider");
f20([
  Mt4({ type: Object, attribute: false })
], u18.prototype, "store");
customElements.get("frc-preferences-wrapper") || customElements.define("frc-preferences-wrapper", u18);

// node_modules/@frc-web-components/fwc/dist/components/form-elements.es.js
var f21 = (a22) => {
  throw TypeError(a22);
};
var E16 = (a22, t19, e11) => t19.has(a22) || f21("Cannot " + e11);
var h15 = (a22, t19, e11) => t19.has(a22) ? f21("Cannot add the same private member more than once") : t19 instanceof WeakSet ? t19.add(a22) : t19.set(a22, e11);
var m21 = (a22, t19, e11) => (E16(a22, t19, "access private method"), e11);
var k17 = Object.defineProperty;
var s11 = (a22, t19, e11, y34) => {
  for (var r24 = void 0, n33 = a22.length - 1, d34; n33 >= 0; n33--)
    (d34 = a22[n33]) && (r24 = d34(t19, e11, r24) || r24);
  return r24 && k17(t19, e11, r24), r24;
};
var N12 = {
  dashboard: {
    displayName: "Checkbox Group",
    defaultHtml: `
      <frc-checkbox-group options='["1", "2", "3"]'>
      </frc-checkbox-group>
    `
  },
  properties: {
    disabled: { type: "Boolean", reflect: true },
    label: { type: "String" },
    options: { type: "Array" },
    selected: { type: "Array", changeEvent: "change", primary: true },
    direction: {
      type: "String",
      defaultValue: "vertical",
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["vertical", "horizontal"];
        }
      }
    }
  }
};
var u19;
var $13;
var g17 = class g18 extends H4 {
  constructor() {
    super(...arguments);
    h15(this, u19);
    this.disabled = false, this.label = "", this.options = [], this.selected = [], this.direction = "vertical";
  }
  render() {
    return Ot4`
      <vaadin-checkbox-group
        .disabled=${this.disabled}
        .label=${this.label}
        theme=${this.direction}
        .value=${this.selected}
      >
        ${this.options.map(
      (e11) => Ot4`
            <vaadin-checkbox value=${e11} @change=${() => m21(this, u19, $13).call(this)}
              >${e11}</vaadin-checkbox
            >
          `
    )}
      </vaadin-checkbox-group>
    `;
  }
};
u19 = /* @__PURE__ */ new WeakSet(), $13 = function() {
  this.selected = this.element.value;
  const e11 = new CustomEvent("change", {
    bubbles: true,
    composed: true,
    detail: { selected: this.selected }
  });
  this.dispatchEvent(e11);
}, g17.styles = Ut3`
    :host {
      display: inline-block;
    }
  `;
var i14 = g17;
s11([
  Mt4({ type: Boolean })
], i14.prototype, "disabled");
s11([
  Mt4({ type: String })
], i14.prototype, "label");
s11([
  Mt4({ type: Array })
], i14.prototype, "options");
s11([
  Mt4({ type: Array })
], i14.prototype, "selected");
s11([
  Mt4({ type: String })
], i14.prototype, "direction");
s11([
  h4("vaadin-checkbox-group")
], i14.prototype, "element");
customElements.get("frc-checkbox-group") || customElements.define("frc-checkbox-group", i14);
var V9 = Object.defineProperty;
var p17 = (a22, t19, e11, y34) => {
  for (var r24 = void 0, n33 = a22.length - 1, d34; n33 >= 0; n33--)
    (d34 = a22[n33]) && (r24 = d34(t19, e11, r24) || r24);
  return r24 && V9(t19, e11, r24), r24;
};
var w17 = {
  dashboard: {
    displayName: "Radio Group",
    defaultHtml: `
      <frc-radio-group options='["1", "2", "3"]'>
      </frc-radio-group>
    `
  },
  properties: {
    disabled: { type: "Boolean", reflect: true },
    label: { type: "String" },
    options: { type: "Array" },
    selected: { type: "String", changeEvent: "change", primary: true },
    direction: {
      type: "String",
      defaultValue: "vertical",
      input: {
        type: "StringDropdown",
        allowCustomValues: false,
        getOptions() {
          return ["vertical", "horizontal"];
        }
      }
    }
  }
};
var b22;
var B10;
var v18 = class v19 extends H4 {
  constructor() {
    super(...arguments);
    h15(this, b22);
    this.disabled = false, this.label = "", this.options = [], this.selected = "", this.direction = "vertical";
  }
  render() {
    return Ot4`
      <vaadin-radio-group
        @value-changed=${(e11) => m21(this, b22, B10).call(this, e11)}
        .disabled=${this.disabled}
        .label=${this.label}
        theme=${this.direction}
        .value=${this.selected}
      >
        ${this.options.map(
      (e11) => Ot4`
            <vaadin-radio-button value=${e11}>${e11}</vaadin-radio-button>
          `
    )}
      </vaadin-radio-group>
    `;
  }
};
b22 = /* @__PURE__ */ new WeakSet(), B10 = function(e11) {
  this.selected = e11.detail.value;
  const y34 = new CustomEvent("change", {
    bubbles: true,
    composed: true,
    detail: { selected: this.selected }
  });
  this.dispatchEvent(y34);
}, v18.styles = Ut3`
    :host {
      display: inline-block;
    }
  `;
var l14 = v18;
p17([
  Mt4({ type: Boolean })
], l14.prototype, "disabled");
p17([
  Mt4({ type: String })
], l14.prototype, "label");
p17([
  Mt4({ type: Array })
], l14.prototype, "options");
p17([
  Mt4({ type: String })
], l14.prototype, "selected");
p17([
  Mt4({ type: String })
], l14.prototype, "direction");
customElements.get("frc-radio-group") || customElements.define("frc-radio-group", l14);
var H10 = {
  "frc-checkbox-group": N12,
  "frc-radio-group": w17,
  "vaadin-combo-box": {
    dashboard: {
      displayName: "Combo Box",
      defaultHtml: `<vaadin-combo-box items='["Item 1", "Item 2"]' value="Item 1"></vaadin-combo-box>`
    },
    properties: {
      items: { type: "Array" },
      value: {
        type: "String",
        changeEvent: "value-changed",
        primary: true
      },
      allowCustomValue: { type: "Boolean", attribute: "allow-custom-value" },
      label: { type: "String" },
      placeholder: { type: "String" },
      disabled: { type: "Boolean", reflect: true },
      readonly: { type: "Boolean", reflect: true }
    }
  },
  "vaadin-number-field": {
    dashboard: {
      displayName: "Number Field",
      defaultHtml: '<vaadin-number-field label="Label" value="0"></vaadin-number-field>'
    },
    properties: {
      value: {
        type: "Number",
        defaultValue: 0,
        primary: true,
        reflect: true,
        changeEvent: "change"
      },
      label: { type: "String" },
      placeholder: { type: "String" },
      min: { type: "Number" },
      max: { type: "Number" },
      step: { type: "Number", defaultValue: 1 },
      hasControls: { type: "Boolean" },
      clearButtonVisible: {
        type: "Boolean",
        attribute: "clear-button-visible"
      },
      disabled: { type: "Boolean" },
      readonly: { type: "Boolean" }
    }
  },
  "vaadin-text-field": {
    dashboard: {
      displayName: "Text Field",
      defaultHtml: '<vaadin-text-field label="Label"></vaadin-text-field>'
    },
    properties: {
      value: {
        type: "String",
        primary: true,
        reflect: true,
        changeEvent: "change"
      },
      label: { type: "String" },
      placeholder: { type: "String" },
      clearButtonVisible: {
        type: "Boolean",
        attribute: "clear-button-visible"
      },
      disabled: { type: "Boolean" },
      readonly: { type: "Boolean" }
    }
  }
};

// node_modules/@frc-web-components/fwc/dist/components.es.js
var gr4 = {
  "frc-axis": O5,
  "frc-bar": _4,
  "frc-differential-drivebase": bt6,
  "frc-mecanum-drivebase": yt6,
  "frc-swerve-drivebase": wt5,
  "frc-icon": y7,
  "frc-3-axis-accelerometer": N8,
  "frc-accelerometer": b10,
  "frc-basic-fms-info": E8,
  "frc-boolean-box": C9,
  "frc-gauge": we4,
  "frc-gyro": z8,
  "frc-number-bar": k6,
  "frc-sendable-chooser": z9,
  "frc-sendable-chooser-wrapper": L6,
  "frc-voltage-view": k9,
  "frc-number-slider": $8,
  "frc-toggle-switch": w8,
  "frc-toggle-button": h8,
  "frc-toggle-group": k10,
  "frc-relay": _7,
  "frc-encoder": h12,
  "frc-network-alerts": u14,
  "frc-pid-command": G8,
  "frc-pid-controller": O9,
  "frc-profiled-pid-controller": R10,
  "frc-scoring-grid": D8,
  "frc-robot-command": P10,
  "frc-robot-subsystem": _10,
  "frc-mechanism2d-wrapper": O8,
  "frc-field-wrapper": mt5,
  "frc-field-robot": yt7,
  "frc-field-path": ft6,
  "frc-camera-wrapper": kt5,
  "frc-label": x16,
  "frc-number-label": _12,
  "frc-preferences-wrapper": H9,
  ...Ki2,
  ...H10
};

// node_modules/@frc-web-components/fwc/dist/fwc.es.js
var ce6 = (a22, t19, i27) => {
  if (!t19.has(a22))
    throw TypeError("Cannot " + i27);
};
var w18 = (a22, t19, i27) => (ce6(a22, t19, "read from private field"), i27 ? i27.call(a22) : t19.get(a22));
var P11 = (a22, t19, i27) => {
  if (t19.has(a22))
    throw TypeError("Cannot add the same private member more than once");
  t19 instanceof WeakSet ? t19.add(a22) : t19.set(a22, i27);
};
var L7 = (a22, t19, i27, e11) => (ce6(a22, t19, "write to private field"), t19.set(a22, i27), i27);
var D11 = (a22, t19, i27) => (ce6(a22, t19, "access private method"), i27);
var Oi3 = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
var Rt6 = { exports: {} };
Rt6.exports;
(function(a22, t19) {
  (function(i27, e11) {
    var r24 = {};
    i27.PubSub ? (r24 = i27.PubSub, console.warn("PubSub already loaded, using existing version")) : (i27.PubSub = r24, e11(r24)), a22 !== void 0 && a22.exports && (t19 = a22.exports = r24), t19.PubSub = r24, a22.exports = t19 = r24;
  })(typeof window == "object" && window || Oi3, function(i27) {
    var e11 = {}, r24 = -1, _21 = "*";
    function h26(x36) {
      var o13;
      for (o13 in x36)
        if (Object.prototype.hasOwnProperty.call(x36, o13))
          return true;
      return false;
    }
    function u35(x36) {
      return function() {
        throw x36;
      };
    }
    function l26(x36, o13, n33) {
      try {
        x36(o13, n33);
      } catch (p26) {
        setTimeout(u35(p26), 0);
      }
    }
    function O20(x36, o13, n33) {
      x36(o13, n33);
    }
    function v31(x36, o13, n33, p26) {
      var T21 = e11[o13], E25 = p26 ? O20 : l26, k29;
      if (Object.prototype.hasOwnProperty.call(e11, o13))
        for (k29 in T21)
          Object.prototype.hasOwnProperty.call(T21, k29) && E25(T21[k29], x36, n33);
    }
    function y34(x36, o13, n33) {
      return function() {
        var p26 = String(x36), T21 = p26.lastIndexOf(".");
        for (v31(x36, x36, o13, n33); T21 !== -1; )
          p26 = p26.substr(0, T21), T21 = p26.lastIndexOf("."), v31(x36, p26, o13, n33);
        v31(x36, _21, o13, n33);
      };
    }
    function g32(x36) {
      var o13 = String(x36), n33 = !!(Object.prototype.hasOwnProperty.call(e11, o13) && h26(e11[o13]));
      return n33;
    }
    function C21(x36) {
      for (var o13 = String(x36), n33 = g32(o13) || g32(_21), p26 = o13.lastIndexOf("."); !n33 && p26 !== -1; )
        o13 = o13.substr(0, p26), p26 = o13.lastIndexOf("."), n33 = g32(o13);
      return n33;
    }
    function A18(x36, o13, n33, p26) {
      x36 = typeof x36 == "symbol" ? x36.toString() : x36;
      var T21 = y34(x36, o13, p26), E25 = C21(x36);
      return E25 ? (n33 === true ? T21() : setTimeout(T21, 0), true) : false;
    }
    i27.publish = function(x36, o13) {
      return A18(x36, o13, false, i27.immediateExceptions);
    }, i27.publishSync = function(x36, o13) {
      return A18(x36, o13, true, i27.immediateExceptions);
    }, i27.subscribe = function(x36, o13) {
      if (typeof o13 != "function")
        return false;
      x36 = typeof x36 == "symbol" ? x36.toString() : x36, Object.prototype.hasOwnProperty.call(e11, x36) || (e11[x36] = {});
      var n33 = "uid_" + String(++r24);
      return e11[x36][n33] = o13, n33;
    }, i27.subscribeAll = function(x36) {
      return i27.subscribe(_21, x36);
    }, i27.subscribeOnce = function(x36, o13) {
      var n33 = i27.subscribe(x36, function() {
        i27.unsubscribe(n33), o13.apply(this, arguments);
      });
      return i27;
    }, i27.clearAllSubscriptions = function() {
      e11 = {};
    }, i27.clearSubscriptions = function(x36) {
      var o13;
      for (o13 in e11)
        Object.prototype.hasOwnProperty.call(e11, o13) && o13.indexOf(x36) === 0 && delete e11[o13];
    }, i27.countSubscriptions = function(x36) {
      var o13, n33, p26 = 0;
      for (o13 in e11)
        if (Object.prototype.hasOwnProperty.call(e11, o13) && o13.indexOf(x36) === 0) {
          for (n33 in e11[o13])
            p26++;
          break;
        }
      return p26;
    }, i27.getSubscriptions = function(x36) {
      var o13, n33 = [];
      for (o13 in e11)
        Object.prototype.hasOwnProperty.call(e11, o13) && o13.indexOf(x36) === 0 && n33.push(o13);
      return n33;
    }, i27.unsubscribe = function(x36) {
      var o13 = function(f40) {
        var S23;
        for (S23 in e11)
          if (Object.prototype.hasOwnProperty.call(e11, S23) && S23.indexOf(f40) === 0)
            return true;
        return false;
      }, n33 = typeof x36 == "string" && (Object.prototype.hasOwnProperty.call(e11, x36) || o13(x36)), p26 = !n33 && typeof x36 == "string", T21 = typeof x36 == "function", E25 = false, k29, c27, b35;
      if (n33) {
        i27.clearSubscriptions(x36);
        return;
      }
      for (k29 in e11)
        if (Object.prototype.hasOwnProperty.call(e11, k29)) {
          if (c27 = e11[k29], p26 && c27[x36]) {
            delete c27[x36], E25 = x36;
            break;
          }
          if (T21)
            for (b35 in c27)
              Object.prototype.hasOwnProperty.call(c27, b35) && c27[b35] === x36 && (delete c27[b35], E25 = true);
        }
      return E25;
    };
  });
})(Rt6, Rt6.exports);
var q9 = Rt6.exports;
var At7 = function() {
  return At7 = Object.assign || function(a22) {
    for (var t19, i27 = 1, e11 = arguments.length; i27 < e11; i27++) {
      t19 = arguments[i27];
      for (var r24 in t19)
        Object.prototype.hasOwnProperty.call(t19, r24) && (a22[r24] = t19[r24]);
    }
    return a22;
  }, At7.apply(this, arguments);
};
function Si3(a22) {
  return a22.toLowerCase();
}
var Ti3 = [/([a-z0-9])([A-Z])/g, /([A-Z])([A-Z][a-z])/g];
var ki5 = /[^A-Z0-9]+/gi;
function Ci3(a22, t19) {
  t19 === void 0 && (t19 = {});
  for (var i27 = t19.splitRegexp, e11 = i27 === void 0 ? Ti3 : i27, r24 = t19.stripRegexp, _21 = r24 === void 0 ? ki5 : r24, h26 = t19.transform, u35 = h26 === void 0 ? Si3 : h26, l26 = t19.delimiter, O20 = l26 === void 0 ? " " : l26, v31 = Se5(Se5(a22, e11, "$1\0$2"), _21, "\0"), y34 = 0, g32 = v31.length; v31.charAt(y34) === "\0"; )
    y34++;
  for (; v31.charAt(g32 - 1) === "\0"; )
    g32--;
  return v31.slice(y34, g32).split("\0").map(u35).join(O20);
}
function Se5(a22, t19, i27) {
  return t19 instanceof RegExp ? a22.replace(t19, i27) : t19.reduce(function(e11, r24) {
    return e11.replace(r24, i27);
  }, a22);
}
function _i5(a22, t19) {
  var i27 = a22.charAt(0), e11 = a22.substr(1).toLowerCase();
  return t19 > 0 && i27 >= "0" && i27 <= "9" ? "_" + i27 + e11 : "" + i27.toUpperCase() + e11;
}
function Ri3(a22) {
  return a22.charAt(0).toUpperCase() + a22.slice(1).toLowerCase();
}
function Ai5(a22, t19) {
  return t19 === void 0 && (t19 = {}), Ci3(a22, At7({ delimiter: "", transform: _i5 }, t19));
}
function Ni5(a22, t19) {
  return t19 === 0 ? a22.toLowerCase() : _i5(a22, t19);
}
function Pi3(a22, t19) {
  return t19 === 0 ? a22.toLowerCase() : Ri3(a22);
}
function Li3(a22, t19) {
  return t19 === void 0 && (t19 = {}), Ai5(a22, At7({ transform: Ni5 }, t19));
}
function Di2(a22) {
  switch (a22) {
    case "String":
      return "";
    case "Boolean":
      return false;
    case "Number":
      return 0;
    case "Array":
      return [];
    case "SourceProvider":
      return;
    case "Store":
      return;
    case "Object":
    default:
      return {};
  }
}
var Wi2 = (a22, {
  property: t19 = a22,
  description: i27 = "",
  type: e11 = "String",
  defaultValue: r24,
  attribute: _21 = a22.toLowerCase(),
  reflect: h26 = false,
  primary: u35 = false,
  changeEvent: l26,
  ...O20
} = {}) => {
  const v31 = typeof e11 == "function" ? e11.name : e11, y34 = r24 ?? Di2(v31);
  return {
    property: t19,
    description: i27,
    type: v31,
    defaultValue: y34,
    attribute: _21,
    reflect: !!h26,
    primary: !!u35,
    changeEvent: l26,
    ...O20
  };
};
var oi5 = ({
  description: a22 = "",
  group: t19 = "default",
  defaultSourceKey: i27,
  defaultSourceProvider: e11,
  dashboard: r24,
  properties: _21 = {},
  events: h26 = [],
  slots: u35 = [],
  cssProperties: l26 = [],
  cssParts: O20 = [],
  ...v31
} = {}) => ({
  description: a22,
  group: t19,
  defaultSourceKey: i27,
  defaultSourceProvider: e11,
  dashboard: {
    topLevel: true,
    ...r24
  },
  properties: Object.fromEntries(
    Object.entries(_21).map(([y34, g32]) => [y34, Wi2(y34, g32)])
  ),
  events: h26,
  slots: u35,
  cssProperties: l26,
  cssParts: O20,
  ...v31
});
var xt5 = (a22) => typeof a22 == "string" ? "String" : typeof a22 == "number" ? "Number" : typeof a22 == "boolean" ? "Boolean" : a22 instanceof Array ? "Array" : a22 instanceof Object ? "Object" : null;
var J8 = (a22, t19) => {
  if (a22 === t19)
    return true;
  if (typeof a22 != typeof t19)
    return false;
  if (a22 instanceof Array && t19 instanceof Array) {
    if (a22.length !== t19.length)
      return false;
    for (let i27 = 0; i27 < a22.length; i27++)
      if (a22[i27] !== t19[i27])
        return false;
    return true;
  }
  return false;
};
function ee5() {
}
var de6 = class _de {
  static prop2PropValue(t19) {
    if (t19 === null)
      return null;
    if (t19 instanceof Array)
      return t19;
    if (typeof t19 == "string")
      try {
        const i27 = JSON.parse(t19);
        return i27 instanceof Array ? i27 : [];
      } catch {
        return [];
      }
    return [];
  }
  static prop2AttrValue(t19) {
    const i27 = _de.prop2PropValue(t19);
    return i27 === null ? null : JSON.stringify(i27);
  }
  static attr2PropValue(t19) {
    if (t19 === null)
      return null;
    try {
      const i27 = JSON.parse(t19);
      return i27 instanceof Array ? i27 : [];
    } catch {
      return [];
    }
  }
};
var Mi3 = class {
  static prop2PropValue(t19) {
    return t19 === null ? null : !!t19;
  }
  static prop2AttrValue(t19) {
    return t19 ? "" : null;
  }
  static attr2PropValue(t19) {
    return t19 !== null;
  }
};
var ji = class {
  static prop2PropValue(t19) {
    return t19 === null ? null : parseFloat(t19);
  }
  static prop2AttrValue(t19) {
    return t19 === null ? null : parseFloat(t19).toString();
  }
  static attr2PropValue(t19, i27) {
    return t19 === null ? null : parseFloat(t19);
  }
};
var ge4 = class _ge {
  static prop2PropValue(t19) {
    if (t19 === null)
      return null;
    if (t19 instanceof Object)
      return t19;
    if (typeof t19 == "string")
      try {
        const i27 = JSON.parse(t19);
        return i27 instanceof Object ? i27 : {};
      } catch {
        return {};
      }
    return {};
  }
  static prop2AttrValue(t19) {
    const i27 = _ge.prop2PropValue(t19);
    return i27 === null ? null : JSON.stringify(i27);
  }
  static attr2PropValue(t19) {
    if (t19 === null)
      return null;
    try {
      const i27 = JSON.parse(t19);
      return i27 instanceof Object ? i27 : {};
    } catch {
      return {};
    }
  }
};
var Ii3 = class {
  static prop2PropValue(t19) {
    return t19 === null ? null : (t19 == null ? void 0 : t19.toString()) || "";
  }
  static prop2AttrValue(t19) {
    return t19 === null ? null : (t19 == null ? void 0 : t19.toString()) || "";
  }
  static attr2PropValue(t19, i27) {
    return t19 === null ? null : t19;
  }
};
var be5 = {
  Array: de6,
  Boolean: Mi3,
  Number: ji,
  Object: ge4,
  String: Ii3
};
var Z7 = (a22, t19) => {
  var i27;
  return ((i27 = be5[t19]) == null ? void 0 : i27.prop2PropValue(a22)) ?? null;
};
var Te5 = (a22, t19) => {
  var i27;
  return ((i27 = be5[t19]) == null ? void 0 : i27.prop2AttrValue(a22)) ?? null;
};
var ke5 = (a22, t19) => {
  var i27;
  return ((i27 = be5[t19]) == null ? void 0 : i27.attr2PropValue(a22)) ?? null;
};
var I10;
var K10;
var U14;
var z13;
var ut8;
var ie5;
var ui5;
var Et7;
var Mt7;
var Ot7;
var se4;
var li5 = class ne5 {
  constructor(t19, i27) {
    P11(this, ie5), P11(this, Et7), P11(this, Ot7), P11(this, I10, void 0), P11(this, K10, void 0), P11(this, U14, false), P11(this, z13, void 0), P11(this, ut8, void 0), ne5.UNIQUE_ID += 1, L7(this, ut8, Symbol(`WEBBIT_PROPERTY_CHANGE_${ne5.UNIQUE_ID}`)), L7(this, I10, t19), L7(this, K10, i27), L7(this, U14, false), L7(this, z13, this.value), D11(this, ie5, ui5).call(this);
  }
  get value() {
    const {
      reflect: t19,
      attribute: i27,
      property: e11,
      type: r24
    } = w18(this, K10);
    return typeof e11 == "string" && e11 in w18(this, I10) ? w18(this, I10)[e11] : ke5(i27 && t19 ? w18(this, I10).getAttribute(i27) : i27 ? w18(this, I10).getAttribute(i27) : null, r24);
  }
  set value(t19) {
    const { attribute: i27, property: e11, type: r24 } = w18(this, K10), _21 = xt5(t19), h26 = this.value;
    if (t19 === null || typeof t19 > "u") {
      if (t19 === h26)
        return;
    } else if (J8(Z7(h26, _21), t19))
      return;
    if (e11) {
      const u35 = Z7(t19, r24), l26 = Z7(u35, _21);
      J8(t19, l26) && (w18(this, I10)[e11] = u35);
    } else if (i27) {
      const u35 = Te5(t19, r24), l26 = ke5(u35, _21);
      J8(t19, l26) && (u35 === null ? w18(this, I10).removeAttribute(i27) : w18(this, I10).setAttribute(i27, u35));
    }
  }
  isAttribute() {
    return typeof w18(this, K10).attribute == "string";
  }
  getStoredAttribute() {
    const { type: t19 } = w18(this, K10);
    return Te5(w18(this, z13), t19);
  }
  connect() {
    if (!w18(this, U14)) {
      const t19 = this.value;
      L7(this, z13, typeof t19 < "u" ? t19 : w18(this, K10).defaultValue), L7(this, U14, true);
    }
  }
  disconnect() {
    w18(this, U14) && (L7(this, U14, false), D11(this, Ot7, se4).call(this));
  }
  isConnected() {
    return w18(this, U14);
  }
  update(t19) {
    this.connect(), this.value = t19;
  }
  subscribe(t19, i27 = false) {
    q9.subscribe(w18(this, ut8), (e11, r24) => {
      (w18(this, U14) || i27) && t19(r24);
    });
  }
  getProperty() {
    return w18(this, K10);
  }
  setStoredValue(t19) {
    L7(this, z13, t19), this.isConnected() || D11(this, Ot7, se4).call(this);
  }
  getStoredValue() {
    return w18(this, z13);
  }
};
I10 = /* @__PURE__ */ new WeakMap(), K10 = /* @__PURE__ */ new WeakMap(), U14 = /* @__PURE__ */ new WeakMap(), z13 = /* @__PURE__ */ new WeakMap(), ut8 = /* @__PURE__ */ new WeakMap(), ie5 = /* @__PURE__ */ new WeakSet(), ui5 = function() {
  const { changeEvent: a22, attribute: t19 } = w18(this, K10);
  if (a22) {
    const i27 = () => {
      D11(this, Et7, Mt7).call(this);
    };
    w18(this, I10).addEventListener(a22, i27, false);
  } else
    t19 && new MutationObserver(() => {
      D11(this, Et7, Mt7).call(this);
    }).observe(w18(this, I10), {
      attributes: true,
      attributeFilter: [t19]
    });
}, Et7 = /* @__PURE__ */ new WeakSet(), Mt7 = function() {
  const { value: a22 } = this;
  this.isConnected() || L7(this, z13, a22), q9.publish(w18(this, ut8), a22);
}, Ot7 = /* @__PURE__ */ new WeakSet(), se4 = function() {
  this.value = w18(this, z13);
}, li5.UNIQUE_ID = 0;
var Bi2 = li5;
function St6(a22) {
  return Li3(a22, { transform: Pi3 });
}
function Ce5(a22, t19) {
  const i27 = Object.entries(a22).find(([_21]) => St6(_21) === t19);
  if (!i27)
    return;
  const [e11, r24] = i27;
  return { name: e11, source: r24 };
}
var j11;
var F11;
var Q7;
var B12;
var nt11;
var lt9;
var tt9;
var rt9;
var at7;
var G9;
var _t6;
var re5;
var hi5;
var ae5;
var Re5;
var ht10;
var Nt6;
var _e5;
var Ae5;
var oe5;
var Ne5;
var ue5;
var pi5;
var fi5 = class le4 {
  constructor(t19, i27, e11) {
    P11(this, re5), P11(this, ae5), P11(this, ht10), P11(this, _e5), P11(this, oe5), P11(this, ue5), P11(this, j11, void 0), P11(this, F11, void 0), P11(this, Q7, void 0), P11(this, B12, void 0), P11(this, nt11, void 0), P11(this, lt9, void 0), P11(this, tt9, false), P11(this, rt9, void 0), P11(this, at7, {}), P11(this, G9, ee5), P11(this, _t6, void 0), le4.UNIQUE_ID += 1, L7(this, _t6, Symbol(`WEBBIT_ANY_PROPERTY_CHANGE_${le4.UNIQUE_ID}`)), L7(this, j11, t19), L7(this, F11, i27), L7(this, Q7, oi5(e11 || {
      name: t19.tagName.toLowerCase()
    }));
    const r24 = Object.entries(w18(this, Q7).properties).filter(([, _21]) => !["SourceProvider", "Store", "Source"].includes(_21.type)).map(([_21, h26]) => ({ ...h26, name: _21 }));
    L7(this, B12, new Map(
      r24.map((_21) => {
        const h26 = new Bi2(w18(this, j11), _21);
        return h26.subscribe((u35) => {
          h26.isConnected() && D11(this, ue5, pi5).call(this, _21, u35), q9.publish(w18(this, _t6), {
            property: _21,
            value: u35,
            connected: w18(this, tt9)
          });
        }, true), [_21.name, h26];
      })
    )), L7(this, nt11, r24.find(({ primary: _21 }) => _21)), L7(this, lt9, w18(this, nt11) ? w18(this, B12).get(w18(this, nt11).name) : void 0), L7(this, rt9, D11(this, re5, hi5).call(this)), w18(this, F11).defaultSourceProviderSet((_21) => {
      this.sourceProvider === null && (this.sourceProvider = _21);
    }), this.connect();
  }
  get sourceProvider() {
    return w18(this, j11).getAttribute("source-provider") ?? void 0;
  }
  set sourceProvider(t19) {
    typeof t19 < "u" ? w18(this, j11).setAttribute("source-provider", t19) : w18(this, j11).removeAttribute("source-provider");
  }
  get sourceKey() {
    return w18(this, j11).getAttribute("source-key") ?? void 0;
  }
  set sourceKey(t19) {
    typeof t19 < "u" ? w18(this, j11).setAttribute("source-key", t19) : w18(this, j11).removeAttribute("source-key");
  }
  get source() {
    if (typeof this.sourceProvider < "u" && typeof this.sourceKey < "u")
      return w18(this, F11).getSource(this.sourceProvider, this.sourceKey);
  }
  get hasSource() {
    return typeof this.source < "u";
  }
  subscribe(t19) {
    const i27 = q9.subscribe(w18(this, _t6), (e11, r24) => {
      t19(r24);
    });
    return () => q9.unsubscribe(i27);
  }
  getPropertyHandler(t19) {
    return w18(this, B12).get(t19);
  }
  connect() {
    L7(this, tt9, true), w18(this, rt9).connect(), D11(this, ht10, Nt6).call(this);
  }
  disconnect() {
    L7(this, tt9, false), w18(this, rt9).disconnect(), D11(this, ht10, Nt6).call(this);
  }
  setDefaultPropertyValue(t19, i27) {
    w18(this, at7)[t19] = i27;
  }
  getDefaultPropertyValue(t19) {
    return w18(this, at7)[t19];
  }
  getDefaultPropertyValues() {
    return w18(this, at7);
  }
  getConfig() {
    return w18(this, Q7);
  }
};
j11 = /* @__PURE__ */ new WeakMap(), F11 = /* @__PURE__ */ new WeakMap(), Q7 = /* @__PURE__ */ new WeakMap(), B12 = /* @__PURE__ */ new WeakMap(), nt11 = /* @__PURE__ */ new WeakMap(), lt9 = /* @__PURE__ */ new WeakMap(), tt9 = /* @__PURE__ */ new WeakMap(), rt9 = /* @__PURE__ */ new WeakMap(), at7 = /* @__PURE__ */ new WeakMap(), G9 = /* @__PURE__ */ new WeakMap(), _t6 = /* @__PURE__ */ new WeakMap(), re5 = /* @__PURE__ */ new WeakSet(), hi5 = function() {
  const a22 = new MutationObserver(() => {
    D11(this, ht10, Nt6).call(this);
  });
  return {
    connect: () => {
      a22.observe(w18(this, j11), {
        attributes: true,
        attributeFilter: ["source-provider", "source-key"]
      });
    },
    disconnect: () => {
      a22.disconnect();
    }
  };
}, ae5 = /* @__PURE__ */ new WeakSet(), Re5 = function() {
  const a22 = w18(this, j11).closest("[default-source-provider]");
  return (a22 == null ? void 0 : a22.getAttribute("default-source-provider")) ?? void 0;
}, ht10 = /* @__PURE__ */ new WeakSet(), Nt6 = function() {
  if (D11(this, _e5, Ae5).call(this), !w18(this, tt9)) {
    w18(this, G9).call(this), L7(this, G9, ee5), w18(this, B12).forEach((a22) => a22.disconnect());
    return;
  }
  this.sourceKey || (this.sourceKey = w18(this, Q7).defaultSourceKey), this.sourceProvider || (this.sourceProvider = w18(this, Q7).defaultSourceProvider || D11(this, ae5, Re5).call(this) || w18(this, F11).getDefaultSourceProvider()), !this.sourceKey || !this.sourceProvider ? (w18(this, G9).call(this), L7(this, G9, ee5), w18(this, B12).forEach((a22) => a22.disconnect())) : (w18(this, G9).call(this), w18(this, B12).forEach((a22) => {
    a22.disconnect();
  }), L7(this, G9, w18(this, F11).subscribe(
    this.sourceProvider,
    this.sourceKey,
    (a22, t19, i27) => {
      D11(this, oe5, Ne5).call(this, t19, i27);
    },
    true
  )));
}, _e5 = /* @__PURE__ */ new WeakSet(), Ae5 = function() {
  const a22 = this.sourceProvider ? w18(this, F11).getSourceProvider(this.sourceProvider) : void 0;
  Object.entries(w18(this, Q7).properties).forEach(([, { property: t19, type: i27 }]) => {
    t19 && (i27 === "SourceProvider" ? w18(this, j11)[t19] = a22 : i27 === "Store" ? w18(this, j11)[t19] = w18(this, F11) : i27 === "Source" && (w18(this, j11)[t19] = this.source));
  });
}, oe5 = /* @__PURE__ */ new WeakSet(), Ne5 = function(a22, t19) {
  var i27, e11;
  if (typeof this.source > "u")
    w18(this, B12).forEach((r24) => {
      r24.disconnect();
    });
  else if (this.source.hasChildren()) {
    const r24 = this.source.getChildren();
    if (a22 === t19) {
      const _21 = Object.entries(r24);
      [...w18(this, B12).entries()].forEach(([h26, u35]) => {
        const l26 = _21.find(([O20]) => St6(O20) === h26);
        if (l26) {
          const [, O20] = l26;
          u35.update(O20.getSourceValue());
        }
      });
    } else {
      const _21 = St6(t19.replace(`${a22}/`, ""));
      if (w18(this, B12).has(_21)) {
        const h26 = w18(this, B12).get(_21), u35 = (e11 = (i27 = Ce5(r24, _21)) == null ? void 0 : i27.source) == null ? void 0 : e11.getSourceValue();
        typeof u35 > "u" ? h26 == null || h26.disconnect() : h26 == null || h26.update(u35);
      }
    }
  } else
    w18(this, lt9) && w18(this, lt9).update(this.source.getSourceValue());
}, ue5 = /* @__PURE__ */ new WeakSet(), pi5 = function({ name: a22, primary: t19 }, i27) {
  if (typeof this.source > "u")
    return;
  const e11 = xt5(i27), r24 = this.source.getChildren(), _21 = Object.entries(r24);
  if (this.source.hasChildren())
    if (i27 === null) {
      const h26 = _21.find(([u35]) => St6(u35) === a22);
      if (h26) {
        const [, u35] = h26;
        u35.getSourceValue() !== null && u35.setSourceValue(i27);
      }
    } else {
      const h26 = Ce5(r24, a22);
      if (!h26)
        return;
      const u35 = xt5(h26.source.getSourceValue()) || e11, l26 = Z7(i27, u35), O20 = Z7(l26, e11);
      J8(i27, O20) && !J8(h26.source.getSourceValue(), l26) && h26.source.setSourceValue(i27);
    }
  else {
    if (!t19)
      return;
    if (i27 === null)
      this.source.getSourceValue() !== null && this.source.setSourceValue(i27);
    else {
      const h26 = xt5(this.source.getSourceValue()) || e11, u35 = Z7(i27, h26), l26 = Z7(u35, e11);
      J8(i27, l26) && !J8(this.source.getSourceValue(), u35) && this.source.setSourceValue(u35);
    }
  }
}, fi5.UNIQUE_ID = 0;
var Ki3 = fi5;
var Pe5 = function(a22) {
  var t19 = a22, i27, e11 = {
    a: 0,
    b: 0,
    c: 0
  }, r24 = [], _21 = /(\[[^\]]+\])/g, h26 = /(#[^\#\s\+>~\.\[:\)]+)/g, u35 = /(\.[^\s\+>~\.\[:\)]+)/g, l26 = /(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi, O20 = /(:(?!not|global|local)[\w-]+\([^\)]*\))/gi, v31 = /(:(?!not|global|local)[^\s\+>~\.\[:]+)/g, y34 = /([^\s\+>~\.\[:]+)/g;
  return i27 = function(g32, C21) {
    var A18, x36, o13, n33, p26, T21;
    if (g32.test(t19))
      for (A18 = t19.match(g32), x36 = 0, o13 = A18.length; x36 < o13; x36 += 1)
        e11[C21] += 1, n33 = A18[x36], p26 = t19.indexOf(n33), T21 = n33.length, r24.push({
          selector: a22.substr(p26, T21),
          type: C21,
          index: p26,
          length: T21
        }), t19 = t19.replace(n33, Array(T21 + 1).join(" "));
  }, function() {
    var g32 = function(o13) {
      var n33, p26, T21, E25;
      if (o13.test(t19))
        for (n33 = t19.match(o13), p26 = 0, T21 = n33.length; p26 < T21; p26 += 1)
          E25 = n33[p26], t19 = t19.replace(E25, Array(E25.length + 1).join("A"));
    }, C21 = /\\[0-9A-Fa-f]{6}\s?/g, A18 = /\\[0-9A-Fa-f]{1,5}\s/g, x36 = /\\./g;
    g32(C21), g32(A18), g32(x36);
  }(), function() {
    var g32 = /{[^]*/gm, C21, A18, x36, o13;
    if (g32.test(t19))
      for (C21 = t19.match(g32), A18 = 0, x36 = C21.length; A18 < x36; A18 += 1)
        o13 = C21[A18], t19 = t19.replace(o13, Array(o13.length + 1).join(" "));
  }(), i27(_21, "b"), i27(h26, "a"), i27(u35, "b"), i27(l26, "c"), i27(O20, "b"), i27(v31, "b"), t19 = t19.replace(/[\*\s\+>~]/g, " "), t19 = t19.replace(/[#\.]/g, " "), t19 = t19.replace(/:not/g, "    "), t19 = t19.replace(/:local/g, "      "), t19 = t19.replace(/:global/g, "       "), t19 = t19.replace(/[\(\)]/g, " "), i27(y34, "c"), r24.sort(function(g32, C21) {
    return g32.index - C21.index;
  }), {
    selector: a22,
    specificity: "0," + e11.a.toString() + "," + e11.b.toString() + "," + e11.c.toString(),
    specificityArray: [0, e11.a, e11.b, e11.c],
    parts: r24
  };
};
var Le5 = function(a22, t19) {
  var i27, e11, r24;
  if (typeof a22 == "string") {
    if (a22.indexOf(",") !== -1)
      throw "Invalid CSS selector";
    i27 = Pe5(a22).specificityArray;
  } else if (Array.isArray(a22)) {
    if (a22.filter(function(_21) {
      return typeof _21 == "number";
    }).length !== 4)
      throw "Invalid specificity array";
    i27 = a22;
  } else
    throw "Invalid CSS selector or specificity array";
  if (typeof t19 == "string") {
    if (t19.indexOf(",") !== -1)
      throw "Invalid CSS selector";
    e11 = Pe5(t19).specificityArray;
  } else if (Array.isArray(t19)) {
    if (t19.filter(function(_21) {
      return typeof _21 == "number";
    }).length !== 4)
      throw "Invalid specificity array";
    e11 = t19;
  } else
    throw "Invalid CSS selector or specificity array";
  for (r24 = 0; r24 < 4; r24 += 1) {
    if (i27[r24] < e11[r24])
      return -1;
    if (i27[r24] > e11[r24])
      return 1;
  }
  return 0;
};
function Vi2(a22, t19) {
  const i27 = [...a22.entries()].find(([e11]) => t19.matches(e11));
  return i27 == null ? void 0 : i27[1];
}
function ci5(a22, t19, i27) {
  const e11 = a22, r24 = Vi2(i27, e11);
  return typeof r24 > "u" || !e11.hasAttribute("source-provider") && typeof r24.defaultSourceProvider > "u" && typeof t19 > "u" ? NodeFilter.FILTER_SKIP : NodeFilter.FILTER_ACCEPT;
}
function Ui3(a22, t19) {
  return (i27) => ci5(i27, a22, t19);
}
function zi3(a22, t19, i27) {
  return document.createNodeIterator(
    a22,
    NodeFilter.SHOW_ELEMENT,
    Ui3(t19, i27)
  );
}
var X9;
var V10;
var H11;
var et9;
var pt8;
var ft10;
var ot10;
var dt10;
var Tt6;
var jt6;
var Pt6;
var he5;
var pe5;
var di5;
var fe5;
var De5;
var kt6;
var It4;
var gi5 = class Ct6 {
  constructor(t19, i27, e11 = {}, r24 = "default") {
    P11(this, ot10), P11(this, Tt6), P11(this, Pt6), P11(this, pe5), P11(this, fe5), P11(this, kt6), P11(this, X9, void 0), P11(this, V10, /* @__PURE__ */ new Map()), P11(this, H11, /* @__PURE__ */ new Map()), P11(this, et9, void 0), P11(this, pt8, void 0), P11(this, ft10, void 0), Ct6.UNIQUE_ID += 1, L7(this, pt8, Symbol(`WEBBIT_CONNECTOR_ELEMENT_CONNECTED_${Ct6.UNIQUE_ID}`)), L7(this, ft10, Symbol(`WEBBIT_CONNECTOR_ELEMENT_DISCONNECTED_${Ct6.UNIQUE_ID}`)), L7(this, X9, i27), w18(this, X9).defaultSourceProviderSet((_21) => {
      w18(this, H11).forEach((h26, u35) => {
        h26.sourceProvider === null && this.setSourceProvider(u35, _21);
      });
    }), L7(this, et9, t19), D11(this, pe5, di5).call(this), this.addElementConfigs(e11, r24);
  }
  addElementConfigs(t19 = {}, i27 = "default") {
    Object.entries(t19).forEach(([e11, r24]) => {
      w18(this, V10).set(e11, oi5({
        group: i27,
        ...r24
      }));
    }), D11(this, Pt6, he5).call(this, w18(this, et9));
  }
  subscribeElementConnected(t19) {
    q9.subscribe(w18(this, pt8), (i27, e11) => {
      t19(e11);
    });
  }
  subscribeElementDisconnected(t19) {
    q9.subscribe(w18(this, ft10), (i27, e11) => {
      t19(e11);
    });
  }
  getRootElement() {
    return w18(this, et9);
  }
  /**
   * Gets the element config with the most specific selector that matches the element
   * @param element
   * @returns The element config or undefined if none is found
   */
  getMatchingElementConfig(t19) {
    if (!t19)
      return;
    const i27 = [
      ...w18(this, V10).keys()
    ].filter((e11) => t19.matches(e11)).sort(Le5).at(-1);
    return i27 ? this.getElementConfig(i27) : void 0;
  }
  /**
   * Gets the most specific selector that matches the element
   * @param element
   * @returns The selector or undefined if none is found
   */
  getMatchingElementSelector(t19) {
    return t19 ? [
      ...w18(this, V10).keys()
    ].filter((i27) => t19.matches(i27)).sort(Le5).at(-1) : void 0;
  }
  getElementConfigSelectors() {
    return [...w18(this, V10).keys()];
  }
  getElementConfig(t19) {
    return w18(this, V10).get(t19);
  }
  hasElementConfig(t19) {
    return w18(this, V10).has(t19);
  }
  setDefaultPropertyValue(t19, i27, e11) {
    const r24 = this.getElementWebbit(t19);
    r24 && r24.setDefaultPropertyValue(i27, e11);
  }
  setSourceProvider(t19, i27) {
    const e11 = this.getElementWebbit(t19);
    e11 && (e11.sourceProvider = i27);
  }
  setSourceKey(t19, i27) {
    const e11 = this.getElementWebbit(t19);
    e11 && (e11.sourceKey = i27);
  }
  getDefaultPropertyValue(t19, i27) {
    const e11 = this.getElementWebbit(t19);
    return e11 ? e11.getDefaultPropertyValue(i27) : void 0;
  }
  getDefaultPropertyValues(t19) {
    const i27 = this.getElementWebbit(t19);
    return i27 ? i27.getDefaultPropertyValues() : {};
  }
  getSourceProvider(t19) {
    const i27 = this.getElementWebbit(t19);
    return i27 ? i27.sourceProvider : w18(this, X9).getDefaultSourceProvider();
  }
  getSourceKey(t19) {
    const i27 = this.getElementWebbit(t19);
    return i27 ? i27.sourceKey : void 0;
  }
  getElementWebbit(t19) {
    return w18(this, H11).get(t19);
  }
  hasElement(t19) {
    return w18(this, H11).has(t19);
  }
  getStore() {
    return w18(this, X9);
  }
};
X9 = /* @__PURE__ */ new WeakMap(), V10 = /* @__PURE__ */ new WeakMap(), H11 = /* @__PURE__ */ new WeakMap(), et9 = /* @__PURE__ */ new WeakMap(), pt8 = /* @__PURE__ */ new WeakMap(), ft10 = /* @__PURE__ */ new WeakMap(), ot10 = /* @__PURE__ */ new WeakSet(), dt10 = function(a22) {
  const t19 = this.getMatchingElementConfig(a22);
  if (this.hasElement(a22) || !t19)
    return;
  const i27 = new Ki3(a22, w18(this, X9), t19);
  w18(this, H11).set(a22, i27), q9.publish(w18(this, pt8), { element: a22 });
}, Tt6 = /* @__PURE__ */ new WeakSet(), jt6 = function(a22) {
  const t19 = this.getElementWebbit(a22);
  t19 && (t19.disconnect(), w18(this, H11).delete(a22), q9.publish(w18(this, ft10), { element: a22 }));
}, Pt6 = /* @__PURE__ */ new WeakSet(), he5 = function(a22) {
  const t19 = D11(this, fe5, De5).call(this, a22);
  for (; t19.nextNode(); )
    D11(this, ot10, dt10).call(this, t19.referenceNode);
}, pe5 = /* @__PURE__ */ new WeakSet(), di5 = function() {
  new MutationObserver((a22) => {
    a22.forEach((t19) => {
      if (t19.type === "childList") {
        const i27 = t19.addedNodes || [], e11 = t19.removedNodes || [];
        i27.forEach((r24) => {
          r24 instanceof HTMLElement && (D11(this, kt6, It4).call(this, r24) && D11(this, ot10, dt10).call(this, r24), D11(this, Pt6, he5).call(this, r24));
        }), e11.forEach((r24) => {
          D11(this, Tt6, jt6).call(this, r24), [...w18(this, H11).keys()].forEach((_21) => {
            r24.contains(_21) && D11(this, Tt6, jt6).call(this, _21);
          });
        });
      } else
        t19.type === "attributes" && t19.target instanceof HTMLElement && D11(this, kt6, It4).call(this, t19.target) && D11(this, ot10, dt10).call(this, t19.target);
    });
  }).observe(w18(this, et9), {
    childList: true,
    subtree: true,
    attributes: true,
    attributeFilter: ["source-key", "source-provider"]
  });
}, fe5 = /* @__PURE__ */ new WeakSet(), De5 = function(a22) {
  return zi3(
    a22,
    this.getStore().getDefaultSourceProvider(),
    w18(this, V10)
  );
}, kt6 = /* @__PURE__ */ new WeakSet(), It4 = function(a22) {
  return ci5(
    a22,
    w18(this, X9).getDefaultSourceProvider(),
    w18(this, V10)
  ) === NodeFilter.FILTER_ACCEPT;
}, gi5.UNIQUE_ID = 0;
var Fi3 = gi5;
var Bt5 = { exports: {} };
var it11 = {};
var gt9 = { exports: {} };
var Kt5 = {};
var Vt5 = {};
var We6;
function me6() {
  if (We6)
    return Vt5;
  We6 = 1;
  function a22(e11) {
    this.__parent = e11, this.__character_count = 0, this.__indent_count = -1, this.__alignment_count = 0, this.__wrap_point_index = 0, this.__wrap_point_character_count = 0, this.__wrap_point_indent_count = -1, this.__wrap_point_alignment_count = 0, this.__items = [];
  }
  a22.prototype.clone_empty = function() {
    var e11 = new a22(this.__parent);
    return e11.set_indent(this.__indent_count, this.__alignment_count), e11;
  }, a22.prototype.item = function(e11) {
    return e11 < 0 ? this.__items[this.__items.length + e11] : this.__items[e11];
  }, a22.prototype.has_match = function(e11) {
    for (var r24 = this.__items.length - 1; r24 >= 0; r24--)
      if (this.__items[r24].match(e11))
        return true;
    return false;
  }, a22.prototype.set_indent = function(e11, r24) {
    this.is_empty() && (this.__indent_count = e11 || 0, this.__alignment_count = r24 || 0, this.__character_count = this.__parent.get_indent_size(this.__indent_count, this.__alignment_count));
  }, a22.prototype._set_wrap_point = function() {
    this.__parent.wrap_line_length && (this.__wrap_point_index = this.__items.length, this.__wrap_point_character_count = this.__character_count, this.__wrap_point_indent_count = this.__parent.next_line.__indent_count, this.__wrap_point_alignment_count = this.__parent.next_line.__alignment_count);
  }, a22.prototype._should_wrap = function() {
    return this.__wrap_point_index && this.__character_count > this.__parent.wrap_line_length && this.__wrap_point_character_count > this.__parent.next_line.__character_count;
  }, a22.prototype._allow_wrap = function() {
    if (this._should_wrap()) {
      this.__parent.add_new_line();
      var e11 = this.__parent.current_line;
      return e11.set_indent(this.__wrap_point_indent_count, this.__wrap_point_alignment_count), e11.__items = this.__items.slice(this.__wrap_point_index), this.__items = this.__items.slice(0, this.__wrap_point_index), e11.__character_count += this.__character_count - this.__wrap_point_character_count, this.__character_count = this.__wrap_point_character_count, e11.__items[0] === " " && (e11.__items.splice(0, 1), e11.__character_count -= 1), true;
    }
    return false;
  }, a22.prototype.is_empty = function() {
    return this.__items.length === 0;
  }, a22.prototype.last = function() {
    return this.is_empty() ? null : this.__items[this.__items.length - 1];
  }, a22.prototype.push = function(e11) {
    this.__items.push(e11);
    var r24 = e11.lastIndexOf(`
`);
    r24 !== -1 ? this.__character_count = e11.length - r24 : this.__character_count += e11.length;
  }, a22.prototype.pop = function() {
    var e11 = null;
    return this.is_empty() || (e11 = this.__items.pop(), this.__character_count -= e11.length), e11;
  }, a22.prototype._remove_indent = function() {
    this.__indent_count > 0 && (this.__indent_count -= 1, this.__character_count -= this.__parent.indent_size);
  }, a22.prototype._remove_wrap_indent = function() {
    this.__wrap_point_indent_count > 0 && (this.__wrap_point_indent_count -= 1);
  }, a22.prototype.trim = function() {
    for (; this.last() === " "; )
      this.__items.pop(), this.__character_count -= 1;
  }, a22.prototype.toString = function() {
    var e11 = "";
    return this.is_empty() ? this.__parent.indent_empty_lines && (e11 = this.__parent.get_indent_string(this.__indent_count)) : (e11 = this.__parent.get_indent_string(this.__indent_count, this.__alignment_count), e11 += this.__items.join("")), e11;
  };
  function t19(e11, r24) {
    this.__cache = [""], this.__indent_size = e11.indent_size, this.__indent_string = e11.indent_char, e11.indent_with_tabs || (this.__indent_string = new Array(e11.indent_size + 1).join(e11.indent_char)), r24 = r24 || "", e11.indent_level > 0 && (r24 = new Array(e11.indent_level + 1).join(this.__indent_string)), this.__base_string = r24, this.__base_string_length = r24.length;
  }
  t19.prototype.get_indent_size = function(e11, r24) {
    var _21 = this.__base_string_length;
    return r24 = r24 || 0, e11 < 0 && (_21 = 0), _21 += e11 * this.__indent_size, _21 += r24, _21;
  }, t19.prototype.get_indent_string = function(e11, r24) {
    var _21 = this.__base_string;
    return r24 = r24 || 0, e11 < 0 && (e11 = 0, _21 = ""), r24 += e11 * this.__indent_size, this.__ensure_cache(r24), _21 += this.__cache[r24], _21;
  }, t19.prototype.__ensure_cache = function(e11) {
    for (; e11 >= this.__cache.length; )
      this.__add_column();
  }, t19.prototype.__add_column = function() {
    var e11 = this.__cache.length, r24 = 0, _21 = "";
    this.__indent_size && e11 >= this.__indent_size && (r24 = Math.floor(e11 / this.__indent_size), e11 -= r24 * this.__indent_size, _21 = new Array(r24 + 1).join(this.__indent_string)), e11 && (_21 += new Array(e11 + 1).join(" ")), this.__cache.push(_21);
  };
  function i27(e11, r24) {
    this.__indent_cache = new t19(e11, r24), this.raw = false, this._end_with_newline = e11.end_with_newline, this.indent_size = e11.indent_size, this.wrap_line_length = e11.wrap_line_length, this.indent_empty_lines = e11.indent_empty_lines, this.__lines = [], this.previous_line = null, this.current_line = null, this.next_line = new a22(this), this.space_before_token = false, this.non_breaking_space = false, this.previous_token_wrapped = false, this.__add_outputline();
  }
  return i27.prototype.__add_outputline = function() {
    this.previous_line = this.current_line, this.current_line = this.next_line.clone_empty(), this.__lines.push(this.current_line);
  }, i27.prototype.get_line_number = function() {
    return this.__lines.length;
  }, i27.prototype.get_indent_string = function(e11, r24) {
    return this.__indent_cache.get_indent_string(e11, r24);
  }, i27.prototype.get_indent_size = function(e11, r24) {
    return this.__indent_cache.get_indent_size(e11, r24);
  }, i27.prototype.is_empty = function() {
    return !this.previous_line && this.current_line.is_empty();
  }, i27.prototype.add_new_line = function(e11) {
    return this.is_empty() || !e11 && this.just_added_newline() ? false : (this.raw || this.__add_outputline(), true);
  }, i27.prototype.get_code = function(e11) {
    this.trim(true);
    var r24 = this.current_line.pop();
    r24 && (r24[r24.length - 1] === `
` && (r24 = r24.replace(/\n+$/g, "")), this.current_line.push(r24)), this._end_with_newline && this.__add_outputline();
    var _21 = this.__lines.join(`
`);
    return e11 !== `
` && (_21 = _21.replace(/[\n]/g, e11)), _21;
  }, i27.prototype.set_wrap_point = function() {
    this.current_line._set_wrap_point();
  }, i27.prototype.set_indent = function(e11, r24) {
    return e11 = e11 || 0, r24 = r24 || 0, this.next_line.set_indent(e11, r24), this.__lines.length > 1 ? (this.current_line.set_indent(e11, r24), true) : (this.current_line.set_indent(), false);
  }, i27.prototype.add_raw_token = function(e11) {
    for (var r24 = 0; r24 < e11.newlines; r24++)
      this.__add_outputline();
    this.current_line.set_indent(-1), this.current_line.push(e11.whitespace_before), this.current_line.push(e11.text), this.space_before_token = false, this.non_breaking_space = false, this.previous_token_wrapped = false;
  }, i27.prototype.add_token = function(e11) {
    this.__add_space_before_token(), this.current_line.push(e11), this.space_before_token = false, this.non_breaking_space = false, this.previous_token_wrapped = this.current_line._allow_wrap();
  }, i27.prototype.__add_space_before_token = function() {
    this.space_before_token && !this.just_added_newline() && (this.non_breaking_space || this.set_wrap_point(), this.current_line.push(" "));
  }, i27.prototype.remove_indent = function(e11) {
    for (var r24 = this.__lines.length; e11 < r24; )
      this.__lines[e11]._remove_indent(), e11++;
    this.current_line._remove_wrap_indent();
  }, i27.prototype.trim = function(e11) {
    for (e11 = e11 === void 0 ? false : e11, this.current_line.trim(); e11 && this.__lines.length > 1 && this.current_line.is_empty(); )
      this.__lines.pop(), this.current_line = this.__lines[this.__lines.length - 1], this.current_line.trim();
    this.previous_line = this.__lines.length > 1 ? this.__lines[this.__lines.length - 2] : null;
  }, i27.prototype.just_added_newline = function() {
    return this.current_line.is_empty();
  }, i27.prototype.just_added_blankline = function() {
    return this.is_empty() || this.current_line.is_empty() && this.previous_line.is_empty();
  }, i27.prototype.ensure_empty_line_above = function(e11, r24) {
    for (var _21 = this.__lines.length - 2; _21 >= 0; ) {
      var h26 = this.__lines[_21];
      if (h26.is_empty())
        break;
      if (h26.item(0).indexOf(e11) !== 0 && h26.item(-1) !== r24) {
        this.__lines.splice(_21 + 1, 0, new a22(this)), this.previous_line = this.__lines[this.__lines.length - 2];
        break;
      }
      _21--;
    }
  }, Vt5.Output = i27, Vt5;
}
var Ut7 = {};
var Me5;
function bi5() {
  if (Me5)
    return Ut7;
  Me5 = 1;
  function a22(t19, i27, e11, r24) {
    this.type = t19, this.text = i27, this.comments_before = null, this.newlines = e11 || 0, this.whitespace_before = r24 || "", this.parent = null, this.next = null, this.previous = null, this.opened = null, this.closed = null, this.directives = null;
  }
  return Ut7.Token = a22, Ut7;
}
var zt4 = {};
var je5;
function mi5() {
  return je5 || (je5 = 1, function(a22) {
    var t19 = "\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a", i27 = "\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a", e11 = "\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc", r24 = "\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f", _21 = "\\\\u[0-9a-fA-F]{4}|\\\\u\\{[0-9a-fA-F]+\\}", h26 = "(?:" + _21 + "|[" + t19 + e11 + "])", u35 = "(?:" + _21 + "|[" + i27 + e11 + r24 + "])*";
    a22.identifier = new RegExp(h26 + u35, "g"), a22.identifierStart = new RegExp(h26), a22.identifierMatch = new RegExp("(?:" + _21 + "|[" + i27 + e11 + r24 + "])+"), a22.newline = /[\n\r\u2028\u2029]/, a22.lineBreak = new RegExp(`\r
|` + a22.newline.source), a22.allLineBreaks = new RegExp(a22.lineBreak.source, "g");
  }(zt4)), zt4;
}
var Ft5 = {};
var st10 = {};
var Ie5;
function ve6() {
  if (Ie5)
    return st10;
  Ie5 = 1;
  function a22(e11, r24) {
    this.raw_options = t19(e11, r24), this.disabled = this._get_boolean("disabled"), this.eol = this._get_characters("eol", "auto"), this.end_with_newline = this._get_boolean("end_with_newline"), this.indent_size = this._get_number("indent_size", 4), this.indent_char = this._get_characters("indent_char", " "), this.indent_level = this._get_number("indent_level"), this.preserve_newlines = this._get_boolean("preserve_newlines", true), this.max_preserve_newlines = this._get_number("max_preserve_newlines", 32786), this.preserve_newlines || (this.max_preserve_newlines = 0), this.indent_with_tabs = this._get_boolean("indent_with_tabs", this.indent_char === "	"), this.indent_with_tabs && (this.indent_char = "	", this.indent_size === 1 && (this.indent_size = 4)), this.wrap_line_length = this._get_number("wrap_line_length", this._get_number("max_char")), this.indent_empty_lines = this._get_boolean("indent_empty_lines"), this.templating = this._get_selection_list("templating", ["auto", "none", "angular", "django", "erb", "handlebars", "php", "smarty"], ["auto"]);
  }
  a22.prototype._get_array = function(e11, r24) {
    var _21 = this.raw_options[e11], h26 = r24 || [];
    return typeof _21 == "object" ? _21 !== null && typeof _21.concat == "function" && (h26 = _21.concat()) : typeof _21 == "string" && (h26 = _21.split(/[^a-zA-Z0-9_\/\-]+/)), h26;
  }, a22.prototype._get_boolean = function(e11, r24) {
    var _21 = this.raw_options[e11], h26 = _21 === void 0 ? !!r24 : !!_21;
    return h26;
  }, a22.prototype._get_characters = function(e11, r24) {
    var _21 = this.raw_options[e11], h26 = r24 || "";
    return typeof _21 == "string" && (h26 = _21.replace(/\\r/, "\r").replace(/\\n/, `
`).replace(/\\t/, "	")), h26;
  }, a22.prototype._get_number = function(e11, r24) {
    var _21 = this.raw_options[e11];
    r24 = parseInt(r24, 10), isNaN(r24) && (r24 = 0);
    var h26 = parseInt(_21, 10);
    return isNaN(h26) && (h26 = r24), h26;
  }, a22.prototype._get_selection = function(e11, r24, _21) {
    var h26 = this._get_selection_list(e11, r24, _21);
    if (h26.length !== 1)
      throw new Error(
        "Invalid Option Value: The option '" + e11 + `' can only be one of the following values:
` + r24 + `
You passed in: '` + this.raw_options[e11] + "'"
      );
    return h26[0];
  }, a22.prototype._get_selection_list = function(e11, r24, _21) {
    if (!r24 || r24.length === 0)
      throw new Error("Selection list cannot be empty.");
    if (_21 = _21 || [r24[0]], !this._is_valid_selection(_21, r24))
      throw new Error("Invalid Default Value!");
    var h26 = this._get_array(e11, _21);
    if (!this._is_valid_selection(h26, r24))
      throw new Error(
        "Invalid Option Value: The option '" + e11 + `' can contain only the following values:
` + r24 + `
You passed in: '` + this.raw_options[e11] + "'"
      );
    return h26;
  }, a22.prototype._is_valid_selection = function(e11, r24) {
    return e11.length && r24.length && !e11.some(function(_21) {
      return r24.indexOf(_21) === -1;
    });
  };
  function t19(e11, r24) {
    var _21 = {};
    e11 = i27(e11);
    var h26;
    for (h26 in e11)
      h26 !== r24 && (_21[h26] = e11[h26]);
    if (r24 && e11[r24])
      for (h26 in e11[r24])
        _21[h26] = e11[r24][h26];
    return _21;
  }
  function i27(e11) {
    var r24 = {}, _21;
    for (_21 in e11) {
      var h26 = _21.replace(/-/g, "_");
      r24[h26] = e11[_21];
    }
    return r24;
  }
  return st10.Options = a22, st10.normalizeOpts = i27, st10.mergeOpts = t19, st10;
}
var Be5;
function vi5() {
  if (Be5)
    return Ft5;
  Be5 = 1;
  var a22 = ve6().Options, t19 = ["before-newline", "after-newline", "preserve-newline"];
  function i27(e11) {
    a22.call(this, e11, "js");
    var r24 = this.raw_options.brace_style || null;
    r24 === "expand-strict" ? this.raw_options.brace_style = "expand" : r24 === "collapse-preserve-inline" ? this.raw_options.brace_style = "collapse,preserve-inline" : this.raw_options.braces_on_own_line !== void 0 && (this.raw_options.brace_style = this.raw_options.braces_on_own_line ? "expand" : "collapse");
    var _21 = this._get_selection_list("brace_style", ["collapse", "expand", "end-expand", "none", "preserve-inline"]);
    this.brace_preserve_inline = false, this.brace_style = "collapse";
    for (var h26 = 0; h26 < _21.length; h26++)
      _21[h26] === "preserve-inline" ? this.brace_preserve_inline = true : this.brace_style = _21[h26];
    this.unindent_chained_methods = this._get_boolean("unindent_chained_methods"), this.break_chained_methods = this._get_boolean("break_chained_methods"), this.space_in_paren = this._get_boolean("space_in_paren"), this.space_in_empty_paren = this._get_boolean("space_in_empty_paren"), this.jslint_happy = this._get_boolean("jslint_happy"), this.space_after_anon_function = this._get_boolean("space_after_anon_function"), this.space_after_named_function = this._get_boolean("space_after_named_function"), this.keep_array_indentation = this._get_boolean("keep_array_indentation"), this.space_before_conditional = this._get_boolean("space_before_conditional", true), this.unescape_strings = this._get_boolean("unescape_strings"), this.e4x = this._get_boolean("e4x"), this.comma_first = this._get_boolean("comma_first"), this.operator_position = this._get_selection("operator_position", t19), this.test_output_raw = this._get_boolean("test_output_raw"), this.jslint_happy && (this.space_after_anon_function = true);
  }
  return i27.prototype = new a22(), Ft5.Options = i27, Ft5;
}
var Y8 = {};
var qt4 = {};
var Ke4;
function ye5() {
  if (Ke4)
    return qt4;
  Ke4 = 1;
  var a22 = RegExp.prototype.hasOwnProperty("sticky");
  function t19(i27) {
    this.__input = i27 || "", this.__input_length = this.__input.length, this.__position = 0;
  }
  return t19.prototype.restart = function() {
    this.__position = 0;
  }, t19.prototype.back = function() {
    this.__position > 0 && (this.__position -= 1);
  }, t19.prototype.hasNext = function() {
    return this.__position < this.__input_length;
  }, t19.prototype.next = function() {
    var i27 = null;
    return this.hasNext() && (i27 = this.__input.charAt(this.__position), this.__position += 1), i27;
  }, t19.prototype.peek = function(i27) {
    var e11 = null;
    return i27 = i27 || 0, i27 += this.__position, i27 >= 0 && i27 < this.__input_length && (e11 = this.__input.charAt(i27)), e11;
  }, t19.prototype.__match = function(i27, e11) {
    i27.lastIndex = e11;
    var r24 = i27.exec(this.__input);
    return r24 && !(a22 && i27.sticky) && r24.index !== e11 && (r24 = null), r24;
  }, t19.prototype.test = function(i27, e11) {
    return e11 = e11 || 0, e11 += this.__position, e11 >= 0 && e11 < this.__input_length ? !!this.__match(i27, e11) : false;
  }, t19.prototype.testChar = function(i27, e11) {
    var r24 = this.peek(e11);
    return i27.lastIndex = 0, r24 !== null && i27.test(r24);
  }, t19.prototype.match = function(i27) {
    var e11 = this.__match(i27, this.__position);
    return e11 ? this.__position += e11[0].length : e11 = null, e11;
  }, t19.prototype.read = function(i27, e11, r24) {
    var _21 = "", h26;
    return i27 && (h26 = this.match(i27), h26 && (_21 += h26[0])), e11 && (h26 || !i27) && (_21 += this.readUntil(e11, r24)), _21;
  }, t19.prototype.readUntil = function(i27, e11) {
    var r24 = "", _21 = this.__position;
    i27.lastIndex = this.__position;
    var h26 = i27.exec(this.__input);
    return h26 ? (_21 = h26.index, e11 && (_21 += h26[0].length)) : _21 = this.__input_length, r24 = this.__input.substring(this.__position, _21), this.__position = _21, r24;
  }, t19.prototype.readUntilAfter = function(i27) {
    return this.readUntil(i27, true);
  }, t19.prototype.get_regexp = function(i27, e11) {
    var r24 = null, _21 = "g";
    return e11 && a22 && (_21 = "y"), typeof i27 == "string" && i27 !== "" ? r24 = new RegExp(i27, _21) : i27 && (r24 = new RegExp(i27.source, _21)), r24;
  }, t19.prototype.get_literal_regexp = function(i27) {
    return RegExp(i27.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&"));
  }, t19.prototype.peekUntilAfter = function(i27) {
    var e11 = this.__position, r24 = this.readUntilAfter(i27);
    return this.__position = e11, r24;
  }, t19.prototype.lookBack = function(i27) {
    var e11 = this.__position - 1;
    return e11 >= i27.length && this.__input.substring(e11 - i27.length, e11).toLowerCase() === i27;
  }, qt4.InputScanner = t19, qt4;
}
var bt7 = {};
var $t6 = {};
var Ve6;
function qi2() {
  if (Ve6)
    return $t6;
  Ve6 = 1;
  function a22(t19) {
    this.__tokens = [], this.__tokens_length = this.__tokens.length, this.__position = 0, this.__parent_token = t19;
  }
  return a22.prototype.restart = function() {
    this.__position = 0;
  }, a22.prototype.isEmpty = function() {
    return this.__tokens_length === 0;
  }, a22.prototype.hasNext = function() {
    return this.__position < this.__tokens_length;
  }, a22.prototype.next = function() {
    var t19 = null;
    return this.hasNext() && (t19 = this.__tokens[this.__position], this.__position += 1), t19;
  }, a22.prototype.peek = function(t19) {
    var i27 = null;
    return t19 = t19 || 0, t19 += this.__position, t19 >= 0 && t19 < this.__tokens_length && (i27 = this.__tokens[t19]), i27;
  }, a22.prototype.add = function(t19) {
    this.__parent_token && (t19.parent = this.__parent_token), this.__tokens.push(t19), this.__tokens_length += 1;
  }, $t6.TokenStream = a22, $t6;
}
var Gt5 = {};
var Xt5 = {};
var Ue5;
function Dt3() {
  if (Ue5)
    return Xt5;
  Ue5 = 1;
  function a22(t19, i27) {
    this._input = t19, this._starting_pattern = null, this._match_pattern = null, this._until_pattern = null, this._until_after = false, i27 && (this._starting_pattern = this._input.get_regexp(i27._starting_pattern, true), this._match_pattern = this._input.get_regexp(i27._match_pattern, true), this._until_pattern = this._input.get_regexp(i27._until_pattern), this._until_after = i27._until_after);
  }
  return a22.prototype.read = function() {
    var t19 = this._input.read(this._starting_pattern);
    return (!this._starting_pattern || t19) && (t19 += this._input.read(this._match_pattern, this._until_pattern, this._until_after)), t19;
  }, a22.prototype.read_match = function() {
    return this._input.match(this._match_pattern);
  }, a22.prototype.until_after = function(t19) {
    var i27 = this._create();
    return i27._until_after = true, i27._until_pattern = this._input.get_regexp(t19), i27._update(), i27;
  }, a22.prototype.until = function(t19) {
    var i27 = this._create();
    return i27._until_after = false, i27._until_pattern = this._input.get_regexp(t19), i27._update(), i27;
  }, a22.prototype.starting_with = function(t19) {
    var i27 = this._create();
    return i27._starting_pattern = this._input.get_regexp(t19, true), i27._update(), i27;
  }, a22.prototype.matching = function(t19) {
    var i27 = this._create();
    return i27._match_pattern = this._input.get_regexp(t19, true), i27._update(), i27;
  }, a22.prototype._create = function() {
    return new a22(this._input, this);
  }, a22.prototype._update = function() {
  }, Xt5.Pattern = a22, Xt5;
}
var ze6;
function $i5() {
  if (ze6)
    return Gt5;
  ze6 = 1;
  var a22 = Dt3().Pattern;
  function t19(i27, e11) {
    a22.call(this, i27, e11), e11 ? this._line_regexp = this._input.get_regexp(e11._line_regexp) : this.__set_whitespace_patterns("", ""), this.newline_count = 0, this.whitespace_before_token = "";
  }
  return t19.prototype = new a22(), t19.prototype.__set_whitespace_patterns = function(i27, e11) {
    i27 += "\\t ", e11 += "\\n\\r", this._match_pattern = this._input.get_regexp(
      "[" + i27 + e11 + "]+",
      true
    ), this._newline_regexp = this._input.get_regexp(
      "\\r\\n|[" + e11 + "]"
    );
  }, t19.prototype.read = function() {
    this.newline_count = 0, this.whitespace_before_token = "";
    var i27 = this._input.read(this._match_pattern);
    if (i27 === " ")
      this.whitespace_before_token = " ";
    else if (i27) {
      var e11 = this.__split(this._newline_regexp, i27);
      this.newline_count = e11.length - 1, this.whitespace_before_token = e11[this.newline_count];
    }
    return i27;
  }, t19.prototype.matching = function(i27, e11) {
    var r24 = this._create();
    return r24.__set_whitespace_patterns(i27, e11), r24._update(), r24;
  }, t19.prototype._create = function() {
    return new t19(this._input, this);
  }, t19.prototype.__split = function(i27, e11) {
    i27.lastIndex = 0;
    for (var r24 = 0, _21 = [], h26 = i27.exec(e11); h26; )
      _21.push(e11.substring(r24, h26.index)), r24 = h26.index + h26[0].length, h26 = i27.exec(e11);
    return r24 < e11.length ? _21.push(e11.substring(r24, e11.length)) : _21.push(""), _21;
  }, Gt5.WhitespacePattern = t19, Gt5;
}
var Fe5;
function Lt4() {
  if (Fe5)
    return bt7;
  Fe5 = 1;
  var a22 = ye5().InputScanner, t19 = bi5().Token, i27 = qi2().TokenStream, e11 = $i5().WhitespacePattern, r24 = {
    START: "TK_START",
    RAW: "TK_RAW",
    EOF: "TK_EOF"
  }, _21 = function(h26, u35) {
    this._input = new a22(h26), this._options = u35 || {}, this.__tokens = null, this._patterns = {}, this._patterns.whitespace = new e11(this._input);
  };
  return _21.prototype.tokenize = function() {
    this._input.restart(), this.__tokens = new i27(), this._reset();
    for (var h26, u35 = new t19(r24.START, ""), l26 = null, O20 = [], v31 = new i27(); u35.type !== r24.EOF; ) {
      for (h26 = this._get_next_token(u35, l26); this._is_comment(h26); )
        v31.add(h26), h26 = this._get_next_token(u35, l26);
      v31.isEmpty() || (h26.comments_before = v31, v31 = new i27()), h26.parent = l26, this._is_opening(h26) ? (O20.push(l26), l26 = h26) : l26 && this._is_closing(h26, l26) && (h26.opened = l26, l26.closed = h26, l26 = O20.pop(), h26.parent = l26), h26.previous = u35, u35.next = h26, this.__tokens.add(h26), u35 = h26;
    }
    return this.__tokens;
  }, _21.prototype._is_first_token = function() {
    return this.__tokens.isEmpty();
  }, _21.prototype._reset = function() {
  }, _21.prototype._get_next_token = function(h26, u35) {
    this._readWhitespace();
    var l26 = this._input.read(/.+/g);
    return l26 ? this._create_token(r24.RAW, l26) : this._create_token(r24.EOF, "");
  }, _21.prototype._is_comment = function(h26) {
    return false;
  }, _21.prototype._is_opening = function(h26) {
    return false;
  }, _21.prototype._is_closing = function(h26, u35) {
    return false;
  }, _21.prototype._create_token = function(h26, u35) {
    var l26 = new t19(
      h26,
      u35,
      this._patterns.whitespace.newline_count,
      this._patterns.whitespace.whitespace_before_token
    );
    return l26;
  }, _21.prototype._readWhitespace = function() {
    return this._patterns.whitespace.read();
  }, bt7.Tokenizer = _21, bt7.TOKEN = r24, bt7;
}
var Qt4 = {};
var qe5;
function we6() {
  if (qe5)
    return Qt4;
  qe5 = 1;
  function a22(t19, i27) {
    t19 = typeof t19 == "string" ? t19 : t19.source, i27 = typeof i27 == "string" ? i27 : i27.source, this.__directives_block_pattern = new RegExp(t19 + / beautify( \w+[:]\w+)+ /.source + i27, "g"), this.__directive_pattern = / (\w+)[:](\w+)/g, this.__directives_end_ignore_pattern = new RegExp(t19 + /\sbeautify\signore:end\s/.source + i27, "g");
  }
  return a22.prototype.get_directives = function(t19) {
    if (!t19.match(this.__directives_block_pattern))
      return null;
    var i27 = {};
    this.__directive_pattern.lastIndex = 0;
    for (var e11 = this.__directive_pattern.exec(t19); e11; )
      i27[e11[1]] = e11[2], e11 = this.__directive_pattern.exec(t19);
    return i27;
  }, a22.prototype.readIgnored = function(t19) {
    return t19.readUntilAfter(this.__directives_end_ignore_pattern);
  }, Qt4.Directives = a22, Qt4;
}
var Ht6 = {};
var $e5;
function yi5() {
  if ($e5)
    return Ht6;
  $e5 = 1;
  var a22 = Dt3().Pattern, t19 = {
    django: false,
    erb: false,
    handlebars: false,
    php: false,
    smarty: false,
    angular: false
  };
  function i27(e11, r24) {
    a22.call(this, e11, r24), this.__template_pattern = null, this._disabled = Object.assign({}, t19), this._excluded = Object.assign({}, t19), r24 && (this.__template_pattern = this._input.get_regexp(r24.__template_pattern), this._excluded = Object.assign(this._excluded, r24._excluded), this._disabled = Object.assign(this._disabled, r24._disabled));
    var _21 = new a22(e11);
    this.__patterns = {
      handlebars_comment: _21.starting_with(/{{!--/).until_after(/--}}/),
      handlebars_unescaped: _21.starting_with(/{{{/).until_after(/}}}/),
      handlebars: _21.starting_with(/{{/).until_after(/}}/),
      php: _21.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),
      erb: _21.starting_with(/<%[^%]/).until_after(/[^%]%>/),
      // django coflicts with handlebars a bit.
      django: _21.starting_with(/{%/).until_after(/%}/),
      django_value: _21.starting_with(/{{/).until_after(/}}/),
      django_comment: _21.starting_with(/{#/).until_after(/#}/),
      smarty: _21.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),
      smarty_comment: _21.starting_with(/{\*/).until_after(/\*}/),
      smarty_literal: _21.starting_with(/{literal}/).until_after(/{\/literal}/)
    };
  }
  return i27.prototype = new a22(), i27.prototype._create = function() {
    return new i27(this._input, this);
  }, i27.prototype._update = function() {
    this.__set_templated_pattern();
  }, i27.prototype.disable = function(e11) {
    var r24 = this._create();
    return r24._disabled[e11] = true, r24._update(), r24;
  }, i27.prototype.read_options = function(e11) {
    var r24 = this._create();
    for (var _21 in t19)
      r24._disabled[_21] = e11.templating.indexOf(_21) === -1;
    return r24._update(), r24;
  }, i27.prototype.exclude = function(e11) {
    var r24 = this._create();
    return r24._excluded[e11] = true, r24._update(), r24;
  }, i27.prototype.read = function() {
    var e11 = "";
    this._match_pattern ? e11 = this._input.read(this._starting_pattern) : e11 = this._input.read(this._starting_pattern, this.__template_pattern);
    for (var r24 = this._read_template(); r24; )
      this._match_pattern ? r24 += this._input.read(this._match_pattern) : r24 += this._input.readUntil(this.__template_pattern), e11 += r24, r24 = this._read_template();
    return this._until_after && (e11 += this._input.readUntilAfter(this._until_pattern)), e11;
  }, i27.prototype.__set_templated_pattern = function() {
    var e11 = [];
    this._disabled.php || e11.push(this.__patterns.php._starting_pattern.source), this._disabled.handlebars || e11.push(this.__patterns.handlebars._starting_pattern.source), this._disabled.erb || e11.push(this.__patterns.erb._starting_pattern.source), this._disabled.django || (e11.push(this.__patterns.django._starting_pattern.source), e11.push(this.__patterns.django_value._starting_pattern.source), e11.push(this.__patterns.django_comment._starting_pattern.source)), this._disabled.smarty || e11.push(this.__patterns.smarty._starting_pattern.source), this._until_pattern && e11.push(this._until_pattern.source), this.__template_pattern = this._input.get_regexp("(?:" + e11.join("|") + ")");
  }, i27.prototype._read_template = function() {
    var e11 = "", r24 = this._input.peek();
    if (r24 === "<") {
      var _21 = this._input.peek(1);
      !this._disabled.php && !this._excluded.php && _21 === "?" && (e11 = e11 || this.__patterns.php.read()), !this._disabled.erb && !this._excluded.erb && _21 === "%" && (e11 = e11 || this.__patterns.erb.read());
    } else
      r24 === "{" && (!this._disabled.handlebars && !this._excluded.handlebars && (e11 = e11 || this.__patterns.handlebars_comment.read(), e11 = e11 || this.__patterns.handlebars_unescaped.read(), e11 = e11 || this.__patterns.handlebars.read()), this._disabled.django || (!this._excluded.django && !this._excluded.handlebars && (e11 = e11 || this.__patterns.django_value.read()), this._excluded.django || (e11 = e11 || this.__patterns.django_comment.read(), e11 = e11 || this.__patterns.django.read())), this._disabled.smarty || this._disabled.django && this._disabled.handlebars && (e11 = e11 || this.__patterns.smarty_comment.read(), e11 = e11 || this.__patterns.smarty_literal.read(), e11 = e11 || this.__patterns.smarty.read()));
    return e11;
  }, Ht6.TemplatablePattern = i27, Ht6;
}
var Ge5;
function mt9() {
  if (Ge5)
    return Y8;
  Ge5 = 1;
  var a22 = ye5().InputScanner, t19 = Lt4().Tokenizer, i27 = Lt4().TOKEN, e11 = we6().Directives, r24 = mi5(), _21 = Dt3().Pattern, h26 = yi5().TemplatablePattern;
  function u35(c27, b35) {
    return b35.indexOf(c27) !== -1;
  }
  var l26 = {
    START_EXPR: "TK_START_EXPR",
    END_EXPR: "TK_END_EXPR",
    START_BLOCK: "TK_START_BLOCK",
    END_BLOCK: "TK_END_BLOCK",
    WORD: "TK_WORD",
    RESERVED: "TK_RESERVED",
    SEMICOLON: "TK_SEMICOLON",
    STRING: "TK_STRING",
    EQUALS: "TK_EQUALS",
    OPERATOR: "TK_OPERATOR",
    COMMA: "TK_COMMA",
    BLOCK_COMMENT: "TK_BLOCK_COMMENT",
    COMMENT: "TK_COMMENT",
    DOT: "TK_DOT",
    UNKNOWN: "TK_UNKNOWN",
    START: i27.START,
    RAW: i27.RAW,
    EOF: i27.EOF
  }, O20 = new e11(/\/\*/, /\*\//), v31 = /0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/, y34 = /[0-9]/, g32 = /[^\d\.]/, C21 = ">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "), A18 = ">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";
  A18 = A18.replace(/[-[\]{}()*+?.,\\^$|#]/g, "\\$&"), A18 = "\\?\\.(?!\\d) " + A18, A18 = A18.replace(/ /g, "|");
  var x36 = new RegExp(A18), o13 = "continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","), n33 = o13.concat(["do", "in", "of", "else", "get", "set", "new", "catch", "finally", "typeof", "yield", "async", "await", "from", "as", "class", "extends"]), p26 = new RegExp("^(?:" + n33.join("|") + ")$"), T21, E25 = function(c27, b35) {
    t19.call(this, c27, b35), this._patterns.whitespace = this._patterns.whitespace.matching(
      /\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,
      /\u2028\u2029/.source
    );
    var f40 = new _21(this._input), S23 = new h26(this._input).read_options(this._options);
    this.__patterns = {
      template: S23,
      identifier: S23.starting_with(r24.identifier).matching(r24.identifierMatch),
      number: f40.matching(v31),
      punct: f40.matching(x36),
      // comment ends just before nearest linefeed or end of file
      comment: f40.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),
      //  /* ... */ comment ends with nearest */ or end of file
      block_comment: f40.starting_with(/\/\*/).until_after(/\*\//),
      html_comment_start: f40.matching(/<!--/),
      html_comment_end: f40.matching(/-->/),
      include: f40.starting_with(/#include/).until_after(r24.lineBreak),
      shebang: f40.starting_with(/#!/).until_after(r24.lineBreak),
      xml: f40.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),
      single_quote: S23.until(/['\\\n\r\u2028\u2029]/),
      double_quote: S23.until(/["\\\n\r\u2028\u2029]/),
      template_text: S23.until(/[`\\$]/),
      template_expression: S23.until(/[`}\\]/)
    };
  };
  E25.prototype = new t19(), E25.prototype._is_comment = function(c27) {
    return c27.type === l26.COMMENT || c27.type === l26.BLOCK_COMMENT || c27.type === l26.UNKNOWN;
  }, E25.prototype._is_opening = function(c27) {
    return c27.type === l26.START_BLOCK || c27.type === l26.START_EXPR;
  }, E25.prototype._is_closing = function(c27, b35) {
    return (c27.type === l26.END_BLOCK || c27.type === l26.END_EXPR) && b35 && (c27.text === "]" && b35.text === "[" || c27.text === ")" && b35.text === "(" || c27.text === "}" && b35.text === "{");
  }, E25.prototype._reset = function() {
    T21 = false;
  }, E25.prototype._get_next_token = function(c27, b35) {
    var f40 = null;
    this._readWhitespace();
    var S23 = this._input.peek();
    return S23 === null ? this._create_token(l26.EOF, "") : (f40 = f40 || this._read_non_javascript(S23), f40 = f40 || this._read_string(S23), f40 = f40 || this._read_pair(S23, this._input.peek(1)), f40 = f40 || this._read_word(c27), f40 = f40 || this._read_singles(S23), f40 = f40 || this._read_comment(S23), f40 = f40 || this._read_regexp(S23, c27), f40 = f40 || this._read_xml(S23, c27), f40 = f40 || this._read_punctuation(), f40 = f40 || this._create_token(l26.UNKNOWN, this._input.next()), f40);
  }, E25.prototype._read_word = function(c27) {
    var b35;
    if (b35 = this.__patterns.identifier.read(), b35 !== "")
      return b35 = b35.replace(r24.allLineBreaks, `
`), !(c27.type === l26.DOT || c27.type === l26.RESERVED && (c27.text === "set" || c27.text === "get")) && p26.test(b35) ? (b35 === "in" || b35 === "of") && (c27.type === l26.WORD || c27.type === l26.STRING) ? this._create_token(l26.OPERATOR, b35) : this._create_token(l26.RESERVED, b35) : this._create_token(l26.WORD, b35);
    if (b35 = this.__patterns.number.read(), b35 !== "")
      return this._create_token(l26.WORD, b35);
  }, E25.prototype._read_singles = function(c27) {
    var b35 = null;
    return c27 === "(" || c27 === "[" ? b35 = this._create_token(l26.START_EXPR, c27) : c27 === ")" || c27 === "]" ? b35 = this._create_token(l26.END_EXPR, c27) : c27 === "{" ? b35 = this._create_token(l26.START_BLOCK, c27) : c27 === "}" ? b35 = this._create_token(l26.END_BLOCK, c27) : c27 === ";" ? b35 = this._create_token(l26.SEMICOLON, c27) : c27 === "." && g32.test(this._input.peek(1)) ? b35 = this._create_token(l26.DOT, c27) : c27 === "," && (b35 = this._create_token(l26.COMMA, c27)), b35 && this._input.next(), b35;
  }, E25.prototype._read_pair = function(c27, b35) {
    var f40 = null;
    return c27 === "#" && b35 === "{" && (f40 = this._create_token(l26.START_BLOCK, c27 + b35)), f40 && (this._input.next(), this._input.next()), f40;
  }, E25.prototype._read_punctuation = function() {
    var c27 = this.__patterns.punct.read();
    if (c27 !== "")
      return c27 === "=" ? this._create_token(l26.EQUALS, c27) : c27 === "?." ? this._create_token(l26.DOT, c27) : this._create_token(l26.OPERATOR, c27);
  }, E25.prototype._read_non_javascript = function(c27) {
    var b35 = "";
    if (c27 === "#") {
      if (this._is_first_token() && (b35 = this.__patterns.shebang.read(), b35))
        return this._create_token(l26.UNKNOWN, b35.trim() + `
`);
      if (b35 = this.__patterns.include.read(), b35)
        return this._create_token(l26.UNKNOWN, b35.trim() + `
`);
      c27 = this._input.next();
      var f40 = "#";
      if (this._input.hasNext() && this._input.testChar(y34)) {
        do
          c27 = this._input.next(), f40 += c27;
        while (this._input.hasNext() && c27 !== "#" && c27 !== "=");
        return c27 === "#" || (this._input.peek() === "[" && this._input.peek(1) === "]" ? (f40 += "[]", this._input.next(), this._input.next()) : this._input.peek() === "{" && this._input.peek(1) === "}" && (f40 += "{}", this._input.next(), this._input.next())), this._create_token(l26.WORD, f40);
      }
      this._input.back();
    } else if (c27 === "<" && this._is_first_token()) {
      if (b35 = this.__patterns.html_comment_start.read(), b35) {
        for (; this._input.hasNext() && !this._input.testChar(r24.newline); )
          b35 += this._input.next();
        return T21 = true, this._create_token(l26.COMMENT, b35);
      }
    } else if (T21 && c27 === "-" && (b35 = this.__patterns.html_comment_end.read(), b35))
      return T21 = false, this._create_token(l26.COMMENT, b35);
    return null;
  }, E25.prototype._read_comment = function(c27) {
    var b35 = null;
    if (c27 === "/") {
      var f40 = "";
      if (this._input.peek(1) === "*") {
        f40 = this.__patterns.block_comment.read();
        var S23 = O20.get_directives(f40);
        S23 && S23.ignore === "start" && (f40 += O20.readIgnored(this._input)), f40 = f40.replace(r24.allLineBreaks, `
`), b35 = this._create_token(l26.BLOCK_COMMENT, f40), b35.directives = S23;
      } else
        this._input.peek(1) === "/" && (f40 = this.__patterns.comment.read(), b35 = this._create_token(l26.COMMENT, f40));
    }
    return b35;
  }, E25.prototype._read_string = function(c27) {
    if (c27 === "`" || c27 === "'" || c27 === '"') {
      var b35 = this._input.next();
      return this.has_char_escapes = false, c27 === "`" ? b35 += this._read_string_recursive("`", true, "${") : b35 += this._read_string_recursive(c27), this.has_char_escapes && this._options.unescape_strings && (b35 = k29(b35)), this._input.peek() === c27 && (b35 += this._input.next()), b35 = b35.replace(r24.allLineBreaks, `
`), this._create_token(l26.STRING, b35);
    }
    return null;
  }, E25.prototype._allow_regexp_or_xml = function(c27) {
    return c27.type === l26.RESERVED && u35(c27.text, ["return", "case", "throw", "else", "do", "typeof", "yield"]) || c27.type === l26.END_EXPR && c27.text === ")" && c27.opened.previous.type === l26.RESERVED && u35(c27.opened.previous.text, ["if", "while", "for"]) || u35(c27.type, [
      l26.COMMENT,
      l26.START_EXPR,
      l26.START_BLOCK,
      l26.START,
      l26.END_BLOCK,
      l26.OPERATOR,
      l26.EQUALS,
      l26.EOF,
      l26.SEMICOLON,
      l26.COMMA
    ]);
  }, E25.prototype._read_regexp = function(c27, b35) {
    if (c27 === "/" && this._allow_regexp_or_xml(b35)) {
      for (var f40 = this._input.next(), S23 = false, s18 = false; this._input.hasNext() && (S23 || s18 || this._input.peek() !== c27) && !this._input.testChar(r24.newline); )
        f40 += this._input.peek(), S23 ? S23 = false : (S23 = this._input.peek() === "\\", this._input.peek() === "[" ? s18 = true : this._input.peek() === "]" && (s18 = false)), this._input.next();
      return this._input.peek() === c27 && (f40 += this._input.next(), f40 += this._input.read(r24.identifier)), this._create_token(l26.STRING, f40);
    }
    return null;
  }, E25.prototype._read_xml = function(c27, b35) {
    if (this._options.e4x && c27 === "<" && this._allow_regexp_or_xml(b35)) {
      var f40 = "", S23 = this.__patterns.xml.read_match();
      if (S23) {
        for (var s18 = S23[2].replace(/^{\s+/, "{").replace(/\s+}$/, "}"), d34 = s18.indexOf("{") === 0, m34 = 0; S23; ) {
          var R22 = !!S23[1], N22 = S23[2], W11 = !!S23[S23.length - 1] || N22.slice(0, 8) === "![CDATA[";
          if (!W11 && (N22 === s18 || d34 && N22.replace(/^{\s+/, "{").replace(/\s+}$/, "}")) && (R22 ? --m34 : ++m34), f40 += S23[0], m34 <= 0)
            break;
          S23 = this.__patterns.xml.read_match();
        }
        return S23 || (f40 += this._input.match(/[\s\S]*/g)[0]), f40 = f40.replace(r24.allLineBreaks, `
`), this._create_token(l26.STRING, f40);
      }
    }
    return null;
  };
  function k29(c27) {
    for (var b35 = "", f40 = 0, S23 = new a22(c27), s18 = null; S23.hasNext(); )
      if (s18 = S23.match(/([\s]|[^\\]|\\\\)+/g), s18 && (b35 += s18[0]), S23.peek() === "\\") {
        if (S23.next(), S23.peek() === "x")
          s18 = S23.match(/x([0-9A-Fa-f]{2})/g);
        else if (S23.peek() === "u")
          s18 = S23.match(/u([0-9A-Fa-f]{4})/g), s18 || (s18 = S23.match(/u\{([0-9A-Fa-f]+)\}/g));
        else {
          b35 += "\\", S23.hasNext() && (b35 += S23.next());
          continue;
        }
        if (!s18 || (f40 = parseInt(s18[1], 16), f40 > 126 && f40 <= 255 && s18[0].indexOf("x") === 0))
          return c27;
        f40 >= 0 && f40 < 32 || f40 > 1114111 ? b35 += "\\" + s18[0] : f40 === 34 || f40 === 39 || f40 === 92 ? b35 += "\\" + String.fromCharCode(f40) : b35 += String.fromCharCode(f40);
      }
    return b35;
  }
  return E25.prototype._read_string_recursive = function(c27, b35, f40) {
    var S23, s18;
    c27 === "'" ? s18 = this.__patterns.single_quote : c27 === '"' ? s18 = this.__patterns.double_quote : c27 === "`" ? s18 = this.__patterns.template_text : c27 === "}" && (s18 = this.__patterns.template_expression);
    for (var d34 = s18.read(), m34 = ""; this._input.hasNext(); ) {
      if (m34 = this._input.next(), m34 === c27 || !b35 && r24.newline.test(m34)) {
        this._input.back();
        break;
      } else
        m34 === "\\" && this._input.hasNext() ? (S23 = this._input.peek(), S23 === "x" || S23 === "u" ? this.has_char_escapes = true : S23 === "\r" && this._input.peek(1) === `
` && this._input.next(), m34 += this._input.next()) : f40 && (f40 === "${" && m34 === "$" && this._input.peek() === "{" && (m34 += this._input.next()), f40 === m34 && (c27 === "`" ? m34 += this._read_string_recursive("}", b35, "`") : m34 += this._read_string_recursive("`", b35, "${"), this._input.hasNext() && (m34 += this._input.next())));
      m34 += s18.read(), d34 += m34;
    }
    return d34;
  }, Y8.Tokenizer = E25, Y8.TOKEN = l26, Y8.positionable_operators = C21.slice(), Y8.line_starters = o13.slice(), Y8;
}
var Xe5;
function Gi() {
  if (Xe5)
    return Kt5;
  Xe5 = 1;
  var a22 = me6().Output, t19 = bi5().Token, i27 = mi5(), e11 = vi5().Options, r24 = mt9().Tokenizer, _21 = mt9().line_starters, h26 = mt9().positionable_operators, u35 = mt9().TOKEN;
  function l26(s18, d34) {
    return d34.indexOf(s18) !== -1;
  }
  function O20(s18) {
    return s18.replace(/^\s+/g, "");
  }
  function v31(s18) {
    for (var d34 = {}, m34 = 0; m34 < s18.length; m34++)
      d34[s18[m34].replace(/-/g, "_")] = s18[m34];
    return d34;
  }
  function y34(s18, d34) {
    return s18 && s18.type === u35.RESERVED && s18.text === d34;
  }
  function g32(s18, d34) {
    return s18 && s18.type === u35.RESERVED && l26(s18.text, d34);
  }
  var C21 = ["case", "return", "do", "if", "throw", "else", "await", "break", "continue", "async"], A18 = ["before-newline", "after-newline", "preserve-newline"], x36 = v31(A18), o13 = [x36.before_newline, x36.preserve_newline], n33 = {
    BlockStatement: "BlockStatement",
    // 'BLOCK'
    Statement: "Statement",
    // 'STATEMENT'
    ObjectLiteral: "ObjectLiteral",
    // 'OBJECT',
    ArrayLiteral: "ArrayLiteral",
    //'[EXPRESSION]',
    ForInitializer: "ForInitializer",
    //'(FOR-EXPRESSION)',
    Conditional: "Conditional",
    //'(COND-EXPRESSION)',
    Expression: "Expression"
    //'(EXPRESSION)'
  };
  function p26(s18, d34) {
    d34.multiline_frame || d34.mode === n33.ForInitializer || d34.mode === n33.Conditional || s18.remove_indent(d34.start_line_index);
  }
  function T21(s18) {
    s18 = s18.replace(i27.allLineBreaks, `
`);
    for (var d34 = [], m34 = s18.indexOf(`
`); m34 !== -1; )
      d34.push(s18.substring(0, m34)), s18 = s18.substring(m34 + 1), m34 = s18.indexOf(`
`);
    return s18.length && d34.push(s18), d34;
  }
  function E25(s18) {
    return s18 === n33.ArrayLiteral;
  }
  function k29(s18) {
    return l26(s18, [n33.Expression, n33.ForInitializer, n33.Conditional]);
  }
  function c27(s18, d34) {
    for (var m34 = 0; m34 < s18.length; m34++) {
      var R22 = s18[m34].trim();
      if (R22.charAt(0) !== d34)
        return false;
    }
    return true;
  }
  function b35(s18, d34) {
    for (var m34 = 0, R22 = s18.length, N22; m34 < R22; m34++)
      if (N22 = s18[m34], N22 && N22.indexOf(d34) !== 0)
        return false;
    return true;
  }
  function f40(s18, d34) {
    d34 = d34 || {}, this._source_text = s18 || "", this._output = null, this._tokens = null, this._last_last_text = null, this._flags = null, this._previous_flags = null, this._flag_store = null, this._options = new e11(d34);
  }
  f40.prototype.create_flags = function(s18, d34) {
    var m34 = 0;
    s18 && (m34 = s18.indentation_level, !this._output.just_added_newline() && s18.line_indent_level > m34 && (m34 = s18.line_indent_level));
    var R22 = {
      mode: d34,
      parent: s18,
      last_token: s18 ? s18.last_token : new t19(u35.START_BLOCK, ""),
      // last token text
      last_word: s18 ? s18.last_word : "",
      // last TOKEN.WORD passed
      declaration_statement: false,
      declaration_assignment: false,
      multiline_frame: false,
      inline_frame: false,
      if_block: false,
      else_block: false,
      class_start_block: false,
      // class A { INSIDE HERE } or class B extends C { INSIDE HERE }
      do_block: false,
      do_while: false,
      import_block: false,
      in_case_statement: false,
      // switch(..){ INSIDE HERE }
      in_case: false,
      // we're on the exact line with "case 0:"
      case_body: false,
      // the indented case-action block
      case_block: false,
      // the indented case-action block is wrapped with {}
      indentation_level: m34,
      alignment: 0,
      line_indent_level: s18 ? s18.line_indent_level : m34,
      start_line_index: this._output.get_line_number(),
      ternary_depth: 0
    };
    return R22;
  }, f40.prototype._reset = function(s18) {
    var d34 = s18.match(/^[\t ]*/)[0];
    this._last_last_text = "", this._output = new a22(this._options, d34), this._output.raw = this._options.test_output_raw, this._flag_store = [], this.set_mode(n33.BlockStatement);
    var m34 = new r24(s18, this._options);
    return this._tokens = m34.tokenize(), s18;
  }, f40.prototype.beautify = function() {
    if (this._options.disabled)
      return this._source_text;
    var s18, d34 = this._reset(this._source_text), m34 = this._options.eol;
    this._options.eol === "auto" && (m34 = `
`, d34 && i27.lineBreak.test(d34 || "") && (m34 = d34.match(i27.lineBreak)[0]));
    for (var R22 = this._tokens.next(); R22; )
      this.handle_token(R22), this._last_last_text = this._flags.last_token.text, this._flags.last_token = R22, R22 = this._tokens.next();
    return s18 = this._output.get_code(m34), s18;
  }, f40.prototype.handle_token = function(s18, d34) {
    s18.type === u35.START_EXPR ? this.handle_start_expr(s18) : s18.type === u35.END_EXPR ? this.handle_end_expr(s18) : s18.type === u35.START_BLOCK ? this.handle_start_block(s18) : s18.type === u35.END_BLOCK ? this.handle_end_block(s18) : s18.type === u35.WORD ? this.handle_word(s18) : s18.type === u35.RESERVED ? this.handle_word(s18) : s18.type === u35.SEMICOLON ? this.handle_semicolon(s18) : s18.type === u35.STRING ? this.handle_string(s18) : s18.type === u35.EQUALS ? this.handle_equals(s18) : s18.type === u35.OPERATOR ? this.handle_operator(s18) : s18.type === u35.COMMA ? this.handle_comma(s18) : s18.type === u35.BLOCK_COMMENT ? this.handle_block_comment(s18, d34) : s18.type === u35.COMMENT ? this.handle_comment(s18, d34) : s18.type === u35.DOT ? this.handle_dot(s18) : s18.type === u35.EOF ? this.handle_eof(s18) : s18.type === u35.UNKNOWN ? this.handle_unknown(s18, d34) : this.handle_unknown(s18, d34);
  }, f40.prototype.handle_whitespace_and_comments = function(s18, d34) {
    var m34 = s18.newlines, R22 = this._options.keep_array_indentation && E25(this._flags.mode);
    if (s18.comments_before)
      for (var N22 = s18.comments_before.next(); N22; )
        this.handle_whitespace_and_comments(N22, d34), this.handle_token(N22, d34), N22 = s18.comments_before.next();
    if (R22)
      for (var W11 = 0; W11 < m34; W11 += 1)
        this.print_newline(W11 > 0, d34);
    else if (this._options.max_preserve_newlines && m34 > this._options.max_preserve_newlines && (m34 = this._options.max_preserve_newlines), this._options.preserve_newlines && m34 > 1) {
      this.print_newline(false, d34);
      for (var M13 = 1; M13 < m34; M13 += 1)
        this.print_newline(true, d34);
    }
  };
  var S23 = ["async", "break", "continue", "return", "throw", "yield"];
  return f40.prototype.allow_wrap_or_preserved_newline = function(s18, d34) {
    if (d34 = d34 === void 0 ? false : d34, !this._output.just_added_newline()) {
      var m34 = this._options.preserve_newlines && s18.newlines || d34, R22 = l26(this._flags.last_token.text, h26) || l26(s18.text, h26);
      if (R22) {
        var N22 = l26(this._flags.last_token.text, h26) && l26(this._options.operator_position, o13) || l26(s18.text, h26);
        m34 = m34 && N22;
      }
      if (m34)
        this.print_newline(false, true);
      else if (this._options.wrap_line_length) {
        if (g32(this._flags.last_token, S23))
          return;
        this._output.set_wrap_point();
      }
    }
  }, f40.prototype.print_newline = function(s18, d34) {
    if (!d34 && this._flags.last_token.text !== ";" && this._flags.last_token.text !== "," && this._flags.last_token.text !== "=" && (this._flags.last_token.type !== u35.OPERATOR || this._flags.last_token.text === "--" || this._flags.last_token.text === "++"))
      for (var m34 = this._tokens.peek(); this._flags.mode === n33.Statement && !(this._flags.if_block && y34(m34, "else")) && !this._flags.do_block; )
        this.restore_mode();
    this._output.add_new_line(s18) && (this._flags.multiline_frame = true);
  }, f40.prototype.print_token_line_indentation = function(s18) {
    this._output.just_added_newline() && (this._options.keep_array_indentation && s18.newlines && (s18.text === "[" || E25(this._flags.mode)) ? (this._output.current_line.set_indent(-1), this._output.current_line.push(s18.whitespace_before), this._output.space_before_token = false) : this._output.set_indent(this._flags.indentation_level, this._flags.alignment) && (this._flags.line_indent_level = this._flags.indentation_level));
  }, f40.prototype.print_token = function(s18) {
    if (this._output.raw) {
      this._output.add_raw_token(s18);
      return;
    }
    if (this._options.comma_first && s18.previous && s18.previous.type === u35.COMMA && this._output.just_added_newline() && this._output.previous_line.last() === ",") {
      var d34 = this._output.previous_line.pop();
      this._output.previous_line.is_empty() && (this._output.previous_line.push(d34), this._output.trim(true), this._output.current_line.pop(), this._output.trim()), this.print_token_line_indentation(s18), this._output.add_token(","), this._output.space_before_token = true;
    }
    this.print_token_line_indentation(s18), this._output.non_breaking_space = true, this._output.add_token(s18.text), this._output.previous_token_wrapped && (this._flags.multiline_frame = true);
  }, f40.prototype.indent = function() {
    this._flags.indentation_level += 1, this._output.set_indent(this._flags.indentation_level, this._flags.alignment);
  }, f40.prototype.deindent = function() {
    this._flags.indentation_level > 0 && (!this._flags.parent || this._flags.indentation_level > this._flags.parent.indentation_level) && (this._flags.indentation_level -= 1, this._output.set_indent(this._flags.indentation_level, this._flags.alignment));
  }, f40.prototype.set_mode = function(s18) {
    this._flags ? (this._flag_store.push(this._flags), this._previous_flags = this._flags) : this._previous_flags = this.create_flags(null, s18), this._flags = this.create_flags(this._previous_flags, s18), this._output.set_indent(this._flags.indentation_level, this._flags.alignment);
  }, f40.prototype.restore_mode = function() {
    this._flag_store.length > 0 && (this._previous_flags = this._flags, this._flags = this._flag_store.pop(), this._previous_flags.mode === n33.Statement && p26(this._output, this._previous_flags), this._output.set_indent(this._flags.indentation_level, this._flags.alignment));
  }, f40.prototype.start_of_object_property = function() {
    return this._flags.parent.mode === n33.ObjectLiteral && this._flags.mode === n33.Statement && (this._flags.last_token.text === ":" && this._flags.ternary_depth === 0 || g32(this._flags.last_token, ["get", "set"]));
  }, f40.prototype.start_of_statement = function(s18) {
    var d34 = false;
    return d34 = d34 || g32(this._flags.last_token, ["var", "let", "const"]) && s18.type === u35.WORD, d34 = d34 || y34(this._flags.last_token, "do"), d34 = d34 || !(this._flags.parent.mode === n33.ObjectLiteral && this._flags.mode === n33.Statement) && g32(this._flags.last_token, S23) && !s18.newlines, d34 = d34 || y34(this._flags.last_token, "else") && !(y34(s18, "if") && !s18.comments_before), d34 = d34 || this._flags.last_token.type === u35.END_EXPR && (this._previous_flags.mode === n33.ForInitializer || this._previous_flags.mode === n33.Conditional), d34 = d34 || this._flags.last_token.type === u35.WORD && this._flags.mode === n33.BlockStatement && !this._flags.in_case && !(s18.text === "--" || s18.text === "++") && this._last_last_text !== "function" && s18.type !== u35.WORD && s18.type !== u35.RESERVED, d34 = d34 || this._flags.mode === n33.ObjectLiteral && (this._flags.last_token.text === ":" && this._flags.ternary_depth === 0 || g32(this._flags.last_token, ["get", "set"])), d34 ? (this.set_mode(n33.Statement), this.indent(), this.handle_whitespace_and_comments(s18, true), this.start_of_object_property() || this.allow_wrap_or_preserved_newline(
      s18,
      g32(s18, ["do", "for", "if", "while"])
    ), true) : false;
  }, f40.prototype.handle_start_expr = function(s18) {
    this.start_of_statement(s18) || this.handle_whitespace_and_comments(s18);
    var d34 = n33.Expression;
    if (s18.text === "[") {
      if (this._flags.last_token.type === u35.WORD || this._flags.last_token.text === ")") {
        g32(this._flags.last_token, _21) && (this._output.space_before_token = true), this.print_token(s18), this.set_mode(d34), this.indent(), this._options.space_in_paren && (this._output.space_before_token = true);
        return;
      }
      d34 = n33.ArrayLiteral, E25(this._flags.mode) && (this._flags.last_token.text === "[" || this._flags.last_token.text === "," && (this._last_last_text === "]" || this._last_last_text === "}")) && (this._options.keep_array_indentation || this.print_newline()), l26(this._flags.last_token.type, [u35.START_EXPR, u35.END_EXPR, u35.WORD, u35.OPERATOR, u35.DOT]) || (this._output.space_before_token = true);
    } else {
      if (this._flags.last_token.type === u35.RESERVED)
        this._flags.last_token.text === "for" ? (this._output.space_before_token = this._options.space_before_conditional, d34 = n33.ForInitializer) : l26(this._flags.last_token.text, ["if", "while", "switch"]) ? (this._output.space_before_token = this._options.space_before_conditional, d34 = n33.Conditional) : l26(this._flags.last_word, ["await", "async"]) ? this._output.space_before_token = true : this._flags.last_token.text === "import" && s18.whitespace_before === "" ? this._output.space_before_token = false : (l26(this._flags.last_token.text, _21) || this._flags.last_token.text === "catch") && (this._output.space_before_token = true);
      else if (this._flags.last_token.type === u35.EQUALS || this._flags.last_token.type === u35.OPERATOR)
        this.start_of_object_property() || this.allow_wrap_or_preserved_newline(s18);
      else if (this._flags.last_token.type === u35.WORD) {
        this._output.space_before_token = false;
        var m34 = this._tokens.peek(-3);
        if (this._options.space_after_named_function && m34) {
          var R22 = this._tokens.peek(-4);
          g32(m34, ["async", "function"]) || m34.text === "*" && g32(R22, ["async", "function"]) ? this._output.space_before_token = true : this._flags.mode === n33.ObjectLiteral ? (m34.text === "{" || m34.text === "," || m34.text === "*" && (R22.text === "{" || R22.text === ",")) && (this._output.space_before_token = true) : this._flags.parent && this._flags.parent.class_start_block && (this._output.space_before_token = true);
        }
      } else
        this.allow_wrap_or_preserved_newline(s18);
      (this._flags.last_token.type === u35.RESERVED && (this._flags.last_word === "function" || this._flags.last_word === "typeof") || this._flags.last_token.text === "*" && (l26(this._last_last_text, ["function", "yield"]) || this._flags.mode === n33.ObjectLiteral && l26(this._last_last_text, ["{", ","]))) && (this._output.space_before_token = this._options.space_after_anon_function);
    }
    this._flags.last_token.text === ";" || this._flags.last_token.type === u35.START_BLOCK ? this.print_newline() : (this._flags.last_token.type === u35.END_EXPR || this._flags.last_token.type === u35.START_EXPR || this._flags.last_token.type === u35.END_BLOCK || this._flags.last_token.text === "." || this._flags.last_token.type === u35.COMMA) && this.allow_wrap_or_preserved_newline(s18, s18.newlines), this.print_token(s18), this.set_mode(d34), this._options.space_in_paren && (this._output.space_before_token = true), this.indent();
  }, f40.prototype.handle_end_expr = function(s18) {
    for (; this._flags.mode === n33.Statement; )
      this.restore_mode();
    this.handle_whitespace_and_comments(s18), this._flags.multiline_frame && this.allow_wrap_or_preserved_newline(
      s18,
      s18.text === "]" && E25(this._flags.mode) && !this._options.keep_array_indentation
    ), this._options.space_in_paren && (this._flags.last_token.type === u35.START_EXPR && !this._options.space_in_empty_paren ? (this._output.trim(), this._output.space_before_token = false) : this._output.space_before_token = true), this.deindent(), this.print_token(s18), this.restore_mode(), p26(this._output, this._previous_flags), this._flags.do_while && this._previous_flags.mode === n33.Conditional && (this._previous_flags.mode = n33.Expression, this._flags.do_block = false, this._flags.do_while = false);
  }, f40.prototype.handle_start_block = function(s18) {
    this.handle_whitespace_and_comments(s18);
    var d34 = this._tokens.peek(), m34 = this._tokens.peek(1);
    this._flags.last_word === "switch" && this._flags.last_token.type === u35.END_EXPR ? (this.set_mode(n33.BlockStatement), this._flags.in_case_statement = true) : this._flags.case_body ? this.set_mode(n33.BlockStatement) : m34 && (l26(m34.text, [":", ","]) && l26(d34.type, [u35.STRING, u35.WORD, u35.RESERVED]) || l26(d34.text, ["get", "set", "..."]) && l26(m34.type, [u35.WORD, u35.RESERVED])) ? l26(this._last_last_text, ["class", "interface"]) && !l26(m34.text, [":", ","]) ? this.set_mode(n33.BlockStatement) : this.set_mode(n33.ObjectLiteral) : this._flags.last_token.type === u35.OPERATOR && this._flags.last_token.text === "=>" ? this.set_mode(n33.BlockStatement) : l26(this._flags.last_token.type, [u35.EQUALS, u35.START_EXPR, u35.COMMA, u35.OPERATOR]) || g32(this._flags.last_token, ["return", "throw", "import", "default"]) ? this.set_mode(n33.ObjectLiteral) : this.set_mode(n33.BlockStatement), this._flags.last_token && g32(this._flags.last_token.previous, ["class", "extends"]) && (this._flags.class_start_block = true);
    var R22 = !d34.comments_before && d34.text === "}", N22 = R22 && this._flags.last_word === "function" && this._flags.last_token.type === u35.END_EXPR;
    if (this._options.brace_preserve_inline) {
      var W11 = 0, M13 = null;
      this._flags.inline_frame = true;
      do
        if (W11 += 1, M13 = this._tokens.peek(W11 - 1), M13.newlines) {
          this._flags.inline_frame = false;
          break;
        }
      while (M13.type !== u35.EOF && !(M13.type === u35.END_BLOCK && M13.opened === s18));
    }
    (this._options.brace_style === "expand" || this._options.brace_style === "none" && s18.newlines) && !this._flags.inline_frame ? this._flags.last_token.type !== u35.OPERATOR && (N22 || this._flags.last_token.type === u35.EQUALS || g32(this._flags.last_token, C21) && this._flags.last_token.text !== "else") ? this._output.space_before_token = true : this.print_newline(false, true) : (E25(this._previous_flags.mode) && (this._flags.last_token.type === u35.START_EXPR || this._flags.last_token.type === u35.COMMA) && ((this._flags.last_token.type === u35.COMMA || this._options.space_in_paren) && (this._output.space_before_token = true), (this._flags.last_token.type === u35.COMMA || this._flags.last_token.type === u35.START_EXPR && this._flags.inline_frame) && (this.allow_wrap_or_preserved_newline(s18), this._previous_flags.multiline_frame = this._previous_flags.multiline_frame || this._flags.multiline_frame, this._flags.multiline_frame = false)), this._flags.last_token.type !== u35.OPERATOR && this._flags.last_token.type !== u35.START_EXPR && (l26(this._flags.last_token.type, [u35.START_BLOCK, u35.SEMICOLON]) && !this._flags.inline_frame ? this.print_newline() : this._output.space_before_token = true)), this.print_token(s18), this.indent(), !R22 && !(this._options.brace_preserve_inline && this._flags.inline_frame) && this.print_newline();
  }, f40.prototype.handle_end_block = function(s18) {
    for (this.handle_whitespace_and_comments(s18); this._flags.mode === n33.Statement; )
      this.restore_mode();
    var d34 = this._flags.last_token.type === u35.START_BLOCK;
    this._flags.inline_frame && !d34 ? this._output.space_before_token = true : this._options.brace_style === "expand" ? d34 || this.print_newline() : d34 || (E25(this._flags.mode) && this._options.keep_array_indentation ? (this._options.keep_array_indentation = false, this.print_newline(), this._options.keep_array_indentation = true) : this.print_newline()), this.restore_mode(), this.print_token(s18);
  }, f40.prototype.handle_word = function(s18) {
    if (s18.type === u35.RESERVED) {
      if (l26(s18.text, ["set", "get"]) && this._flags.mode !== n33.ObjectLiteral)
        s18.type = u35.WORD;
      else if (s18.text === "import" && l26(this._tokens.peek().text, ["(", "."]))
        s18.type = u35.WORD;
      else if (l26(s18.text, ["as", "from"]) && !this._flags.import_block)
        s18.type = u35.WORD;
      else if (this._flags.mode === n33.ObjectLiteral) {
        var d34 = this._tokens.peek();
        d34.text === ":" && (s18.type = u35.WORD);
      }
    }
    if (this.start_of_statement(s18) ? g32(this._flags.last_token, ["var", "let", "const"]) && s18.type === u35.WORD && (this._flags.declaration_statement = true) : s18.newlines && !k29(this._flags.mode) && (this._flags.last_token.type !== u35.OPERATOR || this._flags.last_token.text === "--" || this._flags.last_token.text === "++") && this._flags.last_token.type !== u35.EQUALS && (this._options.preserve_newlines || !g32(this._flags.last_token, ["var", "let", "const", "set", "get"])) ? (this.handle_whitespace_and_comments(s18), this.print_newline()) : this.handle_whitespace_and_comments(s18), this._flags.do_block && !this._flags.do_while)
      if (y34(s18, "while")) {
        this._output.space_before_token = true, this.print_token(s18), this._output.space_before_token = true, this._flags.do_while = true;
        return;
      } else
        this.print_newline(), this._flags.do_block = false;
    if (this._flags.if_block)
      if (!this._flags.else_block && y34(s18, "else"))
        this._flags.else_block = true;
      else {
        for (; this._flags.mode === n33.Statement; )
          this.restore_mode();
        this._flags.if_block = false, this._flags.else_block = false;
      }
    if (this._flags.in_case_statement && g32(s18, ["case", "default"])) {
      this.print_newline(), !this._flags.case_block && (this._flags.case_body || this._options.jslint_happy) && this.deindent(), this._flags.case_body = false, this.print_token(s18), this._flags.in_case = true;
      return;
    }
    if ((this._flags.last_token.type === u35.COMMA || this._flags.last_token.type === u35.START_EXPR || this._flags.last_token.type === u35.EQUALS || this._flags.last_token.type === u35.OPERATOR) && !this.start_of_object_property() && !// start of object property is different for numeric values with +/- prefix operators
    (l26(this._flags.last_token.text, ["+", "-"]) && this._last_last_text === ":" && this._flags.parent.mode === n33.ObjectLiteral) && this.allow_wrap_or_preserved_newline(s18), y34(s18, "function")) {
      (l26(this._flags.last_token.text, ["}", ";"]) || this._output.just_added_newline() && !(l26(this._flags.last_token.text, ["(", "[", "{", ":", "=", ","]) || this._flags.last_token.type === u35.OPERATOR)) && !this._output.just_added_blankline() && !s18.comments_before && (this.print_newline(), this.print_newline(true)), this._flags.last_token.type === u35.RESERVED || this._flags.last_token.type === u35.WORD ? g32(this._flags.last_token, ["get", "set", "new", "export"]) || g32(this._flags.last_token, S23) ? this._output.space_before_token = true : y34(this._flags.last_token, "default") && this._last_last_text === "export" ? this._output.space_before_token = true : this._flags.last_token.text === "declare" ? this._output.space_before_token = true : this.print_newline() : this._flags.last_token.type === u35.OPERATOR || this._flags.last_token.text === "=" ? this._output.space_before_token = true : !this._flags.multiline_frame && (k29(this._flags.mode) || E25(this._flags.mode)) || this.print_newline(), this.print_token(s18), this._flags.last_word = s18.text;
      return;
    }
    var m34 = "NONE";
    if (this._flags.last_token.type === u35.END_BLOCK ? this._previous_flags.inline_frame ? m34 = "SPACE" : g32(s18, ["else", "catch", "finally", "from"]) ? this._options.brace_style === "expand" || this._options.brace_style === "end-expand" || this._options.brace_style === "none" && s18.newlines ? m34 = "NEWLINE" : (m34 = "SPACE", this._output.space_before_token = true) : m34 = "NEWLINE" : this._flags.last_token.type === u35.SEMICOLON && this._flags.mode === n33.BlockStatement ? m34 = "NEWLINE" : this._flags.last_token.type === u35.SEMICOLON && k29(this._flags.mode) ? m34 = "SPACE" : this._flags.last_token.type === u35.STRING ? m34 = "NEWLINE" : this._flags.last_token.type === u35.RESERVED || this._flags.last_token.type === u35.WORD || this._flags.last_token.text === "*" && (l26(this._last_last_text, ["function", "yield"]) || this._flags.mode === n33.ObjectLiteral && l26(this._last_last_text, ["{", ","])) ? m34 = "SPACE" : this._flags.last_token.type === u35.START_BLOCK ? this._flags.inline_frame ? m34 = "SPACE" : m34 = "NEWLINE" : this._flags.last_token.type === u35.END_EXPR && (this._output.space_before_token = true, m34 = "NEWLINE"), g32(s18, _21) && this._flags.last_token.text !== ")" && (this._flags.inline_frame || this._flags.last_token.text === "else" || this._flags.last_token.text === "export" ? m34 = "SPACE" : m34 = "NEWLINE"), g32(s18, ["else", "catch", "finally"]))
      if ((!(this._flags.last_token.type === u35.END_BLOCK && this._previous_flags.mode === n33.BlockStatement) || this._options.brace_style === "expand" || this._options.brace_style === "end-expand" || this._options.brace_style === "none" && s18.newlines) && !this._flags.inline_frame)
        this.print_newline();
      else {
        this._output.trim(true);
        var R22 = this._output.current_line;
        R22.last() !== "}" && this.print_newline(), this._output.space_before_token = true;
      }
    else
      m34 === "NEWLINE" ? g32(this._flags.last_token, C21) ? this._output.space_before_token = true : this._flags.last_token.text === "declare" && g32(s18, ["var", "let", "const"]) ? this._output.space_before_token = true : this._flags.last_token.type !== u35.END_EXPR ? (this._flags.last_token.type !== u35.START_EXPR || !g32(s18, ["var", "let", "const"])) && this._flags.last_token.text !== ":" && (y34(s18, "if") && y34(s18.previous, "else") ? this._output.space_before_token = true : this.print_newline()) : g32(s18, _21) && this._flags.last_token.text !== ")" && this.print_newline() : this._flags.multiline_frame && E25(this._flags.mode) && this._flags.last_token.text === "," && this._last_last_text === "}" ? this.print_newline() : m34 === "SPACE" && (this._output.space_before_token = true);
    s18.previous && (s18.previous.type === u35.WORD || s18.previous.type === u35.RESERVED) && (this._output.space_before_token = true), this.print_token(s18), this._flags.last_word = s18.text, s18.type === u35.RESERVED && (s18.text === "do" ? this._flags.do_block = true : s18.text === "if" ? this._flags.if_block = true : s18.text === "import" ? this._flags.import_block = true : this._flags.import_block && y34(s18, "from") && (this._flags.import_block = false));
  }, f40.prototype.handle_semicolon = function(s18) {
    this.start_of_statement(s18) ? this._output.space_before_token = false : this.handle_whitespace_and_comments(s18);
    for (var d34 = this._tokens.peek(); this._flags.mode === n33.Statement && !(this._flags.if_block && y34(d34, "else")) && !this._flags.do_block; )
      this.restore_mode();
    this._flags.import_block && (this._flags.import_block = false), this.print_token(s18);
  }, f40.prototype.handle_string = function(s18) {
    s18.text.startsWith("`") && s18.newlines === 0 && s18.whitespace_before === "" && (s18.previous.text === ")" || this._flags.last_token.type === u35.WORD) || (this.start_of_statement(s18) ? this._output.space_before_token = true : (this.handle_whitespace_and_comments(s18), this._flags.last_token.type === u35.RESERVED || this._flags.last_token.type === u35.WORD || this._flags.inline_frame ? this._output.space_before_token = true : this._flags.last_token.type === u35.COMMA || this._flags.last_token.type === u35.START_EXPR || this._flags.last_token.type === u35.EQUALS || this._flags.last_token.type === u35.OPERATOR ? this.start_of_object_property() || this.allow_wrap_or_preserved_newline(s18) : s18.text.startsWith("`") && this._flags.last_token.type === u35.END_EXPR && (s18.previous.text === "]" || s18.previous.text === ")") && s18.newlines === 0 ? this._output.space_before_token = true : this.print_newline())), this.print_token(s18);
  }, f40.prototype.handle_equals = function(s18) {
    this.start_of_statement(s18) || this.handle_whitespace_and_comments(s18), this._flags.declaration_statement && (this._flags.declaration_assignment = true), this._output.space_before_token = true, this.print_token(s18), this._output.space_before_token = true;
  }, f40.prototype.handle_comma = function(s18) {
    this.handle_whitespace_and_comments(s18, true), this.print_token(s18), this._output.space_before_token = true, this._flags.declaration_statement ? (k29(this._flags.parent.mode) && (this._flags.declaration_assignment = false), this._flags.declaration_assignment ? (this._flags.declaration_assignment = false, this.print_newline(false, true)) : this._options.comma_first && this.allow_wrap_or_preserved_newline(s18)) : this._flags.mode === n33.ObjectLiteral || this._flags.mode === n33.Statement && this._flags.parent.mode === n33.ObjectLiteral ? (this._flags.mode === n33.Statement && this.restore_mode(), this._flags.inline_frame || this.print_newline()) : this._options.comma_first && this.allow_wrap_or_preserved_newline(s18);
  }, f40.prototype.handle_operator = function(s18) {
    var d34 = s18.text === "*" && (g32(this._flags.last_token, ["function", "yield"]) || l26(this._flags.last_token.type, [u35.START_BLOCK, u35.COMMA, u35.END_BLOCK, u35.SEMICOLON])), m34 = l26(s18.text, ["-", "+"]) && (l26(this._flags.last_token.type, [u35.START_BLOCK, u35.START_EXPR, u35.EQUALS, u35.OPERATOR]) || l26(this._flags.last_token.text, _21) || this._flags.last_token.text === ",");
    if (!this.start_of_statement(s18)) {
      var R22 = !d34;
      this.handle_whitespace_and_comments(s18, R22);
    }
    if (s18.text === "*" && this._flags.last_token.type === u35.DOT) {
      this.print_token(s18);
      return;
    }
    if (s18.text === "::") {
      this.print_token(s18);
      return;
    }
    if (l26(s18.text, ["-", "+"]) && this.start_of_object_property()) {
      this.print_token(s18);
      return;
    }
    if (this._flags.last_token.type === u35.OPERATOR && l26(this._options.operator_position, o13) && this.allow_wrap_or_preserved_newline(s18), s18.text === ":" && this._flags.in_case) {
      this.print_token(s18), this._flags.in_case = false, this._flags.case_body = true, this._tokens.peek().type !== u35.START_BLOCK ? (this.indent(), this.print_newline(), this._flags.case_block = false) : (this._flags.case_block = true, this._output.space_before_token = true);
      return;
    }
    var N22 = true, W11 = true, M13 = false;
    if (s18.text === ":" ? this._flags.ternary_depth === 0 ? N22 = false : (this._flags.ternary_depth -= 1, M13 = true) : s18.text === "?" && (this._flags.ternary_depth += 1), !m34 && !d34 && this._options.preserve_newlines && l26(s18.text, h26)) {
      var $25 = s18.text === ":", ct12 = $25 && M13, Wt9 = $25 && !M13;
      switch (this._options.operator_position) {
        case x36.before_newline:
          this._output.space_before_token = !Wt9, this.print_token(s18), (!$25 || ct12) && this.allow_wrap_or_preserved_newline(s18), this._output.space_before_token = true;
          return;
        case x36.after_newline:
          this._output.space_before_token = true, !$25 || ct12 ? this._tokens.peek().newlines ? this.print_newline(false, true) : this.allow_wrap_or_preserved_newline(s18) : this._output.space_before_token = false, this.print_token(s18), this._output.space_before_token = true;
          return;
        case x36.preserve_newline:
          Wt9 || this.allow_wrap_or_preserved_newline(s18), N22 = !(this._output.just_added_newline() || Wt9), this._output.space_before_token = N22, this.print_token(s18), this._output.space_before_token = true;
          return;
      }
    }
    if (d34) {
      this.allow_wrap_or_preserved_newline(s18), N22 = false;
      var xe6 = this._tokens.peek();
      W11 = xe6 && l26(xe6.type, [u35.WORD, u35.RESERVED]);
    } else if (s18.text === "...")
      this.allow_wrap_or_preserved_newline(s18), N22 = this._flags.last_token.type === u35.START_BLOCK, W11 = false;
    else if (l26(s18.text, ["--", "++", "!", "~"]) || m34) {
      if ((this._flags.last_token.type === u35.COMMA || this._flags.last_token.type === u35.START_EXPR) && this.allow_wrap_or_preserved_newline(s18), N22 = false, W11 = false, s18.newlines && (s18.text === "--" || s18.text === "++" || s18.text === "~")) {
        var Ee5 = g32(this._flags.last_token, C21) && s18.newlines;
        Ee5 && (this._previous_flags.if_block || this._previous_flags.else_block) && this.restore_mode(), this.print_newline(Ee5, true);
      }
      this._flags.last_token.text === ";" && k29(this._flags.mode) && (N22 = true), this._flags.last_token.type === u35.RESERVED ? N22 = true : this._flags.last_token.type === u35.END_EXPR ? N22 = !(this._flags.last_token.text === "]" && (s18.text === "--" || s18.text === "++")) : this._flags.last_token.type === u35.OPERATOR && (N22 = l26(s18.text, ["--", "-", "++", "+"]) && l26(this._flags.last_token.text, ["--", "-", "++", "+"]), l26(s18.text, ["+", "-"]) && l26(this._flags.last_token.text, ["--", "++"]) && (W11 = true)), (this._flags.mode === n33.BlockStatement && !this._flags.inline_frame || this._flags.mode === n33.Statement) && (this._flags.last_token.text === "{" || this._flags.last_token.text === ";") && this.print_newline();
    }
    this._output.space_before_token = this._output.space_before_token || N22, this.print_token(s18), this._output.space_before_token = W11;
  }, f40.prototype.handle_block_comment = function(s18, d34) {
    if (this._output.raw) {
      this._output.add_raw_token(s18), s18.directives && s18.directives.preserve === "end" && (this._output.raw = this._options.test_output_raw);
      return;
    }
    if (s18.directives) {
      this.print_newline(false, d34), this.print_token(s18), s18.directives.preserve === "start" && (this._output.raw = true), this.print_newline(false, true);
      return;
    }
    if (!i27.newline.test(s18.text) && !s18.newlines) {
      this._output.space_before_token = true, this.print_token(s18), this._output.space_before_token = true;
      return;
    } else
      this.print_block_commment(s18, d34);
  }, f40.prototype.print_block_commment = function(s18, d34) {
    var m34 = T21(s18.text), R22, N22 = false, W11 = false, M13 = s18.whitespace_before, $25 = M13.length;
    if (this.print_newline(false, d34), this.print_token_line_indentation(s18), this._output.add_token(m34[0]), this.print_newline(false, d34), m34.length > 1) {
      for (m34 = m34.slice(1), N22 = c27(m34, "*"), W11 = b35(m34, M13), N22 && (this._flags.alignment = 1), R22 = 0; R22 < m34.length; R22++)
        N22 ? (this.print_token_line_indentation(s18), this._output.add_token(O20(m34[R22]))) : W11 && m34[R22] ? (this.print_token_line_indentation(s18), this._output.add_token(m34[R22].substring($25))) : (this._output.current_line.set_indent(-1), this._output.add_token(m34[R22])), this.print_newline(false, d34);
      this._flags.alignment = 0;
    }
  }, f40.prototype.handle_comment = function(s18, d34) {
    s18.newlines ? this.print_newline(false, d34) : this._output.trim(true), this._output.space_before_token = true, this.print_token(s18), this.print_newline(false, d34);
  }, f40.prototype.handle_dot = function(s18) {
    this.start_of_statement(s18) || this.handle_whitespace_and_comments(s18, true), this._flags.last_token.text.match("^[0-9]+$") && (this._output.space_before_token = true), g32(this._flags.last_token, C21) ? this._output.space_before_token = false : this.allow_wrap_or_preserved_newline(
      s18,
      this._flags.last_token.text === ")" && this._options.break_chained_methods
    ), this._options.unindent_chained_methods && this._output.just_added_newline() && this.deindent(), this.print_token(s18);
  }, f40.prototype.handle_unknown = function(s18, d34) {
    this.print_token(s18), s18.text[s18.text.length - 1] === `
` && this.print_newline(false, d34);
  }, f40.prototype.handle_eof = function(s18) {
    for (; this._flags.mode === n33.Statement; )
      this.restore_mode();
    this.handle_whitespace_and_comments(s18);
  }, Kt5.Beautifier = f40, Kt5;
}
var Qe6;
function Xi2() {
  if (Qe6)
    return gt9.exports;
  Qe6 = 1;
  var a22 = Gi().Beautifier, t19 = vi5().Options;
  function i27(e11, r24) {
    var _21 = new a22(e11, r24);
    return _21.beautify();
  }
  return gt9.exports = i27, gt9.exports.defaultOptions = function() {
    return new t19();
  }, gt9.exports;
}
var vt6 = { exports: {} };
var Jt5 = {};
var Zt5 = {};
var He5;
function wi5() {
  if (He5)
    return Zt5;
  He5 = 1;
  var a22 = ve6().Options;
  function t19(i27) {
    a22.call(this, i27, "css"), this.selector_separator_newline = this._get_boolean("selector_separator_newline", true), this.newline_between_rules = this._get_boolean("newline_between_rules", true);
    var e11 = this._get_boolean("space_around_selector_separator");
    this.space_around_combinator = this._get_boolean("space_around_combinator") || e11;
    var r24 = this._get_selection_list("brace_style", ["collapse", "expand", "end-expand", "none", "preserve-inline"]);
    this.brace_style = "collapse";
    for (var _21 = 0; _21 < r24.length; _21++)
      r24[_21] !== "expand" ? this.brace_style = "collapse" : this.brace_style = r24[_21];
  }
  return t19.prototype = new a22(), Zt5.Options = t19, Zt5;
}
var Je5;
function Qi2() {
  if (Je5)
    return Jt5;
  Je5 = 1;
  var a22 = wi5().Options, t19 = me6().Output, i27 = ye5().InputScanner, e11 = we6().Directives, r24 = new e11(/\/\*/, /\*\//), _21 = /\r\n|[\r\n]/, h26 = /\r\n|[\r\n]/g, u35 = /\s/, l26 = /(?:\s|\n)+/g, O20 = /\/\*(?:[\s\S]*?)((?:\*\/)|$)/g, v31 = /\/\/(?:[^\n\r\u2028\u2029]*)/g;
  function y34(g32, C21) {
    this._source_text = g32 || "", this._options = new a22(C21), this._ch = null, this._input = null, this.NESTED_AT_RULE = {
      page: true,
      "font-face": true,
      keyframes: true,
      // also in CONDITIONAL_GROUP_RULE below
      media: true,
      supports: true,
      document: true
    }, this.CONDITIONAL_GROUP_RULE = {
      media: true,
      supports: true,
      document: true
    }, this.NON_SEMICOLON_NEWLINE_PROPERTY = [
      "grid-template-areas",
      "grid-template"
    ];
  }
  return y34.prototype.eatString = function(g32) {
    var C21 = "";
    for (this._ch = this._input.next(); this._ch; ) {
      if (C21 += this._ch, this._ch === "\\")
        C21 += this._input.next();
      else if (g32.indexOf(this._ch) !== -1 || this._ch === `
`)
        break;
      this._ch = this._input.next();
    }
    return C21;
  }, y34.prototype.eatWhitespace = function(g32) {
    for (var C21 = u35.test(this._input.peek()), A18 = 0; u35.test(this._input.peek()); )
      this._ch = this._input.next(), g32 && this._ch === `
` && (A18 === 0 || A18 < this._options.max_preserve_newlines) && (A18++, this._output.add_new_line(true));
    return C21;
  }, y34.prototype.foundNestedPseudoClass = function() {
    for (var g32 = 0, C21 = 1, A18 = this._input.peek(C21); A18; ) {
      if (A18 === "{")
        return true;
      if (A18 === "(")
        g32 += 1;
      else if (A18 === ")") {
        if (g32 === 0)
          return false;
        g32 -= 1;
      } else if (A18 === ";" || A18 === "}")
        return false;
      C21++, A18 = this._input.peek(C21);
    }
    return false;
  }, y34.prototype.print_string = function(g32) {
    this._output.set_indent(this._indentLevel), this._output.non_breaking_space = true, this._output.add_token(g32);
  }, y34.prototype.preserveSingleSpace = function(g32) {
    g32 && (this._output.space_before_token = true);
  }, y34.prototype.indent = function() {
    this._indentLevel++;
  }, y34.prototype.outdent = function() {
    this._indentLevel > 0 && this._indentLevel--;
  }, y34.prototype.beautify = function() {
    if (this._options.disabled)
      return this._source_text;
    var g32 = this._source_text, C21 = this._options.eol;
    C21 === "auto" && (C21 = `
`, g32 && _21.test(g32 || "") && (C21 = g32.match(_21)[0])), g32 = g32.replace(h26, `
`);
    var A18 = g32.match(/^[\t ]*/)[0];
    this._output = new t19(this._options, A18), this._input = new i27(g32), this._indentLevel = 0, this._nestedLevel = 0, this._ch = null;
    for (var x36 = 0, o13 = false, n33 = false, p26 = false, T21 = false, E25 = false, k29 = this._ch, c27 = false, b35, f40, S23; b35 = this._input.read(l26), f40 = b35 !== "", S23 = k29, this._ch = this._input.next(), this._ch === "\\" && this._input.hasNext() && (this._ch += this._input.next()), k29 = this._ch, this._ch; )
      if (this._ch === "/" && this._input.peek() === "*") {
        this._output.add_new_line(), this._input.back();
        var s18 = this._input.read(O20), d34 = r24.get_directives(s18);
        d34 && d34.ignore === "start" && (s18 += r24.readIgnored(this._input)), this.print_string(s18), this.eatWhitespace(true), this._output.add_new_line();
      } else if (this._ch === "/" && this._input.peek() === "/")
        this._output.space_before_token = true, this._input.back(), this.print_string(this._input.read(v31)), this.eatWhitespace(true);
      else if (this._ch === "$") {
        this.preserveSingleSpace(f40), this.print_string(this._ch);
        var m34 = this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);
        m34.match(/[ :]$/) && (m34 = this.eatString(": ").replace(/\s+$/, ""), this.print_string(m34), this._output.space_before_token = true), x36 === 0 && m34.indexOf(":") !== -1 && (n33 = true, this.indent());
      } else if (this._ch === "@")
        if (this.preserveSingleSpace(f40), this._input.peek() === "{")
          this.print_string(this._ch + this.eatString("}"));
        else {
          this.print_string(this._ch);
          var R22 = this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);
          R22.match(/[ :]$/) && (R22 = this.eatString(": ").replace(/\s+$/, ""), this.print_string(R22), this._output.space_before_token = true), x36 === 0 && R22.indexOf(":") !== -1 ? (n33 = true, this.indent()) : R22 in this.NESTED_AT_RULE ? (this._nestedLevel += 1, R22 in this.CONDITIONAL_GROUP_RULE && (p26 = true)) : x36 === 0 && !n33 && (T21 = true);
        }
      else if (this._ch === "#" && this._input.peek() === "{")
        this.preserveSingleSpace(f40), this.print_string(this._ch + this.eatString("}"));
      else if (this._ch === "{")
        n33 && (n33 = false, this.outdent()), T21 = false, p26 ? (p26 = false, o13 = this._indentLevel >= this._nestedLevel) : o13 = this._indentLevel >= this._nestedLevel - 1, this._options.newline_between_rules && o13 && this._output.previous_line && this._output.previous_line.item(-1) !== "{" && this._output.ensure_empty_line_above("/", ","), this._output.space_before_token = true, this._options.brace_style === "expand" ? (this._output.add_new_line(), this.print_string(this._ch), this.indent(), this._output.set_indent(this._indentLevel)) : (S23 === "(" ? this._output.space_before_token = false : S23 !== "," && this.indent(), this.print_string(this._ch)), this.eatWhitespace(true), this._output.add_new_line();
      else if (this._ch === "}")
        this.outdent(), this._output.add_new_line(), S23 === "{" && this._output.trim(true), n33 && (this.outdent(), n33 = false), this.print_string(this._ch), o13 = false, this._nestedLevel && this._nestedLevel--, this.eatWhitespace(true), this._output.add_new_line(), this._options.newline_between_rules && !this._output.just_added_blankline() && this._input.peek() !== "}" && this._output.add_new_line(true), this._input.peek() === ")" && (this._output.trim(true), this._options.brace_style === "expand" && this._output.add_new_line(true));
      else if (this._ch === ":") {
        for (var N22 = 0; N22 < this.NON_SEMICOLON_NEWLINE_PROPERTY.length; N22++)
          if (this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[N22])) {
            c27 = true;
            break;
          }
        (o13 || p26) && !(this._input.lookBack("&") || this.foundNestedPseudoClass()) && !this._input.lookBack("(") && !T21 && x36 === 0 ? (this.print_string(":"), n33 || (n33 = true, this._output.space_before_token = true, this.eatWhitespace(true), this.indent())) : (this._input.lookBack(" ") && (this._output.space_before_token = true), this._input.peek() === ":" ? (this._ch = this._input.next(), this.print_string("::")) : this.print_string(":"));
      } else if (this._ch === '"' || this._ch === "'") {
        var W11 = S23 === '"' || S23 === "'";
        this.preserveSingleSpace(W11 || f40), this.print_string(this._ch + this.eatString(this._ch)), this.eatWhitespace(true);
      } else if (this._ch === ";")
        c27 = false, x36 === 0 ? (n33 && (this.outdent(), n33 = false), T21 = false, this.print_string(this._ch), this.eatWhitespace(true), this._input.peek() !== "/" && this._output.add_new_line()) : (this.print_string(this._ch), this.eatWhitespace(true), this._output.space_before_token = true);
      else if (this._ch === "(")
        if (this._input.lookBack("url"))
          this.print_string(this._ch), this.eatWhitespace(), x36++, this.indent(), this._ch = this._input.next(), this._ch === ")" || this._ch === '"' || this._ch === "'" ? this._input.back() : this._ch && (this.print_string(this._ch + this.eatString(")")), x36 && (x36--, this.outdent()));
        else {
          var M13 = false;
          this._input.lookBack("with") && (M13 = true), this.preserveSingleSpace(f40 || M13), this.print_string(this._ch), n33 && S23 === "$" && this._options.selector_separator_newline ? (this._output.add_new_line(), E25 = true) : (this.eatWhitespace(), x36++, this.indent());
        }
      else if (this._ch === ")")
        x36 && (x36--, this.outdent()), E25 && this._input.peek() === ";" && this._options.selector_separator_newline && (E25 = false, this.outdent(), this._output.add_new_line()), this.print_string(this._ch);
      else if (this._ch === ",")
        this.print_string(this._ch), this.eatWhitespace(true), this._options.selector_separator_newline && (!n33 || E25) && x36 === 0 && !T21 ? this._output.add_new_line() : this._output.space_before_token = true;
      else if ((this._ch === ">" || this._ch === "+" || this._ch === "~") && !n33 && x36 === 0)
        this._options.space_around_combinator ? (this._output.space_before_token = true, this.print_string(this._ch), this._output.space_before_token = true) : (this.print_string(this._ch), this.eatWhitespace(), this._ch && u35.test(this._ch) && (this._ch = ""));
      else if (this._ch === "]")
        this.print_string(this._ch);
      else if (this._ch === "[")
        this.preserveSingleSpace(f40), this.print_string(this._ch);
      else if (this._ch === "=")
        this.eatWhitespace(), this.print_string("="), u35.test(this._ch) && (this._ch = "");
      else if (this._ch === "!" && !this._input.lookBack("\\"))
        this._output.space_before_token = true, this.print_string(this._ch);
      else {
        var $25 = S23 === '"' || S23 === "'";
        this.preserveSingleSpace($25 || f40), this.print_string(this._ch), !this._output.just_added_newline() && this._input.peek() === `
` && c27 && this._output.add_new_line();
      }
    var ct12 = this._output.get_code(C21);
    return ct12;
  }, Jt5.Beautifier = y34, Jt5;
}
var Ze5;
function Hi2() {
  if (Ze5)
    return vt6.exports;
  Ze5 = 1;
  var a22 = Qi2().Beautifier, t19 = wi5().Options;
  function i27(e11, r24) {
    var _21 = new a22(e11, r24);
    return _21.beautify();
  }
  return vt6.exports = i27, vt6.exports.defaultOptions = function() {
    return new t19();
  }, vt6.exports;
}
var yt10 = { exports: {} };
var Yt5 = {};
var te5 = {};
var Ye5;
function xi5() {
  if (Ye5)
    return te5;
  Ye5 = 1;
  var a22 = ve6().Options;
  function t19(i27) {
    a22.call(this, i27, "html"), this.templating.length === 1 && this.templating[0] === "auto" && (this.templating = ["django", "erb", "handlebars", "php"]), this.indent_inner_html = this._get_boolean("indent_inner_html"), this.indent_body_inner_html = this._get_boolean("indent_body_inner_html", true), this.indent_head_inner_html = this._get_boolean("indent_head_inner_html", true), this.indent_handlebars = this._get_boolean("indent_handlebars", true), this.wrap_attributes = this._get_selection(
      "wrap_attributes",
      ["auto", "force", "force-aligned", "force-expand-multiline", "aligned-multiple", "preserve", "preserve-aligned"]
    ), this.wrap_attributes_min_attrs = this._get_number("wrap_attributes_min_attrs", 2), this.wrap_attributes_indent_size = this._get_number("wrap_attributes_indent_size", this.indent_size), this.extra_liners = this._get_array("extra_liners", ["head", "body", "/html"]), this.inline = this._get_array("inline", [
      "a",
      "abbr",
      "area",
      "audio",
      "b",
      "bdi",
      "bdo",
      "br",
      "button",
      "canvas",
      "cite",
      "code",
      "data",
      "datalist",
      "del",
      "dfn",
      "em",
      "embed",
      "i",
      "iframe",
      "img",
      "input",
      "ins",
      "kbd",
      "keygen",
      "label",
      "map",
      "mark",
      "math",
      "meter",
      "noscript",
      "object",
      "output",
      "progress",
      "q",
      "ruby",
      "s",
      "samp",
      /* 'script', */
      "select",
      "small",
      "span",
      "strong",
      "sub",
      "sup",
      "svg",
      "template",
      "textarea",
      "time",
      "u",
      "var",
      "video",
      "wbr",
      "text",
      // obsolete inline tags
      "acronym",
      "big",
      "strike",
      "tt"
    ]), this.inline_custom_elements = this._get_boolean("inline_custom_elements", true), this.void_elements = this._get_array("void_elements", [
      // HTLM void elements - aka self-closing tags - aka singletons
      // https://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements
      "area",
      "base",
      "br",
      "col",
      "embed",
      "hr",
      "img",
      "input",
      "keygen",
      "link",
      "menuitem",
      "meta",
      "param",
      "source",
      "track",
      "wbr",
      // NOTE: Optional tags are too complex for a simple list
      // they are hard coded in _do_optional_end_element
      // Doctype and xml elements
      "!doctype",
      "?xml",
      // obsolete tags
      // basefont: https://www.computerhope.com/jargon/h/html-basefont-tag.htm
      // isndex: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/isindex
      "basefont",
      "isindex"
    ]), this.unformatted = this._get_array("unformatted", []), this.content_unformatted = this._get_array("content_unformatted", [
      "pre",
      "textarea"
    ]), this.unformatted_content_delimiter = this._get_characters("unformatted_content_delimiter"), this.indent_scripts = this._get_selection("indent_scripts", ["normal", "keep", "separate"]);
  }
  return t19.prototype = new a22(), te5.Options = t19, te5;
}
var wt7 = {};
var ti5;
function ei5() {
  if (ti5)
    return wt7;
  ti5 = 1;
  var a22 = Lt4().Tokenizer, t19 = Lt4().TOKEN, i27 = we6().Directives, e11 = yi5().TemplatablePattern, r24 = Dt3().Pattern, _21 = {
    TAG_OPEN: "TK_TAG_OPEN",
    TAG_CLOSE: "TK_TAG_CLOSE",
    CONTROL_FLOW_OPEN: "TK_CONTROL_FLOW_OPEN",
    CONTROL_FLOW_CLOSE: "TK_CONTROL_FLOW_CLOSE",
    ATTRIBUTE: "TK_ATTRIBUTE",
    EQUALS: "TK_EQUALS",
    VALUE: "TK_VALUE",
    COMMENT: "TK_COMMENT",
    TEXT: "TK_TEXT",
    UNKNOWN: "TK_UNKNOWN",
    START: t19.START,
    RAW: t19.RAW,
    EOF: t19.EOF
  }, h26 = new i27(/<\!--/, /-->/), u35 = function(l26, O20) {
    a22.call(this, l26, O20), this._current_tag_name = "";
    var v31 = new e11(this._input).read_options(this._options), y34 = new r24(this._input);
    if (this.__patterns = {
      word: v31.until(/[\n\r\t <]/),
      word_control_flow_close_excluded: v31.until(/[\n\r\t <}]/),
      single_quote: v31.until_after(/'/),
      double_quote: v31.until_after(/"/),
      attribute: v31.until(/[\n\r\t =>]|\/>/),
      element_name: v31.until(/[\n\r\t >\/]/),
      angular_control_flow_start: y34.matching(/\@[a-zA-Z]+[^({]*[({]/),
      handlebars_comment: y34.starting_with(/{{!--/).until_after(/--}}/),
      handlebars: y34.starting_with(/{{/).until_after(/}}/),
      handlebars_open: y34.until(/[\n\r\t }]/),
      handlebars_raw_close: y34.until(/}}/),
      comment: y34.starting_with(/<!--/).until_after(/-->/),
      cdata: y34.starting_with(/<!\[CDATA\[/).until_after(/]]>/),
      // https://en.wikipedia.org/wiki/Conditional_comment
      conditional_comment: y34.starting_with(/<!\[/).until_after(/]>/),
      processing: y34.starting_with(/<\?/).until_after(/\?>/)
    }, this._options.indent_handlebars && (this.__patterns.word = this.__patterns.word.exclude("handlebars"), this.__patterns.word_control_flow_close_excluded = this.__patterns.word_control_flow_close_excluded.exclude("handlebars")), this._unformatted_content_delimiter = null, this._options.unformatted_content_delimiter) {
      var g32 = this._input.get_literal_regexp(this._options.unformatted_content_delimiter);
      this.__patterns.unformatted_content_delimiter = y34.matching(g32).until_after(g32);
    }
  };
  return u35.prototype = new a22(), u35.prototype._is_comment = function(l26) {
    return false;
  }, u35.prototype._is_opening = function(l26) {
    return l26.type === _21.TAG_OPEN || l26.type === _21.CONTROL_FLOW_OPEN;
  }, u35.prototype._is_closing = function(l26, O20) {
    return l26.type === _21.TAG_CLOSE && O20 && ((l26.text === ">" || l26.text === "/>") && O20.text[0] === "<" || l26.text === "}}" && O20.text[0] === "{" && O20.text[1] === "{") || l26.type === _21.CONTROL_FLOW_CLOSE && l26.text === "}" && O20.text.endsWith("{");
  }, u35.prototype._reset = function() {
    this._current_tag_name = "";
  }, u35.prototype._get_next_token = function(l26, O20) {
    var v31 = null;
    this._readWhitespace();
    var y34 = this._input.peek();
    return y34 === null ? this._create_token(_21.EOF, "") : (v31 = v31 || this._read_open_handlebars(y34, O20), v31 = v31 || this._read_attribute(y34, l26, O20), v31 = v31 || this._read_close(y34, O20), v31 = v31 || this._read_control_flows(y34, O20), v31 = v31 || this._read_raw_content(y34, l26, O20), v31 = v31 || this._read_content_word(y34, O20), v31 = v31 || this._read_comment_or_cdata(y34), v31 = v31 || this._read_processing(y34), v31 = v31 || this._read_open(y34, O20), v31 = v31 || this._create_token(_21.UNKNOWN, this._input.next()), v31);
  }, u35.prototype._read_comment_or_cdata = function(l26) {
    var O20 = null, v31 = null, y34 = null;
    if (l26 === "<") {
      var g32 = this._input.peek(1);
      g32 === "!" && (v31 = this.__patterns.comment.read(), v31 ? (y34 = h26.get_directives(v31), y34 && y34.ignore === "start" && (v31 += h26.readIgnored(this._input))) : v31 = this.__patterns.cdata.read()), v31 && (O20 = this._create_token(_21.COMMENT, v31), O20.directives = y34);
    }
    return O20;
  }, u35.prototype._read_processing = function(l26) {
    var O20 = null, v31 = null, y34 = null;
    if (l26 === "<") {
      var g32 = this._input.peek(1);
      (g32 === "!" || g32 === "?") && (v31 = this.__patterns.conditional_comment.read(), v31 = v31 || this.__patterns.processing.read()), v31 && (O20 = this._create_token(_21.COMMENT, v31), O20.directives = y34);
    }
    return O20;
  }, u35.prototype._read_open = function(l26, O20) {
    var v31 = null, y34 = null;
    return (!O20 || O20.type === _21.CONTROL_FLOW_OPEN) && l26 === "<" && (v31 = this._input.next(), this._input.peek() === "/" && (v31 += this._input.next()), v31 += this.__patterns.element_name.read(), y34 = this._create_token(_21.TAG_OPEN, v31)), y34;
  }, u35.prototype._read_open_handlebars = function(l26, O20) {
    var v31 = null, y34 = null;
    return (!O20 || O20.type === _21.CONTROL_FLOW_OPEN) && this._options.indent_handlebars && l26 === "{" && this._input.peek(1) === "{" && (this._input.peek(2) === "!" ? (v31 = this.__patterns.handlebars_comment.read(), v31 = v31 || this.__patterns.handlebars.read(), y34 = this._create_token(_21.COMMENT, v31)) : (v31 = this.__patterns.handlebars_open.read(), y34 = this._create_token(_21.TAG_OPEN, v31))), y34;
  }, u35.prototype._read_control_flows = function(l26, O20) {
    var v31 = "", y34 = null;
    if (!this._options.templating.includes("angular") || !this._options.indent_handlebars)
      return y34;
    if (l26 === "@") {
      if (v31 = this.__patterns.angular_control_flow_start.read(), v31 === "")
        return y34;
      for (var g32 = v31.endsWith("(") ? 1 : 0, C21 = 0; !(v31.endsWith("{") && g32 === C21); ) {
        var A18 = this._input.next();
        if (A18 === null)
          break;
        A18 === "(" ? g32++ : A18 === ")" && C21++, v31 += A18;
      }
      y34 = this._create_token(_21.CONTROL_FLOW_OPEN, v31);
    } else
      l26 === "}" && O20 && O20.type === _21.CONTROL_FLOW_OPEN && (v31 = this._input.next(), y34 = this._create_token(_21.CONTROL_FLOW_CLOSE, v31));
    return y34;
  }, u35.prototype._read_close = function(l26, O20) {
    var v31 = null, y34 = null;
    return O20 && O20.type === _21.TAG_OPEN && (O20.text[0] === "<" && (l26 === ">" || l26 === "/" && this._input.peek(1) === ">") ? (v31 = this._input.next(), l26 === "/" && (v31 += this._input.next()), y34 = this._create_token(_21.TAG_CLOSE, v31)) : O20.text[0] === "{" && l26 === "}" && this._input.peek(1) === "}" && (this._input.next(), this._input.next(), y34 = this._create_token(_21.TAG_CLOSE, "}}"))), y34;
  }, u35.prototype._read_attribute = function(l26, O20, v31) {
    var y34 = null, g32 = "";
    if (v31 && v31.text[0] === "<")
      if (l26 === "=")
        y34 = this._create_token(_21.EQUALS, this._input.next());
      else if (l26 === '"' || l26 === "'") {
        var C21 = this._input.next();
        l26 === '"' ? C21 += this.__patterns.double_quote.read() : C21 += this.__patterns.single_quote.read(), y34 = this._create_token(_21.VALUE, C21);
      } else
        g32 = this.__patterns.attribute.read(), g32 && (O20.type === _21.EQUALS ? y34 = this._create_token(_21.VALUE, g32) : y34 = this._create_token(_21.ATTRIBUTE, g32));
    return y34;
  }, u35.prototype._is_content_unformatted = function(l26) {
    return this._options.void_elements.indexOf(l26) === -1 && (this._options.content_unformatted.indexOf(l26) !== -1 || this._options.unformatted.indexOf(l26) !== -1);
  }, u35.prototype._read_raw_content = function(l26, O20, v31) {
    var y34 = "";
    if (v31 && v31.text[0] === "{")
      y34 = this.__patterns.handlebars_raw_close.read();
    else if (O20.type === _21.TAG_CLOSE && O20.opened.text[0] === "<" && O20.text[0] !== "/") {
      var g32 = O20.opened.text.substr(1).toLowerCase();
      if (g32 === "script" || g32 === "style") {
        var C21 = this._read_comment_or_cdata(l26);
        if (C21)
          return C21.type = _21.TEXT, C21;
        y34 = this._input.readUntil(new RegExp("</" + g32 + "[\\n\\r\\t ]*?>", "ig"));
      } else
        this._is_content_unformatted(g32) && (y34 = this._input.readUntil(new RegExp("</" + g32 + "[\\n\\r\\t ]*?>", "ig")));
    }
    return y34 ? this._create_token(_21.TEXT, y34) : null;
  }, u35.prototype._read_content_word = function(l26, O20) {
    var v31 = "";
    if (this._options.unformatted_content_delimiter && l26 === this._options.unformatted_content_delimiter[0] && (v31 = this.__patterns.unformatted_content_delimiter.read()), v31 || (v31 = O20 && O20.type === _21.CONTROL_FLOW_OPEN ? this.__patterns.word_control_flow_close_excluded.read() : this.__patterns.word.read()), v31)
      return this._create_token(_21.TEXT, v31);
  }, wt7.Tokenizer = u35, wt7.TOKEN = _21, wt7;
}
var ii5;
function Ji2() {
  if (ii5)
    return Yt5;
  ii5 = 1;
  var a22 = xi5().Options, t19 = me6().Output, i27 = ei5().Tokenizer, e11 = ei5().TOKEN, r24 = /\r\n|[\r\n]/, _21 = /\r\n|[\r\n]/g, h26 = function(o13, n33) {
    this.indent_level = 0, this.alignment_size = 0, this.max_preserve_newlines = o13.max_preserve_newlines, this.preserve_newlines = o13.preserve_newlines, this._output = new t19(o13, n33);
  };
  h26.prototype.current_line_has_match = function(o13) {
    return this._output.current_line.has_match(o13);
  }, h26.prototype.set_space_before_token = function(o13, n33) {
    this._output.space_before_token = o13, this._output.non_breaking_space = n33;
  }, h26.prototype.set_wrap_point = function() {
    this._output.set_indent(this.indent_level, this.alignment_size), this._output.set_wrap_point();
  }, h26.prototype.add_raw_token = function(o13) {
    this._output.add_raw_token(o13);
  }, h26.prototype.print_preserved_newlines = function(o13) {
    var n33 = 0;
    o13.type !== e11.TEXT && o13.previous.type !== e11.TEXT && (n33 = o13.newlines ? 1 : 0), this.preserve_newlines && (n33 = o13.newlines < this.max_preserve_newlines + 1 ? o13.newlines : this.max_preserve_newlines + 1);
    for (var p26 = 0; p26 < n33; p26++)
      this.print_newline(p26 > 0);
    return n33 !== 0;
  }, h26.prototype.traverse_whitespace = function(o13) {
    return o13.whitespace_before || o13.newlines ? (this.print_preserved_newlines(o13) || (this._output.space_before_token = true), true) : false;
  }, h26.prototype.previous_token_wrapped = function() {
    return this._output.previous_token_wrapped;
  }, h26.prototype.print_newline = function(o13) {
    this._output.add_new_line(o13);
  }, h26.prototype.print_token = function(o13) {
    o13.text && (this._output.set_indent(this.indent_level, this.alignment_size), this._output.add_token(o13.text));
  }, h26.prototype.indent = function() {
    this.indent_level++;
  }, h26.prototype.deindent = function() {
    this.indent_level > 0 && (this.indent_level--, this._output.set_indent(this.indent_level, this.alignment_size));
  }, h26.prototype.get_full_indent = function(o13) {
    return o13 = this.indent_level + (o13 || 0), o13 < 1 ? "" : this._output.get_indent_string(o13);
  };
  var u35 = function(o13) {
    for (var n33 = null, p26 = o13.next; p26.type !== e11.EOF && o13.closed !== p26; ) {
      if (p26.type === e11.ATTRIBUTE && p26.text === "type") {
        p26.next && p26.next.type === e11.EQUALS && p26.next.next && p26.next.next.type === e11.VALUE && (n33 = p26.next.next.text);
        break;
      }
      p26 = p26.next;
    }
    return n33;
  }, l26 = function(o13, n33) {
    var p26 = null, T21 = null;
    return n33.closed ? (o13 === "script" ? p26 = "text/javascript" : o13 === "style" && (p26 = "text/css"), p26 = u35(n33) || p26, p26.search("text/css") > -1 ? T21 = "css" : p26.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/) > -1 ? T21 = "javascript" : p26.search(/(text|application|dojo)\/(x-)?(html)/) > -1 ? T21 = "html" : p26.search(/test\/null/) > -1 && (T21 = "null"), T21) : null;
  };
  function O20(o13, n33) {
    return n33.indexOf(o13) !== -1;
  }
  function v31(o13, n33, p26) {
    this.parent = o13 || null, this.tag = n33 ? n33.tag_name : "", this.indent_level = p26 || 0, this.parser_token = n33 || null;
  }
  function y34(o13) {
    this._printer = o13, this._current_frame = null;
  }
  y34.prototype.get_parser_token = function() {
    return this._current_frame ? this._current_frame.parser_token : null;
  }, y34.prototype.record_tag = function(o13) {
    var n33 = new v31(this._current_frame, o13, this._printer.indent_level);
    this._current_frame = n33;
  }, y34.prototype._try_pop_frame = function(o13) {
    var n33 = null;
    return o13 && (n33 = o13.parser_token, this._printer.indent_level = o13.indent_level, this._current_frame = o13.parent), n33;
  }, y34.prototype._get_frame = function(o13, n33) {
    for (var p26 = this._current_frame; p26 && o13.indexOf(p26.tag) === -1; ) {
      if (n33 && n33.indexOf(p26.tag) !== -1) {
        p26 = null;
        break;
      }
      p26 = p26.parent;
    }
    return p26;
  }, y34.prototype.try_pop = function(o13, n33) {
    var p26 = this._get_frame([o13], n33);
    return this._try_pop_frame(p26);
  }, y34.prototype.indent_to_tag = function(o13) {
    var n33 = this._get_frame(o13);
    n33 && (this._printer.indent_level = n33.indent_level);
  };
  function g32(o13, n33, p26, T21) {
    this._source_text = o13 || "", n33 = n33 || {}, this._js_beautify = p26, this._css_beautify = T21, this._tag_stack = null;
    var E25 = new a22(n33, "html");
    this._options = E25, this._is_wrap_attributes_force = this._options.wrap_attributes.substr(0, 5) === "force", this._is_wrap_attributes_force_expand_multiline = this._options.wrap_attributes === "force-expand-multiline", this._is_wrap_attributes_force_aligned = this._options.wrap_attributes === "force-aligned", this._is_wrap_attributes_aligned_multiple = this._options.wrap_attributes === "aligned-multiple", this._is_wrap_attributes_preserve = this._options.wrap_attributes.substr(0, 8) === "preserve", this._is_wrap_attributes_preserve_aligned = this._options.wrap_attributes === "preserve-aligned";
  }
  g32.prototype.beautify = function() {
    if (this._options.disabled)
      return this._source_text;
    var o13 = this._source_text, n33 = this._options.eol;
    this._options.eol === "auto" && (n33 = `
`, o13 && r24.test(o13) && (n33 = o13.match(r24)[0])), o13 = o13.replace(_21, `
`);
    var p26 = o13.match(/^[\t ]*/)[0], T21 = {
      text: "",
      type: ""
    }, E25 = new C21(), k29 = new h26(this._options, p26), c27 = new i27(o13, this._options).tokenize();
    this._tag_stack = new y34(k29);
    for (var b35 = null, f40 = c27.next(); f40.type !== e11.EOF; )
      f40.type === e11.TAG_OPEN || f40.type === e11.COMMENT ? (b35 = this._handle_tag_open(k29, f40, E25, T21, c27), E25 = b35) : f40.type === e11.ATTRIBUTE || f40.type === e11.EQUALS || f40.type === e11.VALUE || f40.type === e11.TEXT && !E25.tag_complete ? b35 = this._handle_inside_tag(k29, f40, E25, T21) : f40.type === e11.TAG_CLOSE ? b35 = this._handle_tag_close(k29, f40, E25) : f40.type === e11.TEXT ? b35 = this._handle_text(k29, f40, E25) : f40.type === e11.CONTROL_FLOW_OPEN ? b35 = this._handle_control_flow_open(k29, f40) : f40.type === e11.CONTROL_FLOW_CLOSE ? b35 = this._handle_control_flow_close(k29, f40) : k29.add_raw_token(f40), T21 = b35, f40 = c27.next();
    var S23 = k29._output.get_code(n33);
    return S23;
  }, g32.prototype._handle_control_flow_open = function(o13, n33) {
    var p26 = {
      text: n33.text,
      type: n33.type
    };
    return o13.set_space_before_token(n33.newlines || n33.whitespace_before !== "", true), n33.newlines ? o13.print_preserved_newlines(n33) : o13.set_space_before_token(n33.newlines || n33.whitespace_before !== "", true), o13.print_token(n33), o13.indent(), p26;
  }, g32.prototype._handle_control_flow_close = function(o13, n33) {
    var p26 = {
      text: n33.text,
      type: n33.type
    };
    return o13.deindent(), n33.newlines ? o13.print_preserved_newlines(n33) : o13.set_space_before_token(n33.newlines || n33.whitespace_before !== "", true), o13.print_token(n33), p26;
  }, g32.prototype._handle_tag_close = function(o13, n33, p26) {
    var T21 = {
      text: n33.text,
      type: n33.type
    };
    return o13.alignment_size = 0, p26.tag_complete = true, o13.set_space_before_token(n33.newlines || n33.whitespace_before !== "", true), p26.is_unformatted ? o13.add_raw_token(n33) : (p26.tag_start_char === "<" && (o13.set_space_before_token(n33.text[0] === "/", true), this._is_wrap_attributes_force_expand_multiline && p26.has_wrapped_attrs && o13.print_newline(false)), o13.print_token(n33)), p26.indent_content && !(p26.is_unformatted || p26.is_content_unformatted) && (o13.indent(), p26.indent_content = false), !p26.is_inline_element && !(p26.is_unformatted || p26.is_content_unformatted) && o13.set_wrap_point(), T21;
  }, g32.prototype._handle_inside_tag = function(o13, n33, p26, T21) {
    var E25 = p26.has_wrapped_attrs, k29 = {
      text: n33.text,
      type: n33.type
    };
    return o13.set_space_before_token(n33.newlines || n33.whitespace_before !== "", true), p26.is_unformatted ? o13.add_raw_token(n33) : p26.tag_start_char === "{" && n33.type === e11.TEXT ? o13.print_preserved_newlines(n33) ? (n33.newlines = 0, o13.add_raw_token(n33)) : o13.print_token(n33) : (n33.type === e11.ATTRIBUTE ? o13.set_space_before_token(true) : (n33.type === e11.EQUALS || n33.type === e11.VALUE && n33.previous.type === e11.EQUALS) && o13.set_space_before_token(false), n33.type === e11.ATTRIBUTE && p26.tag_start_char === "<" && ((this._is_wrap_attributes_preserve || this._is_wrap_attributes_preserve_aligned) && (o13.traverse_whitespace(n33), E25 = E25 || n33.newlines !== 0), this._is_wrap_attributes_force && p26.attr_count >= this._options.wrap_attributes_min_attrs && (T21.type !== e11.TAG_OPEN || // ie. second attribute and beyond
    this._is_wrap_attributes_force_expand_multiline) && (o13.print_newline(false), E25 = true)), o13.print_token(n33), E25 = E25 || o13.previous_token_wrapped(), p26.has_wrapped_attrs = E25), k29;
  }, g32.prototype._handle_text = function(o13, n33, p26) {
    var T21 = {
      text: n33.text,
      type: "TK_CONTENT"
    };
    return p26.custom_beautifier_name ? this._print_custom_beatifier_text(o13, n33, p26) : p26.is_unformatted || p26.is_content_unformatted ? o13.add_raw_token(n33) : (o13.traverse_whitespace(n33), o13.print_token(n33)), T21;
  }, g32.prototype._print_custom_beatifier_text = function(o13, n33, p26) {
    var T21 = this;
    if (n33.text !== "") {
      var E25 = n33.text, k29, c27 = 1, b35 = "", f40 = "";
      p26.custom_beautifier_name === "javascript" && typeof this._js_beautify == "function" ? k29 = this._js_beautify : p26.custom_beautifier_name === "css" && typeof this._css_beautify == "function" ? k29 = this._css_beautify : p26.custom_beautifier_name === "html" && (k29 = function(N22, W11) {
        var M13 = new g32(N22, W11, T21._js_beautify, T21._css_beautify);
        return M13.beautify();
      }), this._options.indent_scripts === "keep" ? c27 = 0 : this._options.indent_scripts === "separate" && (c27 = -o13.indent_level);
      var S23 = o13.get_full_indent(c27);
      if (E25 = E25.replace(/\n[ \t]*$/, ""), p26.custom_beautifier_name !== "html" && E25[0] === "<" && E25.match(/^(<!--|<!\[CDATA\[)/)) {
        var s18 = /^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(E25);
        if (!s18) {
          o13.add_raw_token(n33);
          return;
        }
        b35 = S23 + s18[1] + `
`, E25 = s18[4], s18[5] && (f40 = S23 + s18[5]), E25 = E25.replace(/\n[ \t]*$/, ""), (s18[2] || s18[3].indexOf(`
`) !== -1) && (s18 = s18[3].match(/[ \t]+$/), s18 && (n33.whitespace_before = s18[0]));
      }
      if (E25)
        if (k29) {
          var d34 = function() {
            this.eol = `
`;
          };
          d34.prototype = this._options.raw_options;
          var m34 = new d34();
          E25 = k29(S23 + E25, m34);
        } else {
          var R22 = n33.whitespace_before;
          R22 && (E25 = E25.replace(new RegExp(`
(` + R22 + ")?", "g"), `
`)), E25 = S23 + E25.replace(/\n/g, `
` + S23);
        }
      b35 && (E25 ? E25 = b35 + E25 + `
` + f40 : E25 = b35 + f40), o13.print_newline(false), E25 && (n33.text = E25, n33.whitespace_before = "", n33.newlines = 0, o13.add_raw_token(n33), o13.print_newline(true));
    }
  }, g32.prototype._handle_tag_open = function(o13, n33, p26, T21, E25) {
    var k29 = this._get_tag_open_token(n33);
    if ((p26.is_unformatted || p26.is_content_unformatted) && !p26.is_empty_element && n33.type === e11.TAG_OPEN && !k29.is_start_tag ? (o13.add_raw_token(n33), k29.start_tag_token = this._tag_stack.try_pop(k29.tag_name)) : (o13.traverse_whitespace(n33), this._set_tag_position(o13, n33, k29, p26, T21), k29.is_inline_element || o13.set_wrap_point(), o13.print_token(n33)), k29.is_start_tag && this._is_wrap_attributes_force) {
      var c27 = 0, b35;
      do
        b35 = E25.peek(c27), b35.type === e11.ATTRIBUTE && (k29.attr_count += 1), c27 += 1;
      while (b35.type !== e11.EOF && b35.type !== e11.TAG_CLOSE);
    }
    return (this._is_wrap_attributes_force_aligned || this._is_wrap_attributes_aligned_multiple || this._is_wrap_attributes_preserve_aligned) && (k29.alignment_size = n33.text.length + 1), !k29.tag_complete && !k29.is_unformatted && (o13.alignment_size = k29.alignment_size), k29;
  };
  var C21 = function(o13, n33) {
    if (this.parent = o13 || null, this.text = "", this.type = "TK_TAG_OPEN", this.tag_name = "", this.is_inline_element = false, this.is_unformatted = false, this.is_content_unformatted = false, this.is_empty_element = false, this.is_start_tag = false, this.is_end_tag = false, this.indent_content = false, this.multiline_content = false, this.custom_beautifier_name = null, this.start_tag_token = null, this.attr_count = 0, this.has_wrapped_attrs = false, this.alignment_size = 0, this.tag_complete = false, this.tag_start_char = "", this.tag_check = "", !n33)
      this.tag_complete = true;
    else {
      var p26;
      this.tag_start_char = n33.text[0], this.text = n33.text, this.tag_start_char === "<" ? (p26 = n33.text.match(/^<([^\s>]*)/), this.tag_check = p26 ? p26[1] : "") : (p26 = n33.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/), this.tag_check = p26 ? p26[1] : "", (n33.text.startsWith("{{#>") || n33.text.startsWith("{{~#>")) && this.tag_check[0] === ">" && (this.tag_check === ">" && n33.next !== null ? this.tag_check = n33.next.text.split(" ")[0] : this.tag_check = n33.text.split(">")[1])), this.tag_check = this.tag_check.toLowerCase(), n33.type === e11.COMMENT && (this.tag_complete = true), this.is_start_tag = this.tag_check.charAt(0) !== "/", this.tag_name = this.is_start_tag ? this.tag_check : this.tag_check.substr(1), this.is_end_tag = !this.is_start_tag || n33.closed && n33.closed.text === "/>";
      var T21 = 2;
      this.tag_start_char === "{" && this.text.length >= 3 && this.text.charAt(2) === "~" && (T21 = 3), this.is_end_tag = this.is_end_tag || this.tag_start_char === "{" && (this.text.length < 3 || /[^#\^]/.test(this.text.charAt(T21)));
    }
  };
  g32.prototype._get_tag_open_token = function(o13) {
    var n33 = new C21(this._tag_stack.get_parser_token(), o13);
    return n33.alignment_size = this._options.wrap_attributes_indent_size, n33.is_end_tag = n33.is_end_tag || O20(n33.tag_check, this._options.void_elements), n33.is_empty_element = n33.tag_complete || n33.is_start_tag && n33.is_end_tag, n33.is_unformatted = !n33.tag_complete && O20(n33.tag_check, this._options.unformatted), n33.is_content_unformatted = !n33.is_empty_element && O20(n33.tag_check, this._options.content_unformatted), n33.is_inline_element = O20(n33.tag_name, this._options.inline) || this._options.inline_custom_elements && n33.tag_name.includes("-") || n33.tag_start_char === "{", n33;
  }, g32.prototype._set_tag_position = function(o13, n33, p26, T21, E25) {
    if (p26.is_empty_element || (p26.is_end_tag ? p26.start_tag_token = this._tag_stack.try_pop(p26.tag_name) : (this._do_optional_end_element(p26) && (p26.is_inline_element || o13.print_newline(false)), this._tag_stack.record_tag(p26), (p26.tag_name === "script" || p26.tag_name === "style") && !(p26.is_unformatted || p26.is_content_unformatted) && (p26.custom_beautifier_name = l26(p26.tag_check, n33)))), O20(p26.tag_check, this._options.extra_liners) && (o13.print_newline(false), o13._output.just_added_blankline() || o13.print_newline(true)), p26.is_empty_element) {
      if (p26.tag_start_char === "{" && p26.tag_check === "else") {
        this._tag_stack.indent_to_tag(["if", "unless", "each"]), p26.indent_content = true;
        var k29 = o13.current_line_has_match(/{{#if/);
        k29 || o13.print_newline(false);
      }
      p26.tag_name === "!--" && E25.type === e11.TAG_CLOSE && T21.is_end_tag && p26.text.indexOf(`
`) === -1 || (p26.is_inline_element || p26.is_unformatted || o13.print_newline(false), this._calcluate_parent_multiline(o13, p26));
    } else if (p26.is_end_tag) {
      var c27 = false;
      c27 = p26.start_tag_token && p26.start_tag_token.multiline_content, c27 = c27 || !p26.is_inline_element && !(T21.is_inline_element || T21.is_unformatted) && !(E25.type === e11.TAG_CLOSE && p26.start_tag_token === T21) && E25.type !== "TK_CONTENT", (p26.is_content_unformatted || p26.is_unformatted) && (c27 = false), c27 && o13.print_newline(false);
    } else
      p26.indent_content = !p26.custom_beautifier_name, p26.tag_start_char === "<" && (p26.tag_name === "html" ? p26.indent_content = this._options.indent_inner_html : p26.tag_name === "head" ? p26.indent_content = this._options.indent_head_inner_html : p26.tag_name === "body" && (p26.indent_content = this._options.indent_body_inner_html)), !(p26.is_inline_element || p26.is_unformatted) && (E25.type !== "TK_CONTENT" || p26.is_content_unformatted) && o13.print_newline(false), this._calcluate_parent_multiline(o13, p26);
  }, g32.prototype._calcluate_parent_multiline = function(o13, n33) {
    n33.parent && o13._output.just_added_newline() && !((n33.is_inline_element || n33.is_unformatted) && n33.parent.is_inline_element) && (n33.parent.multiline_content = true);
  };
  var A18 = ["address", "article", "aside", "blockquote", "details", "div", "dl", "fieldset", "figcaption", "figure", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "header", "hr", "main", "menu", "nav", "ol", "p", "pre", "section", "table", "ul"], x36 = ["a", "audio", "del", "ins", "map", "noscript", "video"];
  return g32.prototype._do_optional_end_element = function(o13) {
    var n33 = null;
    if (!(o13.is_empty_element || !o13.is_start_tag || !o13.parent)) {
      if (o13.tag_name === "body")
        n33 = n33 || this._tag_stack.try_pop("head");
      else if (o13.tag_name === "li")
        n33 = n33 || this._tag_stack.try_pop("li", ["ol", "ul", "menu"]);
      else if (o13.tag_name === "dd" || o13.tag_name === "dt")
        n33 = n33 || this._tag_stack.try_pop("dt", ["dl"]), n33 = n33 || this._tag_stack.try_pop("dd", ["dl"]);
      else if (o13.parent.tag_name === "p" && A18.indexOf(o13.tag_name) !== -1) {
        var p26 = o13.parent.parent;
        (!p26 || x36.indexOf(p26.tag_name) === -1) && (n33 = n33 || this._tag_stack.try_pop("p"));
      } else
        o13.tag_name === "rp" || o13.tag_name === "rt" ? (n33 = n33 || this._tag_stack.try_pop("rt", ["ruby", "rtc"]), n33 = n33 || this._tag_stack.try_pop("rp", ["ruby", "rtc"])) : o13.tag_name === "optgroup" ? n33 = n33 || this._tag_stack.try_pop("optgroup", ["select"]) : o13.tag_name === "option" ? n33 = n33 || this._tag_stack.try_pop("option", ["select", "datalist", "optgroup"]) : o13.tag_name === "colgroup" ? n33 = n33 || this._tag_stack.try_pop("caption", ["table"]) : o13.tag_name === "thead" ? (n33 = n33 || this._tag_stack.try_pop("caption", ["table"]), n33 = n33 || this._tag_stack.try_pop("colgroup", ["table"])) : o13.tag_name === "tbody" || o13.tag_name === "tfoot" ? (n33 = n33 || this._tag_stack.try_pop("caption", ["table"]), n33 = n33 || this._tag_stack.try_pop("colgroup", ["table"]), n33 = n33 || this._tag_stack.try_pop("thead", ["table"]), n33 = n33 || this._tag_stack.try_pop("tbody", ["table"])) : o13.tag_name === "tr" ? (n33 = n33 || this._tag_stack.try_pop("caption", ["table"]), n33 = n33 || this._tag_stack.try_pop("colgroup", ["table"]), n33 = n33 || this._tag_stack.try_pop("tr", ["table", "thead", "tbody", "tfoot"])) : (o13.tag_name === "th" || o13.tag_name === "td") && (n33 = n33 || this._tag_stack.try_pop("td", ["table", "thead", "tbody", "tfoot", "tr"]), n33 = n33 || this._tag_stack.try_pop("th", ["table", "thead", "tbody", "tfoot", "tr"]));
      return o13.parent = this._tag_stack.get_parser_token(), n33;
    }
  }, Yt5.Beautifier = g32, Yt5;
}
var si5;
function Zi2() {
  if (si5)
    return yt10.exports;
  si5 = 1;
  var a22 = Ji2().Beautifier, t19 = xi5().Options;
  function i27(e11, r24, _21, h26) {
    var u35 = new a22(e11, r24, _21, h26);
    return u35.beautify();
  }
  return yt10.exports = i27, yt10.exports.defaultOptions = function() {
    return new t19();
  }, yt10.exports;
}
var ni5;
function Yi3() {
  if (ni5)
    return it11;
  ni5 = 1;
  var a22 = Xi2(), t19 = Hi2(), i27 = Zi2();
  function e11(r24, _21, h26, u35) {
    return h26 = h26 || a22, u35 = u35 || t19, i27(r24, _21, h26, u35);
  }
  return e11.defaultOptions = i27.defaultOptions, it11.js = a22, it11.css = t19, it11.html = e11, it11;
}
var ri5;
function ts2() {
  return ri5 || (ri5 = 1, function(a22) {
    function t19(i27, e11, r24) {
      var _21 = function(h26, u35) {
        return i27.js_beautify(h26, u35);
      };
      return _21.js = i27.js_beautify, _21.css = e11.css_beautify, _21.html = r24.html_beautify, _21.js_beautify = i27.js_beautify, _21.css_beautify = e11.css_beautify, _21.html_beautify = r24.html_beautify, _21;
    }
    (function(i27) {
      var e11 = Yi3();
      e11.js_beautify = e11.js, e11.css_beautify = e11.css, e11.html_beautify = e11.html, i27.exports = t19(e11, e11, e11);
    })(a22);
  }(Bt5)), Bt5.exports;
}
var es2 = ts2();
var is2 = class {
  constructor(t19) {
    this.partsLength = t19, this.keys = {};
  }
  getKey(...t19) {
    if (t19.length !== this.partsLength)
      return null;
    let i27 = this.keys;
    for (let e11 = 0; e11 < t19.length - 1; e11 += 1)
      i27[t19[e11]] || (i27[t19[e11]] = {}), i27 = i27[t19[e11]];
    return i27[t19[t19.length - 1]] || (i27[t19[t19.length - 1]] = Symbol("")), i27[t19[t19.length - 1]];
  }
};
function ss2(a22) {
  return es2.html(a22, {
    wrap_attributes: "force-expand-multiline"
  });
}
var ns2 = class {
  constructor(t19) {
    this.store = new Ot3(), this.components = /* @__PURE__ */ new Map(), this.mountedElements = /* @__PURE__ */ new Map(), this.subscribers = /* @__PURE__ */ new Map(), this.componentKeys = new is2(2), this.dashboardState = new Ot3(), this.provider = new At3(), this.connector = new Fi3(
      t19 ?? document.createElement("div"),
      this.store
    ), this.dashboardState.addSourceProvider("dashboardState", this.provider), this.dashboardState.subscribeAll(
      "dashboardState",
      (i27, e11) => {
        this.publish("storeValueChange", { value: i27, key: e11 });
      },
      false
    );
  }
  addSourceProvider(t19, i27) {
    this.store.addSourceProvider(t19, i27);
  }
  setDefaultSourceProvider(t19) {
    this.store.setDefaultSourceProvider(t19);
  }
  setStoreValue(t19, i27) {
    this.provider.updateSource(t19, i27);
  }
  getStoreValue(t19, i27 = void 0) {
    return this.dashboardState.getSourceValue("dashboardState", t19) ?? i27;
  }
  getConnector() {
    return this.connector;
  }
  getRootElement() {
    return this.connector.getRootElement();
  }
  getStore() {
    return this.connector.getStore();
  }
  addComponent(t19) {
    const i27 = this.componentKeys.getKey(t19.type, t19.id);
    i27 && this.components.set(i27, t19);
  }
  hasComponent(t19, i27) {
    const e11 = this.componentKeys.getKey(t19, i27);
    return e11 ? this.components.has(e11) : false;
  }
  getComponentIdsOfType(t19) {
    return [...this.components.values()].filter(({ type: i27 }) => i27 === t19).map(({ id: i27 }) => i27);
  }
  create(t19, i27, e11 = {}) {
    const r24 = document.createElement("div"), _21 = this.componentKeys.getKey(t19, i27);
    if (!_21)
      return;
    const h26 = this.components.get(_21);
    if (h26) {
      const u35 = h26.mount({
        dashboard: this,
        element: r24,
        config: e11
      });
      return this.mountedElements.set(r24, {
        componentId: i27,
        componentType: t19,
        config: e11,
        unmount: u35
      }), r24;
    }
  }
  /**
   * Unmounts the mounted component from a particular element
   * @param {HTMLElement} element
   */
  unmount(t19) {
    const i27 = this.mountedElements.get(t19);
    if (i27) {
      const { config: e11, unmount: r24 } = i27;
      r24 && r24({
        dashboard: this,
        element: t19,
        config: e11
      }), this.mountedElements.delete(t19);
    }
  }
  /**
   *
   * @returns {() => void} A function to unsubscribe
   */
  subscribe(t19, i27) {
    this.subscribers.has(t19) || this.subscribers.set(t19, /* @__PURE__ */ new Map());
    const e11 = Symbol(""), r24 = this.subscribers.get(t19);
    return r24 == null || r24.set(e11, i27), () => {
      r24 == null || r24.delete(e11);
    };
  }
  /**
   *
   * @param {string} subscriberId
   * @param {unknown} context
   */
  publish(t19, i27 = {}) {
    var e11;
    this.subscribers.has(t19) && ((e11 = this.subscribers.get(t19)) == null || e11.forEach((r24) => {
      r24(i27);
    }));
  }
  addElements(t19, i27 = "default") {
    this.connector.addElementConfigs(t19, i27);
  }
  getHtml() {
    return this.getElementHtml(this.connector.getRootElement(), true);
  }
  setHtml(t19) {
    this.connector.getRootElement().querySelectorAll("dashboard-tab").forEach((e11) => {
      e11.remove();
    });
    const i27 = document.createElement("div");
    i27.innerHTML = t19, i27.querySelectorAll("dashboard-tab").forEach((e11) => {
      e11.setAttribute("slot", "tab"), this.connector.getRootElement().append(e11);
    });
  }
  getElementDisplayName(t19) {
    const i27 = this.connector.getMatchingElementConfig(t19), e11 = t19.tagName.toLowerCase();
    return i27 != null && i27.dashboard ? typeof i27.dashboard.displayName == "string" ? i27.dashboard.displayName : typeof i27.dashboard.displayName == "function" ? i27.dashboard.displayName(t19) : e11 : e11;
  }
  getSelectorDisplayName(t19) {
    const i27 = this.connector.getElementConfig(t19);
    return i27 != null && i27.dashboard ? typeof i27.dashboard.displayName == "string" ? i27.dashboard.displayName : typeof i27.dashboard.displayName == "function" ? i27.dashboard.displayName() : t19 : t19;
  }
  getElementHtml(t19, i27 = false) {
    const e11 = t19.cloneNode(true);
    return this.setClonedElementPropAttributes(t19, e11), ss2(
      i27 ? e11.innerHTML : e11.outerHTML
    );
  }
  setClonedElementPropAttributes(t19, i27) {
    const e11 = this.connector.getElementWebbit(t19);
    if (e11) {
      const { properties: r24 } = e11.getConfig();
      Object.entries(r24).forEach(
        ([_21, { attribute: h26, defaultValue: u35 }]) => {
          const l26 = e11.getPropertyHandler(_21);
          if (l26 != null && l26.isAttribute() && h26) {
            const O20 = l26.getStoredAttribute();
            O20 === null || l26.getStoredValue() === u35 ? i27.removeAttribute(h26) : i27.setAttribute(h26, O20);
          }
        }
      );
    }
    for (let r24 = 0; r24 < t19.children.length; r24 += 1)
      this.setClonedElementPropAttributes(
        t19.children[r24],
        i27.children[r24]
      );
  }
};
function rs2(a22, t19) {
  return a22.slots.map(({ name: i27, allowedChildren: e11 }) => {
    const r24 = t19.getElementConfigSelectors().filter(
      (_21) => {
        var h26, u35;
        return e11 instanceof Array ? e11.includes(_21) : (u35 = (h26 = t19.getElementConfig(_21)) == null ? void 0 : h26.dashboard) == null ? void 0 : u35.topLevel;
      }
    );
    return {
      slot: i27,
      allowedChildren: r24
    };
  });
}
function ai5(a22, t19) {
  if (!a22)
    return [];
  const i27 = t19.getMatchingElementConfig(a22);
  return i27 ? rs2(i27, t19) : [];
}
function as2(a22) {
  const t19 = document.createElement("div");
  return t19.setAttribute("slot", "layer"), t19.setAttribute("layer-id", a22), t19.style.width = "100%", t19.style.height = "100%", t19.style.position = "absolute", t19.style.top = "0", t19.style.boxSizing = "border-box", t19.style.pointerEvents = "none", t19;
}
function _s2() {
  const a22 = document.createElement("style");
  return a22.appendChild(document.createTextNode("")), document.head.appendChild(a22), a22.sheet;
}
function os2(a22, t19) {
  a22.insertRule(t19);
}
var ls2 = class extends ns2 {
  constructor(t19) {
    super(t19), this.layers = {}, this.themeSheets = {}, this.subscribe("storeValueChange", (i27) => {
      const { key: e11, value: r24 } = i27;
      e11 === "drawerOpened" ? this.publish("drawerToggle", { opened: r24 }) : e11 === "selectedElement" ? this.publish("elementSelect", { element: this.getSelectedElement() }) : e11 === "previewedElement" && this.publish("elementPreview", { element: this.getPreviewedElement() });
    }), this.getRootElement().setAttribute("data-theme", this.getTheme());
  }
  openDrawer() {
    this.setStoreValue("drawerOpened", true);
  }
  closeDrawer() {
    this.setStoreValue("drawerOpened", false);
  }
  isDrawerOpened() {
    return this.getStoreValue("drawerOpened", false);
  }
  setSelectedElement(t19) {
    this.getSelectedElement() !== t19 && (this.setStoreValue("selectedElement", t19), this.setStoreValue(
      "allowedChildren",
      ai5(t19, this.getConnector())
    ));
  }
  setPreviewedElement(t19) {
    this.getPreviewedElement() !== t19 && this.setStoreValue("previewedElement", t19);
  }
  addElements(t19, i27 = "default") {
    super.addElements(t19, i27);
    const e11 = this.getSelectedElement();
    e11 && this.setStoreValue(
      "allowedChildren",
      ai5(e11, this.getConnector())
    ), this.publish("elementsAdd");
  }
  setHtml(t19) {
    super.setHtml(t19);
    const i27 = this.getConnector().getRootElement().querySelector("dashboard-tab");
    i27 && this.setSelectedElement(i27), this.publish("htmlSet");
  }
  resetHtml() {
    this.setHtml(`
      <dashboard-tab tab-name="TeleOperated" slot="tab" selected></dashboard-tab>
      <dashboard-tab slot="tab" tab-name="Autonomous"></dashboard-tab>
    `);
  }
  reloadHtml() {
    this.setHtml(this.getHtml());
  }
  getSelectedElement() {
    return this.getStoreValue("selectedElement", null);
  }
  getPreviewedElement() {
    return this.getStoreValue("previewedElement", null);
  }
  getAllowedChildren() {
    return this.getStoreValue("allowedChildren", []);
  }
  /**
   *
   * @param {string} id
   * @param {string} elementName
   */
  addPropertyInput(t19, i27) {
    this.addComponent({
      type: "propertyInput",
      id: t19,
      mount({ dashboard: e11, element: r24, config: _21 }) {
        const h26 = document.createElement(i27);
        h26.element = _21.element, h26.propertyHandler = _21.propertyHandler, h26.propertyName = _21.propertyName, h26.dashboard = e11, r24.append(h26);
        const u35 = (O20) => {
          e11.publish("propertyInputChange", O20.detail);
        };
        h26.addEventListener("change", u35);
        const l26 = e11.subscribe(
          "propertyInputChange",
          () => {
            h26 == null || h26.requestUpdate();
          }
        );
        return () => {
          h26.removeEventListener("change", u35), l26(), h26.remove();
        };
      }
    });
  }
  addElementEditor(t19, i27) {
    this.addComponent({
      type: "elementEditor",
      id: t19,
      mount({ dashboard: e11, element: r24 }) {
        const _21 = document.createElement(i27);
        return _21.dashboard = e11, r24.append(_21), () => {
          _21.remove();
        };
      }
    });
  }
  addTab(t19, i27) {
    const e11 = document.createElement("dashboard-tab");
    return i27 && (e11.innerHTML = i27), e11.setAttribute("tab-name", t19), e11.setAttribute("slot", "tab"), this.getRootElement().append(e11), e11;
  }
  isElementEditable(t19 = this.getSelectedElement()) {
    return t19 ? t19.tagName.toLowerCase() !== "dashboard-tab" || !t19.hasAttribute("tutorial") : true;
  }
  addLayer(t19) {
    return this.layers[t19] ? this.layers[t19] : (this.layers[t19] = as2(t19), this.publish("layerAdd", { layer: this.layers[t19] }), this.layers[t19]);
  }
  hasLayer(t19) {
    return !!this.layers[t19];
  }
  getLayer(t19) {
    return this.layers[t19];
  }
  getLayers() {
    return this.layers;
  }
  addThemeRules(t19, i27) {
    typeof this.themeSheets[t19] > "u" && (this.themeSheets[t19] = _s2());
    const e11 = Object.entries(i27).map(
      ([r24, _21]) => `${r24}: ${_21};`
    );
    os2(
      this.themeSheets[t19],
      `
      [data-theme="${t19}"] {
        ${e11.join(`
`)}
      }
    `
    ), this.publish("themeRulesAdd");
  }
  setTheme(t19) {
    this.getRootElement().setAttribute("data-theme", t19), localStorage.setItem("theme", t19), this.setStoreValue("theme", t19), this.publish("themeSet");
  }
  getTheme() {
    const t19 = localStorage.getItem("theme") ?? "dark";
    return this.getStoreValue("theme", t19);
  }
  getThemes() {
    const t19 = ["light", ...Object.keys(this.themeSheets)];
    return [...new Set(t19).values()];
  }
};

// node_modules/@frc-web-components/react/dist/NT4Provider-5cc60b98.js
var q10 = (r24, e11, t19) => {
  if (!e11.has(r24))
    throw TypeError("Cannot " + t19);
};
var b23 = (r24, e11, t19) => (q10(r24, e11, "read from private field"), t19 ? t19.call(r24) : e11.get(r24));
var y18 = (r24, e11, t19) => {
  if (e11.has(r24))
    throw TypeError("Cannot add the same private member more than once");
  e11 instanceof WeakSet ? e11.add(r24) : e11.set(r24, t19);
};
var $14 = (r24, e11, t19, i27) => (q10(r24, e11, "write to private field"), e11.set(r24, t19), t19);
var v20 = (r24, e11, t19) => (q10(r24, e11, "access private method"), t19);
var ie6 = typeof global == "object" && global && global.Object === Object && global;
var ne6 = typeof self == "object" && self && self.Object === Object && self;
var se5 = ie6 || ne6 || Function("return this")();
var V11 = se5.Symbol;
var B13 = V11 ? V11.prototype : void 0;
B13 && B13.toString;
var Y9 = () => {
};
var A12;
var m22;
var _14;
var U15;
var I11;
var x19;
var C15;
var E17;
var k19;
var M6;
var D12;
var R13;
var re6 = class {
  constructor(e11 = {}, t19 = 0) {
    y18(this, C15), y18(this, k19), y18(this, D12), y18(this, A12, void 0), y18(this, m22, {}), y18(this, _14, void 0), y18(this, U15, /* @__PURE__ */ new Map()), y18(this, I11, /* @__PURE__ */ new Map()), y18(this, x19, /* @__PURE__ */ new Map()), t19 && $14(this, A12, setInterval(v20(this, C15, E17).bind(this), t19)), Object.entries(e11).forEach(([i27, c27]) => {
      this.updateSource(i27, c27);
    });
  }
  /**
   * Updates the value of a source in the store. If the source doesn't
   * exist then it is added. Should only be called internally by the
   * source provider.
   *
   * @protected
   * @param {string} key - The source's key. This is a string separated
   * by '/'.
   * @param {*} value - The new value.
   */
  updateSource(e11, t19) {
    clearTimeout(b23(this, _14)), b23(this, m22)[e11] === void 0 ? b23(this, m22)[e11] = {
      first: {
        type: "change",
        value: t19
      }
    } : b23(this, m22)[e11].last = {
      type: "change",
      value: t19
    }, b23(this, A12) || v20(this, C15, E17).call(this);
  }
  /**
   * Removes an existing source from the store. If the source
   * doesn't exist this does nothing. Should only be called
   * internally by the source provider.
   *
   * @protected
   * @param {string} key - The source's key. This is a string separated
   * by '/'.
   */
  removeSource(e11) {
    b23(this, m22)[e11] === void 0 ? b23(this, m22)[e11] = {
      first: {
        type: "removal"
      }
    } : b23(this, m22)[e11].last = {
      type: "removal"
    }, b23(this, A12) || v20(this, C15, E17).call(this);
  }
  /**
   * Removes all sources in the store for this provider. Should only be
   * called internally by the source provider.
   *
   * @protected
   * @param {function} callback - An optional callback. Called when sources
   * have been cleared.
   */
  clearSources(e11 = Y9) {
    v20(this, C15, E17).call(this, () => {
      b23(this, U15).forEach((t19) => t19()), e11();
    });
  }
  /**
   * Removes all sources in the store for this provider after a period of time.
   * If a source is set or this function is called before that period of time
   * ends, sources will not be cleared. This is useful for preventing sources
   * from being cleared on an unreliable network. Should only be called internally
   * by the source provider.
   *
   * @protected
   * @param {number} timeout - The period of time before clearing the sources
   * in milliseconds.
   * @param {function} callback - An optional callback. Called when sources
   * have been cleared.
   */
  clearSourcesWithTimeout(e11, t19) {
    clearTimeout(b23(this, _14)), $14(this, _14, setTimeout(() => {
      this.clearSources(t19);
    }, e11));
  }
  /**
   * Called when a source's value is modified by the user. This method
   * should be overridden by the child class to handle these updates.
   * This method should not be called directly.
   *
   * @protected
   * @param {string} key - The source's key. This is a string separated
   * by '/'.
   * @param {*} value - The source's updated value.
   */
  userUpdate(e11, t19) {
    this.updateSource(e11, t19);
  }
  /**
   * This optional method is called when a key is subscribed to that the store does not
   * already have. A SourceProvider can override this method to update the store with
   * the requested source.
   * @Override
   * @param {string} key
   */
  // eslint-disable-next-line class-methods-use-this, @typescript-eslint/no-empty-function
  requestSource(e11) {
  }
  /**
   * Helper function to get the type of a variable represented
   * by a string.
   *
   * @param {*} value
   * @returns {string} - The value's type.
   */
  static getType(e11) {
    return typeof e11 == "string" ? "string" : typeof e11 == "number" ? "number" : typeof e11 == "boolean" ? "boolean" : e11 instanceof Array ? "Array" : e11 === null ? "null" : null;
  }
  addClearSourcesHandler(e11) {
    const t19 = Symbol("clearSources");
    return b23(this, U15).set(t19, e11), () => {
      b23(this, U15).delete(t19);
    };
  }
  addSourcesChangedHandler(e11) {
    const t19 = Symbol("sourcesChanged");
    return b23(this, I11).set(t19, e11), () => {
      b23(this, I11).delete(t19);
    };
  }
  addSourcesRemovedHandler(e11) {
    const t19 = Symbol("sourcesRemoved");
    return b23(this, x19).set(t19, e11), () => {
      b23(this, x19).delete(t19);
    };
  }
  disconnect() {
    clearTimeout(b23(this, A12));
  }
};
A12 = /* @__PURE__ */ new WeakMap(), m22 = /* @__PURE__ */ new WeakMap(), _14 = /* @__PURE__ */ new WeakMap(), U15 = /* @__PURE__ */ new WeakMap(), I11 = /* @__PURE__ */ new WeakMap(), x19 = /* @__PURE__ */ new WeakMap(), C15 = /* @__PURE__ */ new WeakSet(), E17 = function(r24 = Y9) {
  if (Object.keys(b23(this, m22)).length === 0) {
    r24();
    return;
  }
  const e11 = { ...b23(this, m22) };
  $14(this, m22, {});
  const t19 = {}, i27 = {};
  Object.entries(e11).forEach(([c27, o13]) => {
    t19[c27] = o13.first, typeof o13.last < "u" && (i27[c27] = o13.last);
  }), v20(this, k19, M6).call(this, t19), v20(this, D12, R13).call(this, t19), Object.keys(i27).length > 0 ? setTimeout(() => {
    v20(this, k19, M6).call(this, i27), v20(this, D12, R13).call(this, i27), r24();
  }) : r24();
}, k19 = /* @__PURE__ */ new WeakSet(), M6 = function(r24) {
  const e11 = {};
  Object.entries(r24).forEach(([t19, { type: i27 }]) => {
    i27 === "change" && (e11[t19] = r24[t19].value);
  }), Object.keys(e11).length > 0 && b23(this, I11).forEach((t19) => t19(e11));
}, D12 = /* @__PURE__ */ new WeakSet(), R13 = function(r24) {
  const e11 = [];
  Object.entries(r24).forEach(([t19, { type: i27 }]) => {
    i27 === "removal" && e11.push(t19);
  }), e11.length > 0 && b23(this, x19).forEach((t19) => t19(e11));
};
function H12(r24, e11) {
  let t19, i27, c27 = new Uint8Array(128), o13 = 0;
  var h26 = "";
  return d34(r24, false, h26), c27.subarray(0, o13);
  function d34(s18, a22, u35) {
    switch (typeof s18) {
      case "undefined":
        w31();
        break;
      case "boolean":
        N22(s18);
        break;
      case "number":
        O20(s18, u35);
        break;
      case "string":
        S23(s18);
        break;
      case "object":
        s18 === null ? w31() : s18 instanceof Date ? p26(s18) : Array.isArray(s18) ? g32(s18) : s18 instanceof Uint8Array || s18 instanceof Uint8ClampedArray ? F19(s18) : s18 instanceof Int8Array || s18 instanceof Int16Array || s18 instanceof Uint16Array || s18 instanceof Int32Array || s18 instanceof Uint32Array || s18 instanceof Float32Array || s18 instanceof Float64Array ? g32(s18) : n33(s18);
        break;
      default:
        if (!a22 && e11 && e11.invalidTypeReplacement)
          typeof e11.invalidTypeReplacement == "function" || d34(e11.invalidTypeReplacement, true, u35);
        else
          throw new Error(
            "Invalid argument type: The type '" + typeof s18 + "' cannot be serialized."
          );
    }
  }
  function w31(s18) {
    f40(192);
  }
  function N22(s18) {
    f40(s18 ? 195 : 194);
  }
  function O20(s18, a22) {
    var u35 = a22 === "int" || isFinite(s18) && Math.floor(s18) === s18 && a22 !== "double" && a22 !== "float";
    if (u35)
      if (s18 >= 0 && s18 <= 127)
        f40(s18);
      else if (s18 < 0 && s18 >= -32)
        f40(s18);
      else if (s18 > 0 && s18 <= 255)
        l26([204, s18]);
      else if (s18 >= -128 && s18 <= 127)
        l26([208, s18]);
      else if (s18 > 0 && s18 <= 65535)
        l26([205, s18 >>> 8, s18]);
      else if (s18 >= -32768 && s18 <= 32767)
        l26([209, s18 >>> 8, s18]);
      else if (s18 > 0 && s18 <= 4294967295)
        l26([206, s18 >>> 24, s18 >>> 16, s18 >>> 8, s18]);
      else if (s18 >= -2147483648 && s18 <= 2147483647)
        l26([210, s18 >>> 24, s18 >>> 16, s18 >>> 8, s18]);
      else if (s18 > 0 && s18 <= 18446744073709552e3) {
        let T21 = s18 / 4294967296, j19 = s18 % 4294967296;
        l26([
          211,
          T21 >>> 24,
          T21 >>> 16,
          T21 >>> 8,
          T21,
          j19 >>> 24,
          j19 >>> 16,
          j19 >>> 8,
          j19
        ]);
      } else
        s18 >= -9223372036854776e3 && s18 <= 9223372036854776e3 ? (f40(211), L12(s18)) : s18 < 0 ? l26([211, 128, 0, 0, 0, 0, 0, 0, 0]) : l26([207, 255, 255, 255, 255, 255, 255, 255, 255]);
    else
      i27 || (t19 = new ArrayBuffer(8), i27 = new DataView(t19)), i27.setFloat64(0, s18), f40(203), l26(new Uint8Array(t19));
  }
  function S23(s18) {
    let a22 = ce7(s18), u35 = a22.length;
    u35 <= 31 ? f40(160 + u35) : u35 <= 255 ? l26([217, u35]) : u35 <= 65535 ? l26([218, u35 >>> 8, u35]) : l26([219, u35 >>> 24, u35 >>> 16, u35 >>> 8, u35]), l26(a22);
  }
  function g32(s18) {
    let a22 = s18.length;
    a22 <= 15 ? f40(144 + a22) : a22 <= 65535 ? l26([220, a22 >>> 8, a22]) : l26([221, a22 >>> 24, a22 >>> 16, a22 >>> 8, a22]);
    for (let u35 = 0; u35 < a22; u35++)
      d34(s18[u35]);
  }
  function F19(s18) {
    let a22 = s18.length;
    a22 <= 15 ? l26([196, a22]) : a22 <= 65535 ? l26([197, a22 >>> 8, a22]) : l26([198, a22 >>> 24, a22 >>> 16, a22 >>> 8, a22]), l26(s18);
  }
  function n33(s18) {
    let a22 = 0;
    for (let u35 in s18)
      s18[u35] !== void 0 && a22++;
    a22 <= 15 ? f40(128 + a22) : a22 <= 65535 ? l26([222, a22 >>> 8, a22]) : l26([223, a22 >>> 24, a22 >>> 16, a22 >>> 8, a22]);
    for (let u35 in s18) {
      let T21 = s18[u35];
      T21 !== void 0 && (d34(u35), d34(T21));
    }
  }
  function p26(s18) {
    let a22 = s18.getTime() / 1e3;
    if (s18.getMilliseconds() === 0 && a22 >= 0 && a22 < 4294967296)
      l26([214, 255, a22 >>> 24, a22 >>> 16, a22 >>> 8, a22]);
    else if (a22 >= 0 && a22 < 17179869184) {
      let u35 = s18.getMilliseconds() * 1e6;
      l26([
        215,
        255,
        u35 >>> 22,
        u35 >>> 14,
        u35 >>> 6,
        u35 << 2 >>> 0 | a22 / 4294967296,
        a22 >>> 24,
        a22 >>> 16,
        a22 >>> 8,
        a22
      ]);
    } else {
      let u35 = s18.getMilliseconds() * 1e6;
      l26([199, 12, 255, u35 >>> 24, u35 >>> 16, u35 >>> 8, u35]), L12(a22);
    }
  }
  function f40(s18) {
    if (c27.length < o13 + 1) {
      let a22 = c27.length * 2;
      for (; a22 < o13 + 1; )
        a22 *= 2;
      let u35 = new Uint8Array(a22);
      u35.set(c27), c27 = u35;
    }
    c27[o13] = s18, o13++;
  }
  function l26(s18) {
    if (c27.length < o13 + s18.length) {
      let a22 = c27.length * 2;
      for (; a22 < o13 + s18.length; )
        a22 *= 2;
      let u35 = new Uint8Array(a22);
      u35.set(c27), c27 = u35;
    }
    c27.set(s18, o13), o13 += s18.length;
  }
  function L12(s18) {
    let a22, u35;
    s18 >= 0 ? (a22 = s18 / 4294967296, u35 = s18 % 4294967296) : (s18++, a22 = Math.abs(s18) / 4294967296, u35 = Math.abs(s18) % 4294967296, a22 = ~a22, u35 = ~u35), l26([
      a22 >>> 24,
      a22 >>> 16,
      a22 >>> 8,
      a22,
      u35 >>> 24,
      u35 >>> 16,
      u35 >>> 8,
      u35
    ]);
  }
}
function oe6(r24, e11) {
  let t19 = 0;
  if (r24 instanceof ArrayBuffer && (r24 = new Uint8Array(r24)), typeof r24 != "object" || typeof r24.length > "u")
    throw new Error(
      "Invalid argument type: Expected a byte array (Array or Uint8Array) to deserialize."
    );
  if (!r24.length)
    throw new Error(
      "Invalid argument: The byte array to deserialize is empty."
    );
  r24 instanceof Uint8Array || (r24 = new Uint8Array(r24));
  let i27;
  if (e11 && e11.multiple)
    for (i27 = []; t19 < r24.length; )
      i27.push(c27());
  else
    i27 = c27();
  return i27;
  function c27() {
    const n33 = r24[t19++];
    if (n33 >= 0 && n33 <= 127)
      return n33;
    if (n33 >= 128 && n33 <= 143)
      return N22(n33 - 128);
    if (n33 >= 144 && n33 <= 159)
      return O20(n33 - 144);
    if (n33 >= 160 && n33 <= 191)
      return S23(n33 - 160);
    if (n33 === 192)
      return null;
    if (n33 === 193)
      throw new Error("Invalid byte code 0xc1 found.");
    if (n33 === 194)
      return false;
    if (n33 === 195)
      return true;
    if (n33 === 196)
      return w31(-1, 1);
    if (n33 === 197)
      return w31(-1, 2);
    if (n33 === 198)
      return w31(-1, 4);
    if (n33 === 199)
      return g32(-1, 1);
    if (n33 === 200)
      return g32(-1, 2);
    if (n33 === 201)
      return g32(-1, 4);
    if (n33 === 202)
      return d34(4);
    if (n33 === 203)
      return d34(8);
    if (n33 === 204)
      return h26(1);
    if (n33 === 205)
      return h26(2);
    if (n33 === 206)
      return h26(4);
    if (n33 === 207)
      return h26(8);
    if (n33 === 208)
      return o13(1);
    if (n33 === 209)
      return o13(2);
    if (n33 === 210)
      return o13(4);
    if (n33 === 211)
      return o13(8);
    if (n33 === 212)
      return g32(1);
    if (n33 === 213)
      return g32(2);
    if (n33 === 214)
      return g32(4);
    if (n33 === 215)
      return g32(8);
    if (n33 === 216)
      return g32(16);
    if (n33 === 217)
      return S23(-1, 1);
    if (n33 === 218)
      return S23(-1, 2);
    if (n33 === 219)
      return S23(-1, 4);
    if (n33 === 220)
      return O20(-1, 2);
    if (n33 === 221)
      return O20(-1, 4);
    if (n33 === 222)
      return N22(-1, 2);
    if (n33 === 223)
      return N22(-1, 4);
    if (n33 >= 224 && n33 <= 255)
      return n33 - 256;
    throw console.debug("msgpack array:", r24), new Error(
      "Invalid byte value '" + n33 + "' at index " + (t19 - 1) + " in the MessagePack binary data (length " + r24.length + "): Expecting a range of 0 to 255. This is not a byte array."
    );
  }
  function o13(n33) {
    let p26 = 0, f40 = true;
    for (; n33-- > 0; )
      if (f40) {
        let l26 = r24[t19++];
        p26 += l26 & 127, l26 & 128 && (p26 -= 128), f40 = false;
      } else
        p26 *= 256, p26 += r24[t19++];
    return p26;
  }
  function h26(n33) {
    let p26 = 0;
    for (; n33-- > 0; )
      p26 *= 256, p26 += r24[t19++];
    return p26;
  }
  function d34(n33) {
    let p26 = new DataView(r24.buffer, t19 + r24.byteOffset, n33);
    if (t19 += n33, n33 === 4)
      return p26.getFloat32(0, false);
    if (n33 === 8)
      return p26.getFloat64(0, false);
  }
  function w31(n33, p26) {
    n33 < 0 && (n33 = h26(p26));
    let f40 = r24.subarray(t19, t19 + n33);
    return t19 += n33, f40;
  }
  function N22(n33, p26) {
    n33 < 0 && (n33 = h26(p26));
    let f40 = {};
    for (; n33-- > 0; ) {
      let l26 = c27();
      f40[l26] = c27();
    }
    return f40;
  }
  function O20(n33, p26) {
    n33 < 0 && (n33 = h26(p26));
    let f40 = [];
    for (; n33-- > 0; )
      f40.push(c27());
    return f40;
  }
  function S23(n33, p26) {
    n33 < 0 && (n33 = h26(p26));
    let f40 = t19;
    return t19 += n33, ae6(r24, f40, n33);
  }
  function g32(n33, p26) {
    n33 < 0 && (n33 = h26(p26));
    let f40 = h26(1), l26 = w31(n33);
    switch (f40) {
      case 255:
        return F19(l26);
    }
    return { type: f40, data: l26 };
  }
  function F19(n33) {
    if (n33.length === 4) {
      let p26 = (n33[0] << 24 >>> 0) + (n33[1] << 16 >>> 0) + (n33[2] << 8 >>> 0) + n33[3];
      return new Date(p26 * 1e3);
    }
    if (n33.length === 8) {
      let p26 = (n33[0] << 22 >>> 0) + (n33[1] << 14 >>> 0) + (n33[2] << 6 >>> 0) + (n33[3] >>> 2), f40 = (n33[3] & 3) * 4294967296 + (n33[4] << 24 >>> 0) + (n33[5] << 16 >>> 0) + (n33[6] << 8 >>> 0) + n33[7];
      return new Date(f40 * 1e3 + p26 / 1e6);
    }
    if (n33.length === 12) {
      let p26 = (n33[0] << 24 >>> 0) + (n33[1] << 16 >>> 0) + (n33[2] << 8 >>> 0) + n33[3];
      t19 -= 8;
      let f40 = o13(8);
      return new Date(f40 * 1e3 + p26 / 1e6);
    }
    throw new Error("Invalid data length for a date value.");
  }
}
function ce7(r24) {
  let e11 = true, t19 = r24.length;
  for (let o13 = 0; o13 < t19; o13++)
    if (r24.charCodeAt(o13) > 127) {
      e11 = false;
      break;
    }
  let i27 = 0, c27 = new Uint8Array(r24.length * (e11 ? 1 : 4));
  for (let o13 = 0; o13 !== t19; o13++) {
    let h26 = r24.charCodeAt(o13);
    if (h26 < 128) {
      c27[i27++] = h26;
      continue;
    }
    if (h26 < 2048)
      c27[i27++] = h26 >> 6 | 192;
    else {
      if (h26 > 55295 && h26 < 56320) {
        if (++o13 >= t19)
          throw new Error("UTF-8 encode: incomplete surrogate pair");
        let d34 = r24.charCodeAt(o13);
        if (d34 < 56320 || d34 > 57343)
          throw new Error(
            "UTF-8 encode: second surrogate character 0x" + d34.toString(16) + " at index " + o13 + " out of range"
          );
        h26 = 65536 + ((h26 & 1023) << 10) + (d34 & 1023), c27[i27++] = h26 >> 18 | 240, c27[i27++] = h26 >> 12 & 63 | 128;
      } else
        c27[i27++] = h26 >> 12 | 224;
      c27[i27++] = h26 >> 6 & 63 | 128;
    }
    c27[i27++] = h26 & 63 | 128;
  }
  return e11 ? c27 : c27.subarray(0, i27);
}
function ae6(r24, e11, t19) {
  let i27 = e11, c27 = "";
  for (t19 += e11; i27 < t19; ) {
    let o13 = r24[i27++];
    if (o13 > 127)
      if (o13 > 191 && o13 < 224) {
        if (i27 >= t19)
          throw new Error("UTF-8 decode: incomplete 2-byte sequence");
        o13 = (o13 & 31) << 6 | r24[i27++] & 63;
      } else if (o13 > 223 && o13 < 240) {
        if (i27 + 1 >= t19)
          throw new Error("UTF-8 decode: incomplete 3-byte sequence");
        o13 = (o13 & 15) << 12 | (r24[i27++] & 63) << 6 | r24[i27++] & 63;
      } else if (o13 > 239 && o13 < 248) {
        if (i27 + 2 >= t19)
          throw new Error("UTF-8 decode: incomplete 4-byte sequence");
        o13 = (o13 & 7) << 18 | (r24[i27++] & 63) << 12 | (r24[i27++] & 63) << 6 | r24[i27++] & 63;
      } else
        throw new Error(
          "UTF-8 decode: unknown multibyte start 0x" + o13.toString(16) + " at index " + (i27 - 1)
        );
    if (o13 <= 65535)
      c27 += String.fromCharCode(o13);
    else if (o13 <= 1114111)
      o13 -= 65536, c27 += String.fromCharCode(o13 >> 10 | 55296), c27 += String.fromCharCode(o13 & 1023 | 56320);
    else
      throw new Error(
        "UTF-8 decode: code point 0x" + o13.toString(16) + " exceeds UTF-16 reach"
      );
  }
  return c27;
}
var W8 = {
  boolean: 0,
  double: 1,
  int: 2,
  float: 3,
  string: 4,
  json: 4,
  raw: 5,
  rpc: 5,
  msgpack: 5,
  protobuf: 5,
  "boolean[]": 16,
  "double[]": 17,
  "int[]": 18,
  "float[]": 19,
  "string[]": 20
};
var P12 = class {
  constructor() {
    this.uid = -1, this.topics = /* @__PURE__ */ new Set(), this.options = new he6();
  }
  toSubscribeObj() {
    return {
      topics: Array.from(this.topics),
      subuid: this.uid,
      options: this.options.toObj()
    };
  }
  toUnsubscribeObj() {
    return {
      subuid: this.uid
    };
  }
};
var he6 = class {
  constructor() {
    this.periodic = 0.02, this.all = false, this.topicsOnly = false, this.prefix = false;
  }
  toObj() {
    return {
      periodic: this.periodic,
      all: this.all,
      topicsonly: this.topicsOnly,
      prefix: this.prefix
    };
  }
};
var z14 = class {
  constructor() {
    this.uid = -1, this.name = "", this.type = "", this.properties = {};
  }
  toPublishObj() {
    return {
      name: this.name,
      type: this.type,
      pubuid: this.uid,
      properties: this.properties
    };
  }
  toUnpublishObj() {
    return {
      pubuid: this.uid
    };
  }
  getTypeIdx() {
    return this.type in W8 ? W8[this.type] : 5;
  }
};
var ue6 = class {
  /**
   * Creates a new NT4 client without connecting.
   * @param serverAddr Network address of NT4 server
   * @param appName Identifier for this client (does not need to be unique).
   * @param onTopicAnnounce Gets called when server announces enough topics to form a new signal
   * @param onTopicUnannounce Gets called when server unannounces any part of a signal
   * @param onNewTopicData Gets called when any new data is available
   * @param onConnect Gets called once client completes initial handshake with server
   * @param onDisconnect Gets called once client detects server has disconnected
   */
  constructor(e11, t19, i27, c27, o13, h26, d34) {
    this.ws = null, this.clientIdx = 0, this.useSecure = false, this.serverAddr = "", this.serverConnectionActive = false, this.serverConnectionRequested = false, this.serverTimeOffset_us = null, this.uidCounter = 0, this.subscriptions = /* @__PURE__ */ new Map(), this.publishedTopics = /* @__PURE__ */ new Map(), this.serverTopics = /* @__PURE__ */ new Map(), this.serverBaseAddr = e11, this.appName = t19, this.onTopicAnnounce = i27, this.onTopicUnannounce = c27, this.onNewTopicData = o13, this.onConnect = h26, this.onDisconnect = d34, setInterval(() => this.ws_sendTimestamp(), 5e3);
  }
  //////////////////////////////////////////////////////////////
  // PUBLIC API
  /** Starts the connection. The client will reconnect automatically when disconnected. */
  connect() {
    this.serverConnectionRequested || (this.serverConnectionRequested = true, this.ws_connect());
  }
  /** Terminates the connection. */
  disconnect() {
    this.serverConnectionRequested && (this.serverConnectionRequested = false, this.serverConnectionActive && this.ws && this.ws.close());
  }
  /**
   * Add a new subscription, reading data at the specified frequency.
   * @param topicPatterns A list of topics or prefixes to include in the subscription.
   * @param prefixMode If true, use patterns as prefixes. If false, only subscribe to topics that are an exact match.
   * @param period The period to return data in seconds.
   * @returns A subscription ID that can be used to unsubscribe.
   */
  subscribePeriodic(e11, t19, i27) {
    let c27 = new P12();
    return c27.uid = this.getNewUID(), c27.topics = new Set(e11), c27.options.prefix = t19, c27.options.periodic = i27, this.subscriptions.set(c27.uid, c27), this.serverConnectionActive && this.ws_subscribe(c27), c27.uid;
  }
  /**
   * Add a new subscription, reading all value updates.
   * @param topicPatterns A list of topics or prefixes to include in the subscription.
   * @param prefixMode If true, use patterns as prefixes. If false, only subscribe to topics that are an exact match.
   * @returns A subscription ID that can be used to unsubscribe.
   */
  subscribeAll(e11, t19) {
    let i27 = new P12();
    return i27.uid = this.getNewUID(), i27.topics = new Set(e11), i27.options.prefix = t19, i27.options.all = true, this.subscriptions.set(i27.uid, i27), this.serverConnectionActive && this.ws_subscribe(i27), i27.uid;
  }
  /**
   * Add a new subscription, reading only topic announcements (not values).
   * @param topicPatterns A list of topics or prefixes to include in the subscription.
   * @param prefixMode If true, use patterns as prefixes. If false, only subscribe to topics that are an exact match.
   * @returns A subscription ID that can be used to unsubscribe.
   */
  subscribeTopicsOnly(e11, t19) {
    let i27 = new P12();
    return i27.uid = this.getNewUID(), i27.topics = new Set(e11), i27.options.prefix = t19, i27.options.topicsOnly = true, this.subscriptions.set(i27.uid, i27), this.serverConnectionActive && this.ws_subscribe(i27), i27.uid;
  }
  /** Given an existing subscription, unsubscribe from it. */
  unsubscribe(e11) {
    let t19 = this.subscriptions.get(e11);
    if (!t19)
      throw 'Unknown subscription ID "' + e11 + '"';
    this.subscriptions.delete(e11), this.serverConnectionActive && this.ws_unsubscribe(t19);
  }
  /** Unsubscribe from all current subscriptions. */
  clearAllSubscriptions() {
    for (const e11 of this.subscriptions.keys())
      this.unsubscribe(e11);
  }
  /**
   * Set the properties of a particular topic.
   * @param topic The topic to update
   * @param properties The set of new properties
   */
  setProperties(e11, t19) {
    let i27 = (h26) => {
      for (const d34 of Object.keys(t19)) {
        let w31 = t19[d34];
        w31 === null ? delete h26.properties[d34] : h26.properties[d34] = w31;
      }
    }, c27 = this.publishedTopics.get(e11);
    c27 && i27(c27);
    let o13 = this.serverTopics.get(e11);
    o13 && i27(o13), this.serverConnectionActive && this.ws_setproperties(e11, t19);
  }
  /** Set whether a topic is persistent.
   *
   * If true, the last set value will be periodically saved to
   * persistent storage on the server and be restored during server
   * startup. Topics with this property set to true will not be
   * deleted by the server when the last publisher stops publishing.
   */
  setPersistent(e11, t19) {
    this.setProperties(e11, { persistent: t19 });
  }
  /** Set whether a topic is retained.
   *
   * Topics with this property set to true will not be deleted by
   * the server when the last publisher stops publishing.
   */
  setRetained(e11, t19) {
    this.setProperties(e11, { retained: t19 });
  }
  /** Publish a new topic from this client with the provided name and type. */
  publishNewTopic(e11, t19) {
    if (this.publishedTopics.has(e11))
      return;
    let i27 = new z14();
    i27.name = e11, i27.uid = this.getNewUID(), i27.type = t19, this.publishedTopics.set(e11, i27), this.serverConnectionActive && this.ws_publish(i27);
  }
  /** Unpublish a previously-published topic from this client. */
  unpublishTopic(e11) {
    let t19 = this.publishedTopics.get(e11);
    if (!t19)
      throw 'Topic "' + e11 + '" not found';
    this.publishedTopics.delete(e11), this.serverConnectionActive && this.ws_unpublish(t19);
  }
  /** Send some new value to the server. The timestamp is whatever the current time is. */
  addSample(e11, t19) {
    let i27 = this.getServerTime_us();
    i27 === null && (i27 = 0), this.addTimestampedSample(e11, i27, t19);
  }
  /** Send some new timestamped value to the server. */
  addTimestampedSample(e11, t19, i27) {
    let c27 = this.publishedTopics.get(e11);
    if (!c27)
      throw 'Topic "' + e11 + '" not found';
    let o13 = H12([
      c27.uid,
      t19,
      c27.getTypeIdx(),
      i27
    ]);
    this.ws_sendBinary(o13);
  }
  //////////////////////////////////////////////////////////////
  // Server/Client Time Sync Handling
  /** Returns the current client time in microseconds. */
  getClientTime_us() {
    return (/* @__PURE__ */ new Date()).getTime() * 1e3;
  }
  /** Returns the current server time in microseconds (or null if unknown). */
  getServerTime_us() {
    return this.serverTimeOffset_us === null ? null : this.getClientTime_us() + this.serverTimeOffset_us;
  }
  ws_sendTimestamp() {
    let e11 = this.getClientTime_us(), t19 = H12([-1, 0, W8.int, e11]);
    this.ws_sendBinary(t19);
  }
  ws_handleReceiveTimestamp(e11, t19) {
    let i27 = this.getClientTime_us(), c27 = i27 - t19, o13 = e11 + c27 / 2;
    this.serverTimeOffset_us = o13 - i27, console.log(
      "[NT4] New server time estimate: " + (this.getServerTime_us() / 1e6).toString()
    );
  }
  //////////////////////////////////////////////////////////////
  // Websocket Message Send Handlers
  ws_subscribe(e11) {
    this.ws_sendJSON("subscribe", e11.toSubscribeObj());
  }
  ws_unsubscribe(e11) {
    this.ws_sendJSON("unsubscribe", e11.toUnsubscribeObj());
  }
  ws_publish(e11) {
    this.ws_sendJSON("publish", e11.toPublishObj());
  }
  ws_unpublish(e11) {
    this.ws_sendJSON("unpublish", e11.toUnpublishObj());
  }
  ws_setproperties(e11, t19) {
    this.ws_sendJSON("setproperties", {
      name: e11,
      update: t19
    });
  }
  ws_sendJSON(e11, t19) {
    this.ws && this.ws.readyState === WebSocket.OPEN && this.ws.send(
      JSON.stringify([
        {
          method: e11,
          params: t19
        }
      ])
    );
  }
  ws_sendBinary(e11) {
    this.ws && this.ws.readyState === WebSocket.OPEN && this.ws.send(e11);
  }
  //////////////////////////////////////////////////////////////
  // Websocket connection Maintenance
  ws_onOpen() {
    this.serverConnectionActive = true, console.log("[NT4] Connected with idx " + this.clientIdx.toString()), this.ws_sendTimestamp();
    for (const e11 of this.publishedTopics.values())
      this.ws_publish(e11);
    for (const e11 of this.subscriptions.values())
      this.ws_subscribe(e11);
    this.onConnect();
  }
  ws_onClose(e11) {
    this.ws = null, this.serverConnectionActive = false, this.onDisconnect(), this.serverTopics.clear(), e11.reason !== "" && console.log("[NT4] Socket is closed: ", e11.reason), this.serverConnectionRequested && setTimeout(() => this.ws_connect(), 500);
  }
  ws_onError() {
    this.ws && this.ws.close();
  }
  ws_onMessage(e11) {
    if (typeof e11.data == "string") {
      let t19 = JSON.parse(e11.data);
      if (!Array.isArray(t19)) {
        console.warn(
          "[NT4] Ignoring text message, JSON parsing did not produce an array at the top level."
        );
        return;
      }
      t19.forEach((i27) => {
        if (typeof i27 != "object") {
          console.warn(
            "[NT4] Ignoring text message, JSON parsing did not produce an object."
          );
          return;
        }
        if (!("method" in i27) || !("params" in i27)) {
          console.warn(
            "[NT4] Ignoring text message, JSON parsing did not find all required fields."
          );
          return;
        }
        let c27 = i27.method, o13 = i27.params;
        if (typeof c27 != "string") {
          console.warn(
            `[NT4] Ignoring text message, JSON parsing found "method", but it wasn't a string.`
          );
          return;
        }
        if (typeof o13 != "object") {
          console.warn(
            `[NT4] Ignoring text message, JSON parsing found "params", but it wasn't an object.`
          );
          return;
        }
        if (c27 === "announce") {
          let h26 = new z14();
          h26.uid = o13.id, h26.name = o13.name, h26.type = o13.type, h26.properties = o13.properties, this.serverTopics.set(h26.name, h26), this.onTopicAnnounce(h26);
        } else if (c27 === "unannounce") {
          let h26 = this.serverTopics.get(o13.name);
          if (!h26) {
            console.warn(
              "[NT4] Ignoring unannounce, topic was not previously announced."
            );
            return;
          }
          this.serverTopics.delete(h26.name), this.onTopicUnannounce(h26);
        } else if (c27 === "properties") {
          let h26 = this.serverTopics.get(o13.name);
          if (!h26) {
            console.warn(
              "[NT4] Ignoring set properties, topic was not previously announced."
            );
            return;
          }
          for (const d34 of Object.keys(o13.update)) {
            let w31 = o13.update[d34];
            w31 === null ? delete h26.properties[d34] : h26.properties[d34] = w31;
          }
        } else {
          console.warn(
            "[NT4] Ignoring text message - unknown method " + c27
          );
          return;
        }
      });
    } else
      oe6(e11.data, { multiple: true }).forEach(
        (t19) => {
          let i27 = t19[0], c27 = t19[1], o13 = t19[3];
          if (i27 >= 0) {
            let h26 = null;
            for (let d34 of this.serverTopics.values())
              d34.uid === i27 && (h26 = d34);
            if (!h26) {
              console.warn(
                "[NT4] Ignoring binary data - unknown topic ID " + i27.toString()
              );
              return;
            }
            this.onNewTopicData(h26, c27, o13);
          } else
            i27 === -1 ? this.ws_handleReceiveTimestamp(c27, o13) : console.warn(
              "[NT4] Ignoring binary data - invalid topic ID " + i27.toString()
            );
        }
      );
  }
  ws_connect() {
    this.clientIdx = Math.floor(Math.random() * 99999999);
    let e11 = 5810, t19 = "ws://";
    this.useSecure && (t19 = "wss://", e11 = 5811), this.serverAddr = t19 + this.serverBaseAddr + ":" + e11.toString() + "/nt/" + this.appName + "_" + this.clientIdx.toString(), this.ws = new WebSocket(this.serverAddr, "networktables.first.wpi.edu"), this.ws.binaryType = "arraybuffer", this.ws.addEventListener("open", () => this.ws_onOpen()), this.ws.addEventListener(
      "message",
      (i27) => this.ws_onMessage(i27)
    ), this.ws.addEventListener(
      "close",
      (i27) => this.ws_onClose(i27)
    ), this.ws.addEventListener("error", () => this.ws_onError());
  }
  //////////////////////////////////////////////////////////////
  // General utilties
  getNewUID() {
    return this.uidCounter++, this.uidCounter + this.clientIdx;
  }
};
function J9(r24) {
  if (typeof r24 == "boolean" || typeof r24 == "string")
    return typeof r24;
  if (typeof r24 == "number")
    return "double";
  if (r24 instanceof Array) {
    if (r24.length === 0)
      return;
    const e11 = J9(r24[0]);
    return r24.some((t19) => J9(t19) !== e11) ? void 0 : `${e11}[]`;
  }
}
function le5(r24) {
  const e11 = r24.toString().at(-4) ?? "", t19 = r24.toString().at(-3) ?? "", i27 = r24.toString().at(-2) ?? "", c27 = r24.toString().at(-1) ?? "";
  let o13 = parseInt(`${e11}${t19}`, 10), h26 = parseInt(`${i27}${c27}`, 10);
  Number.isNaN(o13) && (o13 = 0), Number.isNaN(h26) && (h26 = 0);
  const d34 = e11 + t19 + i27 + c27;
  return [
    `10.${o13.toString()}.${h26.toString()}.2`,
    "172.22.11.2",
    `roborio-${d34}-FRC.local`,
    `roborio-${d34}-FRC.lan`,
    `roborio-${d34}-FRC.frc-field.local`
  ];
}
var de7 = class extends re6 {
  constructor() {
    super({}, 1e3 / 60), this.serverAddress = "", this.clients = {}, this.connected = false, this.topics = {}, this.topicValues = {}, this.unprocessedUpdates = {}, this.connectionListeners = [], this.connect(localStorage.getItem("nt4Address") ?? "127.0.0.1");
  }
  setValue(e11, t19) {
    this.userUpdate(e11, t19);
  }
  getValue(e11, t19) {
    return e11 in this.topicValues ? this.topicValues[e11] : t19;
  }
  getServerAddress() {
    return this.serverAddress;
  }
  connect(e11) {
    this.serverAddress !== e11 && (this.clearSources(), this.createClient(e11));
  }
  disconnect() {
    var e11;
    (e11 = this.client) == null || e11.disconnect();
  }
  isConnected() {
    return this.connected;
  }
  addConnectionListener(e11, t19 = false) {
    this.connectionListeners.push(e11), t19 && e11(this.connected, this.serverAddress);
  }
  processUnprocessedUpdates() {
    const e11 = { ...this.unprocessedUpdates };
    this.unprocessedUpdates = {}, Object.entries(e11).forEach(([t19, i27]) => {
      this.userUpdate(t19, i27);
    });
  }
  // TODO: Be able to optionally pass in additional data
  userUpdate(e11, t19) {
    if (!this.client) {
      this.unprocessedUpdates[e11] = t19;
      return;
    }
    const i27 = this.topics[e11];
    if (i27)
      this.client.publishNewTopic(i27.name, i27.type), this.client.addSample(i27.name, t19), this.updateSource(i27.name, t19);
    else {
      const c27 = J9(t19);
      c27 !== void 0 && (this.client.publishNewTopic(e11, c27), this.client.addSample(e11, t19), this.updateSource(e11, t19));
    }
  }
  onTopicAnnounce(e11) {
    this.topics[e11.name] = e11;
  }
  onTopicUnannounce(e11) {
    delete this.topics[e11.name], delete this.topicValues[e11.name], this.removeSource(e11.name);
  }
  onNewTopicData(e11, t19, i27) {
    this.updateSource(e11.name, i27), this.topicValues[e11.name] = i27;
  }
  onConnect() {
    this.connected = true, this.connectionListeners.forEach(
      (e11) => e11(true, this.serverAddress)
    ), this.processUnprocessedUpdates();
  }
  onDisconnect() {
    this.connected = false, this.connectionListeners.forEach(
      (e11) => e11(false, this.serverAddress)
    );
  }
  createClient(e11) {
    this.client && (this.client.disconnect(), this.topics = {}, this.topicValues = {}, this.connected = false, this.client = void 0), Object.values(this.clients).forEach((i27) => i27.disconnect()), this.clients = {}, this.serverAddress = e11, this.connectionListeners.forEach(
      (i27) => i27(this.connected, this.serverAddress)
    ), localStorage.setItem("nt4Address", e11);
    const t19 = "FRC Web Components";
    (/^[0-9]+$/.test(e11) && !Number.isNaN(parseFloat(e11)) ? le5(parseFloat(e11)) : [e11]).forEach((i27) => {
      const c27 = new ue6(
        i27,
        t19,
        (...o13) => {
          this.client === c27 && this.onTopicAnnounce(...o13);
        },
        (...o13) => {
          this.client === c27 && this.onTopicUnannounce(...o13);
        },
        (...o13) => {
          this.client === c27 && this.onNewTopicData(...o13);
        },
        () => {
          this.client = c27, Object.entries(this.clients).forEach(
            ([o13, h26]) => {
              o13 !== i27 && h26.disconnect();
            }
          ), this.clients = {}, this.onConnect();
        },
        () => {
          this.client === c27 && this.onDisconnect();
        }
      );
      this.clients[i27] = c27, c27.connect(), c27.subscribeAll(["/"], true);
    });
  }
};
var G10 = (0, import_react5.createContext)(void 0);
function pe6(r24) {
  const e11 = new ls2(document.body), t19 = new de7();
  return e11.addSourceProvider("NetworkTables", t19), e11.setDefaultSourceProvider("NetworkTables"), e11.addElements(gr4, "FRC"), t19.connect(r24), { store: e11.getStore(), nt4Provider: t19 };
}
var ge5 = ({
  children: r24,
  address: e11
}) => {
  const [{ store: t19, nt4Provider: i27 }] = (0, import_react5.useState)(() => pe6(e11));
  return (0, import_jsx_runtime.jsx)(G10.Provider, { value: { store: t19, nt4Provider: i27 }, children: r24 });
};
var me7 = () => {
  const r24 = (0, import_react5.useContext)(G10);
  if (!r24)
    throw new Error("useStore must be used within a StoreProvider");
  return r24;
};

// node_modules/@frc-web-components/react/dist/components/BasicFmsInfo.es.js
var import_jsx_runtime2 = __toESM(require_jsx_runtime(), 1);
var T14 = Object.defineProperty;
var m23 = (s18, a22, i27, p26) => {
  for (var t19 = void 0, e11 = s18.length - 1, o13; e11 >= 0; e11--)
    (o13 = s18[e11]) && (t19 = o13(a22, i27, t19) || t19);
  return t19 && T14(a22, i27, t19), t19;
};
var v21 = 1;
var M7 = 2;
var x20 = 4;
var A13 = 8;
var F12 = 16;
var E18 = 32;
var I12 = ["Unknown", "Practice", "Qualification", "Elimination"];
var h16 = class extends x {
  constructor() {
    super(...arguments), this.matchType = 0, this.matchNumber = 0, this.eventName = "", this.fmsControlData = 0;
  }
  getRobotState() {
    return this.isEnabled() ? this.isTest() ? "Test" : this.isAuto() ? "Autonomous" : "Teleoperated" : "Disabled";
  }
  isEnabled() {
    return !!(this.fmsControlData & v21);
  }
  isAuto() {
    return !!(this.fmsControlData & M7);
  }
  isTest() {
    return !!(this.fmsControlData & x20);
  }
  isEmergencyStopped() {
    return !!(this.fmsControlData & A13);
  }
  isFmsAttached() {
    return !!(this.fmsControlData & F12);
  }
  isDsAttached() {
    return !!(this.fmsControlData & E18);
  }
  render() {
    return Ht`
      <p>
        <strong>
          <span>${this.eventName}</span>
          <span>${I12[this.matchType]}</span>
          <span>match ${this.matchNumber}</span>
        </strong>
      </p>

      <p style="margin-bottom: 7px; font-weight: normal">
        <span style="margin-right: 5px;">
          ${this.isFmsAttached() ? Ht`
                <span class="info">
                  <frc-icon icon="check" color="green"></frc-icon>
                  FMS connected
                </span>
              ` : Ht`
                <span class="info">
                  <frc-icon icon="close" color="red"></frc-icon>
                  FMS disconnected
                </span>
              `}
        </span>
        <span>
          ${this.isDsAttached() ? Ht`
                <span class="info">
                  <frc-icon icon="check" color="green"></frc-icon>
                  DriverStation connected
                </span>
              ` : Ht`
                <span class="info">
                  <frc-icon icon="close" color="red"></frc-icon>
                  DriverStation disconnected
                </span>
              `}
        </span>
      </p>
      <p style="font-weight: normal">Robot state: ${this.getRobotState()}</p>
    `;
  }
};
h16.styles = Mt`
    p {
      margin: 5px 0;
    }
    p:first-child {
      margin-top: 0;
    }
    p:last-child {
      margin: 0;
    }
    :host {
      text-align: center;
      font-size: 15px;
      display: inline-flex;
      width: auto;
      flex-direction: column;
      justify-content: center;
      font-family: sans-serif;
      color: var(--frc-basic-fms-info-text-color, #000);
    }

    .info {
      display: inline-flex;
      align-items: center;
      gap: 3px;
    }
  `;
var n19 = h16;
m23([
  Rt({ type: Number, attribute: "match-type" })
], n19.prototype, "matchType");
m23([
  Rt({ type: Number, attribute: "match-number" })
], n19.prototype, "matchNumber");
m23([
  Rt({ type: String, attribute: "event-name" })
], n19.prototype, "eventName");
m23([
  Rt({ type: Number, attribute: "fms-control-data" })
], n19.prototype, "fmsControlData");
customElements.get("frc-basic-fms-info") || customElements.define("frc-basic-fms-info", n19);
var _15 = xt({
  tagName: "frc-basic-fms-info",
  elementClass: n19,
  react: import_react6.default
});
var R14 = {
  EventName: "eventName",
  FMSControlData: "fmsControlData",
  GameSpecificMessage: "gameSpecificMessage",
  IsRedAlliance: "isRedAlliance",
  MatchNumber: "matchNumber",
  MatchType: "matchType",
  ReplayNumber: "replayNumber",
  StationNumber: "stationNumber"
};
var u20 = {
  eventName: "",
  fmsControlData: 0,
  gameSpecificMessage: "",
  isRedAlliance: false,
  matchNumber: 0,
  matchType: 0,
  relayNumber: 0,
  stationNumber: 0
};
function z15(s18) {
  const { store: a22 } = me7(), [i27, p26] = (0, import_react6.useState)({ ...u20 });
  return (0, import_react6.useEffect)(() => a22.subscribe(
    "NetworkTables",
    s18,
    () => {
      var o13;
      const t19 = { ...u20 }, e11 = a22.getSource("NetworkTables", s18);
      if (e11) {
        const f40 = e11.getChildren();
        ((o13 = e11.getChildren()[".type"]) == null ? void 0 : o13.getSourceValue()) === "FMSInfo" && Object.entries(R14).forEach(
          ([l26, b35]) => {
            l26 in f40 && (t19[b35] = f40[l26].getSourceValue());
          }
        );
      }
      p26(t19);
    },
    true
  ), []), i27;
}

// node_modules/@frc-web-components/react/dist/components/BooleanBox.es.js
var import_react7 = __toESM(require_react(), 1);
var y20 = Object.defineProperty;
var n20 = (r24, l26, a22, p26) => {
  for (var e11 = void 0, i27 = r24.length - 1, c27; i27 >= 0; i27--)
    (c27 = r24[i27]) && (e11 = c27(l26, a22, e11) || e11);
  return e11 && y20(l26, a22, e11), e11;
};
var t14;
var o8 = (t14 = class extends x {
  constructor() {
    super(...arguments), this.value = false, this.falseColor = t14.DEFAULT_FALSE_COLOR, this.trueColor = t14.DEFAULT_TRUE_COLOR, this.label = "";
  }
  updated() {
    const r24 = this.falseColor || t14.DEFAULT_FALSE_COLOR, l26 = this.trueColor || t14.DEFAULT_TRUE_COLOR, a22 = this.renderRoot.querySelector(
      "[part=box]"
    ), p26 = this.value ? l26 : r24;
    a22.style.setProperty("--box-color", p26);
  }
  render() {
    return Ht` <div part="box">${this.label || Ht`&nbsp;`}</div> `;
  }
}, t14.DEFAULT_FALSE_COLOR = "#ff0000", t14.DEFAULT_TRUE_COLOR = "#00ff00", t14.styles = Mt`
    :host {
      display: inline-block;
      width: 80px;
      height: 80px;
      padding: 5px;
      box-sizing: border-box;
    }

    [part='box'] {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-content: center;
      flex-wrap: wrap;
      background-color: var(--box-color);
      text-align: center;
    }
  `, t14);
n20([
  Rt({ type: Boolean })
], o8.prototype, "value");
n20([
  Rt({ type: String, attribute: "false-color" })
], o8.prototype, "falseColor");
n20([
  Rt({ type: String, attribute: "true-color" })
], o8.prototype, "trueColor");
n20([
  Rt({ type: String })
], o8.prototype, "label");
var d18 = o8;
customElements.get("frc-boolean-box") || customElements.define("frc-boolean-box", d18);
var g20 = xt({
  tagName: "frc-boolean-box",
  elementClass: d18,
  react: import_react7.default
});

// node_modules/@frc-web-components/react/dist/components/Canvas.es.js
var import_react8 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/_commonjsHelpers-DaMA6jEr-bedfce41.js
var l15 = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function t15(o13) {
  return o13 && o13.__esModule && Object.prototype.hasOwnProperty.call(o13, "default") ? o13.default : o13;
}

// node_modules/@frc-web-components/react/dist/index-BXxACewW-cecd5a05.js
function S14(i27, u35) {
  const a22 = [];
  for (let l26 = 0; l26 < i27.length / u35; l26 += 1)
    a22.push(i27.slice(u35 * l26, u35 * (l26 + 1)));
  return a22;
}
function Z9(i27) {
  const u35 = new ArrayBuffer(8), a22 = new DataView(u35);
  return i27.forEach((l26, w31) => {
    a22.setUint8(w31, l26);
  }), a22.getFloat64(0);
}
function tt10(i27) {
  return S14(i27, 8).map(Z9);
}
function it12(i27, u35 = 3) {
  const a22 = i27 instanceof Uint8Array ? tt10(i27) : i27;
  return S14(a22, u35);
}
var E19;
var N13;
function nt12() {
  if (N13)
    return E19;
  N13 = 1;
  var i27 = "Expected a function", u35 = NaN, a22 = "[object Symbol]", l26 = /^\s+|\s+$/g, w31 = /^[-+]0x[0-9a-f]+$/i, U20 = /^0b[01]+$/i, B22 = /^0o[0-7]+$/i, I18 = parseInt, V16 = typeof l15 == "object" && l15 && l15.Object === Object && l15, k29 = typeof self == "object" && self && self.Object === Object && self, q14 = V16 || k29 || Function("return this")(), z21 = Object.prototype, C21 = z21.toString, G16 = Math.max, H16 = Math.min, x36 = function() {
    return q14.Date.now();
  };
  function J12(t19, e11, r24) {
    var f40, c27, d34, p26, o13, v31, y34 = 0, A18 = false, m34 = false, O20 = true;
    if (typeof t19 != "function")
      throw new TypeError(i27);
    e11 = W11(e11) || 0, b35(r24) && (A18 = !!r24.leading, m34 = "maxWait" in r24, d34 = m34 ? G16(W11(r24.maxWait) || 0, e11) : d34, O20 = "trailing" in r24 ? !!r24.trailing : O20);
    function T21(n33) {
      var s18 = f40, g32 = c27;
      return f40 = c27 = void 0, y34 = n33, p26 = t19.apply(g32, s18), p26;
    }
    function Q12(n33) {
      return y34 = n33, o13 = setTimeout(h26, e11), A18 ? T21(n33) : p26;
    }
    function R22(n33) {
      var s18 = n33 - v31, g32 = n33 - y34, M13 = e11 - s18;
      return m34 ? H16(M13, d34 - g32) : M13;
    }
    function D18(n33) {
      var s18 = n33 - v31, g32 = n33 - y34;
      return v31 === void 0 || s18 >= e11 || s18 < 0 || m34 && g32 >= d34;
    }
    function h26() {
      var n33 = x36();
      if (D18(n33))
        return F19(n33);
      o13 = setTimeout(h26, R22(n33));
    }
    function F19(n33) {
      return o13 = void 0, O20 && f40 ? T21(n33) : (f40 = c27 = void 0, p26);
    }
    function X14() {
      o13 !== void 0 && clearTimeout(o13), y34 = 0, f40 = v31 = c27 = o13 = void 0;
    }
    function Y13() {
      return o13 === void 0 ? p26 : F19(x36());
    }
    function $25() {
      var n33 = x36(), s18 = D18(n33);
      if (f40 = arguments, c27 = this, v31 = n33, s18) {
        if (o13 === void 0)
          return Q12(v31);
        if (m34)
          return o13 = setTimeout(h26, e11), T21(v31);
      }
      return o13 === void 0 && (o13 = setTimeout(h26, e11)), p26;
    }
    return $25.cancel = X14, $25.flush = Y13, $25;
  }
  function K16(t19, e11, r24) {
    var f40 = true, c27 = true;
    if (typeof t19 != "function")
      throw new TypeError(i27);
    return b35(r24) && (f40 = "leading" in r24 ? !!r24.leading : f40, c27 = "trailing" in r24 ? !!r24.trailing : c27), J12(t19, e11, {
      leading: f40,
      maxWait: e11,
      trailing: c27
    });
  }
  function b35(t19) {
    var e11 = typeof t19;
    return !!t19 && (e11 == "object" || e11 == "function");
  }
  function L12(t19) {
    return !!t19 && typeof t19 == "object";
  }
  function P20(t19) {
    return typeof t19 == "symbol" || L12(t19) && C21.call(t19) == a22;
  }
  function W11(t19) {
    if (typeof t19 == "number")
      return t19;
    if (P20(t19))
      return u35;
    if (b35(t19)) {
      var e11 = typeof t19.valueOf == "function" ? t19.valueOf() : t19;
      t19 = b35(e11) ? e11 + "" : e11;
    }
    if (typeof t19 != "string")
      return t19 === 0 ? t19 : +t19;
    t19 = t19.replace(l26, "");
    var r24 = U20.test(t19);
    return r24 || B22.test(t19) ? I18(t19.slice(2), r24 ? 2 : 8) : w31.test(t19) ? u35 : +t19;
  }
  return E19 = K16, E19;
}
var et10 = nt12();
var ot11 = t15(et10);

// node_modules/@frc-web-components/react/dist/directive-B76A7YXI-abc0af54.js
var T15 = { ATTRIBUTE: 1, CHILD: 2, PROPERTY: 3, BOOLEAN_ATTRIBUTE: 4, EVENT: 5, ELEMENT: 6 };
var _16 = (r24) => (...t19) => ({ _$litDirective$: r24, values: t19 });
var i15 = class {
  constructor(t19) {
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  _$AT(t19, e11, s18) {
    this._$Ct = t19, this._$AM = e11, this._$Ci = s18;
  }
  _$AS(t19, e11) {
    return this.update(t19, e11);
  }
  update(t19, e11) {
    return this.render(...e11);
  }
};

// node_modules/@frc-web-components/react/dist/directive-helpers-CDfQTKPA-206aa42d.js
var s12 = (t19) => t19.strings === void 0;
var r18 = {};
var n21 = (t19, o13 = r18) => t19._$AH = o13;

// node_modules/@frc-web-components/react/dist/components/Canvas.es.js
var Y10;
function at8(s18) {
  return (t19, r24) => i(t19, r24, { get() {
    return (this.renderRoot ?? Y10 ?? (Y10 = document.createDocumentFragment())).querySelectorAll(s18);
  } });
}
var nt13 = Object.defineProperty;
var A14 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o13 = s18.length - 1, n33; o13 >= 0; o13--)
    (n33 = s18[o13]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && nt13(t19, r24, e11), e11;
};
var C16 = class extends x {
  constructor() {
    super(...arguments), this.points = [], this.opacity = 1, this.color = null, this.lineWidth = 2, this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["left", "top"], this.zIndex = 0, this._points = [];
  }
  updated(t19) {
    t19.has("points") && (this._points = it12(this.points, 2));
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), t19.lineWidth = this.lineWidth ?? 2, t19.strokeStyle = this.color ?? "gray";
    const [r24, a22, e11] = this.transform ?? [
      0,
      0,
      0
    ];
    t19.translate(r24, a22);
    const [o13, n33] = this.transformOrigin ?? [0, 0], l26 = o13, h26 = n33;
    if (t19.translate(l26, h26), t19.rotate(-(e11 * Math.PI) / 180), t19.translate(-l26, -h26), this._points.length > 1) {
      for (let c27 = 0; c27 < this._points.length - 1; c27 += 1) {
        const [v31, d34] = this._points[c27], [p26, P20] = this._points[c27 + 1];
        t19.moveTo(v31, d34), t19.lineTo(p26, P20);
      }
      t19.stroke();
    }
  }
};
A14([
  Rt({ type: Array })
], C16.prototype, "points");
A14([
  Rt({ type: Number })
], C16.prototype, "opacity");
A14([
  Rt({ type: String })
], C16.prototype, "color");
A14([
  Rt({ type: Number, attribute: "line-width" })
], C16.prototype, "lineWidth");
A14([
  Rt({ type: Array })
], C16.prototype, "transform");
A14([
  Rt({ type: Array, attribute: "transform-origin" })
], C16.prototype, "transformOrigin");
A14([
  Rt({ type: Array, attribute: "draw-origin" })
], C16.prototype, "drawOrigin");
A14([
  Rt({ type: Array, attribute: "z-index" })
], C16.prototype, "zIndex");
A14([
  n()
], C16.prototype, "_points");
customElements.get("frc-canvas-line") || customElements.define("frc-canvas-line", C16);
var ht11 = Object.defineProperty;
var w19 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o13 = s18.length - 1, n33; o13 >= 0; o13--)
    (n33 = s18[o13]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && ht11(t19, r24, e11), e11;
};
var m24 = class extends x {
  constructor() {
    super(...arguments), this.origin = [0, 0], this.width = 10, this.height = 10, this.radii = 0, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor, t19.lineWidth = this.strokeWidth);
    let [r24, a22] = this.origin;
    const [e11, o13] = this.drawOrigin ?? ["center", "center"];
    e11 === "center" ? r24 -= this.width / 2 : e11 === "right" && (r24 -= this.width), o13 === "center" ? a22 -= this.height / 2 : o13 === "bottom" && (a22 -= this.height);
    const [n33, l26, h26] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += n33, a22 += l26, t19.translate(r24, a22);
    const [c27, v31] = this.transformOrigin ?? [0, 0], d34 = c27 + this.width / 2, p26 = v31 + this.height / 2;
    t19.translate(d34, p26), t19.rotate(-(h26 * Math.PI) / 180), t19.translate(-d34, -p26), t19.roundRect(0, 0, this.width, this.height, this.radii), this.fillColor && t19.fill(), this.strokeColor && t19.stroke();
  }
};
w19([
  Rt({ type: Array })
], m24.prototype, "origin");
w19([
  Rt({ type: Number })
], m24.prototype, "width");
w19([
  Rt({ type: Number })
], m24.prototype, "height");
w19([
  Rt({ type: Number })
], m24.prototype, "radii");
w19([
  Rt({ type: Number })
], m24.prototype, "opacity");
w19([
  Rt({ type: String, attribute: "stroke-color" })
], m24.prototype, "strokeColor");
w19([
  Rt({ type: Number, attribute: "stroke-width" })
], m24.prototype, "strokeWidth");
w19([
  Rt({ type: String, attribute: "fill-color" })
], m24.prototype, "fillColor");
w19([
  Rt({ type: Array })
], m24.prototype, "transform");
w19([
  Rt({ type: Array, attribute: "transform-origin" })
], m24.prototype, "transformOrigin");
w19([
  Rt({ type: Array, attribute: "draw-origin" })
], m24.prototype, "drawOrigin");
w19([
  Rt({ type: Array, attribute: "z-index" })
], m24.prototype, "zIndex");
customElements.get("frc-canvas-rect") || customElements.define("frc-canvas-rect", m24);
var ct9 = Object.defineProperty;
var b24 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o13 = s18.length - 1, n33; o13 >= 0; o13--)
    (n33 = s18[o13]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && ct9(t19, r24, e11), e11;
};
var y21 = class extends x {
  constructor() {
    super(...arguments), this.origin = [0, 0], this.radius = 10, this.startAngle = 0, this.endAngle = 360, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor, t19.lineWidth = this.strokeWidth);
    let [r24, a22] = this.origin;
    const [e11, o13] = this.drawOrigin ?? ["center", "center"];
    e11 === "left" ? r24 += this.radius : e11 === "right" && (r24 -= this.radius), o13 === "top" ? a22 += this.radius : o13 === "bottom" && (a22 -= this.radius);
    const [n33, l26, h26] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += n33, a22 += l26, t19.translate(r24, a22);
    const [c27, v31] = this.transformOrigin ?? [0, 0], d34 = c27, p26 = v31;
    t19.translate(d34, p26), t19.rotate(-(h26 * Math.PI) / 180), t19.translate(-d34, -p26), t19.beginPath(), t19.arc(
      0,
      0,
      this.radius,
      -(this.startAngle ?? 0) * Math.PI / 180,
      -(this.endAngle ?? 360) * Math.PI / 180,
      true
    ), this.fillColor && t19.fill(), this.strokeColor && t19.stroke();
  }
};
b24([
  Rt({ type: Array })
], y21.prototype, "origin");
b24([
  Rt({ type: Number })
], y21.prototype, "radius");
b24([
  Rt({ type: Number, attribute: "start-angle" })
], y21.prototype, "startAngle");
b24([
  Rt({ type: Number, attribute: "end-angle" })
], y21.prototype, "endAngle");
b24([
  Rt({ type: Number })
], y21.prototype, "opacity");
b24([
  Rt({ type: String, attribute: "stroke-color" })
], y21.prototype, "strokeColor");
b24([
  Rt({ type: Number, attribute: "stroke-width" })
], y21.prototype, "strokeWidth");
b24([
  Rt({ type: String, attribute: "fill-color" })
], y21.prototype, "fillColor");
b24([
  Rt({ type: Array })
], y21.prototype, "transform");
b24([
  Rt({ type: Array, attribute: "transform-origin" })
], y21.prototype, "transformOrigin");
b24([
  Rt({ type: Array, attribute: "draw-origin" })
], y21.prototype, "drawOrigin");
b24([
  Rt({ type: Array, attribute: "z-index" })
], y21.prototype, "zIndex");
customElements.get("frc-canvas-circle") || customElements.define("frc-canvas-circle", y21);
var lt10 = Object.defineProperty;
var x21 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o13 = s18.length - 1, n33; o13 >= 0; o13--)
    (n33 = s18[o13]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && lt10(t19, r24, e11), e11;
};
var u21 = class extends x {
  constructor() {
    super(...arguments), this.origin = [0, 0], this.sides = 5, this.radius = 10, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor, t19.lineWidth = this.strokeWidth);
    let [r24, a22] = this.origin;
    const [e11, o13] = this.drawOrigin ?? ["center", "center"];
    e11 === "left" ? r24 += this.radius : e11 === "right" && (r24 -= this.radius), o13 === "top" ? a22 += this.radius : o13 === "bottom" && (a22 -= this.radius);
    const [n33, l26, h26] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += n33, a22 += l26, t19.translate(r24, a22);
    const [c27, v31] = this.transformOrigin ?? [0, 0], d34 = c27, p26 = v31;
    if (t19.translate(d34, p26), t19.rotate(-(h26 * Math.PI) / 180), t19.translate(-d34, -p26), this.sides < 3)
      return;
    const P20 = Math.PI * 2 / this.sides;
    t19.beginPath();
    for (let T21 = 0; T21 < this.sides; T21 += 1) {
      const _21 = T21 * P20, W11 = this.radius * Math.cos(_21), q14 = this.radius * Math.sin(_21);
      T21 === 0 ? t19.moveTo(W11, q14) : t19.lineTo(W11, q14);
    }
    t19.closePath(), this.fillColor && t19.fill(), this.strokeColor && t19.stroke();
  }
};
x21([
  Rt({ type: Array })
], u21.prototype, "origin");
x21([
  Rt({ type: Number })
], u21.prototype, "sides");
x21([
  Rt({ type: Number })
], u21.prototype, "radius");
x21([
  Rt({ type: Number })
], u21.prototype, "opacity");
x21([
  Rt({ type: String, attribute: "stroke-color" })
], u21.prototype, "strokeColor");
x21([
  Rt({ type: Number, attribute: "stroke-width" })
], u21.prototype, "strokeWidth");
x21([
  Rt({ type: String, attribute: "fill-color" })
], u21.prototype, "fillColor");
x21([
  Rt({ type: Array })
], u21.prototype, "transform");
x21([
  Rt({ type: Array, attribute: "transform-origin" })
], u21.prototype, "transformOrigin");
x21([
  Rt({ type: Array, attribute: "draw-origin" })
], u21.prototype, "drawOrigin");
x21([
  Rt({ type: Array, attribute: "z-index" })
], u21.prototype, "zIndex");
customElements.get("frc-canvas-ngon") || customElements.define("frc-canvas-ngon", u21);
var dt11 = Object.defineProperty;
var F13 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o13 = s18.length - 1, n33; o13 >= 0; o13--)
    (n33 = s18[o13]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && dt11(t19, r24, e11), e11;
};
var $15 = class extends x {
  constructor() {
    super(...arguments), this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.zIndex = 0;
  }
  draw(t19) {
    const { ctx: r24 } = t19, [a22, e11, o13] = this.transform ?? [
      0,
      0,
      0
    ];
    r24.translate(a22, e11);
    const [n33, l26] = this.transformOrigin ?? [0, 0], h26 = n33, c27 = l26;
    r24.translate(h26, c27), r24.rotate(-(o13 * Math.PI) / 180), r24.translate(-h26, -c27), [...this.children].forEach((v31) => {
      var d34;
      r24.save(), r24.beginPath();
      const p26 = v31;
      (d34 = p26.draw) == null || d34.call(p26, t19), r24.restore();
    });
  }
};
F13([
  Rt({ type: Array })
], $15.prototype, "transform");
F13([
  Rt({ type: Array, attribute: "transform-origin" })
], $15.prototype, "transformOrigin");
F13([
  Rt({ type: Array, attribute: "z-index" })
], $15.prototype, "zIndex");
customElements.get("frc-canvas-group") || customElements.define("frc-canvas-group", $15);
var pt9 = Object.defineProperty;
var f24 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o13 = s18.length - 1, n33; o13 >= 0; o13--)
    (n33 = s18[o13]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && pt9(t19, r24, e11), e11;
};
var g21 = class extends x {
  constructor() {
    super(...arguments), this.text = "", this.origin = [0, 0], this.maxWidth = null, this.fontName = "sans-serif", this.fontSize = 12, this.opacity = 1, this.strokeColor = null, this.strokeWidth = 2, this.fillColor = "gray", this.transform = [0, 0, 0], this.transformOrigin = [0, 0], this.drawOrigin = ["center", "center"], this.zIndex = 0;
  }
  draw({ ctx: t19 }) {
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity ?? 1)), this.fillColor && (t19.fillStyle = this.fillColor), this.strokeColor && (t19.strokeStyle = this.strokeColor), t19.textAlign = "center", t19.textBaseline = "middle", t19.font = `${this.fontSize ?? 12}px ${this.fontName || "sans-serif"}`;
    let [r24, a22] = this.origin ?? [0, 0];
    const { width: e11, actualBoundingBoxAscent: o13, actualBoundingBoxDescent: n33 } = t19.measureText(this.text ?? ""), l26 = o13 + n33, [h26, c27] = this.drawOrigin ?? ["center", "center"];
    h26 === "left" ? r24 += e11 / 2 : h26 === "right" && (r24 -= e11 / 2), c27 === "top" ? a22 += l26 / 2 : c27 === "bottom" && (a22 -= l26 / 2);
    const [v31, d34, p26] = this.transform ?? [
      0,
      0,
      0
    ];
    r24 += v31, a22 += d34, t19.translate(r24, a22);
    const [P20, T21] = this.transformOrigin ?? [0, 0], _21 = P20, W11 = T21;
    t19.translate(_21, W11), t19.rotate(-(p26 * Math.PI) / 180), t19.translate(-_21, -W11), this.fillColor && t19.fillText(this.text ?? "", 0, 0), this.strokeColor && (t19.lineWidth = this.strokeWidth ?? 2, t19.strokeText(this.text ?? "", 0, 0));
  }
};
f24([
  Rt({ type: String })
], g21.prototype, "text");
f24([
  Rt({ type: Array })
], g21.prototype, "origin");
f24([
  Rt({ type: Number, attribute: "max-width" })
], g21.prototype, "maxWidth");
f24([
  Rt({ type: String, attribute: "font-name" })
], g21.prototype, "fontName");
f24([
  Rt({ type: Number, attribute: "font-size" })
], g21.prototype, "fontSize");
f24([
  Rt({ type: Number })
], g21.prototype, "opacity");
f24([
  Rt({ type: String, attribute: "stroke-color" })
], g21.prototype, "strokeColor");
f24([
  Rt({ type: Number, attribute: "stroke-width" })
], g21.prototype, "strokeWidth");
f24([
  Rt({ type: String, attribute: "fill-color" })
], g21.prototype, "fillColor");
f24([
  Rt({ type: Array })
], g21.prototype, "transform");
f24([
  Rt({ type: Array, attribute: "transform-origin" })
], g21.prototype, "transformOrigin");
f24([
  Rt({ type: Array, attribute: "draw-origin" })
], g21.prototype, "drawOrigin");
f24([
  Rt({ type: Array, attribute: "z-index" })
], g21.prototype, "zIndex");
customElements.get("frc-canvas-text") || customElements.define("frc-canvas-text", g21);
var gt10 = _16(class extends i15 {
  constructor() {
    super(...arguments), this.key = p;
  }
  render(s18, t19) {
    return this.key = s18, t19;
  }
  update(s18, [t19, r24]) {
    return t19 !== this.key && (n21(s18), this.key = t19), r24;
  }
});
var D13 = (s18) => s18 ?? p;
var mt10 = Object.defineProperty;
var z16 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o13 = s18.length - 1, n33; o13 >= 0; o13--)
    (n33 = s18[o13]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && mt10(t19, r24, e11), e11;
};
var K12 = class extends x {
  constructor() {
    super(...arguments), this.src = "", this.width = null, this.height = null, this.origin = [0, 0], this.disabled = false, this.hideCrosshair = false, this.crosshairColor = "white", this.image = new Image(), this.connected = false, this.throttleUpdateImage = ot11(() => this.updateImage(), 5e3), this.onImageLoadBound = this.onImageLoad.bind(this), this.onImageErrorBound = this.onImageError.bind(this);
  }
  getImageSize(t19) {
    const r24 = {
      width: this.width || t19.width,
      height: this.height || t19.height
    };
    return this.image.height / this.image.width * r24.width > r24.height ? {
      height: r24.height,
      width: this.image.width / this.image.height * r24.height
    } : {
      height: this.image.height / this.image.width * r24.width,
      width: r24.width
    };
  }
  draw({ ctx: t19, canvas: r24 }) {
    const { width: a22, height: e11 } = this.getImageSize(r24), o13 = {
      width: this.width || r24.width,
      height: this.height || r24.height
    }, [n33, l26] = this.origin ?? [0, 0];
    if (t19.translate(n33, l26), !!this.connected)
      try {
        const h26 = (o13.width - a22) / 2, c27 = (o13.height - e11) / 2;
        t19.drawImage(this.image, h26, c27, a22, e11), this.hideCrosshair || (t19.strokeStyle = this.crosshairColor || "white", t19.lineWidth = 1, t19.beginPath(), t19.setLineDash([7, 7]), t19.moveTo(h26, c27 + e11 / 2), t19.lineTo(h26 + a22, c27 + e11 / 2), t19.stroke(), t19.beginPath(), t19.setLineDash([5, 5]), t19.moveTo(h26 + a22 / 2, c27), t19.lineTo(h26 + a22 / 2, c27 + e11), t19.stroke());
      } catch {
        this.throttleUpdateImage();
      }
  }
  disconnectedCallback() {
    super.disconnectedCallback(), clearTimeout(this.loadedTimeout), this.image.src = "";
  }
  connectedCallback() {
    super.connectedCallback(), this.throttleUpdateImage();
  }
  isImageLoaded() {
    return this.image.complete && this.image.naturalHeight !== 0;
  }
  updateImage() {
    if (clearTimeout(this.loadedTimeout), !this.disabled) {
      if (!this.isConnected) {
        this.setConnected(false);
        return;
      }
      this.isImageLoaded() || (this.loadedTimeout = setTimeout(() => {
        this.throttleUpdateImage();
      }, 5e3), this.image.removeEventListener("load", this.onImageLoadBound), this.image.removeEventListener("error", this.onImageErrorBound), this.image.src = "", this.image = new Image(), this.setConnected(false), this.image.src = this.src ?? "", this.image.addEventListener("load", this.onImageLoadBound), this.image.addEventListener("error", this.onImageErrorBound));
    }
  }
  setConnected(t19) {
    this.connected && !t19 ? (this.connected = false, this.dispatchDisconnect()) : !this.connected && t19 && (this.connected = true, this.dispatchConnect());
  }
  onImageLoad() {
    this.setConnected(true), clearTimeout(this.loadedTimeout);
  }
  onImageError() {
    this.throttleUpdateImage();
  }
  dispatchConnect() {
    this.dispatchEvent(
      new CustomEvent("connect", {
        bubbles: true,
        composed: true
      })
    );
  }
  dispatchDisconnect() {
    this.dispatchEvent(
      new CustomEvent("disconnect", {
        bubbles: true,
        composed: true
      })
    );
  }
  updated(t19) {
    t19.has("src") && this.throttleUpdateImage(), t19.has("disabled") && (this.disabled ? (clearTimeout(this.loadedTimeout), this.image.src = "") : this.throttleUpdateImage());
  }
};
K12.styles = Mt`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    canvas {
      width: 100%;
      height: 100%;
    }
  `;
var N14 = K12;
z16([
  Rt({ type: String })
], N14.prototype, "src");
z16([
  Rt({ type: Number })
], N14.prototype, "width");
z16([
  Rt({ type: Number })
], N14.prototype, "height");
z16([
  Rt({ type: Array })
], N14.prototype, "origin");
z16([
  Rt({ type: Boolean })
], N14.prototype, "disabled");
z16([
  Rt({ type: Boolean, attribute: "hide-crosshair" })
], N14.prototype, "hideCrosshair");
z16([
  Rt({ type: String, attribute: "crosshair-color" })
], N14.prototype, "crosshairColor");
customElements.get("frc-canvas-mjpg-stream-instance") || customElements.define(
  "frc-canvas-mjpg-stream-instance",
  N14
);
var yt11 = Object.defineProperty;
var S15 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o13 = s18.length - 1, n33; o13 >= 0; o13--)
    (n33 = s18[o13]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && yt11(t19, r24, e11), e11;
};
var U16;
var I13 = (U16 = class extends x {
  constructor() {
    super(...arguments), this.srcs = [], this.width = null, this.height = null, this.origin = [0, 0], this.waitImage = U16.DEFAULT_WAIT_IMAGE, this.hideCrosshair = false, this.crosshairColor = "white", this.waitImageElement = new Image();
  }
  getImageSize(s18) {
    const t19 = {
      width: this.width || s18.width,
      height: this.height || s18.height
    };
    return this.waitImageElement.height / this.waitImageElement.width * t19.width > t19.height ? {
      height: t19.height,
      width: this.waitImageElement.width / this.waitImageElement.height * t19.height
    } : {
      height: this.waitImageElement.height / this.waitImageElement.width * t19.width,
      width: t19.width
    };
  }
  draw(s18) {
    const { canvas: t19, ctx: r24 } = s18, a22 = [...this.streamInstances].find(
      (e11) => e11.src === this._connectedSrc
    );
    if (a22)
      a22.draw(s18);
    else {
      const { width: e11, height: o13 } = this.getImageSize(t19), n33 = {
        width: this.width || t19.width,
        height: this.height || t19.height
      }, [l26, h26] = this.origin ?? [0, 0];
      r24.translate(l26, h26);
      try {
        r24.drawImage(
          this.waitImageElement,
          (n33.width - e11) / 2,
          (n33.height - o13) / 2,
          e11,
          o13
        );
      } catch {
      }
    }
  }
  updated(s18) {
    s18.has("srcs") && this._connectedSrc && !this.srcs.includes(this._connectedSrc) && (this._connectedSrc = void 0), s18.has("waitImage") && (this.waitImageElement.src = this.waitImage);
  }
  onConnect(s18) {
    this._connectedSrc || (this._connectedSrc = s18);
  }
  onDisconnect(s18) {
    this._connectedSrc === s18 && (this._connectedSrc = void 0);
  }
  renderStreamInstance(s18) {
    return Ht`
      ${gt10(
      s18,
      Ht`
          <frc-canvas-mjpg-stream-instance
            @connect=${() => this.onConnect(s18)}
            @disconnect=${() => this.onDisconnect(s18)}
            src=${s18}
            width=${D13(this.width !== null ? this.width : void 0)}
            height=${D13(this.height !== null ? this.height : void 0)}
            .origin=${D13(this.origin !== null ? this.origin : void 0)}
            ?disabled=${this._connectedSrc && this._connectedSrc !== s18}
            ?hide-crosshair=${this.hideCrosshair}
            crosshair-color=${this.crosshairColor}
          ></frc-canvas-mjpg-stream-instance>
        `
    )}
    `;
  }
  render() {
    return Ht`
      ${this.srcs.map(
      (s18) => this.renderStreamInstance(s18.replace("mjpg:", ""))
    )}
    `;
  }
}, U16.DEFAULT_WAIT_IMAGE = "./no-camera-stream.jpg", U16);
S15([
  Rt({ type: Array })
], I13.prototype, "srcs");
S15([
  Rt({ type: Number })
], I13.prototype, "width");
S15([
  Rt({ type: Number })
], I13.prototype, "height");
S15([
  Rt({ type: Array })
], I13.prototype, "origin");
S15([
  Rt({ type: String, attribute: "wait-image" })
], I13.prototype, "waitImage");
S15([
  Rt({ type: Boolean, attribute: "hide-crosshair" })
], I13.prototype, "hideCrosshair");
S15([
  Rt({ type: String, attribute: "crosshair-color" })
], I13.prototype, "crosshairColor");
S15([
  n()
], I13.prototype, "_connectedSrc");
S15([
  at8("frc-canvas-mjpg-stream-instance")
], I13.prototype, "streamInstances");
var G11 = I13;
customElements.get("frc-canvas-mjpg-stream") || customElements.define("frc-canvas-mjpg-stream", G11);
var ut9 = Object.defineProperty;
var H13 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o13 = s18.length - 1, n33; o13 >= 0; o13--)
    (n33 = s18[o13]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && ut9(t19, r24, e11), e11;
};
var Q9 = class extends x {
  constructor() {
    super(...arguments), this.width = null, this.backgroundColor = "black";
  }
  getCanvasCtx() {
    return this.canvas.getContext("2d");
  }
  drawChildren() {
    const t19 = {
      canvas: this.canvas,
      ctx: this.getCanvasCtx(),
      domRect: this.getBoundingClientRect()
    };
    [...this.children].forEach((r24) => {
      var a22;
      const e11 = this.getCanvasCtx();
      e11.save(), e11.beginPath();
      const o13 = r24;
      (a22 = o13.draw) == null || a22.call(o13, t19), e11.restore();
    });
  }
  drawBackground() {
    const t19 = this.getCanvasCtx();
    t19.save(), t19.fillStyle = this.backgroundColor, t19.fillRect(0, 0, this.canvas.width, this.canvas.height), t19.restore();
  }
  drawCanvas() {
    this.drawBackground(), this.drawChildren(), window.requestAnimationFrame(() => {
      this.drawCanvas();
    });
  }
  firstUpdated() {
    this.drawCanvas(), new ResizeObserver(() => this.resized()).observe(this), this.resized();
  }
  resized() {
    const t19 = this.getBoundingClientRect(), { width: r24, height: a22 } = t19;
    typeof this.width != "number" ? (this.canvas.width = r24, this.canvas.height = a22) : (this.canvas.width = this.width, this.canvas.height = this.width * a22 / r24);
  }
  render() {
    return Ht` <canvas></canvas> `;
  }
};
Q9.styles = Mt`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    canvas {
      width: 100%;
      height: 100%;
    }

    [part='box'] {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-content: center;
      flex-wrap: wrap;
      background-color: var(--box-color);
      text-align: center;
    }
  `;
var B14 = Q9;
H13([
  a("canvas")
], B14.prototype, "canvas");
H13([
  Rt({ type: Number })
], B14.prototype, "width");
H13([
  Rt({ type: String, attribute: "background-color" })
], B14.prototype, "backgroundColor");
customElements.get("frc-canvas") || customElements.define("frc-canvas", B14);
var ft11 = Object.defineProperty;
var L8 = (s18, t19, r24, a22) => {
  for (var e11 = void 0, o13 = s18.length - 1, n33; o13 >= 0; o13--)
    (n33 = s18[o13]) && (e11 = n33(t19, r24, e11) || e11);
  return e11 && ft11(t19, r24, e11), e11;
};
var V12 = class extends x {
  constructor() {
    super(...arguments), this.streams = [], this.backgroundColor = "black", this.waitImage = G11.DEFAULT_WAIT_IMAGE, this.hideCrosshair = false, this.crosshairColor = "white";
  }
  render() {
    return Ht`
      <frc-canvas background-color=${this.backgroundColor}>
        <frc-canvas-mjpg-stream
          wait-image=${this.waitImage}
          crosshair-color=${this.crosshairColor}
          ?hide-crosshair=${this.hideCrosshair}
          .srcs=${this.streams}
        ></frc-canvas-mjpg-stream>
      </frc-canvas>
    `;
  }
};
V12.styles = Mt`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
    }

    frc-canvas {
      width: 100%;
      height: 100%;
    }
  `;
var M8 = V12;
L8([
  Rt({ type: Array })
], M8.prototype, "streams");
L8([
  Rt({ type: String, attribute: "background-color" })
], M8.prototype, "backgroundColor");
L8([
  Rt({ type: String, attribute: "wait-image" })
], M8.prototype, "waitImage");
L8([
  Rt({ type: Boolean, attribute: "hide-crosshair" })
], M8.prototype, "hideCrosshair");
L8([
  Rt({ type: String, attribute: "crosshair-color" })
], M8.prototype, "crosshairColor");
customElements.get("frc-camera-wrapper") || customElements.define("frc-camera-wrapper", M8);
var Nt7 = xt({
  tagName: "frc-canvas",
  elementClass: B14,
  react: import_react8.default
});
var zt5 = xt({
  tagName: "frc-canvas-circle",
  elementClass: y21,
  react: import_react8.default
});
var Tt7 = xt({
  tagName: "frc-canvas-group",
  elementClass: $15,
  react: import_react8.default
});
var Mt8 = xt({
  tagName: "frc-canvas-line",
  elementClass: C16,
  react: import_react8.default
});
var Pt7 = xt({
  tagName: "frc-canvas-mjpg-stream",
  elementClass: G11,
  react: import_react8.default
});
var _t7 = xt({
  tagName: "frc-canvas-ngon",
  elementClass: u21,
  react: import_react8.default
});
var Wt6 = xt({
  tagName: "frc-canvas-rect",
  elementClass: m24,
  react: import_react8.default
});
var jt7 = xt({
  tagName: "frc-canvas-text",
  elementClass: g21,
  react: import_react8.default
});

// node_modules/@frc-web-components/react/dist/components/CommandBased.es.js
var import_react9 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/toggle-button.es-37c936c3.js
var h17 = Object.defineProperty;
var i16 = (o13, n33, s18, u35) => {
  for (var t19 = void 0, r24 = o13.length - 1, g32; r24 >= 0; r24--)
    (g32 = o13[r24]) && (t19 = g32(n33, s18, t19) || t19);
  return t19 && h17(n33, s18, t19), t19;
};
var d19 = class extends x {
  constructor() {
    super(...arguments), this.toggled = false, this.disabled = false, this.label = "Button";
  }
  onClick() {
    this.disabled || (this.toggled = !this.toggled, this.dispatchEvent(
      new CustomEvent("toggle", {
        detail: {
          toggled: this.toggled
        },
        bubbles: true,
        composed: true
      })
    ));
  }
  render() {
    return Ht`
      <button class="${this.toggled ? "toggled" : ""}" @click="${this.onClick}">
        ${this.label}
      </button>
    `;
  }
};
d19.styles = Mt`
    :host {
      display: inline-block;
      width: 100px;
      height: 50px;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    button {
      width: 100%;
      height: 100%;
      margin: 0;
      border: none;
      border-radius: 4px;
      font-size: inherit;
      font-family: inherit;
      letter-spacing: inherit;
      background: var(--frc-button-background-color, rgb(230, 230, 230));
      color: var(--frc-button-text-color, black);
    }

    .toggled {
      background: var(--frc-button-toggled-background-color, black);
      color: var(--frc-button-toggled-text-color, white);
      font-weight: bold;
    }
  `;
var e7 = d19;
i16([
  Rt({ type: Boolean })
], e7.prototype, "toggled");
i16([
  Rt({ type: Boolean })
], e7.prototype, "disabled");
i16([
  Rt({ type: String })
], e7.prototype, "label");
customElements.get("frc-toggle-button") || customElements.define("frc-toggle-button", e7);

// node_modules/@frc-web-components/react/dist/components/CommandBased.es.js
var y22 = (t19) => {
  throw TypeError(t19);
};
var $16 = (t19, e11, a22) => e11.has(t19) || y22("Cannot " + a22);
var w20 = (t19, e11, a22) => e11.has(t19) ? y22("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(t19) : e11.set(t19, a22);
var E21 = (t19, e11, a22) => ($16(t19, e11, "access private method"), a22);
var B15 = Object.defineProperty;
var h18 = (t19, e11, a22, S23) => {
  for (var o13 = void 0, s18 = t19.length - 1, m34; s18 >= 0; s18--)
    (m34 = t19[s18]) && (o13 = m34(e11, a22, o13) || o13);
  return o13 && B15(e11, a22, o13), o13;
};
var d20;
var v22;
var x22 = class extends x {
  constructor() {
    super(...arguments), w20(this, d20), this.name = "Command", this.running = false, this.controllable = false, this.label = "";
  }
  render() {
    return Ht`
      <frc-toggle-button
        ?disabled="${!this.controllable}"
        ?toggled="${this.running}"
        label=${this.label || this.name}
        @toggle="${E21(this, d20, v22)}"
      >
      </frc-toggle-button>
    `;
  }
};
d20 = /* @__PURE__ */ new WeakSet(), v22 = function(t19) {
  t19.stopPropagation(), this.running = !this.running, this.dispatchEvent(
    new CustomEvent("toggle", {
      detail: {
        running: this.running
      },
      bubbles: true,
      composed: true
    })
  );
}, x22.styles = Mt`
    :host {
      display: inline-block;
      width: 100px;
      height: 50px;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    frc-toggle-button {
      width: 100%;
      height: 100%;
    }
  `;
var l16 = x22;
h18([
  Rt({ type: String })
], l16.prototype, "name");
h18([
  Rt({ type: Boolean })
], l16.prototype, "running");
h18([
  Rt({ type: Boolean })
], l16.prototype, "controllable");
h18([
  Rt({ type: String })
], l16.prototype, "label");
customElements.get("frc-robot-command") || customElements.define("frc-robot-command", l16);
var N15 = Object.defineProperty;
var i17 = (t19, e11, a22, S23) => {
  for (var o13 = void 0, s18 = t19.length - 1, m34; s18 >= 0; s18--)
    (m34 = t19[s18]) && (o13 = m34(e11, a22, o13) || o13);
  return o13 && N15(e11, a22, o13), o13;
};
var p18;
var n22 = (p18 = class extends x {
  constructor() {
    super(...arguments), this.default = "", this.command = "", this.hasCommand = false, this.hasDefault = false, this.label = "", this.name = "", this.hideName = false;
  }
  static renderValue(t19, e11) {
    return e11 ? Ht`<span class="has-value">${t19}</span>` : Ht`<span class="no-value">None</span>`;
  }
  render() {
    return Ht`
      ${this.hideName ? "" : Ht` <header>${this.label || this.name}</header> `}
      <div class="subsystem">
        <p>
          Default command:
          ${p18.renderValue(this.default, this.hasDefault)}
        </p>
        <p>
          Current command:
          ${p18.renderValue(this.command, this.hasCommand)}
        </p>
      </div>
    `;
  }
}, p18.styles = Mt`
    :host {
      display: inline-block;
      font-family: sans-serif;
      font-size: 16px;
      padding: 5px;
      color: var(--frc-label-text-color, black);
    }

    .subsystem {
      display: flex;
      flex-direction: column;
      flex-wrap: wrap;
    }

    p {
      margin: 0;
      margin-right: 10px;
      margin-top: 5px;
    }

    header {
      font-weight: bold;
      margin-bottom: 2px;
      color: var(--frc-robot-subsystem-header-color, purple);
    }

    .has-value {
      color: green;
    }

    .no-value {
      color: red;
    }
  `, p18);
i17([
  Rt({ type: String })
], n22.prototype, "default");
i17([
  Rt({ type: String })
], n22.prototype, "command");
i17([
  Rt({ type: Boolean, attribute: "has-command" })
], n22.prototype, "hasCommand");
i17([
  Rt({ type: Boolean, attribute: "has-default" })
], n22.prototype, "hasDefault");
i17([
  Rt({ type: String })
], n22.prototype, "label");
i17([
  Rt({ type: String })
], n22.prototype, "name");
i17([
  Rt({ type: Boolean, attribute: "hide-name" })
], n22.prototype, "hideName");
var C17 = n22;
customElements.get("frc-robot-subsystem") || customElements.define("frc-robot-subsystem", C17);
var R15 = xt({
  tagName: "frc-robot-command",
  elementClass: l16,
  react: import_react9.default,
  events: {
    ontoggle: "toggle"
  }
});
var V13 = xt({
  tagName: "frc-robot-subsystem",
  elementClass: C17,
  react: import_react9.default
});

// node_modules/@frc-web-components/react/dist/components/Drivebases.es.js
var import_react10 = __toESM(require_react(), 1);
function I14(o13) {
  return o13 * 180 / Math.PI;
}
function et11(o13, t19, e11, i27) {
  return `<line x1="${o13}" y1="${t19}" x2="${e11}" y2="${i27}" />`;
}
function _17(o13, t19, e11) {
  return `<polygon 
            points="${o13.x},${o13.y} ${t19.x},${t19.y} ${e11.x},${e11.y}" />`;
}
function j12(o13, t19, e11, i27) {
  const r24 = i27 * Math.PI / 180;
  return {
    x: o13 + e11 * Math.cos(r24),
    y: t19 - e11 * Math.sin(r24)
  };
}
function rt10(o13, t19, e11, i27, r24) {
  const s18 = j12(o13, t19, e11, r24), n33 = j12(o13, t19, e11, i27), d34 = r24 - i27 <= 180 ? "0" : "1", a22 = r24 > i27 ? 1 : 0;
  return [
    "M",
    s18.x,
    s18.y,
    "A",
    e11,
    e11,
    0,
    d34,
    a22,
    n33.x,
    n33.y
  ].join(" ");
}
function it13(o13, t19, e11, i27, r24) {
  return `<path d="${rt10(o13, t19, e11, i27, r24)}"/>`;
}
function ot12(o13, t19, e11, i27) {
  const r24 = t19 / 2, s18 = Math.cos(o13), n33 = Math.sin(o13), d34 = Math.cos(o13 + Math.PI / 2) * r24, a22 = Math.sin(o13 + Math.PI / 2) * r24, c27 = {
    x: s18 * i27 - d34 + e11,
    y: n33 * i27 - a22
  }, h26 = {
    x: s18 * i27 + d34 + e11,
    y: n33 * i27 + a22
  }, l26 = {
    x: s18 * (t19 + i27) + e11,
    y: n33 * (t19 + i27)
  };
  return _17(c27, h26, l26);
}
function D14(o13, t19, e11, i27) {
  const r24 = Math.cos(t19) * o13, s18 = Math.sin(t19) * o13, n33 = et11(e11, 0, r24 + e11, s18), d34 = ot12(t19, i27, e11, o13);
  return n33 + d34;
}
function st11(o13, t19, e11, i27) {
  const r24 = e11 / t19, s18 = I14(r24);
  return it13(
    i27,
    0,
    t19,
    I14(o13),
    I14(o13) - s18
  );
}
function nt14(o13, t19, e11, i27, r24) {
  const s18 = t19 / 2, n33 = r24 / e11 - o13, d34 = Math.sqrt(t19 * t19 + e11 * e11), a22 = (r24 + t19 * Math.sign(r24)) / e11 - o13, c27 = Math.cos(n33), h26 = Math.sin(n33), l26 = {
    x: (e11 + s18) * c27 + i27,
    y: (e11 + s18) * h26
  }, y34 = {
    x: (e11 - s18) * c27 + i27,
    y: (e11 - s18) * h26
  }, v31 = {
    x: d34 * Math.cos(a22) + i27,
    y: d34 * Math.sin(a22)
  };
  return _17(l26, v31, y34);
}
function G12(o13, t19, e11, i27, r24) {
  if (t19 < 0)
    throw new Error(`Radius cannot be negative. Given: ${t19}`);
  return t19 === 1 / 0 ? D14(e11, o13, i27, r24) : st11(o13, t19, e11, i27) + nt14(o13, r24, t19, i27, e11);
}
function F14(o13, t19, e11, i27, r24) {
  return G12(o13, t19, t19 * e11, i27, r24);
}
var at9 = Object.defineProperty;
var W9 = (o13, t19, e11, i27) => {
  for (var r24 = void 0, s18 = o13.length - 1, n33; s18 >= 0; s18--)
    (n33 = o13[s18]) && (r24 = n33(t19, e11, r24) || r24);
  return r24 && at9(t19, e11, r24), r24;
};
function P13(o13, t19, e11) {
  return Math.min(e11, Math.max(o13, t19));
}
function dt12(o13, t19, e11, i27, r24) {
  return (o13 - t19) * (r24 - i27) / (e11 - t19) + i27;
}
function ct10(o13) {
  const t19 = o13 / 2, e11 = `
    <line 
      x1="${-t19}"
      y1="${-t19}"
      x2="${t19}"
      y2="${t19}"
    />
  `, i27 = `
    <line 
      x1="${-t19}"
      y1="${t19}"
      x2="${t19}"
      y2="${-t19}"
    />
  `;
  return `<g class="x">${e11} ${i27}</g>`;
}
var J10 = class extends x {
  constructor() {
    super(), this.leftMotorSpeed = 0, this.rightMotorSpeed = 0, new ResizeObserver(() => {
      this.resized();
    }).observe(this);
  }
  get clampedLeftMotorSpeed() {
    return P13(this.leftMotorSpeed, -1, 1);
  }
  get clampedRightMotorSpeed() {
    return P13(this.rightMotorSpeed, -1, 1);
  }
  drawMotionVector(t19, e11) {
    const i27 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), r24 = i27.width * 0.13, s18 = 20, n33 = 20, d34 = i27.width - (r24 + s18) * 2, a22 = i27.height - n33 * 2;
    if (Math.abs(t19) <= 0.05 && Math.abs(e11) <= 0.05)
      return ct10(i27.width * 0.2);
    const c27 = Math.min(d34, a22) / 2 - 8, h26 = 8;
    if (Math.abs(t19 - e11) <= 1e-3)
      return `<g class="arrow">${D14(
        Math.abs(t19 * c27),
        -Math.sign(t19) * Math.PI / 2,
        0,
        h26
      )}</g>`;
    const l26 = Math.PI, y34 = (e11 - t19) / 2, v31 = (t19 + e11) / 2, g32 = v31 / y34;
    let S23;
    if (Math.abs(g32) >= 1) {
      const x36 = -Math.sign(g32), m34 = (x36 + 1) * l26 / 2, $25 = Math.abs(g32 * c27);
      S23 = G12(
        m34,
        $25,
        x36 * v31 * c27,
        x36 * $25,
        h26
      );
    } else {
      const x36 = Math.sign(t19 - e11);
      if (g32 === 0) {
        const m34 = Math.max(t19, e11) * c27, $25 = x36 * l26, k29 = y34 < 0 ? l26 : 0;
        S23 = F14(k29, m34, $25, 0, h26);
      } else {
        const m34 = g32 < 0 ? t19 : e11, $25 = g32 < 0 ? e11 : t19, k29 = Math.abs(m34) * c27, Y13 = -g32 * k29, Z12 = dt12($25 / m34, 0, -1, 0.5, l26), tt12 = g32 < 0 ? l26 : 0;
        S23 = F14(
          tt12,
          k29,
          x36 * Z12,
          Y13,
          h26
        );
      }
    }
    return `<g class="arrow">${S23}</g>`;
  }
  drawDrivetrain() {
    const t19 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), e11 = t19.width * 0.13, i27 = Math.min(t19.width * 0.13, t19.height * 0.15), r24 = 20, s18 = 20, n33 = `
      <rect 
        width="calc(100% - ${(e11 + r24) * 2}px)" 
        height="calc(100% - ${s18 * 2}px)"
        x="${e11 + r24}" 
        y="20px" 
      />
    `, d34 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="${r24}px" 
        y="${s18}px" 
      />
    `, a22 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="calc(100% - ${e11 + r24}px)" 
        y="${s18}px" 
      />
    `, c27 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="${r24}px"
        y="calc(100% - ${i27 * 2 + s18}px)"
      />
    `, h26 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="calc(100% - ${e11 + r24}px)" 
        y="calc(100% - ${i27 * 2 + s18}px)"
      />
    `;
    return n33 + d34 + a22 + c27 + h26;
  }
  getLeftForegroundStyle() {
    return this.getForegroundStyle(this.clampedLeftMotorSpeed);
  }
  getRightForegroundStyle() {
    return this.getForegroundStyle(this.clampedRightMotorSpeed);
  }
  getForegroundStyle(t19) {
    const e11 = P13(t19, -1, 1);
    return e11 > 0 ? `
        height: ${Math.abs(e11) / 2 * 100}%;
        top: auto;
        bottom: 50%;
      ` : `
        height: ${Math.abs(e11) / 2 * 100}%;
        top: 50%;
        bottom: auto;
      `;
  }
  firstUpdated() {
    const t19 = this.drawMotionVector(0, 0);
    this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain(), this.renderRoot.querySelector("#forceVector").innerHTML = t19;
  }
  resized() {
    const t19 = this.drawMotionVector(
      this.clampedLeftMotorSpeed,
      this.clampedRightMotorSpeed
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = t19;
    const e11 = this.renderRoot.querySelector("#svg").getBoundingClientRect();
    this.renderRoot.querySelector("#forceVector").style.transform = `translate(${e11.width * 0.5}px, ${e11.height * 0.5}px)`, this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain();
  }
  updated() {
    const t19 = this.drawMotionVector(
      this.clampedLeftMotorSpeed,
      this.clampedRightMotorSpeed
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = t19;
  }
  render() {
    return Ht`
      <div class="diff-drive-container">
        <div class="speed">
          <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
          <div class="bar">
            <div
              class="foreground"
              style="${this.getLeftForegroundStyle()}"
            ></div>
          </div>
        </div>
        <svg id="svg">
          <g id="forceVector"></g>
          <g id="drivetrain" class="drivetrain"></g>
        </svg>
        <div class="speed">
          <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
          <div class="bar">
            <div
              class="foreground"
              style="${this.getRightForegroundStyle()}"
            ></div>
          </div>
        </div>
      </div>
    `;
  }
};
J10.styles = Mt`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
      padding: 0 10px;
      font-family: sans-serif;
    }

    .diff-drive-container {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
    }

    svg {
      overflow: overlay;
      flex: 1;
      height: 100%;
    }

    svg .x {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
    }

    svg .arrow line,
    svg .arrow path {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
      fill: none;
    }

    svg .arrow polygon {
      stroke: rgb(50, 50, 255);
      fill: rgb(50, 50, 255);
    }

    svg .drivetrain {
      fill: none;
      stroke: var(--frc-differential-drivebase-drivetrain-color, #000);
    }

    .bar {
      position: relative;
      height: calc(100% - 30px);
      width: 20px;
      border-radius: 3px;
      margin: 15px 0;
      background: var(--frc-bar-background, #ddd);
    }

    .speed {
      display: flex;
      height: 100%;
      flex-direction: row;
      align-items: center;
      margin-left: 30px;
    }

    frc-axis {
      width: 10px;
      height: calc(100% - 35px);
    }

    .foreground {
      position: absolute;
      top: 0;
      width: 20px;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
    }
  `;
var B16 = J10;
W9([
  Rt({ type: Number, attribute: "left-motor-speed" })
], B16.prototype, "leftMotorSpeed");
W9([
  Rt({ type: Number, attribute: "right-motor-speed" })
], B16.prototype, "rightMotorSpeed");
customElements.get("frc-differential-drivebase") || customElements.define("frc-differential-drivebase", B16);
var ht12 = Object.defineProperty;
var q11 = (o13, t19, e11, i27) => {
  for (var r24 = void 0, s18 = o13.length - 1, n33; s18 >= 0; s18--)
    (n33 = o13[s18]) && (r24 = n33(t19, e11, r24) || r24);
  return r24 && ht12(t19, e11, r24), r24;
};
function lt11(o13) {
  const t19 = o13 / 2, e11 = `
    <line 
      x1="${-t19}"
      y1="${-t19}"
      x2="${t19}"
      y2="${t19}"
    />
  `, i27 = `
    <line 
      x1="${-t19}"
      y1="${t19}"
      x2="${t19}"
      y2="${-t19}"
    />
  `;
  return `<g class="x">${e11} ${i27}</g>`;
}
function M9(o13) {
  return Math.min(1, Math.max(o13, -1));
}
function z17(o13) {
  const t19 = M9(o13);
  return t19 > 0 ? `
      height: ${Math.abs(t19) / 2 * 100}%;
      top: auto;
      bottom: 50%;
    ` : `
    height: ${Math.abs(t19) / 2 * 100}%;
    top: 50%;
    bottom: auto;
  `;
}
var K13 = class extends x {
  constructor() {
    super(), this.frontLeftMotorSpeed = 0, this.frontRightMotorSpeed = 0, this.rearLeftMotorSpeed = 0, this.rearRightMotorSpeed = 0, new ResizeObserver(() => {
      this.resized();
    }).observe(this);
  }
  drawMotionVector(t19, e11, i27, r24) {
    const s18 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), n33 = s18.width * 0.13, d34 = 20, a22 = 20, c27 = s18.width - (n33 + d34) * 2, h26 = s18.height - a22 * 2, l26 = Math.min(c27, h26) / 2 - 16, y34 = {
      x: (t19 - e11 - i27 + r24) / 4,
      y: (t19 + e11 + i27 + r24) / 4
    }, v31 = (-t19 + e11 - i27 + r24) / 4, g32 = Math.hypot(y34.x, y34.y), S23 = Math.atan2(y34.y, y34.x);
    if (Math.abs(v31) <= 0.01 && g32 <= 0.01)
      return lt11(s18.width * 0.2);
    let x36 = "", m34 = "", $25 = "";
    return Math.abs(v31) > 0.01 && (x36 = F14(
      0,
      l26,
      -v31 * Math.PI,
      0,
      8
    ), m34 = F14(
      Math.PI,
      l26,
      -v31 * Math.PI,
      0,
      8
    )), g32 > 0.01 && ($25 = D14(
      g32 * l26,
      -S23,
      0,
      8
    )), `<g class="arrow">${x36} ${m34} ${$25}</g>`;
  }
  drawDrivetrain() {
    const t19 = this.renderRoot.querySelector("#svg").getBoundingClientRect(), e11 = t19.width * 0.13, i27 = Math.min(t19.width * 0.13, t19.height * 0.15), r24 = 20, s18 = 20, n33 = `
      <rect 
        width="calc(100% - ${(e11 + r24) * 2}px)" 
        height="calc(100% - ${s18 * 2}px)"
        x="${e11 + r24}" 
        y="20px" 
      />
    `, d34 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="${r24}px" 
        y="${s18}px" 
      />
    `, a22 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="calc(100% - ${e11 + r24}px)" 
        y="${s18}px" 
      />
    `, c27 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="${r24}px"
        y="calc(100% - ${i27 * 2 + s18}px)"
      />
    `, h26 = `
      <rect 
        width="${e11}px" 
        height="${i27 * 2}" 
        x="calc(100% - ${e11 + r24}px)" 
        y="calc(100% - ${i27 * 2 + s18}px)"
      />
    `;
    return n33 + d34 + a22 + c27 + h26;
  }
  getFlForegroundStyle() {
    return z17(this.frontLeftMotorSpeed);
  }
  getFrForegroundStyle() {
    return z17(this.frontRightMotorSpeed);
  }
  getRlForegroundStyle() {
    return z17(this.rearLeftMotorSpeed);
  }
  getRrForegroundStyle() {
    return z17(this.rearRightMotorSpeed);
  }
  firstUpdated() {
    const t19 = this.drawMotionVector(0, 0, 0, 0);
    this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain(), this.renderRoot.querySelector("#forceVector").innerHTML = t19;
  }
  resized() {
    const t19 = this.drawMotionVector(
      M9(this.frontLeftMotorSpeed),
      M9(this.frontRightMotorSpeed),
      M9(this.rearLeftMotorSpeed),
      M9(this.rearRightMotorSpeed)
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = t19;
    const e11 = this.renderRoot.querySelector("#svg").getBoundingClientRect();
    this.renderRoot.querySelector("#forceVector").style.transform = `translate(${e11.width * 0.5}px, ${e11.height * 0.5}px)`, this.renderRoot.querySelector("#drivetrain").innerHTML = this.drawDrivetrain();
  }
  updated(t19) {
    super.updated(t19);
    const e11 = this.drawMotionVector(
      M9(this.frontLeftMotorSpeed),
      M9(this.frontRightMotorSpeed),
      M9(this.rearLeftMotorSpeed),
      M9(this.rearRightMotorSpeed)
    );
    this.renderRoot.querySelector("#forceVector").innerHTML = e11;
  }
  render() {
    return Ht`
      <div class="diff-drive-container">
        <div class="speed-pair">
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getFlForegroundStyle()}"
              ></div>
            </div>
          </div>
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getRlForegroundStyle()}"
              ></div>
            </div>
          </div>
        </div>
        <svg id="svg">
          <g id="forceVector"></g>
          <g id="drivetrain" class="drivetrain"></g>
        </svg>
        <div class="speed-pair">
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getFrForegroundStyle()}"
              ></div>
            </div>
          </div>
          <div class="speed">
            <frc-axis ticks="5" vertical min="1" max="-1"></frc-axis>
            <div class="bar">
              <div
                class="foreground"
                style="${this.getRrForegroundStyle()}"
              ></div>
            </div>
          </div>
        </div>
      </div>
    `;
  }
};
K13.styles = Mt`
    :host {
      display: inline-block;
      width: 400px;
      height: 300px;
      padding: 0 10px;
      font-family: sans-serif;
    }

    .diff-drive-container {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
    }

    svg {
      overflow: overlay;
      flex: 1;
      height: 100%;
    }

    svg .x {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
    }

    svg .arrow line,
    svg .arrow path {
      stroke: rgb(50, 50, 255);
      stroke-width: 2;
      fill: none;
    }

    svg .arrow polygon {
      stroke: rgb(50, 50, 255);
      fill: rgb(50, 50, 255);
    }

    svg .drivetrain {
      fill: none;
      stroke: var(--frc-mecanum-drivebase-drivetrain-color, #000);
    }

    .bar {
      position: relative;
      height: calc(100% - 30px);
      width: 20px;
      border-radius: 3px;
      margin: 15px 0;
      background: var(--frc-bar-background, #ddd);
    }

    .speed-pair {
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-around;
    }

    .speed {
      display: flex;
      height: 48%;
      flex-direction: row;
      align-items: center;
      margin-left: 30px;
    }

    frc-axis {
      width: 10px;
      height: calc(100% - 35px);
    }

    .foreground {
      position: absolute;
      top: 0;
      width: 20px;
      background: var(--frc-bar-foreground, lightblue);
      border-radius: 3px;
    }
  `;
var R16 = K13;
q11([
  Rt({ type: Number, attribute: "front-left-motor-speed" })
], R16.prototype, "frontLeftMotorSpeed");
q11([
  Rt({ type: Number, attribute: "front-right-motor-speed" })
], R16.prototype, "frontRightMotorSpeed");
q11([
  Rt({ type: Number, attribute: "rear-left-motor-speed" })
], R16.prototype, "rearLeftMotorSpeed");
q11([
  Rt({ type: Number, attribute: "rear-right-motor-speed" })
], R16.prototype, "rearRightMotorSpeed");
customElements.get("frc-mecanum-drivebase") || customElements.define("frc-mecanum-drivebase", R16);
var gt11 = Object.defineProperty;
var f25 = (o13, t19, e11, i27) => {
  for (var r24 = void 0, s18 = o13.length - 1, n33; s18 >= 0; s18--)
    (n33 = o13[s18]) && (r24 = n33(t19, e11, r24) || r24);
  return r24 && gt11(t19, e11, r24), r24;
};
function U17(o13, ...t19) {
  return t19.some((e11) => o13.has(e11));
}
function Q10(o13) {
  return o13 * Math.PI / 180;
}
function C18(o13) {
  return o13 * 180 / Math.PI;
}
function ut10(o13, t19, e11) {
  return Math.max(Math.min(o13, e11), t19);
}
function A15(o13, t19 = false) {
  const e11 = Q10(-(o13 - 90));
  return [t19 ? -Math.cos(e11) : Math.cos(e11), Math.sin(e11)];
}
var w21 = 35;
var X11 = class extends x {
  constructor() {
    super(...arguments), this.moduleCount = 4, this.wheelLocations = [
      2.5,
      2,
      2.5,
      -2,
      -2.5,
      2,
      -2.5,
      -2
    ], this.measuredStates = [
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0
    ], this.desiredStates = [
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      0
    ], this.robotRotation = 0, this.maxSpeed = 1, this.rotationUnit = "radians", this.sizeLeftRight = 4, this.sizeFrontBack = 5, this.normalizedRotation = 0;
  }
  drawBase() {
    const [t19, e11] = this.getBaseSize();
    $i(this._base).attr("width", t19).attr("height", e11).attr("stroke-width", 5).attr("fill", "none");
  }
  setSwerveRotation() {
    $i(this._swerve).attr(
      "transform",
      `rotate(${-this.normalizedRotation})`
    );
  }
  setSwerveOrigin() {
    const [t19, e11] = this.getBaseSize();
    $i(this._swerve).attr(
      "transform-origin",
      `${t19 / 2} ${e11 / 2}`
    );
  }
  getRobotRotationRad() {
    const t19 = this.robotRotation;
    return this.rotationUnit === "radians" ? t19 : Q10(t19);
  }
  getSvgSize() {
    const { width: t19 } = this.getBoundingClientRect();
    return [t19, t19 * this.sizeFrontBack / this.sizeLeftRight];
  }
  getBaseSize() {
    const [t19] = this.getSvgSize();
    return [t19, t19 * this.sizeFrontBack / this.sizeLeftRight];
  }
  updated(t19) {
    if (t19.has("robotRotation")) {
      const e11 = this.robotRotation ?? 0, i27 = (t19.get("robotRotation") ?? e11) - e11, r24 = this.rotationUnit === "degrees" ? i27 : C18(i27), s18 = [
        r24 - 720,
        r24 - 360,
        r24,
        r24 + 360,
        r24 + 720
      ];
      let n33 = 0, d34 = Math.abs(s18[0]);
      for (let a22 = 1; a22 < s18.length; a22 += 1) {
        const c27 = Math.abs(s18[a22]);
        c27 < d34 && (n33 = a22, d34 = c27);
      }
      this.normalizedRotation -= s18[n33];
    }
    U17(
      t19,
      "sizeLeftRight",
      "sizeFrontBack",
      "robotRotation",
      "rotationUnit"
    ) && this.drawBase(), U17(t19, "robotRotation", "rotationUnit") && this.setSwerveRotation(), U17(t19, "sizeLeftRight", "sizeFrontBack") && this.setSwerveOrigin();
  }
  resized() {
    const [t19, e11] = this.getSvgSize();
    $i(this._svg).attr("width", t19).attr("height", e11), this.drawBase(), this.setSwerveOrigin(), this.requestUpdate();
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.resized();
    }).observe(this), this.resized();
  }
  getSwerveModules() {
    const t19 = [];
    for (let e11 = 0; e11 < this.moduleCount; e11 += 1) {
      const i27 = {
        location: [
          this.wheelLocations[e11 * 2],
          this.wheelLocations[e11 * 2 + 1]
        ],
        desiredRotation: this.desiredStates[e11 * 2],
        desiredVelocity: this.desiredStates[e11 * 2 + 1],
        measuredRotation: this.measuredStates[e11 * 2],
        measuredVelocity: this.measuredStates[e11 * 2 + 1]
      };
      t19.push(i27);
    }
    return t19;
  }
  renderModuleDirectionIndicator(t19, e11, i27) {
    const r24 = this.rotationUnit === "degrees" ? e11 : C18(e11), [s18, n33] = A15(r24 - 15, true), [d34, a22] = A15(r24 + 15, true), c27 = `M ${-s18 * 60},${n33 * 60} L 0,0 ${-d34 * 60},${a22 * 60}`;
    return Nt`
      <defs>
        <clipPath id=${t19}>
          <path d=${c27} fill="white" stroke="5" stroke="white" />
        </clipPath>
      </defs>
      <circle r=${w21 - 2.5} fill=${i27} stroke-width="0" clip-path=${`url(#${t19})`}></circle>
    `;
  }
  renderModuleVelocityIndicator(t19, e11, i27, r24) {
    const s18 = this.rotationUnit === "degrees" ? e11 : C18(e11);
    let n33 = ut10(100 * i27 / this.maxSpeed, -100, 100);
    n33 += w21 * Math.sign(n33), n33 *= -1;
    const d34 = Math.abs(n33) - 20, a22 = Math.abs(n33), c27 = `M -17.5,${d34} L 2.5,${a22} L 22.5,${d34}`, h26 = `rotate(${-s18 + (n33 < 0 ? 180 : 0)})`, l26 = `${t19}-velocity`;
    return Nt`
     <defs>
        <mask id=${l26}>
          <circle r="300" fill="white" ></circle>
          <circle r=${w21 + 2.5} fill="black" ></circle>
        </mask>
      </defs>
      <g class="velocity-indicator" transform=${h26} mask="url(#${l26})">
        <rect width="5" height=${Math.abs(n33)} fill=${r24}></rect>
        <path d=${c27} stroke=${r24} stroke-width="5" fill="none" />
      </g>
    `;
  }
  renderModules() {
    const t19 = this.getSwerveModules(), [e11, i27] = this.getBaseSize();
    return Nt`
      <g class="modules">
        ${t19.map((r24, s18) => {
      const {
        desiredRotation: n33,
        measuredRotation: d34,
        location: a22,
        measuredVelocity: c27,
        desiredVelocity: h26
      } = r24, l26 = i27 / 2 * (1 - a22[0]) + w21 * Math.sign(a22[0]), y34 = e11 / 2 * (a22[1] + 1) - w21 * Math.sign(a22[1]), v31 = `module-${s18}-measured-clip`, g32 = `module-${s18}-desired-clip`;
      return Nt`
            <g transform=${`translate(${y34}, ${l26})`}>
              <circle class="module-circle" r=${w21} stroke-width="5" fill="none"></circle>
              ${this.renderModuleDirectionIndicator(
        v31,
        d34,
        "blue"
      )}
              ${this.renderModuleDirectionIndicator(
        g32,
        n33,
        "red"
      )}
              ${this.renderModuleVelocityIndicator(
        v31,
        d34,
        c27,
        "blue"
      )}
              ${this.renderModuleVelocityIndicator(
        g32,
        n33,
        h26,
        "red"
      )}
            </g>
          `;
    })} 
      </g>
    `;
  }
  renderWheelMask() {
    const t19 = this.getSwerveModules(), [e11, i27] = this.getBaseSize();
    return Nt`
      <defs>
        <mask id="wheel-mask">
          <rect fill="white" width=${e11} height=${i27} stroke-width="5" stroke="white"></rect>
          ${t19.map((r24) => {
      const s18 = i27 / 2 - i27 * r24.location[0] / this.sizeFrontBack, n33 = e11 / 2 - e11 * r24.location[1] / this.sizeLeftRight;
      return Nt`
              <circle r="50" fill="black" transform=${`translate(${n33}, ${s18})`}></circle>
            `;
    })}
        </mask>
      </defs>
    `;
  }
  renderArrow() {
    const [t19, e11] = this.getBaseSize(), i27 = `M ${t19 / 2 - 30},100 L ${t19 / 2},70 L ${t19 / 2 + 30},100`;
    return Nt`
      <line class="arrow" x1=${t19 / 2} y1=${70} x2=${t19 / 2} y2=${e11 - 30} stroke-width="5" />
      <path class="arrow" d=${i27} stroke-width="5" fill="none" />
    `;
  }
  render() {
    return Ht`
      <div>
        ${Nt`
          <svg>
            ${this.renderWheelMask()}
            <g class="swerve">
              <rect class="base" rx=${w21}></rect>
              ${this.renderModules()}
              ${this.renderArrow()}
            </g>
          </svg>
      `}
      </div>
    `;
  }
};
X11.styles = Mt`
    :host {
      display: inline-block;
      width: 300px;
      height: auto;
      overflow: visible;
    }

    svg {
      width: 100%;
      overflow: visible;
    }

    .base {
      stroke: var(--frc-swerve-drive-color, black);
    }

    .arrow {
      stroke: var(--frc-swerve-drive-color, black);
    }

    .module-circle {
      stroke: var(--frc-swerve-drive-color, black);
    }
  `;
var p19 = X11;
f25([
  Rt({ type: Number, attribute: "module-count" })
], p19.prototype, "moduleCount");
f25([
  Rt({ type: Array, attribute: "wheel-locations" })
], p19.prototype, "wheelLocations");
f25([
  Rt({ type: Array, attribute: "measured-states" })
], p19.prototype, "measuredStates");
f25([
  Rt({ type: Array, attribute: "desired-states" })
], p19.prototype, "desiredStates");
f25([
  Rt({ type: Number, attribute: "robot-rotation" })
], p19.prototype, "robotRotation");
f25([
  Rt({ type: Number, attribute: "max-speed" })
], p19.prototype, "maxSpeed");
f25([
  Rt({ type: String, attribute: "rotation-unit" })
], p19.prototype, "rotationUnit");
f25([
  Rt({ type: Number, attribute: "size-left-right" })
], p19.prototype, "sizeLeftRight");
f25([
  Rt({ type: Number, attribute: "size-front-back" })
], p19.prototype, "sizeFrontBack");
f25([
  a("svg")
], p19.prototype, "_svg");
f25([
  a(".swerve")
], p19.prototype, "_swerve");
f25([
  a(".base")
], p19.prototype, "_base");
f25([
  a(".modules")
], p19.prototype, "_modules");
customElements.get("frc-swerve-drivebase") || customElements.define("frc-swerve-drivebase", p19);
var St7 = xt({
  tagName: "frc-differential-drivebase",
  elementClass: B16,
  react: import_react10.default
});
var Rt7 = xt({
  tagName: "frc-mecanum-drivebase",
  elementClass: R16,
  react: import_react10.default
});
var kt7 = xt({
  tagName: "frc-swerve-drivebase",
  elementClass: p19,
  react: import_react10.default
});

// node_modules/@frc-web-components/react/dist/components/Encoder.es.js
var import_react11 = __toESM(require_react(), 1);
var u23 = Object.defineProperty;
var c17 = (t19, a22, s18, g32) => {
  for (var e11 = void 0, o13 = t19.length - 1, n33; o13 >= 0; o13--)
    (n33 = t19[o13]) && (e11 = n33(a22, s18, e11) || e11);
  return e11 && u23(a22, s18, e11), e11;
};
var d21 = class extends x {
  constructor() {
    super(...arguments), this.distance = 0, this.speed = 0;
  }
  render() {
    return Ht`
      <label class="distance-label">Distance</label>
      <span>${this.distance}</span>
      <label class="speed-label">Speed</label>
      <span>${this.speed}</span>
    `;
  }
};
d21.styles = Mt`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: 50% 50%;
      column-gap: 15px;
      row-gap: 5px;
      align-items: center;
      width: 250px;
      font-family: sans-serif;
    }

    label {
      font-weight: bold;
      text-align: right;
      color: var(--frc-encoder-label-color, #000);
    }

    span {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      padding: 5px;
      border: 1px dashed;
      border-color: var(--frc-encoder-value-color, #666);
      color: var(--frc-encoder-value-color, #666);
      border-radius: 3px;
      box-sizing: border-box;
    }
  `;
var r19 = d21;
c17([
  Rt({ type: Number })
], r19.prototype, "distance");
c17([
  Rt({ type: Number })
], r19.prototype, "speed");
customElements.get("frc-encoder") || customElements.define("frc-encoder", r19);
var v23 = xt({
  tagName: "frc-encoder",
  elementClass: r19,
  react: import_react11.default
});

// node_modules/@frc-web-components/react/dist/components/Field.es.js
var import_react12 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/units-DyibxdHs-d7e14be8.js
var e8 = "m";
var i19 = {
  // metric
  km: 1e3,
  m: 1,
  cm: 0.01,
  mm: 1e-3,
  // imperial
  mi: 1609.34,
  yd: 0.9144,
  ft: 0.3048,
  in: 0.0254
};
var f26 = {
  km: "km",
  m: "m",
  meters: "m",
  cm: "cm",
  centimeters: "cm",
  mm: "mm",
  // imperial
  mi: "mi",
  miles: "mi",
  yd: "yd",
  yards: "yards",
  ft: "ft",
  feet: "ft",
  foot: "ft",
  in: "in",
  inches: "in"
};
var n23 = (c27, m34, t19) => (m34 = f26[m34], t19 = f26[t19], typeof i19[m34] > "u" && (m34 = e8), typeof i19[t19] > "u" && (t19 = e8), c27 * i19[m34] / i19[t19]);

// node_modules/@frc-web-components/react/dist/components/Field.es.js
var D15 = (n33) => {
  throw TypeError(n33);
};
var _18 = (n33, t19, e11) => t19.has(n33) || D15("Cannot " + e11);
var b25 = (n33, t19, e11) => (_18(n33, t19, "read from private field"), e11 ? e11.call(n33) : t19.get(n33));
var L9 = (n33, t19, e11) => t19.has(n33) ? D15("Cannot add the same private member more than once") : t19 instanceof WeakSet ? t19.add(n33) : t19.set(n33, e11);
var H14 = (n33, t19, e11, i27) => (_18(n33, t19, "write to private field"), i27 ? i27.call(n33, e11) : t19.set(n33, e11), e11);
var et12 = (n33, t19, e11) => (_18(n33, t19, "access private method"), e11);
var O14 = [
  // https://www.chiefdelphi.com/t/4k-field-image-2025-reefscape/478797
  {
    game: "Reefscape",
    image: "./field-images/2025-field.jpg",
    corners: {
      topLeft: [421, 91],
      bottomRight: [3352, 1437]
    },
    size: [57.57291667, 26.4167],
    unit: "foot"
  },
  // Thanks to MikLast for providing the 2024 field image here:
  // https://www.chiefdelphi.com/t/2024-crescendo-top-down-field-renders/447764
  {
    game: "Crescendo",
    image: "./field-images/2024-field.jpg",
    corners: {
      topLeft: [513, 78],
      bottomRight: [3327, 1475]
    },
    size: [54.265092, 26.31234],
    unit: "foot"
  },
  {
    game: "Charged Up",
    image: "./field-images/2023-field.jpg",
    corners: {
      topLeft: [46, 36],
      bottomRight: [1088, 544]
    },
    size: [54.27083, 26.2916],
    unit: "foot"
  },
  {
    game: "Rapid React",
    image: "./field-images/2022-field.jpg",
    corners: {
      topLeft: [74, 50],
      bottomRight: [1774, 900]
    },
    size: [54, 27],
    unit: "foot"
  },
  {
    game: "Infinite Recharge",
    image: "./field-images/2020-field.jpg",
    corners: {
      topLeft: [96, 25],
      bottomRight: [1040, 514]
    },
    size: [52.4375, 26.9375],
    unit: "foot"
  },
  {
    game: "Destination: Deep Space",
    image: "./field-images/2019-field.jpg",
    corners: {
      topLeft: [217, 40],
      bottomRight: [1372, 615]
    },
    size: [54, 27],
    unit: "foot"
  },
  {
    game: "FIRST Power Up",
    image: "./field-images/2018-field.jpg",
    corners: {
      topLeft: [125, 20],
      bottomRight: [827, 370]
    },
    size: [54, 27],
    unit: "feet"
  },
  {
    game: "Barrel Racing Path",
    image: "./field-images/2021-barrel.png",
    corners: {
      topLeft: [20, 20],
      bottomRight: [780, 400]
    },
    size: [30, 15],
    unit: "feet"
  },
  {
    game: "Bounce Path",
    image: "./field-images/2021-bounce.png",
    corners: {
      topLeft: [20, 20],
      bottomRight: [780, 400]
    },
    size: [30, 15],
    unit: "feet"
  },
  {
    game: "Galactic Search A",
    image: "./field-images/2021-galacticsearcha.png",
    corners: {
      topLeft: [20, 20],
      bottomRight: [780, 400]
    },
    size: [30, 15],
    unit: "feet"
  },
  {
    game: "Galactic Search B",
    image: "./field-images/2021-galacticsearchb.png",
    corners: {
      topLeft: [20, 20],
      bottomRight: [780, 400]
    },
    size: [30, 15],
    unit: "feet"
  },
  {
    game: "Slalom Path",
    image: "./field-images/2021-slalom.png",
    corners: {
      topLeft: [20, 20],
      bottomRight: [780, 400]
    },
    size: [30, 15],
    unit: "feet"
  }
];
var S16;
var F15;
var N17 = class {
  constructor() {
    L9(this, S16, {}), L9(this, F15, /* @__PURE__ */ new Map());
  }
  getImage(t19) {
    if (typeof b25(this, S16)[t19] > "u") {
      const e11 = new Image(), i27 = {
        src: t19,
        width: 0,
        height: 0,
        loaded: false,
        image: e11
      };
      e11.onload = () => {
        i27.loaded = true, i27.width = e11.width, i27.height = e11.height, [...b25(this, F15).values()].forEach((o13) => {
          o13(t19);
        });
      }, b25(this, S16)[t19] = i27, e11.src = t19;
    }
    return b25(this, S16)[t19];
  }
  static getBoundingBoxDims(t19, e11) {
    const i27 = Math.abs(t19.width * Math.cos(e11)) + Math.abs(t19.height * Math.sin(e11)), o13 = Math.abs(t19.width * Math.sin(e11)) + Math.abs(t19.height * Math.cos(e11));
    return {
      width: i27,
      height: o13
    };
  }
  static fitImageInsideBox(t19, e11) {
    return e11.width / t19.width * t19.height <= e11.height ? {
      width: e11.width,
      height: e11.width / t19.width * t19.height
    } : {
      width: e11.height / t19.height * t19.width,
      height: e11.height
    };
  }
  onImageLoad(t19) {
    const e11 = Symbol("image");
    return b25(this, F15).set(e11, t19), () => {
      b25(this, F15).delete(e11);
    };
  }
};
S16 = /* @__PURE__ */ new WeakMap(), F15 = /* @__PURE__ */ new WeakMap();
var it14 = Object.defineProperty;
var P14 = (n33, t19, e11, i27) => {
  for (var o13 = void 0, s18 = n33.length - 1, r24; s18 >= 0; s18--)
    (r24 = n33[s18]) && (o13 = r24(t19, e11, o13) || o13);
  return o13 && it14(t19, e11, o13), o13;
};
var w22 = class extends x {
  constructor() {
    super(...arguments), this.unit = "inherit", this.rotationUnit = "inherit", this.image = "", this.color = "#0000ff", this.opacity = 1, this.pose = [0, 0, 0], this.width = 0.6, this.length = 0.9;
  }
  draw({
    canvas: t19,
    unit: e11,
    rotationUnit: i27,
    xToPx: o13,
    yToPx: s18,
    lengthToPx: r24,
    origin: a22
  }) {
    const p26 = this.unit === "inherit" || this.unit === null ? e11 : this.unit, y34 = this.rotationUnit === "inherit" || this.rotationUnit === null ? i27 : this.rotationUnit, [c27, m34] = this.pose, C21 = y34 === "rad" ? this.pose[2] : this.pose[2] / (180 / Math.PI);
    t19.globalAlpha = Math.max(0, Math.min(1, this.opacity)), t19.fillStyle = "#222", t19.strokeStyle = this.color, t19.lineWidth = r24(3, "in"), t19.translate(o13(c27, p26), s18(m34, p26)), t19.rotate(-C21 + (a22 === "red" ? Math.PI : 0)), t19.roundRect(
      -r24(this.length / 2, p26),
      -r24(this.width / 2, p26),
      r24(this.length, p26),
      r24(this.width, p26),
      1
    ), t19.fill(), t19.stroke(), t19.beginPath(), t19.fillStyle = "white", t19.strokeStyle = "white", t19.lineWidth = r24(2, "in"), t19.moveTo(-r24(this.length * 0.3, p26), 0), t19.lineTo(r24(this.length * 0.3, p26), 0), t19.moveTo(
      r24(this.length * 0.1, p26),
      -r24(this.width * 0.25, p26)
    ), t19.lineTo(r24(this.length * 0.3, p26), 0), t19.lineTo(
      r24(this.length * 0.1, p26),
      r24(this.width * 0.25, p26)
    ), t19.stroke();
  }
};
P14([
  Rt({ type: String })
], w22.prototype, "unit");
P14([
  Rt({ type: String, attribute: "rotation-unit" })
], w22.prototype, "rotationUnit");
P14([
  Rt({ type: String })
], w22.prototype, "image");
P14([
  Rt({ type: String })
], w22.prototype, "color");
P14([
  Rt({ type: Number })
], w22.prototype, "opacity");
P14([
  Rt({ type: Array })
], w22.prototype, "pose");
P14([
  Rt({ type: Number })
], w22.prototype, "width");
P14([
  Rt({ type: Number })
], w22.prototype, "length");
customElements.get("frc-field-robot") || customElements.define("frc-field-robot", w22);
var ot13 = Object.defineProperty;
var T16 = (n33, t19, e11, i27) => {
  for (var o13 = void 0, s18 = n33.length - 1, r24; s18 >= 0; s18--)
    (r24 = n33[s18]) && (o13 = r24(t19, e11, o13) || o13);
  return o13 && ot13(t19, e11, o13), o13;
};
var x23 = class extends x {
  constructor() {
    super(...arguments), this.poses = [], this.translations = [], this.color = "#FFA500", this.unit = "inherit", this.lineWidth = 4, this.opacity = 0.7, this._poses = [], this._translations = [];
  }
  updated(t19) {
    var e11;
    t19.has("poses") && (typeof ((e11 = this.poses) == null ? void 0 : e11[0]) == "number" || this.poses instanceof Uint8Array ? this._poses = it12(this.poses) : this._poses = this.poses), t19.has("translations") && (this._translations = it12(this.translations, 2));
  }
  draw({ canvas: t19, unit: e11, xToPx: i27, yToPx: o13 }) {
    const s18 = this.unit === "inherit" || this.unit === null ? e11 : this.unit;
    if (t19.lineWidth = this.lineWidth, t19.strokeStyle = this.color, t19.globalAlpha = this.opacity, this._poses.length > 1) {
      for (let r24 = 0; r24 < this._poses.length - 1; r24 += 1) {
        const [a22, p26] = this._poses[r24], [y34, c27] = this._poses[r24 + 1];
        t19.moveTo(i27(a22, s18), o13(p26, s18)), t19.lineTo(i27(y34, s18), o13(c27, s18));
      }
      t19.stroke();
    }
    if (this._translations.length > 1) {
      for (let r24 = 0; r24 < this._translations.length - 1; r24 += 1) {
        const [a22, p26] = this._translations[r24], [y34, c27] = this._translations[r24 + 1];
        t19.moveTo(i27(a22, s18), o13(p26, s18)), t19.lineTo(i27(y34, s18), o13(c27, s18));
      }
      t19.stroke();
    }
  }
};
T16([
  Rt({ type: Array })
], x23.prototype, "poses");
T16([
  Rt({ type: Array })
], x23.prototype, "translations");
T16([
  Rt({ type: String })
], x23.prototype, "color");
T16([
  Rt({ type: String })
], x23.prototype, "unit");
T16([
  Rt({ type: Number, attribute: "line-width" })
], x23.prototype, "lineWidth");
T16([
  Rt({ type: Number })
], x23.prototype, "opacity");
T16([
  n()
], x23.prototype, "_poses");
T16([
  n()
], x23.prototype, "_translations");
customElements.get("frc-field-path") || customElements.define("frc-field-path", x23);
var st12 = Object.defineProperty;
var f27 = (n33, t19, e11, i27) => {
  for (var o13 = void 0, s18 = n33.length - 1, r24; s18 >= 0; s18--)
    (r24 = n33[s18]) && (o13 = r24(t19, e11, o13) || o13);
  return o13 && st12(t19, e11, o13), o13;
};
function rt11(n33) {
  return n33 * Math.PI / 180;
}
var v24;
var U18;
var X12;
var V14 = class extends x {
  constructor() {
    super(...arguments), L9(this, U18), L9(this, v24), this.game = O14[0].game, this.cropTop = null, this.cropBottom = null, this.cropLeft = null, this.cropRight = null, this.cropType = "percent", this.unit = e8, this.rotationUnit = "rad", this.rotation = 0, this.showGrid = false, this.gridSize = 1, this.origin = "blue", H14(this, v24, new N17());
  }
  getConfig() {
    return O14.find(({ game: t19 }) => t19 === this.game) ?? O14[0];
  }
  getCanvasCtx() {
    return this.canvas.getContext("2d");
  }
  getCropPercent() {
    if (this.cropType === "percent") {
      const q14 = this.cropLeft ?? 0, J12 = this.cropTop ?? 0, Q12 = this.cropRight ?? 1, Z12 = this.cropBottom ?? 1;
      return { x1: q14, y1: J12, x2: Q12, y2: Z12 };
    }
    const { corners: t19, image: e11, unit: i27, size: o13 } = this.getConfig(), { loaded: s18, width: r24, height: a22 } = b25(this, v24).getImage(e11);
    if (!s18)
      return { x1: 0, y1: 0, x2: 1, y2: 1 };
    const p26 = [this.cropLeft ?? 0, this.cropTop ?? 0], y34 = [
      this.cropRight ?? n23(o13[0], i27, this.unit),
      this.cropBottom ?? n23(o13[1], i27, this.unit)
    ], c27 = t19.topLeft[0] / r24, m34 = t19.topLeft[1] / a22, C21 = t19.bottomRight[0] / r24, j19 = t19.bottomRight[1] / a22, R22 = C21 - c27, K16 = j19 - m34;
    return {
      x1: c27 + R22 * n23(p26[0], this.unit, i27) / o13[0],
      y1: m34 + K16 * n23(p26[1], this.unit, i27) / o13[1],
      x2: c27 + R22 * n23(y34[0], this.unit, i27) / o13[0],
      y2: m34 + K16 * n23(y34[1], this.unit, i27) / o13[1]
    };
  }
  getFieldRectPx() {
    const { corners: t19, image: e11 } = this.getConfig(), { loaded: i27, width: o13, height: s18 } = b25(this, v24).getImage(e11);
    if (!i27)
      return { x: 0, y: 0, width: 0, height: 0 };
    const r24 = t19.topLeft[0] / o13, a22 = t19.topLeft[1] / s18, p26 = t19.bottomRight[0] / o13, y34 = t19.bottomRight[1] / s18, c27 = this.getCropPercent(), m34 = c27.x2 - c27.x1, C21 = c27.y2 - c27.y1, j19 = this.canvas.width / m34, R22 = this.canvas.height / C21;
    return {
      x: (r24 - c27.x1) * j19,
      y: (a22 - c27.y1) * R22,
      width: (p26 - r24) * j19,
      height: (y34 - a22) * R22
    };
  }
  pxToX(t19, e11 = this.unit) {
    const i27 = this.getFieldRectPx(), { size: o13, unit: s18 } = this.getConfig();
    if (i27.width === 0)
      return 0;
    const r24 = i27.width / o13[0], a22 = t19 * (this.canvas.width / this.canvas.clientWidth), p26 = this.origin !== "red" ? (a22 - i27.x) / r24 : (i27.x + i27.width - a22) / r24;
    return n23(p26, s18, e11);
  }
  xToPx(t19, e11 = this.unit) {
    const i27 = this.getFieldRectPx(), { size: o13, unit: s18 } = this.getConfig();
    if (i27.width === 0)
      return 0;
    const r24 = i27.width / o13[0], a22 = n23(t19, e11, s18);
    return this.origin !== "red" ? i27.x + a22 * r24 : i27.x + i27.width - a22 * r24;
  }
  yToPx(t19, e11 = this.unit) {
    const i27 = this.getFieldRectPx(), { size: o13, unit: s18 } = this.getConfig();
    if (i27.height === 0)
      return 0;
    const r24 = i27.height / o13[1], a22 = n23(t19, e11, s18);
    return this.origin !== "red" ? i27.y + i27.height - a22 * r24 : i27.y + a22 * r24;
  }
  pxToY(t19, e11 = this.unit) {
    const i27 = this.getFieldRectPx(), { size: o13, unit: s18 } = this.getConfig();
    if (i27.height === 0)
      return 0;
    const r24 = i27.height / o13[1], a22 = t19 * (this.canvas.height / this.canvas.clientHeight), p26 = this.origin !== "red" ? (i27.y + i27.height - a22) / r24 : (a22 - i27.y) / r24;
    return n23(p26, s18, e11);
  }
  lengthToPx(t19, e11 = this.unit) {
    const i27 = this.getFieldRectPx(), { size: o13, unit: s18 } = this.getConfig();
    if (i27.width === 0)
      return 0;
    const r24 = i27.width / o13[0];
    return n23(t19, e11, s18) * r24;
  }
  setContainerSize() {
    const t19 = { width: this.clientWidth, height: this.clientHeight }, e11 = this.getConfig().image, i27 = b25(this, v24).getImage(e11), { loaded: o13 } = i27;
    if (!o13)
      return;
    const s18 = this.getCropPercent(), r24 = {
      width: (s18.x2 - s18.x1) * i27.width,
      height: (s18.y2 - s18.y1) * i27.height
    }, a22 = N17.getBoundingBoxDims(
      r24,
      rt11(this.rotation)
    ), p26 = N17.fitImageInsideBox(a22, {
      width: t19.width,
      height: t19.height
    }).width / a22.width;
    this.container.style.width = `${r24.width * p26}px`, this.container.style.height = `${r24.height * p26}px`;
  }
  drawImage() {
    const t19 = this.getCanvasCtx(), e11 = this.getConfig().image, { loaded: i27, image: o13, width: s18, height: r24 } = b25(this, v24).getImage(e11);
    if (!i27)
      return;
    const { clientWidth: a22, clientHeight: p26 } = this.canvas, y34 = a22 * window.devicePixelRatio, c27 = p26 * window.devicePixelRatio;
    this.canvas.width = y34, this.canvas.height = c27;
    const m34 = this.getCropPercent();
    t19.drawImage(
      o13,
      m34.x1 * s18,
      m34.y1 * r24,
      (m34.x2 - m34.x1) * s18,
      (m34.y2 - m34.y1) * r24,
      0,
      0,
      y34,
      c27
    );
  }
  drawFieldRect() {
    const t19 = this.getCanvasCtx(), { x: e11, y: i27, width: o13, height: s18 } = this.getFieldRectPx();
    t19.rect(e11, i27, o13, s18), t19.lineWidth = 2, t19.strokeStyle = "yellow", t19.stroke();
  }
  drawGrid() {
    const t19 = this.getCanvasCtx(), { image: e11, size: i27 } = this.getConfig(), { loaded: o13 } = b25(this, v24).getImage(e11);
    if (!(!o13 || !this.showGrid || this.gridSize <= 0)) {
      t19.lineWidth = 1, t19.strokeStyle = "gray";
      for (let s18 = 0; s18 <= i27[0]; s18 += this.gridSize)
        t19.beginPath(), t19.moveTo(this.xToPx(s18), this.yToPx(0)), t19.lineTo(this.xToPx(s18), this.yToPx(i27[1])), t19.stroke();
      for (let s18 = 0; s18 <= i27[1]; s18 += this.gridSize)
        t19.beginPath(), t19.moveTo(this.xToPx(0), this.yToPx(s18)), t19.lineTo(this.xToPx(i27[0]), this.yToPx(s18)), t19.stroke();
    }
  }
  drawChildren() {
    const t19 = {
      canvas: this.getCanvasCtx(),
      getFieldRectPx: () => this.getFieldRectPx(),
      unit: this.unit,
      rotationUnit: this.rotationUnit,
      xToPx: (e11, i27) => this.xToPx(e11, i27),
      yToPx: (e11, i27) => this.yToPx(e11, i27),
      lengthToPx: (e11, i27) => this.lengthToPx(e11, i27),
      origin: this.origin
    };
    [...this.children].flatMap((e11) => e11.tagName === "SLOT" ? e11.assignedElements() : e11).forEach((e11) => {
      var i27;
      const o13 = this.getCanvasCtx();
      o13.save(), o13.beginPath();
      const s18 = e11;
      (i27 = s18.draw) == null || i27.call(s18, t19), o13.restore();
    });
  }
  drawField() {
    this.setContainerSize(), this.drawImage(), this.drawFieldRect(), this.drawGrid(), this.drawChildren(), window.requestAnimationFrame(() => {
      this.drawField();
    });
  }
  firstUpdated() {
    this.drawField();
  }
  render() {
    return Ht`
      <div class="outside-container">
        <div class="container" style="transform: rotate(${-this.rotation}deg)">
          <canvas @click=${et12(this, U18, X12)}></canvas>
        </div>
      </div>
    `;
  }
};
v24 = /* @__PURE__ */ new WeakMap(), U18 = /* @__PURE__ */ new WeakSet(), X12 = function(n33) {
  const t19 = this.pxToX(n33.offsetX), e11 = this.pxToY(n33.offsetY);
  this.dispatchEvent(
    new CustomEvent("fieldClick", {
      detail: {
        feet: {
          x: n23(t19, this.unit, "ft"),
          y: n23(e11, this.unit, "ft")
        },
        meters: {
          x: n23(t19, this.unit, "m"),
          y: n23(e11, this.unit, "m")
        }
      },
      bubbles: true,
      composed: true
    })
  );
}, V14.styles = Mt`
    :host {
      display: inline-flex;
      position: relative;
      width: 500px;
      height: 300px;
      justify-content: center;
      align-items: center;
    }

    .container {
    }

    canvas {
      width: 100%;
      height: 100%;
    }
  `;
var l17 = V14;
f27([
  Rt({ type: String })
], l17.prototype, "game");
f27([
  Rt({ type: Number, attribute: "crop-top" })
], l17.prototype, "cropTop");
f27([
  Rt({ type: Number, attribute: "crop-bottom" })
], l17.prototype, "cropBottom");
f27([
  Rt({ type: Number, attribute: "crop-left" })
], l17.prototype, "cropLeft");
f27([
  Rt({ type: Number, attribute: "crop-right" })
], l17.prototype, "cropRight");
f27([
  Rt({ type: String, attribute: "crop-type" })
], l17.prototype, "cropType");
f27([
  Rt({ type: String })
], l17.prototype, "unit");
f27([
  Rt({ type: String, attribute: "rotation-unit" })
], l17.prototype, "rotationUnit");
f27([
  Rt({ type: Number })
], l17.prototype, "rotation");
f27([
  Rt({ type: Boolean, attribute: "show-grid" })
], l17.prototype, "showGrid");
f27([
  Rt({ type: Number, attribute: "grid-size" })
], l17.prototype, "gridSize");
f27([
  Rt({ type: String })
], l17.prototype, "origin");
f27([
  a("canvas", true)
], l17.prototype, "canvas");
f27([
  a(".container", true)
], l17.prototype, "container");
customElements.get("frc-field") || customElements.define("frc-field", l17);
var ht13 = class {
  constructor(t19, e11) {
    this.sourceKey = "", this.sourceProvider = "", this.store = t19, this.onUpdate = e11;
  }
  setSource(t19, e11) {
    var i27;
    this.sourceKey = t19, this.sourceProvider = e11, this.addFieldObjectsFromSources(), (i27 = this.unsubscriber) == null || i27.call(this);
    const o13 = ot11(() => {
      this.addFieldObjectsFromSources();
    }, 1e3 / 60);
    this.unsubscriber = this.store.subscribe(e11, t19, o13, true);
  }
  addFieldObjectsFromSources() {
    var t19;
    const e11 = this.store.getSource(this.sourceProvider, this.sourceKey);
    if (!e11 || ((t19 = e11.getChildren()[".type"]) == null ? void 0 : t19.getValue()) !== "Field2d")
      return;
    const i27 = [];
    Object.entries(e11.getChildren()).forEach(([o13, s18]) => {
      if (o13.startsWith(".") || o13 === "XModules")
        return;
      const r24 = s18.hasChildren() ? s18.getChildren().pose.getValue() : s18.getValue(), a22 = it12(r24);
      i27.push({
        type: a22.length === 1 ? "robot" : "trajectory",
        poses: a22,
        sourceKey: s18.getKey(),
        sourceProvider: this.sourceProvider
      }), this.onUpdate(i27);
    });
  }
};
var nt15 = Object.defineProperty;
var d22 = (n33, t19, e11, i27) => {
  for (var o13 = void 0, s18 = n33.length - 1, r24; s18 >= 0; s18--)
    (r24 = n33[s18]) && (o13 = r24(t19, e11, o13) || o13);
  return o13 && nt15(t19, e11, o13), o13;
};
var z18;
var Y11 = class extends x {
  constructor() {
    super(...arguments), L9(this, z18), this.sourceProvider = "", this.sourceKey = "", this.game = O14[0].game, this.cropTop = 0, this.cropBottom = 100, this.cropLeft = 0, this.cropRight = 100, this.cropType = "percent", this.unit = e8, this.rotationUnit = "deg", this.rotation = 0, this.showGrid = false, this.gridSize = 1, this.origin = "blue", this.fieldObjects = [];
  }
  firstUpdated() {
    this.store && (this.fieldObjectManager = new ht13(
      this.store,
      (t19) => {
        this.fieldObjects = t19;
      }
    )), H14(this, z18, new MutationObserver(() => {
      this.requestUpdate();
    })), b25(this, z18).observe(this, {
      attributes: true,
      childList: true,
      subtree: true,
      attributeFilter: ["source-key", "source-provider"]
    });
  }
  disconnectedCallback() {
    super.disconnectedCallback(), b25(this, z18).disconnect();
  }
  updated(t19) {
    (t19.has("sourceKey") || t19.has("sourceProvider")) && this.fieldObjectManager.setSource(this.sourceKey, this.sourceProvider);
  }
  render() {
    var t19;
    const e11 = (((t19 = this.slottedFieldObjects) == null ? void 0 : t19.assignedElements()) ?? []).filter((i27) => i27.tagName === "FRC-FIELD-ROBOT" || i27.tagName === "FRC-FIELD-PATH").map((i27) => ({
      type: i27.tagName === "FRC-FIELD-ROBOT" ? "robot" : "trajectory",
      sourceKey: i27.getAttribute("source-key"),
      sourceProvider: i27.getAttribute("source-provider")
    }));
    return Ht`
      <frc-field
        game=${this.game}
        unit=${this.unit}
        rotation-unit=${this.rotationUnit}
        rotation=${this.rotation}
        ?show-grid=${this.showGrid}
        grid-size=${this.gridSize}
        origin=${this.origin}
        crop-top=${this.cropTop / 100}
        crop-bottom=${this.cropBottom / 100}
        crop-left=${this.cropLeft / 100}
        crop-right=${this.cropRight / 100}
        crop-type=${this.cropType}
      >
        ${this.fieldObjects.filter((i27) => !e11.find(
      ({ sourceKey: o13, sourceProvider: s18, type: r24 }) => i27.type === r24 && i27.sourceKey === o13 && i27.sourceProvider === s18
    )).map((i27) => i27.type === "robot" ? Ht`<frc-field-robot
                .pose=${i27.poses[0]}
              ></frc-field-robot>` : Ht`<frc-field-path
              .poses=${i27.poses}
            ></frc-field-path>`)}
        <slot></slot>
      </frc-field>
    `;
  }
};
z18 = /* @__PURE__ */ new WeakMap(), Y11.styles = Mt`
    :host {
      display: inline-block;
      position: relative;
      width: 500px;
      height: 300px;
    }

    frc-field {
      width: 100%;
      height: 100%;
    }
  `;
var g22 = Y11;
d22([
  Rt({ type: Object, attribute: false })
], g22.prototype, "provider");
d22([
  Rt({ type: Object, attribute: false })
], g22.prototype, "store");
d22([
  Rt({ type: String, attribute: "source-provider" })
], g22.prototype, "sourceProvider");
d22([
  Rt({ type: String, attribute: "source-key" })
], g22.prototype, "sourceKey");
d22([
  Rt({ type: String })
], g22.prototype, "game");
d22([
  Rt({ type: Number, attribute: "crop-top" })
], g22.prototype, "cropTop");
d22([
  Rt({ type: Number, attribute: "crop-bottom" })
], g22.prototype, "cropBottom");
d22([
  Rt({ type: Number, attribute: "crop-left" })
], g22.prototype, "cropLeft");
d22([
  Rt({ type: Number, attribute: "crop-right" })
], g22.prototype, "cropRight");
d22([
  Rt({ type: String, attribute: "crop-type" })
], g22.prototype, "cropType");
d22([
  Rt({ type: String })
], g22.prototype, "unit");
d22([
  Rt({ type: String, attribute: "rotation-unit" })
], g22.prototype, "rotationUnit");
d22([
  Rt({ type: Number })
], g22.prototype, "rotation");
d22([
  Rt({ type: Boolean, attribute: "show-grid" })
], g22.prototype, "showGrid");
d22([
  Rt({ type: Number, attribute: "grid-size" })
], g22.prototype, "gridSize");
d22([
  Rt({ type: String })
], g22.prototype, "origin");
d22([
  n()
], g22.prototype, "fieldObjects");
d22([
  a("slot", true)
], g22.prototype, "slottedFieldObjects");
customElements.get("frc-field-wrapper") || customElements.define("frc-field-wrapper", g22);
var yt12 = xt({
  tagName: "frc-field",
  elementClass: l17,
  react: import_react12.default
});
var bt8 = xt({
  tagName: "frc-field-robot",
  elementClass: w22,
  react: import_react12.default
});
var wt8 = xt({
  tagName: "frc-field-path",
  elementClass: x23,
  react: import_react12.default
});

// node_modules/@frc-web-components/react/dist/components/Field3d.es.js
var import_react13 = __toESM(require_react(), 1);
var th2 = (s18) => {
  throw TypeError(s18);
};
var Lo2 = (s18, e11, t19) => e11.has(s18) || th2("Cannot " + t19);
var ft12 = (s18, e11, t19) => (Lo2(s18, e11, "read from private field"), t19 ? t19.call(s18) : e11.get(s18));
var Ht7 = (s18, e11, t19) => e11.has(s18) ? th2("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(s18) : e11.set(s18, t19);
var ei6 = (s18, e11, t19, i27) => (Lo2(s18, e11, "write to private field"), i27 ? i27.call(s18, t19) : e11.set(s18, t19), t19);
var Bi3 = (s18, e11, t19) => (Lo2(s18, e11, "access private method"), t19);
var Co2 = "151";
var Br5 = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };
var Fr5 = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };
var su2 = 0;
var el2 = 1;
var au2 = 2;
var ih2 = 1;
var ou2 = 2;
var Xn5 = 3;
var Ei5 = 0;
var ti6 = 1;
var ui6 = 2;
var tr5 = 0;
var un4 = 1;
var tl2 = 2;
var il2 = 3;
var rl2 = 4;
var lu2 = 5;
var on4 = 100;
var cu2 = 101;
var hu2 = 102;
var nl2 = 103;
var sl2 = 104;
var uu2 = 200;
var du2 = 201;
var pu2 = 202;
var mu2 = 203;
var rh2 = 204;
var nh2 = 205;
var fu2 = 206;
var gu2 = 207;
var _u2 = 208;
var vu2 = 209;
var yu2 = 210;
var xu2 = 0;
var bu2 = 1;
var Mu2 = 2;
var ho2 = 3;
var wu2 = 4;
var Su2 = 5;
var Tu2 = 6;
var Eu2 = 7;
var ra2 = 0;
var Au2 = 1;
var Lu2 = 2;
var Fi4 = 0;
var Cu2 = 1;
var Ru2 = 2;
var Nu2 = 3;
var Pu2 = 4;
var Iu2 = 5;
var sh2 = 300;
var yn5 = 301;
var xn5 = 302;
var uo2 = 303;
var po2 = 304;
var na2 = 306;
var Ti4 = 1e3;
var Zt6 = 1001;
var ta2 = 1002;
var zt6 = 1003;
var mo2 = 1004;
var Zs2 = 1005;
var Vt6 = 1006;
var ah2 = 1007;
var Hi3 = 1008;
var xr4 = 1009;
var Du2 = 1010;
var ku2 = 1011;
var oh2 = 1012;
var Uu2 = 1013;
var pr4 = 1014;
var er5 = 1015;
var $n5 = 1016;
var Ou2 = 1017;
var zu2 = 1018;
var dn4 = 1020;
var Bu2 = 1021;
var di6 = 1023;
var Fu2 = 1024;
var Hu2 = 1025;
var vr5 = 1026;
var bn5 = 1027;
var Vu2 = 1028;
var Gu2 = 1029;
var Wu2 = 1030;
var ju2 = 1031;
var Xu2 = 1033;
var Ma2 = 33776;
var wa2 = 33777;
var Sa2 = 33778;
var Ta2 = 33779;
var al2 = 35840;
var ol2 = 35841;
var ll2 = 35842;
var cl2 = 35843;
var qu2 = 36196;
var hl2 = 37492;
var ul2 = 37496;
var dl2 = 37808;
var pl2 = 37809;
var ml2 = 37810;
var fl2 = 37811;
var gl2 = 37812;
var _l2 = 37813;
var vl2 = 37814;
var yl2 = 37815;
var xl2 = 37816;
var bl2 = 37817;
var Ml2 = 37818;
var wl2 = 37819;
var Sl2 = 37820;
var Tl2 = 37821;
var Ea2 = 36492;
var Yu2 = 36283;
var El2 = 36284;
var Al2 = 36285;
var Ll2 = 36286;
var Qn5 = 2300;
var Mn5 = 2301;
var Aa = 2302;
var Cl2 = 2400;
var Rl2 = 2401;
var Nl2 = 2402;
var Zu = 2500;
var Ju = 0;
var lh2 = 1;
var fo2 = 2;
var br5 = 3e3;
var rt12 = 3001;
var Ku2 = 3200;
var $u = 3201;
var sa2 = 0;
var Qu = 1;
var yi6 = "srgb";
var aa2 = "srgb-linear";
var ch2 = "display-p3";
var La2 = 7680;
var ed2 = 519;
var go2 = 35044;
var Pl2 = "300 es";
var _o2 = 1035;
var Ar5 = class {
  addEventListener(e11, t19) {
    this._listeners === void 0 && (this._listeners = {});
    const i27 = this._listeners;
    i27[e11] === void 0 && (i27[e11] = []), i27[e11].indexOf(t19) === -1 && i27[e11].push(t19);
  }
  hasEventListener(e11, t19) {
    if (this._listeners === void 0)
      return false;
    const i27 = this._listeners;
    return i27[e11] !== void 0 && i27[e11].indexOf(t19) !== -1;
  }
  removeEventListener(e11, t19) {
    if (this._listeners === void 0)
      return;
    const i27 = this._listeners[e11];
    if (i27 !== void 0) {
      const r24 = i27.indexOf(t19);
      r24 !== -1 && i27.splice(r24, 1);
    }
  }
  dispatchEvent(e11) {
    if (this._listeners === void 0)
      return;
    const t19 = this._listeners[e11.type];
    if (t19 !== void 0) {
      e11.target = this;
      const i27 = t19.slice(0);
      for (let r24 = 0, n33 = i27.length; r24 < n33; r24++)
        i27[r24].call(this, e11);
      e11.target = null;
    }
  }
};
var qt5 = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "0a", "0b", "0c", "0d", "0e", "0f", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "1a", "1b", "1c", "1d", "1e", "1f", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "2a", "2b", "2c", "2d", "2e", "2f", "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "3a", "3b", "3c", "3d", "3e", "3f", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "4a", "4b", "4c", "4d", "4e", "4f", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "5a", "5b", "5c", "5d", "5e", "5f", "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "6a", "6b", "6c", "6d", "6e", "6f", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "7a", "7b", "7c", "7d", "7e", "7f", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "8a", "8b", "8c", "8d", "8e", "8f", "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "9a", "9b", "9c", "9d", "9e", "9f", "a0", "a1", "a2", "a3", "a4", "a5", "a6", "a7", "a8", "a9", "aa", "ab", "ac", "ad", "ae", "af", "b0", "b1", "b2", "b3", "b4", "b5", "b6", "b7", "b8", "b9", "ba", "bb", "bc", "bd", "be", "bf", "c0", "c1", "c2", "c3", "c4", "c5", "c6", "c7", "c8", "c9", "ca", "cb", "cc", "cd", "ce", "cf", "d0", "d1", "d2", "d3", "d4", "d5", "d6", "d7", "d8", "d9", "da", "db", "dc", "dd", "de", "df", "e0", "e1", "e2", "e3", "e4", "e5", "e6", "e7", "e8", "e9", "ea", "eb", "ec", "ed", "ee", "ef", "f0", "f1", "f2", "f3", "f4", "f5", "f6", "f7", "f8", "f9", "fa", "fb", "fc", "fd", "fe", "ff"];
var Il2 = 1234567;
var pn5 = Math.PI / 180;
var wn5 = 180 / Math.PI;
function bi6() {
  const s18 = Math.random() * 4294967295 | 0, e11 = Math.random() * 4294967295 | 0, t19 = Math.random() * 4294967295 | 0, i27 = Math.random() * 4294967295 | 0;
  return (qt5[s18 & 255] + qt5[s18 >> 8 & 255] + qt5[s18 >> 16 & 255] + qt5[s18 >> 24 & 255] + "-" + qt5[e11 & 255] + qt5[e11 >> 8 & 255] + "-" + qt5[e11 >> 16 & 15 | 64] + qt5[e11 >> 24 & 255] + "-" + qt5[t19 & 63 | 128] + qt5[t19 >> 8 & 255] + "-" + qt5[t19 >> 16 & 255] + qt5[t19 >> 24 & 255] + qt5[i27 & 255] + qt5[i27 >> 8 & 255] + qt5[i27 >> 16 & 255] + qt5[i27 >> 24 & 255]).toLowerCase();
}
function Gt6(s18, e11, t19) {
  return Math.max(e11, Math.min(t19, s18));
}
function Ro2(s18, e11) {
  return (s18 % e11 + e11) % e11;
}
function td2(s18, e11, t19, i27, r24) {
  return i27 + (s18 - e11) * (r24 - i27) / (t19 - e11);
}
function id2(s18, e11, t19) {
  return s18 !== e11 ? (t19 - s18) / (e11 - s18) : 0;
}
function Zn5(s18, e11, t19) {
  return (1 - t19) * s18 + t19 * e11;
}
function rd2(s18, e11, t19, i27) {
  return Zn5(s18, e11, 1 - Math.exp(-t19 * i27));
}
function nd2(s18, e11 = 1) {
  return e11 - Math.abs(Ro2(s18, e11 * 2) - e11);
}
function sd2(s18, e11, t19) {
  return s18 <= e11 ? 0 : s18 >= t19 ? 1 : (s18 = (s18 - e11) / (t19 - e11), s18 * s18 * (3 - 2 * s18));
}
function ad2(s18, e11, t19) {
  return s18 <= e11 ? 0 : s18 >= t19 ? 1 : (s18 = (s18 - e11) / (t19 - e11), s18 * s18 * s18 * (s18 * (s18 * 6 - 15) + 10));
}
function od2(s18, e11) {
  return s18 + Math.floor(Math.random() * (e11 - s18 + 1));
}
function ld2(s18, e11) {
  return s18 + Math.random() * (e11 - s18);
}
function cd2(s18) {
  return s18 * (0.5 - Math.random());
}
function hd2(s18) {
  s18 !== void 0 && (Il2 = s18);
  let e11 = Il2 += 1831565813;
  return e11 = Math.imul(e11 ^ e11 >>> 15, e11 | 1), e11 ^= e11 + Math.imul(e11 ^ e11 >>> 7, e11 | 61), ((e11 ^ e11 >>> 14) >>> 0) / 4294967296;
}
function ud2(s18) {
  return s18 * pn5;
}
function dd2(s18) {
  return s18 * wn5;
}
function vo(s18) {
  return (s18 & s18 - 1) === 0 && s18 !== 0;
}
function hh2(s18) {
  return Math.pow(2, Math.ceil(Math.log(s18) / Math.LN2));
}
function uh2(s18) {
  return Math.pow(2, Math.floor(Math.log(s18) / Math.LN2));
}
function pd2(s18, e11, t19, i27, r24) {
  const n33 = Math.cos, a22 = Math.sin, o13 = n33(t19 / 2), l26 = a22(t19 / 2), c27 = n33((e11 + i27) / 2), h26 = a22((e11 + i27) / 2), u35 = n33((e11 - i27) / 2), d34 = a22((e11 - i27) / 2), m34 = n33((i27 - e11) / 2), _21 = a22((i27 - e11) / 2);
  switch (r24) {
    case "XYX":
      s18.set(o13 * h26, l26 * u35, l26 * d34, o13 * c27);
      break;
    case "YZY":
      s18.set(l26 * d34, o13 * h26, l26 * u35, o13 * c27);
      break;
    case "ZXZ":
      s18.set(l26 * u35, l26 * d34, o13 * h26, o13 * c27);
      break;
    case "XZX":
      s18.set(o13 * h26, l26 * _21, l26 * m34, o13 * c27);
      break;
    case "YXY":
      s18.set(l26 * m34, o13 * h26, l26 * _21, o13 * c27);
      break;
    case "ZYZ":
      s18.set(l26 * _21, l26 * m34, o13 * h26, o13 * c27);
      break;
    default:
      console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: " + r24);
  }
}
function zi4(s18, e11) {
  switch (e11.constructor) {
    case Float32Array:
      return s18;
    case Uint16Array:
      return s18 / 65535;
    case Uint8Array:
      return s18 / 255;
    case Int16Array:
      return Math.max(s18 / 32767, -1);
    case Int8Array:
      return Math.max(s18 / 127, -1);
    default:
      throw new Error("Invalid component type.");
  }
}
function mt11(s18, e11) {
  switch (e11.constructor) {
    case Float32Array:
      return s18;
    case Uint16Array:
      return Math.round(s18 * 65535);
    case Uint8Array:
      return Math.round(s18 * 255);
    case Int16Array:
      return Math.round(s18 * 32767);
    case Int8Array:
      return Math.round(s18 * 127);
    default:
      throw new Error("Invalid component type.");
  }
}
var ln4 = {
  DEG2RAD: pn5,
  RAD2DEG: wn5,
  generateUUID: bi6,
  clamp: Gt6,
  euclideanModulo: Ro2,
  mapLinear: td2,
  inverseLerp: id2,
  lerp: Zn5,
  damp: rd2,
  pingpong: nd2,
  smoothstep: sd2,
  smootherstep: ad2,
  randInt: od2,
  randFloat: ld2,
  randFloatSpread: cd2,
  seededRandom: hd2,
  degToRad: ud2,
  radToDeg: dd2,
  isPowerOfTwo: vo,
  ceilPowerOfTwo: hh2,
  floorPowerOfTwo: uh2,
  setQuaternionFromProperEuler: pd2,
  normalize: mt11,
  denormalize: zi4
};
var We7 = class _We {
  constructor(e11 = 0, t19 = 0) {
    _We.prototype.isVector2 = true, this.x = e11, this.y = t19;
  }
  get width() {
    return this.x;
  }
  set width(e11) {
    this.x = e11;
  }
  get height() {
    return this.y;
  }
  set height(e11) {
    this.y = e11;
  }
  set(e11, t19) {
    return this.x = e11, this.y = t19, this;
  }
  setScalar(e11) {
    return this.x = e11, this.y = e11, this;
  }
  setX(e11) {
    return this.x = e11, this;
  }
  setY(e11) {
    return this.y = e11, this;
  }
  setComponent(e11, t19) {
    switch (e11) {
      case 0:
        this.x = t19;
        break;
      case 1:
        this.y = t19;
        break;
      default:
        throw new Error("index is out of range: " + e11);
    }
    return this;
  }
  getComponent(e11) {
    switch (e11) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      default:
        throw new Error("index is out of range: " + e11);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y);
  }
  copy(e11) {
    return this.x = e11.x, this.y = e11.y, this;
  }
  add(e11) {
    return this.x += e11.x, this.y += e11.y, this;
  }
  addScalar(e11) {
    return this.x += e11, this.y += e11, this;
  }
  addVectors(e11, t19) {
    return this.x = e11.x + t19.x, this.y = e11.y + t19.y, this;
  }
  addScaledVector(e11, t19) {
    return this.x += e11.x * t19, this.y += e11.y * t19, this;
  }
  sub(e11) {
    return this.x -= e11.x, this.y -= e11.y, this;
  }
  subScalar(e11) {
    return this.x -= e11, this.y -= e11, this;
  }
  subVectors(e11, t19) {
    return this.x = e11.x - t19.x, this.y = e11.y - t19.y, this;
  }
  multiply(e11) {
    return this.x *= e11.x, this.y *= e11.y, this;
  }
  multiplyScalar(e11) {
    return this.x *= e11, this.y *= e11, this;
  }
  divide(e11) {
    return this.x /= e11.x, this.y /= e11.y, this;
  }
  divideScalar(e11) {
    return this.multiplyScalar(1 / e11);
  }
  applyMatrix3(e11) {
    const t19 = this.x, i27 = this.y, r24 = e11.elements;
    return this.x = r24[0] * t19 + r24[3] * i27 + r24[6], this.y = r24[1] * t19 + r24[4] * i27 + r24[7], this;
  }
  min(e11) {
    return this.x = Math.min(this.x, e11.x), this.y = Math.min(this.y, e11.y), this;
  }
  max(e11) {
    return this.x = Math.max(this.x, e11.x), this.y = Math.max(this.y, e11.y), this;
  }
  clamp(e11, t19) {
    return this.x = Math.max(e11.x, Math.min(t19.x, this.x)), this.y = Math.max(e11.y, Math.min(t19.y, this.y)), this;
  }
  clampScalar(e11, t19) {
    return this.x = Math.max(e11, Math.min(t19, this.x)), this.y = Math.max(e11, Math.min(t19, this.y)), this;
  }
  clampLength(e11, t19) {
    const i27 = this.length();
    return this.divideScalar(i27 || 1).multiplyScalar(Math.max(e11, Math.min(t19, i27)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this;
  }
  roundToZero() {
    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this;
  }
  dot(e11) {
    return this.x * e11.x + this.y * e11.y;
  }
  cross(e11) {
    return this.x * e11.y - this.y * e11.x;
  }
  lengthSq() {
    return this.x * this.x + this.y * this.y;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  angle() {
    return Math.atan2(-this.y, -this.x) + Math.PI;
  }
  angleTo(e11) {
    const t19 = Math.sqrt(this.lengthSq() * e11.lengthSq());
    if (t19 === 0)
      return Math.PI / 2;
    const i27 = this.dot(e11) / t19;
    return Math.acos(Gt6(i27, -1, 1));
  }
  distanceTo(e11) {
    return Math.sqrt(this.distanceToSquared(e11));
  }
  distanceToSquared(e11) {
    const t19 = this.x - e11.x, i27 = this.y - e11.y;
    return t19 * t19 + i27 * i27;
  }
  manhattanDistanceTo(e11) {
    return Math.abs(this.x - e11.x) + Math.abs(this.y - e11.y);
  }
  setLength(e11) {
    return this.normalize().multiplyScalar(e11);
  }
  lerp(e11, t19) {
    return this.x += (e11.x - this.x) * t19, this.y += (e11.y - this.y) * t19, this;
  }
  lerpVectors(e11, t19, i27) {
    return this.x = e11.x + (t19.x - e11.x) * i27, this.y = e11.y + (t19.y - e11.y) * i27, this;
  }
  equals(e11) {
    return e11.x === this.x && e11.y === this.y;
  }
  fromArray(e11, t19 = 0) {
    return this.x = e11[t19], this.y = e11[t19 + 1], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.x, e11[t19 + 1] = this.y, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.x = e11.getX(t19), this.y = e11.getY(t19), this;
  }
  rotateAround(e11, t19) {
    const i27 = Math.cos(t19), r24 = Math.sin(t19), n33 = this.x - e11.x, a22 = this.y - e11.y;
    return this.x = n33 * i27 - a22 * r24 + e11.x, this.y = n33 * r24 + a22 * i27 + e11.y, this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y;
  }
};
var Ke5 = class _Ke {
  constructor() {
    _Ke.prototype.isMatrix3 = true, this.elements = [
      1,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      1
    ];
  }
  set(e11, t19, i27, r24, n33, a22, o13, l26, c27) {
    const h26 = this.elements;
    return h26[0] = e11, h26[1] = r24, h26[2] = o13, h26[3] = t19, h26[4] = n33, h26[5] = l26, h26[6] = i27, h26[7] = a22, h26[8] = c27, this;
  }
  identity() {
    return this.set(
      1,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      1
    ), this;
  }
  copy(e11) {
    const t19 = this.elements, i27 = e11.elements;
    return t19[0] = i27[0], t19[1] = i27[1], t19[2] = i27[2], t19[3] = i27[3], t19[4] = i27[4], t19[5] = i27[5], t19[6] = i27[6], t19[7] = i27[7], t19[8] = i27[8], this;
  }
  extractBasis(e11, t19, i27) {
    return e11.setFromMatrix3Column(this, 0), t19.setFromMatrix3Column(this, 1), i27.setFromMatrix3Column(this, 2), this;
  }
  setFromMatrix4(e11) {
    const t19 = e11.elements;
    return this.set(
      t19[0],
      t19[4],
      t19[8],
      t19[1],
      t19[5],
      t19[9],
      t19[2],
      t19[6],
      t19[10]
    ), this;
  }
  multiply(e11) {
    return this.multiplyMatrices(this, e11);
  }
  premultiply(e11) {
    return this.multiplyMatrices(e11, this);
  }
  multiplyMatrices(e11, t19) {
    const i27 = e11.elements, r24 = t19.elements, n33 = this.elements, a22 = i27[0], o13 = i27[3], l26 = i27[6], c27 = i27[1], h26 = i27[4], u35 = i27[7], d34 = i27[2], m34 = i27[5], _21 = i27[8], y34 = r24[0], f40 = r24[3], p26 = r24[6], A18 = r24[1], M13 = r24[4], E25 = r24[7], w31 = r24[2], I18 = r24[5], D18 = r24[8];
    return n33[0] = a22 * y34 + o13 * A18 + l26 * w31, n33[3] = a22 * f40 + o13 * M13 + l26 * I18, n33[6] = a22 * p26 + o13 * E25 + l26 * D18, n33[1] = c27 * y34 + h26 * A18 + u35 * w31, n33[4] = c27 * f40 + h26 * M13 + u35 * I18, n33[7] = c27 * p26 + h26 * E25 + u35 * D18, n33[2] = d34 * y34 + m34 * A18 + _21 * w31, n33[5] = d34 * f40 + m34 * M13 + _21 * I18, n33[8] = d34 * p26 + m34 * E25 + _21 * D18, this;
  }
  multiplyScalar(e11) {
    const t19 = this.elements;
    return t19[0] *= e11, t19[3] *= e11, t19[6] *= e11, t19[1] *= e11, t19[4] *= e11, t19[7] *= e11, t19[2] *= e11, t19[5] *= e11, t19[8] *= e11, this;
  }
  determinant() {
    const e11 = this.elements, t19 = e11[0], i27 = e11[1], r24 = e11[2], n33 = e11[3], a22 = e11[4], o13 = e11[5], l26 = e11[6], c27 = e11[7], h26 = e11[8];
    return t19 * a22 * h26 - t19 * o13 * c27 - i27 * n33 * h26 + i27 * o13 * l26 + r24 * n33 * c27 - r24 * a22 * l26;
  }
  invert() {
    const e11 = this.elements, t19 = e11[0], i27 = e11[1], r24 = e11[2], n33 = e11[3], a22 = e11[4], o13 = e11[5], l26 = e11[6], c27 = e11[7], h26 = e11[8], u35 = h26 * a22 - o13 * c27, d34 = o13 * l26 - h26 * n33, m34 = c27 * n33 - a22 * l26, _21 = t19 * u35 + i27 * d34 + r24 * m34;
    if (_21 === 0)
      return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0);
    const y34 = 1 / _21;
    return e11[0] = u35 * y34, e11[1] = (r24 * c27 - h26 * i27) * y34, e11[2] = (o13 * i27 - r24 * a22) * y34, e11[3] = d34 * y34, e11[4] = (h26 * t19 - r24 * l26) * y34, e11[5] = (r24 * n33 - o13 * t19) * y34, e11[6] = m34 * y34, e11[7] = (i27 * l26 - c27 * t19) * y34, e11[8] = (a22 * t19 - i27 * n33) * y34, this;
  }
  transpose() {
    let e11;
    const t19 = this.elements;
    return e11 = t19[1], t19[1] = t19[3], t19[3] = e11, e11 = t19[2], t19[2] = t19[6], t19[6] = e11, e11 = t19[5], t19[5] = t19[7], t19[7] = e11, this;
  }
  getNormalMatrix(e11) {
    return this.setFromMatrix4(e11).invert().transpose();
  }
  transposeIntoArray(e11) {
    const t19 = this.elements;
    return e11[0] = t19[0], e11[1] = t19[3], e11[2] = t19[6], e11[3] = t19[1], e11[4] = t19[4], e11[5] = t19[7], e11[6] = t19[2], e11[7] = t19[5], e11[8] = t19[8], this;
  }
  setUvTransform(e11, t19, i27, r24, n33, a22, o13) {
    const l26 = Math.cos(n33), c27 = Math.sin(n33);
    return this.set(
      i27 * l26,
      i27 * c27,
      -i27 * (l26 * a22 + c27 * o13) + a22 + e11,
      -r24 * c27,
      r24 * l26,
      -r24 * (-c27 * a22 + l26 * o13) + o13 + t19,
      0,
      0,
      1
    ), this;
  }
  //
  scale(e11, t19) {
    return this.premultiply(Ca2.makeScale(e11, t19)), this;
  }
  rotate(e11) {
    return this.premultiply(Ca2.makeRotation(-e11)), this;
  }
  translate(e11, t19) {
    return this.premultiply(Ca2.makeTranslation(e11, t19)), this;
  }
  // for 2D Transforms
  makeTranslation(e11, t19) {
    return this.set(
      1,
      0,
      e11,
      0,
      1,
      t19,
      0,
      0,
      1
    ), this;
  }
  makeRotation(e11) {
    const t19 = Math.cos(e11), i27 = Math.sin(e11);
    return this.set(
      t19,
      -i27,
      0,
      i27,
      t19,
      0,
      0,
      0,
      1
    ), this;
  }
  makeScale(e11, t19) {
    return this.set(
      e11,
      0,
      0,
      0,
      t19,
      0,
      0,
      0,
      1
    ), this;
  }
  //
  equals(e11) {
    const t19 = this.elements, i27 = e11.elements;
    for (let r24 = 0; r24 < 9; r24++)
      if (t19[r24] !== i27[r24])
        return false;
    return true;
  }
  fromArray(e11, t19 = 0) {
    for (let i27 = 0; i27 < 9; i27++)
      this.elements[i27] = e11[i27 + t19];
    return this;
  }
  toArray(e11 = [], t19 = 0) {
    const i27 = this.elements;
    return e11[t19] = i27[0], e11[t19 + 1] = i27[1], e11[t19 + 2] = i27[2], e11[t19 + 3] = i27[3], e11[t19 + 4] = i27[4], e11[t19 + 5] = i27[5], e11[t19 + 6] = i27[6], e11[t19 + 7] = i27[7], e11[t19 + 8] = i27[8], e11;
  }
  clone() {
    return new this.constructor().fromArray(this.elements);
  }
};
var Ca2 = new Ke5();
function dh2(s18) {
  for (let e11 = s18.length - 1; e11 >= 0; --e11)
    if (s18[e11] >= 65535)
      return true;
  return false;
}
function es3(s18) {
  return document.createElementNS("http://www.w3.org/1999/xhtml", s18);
}
function mn4(s18) {
  return s18 < 0.04045 ? s18 * 0.0773993808 : Math.pow(s18 * 0.9478672986 + 0.0521327014, 2.4);
}
function Ra2(s18) {
  return s18 < 31308e-7 ? s18 * 12.92 : 1.055 * Math.pow(s18, 0.41666) - 0.055;
}
var md2 = new Ke5().fromArray([
  0.8224621,
  0.0331941,
  0.0170827,
  0.177538,
  0.9668058,
  0.0723974,
  -1e-7,
  1e-7,
  0.9105199
]);
var fd2 = new Ke5().fromArray([
  1.2249401,
  -0.0420569,
  -0.0196376,
  -0.2249404,
  1.0420571,
  -0.0786361,
  1e-7,
  0,
  1.0982735
]);
function gd2(s18) {
  return s18.convertSRGBToLinear().applyMatrix3(fd2);
}
function _d2(s18) {
  return s18.applyMatrix3(md2).convertLinearToSRGB();
}
var vd2 = {
  [aa2]: (s18) => s18,
  [yi6]: (s18) => s18.convertSRGBToLinear(),
  [ch2]: gd2
};
var yd2 = {
  [aa2]: (s18) => s18,
  [yi6]: (s18) => s18.convertLinearToSRGB(),
  [ch2]: _d2
};
var ii6 = {
  enabled: false,
  get legacyMode() {
    return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."), !this.enabled;
  },
  set legacyMode(s18) {
    console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."), this.enabled = !s18;
  },
  get workingColorSpace() {
    return aa2;
  },
  set workingColorSpace(s18) {
    console.warn("THREE.ColorManagement: .workingColorSpace is readonly.");
  },
  convert: function(s18, e11, t19) {
    if (this.enabled === false || e11 === t19 || !e11 || !t19)
      return s18;
    const i27 = vd2[e11], r24 = yd2[t19];
    if (i27 === void 0 || r24 === void 0)
      throw new Error(`Unsupported color space conversion, "${e11}" to "${t19}".`);
    return r24(i27(s18));
  },
  fromWorkingColorSpace: function(s18, e11) {
    return this.convert(s18, this.workingColorSpace, e11);
  },
  toWorkingColorSpace: function(s18, e11) {
    return this.convert(s18, e11, this.workingColorSpace);
  }
};
var Hr5;
var ph2 = class {
  static getDataURL(e11) {
    if (/^data:/i.test(e11.src) || typeof HTMLCanvasElement > "u")
      return e11.src;
    let t19;
    if (e11 instanceof HTMLCanvasElement)
      t19 = e11;
    else {
      Hr5 === void 0 && (Hr5 = es3("canvas")), Hr5.width = e11.width, Hr5.height = e11.height;
      const i27 = Hr5.getContext("2d");
      e11 instanceof ImageData ? i27.putImageData(e11, 0, 0) : i27.drawImage(e11, 0, 0, e11.width, e11.height), t19 = Hr5;
    }
    return t19.width > 2048 || t19.height > 2048 ? (console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons", e11), t19.toDataURL("image/jpeg", 0.6)) : t19.toDataURL("image/png");
  }
  static sRGBToLinear(e11) {
    if (typeof HTMLImageElement < "u" && e11 instanceof HTMLImageElement || typeof HTMLCanvasElement < "u" && e11 instanceof HTMLCanvasElement || typeof ImageBitmap < "u" && e11 instanceof ImageBitmap) {
      const t19 = es3("canvas");
      t19.width = e11.width, t19.height = e11.height;
      const i27 = t19.getContext("2d");
      i27.drawImage(e11, 0, 0, e11.width, e11.height);
      const r24 = i27.getImageData(0, 0, e11.width, e11.height), n33 = r24.data;
      for (let a22 = 0; a22 < n33.length; a22++)
        n33[a22] = mn4(n33[a22] / 255) * 255;
      return i27.putImageData(r24, 0, 0), t19;
    } else if (e11.data) {
      const t19 = e11.data.slice(0);
      for (let i27 = 0; i27 < t19.length; i27++)
        t19 instanceof Uint8Array || t19 instanceof Uint8ClampedArray ? t19[i27] = Math.floor(mn4(t19[i27] / 255) * 255) : t19[i27] = mn4(t19[i27]);
      return {
        data: t19,
        width: e11.width,
        height: e11.height
      };
    } else
      return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."), e11;
  }
};
var mh2 = class {
  constructor(e11 = null) {
    this.isSource = true, this.uuid = bi6(), this.data = e11, this.version = 0;
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string";
    if (!t19 && e11.images[this.uuid] !== void 0)
      return e11.images[this.uuid];
    const i27 = {
      uuid: this.uuid,
      url: ""
    }, r24 = this.data;
    if (r24 !== null) {
      let n33;
      if (Array.isArray(r24)) {
        n33 = [];
        for (let a22 = 0, o13 = r24.length; a22 < o13; a22++)
          r24[a22].isDataTexture ? n33.push(Na2(r24[a22].image)) : n33.push(Na2(r24[a22]));
      } else
        n33 = Na2(r24);
      i27.url = n33;
    }
    return t19 || (e11.images[this.uuid] = i27), i27;
  }
};
function Na2(s18) {
  return typeof HTMLImageElement < "u" && s18 instanceof HTMLImageElement || typeof HTMLCanvasElement < "u" && s18 instanceof HTMLCanvasElement || typeof ImageBitmap < "u" && s18 instanceof ImageBitmap ? ph2.getDataURL(s18) : s18.data ? {
    data: Array.from(s18.data),
    width: s18.width,
    height: s18.height,
    type: s18.data.constructor.name
  } : (console.warn("THREE.Texture: Unable to serialize Texture."), {});
}
var xd2 = 0;
var Wt7 = class _Wt extends Ar5 {
  constructor(e11 = _Wt.DEFAULT_IMAGE, t19 = _Wt.DEFAULT_MAPPING, i27 = Zt6, r24 = Zt6, n33 = Vt6, a22 = Hi3, o13 = di6, l26 = xr4, c27 = _Wt.DEFAULT_ANISOTROPY, h26 = br5) {
    super(), this.isTexture = true, Object.defineProperty(this, "id", { value: xd2++ }), this.uuid = bi6(), this.name = "", this.source = new mh2(e11), this.mipmaps = [], this.mapping = t19, this.channel = 0, this.wrapS = i27, this.wrapT = r24, this.magFilter = n33, this.minFilter = a22, this.anisotropy = c27, this.format = o13, this.internalFormat = null, this.type = l26, this.offset = new We7(0, 0), this.repeat = new We7(1, 1), this.center = new We7(0, 0), this.rotation = 0, this.matrixAutoUpdate = true, this.matrix = new Ke5(), this.generateMipmaps = true, this.premultiplyAlpha = false, this.flipY = true, this.unpackAlignment = 4, this.encoding = h26, this.userData = {}, this.version = 0, this.onUpdate = null, this.isRenderTargetTexture = false, this.needsPMREMUpdate = false;
  }
  get image() {
    return this.source.data;
  }
  set image(e11 = null) {
    this.source.data = e11;
  }
  updateMatrix() {
    this.matrix.setUvTransform(this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    return this.name = e11.name, this.source = e11.source, this.mipmaps = e11.mipmaps.slice(0), this.mapping = e11.mapping, this.channel = e11.channel, this.wrapS = e11.wrapS, this.wrapT = e11.wrapT, this.magFilter = e11.magFilter, this.minFilter = e11.minFilter, this.anisotropy = e11.anisotropy, this.format = e11.format, this.internalFormat = e11.internalFormat, this.type = e11.type, this.offset.copy(e11.offset), this.repeat.copy(e11.repeat), this.center.copy(e11.center), this.rotation = e11.rotation, this.matrixAutoUpdate = e11.matrixAutoUpdate, this.matrix.copy(e11.matrix), this.generateMipmaps = e11.generateMipmaps, this.premultiplyAlpha = e11.premultiplyAlpha, this.flipY = e11.flipY, this.unpackAlignment = e11.unpackAlignment, this.encoding = e11.encoding, this.userData = JSON.parse(JSON.stringify(e11.userData)), this.needsUpdate = true, this;
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string";
    if (!t19 && e11.textures[this.uuid] !== void 0)
      return e11.textures[this.uuid];
    const i27 = {
      metadata: {
        version: 4.5,
        type: "Texture",
        generator: "Texture.toJSON"
      },
      uuid: this.uuid,
      name: this.name,
      image: this.source.toJSON(e11).uuid,
      mapping: this.mapping,
      channel: this.channel,
      repeat: [this.repeat.x, this.repeat.y],
      offset: [this.offset.x, this.offset.y],
      center: [this.center.x, this.center.y],
      rotation: this.rotation,
      wrap: [this.wrapS, this.wrapT],
      format: this.format,
      internalFormat: this.internalFormat,
      type: this.type,
      encoding: this.encoding,
      minFilter: this.minFilter,
      magFilter: this.magFilter,
      anisotropy: this.anisotropy,
      flipY: this.flipY,
      generateMipmaps: this.generateMipmaps,
      premultiplyAlpha: this.premultiplyAlpha,
      unpackAlignment: this.unpackAlignment
    };
    return Object.keys(this.userData).length > 0 && (i27.userData = this.userData), t19 || (e11.textures[this.uuid] = i27), i27;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
  transformUv(e11) {
    if (this.mapping !== sh2)
      return e11;
    if (e11.applyMatrix3(this.matrix), e11.x < 0 || e11.x > 1)
      switch (this.wrapS) {
        case Ti4:
          e11.x = e11.x - Math.floor(e11.x);
          break;
        case Zt6:
          e11.x = e11.x < 0 ? 0 : 1;
          break;
        case ta2:
          Math.abs(Math.floor(e11.x) % 2) === 1 ? e11.x = Math.ceil(e11.x) - e11.x : e11.x = e11.x - Math.floor(e11.x);
          break;
      }
    if (e11.y < 0 || e11.y > 1)
      switch (this.wrapT) {
        case Ti4:
          e11.y = e11.y - Math.floor(e11.y);
          break;
        case Zt6:
          e11.y = e11.y < 0 ? 0 : 1;
          break;
        case ta2:
          Math.abs(Math.floor(e11.y) % 2) === 1 ? e11.y = Math.ceil(e11.y) - e11.y : e11.y = e11.y - Math.floor(e11.y);
          break;
      }
    return this.flipY && (e11.y = 1 - e11.y), e11;
  }
  set needsUpdate(e11) {
    e11 === true && (this.version++, this.source.needsUpdate = true);
  }
};
Wt7.DEFAULT_IMAGE = null;
Wt7.DEFAULT_MAPPING = sh2;
Wt7.DEFAULT_ANISOTROPY = 1;
var gt12 = class _gt {
  constructor(e11 = 0, t19 = 0, i27 = 0, r24 = 1) {
    _gt.prototype.isVector4 = true, this.x = e11, this.y = t19, this.z = i27, this.w = r24;
  }
  get width() {
    return this.z;
  }
  set width(e11) {
    this.z = e11;
  }
  get height() {
    return this.w;
  }
  set height(e11) {
    this.w = e11;
  }
  set(e11, t19, i27, r24) {
    return this.x = e11, this.y = t19, this.z = i27, this.w = r24, this;
  }
  setScalar(e11) {
    return this.x = e11, this.y = e11, this.z = e11, this.w = e11, this;
  }
  setX(e11) {
    return this.x = e11, this;
  }
  setY(e11) {
    return this.y = e11, this;
  }
  setZ(e11) {
    return this.z = e11, this;
  }
  setW(e11) {
    return this.w = e11, this;
  }
  setComponent(e11, t19) {
    switch (e11) {
      case 0:
        this.x = t19;
        break;
      case 1:
        this.y = t19;
        break;
      case 2:
        this.z = t19;
        break;
      case 3:
        this.w = t19;
        break;
      default:
        throw new Error("index is out of range: " + e11);
    }
    return this;
  }
  getComponent(e11) {
    switch (e11) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      case 2:
        return this.z;
      case 3:
        return this.w;
      default:
        throw new Error("index is out of range: " + e11);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y, this.z, this.w);
  }
  copy(e11) {
    return this.x = e11.x, this.y = e11.y, this.z = e11.z, this.w = e11.w !== void 0 ? e11.w : 1, this;
  }
  add(e11) {
    return this.x += e11.x, this.y += e11.y, this.z += e11.z, this.w += e11.w, this;
  }
  addScalar(e11) {
    return this.x += e11, this.y += e11, this.z += e11, this.w += e11, this;
  }
  addVectors(e11, t19) {
    return this.x = e11.x + t19.x, this.y = e11.y + t19.y, this.z = e11.z + t19.z, this.w = e11.w + t19.w, this;
  }
  addScaledVector(e11, t19) {
    return this.x += e11.x * t19, this.y += e11.y * t19, this.z += e11.z * t19, this.w += e11.w * t19, this;
  }
  sub(e11) {
    return this.x -= e11.x, this.y -= e11.y, this.z -= e11.z, this.w -= e11.w, this;
  }
  subScalar(e11) {
    return this.x -= e11, this.y -= e11, this.z -= e11, this.w -= e11, this;
  }
  subVectors(e11, t19) {
    return this.x = e11.x - t19.x, this.y = e11.y - t19.y, this.z = e11.z - t19.z, this.w = e11.w - t19.w, this;
  }
  multiply(e11) {
    return this.x *= e11.x, this.y *= e11.y, this.z *= e11.z, this.w *= e11.w, this;
  }
  multiplyScalar(e11) {
    return this.x *= e11, this.y *= e11, this.z *= e11, this.w *= e11, this;
  }
  applyMatrix4(e11) {
    const t19 = this.x, i27 = this.y, r24 = this.z, n33 = this.w, a22 = e11.elements;
    return this.x = a22[0] * t19 + a22[4] * i27 + a22[8] * r24 + a22[12] * n33, this.y = a22[1] * t19 + a22[5] * i27 + a22[9] * r24 + a22[13] * n33, this.z = a22[2] * t19 + a22[6] * i27 + a22[10] * r24 + a22[14] * n33, this.w = a22[3] * t19 + a22[7] * i27 + a22[11] * r24 + a22[15] * n33, this;
  }
  divideScalar(e11) {
    return this.multiplyScalar(1 / e11);
  }
  setAxisAngleFromQuaternion(e11) {
    this.w = 2 * Math.acos(e11.w);
    const t19 = Math.sqrt(1 - e11.w * e11.w);
    return t19 < 1e-4 ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = e11.x / t19, this.y = e11.y / t19, this.z = e11.z / t19), this;
  }
  setAxisAngleFromRotationMatrix(e11) {
    let t19, i27, r24, n33;
    const a22 = e11.elements, o13 = a22[0], l26 = a22[4], c27 = a22[8], h26 = a22[1], u35 = a22[5], d34 = a22[9], m34 = a22[2], _21 = a22[6], y34 = a22[10];
    if (Math.abs(l26 - h26) < 0.01 && Math.abs(c27 - m34) < 0.01 && Math.abs(d34 - _21) < 0.01) {
      if (Math.abs(l26 + h26) < 0.1 && Math.abs(c27 + m34) < 0.1 && Math.abs(d34 + _21) < 0.1 && Math.abs(o13 + u35 + y34 - 3) < 0.1)
        return this.set(1, 0, 0, 0), this;
      t19 = Math.PI;
      const p26 = (o13 + 1) / 2, A18 = (u35 + 1) / 2, M13 = (y34 + 1) / 2, E25 = (l26 + h26) / 4, w31 = (c27 + m34) / 4, I18 = (d34 + _21) / 4;
      return p26 > A18 && p26 > M13 ? p26 < 0.01 ? (i27 = 0, r24 = 0.707106781, n33 = 0.707106781) : (i27 = Math.sqrt(p26), r24 = E25 / i27, n33 = w31 / i27) : A18 > M13 ? A18 < 0.01 ? (i27 = 0.707106781, r24 = 0, n33 = 0.707106781) : (r24 = Math.sqrt(A18), i27 = E25 / r24, n33 = I18 / r24) : M13 < 0.01 ? (i27 = 0.707106781, r24 = 0.707106781, n33 = 0) : (n33 = Math.sqrt(M13), i27 = w31 / n33, r24 = I18 / n33), this.set(i27, r24, n33, t19), this;
    }
    let f40 = Math.sqrt((_21 - d34) * (_21 - d34) + (c27 - m34) * (c27 - m34) + (h26 - l26) * (h26 - l26));
    return Math.abs(f40) < 1e-3 && (f40 = 1), this.x = (_21 - d34) / f40, this.y = (c27 - m34) / f40, this.z = (h26 - l26) / f40, this.w = Math.acos((o13 + u35 + y34 - 1) / 2), this;
  }
  min(e11) {
    return this.x = Math.min(this.x, e11.x), this.y = Math.min(this.y, e11.y), this.z = Math.min(this.z, e11.z), this.w = Math.min(this.w, e11.w), this;
  }
  max(e11) {
    return this.x = Math.max(this.x, e11.x), this.y = Math.max(this.y, e11.y), this.z = Math.max(this.z, e11.z), this.w = Math.max(this.w, e11.w), this;
  }
  clamp(e11, t19) {
    return this.x = Math.max(e11.x, Math.min(t19.x, this.x)), this.y = Math.max(e11.y, Math.min(t19.y, this.y)), this.z = Math.max(e11.z, Math.min(t19.z, this.z)), this.w = Math.max(e11.w, Math.min(t19.w, this.w)), this;
  }
  clampScalar(e11, t19) {
    return this.x = Math.max(e11, Math.min(t19, this.x)), this.y = Math.max(e11, Math.min(t19, this.y)), this.z = Math.max(e11, Math.min(t19, this.z)), this.w = Math.max(e11, Math.min(t19, this.w)), this;
  }
  clampLength(e11, t19) {
    const i27 = this.length();
    return this.divideScalar(i27 || 1).multiplyScalar(Math.max(e11, Math.min(t19, i27)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this;
  }
  roundToZero() {
    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this;
  }
  dot(e11) {
    return this.x * e11.x + this.y * e11.y + this.z * e11.z + this.w * e11.w;
  }
  lengthSq() {
    return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  setLength(e11) {
    return this.normalize().multiplyScalar(e11);
  }
  lerp(e11, t19) {
    return this.x += (e11.x - this.x) * t19, this.y += (e11.y - this.y) * t19, this.z += (e11.z - this.z) * t19, this.w += (e11.w - this.w) * t19, this;
  }
  lerpVectors(e11, t19, i27) {
    return this.x = e11.x + (t19.x - e11.x) * i27, this.y = e11.y + (t19.y - e11.y) * i27, this.z = e11.z + (t19.z - e11.z) * i27, this.w = e11.w + (t19.w - e11.w) * i27, this;
  }
  equals(e11) {
    return e11.x === this.x && e11.y === this.y && e11.z === this.z && e11.w === this.w;
  }
  fromArray(e11, t19 = 0) {
    return this.x = e11[t19], this.y = e11[t19 + 1], this.z = e11[t19 + 2], this.w = e11[t19 + 3], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.x, e11[t19 + 1] = this.y, e11[t19 + 2] = this.z, e11[t19 + 3] = this.w, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.x = e11.getX(t19), this.y = e11.getY(t19), this.z = e11.getZ(t19), this.w = e11.getW(t19), this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this.z = Math.random(), this.w = Math.random(), this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y, yield this.z, yield this.w;
  }
};
var Mr5 = class extends Ar5 {
  constructor(e11 = 1, t19 = 1, i27 = {}) {
    super(), this.isWebGLRenderTarget = true, this.width = e11, this.height = t19, this.depth = 1, this.scissor = new gt12(0, 0, e11, t19), this.scissorTest = false, this.viewport = new gt12(0, 0, e11, t19);
    const r24 = { width: e11, height: t19, depth: 1 };
    this.texture = new Wt7(r24, i27.mapping, i27.wrapS, i27.wrapT, i27.magFilter, i27.minFilter, i27.format, i27.type, i27.anisotropy, i27.encoding), this.texture.isRenderTargetTexture = true, this.texture.flipY = false, this.texture.generateMipmaps = i27.generateMipmaps !== void 0 ? i27.generateMipmaps : false, this.texture.internalFormat = i27.internalFormat !== void 0 ? i27.internalFormat : null, this.texture.minFilter = i27.minFilter !== void 0 ? i27.minFilter : Vt6, this.depthBuffer = i27.depthBuffer !== void 0 ? i27.depthBuffer : true, this.stencilBuffer = i27.stencilBuffer !== void 0 ? i27.stencilBuffer : false, this.depthTexture = i27.depthTexture !== void 0 ? i27.depthTexture : null, this.samples = i27.samples !== void 0 ? i27.samples : 0;
  }
  setSize(e11, t19, i27 = 1) {
    (this.width !== e11 || this.height !== t19 || this.depth !== i27) && (this.width = e11, this.height = t19, this.depth = i27, this.texture.image.width = e11, this.texture.image.height = t19, this.texture.image.depth = i27, this.dispose()), this.viewport.set(0, 0, e11, t19), this.scissor.set(0, 0, e11, t19);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    this.width = e11.width, this.height = e11.height, this.depth = e11.depth, this.viewport.copy(e11.viewport), this.texture = e11.texture.clone(), this.texture.isRenderTargetTexture = true;
    const t19 = Object.assign({}, e11.texture.image);
    return this.texture.source = new mh2(t19), this.depthBuffer = e11.depthBuffer, this.stencilBuffer = e11.stencilBuffer, e11.depthTexture !== null && (this.depthTexture = e11.depthTexture.clone()), this.samples = e11.samples, this;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
};
var fh2 = class extends Wt7 {
  constructor(e11 = null, t19 = 1, i27 = 1, r24 = 1) {
    super(null), this.isDataArrayTexture = true, this.image = { data: e11, width: t19, height: i27, depth: r24 }, this.magFilter = zt6, this.minFilter = zt6, this.wrapR = Zt6, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1;
  }
};
var bd2 = class extends Wt7 {
  constructor(e11 = null, t19 = 1, i27 = 1, r24 = 1) {
    super(null), this.isData3DTexture = true, this.image = { data: e11, width: t19, height: i27, depth: r24 }, this.magFilter = zt6, this.minFilter = zt6, this.wrapR = Zt6, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1;
  }
};
var jt8 = class {
  constructor(e11 = 0, t19 = 0, i27 = 0, r24 = 1) {
    this.isQuaternion = true, this._x = e11, this._y = t19, this._z = i27, this._w = r24;
  }
  static slerpFlat(e11, t19, i27, r24, n33, a22, o13) {
    let l26 = i27[r24 + 0], c27 = i27[r24 + 1], h26 = i27[r24 + 2], u35 = i27[r24 + 3];
    const d34 = n33[a22 + 0], m34 = n33[a22 + 1], _21 = n33[a22 + 2], y34 = n33[a22 + 3];
    if (o13 === 0) {
      e11[t19 + 0] = l26, e11[t19 + 1] = c27, e11[t19 + 2] = h26, e11[t19 + 3] = u35;
      return;
    }
    if (o13 === 1) {
      e11[t19 + 0] = d34, e11[t19 + 1] = m34, e11[t19 + 2] = _21, e11[t19 + 3] = y34;
      return;
    }
    if (u35 !== y34 || l26 !== d34 || c27 !== m34 || h26 !== _21) {
      let f40 = 1 - o13;
      const p26 = l26 * d34 + c27 * m34 + h26 * _21 + u35 * y34, A18 = p26 >= 0 ? 1 : -1, M13 = 1 - p26 * p26;
      if (M13 > Number.EPSILON) {
        const w31 = Math.sqrt(M13), I18 = Math.atan2(w31, p26 * A18);
        f40 = Math.sin(f40 * I18) / w31, o13 = Math.sin(o13 * I18) / w31;
      }
      const E25 = o13 * A18;
      if (l26 = l26 * f40 + d34 * E25, c27 = c27 * f40 + m34 * E25, h26 = h26 * f40 + _21 * E25, u35 = u35 * f40 + y34 * E25, f40 === 1 - o13) {
        const w31 = 1 / Math.sqrt(l26 * l26 + c27 * c27 + h26 * h26 + u35 * u35);
        l26 *= w31, c27 *= w31, h26 *= w31, u35 *= w31;
      }
    }
    e11[t19] = l26, e11[t19 + 1] = c27, e11[t19 + 2] = h26, e11[t19 + 3] = u35;
  }
  static multiplyQuaternionsFlat(e11, t19, i27, r24, n33, a22) {
    const o13 = i27[r24], l26 = i27[r24 + 1], c27 = i27[r24 + 2], h26 = i27[r24 + 3], u35 = n33[a22], d34 = n33[a22 + 1], m34 = n33[a22 + 2], _21 = n33[a22 + 3];
    return e11[t19] = o13 * _21 + h26 * u35 + l26 * m34 - c27 * d34, e11[t19 + 1] = l26 * _21 + h26 * d34 + c27 * u35 - o13 * m34, e11[t19 + 2] = c27 * _21 + h26 * m34 + o13 * d34 - l26 * u35, e11[t19 + 3] = h26 * _21 - o13 * u35 - l26 * d34 - c27 * m34, e11;
  }
  get x() {
    return this._x;
  }
  set x(e11) {
    this._x = e11, this._onChangeCallback();
  }
  get y() {
    return this._y;
  }
  set y(e11) {
    this._y = e11, this._onChangeCallback();
  }
  get z() {
    return this._z;
  }
  set z(e11) {
    this._z = e11, this._onChangeCallback();
  }
  get w() {
    return this._w;
  }
  set w(e11) {
    this._w = e11, this._onChangeCallback();
  }
  set(e11, t19, i27, r24) {
    return this._x = e11, this._y = t19, this._z = i27, this._w = r24, this._onChangeCallback(), this;
  }
  clone() {
    return new this.constructor(this._x, this._y, this._z, this._w);
  }
  copy(e11) {
    return this._x = e11.x, this._y = e11.y, this._z = e11.z, this._w = e11.w, this._onChangeCallback(), this;
  }
  setFromEuler(e11, t19) {
    const i27 = e11._x, r24 = e11._y, n33 = e11._z, a22 = e11._order, o13 = Math.cos, l26 = Math.sin, c27 = o13(i27 / 2), h26 = o13(r24 / 2), u35 = o13(n33 / 2), d34 = l26(i27 / 2), m34 = l26(r24 / 2), _21 = l26(n33 / 2);
    switch (a22) {
      case "XYZ":
        this._x = d34 * h26 * u35 + c27 * m34 * _21, this._y = c27 * m34 * u35 - d34 * h26 * _21, this._z = c27 * h26 * _21 + d34 * m34 * u35, this._w = c27 * h26 * u35 - d34 * m34 * _21;
        break;
      case "YXZ":
        this._x = d34 * h26 * u35 + c27 * m34 * _21, this._y = c27 * m34 * u35 - d34 * h26 * _21, this._z = c27 * h26 * _21 - d34 * m34 * u35, this._w = c27 * h26 * u35 + d34 * m34 * _21;
        break;
      case "ZXY":
        this._x = d34 * h26 * u35 - c27 * m34 * _21, this._y = c27 * m34 * u35 + d34 * h26 * _21, this._z = c27 * h26 * _21 + d34 * m34 * u35, this._w = c27 * h26 * u35 - d34 * m34 * _21;
        break;
      case "ZYX":
        this._x = d34 * h26 * u35 - c27 * m34 * _21, this._y = c27 * m34 * u35 + d34 * h26 * _21, this._z = c27 * h26 * _21 - d34 * m34 * u35, this._w = c27 * h26 * u35 + d34 * m34 * _21;
        break;
      case "YZX":
        this._x = d34 * h26 * u35 + c27 * m34 * _21, this._y = c27 * m34 * u35 + d34 * h26 * _21, this._z = c27 * h26 * _21 - d34 * m34 * u35, this._w = c27 * h26 * u35 - d34 * m34 * _21;
        break;
      case "XZY":
        this._x = d34 * h26 * u35 - c27 * m34 * _21, this._y = c27 * m34 * u35 - d34 * h26 * _21, this._z = c27 * h26 * _21 + d34 * m34 * u35, this._w = c27 * h26 * u35 + d34 * m34 * _21;
        break;
      default:
        console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: " + a22);
    }
    return t19 !== false && this._onChangeCallback(), this;
  }
  setFromAxisAngle(e11, t19) {
    const i27 = t19 / 2, r24 = Math.sin(i27);
    return this._x = e11.x * r24, this._y = e11.y * r24, this._z = e11.z * r24, this._w = Math.cos(i27), this._onChangeCallback(), this;
  }
  setFromRotationMatrix(e11) {
    const t19 = e11.elements, i27 = t19[0], r24 = t19[4], n33 = t19[8], a22 = t19[1], o13 = t19[5], l26 = t19[9], c27 = t19[2], h26 = t19[6], u35 = t19[10], d34 = i27 + o13 + u35;
    if (d34 > 0) {
      const m34 = 0.5 / Math.sqrt(d34 + 1);
      this._w = 0.25 / m34, this._x = (h26 - l26) * m34, this._y = (n33 - c27) * m34, this._z = (a22 - r24) * m34;
    } else if (i27 > o13 && i27 > u35) {
      const m34 = 2 * Math.sqrt(1 + i27 - o13 - u35);
      this._w = (h26 - l26) / m34, this._x = 0.25 * m34, this._y = (r24 + a22) / m34, this._z = (n33 + c27) / m34;
    } else if (o13 > u35) {
      const m34 = 2 * Math.sqrt(1 + o13 - i27 - u35);
      this._w = (n33 - c27) / m34, this._x = (r24 + a22) / m34, this._y = 0.25 * m34, this._z = (l26 + h26) / m34;
    } else {
      const m34 = 2 * Math.sqrt(1 + u35 - i27 - o13);
      this._w = (a22 - r24) / m34, this._x = (n33 + c27) / m34, this._y = (l26 + h26) / m34, this._z = 0.25 * m34;
    }
    return this._onChangeCallback(), this;
  }
  setFromUnitVectors(e11, t19) {
    let i27 = e11.dot(t19) + 1;
    return i27 < Number.EPSILON ? (i27 = 0, Math.abs(e11.x) > Math.abs(e11.z) ? (this._x = -e11.y, this._y = e11.x, this._z = 0, this._w = i27) : (this._x = 0, this._y = -e11.z, this._z = e11.y, this._w = i27)) : (this._x = e11.y * t19.z - e11.z * t19.y, this._y = e11.z * t19.x - e11.x * t19.z, this._z = e11.x * t19.y - e11.y * t19.x, this._w = i27), this.normalize();
  }
  angleTo(e11) {
    return 2 * Math.acos(Math.abs(Gt6(this.dot(e11), -1, 1)));
  }
  rotateTowards(e11, t19) {
    const i27 = this.angleTo(e11);
    if (i27 === 0)
      return this;
    const r24 = Math.min(1, t19 / i27);
    return this.slerp(e11, r24), this;
  }
  identity() {
    return this.set(0, 0, 0, 1);
  }
  invert() {
    return this.conjugate();
  }
  conjugate() {
    return this._x *= -1, this._y *= -1, this._z *= -1, this._onChangeCallback(), this;
  }
  dot(e11) {
    return this._x * e11._x + this._y * e11._y + this._z * e11._z + this._w * e11._w;
  }
  lengthSq() {
    return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;
  }
  length() {
    return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w);
  }
  normalize() {
    let e11 = this.length();
    return e11 === 0 ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (e11 = 1 / e11, this._x = this._x * e11, this._y = this._y * e11, this._z = this._z * e11, this._w = this._w * e11), this._onChangeCallback(), this;
  }
  multiply(e11) {
    return this.multiplyQuaternions(this, e11);
  }
  premultiply(e11) {
    return this.multiplyQuaternions(e11, this);
  }
  multiplyQuaternions(e11, t19) {
    const i27 = e11._x, r24 = e11._y, n33 = e11._z, a22 = e11._w, o13 = t19._x, l26 = t19._y, c27 = t19._z, h26 = t19._w;
    return this._x = i27 * h26 + a22 * o13 + r24 * c27 - n33 * l26, this._y = r24 * h26 + a22 * l26 + n33 * o13 - i27 * c27, this._z = n33 * h26 + a22 * c27 + i27 * l26 - r24 * o13, this._w = a22 * h26 - i27 * o13 - r24 * l26 - n33 * c27, this._onChangeCallback(), this;
  }
  slerp(e11, t19) {
    if (t19 === 0)
      return this;
    if (t19 === 1)
      return this.copy(e11);
    const i27 = this._x, r24 = this._y, n33 = this._z, a22 = this._w;
    let o13 = a22 * e11._w + i27 * e11._x + r24 * e11._y + n33 * e11._z;
    if (o13 < 0 ? (this._w = -e11._w, this._x = -e11._x, this._y = -e11._y, this._z = -e11._z, o13 = -o13) : this.copy(e11), o13 >= 1)
      return this._w = a22, this._x = i27, this._y = r24, this._z = n33, this;
    const l26 = 1 - o13 * o13;
    if (l26 <= Number.EPSILON) {
      const m34 = 1 - t19;
      return this._w = m34 * a22 + t19 * this._w, this._x = m34 * i27 + t19 * this._x, this._y = m34 * r24 + t19 * this._y, this._z = m34 * n33 + t19 * this._z, this.normalize(), this._onChangeCallback(), this;
    }
    const c27 = Math.sqrt(l26), h26 = Math.atan2(c27, o13), u35 = Math.sin((1 - t19) * h26) / c27, d34 = Math.sin(t19 * h26) / c27;
    return this._w = a22 * u35 + this._w * d34, this._x = i27 * u35 + this._x * d34, this._y = r24 * u35 + this._y * d34, this._z = n33 * u35 + this._z * d34, this._onChangeCallback(), this;
  }
  slerpQuaternions(e11, t19, i27) {
    return this.copy(e11).slerp(t19, i27);
  }
  random() {
    const e11 = Math.random(), t19 = Math.sqrt(1 - e11), i27 = Math.sqrt(e11), r24 = 2 * Math.PI * Math.random(), n33 = 2 * Math.PI * Math.random();
    return this.set(
      t19 * Math.cos(r24),
      i27 * Math.sin(n33),
      i27 * Math.cos(n33),
      t19 * Math.sin(r24)
    );
  }
  equals(e11) {
    return e11._x === this._x && e11._y === this._y && e11._z === this._z && e11._w === this._w;
  }
  fromArray(e11, t19 = 0) {
    return this._x = e11[t19], this._y = e11[t19 + 1], this._z = e11[t19 + 2], this._w = e11[t19 + 3], this._onChangeCallback(), this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this._x, e11[t19 + 1] = this._y, e11[t19 + 2] = this._z, e11[t19 + 3] = this._w, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this._x = e11.getX(t19), this._y = e11.getY(t19), this._z = e11.getZ(t19), this._w = e11.getW(t19), this;
  }
  toJSON() {
    return this.toArray();
  }
  _onChange(e11) {
    return this._onChangeCallback = e11, this;
  }
  _onChangeCallback() {
  }
  *[Symbol.iterator]() {
    yield this._x, yield this._y, yield this._z, yield this._w;
  }
};
var k20 = class _k {
  constructor(e11 = 0, t19 = 0, i27 = 0) {
    _k.prototype.isVector3 = true, this.x = e11, this.y = t19, this.z = i27;
  }
  set(e11, t19, i27) {
    return i27 === void 0 && (i27 = this.z), this.x = e11, this.y = t19, this.z = i27, this;
  }
  setScalar(e11) {
    return this.x = e11, this.y = e11, this.z = e11, this;
  }
  setX(e11) {
    return this.x = e11, this;
  }
  setY(e11) {
    return this.y = e11, this;
  }
  setZ(e11) {
    return this.z = e11, this;
  }
  setComponent(e11, t19) {
    switch (e11) {
      case 0:
        this.x = t19;
        break;
      case 1:
        this.y = t19;
        break;
      case 2:
        this.z = t19;
        break;
      default:
        throw new Error("index is out of range: " + e11);
    }
    return this;
  }
  getComponent(e11) {
    switch (e11) {
      case 0:
        return this.x;
      case 1:
        return this.y;
      case 2:
        return this.z;
      default:
        throw new Error("index is out of range: " + e11);
    }
  }
  clone() {
    return new this.constructor(this.x, this.y, this.z);
  }
  copy(e11) {
    return this.x = e11.x, this.y = e11.y, this.z = e11.z, this;
  }
  add(e11) {
    return this.x += e11.x, this.y += e11.y, this.z += e11.z, this;
  }
  addScalar(e11) {
    return this.x += e11, this.y += e11, this.z += e11, this;
  }
  addVectors(e11, t19) {
    return this.x = e11.x + t19.x, this.y = e11.y + t19.y, this.z = e11.z + t19.z, this;
  }
  addScaledVector(e11, t19) {
    return this.x += e11.x * t19, this.y += e11.y * t19, this.z += e11.z * t19, this;
  }
  sub(e11) {
    return this.x -= e11.x, this.y -= e11.y, this.z -= e11.z, this;
  }
  subScalar(e11) {
    return this.x -= e11, this.y -= e11, this.z -= e11, this;
  }
  subVectors(e11, t19) {
    return this.x = e11.x - t19.x, this.y = e11.y - t19.y, this.z = e11.z - t19.z, this;
  }
  multiply(e11) {
    return this.x *= e11.x, this.y *= e11.y, this.z *= e11.z, this;
  }
  multiplyScalar(e11) {
    return this.x *= e11, this.y *= e11, this.z *= e11, this;
  }
  multiplyVectors(e11, t19) {
    return this.x = e11.x * t19.x, this.y = e11.y * t19.y, this.z = e11.z * t19.z, this;
  }
  applyEuler(e11) {
    return this.applyQuaternion(Dl2.setFromEuler(e11));
  }
  applyAxisAngle(e11, t19) {
    return this.applyQuaternion(Dl2.setFromAxisAngle(e11, t19));
  }
  applyMatrix3(e11) {
    const t19 = this.x, i27 = this.y, r24 = this.z, n33 = e11.elements;
    return this.x = n33[0] * t19 + n33[3] * i27 + n33[6] * r24, this.y = n33[1] * t19 + n33[4] * i27 + n33[7] * r24, this.z = n33[2] * t19 + n33[5] * i27 + n33[8] * r24, this;
  }
  applyNormalMatrix(e11) {
    return this.applyMatrix3(e11).normalize();
  }
  applyMatrix4(e11) {
    const t19 = this.x, i27 = this.y, r24 = this.z, n33 = e11.elements, a22 = 1 / (n33[3] * t19 + n33[7] * i27 + n33[11] * r24 + n33[15]);
    return this.x = (n33[0] * t19 + n33[4] * i27 + n33[8] * r24 + n33[12]) * a22, this.y = (n33[1] * t19 + n33[5] * i27 + n33[9] * r24 + n33[13]) * a22, this.z = (n33[2] * t19 + n33[6] * i27 + n33[10] * r24 + n33[14]) * a22, this;
  }
  applyQuaternion(e11) {
    const t19 = this.x, i27 = this.y, r24 = this.z, n33 = e11.x, a22 = e11.y, o13 = e11.z, l26 = e11.w, c27 = l26 * t19 + a22 * r24 - o13 * i27, h26 = l26 * i27 + o13 * t19 - n33 * r24, u35 = l26 * r24 + n33 * i27 - a22 * t19, d34 = -n33 * t19 - a22 * i27 - o13 * r24;
    return this.x = c27 * l26 + d34 * -n33 + h26 * -o13 - u35 * -a22, this.y = h26 * l26 + d34 * -a22 + u35 * -n33 - c27 * -o13, this.z = u35 * l26 + d34 * -o13 + c27 * -a22 - h26 * -n33, this;
  }
  project(e11) {
    return this.applyMatrix4(e11.matrixWorldInverse).applyMatrix4(e11.projectionMatrix);
  }
  unproject(e11) {
    return this.applyMatrix4(e11.projectionMatrixInverse).applyMatrix4(e11.matrixWorld);
  }
  transformDirection(e11) {
    const t19 = this.x, i27 = this.y, r24 = this.z, n33 = e11.elements;
    return this.x = n33[0] * t19 + n33[4] * i27 + n33[8] * r24, this.y = n33[1] * t19 + n33[5] * i27 + n33[9] * r24, this.z = n33[2] * t19 + n33[6] * i27 + n33[10] * r24, this.normalize();
  }
  divide(e11) {
    return this.x /= e11.x, this.y /= e11.y, this.z /= e11.z, this;
  }
  divideScalar(e11) {
    return this.multiplyScalar(1 / e11);
  }
  min(e11) {
    return this.x = Math.min(this.x, e11.x), this.y = Math.min(this.y, e11.y), this.z = Math.min(this.z, e11.z), this;
  }
  max(e11) {
    return this.x = Math.max(this.x, e11.x), this.y = Math.max(this.y, e11.y), this.z = Math.max(this.z, e11.z), this;
  }
  clamp(e11, t19) {
    return this.x = Math.max(e11.x, Math.min(t19.x, this.x)), this.y = Math.max(e11.y, Math.min(t19.y, this.y)), this.z = Math.max(e11.z, Math.min(t19.z, this.z)), this;
  }
  clampScalar(e11, t19) {
    return this.x = Math.max(e11, Math.min(t19, this.x)), this.y = Math.max(e11, Math.min(t19, this.y)), this.z = Math.max(e11, Math.min(t19, this.z)), this;
  }
  clampLength(e11, t19) {
    const i27 = this.length();
    return this.divideScalar(i27 || 1).multiplyScalar(Math.max(e11, Math.min(t19, i27)));
  }
  floor() {
    return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this;
  }
  ceil() {
    return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this;
  }
  round() {
    return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this;
  }
  roundToZero() {
    return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this;
  }
  negate() {
    return this.x = -this.x, this.y = -this.y, this.z = -this.z, this;
  }
  dot(e11) {
    return this.x * e11.x + this.y * e11.y + this.z * e11.z;
  }
  // TODO lengthSquared?
  lengthSq() {
    return this.x * this.x + this.y * this.y + this.z * this.z;
  }
  length() {
    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
  }
  manhattanLength() {
    return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
  }
  normalize() {
    return this.divideScalar(this.length() || 1);
  }
  setLength(e11) {
    return this.normalize().multiplyScalar(e11);
  }
  lerp(e11, t19) {
    return this.x += (e11.x - this.x) * t19, this.y += (e11.y - this.y) * t19, this.z += (e11.z - this.z) * t19, this;
  }
  lerpVectors(e11, t19, i27) {
    return this.x = e11.x + (t19.x - e11.x) * i27, this.y = e11.y + (t19.y - e11.y) * i27, this.z = e11.z + (t19.z - e11.z) * i27, this;
  }
  cross(e11) {
    return this.crossVectors(this, e11);
  }
  crossVectors(e11, t19) {
    const i27 = e11.x, r24 = e11.y, n33 = e11.z, a22 = t19.x, o13 = t19.y, l26 = t19.z;
    return this.x = r24 * l26 - n33 * o13, this.y = n33 * a22 - i27 * l26, this.z = i27 * o13 - r24 * a22, this;
  }
  projectOnVector(e11) {
    const t19 = e11.lengthSq();
    if (t19 === 0)
      return this.set(0, 0, 0);
    const i27 = e11.dot(this) / t19;
    return this.copy(e11).multiplyScalar(i27);
  }
  projectOnPlane(e11) {
    return Pa2.copy(this).projectOnVector(e11), this.sub(Pa2);
  }
  reflect(e11) {
    return this.sub(Pa2.copy(e11).multiplyScalar(2 * this.dot(e11)));
  }
  angleTo(e11) {
    const t19 = Math.sqrt(this.lengthSq() * e11.lengthSq());
    if (t19 === 0)
      return Math.PI / 2;
    const i27 = this.dot(e11) / t19;
    return Math.acos(Gt6(i27, -1, 1));
  }
  distanceTo(e11) {
    return Math.sqrt(this.distanceToSquared(e11));
  }
  distanceToSquared(e11) {
    const t19 = this.x - e11.x, i27 = this.y - e11.y, r24 = this.z - e11.z;
    return t19 * t19 + i27 * i27 + r24 * r24;
  }
  manhattanDistanceTo(e11) {
    return Math.abs(this.x - e11.x) + Math.abs(this.y - e11.y) + Math.abs(this.z - e11.z);
  }
  setFromSpherical(e11) {
    return this.setFromSphericalCoords(e11.radius, e11.phi, e11.theta);
  }
  setFromSphericalCoords(e11, t19, i27) {
    const r24 = Math.sin(t19) * e11;
    return this.x = r24 * Math.sin(i27), this.y = Math.cos(t19) * e11, this.z = r24 * Math.cos(i27), this;
  }
  setFromCylindrical(e11) {
    return this.setFromCylindricalCoords(e11.radius, e11.theta, e11.y);
  }
  setFromCylindricalCoords(e11, t19, i27) {
    return this.x = e11 * Math.sin(t19), this.y = i27, this.z = e11 * Math.cos(t19), this;
  }
  setFromMatrixPosition(e11) {
    const t19 = e11.elements;
    return this.x = t19[12], this.y = t19[13], this.z = t19[14], this;
  }
  setFromMatrixScale(e11) {
    const t19 = this.setFromMatrixColumn(e11, 0).length(), i27 = this.setFromMatrixColumn(e11, 1).length(), r24 = this.setFromMatrixColumn(e11, 2).length();
    return this.x = t19, this.y = i27, this.z = r24, this;
  }
  setFromMatrixColumn(e11, t19) {
    return this.fromArray(e11.elements, t19 * 4);
  }
  setFromMatrix3Column(e11, t19) {
    return this.fromArray(e11.elements, t19 * 3);
  }
  setFromEuler(e11) {
    return this.x = e11._x, this.y = e11._y, this.z = e11._z, this;
  }
  setFromColor(e11) {
    return this.x = e11.r, this.y = e11.g, this.z = e11.b, this;
  }
  equals(e11) {
    return e11.x === this.x && e11.y === this.y && e11.z === this.z;
  }
  fromArray(e11, t19 = 0) {
    return this.x = e11[t19], this.y = e11[t19 + 1], this.z = e11[t19 + 2], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.x, e11[t19 + 1] = this.y, e11[t19 + 2] = this.z, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.x = e11.getX(t19), this.y = e11.getY(t19), this.z = e11.getZ(t19), this;
  }
  random() {
    return this.x = Math.random(), this.y = Math.random(), this.z = Math.random(), this;
  }
  randomDirection() {
    const e11 = (Math.random() - 0.5) * 2, t19 = Math.random() * Math.PI * 2, i27 = Math.sqrt(1 - e11 ** 2);
    return this.x = i27 * Math.cos(t19), this.y = i27 * Math.sin(t19), this.z = e11, this;
  }
  *[Symbol.iterator]() {
    yield this.x, yield this.y, yield this.z;
  }
};
var Pa2 = new k20();
var Dl2 = new jt8();
var Vi3 = class {
  constructor(e11 = new k20(1 / 0, 1 / 0, 1 / 0), t19 = new k20(-1 / 0, -1 / 0, -1 / 0)) {
    this.isBox3 = true, this.min = e11, this.max = t19;
  }
  set(e11, t19) {
    return this.min.copy(e11), this.max.copy(t19), this;
  }
  setFromArray(e11) {
    this.makeEmpty();
    for (let t19 = 0, i27 = e11.length; t19 < i27; t19 += 3)
      this.expandByPoint(Pi4.fromArray(e11, t19));
    return this;
  }
  setFromBufferAttribute(e11) {
    this.makeEmpty();
    for (let t19 = 0, i27 = e11.count; t19 < i27; t19++)
      this.expandByPoint(Pi4.fromBufferAttribute(e11, t19));
    return this;
  }
  setFromPoints(e11) {
    this.makeEmpty();
    for (let t19 = 0, i27 = e11.length; t19 < i27; t19++)
      this.expandByPoint(e11[t19]);
    return this;
  }
  setFromCenterAndSize(e11, t19) {
    const i27 = Pi4.copy(t19).multiplyScalar(0.5);
    return this.min.copy(e11).sub(i27), this.max.copy(e11).add(i27), this;
  }
  setFromObject(e11, t19 = false) {
    return this.makeEmpty(), this.expandByObject(e11, t19);
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    return this.min.copy(e11.min), this.max.copy(e11.max), this;
  }
  makeEmpty() {
    return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, this;
  }
  isEmpty() {
    return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z;
  }
  getCenter(e11) {
    return this.isEmpty() ? e11.set(0, 0, 0) : e11.addVectors(this.min, this.max).multiplyScalar(0.5);
  }
  getSize(e11) {
    return this.isEmpty() ? e11.set(0, 0, 0) : e11.subVectors(this.max, this.min);
  }
  expandByPoint(e11) {
    return this.min.min(e11), this.max.max(e11), this;
  }
  expandByVector(e11) {
    return this.min.sub(e11), this.max.add(e11), this;
  }
  expandByScalar(e11) {
    return this.min.addScalar(-e11), this.max.addScalar(e11), this;
  }
  expandByObject(e11, t19 = false) {
    if (e11.updateWorldMatrix(false, false), e11.boundingBox !== void 0)
      e11.boundingBox === null && e11.computeBoundingBox(), Vr5.copy(e11.boundingBox), Vr5.applyMatrix4(e11.matrixWorld), this.union(Vr5);
    else {
      const r24 = e11.geometry;
      if (r24 !== void 0)
        if (t19 && r24.attributes !== void 0 && r24.attributes.position !== void 0) {
          const n33 = r24.attributes.position;
          for (let a22 = 0, o13 = n33.count; a22 < o13; a22++)
            Pi4.fromBufferAttribute(n33, a22).applyMatrix4(e11.matrixWorld), this.expandByPoint(Pi4);
        } else
          r24.boundingBox === null && r24.computeBoundingBox(), Vr5.copy(r24.boundingBox), Vr5.applyMatrix4(e11.matrixWorld), this.union(Vr5);
    }
    const i27 = e11.children;
    for (let r24 = 0, n33 = i27.length; r24 < n33; r24++)
      this.expandByObject(i27[r24], t19);
    return this;
  }
  containsPoint(e11) {
    return !(e11.x < this.min.x || e11.x > this.max.x || e11.y < this.min.y || e11.y > this.max.y || e11.z < this.min.z || e11.z > this.max.z);
  }
  containsBox(e11) {
    return this.min.x <= e11.min.x && e11.max.x <= this.max.x && this.min.y <= e11.min.y && e11.max.y <= this.max.y && this.min.z <= e11.min.z && e11.max.z <= this.max.z;
  }
  getParameter(e11, t19) {
    return t19.set(
      (e11.x - this.min.x) / (this.max.x - this.min.x),
      (e11.y - this.min.y) / (this.max.y - this.min.y),
      (e11.z - this.min.z) / (this.max.z - this.min.z)
    );
  }
  intersectsBox(e11) {
    return !(e11.max.x < this.min.x || e11.min.x > this.max.x || e11.max.y < this.min.y || e11.min.y > this.max.y || e11.max.z < this.min.z || e11.min.z > this.max.z);
  }
  intersectsSphere(e11) {
    return this.clampPoint(e11.center, Pi4), Pi4.distanceToSquared(e11.center) <= e11.radius * e11.radius;
  }
  intersectsPlane(e11) {
    let t19, i27;
    return e11.normal.x > 0 ? (t19 = e11.normal.x * this.min.x, i27 = e11.normal.x * this.max.x) : (t19 = e11.normal.x * this.max.x, i27 = e11.normal.x * this.min.x), e11.normal.y > 0 ? (t19 += e11.normal.y * this.min.y, i27 += e11.normal.y * this.max.y) : (t19 += e11.normal.y * this.max.y, i27 += e11.normal.y * this.min.y), e11.normal.z > 0 ? (t19 += e11.normal.z * this.min.z, i27 += e11.normal.z * this.max.z) : (t19 += e11.normal.z * this.max.z, i27 += e11.normal.z * this.min.z), t19 <= -e11.constant && i27 >= -e11.constant;
  }
  intersectsTriangle(e11) {
    if (this.isEmpty())
      return false;
    this.getCenter(Un4), gs2.subVectors(this.max, Un4), Gr5.subVectors(e11.a, Un4), Wr5.subVectors(e11.b, Un4), jr5.subVectors(e11.c, Un4), Xi3.subVectors(Wr5, Gr5), qi3.subVectors(jr5, Wr5), ar5.subVectors(Gr5, jr5);
    let t19 = [
      0,
      -Xi3.z,
      Xi3.y,
      0,
      -qi3.z,
      qi3.y,
      0,
      -ar5.z,
      ar5.y,
      Xi3.z,
      0,
      -Xi3.x,
      qi3.z,
      0,
      -qi3.x,
      ar5.z,
      0,
      -ar5.x,
      -Xi3.y,
      Xi3.x,
      0,
      -qi3.y,
      qi3.x,
      0,
      -ar5.y,
      ar5.x,
      0
    ];
    return !Ia2(t19, Gr5, Wr5, jr5, gs2) || (t19 = [1, 0, 0, 0, 1, 0, 0, 0, 1], !Ia2(t19, Gr5, Wr5, jr5, gs2)) ? false : (_s3.crossVectors(Xi3, qi3), t19 = [_s3.x, _s3.y, _s3.z], Ia2(t19, Gr5, Wr5, jr5, gs2));
  }
  clampPoint(e11, t19) {
    return t19.copy(e11).clamp(this.min, this.max);
  }
  distanceToPoint(e11) {
    return this.clampPoint(e11, Pi4).distanceTo(e11);
  }
  getBoundingSphere(e11) {
    return this.isEmpty() ? e11.makeEmpty() : (this.getCenter(e11.center), e11.radius = this.getSize(Pi4).length() * 0.5), e11;
  }
  intersect(e11) {
    return this.min.max(e11.min), this.max.min(e11.max), this.isEmpty() && this.makeEmpty(), this;
  }
  union(e11) {
    return this.min.min(e11.min), this.max.max(e11.max), this;
  }
  applyMatrix4(e11) {
    return this.isEmpty() ? this : (Ni6[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(e11), Ni6[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(e11), Ni6[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(e11), Ni6[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(e11), Ni6[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(e11), Ni6[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(e11), Ni6[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(e11), Ni6[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(e11), this.setFromPoints(Ni6), this);
  }
  translate(e11) {
    return this.min.add(e11), this.max.add(e11), this;
  }
  equals(e11) {
    return e11.min.equals(this.min) && e11.max.equals(this.max);
  }
};
var Ni6 = [
  new k20(),
  new k20(),
  new k20(),
  new k20(),
  new k20(),
  new k20(),
  new k20(),
  new k20()
];
var Pi4 = new k20();
var Vr5 = new Vi3();
var Gr5 = new k20();
var Wr5 = new k20();
var jr5 = new k20();
var Xi3 = new k20();
var qi3 = new k20();
var ar5 = new k20();
var Un4 = new k20();
var gs2 = new k20();
var _s3 = new k20();
var or5 = new k20();
function Ia2(s18, e11, t19, i27, r24) {
  for (let n33 = 0, a22 = s18.length - 3; n33 <= a22; n33 += 3) {
    or5.fromArray(s18, n33);
    const o13 = r24.x * Math.abs(or5.x) + r24.y * Math.abs(or5.y) + r24.z * Math.abs(or5.z), l26 = e11.dot(or5), c27 = t19.dot(or5), h26 = i27.dot(or5);
    if (Math.max(-Math.max(l26, c27, h26), Math.min(l26, c27, h26)) > o13)
      return false;
  }
  return true;
}
var Md2 = new Vi3();
var On5 = new k20();
var Da2 = new k20();
var Gi2 = class {
  constructor(e11 = new k20(), t19 = -1) {
    this.center = e11, this.radius = t19;
  }
  set(e11, t19) {
    return this.center.copy(e11), this.radius = t19, this;
  }
  setFromPoints(e11, t19) {
    const i27 = this.center;
    t19 !== void 0 ? i27.copy(t19) : Md2.setFromPoints(e11).getCenter(i27);
    let r24 = 0;
    for (let n33 = 0, a22 = e11.length; n33 < a22; n33++)
      r24 = Math.max(r24, i27.distanceToSquared(e11[n33]));
    return this.radius = Math.sqrt(r24), this;
  }
  copy(e11) {
    return this.center.copy(e11.center), this.radius = e11.radius, this;
  }
  isEmpty() {
    return this.radius < 0;
  }
  makeEmpty() {
    return this.center.set(0, 0, 0), this.radius = -1, this;
  }
  containsPoint(e11) {
    return e11.distanceToSquared(this.center) <= this.radius * this.radius;
  }
  distanceToPoint(e11) {
    return e11.distanceTo(this.center) - this.radius;
  }
  intersectsSphere(e11) {
    const t19 = this.radius + e11.radius;
    return e11.center.distanceToSquared(this.center) <= t19 * t19;
  }
  intersectsBox(e11) {
    return e11.intersectsSphere(this);
  }
  intersectsPlane(e11) {
    return Math.abs(e11.distanceToPoint(this.center)) <= this.radius;
  }
  clampPoint(e11, t19) {
    const i27 = this.center.distanceToSquared(e11);
    return t19.copy(e11), i27 > this.radius * this.radius && (t19.sub(this.center).normalize(), t19.multiplyScalar(this.radius).add(this.center)), t19;
  }
  getBoundingBox(e11) {
    return this.isEmpty() ? (e11.makeEmpty(), e11) : (e11.set(this.center, this.center), e11.expandByScalar(this.radius), e11);
  }
  applyMatrix4(e11) {
    return this.center.applyMatrix4(e11), this.radius = this.radius * e11.getMaxScaleOnAxis(), this;
  }
  translate(e11) {
    return this.center.add(e11), this;
  }
  expandByPoint(e11) {
    if (this.isEmpty())
      return this.center.copy(e11), this.radius = 0, this;
    On5.subVectors(e11, this.center);
    const t19 = On5.lengthSq();
    if (t19 > this.radius * this.radius) {
      const i27 = Math.sqrt(t19), r24 = (i27 - this.radius) * 0.5;
      this.center.addScaledVector(On5, r24 / i27), this.radius += r24;
    }
    return this;
  }
  union(e11) {
    return e11.isEmpty() ? this : this.isEmpty() ? (this.copy(e11), this) : (this.center.equals(e11.center) === true ? this.radius = Math.max(this.radius, e11.radius) : (Da2.subVectors(e11.center, this.center).setLength(e11.radius), this.expandByPoint(On5.copy(e11.center).add(Da2)), this.expandByPoint(On5.copy(e11.center).sub(Da2))), this);
  }
  equals(e11) {
    return e11.center.equals(this.center) && e11.radius === this.radius;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var Ii4 = new k20();
var ka2 = new k20();
var vs2 = new k20();
var Yi4 = new k20();
var Ua2 = new k20();
var ys2 = new k20();
var Oa2 = new k20();
var No2 = class {
  constructor(e11 = new k20(), t19 = new k20(0, 0, -1)) {
    this.origin = e11, this.direction = t19;
  }
  set(e11, t19) {
    return this.origin.copy(e11), this.direction.copy(t19), this;
  }
  copy(e11) {
    return this.origin.copy(e11.origin), this.direction.copy(e11.direction), this;
  }
  at(e11, t19) {
    return t19.copy(this.origin).addScaledVector(this.direction, e11);
  }
  lookAt(e11) {
    return this.direction.copy(e11).sub(this.origin).normalize(), this;
  }
  recast(e11) {
    return this.origin.copy(this.at(e11, Ii4)), this;
  }
  closestPointToPoint(e11, t19) {
    t19.subVectors(e11, this.origin);
    const i27 = t19.dot(this.direction);
    return i27 < 0 ? t19.copy(this.origin) : t19.copy(this.origin).addScaledVector(this.direction, i27);
  }
  distanceToPoint(e11) {
    return Math.sqrt(this.distanceSqToPoint(e11));
  }
  distanceSqToPoint(e11) {
    const t19 = Ii4.subVectors(e11, this.origin).dot(this.direction);
    return t19 < 0 ? this.origin.distanceToSquared(e11) : (Ii4.copy(this.origin).addScaledVector(this.direction, t19), Ii4.distanceToSquared(e11));
  }
  distanceSqToSegment(e11, t19, i27, r24) {
    ka2.copy(e11).add(t19).multiplyScalar(0.5), vs2.copy(t19).sub(e11).normalize(), Yi4.copy(this.origin).sub(ka2);
    const n33 = e11.distanceTo(t19) * 0.5, a22 = -this.direction.dot(vs2), o13 = Yi4.dot(this.direction), l26 = -Yi4.dot(vs2), c27 = Yi4.lengthSq(), h26 = Math.abs(1 - a22 * a22);
    let u35, d34, m34, _21;
    if (h26 > 0)
      if (u35 = a22 * l26 - o13, d34 = a22 * o13 - l26, _21 = n33 * h26, u35 >= 0)
        if (d34 >= -_21)
          if (d34 <= _21) {
            const y34 = 1 / h26;
            u35 *= y34, d34 *= y34, m34 = u35 * (u35 + a22 * d34 + 2 * o13) + d34 * (a22 * u35 + d34 + 2 * l26) + c27;
          } else
            d34 = n33, u35 = Math.max(0, -(a22 * d34 + o13)), m34 = -u35 * u35 + d34 * (d34 + 2 * l26) + c27;
        else
          d34 = -n33, u35 = Math.max(0, -(a22 * d34 + o13)), m34 = -u35 * u35 + d34 * (d34 + 2 * l26) + c27;
      else
        d34 <= -_21 ? (u35 = Math.max(0, -(-a22 * n33 + o13)), d34 = u35 > 0 ? -n33 : Math.min(Math.max(-n33, -l26), n33), m34 = -u35 * u35 + d34 * (d34 + 2 * l26) + c27) : d34 <= _21 ? (u35 = 0, d34 = Math.min(Math.max(-n33, -l26), n33), m34 = d34 * (d34 + 2 * l26) + c27) : (u35 = Math.max(0, -(a22 * n33 + o13)), d34 = u35 > 0 ? n33 : Math.min(Math.max(-n33, -l26), n33), m34 = -u35 * u35 + d34 * (d34 + 2 * l26) + c27);
    else
      d34 = a22 > 0 ? -n33 : n33, u35 = Math.max(0, -(a22 * d34 + o13)), m34 = -u35 * u35 + d34 * (d34 + 2 * l26) + c27;
    return i27 && i27.copy(this.origin).addScaledVector(this.direction, u35), r24 && r24.copy(ka2).addScaledVector(vs2, d34), m34;
  }
  intersectSphere(e11, t19) {
    Ii4.subVectors(e11.center, this.origin);
    const i27 = Ii4.dot(this.direction), r24 = Ii4.dot(Ii4) - i27 * i27, n33 = e11.radius * e11.radius;
    if (r24 > n33)
      return null;
    const a22 = Math.sqrt(n33 - r24), o13 = i27 - a22, l26 = i27 + a22;
    return l26 < 0 ? null : o13 < 0 ? this.at(l26, t19) : this.at(o13, t19);
  }
  intersectsSphere(e11) {
    return this.distanceSqToPoint(e11.center) <= e11.radius * e11.radius;
  }
  distanceToPlane(e11) {
    const t19 = e11.normal.dot(this.direction);
    if (t19 === 0)
      return e11.distanceToPoint(this.origin) === 0 ? 0 : null;
    const i27 = -(this.origin.dot(e11.normal) + e11.constant) / t19;
    return i27 >= 0 ? i27 : null;
  }
  intersectPlane(e11, t19) {
    const i27 = this.distanceToPlane(e11);
    return i27 === null ? null : this.at(i27, t19);
  }
  intersectsPlane(e11) {
    const t19 = e11.distanceToPoint(this.origin);
    return t19 === 0 || e11.normal.dot(this.direction) * t19 < 0;
  }
  intersectBox(e11, t19) {
    let i27, r24, n33, a22, o13, l26;
    const c27 = 1 / this.direction.x, h26 = 1 / this.direction.y, u35 = 1 / this.direction.z, d34 = this.origin;
    return c27 >= 0 ? (i27 = (e11.min.x - d34.x) * c27, r24 = (e11.max.x - d34.x) * c27) : (i27 = (e11.max.x - d34.x) * c27, r24 = (e11.min.x - d34.x) * c27), h26 >= 0 ? (n33 = (e11.min.y - d34.y) * h26, a22 = (e11.max.y - d34.y) * h26) : (n33 = (e11.max.y - d34.y) * h26, a22 = (e11.min.y - d34.y) * h26), i27 > a22 || n33 > r24 || ((n33 > i27 || isNaN(i27)) && (i27 = n33), (a22 < r24 || isNaN(r24)) && (r24 = a22), u35 >= 0 ? (o13 = (e11.min.z - d34.z) * u35, l26 = (e11.max.z - d34.z) * u35) : (o13 = (e11.max.z - d34.z) * u35, l26 = (e11.min.z - d34.z) * u35), i27 > l26 || o13 > r24) || ((o13 > i27 || i27 !== i27) && (i27 = o13), (l26 < r24 || r24 !== r24) && (r24 = l26), r24 < 0) ? null : this.at(i27 >= 0 ? i27 : r24, t19);
  }
  intersectsBox(e11) {
    return this.intersectBox(e11, Ii4) !== null;
  }
  intersectTriangle(e11, t19, i27, r24, n33) {
    Ua2.subVectors(t19, e11), ys2.subVectors(i27, e11), Oa2.crossVectors(Ua2, ys2);
    let a22 = this.direction.dot(Oa2), o13;
    if (a22 > 0) {
      if (r24)
        return null;
      o13 = 1;
    } else if (a22 < 0)
      o13 = -1, a22 = -a22;
    else
      return null;
    Yi4.subVectors(this.origin, e11);
    const l26 = o13 * this.direction.dot(ys2.crossVectors(Yi4, ys2));
    if (l26 < 0)
      return null;
    const c27 = o13 * this.direction.dot(Ua2.cross(Yi4));
    if (c27 < 0 || l26 + c27 > a22)
      return null;
    const h26 = -o13 * Yi4.dot(Oa2);
    return h26 < 0 ? null : this.at(h26 / a22, n33);
  }
  applyMatrix4(e11) {
    return this.origin.applyMatrix4(e11), this.direction.transformDirection(e11), this;
  }
  equals(e11) {
    return e11.origin.equals(this.origin) && e11.direction.equals(this.direction);
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var He6 = class _He {
  constructor() {
    _He.prototype.isMatrix4 = true, this.elements = [
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ];
  }
  set(e11, t19, i27, r24, n33, a22, o13, l26, c27, h26, u35, d34, m34, _21, y34, f40) {
    const p26 = this.elements;
    return p26[0] = e11, p26[4] = t19, p26[8] = i27, p26[12] = r24, p26[1] = n33, p26[5] = a22, p26[9] = o13, p26[13] = l26, p26[2] = c27, p26[6] = h26, p26[10] = u35, p26[14] = d34, p26[3] = m34, p26[7] = _21, p26[11] = y34, p26[15] = f40, this;
  }
  identity() {
    return this.set(
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  clone() {
    return new _He().fromArray(this.elements);
  }
  copy(e11) {
    const t19 = this.elements, i27 = e11.elements;
    return t19[0] = i27[0], t19[1] = i27[1], t19[2] = i27[2], t19[3] = i27[3], t19[4] = i27[4], t19[5] = i27[5], t19[6] = i27[6], t19[7] = i27[7], t19[8] = i27[8], t19[9] = i27[9], t19[10] = i27[10], t19[11] = i27[11], t19[12] = i27[12], t19[13] = i27[13], t19[14] = i27[14], t19[15] = i27[15], this;
  }
  copyPosition(e11) {
    const t19 = this.elements, i27 = e11.elements;
    return t19[12] = i27[12], t19[13] = i27[13], t19[14] = i27[14], this;
  }
  setFromMatrix3(e11) {
    const t19 = e11.elements;
    return this.set(
      t19[0],
      t19[3],
      t19[6],
      0,
      t19[1],
      t19[4],
      t19[7],
      0,
      t19[2],
      t19[5],
      t19[8],
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  extractBasis(e11, t19, i27) {
    return e11.setFromMatrixColumn(this, 0), t19.setFromMatrixColumn(this, 1), i27.setFromMatrixColumn(this, 2), this;
  }
  makeBasis(e11, t19, i27) {
    return this.set(
      e11.x,
      t19.x,
      i27.x,
      0,
      e11.y,
      t19.y,
      i27.y,
      0,
      e11.z,
      t19.z,
      i27.z,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  extractRotation(e11) {
    const t19 = this.elements, i27 = e11.elements, r24 = 1 / Xr5.setFromMatrixColumn(e11, 0).length(), n33 = 1 / Xr5.setFromMatrixColumn(e11, 1).length(), a22 = 1 / Xr5.setFromMatrixColumn(e11, 2).length();
    return t19[0] = i27[0] * r24, t19[1] = i27[1] * r24, t19[2] = i27[2] * r24, t19[3] = 0, t19[4] = i27[4] * n33, t19[5] = i27[5] * n33, t19[6] = i27[6] * n33, t19[7] = 0, t19[8] = i27[8] * a22, t19[9] = i27[9] * a22, t19[10] = i27[10] * a22, t19[11] = 0, t19[12] = 0, t19[13] = 0, t19[14] = 0, t19[15] = 1, this;
  }
  makeRotationFromEuler(e11) {
    const t19 = this.elements, i27 = e11.x, r24 = e11.y, n33 = e11.z, a22 = Math.cos(i27), o13 = Math.sin(i27), l26 = Math.cos(r24), c27 = Math.sin(r24), h26 = Math.cos(n33), u35 = Math.sin(n33);
    if (e11.order === "XYZ") {
      const d34 = a22 * h26, m34 = a22 * u35, _21 = o13 * h26, y34 = o13 * u35;
      t19[0] = l26 * h26, t19[4] = -l26 * u35, t19[8] = c27, t19[1] = m34 + _21 * c27, t19[5] = d34 - y34 * c27, t19[9] = -o13 * l26, t19[2] = y34 - d34 * c27, t19[6] = _21 + m34 * c27, t19[10] = a22 * l26;
    } else if (e11.order === "YXZ") {
      const d34 = l26 * h26, m34 = l26 * u35, _21 = c27 * h26, y34 = c27 * u35;
      t19[0] = d34 + y34 * o13, t19[4] = _21 * o13 - m34, t19[8] = a22 * c27, t19[1] = a22 * u35, t19[5] = a22 * h26, t19[9] = -o13, t19[2] = m34 * o13 - _21, t19[6] = y34 + d34 * o13, t19[10] = a22 * l26;
    } else if (e11.order === "ZXY") {
      const d34 = l26 * h26, m34 = l26 * u35, _21 = c27 * h26, y34 = c27 * u35;
      t19[0] = d34 - y34 * o13, t19[4] = -a22 * u35, t19[8] = _21 + m34 * o13, t19[1] = m34 + _21 * o13, t19[5] = a22 * h26, t19[9] = y34 - d34 * o13, t19[2] = -a22 * c27, t19[6] = o13, t19[10] = a22 * l26;
    } else if (e11.order === "ZYX") {
      const d34 = a22 * h26, m34 = a22 * u35, _21 = o13 * h26, y34 = o13 * u35;
      t19[0] = l26 * h26, t19[4] = _21 * c27 - m34, t19[8] = d34 * c27 + y34, t19[1] = l26 * u35, t19[5] = y34 * c27 + d34, t19[9] = m34 * c27 - _21, t19[2] = -c27, t19[6] = o13 * l26, t19[10] = a22 * l26;
    } else if (e11.order === "YZX") {
      const d34 = a22 * l26, m34 = a22 * c27, _21 = o13 * l26, y34 = o13 * c27;
      t19[0] = l26 * h26, t19[4] = y34 - d34 * u35, t19[8] = _21 * u35 + m34, t19[1] = u35, t19[5] = a22 * h26, t19[9] = -o13 * h26, t19[2] = -c27 * h26, t19[6] = m34 * u35 + _21, t19[10] = d34 - y34 * u35;
    } else if (e11.order === "XZY") {
      const d34 = a22 * l26, m34 = a22 * c27, _21 = o13 * l26, y34 = o13 * c27;
      t19[0] = l26 * h26, t19[4] = -u35, t19[8] = c27 * h26, t19[1] = d34 * u35 + y34, t19[5] = a22 * h26, t19[9] = m34 * u35 - _21, t19[2] = _21 * u35 - m34, t19[6] = o13 * h26, t19[10] = y34 * u35 + d34;
    }
    return t19[3] = 0, t19[7] = 0, t19[11] = 0, t19[12] = 0, t19[13] = 0, t19[14] = 0, t19[15] = 1, this;
  }
  makeRotationFromQuaternion(e11) {
    return this.compose(wd2, e11, Sd2);
  }
  lookAt(e11, t19, i27) {
    const r24 = this.elements;
    return ri6.subVectors(e11, t19), ri6.lengthSq() === 0 && (ri6.z = 1), ri6.normalize(), Zi3.crossVectors(i27, ri6), Zi3.lengthSq() === 0 && (Math.abs(i27.z) === 1 ? ri6.x += 1e-4 : ri6.z += 1e-4, ri6.normalize(), Zi3.crossVectors(i27, ri6)), Zi3.normalize(), xs2.crossVectors(ri6, Zi3), r24[0] = Zi3.x, r24[4] = xs2.x, r24[8] = ri6.x, r24[1] = Zi3.y, r24[5] = xs2.y, r24[9] = ri6.y, r24[2] = Zi3.z, r24[6] = xs2.z, r24[10] = ri6.z, this;
  }
  multiply(e11) {
    return this.multiplyMatrices(this, e11);
  }
  premultiply(e11) {
    return this.multiplyMatrices(e11, this);
  }
  multiplyMatrices(e11, t19) {
    const i27 = e11.elements, r24 = t19.elements, n33 = this.elements, a22 = i27[0], o13 = i27[4], l26 = i27[8], c27 = i27[12], h26 = i27[1], u35 = i27[5], d34 = i27[9], m34 = i27[13], _21 = i27[2], y34 = i27[6], f40 = i27[10], p26 = i27[14], A18 = i27[3], M13 = i27[7], E25 = i27[11], w31 = i27[15], I18 = r24[0], D18 = r24[4], P20 = r24[8], x36 = r24[12], C21 = r24[1], G16 = r24[5], z21 = r24[9], U20 = r24[13], V16 = r24[2], j19 = r24[6], W11 = r24[10], re8 = r24[14], $25 = r24[3], ie8 = r24[7], le7 = r24[11], fe7 = r24[15];
    return n33[0] = a22 * I18 + o13 * C21 + l26 * V16 + c27 * $25, n33[4] = a22 * D18 + o13 * G16 + l26 * j19 + c27 * ie8, n33[8] = a22 * P20 + o13 * z21 + l26 * W11 + c27 * le7, n33[12] = a22 * x36 + o13 * U20 + l26 * re8 + c27 * fe7, n33[1] = h26 * I18 + u35 * C21 + d34 * V16 + m34 * $25, n33[5] = h26 * D18 + u35 * G16 + d34 * j19 + m34 * ie8, n33[9] = h26 * P20 + u35 * z21 + d34 * W11 + m34 * le7, n33[13] = h26 * x36 + u35 * U20 + d34 * re8 + m34 * fe7, n33[2] = _21 * I18 + y34 * C21 + f40 * V16 + p26 * $25, n33[6] = _21 * D18 + y34 * G16 + f40 * j19 + p26 * ie8, n33[10] = _21 * P20 + y34 * z21 + f40 * W11 + p26 * le7, n33[14] = _21 * x36 + y34 * U20 + f40 * re8 + p26 * fe7, n33[3] = A18 * I18 + M13 * C21 + E25 * V16 + w31 * $25, n33[7] = A18 * D18 + M13 * G16 + E25 * j19 + w31 * ie8, n33[11] = A18 * P20 + M13 * z21 + E25 * W11 + w31 * le7, n33[15] = A18 * x36 + M13 * U20 + E25 * re8 + w31 * fe7, this;
  }
  multiplyScalar(e11) {
    const t19 = this.elements;
    return t19[0] *= e11, t19[4] *= e11, t19[8] *= e11, t19[12] *= e11, t19[1] *= e11, t19[5] *= e11, t19[9] *= e11, t19[13] *= e11, t19[2] *= e11, t19[6] *= e11, t19[10] *= e11, t19[14] *= e11, t19[3] *= e11, t19[7] *= e11, t19[11] *= e11, t19[15] *= e11, this;
  }
  determinant() {
    const e11 = this.elements, t19 = e11[0], i27 = e11[4], r24 = e11[8], n33 = e11[12], a22 = e11[1], o13 = e11[5], l26 = e11[9], c27 = e11[13], h26 = e11[2], u35 = e11[6], d34 = e11[10], m34 = e11[14], _21 = e11[3], y34 = e11[7], f40 = e11[11], p26 = e11[15];
    return _21 * (+n33 * l26 * u35 - r24 * c27 * u35 - n33 * o13 * d34 + i27 * c27 * d34 + r24 * o13 * m34 - i27 * l26 * m34) + y34 * (+t19 * l26 * m34 - t19 * c27 * d34 + n33 * a22 * d34 - r24 * a22 * m34 + r24 * c27 * h26 - n33 * l26 * h26) + f40 * (+t19 * c27 * u35 - t19 * o13 * m34 - n33 * a22 * u35 + i27 * a22 * m34 + n33 * o13 * h26 - i27 * c27 * h26) + p26 * (-r24 * o13 * h26 - t19 * l26 * u35 + t19 * o13 * d34 + r24 * a22 * u35 - i27 * a22 * d34 + i27 * l26 * h26);
  }
  transpose() {
    const e11 = this.elements;
    let t19;
    return t19 = e11[1], e11[1] = e11[4], e11[4] = t19, t19 = e11[2], e11[2] = e11[8], e11[8] = t19, t19 = e11[6], e11[6] = e11[9], e11[9] = t19, t19 = e11[3], e11[3] = e11[12], e11[12] = t19, t19 = e11[7], e11[7] = e11[13], e11[13] = t19, t19 = e11[11], e11[11] = e11[14], e11[14] = t19, this;
  }
  setPosition(e11, t19, i27) {
    const r24 = this.elements;
    return e11.isVector3 ? (r24[12] = e11.x, r24[13] = e11.y, r24[14] = e11.z) : (r24[12] = e11, r24[13] = t19, r24[14] = i27), this;
  }
  invert() {
    const e11 = this.elements, t19 = e11[0], i27 = e11[1], r24 = e11[2], n33 = e11[3], a22 = e11[4], o13 = e11[5], l26 = e11[6], c27 = e11[7], h26 = e11[8], u35 = e11[9], d34 = e11[10], m34 = e11[11], _21 = e11[12], y34 = e11[13], f40 = e11[14], p26 = e11[15], A18 = u35 * f40 * c27 - y34 * d34 * c27 + y34 * l26 * m34 - o13 * f40 * m34 - u35 * l26 * p26 + o13 * d34 * p26, M13 = _21 * d34 * c27 - h26 * f40 * c27 - _21 * l26 * m34 + a22 * f40 * m34 + h26 * l26 * p26 - a22 * d34 * p26, E25 = h26 * y34 * c27 - _21 * u35 * c27 + _21 * o13 * m34 - a22 * y34 * m34 - h26 * o13 * p26 + a22 * u35 * p26, w31 = _21 * u35 * l26 - h26 * y34 * l26 - _21 * o13 * d34 + a22 * y34 * d34 + h26 * o13 * f40 - a22 * u35 * f40, I18 = t19 * A18 + i27 * M13 + r24 * E25 + n33 * w31;
    if (I18 === 0)
      return this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
    const D18 = 1 / I18;
    return e11[0] = A18 * D18, e11[1] = (y34 * d34 * n33 - u35 * f40 * n33 - y34 * r24 * m34 + i27 * f40 * m34 + u35 * r24 * p26 - i27 * d34 * p26) * D18, e11[2] = (o13 * f40 * n33 - y34 * l26 * n33 + y34 * r24 * c27 - i27 * f40 * c27 - o13 * r24 * p26 + i27 * l26 * p26) * D18, e11[3] = (u35 * l26 * n33 - o13 * d34 * n33 - u35 * r24 * c27 + i27 * d34 * c27 + o13 * r24 * m34 - i27 * l26 * m34) * D18, e11[4] = M13 * D18, e11[5] = (h26 * f40 * n33 - _21 * d34 * n33 + _21 * r24 * m34 - t19 * f40 * m34 - h26 * r24 * p26 + t19 * d34 * p26) * D18, e11[6] = (_21 * l26 * n33 - a22 * f40 * n33 - _21 * r24 * c27 + t19 * f40 * c27 + a22 * r24 * p26 - t19 * l26 * p26) * D18, e11[7] = (a22 * d34 * n33 - h26 * l26 * n33 + h26 * r24 * c27 - t19 * d34 * c27 - a22 * r24 * m34 + t19 * l26 * m34) * D18, e11[8] = E25 * D18, e11[9] = (_21 * u35 * n33 - h26 * y34 * n33 - _21 * i27 * m34 + t19 * y34 * m34 + h26 * i27 * p26 - t19 * u35 * p26) * D18, e11[10] = (a22 * y34 * n33 - _21 * o13 * n33 + _21 * i27 * c27 - t19 * y34 * c27 - a22 * i27 * p26 + t19 * o13 * p26) * D18, e11[11] = (h26 * o13 * n33 - a22 * u35 * n33 - h26 * i27 * c27 + t19 * u35 * c27 + a22 * i27 * m34 - t19 * o13 * m34) * D18, e11[12] = w31 * D18, e11[13] = (h26 * y34 * r24 - _21 * u35 * r24 + _21 * i27 * d34 - t19 * y34 * d34 - h26 * i27 * f40 + t19 * u35 * f40) * D18, e11[14] = (_21 * o13 * r24 - a22 * y34 * r24 - _21 * i27 * l26 + t19 * y34 * l26 + a22 * i27 * f40 - t19 * o13 * f40) * D18, e11[15] = (a22 * u35 * r24 - h26 * o13 * r24 + h26 * i27 * l26 - t19 * u35 * l26 - a22 * i27 * d34 + t19 * o13 * d34) * D18, this;
  }
  scale(e11) {
    const t19 = this.elements, i27 = e11.x, r24 = e11.y, n33 = e11.z;
    return t19[0] *= i27, t19[4] *= r24, t19[8] *= n33, t19[1] *= i27, t19[5] *= r24, t19[9] *= n33, t19[2] *= i27, t19[6] *= r24, t19[10] *= n33, t19[3] *= i27, t19[7] *= r24, t19[11] *= n33, this;
  }
  getMaxScaleOnAxis() {
    const e11 = this.elements, t19 = e11[0] * e11[0] + e11[1] * e11[1] + e11[2] * e11[2], i27 = e11[4] * e11[4] + e11[5] * e11[5] + e11[6] * e11[6], r24 = e11[8] * e11[8] + e11[9] * e11[9] + e11[10] * e11[10];
    return Math.sqrt(Math.max(t19, i27, r24));
  }
  makeTranslation(e11, t19, i27) {
    return this.set(
      1,
      0,
      0,
      e11,
      0,
      1,
      0,
      t19,
      0,
      0,
      1,
      i27,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationX(e11) {
    const t19 = Math.cos(e11), i27 = Math.sin(e11);
    return this.set(
      1,
      0,
      0,
      0,
      0,
      t19,
      -i27,
      0,
      0,
      i27,
      t19,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationY(e11) {
    const t19 = Math.cos(e11), i27 = Math.sin(e11);
    return this.set(
      t19,
      0,
      i27,
      0,
      0,
      1,
      0,
      0,
      -i27,
      0,
      t19,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationZ(e11) {
    const t19 = Math.cos(e11), i27 = Math.sin(e11);
    return this.set(
      t19,
      -i27,
      0,
      0,
      i27,
      t19,
      0,
      0,
      0,
      0,
      1,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeRotationAxis(e11, t19) {
    const i27 = Math.cos(t19), r24 = Math.sin(t19), n33 = 1 - i27, a22 = e11.x, o13 = e11.y, l26 = e11.z, c27 = n33 * a22, h26 = n33 * o13;
    return this.set(
      c27 * a22 + i27,
      c27 * o13 - r24 * l26,
      c27 * l26 + r24 * o13,
      0,
      c27 * o13 + r24 * l26,
      h26 * o13 + i27,
      h26 * l26 - r24 * a22,
      0,
      c27 * l26 - r24 * o13,
      h26 * l26 + r24 * a22,
      n33 * l26 * l26 + i27,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeScale(e11, t19, i27) {
    return this.set(
      e11,
      0,
      0,
      0,
      0,
      t19,
      0,
      0,
      0,
      0,
      i27,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  makeShear(e11, t19, i27, r24, n33, a22) {
    return this.set(
      1,
      i27,
      n33,
      0,
      e11,
      1,
      a22,
      0,
      t19,
      r24,
      1,
      0,
      0,
      0,
      0,
      1
    ), this;
  }
  compose(e11, t19, i27) {
    const r24 = this.elements, n33 = t19._x, a22 = t19._y, o13 = t19._z, l26 = t19._w, c27 = n33 + n33, h26 = a22 + a22, u35 = o13 + o13, d34 = n33 * c27, m34 = n33 * h26, _21 = n33 * u35, y34 = a22 * h26, f40 = a22 * u35, p26 = o13 * u35, A18 = l26 * c27, M13 = l26 * h26, E25 = l26 * u35, w31 = i27.x, I18 = i27.y, D18 = i27.z;
    return r24[0] = (1 - (y34 + p26)) * w31, r24[1] = (m34 + E25) * w31, r24[2] = (_21 - M13) * w31, r24[3] = 0, r24[4] = (m34 - E25) * I18, r24[5] = (1 - (d34 + p26)) * I18, r24[6] = (f40 + A18) * I18, r24[7] = 0, r24[8] = (_21 + M13) * D18, r24[9] = (f40 - A18) * D18, r24[10] = (1 - (d34 + y34)) * D18, r24[11] = 0, r24[12] = e11.x, r24[13] = e11.y, r24[14] = e11.z, r24[15] = 1, this;
  }
  decompose(e11, t19, i27) {
    const r24 = this.elements;
    let n33 = Xr5.set(r24[0], r24[1], r24[2]).length();
    const a22 = Xr5.set(r24[4], r24[5], r24[6]).length(), o13 = Xr5.set(r24[8], r24[9], r24[10]).length();
    this.determinant() < 0 && (n33 = -n33), e11.x = r24[12], e11.y = r24[13], e11.z = r24[14], gi6.copy(this);
    const l26 = 1 / n33, c27 = 1 / a22, h26 = 1 / o13;
    return gi6.elements[0] *= l26, gi6.elements[1] *= l26, gi6.elements[2] *= l26, gi6.elements[4] *= c27, gi6.elements[5] *= c27, gi6.elements[6] *= c27, gi6.elements[8] *= h26, gi6.elements[9] *= h26, gi6.elements[10] *= h26, t19.setFromRotationMatrix(gi6), i27.x = n33, i27.y = a22, i27.z = o13, this;
  }
  makePerspective(e11, t19, i27, r24, n33, a22) {
    const o13 = this.elements, l26 = 2 * n33 / (t19 - e11), c27 = 2 * n33 / (i27 - r24), h26 = (t19 + e11) / (t19 - e11), u35 = (i27 + r24) / (i27 - r24), d34 = -(a22 + n33) / (a22 - n33), m34 = -2 * a22 * n33 / (a22 - n33);
    return o13[0] = l26, o13[4] = 0, o13[8] = h26, o13[12] = 0, o13[1] = 0, o13[5] = c27, o13[9] = u35, o13[13] = 0, o13[2] = 0, o13[6] = 0, o13[10] = d34, o13[14] = m34, o13[3] = 0, o13[7] = 0, o13[11] = -1, o13[15] = 0, this;
  }
  makeOrthographic(e11, t19, i27, r24, n33, a22) {
    const o13 = this.elements, l26 = 1 / (t19 - e11), c27 = 1 / (i27 - r24), h26 = 1 / (a22 - n33), u35 = (t19 + e11) * l26, d34 = (i27 + r24) * c27, m34 = (a22 + n33) * h26;
    return o13[0] = 2 * l26, o13[4] = 0, o13[8] = 0, o13[12] = -u35, o13[1] = 0, o13[5] = 2 * c27, o13[9] = 0, o13[13] = -d34, o13[2] = 0, o13[6] = 0, o13[10] = -2 * h26, o13[14] = -m34, o13[3] = 0, o13[7] = 0, o13[11] = 0, o13[15] = 1, this;
  }
  equals(e11) {
    const t19 = this.elements, i27 = e11.elements;
    for (let r24 = 0; r24 < 16; r24++)
      if (t19[r24] !== i27[r24])
        return false;
    return true;
  }
  fromArray(e11, t19 = 0) {
    for (let i27 = 0; i27 < 16; i27++)
      this.elements[i27] = e11[i27 + t19];
    return this;
  }
  toArray(e11 = [], t19 = 0) {
    const i27 = this.elements;
    return e11[t19] = i27[0], e11[t19 + 1] = i27[1], e11[t19 + 2] = i27[2], e11[t19 + 3] = i27[3], e11[t19 + 4] = i27[4], e11[t19 + 5] = i27[5], e11[t19 + 6] = i27[6], e11[t19 + 7] = i27[7], e11[t19 + 8] = i27[8], e11[t19 + 9] = i27[9], e11[t19 + 10] = i27[10], e11[t19 + 11] = i27[11], e11[t19 + 12] = i27[12], e11[t19 + 13] = i27[13], e11[t19 + 14] = i27[14], e11[t19 + 15] = i27[15], e11;
  }
};
var Xr5 = new k20();
var gi6 = new He6();
var wd2 = new k20(0, 0, 0);
var Sd2 = new k20(1, 1, 1);
var Zi3 = new k20();
var xs2 = new k20();
var ri6 = new k20();
var kl2 = new He6();
var Ul2 = new jt8();
var Cn5 = class _Cn {
  constructor(e11 = 0, t19 = 0, i27 = 0, r24 = _Cn.DEFAULT_ORDER) {
    this.isEuler = true, this._x = e11, this._y = t19, this._z = i27, this._order = r24;
  }
  get x() {
    return this._x;
  }
  set x(e11) {
    this._x = e11, this._onChangeCallback();
  }
  get y() {
    return this._y;
  }
  set y(e11) {
    this._y = e11, this._onChangeCallback();
  }
  get z() {
    return this._z;
  }
  set z(e11) {
    this._z = e11, this._onChangeCallback();
  }
  get order() {
    return this._order;
  }
  set order(e11) {
    this._order = e11, this._onChangeCallback();
  }
  set(e11, t19, i27, r24 = this._order) {
    return this._x = e11, this._y = t19, this._z = i27, this._order = r24, this._onChangeCallback(), this;
  }
  clone() {
    return new this.constructor(this._x, this._y, this._z, this._order);
  }
  copy(e11) {
    return this._x = e11._x, this._y = e11._y, this._z = e11._z, this._order = e11._order, this._onChangeCallback(), this;
  }
  setFromRotationMatrix(e11, t19 = this._order, i27 = true) {
    const r24 = e11.elements, n33 = r24[0], a22 = r24[4], o13 = r24[8], l26 = r24[1], c27 = r24[5], h26 = r24[9], u35 = r24[2], d34 = r24[6], m34 = r24[10];
    switch (t19) {
      case "XYZ":
        this._y = Math.asin(Gt6(o13, -1, 1)), Math.abs(o13) < 0.9999999 ? (this._x = Math.atan2(-h26, m34), this._z = Math.atan2(-a22, n33)) : (this._x = Math.atan2(d34, c27), this._z = 0);
        break;
      case "YXZ":
        this._x = Math.asin(-Gt6(h26, -1, 1)), Math.abs(h26) < 0.9999999 ? (this._y = Math.atan2(o13, m34), this._z = Math.atan2(l26, c27)) : (this._y = Math.atan2(-u35, n33), this._z = 0);
        break;
      case "ZXY":
        this._x = Math.asin(Gt6(d34, -1, 1)), Math.abs(d34) < 0.9999999 ? (this._y = Math.atan2(-u35, m34), this._z = Math.atan2(-a22, c27)) : (this._y = 0, this._z = Math.atan2(l26, n33));
        break;
      case "ZYX":
        this._y = Math.asin(-Gt6(u35, -1, 1)), Math.abs(u35) < 0.9999999 ? (this._x = Math.atan2(d34, m34), this._z = Math.atan2(l26, n33)) : (this._x = 0, this._z = Math.atan2(-a22, c27));
        break;
      case "YZX":
        this._z = Math.asin(Gt6(l26, -1, 1)), Math.abs(l26) < 0.9999999 ? (this._x = Math.atan2(-h26, c27), this._y = Math.atan2(-u35, n33)) : (this._x = 0, this._y = Math.atan2(o13, m34));
        break;
      case "XZY":
        this._z = Math.asin(-Gt6(a22, -1, 1)), Math.abs(a22) < 0.9999999 ? (this._x = Math.atan2(d34, c27), this._y = Math.atan2(o13, n33)) : (this._x = Math.atan2(-h26, m34), this._y = 0);
        break;
      default:
        console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: " + t19);
    }
    return this._order = t19, i27 === true && this._onChangeCallback(), this;
  }
  setFromQuaternion(e11, t19, i27) {
    return kl2.makeRotationFromQuaternion(e11), this.setFromRotationMatrix(kl2, t19, i27);
  }
  setFromVector3(e11, t19 = this._order) {
    return this.set(e11.x, e11.y, e11.z, t19);
  }
  reorder(e11) {
    return Ul2.setFromEuler(this), this.setFromQuaternion(Ul2, e11);
  }
  equals(e11) {
    return e11._x === this._x && e11._y === this._y && e11._z === this._z && e11._order === this._order;
  }
  fromArray(e11) {
    return this._x = e11[0], this._y = e11[1], this._z = e11[2], e11[3] !== void 0 && (this._order = e11[3]), this._onChangeCallback(), this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this._x, e11[t19 + 1] = this._y, e11[t19 + 2] = this._z, e11[t19 + 3] = this._order, e11;
  }
  _onChange(e11) {
    return this._onChangeCallback = e11, this;
  }
  _onChangeCallback() {
  }
  *[Symbol.iterator]() {
    yield this._x, yield this._y, yield this._z, yield this._order;
  }
};
Cn5.DEFAULT_ORDER = "XYZ";
var gh2 = class {
  constructor() {
    this.mask = 1;
  }
  set(e11) {
    this.mask = (1 << e11 | 0) >>> 0;
  }
  enable(e11) {
    this.mask |= 1 << e11 | 0;
  }
  enableAll() {
    this.mask = -1;
  }
  toggle(e11) {
    this.mask ^= 1 << e11 | 0;
  }
  disable(e11) {
    this.mask &= ~(1 << e11 | 0);
  }
  disableAll() {
    this.mask = 0;
  }
  test(e11) {
    return (this.mask & e11.mask) !== 0;
  }
  isEnabled(e11) {
    return (this.mask & (1 << e11 | 0)) !== 0;
  }
};
var Td2 = 0;
var Ol2 = new k20();
var qr5 = new jt8();
var Di3 = new He6();
var bs2 = new k20();
var zn5 = new k20();
var Ed2 = new k20();
var Ad2 = new jt8();
var zl2 = new k20(1, 0, 0);
var Bl2 = new k20(0, 1, 0);
var Fl2 = new k20(0, 0, 1);
var Ld2 = { type: "added" };
var Hl2 = { type: "removed" };
var _t8 = class __t extends Ar5 {
  constructor() {
    super(), this.isObject3D = true, Object.defineProperty(this, "id", { value: Td2++ }), this.uuid = bi6(), this.name = "", this.type = "Object3D", this.parent = null, this.children = [], this.up = __t.DEFAULT_UP.clone();
    const e11 = new k20(), t19 = new Cn5(), i27 = new jt8(), r24 = new k20(1, 1, 1);
    function n33() {
      i27.setFromEuler(t19, false);
    }
    function a22() {
      t19.setFromQuaternion(i27, void 0, false);
    }
    t19._onChange(n33), i27._onChange(a22), Object.defineProperties(this, {
      position: {
        configurable: true,
        enumerable: true,
        value: e11
      },
      rotation: {
        configurable: true,
        enumerable: true,
        value: t19
      },
      quaternion: {
        configurable: true,
        enumerable: true,
        value: i27
      },
      scale: {
        configurable: true,
        enumerable: true,
        value: r24
      },
      modelViewMatrix: {
        value: new He6()
      },
      normalMatrix: {
        value: new Ke5()
      }
    }), this.matrix = new He6(), this.matrixWorld = new He6(), this.matrixAutoUpdate = __t.DEFAULT_MATRIX_AUTO_UPDATE, this.matrixWorldNeedsUpdate = false, this.matrixWorldAutoUpdate = __t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE, this.layers = new gh2(), this.visible = true, this.castShadow = false, this.receiveShadow = false, this.frustumCulled = true, this.renderOrder = 0, this.animations = [], this.userData = {};
  }
  onBeforeRender() {
  }
  onAfterRender() {
  }
  applyMatrix4(e11) {
    this.matrixAutoUpdate && this.updateMatrix(), this.matrix.premultiply(e11), this.matrix.decompose(this.position, this.quaternion, this.scale);
  }
  applyQuaternion(e11) {
    return this.quaternion.premultiply(e11), this;
  }
  setRotationFromAxisAngle(e11, t19) {
    this.quaternion.setFromAxisAngle(e11, t19);
  }
  setRotationFromEuler(e11) {
    this.quaternion.setFromEuler(e11, true);
  }
  setRotationFromMatrix(e11) {
    this.quaternion.setFromRotationMatrix(e11);
  }
  setRotationFromQuaternion(e11) {
    this.quaternion.copy(e11);
  }
  rotateOnAxis(e11, t19) {
    return qr5.setFromAxisAngle(e11, t19), this.quaternion.multiply(qr5), this;
  }
  rotateOnWorldAxis(e11, t19) {
    return qr5.setFromAxisAngle(e11, t19), this.quaternion.premultiply(qr5), this;
  }
  rotateX(e11) {
    return this.rotateOnAxis(zl2, e11);
  }
  rotateY(e11) {
    return this.rotateOnAxis(Bl2, e11);
  }
  rotateZ(e11) {
    return this.rotateOnAxis(Fl2, e11);
  }
  translateOnAxis(e11, t19) {
    return Ol2.copy(e11).applyQuaternion(this.quaternion), this.position.add(Ol2.multiplyScalar(t19)), this;
  }
  translateX(e11) {
    return this.translateOnAxis(zl2, e11);
  }
  translateY(e11) {
    return this.translateOnAxis(Bl2, e11);
  }
  translateZ(e11) {
    return this.translateOnAxis(Fl2, e11);
  }
  localToWorld(e11) {
    return this.updateWorldMatrix(true, false), e11.applyMatrix4(this.matrixWorld);
  }
  worldToLocal(e11) {
    return this.updateWorldMatrix(true, false), e11.applyMatrix4(Di3.copy(this.matrixWorld).invert());
  }
  lookAt(e11, t19, i27) {
    e11.isVector3 ? bs2.copy(e11) : bs2.set(e11, t19, i27);
    const r24 = this.parent;
    this.updateWorldMatrix(true, false), zn5.setFromMatrixPosition(this.matrixWorld), this.isCamera || this.isLight ? Di3.lookAt(zn5, bs2, this.up) : Di3.lookAt(bs2, zn5, this.up), this.quaternion.setFromRotationMatrix(Di3), r24 && (Di3.extractRotation(r24.matrixWorld), qr5.setFromRotationMatrix(Di3), this.quaternion.premultiply(qr5.invert()));
  }
  add(e11) {
    if (arguments.length > 1) {
      for (let t19 = 0; t19 < arguments.length; t19++)
        this.add(arguments[t19]);
      return this;
    }
    return e11 === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", e11), this) : (e11 && e11.isObject3D ? (e11.parent !== null && e11.parent.remove(e11), e11.parent = this, this.children.push(e11), e11.dispatchEvent(Ld2)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", e11), this);
  }
  remove(e11) {
    if (arguments.length > 1) {
      for (let i27 = 0; i27 < arguments.length; i27++)
        this.remove(arguments[i27]);
      return this;
    }
    const t19 = this.children.indexOf(e11);
    return t19 !== -1 && (e11.parent = null, this.children.splice(t19, 1), e11.dispatchEvent(Hl2)), this;
  }
  removeFromParent() {
    const e11 = this.parent;
    return e11 !== null && e11.remove(this), this;
  }
  clear() {
    for (let e11 = 0; e11 < this.children.length; e11++) {
      const t19 = this.children[e11];
      t19.parent = null, t19.dispatchEvent(Hl2);
    }
    return this.children.length = 0, this;
  }
  attach(e11) {
    return this.updateWorldMatrix(true, false), Di3.copy(this.matrixWorld).invert(), e11.parent !== null && (e11.parent.updateWorldMatrix(true, false), Di3.multiply(e11.parent.matrixWorld)), e11.applyMatrix4(Di3), this.add(e11), e11.updateWorldMatrix(false, true), this;
  }
  getObjectById(e11) {
    return this.getObjectByProperty("id", e11);
  }
  getObjectByName(e11) {
    return this.getObjectByProperty("name", e11);
  }
  getObjectByProperty(e11, t19) {
    if (this[e11] === t19)
      return this;
    for (let i27 = 0, r24 = this.children.length; i27 < r24; i27++) {
      const n33 = this.children[i27].getObjectByProperty(e11, t19);
      if (n33 !== void 0)
        return n33;
    }
  }
  getObjectsByProperty(e11, t19) {
    let i27 = [];
    this[e11] === t19 && i27.push(this);
    for (let r24 = 0, n33 = this.children.length; r24 < n33; r24++) {
      const a22 = this.children[r24].getObjectsByProperty(e11, t19);
      a22.length > 0 && (i27 = i27.concat(a22));
    }
    return i27;
  }
  getWorldPosition(e11) {
    return this.updateWorldMatrix(true, false), e11.setFromMatrixPosition(this.matrixWorld);
  }
  getWorldQuaternion(e11) {
    return this.updateWorldMatrix(true, false), this.matrixWorld.decompose(zn5, e11, Ed2), e11;
  }
  getWorldScale(e11) {
    return this.updateWorldMatrix(true, false), this.matrixWorld.decompose(zn5, Ad2, e11), e11;
  }
  getWorldDirection(e11) {
    this.updateWorldMatrix(true, false);
    const t19 = this.matrixWorld.elements;
    return e11.set(t19[8], t19[9], t19[10]).normalize();
  }
  raycast() {
  }
  traverse(e11) {
    e11(this);
    const t19 = this.children;
    for (let i27 = 0, r24 = t19.length; i27 < r24; i27++)
      t19[i27].traverse(e11);
  }
  traverseVisible(e11) {
    if (this.visible === false)
      return;
    e11(this);
    const t19 = this.children;
    for (let i27 = 0, r24 = t19.length; i27 < r24; i27++)
      t19[i27].traverseVisible(e11);
  }
  traverseAncestors(e11) {
    const t19 = this.parent;
    t19 !== null && (e11(t19), t19.traverseAncestors(e11));
  }
  updateMatrix() {
    this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = true;
  }
  updateMatrixWorld(e11) {
    this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || e11) && (this.parent === null ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = false, e11 = true);
    const t19 = this.children;
    for (let i27 = 0, r24 = t19.length; i27 < r24; i27++) {
      const n33 = t19[i27];
      (n33.matrixWorldAutoUpdate === true || e11 === true) && n33.updateMatrixWorld(e11);
    }
  }
  updateWorldMatrix(e11, t19) {
    const i27 = this.parent;
    if (e11 === true && i27 !== null && i27.matrixWorldAutoUpdate === true && i27.updateWorldMatrix(true, false), this.matrixAutoUpdate && this.updateMatrix(), this.parent === null ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), t19 === true) {
      const r24 = this.children;
      for (let n33 = 0, a22 = r24.length; n33 < a22; n33++) {
        const o13 = r24[n33];
        o13.matrixWorldAutoUpdate === true && o13.updateWorldMatrix(false, true);
      }
    }
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string", i27 = {};
    t19 && (e11 = {
      geometries: {},
      materials: {},
      textures: {},
      images: {},
      shapes: {},
      skeletons: {},
      animations: {},
      nodes: {}
    }, i27.metadata = {
      version: 4.5,
      type: "Object",
      generator: "Object3D.toJSON"
    });
    const r24 = {};
    r24.uuid = this.uuid, r24.type = this.type, this.name !== "" && (r24.name = this.name), this.castShadow === true && (r24.castShadow = true), this.receiveShadow === true && (r24.receiveShadow = true), this.visible === false && (r24.visible = false), this.frustumCulled === false && (r24.frustumCulled = false), this.renderOrder !== 0 && (r24.renderOrder = this.renderOrder), Object.keys(this.userData).length > 0 && (r24.userData = this.userData), r24.layers = this.layers.mask, r24.matrix = this.matrix.toArray(), r24.up = this.up.toArray(), this.matrixAutoUpdate === false && (r24.matrixAutoUpdate = false), this.isInstancedMesh && (r24.type = "InstancedMesh", r24.count = this.count, r24.instanceMatrix = this.instanceMatrix.toJSON(), this.instanceColor !== null && (r24.instanceColor = this.instanceColor.toJSON()));
    function n33(o13, l26) {
      return o13[l26.uuid] === void 0 && (o13[l26.uuid] = l26.toJSON(e11)), l26.uuid;
    }
    if (this.isScene)
      this.background && (this.background.isColor ? r24.background = this.background.toJSON() : this.background.isTexture && (r24.background = this.background.toJSON(e11).uuid)), this.environment && this.environment.isTexture && this.environment.isRenderTargetTexture !== true && (r24.environment = this.environment.toJSON(e11).uuid);
    else if (this.isMesh || this.isLine || this.isPoints) {
      r24.geometry = n33(e11.geometries, this.geometry);
      const o13 = this.geometry.parameters;
      if (o13 !== void 0 && o13.shapes !== void 0) {
        const l26 = o13.shapes;
        if (Array.isArray(l26))
          for (let c27 = 0, h26 = l26.length; c27 < h26; c27++) {
            const u35 = l26[c27];
            n33(e11.shapes, u35);
          }
        else
          n33(e11.shapes, l26);
      }
    }
    if (this.isSkinnedMesh && (r24.bindMode = this.bindMode, r24.bindMatrix = this.bindMatrix.toArray(), this.skeleton !== void 0 && (n33(e11.skeletons, this.skeleton), r24.skeleton = this.skeleton.uuid)), this.material !== void 0)
      if (Array.isArray(this.material)) {
        const o13 = [];
        for (let l26 = 0, c27 = this.material.length; l26 < c27; l26++)
          o13.push(n33(e11.materials, this.material[l26]));
        r24.material = o13;
      } else
        r24.material = n33(e11.materials, this.material);
    if (this.children.length > 0) {
      r24.children = [];
      for (let o13 = 0; o13 < this.children.length; o13++)
        r24.children.push(this.children[o13].toJSON(e11).object);
    }
    if (this.animations.length > 0) {
      r24.animations = [];
      for (let o13 = 0; o13 < this.animations.length; o13++) {
        const l26 = this.animations[o13];
        r24.animations.push(n33(e11.animations, l26));
      }
    }
    if (t19) {
      const o13 = a22(e11.geometries), l26 = a22(e11.materials), c27 = a22(e11.textures), h26 = a22(e11.images), u35 = a22(e11.shapes), d34 = a22(e11.skeletons), m34 = a22(e11.animations), _21 = a22(e11.nodes);
      o13.length > 0 && (i27.geometries = o13), l26.length > 0 && (i27.materials = l26), c27.length > 0 && (i27.textures = c27), h26.length > 0 && (i27.images = h26), u35.length > 0 && (i27.shapes = u35), d34.length > 0 && (i27.skeletons = d34), m34.length > 0 && (i27.animations = m34), _21.length > 0 && (i27.nodes = _21);
    }
    return i27.object = r24, i27;
    function a22(o13) {
      const l26 = [];
      for (const c27 in o13) {
        const h26 = o13[c27];
        delete h26.metadata, l26.push(h26);
      }
      return l26;
    }
  }
  clone(e11) {
    return new this.constructor().copy(this, e11);
  }
  copy(e11, t19 = true) {
    if (this.name = e11.name, this.up.copy(e11.up), this.position.copy(e11.position), this.rotation.order = e11.rotation.order, this.quaternion.copy(e11.quaternion), this.scale.copy(e11.scale), this.matrix.copy(e11.matrix), this.matrixWorld.copy(e11.matrixWorld), this.matrixAutoUpdate = e11.matrixAutoUpdate, this.matrixWorldNeedsUpdate = e11.matrixWorldNeedsUpdate, this.matrixWorldAutoUpdate = e11.matrixWorldAutoUpdate, this.layers.mask = e11.layers.mask, this.visible = e11.visible, this.castShadow = e11.castShadow, this.receiveShadow = e11.receiveShadow, this.frustumCulled = e11.frustumCulled, this.renderOrder = e11.renderOrder, this.userData = JSON.parse(JSON.stringify(e11.userData)), t19 === true)
      for (let i27 = 0; i27 < e11.children.length; i27++) {
        const r24 = e11.children[i27];
        this.add(r24.clone());
      }
    return this;
  }
};
_t8.DEFAULT_UP = new k20(0, 1, 0);
_t8.DEFAULT_MATRIX_AUTO_UPDATE = true;
_t8.DEFAULT_MATRIX_WORLD_AUTO_UPDATE = true;
var _i6 = new k20();
var ki6 = new k20();
var za2 = new k20();
var Ui4 = new k20();
var Yr5 = new k20();
var Zr5 = new k20();
var Vl2 = new k20();
var Ba2 = new k20();
var Fa2 = new k20();
var Ha2 = new k20();
var Ms2 = false;
var hi6 = class _hi {
  constructor(e11 = new k20(), t19 = new k20(), i27 = new k20()) {
    this.a = e11, this.b = t19, this.c = i27;
  }
  static getNormal(e11, t19, i27, r24) {
    r24.subVectors(i27, t19), _i6.subVectors(e11, t19), r24.cross(_i6);
    const n33 = r24.lengthSq();
    return n33 > 0 ? r24.multiplyScalar(1 / Math.sqrt(n33)) : r24.set(0, 0, 0);
  }
  // static/instance method to calculate barycentric coordinates
  // based on: http://www.blackpawn.com/texts/pointinpoly/default.html
  static getBarycoord(e11, t19, i27, r24, n33) {
    _i6.subVectors(r24, t19), ki6.subVectors(i27, t19), za2.subVectors(e11, t19);
    const a22 = _i6.dot(_i6), o13 = _i6.dot(ki6), l26 = _i6.dot(za2), c27 = ki6.dot(ki6), h26 = ki6.dot(za2), u35 = a22 * c27 - o13 * o13;
    if (u35 === 0)
      return n33.set(-2, -1, -1);
    const d34 = 1 / u35, m34 = (c27 * l26 - o13 * h26) * d34, _21 = (a22 * h26 - o13 * l26) * d34;
    return n33.set(1 - m34 - _21, _21, m34);
  }
  static containsPoint(e11, t19, i27, r24) {
    return this.getBarycoord(e11, t19, i27, r24, Ui4), Ui4.x >= 0 && Ui4.y >= 0 && Ui4.x + Ui4.y <= 1;
  }
  static getUV(e11, t19, i27, r24, n33, a22, o13, l26) {
    return Ms2 === false && (console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."), Ms2 = true), this.getInterpolation(e11, t19, i27, r24, n33, a22, o13, l26);
  }
  static getInterpolation(e11, t19, i27, r24, n33, a22, o13, l26) {
    return this.getBarycoord(e11, t19, i27, r24, Ui4), l26.setScalar(0), l26.addScaledVector(n33, Ui4.x), l26.addScaledVector(a22, Ui4.y), l26.addScaledVector(o13, Ui4.z), l26;
  }
  static isFrontFacing(e11, t19, i27, r24) {
    return _i6.subVectors(i27, t19), ki6.subVectors(e11, t19), _i6.cross(ki6).dot(r24) < 0;
  }
  set(e11, t19, i27) {
    return this.a.copy(e11), this.b.copy(t19), this.c.copy(i27), this;
  }
  setFromPointsAndIndices(e11, t19, i27, r24) {
    return this.a.copy(e11[t19]), this.b.copy(e11[i27]), this.c.copy(e11[r24]), this;
  }
  setFromAttributeAndIndices(e11, t19, i27, r24) {
    return this.a.fromBufferAttribute(e11, t19), this.b.fromBufferAttribute(e11, i27), this.c.fromBufferAttribute(e11, r24), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    return this.a.copy(e11.a), this.b.copy(e11.b), this.c.copy(e11.c), this;
  }
  getArea() {
    return _i6.subVectors(this.c, this.b), ki6.subVectors(this.a, this.b), _i6.cross(ki6).length() * 0.5;
  }
  getMidpoint(e11) {
    return e11.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3);
  }
  getNormal(e11) {
    return _hi.getNormal(this.a, this.b, this.c, e11);
  }
  getPlane(e11) {
    return e11.setFromCoplanarPoints(this.a, this.b, this.c);
  }
  getBarycoord(e11, t19) {
    return _hi.getBarycoord(e11, this.a, this.b, this.c, t19);
  }
  getUV(e11, t19, i27, r24, n33) {
    return Ms2 === false && (console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."), Ms2 = true), _hi.getInterpolation(e11, this.a, this.b, this.c, t19, i27, r24, n33);
  }
  getInterpolation(e11, t19, i27, r24, n33) {
    return _hi.getInterpolation(e11, this.a, this.b, this.c, t19, i27, r24, n33);
  }
  containsPoint(e11) {
    return _hi.containsPoint(e11, this.a, this.b, this.c);
  }
  isFrontFacing(e11) {
    return _hi.isFrontFacing(this.a, this.b, this.c, e11);
  }
  intersectsBox(e11) {
    return e11.intersectsTriangle(this);
  }
  closestPointToPoint(e11, t19) {
    const i27 = this.a, r24 = this.b, n33 = this.c;
    let a22, o13;
    Yr5.subVectors(r24, i27), Zr5.subVectors(n33, i27), Ba2.subVectors(e11, i27);
    const l26 = Yr5.dot(Ba2), c27 = Zr5.dot(Ba2);
    if (l26 <= 0 && c27 <= 0)
      return t19.copy(i27);
    Fa2.subVectors(e11, r24);
    const h26 = Yr5.dot(Fa2), u35 = Zr5.dot(Fa2);
    if (h26 >= 0 && u35 <= h26)
      return t19.copy(r24);
    const d34 = l26 * u35 - h26 * c27;
    if (d34 <= 0 && l26 >= 0 && h26 <= 0)
      return a22 = l26 / (l26 - h26), t19.copy(i27).addScaledVector(Yr5, a22);
    Ha2.subVectors(e11, n33);
    const m34 = Yr5.dot(Ha2), _21 = Zr5.dot(Ha2);
    if (_21 >= 0 && m34 <= _21)
      return t19.copy(n33);
    const y34 = m34 * c27 - l26 * _21;
    if (y34 <= 0 && c27 >= 0 && _21 <= 0)
      return o13 = c27 / (c27 - _21), t19.copy(i27).addScaledVector(Zr5, o13);
    const f40 = h26 * _21 - m34 * u35;
    if (f40 <= 0 && u35 - h26 >= 0 && m34 - _21 >= 0)
      return Vl2.subVectors(n33, r24), o13 = (u35 - h26) / (u35 - h26 + (m34 - _21)), t19.copy(r24).addScaledVector(Vl2, o13);
    const p26 = 1 / (f40 + y34 + d34);
    return a22 = y34 * p26, o13 = d34 * p26, t19.copy(i27).addScaledVector(Yr5, a22).addScaledVector(Zr5, o13);
  }
  equals(e11) {
    return e11.a.equals(this.a) && e11.b.equals(this.b) && e11.c.equals(this.c);
  }
};
var Cd2 = 0;
var pi6 = class extends Ar5 {
  constructor() {
    super(), this.isMaterial = true, Object.defineProperty(this, "id", { value: Cd2++ }), this.uuid = bi6(), this.name = "", this.type = "Material", this.blending = un4, this.side = Ei5, this.vertexColors = false, this.opacity = 1, this.transparent = false, this.blendSrc = rh2, this.blendDst = nh2, this.blendEquation = on4, this.blendSrcAlpha = null, this.blendDstAlpha = null, this.blendEquationAlpha = null, this.depthFunc = ho2, this.depthTest = true, this.depthWrite = true, this.stencilWriteMask = 255, this.stencilFunc = ed2, this.stencilRef = 0, this.stencilFuncMask = 255, this.stencilFail = La2, this.stencilZFail = La2, this.stencilZPass = La2, this.stencilWrite = false, this.clippingPlanes = null, this.clipIntersection = false, this.clipShadows = false, this.shadowSide = null, this.colorWrite = true, this.precision = null, this.polygonOffset = false, this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.dithering = false, this.alphaToCoverage = false, this.premultipliedAlpha = false, this.forceSinglePass = false, this.visible = true, this.toneMapped = true, this.userData = {}, this.version = 0, this._alphaTest = 0;
  }
  get alphaTest() {
    return this._alphaTest;
  }
  set alphaTest(e11) {
    this._alphaTest > 0 != e11 > 0 && this.version++, this._alphaTest = e11;
  }
  onBuild() {
  }
  onBeforeRender() {
  }
  onBeforeCompile() {
  }
  customProgramCacheKey() {
    return this.onBeforeCompile.toString();
  }
  setValues(e11) {
    if (e11 !== void 0)
      for (const t19 in e11) {
        const i27 = e11[t19];
        if (i27 === void 0) {
          console.warn(`THREE.Material: parameter '${t19}' has value of undefined.`);
          continue;
        }
        const r24 = this[t19];
        if (r24 === void 0) {
          console.warn(`THREE.Material: '${t19}' is not a property of THREE.${this.type}.`);
          continue;
        }
        r24 && r24.isColor ? r24.set(i27) : r24 && r24.isVector3 && i27 && i27.isVector3 ? r24.copy(i27) : this[t19] = i27;
      }
  }
  toJSON(e11) {
    const t19 = e11 === void 0 || typeof e11 == "string";
    t19 && (e11 = {
      textures: {},
      images: {}
    });
    const i27 = {
      metadata: {
        version: 4.5,
        type: "Material",
        generator: "Material.toJSON"
      }
    };
    i27.uuid = this.uuid, i27.type = this.type, this.name !== "" && (i27.name = this.name), this.color && this.color.isColor && (i27.color = this.color.getHex()), this.roughness !== void 0 && (i27.roughness = this.roughness), this.metalness !== void 0 && (i27.metalness = this.metalness), this.sheen !== void 0 && (i27.sheen = this.sheen), this.sheenColor && this.sheenColor.isColor && (i27.sheenColor = this.sheenColor.getHex()), this.sheenRoughness !== void 0 && (i27.sheenRoughness = this.sheenRoughness), this.emissive && this.emissive.isColor && (i27.emissive = this.emissive.getHex()), this.emissiveIntensity && this.emissiveIntensity !== 1 && (i27.emissiveIntensity = this.emissiveIntensity), this.specular && this.specular.isColor && (i27.specular = this.specular.getHex()), this.specularIntensity !== void 0 && (i27.specularIntensity = this.specularIntensity), this.specularColor && this.specularColor.isColor && (i27.specularColor = this.specularColor.getHex()), this.shininess !== void 0 && (i27.shininess = this.shininess), this.clearcoat !== void 0 && (i27.clearcoat = this.clearcoat), this.clearcoatRoughness !== void 0 && (i27.clearcoatRoughness = this.clearcoatRoughness), this.clearcoatMap && this.clearcoatMap.isTexture && (i27.clearcoatMap = this.clearcoatMap.toJSON(e11).uuid), this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture && (i27.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON(e11).uuid), this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture && (i27.clearcoatNormalMap = this.clearcoatNormalMap.toJSON(e11).uuid, i27.clearcoatNormalScale = this.clearcoatNormalScale.toArray()), this.iridescence !== void 0 && (i27.iridescence = this.iridescence), this.iridescenceIOR !== void 0 && (i27.iridescenceIOR = this.iridescenceIOR), this.iridescenceThicknessRange !== void 0 && (i27.iridescenceThicknessRange = this.iridescenceThicknessRange), this.iridescenceMap && this.iridescenceMap.isTexture && (i27.iridescenceMap = this.iridescenceMap.toJSON(e11).uuid), this.iridescenceThicknessMap && this.iridescenceThicknessMap.isTexture && (i27.iridescenceThicknessMap = this.iridescenceThicknessMap.toJSON(e11).uuid), this.map && this.map.isTexture && (i27.map = this.map.toJSON(e11).uuid), this.matcap && this.matcap.isTexture && (i27.matcap = this.matcap.toJSON(e11).uuid), this.alphaMap && this.alphaMap.isTexture && (i27.alphaMap = this.alphaMap.toJSON(e11).uuid), this.lightMap && this.lightMap.isTexture && (i27.lightMap = this.lightMap.toJSON(e11).uuid, i27.lightMapIntensity = this.lightMapIntensity), this.aoMap && this.aoMap.isTexture && (i27.aoMap = this.aoMap.toJSON(e11).uuid, i27.aoMapIntensity = this.aoMapIntensity), this.bumpMap && this.bumpMap.isTexture && (i27.bumpMap = this.bumpMap.toJSON(e11).uuid, i27.bumpScale = this.bumpScale), this.normalMap && this.normalMap.isTexture && (i27.normalMap = this.normalMap.toJSON(e11).uuid, i27.normalMapType = this.normalMapType, i27.normalScale = this.normalScale.toArray()), this.displacementMap && this.displacementMap.isTexture && (i27.displacementMap = this.displacementMap.toJSON(e11).uuid, i27.displacementScale = this.displacementScale, i27.displacementBias = this.displacementBias), this.roughnessMap && this.roughnessMap.isTexture && (i27.roughnessMap = this.roughnessMap.toJSON(e11).uuid), this.metalnessMap && this.metalnessMap.isTexture && (i27.metalnessMap = this.metalnessMap.toJSON(e11).uuid), this.emissiveMap && this.emissiveMap.isTexture && (i27.emissiveMap = this.emissiveMap.toJSON(e11).uuid), this.specularMap && this.specularMap.isTexture && (i27.specularMap = this.specularMap.toJSON(e11).uuid), this.specularIntensityMap && this.specularIntensityMap.isTexture && (i27.specularIntensityMap = this.specularIntensityMap.toJSON(e11).uuid), this.specularColorMap && this.specularColorMap.isTexture && (i27.specularColorMap = this.specularColorMap.toJSON(e11).uuid), this.envMap && this.envMap.isTexture && (i27.envMap = this.envMap.toJSON(e11).uuid, this.combine !== void 0 && (i27.combine = this.combine)), this.envMapIntensity !== void 0 && (i27.envMapIntensity = this.envMapIntensity), this.reflectivity !== void 0 && (i27.reflectivity = this.reflectivity), this.refractionRatio !== void 0 && (i27.refractionRatio = this.refractionRatio), this.gradientMap && this.gradientMap.isTexture && (i27.gradientMap = this.gradientMap.toJSON(e11).uuid), this.transmission !== void 0 && (i27.transmission = this.transmission), this.transmissionMap && this.transmissionMap.isTexture && (i27.transmissionMap = this.transmissionMap.toJSON(e11).uuid), this.thickness !== void 0 && (i27.thickness = this.thickness), this.thicknessMap && this.thicknessMap.isTexture && (i27.thicknessMap = this.thicknessMap.toJSON(e11).uuid), this.attenuationDistance !== void 0 && this.attenuationDistance !== 1 / 0 && (i27.attenuationDistance = this.attenuationDistance), this.attenuationColor !== void 0 && (i27.attenuationColor = this.attenuationColor.getHex()), this.size !== void 0 && (i27.size = this.size), this.shadowSide !== null && (i27.shadowSide = this.shadowSide), this.sizeAttenuation !== void 0 && (i27.sizeAttenuation = this.sizeAttenuation), this.blending !== un4 && (i27.blending = this.blending), this.side !== Ei5 && (i27.side = this.side), this.vertexColors && (i27.vertexColors = true), this.opacity < 1 && (i27.opacity = this.opacity), this.transparent === true && (i27.transparent = this.transparent), i27.depthFunc = this.depthFunc, i27.depthTest = this.depthTest, i27.depthWrite = this.depthWrite, i27.colorWrite = this.colorWrite, i27.stencilWrite = this.stencilWrite, i27.stencilWriteMask = this.stencilWriteMask, i27.stencilFunc = this.stencilFunc, i27.stencilRef = this.stencilRef, i27.stencilFuncMask = this.stencilFuncMask, i27.stencilFail = this.stencilFail, i27.stencilZFail = this.stencilZFail, i27.stencilZPass = this.stencilZPass, this.rotation !== void 0 && this.rotation !== 0 && (i27.rotation = this.rotation), this.polygonOffset === true && (i27.polygonOffset = true), this.polygonOffsetFactor !== 0 && (i27.polygonOffsetFactor = this.polygonOffsetFactor), this.polygonOffsetUnits !== 0 && (i27.polygonOffsetUnits = this.polygonOffsetUnits), this.linewidth !== void 0 && this.linewidth !== 1 && (i27.linewidth = this.linewidth), this.dashSize !== void 0 && (i27.dashSize = this.dashSize), this.gapSize !== void 0 && (i27.gapSize = this.gapSize), this.scale !== void 0 && (i27.scale = this.scale), this.dithering === true && (i27.dithering = true), this.alphaTest > 0 && (i27.alphaTest = this.alphaTest), this.alphaToCoverage === true && (i27.alphaToCoverage = this.alphaToCoverage), this.premultipliedAlpha === true && (i27.premultipliedAlpha = this.premultipliedAlpha), this.forceSinglePass === true && (i27.forceSinglePass = this.forceSinglePass), this.wireframe === true && (i27.wireframe = this.wireframe), this.wireframeLinewidth > 1 && (i27.wireframeLinewidth = this.wireframeLinewidth), this.wireframeLinecap !== "round" && (i27.wireframeLinecap = this.wireframeLinecap), this.wireframeLinejoin !== "round" && (i27.wireframeLinejoin = this.wireframeLinejoin), this.flatShading === true && (i27.flatShading = this.flatShading), this.visible === false && (i27.visible = false), this.toneMapped === false && (i27.toneMapped = false), this.fog === false && (i27.fog = false), Object.keys(this.userData).length > 0 && (i27.userData = this.userData);
    function r24(n33) {
      const a22 = [];
      for (const o13 in n33) {
        const l26 = n33[o13];
        delete l26.metadata, a22.push(l26);
      }
      return a22;
    }
    if (t19) {
      const n33 = r24(e11.textures), a22 = r24(e11.images);
      n33.length > 0 && (i27.textures = n33), a22.length > 0 && (i27.images = a22);
    }
    return i27;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    this.name = e11.name, this.blending = e11.blending, this.side = e11.side, this.vertexColors = e11.vertexColors, this.opacity = e11.opacity, this.transparent = e11.transparent, this.blendSrc = e11.blendSrc, this.blendDst = e11.blendDst, this.blendEquation = e11.blendEquation, this.blendSrcAlpha = e11.blendSrcAlpha, this.blendDstAlpha = e11.blendDstAlpha, this.blendEquationAlpha = e11.blendEquationAlpha, this.depthFunc = e11.depthFunc, this.depthTest = e11.depthTest, this.depthWrite = e11.depthWrite, this.stencilWriteMask = e11.stencilWriteMask, this.stencilFunc = e11.stencilFunc, this.stencilRef = e11.stencilRef, this.stencilFuncMask = e11.stencilFuncMask, this.stencilFail = e11.stencilFail, this.stencilZFail = e11.stencilZFail, this.stencilZPass = e11.stencilZPass, this.stencilWrite = e11.stencilWrite;
    const t19 = e11.clippingPlanes;
    let i27 = null;
    if (t19 !== null) {
      const r24 = t19.length;
      i27 = new Array(r24);
      for (let n33 = 0; n33 !== r24; ++n33)
        i27[n33] = t19[n33].clone();
    }
    return this.clippingPlanes = i27, this.clipIntersection = e11.clipIntersection, this.clipShadows = e11.clipShadows, this.shadowSide = e11.shadowSide, this.colorWrite = e11.colorWrite, this.precision = e11.precision, this.polygonOffset = e11.polygonOffset, this.polygonOffsetFactor = e11.polygonOffsetFactor, this.polygonOffsetUnits = e11.polygonOffsetUnits, this.dithering = e11.dithering, this.alphaTest = e11.alphaTest, this.alphaToCoverage = e11.alphaToCoverage, this.premultipliedAlpha = e11.premultipliedAlpha, this.forceSinglePass = e11.forceSinglePass, this.visible = e11.visible, this.toneMapped = e11.toneMapped, this.userData = JSON.parse(JSON.stringify(e11.userData)), this;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
};
var _h2 = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
var vi6 = { h: 0, s: 0, l: 0 };
var ws2 = { h: 0, s: 0, l: 0 };
function Va2(s18, e11, t19) {
  return t19 < 0 && (t19 += 1), t19 > 1 && (t19 -= 1), t19 < 1 / 6 ? s18 + (e11 - s18) * 6 * t19 : t19 < 1 / 2 ? e11 : t19 < 2 / 3 ? s18 + (e11 - s18) * 6 * (2 / 3 - t19) : s18;
}
var ze7 = class {
  constructor(e11, t19, i27) {
    return this.isColor = true, this.r = 1, this.g = 1, this.b = 1, t19 === void 0 && i27 === void 0 ? this.set(e11) : this.setRGB(e11, t19, i27);
  }
  set(e11) {
    return e11 && e11.isColor ? this.copy(e11) : typeof e11 == "number" ? this.setHex(e11) : typeof e11 == "string" && this.setStyle(e11), this;
  }
  setScalar(e11) {
    return this.r = e11, this.g = e11, this.b = e11, this;
  }
  setHex(e11, t19 = yi6) {
    return e11 = Math.floor(e11), this.r = (e11 >> 16 & 255) / 255, this.g = (e11 >> 8 & 255) / 255, this.b = (e11 & 255) / 255, ii6.toWorkingColorSpace(this, t19), this;
  }
  setRGB(e11, t19, i27, r24 = ii6.workingColorSpace) {
    return this.r = e11, this.g = t19, this.b = i27, ii6.toWorkingColorSpace(this, r24), this;
  }
  setHSL(e11, t19, i27, r24 = ii6.workingColorSpace) {
    if (e11 = Ro2(e11, 1), t19 = Gt6(t19, 0, 1), i27 = Gt6(i27, 0, 1), t19 === 0)
      this.r = this.g = this.b = i27;
    else {
      const n33 = i27 <= 0.5 ? i27 * (1 + t19) : i27 + t19 - i27 * t19, a22 = 2 * i27 - n33;
      this.r = Va2(a22, n33, e11 + 1 / 3), this.g = Va2(a22, n33, e11), this.b = Va2(a22, n33, e11 - 1 / 3);
    }
    return ii6.toWorkingColorSpace(this, r24), this;
  }
  setStyle(e11, t19 = yi6) {
    function i27(n33) {
      n33 !== void 0 && parseFloat(n33) < 1 && console.warn("THREE.Color: Alpha component of " + e11 + " will be ignored.");
    }
    let r24;
    if (r24 = /^(\w+)\(([^\)]*)\)/.exec(e11)) {
      let n33;
      const a22 = r24[1], o13 = r24[2];
      switch (a22) {
        case "rgb":
        case "rgba":
          if (n33 = /^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o13))
            return this.r = Math.min(255, parseInt(n33[1], 10)) / 255, this.g = Math.min(255, parseInt(n33[2], 10)) / 255, this.b = Math.min(255, parseInt(n33[3], 10)) / 255, ii6.toWorkingColorSpace(this, t19), i27(n33[4]), this;
          if (n33 = /^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o13))
            return this.r = Math.min(100, parseInt(n33[1], 10)) / 100, this.g = Math.min(100, parseInt(n33[2], 10)) / 100, this.b = Math.min(100, parseInt(n33[3], 10)) / 100, ii6.toWorkingColorSpace(this, t19), i27(n33[4]), this;
          break;
        case "hsl":
        case "hsla":
          if (n33 = /^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o13)) {
            const l26 = parseFloat(n33[1]) / 360, c27 = parseFloat(n33[2]) / 100, h26 = parseFloat(n33[3]) / 100;
            return i27(n33[4]), this.setHSL(l26, c27, h26, t19);
          }
          break;
        default:
          console.warn("THREE.Color: Unknown color model " + e11);
      }
    } else if (r24 = /^\#([A-Fa-f\d]+)$/.exec(e11)) {
      const n33 = r24[1], a22 = n33.length;
      if (a22 === 3)
        return this.setRGB(
          parseInt(n33.charAt(0), 16) / 15,
          parseInt(n33.charAt(1), 16) / 15,
          parseInt(n33.charAt(2), 16) / 15,
          t19
        );
      if (a22 === 6)
        return this.setHex(parseInt(n33, 16), t19);
      console.warn("THREE.Color: Invalid hex color " + e11);
    } else if (e11 && e11.length > 0)
      return this.setColorName(e11, t19);
    return this;
  }
  setColorName(e11, t19 = yi6) {
    const i27 = _h2[e11.toLowerCase()];
    return i27 !== void 0 ? this.setHex(i27, t19) : console.warn("THREE.Color: Unknown color " + e11), this;
  }
  clone() {
    return new this.constructor(this.r, this.g, this.b);
  }
  copy(e11) {
    return this.r = e11.r, this.g = e11.g, this.b = e11.b, this;
  }
  copySRGBToLinear(e11) {
    return this.r = mn4(e11.r), this.g = mn4(e11.g), this.b = mn4(e11.b), this;
  }
  copyLinearToSRGB(e11) {
    return this.r = Ra2(e11.r), this.g = Ra2(e11.g), this.b = Ra2(e11.b), this;
  }
  convertSRGBToLinear() {
    return this.copySRGBToLinear(this), this;
  }
  convertLinearToSRGB() {
    return this.copyLinearToSRGB(this), this;
  }
  getHex(e11 = yi6) {
    return ii6.fromWorkingColorSpace(Yt6.copy(this), e11), Gt6(Yt6.r * 255, 0, 255) << 16 ^ Gt6(Yt6.g * 255, 0, 255) << 8 ^ Gt6(Yt6.b * 255, 0, 255) << 0;
  }
  getHexString(e11 = yi6) {
    return ("000000" + this.getHex(e11).toString(16)).slice(-6);
  }
  getHSL(e11, t19 = ii6.workingColorSpace) {
    ii6.fromWorkingColorSpace(Yt6.copy(this), t19);
    const i27 = Yt6.r, r24 = Yt6.g, n33 = Yt6.b, a22 = Math.max(i27, r24, n33), o13 = Math.min(i27, r24, n33);
    let l26, c27;
    const h26 = (o13 + a22) / 2;
    if (o13 === a22)
      l26 = 0, c27 = 0;
    else {
      const u35 = a22 - o13;
      switch (c27 = h26 <= 0.5 ? u35 / (a22 + o13) : u35 / (2 - a22 - o13), a22) {
        case i27:
          l26 = (r24 - n33) / u35 + (r24 < n33 ? 6 : 0);
          break;
        case r24:
          l26 = (n33 - i27) / u35 + 2;
          break;
        case n33:
          l26 = (i27 - r24) / u35 + 4;
          break;
      }
      l26 /= 6;
    }
    return e11.h = l26, e11.s = c27, e11.l = h26, e11;
  }
  getRGB(e11, t19 = ii6.workingColorSpace) {
    return ii6.fromWorkingColorSpace(Yt6.copy(this), t19), e11.r = Yt6.r, e11.g = Yt6.g, e11.b = Yt6.b, e11;
  }
  getStyle(e11 = yi6) {
    ii6.fromWorkingColorSpace(Yt6.copy(this), e11);
    const t19 = Yt6.r, i27 = Yt6.g, r24 = Yt6.b;
    return e11 !== yi6 ? `color(${e11} ${t19.toFixed(3)} ${i27.toFixed(3)} ${r24.toFixed(3)})` : `rgb(${t19 * 255 | 0},${i27 * 255 | 0},${r24 * 255 | 0})`;
  }
  offsetHSL(e11, t19, i27) {
    return this.getHSL(vi6), vi6.h += e11, vi6.s += t19, vi6.l += i27, this.setHSL(vi6.h, vi6.s, vi6.l), this;
  }
  add(e11) {
    return this.r += e11.r, this.g += e11.g, this.b += e11.b, this;
  }
  addColors(e11, t19) {
    return this.r = e11.r + t19.r, this.g = e11.g + t19.g, this.b = e11.b + t19.b, this;
  }
  addScalar(e11) {
    return this.r += e11, this.g += e11, this.b += e11, this;
  }
  sub(e11) {
    return this.r = Math.max(0, this.r - e11.r), this.g = Math.max(0, this.g - e11.g), this.b = Math.max(0, this.b - e11.b), this;
  }
  multiply(e11) {
    return this.r *= e11.r, this.g *= e11.g, this.b *= e11.b, this;
  }
  multiplyScalar(e11) {
    return this.r *= e11, this.g *= e11, this.b *= e11, this;
  }
  lerp(e11, t19) {
    return this.r += (e11.r - this.r) * t19, this.g += (e11.g - this.g) * t19, this.b += (e11.b - this.b) * t19, this;
  }
  lerpColors(e11, t19, i27) {
    return this.r = e11.r + (t19.r - e11.r) * i27, this.g = e11.g + (t19.g - e11.g) * i27, this.b = e11.b + (t19.b - e11.b) * i27, this;
  }
  lerpHSL(e11, t19) {
    this.getHSL(vi6), e11.getHSL(ws2);
    const i27 = Zn5(vi6.h, ws2.h, t19), r24 = Zn5(vi6.s, ws2.s, t19), n33 = Zn5(vi6.l, ws2.l, t19);
    return this.setHSL(i27, r24, n33), this;
  }
  setFromVector3(e11) {
    return this.r = e11.x, this.g = e11.y, this.b = e11.z, this;
  }
  applyMatrix3(e11) {
    const t19 = this.r, i27 = this.g, r24 = this.b, n33 = e11.elements;
    return this.r = n33[0] * t19 + n33[3] * i27 + n33[6] * r24, this.g = n33[1] * t19 + n33[4] * i27 + n33[7] * r24, this.b = n33[2] * t19 + n33[5] * i27 + n33[8] * r24, this;
  }
  equals(e11) {
    return e11.r === this.r && e11.g === this.g && e11.b === this.b;
  }
  fromArray(e11, t19 = 0) {
    return this.r = e11[t19], this.g = e11[t19 + 1], this.b = e11[t19 + 2], this;
  }
  toArray(e11 = [], t19 = 0) {
    return e11[t19] = this.r, e11[t19 + 1] = this.g, e11[t19 + 2] = this.b, e11;
  }
  fromBufferAttribute(e11, t19) {
    return this.r = e11.getX(t19), this.g = e11.getY(t19), this.b = e11.getZ(t19), this;
  }
  toJSON() {
    return this.getHex();
  }
  *[Symbol.iterator]() {
    yield this.r, yield this.g, yield this.b;
  }
};
var Yt6 = new ze7();
ze7.NAMES = _h2;
var xi6 = class extends pi6 {
  constructor(e11) {
    super(), this.isMeshBasicMaterial = true, this.type = "MeshBasicMaterial", this.color = new ze7(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = ra2, this.reflectivity = 1, this.refractionRatio = 0.98, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.specularMap = e11.specularMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.combine = e11.combine, this.reflectivity = e11.reflectivity, this.refractionRatio = e11.refractionRatio, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.fog = e11.fog, this;
  }
};
var Ct7 = new k20();
var Ss2 = new We7();
var Ft6 = class {
  constructor(e11, t19, i27 = false) {
    if (Array.isArray(e11))
      throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");
    this.isBufferAttribute = true, this.name = "", this.array = e11, this.itemSize = t19, this.count = e11 !== void 0 ? e11.length / t19 : 0, this.normalized = i27, this.usage = go2, this.updateRange = { offset: 0, count: -1 }, this.version = 0;
  }
  onUploadCallback() {
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
  setUsage(e11) {
    return this.usage = e11, this;
  }
  copy(e11) {
    return this.name = e11.name, this.array = new e11.array.constructor(e11.array), this.itemSize = e11.itemSize, this.count = e11.count, this.normalized = e11.normalized, this.usage = e11.usage, this;
  }
  copyAt(e11, t19, i27) {
    e11 *= this.itemSize, i27 *= t19.itemSize;
    for (let r24 = 0, n33 = this.itemSize; r24 < n33; r24++)
      this.array[e11 + r24] = t19.array[i27 + r24];
    return this;
  }
  copyArray(e11) {
    return this.array.set(e11), this;
  }
  applyMatrix3(e11) {
    if (this.itemSize === 2)
      for (let t19 = 0, i27 = this.count; t19 < i27; t19++)
        Ss2.fromBufferAttribute(this, t19), Ss2.applyMatrix3(e11), this.setXY(t19, Ss2.x, Ss2.y);
    else if (this.itemSize === 3)
      for (let t19 = 0, i27 = this.count; t19 < i27; t19++)
        Ct7.fromBufferAttribute(this, t19), Ct7.applyMatrix3(e11), this.setXYZ(t19, Ct7.x, Ct7.y, Ct7.z);
    return this;
  }
  applyMatrix4(e11) {
    for (let t19 = 0, i27 = this.count; t19 < i27; t19++)
      Ct7.fromBufferAttribute(this, t19), Ct7.applyMatrix4(e11), this.setXYZ(t19, Ct7.x, Ct7.y, Ct7.z);
    return this;
  }
  applyNormalMatrix(e11) {
    for (let t19 = 0, i27 = this.count; t19 < i27; t19++)
      Ct7.fromBufferAttribute(this, t19), Ct7.applyNormalMatrix(e11), this.setXYZ(t19, Ct7.x, Ct7.y, Ct7.z);
    return this;
  }
  transformDirection(e11) {
    for (let t19 = 0, i27 = this.count; t19 < i27; t19++)
      Ct7.fromBufferAttribute(this, t19), Ct7.transformDirection(e11), this.setXYZ(t19, Ct7.x, Ct7.y, Ct7.z);
    return this;
  }
  set(e11, t19 = 0) {
    return this.array.set(e11, t19), this;
  }
  getX(e11) {
    let t19 = this.array[e11 * this.itemSize];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  setX(e11, t19) {
    return this.normalized && (t19 = mt11(t19, this.array)), this.array[e11 * this.itemSize] = t19, this;
  }
  getY(e11) {
    let t19 = this.array[e11 * this.itemSize + 1];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  setY(e11, t19) {
    return this.normalized && (t19 = mt11(t19, this.array)), this.array[e11 * this.itemSize + 1] = t19, this;
  }
  getZ(e11) {
    let t19 = this.array[e11 * this.itemSize + 2];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  setZ(e11, t19) {
    return this.normalized && (t19 = mt11(t19, this.array)), this.array[e11 * this.itemSize + 2] = t19, this;
  }
  getW(e11) {
    let t19 = this.array[e11 * this.itemSize + 3];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  setW(e11, t19) {
    return this.normalized && (t19 = mt11(t19, this.array)), this.array[e11 * this.itemSize + 3] = t19, this;
  }
  setXY(e11, t19, i27) {
    return e11 *= this.itemSize, this.normalized && (t19 = mt11(t19, this.array), i27 = mt11(i27, this.array)), this.array[e11 + 0] = t19, this.array[e11 + 1] = i27, this;
  }
  setXYZ(e11, t19, i27, r24) {
    return e11 *= this.itemSize, this.normalized && (t19 = mt11(t19, this.array), i27 = mt11(i27, this.array), r24 = mt11(r24, this.array)), this.array[e11 + 0] = t19, this.array[e11 + 1] = i27, this.array[e11 + 2] = r24, this;
  }
  setXYZW(e11, t19, i27, r24, n33) {
    return e11 *= this.itemSize, this.normalized && (t19 = mt11(t19, this.array), i27 = mt11(i27, this.array), r24 = mt11(r24, this.array), n33 = mt11(n33, this.array)), this.array[e11 + 0] = t19, this.array[e11 + 1] = i27, this.array[e11 + 2] = r24, this.array[e11 + 3] = n33, this;
  }
  onUpload(e11) {
    return this.onUploadCallback = e11, this;
  }
  clone() {
    return new this.constructor(this.array, this.itemSize).copy(this);
  }
  toJSON() {
    const e11 = {
      itemSize: this.itemSize,
      type: this.array.constructor.name,
      array: Array.from(this.array),
      normalized: this.normalized
    };
    return this.name !== "" && (e11.name = this.name), this.usage !== go2 && (e11.usage = this.usage), (this.updateRange.offset !== 0 || this.updateRange.count !== -1) && (e11.updateRange = this.updateRange), e11;
  }
  copyColorsArray() {
    console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.");
  }
  copyVector2sArray() {
    console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.");
  }
  copyVector3sArray() {
    console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.");
  }
  copyVector4sArray() {
    console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.");
  }
};
var vh2 = class extends Ft6 {
  constructor(e11, t19, i27) {
    super(new Uint16Array(e11), t19, i27);
  }
};
var yh2 = class extends Ft6 {
  constructor(e11, t19, i27) {
    super(new Uint32Array(e11), t19, i27);
  }
};
var xt6 = class extends Ft6 {
  constructor(e11, t19, i27) {
    super(new Float32Array(e11), t19, i27);
  }
};
var Rd2 = 0;
var li6 = new He6();
var Ga2 = new _t8();
var Jr5 = new k20();
var ni6 = new Vi3();
var Bn5 = new Vi3();
var Ot8 = new k20();
var Xt6 = class _Xt extends Ar5 {
  constructor() {
    super(), this.isBufferGeometry = true, Object.defineProperty(this, "id", { value: Rd2++ }), this.uuid = bi6(), this.name = "", this.type = "BufferGeometry", this.index = null, this.attributes = {}, this.morphAttributes = {}, this.morphTargetsRelative = false, this.groups = [], this.boundingBox = null, this.boundingSphere = null, this.drawRange = { start: 0, count: 1 / 0 }, this.userData = {};
  }
  getIndex() {
    return this.index;
  }
  setIndex(e11) {
    return Array.isArray(e11) ? this.index = new (dh2(e11) ? yh2 : vh2)(e11, 1) : this.index = e11, this;
  }
  getAttribute(e11) {
    return this.attributes[e11];
  }
  setAttribute(e11, t19) {
    return this.attributes[e11] = t19, this;
  }
  deleteAttribute(e11) {
    return delete this.attributes[e11], this;
  }
  hasAttribute(e11) {
    return this.attributes[e11] !== void 0;
  }
  addGroup(e11, t19, i27 = 0) {
    this.groups.push({
      start: e11,
      count: t19,
      materialIndex: i27
    });
  }
  clearGroups() {
    this.groups = [];
  }
  setDrawRange(e11, t19) {
    this.drawRange.start = e11, this.drawRange.count = t19;
  }
  applyMatrix4(e11) {
    const t19 = this.attributes.position;
    t19 !== void 0 && (t19.applyMatrix4(e11), t19.needsUpdate = true);
    const i27 = this.attributes.normal;
    if (i27 !== void 0) {
      const n33 = new Ke5().getNormalMatrix(e11);
      i27.applyNormalMatrix(n33), i27.needsUpdate = true;
    }
    const r24 = this.attributes.tangent;
    return r24 !== void 0 && (r24.transformDirection(e11), r24.needsUpdate = true), this.boundingBox !== null && this.computeBoundingBox(), this.boundingSphere !== null && this.computeBoundingSphere(), this;
  }
  applyQuaternion(e11) {
    return li6.makeRotationFromQuaternion(e11), this.applyMatrix4(li6), this;
  }
  rotateX(e11) {
    return li6.makeRotationX(e11), this.applyMatrix4(li6), this;
  }
  rotateY(e11) {
    return li6.makeRotationY(e11), this.applyMatrix4(li6), this;
  }
  rotateZ(e11) {
    return li6.makeRotationZ(e11), this.applyMatrix4(li6), this;
  }
  translate(e11, t19, i27) {
    return li6.makeTranslation(e11, t19, i27), this.applyMatrix4(li6), this;
  }
  scale(e11, t19, i27) {
    return li6.makeScale(e11, t19, i27), this.applyMatrix4(li6), this;
  }
  lookAt(e11) {
    return Ga2.lookAt(e11), Ga2.updateMatrix(), this.applyMatrix4(Ga2.matrix), this;
  }
  center() {
    return this.computeBoundingBox(), this.boundingBox.getCenter(Jr5).negate(), this.translate(Jr5.x, Jr5.y, Jr5.z), this;
  }
  setFromPoints(e11) {
    const t19 = [];
    for (let i27 = 0, r24 = e11.length; i27 < r24; i27++) {
      const n33 = e11[i27];
      t19.push(n33.x, n33.y, n33.z || 0);
    }
    return this.setAttribute("position", new xt6(t19, 3)), this;
  }
  computeBoundingBox() {
    this.boundingBox === null && (this.boundingBox = new Vi3());
    const e11 = this.attributes.position, t19 = this.morphAttributes.position;
    if (e11 && e11.isGLBufferAttribute) {
      console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".', this), this.boundingBox.set(
        new k20(-1 / 0, -1 / 0, -1 / 0),
        new k20(1 / 0, 1 / 0, 1 / 0)
      );
      return;
    }
    if (e11 !== void 0) {
      if (this.boundingBox.setFromBufferAttribute(e11), t19)
        for (let i27 = 0, r24 = t19.length; i27 < r24; i27++) {
          const n33 = t19[i27];
          ni6.setFromBufferAttribute(n33), this.morphTargetsRelative ? (Ot8.addVectors(this.boundingBox.min, ni6.min), this.boundingBox.expandByPoint(Ot8), Ot8.addVectors(this.boundingBox.max, ni6.max), this.boundingBox.expandByPoint(Ot8)) : (this.boundingBox.expandByPoint(ni6.min), this.boundingBox.expandByPoint(ni6.max));
        }
    } else
      this.boundingBox.makeEmpty();
    (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this);
  }
  computeBoundingSphere() {
    this.boundingSphere === null && (this.boundingSphere = new Gi2());
    const e11 = this.attributes.position, t19 = this.morphAttributes.position;
    if (e11 && e11.isGLBufferAttribute) {
      console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".', this), this.boundingSphere.set(new k20(), 1 / 0);
      return;
    }
    if (e11) {
      const i27 = this.boundingSphere.center;
      if (ni6.setFromBufferAttribute(e11), t19)
        for (let n33 = 0, a22 = t19.length; n33 < a22; n33++) {
          const o13 = t19[n33];
          Bn5.setFromBufferAttribute(o13), this.morphTargetsRelative ? (Ot8.addVectors(ni6.min, Bn5.min), ni6.expandByPoint(Ot8), Ot8.addVectors(ni6.max, Bn5.max), ni6.expandByPoint(Ot8)) : (ni6.expandByPoint(Bn5.min), ni6.expandByPoint(Bn5.max));
        }
      ni6.getCenter(i27);
      let r24 = 0;
      for (let n33 = 0, a22 = e11.count; n33 < a22; n33++)
        Ot8.fromBufferAttribute(e11, n33), r24 = Math.max(r24, i27.distanceToSquared(Ot8));
      if (t19)
        for (let n33 = 0, a22 = t19.length; n33 < a22; n33++) {
          const o13 = t19[n33], l26 = this.morphTargetsRelative;
          for (let c27 = 0, h26 = o13.count; c27 < h26; c27++)
            Ot8.fromBufferAttribute(o13, c27), l26 && (Jr5.fromBufferAttribute(e11, c27), Ot8.add(Jr5)), r24 = Math.max(r24, i27.distanceToSquared(Ot8));
        }
      this.boundingSphere.radius = Math.sqrt(r24), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this);
    }
  }
  computeTangents() {
    const e11 = this.index, t19 = this.attributes;
    if (e11 === null || t19.position === void 0 || t19.normal === void 0 || t19.uv === void 0) {
      console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");
      return;
    }
    const i27 = e11.array, r24 = t19.position.array, n33 = t19.normal.array, a22 = t19.uv.array, o13 = r24.length / 3;
    this.hasAttribute("tangent") === false && this.setAttribute("tangent", new Ft6(new Float32Array(4 * o13), 4));
    const l26 = this.getAttribute("tangent").array, c27 = [], h26 = [];
    for (let C21 = 0; C21 < o13; C21++)
      c27[C21] = new k20(), h26[C21] = new k20();
    const u35 = new k20(), d34 = new k20(), m34 = new k20(), _21 = new We7(), y34 = new We7(), f40 = new We7(), p26 = new k20(), A18 = new k20();
    function M13(C21, G16, z21) {
      u35.fromArray(r24, C21 * 3), d34.fromArray(r24, G16 * 3), m34.fromArray(r24, z21 * 3), _21.fromArray(a22, C21 * 2), y34.fromArray(a22, G16 * 2), f40.fromArray(a22, z21 * 2), d34.sub(u35), m34.sub(u35), y34.sub(_21), f40.sub(_21);
      const U20 = 1 / (y34.x * f40.y - f40.x * y34.y);
      isFinite(U20) && (p26.copy(d34).multiplyScalar(f40.y).addScaledVector(m34, -y34.y).multiplyScalar(U20), A18.copy(m34).multiplyScalar(y34.x).addScaledVector(d34, -f40.x).multiplyScalar(U20), c27[C21].add(p26), c27[G16].add(p26), c27[z21].add(p26), h26[C21].add(A18), h26[G16].add(A18), h26[z21].add(A18));
    }
    let E25 = this.groups;
    E25.length === 0 && (E25 = [{
      start: 0,
      count: i27.length
    }]);
    for (let C21 = 0, G16 = E25.length; C21 < G16; ++C21) {
      const z21 = E25[C21], U20 = z21.start, V16 = z21.count;
      for (let j19 = U20, W11 = U20 + V16; j19 < W11; j19 += 3)
        M13(
          i27[j19 + 0],
          i27[j19 + 1],
          i27[j19 + 2]
        );
    }
    const w31 = new k20(), I18 = new k20(), D18 = new k20(), P20 = new k20();
    function x36(C21) {
      D18.fromArray(n33, C21 * 3), P20.copy(D18);
      const G16 = c27[C21];
      w31.copy(G16), w31.sub(D18.multiplyScalar(D18.dot(G16))).normalize(), I18.crossVectors(P20, G16);
      const z21 = I18.dot(h26[C21]) < 0 ? -1 : 1;
      l26[C21 * 4] = w31.x, l26[C21 * 4 + 1] = w31.y, l26[C21 * 4 + 2] = w31.z, l26[C21 * 4 + 3] = z21;
    }
    for (let C21 = 0, G16 = E25.length; C21 < G16; ++C21) {
      const z21 = E25[C21], U20 = z21.start, V16 = z21.count;
      for (let j19 = U20, W11 = U20 + V16; j19 < W11; j19 += 3)
        x36(i27[j19 + 0]), x36(i27[j19 + 1]), x36(i27[j19 + 2]);
    }
  }
  computeVertexNormals() {
    const e11 = this.index, t19 = this.getAttribute("position");
    if (t19 !== void 0) {
      let i27 = this.getAttribute("normal");
      if (i27 === void 0)
        i27 = new Ft6(new Float32Array(t19.count * 3), 3), this.setAttribute("normal", i27);
      else
        for (let d34 = 0, m34 = i27.count; d34 < m34; d34++)
          i27.setXYZ(d34, 0, 0, 0);
      const r24 = new k20(), n33 = new k20(), a22 = new k20(), o13 = new k20(), l26 = new k20(), c27 = new k20(), h26 = new k20(), u35 = new k20();
      if (e11)
        for (let d34 = 0, m34 = e11.count; d34 < m34; d34 += 3) {
          const _21 = e11.getX(d34 + 0), y34 = e11.getX(d34 + 1), f40 = e11.getX(d34 + 2);
          r24.fromBufferAttribute(t19, _21), n33.fromBufferAttribute(t19, y34), a22.fromBufferAttribute(t19, f40), h26.subVectors(a22, n33), u35.subVectors(r24, n33), h26.cross(u35), o13.fromBufferAttribute(i27, _21), l26.fromBufferAttribute(i27, y34), c27.fromBufferAttribute(i27, f40), o13.add(h26), l26.add(h26), c27.add(h26), i27.setXYZ(_21, o13.x, o13.y, o13.z), i27.setXYZ(y34, l26.x, l26.y, l26.z), i27.setXYZ(f40, c27.x, c27.y, c27.z);
        }
      else
        for (let d34 = 0, m34 = t19.count; d34 < m34; d34 += 3)
          r24.fromBufferAttribute(t19, d34 + 0), n33.fromBufferAttribute(t19, d34 + 1), a22.fromBufferAttribute(t19, d34 + 2), h26.subVectors(a22, n33), u35.subVectors(r24, n33), h26.cross(u35), i27.setXYZ(d34 + 0, h26.x, h26.y, h26.z), i27.setXYZ(d34 + 1, h26.x, h26.y, h26.z), i27.setXYZ(d34 + 2, h26.x, h26.y, h26.z);
      this.normalizeNormals(), i27.needsUpdate = true;
    }
  }
  merge() {
    return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."), this;
  }
  normalizeNormals() {
    const e11 = this.attributes.normal;
    for (let t19 = 0, i27 = e11.count; t19 < i27; t19++)
      Ot8.fromBufferAttribute(e11, t19), Ot8.normalize(), e11.setXYZ(t19, Ot8.x, Ot8.y, Ot8.z);
  }
  toNonIndexed() {
    function e11(o13, l26) {
      const c27 = o13.array, h26 = o13.itemSize, u35 = o13.normalized, d34 = new c27.constructor(l26.length * h26);
      let m34 = 0, _21 = 0;
      for (let y34 = 0, f40 = l26.length; y34 < f40; y34++) {
        o13.isInterleavedBufferAttribute ? m34 = l26[y34] * o13.data.stride + o13.offset : m34 = l26[y34] * h26;
        for (let p26 = 0; p26 < h26; p26++)
          d34[_21++] = c27[m34++];
      }
      return new Ft6(d34, h26, u35);
    }
    if (this.index === null)
      return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."), this;
    const t19 = new _Xt(), i27 = this.index.array, r24 = this.attributes;
    for (const o13 in r24) {
      const l26 = r24[o13], c27 = e11(l26, i27);
      t19.setAttribute(o13, c27);
    }
    const n33 = this.morphAttributes;
    for (const o13 in n33) {
      const l26 = [], c27 = n33[o13];
      for (let h26 = 0, u35 = c27.length; h26 < u35; h26++) {
        const d34 = c27[h26], m34 = e11(d34, i27);
        l26.push(m34);
      }
      t19.morphAttributes[o13] = l26;
    }
    t19.morphTargetsRelative = this.morphTargetsRelative;
    const a22 = this.groups;
    for (let o13 = 0, l26 = a22.length; o13 < l26; o13++) {
      const c27 = a22[o13];
      t19.addGroup(c27.start, c27.count, c27.materialIndex);
    }
    return t19;
  }
  toJSON() {
    const e11 = {
      metadata: {
        version: 4.5,
        type: "BufferGeometry",
        generator: "BufferGeometry.toJSON"
      }
    };
    if (e11.uuid = this.uuid, e11.type = this.type, this.name !== "" && (e11.name = this.name), Object.keys(this.userData).length > 0 && (e11.userData = this.userData), this.parameters !== void 0) {
      const l26 = this.parameters;
      for (const c27 in l26)
        l26[c27] !== void 0 && (e11[c27] = l26[c27]);
      return e11;
    }
    e11.data = { attributes: {} };
    const t19 = this.index;
    t19 !== null && (e11.data.index = {
      type: t19.array.constructor.name,
      array: Array.prototype.slice.call(t19.array)
    });
    const i27 = this.attributes;
    for (const l26 in i27) {
      const c27 = i27[l26];
      e11.data.attributes[l26] = c27.toJSON(e11.data);
    }
    const r24 = {};
    let n33 = false;
    for (const l26 in this.morphAttributes) {
      const c27 = this.morphAttributes[l26], h26 = [];
      for (let u35 = 0, d34 = c27.length; u35 < d34; u35++) {
        const m34 = c27[u35];
        h26.push(m34.toJSON(e11.data));
      }
      h26.length > 0 && (r24[l26] = h26, n33 = true);
    }
    n33 && (e11.data.morphAttributes = r24, e11.data.morphTargetsRelative = this.morphTargetsRelative);
    const a22 = this.groups;
    a22.length > 0 && (e11.data.groups = JSON.parse(JSON.stringify(a22)));
    const o13 = this.boundingSphere;
    return o13 !== null && (e11.data.boundingSphere = {
      center: o13.center.toArray(),
      radius: o13.radius
    }), e11;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  copy(e11) {
    this.index = null, this.attributes = {}, this.morphAttributes = {}, this.groups = [], this.boundingBox = null, this.boundingSphere = null;
    const t19 = {};
    this.name = e11.name;
    const i27 = e11.index;
    i27 !== null && this.setIndex(i27.clone(t19));
    const r24 = e11.attributes;
    for (const c27 in r24) {
      const h26 = r24[c27];
      this.setAttribute(c27, h26.clone(t19));
    }
    const n33 = e11.morphAttributes;
    for (const c27 in n33) {
      const h26 = [], u35 = n33[c27];
      for (let d34 = 0, m34 = u35.length; d34 < m34; d34++)
        h26.push(u35[d34].clone(t19));
      this.morphAttributes[c27] = h26;
    }
    this.morphTargetsRelative = e11.morphTargetsRelative;
    const a22 = e11.groups;
    for (let c27 = 0, h26 = a22.length; c27 < h26; c27++) {
      const u35 = a22[c27];
      this.addGroup(u35.start, u35.count, u35.materialIndex);
    }
    const o13 = e11.boundingBox;
    o13 !== null && (this.boundingBox = o13.clone());
    const l26 = e11.boundingSphere;
    return l26 !== null && (this.boundingSphere = l26.clone()), this.drawRange.start = e11.drawRange.start, this.drawRange.count = e11.drawRange.count, this.userData = e11.userData, this;
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
};
var Gl2 = new He6();
var wi6 = new No2();
var Ts2 = new Gi2();
var Wl2 = new k20();
var Kr5 = new k20();
var $r5 = new k20();
var Qr5 = new k20();
var Wa2 = new k20();
var Es2 = new k20();
var As2 = new We7();
var Ls2 = new We7();
var Cs2 = new We7();
var jl2 = new k20();
var Xl2 = new k20();
var ql2 = new k20();
var Rs2 = new k20();
var Ns2 = new k20();
var Rt8 = class extends _t8 {
  constructor(e11 = new Xt6(), t19 = new xi6()) {
    super(), this.isMesh = true, this.type = "Mesh", this.geometry = e11, this.material = t19, this.updateMorphTargets();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), e11.morphTargetInfluences !== void 0 && (this.morphTargetInfluences = e11.morphTargetInfluences.slice()), e11.morphTargetDictionary !== void 0 && (this.morphTargetDictionary = Object.assign({}, e11.morphTargetDictionary)), this.material = e11.material, this.geometry = e11.geometry, this;
  }
  updateMorphTargets() {
    const e11 = this.geometry.morphAttributes, t19 = Object.keys(e11);
    if (t19.length > 0) {
      const i27 = e11[t19[0]];
      if (i27 !== void 0) {
        this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (let r24 = 0, n33 = i27.length; r24 < n33; r24++) {
          const a22 = i27[r24].name || String(r24);
          this.morphTargetInfluences.push(0), this.morphTargetDictionary[a22] = r24;
        }
      }
    }
  }
  getVertexPosition(e11, t19) {
    const i27 = this.geometry, r24 = i27.attributes.position, n33 = i27.morphAttributes.position, a22 = i27.morphTargetsRelative;
    t19.fromBufferAttribute(r24, e11);
    const o13 = this.morphTargetInfluences;
    if (n33 && o13) {
      Es2.set(0, 0, 0);
      for (let l26 = 0, c27 = n33.length; l26 < c27; l26++) {
        const h26 = o13[l26], u35 = n33[l26];
        h26 !== 0 && (Wa2.fromBufferAttribute(u35, e11), a22 ? Es2.addScaledVector(Wa2, h26) : Es2.addScaledVector(Wa2.sub(t19), h26));
      }
      t19.add(Es2);
    }
    return this.isSkinnedMesh && this.applyBoneTransform(e11, t19), t19;
  }
  raycast(e11, t19) {
    const i27 = this.geometry, r24 = this.material, n33 = this.matrixWorld;
    if (r24 === void 0 || (i27.boundingSphere === null && i27.computeBoundingSphere(), Ts2.copy(i27.boundingSphere), Ts2.applyMatrix4(n33), wi6.copy(e11.ray).recast(e11.near), Ts2.containsPoint(wi6.origin) === false && (wi6.intersectSphere(Ts2, Wl2) === null || wi6.origin.distanceToSquared(Wl2) > (e11.far - e11.near) ** 2)) || (Gl2.copy(n33).invert(), wi6.copy(e11.ray).applyMatrix4(Gl2), i27.boundingBox !== null && wi6.intersectsBox(i27.boundingBox) === false))
      return;
    let a22;
    const o13 = i27.index, l26 = i27.attributes.position, c27 = i27.attributes.uv, h26 = i27.attributes.uv2, u35 = i27.attributes.normal, d34 = i27.groups, m34 = i27.drawRange;
    if (o13 !== null)
      if (Array.isArray(r24))
        for (let _21 = 0, y34 = d34.length; _21 < y34; _21++) {
          const f40 = d34[_21], p26 = r24[f40.materialIndex], A18 = Math.max(f40.start, m34.start), M13 = Math.min(o13.count, Math.min(f40.start + f40.count, m34.start + m34.count));
          for (let E25 = A18, w31 = M13; E25 < w31; E25 += 3) {
            const I18 = o13.getX(E25), D18 = o13.getX(E25 + 1), P20 = o13.getX(E25 + 2);
            a22 = Ps2(this, p26, e11, wi6, c27, h26, u35, I18, D18, P20), a22 && (a22.faceIndex = Math.floor(E25 / 3), a22.face.materialIndex = f40.materialIndex, t19.push(a22));
          }
        }
      else {
        const _21 = Math.max(0, m34.start), y34 = Math.min(o13.count, m34.start + m34.count);
        for (let f40 = _21, p26 = y34; f40 < p26; f40 += 3) {
          const A18 = o13.getX(f40), M13 = o13.getX(f40 + 1), E25 = o13.getX(f40 + 2);
          a22 = Ps2(this, r24, e11, wi6, c27, h26, u35, A18, M13, E25), a22 && (a22.faceIndex = Math.floor(f40 / 3), t19.push(a22));
        }
      }
    else if (l26 !== void 0)
      if (Array.isArray(r24))
        for (let _21 = 0, y34 = d34.length; _21 < y34; _21++) {
          const f40 = d34[_21], p26 = r24[f40.materialIndex], A18 = Math.max(f40.start, m34.start), M13 = Math.min(l26.count, Math.min(f40.start + f40.count, m34.start + m34.count));
          for (let E25 = A18, w31 = M13; E25 < w31; E25 += 3) {
            const I18 = E25, D18 = E25 + 1, P20 = E25 + 2;
            a22 = Ps2(this, p26, e11, wi6, c27, h26, u35, I18, D18, P20), a22 && (a22.faceIndex = Math.floor(E25 / 3), a22.face.materialIndex = f40.materialIndex, t19.push(a22));
          }
        }
      else {
        const _21 = Math.max(0, m34.start), y34 = Math.min(l26.count, m34.start + m34.count);
        for (let f40 = _21, p26 = y34; f40 < p26; f40 += 3) {
          const A18 = f40, M13 = f40 + 1, E25 = f40 + 2;
          a22 = Ps2(this, r24, e11, wi6, c27, h26, u35, A18, M13, E25), a22 && (a22.faceIndex = Math.floor(f40 / 3), t19.push(a22));
        }
      }
  }
};
function Nd2(s18, e11, t19, i27, r24, n33, a22, o13) {
  let l26;
  if (e11.side === ti6 ? l26 = i27.intersectTriangle(a22, n33, r24, true, o13) : l26 = i27.intersectTriangle(r24, n33, a22, e11.side === Ei5, o13), l26 === null)
    return null;
  Ns2.copy(o13), Ns2.applyMatrix4(s18.matrixWorld);
  const c27 = t19.ray.origin.distanceTo(Ns2);
  return c27 < t19.near || c27 > t19.far ? null : {
    distance: c27,
    point: Ns2.clone(),
    object: s18
  };
}
function Ps2(s18, e11, t19, i27, r24, n33, a22, o13, l26, c27) {
  s18.getVertexPosition(o13, Kr5), s18.getVertexPosition(l26, $r5), s18.getVertexPosition(c27, Qr5);
  const h26 = Nd2(s18, e11, t19, i27, Kr5, $r5, Qr5, Rs2);
  if (h26) {
    r24 && (As2.fromBufferAttribute(r24, o13), Ls2.fromBufferAttribute(r24, l26), Cs2.fromBufferAttribute(r24, c27), h26.uv = hi6.getInterpolation(Rs2, Kr5, $r5, Qr5, As2, Ls2, Cs2, new We7())), n33 && (As2.fromBufferAttribute(n33, o13), Ls2.fromBufferAttribute(n33, l26), Cs2.fromBufferAttribute(n33, c27), h26.uv2 = hi6.getInterpolation(Rs2, Kr5, $r5, Qr5, As2, Ls2, Cs2, new We7())), a22 && (jl2.fromBufferAttribute(a22, o13), Xl2.fromBufferAttribute(a22, l26), ql2.fromBufferAttribute(a22, c27), h26.normal = hi6.getInterpolation(Rs2, Kr5, $r5, Qr5, jl2, Xl2, ql2, new k20()), h26.normal.dot(i27.direction) > 0 && h26.normal.multiplyScalar(-1));
    const u35 = {
      a: o13,
      b: l26,
      c: c27,
      normal: new k20(),
      materialIndex: 0
    };
    hi6.getNormal(Kr5, $r5, Qr5, u35.normal), h26.face = u35;
  }
  return h26;
}
var Lr5 = class _Lr extends Xt6 {
  constructor(e11 = 1, t19 = 1, i27 = 1, r24 = 1, n33 = 1, a22 = 1) {
    super(), this.type = "BoxGeometry", this.parameters = {
      width: e11,
      height: t19,
      depth: i27,
      widthSegments: r24,
      heightSegments: n33,
      depthSegments: a22
    };
    const o13 = this;
    r24 = Math.floor(r24), n33 = Math.floor(n33), a22 = Math.floor(a22);
    const l26 = [], c27 = [], h26 = [], u35 = [];
    let d34 = 0, m34 = 0;
    _21("z", "y", "x", -1, -1, i27, t19, e11, a22, n33, 0), _21("z", "y", "x", 1, -1, i27, t19, -e11, a22, n33, 1), _21("x", "z", "y", 1, 1, e11, i27, t19, r24, a22, 2), _21("x", "z", "y", 1, -1, e11, i27, -t19, r24, a22, 3), _21("x", "y", "z", 1, -1, e11, t19, i27, r24, n33, 4), _21("x", "y", "z", -1, -1, e11, t19, -i27, r24, n33, 5), this.setIndex(l26), this.setAttribute("position", new xt6(c27, 3)), this.setAttribute("normal", new xt6(h26, 3)), this.setAttribute("uv", new xt6(u35, 2));
    function _21(y34, f40, p26, A18, M13, E25, w31, I18, D18, P20, x36) {
      const C21 = E25 / D18, G16 = w31 / P20, z21 = E25 / 2, U20 = w31 / 2, V16 = I18 / 2, j19 = D18 + 1, W11 = P20 + 1;
      let re8 = 0, $25 = 0;
      const ie8 = new k20();
      for (let le7 = 0; le7 < W11; le7++) {
        const fe7 = le7 * G16 - U20;
        for (let ue8 = 0; ue8 < j19; ue8++) {
          const H16 = ue8 * C21 - z21;
          ie8[y34] = H16 * A18, ie8[f40] = fe7 * M13, ie8[p26] = V16, c27.push(ie8.x, ie8.y, ie8.z), ie8[y34] = 0, ie8[f40] = 0, ie8[p26] = I18 > 0 ? 1 : -1, h26.push(ie8.x, ie8.y, ie8.z), u35.push(ue8 / D18), u35.push(1 - le7 / P20), re8 += 1;
        }
      }
      for (let le7 = 0; le7 < P20; le7++)
        for (let fe7 = 0; fe7 < D18; fe7++) {
          const ue8 = d34 + fe7 + j19 * le7, H16 = d34 + fe7 + j19 * (le7 + 1), q14 = d34 + (fe7 + 1) + j19 * (le7 + 1), oe7 = d34 + (fe7 + 1) + j19 * le7;
          l26.push(ue8, H16, oe7), l26.push(H16, q14, oe7), $25 += 6;
        }
      o13.addGroup(m34, $25, x36), m34 += $25, d34 += re8;
    }
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _Lr(e11.width, e11.height, e11.depth, e11.widthSegments, e11.heightSegments, e11.depthSegments);
  }
};
function Sn5(s18) {
  const e11 = {};
  for (const t19 in s18) {
    e11[t19] = {};
    for (const i27 in s18[t19]) {
      const r24 = s18[t19][i27];
      r24 && (r24.isColor || r24.isMatrix3 || r24.isMatrix4 || r24.isVector2 || r24.isVector3 || r24.isVector4 || r24.isTexture || r24.isQuaternion) ? r24.isRenderTargetTexture ? (console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."), e11[t19][i27] = null) : e11[t19][i27] = r24.clone() : Array.isArray(r24) ? e11[t19][i27] = r24.slice() : e11[t19][i27] = r24;
    }
  }
  return e11;
}
function Qt5(s18) {
  const e11 = {};
  for (let t19 = 0; t19 < s18.length; t19++) {
    const i27 = Sn5(s18[t19]);
    for (const r24 in i27)
      e11[r24] = i27[r24];
  }
  return e11;
}
function Pd2(s18) {
  const e11 = [];
  for (let t19 = 0; t19 < s18.length; t19++)
    e11.push(s18[t19].clone());
  return e11;
}
function xh2(s18) {
  return s18.getRenderTarget() === null && s18.outputEncoding === rt12 ? yi6 : aa2;
}
var Id2 = { clone: Sn5, merge: Qt5 };
var Dd2 = `void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`;
var kd2 = `void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;
var wr5 = class extends pi6 {
  constructor(e11) {
    super(), this.isShaderMaterial = true, this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, this.uniformsGroups = [], this.vertexShader = Dd2, this.fragmentShader = kd2, this.linewidth = 1, this.wireframe = false, this.wireframeLinewidth = 1, this.fog = false, this.lights = false, this.clipping = false, this.forceSinglePass = true, this.extensions = {
      derivatives: false,
      // set to use derivatives
      fragDepth: false,
      // set to use fragment depth values
      drawBuffers: false,
      // set to use draw buffers
      shaderTextureLOD: false
      // set to use shader texture LOD
    }, this.defaultAttributeValues = {
      color: [1, 1, 1],
      uv: [0, 0],
      uv2: [0, 0]
    }, this.index0AttributeName = void 0, this.uniformsNeedUpdate = false, this.glslVersion = null, e11 !== void 0 && this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.fragmentShader = e11.fragmentShader, this.vertexShader = e11.vertexShader, this.uniforms = Sn5(e11.uniforms), this.uniformsGroups = Pd2(e11.uniformsGroups), this.defines = Object.assign({}, e11.defines), this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.fog = e11.fog, this.lights = e11.lights, this.clipping = e11.clipping, this.extensions = Object.assign({}, e11.extensions), this.glslVersion = e11.glslVersion, this;
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    t19.glslVersion = this.glslVersion, t19.uniforms = {};
    for (const r24 in this.uniforms) {
      const n33 = this.uniforms[r24].value;
      n33 && n33.isTexture ? t19.uniforms[r24] = {
        type: "t",
        value: n33.toJSON(e11).uuid
      } : n33 && n33.isColor ? t19.uniforms[r24] = {
        type: "c",
        value: n33.getHex()
      } : n33 && n33.isVector2 ? t19.uniforms[r24] = {
        type: "v2",
        value: n33.toArray()
      } : n33 && n33.isVector3 ? t19.uniforms[r24] = {
        type: "v3",
        value: n33.toArray()
      } : n33 && n33.isVector4 ? t19.uniforms[r24] = {
        type: "v4",
        value: n33.toArray()
      } : n33 && n33.isMatrix3 ? t19.uniforms[r24] = {
        type: "m3",
        value: n33.toArray()
      } : n33 && n33.isMatrix4 ? t19.uniforms[r24] = {
        type: "m4",
        value: n33.toArray()
      } : t19.uniforms[r24] = {
        value: n33
      };
    }
    Object.keys(this.defines).length > 0 && (t19.defines = this.defines), t19.vertexShader = this.vertexShader, t19.fragmentShader = this.fragmentShader;
    const i27 = {};
    for (const r24 in this.extensions)
      this.extensions[r24] === true && (i27[r24] = true);
    return Object.keys(i27).length > 0 && (t19.extensions = i27), t19;
  }
};
var bh2 = class extends _t8 {
  constructor() {
    super(), this.isCamera = true, this.type = "Camera", this.matrixWorldInverse = new He6(), this.projectionMatrix = new He6(), this.projectionMatrixInverse = new He6();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.matrixWorldInverse.copy(e11.matrixWorldInverse), this.projectionMatrix.copy(e11.projectionMatrix), this.projectionMatrixInverse.copy(e11.projectionMatrixInverse), this;
  }
  getWorldDirection(e11) {
    this.updateWorldMatrix(true, false);
    const t19 = this.matrixWorld.elements;
    return e11.set(-t19[8], -t19[9], -t19[10]).normalize();
  }
  updateMatrixWorld(e11) {
    super.updateMatrixWorld(e11), this.matrixWorldInverse.copy(this.matrixWorld).invert();
  }
  updateWorldMatrix(e11, t19) {
    super.updateWorldMatrix(e11, t19), this.matrixWorldInverse.copy(this.matrixWorld).invert();
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var Bt6 = class extends bh2 {
  constructor(e11 = 50, t19 = 1, i27 = 0.1, r24 = 2e3) {
    super(), this.isPerspectiveCamera = true, this.type = "PerspectiveCamera", this.fov = e11, this.zoom = 1, this.near = i27, this.far = r24, this.focus = 10, this.aspect = t19, this.view = null, this.filmGauge = 35, this.filmOffset = 0, this.updateProjectionMatrix();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.fov = e11.fov, this.zoom = e11.zoom, this.near = e11.near, this.far = e11.far, this.focus = e11.focus, this.aspect = e11.aspect, this.view = e11.view === null ? null : Object.assign({}, e11.view), this.filmGauge = e11.filmGauge, this.filmOffset = e11.filmOffset, this;
  }
  /**
   * Sets the FOV by focal length in respect to the current .filmGauge.
   *
   * The default film gauge is 35, so that the focal length can be specified for
   * a 35mm (full frame) camera.
   *
   * Values for focal length and film gauge must have the same unit.
   */
  setFocalLength(e11) {
    const t19 = 0.5 * this.getFilmHeight() / e11;
    this.fov = wn5 * 2 * Math.atan(t19), this.updateProjectionMatrix();
  }
  /**
   * Calculates the focal length from the current .fov and .filmGauge.
   */
  getFocalLength() {
    const e11 = Math.tan(pn5 * 0.5 * this.fov);
    return 0.5 * this.getFilmHeight() / e11;
  }
  getEffectiveFOV() {
    return wn5 * 2 * Math.atan(
      Math.tan(pn5 * 0.5 * this.fov) / this.zoom
    );
  }
  getFilmWidth() {
    return this.filmGauge * Math.min(this.aspect, 1);
  }
  getFilmHeight() {
    return this.filmGauge / Math.max(this.aspect, 1);
  }
  /**
   * Sets an offset in a larger frustum. This is useful for multi-window or
   * multi-monitor/multi-machine setups.
   *
   * For example, if you have 3x2 monitors and each monitor is 1920x1080 and
   * the monitors are in grid like this
   *
   *   +---+---+---+
   *   | A | B | C |
   *   +---+---+---+
   *   | D | E | F |
   *   +---+---+---+
   *
   * then for each monitor you would call it like this
   *
   *   const w = 1920;
   *   const h = 1080;
   *   const fullWidth = w * 3;
   *   const fullHeight = h * 2;
   *
   *   --A--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );
   *   --B--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );
   *   --C--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );
   *   --D--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );
   *   --E--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );
   *   --F--
   *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );
   *
   *   Note there is no reason monitors have to be the same size or in a grid.
   */
  setViewOffset(e11, t19, i27, r24, n33, a22) {
    this.aspect = e11 / t19, this.view === null && (this.view = {
      enabled: true,
      fullWidth: 1,
      fullHeight: 1,
      offsetX: 0,
      offsetY: 0,
      width: 1,
      height: 1
    }), this.view.enabled = true, this.view.fullWidth = e11, this.view.fullHeight = t19, this.view.offsetX = i27, this.view.offsetY = r24, this.view.width = n33, this.view.height = a22, this.updateProjectionMatrix();
  }
  clearViewOffset() {
    this.view !== null && (this.view.enabled = false), this.updateProjectionMatrix();
  }
  updateProjectionMatrix() {
    const e11 = this.near;
    let t19 = e11 * Math.tan(pn5 * 0.5 * this.fov) / this.zoom, i27 = 2 * t19, r24 = this.aspect * i27, n33 = -0.5 * r24;
    const a22 = this.view;
    if (this.view !== null && this.view.enabled) {
      const l26 = a22.fullWidth, c27 = a22.fullHeight;
      n33 += a22.offsetX * r24 / l26, t19 -= a22.offsetY * i27 / c27, r24 *= a22.width / l26, i27 *= a22.height / c27;
    }
    const o13 = this.filmOffset;
    o13 !== 0 && (n33 += e11 * o13 / this.getFilmWidth()), this.projectionMatrix.makePerspective(n33, n33 + r24, t19, t19 - i27, e11, this.far), this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return t19.object.fov = this.fov, t19.object.zoom = this.zoom, t19.object.near = this.near, t19.object.far = this.far, t19.object.focus = this.focus, t19.object.aspect = this.aspect, this.view !== null && (t19.object.view = Object.assign({}, this.view)), t19.object.filmGauge = this.filmGauge, t19.object.filmOffset = this.filmOffset, t19;
  }
};
var en4 = -90;
var tn4 = 1;
var Ud2 = class extends _t8 {
  constructor(e11, t19, i27) {
    super(), this.type = "CubeCamera", this.renderTarget = i27;
    const r24 = new Bt6(en4, tn4, e11, t19);
    r24.layers = this.layers, r24.up.set(0, 1, 0), r24.lookAt(1, 0, 0), this.add(r24);
    const n33 = new Bt6(en4, tn4, e11, t19);
    n33.layers = this.layers, n33.up.set(0, 1, 0), n33.lookAt(-1, 0, 0), this.add(n33);
    const a22 = new Bt6(en4, tn4, e11, t19);
    a22.layers = this.layers, a22.up.set(0, 0, -1), a22.lookAt(0, 1, 0), this.add(a22);
    const o13 = new Bt6(en4, tn4, e11, t19);
    o13.layers = this.layers, o13.up.set(0, 0, 1), o13.lookAt(0, -1, 0), this.add(o13);
    const l26 = new Bt6(en4, tn4, e11, t19);
    l26.layers = this.layers, l26.up.set(0, 1, 0), l26.lookAt(0, 0, 1), this.add(l26);
    const c27 = new Bt6(en4, tn4, e11, t19);
    c27.layers = this.layers, c27.up.set(0, 1, 0), c27.lookAt(0, 0, -1), this.add(c27);
  }
  update(e11, t19) {
    this.parent === null && this.updateMatrixWorld();
    const i27 = this.renderTarget, [r24, n33, a22, o13, l26, c27] = this.children, h26 = e11.getRenderTarget(), u35 = e11.toneMapping, d34 = e11.xr.enabled;
    e11.toneMapping = Fi4, e11.xr.enabled = false;
    const m34 = i27.texture.generateMipmaps;
    i27.texture.generateMipmaps = false, e11.setRenderTarget(i27, 0), e11.render(t19, r24), e11.setRenderTarget(i27, 1), e11.render(t19, n33), e11.setRenderTarget(i27, 2), e11.render(t19, a22), e11.setRenderTarget(i27, 3), e11.render(t19, o13), e11.setRenderTarget(i27, 4), e11.render(t19, l26), i27.texture.generateMipmaps = m34, e11.setRenderTarget(i27, 5), e11.render(t19, c27), e11.setRenderTarget(h26), e11.toneMapping = u35, e11.xr.enabled = d34, i27.texture.needsPMREMUpdate = true;
  }
};
var Mh2 = class extends Wt7 {
  constructor(e11, t19, i27, r24, n33, a22, o13, l26, c27, h26) {
    e11 = e11 !== void 0 ? e11 : [], t19 = t19 !== void 0 ? t19 : yn5, super(e11, t19, i27, r24, n33, a22, o13, l26, c27, h26), this.isCubeTexture = true, this.flipY = false;
  }
  get images() {
    return this.image;
  }
  set images(e11) {
    this.image = e11;
  }
};
var Od2 = class extends Mr5 {
  constructor(e11 = 1, t19 = {}) {
    super(e11, e11, t19), this.isWebGLCubeRenderTarget = true;
    const i27 = { width: e11, height: e11, depth: 1 }, r24 = [i27, i27, i27, i27, i27, i27];
    this.texture = new Mh2(r24, t19.mapping, t19.wrapS, t19.wrapT, t19.magFilter, t19.minFilter, t19.format, t19.type, t19.anisotropy, t19.encoding), this.texture.isRenderTargetTexture = true, this.texture.generateMipmaps = t19.generateMipmaps !== void 0 ? t19.generateMipmaps : false, this.texture.minFilter = t19.minFilter !== void 0 ? t19.minFilter : Vt6;
  }
  fromEquirectangularTexture(e11, t19) {
    this.texture.type = t19.type, this.texture.encoding = t19.encoding, this.texture.generateMipmaps = t19.generateMipmaps, this.texture.minFilter = t19.minFilter, this.texture.magFilter = t19.magFilter;
    const i27 = {
      uniforms: {
        tEquirect: { value: null }
      },
      vertexShader: (
        /* glsl */
        `

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`
      ),
      fragmentShader: (
        /* glsl */
        `

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`
      )
    }, r24 = new Lr5(5, 5, 5), n33 = new wr5({
      name: "CubemapFromEquirect",
      uniforms: Sn5(i27.uniforms),
      vertexShader: i27.vertexShader,
      fragmentShader: i27.fragmentShader,
      side: ti6,
      blending: tr5
    });
    n33.uniforms.tEquirect.value = t19;
    const a22 = new Rt8(r24, n33), o13 = t19.minFilter;
    return t19.minFilter === Hi3 && (t19.minFilter = Vt6), new Ud2(1, 10, this).update(e11, a22), t19.minFilter = o13, a22.geometry.dispose(), a22.material.dispose(), this;
  }
  clear(e11, t19, i27, r24) {
    const n33 = e11.getRenderTarget();
    for (let a22 = 0; a22 < 6; a22++)
      e11.setRenderTarget(this, a22), e11.clear(t19, i27, r24);
    e11.setRenderTarget(n33);
  }
};
var ja2 = new k20();
var zd2 = new k20();
var Bd2 = new Ke5();
var hr5 = class {
  constructor(e11 = new k20(1, 0, 0), t19 = 0) {
    this.isPlane = true, this.normal = e11, this.constant = t19;
  }
  set(e11, t19) {
    return this.normal.copy(e11), this.constant = t19, this;
  }
  setComponents(e11, t19, i27, r24) {
    return this.normal.set(e11, t19, i27), this.constant = r24, this;
  }
  setFromNormalAndCoplanarPoint(e11, t19) {
    return this.normal.copy(e11), this.constant = -t19.dot(this.normal), this;
  }
  setFromCoplanarPoints(e11, t19, i27) {
    const r24 = ja2.subVectors(i27, t19).cross(zd2.subVectors(e11, t19)).normalize();
    return this.setFromNormalAndCoplanarPoint(r24, e11), this;
  }
  copy(e11) {
    return this.normal.copy(e11.normal), this.constant = e11.constant, this;
  }
  normalize() {
    const e11 = 1 / this.normal.length();
    return this.normal.multiplyScalar(e11), this.constant *= e11, this;
  }
  negate() {
    return this.constant *= -1, this.normal.negate(), this;
  }
  distanceToPoint(e11) {
    return this.normal.dot(e11) + this.constant;
  }
  distanceToSphere(e11) {
    return this.distanceToPoint(e11.center) - e11.radius;
  }
  projectPoint(e11, t19) {
    return t19.copy(e11).addScaledVector(this.normal, -this.distanceToPoint(e11));
  }
  intersectLine(e11, t19) {
    const i27 = e11.delta(ja2), r24 = this.normal.dot(i27);
    if (r24 === 0)
      return this.distanceToPoint(e11.start) === 0 ? t19.copy(e11.start) : null;
    const n33 = -(e11.start.dot(this.normal) + this.constant) / r24;
    return n33 < 0 || n33 > 1 ? null : t19.copy(e11.start).addScaledVector(i27, n33);
  }
  intersectsLine(e11) {
    const t19 = this.distanceToPoint(e11.start), i27 = this.distanceToPoint(e11.end);
    return t19 < 0 && i27 > 0 || i27 < 0 && t19 > 0;
  }
  intersectsBox(e11) {
    return e11.intersectsPlane(this);
  }
  intersectsSphere(e11) {
    return e11.intersectsPlane(this);
  }
  coplanarPoint(e11) {
    return e11.copy(this.normal).multiplyScalar(-this.constant);
  }
  applyMatrix4(e11, t19) {
    const i27 = t19 || Bd2.getNormalMatrix(e11), r24 = this.coplanarPoint(ja2).applyMatrix4(e11), n33 = this.normal.applyMatrix3(i27).normalize();
    return this.constant = -r24.dot(n33), this;
  }
  translate(e11) {
    return this.constant -= e11.dot(this.normal), this;
  }
  equals(e11) {
    return e11.normal.equals(this.normal) && e11.constant === this.constant;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var lr5 = new Gi2();
var Is = new k20();
var Po2 = class {
  constructor(e11 = new hr5(), t19 = new hr5(), i27 = new hr5(), r24 = new hr5(), n33 = new hr5(), a22 = new hr5()) {
    this.planes = [e11, t19, i27, r24, n33, a22];
  }
  set(e11, t19, i27, r24, n33, a22) {
    const o13 = this.planes;
    return o13[0].copy(e11), o13[1].copy(t19), o13[2].copy(i27), o13[3].copy(r24), o13[4].copy(n33), o13[5].copy(a22), this;
  }
  copy(e11) {
    const t19 = this.planes;
    for (let i27 = 0; i27 < 6; i27++)
      t19[i27].copy(e11.planes[i27]);
    return this;
  }
  setFromProjectionMatrix(e11) {
    const t19 = this.planes, i27 = e11.elements, r24 = i27[0], n33 = i27[1], a22 = i27[2], o13 = i27[3], l26 = i27[4], c27 = i27[5], h26 = i27[6], u35 = i27[7], d34 = i27[8], m34 = i27[9], _21 = i27[10], y34 = i27[11], f40 = i27[12], p26 = i27[13], A18 = i27[14], M13 = i27[15];
    return t19[0].setComponents(o13 - r24, u35 - l26, y34 - d34, M13 - f40).normalize(), t19[1].setComponents(o13 + r24, u35 + l26, y34 + d34, M13 + f40).normalize(), t19[2].setComponents(o13 + n33, u35 + c27, y34 + m34, M13 + p26).normalize(), t19[3].setComponents(o13 - n33, u35 - c27, y34 - m34, M13 - p26).normalize(), t19[4].setComponents(o13 - a22, u35 - h26, y34 - _21, M13 - A18).normalize(), t19[5].setComponents(o13 + a22, u35 + h26, y34 + _21, M13 + A18).normalize(), this;
  }
  intersectsObject(e11) {
    if (e11.boundingSphere !== void 0)
      e11.boundingSphere === null && e11.computeBoundingSphere(), lr5.copy(e11.boundingSphere).applyMatrix4(e11.matrixWorld);
    else {
      const t19 = e11.geometry;
      t19.boundingSphere === null && t19.computeBoundingSphere(), lr5.copy(t19.boundingSphere).applyMatrix4(e11.matrixWorld);
    }
    return this.intersectsSphere(lr5);
  }
  intersectsSprite(e11) {
    return lr5.center.set(0, 0, 0), lr5.radius = 0.7071067811865476, lr5.applyMatrix4(e11.matrixWorld), this.intersectsSphere(lr5);
  }
  intersectsSphere(e11) {
    const t19 = this.planes, i27 = e11.center, r24 = -e11.radius;
    for (let n33 = 0; n33 < 6; n33++)
      if (t19[n33].distanceToPoint(i27) < r24)
        return false;
    return true;
  }
  intersectsBox(e11) {
    const t19 = this.planes;
    for (let i27 = 0; i27 < 6; i27++) {
      const r24 = t19[i27];
      if (Is.x = r24.normal.x > 0 ? e11.max.x : e11.min.x, Is.y = r24.normal.y > 0 ? e11.max.y : e11.min.y, Is.z = r24.normal.z > 0 ? e11.max.z : e11.min.z, r24.distanceToPoint(Is) < 0)
        return false;
    }
    return true;
  }
  containsPoint(e11) {
    const t19 = this.planes;
    for (let i27 = 0; i27 < 6; i27++)
      if (t19[i27].distanceToPoint(e11) < 0)
        return false;
    return true;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
function wh2() {
  let s18 = null, e11 = false, t19 = null, i27 = null;
  function r24(n33, a22) {
    t19(n33, a22), i27 = s18.requestAnimationFrame(r24);
  }
  return {
    start: function() {
      e11 !== true && t19 !== null && (i27 = s18.requestAnimationFrame(r24), e11 = true);
    },
    stop: function() {
      s18.cancelAnimationFrame(i27), e11 = false;
    },
    setAnimationLoop: function(n33) {
      t19 = n33;
    },
    setContext: function(n33) {
      s18 = n33;
    }
  };
}
function Fd2(s18, e11) {
  const t19 = e11.isWebGL2, i27 = /* @__PURE__ */ new WeakMap();
  function r24(c27, h26) {
    const u35 = c27.array, d34 = c27.usage, m34 = s18.createBuffer();
    s18.bindBuffer(h26, m34), s18.bufferData(h26, u35, d34), c27.onUploadCallback();
    let _21;
    if (u35 instanceof Float32Array)
      _21 = 5126;
    else if (u35 instanceof Uint16Array)
      if (c27.isFloat16BufferAttribute)
        if (t19)
          _21 = 5131;
        else
          throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");
      else
        _21 = 5123;
    else if (u35 instanceof Int16Array)
      _21 = 5122;
    else if (u35 instanceof Uint32Array)
      _21 = 5125;
    else if (u35 instanceof Int32Array)
      _21 = 5124;
    else if (u35 instanceof Int8Array)
      _21 = 5120;
    else if (u35 instanceof Uint8Array)
      _21 = 5121;
    else if (u35 instanceof Uint8ClampedArray)
      _21 = 5121;
    else
      throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: " + u35);
    return {
      buffer: m34,
      type: _21,
      bytesPerElement: u35.BYTES_PER_ELEMENT,
      version: c27.version
    };
  }
  function n33(c27, h26, u35) {
    const d34 = h26.array, m34 = h26.updateRange;
    s18.bindBuffer(u35, c27), m34.count === -1 ? s18.bufferSubData(u35, 0, d34) : (t19 ? s18.bufferSubData(
      u35,
      m34.offset * d34.BYTES_PER_ELEMENT,
      d34,
      m34.offset,
      m34.count
    ) : s18.bufferSubData(
      u35,
      m34.offset * d34.BYTES_PER_ELEMENT,
      d34.subarray(m34.offset, m34.offset + m34.count)
    ), m34.count = -1), h26.onUploadCallback();
  }
  function a22(c27) {
    return c27.isInterleavedBufferAttribute && (c27 = c27.data), i27.get(c27);
  }
  function o13(c27) {
    c27.isInterleavedBufferAttribute && (c27 = c27.data);
    const h26 = i27.get(c27);
    h26 && (s18.deleteBuffer(h26.buffer), i27.delete(c27));
  }
  function l26(c27, h26) {
    if (c27.isGLBufferAttribute) {
      const d34 = i27.get(c27);
      (!d34 || d34.version < c27.version) && i27.set(c27, {
        buffer: c27.buffer,
        type: c27.type,
        bytesPerElement: c27.elementSize,
        version: c27.version
      });
      return;
    }
    c27.isInterleavedBufferAttribute && (c27 = c27.data);
    const u35 = i27.get(c27);
    u35 === void 0 ? i27.set(c27, r24(c27, h26)) : u35.version < c27.version && (n33(u35.buffer, c27, h26), u35.version = c27.version);
  }
  return {
    get: a22,
    remove: o13,
    update: l26
  };
}
var oa2 = class _oa extends Xt6 {
  constructor(e11 = 1, t19 = 1, i27 = 1, r24 = 1) {
    super(), this.type = "PlaneGeometry", this.parameters = {
      width: e11,
      height: t19,
      widthSegments: i27,
      heightSegments: r24
    };
    const n33 = e11 / 2, a22 = t19 / 2, o13 = Math.floor(i27), l26 = Math.floor(r24), c27 = o13 + 1, h26 = l26 + 1, u35 = e11 / o13, d34 = t19 / l26, m34 = [], _21 = [], y34 = [], f40 = [];
    for (let p26 = 0; p26 < h26; p26++) {
      const A18 = p26 * d34 - a22;
      for (let M13 = 0; M13 < c27; M13++) {
        const E25 = M13 * u35 - n33;
        _21.push(E25, -A18, 0), y34.push(0, 0, 1), f40.push(M13 / o13), f40.push(1 - p26 / l26);
      }
    }
    for (let p26 = 0; p26 < l26; p26++)
      for (let A18 = 0; A18 < o13; A18++) {
        const M13 = A18 + c27 * p26, E25 = A18 + c27 * (p26 + 1), w31 = A18 + 1 + c27 * (p26 + 1), I18 = A18 + 1 + c27 * p26;
        m34.push(M13, E25, I18), m34.push(E25, w31, I18);
      }
    this.setIndex(m34), this.setAttribute("position", new xt6(_21, 3)), this.setAttribute("normal", new xt6(y34, 3)), this.setAttribute("uv", new xt6(f40, 2));
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _oa(e11.width, e11.height, e11.widthSegments, e11.heightSegments);
  }
};
var Hd2 = `#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`;
var Vd2 = `#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`;
var Gd2 = `#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`;
var Wd2 = `#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`;
var jd2 = `#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`;
var Xd2 = `#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`;
var qd2 = "vec3 transformed = vec3( position );";
var Yd2 = `vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`;
var Zd2 = `float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`;
var Jd2 = `#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`;
var Kd2 = `#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`;
var $d2 = `#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`;
var Qd2 = `#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`;
var ep2 = `#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`;
var tp2 = `#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`;
var ip2 = `#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`;
var rp2 = `#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`;
var np2 = `#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`;
var sp2 = `#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`;
var ap2 = `#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`;
var op2 = `#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`;
var lp2 = `vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`;
var cp2 = `#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`;
var hp2 = `#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`;
var up2 = `#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`;
var dp2 = `#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`;
var pp2 = "gl_FragColor = linearToOutputTexel( gl_FragColor );";
var mp2 = `vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`;
var fp2 = `#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`;
var gp2 = `#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`;
var _p2 = `#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`;
var vp2 = `#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`;
var yp2 = `#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`;
var xp2 = `#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`;
var bp2 = `#ifdef USE_FOG
	varying float vFogDepth;
#endif`;
var Mp2 = `#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`;
var wp2 = `#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`;
var Sp2 = `#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`;
var Tp2 = `#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`;
var Ep2 = `#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`;
var Ap2 = `LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`;
var Lp2 = `varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`;
var Cp2 = `uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`;
var Rp2 = `#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`;
var Np2 = `ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`;
var Pp2 = `varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`;
var Ip2 = `BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`;
var Dp2 = `varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`;
var kp2 = `PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`;
var Up2 = `struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`;
var Op2 = `
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`;
var zp2 = `#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`;
var Bp2 = `#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`;
var Fp2 = `#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`;
var Hp2 = `#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`;
var Vp2 = `#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`;
var Gp2 = `#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`;
var Wp2 = `#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`;
var jp2 = `#ifdef USE_MAP
	uniform sampler2D map;
#endif`;
var Xp2 = `#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`;
var qp2 = `#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`;
var Yp2 = `float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`;
var Zp2 = `#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`;
var Jp2 = `#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`;
var Kp2 = `#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`;
var $p2 = `#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`;
var Qp2 = `#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`;
var em2 = `float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`;
var tm2 = `#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`;
var im2 = `#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`;
var rm2 = `#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`;
var nm2 = `#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`;
var sm2 = `#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`;
var am2 = `#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`;
var om2 = `#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`;
var lm2 = `#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`;
var cm2 = `#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`;
var hm2 = `#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`;
var um2 = `vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`;
var dm2 = `#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`;
var pm2 = `vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`;
var mm2 = `#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`;
var fm2 = `#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`;
var gm2 = `float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`;
var _m2 = `#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`;
var vm2 = `#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`;
var ym2 = `#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`;
var xm2 = `#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`;
var bm2 = `float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`;
var Mm2 = `#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`;
var wm2 = `#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`;
var Sm2 = `#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`;
var Tm2 = `#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`;
var Em2 = `float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`;
var Am2 = `#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`;
var Lm2 = `#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`;
var Cm2 = `#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`;
var Rm2 = `#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`;
var Nm2 = `#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		
		vec2 lodFudge = pow( 1.95, lod ) / fullSize;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec2 fullSize = vec2( textureSize( sampler, 0 ) );
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`;
var Pm2 = `#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`;
var Im2 = `#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_UV2
	attribute vec2 uv2;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`;
var Dm2 = `#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`;
var km2 = `#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;
var Um2 = `varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`;
var Om2 = `uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var zm2 = `varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`;
var Bm2 = `#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var Fm2 = `varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`;
var Hm2 = `uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var Vm2 = `#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`;
var Gm2 = `#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`;
var Wm2 = `#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`;
var jm2 = `#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`;
var Xm2 = `varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`;
var qm2 = `uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`;
var Ym2 = `uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;
var Zm2 = `uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`;
var Jm2 = `#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`;
var Km2 = `uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var $m2 = `#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var Qm2 = `#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var ef2 = `#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`;
var tf2 = `#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var rf2 = `#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`;
var nf2 = `#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`;
var sf2 = `#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var af2 = `#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var of2 = `#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`;
var lf2 = `#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var cf2 = `#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var hf2 = `#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`;
var uf2 = `uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`;
var df2 = `uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`;
var pf2 = `#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`;
var mf2 = `uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`;
var ff2 = `uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;
var gf2 = `uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`;
var qe6 = {
  alphamap_fragment: Hd2,
  alphamap_pars_fragment: Vd2,
  alphatest_fragment: Gd2,
  alphatest_pars_fragment: Wd2,
  aomap_fragment: jd2,
  aomap_pars_fragment: Xd2,
  begin_vertex: qd2,
  beginnormal_vertex: Yd2,
  bsdfs: Zd2,
  iridescence_fragment: Jd2,
  bumpmap_pars_fragment: Kd2,
  clipping_planes_fragment: $d2,
  clipping_planes_pars_fragment: Qd2,
  clipping_planes_pars_vertex: ep2,
  clipping_planes_vertex: tp2,
  color_fragment: ip2,
  color_pars_fragment: rp2,
  color_pars_vertex: np2,
  color_vertex: sp2,
  common: ap2,
  cube_uv_reflection_fragment: op2,
  defaultnormal_vertex: lp2,
  displacementmap_pars_vertex: cp2,
  displacementmap_vertex: hp2,
  emissivemap_fragment: up2,
  emissivemap_pars_fragment: dp2,
  encodings_fragment: pp2,
  encodings_pars_fragment: mp2,
  envmap_fragment: fp2,
  envmap_common_pars_fragment: gp2,
  envmap_pars_fragment: _p2,
  envmap_pars_vertex: vp2,
  envmap_physical_pars_fragment: Rp2,
  envmap_vertex: yp2,
  fog_vertex: xp2,
  fog_pars_vertex: bp2,
  fog_fragment: Mp2,
  fog_pars_fragment: wp2,
  gradientmap_pars_fragment: Sp2,
  lightmap_fragment: Tp2,
  lightmap_pars_fragment: Ep2,
  lights_lambert_fragment: Ap2,
  lights_lambert_pars_fragment: Lp2,
  lights_pars_begin: Cp2,
  lights_toon_fragment: Np2,
  lights_toon_pars_fragment: Pp2,
  lights_phong_fragment: Ip2,
  lights_phong_pars_fragment: Dp2,
  lights_physical_fragment: kp2,
  lights_physical_pars_fragment: Up2,
  lights_fragment_begin: Op2,
  lights_fragment_maps: zp2,
  lights_fragment_end: Bp2,
  logdepthbuf_fragment: Fp2,
  logdepthbuf_pars_fragment: Hp2,
  logdepthbuf_pars_vertex: Vp2,
  logdepthbuf_vertex: Gp2,
  map_fragment: Wp2,
  map_pars_fragment: jp2,
  map_particle_fragment: Xp2,
  map_particle_pars_fragment: qp2,
  metalnessmap_fragment: Yp2,
  metalnessmap_pars_fragment: Zp2,
  morphcolor_vertex: Jp2,
  morphnormal_vertex: Kp2,
  morphtarget_pars_vertex: $p2,
  morphtarget_vertex: Qp2,
  normal_fragment_begin: em2,
  normal_fragment_maps: tm2,
  normal_pars_fragment: im2,
  normal_pars_vertex: rm2,
  normal_vertex: nm2,
  normalmap_pars_fragment: sm2,
  clearcoat_normal_fragment_begin: am2,
  clearcoat_normal_fragment_maps: om2,
  clearcoat_pars_fragment: lm2,
  iridescence_pars_fragment: cm2,
  output_fragment: hm2,
  packing: um2,
  premultiplied_alpha_fragment: dm2,
  project_vertex: pm2,
  dithering_fragment: mm2,
  dithering_pars_fragment: fm2,
  roughnessmap_fragment: gm2,
  roughnessmap_pars_fragment: _m2,
  shadowmap_pars_fragment: vm2,
  shadowmap_pars_vertex: ym2,
  shadowmap_vertex: xm2,
  shadowmask_pars_fragment: bm2,
  skinbase_vertex: Mm2,
  skinning_pars_vertex: wm2,
  skinning_vertex: Sm2,
  skinnormal_vertex: Tm2,
  specularmap_fragment: Em2,
  specularmap_pars_fragment: Am2,
  tonemapping_fragment: Lm2,
  tonemapping_pars_fragment: Cm2,
  transmission_fragment: Rm2,
  transmission_pars_fragment: Nm2,
  uv_pars_fragment: Pm2,
  uv_pars_vertex: Im2,
  uv_vertex: Dm2,
  worldpos_vertex: km2,
  background_vert: Um2,
  background_frag: Om2,
  backgroundCube_vert: zm2,
  backgroundCube_frag: Bm2,
  cube_vert: Fm2,
  cube_frag: Hm2,
  depth_vert: Vm2,
  depth_frag: Gm2,
  distanceRGBA_vert: Wm2,
  distanceRGBA_frag: jm2,
  equirect_vert: Xm2,
  equirect_frag: qm2,
  linedashed_vert: Ym2,
  linedashed_frag: Zm2,
  meshbasic_vert: Jm2,
  meshbasic_frag: Km2,
  meshlambert_vert: $m2,
  meshlambert_frag: Qm2,
  meshmatcap_vert: ef2,
  meshmatcap_frag: tf2,
  meshnormal_vert: rf2,
  meshnormal_frag: nf2,
  meshphong_vert: sf2,
  meshphong_frag: af2,
  meshphysical_vert: of2,
  meshphysical_frag: lf2,
  meshtoon_vert: cf2,
  meshtoon_frag: hf2,
  points_vert: uf2,
  points_frag: df2,
  shadow_vert: pf2,
  shadow_frag: mf2,
  sprite_vert: ff2,
  sprite_frag: gf2
};
var ve7 = {
  common: {
    diffuse: { value: new ze7(16777215) },
    opacity: { value: 1 },
    map: { value: null },
    mapTransform: { value: new Ke5() },
    alphaMap: { value: null },
    alphaMapTransform: { value: new Ke5() },
    alphaTest: { value: 0 }
  },
  specularmap: {
    specularMap: { value: null },
    specularMapTransform: { value: new Ke5() }
  },
  envmap: {
    envMap: { value: null },
    flipEnvMap: { value: -1 },
    reflectivity: { value: 1 },
    // basic, lambert, phong
    ior: { value: 1.5 },
    // physical
    refractionRatio: { value: 0.98 }
    // basic, lambert, phong
  },
  aomap: {
    aoMap: { value: null },
    aoMapIntensity: { value: 1 },
    aoMapTransform: { value: new Ke5() }
  },
  lightmap: {
    lightMap: { value: null },
    lightMapIntensity: { value: 1 },
    lightMapTransform: { value: new Ke5() }
  },
  bumpmap: {
    bumpMap: { value: null },
    bumpMapTransform: { value: new Ke5() },
    bumpScale: { value: 1 }
  },
  normalmap: {
    normalMap: { value: null },
    normalMapTransform: { value: new Ke5() },
    normalScale: { value: new We7(1, 1) }
  },
  displacementmap: {
    displacementMap: { value: null },
    displacementMapTransform: { value: new Ke5() },
    displacementScale: { value: 1 },
    displacementBias: { value: 0 }
  },
  emissivemap: {
    emissiveMap: { value: null },
    emissiveMapTransform: { value: new Ke5() }
  },
  metalnessmap: {
    metalnessMap: { value: null },
    metalnessMapTransform: { value: new Ke5() }
  },
  roughnessmap: {
    roughnessMap: { value: null },
    roughnessMapTransform: { value: new Ke5() }
  },
  gradientmap: {
    gradientMap: { value: null }
  },
  fog: {
    fogDensity: { value: 25e-5 },
    fogNear: { value: 1 },
    fogFar: { value: 2e3 },
    fogColor: { value: new ze7(16777215) }
  },
  lights: {
    ambientLightColor: { value: [] },
    lightProbe: { value: [] },
    directionalLights: { value: [], properties: {
      direction: {},
      color: {}
    } },
    directionalLightShadows: { value: [], properties: {
      shadowBias: {},
      shadowNormalBias: {},
      shadowRadius: {},
      shadowMapSize: {}
    } },
    directionalShadowMap: { value: [] },
    directionalShadowMatrix: { value: [] },
    spotLights: { value: [], properties: {
      color: {},
      position: {},
      direction: {},
      distance: {},
      coneCos: {},
      penumbraCos: {},
      decay: {}
    } },
    spotLightShadows: { value: [], properties: {
      shadowBias: {},
      shadowNormalBias: {},
      shadowRadius: {},
      shadowMapSize: {}
    } },
    spotLightMap: { value: [] },
    spotShadowMap: { value: [] },
    spotLightMatrix: { value: [] },
    pointLights: { value: [], properties: {
      color: {},
      position: {},
      decay: {},
      distance: {}
    } },
    pointLightShadows: { value: [], properties: {
      shadowBias: {},
      shadowNormalBias: {},
      shadowRadius: {},
      shadowMapSize: {},
      shadowCameraNear: {},
      shadowCameraFar: {}
    } },
    pointShadowMap: { value: [] },
    pointShadowMatrix: { value: [] },
    hemisphereLights: { value: [], properties: {
      direction: {},
      skyColor: {},
      groundColor: {}
    } },
    // TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src
    rectAreaLights: { value: [], properties: {
      color: {},
      position: {},
      width: {},
      height: {}
    } },
    ltc_1: { value: null },
    ltc_2: { value: null }
  },
  points: {
    diffuse: { value: new ze7(16777215) },
    opacity: { value: 1 },
    size: { value: 1 },
    scale: { value: 1 },
    map: { value: null },
    alphaMap: { value: null },
    alphaTest: { value: 0 },
    uvTransform: { value: new Ke5() }
  },
  sprite: {
    diffuse: { value: new ze7(16777215) },
    opacity: { value: 1 },
    center: { value: new We7(0.5, 0.5) },
    rotation: { value: 0 },
    map: { value: null },
    mapTransform: { value: new Ke5() },
    alphaMap: { value: null },
    alphaTest: { value: 0 }
  }
};
var Si4 = {
  basic: {
    uniforms: Qt5([
      ve7.common,
      ve7.specularmap,
      ve7.envmap,
      ve7.aomap,
      ve7.lightmap,
      ve7.fog
    ]),
    vertexShader: qe6.meshbasic_vert,
    fragmentShader: qe6.meshbasic_frag
  },
  lambert: {
    uniforms: Qt5([
      ve7.common,
      ve7.specularmap,
      ve7.envmap,
      ve7.aomap,
      ve7.lightmap,
      ve7.emissivemap,
      ve7.bumpmap,
      ve7.normalmap,
      ve7.displacementmap,
      ve7.fog,
      ve7.lights,
      {
        emissive: { value: new ze7(0) }
      }
    ]),
    vertexShader: qe6.meshlambert_vert,
    fragmentShader: qe6.meshlambert_frag
  },
  phong: {
    uniforms: Qt5([
      ve7.common,
      ve7.specularmap,
      ve7.envmap,
      ve7.aomap,
      ve7.lightmap,
      ve7.emissivemap,
      ve7.bumpmap,
      ve7.normalmap,
      ve7.displacementmap,
      ve7.fog,
      ve7.lights,
      {
        emissive: { value: new ze7(0) },
        specular: { value: new ze7(1118481) },
        shininess: { value: 30 }
      }
    ]),
    vertexShader: qe6.meshphong_vert,
    fragmentShader: qe6.meshphong_frag
  },
  standard: {
    uniforms: Qt5([
      ve7.common,
      ve7.envmap,
      ve7.aomap,
      ve7.lightmap,
      ve7.emissivemap,
      ve7.bumpmap,
      ve7.normalmap,
      ve7.displacementmap,
      ve7.roughnessmap,
      ve7.metalnessmap,
      ve7.fog,
      ve7.lights,
      {
        emissive: { value: new ze7(0) },
        roughness: { value: 1 },
        metalness: { value: 0 },
        envMapIntensity: { value: 1 }
        // temporary
      }
    ]),
    vertexShader: qe6.meshphysical_vert,
    fragmentShader: qe6.meshphysical_frag
  },
  toon: {
    uniforms: Qt5([
      ve7.common,
      ve7.aomap,
      ve7.lightmap,
      ve7.emissivemap,
      ve7.bumpmap,
      ve7.normalmap,
      ve7.displacementmap,
      ve7.gradientmap,
      ve7.fog,
      ve7.lights,
      {
        emissive: { value: new ze7(0) }
      }
    ]),
    vertexShader: qe6.meshtoon_vert,
    fragmentShader: qe6.meshtoon_frag
  },
  matcap: {
    uniforms: Qt5([
      ve7.common,
      ve7.bumpmap,
      ve7.normalmap,
      ve7.displacementmap,
      ve7.fog,
      {
        matcap: { value: null }
      }
    ]),
    vertexShader: qe6.meshmatcap_vert,
    fragmentShader: qe6.meshmatcap_frag
  },
  points: {
    uniforms: Qt5([
      ve7.points,
      ve7.fog
    ]),
    vertexShader: qe6.points_vert,
    fragmentShader: qe6.points_frag
  },
  dashed: {
    uniforms: Qt5([
      ve7.common,
      ve7.fog,
      {
        scale: { value: 1 },
        dashSize: { value: 1 },
        totalSize: { value: 2 }
      }
    ]),
    vertexShader: qe6.linedashed_vert,
    fragmentShader: qe6.linedashed_frag
  },
  depth: {
    uniforms: Qt5([
      ve7.common,
      ve7.displacementmap
    ]),
    vertexShader: qe6.depth_vert,
    fragmentShader: qe6.depth_frag
  },
  normal: {
    uniforms: Qt5([
      ve7.common,
      ve7.bumpmap,
      ve7.normalmap,
      ve7.displacementmap,
      {
        opacity: { value: 1 }
      }
    ]),
    vertexShader: qe6.meshnormal_vert,
    fragmentShader: qe6.meshnormal_frag
  },
  sprite: {
    uniforms: Qt5([
      ve7.sprite,
      ve7.fog
    ]),
    vertexShader: qe6.sprite_vert,
    fragmentShader: qe6.sprite_frag
  },
  background: {
    uniforms: {
      uvTransform: { value: new Ke5() },
      t2D: { value: null },
      backgroundIntensity: { value: 1 }
    },
    vertexShader: qe6.background_vert,
    fragmentShader: qe6.background_frag
  },
  backgroundCube: {
    uniforms: {
      envMap: { value: null },
      flipEnvMap: { value: -1 },
      backgroundBlurriness: { value: 0 },
      backgroundIntensity: { value: 1 }
    },
    vertexShader: qe6.backgroundCube_vert,
    fragmentShader: qe6.backgroundCube_frag
  },
  cube: {
    uniforms: {
      tCube: { value: null },
      tFlip: { value: -1 },
      opacity: { value: 1 }
    },
    vertexShader: qe6.cube_vert,
    fragmentShader: qe6.cube_frag
  },
  equirect: {
    uniforms: {
      tEquirect: { value: null }
    },
    vertexShader: qe6.equirect_vert,
    fragmentShader: qe6.equirect_frag
  },
  distanceRGBA: {
    uniforms: Qt5([
      ve7.common,
      ve7.displacementmap,
      {
        referencePosition: { value: new k20() },
        nearDistance: { value: 1 },
        farDistance: { value: 1e3 }
      }
    ]),
    vertexShader: qe6.distanceRGBA_vert,
    fragmentShader: qe6.distanceRGBA_frag
  },
  shadow: {
    uniforms: Qt5([
      ve7.lights,
      ve7.fog,
      {
        color: { value: new ze7(0) },
        opacity: { value: 1 }
      }
    ]),
    vertexShader: qe6.shadow_vert,
    fragmentShader: qe6.shadow_frag
  }
};
Si4.physical = {
  uniforms: Qt5([
    Si4.standard.uniforms,
    {
      clearcoat: { value: 0 },
      clearcoatMap: { value: null },
      clearcoatMapTransform: { value: new Ke5() },
      clearcoatNormalMap: { value: null },
      clearcoatNormalMapTransform: { value: new Ke5() },
      clearcoatNormalScale: { value: new We7(1, 1) },
      clearcoatRoughness: { value: 0 },
      clearcoatRoughnessMap: { value: null },
      clearcoatRoughnessMapTransform: { value: new Ke5() },
      iridescence: { value: 0 },
      iridescenceMap: { value: null },
      iridescenceMapTransform: { value: new Ke5() },
      iridescenceIOR: { value: 1.3 },
      iridescenceThicknessMinimum: { value: 100 },
      iridescenceThicknessMaximum: { value: 400 },
      iridescenceThicknessMap: { value: null },
      iridescenceThicknessMapTransform: { value: new Ke5() },
      sheen: { value: 0 },
      sheenColor: { value: new ze7(0) },
      sheenColorMap: { value: null },
      sheenColorMapTransform: { value: new Ke5() },
      sheenRoughness: { value: 1 },
      sheenRoughnessMap: { value: null },
      sheenRoughnessMapTransform: { value: new Ke5() },
      transmission: { value: 0 },
      transmissionMap: { value: null },
      transmissionMapTransform: { value: new Ke5() },
      transmissionSamplerSize: { value: new We7() },
      transmissionSamplerMap: { value: null },
      thickness: { value: 0 },
      thicknessMap: { value: null },
      thicknessMapTransform: { value: new Ke5() },
      attenuationDistance: { value: 0 },
      attenuationColor: { value: new ze7(0) },
      specularColor: { value: new ze7(1, 1, 1) },
      specularColorMap: { value: null },
      specularColorMapTransform: { value: new Ke5() },
      specularIntensity: { value: 1 },
      specularIntensityMap: { value: null },
      specularIntensityMapTransform: { value: new Ke5() }
    }
  ]),
  vertexShader: qe6.meshphysical_vert,
  fragmentShader: qe6.meshphysical_frag
};
var Ds2 = { r: 0, b: 0, g: 0 };
function _f2(s18, e11, t19, i27, r24, n33, a22) {
  const o13 = new ze7(0);
  let l26 = n33 === true ? 0 : 1, c27, h26, u35 = null, d34 = 0, m34 = null;
  function _21(f40, p26) {
    let A18 = false, M13 = p26.isScene === true ? p26.background : null;
    M13 && M13.isTexture && (M13 = (p26.backgroundBlurriness > 0 ? t19 : e11).get(M13));
    const E25 = s18.xr, w31 = E25.getSession && E25.getSession();
    w31 && w31.environmentBlendMode === "additive" && (M13 = null), M13 === null ? y34(o13, l26) : M13 && M13.isColor && (y34(M13, 1), A18 = true), (s18.autoClear || A18) && s18.clear(s18.autoClearColor, s18.autoClearDepth, s18.autoClearStencil), M13 && (M13.isCubeTexture || M13.mapping === na2) ? (h26 === void 0 && (h26 = new Rt8(
      new Lr5(1, 1, 1),
      new wr5({
        name: "BackgroundCubeMaterial",
        uniforms: Sn5(Si4.backgroundCube.uniforms),
        vertexShader: Si4.backgroundCube.vertexShader,
        fragmentShader: Si4.backgroundCube.fragmentShader,
        side: ti6,
        depthTest: false,
        depthWrite: false,
        fog: false
      })
    ), h26.geometry.deleteAttribute("normal"), h26.geometry.deleteAttribute("uv"), h26.onBeforeRender = function(I18, D18, P20) {
      this.matrixWorld.copyPosition(P20.matrixWorld);
    }, Object.defineProperty(h26.material, "envMap", {
      get: function() {
        return this.uniforms.envMap.value;
      }
    }), r24.update(h26)), h26.material.uniforms.envMap.value = M13, h26.material.uniforms.flipEnvMap.value = M13.isCubeTexture && M13.isRenderTargetTexture === false ? -1 : 1, h26.material.uniforms.backgroundBlurriness.value = p26.backgroundBlurriness, h26.material.uniforms.backgroundIntensity.value = p26.backgroundIntensity, h26.material.toneMapped = M13.encoding !== rt12, (u35 !== M13 || d34 !== M13.version || m34 !== s18.toneMapping) && (h26.material.needsUpdate = true, u35 = M13, d34 = M13.version, m34 = s18.toneMapping), h26.layers.enableAll(), f40.unshift(h26, h26.geometry, h26.material, 0, 0, null)) : M13 && M13.isTexture && (c27 === void 0 && (c27 = new Rt8(
      new oa2(2, 2),
      new wr5({
        name: "BackgroundMaterial",
        uniforms: Sn5(Si4.background.uniforms),
        vertexShader: Si4.background.vertexShader,
        fragmentShader: Si4.background.fragmentShader,
        side: Ei5,
        depthTest: false,
        depthWrite: false,
        fog: false
      })
    ), c27.geometry.deleteAttribute("normal"), Object.defineProperty(c27.material, "map", {
      get: function() {
        return this.uniforms.t2D.value;
      }
    }), r24.update(c27)), c27.material.uniforms.t2D.value = M13, c27.material.uniforms.backgroundIntensity.value = p26.backgroundIntensity, c27.material.toneMapped = M13.encoding !== rt12, M13.matrixAutoUpdate === true && M13.updateMatrix(), c27.material.uniforms.uvTransform.value.copy(M13.matrix), (u35 !== M13 || d34 !== M13.version || m34 !== s18.toneMapping) && (c27.material.needsUpdate = true, u35 = M13, d34 = M13.version, m34 = s18.toneMapping), c27.layers.enableAll(), f40.unshift(c27, c27.geometry, c27.material, 0, 0, null));
  }
  function y34(f40, p26) {
    f40.getRGB(Ds2, xh2(s18)), i27.buffers.color.setClear(Ds2.r, Ds2.g, Ds2.b, p26, a22);
  }
  return {
    getClearColor: function() {
      return o13;
    },
    setClearColor: function(f40, p26 = 1) {
      o13.set(f40), l26 = p26, y34(o13, l26);
    },
    getClearAlpha: function() {
      return l26;
    },
    setClearAlpha: function(f40) {
      l26 = f40, y34(o13, l26);
    },
    render: _21
  };
}
function vf2(s18, e11, t19, i27) {
  const r24 = s18.getParameter(34921), n33 = i27.isWebGL2 ? null : e11.get("OES_vertex_array_object"), a22 = i27.isWebGL2 || n33 !== null, o13 = {}, l26 = f40(null);
  let c27 = l26, h26 = false;
  function u35(V16, j19, W11, re8, $25) {
    let ie8 = false;
    if (a22) {
      const le7 = y34(re8, W11, j19);
      c27 !== le7 && (c27 = le7, m34(c27.object)), ie8 = p26(V16, re8, W11, $25), ie8 && A18(V16, re8, W11, $25);
    } else {
      const le7 = j19.wireframe === true;
      (c27.geometry !== re8.id || c27.program !== W11.id || c27.wireframe !== le7) && (c27.geometry = re8.id, c27.program = W11.id, c27.wireframe = le7, ie8 = true);
    }
    $25 !== null && t19.update($25, 34963), (ie8 || h26) && (h26 = false, P20(V16, j19, W11, re8), $25 !== null && s18.bindBuffer(34963, t19.get($25).buffer));
  }
  function d34() {
    return i27.isWebGL2 ? s18.createVertexArray() : n33.createVertexArrayOES();
  }
  function m34(V16) {
    return i27.isWebGL2 ? s18.bindVertexArray(V16) : n33.bindVertexArrayOES(V16);
  }
  function _21(V16) {
    return i27.isWebGL2 ? s18.deleteVertexArray(V16) : n33.deleteVertexArrayOES(V16);
  }
  function y34(V16, j19, W11) {
    const re8 = W11.wireframe === true;
    let $25 = o13[V16.id];
    $25 === void 0 && ($25 = {}, o13[V16.id] = $25);
    let ie8 = $25[j19.id];
    ie8 === void 0 && (ie8 = {}, $25[j19.id] = ie8);
    let le7 = ie8[re8];
    return le7 === void 0 && (le7 = f40(d34()), ie8[re8] = le7), le7;
  }
  function f40(V16) {
    const j19 = [], W11 = [], re8 = [];
    for (let $25 = 0; $25 < r24; $25++)
      j19[$25] = 0, W11[$25] = 0, re8[$25] = 0;
    return {
      // for backward compatibility on non-VAO support browser
      geometry: null,
      program: null,
      wireframe: false,
      newAttributes: j19,
      enabledAttributes: W11,
      attributeDivisors: re8,
      object: V16,
      attributes: {},
      index: null
    };
  }
  function p26(V16, j19, W11, re8) {
    const $25 = c27.attributes, ie8 = j19.attributes;
    let le7 = 0;
    const fe7 = W11.getAttributes();
    for (const ue8 in fe7)
      if (fe7[ue8].location >= 0) {
        const H16 = $25[ue8];
        let q14 = ie8[ue8];
        if (q14 === void 0 && (ue8 === "instanceMatrix" && V16.instanceMatrix && (q14 = V16.instanceMatrix), ue8 === "instanceColor" && V16.instanceColor && (q14 = V16.instanceColor)), H16 === void 0 || H16.attribute !== q14 || q14 && H16.data !== q14.data)
          return true;
        le7++;
      }
    return c27.attributesNum !== le7 || c27.index !== re8;
  }
  function A18(V16, j19, W11, re8) {
    const $25 = {}, ie8 = j19.attributes;
    let le7 = 0;
    const fe7 = W11.getAttributes();
    for (const ue8 in fe7)
      if (fe7[ue8].location >= 0) {
        let H16 = ie8[ue8];
        H16 === void 0 && (ue8 === "instanceMatrix" && V16.instanceMatrix && (H16 = V16.instanceMatrix), ue8 === "instanceColor" && V16.instanceColor && (H16 = V16.instanceColor));
        const q14 = {};
        q14.attribute = H16, H16 && H16.data && (q14.data = H16.data), $25[ue8] = q14, le7++;
      }
    c27.attributes = $25, c27.attributesNum = le7, c27.index = re8;
  }
  function M13() {
    const V16 = c27.newAttributes;
    for (let j19 = 0, W11 = V16.length; j19 < W11; j19++)
      V16[j19] = 0;
  }
  function E25(V16) {
    w31(V16, 0);
  }
  function w31(V16, j19) {
    const W11 = c27.newAttributes, re8 = c27.enabledAttributes, $25 = c27.attributeDivisors;
    W11[V16] = 1, re8[V16] === 0 && (s18.enableVertexAttribArray(V16), re8[V16] = 1), $25[V16] !== j19 && ((i27.isWebGL2 ? s18 : e11.get("ANGLE_instanced_arrays"))[i27.isWebGL2 ? "vertexAttribDivisor" : "vertexAttribDivisorANGLE"](V16, j19), $25[V16] = j19);
  }
  function I18() {
    const V16 = c27.newAttributes, j19 = c27.enabledAttributes;
    for (let W11 = 0, re8 = j19.length; W11 < re8; W11++)
      j19[W11] !== V16[W11] && (s18.disableVertexAttribArray(W11), j19[W11] = 0);
  }
  function D18(V16, j19, W11, re8, $25, ie8) {
    i27.isWebGL2 === true && (W11 === 5124 || W11 === 5125) ? s18.vertexAttribIPointer(V16, j19, W11, $25, ie8) : s18.vertexAttribPointer(V16, j19, W11, re8, $25, ie8);
  }
  function P20(V16, j19, W11, re8) {
    if (i27.isWebGL2 === false && (V16.isInstancedMesh || re8.isInstancedBufferGeometry) && e11.get("ANGLE_instanced_arrays") === null)
      return;
    M13();
    const $25 = re8.attributes, ie8 = W11.getAttributes(), le7 = j19.defaultAttributeValues;
    for (const fe7 in ie8) {
      const ue8 = ie8[fe7];
      if (ue8.location >= 0) {
        let H16 = $25[fe7];
        if (H16 === void 0 && (fe7 === "instanceMatrix" && V16.instanceMatrix && (H16 = V16.instanceMatrix), fe7 === "instanceColor" && V16.instanceColor && (H16 = V16.instanceColor)), H16 !== void 0) {
          const q14 = H16.normalized, oe7 = H16.itemSize, K16 = t19.get(H16);
          if (K16 === void 0)
            continue;
          const F19 = K16.buffer, ye7 = K16.type, Le7 = K16.bytesPerElement;
          if (H16.isInterleavedBufferAttribute) {
            const me9 = H16.data, De6 = me9.stride, tt12 = H16.offset;
            if (me9.isInstancedInterleavedBuffer) {
              for (let Pe6 = 0; Pe6 < ue8.locationSize; Pe6++)
                w31(ue8.location + Pe6, me9.meshPerAttribute);
              V16.isInstancedMesh !== true && re8._maxInstanceCount === void 0 && (re8._maxInstanceCount = me9.meshPerAttribute * me9.count);
            } else
              for (let Pe6 = 0; Pe6 < ue8.locationSize; Pe6++)
                E25(ue8.location + Pe6);
            s18.bindBuffer(34962, F19);
            for (let Pe6 = 0; Pe6 < ue8.locationSize; Pe6++)
              D18(
                ue8.location + Pe6,
                oe7 / ue8.locationSize,
                ye7,
                q14,
                De6 * Le7,
                (tt12 + oe7 / ue8.locationSize * Pe6) * Le7
              );
          } else {
            if (H16.isInstancedBufferAttribute) {
              for (let me9 = 0; me9 < ue8.locationSize; me9++)
                w31(ue8.location + me9, H16.meshPerAttribute);
              V16.isInstancedMesh !== true && re8._maxInstanceCount === void 0 && (re8._maxInstanceCount = H16.meshPerAttribute * H16.count);
            } else
              for (let me9 = 0; me9 < ue8.locationSize; me9++)
                E25(ue8.location + me9);
            s18.bindBuffer(34962, F19);
            for (let me9 = 0; me9 < ue8.locationSize; me9++)
              D18(
                ue8.location + me9,
                oe7 / ue8.locationSize,
                ye7,
                q14,
                oe7 * Le7,
                oe7 / ue8.locationSize * me9 * Le7
              );
          }
        } else if (le7 !== void 0) {
          const q14 = le7[fe7];
          if (q14 !== void 0)
            switch (q14.length) {
              case 2:
                s18.vertexAttrib2fv(ue8.location, q14);
                break;
              case 3:
                s18.vertexAttrib3fv(ue8.location, q14);
                break;
              case 4:
                s18.vertexAttrib4fv(ue8.location, q14);
                break;
              default:
                s18.vertexAttrib1fv(ue8.location, q14);
            }
        }
      }
    }
    I18();
  }
  function x36() {
    z21();
    for (const V16 in o13) {
      const j19 = o13[V16];
      for (const W11 in j19) {
        const re8 = j19[W11];
        for (const $25 in re8)
          _21(re8[$25].object), delete re8[$25];
        delete j19[W11];
      }
      delete o13[V16];
    }
  }
  function C21(V16) {
    if (o13[V16.id] === void 0)
      return;
    const j19 = o13[V16.id];
    for (const W11 in j19) {
      const re8 = j19[W11];
      for (const $25 in re8)
        _21(re8[$25].object), delete re8[$25];
      delete j19[W11];
    }
    delete o13[V16.id];
  }
  function G16(V16) {
    for (const j19 in o13) {
      const W11 = o13[j19];
      if (W11[V16.id] === void 0)
        continue;
      const re8 = W11[V16.id];
      for (const $25 in re8)
        _21(re8[$25].object), delete re8[$25];
      delete W11[V16.id];
    }
  }
  function z21() {
    U20(), h26 = true, c27 !== l26 && (c27 = l26, m34(c27.object));
  }
  function U20() {
    l26.geometry = null, l26.program = null, l26.wireframe = false;
  }
  return {
    setup: u35,
    reset: z21,
    resetDefaultState: U20,
    dispose: x36,
    releaseStatesOfGeometry: C21,
    releaseStatesOfProgram: G16,
    initAttributes: M13,
    enableAttribute: E25,
    disableUnusedAttributes: I18
  };
}
function yf2(s18, e11, t19, i27) {
  const r24 = i27.isWebGL2;
  let n33;
  function a22(c27) {
    n33 = c27;
  }
  function o13(c27, h26) {
    s18.drawArrays(n33, c27, h26), t19.update(h26, n33, 1);
  }
  function l26(c27, h26, u35) {
    if (u35 === 0)
      return;
    let d34, m34;
    if (r24)
      d34 = s18, m34 = "drawArraysInstanced";
    else if (d34 = e11.get("ANGLE_instanced_arrays"), m34 = "drawArraysInstancedANGLE", d34 === null) {
      console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
      return;
    }
    d34[m34](n33, c27, h26, u35), t19.update(h26, n33, u35);
  }
  this.setMode = a22, this.render = o13, this.renderInstances = l26;
}
function xf2(s18, e11, t19) {
  let i27;
  function r24() {
    if (i27 !== void 0)
      return i27;
    if (e11.has("EXT_texture_filter_anisotropic") === true) {
      const D18 = e11.get("EXT_texture_filter_anisotropic");
      i27 = s18.getParameter(D18.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
    } else
      i27 = 0;
    return i27;
  }
  function n33(D18) {
    if (D18 === "highp") {
      if (s18.getShaderPrecisionFormat(35633, 36338).precision > 0 && s18.getShaderPrecisionFormat(35632, 36338).precision > 0)
        return "highp";
      D18 = "mediump";
    }
    return D18 === "mediump" && s18.getShaderPrecisionFormat(35633, 36337).precision > 0 && s18.getShaderPrecisionFormat(35632, 36337).precision > 0 ? "mediump" : "lowp";
  }
  const a22 = typeof WebGL2RenderingContext < "u" && s18.constructor.name === "WebGL2RenderingContext";
  let o13 = t19.precision !== void 0 ? t19.precision : "highp";
  const l26 = n33(o13);
  l26 !== o13 && (console.warn("THREE.WebGLRenderer:", o13, "not supported, using", l26, "instead."), o13 = l26);
  const c27 = a22 || e11.has("WEBGL_draw_buffers"), h26 = t19.logarithmicDepthBuffer === true, u35 = s18.getParameter(34930), d34 = s18.getParameter(35660), m34 = s18.getParameter(3379), _21 = s18.getParameter(34076), y34 = s18.getParameter(34921), f40 = s18.getParameter(36347), p26 = s18.getParameter(36348), A18 = s18.getParameter(36349), M13 = d34 > 0, E25 = a22 || e11.has("OES_texture_float"), w31 = M13 && E25, I18 = a22 ? s18.getParameter(36183) : 0;
  return {
    isWebGL2: a22,
    drawBuffers: c27,
    getMaxAnisotropy: r24,
    getMaxPrecision: n33,
    precision: o13,
    logarithmicDepthBuffer: h26,
    maxTextures: u35,
    maxVertexTextures: d34,
    maxTextureSize: m34,
    maxCubemapSize: _21,
    maxAttributes: y34,
    maxVertexUniforms: f40,
    maxVaryings: p26,
    maxFragmentUniforms: A18,
    vertexTextures: M13,
    floatFragmentTextures: E25,
    floatVertexTextures: w31,
    maxSamples: I18
  };
}
function bf2(s18) {
  const e11 = this;
  let t19 = null, i27 = 0, r24 = false, n33 = false;
  const a22 = new hr5(), o13 = new Ke5(), l26 = { value: null, needsUpdate: false };
  this.uniform = l26, this.numPlanes = 0, this.numIntersection = 0, this.init = function(u35, d34) {
    const m34 = u35.length !== 0 || d34 || // enable state of previous frame - the clipping code has to
    // run another frame in order to reset the state:
    i27 !== 0 || r24;
    return r24 = d34, i27 = u35.length, m34;
  }, this.beginShadows = function() {
    n33 = true, h26(null);
  }, this.endShadows = function() {
    n33 = false;
  }, this.setGlobalState = function(u35, d34) {
    t19 = h26(u35, d34, 0);
  }, this.setState = function(u35, d34, m34) {
    const _21 = u35.clippingPlanes, y34 = u35.clipIntersection, f40 = u35.clipShadows, p26 = s18.get(u35);
    if (!r24 || _21 === null || _21.length === 0 || n33 && !f40)
      n33 ? h26(null) : c27();
    else {
      const A18 = n33 ? 0 : i27, M13 = A18 * 4;
      let E25 = p26.clippingState || null;
      l26.value = E25, E25 = h26(_21, d34, M13, m34);
      for (let w31 = 0; w31 !== M13; ++w31)
        E25[w31] = t19[w31];
      p26.clippingState = E25, this.numIntersection = y34 ? this.numPlanes : 0, this.numPlanes += A18;
    }
  };
  function c27() {
    l26.value !== t19 && (l26.value = t19, l26.needsUpdate = i27 > 0), e11.numPlanes = i27, e11.numIntersection = 0;
  }
  function h26(u35, d34, m34, _21) {
    const y34 = u35 !== null ? u35.length : 0;
    let f40 = null;
    if (y34 !== 0) {
      if (f40 = l26.value, _21 !== true || f40 === null) {
        const p26 = m34 + y34 * 4, A18 = d34.matrixWorldInverse;
        o13.getNormalMatrix(A18), (f40 === null || f40.length < p26) && (f40 = new Float32Array(p26));
        for (let M13 = 0, E25 = m34; M13 !== y34; ++M13, E25 += 4)
          a22.copy(u35[M13]).applyMatrix4(A18, o13), a22.normal.toArray(f40, E25), f40[E25 + 3] = a22.constant;
      }
      l26.value = f40, l26.needsUpdate = true;
    }
    return e11.numPlanes = y34, e11.numIntersection = 0, f40;
  }
}
function Mf2(s18) {
  let e11 = /* @__PURE__ */ new WeakMap();
  function t19(a22, o13) {
    return o13 === uo2 ? a22.mapping = yn5 : o13 === po2 && (a22.mapping = xn5), a22;
  }
  function i27(a22) {
    if (a22 && a22.isTexture && a22.isRenderTargetTexture === false) {
      const o13 = a22.mapping;
      if (o13 === uo2 || o13 === po2)
        if (e11.has(a22)) {
          const l26 = e11.get(a22).texture;
          return t19(l26, a22.mapping);
        } else {
          const l26 = a22.image;
          if (l26 && l26.height > 0) {
            const c27 = new Od2(l26.height / 2);
            return c27.fromEquirectangularTexture(s18, a22), e11.set(a22, c27), a22.addEventListener("dispose", r24), t19(c27.texture, a22.mapping);
          } else
            return null;
        }
    }
    return a22;
  }
  function r24(a22) {
    const o13 = a22.target;
    o13.removeEventListener("dispose", r24);
    const l26 = e11.get(o13);
    l26 !== void 0 && (e11.delete(o13), l26.dispose());
  }
  function n33() {
    e11 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: i27,
    dispose: n33
  };
}
var la2 = class extends bh2 {
  constructor(e11 = -1, t19 = 1, i27 = 1, r24 = -1, n33 = 0.1, a22 = 2e3) {
    super(), this.isOrthographicCamera = true, this.type = "OrthographicCamera", this.zoom = 1, this.view = null, this.left = e11, this.right = t19, this.top = i27, this.bottom = r24, this.near = n33, this.far = a22, this.updateProjectionMatrix();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.left = e11.left, this.right = e11.right, this.top = e11.top, this.bottom = e11.bottom, this.near = e11.near, this.far = e11.far, this.zoom = e11.zoom, this.view = e11.view === null ? null : Object.assign({}, e11.view), this;
  }
  setViewOffset(e11, t19, i27, r24, n33, a22) {
    this.view === null && (this.view = {
      enabled: true,
      fullWidth: 1,
      fullHeight: 1,
      offsetX: 0,
      offsetY: 0,
      width: 1,
      height: 1
    }), this.view.enabled = true, this.view.fullWidth = e11, this.view.fullHeight = t19, this.view.offsetX = i27, this.view.offsetY = r24, this.view.width = n33, this.view.height = a22, this.updateProjectionMatrix();
  }
  clearViewOffset() {
    this.view !== null && (this.view.enabled = false), this.updateProjectionMatrix();
  }
  updateProjectionMatrix() {
    const e11 = (this.right - this.left) / (2 * this.zoom), t19 = (this.top - this.bottom) / (2 * this.zoom), i27 = (this.right + this.left) / 2, r24 = (this.top + this.bottom) / 2;
    let n33 = i27 - e11, a22 = i27 + e11, o13 = r24 + t19, l26 = r24 - t19;
    if (this.view !== null && this.view.enabled) {
      const c27 = (this.right - this.left) / this.view.fullWidth / this.zoom, h26 = (this.top - this.bottom) / this.view.fullHeight / this.zoom;
      n33 += c27 * this.view.offsetX, a22 = n33 + c27 * this.view.width, o13 -= h26 * this.view.offsetY, l26 = o13 - h26 * this.view.height;
    }
    this.projectionMatrix.makeOrthographic(n33, a22, o13, l26, this.near, this.far), this.projectionMatrixInverse.copy(this.projectionMatrix).invert();
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return t19.object.zoom = this.zoom, t19.object.left = this.left, t19.object.right = this.right, t19.object.top = this.top, t19.object.bottom = this.bottom, t19.object.near = this.near, t19.object.far = this.far, this.view !== null && (t19.object.view = Object.assign({}, this.view)), t19;
  }
};
var hn3 = 4;
var Yl2 = [0.125, 0.215, 0.35, 0.446, 0.526, 0.582];
var dr5 = 20;
var Xa = new la2();
var Zl2 = new ze7();
var qa2 = null;
var ur5 = (1 + Math.sqrt(5)) / 2;
var rn4 = 1 / ur5;
var Jl2 = [
  new k20(1, 1, 1),
  new k20(-1, 1, 1),
  new k20(1, 1, -1),
  new k20(-1, 1, -1),
  new k20(0, ur5, rn4),
  new k20(0, ur5, -rn4),
  new k20(rn4, 0, ur5),
  new k20(-rn4, 0, ur5),
  new k20(ur5, rn4, 0),
  new k20(-ur5, rn4, 0)
];
var Kl2 = class {
  constructor(e11) {
    this._renderer = e11, this._pingPongRenderTarget = null, this._lodMax = 0, this._cubeSize = 0, this._lodPlanes = [], this._sizeLods = [], this._sigmas = [], this._blurMaterial = null, this._cubemapMaterial = null, this._equirectMaterial = null, this._compileMaterial(this._blurMaterial);
  }
  /**
   * Generates a PMREM from a supplied Scene, which can be faster than using an
   * image if networking bandwidth is low. Optional sigma specifies a blur radius
   * in radians to be applied to the scene before PMREM generation. Optional near
   * and far planes ensure the scene is rendered in its entirety (the cubeCamera
   * is placed at the origin).
   */
  fromScene(e11, t19 = 0, i27 = 0.1, r24 = 100) {
    qa2 = this._renderer.getRenderTarget(), this._setSize(256);
    const n33 = this._allocateTargets();
    return n33.depthBuffer = true, this._sceneToCubeUV(e11, i27, r24, n33), t19 > 0 && this._blur(n33, 0, 0, t19), this._applyPMREM(n33), this._cleanup(n33), n33;
  }
  /**
   * Generates a PMREM from an equirectangular texture, which can be either LDR
   * or HDR. The ideal input image size is 1k (1024 x 512),
   * as this matches best with the 256 x 256 cubemap output.
   */
  fromEquirectangular(e11, t19 = null) {
    return this._fromTexture(e11, t19);
  }
  /**
   * Generates a PMREM from an cubemap texture, which can be either LDR
   * or HDR. The ideal input cube size is 256 x 256,
   * as this matches best with the 256 x 256 cubemap output.
   */
  fromCubemap(e11, t19 = null) {
    return this._fromTexture(e11, t19);
  }
  /**
   * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during
   * your texture's network fetch for increased concurrency.
   */
  compileCubemapShader() {
    this._cubemapMaterial === null && (this._cubemapMaterial = ec2(), this._compileMaterial(this._cubemapMaterial));
  }
  /**
   * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during
   * your texture's network fetch for increased concurrency.
   */
  compileEquirectangularShader() {
    this._equirectMaterial === null && (this._equirectMaterial = Ql2(), this._compileMaterial(this._equirectMaterial));
  }
  /**
   * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,
   * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on
   * one of them will cause any others to also become unusable.
   */
  dispose() {
    this._dispose(), this._cubemapMaterial !== null && this._cubemapMaterial.dispose(), this._equirectMaterial !== null && this._equirectMaterial.dispose();
  }
  // private interface
  _setSize(e11) {
    this._lodMax = Math.floor(Math.log2(e11)), this._cubeSize = Math.pow(2, this._lodMax);
  }
  _dispose() {
    this._blurMaterial !== null && this._blurMaterial.dispose(), this._pingPongRenderTarget !== null && this._pingPongRenderTarget.dispose();
    for (let e11 = 0; e11 < this._lodPlanes.length; e11++)
      this._lodPlanes[e11].dispose();
  }
  _cleanup(e11) {
    this._renderer.setRenderTarget(qa2), e11.scissorTest = false, ks2(e11, 0, 0, e11.width, e11.height);
  }
  _fromTexture(e11, t19) {
    e11.mapping === yn5 || e11.mapping === xn5 ? this._setSize(e11.image.length === 0 ? 16 : e11.image[0].width || e11.image[0].image.width) : this._setSize(e11.image.width / 4), qa2 = this._renderer.getRenderTarget();
    const i27 = t19 || this._allocateTargets();
    return this._textureToCubeUV(e11, i27), this._applyPMREM(i27), this._cleanup(i27), i27;
  }
  _allocateTargets() {
    const e11 = 3 * Math.max(this._cubeSize, 112), t19 = 4 * this._cubeSize, i27 = {
      magFilter: Vt6,
      minFilter: Vt6,
      generateMipmaps: false,
      type: $n5,
      format: di6,
      encoding: br5,
      depthBuffer: false
    }, r24 = $l2(e11, t19, i27);
    if (this._pingPongRenderTarget === null || this._pingPongRenderTarget.width !== e11 || this._pingPongRenderTarget.height !== t19) {
      this._pingPongRenderTarget !== null && this._dispose(), this._pingPongRenderTarget = $l2(e11, t19, i27);
      const { _lodMax: n33 } = this;
      ({ sizeLods: this._sizeLods, lodPlanes: this._lodPlanes, sigmas: this._sigmas } = wf2(n33)), this._blurMaterial = Sf2(n33, e11, t19);
    }
    return r24;
  }
  _compileMaterial(e11) {
    const t19 = new Rt8(this._lodPlanes[0], e11);
    this._renderer.compile(t19, Xa);
  }
  _sceneToCubeUV(e11, t19, i27, r24) {
    const n33 = new Bt6(90, 1, t19, i27), a22 = [1, -1, 1, 1, 1, 1], o13 = [1, 1, 1, -1, -1, -1], l26 = this._renderer, c27 = l26.autoClear, h26 = l26.toneMapping;
    l26.getClearColor(Zl2), l26.toneMapping = Fi4, l26.autoClear = false;
    const u35 = new xi6({
      name: "PMREM.Background",
      side: ti6,
      depthWrite: false,
      depthTest: false
    }), d34 = new Rt8(new Lr5(), u35);
    let m34 = false;
    const _21 = e11.background;
    _21 ? _21.isColor && (u35.color.copy(_21), e11.background = null, m34 = true) : (u35.color.copy(Zl2), m34 = true);
    for (let y34 = 0; y34 < 6; y34++) {
      const f40 = y34 % 3;
      f40 === 0 ? (n33.up.set(0, a22[y34], 0), n33.lookAt(o13[y34], 0, 0)) : f40 === 1 ? (n33.up.set(0, 0, a22[y34]), n33.lookAt(0, o13[y34], 0)) : (n33.up.set(0, a22[y34], 0), n33.lookAt(0, 0, o13[y34]));
      const p26 = this._cubeSize;
      ks2(r24, f40 * p26, y34 > 2 ? p26 : 0, p26, p26), l26.setRenderTarget(r24), m34 && l26.render(d34, n33), l26.render(e11, n33);
    }
    d34.geometry.dispose(), d34.material.dispose(), l26.toneMapping = h26, l26.autoClear = c27, e11.background = _21;
  }
  _textureToCubeUV(e11, t19) {
    const i27 = this._renderer, r24 = e11.mapping === yn5 || e11.mapping === xn5;
    r24 ? (this._cubemapMaterial === null && (this._cubemapMaterial = ec2()), this._cubemapMaterial.uniforms.flipEnvMap.value = e11.isRenderTargetTexture === false ? -1 : 1) : this._equirectMaterial === null && (this._equirectMaterial = Ql2());
    const n33 = r24 ? this._cubemapMaterial : this._equirectMaterial, a22 = new Rt8(this._lodPlanes[0], n33), o13 = n33.uniforms;
    o13.envMap.value = e11;
    const l26 = this._cubeSize;
    ks2(t19, 0, 0, 3 * l26, 2 * l26), i27.setRenderTarget(t19), i27.render(a22, Xa);
  }
  _applyPMREM(e11) {
    const t19 = this._renderer, i27 = t19.autoClear;
    t19.autoClear = false;
    for (let r24 = 1; r24 < this._lodPlanes.length; r24++) {
      const n33 = Math.sqrt(this._sigmas[r24] * this._sigmas[r24] - this._sigmas[r24 - 1] * this._sigmas[r24 - 1]), a22 = Jl2[(r24 - 1) % Jl2.length];
      this._blur(e11, r24 - 1, r24, n33, a22);
    }
    t19.autoClear = i27;
  }
  /**
   * This is a two-pass Gaussian blur for a cubemap. Normally this is done
   * vertically and horizontally, but this breaks down on a cube. Here we apply
   * the blur latitudinally (around the poles), and then longitudinally (towards
   * the poles) to approximate the orthogonally-separable blur. It is least
   * accurate at the poles, but still does a decent job.
   */
  _blur(e11, t19, i27, r24, n33) {
    const a22 = this._pingPongRenderTarget;
    this._halfBlur(
      e11,
      a22,
      t19,
      i27,
      r24,
      "latitudinal",
      n33
    ), this._halfBlur(
      a22,
      e11,
      i27,
      i27,
      r24,
      "longitudinal",
      n33
    );
  }
  _halfBlur(e11, t19, i27, r24, n33, a22, o13) {
    const l26 = this._renderer, c27 = this._blurMaterial;
    a22 !== "latitudinal" && a22 !== "longitudinal" && console.error(
      "blur direction must be either latitudinal or longitudinal!"
    );
    const h26 = 3, u35 = new Rt8(this._lodPlanes[r24], c27), d34 = c27.uniforms, m34 = this._sizeLods[i27] - 1, _21 = isFinite(n33) ? Math.PI / (2 * m34) : 2 * Math.PI / (2 * dr5 - 1), y34 = n33 / _21, f40 = isFinite(n33) ? 1 + Math.floor(h26 * y34) : dr5;
    f40 > dr5 && console.warn(`sigmaRadians, ${n33}, is too large and will clip, as it requested ${f40} samples when the maximum is set to ${dr5}`);
    const p26 = [];
    let A18 = 0;
    for (let D18 = 0; D18 < dr5; ++D18) {
      const P20 = D18 / y34, x36 = Math.exp(-P20 * P20 / 2);
      p26.push(x36), D18 === 0 ? A18 += x36 : D18 < f40 && (A18 += 2 * x36);
    }
    for (let D18 = 0; D18 < p26.length; D18++)
      p26[D18] = p26[D18] / A18;
    d34.envMap.value = e11.texture, d34.samples.value = f40, d34.weights.value = p26, d34.latitudinal.value = a22 === "latitudinal", o13 && (d34.poleAxis.value = o13);
    const { _lodMax: M13 } = this;
    d34.dTheta.value = _21, d34.mipInt.value = M13 - i27;
    const E25 = this._sizeLods[r24], w31 = 3 * E25 * (r24 > M13 - hn3 ? r24 - M13 + hn3 : 0), I18 = 4 * (this._cubeSize - E25);
    ks2(t19, w31, I18, 3 * E25, 2 * E25), l26.setRenderTarget(t19), l26.render(u35, Xa);
  }
};
function wf2(s18) {
  const e11 = [], t19 = [], i27 = [];
  let r24 = s18;
  const n33 = s18 - hn3 + 1 + Yl2.length;
  for (let a22 = 0; a22 < n33; a22++) {
    const o13 = Math.pow(2, r24);
    t19.push(o13);
    let l26 = 1 / o13;
    a22 > s18 - hn3 ? l26 = Yl2[a22 - s18 + hn3 - 1] : a22 === 0 && (l26 = 0), i27.push(l26);
    const c27 = 1 / (o13 - 2), h26 = -c27, u35 = 1 + c27, d34 = [h26, h26, u35, h26, u35, u35, h26, h26, u35, u35, h26, u35], m34 = 6, _21 = 6, y34 = 3, f40 = 2, p26 = 1, A18 = new Float32Array(y34 * _21 * m34), M13 = new Float32Array(f40 * _21 * m34), E25 = new Float32Array(p26 * _21 * m34);
    for (let I18 = 0; I18 < m34; I18++) {
      const D18 = I18 % 3 * 2 / 3 - 1, P20 = I18 > 2 ? 0 : -1, x36 = [
        D18,
        P20,
        0,
        D18 + 2 / 3,
        P20,
        0,
        D18 + 2 / 3,
        P20 + 1,
        0,
        D18,
        P20,
        0,
        D18 + 2 / 3,
        P20 + 1,
        0,
        D18,
        P20 + 1,
        0
      ];
      A18.set(x36, y34 * _21 * I18), M13.set(d34, f40 * _21 * I18);
      const C21 = [I18, I18, I18, I18, I18, I18];
      E25.set(C21, p26 * _21 * I18);
    }
    const w31 = new Xt6();
    w31.setAttribute("position", new Ft6(A18, y34)), w31.setAttribute("uv", new Ft6(M13, f40)), w31.setAttribute("faceIndex", new Ft6(E25, p26)), e11.push(w31), r24 > hn3 && r24--;
  }
  return { lodPlanes: e11, sizeLods: t19, sigmas: i27 };
}
function $l2(s18, e11, t19) {
  const i27 = new Mr5(s18, e11, t19);
  return i27.texture.mapping = na2, i27.texture.name = "PMREM.cubeUv", i27.scissorTest = true, i27;
}
function ks2(s18, e11, t19, i27, r24) {
  s18.viewport.set(e11, t19, i27, r24), s18.scissor.set(e11, t19, i27, r24);
}
function Sf2(s18, e11, t19) {
  const i27 = new Float32Array(dr5), r24 = new k20(0, 1, 0);
  return new wr5({
    name: "SphericalGaussianBlur",
    defines: {
      n: dr5,
      CUBEUV_TEXEL_WIDTH: 1 / e11,
      CUBEUV_TEXEL_HEIGHT: 1 / t19,
      CUBEUV_MAX_MIP: `${s18}.0`
    },
    uniforms: {
      envMap: { value: null },
      samples: { value: 1 },
      weights: { value: i27 },
      latitudinal: { value: false },
      dTheta: { value: 0 },
      mipInt: { value: 0 },
      poleAxis: { value: r24 }
    },
    vertexShader: Io2(),
    fragmentShader: (
      /* glsl */
      `

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`
    ),
    blending: tr5,
    depthTest: false,
    depthWrite: false
  });
}
function Ql2() {
  return new wr5({
    name: "EquirectangularToCubeUV",
    uniforms: {
      envMap: { value: null }
    },
    vertexShader: Io2(),
    fragmentShader: (
      /* glsl */
      `

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`
    ),
    blending: tr5,
    depthTest: false,
    depthWrite: false
  });
}
function ec2() {
  return new wr5({
    name: "CubemapToCubeUV",
    uniforms: {
      envMap: { value: null },
      flipEnvMap: { value: -1 }
    },
    vertexShader: Io2(),
    fragmentShader: (
      /* glsl */
      `

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`
    ),
    blending: tr5,
    depthTest: false,
    depthWrite: false
  });
}
function Io2() {
  return (
    /* glsl */
    `

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`
  );
}
function Tf2(s18) {
  let e11 = /* @__PURE__ */ new WeakMap(), t19 = null;
  function i27(o13) {
    if (o13 && o13.isTexture) {
      const l26 = o13.mapping, c27 = l26 === uo2 || l26 === po2, h26 = l26 === yn5 || l26 === xn5;
      if (c27 || h26)
        if (o13.isRenderTargetTexture && o13.needsPMREMUpdate === true) {
          o13.needsPMREMUpdate = false;
          let u35 = e11.get(o13);
          return t19 === null && (t19 = new Kl2(s18)), u35 = c27 ? t19.fromEquirectangular(o13, u35) : t19.fromCubemap(o13, u35), e11.set(o13, u35), u35.texture;
        } else {
          if (e11.has(o13))
            return e11.get(o13).texture;
          {
            const u35 = o13.image;
            if (c27 && u35 && u35.height > 0 || h26 && u35 && r24(u35)) {
              t19 === null && (t19 = new Kl2(s18));
              const d34 = c27 ? t19.fromEquirectangular(o13) : t19.fromCubemap(o13);
              return e11.set(o13, d34), o13.addEventListener("dispose", n33), d34.texture;
            } else
              return null;
          }
        }
    }
    return o13;
  }
  function r24(o13) {
    let l26 = 0;
    const c27 = 6;
    for (let h26 = 0; h26 < c27; h26++)
      o13[h26] !== void 0 && l26++;
    return l26 === c27;
  }
  function n33(o13) {
    const l26 = o13.target;
    l26.removeEventListener("dispose", n33);
    const c27 = e11.get(l26);
    c27 !== void 0 && (e11.delete(l26), c27.dispose());
  }
  function a22() {
    e11 = /* @__PURE__ */ new WeakMap(), t19 !== null && (t19.dispose(), t19 = null);
  }
  return {
    get: i27,
    dispose: a22
  };
}
function Ef2(s18) {
  const e11 = {};
  function t19(i27) {
    if (e11[i27] !== void 0)
      return e11[i27];
    let r24;
    switch (i27) {
      case "WEBGL_depth_texture":
        r24 = s18.getExtension("WEBGL_depth_texture") || s18.getExtension("MOZ_WEBGL_depth_texture") || s18.getExtension("WEBKIT_WEBGL_depth_texture");
        break;
      case "EXT_texture_filter_anisotropic":
        r24 = s18.getExtension("EXT_texture_filter_anisotropic") || s18.getExtension("MOZ_EXT_texture_filter_anisotropic") || s18.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
        break;
      case "WEBGL_compressed_texture_s3tc":
        r24 = s18.getExtension("WEBGL_compressed_texture_s3tc") || s18.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || s18.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
        break;
      case "WEBGL_compressed_texture_pvrtc":
        r24 = s18.getExtension("WEBGL_compressed_texture_pvrtc") || s18.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
        break;
      default:
        r24 = s18.getExtension(i27);
    }
    return e11[i27] = r24, r24;
  }
  return {
    has: function(i27) {
      return t19(i27) !== null;
    },
    init: function(i27) {
      i27.isWebGL2 ? t19("EXT_color_buffer_float") : (t19("WEBGL_depth_texture"), t19("OES_texture_float"), t19("OES_texture_half_float"), t19("OES_texture_half_float_linear"), t19("OES_standard_derivatives"), t19("OES_element_index_uint"), t19("OES_vertex_array_object"), t19("ANGLE_instanced_arrays")), t19("OES_texture_float_linear"), t19("EXT_color_buffer_half_float"), t19("WEBGL_multisampled_render_to_texture");
    },
    get: function(i27) {
      const r24 = t19(i27);
      return r24 === null && console.warn("THREE.WebGLRenderer: " + i27 + " extension not supported."), r24;
    }
  };
}
function Af2(s18, e11, t19, i27) {
  const r24 = {}, n33 = /* @__PURE__ */ new WeakMap();
  function a22(u35) {
    const d34 = u35.target;
    d34.index !== null && e11.remove(d34.index);
    for (const _21 in d34.attributes)
      e11.remove(d34.attributes[_21]);
    d34.removeEventListener("dispose", a22), delete r24[d34.id];
    const m34 = n33.get(d34);
    m34 && (e11.remove(m34), n33.delete(d34)), i27.releaseStatesOfGeometry(d34), d34.isInstancedBufferGeometry === true && delete d34._maxInstanceCount, t19.memory.geometries--;
  }
  function o13(u35, d34) {
    return r24[d34.id] === true || (d34.addEventListener("dispose", a22), r24[d34.id] = true, t19.memory.geometries++), d34;
  }
  function l26(u35) {
    const d34 = u35.attributes;
    for (const _21 in d34)
      e11.update(d34[_21], 34962);
    const m34 = u35.morphAttributes;
    for (const _21 in m34) {
      const y34 = m34[_21];
      for (let f40 = 0, p26 = y34.length; f40 < p26; f40++)
        e11.update(y34[f40], 34962);
    }
  }
  function c27(u35) {
    const d34 = [], m34 = u35.index, _21 = u35.attributes.position;
    let y34 = 0;
    if (m34 !== null) {
      const A18 = m34.array;
      y34 = m34.version;
      for (let M13 = 0, E25 = A18.length; M13 < E25; M13 += 3) {
        const w31 = A18[M13 + 0], I18 = A18[M13 + 1], D18 = A18[M13 + 2];
        d34.push(w31, I18, I18, D18, D18, w31);
      }
    } else {
      const A18 = _21.array;
      y34 = _21.version;
      for (let M13 = 0, E25 = A18.length / 3 - 1; M13 < E25; M13 += 3) {
        const w31 = M13 + 0, I18 = M13 + 1, D18 = M13 + 2;
        d34.push(w31, I18, I18, D18, D18, w31);
      }
    }
    const f40 = new (dh2(d34) ? yh2 : vh2)(d34, 1);
    f40.version = y34;
    const p26 = n33.get(u35);
    p26 && e11.remove(p26), n33.set(u35, f40);
  }
  function h26(u35) {
    const d34 = n33.get(u35);
    if (d34) {
      const m34 = u35.index;
      m34 !== null && d34.version < m34.version && c27(u35);
    } else
      c27(u35);
    return n33.get(u35);
  }
  return {
    get: o13,
    update: l26,
    getWireframeAttribute: h26
  };
}
function Lf2(s18, e11, t19, i27) {
  const r24 = i27.isWebGL2;
  let n33;
  function a22(d34) {
    n33 = d34;
  }
  let o13, l26;
  function c27(d34) {
    o13 = d34.type, l26 = d34.bytesPerElement;
  }
  function h26(d34, m34) {
    s18.drawElements(n33, m34, o13, d34 * l26), t19.update(m34, n33, 1);
  }
  function u35(d34, m34, _21) {
    if (_21 === 0)
      return;
    let y34, f40;
    if (r24)
      y34 = s18, f40 = "drawElementsInstanced";
    else if (y34 = e11.get("ANGLE_instanced_arrays"), f40 = "drawElementsInstancedANGLE", y34 === null) {
      console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
      return;
    }
    y34[f40](n33, m34, o13, d34 * l26, _21), t19.update(m34, n33, _21);
  }
  this.setMode = a22, this.setIndex = c27, this.render = h26, this.renderInstances = u35;
}
function Cf2(s18) {
  const e11 = {
    geometries: 0,
    textures: 0
  }, t19 = {
    frame: 0,
    calls: 0,
    triangles: 0,
    points: 0,
    lines: 0
  };
  function i27(n33, a22, o13) {
    switch (t19.calls++, a22) {
      case 4:
        t19.triangles += o13 * (n33 / 3);
        break;
      case 1:
        t19.lines += o13 * (n33 / 2);
        break;
      case 3:
        t19.lines += o13 * (n33 - 1);
        break;
      case 2:
        t19.lines += o13 * n33;
        break;
      case 0:
        t19.points += o13 * n33;
        break;
      default:
        console.error("THREE.WebGLInfo: Unknown draw mode:", a22);
        break;
    }
  }
  function r24() {
    t19.frame++, t19.calls = 0, t19.triangles = 0, t19.points = 0, t19.lines = 0;
  }
  return {
    memory: e11,
    render: t19,
    programs: null,
    autoReset: true,
    reset: r24,
    update: i27
  };
}
function Rf2(s18, e11) {
  return s18[0] - e11[0];
}
function Nf2(s18, e11) {
  return Math.abs(e11[1]) - Math.abs(s18[1]);
}
function Pf2(s18, e11, t19) {
  const i27 = {}, r24 = new Float32Array(8), n33 = /* @__PURE__ */ new WeakMap(), a22 = new gt12(), o13 = [];
  for (let c27 = 0; c27 < 8; c27++)
    o13[c27] = [c27, 0];
  function l26(c27, h26, u35) {
    const d34 = c27.morphTargetInfluences;
    if (e11.isWebGL2 === true) {
      const m34 = h26.morphAttributes.position || h26.morphAttributes.normal || h26.morphAttributes.color, _21 = m34 !== void 0 ? m34.length : 0;
      let y34 = n33.get(h26);
      if (y34 === void 0 || y34.count !== _21) {
        let A18 = function() {
          U20.dispose(), n33.delete(h26), h26.removeEventListener("dispose", A18);
        };
        y34 !== void 0 && y34.texture.dispose();
        const M13 = h26.morphAttributes.position !== void 0, E25 = h26.morphAttributes.normal !== void 0, w31 = h26.morphAttributes.color !== void 0, I18 = h26.morphAttributes.position || [], D18 = h26.morphAttributes.normal || [], P20 = h26.morphAttributes.color || [];
        let x36 = 0;
        M13 === true && (x36 = 1), E25 === true && (x36 = 2), w31 === true && (x36 = 3);
        let C21 = h26.attributes.position.count * x36, G16 = 1;
        C21 > e11.maxTextureSize && (G16 = Math.ceil(C21 / e11.maxTextureSize), C21 = e11.maxTextureSize);
        const z21 = new Float32Array(C21 * G16 * 4 * _21), U20 = new fh2(z21, C21, G16, _21);
        U20.type = er5, U20.needsUpdate = true;
        const V16 = x36 * 4;
        for (let j19 = 0; j19 < _21; j19++) {
          const W11 = I18[j19], re8 = D18[j19], $25 = P20[j19], ie8 = C21 * G16 * 4 * j19;
          for (let le7 = 0; le7 < W11.count; le7++) {
            const fe7 = le7 * V16;
            M13 === true && (a22.fromBufferAttribute(W11, le7), z21[ie8 + fe7 + 0] = a22.x, z21[ie8 + fe7 + 1] = a22.y, z21[ie8 + fe7 + 2] = a22.z, z21[ie8 + fe7 + 3] = 0), E25 === true && (a22.fromBufferAttribute(re8, le7), z21[ie8 + fe7 + 4] = a22.x, z21[ie8 + fe7 + 5] = a22.y, z21[ie8 + fe7 + 6] = a22.z, z21[ie8 + fe7 + 7] = 0), w31 === true && (a22.fromBufferAttribute($25, le7), z21[ie8 + fe7 + 8] = a22.x, z21[ie8 + fe7 + 9] = a22.y, z21[ie8 + fe7 + 10] = a22.z, z21[ie8 + fe7 + 11] = $25.itemSize === 4 ? a22.w : 1);
          }
        }
        y34 = {
          count: _21,
          texture: U20,
          size: new We7(C21, G16)
        }, n33.set(h26, y34), h26.addEventListener("dispose", A18);
      }
      let f40 = 0;
      for (let A18 = 0; A18 < d34.length; A18++)
        f40 += d34[A18];
      const p26 = h26.morphTargetsRelative ? 1 : 1 - f40;
      u35.getUniforms().setValue(s18, "morphTargetBaseInfluence", p26), u35.getUniforms().setValue(s18, "morphTargetInfluences", d34), u35.getUniforms().setValue(s18, "morphTargetsTexture", y34.texture, t19), u35.getUniforms().setValue(s18, "morphTargetsTextureSize", y34.size);
    } else {
      const m34 = d34 === void 0 ? 0 : d34.length;
      let _21 = i27[h26.id];
      if (_21 === void 0 || _21.length !== m34) {
        _21 = [];
        for (let M13 = 0; M13 < m34; M13++)
          _21[M13] = [M13, 0];
        i27[h26.id] = _21;
      }
      for (let M13 = 0; M13 < m34; M13++) {
        const E25 = _21[M13];
        E25[0] = M13, E25[1] = d34[M13];
      }
      _21.sort(Nf2);
      for (let M13 = 0; M13 < 8; M13++)
        M13 < m34 && _21[M13][1] ? (o13[M13][0] = _21[M13][0], o13[M13][1] = _21[M13][1]) : (o13[M13][0] = Number.MAX_SAFE_INTEGER, o13[M13][1] = 0);
      o13.sort(Rf2);
      const y34 = h26.morphAttributes.position, f40 = h26.morphAttributes.normal;
      let p26 = 0;
      for (let M13 = 0; M13 < 8; M13++) {
        const E25 = o13[M13], w31 = E25[0], I18 = E25[1];
        w31 !== Number.MAX_SAFE_INTEGER && I18 ? (y34 && h26.getAttribute("morphTarget" + M13) !== y34[w31] && h26.setAttribute("morphTarget" + M13, y34[w31]), f40 && h26.getAttribute("morphNormal" + M13) !== f40[w31] && h26.setAttribute("morphNormal" + M13, f40[w31]), r24[M13] = I18, p26 += I18) : (y34 && h26.hasAttribute("morphTarget" + M13) === true && h26.deleteAttribute("morphTarget" + M13), f40 && h26.hasAttribute("morphNormal" + M13) === true && h26.deleteAttribute("morphNormal" + M13), r24[M13] = 0);
      }
      const A18 = h26.morphTargetsRelative ? 1 : 1 - p26;
      u35.getUniforms().setValue(s18, "morphTargetBaseInfluence", A18), u35.getUniforms().setValue(s18, "morphTargetInfluences", r24);
    }
  }
  return {
    update: l26
  };
}
function If2(s18, e11, t19, i27) {
  let r24 = /* @__PURE__ */ new WeakMap();
  function n33(l26) {
    const c27 = i27.render.frame, h26 = l26.geometry, u35 = e11.get(l26, h26);
    return r24.get(u35) !== c27 && (e11.update(u35), r24.set(u35, c27)), l26.isInstancedMesh && (l26.hasEventListener("dispose", o13) === false && l26.addEventListener("dispose", o13), t19.update(l26.instanceMatrix, 34962), l26.instanceColor !== null && t19.update(l26.instanceColor, 34962)), u35;
  }
  function a22() {
    r24 = /* @__PURE__ */ new WeakMap();
  }
  function o13(l26) {
    const c27 = l26.target;
    c27.removeEventListener("dispose", o13), t19.remove(c27.instanceMatrix), c27.instanceColor !== null && t19.remove(c27.instanceColor);
  }
  return {
    update: n33,
    dispose: a22
  };
}
var Sh2 = new Wt7();
var Th2 = new fh2();
var Eh2 = new bd2();
var Ah2 = new Mh2();
var tc2 = [];
var ic2 = [];
var rc2 = new Float32Array(16);
var nc2 = new Float32Array(9);
var sc2 = new Float32Array(4);
function Rn5(s18, e11, t19) {
  const i27 = s18[0];
  if (i27 <= 0 || i27 > 0)
    return s18;
  const r24 = e11 * t19;
  let n33 = tc2[r24];
  if (n33 === void 0 && (n33 = new Float32Array(r24), tc2[r24] = n33), e11 !== 0) {
    i27.toArray(n33, 0);
    for (let a22 = 1, o13 = 0; a22 !== e11; ++a22)
      o13 += t19, s18[a22].toArray(n33, o13);
  }
  return n33;
}
function It5(s18, e11) {
  if (s18.length !== e11.length)
    return false;
  for (let t19 = 0, i27 = s18.length; t19 < i27; t19++)
    if (s18[t19] !== e11[t19])
      return false;
  return true;
}
function Dt4(s18, e11) {
  for (let t19 = 0, i27 = e11.length; t19 < i27; t19++)
    s18[t19] = e11[t19];
}
function ca2(s18, e11) {
  let t19 = ic2[e11];
  t19 === void 0 && (t19 = new Int32Array(e11), ic2[e11] = t19);
  for (let i27 = 0; i27 !== e11; ++i27)
    t19[i27] = s18.allocateTextureUnit();
  return t19;
}
function Df2(s18, e11) {
  const t19 = this.cache;
  t19[0] !== e11 && (s18.uniform1f(this.addr, e11), t19[0] = e11);
}
function kf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y) && (s18.uniform2f(this.addr, e11.x, e11.y), t19[0] = e11.x, t19[1] = e11.y);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform2fv(this.addr, e11), Dt4(t19, e11);
  }
}
function Uf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z) && (s18.uniform3f(this.addr, e11.x, e11.y, e11.z), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z);
  else if (e11.r !== void 0)
    (t19[0] !== e11.r || t19[1] !== e11.g || t19[2] !== e11.b) && (s18.uniform3f(this.addr, e11.r, e11.g, e11.b), t19[0] = e11.r, t19[1] = e11.g, t19[2] = e11.b);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform3fv(this.addr, e11), Dt4(t19, e11);
  }
}
function Of2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z || t19[3] !== e11.w) && (s18.uniform4f(this.addr, e11.x, e11.y, e11.z, e11.w), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z, t19[3] = e11.w);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform4fv(this.addr, e11), Dt4(t19, e11);
  }
}
function zf2(s18, e11) {
  const t19 = this.cache, i27 = e11.elements;
  if (i27 === void 0) {
    if (It5(t19, e11))
      return;
    s18.uniformMatrix2fv(this.addr, false, e11), Dt4(t19, e11);
  } else {
    if (It5(t19, i27))
      return;
    sc2.set(i27), s18.uniformMatrix2fv(this.addr, false, sc2), Dt4(t19, i27);
  }
}
function Bf2(s18, e11) {
  const t19 = this.cache, i27 = e11.elements;
  if (i27 === void 0) {
    if (It5(t19, e11))
      return;
    s18.uniformMatrix3fv(this.addr, false, e11), Dt4(t19, e11);
  } else {
    if (It5(t19, i27))
      return;
    nc2.set(i27), s18.uniformMatrix3fv(this.addr, false, nc2), Dt4(t19, i27);
  }
}
function Ff2(s18, e11) {
  const t19 = this.cache, i27 = e11.elements;
  if (i27 === void 0) {
    if (It5(t19, e11))
      return;
    s18.uniformMatrix4fv(this.addr, false, e11), Dt4(t19, e11);
  } else {
    if (It5(t19, i27))
      return;
    rc2.set(i27), s18.uniformMatrix4fv(this.addr, false, rc2), Dt4(t19, i27);
  }
}
function Hf2(s18, e11) {
  const t19 = this.cache;
  t19[0] !== e11 && (s18.uniform1i(this.addr, e11), t19[0] = e11);
}
function Vf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y) && (s18.uniform2i(this.addr, e11.x, e11.y), t19[0] = e11.x, t19[1] = e11.y);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform2iv(this.addr, e11), Dt4(t19, e11);
  }
}
function Gf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z) && (s18.uniform3i(this.addr, e11.x, e11.y, e11.z), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform3iv(this.addr, e11), Dt4(t19, e11);
  }
}
function Wf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z || t19[3] !== e11.w) && (s18.uniform4i(this.addr, e11.x, e11.y, e11.z, e11.w), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z, t19[3] = e11.w);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform4iv(this.addr, e11), Dt4(t19, e11);
  }
}
function jf2(s18, e11) {
  const t19 = this.cache;
  t19[0] !== e11 && (s18.uniform1ui(this.addr, e11), t19[0] = e11);
}
function Xf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y) && (s18.uniform2ui(this.addr, e11.x, e11.y), t19[0] = e11.x, t19[1] = e11.y);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform2uiv(this.addr, e11), Dt4(t19, e11);
  }
}
function qf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z) && (s18.uniform3ui(this.addr, e11.x, e11.y, e11.z), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform3uiv(this.addr, e11), Dt4(t19, e11);
  }
}
function Yf2(s18, e11) {
  const t19 = this.cache;
  if (e11.x !== void 0)
    (t19[0] !== e11.x || t19[1] !== e11.y || t19[2] !== e11.z || t19[3] !== e11.w) && (s18.uniform4ui(this.addr, e11.x, e11.y, e11.z, e11.w), t19[0] = e11.x, t19[1] = e11.y, t19[2] = e11.z, t19[3] = e11.w);
  else {
    if (It5(t19, e11))
      return;
    s18.uniform4uiv(this.addr, e11), Dt4(t19, e11);
  }
}
function Zf2(s18, e11, t19) {
  const i27 = this.cache, r24 = t19.allocateTextureUnit();
  i27[0] !== r24 && (s18.uniform1i(this.addr, r24), i27[0] = r24), t19.setTexture2D(e11 || Sh2, r24);
}
function Jf2(s18, e11, t19) {
  const i27 = this.cache, r24 = t19.allocateTextureUnit();
  i27[0] !== r24 && (s18.uniform1i(this.addr, r24), i27[0] = r24), t19.setTexture3D(e11 || Eh2, r24);
}
function Kf2(s18, e11, t19) {
  const i27 = this.cache, r24 = t19.allocateTextureUnit();
  i27[0] !== r24 && (s18.uniform1i(this.addr, r24), i27[0] = r24), t19.setTextureCube(e11 || Ah2, r24);
}
function $f2(s18, e11, t19) {
  const i27 = this.cache, r24 = t19.allocateTextureUnit();
  i27[0] !== r24 && (s18.uniform1i(this.addr, r24), i27[0] = r24), t19.setTexture2DArray(e11 || Th2, r24);
}
function Qf2(s18) {
  switch (s18) {
    case 5126:
      return Df2;
    case 35664:
      return kf2;
    case 35665:
      return Uf2;
    case 35666:
      return Of2;
    case 35674:
      return zf2;
    case 35675:
      return Bf2;
    case 35676:
      return Ff2;
    case 5124:
    case 35670:
      return Hf2;
    case 35667:
    case 35671:
      return Vf2;
    case 35668:
    case 35672:
      return Gf2;
    case 35669:
    case 35673:
      return Wf2;
    case 5125:
      return jf2;
    case 36294:
      return Xf2;
    case 36295:
      return qf2;
    case 36296:
      return Yf2;
    case 35678:
    case 36198:
    case 36298:
    case 36306:
    case 35682:
      return Zf2;
    case 35679:
    case 36299:
    case 36307:
      return Jf2;
    case 35680:
    case 36300:
    case 36308:
    case 36293:
      return Kf2;
    case 36289:
    case 36303:
    case 36311:
    case 36292:
      return $f2;
  }
}
function eg2(s18, e11) {
  s18.uniform1fv(this.addr, e11);
}
function tg2(s18, e11) {
  const t19 = Rn5(e11, this.size, 2);
  s18.uniform2fv(this.addr, t19);
}
function ig2(s18, e11) {
  const t19 = Rn5(e11, this.size, 3);
  s18.uniform3fv(this.addr, t19);
}
function rg2(s18, e11) {
  const t19 = Rn5(e11, this.size, 4);
  s18.uniform4fv(this.addr, t19);
}
function ng2(s18, e11) {
  const t19 = Rn5(e11, this.size, 4);
  s18.uniformMatrix2fv(this.addr, false, t19);
}
function sg2(s18, e11) {
  const t19 = Rn5(e11, this.size, 9);
  s18.uniformMatrix3fv(this.addr, false, t19);
}
function ag2(s18, e11) {
  const t19 = Rn5(e11, this.size, 16);
  s18.uniformMatrix4fv(this.addr, false, t19);
}
function og2(s18, e11) {
  s18.uniform1iv(this.addr, e11);
}
function lg2(s18, e11) {
  s18.uniform2iv(this.addr, e11);
}
function cg2(s18, e11) {
  s18.uniform3iv(this.addr, e11);
}
function hg2(s18, e11) {
  s18.uniform4iv(this.addr, e11);
}
function ug2(s18, e11) {
  s18.uniform1uiv(this.addr, e11);
}
function dg2(s18, e11) {
  s18.uniform2uiv(this.addr, e11);
}
function pg2(s18, e11) {
  s18.uniform3uiv(this.addr, e11);
}
function mg2(s18, e11) {
  s18.uniform4uiv(this.addr, e11);
}
function fg2(s18, e11, t19) {
  const i27 = this.cache, r24 = e11.length, n33 = ca2(t19, r24);
  It5(i27, n33) || (s18.uniform1iv(this.addr, n33), Dt4(i27, n33));
  for (let a22 = 0; a22 !== r24; ++a22)
    t19.setTexture2D(e11[a22] || Sh2, n33[a22]);
}
function gg2(s18, e11, t19) {
  const i27 = this.cache, r24 = e11.length, n33 = ca2(t19, r24);
  It5(i27, n33) || (s18.uniform1iv(this.addr, n33), Dt4(i27, n33));
  for (let a22 = 0; a22 !== r24; ++a22)
    t19.setTexture3D(e11[a22] || Eh2, n33[a22]);
}
function _g2(s18, e11, t19) {
  const i27 = this.cache, r24 = e11.length, n33 = ca2(t19, r24);
  It5(i27, n33) || (s18.uniform1iv(this.addr, n33), Dt4(i27, n33));
  for (let a22 = 0; a22 !== r24; ++a22)
    t19.setTextureCube(e11[a22] || Ah2, n33[a22]);
}
function vg2(s18, e11, t19) {
  const i27 = this.cache, r24 = e11.length, n33 = ca2(t19, r24);
  It5(i27, n33) || (s18.uniform1iv(this.addr, n33), Dt4(i27, n33));
  for (let a22 = 0; a22 !== r24; ++a22)
    t19.setTexture2DArray(e11[a22] || Th2, n33[a22]);
}
function yg2(s18) {
  switch (s18) {
    case 5126:
      return eg2;
    case 35664:
      return tg2;
    case 35665:
      return ig2;
    case 35666:
      return rg2;
    case 35674:
      return ng2;
    case 35675:
      return sg2;
    case 35676:
      return ag2;
    case 5124:
    case 35670:
      return og2;
    case 35667:
    case 35671:
      return lg2;
    case 35668:
    case 35672:
      return cg2;
    case 35669:
    case 35673:
      return hg2;
    case 5125:
      return ug2;
    case 36294:
      return dg2;
    case 36295:
      return pg2;
    case 36296:
      return mg2;
    case 35678:
    case 36198:
    case 36298:
    case 36306:
    case 35682:
      return fg2;
    case 35679:
    case 36299:
    case 36307:
      return gg2;
    case 35680:
    case 36300:
    case 36308:
    case 36293:
      return _g2;
    case 36289:
    case 36303:
    case 36311:
    case 36292:
      return vg2;
  }
}
var xg2 = class {
  constructor(e11, t19, i27) {
    this.id = e11, this.addr = i27, this.cache = [], this.setValue = Qf2(t19.type);
  }
};
var bg2 = class {
  constructor(e11, t19, i27) {
    this.id = e11, this.addr = i27, this.cache = [], this.size = t19.size, this.setValue = yg2(t19.type);
  }
};
var Mg2 = class {
  constructor(e11) {
    this.id = e11, this.seq = [], this.map = {};
  }
  setValue(e11, t19, i27) {
    const r24 = this.seq;
    for (let n33 = 0, a22 = r24.length; n33 !== a22; ++n33) {
      const o13 = r24[n33];
      o13.setValue(e11, t19[o13.id], i27);
    }
  }
};
var Ya = /(\w+)(\])?(\[|\.)?/g;
function ac2(s18, e11) {
  s18.seq.push(e11), s18.map[e11.id] = e11;
}
function wg2(s18, e11, t19) {
  const i27 = s18.name, r24 = i27.length;
  for (Ya.lastIndex = 0; ; ) {
    const n33 = Ya.exec(i27), a22 = Ya.lastIndex;
    let o13 = n33[1];
    const l26 = n33[2] === "]", c27 = n33[3];
    if (l26 && (o13 = o13 | 0), c27 === void 0 || c27 === "[" && a22 + 2 === r24) {
      ac2(t19, c27 === void 0 ? new xg2(o13, s18, e11) : new bg2(o13, s18, e11));
      break;
    } else {
      let h26 = t19.map[o13];
      h26 === void 0 && (h26 = new Mg2(o13), ac2(t19, h26)), t19 = h26;
    }
  }
}
var Js2 = class {
  constructor(e11, t19) {
    this.seq = [], this.map = {};
    const i27 = e11.getProgramParameter(t19, 35718);
    for (let r24 = 0; r24 < i27; ++r24) {
      const n33 = e11.getActiveUniform(t19, r24), a22 = e11.getUniformLocation(t19, n33.name);
      wg2(n33, a22, this);
    }
  }
  setValue(e11, t19, i27, r24) {
    const n33 = this.map[t19];
    n33 !== void 0 && n33.setValue(e11, i27, r24);
  }
  setOptional(e11, t19, i27) {
    const r24 = t19[i27];
    r24 !== void 0 && this.setValue(e11, i27, r24);
  }
  static upload(e11, t19, i27, r24) {
    for (let n33 = 0, a22 = t19.length; n33 !== a22; ++n33) {
      const o13 = t19[n33], l26 = i27[o13.id];
      l26.needsUpdate !== false && o13.setValue(e11, l26.value, r24);
    }
  }
  static seqWithValue(e11, t19) {
    const i27 = [];
    for (let r24 = 0, n33 = e11.length; r24 !== n33; ++r24) {
      const a22 = e11[r24];
      a22.id in t19 && i27.push(a22);
    }
    return i27;
  }
};
function oc2(s18, e11, t19) {
  const i27 = s18.createShader(e11);
  return s18.shaderSource(i27, t19), s18.compileShader(i27), i27;
}
var Sg2 = 0;
function Tg2(s18, e11) {
  const t19 = s18.split(`
`), i27 = [], r24 = Math.max(e11 - 6, 0), n33 = Math.min(e11 + 6, t19.length);
  for (let a22 = r24; a22 < n33; a22++) {
    const o13 = a22 + 1;
    i27.push(`${o13 === e11 ? ">" : " "} ${o13}: ${t19[a22]}`);
  }
  return i27.join(`
`);
}
function Eg2(s18) {
  switch (s18) {
    case br5:
      return ["Linear", "( value )"];
    case rt12:
      return ["sRGB", "( value )"];
    default:
      return console.warn("THREE.WebGLProgram: Unsupported encoding:", s18), ["Linear", "( value )"];
  }
}
function lc2(s18, e11, t19) {
  const i27 = s18.getShaderParameter(e11, 35713), r24 = s18.getShaderInfoLog(e11).trim();
  if (i27 && r24 === "")
    return "";
  const n33 = /ERROR: 0:(\d+)/.exec(r24);
  if (n33) {
    const a22 = parseInt(n33[1]);
    return t19.toUpperCase() + `

` + r24 + `

` + Tg2(s18.getShaderSource(e11), a22);
  } else
    return r24;
}
function Ag2(s18, e11) {
  const t19 = Eg2(e11);
  return "vec4 " + s18 + "( vec4 value ) { return LinearTo" + t19[0] + t19[1] + "; }";
}
function Lg2(s18, e11) {
  let t19;
  switch (e11) {
    case Cu2:
      t19 = "Linear";
      break;
    case Ru2:
      t19 = "Reinhard";
      break;
    case Nu2:
      t19 = "OptimizedCineon";
      break;
    case Pu2:
      t19 = "ACESFilmic";
      break;
    case Iu2:
      t19 = "Custom";
      break;
    default:
      console.warn("THREE.WebGLProgram: Unsupported toneMapping:", e11), t19 = "Linear";
  }
  return "vec3 " + s18 + "( vec3 color ) { return " + t19 + "ToneMapping( color ); }";
}
function Cg2(s18) {
  return [
    s18.extensionDerivatives || s18.envMapCubeUVHeight || s18.bumpMap || s18.normalMapTangentSpace || s18.clearcoatNormalMap || s18.flatShading || s18.shaderID === "physical" ? "#extension GL_OES_standard_derivatives : enable" : "",
    (s18.extensionFragDepth || s18.logarithmicDepthBuffer) && s18.rendererExtensionFragDepth ? "#extension GL_EXT_frag_depth : enable" : "",
    s18.extensionDrawBuffers && s18.rendererExtensionDrawBuffers ? "#extension GL_EXT_draw_buffers : require" : "",
    (s18.extensionShaderTextureLOD || s18.envMap || s18.transmission) && s18.rendererExtensionShaderTextureLod ? "#extension GL_EXT_shader_texture_lod : enable" : ""
  ].filter(qn5).join(`
`);
}
function Rg2(s18) {
  const e11 = [];
  for (const t19 in s18) {
    const i27 = s18[t19];
    i27 !== false && e11.push("#define " + t19 + " " + i27);
  }
  return e11.join(`
`);
}
function Ng2(s18, e11) {
  const t19 = {}, i27 = s18.getProgramParameter(e11, 35721);
  for (let r24 = 0; r24 < i27; r24++) {
    const n33 = s18.getActiveAttrib(e11, r24), a22 = n33.name;
    let o13 = 1;
    n33.type === 35674 && (o13 = 2), n33.type === 35675 && (o13 = 3), n33.type === 35676 && (o13 = 4), t19[a22] = {
      type: n33.type,
      location: s18.getAttribLocation(e11, a22),
      locationSize: o13
    };
  }
  return t19;
}
function qn5(s18) {
  return s18 !== "";
}
function cc2(s18, e11) {
  const t19 = e11.numSpotLightShadows + e11.numSpotLightMaps - e11.numSpotLightShadowsWithMaps;
  return s18.replace(/NUM_DIR_LIGHTS/g, e11.numDirLights).replace(/NUM_SPOT_LIGHTS/g, e11.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g, e11.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g, t19).replace(/NUM_RECT_AREA_LIGHTS/g, e11.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g, e11.numPointLights).replace(/NUM_HEMI_LIGHTS/g, e11.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g, e11.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g, e11.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g, e11.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g, e11.numPointLightShadows);
}
function hc2(s18, e11) {
  return s18.replace(/NUM_CLIPPING_PLANES/g, e11.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g, e11.numClippingPlanes - e11.numClipIntersection);
}
var Pg2 = /^[ \t]*#include +<([\w\d./]+)>/gm;
function yo2(s18) {
  return s18.replace(Pg2, Ig2);
}
function Ig2(s18, e11) {
  const t19 = qe6[e11];
  if (t19 === void 0)
    throw new Error("Can not resolve #include <" + e11 + ">");
  return yo2(t19);
}
var Dg2 = /#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;
function uc2(s18) {
  return s18.replace(Dg2, kg2);
}
function kg2(s18, e11, t19, i27) {
  let r24 = "";
  for (let n33 = parseInt(e11); n33 < parseInt(t19); n33++)
    r24 += i27.replace(/\[\s*i\s*\]/g, "[ " + n33 + " ]").replace(/UNROLLED_LOOP_INDEX/g, n33);
  return r24;
}
function dc2(s18) {
  let e11 = "precision " + s18.precision + ` float;
precision ` + s18.precision + " int;";
  return s18.precision === "highp" ? e11 += `
#define HIGH_PRECISION` : s18.precision === "mediump" ? e11 += `
#define MEDIUM_PRECISION` : s18.precision === "lowp" && (e11 += `
#define LOW_PRECISION`), e11;
}
function Ug2(s18) {
  let e11 = "SHADOWMAP_TYPE_BASIC";
  return s18.shadowMapType === ih2 ? e11 = "SHADOWMAP_TYPE_PCF" : s18.shadowMapType === ou2 ? e11 = "SHADOWMAP_TYPE_PCF_SOFT" : s18.shadowMapType === Xn5 && (e11 = "SHADOWMAP_TYPE_VSM"), e11;
}
function Og2(s18) {
  let e11 = "ENVMAP_TYPE_CUBE";
  if (s18.envMap)
    switch (s18.envMapMode) {
      case yn5:
      case xn5:
        e11 = "ENVMAP_TYPE_CUBE";
        break;
      case na2:
        e11 = "ENVMAP_TYPE_CUBE_UV";
        break;
    }
  return e11;
}
function zg2(s18) {
  let e11 = "ENVMAP_MODE_REFLECTION";
  if (s18.envMap)
    switch (s18.envMapMode) {
      case xn5:
        e11 = "ENVMAP_MODE_REFRACTION";
        break;
    }
  return e11;
}
function Bg2(s18) {
  let e11 = "ENVMAP_BLENDING_NONE";
  if (s18.envMap)
    switch (s18.combine) {
      case ra2:
        e11 = "ENVMAP_BLENDING_MULTIPLY";
        break;
      case Au2:
        e11 = "ENVMAP_BLENDING_MIX";
        break;
      case Lu2:
        e11 = "ENVMAP_BLENDING_ADD";
        break;
    }
  return e11;
}
function Fg2(s18) {
  const e11 = s18.envMapCubeUVHeight;
  if (e11 === null)
    return null;
  const t19 = Math.log2(e11) - 2, i27 = 1 / e11;
  return { texelWidth: 1 / (3 * Math.max(Math.pow(2, t19), 7 * 16)), texelHeight: i27, maxMip: t19 };
}
function Hg2(s18, e11, t19, i27) {
  const r24 = s18.getContext(), n33 = t19.defines;
  let a22 = t19.vertexShader, o13 = t19.fragmentShader;
  const l26 = Ug2(t19), c27 = Og2(t19), h26 = zg2(t19), u35 = Bg2(t19), d34 = Fg2(t19), m34 = t19.isWebGL2 ? "" : Cg2(t19), _21 = Rg2(n33), y34 = r24.createProgram();
  let f40, p26, A18 = t19.glslVersion ? "#version " + t19.glslVersion + `
` : "";
  t19.isRawShaderMaterial ? (f40 = [
    _21
  ].filter(qn5).join(`
`), f40.length > 0 && (f40 += `
`), p26 = [
    m34,
    _21
  ].filter(qn5).join(`
`), p26.length > 0 && (p26 += `
`)) : (f40 = [
    dc2(t19),
    "#define SHADER_NAME " + t19.shaderName,
    _21,
    t19.instancing ? "#define USE_INSTANCING" : "",
    t19.instancingColor ? "#define USE_INSTANCING_COLOR" : "",
    t19.useFog && t19.fog ? "#define USE_FOG" : "",
    t19.useFog && t19.fogExp2 ? "#define FOG_EXP2" : "",
    t19.map ? "#define USE_MAP" : "",
    t19.envMap ? "#define USE_ENVMAP" : "",
    t19.envMap ? "#define " + h26 : "",
    t19.lightMap ? "#define USE_LIGHTMAP" : "",
    t19.aoMap ? "#define USE_AOMAP" : "",
    t19.bumpMap ? "#define USE_BUMPMAP" : "",
    t19.normalMap ? "#define USE_NORMALMAP" : "",
    t19.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "",
    t19.normalMapTangentSpace ? "#define USE_NORMALMAP_TANGENTSPACE" : "",
    t19.displacementMap ? "#define USE_DISPLACEMENTMAP" : "",
    t19.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
    t19.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
    t19.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "",
    t19.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
    t19.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
    t19.iridescenceThicknessMap ? "#define USE_IRIDESCENCE_THICKNESSMAP" : "",
    t19.specularMap ? "#define USE_SPECULARMAP" : "",
    t19.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "",
    t19.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "",
    t19.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
    t19.metalnessMap ? "#define USE_METALNESSMAP" : "",
    t19.alphaMap ? "#define USE_ALPHAMAP" : "",
    t19.transmission ? "#define USE_TRANSMISSION" : "",
    t19.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
    t19.thicknessMap ? "#define USE_THICKNESSMAP" : "",
    t19.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "",
    t19.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "",
    //
    t19.mapUv ? "#define MAP_UV " + t19.mapUv : "",
    t19.alphaMapUv ? "#define ALPHAMAP_UV " + t19.alphaMapUv : "",
    t19.lightMapUv ? "#define LIGHTMAP_UV " + t19.lightMapUv : "",
    t19.aoMapUv ? "#define AOMAP_UV " + t19.aoMapUv : "",
    t19.emissiveMapUv ? "#define EMISSIVEMAP_UV " + t19.emissiveMapUv : "",
    t19.bumpMapUv ? "#define BUMPMAP_UV " + t19.bumpMapUv : "",
    t19.normalMapUv ? "#define NORMALMAP_UV " + t19.normalMapUv : "",
    t19.displacementMapUv ? "#define DISPLACEMENTMAP_UV " + t19.displacementMapUv : "",
    t19.metalnessMapUv ? "#define METALNESSMAP_UV " + t19.metalnessMapUv : "",
    t19.roughnessMapUv ? "#define ROUGHNESSMAP_UV " + t19.roughnessMapUv : "",
    t19.clearcoatMapUv ? "#define CLEARCOATMAP_UV " + t19.clearcoatMapUv : "",
    t19.clearcoatNormalMapUv ? "#define CLEARCOAT_NORMALMAP_UV " + t19.clearcoatNormalMapUv : "",
    t19.clearcoatRoughnessMapUv ? "#define CLEARCOAT_ROUGHNESSMAP_UV " + t19.clearcoatRoughnessMapUv : "",
    t19.iridescenceMapUv ? "#define IRIDESCENCEMAP_UV " + t19.iridescenceMapUv : "",
    t19.iridescenceThicknessMapUv ? "#define IRIDESCENCE_THICKNESSMAP_UV " + t19.iridescenceThicknessMapUv : "",
    t19.sheenColorMapUv ? "#define SHEEN_COLORMAP_UV " + t19.sheenColorMapUv : "",
    t19.sheenRoughnessMapUv ? "#define SHEEN_ROUGHNESSMAP_UV " + t19.sheenRoughnessMapUv : "",
    t19.specularMapUv ? "#define SPECULARMAP_UV " + t19.specularMapUv : "",
    t19.specularColorMapUv ? "#define SPECULAR_COLORMAP_UV " + t19.specularColorMapUv : "",
    t19.specularIntensityMapUv ? "#define SPECULAR_INTENSITYMAP_UV " + t19.specularIntensityMapUv : "",
    t19.transmissionMapUv ? "#define TRANSMISSIONMAP_UV " + t19.transmissionMapUv : "",
    t19.thicknessMapUv ? "#define THICKNESSMAP_UV " + t19.thicknessMapUv : "",
    //
    t19.vertexTangents ? "#define USE_TANGENT" : "",
    t19.vertexColors ? "#define USE_COLOR" : "",
    t19.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
    t19.vertexUvs2 ? "#define USE_UV2" : "",
    t19.pointsUvs ? "#define USE_POINTS_UV" : "",
    t19.flatShading ? "#define FLAT_SHADED" : "",
    t19.skinning ? "#define USE_SKINNING" : "",
    t19.morphTargets ? "#define USE_MORPHTARGETS" : "",
    t19.morphNormals && t19.flatShading === false ? "#define USE_MORPHNORMALS" : "",
    t19.morphColors && t19.isWebGL2 ? "#define USE_MORPHCOLORS" : "",
    t19.morphTargetsCount > 0 && t19.isWebGL2 ? "#define MORPHTARGETS_TEXTURE" : "",
    t19.morphTargetsCount > 0 && t19.isWebGL2 ? "#define MORPHTARGETS_TEXTURE_STRIDE " + t19.morphTextureStride : "",
    t19.morphTargetsCount > 0 && t19.isWebGL2 ? "#define MORPHTARGETS_COUNT " + t19.morphTargetsCount : "",
    t19.doubleSided ? "#define DOUBLE_SIDED" : "",
    t19.flipSided ? "#define FLIP_SIDED" : "",
    t19.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
    t19.shadowMapEnabled ? "#define " + l26 : "",
    t19.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "",
    t19.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
    t19.logarithmicDepthBuffer && t19.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "",
    "uniform mat4 modelMatrix;",
    "uniform mat4 modelViewMatrix;",
    "uniform mat4 projectionMatrix;",
    "uniform mat4 viewMatrix;",
    "uniform mat3 normalMatrix;",
    "uniform vec3 cameraPosition;",
    "uniform bool isOrthographic;",
    "#ifdef USE_INSTANCING",
    "	attribute mat4 instanceMatrix;",
    "#endif",
    "#ifdef USE_INSTANCING_COLOR",
    "	attribute vec3 instanceColor;",
    "#endif",
    "attribute vec3 position;",
    "attribute vec3 normal;",
    "attribute vec2 uv;",
    "#ifdef USE_TANGENT",
    "	attribute vec4 tangent;",
    "#endif",
    "#if defined( USE_COLOR_ALPHA )",
    "	attribute vec4 color;",
    "#elif defined( USE_COLOR )",
    "	attribute vec3 color;",
    "#endif",
    "#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )",
    "	attribute vec3 morphTarget0;",
    "	attribute vec3 morphTarget1;",
    "	attribute vec3 morphTarget2;",
    "	attribute vec3 morphTarget3;",
    "	#ifdef USE_MORPHNORMALS",
    "		attribute vec3 morphNormal0;",
    "		attribute vec3 morphNormal1;",
    "		attribute vec3 morphNormal2;",
    "		attribute vec3 morphNormal3;",
    "	#else",
    "		attribute vec3 morphTarget4;",
    "		attribute vec3 morphTarget5;",
    "		attribute vec3 morphTarget6;",
    "		attribute vec3 morphTarget7;",
    "	#endif",
    "#endif",
    "#ifdef USE_SKINNING",
    "	attribute vec4 skinIndex;",
    "	attribute vec4 skinWeight;",
    "#endif",
    `
`
  ].filter(qn5).join(`
`), p26 = [
    m34,
    dc2(t19),
    "#define SHADER_NAME " + t19.shaderName,
    _21,
    t19.useFog && t19.fog ? "#define USE_FOG" : "",
    t19.useFog && t19.fogExp2 ? "#define FOG_EXP2" : "",
    t19.map ? "#define USE_MAP" : "",
    t19.matcap ? "#define USE_MATCAP" : "",
    t19.envMap ? "#define USE_ENVMAP" : "",
    t19.envMap ? "#define " + c27 : "",
    t19.envMap ? "#define " + h26 : "",
    t19.envMap ? "#define " + u35 : "",
    d34 ? "#define CUBEUV_TEXEL_WIDTH " + d34.texelWidth : "",
    d34 ? "#define CUBEUV_TEXEL_HEIGHT " + d34.texelHeight : "",
    d34 ? "#define CUBEUV_MAX_MIP " + d34.maxMip + ".0" : "",
    t19.lightMap ? "#define USE_LIGHTMAP" : "",
    t19.aoMap ? "#define USE_AOMAP" : "",
    t19.bumpMap ? "#define USE_BUMPMAP" : "",
    t19.normalMap ? "#define USE_NORMALMAP" : "",
    t19.normalMapObjectSpace ? "#define USE_NORMALMAP_OBJECTSPACE" : "",
    t19.normalMapTangentSpace ? "#define USE_NORMALMAP_TANGENTSPACE" : "",
    t19.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
    t19.clearcoat ? "#define USE_CLEARCOAT" : "",
    t19.clearcoatMap ? "#define USE_CLEARCOATMAP" : "",
    t19.clearcoatRoughnessMap ? "#define USE_CLEARCOAT_ROUGHNESSMAP" : "",
    t19.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "",
    t19.iridescence ? "#define USE_IRIDESCENCE" : "",
    t19.iridescenceMap ? "#define USE_IRIDESCENCEMAP" : "",
    t19.iridescenceThicknessMap ? "#define USE_IRIDESCENCE_THICKNESSMAP" : "",
    t19.specularMap ? "#define USE_SPECULARMAP" : "",
    t19.specularColorMap ? "#define USE_SPECULAR_COLORMAP" : "",
    t19.specularIntensityMap ? "#define USE_SPECULAR_INTENSITYMAP" : "",
    t19.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
    t19.metalnessMap ? "#define USE_METALNESSMAP" : "",
    t19.alphaMap ? "#define USE_ALPHAMAP" : "",
    t19.alphaTest ? "#define USE_ALPHATEST" : "",
    t19.sheen ? "#define USE_SHEEN" : "",
    t19.sheenColorMap ? "#define USE_SHEEN_COLORMAP" : "",
    t19.sheenRoughnessMap ? "#define USE_SHEEN_ROUGHNESSMAP" : "",
    t19.transmission ? "#define USE_TRANSMISSION" : "",
    t19.transmissionMap ? "#define USE_TRANSMISSIONMAP" : "",
    t19.thicknessMap ? "#define USE_THICKNESSMAP" : "",
    t19.decodeVideoTexture ? "#define DECODE_VIDEO_TEXTURE" : "",
    t19.vertexTangents ? "#define USE_TANGENT" : "",
    t19.vertexColors || t19.instancingColor ? "#define USE_COLOR" : "",
    t19.vertexAlphas ? "#define USE_COLOR_ALPHA" : "",
    t19.vertexUvs2 ? "#define USE_UV2" : "",
    t19.pointsUvs ? "#define USE_POINTS_UV" : "",
    t19.gradientMap ? "#define USE_GRADIENTMAP" : "",
    t19.flatShading ? "#define FLAT_SHADED" : "",
    t19.doubleSided ? "#define DOUBLE_SIDED" : "",
    t19.flipSided ? "#define FLIP_SIDED" : "",
    t19.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
    t19.shadowMapEnabled ? "#define " + l26 : "",
    t19.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "",
    t19.useLegacyLights ? "#define LEGACY_LIGHTS" : "",
    t19.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
    t19.logarithmicDepthBuffer && t19.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "",
    "uniform mat4 viewMatrix;",
    "uniform vec3 cameraPosition;",
    "uniform bool isOrthographic;",
    t19.toneMapping !== Fi4 ? "#define TONE_MAPPING" : "",
    t19.toneMapping !== Fi4 ? qe6.tonemapping_pars_fragment : "",
    // this code is required here because it is used by the toneMapping() function defined below
    t19.toneMapping !== Fi4 ? Lg2("toneMapping", t19.toneMapping) : "",
    t19.dithering ? "#define DITHERING" : "",
    t19.opaque ? "#define OPAQUE" : "",
    qe6.encodings_pars_fragment,
    // this code is required here because it is used by the various encoding/decoding function defined below
    Ag2("linearToOutputTexel", t19.outputEncoding),
    t19.useDepthPacking ? "#define DEPTH_PACKING " + t19.depthPacking : "",
    `
`
  ].filter(qn5).join(`
`)), a22 = yo2(a22), a22 = cc2(a22, t19), a22 = hc2(a22, t19), o13 = yo2(o13), o13 = cc2(o13, t19), o13 = hc2(o13, t19), a22 = uc2(a22), o13 = uc2(o13), t19.isWebGL2 && t19.isRawShaderMaterial !== true && (A18 = `#version 300 es
`, f40 = [
    "precision mediump sampler2DArray;",
    "#define attribute in",
    "#define varying out",
    "#define texture2D texture"
  ].join(`
`) + `
` + f40, p26 = [
    "#define varying in",
    t19.glslVersion === Pl2 ? "" : "layout(location = 0) out highp vec4 pc_fragColor;",
    t19.glslVersion === Pl2 ? "" : "#define gl_FragColor pc_fragColor",
    "#define gl_FragDepthEXT gl_FragDepth",
    "#define texture2D texture",
    "#define textureCube texture",
    "#define texture2DProj textureProj",
    "#define texture2DLodEXT textureLod",
    "#define texture2DProjLodEXT textureProjLod",
    "#define textureCubeLodEXT textureLod",
    "#define texture2DGradEXT textureGrad",
    "#define texture2DProjGradEXT textureProjGrad",
    "#define textureCubeGradEXT textureGrad"
  ].join(`
`) + `
` + p26);
  const M13 = A18 + f40 + a22, E25 = A18 + p26 + o13, w31 = oc2(r24, 35633, M13), I18 = oc2(r24, 35632, E25);
  if (r24.attachShader(y34, w31), r24.attachShader(y34, I18), t19.index0AttributeName !== void 0 ? r24.bindAttribLocation(y34, 0, t19.index0AttributeName) : t19.morphTargets === true && r24.bindAttribLocation(y34, 0, "position"), r24.linkProgram(y34), s18.debug.checkShaderErrors) {
    const x36 = r24.getProgramInfoLog(y34).trim(), C21 = r24.getShaderInfoLog(w31).trim(), G16 = r24.getShaderInfoLog(I18).trim();
    let z21 = true, U20 = true;
    if (r24.getProgramParameter(y34, 35714) === false)
      if (z21 = false, typeof s18.debug.onShaderError == "function")
        s18.debug.onShaderError(r24, y34, w31, I18);
      else {
        const V16 = lc2(r24, w31, "vertex"), j19 = lc2(r24, I18, "fragment");
        console.error(
          "THREE.WebGLProgram: Shader Error " + r24.getError() + " - VALIDATE_STATUS " + r24.getProgramParameter(y34, 35715) + `

Program Info Log: ` + x36 + `
` + V16 + `
` + j19
        );
      }
    else
      x36 !== "" ? console.warn("THREE.WebGLProgram: Program Info Log:", x36) : (C21 === "" || G16 === "") && (U20 = false);
    U20 && (this.diagnostics = {
      runnable: z21,
      programLog: x36,
      vertexShader: {
        log: C21,
        prefix: f40
      },
      fragmentShader: {
        log: G16,
        prefix: p26
      }
    });
  }
  r24.deleteShader(w31), r24.deleteShader(I18);
  let D18;
  this.getUniforms = function() {
    return D18 === void 0 && (D18 = new Js2(r24, y34)), D18;
  };
  let P20;
  return this.getAttributes = function() {
    return P20 === void 0 && (P20 = Ng2(r24, y34)), P20;
  }, this.destroy = function() {
    i27.releaseStatesOfProgram(this), r24.deleteProgram(y34), this.program = void 0;
  }, this.name = t19.shaderName, this.id = Sg2++, this.cacheKey = e11, this.usedTimes = 1, this.program = y34, this.vertexShader = w31, this.fragmentShader = I18, this;
}
var Vg2 = 0;
var Gg2 = class {
  constructor() {
    this.shaderCache = /* @__PURE__ */ new Map(), this.materialCache = /* @__PURE__ */ new Map();
  }
  update(e11) {
    const t19 = e11.vertexShader, i27 = e11.fragmentShader, r24 = this._getShaderStage(t19), n33 = this._getShaderStage(i27), a22 = this._getShaderCacheForMaterial(e11);
    return a22.has(r24) === false && (a22.add(r24), r24.usedTimes++), a22.has(n33) === false && (a22.add(n33), n33.usedTimes++), this;
  }
  remove(e11) {
    const t19 = this.materialCache.get(e11);
    for (const i27 of t19)
      i27.usedTimes--, i27.usedTimes === 0 && this.shaderCache.delete(i27.code);
    return this.materialCache.delete(e11), this;
  }
  getVertexShaderID(e11) {
    return this._getShaderStage(e11.vertexShader).id;
  }
  getFragmentShaderID(e11) {
    return this._getShaderStage(e11.fragmentShader).id;
  }
  dispose() {
    this.shaderCache.clear(), this.materialCache.clear();
  }
  _getShaderCacheForMaterial(e11) {
    const t19 = this.materialCache;
    let i27 = t19.get(e11);
    return i27 === void 0 && (i27 = /* @__PURE__ */ new Set(), t19.set(e11, i27)), i27;
  }
  _getShaderStage(e11) {
    const t19 = this.shaderCache;
    let i27 = t19.get(e11);
    return i27 === void 0 && (i27 = new Wg2(e11), t19.set(e11, i27)), i27;
  }
};
var Wg2 = class {
  constructor(e11) {
    this.id = Vg2++, this.code = e11, this.usedTimes = 0;
  }
};
function jg2(s18, e11, t19, i27, r24, n33, a22) {
  const o13 = new gh2(), l26 = new Gg2(), c27 = [], h26 = r24.isWebGL2, u35 = r24.logarithmicDepthBuffer, d34 = r24.vertexTextures;
  let m34 = r24.precision;
  const _21 = {
    MeshDepthMaterial: "depth",
    MeshDistanceMaterial: "distanceRGBA",
    MeshNormalMaterial: "normal",
    MeshBasicMaterial: "basic",
    MeshLambertMaterial: "lambert",
    MeshPhongMaterial: "phong",
    MeshToonMaterial: "toon",
    MeshStandardMaterial: "physical",
    MeshPhysicalMaterial: "physical",
    MeshMatcapMaterial: "matcap",
    LineBasicMaterial: "basic",
    LineDashedMaterial: "dashed",
    PointsMaterial: "points",
    ShadowMaterial: "shadow",
    SpriteMaterial: "sprite"
  };
  function y34(x36) {
    return x36 === 1 ? "uv2" : "uv";
  }
  function f40(x36, C21, G16, z21, U20) {
    const V16 = z21.fog, j19 = U20.geometry, W11 = x36.isMeshStandardMaterial ? z21.environment : null, re8 = (x36.isMeshStandardMaterial ? t19 : e11).get(x36.envMap || W11), $25 = re8 && re8.mapping === na2 ? re8.image.height : null, ie8 = _21[x36.type];
    x36.precision !== null && (m34 = r24.getMaxPrecision(x36.precision), m34 !== x36.precision && console.warn("THREE.WebGLProgram.getParameters:", x36.precision, "not supported, using", m34, "instead."));
    const le7 = j19.morphAttributes.position || j19.morphAttributes.normal || j19.morphAttributes.color, fe7 = le7 !== void 0 ? le7.length : 0;
    let ue8 = 0;
    j19.morphAttributes.position !== void 0 && (ue8 = 1), j19.morphAttributes.normal !== void 0 && (ue8 = 2), j19.morphAttributes.color !== void 0 && (ue8 = 3);
    let H16, q14, oe7, K16;
    if (ie8) {
      const ce9 = Si4[ie8];
      H16 = ce9.vertexShader, q14 = ce9.fragmentShader;
    } else
      H16 = x36.vertexShader, q14 = x36.fragmentShader, l26.update(x36), oe7 = l26.getVertexShaderID(x36), K16 = l26.getFragmentShaderID(x36);
    const F19 = s18.getRenderTarget(), ye7 = U20.isInstancedMesh === true, Le7 = !!x36.map, me9 = !!x36.matcap, De6 = !!re8, tt12 = !!x36.aoMap, Pe6 = !!x36.lightMap, je7 = !!x36.bumpMap, Mt10 = !!x36.normalMap, vt9 = !!x36.displacementMap, St9 = !!x36.emissiveMap, Tt9 = !!x36.metalnessMap, $e6 = !!x36.roughnessMap, ot15 = x36.clearcoat > 0, kt10 = x36.iridescence > 0, N22 = x36.sheen > 0, L12 = x36.transmission > 0, Q12 = ot15 && !!x36.clearcoatMap, de9 = ot15 && !!x36.clearcoatNormalMap, pe8 = ot15 && !!x36.clearcoatRoughnessMap, _e7 = kt10 && !!x36.iridescenceMap, O20 = kt10 && !!x36.iridescenceThicknessMap, ae7 = N22 && !!x36.sheenColorMap, Z12 = N22 && !!x36.sheenRoughnessMap, xe6 = !!x36.specularMap, Ae6 = !!x36.specularColorMap, Ce7 = !!x36.specularIntensityMap, we8 = L12 && !!x36.transmissionMap, Se7 = L12 && !!x36.thicknessMap, Ve8 = !!x36.gradientMap, nt17 = !!x36.alphaMap, wt10 = x36.alphaTest > 0, B22 = !!x36.extensions, te7 = !!j19.attributes.uv2;
    return {
      isWebGL2: h26,
      shaderID: ie8,
      shaderName: x36.type,
      vertexShader: H16,
      fragmentShader: q14,
      defines: x36.defines,
      customVertexShaderID: oe7,
      customFragmentShaderID: K16,
      isRawShaderMaterial: x36.isRawShaderMaterial === true,
      glslVersion: x36.glslVersion,
      precision: m34,
      instancing: ye7,
      instancingColor: ye7 && U20.instanceColor !== null,
      supportsVertexTextures: d34,
      outputEncoding: F19 === null ? s18.outputEncoding : F19.isXRRenderTarget === true ? F19.texture.encoding : br5,
      map: Le7,
      matcap: me9,
      envMap: De6,
      envMapMode: De6 && re8.mapping,
      envMapCubeUVHeight: $25,
      aoMap: tt12,
      lightMap: Pe6,
      bumpMap: je7,
      normalMap: Mt10,
      displacementMap: d34 && vt9,
      emissiveMap: St9,
      normalMapObjectSpace: Mt10 && x36.normalMapType === Qu,
      normalMapTangentSpace: Mt10 && x36.normalMapType === sa2,
      decodeVideoTexture: Le7 && x36.map.isVideoTexture === true && x36.map.encoding === rt12,
      metalnessMap: Tt9,
      roughnessMap: $e6,
      clearcoat: ot15,
      clearcoatMap: Q12,
      clearcoatNormalMap: de9,
      clearcoatRoughnessMap: pe8,
      iridescence: kt10,
      iridescenceMap: _e7,
      iridescenceThicknessMap: O20,
      sheen: N22,
      sheenColorMap: ae7,
      sheenRoughnessMap: Z12,
      specularMap: xe6,
      specularColorMap: Ae6,
      specularIntensityMap: Ce7,
      transmission: L12,
      transmissionMap: we8,
      thicknessMap: Se7,
      gradientMap: Ve8,
      opaque: x36.transparent === false && x36.blending === un4,
      alphaMap: nt17,
      alphaTest: wt10,
      combine: x36.combine,
      //
      mapUv: Le7 && y34(x36.map.channel),
      aoMapUv: tt12 && y34(x36.aoMap.channel),
      lightMapUv: Pe6 && y34(x36.lightMap.channel),
      bumpMapUv: je7 && y34(x36.bumpMap.channel),
      normalMapUv: Mt10 && y34(x36.normalMap.channel),
      displacementMapUv: vt9 && y34(x36.displacementMap.channel),
      emissiveMapUv: St9 && y34(x36.emissiveMap.channel),
      metalnessMapUv: Tt9 && y34(x36.metalnessMap.channel),
      roughnessMapUv: $e6 && y34(x36.roughnessMap.channel),
      clearcoatMapUv: Q12 && y34(x36.clearcoatMap.channel),
      clearcoatNormalMapUv: de9 && y34(x36.clearcoatNormalMap.channel),
      clearcoatRoughnessMapUv: pe8 && y34(x36.clearcoatRoughnessMap.channel),
      iridescenceMapUv: _e7 && y34(x36.iridescenceMap.channel),
      iridescenceThicknessMapUv: O20 && y34(x36.iridescenceThicknessMap.channel),
      sheenColorMapUv: ae7 && y34(x36.sheenColorMap.channel),
      sheenRoughnessMapUv: Z12 && y34(x36.sheenRoughnessMap.channel),
      specularMapUv: xe6 && y34(x36.specularMap.channel),
      specularColorMapUv: Ae6 && y34(x36.specularColorMap.channel),
      specularIntensityMapUv: Ce7 && y34(x36.specularIntensityMap.channel),
      transmissionMapUv: we8 && y34(x36.transmissionMap.channel),
      thicknessMapUv: Se7 && y34(x36.thicknessMap.channel),
      alphaMapUv: nt17 && y34(x36.alphaMap.channel),
      //
      vertexTangents: Mt10 && !!j19.attributes.tangent,
      vertexColors: x36.vertexColors,
      vertexAlphas: x36.vertexColors === true && !!j19.attributes.color && j19.attributes.color.itemSize === 4,
      vertexUvs2: te7,
      pointsUvs: U20.isPoints === true && !!j19.attributes.uv && (Le7 || nt17),
      fog: !!V16,
      useFog: x36.fog === true,
      fogExp2: V16 && V16.isFogExp2,
      flatShading: x36.flatShading === true,
      sizeAttenuation: x36.sizeAttenuation === true,
      logarithmicDepthBuffer: u35,
      skinning: U20.isSkinnedMesh === true,
      morphTargets: j19.morphAttributes.position !== void 0,
      morphNormals: j19.morphAttributes.normal !== void 0,
      morphColors: j19.morphAttributes.color !== void 0,
      morphTargetsCount: fe7,
      morphTextureStride: ue8,
      numDirLights: C21.directional.length,
      numPointLights: C21.point.length,
      numSpotLights: C21.spot.length,
      numSpotLightMaps: C21.spotLightMap.length,
      numRectAreaLights: C21.rectArea.length,
      numHemiLights: C21.hemi.length,
      numDirLightShadows: C21.directionalShadowMap.length,
      numPointLightShadows: C21.pointShadowMap.length,
      numSpotLightShadows: C21.spotShadowMap.length,
      numSpotLightShadowsWithMaps: C21.numSpotLightShadowsWithMaps,
      numClippingPlanes: a22.numPlanes,
      numClipIntersection: a22.numIntersection,
      dithering: x36.dithering,
      shadowMapEnabled: s18.shadowMap.enabled && G16.length > 0,
      shadowMapType: s18.shadowMap.type,
      toneMapping: x36.toneMapped ? s18.toneMapping : Fi4,
      useLegacyLights: s18.useLegacyLights,
      premultipliedAlpha: x36.premultipliedAlpha,
      doubleSided: x36.side === ui6,
      flipSided: x36.side === ti6,
      useDepthPacking: x36.depthPacking >= 0,
      depthPacking: x36.depthPacking || 0,
      index0AttributeName: x36.index0AttributeName,
      extensionDerivatives: B22 && x36.extensions.derivatives === true,
      extensionFragDepth: B22 && x36.extensions.fragDepth === true,
      extensionDrawBuffers: B22 && x36.extensions.drawBuffers === true,
      extensionShaderTextureLOD: B22 && x36.extensions.shaderTextureLOD === true,
      rendererExtensionFragDepth: h26 || i27.has("EXT_frag_depth"),
      rendererExtensionDrawBuffers: h26 || i27.has("WEBGL_draw_buffers"),
      rendererExtensionShaderTextureLod: h26 || i27.has("EXT_shader_texture_lod"),
      customProgramCacheKey: x36.customProgramCacheKey()
    };
  }
  function p26(x36) {
    const C21 = [];
    if (x36.shaderID ? C21.push(x36.shaderID) : (C21.push(x36.customVertexShaderID), C21.push(x36.customFragmentShaderID)), x36.defines !== void 0)
      for (const G16 in x36.defines)
        C21.push(G16), C21.push(x36.defines[G16]);
    return x36.isRawShaderMaterial === false && (A18(C21, x36), M13(C21, x36), C21.push(s18.outputEncoding)), C21.push(x36.customProgramCacheKey), C21.join();
  }
  function A18(x36, C21) {
    x36.push(C21.precision), x36.push(C21.outputEncoding), x36.push(C21.envMapMode), x36.push(C21.envMapCubeUVHeight), x36.push(C21.mapUv), x36.push(C21.alphaMapUv), x36.push(C21.lightMapUv), x36.push(C21.aoMapUv), x36.push(C21.bumpMapUv), x36.push(C21.normalMapUv), x36.push(C21.displacementMapUv), x36.push(C21.emissiveMapUv), x36.push(C21.metalnessMapUv), x36.push(C21.roughnessMapUv), x36.push(C21.clearcoatMapUv), x36.push(C21.clearcoatNormalMapUv), x36.push(C21.clearcoatRoughnessMapUv), x36.push(C21.iridescenceMapUv), x36.push(C21.iridescenceThicknessMapUv), x36.push(C21.sheenColorMapUv), x36.push(C21.sheenRoughnessMapUv), x36.push(C21.specularMapUv), x36.push(C21.specularColorMapUv), x36.push(C21.specularIntensityMapUv), x36.push(C21.transmissionMapUv), x36.push(C21.thicknessMapUv), x36.push(C21.combine), x36.push(C21.fogExp2), x36.push(C21.sizeAttenuation), x36.push(C21.morphTargetsCount), x36.push(C21.morphAttributeCount), x36.push(C21.numDirLights), x36.push(C21.numPointLights), x36.push(C21.numSpotLights), x36.push(C21.numSpotLightMaps), x36.push(C21.numHemiLights), x36.push(C21.numRectAreaLights), x36.push(C21.numDirLightShadows), x36.push(C21.numPointLightShadows), x36.push(C21.numSpotLightShadows), x36.push(C21.numSpotLightShadowsWithMaps), x36.push(C21.shadowMapType), x36.push(C21.toneMapping), x36.push(C21.numClippingPlanes), x36.push(C21.numClipIntersection), x36.push(C21.depthPacking);
  }
  function M13(x36, C21) {
    o13.disableAll(), C21.isWebGL2 && o13.enable(0), C21.supportsVertexTextures && o13.enable(1), C21.instancing && o13.enable(2), C21.instancingColor && o13.enable(3), C21.matcap && o13.enable(4), C21.envMap && o13.enable(5), C21.normalMapObjectSpace && o13.enable(6), C21.normalMapTangentSpace && o13.enable(7), C21.clearcoat && o13.enable(8), C21.iridescence && o13.enable(9), C21.alphaTest && o13.enable(10), C21.vertexColors && o13.enable(11), C21.vertexAlphas && o13.enable(12), C21.vertexUvs2 && o13.enable(13), C21.vertexTangents && o13.enable(14), x36.push(o13.mask), o13.disableAll(), C21.fog && o13.enable(0), C21.useFog && o13.enable(1), C21.flatShading && o13.enable(2), C21.logarithmicDepthBuffer && o13.enable(3), C21.skinning && o13.enable(4), C21.morphTargets && o13.enable(5), C21.morphNormals && o13.enable(6), C21.morphColors && o13.enable(7), C21.premultipliedAlpha && o13.enable(8), C21.shadowMapEnabled && o13.enable(9), C21.useLegacyLights && o13.enable(10), C21.doubleSided && o13.enable(11), C21.flipSided && o13.enable(12), C21.useDepthPacking && o13.enable(13), C21.dithering && o13.enable(14), C21.transmission && o13.enable(15), C21.sheen && o13.enable(16), C21.decodeVideoTexture && o13.enable(17), C21.opaque && o13.enable(18), C21.pointsUvs && o13.enable(19), x36.push(o13.mask);
  }
  function E25(x36) {
    const C21 = _21[x36.type];
    let G16;
    if (C21) {
      const z21 = Si4[C21];
      G16 = Id2.clone(z21.uniforms);
    } else
      G16 = x36.uniforms;
    return G16;
  }
  function w31(x36, C21) {
    let G16;
    for (let z21 = 0, U20 = c27.length; z21 < U20; z21++) {
      const V16 = c27[z21];
      if (V16.cacheKey === C21) {
        G16 = V16, ++G16.usedTimes;
        break;
      }
    }
    return G16 === void 0 && (G16 = new Hg2(s18, C21, x36, n33), c27.push(G16)), G16;
  }
  function I18(x36) {
    if (--x36.usedTimes === 0) {
      const C21 = c27.indexOf(x36);
      c27[C21] = c27[c27.length - 1], c27.pop(), x36.destroy();
    }
  }
  function D18(x36) {
    l26.remove(x36);
  }
  function P20() {
    l26.dispose();
  }
  return {
    getParameters: f40,
    getProgramCacheKey: p26,
    getUniforms: E25,
    acquireProgram: w31,
    releaseProgram: I18,
    releaseShaderCache: D18,
    // Exposed for resource monitoring & error feedback via renderer.info:
    programs: c27,
    dispose: P20
  };
}
function Xg2() {
  let s18 = /* @__PURE__ */ new WeakMap();
  function e11(n33) {
    let a22 = s18.get(n33);
    return a22 === void 0 && (a22 = {}, s18.set(n33, a22)), a22;
  }
  function t19(n33) {
    s18.delete(n33);
  }
  function i27(n33, a22, o13) {
    s18.get(n33)[a22] = o13;
  }
  function r24() {
    s18 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: e11,
    remove: t19,
    update: i27,
    dispose: r24
  };
}
function qg2(s18, e11) {
  return s18.groupOrder !== e11.groupOrder ? s18.groupOrder - e11.groupOrder : s18.renderOrder !== e11.renderOrder ? s18.renderOrder - e11.renderOrder : s18.material.id !== e11.material.id ? s18.material.id - e11.material.id : s18.z !== e11.z ? s18.z - e11.z : s18.id - e11.id;
}
function pc2(s18, e11) {
  return s18.groupOrder !== e11.groupOrder ? s18.groupOrder - e11.groupOrder : s18.renderOrder !== e11.renderOrder ? s18.renderOrder - e11.renderOrder : s18.z !== e11.z ? e11.z - s18.z : s18.id - e11.id;
}
function mc2() {
  const s18 = [];
  let e11 = 0;
  const t19 = [], i27 = [], r24 = [];
  function n33() {
    e11 = 0, t19.length = 0, i27.length = 0, r24.length = 0;
  }
  function a22(u35, d34, m34, _21, y34, f40) {
    let p26 = s18[e11];
    return p26 === void 0 ? (p26 = {
      id: u35.id,
      object: u35,
      geometry: d34,
      material: m34,
      groupOrder: _21,
      renderOrder: u35.renderOrder,
      z: y34,
      group: f40
    }, s18[e11] = p26) : (p26.id = u35.id, p26.object = u35, p26.geometry = d34, p26.material = m34, p26.groupOrder = _21, p26.renderOrder = u35.renderOrder, p26.z = y34, p26.group = f40), e11++, p26;
  }
  function o13(u35, d34, m34, _21, y34, f40) {
    const p26 = a22(u35, d34, m34, _21, y34, f40);
    m34.transmission > 0 ? i27.push(p26) : m34.transparent === true ? r24.push(p26) : t19.push(p26);
  }
  function l26(u35, d34, m34, _21, y34, f40) {
    const p26 = a22(u35, d34, m34, _21, y34, f40);
    m34.transmission > 0 ? i27.unshift(p26) : m34.transparent === true ? r24.unshift(p26) : t19.unshift(p26);
  }
  function c27(u35, d34) {
    t19.length > 1 && t19.sort(u35 || qg2), i27.length > 1 && i27.sort(d34 || pc2), r24.length > 1 && r24.sort(d34 || pc2);
  }
  function h26() {
    for (let u35 = e11, d34 = s18.length; u35 < d34; u35++) {
      const m34 = s18[u35];
      if (m34.id === null)
        break;
      m34.id = null, m34.object = null, m34.geometry = null, m34.material = null, m34.group = null;
    }
  }
  return {
    opaque: t19,
    transmissive: i27,
    transparent: r24,
    init: n33,
    push: o13,
    unshift: l26,
    finish: h26,
    sort: c27
  };
}
function Yg2() {
  let s18 = /* @__PURE__ */ new WeakMap();
  function e11(i27, r24) {
    const n33 = s18.get(i27);
    let a22;
    return n33 === void 0 ? (a22 = new mc2(), s18.set(i27, [a22])) : r24 >= n33.length ? (a22 = new mc2(), n33.push(a22)) : a22 = n33[r24], a22;
  }
  function t19() {
    s18 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: e11,
    dispose: t19
  };
}
function Zg2() {
  const s18 = {};
  return {
    get: function(e11) {
      if (s18[e11.id] !== void 0)
        return s18[e11.id];
      let t19;
      switch (e11.type) {
        case "DirectionalLight":
          t19 = {
            direction: new k20(),
            color: new ze7()
          };
          break;
        case "SpotLight":
          t19 = {
            position: new k20(),
            direction: new k20(),
            color: new ze7(),
            distance: 0,
            coneCos: 0,
            penumbraCos: 0,
            decay: 0
          };
          break;
        case "PointLight":
          t19 = {
            position: new k20(),
            color: new ze7(),
            distance: 0,
            decay: 0
          };
          break;
        case "HemisphereLight":
          t19 = {
            direction: new k20(),
            skyColor: new ze7(),
            groundColor: new ze7()
          };
          break;
        case "RectAreaLight":
          t19 = {
            color: new ze7(),
            position: new k20(),
            halfWidth: new k20(),
            halfHeight: new k20()
          };
          break;
      }
      return s18[e11.id] = t19, t19;
    }
  };
}
function Jg2() {
  const s18 = {};
  return {
    get: function(e11) {
      if (s18[e11.id] !== void 0)
        return s18[e11.id];
      let t19;
      switch (e11.type) {
        case "DirectionalLight":
          t19 = {
            shadowBias: 0,
            shadowNormalBias: 0,
            shadowRadius: 1,
            shadowMapSize: new We7()
          };
          break;
        case "SpotLight":
          t19 = {
            shadowBias: 0,
            shadowNormalBias: 0,
            shadowRadius: 1,
            shadowMapSize: new We7()
          };
          break;
        case "PointLight":
          t19 = {
            shadowBias: 0,
            shadowNormalBias: 0,
            shadowRadius: 1,
            shadowMapSize: new We7(),
            shadowCameraNear: 1,
            shadowCameraFar: 1e3
          };
          break;
      }
      return s18[e11.id] = t19, t19;
    }
  };
}
var Kg2 = 0;
function $g2(s18, e11) {
  return (e11.castShadow ? 2 : 0) - (s18.castShadow ? 2 : 0) + (e11.map ? 1 : 0) - (s18.map ? 1 : 0);
}
function Qg2(s18, e11) {
  const t19 = new Zg2(), i27 = Jg2(), r24 = {
    version: 0,
    hash: {
      directionalLength: -1,
      pointLength: -1,
      spotLength: -1,
      rectAreaLength: -1,
      hemiLength: -1,
      numDirectionalShadows: -1,
      numPointShadows: -1,
      numSpotShadows: -1,
      numSpotMaps: -1
    },
    ambient: [0, 0, 0],
    probe: [],
    directional: [],
    directionalShadow: [],
    directionalShadowMap: [],
    directionalShadowMatrix: [],
    spot: [],
    spotLightMap: [],
    spotShadow: [],
    spotShadowMap: [],
    spotLightMatrix: [],
    rectArea: [],
    rectAreaLTC1: null,
    rectAreaLTC2: null,
    point: [],
    pointShadow: [],
    pointShadowMap: [],
    pointShadowMatrix: [],
    hemi: [],
    numSpotLightShadowsWithMaps: 0
  };
  for (let h26 = 0; h26 < 9; h26++)
    r24.probe.push(new k20());
  const n33 = new k20(), a22 = new He6(), o13 = new He6();
  function l26(h26, u35) {
    let d34 = 0, m34 = 0, _21 = 0;
    for (let G16 = 0; G16 < 9; G16++)
      r24.probe[G16].set(0, 0, 0);
    let y34 = 0, f40 = 0, p26 = 0, A18 = 0, M13 = 0, E25 = 0, w31 = 0, I18 = 0, D18 = 0, P20 = 0;
    h26.sort($g2);
    const x36 = u35 === true ? Math.PI : 1;
    for (let G16 = 0, z21 = h26.length; G16 < z21; G16++) {
      const U20 = h26[G16], V16 = U20.color, j19 = U20.intensity, W11 = U20.distance, re8 = U20.shadow && U20.shadow.map ? U20.shadow.map.texture : null;
      if (U20.isAmbientLight)
        d34 += V16.r * j19 * x36, m34 += V16.g * j19 * x36, _21 += V16.b * j19 * x36;
      else if (U20.isLightProbe)
        for (let $25 = 0; $25 < 9; $25++)
          r24.probe[$25].addScaledVector(U20.sh.coefficients[$25], j19);
      else if (U20.isDirectionalLight) {
        const $25 = t19.get(U20);
        if ($25.color.copy(U20.color).multiplyScalar(U20.intensity * x36), U20.castShadow) {
          const ie8 = U20.shadow, le7 = i27.get(U20);
          le7.shadowBias = ie8.bias, le7.shadowNormalBias = ie8.normalBias, le7.shadowRadius = ie8.radius, le7.shadowMapSize = ie8.mapSize, r24.directionalShadow[y34] = le7, r24.directionalShadowMap[y34] = re8, r24.directionalShadowMatrix[y34] = U20.shadow.matrix, E25++;
        }
        r24.directional[y34] = $25, y34++;
      } else if (U20.isSpotLight) {
        const $25 = t19.get(U20);
        $25.position.setFromMatrixPosition(U20.matrixWorld), $25.color.copy(V16).multiplyScalar(j19 * x36), $25.distance = W11, $25.coneCos = Math.cos(U20.angle), $25.penumbraCos = Math.cos(U20.angle * (1 - U20.penumbra)), $25.decay = U20.decay, r24.spot[p26] = $25;
        const ie8 = U20.shadow;
        if (U20.map && (r24.spotLightMap[D18] = U20.map, D18++, ie8.updateMatrices(U20), U20.castShadow && P20++), r24.spotLightMatrix[p26] = ie8.matrix, U20.castShadow) {
          const le7 = i27.get(U20);
          le7.shadowBias = ie8.bias, le7.shadowNormalBias = ie8.normalBias, le7.shadowRadius = ie8.radius, le7.shadowMapSize = ie8.mapSize, r24.spotShadow[p26] = le7, r24.spotShadowMap[p26] = re8, I18++;
        }
        p26++;
      } else if (U20.isRectAreaLight) {
        const $25 = t19.get(U20);
        $25.color.copy(V16).multiplyScalar(j19), $25.halfWidth.set(U20.width * 0.5, 0, 0), $25.halfHeight.set(0, U20.height * 0.5, 0), r24.rectArea[A18] = $25, A18++;
      } else if (U20.isPointLight) {
        const $25 = t19.get(U20);
        if ($25.color.copy(U20.color).multiplyScalar(U20.intensity * x36), $25.distance = U20.distance, $25.decay = U20.decay, U20.castShadow) {
          const ie8 = U20.shadow, le7 = i27.get(U20);
          le7.shadowBias = ie8.bias, le7.shadowNormalBias = ie8.normalBias, le7.shadowRadius = ie8.radius, le7.shadowMapSize = ie8.mapSize, le7.shadowCameraNear = ie8.camera.near, le7.shadowCameraFar = ie8.camera.far, r24.pointShadow[f40] = le7, r24.pointShadowMap[f40] = re8, r24.pointShadowMatrix[f40] = U20.shadow.matrix, w31++;
        }
        r24.point[f40] = $25, f40++;
      } else if (U20.isHemisphereLight) {
        const $25 = t19.get(U20);
        $25.skyColor.copy(U20.color).multiplyScalar(j19 * x36), $25.groundColor.copy(U20.groundColor).multiplyScalar(j19 * x36), r24.hemi[M13] = $25, M13++;
      }
    }
    A18 > 0 && (e11.isWebGL2 || s18.has("OES_texture_float_linear") === true ? (r24.rectAreaLTC1 = ve7.LTC_FLOAT_1, r24.rectAreaLTC2 = ve7.LTC_FLOAT_2) : s18.has("OES_texture_half_float_linear") === true ? (r24.rectAreaLTC1 = ve7.LTC_HALF_1, r24.rectAreaLTC2 = ve7.LTC_HALF_2) : console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")), r24.ambient[0] = d34, r24.ambient[1] = m34, r24.ambient[2] = _21;
    const C21 = r24.hash;
    (C21.directionalLength !== y34 || C21.pointLength !== f40 || C21.spotLength !== p26 || C21.rectAreaLength !== A18 || C21.hemiLength !== M13 || C21.numDirectionalShadows !== E25 || C21.numPointShadows !== w31 || C21.numSpotShadows !== I18 || C21.numSpotMaps !== D18) && (r24.directional.length = y34, r24.spot.length = p26, r24.rectArea.length = A18, r24.point.length = f40, r24.hemi.length = M13, r24.directionalShadow.length = E25, r24.directionalShadowMap.length = E25, r24.pointShadow.length = w31, r24.pointShadowMap.length = w31, r24.spotShadow.length = I18, r24.spotShadowMap.length = I18, r24.directionalShadowMatrix.length = E25, r24.pointShadowMatrix.length = w31, r24.spotLightMatrix.length = I18 + D18 - P20, r24.spotLightMap.length = D18, r24.numSpotLightShadowsWithMaps = P20, C21.directionalLength = y34, C21.pointLength = f40, C21.spotLength = p26, C21.rectAreaLength = A18, C21.hemiLength = M13, C21.numDirectionalShadows = E25, C21.numPointShadows = w31, C21.numSpotShadows = I18, C21.numSpotMaps = D18, r24.version = Kg2++);
  }
  function c27(h26, u35) {
    let d34 = 0, m34 = 0, _21 = 0, y34 = 0, f40 = 0;
    const p26 = u35.matrixWorldInverse;
    for (let A18 = 0, M13 = h26.length; A18 < M13; A18++) {
      const E25 = h26[A18];
      if (E25.isDirectionalLight) {
        const w31 = r24.directional[d34];
        w31.direction.setFromMatrixPosition(E25.matrixWorld), n33.setFromMatrixPosition(E25.target.matrixWorld), w31.direction.sub(n33), w31.direction.transformDirection(p26), d34++;
      } else if (E25.isSpotLight) {
        const w31 = r24.spot[_21];
        w31.position.setFromMatrixPosition(E25.matrixWorld), w31.position.applyMatrix4(p26), w31.direction.setFromMatrixPosition(E25.matrixWorld), n33.setFromMatrixPosition(E25.target.matrixWorld), w31.direction.sub(n33), w31.direction.transformDirection(p26), _21++;
      } else if (E25.isRectAreaLight) {
        const w31 = r24.rectArea[y34];
        w31.position.setFromMatrixPosition(E25.matrixWorld), w31.position.applyMatrix4(p26), o13.identity(), a22.copy(E25.matrixWorld), a22.premultiply(p26), o13.extractRotation(a22), w31.halfWidth.set(E25.width * 0.5, 0, 0), w31.halfHeight.set(0, E25.height * 0.5, 0), w31.halfWidth.applyMatrix4(o13), w31.halfHeight.applyMatrix4(o13), y34++;
      } else if (E25.isPointLight) {
        const w31 = r24.point[m34];
        w31.position.setFromMatrixPosition(E25.matrixWorld), w31.position.applyMatrix4(p26), m34++;
      } else if (E25.isHemisphereLight) {
        const w31 = r24.hemi[f40];
        w31.direction.setFromMatrixPosition(E25.matrixWorld), w31.direction.transformDirection(p26), f40++;
      }
    }
  }
  return {
    setup: l26,
    setupView: c27,
    state: r24
  };
}
function fc2(s18, e11) {
  const t19 = new Qg2(s18, e11), i27 = [], r24 = [];
  function n33() {
    i27.length = 0, r24.length = 0;
  }
  function a22(h26) {
    i27.push(h26);
  }
  function o13(h26) {
    r24.push(h26);
  }
  function l26(h26) {
    t19.setup(i27, h26);
  }
  function c27(h26) {
    t19.setupView(i27, h26);
  }
  return {
    init: n33,
    state: {
      lightsArray: i27,
      shadowsArray: r24,
      lights: t19
    },
    setupLights: l26,
    setupLightsView: c27,
    pushLight: a22,
    pushShadow: o13
  };
}
function e02(s18, e11) {
  let t19 = /* @__PURE__ */ new WeakMap();
  function i27(n33, a22 = 0) {
    const o13 = t19.get(n33);
    let l26;
    return o13 === void 0 ? (l26 = new fc2(s18, e11), t19.set(n33, [l26])) : a22 >= o13.length ? (l26 = new fc2(s18, e11), o13.push(l26)) : l26 = o13[a22], l26;
  }
  function r24() {
    t19 = /* @__PURE__ */ new WeakMap();
  }
  return {
    get: i27,
    dispose: r24
  };
}
var t02 = class extends pi6 {
  constructor(e11) {
    super(), this.isMeshDepthMaterial = true, this.type = "MeshDepthMaterial", this.depthPacking = Ku2, this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.wireframe = false, this.wireframeLinewidth = 1, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.depthPacking = e11.depthPacking, this.map = e11.map, this.alphaMap = e11.alphaMap, this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this;
  }
};
var i02 = class extends pi6 {
  constructor(e11) {
    super(), this.isMeshDistanceMaterial = true, this.type = "MeshDistanceMaterial", this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.map = e11.map, this.alphaMap = e11.alphaMap, this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this;
  }
};
var r02 = `void main() {
	gl_Position = vec4( position, 1.0 );
}`;
var n02 = `uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;
function s02(s18, e11, t19) {
  let i27 = new Po2();
  const r24 = new We7(), n33 = new We7(), a22 = new gt12(), o13 = new t02({ depthPacking: $u }), l26 = new i02(), c27 = {}, h26 = t19.maxTextureSize, u35 = { [Ei5]: ti6, [ti6]: Ei5, [ui6]: ui6 }, d34 = new wr5({
    defines: {
      VSM_SAMPLES: 8
    },
    uniforms: {
      shadow_pass: { value: null },
      resolution: { value: new We7() },
      radius: { value: 4 }
    },
    vertexShader: r02,
    fragmentShader: n02
  }), m34 = d34.clone();
  m34.defines.HORIZONTAL_PASS = 1;
  const _21 = new Xt6();
  _21.setAttribute(
    "position",
    new Ft6(
      new Float32Array([-1, -1, 0.5, 3, -1, 0.5, -1, 3, 0.5]),
      3
    )
  );
  const y34 = new Rt8(_21, d34), f40 = this;
  this.enabled = false, this.autoUpdate = true, this.needsUpdate = false, this.type = ih2, this.render = function(E25, w31, I18) {
    if (f40.enabled === false || f40.autoUpdate === false && f40.needsUpdate === false || E25.length === 0)
      return;
    const D18 = s18.getRenderTarget(), P20 = s18.getActiveCubeFace(), x36 = s18.getActiveMipmapLevel(), C21 = s18.state;
    C21.setBlending(tr5), C21.buffers.color.setClear(1, 1, 1, 1), C21.buffers.depth.setTest(true), C21.setScissorTest(false);
    for (let G16 = 0, z21 = E25.length; G16 < z21; G16++) {
      const U20 = E25[G16], V16 = U20.shadow;
      if (V16 === void 0) {
        console.warn("THREE.WebGLShadowMap:", U20, "has no shadow.");
        continue;
      }
      if (V16.autoUpdate === false && V16.needsUpdate === false)
        continue;
      r24.copy(V16.mapSize);
      const j19 = V16.getFrameExtents();
      if (r24.multiply(j19), n33.copy(V16.mapSize), (r24.x > h26 || r24.y > h26) && (r24.x > h26 && (n33.x = Math.floor(h26 / j19.x), r24.x = n33.x * j19.x, V16.mapSize.x = n33.x), r24.y > h26 && (n33.y = Math.floor(h26 / j19.y), r24.y = n33.y * j19.y, V16.mapSize.y = n33.y)), V16.map === null) {
        const re8 = this.type !== Xn5 ? { minFilter: zt6, magFilter: zt6 } : {};
        V16.map = new Mr5(r24.x, r24.y, re8), V16.map.texture.name = U20.name + ".shadowMap", V16.camera.updateProjectionMatrix();
      }
      s18.setRenderTarget(V16.map), s18.clear();
      const W11 = V16.getViewportCount();
      for (let re8 = 0; re8 < W11; re8++) {
        const $25 = V16.getViewport(re8);
        a22.set(
          n33.x * $25.x,
          n33.y * $25.y,
          n33.x * $25.z,
          n33.y * $25.w
        ), C21.viewport(a22), V16.updateMatrices(U20, re8), i27 = V16.getFrustum(), M13(w31, I18, V16.camera, U20, this.type);
      }
      V16.isPointLightShadow !== true && this.type === Xn5 && p26(V16, I18), V16.needsUpdate = false;
    }
    f40.needsUpdate = false, s18.setRenderTarget(D18, P20, x36);
  };
  function p26(E25, w31) {
    const I18 = e11.update(y34);
    d34.defines.VSM_SAMPLES !== E25.blurSamples && (d34.defines.VSM_SAMPLES = E25.blurSamples, m34.defines.VSM_SAMPLES = E25.blurSamples, d34.needsUpdate = true, m34.needsUpdate = true), E25.mapPass === null && (E25.mapPass = new Mr5(r24.x, r24.y)), d34.uniforms.shadow_pass.value = E25.map.texture, d34.uniforms.resolution.value = E25.mapSize, d34.uniforms.radius.value = E25.radius, s18.setRenderTarget(E25.mapPass), s18.clear(), s18.renderBufferDirect(w31, null, I18, d34, y34, null), m34.uniforms.shadow_pass.value = E25.mapPass.texture, m34.uniforms.resolution.value = E25.mapSize, m34.uniforms.radius.value = E25.radius, s18.setRenderTarget(E25.map), s18.clear(), s18.renderBufferDirect(w31, null, I18, m34, y34, null);
  }
  function A18(E25, w31, I18, D18) {
    let P20 = null;
    const x36 = I18.isPointLight === true ? E25.customDistanceMaterial : E25.customDepthMaterial;
    if (x36 !== void 0)
      P20 = x36;
    else if (P20 = I18.isPointLight === true ? l26 : o13, s18.localClippingEnabled && w31.clipShadows === true && Array.isArray(w31.clippingPlanes) && w31.clippingPlanes.length !== 0 || w31.displacementMap && w31.displacementScale !== 0 || w31.alphaMap && w31.alphaTest > 0 || w31.map && w31.alphaTest > 0) {
      const C21 = P20.uuid, G16 = w31.uuid;
      let z21 = c27[C21];
      z21 === void 0 && (z21 = {}, c27[C21] = z21);
      let U20 = z21[G16];
      U20 === void 0 && (U20 = P20.clone(), z21[G16] = U20), P20 = U20;
    }
    if (P20.visible = w31.visible, P20.wireframe = w31.wireframe, D18 === Xn5 ? P20.side = w31.shadowSide !== null ? w31.shadowSide : w31.side : P20.side = w31.shadowSide !== null ? w31.shadowSide : u35[w31.side], P20.alphaMap = w31.alphaMap, P20.alphaTest = w31.alphaTest, P20.map = w31.map, P20.clipShadows = w31.clipShadows, P20.clippingPlanes = w31.clippingPlanes, P20.clipIntersection = w31.clipIntersection, P20.displacementMap = w31.displacementMap, P20.displacementScale = w31.displacementScale, P20.displacementBias = w31.displacementBias, P20.wireframeLinewidth = w31.wireframeLinewidth, P20.linewidth = w31.linewidth, I18.isPointLight === true && P20.isMeshDistanceMaterial === true) {
      const C21 = s18.properties.get(P20);
      C21.light = I18;
    }
    return P20;
  }
  function M13(E25, w31, I18, D18, P20) {
    if (E25.visible === false)
      return;
    if (E25.layers.test(w31.layers) && (E25.isMesh || E25.isLine || E25.isPoints) && (E25.castShadow || E25.receiveShadow && P20 === Xn5) && (!E25.frustumCulled || i27.intersectsObject(E25))) {
      E25.modelViewMatrix.multiplyMatrices(I18.matrixWorldInverse, E25.matrixWorld);
      const C21 = e11.update(E25), G16 = E25.material;
      if (Array.isArray(G16)) {
        const z21 = C21.groups;
        for (let U20 = 0, V16 = z21.length; U20 < V16; U20++) {
          const j19 = z21[U20], W11 = G16[j19.materialIndex];
          if (W11 && W11.visible) {
            const re8 = A18(E25, W11, D18, P20);
            s18.renderBufferDirect(I18, null, C21, re8, E25, j19);
          }
        }
      } else if (G16.visible) {
        const z21 = A18(E25, G16, D18, P20);
        s18.renderBufferDirect(I18, null, C21, z21, E25, null);
      }
    }
    const x36 = E25.children;
    for (let C21 = 0, G16 = x36.length; C21 < G16; C21++)
      M13(x36[C21], w31, I18, D18, P20);
  }
}
function a02(s18, e11, t19) {
  const i27 = t19.isWebGL2;
  function r24() {
    let B22 = false;
    const te7 = new gt12();
    let ce9 = null;
    const Me7 = new gt12(0, 0, 0, 0);
    return {
      setMask: function(Ue7) {
        ce9 !== Ue7 && !B22 && (s18.colorMask(Ue7, Ue7, Ue7, Ue7), ce9 = Ue7);
      },
      setLocked: function(Ue7) {
        B22 = Ue7;
      },
      setClear: function(Ue7, dt14, bt10, Nt9, Mi5) {
        Mi5 === true && (Ue7 *= Nt9, dt14 *= Nt9, bt10 *= Nt9), te7.set(Ue7, dt14, bt10, Nt9), Me7.equals(te7) === false && (s18.clearColor(Ue7, dt14, bt10, Nt9), Me7.copy(te7));
      },
      reset: function() {
        B22 = false, ce9 = null, Me7.set(-1, 0, 0, 0);
      }
    };
  }
  function n33() {
    let B22 = false, te7 = null, ce9 = null, Me7 = null;
    return {
      setTest: function(Ue7) {
        Ue7 ? F19(2929) : ye7(2929);
      },
      setMask: function(Ue7) {
        te7 !== Ue7 && !B22 && (s18.depthMask(Ue7), te7 = Ue7);
      },
      setFunc: function(Ue7) {
        if (ce9 !== Ue7) {
          switch (Ue7) {
            case xu2:
              s18.depthFunc(512);
              break;
            case bu2:
              s18.depthFunc(519);
              break;
            case Mu2:
              s18.depthFunc(513);
              break;
            case ho2:
              s18.depthFunc(515);
              break;
            case wu2:
              s18.depthFunc(514);
              break;
            case Su2:
              s18.depthFunc(518);
              break;
            case Tu2:
              s18.depthFunc(516);
              break;
            case Eu2:
              s18.depthFunc(517);
              break;
            default:
              s18.depthFunc(515);
          }
          ce9 = Ue7;
        }
      },
      setLocked: function(Ue7) {
        B22 = Ue7;
      },
      setClear: function(Ue7) {
        Me7 !== Ue7 && (s18.clearDepth(Ue7), Me7 = Ue7);
      },
      reset: function() {
        B22 = false, te7 = null, ce9 = null, Me7 = null;
      }
    };
  }
  function a22() {
    let B22 = false, te7 = null, ce9 = null, Me7 = null, Ue7 = null, dt14 = null, bt10 = null, Nt9 = null, Mi5 = null;
    return {
      setTest: function(it16) {
        B22 || (it16 ? F19(2960) : ye7(2960));
      },
      setMask: function(it16) {
        te7 !== it16 && !B22 && (s18.stencilMask(it16), te7 = it16);
      },
      setFunc: function(it16, Jt7, ai7) {
        (ce9 !== it16 || Me7 !== Jt7 || Ue7 !== ai7) && (s18.stencilFunc(it16, Jt7, ai7), ce9 = it16, Me7 = Jt7, Ue7 = ai7);
      },
      setOp: function(it16, Jt7, ai7) {
        (dt14 !== it16 || bt10 !== Jt7 || Nt9 !== ai7) && (s18.stencilOp(it16, Jt7, ai7), dt14 = it16, bt10 = Jt7, Nt9 = ai7);
      },
      setLocked: function(it16) {
        B22 = it16;
      },
      setClear: function(it16) {
        Mi5 !== it16 && (s18.clearStencil(it16), Mi5 = it16);
      },
      reset: function() {
        B22 = false, te7 = null, ce9 = null, Me7 = null, Ue7 = null, dt14 = null, bt10 = null, Nt9 = null, Mi5 = null;
      }
    };
  }
  const o13 = new r24(), l26 = new n33(), c27 = new a22(), h26 = /* @__PURE__ */ new WeakMap(), u35 = /* @__PURE__ */ new WeakMap();
  let d34 = {}, m34 = {}, _21 = /* @__PURE__ */ new WeakMap(), y34 = [], f40 = null, p26 = false, A18 = null, M13 = null, E25 = null, w31 = null, I18 = null, D18 = null, P20 = null, x36 = false, C21 = null, G16 = null, z21 = null, U20 = null, V16 = null;
  const j19 = s18.getParameter(35661);
  let W11 = false, re8 = 0;
  const $25 = s18.getParameter(7938);
  $25.indexOf("WebGL") !== -1 ? (re8 = parseFloat(/^WebGL (\d)/.exec($25)[1]), W11 = re8 >= 1) : $25.indexOf("OpenGL ES") !== -1 && (re8 = parseFloat(/^OpenGL ES (\d)/.exec($25)[1]), W11 = re8 >= 2);
  let ie8 = null, le7 = {};
  const fe7 = s18.getParameter(3088), ue8 = s18.getParameter(2978), H16 = new gt12().fromArray(fe7), q14 = new gt12().fromArray(ue8);
  function oe7(B22, te7, ce9) {
    const Me7 = new Uint8Array(4), Ue7 = s18.createTexture();
    s18.bindTexture(B22, Ue7), s18.texParameteri(B22, 10241, 9728), s18.texParameteri(B22, 10240, 9728);
    for (let dt14 = 0; dt14 < ce9; dt14++)
      s18.texImage2D(te7 + dt14, 0, 6408, 1, 1, 0, 6408, 5121, Me7);
    return Ue7;
  }
  const K16 = {};
  K16[3553] = oe7(3553, 3553, 1), K16[34067] = oe7(34067, 34069, 6), o13.setClear(0, 0, 0, 1), l26.setClear(1), c27.setClear(0), F19(2929), l26.setFunc(ho2), vt9(false), St9(el2), F19(2884), je7(tr5);
  function F19(B22) {
    d34[B22] !== true && (s18.enable(B22), d34[B22] = true);
  }
  function ye7(B22) {
    d34[B22] !== false && (s18.disable(B22), d34[B22] = false);
  }
  function Le7(B22, te7) {
    return m34[B22] !== te7 ? (s18.bindFramebuffer(B22, te7), m34[B22] = te7, i27 && (B22 === 36009 && (m34[36160] = te7), B22 === 36160 && (m34[36009] = te7)), true) : false;
  }
  function me9(B22, te7) {
    let ce9 = y34, Me7 = false;
    if (B22)
      if (ce9 = _21.get(te7), ce9 === void 0 && (ce9 = [], _21.set(te7, ce9)), B22.isWebGLMultipleRenderTargets) {
        const Ue7 = B22.texture;
        if (ce9.length !== Ue7.length || ce9[0] !== 36064) {
          for (let dt14 = 0, bt10 = Ue7.length; dt14 < bt10; dt14++)
            ce9[dt14] = 36064 + dt14;
          ce9.length = Ue7.length, Me7 = true;
        }
      } else
        ce9[0] !== 36064 && (ce9[0] = 36064, Me7 = true);
    else
      ce9[0] !== 1029 && (ce9[0] = 1029, Me7 = true);
    Me7 && (t19.isWebGL2 ? s18.drawBuffers(ce9) : e11.get("WEBGL_draw_buffers").drawBuffersWEBGL(ce9));
  }
  function De6(B22) {
    return f40 !== B22 ? (s18.useProgram(B22), f40 = B22, true) : false;
  }
  const tt12 = {
    [on4]: 32774,
    [cu2]: 32778,
    [hu2]: 32779
  };
  if (i27)
    tt12[nl2] = 32775, tt12[sl2] = 32776;
  else {
    const B22 = e11.get("EXT_blend_minmax");
    B22 !== null && (tt12[nl2] = B22.MIN_EXT, tt12[sl2] = B22.MAX_EXT);
  }
  const Pe6 = {
    [uu2]: 0,
    [du2]: 1,
    [pu2]: 768,
    [rh2]: 770,
    [yu2]: 776,
    [_u2]: 774,
    [fu2]: 772,
    [mu2]: 769,
    [nh2]: 771,
    [vu2]: 775,
    [gu2]: 773
  };
  function je7(B22, te7, ce9, Me7, Ue7, dt14, bt10, Nt9) {
    if (B22 === tr5) {
      p26 === true && (ye7(3042), p26 = false);
      return;
    }
    if (p26 === false && (F19(3042), p26 = true), B22 !== lu2) {
      if (B22 !== A18 || Nt9 !== x36) {
        if ((M13 !== on4 || I18 !== on4) && (s18.blendEquation(32774), M13 = on4, I18 = on4), Nt9)
          switch (B22) {
            case un4:
              s18.blendFuncSeparate(1, 771, 1, 771);
              break;
            case tl2:
              s18.blendFunc(1, 1);
              break;
            case il2:
              s18.blendFuncSeparate(0, 769, 0, 1);
              break;
            case rl2:
              s18.blendFuncSeparate(0, 768, 0, 770);
              break;
            default:
              console.error("THREE.WebGLState: Invalid blending: ", B22);
              break;
          }
        else
          switch (B22) {
            case un4:
              s18.blendFuncSeparate(770, 771, 1, 771);
              break;
            case tl2:
              s18.blendFunc(770, 1);
              break;
            case il2:
              s18.blendFuncSeparate(0, 769, 0, 1);
              break;
            case rl2:
              s18.blendFunc(0, 768);
              break;
            default:
              console.error("THREE.WebGLState: Invalid blending: ", B22);
              break;
          }
        E25 = null, w31 = null, D18 = null, P20 = null, A18 = B22, x36 = Nt9;
      }
      return;
    }
    Ue7 = Ue7 || te7, dt14 = dt14 || ce9, bt10 = bt10 || Me7, (te7 !== M13 || Ue7 !== I18) && (s18.blendEquationSeparate(tt12[te7], tt12[Ue7]), M13 = te7, I18 = Ue7), (ce9 !== E25 || Me7 !== w31 || dt14 !== D18 || bt10 !== P20) && (s18.blendFuncSeparate(Pe6[ce9], Pe6[Me7], Pe6[dt14], Pe6[bt10]), E25 = ce9, w31 = Me7, D18 = dt14, P20 = bt10), A18 = B22, x36 = false;
  }
  function Mt10(B22, te7) {
    B22.side === ui6 ? ye7(2884) : F19(2884);
    let ce9 = B22.side === ti6;
    te7 && (ce9 = !ce9), vt9(ce9), B22.blending === un4 && B22.transparent === false ? je7(tr5) : je7(B22.blending, B22.blendEquation, B22.blendSrc, B22.blendDst, B22.blendEquationAlpha, B22.blendSrcAlpha, B22.blendDstAlpha, B22.premultipliedAlpha), l26.setFunc(B22.depthFunc), l26.setTest(B22.depthTest), l26.setMask(B22.depthWrite), o13.setMask(B22.colorWrite);
    const Me7 = B22.stencilWrite;
    c27.setTest(Me7), Me7 && (c27.setMask(B22.stencilWriteMask), c27.setFunc(B22.stencilFunc, B22.stencilRef, B22.stencilFuncMask), c27.setOp(B22.stencilFail, B22.stencilZFail, B22.stencilZPass)), $e6(B22.polygonOffset, B22.polygonOffsetFactor, B22.polygonOffsetUnits), B22.alphaToCoverage === true ? F19(32926) : ye7(32926);
  }
  function vt9(B22) {
    C21 !== B22 && (B22 ? s18.frontFace(2304) : s18.frontFace(2305), C21 = B22);
  }
  function St9(B22) {
    B22 !== su2 ? (F19(2884), B22 !== G16 && (B22 === el2 ? s18.cullFace(1029) : B22 === au2 ? s18.cullFace(1028) : s18.cullFace(1032))) : ye7(2884), G16 = B22;
  }
  function Tt9(B22) {
    B22 !== z21 && (W11 && s18.lineWidth(B22), z21 = B22);
  }
  function $e6(B22, te7, ce9) {
    B22 ? (F19(32823), (U20 !== te7 || V16 !== ce9) && (s18.polygonOffset(te7, ce9), U20 = te7, V16 = ce9)) : ye7(32823);
  }
  function ot15(B22) {
    B22 ? F19(3089) : ye7(3089);
  }
  function kt10(B22) {
    B22 === void 0 && (B22 = 33984 + j19 - 1), ie8 !== B22 && (s18.activeTexture(B22), ie8 = B22);
  }
  function N22(B22, te7, ce9) {
    ce9 === void 0 && (ie8 === null ? ce9 = 33984 + j19 - 1 : ce9 = ie8);
    let Me7 = le7[ce9];
    Me7 === void 0 && (Me7 = { type: void 0, texture: void 0 }, le7[ce9] = Me7), (Me7.type !== B22 || Me7.texture !== te7) && (ie8 !== ce9 && (s18.activeTexture(ce9), ie8 = ce9), s18.bindTexture(B22, te7 || K16[B22]), Me7.type = B22, Me7.texture = te7);
  }
  function L12() {
    const B22 = le7[ie8];
    B22 !== void 0 && B22.type !== void 0 && (s18.bindTexture(B22.type, null), B22.type = void 0, B22.texture = void 0);
  }
  function Q12() {
    try {
      s18.compressedTexImage2D.apply(s18, arguments);
    } catch (B22) {
      console.error("THREE.WebGLState:", B22);
    }
  }
  function de9() {
    try {
      s18.compressedTexImage3D.apply(s18, arguments);
    } catch (B22) {
      console.error("THREE.WebGLState:", B22);
    }
  }
  function pe8() {
    try {
      s18.texSubImage2D.apply(s18, arguments);
    } catch (B22) {
      console.error("THREE.WebGLState:", B22);
    }
  }
  function _e7() {
    try {
      s18.texSubImage3D.apply(s18, arguments);
    } catch (B22) {
      console.error("THREE.WebGLState:", B22);
    }
  }
  function O20() {
    try {
      s18.compressedTexSubImage2D.apply(s18, arguments);
    } catch (B22) {
      console.error("THREE.WebGLState:", B22);
    }
  }
  function ae7() {
    try {
      s18.compressedTexSubImage3D.apply(s18, arguments);
    } catch (B22) {
      console.error("THREE.WebGLState:", B22);
    }
  }
  function Z12() {
    try {
      s18.texStorage2D.apply(s18, arguments);
    } catch (B22) {
      console.error("THREE.WebGLState:", B22);
    }
  }
  function xe6() {
    try {
      s18.texStorage3D.apply(s18, arguments);
    } catch (B22) {
      console.error("THREE.WebGLState:", B22);
    }
  }
  function Ae6() {
    try {
      s18.texImage2D.apply(s18, arguments);
    } catch (B22) {
      console.error("THREE.WebGLState:", B22);
    }
  }
  function Ce7() {
    try {
      s18.texImage3D.apply(s18, arguments);
    } catch (B22) {
      console.error("THREE.WebGLState:", B22);
    }
  }
  function we8(B22) {
    H16.equals(B22) === false && (s18.scissor(B22.x, B22.y, B22.z, B22.w), H16.copy(B22));
  }
  function Se7(B22) {
    q14.equals(B22) === false && (s18.viewport(B22.x, B22.y, B22.z, B22.w), q14.copy(B22));
  }
  function Ve8(B22, te7) {
    let ce9 = u35.get(te7);
    ce9 === void 0 && (ce9 = /* @__PURE__ */ new WeakMap(), u35.set(te7, ce9));
    let Me7 = ce9.get(B22);
    Me7 === void 0 && (Me7 = s18.getUniformBlockIndex(te7, B22.name), ce9.set(B22, Me7));
  }
  function nt17(B22, te7) {
    const ce9 = u35.get(te7).get(B22);
    h26.get(te7) !== ce9 && (s18.uniformBlockBinding(te7, ce9, B22.__bindingPointIndex), h26.set(te7, ce9));
  }
  function wt10() {
    s18.disable(3042), s18.disable(2884), s18.disable(2929), s18.disable(32823), s18.disable(3089), s18.disable(2960), s18.disable(32926), s18.blendEquation(32774), s18.blendFunc(1, 0), s18.blendFuncSeparate(1, 0, 1, 0), s18.colorMask(true, true, true, true), s18.clearColor(0, 0, 0, 0), s18.depthMask(true), s18.depthFunc(513), s18.clearDepth(1), s18.stencilMask(4294967295), s18.stencilFunc(519, 0, 4294967295), s18.stencilOp(7680, 7680, 7680), s18.clearStencil(0), s18.cullFace(1029), s18.frontFace(2305), s18.polygonOffset(0, 0), s18.activeTexture(33984), s18.bindFramebuffer(36160, null), i27 === true && (s18.bindFramebuffer(36009, null), s18.bindFramebuffer(36008, null)), s18.useProgram(null), s18.lineWidth(1), s18.scissor(0, 0, s18.canvas.width, s18.canvas.height), s18.viewport(0, 0, s18.canvas.width, s18.canvas.height), d34 = {}, ie8 = null, le7 = {}, m34 = {}, _21 = /* @__PURE__ */ new WeakMap(), y34 = [], f40 = null, p26 = false, A18 = null, M13 = null, E25 = null, w31 = null, I18 = null, D18 = null, P20 = null, x36 = false, C21 = null, G16 = null, z21 = null, U20 = null, V16 = null, H16.set(0, 0, s18.canvas.width, s18.canvas.height), q14.set(0, 0, s18.canvas.width, s18.canvas.height), o13.reset(), l26.reset(), c27.reset();
  }
  return {
    buffers: {
      color: o13,
      depth: l26,
      stencil: c27
    },
    enable: F19,
    disable: ye7,
    bindFramebuffer: Le7,
    drawBuffers: me9,
    useProgram: De6,
    setBlending: je7,
    setMaterial: Mt10,
    setFlipSided: vt9,
    setCullFace: St9,
    setLineWidth: Tt9,
    setPolygonOffset: $e6,
    setScissorTest: ot15,
    activeTexture: kt10,
    bindTexture: N22,
    unbindTexture: L12,
    compressedTexImage2D: Q12,
    compressedTexImage3D: de9,
    texImage2D: Ae6,
    texImage3D: Ce7,
    updateUBOMapping: Ve8,
    uniformBlockBinding: nt17,
    texStorage2D: Z12,
    texStorage3D: xe6,
    texSubImage2D: pe8,
    texSubImage3D: _e7,
    compressedTexSubImage2D: O20,
    compressedTexSubImage3D: ae7,
    scissor: we8,
    viewport: Se7,
    reset: wt10
  };
}
function o02(s18, e11, t19, i27, r24, n33, a22) {
  const o13 = r24.isWebGL2, l26 = r24.maxTextures, c27 = r24.maxCubemapSize, h26 = r24.maxTextureSize, u35 = r24.maxSamples, d34 = e11.has("WEBGL_multisampled_render_to_texture") ? e11.get("WEBGL_multisampled_render_to_texture") : null, m34 = typeof navigator > "u" ? false : /OculusBrowser/g.test(navigator.userAgent), _21 = /* @__PURE__ */ new WeakMap();
  let y34;
  const f40 = /* @__PURE__ */ new WeakMap();
  let p26 = false;
  try {
    p26 = typeof OffscreenCanvas < "u" && new OffscreenCanvas(1, 1).getContext("2d") !== null;
  } catch {
  }
  function A18(N22, L12) {
    return p26 ? (
      // eslint-disable-next-line compat/compat
      new OffscreenCanvas(N22, L12)
    ) : es3("canvas");
  }
  function M13(N22, L12, Q12, de9) {
    let pe8 = 1;
    if ((N22.width > de9 || N22.height > de9) && (pe8 = de9 / Math.max(N22.width, N22.height)), pe8 < 1 || L12 === true)
      if (typeof HTMLImageElement < "u" && N22 instanceof HTMLImageElement || typeof HTMLCanvasElement < "u" && N22 instanceof HTMLCanvasElement || typeof ImageBitmap < "u" && N22 instanceof ImageBitmap) {
        const _e7 = L12 ? uh2 : Math.floor, O20 = _e7(pe8 * N22.width), ae7 = _e7(pe8 * N22.height);
        y34 === void 0 && (y34 = A18(O20, ae7));
        const Z12 = Q12 ? A18(O20, ae7) : y34;
        return Z12.width = O20, Z12.height = ae7, Z12.getContext("2d").drawImage(N22, 0, 0, O20, ae7), console.warn("THREE.WebGLRenderer: Texture has been resized from (" + N22.width + "x" + N22.height + ") to (" + O20 + "x" + ae7 + ")."), Z12;
      } else
        return "data" in N22 && console.warn("THREE.WebGLRenderer: Image in DataTexture is too big (" + N22.width + "x" + N22.height + ")."), N22;
    return N22;
  }
  function E25(N22) {
    return vo(N22.width) && vo(N22.height);
  }
  function w31(N22) {
    return o13 ? false : N22.wrapS !== Zt6 || N22.wrapT !== Zt6 || N22.minFilter !== zt6 && N22.minFilter !== Vt6;
  }
  function I18(N22, L12) {
    return N22.generateMipmaps && L12 && N22.minFilter !== zt6 && N22.minFilter !== Vt6;
  }
  function D18(N22) {
    s18.generateMipmap(N22);
  }
  function P20(N22, L12, Q12, de9, pe8 = false) {
    if (o13 === false)
      return L12;
    if (N22 !== null) {
      if (s18[N22] !== void 0)
        return s18[N22];
      console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '" + N22 + "'");
    }
    let _e7 = L12;
    return L12 === 6403 && (Q12 === 5126 && (_e7 = 33326), Q12 === 5131 && (_e7 = 33325), Q12 === 5121 && (_e7 = 33321)), L12 === 33319 && (Q12 === 5126 && (_e7 = 33328), Q12 === 5131 && (_e7 = 33327), Q12 === 5121 && (_e7 = 33323)), L12 === 6408 && (Q12 === 5126 && (_e7 = 34836), Q12 === 5131 && (_e7 = 34842), Q12 === 5121 && (_e7 = de9 === rt12 && pe8 === false ? 35907 : 32856), Q12 === 32819 && (_e7 = 32854), Q12 === 32820 && (_e7 = 32855)), (_e7 === 33325 || _e7 === 33326 || _e7 === 33327 || _e7 === 33328 || _e7 === 34842 || _e7 === 34836) && e11.get("EXT_color_buffer_float"), _e7;
  }
  function x36(N22, L12, Q12) {
    return I18(N22, Q12) === true || N22.isFramebufferTexture && N22.minFilter !== zt6 && N22.minFilter !== Vt6 ? Math.log2(Math.max(L12.width, L12.height)) + 1 : N22.mipmaps !== void 0 && N22.mipmaps.length > 0 ? N22.mipmaps.length : N22.isCompressedTexture && Array.isArray(N22.image) ? L12.mipmaps.length : 1;
  }
  function C21(N22) {
    return N22 === zt6 || N22 === mo2 || N22 === Zs2 ? 9728 : 9729;
  }
  function G16(N22) {
    const L12 = N22.target;
    L12.removeEventListener("dispose", G16), U20(L12), L12.isVideoTexture && _21.delete(L12);
  }
  function z21(N22) {
    const L12 = N22.target;
    L12.removeEventListener("dispose", z21), j19(L12);
  }
  function U20(N22) {
    const L12 = i27.get(N22);
    if (L12.__webglInit === void 0)
      return;
    const Q12 = N22.source, de9 = f40.get(Q12);
    if (de9) {
      const pe8 = de9[L12.__cacheKey];
      pe8.usedTimes--, pe8.usedTimes === 0 && V16(N22), Object.keys(de9).length === 0 && f40.delete(Q12);
    }
    i27.remove(N22);
  }
  function V16(N22) {
    const L12 = i27.get(N22);
    s18.deleteTexture(L12.__webglTexture);
    const Q12 = N22.source, de9 = f40.get(Q12);
    delete de9[L12.__cacheKey], a22.memory.textures--;
  }
  function j19(N22) {
    const L12 = N22.texture, Q12 = i27.get(N22), de9 = i27.get(L12);
    if (de9.__webglTexture !== void 0 && (s18.deleteTexture(de9.__webglTexture), a22.memory.textures--), N22.depthTexture && N22.depthTexture.dispose(), N22.isWebGLCubeRenderTarget)
      for (let pe8 = 0; pe8 < 6; pe8++)
        s18.deleteFramebuffer(Q12.__webglFramebuffer[pe8]), Q12.__webglDepthbuffer && s18.deleteRenderbuffer(Q12.__webglDepthbuffer[pe8]);
    else {
      if (s18.deleteFramebuffer(Q12.__webglFramebuffer), Q12.__webglDepthbuffer && s18.deleteRenderbuffer(Q12.__webglDepthbuffer), Q12.__webglMultisampledFramebuffer && s18.deleteFramebuffer(Q12.__webglMultisampledFramebuffer), Q12.__webglColorRenderbuffer)
        for (let pe8 = 0; pe8 < Q12.__webglColorRenderbuffer.length; pe8++)
          Q12.__webglColorRenderbuffer[pe8] && s18.deleteRenderbuffer(Q12.__webglColorRenderbuffer[pe8]);
      Q12.__webglDepthRenderbuffer && s18.deleteRenderbuffer(Q12.__webglDepthRenderbuffer);
    }
    if (N22.isWebGLMultipleRenderTargets)
      for (let pe8 = 0, _e7 = L12.length; pe8 < _e7; pe8++) {
        const O20 = i27.get(L12[pe8]);
        O20.__webglTexture && (s18.deleteTexture(O20.__webglTexture), a22.memory.textures--), i27.remove(L12[pe8]);
      }
    i27.remove(L12), i27.remove(N22);
  }
  let W11 = 0;
  function re8() {
    W11 = 0;
  }
  function $25() {
    const N22 = W11;
    return N22 >= l26 && console.warn("THREE.WebGLTextures: Trying to use " + N22 + " texture units while this GPU supports only " + l26), W11 += 1, N22;
  }
  function ie8(N22) {
    const L12 = [];
    return L12.push(N22.wrapS), L12.push(N22.wrapT), L12.push(N22.wrapR || 0), L12.push(N22.magFilter), L12.push(N22.minFilter), L12.push(N22.anisotropy), L12.push(N22.internalFormat), L12.push(N22.format), L12.push(N22.type), L12.push(N22.generateMipmaps), L12.push(N22.premultiplyAlpha), L12.push(N22.flipY), L12.push(N22.unpackAlignment), L12.push(N22.encoding), L12.join();
  }
  function le7(N22, L12) {
    const Q12 = i27.get(N22);
    if (N22.isVideoTexture && ot15(N22), N22.isRenderTargetTexture === false && N22.version > 0 && Q12.__version !== N22.version) {
      const de9 = N22.image;
      if (de9 === null)
        console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");
      else if (de9.complete === false)
        console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");
      else {
        ye7(Q12, N22, L12);
        return;
      }
    }
    t19.bindTexture(3553, Q12.__webglTexture, 33984 + L12);
  }
  function fe7(N22, L12) {
    const Q12 = i27.get(N22);
    if (N22.version > 0 && Q12.__version !== N22.version) {
      ye7(Q12, N22, L12);
      return;
    }
    t19.bindTexture(35866, Q12.__webglTexture, 33984 + L12);
  }
  function ue8(N22, L12) {
    const Q12 = i27.get(N22);
    if (N22.version > 0 && Q12.__version !== N22.version) {
      ye7(Q12, N22, L12);
      return;
    }
    t19.bindTexture(32879, Q12.__webglTexture, 33984 + L12);
  }
  function H16(N22, L12) {
    const Q12 = i27.get(N22);
    if (N22.version > 0 && Q12.__version !== N22.version) {
      Le7(Q12, N22, L12);
      return;
    }
    t19.bindTexture(34067, Q12.__webglTexture, 33984 + L12);
  }
  const q14 = {
    [Ti4]: 10497,
    [Zt6]: 33071,
    [ta2]: 33648
  }, oe7 = {
    [zt6]: 9728,
    [mo2]: 9984,
    [Zs2]: 9986,
    [Vt6]: 9729,
    [ah2]: 9985,
    [Hi3]: 9987
  };
  function K16(N22, L12, Q12) {
    if (Q12 ? (s18.texParameteri(N22, 10242, q14[L12.wrapS]), s18.texParameteri(N22, 10243, q14[L12.wrapT]), (N22 === 32879 || N22 === 35866) && s18.texParameteri(N22, 32882, q14[L12.wrapR]), s18.texParameteri(N22, 10240, oe7[L12.magFilter]), s18.texParameteri(N22, 10241, oe7[L12.minFilter])) : (s18.texParameteri(N22, 10242, 33071), s18.texParameteri(N22, 10243, 33071), (N22 === 32879 || N22 === 35866) && s18.texParameteri(N22, 32882, 33071), (L12.wrapS !== Zt6 || L12.wrapT !== Zt6) && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."), s18.texParameteri(N22, 10240, C21(L12.magFilter)), s18.texParameteri(N22, 10241, C21(L12.minFilter)), L12.minFilter !== zt6 && L12.minFilter !== Vt6 && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")), e11.has("EXT_texture_filter_anisotropic") === true) {
      const de9 = e11.get("EXT_texture_filter_anisotropic");
      if (L12.magFilter === zt6 || L12.minFilter !== Zs2 && L12.minFilter !== Hi3 || L12.type === er5 && e11.has("OES_texture_float_linear") === false || o13 === false && L12.type === $n5 && e11.has("OES_texture_half_float_linear") === false)
        return;
      (L12.anisotropy > 1 || i27.get(L12).__currentAnisotropy) && (s18.texParameterf(N22, de9.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(L12.anisotropy, r24.getMaxAnisotropy())), i27.get(L12).__currentAnisotropy = L12.anisotropy);
    }
  }
  function F19(N22, L12) {
    let Q12 = false;
    N22.__webglInit === void 0 && (N22.__webglInit = true, L12.addEventListener("dispose", G16));
    const de9 = L12.source;
    let pe8 = f40.get(de9);
    pe8 === void 0 && (pe8 = {}, f40.set(de9, pe8));
    const _e7 = ie8(L12);
    if (_e7 !== N22.__cacheKey) {
      pe8[_e7] === void 0 && (pe8[_e7] = {
        texture: s18.createTexture(),
        usedTimes: 0
      }, a22.memory.textures++, Q12 = true), pe8[_e7].usedTimes++;
      const O20 = pe8[N22.__cacheKey];
      O20 !== void 0 && (pe8[N22.__cacheKey].usedTimes--, O20.usedTimes === 0 && V16(L12)), N22.__cacheKey = _e7, N22.__webglTexture = pe8[_e7].texture;
    }
    return Q12;
  }
  function ye7(N22, L12, Q12) {
    let de9 = 3553;
    (L12.isDataArrayTexture || L12.isCompressedArrayTexture) && (de9 = 35866), L12.isData3DTexture && (de9 = 32879);
    const pe8 = F19(N22, L12), _e7 = L12.source;
    t19.bindTexture(de9, N22.__webglTexture, 33984 + Q12);
    const O20 = i27.get(_e7);
    if (_e7.version !== O20.__version || pe8 === true) {
      t19.activeTexture(33984 + Q12), s18.pixelStorei(37440, L12.flipY), s18.pixelStorei(37441, L12.premultiplyAlpha), s18.pixelStorei(3317, L12.unpackAlignment), s18.pixelStorei(37443, 0);
      const ae7 = w31(L12) && E25(L12.image) === false;
      let Z12 = M13(L12.image, ae7, false, h26);
      Z12 = kt10(L12, Z12);
      const xe6 = E25(Z12) || o13, Ae6 = n33.convert(L12.format, L12.encoding);
      let Ce7 = n33.convert(L12.type), we8 = P20(L12.internalFormat, Ae6, Ce7, L12.encoding, L12.isVideoTexture);
      K16(de9, L12, xe6);
      let Se7;
      const Ve8 = L12.mipmaps, nt17 = o13 && L12.isVideoTexture !== true, wt10 = O20.__version === void 0 || pe8 === true, B22 = x36(L12, Z12, xe6);
      if (L12.isDepthTexture)
        we8 = 6402, o13 ? L12.type === er5 ? we8 = 36012 : L12.type === pr4 ? we8 = 33190 : L12.type === dn4 ? we8 = 35056 : we8 = 33189 : L12.type === er5 && console.error("WebGLRenderer: Floating point depth texture requires WebGL2."), L12.format === vr5 && we8 === 6402 && L12.type !== oh2 && L12.type !== pr4 && (console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."), L12.type = pr4, Ce7 = n33.convert(L12.type)), L12.format === bn5 && we8 === 6402 && (we8 = 34041, L12.type !== dn4 && (console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."), L12.type = dn4, Ce7 = n33.convert(L12.type))), wt10 && (nt17 ? t19.texStorage2D(3553, 1, we8, Z12.width, Z12.height) : t19.texImage2D(3553, 0, we8, Z12.width, Z12.height, 0, Ae6, Ce7, null));
      else if (L12.isDataTexture)
        if (Ve8.length > 0 && xe6) {
          nt17 && wt10 && t19.texStorage2D(3553, B22, we8, Ve8[0].width, Ve8[0].height);
          for (let te7 = 0, ce9 = Ve8.length; te7 < ce9; te7++)
            Se7 = Ve8[te7], nt17 ? t19.texSubImage2D(3553, te7, 0, 0, Se7.width, Se7.height, Ae6, Ce7, Se7.data) : t19.texImage2D(3553, te7, we8, Se7.width, Se7.height, 0, Ae6, Ce7, Se7.data);
          L12.generateMipmaps = false;
        } else
          nt17 ? (wt10 && t19.texStorage2D(3553, B22, we8, Z12.width, Z12.height), t19.texSubImage2D(3553, 0, 0, 0, Z12.width, Z12.height, Ae6, Ce7, Z12.data)) : t19.texImage2D(3553, 0, we8, Z12.width, Z12.height, 0, Ae6, Ce7, Z12.data);
      else if (L12.isCompressedTexture)
        if (L12.isCompressedArrayTexture) {
          nt17 && wt10 && t19.texStorage3D(35866, B22, we8, Ve8[0].width, Ve8[0].height, Z12.depth);
          for (let te7 = 0, ce9 = Ve8.length; te7 < ce9; te7++)
            Se7 = Ve8[te7], L12.format !== di6 ? Ae6 !== null ? nt17 ? t19.compressedTexSubImage3D(35866, te7, 0, 0, 0, Se7.width, Se7.height, Z12.depth, Ae6, Se7.data, 0, 0) : t19.compressedTexImage3D(35866, te7, we8, Se7.width, Se7.height, Z12.depth, 0, Se7.data, 0, 0) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : nt17 ? t19.texSubImage3D(35866, te7, 0, 0, 0, Se7.width, Se7.height, Z12.depth, Ae6, Ce7, Se7.data) : t19.texImage3D(35866, te7, we8, Se7.width, Se7.height, Z12.depth, 0, Ae6, Ce7, Se7.data);
        } else {
          nt17 && wt10 && t19.texStorage2D(3553, B22, we8, Ve8[0].width, Ve8[0].height);
          for (let te7 = 0, ce9 = Ve8.length; te7 < ce9; te7++)
            Se7 = Ve8[te7], L12.format !== di6 ? Ae6 !== null ? nt17 ? t19.compressedTexSubImage2D(3553, te7, 0, 0, Se7.width, Se7.height, Ae6, Se7.data) : t19.compressedTexImage2D(3553, te7, we8, Se7.width, Se7.height, 0, Se7.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : nt17 ? t19.texSubImage2D(3553, te7, 0, 0, Se7.width, Se7.height, Ae6, Ce7, Se7.data) : t19.texImage2D(3553, te7, we8, Se7.width, Se7.height, 0, Ae6, Ce7, Se7.data);
        }
      else if (L12.isDataArrayTexture)
        nt17 ? (wt10 && t19.texStorage3D(35866, B22, we8, Z12.width, Z12.height, Z12.depth), t19.texSubImage3D(35866, 0, 0, 0, 0, Z12.width, Z12.height, Z12.depth, Ae6, Ce7, Z12.data)) : t19.texImage3D(35866, 0, we8, Z12.width, Z12.height, Z12.depth, 0, Ae6, Ce7, Z12.data);
      else if (L12.isData3DTexture)
        nt17 ? (wt10 && t19.texStorage3D(32879, B22, we8, Z12.width, Z12.height, Z12.depth), t19.texSubImage3D(32879, 0, 0, 0, 0, Z12.width, Z12.height, Z12.depth, Ae6, Ce7, Z12.data)) : t19.texImage3D(32879, 0, we8, Z12.width, Z12.height, Z12.depth, 0, Ae6, Ce7, Z12.data);
      else if (L12.isFramebufferTexture) {
        if (wt10)
          if (nt17)
            t19.texStorage2D(3553, B22, we8, Z12.width, Z12.height);
          else {
            let te7 = Z12.width, ce9 = Z12.height;
            for (let Me7 = 0; Me7 < B22; Me7++)
              t19.texImage2D(3553, Me7, we8, te7, ce9, 0, Ae6, Ce7, null), te7 >>= 1, ce9 >>= 1;
          }
      } else if (Ve8.length > 0 && xe6) {
        nt17 && wt10 && t19.texStorage2D(3553, B22, we8, Ve8[0].width, Ve8[0].height);
        for (let te7 = 0, ce9 = Ve8.length; te7 < ce9; te7++)
          Se7 = Ve8[te7], nt17 ? t19.texSubImage2D(3553, te7, 0, 0, Ae6, Ce7, Se7) : t19.texImage2D(3553, te7, we8, Ae6, Ce7, Se7);
        L12.generateMipmaps = false;
      } else
        nt17 ? (wt10 && t19.texStorage2D(3553, B22, we8, Z12.width, Z12.height), t19.texSubImage2D(3553, 0, 0, 0, Ae6, Ce7, Z12)) : t19.texImage2D(3553, 0, we8, Ae6, Ce7, Z12);
      I18(L12, xe6) && D18(de9), O20.__version = _e7.version, L12.onUpdate && L12.onUpdate(L12);
    }
    N22.__version = L12.version;
  }
  function Le7(N22, L12, Q12) {
    if (L12.image.length !== 6)
      return;
    const de9 = F19(N22, L12), pe8 = L12.source;
    t19.bindTexture(34067, N22.__webglTexture, 33984 + Q12);
    const _e7 = i27.get(pe8);
    if (pe8.version !== _e7.__version || de9 === true) {
      t19.activeTexture(33984 + Q12), s18.pixelStorei(37440, L12.flipY), s18.pixelStorei(37441, L12.premultiplyAlpha), s18.pixelStorei(3317, L12.unpackAlignment), s18.pixelStorei(37443, 0);
      const O20 = L12.isCompressedTexture || L12.image[0].isCompressedTexture, ae7 = L12.image[0] && L12.image[0].isDataTexture, Z12 = [];
      for (let te7 = 0; te7 < 6; te7++)
        !O20 && !ae7 ? Z12[te7] = M13(L12.image[te7], false, true, c27) : Z12[te7] = ae7 ? L12.image[te7].image : L12.image[te7], Z12[te7] = kt10(L12, Z12[te7]);
      const xe6 = Z12[0], Ae6 = E25(xe6) || o13, Ce7 = n33.convert(L12.format, L12.encoding), we8 = n33.convert(L12.type), Se7 = P20(L12.internalFormat, Ce7, we8, L12.encoding), Ve8 = o13 && L12.isVideoTexture !== true, nt17 = _e7.__version === void 0 || de9 === true;
      let wt10 = x36(L12, xe6, Ae6);
      K16(34067, L12, Ae6);
      let B22;
      if (O20) {
        Ve8 && nt17 && t19.texStorage2D(34067, wt10, Se7, xe6.width, xe6.height);
        for (let te7 = 0; te7 < 6; te7++) {
          B22 = Z12[te7].mipmaps;
          for (let ce9 = 0; ce9 < B22.length; ce9++) {
            const Me7 = B22[ce9];
            L12.format !== di6 ? Ce7 !== null ? Ve8 ? t19.compressedTexSubImage2D(34069 + te7, ce9, 0, 0, Me7.width, Me7.height, Ce7, Me7.data) : t19.compressedTexImage2D(34069 + te7, ce9, Se7, Me7.width, Me7.height, 0, Me7.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()") : Ve8 ? t19.texSubImage2D(34069 + te7, ce9, 0, 0, Me7.width, Me7.height, Ce7, we8, Me7.data) : t19.texImage2D(34069 + te7, ce9, Se7, Me7.width, Me7.height, 0, Ce7, we8, Me7.data);
          }
        }
      } else {
        B22 = L12.mipmaps, Ve8 && nt17 && (B22.length > 0 && wt10++, t19.texStorage2D(34067, wt10, Se7, Z12[0].width, Z12[0].height));
        for (let te7 = 0; te7 < 6; te7++)
          if (ae7) {
            Ve8 ? t19.texSubImage2D(34069 + te7, 0, 0, 0, Z12[te7].width, Z12[te7].height, Ce7, we8, Z12[te7].data) : t19.texImage2D(34069 + te7, 0, Se7, Z12[te7].width, Z12[te7].height, 0, Ce7, we8, Z12[te7].data);
            for (let ce9 = 0; ce9 < B22.length; ce9++) {
              const Me7 = B22[ce9].image[te7].image;
              Ve8 ? t19.texSubImage2D(34069 + te7, ce9 + 1, 0, 0, Me7.width, Me7.height, Ce7, we8, Me7.data) : t19.texImage2D(34069 + te7, ce9 + 1, Se7, Me7.width, Me7.height, 0, Ce7, we8, Me7.data);
            }
          } else {
            Ve8 ? t19.texSubImage2D(34069 + te7, 0, 0, 0, Ce7, we8, Z12[te7]) : t19.texImage2D(34069 + te7, 0, Se7, Ce7, we8, Z12[te7]);
            for (let ce9 = 0; ce9 < B22.length; ce9++) {
              const Me7 = B22[ce9];
              Ve8 ? t19.texSubImage2D(34069 + te7, ce9 + 1, 0, 0, Ce7, we8, Me7.image[te7]) : t19.texImage2D(34069 + te7, ce9 + 1, Se7, Ce7, we8, Me7.image[te7]);
            }
          }
      }
      I18(L12, Ae6) && D18(34067), _e7.__version = pe8.version, L12.onUpdate && L12.onUpdate(L12);
    }
    N22.__version = L12.version;
  }
  function me9(N22, L12, Q12, de9, pe8) {
    const _e7 = n33.convert(Q12.format, Q12.encoding), O20 = n33.convert(Q12.type), ae7 = P20(Q12.internalFormat, _e7, O20, Q12.encoding);
    i27.get(L12).__hasExternalTextures || (pe8 === 32879 || pe8 === 35866 ? t19.texImage3D(pe8, 0, ae7, L12.width, L12.height, L12.depth, 0, _e7, O20, null) : t19.texImage2D(pe8, 0, ae7, L12.width, L12.height, 0, _e7, O20, null)), t19.bindFramebuffer(36160, N22), $e6(L12) ? d34.framebufferTexture2DMultisampleEXT(36160, de9, pe8, i27.get(Q12).__webglTexture, 0, Tt9(L12)) : (pe8 === 3553 || pe8 >= 34069 && pe8 <= 34074) && s18.framebufferTexture2D(36160, de9, pe8, i27.get(Q12).__webglTexture, 0), t19.bindFramebuffer(36160, null);
  }
  function De6(N22, L12, Q12) {
    if (s18.bindRenderbuffer(36161, N22), L12.depthBuffer && !L12.stencilBuffer) {
      let de9 = 33189;
      if (Q12 || $e6(L12)) {
        const pe8 = L12.depthTexture;
        pe8 && pe8.isDepthTexture && (pe8.type === er5 ? de9 = 36012 : pe8.type === pr4 && (de9 = 33190));
        const _e7 = Tt9(L12);
        $e6(L12) ? d34.renderbufferStorageMultisampleEXT(36161, _e7, de9, L12.width, L12.height) : s18.renderbufferStorageMultisample(36161, _e7, de9, L12.width, L12.height);
      } else
        s18.renderbufferStorage(36161, de9, L12.width, L12.height);
      s18.framebufferRenderbuffer(36160, 36096, 36161, N22);
    } else if (L12.depthBuffer && L12.stencilBuffer) {
      const de9 = Tt9(L12);
      Q12 && $e6(L12) === false ? s18.renderbufferStorageMultisample(36161, de9, 35056, L12.width, L12.height) : $e6(L12) ? d34.renderbufferStorageMultisampleEXT(36161, de9, 35056, L12.width, L12.height) : s18.renderbufferStorage(36161, 34041, L12.width, L12.height), s18.framebufferRenderbuffer(36160, 33306, 36161, N22);
    } else {
      const de9 = L12.isWebGLMultipleRenderTargets === true ? L12.texture : [L12.texture];
      for (let pe8 = 0; pe8 < de9.length; pe8++) {
        const _e7 = de9[pe8], O20 = n33.convert(_e7.format, _e7.encoding), ae7 = n33.convert(_e7.type), Z12 = P20(_e7.internalFormat, O20, ae7, _e7.encoding), xe6 = Tt9(L12);
        Q12 && $e6(L12) === false ? s18.renderbufferStorageMultisample(36161, xe6, Z12, L12.width, L12.height) : $e6(L12) ? d34.renderbufferStorageMultisampleEXT(36161, xe6, Z12, L12.width, L12.height) : s18.renderbufferStorage(36161, Z12, L12.width, L12.height);
      }
    }
    s18.bindRenderbuffer(36161, null);
  }
  function tt12(N22, L12) {
    if (L12 && L12.isWebGLCubeRenderTarget)
      throw new Error("Depth Texture with cube render targets is not supported");
    if (t19.bindFramebuffer(36160, N22), !(L12.depthTexture && L12.depthTexture.isDepthTexture))
      throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");
    (!i27.get(L12.depthTexture).__webglTexture || L12.depthTexture.image.width !== L12.width || L12.depthTexture.image.height !== L12.height) && (L12.depthTexture.image.width = L12.width, L12.depthTexture.image.height = L12.height, L12.depthTexture.needsUpdate = true), le7(L12.depthTexture, 0);
    const Q12 = i27.get(L12.depthTexture).__webglTexture, de9 = Tt9(L12);
    if (L12.depthTexture.format === vr5)
      $e6(L12) ? d34.framebufferTexture2DMultisampleEXT(36160, 36096, 3553, Q12, 0, de9) : s18.framebufferTexture2D(36160, 36096, 3553, Q12, 0);
    else if (L12.depthTexture.format === bn5)
      $e6(L12) ? d34.framebufferTexture2DMultisampleEXT(36160, 33306, 3553, Q12, 0, de9) : s18.framebufferTexture2D(36160, 33306, 3553, Q12, 0);
    else
      throw new Error("Unknown depthTexture format");
  }
  function Pe6(N22) {
    const L12 = i27.get(N22), Q12 = N22.isWebGLCubeRenderTarget === true;
    if (N22.depthTexture && !L12.__autoAllocateDepthBuffer) {
      if (Q12)
        throw new Error("target.depthTexture not supported in Cube render targets");
      tt12(L12.__webglFramebuffer, N22);
    } else if (Q12) {
      L12.__webglDepthbuffer = [];
      for (let de9 = 0; de9 < 6; de9++)
        t19.bindFramebuffer(36160, L12.__webglFramebuffer[de9]), L12.__webglDepthbuffer[de9] = s18.createRenderbuffer(), De6(L12.__webglDepthbuffer[de9], N22, false);
    } else
      t19.bindFramebuffer(36160, L12.__webglFramebuffer), L12.__webglDepthbuffer = s18.createRenderbuffer(), De6(L12.__webglDepthbuffer, N22, false);
    t19.bindFramebuffer(36160, null);
  }
  function je7(N22, L12, Q12) {
    const de9 = i27.get(N22);
    L12 !== void 0 && me9(de9.__webglFramebuffer, N22, N22.texture, 36064, 3553), Q12 !== void 0 && Pe6(N22);
  }
  function Mt10(N22) {
    const L12 = N22.texture, Q12 = i27.get(N22), de9 = i27.get(L12);
    N22.addEventListener("dispose", z21), N22.isWebGLMultipleRenderTargets !== true && (de9.__webglTexture === void 0 && (de9.__webglTexture = s18.createTexture()), de9.__version = L12.version, a22.memory.textures++);
    const pe8 = N22.isWebGLCubeRenderTarget === true, _e7 = N22.isWebGLMultipleRenderTargets === true, O20 = E25(N22) || o13;
    if (pe8) {
      Q12.__webglFramebuffer = [];
      for (let ae7 = 0; ae7 < 6; ae7++)
        Q12.__webglFramebuffer[ae7] = s18.createFramebuffer();
    } else {
      if (Q12.__webglFramebuffer = s18.createFramebuffer(), _e7)
        if (r24.drawBuffers) {
          const ae7 = N22.texture;
          for (let Z12 = 0, xe6 = ae7.length; Z12 < xe6; Z12++) {
            const Ae6 = i27.get(ae7[Z12]);
            Ae6.__webglTexture === void 0 && (Ae6.__webglTexture = s18.createTexture(), a22.memory.textures++);
          }
        } else
          console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");
      if (o13 && N22.samples > 0 && $e6(N22) === false) {
        const ae7 = _e7 ? L12 : [L12];
        Q12.__webglMultisampledFramebuffer = s18.createFramebuffer(), Q12.__webglColorRenderbuffer = [], t19.bindFramebuffer(36160, Q12.__webglMultisampledFramebuffer);
        for (let Z12 = 0; Z12 < ae7.length; Z12++) {
          const xe6 = ae7[Z12];
          Q12.__webglColorRenderbuffer[Z12] = s18.createRenderbuffer(), s18.bindRenderbuffer(36161, Q12.__webglColorRenderbuffer[Z12]);
          const Ae6 = n33.convert(xe6.format, xe6.encoding), Ce7 = n33.convert(xe6.type), we8 = P20(xe6.internalFormat, Ae6, Ce7, xe6.encoding, N22.isXRRenderTarget === true), Se7 = Tt9(N22);
          s18.renderbufferStorageMultisample(36161, Se7, we8, N22.width, N22.height), s18.framebufferRenderbuffer(36160, 36064 + Z12, 36161, Q12.__webglColorRenderbuffer[Z12]);
        }
        s18.bindRenderbuffer(36161, null), N22.depthBuffer && (Q12.__webglDepthRenderbuffer = s18.createRenderbuffer(), De6(Q12.__webglDepthRenderbuffer, N22, true)), t19.bindFramebuffer(36160, null);
      }
    }
    if (pe8) {
      t19.bindTexture(34067, de9.__webglTexture), K16(34067, L12, O20);
      for (let ae7 = 0; ae7 < 6; ae7++)
        me9(Q12.__webglFramebuffer[ae7], N22, L12, 36064, 34069 + ae7);
      I18(L12, O20) && D18(34067), t19.unbindTexture();
    } else if (_e7) {
      const ae7 = N22.texture;
      for (let Z12 = 0, xe6 = ae7.length; Z12 < xe6; Z12++) {
        const Ae6 = ae7[Z12], Ce7 = i27.get(Ae6);
        t19.bindTexture(3553, Ce7.__webglTexture), K16(3553, Ae6, O20), me9(Q12.__webglFramebuffer, N22, Ae6, 36064 + Z12, 3553), I18(Ae6, O20) && D18(3553);
      }
      t19.unbindTexture();
    } else {
      let ae7 = 3553;
      (N22.isWebGL3DRenderTarget || N22.isWebGLArrayRenderTarget) && (o13 ? ae7 = N22.isWebGL3DRenderTarget ? 32879 : 35866 : console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")), t19.bindTexture(ae7, de9.__webglTexture), K16(ae7, L12, O20), me9(Q12.__webglFramebuffer, N22, L12, 36064, ae7), I18(L12, O20) && D18(ae7), t19.unbindTexture();
    }
    N22.depthBuffer && Pe6(N22);
  }
  function vt9(N22) {
    const L12 = E25(N22) || o13, Q12 = N22.isWebGLMultipleRenderTargets === true ? N22.texture : [N22.texture];
    for (let de9 = 0, pe8 = Q12.length; de9 < pe8; de9++) {
      const _e7 = Q12[de9];
      if (I18(_e7, L12)) {
        const O20 = N22.isWebGLCubeRenderTarget ? 34067 : 3553, ae7 = i27.get(_e7).__webglTexture;
        t19.bindTexture(O20, ae7), D18(O20), t19.unbindTexture();
      }
    }
  }
  function St9(N22) {
    if (o13 && N22.samples > 0 && $e6(N22) === false) {
      const L12 = N22.isWebGLMultipleRenderTargets ? N22.texture : [N22.texture], Q12 = N22.width, de9 = N22.height;
      let pe8 = 16384;
      const _e7 = [], O20 = N22.stencilBuffer ? 33306 : 36096, ae7 = i27.get(N22), Z12 = N22.isWebGLMultipleRenderTargets === true;
      if (Z12)
        for (let xe6 = 0; xe6 < L12.length; xe6++)
          t19.bindFramebuffer(36160, ae7.__webglMultisampledFramebuffer), s18.framebufferRenderbuffer(36160, 36064 + xe6, 36161, null), t19.bindFramebuffer(36160, ae7.__webglFramebuffer), s18.framebufferTexture2D(36009, 36064 + xe6, 3553, null, 0);
      t19.bindFramebuffer(36008, ae7.__webglMultisampledFramebuffer), t19.bindFramebuffer(36009, ae7.__webglFramebuffer);
      for (let xe6 = 0; xe6 < L12.length; xe6++) {
        _e7.push(36064 + xe6), N22.depthBuffer && _e7.push(O20);
        const Ae6 = ae7.__ignoreDepthValues !== void 0 ? ae7.__ignoreDepthValues : false;
        if (Ae6 === false && (N22.depthBuffer && (pe8 |= 256), N22.stencilBuffer && (pe8 |= 1024)), Z12 && s18.framebufferRenderbuffer(36008, 36064, 36161, ae7.__webglColorRenderbuffer[xe6]), Ae6 === true && (s18.invalidateFramebuffer(36008, [O20]), s18.invalidateFramebuffer(36009, [O20])), Z12) {
          const Ce7 = i27.get(L12[xe6]).__webglTexture;
          s18.framebufferTexture2D(36009, 36064, 3553, Ce7, 0);
        }
        s18.blitFramebuffer(0, 0, Q12, de9, 0, 0, Q12, de9, pe8, 9728), m34 && s18.invalidateFramebuffer(36008, _e7);
      }
      if (t19.bindFramebuffer(36008, null), t19.bindFramebuffer(36009, null), Z12)
        for (let xe6 = 0; xe6 < L12.length; xe6++) {
          t19.bindFramebuffer(36160, ae7.__webglMultisampledFramebuffer), s18.framebufferRenderbuffer(36160, 36064 + xe6, 36161, ae7.__webglColorRenderbuffer[xe6]);
          const Ae6 = i27.get(L12[xe6]).__webglTexture;
          t19.bindFramebuffer(36160, ae7.__webglFramebuffer), s18.framebufferTexture2D(36009, 36064 + xe6, 3553, Ae6, 0);
        }
      t19.bindFramebuffer(36009, ae7.__webglMultisampledFramebuffer);
    }
  }
  function Tt9(N22) {
    return Math.min(u35, N22.samples);
  }
  function $e6(N22) {
    const L12 = i27.get(N22);
    return o13 && N22.samples > 0 && e11.has("WEBGL_multisampled_render_to_texture") === true && L12.__useRenderToTexture !== false;
  }
  function ot15(N22) {
    const L12 = a22.render.frame;
    _21.get(N22) !== L12 && (_21.set(N22, L12), N22.update());
  }
  function kt10(N22, L12) {
    const Q12 = N22.encoding, de9 = N22.format, pe8 = N22.type;
    return N22.isCompressedTexture === true || N22.isVideoTexture === true || N22.format === _o2 || Q12 !== br5 && (Q12 === rt12 ? o13 === false ? e11.has("EXT_sRGB") === true && de9 === di6 ? (N22.format = _o2, N22.minFilter = Vt6, N22.generateMipmaps = false) : L12 = ph2.sRGBToLinear(L12) : (de9 !== di6 || pe8 !== xr4) && console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.") : console.error("THREE.WebGLTextures: Unsupported texture encoding:", Q12)), L12;
  }
  this.allocateTextureUnit = $25, this.resetTextureUnits = re8, this.setTexture2D = le7, this.setTexture2DArray = fe7, this.setTexture3D = ue8, this.setTextureCube = H16, this.rebindTextures = je7, this.setupRenderTarget = Mt10, this.updateRenderTargetMipmap = vt9, this.updateMultisampleRenderTarget = St9, this.setupDepthRenderbuffer = Pe6, this.setupFrameBufferTexture = me9, this.useMultisampledRTT = $e6;
}
function l02(s18, e11, t19) {
  const i27 = t19.isWebGL2;
  function r24(n33, a22 = null) {
    let o13;
    if (n33 === xr4)
      return 5121;
    if (n33 === Ou2)
      return 32819;
    if (n33 === zu2)
      return 32820;
    if (n33 === Du2)
      return 5120;
    if (n33 === ku2)
      return 5122;
    if (n33 === oh2)
      return 5123;
    if (n33 === Uu2)
      return 5124;
    if (n33 === pr4)
      return 5125;
    if (n33 === er5)
      return 5126;
    if (n33 === $n5)
      return i27 ? 5131 : (o13 = e11.get("OES_texture_half_float"), o13 !== null ? o13.HALF_FLOAT_OES : null);
    if (n33 === Bu2)
      return 6406;
    if (n33 === di6)
      return 6408;
    if (n33 === Fu2)
      return 6409;
    if (n33 === Hu2)
      return 6410;
    if (n33 === vr5)
      return 6402;
    if (n33 === bn5)
      return 34041;
    if (n33 === _o2)
      return o13 = e11.get("EXT_sRGB"), o13 !== null ? o13.SRGB_ALPHA_EXT : null;
    if (n33 === Vu2)
      return 6403;
    if (n33 === Gu2)
      return 36244;
    if (n33 === Wu2)
      return 33319;
    if (n33 === ju2)
      return 33320;
    if (n33 === Xu2)
      return 36249;
    if (n33 === Ma2 || n33 === wa2 || n33 === Sa2 || n33 === Ta2)
      if (a22 === rt12)
        if (o13 = e11.get("WEBGL_compressed_texture_s3tc_srgb"), o13 !== null) {
          if (n33 === Ma2)
            return o13.COMPRESSED_SRGB_S3TC_DXT1_EXT;
          if (n33 === wa2)
            return o13.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;
          if (n33 === Sa2)
            return o13.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;
          if (n33 === Ta2)
            return o13.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;
        } else
          return null;
      else if (o13 = e11.get("WEBGL_compressed_texture_s3tc"), o13 !== null) {
        if (n33 === Ma2)
          return o13.COMPRESSED_RGB_S3TC_DXT1_EXT;
        if (n33 === wa2)
          return o13.COMPRESSED_RGBA_S3TC_DXT1_EXT;
        if (n33 === Sa2)
          return o13.COMPRESSED_RGBA_S3TC_DXT3_EXT;
        if (n33 === Ta2)
          return o13.COMPRESSED_RGBA_S3TC_DXT5_EXT;
      } else
        return null;
    if (n33 === al2 || n33 === ol2 || n33 === ll2 || n33 === cl2)
      if (o13 = e11.get("WEBGL_compressed_texture_pvrtc"), o13 !== null) {
        if (n33 === al2)
          return o13.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
        if (n33 === ol2)
          return o13.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
        if (n33 === ll2)
          return o13.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
        if (n33 === cl2)
          return o13.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
      } else
        return null;
    if (n33 === qu2)
      return o13 = e11.get("WEBGL_compressed_texture_etc1"), o13 !== null ? o13.COMPRESSED_RGB_ETC1_WEBGL : null;
    if (n33 === hl2 || n33 === ul2)
      if (o13 = e11.get("WEBGL_compressed_texture_etc"), o13 !== null) {
        if (n33 === hl2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ETC2 : o13.COMPRESSED_RGB8_ETC2;
        if (n33 === ul2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC : o13.COMPRESSED_RGBA8_ETC2_EAC;
      } else
        return null;
    if (n33 === dl2 || n33 === pl2 || n33 === ml2 || n33 === fl2 || n33 === gl2 || n33 === _l2 || n33 === vl2 || n33 === yl2 || n33 === xl2 || n33 === bl2 || n33 === Ml2 || n33 === wl2 || n33 === Sl2 || n33 === Tl2)
      if (o13 = e11.get("WEBGL_compressed_texture_astc"), o13 !== null) {
        if (n33 === dl2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR : o13.COMPRESSED_RGBA_ASTC_4x4_KHR;
        if (n33 === pl2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR : o13.COMPRESSED_RGBA_ASTC_5x4_KHR;
        if (n33 === ml2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR : o13.COMPRESSED_RGBA_ASTC_5x5_KHR;
        if (n33 === fl2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR : o13.COMPRESSED_RGBA_ASTC_6x5_KHR;
        if (n33 === gl2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR : o13.COMPRESSED_RGBA_ASTC_6x6_KHR;
        if (n33 === _l2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR : o13.COMPRESSED_RGBA_ASTC_8x5_KHR;
        if (n33 === vl2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR : o13.COMPRESSED_RGBA_ASTC_8x6_KHR;
        if (n33 === yl2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR : o13.COMPRESSED_RGBA_ASTC_8x8_KHR;
        if (n33 === xl2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR : o13.COMPRESSED_RGBA_ASTC_10x5_KHR;
        if (n33 === bl2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR : o13.COMPRESSED_RGBA_ASTC_10x6_KHR;
        if (n33 === Ml2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR : o13.COMPRESSED_RGBA_ASTC_10x8_KHR;
        if (n33 === wl2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR : o13.COMPRESSED_RGBA_ASTC_10x10_KHR;
        if (n33 === Sl2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR : o13.COMPRESSED_RGBA_ASTC_12x10_KHR;
        if (n33 === Tl2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR : o13.COMPRESSED_RGBA_ASTC_12x12_KHR;
      } else
        return null;
    if (n33 === Ea2)
      if (o13 = e11.get("EXT_texture_compression_bptc"), o13 !== null) {
        if (n33 === Ea2)
          return a22 === rt12 ? o13.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT : o13.COMPRESSED_RGBA_BPTC_UNORM_EXT;
      } else
        return null;
    if (n33 === Yu2 || n33 === El2 || n33 === Al2 || n33 === Ll2)
      if (o13 = e11.get("EXT_texture_compression_rgtc"), o13 !== null) {
        if (n33 === Ea2)
          return o13.COMPRESSED_RED_RGTC1_EXT;
        if (n33 === El2)
          return o13.COMPRESSED_SIGNED_RED_RGTC1_EXT;
        if (n33 === Al2)
          return o13.COMPRESSED_RED_GREEN_RGTC2_EXT;
        if (n33 === Ll2)
          return o13.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;
      } else
        return null;
    return n33 === dn4 ? i27 ? 34042 : (o13 = e11.get("WEBGL_depth_texture"), o13 !== null ? o13.UNSIGNED_INT_24_8_WEBGL : null) : s18[n33] !== void 0 ? s18[n33] : null;
  }
  return { convert: r24 };
}
var c02 = class extends Bt6 {
  constructor(e11 = []) {
    super(), this.isArrayCamera = true, this.cameras = e11;
  }
};
var Lt5 = class extends _t8 {
  constructor() {
    super(), this.isGroup = true, this.type = "Group";
  }
};
var h02 = { type: "move" };
var Za = class {
  constructor() {
    this._targetRay = null, this._grip = null, this._hand = null;
  }
  getHandSpace() {
    return this._hand === null && (this._hand = new Lt5(), this._hand.matrixAutoUpdate = false, this._hand.visible = false, this._hand.joints = {}, this._hand.inputState = { pinching: false }), this._hand;
  }
  getTargetRaySpace() {
    return this._targetRay === null && (this._targetRay = new Lt5(), this._targetRay.matrixAutoUpdate = false, this._targetRay.visible = false, this._targetRay.hasLinearVelocity = false, this._targetRay.linearVelocity = new k20(), this._targetRay.hasAngularVelocity = false, this._targetRay.angularVelocity = new k20()), this._targetRay;
  }
  getGripSpace() {
    return this._grip === null && (this._grip = new Lt5(), this._grip.matrixAutoUpdate = false, this._grip.visible = false, this._grip.hasLinearVelocity = false, this._grip.linearVelocity = new k20(), this._grip.hasAngularVelocity = false, this._grip.angularVelocity = new k20()), this._grip;
  }
  dispatchEvent(e11) {
    return this._targetRay !== null && this._targetRay.dispatchEvent(e11), this._grip !== null && this._grip.dispatchEvent(e11), this._hand !== null && this._hand.dispatchEvent(e11), this;
  }
  connect(e11) {
    if (e11 && e11.hand) {
      const t19 = this._hand;
      if (t19)
        for (const i27 of e11.hand.values())
          this._getHandJoint(t19, i27);
    }
    return this.dispatchEvent({ type: "connected", data: e11 }), this;
  }
  disconnect(e11) {
    return this.dispatchEvent({ type: "disconnected", data: e11 }), this._targetRay !== null && (this._targetRay.visible = false), this._grip !== null && (this._grip.visible = false), this._hand !== null && (this._hand.visible = false), this;
  }
  update(e11, t19, i27) {
    let r24 = null, n33 = null, a22 = null;
    const o13 = this._targetRay, l26 = this._grip, c27 = this._hand;
    if (e11 && t19.session.visibilityState !== "visible-blurred") {
      if (c27 && e11.hand) {
        a22 = true;
        for (const y34 of e11.hand.values()) {
          const f40 = t19.getJointPose(y34, i27), p26 = this._getHandJoint(c27, y34);
          f40 !== null && (p26.matrix.fromArray(f40.transform.matrix), p26.matrix.decompose(p26.position, p26.rotation, p26.scale), p26.jointRadius = f40.radius), p26.visible = f40 !== null;
        }
        const h26 = c27.joints["index-finger-tip"], u35 = c27.joints["thumb-tip"], d34 = h26.position.distanceTo(u35.position), m34 = 0.02, _21 = 5e-3;
        c27.inputState.pinching && d34 > m34 + _21 ? (c27.inputState.pinching = false, this.dispatchEvent({
          type: "pinchend",
          handedness: e11.handedness,
          target: this
        })) : !c27.inputState.pinching && d34 <= m34 - _21 && (c27.inputState.pinching = true, this.dispatchEvent({
          type: "pinchstart",
          handedness: e11.handedness,
          target: this
        }));
      } else
        l26 !== null && e11.gripSpace && (n33 = t19.getPose(e11.gripSpace, i27), n33 !== null && (l26.matrix.fromArray(n33.transform.matrix), l26.matrix.decompose(l26.position, l26.rotation, l26.scale), n33.linearVelocity ? (l26.hasLinearVelocity = true, l26.linearVelocity.copy(n33.linearVelocity)) : l26.hasLinearVelocity = false, n33.angularVelocity ? (l26.hasAngularVelocity = true, l26.angularVelocity.copy(n33.angularVelocity)) : l26.hasAngularVelocity = false));
      o13 !== null && (r24 = t19.getPose(e11.targetRaySpace, i27), r24 === null && n33 !== null && (r24 = n33), r24 !== null && (o13.matrix.fromArray(r24.transform.matrix), o13.matrix.decompose(o13.position, o13.rotation, o13.scale), r24.linearVelocity ? (o13.hasLinearVelocity = true, o13.linearVelocity.copy(r24.linearVelocity)) : o13.hasLinearVelocity = false, r24.angularVelocity ? (o13.hasAngularVelocity = true, o13.angularVelocity.copy(r24.angularVelocity)) : o13.hasAngularVelocity = false, this.dispatchEvent(h02)));
    }
    return o13 !== null && (o13.visible = r24 !== null), l26 !== null && (l26.visible = n33 !== null), c27 !== null && (c27.visible = a22 !== null), this;
  }
  // private method
  _getHandJoint(e11, t19) {
    if (e11.joints[t19.jointName] === void 0) {
      const i27 = new Lt5();
      i27.matrixAutoUpdate = false, i27.visible = false, e11.joints[t19.jointName] = i27, e11.add(i27);
    }
    return e11.joints[t19.jointName];
  }
};
var u02 = class extends Wt7 {
  constructor(e11, t19, i27, r24, n33, a22, o13, l26, c27, h26) {
    if (h26 = h26 !== void 0 ? h26 : vr5, h26 !== vr5 && h26 !== bn5)
      throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");
    i27 === void 0 && h26 === vr5 && (i27 = pr4), i27 === void 0 && h26 === bn5 && (i27 = dn4), super(null, r24, n33, a22, o13, l26, h26, i27, c27), this.isDepthTexture = true, this.image = { width: e11, height: t19 }, this.magFilter = o13 !== void 0 ? o13 : zt6, this.minFilter = l26 !== void 0 ? l26 : zt6, this.flipY = false, this.generateMipmaps = false;
  }
};
var d02 = class extends Ar5 {
  constructor(e11, t19) {
    super();
    const i27 = this;
    let r24 = null, n33 = 1, a22 = null, o13 = "local-floor", l26 = 1, c27 = null, h26 = null, u35 = null, d34 = null, m34 = null, _21 = null;
    const y34 = t19.getContextAttributes();
    let f40 = null, p26 = null;
    const A18 = [], M13 = [], E25 = /* @__PURE__ */ new Set(), w31 = /* @__PURE__ */ new Map(), I18 = new Bt6();
    I18.layers.enable(1), I18.viewport = new gt12();
    const D18 = new Bt6();
    D18.layers.enable(2), D18.viewport = new gt12();
    const P20 = [I18, D18], x36 = new c02();
    x36.layers.enable(1), x36.layers.enable(2);
    let C21 = null, G16 = null;
    this.cameraAutoUpdate = true, this.enabled = false, this.isPresenting = false, this.getController = function(H16) {
      let q14 = A18[H16];
      return q14 === void 0 && (q14 = new Za(), A18[H16] = q14), q14.getTargetRaySpace();
    }, this.getControllerGrip = function(H16) {
      let q14 = A18[H16];
      return q14 === void 0 && (q14 = new Za(), A18[H16] = q14), q14.getGripSpace();
    }, this.getHand = function(H16) {
      let q14 = A18[H16];
      return q14 === void 0 && (q14 = new Za(), A18[H16] = q14), q14.getHandSpace();
    };
    function z21(H16) {
      const q14 = M13.indexOf(H16.inputSource);
      if (q14 === -1)
        return;
      const oe7 = A18[q14];
      oe7 !== void 0 && oe7.dispatchEvent({ type: H16.type, data: H16.inputSource });
    }
    function U20() {
      r24.removeEventListener("select", z21), r24.removeEventListener("selectstart", z21), r24.removeEventListener("selectend", z21), r24.removeEventListener("squeeze", z21), r24.removeEventListener("squeezestart", z21), r24.removeEventListener("squeezeend", z21), r24.removeEventListener("end", U20), r24.removeEventListener("inputsourceschange", V16);
      for (let H16 = 0; H16 < A18.length; H16++) {
        const q14 = M13[H16];
        q14 !== null && (M13[H16] = null, A18[H16].disconnect(q14));
      }
      C21 = null, G16 = null, e11.setRenderTarget(f40), m34 = null, d34 = null, u35 = null, r24 = null, p26 = null, ue8.stop(), i27.isPresenting = false, i27.dispatchEvent({ type: "sessionend" });
    }
    this.setFramebufferScaleFactor = function(H16) {
      n33 = H16, i27.isPresenting === true && console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.");
    }, this.setReferenceSpaceType = function(H16) {
      o13 = H16, i27.isPresenting === true && console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.");
    }, this.getReferenceSpace = function() {
      return c27 || a22;
    }, this.setReferenceSpace = function(H16) {
      c27 = H16;
    }, this.getBaseLayer = function() {
      return d34 !== null ? d34 : m34;
    }, this.getBinding = function() {
      return u35;
    }, this.getFrame = function() {
      return _21;
    }, this.getSession = function() {
      return r24;
    }, this.setSession = async function(H16) {
      if (r24 = H16, r24 !== null) {
        if (f40 = e11.getRenderTarget(), r24.addEventListener("select", z21), r24.addEventListener("selectstart", z21), r24.addEventListener("selectend", z21), r24.addEventListener("squeeze", z21), r24.addEventListener("squeezestart", z21), r24.addEventListener("squeezeend", z21), r24.addEventListener("end", U20), r24.addEventListener("inputsourceschange", V16), y34.xrCompatible !== true && await t19.makeXRCompatible(), r24.renderState.layers === void 0 || e11.capabilities.isWebGL2 === false) {
          const q14 = {
            antialias: r24.renderState.layers === void 0 ? y34.antialias : true,
            alpha: y34.alpha,
            depth: y34.depth,
            stencil: y34.stencil,
            framebufferScaleFactor: n33
          };
          m34 = new XRWebGLLayer(r24, t19, q14), r24.updateRenderState({ baseLayer: m34 }), p26 = new Mr5(
            m34.framebufferWidth,
            m34.framebufferHeight,
            {
              format: di6,
              type: xr4,
              encoding: e11.outputEncoding,
              stencilBuffer: y34.stencil
            }
          );
        } else {
          let q14 = null, oe7 = null, K16 = null;
          y34.depth && (K16 = y34.stencil ? 35056 : 33190, q14 = y34.stencil ? bn5 : vr5, oe7 = y34.stencil ? dn4 : pr4);
          const F19 = {
            colorFormat: 32856,
            depthFormat: K16,
            scaleFactor: n33
          };
          u35 = new XRWebGLBinding(r24, t19), d34 = u35.createProjectionLayer(F19), r24.updateRenderState({ layers: [d34] }), p26 = new Mr5(
            d34.textureWidth,
            d34.textureHeight,
            {
              format: di6,
              type: xr4,
              depthTexture: new u02(d34.textureWidth, d34.textureHeight, oe7, void 0, void 0, void 0, void 0, void 0, void 0, q14),
              stencilBuffer: y34.stencil,
              encoding: e11.outputEncoding,
              samples: y34.antialias ? 4 : 0
            }
          );
          const ye7 = e11.properties.get(p26);
          ye7.__ignoreDepthValues = d34.ignoreDepthValues;
        }
        p26.isXRRenderTarget = true, this.setFoveation(l26), c27 = null, a22 = await r24.requestReferenceSpace(o13), ue8.setContext(r24), ue8.start(), i27.isPresenting = true, i27.dispatchEvent({ type: "sessionstart" });
      }
    };
    function V16(H16) {
      for (let q14 = 0; q14 < H16.removed.length; q14++) {
        const oe7 = H16.removed[q14], K16 = M13.indexOf(oe7);
        K16 >= 0 && (M13[K16] = null, A18[K16].disconnect(oe7));
      }
      for (let q14 = 0; q14 < H16.added.length; q14++) {
        const oe7 = H16.added[q14];
        let K16 = M13.indexOf(oe7);
        if (K16 === -1) {
          for (let ye7 = 0; ye7 < A18.length; ye7++)
            if (ye7 >= M13.length) {
              M13.push(oe7), K16 = ye7;
              break;
            } else if (M13[ye7] === null) {
              M13[ye7] = oe7, K16 = ye7;
              break;
            }
          if (K16 === -1)
            break;
        }
        const F19 = A18[K16];
        F19 && F19.connect(oe7);
      }
    }
    const j19 = new k20(), W11 = new k20();
    function re8(H16, q14, oe7) {
      j19.setFromMatrixPosition(q14.matrixWorld), W11.setFromMatrixPosition(oe7.matrixWorld);
      const K16 = j19.distanceTo(W11), F19 = q14.projectionMatrix.elements, ye7 = oe7.projectionMatrix.elements, Le7 = F19[14] / (F19[10] - 1), me9 = F19[14] / (F19[10] + 1), De6 = (F19[9] + 1) / F19[5], tt12 = (F19[9] - 1) / F19[5], Pe6 = (F19[8] - 1) / F19[0], je7 = (ye7[8] + 1) / ye7[0], Mt10 = Le7 * Pe6, vt9 = Le7 * je7, St9 = K16 / (-Pe6 + je7), Tt9 = St9 * -Pe6;
      q14.matrixWorld.decompose(H16.position, H16.quaternion, H16.scale), H16.translateX(Tt9), H16.translateZ(St9), H16.matrixWorld.compose(H16.position, H16.quaternion, H16.scale), H16.matrixWorldInverse.copy(H16.matrixWorld).invert();
      const $e6 = Le7 + St9, ot15 = me9 + St9, kt10 = Mt10 - Tt9, N22 = vt9 + (K16 - Tt9), L12 = De6 * me9 / ot15 * $e6, Q12 = tt12 * me9 / ot15 * $e6;
      H16.projectionMatrix.makePerspective(kt10, N22, L12, Q12, $e6, ot15), H16.projectionMatrixInverse.copy(H16.projectionMatrix).invert();
    }
    function $25(H16, q14) {
      q14 === null ? H16.matrixWorld.copy(H16.matrix) : H16.matrixWorld.multiplyMatrices(q14.matrixWorld, H16.matrix), H16.matrixWorldInverse.copy(H16.matrixWorld).invert();
    }
    this.updateCamera = function(H16) {
      if (r24 === null)
        return;
      x36.near = D18.near = I18.near = H16.near, x36.far = D18.far = I18.far = H16.far, (C21 !== x36.near || G16 !== x36.far) && (r24.updateRenderState({
        depthNear: x36.near,
        depthFar: x36.far
      }), C21 = x36.near, G16 = x36.far);
      const q14 = H16.parent, oe7 = x36.cameras;
      $25(x36, q14);
      for (let K16 = 0; K16 < oe7.length; K16++)
        $25(oe7[K16], q14);
      oe7.length === 2 ? re8(x36, I18, D18) : x36.projectionMatrix.copy(I18.projectionMatrix), ie8(H16, x36, q14);
    };
    function ie8(H16, q14, oe7) {
      oe7 === null ? H16.matrix.copy(q14.matrixWorld) : (H16.matrix.copy(oe7.matrixWorld), H16.matrix.invert(), H16.matrix.multiply(q14.matrixWorld)), H16.matrix.decompose(H16.position, H16.quaternion, H16.scale), H16.updateMatrixWorld(true);
      const K16 = H16.children;
      for (let F19 = 0, ye7 = K16.length; F19 < ye7; F19++)
        K16[F19].updateMatrixWorld(true);
      H16.projectionMatrix.copy(q14.projectionMatrix), H16.projectionMatrixInverse.copy(q14.projectionMatrixInverse), H16.isPerspectiveCamera && (H16.fov = wn5 * 2 * Math.atan(1 / H16.projectionMatrix.elements[5]), H16.zoom = 1);
    }
    this.getCamera = function() {
      return x36;
    }, this.getFoveation = function() {
      if (!(d34 === null && m34 === null))
        return l26;
    }, this.setFoveation = function(H16) {
      l26 = H16, d34 !== null && (d34.fixedFoveation = H16), m34 !== null && m34.fixedFoveation !== void 0 && (m34.fixedFoveation = H16);
    }, this.getPlanes = function() {
      return E25;
    };
    let le7 = null;
    function fe7(H16, q14) {
      if (h26 = q14.getViewerPose(c27 || a22), _21 = q14, h26 !== null) {
        const oe7 = h26.views;
        m34 !== null && (e11.setRenderTargetFramebuffer(p26, m34.framebuffer), e11.setRenderTarget(p26));
        let K16 = false;
        oe7.length !== x36.cameras.length && (x36.cameras.length = 0, K16 = true);
        for (let F19 = 0; F19 < oe7.length; F19++) {
          const ye7 = oe7[F19];
          let Le7 = null;
          if (m34 !== null)
            Le7 = m34.getViewport(ye7);
          else {
            const De6 = u35.getViewSubImage(d34, ye7);
            Le7 = De6.viewport, F19 === 0 && (e11.setRenderTargetTextures(
              p26,
              De6.colorTexture,
              d34.ignoreDepthValues ? void 0 : De6.depthStencilTexture
            ), e11.setRenderTarget(p26));
          }
          let me9 = P20[F19];
          me9 === void 0 && (me9 = new Bt6(), me9.layers.enable(F19), me9.viewport = new gt12(), P20[F19] = me9), me9.matrix.fromArray(ye7.transform.matrix), me9.matrix.decompose(me9.position, me9.quaternion, me9.scale), me9.projectionMatrix.fromArray(ye7.projectionMatrix), me9.projectionMatrixInverse.copy(me9.projectionMatrix).invert(), me9.viewport.set(Le7.x, Le7.y, Le7.width, Le7.height), F19 === 0 && (x36.matrix.copy(me9.matrix), x36.matrix.decompose(x36.position, x36.quaternion, x36.scale)), K16 === true && x36.cameras.push(me9);
        }
      }
      for (let oe7 = 0; oe7 < A18.length; oe7++) {
        const K16 = M13[oe7], F19 = A18[oe7];
        K16 !== null && F19 !== void 0 && F19.update(K16, q14, c27 || a22);
      }
      if (le7 && le7(H16, q14), q14.detectedPlanes) {
        i27.dispatchEvent({ type: "planesdetected", data: q14.detectedPlanes });
        let oe7 = null;
        for (const K16 of E25)
          q14.detectedPlanes.has(K16) || (oe7 === null && (oe7 = []), oe7.push(K16));
        if (oe7 !== null)
          for (const K16 of oe7)
            E25.delete(K16), w31.delete(K16), i27.dispatchEvent({ type: "planeremoved", data: K16 });
        for (const K16 of q14.detectedPlanes)
          if (!E25.has(K16))
            E25.add(K16), w31.set(K16, q14.lastChangedTime), i27.dispatchEvent({ type: "planeadded", data: K16 });
          else {
            const F19 = w31.get(K16);
            K16.lastChangedTime > F19 && (w31.set(K16, K16.lastChangedTime), i27.dispatchEvent({ type: "planechanged", data: K16 }));
          }
      }
      _21 = null;
    }
    const ue8 = new wh2();
    ue8.setAnimationLoop(fe7), this.setAnimationLoop = function(H16) {
      le7 = H16;
    }, this.dispose = function() {
    };
  }
};
function p02(s18, e11) {
  function t19(f40, p26) {
    f40.matrixAutoUpdate === true && f40.updateMatrix(), p26.value.copy(f40.matrix);
  }
  function i27(f40, p26) {
    p26.color.getRGB(f40.fogColor.value, xh2(s18)), p26.isFog ? (f40.fogNear.value = p26.near, f40.fogFar.value = p26.far) : p26.isFogExp2 && (f40.fogDensity.value = p26.density);
  }
  function r24(f40, p26, A18, M13, E25) {
    p26.isMeshBasicMaterial || p26.isMeshLambertMaterial ? n33(f40, p26) : p26.isMeshToonMaterial ? (n33(f40, p26), u35(f40, p26)) : p26.isMeshPhongMaterial ? (n33(f40, p26), h26(f40, p26)) : p26.isMeshStandardMaterial ? (n33(f40, p26), d34(f40, p26), p26.isMeshPhysicalMaterial && m34(f40, p26, E25)) : p26.isMeshMatcapMaterial ? (n33(f40, p26), _21(f40, p26)) : p26.isMeshDepthMaterial ? n33(f40, p26) : p26.isMeshDistanceMaterial ? (n33(f40, p26), y34(f40, p26)) : p26.isMeshNormalMaterial ? n33(f40, p26) : p26.isLineBasicMaterial ? (a22(f40, p26), p26.isLineDashedMaterial && o13(f40, p26)) : p26.isPointsMaterial ? l26(f40, p26, A18, M13) : p26.isSpriteMaterial ? c27(f40, p26) : p26.isShadowMaterial ? (f40.color.value.copy(p26.color), f40.opacity.value = p26.opacity) : p26.isShaderMaterial && (p26.uniformsNeedUpdate = false);
  }
  function n33(f40, p26) {
    f40.opacity.value = p26.opacity, p26.color && f40.diffuse.value.copy(p26.color), p26.emissive && f40.emissive.value.copy(p26.emissive).multiplyScalar(p26.emissiveIntensity), p26.map && (f40.map.value = p26.map, t19(p26.map, f40.mapTransform)), p26.alphaMap && (f40.alphaMap.value = p26.alphaMap, t19(p26.alphaMap, f40.alphaMapTransform)), p26.bumpMap && (f40.bumpMap.value = p26.bumpMap, t19(p26.bumpMap, f40.bumpMapTransform), f40.bumpScale.value = p26.bumpScale, p26.side === ti6 && (f40.bumpScale.value *= -1)), p26.normalMap && (f40.normalMap.value = p26.normalMap, t19(p26.normalMap, f40.normalMapTransform), f40.normalScale.value.copy(p26.normalScale), p26.side === ti6 && f40.normalScale.value.negate()), p26.displacementMap && (f40.displacementMap.value = p26.displacementMap, t19(p26.displacementMap, f40.displacementMapTransform), f40.displacementScale.value = p26.displacementScale, f40.displacementBias.value = p26.displacementBias), p26.emissiveMap && (f40.emissiveMap.value = p26.emissiveMap, t19(p26.emissiveMap, f40.emissiveMapTransform)), p26.specularMap && (f40.specularMap.value = p26.specularMap, t19(p26.specularMap, f40.specularMapTransform)), p26.alphaTest > 0 && (f40.alphaTest.value = p26.alphaTest);
    const A18 = e11.get(p26).envMap;
    if (A18 && (f40.envMap.value = A18, f40.flipEnvMap.value = A18.isCubeTexture && A18.isRenderTargetTexture === false ? -1 : 1, f40.reflectivity.value = p26.reflectivity, f40.ior.value = p26.ior, f40.refractionRatio.value = p26.refractionRatio), p26.lightMap) {
      f40.lightMap.value = p26.lightMap;
      const M13 = s18.useLegacyLights === true ? Math.PI : 1;
      f40.lightMapIntensity.value = p26.lightMapIntensity * M13, t19(p26.lightMap, f40.lightMapTransform);
    }
    p26.aoMap && (f40.aoMap.value = p26.aoMap, f40.aoMapIntensity.value = p26.aoMapIntensity, t19(p26.aoMap, f40.aoMapTransform));
  }
  function a22(f40, p26) {
    f40.diffuse.value.copy(p26.color), f40.opacity.value = p26.opacity, p26.map && (f40.map.value = p26.map, t19(p26.map, f40.mapTransform));
  }
  function o13(f40, p26) {
    f40.dashSize.value = p26.dashSize, f40.totalSize.value = p26.dashSize + p26.gapSize, f40.scale.value = p26.scale;
  }
  function l26(f40, p26, A18, M13) {
    f40.diffuse.value.copy(p26.color), f40.opacity.value = p26.opacity, f40.size.value = p26.size * A18, f40.scale.value = M13 * 0.5, p26.map && (f40.map.value = p26.map, t19(p26.map, f40.uvTransform)), p26.alphaMap && (f40.alphaMap.value = p26.alphaMap), p26.alphaTest > 0 && (f40.alphaTest.value = p26.alphaTest);
  }
  function c27(f40, p26) {
    f40.diffuse.value.copy(p26.color), f40.opacity.value = p26.opacity, f40.rotation.value = p26.rotation, p26.map && (f40.map.value = p26.map, t19(p26.map, f40.mapTransform)), p26.alphaMap && (f40.alphaMap.value = p26.alphaMap), p26.alphaTest > 0 && (f40.alphaTest.value = p26.alphaTest);
  }
  function h26(f40, p26) {
    f40.specular.value.copy(p26.specular), f40.shininess.value = Math.max(p26.shininess, 1e-4);
  }
  function u35(f40, p26) {
    p26.gradientMap && (f40.gradientMap.value = p26.gradientMap);
  }
  function d34(f40, p26) {
    f40.metalness.value = p26.metalness, p26.metalnessMap && (f40.metalnessMap.value = p26.metalnessMap, t19(p26.metalnessMap, f40.metalnessMapTransform)), f40.roughness.value = p26.roughness, p26.roughnessMap && (f40.roughnessMap.value = p26.roughnessMap, t19(p26.roughnessMap, f40.roughnessMapTransform)), e11.get(p26).envMap && (f40.envMapIntensity.value = p26.envMapIntensity);
  }
  function m34(f40, p26, A18) {
    f40.ior.value = p26.ior, p26.sheen > 0 && (f40.sheenColor.value.copy(p26.sheenColor).multiplyScalar(p26.sheen), f40.sheenRoughness.value = p26.sheenRoughness, p26.sheenColorMap && (f40.sheenColorMap.value = p26.sheenColorMap, t19(p26.sheenColorMap, f40.sheenColorMapTransform)), p26.sheenRoughnessMap && (f40.sheenRoughnessMap.value = p26.sheenRoughnessMap, t19(p26.sheenRoughnessMap, f40.sheenRoughnessMapTransform))), p26.clearcoat > 0 && (f40.clearcoat.value = p26.clearcoat, f40.clearcoatRoughness.value = p26.clearcoatRoughness, p26.clearcoatMap && (f40.clearcoatMap.value = p26.clearcoatMap, t19(p26.clearcoatMap, f40.clearcoatMapTransform)), p26.clearcoatRoughnessMap && (f40.clearcoatRoughnessMap.value = p26.clearcoatRoughnessMap, t19(p26.clearcoatRoughnessMap, f40.clearcoatRoughnessMapTransform)), p26.clearcoatNormalMap && (f40.clearcoatNormalMap.value = p26.clearcoatNormalMap, t19(p26.clearcoatNormalMap, f40.clearcoatNormalMapTransform), f40.clearcoatNormalScale.value.copy(p26.clearcoatNormalScale), p26.side === ti6 && f40.clearcoatNormalScale.value.negate())), p26.iridescence > 0 && (f40.iridescence.value = p26.iridescence, f40.iridescenceIOR.value = p26.iridescenceIOR, f40.iridescenceThicknessMinimum.value = p26.iridescenceThicknessRange[0], f40.iridescenceThicknessMaximum.value = p26.iridescenceThicknessRange[1], p26.iridescenceMap && (f40.iridescenceMap.value = p26.iridescenceMap, t19(p26.iridescenceMap, f40.iridescenceMapTransform)), p26.iridescenceThicknessMap && (f40.iridescenceThicknessMap.value = p26.iridescenceThicknessMap, t19(p26.iridescenceThicknessMap, f40.iridescenceThicknessMapTransform))), p26.transmission > 0 && (f40.transmission.value = p26.transmission, f40.transmissionSamplerMap.value = A18.texture, f40.transmissionSamplerSize.value.set(A18.width, A18.height), p26.transmissionMap && (f40.transmissionMap.value = p26.transmissionMap, t19(p26.transmissionMap, f40.transmissionMapTransform)), f40.thickness.value = p26.thickness, p26.thicknessMap && (f40.thicknessMap.value = p26.thicknessMap, t19(p26.thicknessMap, f40.thicknessMapTransform)), f40.attenuationDistance.value = p26.attenuationDistance, f40.attenuationColor.value.copy(p26.attenuationColor)), f40.specularIntensity.value = p26.specularIntensity, f40.specularColor.value.copy(p26.specularColor), p26.specularColorMap && (f40.specularColorMap.value = p26.specularColorMap, t19(p26.specularColorMap, f40.specularColorMapTransform)), p26.specularIntensityMap && (f40.specularIntensityMap.value = p26.specularIntensityMap, t19(p26.specularIntensityMap, f40.specularIntensityMapTransform));
  }
  function _21(f40, p26) {
    p26.matcap && (f40.matcap.value = p26.matcap);
  }
  function y34(f40, p26) {
    const A18 = e11.get(p26).light;
    f40.referencePosition.value.setFromMatrixPosition(A18.matrixWorld), f40.nearDistance.value = A18.shadow.camera.near, f40.farDistance.value = A18.shadow.camera.far;
  }
  return {
    refreshFogUniforms: i27,
    refreshMaterialUniforms: r24
  };
}
function m02(s18, e11, t19, i27) {
  let r24 = {}, n33 = {}, a22 = [];
  const o13 = t19.isWebGL2 ? s18.getParameter(35375) : 0;
  function l26(A18, M13) {
    const E25 = M13.program;
    i27.uniformBlockBinding(A18, E25);
  }
  function c27(A18, M13) {
    let E25 = r24[A18.id];
    E25 === void 0 && (_21(A18), E25 = h26(A18), r24[A18.id] = E25, A18.addEventListener("dispose", f40));
    const w31 = M13.program;
    i27.updateUBOMapping(A18, w31);
    const I18 = e11.render.frame;
    n33[A18.id] !== I18 && (d34(A18), n33[A18.id] = I18);
  }
  function h26(A18) {
    const M13 = u35();
    A18.__bindingPointIndex = M13;
    const E25 = s18.createBuffer(), w31 = A18.__size, I18 = A18.usage;
    return s18.bindBuffer(35345, E25), s18.bufferData(35345, w31, I18), s18.bindBuffer(35345, null), s18.bindBufferBase(35345, M13, E25), E25;
  }
  function u35() {
    for (let A18 = 0; A18 < o13; A18++)
      if (a22.indexOf(A18) === -1)
        return a22.push(A18), A18;
    return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."), 0;
  }
  function d34(A18) {
    const M13 = r24[A18.id], E25 = A18.uniforms, w31 = A18.__cache;
    s18.bindBuffer(35345, M13);
    for (let I18 = 0, D18 = E25.length; I18 < D18; I18++) {
      const P20 = E25[I18];
      if (m34(P20, I18, w31) === true) {
        const x36 = P20.__offset, C21 = Array.isArray(P20.value) ? P20.value : [P20.value];
        let G16 = 0;
        for (let z21 = 0; z21 < C21.length; z21++) {
          const U20 = C21[z21], V16 = y34(U20);
          typeof U20 == "number" ? (P20.__data[0] = U20, s18.bufferSubData(35345, x36 + G16, P20.__data)) : U20.isMatrix3 ? (P20.__data[0] = U20.elements[0], P20.__data[1] = U20.elements[1], P20.__data[2] = U20.elements[2], P20.__data[3] = U20.elements[0], P20.__data[4] = U20.elements[3], P20.__data[5] = U20.elements[4], P20.__data[6] = U20.elements[5], P20.__data[7] = U20.elements[0], P20.__data[8] = U20.elements[6], P20.__data[9] = U20.elements[7], P20.__data[10] = U20.elements[8], P20.__data[11] = U20.elements[0]) : (U20.toArray(P20.__data, G16), G16 += V16.storage / Float32Array.BYTES_PER_ELEMENT);
        }
        s18.bufferSubData(35345, x36, P20.__data);
      }
    }
    s18.bindBuffer(35345, null);
  }
  function m34(A18, M13, E25) {
    const w31 = A18.value;
    if (E25[M13] === void 0) {
      if (typeof w31 == "number")
        E25[M13] = w31;
      else {
        const I18 = Array.isArray(w31) ? w31 : [w31], D18 = [];
        for (let P20 = 0; P20 < I18.length; P20++)
          D18.push(I18[P20].clone());
        E25[M13] = D18;
      }
      return true;
    } else if (typeof w31 == "number") {
      if (E25[M13] !== w31)
        return E25[M13] = w31, true;
    } else {
      const I18 = Array.isArray(E25[M13]) ? E25[M13] : [E25[M13]], D18 = Array.isArray(w31) ? w31 : [w31];
      for (let P20 = 0; P20 < I18.length; P20++) {
        const x36 = I18[P20];
        if (x36.equals(D18[P20]) === false)
          return x36.copy(D18[P20]), true;
      }
    }
    return false;
  }
  function _21(A18) {
    const M13 = A18.uniforms;
    let E25 = 0;
    const w31 = 16;
    let I18 = 0;
    for (let D18 = 0, P20 = M13.length; D18 < P20; D18++) {
      const x36 = M13[D18], C21 = {
        boundary: 0,
        // bytes
        storage: 0
        // bytes
      }, G16 = Array.isArray(x36.value) ? x36.value : [x36.value];
      for (let z21 = 0, U20 = G16.length; z21 < U20; z21++) {
        const V16 = G16[z21], j19 = y34(V16);
        C21.boundary += j19.boundary, C21.storage += j19.storage;
      }
      if (x36.__data = new Float32Array(C21.storage / Float32Array.BYTES_PER_ELEMENT), x36.__offset = E25, D18 > 0) {
        I18 = E25 % w31;
        const z21 = w31 - I18;
        I18 !== 0 && z21 - C21.boundary < 0 && (E25 += w31 - I18, x36.__offset = E25);
      }
      E25 += C21.storage;
    }
    return I18 = E25 % w31, I18 > 0 && (E25 += w31 - I18), A18.__size = E25, A18.__cache = {}, this;
  }
  function y34(A18) {
    const M13 = {
      boundary: 0,
      // bytes
      storage: 0
      // bytes
    };
    return typeof A18 == "number" ? (M13.boundary = 4, M13.storage = 4) : A18.isVector2 ? (M13.boundary = 8, M13.storage = 8) : A18.isVector3 || A18.isColor ? (M13.boundary = 16, M13.storage = 12) : A18.isVector4 ? (M13.boundary = 16, M13.storage = 16) : A18.isMatrix3 ? (M13.boundary = 48, M13.storage = 48) : A18.isMatrix4 ? (M13.boundary = 64, M13.storage = 64) : A18.isTexture ? console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.") : console.warn("THREE.WebGLRenderer: Unsupported uniform value type.", A18), M13;
  }
  function f40(A18) {
    const M13 = A18.target;
    M13.removeEventListener("dispose", f40);
    const E25 = a22.indexOf(M13.__bindingPointIndex);
    a22.splice(E25, 1), s18.deleteBuffer(r24[M13.id]), delete r24[M13.id], delete n33[M13.id];
  }
  function p26() {
    for (const A18 in r24)
      s18.deleteBuffer(r24[A18]);
    a22 = [], r24 = {}, n33 = {};
  }
  return {
    bind: l26,
    update: c27,
    dispose: p26
  };
}
function f02() {
  const s18 = es3("canvas");
  return s18.style.display = "block", s18;
}
var Do2 = class {
  constructor(e11 = {}) {
    const {
      canvas: t19 = f02(),
      context: i27 = null,
      depth: r24 = true,
      stencil: n33 = true,
      alpha: a22 = false,
      antialias: o13 = false,
      premultipliedAlpha: l26 = true,
      preserveDrawingBuffer: c27 = false,
      powerPreference: h26 = "default",
      failIfMajorPerformanceCaveat: u35 = false
    } = e11;
    this.isWebGLRenderer = true;
    let d34;
    i27 !== null ? d34 = i27.getContextAttributes().alpha : d34 = a22;
    let m34 = null, _21 = null;
    const y34 = [], f40 = [];
    this.domElement = t19, this.debug = {
      /**
       * Enables error checking and reporting when shader programs are being compiled
       * @type {boolean}
       */
      checkShaderErrors: true,
      /**
       * Callback for custom error reporting.
       * @type {?Function}
       */
      onShaderError: null
    }, this.autoClear = true, this.autoClearColor = true, this.autoClearDepth = true, this.autoClearStencil = true, this.sortObjects = true, this.clippingPlanes = [], this.localClippingEnabled = false, this.outputEncoding = br5, this.useLegacyLights = true, this.toneMapping = Fi4, this.toneMappingExposure = 1;
    const p26 = this;
    let A18 = false, M13 = 0, E25 = 0, w31 = null, I18 = -1, D18 = null;
    const P20 = new gt12(), x36 = new gt12();
    let C21 = null, G16 = t19.width, z21 = t19.height, U20 = 1, V16 = null, j19 = null;
    const W11 = new gt12(0, 0, G16, z21), re8 = new gt12(0, 0, G16, z21);
    let $25 = false;
    const ie8 = new Po2();
    let le7 = false, fe7 = false, ue8 = null;
    const H16 = new He6(), q14 = new k20(), oe7 = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };
    function K16() {
      return w31 === null ? U20 : 1;
    }
    let F19 = i27;
    function ye7(R22, Y13) {
      for (let ee7 = 0; ee7 < R22.length; ee7++) {
        const X14 = R22[ee7], ne8 = t19.getContext(X14, Y13);
        if (ne8 !== null)
          return ne8;
      }
      return null;
    }
    try {
      const R22 = {
        alpha: true,
        depth: r24,
        stencil: n33,
        antialias: o13,
        premultipliedAlpha: l26,
        preserveDrawingBuffer: c27,
        powerPreference: h26,
        failIfMajorPerformanceCaveat: u35
      };
      if ("setAttribute" in t19 && t19.setAttribute("data-engine", `three.js r${Co2}`), t19.addEventListener("webglcontextlost", Se7, false), t19.addEventListener("webglcontextrestored", Ve8, false), t19.addEventListener("webglcontextcreationerror", nt17, false), F19 === null) {
        const Y13 = ["webgl2", "webgl", "experimental-webgl"];
        if (p26.isWebGL1Renderer === true && Y13.shift(), F19 = ye7(Y13, R22), F19 === null)
          throw ye7(Y13) ? new Error("Error creating WebGL context with your selected attributes.") : new Error("Error creating WebGL context.");
      }
      F19.getShaderPrecisionFormat === void 0 && (F19.getShaderPrecisionFormat = function() {
        return { rangeMin: 1, rangeMax: 1, precision: 1 };
      });
    } catch (R22) {
      throw console.error("THREE.WebGLRenderer: " + R22.message), R22;
    }
    let Le7, me9, De6, tt12, Pe6, je7, Mt10, vt9, St9, Tt9, $e6, ot15, kt10, N22, L12, Q12, de9, pe8, _e7, O20, ae7, Z12, xe6, Ae6;
    function Ce7() {
      Le7 = new Ef2(F19), me9 = new xf2(F19, Le7, e11), Le7.init(me9), Z12 = new l02(F19, Le7, me9), De6 = new a02(F19, Le7, me9), tt12 = new Cf2(), Pe6 = new Xg2(), je7 = new o02(F19, Le7, De6, Pe6, me9, Z12, tt12), Mt10 = new Mf2(p26), vt9 = new Tf2(p26), St9 = new Fd2(F19, me9), xe6 = new vf2(F19, Le7, St9, me9), Tt9 = new Af2(F19, St9, tt12, xe6), $e6 = new If2(F19, Tt9, St9, tt12), _e7 = new Pf2(F19, me9, je7), Q12 = new bf2(Pe6), ot15 = new jg2(p26, Mt10, vt9, Le7, me9, xe6, Q12), kt10 = new p02(p26, Pe6), N22 = new Yg2(), L12 = new e02(Le7, me9), pe8 = new _f2(p26, Mt10, vt9, De6, $e6, d34, l26), de9 = new s02(p26, $e6, me9), Ae6 = new m02(F19, tt12, me9, De6), O20 = new yf2(F19, Le7, tt12, me9), ae7 = new Lf2(F19, Le7, tt12, me9), tt12.programs = ot15.programs, p26.capabilities = me9, p26.extensions = Le7, p26.properties = Pe6, p26.renderLists = N22, p26.shadowMap = de9, p26.state = De6, p26.info = tt12;
    }
    Ce7();
    const we8 = new d02(p26, F19);
    this.xr = we8, this.getContext = function() {
      return F19;
    }, this.getContextAttributes = function() {
      return F19.getContextAttributes();
    }, this.forceContextLoss = function() {
      const R22 = Le7.get("WEBGL_lose_context");
      R22 && R22.loseContext();
    }, this.forceContextRestore = function() {
      const R22 = Le7.get("WEBGL_lose_context");
      R22 && R22.restoreContext();
    }, this.getPixelRatio = function() {
      return U20;
    }, this.setPixelRatio = function(R22) {
      R22 !== void 0 && (U20 = R22, this.setSize(G16, z21, false));
    }, this.getSize = function(R22) {
      return R22.set(G16, z21);
    }, this.setSize = function(R22, Y13, ee7 = true) {
      if (we8.isPresenting) {
        console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");
        return;
      }
      G16 = R22, z21 = Y13, t19.width = Math.floor(R22 * U20), t19.height = Math.floor(Y13 * U20), ee7 === true && (t19.style.width = R22 + "px", t19.style.height = Y13 + "px"), this.setViewport(0, 0, R22, Y13);
    }, this.getDrawingBufferSize = function(R22) {
      return R22.set(G16 * U20, z21 * U20).floor();
    }, this.setDrawingBufferSize = function(R22, Y13, ee7) {
      G16 = R22, z21 = Y13, U20 = ee7, t19.width = Math.floor(R22 * ee7), t19.height = Math.floor(Y13 * ee7), this.setViewport(0, 0, R22, Y13);
    }, this.getCurrentViewport = function(R22) {
      return R22.copy(P20);
    }, this.getViewport = function(R22) {
      return R22.copy(W11);
    }, this.setViewport = function(R22, Y13, ee7, X14) {
      R22.isVector4 ? W11.set(R22.x, R22.y, R22.z, R22.w) : W11.set(R22, Y13, ee7, X14), De6.viewport(P20.copy(W11).multiplyScalar(U20).floor());
    }, this.getScissor = function(R22) {
      return R22.copy(re8);
    }, this.setScissor = function(R22, Y13, ee7, X14) {
      R22.isVector4 ? re8.set(R22.x, R22.y, R22.z, R22.w) : re8.set(R22, Y13, ee7, X14), De6.scissor(x36.copy(re8).multiplyScalar(U20).floor());
    }, this.getScissorTest = function() {
      return $25;
    }, this.setScissorTest = function(R22) {
      De6.setScissorTest($25 = R22);
    }, this.setOpaqueSort = function(R22) {
      V16 = R22;
    }, this.setTransparentSort = function(R22) {
      j19 = R22;
    }, this.getClearColor = function(R22) {
      return R22.copy(pe8.getClearColor());
    }, this.setClearColor = function() {
      pe8.setClearColor.apply(pe8, arguments);
    }, this.getClearAlpha = function() {
      return pe8.getClearAlpha();
    }, this.setClearAlpha = function() {
      pe8.setClearAlpha.apply(pe8, arguments);
    }, this.clear = function(R22 = true, Y13 = true, ee7 = true) {
      let X14 = 0;
      R22 && (X14 |= 16384), Y13 && (X14 |= 256), ee7 && (X14 |= 1024), F19.clear(X14);
    }, this.clearColor = function() {
      this.clear(true, false, false);
    }, this.clearDepth = function() {
      this.clear(false, true, false);
    }, this.clearStencil = function() {
      this.clear(false, false, true);
    }, this.dispose = function() {
      t19.removeEventListener("webglcontextlost", Se7, false), t19.removeEventListener("webglcontextrestored", Ve8, false), t19.removeEventListener("webglcontextcreationerror", nt17, false), N22.dispose(), L12.dispose(), Pe6.dispose(), Mt10.dispose(), vt9.dispose(), $e6.dispose(), xe6.dispose(), Ae6.dispose(), ot15.dispose(), we8.dispose(), we8.removeEventListener("sessionstart", Ue7), we8.removeEventListener("sessionend", dt14), ue8 && (ue8.dispose(), ue8 = null), bt10.stop();
    };
    function Se7(R22) {
      R22.preventDefault(), console.log("THREE.WebGLRenderer: Context Lost."), A18 = true;
    }
    function Ve8() {
      console.log("THREE.WebGLRenderer: Context Restored."), A18 = false;
      const R22 = tt12.autoReset, Y13 = de9.enabled, ee7 = de9.autoUpdate, X14 = de9.needsUpdate, ne8 = de9.type;
      Ce7(), tt12.autoReset = R22, de9.enabled = Y13, de9.autoUpdate = ee7, de9.needsUpdate = X14, de9.type = ne8;
    }
    function nt17(R22) {
      console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ", R22.statusMessage);
    }
    function wt10(R22) {
      const Y13 = R22.target;
      Y13.removeEventListener("dispose", wt10), B22(Y13);
    }
    function B22(R22) {
      te7(R22), Pe6.remove(R22);
    }
    function te7(R22) {
      const Y13 = Pe6.get(R22).programs;
      Y13 !== void 0 && (Y13.forEach(function(ee7) {
        ot15.releaseProgram(ee7);
      }), R22.isShaderMaterial && ot15.releaseShaderCache(R22));
    }
    this.renderBufferDirect = function(R22, Y13, ee7, X14, ne8, Re7) {
      Y13 === null && (Y13 = oe7);
      const Be7 = ne8.isMesh && ne8.matrixWorld.determinant() < 0, Ge7 = ga2(R22, Y13, ee7, X14, ne8);
      De6.setMaterial(X14, Be7);
      let Xe7 = ee7.index, Qe8 = 1;
      X14.wireframe === true && (Xe7 = Tt9.getWireframeAttribute(ee7), Qe8 = 2);
      const Ze7 = ee7.drawRange, Ye7 = ee7.attributes.position;
      let yt14 = Ze7.start * Qe8, lt13 = (Ze7.start + Ze7.count) * Qe8;
      Re7 !== null && (yt14 = Math.max(yt14, Re7.start * Qe8), lt13 = Math.min(lt13, (Re7.start + Re7.count) * Qe8)), Xe7 !== null ? (yt14 = Math.max(yt14, 0), lt13 = Math.min(lt13, Xe7.count)) : Ye7 != null && (yt14 = Math.max(yt14, 0), lt13 = Math.min(lt13, Ye7.count));
      const Ut9 = lt13 - yt14;
      if (Ut9 < 0 || Ut9 === 1 / 0)
        return;
      xe6.setup(ne8, X14, Ge7, ee7, Xe7);
      let fi7, Et9 = O20;
      if (Xe7 !== null && (fi7 = St9.get(Xe7), Et9 = ae7, Et9.setIndex(fi7)), ne8.isMesh)
        X14.wireframe === true ? (De6.setLineWidth(X14.wireframeLinewidth * K16()), Et9.setMode(1)) : Et9.setMode(4);
      else if (ne8.isLine) {
        let Je6 = X14.linewidth;
        Je6 === void 0 && (Je6 = 1), De6.setLineWidth(Je6 * K16()), ne8.isLineSegments ? Et9.setMode(1) : ne8.isLineLoop ? Et9.setMode(2) : Et9.setMode(3);
      } else
        ne8.isPoints ? Et9.setMode(0) : ne8.isSprite && Et9.setMode(4);
      if (ne8.isInstancedMesh)
        Et9.renderInstances(yt14, Ut9, ne8.count);
      else if (ee7.isInstancedBufferGeometry) {
        const Je6 = ee7._maxInstanceCount !== void 0 ? ee7._maxInstanceCount : 1 / 0, Dr6 = Math.min(ee7.instanceCount, Je6);
        Et9.renderInstances(yt14, Ut9, Dr6);
      } else
        Et9.render(yt14, Ut9);
    }, this.compile = function(R22, Y13) {
      function ee7(X14, ne8, Re7) {
        X14.transparent === true && X14.side === ui6 && X14.forceSinglePass === false ? (X14.side = ti6, X14.needsUpdate = true, Ir6(X14, ne8, Re7), X14.side = Ei5, X14.needsUpdate = true, Ir6(X14, ne8, Re7), X14.side = ui6) : Ir6(X14, ne8, Re7);
      }
      _21 = L12.get(R22), _21.init(), f40.push(_21), R22.traverseVisible(function(X14) {
        X14.isLight && X14.layers.test(Y13.layers) && (_21.pushLight(X14), X14.castShadow && _21.pushShadow(X14));
      }), _21.setupLights(p26.useLegacyLights), R22.traverse(function(X14) {
        const ne8 = X14.material;
        if (ne8)
          if (Array.isArray(ne8))
            for (let Re7 = 0; Re7 < ne8.length; Re7++) {
              const Be7 = ne8[Re7];
              ee7(Be7, R22, X14);
            }
          else
            ee7(ne8, R22, X14);
      }), f40.pop(), _21 = null;
    };
    let ce9 = null;
    function Me7(R22) {
      ce9 && ce9(R22);
    }
    function Ue7() {
      bt10.stop();
    }
    function dt14() {
      bt10.start();
    }
    const bt10 = new wh2();
    bt10.setAnimationLoop(Me7), typeof self < "u" && bt10.setContext(self), this.setAnimationLoop = function(R22) {
      ce9 = R22, we8.setAnimationLoop(R22), R22 === null ? bt10.stop() : bt10.start();
    }, we8.addEventListener("sessionstart", Ue7), we8.addEventListener("sessionend", dt14), this.render = function(R22, Y13) {
      if (Y13 !== void 0 && Y13.isCamera !== true) {
        console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
        return;
      }
      if (A18 === true)
        return;
      R22.matrixWorldAutoUpdate === true && R22.updateMatrixWorld(), Y13.parent === null && Y13.matrixWorldAutoUpdate === true && Y13.updateMatrixWorld(), we8.enabled === true && we8.isPresenting === true && (we8.cameraAutoUpdate === true && we8.updateCamera(Y13), Y13 = we8.getCamera()), R22.isScene === true && R22.onBeforeRender(p26, R22, Y13, w31), _21 = L12.get(R22, f40.length), _21.init(), f40.push(_21), H16.multiplyMatrices(Y13.projectionMatrix, Y13.matrixWorldInverse), ie8.setFromProjectionMatrix(H16), fe7 = this.localClippingEnabled, le7 = Q12.init(this.clippingPlanes, fe7), m34 = N22.get(R22, y34.length), m34.init(), y34.push(m34), Nt9(R22, Y13, 0, p26.sortObjects), m34.finish(), p26.sortObjects === true && m34.sort(V16, j19), le7 === true && Q12.beginShadows();
      const ee7 = _21.state.shadowsArray;
      if (de9.render(ee7, R22, Y13), le7 === true && Q12.endShadows(), this.info.autoReset === true && this.info.reset(), pe8.render(m34, R22), _21.setupLights(p26.useLegacyLights), Y13.isArrayCamera) {
        const X14 = Y13.cameras;
        for (let ne8 = 0, Re7 = X14.length; ne8 < Re7; ne8++) {
          const Be7 = X14[ne8];
          Mi5(m34, R22, Be7, Be7.viewport);
        }
      } else
        Mi5(m34, R22, Y13);
      w31 !== null && (je7.updateMultisampleRenderTarget(w31), je7.updateRenderTargetMipmap(w31)), R22.isScene === true && R22.onAfterRender(p26, R22, Y13), xe6.resetDefaultState(), I18 = -1, D18 = null, f40.pop(), f40.length > 0 ? _21 = f40[f40.length - 1] : _21 = null, y34.pop(), y34.length > 0 ? m34 = y34[y34.length - 1] : m34 = null;
    };
    function Nt9(R22, Y13, ee7, X14) {
      if (R22.visible === false)
        return;
      if (R22.layers.test(Y13.layers)) {
        if (R22.isGroup)
          ee7 = R22.renderOrder;
        else if (R22.isLOD)
          R22.autoUpdate === true && R22.update(Y13);
        else if (R22.isLight)
          _21.pushLight(R22), R22.castShadow && _21.pushShadow(R22);
        else if (R22.isSprite) {
          if (!R22.frustumCulled || ie8.intersectsSprite(R22)) {
            X14 && q14.setFromMatrixPosition(R22.matrixWorld).applyMatrix4(H16);
            const Re7 = $e6.update(R22), Be7 = R22.material;
            Be7.visible && m34.push(R22, Re7, Be7, ee7, q14.z, null);
          }
        } else if ((R22.isMesh || R22.isLine || R22.isPoints) && (R22.isSkinnedMesh && R22.skeleton.frame !== tt12.render.frame && (R22.skeleton.update(), R22.skeleton.frame = tt12.render.frame), !R22.frustumCulled || ie8.intersectsObject(R22))) {
          X14 && q14.setFromMatrixPosition(R22.matrixWorld).applyMatrix4(H16);
          const Re7 = $e6.update(R22), Be7 = R22.material;
          if (Array.isArray(Be7)) {
            const Ge7 = Re7.groups;
            for (let Xe7 = 0, Qe8 = Ge7.length; Xe7 < Qe8; Xe7++) {
              const Ze7 = Ge7[Xe7], Ye7 = Be7[Ze7.materialIndex];
              Ye7 && Ye7.visible && m34.push(R22, Re7, Ye7, ee7, q14.z, Ze7);
            }
          } else
            Be7.visible && m34.push(R22, Re7, Be7, ee7, q14.z, null);
        }
      }
      const ne8 = R22.children;
      for (let Re7 = 0, Be7 = ne8.length; Re7 < Be7; Re7++)
        Nt9(ne8[Re7], Y13, ee7, X14);
    }
    function Mi5(R22, Y13, ee7, X14) {
      const ne8 = R22.opaque, Re7 = R22.transmissive, Be7 = R22.transparent;
      _21.setupLightsView(ee7), le7 === true && Q12.setGlobalState(p26.clippingPlanes, ee7), Re7.length > 0 && it16(ne8, Re7, Y13, ee7), X14 && De6.viewport(P20.copy(X14)), ne8.length > 0 && Jt7(ne8, Y13, ee7), Re7.length > 0 && Jt7(Re7, Y13, ee7), Be7.length > 0 && Jt7(Be7, Y13, ee7), De6.buffers.depth.setTest(true), De6.buffers.depth.setMask(true), De6.buffers.color.setMask(true), De6.setPolygonOffset(false);
    }
    function it16(R22, Y13, ee7, X14) {
      if (ue8 === null) {
        const Ge7 = me9.isWebGL2;
        ue8 = new Mr5(1024, 1024, {
          generateMipmaps: true,
          type: Le7.has("EXT_color_buffer_half_float") ? $n5 : xr4,
          minFilter: Hi3,
          samples: Ge7 && o13 === true ? 4 : 0
        });
      }
      const ne8 = p26.getRenderTarget();
      p26.setRenderTarget(ue8), p26.clear();
      const Re7 = p26.toneMapping;
      p26.toneMapping = Fi4, Jt7(R22, ee7, X14), je7.updateMultisampleRenderTarget(ue8), je7.updateRenderTargetMipmap(ue8);
      let Be7 = false;
      for (let Ge7 = 0, Xe7 = Y13.length; Ge7 < Xe7; Ge7++) {
        const Qe8 = Y13[Ge7], Ze7 = Qe8.object, Ye7 = Qe8.geometry, yt14 = Qe8.material, lt13 = Qe8.group;
        if (yt14.side === ui6 && Ze7.layers.test(X14.layers)) {
          const Ut9 = yt14.side;
          yt14.side = ti6, yt14.needsUpdate = true, ai7(Ze7, ee7, X14, Ye7, yt14, lt13), yt14.side = Ut9, yt14.needsUpdate = true, Be7 = true;
        }
      }
      Be7 === true && (je7.updateMultisampleRenderTarget(ue8), je7.updateRenderTargetMipmap(ue8)), p26.setRenderTarget(ne8), p26.toneMapping = Re7;
    }
    function Jt7(R22, Y13, ee7) {
      const X14 = Y13.isScene === true ? Y13.overrideMaterial : null;
      for (let ne8 = 0, Re7 = R22.length; ne8 < Re7; ne8++) {
        const Be7 = R22[ne8], Ge7 = Be7.object, Xe7 = Be7.geometry, Qe8 = X14 === null ? Be7.material : X14, Ze7 = Be7.group;
        Ge7.layers.test(ee7.layers) && ai7(Ge7, Y13, ee7, Xe7, Qe8, Ze7);
      }
    }
    function ai7(R22, Y13, ee7, X14, ne8, Re7) {
      R22.onBeforeRender(p26, Y13, ee7, X14, ne8, Re7), R22.modelViewMatrix.multiplyMatrices(ee7.matrixWorldInverse, R22.matrixWorld), R22.normalMatrix.getNormalMatrix(R22.modelViewMatrix), ne8.onBeforeRender(p26, Y13, ee7, X14, R22, Re7), ne8.transparent === true && ne8.side === ui6 && ne8.forceSinglePass === false ? (ne8.side = ti6, ne8.needsUpdate = true, p26.renderBufferDirect(ee7, Y13, X14, ne8, R22, Re7), ne8.side = Ei5, ne8.needsUpdate = true, p26.renderBufferDirect(ee7, Y13, X14, ne8, R22, Re7), ne8.side = ui6) : p26.renderBufferDirect(ee7, Y13, X14, ne8, R22, Re7), R22.onAfterRender(p26, Y13, ee7, X14, ne8, Re7);
    }
    function Ir6(R22, Y13, ee7) {
      Y13.isScene !== true && (Y13 = oe7);
      const X14 = Pe6.get(R22), ne8 = _21.state.lights, Re7 = _21.state.shadowsArray, Be7 = ne8.state.version, Ge7 = ot15.getParameters(R22, ne8.state, Re7, Y13, ee7), Xe7 = ot15.getProgramCacheKey(Ge7);
      let Qe8 = X14.programs;
      X14.environment = R22.isMeshStandardMaterial ? Y13.environment : null, X14.fog = Y13.fog, X14.envMap = (R22.isMeshStandardMaterial ? vt9 : Mt10).get(R22.envMap || X14.environment), Qe8 === void 0 && (R22.addEventListener("dispose", wt10), Qe8 = /* @__PURE__ */ new Map(), X14.programs = Qe8);
      let Ze7 = Qe8.get(Xe7);
      if (Ze7 !== void 0) {
        if (X14.currentProgram === Ze7 && X14.lightsStateVersion === Be7)
          return hs2(R22, Ge7), Ze7;
      } else
        Ge7.uniforms = ot15.getUniforms(R22), R22.onBuild(ee7, Ge7, p26), R22.onBeforeCompile(Ge7, p26), Ze7 = ot15.acquireProgram(Ge7, Xe7), Qe8.set(Xe7, Ze7), X14.uniforms = Ge7.uniforms;
      const Ye7 = X14.uniforms;
      (!R22.isShaderMaterial && !R22.isRawShaderMaterial || R22.clipping === true) && (Ye7.clippingPlanes = Q12.uniform), hs2(R22, Ge7), X14.needsLights = va2(R22), X14.lightsStateVersion = Be7, X14.needsLights && (Ye7.ambientLightColor.value = ne8.state.ambient, Ye7.lightProbe.value = ne8.state.probe, Ye7.directionalLights.value = ne8.state.directional, Ye7.directionalLightShadows.value = ne8.state.directionalShadow, Ye7.spotLights.value = ne8.state.spot, Ye7.spotLightShadows.value = ne8.state.spotShadow, Ye7.rectAreaLights.value = ne8.state.rectArea, Ye7.ltc_1.value = ne8.state.rectAreaLTC1, Ye7.ltc_2.value = ne8.state.rectAreaLTC2, Ye7.pointLights.value = ne8.state.point, Ye7.pointLightShadows.value = ne8.state.pointShadow, Ye7.hemisphereLights.value = ne8.state.hemi, Ye7.directionalShadowMap.value = ne8.state.directionalShadowMap, Ye7.directionalShadowMatrix.value = ne8.state.directionalShadowMatrix, Ye7.spotShadowMap.value = ne8.state.spotShadowMap, Ye7.spotLightMatrix.value = ne8.state.spotLightMatrix, Ye7.spotLightMap.value = ne8.state.spotLightMap, Ye7.pointShadowMap.value = ne8.state.pointShadowMap, Ye7.pointShadowMatrix.value = ne8.state.pointShadowMatrix);
      const yt14 = Ze7.getUniforms(), lt13 = Js2.seqWithValue(yt14.seq, Ye7);
      return X14.currentProgram = Ze7, X14.uniformsList = lt13, Ze7;
    }
    function hs2(R22, Y13) {
      const ee7 = Pe6.get(R22);
      ee7.outputEncoding = Y13.outputEncoding, ee7.instancing = Y13.instancing, ee7.skinning = Y13.skinning, ee7.morphTargets = Y13.morphTargets, ee7.morphNormals = Y13.morphNormals, ee7.morphColors = Y13.morphColors, ee7.morphTargetsCount = Y13.morphTargetsCount, ee7.numClippingPlanes = Y13.numClippingPlanes, ee7.numIntersection = Y13.numClipIntersection, ee7.vertexAlphas = Y13.vertexAlphas, ee7.vertexTangents = Y13.vertexTangents, ee7.toneMapping = Y13.toneMapping;
    }
    function ga2(R22, Y13, ee7, X14, ne8) {
      Y13.isScene !== true && (Y13 = oe7), je7.resetTextureUnits();
      const Re7 = Y13.fog, Be7 = X14.isMeshStandardMaterial ? Y13.environment : null, Ge7 = w31 === null ? p26.outputEncoding : w31.isXRRenderTarget === true ? w31.texture.encoding : br5, Xe7 = (X14.isMeshStandardMaterial ? vt9 : Mt10).get(X14.envMap || Be7), Qe8 = X14.vertexColors === true && !!ee7.attributes.color && ee7.attributes.color.itemSize === 4, Ze7 = !!X14.normalMap && !!ee7.attributes.tangent, Ye7 = !!ee7.morphAttributes.position, yt14 = !!ee7.morphAttributes.normal, lt13 = !!ee7.morphAttributes.color, Ut9 = X14.toneMapped ? p26.toneMapping : Fi4, fi7 = ee7.morphAttributes.position || ee7.morphAttributes.normal || ee7.morphAttributes.color, Et9 = fi7 !== void 0 ? fi7.length : 0, Je6 = Pe6.get(X14), Dr6 = _21.state.lights;
      if (le7 === true && (fe7 === true || R22 !== D18)) {
        const Kt7 = R22 === D18 && X14.id === I18;
        Q12.setState(X14, R22, Kt7);
      }
      let kn6 = false;
      X14.version === Je6.__version ? (Je6.needsLights && Je6.lightsStateVersion !== Dr6.state.version || Je6.outputEncoding !== Ge7 || ne8.isInstancedMesh && Je6.instancing === false || !ne8.isInstancedMesh && Je6.instancing === true || ne8.isSkinnedMesh && Je6.skinning === false || !ne8.isSkinnedMesh && Je6.skinning === true || Je6.envMap !== Xe7 || X14.fog === true && Je6.fog !== Re7 || Je6.numClippingPlanes !== void 0 && (Je6.numClippingPlanes !== Q12.numPlanes || Je6.numIntersection !== Q12.numIntersection) || Je6.vertexAlphas !== Qe8 || Je6.vertexTangents !== Ze7 || Je6.morphTargets !== Ye7 || Je6.morphNormals !== yt14 || Je6.morphColors !== lt13 || Je6.toneMapping !== Ut9 || me9.isWebGL2 === true && Je6.morphTargetsCount !== Et9) && (kn6 = true) : (kn6 = true, Je6.__version = X14.version);
      let Li5 = Je6.currentProgram;
      kn6 === true && (Li5 = Ir6(X14, Y13, ne8));
      let us2 = false, ji3 = false, kr6 = false;
      const At9 = Li5.getUniforms(), Ci5 = Je6.uniforms;
      if (De6.useProgram(Li5.program) && (us2 = true, ji3 = true, kr6 = true), X14.id !== I18 && (I18 = X14.id, ji3 = true), us2 || D18 !== R22) {
        if (At9.setValue(F19, "projectionMatrix", R22.projectionMatrix), me9.logarithmicDepthBuffer && At9.setValue(
          F19,
          "logDepthBufFC",
          2 / (Math.log(R22.far + 1) / Math.LN2)
        ), D18 !== R22 && (D18 = R22, ji3 = true, kr6 = true), X14.isShaderMaterial || X14.isMeshPhongMaterial || X14.isMeshToonMaterial || X14.isMeshStandardMaterial || X14.envMap) {
          const Kt7 = At9.map.cameraPosition;
          Kt7 !== void 0 && Kt7.setValue(
            F19,
            q14.setFromMatrixPosition(R22.matrixWorld)
          );
        }
        (X14.isMeshPhongMaterial || X14.isMeshToonMaterial || X14.isMeshLambertMaterial || X14.isMeshBasicMaterial || X14.isMeshStandardMaterial || X14.isShaderMaterial) && At9.setValue(F19, "isOrthographic", R22.isOrthographicCamera === true), (X14.isMeshPhongMaterial || X14.isMeshToonMaterial || X14.isMeshLambertMaterial || X14.isMeshBasicMaterial || X14.isMeshStandardMaterial || X14.isShaderMaterial || X14.isShadowMaterial || ne8.isSkinnedMesh) && At9.setValue(F19, "viewMatrix", R22.matrixWorldInverse);
      }
      if (ne8.isSkinnedMesh) {
        At9.setOptional(F19, ne8, "bindMatrix"), At9.setOptional(F19, ne8, "bindMatrixInverse");
        const Kt7 = ne8.skeleton;
        Kt7 && (me9.floatVertexTextures ? (Kt7.boneTexture === null && Kt7.computeBoneTexture(), At9.setValue(F19, "boneTexture", Kt7.boneTexture, je7), At9.setValue(F19, "boneTextureSize", Kt7.boneTextureSize)) : console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."));
      }
      const Ur6 = ee7.morphAttributes;
      if ((Ur6.position !== void 0 || Ur6.normal !== void 0 || Ur6.color !== void 0 && me9.isWebGL2 === true) && _e7.update(ne8, ee7, Li5), (ji3 || Je6.receiveShadow !== ne8.receiveShadow) && (Je6.receiveShadow = ne8.receiveShadow, At9.setValue(F19, "receiveShadow", ne8.receiveShadow)), X14.isMeshGouraudMaterial && X14.envMap !== null && (Ci5.envMap.value = Xe7, Ci5.flipEnvMap.value = Xe7.isCubeTexture && Xe7.isRenderTargetTexture === false ? -1 : 1), ji3 && (At9.setValue(F19, "toneMappingExposure", p26.toneMappingExposure), Je6.needsLights && _a2(Ci5, kr6), Re7 && X14.fog === true && kt10.refreshFogUniforms(Ci5, Re7), kt10.refreshMaterialUniforms(Ci5, X14, U20, z21, ue8), Js2.upload(F19, Je6.uniformsList, Ci5, je7)), X14.isShaderMaterial && X14.uniformsNeedUpdate === true && (Js2.upload(F19, Je6.uniformsList, Ci5, je7), X14.uniformsNeedUpdate = false), X14.isSpriteMaterial && At9.setValue(F19, "center", ne8.center), At9.setValue(F19, "modelViewMatrix", ne8.modelViewMatrix), At9.setValue(F19, "normalMatrix", ne8.normalMatrix), At9.setValue(F19, "modelMatrix", ne8.matrixWorld), X14.isShaderMaterial || X14.isRawShaderMaterial) {
        const Kt7 = X14.uniformsGroups;
        for (let Or6 = 0, ya2 = Kt7.length; Or6 < ya2; Or6++)
          if (me9.isWebGL2) {
            const ds2 = Kt7[Or6];
            Ae6.update(ds2, Li5), Ae6.bind(ds2, Li5);
          } else
            console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");
      }
      return Li5;
    }
    function _a2(R22, Y13) {
      R22.ambientLightColor.needsUpdate = Y13, R22.lightProbe.needsUpdate = Y13, R22.directionalLights.needsUpdate = Y13, R22.directionalLightShadows.needsUpdate = Y13, R22.pointLights.needsUpdate = Y13, R22.pointLightShadows.needsUpdate = Y13, R22.spotLights.needsUpdate = Y13, R22.spotLightShadows.needsUpdate = Y13, R22.rectAreaLights.needsUpdate = Y13, R22.hemisphereLights.needsUpdate = Y13;
    }
    function va2(R22) {
      return R22.isMeshLambertMaterial || R22.isMeshToonMaterial || R22.isMeshPhongMaterial || R22.isMeshStandardMaterial || R22.isShadowMaterial || R22.isShaderMaterial && R22.lights === true;
    }
    this.getActiveCubeFace = function() {
      return M13;
    }, this.getActiveMipmapLevel = function() {
      return E25;
    }, this.getRenderTarget = function() {
      return w31;
    }, this.setRenderTargetTextures = function(R22, Y13, ee7) {
      Pe6.get(R22.texture).__webglTexture = Y13, Pe6.get(R22.depthTexture).__webglTexture = ee7;
      const X14 = Pe6.get(R22);
      X14.__hasExternalTextures = true, X14.__hasExternalTextures && (X14.__autoAllocateDepthBuffer = ee7 === void 0, X14.__autoAllocateDepthBuffer || Le7.has("WEBGL_multisampled_render_to_texture") === true && (console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"), X14.__useRenderToTexture = false));
    }, this.setRenderTargetFramebuffer = function(R22, Y13) {
      const ee7 = Pe6.get(R22);
      ee7.__webglFramebuffer = Y13, ee7.__useDefaultFramebuffer = Y13 === void 0;
    }, this.setRenderTarget = function(R22, Y13 = 0, ee7 = 0) {
      w31 = R22, M13 = Y13, E25 = ee7;
      let X14 = true, ne8 = null, Re7 = false, Be7 = false;
      if (R22) {
        const Ge7 = Pe6.get(R22);
        Ge7.__useDefaultFramebuffer !== void 0 ? (De6.bindFramebuffer(36160, null), X14 = false) : Ge7.__webglFramebuffer === void 0 ? je7.setupRenderTarget(R22) : Ge7.__hasExternalTextures && je7.rebindTextures(R22, Pe6.get(R22.texture).__webglTexture, Pe6.get(R22.depthTexture).__webglTexture);
        const Xe7 = R22.texture;
        (Xe7.isData3DTexture || Xe7.isDataArrayTexture || Xe7.isCompressedArrayTexture) && (Be7 = true);
        const Qe8 = Pe6.get(R22).__webglFramebuffer;
        R22.isWebGLCubeRenderTarget ? (ne8 = Qe8[Y13], Re7 = true) : me9.isWebGL2 && R22.samples > 0 && je7.useMultisampledRTT(R22) === false ? ne8 = Pe6.get(R22).__webglMultisampledFramebuffer : ne8 = Qe8, P20.copy(R22.viewport), x36.copy(R22.scissor), C21 = R22.scissorTest;
      } else
        P20.copy(W11).multiplyScalar(U20).floor(), x36.copy(re8).multiplyScalar(U20).floor(), C21 = $25;
      if (De6.bindFramebuffer(36160, ne8) && me9.drawBuffers && X14 && De6.drawBuffers(R22, ne8), De6.viewport(P20), De6.scissor(x36), De6.setScissorTest(C21), Re7) {
        const Ge7 = Pe6.get(R22.texture);
        F19.framebufferTexture2D(36160, 36064, 34069 + Y13, Ge7.__webglTexture, ee7);
      } else if (Be7) {
        const Ge7 = Pe6.get(R22.texture), Xe7 = Y13 || 0;
        F19.framebufferTextureLayer(36160, 36064, Ge7.__webglTexture, ee7 || 0, Xe7);
      }
      I18 = -1;
    }, this.readRenderTargetPixels = function(R22, Y13, ee7, X14, ne8, Re7, Be7) {
      if (!(R22 && R22.isWebGLRenderTarget)) {
        console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");
        return;
      }
      let Ge7 = Pe6.get(R22).__webglFramebuffer;
      if (R22.isWebGLCubeRenderTarget && Be7 !== void 0 && (Ge7 = Ge7[Be7]), Ge7) {
        De6.bindFramebuffer(36160, Ge7);
        try {
          const Xe7 = R22.texture, Qe8 = Xe7.format, Ze7 = Xe7.type;
          if (Qe8 !== di6 && Z12.convert(Qe8) !== F19.getParameter(35739)) {
            console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
            return;
          }
          const Ye7 = Ze7 === $n5 && (Le7.has("EXT_color_buffer_half_float") || me9.isWebGL2 && Le7.has("EXT_color_buffer_float"));
          if (Ze7 !== xr4 && Z12.convert(Ze7) !== F19.getParameter(35738) && // Edge and Chrome Mac < 52 (#9513)
          !(Ze7 === er5 && (me9.isWebGL2 || Le7.has("OES_texture_float") || Le7.has("WEBGL_color_buffer_float"))) && // Chrome Mac >= 52 and Firefox
          !Ye7) {
            console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");
            return;
          }
          Y13 >= 0 && Y13 <= R22.width - X14 && ee7 >= 0 && ee7 <= R22.height - ne8 && F19.readPixels(Y13, ee7, X14, ne8, Z12.convert(Qe8), Z12.convert(Ze7), Re7);
        } finally {
          const Xe7 = w31 !== null ? Pe6.get(w31).__webglFramebuffer : null;
          De6.bindFramebuffer(36160, Xe7);
        }
      }
    }, this.copyFramebufferToTexture = function(R22, Y13, ee7 = 0) {
      const X14 = Math.pow(2, -ee7), ne8 = Math.floor(Y13.image.width * X14), Re7 = Math.floor(Y13.image.height * X14);
      je7.setTexture2D(Y13, 0), F19.copyTexSubImage2D(3553, ee7, 0, 0, R22.x, R22.y, ne8, Re7), De6.unbindTexture();
    }, this.copyTextureToTexture = function(R22, Y13, ee7, X14 = 0) {
      const ne8 = Y13.image.width, Re7 = Y13.image.height, Be7 = Z12.convert(ee7.format), Ge7 = Z12.convert(ee7.type);
      je7.setTexture2D(ee7, 0), F19.pixelStorei(37440, ee7.flipY), F19.pixelStorei(37441, ee7.premultiplyAlpha), F19.pixelStorei(3317, ee7.unpackAlignment), Y13.isDataTexture ? F19.texSubImage2D(3553, X14, R22.x, R22.y, ne8, Re7, Be7, Ge7, Y13.image.data) : Y13.isCompressedTexture ? F19.compressedTexSubImage2D(3553, X14, R22.x, R22.y, Y13.mipmaps[0].width, Y13.mipmaps[0].height, Be7, Y13.mipmaps[0].data) : F19.texSubImage2D(3553, X14, R22.x, R22.y, Be7, Ge7, Y13.image), X14 === 0 && ee7.generateMipmaps && F19.generateMipmap(3553), De6.unbindTexture();
    }, this.copyTextureToTexture3D = function(R22, Y13, ee7, X14, ne8 = 0) {
      if (p26.isWebGL1Renderer) {
        console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");
        return;
      }
      const Re7 = R22.max.x - R22.min.x + 1, Be7 = R22.max.y - R22.min.y + 1, Ge7 = R22.max.z - R22.min.z + 1, Xe7 = Z12.convert(X14.format), Qe8 = Z12.convert(X14.type);
      let Ze7;
      if (X14.isData3DTexture)
        je7.setTexture3D(X14, 0), Ze7 = 32879;
      else if (X14.isDataArrayTexture)
        je7.setTexture2DArray(X14, 0), Ze7 = 35866;
      else {
        console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");
        return;
      }
      F19.pixelStorei(37440, X14.flipY), F19.pixelStorei(37441, X14.premultiplyAlpha), F19.pixelStorei(3317, X14.unpackAlignment);
      const Ye7 = F19.getParameter(3314), yt14 = F19.getParameter(32878), lt13 = F19.getParameter(3316), Ut9 = F19.getParameter(3315), fi7 = F19.getParameter(32877), Et9 = ee7.isCompressedTexture ? ee7.mipmaps[0] : ee7.image;
      F19.pixelStorei(3314, Et9.width), F19.pixelStorei(32878, Et9.height), F19.pixelStorei(3316, R22.min.x), F19.pixelStorei(3315, R22.min.y), F19.pixelStorei(32877, R22.min.z), ee7.isDataTexture || ee7.isData3DTexture ? F19.texSubImage3D(Ze7, ne8, Y13.x, Y13.y, Y13.z, Re7, Be7, Ge7, Xe7, Qe8, Et9.data) : ee7.isCompressedArrayTexture ? (console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."), F19.compressedTexSubImage3D(Ze7, ne8, Y13.x, Y13.y, Y13.z, Re7, Be7, Ge7, Xe7, Et9.data)) : F19.texSubImage3D(Ze7, ne8, Y13.x, Y13.y, Y13.z, Re7, Be7, Ge7, Xe7, Qe8, Et9), F19.pixelStorei(3314, Ye7), F19.pixelStorei(32878, yt14), F19.pixelStorei(3316, lt13), F19.pixelStorei(3315, Ut9), F19.pixelStorei(32877, fi7), ne8 === 0 && X14.generateMipmaps && F19.generateMipmap(Ze7), De6.unbindTexture();
    }, this.initTexture = function(R22) {
      R22.isCubeTexture ? je7.setTextureCube(R22, 0) : R22.isData3DTexture ? je7.setTexture3D(R22, 0) : R22.isDataArrayTexture || R22.isCompressedArrayTexture ? je7.setTexture2DArray(R22, 0) : je7.setTexture2D(R22, 0), De6.unbindTexture();
    }, this.resetState = function() {
      M13 = 0, E25 = 0, w31 = null, De6.reset(), xe6.reset();
    }, typeof __THREE_DEVTOOLS__ < "u" && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", { detail: this }));
  }
  get physicallyCorrectLights() {
    return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."), !this.useLegacyLights;
  }
  set physicallyCorrectLights(e11) {
    console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."), this.useLegacyLights = !e11;
  }
};
var g02 = class extends Do2 {
};
g02.prototype.isWebGL1Renderer = true;
var ko2 = class extends _t8 {
  constructor() {
    super(), this.isScene = true, this.type = "Scene", this.background = null, this.environment = null, this.fog = null, this.backgroundBlurriness = 0, this.backgroundIntensity = 1, this.overrideMaterial = null, typeof __THREE_DEVTOOLS__ < "u" && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", { detail: this }));
  }
  copy(e11, t19) {
    return super.copy(e11, t19), e11.background !== null && (this.background = e11.background.clone()), e11.environment !== null && (this.environment = e11.environment.clone()), e11.fog !== null && (this.fog = e11.fog.clone()), this.backgroundBlurriness = e11.backgroundBlurriness, this.backgroundIntensity = e11.backgroundIntensity, e11.overrideMaterial !== null && (this.overrideMaterial = e11.overrideMaterial.clone()), this.matrixAutoUpdate = e11.matrixAutoUpdate, this;
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return this.fog !== null && (t19.object.fog = this.fog.toJSON()), this.backgroundBlurriness > 0 && (t19.object.backgroundBlurriness = this.backgroundBlurriness), this.backgroundIntensity !== 1 && (t19.object.backgroundIntensity = this.backgroundIntensity), t19;
  }
  get autoUpdate() {
    return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."), this.matrixWorldAutoUpdate;
  }
  set autoUpdate(e11) {
    console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."), this.matrixWorldAutoUpdate = e11;
  }
};
var _02 = class {
  constructor(e11, t19) {
    this.isInterleavedBuffer = true, this.array = e11, this.stride = t19, this.count = e11 !== void 0 ? e11.length / t19 : 0, this.usage = go2, this.updateRange = { offset: 0, count: -1 }, this.version = 0, this.uuid = bi6();
  }
  onUploadCallback() {
  }
  set needsUpdate(e11) {
    e11 === true && this.version++;
  }
  setUsage(e11) {
    return this.usage = e11, this;
  }
  copy(e11) {
    return this.array = new e11.array.constructor(e11.array), this.count = e11.count, this.stride = e11.stride, this.usage = e11.usage, this;
  }
  copyAt(e11, t19, i27) {
    e11 *= this.stride, i27 *= t19.stride;
    for (let r24 = 0, n33 = this.stride; r24 < n33; r24++)
      this.array[e11 + r24] = t19.array[i27 + r24];
    return this;
  }
  set(e11, t19 = 0) {
    return this.array.set(e11, t19), this;
  }
  clone(e11) {
    e11.arrayBuffers === void 0 && (e11.arrayBuffers = {}), this.array.buffer._uuid === void 0 && (this.array.buffer._uuid = bi6()), e11.arrayBuffers[this.array.buffer._uuid] === void 0 && (e11.arrayBuffers[this.array.buffer._uuid] = this.array.slice(0).buffer);
    const t19 = new this.array.constructor(e11.arrayBuffers[this.array.buffer._uuid]), i27 = new this.constructor(t19, this.stride);
    return i27.setUsage(this.usage), i27;
  }
  onUpload(e11) {
    return this.onUploadCallback = e11, this;
  }
  toJSON(e11) {
    return e11.arrayBuffers === void 0 && (e11.arrayBuffers = {}), this.array.buffer._uuid === void 0 && (this.array.buffer._uuid = bi6()), e11.arrayBuffers[this.array.buffer._uuid] === void 0 && (e11.arrayBuffers[this.array.buffer._uuid] = Array.from(new Uint32Array(this.array.buffer))), {
      uuid: this.uuid,
      buffer: this.array.buffer._uuid,
      type: this.array.constructor.name,
      stride: this.stride
    };
  }
};
var $t7 = new k20();
var Uo2 = class _Uo {
  constructor(e11, t19, i27, r24 = false) {
    this.isInterleavedBufferAttribute = true, this.name = "", this.data = e11, this.itemSize = t19, this.offset = i27, this.normalized = r24;
  }
  get count() {
    return this.data.count;
  }
  get array() {
    return this.data.array;
  }
  set needsUpdate(e11) {
    this.data.needsUpdate = e11;
  }
  applyMatrix4(e11) {
    for (let t19 = 0, i27 = this.data.count; t19 < i27; t19++)
      $t7.fromBufferAttribute(this, t19), $t7.applyMatrix4(e11), this.setXYZ(t19, $t7.x, $t7.y, $t7.z);
    return this;
  }
  applyNormalMatrix(e11) {
    for (let t19 = 0, i27 = this.count; t19 < i27; t19++)
      $t7.fromBufferAttribute(this, t19), $t7.applyNormalMatrix(e11), this.setXYZ(t19, $t7.x, $t7.y, $t7.z);
    return this;
  }
  transformDirection(e11) {
    for (let t19 = 0, i27 = this.count; t19 < i27; t19++)
      $t7.fromBufferAttribute(this, t19), $t7.transformDirection(e11), this.setXYZ(t19, $t7.x, $t7.y, $t7.z);
    return this;
  }
  setX(e11, t19) {
    return this.normalized && (t19 = mt11(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset] = t19, this;
  }
  setY(e11, t19) {
    return this.normalized && (t19 = mt11(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset + 1] = t19, this;
  }
  setZ(e11, t19) {
    return this.normalized && (t19 = mt11(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset + 2] = t19, this;
  }
  setW(e11, t19) {
    return this.normalized && (t19 = mt11(t19, this.array)), this.data.array[e11 * this.data.stride + this.offset + 3] = t19, this;
  }
  getX(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  getY(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset + 1];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  getZ(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset + 2];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  getW(e11) {
    let t19 = this.data.array[e11 * this.data.stride + this.offset + 3];
    return this.normalized && (t19 = zi4(t19, this.array)), t19;
  }
  setXY(e11, t19, i27) {
    return e11 = e11 * this.data.stride + this.offset, this.normalized && (t19 = mt11(t19, this.array), i27 = mt11(i27, this.array)), this.data.array[e11 + 0] = t19, this.data.array[e11 + 1] = i27, this;
  }
  setXYZ(e11, t19, i27, r24) {
    return e11 = e11 * this.data.stride + this.offset, this.normalized && (t19 = mt11(t19, this.array), i27 = mt11(i27, this.array), r24 = mt11(r24, this.array)), this.data.array[e11 + 0] = t19, this.data.array[e11 + 1] = i27, this.data.array[e11 + 2] = r24, this;
  }
  setXYZW(e11, t19, i27, r24, n33) {
    return e11 = e11 * this.data.stride + this.offset, this.normalized && (t19 = mt11(t19, this.array), i27 = mt11(i27, this.array), r24 = mt11(r24, this.array), n33 = mt11(n33, this.array)), this.data.array[e11 + 0] = t19, this.data.array[e11 + 1] = i27, this.data.array[e11 + 2] = r24, this.data.array[e11 + 3] = n33, this;
  }
  clone(e11) {
    if (e11 === void 0) {
      console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");
      const t19 = [];
      for (let i27 = 0; i27 < this.count; i27++) {
        const r24 = i27 * this.data.stride + this.offset;
        for (let n33 = 0; n33 < this.itemSize; n33++)
          t19.push(this.data.array[r24 + n33]);
      }
      return new Ft6(new this.array.constructor(t19), this.itemSize, this.normalized);
    } else
      return e11.interleavedBuffers === void 0 && (e11.interleavedBuffers = {}), e11.interleavedBuffers[this.data.uuid] === void 0 && (e11.interleavedBuffers[this.data.uuid] = this.data.clone(e11)), new _Uo(e11.interleavedBuffers[this.data.uuid], this.itemSize, this.offset, this.normalized);
  }
  toJSON(e11) {
    if (e11 === void 0) {
      console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");
      const t19 = [];
      for (let i27 = 0; i27 < this.count; i27++) {
        const r24 = i27 * this.data.stride + this.offset;
        for (let n33 = 0; n33 < this.itemSize; n33++)
          t19.push(this.data.array[r24 + n33]);
      }
      return {
        itemSize: this.itemSize,
        type: this.array.constructor.name,
        array: t19,
        normalized: this.normalized
      };
    } else
      return e11.interleavedBuffers === void 0 && (e11.interleavedBuffers = {}), e11.interleavedBuffers[this.data.uuid] === void 0 && (e11.interleavedBuffers[this.data.uuid] = this.data.toJSON(e11)), {
        isInterleavedBufferAttribute: true,
        itemSize: this.itemSize,
        data: this.data.uuid,
        offset: this.offset,
        normalized: this.normalized
      };
  }
};
var gc2 = new k20();
var _c2 = new gt12();
var vc2 = new gt12();
var v02 = new k20();
var yc2 = new He6();
var nn3 = new k20();
var Lh2 = class extends Rt8 {
  constructor(e11, t19) {
    super(e11, t19), this.isSkinnedMesh = true, this.type = "SkinnedMesh", this.bindMode = "attached", this.bindMatrix = new He6(), this.bindMatrixInverse = new He6(), this.boundingBox = null, this.boundingSphere = null;
  }
  computeBoundingBox() {
    const e11 = this.geometry;
    this.boundingBox === null && (this.boundingBox = new Vi3()), this.boundingBox.makeEmpty();
    const t19 = e11.getAttribute("position");
    for (let i27 = 0; i27 < t19.count; i27++)
      nn3.fromBufferAttribute(t19, i27), this.applyBoneTransform(i27, nn3), this.boundingBox.expandByPoint(nn3);
  }
  computeBoundingSphere() {
    const e11 = this.geometry;
    this.boundingSphere === null && (this.boundingSphere = new Gi2()), this.boundingSphere.makeEmpty();
    const t19 = e11.getAttribute("position");
    for (let i27 = 0; i27 < t19.count; i27++)
      nn3.fromBufferAttribute(t19, i27), this.applyBoneTransform(i27, nn3), this.boundingSphere.expandByPoint(nn3);
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.bindMode = e11.bindMode, this.bindMatrix.copy(e11.bindMatrix), this.bindMatrixInverse.copy(e11.bindMatrixInverse), this.skeleton = e11.skeleton, this;
  }
  bind(e11, t19) {
    this.skeleton = e11, t19 === void 0 && (this.updateMatrixWorld(true), this.skeleton.calculateInverses(), t19 = this.matrixWorld), this.bindMatrix.copy(t19), this.bindMatrixInverse.copy(t19).invert();
  }
  pose() {
    this.skeleton.pose();
  }
  normalizeSkinWeights() {
    const e11 = new gt12(), t19 = this.geometry.attributes.skinWeight;
    for (let i27 = 0, r24 = t19.count; i27 < r24; i27++) {
      e11.fromBufferAttribute(t19, i27);
      const n33 = 1 / e11.manhattanLength();
      n33 !== 1 / 0 ? e11.multiplyScalar(n33) : e11.set(1, 0, 0, 0), t19.setXYZW(i27, e11.x, e11.y, e11.z, e11.w);
    }
  }
  updateMatrixWorld(e11) {
    super.updateMatrixWorld(e11), this.bindMode === "attached" ? this.bindMatrixInverse.copy(this.matrixWorld).invert() : this.bindMode === "detached" ? this.bindMatrixInverse.copy(this.bindMatrix).invert() : console.warn("THREE.SkinnedMesh: Unrecognized bindMode: " + this.bindMode);
  }
  applyBoneTransform(e11, t19) {
    const i27 = this.skeleton, r24 = this.geometry;
    _c2.fromBufferAttribute(r24.attributes.skinIndex, e11), vc2.fromBufferAttribute(r24.attributes.skinWeight, e11), gc2.copy(t19).applyMatrix4(this.bindMatrix), t19.set(0, 0, 0);
    for (let n33 = 0; n33 < 4; n33++) {
      const a22 = vc2.getComponent(n33);
      if (a22 !== 0) {
        const o13 = _c2.getComponent(n33);
        yc2.multiplyMatrices(i27.bones[o13].matrixWorld, i27.boneInverses[o13]), t19.addScaledVector(v02.copy(gc2).applyMatrix4(yc2), a22);
      }
    }
    return t19.applyMatrix4(this.bindMatrixInverse);
  }
  boneTransform(e11, t19) {
    return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."), this.applyBoneTransform(e11, t19);
  }
};
var Oo2 = class extends _t8 {
  constructor() {
    super(), this.isBone = true, this.type = "Bone";
  }
};
var Ch2 = class extends Wt7 {
  constructor(e11 = null, t19 = 1, i27 = 1, r24, n33, a22, o13, l26, c27 = zt6, h26 = zt6, u35, d34) {
    super(null, a22, o13, l26, c27, h26, r24, n33, u35, d34), this.isDataTexture = true, this.image = { data: e11, width: t19, height: i27 }, this.generateMipmaps = false, this.flipY = false, this.unpackAlignment = 1;
  }
};
var xc2 = new He6();
var y02 = new He6();
var ha2 = class _ha {
  constructor(e11 = [], t19 = []) {
    this.uuid = bi6(), this.bones = e11.slice(0), this.boneInverses = t19, this.boneMatrices = null, this.boneTexture = null, this.boneTextureSize = 0, this.frame = -1, this.init();
  }
  init() {
    const e11 = this.bones, t19 = this.boneInverses;
    if (this.boneMatrices = new Float32Array(e11.length * 16), t19.length === 0)
      this.calculateInverses();
    else if (e11.length !== t19.length) {
      console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."), this.boneInverses = [];
      for (let i27 = 0, r24 = this.bones.length; i27 < r24; i27++)
        this.boneInverses.push(new He6());
    }
  }
  calculateInverses() {
    this.boneInverses.length = 0;
    for (let e11 = 0, t19 = this.bones.length; e11 < t19; e11++) {
      const i27 = new He6();
      this.bones[e11] && i27.copy(this.bones[e11].matrixWorld).invert(), this.boneInverses.push(i27);
    }
  }
  pose() {
    for (let e11 = 0, t19 = this.bones.length; e11 < t19; e11++) {
      const i27 = this.bones[e11];
      i27 && i27.matrixWorld.copy(this.boneInverses[e11]).invert();
    }
    for (let e11 = 0, t19 = this.bones.length; e11 < t19; e11++) {
      const i27 = this.bones[e11];
      i27 && (i27.parent && i27.parent.isBone ? (i27.matrix.copy(i27.parent.matrixWorld).invert(), i27.matrix.multiply(i27.matrixWorld)) : i27.matrix.copy(i27.matrixWorld), i27.matrix.decompose(i27.position, i27.quaternion, i27.scale));
    }
  }
  update() {
    const e11 = this.bones, t19 = this.boneInverses, i27 = this.boneMatrices, r24 = this.boneTexture;
    for (let n33 = 0, a22 = e11.length; n33 < a22; n33++) {
      const o13 = e11[n33] ? e11[n33].matrixWorld : y02;
      xc2.multiplyMatrices(o13, t19[n33]), xc2.toArray(i27, n33 * 16);
    }
    r24 !== null && (r24.needsUpdate = true);
  }
  clone() {
    return new _ha(this.bones, this.boneInverses);
  }
  computeBoneTexture() {
    let e11 = Math.sqrt(this.bones.length * 4);
    e11 = hh2(e11), e11 = Math.max(e11, 4);
    const t19 = new Float32Array(e11 * e11 * 4);
    t19.set(this.boneMatrices);
    const i27 = new Ch2(t19, e11, e11, di6, er5);
    return i27.needsUpdate = true, this.boneMatrices = t19, this.boneTexture = i27, this.boneTextureSize = e11, this;
  }
  getBoneByName(e11) {
    for (let t19 = 0, i27 = this.bones.length; t19 < i27; t19++) {
      const r24 = this.bones[t19];
      if (r24.name === e11)
        return r24;
    }
  }
  dispose() {
    this.boneTexture !== null && (this.boneTexture.dispose(), this.boneTexture = null);
  }
  fromJSON(e11, t19) {
    this.uuid = e11.uuid;
    for (let i27 = 0, r24 = e11.bones.length; i27 < r24; i27++) {
      const n33 = e11.bones[i27];
      let a22 = t19[n33];
      a22 === void 0 && (console.warn("THREE.Skeleton: No bone found with UUID:", n33), a22 = new Oo2()), this.bones.push(a22), this.boneInverses.push(new He6().fromArray(e11.boneInverses[i27]));
    }
    return this.init(), this;
  }
  toJSON() {
    const e11 = {
      metadata: {
        version: 4.5,
        type: "Skeleton",
        generator: "Skeleton.toJSON"
      },
      bones: [],
      boneInverses: []
    };
    e11.uuid = this.uuid;
    const t19 = this.bones, i27 = this.boneInverses;
    for (let r24 = 0, n33 = t19.length; r24 < n33; r24++) {
      const a22 = t19[r24];
      e11.bones.push(a22.uuid);
      const o13 = i27[r24];
      e11.boneInverses.push(o13.toArray());
    }
    return e11;
  }
};
var bc2 = class extends Ft6 {
  constructor(e11, t19, i27, r24 = 1) {
    super(e11, t19, i27), this.isInstancedBufferAttribute = true, this.meshPerAttribute = r24;
  }
  copy(e11) {
    return super.copy(e11), this.meshPerAttribute = e11.meshPerAttribute, this;
  }
  toJSON() {
    const e11 = super.toJSON();
    return e11.meshPerAttribute = this.meshPerAttribute, e11.isInstancedBufferAttribute = true, e11;
  }
};
var sn4 = new He6();
var Mc2 = new He6();
var Us2 = [];
var wc2 = new Vi3();
var x02 = new He6();
var Fn5 = new Rt8();
var Hn5 = new Gi2();
var b02 = class extends Rt8 {
  constructor(e11, t19, i27) {
    super(e11, t19), this.isInstancedMesh = true, this.instanceMatrix = new bc2(new Float32Array(i27 * 16), 16), this.instanceColor = null, this.count = i27, this.boundingBox = null, this.boundingSphere = null;
    for (let r24 = 0; r24 < i27; r24++)
      this.setMatrixAt(r24, x02);
  }
  computeBoundingBox() {
    const e11 = this.geometry, t19 = this.count;
    this.boundingBox === null && (this.boundingBox = new Vi3()), e11.boundingBox === null && e11.computeBoundingBox(), this.boundingBox.makeEmpty();
    for (let i27 = 0; i27 < t19; i27++)
      this.getMatrixAt(i27, sn4), wc2.copy(e11.boundingBox).applyMatrix4(sn4), this.boundingBox.union(wc2);
  }
  computeBoundingSphere() {
    const e11 = this.geometry, t19 = this.count;
    this.boundingSphere === null && (this.boundingSphere = new Gi2()), e11.boundingSphere === null && e11.computeBoundingSphere(), this.boundingSphere.makeEmpty();
    for (let i27 = 0; i27 < t19; i27++)
      this.getMatrixAt(i27, sn4), Hn5.copy(e11.boundingSphere).applyMatrix4(sn4), this.boundingSphere.union(Hn5);
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.instanceMatrix.copy(e11.instanceMatrix), e11.instanceColor !== null && (this.instanceColor = e11.instanceColor.clone()), this.count = e11.count, this;
  }
  getColorAt(e11, t19) {
    t19.fromArray(this.instanceColor.array, e11 * 3);
  }
  getMatrixAt(e11, t19) {
    t19.fromArray(this.instanceMatrix.array, e11 * 16);
  }
  raycast(e11, t19) {
    const i27 = this.matrixWorld, r24 = this.count;
    if (Fn5.geometry = this.geometry, Fn5.material = this.material, Fn5.material !== void 0 && (this.boundingSphere === null && this.computeBoundingSphere(), Hn5.copy(this.boundingSphere), Hn5.applyMatrix4(i27), e11.ray.intersectsSphere(Hn5) !== false))
      for (let n33 = 0; n33 < r24; n33++) {
        this.getMatrixAt(n33, sn4), Mc2.multiplyMatrices(i27, sn4), Fn5.matrixWorld = Mc2, Fn5.raycast(e11, Us2);
        for (let a22 = 0, o13 = Us2.length; a22 < o13; a22++) {
          const l26 = Us2[a22];
          l26.instanceId = n33, l26.object = this, t19.push(l26);
        }
        Us2.length = 0;
      }
  }
  setColorAt(e11, t19) {
    this.instanceColor === null && (this.instanceColor = new bc2(new Float32Array(this.instanceMatrix.count * 3), 3)), t19.toArray(this.instanceColor.array, e11 * 3);
  }
  setMatrixAt(e11, t19) {
    t19.toArray(this.instanceMatrix.array, e11 * 16);
  }
  updateMorphTargets() {
  }
  dispose() {
    this.dispatchEvent({ type: "dispose" });
  }
};
var Tn4 = class extends pi6 {
  constructor(e11) {
    super(), this.isLineBasicMaterial = true, this.type = "LineBasicMaterial", this.color = new ze7(16777215), this.map = null, this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.linewidth = e11.linewidth, this.linecap = e11.linecap, this.linejoin = e11.linejoin, this.fog = e11.fog, this;
  }
};
var Sc2 = new k20();
var Tc2 = new k20();
var Ec2 = new He6();
var Ja = new No2();
var Os2 = new Gi2();
var ss3 = class extends _t8 {
  constructor(e11 = new Xt6(), t19 = new Tn4()) {
    super(), this.isLine = true, this.type = "Line", this.geometry = e11, this.material = t19, this.updateMorphTargets();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.material = e11.material, this.geometry = e11.geometry, this;
  }
  computeLineDistances() {
    const e11 = this.geometry;
    if (e11.index === null) {
      const t19 = e11.attributes.position, i27 = [0];
      for (let r24 = 1, n33 = t19.count; r24 < n33; r24++)
        Sc2.fromBufferAttribute(t19, r24 - 1), Tc2.fromBufferAttribute(t19, r24), i27[r24] = i27[r24 - 1], i27[r24] += Sc2.distanceTo(Tc2);
      e11.setAttribute("lineDistance", new xt6(i27, 1));
    } else
      console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
    return this;
  }
  raycast(e11, t19) {
    const i27 = this.geometry, r24 = this.matrixWorld, n33 = e11.params.Line.threshold, a22 = i27.drawRange;
    if (i27.boundingSphere === null && i27.computeBoundingSphere(), Os2.copy(i27.boundingSphere), Os2.applyMatrix4(r24), Os2.radius += n33, e11.ray.intersectsSphere(Os2) === false)
      return;
    Ec2.copy(r24).invert(), Ja.copy(e11.ray).applyMatrix4(Ec2);
    const o13 = n33 / ((this.scale.x + this.scale.y + this.scale.z) / 3), l26 = o13 * o13, c27 = new k20(), h26 = new k20(), u35 = new k20(), d34 = new k20(), m34 = this.isLineSegments ? 2 : 1, _21 = i27.index, y34 = i27.attributes.position;
    if (_21 !== null) {
      const f40 = Math.max(0, a22.start), p26 = Math.min(_21.count, a22.start + a22.count);
      for (let A18 = f40, M13 = p26 - 1; A18 < M13; A18 += m34) {
        const E25 = _21.getX(A18), w31 = _21.getX(A18 + 1);
        if (c27.fromBufferAttribute(y34, E25), h26.fromBufferAttribute(y34, w31), Ja.distanceSqToSegment(c27, h26, d34, u35) > l26)
          continue;
        d34.applyMatrix4(this.matrixWorld);
        const I18 = e11.ray.origin.distanceTo(d34);
        I18 < e11.near || I18 > e11.far || t19.push({
          distance: I18,
          // What do we want? intersection point on the ray or on the segment??
          // point: raycaster.ray.at( distance ),
          point: u35.clone().applyMatrix4(this.matrixWorld),
          index: A18,
          face: null,
          faceIndex: null,
          object: this
        });
      }
    } else {
      const f40 = Math.max(0, a22.start), p26 = Math.min(y34.count, a22.start + a22.count);
      for (let A18 = f40, M13 = p26 - 1; A18 < M13; A18 += m34) {
        if (c27.fromBufferAttribute(y34, A18), h26.fromBufferAttribute(y34, A18 + 1), Ja.distanceSqToSegment(c27, h26, d34, u35) > l26)
          continue;
        d34.applyMatrix4(this.matrixWorld);
        const E25 = e11.ray.origin.distanceTo(d34);
        E25 < e11.near || E25 > e11.far || t19.push({
          distance: E25,
          // What do we want? intersection point on the ray or on the segment??
          // point: raycaster.ray.at( distance ),
          point: u35.clone().applyMatrix4(this.matrixWorld),
          index: A18,
          face: null,
          faceIndex: null,
          object: this
        });
      }
    }
  }
  updateMorphTargets() {
    const e11 = this.geometry.morphAttributes, t19 = Object.keys(e11);
    if (t19.length > 0) {
      const i27 = e11[t19[0]];
      if (i27 !== void 0) {
        this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (let r24 = 0, n33 = i27.length; r24 < n33; r24++) {
          const a22 = i27[r24].name || String(r24);
          this.morphTargetInfluences.push(0), this.morphTargetDictionary[a22] = r24;
        }
      }
    }
  }
};
var Ac2 = new k20();
var Lc2 = new k20();
var zo2 = class extends ss3 {
  constructor(e11, t19) {
    super(e11, t19), this.isLineSegments = true, this.type = "LineSegments";
  }
  computeLineDistances() {
    const e11 = this.geometry;
    if (e11.index === null) {
      const t19 = e11.attributes.position, i27 = [];
      for (let r24 = 0, n33 = t19.count; r24 < n33; r24 += 2)
        Ac2.fromBufferAttribute(t19, r24), Lc2.fromBufferAttribute(t19, r24 + 1), i27[r24] = r24 === 0 ? 0 : i27[r24 - 1], i27[r24 + 1] = i27[r24] + Ac2.distanceTo(Lc2);
      e11.setAttribute("lineDistance", new xt6(i27, 1));
    } else
      console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
    return this;
  }
};
var M02 = class extends ss3 {
  constructor(e11, t19) {
    super(e11, t19), this.isLineLoop = true, this.type = "LineLoop";
  }
};
var Rh2 = class extends pi6 {
  constructor(e11) {
    super(), this.isPointsMaterial = true, this.type = "PointsMaterial", this.color = new ze7(16777215), this.map = null, this.alphaMap = null, this.size = 1, this.sizeAttenuation = true, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.alphaMap = e11.alphaMap, this.size = e11.size, this.sizeAttenuation = e11.sizeAttenuation, this.fog = e11.fog, this;
  }
};
var Cc2 = new He6();
var xo2 = new No2();
var zs2 = new Gi2();
var Bs2 = new k20();
var w02 = class extends _t8 {
  constructor(e11 = new Xt6(), t19 = new Rh2()) {
    super(), this.isPoints = true, this.type = "Points", this.geometry = e11, this.material = t19, this.updateMorphTargets();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.material = e11.material, this.geometry = e11.geometry, this;
  }
  raycast(e11, t19) {
    const i27 = this.geometry, r24 = this.matrixWorld, n33 = e11.params.Points.threshold, a22 = i27.drawRange;
    if (i27.boundingSphere === null && i27.computeBoundingSphere(), zs2.copy(i27.boundingSphere), zs2.applyMatrix4(r24), zs2.radius += n33, e11.ray.intersectsSphere(zs2) === false)
      return;
    Cc2.copy(r24).invert(), xo2.copy(e11.ray).applyMatrix4(Cc2);
    const o13 = n33 / ((this.scale.x + this.scale.y + this.scale.z) / 3), l26 = o13 * o13, c27 = i27.index, h26 = i27.attributes.position;
    if (c27 !== null) {
      const u35 = Math.max(0, a22.start), d34 = Math.min(c27.count, a22.start + a22.count);
      for (let m34 = u35, _21 = d34; m34 < _21; m34++) {
        const y34 = c27.getX(m34);
        Bs2.fromBufferAttribute(h26, y34), Rc2(Bs2, y34, l26, r24, e11, t19, this);
      }
    } else {
      const u35 = Math.max(0, a22.start), d34 = Math.min(h26.count, a22.start + a22.count);
      for (let m34 = u35, _21 = d34; m34 < _21; m34++)
        Bs2.fromBufferAttribute(h26, m34), Rc2(Bs2, m34, l26, r24, e11, t19, this);
    }
  }
  updateMorphTargets() {
    const e11 = this.geometry.morphAttributes, t19 = Object.keys(e11);
    if (t19.length > 0) {
      const i27 = e11[t19[0]];
      if (i27 !== void 0) {
        this.morphTargetInfluences = [], this.morphTargetDictionary = {};
        for (let r24 = 0, n33 = i27.length; r24 < n33; r24++) {
          const a22 = i27[r24].name || String(r24);
          this.morphTargetInfluences.push(0), this.morphTargetDictionary[a22] = r24;
        }
      }
    }
  }
};
function Rc2(s18, e11, t19, i27, r24, n33, a22) {
  const o13 = xo2.distanceSqToPoint(s18);
  if (o13 < t19) {
    const l26 = new k20();
    xo2.closestPointToPoint(s18, l26), l26.applyMatrix4(i27);
    const c27 = r24.ray.origin.distanceTo(l26);
    if (c27 < r24.near || c27 > r24.far)
      return;
    n33.push({
      distance: c27,
      distanceToRay: Math.sqrt(o13),
      point: l26,
      index: e11,
      face: null,
      object: a22
    });
  }
}
var ua2 = class _ua extends Xt6 {
  constructor(e11 = 1, t19 = 1, i27 = 1, r24 = 32, n33 = 1, a22 = false, o13 = 0, l26 = Math.PI * 2) {
    super(), this.type = "CylinderGeometry", this.parameters = {
      radiusTop: e11,
      radiusBottom: t19,
      height: i27,
      radialSegments: r24,
      heightSegments: n33,
      openEnded: a22,
      thetaStart: o13,
      thetaLength: l26
    };
    const c27 = this;
    r24 = Math.floor(r24), n33 = Math.floor(n33);
    const h26 = [], u35 = [], d34 = [], m34 = [];
    let _21 = 0;
    const y34 = [], f40 = i27 / 2;
    let p26 = 0;
    A18(), a22 === false && (e11 > 0 && M13(true), t19 > 0 && M13(false)), this.setIndex(h26), this.setAttribute("position", new xt6(u35, 3)), this.setAttribute("normal", new xt6(d34, 3)), this.setAttribute("uv", new xt6(m34, 2));
    function A18() {
      const E25 = new k20(), w31 = new k20();
      let I18 = 0;
      const D18 = (t19 - e11) / i27;
      for (let P20 = 0; P20 <= n33; P20++) {
        const x36 = [], C21 = P20 / n33, G16 = C21 * (t19 - e11) + e11;
        for (let z21 = 0; z21 <= r24; z21++) {
          const U20 = z21 / r24, V16 = U20 * l26 + o13, j19 = Math.sin(V16), W11 = Math.cos(V16);
          w31.x = G16 * j19, w31.y = -C21 * i27 + f40, w31.z = G16 * W11, u35.push(w31.x, w31.y, w31.z), E25.set(j19, D18, W11).normalize(), d34.push(E25.x, E25.y, E25.z), m34.push(U20, 1 - C21), x36.push(_21++);
        }
        y34.push(x36);
      }
      for (let P20 = 0; P20 < r24; P20++)
        for (let x36 = 0; x36 < n33; x36++) {
          const C21 = y34[x36][P20], G16 = y34[x36 + 1][P20], z21 = y34[x36 + 1][P20 + 1], U20 = y34[x36][P20 + 1];
          h26.push(C21, G16, U20), h26.push(G16, z21, U20), I18 += 6;
        }
      c27.addGroup(p26, I18, 0), p26 += I18;
    }
    function M13(E25) {
      const w31 = _21, I18 = new We7(), D18 = new k20();
      let P20 = 0;
      const x36 = E25 === true ? e11 : t19, C21 = E25 === true ? 1 : -1;
      for (let z21 = 1; z21 <= r24; z21++)
        u35.push(0, f40 * C21, 0), d34.push(0, C21, 0), m34.push(0.5, 0.5), _21++;
      const G16 = _21;
      for (let z21 = 0; z21 <= r24; z21++) {
        const U20 = z21 / r24 * l26 + o13, V16 = Math.cos(U20), j19 = Math.sin(U20);
        D18.x = x36 * j19, D18.y = f40 * C21, D18.z = x36 * V16, u35.push(D18.x, D18.y, D18.z), d34.push(0, C21, 0), I18.x = V16 * 0.5 + 0.5, I18.y = j19 * 0.5 * C21 + 0.5, m34.push(I18.x, I18.y), _21++;
      }
      for (let z21 = 0; z21 < r24; z21++) {
        const U20 = w31 + z21, V16 = G16 + z21;
        E25 === true ? h26.push(V16, V16 + 1, U20) : h26.push(V16 + 1, V16, U20), P20 += 3;
      }
      c27.addGroup(p26, P20, E25 === true ? 1 : 2), p26 += P20;
    }
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _ua(e11.radiusTop, e11.radiusBottom, e11.height, e11.radialSegments, e11.heightSegments, e11.openEnded, e11.thetaStart, e11.thetaLength);
  }
};
var Fs2 = new k20();
var Hs2 = new k20();
var Ka = new k20();
var Vs2 = new hi6();
var S02 = class extends Xt6 {
  constructor(e11 = null, t19 = 1) {
    if (super(), this.type = "EdgesGeometry", this.parameters = {
      geometry: e11,
      thresholdAngle: t19
    }, e11 !== null) {
      const i27 = Math.pow(10, 4), r24 = Math.cos(pn5 * t19), n33 = e11.getIndex(), a22 = e11.getAttribute("position"), o13 = n33 ? n33.count : a22.count, l26 = [0, 0, 0], c27 = ["a", "b", "c"], h26 = new Array(3), u35 = {}, d34 = [];
      for (let m34 = 0; m34 < o13; m34 += 3) {
        n33 ? (l26[0] = n33.getX(m34), l26[1] = n33.getX(m34 + 1), l26[2] = n33.getX(m34 + 2)) : (l26[0] = m34, l26[1] = m34 + 1, l26[2] = m34 + 2);
        const { a: _21, b: y34, c: f40 } = Vs2;
        if (_21.fromBufferAttribute(a22, l26[0]), y34.fromBufferAttribute(a22, l26[1]), f40.fromBufferAttribute(a22, l26[2]), Vs2.getNormal(Ka), h26[0] = `${Math.round(_21.x * i27)},${Math.round(_21.y * i27)},${Math.round(_21.z * i27)}`, h26[1] = `${Math.round(y34.x * i27)},${Math.round(y34.y * i27)},${Math.round(y34.z * i27)}`, h26[2] = `${Math.round(f40.x * i27)},${Math.round(f40.y * i27)},${Math.round(f40.z * i27)}`, !(h26[0] === h26[1] || h26[1] === h26[2] || h26[2] === h26[0]))
          for (let p26 = 0; p26 < 3; p26++) {
            const A18 = (p26 + 1) % 3, M13 = h26[p26], E25 = h26[A18], w31 = Vs2[c27[p26]], I18 = Vs2[c27[A18]], D18 = `${M13}_${E25}`, P20 = `${E25}_${M13}`;
            P20 in u35 && u35[P20] ? (Ka.dot(u35[P20].normal) <= r24 && (d34.push(w31.x, w31.y, w31.z), d34.push(I18.x, I18.y, I18.z)), u35[P20] = null) : D18 in u35 || (u35[D18] = {
              index0: l26[p26],
              index1: l26[A18],
              normal: Ka.clone()
            });
          }
      }
      for (const m34 in u35)
        if (u35[m34]) {
          const { index0: _21, index1: y34 } = u35[m34];
          Fs2.fromBufferAttribute(a22, _21), Hs2.fromBufferAttribute(a22, y34), d34.push(Fs2.x, Fs2.y, Fs2.z), d34.push(Hs2.x, Hs2.y, Hs2.z);
        }
      this.setAttribute("position", new xt6(d34, 3));
    }
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
};
var Bo2 = class _Bo extends Xt6 {
  constructor(e11 = 1, t19 = 32, i27 = 16, r24 = 0, n33 = Math.PI * 2, a22 = 0, o13 = Math.PI) {
    super(), this.type = "SphereGeometry", this.parameters = {
      radius: e11,
      widthSegments: t19,
      heightSegments: i27,
      phiStart: r24,
      phiLength: n33,
      thetaStart: a22,
      thetaLength: o13
    }, t19 = Math.max(3, Math.floor(t19)), i27 = Math.max(2, Math.floor(i27));
    const l26 = Math.min(a22 + o13, Math.PI);
    let c27 = 0;
    const h26 = [], u35 = new k20(), d34 = new k20(), m34 = [], _21 = [], y34 = [], f40 = [];
    for (let p26 = 0; p26 <= i27; p26++) {
      const A18 = [], M13 = p26 / i27;
      let E25 = 0;
      p26 === 0 && a22 === 0 ? E25 = 0.5 / t19 : p26 === i27 && l26 === Math.PI && (E25 = -0.5 / t19);
      for (let w31 = 0; w31 <= t19; w31++) {
        const I18 = w31 / t19;
        u35.x = -e11 * Math.cos(r24 + I18 * n33) * Math.sin(a22 + M13 * o13), u35.y = e11 * Math.cos(a22 + M13 * o13), u35.z = e11 * Math.sin(r24 + I18 * n33) * Math.sin(a22 + M13 * o13), _21.push(u35.x, u35.y, u35.z), d34.copy(u35).normalize(), y34.push(d34.x, d34.y, d34.z), f40.push(I18 + E25, 1 - M13), A18.push(c27++);
      }
      h26.push(A18);
    }
    for (let p26 = 0; p26 < i27; p26++)
      for (let A18 = 0; A18 < t19; A18++) {
        const M13 = h26[p26][A18 + 1], E25 = h26[p26][A18], w31 = h26[p26 + 1][A18], I18 = h26[p26 + 1][A18 + 1];
        (p26 !== 0 || a22 > 0) && m34.push(M13, E25, I18), (p26 !== i27 - 1 || l26 < Math.PI) && m34.push(E25, w31, I18);
      }
    this.setIndex(m34), this.setAttribute("position", new xt6(_21, 3)), this.setAttribute("normal", new xt6(y34, 3)), this.setAttribute("uv", new xt6(f40, 2));
  }
  copy(e11) {
    return super.copy(e11), this.parameters = Object.assign({}, e11.parameters), this;
  }
  static fromJSON(e11) {
    return new _Bo(e11.radius, e11.widthSegments, e11.heightSegments, e11.phiStart, e11.phiLength, e11.thetaStart, e11.thetaLength);
  }
};
var as3 = class extends pi6 {
  constructor(e11) {
    super(), this.isMeshStandardMaterial = true, this.defines = { STANDARD: "" }, this.type = "MeshStandardMaterial", this.color = new ze7(16777215), this.roughness = 1, this.metalness = 0, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new ze7(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = sa2, this.normalScale = new We7(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.roughnessMap = null, this.metalnessMap = null, this.alphaMap = null, this.envMap = null, this.envMapIntensity = 1, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.flatShading = false, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.defines = { STANDARD: "" }, this.color.copy(e11.color), this.roughness = e11.roughness, this.metalness = e11.metalness, this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.emissive.copy(e11.emissive), this.emissiveMap = e11.emissiveMap, this.emissiveIntensity = e11.emissiveIntensity, this.bumpMap = e11.bumpMap, this.bumpScale = e11.bumpScale, this.normalMap = e11.normalMap, this.normalMapType = e11.normalMapType, this.normalScale.copy(e11.normalScale), this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.roughnessMap = e11.roughnessMap, this.metalnessMap = e11.metalnessMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.envMapIntensity = e11.envMapIntensity, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.flatShading = e11.flatShading, this.fog = e11.fog, this;
  }
};
var Cr5 = class extends as3 {
  constructor(e11) {
    super(), this.isMeshPhysicalMaterial = true, this.defines = {
      STANDARD: "",
      PHYSICAL: ""
    }, this.type = "MeshPhysicalMaterial", this.clearcoatMap = null, this.clearcoatRoughness = 0, this.clearcoatRoughnessMap = null, this.clearcoatNormalScale = new We7(1, 1), this.clearcoatNormalMap = null, this.ior = 1.5, Object.defineProperty(this, "reflectivity", {
      get: function() {
        return Gt6(2.5 * (this.ior - 1) / (this.ior + 1), 0, 1);
      },
      set: function(t19) {
        this.ior = (1 + 0.4 * t19) / (1 - 0.4 * t19);
      }
    }), this.iridescenceMap = null, this.iridescenceIOR = 1.3, this.iridescenceThicknessRange = [100, 400], this.iridescenceThicknessMap = null, this.sheenColor = new ze7(0), this.sheenColorMap = null, this.sheenRoughness = 1, this.sheenRoughnessMap = null, this.transmissionMap = null, this.thickness = 0, this.thicknessMap = null, this.attenuationDistance = 1 / 0, this.attenuationColor = new ze7(1, 1, 1), this.specularIntensity = 1, this.specularIntensityMap = null, this.specularColor = new ze7(1, 1, 1), this.specularColorMap = null, this._sheen = 0, this._clearcoat = 0, this._iridescence = 0, this._transmission = 0, this.setValues(e11);
  }
  get sheen() {
    return this._sheen;
  }
  set sheen(e11) {
    this._sheen > 0 != e11 > 0 && this.version++, this._sheen = e11;
  }
  get clearcoat() {
    return this._clearcoat;
  }
  set clearcoat(e11) {
    this._clearcoat > 0 != e11 > 0 && this.version++, this._clearcoat = e11;
  }
  get iridescence() {
    return this._iridescence;
  }
  set iridescence(e11) {
    this._iridescence > 0 != e11 > 0 && this.version++, this._iridescence = e11;
  }
  get transmission() {
    return this._transmission;
  }
  set transmission(e11) {
    this._transmission > 0 != e11 > 0 && this.version++, this._transmission = e11;
  }
  copy(e11) {
    return super.copy(e11), this.defines = {
      STANDARD: "",
      PHYSICAL: ""
    }, this.clearcoat = e11.clearcoat, this.clearcoatMap = e11.clearcoatMap, this.clearcoatRoughness = e11.clearcoatRoughness, this.clearcoatRoughnessMap = e11.clearcoatRoughnessMap, this.clearcoatNormalMap = e11.clearcoatNormalMap, this.clearcoatNormalScale.copy(e11.clearcoatNormalScale), this.ior = e11.ior, this.iridescence = e11.iridescence, this.iridescenceMap = e11.iridescenceMap, this.iridescenceIOR = e11.iridescenceIOR, this.iridescenceThicknessRange = [...e11.iridescenceThicknessRange], this.iridescenceThicknessMap = e11.iridescenceThicknessMap, this.sheen = e11.sheen, this.sheenColor.copy(e11.sheenColor), this.sheenColorMap = e11.sheenColorMap, this.sheenRoughness = e11.sheenRoughness, this.sheenRoughnessMap = e11.sheenRoughnessMap, this.transmission = e11.transmission, this.transmissionMap = e11.transmissionMap, this.thickness = e11.thickness, this.thicknessMap = e11.thicknessMap, this.attenuationDistance = e11.attenuationDistance, this.attenuationColor.copy(e11.attenuationColor), this.specularIntensity = e11.specularIntensity, this.specularIntensityMap = e11.specularIntensityMap, this.specularColor.copy(e11.specularColor), this.specularColorMap = e11.specularColorMap, this;
  }
};
var Jn5 = class extends pi6 {
  constructor(e11) {
    super(), this.isMeshPhongMaterial = true, this.type = "MeshPhongMaterial", this.color = new ze7(16777215), this.specular = new ze7(1118481), this.shininess = 30, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new ze7(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = sa2, this.normalScale = new We7(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = ra2, this.reflectivity = 1, this.refractionRatio = 0.98, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.flatShading = false, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.specular.copy(e11.specular), this.shininess = e11.shininess, this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.emissive.copy(e11.emissive), this.emissiveMap = e11.emissiveMap, this.emissiveIntensity = e11.emissiveIntensity, this.bumpMap = e11.bumpMap, this.bumpScale = e11.bumpScale, this.normalMap = e11.normalMap, this.normalMapType = e11.normalMapType, this.normalScale.copy(e11.normalScale), this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.specularMap = e11.specularMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.combine = e11.combine, this.reflectivity = e11.reflectivity, this.refractionRatio = e11.refractionRatio, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.flatShading = e11.flatShading, this.fog = e11.fog, this;
  }
};
var T02 = class extends pi6 {
  constructor(e11) {
    super(), this.isMeshLambertMaterial = true, this.type = "MeshLambertMaterial", this.color = new ze7(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new ze7(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = sa2, this.normalScale = new We7(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = ra2, this.reflectivity = 1, this.refractionRatio = 0.98, this.wireframe = false, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.flatShading = false, this.fog = true, this.setValues(e11);
  }
  copy(e11) {
    return super.copy(e11), this.color.copy(e11.color), this.map = e11.map, this.lightMap = e11.lightMap, this.lightMapIntensity = e11.lightMapIntensity, this.aoMap = e11.aoMap, this.aoMapIntensity = e11.aoMapIntensity, this.emissive.copy(e11.emissive), this.emissiveMap = e11.emissiveMap, this.emissiveIntensity = e11.emissiveIntensity, this.bumpMap = e11.bumpMap, this.bumpScale = e11.bumpScale, this.normalMap = e11.normalMap, this.normalMapType = e11.normalMapType, this.normalScale.copy(e11.normalScale), this.displacementMap = e11.displacementMap, this.displacementScale = e11.displacementScale, this.displacementBias = e11.displacementBias, this.specularMap = e11.specularMap, this.alphaMap = e11.alphaMap, this.envMap = e11.envMap, this.combine = e11.combine, this.reflectivity = e11.reflectivity, this.refractionRatio = e11.refractionRatio, this.wireframe = e11.wireframe, this.wireframeLinewidth = e11.wireframeLinewidth, this.wireframeLinecap = e11.wireframeLinecap, this.wireframeLinejoin = e11.wireframeLinejoin, this.flatShading = e11.flatShading, this.fog = e11.fog, this;
  }
};
function Ji3(s18, e11, t19) {
  return Nh2(s18) ? new s18.constructor(s18.subarray(e11, t19 !== void 0 ? t19 : s18.length)) : s18.slice(e11, t19);
}
function Gs2(s18, e11, t19) {
  return !s18 || // let 'undefined' and 'null' pass
  !t19 && s18.constructor === e11 ? s18 : typeof e11.BYTES_PER_ELEMENT == "number" ? new e11(s18) : Array.prototype.slice.call(s18);
}
function Nh2(s18) {
  return ArrayBuffer.isView(s18) && !(s18 instanceof DataView);
}
function E02(s18) {
  function e11(r24, n33) {
    return s18[r24] - s18[n33];
  }
  const t19 = s18.length, i27 = new Array(t19);
  for (let r24 = 0; r24 !== t19; ++r24)
    i27[r24] = r24;
  return i27.sort(e11), i27;
}
function Nc2(s18, e11, t19) {
  const i27 = s18.length, r24 = new s18.constructor(i27);
  for (let n33 = 0, a22 = 0; a22 !== i27; ++n33) {
    const o13 = t19[n33] * e11;
    for (let l26 = 0; l26 !== e11; ++l26)
      r24[a22++] = s18[o13 + l26];
  }
  return r24;
}
function Ph2(s18, e11, t19, i27) {
  let r24 = 1, n33 = s18[0];
  for (; n33 !== void 0 && n33[i27] === void 0; )
    n33 = s18[r24++];
  if (n33 === void 0)
    return;
  let a22 = n33[i27];
  if (a22 !== void 0)
    if (Array.isArray(a22))
      do
        a22 = n33[i27], a22 !== void 0 && (e11.push(n33.time), t19.push.apply(t19, a22)), n33 = s18[r24++];
      while (n33 !== void 0);
    else if (a22.toArray !== void 0)
      do
        a22 = n33[i27], a22 !== void 0 && (e11.push(n33.time), a22.toArray(t19, t19.length)), n33 = s18[r24++];
      while (n33 !== void 0);
    else
      do
        a22 = n33[i27], a22 !== void 0 && (e11.push(n33.time), t19.push(a22)), n33 = s18[r24++];
      while (n33 !== void 0);
}
var os3 = class {
  constructor(e11, t19, i27, r24) {
    this.parameterPositions = e11, this._cachedIndex = 0, this.resultBuffer = r24 !== void 0 ? r24 : new t19.constructor(i27), this.sampleValues = t19, this.valueSize = i27, this.settings = null, this.DefaultSettings_ = {};
  }
  evaluate(e11) {
    const t19 = this.parameterPositions;
    let i27 = this._cachedIndex, r24 = t19[i27], n33 = t19[i27 - 1];
    i: {
      e: {
        let a22;
        t: {
          r:
            if (!(e11 < r24)) {
              for (let o13 = i27 + 2; ; ) {
                if (r24 === void 0) {
                  if (e11 < n33)
                    break r;
                  return i27 = t19.length, this._cachedIndex = i27, this.copySampleValue_(i27 - 1);
                }
                if (i27 === o13)
                  break;
                if (n33 = r24, r24 = t19[++i27], e11 < r24)
                  break e;
              }
              a22 = t19.length;
              break t;
            }
          if (!(e11 >= n33)) {
            const o13 = t19[1];
            e11 < o13 && (i27 = 2, n33 = o13);
            for (let l26 = i27 - 2; ; ) {
              if (n33 === void 0)
                return this._cachedIndex = 0, this.copySampleValue_(0);
              if (i27 === l26)
                break;
              if (r24 = n33, n33 = t19[--i27 - 1], e11 >= n33)
                break e;
            }
            a22 = i27, i27 = 0;
            break t;
          }
          break i;
        }
        for (; i27 < a22; ) {
          const o13 = i27 + a22 >>> 1;
          e11 < t19[o13] ? a22 = o13 : i27 = o13 + 1;
        }
        if (r24 = t19[i27], n33 = t19[i27 - 1], n33 === void 0)
          return this._cachedIndex = 0, this.copySampleValue_(0);
        if (r24 === void 0)
          return i27 = t19.length, this._cachedIndex = i27, this.copySampleValue_(i27 - 1);
      }
      this._cachedIndex = i27, this.intervalChanged_(i27, n33, r24);
    }
    return this.interpolate_(i27, n33, e11, r24);
  }
  getSettings_() {
    return this.settings || this.DefaultSettings_;
  }
  copySampleValue_(e11) {
    const t19 = this.resultBuffer, i27 = this.sampleValues, r24 = this.valueSize, n33 = e11 * r24;
    for (let a22 = 0; a22 !== r24; ++a22)
      t19[a22] = i27[n33 + a22];
    return t19;
  }
  // Template methods for derived classes:
  interpolate_() {
    throw new Error("call to abstract method");
  }
  intervalChanged_() {
  }
};
var A02 = class extends os3 {
  constructor(e11, t19, i27, r24) {
    super(e11, t19, i27, r24), this._weightPrev = -0, this._offsetPrev = -0, this._weightNext = -0, this._offsetNext = -0, this.DefaultSettings_ = {
      endingStart: Cl2,
      endingEnd: Cl2
    };
  }
  intervalChanged_(e11, t19, i27) {
    const r24 = this.parameterPositions;
    let n33 = e11 - 2, a22 = e11 + 1, o13 = r24[n33], l26 = r24[a22];
    if (o13 === void 0)
      switch (this.getSettings_().endingStart) {
        case Rl2:
          n33 = e11, o13 = 2 * t19 - i27;
          break;
        case Nl2:
          n33 = r24.length - 2, o13 = t19 + r24[n33] - r24[n33 + 1];
          break;
        default:
          n33 = e11, o13 = i27;
      }
    if (l26 === void 0)
      switch (this.getSettings_().endingEnd) {
        case Rl2:
          a22 = e11, l26 = 2 * i27 - t19;
          break;
        case Nl2:
          a22 = 1, l26 = i27 + r24[1] - r24[0];
          break;
        default:
          a22 = e11 - 1, l26 = t19;
      }
    const c27 = (i27 - t19) * 0.5, h26 = this.valueSize;
    this._weightPrev = c27 / (t19 - o13), this._weightNext = c27 / (l26 - i27), this._offsetPrev = n33 * h26, this._offsetNext = a22 * h26;
  }
  interpolate_(e11, t19, i27, r24) {
    const n33 = this.resultBuffer, a22 = this.sampleValues, o13 = this.valueSize, l26 = e11 * o13, c27 = l26 - o13, h26 = this._offsetPrev, u35 = this._offsetNext, d34 = this._weightPrev, m34 = this._weightNext, _21 = (i27 - t19) / (r24 - t19), y34 = _21 * _21, f40 = y34 * _21, p26 = -d34 * f40 + 2 * d34 * y34 - d34 * _21, A18 = (1 + d34) * f40 + (-1.5 - 2 * d34) * y34 + (-0.5 + d34) * _21 + 1, M13 = (-1 - m34) * f40 + (1.5 + m34) * y34 + 0.5 * _21, E25 = m34 * f40 - m34 * y34;
    for (let w31 = 0; w31 !== o13; ++w31)
      n33[w31] = p26 * a22[h26 + w31] + A18 * a22[c27 + w31] + M13 * a22[l26 + w31] + E25 * a22[u35 + w31];
    return n33;
  }
};
var L02 = class extends os3 {
  constructor(e11, t19, i27, r24) {
    super(e11, t19, i27, r24);
  }
  interpolate_(e11, t19, i27, r24) {
    const n33 = this.resultBuffer, a22 = this.sampleValues, o13 = this.valueSize, l26 = e11 * o13, c27 = l26 - o13, h26 = (i27 - t19) / (r24 - t19), u35 = 1 - h26;
    for (let d34 = 0; d34 !== o13; ++d34)
      n33[d34] = a22[c27 + d34] * u35 + a22[l26 + d34] * h26;
    return n33;
  }
};
var C02 = class extends os3 {
  constructor(e11, t19, i27, r24) {
    super(e11, t19, i27, r24);
  }
  interpolate_(e11) {
    return this.copySampleValue_(e11 - 1);
  }
};
var Ai6 = class {
  constructor(e11, t19, i27, r24) {
    if (e11 === void 0)
      throw new Error("THREE.KeyframeTrack: track name is undefined");
    if (t19 === void 0 || t19.length === 0)
      throw new Error("THREE.KeyframeTrack: no keyframes in track named " + e11);
    this.name = e11, this.times = Gs2(t19, this.TimeBufferType), this.values = Gs2(i27, this.ValueBufferType), this.setInterpolation(r24 || this.DefaultInterpolation);
  }
  // Serialization (in static context, because of constructor invocation
  // and automatic invocation of .toJSON):
  static toJSON(e11) {
    const t19 = e11.constructor;
    let i27;
    if (t19.toJSON !== this.toJSON)
      i27 = t19.toJSON(e11);
    else {
      i27 = {
        name: e11.name,
        times: Gs2(e11.times, Array),
        values: Gs2(e11.values, Array)
      };
      const r24 = e11.getInterpolation();
      r24 !== e11.DefaultInterpolation && (i27.interpolation = r24);
    }
    return i27.type = e11.ValueTypeName, i27;
  }
  InterpolantFactoryMethodDiscrete(e11) {
    return new C02(this.times, this.values, this.getValueSize(), e11);
  }
  InterpolantFactoryMethodLinear(e11) {
    return new L02(this.times, this.values, this.getValueSize(), e11);
  }
  InterpolantFactoryMethodSmooth(e11) {
    return new A02(this.times, this.values, this.getValueSize(), e11);
  }
  setInterpolation(e11) {
    let t19;
    switch (e11) {
      case Qn5:
        t19 = this.InterpolantFactoryMethodDiscrete;
        break;
      case Mn5:
        t19 = this.InterpolantFactoryMethodLinear;
        break;
      case Aa:
        t19 = this.InterpolantFactoryMethodSmooth;
        break;
    }
    if (t19 === void 0) {
      const i27 = "unsupported interpolation for " + this.ValueTypeName + " keyframe track named " + this.name;
      if (this.createInterpolant === void 0)
        if (e11 !== this.DefaultInterpolation)
          this.setInterpolation(this.DefaultInterpolation);
        else
          throw new Error(i27);
      return console.warn("THREE.KeyframeTrack:", i27), this;
    }
    return this.createInterpolant = t19, this;
  }
  getInterpolation() {
    switch (this.createInterpolant) {
      case this.InterpolantFactoryMethodDiscrete:
        return Qn5;
      case this.InterpolantFactoryMethodLinear:
        return Mn5;
      case this.InterpolantFactoryMethodSmooth:
        return Aa;
    }
  }
  getValueSize() {
    return this.values.length / this.times.length;
  }
  // move all keyframes either forwards or backwards in time
  shift(e11) {
    if (e11 !== 0) {
      const t19 = this.times;
      for (let i27 = 0, r24 = t19.length; i27 !== r24; ++i27)
        t19[i27] += e11;
    }
    return this;
  }
  // scale all keyframe times by a factor (useful for frame <-> seconds conversions)
  scale(e11) {
    if (e11 !== 1) {
      const t19 = this.times;
      for (let i27 = 0, r24 = t19.length; i27 !== r24; ++i27)
        t19[i27] *= e11;
    }
    return this;
  }
  // removes keyframes before and after animation without changing any values within the range [startTime, endTime].
  // IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values
  trim(e11, t19) {
    const i27 = this.times, r24 = i27.length;
    let n33 = 0, a22 = r24 - 1;
    for (; n33 !== r24 && i27[n33] < e11; )
      ++n33;
    for (; a22 !== -1 && i27[a22] > t19; )
      --a22;
    if (++a22, n33 !== 0 || a22 !== r24) {
      n33 >= a22 && (a22 = Math.max(a22, 1), n33 = a22 - 1);
      const o13 = this.getValueSize();
      this.times = Ji3(i27, n33, a22), this.values = Ji3(this.values, n33 * o13, a22 * o13);
    }
    return this;
  }
  // ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable
  validate() {
    let e11 = true;
    const t19 = this.getValueSize();
    t19 - Math.floor(t19) !== 0 && (console.error("THREE.KeyframeTrack: Invalid value size in track.", this), e11 = false);
    const i27 = this.times, r24 = this.values, n33 = i27.length;
    n33 === 0 && (console.error("THREE.KeyframeTrack: Track is empty.", this), e11 = false);
    let a22 = null;
    for (let o13 = 0; o13 !== n33; o13++) {
      const l26 = i27[o13];
      if (typeof l26 == "number" && isNaN(l26)) {
        console.error("THREE.KeyframeTrack: Time is not a valid number.", this, o13, l26), e11 = false;
        break;
      }
      if (a22 !== null && a22 > l26) {
        console.error("THREE.KeyframeTrack: Out of order keys.", this, o13, l26, a22), e11 = false;
        break;
      }
      a22 = l26;
    }
    if (r24 !== void 0 && Nh2(r24))
      for (let o13 = 0, l26 = r24.length; o13 !== l26; ++o13) {
        const c27 = r24[o13];
        if (isNaN(c27)) {
          console.error("THREE.KeyframeTrack: Value is not a valid number.", this, o13, c27), e11 = false;
          break;
        }
      }
    return e11;
  }
  // removes equivalent sequential keys as common in morph target sequences
  // (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)
  optimize() {
    const e11 = Ji3(this.times), t19 = Ji3(this.values), i27 = this.getValueSize(), r24 = this.getInterpolation() === Aa, n33 = e11.length - 1;
    let a22 = 1;
    for (let o13 = 1; o13 < n33; ++o13) {
      let l26 = false;
      const c27 = e11[o13], h26 = e11[o13 + 1];
      if (c27 !== h26 && (o13 !== 1 || c27 !== e11[0]))
        if (r24)
          l26 = true;
        else {
          const u35 = o13 * i27, d34 = u35 - i27, m34 = u35 + i27;
          for (let _21 = 0; _21 !== i27; ++_21) {
            const y34 = t19[u35 + _21];
            if (y34 !== t19[d34 + _21] || y34 !== t19[m34 + _21]) {
              l26 = true;
              break;
            }
          }
        }
      if (l26) {
        if (o13 !== a22) {
          e11[a22] = e11[o13];
          const u35 = o13 * i27, d34 = a22 * i27;
          for (let m34 = 0; m34 !== i27; ++m34)
            t19[d34 + m34] = t19[u35 + m34];
        }
        ++a22;
      }
    }
    if (n33 > 0) {
      e11[a22] = e11[n33];
      for (let o13 = n33 * i27, l26 = a22 * i27, c27 = 0; c27 !== i27; ++c27)
        t19[l26 + c27] = t19[o13 + c27];
      ++a22;
    }
    return a22 !== e11.length ? (this.times = Ji3(e11, 0, a22), this.values = Ji3(t19, 0, a22 * i27)) : (this.times = e11, this.values = t19), this;
  }
  clone() {
    const e11 = Ji3(this.times, 0), t19 = Ji3(this.values, 0), i27 = this.constructor, r24 = new i27(this.name, e11, t19);
    return r24.createInterpolant = this.createInterpolant, r24;
  }
};
Ai6.prototype.TimeBufferType = Float32Array;
Ai6.prototype.ValueBufferType = Float32Array;
Ai6.prototype.DefaultInterpolation = Mn5;
var Nn4 = class extends Ai6 {
};
Nn4.prototype.ValueTypeName = "bool";
Nn4.prototype.ValueBufferType = Array;
Nn4.prototype.DefaultInterpolation = Qn5;
Nn4.prototype.InterpolantFactoryMethodLinear = void 0;
Nn4.prototype.InterpolantFactoryMethodSmooth = void 0;
var Ih2 = class extends Ai6 {
};
Ih2.prototype.ValueTypeName = "color";
var ts3 = class extends Ai6 {
};
ts3.prototype.ValueTypeName = "number";
var R02 = class extends os3 {
  constructor(e11, t19, i27, r24) {
    super(e11, t19, i27, r24);
  }
  interpolate_(e11, t19, i27, r24) {
    const n33 = this.resultBuffer, a22 = this.sampleValues, o13 = this.valueSize, l26 = (i27 - t19) / (r24 - t19);
    let c27 = e11 * o13;
    for (let h26 = c27 + o13; c27 !== h26; c27 += 4)
      jt8.slerpFlat(n33, 0, a22, c27 - o13, a22, c27, l26);
    return n33;
  }
};
var ir5 = class extends Ai6 {
  InterpolantFactoryMethodLinear(e11) {
    return new R02(this.times, this.values, this.getValueSize(), e11);
  }
};
ir5.prototype.ValueTypeName = "quaternion";
ir5.prototype.DefaultInterpolation = Mn5;
ir5.prototype.InterpolantFactoryMethodSmooth = void 0;
var Pn5 = class extends Ai6 {
};
Pn5.prototype.ValueTypeName = "string";
Pn5.prototype.ValueBufferType = Array;
Pn5.prototype.DefaultInterpolation = Qn5;
Pn5.prototype.InterpolantFactoryMethodLinear = void 0;
Pn5.prototype.InterpolantFactoryMethodSmooth = void 0;
var Sr5 = class extends Ai6 {
};
Sr5.prototype.ValueTypeName = "vector";
var bo = class {
  constructor(e11, t19 = -1, i27, r24 = Zu) {
    this.name = e11, this.tracks = i27, this.duration = t19, this.blendMode = r24, this.uuid = bi6(), this.duration < 0 && this.resetDuration();
  }
  static parse(e11) {
    const t19 = [], i27 = e11.tracks, r24 = 1 / (e11.fps || 1);
    for (let a22 = 0, o13 = i27.length; a22 !== o13; ++a22)
      t19.push(P02(i27[a22]).scale(r24));
    const n33 = new this(e11.name, e11.duration, t19, e11.blendMode);
    return n33.uuid = e11.uuid, n33;
  }
  static toJSON(e11) {
    const t19 = [], i27 = e11.tracks, r24 = {
      name: e11.name,
      duration: e11.duration,
      tracks: t19,
      uuid: e11.uuid,
      blendMode: e11.blendMode
    };
    for (let n33 = 0, a22 = i27.length; n33 !== a22; ++n33)
      t19.push(Ai6.toJSON(i27[n33]));
    return r24;
  }
  static CreateFromMorphTargetSequence(e11, t19, i27, r24) {
    const n33 = t19.length, a22 = [];
    for (let o13 = 0; o13 < n33; o13++) {
      let l26 = [], c27 = [];
      l26.push(
        (o13 + n33 - 1) % n33,
        o13,
        (o13 + 1) % n33
      ), c27.push(0, 1, 0);
      const h26 = E02(l26);
      l26 = Nc2(l26, 1, h26), c27 = Nc2(c27, 1, h26), !r24 && l26[0] === 0 && (l26.push(n33), c27.push(c27[0])), a22.push(
        new ts3(
          ".morphTargetInfluences[" + t19[o13].name + "]",
          l26,
          c27
        ).scale(1 / i27)
      );
    }
    return new this(e11, -1, a22);
  }
  static findByName(e11, t19) {
    let i27 = e11;
    if (!Array.isArray(e11)) {
      const r24 = e11;
      i27 = r24.geometry && r24.geometry.animations || r24.animations;
    }
    for (let r24 = 0; r24 < i27.length; r24++)
      if (i27[r24].name === t19)
        return i27[r24];
    return null;
  }
  static CreateClipsFromMorphTargetSequences(e11, t19, i27) {
    const r24 = {}, n33 = /^([\w-]*?)([\d]+)$/;
    for (let o13 = 0, l26 = e11.length; o13 < l26; o13++) {
      const c27 = e11[o13], h26 = c27.name.match(n33);
      if (h26 && h26.length > 1) {
        const u35 = h26[1];
        let d34 = r24[u35];
        d34 || (r24[u35] = d34 = []), d34.push(c27);
      }
    }
    const a22 = [];
    for (const o13 in r24)
      a22.push(this.CreateFromMorphTargetSequence(o13, r24[o13], t19, i27));
    return a22;
  }
  // parse the animation.hierarchy format
  static parseAnimation(e11, t19) {
    if (!e11)
      return console.error("THREE.AnimationClip: No animation in JSONLoader data."), null;
    const i27 = function(h26, u35, d34, m34, _21) {
      if (d34.length !== 0) {
        const y34 = [], f40 = [];
        Ph2(d34, y34, f40, m34), y34.length !== 0 && _21.push(new h26(u35, y34, f40));
      }
    }, r24 = [], n33 = e11.name || "default", a22 = e11.fps || 30, o13 = e11.blendMode;
    let l26 = e11.length || -1;
    const c27 = e11.hierarchy || [];
    for (let h26 = 0; h26 < c27.length; h26++) {
      const u35 = c27[h26].keys;
      if (!(!u35 || u35.length === 0))
        if (u35[0].morphTargets) {
          const d34 = {};
          let m34;
          for (m34 = 0; m34 < u35.length; m34++)
            if (u35[m34].morphTargets)
              for (let _21 = 0; _21 < u35[m34].morphTargets.length; _21++)
                d34[u35[m34].morphTargets[_21]] = -1;
          for (const _21 in d34) {
            const y34 = [], f40 = [];
            for (let p26 = 0; p26 !== u35[m34].morphTargets.length; ++p26) {
              const A18 = u35[m34];
              y34.push(A18.time), f40.push(A18.morphTarget === _21 ? 1 : 0);
            }
            r24.push(new ts3(".morphTargetInfluence[" + _21 + "]", y34, f40));
          }
          l26 = d34.length * a22;
        } else {
          const d34 = ".bones[" + t19[h26].name + "]";
          i27(
            Sr5,
            d34 + ".position",
            u35,
            "pos",
            r24
          ), i27(
            ir5,
            d34 + ".quaternion",
            u35,
            "rot",
            r24
          ), i27(
            Sr5,
            d34 + ".scale",
            u35,
            "scl",
            r24
          );
        }
    }
    return r24.length === 0 ? null : new this(n33, l26, r24, o13);
  }
  resetDuration() {
    const e11 = this.tracks;
    let t19 = 0;
    for (let i27 = 0, r24 = e11.length; i27 !== r24; ++i27) {
      const n33 = this.tracks[i27];
      t19 = Math.max(t19, n33.times[n33.times.length - 1]);
    }
    return this.duration = t19, this;
  }
  trim() {
    for (let e11 = 0; e11 < this.tracks.length; e11++)
      this.tracks[e11].trim(0, this.duration);
    return this;
  }
  validate() {
    let e11 = true;
    for (let t19 = 0; t19 < this.tracks.length; t19++)
      e11 = e11 && this.tracks[t19].validate();
    return e11;
  }
  optimize() {
    for (let e11 = 0; e11 < this.tracks.length; e11++)
      this.tracks[e11].optimize();
    return this;
  }
  clone() {
    const e11 = [];
    for (let t19 = 0; t19 < this.tracks.length; t19++)
      e11.push(this.tracks[t19].clone());
    return new this.constructor(this.name, this.duration, e11, this.blendMode);
  }
  toJSON() {
    return this.constructor.toJSON(this);
  }
};
function N02(s18) {
  switch (s18.toLowerCase()) {
    case "scalar":
    case "double":
    case "float":
    case "number":
    case "integer":
      return ts3;
    case "vector":
    case "vector2":
    case "vector3":
    case "vector4":
      return Sr5;
    case "color":
      return Ih2;
    case "quaternion":
      return ir5;
    case "bool":
    case "boolean":
      return Nn4;
    case "string":
      return Pn5;
  }
  throw new Error("THREE.KeyframeTrack: Unsupported typeName: " + s18);
}
function P02(s18) {
  if (s18.type === void 0)
    throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");
  const e11 = N02(s18.type);
  if (s18.times === void 0) {
    const t19 = [], i27 = [];
    Ph2(s18.keys, t19, i27, "value"), s18.times = t19, s18.values = i27;
  }
  return e11.parse !== void 0 ? e11.parse(s18) : new e11(s18.name, s18.times, s18.values, s18.interpolation);
}
var En5 = {
  enabled: false,
  files: {},
  add: function(s18, e11) {
    this.enabled !== false && (this.files[s18] = e11);
  },
  get: function(s18) {
    if (this.enabled !== false)
      return this.files[s18];
  },
  remove: function(s18) {
    delete this.files[s18];
  },
  clear: function() {
    this.files = {};
  }
};
var Fo2 = class {
  constructor(e11, t19, i27) {
    const r24 = this;
    let n33 = false, a22 = 0, o13 = 0, l26;
    const c27 = [];
    this.onStart = void 0, this.onLoad = e11, this.onProgress = t19, this.onError = i27, this.itemStart = function(h26) {
      o13++, n33 === false && r24.onStart !== void 0 && r24.onStart(h26, a22, o13), n33 = true;
    }, this.itemEnd = function(h26) {
      a22++, r24.onProgress !== void 0 && r24.onProgress(h26, a22, o13), a22 === o13 && (n33 = false, r24.onLoad !== void 0 && r24.onLoad());
    }, this.itemError = function(h26) {
      r24.onError !== void 0 && r24.onError(h26);
    }, this.resolveURL = function(h26) {
      return l26 ? l26(h26) : h26;
    }, this.setURLModifier = function(h26) {
      return l26 = h26, this;
    }, this.addHandler = function(h26, u35) {
      return c27.push(h26, u35), this;
    }, this.removeHandler = function(h26) {
      const u35 = c27.indexOf(h26);
      return u35 !== -1 && c27.splice(u35, 2), this;
    }, this.getHandler = function(h26) {
      for (let u35 = 0, d34 = c27.length; u35 < d34; u35 += 2) {
        const m34 = c27[u35], _21 = c27[u35 + 1];
        if (m34.global && (m34.lastIndex = 0), m34.test(h26))
          return _21;
      }
      return null;
    };
  }
};
var Dh2 = new Fo2();
var rr5 = class {
  constructor(e11) {
    this.manager = e11 !== void 0 ? e11 : Dh2, this.crossOrigin = "anonymous", this.withCredentials = false, this.path = "", this.resourcePath = "", this.requestHeader = {};
  }
  load() {
  }
  loadAsync(e11, t19) {
    const i27 = this;
    return new Promise(function(r24, n33) {
      i27.load(e11, r24, t19, n33);
    });
  }
  parse() {
  }
  setCrossOrigin(e11) {
    return this.crossOrigin = e11, this;
  }
  setWithCredentials(e11) {
    return this.withCredentials = e11, this;
  }
  setPath(e11) {
    return this.path = e11, this;
  }
  setResourcePath(e11) {
    return this.resourcePath = e11, this;
  }
  setRequestHeader(e11) {
    return this.requestHeader = e11, this;
  }
};
var Oi4 = {};
var I02 = class extends Error {
  constructor(e11, t19) {
    super(e11), this.response = t19;
  }
};
var ls3 = class extends rr5 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, i27, r24) {
    e11 === void 0 && (e11 = ""), this.path !== void 0 && (e11 = this.path + e11), e11 = this.manager.resolveURL(e11);
    const n33 = En5.get(e11);
    if (n33 !== void 0)
      return this.manager.itemStart(e11), setTimeout(() => {
        t19 && t19(n33), this.manager.itemEnd(e11);
      }, 0), n33;
    if (Oi4[e11] !== void 0) {
      Oi4[e11].push({
        onLoad: t19,
        onProgress: i27,
        onError: r24
      });
      return;
    }
    Oi4[e11] = [], Oi4[e11].push({
      onLoad: t19,
      onProgress: i27,
      onError: r24
    });
    const a22 = new Request(e11, {
      headers: new Headers(this.requestHeader),
      credentials: this.withCredentials ? "include" : "same-origin"
      // An abort controller could be added within a future PR
    }), o13 = this.mimeType, l26 = this.responseType;
    fetch(a22).then((c27) => {
      if (c27.status === 200 || c27.status === 0) {
        if (c27.status === 0 && console.warn("THREE.FileLoader: HTTP Status 0 received."), typeof ReadableStream > "u" || c27.body === void 0 || c27.body.getReader === void 0)
          return c27;
        const h26 = Oi4[e11], u35 = c27.body.getReader(), d34 = c27.headers.get("Content-Length") || c27.headers.get("X-File-Size"), m34 = d34 ? parseInt(d34) : 0, _21 = m34 !== 0;
        let y34 = 0;
        const f40 = new ReadableStream({
          start(p26) {
            A18();
            function A18() {
              u35.read().then(({ done: M13, value: E25 }) => {
                if (M13)
                  p26.close();
                else {
                  y34 += E25.byteLength;
                  const w31 = new ProgressEvent("progress", { lengthComputable: _21, loaded: y34, total: m34 });
                  for (let I18 = 0, D18 = h26.length; I18 < D18; I18++) {
                    const P20 = h26[I18];
                    P20.onProgress && P20.onProgress(w31);
                  }
                  p26.enqueue(E25), A18();
                }
              });
            }
          }
        });
        return new Response(f40);
      } else
        throw new I02(`fetch for "${c27.url}" responded with ${c27.status}: ${c27.statusText}`, c27);
    }).then((c27) => {
      switch (l26) {
        case "arraybuffer":
          return c27.arrayBuffer();
        case "blob":
          return c27.blob();
        case "document":
          return c27.text().then((h26) => new DOMParser().parseFromString(h26, o13));
        case "json":
          return c27.json();
        default:
          if (o13 === void 0)
            return c27.text();
          {
            const h26 = /charset="?([^;"\s]*)"?/i.exec(o13), u35 = h26 && h26[1] ? h26[1].toLowerCase() : void 0, d34 = new TextDecoder(u35);
            return c27.arrayBuffer().then((m34) => d34.decode(m34));
          }
      }
    }).then((c27) => {
      En5.add(e11, c27);
      const h26 = Oi4[e11];
      delete Oi4[e11];
      for (let u35 = 0, d34 = h26.length; u35 < d34; u35++) {
        const m34 = h26[u35];
        m34.onLoad && m34.onLoad(c27);
      }
    }).catch((c27) => {
      const h26 = Oi4[e11];
      if (h26 === void 0)
        throw this.manager.itemError(e11), c27;
      delete Oi4[e11];
      for (let u35 = 0, d34 = h26.length; u35 < d34; u35++) {
        const m34 = h26[u35];
        m34.onError && m34.onError(c27);
      }
      this.manager.itemError(e11);
    }).finally(() => {
      this.manager.itemEnd(e11);
    }), this.manager.itemStart(e11);
  }
  setResponseType(e11) {
    return this.responseType = e11, this;
  }
  setMimeType(e11) {
    return this.mimeType = e11, this;
  }
};
var D02 = class extends rr5 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, i27, r24) {
    this.path !== void 0 && (e11 = this.path + e11), e11 = this.manager.resolveURL(e11);
    const n33 = this, a22 = En5.get(e11);
    if (a22 !== void 0)
      return n33.manager.itemStart(e11), setTimeout(function() {
        t19 && t19(a22), n33.manager.itemEnd(e11);
      }, 0), a22;
    const o13 = es3("img");
    function l26() {
      h26(), En5.add(e11, this), t19 && t19(this), n33.manager.itemEnd(e11);
    }
    function c27(u35) {
      h26(), r24 && r24(u35), n33.manager.itemError(e11), n33.manager.itemEnd(e11);
    }
    function h26() {
      o13.removeEventListener("load", l26, false), o13.removeEventListener("error", c27, false);
    }
    return o13.addEventListener("load", l26, false), o13.addEventListener("error", c27, false), e11.slice(0, 5) !== "data:" && this.crossOrigin !== void 0 && (o13.crossOrigin = this.crossOrigin), n33.manager.itemStart(e11), o13.src = e11, o13;
  }
};
var k02 = class extends rr5 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, i27, r24) {
    const n33 = this, a22 = new Ch2(), o13 = new ls3(this.manager);
    return o13.setResponseType("arraybuffer"), o13.setRequestHeader(this.requestHeader), o13.setPath(this.path), o13.setWithCredentials(n33.withCredentials), o13.load(e11, function(l26) {
      const c27 = n33.parse(l26);
      c27 && (c27.image !== void 0 ? a22.image = c27.image : c27.data !== void 0 && (a22.image.width = c27.width, a22.image.height = c27.height, a22.image.data = c27.data), a22.wrapS = c27.wrapS !== void 0 ? c27.wrapS : Zt6, a22.wrapT = c27.wrapT !== void 0 ? c27.wrapT : Zt6, a22.magFilter = c27.magFilter !== void 0 ? c27.magFilter : Vt6, a22.minFilter = c27.minFilter !== void 0 ? c27.minFilter : Vt6, a22.anisotropy = c27.anisotropy !== void 0 ? c27.anisotropy : 1, c27.encoding !== void 0 && (a22.encoding = c27.encoding), c27.flipY !== void 0 && (a22.flipY = c27.flipY), c27.format !== void 0 && (a22.format = c27.format), c27.type !== void 0 && (a22.type = c27.type), c27.mipmaps !== void 0 && (a22.mipmaps = c27.mipmaps, a22.minFilter = Hi3), c27.mipmapCount === 1 && (a22.minFilter = Vt6), c27.generateMipmaps !== void 0 && (a22.generateMipmaps = c27.generateMipmaps), a22.needsUpdate = true, t19 && t19(a22, c27));
    }, i27, r24), a22;
  }
};
var Ho2 = class extends rr5 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, i27, r24) {
    const n33 = new Wt7(), a22 = new D02(this.manager);
    return a22.setCrossOrigin(this.crossOrigin), a22.setPath(this.path), a22.load(e11, function(o13) {
      n33.image = o13, n33.needsUpdate = true, t19 !== void 0 && t19(n33);
    }, i27, r24), n33;
  }
};
var cs2 = class extends _t8 {
  constructor(e11, t19 = 1) {
    super(), this.isLight = true, this.type = "Light", this.color = new ze7(e11), this.intensity = t19;
  }
  dispose() {
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.color.copy(e11.color), this.intensity = e11.intensity, this;
  }
  toJSON(e11) {
    const t19 = super.toJSON(e11);
    return t19.object.color = this.color.getHex(), t19.object.intensity = this.intensity, this.groundColor !== void 0 && (t19.object.groundColor = this.groundColor.getHex()), this.distance !== void 0 && (t19.object.distance = this.distance), this.angle !== void 0 && (t19.object.angle = this.angle), this.decay !== void 0 && (t19.object.decay = this.decay), this.penumbra !== void 0 && (t19.object.penumbra = this.penumbra), this.shadow !== void 0 && (t19.object.shadow = this.shadow.toJSON()), t19;
  }
};
var kh2 = class extends cs2 {
  constructor(e11, t19, i27) {
    super(e11, i27), this.isHemisphereLight = true, this.type = "HemisphereLight", this.position.copy(_t8.DEFAULT_UP), this.updateMatrix(), this.groundColor = new ze7(t19);
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.groundColor.copy(e11.groundColor), this;
  }
};
var $a2 = new He6();
var Pc2 = new k20();
var Ic2 = new k20();
var Vo2 = class {
  constructor(e11) {
    this.camera = e11, this.bias = 0, this.normalBias = 0, this.radius = 1, this.blurSamples = 8, this.mapSize = new We7(512, 512), this.map = null, this.mapPass = null, this.matrix = new He6(), this.autoUpdate = true, this.needsUpdate = false, this._frustum = new Po2(), this._frameExtents = new We7(1, 1), this._viewportCount = 1, this._viewports = [
      new gt12(0, 0, 1, 1)
    ];
  }
  getViewportCount() {
    return this._viewportCount;
  }
  getFrustum() {
    return this._frustum;
  }
  updateMatrices(e11) {
    const t19 = this.camera, i27 = this.matrix;
    Pc2.setFromMatrixPosition(e11.matrixWorld), t19.position.copy(Pc2), Ic2.setFromMatrixPosition(e11.target.matrixWorld), t19.lookAt(Ic2), t19.updateMatrixWorld(), $a2.multiplyMatrices(t19.projectionMatrix, t19.matrixWorldInverse), this._frustum.setFromProjectionMatrix($a2), i27.set(
      0.5,
      0,
      0,
      0.5,
      0,
      0.5,
      0,
      0.5,
      0,
      0,
      0.5,
      0.5,
      0,
      0,
      0,
      1
    ), i27.multiply($a2);
  }
  getViewport(e11) {
    return this._viewports[e11];
  }
  getFrameExtents() {
    return this._frameExtents;
  }
  dispose() {
    this.map && this.map.dispose(), this.mapPass && this.mapPass.dispose();
  }
  copy(e11) {
    return this.camera = e11.camera.clone(), this.bias = e11.bias, this.radius = e11.radius, this.mapSize.copy(e11.mapSize), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
  toJSON() {
    const e11 = {};
    return this.bias !== 0 && (e11.bias = this.bias), this.normalBias !== 0 && (e11.normalBias = this.normalBias), this.radius !== 1 && (e11.radius = this.radius), (this.mapSize.x !== 512 || this.mapSize.y !== 512) && (e11.mapSize = this.mapSize.toArray()), e11.camera = this.camera.toJSON(false).object, delete e11.camera.matrix, e11;
  }
};
var U02 = class extends Vo2 {
  constructor() {
    super(new Bt6(50, 1, 0.5, 500)), this.isSpotLightShadow = true, this.focus = 1;
  }
  updateMatrices(e11) {
    const t19 = this.camera, i27 = wn5 * 2 * e11.angle * this.focus, r24 = this.mapSize.width / this.mapSize.height, n33 = e11.distance || t19.far;
    (i27 !== t19.fov || r24 !== t19.aspect || n33 !== t19.far) && (t19.fov = i27, t19.aspect = r24, t19.far = n33, t19.updateProjectionMatrix()), super.updateMatrices(e11);
  }
  copy(e11) {
    return super.copy(e11), this.focus = e11.focus, this;
  }
};
var Uh2 = class extends cs2 {
  constructor(e11, t19, i27 = 0, r24 = Math.PI / 3, n33 = 0, a22 = 2) {
    super(e11, t19), this.isSpotLight = true, this.type = "SpotLight", this.position.copy(_t8.DEFAULT_UP), this.updateMatrix(), this.target = new _t8(), this.distance = i27, this.angle = r24, this.penumbra = n33, this.decay = a22, this.map = null, this.shadow = new U02();
  }
  get power() {
    return this.intensity * Math.PI;
  }
  set power(e11) {
    this.intensity = e11 / Math.PI;
  }
  dispose() {
    this.shadow.dispose();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.distance = e11.distance, this.angle = e11.angle, this.penumbra = e11.penumbra, this.decay = e11.decay, this.target = e11.target.clone(), this.shadow = e11.shadow.clone(), this;
  }
};
var Dc2 = new He6();
var Vn5 = new k20();
var Qa = new k20();
var O02 = class extends Vo2 {
  constructor() {
    super(new Bt6(90, 1, 0.5, 500)), this.isPointLightShadow = true, this._frameExtents = new We7(4, 2), this._viewportCount = 6, this._viewports = [
      // These viewports map a cube-map onto a 2D texture with the
      // following orientation:
      //
      //  xzXZ
      //   y Y
      //
      // X - Positive x direction
      // x - Negative x direction
      // Y - Positive y direction
      // y - Negative y direction
      // Z - Positive z direction
      // z - Negative z direction
      // positive X
      new gt12(2, 1, 1, 1),
      // negative X
      new gt12(0, 1, 1, 1),
      // positive Z
      new gt12(3, 1, 1, 1),
      // negative Z
      new gt12(1, 1, 1, 1),
      // positive Y
      new gt12(3, 0, 1, 1),
      // negative Y
      new gt12(1, 0, 1, 1)
    ], this._cubeDirections = [
      new k20(1, 0, 0),
      new k20(-1, 0, 0),
      new k20(0, 0, 1),
      new k20(0, 0, -1),
      new k20(0, 1, 0),
      new k20(0, -1, 0)
    ], this._cubeUps = [
      new k20(0, 1, 0),
      new k20(0, 1, 0),
      new k20(0, 1, 0),
      new k20(0, 1, 0),
      new k20(0, 0, 1),
      new k20(0, 0, -1)
    ];
  }
  updateMatrices(e11, t19 = 0) {
    const i27 = this.camera, r24 = this.matrix, n33 = e11.distance || i27.far;
    n33 !== i27.far && (i27.far = n33, i27.updateProjectionMatrix()), Vn5.setFromMatrixPosition(e11.matrixWorld), i27.position.copy(Vn5), Qa.copy(i27.position), Qa.add(this._cubeDirections[t19]), i27.up.copy(this._cubeUps[t19]), i27.lookAt(Qa), i27.updateMatrixWorld(), r24.makeTranslation(-Vn5.x, -Vn5.y, -Vn5.z), Dc2.multiplyMatrices(i27.projectionMatrix, i27.matrixWorldInverse), this._frustum.setFromProjectionMatrix(Dc2);
  }
};
var da2 = class extends cs2 {
  constructor(e11, t19, i27 = 0, r24 = 2) {
    super(e11, t19), this.isPointLight = true, this.type = "PointLight", this.distance = i27, this.decay = r24, this.shadow = new O02();
  }
  get power() {
    return this.intensity * 4 * Math.PI;
  }
  set power(e11) {
    this.intensity = e11 / (4 * Math.PI);
  }
  dispose() {
    this.shadow.dispose();
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.distance = e11.distance, this.decay = e11.decay, this.shadow = e11.shadow.clone(), this;
  }
};
var z02 = class extends Vo2 {
  constructor() {
    super(new la2(-5, 5, 5, -5, 0.5, 500)), this.isDirectionalLightShadow = true;
  }
};
var Oh2 = class extends cs2 {
  constructor(e11, t19) {
    super(e11, t19), this.isDirectionalLight = true, this.type = "DirectionalLight", this.position.copy(_t8.DEFAULT_UP), this.updateMatrix(), this.target = new _t8(), this.shadow = new z02();
  }
  dispose() {
    this.shadow.dispose();
  }
  copy(e11) {
    return super.copy(e11), this.target = e11.target.clone(), this.shadow = e11.shadow.clone(), this;
  }
};
var B02 = class extends cs2 {
  constructor(e11, t19) {
    super(e11, t19), this.isAmbientLight = true, this.type = "AmbientLight";
  }
};
var is3 = class {
  static decodeText(e11) {
    if (typeof TextDecoder < "u")
      return new TextDecoder().decode(e11);
    let t19 = "";
    for (let i27 = 0, r24 = e11.length; i27 < r24; i27++)
      t19 += String.fromCharCode(e11[i27]);
    try {
      return decodeURIComponent(escape(t19));
    } catch {
      return t19;
    }
  }
  static extractUrlBase(e11) {
    const t19 = e11.lastIndexOf("/");
    return t19 === -1 ? "./" : e11.slice(0, t19 + 1);
  }
  static resolveURL(e11, t19) {
    return typeof e11 != "string" || e11 === "" ? "" : (/^https?:\/\//i.test(t19) && /^\//.test(e11) && (t19 = t19.replace(/(^https?:\/\/[^\/]+).*/i, "$1")), /^(https?:)?\/\//i.test(e11) || /^data:.*,.*$/i.test(e11) || /^blob:.*$/i.test(e11) ? e11 : t19 + e11);
  }
};
var F02 = class extends rr5 {
  constructor(e11) {
    super(e11), this.isImageBitmapLoader = true, typeof createImageBitmap > "u" && console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."), typeof fetch > "u" && console.warn("THREE.ImageBitmapLoader: fetch() not supported."), this.options = { premultiplyAlpha: "none" };
  }
  setOptions(e11) {
    return this.options = e11, this;
  }
  load(e11, t19, i27, r24) {
    e11 === void 0 && (e11 = ""), this.path !== void 0 && (e11 = this.path + e11), e11 = this.manager.resolveURL(e11);
    const n33 = this, a22 = En5.get(e11);
    if (a22 !== void 0)
      return n33.manager.itemStart(e11), setTimeout(function() {
        t19 && t19(a22), n33.manager.itemEnd(e11);
      }, 0), a22;
    const o13 = {};
    o13.credentials = this.crossOrigin === "anonymous" ? "same-origin" : "include", o13.headers = this.requestHeader, fetch(e11, o13).then(function(l26) {
      return l26.blob();
    }).then(function(l26) {
      return createImageBitmap(l26, Object.assign(n33.options, { colorSpaceConversion: "none" }));
    }).then(function(l26) {
      En5.add(e11, l26), t19 && t19(l26), n33.manager.itemEnd(e11);
    }).catch(function(l26) {
      r24 && r24(l26), n33.manager.itemError(e11), n33.manager.itemEnd(e11);
    }), n33.manager.itemStart(e11);
  }
};
var Go2 = "\\[\\]\\.:\\/";
var H02 = new RegExp("[" + Go2 + "]", "g");
var Wo2 = "[^" + Go2 + "]";
var V02 = "[^" + Go2.replace("\\.", "") + "]";
var G02 = /((?:WC+[\/:])*)/.source.replace("WC", Wo2);
var W02 = /(WCOD+)?/.source.replace("WCOD", V02);
var j02 = /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC", Wo2);
var X02 = /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", Wo2);
var q02 = new RegExp(
  "^" + G02 + W02 + j02 + X02 + "$"
);
var Y02 = ["material", "materials", "bones", "map"];
var Z02 = class {
  constructor(e11, t19, i27) {
    const r24 = i27 || ht14.parseTrackName(t19);
    this._targetGroup = e11, this._bindings = e11.subscribe_(t19, r24);
  }
  getValue(e11, t19) {
    this.bind();
    const i27 = this._targetGroup.nCachedObjects_, r24 = this._bindings[i27];
    r24 !== void 0 && r24.getValue(e11, t19);
  }
  setValue(e11, t19) {
    const i27 = this._bindings;
    for (let r24 = this._targetGroup.nCachedObjects_, n33 = i27.length; r24 !== n33; ++r24)
      i27[r24].setValue(e11, t19);
  }
  bind() {
    const e11 = this._bindings;
    for (let t19 = this._targetGroup.nCachedObjects_, i27 = e11.length; t19 !== i27; ++t19)
      e11[t19].bind();
  }
  unbind() {
    const e11 = this._bindings;
    for (let t19 = this._targetGroup.nCachedObjects_, i27 = e11.length; t19 !== i27; ++t19)
      e11[t19].unbind();
  }
};
var ht14 = class _ht {
  constructor(e11, t19, i27) {
    this.path = t19, this.parsedPath = i27 || _ht.parseTrackName(t19), this.node = _ht.findNode(e11, this.parsedPath.nodeName), this.rootNode = e11, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound;
  }
  static create(e11, t19, i27) {
    return e11 && e11.isAnimationObjectGroup ? new _ht.Composite(e11, t19, i27) : new _ht(e11, t19, i27);
  }
  /**
   * Replaces spaces with underscores and removes unsupported characters from
   * node names, to ensure compatibility with parseTrackName().
   *
   * @param {string} name Node name to be sanitized.
   * @return {string}
   */
  static sanitizeNodeName(e11) {
    return e11.replace(/\s/g, "_").replace(H02, "");
  }
  static parseTrackName(e11) {
    const t19 = q02.exec(e11);
    if (t19 === null)
      throw new Error("PropertyBinding: Cannot parse trackName: " + e11);
    const i27 = {
      // directoryName: matches[ 1 ], // (tschw) currently unused
      nodeName: t19[2],
      objectName: t19[3],
      objectIndex: t19[4],
      propertyName: t19[5],
      // required
      propertyIndex: t19[6]
    }, r24 = i27.nodeName && i27.nodeName.lastIndexOf(".");
    if (r24 !== void 0 && r24 !== -1) {
      const n33 = i27.nodeName.substring(r24 + 1);
      Y02.indexOf(n33) !== -1 && (i27.nodeName = i27.nodeName.substring(0, r24), i27.objectName = n33);
    }
    if (i27.propertyName === null || i27.propertyName.length === 0)
      throw new Error("PropertyBinding: can not parse propertyName from trackName: " + e11);
    return i27;
  }
  static findNode(e11, t19) {
    if (t19 === void 0 || t19 === "" || t19 === "." || t19 === -1 || t19 === e11.name || t19 === e11.uuid)
      return e11;
    if (e11.skeleton) {
      const i27 = e11.skeleton.getBoneByName(t19);
      if (i27 !== void 0)
        return i27;
    }
    if (e11.children) {
      const i27 = function(n33) {
        for (let a22 = 0; a22 < n33.length; a22++) {
          const o13 = n33[a22];
          if (o13.name === t19 || o13.uuid === t19)
            return o13;
          const l26 = i27(o13.children);
          if (l26)
            return l26;
        }
        return null;
      }, r24 = i27(e11.children);
      if (r24)
        return r24;
    }
    return null;
  }
  // these are used to "bind" a nonexistent property
  _getValue_unavailable() {
  }
  _setValue_unavailable() {
  }
  // Getters
  _getValue_direct(e11, t19) {
    e11[t19] = this.targetObject[this.propertyName];
  }
  _getValue_array(e11, t19) {
    const i27 = this.resolvedProperty;
    for (let r24 = 0, n33 = i27.length; r24 !== n33; ++r24)
      e11[t19++] = i27[r24];
  }
  _getValue_arrayElement(e11, t19) {
    e11[t19] = this.resolvedProperty[this.propertyIndex];
  }
  _getValue_toArray(e11, t19) {
    this.resolvedProperty.toArray(e11, t19);
  }
  // Direct
  _setValue_direct(e11, t19) {
    this.targetObject[this.propertyName] = e11[t19];
  }
  _setValue_direct_setNeedsUpdate(e11, t19) {
    this.targetObject[this.propertyName] = e11[t19], this.targetObject.needsUpdate = true;
  }
  _setValue_direct_setMatrixWorldNeedsUpdate(e11, t19) {
    this.targetObject[this.propertyName] = e11[t19], this.targetObject.matrixWorldNeedsUpdate = true;
  }
  // EntireArray
  _setValue_array(e11, t19) {
    const i27 = this.resolvedProperty;
    for (let r24 = 0, n33 = i27.length; r24 !== n33; ++r24)
      i27[r24] = e11[t19++];
  }
  _setValue_array_setNeedsUpdate(e11, t19) {
    const i27 = this.resolvedProperty;
    for (let r24 = 0, n33 = i27.length; r24 !== n33; ++r24)
      i27[r24] = e11[t19++];
    this.targetObject.needsUpdate = true;
  }
  _setValue_array_setMatrixWorldNeedsUpdate(e11, t19) {
    const i27 = this.resolvedProperty;
    for (let r24 = 0, n33 = i27.length; r24 !== n33; ++r24)
      i27[r24] = e11[t19++];
    this.targetObject.matrixWorldNeedsUpdate = true;
  }
  // ArrayElement
  _setValue_arrayElement(e11, t19) {
    this.resolvedProperty[this.propertyIndex] = e11[t19];
  }
  _setValue_arrayElement_setNeedsUpdate(e11, t19) {
    this.resolvedProperty[this.propertyIndex] = e11[t19], this.targetObject.needsUpdate = true;
  }
  _setValue_arrayElement_setMatrixWorldNeedsUpdate(e11, t19) {
    this.resolvedProperty[this.propertyIndex] = e11[t19], this.targetObject.matrixWorldNeedsUpdate = true;
  }
  // HasToFromArray
  _setValue_fromArray(e11, t19) {
    this.resolvedProperty.fromArray(e11, t19);
  }
  _setValue_fromArray_setNeedsUpdate(e11, t19) {
    this.resolvedProperty.fromArray(e11, t19), this.targetObject.needsUpdate = true;
  }
  _setValue_fromArray_setMatrixWorldNeedsUpdate(e11, t19) {
    this.resolvedProperty.fromArray(e11, t19), this.targetObject.matrixWorldNeedsUpdate = true;
  }
  _getValue_unbound(e11, t19) {
    this.bind(), this.getValue(e11, t19);
  }
  _setValue_unbound(e11, t19) {
    this.bind(), this.setValue(e11, t19);
  }
  // create getter / setter pair for a property in the scene graph
  bind() {
    let e11 = this.node;
    const t19 = this.parsedPath, i27 = t19.objectName, r24 = t19.propertyName;
    let n33 = t19.propertyIndex;
    if (e11 || (e11 = _ht.findNode(this.rootNode, t19.nodeName), this.node = e11), this.getValue = this._getValue_unavailable, this.setValue = this._setValue_unavailable, !e11) {
      console.error("THREE.PropertyBinding: Trying to update node for track: " + this.path + " but it wasn't found.");
      return;
    }
    if (i27) {
      let c27 = t19.objectIndex;
      switch (i27) {
        case "materials":
          if (!e11.material) {
            console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this);
            return;
          }
          if (!e11.material.materials) {
            console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.", this);
            return;
          }
          e11 = e11.material.materials;
          break;
        case "bones":
          if (!e11.skeleton) {
            console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.", this);
            return;
          }
          e11 = e11.skeleton.bones;
          for (let h26 = 0; h26 < e11.length; h26++)
            if (e11[h26].name === c27) {
              c27 = h26;
              break;
            }
          break;
        case "map":
          if ("map" in e11) {
            e11 = e11.map;
            break;
          }
          if (!e11.material) {
            console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this);
            return;
          }
          if (!e11.material.map) {
            console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.", this);
            return;
          }
          e11 = e11.material.map;
          break;
        default:
          if (e11[i27] === void 0) {
            console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.", this);
            return;
          }
          e11 = e11[i27];
      }
      if (c27 !== void 0) {
        if (e11[c27] === void 0) {
          console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.", this, e11);
          return;
        }
        e11 = e11[c27];
      }
    }
    const a22 = e11[r24];
    if (a22 === void 0) {
      const c27 = t19.nodeName;
      console.error("THREE.PropertyBinding: Trying to update property for track: " + c27 + "." + r24 + " but it wasn't found.", e11);
      return;
    }
    let o13 = this.Versioning.None;
    this.targetObject = e11, e11.needsUpdate !== void 0 ? o13 = this.Versioning.NeedsUpdate : e11.matrixWorldNeedsUpdate !== void 0 && (o13 = this.Versioning.MatrixWorldNeedsUpdate);
    let l26 = this.BindingType.Direct;
    if (n33 !== void 0) {
      if (r24 === "morphTargetInfluences") {
        if (!e11.geometry) {
          console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.", this);
          return;
        }
        if (!e11.geometry.morphAttributes) {
          console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.", this);
          return;
        }
        e11.morphTargetDictionary[n33] !== void 0 && (n33 = e11.morphTargetDictionary[n33]);
      }
      l26 = this.BindingType.ArrayElement, this.resolvedProperty = a22, this.propertyIndex = n33;
    } else
      a22.fromArray !== void 0 && a22.toArray !== void 0 ? (l26 = this.BindingType.HasFromToArray, this.resolvedProperty = a22) : Array.isArray(a22) ? (l26 = this.BindingType.EntireArray, this.resolvedProperty = a22) : this.propertyName = r24;
    this.getValue = this.GetterByBindingType[l26], this.setValue = this.SetterByBindingTypeAndVersioning[l26][o13];
  }
  unbind() {
    this.node = null, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound;
  }
};
ht14.Composite = Z02;
ht14.prototype.BindingType = {
  Direct: 0,
  EntireArray: 1,
  ArrayElement: 2,
  HasFromToArray: 3
};
ht14.prototype.Versioning = {
  None: 0,
  NeedsUpdate: 1,
  MatrixWorldNeedsUpdate: 2
};
ht14.prototype.GetterByBindingType = [
  ht14.prototype._getValue_direct,
  ht14.prototype._getValue_array,
  ht14.prototype._getValue_arrayElement,
  ht14.prototype._getValue_toArray
];
ht14.prototype.SetterByBindingTypeAndVersioning = [
  [
    // Direct
    ht14.prototype._setValue_direct,
    ht14.prototype._setValue_direct_setNeedsUpdate,
    ht14.prototype._setValue_direct_setMatrixWorldNeedsUpdate
  ],
  [
    // EntireArray
    ht14.prototype._setValue_array,
    ht14.prototype._setValue_array_setNeedsUpdate,
    ht14.prototype._setValue_array_setMatrixWorldNeedsUpdate
  ],
  [
    // ArrayElement
    ht14.prototype._setValue_arrayElement,
    ht14.prototype._setValue_arrayElement_setNeedsUpdate,
    ht14.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate
  ],
  [
    // HasToFromArray
    ht14.prototype._setValue_fromArray,
    ht14.prototype._setValue_fromArray_setNeedsUpdate,
    ht14.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate
  ]
];
var kc2 = class {
  constructor(e11 = 1, t19 = 0, i27 = 0) {
    return this.radius = e11, this.phi = t19, this.theta = i27, this;
  }
  set(e11, t19, i27) {
    return this.radius = e11, this.phi = t19, this.theta = i27, this;
  }
  copy(e11) {
    return this.radius = e11.radius, this.phi = e11.phi, this.theta = e11.theta, this;
  }
  // restrict phi to be between EPS and PI-EPS
  makeSafe() {
    return this.phi = Math.max(1e-6, Math.min(Math.PI - 1e-6, this.phi)), this;
  }
  setFromVector3(e11) {
    return this.setFromCartesianCoords(e11.x, e11.y, e11.z);
  }
  setFromCartesianCoords(e11, t19, i27) {
    return this.radius = Math.sqrt(e11 * e11 + t19 * t19 + i27 * i27), this.radius === 0 ? (this.theta = 0, this.phi = 0) : (this.theta = Math.atan2(e11, i27), this.phi = Math.acos(Gt6(t19 / this.radius, -1, 1))), this;
  }
  clone() {
    return new this.constructor().copy(this);
  }
};
var Uc2 = new k20();
var Ws2;
var eo2;
var to2 = class extends _t8 {
  // dir is assumed to be normalized
  constructor(e11 = new k20(0, 0, 1), t19 = new k20(0, 0, 0), i27 = 1, r24 = 16776960, n33 = i27 * 0.2, a22 = n33 * 0.2) {
    super(), this.type = "ArrowHelper", Ws2 === void 0 && (Ws2 = new Xt6(), Ws2.setAttribute("position", new xt6([0, 0, 0, 0, 1, 0], 3)), eo2 = new ua2(0, 0.5, 1, 5, 1), eo2.translate(0, -0.5, 0)), this.position.copy(t19), this.line = new ss3(Ws2, new Tn4({ color: r24, toneMapped: false })), this.line.matrixAutoUpdate = false, this.add(this.line), this.cone = new Rt8(eo2, new xi6({ color: r24, toneMapped: false })), this.cone.matrixAutoUpdate = false, this.add(this.cone), this.setDirection(e11), this.setLength(i27, n33, a22);
  }
  setDirection(e11) {
    if (e11.y > 0.99999)
      this.quaternion.set(0, 0, 0, 1);
    else if (e11.y < -0.99999)
      this.quaternion.set(1, 0, 0, 0);
    else {
      Uc2.set(e11.z, 0, -e11.x).normalize();
      const t19 = Math.acos(e11.y);
      this.quaternion.setFromAxisAngle(Uc2, t19);
    }
  }
  setLength(e11, t19 = e11 * 0.2, i27 = t19 * 0.2) {
    this.line.scale.set(1, Math.max(1e-4, e11 - t19), 1), this.line.updateMatrix(), this.cone.scale.set(i27, t19, i27), this.cone.position.y = e11, this.cone.updateMatrix();
  }
  setColor(e11) {
    this.line.material.color.set(e11), this.cone.material.color.set(e11);
  }
  copy(e11) {
    return super.copy(e11, false), this.line.copy(e11.line), this.cone.copy(e11.cone), this;
  }
  dispose() {
    this.line.geometry.dispose(), this.line.material.dispose(), this.cone.geometry.dispose(), this.cone.material.dispose();
  }
};
typeof __THREE_DEVTOOLS__ < "u" && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register", { detail: {
  revision: Co2
} }));
typeof window < "u" && (window.__THREE__ ? console.warn("WARNING: Multiple instances of Three.js being imported.") : window.__THREE__ = Co2);
function Oc2(s18, e11) {
  if (e11 === Ju)
    return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."), s18;
  if (e11 === fo2 || e11 === lh2) {
    let t19 = s18.getIndex();
    if (t19 === null) {
      const a22 = [], o13 = s18.getAttribute("position");
      if (o13 !== void 0) {
        for (let l26 = 0; l26 < o13.count; l26++)
          a22.push(l26);
        s18.setIndex(a22), t19 = s18.getIndex();
      } else
        return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."), s18;
    }
    const i27 = t19.count - 2, r24 = [];
    if (e11 === fo2)
      for (let a22 = 1; a22 <= i27; a22++)
        r24.push(t19.getX(0)), r24.push(t19.getX(a22)), r24.push(t19.getX(a22 + 1));
    else
      for (let a22 = 0; a22 < i27; a22++)
        a22 % 2 === 0 ? (r24.push(t19.getX(a22)), r24.push(t19.getX(a22 + 1)), r24.push(t19.getX(a22 + 2))) : (r24.push(t19.getX(a22 + 2)), r24.push(t19.getX(a22 + 1)), r24.push(t19.getX(a22)));
    r24.length / 3 !== i27 && console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");
    const n33 = s18.clone();
    return n33.setIndex(r24), n33.clearGroups(), n33;
  } else
    return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:", e11), s18;
}
var jo2 = class extends rr5 {
  constructor(e11) {
    super(e11), this.dracoLoader = null, this.ktx2Loader = null, this.meshoptDecoder = null, this.pluginCallbacks = [], this.register(function(t19) {
      return new e_2(t19);
    }), this.register(function(t19) {
      return new o_2(t19);
    }), this.register(function(t19) {
      return new l_2(t19);
    }), this.register(function(t19) {
      return new c_2(t19);
    }), this.register(function(t19) {
      return new i_2(t19);
    }), this.register(function(t19) {
      return new r_2(t19);
    }), this.register(function(t19) {
      return new n_2(t19);
    }), this.register(function(t19) {
      return new s_2(t19);
    }), this.register(function(t19) {
      return new Q02(t19);
    }), this.register(function(t19) {
      return new a_2(t19);
    }), this.register(function(t19) {
      return new t_2(t19);
    }), this.register(function(t19) {
      return new K02(t19);
    }), this.register(function(t19) {
      return new h_2(t19);
    }), this.register(function(t19) {
      return new u_2(t19);
    });
  }
  load(e11, t19, i27, r24) {
    const n33 = this;
    let a22;
    this.resourcePath !== "" ? a22 = this.resourcePath : this.path !== "" ? a22 = this.path : a22 = is3.extractUrlBase(e11), this.manager.itemStart(e11);
    const o13 = function(c27) {
      r24 ? r24(c27) : console.error(c27), n33.manager.itemError(e11), n33.manager.itemEnd(e11);
    }, l26 = new ls3(this.manager);
    l26.setPath(this.path), l26.setResponseType("arraybuffer"), l26.setRequestHeader(this.requestHeader), l26.setWithCredentials(this.withCredentials), l26.load(e11, function(c27) {
      try {
        n33.parse(c27, a22, function(h26) {
          t19(h26), n33.manager.itemEnd(e11);
        }, o13);
      } catch (h26) {
        o13(h26);
      }
    }, i27, o13);
  }
  setDRACOLoader(e11) {
    return this.dracoLoader = e11, this;
  }
  setDDSLoader() {
    throw new Error(
      'THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".'
    );
  }
  setKTX2Loader(e11) {
    return this.ktx2Loader = e11, this;
  }
  setMeshoptDecoder(e11) {
    return this.meshoptDecoder = e11, this;
  }
  register(e11) {
    return this.pluginCallbacks.indexOf(e11) === -1 && this.pluginCallbacks.push(e11), this;
  }
  unregister(e11) {
    return this.pluginCallbacks.indexOf(e11) !== -1 && this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e11), 1), this;
  }
  parse(e11, t19, i27, r24) {
    let n33;
    const a22 = {}, o13 = {}, l26 = new TextDecoder();
    if (typeof e11 == "string")
      n33 = JSON.parse(e11);
    else if (e11 instanceof ArrayBuffer)
      if (l26.decode(new Uint8Array(e11, 0, 4)) === zh2) {
        try {
          a22[et13.KHR_BINARY_GLTF] = new d_2(e11);
        } catch (h26) {
          r24 && r24(h26);
          return;
        }
        n33 = JSON.parse(a22[et13.KHR_BINARY_GLTF].content);
      } else
        n33 = JSON.parse(l26.decode(e11));
    else
      n33 = e11;
    if (n33.asset === void 0 || n33.asset.version[0] < 2) {
      r24 && r24(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));
      return;
    }
    const c27 = new T_2(n33, {
      path: t19 || this.resourcePath || "",
      crossOrigin: this.crossOrigin,
      requestHeader: this.requestHeader,
      manager: this.manager,
      ktx2Loader: this.ktx2Loader,
      meshoptDecoder: this.meshoptDecoder
    });
    c27.fileLoader.setRequestHeader(this.requestHeader);
    for (let h26 = 0; h26 < this.pluginCallbacks.length; h26++) {
      const u35 = this.pluginCallbacks[h26](c27);
      o13[u35.name] = u35, a22[u35.name] = true;
    }
    if (n33.extensionsUsed)
      for (let h26 = 0; h26 < n33.extensionsUsed.length; ++h26) {
        const u35 = n33.extensionsUsed[h26], d34 = n33.extensionsRequired || [];
        switch (u35) {
          case et13.KHR_MATERIALS_UNLIT:
            a22[u35] = new $02();
            break;
          case et13.KHR_DRACO_MESH_COMPRESSION:
            a22[u35] = new p_2(n33, this.dracoLoader);
            break;
          case et13.KHR_TEXTURE_TRANSFORM:
            a22[u35] = new m_2();
            break;
          case et13.KHR_MESH_QUANTIZATION:
            a22[u35] = new f_2();
            break;
          default:
            d34.indexOf(u35) >= 0 && o13[u35] === void 0 && console.warn('THREE.GLTFLoader: Unknown extension "' + u35 + '".');
        }
      }
    c27.setExtensions(a22), c27.setPlugins(o13), c27.parse(i27, r24);
  }
  parseAsync(e11, t19) {
    const i27 = this;
    return new Promise(function(r24, n33) {
      i27.parse(e11, t19, r24, n33);
    });
  }
};
function J02() {
  let s18 = {};
  return {
    get: function(e11) {
      return s18[e11];
    },
    add: function(e11, t19) {
      s18[e11] = t19;
    },
    remove: function(e11) {
      delete s18[e11];
    },
    removeAll: function() {
      s18 = {};
    }
  };
}
var et13 = {
  KHR_BINARY_GLTF: "KHR_binary_glTF",
  KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression",
  KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual",
  KHR_MATERIALS_CLEARCOAT: "KHR_materials_clearcoat",
  KHR_MATERIALS_IOR: "KHR_materials_ior",
  KHR_MATERIALS_SHEEN: "KHR_materials_sheen",
  KHR_MATERIALS_SPECULAR: "KHR_materials_specular",
  KHR_MATERIALS_TRANSMISSION: "KHR_materials_transmission",
  KHR_MATERIALS_IRIDESCENCE: "KHR_materials_iridescence",
  KHR_MATERIALS_UNLIT: "KHR_materials_unlit",
  KHR_MATERIALS_VOLUME: "KHR_materials_volume",
  KHR_TEXTURE_BASISU: "KHR_texture_basisu",
  KHR_TEXTURE_TRANSFORM: "KHR_texture_transform",
  KHR_MESH_QUANTIZATION: "KHR_mesh_quantization",
  KHR_MATERIALS_EMISSIVE_STRENGTH: "KHR_materials_emissive_strength",
  EXT_TEXTURE_WEBP: "EXT_texture_webp",
  EXT_TEXTURE_AVIF: "EXT_texture_avif",
  EXT_MESHOPT_COMPRESSION: "EXT_meshopt_compression",
  EXT_MESH_GPU_INSTANCING: "EXT_mesh_gpu_instancing"
};
var K02 = class {
  constructor(e11) {
    this.parser = e11, this.name = et13.KHR_LIGHTS_PUNCTUAL, this.cache = { refs: {}, uses: {} };
  }
  _markDefs() {
    const e11 = this.parser, t19 = this.parser.json.nodes || [];
    for (let i27 = 0, r24 = t19.length; i27 < r24; i27++) {
      const n33 = t19[i27];
      n33.extensions && n33.extensions[this.name] && n33.extensions[this.name].light !== void 0 && e11._addNodeRef(this.cache, n33.extensions[this.name].light);
    }
  }
  _loadLight(e11) {
    const t19 = this.parser, i27 = "light:" + e11;
    let r24 = t19.cache.get(i27);
    if (r24)
      return r24;
    const n33 = t19.json, a22 = ((n33.extensions && n33.extensions[this.name] || {}).lights || [])[e11];
    let o13;
    const l26 = new ze7(16777215);
    a22.color !== void 0 && l26.fromArray(a22.color);
    const c27 = a22.range !== void 0 ? a22.range : 0;
    switch (a22.type) {
      case "directional":
        o13 = new Oh2(l26), o13.target.position.set(0, 0, -1), o13.add(o13.target);
        break;
      case "point":
        o13 = new da2(l26), o13.distance = c27;
        break;
      case "spot":
        o13 = new Uh2(l26), o13.distance = c27, a22.spot = a22.spot || {}, a22.spot.innerConeAngle = a22.spot.innerConeAngle !== void 0 ? a22.spot.innerConeAngle : 0, a22.spot.outerConeAngle = a22.spot.outerConeAngle !== void 0 ? a22.spot.outerConeAngle : Math.PI / 4, o13.angle = a22.spot.outerConeAngle, o13.penumbra = 1 - a22.spot.innerConeAngle / a22.spot.outerConeAngle, o13.target.position.set(0, 0, -1), o13.add(o13.target);
        break;
      default:
        throw new Error("THREE.GLTFLoader: Unexpected light type: " + a22.type);
    }
    return o13.position.set(0, 0, 0), o13.decay = 2, Qi3(o13, a22), a22.intensity !== void 0 && (o13.intensity = a22.intensity), o13.name = t19.createUniqueName(a22.name || "light_" + e11), r24 = Promise.resolve(o13), t19.cache.add(i27, r24), r24;
  }
  getDependency(e11, t19) {
    if (e11 === "light")
      return this._loadLight(t19);
  }
  createNodeAttachment(e11) {
    const t19 = this, i27 = this.parser, r24 = i27.json.nodes[e11], n33 = (r24.extensions && r24.extensions[this.name] || {}).light;
    return n33 === void 0 ? null : this._loadLight(n33).then(function(a22) {
      return i27._getNodeRef(t19.cache, n33, a22);
    });
  }
};
var $02 = class {
  constructor() {
    this.name = et13.KHR_MATERIALS_UNLIT;
  }
  getMaterialType() {
    return xi6;
  }
  extendParams(e11, t19, i27) {
    const r24 = [];
    e11.color = new ze7(1, 1, 1), e11.opacity = 1;
    const n33 = t19.pbrMetallicRoughness;
    if (n33) {
      if (Array.isArray(n33.baseColorFactor)) {
        const a22 = n33.baseColorFactor;
        e11.color.fromArray(a22), e11.opacity = a22[3];
      }
      n33.baseColorTexture !== void 0 && r24.push(i27.assignTexture(e11, "map", n33.baseColorTexture, rt12));
    }
    return Promise.all(r24);
  }
};
var Q02 = class {
  constructor(e11) {
    this.parser = e11, this.name = et13.KHR_MATERIALS_EMISSIVE_STRENGTH;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const r24 = i27.extensions[this.name].emissiveStrength;
    return r24 !== void 0 && (t19.emissiveIntensity = r24), Promise.resolve();
  }
};
var e_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et13.KHR_MATERIALS_CLEARCOAT;
  }
  getMaterialType(e11) {
    const t19 = this.parser.json.materials[e11];
    return !t19.extensions || !t19.extensions[this.name] ? null : Cr5;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser, r24 = i27.json.materials[e11];
    if (!r24.extensions || !r24.extensions[this.name])
      return Promise.resolve();
    const n33 = [], a22 = r24.extensions[this.name];
    if (a22.clearcoatFactor !== void 0 && (t19.clearcoat = a22.clearcoatFactor), a22.clearcoatTexture !== void 0 && n33.push(i27.assignTexture(t19, "clearcoatMap", a22.clearcoatTexture)), a22.clearcoatRoughnessFactor !== void 0 && (t19.clearcoatRoughness = a22.clearcoatRoughnessFactor), a22.clearcoatRoughnessTexture !== void 0 && n33.push(i27.assignTexture(t19, "clearcoatRoughnessMap", a22.clearcoatRoughnessTexture)), a22.clearcoatNormalTexture !== void 0 && (n33.push(i27.assignTexture(t19, "clearcoatNormalMap", a22.clearcoatNormalTexture)), a22.clearcoatNormalTexture.scale !== void 0)) {
      const o13 = a22.clearcoatNormalTexture.scale;
      t19.clearcoatNormalScale = new We7(o13, o13);
    }
    return Promise.all(n33);
  }
};
var t_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et13.KHR_MATERIALS_IRIDESCENCE;
  }
  getMaterialType(e11) {
    const t19 = this.parser.json.materials[e11];
    return !t19.extensions || !t19.extensions[this.name] ? null : Cr5;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser, r24 = i27.json.materials[e11];
    if (!r24.extensions || !r24.extensions[this.name])
      return Promise.resolve();
    const n33 = [], a22 = r24.extensions[this.name];
    return a22.iridescenceFactor !== void 0 && (t19.iridescence = a22.iridescenceFactor), a22.iridescenceTexture !== void 0 && n33.push(i27.assignTexture(t19, "iridescenceMap", a22.iridescenceTexture)), a22.iridescenceIor !== void 0 && (t19.iridescenceIOR = a22.iridescenceIor), t19.iridescenceThicknessRange === void 0 && (t19.iridescenceThicknessRange = [100, 400]), a22.iridescenceThicknessMinimum !== void 0 && (t19.iridescenceThicknessRange[0] = a22.iridescenceThicknessMinimum), a22.iridescenceThicknessMaximum !== void 0 && (t19.iridescenceThicknessRange[1] = a22.iridescenceThicknessMaximum), a22.iridescenceThicknessTexture !== void 0 && n33.push(i27.assignTexture(t19, "iridescenceThicknessMap", a22.iridescenceThicknessTexture)), Promise.all(n33);
  }
};
var i_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et13.KHR_MATERIALS_SHEEN;
  }
  getMaterialType(e11) {
    const t19 = this.parser.json.materials[e11];
    return !t19.extensions || !t19.extensions[this.name] ? null : Cr5;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser, r24 = i27.json.materials[e11];
    if (!r24.extensions || !r24.extensions[this.name])
      return Promise.resolve();
    const n33 = [];
    t19.sheenColor = new ze7(0, 0, 0), t19.sheenRoughness = 0, t19.sheen = 1;
    const a22 = r24.extensions[this.name];
    return a22.sheenColorFactor !== void 0 && t19.sheenColor.fromArray(a22.sheenColorFactor), a22.sheenRoughnessFactor !== void 0 && (t19.sheenRoughness = a22.sheenRoughnessFactor), a22.sheenColorTexture !== void 0 && n33.push(i27.assignTexture(t19, "sheenColorMap", a22.sheenColorTexture, rt12)), a22.sheenRoughnessTexture !== void 0 && n33.push(i27.assignTexture(t19, "sheenRoughnessMap", a22.sheenRoughnessTexture)), Promise.all(n33);
  }
};
var r_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et13.KHR_MATERIALS_TRANSMISSION;
  }
  getMaterialType(e11) {
    const t19 = this.parser.json.materials[e11];
    return !t19.extensions || !t19.extensions[this.name] ? null : Cr5;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser, r24 = i27.json.materials[e11];
    if (!r24.extensions || !r24.extensions[this.name])
      return Promise.resolve();
    const n33 = [], a22 = r24.extensions[this.name];
    return a22.transmissionFactor !== void 0 && (t19.transmission = a22.transmissionFactor), a22.transmissionTexture !== void 0 && n33.push(i27.assignTexture(t19, "transmissionMap", a22.transmissionTexture)), Promise.all(n33);
  }
};
var n_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et13.KHR_MATERIALS_VOLUME;
  }
  getMaterialType(e11) {
    const t19 = this.parser.json.materials[e11];
    return !t19.extensions || !t19.extensions[this.name] ? null : Cr5;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser, r24 = i27.json.materials[e11];
    if (!r24.extensions || !r24.extensions[this.name])
      return Promise.resolve();
    const n33 = [], a22 = r24.extensions[this.name];
    t19.thickness = a22.thicknessFactor !== void 0 ? a22.thicknessFactor : 0, a22.thicknessTexture !== void 0 && n33.push(i27.assignTexture(t19, "thicknessMap", a22.thicknessTexture)), t19.attenuationDistance = a22.attenuationDistance || 1 / 0;
    const o13 = a22.attenuationColor || [1, 1, 1];
    return t19.attenuationColor = new ze7(o13[0], o13[1], o13[2]), Promise.all(n33);
  }
};
var s_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et13.KHR_MATERIALS_IOR;
  }
  getMaterialType(e11) {
    const t19 = this.parser.json.materials[e11];
    return !t19.extensions || !t19.extensions[this.name] ? null : Cr5;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser.json.materials[e11];
    if (!i27.extensions || !i27.extensions[this.name])
      return Promise.resolve();
    const r24 = i27.extensions[this.name];
    return t19.ior = r24.ior !== void 0 ? r24.ior : 1.5, Promise.resolve();
  }
};
var a_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et13.KHR_MATERIALS_SPECULAR;
  }
  getMaterialType(e11) {
    const t19 = this.parser.json.materials[e11];
    return !t19.extensions || !t19.extensions[this.name] ? null : Cr5;
  }
  extendMaterialParams(e11, t19) {
    const i27 = this.parser, r24 = i27.json.materials[e11];
    if (!r24.extensions || !r24.extensions[this.name])
      return Promise.resolve();
    const n33 = [], a22 = r24.extensions[this.name];
    t19.specularIntensity = a22.specularFactor !== void 0 ? a22.specularFactor : 1, a22.specularTexture !== void 0 && n33.push(i27.assignTexture(t19, "specularIntensityMap", a22.specularTexture));
    const o13 = a22.specularColorFactor || [1, 1, 1];
    return t19.specularColor = new ze7(o13[0], o13[1], o13[2]), a22.specularColorTexture !== void 0 && n33.push(i27.assignTexture(t19, "specularColorMap", a22.specularColorTexture, rt12)), Promise.all(n33);
  }
};
var o_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et13.KHR_TEXTURE_BASISU;
  }
  loadTexture(e11) {
    const t19 = this.parser, i27 = t19.json, r24 = i27.textures[e11];
    if (!r24.extensions || !r24.extensions[this.name])
      return null;
    const n33 = r24.extensions[this.name], a22 = t19.options.ktx2Loader;
    if (!a22) {
      if (i27.extensionsRequired && i27.extensionsRequired.indexOf(this.name) >= 0)
        throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");
      return null;
    }
    return t19.loadTextureImage(e11, n33.source, a22);
  }
};
var l_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et13.EXT_TEXTURE_WEBP, this.isSupported = null;
  }
  loadTexture(e11) {
    const t19 = this.name, i27 = this.parser, r24 = i27.json, n33 = r24.textures[e11];
    if (!n33.extensions || !n33.extensions[t19])
      return null;
    const a22 = n33.extensions[t19], o13 = r24.images[a22.source];
    let l26 = i27.textureLoader;
    if (o13.uri) {
      const c27 = i27.options.manager.getHandler(o13.uri);
      c27 !== null && (l26 = c27);
    }
    return this.detectSupport().then(function(c27) {
      if (c27)
        return i27.loadTextureImage(e11, a22.source, l26);
      if (r24.extensionsRequired && r24.extensionsRequired.indexOf(t19) >= 0)
        throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");
      return i27.loadTexture(e11);
    });
  }
  detectSupport() {
    return this.isSupported || (this.isSupported = new Promise(function(e11) {
      const t19 = new Image();
      t19.src = "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA", t19.onload = t19.onerror = function() {
        e11(t19.height === 1);
      };
    })), this.isSupported;
  }
};
var c_2 = class {
  constructor(e11) {
    this.parser = e11, this.name = et13.EXT_TEXTURE_AVIF, this.isSupported = null;
  }
  loadTexture(e11) {
    const t19 = this.name, i27 = this.parser, r24 = i27.json, n33 = r24.textures[e11];
    if (!n33.extensions || !n33.extensions[t19])
      return null;
    const a22 = n33.extensions[t19], o13 = r24.images[a22.source];
    let l26 = i27.textureLoader;
    if (o13.uri) {
      const c27 = i27.options.manager.getHandler(o13.uri);
      c27 !== null && (l26 = c27);
    }
    return this.detectSupport().then(function(c27) {
      if (c27)
        return i27.loadTextureImage(e11, a22.source, l26);
      if (r24.extensionsRequired && r24.extensionsRequired.indexOf(t19) >= 0)
        throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");
      return i27.loadTexture(e11);
    });
  }
  detectSupport() {
    return this.isSupported || (this.isSupported = new Promise(function(e11) {
      const t19 = new Image();
      t19.src = "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=", t19.onload = t19.onerror = function() {
        e11(t19.height === 1);
      };
    })), this.isSupported;
  }
};
var h_2 = class {
  constructor(e11) {
    this.name = et13.EXT_MESHOPT_COMPRESSION, this.parser = e11;
  }
  loadBufferView(e11) {
    const t19 = this.parser.json, i27 = t19.bufferViews[e11];
    if (i27.extensions && i27.extensions[this.name]) {
      const r24 = i27.extensions[this.name], n33 = this.parser.getDependency("buffer", r24.buffer), a22 = this.parser.options.meshoptDecoder;
      if (!a22 || !a22.supported) {
        if (t19.extensionsRequired && t19.extensionsRequired.indexOf(this.name) >= 0)
          throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");
        return null;
      }
      return n33.then(function(o13) {
        const l26 = r24.byteOffset || 0, c27 = r24.byteLength || 0, h26 = r24.count, u35 = r24.byteStride, d34 = new Uint8Array(o13, l26, c27);
        return a22.decodeGltfBufferAsync ? a22.decodeGltfBufferAsync(h26, u35, d34, r24.mode, r24.filter).then(function(m34) {
          return m34.buffer;
        }) : a22.ready.then(function() {
          const m34 = new ArrayBuffer(h26 * u35);
          return a22.decodeGltfBuffer(new Uint8Array(m34), h26, u35, d34, r24.mode, r24.filter), m34;
        });
      });
    } else
      return null;
  }
};
var u_2 = class {
  constructor(e11) {
    this.name = et13.EXT_MESH_GPU_INSTANCING, this.parser = e11;
  }
  createNodeMesh(e11) {
    const t19 = this.parser.json, i27 = t19.nodes[e11];
    if (!i27.extensions || !i27.extensions[this.name] || i27.mesh === void 0)
      return null;
    const r24 = t19.meshes[i27.mesh];
    for (const l26 of r24.primitives)
      if (l26.mode !== ci6.TRIANGLES && l26.mode !== ci6.TRIANGLE_STRIP && l26.mode !== ci6.TRIANGLE_FAN && l26.mode !== void 0)
        return null;
    const n33 = i27.extensions[this.name].attributes, a22 = [], o13 = {};
    for (const l26 in n33)
      a22.push(this.parser.getDependency("accessor", n33[l26]).then((c27) => (o13[l26] = c27, o13[l26])));
    return a22.length < 1 ? null : (a22.push(this.parser.createNodeMesh(e11)), Promise.all(a22).then((l26) => {
      const c27 = l26.pop(), h26 = c27.isGroup ? c27.children : [c27], u35 = l26[0].count, d34 = [];
      for (const m34 of h26) {
        const _21 = new He6(), y34 = new k20(), f40 = new jt8(), p26 = new k20(1, 1, 1), A18 = new b02(m34.geometry, m34.material, u35);
        for (let M13 = 0; M13 < u35; M13++)
          o13.TRANSLATION && y34.fromBufferAttribute(o13.TRANSLATION, M13), o13.ROTATION && f40.fromBufferAttribute(o13.ROTATION, M13), o13.SCALE && p26.fromBufferAttribute(o13.SCALE, M13), A18.setMatrixAt(M13, _21.compose(y34, f40, p26));
        for (const M13 in o13)
          M13 !== "TRANSLATION" && M13 !== "ROTATION" && M13 !== "SCALE" && m34.geometry.setAttribute(M13, o13[M13]);
        _t8.prototype.copy.call(A18, m34), this.parser.assignFinalMaterial(A18), d34.push(A18);
      }
      return c27.isGroup ? (c27.clear(), c27.add(...d34), c27) : d34[0];
    }));
  }
};
var zh2 = "glTF";
var Gn5 = 12;
var zc2 = { JSON: 1313821514, BIN: 5130562 };
var d_2 = class {
  constructor(e11) {
    this.name = et13.KHR_BINARY_GLTF, this.content = null, this.body = null;
    const t19 = new DataView(e11, 0, Gn5), i27 = new TextDecoder();
    if (this.header = {
      magic: i27.decode(new Uint8Array(e11.slice(0, 4))),
      version: t19.getUint32(4, true),
      length: t19.getUint32(8, true)
    }, this.header.magic !== zh2)
      throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");
    if (this.header.version < 2)
      throw new Error("THREE.GLTFLoader: Legacy binary file detected.");
    const r24 = this.header.length - Gn5, n33 = new DataView(e11, Gn5);
    let a22 = 0;
    for (; a22 < r24; ) {
      const o13 = n33.getUint32(a22, true);
      a22 += 4;
      const l26 = n33.getUint32(a22, true);
      if (a22 += 4, l26 === zc2.JSON) {
        const c27 = new Uint8Array(e11, Gn5 + a22, o13);
        this.content = i27.decode(c27);
      } else if (l26 === zc2.BIN) {
        const c27 = Gn5 + a22;
        this.body = e11.slice(c27, c27 + o13);
      }
      a22 += o13;
    }
    if (this.content === null)
      throw new Error("THREE.GLTFLoader: JSON content not found.");
  }
};
var p_2 = class {
  constructor(e11, t19) {
    if (!t19)
      throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");
    this.name = et13.KHR_DRACO_MESH_COMPRESSION, this.json = e11, this.dracoLoader = t19, this.dracoLoader.preload();
  }
  decodePrimitive(e11, t19) {
    const i27 = this.json, r24 = this.dracoLoader, n33 = e11.extensions[this.name].bufferView, a22 = e11.extensions[this.name].attributes, o13 = {}, l26 = {}, c27 = {};
    for (const h26 in a22) {
      const u35 = Mo[h26] || h26.toLowerCase();
      o13[u35] = a22[h26];
    }
    for (const h26 in e11.attributes) {
      const u35 = Mo[h26] || h26.toLowerCase();
      if (a22[h26] !== void 0) {
        const d34 = i27.accessors[e11.attributes[h26]], m34 = fn4[d34.componentType];
        c27[u35] = m34.name, l26[u35] = d34.normalized === true;
      }
    }
    return t19.getDependency("bufferView", n33).then(function(h26) {
      return new Promise(function(u35) {
        r24.decodeDracoFile(h26, function(d34) {
          for (const m34 in d34.attributes) {
            const _21 = d34.attributes[m34], y34 = l26[m34];
            y34 !== void 0 && (_21.normalized = y34);
          }
          u35(d34);
        }, o13, c27);
      });
    });
  }
};
var m_2 = class {
  constructor() {
    this.name = et13.KHR_TEXTURE_TRANSFORM;
  }
  extendTexture(e11, t19) {
    return (t19.texCoord === void 0 || t19.texCoord === e11.channel) && t19.offset === void 0 && t19.rotation === void 0 && t19.scale === void 0 || (e11 = e11.clone(), t19.texCoord !== void 0 && (e11.channel = t19.texCoord), t19.offset !== void 0 && e11.offset.fromArray(t19.offset), t19.rotation !== void 0 && (e11.rotation = t19.rotation), t19.scale !== void 0 && e11.repeat.fromArray(t19.scale), e11.needsUpdate = true), e11;
  }
};
var f_2 = class {
  constructor() {
    this.name = et13.KHR_MESH_QUANTIZATION;
  }
};
var Bh2 = class extends os3 {
  constructor(e11, t19, i27, r24) {
    super(e11, t19, i27, r24);
  }
  copySampleValue_(e11) {
    const t19 = this.resultBuffer, i27 = this.sampleValues, r24 = this.valueSize, n33 = e11 * r24 * 3 + r24;
    for (let a22 = 0; a22 !== r24; a22++)
      t19[a22] = i27[n33 + a22];
    return t19;
  }
  interpolate_(e11, t19, i27, r24) {
    const n33 = this.resultBuffer, a22 = this.sampleValues, o13 = this.valueSize, l26 = o13 * 2, c27 = o13 * 3, h26 = r24 - t19, u35 = (i27 - t19) / h26, d34 = u35 * u35, m34 = d34 * u35, _21 = e11 * c27, y34 = _21 - c27, f40 = -2 * m34 + 3 * d34, p26 = m34 - d34, A18 = 1 - f40, M13 = p26 - d34 + u35;
    for (let E25 = 0; E25 !== o13; E25++) {
      const w31 = a22[y34 + E25 + o13], I18 = a22[y34 + E25 + l26] * h26, D18 = a22[_21 + E25 + o13], P20 = a22[_21 + E25] * h26;
      n33[E25] = A18 * w31 + M13 * I18 + f40 * D18 + p26 * P20;
    }
    return n33;
  }
};
var g_2 = new jt8();
var __2 = class extends Bh2 {
  interpolate_(e11, t19, i27, r24) {
    const n33 = super.interpolate_(e11, t19, i27, r24);
    return g_2.fromArray(n33).normalize().toArray(n33), n33;
  }
};
var ci6 = {
  FLOAT: 5126,
  //FLOAT_MAT2: 35674,
  FLOAT_MAT3: 35675,
  FLOAT_MAT4: 35676,
  FLOAT_VEC2: 35664,
  FLOAT_VEC3: 35665,
  FLOAT_VEC4: 35666,
  LINEAR: 9729,
  REPEAT: 10497,
  SAMPLER_2D: 35678,
  POINTS: 0,
  LINES: 1,
  LINE_LOOP: 2,
  LINE_STRIP: 3,
  TRIANGLES: 4,
  TRIANGLE_STRIP: 5,
  TRIANGLE_FAN: 6,
  UNSIGNED_BYTE: 5121,
  UNSIGNED_SHORT: 5123
};
var fn4 = {
  5120: Int8Array,
  5121: Uint8Array,
  5122: Int16Array,
  5123: Uint16Array,
  5125: Uint32Array,
  5126: Float32Array
};
var Bc2 = {
  9728: zt6,
  9729: Vt6,
  9984: mo2,
  9985: ah2,
  9986: Zs2,
  9987: Hi3
};
var Fc2 = {
  33071: Zt6,
  33648: ta2,
  10497: Ti4
};
var io2 = {
  SCALAR: 1,
  VEC2: 2,
  VEC3: 3,
  VEC4: 4,
  MAT2: 4,
  MAT3: 9,
  MAT4: 16
};
var Mo = {
  POSITION: "position",
  NORMAL: "normal",
  TANGENT: "tangent",
  TEXCOORD_0: "uv",
  TEXCOORD_1: "uv2",
  COLOR_0: "color",
  WEIGHTS_0: "skinWeight",
  JOINTS_0: "skinIndex"
};
var Ki4 = {
  scale: "scale",
  translation: "position",
  rotation: "quaternion",
  weights: "morphTargetInfluences"
};
var v_2 = {
  CUBICSPLINE: void 0,
  // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each
  // keyframe track will be initialized with a default interpolation type, then modified.
  LINEAR: Mn5,
  STEP: Qn5
};
var ro2 = {
  OPAQUE: "OPAQUE",
  MASK: "MASK",
  BLEND: "BLEND"
};
function y_2(s18) {
  return s18.DefaultMaterial === void 0 && (s18.DefaultMaterial = new as3({
    color: 16777215,
    emissive: 0,
    metalness: 1,
    roughness: 1,
    transparent: false,
    depthTest: true,
    side: Ei5
  })), s18.DefaultMaterial;
}
function Wn5(s18, e11, t19) {
  for (const i27 in t19.extensions)
    s18[i27] === void 0 && (e11.userData.gltfExtensions = e11.userData.gltfExtensions || {}, e11.userData.gltfExtensions[i27] = t19.extensions[i27]);
}
function Qi3(s18, e11) {
  e11.extras !== void 0 && (typeof e11.extras == "object" ? Object.assign(s18.userData, e11.extras) : console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, " + e11.extras));
}
function x_2(s18, e11, t19) {
  let i27 = false, r24 = false, n33 = false;
  for (let c27 = 0, h26 = e11.length; c27 < h26; c27++) {
    const u35 = e11[c27];
    if (u35.POSITION !== void 0 && (i27 = true), u35.NORMAL !== void 0 && (r24 = true), u35.COLOR_0 !== void 0 && (n33 = true), i27 && r24 && n33)
      break;
  }
  if (!i27 && !r24 && !n33)
    return Promise.resolve(s18);
  const a22 = [], o13 = [], l26 = [];
  for (let c27 = 0, h26 = e11.length; c27 < h26; c27++) {
    const u35 = e11[c27];
    if (i27) {
      const d34 = u35.POSITION !== void 0 ? t19.getDependency("accessor", u35.POSITION) : s18.attributes.position;
      a22.push(d34);
    }
    if (r24) {
      const d34 = u35.NORMAL !== void 0 ? t19.getDependency("accessor", u35.NORMAL) : s18.attributes.normal;
      o13.push(d34);
    }
    if (n33) {
      const d34 = u35.COLOR_0 !== void 0 ? t19.getDependency("accessor", u35.COLOR_0) : s18.attributes.color;
      l26.push(d34);
    }
  }
  return Promise.all([
    Promise.all(a22),
    Promise.all(o13),
    Promise.all(l26)
  ]).then(function(c27) {
    const h26 = c27[0], u35 = c27[1], d34 = c27[2];
    return i27 && (s18.morphAttributes.position = h26), r24 && (s18.morphAttributes.normal = u35), n33 && (s18.morphAttributes.color = d34), s18.morphTargetsRelative = true, s18;
  });
}
function b_2(s18, e11) {
  if (s18.updateMorphTargets(), e11.weights !== void 0)
    for (let t19 = 0, i27 = e11.weights.length; t19 < i27; t19++)
      s18.morphTargetInfluences[t19] = e11.weights[t19];
  if (e11.extras && Array.isArray(e11.extras.targetNames)) {
    const t19 = e11.extras.targetNames;
    if (s18.morphTargetInfluences.length === t19.length) {
      s18.morphTargetDictionary = {};
      for (let i27 = 0, r24 = t19.length; i27 < r24; i27++)
        s18.morphTargetDictionary[t19[i27]] = i27;
    } else
      console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.");
  }
}
function M_2(s18) {
  const e11 = s18.extensions && s18.extensions[et13.KHR_DRACO_MESH_COMPRESSION];
  let t19;
  return e11 ? t19 = "draco:" + e11.bufferView + ":" + e11.indices + ":" + Hc2(e11.attributes) : t19 = s18.indices + ":" + Hc2(s18.attributes) + ":" + s18.mode, t19;
}
function Hc2(s18) {
  let e11 = "";
  const t19 = Object.keys(s18).sort();
  for (let i27 = 0, r24 = t19.length; i27 < r24; i27++)
    e11 += t19[i27] + ":" + s18[t19[i27]] + ";";
  return e11;
}
function wo(s18) {
  switch (s18) {
    case Int8Array:
      return 1 / 127;
    case Uint8Array:
      return 1 / 255;
    case Int16Array:
      return 1 / 32767;
    case Uint16Array:
      return 1 / 65535;
    default:
      throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.");
  }
}
function w_2(s18) {
  return s18.search(/\.jpe?g($|\?)/i) > 0 || s18.search(/^data\:image\/jpeg/) === 0 ? "image/jpeg" : s18.search(/\.webp($|\?)/i) > 0 || s18.search(/^data\:image\/webp/) === 0 ? "image/webp" : "image/png";
}
var S_2 = new He6();
var T_2 = class {
  constructor(e11 = {}, t19 = {}) {
    this.json = e11, this.extensions = {}, this.plugins = {}, this.options = t19, this.cache = new J02(), this.associations = /* @__PURE__ */ new Map(), this.primitiveCache = {}, this.nodeCache = {}, this.meshCache = { refs: {}, uses: {} }, this.cameraCache = { refs: {}, uses: {} }, this.lightCache = { refs: {}, uses: {} }, this.sourceCache = {}, this.textureCache = {}, this.nodeNamesUsed = {};
    let i27 = false, r24 = false, n33 = -1;
    typeof navigator < "u" && (i27 = /^((?!chrome|android).)*safari/i.test(navigator.userAgent) === true, r24 = navigator.userAgent.indexOf("Firefox") > -1, n33 = r24 ? navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1] : -1), typeof createImageBitmap > "u" || i27 || r24 && n33 < 98 ? this.textureLoader = new Ho2(this.options.manager) : this.textureLoader = new F02(this.options.manager), this.textureLoader.setCrossOrigin(this.options.crossOrigin), this.textureLoader.setRequestHeader(this.options.requestHeader), this.fileLoader = new ls3(this.options.manager), this.fileLoader.setResponseType("arraybuffer"), this.options.crossOrigin === "use-credentials" && this.fileLoader.setWithCredentials(true);
  }
  setExtensions(e11) {
    this.extensions = e11;
  }
  setPlugins(e11) {
    this.plugins = e11;
  }
  parse(e11, t19) {
    const i27 = this, r24 = this.json, n33 = this.extensions;
    this.cache.removeAll(), this.nodeCache = {}, this._invokeAll(function(a22) {
      return a22._markDefs && a22._markDefs();
    }), Promise.all(this._invokeAll(function(a22) {
      return a22.beforeRoot && a22.beforeRoot();
    })).then(function() {
      return Promise.all([
        i27.getDependencies("scene"),
        i27.getDependencies("animation"),
        i27.getDependencies("camera")
      ]);
    }).then(function(a22) {
      const o13 = {
        scene: a22[0][r24.scene || 0],
        scenes: a22[0],
        animations: a22[1],
        cameras: a22[2],
        asset: r24.asset,
        parser: i27,
        userData: {}
      };
      Wn5(n33, o13, r24), Qi3(o13, r24), Promise.all(i27._invokeAll(function(l26) {
        return l26.afterRoot && l26.afterRoot(o13);
      })).then(function() {
        e11(o13);
      });
    }).catch(t19);
  }
  /**
   * Marks the special nodes/meshes in json for efficient parse.
   */
  _markDefs() {
    const e11 = this.json.nodes || [], t19 = this.json.skins || [], i27 = this.json.meshes || [];
    for (let r24 = 0, n33 = t19.length; r24 < n33; r24++) {
      const a22 = t19[r24].joints;
      for (let o13 = 0, l26 = a22.length; o13 < l26; o13++)
        e11[a22[o13]].isBone = true;
    }
    for (let r24 = 0, n33 = e11.length; r24 < n33; r24++) {
      const a22 = e11[r24];
      a22.mesh !== void 0 && (this._addNodeRef(this.meshCache, a22.mesh), a22.skin !== void 0 && (i27[a22.mesh].isSkinnedMesh = true)), a22.camera !== void 0 && this._addNodeRef(this.cameraCache, a22.camera);
    }
  }
  /**
   * Counts references to shared node / Object3D resources. These resources
   * can be reused, or "instantiated", at multiple nodes in the scene
   * hierarchy. Mesh, Camera, and Light instances are instantiated and must
   * be marked. Non-scenegraph resources (like Materials, Geometries, and
   * Textures) can be reused directly and are not marked here.
   *
   * Example: CesiumMilkTruck sample model reuses "Wheel" meshes.
   */
  _addNodeRef(e11, t19) {
    t19 !== void 0 && (e11.refs[t19] === void 0 && (e11.refs[t19] = e11.uses[t19] = 0), e11.refs[t19]++);
  }
  /** Returns a reference to a shared resource, cloning it if necessary. */
  _getNodeRef(e11, t19, i27) {
    if (e11.refs[t19] <= 1)
      return i27;
    const r24 = i27.clone(), n33 = (a22, o13) => {
      const l26 = this.associations.get(a22);
      l26 != null && this.associations.set(o13, l26);
      for (const [c27, h26] of a22.children.entries())
        n33(h26, o13.children[c27]);
    };
    return n33(i27, r24), r24.name += "_instance_" + e11.uses[t19]++, r24;
  }
  _invokeOne(e11) {
    const t19 = Object.values(this.plugins);
    t19.push(this);
    for (let i27 = 0; i27 < t19.length; i27++) {
      const r24 = e11(t19[i27]);
      if (r24)
        return r24;
    }
    return null;
  }
  _invokeAll(e11) {
    const t19 = Object.values(this.plugins);
    t19.unshift(this);
    const i27 = [];
    for (let r24 = 0; r24 < t19.length; r24++) {
      const n33 = e11(t19[r24]);
      n33 && i27.push(n33);
    }
    return i27;
  }
  /**
   * Requests the specified dependency asynchronously, with caching.
   * @param {string} type
   * @param {number} index
   * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}
   */
  getDependency(e11, t19) {
    const i27 = e11 + ":" + t19;
    let r24 = this.cache.get(i27);
    if (!r24) {
      switch (e11) {
        case "scene":
          r24 = this.loadScene(t19);
          break;
        case "node":
          r24 = this._invokeOne(function(n33) {
            return n33.loadNode && n33.loadNode(t19);
          });
          break;
        case "mesh":
          r24 = this._invokeOne(function(n33) {
            return n33.loadMesh && n33.loadMesh(t19);
          });
          break;
        case "accessor":
          r24 = this.loadAccessor(t19);
          break;
        case "bufferView":
          r24 = this._invokeOne(function(n33) {
            return n33.loadBufferView && n33.loadBufferView(t19);
          });
          break;
        case "buffer":
          r24 = this.loadBuffer(t19);
          break;
        case "material":
          r24 = this._invokeOne(function(n33) {
            return n33.loadMaterial && n33.loadMaterial(t19);
          });
          break;
        case "texture":
          r24 = this._invokeOne(function(n33) {
            return n33.loadTexture && n33.loadTexture(t19);
          });
          break;
        case "skin":
          r24 = this.loadSkin(t19);
          break;
        case "animation":
          r24 = this._invokeOne(function(n33) {
            return n33.loadAnimation && n33.loadAnimation(t19);
          });
          break;
        case "camera":
          r24 = this.loadCamera(t19);
          break;
        default:
          if (r24 = this._invokeOne(function(n33) {
            return n33 != this && n33.getDependency && n33.getDependency(e11, t19);
          }), !r24)
            throw new Error("Unknown type: " + e11);
          break;
      }
      this.cache.add(i27, r24);
    }
    return r24;
  }
  /**
   * Requests all dependencies of the specified type asynchronously, with caching.
   * @param {string} type
   * @return {Promise<Array<Object>>}
   */
  getDependencies(e11) {
    let t19 = this.cache.get(e11);
    if (!t19) {
      const i27 = this, r24 = this.json[e11 + (e11 === "mesh" ? "es" : "s")] || [];
      t19 = Promise.all(r24.map(function(n33, a22) {
        return i27.getDependency(e11, a22);
      })), this.cache.add(e11, t19);
    }
    return t19;
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views
   * @param {number} bufferIndex
   * @return {Promise<ArrayBuffer>}
   */
  loadBuffer(e11) {
    const t19 = this.json.buffers[e11], i27 = this.fileLoader;
    if (t19.type && t19.type !== "arraybuffer")
      throw new Error("THREE.GLTFLoader: " + t19.type + " buffer type is not supported.");
    if (t19.uri === void 0 && e11 === 0)
      return Promise.resolve(this.extensions[et13.KHR_BINARY_GLTF].body);
    const r24 = this.options;
    return new Promise(function(n33, a22) {
      i27.load(is3.resolveURL(t19.uri, r24.path), n33, void 0, function() {
        a22(new Error('THREE.GLTFLoader: Failed to load buffer "' + t19.uri + '".'));
      });
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views
   * @param {number} bufferViewIndex
   * @return {Promise<ArrayBuffer>}
   */
  loadBufferView(e11) {
    const t19 = this.json.bufferViews[e11];
    return this.getDependency("buffer", t19.buffer).then(function(i27) {
      const r24 = t19.byteLength || 0, n33 = t19.byteOffset || 0;
      return i27.slice(n33, n33 + r24);
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors
   * @param {number} accessorIndex
   * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}
   */
  loadAccessor(e11) {
    const t19 = this, i27 = this.json, r24 = this.json.accessors[e11];
    if (r24.bufferView === void 0 && r24.sparse === void 0) {
      const a22 = io2[r24.type], o13 = fn4[r24.componentType], l26 = r24.normalized === true, c27 = new o13(r24.count * a22);
      return Promise.resolve(new Ft6(c27, a22, l26));
    }
    const n33 = [];
    return r24.bufferView !== void 0 ? n33.push(this.getDependency("bufferView", r24.bufferView)) : n33.push(null), r24.sparse !== void 0 && (n33.push(this.getDependency("bufferView", r24.sparse.indices.bufferView)), n33.push(this.getDependency("bufferView", r24.sparse.values.bufferView))), Promise.all(n33).then(function(a22) {
      const o13 = a22[0], l26 = io2[r24.type], c27 = fn4[r24.componentType], h26 = c27.BYTES_PER_ELEMENT, u35 = h26 * l26, d34 = r24.byteOffset || 0, m34 = r24.bufferView !== void 0 ? i27.bufferViews[r24.bufferView].byteStride : void 0, _21 = r24.normalized === true;
      let y34, f40;
      if (m34 && m34 !== u35) {
        const p26 = Math.floor(d34 / m34), A18 = "InterleavedBuffer:" + r24.bufferView + ":" + r24.componentType + ":" + p26 + ":" + r24.count;
        let M13 = t19.cache.get(A18);
        M13 || (y34 = new c27(o13, p26 * m34, r24.count * m34 / h26), M13 = new _02(y34, m34 / h26), t19.cache.add(A18, M13)), f40 = new Uo2(M13, l26, d34 % m34 / h26, _21);
      } else
        o13 === null ? y34 = new c27(r24.count * l26) : y34 = new c27(o13, d34, r24.count * l26), f40 = new Ft6(y34, l26, _21);
      if (r24.sparse !== void 0) {
        const p26 = io2.SCALAR, A18 = fn4[r24.sparse.indices.componentType], M13 = r24.sparse.indices.byteOffset || 0, E25 = r24.sparse.values.byteOffset || 0, w31 = new A18(a22[1], M13, r24.sparse.count * p26), I18 = new c27(a22[2], E25, r24.sparse.count * l26);
        o13 !== null && (f40 = new Ft6(f40.array.slice(), f40.itemSize, f40.normalized));
        for (let D18 = 0, P20 = w31.length; D18 < P20; D18++) {
          const x36 = w31[D18];
          if (f40.setX(x36, I18[D18 * l26]), l26 >= 2 && f40.setY(x36, I18[D18 * l26 + 1]), l26 >= 3 && f40.setZ(x36, I18[D18 * l26 + 2]), l26 >= 4 && f40.setW(x36, I18[D18 * l26 + 3]), l26 >= 5)
            throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.");
        }
      }
      return f40;
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures
   * @param {number} textureIndex
   * @return {Promise<THREE.Texture|null>}
   */
  loadTexture(e11) {
    const t19 = this.json, i27 = this.options, r24 = t19.textures[e11].source, n33 = t19.images[r24];
    let a22 = this.textureLoader;
    if (n33.uri) {
      const o13 = i27.manager.getHandler(n33.uri);
      o13 !== null && (a22 = o13);
    }
    return this.loadTextureImage(e11, r24, a22);
  }
  loadTextureImage(e11, t19, i27) {
    const r24 = this, n33 = this.json, a22 = n33.textures[e11], o13 = n33.images[t19], l26 = (o13.uri || o13.bufferView) + ":" + a22.sampler;
    if (this.textureCache[l26])
      return this.textureCache[l26];
    const c27 = this.loadImageSource(t19, i27).then(function(h26) {
      h26.flipY = false, h26.name = a22.name || o13.name || "", h26.name === "" && typeof o13.uri == "string" && o13.uri.startsWith("data:image/") === false && (h26.name = o13.uri);
      const u35 = (n33.samplers || {})[a22.sampler] || {};
      return h26.magFilter = Bc2[u35.magFilter] || Vt6, h26.minFilter = Bc2[u35.minFilter] || Hi3, h26.wrapS = Fc2[u35.wrapS] || Ti4, h26.wrapT = Fc2[u35.wrapT] || Ti4, r24.associations.set(h26, { textures: e11 }), h26;
    }).catch(function() {
      return null;
    });
    return this.textureCache[l26] = c27, c27;
  }
  loadImageSource(e11, t19) {
    const i27 = this, r24 = this.json, n33 = this.options;
    if (this.sourceCache[e11] !== void 0)
      return this.sourceCache[e11].then((u35) => u35.clone());
    const a22 = r24.images[e11], o13 = self.URL || self.webkitURL;
    let l26 = a22.uri || "", c27 = false;
    if (a22.bufferView !== void 0)
      l26 = i27.getDependency("bufferView", a22.bufferView).then(function(u35) {
        c27 = true;
        const d34 = new Blob([u35], { type: a22.mimeType });
        return l26 = o13.createObjectURL(d34), l26;
      });
    else if (a22.uri === void 0)
      throw new Error("THREE.GLTFLoader: Image " + e11 + " is missing URI and bufferView");
    const h26 = Promise.resolve(l26).then(function(u35) {
      return new Promise(function(d34, m34) {
        let _21 = d34;
        t19.isImageBitmapLoader === true && (_21 = function(y34) {
          const f40 = new Wt7(y34);
          f40.needsUpdate = true, d34(f40);
        }), t19.load(is3.resolveURL(u35, n33.path), _21, void 0, m34);
      });
    }).then(function(u35) {
      return c27 === true && o13.revokeObjectURL(l26), u35.userData.mimeType = a22.mimeType || w_2(a22.uri), u35;
    }).catch(function(u35) {
      throw console.error("THREE.GLTFLoader: Couldn't load texture", l26), u35;
    });
    return this.sourceCache[e11] = h26, h26;
  }
  /**
   * Asynchronously assigns a texture to the given material parameters.
   * @param {Object} materialParams
   * @param {string} mapName
   * @param {Object} mapDef
   * @return {Promise<Texture>}
   */
  assignTexture(e11, t19, i27, r24) {
    const n33 = this;
    return this.getDependency("texture", i27.index).then(function(a22) {
      if (!a22)
        return null;
      if (i27.texCoord !== void 0 && i27.texCoord > 0 && (a22 = a22.clone(), a22.channel = i27.texCoord), n33.extensions[et13.KHR_TEXTURE_TRANSFORM]) {
        const o13 = i27.extensions !== void 0 ? i27.extensions[et13.KHR_TEXTURE_TRANSFORM] : void 0;
        if (o13) {
          const l26 = n33.associations.get(a22);
          a22 = n33.extensions[et13.KHR_TEXTURE_TRANSFORM].extendTexture(a22, o13), n33.associations.set(a22, l26);
        }
      }
      return r24 !== void 0 && (a22.encoding = r24), e11[t19] = a22, a22;
    });
  }
  /**
   * Assigns final material to a Mesh, Line, or Points instance. The instance
   * already has a material (generated from the glTF material options alone)
   * but reuse of the same glTF material may require multiple threejs materials
   * to accommodate different primitive types, defines, etc. New materials will
   * be created if necessary, and reused from a cache.
   * @param  {Object3D} mesh Mesh, Line, or Points instance.
   */
  assignFinalMaterial(e11) {
    const t19 = e11.geometry;
    let i27 = e11.material;
    const r24 = t19.attributes.tangent === void 0, n33 = t19.attributes.color !== void 0, a22 = t19.attributes.normal === void 0;
    if (e11.isPoints) {
      const o13 = "PointsMaterial:" + i27.uuid;
      let l26 = this.cache.get(o13);
      l26 || (l26 = new Rh2(), pi6.prototype.copy.call(l26, i27), l26.color.copy(i27.color), l26.map = i27.map, l26.sizeAttenuation = false, this.cache.add(o13, l26)), i27 = l26;
    } else if (e11.isLine) {
      const o13 = "LineBasicMaterial:" + i27.uuid;
      let l26 = this.cache.get(o13);
      l26 || (l26 = new Tn4(), pi6.prototype.copy.call(l26, i27), l26.color.copy(i27.color), l26.map = i27.map, this.cache.add(o13, l26)), i27 = l26;
    }
    if (r24 || n33 || a22) {
      let o13 = "ClonedMaterial:" + i27.uuid + ":";
      r24 && (o13 += "derivative-tangents:"), n33 && (o13 += "vertex-colors:"), a22 && (o13 += "flat-shading:");
      let l26 = this.cache.get(o13);
      l26 || (l26 = i27.clone(), n33 && (l26.vertexColors = true), a22 && (l26.flatShading = true), r24 && (l26.normalScale && (l26.normalScale.y *= -1), l26.clearcoatNormalScale && (l26.clearcoatNormalScale.y *= -1)), this.cache.add(o13, l26), this.associations.set(l26, this.associations.get(i27))), i27 = l26;
    }
    e11.material = i27;
  }
  getMaterialType() {
    return as3;
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials
   * @param {number} materialIndex
   * @return {Promise<Material>}
   */
  loadMaterial(e11) {
    const t19 = this, i27 = this.json, r24 = this.extensions, n33 = i27.materials[e11];
    let a22;
    const o13 = {}, l26 = n33.extensions || {}, c27 = [];
    if (l26[et13.KHR_MATERIALS_UNLIT]) {
      const u35 = r24[et13.KHR_MATERIALS_UNLIT];
      a22 = u35.getMaterialType(), c27.push(u35.extendParams(o13, n33, t19));
    } else {
      const u35 = n33.pbrMetallicRoughness || {};
      if (o13.color = new ze7(1, 1, 1), o13.opacity = 1, Array.isArray(u35.baseColorFactor)) {
        const d34 = u35.baseColorFactor;
        o13.color.fromArray(d34), o13.opacity = d34[3];
      }
      u35.baseColorTexture !== void 0 && c27.push(t19.assignTexture(o13, "map", u35.baseColorTexture, rt12)), o13.metalness = u35.metallicFactor !== void 0 ? u35.metallicFactor : 1, o13.roughness = u35.roughnessFactor !== void 0 ? u35.roughnessFactor : 1, u35.metallicRoughnessTexture !== void 0 && (c27.push(t19.assignTexture(o13, "metalnessMap", u35.metallicRoughnessTexture)), c27.push(t19.assignTexture(o13, "roughnessMap", u35.metallicRoughnessTexture))), a22 = this._invokeOne(function(d34) {
        return d34.getMaterialType && d34.getMaterialType(e11);
      }), c27.push(Promise.all(this._invokeAll(function(d34) {
        return d34.extendMaterialParams && d34.extendMaterialParams(e11, o13);
      })));
    }
    n33.doubleSided === true && (o13.side = ui6);
    const h26 = n33.alphaMode || ro2.OPAQUE;
    if (h26 === ro2.BLEND ? (o13.transparent = true, o13.depthWrite = false) : (o13.transparent = false, h26 === ro2.MASK && (o13.alphaTest = n33.alphaCutoff !== void 0 ? n33.alphaCutoff : 0.5)), n33.normalTexture !== void 0 && a22 !== xi6 && (c27.push(t19.assignTexture(o13, "normalMap", n33.normalTexture)), o13.normalScale = new We7(1, 1), n33.normalTexture.scale !== void 0)) {
      const u35 = n33.normalTexture.scale;
      o13.normalScale.set(u35, u35);
    }
    return n33.occlusionTexture !== void 0 && a22 !== xi6 && (c27.push(t19.assignTexture(o13, "aoMap", n33.occlusionTexture)), n33.occlusionTexture.strength !== void 0 && (o13.aoMapIntensity = n33.occlusionTexture.strength)), n33.emissiveFactor !== void 0 && a22 !== xi6 && (o13.emissive = new ze7().fromArray(n33.emissiveFactor)), n33.emissiveTexture !== void 0 && a22 !== xi6 && c27.push(t19.assignTexture(o13, "emissiveMap", n33.emissiveTexture, rt12)), Promise.all(c27).then(function() {
      const u35 = new a22(o13);
      return n33.name && (u35.name = n33.name), Qi3(u35, n33), t19.associations.set(u35, { materials: e11 }), n33.extensions && Wn5(r24, u35, n33), u35;
    });
  }
  /** When Object3D instances are targeted by animation, they need unique names. */
  createUniqueName(e11) {
    const t19 = ht14.sanitizeNodeName(e11 || "");
    let i27 = t19;
    for (let r24 = 1; this.nodeNamesUsed[i27]; ++r24)
      i27 = t19 + "_" + r24;
    return this.nodeNamesUsed[i27] = true, i27;
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry
   *
   * Creates BufferGeometries from primitives.
   *
   * @param {Array<GLTF.Primitive>} primitives
   * @return {Promise<Array<BufferGeometry>>}
   */
  loadGeometries(e11) {
    const t19 = this, i27 = this.extensions, r24 = this.primitiveCache;
    function n33(o13) {
      return i27[et13.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o13, t19).then(function(l26) {
        return Vc2(l26, o13, t19);
      });
    }
    const a22 = [];
    for (let o13 = 0, l26 = e11.length; o13 < l26; o13++) {
      const c27 = e11[o13], h26 = M_2(c27), u35 = r24[h26];
      if (u35)
        a22.push(u35.promise);
      else {
        let d34;
        c27.extensions && c27.extensions[et13.KHR_DRACO_MESH_COMPRESSION] ? d34 = n33(c27) : d34 = Vc2(new Xt6(), c27, t19), r24[h26] = { primitive: c27, promise: d34 }, a22.push(d34);
      }
    }
    return Promise.all(a22);
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes
   * @param {number} meshIndex
   * @return {Promise<Group|Mesh|SkinnedMesh>}
   */
  loadMesh(e11) {
    const t19 = this, i27 = this.json, r24 = this.extensions, n33 = i27.meshes[e11], a22 = n33.primitives, o13 = [];
    for (let l26 = 0, c27 = a22.length; l26 < c27; l26++) {
      const h26 = a22[l26].material === void 0 ? y_2(this.cache) : this.getDependency("material", a22[l26].material);
      o13.push(h26);
    }
    return o13.push(t19.loadGeometries(a22)), Promise.all(o13).then(function(l26) {
      const c27 = l26.slice(0, l26.length - 1), h26 = l26[l26.length - 1], u35 = [];
      for (let m34 = 0, _21 = h26.length; m34 < _21; m34++) {
        const y34 = h26[m34], f40 = a22[m34];
        let p26;
        const A18 = c27[m34];
        if (f40.mode === ci6.TRIANGLES || f40.mode === ci6.TRIANGLE_STRIP || f40.mode === ci6.TRIANGLE_FAN || f40.mode === void 0)
          p26 = n33.isSkinnedMesh === true ? new Lh2(y34, A18) : new Rt8(y34, A18), p26.isSkinnedMesh === true && p26.normalizeSkinWeights(), f40.mode === ci6.TRIANGLE_STRIP ? p26.geometry = Oc2(p26.geometry, lh2) : f40.mode === ci6.TRIANGLE_FAN && (p26.geometry = Oc2(p26.geometry, fo2));
        else if (f40.mode === ci6.LINES)
          p26 = new zo2(y34, A18);
        else if (f40.mode === ci6.LINE_STRIP)
          p26 = new ss3(y34, A18);
        else if (f40.mode === ci6.LINE_LOOP)
          p26 = new M02(y34, A18);
        else if (f40.mode === ci6.POINTS)
          p26 = new w02(y34, A18);
        else
          throw new Error("THREE.GLTFLoader: Primitive mode unsupported: " + f40.mode);
        Object.keys(p26.geometry.morphAttributes).length > 0 && b_2(p26, n33), p26.name = t19.createUniqueName(n33.name || "mesh_" + e11), Qi3(p26, n33), f40.extensions && Wn5(r24, p26, f40), t19.assignFinalMaterial(p26), u35.push(p26);
      }
      for (let m34 = 0, _21 = u35.length; m34 < _21; m34++)
        t19.associations.set(u35[m34], {
          meshes: e11,
          primitives: m34
        });
      if (u35.length === 1)
        return u35[0];
      const d34 = new Lt5();
      t19.associations.set(d34, { meshes: e11 });
      for (let m34 = 0, _21 = u35.length; m34 < _21; m34++)
        d34.add(u35[m34]);
      return d34;
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras
   * @param {number} cameraIndex
   * @return {Promise<THREE.Camera>}
   */
  loadCamera(e11) {
    let t19;
    const i27 = this.json.cameras[e11], r24 = i27[i27.type];
    if (!r24) {
      console.warn("THREE.GLTFLoader: Missing camera parameters.");
      return;
    }
    return i27.type === "perspective" ? t19 = new Bt6(ln4.radToDeg(r24.yfov), r24.aspectRatio || 1, r24.znear || 1, r24.zfar || 2e6) : i27.type === "orthographic" && (t19 = new la2(-r24.xmag, r24.xmag, r24.ymag, -r24.ymag, r24.znear, r24.zfar)), i27.name && (t19.name = this.createUniqueName(i27.name)), Qi3(t19, i27), Promise.resolve(t19);
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins
   * @param {number} skinIndex
   * @return {Promise<Skeleton>}
   */
  loadSkin(e11) {
    const t19 = this.json.skins[e11], i27 = [];
    for (let r24 = 0, n33 = t19.joints.length; r24 < n33; r24++)
      i27.push(this._loadNodeShallow(t19.joints[r24]));
    return t19.inverseBindMatrices !== void 0 ? i27.push(this.getDependency("accessor", t19.inverseBindMatrices)) : i27.push(null), Promise.all(i27).then(function(r24) {
      const n33 = r24.pop(), a22 = r24, o13 = [], l26 = [];
      for (let c27 = 0, h26 = a22.length; c27 < h26; c27++) {
        const u35 = a22[c27];
        if (u35) {
          o13.push(u35);
          const d34 = new He6();
          n33 !== null && d34.fromArray(n33.array, c27 * 16), l26.push(d34);
        } else
          console.warn('THREE.GLTFLoader: Joint "%s" could not be found.', t19.joints[c27]);
      }
      return new ha2(o13, l26);
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations
   * @param {number} animationIndex
   * @return {Promise<AnimationClip>}
   */
  loadAnimation(e11) {
    const t19 = this.json.animations[e11], i27 = t19.name ? t19.name : "animation_" + e11, r24 = [], n33 = [], a22 = [], o13 = [], l26 = [];
    for (let c27 = 0, h26 = t19.channels.length; c27 < h26; c27++) {
      const u35 = t19.channels[c27], d34 = t19.samplers[u35.sampler], m34 = u35.target, _21 = m34.node, y34 = t19.parameters !== void 0 ? t19.parameters[d34.input] : d34.input, f40 = t19.parameters !== void 0 ? t19.parameters[d34.output] : d34.output;
      m34.node !== void 0 && (r24.push(this.getDependency("node", _21)), n33.push(this.getDependency("accessor", y34)), a22.push(this.getDependency("accessor", f40)), o13.push(d34), l26.push(m34));
    }
    return Promise.all([
      Promise.all(r24),
      Promise.all(n33),
      Promise.all(a22),
      Promise.all(o13),
      Promise.all(l26)
    ]).then(function(c27) {
      const h26 = c27[0], u35 = c27[1], d34 = c27[2], m34 = c27[3], _21 = c27[4], y34 = [];
      for (let f40 = 0, p26 = h26.length; f40 < p26; f40++) {
        const A18 = h26[f40], M13 = u35[f40], E25 = d34[f40], w31 = m34[f40], I18 = _21[f40];
        if (A18 === void 0)
          continue;
        A18.updateMatrix();
        let D18;
        switch (Ki4[I18.path]) {
          case Ki4.weights:
            D18 = ts3;
            break;
          case Ki4.rotation:
            D18 = ir5;
            break;
          case Ki4.position:
          case Ki4.scale:
          default:
            D18 = Sr5;
            break;
        }
        const P20 = A18.name ? A18.name : A18.uuid, x36 = w31.interpolation !== void 0 ? v_2[w31.interpolation] : Mn5, C21 = [];
        Ki4[I18.path] === Ki4.weights ? A18.traverse(function(z21) {
          z21.morphTargetInfluences && C21.push(z21.name ? z21.name : z21.uuid);
        }) : C21.push(P20);
        let G16 = E25.array;
        if (E25.normalized) {
          const z21 = wo(G16.constructor), U20 = new Float32Array(G16.length);
          for (let V16 = 0, j19 = G16.length; V16 < j19; V16++)
            U20[V16] = G16[V16] * z21;
          G16 = U20;
        }
        for (let z21 = 0, U20 = C21.length; z21 < U20; z21++) {
          const V16 = new D18(
            C21[z21] + "." + Ki4[I18.path],
            M13.array,
            G16,
            x36
          );
          w31.interpolation === "CUBICSPLINE" && (V16.createInterpolant = function(j19) {
            const W11 = this instanceof ir5 ? __2 : Bh2;
            return new W11(this.times, this.values, this.getValueSize() / 3, j19);
          }, V16.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true), y34.push(V16);
        }
      }
      return new bo(i27, void 0, y34);
    });
  }
  createNodeMesh(e11) {
    const t19 = this.json, i27 = this, r24 = t19.nodes[e11];
    return r24.mesh === void 0 ? null : i27.getDependency("mesh", r24.mesh).then(function(n33) {
      const a22 = i27._getNodeRef(i27.meshCache, r24.mesh, n33);
      return r24.weights !== void 0 && a22.traverse(function(o13) {
        if (o13.isMesh)
          for (let l26 = 0, c27 = r24.weights.length; l26 < c27; l26++)
            o13.morphTargetInfluences[l26] = r24.weights[l26];
      }), a22;
    });
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy
   * @param {number} nodeIndex
   * @return {Promise<Object3D>}
   */
  loadNode(e11) {
    const t19 = this.json, i27 = this, r24 = t19.nodes[e11], n33 = i27._loadNodeShallow(e11), a22 = [], o13 = r24.children || [];
    for (let c27 = 0, h26 = o13.length; c27 < h26; c27++)
      a22.push(i27.getDependency("node", o13[c27]));
    const l26 = r24.skin === void 0 ? Promise.resolve(null) : i27.getDependency("skin", r24.skin);
    return Promise.all([
      n33,
      Promise.all(a22),
      l26
    ]).then(function(c27) {
      const h26 = c27[0], u35 = c27[1], d34 = c27[2];
      d34 !== null && h26.traverse(function(m34) {
        m34.isSkinnedMesh && m34.bind(d34, S_2);
      });
      for (let m34 = 0, _21 = u35.length; m34 < _21; m34++)
        h26.add(u35[m34]);
      return h26;
    });
  }
  // ._loadNodeShallow() parses a single node.
  // skin and child nodes are created and added in .loadNode() (no '_' prefix).
  _loadNodeShallow(e11) {
    const t19 = this.json, i27 = this.extensions, r24 = this;
    if (this.nodeCache[e11] !== void 0)
      return this.nodeCache[e11];
    const n33 = t19.nodes[e11], a22 = n33.name ? r24.createUniqueName(n33.name) : "", o13 = [], l26 = r24._invokeOne(function(c27) {
      return c27.createNodeMesh && c27.createNodeMesh(e11);
    });
    return l26 && o13.push(l26), n33.camera !== void 0 && o13.push(r24.getDependency("camera", n33.camera).then(function(c27) {
      return r24._getNodeRef(r24.cameraCache, n33.camera, c27);
    })), r24._invokeAll(function(c27) {
      return c27.createNodeAttachment && c27.createNodeAttachment(e11);
    }).forEach(function(c27) {
      o13.push(c27);
    }), this.nodeCache[e11] = Promise.all(o13).then(function(c27) {
      let h26;
      if (n33.isBone === true ? h26 = new Oo2() : c27.length > 1 ? h26 = new Lt5() : c27.length === 1 ? h26 = c27[0] : h26 = new _t8(), h26 !== c27[0])
        for (let u35 = 0, d34 = c27.length; u35 < d34; u35++)
          h26.add(c27[u35]);
      if (n33.name && (h26.userData.name = n33.name, h26.name = a22), Qi3(h26, n33), n33.extensions && Wn5(i27, h26, n33), n33.matrix !== void 0) {
        const u35 = new He6();
        u35.fromArray(n33.matrix), h26.applyMatrix4(u35);
      } else
        n33.translation !== void 0 && h26.position.fromArray(n33.translation), n33.rotation !== void 0 && h26.quaternion.fromArray(n33.rotation), n33.scale !== void 0 && h26.scale.fromArray(n33.scale);
      return r24.associations.has(h26) || r24.associations.set(h26, {}), r24.associations.get(h26).nodes = e11, h26;
    }), this.nodeCache[e11];
  }
  /**
   * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes
   * @param {number} sceneIndex
   * @return {Promise<Group>}
   */
  loadScene(e11) {
    const t19 = this.extensions, i27 = this.json.scenes[e11], r24 = this, n33 = new Lt5();
    i27.name && (n33.name = r24.createUniqueName(i27.name)), Qi3(n33, i27), i27.extensions && Wn5(t19, n33, i27);
    const a22 = i27.nodes || [], o13 = [];
    for (let l26 = 0, c27 = a22.length; l26 < c27; l26++)
      o13.push(r24.getDependency("node", a22[l26]));
    return Promise.all(o13).then(function(l26) {
      for (let h26 = 0, u35 = l26.length; h26 < u35; h26++)
        n33.add(l26[h26]);
      const c27 = (h26) => {
        const u35 = /* @__PURE__ */ new Map();
        for (const [d34, m34] of r24.associations)
          (d34 instanceof pi6 || d34 instanceof Wt7) && u35.set(d34, m34);
        return h26.traverse((d34) => {
          const m34 = r24.associations.get(d34);
          m34 != null && u35.set(d34, m34);
        }), u35;
      };
      return r24.associations = c27(n33), n33;
    });
  }
};
function E_2(s18, e11, t19) {
  const i27 = e11.attributes, r24 = new Vi3();
  if (i27.POSITION !== void 0) {
    const o13 = t19.json.accessors[i27.POSITION], l26 = o13.min, c27 = o13.max;
    if (l26 !== void 0 && c27 !== void 0) {
      if (r24.set(
        new k20(l26[0], l26[1], l26[2]),
        new k20(c27[0], c27[1], c27[2])
      ), o13.normalized) {
        const h26 = wo(fn4[o13.componentType]);
        r24.min.multiplyScalar(h26), r24.max.multiplyScalar(h26);
      }
    } else {
      console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");
      return;
    }
  } else
    return;
  const n33 = e11.targets;
  if (n33 !== void 0) {
    const o13 = new k20(), l26 = new k20();
    for (let c27 = 0, h26 = n33.length; c27 < h26; c27++) {
      const u35 = n33[c27];
      if (u35.POSITION !== void 0) {
        const d34 = t19.json.accessors[u35.POSITION], m34 = d34.min, _21 = d34.max;
        if (m34 !== void 0 && _21 !== void 0) {
          if (l26.setX(Math.max(Math.abs(m34[0]), Math.abs(_21[0]))), l26.setY(Math.max(Math.abs(m34[1]), Math.abs(_21[1]))), l26.setZ(Math.max(Math.abs(m34[2]), Math.abs(_21[2]))), d34.normalized) {
            const y34 = wo(fn4[d34.componentType]);
            l26.multiplyScalar(y34);
          }
          o13.max(l26);
        } else
          console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");
      }
    }
    r24.expandByVector(o13);
  }
  s18.boundingBox = r24;
  const a22 = new Gi2();
  r24.getCenter(a22.center), a22.radius = r24.min.distanceTo(r24.max) / 2, s18.boundingSphere = a22;
}
function Vc2(s18, e11, t19) {
  const i27 = e11.attributes, r24 = [];
  function n33(a22, o13) {
    return t19.getDependency("accessor", a22).then(function(l26) {
      s18.setAttribute(o13, l26);
    });
  }
  for (const a22 in i27) {
    const o13 = Mo[a22] || a22.toLowerCase();
    o13 in s18.attributes || r24.push(n33(i27[a22], o13));
  }
  if (e11.indices !== void 0 && !s18.index) {
    const a22 = t19.getDependency("accessor", e11.indices).then(function(o13) {
      s18.setIndex(o13);
    });
    r24.push(a22);
  }
  return Qi3(s18, e11), E_2(s18, e11, t19), Promise.all(r24).then(function() {
    return e11.targets !== void 0 ? x_2(s18, e11.targets, t19) : s18;
  });
}
var Gc2 = { type: "change" };
var no2 = { type: "start" };
var Wc2 = { type: "end" };
var Fh2 = class extends Ar5 {
  constructor(e11, t19) {
    super(), this.object = e11, this.domElement = t19, this.domElement.style.touchAction = "none", this.enabled = true, this.target = new k20(), this.minDistance = 0, this.maxDistance = 1 / 0, this.minZoom = 0, this.maxZoom = 1 / 0, this.minPolarAngle = 0, this.maxPolarAngle = Math.PI, this.minAzimuthAngle = -1 / 0, this.maxAzimuthAngle = 1 / 0, this.enableDamping = false, this.dampingFactor = 0.05, this.enableZoom = true, this.zoomSpeed = 1, this.enableRotate = true, this.rotateSpeed = 1, this.enablePan = true, this.panSpeed = 1, this.screenSpacePanning = true, this.keyPanSpeed = 7, this.autoRotate = false, this.autoRotateSpeed = 2, this.keys = { LEFT: "ArrowLeft", UP: "ArrowUp", RIGHT: "ArrowRight", BOTTOM: "ArrowDown" }, this.mouseButtons = { LEFT: Br5.ROTATE, MIDDLE: Br5.DOLLY, RIGHT: Br5.PAN }, this.touches = { ONE: Fr5.ROTATE, TWO: Fr5.DOLLY_PAN }, this.target0 = this.target.clone(), this.position0 = this.object.position.clone(), this.zoom0 = this.object.zoom, this._domElementKeyEvents = null, this.getPolarAngle = function() {
      return o13.phi;
    }, this.getAzimuthalAngle = function() {
      return o13.theta;
    }, this.getDistance = function() {
      return this.object.position.distanceTo(this.target);
    }, this.listenToKeyEvents = function(O20) {
      O20.addEventListener("keydown", ot15), this._domElementKeyEvents = O20;
    }, this.stopListenToKeyEvents = function() {
      this._domElementKeyEvents.removeEventListener("keydown", ot15), this._domElementKeyEvents = null;
    }, this.saveState = function() {
      i27.target0.copy(i27.target), i27.position0.copy(i27.object.position), i27.zoom0 = i27.object.zoom;
    }, this.reset = function() {
      i27.target.copy(i27.target0), i27.object.position.copy(i27.position0), i27.object.zoom = i27.zoom0, i27.object.updateProjectionMatrix(), i27.dispatchEvent(Gc2), i27.update(), n33 = r24.NONE;
    }, this.update = function() {
      const O20 = new k20(), ae7 = new jt8().setFromUnitVectors(e11.up, new k20(0, 1, 0)), Z12 = ae7.clone().invert(), xe6 = new k20(), Ae6 = new jt8(), Ce7 = 2 * Math.PI;
      return function() {
        const we8 = i27.object.position;
        O20.copy(we8).sub(i27.target), O20.applyQuaternion(ae7), o13.setFromVector3(O20), i27.autoRotate && n33 === r24.NONE && x36(D18()), i27.enableDamping ? (o13.theta += l26.theta * i27.dampingFactor, o13.phi += l26.phi * i27.dampingFactor) : (o13.theta += l26.theta, o13.phi += l26.phi);
        let Se7 = i27.minAzimuthAngle, Ve8 = i27.maxAzimuthAngle;
        return isFinite(Se7) && isFinite(Ve8) && (Se7 < -Math.PI ? Se7 += Ce7 : Se7 > Math.PI && (Se7 -= Ce7), Ve8 < -Math.PI ? Ve8 += Ce7 : Ve8 > Math.PI && (Ve8 -= Ce7), Se7 <= Ve8 ? o13.theta = Math.max(Se7, Math.min(Ve8, o13.theta)) : o13.theta = o13.theta > (Se7 + Ve8) / 2 ? Math.max(Se7, o13.theta) : Math.min(Ve8, o13.theta)), o13.phi = Math.max(i27.minPolarAngle, Math.min(i27.maxPolarAngle, o13.phi)), o13.makeSafe(), o13.radius *= c27, o13.radius = Math.max(i27.minDistance, Math.min(i27.maxDistance, o13.radius)), i27.enableDamping === true ? i27.target.addScaledVector(h26, i27.dampingFactor) : i27.target.add(h26), O20.setFromSpherical(o13), O20.applyQuaternion(Z12), we8.copy(i27.target).add(O20), i27.object.lookAt(i27.target), i27.enableDamping === true ? (l26.theta *= 1 - i27.dampingFactor, l26.phi *= 1 - i27.dampingFactor, h26.multiplyScalar(1 - i27.dampingFactor)) : (l26.set(0, 0, 0), h26.set(0, 0, 0)), c27 = 1, u35 || xe6.distanceToSquared(i27.object.position) > a22 || 8 * (1 - Ae6.dot(i27.object.quaternion)) > a22 ? (i27.dispatchEvent(Gc2), xe6.copy(i27.object.position), Ae6.copy(i27.object.quaternion), u35 = false, true) : false;
      };
    }(), this.dispose = function() {
      i27.domElement.removeEventListener("contextmenu", L12), i27.domElement.removeEventListener("pointerdown", je7), i27.domElement.removeEventListener("pointercancel", vt9), i27.domElement.removeEventListener("wheel", $e6), i27.domElement.removeEventListener("pointermove", Mt10), i27.domElement.removeEventListener("pointerup", vt9), i27._domElementKeyEvents !== null && (i27._domElementKeyEvents.removeEventListener("keydown", ot15), i27._domElementKeyEvents = null);
    };
    const i27 = this, r24 = {
      NONE: -1,
      ROTATE: 0,
      DOLLY: 1,
      PAN: 2,
      TOUCH_ROTATE: 3,
      TOUCH_PAN: 4,
      TOUCH_DOLLY_PAN: 5,
      TOUCH_DOLLY_ROTATE: 6
    };
    let n33 = r24.NONE;
    const a22 = 1e-6, o13 = new kc2(), l26 = new kc2();
    let c27 = 1;
    const h26 = new k20();
    let u35 = false;
    const d34 = new We7(), m34 = new We7(), _21 = new We7(), y34 = new We7(), f40 = new We7(), p26 = new We7(), A18 = new We7(), M13 = new We7(), E25 = new We7(), w31 = [], I18 = {};
    function D18() {
      return 2 * Math.PI / 60 / 60 * i27.autoRotateSpeed;
    }
    function P20() {
      return Math.pow(0.95, i27.zoomSpeed);
    }
    function x36(O20) {
      l26.theta -= O20;
    }
    function C21(O20) {
      l26.phi -= O20;
    }
    const G16 = function() {
      const O20 = new k20();
      return function(ae7, Z12) {
        O20.setFromMatrixColumn(Z12, 0), O20.multiplyScalar(-ae7), h26.add(O20);
      };
    }(), z21 = function() {
      const O20 = new k20();
      return function(ae7, Z12) {
        i27.screenSpacePanning === true ? O20.setFromMatrixColumn(Z12, 1) : (O20.setFromMatrixColumn(Z12, 0), O20.crossVectors(i27.object.up, O20)), O20.multiplyScalar(ae7), h26.add(O20);
      };
    }(), U20 = function() {
      const O20 = new k20();
      return function(ae7, Z12) {
        const xe6 = i27.domElement;
        if (i27.object.isPerspectiveCamera) {
          const Ae6 = i27.object.position;
          O20.copy(Ae6).sub(i27.target);
          let Ce7 = O20.length();
          Ce7 *= Math.tan(i27.object.fov / 2 * Math.PI / 180), G16(2 * ae7 * Ce7 / xe6.clientHeight, i27.object.matrix), z21(2 * Z12 * Ce7 / xe6.clientHeight, i27.object.matrix);
        } else
          i27.object.isOrthographicCamera ? (G16(ae7 * (i27.object.right - i27.object.left) / i27.object.zoom / xe6.clientWidth, i27.object.matrix), z21(Z12 * (i27.object.top - i27.object.bottom) / i27.object.zoom / xe6.clientHeight, i27.object.matrix)) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."), i27.enablePan = false);
      };
    }();
    function V16(O20) {
      i27.object.isPerspectiveCamera ? c27 /= O20 : i27.object.isOrthographicCamera ? (i27.object.zoom = Math.max(i27.minZoom, Math.min(i27.maxZoom, i27.object.zoom * O20)), i27.object.updateProjectionMatrix(), u35 = true) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), i27.enableZoom = false);
    }
    function j19(O20) {
      i27.object.isPerspectiveCamera ? c27 *= O20 : i27.object.isOrthographicCamera ? (i27.object.zoom = Math.max(i27.minZoom, Math.min(i27.maxZoom, i27.object.zoom / O20)), i27.object.updateProjectionMatrix(), u35 = true) : (console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."), i27.enableZoom = false);
    }
    function W11(O20) {
      d34.set(O20.clientX, O20.clientY);
    }
    function re8(O20) {
      A18.set(O20.clientX, O20.clientY);
    }
    function $25(O20) {
      y34.set(O20.clientX, O20.clientY);
    }
    function ie8(O20) {
      m34.set(O20.clientX, O20.clientY), _21.subVectors(m34, d34).multiplyScalar(i27.rotateSpeed);
      const ae7 = i27.domElement;
      x36(2 * Math.PI * _21.x / ae7.clientHeight), C21(2 * Math.PI * _21.y / ae7.clientHeight), d34.copy(m34), i27.update();
    }
    function le7(O20) {
      M13.set(O20.clientX, O20.clientY), E25.subVectors(M13, A18), E25.y > 0 ? V16(P20()) : E25.y < 0 && j19(P20()), A18.copy(M13), i27.update();
    }
    function fe7(O20) {
      f40.set(O20.clientX, O20.clientY), p26.subVectors(f40, y34).multiplyScalar(i27.panSpeed), U20(p26.x, p26.y), y34.copy(f40), i27.update();
    }
    function ue8(O20) {
      O20.deltaY < 0 ? j19(P20()) : O20.deltaY > 0 && V16(P20()), i27.update();
    }
    function H16(O20) {
      let ae7 = false;
      switch (O20.code) {
        case i27.keys.UP:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? C21(2 * Math.PI * i27.rotateSpeed / i27.domElement.clientHeight) : U20(0, i27.keyPanSpeed), ae7 = true;
          break;
        case i27.keys.BOTTOM:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? C21(-2 * Math.PI * i27.rotateSpeed / i27.domElement.clientHeight) : U20(0, -i27.keyPanSpeed), ae7 = true;
          break;
        case i27.keys.LEFT:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? x36(2 * Math.PI * i27.rotateSpeed / i27.domElement.clientHeight) : U20(i27.keyPanSpeed, 0), ae7 = true;
          break;
        case i27.keys.RIGHT:
          O20.ctrlKey || O20.metaKey || O20.shiftKey ? x36(-2 * Math.PI * i27.rotateSpeed / i27.domElement.clientHeight) : U20(-i27.keyPanSpeed, 0), ae7 = true;
          break;
      }
      ae7 && (O20.preventDefault(), i27.update());
    }
    function q14() {
      if (w31.length === 1)
        d34.set(w31[0].pageX, w31[0].pageY);
      else {
        const O20 = 0.5 * (w31[0].pageX + w31[1].pageX), ae7 = 0.5 * (w31[0].pageY + w31[1].pageY);
        d34.set(O20, ae7);
      }
    }
    function oe7() {
      if (w31.length === 1)
        y34.set(w31[0].pageX, w31[0].pageY);
      else {
        const O20 = 0.5 * (w31[0].pageX + w31[1].pageX), ae7 = 0.5 * (w31[0].pageY + w31[1].pageY);
        y34.set(O20, ae7);
      }
    }
    function K16() {
      const O20 = w31[0].pageX - w31[1].pageX, ae7 = w31[0].pageY - w31[1].pageY, Z12 = Math.sqrt(O20 * O20 + ae7 * ae7);
      A18.set(0, Z12);
    }
    function F19() {
      i27.enableZoom && K16(), i27.enablePan && oe7();
    }
    function ye7() {
      i27.enableZoom && K16(), i27.enableRotate && q14();
    }
    function Le7(O20) {
      if (w31.length == 1)
        m34.set(O20.pageX, O20.pageY);
      else {
        const Z12 = _e7(O20), xe6 = 0.5 * (O20.pageX + Z12.x), Ae6 = 0.5 * (O20.pageY + Z12.y);
        m34.set(xe6, Ae6);
      }
      _21.subVectors(m34, d34).multiplyScalar(i27.rotateSpeed);
      const ae7 = i27.domElement;
      x36(2 * Math.PI * _21.x / ae7.clientHeight), C21(2 * Math.PI * _21.y / ae7.clientHeight), d34.copy(m34);
    }
    function me9(O20) {
      if (w31.length === 1)
        f40.set(O20.pageX, O20.pageY);
      else {
        const ae7 = _e7(O20), Z12 = 0.5 * (O20.pageX + ae7.x), xe6 = 0.5 * (O20.pageY + ae7.y);
        f40.set(Z12, xe6);
      }
      p26.subVectors(f40, y34).multiplyScalar(i27.panSpeed), U20(p26.x, p26.y), y34.copy(f40);
    }
    function De6(O20) {
      const ae7 = _e7(O20), Z12 = O20.pageX - ae7.x, xe6 = O20.pageY - ae7.y, Ae6 = Math.sqrt(Z12 * Z12 + xe6 * xe6);
      M13.set(0, Ae6), E25.set(0, Math.pow(M13.y / A18.y, i27.zoomSpeed)), V16(E25.y), A18.copy(M13);
    }
    function tt12(O20) {
      i27.enableZoom && De6(O20), i27.enablePan && me9(O20);
    }
    function Pe6(O20) {
      i27.enableZoom && De6(O20), i27.enableRotate && Le7(O20);
    }
    function je7(O20) {
      i27.enabled !== false && (w31.length === 0 && (i27.domElement.setPointerCapture(O20.pointerId), i27.domElement.addEventListener("pointermove", Mt10), i27.domElement.addEventListener("pointerup", vt9)), Q12(O20), O20.pointerType === "touch" ? kt10(O20) : St9(O20));
    }
    function Mt10(O20) {
      i27.enabled !== false && (O20.pointerType === "touch" ? N22(O20) : Tt9(O20));
    }
    function vt9(O20) {
      de9(O20), w31.length === 0 && (i27.domElement.releasePointerCapture(O20.pointerId), i27.domElement.removeEventListener("pointermove", Mt10), i27.domElement.removeEventListener("pointerup", vt9)), i27.dispatchEvent(Wc2), n33 = r24.NONE;
    }
    function St9(O20) {
      let ae7;
      switch (O20.button) {
        case 0:
          ae7 = i27.mouseButtons.LEFT;
          break;
        case 1:
          ae7 = i27.mouseButtons.MIDDLE;
          break;
        case 2:
          ae7 = i27.mouseButtons.RIGHT;
          break;
        default:
          ae7 = -1;
      }
      switch (ae7) {
        case Br5.DOLLY:
          if (i27.enableZoom === false)
            return;
          re8(O20), n33 = r24.DOLLY;
          break;
        case Br5.ROTATE:
          if (O20.ctrlKey || O20.metaKey || O20.shiftKey) {
            if (i27.enablePan === false)
              return;
            $25(O20), n33 = r24.PAN;
          } else {
            if (i27.enableRotate === false)
              return;
            W11(O20), n33 = r24.ROTATE;
          }
          break;
        case Br5.PAN:
          if (O20.ctrlKey || O20.metaKey || O20.shiftKey) {
            if (i27.enableRotate === false)
              return;
            W11(O20), n33 = r24.ROTATE;
          } else {
            if (i27.enablePan === false)
              return;
            $25(O20), n33 = r24.PAN;
          }
          break;
        default:
          n33 = r24.NONE;
      }
      n33 !== r24.NONE && i27.dispatchEvent(no2);
    }
    function Tt9(O20) {
      switch (n33) {
        case r24.ROTATE:
          if (i27.enableRotate === false)
            return;
          ie8(O20);
          break;
        case r24.DOLLY:
          if (i27.enableZoom === false)
            return;
          le7(O20);
          break;
        case r24.PAN:
          if (i27.enablePan === false)
            return;
          fe7(O20);
          break;
      }
    }
    function $e6(O20) {
      i27.enabled === false || i27.enableZoom === false || n33 !== r24.NONE || (O20.preventDefault(), i27.dispatchEvent(no2), ue8(O20), i27.dispatchEvent(Wc2));
    }
    function ot15(O20) {
      i27.enabled === false || i27.enablePan === false || H16(O20);
    }
    function kt10(O20) {
      switch (pe8(O20), w31.length) {
        case 1:
          switch (i27.touches.ONE) {
            case Fr5.ROTATE:
              if (i27.enableRotate === false)
                return;
              q14(), n33 = r24.TOUCH_ROTATE;
              break;
            case Fr5.PAN:
              if (i27.enablePan === false)
                return;
              oe7(), n33 = r24.TOUCH_PAN;
              break;
            default:
              n33 = r24.NONE;
          }
          break;
        case 2:
          switch (i27.touches.TWO) {
            case Fr5.DOLLY_PAN:
              if (i27.enableZoom === false && i27.enablePan === false)
                return;
              F19(), n33 = r24.TOUCH_DOLLY_PAN;
              break;
            case Fr5.DOLLY_ROTATE:
              if (i27.enableZoom === false && i27.enableRotate === false)
                return;
              ye7(), n33 = r24.TOUCH_DOLLY_ROTATE;
              break;
            default:
              n33 = r24.NONE;
          }
          break;
        default:
          n33 = r24.NONE;
      }
      n33 !== r24.NONE && i27.dispatchEvent(no2);
    }
    function N22(O20) {
      switch (pe8(O20), n33) {
        case r24.TOUCH_ROTATE:
          if (i27.enableRotate === false)
            return;
          Le7(O20), i27.update();
          break;
        case r24.TOUCH_PAN:
          if (i27.enablePan === false)
            return;
          me9(O20), i27.update();
          break;
        case r24.TOUCH_DOLLY_PAN:
          if (i27.enableZoom === false && i27.enablePan === false)
            return;
          tt12(O20), i27.update();
          break;
        case r24.TOUCH_DOLLY_ROTATE:
          if (i27.enableZoom === false && i27.enableRotate === false)
            return;
          Pe6(O20), i27.update();
          break;
        default:
          n33 = r24.NONE;
      }
    }
    function L12(O20) {
      i27.enabled !== false && O20.preventDefault();
    }
    function Q12(O20) {
      w31.push(O20);
    }
    function de9(O20) {
      delete I18[O20.pointerId];
      for (let ae7 = 0; ae7 < w31.length; ae7++)
        if (w31[ae7].pointerId == O20.pointerId) {
          w31.splice(ae7, 1);
          return;
        }
    }
    function pe8(O20) {
      let ae7 = I18[O20.pointerId];
      ae7 === void 0 && (ae7 = new We7(), I18[O20.pointerId] = ae7), ae7.set(O20.pageX, O20.pageY);
    }
    function _e7(O20) {
      const ae7 = O20.pointerId === w31[0].pointerId ? w31[1] : w31[0];
      return I18[ae7.pointerId];
    }
    i27.domElement.addEventListener("contextmenu", L12), i27.domElement.addEventListener("pointerdown", je7), i27.domElement.addEventListener("pointercancel", vt9), i27.domElement.addEventListener("wheel", $e6, { passive: false }), this.update();
  }
};
var Tr5 = class _Tr {
  static createButton(e11) {
    const t19 = document.createElement("button");
    function i27() {
      let l26 = null;
      async function c27(u35) {
        u35.addEventListener("end", h26), await e11.xr.setSession(u35), t19.textContent = "EXIT VR", l26 = u35;
      }
      function h26() {
        l26.removeEventListener("end", h26), t19.textContent = "ENTER VR", l26 = null;
      }
      t19.style.display = "", t19.style.cursor = "pointer", t19.style.left = "calc(50% - 50px)", t19.style.width = "100px", t19.textContent = "ENTER VR", t19.onmouseenter = function() {
        t19.style.opacity = "1.0";
      }, t19.onmouseleave = function() {
        t19.style.opacity = "0.5";
      }, t19.onclick = function() {
        if (l26 === null) {
          const u35 = { optionalFeatures: ["local-floor", "bounded-floor", "hand-tracking", "layers"] };
          navigator.xr.requestSession("immersive-vr", u35).then(c27);
        } else
          l26.end();
      };
    }
    function r24() {
      t19.style.display = "", t19.style.cursor = "auto", t19.style.left = "calc(50% - 75px)", t19.style.width = "150px", t19.onmouseenter = null, t19.onmouseleave = null, t19.onclick = null;
    }
    function n33() {
      r24(), t19.textContent = "VR NOT SUPPORTED";
    }
    function a22(l26) {
      r24(), console.warn("Exception when trying to call xr.isSessionSupported", l26), t19.textContent = "VR NOT ALLOWED";
    }
    function o13(l26) {
      l26.style.position = "absolute", l26.style.bottom = "20px", l26.style.padding = "12px 6px", l26.style.border = "1px solid #fff", l26.style.borderRadius = "4px", l26.style.background = "rgba(0,0,0,0.1)", l26.style.color = "#fff", l26.style.font = "normal 13px sans-serif", l26.style.textAlign = "center", l26.style.opacity = "0.5", l26.style.outline = "none", l26.style.zIndex = "999";
    }
    if ("xr" in navigator)
      return t19.id = "VRButton", t19.style.display = "none", o13(t19), navigator.xr.isSessionSupported("immersive-vr").then(function(l26) {
        l26 ? i27() : n33(), l26 && _Tr.xrSessionIsGranted && t19.click();
      }).catch(a22), t19;
    {
      const l26 = document.createElement("a");
      return window.isSecureContext === false ? (l26.href = document.location.href.replace(/^http:/, "https:"), l26.innerHTML = "WEBXR NEEDS HTTPS") : (l26.href = "https://immersiveweb.dev/", l26.innerHTML = "WEBXR NOT AVAILABLE"), l26.style.left = "calc(50% - 90px)", l26.style.width = "180px", l26.style.textDecoration = "none", o13(l26), l26;
    }
  }
  static registerSessionGrantedListener() {
    if ("xr" in navigator) {
      if (/WebXRViewer\//i.test(navigator.userAgent))
        return;
      navigator.xr.addEventListener("sessiongranted", () => {
        _Tr.xrSessionIsGranted = true;
      });
    }
  }
};
Tr5.xrSessionIsGranted = false;
Tr5.registerSessionGrantedListener();
function yr4(s18) {
  const e11 = new jt8();
  return s18.forEach((t19) => {
    const i27 = new k20(0, 0, 0);
    t19.axis === "x" && i27.setX(1), t19.axis === "y" && i27.setY(1), t19.axis === "z" && i27.setZ(1);
    const r24 = t19.degrees * Math.PI / 180;
    e11.premultiply(new jt8().setFromAxisAngle(i27, r24));
  }), e11;
}
function Kn5(s18) {
  const [e11, t19, i27, r24] = yr4(s18);
  return [r24, e11, t19, i27];
}
function pa2(s18) {
  return new jt8(s18[1], s18[2], s18[3], s18[0]);
}
function Hh2(s18) {
  if (s18.length === 3) {
    const [e11, t19, i27] = s18;
    return {
      translation: [e11, t19, 0],
      rotation: Kn5([{ axis: "z", degrees: i27 }])
    };
  } else if (s18.length === 4) {
    const [e11, t19, i27, r24] = s18;
    return {
      translation: [e11, t19, i27],
      rotation: Kn5([{ axis: "z", degrees: r24 }])
    };
  } else if (s18.length === 6) {
    const [e11, t19, i27, r24, n33, a22] = s18;
    return {
      translation: [e11, t19, i27],
      rotation: Kn5([
        { axis: "x", degrees: r24 },
        { axis: "y", degrees: n33 },
        { axis: "z", degrees: a22 }
      ])
    };
  } else if (s18.length === 7) {
    const e11 = s18.slice(0, 3), t19 = s18.slice(3, 7);
    return { translation: e11, rotation: t19 };
  }
  return Xo2();
}
function Xo2() {
  return {
    translation: [0, 0, 0],
    rotation: [0, 0, 0, 0]
  };
}
var A_2 = [
  {
    game: "Reefscape",
    src: "/3d-models/Field3d_2025.glb",
    rotations: [{ axis: "x", degrees: 90 }],
    size: [57.57291667, 26.4167],
    unit: "foot"
  },
  {
    game: "Crescendo",
    src: "/3d-models/Field3d_2024.glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 180 }
    ],
    size: [54.2708333, 26.9375],
    unit: "foot"
  },
  {
    game: "Charged Up",
    src: "/3d-models/Field3d_2023.glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 180 }
    ],
    size: [54.27083, 26.2916],
    unit: "foot"
  },
  {
    game: "Rapid React",
    src: "/3d-models/Field3d_2022.glb",
    rotations: [{ axis: "x", degrees: 90 }],
    size: [54, 27],
    unit: "foot"
  },
  {
    game: "Infinite Recharge",
    src: "/3d-models/Field3d_2021.glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 90 }
    ],
    size: [52.4375, 26.9375],
    unit: "foot"
  },
  {
    game: "Evergreen",
    src: "/3d-models/Field3d_Evergreen.glb",
    rotations: [{ axis: "x", degrees: 90 }],
    size: [54, 27],
    unit: "foot"
  }
];
var Vh2 = [
  {
    name: "KitBot",
    src: "/3d-models/Robot_KitBot.glb",
    rotations: [{ axis: "z", degrees: 90 }],
    position: [0.12, 3.15, 0]
  },
  {
    name: "Duck Bot",
    src: "/3d-models/Robot_Duck Bot.glb",
    rotations: [{ axis: "z", degrees: 90 }],
    position: [0, 0, 0]
  },
  {
    name: "Crab Bot",
    src: "/3d-models/Robot_Crab Bot.glb",
    rotations: [
      {
        axis: "z",
        degrees: 180
      }
    ],
    position: [0, 0, 0.045]
  },
  {
    name: "Bot-Bot Awakens (6328)",
    src: "/3d-models/Robot_Bot-Bot Awakens (6328).glb",
    rotations: [
      { axis: "z", degrees: 90 },
      { axis: "y", degrees: 90 }
    ],
    position: [0, 0, 0]
  },
  {
    name: "Bot-Bot Strikes Back (6328)",
    src: "/3d-models/Robot_Bot-Bot Strikes Back (6328).glb",
    rotations: [
      { axis: "x", degrees: 90 },
      { axis: "z", degrees: 90 }
    ],
    position: [0.05, 0, 0.06]
  },
  {
    name: "REV 2023 Starter Bot",
    src: "/3d-models/Robot_REV 2023 Starter Bot.glb",
    rotations: [
      {
        axis: "x",
        degrees: 90
      },
      {
        axis: "z",
        degrees: 90
      }
    ],
    position: [0, 0, 0],
    components: [
      {
        name: "0",
        src: "/3d-models/Robot_REV 2023 Starter Bot_0.glb",
        rotations: [
          {
            axis: "x",
            degrees: 90
          },
          {
            axis: "z",
            degrees: 90
          },
          {
            axis: "y",
            degrees: 211
          }
        ],
        position: [0.645, 0, 0.48]
      },
      {
        name: "1",
        src: "/3d-models/Robot_REV 2023 Starter Bot_1.glb",
        rotations: [
          {
            axis: "x",
            degrees: 90
          },
          {
            axis: "z",
            degrees: 90
          }
        ],
        position: [0.305, 0, -0.37]
      }
    ]
  }
];
var qo2 = [
  {
    name: "R2D2",
    content: `
    <robot name="flexible">
      <link name="base_link">
        <visual>
          <geometry>
            <cylinder length="0.6" radius="0.2"/>
          </geometry>
          <material name="blue">
            <color rgba="0 0 .8 1"/>
          </material>
        </visual>
      </link>
    
      <link name="right_leg">
        <visual>
          <geometry>
            <box size="0.6 .2 .1"/>
          </geometry>
          <origin rpy="0 1.57075 0" xyz="0 0 -0.3"/>
          <material name="white">
            <color rgba="1 1 1 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="base_to_right_leg" type="fixed">
        <parent link="base_link"/>
        <child link="right_leg"/>
        <origin xyz="0.22 0 .25"/>
      </joint>
    
      <link name="right_base">
        <visual>
          <geometry>
            <box size=".1 0.4 .1"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="right_base_joint" type="fixed">
        <parent link="right_leg"/>
        <child link="right_base"/>
        <origin xyz="0 0 -0.6"/>
      </joint>
    
      <link name="right_front_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black">
            <color rgba="0 0 0 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="right_front_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="right_base"/>
        <child link="right_front_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="right_back_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="right_back_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="right_base"/>
        <child link="right_back_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 -0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="left_leg">
        <visual>
          <geometry>
            <box size="0.6 .2 .1"/>
          </geometry>
          <origin rpy="0 1.57075 0" xyz="0 0 -0.3"/>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="base_to_left_leg" type="fixed">
        <parent link="base_link"/>
        <child link="left_leg"/>
        <origin xyz="-0.22 0 .25"/>
      </joint>
    
      <link name="left_base">
        <visual>
          <geometry>
            <box size=".1 0.4 .1"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="left_base_joint" type="fixed">
        <parent link="left_leg"/>
        <child link="left_base"/>
        <origin xyz="0 0 -0.6"/>
      </joint>
    
      <link name="left_front_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="left_front_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="left_base"/>
        <child link="left_front_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
    
      <link name="left_back_wheel">
        <visual>
          <geometry>
            <cylinder length=".1" radius="0.035"/>
          </geometry>
          <material name="black"/>
        </visual>
      </link>
    
      <joint name="left_back_wheel_joint" type="continuous">
        <axis xyz="0 0 1"/>
        <parent link="left_base"/>
        <child link="left_back_wheel"/>
        <origin rpy="0 1.57075 0" xyz="0 -0.133333333333 -0.085"/>
        <limit effort="100" velocity="100"/>
        <dynamics damping="0.0" friction="0.0"/>
      </joint>
      <joint name="gripper_extension" type="prismatic">
        <parent link="base_link"/>
        <child link="gripper_pole"/>
        <limit effort="1000.0" lower="-0.38" upper="0" velocity="0.5"/>
        <origin rpy="0 0 1.57075" xyz="0 0.19 .2"/>
      </joint>
    
      <link name="gripper_pole">
        <visual>
          <geometry>
            <cylinder length="0.2" radius=".01"/>
          </geometry>
          <origin rpy="0 1.57075 0 " xyz="0.1 0 0"/>
          <material name="Gray">
            <color rgba=".7 .7 .7 1"/>
          </material>
        </visual>
      </link>
    
      <joint name="left_gripper_joint" type="revolute">
        <axis xyz="0 0 1"/>
        <limit effort="1000.0" lower="0.0" upper="0.548" velocity="0.5"/>
        <origin rpy="0 0 0" xyz="0.2 0.01 0"/>
        <parent link="gripper_pole"/>
        <child link="left_gripper"/>
      </joint>
    
      <link name="left_gripper">
        <visual>
          <origin rpy="0.0 0 0" xyz="0 0 0"/>
          <geometry>
            <box size="0.1 0.02 0.02"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="left_tip_joint" type="fixed">
        <parent link="left_gripper"/>
        <child link="left_tip"/>
      </joint>
    
      <link name="left_tip">
        <visual>
          <origin rpy="0.0 0 0" xyz="0.09137 0.00495 0"/>
          <geometry>
            <mesh filename="package://pr2_description/meshes/gripper_v0/l_finger_tip.dae"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="right_gripper_joint" type="revolute">
        <axis xyz="0 0 -1"/>
        <limit effort="1000.0" lower="0.0" upper="0.548" velocity="0.5"/>
        <origin rpy="0 0 0" xyz="0.2 -0.01 0"/>
        <parent link="gripper_pole"/>
        <child link="right_gripper"/>
      </joint>
    
      <link name="right_gripper">
        <visual>
          <origin rpy="-3.1415 0 0" xyz="0 0 0"/>
          <geometry>
             <box size="0.1 0.02 0.02"/>
          </geometry>
        </visual>
      </link>
    
      <joint name="right_tip_joint" type="fixed">
        <parent link="right_gripper"/>
        <child link="right_tip"/>
      </joint>
    
      <link name="right_tip">
        <visual>
          <origin rpy="-3.1415 0 0" xyz="0.09137 0.00495 0"/>
          <geometry>
            <mesh filename="package://pr2_description/meshes/gripper_v0/l_finger_tip.dae"/>
          </geometry>
        </visual>
      </link>
    
      <link name="head">
        <visual>
          <geometry>
            <sphere radius="0.2"/>
          </geometry>
          <material name="white"/>
        </visual>
      </link>
    
      <joint name="head_swivel" type="continuous">
        <parent link="base_link"/>
        <child link="head"/>
        <axis xyz="0 0 1"/>
        <origin xyz="0 0 0.3"/>
      </joint>
    
      <link name="box">
        <visual>
          <geometry>
            <box size=".08 .08 .08"/>
          </geometry>
          <material name="blue"/>
        </visual>
      </link>
    
      <joint name="tobox" type="fixed">
        <parent link="head"/>
        <child link="box"/>
        <origin xyz="0 0.1414 0.1414"/>
      </joint>
    
    </robot>
    
    `,
    rotations: [{ axis: "z", degrees: -90 }],
    position: [0, 0, 0.5]
  },
  {
    name: "PI Robot",
    content: `
    <robot name="pi_robot">

      <!-- * * * Link Definitions * * * -->

      <link name="base_link">
        <visual>
            <origin xyz="0 0 0.0425" rpy="0 0 0"/>
          <geometry>
            <box size="0.32 0.26 0.085"/>
          </geometry>
          <material name="Cyan1">
                <color rgba="0 0.9 0.9 1.0"/>
            </material>
        </visual>	
      </link>

      <link name="base_laser">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.025" length="0.07"/>
          </geometry>
          <material name="Black1">
                <color rgba="0.2 0.2 0.2 1.0"/>
            </material>
        </visual>	
      </link>

      <link name="cpu_link">
        <visual>
            <origin xyz="0 0 0.035" rpy="0 0 0"/>
          <geometry>
            <box size="0.19 0.19 0.07"/>
          </geometry>
          <material name="Cyan2">
                <color rgba="0 0.7 0.7 1.0"/>
            </material>
        </visual>	
      </link>

        <link name="upper_base_link">
        <visual>
          <origin xyz="0 0 0.05" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.085" length="0.10"/>
          </geometry>
            <material name="Cyan3">
            <color rgba="0 0.5 0.5 0"/>
          </material>
        </visual>
      </link>

        <link name="torso_link">
        <visual>
          <origin xyz="0 0 0.12" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.05" length="0.24"/>
          </geometry>
            <material name="Yellow2">
            <color rgba="0.8 0.8 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_pan_link">
        <visual>
          <origin xyz="0 0 0.0225" rpy="0 0 0"/>
          <geometry>
            <box size="0.05 0.045 0.045"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_tilt_link">
        <visual>
          <origin xyz="0 0 0.02" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.038 0.04"/>
          </geometry>
            <material name="Green2">
            <color rgba="0.1 0.8 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="neck_link">
        <visual>
          <origin xyz="0 0 0.021" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.042"/>
          </geometry>
            <material name="Green3">
            <color rgba="0.1 0.5 0.1 1.0"/>
          </material>
        </visual>
      </link>

      <link name="head_link">
        <visual>
          <origin xyz="0 0 0.025" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.07 0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <!--	
      <link name="eyes_link">
        <visual>
          <origin xyz="0 0 0.035" rpy="0 0 0" />
          <geometry>
            <box size="0.01 0.04 0.01" />
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>
      -->

      <link name="antenna_link">
        <visual>
          <origin xyz="0 0 0.035" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.002" length="0.05"/>
          </geometry>
            <material name="Grey3">
            <color rgba="0.8 0.8 0.8 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.025 0.015 0.05"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_shoulder_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.025 0.015 0.05"/>
          </geometry>
            <material name="Green1">
            <color rgba="0 1 0 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_forward_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue1">
            <color rgba="0 0 0.9 1.0"/>
          </material>
        </visual>
      </link>
        
      <link name="right_shoulder_forward_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue1">
            <color rgba="0 0 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_shoulder_up_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_shoulder_up_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_upper_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.05"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_upper_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.05"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_elbow_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 1.57"/>
          <geometry>
            <box size="0.035 0.035 0.05"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_elbow_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 1.57"/>
          <geometry>
            <box size="0.035 0.035 0.05"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_lower_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_lower_arm_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <cylinder radius="0.0075" length="0.11"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_wrist_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_wrist_link">
        <visual>
          <origin xyz="0 0 0" rpy="1.57 0 0"/>
          <geometry>
            <box size="0.03 0.05 0.03"/>
          </geometry>
            <material name="Blue2">
            <color rgba="0 0 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="left_hand_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.01 0.06"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.7 0.7 0.7 1.0"/>
          </material>
        </visual>
      </link>

      <link name="right_hand_link">
        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
            <box size="0.03 0.01 0.06"/>
          </geometry>
            <material name="Grey1">
            <color rgba="0.9 0.9 0.9 1.0"/>
          </material>
        </visual>
      </link>

      <!-- * * * Joint Definitions * * * -->

      <joint name="cpu_joint" type="fixed">
          <parent link="base_link"/>
          <child link="cpu_link"/>
          <origin xyz="0.025 0 0.085" rpy="0 0 0"/>
      </joint>

      <joint name="base_laser_joint" type="fixed">
          <parent link="base_link"/>
          <child link="base_laser"/>
          <origin xyz="0.18 0 0.07" rpy="0 0 0"/>
      </joint>

      <joint name="upper_base_joint" type="fixed">
          <parent link="cpu_link"/>
          <child link="upper_base_link"/>
          <origin xyz="0 0 0.07" rpy="0 0 0"/>
      </joint>

      <joint name="torso_joint" type="revolute">
          <parent link="upper_base_link"/>
          <child link="torso_link"/>
          <origin xyz="0 0 0.10" rpy="0 0 0"/>
          <axis xyz="0 0 1"/>
          <limit lower="-3.1416" upper="3.1416" effort="10" velocity="3"/>
        </joint>

      <joint name="head_pan_servo" type="fixed">
          <parent link="torso_link"/>
          <child link="head_pan_link"/>
          <origin xyz="0 0 0.225" rpy="0 0 0"/>
      </joint>

      <joint name="head_pan_joint" type="revolute">
          <parent link="head_pan_link"/>
          <child link="head_tilt_link"/>
          <origin xyz="0 0 0.045" rpy="0 0 0"/>
          <axis xyz="0 0 1"/>
          <limit lower="-3.1416" upper="3.1416" effort="10" velocity="3"/>
        </joint>
        
      <joint name="head_tilt_joint" type="revolute">
          <parent link="head_tilt_link"/>
          <child link="neck_link"/>
          <origin xyz="0 0 0.04" rpy="0 0 0"/>
          <axis xyz="0 1 0"/>
          <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
        </joint>
        
      <joint name="neck_joint" type="fixed">
          <parent link="neck_link"/>
          <child link="head_link"/>
          <origin xyz="0.05 0 0.015" rpy="0 0 0"/>
      </joint>
      <!--	
      <joint name="eyes_joint" type="fixed">
          <parent link="head_link" />
          <child link="eyes_link" />
          <origin xyz="0.02 0 0.03" rpy="0 0 0" />
      </joint>
      -->

      <joint name="antenna_joint" type="fixed">
          <parent link="head_link"/>
          <child link="antenna_link"/>
          <origin xyz="0.0 -0.025 0.065" rpy="0 0 0"/>
      </joint>

      <joint name="left_shoulder_joint" type="fixed">
          <parent link="torso_link"/>
          <child link="left_shoulder_link"/>
          <origin xyz="0 0.055 0.165" rpy="0 0 0"/>
      </joint>

      <joint name="right_shoulder_joint" type="fixed">
          <parent link="torso_link"/>
          <child link="right_shoulder_link"/>
          <origin xyz="0 -0.055 0.165" rpy="0 0 0"/>
      </joint>

      <joint name="left_shoulder_forward_joint" type="revolute">
          <parent link="left_shoulder_link"/>
          <child link="left_shoulder_forward_link"/>
          <origin xyz="0 0.025 0" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="right_shoulder_forward_joint" type="revolute">
          <parent link="right_shoulder_link"/>
          <child link="right_shoulder_forward_link"/>
          <origin xyz="0 -0.025 0" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="left_shoulder_up_joint" type="revolute">
          <parent link="left_shoulder_forward_link"/>
          <child link="left_shoulder_up_link"/>
          <origin xyz="0 0.04 -0.01" rpy="0 -0.707 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 1 0"/>
      </joint>

      <joint name="right_shoulder_up_joint" type="revolute">
          <parent link="right_shoulder_forward_link"/>
          <child link="right_shoulder_up_link"/>
          <origin xyz="0 -0.04 -0.01" rpy="0 -0.707 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="0 1 0"/>
      </joint>

      <joint name="left_upper_arm_joint" type="fixed">
          <parent link="left_shoulder_up_link"/>
          <child link="left_upper_arm_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
      </joint>

      <joint name="right_upper_arm_joint" type="fixed">
          <parent link="right_shoulder_up_link"/>
          <child link="right_upper_arm_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
      </joint>

      <joint name="left_elbow_joint" type="revolute">
          <parent link="left_upper_arm_link"/>
          <child link="left_elbow_link"/>
          <origin xyz="-0.005 0 -0.05" rpy="0 0 0"/>
            <limit lower="-3.146" upper="3.146" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="right_elbow_joint" type="revolute">
          <parent link="right_upper_arm_link"/>
          <child link="right_elbow_link"/>
          <origin xyz="-0.005 0 -0.05" rpy="0 0 0"/>
            <limit lower="-3.146" upper="3.146" effort="10" velocity="3"/>
            <axis xyz="0 0 1"/>
      </joint>

      <joint name="left_lower_arm_joint" type="fixed">
          <parent link="left_elbow_link"/>
          <child link="left_lower_arm_link"/>
          <origin xyz="0 0 -0.08" rpy="0 0 0"/>
      </joint>

      <joint name="right_lower_arm_joint" type="fixed">
          <parent link="right_elbow_link"/>
          <child link="right_lower_arm_link"/>
          <origin xyz="0 0 -0.08" rpy="0 0 0"/>
      </joint>

      <joint name="left_wrist_joint" type="revolute">
          <parent link="left_lower_arm_link"/>
          <child link="left_wrist_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="1 0 0"/>
      </joint>

      <joint name="right_wrist_joint" type="revolute">
          <parent link="right_lower_arm_link"/>
          <child link="right_wrist_link"/>
          <origin xyz="0 0 -0.05" rpy="0 0 0"/>
            <limit lower="-1.57" upper="1.57" effort="10" velocity="3"/>
            <axis xyz="1 0 0"/>
      </joint>

      <joint name="left_hand_joint" type="fixed">
          <parent link="left_wrist_link"/>
          <child link="left_hand_link"/>
          <origin xyz="0 0 -0.055" rpy="0 0 0"/>
      </joint>

      <joint name="right_hand_joint" type="fixed">
          <parent link="right_wrist_link"/>
          <child link="right_hand_link"/>
          <origin xyz="0 0 -0.055" rpy="0 0 0"/>
      </joint>

      </robot>

    `,
    rotations: [],
    position: [0, 0, 0]
  }
];
var Yn4;
var Ks2;
var $s2;
var cn2;
var L_2 = class {
  constructor(e11, t19, i27) {
    Ht7(this, Yn4), Ht7(this, Ks2), Ht7(this, $s2), Ht7(this, cn2, new Lt5()), ei6(this, Yn4, e11), ei6(this, Ks2, t19), ei6(this, $s2, i27), this.create();
  }
  create() {
    var e11, t19;
    const i27 = ft12(this, Yn4).getFieldGroup();
    i27.remove(ft12(this, cn2)), (e11 = ft12(this, $s2)) == null || e11.call(this, this);
    const r24 = new Lt5();
    ei6(this, cn2, r24), i27.add(ft12(this, cn2)), (t19 = ft12(this, Ks2)) == null || t19.call(this, this);
  }
  getGroup() {
    return ft12(this, cn2);
  }
  getField3d() {
    return ft12(this, Yn4);
  }
};
Yn4 = /* @__PURE__ */ new WeakMap(), Ks2 = /* @__PURE__ */ new WeakMap(), $s2 = /* @__PURE__ */ new WeakMap(), cn2 = /* @__PURE__ */ new WeakMap();
var An5 = (s18, e11) => `${s18.replace(/\/$/, "")}/${e11.replace(/^\//, "")}`;
function Gh2(s18) {
  const e11 = s18.lastIndexOf("/");
  return e11 < 0 ? "" : s18.substring(0, e11);
}
var C_2 = Object.defineProperty;
var Rr5 = (s18, e11, t19, i27) => {
  for (var r24 = void 0, n33 = s18.length - 1, a22; n33 >= 0; n33--)
    (a22 = s18[n33]) && (r24 = a22(e11, t19, r24) || r24);
  return r24 && C_2(e11, t19, r24), r24;
};
var nr5 = class So extends x {
  constructor() {
    super(...arguments), this.objectConfigs = Vh2, this.name = this.objectConfigs[0].name, this.pose = [0, 0, 0], this._translation = [0, 0, 0], this._rotation = [0, 0, 0, 0], this.loader = new jo2(), this.group = new Lt5();
  }
  getObjectConfig() {
    return this.objectConfigs.find(({ name: e11 }) => e11 === this.name) ?? this.objectConfigs[0];
  }
  getField() {
    const e11 = this.closest("frc-field3d");
    if (e11)
      return e11;
  }
  static adjustMaterials(e11) {
    e11.traverse((t19) => {
      const i27 = t19;
      if (i27.isMesh && i27.material instanceof as3) {
        const r24 = i27.material;
        r24.metalness = 0, r24.roughness = 1;
      }
    });
  }
  static updatePose(e11, t19) {
    const [i27, r24, n33] = t19.translation;
    e11.position.set(i27, r24, n33), e11.rotation.setFromQuaternion(pa2(t19.rotation));
  }
  loadRobotModel() {
    const e11 = this.getField(), t19 = this.getObjectConfig();
    if (!e11)
      return;
    const i27 = e11.getFieldGroup();
    i27.remove(this.group), this.object && this.group.remove(this.object);
    const r24 = t19.components ?? [], n33 = [t19.src].concat(
      r24.map(({ src: l26 }) => l26)
    ).map(
      (l26) => new Promise((c27) => {
        this.loader.load(
          An5(e11.assetPathPrefix ?? "", l26),
          (h26) => c27(h26)
        );
      })
    ), a22 = new Lt5();
    this.group = a22, i27.add(this.group);
    const o13 = new Lt5();
    this.object = o13, a22.add(o13), o13.rotation.setFromQuaternion(
      yr4(t19.rotations)
    ), o13.position.set(...t19.position), Promise.all(n33).then((l26) => {
      l26.forEach((c27) => {
        So.adjustMaterials(c27.scene), o13.add(c27.scene);
      });
    });
  }
  firstUpdated() {
    this.updateObjectConfigs(), this.renderObject();
  }
  updated(e11) {
    if (e11.has("name") && this.loadRobotModel(), e11.has("translation") || e11.has("rotation") || e11.has("pose"))
      if (this.translation || this.rotation)
        this._translation = this.translation ?? [0, 0, 0], this._rotation = this.rotation ?? [0, 0, 0, 0];
      else if (this.pose.length >= 7)
        this._translation = this.pose.slice(0, 3), this._rotation = this.pose.slice(3, 7);
      else {
        const [t19 = 0, i27 = 0, r24 = 0] = this.pose;
        this._translation = [t19, i27], this._rotation = r24;
      }
  }
  updateObjectConfigs() {
    const e11 = this.getField(), t19 = e11 == null ? void 0 : e11.objectConfigs;
    t19 != null && t19.length && t19 !== this.objectConfigs && (this.objectConfigs = t19, this.objectConfigs.some(
      (i27) => i27.name === this.name
    ) || (this.name = this.objectConfigs[0].name));
  }
  renderObject() {
    this.group && So.updatePose(this.group, {
      translation: this._translation.length === 2 ? [...this._translation, 0] : this._translation,
      rotation: typeof this._rotation == "number" ? Kn5([{ axis: "z", degrees: this._rotation }]) : this._rotation
    }), requestAnimationFrame(() => {
      this.renderObject();
    });
  }
};
Rr5([
  n()
], nr5.prototype, "objectConfigs");
Rr5([
  Rt({ type: String })
], nr5.prototype, "name");
Rr5([
  Rt({ type: Array })
], nr5.prototype, "pose");
Rr5([
  Rt({ type: Array })
], nr5.prototype, "translation");
Rr5([
  Rt({ type: Array })
], nr5.prototype, "rotation");
Rr5([
  n()
], nr5.prototype, "_translation");
Rr5([
  n()
], nr5.prototype, "_rotation");
var Wh2 = nr5;
customElements.get("frc-field3d-object") || customElements.define("frc-field3d-object", Wh2);
var R_2 = class extends rr5 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, i27, r24) {
    const n33 = this, a22 = new ls3(this.manager);
    a22.setPath(this.path), a22.setResponseType("arraybuffer"), a22.setRequestHeader(this.requestHeader), a22.setWithCredentials(this.withCredentials), a22.load(e11, function(o13) {
      try {
        t19(n33.parse(o13));
      } catch (l26) {
        r24 ? r24(l26) : console.error(l26), n33.manager.itemError(e11);
      }
    }, i27, r24);
  }
  parse(e11) {
    function t19(c27) {
      const h26 = new DataView(c27), u35 = 32 / 8 * 3 + 32 / 8 * 3 * 3 + 16 / 8, d34 = h26.getUint32(80, true);
      if (80 + 32 / 8 + d34 * u35 === h26.byteLength)
        return true;
      const m34 = [115, 111, 108, 105, 100];
      for (let _21 = 0; _21 < 5; _21++)
        if (i27(m34, h26, _21))
          return false;
      return true;
    }
    function i27(c27, h26, u35) {
      for (let d34 = 0, m34 = c27.length; d34 < m34; d34++)
        if (c27[d34] !== h26.getUint8(u35 + d34))
          return false;
      return true;
    }
    function r24(c27) {
      const h26 = new DataView(c27), u35 = h26.getUint32(80, true);
      let d34, m34, _21, y34 = false, f40, p26, A18, M13, E25;
      for (let C21 = 0; C21 < 70; C21++)
        h26.getUint32(C21, false) == 1129270351 && h26.getUint8(C21 + 4) == 82 && h26.getUint8(C21 + 5) == 61 && (y34 = true, f40 = new Float32Array(u35 * 3 * 3), p26 = h26.getUint8(C21 + 6) / 255, A18 = h26.getUint8(C21 + 7) / 255, M13 = h26.getUint8(C21 + 8) / 255, E25 = h26.getUint8(C21 + 9) / 255);
      const w31 = 84, I18 = 12 * 4 + 2, D18 = new Xt6(), P20 = new Float32Array(u35 * 3 * 3), x36 = new Float32Array(u35 * 3 * 3);
      for (let C21 = 0; C21 < u35; C21++) {
        const G16 = w31 + C21 * I18, z21 = h26.getFloat32(G16, true), U20 = h26.getFloat32(G16 + 4, true), V16 = h26.getFloat32(G16 + 8, true);
        if (y34) {
          const j19 = h26.getUint16(G16 + 48, true);
          j19 & 32768 ? (d34 = p26, m34 = A18, _21 = M13) : (d34 = (j19 & 31) / 31, m34 = (j19 >> 5 & 31) / 31, _21 = (j19 >> 10 & 31) / 31);
        }
        for (let j19 = 1; j19 <= 3; j19++) {
          const W11 = G16 + j19 * 12, re8 = C21 * 3 * 3 + (j19 - 1) * 3;
          P20[re8] = h26.getFloat32(W11, true), P20[re8 + 1] = h26.getFloat32(W11 + 4, true), P20[re8 + 2] = h26.getFloat32(W11 + 8, true), x36[re8] = z21, x36[re8 + 1] = U20, x36[re8 + 2] = V16, y34 && (f40[re8] = d34, f40[re8 + 1] = m34, f40[re8 + 2] = _21);
        }
      }
      return D18.setAttribute("position", new Ft6(P20, 3)), D18.setAttribute("normal", new Ft6(x36, 3)), y34 && (D18.setAttribute("color", new Ft6(f40, 3)), D18.hasColors = true, D18.alpha = E25), D18;
    }
    function n33(c27) {
      const h26 = new Xt6(), u35 = /solid([\s\S]*?)endsolid/g, d34 = /facet([\s\S]*?)endfacet/g;
      let m34 = 0;
      const _21 = /[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source, y34 = new RegExp("vertex" + _21 + _21 + _21, "g"), f40 = new RegExp("normal" + _21 + _21 + _21, "g"), p26 = [], A18 = [], M13 = new k20();
      let E25, w31 = 0, I18 = 0, D18 = 0;
      for (; (E25 = u35.exec(c27)) !== null; ) {
        I18 = D18;
        const P20 = E25[0];
        for (; (E25 = d34.exec(P20)) !== null; ) {
          let G16 = 0, z21 = 0;
          const U20 = E25[0];
          for (; (E25 = f40.exec(U20)) !== null; )
            M13.x = parseFloat(E25[1]), M13.y = parseFloat(E25[2]), M13.z = parseFloat(E25[3]), z21++;
          for (; (E25 = y34.exec(U20)) !== null; )
            p26.push(parseFloat(E25[1]), parseFloat(E25[2]), parseFloat(E25[3])), A18.push(M13.x, M13.y, M13.z), G16++, D18++;
          z21 !== 1 && console.error("THREE.STLLoader: Something isn't right with the normal of face number " + m34), G16 !== 3 && console.error("THREE.STLLoader: Something isn't right with the vertices of face number " + m34), m34++;
        }
        const x36 = I18, C21 = D18 - I18;
        h26.addGroup(x36, C21, w31), w31++;
      }
      return h26.setAttribute("position", new xt6(p26, 3)), h26.setAttribute("normal", new xt6(A18, 3)), h26;
    }
    function a22(c27) {
      return typeof c27 != "string" ? new TextDecoder().decode(c27) : c27;
    }
    function o13(c27) {
      if (typeof c27 == "string") {
        const h26 = new Uint8Array(c27.length);
        for (let u35 = 0; u35 < c27.length; u35++)
          h26[u35] = c27.charCodeAt(u35) & 255;
        return h26.buffer || h26;
      } else
        return c27;
    }
    const l26 = o13(e11);
    return t19(l26) ? r24(l26) : n33(a22(e11));
  }
};
var jc2 = class extends k02 {
  constructor(e11) {
    super(e11);
  }
  parse(e11) {
    function t19(W11) {
      switch (W11.image_type) {
        case d34:
        case y34:
          (W11.colormap_length > 256 || W11.colormap_size !== 24 || W11.colormap_type !== 1) && console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");
          break;
        case m34:
        case _21:
        case f40:
        case p26:
          W11.colormap_type && console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");
          break;
        case u35:
          console.error("THREE.TGALoader: No data.");
        default:
          console.error('THREE.TGALoader: Invalid type "%s".', W11.image_type);
      }
      (W11.width <= 0 || W11.height <= 0) && console.error("THREE.TGALoader: Invalid image size."), W11.pixel_size !== 8 && W11.pixel_size !== 16 && W11.pixel_size !== 24 && W11.pixel_size !== 32 && console.error('THREE.TGALoader: Invalid pixel size "%s".', W11.pixel_size);
    }
    function i27(W11, re8, $25, ie8, le7) {
      let fe7, ue8;
      const H16 = $25.pixel_size >> 3, q14 = $25.width * $25.height * H16;
      if (re8 && (ue8 = le7.subarray(ie8, ie8 += $25.colormap_length * ($25.colormap_size >> 3))), W11) {
        fe7 = new Uint8Array(q14);
        let oe7, K16, F19, ye7 = 0;
        const Le7 = new Uint8Array(H16);
        for (; ye7 < q14; )
          if (oe7 = le7[ie8++], K16 = (oe7 & 127) + 1, oe7 & 128) {
            for (F19 = 0; F19 < H16; ++F19)
              Le7[F19] = le7[ie8++];
            for (F19 = 0; F19 < K16; ++F19)
              fe7.set(Le7, ye7 + F19 * H16);
            ye7 += H16 * K16;
          } else {
            for (K16 *= H16, F19 = 0; F19 < K16; ++F19)
              fe7[ye7 + F19] = le7[ie8++];
            ye7 += K16;
          }
      } else
        fe7 = le7.subarray(
          ie8,
          ie8 += re8 ? $25.width * $25.height : q14
        );
      return {
        pixel_data: fe7,
        palettes: ue8
      };
    }
    function r24(W11, re8, $25, ie8, le7, fe7, ue8, H16, q14) {
      const oe7 = q14;
      let K16, F19 = 0, ye7, Le7;
      const me9 = C21.width;
      for (Le7 = re8; Le7 !== ie8; Le7 += $25)
        for (ye7 = le7; ye7 !== ue8; ye7 += fe7, F19++)
          K16 = H16[F19], W11[(ye7 + me9 * Le7) * 4 + 3] = 255, W11[(ye7 + me9 * Le7) * 4 + 2] = oe7[K16 * 3 + 0], W11[(ye7 + me9 * Le7) * 4 + 1] = oe7[K16 * 3 + 1], W11[(ye7 + me9 * Le7) * 4 + 0] = oe7[K16 * 3 + 2];
      return W11;
    }
    function n33(W11, re8, $25, ie8, le7, fe7, ue8, H16) {
      let q14, oe7 = 0, K16, F19;
      const ye7 = C21.width;
      for (F19 = re8; F19 !== ie8; F19 += $25)
        for (K16 = le7; K16 !== ue8; K16 += fe7, oe7 += 2)
          q14 = H16[oe7 + 0] + (H16[oe7 + 1] << 8), W11[(K16 + ye7 * F19) * 4 + 0] = (q14 & 31744) >> 7, W11[(K16 + ye7 * F19) * 4 + 1] = (q14 & 992) >> 2, W11[(K16 + ye7 * F19) * 4 + 2] = (q14 & 31) << 3, W11[(K16 + ye7 * F19) * 4 + 3] = q14 & 32768 ? 0 : 255;
      return W11;
    }
    function a22(W11, re8, $25, ie8, le7, fe7, ue8, H16) {
      let q14 = 0, oe7, K16;
      const F19 = C21.width;
      for (K16 = re8; K16 !== ie8; K16 += $25)
        for (oe7 = le7; oe7 !== ue8; oe7 += fe7, q14 += 3)
          W11[(oe7 + F19 * K16) * 4 + 3] = 255, W11[(oe7 + F19 * K16) * 4 + 2] = H16[q14 + 0], W11[(oe7 + F19 * K16) * 4 + 1] = H16[q14 + 1], W11[(oe7 + F19 * K16) * 4 + 0] = H16[q14 + 2];
      return W11;
    }
    function o13(W11, re8, $25, ie8, le7, fe7, ue8, H16) {
      let q14 = 0, oe7, K16;
      const F19 = C21.width;
      for (K16 = re8; K16 !== ie8; K16 += $25)
        for (oe7 = le7; oe7 !== ue8; oe7 += fe7, q14 += 4)
          W11[(oe7 + F19 * K16) * 4 + 2] = H16[q14 + 0], W11[(oe7 + F19 * K16) * 4 + 1] = H16[q14 + 1], W11[(oe7 + F19 * K16) * 4 + 0] = H16[q14 + 2], W11[(oe7 + F19 * K16) * 4 + 3] = H16[q14 + 3];
      return W11;
    }
    function l26(W11, re8, $25, ie8, le7, fe7, ue8, H16) {
      let q14, oe7 = 0, K16, F19;
      const ye7 = C21.width;
      for (F19 = re8; F19 !== ie8; F19 += $25)
        for (K16 = le7; K16 !== ue8; K16 += fe7, oe7++)
          q14 = H16[oe7], W11[(K16 + ye7 * F19) * 4 + 0] = q14, W11[(K16 + ye7 * F19) * 4 + 1] = q14, W11[(K16 + ye7 * F19) * 4 + 2] = q14, W11[(K16 + ye7 * F19) * 4 + 3] = 255;
      return W11;
    }
    function c27(W11, re8, $25, ie8, le7, fe7, ue8, H16) {
      let q14 = 0, oe7, K16;
      const F19 = C21.width;
      for (K16 = re8; K16 !== ie8; K16 += $25)
        for (oe7 = le7; oe7 !== ue8; oe7 += fe7, q14 += 2)
          W11[(oe7 + F19 * K16) * 4 + 0] = H16[q14 + 0], W11[(oe7 + F19 * K16) * 4 + 1] = H16[q14 + 0], W11[(oe7 + F19 * K16) * 4 + 2] = H16[q14 + 0], W11[(oe7 + F19 * K16) * 4 + 3] = H16[q14 + 1];
      return W11;
    }
    function h26(W11, re8, $25, ie8, le7) {
      let fe7, ue8, H16, q14, oe7, K16;
      switch ((C21.flags & A18) >> M13) {
        default:
        case I18:
          fe7 = 0, H16 = 1, oe7 = re8, ue8 = 0, q14 = 1, K16 = $25;
          break;
        case E25:
          fe7 = 0, H16 = 1, oe7 = re8, ue8 = $25 - 1, q14 = -1, K16 = -1;
          break;
        case D18:
          fe7 = re8 - 1, H16 = -1, oe7 = -1, ue8 = 0, q14 = 1, K16 = $25;
          break;
        case w31:
          fe7 = re8 - 1, H16 = -1, oe7 = -1, ue8 = $25 - 1, q14 = -1, K16 = -1;
          break;
      }
      if (U20)
        switch (C21.pixel_size) {
          case 8:
            l26(W11, ue8, q14, K16, fe7, H16, oe7, ie8);
            break;
          case 16:
            c27(W11, ue8, q14, K16, fe7, H16, oe7, ie8);
            break;
          default:
            console.error("THREE.TGALoader: Format not supported.");
            break;
        }
      else
        switch (C21.pixel_size) {
          case 8:
            r24(W11, ue8, q14, K16, fe7, H16, oe7, ie8, le7);
            break;
          case 16:
            n33(W11, ue8, q14, K16, fe7, H16, oe7, ie8);
            break;
          case 24:
            a22(W11, ue8, q14, K16, fe7, H16, oe7, ie8);
            break;
          case 32:
            o13(W11, ue8, q14, K16, fe7, H16, oe7, ie8);
            break;
          default:
            console.error("THREE.TGALoader: Format not supported.");
            break;
        }
      return W11;
    }
    const u35 = 0, d34 = 1, m34 = 2, _21 = 3, y34 = 9, f40 = 10, p26 = 11, A18 = 48, M13 = 4, E25 = 0, w31 = 1, I18 = 2, D18 = 3;
    e11.length < 19 && console.error("THREE.TGALoader: Not enough data to contain header.");
    let P20 = 0;
    const x36 = new Uint8Array(e11), C21 = {
      id_length: x36[P20++],
      colormap_type: x36[P20++],
      image_type: x36[P20++],
      colormap_index: x36[P20++] | x36[P20++] << 8,
      colormap_length: x36[P20++] | x36[P20++] << 8,
      colormap_size: x36[P20++],
      origin: [
        x36[P20++] | x36[P20++] << 8,
        x36[P20++] | x36[P20++] << 8
      ],
      width: x36[P20++] | x36[P20++] << 8,
      height: x36[P20++] | x36[P20++] << 8,
      pixel_size: x36[P20++],
      flags: x36[P20++]
    };
    t19(C21), C21.id_length + P20 > e11.length && console.error("THREE.TGALoader: No data."), P20 += C21.id_length;
    let G16 = false, z21 = false, U20 = false;
    switch (C21.image_type) {
      case y34:
        G16 = true, z21 = true;
        break;
      case d34:
        z21 = true;
        break;
      case f40:
        G16 = true;
        break;
      case m34:
        break;
      case p26:
        G16 = true, U20 = true;
        break;
      case _21:
        U20 = true;
        break;
    }
    const V16 = new Uint8Array(C21.width * C21.height * 4), j19 = i27(G16, z21, C21, P20, x36);
    return h26(V16, C21.width, C21.height, j19.pixel_data, j19.palettes), {
      data: V16,
      width: C21.width,
      height: C21.height,
      flipY: true,
      generateMipmaps: true,
      minFilter: Hi3
    };
  }
};
var N_2 = class extends rr5 {
  constructor(e11) {
    super(e11);
  }
  load(e11, t19, i27, r24) {
    const n33 = this, a22 = n33.path === "" ? is3.extractUrlBase(e11) : n33.path, o13 = new ls3(n33.manager);
    o13.setPath(n33.path), o13.setRequestHeader(n33.requestHeader), o13.setWithCredentials(n33.withCredentials), o13.load(e11, function(l26) {
      try {
        t19(n33.parse(l26, a22));
      } catch (c27) {
        r24 ? r24(c27) : console.error(c27), n33.manager.itemError(e11);
      }
    }, i27, r24);
  }
  parse(e11, t19) {
    function i27(v31, g32) {
      const S23 = [], b35 = v31.childNodes;
      for (let T21 = 0, J12 = b35.length; T21 < J12; T21++) {
        const se6 = b35[T21];
        se6.nodeName === g32 && S23.push(se6);
      }
      return S23;
    }
    function r24(v31) {
      if (v31.length === 0)
        return [];
      const g32 = v31.trim().split(/\s+/), S23 = new Array(g32.length);
      for (let b35 = 0, T21 = g32.length; b35 < T21; b35++)
        S23[b35] = g32[b35];
      return S23;
    }
    function n33(v31) {
      if (v31.length === 0)
        return [];
      const g32 = v31.trim().split(/\s+/), S23 = new Array(g32.length);
      for (let b35 = 0, T21 = g32.length; b35 < T21; b35++)
        S23[b35] = parseFloat(g32[b35]);
      return S23;
    }
    function a22(v31) {
      if (v31.length === 0)
        return [];
      const g32 = v31.trim().split(/\s+/), S23 = new Array(g32.length);
      for (let b35 = 0, T21 = g32.length; b35 < T21; b35++)
        S23[b35] = parseInt(g32[b35]);
      return S23;
    }
    function o13(v31) {
      return v31.substring(1);
    }
    function l26() {
      return "three_default_" + ru2++;
    }
    function c27(v31) {
      return Object.keys(v31).length === 0;
    }
    function h26(v31) {
      return {
        unit: u35(i27(v31, "unit")[0]),
        upAxis: d34(i27(v31, "up_axis")[0])
      };
    }
    function u35(v31) {
      return v31 !== void 0 && v31.hasAttribute("meter") === true ? parseFloat(v31.getAttribute("meter")) : 1;
    }
    function d34(v31) {
      return v31 !== void 0 ? v31.textContent : "Y_UP";
    }
    function m34(v31, g32, S23, b35) {
      const T21 = i27(v31, g32)[0];
      if (T21 !== void 0) {
        const J12 = i27(T21, S23);
        for (let se6 = 0; se6 < J12.length; se6++)
          b35(J12[se6]);
      }
    }
    function _21(v31, g32) {
      for (const S23 in v31) {
        const b35 = v31[S23];
        b35.build = g32(v31[S23]);
      }
    }
    function y34(v31, g32) {
      return v31.build !== void 0 || (v31.build = g32(v31)), v31.build;
    }
    function f40(v31) {
      const g32 = {
        sources: {},
        samplers: {},
        channels: {}
      };
      let S23 = false;
      for (let b35 = 0, T21 = v31.childNodes.length; b35 < T21; b35++) {
        const J12 = v31.childNodes[b35];
        if (J12.nodeType !== 1)
          continue;
        let se6;
        switch (J12.nodeName) {
          case "source":
            se6 = J12.getAttribute("id"), g32.sources[se6] = ce9(J12);
            break;
          case "sampler":
            se6 = J12.getAttribute("id"), g32.samplers[se6] = p26(J12);
            break;
          case "channel":
            se6 = J12.getAttribute("target"), g32.channels[se6] = A18(J12);
            break;
          case "animation":
            f40(J12), S23 = true;
            break;
          default:
            console.log(J12);
        }
      }
      S23 === false && (Oe5.animations[v31.getAttribute("id") || ln4.generateUUID()] = g32);
    }
    function p26(v31) {
      const g32 = {
        inputs: {}
      };
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "input":
              const J12 = o13(T21.getAttribute("source")), se6 = T21.getAttribute("semantic");
              g32.inputs[se6] = J12;
              break;
          }
      }
      return g32;
    }
    function A18(v31) {
      const g32 = {};
      let S23 = v31.getAttribute("target").split("/");
      const b35 = S23.shift();
      let T21 = S23.shift();
      const J12 = T21.indexOf("(") !== -1, se6 = T21.indexOf(".") !== -1;
      if (se6)
        S23 = T21.split("."), T21 = S23.shift(), g32.member = S23.shift();
      else if (J12) {
        const be7 = T21.split("(");
        T21 = be7.shift();
        for (let ge7 = 0; ge7 < be7.length; ge7++)
          be7[ge7] = parseInt(be7[ge7].replace(/\)/, ""));
        g32.indices = be7;
      }
      return g32.id = b35, g32.sid = T21, g32.arraySyntax = J12, g32.memberSyntax = se6, g32.sampler = o13(v31.getAttribute("source")), g32;
    }
    function M13(v31) {
      const g32 = [], S23 = v31.channels, b35 = v31.samplers, T21 = v31.sources;
      for (const J12 in S23)
        if (S23.hasOwnProperty(J12)) {
          const se6 = S23[J12], be7 = b35[se6.sampler], ge7 = be7.inputs.INPUT, Te7 = be7.inputs.OUTPUT, Ie7 = T21[ge7], he8 = T21[Te7], Ee5 = w31(se6, Ie7, he8);
          C21(Ee5, g32);
        }
      return g32;
    }
    function E25(v31) {
      return y34(Oe5.animations[v31], M13);
    }
    function w31(v31, g32, S23) {
      const b35 = Oe5.nodes[v31.id], T21 = At9(b35.id), J12 = b35.transforms[v31.sid], se6 = b35.matrix.clone().transpose();
      let be7, ge7, Te7, Ie7, he8, Ee5;
      const Ne7 = {};
      switch (J12) {
        case "matrix":
          for (Te7 = 0, Ie7 = g32.array.length; Te7 < Ie7; Te7++)
            if (be7 = g32.array[Te7], ge7 = Te7 * S23.stride, Ne7[be7] === void 0 && (Ne7[be7] = {}), v31.arraySyntax === true) {
              const ke7 = S23.array[ge7], pt12 = v31.indices[0] + 4 * v31.indices[1];
              Ne7[be7][pt12] = ke7;
            } else
              for (he8 = 0, Ee5 = S23.stride; he8 < Ee5; he8++)
                Ne7[be7][he8] = S23.array[ge7 + he8];
          break;
        case "translate":
          console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', J12);
          break;
        case "rotate":
          console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', J12);
          break;
        case "scale":
          console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.', J12);
          break;
      }
      const Fe7 = I18(Ne7, se6);
      return {
        name: T21.uuid,
        keyframes: Fe7
      };
    }
    function I18(v31, g32) {
      const S23 = [];
      for (const T21 in v31)
        S23.push({ time: parseFloat(T21), value: v31[T21] });
      S23.sort(b35);
      for (let T21 = 0; T21 < 16; T21++)
        G16(S23, T21, g32.elements[T21]);
      return S23;
      function b35(T21, J12) {
        return T21.time - J12.time;
      }
    }
    const D18 = new k20(), P20 = new k20(), x36 = new jt8();
    function C21(v31, g32) {
      const S23 = v31.keyframes, b35 = v31.name, T21 = [], J12 = [], se6 = [], be7 = [];
      for (let ge7 = 0, Te7 = S23.length; ge7 < Te7; ge7++) {
        const Ie7 = S23[ge7], he8 = Ie7.time, Ee5 = Ie7.value;
        lt13.fromArray(Ee5).transpose(), lt13.decompose(D18, x36, P20), T21.push(he8), J12.push(D18.x, D18.y, D18.z), se6.push(x36.x, x36.y, x36.z, x36.w), be7.push(P20.x, P20.y, P20.z);
      }
      return J12.length > 0 && g32.push(new Sr5(b35 + ".position", T21, J12)), se6.length > 0 && g32.push(new ir5(b35 + ".quaternion", T21, se6)), be7.length > 0 && g32.push(new Sr5(b35 + ".scale", T21, be7)), g32;
    }
    function G16(v31, g32, S23) {
      let b35, T21 = true, J12, se6;
      for (J12 = 0, se6 = v31.length; J12 < se6; J12++)
        b35 = v31[J12], b35.value[g32] === void 0 ? b35.value[g32] = null : T21 = false;
      if (T21 === true)
        for (J12 = 0, se6 = v31.length; J12 < se6; J12++)
          b35 = v31[J12], b35.value[g32] = S23;
      else
        z21(v31, g32);
    }
    function z21(v31, g32) {
      let S23, b35;
      for (let T21 = 0, J12 = v31.length; T21 < J12; T21++) {
        const se6 = v31[T21];
        if (se6.value[g32] === null) {
          if (S23 = U20(v31, T21, g32), b35 = V16(v31, T21, g32), S23 === null) {
            se6.value[g32] = b35.value[g32];
            continue;
          }
          if (b35 === null) {
            se6.value[g32] = S23.value[g32];
            continue;
          }
          j19(se6, S23, b35, g32);
        }
      }
    }
    function U20(v31, g32, S23) {
      for (; g32 >= 0; ) {
        const b35 = v31[g32];
        if (b35.value[S23] !== null)
          return b35;
        g32--;
      }
      return null;
    }
    function V16(v31, g32, S23) {
      for (; g32 < v31.length; ) {
        const b35 = v31[g32];
        if (b35.value[S23] !== null)
          return b35;
        g32++;
      }
      return null;
    }
    function j19(v31, g32, S23, b35) {
      if (S23.time - g32.time === 0) {
        v31.value[b35] = g32.value[b35];
        return;
      }
      v31.value[b35] = (v31.time - g32.time) * (S23.value[b35] - g32.value[b35]) / (S23.time - g32.time) + g32.value[b35];
    }
    function W11(v31) {
      const g32 = {
        name: v31.getAttribute("id") || "default",
        start: parseFloat(v31.getAttribute("start") || 0),
        end: parseFloat(v31.getAttribute("end") || 0),
        animations: []
      };
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "instance_animation":
              g32.animations.push(o13(T21.getAttribute("url")));
              break;
          }
      }
      Oe5.clips[v31.getAttribute("id")] = g32;
    }
    function re8(v31) {
      const g32 = [], S23 = v31.name, b35 = v31.end - v31.start || -1, T21 = v31.animations;
      for (let J12 = 0, se6 = T21.length; J12 < se6; J12++) {
        const be7 = E25(T21[J12]);
        for (let ge7 = 0, Te7 = be7.length; ge7 < Te7; ge7++)
          g32.push(be7[ge7]);
      }
      return new bo(S23, b35, g32);
    }
    function $25(v31) {
      return y34(Oe5.clips[v31], re8);
    }
    function ie8(v31) {
      const g32 = {};
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "skin":
              g32.id = o13(T21.getAttribute("source")), g32.skin = le7(T21);
              break;
            case "morph":
              g32.id = o13(T21.getAttribute("source")), console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");
              break;
          }
      }
      Oe5.controllers[v31.getAttribute("id")] = g32;
    }
    function le7(v31) {
      const g32 = {
        sources: {}
      };
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "bind_shape_matrix":
              g32.bindShapeMatrix = n33(T21.textContent);
              break;
            case "source":
              const J12 = T21.getAttribute("id");
              g32.sources[J12] = ce9(T21);
              break;
            case "joints":
              g32.joints = fe7(T21);
              break;
            case "vertex_weights":
              g32.vertexWeights = ue8(T21);
              break;
          }
      }
      return g32;
    }
    function fe7(v31) {
      const g32 = {
        inputs: {}
      };
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "input":
              const J12 = T21.getAttribute("semantic"), se6 = o13(T21.getAttribute("source"));
              g32.inputs[J12] = se6;
              break;
          }
      }
      return g32;
    }
    function ue8(v31) {
      const g32 = {
        inputs: {}
      };
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "input":
              const J12 = T21.getAttribute("semantic"), se6 = o13(T21.getAttribute("source")), be7 = parseInt(T21.getAttribute("offset"));
              g32.inputs[J12] = { id: se6, offset: be7 };
              break;
            case "vcount":
              g32.vcount = a22(T21.textContent);
              break;
            case "v":
              g32.v = a22(T21.textContent);
              break;
          }
      }
      return g32;
    }
    function H16(v31) {
      const g32 = {
        id: v31.id
      }, S23 = Oe5.geometries[g32.id];
      return v31.skin !== void 0 && (g32.skin = q14(v31.skin), S23.sources.skinIndices = g32.skin.indices, S23.sources.skinWeights = g32.skin.weights), g32;
    }
    function q14(v31) {
      const g32 = {
        joints: [],
        // this must be an array to preserve the joint order
        indices: {
          array: [],
          stride: 4
        },
        weights: {
          array: [],
          stride: 4
        }
      }, S23 = v31.sources, b35 = v31.vertexWeights, T21 = b35.vcount, J12 = b35.v, se6 = b35.inputs.JOINT.offset, be7 = b35.inputs.WEIGHT.offset, ge7 = v31.sources[v31.joints.inputs.JOINT], Te7 = v31.sources[v31.joints.inputs.INV_BIND_MATRIX], Ie7 = S23[b35.inputs.WEIGHT.id].array;
      let he8 = 0, Ee5, Ne7, Fe7;
      for (Ee5 = 0, Fe7 = T21.length; Ee5 < Fe7; Ee5++) {
        const pt12 = T21[Ee5], ct12 = [];
        for (Ne7 = 0; Ne7 < pt12; Ne7++) {
          const st14 = J12[he8 + se6], ut12 = J12[he8 + be7], Ri5 = Ie7[ut12];
          ct12.push({ index: st14, weight: Ri5 }), he8 += 2;
        }
        for (ct12.sort(ke7), Ne7 = 0; Ne7 < 4; Ne7++) {
          const st14 = ct12[Ne7];
          st14 !== void 0 ? (g32.indices.array.push(st14.index), g32.weights.array.push(st14.weight)) : (g32.indices.array.push(0), g32.weights.array.push(0));
        }
      }
      for (v31.bindShapeMatrix ? g32.bindMatrix = new He6().fromArray(v31.bindShapeMatrix).transpose() : g32.bindMatrix = new He6().identity(), Ee5 = 0, Fe7 = ge7.array.length; Ee5 < Fe7; Ee5++) {
        const pt12 = ge7.array[Ee5], ct12 = new He6().fromArray(Te7.array, Ee5 * Te7.stride).transpose();
        g32.joints.push({ name: pt12, boneInverse: ct12 });
      }
      return g32;
      function ke7(pt12, ct12) {
        return ct12.weight - pt12.weight;
      }
    }
    function oe7(v31) {
      return y34(Oe5.controllers[v31], H16);
    }
    function K16(v31) {
      const g32 = {
        init_from: i27(v31, "init_from")[0].textContent
      };
      Oe5.images[v31.getAttribute("id")] = g32;
    }
    function F19(v31) {
      return v31.build !== void 0 ? v31.build : v31.init_from;
    }
    function ye7(v31) {
      const g32 = Oe5.images[v31];
      return g32 !== void 0 ? y34(g32, F19) : (console.warn("THREE.ColladaLoader: Couldn't find image with ID:", v31), null);
    }
    function Le7(v31) {
      const g32 = {};
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "profile_COMMON":
              g32.profile = me9(T21);
              break;
          }
      }
      Oe5.effects[v31.getAttribute("id")] = g32;
    }
    function me9(v31) {
      const g32 = {
        surfaces: {},
        samplers: {}
      };
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "newparam":
              De6(T21, g32);
              break;
            case "technique":
              g32.technique = je7(T21);
              break;
            case "extra":
              g32.extra = ot15(T21);
              break;
          }
      }
      return g32;
    }
    function De6(v31, g32) {
      const S23 = v31.getAttribute("sid");
      for (let b35 = 0, T21 = v31.childNodes.length; b35 < T21; b35++) {
        const J12 = v31.childNodes[b35];
        if (J12.nodeType === 1)
          switch (J12.nodeName) {
            case "surface":
              g32.surfaces[S23] = tt12(J12);
              break;
            case "sampler2D":
              g32.samplers[S23] = Pe6(J12);
              break;
          }
      }
    }
    function tt12(v31) {
      const g32 = {};
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "init_from":
              g32.init_from = T21.textContent;
              break;
          }
      }
      return g32;
    }
    function Pe6(v31) {
      const g32 = {};
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "source":
              g32.source = T21.textContent;
              break;
          }
      }
      return g32;
    }
    function je7(v31) {
      const g32 = {};
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "constant":
            case "lambert":
            case "blinn":
            case "phong":
              g32.type = T21.nodeName, g32.parameters = Mt10(T21);
              break;
            case "extra":
              g32.extra = ot15(T21);
              break;
          }
      }
      return g32;
    }
    function Mt10(v31) {
      const g32 = {};
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "emission":
            case "diffuse":
            case "specular":
            case "bump":
            case "ambient":
            case "shininess":
            case "transparency":
              g32[T21.nodeName] = vt9(T21);
              break;
            case "transparent":
              g32[T21.nodeName] = {
                opaque: T21.hasAttribute("opaque") ? T21.getAttribute("opaque") : "A_ONE",
                data: vt9(T21)
              };
              break;
          }
      }
      return g32;
    }
    function vt9(v31) {
      const g32 = {};
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "color":
              g32[T21.nodeName] = n33(T21.textContent);
              break;
            case "float":
              g32[T21.nodeName] = parseFloat(T21.textContent);
              break;
            case "texture":
              g32[T21.nodeName] = { id: T21.getAttribute("texture"), extra: St9(T21) };
              break;
          }
      }
      return g32;
    }
    function St9(v31) {
      const g32 = {
        technique: {}
      };
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "extra":
              Tt9(T21, g32);
              break;
          }
      }
      return g32;
    }
    function Tt9(v31, g32) {
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "technique":
              $e6(T21, g32);
              break;
          }
      }
    }
    function $e6(v31, g32) {
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "repeatU":
            case "repeatV":
            case "offsetU":
            case "offsetV":
              g32.technique[T21.nodeName] = parseFloat(T21.textContent);
              break;
            case "wrapU":
            case "wrapV":
              T21.textContent.toUpperCase() === "TRUE" ? g32.technique[T21.nodeName] = 1 : T21.textContent.toUpperCase() === "FALSE" ? g32.technique[T21.nodeName] = 0 : g32.technique[T21.nodeName] = parseInt(T21.textContent);
              break;
            case "bump":
              g32[T21.nodeName] = N22(T21);
              break;
          }
      }
    }
    function ot15(v31) {
      const g32 = {};
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "technique":
              g32.technique = kt10(T21);
              break;
          }
      }
      return g32;
    }
    function kt10(v31) {
      const g32 = {};
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "double_sided":
              g32[T21.nodeName] = parseInt(T21.textContent);
              break;
            case "bump":
              g32[T21.nodeName] = N22(T21);
              break;
          }
      }
      return g32;
    }
    function N22(v31) {
      const g32 = {};
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "texture":
              g32[T21.nodeName] = { id: T21.getAttribute("texture"), texcoord: T21.getAttribute("texcoord"), extra: St9(T21) };
              break;
          }
      }
      return g32;
    }
    function L12(v31) {
      return v31;
    }
    function Q12(v31) {
      return y34(Oe5.effects[v31], L12);
    }
    function de9(v31) {
      const g32 = {
        name: v31.getAttribute("name")
      };
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "instance_effect":
              g32.url = o13(T21.getAttribute("url"));
              break;
          }
      }
      Oe5.materials[v31.getAttribute("id")] = g32;
    }
    function pe8(v31) {
      let g32, S23 = v31.slice((v31.lastIndexOf(".") - 1 >>> 0) + 2);
      switch (S23 = S23.toLowerCase(), S23) {
        case "tga":
          g32 = ba2;
          break;
        default:
          g32 = Jo2;
      }
      return g32;
    }
    function _e7(v31) {
      const g32 = Q12(v31.url), S23 = g32.profile.technique;
      let b35;
      switch (S23.type) {
        case "phong":
        case "blinn":
          b35 = new Jn5();
          break;
        case "lambert":
          b35 = new T02();
          break;
        default:
          b35 = new xi6();
          break;
      }
      b35.name = v31.name || "";
      function T21(ge7, Te7 = null) {
        const Ie7 = g32.profile.samplers[ge7.id];
        let he8 = null;
        if (Ie7 !== void 0) {
          const Ee5 = g32.profile.surfaces[Ie7.source];
          he8 = ye7(Ee5.init_from);
        } else
          console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."), he8 = ye7(ge7.id);
        if (he8 !== null) {
          const Ee5 = pe8(he8);
          if (Ee5 !== void 0) {
            const Ne7 = Ee5.load(he8), Fe7 = ge7.extra;
            if (Fe7 !== void 0 && Fe7.technique !== void 0 && c27(Fe7.technique) === false) {
              const ke7 = Fe7.technique;
              Ne7.wrapS = ke7.wrapU ? Ti4 : Zt6, Ne7.wrapT = ke7.wrapV ? Ti4 : Zt6, Ne7.offset.set(ke7.offsetU || 0, ke7.offsetV || 0), Ne7.repeat.set(ke7.repeatU || 1, ke7.repeatV || 1);
            } else
              Ne7.wrapS = Ti4, Ne7.wrapT = Ti4;
            return Te7 !== null && (Ne7.encoding = Te7), Ne7;
          } else
            return console.warn("THREE.ColladaLoader: Loader for texture %s not found.", he8), null;
        } else
          return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:", ge7.id), null;
      }
      const J12 = S23.parameters;
      for (const ge7 in J12) {
        const Te7 = J12[ge7];
        switch (ge7) {
          case "diffuse":
            Te7.color && b35.color.fromArray(Te7.color), Te7.texture && (b35.map = T21(Te7.texture, rt12));
            break;
          case "specular":
            Te7.color && b35.specular && b35.specular.fromArray(Te7.color), Te7.texture && (b35.specularMap = T21(Te7.texture));
            break;
          case "bump":
            Te7.texture && (b35.normalMap = T21(Te7.texture));
            break;
          case "ambient":
            Te7.texture && (b35.lightMap = T21(Te7.texture, rt12));
            break;
          case "shininess":
            Te7.float && b35.shininess && (b35.shininess = Te7.float);
            break;
          case "emission":
            Te7.color && b35.emissive && b35.emissive.fromArray(Te7.color), Te7.texture && (b35.emissiveMap = T21(Te7.texture, rt12));
            break;
        }
      }
      b35.color.convertSRGBToLinear(), b35.specular && b35.specular.convertSRGBToLinear(), b35.emissive && b35.emissive.convertSRGBToLinear();
      let se6 = J12.transparent, be7 = J12.transparency;
      if (be7 === void 0 && se6 && (be7 = {
        float: 1
      }), se6 === void 0 && be7 && (se6 = {
        opaque: "A_ONE",
        data: {
          color: [1, 1, 1, 1]
        }
      }), se6 && be7)
        if (se6.data.texture)
          b35.transparent = true;
        else {
          const ge7 = se6.data.color;
          switch (se6.opaque) {
            case "A_ONE":
              b35.opacity = ge7[3] * be7.float;
              break;
            case "RGB_ZERO":
              b35.opacity = 1 - ge7[0] * be7.float;
              break;
            case "A_ZERO":
              b35.opacity = 1 - ge7[3] * be7.float;
              break;
            case "RGB_ONE":
              b35.opacity = ge7[0] * be7.float;
              break;
            default:
              console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.', se6.opaque);
          }
          b35.opacity < 1 && (b35.transparent = true);
        }
      if (S23.extra !== void 0 && S23.extra.technique !== void 0) {
        const ge7 = S23.extra.technique;
        for (const Te7 in ge7) {
          const Ie7 = ge7[Te7];
          switch (Te7) {
            case "double_sided":
              b35.side = Ie7 === 1 ? ui6 : Ei5;
              break;
            case "bump":
              b35.normalMap = T21(Ie7.texture), b35.normalScale = new We7(1, 1);
              break;
          }
        }
      }
      return b35;
    }
    function O20(v31) {
      return y34(Oe5.materials[v31], _e7);
    }
    function ae7(v31) {
      const g32 = {
        name: v31.getAttribute("name")
      };
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "optics":
              g32.optics = Z12(T21);
              break;
          }
      }
      Oe5.cameras[v31.getAttribute("id")] = g32;
    }
    function Z12(v31) {
      for (let g32 = 0; g32 < v31.childNodes.length; g32++) {
        const S23 = v31.childNodes[g32];
        switch (S23.nodeName) {
          case "technique_common":
            return xe6(S23);
        }
      }
      return {};
    }
    function xe6(v31) {
      const g32 = {};
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        switch (b35.nodeName) {
          case "perspective":
          case "orthographic":
            g32.technique = b35.nodeName, g32.parameters = Ae6(b35);
            break;
        }
      }
      return g32;
    }
    function Ae6(v31) {
      const g32 = {};
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        switch (b35.nodeName) {
          case "xfov":
          case "yfov":
          case "xmag":
          case "ymag":
          case "znear":
          case "zfar":
          case "aspect_ratio":
            g32[b35.nodeName] = parseFloat(b35.textContent);
            break;
        }
      }
      return g32;
    }
    function Ce7(v31) {
      let g32;
      switch (v31.optics.technique) {
        case "perspective":
          g32 = new Bt6(
            v31.optics.parameters.yfov,
            v31.optics.parameters.aspect_ratio,
            v31.optics.parameters.znear,
            v31.optics.parameters.zfar
          );
          break;
        case "orthographic":
          let S23 = v31.optics.parameters.ymag, b35 = v31.optics.parameters.xmag;
          const T21 = v31.optics.parameters.aspect_ratio;
          b35 = b35 === void 0 ? S23 * T21 : b35, S23 = S23 === void 0 ? b35 / T21 : S23, b35 *= 0.5, S23 *= 0.5, g32 = new la2(
            -b35,
            b35,
            S23,
            -S23,
            // left, right, top, bottom
            v31.optics.parameters.znear,
            v31.optics.parameters.zfar
          );
          break;
        default:
          g32 = new Bt6();
          break;
      }
      return g32.name = v31.name || "", g32;
    }
    function we8(v31) {
      const g32 = Oe5.cameras[v31];
      return g32 !== void 0 ? y34(g32, Ce7) : (console.warn("THREE.ColladaLoader: Couldn't find camera with ID:", v31), null);
    }
    function Se7(v31) {
      let g32 = {};
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "technique_common":
              g32 = Ve8(T21);
              break;
          }
      }
      Oe5.lights[v31.getAttribute("id")] = g32;
    }
    function Ve8(v31) {
      const g32 = {};
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "directional":
            case "point":
            case "spot":
            case "ambient":
              g32.technique = T21.nodeName, g32.parameters = nt17(T21);
          }
      }
      return g32;
    }
    function nt17(v31) {
      const g32 = {};
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "color":
              const J12 = n33(T21.textContent);
              g32.color = new ze7().fromArray(J12).convertSRGBToLinear();
              break;
            case "falloff_angle":
              g32.falloffAngle = parseFloat(T21.textContent);
              break;
            case "quadratic_attenuation":
              const se6 = parseFloat(T21.textContent);
              g32.distance = se6 ? Math.sqrt(1 / se6) : 0;
              break;
          }
      }
      return g32;
    }
    function wt10(v31) {
      let g32;
      switch (v31.technique) {
        case "directional":
          g32 = new Oh2();
          break;
        case "point":
          g32 = new da2();
          break;
        case "spot":
          g32 = new Uh2();
          break;
        case "ambient":
          g32 = new B02();
          break;
      }
      return v31.parameters.color && g32.color.copy(v31.parameters.color), v31.parameters.distance && (g32.distance = v31.parameters.distance), g32;
    }
    function B22(v31) {
      const g32 = Oe5.lights[v31];
      return g32 !== void 0 ? y34(g32, wt10) : (console.warn("THREE.ColladaLoader: Couldn't find light with ID:", v31), null);
    }
    function te7(v31) {
      const g32 = {
        name: v31.getAttribute("name"),
        sources: {},
        vertices: {},
        primitives: []
      }, S23 = i27(v31, "mesh")[0];
      if (S23 !== void 0) {
        for (let b35 = 0; b35 < S23.childNodes.length; b35++) {
          const T21 = S23.childNodes[b35];
          if (T21.nodeType !== 1)
            continue;
          const J12 = T21.getAttribute("id");
          switch (T21.nodeName) {
            case "source":
              g32.sources[J12] = ce9(T21);
              break;
            case "vertices":
              g32.vertices = Me7(T21);
              break;
            case "polygons":
              console.warn("THREE.ColladaLoader: Unsupported primitive type: ", T21.nodeName);
              break;
            case "lines":
            case "linestrips":
            case "polylist":
            case "triangles":
              g32.primitives.push(Ue7(T21));
              break;
            default:
              console.log(T21);
          }
        }
        Oe5.geometries[v31.getAttribute("id")] = g32;
      }
    }
    function ce9(v31) {
      const g32 = {
        array: [],
        stride: 3
      };
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        if (b35.nodeType === 1)
          switch (b35.nodeName) {
            case "float_array":
              g32.array = n33(b35.textContent);
              break;
            case "Name_array":
              g32.array = r24(b35.textContent);
              break;
            case "technique_common":
              const T21 = i27(b35, "accessor")[0];
              T21 !== void 0 && (g32.stride = parseInt(T21.getAttribute("stride")));
              break;
          }
      }
      return g32;
    }
    function Me7(v31) {
      const g32 = {};
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        b35.nodeType === 1 && (g32[b35.getAttribute("semantic")] = o13(b35.getAttribute("source")));
      }
      return g32;
    }
    function Ue7(v31) {
      const g32 = {
        type: v31.nodeName,
        material: v31.getAttribute("material"),
        count: parseInt(v31.getAttribute("count")),
        inputs: {},
        stride: 0,
        hasUV: false
      };
      for (let S23 = 0, b35 = v31.childNodes.length; S23 < b35; S23++) {
        const T21 = v31.childNodes[S23];
        if (T21.nodeType === 1)
          switch (T21.nodeName) {
            case "input":
              const J12 = o13(T21.getAttribute("source")), se6 = T21.getAttribute("semantic"), be7 = parseInt(T21.getAttribute("offset")), ge7 = parseInt(T21.getAttribute("set")), Te7 = ge7 > 0 ? se6 + ge7 : se6;
              g32.inputs[Te7] = { id: J12, offset: be7 }, g32.stride = Math.max(g32.stride, be7 + 1), se6 === "TEXCOORD" && (g32.hasUV = true);
              break;
            case "vcount":
              g32.vcount = a22(T21.textContent);
              break;
            case "p":
              g32.p = a22(T21.textContent);
              break;
          }
      }
      return g32;
    }
    function dt14(v31) {
      const g32 = {};
      for (let S23 = 0; S23 < v31.length; S23++) {
        const b35 = v31[S23];
        g32[b35.type] === void 0 && (g32[b35.type] = []), g32[b35.type].push(b35);
      }
      return g32;
    }
    function bt10(v31) {
      let g32 = 0;
      for (let S23 = 0, b35 = v31.length; S23 < b35; S23++)
        v31[S23].hasUV === true && g32++;
      g32 > 0 && g32 < v31.length && (v31.uvsNeedsFix = true);
    }
    function Nt9(v31) {
      const g32 = {}, S23 = v31.sources, b35 = v31.vertices, T21 = v31.primitives;
      if (T21.length === 0)
        return {};
      const J12 = dt14(T21);
      for (const se6 in J12) {
        const be7 = J12[se6];
        bt10(be7), g32[se6] = Mi5(be7, S23, b35);
      }
      return g32;
    }
    function Mi5(v31, g32, S23) {
      const b35 = {}, T21 = { array: [], stride: 0 }, J12 = { array: [], stride: 0 }, se6 = { array: [], stride: 0 }, be7 = { array: [], stride: 0 }, ge7 = { array: [], stride: 0 }, Te7 = { array: [], stride: 4 }, Ie7 = { array: [], stride: 4 }, he8 = new Xt6(), Ee5 = [];
      let Ne7 = 0;
      for (let Fe7 = 0; Fe7 < v31.length; Fe7++) {
        const ke7 = v31[Fe7], pt12 = ke7.inputs;
        let ct12 = 0;
        switch (ke7.type) {
          case "lines":
          case "linestrips":
            ct12 = ke7.count * 2;
            break;
          case "triangles":
            ct12 = ke7.count * 3;
            break;
          case "polylist":
            for (let st14 = 0; st14 < ke7.count; st14++) {
              const ut12 = ke7.vcount[st14];
              switch (ut12) {
                case 3:
                  ct12 += 3;
                  break;
                case 4:
                  ct12 += 6;
                  break;
                default:
                  ct12 += (ut12 - 2) * 3;
                  break;
              }
            }
            break;
          default:
            console.warn("THREE.ColladaLoader: Unknow primitive type:", ke7.type);
        }
        he8.addGroup(Ne7, ct12, Fe7), Ne7 += ct12, ke7.material && Ee5.push(ke7.material);
        for (const st14 in pt12) {
          const ut12 = pt12[st14];
          switch (st14) {
            case "VERTEX":
              for (const Ri5 in S23) {
                const oi7 = S23[Ri5];
                switch (Ri5) {
                  case "POSITION":
                    const zr6 = T21.array.length;
                    if (it16(ke7, g32[oi7], ut12.offset, T21.array), T21.stride = g32[oi7].stride, g32.skinWeights && g32.skinIndices && (it16(ke7, g32.skinIndices, ut12.offset, Te7.array), it16(ke7, g32.skinWeights, ut12.offset, Ie7.array)), ke7.hasUV === false && v31.uvsNeedsFix === true) {
                      const nu2 = (T21.array.length - zr6) / T21.stride;
                      for (let $o2 = 0; $o2 < nu2; $o2++)
                        se6.array.push(0, 0);
                    }
                    break;
                  case "NORMAL":
                    it16(ke7, g32[oi7], ut12.offset, J12.array), J12.stride = g32[oi7].stride;
                    break;
                  case "COLOR":
                    it16(ke7, g32[oi7], ut12.offset, ge7.array), ge7.stride = g32[oi7].stride;
                    break;
                  case "TEXCOORD":
                    it16(ke7, g32[oi7], ut12.offset, se6.array), se6.stride = g32[oi7].stride;
                    break;
                  case "TEXCOORD1":
                    it16(ke7, g32[oi7], ut12.offset, be7.array), se6.stride = g32[oi7].stride;
                    break;
                  default:
                    console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.', Ri5);
                }
              }
              break;
            case "NORMAL":
              it16(ke7, g32[ut12.id], ut12.offset, J12.array), J12.stride = g32[ut12.id].stride;
              break;
            case "COLOR":
              it16(ke7, g32[ut12.id], ut12.offset, ge7.array, true), ge7.stride = g32[ut12.id].stride;
              break;
            case "TEXCOORD":
              it16(ke7, g32[ut12.id], ut12.offset, se6.array), se6.stride = g32[ut12.id].stride;
              break;
            case "TEXCOORD1":
              it16(ke7, g32[ut12.id], ut12.offset, be7.array), be7.stride = g32[ut12.id].stride;
              break;
          }
        }
      }
      return T21.array.length > 0 && he8.setAttribute("position", new xt6(T21.array, T21.stride)), J12.array.length > 0 && he8.setAttribute("normal", new xt6(J12.array, J12.stride)), ge7.array.length > 0 && he8.setAttribute("color", new xt6(ge7.array, ge7.stride)), se6.array.length > 0 && he8.setAttribute("uv", new xt6(se6.array, se6.stride)), be7.array.length > 0 && he8.setAttribute("uv2", new xt6(be7.array, be7.stride)), Te7.array.length > 0 && he8.setAttribute("skinIndex", new xt6(Te7.array, Te7.stride)), Ie7.array.length > 0 && he8.setAttribute("skinWeight", new xt6(Ie7.array, Ie7.stride)), b35.data = he8, b35.type = v31[0].type, b35.materialKeys = Ee5, b35;
    }
    function it16(v31, g32, S23, b35, T21 = false) {
      const J12 = v31.p, se6 = v31.stride, be7 = v31.vcount;
      function ge7(he8) {
        let Ee5 = J12[he8 + S23] * Ie7;
        const Ne7 = Ee5 + Ie7;
        for (; Ee5 < Ne7; Ee5++)
          b35.push(Te7[Ee5]);
        if (T21) {
          const Fe7 = b35.length - Ie7 - 1;
          ps2.setRGB(
            b35[Fe7 + 0],
            b35[Fe7 + 1],
            b35[Fe7 + 2]
          ).convertSRGBToLinear(), b35[Fe7 + 0] = ps2.r, b35[Fe7 + 1] = ps2.g, b35[Fe7 + 2] = ps2.b;
        }
      }
      const Te7 = g32.array, Ie7 = g32.stride;
      if (v31.vcount !== void 0) {
        let he8 = 0;
        for (let Ee5 = 0, Ne7 = be7.length; Ee5 < Ne7; Ee5++) {
          const Fe7 = be7[Ee5];
          if (Fe7 === 4) {
            const ke7 = he8 + se6 * 0, pt12 = he8 + se6 * 1, ct12 = he8 + se6 * 2, st14 = he8 + se6 * 3;
            ge7(ke7), ge7(pt12), ge7(st14), ge7(pt12), ge7(ct12), ge7(st14);
          } else if (Fe7 === 3) {
            const ke7 = he8 + se6 * 0, pt12 = he8 + se6 * 1, ct12 = he8 + se6 * 2;
            ge7(ke7), ge7(pt12), ge7(ct12);
          } else if (Fe7 > 4)
            for (let ke7 = 1, pt12 = Fe7 - 2; ke7 <= pt12; ke7++) {
              const ct12 = he8 + se6 * 0, st14 = he8 + se6 * ke7, ut12 = he8 + se6 * (ke7 + 1);
              ge7(ct12), ge7(st14), ge7(ut12);
            }
          he8 += se6 * Fe7;
        }
      } else
        for (let he8 = 0, Ee5 = J12.length; he8 < Ee5; he8 += se6)
          ge7(he8);
    }
    function Jt7(v31) {
      return y34(Oe5.geometries[v31], Nt9);
    }
    function ai7(v31) {
      const g32 = {
        name: v31.getAttribute("name") || "",
        joints: {},
        links: []
      };
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        if (b35.nodeType === 1)
          switch (b35.nodeName) {
            case "technique_common":
              ga2(b35, g32);
              break;
          }
      }
      Oe5.kinematicsModels[v31.getAttribute("id")] = g32;
    }
    function Ir6(v31) {
      return v31.build !== void 0 ? v31.build : v31;
    }
    function hs2(v31) {
      return y34(Oe5.kinematicsModels[v31], Ir6);
    }
    function ga2(v31, g32) {
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        if (b35.nodeType === 1)
          switch (b35.nodeName) {
            case "joint":
              g32.joints[b35.getAttribute("sid")] = _a2(b35);
              break;
            case "link":
              g32.links.push(R22(b35));
              break;
          }
      }
    }
    function _a2(v31) {
      let g32;
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        if (b35.nodeType === 1)
          switch (b35.nodeName) {
            case "prismatic":
            case "revolute":
              g32 = va2(b35);
              break;
          }
      }
      return g32;
    }
    function va2(v31) {
      const g32 = {
        sid: v31.getAttribute("sid"),
        name: v31.getAttribute("name") || "",
        axis: new k20(),
        limits: {
          min: 0,
          max: 0
        },
        type: v31.nodeName,
        static: false,
        zeroPosition: 0,
        middlePosition: 0
      };
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        if (b35.nodeType === 1)
          switch (b35.nodeName) {
            case "axis":
              const T21 = n33(b35.textContent);
              g32.axis.fromArray(T21);
              break;
            case "limits":
              const J12 = b35.getElementsByTagName("max")[0], se6 = b35.getElementsByTagName("min")[0];
              g32.limits.max = parseFloat(J12.textContent), g32.limits.min = parseFloat(se6.textContent);
              break;
          }
      }
      return g32.limits.min >= g32.limits.max && (g32.static = true), g32.middlePosition = (g32.limits.min + g32.limits.max) / 2, g32;
    }
    function R22(v31) {
      const g32 = {
        sid: v31.getAttribute("sid"),
        name: v31.getAttribute("name") || "",
        attachments: [],
        transforms: []
      };
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        if (b35.nodeType === 1)
          switch (b35.nodeName) {
            case "attachment_full":
              g32.attachments.push(Y13(b35));
              break;
            case "matrix":
            case "translate":
            case "rotate":
              g32.transforms.push(ee7(b35));
              break;
          }
      }
      return g32;
    }
    function Y13(v31) {
      const g32 = {
        joint: v31.getAttribute("joint").split("/").pop(),
        transforms: [],
        links: []
      };
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        if (b35.nodeType === 1)
          switch (b35.nodeName) {
            case "link":
              g32.links.push(R22(b35));
              break;
            case "matrix":
            case "translate":
            case "rotate":
              g32.transforms.push(ee7(b35));
              break;
          }
      }
      return g32;
    }
    function ee7(v31) {
      const g32 = {
        type: v31.nodeName
      }, S23 = n33(v31.textContent);
      switch (g32.type) {
        case "matrix":
          g32.obj = new He6(), g32.obj.fromArray(S23).transpose();
          break;
        case "translate":
          g32.obj = new k20(), g32.obj.fromArray(S23);
          break;
        case "rotate":
          g32.obj = new k20(), g32.obj.fromArray(S23), g32.angle = ln4.degToRad(S23[3]);
          break;
      }
      return g32;
    }
    function X14(v31) {
      const g32 = {
        name: v31.getAttribute("name") || "",
        rigidBodies: {}
      };
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        if (b35.nodeType === 1)
          switch (b35.nodeName) {
            case "rigid_body":
              g32.rigidBodies[b35.getAttribute("name")] = {}, ne8(b35, g32.rigidBodies[b35.getAttribute("name")]);
              break;
          }
      }
      Oe5.physicsModels[v31.getAttribute("id")] = g32;
    }
    function ne8(v31, g32) {
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        if (b35.nodeType === 1)
          switch (b35.nodeName) {
            case "technique_common":
              Re7(b35, g32);
              break;
          }
      }
    }
    function Re7(v31, g32) {
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        if (b35.nodeType === 1)
          switch (b35.nodeName) {
            case "inertia":
              g32.inertia = n33(b35.textContent);
              break;
            case "mass":
              g32.mass = n33(b35.textContent)[0];
              break;
          }
      }
    }
    function Be7(v31) {
      const g32 = {
        bindJointAxis: []
      };
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        if (b35.nodeType === 1)
          switch (b35.nodeName) {
            case "bind_joint_axis":
              g32.bindJointAxis.push(Ge7(b35));
              break;
          }
      }
      Oe5.kinematicsScenes[o13(v31.getAttribute("url"))] = g32;
    }
    function Ge7(v31) {
      const g32 = {
        target: v31.getAttribute("target").split("/").pop()
      };
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        if (b35.nodeType === 1)
          switch (b35.nodeName) {
            case "axis":
              const T21 = b35.getElementsByTagName("param")[0];
              g32.axis = T21.textContent;
              const J12 = g32.axis.split("inst_").pop().split("axis")[0];
              g32.jointIndex = J12.substring(0, J12.length - 1);
              break;
          }
      }
      return g32;
    }
    function Xe7(v31) {
      return v31.build !== void 0 ? v31.build : v31;
    }
    function Qe8(v31) {
      return y34(Oe5.kinematicsScenes[v31], Xe7);
    }
    function Ze7() {
      const v31 = Object.keys(Oe5.kinematicsModels)[0], g32 = Object.keys(Oe5.kinematicsScenes)[0], S23 = Object.keys(Oe5.visualScenes)[0];
      if (v31 === void 0 || g32 === void 0)
        return;
      const b35 = hs2(v31), T21 = Qe8(g32), J12 = Or6(S23), se6 = T21.bindJointAxis, be7 = {};
      for (let Ie7 = 0, he8 = se6.length; Ie7 < he8; Ie7++) {
        const Ee5 = se6[Ie7], Ne7 = Pt9.querySelector('[sid="' + Ee5.target + '"]');
        if (Ne7) {
          const Fe7 = Ne7.parentElement;
          ge7(Ee5.jointIndex, Fe7);
        }
      }
      function ge7(Ie7, he8) {
        const Ee5 = he8.getAttribute("name"), Ne7 = b35.joints[Ie7];
        J12.traverse(function(Fe7) {
          Fe7.name === Ee5 && (be7[Ie7] = {
            object: Fe7,
            transforms: Ye7(he8),
            joint: Ne7,
            position: Ne7.zeroPosition
          });
        });
      }
      const Te7 = new He6();
      Ko2 = {
        joints: b35 && b35.joints,
        getJointValue: function(Ie7) {
          const he8 = be7[Ie7];
          if (he8)
            return he8.position;
          console.warn("THREE.ColladaLoader: Joint " + Ie7 + " doesn't exist.");
        },
        setJointValue: function(Ie7, he8) {
          const Ee5 = be7[Ie7];
          if (Ee5) {
            const Ne7 = Ee5.joint;
            if (he8 > Ne7.limits.max || he8 < Ne7.limits.min)
              console.warn("THREE.ColladaLoader: Joint " + Ie7 + " value " + he8 + " outside of limits (min: " + Ne7.limits.min + ", max: " + Ne7.limits.max + ").");
            else if (Ne7.static)
              console.warn("THREE.ColladaLoader: Joint " + Ie7 + " is static.");
            else {
              const Fe7 = Ee5.object, ke7 = Ne7.axis, pt12 = Ee5.transforms;
              lt13.identity();
              for (let ct12 = 0; ct12 < pt12.length; ct12++) {
                const st14 = pt12[ct12];
                if (st14.sid && st14.sid.indexOf(Ie7) !== -1)
                  switch (Ne7.type) {
                    case "revolute":
                      lt13.multiply(Te7.makeRotationAxis(ke7, ln4.degToRad(he8)));
                      break;
                    case "prismatic":
                      lt13.multiply(Te7.makeTranslation(ke7.x * he8, ke7.y * he8, ke7.z * he8));
                      break;
                    default:
                      console.warn("THREE.ColladaLoader: Unknown joint type: " + Ne7.type);
                      break;
                  }
                else
                  switch (st14.type) {
                    case "matrix":
                      lt13.multiply(st14.obj);
                      break;
                    case "translate":
                      lt13.multiply(Te7.makeTranslation(st14.obj.x, st14.obj.y, st14.obj.z));
                      break;
                    case "scale":
                      lt13.scale(st14.obj);
                      break;
                    case "rotate":
                      lt13.multiply(Te7.makeRotationAxis(st14.obj, st14.angle));
                      break;
                  }
              }
              Fe7.matrix.copy(lt13), Fe7.matrix.decompose(Fe7.position, Fe7.quaternion, Fe7.scale), be7[Ie7].position = he8;
            }
          } else
            console.log("THREE.ColladaLoader: " + Ie7 + " does not exist.");
        }
      };
    }
    function Ye7(v31) {
      const g32 = [], S23 = Pt9.querySelector('[id="' + v31.id + '"]');
      for (let b35 = 0; b35 < S23.childNodes.length; b35++) {
        const T21 = S23.childNodes[b35];
        if (T21.nodeType !== 1)
          continue;
        let J12, se6;
        switch (T21.nodeName) {
          case "matrix":
            J12 = n33(T21.textContent);
            const be7 = new He6().fromArray(J12).transpose();
            g32.push({
              sid: T21.getAttribute("sid"),
              type: T21.nodeName,
              obj: be7
            });
            break;
          case "translate":
          case "scale":
            J12 = n33(T21.textContent), se6 = new k20().fromArray(J12), g32.push({
              sid: T21.getAttribute("sid"),
              type: T21.nodeName,
              obj: se6
            });
            break;
          case "rotate":
            J12 = n33(T21.textContent), se6 = new k20().fromArray(J12);
            const ge7 = ln4.degToRad(J12[3]);
            g32.push({
              sid: T21.getAttribute("sid"),
              type: T21.nodeName,
              obj: se6,
              angle: ge7
            });
            break;
        }
      }
      return g32;
    }
    function yt14(v31) {
      const g32 = v31.getElementsByTagName("node");
      for (let S23 = 0; S23 < g32.length; S23++) {
        const b35 = g32[S23];
        b35.hasAttribute("id") === false && b35.setAttribute("id", l26());
      }
    }
    const lt13 = new He6(), Ut9 = new k20();
    function fi7(v31) {
      const g32 = {
        name: v31.getAttribute("name") || "",
        type: v31.getAttribute("type"),
        id: v31.getAttribute("id"),
        sid: v31.getAttribute("sid"),
        matrix: new He6(),
        nodes: [],
        instanceCameras: [],
        instanceControllers: [],
        instanceLights: [],
        instanceGeometries: [],
        instanceNodes: [],
        transforms: {}
      };
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        if (b35.nodeType !== 1)
          continue;
        let T21;
        switch (b35.nodeName) {
          case "node":
            g32.nodes.push(b35.getAttribute("id")), fi7(b35);
            break;
          case "instance_camera":
            g32.instanceCameras.push(o13(b35.getAttribute("url")));
            break;
          case "instance_controller":
            g32.instanceControllers.push(Et9(b35));
            break;
          case "instance_light":
            g32.instanceLights.push(o13(b35.getAttribute("url")));
            break;
          case "instance_geometry":
            g32.instanceGeometries.push(Et9(b35));
            break;
          case "instance_node":
            g32.instanceNodes.push(o13(b35.getAttribute("url")));
            break;
          case "matrix":
            T21 = n33(b35.textContent), g32.matrix.multiply(lt13.fromArray(T21).transpose()), g32.transforms[b35.getAttribute("sid")] = b35.nodeName;
            break;
          case "translate":
            T21 = n33(b35.textContent), Ut9.fromArray(T21), g32.matrix.multiply(lt13.makeTranslation(Ut9.x, Ut9.y, Ut9.z)), g32.transforms[b35.getAttribute("sid")] = b35.nodeName;
            break;
          case "rotate":
            T21 = n33(b35.textContent);
            const J12 = ln4.degToRad(T21[3]);
            g32.matrix.multiply(lt13.makeRotationAxis(Ut9.fromArray(T21), J12)), g32.transforms[b35.getAttribute("sid")] = b35.nodeName;
            break;
          case "scale":
            T21 = n33(b35.textContent), g32.matrix.scale(Ut9.fromArray(T21)), g32.transforms[b35.getAttribute("sid")] = b35.nodeName;
            break;
          case "extra":
            break;
          default:
            console.log(b35);
        }
      }
      return kr6(g32.id) ? console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.", g32.id) : Oe5.nodes[g32.id] = g32, g32;
    }
    function Et9(v31) {
      const g32 = {
        id: o13(v31.getAttribute("url")),
        materials: {},
        skeletons: []
      };
      for (let S23 = 0; S23 < v31.childNodes.length; S23++) {
        const b35 = v31.childNodes[S23];
        switch (b35.nodeName) {
          case "bind_material":
            const T21 = b35.getElementsByTagName("instance_material");
            for (let J12 = 0; J12 < T21.length; J12++) {
              const se6 = T21[J12], be7 = se6.getAttribute("symbol"), ge7 = se6.getAttribute("target");
              g32.materials[be7] = o13(ge7);
            }
            break;
          case "skeleton":
            g32.skeletons.push(o13(b35.textContent));
            break;
        }
      }
      return g32;
    }
    function Je6(v31, g32) {
      const S23 = [], b35 = [];
      let T21, J12, se6;
      for (T21 = 0; T21 < v31.length; T21++) {
        const Te7 = v31[T21];
        let Ie7;
        if (kr6(Te7))
          Ie7 = At9(Te7), Dr6(Ie7, g32, S23);
        else if (Kt7(Te7)) {
          const he8 = Oe5.visualScenes[Te7].children;
          for (let Ee5 = 0; Ee5 < he8.length; Ee5++) {
            const Ne7 = he8[Ee5];
            if (Ne7.type === "JOINT") {
              const Fe7 = At9(Ne7.id);
              Dr6(Fe7, g32, S23);
            }
          }
        } else
          console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:", Te7);
      }
      for (T21 = 0; T21 < g32.length; T21++)
        for (J12 = 0; J12 < S23.length; J12++)
          if (se6 = S23[J12], se6.bone.name === g32[T21].name) {
            b35[T21] = se6, se6.processed = true;
            break;
          }
      for (T21 = 0; T21 < S23.length; T21++)
        se6 = S23[T21], se6.processed === false && (b35.push(se6), se6.processed = true);
      const be7 = [], ge7 = [];
      for (T21 = 0; T21 < b35.length; T21++)
        se6 = b35[T21], be7.push(se6.bone), ge7.push(se6.boneInverse);
      return new ha2(be7, ge7);
    }
    function Dr6(v31, g32, S23) {
      v31.traverse(function(b35) {
        if (b35.isBone === true) {
          let T21;
          for (let J12 = 0; J12 < g32.length; J12++) {
            const se6 = g32[J12];
            if (se6.name === b35.name) {
              T21 = se6.boneInverse;
              break;
            }
          }
          T21 === void 0 && (T21 = new He6()), S23.push({ bone: b35, boneInverse: T21, processed: false });
        }
      });
    }
    function kn6(v31) {
      const g32 = [], S23 = v31.matrix, b35 = v31.nodes, T21 = v31.type, J12 = v31.instanceCameras, se6 = v31.instanceControllers, be7 = v31.instanceLights, ge7 = v31.instanceGeometries, Te7 = v31.instanceNodes;
      for (let he8 = 0, Ee5 = b35.length; he8 < Ee5; he8++)
        g32.push(At9(b35[he8]));
      for (let he8 = 0, Ee5 = J12.length; he8 < Ee5; he8++) {
        const Ne7 = we8(J12[he8]);
        Ne7 !== null && g32.push(Ne7.clone());
      }
      for (let he8 = 0, Ee5 = se6.length; he8 < Ee5; he8++) {
        const Ne7 = se6[he8], Fe7 = oe7(Ne7.id), ke7 = Jt7(Fe7.id), pt12 = ji3(ke7, Ne7.materials), ct12 = Ne7.skeletons, st14 = Fe7.skin.joints, ut12 = Je6(ct12, st14);
        for (let Ri5 = 0, oi7 = pt12.length; Ri5 < oi7; Ri5++) {
          const zr6 = pt12[Ri5];
          zr6.isSkinnedMesh && (zr6.bind(ut12, Fe7.skin.bindMatrix), zr6.normalizeSkinWeights()), g32.push(zr6);
        }
      }
      for (let he8 = 0, Ee5 = be7.length; he8 < Ee5; he8++) {
        const Ne7 = B22(be7[he8]);
        Ne7 !== null && g32.push(Ne7.clone());
      }
      for (let he8 = 0, Ee5 = ge7.length; he8 < Ee5; he8++) {
        const Ne7 = ge7[he8], Fe7 = Jt7(Ne7.id), ke7 = ji3(Fe7, Ne7.materials);
        for (let pt12 = 0, ct12 = ke7.length; pt12 < ct12; pt12++)
          g32.push(ke7[pt12]);
      }
      for (let he8 = 0, Ee5 = Te7.length; he8 < Ee5; he8++)
        g32.push(At9(Te7[he8]).clone());
      let Ie7;
      if (b35.length === 0 && g32.length === 1)
        Ie7 = g32[0];
      else {
        Ie7 = T21 === "JOINT" ? new Oo2() : new Lt5();
        for (let he8 = 0; he8 < g32.length; he8++)
          Ie7.add(g32[he8]);
      }
      return Ie7.name = T21 === "JOINT" ? v31.sid : v31.name, Ie7.matrix.copy(S23), Ie7.matrix.decompose(Ie7.position, Ie7.quaternion, Ie7.scale), Ie7;
    }
    const Li5 = new xi6({ color: 16711935 });
    function us2(v31, g32) {
      const S23 = [];
      for (let b35 = 0, T21 = v31.length; b35 < T21; b35++) {
        const J12 = g32[v31[b35]];
        J12 === void 0 ? (console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.", v31[b35]), S23.push(Li5)) : S23.push(O20(J12));
      }
      return S23;
    }
    function ji3(v31, g32) {
      const S23 = [];
      for (const b35 in v31) {
        const T21 = v31[b35], J12 = us2(T21.materialKeys, g32);
        if (J12.length === 0 && (b35 === "lines" || b35 === "linestrips" ? J12.push(new Tn4()) : J12.push(new Jn5())), b35 === "lines" || b35 === "linestrips")
          for (let Te7 = 0, Ie7 = J12.length; Te7 < Ie7; Te7++) {
            const he8 = J12[Te7];
            if (he8.isMeshPhongMaterial === true || he8.isMeshLambertMaterial === true) {
              const Ee5 = new Tn4();
              Ee5.color.copy(he8.color), Ee5.opacity = he8.opacity, Ee5.transparent = he8.transparent, J12[Te7] = Ee5;
            }
          }
        const se6 = T21.data.attributes.skinIndex !== void 0, be7 = J12.length === 1 ? J12[0] : J12;
        let ge7;
        switch (b35) {
          case "lines":
            ge7 = new zo2(T21.data, be7);
            break;
          case "linestrips":
            ge7 = new ss3(T21.data, be7);
            break;
          case "triangles":
          case "polylist":
            se6 ? ge7 = new Lh2(T21.data, be7) : ge7 = new Rt8(T21.data, be7);
            break;
        }
        S23.push(ge7);
      }
      return S23;
    }
    function kr6(v31) {
      return Oe5.nodes[v31] !== void 0;
    }
    function At9(v31) {
      return y34(Oe5.nodes[v31], kn6);
    }
    function Ci5(v31) {
      const g32 = {
        name: v31.getAttribute("name"),
        children: []
      };
      yt14(v31);
      const S23 = i27(v31, "node");
      for (let b35 = 0; b35 < S23.length; b35++)
        g32.children.push(fi7(S23[b35]));
      Oe5.visualScenes[v31.getAttribute("id")] = g32;
    }
    function Ur6(v31) {
      const g32 = new Lt5();
      g32.name = v31.name;
      const S23 = v31.children;
      for (let b35 = 0; b35 < S23.length; b35++) {
        const T21 = S23[b35];
        g32.add(At9(T21.id));
      }
      return g32;
    }
    function Kt7(v31) {
      return Oe5.visualScenes[v31] !== void 0;
    }
    function Or6(v31) {
      return y34(Oe5.visualScenes[v31], Ur6);
    }
    function ya2(v31) {
      const g32 = i27(v31, "instance_visual_scene")[0];
      return Or6(o13(g32.getAttribute("url")));
    }
    function ds2() {
      const v31 = Oe5.clips;
      if (c27(v31) === true) {
        if (c27(Oe5.animations) === false) {
          const g32 = [];
          for (const S23 in Oe5.animations) {
            const b35 = E25(S23);
            for (let T21 = 0, J12 = b35.length; T21 < J12; T21++)
              g32.push(b35[T21]);
          }
          ms2.push(new bo("default", -1, g32));
        }
      } else
        for (const g32 in v31)
          ms2.push($25(g32));
    }
    function tu2(v31) {
      let g32 = "";
      const S23 = [v31];
      for (; S23.length; ) {
        const b35 = S23.shift();
        b35.nodeType === Node.TEXT_NODE ? g32 += b35.textContent : (g32 += `
`, S23.push.apply(S23, b35.childNodes));
      }
      return g32.trim();
    }
    if (e11.length === 0)
      return { scene: new ko2() };
    const Yo2 = new DOMParser().parseFromString(e11, "application/xml"), Pt9 = i27(Yo2, "COLLADA")[0], xa2 = Yo2.getElementsByTagName("parsererror")[0];
    if (xa2 !== void 0) {
      const v31 = i27(xa2, "div")[0];
      let g32;
      return v31 ? g32 = v31.textContent : g32 = tu2(xa2), console.error(`THREE.ColladaLoader: Failed to parse collada file.
`, g32), null;
    }
    const iu2 = Pt9.getAttribute("version");
    console.debug("THREE.ColladaLoader: File version", iu2);
    const Zo2 = h26(i27(Pt9, "asset")[0]), Jo2 = new Ho2(this.manager);
    Jo2.setPath(this.resourcePath || t19).setCrossOrigin(this.crossOrigin);
    let ba2;
    jc2 && (ba2 = new jc2(this.manager), ba2.setPath(this.resourcePath || t19));
    const ps2 = new ze7(), ms2 = [];
    let Ko2 = {}, ru2 = 0;
    const Oe5 = {
      animations: {},
      clips: {},
      controllers: {},
      images: {},
      effects: {},
      materials: {},
      cameras: {},
      lights: {},
      geometries: {},
      nodes: {},
      visualScenes: {},
      kinematicsModels: {},
      physicsModels: {},
      kinematicsScenes: {}
    };
    m34(Pt9, "library_animations", "animation", f40), m34(Pt9, "library_animation_clips", "animation_clip", W11), m34(Pt9, "library_controllers", "controller", ie8), m34(Pt9, "library_images", "image", K16), m34(Pt9, "library_effects", "effect", Le7), m34(Pt9, "library_materials", "material", de9), m34(Pt9, "library_cameras", "camera", ae7), m34(Pt9, "library_lights", "light", Se7), m34(Pt9, "library_geometries", "geometry", te7), m34(Pt9, "library_nodes", "node", fi7), m34(Pt9, "library_visual_scenes", "visual_scene", Ci5), m34(Pt9, "library_kinematics_models", "kinematics_model", ai7), m34(Pt9, "library_physics_models", "physics_model", X14), m34(Pt9, "scene", "instance_kinematics_scene", Be7), _21(Oe5.animations, M13), _21(Oe5.clips, re8), _21(Oe5.controllers, H16), _21(Oe5.images, F19), _21(Oe5.effects, L12), _21(Oe5.materials, _e7), _21(Oe5.cameras, Ce7), _21(Oe5.lights, wt10), _21(Oe5.geometries, Nt9), _21(Oe5.visualScenes, Ur6), ds2(), Ze7();
    const fs2 = ya2(i27(Pt9, "scene")[0]);
    return fs2.animations = ms2, Zo2.upAxis === "Z_UP" && (console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."), fs2.rotation.set(-Math.PI / 2, 0, 0)), fs2.scale.multiplyScalar(Zo2.unit), {
      get animations() {
        return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."), ms2;
      },
      kinematics: Ko2,
      library: Oe5,
      scene: fs2
    };
  }
};
var Xc2 = new k20();
var P_2 = new Cn5();
var js2 = new He6();
var $i6 = new He6();
var Xs2 = new jt8();
var qs2 = new k20(1, 1, 1);
var Ys2 = new k20();
var ma2 = class extends _t8 {
  constructor(...e11) {
    super(...e11), this.urdfNode = null, this.urdfName = "";
  }
  copy(e11, t19) {
    return super.copy(e11, t19), this.urdfNode = e11.urdfNode, this.urdfName = e11.urdfName, this;
  }
};
var I_2 = class extends ma2 {
  constructor(...e11) {
    super(...e11), this.isURDFCollider = true, this.type = "URDFCollider";
  }
};
var D_2 = class extends ma2 {
  constructor(...e11) {
    super(...e11), this.isURDFVisual = true, this.type = "URDFVisual";
  }
};
var jh2 = class extends ma2 {
  constructor(...e11) {
    super(...e11), this.isURDFLink = true, this.type = "URDFLink";
  }
};
var Xh2 = class extends ma2 {
  get jointType() {
    return this._jointType;
  }
  set jointType(e11) {
    if (this.jointType !== e11)
      switch (this._jointType = e11, this.matrixWorldNeedsUpdate = true, e11) {
        case "fixed":
          this.jointValue = [];
          break;
        case "continuous":
        case "revolute":
        case "prismatic":
          this.jointValue = new Array(1).fill(0);
          break;
        case "planar":
          this.jointValue = new Array(3).fill(0), this.axis = new k20(0, 0, 1);
          break;
        case "floating":
          this.jointValue = new Array(6).fill(0);
          break;
      }
  }
  get angle() {
    return this.jointValue[0];
  }
  constructor(...e11) {
    super(...e11), this.isURDFJoint = true, this.type = "URDFJoint", this.jointValue = null, this.jointType = "fixed", this.axis = new k20(1, 0, 0), this.limit = { lower: 0, upper: 0 }, this.ignoreLimits = false, this.origPosition = null, this.origQuaternion = null, this.mimicJoints = [];
  }
  /* Overrides */
  copy(e11, t19) {
    return super.copy(e11, t19), this.jointType = e11.jointType, this.axis = e11.axis.clone(), this.limit.lower = e11.limit.lower, this.limit.upper = e11.limit.upper, this.ignoreLimits = false, this.jointValue = [...e11.jointValue], this.origPosition = e11.origPosition ? e11.origPosition.clone() : null, this.origQuaternion = e11.origQuaternion ? e11.origQuaternion.clone() : null, this.mimicJoints = [...e11.mimicJoints], this;
  }
  /* Public Functions */
  /**
   * @param {...number|null} values The joint value components to set, optionally null for no-op
   * @returns {boolean} Whether the invocation of this function resulted in an actual change to the joint value
   */
  setJointValue(...e11) {
    e11 = e11.map((i27) => i27 === null ? null : parseFloat(i27)), (!this.origPosition || !this.origQuaternion) && (this.origPosition = this.position.clone(), this.origQuaternion = this.quaternion.clone());
    let t19 = false;
    switch (this.mimicJoints.forEach((i27) => {
      t19 = i27.updateFromMimickedJoint(...e11) || t19;
    }), this.jointType) {
      case "fixed":
        return t19;
      case "continuous":
      case "revolute": {
        let i27 = e11[0];
        return i27 == null || i27 === this.jointValue[0] ? t19 : (!this.ignoreLimits && this.jointType === "revolute" && (i27 = Math.min(this.limit.upper, i27), i27 = Math.max(this.limit.lower, i27)), this.quaternion.setFromAxisAngle(this.axis, i27).premultiply(this.origQuaternion), this.jointValue[0] !== i27 ? (this.jointValue[0] = i27, this.matrixWorldNeedsUpdate = true, true) : t19);
      }
      case "prismatic": {
        let i27 = e11[0];
        return i27 == null || i27 === this.jointValue[0] ? t19 : (this.ignoreLimits || (i27 = Math.min(this.limit.upper, i27), i27 = Math.max(this.limit.lower, i27)), this.position.copy(this.origPosition), Xc2.copy(this.axis).applyEuler(this.rotation), this.position.addScaledVector(Xc2, i27), this.jointValue[0] !== i27 ? (this.jointValue[0] = i27, this.matrixWorldNeedsUpdate = true, true) : t19);
      }
      case "floating":
        return this.jointValue.every((i27, r24) => e11[r24] === i27 || e11[r24] === null) ? t19 : (this.jointValue[0] = e11[0] !== null ? e11[0] : this.jointValue[0], this.jointValue[1] = e11[1] !== null ? e11[1] : this.jointValue[1], this.jointValue[2] = e11[2] !== null ? e11[2] : this.jointValue[2], this.jointValue[3] = e11[3] !== null ? e11[3] : this.jointValue[3], this.jointValue[4] = e11[4] !== null ? e11[4] : this.jointValue[4], this.jointValue[5] = e11[5] !== null ? e11[5] : this.jointValue[5], $i6.compose(this.origPosition, this.origQuaternion, qs2), Xs2.setFromEuler(
          P_2.set(
            this.jointValue[3],
            this.jointValue[4],
            this.jointValue[5],
            "XYZ"
          )
        ), Ys2.set(this.jointValue[0], this.jointValue[1], this.jointValue[2]), js2.compose(Ys2, Xs2, qs2), $i6.premultiply(js2), this.position.setFromMatrixPosition($i6), this.rotation.setFromRotationMatrix($i6), this.matrixWorldNeedsUpdate = true, true);
      case "planar":
        return this.jointValue.every((i27, r24) => e11[r24] === i27 || e11[r24] === null) ? t19 : (this.jointValue[0] = e11[0] !== null ? e11[0] : this.jointValue[0], this.jointValue[1] = e11[1] !== null ? e11[1] : this.jointValue[1], this.jointValue[2] = e11[2] !== null ? e11[2] : this.jointValue[2], $i6.compose(this.origPosition, this.origQuaternion, qs2), Xs2.setFromAxisAngle(this.axis, this.jointValue[2]), Ys2.set(this.jointValue[0], this.jointValue[1], 0), js2.compose(Ys2, Xs2, qs2), $i6.premultiply(js2), this.position.setFromMatrixPosition($i6), this.rotation.setFromRotationMatrix($i6), this.matrixWorldNeedsUpdate = true, true);
    }
    return t19;
  }
};
var qc2 = class extends Xh2 {
  constructor(...e11) {
    super(...e11), this.type = "URDFMimicJoint", this.mimicJoint = null, this.offset = 0, this.multiplier = 1;
  }
  updateFromMimickedJoint(...e11) {
    const t19 = e11.map((i27) => i27 * this.multiplier + this.offset);
    return super.setJointValue(...t19);
  }
  /* Overrides */
  copy(e11, t19) {
    return super.copy(e11, t19), this.mimicJoint = e11.mimicJoint, this.offset = e11.offset, this.multiplier = e11.multiplier, this;
  }
};
var k_2 = class extends jh2 {
  constructor(...e11) {
    super(...e11), this.isURDFRobot = true, this.urdfNode = null, this.urdfRobotNode = null, this.robotName = null, this.links = null, this.joints = null, this.colliders = null, this.visual = null, this.frames = null;
  }
  copy(e11, t19) {
    super.copy(e11, t19), this.urdfRobotNode = e11.urdfRobotNode, this.robotName = e11.robotName, this.links = {}, this.joints = {}, this.colliders = {}, this.visual = {}, this.traverse((i27) => {
      i27.isURDFJoint && i27.urdfName in e11.joints && (this.joints[i27.urdfName] = i27), i27.isURDFLink && i27.urdfName in e11.links && (this.links[i27.urdfName] = i27), i27.isURDFCollider && i27.urdfName in e11.colliders && (this.colliders[i27.urdfName] = i27), i27.isURDFVisual && i27.urdfName in e11.visual && (this.visual[i27.urdfName] = i27);
    });
    for (const i27 in this.joints)
      this.joints[i27].mimicJoints = this.joints[i27].mimicJoints.map((r24) => this.joints[r24.name]);
    return this.frames = {
      ...this.colliders,
      ...this.visual,
      ...this.links,
      ...this.joints
    }, this;
  }
  getFrame(e11) {
    return this.frames[e11];
  }
  setJointValue(e11, ...t19) {
    const i27 = this.joints[e11];
    return i27 ? i27.setJointValue(...t19) : false;
  }
  setJointValues(e11) {
    let t19 = false;
    for (const i27 in e11) {
      const r24 = e11[i27];
      Array.isArray(r24) ? t19 = this.setJointValue(i27, ...r24) || t19 : t19 = this.setJointValue(i27, r24) || t19;
    }
    return t19;
  }
};
var so2 = new jt8();
var Yc2 = new Cn5();
function an4(s18) {
  return s18 ? s18.trim().split(/\s+/g).map((e11) => parseFloat(e11)) : [0, 0, 0];
}
function Zc2(s18, e11, t19 = false) {
  t19 || s18.rotation.set(0, 0, 0), Yc2.set(e11[0], e11[1], e11[2], "ZYX"), so2.setFromEuler(Yc2), so2.multiply(s18.quaternion), s18.quaternion.copy(so2);
}
var qh2 = class {
  constructor(e11) {
    this.manager = e11 || Dh2, this.loadMeshCb = this.defaultMeshLoader.bind(this), this.parseVisual = true, this.parseCollision = false, this.packages = "", this.workingPath = "", this.fetchOptions = {};
  }
  /* Public API */
  loadAsync(e11) {
    return new Promise((t19, i27) => {
      this.load(e11, t19, null, i27);
    });
  }
  // urdf:    The path to the URDF within the package OR absolute
  // onComplete:      Callback that is passed the model once loaded
  load(e11, t19, i27, r24) {
    const n33 = this.manager, a22 = is3.extractUrlBase(e11), o13 = this.manager.resolveURL(e11);
    n33.itemStart(o13), fetch(o13, this.fetchOptions).then((l26) => {
      if (l26.ok)
        return i27 && i27(null), l26.text();
      throw new Error(`URDFLoader: Failed to load url '${o13}' with error code ${l26.status} : ${l26.statusText}.`);
    }).then((l26) => {
      this.workingPath === "" && (this.workingPath = a22);
      const c27 = this.parse(l26);
      t19(c27), n33.itemEnd(o13);
    }).catch((l26) => {
      r24 ? r24(l26) : console.error("URDFLoader: Error loading file.", l26), n33.itemError(o13), n33.itemEnd(o13);
    });
  }
  parse(e11) {
    const t19 = this.packages, i27 = this.loadMeshCb, r24 = this.parseVisual, n33 = this.parseCollision, a22 = this.workingPath, o13 = this.manager, l26 = {}, c27 = {}, h26 = {};
    function u35(A18) {
      if (!/^package:\/\//.test(A18))
        return a22 ? a22 + A18 : A18;
      const [M13, E25] = A18.replace(/^package:\/\//, "").split(/\/(.+)/);
      if (typeof t19 == "string")
        return t19.endsWith(M13) ? t19 + "/" + E25 : t19 + "/" + M13 + "/" + E25;
      if (t19 instanceof Function)
        return t19(M13) + "/" + E25;
      if (typeof t19 == "object")
        return M13 in t19 ? t19[M13] + "/" + E25 : (console.error(`URDFLoader : ${M13} not found in provided package list.`), null);
    }
    function d34(A18) {
      let M13;
      A18 instanceof Document ? M13 = [...A18.children] : A18 instanceof Element ? M13 = [A18] : M13 = [...new DOMParser().parseFromString(A18, "text/xml").children];
      const E25 = M13.filter((w31) => w31.nodeName === "robot").pop();
      return m34(E25);
    }
    function m34(A18) {
      const M13 = [...A18.children], E25 = M13.filter((G16) => G16.nodeName.toLowerCase() === "link"), w31 = M13.filter((G16) => G16.nodeName.toLowerCase() === "joint"), I18 = M13.filter((G16) => G16.nodeName.toLowerCase() === "material"), D18 = new k_2();
      D18.robotName = A18.getAttribute("name"), D18.urdfRobotNode = A18, I18.forEach((G16) => {
        const z21 = G16.getAttribute("name");
        h26[z21] = f40(G16);
      });
      const P20 = {}, x36 = {};
      E25.forEach((G16) => {
        const z21 = G16.getAttribute("name"), U20 = A18.querySelector(`child[link="${z21}"]`) === null;
        l26[z21] = y34(G16, P20, x36, U20 ? D18 : null);
      }), w31.forEach((G16) => {
        const z21 = G16.getAttribute("name");
        c27[z21] = _21(G16);
      }), D18.joints = c27, D18.links = l26, D18.colliders = x36, D18.visual = P20;
      const C21 = Object.values(c27);
      return C21.forEach((G16) => {
        G16 instanceof qc2 && c27[G16.mimicJoint].mimicJoints.push(G16);
      }), C21.forEach((G16) => {
        const z21 = /* @__PURE__ */ new Set(), U20 = (V16) => {
          if (z21.has(V16))
            throw new Error("URDFLoader: Detected an infinite loop of mimic joints.");
          z21.add(V16), V16.mimicJoints.forEach((j19) => {
            U20(j19);
          });
        };
        U20(G16);
      }), D18.frames = {
        ...x36,
        ...P20,
        ...l26,
        ...c27
      }, D18;
    }
    function _21(A18) {
      const M13 = [...A18.children], E25 = A18.getAttribute("type");
      let w31;
      const I18 = M13.find((z21) => z21.nodeName.toLowerCase() === "mimic");
      I18 ? (w31 = new qc2(), w31.mimicJoint = I18.getAttribute("joint"), w31.multiplier = parseFloat(I18.getAttribute("multiplier") || 1), w31.offset = parseFloat(I18.getAttribute("offset") || 0)) : w31 = new Xh2(), w31.urdfNode = A18, w31.name = A18.getAttribute("name"), w31.urdfName = w31.name, w31.jointType = E25;
      let D18 = null, P20 = null, x36 = [0, 0, 0], C21 = [0, 0, 0];
      M13.forEach((z21) => {
        const U20 = z21.nodeName.toLowerCase();
        U20 === "origin" ? (x36 = an4(z21.getAttribute("xyz")), C21 = an4(z21.getAttribute("rpy"))) : U20 === "child" ? P20 = l26[z21.getAttribute("link")] : U20 === "parent" ? D18 = l26[z21.getAttribute("link")] : U20 === "limit" && (w31.limit.lower = parseFloat(z21.getAttribute("lower") || w31.limit.lower), w31.limit.upper = parseFloat(z21.getAttribute("upper") || w31.limit.upper));
      }), D18.add(w31), w31.add(P20), Zc2(w31, C21), w31.position.set(x36[0], x36[1], x36[2]);
      const G16 = M13.filter((z21) => z21.nodeName.toLowerCase() === "axis")[0];
      if (G16) {
        const z21 = G16.getAttribute("xyz").split(/\s+/g).map((U20) => parseFloat(U20));
        w31.axis = new k20(z21[0], z21[1], z21[2]), w31.axis.normalize();
      }
      return w31;
    }
    function y34(A18, M13, E25, w31 = null) {
      w31 === null && (w31 = new jh2());
      const I18 = [...A18.children];
      return w31.name = A18.getAttribute("name"), w31.urdfName = w31.name, w31.urdfNode = A18, r24 && I18.filter((D18) => D18.nodeName.toLowerCase() === "visual").forEach((D18) => {
        const P20 = p26(D18, h26);
        if (w31.add(P20), D18.hasAttribute("name")) {
          const x36 = D18.getAttribute("name");
          P20.name = x36, P20.urdfName = x36, M13[x36] = P20;
        }
      }), n33 && I18.filter((D18) => D18.nodeName.toLowerCase() === "collision").forEach((D18) => {
        const P20 = p26(D18);
        if (w31.add(P20), D18.hasAttribute("name")) {
          const x36 = D18.getAttribute("name");
          P20.name = x36, P20.urdfName = x36, E25[x36] = P20;
        }
      }), w31;
    }
    function f40(A18) {
      const M13 = [...A18.children], E25 = new Jn5();
      return E25.name = A18.getAttribute("name") || "", M13.forEach((w31) => {
        const I18 = w31.nodeName.toLowerCase();
        if (I18 === "color") {
          const D18 = w31.getAttribute("rgba").split(/\s/g).map((P20) => parseFloat(P20));
          E25.color.setRGB(D18[0], D18[1], D18[2]), E25.opacity = D18[3], E25.transparent = D18[3] < 1, E25.depthWrite = !E25.transparent;
        } else if (I18 === "texture") {
          const D18 = w31.getAttribute("filename");
          if (D18) {
            const P20 = new Ho2(o13), x36 = u35(D18);
            E25.map = P20.load(x36), E25.map.colorSpace = yi6;
          }
        }
      }), E25;
    }
    function p26(A18, M13 = {}) {
      const E25 = A18.nodeName.toLowerCase() === "collision", w31 = [...A18.children];
      let I18 = null;
      const D18 = w31.filter((x36) => x36.nodeName.toLowerCase() === "material")[0];
      if (D18) {
        const x36 = D18.getAttribute("name");
        x36 && x36 in M13 ? I18 = M13[x36] : I18 = f40(D18);
      } else
        I18 = new Jn5();
      const P20 = E25 ? new I_2() : new D_2();
      return P20.urdfNode = A18, w31.forEach((x36) => {
        const C21 = x36.nodeName.toLowerCase();
        if (C21 === "geometry") {
          const G16 = x36.children[0].nodeName.toLowerCase();
          if (G16 === "mesh") {
            const z21 = x36.children[0].getAttribute("filename"), U20 = u35(z21);
            if (U20 !== null) {
              const V16 = x36.children[0].getAttribute("scale");
              if (V16) {
                const j19 = an4(V16);
                P20.scale.set(j19[0], j19[1], j19[2]);
              }
              i27(U20, o13, (j19, W11) => {
                W11 ? console.error("URDFLoader: Error loading mesh.", W11) : j19 && (j19 instanceof Rt8 && (j19.material = I18), j19.position.set(0, 0, 0), j19.quaternion.identity(), P20.add(j19));
              });
            }
          } else if (G16 === "box") {
            const z21 = new Rt8();
            z21.geometry = new Lr5(1, 1, 1), z21.material = I18;
            const U20 = an4(x36.children[0].getAttribute("size"));
            z21.scale.set(U20[0], U20[1], U20[2]), P20.add(z21);
          } else if (G16 === "sphere") {
            const z21 = new Rt8();
            z21.geometry = new Bo2(1, 30, 30), z21.material = I18;
            const U20 = parseFloat(x36.children[0].getAttribute("radius")) || 0;
            z21.scale.set(U20, U20, U20), P20.add(z21);
          } else if (G16 === "cylinder") {
            const z21 = new Rt8();
            z21.geometry = new ua2(1, 1, 1, 30), z21.material = I18;
            const U20 = parseFloat(x36.children[0].getAttribute("radius")) || 0, V16 = parseFloat(x36.children[0].getAttribute("length")) || 0;
            z21.scale.set(U20, V16, U20), z21.rotation.set(Math.PI / 2, 0, 0), P20.add(z21);
          }
        } else if (C21 === "origin") {
          const G16 = an4(x36.getAttribute("xyz")), z21 = an4(x36.getAttribute("rpy"));
          P20.position.set(G16[0], G16[1], G16[2]), P20.rotation.set(0, 0, 0), Zc2(P20, z21);
        }
      }), P20;
    }
    return d34(e11);
  }
  // Default mesh loading function
  defaultMeshLoader(e11, t19, i27) {
    /\.stl$/i.test(e11) ? new R_2(t19).load(e11, (r24) => {
      const n33 = new Rt8(r24, new Jn5());
      i27(n33);
    }) : /\.dae$/i.test(e11) ? new N_2(t19).load(e11, (r24) => i27(r24.scene)) : console.warn(`URDFLoader: Could not load model at ${e11}.
No loader available`);
  }
};
var U_2 = Object.defineProperty;
var In5 = (s18, e11, t19, i27) => {
  for (var r24 = void 0, n33 = s18.length - 1, a22; n33 >= 0; n33--)
    (a22 = s18[n33]) && (r24 = a22(e11, t19, r24) || r24);
  return r24 && U_2(e11, t19, r24), r24;
};
var ao2;
var Jc;
var oo;
var Nr5 = (oo = class extends x {
  constructor() {
    super(...arguments), Ht7(this, ao2), this.urdfConfigs = qo2, this.name = this.urdfConfigs[0].name, this.jointValues = {}, this.pose = [0, 0, 0], this._translation = [0, 0, 0], this._rotation = [0, 0, 0, 0], this.loader = new jo2(), this.group = new Lt5();
  }
  getUrdfConfig() {
    return this.urdfConfigs.find(({ name: s18 }) => s18 === this.name) ?? this.urdfConfigs[0];
  }
  getField() {
    const s18 = this.closest("frc-field3d");
    if (s18)
      return s18;
  }
  static updatePose(s18, e11) {
    const [t19, i27, r24] = e11.translation;
    s18.position.set(t19, i27, r24), s18.rotation.setFromQuaternion(pa2(e11.rotation));
  }
  loadRobotModel() {
    const s18 = this.getField(), e11 = this.getUrdfConfig();
    if (!s18)
      return;
    const t19 = s18.getFieldGroup();
    t19.remove(this.group), this.object && this.group.remove(this.object);
    const i27 = new Fo2(), r24 = new qh2(i27), n33 = Gh2(e11.src ?? "");
    r24.packages = {
      "": An5(s18.assetPathPrefix ?? "", n33)
      // The equivalent of a (list of) ROS package(s):// directory
    };
    const a22 = new Promise((c27) => {
      if (e11.src)
        r24.load(
          An5(s18.assetPathPrefix ?? "", e11.src),
          (h26) => {
            c27(h26);
          }
        );
      else {
        const h26 = r24.parse(e11.content ?? "");
        c27(h26);
      }
    }), o13 = new Lt5();
    this.group = o13, t19.add(this.group);
    const l26 = new Lt5();
    this.object = l26, o13.add(l26), l26.rotation.setFromQuaternion(
      yr4(e11.rotations)
    ), l26.position.set(...e11.position), a22.then((c27) => {
      this.robot = c27, this.updateJoints(), l26.add(c27), Bi3(this, ao2, Jc).call(this);
    });
  }
  updateJoints() {
    var s18;
    (s18 = this.robot) == null || s18.setJointValues(this.jointValues);
  }
  firstUpdated() {
    this.updateUrdfConfigs(), this.renderObject();
    const s18 = this.closest("frc-field3d");
    s18 == null || s18.addEventListener("urdfConfigsChange", () => {
      this.updateUrdfConfigs();
    });
  }
  updated(s18) {
    if (s18.has("name") && this.loadRobotModel(), s18.has("jointValues") && this.updateJoints(), s18.has("pose")) {
      const [e11 = 0, t19 = 0, i27 = 0] = this.pose;
      this._translation = [e11, t19], this._rotation = i27;
    }
  }
  updateUrdfConfigs() {
    const s18 = this.getField(), e11 = s18 == null ? void 0 : s18.urdfConfigs;
    e11 != null && e11.length && e11 !== this.urdfConfigs && (this.urdfConfigs = e11, this.urdfConfigs.some(
      (t19) => t19.name === this.name
    ) || (this.name = this.urdfConfigs[0].name));
  }
  renderObject() {
    this.group && oo.updatePose(this.group, {
      translation: this._translation.length === 2 ? [...this._translation, 0] : this._translation,
      rotation: typeof this._rotation == "number" ? Kn5([{ axis: "z", degrees: this._rotation }]) : this._rotation
    }), requestAnimationFrame(() => {
      this.renderObject();
    });
  }
}, ao2 = /* @__PURE__ */ new WeakSet(), Jc = function() {
  this.dispatchEvent(
    new CustomEvent("urdfLoad", {
      detail: {
        urdf: this.robot
      },
      bubbles: true,
      composed: true
    })
  );
}, oo);
In5([
  n()
], Nr5.prototype, "urdfConfigs");
In5([
  Rt({ type: String })
], Nr5.prototype, "name");
In5([
  Rt({ type: Object, attribute: "joint-values" })
], Nr5.prototype, "jointValues");
In5([
  Rt({ type: Array })
], Nr5.prototype, "pose");
In5([
  n()
], Nr5.prototype, "_translation");
In5([
  n()
], Nr5.prototype, "_rotation");
var Yh2 = Nr5;
customElements.get("frc-field3d-urdf") || customElements.define("frc-field3d-urdf", Yh2);
var O_2 = Object.defineProperty;
var mi6 = (s18, e11, t19, i27) => {
  for (var r24 = void 0, n33 = s18.length - 1, a22; n33 >= 0; n33--)
    (a22 = s18[n33]) && (r24 = a22(e11, t19, r24) || r24);
  return r24 && O_2(e11, t19, r24), r24;
};
var lo2;
var Kc2;
var cr5;
var si6 = (cr5 = class extends x {
  constructor() {
    super(...arguments), Ht7(this, lo2), this.fieldConfigs = A_2, this.objectConfigs = Vh2, this.urdfConfigs = qo2, this.game = this.fieldConfigs[0].game, this.origin = "red", this.backgroundColor = "black", this.enableVR = false, this.fixedCamera = false, this.ORBIT_FIELD_DEFAULT_TARGET = new k20(0, 0.5, 0), this.ORBIT_FIELD_DEFAULT_POSITION = new k20(0, 6, -12), this.WPILIB_ROTATION = yr4([
      {
        axis: "x",
        degrees: -90
      },
      {
        axis: "y",
        degrees: 180
      }
    ]), this.cameraPoseObject = new _t8(), this.scene = new ko2(), this.loader = new jo2();
  }
  getFieldConfig() {
    return this.fieldConfigs.find(({ game: s18 }) => s18 === this.game) ?? this.fieldConfigs[0];
  }
  getCamera() {
    const s18 = this.getBoundingClientRect();
    return new Bt6(
      50,
      s18.width / s18.height,
      0.1,
      100
    );
  }
  static getOrbitControls(s18, e11) {
    const t19 = new Fh2(s18, e11);
    return t19.maxDistance = 30, t19.enabled = true, t19.update(), t19;
  }
  static addLights(s18) {
    const e11 = new da2(16777215, 0.2);
    e11.position.set(0, 10, 0), s18.add(e11);
    const t19 = 16777215, i27 = 4473924, r24 = 1, n33 = new kh2(
      t19,
      i27,
      r24
    );
    s18.add(n33);
  }
  initRenderer() {
    if (!this.canvas)
      return;
    this.renderer = new Do2({
      antialias: true,
      canvas: this.canvas
    });
    const s18 = this.getBoundingClientRect();
    this.renderer.setSize(s18.width, s18.height), this.vrButton = Tr5.createButton(this.renderer), this.renderer.xr.enabled = this.enableVR, this.renderer.setAnimationLoop(() => this.renderField());
  }
  initScene() {
    this.wpilibCoordinateGroup = new Lt5(), this.scene.add(this.wpilibCoordinateGroup), this.wpilibCoordinateGroup.rotation.setFromQuaternion(this.WPILIB_ROTATION), this.wpilibFieldCoordinateGroup = new Lt5(), this.wpilibCoordinateGroup.add(this.wpilibFieldCoordinateGroup), this.wpilibFieldCoordinateGroup.add(this.cameraPoseObject);
  }
  updateCanvasSize() {
    var s18;
    const e11 = this.getBoundingClientRect();
    (s18 = this.renderer) == null || s18.setSize(e11.width, e11.height), this.camera.aspect = e11.width / e11.height, this.camera.updateProjectionMatrix();
  }
  static adjustMaterials(s18) {
    s18.traverse((e11) => {
      const t19 = e11;
      if (t19.isMesh && t19.material instanceof as3) {
        const i27 = t19.material;
        i27.metalness = 0, i27.roughness = 1;
      }
    });
  }
  static updatePose(s18, e11) {
    const [t19, i27, r24] = e11.translation;
    s18.position.set(t19, i27, r24), s18.rotation.setFromQuaternion(pa2(e11.rotation));
  }
  loadFieldModel(s18) {
    this.fieldObject && this.wpilibCoordinateGroup.remove(this.fieldObject);
    const e11 = An5(this.assetPathPrefix ?? "", s18.src);
    this.loader.load(e11, (t19) => {
      this.fieldObject = t19.scene, this.wpilibCoordinateGroup.add(t19.scene), cr5.adjustMaterials(t19.scene), t19.scene.rotation.setFromQuaternion(
        yr4(s18.rotations)
      );
    });
  }
  getFieldGroup() {
    return this.wpilibFieldCoordinateGroup;
  }
  createFieldObject(s18) {
    return new L_2(this, s18 == null ? void 0 : s18.onCreate, s18 == null ? void 0 : s18.onRemove);
  }
  firstUpdated() {
    this.initScene(), this.initRenderer(), this.camera = this.getCamera(), this.controls = cr5.getOrbitControls(this.camera, this.canvas), this.camera.position.copy(this.ORBIT_FIELD_DEFAULT_POSITION), this.controls.target.copy(this.ORBIT_FIELD_DEFAULT_TARGET), cr5.addLights(this.scene), new ResizeObserver(() => {
      this.updateCanvasSize();
    }).observe(this);
  }
  updated(s18) {
    if (s18.has("fieldConfigs") && (this.fieldConfigs.some(
      (e11) => e11.game === this.game
    ) || (this.game = this.fieldConfigs[0].game), this.loadFieldModel(this.getFieldConfig())), s18.has("game") && this.loadFieldModel(this.getFieldConfig()), s18.has("backgroundColor") && (this.scene.background = new ze7(this.backgroundColor)), s18.has("origin")) {
      const e11 = this.getFieldConfig();
      if (e11) {
        const t19 = this.origin !== "red";
        this.wpilibFieldCoordinateGroup.setRotationFromAxisAngle(
          new k20(0, 0, 1),
          t19 ? 0 : Math.PI
        ), this.wpilibFieldCoordinateGroup.position.set(
          n23(e11.size[0] / 2, e11.unit, "m") * (t19 ? -1 : 1),
          n23(e11.size[1] / 2, e11.unit, "m") * (t19 ? -1 : 1),
          0
        );
      }
    }
    if (s18.has("enableVR") && (this.enableVR ? this.container.appendChild(this.vrButton) : this.vrButton.remove(), this.renderer && (this.renderer.xr.enabled = this.enableVR)), s18.has("fixedCamera") && (this.controls.enabled = !this.fixedCamera), (s18.has("cameraPose") || s18.has("fixedCamera")) && this.fixedCamera) {
      const e11 = this.cameraPose ? Hh2(this.cameraPose) : Xo2();
      Bi3(this, lo2, Kc2).call(this, e11);
    }
    s18.has("urdfConfigs") && this.dispatchEvent(
      new CustomEvent("urdfConfigsChange", {
        detail: {
          urdfConfigs: this.urdfConfigs
        },
        bubbles: true,
        composed: true
      })
    );
  }
  renderField() {
    var s18;
    (s18 = this.renderer) == null || s18.render(this.scene, this.camera), this.fixedCamera || this.controls.update();
  }
  connectedCallback() {
    super.connectedCallback(), this.initRenderer();
  }
  disconnectedCallback() {
    var s18;
    super.disconnectedCallback(), (s18 = this.renderer) == null || s18.dispose(), this.renderer = void 0;
  }
  render() {
    return Ht` <div class="container">
      <canvas></canvas>
    </div>`;
  }
}, lo2 = /* @__PURE__ */ new WeakSet(), Kc2 = function(s18) {
  cr5.updatePose(this.cameraPoseObject, s18);
  const e11 = new k20();
  this.cameraPoseObject.getWorldPosition(e11);
  const t19 = new jt8();
  this.cameraPoseObject.getWorldQuaternion(t19), this.camera.position.copy(e11), this.camera.quaternion.copy(
    t19.multiply(
      yr4([
        { axis: "z", degrees: -90 },
        { axis: "y", degrees: -90 }
      ])
    )
  ), this.camera.updateMatrixWorld();
}, cr5.styles = Mt`
    :host {
      position: relative;
      display: block;
      width: 700px;
      height: 400px;
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
  `, cr5);
mi6([
  Rt({ type: Array })
], si6.prototype, "fieldConfigs");
mi6([
  Rt({ type: Array })
], si6.prototype, "objectConfigs");
mi6([
  Rt({ type: Array })
], si6.prototype, "urdfConfigs");
mi6([
  Rt({ type: String })
], si6.prototype, "game");
mi6([
  Rt({ type: String })
], si6.prototype, "origin");
mi6([
  Rt({ type: String, attribute: "background-color" })
], si6.prototype, "backgroundColor");
mi6([
  Rt({ type: Boolean, attribute: "enable-vr" })
], si6.prototype, "enableVR");
mi6([
  Rt({ type: String })
], si6.prototype, "assetPathPrefix");
mi6([
  Rt({ type: Array, attribute: "camera-pose" })
], si6.prototype, "cameraPose");
mi6([
  Rt({ type: Boolean, attribute: "fixed-camera" })
], si6.prototype, "fixedCamera");
mi6([
  a("canvas")
], si6.prototype, "canvas");
mi6([
  a(".container")
], si6.prototype, "container");
var Zh2 = si6;
customElements.get("frc-field3d") || customElements.define("frc-field3d", Zh2);
var z_2 = Object.defineProperty;
var sr5 = (s18, e11, t19, i27) => {
  for (var r24 = void 0, n33 = s18.length - 1, a22; n33 >= 0; n33--)
    (a22 = s18[n33]) && (r24 = a22(e11, t19, r24) || r24);
  return r24 && z_2(e11, t19, r24), r24;
};
var co2;
var $c2;
var jn5;
var Wi3 = (jn5 = class extends x {
  constructor() {
    super(...arguments), Ht7(this, co2), this.urdfConfigs = qo2, this.name = this.urdfConfigs[0].name, this.backgroundColor = "black", this.enableVR = false, this.angles = {}, this.scene = new ko2(), this.group = new Lt5();
  }
  getCamera() {
    const s18 = this.getBoundingClientRect(), e11 = new Bt6(
      50,
      s18.width / s18.height,
      0.1,
      100
    );
    return e11.position.set(1, 1, 1), e11.lookAt(0, 0, 0.5), e11.up.set(0, 0, 1), e11;
  }
  static getOrbitControls(s18, e11) {
    const t19 = new Fh2(s18, e11);
    return t19.maxDistance = 30, t19.enabled = true, t19.update(), t19;
  }
  static addLights(s18) {
    const e11 = new da2(16777215, 0.2);
    e11.position.set(0, 10, 0), s18.add(e11);
    const t19 = 16777215, i27 = 4473924, r24 = 1, n33 = new kh2(
      t19,
      i27,
      r24
    );
    s18.add(n33);
  }
  initRenderer() {
    if (!this.canvas)
      return;
    this.renderer = new Do2({
      antialias: true,
      canvas: this.canvas
    });
    const s18 = this.getBoundingClientRect();
    this.renderer.setSize(s18.width, s18.height), this.vrButton = Tr5.createButton(this.renderer), this.renderer.xr.enabled = this.enableVR, this.renderer.setAnimationLoop(() => this.renderField());
  }
  updateCanvasSize() {
    var s18;
    const e11 = this.getBoundingClientRect();
    (s18 = this.renderer) == null || s18.setSize(e11.width, e11.height), this.camera.aspect = e11.width / e11.height, this.camera.updateProjectionMatrix();
  }
  firstUpdated() {
    this.initRenderer(), this.camera = this.getCamera(), this.controls = jn5.getOrbitControls(this.camera, this.canvas), jn5.addLights(this.scene);
    const s18 = new oa2(5, 5, 20, 20), e11 = new xi6({
      color: 65280,
      side: ui6,
      wireframe: true
    }), t19 = new Rt8(s18, e11);
    this.scene.add(t19), new ResizeObserver(() => {
      this.updateCanvasSize();
    }).observe(this);
  }
  getUrdfConfig() {
    return this.urdfConfigs.find(({ name: s18 }) => s18 === this.name) ?? this.urdfConfigs[0];
  }
  updateAngles() {
    var s18;
    (s18 = this.robot) == null || s18.setAngles(this.angles);
  }
  loadRobotModel() {
    const s18 = this.getUrdfConfig(), e11 = new Fo2(), t19 = new qh2(e11), i27 = Gh2(s18.src ?? "");
    t19.packages = {
      "": An5(this.assetPathPrefix ?? "", i27)
      // The equivalent of a (list of) ROS package(s):// directory
    };
    const r24 = new Promise((o13) => {
      if (s18.src)
        t19.load(
          An5(this.assetPathPrefix ?? "", s18.src),
          (l26) => {
            o13(l26);
          }
        );
      else {
        const l26 = t19.parse(s18.content ?? "");
        o13(l26);
      }
    }), n33 = new Lt5();
    this.group = n33, this.scene.add(this.group);
    const a22 = new Lt5();
    this.object = a22, n33.add(a22), a22.rotation.setFromQuaternion(
      yr4(s18.rotations)
    ), a22.position.set(...s18.position), r24.then((o13) => {
      this.robot = o13, this.updateAngles(), a22.add(o13), Bi3(this, co2, $c2).call(this);
    });
  }
  updated(s18) {
    (s18.has("urdfConfigs") || s18.has("name")) && (this.urdfConfigs.some(
      (e11) => e11.name === this.name
    ) || (this.name = this.urdfConfigs[0].name), this.loadRobotModel()), s18.has("backgroundColor") && (this.scene.background = new ze7(this.backgroundColor)), s18.has("enableVR") && (this.enableVR ? this.container.appendChild(this.vrButton) : this.vrButton.remove(), this.renderer && (this.renderer.xr.enabled = this.enableVR));
  }
  renderField() {
    var s18;
    (s18 = this.renderer) == null || s18.render(this.scene, this.camera), this.controls.update();
  }
  connectedCallback() {
    super.connectedCallback(), this.initRenderer();
  }
  disconnectedCallback() {
    var s18;
    super.disconnectedCallback(), (s18 = this.renderer) == null || s18.dispose(), this.renderer = void 0;
  }
  render() {
    return Ht` <div class="container">
      <canvas></canvas>
    </div>`;
  }
}, co2 = /* @__PURE__ */ new WeakSet(), $c2 = function() {
  this.dispatchEvent(
    new CustomEvent("urdfLoad", {
      detail: {
        urdf: this.robot
      }
    })
  );
}, jn5.styles = Mt`
    :host {
      position: relative;
      display: block;
      width: 700px;
      height: 400px;
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
  `, jn5);
sr5([
  Rt({ type: Array })
], Wi3.prototype, "urdfConfigs");
sr5([
  Rt({ type: String })
], Wi3.prototype, "name");
sr5([
  Rt({ type: String, attribute: "background-color" })
], Wi3.prototype, "backgroundColor");
sr5([
  Rt({ type: Boolean, attribute: "enable-vr" })
], Wi3.prototype, "enableVR");
sr5([
  Rt({ type: String })
], Wi3.prototype, "assetPathPrefix");
sr5([
  Rt({ type: Object })
], Wi3.prototype, "angles");
sr5([
  a("canvas")
], Wi3.prototype, "canvas");
sr5([
  a(".container")
], Wi3.prototype, "container");
var Jh2 = Wi3;
customElements.get("frc-urdf") || customElements.define("frc-urdf", Jh2);
var B_ = Object.defineProperty;
var Kh2 = (s18, e11, t19, i27) => {
  for (var r24 = void 0, n33 = s18.length - 1, a22; n33 >= 0; n33--)
    (a22 = s18[n33]) && (r24 = a22(e11, t19, r24) || r24);
  return r24 && B_(e11, t19, r24), r24;
};
var Qs2;
var gn4;
var mr4;
var _n4;
var fr5;
var To;
var $h2;
var fa2 = class extends x {
  constructor() {
    super(...arguments), Ht7(this, To), Ht7(this, Qs2), Ht7(this, gn4), Ht7(this, mr4), Ht7(this, _n4), Ht7(this, fr5), this.pose = [0, 0, 0], this._pose3d = Xo2();
  }
  getField() {
    return this.closest("frc-field3d");
  }
  loadRobotModel() {
    ft12(this, Qs2).create();
  }
  firstUpdated() {
    const e11 = new Lr5(0.2, 0.2, 0.2), t19 = new S02(e11), i27 = new Tn4({ color: 16044581, linewidth: 4 }), r24 = new zo2(t19, i27);
    ei6(this, gn4, r24), ei6(this, mr4, new to2(
      new k20(1, 0, 0).normalize(),
      new k20(0, 0, 0),
      0.3,
      16711680,
      0.1,
      0.05
    )), ei6(this, _n4, new to2(
      new k20(1, 0, 0).normalize(),
      new k20(0, 0, 0),
      0.3,
      16711680,
      0.1,
      0.05
    )), ei6(this, fr5, new to2(
      new k20(1, 0, 0).normalize(),
      new k20(0, 0, 0),
      0.3,
      16711680,
      0.1,
      0.05
    )), ei6(this, Qs2, this.getField().createFieldObject({
      onCreate: (n33) => {
        const a22 = n33.getGroup();
        a22.add(ft12(this, gn4)), a22.add(ft12(this, mr4)), a22.add(ft12(this, _n4)), a22.add(ft12(this, fr5));
      }
    }));
  }
  updated(e11) {
    e11.has("pose") && (this._pose3d = Hh2(this.pose), Bi3(this, To, $h2).call(this));
  }
};
Qs2 = /* @__PURE__ */ new WeakMap(), gn4 = /* @__PURE__ */ new WeakMap(), mr4 = /* @__PURE__ */ new WeakMap(), _n4 = /* @__PURE__ */ new WeakMap(), fr5 = /* @__PURE__ */ new WeakMap(), To = /* @__PURE__ */ new WeakSet(), $h2 = function() {
  const s18 = pa2(this._pose3d.rotation), [e11, t19, i27] = this._pose3d.translation;
  ft12(this, gn4).position.set(e11, t19, i27), ft12(this, gn4).rotation.setFromQuaternion(s18), ft12(this, mr4).rotation.setFromQuaternion(s18), ft12(this, mr4).rotateZ(-Math.PI / 2), ft12(this, mr4).position.set(e11, t19, i27), ft12(this, _n4).rotation.setFromQuaternion(s18), ft12(this, _n4).position.set(e11, t19, i27), ft12(this, fr5).setRotationFromQuaternion(s18), ft12(this, fr5).rotateX(Math.PI / 2), ft12(this, fr5).position.set(e11, t19, i27);
};
Kh2([
  Rt({ type: Array })
], fa2.prototype, "pose");
Kh2([
  n()
], fa2.prototype, "_pose3d");
customElements.get("frc-field3d-pose-visualizer") || customElements.define("frc-field3d-pose-visualizer", fa2);
var F_ = Object.defineProperty;
var Dn4 = (s18, e11, t19, i27) => {
  for (var r24 = void 0, n33 = s18.length - 1, a22; n33 >= 0; n33--)
    (a22 = s18[n33]) && (r24 = a22(e11, t19, r24) || r24);
  return r24 && F_(e11, t19, r24), r24;
};
var gr5;
var vn5;
var ea2;
var _r4;
var Eo2;
var Qh2;
var Qc2;
var eu2;
var Pr5 = class extends x {
  constructor() {
    super(...arguments), Ht7(this, _r4), Ht7(this, gr5), Ht7(this, vn5), Ht7(this, ea2), this.name = "", this.pose = [0, 0, 0], this.sourceProvider = "", this.sourceKey = "", ei6(this, gr5, []), ei6(this, vn5, false);
  }
  getJointValues() {
    const e11 = Bi3(this, _r4, Eo2).call(this);
    if (!(e11 != null && e11.hasChildren())) {
      const a22 = {};
      return ft12(this, gr5).forEach((o13) => {
        a22[o13] = 0;
      }), a22;
    }
    const t19 = [this.sourceKey, "joints"].join("/"), i27 = this.store.getSource(
      this.sourceProvider,
      t19
    ), r24 = (i27 == null ? void 0 : i27.getJson(false)) ?? {}, n33 = {};
    return ft12(this, gr5).forEach((a22) => {
      n33[a22] = r24[a22] ?? 0;
    }), n33;
  }
  createRenderRoot() {
    return this;
  }
  updated(e11) {
    (e11.has("sourceProvider") || e11.has("sourceKey") || e11.has("store")) && (ei6(this, vn5, false), Bi3(this, _r4, Qh2).call(this));
  }
  render() {
    return Ht`
      <frc-field3d-urdf
        @urdfLoad=${Bi3(this, _r4, eu2)}
        .jointValues=${this.getJointValues()}
        .pose=${this.pose}
        .name=${this.name}
      ></frc-field3d-urdf>
    `;
  }
};
gr5 = /* @__PURE__ */ new WeakMap(), vn5 = /* @__PURE__ */ new WeakMap(), ea2 = /* @__PURE__ */ new WeakMap(), _r4 = /* @__PURE__ */ new WeakSet(), Eo2 = function() {
  const { provider: s18, store: e11, sourceProvider: t19, sourceKey: i27 } = this;
  if (!(!s18 || !e11 || !t19 || !i27))
    return e11.getSource(t19, i27);
}, Qh2 = function() {
  var s18, e11;
  (s18 = ft12(this, ea2)) == null || s18.call(this), !(!this.sourceProvider || !this.sourceKey) && ei6(this, ea2, (e11 = this.store) == null ? void 0 : e11.subscribe(
    this.sourceProvider,
    this.sourceKey,
    () => {
      Bi3(this, _r4, Qc2).call(this), this.requestUpdate();
    },
    true
  ));
}, Qc2 = function() {
  ft12(this, vn5) || !Bi3(this, _r4, Eo2).call(this) || (ft12(this, gr5).forEach((s18) => {
    var e11;
    const t19 = [this.sourceKey, "joints", s18].join(
      "/"
    ), i27 = this.store.getSource(
      this.sourceProvider,
      t19
    );
    i27 != null && i27.hasValue() || (e11 = this.provider) == null || e11.userUpdate(t19, 0);
  }), ei6(this, vn5, true));
}, eu2 = function(s18) {
  const e11 = s18.detail.urdf;
  ei6(this, gr5, Object.keys(e11.joints).sort()), Object.values(e11.joints).forEach((t19) => {
    t19.ignoreLimits = true;
  }), this.requestUpdate();
};
Dn4([
  Rt({ type: String })
], Pr5.prototype, "name");
Dn4([
  Rt({ type: Array })
], Pr5.prototype, "pose");
Dn4([
  Rt({ type: Object, attribute: false })
], Pr5.prototype, "provider");
Dn4([
  Rt({ type: Object, attribute: false })
], Pr5.prototype, "store");
Dn4([
  Rt({ type: String, attribute: "source-provider" })
], Pr5.prototype, "sourceProvider");
Dn4([
  Rt({ type: String, attribute: "source-key" })
], Pr5.prototype, "sourceKey");
customElements.get("frc-field3d-urdf-wrapper") || customElements.define("frc-field3d-urdf-wrapper", Pr5);
var X_ = xt({
  tagName: "frc-field3d",
  elementClass: Zh2,
  react: import_react13.default
});
var q_2 = xt({
  tagName: "frc-field3d-object",
  elementClass: Wh2,
  react: import_react13.default
});
var Y_ = xt({
  tagName: "frc-field3d-urdf",
  elementClass: Yh2,
  react: import_react13.default,
  events: {
    onurdfload: "urdfLoad"
  }
});
var Z_ = xt({
  tagName: "frc-urdf",
  elementClass: Jh2,
  react: import_react13.default,
  events: {
    onurdfload: "urdfLoad"
  }
});
var J_ = xt({
  tagName: "frc-field3d-pose-visualizer",
  elementClass: fa2,
  react: import_react13.default
});

// node_modules/@frc-web-components/react/dist/components/Form.es.js
var import_react14 = __toESM(require_react(), 1);
var m25 = (t19) => {
  throw TypeError(t19);
};
var O15 = (t19, e11, s18) => e11.has(t19) || m25("Cannot " + s18);
var y23 = (t19, e11, s18) => e11.has(t19) ? m25("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(t19) : e11.set(t19, s18);
var g23 = (t19, e11, s18) => (O15(t19, e11, "access private method"), s18);
var A16 = Object.defineProperty;
var n24 = (t19, e11, s18, E25) => {
  for (var o13 = void 0, r24 = t19.length - 1, l26; r24 >= 0; r24--)
    (l26 = t19[r24]) && (o13 = l26(e11, s18, o13) || o13);
  return o13 && A16(e11, s18, o13), o13;
};
var h19;
var f28;
var $18 = class extends x {
  constructor() {
    super(...arguments), y23(this, h19), this.disabled = false, this.label = "", this.options = [], this.selected = [], this.direction = "vertical";
  }
  render() {
    return Ht`
      <vaadin-checkbox-group
        .disabled=${this.disabled}
        .label=${this.label}
        theme=${this.direction}
        .value=${this.selected}
      >
        ${this.options.map(
      (e11) => Ht`
            <vaadin-checkbox value=${e11} @change=${() => g23(this, h19, f28).call(this)}
              >${e11}</vaadin-checkbox
            >
          `
    )}
      </vaadin-checkbox-group>
    `;
  }
};
h19 = /* @__PURE__ */ new WeakSet(), f28 = function() {
  this.selected = this.element.value;
  const t19 = new CustomEvent("change", {
    bubbles: true,
    composed: true,
    detail: { selected: this.selected }
  });
  this.dispatchEvent(t19);
}, $18.styles = Mt`
    :host {
      display: inline-block;
    }
  `;
var i20 = $18;
n24([
  Rt({ type: Boolean })
], i20.prototype, "disabled");
n24([
  Rt({ type: String })
], i20.prototype, "label");
n24([
  Rt({ type: Array })
], i20.prototype, "options");
n24([
  Rt({ type: Array })
], i20.prototype, "selected");
n24([
  Rt({ type: String })
], i20.prototype, "direction");
n24([
  a("vaadin-checkbox-group")
], i20.prototype, "element");
customElements.get("frc-checkbox-group") || customElements.define("frc-checkbox-group", i20);
var B17 = Object.defineProperty;
var d23 = (t19, e11, s18, E25) => {
  for (var o13 = void 0, r24 = t19.length - 1, l26; r24 >= 0; r24--)
    (l26 = t19[r24]) && (o13 = l26(e11, s18, o13) || o13);
  return o13 && B17(e11, s18, o13), o13;
};
var u24;
var k21;
var x24 = class extends x {
  constructor() {
    super(...arguments), y23(this, u24), this.disabled = false, this.label = "", this.options = [], this.selected = "", this.direction = "vertical";
  }
  render() {
    return Ht`
      <vaadin-radio-group
        @value-changed=${(e11) => g23(this, u24, k21).call(this, e11)}
        .disabled=${this.disabled}
        .label=${this.label}
        theme=${this.direction}
        .value=${this.selected}
      >
        ${this.options.map(
      (e11) => Ht`
            <vaadin-radio-button value=${e11}>${e11}</vaadin-radio-button>
          `
    )}
      </vaadin-radio-group>
    `;
  }
};
u24 = /* @__PURE__ */ new WeakSet(), k21 = function(t19) {
  this.selected = t19.detail.value;
  const e11 = new CustomEvent("change", {
    bubbles: true,
    composed: true,
    detail: { selected: this.selected }
  });
  this.dispatchEvent(e11);
}, x24.styles = Mt`
    :host {
      display: inline-block;
    }
  `;
var c18 = x24;
d23([
  Rt({ type: Boolean })
], c18.prototype, "disabled");
d23([
  Rt({ type: String })
], c18.prototype, "label");
d23([
  Rt({ type: Array })
], c18.prototype, "options");
d23([
  Rt({ type: String })
], c18.prototype, "selected");
d23([
  Rt({ type: String })
], c18.prototype, "direction");
customElements.get("frc-radio-group") || customElements.define("frc-radio-group", c18);
var G13 = xt({
  tagName: "frc-checkbox-group",
  elementClass: i20,
  react: import_react14.default,
  events: {
    onchange: "change"
  }
});

// node_modules/@frc-web-components/react/dist/components/Gauge.es.js
var import_react15 = __toESM(require_react(), 1);
var P15 = { exports: {} };
var ft13 = P15.exports;
var X13;
function mt12() {
  return X13 || (X13 = 1, function(y34) {
    (function(i27, u35) {
      var p26 = u35(i27);
      y34.exports ? y34.exports = p26 : i27.Gauge = p26;
    })(typeof window > "u" ? ft13 : window, function(i27, u35) {
      var p26 = i27.document, g32 = Array.prototype.slice, b35 = i27.requestAnimationFrame || i27.mozRequestAnimationFrame || i27.webkitRequestAnimationFrame || i27.msRequestAnimationFrame || function(m34) {
        return setTimeout(m34, 1e3 / 60);
      };
      function A18(m34) {
        var E25 = m34.duration, k29 = 1, N22 = 60 * E25, v31 = m34.start || 0, z21 = m34.end, C21 = z21 - v31, q14 = m34.step, R22 = m34.easing || function(e11) {
          return (e11 /= 0.5) < 1 ? 0.5 * Math.pow(e11, 3) : 0.5 * (Math.pow(e11 - 2, 3) + 2);
        };
        function V16() {
          var e11 = k29 / N22, t19 = C21 * R22(e11) + v31;
          q14(t19, k29), k29 += 1, e11 < 1 && b35(V16);
        }
        b35(V16);
      }
      var W11 = function() {
        var m34 = "http://www.w3.org/2000/svg", E25 = {
          centerX: 50,
          centerY: 50
        }, k29 = {
          dialRadius: 40,
          dialStartAngle: 135,
          dialEndAngle: 45,
          value: 0,
          max: 100,
          min: 0,
          valueDialClass: "value",
          valueClass: "value-text",
          dialClass: "dial",
          gaugeClass: "gauge",
          showValue: true,
          gaugeColor: null,
          label: function(e11) {
            return Math.round(e11);
          }
        };
        function N22() {
          var e11 = arguments[0], t19 = g32.call(arguments, 1);
          return t19.forEach(function(n33) {
            for (var a22 in n33)
              n33.hasOwnProperty(a22) && (e11[a22] = n33[a22]);
          }), e11;
        }
        function v31(e11, t19, n33) {
          var a22 = p26.createElementNS(m34, e11);
          for (var s18 in t19)
            a22.setAttribute(s18, t19[s18]);
          return n33 && n33.forEach(function(o13) {
            a22.appendChild(o13);
          }), a22;
        }
        function z21(e11, t19) {
          return e11 * t19 / 100;
        }
        function C21(e11, t19, n33) {
          var a22 = Number(e11);
          return a22 > n33 ? n33 : a22 < t19 ? t19 : a22;
        }
        function q14(e11, t19, n33) {
          var a22 = n33 - t19, s18 = e11 - t19;
          return 100 * s18 / a22;
        }
        function R22(e11, t19, n33, a22) {
          var s18 = a22 * Math.PI / 180;
          return {
            x: Math.round((e11 + n33 * Math.cos(s18)) * 1e3) / 1e3,
            y: Math.round((t19 + n33 * Math.sin(s18)) * 1e3) / 1e3
          };
        }
        function V16(e11, t19, n33) {
          var a22 = E25.centerX, s18 = E25.centerY;
          return {
            end: R22(a22, s18, e11, n33),
            start: R22(a22, s18, e11, t19)
          };
        }
        return function(e11, t19) {
          t19 = N22({}, k29, t19);
          var n33 = e11, a22 = t19.max, s18 = t19.min, o13 = C21(t19.value, s18, a22), O20 = t19.dialRadius, J12 = t19.showValue, c27 = t19.dialStartAngle, w31 = t19.dialEndAngle, K16 = t19.valueDialClass, Q12 = t19.valueClass;
          t19.valueLabelClass;
          var Z12 = t19.dialClass, _21 = t19.gaugeClass, F19 = t19.color, I18, x36, tt12 = t19.label, et15 = t19.viewBox, j19;
          if (c27 < w31) {
            console.log("WARN! startAngle < endAngle, Swapping");
            var at11 = c27;
            c27 = w31, w31 = at11;
          }
          function B22(r24, d34, f40, l26) {
            var h26 = V16(r24, d34, f40), L12 = h26.start, T21 = h26.end, it16 = typeof l26 > "u" ? 1 : l26;
            return [
              "M",
              L12.x,
              L12.y,
              "A",
              r24,
              r24,
              0,
              it16,
              1,
              T21.x,
              T21.y
            ].join(" ");
          }
          function nt17(r24) {
            I18 = v31("text", {
              x: 50,
              y: 50,
              fill: "#999",
              class: Q12,
              "font-size": "100%",
              "font-family": "sans-serif",
              "font-weight": "normal",
              "text-anchor": "middle",
              "alignment-baseline": "middle",
              "dominant-baseline": "central"
            }), x36 = v31("path", {
              class: K16,
              fill: "none",
              stroke: "#666",
              "stroke-width": 2.5,
              d: B22(O20, c27, c27)
              // value of 0
            });
            var d34 = z21(100, 360 - Math.abs(c27 - w31)), f40 = d34 <= 180 ? 0 : 1, l26 = v31("svg", { viewBox: et15 || "0 0 100 100", class: _21 }, [
              v31("path", {
                class: Z12,
                fill: "none",
                stroke: "#eee",
                "stroke-width": 2,
                d: B22(O20, c27, w31, f40)
              }),
              v31("g", { class: "text-container" }, [I18]),
              x36
            ]);
            r24.appendChild(l26);
          }
          function D18(r24, d34) {
            var f40 = q14(r24, s18, a22), l26 = z21(f40, 360 - Math.abs(c27 - w31)), h26 = l26 <= 180 ? 0 : 1;
            J12 && (I18.textContent = tt12.call(t19, r24)), x36.setAttribute("d", B22(O20, c27, l26 + c27, h26));
          }
          function H16(r24, d34) {
            var f40 = F19.call(t19, r24), l26 = d34 * 1e3, h26 = "stroke " + l26 + "ms ease";
            x36.style.stroke = f40, x36.style["-webkit-transition"] = h26, x36.style["-moz-transition"] = h26, x36.style.transition = h26;
          }
          return j19 = {
            setMaxValue: function(r24) {
              a22 = r24, D18(o13);
            },
            setValue: function(r24) {
              o13 = C21(r24, s18, a22), F19 && H16(o13, 0), D18(o13);
            },
            setValueAnimated: function(r24, d34) {
              var f40 = o13;
              o13 = C21(r24, s18, a22), f40 !== o13 && (F19 && H16(o13, d34), A18({
                start: f40 || 0,
                end: o13,
                duration: d34 || 1,
                step: function(l26, h26) {
                  D18(l26);
                }
              }));
            },
            getValue: function() {
              return o13;
            }
          }, nt17(n33), j19.setValue(o13), j19;
        };
      }();
      return W11;
    });
  }(P15)), P15.exports;
}
var Y12;
var $19;
function dt13() {
  return $19 || ($19 = 1, Y12 = mt12()), Y12;
}
var ht15 = dt13();
var vt7 = t15(ht15);
var pt10 = Object.defineProperty;
var S18 = (y34, i27, u35, p26) => {
  for (var g32 = void 0, b35 = y34.length - 1, A18; b35 >= 0; b35--)
    (A18 = y34[b35]) && (g32 = A18(i27, u35, g32) || g32);
  return g32 && pt10(i27, u35, g32), g32;
};
var G14 = class extends x {
  constructor() {
    super(...arguments), this.min = 0, this.max = 100, this.value = 0;
  }
  setSize() {
    const i27 = this.getBoundingClientRect(), u35 = i27.width, p26 = i27.height, g32 = Math.min(u35, p26);
    this.gaugeElement.style.width = `${g32}px`;
  }
  gaugeInit() {
    this.gaugeElement.innerHTML = "", this.gauge = vt7(this.gaugeElement, {
      min: Math.min(this.min, this.max),
      max: Math.max(this.min, this.max)
    }), this.setSize();
  }
  firstUpdated() {
    this.gaugeInit(), new ResizeObserver(() => this.setSize()).observe(this);
  }
  updated(i27) {
    var u35;
    (i27.has("min") || i27.has("max")) && this.gaugeInit(), (u35 = this.gauge) == null || u35.setValue(this.value);
  }
  render() {
    return Ht`
      <div class="gauge-container-container">
        <div id="gauge" class="gauge-container"></div>
      </div>
    `;
  }
};
G14.styles = Mt`
    :host {
      display: inline-block;
      width: 200px;
      height: 200px;
    }

    .gauge-container-container {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .gauge-container {
      display: block;
    }

    .gauge-container > .gauge > .dial {
      stroke: #ddd;
      stroke-width: 3;
      fill: rgba(0, 0, 0, 0);
      stroke: var(--frc-gauge-color, rgb(221, 221, 221));
    }
    .gauge-container > .gauge > .value {
      stroke: var(--frc-gauge-fill-color, rgb(47, 180, 200));
      stroke-width: 3;
      fill: rgba(0, 0, 0, 0);
    }
    .gauge-container > .gauge .value-text {
      fill: var(--frc-gauge-text-color, rgb(100, 100, 100));
      font-family: sans-serif;
      font-size: 1em;
    }
  `;
var M10 = G14;
S18([
  Rt({ type: Number })
], M10.prototype, "min");
S18([
  Rt({ type: Number })
], M10.prototype, "max");
S18([
  Rt({ type: Number })
], M10.prototype, "value");
S18([
  a("#gauge")
], M10.prototype, "gaugeElement");
customElements.get("frc-gauge") || customElements.define("frc-gauge", M10);
var kt8 = xt({
  tagName: "frc-gauge",
  elementClass: M10,
  react: import_react15.default
});

// node_modules/@frc-web-components/react/dist/components/Gyro.es.js
var import_react16 = __toESM(require_react(), 1);
function x25(r24, t19, e11) {
  r24 = +r24, t19 = +t19, e11 = (s18 = arguments.length) < 2 ? (t19 = r24, r24 = 0, 1) : s18 < 3 ? 1 : +e11;
  for (var n33 = -1, s18 = Math.max(0, Math.ceil((t19 - r24) / e11)) | 0, l26 = new Array(s18); ++n33 < s18; )
    l26[n33] = r24 + n33 * e11;
  return l26;
}
var w23 = Object.defineProperty;
var a14 = (r24, t19, e11, n33) => {
  for (var s18 = void 0, l26 = r24.length - 1, o13; l26 >= 0; l26--)
    (o13 = r24[l26]) && (s18 = o13(t19, e11, s18) || s18);
  return s18 && w23(t19, e11, s18), s18;
};
function _19(r24) {
  return r24 * Math.PI / 180;
}
function y24(r24) {
  return r24 * 180 / Math.PI;
}
function R17(r24, t19, e11) {
  return Math.min(e11, Math.max(r24, t19));
}
function c19(r24, t19 = false) {
  const e11 = _19(-(r24 - 90));
  return [t19 ? -Math.cos(e11) : Math.cos(e11), Math.sin(e11)];
}
var p20 = class extends x {
  constructor() {
    super(...arguments), this.value = 0, this.hideLabel = false, this.precision = 2, this.counterClockwise = false, this.fromRadians = false;
  }
  setLabels() {
    const t19 = this.getGyroRadius();
    $i(this._labels).selectAll("text").data([0, 45, 90, 135, 180, -135, -90, -45]).join(
      (e11) => e11.append("text").attr("text-anchor", "middle").attr("alignment-baseline", "middle").attr("font-size", 15).attr("fill", "var(--frc-gyro-color, #000)").text((n33) => `${n33}°`)
    ).attr(
      "x",
      (e11) => c19(e11, this.counterClockwise)[0] * (t19 + 30)
    ).attr(
      "y",
      (e11) => -c19(e11, this.counterClockwise)[1] * (t19 + 30)
    );
  }
  setDialAngle() {
    const t19 = this.getGyroRadius(), e11 = this.fromRadians ? y24(this.value) : this.value;
    $i(this._dial).attr(
      "x2",
      c19(e11, this.counterClockwise)[0] * (t19 - 7)
    ).attr(
      "y2",
      -c19(e11, this.counterClockwise)[1] * (t19 - 7)
    );
  }
  addTicks(t19, e11, n33, s18) {
    const l26 = this.getGyroRadius();
    $i(t19).selectAll("line").data(x25(0, 360, n33)).join(
      (o13) => o13.append("line").attr("stroke", "var(--frc-gyro-color, #000)").attr("stroke-width", s18)
    ).attr("x1", (o13) => c19(o13)[0] * l26).attr("y1", (o13) => -c19(o13)[1] * l26).attr(
      "x2",
      (o13) => c19(o13)[0] * (l26 + e11)
    ).attr(
      "y2",
      (o13) => -c19(o13)[1] * (l26 + e11)
    );
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.resized();
    }).observe(this), this.resized();
  }
  resized() {
    const t19 = this.getSize();
    $i(this._svg).attr("width", t19).attr("height", t19), $i(this._gyro).attr(
      "transform",
      `translate(${t19 / 2},${t19 / 2})`
    );
    const e11 = this.getGyroRadius();
    $i(this._gyroEdge).attr("r", e11), this.addTicks(this._minorTicks, 5, 5, 1), this.addTicks(this._majorTicks, 10, 45, 2), this.setLabels(), this.setDialAngle();
  }
  getSize() {
    const { width: t19 } = this.getBoundingClientRect();
    return t19;
  }
  getGyroRadius() {
    return this.getSize() / 2 - 53;
  }
  updated(t19) {
    (t19.has("value") || t19.has("fromRadians") || t19.has("counterClockwise")) && this.setDialAngle(), t19.has("counterClockwise") && this.setLabels();
  }
  render() {
    const t19 = `${(this.fromRadians ? y24(this.value) : this.value).toFixed(R17(this.precision, 0, 100))}`;
    return Ht`
      <div>
        ${Nt`
          <svg>
            <g class="gyro">
              <circle class="gyro-edge" stroke-width="2" stroke="var(--frc-gyro-color, #000)" style="fill: none"></circle>
              <g class="minor-ticks"></g>
              <g class="major-ticks"></g>
              <g class="labels"></g>
              <circle class="dial-circle" r="9"></circle>
              <line class="dial" x1="0" x2="0"></line>
            </g>
          </svg>
        `} ${this.hideLabel ? null : Ht`<label>${t19}&deg</label> `}
      </div>
    `;
  }
};
p20.styles = Mt`
    :host {
      font-family: sans-serif;
      display: inline-flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      width: 300px;
      height: auto;
    }

    svg {
      width: 100%;
    }

    label {
      color: var(--frc-gyro-color, #000);
      text-align: center;
      display: block;
      font-size: 16px;
    }

    .dial-circle {
      fill: var(--frc-gyro-dial-color, blue);
    }

    .dial {
      stroke: var(--frc-gyro-dial-color, blue);
      stroke-width: 3;
    }
  `;
var i21 = p20;
a14([
  Rt({ type: Number })
], i21.prototype, "value");
a14([
  Rt({ type: Boolean, attribute: "hide-label" })
], i21.prototype, "hideLabel");
a14([
  Rt({ type: Number })
], i21.prototype, "precision");
a14([
  Rt({ type: Boolean, attribute: "counter-clockwise" })
], i21.prototype, "counterClockwise");
a14([
  Rt({ type: Boolean, attribute: "from-radians" })
], i21.prototype, "fromRadians");
a14([
  a("svg")
], i21.prototype, "_svg");
a14([
  a(".dial")
], i21.prototype, "_dial");
a14([
  a(".gyro")
], i21.prototype, "_gyro");
a14([
  a(".gyro-edge")
], i21.prototype, "_gyroEdge");
a14([
  a(".minor-ticks")
], i21.prototype, "_minorTicks");
a14([
  a(".major-ticks")
], i21.prototype, "_majorTicks");
a14([
  a(".labels")
], i21.prototype, "_labels");
customElements.get("frc-gyro") || customElements.define("frc-gyro", i21);
var j13 = xt({
  tagName: "frc-gyro",
  elementClass: i21,
  react: import_react16.default
});

// node_modules/@frc-web-components/react/dist/components/Icon.es.js
var import_react17 = __toESM(require_react(), 1);
var c20 = xt({
  tagName: "frc-icon",
  elementClass: i4,
  react: import_react17.default
});

// node_modules/@frc-web-components/react/dist/components/KeyValueTable.es.js
var import_jsx_runtime3 = __toESM(require_jsx_runtime(), 1);
function i22({
  keyValuePairs: t19
}) {
  return (0, import_jsx_runtime3.jsxs)("table", { className: "key-value-table", children: [
    (0, import_jsx_runtime3.jsx)("thead", { children: (0, import_jsx_runtime3.jsxs)("tr", { children: [
      (0, import_jsx_runtime3.jsx)("th", { children: "Key" }),
      (0, import_jsx_runtime3.jsx)("th", { children: "Value" })
    ] }) }),
    (0, import_jsx_runtime3.jsx)("tbody", { children: Object.entries(t19).map(([r24, n33]) => (0, import_jsx_runtime3.jsxs)("tr", { children: [
      (0, import_jsx_runtime3.jsx)("td", { children: r24 }),
      (0, import_jsx_runtime3.jsx)("td", { children: (0, import_jsx_runtime3.jsx)("div", { children: JSON.stringify(n33, null, 2) }) })
    ] }, r24)) })
  ] });
}

// node_modules/@frc-web-components/react/dist/components/LineChart.es.js
var import_react18 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/style-map-CXHve4fi-4b8d68f4.js
var i23 = "important";
var f30 = " !" + i23;
var h20 = _16(class extends i15 {
  constructor(s18) {
    var e11;
    if (super(s18), s18.type !== T15.ATTRIBUTE || s18.name !== "style" || ((e11 = s18.strings) == null ? void 0 : e11.length) > 2)
      throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.");
  }
  render(s18) {
    return Object.keys(s18).reduce((e11, r24) => {
      const t19 = s18[r24];
      return t19 == null ? e11 : e11 + `${r24 = r24.includes("-") ? r24 : r24.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g, "-$&").toLowerCase()}:${t19};`;
    }, "");
  }
  update(s18, [e11]) {
    const { style: r24 } = s18.element;
    if (this.ft === void 0)
      return this.ft = new Set(Object.keys(e11)), this.render(e11);
    for (const t19 of this.ft)
      e11[t19] == null && (this.ft.delete(t19), t19.includes("-") ? r24.removeProperty(t19) : r24[t19] = null);
    for (const t19 in e11) {
      const n33 = e11[t19];
      if (n33 != null) {
        this.ft.add(t19);
        const o13 = typeof n33 == "string" && n33.endsWith(f30);
        t19.includes("-") || o13 ? r24.setProperty(t19, o13 ? n33.slice(0, -11) : n33, o13 ? i23 : "") : r24[t19] = n33;
      }
    }
    return E;
  }
});

// node_modules/@frc-web-components/react/dist/components/LineChart.es.js
function Ue6(e11, t19) {
  return e11 == null || t19 == null ? NaN : e11 < t19 ? -1 : e11 > t19 ? 1 : e11 >= t19 ? 0 : NaN;
}
function Mn6(e11, t19) {
  return e11 == null || t19 == null ? NaN : t19 < e11 ? -1 : t19 > e11 ? 1 : t19 >= e11 ? 0 : NaN;
}
function nt16(e11) {
  let t19, n33, r24;
  e11.length !== 2 ? (t19 = Ue6, n33 = (u35, l26) => Ue6(e11(u35), l26), r24 = (u35, l26) => e11(u35) - l26) : (t19 = e11 === Ue6 || e11 === Mn6 ? e11 : xn6, n33 = e11, r24 = e11);
  function i27(u35, l26, s18 = 0, h26 = u35.length) {
    if (s18 < h26) {
      if (t19(l26, l26) !== 0)
        return h26;
      do {
        const d34 = s18 + h26 >>> 1;
        n33(u35[d34], l26) < 0 ? s18 = d34 + 1 : h26 = d34;
      } while (s18 < h26);
    }
    return s18;
  }
  function o13(u35, l26, s18 = 0, h26 = u35.length) {
    if (s18 < h26) {
      if (t19(l26, l26) !== 0)
        return h26;
      do {
        const d34 = s18 + h26 >>> 1;
        n33(u35[d34], l26) <= 0 ? s18 = d34 + 1 : h26 = d34;
      } while (s18 < h26);
    }
    return s18;
  }
  function a22(u35, l26, s18 = 0, h26 = u35.length) {
    const d34 = i27(u35, l26, s18, h26 - 1);
    return d34 > s18 && r24(u35[d34 - 1], l26) > -r24(u35[d34], l26) ? d34 - 1 : d34;
  }
  return { left: i27, center: a22, right: o13 };
}
function xn6() {
  return 0;
}
function wn6(e11) {
  return e11 === null ? NaN : +e11;
}
var Tn5 = nt16(Ue6);
var Cn6 = Tn5.right;
nt16(wn6).center;
var pt11 = class extends Map {
  constructor(t19, n33 = Dn5) {
    if (super(), Object.defineProperties(this, { _intern: { value: /* @__PURE__ */ new Map() }, _key: { value: n33 } }), t19 != null)
      for (const [r24, i27] of t19)
        this.set(r24, i27);
  }
  get(t19) {
    return super.get(vt8(this, t19));
  }
  has(t19) {
    return super.has(vt8(this, t19));
  }
  set(t19, n33) {
    return super.set(bn6(this, t19), n33);
  }
  delete(t19) {
    return super.delete(An6(this, t19));
  }
};
function vt8({ _intern: e11, _key: t19 }, n33) {
  const r24 = t19(n33);
  return e11.has(r24) ? e11.get(r24) : n33;
}
function bn6({ _intern: e11, _key: t19 }, n33) {
  const r24 = t19(n33);
  return e11.has(r24) ? e11.get(r24) : (e11.set(r24, n33), n33);
}
function An6({ _intern: e11, _key: t19 }, n33) {
  const r24 = t19(n33);
  return e11.has(r24) && (n33 = e11.get(r24), e11.delete(r24)), n33;
}
function Dn5(e11) {
  return e11 !== null && typeof e11 == "object" ? e11.valueOf() : e11;
}
var $n6 = Math.sqrt(50);
var kn5 = Math.sqrt(10);
var Un5 = Math.sqrt(2);
function Ne6(e11, t19, n33) {
  const r24 = (t19 - e11) / Math.max(0, n33), i27 = Math.floor(Math.log10(r24)), o13 = r24 / Math.pow(10, i27), a22 = o13 >= $n6 ? 10 : o13 >= kn5 ? 5 : o13 >= Un5 ? 2 : 1;
  let u35, l26, s18;
  return i27 < 0 ? (s18 = Math.pow(10, -i27) / a22, u35 = Math.round(e11 * s18), l26 = Math.round(t19 * s18), u35 / s18 < e11 && ++u35, l26 / s18 > t19 && --l26, s18 = -s18) : (s18 = Math.pow(10, i27) * a22, u35 = Math.round(e11 / s18), l26 = Math.round(t19 / s18), u35 * s18 < e11 && ++u35, l26 * s18 > t19 && --l26), l26 < u35 && 0.5 <= n33 && n33 < 2 ? Ne6(e11, t19, n33 * 2) : [u35, l26, s18];
}
function Fn6(e11, t19, n33) {
  if (t19 = +t19, e11 = +e11, n33 = +n33, !(n33 > 0))
    return [];
  if (e11 === t19)
    return [e11];
  const r24 = t19 < e11, [i27, o13, a22] = r24 ? Ne6(t19, e11, n33) : Ne6(e11, t19, n33);
  if (!(o13 >= i27))
    return [];
  const u35 = o13 - i27 + 1, l26 = new Array(u35);
  if (r24)
    if (a22 < 0)
      for (let s18 = 0; s18 < u35; ++s18)
        l26[s18] = (o13 - s18) / -a22;
    else
      for (let s18 = 0; s18 < u35; ++s18)
        l26[s18] = (o13 - s18) * a22;
  else if (a22 < 0)
    for (let s18 = 0; s18 < u35; ++s18)
      l26[s18] = (i27 + s18) / -a22;
  else
    for (let s18 = 0; s18 < u35; ++s18)
      l26[s18] = (i27 + s18) * a22;
  return l26;
}
function Re6(e11, t19, n33) {
  return t19 = +t19, e11 = +e11, n33 = +n33, Ne6(e11, t19, n33)[2];
}
function Ke6(e11, t19, n33) {
  t19 = +t19, e11 = +e11, n33 = +n33;
  const r24 = t19 < e11, i27 = r24 ? Re6(t19, e11, n33) : Re6(e11, t19, n33);
  return (r24 ? -1 : 1) * (i27 < 0 ? 1 / -i27 : i27);
}
function Nn5(e11) {
  return e11;
}
var Ie6 = 1;
var Fe6 = 2;
var et14 = 3;
var Me6 = 4;
var yt13 = 1e-6;
function Sn6(e11) {
  return "translate(" + e11 + ",0)";
}
function Yn5(e11) {
  return "translate(0," + e11 + ")";
}
function _n5(e11) {
  return (t19) => +e11(t19);
}
function Ln5(e11, t19) {
  return t19 = Math.max(0, e11.bandwidth() - t19 * 2) / 2, e11.round() && (t19 = Math.round(t19)), (n33) => +e11(n33) + t19;
}
function Hn6() {
  return !this.__axis;
}
function rt14(e11, t19) {
  var n33 = [], r24 = null, i27 = null, o13 = 6, a22 = 6, u35 = 3, l26 = typeof window < "u" && window.devicePixelRatio > 1 ? 0 : 0.5, s18 = e11 === Ie6 || e11 === Me6 ? -1 : 1, h26 = e11 === Me6 || e11 === Fe6 ? "x" : "y", d34 = e11 === Ie6 || e11 === et14 ? Sn6 : Yn5;
  function f40(m34) {
    var A18 = r24 ?? (t19.ticks ? t19.ticks.apply(t19, n33) : t19.domain()), _21 = i27 ?? (t19.tickFormat ? t19.tickFormat.apply(t19, n33) : Nn5), S23 = Math.max(o13, 0) + u35, L12 = t19.range(), j19 = +L12[0] + l26, C21 = +L12[L12.length - 1] + l26, N22 = (t19.bandwidth ? Ln5 : _n5)(t19.copy(), l26), b35 = m34.selection ? m34.selection() : m34, p26 = b35.selectAll(".domain").data([null]), w31 = b35.selectAll(".tick").data(A18, t19).order(), O20 = w31.exit(), W11 = w31.enter().append("g").attr("class", "tick"), V16 = w31.select("line"), v31 = w31.select("text");
    p26 = p26.merge(p26.enter().insert("path", ".tick").attr("class", "domain").attr("stroke", "currentColor")), w31 = w31.merge(W11), V16 = V16.merge(W11.append("line").attr("stroke", "currentColor").attr(h26 + "2", s18 * o13)), v31 = v31.merge(W11.append("text").attr("fill", "currentColor").attr(h26, s18 * S23).attr("dy", e11 === Ie6 ? "0em" : e11 === et14 ? "0.71em" : "0.32em")), m34 !== b35 && (p26 = p26.transition(m34), w31 = w31.transition(m34), V16 = V16.transition(m34), v31 = v31.transition(m34), O20 = O20.transition(m34).attr("opacity", yt13).attr("transform", function(U20) {
      return isFinite(U20 = N22(U20)) ? d34(U20 + l26) : this.getAttribute("transform");
    }), W11.attr("opacity", yt13).attr("transform", function(U20) {
      var D18 = this.parentNode.__axis;
      return d34((D18 && isFinite(D18 = D18(U20)) ? D18 : N22(U20)) + l26);
    })), O20.remove(), p26.attr("d", e11 === Me6 || e11 === Fe6 ? a22 ? "M" + s18 * a22 + "," + j19 + "H" + l26 + "V" + C21 + "H" + s18 * a22 : "M" + l26 + "," + j19 + "V" + C21 : a22 ? "M" + j19 + "," + s18 * a22 + "V" + l26 + "H" + C21 + "V" + s18 * a22 : "M" + j19 + "," + l26 + "H" + C21), w31.attr("opacity", 1).attr("transform", function(U20) {
      return d34(N22(U20) + l26);
    }), V16.attr(h26 + "2", s18 * o13), v31.attr(h26, s18 * S23).text(_21), b35.filter(Hn6).attr("fill", "none").attr("font-size", 10).attr("font-family", "sans-serif").attr("text-anchor", e11 === Fe6 ? "start" : e11 === Me6 ? "end" : "middle"), b35.each(function() {
      this.__axis = N22;
    });
  }
  return f40.scale = function(m34) {
    return arguments.length ? (t19 = m34, f40) : t19;
  }, f40.ticks = function() {
    return n33 = Array.from(arguments), f40;
  }, f40.tickArguments = function(m34) {
    return arguments.length ? (n33 = m34 == null ? [] : Array.from(m34), f40) : n33.slice();
  }, f40.tickValues = function(m34) {
    return arguments.length ? (r24 = m34 == null ? null : Array.from(m34), f40) : r24 && r24.slice();
  }, f40.tickFormat = function(m34) {
    return arguments.length ? (i27 = m34, f40) : i27;
  }, f40.tickSize = function(m34) {
    return arguments.length ? (o13 = a22 = +m34, f40) : o13;
  }, f40.tickSizeInner = function(m34) {
    return arguments.length ? (o13 = +m34, f40) : o13;
  }, f40.tickSizeOuter = function(m34) {
    return arguments.length ? (a22 = +m34, f40) : a22;
  }, f40.tickPadding = function(m34) {
    return arguments.length ? (u35 = +m34, f40) : u35;
  }, f40.offset = function(m34) {
    return arguments.length ? (l26 = +m34, f40) : l26;
  }, f40;
}
function zn6(e11) {
  return rt14(Fe6, e11);
}
function jt9(e11) {
  return rt14(et14, e11);
}
function Mt9(e11) {
  return rt14(Me6, e11);
}
function jn6(e11, t19) {
  t19 || (t19 = []);
  var n33 = e11 ? Math.min(t19.length, e11.length) : 0, r24 = t19.slice(), i27;
  return function(o13) {
    for (i27 = 0; i27 < n33; ++i27)
      r24[i27] = e11[i27] * (1 - o13) + t19[i27] * o13;
    return r24;
  };
}
function Pn6(e11) {
  return ArrayBuffer.isView(e11) && !(e11 instanceof DataView);
}
function On6(e11, t19) {
  var n33 = t19 ? t19.length : 0, r24 = e11 ? Math.min(n33, e11.length) : 0, i27 = new Array(r24), o13 = new Array(n33), a22;
  for (a22 = 0; a22 < r24; ++a22)
    i27[a22] = it15(e11[a22], t19[a22]);
  for (; a22 < n33; ++a22)
    o13[a22] = t19[a22];
  return function(u35) {
    for (a22 = 0; a22 < r24; ++a22)
      o13[a22] = i27[a22](u35);
    return o13;
  };
}
function En6(e11, t19) {
  var n33 = /* @__PURE__ */ new Date();
  return e11 = +e11, t19 = +t19, function(r24) {
    return n33.setTime(e11 * (1 - r24) + t19 * r24), n33;
  };
}
function Vn6(e11, t19) {
  var n33 = {}, r24 = {}, i27;
  (e11 === null || typeof e11 != "object") && (e11 = {}), (t19 === null || typeof t19 != "object") && (t19 = {});
  for (i27 in t19)
    i27 in e11 ? n33[i27] = it15(e11[i27], t19[i27]) : r24[i27] = t19[i27];
  return function(o13) {
    for (i27 in n33)
      r24[i27] = n33[i27](o13);
    return r24;
  };
}
function it15(e11, t19) {
  var n33 = typeof t19, r24;
  return t19 == null || n33 === "boolean" ? Qt(t19) : (n33 === "number" ? A2 : n33 === "string" ? (r24 = I2(t19)) ? (t19 = r24, qt) : cr : t19 instanceof I2 ? qt : t19 instanceof Date ? En6 : Pn6(t19) ? jn6 : Array.isArray(t19) ? On6 : typeof t19.valueOf != "function" && typeof t19.toString != "function" || isNaN(t19) ? Vn6 : A2)(e11, t19);
}
function Bn6(e11, t19) {
  return e11 = +e11, t19 = +t19, function(n33) {
    return Math.round(e11 * (1 - n33) + t19 * n33);
  };
}
function In6(e11) {
  return Math.abs(e11 = Math.round(e11)) >= 1e21 ? e11.toLocaleString("en").replace(/,/g, "") : e11.toString(10);
}
function Se6(e11, t19) {
  if ((n33 = (e11 = t19 ? e11.toExponential(t19 - 1) : e11.toExponential()).indexOf("e")) < 0)
    return null;
  var n33, r24 = e11.slice(0, n33);
  return [
    r24.length > 1 ? r24[0] + r24.slice(2) : r24,
    +e11.slice(n33 + 1)
  ];
}
function he7(e11) {
  return e11 = Se6(Math.abs(e11)), e11 ? e11[1] : NaN;
}
function Zn6(e11, t19) {
  return function(n33, r24) {
    for (var i27 = n33.length, o13 = [], a22 = 0, u35 = e11[0], l26 = 0; i27 > 0 && u35 > 0 && (l26 + u35 + 1 > r24 && (u35 = Math.max(1, r24 - l26)), o13.push(n33.substring(i27 -= u35, i27 + u35)), !((l26 += u35 + 1) > r24)); )
      u35 = e11[a22 = (a22 + 1) % e11.length];
    return o13.reverse().join(t19);
  };
}
function qn6(e11) {
  return function(t19) {
    return t19.replace(/[0-9]/g, function(n33) {
      return e11[+n33];
    });
  };
}
var Gn6 = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
function Ye6(e11) {
  if (!(t19 = Gn6.exec(e11)))
    throw new Error("invalid format: " + e11);
  var t19;
  return new ot14({
    fill: t19[1],
    align: t19[2],
    sign: t19[3],
    symbol: t19[4],
    zero: t19[5],
    width: t19[6],
    comma: t19[7],
    precision: t19[8] && t19[8].slice(1),
    trim: t19[9],
    type: t19[10]
  });
}
Ye6.prototype = ot14.prototype;
function ot14(e11) {
  this.fill = e11.fill === void 0 ? " " : e11.fill + "", this.align = e11.align === void 0 ? ">" : e11.align + "", this.sign = e11.sign === void 0 ? "-" : e11.sign + "", this.symbol = e11.symbol === void 0 ? "" : e11.symbol + "", this.zero = !!e11.zero, this.width = e11.width === void 0 ? void 0 : +e11.width, this.comma = !!e11.comma, this.precision = e11.precision === void 0 ? void 0 : +e11.precision, this.trim = !!e11.trim, this.type = e11.type === void 0 ? "" : e11.type + "";
}
ot14.prototype.toString = function() {
  return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (this.width === void 0 ? "" : Math.max(1, this.width | 0)) + (this.comma ? "," : "") + (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) + (this.trim ? "~" : "") + this.type;
};
function Wn6(e11) {
  e:
    for (var t19 = e11.length, n33 = 1, r24 = -1, i27; n33 < t19; ++n33)
      switch (e11[n33]) {
        case ".":
          r24 = i27 = n33;
          break;
        case "0":
          r24 === 0 && (r24 = n33), i27 = n33;
          break;
        default:
          if (!+e11[n33])
            break e;
          r24 > 0 && (r24 = 0);
          break;
      }
  return r24 > 0 ? e11.slice(0, r24) + e11.slice(i27 + 1) : e11;
}
var Pt8;
function Xn6(e11, t19) {
  var n33 = Se6(e11, t19);
  if (!n33)
    return e11 + "";
  var r24 = n33[0], i27 = n33[1], o13 = i27 - (Pt8 = Math.max(-8, Math.min(8, Math.floor(i27 / 3))) * 3) + 1, a22 = r24.length;
  return o13 === a22 ? r24 : o13 > a22 ? r24 + new Array(o13 - a22 + 1).join("0") : o13 > 0 ? r24.slice(0, o13) + "." + r24.slice(o13) : "0." + new Array(1 - o13).join("0") + Se6(e11, Math.max(0, t19 + o13 - 1))[0];
}
function xt7(e11, t19) {
  var n33 = Se6(e11, t19);
  if (!n33)
    return e11 + "";
  var r24 = n33[0], i27 = n33[1];
  return i27 < 0 ? "0." + new Array(-i27).join("0") + r24 : r24.length > i27 + 1 ? r24.slice(0, i27 + 1) + "." + r24.slice(i27 + 1) : r24 + new Array(i27 - r24.length + 2).join("0");
}
var wt9 = {
  "%": (e11, t19) => (e11 * 100).toFixed(t19),
  b: (e11) => Math.round(e11).toString(2),
  c: (e11) => e11 + "",
  d: In6,
  e: (e11, t19) => e11.toExponential(t19),
  f: (e11, t19) => e11.toFixed(t19),
  g: (e11, t19) => e11.toPrecision(t19),
  o: (e11) => Math.round(e11).toString(8),
  p: (e11, t19) => xt7(e11 * 100, t19),
  r: xt7,
  s: Xn6,
  X: (e11) => Math.round(e11).toString(16).toUpperCase(),
  x: (e11) => Math.round(e11).toString(16)
};
function Tt8(e11) {
  return e11;
}
var Ct8 = Array.prototype.map;
var bt9 = ["y", "z", "a", "f", "p", "n", "µ", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"];
function Qn6(e11) {
  var t19 = e11.grouping === void 0 || e11.thousands === void 0 ? Tt8 : Zn6(Ct8.call(e11.grouping, Number), e11.thousands + ""), n33 = e11.currency === void 0 ? "" : e11.currency[0] + "", r24 = e11.currency === void 0 ? "" : e11.currency[1] + "", i27 = e11.decimal === void 0 ? "." : e11.decimal + "", o13 = e11.numerals === void 0 ? Tt8 : qn6(Ct8.call(e11.numerals, String)), a22 = e11.percent === void 0 ? "%" : e11.percent + "", u35 = e11.minus === void 0 ? "−" : e11.minus + "", l26 = e11.nan === void 0 ? "NaN" : e11.nan + "";
  function s18(d34) {
    d34 = Ye6(d34);
    var f40 = d34.fill, m34 = d34.align, A18 = d34.sign, _21 = d34.symbol, S23 = d34.zero, L12 = d34.width, j19 = d34.comma, C21 = d34.precision, N22 = d34.trim, b35 = d34.type;
    b35 === "n" ? (j19 = true, b35 = "g") : wt9[b35] || (C21 === void 0 && (C21 = 12), N22 = true, b35 = "g"), (S23 || f40 === "0" && m34 === "=") && (S23 = true, f40 = "0", m34 = "=");
    var p26 = _21 === "$" ? n33 : _21 === "#" && /[boxX]/.test(b35) ? "0" + b35.toLowerCase() : "", w31 = _21 === "$" ? r24 : /[%p]/.test(b35) ? a22 : "", O20 = wt9[b35], W11 = /[defgprs%]/.test(b35);
    C21 = C21 === void 0 ? 6 : /[gprs]/.test(b35) ? Math.max(1, Math.min(21, C21)) : Math.max(0, Math.min(20, C21));
    function V16(v31) {
      var U20 = p26, D18 = w31, X14, Ae6, oe7;
      if (b35 === "c")
        D18 = O20(v31) + D18, v31 = "";
      else {
        v31 = +v31;
        var ae7 = v31 < 0 || 1 / v31 < 0;
        if (v31 = isNaN(v31) ? l26 : O20(Math.abs(v31), C21), N22 && (v31 = Wn6(v31)), ae7 && +v31 == 0 && A18 !== "+" && (ae7 = false), U20 = (ae7 ? A18 === "(" ? A18 : u35 : A18 === "-" || A18 === "(" ? "" : A18) + U20, D18 = (b35 === "s" ? bt9[8 + Pt8 / 3] : "") + D18 + (ae7 && A18 === "(" ? ")" : ""), W11) {
          for (X14 = -1, Ae6 = v31.length; ++X14 < Ae6; )
            if (oe7 = v31.charCodeAt(X14), 48 > oe7 || oe7 > 57) {
              D18 = (oe7 === 46 ? i27 + v31.slice(X14 + 1) : v31.slice(X14)) + D18, v31 = v31.slice(0, X14);
              break;
            }
        }
      }
      j19 && !S23 && (v31 = t19(v31, 1 / 0));
      var se6 = U20.length + v31.length + D18.length, E25 = se6 < L12 ? new Array(L12 - se6 + 1).join(f40) : "";
      switch (j19 && S23 && (v31 = t19(E25 + v31, E25.length ? L12 - D18.length : 1 / 0), E25 = ""), m34) {
        case "<":
          v31 = U20 + v31 + D18 + E25;
          break;
        case "=":
          v31 = U20 + E25 + v31 + D18;
          break;
        case "^":
          v31 = E25.slice(0, se6 = E25.length >> 1) + U20 + v31 + D18 + E25.slice(se6);
          break;
        default:
          v31 = E25 + U20 + v31 + D18;
          break;
      }
      return o13(v31);
    }
    return V16.toString = function() {
      return d34 + "";
    }, V16;
  }
  function h26(d34, f40) {
    var m34 = s18((d34 = Ye6(d34), d34.type = "f", d34)), A18 = Math.max(-8, Math.min(8, Math.floor(he7(f40) / 3))) * 3, _21 = Math.pow(10, -A18), S23 = bt9[8 + A18 / 3];
    return function(L12) {
      return m34(_21 * L12) + S23;
    };
  }
  return {
    format: s18,
    formatPrefix: h26
  };
}
var ke6;
var Ot9;
var Et8;
Jn6({
  thousands: ",",
  grouping: [3],
  currency: ["$", ""]
});
function Jn6(e11) {
  return ke6 = Qn6(e11), Ot9 = ke6.format, Et8 = ke6.formatPrefix, ke6;
}
function Rn6(e11) {
  return Math.max(0, -he7(Math.abs(e11)));
}
function Kn6(e11, t19) {
  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(he7(t19) / 3))) * 3 - he7(Math.abs(e11)));
}
function er6(e11, t19) {
  return e11 = Math.abs(e11), t19 = Math.abs(t19) - e11, Math.max(0, he7(t19) - he7(e11)) + 1;
}
function at10(e11, t19) {
  switch (arguments.length) {
    case 0:
      break;
    case 1:
      this.range(e11);
      break;
    default:
      this.range(t19).domain(e11);
      break;
  }
  return this;
}
var At8 = Symbol("implicit");
function Vt7() {
  var e11 = new pt11(), t19 = [], n33 = [], r24 = At8;
  function i27(o13) {
    let a22 = e11.get(o13);
    if (a22 === void 0) {
      if (r24 !== At8)
        return r24;
      e11.set(o13, a22 = t19.push(o13) - 1);
    }
    return n33[a22 % n33.length];
  }
  return i27.domain = function(o13) {
    if (!arguments.length)
      return t19.slice();
    t19 = [], e11 = new pt11();
    for (const a22 of o13)
      e11.has(a22) || e11.set(a22, t19.push(a22) - 1);
    return i27;
  }, i27.range = function(o13) {
    return arguments.length ? (n33 = Array.from(o13), i27) : n33.slice();
  }, i27.unknown = function(o13) {
    return arguments.length ? (r24 = o13, i27) : r24;
  }, i27.copy = function() {
    return Vt7(t19, n33).unknown(r24);
  }, at10.apply(i27, arguments), i27;
}
function tr6(e11) {
  return function() {
    return e11;
  };
}
function nr6(e11) {
  return +e11;
}
var Dt5 = [0, 1];
function le6(e11) {
  return e11;
}
function tt11(e11, t19) {
  return (t19 -= e11 = +e11) ? function(n33) {
    return (n33 - e11) / t19;
  } : tr6(isNaN(t19) ? NaN : 0.5);
}
function rr6(e11, t19) {
  var n33;
  return e11 > t19 && (n33 = e11, e11 = t19, t19 = n33), function(r24) {
    return Math.max(e11, Math.min(t19, r24));
  };
}
function ir6(e11, t19, n33) {
  var r24 = e11[0], i27 = e11[1], o13 = t19[0], a22 = t19[1];
  return i27 < r24 ? (r24 = tt11(i27, r24), o13 = n33(a22, o13)) : (r24 = tt11(r24, i27), o13 = n33(o13, a22)), function(u35) {
    return o13(r24(u35));
  };
}
function or6(e11, t19, n33) {
  var r24 = Math.min(e11.length, t19.length) - 1, i27 = new Array(r24), o13 = new Array(r24), a22 = -1;
  for (e11[r24] < e11[0] && (e11 = e11.slice().reverse(), t19 = t19.slice().reverse()); ++a22 < r24; )
    i27[a22] = tt11(e11[a22], e11[a22 + 1]), o13[a22] = n33(t19[a22], t19[a22 + 1]);
  return function(u35) {
    var l26 = Cn6(e11, u35, 1, r24) - 1;
    return o13[l26](i27[l26](u35));
  };
}
function Bt7(e11, t19) {
  return t19.domain(e11.domain()).range(e11.range()).interpolate(e11.interpolate()).clamp(e11.clamp()).unknown(e11.unknown());
}
function ar6() {
  var e11 = Dt5, t19 = Dt5, n33 = it15, r24, i27, o13, a22 = le6, u35, l26, s18;
  function h26() {
    var f40 = Math.min(e11.length, t19.length);
    return a22 !== le6 && (a22 = rr6(e11[0], e11[f40 - 1])), u35 = f40 > 2 ? or6 : ir6, l26 = s18 = null, d34;
  }
  function d34(f40) {
    return f40 == null || isNaN(f40 = +f40) ? o13 : (l26 || (l26 = u35(e11.map(r24), t19, n33)))(r24(a22(f40)));
  }
  return d34.invert = function(f40) {
    return a22(i27((s18 || (s18 = u35(t19, e11.map(r24), A2)))(f40)));
  }, d34.domain = function(f40) {
    return arguments.length ? (e11 = Array.from(f40, nr6), h26()) : e11.slice();
  }, d34.range = function(f40) {
    return arguments.length ? (t19 = Array.from(f40), h26()) : t19.slice();
  }, d34.rangeRound = function(f40) {
    return t19 = Array.from(f40), n33 = Bn6, h26();
  }, d34.clamp = function(f40) {
    return arguments.length ? (a22 = f40 ? true : le6, h26()) : a22 !== le6;
  }, d34.interpolate = function(f40) {
    return arguments.length ? (n33 = f40, h26()) : n33;
  }, d34.unknown = function(f40) {
    return arguments.length ? (o13 = f40, d34) : o13;
  }, function(f40, m34) {
    return r24 = f40, i27 = m34, h26();
  };
}
function It6() {
  return ar6()(le6, le6);
}
function sr6(e11, t19, n33, r24) {
  var i27 = Ke6(e11, t19, n33), o13;
  switch (r24 = Ye6(r24 ?? ",f"), r24.type) {
    case "s": {
      var a22 = Math.max(Math.abs(e11), Math.abs(t19));
      return r24.precision == null && !isNaN(o13 = Kn6(i27, a22)) && (r24.precision = o13), Et8(r24, a22);
    }
    case "":
    case "e":
    case "g":
    case "p":
    case "r": {
      r24.precision == null && !isNaN(o13 = er6(i27, Math.max(Math.abs(e11), Math.abs(t19)))) && (r24.precision = o13 - (r24.type === "e"));
      break;
    }
    case "f":
    case "%": {
      r24.precision == null && !isNaN(o13 = Rn6(i27)) && (r24.precision = o13 - (r24.type === "%") * 2);
      break;
    }
  }
  return Ot9(r24);
}
function ur6(e11) {
  var t19 = e11.domain;
  return e11.ticks = function(n33) {
    var r24 = t19();
    return Fn6(r24[0], r24[r24.length - 1], n33 ?? 10);
  }, e11.tickFormat = function(n33, r24) {
    var i27 = t19();
    return sr6(i27[0], i27[i27.length - 1], n33 ?? 10, r24);
  }, e11.nice = function(n33) {
    n33 == null && (n33 = 10);
    var r24 = t19(), i27 = 0, o13 = r24.length - 1, a22 = r24[i27], u35 = r24[o13], l26, s18, h26 = 10;
    for (u35 < a22 && (s18 = a22, a22 = u35, u35 = s18, s18 = i27, i27 = o13, o13 = s18); h26-- > 0; ) {
      if (s18 = Re6(a22, u35, n33), s18 === l26)
        return r24[i27] = a22, r24[o13] = u35, t19(r24);
      if (s18 > 0)
        a22 = Math.floor(a22 / s18) * s18, u35 = Math.ceil(u35 / s18) * s18;
      else if (s18 < 0)
        a22 = Math.ceil(a22 * s18) / s18, u35 = Math.floor(u35 * s18) / s18;
      else
        break;
      l26 = s18;
    }
    return e11;
  }, e11;
}
function Zt7() {
  var e11 = It6();
  return e11.copy = function() {
    return Bt7(e11, Zt7());
  }, at10.apply(e11, arguments), ur6(e11);
}
function cr6(e11, t19) {
  e11 = e11.slice();
  var n33 = 0, r24 = e11.length - 1, i27 = e11[n33], o13 = e11[r24], a22;
  return o13 < i27 && (a22 = n33, n33 = r24, r24 = a22, a22 = i27, i27 = o13, o13 = a22), e11[n33] = t19.floor(i27), e11[r24] = t19.ceil(o13), e11;
}
var Ze6 = /* @__PURE__ */ new Date();
var qe7 = /* @__PURE__ */ new Date();
function k22(e11, t19, n33, r24) {
  function i27(o13) {
    return e11(o13 = arguments.length === 0 ? /* @__PURE__ */ new Date() : /* @__PURE__ */ new Date(+o13)), o13;
  }
  return i27.floor = (o13) => (e11(o13 = /* @__PURE__ */ new Date(+o13)), o13), i27.ceil = (o13) => (e11(o13 = new Date(o13 - 1)), t19(o13, 1), e11(o13), o13), i27.round = (o13) => {
    const a22 = i27(o13), u35 = i27.ceil(o13);
    return o13 - a22 < u35 - o13 ? a22 : u35;
  }, i27.offset = (o13, a22) => (t19(o13 = /* @__PURE__ */ new Date(+o13), a22 == null ? 1 : Math.floor(a22)), o13), i27.range = (o13, a22, u35) => {
    const l26 = [];
    if (o13 = i27.ceil(o13), u35 = u35 == null ? 1 : Math.floor(u35), !(o13 < a22) || !(u35 > 0))
      return l26;
    let s18;
    do
      l26.push(s18 = /* @__PURE__ */ new Date(+o13)), t19(o13, u35), e11(o13);
    while (s18 < o13 && o13 < a22);
    return l26;
  }, i27.filter = (o13) => k22((a22) => {
    if (a22 >= a22)
      for (; e11(a22), !o13(a22); )
        a22.setTime(a22 - 1);
  }, (a22, u35) => {
    if (a22 >= a22)
      if (u35 < 0)
        for (; ++u35 <= 0; )
          for (; t19(a22, -1), !o13(a22); )
            ;
      else
        for (; --u35 >= 0; )
          for (; t19(a22, 1), !o13(a22); )
            ;
  }), n33 && (i27.count = (o13, a22) => (Ze6.setTime(+o13), qe7.setTime(+a22), e11(Ze6), e11(qe7), Math.floor(n33(Ze6, qe7))), i27.every = (o13) => (o13 = Math.floor(o13), !isFinite(o13) || !(o13 > 0) ? null : o13 > 1 ? i27.filter(r24 ? (a22) => r24(a22) % o13 === 0 : (a22) => i27.count(0, a22) % o13 === 0) : i27)), i27;
}
var _e6 = k22(() => {
}, (e11, t19) => {
  e11.setTime(+e11 + t19);
}, (e11, t19) => t19 - e11);
_e6.every = (e11) => (e11 = Math.floor(e11), !isFinite(e11) || !(e11 > 0) ? null : e11 > 1 ? k22((t19) => {
  t19.setTime(Math.floor(t19 / e11) * e11);
}, (t19, n33) => {
  t19.setTime(+t19 + n33 * e11);
}, (t19, n33) => (n33 - t19) / e11) : _e6);
_e6.range;
var I15 = 1e3;
var P16 = I15 * 60;
var Z10 = P16 * 60;
var q12 = Z10 * 24;
var st13 = q12 * 7;
var $t8 = q12 * 30;
var Ge6 = q12 * 365;
var fe6 = k22((e11) => {
  e11.setTime(e11 - e11.getMilliseconds());
}, (e11, t19) => {
  e11.setTime(+e11 + t19 * I15);
}, (e11, t19) => (t19 - e11) / I15, (e11) => e11.getUTCSeconds());
fe6.range;
var ut11 = k22((e11) => {
  e11.setTime(e11 - e11.getMilliseconds() - e11.getSeconds() * I15);
}, (e11, t19) => {
  e11.setTime(+e11 + t19 * P16);
}, (e11, t19) => (t19 - e11) / P16, (e11) => e11.getMinutes());
ut11.range;
var lr6 = k22((e11) => {
  e11.setUTCSeconds(0, 0);
}, (e11, t19) => {
  e11.setTime(+e11 + t19 * P16);
}, (e11, t19) => (t19 - e11) / P16, (e11) => e11.getUTCMinutes());
lr6.range;
var ct11 = k22((e11) => {
  e11.setTime(e11 - e11.getMilliseconds() - e11.getSeconds() * I15 - e11.getMinutes() * P16);
}, (e11, t19) => {
  e11.setTime(+e11 + t19 * Z10);
}, (e11, t19) => (t19 - e11) / Z10, (e11) => e11.getHours());
ct11.range;
var fr6 = k22((e11) => {
  e11.setUTCMinutes(0, 0, 0);
}, (e11, t19) => {
  e11.setTime(+e11 + t19 * Z10);
}, (e11, t19) => (t19 - e11) / Z10, (e11) => e11.getUTCHours());
fr6.range;
var Ce6 = k22(
  (e11) => e11.setHours(0, 0, 0, 0),
  (e11, t19) => e11.setDate(e11.getDate() + t19),
  (e11, t19) => (t19 - e11 - (t19.getTimezoneOffset() - e11.getTimezoneOffset()) * P16) / q12,
  (e11) => e11.getDate() - 1
);
Ce6.range;
var lt12 = k22((e11) => {
  e11.setUTCHours(0, 0, 0, 0);
}, (e11, t19) => {
  e11.setUTCDate(e11.getUTCDate() + t19);
}, (e11, t19) => (t19 - e11) / q12, (e11) => e11.getUTCDate() - 1);
lt12.range;
var hr6 = k22((e11) => {
  e11.setUTCHours(0, 0, 0, 0);
}, (e11, t19) => {
  e11.setUTCDate(e11.getUTCDate() + t19);
}, (e11, t19) => (t19 - e11) / q12, (e11) => Math.floor(e11 / q12));
hr6.range;
function te6(e11) {
  return k22((t19) => {
    t19.setDate(t19.getDate() - (t19.getDay() + 7 - e11) % 7), t19.setHours(0, 0, 0, 0);
  }, (t19, n33) => {
    t19.setDate(t19.getDate() + n33 * 7);
  }, (t19, n33) => (n33 - t19 - (n33.getTimezoneOffset() - t19.getTimezoneOffset()) * P16) / st13);
}
var Ve7 = te6(0);
var Le6 = te6(1);
var gr6 = te6(2);
var dr6 = te6(3);
var ge6 = te6(4);
var mr5 = te6(5);
var pr5 = te6(6);
Ve7.range;
Le6.range;
gr6.range;
dr6.range;
ge6.range;
mr5.range;
pr5.range;
function ne7(e11) {
  return k22((t19) => {
    t19.setUTCDate(t19.getUTCDate() - (t19.getUTCDay() + 7 - e11) % 7), t19.setUTCHours(0, 0, 0, 0);
  }, (t19, n33) => {
    t19.setUTCDate(t19.getUTCDate() + n33 * 7);
  }, (t19, n33) => (n33 - t19) / st13);
}
var qt6 = ne7(0);
var He7 = ne7(1);
var vr6 = ne7(2);
var yr5 = ne7(3);
var de8 = ne7(4);
var Mr6 = ne7(5);
var xr5 = ne7(6);
qt6.range;
He7.range;
vr6.range;
yr5.range;
de8.range;
Mr6.range;
xr5.range;
var ft14 = k22((e11) => {
  e11.setDate(1), e11.setHours(0, 0, 0, 0);
}, (e11, t19) => {
  e11.setMonth(e11.getMonth() + t19);
}, (e11, t19) => t19.getMonth() - e11.getMonth() + (t19.getFullYear() - e11.getFullYear()) * 12, (e11) => e11.getMonth());
ft14.range;
var wr6 = k22((e11) => {
  e11.setUTCDate(1), e11.setUTCHours(0, 0, 0, 0);
}, (e11, t19) => {
  e11.setUTCMonth(e11.getUTCMonth() + t19);
}, (e11, t19) => t19.getUTCMonth() - e11.getUTCMonth() + (t19.getUTCFullYear() - e11.getUTCFullYear()) * 12, (e11) => e11.getUTCMonth());
wr6.range;
var G15 = k22((e11) => {
  e11.setMonth(0, 1), e11.setHours(0, 0, 0, 0);
}, (e11, t19) => {
  e11.setFullYear(e11.getFullYear() + t19);
}, (e11, t19) => t19.getFullYear() - e11.getFullYear(), (e11) => e11.getFullYear());
G15.every = (e11) => !isFinite(e11 = Math.floor(e11)) || !(e11 > 0) ? null : k22((t19) => {
  t19.setFullYear(Math.floor(t19.getFullYear() / e11) * e11), t19.setMonth(0, 1), t19.setHours(0, 0, 0, 0);
}, (t19, n33) => {
  t19.setFullYear(t19.getFullYear() + n33 * e11);
});
G15.range;
var ee6 = k22((e11) => {
  e11.setUTCMonth(0, 1), e11.setUTCHours(0, 0, 0, 0);
}, (e11, t19) => {
  e11.setUTCFullYear(e11.getUTCFullYear() + t19);
}, (e11, t19) => t19.getUTCFullYear() - e11.getUTCFullYear(), (e11) => e11.getUTCFullYear());
ee6.every = (e11) => !isFinite(e11 = Math.floor(e11)) || !(e11 > 0) ? null : k22((t19) => {
  t19.setUTCFullYear(Math.floor(t19.getUTCFullYear() / e11) * e11), t19.setUTCMonth(0, 1), t19.setUTCHours(0, 0, 0, 0);
}, (t19, n33) => {
  t19.setUTCFullYear(t19.getUTCFullYear() + n33 * e11);
});
ee6.range;
function Tr6(e11, t19, n33, r24, i27, o13) {
  const a22 = [
    [fe6, 1, I15],
    [fe6, 5, 5 * I15],
    [fe6, 15, 15 * I15],
    [fe6, 30, 30 * I15],
    [o13, 1, P16],
    [o13, 5, 5 * P16],
    [o13, 15, 15 * P16],
    [o13, 30, 30 * P16],
    [i27, 1, Z10],
    [i27, 3, 3 * Z10],
    [i27, 6, 6 * Z10],
    [i27, 12, 12 * Z10],
    [r24, 1, q12],
    [r24, 2, 2 * q12],
    [n33, 1, st13],
    [t19, 1, $t8],
    [t19, 3, 3 * $t8],
    [e11, 1, Ge6]
  ];
  function u35(s18, h26, d34) {
    const f40 = h26 < s18;
    f40 && ([s18, h26] = [h26, s18]);
    const m34 = d34 && typeof d34.range == "function" ? d34 : l26(s18, h26, d34), A18 = m34 ? m34.range(s18, +h26 + 1) : [];
    return f40 ? A18.reverse() : A18;
  }
  function l26(s18, h26, d34) {
    const f40 = Math.abs(h26 - s18) / d34, m34 = nt16(([, , S23]) => S23).right(a22, f40);
    if (m34 === a22.length)
      return e11.every(Ke6(s18 / Ge6, h26 / Ge6, d34));
    if (m34 === 0)
      return _e6.every(Math.max(Ke6(s18, h26, d34), 1));
    const [A18, _21] = a22[f40 / a22[m34 - 1][2] < a22[m34][2] / f40 ? m34 - 1 : m34];
    return A18.every(_21);
  }
  return [u35, l26];
}
var [Cr6, br6] = Tr6(G15, ft14, Ve7, Ce6, ct11, ut11);
function We8(e11) {
  if (0 <= e11.y && e11.y < 100) {
    var t19 = new Date(-1, e11.m, e11.d, e11.H, e11.M, e11.S, e11.L);
    return t19.setFullYear(e11.y), t19;
  }
  return new Date(e11.y, e11.m, e11.d, e11.H, e11.M, e11.S, e11.L);
}
function Xe6(e11) {
  if (0 <= e11.y && e11.y < 100) {
    var t19 = new Date(Date.UTC(-1, e11.m, e11.d, e11.H, e11.M, e11.S, e11.L));
    return t19.setUTCFullYear(e11.y), t19;
  }
  return new Date(Date.UTC(e11.y, e11.m, e11.d, e11.H, e11.M, e11.S, e11.L));
}
function pe7(e11, t19, n33) {
  return { y: e11, m: t19, d: n33, H: 0, M: 0, S: 0, L: 0 };
}
function Ar6(e11) {
  var t19 = e11.dateTime, n33 = e11.date, r24 = e11.time, i27 = e11.periods, o13 = e11.days, a22 = e11.shortDays, u35 = e11.months, l26 = e11.shortMonths, s18 = ve8(i27), h26 = ye6(i27), d34 = ve8(o13), f40 = ye6(o13), m34 = ve8(a22), A18 = ye6(a22), _21 = ve8(u35), S23 = ye6(u35), L12 = ve8(l26), j19 = ye6(l26), C21 = {
    a: ae7,
    A: se6,
    b: E25,
    B: tn5,
    c: null,
    d: Yt7,
    e: Yt7,
    f: Wr6,
    g: ii7,
    G: ai6,
    H: Zr6,
    I: qr6,
    j: Gr6,
    L: Gt7,
    m: Xr6,
    M: Qr6,
    p: nn4,
    q: rn5,
    Q: Ht8,
    s: zt7,
    S: Jr6,
    u: Rr6,
    U: Kr6,
    V: ei7,
    w: ti7,
    W: ni7,
    x: null,
    X: null,
    y: ri7,
    Y: oi6,
    Z: si7,
    "%": Lt6
  }, N22 = {
    a: on5,
    A: an5,
    b: sn5,
    B: un5,
    c: null,
    d: _t9,
    e: _t9,
    f: fi6,
    g: wi7,
    G: Ci4,
    H: ui7,
    I: ci7,
    j: li7,
    L: Xt7,
    m: hi7,
    M: gi7,
    p: cn3,
    q: ln5,
    Q: Ht8,
    s: zt7,
    S: di7,
    u: mi7,
    U: pi7,
    V: vi7,
    w: yi7,
    W: Mi4,
    x: null,
    X: null,
    y: xi7,
    Y: Ti5,
    Z: bi7,
    "%": Lt6
  }, b35 = {
    a: V16,
    A: v31,
    b: U20,
    B: D18,
    c: X14,
    d: Nt8,
    e: Nt8,
    f: Er5,
    g: Ft7,
    G: Ut8,
    H: St8,
    I: St8,
    j: zr5,
    L: Or5,
    m: Hr6,
    M: jr6,
    p: W11,
    q: Lr6,
    Q: Br6,
    s: Ir5,
    S: Pr6,
    u: Fr6,
    U: Nr6,
    V: Sr6,
    w: Ur5,
    W: Yr6,
    x: Ae6,
    X: oe7,
    y: Ft7,
    Y: Ut8,
    Z: _r5,
    "%": Vr6
  };
  C21.x = p26(n33, C21), C21.X = p26(r24, C21), C21.c = p26(t19, C21), N22.x = p26(n33, N22), N22.X = p26(r24, N22), N22.c = p26(t19, N22);
  function p26(g32, y34) {
    return function(M13) {
      var c27 = [], Y13 = -1, T21 = 0, H16 = g32.length, z21, R22, ht16;
      for (M13 instanceof Date || (M13 = /* @__PURE__ */ new Date(+M13)); ++Y13 < H16; )
        g32.charCodeAt(Y13) === 37 && (c27.push(g32.slice(T21, Y13)), (R22 = kt9[z21 = g32.charAt(++Y13)]) != null ? z21 = g32.charAt(++Y13) : R22 = z21 === "e" ? " " : "0", (ht16 = y34[z21]) && (z21 = ht16(M13, R22)), c27.push(z21), T21 = Y13 + 1);
      return c27.push(g32.slice(T21, Y13)), c27.join("");
    };
  }
  function w31(g32, y34) {
    return function(M13) {
      var c27 = pe7(1900, void 0, 1), Y13 = O20(c27, g32, M13 += "", 0), T21, H16;
      if (Y13 != M13.length)
        return null;
      if ("Q" in c27)
        return new Date(c27.Q);
      if ("s" in c27)
        return new Date(c27.s * 1e3 + ("L" in c27 ? c27.L : 0));
      if (y34 && !("Z" in c27) && (c27.Z = 0), "p" in c27 && (c27.H = c27.H % 12 + c27.p * 12), c27.m === void 0 && (c27.m = "q" in c27 ? c27.q : 0), "V" in c27) {
        if (c27.V < 1 || c27.V > 53)
          return null;
        "w" in c27 || (c27.w = 1), "Z" in c27 ? (T21 = Xe6(pe7(c27.y, 0, 1)), H16 = T21.getUTCDay(), T21 = H16 > 4 || H16 === 0 ? He7.ceil(T21) : He7(T21), T21 = lt12.offset(T21, (c27.V - 1) * 7), c27.y = T21.getUTCFullYear(), c27.m = T21.getUTCMonth(), c27.d = T21.getUTCDate() + (c27.w + 6) % 7) : (T21 = We8(pe7(c27.y, 0, 1)), H16 = T21.getDay(), T21 = H16 > 4 || H16 === 0 ? Le6.ceil(T21) : Le6(T21), T21 = Ce6.offset(T21, (c27.V - 1) * 7), c27.y = T21.getFullYear(), c27.m = T21.getMonth(), c27.d = T21.getDate() + (c27.w + 6) % 7);
      } else
        ("W" in c27 || "U" in c27) && ("w" in c27 || (c27.w = "u" in c27 ? c27.u % 7 : "W" in c27 ? 1 : 0), H16 = "Z" in c27 ? Xe6(pe7(c27.y, 0, 1)).getUTCDay() : We8(pe7(c27.y, 0, 1)).getDay(), c27.m = 0, c27.d = "W" in c27 ? (c27.w + 6) % 7 + c27.W * 7 - (H16 + 5) % 7 : c27.w + c27.U * 7 - (H16 + 6) % 7);
      return "Z" in c27 ? (c27.H += c27.Z / 100 | 0, c27.M += c27.Z % 100, Xe6(c27)) : We8(c27);
    };
  }
  function O20(g32, y34, M13, c27) {
    for (var Y13 = 0, T21 = y34.length, H16 = M13.length, z21, R22; Y13 < T21; ) {
      if (c27 >= H16)
        return -1;
      if (z21 = y34.charCodeAt(Y13++), z21 === 37) {
        if (z21 = y34.charAt(Y13++), R22 = b35[z21 in kt9 ? y34.charAt(Y13++) : z21], !R22 || (c27 = R22(g32, M13, c27)) < 0)
          return -1;
      } else if (z21 != M13.charCodeAt(c27++))
        return -1;
    }
    return c27;
  }
  function W11(g32, y34, M13) {
    var c27 = s18.exec(y34.slice(M13));
    return c27 ? (g32.p = h26.get(c27[0].toLowerCase()), M13 + c27[0].length) : -1;
  }
  function V16(g32, y34, M13) {
    var c27 = m34.exec(y34.slice(M13));
    return c27 ? (g32.w = A18.get(c27[0].toLowerCase()), M13 + c27[0].length) : -1;
  }
  function v31(g32, y34, M13) {
    var c27 = d34.exec(y34.slice(M13));
    return c27 ? (g32.w = f40.get(c27[0].toLowerCase()), M13 + c27[0].length) : -1;
  }
  function U20(g32, y34, M13) {
    var c27 = L12.exec(y34.slice(M13));
    return c27 ? (g32.m = j19.get(c27[0].toLowerCase()), M13 + c27[0].length) : -1;
  }
  function D18(g32, y34, M13) {
    var c27 = _21.exec(y34.slice(M13));
    return c27 ? (g32.m = S23.get(c27[0].toLowerCase()), M13 + c27[0].length) : -1;
  }
  function X14(g32, y34, M13) {
    return O20(g32, t19, y34, M13);
  }
  function Ae6(g32, y34, M13) {
    return O20(g32, n33, y34, M13);
  }
  function oe7(g32, y34, M13) {
    return O20(g32, r24, y34, M13);
  }
  function ae7(g32) {
    return a22[g32.getDay()];
  }
  function se6(g32) {
    return o13[g32.getDay()];
  }
  function E25(g32) {
    return l26[g32.getMonth()];
  }
  function tn5(g32) {
    return u35[g32.getMonth()];
  }
  function nn4(g32) {
    return i27[+(g32.getHours() >= 12)];
  }
  function rn5(g32) {
    return 1 + ~~(g32.getMonth() / 3);
  }
  function on5(g32) {
    return a22[g32.getUTCDay()];
  }
  function an5(g32) {
    return o13[g32.getUTCDay()];
  }
  function sn5(g32) {
    return l26[g32.getUTCMonth()];
  }
  function un5(g32) {
    return u35[g32.getUTCMonth()];
  }
  function cn3(g32) {
    return i27[+(g32.getUTCHours() >= 12)];
  }
  function ln5(g32) {
    return 1 + ~~(g32.getUTCMonth() / 3);
  }
  return {
    format: function(g32) {
      var y34 = p26(g32 += "", C21);
      return y34.toString = function() {
        return g32;
      }, y34;
    },
    parse: function(g32) {
      var y34 = w31(g32 += "", false);
      return y34.toString = function() {
        return g32;
      }, y34;
    },
    utcFormat: function(g32) {
      var y34 = p26(g32 += "", N22);
      return y34.toString = function() {
        return g32;
      }, y34;
    },
    utcParse: function(g32) {
      var y34 = w31(g32 += "", true);
      return y34.toString = function() {
        return g32;
      }, y34;
    }
  };
}
var kt9 = { "-": "", _: " ", 0: "0" };
var F16 = /^\s*\d+/;
var Dr5 = /^%/;
var $r6 = /[\\^$*+?|[\]().{}]/g;
function x26(e11, t19, n33) {
  var r24 = e11 < 0 ? "-" : "", i27 = (r24 ? -e11 : e11) + "", o13 = i27.length;
  return r24 + (o13 < n33 ? new Array(n33 - o13 + 1).join(t19) + i27 : i27);
}
function kr5(e11) {
  return e11.replace($r6, "\\$&");
}
function ve8(e11) {
  return new RegExp("^(?:" + e11.map(kr5).join("|") + ")", "i");
}
function ye6(e11) {
  return new Map(e11.map((t19, n33) => [t19.toLowerCase(), n33]));
}
function Ur5(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 1));
  return r24 ? (e11.w = +r24[0], n33 + r24[0].length) : -1;
}
function Fr6(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 1));
  return r24 ? (e11.u = +r24[0], n33 + r24[0].length) : -1;
}
function Nr6(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.U = +r24[0], n33 + r24[0].length) : -1;
}
function Sr6(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.V = +r24[0], n33 + r24[0].length) : -1;
}
function Yr6(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.W = +r24[0], n33 + r24[0].length) : -1;
}
function Ut8(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 4));
  return r24 ? (e11.y = +r24[0], n33 + r24[0].length) : -1;
}
function Ft7(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.y = +r24[0] + (+r24[0] > 68 ? 1900 : 2e3), n33 + r24[0].length) : -1;
}
function _r5(e11, t19, n33) {
  var r24 = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t19.slice(n33, n33 + 6));
  return r24 ? (e11.Z = r24[1] ? 0 : -(r24[2] + (r24[3] || "00")), n33 + r24[0].length) : -1;
}
function Lr6(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 1));
  return r24 ? (e11.q = r24[0] * 3 - 3, n33 + r24[0].length) : -1;
}
function Hr6(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.m = r24[0] - 1, n33 + r24[0].length) : -1;
}
function Nt8(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.d = +r24[0], n33 + r24[0].length) : -1;
}
function zr5(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 3));
  return r24 ? (e11.m = 0, e11.d = +r24[0], n33 + r24[0].length) : -1;
}
function St8(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.H = +r24[0], n33 + r24[0].length) : -1;
}
function jr6(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.M = +r24[0], n33 + r24[0].length) : -1;
}
function Pr6(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 2));
  return r24 ? (e11.S = +r24[0], n33 + r24[0].length) : -1;
}
function Or5(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 3));
  return r24 ? (e11.L = +r24[0], n33 + r24[0].length) : -1;
}
function Er5(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33, n33 + 6));
  return r24 ? (e11.L = Math.floor(r24[0] / 1e3), n33 + r24[0].length) : -1;
}
function Vr6(e11, t19, n33) {
  var r24 = Dr5.exec(t19.slice(n33, n33 + 1));
  return r24 ? n33 + r24[0].length : -1;
}
function Br6(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33));
  return r24 ? (e11.Q = +r24[0], n33 + r24[0].length) : -1;
}
function Ir5(e11, t19, n33) {
  var r24 = F16.exec(t19.slice(n33));
  return r24 ? (e11.s = +r24[0], n33 + r24[0].length) : -1;
}
function Yt7(e11, t19) {
  return x26(e11.getDate(), t19, 2);
}
function Zr6(e11, t19) {
  return x26(e11.getHours(), t19, 2);
}
function qr6(e11, t19) {
  return x26(e11.getHours() % 12 || 12, t19, 2);
}
function Gr6(e11, t19) {
  return x26(1 + Ce6.count(G15(e11), e11), t19, 3);
}
function Gt7(e11, t19) {
  return x26(e11.getMilliseconds(), t19, 3);
}
function Wr6(e11, t19) {
  return Gt7(e11, t19) + "000";
}
function Xr6(e11, t19) {
  return x26(e11.getMonth() + 1, t19, 2);
}
function Qr6(e11, t19) {
  return x26(e11.getMinutes(), t19, 2);
}
function Jr6(e11, t19) {
  return x26(e11.getSeconds(), t19, 2);
}
function Rr6(e11) {
  var t19 = e11.getDay();
  return t19 === 0 ? 7 : t19;
}
function Kr6(e11, t19) {
  return x26(Ve7.count(G15(e11) - 1, e11), t19, 2);
}
function Wt8(e11) {
  var t19 = e11.getDay();
  return t19 >= 4 || t19 === 0 ? ge6(e11) : ge6.ceil(e11);
}
function ei7(e11, t19) {
  return e11 = Wt8(e11), x26(ge6.count(G15(e11), e11) + (G15(e11).getDay() === 4), t19, 2);
}
function ti7(e11) {
  return e11.getDay();
}
function ni7(e11, t19) {
  return x26(Le6.count(G15(e11) - 1, e11), t19, 2);
}
function ri7(e11, t19) {
  return x26(e11.getFullYear() % 100, t19, 2);
}
function ii7(e11, t19) {
  return e11 = Wt8(e11), x26(e11.getFullYear() % 100, t19, 2);
}
function oi6(e11, t19) {
  return x26(e11.getFullYear() % 1e4, t19, 4);
}
function ai6(e11, t19) {
  var n33 = e11.getDay();
  return e11 = n33 >= 4 || n33 === 0 ? ge6(e11) : ge6.ceil(e11), x26(e11.getFullYear() % 1e4, t19, 4);
}
function si7(e11) {
  var t19 = e11.getTimezoneOffset();
  return (t19 > 0 ? "-" : (t19 *= -1, "+")) + x26(t19 / 60 | 0, "0", 2) + x26(t19 % 60, "0", 2);
}
function _t9(e11, t19) {
  return x26(e11.getUTCDate(), t19, 2);
}
function ui7(e11, t19) {
  return x26(e11.getUTCHours(), t19, 2);
}
function ci7(e11, t19) {
  return x26(e11.getUTCHours() % 12 || 12, t19, 2);
}
function li7(e11, t19) {
  return x26(1 + lt12.count(ee6(e11), e11), t19, 3);
}
function Xt7(e11, t19) {
  return x26(e11.getUTCMilliseconds(), t19, 3);
}
function fi6(e11, t19) {
  return Xt7(e11, t19) + "000";
}
function hi7(e11, t19) {
  return x26(e11.getUTCMonth() + 1, t19, 2);
}
function gi7(e11, t19) {
  return x26(e11.getUTCMinutes(), t19, 2);
}
function di7(e11, t19) {
  return x26(e11.getUTCSeconds(), t19, 2);
}
function mi7(e11) {
  var t19 = e11.getUTCDay();
  return t19 === 0 ? 7 : t19;
}
function pi7(e11, t19) {
  return x26(qt6.count(ee6(e11) - 1, e11), t19, 2);
}
function Qt6(e11) {
  var t19 = e11.getUTCDay();
  return t19 >= 4 || t19 === 0 ? de8(e11) : de8.ceil(e11);
}
function vi7(e11, t19) {
  return e11 = Qt6(e11), x26(de8.count(ee6(e11), e11) + (ee6(e11).getUTCDay() === 4), t19, 2);
}
function yi7(e11) {
  return e11.getUTCDay();
}
function Mi4(e11, t19) {
  return x26(He7.count(ee6(e11) - 1, e11), t19, 2);
}
function xi7(e11, t19) {
  return x26(e11.getUTCFullYear() % 100, t19, 2);
}
function wi7(e11, t19) {
  return e11 = Qt6(e11), x26(e11.getUTCFullYear() % 100, t19, 2);
}
function Ti5(e11, t19) {
  return x26(e11.getUTCFullYear() % 1e4, t19, 4);
}
function Ci4(e11, t19) {
  var n33 = e11.getUTCDay();
  return e11 = n33 >= 4 || n33 === 0 ? de8(e11) : de8.ceil(e11), x26(e11.getUTCFullYear() % 1e4, t19, 4);
}
function bi7() {
  return "+0000";
}
function Lt6() {
  return "%";
}
function Ht8(e11) {
  return +e11;
}
function zt7(e11) {
  return Math.floor(+e11 / 1e3);
}
var ue7;
var Jt6;
Ai7({
  dateTime: "%x, %X",
  date: "%-m/%-d/%Y",
  time: "%-I:%M:%S %p",
  periods: ["AM", "PM"],
  days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
  shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
  months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
  shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
});
function Ai7(e11) {
  return ue7 = Ar6(e11), Jt6 = ue7.format, ue7.parse, ue7.utcFormat, ue7.utcParse, ue7;
}
function Di4(e11) {
  return new Date(e11);
}
function $i7(e11) {
  return e11 instanceof Date ? +e11 : +/* @__PURE__ */ new Date(+e11);
}
function Rt9(e11, t19, n33, r24, i27, o13, a22, u35, l26, s18) {
  var h26 = It6(), d34 = h26.invert, f40 = h26.domain, m34 = s18(".%L"), A18 = s18(":%S"), _21 = s18("%I:%M"), S23 = s18("%I %p"), L12 = s18("%a %d"), j19 = s18("%b %d"), C21 = s18("%B"), N22 = s18("%Y");
  function b35(p26) {
    return (l26(p26) < p26 ? m34 : u35(p26) < p26 ? A18 : a22(p26) < p26 ? _21 : o13(p26) < p26 ? S23 : r24(p26) < p26 ? i27(p26) < p26 ? L12 : j19 : n33(p26) < p26 ? C21 : N22)(p26);
  }
  return h26.invert = function(p26) {
    return new Date(d34(p26));
  }, h26.domain = function(p26) {
    return arguments.length ? f40(Array.from(p26, $i7)) : f40().map(Di4);
  }, h26.ticks = function(p26) {
    var w31 = f40();
    return e11(w31[0], w31[w31.length - 1], p26 ?? 10);
  }, h26.tickFormat = function(p26, w31) {
    return w31 == null ? b35 : s18(w31);
  }, h26.nice = function(p26) {
    var w31 = f40();
    return (!p26 || typeof p26.range != "function") && (p26 = t19(w31[0], w31[w31.length - 1], p26 ?? 10)), p26 ? f40(cr6(w31, p26)) : h26;
  }, h26.copy = function() {
    return Bt7(h26, Rt9(e11, t19, n33, r24, i27, o13, a22, u35, l26, s18));
  }, h26;
}
function ki7() {
  return at10.apply(Rt9(Cr6, br6, G15, ft14, Ve7, Ce6, ct11, ut11, fe6, Jt6).domain([new Date(2e3, 0, 1), new Date(2e3, 0, 2)]), arguments);
}
function Ui5(e11) {
  for (var t19 = e11.length / 6 | 0, n33 = new Array(t19), r24 = 0; r24 < t19; )
    n33[r24] = "#" + e11.slice(r24 * 6, ++r24 * 6);
  return n33;
}
var Fi5 = Ui5("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3");
var we7 = (e11, t19) => {
  var n33;
  const r24 = e11._$AN;
  if (r24 === void 0)
    return false;
  for (const i27 of r24)
    (n33 = i27._$AO) == null || n33.call(i27, t19, false), we7(i27, t19);
  return true;
};
var ze8 = (e11) => {
  let t19, n33;
  do {
    if ((t19 = e11._$AM) === void 0)
      break;
    n33 = t19._$AN, n33.delete(e11), e11 = t19;
  } while ((n33 == null ? void 0 : n33.size) === 0);
};
var Kt6 = (e11) => {
  for (let t19; t19 = e11._$AM; e11 = t19) {
    let n33 = t19._$AN;
    if (n33 === void 0)
      t19._$AN = n33 = /* @__PURE__ */ new Set();
    else if (n33.has(e11))
      break;
    n33.add(e11), Yi5(t19);
  }
};
function Ni7(e11) {
  this._$AN !== void 0 ? (ze8(this), this._$AM = e11, Kt6(this)) : this._$AM = e11;
}
function Si5(e11, t19 = false, n33 = 0) {
  const r24 = this._$AH, i27 = this._$AN;
  if (i27 !== void 0 && i27.size !== 0)
    if (t19)
      if (Array.isArray(r24))
        for (let o13 = n33; o13 < r24.length; o13++)
          we7(r24[o13], false), ze8(r24[o13]);
      else
        r24 != null && (we7(r24, false), ze8(r24));
    else
      we7(this, e11);
}
var Yi5 = (e11) => {
  e11.type == T15.CHILD && (e11._$AP ?? (e11._$AP = Si5), e11._$AQ ?? (e11._$AQ = Ni7));
};
var _i7 = class extends i15 {
  constructor() {
    super(...arguments), this._$AN = void 0;
  }
  _$AT(t19, n33, r24) {
    super._$AT(t19, n33, r24), Kt6(this), this.isConnected = t19._$AU;
  }
  _$AO(t19, n33 = true) {
    var r24, i27;
    t19 !== this.isConnected && (this.isConnected = t19, t19 ? (r24 = this.reconnected) == null || r24.call(this) : (i27 = this.disconnected) == null || i27.call(this)), n33 && (we7(this, t19), ze8(this));
  }
  setValue(t19) {
    if (s12(this._$Ct))
      this._$Ct._$AI(t19, this);
    else {
      const n33 = [...this._$Ct._$AH];
      n33[this._$Ci] = t19, this._$Ct._$AI(n33, this, 0);
    }
  }
  disconnected() {
  }
  reconnected() {
  }
};
var Qe7 = /* @__PURE__ */ new WeakMap();
var Te6 = _16(class extends _i7 {
  render(e11) {
    return p;
  }
  update(e11, [t19]) {
    var n33;
    const r24 = t19 !== this.Y;
    return r24 && this.Y !== void 0 && this.rt(void 0), (r24 || this.lt !== this.ct) && (this.Y = t19, this.ht = (n33 = e11.options) == null ? void 0 : n33.host, this.rt(this.ct = e11.element)), p;
  }
  rt(e11) {
    if (this.isConnected || (e11 = void 0), typeof this.Y == "function") {
      const t19 = this.ht ?? globalThis;
      let n33 = Qe7.get(t19);
      n33 === void 0 && (n33 = /* @__PURE__ */ new WeakMap(), Qe7.set(t19, n33)), n33.get(this.Y) !== void 0 && this.Y.call(this.ht, void 0), n33.set(this.Y, e11), e11 !== void 0 && this.Y.call(this.ht, e11);
    } else
      this.Y.value = e11;
  }
  get lt() {
    var e11, t19;
    return typeof this.Y == "function" ? (e11 = Qe7.get(this.ht ?? globalThis)) == null ? void 0 : e11.get(this.Y) : (t19 = this.Y) == null ? void 0 : t19.value;
  }
  disconnected() {
    this.lt === this.ct && this.rt(void 0);
  }
  reconnected() {
    this.rt(this.ct);
  }
});
function Li4(e11, t19, n33) {
  return ki7().domain([n33 - t19, n33]).range([0, e11]);
}
function Hi4(e11) {
  const t19 = jt9(e11).tickFormat((n33) => `${n33.getTime() / 1e3}`);
  return Nt`
    <g 
      class="axis axis--x" 
      ${Te6((n33) => {
    t19($i(n33));
  })}>
    </g> 
  `;
}
function zi5(e11, t19) {
  const n33 = jt9(e11).tickSize(-t19).tickFormat("");
  return Nt`
    <g 
      class="axis-x-grid" 
      ${Te6((r24) => {
    n33($i(r24));
  })}>
    </g> 
  `;
}
var ji2 = Object.defineProperty;
var be6 = (e11, t19, n33, r24) => {
  for (var i27 = void 0, o13 = e11.length - 1, a22; o13 >= 0; o13--)
    (a22 = e11[o13]) && (i27 = a22(t19, n33, i27) || i27);
  return i27 && ji2(t19, n33, i27), i27;
};
var re7 = class extends x {
  constructor() {
    super(...arguments), this.value = 0, this.color = "", this.hide = false, this.yAxis = 0, this.displayName = "";
  }
};
be6([
  Rt({ type: Number })
], re7.prototype, "value");
be6([
  Rt({ type: String })
], re7.prototype, "color");
be6([
  Rt({ type: Boolean })
], re7.prototype, "hide");
be6([
  Rt({ type: Number, attribute: "y-axis" })
], re7.prototype, "yAxis");
be6([
  Rt({ type: String, attribute: "display-name", reflect: true })
], re7.prototype, "displayName");
customElements.get("frc-line-chart-data") || customElements.define("frc-line-chart-data", re7);
var Pi5 = Object.defineProperty;
var ie7 = (e11, t19, n33, r24) => {
  for (var i27 = void 0, o13 = e11.length - 1, a22; o13 >= 0; o13--)
    (a22 = e11[o13]) && (i27 = a22(t19, n33, i27) || i27);
  return i27 && Pi5(t19, n33, i27), i27;
};
var Oi5 = Vt7().domain(
  Array(8).fill(0).map((e11, t19) => t19)
).range(Fi5);
var ce8;
var Q11 = (ce8 = class extends x {
  constructor() {
    super(...arguments), this.viewTime = 10, this.chartTitle = "", this.data = [], this.startTime = 0, this.elapsedTimeMs = 0;
  }
  firstUpdated() {
    this.startTime = Date.now(), requestAnimationFrame(() => {
      this.updateChart();
    });
  }
  getFilteredData(e11) {
    const t19 = e11.findIndex(
      ({ timeMs: n33 }) => this.elapsedTimeMs - n33 < Math.round(this.viewTime * 1e3)
    ) - 1;
    return t19 < 0 ? e11 : e11.slice(t19);
  }
  updateChart() {
    this.elapsedTimeMs = Date.now() - this.startTime;
    const e11 = [...this.children].filter(
      (t19) => t19.tagName.toLowerCase() === "frc-line-chart-data"
    );
    this.data = e11.map((t19, n33) => {
      var r24;
      const i27 = ((r24 = this.data[n33]) == null ? void 0 : r24.data) ?? [];
      return i27.push({
        value: t19.value ?? 0,
        timeMs: this.elapsedTimeMs
      }), {
        data: this.getFilteredData(i27),
        color: t19.color || Oi5(n33 % 8),
        hide: t19.hide ?? false,
        yAxis: t19.yAxis ?? 0,
        displayName: t19.displayName || `Data ${n33}`
      };
    }), requestAnimationFrame(() => {
      this.updateChart();
    });
  }
  static getYScale(e11, t19, n33) {
    const { invert: r24, lockMin: i27, lockMax: o13 } = n33;
    let { min: a22, max: u35 } = n33;
    (!i27 || !o13) && t19.forEach((s18) => {
      s18.data.forEach(({ value: h26 }) => {
        i27 || (a22 = Math.min(a22, h26)), o13 || (u35 = Math.max(u35, h26));
      });
    });
    const l26 = r24 ? [0, e11] : [e11, 0];
    return Zt7().domain([a22, u35]).range(l26);
  }
  getDimensions() {
    var e11;
    const t19 = { top: 0, right: 40, bottom: 20, left: 40 }, n33 = ((e11 = this.chartContainer) == null ? void 0 : e11.getBoundingClientRect()) ?? {
      width: 960,
      height: 500
    }, r24 = n33.width, i27 = n33.height, o13 = r24 - t19.left - t19.right, a22 = i27 - t19.top - t19.bottom;
    return {
      margin: t19,
      svgWidth: r24,
      svgHeight: i27,
      width: o13,
      height: a22
    };
  }
  getYScales() {
    const { height: e11 } = this.getDimensions(), t19 = [...this.children].filter(
      (n33) => n33.tagName.toLowerCase() === "frc-line-chart-axis"
    );
    if (t19.length === 0) {
      const n33 = {
        min: -1,
        max: 1,
        lockMin: false,
        lockMax: false,
        invert: false,
        side: "left",
        hideGridLines: false,
        hide: false
      };
      return [
        {
          chartAxis: n33,
          scale: ce8.getYScale(
            e11,
            this.data.filter(({ yAxis: r24 }) => r24 === 0),
            n33
          )
        }
      ];
    }
    return t19.map((n33, r24) => {
      const i27 = n33, o13 = {
        min: i27.min ?? -1,
        max: i27.max ?? 1,
        lockMin: i27.lockMin ?? false,
        lockMax: i27.lockMax ?? false,
        invert: i27.invert ?? false,
        side: i27.side ?? "left",
        hideGridLines: i27.hideGridLines ?? false,
        hide: i27.hide ?? false
      };
      return {
        chartAxis: o13,
        scale: ce8.getYScale(
          e11,
          this.data.filter(({ yAxis: a22 }) => a22 === r24),
          o13
        )
      };
    });
  }
  static getPath(e11, t19, n33) {
    return `M${e11.map(
      (r24) => [t19(r24).toFixed(3), n33(r24).toFixed(3)].join(",")
    ).join("L")}`;
  }
  getLegend() {
    const e11 = [...this.children].find(
      (n33) => n33.tagName.toLowerCase() === "frc-line-chart-legend"
    );
    if (!e11)
      return {
        direction: "horizontal",
        position: "n",
        inside: false,
        hide: false
      };
    const t19 = e11;
    return {
      direction: t19.direction ?? "horizontal",
      position: t19.position ?? "n",
      inside: t19.inside ?? false,
      hide: t19.hide ?? false
    };
  }
  render() {
    const { inside: e11, position: t19, direction: n33, hide: r24 } = this.getLegend(), i27 = t19 === "w" || t19 === "e" || ["ne", "nw", "se", "sw"].includes(t19) && n33 === "vertical", o13 = i27 && ["ne", "e", "se"].includes(t19) || !i27 && ["sw", "s", "se"].includes(t19), a22 = h20({
      display: e11 ? "block" : "flex",
      flexDirection: `${i27 ? "row" : "column"}${o13 ? "-reverse" : ""}`
    }), u35 = e11 ? {
      width: "100%",
      height: "100%"
    } : { flex: "1" };
    return Ht`
      <div class="chart-and-header">
        ${this.chartTitle ? Ht`<header>${this.chartTitle}</header>` : ""}
        <div class="chart-and-legend" style=${a22}>
          ${r24 ? "" : this.renderLegend()}
          <div class="chart-container" style=${h20(u35)}>
            ${this.renderChart()}
          </div>
        </div>
      </div>
    `;
  }
  renderLegend() {
    const { margin: e11 } = this.getDimensions(), { inside: t19, direction: n33, position: r24 } = this.getLegend(), i27 = ["n", "s", "e", "w"].includes(r24) ? "center" : r24 === "nw" ? "flex-start" : r24 === "se" ? "flex-end" : r24 === "ne" ? n33 === "horizontal" ? "flex-end" : "flex-start" : n33 === "vertical" ? "flex-end" : "flex-start", o13 = (() => {
      if (!t19)
        return {};
      const u35 = {
        alignItems: "center"
      };
      return r24.includes("n") ? u35.top = `${e11.top}px` : r24.includes("s") && (u35.bottom = `${e11.bottom}px`), r24.includes("w") ? u35.left = `${e11.left}px` : r24.includes("e") && (u35.right = `${e11.right}px`), ["n", "s", "e", "w"].includes(r24) && (u35.justifyContent = "center"), ["n", "s"].includes(r24) && (u35.left = "0", u35.right = "0"), ["e", "w"].includes(r24) && (u35.top = "0", u35.bottom = "0"), u35;
    })(), a22 = h20({
      alignSelf: i27,
      ...o13
    });
    return Ht`
      <div
        class="legend ${t19 ? "inside" : "outside"} ${n33 === "horizontal" ? "horizontal" : "vertical"}"
        style=${a22}
      >
        ${this.data.map(
      ({ color: u35, displayName: l26 }) => Ht`
            <div class="legend-item">
              <div
                class="legend-item-box"
                style=${h20({
        background: u35
      })}
              ></div>
              <span class="legend-item-label">${l26}</span>
            </div>
          `
    )}
      </div>
    `;
  }
  renderChart() {
    const { margin: e11, svgWidth: t19, svgHeight: n33, width: r24, height: i27 } = this.getDimensions(), o13 = Li4(
      r24,
      Math.round(this.viewTime * 1e3),
      this.elapsedTimeMs
    ), a22 = this.getYScales().filter(
      ({ chartAxis: l26 }) => !l26.hide
    ), u35 = a22.map((l26) => (s18) => ce8.getPath(
      s18,
      (h26) => o13(new Date(h26.timeMs)),
      (h26) => l26.scale(h26.value)
    ));
    return Nt`
      <svg width=${t19} height=${n33} style="position: absolute">
        <g transform="translate(${e11.left},${e11.top})">
          <defs>
            <clipPath id="clip">
              <rect width=${r24} height=${i27}></rect>
            </clipPath>
          </defs>
          <g transform="translate(0,${i27})">
            ${Hi4(o13)}
            ${zi5(o13, i27)}
          </g>
          ${this.renderScales(a22, "left")}
          ${this.renderScales(a22, "right")}
          <rect class="chart-border" width=${r24} height=${i27}></rect>
          ${this.data.filter(
      ({ hide: l26, yAxis: s18 }) => !l26 && s18 < a22.length && s18 >= 0
    ).map(
      (l26) => Nt`
            <g clip-path="url(#clip)">
              <path 
                class="data-path"
                ${Te6((s18) => {
        const h26 = $i(s18), d34 = u35[l26.yAxis](l26.data);
        h26.attr("class", "line").attr("stroke", l26.color).attr("d", d34);
      })}>
              ></path>
            </g>
          `
    )}
        </g>
      </svg>
    `;
  }
  renderScales(e11, t19) {
    const { width: n33 } = this.getDimensions();
    return Nt`
     ${e11.filter((r24) => r24.chartAxis.side === t19).map((r24, i27) => {
      const o13 = r24.chartAxis.side === "left" ? -i27 * 25 : n33;
      return Nt`
              <g 
                class="axis axis--y" 
                transform="translate(${o13}, 0)"
                ${Te6((a22) => {
        (r24.chartAxis.side === "left" ? Mt9 : zn6)(r24.scale)($i(a22));
      })}>
              </g>
              ${r24.chartAxis.hideGridLines ? "" : Nt`
                    <g 
                      class="axis-y-grid" 
                      ${Te6((a22) => {
        Mt9(r24.scale).tickSize(-n33).tickFormat("")($i(a22));
      })}>
                    </g> 
                  `}
            `;
    })}
    `;
  }
}, ce8.styles = Mt`
    :host {
      display: inline-block;
      width: 700px;
      height: 400px;
      color: var(--frc-line-chart-text-color, black);
    }

    .chart-and-header {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .chart-and-header header {
      font-size: 18px;
      font-family: sans-serif;
      margin: 3px 0;
    }

    .chart-and-legend {
      flex: 1;
      width: 100%;
      position: relative;
    }

    .legend-container {
      position: relative;
    }

    .legend {
      display: flex;
      z-index: 100;
    }

    .legend.outside {
      position: relative;
    }

    .legend.inside {
      position: absolute;
    }

    .legend-item {
      display: flex;
      flex-wrap: no-wrap;
      gap: 5px;
      align-items: center;
      padding: 5px;
    }

    .legend.horizontal {
      flex-direction: row;
    }

    .legend.vertical {
      flex-direction: column;
    }

    .legend-item-box {
      width: 15px;
      height: 15px;
    }

    .legend-item-label {
      font-family: sans-serif;
      font-size: 15px;
    }

    .line {
      fill: none;
      stroke-width: 1.5px;
    }

    .chart-border {
      fill: none;
      stroke-width: 1;
      stroke: var(--frc-line-chart-border-color, black);
    }

    .axis-x-grid line,
    .axis-y-grid line {
      stroke: var(--frc-line-chart-grid-color, #eee);
    }

    .axis--y {
      font-family: monospace;
    }

    svg {
      overflow: visible;
    }
  `, ce8);
ie7([
  Rt({ type: Number, attribute: "view-time" })
], Q11.prototype, "viewTime");
ie7([
  Rt({ type: String, attribute: "chart-title", reflect: true })
], Q11.prototype, "chartTitle");
ie7([
  n()
], Q11.prototype, "data");
ie7([
  a(".data-path")
], Q11.prototype, "path");
ie7([
  a("svg")
], Q11.prototype, "svg");
ie7([
  a(".axis--x")
], Q11.prototype, "xAxis");
ie7([
  a(".chart-container")
], Q11.prototype, "chartContainer");
var en5 = Q11;
customElements.get("frc-line-chart") || customElements.define("frc-line-chart", en5);
var Ei6 = Object.defineProperty;
var J11 = (e11, t19, n33, r24) => {
  for (var i27 = void 0, o13 = e11.length - 1, a22; o13 >= 0; o13--)
    (a22 = e11[o13]) && (i27 = a22(t19, n33, i27) || i27);
  return i27 && Ei6(t19, n33, i27), i27;
};
var B18 = class extends x {
  constructor() {
    super(...arguments), this.min = -1, this.max = 1, this.lockMin = false, this.lockMax = false, this.invert = false, this.side = "left", this.hideGridLines = false, this.hide = false;
  }
};
J11([
  Rt({ type: Number })
], B18.prototype, "min");
J11([
  Rt({ type: Number })
], B18.prototype, "max");
J11([
  Rt({ type: Boolean, attribute: "lock-min" })
], B18.prototype, "lockMin");
J11([
  Rt({ type: Boolean, attribute: "lock-max" })
], B18.prototype, "lockMax");
J11([
  Rt({ type: Boolean })
], B18.prototype, "invert");
J11([
  Rt({ type: String, reflect: true })
], B18.prototype, "side");
J11([
  Rt({ type: Boolean, attribute: "hide-grid-lines" })
], B18.prototype, "hideGridLines");
J11([
  Rt({ type: Boolean })
], B18.prototype, "hide");
customElements.get("frc-line-chart-axis") || customElements.define("frc-line-chart-axis", B18);
var Vi4 = Object.defineProperty;
var Be6 = (e11, t19, n33, r24) => {
  for (var i27 = void 0, o13 = e11.length - 1, a22; o13 >= 0; o13--)
    (a22 = e11[o13]) && (i27 = a22(t19, n33, i27) || i27);
  return i27 && Vi4(t19, n33, i27), i27;
};
var me8 = class extends x {
  constructor() {
    super(...arguments), this.position = "n", this.direction = "horizontal", this.hide = false, this.inside = false;
  }
};
Be6([
  Rt({ type: String })
], me8.prototype, "position");
Be6([
  Rt({ type: String })
], me8.prototype, "direction");
Be6([
  Rt({ type: Boolean })
], me8.prototype, "hide");
Be6([
  Rt({ type: Boolean })
], me8.prototype, "inside");
customElements.get("frc-line-chart-legend") || customElements.define("frc-line-chart-legend", me8);
var Ji4 = xt({
  tagName: "frc-line-chart",
  elementClass: en5,
  react: import_react18.default
});
var Ri4 = xt({
  tagName: "frc-line-chart-axis",
  elementClass: B18,
  react: import_react18.default
});
var Ki5 = xt({
  tagName: "frc-line-chart-data",
  elementClass: re7,
  react: import_react18.default
});
var eo3 = xt({
  tagName: "frc-line-chart-legend",
  elementClass: me8,
  react: import_react18.default
});

// node_modules/@frc-web-components/react/dist/components/Logger.es.js
var import_react19 = __toESM(require_react(), 1);
var i24 = {
  info: {
    color: "#fff",
    name: "INFO",
    level: 1
  },
  debug: {
    color: "#fff",
    name: "DEBUG",
    level: 0
  },
  fatal: {
    color: "#FF3E3E",
    name: "ERROR",
    level: 4
  },
  warning: {
    color: "#FFC53E",
    name: "WARNING",
    level: 3
  },
  success: {
    color: "#3EFF45",
    name: "SUCCESS",
    level: 2
  }
};
var x27 = {
  name: "Html Logger",
  enabled: true,
  maxLogCount: 1e3,
  loggingFormat: "[MESSAGE]",
  //"[LEVEL] [MESSAGE]",
  argumentsSeparator: " ",
  utcTime: false,
  level: 0
};
var $20 = function(a22) {
  var t19 = [].slice.call(arguments, 1);
  return t19.forEach(function(e11) {
    for (var o13 in e11)
      a22[o13] = e11[o13];
  }), a22;
};
var w24 = class {
  constructor(t19, e11 = document.body) {
    this.options = $20({}, x27, t19 || {}), this.parent = e11, this.linesCount = 0, this.$ = {}, this.initialized = false;
  }
  init() {
    if (this.initialized)
      return;
    if (!document || !document.createElement || !document.body || !document.body.appendChild)
      throw new Error("HtmlLogger not initialized");
    this.$.container = document.createElement("div"), this.$.container.setAttribute("style", `width:100%; height: 100%;
					margin:0;
					left:0;
					background: rgba(0, 0, 0, 0.8);
					overflow:auto;
					padding: 5px 7px;
    			box-sizing: border-box;`), this.$.log = document.createElement("div");
    const t19 = document.createElement("span");
    t19.style.color = "#afa", t19.style.fontWeight = "bold";
    const e11 = `===== ${this.options.name} - Logger started at ${this.options.utcTime ? (/* @__PURE__ */ new Date()).toUTCString() : /* @__PURE__ */ new Date()} =====`;
    t19.appendChild(document.createTextNode(e11));
    const o13 = document.createElement("div");
    o13.appendChild(t19), o13.appendChild(document.createElement("br")), o13.appendChild(document.createElement("br")), this.$.container.appendChild(o13), this.$.container.appendChild(this.$.log), this.parent.appendChild(this.$.container), this.initialized = true;
  }
  setLevel(t19) {
    this.options.level = t19;
  }
  setEnable(t19 = true) {
    this.initialized && (this.options.enabled = t19, this.$.log.style.color = t19 ? "#fff" : "#444");
  }
  /**
   * Removes all lines from the view
   * @memberOf HtmlLogger
   */
  clean() {
    if (this.initialized) {
      for (; this.$.log.firstChild; )
        this.$.log.removeChild(this.$.log.firstChild);
      this.linesCount = 0;
    }
  }
  /**
   * prints message. default level is [info].
   * @param {String} msg - message to print
   * @param {String} [hexColor=levels.info.color] - hexcolor text
   * @param {String} [level=levels.info.name] - level suffix
   *
   * @memberOf HtmlLogger
   */
  print(t19, e11 = i24.info.color, o13 = i24.info.name) {
    if (!this.initialized || !this.options.enabled)
      return;
    const l26 = this.$.container.scrollTop > this.$.container.scrollHeight - this.$.container.clientHeight - 5, h26 = (t19.length ? t19 : "[empty]").split(/\r\n|\r|\n/);
    for (let d34 = 0; d34 < h26.length; d34++) {
      let g32 = document.createElement("div");
      g32.setAttribute("style", "color:#999;float:left;");
      let f40 = this._getTime();
      g32.appendChild(document.createTextNode(`${f40} `));
      let v31 = this.options.loggingFormat.replace("[LEVEL]", o13).replace("[MESSAGE]", h26[d34]), p26 = document.createElement("div");
      p26.setAttribute(
        "style",
        `word-wrap:break-word;margin-left:6.0em;color: ${e11}`
      ), p26.appendChild(document.createTextNode(v31));
      let m34 = document.createElement("div");
      m34.setAttribute("style", "clear:both;");
      var c27 = document.createElement("div");
      for (c27.appendChild(g32), c27.appendChild(p26), c27.appendChild(m34), this.$.log.appendChild(c27), this.linesCount++; this.linesCount > this.options.maxLogCount; )
        this.$.log.childNodes[0].remove(), this.linesCount--;
      l26 && (this.$.container.scrollTop = this.$.container.scrollHeight);
    }
  }
  info() {
    this.options.level <= i24.info.level && this.print(
      [].map.call(arguments, this._determineString).join(this.options.argumentsSeparator)
    );
  }
  debug() {
    this.options.level <= i24.debug.level && this.print(
      [].map.call(arguments, this._determineString).join(this.options.argumentsSeparator),
      i24.debug.color,
      i24.debug.name
    );
  }
  warning() {
    this.options.level <= i24.warning.level && this.print(
      [].map.call(arguments, this._determineString).join(this.options.argumentsSeparator),
      i24.warning.color,
      i24.warning.name
    );
  }
  success() {
    this.options.level <= i24.success.level && this.print(
      [].map.call(arguments, this._determineString).join(this.options.argumentsSeparator),
      i24.success.color,
      i24.success.name
    );
  }
  error() {
    this.options.level <= i24.fatal.level && this.print(
      [].map.call(arguments, this._determineString).join(this.options.argumentsSeparator),
      i24.fatal.color,
      i24.fatal.name
    );
  }
  _getTime() {
    return (this.options.utcTime ? (/* @__PURE__ */ new Date()).toUTCString() : (/* @__PURE__ */ new Date()).toString()).match(/([01]?[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]/)[0];
  }
  _determineString(t19) {
    if (t19 === void 0)
      return "undefined";
    if (t19 === null)
      return "null";
    if (t19 instanceof Array)
      return JSON.stringify(t19);
    switch (typeof t19) {
      default:
      case "object":
        return `${t19.constructor ? t19.constructor.name : t19.toString()} -> ${JSON.stringify(t19)}`;
      case "function":
        return t19.name || "[function]";
      case "number":
      case "string":
      case "boolean":
        return t19;
    }
  }
};
var L10 = Object.defineProperty;
var s13 = (a22, t19, e11, o13) => {
  for (var l26 = void 0, h26 = a22.length - 1, c27; h26 >= 0; h26--)
    (c27 = a22[h26]) && (l26 = c27(t19, e11, l26) || l26);
  return l26 && L10(t19, e11, l26), l26;
};
var u25 = class extends x {
  constructor() {
    super(...arguments), this.title = "Robot Logger", this.maxLogCount = 1e3, this.debug = "", this.info = "", this.success = "", this.warning = "", this.error = "", this.level = "info", this.disabled = false, this.levels = ["debug", "info", "success", "warning", "error"];
  }
  firstUpdated() {
    const t19 = this.renderRoot.querySelector(
      "[part=logger]"
    );
    this.logger = new w24(
      {
        name: this.title,
        maxLogCount: Math.max(0, this.maxLogCount),
        level: this.levels.indexOf(this.level),
        enabled: !this.disabled
      },
      t19
    ), this.logger.init();
  }
  updated(t19) {
    this.levels.forEach((e11) => {
      t19.has(e11) && this[e11] && this.logger[e11](this[e11]);
    }), t19.has("maxLogCount") && (this.logger.options.maxLogCount = Math.max(0, this.maxLogCount)), t19.has("level") && this.logger.setLevel(this.levels.indexOf(this.level)), t19.has("disabled") && this.logger.setEnable(!this.disabled);
  }
  render() {
    return Ht` <div part="logger"></div> `;
  }
};
u25.styles = Mt`
    :host {
      display: inline-block;
      width: 500px;
      height: 400px;
      font-family: monospace;
      font-size: 14px;
    }

    [part='logger'] {
      width: 100%;
      height: 100%;
    }
  `;
var n25 = u25;
s13([
  Rt({ type: String })
], n25.prototype, "title");
s13([
  Rt({ type: Number, attribute: "max-log-count" })
], n25.prototype, "maxLogCount");
s13([
  Rt({ type: String })
], n25.prototype, "debug");
s13([
  Rt({ type: String })
], n25.prototype, "info");
s13([
  Rt({ type: String })
], n25.prototype, "success");
s13([
  Rt({ type: String })
], n25.prototype, "warning");
s13([
  Rt({ type: String })
], n25.prototype, "error");
s13([
  Rt({ type: String })
], n25.prototype, "level");
s13([
  Rt({ type: Boolean })
], n25.prototype, "disabled");
customElements.get("frc-logger") || customElements.define("frc-logger", n25);
var F17 = xt({
  tagName: "frc-logger",
  elementClass: n25,
  react: import_react19.default
});

// node_modules/@frc-web-components/react/dist/components/Mechanism2d.es.js
var import_react20 = __toESM(require_react(), 1);
var import_jsx_runtime4 = __toESM(require_jsx_runtime(), 1);
var j14 = Object.defineProperty;
var c21 = (o13, e11, t19, s18) => {
  for (var r24 = void 0, i27 = o13.length - 1, n33; i27 >= 0; i27--)
    (n33 = o13[i27]) && (r24 = n33(e11, t19, r24) || r24);
  return r24 && j14(e11, t19, r24), r24;
};
function b27(o13) {
  const e11 = (o13 == null ? void 0 : o13.getChildren()) ?? {};
  return Object.values(e11).filter(
    (t19) => {
      var s18;
      return t19.hasChildren() && ((s18 = t19.getChildren()[".type"]) == null ? void 0 : s18.getSourceValue()) === "line";
    }
  ).map((t19) => {
    const s18 = t19.getChildren();
    return {
      angle: s18.angle.getSourceValue() ?? 0,
      color: s18.color.getSourceValue() ?? "#ffffff",
      length: s18.length.getSourceValue() ?? 1,
      weight: s18.weight.getSourceValue() ?? 1,
      children: b27(t19)
    };
  });
}
function M11(o13) {
  const e11 = (o13 == null ? void 0 : o13.getChildren()) ?? {};
  return Object.values(e11).filter(
    (t19) => t19.hasChildren()
  ).map((t19) => ({
    x: t19.getChildren().x.getSourceValue() ?? 0,
    y: t19.getChildren().y.getSourceValue() ?? 0,
    children: b27(t19)
  }));
}
var x28 = class extends x {
  constructor() {
    super(...arguments), this.backgroundColor = "#000020", this.dims = [3, 3], this.roots = [], this.mechanism2d = this.getMechanism2d();
  }
  firstUpdated() {
    new ResizeObserver(() => {
      this.resized();
    }).observe(this), requestAnimationFrame(() => {
      this.updateMechanism2d();
    });
  }
  getMech2dSize() {
    const { width: e11, height: t19 } = this.getBoundingClientRect(), [s18, r24] = this.dims;
    return r24 / s18 * e11 < t19 ? [e11, r24 / s18 * e11] : [s18 / r24 * t19, t19];
  }
  resized() {
    this.requestUpdate();
  }
  getSize() {
    const { width: e11 } = this.getBoundingClientRect();
    return e11;
  }
  updated(e11) {
    e11.has("backgroundColor") && this._svg.style.setProperty("background-color", this.backgroundColor), e11.has("dims") && this.requestUpdate();
  }
  updateMechanism2d() {
    this.mechanism2d = this.getMechanism2d(), requestAnimationFrame(() => {
      this.updateMechanism2d();
    });
  }
  getMechanism2d() {
    return {
      backgroundColor: this.backgroundColor,
      dims: this.dims,
      roots: this.roots
    };
  }
  render() {
    const [e11, t19] = this.getMech2dSize();
    return Nt`
      <svg
        style="width: ${e11}px; height: ${t19}px; background: ${this.mechanism2d.backgroundColor}"
      >
        ${this.mechanism2d.roots.map(
      (s18) => this.renderMechanism2dRoot(s18)
    )}
      </svg>
    `;
  }
  renderMechanism2dRoot(e11) {
    const [t19, s18] = this.dims, [r24, i27] = this.getMech2dSize(), n33 = e11.x / t19 * r24, m34 = e11.y / s18 * i27;
    return Nt`
      <g style="transform: translate(${n33}px, ${i27 - m34}px)">
        ${e11.children.map((l26) => this.renderMechanism2dLine(l26))}
      </g>
    `;
  }
  renderMechanism2dLine(e11) {
    const [t19] = this.dims, [s18] = this.getMech2dSize(), r24 = s18 / t19 * e11.length, i27 = e11.angle * Math.PI / 180, n33 = Math.cos(i27) * r24, m34 = -Math.sin(i27) * r24, l26 = Math.max(1, e11.weight * 2 / 3);
    return Nt`
      <line stroke=${e11.color} stroke-width=${l26} x1="0" y1="0" x2="${n33}px" y2="${m34}px"  />
      <g style="transform: translate(${n33}px, ${m34}px) rotate(${-e11.angle}deg)">
        ${e11.children.map((v31) => this.renderMechanism2dLine(v31))}
      </g>
    `;
  }
};
x28.styles = Mt`
    :host {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 300px;
      height: 300px;
    }

    svg {
      width: 100%;
      height: 100%;
    }
  `;
var a15 = x28;
c21([
  Rt({ type: String, attribute: "background-color" })
], a15.prototype, "backgroundColor");
c21([
  Rt({ type: Array })
], a15.prototype, "dims");
c21([
  Rt({ type: Array })
], a15.prototype, "roots");
c21([
  a("svg")
], a15.prototype, "_svg");
c21([
  n()
], a15.prototype, "mechanism2d");
customElements.get("frc-mechanism2d") || customElements.define("frc-mechanism2d", a15);
var V15 = Object.defineProperty;
var u26 = (o13, e11, t19, s18) => {
  for (var r24 = void 0, i27 = o13.length - 1, n33; i27 >= 0; i27--)
    (n33 = o13[i27]) && (r24 = n33(e11, t19, r24) || r24);
  return r24 && V15(e11, t19, r24), r24;
};
var C19 = class extends x {
  constructor() {
    super(...arguments), this.backgroundColor = "#000020", this.dims = [3, 3], this.roots = [];
  }
  updateMechanism2d() {
    this.roots = this.source ? M11(this.source) : [], requestAnimationFrame(() => {
      this.updateMechanism2d();
    });
  }
  firstUpdated() {
    this.updateMechanism2d();
  }
  render() {
    return Ht`
      <frc-mechanism2d
        .roots=${this.roots}
        .backgroundColor=${this.backgroundColor}
        .dims=${this.dims}
      ></frc-mechanism2d>
    `;
  }
};
C19.styles = Mt`
    :host {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      width: 300px;
      height: 300px;
    }

    frc-mechanism2d {
      width: 100%;
      height: 100%;
    }
  `;
var d24 = C19;
u26([
  Rt({ type: String, attribute: "background-color" })
], d24.prototype, "backgroundColor");
u26([
  Rt({ type: Array })
], d24.prototype, "dims");
u26([
  Rt({ type: Object })
], d24.prototype, "source");
u26([
  n()
], d24.prototype, "roots");
customElements.get("frc-mechanism2d-wrapper") || customElements.define("frc-mechanism2d-wrapper", d24);
var B19 = xt({
  tagName: "frc-mechanism2d",
  elementClass: a15,
  react: import_react20.default
});
function _20(o13) {
  const { store: e11 } = me7(), [t19, s18] = (0, import_react20.useState)([]);
  return (0, import_react20.useEffect)(() => e11.subscribe(
    "NetworkTables",
    o13,
    () => {
      const r24 = e11.getSource("NetworkTables", o13);
      r24 && s18(M11(r24));
    },
    true
  ), []), t19;
}

// node_modules/@frc-web-components/react/dist/components/NetworkAlerts.es.js
var import_react21 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/when-CDK1Tt5Y-835602a5.js
function u27(n33, t19, o13) {
  return n33 ? t19(n33) : o13 == null ? void 0 : o13(n33);
}

// node_modules/@frc-web-components/react/dist/components/NetworkAlerts.es.js
var m26 = Object.defineProperty;
var l19 = (a22, e11, c27, b35) => {
  for (var i27 = void 0, s18 = a22.length - 1, d34; s18 >= 0; s18--)
    (d34 = a22[s18]) && (i27 = d34(e11, c27, i27) || i27);
  return i27 && m26(e11, c27, i27), i27;
};
var T17 = "m40-120 440-760 440 760H40Zm138-80h604L480-720 178-200Zm302-40q17 0 28.5-11.5T520-280q0-17-11.5-28.5T480-320q-17 0-28.5 11.5T440-280q0 17 11.5 28.5T480-240Zm-40-120h80v-200h-80v200Zm40-100Z";
var g24 = "M480-280q17 0 28.5-11.5T520-320q0-17-11.5-28.5T480-360q-17 0-28.5 11.5T440-320q0 17 11.5 28.5T480-280Zm-40-160h80v-240h-80v240Zm40 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z";
var x29 = "M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z";
var h21 = class extends x {
  constructor() {
    super(...arguments), this.errors = [], this.warnings = [], this.infos = [], this.level = "info", this.hideTitle = false;
  }
  render() {
    return Ht`
      <div class="alerts-container">
        ${u27(!this.hideTitle, () => Ht` <header>Alerts</header> `)}
        <div class="alerts-list">
          ${this.errors.map(
      (e11) => Ht`
              <div class="alert">
                <div class="icon">
                  <frc-icon
                    color="red"
                    svg-path=${g24}
                    view-box="0 -960 960 960"
                  ></frc-icon>
                </div>
                <label>${e11}</label>
              </div>
            `
    )}
          ${u27(
      this.level !== "error",
      () => Ht`
              ${this.warnings.map(
        (e11) => Ht`
                  <div class="alert">
                    <div class="icon">
                      <frc-icon
                        color="yellow"
                        svg-path=${T17}
                        view-box="0 -960 960 960"
                      ></frc-icon>
                    </div>
                    <label>${e11}</label>
                  </div>
                `
      )}
            `
    )}
          ${u27(
      this.level === "info",
      () => Ht`
              ${this.infos.map(
        (e11) => Ht`
                  <div class="alert">
                    <div class="icon">
                      <frc-icon
                        color="green"
                        svg-path=${x29}
                        view-box="0 -960 960 960"
                      ></frc-icon>
                    </div>
                    <label>${e11}</label>
                  </div>
                `
      )}
            `
    )}
        </div>
      </div>
    `;
  }
};
h21.styles = Mt`
    :host {
      font-family: sans-serif;
      display: inline-block;
      width: 300px;
      height: auto;
      box-sizing: border-box;
      color: var(--frc-network-alerts-text-color, black);
    }

    .alerts-container {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    header {
      background: var(--frc-network-alerts-header-color, lightblue);
      padding: 10px 0;
      text-align: center;
      font-weight: bold;
    }

    .alerts-list {
      padding: 8px 5px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 9px;
      flex: 1;
      overflow-y: auto;
    }

    .alert {
      display: flex;
      align-items: center;
      gap: 9px;
    }

    .icon {
      width: 24px;
      height: 24px;
    }

    .alert label {
      flex: 1;
    }

    .icon frc-icon {
      width: 100%;
      height: 100%;
    }
  `;
var r20 = h21;
l19([
  Rt({ type: Array })
], r20.prototype, "errors");
l19([
  Rt({ type: Array })
], r20.prototype, "warnings");
l19([
  Rt({ type: Array })
], r20.prototype, "infos");
l19([
  Rt({ type: String })
], r20.prototype, "level");
l19([
  Rt({ type: Boolean, attribute: "hide-title" })
], r20.prototype, "hideTitle");
customElements.get("frc-network-alerts") || customElements.define("frc-network-alerts", r20);
var k24 = xt({
  tagName: "frc-network-alerts",
  elementClass: r20,
  react: import_react21.default
});

// node_modules/@frc-web-components/react/dist/components/NumberBar.es.js
var import_react22 = __toESM(require_react(), 1);
var b28 = xt({
  tagName: "frc-number-bar",
  elementClass: t2,
  react: import_react22.default
});

// node_modules/@frc-web-components/react/dist/components/NumberSlider.es.js
var import_react23 = __toESM(require_react(), 1);
var h22 = (t19) => {
  throw TypeError(t19);
};
var f31 = (t19, e11, a22) => e11.has(t19) || h22("Cannot " + a22);
var y25 = (t19, e11, a22) => e11.has(t19) ? h22("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(t19) : e11.set(t19, a22);
var k25 = (t19, e11, a22) => (f31(t19, e11, "access private method"), a22);
var w26 = Object.defineProperty;
var i25 = (t19, e11, a22, m34) => {
  for (var r24 = void 0, o13 = t19.length - 1, c27; o13 >= 0; o13--)
    (c27 = t19[o13]) && (r24 = c27(e11, a22, r24) || r24);
  return r24 && w26(e11, a22, r24), r24;
};
var l20;
var d25;
var p22 = class extends x {
  constructor() {
    super(...arguments), y25(this, l20), this.value = 0, this.min = -1, this.max = 1, this.blockIncrement = 0.05;
  }
  onChange(e11) {
    this.value = parseFloat(e11.target.value), k25(this, l20, d25).call(this);
  }
  firstUpdated() {
    setTimeout(() => {
      const e11 = this.renderRoot.querySelector("#slider");
      e11 && (e11.value = this.value);
    });
  }
  render() {
    const e11 = Math.min(this.min, this.max), a22 = Math.max(this.min, this.max), m34 = Math.max(e11, Math.min(this.value, a22));
    return Ht`
      <div class="slider-container">
        <input
          id="slider"
          type="range"
          .value="${m34.toString()}"
          min="${e11}"
          max="${a22}"
          step="${this.blockIncrement}"
          @change="${this.onChange}"
        />

        <frc-axis ticks="5" min=${e11} max=${a22}></frc-axis>
      </div>
    `;
  }
};
l20 = /* @__PURE__ */ new WeakSet(), d25 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: { value: this.value },
      bubbles: true,
      composed: true
    })
  );
}, p22.styles = Mt`
    :host {
      display: inline-block;
      height: 50px;
      width: 300px;
    }

    .slider-container {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 0 15px;
    }

    input {
      width: 100%;
    }

    table-axis {
      width: calc(85% - 14px);
      max-width: calc(100% - 74px);
      display: block;
    }
  `;
var n26 = p22;
i25([
  Rt({ type: Number })
], n26.prototype, "value");
i25([
  Rt({ type: Number })
], n26.prototype, "min");
i25([
  Rt({ type: Number })
], n26.prototype, "max");
i25([
  Rt({ type: Number, attribute: "block-increment" })
], n26.prototype, "blockIncrement");
customElements.get("frc-number-slider") || customElements.define("frc-number-slider", n26);
var N18 = xt({
  tagName: "frc-number-slider",
  elementClass: n26,
  react: import_react23.default,
  events: {
    onchange: "change"
  }
});

// node_modules/@frc-web-components/react/dist/components/Pdp.es.js
var import_react24 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/voltage-view.es-704afd49.js
var y26 = Object.getPrototypeOf;
var l21 = Reflect.get;
var f32 = (p26, i27, s18) => l21(y26(p26), s18, i27);
var v25 = Object.defineProperty;
var r22 = (p26, i27, s18, b35) => {
  for (var o13 = void 0, u35 = p26.length - 1, n33; u35 >= 0; u35--)
    (n33 = p26[u35]) && (o13 = n33(i27, s18, o13) || o13);
  return o13 && v25(i27, s18, o13), o13;
};
var a16 = class extends t2 {
  constructor() {
    super(...arguments), this.value = 0, this.min = 0, this.max = 5, this.center = 0, this.precision = 2, this.hideText = false, this.numTickMarks = 3, this.unit = "V";
  }
};
a16.styles = [
  ...f32(a16, a16, "styles"),
  Mt`
      [part='bar']::part(foreground) {
        background: var(--frc-voltage-view-foreground-color, #ffbd2f);
      }
    `
];
var t16 = a16;
r22([
  Rt({ type: Number })
], t16.prototype, "value");
r22([
  Rt({ type: Number })
], t16.prototype, "min");
r22([
  Rt({ type: Number })
], t16.prototype, "max");
r22([
  Rt({ type: Number })
], t16.prototype, "center");
r22([
  Rt({ type: Number })
], t16.prototype, "precision");
r22([
  Rt({ type: Boolean, attribute: "hide-text" })
], t16.prototype, "hideText");
r22([
  Rt({ type: Number, attribute: "num-tick-marks" })
], t16.prototype, "numTickMarks");
r22([
  Rt({ type: String })
], t16.prototype, "unit");
customElements.get("frc-voltage-view") || customElements.define("frc-voltage-view", t16);

// node_modules/@frc-web-components/react/dist/components/Pdp.es.js
var f33 = Object.defineProperty;
var s14 = (r24, t19, l26, o13) => {
  for (var e11 = void 0, p26 = r24.length - 1, u35; p26 >= 0; p26--)
    (u35 = r24[p26]) && (e11 = u35(t19, l26, e11) || e11);
  return e11 && f33(t19, l26, e11), e11;
};
function i26(r24, t19) {
  const l26 = [];
  for (let o13 = r24; o13 < t19; o13 += 1)
    l26.push(o13);
  return l26;
}
var m27 = class extends x {
  constructor() {
    super(...arguments), this.voltage = 0, this.totalCurrent = 0, this.channels = Array(16).fill(0);
  }
  renderChannel(t19) {
    return Ht`
      <frc-number-bar
        class="channel"
        part="channel"
        value=${this.channels[t19] ?? 0}
        min="0"
        max="40"
        center="0"
        precision="2"
        ?hide-text="${false}"
        num-tick-marks="0"
        unit="A"
      ></frc-number-bar>
    `;
  }
  render() {
    return Ht`
      <div part="channels">
        ${i26(0, 8).map(
      (t19) => Ht`
            <label part="channel-label">
              <slot name="${`channel-label${t19}`}">Ch. ${t19}</slot>
            </label>
          `
    )}
        ${i26(0, 8).map((t19) => Ht` ${this.renderChannel(t19)} `)}
        ${i26(8, 16).map(
      (t19) => Ht`
            <label part="channel-label">
              <slot name="${`channel-label${t19}`}">Ch. ${t19}</slot>
            </label>
          `
    )}
        ${i26(8, 16).map(
      (t19) => Ht` ${this.renderChannel(t19)} `
    )}
      </div>
      <div part="voltage-and-total-current">
        <label part="voltage-label">
          <slot name="voltage-label">Voltage</slot>
        </label>
        <label part="total-current-label">
          <slot name="total-current">Total Current</slot>
        </label>
        <frc-voltage-view
          class="voltage"
          part="voltage"
          value="${this.voltage}"
          min="0"
          max="15"
          center="0"
          precision="2"
          ?hide-text="${false}"
          num-tick-marks="0"
        ></frc-voltage-view>
        <frc-number-bar
          class="total-current"
          part="total-current"
          value="${this.totalCurrent}"
          min="0"
          max="500"
          center="0"
          precision="2"
          ?hide-text="${false}"
          num-tick-marks="0"
          unit="A"
        ></frc-number-bar>
      </div>
    `;
  }
};
m27.styles = Mt`
    :host {
      display: inline-block;
      width: 350px;
      margin: 5px;
      color: var(--frc-label-text-color, black);
      font-family: sans-serif;
      font-size: 16px;
    }

    [part='channels'] {
      display: grid;
      grid-auto-flow: column;
      grid-template-columns: min-content 1fr min-content 1fr;
      grid-template-rows: auto auto auto auto auto auto auto auto;
      width: 100%;
      height: auto;
      align-items: center;
      gap: 3px;
    }

    .channel,
    .voltage,
    .total-current {
      width: auto;
    }

    [part='channel-label'] {
      padding-left: 5px;
      text-align: right;
      white-space: nowrap;
    }

    [part='voltage-and-total-current'] {
      margin-top: 5px;
      display: grid;
      grid-auto-flow: column;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto;
      column-gap: 10px;
      width: 100%;
      height: auto;
      align-items: center;
      gap: 3px;
    }

    [part='voltage-and-total-current'] {
      white-space: nowrap;
    }
  `;
var n27 = m27;
s14([
  Rt({ type: Number })
], n27.prototype, "voltage");
s14([
  Rt({ type: Number, attribute: "total-current" })
], n27.prototype, "totalCurrent");
s14([
  Rt({ type: Array })
], n27.prototype, "channels");
customElements.get("frc-pdp") || customElements.define("frc-pdp", n27);
var E22 = xt({
  tagName: "frc-pdp",
  elementClass: n27,
  react: import_react24.default
});

// node_modules/@frc-web-components/react/dist/components/Pid.es.js
var import_react25 = __toESM(require_react(), 1);
var N19 = (e11) => {
  throw TypeError(e11);
};
var I16 = (e11, t19, i27) => t19.has(e11) || N19("Cannot " + i27);
var P17 = (e11, t19, i27) => t19.has(e11) ? N19("Cannot add the same private member more than once") : t19 instanceof WeakSet ? t19.add(e11) : t19.set(e11, i27);
var o10 = (e11, t19, i27) => (I16(e11, t19, "access private method"), i27);
var j15 = Object.defineProperty;
var f34 = (e11, t19, i27, E25) => {
  for (var n33 = void 0, a22 = e11.length - 1, l26; a22 >= 0; a22--)
    (l26 = e11[a22]) && (n33 = l26(t19, i27, n33) || n33);
  return n33 && j15(t19, i27, n33), n33;
};
var s15;
var h24;
var F18 = class extends x {
  constructor() {
    super(...arguments), P17(this, s15), this.p = 0, this.i = 0, this.d = 0, this.setpoint = 0, this.running = false;
  }
  onPChange(t19) {
    this.p = parseFloat(t19.target.value), o10(this, s15, h24).call(this);
  }
  onIChange(t19) {
    this.i = parseFloat(t19.target.value), o10(this, s15, h24).call(this);
  }
  onDChange(t19) {
    this.d = parseFloat(t19.target.value), o10(this, s15, h24).call(this);
  }
  onSetpointChange(t19) {
    this.setpoint = parseFloat(t19.target.value), o10(this, s15, h24).call(this);
  }
  onRunningClick() {
    this.running = !this.running, o10(this, s15, h24).call(this);
  }
  render() {
    return Ht`
      <input
        type="checkbox"
        id="running"
        .checked=${this.running}
        @click=${this.onRunningClick}
      />
      <label for="running">Running</label>
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Setpoint</label>
      <input
        type="number"
        .value=${this.setpoint}
        @change=${this.onSetpointChange}
      />
    `;
  }
};
s15 = /* @__PURE__ */ new WeakSet(), h24 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        p: this.p,
        i: this.i,
        d: this.d,
        setpoint: this.setpoint,
        running: this.running
      }
    })
  );
}, F18.styles = Mt`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      width: 150px;
      height: auto;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input[type='number'] {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }

    input[type='checkbox'] {
      justify-self: right;
      margin: 0;
      width: 16px;
      height: 16px;
    }

    label[for='running'] {
      justify-self: left;
    }
  `;
var p23 = F18;
f34([
  Rt({ type: Number })
], p23.prototype, "p");
f34([
  Rt({ type: Number })
], p23.prototype, "i");
f34([
  Rt({ type: Number })
], p23.prototype, "d");
f34([
  Rt({ type: Number })
], p23.prototype, "setpoint");
f34([
  Rt({ type: Boolean, reflect: true })
], p23.prototype, "running");
customElements.get("frc-pid-command") || customElements.define("frc-pid-command", p23);
var O16 = Object.defineProperty;
var v26 = (e11, t19, i27, E25) => {
  for (var n33 = void 0, a22 = e11.length - 1, l26; a22 >= 0; a22--)
    (l26 = e11[a22]) && (n33 = l26(t19, i27, n33) || n33);
  return n33 && O16(t19, i27, n33), n33;
};
var c22;
var b29;
var D16 = class extends x {
  constructor() {
    super(...arguments), P17(this, c22), this.p = 0, this.i = 0, this.d = 0, this.setpoint = 0;
  }
  onPChange(t19) {
    this.p = parseFloat(t19.target.value), o10(this, c22, b29).call(this);
  }
  onIChange(t19) {
    this.i = parseFloat(t19.target.value), o10(this, c22, b29).call(this);
  }
  onDChange(t19) {
    this.d = parseFloat(t19.target.value), o10(this, c22, b29).call(this);
  }
  onSetpointChange(t19) {
    this.setpoint = parseFloat(t19.target.value), o10(this, c22, b29).call(this);
  }
  render() {
    return Ht`
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Setpoint</label>
      <input
        type="number"
        .value=${this.setpoint}
        @change=${this.onSetpointChange}
      />
    `;
  }
};
c22 = /* @__PURE__ */ new WeakSet(), b29 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        p: this.p,
        i: this.i,
        d: this.d,
        setpoint: this.setpoint
      }
    })
  );
}, D16.styles = Mt`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      height: auto;
      width: 150px;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }
  `;
var g25 = D16;
v26([
  Rt({ type: Number })
], g25.prototype, "p");
v26([
  Rt({ type: Number })
], g25.prototype, "i");
v26([
  Rt({ type: Number })
], g25.prototype, "d");
v26([
  Rt({ type: Number })
], g25.prototype, "setpoint");
customElements.get("frc-pid-controller") || customElements.define("frc-pid-controller", g25);
var R18 = Object.defineProperty;
var y27 = (e11, t19, i27, E25) => {
  for (var n33 = void 0, a22 = e11.length - 1, l26; a22 >= 0; a22--)
    (l26 = e11[a22]) && (n33 = l26(t19, i27, n33) || n33);
  return n33 && R18(t19, i27, n33), n33;
};
var u29;
var m28;
var S19 = class extends x {
  constructor() {
    super(...arguments), P17(this, u29), this.p = 0, this.i = 0, this.d = 0, this.goal = 0;
  }
  onPChange(t19) {
    this.p = parseFloat(t19.target.value), o10(this, u29, m28).call(this);
  }
  onIChange(t19) {
    this.i = parseFloat(t19.target.value), o10(this, u29, m28).call(this);
  }
  onDChange(t19) {
    this.d = parseFloat(t19.target.value), o10(this, u29, m28).call(this);
  }
  onGoalChange(t19) {
    this.goal = parseFloat(t19.target.value), o10(this, u29, m28).call(this);
  }
  render() {
    return Ht`
      <label>P</label>
      <input type="number" .value=${this.p} @change=${this.onPChange} />
      <label>I</label>
      <input type="number" .value=${this.i} @change=${this.onIChange} />
      <label>D</label>
      <input type="number" .value=${this.d} @change=${this.onDChange} />
      <label>Goal</label>
      <input type="number" .value=${this.goal} @change=${this.onGoalChange} />
    `;
  }
};
u29 = /* @__PURE__ */ new WeakSet(), m28 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        p: this.p,
        i: this.i,
        d: this.d,
        goal: this.goal
      }
    })
  );
}, S19.styles = Mt`
    :host {
      display: inline-grid;
      grid-template-columns: min-content auto;
      grid-template-rows: auto auto auto auto;
      column-gap: 10px;
      row-gap: 8px;
      align-items: center;
      height: auto;
      width: 150px;
      font-family: sans-serif;
      color: var(--frc-pid-controller-text-color, black);
    }

    label {
      font-weight: bold;
      text-align: right;
    }

    input {
      width: 100%;
      min-width: 50px;
      display: inline-block;
      box-sizing: border-box;
      padding-left: 5px;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      border: 1px solid var(--frc-pid-controller-input-border-color, #e0e0e0);
      color: var(--frc-pid-controller-text-color, black);
      background: var(--frc-pid-controller-input-background-color, white);
    }
  `;
var d26 = S19;
y27([
  Rt({ type: Number })
], d26.prototype, "p");
y27([
  Rt({ type: Number })
], d26.prototype, "i");
y27([
  Rt({ type: Number })
], d26.prototype, "d");
y27([
  Rt({ type: Number })
], d26.prototype, "goal");
customElements.get("frc-profiled-pid-controller") || customElements.define("frc-profiled-pid-controller", d26);
var B20 = xt({
  tagName: "frc-pid-command",
  elementClass: p23,
  react: import_react25.default,
  events: {
    onchange: "change"
  }
});
var H15 = xt({
  tagName: "frc-pid-controller",
  elementClass: g25,
  react: import_react25.default,
  events: {
    onchange: "change"
  }
});
var T18 = xt({
  tagName: "frc-profiled-pid-controller",
  elementClass: d26,
  react: import_react25.default,
  events: {
    onchange: "change"
  }
});

// node_modules/@frc-web-components/react/dist/components/Relay.es.js
var import_react26 = __toESM(require_react(), 1);

// node_modules/@frc-web-components/react/dist/toggle-group.es-ea37bfc7.js
var u30 = (e11) => {
  throw TypeError(e11);
};
var m29 = (e11, t19, o13) => t19.has(e11) || u30("Cannot " + o13);
var y28 = (e11, t19, o13) => t19.has(e11) ? u30("Cannot add the same private member more than once") : t19 instanceof WeakSet ? t19.add(e11) : t19.set(e11, o13);
var p24 = (e11, t19, o13) => (m29(e11, t19, "access private method"), o13);
var x31 = Object.defineProperty;
var l22 = (e11, t19, o13, w31) => {
  for (var i27 = void 0, s18 = e11.length - 1, c27; s18 >= 0; s18--)
    (c27 = e11[s18]) && (i27 = c27(t19, o13, i27) || i27);
  return i27 && x31(t19, o13, i27), i27;
};
var n28;
var d27;
var g26;
var f35 = class extends x {
  constructor() {
    super(...arguments), y28(this, n28), this.options = ["On", "Off"], this.value = "", this.direction = "vertical";
  }
  async setValue(t19) {
    this.value = t19;
  }
  updated(t19) {
    t19.has("options") && !this.options.includes(this.value) && (this.value = this.options[0] ?? ""), t19.has("value") && p24(this, n28, d27).call(this), t19.has("options") && p24(this, n28, g26).call(this), t19.has("direction") && this.style.setProperty(
      "flex-direction",
      this.direction === "vertical" ? "column" : "row"
    );
  }
  render() {
    return Ht`
      ${this.options.map(
      (t19) => Ht`
          <button
            class="${this.value === t19 ? "toggled" : ""}"
            @click="${() => this.setValue(t19)}"
          >
            ${t19}
          </button>
        `
    )}
    `;
  }
};
n28 = /* @__PURE__ */ new WeakSet(), d27 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: { value: this.value },
      bubbles: true,
      composed: true
    })
  );
}, g26 = function() {
  this.dispatchEvent(
    new CustomEvent("optionsUpdate", {
      detail: { options: this.options },
      bubbles: true,
      composed: true
    })
  );
}, f35.styles = Mt`
    :host {
      display: inline-flex;
      flex-direction: column;
      width: 150px;
      height: 300px;
      gap: 0;
      font-family: sans-serif;
      font-size: 16px;
      letter-spacing: 0.5px;
    }

    button {
      width: 100%;
      height: 100%;
      margin: 0;
      border: none;
      font-size: inherit;
      font-family: inherit;
      letter-spacing: inherit;
      background: var(--frc-button-background-color, rgb(230, 230, 230));
      color: var(--frc-button-text-color, black);
      flex: 1;
    }

    .toggled {
      background: var(--frc-button-toggled-background-color, black);
      color: var(--frc-button-toggled-text-color, white);
      font-weight: bold;
    }

    [part='button'] {
      border-radius: 0;
      margin: 0;
      flex: 1;
      font-size: inherit;
      height: 100%;
      padding: 0;
    }
  `;
var r23 = f35;
l22([
  Rt({ type: Array })
], r23.prototype, "options");
l22([
  Rt({ type: String })
], r23.prototype, "value");
l22([
  Rt({ type: String })
], r23.prototype, "direction");
customElements.get("frc-toggle-group") || customElements.define("frc-toggle-group", r23);

// node_modules/@frc-web-components/react/dist/components/Relay.es.js
var l23 = (e11) => {
  throw TypeError(e11);
};
var y29 = (e11, t19, r24) => t19.has(e11) || l23("Cannot " + r24);
var O17 = (e11, t19, r24) => t19.has(e11) ? l23("Cannot add the same private member more than once") : t19 instanceof WeakSet ? t19.add(e11) : t19.set(e11, r24);
var w27 = (e11, t19, r24) => (y29(e11, t19, "access private method"), r24);
var x32 = Object.defineProperty;
var h25 = (e11, t19, r24, S23) => {
  for (var a22 = void 0, n33 = e11.length - 1, c27; n33 >= 0; n33--)
    (c27 = e11[n33]) && (a22 = c27(t19, r24, a22) || a22);
  return a22 && x32(t19, r24, a22), a22;
};
var $22 = ["Off", "On", "Forward", "Reverse"];
var s16;
var p25;
var g27 = class extends x {
  constructor() {
    super(...arguments), O17(this, s16), this.value = "Off", this.direction = "vertical";
  }
  render() {
    return Ht`
      <frc-toggle-group
        @change=${w27(this, s16, p25)}
        .options=${$22}
        value=${this.value}
        direction=${this.direction}
      ></frc-toggle-group>
    `;
  }
};
s16 = /* @__PURE__ */ new WeakSet(), p25 = function(e11) {
  this.value = e11.detail.value;
}, g27.styles = Mt`
    :host {
      display: inline-block;
      width: 150px;
      height: 300px;
    }

    frc-toggle-group {
      width: 100%;
      height: 100%;
    }
  `;
var o11 = g27;
h25([
  Rt({ type: String })
], o11.prototype, "value");
h25([
  Rt({ type: String })
], o11.prototype, "direction");
customElements.get("frc-relay") || customElements.define("frc-relay", o11);
var R19 = xt({
  tagName: "frc-relay",
  elementClass: o11,
  react: import_react26.default,
  events: {
    onchange: "change"
  }
});

// node_modules/@frc-web-components/react/dist/components/ScoringGrid.es.js
var import_react27 = __toESM(require_react(), 1);
var S20 = (t19) => {
  throw TypeError(t19);
};
var B21 = (t19, e11, o13) => e11.has(t19) || S20("Cannot " + o13);
var C20 = (t19, e11, o13) => e11.has(t19) ? S20("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(t19) : e11.set(t19, o13);
var f36 = (t19, e11, o13) => (B21(t19, e11, "access private method"), o13);
var M12 = Object.defineProperty;
var g28 = (t19, e11, o13, i27) => {
  for (var r24 = void 0, c27 = t19.length - 1, h26; c27 >= 0; c27--)
    (h26 = t19[c27]) && (r24 = h26(e11, o13, r24) || r24);
  return r24 && M12(e11, o13, r24), r24;
};
var m30;
var I17;
var L11 = class extends x {
  constructor() {
    super(...arguments), C20(this, m30), this.nodeId = 1, this.selected = false, this.cones = 0, this.cubes = 0, this.background = "";
  }
  updated(e11) {
    (e11.has("selected") || e11.has("nodeId")) && f36(this, m30, I17).call(this);
  }
  render() {
    return Ht`
      <div style="text-align: center; margin-block:auto;">${this.nodeId}</div>

      <!-- empty on:click binding above passes click events to be bound on the Node component -->
      ${Nt`
        <svg
          viewBox="-2 -2 28 28"
          style="margin-right: 8px; width:100%; height:100%; pointer-events:none"
        >
          ${u27(
      this.cubes > 1,
      () => Nt`
              <polygon
                points="8,8 8,20 20,20, 20,8"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
              <polygon
                points="4,4 4,16 16,16, 16,4"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}
          ${u27(
      this.cubes === 1,
      () => Nt`
              <polygon
                points="6,6 6,18 18,18, 18,6"
                style="fill:rgb(150,0,255);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}
          ${u27(
      this.cones > 1,
      () => Nt`
              <polygon
                points="13,8 11,8 8,22 5,22 19,22 16,22"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
              <polygon
                points="13,4 11,4 8,18 5,18 19,18 16,18"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}
          
          ${u27(
      this.cones === 1,
      () => Nt`
              <polygon
                points="13,6 11,6 8,20 5,20 19,20 16,20"
                style="fill:rgb(255,200,0);stroke-width:1;stroke:rgb(0,0,0)"
              />
            `
    )}  
        </svg>
      `}
    `;
  }
};
m30 = /* @__PURE__ */ new WeakSet(), I17 = function() {
  this.selected ? this.background = "green" : this.nodeId >= 1 && this.nodeId <= 9 ? this.background = "lightgray" : (this.nodeId - 1) % 3 === 1 ? this.background = "purple" : this.background = "yellow", this.style.setProperty("background-color", this.background);
}, L11.styles = Mt`
    :host {
      display: block;
      color: black;
      font-size: 2em;
      height: 100%;
      flex-grow: 1;
      border: 1px solid black;
      box-sizing: border-box;
    }
  `;
var a17 = L11;
g28([
  Rt({ type: Number, attribute: "node-id" })
], a17.prototype, "nodeId");
g28([
  Rt({ type: Boolean })
], a17.prototype, "selected");
g28([
  Rt({ type: Number })
], a17.prototype, "cones");
g28([
  Rt({ type: Number })
], a17.prototype, "cubes");
g28([
  n()
], a17.prototype, "background");
customElements.get("frc-scoring-grid-node") || customElements.define("frc-scoring-grid-node", a17);
var z19 = Object.defineProperty;
var d29 = (t19, e11, o13, i27) => {
  for (var r24 = void 0, c27 = t19.length - 1, h26; c27 >= 0; c27--)
    (h26 = t19[c27]) && (r24 = h26(e11, o13, r24) || r24);
  return r24 && z19(e11, o13, r24), r24;
};
function y30(t19, e11 = false) {
  return e11 ? 9 - (t19 - 1) % 9 : 1 + (t19 - 1) % 9;
}
function v27(t19, e11 = false) {
  return e11 ? 3 - Math.floor((t19 - 1) / 9) : Math.floor((t19 - 1) / 9) + 1;
}
function P18(t19, e11) {
  return Array.from(Array(e11 + 1).keys()).slice(t19);
}
var b30;
var O18;
var E23;
var R20 = class extends x {
  constructor() {
    super(...arguments), C20(this, b30), this.selection = 0, this.cubesScored = [], this.conesScored = [], this.hideLinks = false, this.reverseRow = false, this.reverseCol = false, this.leftOfLinks = [];
  }
  updated(e11) {
    (e11.has("cubesScored") || e11.has("conesScored")) && f36(this, b30, E23).call(this);
  }
  renderLinks() {
    return this.hideLinks ? Ht`` : Ht`
      ${this.leftOfLinks.map(
      (e11) => Ht`
          <div
            class="link"
            style=${h20({
        gridColumn: `${Math.min(
          y30(e11, this.reverseCol),
          y30(e11 + 2, this.reverseCol)
        )} / span 3`,
        gridRow: v27(e11, this.reverseRow)
      })}
          ></div>
        `
    )}
    `;
  }
  render() {
    return Ht`
      <div class="grid">
        ${P18(1, 27).map(
      (e11) => Ht`
            <div
              style=${h20({
        gridColumn: y30(e11, this.reverseCol),
        gridRow: v27(e11, this.reverseRow)
      })}
            >
              <frc-scoring-grid-node
                node-id=${e11}
                ?selected=${this.selection === e11}
                @click=${() => {
        f36(this, b30, O18).call(this, e11);
      }}
                cubes=${this.cubesScored.filter((o13) => o13 === e11).length}
                cones=${this.conesScored.filter((o13) => o13 === e11).length}
              >
              </frc-scoring-grid-node>
            </div>
          `
    )}
        ${this.renderLinks()}
      </div>
    `;
  }
};
b30 = /* @__PURE__ */ new WeakSet(), O18 = function(t19) {
  this.selection === t19 ? this.selection = 0 : this.selection = t19;
  const e11 = new CustomEvent("select", {
    bubbles: true,
    composed: true,
    detail: { nodeId: this.selection }
  });
  this.dispatchEvent(e11);
}, E23 = function() {
  const t19 = [], e11 = this.cubesScored.concat(this.conesScored);
  for (let o13 = 0; o13 < 3; o13 += 1)
    for (let i27 = 1; i27 <= 7; i27 += 1)
      e11.includes(o13 * 9 + i27) && e11.includes(o13 * 9 + i27 + 1) && e11.includes(o13 * 9 + i27 + 2) && (t19.push(o13 * 9 + i27), i27 += 2);
  this.leftOfLinks = t19;
}, R20.styles = Mt`
    :host {
      display: inline-block;
      width: 550px;
      height: 380px;
    }

    .grid {
      display:grid;
      grid-template-columns: repeat(9, calc(100% / 9));
      grid-template-rows: repeat(3, calc(100% / 3));
      height:100%;
      width:100%;
      flex-direction:row-reverse;
      grid-auto-flow: dense;"
    }

    .link {
      border: 5px solid black;
      border-radius: 10px;
      margin: 5px;
      box-sizing: border-box;
      pointer-events: none;
    }
  `;
var n29 = R20;
d29([
  Rt({ type: Number })
], n29.prototype, "selection");
d29([
  Rt({ type: Array, attribute: "cubes-scored" })
], n29.prototype, "cubesScored");
d29([
  Rt({ type: Array, attribute: "cones-scored" })
], n29.prototype, "conesScored");
d29([
  Rt({ type: Boolean, attribute: "hide-links" })
], n29.prototype, "hideLinks");
d29([
  Rt({ type: Boolean, attribute: "reverse-row" })
], n29.prototype, "reverseRow");
d29([
  Rt({ type: Boolean, attribute: "reverse-col" })
], n29.prototype, "reverseCol");
d29([
  n()
], n29.prototype, "leftOfLinks");
customElements.get("frc-scoring-grid") || customElements.define("frc-scoring-grid", n29);
var D17 = xt({
  tagName: "frc-scoring-grid",
  elementClass: n29,
  react: import_react27.default,
  events: {
    onselect: "select"
  }
});

// node_modules/@frc-web-components/react/dist/components/SendableChooser.es.js
var import_react28 = __toESM(require_react(), 1);
var v28 = (t19) => {
  throw TypeError(t19);
};
var A17 = (t19, e11, o13) => e11.has(t19) || v28("Cannot " + o13);
var x33 = (t19, e11, o13) => e11.has(t19) ? v28("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(t19) : e11.set(t19, o13);
var f37 = (t19, e11, o13) => (A17(t19, e11, "access private method"), o13);
var j16 = Object.defineProperty;
var d30 = (t19, e11, o13, h26) => {
  for (var s18 = void 0, i27 = t19.length - 1, l26; i27 >= 0; i27--)
    (l26 = t19[i27]) && (s18 = l26(e11, o13, s18) || s18);
  return s18 && j16(e11, o13, s18), s18;
};
var b31;
var $23;
var S21 = class extends x {
  constructor() {
    super(...arguments), x33(this, b31), this.options = [], this.selected = "", this.default = "", this.active = "", this.label = "Auto Choices";
  }
  onChange() {
    this.selected = this.selectElement.value, f37(this, b31, $23).call(this);
  }
  render() {
    return Ht`
      <div class="container">
        ${this.label ? Ht` <p>${this.label}</p> ` : ""}
        <div class="input-container">
          <label>
            <select @change=${this.onChange} .value=${this.selected}>
              ${this.options.map(
      (e11) => Ht`
                  <option value=${e11} ?selected=${this.selected === e11}>
                    ${e11}
                  </option>
                `
    )}
            </select>
          </label>
          ${this.options.length > 0 ? Ht`
                ${this.selected === this.active ? Ht`<frc-icon icon="check" color="green"></frc-icon>` : Ht`<frc-icon icon="close" color="red"></frc-icon>`}
              ` : ""}
        </div>
      </div>
    `;
  }
};
b31 = /* @__PURE__ */ new WeakSet(), $23 = function() {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: { selected: this.selected },
      bubbles: true,
      composed: true
    })
  );
}, S21.styles = Mt`
    :host {
      display: inline-block;
      min-width: 220px;
      font-family: sans-serif;
    }

    .input-container {
      display: flex;
      align-items: flex-end;
      gap: 7px;
      width: 100%;
    }

    frc-icon {
      width: 20px;
      height: 20px;
      margin-bottom: 12px;
    }

    label {
      position: relative;
      display: inline-block;
      width: 100%;
    }

    label:after {
      content: ' ';
      position: absolute;
      right: 15px;
      top: 46%;
      margin-top: -3px;
      z-index: 2;
      pointer-events: none;
      width: 0;
      height: 0;
      border-style: solid;
      border-width: 6.9px 4px 0 4px;
      border-color: #aaa transparent transparent transparent;
      pointer-events: none;
    }

    select {
      width: 100%;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      outline: 0 none;

      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      padding: 0 30px 0 10px;

      border: 1px solid #e0e0e0;
      border-radius: 3px;
      line-height: 36px;
      height: 36px;
      background: #fff;
      margin: 0 5px 5px 0;
    }

    p {
      color: var(--frc-sendable-chooser-label-color, black);
      margin: 0;
      font-size: 13px;
      padding-left: 3px;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
  `;
var c23 = S21;
d30([
  Rt({ type: Array })
], c23.prototype, "options");
d30([
  Rt({ type: String, reflect: true })
], c23.prototype, "selected");
d30([
  Rt({ type: String })
], c23.prototype, "default");
d30([
  Rt({ type: String })
], c23.prototype, "active");
d30([
  Rt({ type: String, reflect: true })
], c23.prototype, "label");
d30([
  a("select", true)
], c23.prototype, "selectElement");
customElements.get("frc-sendable-chooser") || customElements.define("frc-sendable-chooser", c23);
var K14 = Object.defineProperty;
var a18 = (t19, e11, o13, h26) => {
  for (var s18 = void 0, i27 = t19.length - 1, l26; i27 >= 0; i27--)
    (l26 = t19[i27]) && (s18 = l26(e11, o13, s18) || s18);
  return s18 && K14(e11, o13, s18), s18;
};
var u31;
var y31;
var w28;
var k26 = class extends x {
  constructor() {
    super(...arguments), x33(this, u31), this.options = [], this.selected = "", this.default = "", this.active = "", this.label = "Auto Choices", this.sourceProvider = "", this.sourceKey = "";
  }
  updated(e11) {
    e11.has("default") && (this.options.includes(this.selected) || f37(this, u31, y31).call(this));
  }
  render() {
    return Ht`
      <frc-sendable-chooser
        @change=${f37(this, u31, w28)}
        .options=${this.options}
        .selected=${this.selected}
        .default=${this.default}
        .active=${this.active}
        .label=${this.label}
      ></frc-sendable-chooser>
    `;
  }
};
u31 = /* @__PURE__ */ new WeakSet(), y31 = function() {
  const {
    provider: t19,
    store: e11,
    sourceProvider: o13,
    sourceKey: h26,
    default: s18
  } = this;
  if (!t19 || !e11 || !o13 || !h26)
    return;
  const i27 = e11.getSource(o13, h26), l26 = e11.getSource(
    o13,
    `${h26}/selected`
  );
  if (i27 != null && i27.hasChildren() && !(l26 != null && l26.hasValue())) {
    const C21 = this.options.includes(this.selected) ? this.selected : s18;
    t19.userUpdate(`${h26}/selected`, C21);
  }
}, w28 = function(t19) {
  this.selected = t19.detail.selected, f37(this, u31, y31).call(this);
}, k26.styles = Mt`
    :host {
      display: inline-block;
      min-width: 220px;
      font-family: sans-serif;
    }

    frc-sendable-chooser {
      width: 100%;
      height: 100%;
    }
  `;
var n30 = k26;
a18([
  Rt({ type: Array })
], n30.prototype, "options");
a18([
  Rt({ type: String, reflect: true })
], n30.prototype, "selected");
a18([
  Rt({ type: String })
], n30.prototype, "default");
a18([
  Rt({ type: String })
], n30.prototype, "active");
a18([
  Rt({ type: String, reflect: true })
], n30.prototype, "label");
a18([
  Rt({ type: Object, attribute: false })
], n30.prototype, "provider");
a18([
  Rt({ type: Object, attribute: false })
], n30.prototype, "store");
a18([
  Rt({ type: String, attribute: "source-provider" })
], n30.prototype, "sourceProvider");
a18([
  Rt({ type: String, attribute: "source-key" })
], n30.prototype, "sourceKey");
customElements.get("frc-sendable-chooser-wrapper") || customElements.define("frc-sendable-chooser-wrapper", n30);
var N21 = xt({
  tagName: "frc-sendable-chooser",
  elementClass: c23,
  react: import_react28.default,
  events: {
    onchange: "change"
  }
});

// node_modules/@frc-web-components/react/dist/components/ToggleButton.es.js
var import_react29 = __toESM(require_react(), 1);
var a19 = xt({
  tagName: "frc-toggle-button",
  elementClass: e7,
  react: import_react29.default,
  events: {
    ontoggle: "toggle"
  }
});

// node_modules/@frc-web-components/react/dist/components/ToggleGroup.es.js
var import_react30 = __toESM(require_react(), 1);
var m31 = xt({
  tagName: "frc-toggle-group",
  elementClass: r23,
  react: import_react30.default,
  events: {
    onchange: "change"
  }
});

// node_modules/@frc-web-components/react/dist/components/ToggleSwitch.es.js
var import_react31 = __toESM(require_react(), 1);
var w29 = Object.defineProperty;
var u32 = (o13, e11, i27, s18) => {
  for (var t19 = void 0, r24 = o13.length - 1, l26; r24 >= 0; r24--)
    (l26 = o13[r24]) && (t19 = l26(e11, i27, t19) || t19);
  return t19 && w29(e11, i27, t19), t19;
};
var n31 = class extends x {
  constructor() {
    super(...arguments), this.toggled = false;
  }
  firstUpdated() {
    new ResizeObserver(() => this.resized()).observe(this);
  }
  resized() {
    const e11 = this.getBoundingClientRect(), { width: i27, height: s18 } = e11, t19 = this.renderRoot.querySelector("[part=switch]");
    t19 && (t19.style.borderRadius = `${i27}px`, t19.style.setProperty("--circle-width", `${s18 * 0.8}px`), t19.style.setProperty("--circle-height", `${s18 * 0.8}px`), t19.style.setProperty(
      "--circle-left",
      `${i27 / 2 - s18 * 0.8}px`
    ), t19.style.setProperty("--circle-top", `${s18 * 0.1}px`), t19.style.setProperty("--circle-translate-x", `${i27 - s18}px`));
  }
  onClick() {
    this.toggled = !this.toggled;
    const e11 = new CustomEvent("toggle", {
      detail: {
        toggled: this.toggled
      },
      bubbles: true,
      composed: true
    });
    this.dispatchEvent(e11);
  }
  render() {
    return Ht`
      <label class="switch" @click="${this.onClick}">
        <input type="checkbox" .checked="${this.toggled}" disabled />
        <span part="switch">
          <span part="knob"></span>
        </span>
      </label>
    `;
  }
};
n31.styles = Mt`
    :host {
      display: inline-block;
      width: 60px;
      height: 34px;
    }
    .switch {
      position: relative;
      display: inline-block;
      width: 100%;
      height: 100%;
      margin-bottom: 0;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    [part='switch'] {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--frc-toggle-switch-color, #ccc);
      -webkit-transition: 0.4s;
      transition: 0.4s;
    }
    [part='knob'] {
      position: absolute;
      display: inline-block;
      content: '';
      height: var(--circle-height);
      width: var(--circle-width);
      left: var(--circle-top);
      top: var(--circle-top);
      background-color: white;
      -webkit-transition: 0.4s;
      transition: 0.4s;
      border-radius: 50%;
    }
    input:checked + [part='switch'] {
      background-color: #2196f3;
    }
    input:focus + [part='switch'] {
      box-shadow: 0 0 1px #2196f3;
    }
    input:checked + [part='switch'] [part='knob'] {
      transform: translateX(var(--circle-translate-x));
    }
  `;
var c24 = n31;
u32([
  Rt({ type: Boolean })
], c24.prototype, "toggled");
customElements.get("frc-toggle-switch") || customElements.define("frc-toggle-switch", c24);
var m32 = xt({
  tagName: "frc-toggle-switch",
  elementClass: c24,
  react: import_react31.default,
  events: {
    ontoggle: "toggle"
  }
});

// node_modules/@frc-web-components/react/dist/components/VoltageView.es.js
var import_react32 = __toESM(require_react(), 1);
var g29 = xt({
  tagName: "frc-voltage-view",
  elementClass: t16,
  react: import_react32.default
});

// node_modules/@frc-web-components/react/dist/components/Preferences.es.js
var import_react33 = __toESM(require_react(), 1);
var z20 = (t19) => {
  throw TypeError(t19);
};
var $24 = (t19, e11, r24) => e11.has(t19) || z20("Cannot " + r24);
var m33 = (t19, e11, r24) => ($24(t19, e11, "read from private field"), r24 ? r24.call(t19) : e11.get(t19));
var y32 = (t19, e11, r24) => e11.has(t19) ? z20("Cannot add the same private member more than once") : e11 instanceof WeakSet ? e11.add(t19) : e11.set(t19, r24);
var k27 = (t19, e11, r24, o13) => ($24(t19, e11, "write to private field"), o13 ? o13.call(t19, r24) : e11.set(t19, r24), r24);
var n32 = (t19, e11, r24) => ($24(t19, e11, "access private method"), r24);
var q13 = Object.defineProperty;
var x34 = (t19, e11, r24, o13) => {
  for (var i27 = void 0, s18 = t19.length - 1, a22; s18 >= 0; s18--)
    (a22 = t19[s18]) && (i27 = a22(e11, r24, i27) || i27);
  return i27 && q13(e11, r24, i27), i27;
};
var c25;
var j17;
var S22;
var d31;
var w30;
var O19 = class extends x {
  constructor() {
    super(...arguments), y32(this, c25), this.sourceRoot = "", this.preferences = {}, this.search = "", this.hideTitle = false;
  }
  render() {
    return Ht`
      <div class="container">
        ${u27(!this.hideTitle, () => Ht` <header>Preferences</header> `)}

        <div class="search-input">
          <input
            placeholder="Search..."
            .value=${this.search}
            @input=${(e11) => {
      this.search = e11.target.value, n32(this, c25, S22).call(this);
    }}
          />
        </div>
        <div class="preferences-container">
          <div class="preferences">${n32(this, c25, w30).call(this, this.preferences)}</div>
        </div>
      </div>
    `;
  }
};
c25 = /* @__PURE__ */ new WeakSet(), j17 = function(t19, e11) {
  this.dispatchEvent(
    new CustomEvent("change", {
      detail: {
        property: t19,
        value: e11
      },
      bubbles: true,
      composed: true
    })
  );
}, S22 = function() {
  this.dispatchEvent(
    new CustomEvent("search", {
      detail: {
        search: this.search
      },
      bubbles: true,
      composed: true
    })
  );
}, d31 = function(t19, e11, r24, o13) {
  r24[o13] = e11, n32(this, c25, j17).call(this, t19, e11), this.requestUpdate();
}, w30 = function(t19, e11) {
  const r24 = Object.entries(t19).filter(
    ([o13, i27]) => {
      const s18 = typeof e11 < "u" ? [e11, o13].join("/") : o13;
      return o13.startsWith(".") ? false : !this.search || typeof i27 == "object" ? true : s18.toLowerCase().includes(this.search.toLowerCase());
    }
  );
  return Ht`
      ${r24.map(([o13, i27]) => {
    const s18 = typeof e11 < "u" ? [e11, o13].join("/") : o13;
    return typeof i27 == "boolean" ? Ht`
            <label title=${s18}>${s18}</label>
            <input
              type="checkbox"
              .checked=${i27}
              @change=${(a22) => {
      n32(this, c25, d31).call(this, s18, a22.target.checked, t19, o13);
    }}
            />
          ` : typeof i27 == "number" ? Ht`
            <label title=${s18}>${s18}</label>
            <div class="number-input">
              <button
                @click=${() => {
      n32(this, c25, d31).call(this, s18, i27 - 1, t19, o13);
    }}
              >
                -
              </button>
              <input
                type="number"
                .value=${i27}
                @change=${(a22) => {
      n32(this, c25, d31).call(this, s18, parseFloat(a22.target.value), t19, o13);
    }}
              />
              <button
                @click=${() => {
      n32(this, c25, d31).call(this, s18, i27 + 1, t19, o13);
    }}
              >
                +
              </button>
            </div>
          ` : typeof i27 == "string" ? Ht`
            <label title=${s18}>${s18}</label>
            <input
              type="text"
              .value=${i27}
              @change=${(a22) => {
      n32(this, c25, d31).call(this, s18, a22.target.value, t19, o13);
    }}
            />
          ` : n32(this, c25, w30).call(this, i27, s18);
  })}
    `;
}, O19.styles = Mt`
    :host {
      display: inline-block;
      width: 250px;
      height: 250px;
      font-family: sans-serif;
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 3px;
      height: 100%;
      width: 100%;
    }

    header {
      background: var(--frc-preferences-header-background-color, lightblue);
      color: var(--frc-preferences-label-color, black);
      text-align: center;
      padding: 5px 3px;
      border-radius: 3px;
      margin: 0 3px;
      font-size: 15px;
    }

    .search-input {
      padding: 0 3px;
    }

    .preferences-container {
      flex: 1;
      overflow: auto;
      width: 100%;
      box-sizing: border-box;

      .preferences {
        padding: 3px;
        display: inline-grid;
        grid-template-columns: repeat(2, 1fr);
        column-gap: 8px;
        row-gap: 5px;
        align-items: center;
        justify-items: start;
        font-family: sans-serif;
        box-sizing: border-box;
      }
    }

    input::placeholder {
      color: var(--frc-preferences-placeholder-text-color, #888);
    }

    input:not([type='checkbox']) {
      width: 100%;
      border: none;
      outline: none;
      padding: 2px 4px;
      box-sizing: border-box;
      border-radius: 2px;
    }

    input[type='checkbox'] {
      width: 20px;
      height: 20px;
      appearance: none;
      -webkit-appearance: none;
      display: flex;
      align-content: center;
      justify-content: center;
      font-size: 2rem;
      padding: 0.1rem;
      border-radius: 3px;
    }

    input[type='checkbox']::before {
      content: ' ';
      /* https://yoksel.github.io/url-encoder/ */
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' viewBox='0 -960 960 960' width='24' style='&%2310; fill: white;&%2310;'%3E%3Cpath d='M382-218 130-470l75-75 177 177 375-375 75 75-450 450Z'/%3E%3C/svg%3E");
      width: 100%;
      background-size: 100% 100%;
      width: 100%;
      height: 100%;
      transform-origin: bottom left;
      transform: scale(0);
    }

    input[type='checkbox']:checked::before {
      transform: scale(1);
    }

    input[type='checkbox']:checked {
      background: #0c6ce9;
    }

    input {
      margin: 0;
      box-sizing: border-box;
      color: var(--frc-preferences-input-text-color, black);
      background: var(
        --frc-preferences-input-background-color,
        rgba(0, 0, 0, 0.1)
      );
    }

    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    /* Firefox */
    input[type='number'] {
      -moz-appearance: textfield;
    }

    .number-input {
      display: flex;
      background: var(
        --frc-preferences-input-background-color,
        rgba(0, 0, 0, 0.1)
      );
      box-sizing: border-box;
      height: 20px;
      border-radius: 2px;

      button {
        padding: 0;
        height: 100%;
        width: 20px;
        border: none;
        cursor: pointer;
        background: none;
        line-height: 20px;
        font-size: 15px;
        color: var(--frc-preferences-input-button-text-color, #444);
      }

      input {
        flex: 1;
        background: none;
        text-align: center;
      }
    }

    label {
      color: var(--frc-preferences-label-color, black);
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      width: 100%;
    }
  `;
var b32 = O19;
x34([
  Rt({ type: String, attribute: "source-root" })
], b32.prototype, "sourceRoot");
x34([
  Rt({ type: Object })
], b32.prototype, "preferences");
x34([
  Rt({ type: String })
], b32.prototype, "search");
x34([
  Rt({ type: Boolean, attribute: "hide-title" })
], b32.prototype, "hideTitle");
customElements.get("frc-preferences") || customElements.define("frc-preferences", b32);
var R21 = Object.defineProperty;
var u33 = (t19, e11, r24, o13) => {
  for (var i27 = void 0, s18 = t19.length - 1, a22; s18 >= 0; s18--)
    (a22 = t19[s18]) && (i27 = a22(e11, r24, i27) || i27);
  return i27 && R21(e11, r24, i27), i27;
};
var g30;
var v29;
var f38;
var P19;
var T19;
var K15;
var U19 = class extends x {
  constructor() {
    super(...arguments), y32(this, f38), y32(this, g30), y32(this, v29), this.search = "", this.hideTitle = false, this.sourceKey = "", this.sourceProvider = "", k27(this, g30, {});
  }
  updated(e11) {
    (e11.has("sourceProvider") || e11.has("sourceKey") || e11.has("store")) && n32(this, f38, K15).call(this);
  }
  disconnectedCallback() {
    var e11;
    super.disconnectedCallback(), (e11 = m33(this, v29)) == null || e11.call(this);
  }
  render() {
    return Ht`
      <frc-preferences
        @change=${(e11) => n32(this, f38, P19).call(this, e11)}
        @search=${(e11) => n32(this, f38, T19).call(this, e11)}
        source-root=${this.sourceKey}
        search=${this.search}
        ?hide-title=${this.hideTitle}
        .preferences=${m33(this, g30)}
      ></frc-preferences>
    `;
  }
};
g30 = /* @__PURE__ */ new WeakMap(), v29 = /* @__PURE__ */ new WeakMap(), f38 = /* @__PURE__ */ new WeakSet(), P19 = function(t19) {
  var e11;
  const { property: r24, value: o13 } = t19.detail;
  (e11 = this.provider) == null || e11.userUpdate([this.sourceKey, r24].join("/"), o13);
}, T19 = function(t19) {
  const { search: e11 } = t19.detail;
  this.search = e11;
}, K15 = function() {
  var t19, e11;
  (t19 = m33(this, v29)) == null || t19.call(this), k27(this, v29, (e11 = this.store) == null ? void 0 : e11.subscribe(
    this.sourceProvider,
    this.sourceKey,
    () => {
      var r24;
      const o13 = (r24 = this.store) == null ? void 0 : r24.getSource(
        this.sourceProvider,
        this.sourceKey
      );
      k27(this, g30, (o13 == null ? void 0 : o13.getJson(false)) ?? {}), this.requestUpdate();
    },
    true
  ));
}, U19.styles = Mt`
    :host {
      display: inline-block;
      width: 250px;
      height: 250px;
    }

    frc-preferences {
      width: 100%;
      height: 100%;
    }
  `;
var l24 = U19;
u33([
  Rt({ type: String })
], l24.prototype, "search");
u33([
  Rt({ type: Boolean, attribute: "hide-title" })
], l24.prototype, "hideTitle");
u33([
  Rt({ type: String, attribute: "source-key" })
], l24.prototype, "sourceKey");
u33([
  Rt({ type: String, attribute: "source-provider" })
], l24.prototype, "sourceProvider");
u33([
  Rt({ type: Object })
], l24.prototype, "source");
u33([
  Rt({ type: Object, attribute: false })
], l24.prototype, "provider");
u33([
  Rt({ type: Object, attribute: false })
], l24.prototype, "store");
customElements.get("frc-preferences-wrapper") || customElements.define("frc-preferences-wrapper", l24);
var Z11 = xt({
  tagName: "frc-preferences",
  elementClass: b32,
  react: import_react33.default,
  events: {
    onchange: "change",
    onsearch: "search"
  }
});

// node_modules/@frc-web-components/react/dist/components/Labels.es.js
var import_react34 = __toESM(require_react(), 1);
var y33 = Object.defineProperty;
var v30 = (e11, r24, n33, g32) => {
  for (var t19 = void 0, i27 = e11.length - 1, l26; i27 >= 0; i27--)
    (l26 = e11[i27]) && (t19 = l26(r24, n33, t19) || t19);
  return t19 && y33(r24, n33, t19), t19;
};
var u34 = class extends x {
  constructor() {
    super(...arguments), this.text = "";
  }
  render() {
    return Ht`${this.text}`;
  }
};
u34.styles = Mt`
    :host {
      display: inline;
      font-size: inherit;
      font-family: inherit;
      font-weight: inherit;
      text-align: inherit;
      margin: 0;
      padding: 0;
      color: var(--frc-label-text-color, black);
    }
  `;
var s17 = u34;
v30([
  Rt({ type: String })
], s17.prototype, "text");
customElements.get("frc-label") || customElements.define("frc-label", s17);
var x35 = Object.defineProperty;
var b33 = (e11, r24, n33, g32) => {
  for (var t19 = void 0, i27 = e11.length - 1, l26; i27 >= 0; i27--)
    (l26 = e11[i27]) && (t19 = l26(r24, n33, t19) || t19);
  return t19 && x35(r24, n33, t19), t19;
};
var d32 = class extends x {
  constructor() {
    super(...arguments), this.value = 0, this.precision = 2;
  }
  render() {
    const r24 = Math.max(0, this.precision), n33 = this.value.toFixed(r24);
    return Ht`${n33}`;
  }
};
d32.styles = Mt`
    :host {
      display: inline;
      font-size: inherit;
      font-family: inherit;
      font-weight: inherit;
      text-align: inherit;
      margin: 0;
      padding: 0;
      color: var(--frc-label-text-color, black);
    }
  `;
var o12 = d32;
b33([
  Rt({ type: Number })
], o12.prototype, "value");
b33([
  Rt({ type: Number })
], o12.prototype, "precision");
customElements.get("frc-number-label") || customElements.define("frc-number-label", o12);
var j18 = xt({
  tagName: "frc-label",
  elementClass: s17,
  react: import_react34.default
});
var k28 = xt({
  tagName: "frc-number-label",
  elementClass: o12,
  react: import_react34.default
});

// node_modules/@frc-web-components/react/dist/networktables/index.es.js
var import_react35 = __toESM(require_react(), 1);
var import_jsx_runtime5 = __toESM(require_jsx_runtime(), 1);
function b34(e11, t19, s18) {
  const { store: o13 } = me7();
  (0, import_react35.useEffect)(() => o13.subscribe(
    "NetworkTables",
    e11,
    (r24) => {
      t19(e11, r24);
    },
    s18
  ), []);
}
function d33(e11, t19) {
  const { nt4Provider: s18 } = me7(), [o13, r24] = (0, import_react35.useState)(t19), i27 = (0, import_react35.useCallback)((n33) => {
    s18.userUpdate(e11, n33);
  }, []);
  return b34(
    e11,
    (n33, u35) => {
      r24(u35 === void 0 ? t19 : u35);
    },
    true
  ), [o13, i27];
}
function T20(e11, t19) {
  const { store: s18 } = me7();
  (0, import_react35.useEffect)(() => s18.subscribeAll(
    "NetworkTables",
    (o13, r24) => {
      e11(r24, o13);
    },
    t19
  ), []);
}
function g31(e11, t19, s18 = true) {
  const { store: o13 } = me7(), [r24, i27] = (0, import_react35.useState)(t19);
  return b34(
    e11,
    () => {
      var u35;
      const n33 = (u35 = o13.getSource("NetworkTables", e11)) == null ? void 0 : u35.getJson(s18);
      i27(n33);
    },
    true
  ), r24;
}

// node_modules/@frc-web-components/react/dist/fwc-react.es.js
var import_react36 = __toESM(require_react());
var import_jsx_runtime6 = __toESM(require_jsx_runtime());
export {
  n4 as Accelerometer,
  f3 as Axis,
  i3 as Bar,
  _15 as BasicFmsInfo,
  g20 as BooleanBox,
  Nt7 as Canvas,
  zt5 as CanvasCircle,
  Tt7 as CanvasGroup,
  Mt8 as CanvasLine,
  Pt7 as CanvasMjpgStream,
  _t7 as CanvasNGon,
  Wt6 as CanvasRect,
  jt7 as CanvasText,
  G13 as CheckboxGroup,
  St7 as Differential,
  v23 as Encoder,
  yt12 as Field,
  X_ as Field3d,
  q_2 as Field3dObject,
  J_ as Field3dPoseVisualizer,
  Y_ as Field3dUrdf,
  wt8 as FieldPath,
  bt8 as FieldRobot,
  kt8 as Gauge,
  j13 as Gyro,
  c20 as Icon,
  i22 as KeyValueTable,
  j18 as Label,
  Ji4 as LineChart,
  Ri4 as LineChartAxis,
  Ki5 as LineChartData,
  eo3 as LineChartLegend,
  F17 as Logger,
  Rt7 as Mecanum,
  B19 as Mechanism2d,
  ge5 as NT4Provider,
  k24 as NetworkAlerts,
  b28 as NumberBar,
  k28 as NumberLabel,
  N18 as NumberSlider,
  E22 as Pdp,
  B20 as PidCommand,
  H15 as PidController,
  Z11 as Preferences,
  T18 as ProfiledPidController,
  R19 as Relay,
  R15 as RobotCommand,
  V13 as RobotSubsystem,
  D17 as ScoringGrid,
  N21 as SendableChooser,
  kt7 as Swerve,
  M3 as ThreeAxisAccelerometer,
  a19 as ToggleButton,
  m31 as ToggleGroup,
  m32 as ToggleSwitch,
  Z_ as Urdf,
  g29 as VoltageView,
  d33 as useEntry,
  z15 as useFmsInfo,
  T20 as useGlobalListener,
  g31 as useJson,
  b34 as useKeyListener,
  _20 as useMechanism2dRoots,
  me7 as useNt4
};
/*! Bundled license information:

@frc-web-components/react/dist/property-C4BPH-wS-7fb0a59c.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/state-Cn3aen3G-6b8e5a08.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/query-BrpQj_Qi-db00b239.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/fwc/dist/property-C4BPH-wS.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/fwc/dist/state-Cn3aen3G.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/fwc/dist/query-BrpQj_Qi.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/fwc/dist/components/field3d.es.js:
  (**
   * @license
   * Copyright 2010-2023 Three.js Authors
   * SPDX-License-Identifier: MIT
   *)

@frc-web-components/fwc/dist/directive-helpers-CDfQTKPA.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/fwc/dist/directive-B76A7YXI.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/fwc/dist/style-map-CXHve4fi.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/fwc/dist/components/line-chart.es.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/fwc/dist/when-CDK1Tt5Y.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/fwc/dist/components/canvas.es.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/directive-B76A7YXI-abc0af54.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/directive-helpers-CDfQTKPA-206aa42d.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/components/Canvas.es.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/components/Field3d.es.js:
  (**
   * @license
   * Copyright 2010-2023 Three.js Authors
   * SPDX-License-Identifier: MIT
   *)

@frc-web-components/react/dist/style-map-CXHve4fi-4b8d68f4.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/components/LineChart.es.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@frc-web-components/react/dist/when-CDK1Tt5Y-835602a5.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
//# sourceMappingURL=@frc-web-components_react.js.map
